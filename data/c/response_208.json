[{"tags": ["c"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 4, "creation_date": 1546474114, "post_id": 54014666, "comment_id": 94866678, "body": "Pretty sure the answer is &quot;No.&quot; That&#39;s because the member offset calculations are handled in the code, and don&#39;t appear in the symbol table. And of course you can&#39;t rely on the offset being constant for all versions of the library."}, {"owner": {"reputation": 554, "user_id": 1770034, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/94179b72a263c9a963250f164a4b2371?s=128&d=identicon&r=PG", "display_name": "Questionable", "link": "https://stackoverflow.com/users/1770034/questionable"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1546474383, "post_id": 54014666, "comment_id": 94866729, "body": "@user3386109 - Does that mean that for a given arch (ie: x86, x86_64) I am unable to use <code>int* b = (int*) (dlsym(handle, &quot;structure&quot;) + 4);</code> I suppose the answer is &quot;No&quot; because the compiler may reorder my members to reduce padding between members."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1546474593, "post_id": 54014666, "comment_id": 94866778, "body": "Using fixed offsets won&#39;t work in the long run. For example version 1 of the library has <code>int a; int b;</code> Then version 2 of the library adds another member <code>int a; int c; int b;</code>. The offset to <code>b</code> <i>will</i> change. So even if you have the header for the structure, you need to use the correct version of the header for each version of the library."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 2, "creation_date": 1546474729, "post_id": 54014666, "comment_id": 94866796, "body": "BTW, although the compiler may put padding between members, it is not allowed to reorder members."}, {"owner": {"reputation": 554, "user_id": 1770034, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/94179b72a263c9a963250f164a4b2371?s=128&d=identicon&r=PG", "display_name": "Questionable", "link": "https://stackoverflow.com/users/1770034/questionable"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1546475047, "post_id": 54014666, "comment_id": 94866872, "body": "@user3386109 - Thank you I didn&#39;t realize that. I thought that you needed to use <code>__attribute__((packed))</code> [in gcc] to prevent reordering, but that attribute really only prevents padding from being inserted and you assume responsibility of aligning the data correctly."}], "answers": [{"comments": [{"owner": {"reputation": 554, "user_id": 1770034, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/94179b72a263c9a963250f164a4b2371?s=128&d=identicon&r=PG", "display_name": "Questionable", "link": "https://stackoverflow.com/users/1770034/questionable"}, "edited": false, "score": 0, "creation_date": 1546474268, "post_id": 54014715, "comment_id": 94866707, "body": "This will work, but does the symbol table keep track of the offsets so that I can access the member &quot;b&quot; without the compiler having the structure defined? I can manually do <code>int* b = (int*) (dlsym(handle, &quot;structure&quot;) + 4);</code>"}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "reply_to_user": {"reputation": 554, "user_id": 1770034, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/94179b72a263c9a963250f164a4b2371?s=128&d=identicon&r=PG", "display_name": "Questionable", "link": "https://stackoverflow.com/users/1770034/questionable"}, "edited": false, "score": 0, "creation_date": 1546474412, "post_id": 54014715, "comment_id": 94866740, "body": "<code>without the compiler having the structure defined?</code> - you can, but notice that this is wrong. Read about padding in structures. You can export <code>offsetof(struct myStruct, b)</code> in a variable and then <code>(int*)((uintptr_t)dlsym(handle, &quot;structure&quot;) + offsetof(struct myStruct, b))</code> but it feels crude. It is wrong to assume that <code>offsetof(struct myStruct, b)</code> is equal to 4."}, {"owner": {"reputation": 554, "user_id": 1770034, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/94179b72a263c9a963250f164a4b2371?s=128&d=identicon&r=PG", "display_name": "Questionable", "link": "https://stackoverflow.com/users/1770034/questionable"}, "edited": false, "score": 0, "creation_date": 1546474580, "post_id": 54014715, "comment_id": 94866774, "body": "Thank you. Yes, I didn&#39;t consider that the compiler may reorder the members to reduce padding between the elements."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "reply_to_user": {"reputation": 554, "user_id": 1770034, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/94179b72a263c9a963250f164a4b2371?s=128&d=identicon&r=PG", "display_name": "Questionable", "link": "https://stackoverflow.com/users/1770034/questionable"}, "edited": false, "score": 3, "creation_date": 1546474656, "post_id": 54014715, "comment_id": 94866788, "body": "@Questionable A C compiler may <i>not</i> reorder members of a struct."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1546475393, "post_id": 54014715, "comment_id": 94866941, "body": "To me it seems a lot cleaner to export a &quot;getter&quot; that returns the value of <code>b</code>."}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1546475450, "post_id": 54014715, "comment_id": 94866957, "body": "@user3386109 and another &quot;setter&quot; for setting it."}, {"owner": {"reputation": 554, "user_id": 1770034, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/94179b72a263c9a963250f164a4b2371?s=128&d=identicon&r=PG", "display_name": "Questionable", "link": "https://stackoverflow.com/users/1770034/questionable"}, "edited": false, "score": 0, "creation_date": 1546475933, "post_id": 54014715, "comment_id": 94867052, "body": "While the the answer with the <code>size_t</code> and the <code>offsetof_member_b_in_mystruct</code> is a bit crude looking. I like it. It answers my question. It may not be super practical but it shows that it is possible. Thank you!"}], "tags": [], "owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "is_accepted": true, "score": 2, "last_activity_date": 1546475122, "last_edit_date": 1546475122, "creation_date": 1546473410, "answer_id": 54014715, "question_id": 54014666, "link": "https://stackoverflow.com/questions/54014666/getting-address-of-a-member-in-a-struct-with-dynamic-libraries/54014715#54014715", "title": "Getting address of a member in a struct with dynamic libraries", "body": "<blockquote>\n  <p>the address to member directly</p>\n</blockquote>\n\n<p>The normal way looks like this:</p>\n\n<pre><code>struct myStruct *pnt = (struct myStruct*) dlsym(handle, \"structure\");\nint *b = &amp;pnt-&gt;b;\n</code></pre>\n\n<p>Now let's substitute <code>s/pnt/((struct myStruct*) dlsym(handle, \"structure\"))/</code>. That's:</p>\n\n<pre><code>int *b = &amp;((struct myStruct*) dlsym(handle, \"structure\"))-&gt;b;\n</code></pre>\n\n<blockquote>\n  <p>without the compiler having the structure defined? (from comments)</p>\n</blockquote>\n\n<p>This could be a bit tricky, but we can do it. You would need to export another symbol:</p>\n\n<pre><code>const size_t offsetof_member_b_in_myStruct = offset(struct myStruct, b);\n</code></pre>\n\n<p>And then later in client code:</p>\n\n<pre><code>int *b = (int*)(\n             (uintptr_t)dlsym(handle, \"structure\") + \n             *(size_t*)dlsym(handle, \"offsetof_member_b_in_myStruct\")\n         );\n</code></pre>\n\n<p>I guess such API could be consistent, but feels bad. It's simpler to export the structure to client code. Maybe in a general case, better create a standard specifying memory layout of the structure you are interchanging with client code (thus you push the responsibility to clients to provide proper abstraction).</p>\n"}, {"tags": [], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "is_accepted": false, "score": 1, "last_activity_date": 1546473421, "creation_date": 1546473421, "answer_id": 54014720, "question_id": 54014666, "link": "https://stackoverflow.com/questions/54014666/getting-address-of-a-member-in-a-struct-with-dynamic-libraries/54014720#54014720", "title": "Getting address of a member in a struct with dynamic libraries", "body": "<p>With <code>extern struct myStruct structure;</code> there will be an entry in the symbol table pointing to <code>structure</code>\nand it will be keyed to the string <code>structure</code>.</p>\n\n<p>To get the address of its b member, you simply do:</p>\n\n<pre><code>struct myStruct *p = dlsym(handle, \"structure\");\nif(!p) fail();\nint *pb = &amp;p-&gt;b;\n</code></pre>\n"}], "owner": {"reputation": 554, "user_id": 1770034, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/94179b72a263c9a963250f164a4b2371?s=128&d=identicon&r=PG", "display_name": "Questionable", "link": "https://stackoverflow.com/users/1770034/questionable"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 54014715, "answer_count": 2, "score": 1, "last_activity_date": 1546475122, "creation_date": 1546472924, "question_id": 54014666, "link": "https://stackoverflow.com/questions/54014666/getting-address-of-a-member-in-a-struct-with-dynamic-libraries", "title": "Getting address of a member in a struct with dynamic libraries", "body": "<p>By looking at this answer: <a href=\"https://stackoverflow.com/a/4671482/1770034\">https://stackoverflow.com/a/4671482/1770034</a> I can use dlsym to get a global variable in C. Is it possible to get a member from a struct.</p>\n\n<p>I'm guessing that if I had the following code in a shared object:</p>\n\n<p>header.h</p>\n\n<pre><code>struct myStruct\n{\n    int a;\n    int b;\n};\n</code></pre>\n\n<p>imp.c</p>\n\n<pre><code>struct myStruct structure = { 123, 456 };\n</code></pre>\n\n<p>I could include the same header.h file and cast the whole pointer to a struct myStruct*. <code>struct myStruct * capturedStructure = (struct myStruct*) dlsym(handle, \"structure\");</code></p>\n\n<p>However, is there a way to get the address to member directly. I'm guessing I'm unable to do something like: <code>int* c = (int*) dlsym(handle, \"structure.b\");</code></p>\n\n<p>Since dlsym allows a person to grab a function or global by itself (without a header), I'm hoping that I can also grab a member without requiring a header.</p>\n"}, {"tags": ["c", "radare2"], "answers": [{"tags": [], "owner": {"reputation": 353, "user_id": 10323878, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-plzeO62ix3o/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaPo1tcY3wI3WX-oxTa7LEBIB7BzNw/mo/photo.jpg?sz=128", "display_name": "William Taylor", "link": "https://stackoverflow.com/users/10323878/william-taylor"}, "is_accepted": true, "score": 4, "last_activity_date": 1550492069, "creation_date": 1550492069, "answer_id": 54747073, "question_id": 54014651, "link": "https://stackoverflow.com/questions/54014651/how-to-fix-r-cons-h-r-types-hno-such-file-or-directory-while-installing-r2dec/54747073#54747073", "title": "How to fix &quot;r_cons.h/r_types.h:no such file or directory&quot; while installing r2dec", "body": "<p>Try this: <code>sudo apt install pkg-config</code></p>\n"}, {"comments": [{"owner": {"reputation": 1635, "user_id": 3571016, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yTG7n.png?s=128&g=1", "display_name": "camba1", "link": "https://stackoverflow.com/users/3571016/camba1"}, "edited": false, "score": 0, "creation_date": 1562643991, "post_id": 56944729, "comment_id": 100429762, "body": "How did installing lib zip solve the issue. In general, while solving an issue is very much welcomed, please try to provide some context about how the answer solved the problem ."}, {"owner": {"reputation": 36, "user_id": 4425155, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Kv7JNtUmIhI/AAAAAAAAAAI/AAAAAAAAANU/YL1ksE_JJyk/photo.jpg?sz=128", "display_name": "Tom Marshall", "link": "https://stackoverflow.com/users/4425155/tom-marshall"}, "reply_to_user": {"reputation": 1635, "user_id": 3571016, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yTG7n.png?s=128&g=1", "display_name": "camba1", "link": "https://stackoverflow.com/users/3571016/camba1"}, "edited": false, "score": 0, "creation_date": 1562735207, "post_id": 56944729, "comment_id": 100464711, "body": "Thanks, camba1. I added more details to the answer."}], "tags": [], "owner": {"reputation": 36, "user_id": 4425155, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Kv7JNtUmIhI/AAAAAAAAAAI/AAAAAAAAANU/YL1ksE_JJyk/photo.jpg?sz=128", "display_name": "Tom Marshall", "link": "https://stackoverflow.com/users/4425155/tom-marshall"}, "is_accepted": false, "score": 1, "last_activity_date": 1562735175, "last_edit_date": 1562735175, "creation_date": 1562641004, "answer_id": 56944729, "question_id": 54014651, "link": "https://stackoverflow.com/questions/54014651/how-to-fix-r-cons-h-r-types-hno-such-file-or-directory-while-installing-r2dec/56944729#56944729", "title": "How to fix &quot;r_cons.h/r_types.h:no such file or directory&quot; while installing r2dec", "body": "<p>libzip is one of the requirements to install r2dec. For some reason, I cannot find the webpage that explained the dependency, but I remember seeing it. libzip was already installed, but the \"dev\" package, which contains the headers for the library, wasn't. Installing libzip-dev seemed to resolve the issue.</p>\n"}], "owner": {"reputation": 175, "user_id": 10854709, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nig_gS81jRY/AAAAAAAAAAI/AAAAAAAAAqQ/HOkv5BT6UYc/photo.jpg?sz=128", "display_name": "Abrogans", "link": "https://stackoverflow.com/users/10854709/abrogans"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 852, "favorite_count": 0, "accepted_answer_id": 54747073, "answer_count": 2, "score": 3, "last_activity_date": 1562735175, "creation_date": 1546472824, "question_id": 54014651, "link": "https://stackoverflow.com/questions/54014651/how-to-fix-r-cons-h-r-types-hno-such-file-or-directory-while-installing-r2dec", "title": "How to fix &quot;r_cons.h/r_types.h:no such file or directory&quot; while installing r2dec", "body": "<p>I'm trying to install r2dec plugin for radare2. The Build fails because there are some files missing.</p>\n\n<p>first I did run following commands</p>\n\n<blockquote>\n  <p>$r2pm init</p>\n</blockquote>\n\n<p>then</p>\n\n<blockquote>\n  <p>$r2pm init</p>\n</blockquote>\n\n<p>then i tried to install it with :</p>\n\n<blockquote>\n  <p>$r2pm -i r2dec</p>\n</blockquote>\n\n<p>When the build failed I installed npm because a comment on this answer suggested it\n<a href=\"https://stackoverflow.com/a/51466052/10854709\">https://stackoverflow.com/a/51466052/10854709</a></p>\n\n<blockquote>\n  <p>$sudo apt install nodejs</p>\n</blockquote>\n\n<p>Expected output would be a successful build.</p>\n\n<p>the actual output is the following:</p>\n\n<p>Install Done For r2dec\nmake: Entering directory '/home/me/.local/share/radare2/r2pm/git/r2dec-js/p'\ncc -I/home/me/.local/share/radare2/prefix/include -g -O3 -I/usr/include/libr -I./duktape -L/home/me/.local/share/radare2/prefix/lib -lr_core -lr_config -lr_debug -lr_bin -lr_anal -lr_bp -lr_egg -lr_asm -lr_lang -lr_parse -lr_flag -lr_cons -lr_reg -lr_search -lr_syscall -lr_fs -lr_io -lr_socket -lr_magic -lr_crypto -lr_hash -lr_util -ldl -lm -std=c99 -shared -fPIC duktape/duktape.c duktape/duk_console.c core_pdd.c -o core_pdd.so</p>\n\n<p>duktape/duk_console.c:13:20: fatal error: r_cons.h: No such file or directory</p>\n\n<p>[..]<br>\ncore_pdd.c:8:21: fatal error: r_types.h: No such file or directory</p>\n\n<p>[..]</p>\n\n<p>compilation terminated.\nMakefile:10: recipe for target 'all' failed\nmake: *** [all] Error 1\nmake: Leaving directory '/home/me/.local/share/radare2/r2pm/git/r2dec-js/p'</p>\n"}, {"tags": ["c", "scanf", "eof"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1546472529, "post_id": 54014577, "comment_id": 94866342, "body": "<code>(fscanf(...) == EOF</code> the program needs to break out of the function --&gt; That is a weak test.  Better to test against the one desired return - perhaps like <code>(fscanf(...) != 4</code>.  Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1546472696, "post_id": 54014577, "comment_id": 94866378, "body": "Post definition of <code>studentT</code>.  The post is better, yet not complete enough to compile."}, {"owner": {"reputation": 83, "user_id": 7754119, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/b61c26f9b193abc4d1c91015d557cff0?s=128&d=identicon&r=PG&f=1", "display_name": "Leet", "link": "https://stackoverflow.com/users/7754119/leet"}, "edited": false, "score": 0, "creation_date": 1546472948, "post_id": 54014577, "comment_id": 94866429, "body": "I wasn&#39;t sure as to which parts of the code were relevant to the question. I hope this helps. Thanks again."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1546473060, "post_id": 54014577, "comment_id": 94866455, "body": "Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> showing exactly how you are using <code>fscanf()</code>, particularly your actual format string"}, {"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 0, "creation_date": 1546473949, "post_id": 54014577, "comment_id": 94866637, "body": "Note that your code is strange. You pass <code>pApousies</code> as a parameter to the function <code>readInput</code>, and don&#39;t use it.  The you declare a local variable <code>apousies</code> and use it in the call to fscanf.  Your test of <code>nscan == EOF</code> looks ok to me."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1546475170, "post_id": 54014577, "comment_id": 94866891, "body": "To reproduce the problem, it would have been better to form the text file from code that post it.  I suspect your true text file differs from the one here in some white-space way."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1546479493, "post_id": 54014577, "comment_id": 94867696, "body": "the function: <code>fscanf()</code>  like all the <code>scanf()</code> family of function, returns the number of successful conversion.  Except when no successful conversions and not characters left in file (not even a &#39;\\n&#39;) and it is trying to read past the end of file, then it returns EOF"}], "answers": [{"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 4, "last_activity_date": 1546489387, "last_edit_date": 1546489387, "creation_date": 1546474235, "answer_id": 54014812, "question_id": 54014577, "link": "https://stackoverflow.com/questions/54014577/fscanf-returns-3-instead-of-1-eof-at-the-end-of-the-file/54014812#54014812", "title": "fscanf returns 3 instead of -1 (EOF) at the end of the file", "body": "<blockquote>\n  <p>fscanf returns 3 instead of -1 (EOF) at the end of the file</p>\n</blockquote>\n\n<p>Because the last line lacks a <code>'\\n'</code>.</p>\n\n<hr>\n\n<p>OP's code \"works\" with the <code>\"tmp.txt\"</code> the below code makes.</p>\n\n<p><code>fscanf()</code> is hard to use right.  Easier to code and debug with <code>fgets()</code>.  Discussion follows.</p>\n\n<hr>\n\n<p><code>\"%30[^,]\"</code> allows too much for <code>char name[30]</code>.  Use <code>char name[30+1]</code> or <code>\"%29[^,]\"</code></p>\n\n<p>OP's approach can readily fail with seemingly minor parsing problems such as a missing <code>'\\n'</code> on the last line.  After such a failure, recovery is extraordinary difficult with <code>fscanf()</code></p>\n\n<p>Debug: Importantly, the below print should not be attempted until code insures <code>nscan &gt;= 4</code></p>\n\n<pre><code>if (nscan &gt;= 4) // add\n  printf(\"onoma: %s apousies: %d sxolia: %s terma: %c\\n\", name, apousies,  comments, termch);\n</code></pre>\n\n<hr>\n\n<p>Instead, use <code>fgets()</code>.  With <em>line</em> orientated data, this really is the best first step.</p>\n\n<p><code>fscanf()</code> is challenging to use and cope with errors.  Far simpler to read a <em>line</em> with <code>fgets()</code> and then parse.</p>\n\n<p>Using <code>\" %n\"</code> is a nice way to detect if <em>all</em> the line parsed.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#define M 100\n\ntypedef struct {\n  char name[30];\n  int apousies;\n} studentT;\n\nvoid readInput(FILE* infile, studentT students[], int *pApousies,\n    int *pStudents) {\n  (void) students;\n  (void) pApousies;\n  (void) pStudents;\n  int line = 0;\n  char buf[200];\n  while (fgets(buf, sizeof buf, infile)) {\n    int apousies;\n    char name[30], comments[68];\n    int n = 0;\n\n    line++;\n    sscanf(buf, \" %29[^,],%d , %67[^\\n] %n\", name, &amp;apousies, comments, &amp;n);\n    if (n == 0 || buf[n]) {\n      fprintf(stderr, \"Error in line %d &lt;%s&gt;. Program termination\\n\", line, buf);\n      exit(1);\n    }\n    printf(\"Success %d &lt;%s&gt; %d &lt;%s&gt;\\n\", line, name, apousies, comments);\n  }\n}\n</code></pre>\n\n<p>Sample use</p>\n\n<pre><code>int main() {\n  FILE *f = fopen(\"tmp.txt\", \"w\");\n  fputs(\"CHRISTOU GIORGOS,140,VAS. OLGAS 112\\n\"\n      \"MALAKOU MALAKOS,150,DRAS. BAGAS 12\\n\"\n      \"TSIKOU GIJRAN,140,JABS. DRALGAS 1\\n\"\n      \"TSIKOU BIRBAN,140,JABS. DRALGAS 1\\n\"\n      \"DELHDHMHTRIOU SPYROS,50,SPEED. BAGAS 62\\n\"\n      \"FOX SIN,40,BAN. NINJA 1\\n\", f);\n  fclose(f);\n\n  f = fopen(\"tmp.txt\", \"r\");\n  studentT st[M];\n  readInput(f, st, NULL, NULL);\n  fclose(f);\n}\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>Success 1 &lt;CHRISTOU GIORGOS&gt; 140 &lt;VAS. OLGAS 112&gt;\nSuccess 2 &lt;MALAKOU MALAKOS&gt; 150 &lt;DRAS. BAGAS 12&gt;\nSuccess 3 &lt;TSIKOU GIJRAN&gt; 140 &lt;JABS. DRALGAS 1&gt;\nSuccess 4 &lt;TSIKOU BIRBAN&gt; 140 &lt;JABS. DRALGAS 1&gt;\nSuccess 5 &lt;DELHDHMHTRIOU SPYROS&gt; 50 &lt;SPEED. BAGAS 62&gt;\nSuccess 6 &lt;FOX SIN&gt; 40 &lt;BAN. NINJA 1&gt;\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 7754119, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/b61c26f9b193abc4d1c91015d557cff0?s=128&d=identicon&r=PG&f=1", "display_name": "Leet", "link": "https://stackoverflow.com/users/7754119/leet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 237, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1546489387, "creation_date": 1546472120, "last_edit_date": 1546475652, "question_id": 54014577, "link": "https://stackoverflow.com/questions/54014577/fscanf-returns-3-instead-of-1-eof-at-the-end-of-the-file", "title": "fscanf returns 3 instead of -1 (EOF) at the end of the file", "body": "<p>So there's a file I'm using fscanf() in. I've set a condition in my code that when (fscanf(...) == EOF, the program needs to break out of the function I'm currently in. The thing is, this condition is never satisfied in any of the cases where there's no more lines of text in the file. EOF is always -1, whereas fscanf(...) returns 4 each time there's a line of code, and 3 when there's nothing left for it to search through (instead of -1). If I add a line of code similar to the other ones, I will simply get one more instance of fscanf() returning 4, and then again, it'll give me a 3. </p>\n\n<p>What could possibly be the issue? Thank you in advance!</p>\n\n<p>Sample text file content:</p>\n\n<p>CHRISTOU GIORGOS,140,VAS. OLGAS 112</p>\n\n<p>MALAKOU MALAKOS,150,DRAS. BAGAS 12</p>\n\n<p>TSIKOU GIJRAN,140,JABS. DRALGAS 1</p>\n\n<p>TSIKOU BIRBAN,140,JABS. DRALGAS 1</p>\n\n<p>DELHDHMHTRIOU SPYROS,50,SPEED. BAGAS 62</p>\n\n<p>FOX SIN,40,BAN. NINJA 1</p>\n\n<p>Code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define M 100\n\ntypedef struct {\n    char name[30];\n    int apousies;\n} studentT;\n\nvoid readInput (FILE* infile, studentT students[], int *pApousies, int *pStudents);\n\n\nint main()\n{\n    char inputfilename[30];\n    FILE* infile;\n\n    while (1) {\n        printf(\"Input file name :\");\n        gets(inputfilename);\n\n        infile  = fopen(inputfilename, \"r\");\n\n        if (infile != NULL) break;\n        printf(\"Cannot open input file %s. Try again.\\n\", inputfilename);\n    }\n\n    studentT students[M];\n    int numberOfStudents = 0, numberOfApousies = 0;\n    readInput(infile, students, &amp;numberOfApousies, &amp;numberOfStudents);\n    fclose(infile);\n    return 0;\n}\n\nvoid readInput (FILE* infile, studentT students[], int *pApousies, int *pStudents)\n{\n    int nscan, apousies, studcount, apouscount, line;\n    char name[30], comments[68], termch;\n\n    line = 0;\n    while (1)\n    {\n        nscan = fscanf(infile, \"%30[^,], %d, %68[^\\n]%c\", name, &amp;apousies, comments, &amp;termch);\n       /* printf(\"onoma: %s apousies: %d sxolia: %s terma: %c\\n\", name, apousies, comments, termch);\n        printf(\"%d\\n\", nscan);\n        printf(\"%d\\n\", EOF);*/\n        if (nscan == EOF) break; \n        line++;\n\n        if (nscan != 4 || termch != '\\n')\n        {\n            printf(\"Error in line %d. Program termination\\n\", line);\n            exit(1);\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "sockets", "asynchronous", "epoll"], "comments": [{"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1546471928, "post_id": 54014453, "comment_id": 94866210, "body": "Your code example is a little too involved. Can you cut down the code to just the wait loop and the close of socket and the recipe to create the loop?"}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1546472279, "post_id": 54014453, "comment_id": 94866299, "body": "What is <code>MAX_EVENTS</code>?"}, {"owner": {"reputation": 920, "user_id": 8108125, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d73c63113cdabd2357f32a9808bd0559?s=128&d=identicon&r=PG&f=1", "display_name": "Cpp plus 1", "link": "https://stackoverflow.com/users/8108125/cpp-plus-1"}, "reply_to_user": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1546472484, "post_id": 54014453, "comment_id": 94866333, "body": "@jxh 10, it is passed into the maxevents parameter of epoll_wait()"}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1546478450, "post_id": 54014453, "comment_id": 94867497, "body": "[<a href=\"https://tio.run/##jVJdb4IwFH33V9y5zJSIDnzdNCHqMjMmRvHJEUKgzmYMCC0a4/ztrlAV0EnWB7if555zW7f16bqHexK4fuJheKZb@si2EabtVa9WDtPQ/cLsOo6j0PfL4SQglHkXpcwjYTnkUIrjFPFAAgbfDgkArUPiSbCrAT9plEaLjvV0doPcJNAFRbiUxYnLIGNi4zXmWazy9A7amUe5PZwYuj4a/2R/Y24KYzp4nU@EOTRhfxuuUwX3b5ScfcwxxEYjh8RIe7F1o6/pMsyM/ps9M6dD7V0GReYLkESX2BaK4a4LLVXKofDS42Bijhtjh2GklnvSimJXnNczP83KQo/dN3VbGwzSqQvFkqGB1arpmxXxMSAUnPE2DmECsIFlULkCSYIe/x6vNOO8BIRPm2zA6UKKJemJYi5uieoPHoQJ@wjqMpDj3NNx/ZBixLmq1kXmprp3o6iuU2jbVxIcjSv4keCKXjVa9mAqAFdJVC1Ysf6c1WwSEd7X9ofDLw\" rel=\"nofollow noreferrer\">tio.run/##jVJdb4IwFH33V9y5zJSIDnzdNCHqMjMmRvHJEUKgzmYMCC0a4&zwnj;&#8203;/&hellip;</a> Try it online!]"}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1546478482, "post_id": 54014453, "comment_id": 94867503, "body": "Above is an attempt to reproduce your problem, but there is no infinite loop."}], "answers": [{"comments": [{"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1546478380, "post_id": 54014775, "comment_id": 94867482, "body": "I think you have identified a root cause, but the minimal fix is to remove the <code>currentConnection.event.data.ptr = &amp;currentConnection;</code> statement."}], "tags": [], "owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "is_accepted": true, "score": 1, "last_activity_date": 1546473964, "creation_date": 1546473964, "answer_id": 54014775, "question_id": 54014453, "link": "https://stackoverflow.com/questions/54014453/linux-asynchronous-epoll-server-having-problems-when-epollrdhup-occurrs/54014775#54014775", "title": "Linux asynchronous epoll() server having problems when EPOLLRDHUP occurrs", "body": "<p>This pattern here, which you use twice, is wrong:</p>\n\n<pre><code>currentConnection.event.data.ptr = &amp;currentConnection;\nvalRead = epoll_ctl(epollFd, EPOLL_CTL_MOD, \n                    currentConnection.socket, &amp;currentConnection.event);\n</code></pre>\n\n<p>You are setting the <code>data.ptr</code> to your local variable <code>currentConnection</code> (which is reused and overwritten all the time), when it really should point into your connections-array!</p>\n\n<p>As far as I can see it, <code>currentConnection</code> should be a pointer type:</p>\n\n<pre><code>struct connection *currentConnection;\n</code></pre>\n\n<p>and the assignment later in your code should be like</p>\n\n<pre><code>currentConnection = (struct connection*)receivedEvents[eventIndex].data.ptr;\n</code></pre>\n\n<p>You have to fix the struct member accesses of course and the setting of <code>data.ptr</code> like you do here: </p>\n\n<pre><code>currentConnection.event.data.ptr = &amp;currentConnection;\n</code></pre>\n\n<p>shouldn't be necessary at all.</p>\n"}], "owner": {"reputation": 920, "user_id": 8108125, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d73c63113cdabd2357f32a9808bd0559?s=128&d=identicon&r=PG&f=1", "display_name": "Cpp plus 1", "link": "https://stackoverflow.com/users/8108125/cpp-plus-1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "accepted_answer_id": 54014775, "answer_count": 1, "score": 1, "last_activity_date": 1546473964, "creation_date": 1546471203, "last_edit_date": 1546472379, "question_id": 54014453, "link": "https://stackoverflow.com/questions/54014453/linux-asynchronous-epoll-server-having-problems-when-epollrdhup-occurrs", "title": "Linux asynchronous epoll() server having problems when EPOLLRDHUP occurrs", "body": "<p>I'm trying to make an asynchronous web server using epoll() in Linux, but problems occur whenever the event EPOLLRDHUP occurs. When the flag EPOLLONESHOT is not set, the server tries to process a useless event (not EPOLLIN or EPOLLOUT) multiple times during the loop without stopping, which causes the server to be come completely unresponsive (and require a restart). When the flag EPOLLONESHOT is set, the server simply becomes unresponsive for a short period of time (seconds) and then becomes responsive again (which still is not ideal). I'm unsure what could be causing this, since I close the socket whenever EPOLLRDHUP occurs. Here is my code:</p>\n\n<pre><code>int server_fd, new_socket; \nlong valRead;\nstruct sockaddr_in address;\nint addrlen = sizeof(address);\n\n//setup code (bind(), etc.) would be here\n\nstruct connection {\n    int socket;\n    unsigned int connectionType;\n    void* dataToSend;\n    unsigned int dataByteSize;\n    struct epoll_event event;\n    bool active;\n};\n\nstruct connection* connections = (struct connection*)malloc(1000 * sizeof(struct connection));\nconnections[0].socket = server_fd;\nconnections[0].connectionType = 1U;\nconnections[0].event.events = EPOLLIN;\nconnections[0].event.data.ptr = &amp;connections[0];\n\nunsigned int connectionIndex = 1U;\n\nfcntl(server_fd, F_SETFL, O_NONBLOCK);\n\nint epollFd = epoll_create(10);\nepoll_ctl(epollFd, EPOLL_CTL_ADD, server_fd, &amp;connections[0].event);\n\nstruct epoll_event* receivedEvents = malloc(sizeof(struct epoll_event) * 1000);\nstruct connection currentConnection;\n\n#define MAX_EVENTS 10\nint numEventsReady;\nunsigned int eventIndex;\nwhile (1) {\n    printText(\"\\n+++++++ Waiting for new connection ++++++++\\n\\n\", 46);\n\n    numEventsReady = epoll_wait(epollFd, receivedEvents, MAX_EVENTS, -1);\n    if (numEventsReady == -1) {\n        printf(\"\\nErrno:\");\n        printf(\"%i\", errno);\n        printf(\"\\n\");\n        fprintf(stderr, \"epoll_wait() failed: %s\\n\", strerror(errno));\n        exit(7);\n    }\n    eventIndex = 0U;\n    while (eventIndex &lt; numEventsReady) {\n        currentConnection = *((struct connection*)receivedEvents[eventIndex].data.ptr);\n        switch (currentConnection.connectionType) {\n        case 1U:\n            //printText(\"\\nConnected\", 10);\n            new_socket = accept4(server_fd, (struct sockaddr *)&amp;address, (socklen_t*)&amp;addrlen, SOCK_NONBLOCK | SOCK_CLOEXEC);\n            if (new_socket != -1) {\n                connections[connectionIndex].socket = new_socket;\n                connections[connectionIndex].connectionType = 2U;\n                connections[connectionIndex].event.events = EPOLLIN | EPOLLRDHUP;\n                connections[connectionIndex].event.data.ptr = &amp;connections[connectionIndex];\n\n                epoll_ctl(epollFd, EPOLL_CTL_ADD, new_socket, &amp;connections[connectionIndex].event);\n\n                ++connectionIndex;\n            }\n            break;\n        case 2U:\n            if (receivedEvents[eventIndex].events &amp; EPOLLERR) {\n                printf(\"\\nEPOLLERR\\n\");\n                close(currentConnection.socket);\n            }\n            else if(receivedEvents[eventIndex].events &amp; EPOLLHUP) {\n                printf(\"\\nEPOLLHUP\\n\");\n                close(currentConnection.socket);\n            }\n            else if(receivedEvents[eventIndex].events &amp; EPOLLRDHUP) {\n                printf(\"\\nEPOLLRDHUP\\n\");\n                close(currentConnection.socket);\n            }\n            else if (receivedEvents[eventIndex].events &amp; EPOLLIN) {\n                valRead = recv(currentConnection.socket, buffer, 65536, 0);\n                if (valRead &lt; 1) {\n                    printf(\"recv error\");\n                    if (errno != EAGAIN &amp;&amp; errno != EWOULDBLOCK) {\n                        printf(\"errno != EAGAIN &amp;&amp; errno != EWOULDBLOCK\");\n                        close(currentConnection.socket);\n                    }\n                    break;\n                }\n                printText(buffer, valRead);\n\n                currentConnection.event.events = EPOLLOUT | EPOLLRDHUP;\n                currentConnection.event.data.ptr = &amp;currentConnection;\n                epoll_ctl(epollFd, EPOLL_CTL_MOD, currentConnection.socket, &amp;currentConnection.event);\n\n                if (buffer[0] == 'G' &amp;&amp; buffer[1] == 'E' &amp;&amp; buffer[2] == 'T') {\n                    switch (buffer[5]) {\n                    case ' ': //default web page (index.htm)\n                        currentConnection.dataToSend = indexHtm;\n                        currentConnection.dataByteSize = sizeof(indexHtm);\n                        //sendSocketData(new_socket, indexHtm, sizeof(indexHtm));\n                        break;\n                    }\n               }\n              else if (receivedEvents[eventIndex].events &amp; EPOLLOUT) {\n                valRead = send(currentConnection.socket, currentConnection.dataToSend, currentConnection.dataByteSize, 0);\n                if (valRead == -1) {\n                    printf(\"send error has ocurred\\n\");\n                    if (errno != EAGAIN &amp;&amp; errno != EWOULDBLOCK) {\n                        printf(\"\\nerrno != EAGAIN &amp;&amp; errno != EWOULDBLOCK\\n\");\n                        close(currentConnection.socket);\n                    }\n                    break;\n                }\n\n                currentConnection.event.events = EPOLLIN | EPOLLRDHUP;\n                currentConnection.event.data.ptr = &amp;currentConnection;\n                valRead = epoll_ctl(epollFd, EPOLL_CTL_MOD, currentConnection.socket, &amp;currentConnection.event);\n            }\n            break;\n        }\n        ++eventIndex;\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "calloc"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1546469378, "post_id": 54014126, "comment_id": 94865501, "body": "Probably not related to the problem, but you should always use <code>unsigned</code> types when doing bit shifting."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 3, "creation_date": 1546469500, "post_id": 54014126, "comment_id": 94865526, "body": "<a href=\"https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">don&#39;t cast malloc</a>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1546471043, "post_id": 54014126, "comment_id": 94865956, "body": "the posted code, when run through the compiler (<code>gcc</code>) with the <code>-Wall -Wextra -Wconversion -pedantic -std-gnu11</code> options results in 12 warning messages.  The very first message is the &#39;typedef&#39; is not at the beginning of the struct definition.  This means the compiler figured it out, but the syntax is not correct.  When compiling, always enable the warnings, then fix those warnings."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1546471596, "post_id": 54014126, "comment_id": 94866116, "body": "OT: the function: <code>strlen()</code> returns a <code>size_t</code> so (to avoid risky conversions) the variable receiving the returned value should also be a <code>size_t</code>, not an <code>int</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1546471753, "post_id": 54014126, "comment_id": 94866162, "body": "OT: regarding: <code>printf(&quot;error&quot;);</code> 1) error messages should be output to <code>stderr</code>, not <code>stdout</code>  2) when the error indication is from a C library function, should also output to <code>stderr</code> the text reason the system thinks the error occurred.  Suggest using: <code>perror( &quot;calloc failed&quot; );</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1546472007, "post_id": 54014126, "comment_id": 94866235, "body": "OT: when calling <code>strtok()</code>, always check (!=NULL) the returned value to assure the operation was successful"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1546472517, "post_id": 54014126, "comment_id": 94866340, "body": "regarding: <code>arrangingHobbies = 1;</code>  the variable: <code>arrangingHobbies</code> is declared as a <code>char</code>, not a <code>int</code>  So the best that can be hoped for is the resulting value in the variable will be 0x01.  However, it would be much better to either declare it as a <code>int</code> or assign a char (I.E. &#39;1&#39; )"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1546472641, "post_id": 54014126, "comment_id": 94866367, "body": "regarding: <code>tempAge = atoi(token);</code>  the function: <code>atoi()</code> does not have any indication when it fails.  Suggest using: <code>strtol()</code> instead"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1546472965, "post_id": 54014126, "comment_id": 94866435, "body": "regarding: <code>newUser-&gt;userName = calloc((lengthStr), sizeof(char));</code>  this is an error and the following statement: <code>strcpy(newUser-&gt;userName, token);</code> will corrupt the heap structures because there is no allowance for the trailing NUL byte.  I.E. it should be: <code>newUser-&gt;userName = calloc((lengthStr+1), sizeof(char));</code>  Notice the <code>+1 on the size.  Similar considerations exist for </code>newUser-&gt;password = calloc((lengthStr), sizeof(char));`"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1546473416, "post_id": 54014126, "comment_id": 94866528, "body": "regarding: <code>arrangingHobbies = 1;             arrangingHobbies &lt;&lt;= (tempAge - 1);</code>  the first statement sets the variable (at best) to 0x01.  The second statement shifts that 0x01 to the left by the value (tempAge-1) When the <code>tempAge</code> is greater than 7 the result is undefined behavior"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1546473520, "post_id": 54014126, "comment_id": 94866553, "body": "regarding: <code>arrangingHobbies &lt;&lt;= (tempAge - 1);</code>  this causes an implicit (risky) conversion from <code>int</code> to <code>char</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1546473727, "post_id": 54014126, "comment_id": 94866592, "body": "regarding: ` token = strtok(NULL, &quot;,;&quot;);         newUser-&gt;description = calloc((lengthStr +1 ), sizeof(char));`  this is missing a statement to set the value in <code>lengthStr</code>, so will be using what every was left from the prior setting of <code>lengthStr</code>.  If the description is longer than what was in <code>lengthStr</code> then the allocated memory will be overrun by the statement: <code>strcpy(newUser-&gt;description, token);</code>  This results in undefined behavior"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1546474019, "post_id": 54014126, "comment_id": 94866654, "body": "in function: <code>replaceEnterInString()</code>  this statement: <code>string[lengthString - 1] = &#39;\\0&#39;;</code> is not assured to be correct.  Strongly suggest: <code>string[ strcspn( string, &quot;\\n&quot; ) ] = &#39;\\0&#39;;</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1546474191, "post_id": 54014126, "comment_id": 94866693, "body": "regarding: <code>replaceEnterInString(strlen(token), token, 300);</code>  the first parameter is passing the unsigned long (<code>size_t</code>) value returned from the call to <code>strlen()</code>  however, the function: <code>replaceEnterInString()</code> is expecting the first parameter to be an <code>int</code> (signed)  While this might work, there are conditions/values were it will not work"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1546474378, "post_id": 54014126, "comment_id": 94866727, "body": "OT: the posted code contains the &#39;magic&#39; number 300.  &#39;magic&#39; numbers are numbers with no basis. &#39;magic&#39; numbers make the code more difficult to understand, debug, etc.  suggest using a <code>#define</code> statement or a <code>enum</code> statement to give that &#39;magic&#39; number a meaningful name Then use that meaningful name throughout the code"}], "answers": [{"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1546469715, "post_id": 54014216, "comment_id": 94865591, "body": "he also made that mistake with <code>newUser-&gt;description</code>, and forgot to call <code>strlen()</code> as well."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1546469868, "post_id": 54014216, "comment_id": 94865632, "body": "Also with <code>newUser-&gt;password</code>."}, {"owner": {"reputation": 3, "user_id": 10860012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/010d09b579a235069f1c69652b3a9266?s=128&d=identicon&r=PG&f=1", "display_name": "efrat", "link": "https://stackoverflow.com/users/10860012/efrat"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1546512298, "post_id": 54014216, "comment_id": 94877397, "body": "@Barmar thanks for the fix,  this was the issue StephanLechner thanks for all the good comment"}], "tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": true, "score": 5, "last_activity_date": 1546469882, "last_edit_date": 1546469882, "creation_date": 1546469539, "answer_id": 54014216, "question_id": 54014126, "link": "https://stackoverflow.com/questions/54014126/calloc-issue-on-second-time-on-c/54014216#54014216", "title": "calloc issue on second time - on C", "body": "<p>Maybe there are other issues as well, yet the following code leads to undefined behaviour for sure:</p>\n\n<pre><code>lengthStr = strlen(token);\nnewUser-&gt;userName = (char*)calloc((lengthStr), sizeof(char));\n...\nstrcpy(newUser-&gt;userName, token);\n</code></pre>\n\n<p>In previous similar statements, you correctly wrote <code>... = (char*)calloc((lengthStr+1), sizeof(char));</code>.</p>\n\n<p>BTW: In C, you usually don't cast the results of <code>malloc</code>, <code>sizeof(char)</code> is always <code>1</code> by definition, and there is no need for setting memory to <code>0</code> using <code>calloc</code> if you fill the memory with a subsequent <code>strcpy</code> anyway. So you should write...</p>\n\n<pre><code>lengthStr = strlen(token);\nnewUser-&gt;userName = malloc(lengthStr+1);\n...\nstrcpy(newUser-&gt;userName, token);\n</code></pre>\n\n<p>Look through your code for similar issues, please.</p>\n"}], "owner": {"reputation": 3, "user_id": 10860012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/010d09b579a235069f1c69652b3a9266?s=128&d=identicon&r=PG&f=1", "display_name": "efrat", "link": "https://stackoverflow.com/users/10860012/efrat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 54014216, "answer_count": 1, "score": 0, "last_activity_date": 1546469882, "creation_date": 1546468898, "last_edit_date": 1546469259, "question_id": 54014126, "link": "https://stackoverflow.com/questions/54014126/calloc-issue-on-second-time-on-c", "title": "calloc issue on second time - on C", "body": "<p>bellow is the code:</p>\n\n<p>from some reason the calloc inside the while loop, is failing on the second iteration.\nit looks the heap is corupted (not sure) but not clear the root cause.\nplease also take a look on the comment added there.\nappriciate fast response.</p>\n\n<pre><code>#define _CRT_SECURE_NO_WARNINGS\n#include &lt;string.h&gt;\n#include&lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nstruct User_\n{\n    char* id;\n    char* firstName;\n    char* lastName;\n    int age;\n    char gender[2];\n    char* userName;\n    char* password;\n    char* description;\n    char hobbies[2];\n}typedef User;\n\n\nvoid replaceEnterInString(int lengthString, char* string, int  maxChars);\n\n\n\n\nint main()\n    {\n        char str1[500] = \"012345678;danny;cohen;22;M;danny1993;123;1,2,4,8;Nice person\";\n        char str2[500] = \"223325222;or;dan;25;M;ordan10;1234;3,5,6,7;Singer and dancer\";\n\n\n    int j = 0;\n    char *token = NULL, arrangingHobbies;\n    int lengthStr, tempAge, hobby[4], i;\n\n    while(j&lt;2)\n    {\n\n        User* newUser = NULL;\n</code></pre>\n\n<p>here it pass on first time but fail on second time. but only when adding the code that map the <code>token</code> to the <code>newUser</code>.        without the mapping - do manage to <code>calloc</code> the user again and again as much as needed      </p>\n\n<blockquote>\n  <p>error code: Critical error detected c0000374 - TEST.exe has triggered a breakpoint.</p>\n</blockquote>\n\n<pre><code>        newUser = (User*)calloc(1, sizeof(User));\n        if (newUser == NULL)\n        {\n            printf(\"error\");\n            exit(1);\n        }\n\n        //start map string to user\n        if (j == 0)\n        {\n            token = strtok(str1, \";\");\n            printf(\"%s\", str1);\n        }\n        else {\n            token = strtok(str2, \";\");\n            printf(\"%s\", str2);\n        }\n\n        //Input ID\n        newUser-&gt;id = (char*)calloc(10, sizeof(char));\n        if (newUser-&gt;id == NULL)\n        {\n            printf(\"error\");\n            exit(1);\n        }\n        strcpy(newUser-&gt;id, token);\n\n        //Input first name\n        token = strtok(NULL, \";\");\n        lengthStr = strlen(token);\n        newUser-&gt;firstName = (char*)calloc((lengthStr + 1), sizeof(char));\n        if (newUser-&gt;firstName == NULL)\n        {\n            printf(\"error\");\n            exit(1);\n        }\n        strcpy(newUser-&gt;firstName, token);\n\n        //Input last name\n        token = strtok(NULL, \",;\");\n        lengthStr = strlen(token);\n        newUser-&gt;lastName = (char*)calloc((lengthStr + 1), sizeof(char));\n        if (newUser-&gt;lastName == NULL)\n        {\n            printf(\"error\");\n            exit(1);\n        }\n        strcpy(newUser-&gt;lastName, token);\n\n        //Input Age\n        token = strtok(NULL, \",;\");\n        tempAge = atoi(token);\n        newUser-&gt;age = tempAge;\n\n        //Input gender\n        token = strtok(NULL, \",;\");\n        newUser-&gt;gender[0] = token[0];\n\n\n        //Input User Name\n        token = strtok(NULL, \",;\");\n        lengthStr = strlen(token);\n        newUser-&gt;userName = (char*)calloc((lengthStr), sizeof(char));\n        if (newUser-&gt;userName == NULL)\n        {\n            printf(\"error\");\n            exit(1);\n        }\n        strcpy(newUser-&gt;userName, token);\n\n        //Input password\n        token = strtok(NULL, \",;\");\n        lengthStr = strlen(token);\n        newUser-&gt;password = (char*)calloc((lengthStr), sizeof(char));\n        if (newUser-&gt;password == NULL)\n        {\n            printf(\"error\");\n            exit(1);\n        }\n        strcpy(newUser-&gt;password, token);\n\n        //Input hobbies\n        newUser-&gt;hobbies[0] = 0;\n        for (i = 0; i &lt; 4; ++i)\n        {\n            token = strtok(NULL, \",;\");\n            tempAge = atoi(token);\n            arrangingHobbies = 1;\n            arrangingHobbies &lt;&lt;= (tempAge - 1);\n            newUser-&gt;hobbies[0] |= arrangingHobbies;\n        }\n\n        //Input description\n        token = strtok(NULL, \",;\");\n        newUser-&gt;description = (char*)calloc((lengthStr), sizeof(char));\n        if (newUser-&gt;description == NULL)\n        {\n            printf(\"error\");\n            exit(1);\n        }\n        replaceEnterInString(strlen(token), token, 300);\n        strcpy(newUser-&gt;description, token);\n\n        j++;\n    }\n\n}\n\nvoid replaceEnterInString(int lengthString, char* string, int  maxChars)\n{\n    if (lengthString &lt; maxChars)\n    {\n        //remove the /n\n        string[lengthString - 1] = '\\0';\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "freebsd"], "comments": [{"owner": {"reputation": 762, "user_id": 4292145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5967e8a1432f80237763c7e30ed7e475?s=128&d=identicon&r=PG&f=1", "display_name": "TadejP", "link": "https://stackoverflow.com/users/4292145/tadejp"}, "edited": false, "score": 0, "creation_date": 1546467745, "post_id": 54013879, "comment_id": 94864988, "body": "I want regular user can get this info. Like <code>geom disk list</code>"}, {"owner": {"reputation": 29966, "user_id": 637669, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0227e5d5eaceb8ae2f751df38d421764?s=128&d=identicon&r=PG", "display_name": "arrowd", "link": "https://stackoverflow.com/users/637669/arrowd"}, "edited": false, "score": 1, "creation_date": 1546500180, "post_id": 54013879, "comment_id": 94872163, "body": "Relevant project: <a href=\"https://bitbucket.org/arrowd/bsdisks\" rel=\"nofollow noreferrer\">bitbucket.org/arrowd/bsdisks</a>"}], "answers": [{"tags": [], "owner": {"reputation": 591, "user_id": 4054546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78aa1f3e1fc65e8b2e8d67f34689fd81?s=128&d=identicon&r=PG", "display_name": "Shawn", "link": "https://stackoverflow.com/users/4054546/shawn"}, "is_accepted": true, "score": 3, "last_activity_date": 1546486074, "creation_date": 1546486074, "answer_id": 54015954, "question_id": 54013879, "link": "https://stackoverflow.com/questions/54013879/list-physical-disks-in-c-on-freebsd-system-call/54015954#54015954", "title": "List physical disks in c on FreeBSD system call", "body": "<p>You are most likely  going to want to be working with FreeBSD's <a href=\"https://www.freebsd.org/cgi/man.cgi?query=libgeom&amp;sektion=3&amp;apropos=0&amp;manpath=FreeBSD%2012.0-RELEASE%20and%20Ports\" rel=\"nofollow noreferrer\">libgeom</a> - specifically geom_gettree().  <a href=\"http://web.mit.edu/freebsd/head/usr.sbin/bsdinstall/partedit/partedit.c\" rel=\"nofollow noreferrer\">The source to freebsd's partedit</a> -  shows it being used and the resulting structure being iterated through in the read_geom_mesh and related functions in order to get a list of the disks.  What appears to be the <a href=\"http://web.mit.edu/ebj/Desktop/ebj/MacData/afs/sipb/project/freebsd/head/sbin/geom/core/geom.c\" rel=\"nofollow noreferrer\">source of the geom program</a> also demonstrates some usage of the geom_gettree function and iterating through its returned structure.</p>\n"}], "owner": {"reputation": 762, "user_id": 4292145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5967e8a1432f80237763c7e30ed7e475?s=128&d=identicon&r=PG&f=1", "display_name": "TadejP", "link": "https://stackoverflow.com/users/4292145/tadejp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 54015954, "answer_count": 1, "score": 3, "last_activity_date": 1546486074, "creation_date": 1546467289, "question_id": 54013879, "link": "https://stackoverflow.com/questions/54013879/list-physical-disks-in-c-on-freebsd-system-call", "title": "List physical disks in c on FreeBSD system call", "body": "<p>Could you point me in right direction? Now I am looking system call <code>g_io_getattr</code>.. \nI do not want to call subprocess.\nThe return would be e.g. 'da0', 'da1' or 'ada0'...</p>\n"}, {"tags": ["c", "sockets", "pthreads", "file-descriptor"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1546468375, "post_id": 54013875, "comment_id": 94865204, "body": "Do you intend for your server to mediate each chat session, or are you trying to get the clients to communicate with each other directly?"}, {"owner": {"reputation": 53, "user_id": 8664908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c829a10c0890b1d61c50f46a855ff7d0?s=128&d=identicon&r=PG&f=1", "display_name": "petrados", "link": "https://stackoverflow.com/users/8664908/petrados"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1546468975, "post_id": 54013875, "comment_id": 94865397, "body": "I&#39;m trying to get the clients to communicate with each other directly as they connect. I&#39;ll be more explicit: When the number of clients connected to the server is impair, the last connected will communicate with the next client connecting. When the number of clients connected to the server is pair, the next client connecting will wait for the next after him to connect to chat with him"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1546469527, "post_id": 54013875, "comment_id": 94865539, "body": "Communicating directly means (to me) that the server does not relay traffic from one client to the other.  If that&#39;s really what you&#39;re after, then one client from each pair needs to establish a (new) connection with the other.  Presumably, then, the original server&#39;s role would be to tell each client what partner to expect, and whether to act as server or client for the direct connection."}, {"owner": {"reputation": 53, "user_id": 8664908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c829a10c0890b1d61c50f46a855ff7d0?s=128&d=identicon&r=PG&f=1", "display_name": "petrados", "link": "https://stackoverflow.com/users/8664908/petrados"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1546469768, "post_id": 54013875, "comment_id": 94865605, "body": "I just need to establish a communication between only two clients as they connect in the queue, whatever the way, maybe I can assign an ID for every client and have a list of all the clients connected? But I don&#39;t really know how to code that"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1546470308, "post_id": 54013875, "comment_id": 94865768, "body": "This really seems to be too broad.  We are prepared to field questions about the code you have written, but not so much about what other code you ought to write."}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 1, "creation_date": 1546471174, "post_id": 54013875, "comment_id": 94866003, "body": "Note that if your goal is to have client A make a TCP connection directly to client B (or send UDP packets directly to client B), and you want this system to work across the Internet, you are going to have to deal with the ubiquitous-firewall problem -- that is, most people&#39;s computers are hidden behind firewalls which will reject incoming TCP connections and UDP packets.  So if you go that route you will either need to implement hole-punching techniques (which are a big pain-in-the-butt and don&#39;t always work), or ask your users to modify their firewall settings (which many won&#39;t do)."}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1546471223, "post_id": 54013875, "comment_id": 94866025, "body": "... therefore you&#39;ll likely find it more practical to simply have each client connect to your server only, and have the server relay data from one client to another according to whatever logic you like."}], "answers": [{"tags": [], "owner": {"reputation": 5339, "user_id": 1714692, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/bd72cbc200eb7c9aa507624f154b21a7?s=128&d=identicon&r=PG", "display_name": "Francesco Boi", "link": "https://stackoverflow.com/users/1714692/francesco-boi"}, "is_accepted": false, "score": 0, "last_activity_date": 1546471535, "last_edit_date": 1546471535, "creation_date": 1546469963, "answer_id": 54014284, "question_id": 54013875, "link": "https://stackoverflow.com/questions/54013875/how-to-connect-clients-two-by-two-as-they-connect/54014284#54014284", "title": "How to connect clients two by two as they connect", "body": "<p>Yes, in my opinion you can use two <code>accept</code> and then call a <code>fork()</code> or, even better, a new <code>thread</code>. You can create a new process/thread for each pair of connections. </p>\n\n<p>What do you mean sharing the fd? You mean sending a fd of one client to another? In this case <strong>NO</strong>\nYou can keep, in the thread function, a mapping between the two clients to know which clients are paired. When receiving a message from one client, thanks to the mapping, you know which client you are supposed to send the message to.</p>\n\n<p>I think the rest depends on further details you should specify in your question.\nLet me know</p>\n\n<p>If each client can both send and receive you might want to use multithreading on client-side too: one to send and one to receive.</p>\n"}], "owner": {"reputation": 53, "user_id": 8664908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c829a10c0890b1d61c50f46a855ff7d0?s=128&d=identicon&r=PG&f=1", "display_name": "petrados", "link": "https://stackoverflow.com/users/8664908/petrados"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1546471535, "creation_date": 1546467275, "question_id": 54013875, "link": "https://stackoverflow.com/questions/54013875/how-to-connect-clients-two-by-two-as-they-connect", "title": "How to connect clients two by two as they connect", "body": "<p>I'm facing a problem with sockets programming in C.\nI've coded a server where multiple clients can connect and send messages in a chatroom but i don't know how to connect two clients two by two.</p>\n\n<p>example:\nClient A connect to the Server but must wait in a queue waiting for Client B to connect.\nClient C connect but must wait in a queue waiting for Client D to connect.</p>\n\n<p>Every pair of clients must be in their specific chatroom, do I need to share the fd between the two sockets of the 2 clients or link between the two sockets.</p>\n\n<p>I thought about using another way by using the function <code>accept()</code> twice before I <code>fork()</code> but I have to use child processes for that.</p>\n\n<p>Here is my server code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/select.h&gt;\n#include &lt;sys/time.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;arpa/inet.h&gt;\n#include &lt;netdb.h&gt;\n\n#define PORT \"8888\"   \n\n\nvoid *get_in_addr(struct sockaddr *sa)\n{\n    if (sa-&gt;sa_family == AF_INET) {\n        return &amp;(((struct sockaddr_in*)sa)-&gt;sin_addr);\n    }\n\n    return &amp;(((struct sockaddr_in6*)sa)-&gt;sin6_addr);\n}\n\nint main(void)\n{\n    fd_set master;    \n    fd_set read_fds;  \n    int fdmax;        \n\n    int listener;     \n    int newfd;        \n    struct sockaddr_storage remoteaddr; \n    socklen_t addrlen;\n\n    char buf[256];    \n    int nbytes;\n\n    char remoteIP[INET6_ADDRSTRLEN];\n\n    int yes=1;        \n    int i, j, rv;\n\n    struct addrinfo hints, *ai, *p;\n\n    FD_ZERO(&amp;master);    \n    FD_ZERO(&amp;read_fds);  \n\n\n    memset(&amp;hints, 0, sizeof hints);\n    hints.ai_family = AF_UNSPEC;\n    hints.ai_socktype = SOCK_STREAM;\n    hints.ai_flags = AI_PASSIVE;\n    if ((rv = getaddrinfo(NULL, PORT, &amp;hints, &amp;ai)) != 0) {\n        fprintf(stderr, \"Server msg: %s\\n\", gai_strerror(rv));\n        exit(1);\n    }\n\n    for(p = ai; p != NULL; p = p-&gt;ai_next)\n    {\n        listener = socket(p-&gt;ai_family, p-&gt;ai_socktype, p-&gt;ai_protocol);\n        if (listener &lt; 0) { \n            continue;\n        }\n\n        setsockopt(listener, SOL_SOCKET, SO_REUSEADDR, &amp;yes, sizeof(int));\n\n        if (bind(listener, p-&gt;ai_addr, p-&gt;ai_addrlen) &lt; 0) {\n            close(listener);\n            continue;\n        }\n\n        break;\n    }\n\n    if (p == NULL) {\n        fprintf(stderr, \"Server msg: bind failed\\n\");\n        exit(2);\n    }\n\n    freeaddrinfo(ai); \n\n    puts(\"Bind success\");\n\n    if (listen(listener, 10) == -1)\n    {\n        perror(\"listen\");\n        exit(3);\n    }\n    puts(\"Server listening ...\");\n\n\n    FD_SET(listener, &amp;master);\n\n\n    fdmax = listener;\n\n\n    for(;;)\n    {\n        read_fds = master;\n        if (select(fdmax+1, &amp;read_fds, NULL, NULL, NULL) == -1)\n        {\n            perror(\"select\");\n            exit(4);\n        }\n\n\n        for(i = 0; i &lt;= fdmax; i++) \n        {\n            if (FD_ISSET(i, &amp;read_fds))\n            {   \n                if (i == listener)\n                {\n\n                    addrlen = sizeof remoteaddr;\n                    newfd = accept(listener,\n                        (struct sockaddr *)&amp;remoteaddr,\n                        &amp;addrlen);\n\n                    if (newfd == -1)\n                    {\n                        perror(\"accept\");\n                    }\n                    else\n                    {\n                        FD_SET(newfd, &amp;master); \n                        if (newfd &gt; fdmax)\n                        {   \n                            fdmax = newfd;\n                        }\n                        printf(\"Server msg: new connection from %s on \"\n                               \"socket %d\\n\", inet_ntop(remoteaddr.ss_family,\n                               get_in_addr((struct sockaddr*)&amp;remoteaddr),\n                               remoteIP, INET6_ADDRSTRLEN), newfd);\n                    }\n                } \n                else\n                {\n\n                    if ((nbytes = recv(i, buf, sizeof buf, 0)) &lt;= 0)\n                    {  \n                        if (nbytes == 0)\n                        {   \n                            printf(\"Server msg: socket %d lost\\n\", i);\n                        }\n                        else\n                        {\n                            perror(\"recv\");\n                        }\n                        close(i); \n                        FD_CLR(i, &amp;master); \n                    }\n                    else\n                    {\n\n                        for(j = 0; j &lt;= fdmax; j++)\n                        {\n\n                            if (FD_ISSET(j, &amp;master)) \n                            {\n\n                                if (j != listener &amp;&amp; j != i)\n                                {\n                                    if (send(j, buf, nbytes, 0) == -1)\n                                    {\n                                        perror(\"send\");\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            } \n        } \n    } \n\n    return 0;\n}\n</code></pre>\n\n<p>And here is my client code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;string.h&gt;\n#include &lt;netdb.h&gt;\n#include &lt;sys/select.h&gt;\n#include &lt;sys/time.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;pthread.h&gt;\n#include &lt;arpa/inet.h&gt;\n\n#define PORT \"8888\" \n\n#define MAXDATASIZE 100 \n#define MAXNAMESIZE 25 \n\nvoid *receive_handler(void *);\n\nvoid *get_in_addr(struct sockaddr *sa)\n{\n    if (sa-&gt;sa_family == AF_INET) {\n        return &amp;(((struct sockaddr_in*)sa)-&gt;sin_addr);\n    }\n\n    return &amp;(((struct sockaddr_in6*)sa)-&gt;sin6_addr);\n}\n\nint main(int argc, char *argv[])\n{\n    char message[MAXDATASIZE];\n    char nickName[MAXNAMESIZE]; \n    int sockfd;                 \n    char sBuf[MAXDATASIZE]; \n    struct addrinfo hints, *servinfo, *p;\n    int rv;\n    char s[INET6_ADDRSTRLEN];\n\n    if (argc != 2) {\n        fprintf(stderr,\"Usage: ./client address\\n\");\n        exit(1);\n    }\n\n    memset(&amp;hints, 0, sizeof hints);\n    hints.ai_family = AF_UNSPEC;\n    hints.ai_socktype = SOCK_STREAM;\n\n    if ((rv = getaddrinfo(argv[1], PORT, &amp;hints, &amp;servinfo)) != 0) {\n        fprintf(stderr, \"getaddrinfo: %s\\n\", gai_strerror(rv));\n        return 1;\n    }\n\n\n    for(p = servinfo; p != NULL; p = p-&gt;ai_next) {\n        if ((sockfd = socket(p-&gt;ai_family, p-&gt;ai_socktype,\n                p-&gt;ai_protocol)) == -1) {\n            perror(\"Client: socket\");\n            continue;\n        }\n\n        if (connect(sockfd, p-&gt;ai_addr, p-&gt;ai_addrlen) == -1) {\n            close(sockfd);   \n            perror(\"Client: connect\");\n            continue;\n        }\n\n        break;\n    }\n\n    if (p == NULL) {\n        fprintf(stderr, \"Client: connection failed\\n\");\n        return 2;\n    }\n\n    inet_ntop(p-&gt;ai_family, get_in_addr((struct sockaddr *)p-&gt;ai_addr),\n            s, sizeof s);\n    printf(\"Client: connection to %s\\n\", s);\n\n    freeaddrinfo(servinfo); \n\n    puts(\"Give your username:\");\n    memset(&amp;nickName, sizeof(nickName), 0);\n    memset(&amp;message, sizeof(message), 0); \n    fgets(nickName, MAXNAMESIZE, stdin);  \n    pthread_t recv_thread;\n\n    if( pthread_create(&amp;recv_thread, NULL, receive_handler, (void*)(intptr_t) sockfd) &lt; 0)\n    {   \n        perror(\"Failed on thread creation\");\n        return 1;\n    }    \n    puts(\"Connection established\");\n\n    puts(\"Welcome!\\n\");\n    puts(\"[Type '/quit' to quit the chatroom]\");\n\n    for(;;)\n    {\n        char temp[6];\n        memset(&amp;temp, sizeof(temp), 0);\n\n        memset(&amp;sBuf, sizeof(sBuf), 0); \n        fgets(sBuf, 100, stdin); \n\n        if(sBuf[0] == '/' &amp;&amp;\n           sBuf[1] == 'q' &amp;&amp;\n           sBuf[2] == 'u' &amp;&amp;\n           sBuf[3] == 'i' &amp;&amp;\n           sBuf[4] == 't')\n            return 1;\n\n\n        int count = 0;\n        while(count &lt; strlen(nickName))\n        {\n            message[count] = nickName[count];\n            count++;\n        }\n        count--;\n        message[count] = ':';\n        count++;\n\n        for(int i = 0; i &lt; strlen(sBuf); i++)\n        {\n            message[count] = sBuf[i];\n            count++;\n        }\n        message[count] = '\\0';\n        if(send(sockfd, message, strlen(message), 0) &lt; 0)\n        {\n            puts(\"Sent failed\");\n            return 1;\n        }\n        memset(&amp;sBuf, sizeof(sBuf), 0);\n\n    }\n\n    pthread_join(recv_thread , NULL);\n    close(sockfd);\n\n    return 0;\n}\n\nvoid *receive_handler(void *sock_fd)\n{\n    int sFd = (intptr_t) sock_fd;\n    char buffer[MAXDATASIZE];\n    int nBytes;\n\n    for(;;)\n    {\n        if ((nBytes = recv(sFd, buffer, MAXDATASIZE-1, 0)) == -1)\n        {\n            perror(\"recv\");\n            exit(1);\n        }\n        else\n            buffer[nBytes] = '\\0';\n        printf(\"%s\", buffer);\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "endianness"], "comments": [{"owner": {"reputation": 2511, "user_id": 3015268, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/K2RwN.jpg?s=128&g=1", "display_name": "bakalolo", "link": "https://stackoverflow.com/users/3015268/bakalolo"}, "reply_to_user": {"reputation": 1975, "user_id": 6070341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHHZU.png?s=128&g=1", "display_name": "Costantino Grana", "link": "https://stackoverflow.com/users/6070341/costantino-grana"}, "edited": false, "score": 0, "creation_date": 1546468219, "post_id": 54013771, "comment_id": 94865135, "body": "@CostantinoGrana The manual says &quot;Units: 0,02197265625 degree.&quot;  I have no idea what those 2 numbers mean but I think its in degrees?"}, {"owner": {"reputation": 305833, "user_id": 68587, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7d9fd158e03cbde94f7e0b33b78222af?s=128&d=identicon&r=PG", "display_name": "John Kugelman", "link": "https://stackoverflow.com/users/68587/john-kugelman"}, "edited": false, "score": 0, "creation_date": 1546468335, "post_id": 54013771, "comment_id": 94865184, "body": "0.02197265625 is 45/2048. The units are 45/2048ths of a degree? Be careful!"}, {"owner": {"reputation": 2653, "user_id": 1028434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a340b89a8b4efdb83da69d6cc93caac7?s=128&d=identicon&r=PG", "display_name": "fdk1342", "link": "https://stackoverflow.com/users/1028434/fdk1342"}, "edited": false, "score": 0, "creation_date": 1546468437, "post_id": 54013771, "comment_id": 94865228, "body": "Some compilers have extensions to define variables as either big or little-endian.  This is very useful because some architectures, like powerpc, are able to read/write integers in both modes."}, {"owner": {"reputation": 2511, "user_id": 3015268, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/K2RwN.jpg?s=128&g=1", "display_name": "bakalolo", "link": "https://stackoverflow.com/users/3015268/bakalolo"}, "reply_to_user": {"reputation": 305833, "user_id": 68587, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7d9fd158e03cbde94f7e0b33b78222af?s=128&d=identicon&r=PG", "display_name": "John Kugelman", "link": "https://stackoverflow.com/users/68587/john-kugelman"}, "edited": false, "score": 0, "creation_date": 1546468471, "post_id": 54013771, "comment_id": 94865249, "body": "@JohnKugelman is that comma a typo on the manual?  Period would make more sense."}, {"owner": {"reputation": 305833, "user_id": 68587, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7d9fd158e03cbde94f7e0b33b78222af?s=128&d=identicon&r=PG", "display_name": "John Kugelman", "link": "https://stackoverflow.com/users/68587/john-kugelman"}, "edited": false, "score": 0, "creation_date": 1546468498, "post_id": 54013771, "comment_id": 94865257, "body": "It&#39;s a European-style decimal point, I presume."}, {"owner": {"reputation": 1975, "user_id": 6070341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHHZU.png?s=128&g=1", "display_name": "Costantino Grana", "link": "https://stackoverflow.com/users/6070341/costantino-grana"}, "reply_to_user": {"reputation": 305833, "user_id": 68587, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7d9fd158e03cbde94f7e0b33b78222af?s=128&d=identicon&r=PG", "display_name": "John Kugelman", "link": "https://stackoverflow.com/users/68587/john-kugelman"}, "edited": false, "score": 0, "creation_date": 1546468876, "post_id": 54013771, "comment_id": 94865368, "body": "@JohnKugelman I can&#39;t see my original comment anymore. Anyway, I was not too far: it&#39;s not radians, but it&#39;s fixed point even if I don&#39;t get why 45/2048ths of degree instead of a simpler 1/2048ths."}, {"owner": {"reputation": 1975, "user_id": 6070341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHHZU.png?s=128&g=1", "display_name": "Costantino Grana", "link": "https://stackoverflow.com/users/6070341/costantino-grana"}, "edited": false, "score": 1, "creation_date": 1546469166, "post_id": 54013771, "comment_id": 94865451, "body": "@bakalolo As John Kugelman said, you have to take your degrees, multiply them by 2048, then divide by 45. So -90 becomes -4096, 120 becomes 5461 and so on."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1546468160, "post_id": 54013826, "comment_id": 94865119, "body": "Disagree with &quot;Sadly, we cannot inline the calls&quot;.  Counter example <code>write(fd, &amp;(uint16_t){htole16(ec_min_angle)}, 2);</code>"}, {"owner": {"reputation": 828, "user_id": 945131, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/f52c5e61835ff9b8c50186af57437991?s=128&d=identicon&r=PG", "display_name": "Greg", "link": "https://stackoverflow.com/users/945131/greg"}, "edited": false, "score": 0, "creation_date": 1546484014, "post_id": 54013826, "comment_id": 94868417, "body": "Similarly, other platforms have hton() and ntoh() functions in their C libraries, to put the byte swapping into the context of network buffer filling/draining <a href=\"https://stackoverflow.com/q/15863775\">stackoverflow.com/q/15863775</a> . &quot;Host to network&quot;, and vice versa."}, {"owner": {"reputation": 102109, "user_id": 1600898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/01377f8b31f24b0265854666b29d0c03?s=128&d=identicon&r=PG", "display_name": "user4815162342", "link": "https://stackoverflow.com/users/1600898/user4815162342"}, "reply_to_user": {"reputation": 592, "user_id": 2077198, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FbaYP.jpg?s=128&g=1", "display_name": "vvaltchev", "link": "https://stackoverflow.com/users/2077198/vvaltchev"}, "edited": false, "score": 1, "creation_date": 1546525631, "post_id": 54013826, "comment_id": 94884632, "body": "@vvaltchev By <i>inline</i> the answerer likely meant the sense of &quot;writing the call inline&quot; (in one line), not &quot;expanding the called function inline&quot;."}, {"owner": {"reputation": 592, "user_id": 2077198, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FbaYP.jpg?s=128&g=1", "display_name": "vvaltchev", "link": "https://stackoverflow.com/users/2077198/vvaltchev"}, "reply_to_user": {"reputation": 102109, "user_id": 1600898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/01377f8b31f24b0265854666b29d0c03?s=128&d=identicon&r=PG", "display_name": "user4815162342", "link": "https://stackoverflow.com/users/1600898/user4815162342"}, "edited": false, "score": 0, "creation_date": 1546615720, "post_id": 54013826, "comment_id": 94918716, "body": "@user4815162342 I totally agree with you, I just read the text by far too quickly, missing that. I was focused on <code>htole16()</code>, while the whole &quot;inline comment&quot; actually was about the interface of <code>write()</code>, not <code>htole16()</code>. Anyway, it&#39;s fun to observe how quickly the discussion went off-topic, with several comments about the &quot;inlining&quot; of the 2nd argument of <code>write()</code>, which is totally irrelevant, given the question <code>:-)</code>"}, {"owner": {"reputation": 102109, "user_id": 1600898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/01377f8b31f24b0265854666b29d0c03?s=128&d=identicon&r=PG", "display_name": "user4815162342", "link": "https://stackoverflow.com/users/1600898/user4815162342"}, "reply_to_user": {"reputation": 592, "user_id": 2077198, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FbaYP.jpg?s=128&g=1", "display_name": "vvaltchev", "link": "https://stackoverflow.com/users/2077198/vvaltchev"}, "edited": false, "score": 0, "creation_date": 1546617556, "post_id": 54013826, "comment_id": 94919827, "body": "@vvaltchev Good point about the off-topicness - usage of <code>write()</code> generated a similar discussion under answer as well. Here it&#39;s slightly better because inline expression is not <i>completely</i> off-topic, because it affects the ergonomy."}], "tags": [], "owner": {"reputation": 305833, "user_id": 68587, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7d9fd158e03cbde94f7e0b33b78222af?s=128&d=identicon&r=PG", "display_name": "John Kugelman", "link": "https://stackoverflow.com/users/68587/john-kugelman"}, "is_accepted": true, "score": 5, "last_activity_date": 1546467864, "last_edit_date": 1546467864, "creation_date": 1546466959, "answer_id": 54013826, "question_id": 54013771, "link": "https://stackoverflow.com/questions/54013771/how-to-send-data-in-little-endian-order-c/54013826#54013826", "title": "How to send data in little endian order C", "body": "<p><code>int16_t</code> has the correct size but may or may not be the correct endianness. To ensure little endian order use macros such as the ones from <a href=\"https://linux.die.net/man/3/endian\" rel=\"nofollow noreferrer\">endian.h</a>:</p>\n\n<pre><code>#define _BSD_SOURCE\n#include &lt;endian.h&gt;\n\n...\n\nuint16_t ec_min_angle_le = htole16(ec_min_angle);\nuint16_t ec_max_angle_le = htole16(ec_max_angle);\n\nwrite(fd, &amp;ec_min_angle_le, 2);\nwrite(fd, &amp;ec_max_angle_le, 2);\n</code></pre>\n\n<p>Here <code>htole16</code> stands for \"host to little endian 16-bit\". It converts from the host machine's native endianness to little endian: if the machine is big endian it swaps the bytes; if it's little endian it's a no-op.</p>\n\n<p>Also note that you have you pass the address of the values to <code>write()</code>, not the values themselves. Sadly, we cannot inline the calls and write <code>write(fd, htole16(ec_min_angle_le), 2)</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "is_accepted": false, "score": 0, "last_activity_date": 1546467818, "last_edit_date": 1546467818, "creation_date": 1546467066, "answer_id": 54013845, "question_id": 54013771, "link": "https://stackoverflow.com/questions/54013771/how-to-send-data-in-little-endian-order-c/54013845#54013845", "title": "How to send data in little endian order C", "body": "<p>If you don't need to have it type-generic, you can simply do:</p>\n\n<pre><code>#include &lt;stdint.h&gt;\n#include &lt;unistd.h&gt;\n\n/*most optimizers will turn this into `return 1;`*/\n_Bool little_endian_eh() { uint16_t x = 1; return *(char *)&amp;x; }\n\nvoid swap2bytes(void *X) { char *x=X,t; t=x[0]; x[0]=x[1]; x[1]=t; }\n\nint main()\n{\n    int16_t rc_min_angle = -90; \n    int16_t rc_max_angle = 120;\n\n    //this'll very likely be a noop since most machines\n    //are little-endian\n    if(!little_endian_eh()){\n        swap2bytes(&amp;rc_min_angle);\n        swap2bytes(&amp;rc_max_angle);\n    }\n\n    //TODO error checking on write calls\n    int fd =1;\n    write(fd, &amp;rc_min_angle, 2); \n    write(fd, &amp;rc_max_angle, 2);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1546468657, "post_id": 54013991, "comment_id": 94865305, "body": "OK fair enough.  Yet if code examines the return value of <code>write(fd, val_le, 2)</code>, then why not also the return value of <code>write(fd, val_le + 1, 1);</code>?  Seems clear enough to just code <code>return write(fd, val_le, 2);</code> and let the caller decide on the error handling."}, {"owner": {"reputation": 102109, "user_id": 1600898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/01377f8b31f24b0265854666b29d0c03?s=128&d=identicon&r=PG", "display_name": "user4815162342", "link": "https://stackoverflow.com/users/1600898/user4815162342"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1546469075, "post_id": 54013991, "comment_id": 94865424, "body": "@chux You&#39;re right, examining the second <code>write()</code> cannot be avoided. <code>return write(fd, val_le, 2)</code> is insufficent because a <i>valid</i> <code>write()</code> can return 1, it&#39;s simply not an error case."}], "tags": [], "owner": {"reputation": 102109, "user_id": 1600898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/01377f8b31f24b0265854666b29d0c03?s=128&d=identicon&r=PG", "display_name": "user4815162342", "link": "https://stackoverflow.com/users/1600898/user4815162342"}, "is_accepted": false, "score": 0, "last_activity_date": 1546470140, "last_edit_date": 1546470140, "creation_date": 1546468060, "answer_id": 54013991, "question_id": 54013771, "link": "https://stackoverflow.com/questions/54013771/how-to-send-data-in-little-endian-order-c/54013991#54013991", "title": "How to send data in little endian order C", "body": "<p>To send little-endian data, you can just generate the bytes manually:</p>\n\n<pre><code>int write_le(int fd, int16_t val) {\n    unsigned char val_le[2] = {\n      val &amp; 0xff, (uint16_t) val &gt;&gt; 8\n    };\n\n    int nwritten = 0, total = 2;\n    while (nwritten &lt; total) {\n      int n = write(fd, val_le + nwritten, total - nwritten);\n      if (n == -1)\n        return nwritten &gt; 0 ? nwritten : -1;\n      nwritten += n;\n    }\n    return nwritten;\n}\n</code></pre>\n\n<p>A good compiler will recognize that the code does nothing and compile the bit manipulation to no-op on a little-endian platform. (See e.g. gcc generating the same code for the variant <a href=\"https://godbolt.org/z/lc4Czm\" rel=\"nofollow noreferrer\">with</a> and <a href=\"https://godbolt.org/z/OyEFGf\" rel=\"nofollow noreferrer\">without</a> the bit-twiddling.)</p>\n\n<p>Note also that you shouldn't ignore the return value of <code>write()</code> - not only can it encounter an error, it can also write less than you gave it to, in which case you must repeat the write.</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1546470018, "last_edit_date": 1546470018, "creation_date": 1546469312, "answer_id": 54014172, "question_id": 54013771, "link": "https://stackoverflow.com/questions/54013771/how-to-send-data-in-little-endian-order-c/54014172#54014172", "title": "How to send data in little endian order C", "body": "<p>If endian functions are not available, simply write the bytes in little endian order.</p>\n\n<p>Perhaps with a <em>compound literal</em>.</p>\n\n<pre><code>//         v------------- compound literal ---------------v\nwrite(fd, &amp;(uint8_t[2]){rc_min_angle%256, ec_min_angle/256}, 2);\nwrite(fd, &amp;(uint8_t[2]){rc_max_angle%256, ec_max_angle/256}, 2);\n//                      ^-- LS byte ---^  ^-- MS byte ---^\n//        &amp;\n</code></pre>\n\n<p>I added the <code>&amp;</code> assuming the <code>write()</code> is a like <a href=\"https://linux.die.net/man/2/write\" rel=\"nofollow noreferrer\">write(2) - Linux</a>.</p>\n"}], "owner": {"reputation": 2511, "user_id": 3015268, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/K2RwN.jpg?s=128&g=1", "display_name": "bakalolo", "link": "https://stackoverflow.com/users/3015268/bakalolo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 284, "favorite_count": 0, "accepted_answer_id": 54013826, "answer_count": 4, "score": 2, "last_activity_date": 1546473815, "creation_date": 1546466612, "last_edit_date": 1546473815, "question_id": 54013771, "link": "https://stackoverflow.com/questions/54013771/how-to-send-data-in-little-endian-order-c", "title": "How to send data in little endian order C", "body": "<p>I am communicating with a board that requires I send it 2 signed byte.</p>\n\n<p>explaination of data type<br>\n<a href=\"https://i.stack.imgur.com/PWR9k.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PWR9k.png\" alt=\"enter image description here\"></a>\nwhat I need to send\n<a href=\"https://i.stack.imgur.com/lYSet.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lYSet.png\" alt=\"enter image description here\"></a></p>\n\n<p>Would I need to bitwise manipulation or can I just send 16bit integer as the following?  </p>\n\n<pre><code>int16_t rc_min_angle = -90; \nint16_t rc_max_angle = 120;\n\nwrite(fd, &amp;rc_min_angle, 2); \nwrite(fd, &amp;rc_max_angle, 2);\n</code></pre>\n"}, {"tags": ["c", "ansi-escape"], "comments": [{"owner": {"reputation": 23069, "user_id": 156811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/380335e95e6be9740e56b64d667279b3?s=128&d=identicon&r=PG", "display_name": "Havenard", "link": "https://stackoverflow.com/users/156811/havenard"}, "edited": false, "score": 9, "creation_date": 1546466016, "post_id": 54013627, "comment_id": 94864348, "body": "That is because the terminal you are using doesn&#39;t support VT100 color coding."}, {"owner": {"reputation": 1, "user_id": 10859910, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_CpyRoTZnbo/AAAAAAAAAAI/AAAAAAAAAAo/fKN134neNZk/photo.jpg?sz=128", "display_name": "Nikki Gonzales", "link": "https://stackoverflow.com/users/10859910/nikki-gonzales"}, "reply_to_user": {"reputation": 23069, "user_id": 156811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/380335e95e6be9740e56b64d667279b3?s=128&d=identicon&r=PG", "display_name": "Havenard", "link": "https://stackoverflow.com/users/156811/havenard"}, "edited": false, "score": 0, "creation_date": 1546466210, "post_id": 54013627, "comment_id": 94864437, "body": "okay but why does when i  set a header file and type the same thing in the header file it works im so confused right now"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1546466626, "post_id": 54013627, "comment_id": 94864580, "body": "What do you mean by &quot;set a header file&quot;?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1546466711, "post_id": 54013627, "comment_id": 94864609, "body": "By the way this code, minus the <code>_getch()</code> and <code>#include &lt;conio.h&gt;</code>, which are platform specific, works for me. Make sure you&#39;re running this in an ANSI compatible terminal. Your compiler&#39;s output window is probably not interpreting <a href=\"https://en.wikipedia.org/wiki/ANSI_escape_code\" rel=\"nofollow noreferrer\">ANSI characters properly</a>, and the shell you&#39;re in might not be set to have colours enabled."}, {"owner": {"reputation": 23069, "user_id": 156811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/380335e95e6be9740e56b64d667279b3?s=128&d=identicon&r=PG", "display_name": "Havenard", "link": "https://stackoverflow.com/users/156811/havenard"}, "edited": false, "score": 0, "creation_date": 1546467493, "post_id": 54013627, "comment_id": 94864902, "body": "Maybe <code>cat</code> on Windows does the color processing because it knows the terminal wont do it."}, {"owner": {"reputation": 1, "user_id": 10859910, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_CpyRoTZnbo/AAAAAAAAAAI/AAAAAAAAAAo/fKN134neNZk/photo.jpg?sz=128", "display_name": "Nikki Gonzales", "link": "https://stackoverflow.com/users/10859910/nikki-gonzales"}, "edited": false, "score": 0, "creation_date": 1546471550, "post_id": 54013627, "comment_id": 94866102, "body": "&quot;set a header file&quot; i mean i also include another header file in my main class and typed the code in my created function and just called my function into the main class and for some reason it worked ...... example:      #include &quot;Header Files/Hello.h&quot;&lt;-----inside this .h file there a function where i print the color coded hello world"}, {"owner": {"reputation": 1, "user_id": 10859910, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_CpyRoTZnbo/AAAAAAAAAAI/AAAAAAAAAAo/fKN134neNZk/photo.jpg?sz=128", "display_name": "Nikki Gonzales", "link": "https://stackoverflow.com/users/10859910/nikki-gonzales"}, "edited": false, "score": 0, "creation_date": 1546471878, "post_id": 54013627, "comment_id": 94866194, "body": "and by the way thanks for all your help"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1546483197, "post_id": 54013627, "comment_id": 94868302, "body": "<code>main()</code> is not a class, it is a specific <i>function</i> of type <code>int</code> mandated by the C standard for hosted environments and may be <i>implementation defined</i> for freestanding (embedded) systems. What version of windows are you using? Is the terminal used after you include the header that produces the green text the same one that fails without the header (which makes no sense whatsoever). Let us know. Testing at the shell on Linux, <code>printf &quot;\\033[1;32mHello World\\n\\033[0m&quot;</code> works just fine."}], "answers": [{"tags": [], "owner": {"reputation": 65, "user_id": 3878148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99d87f20c29371e7c8f5478f305a8d6a?s=128&d=identicon&r=PG", "display_name": "stansy", "link": "https://stackoverflow.com/users/3878148/stansy"}, "is_accepted": false, "score": 0, "last_activity_date": 1547102522, "creation_date": 1547102522, "answer_id": 54123170, "question_id": 54013627, "link": "https://stackoverflow.com/questions/54013627/how-to-do-a-ansi-color-codes/54123170#54123170", "title": "How to do a ansi color codes", "body": "<p>Maybe in this way:</p>\n\n<pre><code>HANDLE hStdout = GetStdHandle(STD_OUTPUT_HANDLE);\nDWORD dwMode = 0;\nGetConsoleMode(hStdout, &amp;dwMode);\ndwMode |= ENABLE_VIRTUAL_TERMINAL_PROCESSING;\nSetConsoleMode(hStdout, dwMode);\nprintf(\"\\033[1;32mHello World\\033[0m\");\n</code></pre>\n\n<p>You need to initialize the appropriate mode Windows console.</p>\n"}], "owner": {"reputation": 1, "user_id": 10859910, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_CpyRoTZnbo/AAAAAAAAAAI/AAAAAAAAAAo/fKN134neNZk/photo.jpg?sz=128", "display_name": "Nikki Gonzales", "link": "https://stackoverflow.com/users/10859910/nikki-gonzales"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 90, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1547102522, "creation_date": 1546465818, "last_edit_date": 1546483398, "question_id": 54013627, "link": "https://stackoverflow.com/questions/54013627/how-to-do-a-ansi-color-codes", "title": "How to do a ansi color codes", "body": "<p>The problem is that when i typed</p>\n\n<pre><code>printf(\"\\033[1;32mHello World\\033[0m\");\n</code></pre>\n\n<p>it prints something like this </p>\n\n<pre><code>[1;32mHello World[0m \n</code></pre>\n\n<p>in the console. My code is</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;conio.h&gt;\n\nint main(){\n\n    printf(\"\\033[1;32mHello World\\033[0m\");\n\n    _getch();\n    return 0;\n}\n</code></pre>\n\n<p>it displays:</p>\n\n<pre><code>a box with a question mark inside-&gt;[1;32mHello World[0m\n</code></pre>\n\n<p>but should be a color green text color Hello World.</p>\n"}, {"tags": ["c", "arrays", "struct"], "comments": [{"owner": {"reputation": 9358, "user_id": 35989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/320239374ee6d1ae0d8c6889b0de89a9?s=128&d=identicon&r=PG", "display_name": "Dipstick", "link": "https://stackoverflow.com/users/35989/dipstick"}, "edited": false, "score": 0, "creation_date": 1546465950, "post_id": 54013617, "comment_id": 94864319, "body": "Is <code>size</code> the number of bytes or the number of elements in the array?"}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 1, "creation_date": 1546466115, "post_id": 54013617, "comment_id": 94864391, "body": "To simplify things [it may make it more clear], change your function to: <code>pixel * liniarizare(char *filename)</code>. At the bottom, do <code>return liniar;</code> And, in <code>main</code>, do: <code>liniar = liniarizare(filename);</code>"}, {"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 2, "creation_date": 1546466180, "post_id": 54013617, "comment_id": 94864419, "body": "Looks like you allocate an array of pointers with malloc, but never initialize them to point at anything, so when you try to fread through them, it crashes.  But you don&#39;t include an <a href=\"https://stackoverflow.com/help/mcve\">MVCE</a>, so its impossible to tell."}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1546466280, "post_id": 54013617, "comment_id": 94864466, "body": "The combination of <code>malloc(size)</code> and <code>for (i=0;i&lt;size;i++)</code> cannot be correct. You are accessing way past the bounds of allocated memory in the loop"}, {"owner": {"reputation": 25, "user_id": 10859888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83b6b3016e41dcdc51486c0145d4755d?s=128&d=identicon&r=PG&f=1", "display_name": "valentine george", "link": "https://stackoverflow.com/users/10859888/valentine-george"}, "reply_to_user": {"reputation": 9358, "user_id": 35989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/320239374ee6d1ae0d8c6889b0de89a9?s=128&d=identicon&r=PG", "display_name": "Dipstick", "link": "https://stackoverflow.com/users/35989/dipstick"}, "edited": false, "score": 0, "creation_date": 1546466346, "post_id": 54013617, "comment_id": 94864490, "body": "@Dipstick It&#39;s the number of bytes (i calculate it with size=width * height * sizeof(pixel), as im planning to add width * height pixels in the array)"}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1546466377, "post_id": 54013617, "comment_id": 94864499, "body": "Following my previous comment, you probably want: <code>pixel *liniar = malloc(size * sizeof(pixel))</code> <i>if</i> <code>size</code> is a <i>count</i> of the number of pixels you need. The <i>size</i> would be calculated something like: <code>size = sizeof(pixel) * count;</code>. Either way is okay, just know which it is that you are doing."}, {"owner": {"reputation": 25, "user_id": 10859888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83b6b3016e41dcdc51486c0145d4755d?s=128&d=identicon&r=PG&f=1", "display_name": "valentine george", "link": "https://stackoverflow.com/users/10859888/valentine-george"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1546466789, "post_id": 54013617, "comment_id": 94864636, "body": "@UnholySheep Yes sorry,I messed up on the site while trying to simplify the code.I corrected it now on the site but issue is still there"}, {"owner": {"reputation": 25, "user_id": 10859888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83b6b3016e41dcdc51486c0145d4755d?s=128&d=identicon&r=PG&f=1", "display_name": "valentine george", "link": "https://stackoverflow.com/users/10859888/valentine-george"}, "reply_to_user": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1546466898, "post_id": 54013617, "comment_id": 94864686, "body": "@CraigEstey I just checked and i actually think its the fread thats causing the problem, if i comment the loop bit it works out fine without crashing.Your version of the dynamic allocation seems to work but it still crashes when i add the reading in.(Also im not allowed to return the array in main, i just need my array to memorise the values)"}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1546467220, "post_id": 54013617, "comment_id": 94864801, "body": "I believe you <i>need</i> the single star pointer (i.e. my version). But, the <code>fread</code> is incorrect. You&#39;re trying to read a <i>byte</i> into an <code>int</code>, so the value will be wrong/garbage. Do: <code>unsigned char mybyte;</code> then do (for each color): <code>fread(&amp;mybyte,1,1,fin); liniar[i]-&gt;r = mybyte;</code>"}, {"owner": {"reputation": 25, "user_id": 10859888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83b6b3016e41dcdc51486c0145d4755d?s=128&d=identicon&r=PG&f=1", "display_name": "valentine george", "link": "https://stackoverflow.com/users/10859888/valentine-george"}, "reply_to_user": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1546467910, "post_id": 54013617, "comment_id": 94865036, "body": "@CraigEstey Did as instructed, even removed height and width so I&#39;m sure they&#39;re not affecting the program.  <code>*liniar=malloc(800*sizeof(pixel));      for (i=0;i&lt;800;i++)         {   unsigned char mybyte;             fread(&amp;mybyte,1,1,fin); liniar[i]-&gt;r =mybyte;             fread(&amp;mybyte,1,1,fin); liniar[i]-&gt;g=mybyte;             fread(&amp;mybyte,1,1,fin); liniar[i]-&gt;b=mybyte;          } </code>But unfortunately it still doesn&#39;t work."}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1546467998, "post_id": 54013617, "comment_id": 94865064, "body": "See my answer below. The <code>linear[i]-&gt;b</code> may be the issue [my bad]. I changed that below."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1546469127, "post_id": 54013617, "comment_id": 94865439, "body": "As a side issue, it&#39;s almost always better for functions like <code>liniarizare</code> to take a <code>FILE*</code> as a parameter, rather than a filename. &quot;A function should just do one thing.&quot; Opening a file and reporting an error if the file doesn&#39;t exist is not the one thing that <code>liniarizare</code> should do. And not forcing the file to be named and opened gives more flexibility; it could be used to read images from standard input or from multi-image archives."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 10859888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83b6b3016e41dcdc51486c0145d4755d?s=128&d=identicon&r=PG&f=1", "display_name": "valentine george", "link": "https://stackoverflow.com/users/10859888/valentine-george"}, "edited": false, "score": 0, "creation_date": 1546468701, "post_id": 54013939, "comment_id": 94865313, "body": "Miraculously enough it works. The only problem is that i need to be able to pass the array by &quot;reference&quot; in the function and have the function provide back the modified array,which is why i insisted on using ** and a void. Do you have any idea what could be wrong in my code with your advice?You said something about  linear[i]-&gt;b being wrong."}, {"owner": {"reputation": 25, "user_id": 10859888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83b6b3016e41dcdc51486c0145d4755d?s=128&d=identicon&r=PG&f=1", "display_name": "valentine george", "link": "https://stackoverflow.com/users/10859888/valentine-george"}, "edited": false, "score": 0, "creation_date": 1546470909, "post_id": 54013939, "comment_id": 94865925, "body": "It works!! Honestly thanks a lot this answer saved me from spending even more hours trying to figure out why it would crash."}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "reply_to_user": {"reputation": 25, "user_id": 10859888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83b6b3016e41dcdc51486c0145d4755d?s=128&d=identicon&r=PG&f=1", "display_name": "valentine george", "link": "https://stackoverflow.com/users/10859888/valentine-george"}, "edited": false, "score": 0, "creation_date": 1546471144, "post_id": 54013939, "comment_id": 94865988, "body": "You&#39;re welcome! We all work for &quot;points&quot; here :-) So, please consider upvote/accept: <a href=\"https://stackoverflow.com/help/someone-answers\">stackoverflow.com/help/someone-answers</a>"}], "tags": [], "owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "is_accepted": true, "score": 0, "last_activity_date": 1546475538, "last_edit_date": 1546475538, "creation_date": 1546467760, "answer_id": 54013939, "question_id": 54013617, "link": "https://stackoverflow.com/questions/54013617/dynamically-allocated-struct-in-function/54013939#54013939", "title": "Dynamically allocated struct in function", "body": "<p>Note that this is prefaced by my top comments.</p>\n\n<p>That is, have the function return <code>pixel *</code>. And, use an extra <code>unsigned char</code> variable to prevent reading a byte into an <code>unsigned int</code></p>\n\n<p>Here's a simplified version that I think should work:</p>\n\n<pre><code>typedef struct pixel {\n    unsigned int r;\n    unsigned int g;\n    unsigned int b;\n} pixel;\n\npixel *\nliniarizare(char *filename)\n{\n    int i;\n\n    int count = width * height;\n    int size = sizeof(pixel) * count;\n    pixel *liniar = malloc(size);\n\n    pixel *pix = liniar;\n    unsigned char byte;\n    for (i = 0; i &lt; count; ++i, ++pix) {\n        fread(&amp;byte,1,1,fin);\n        pix-&gt;b = byte;\n\n        fread(&amp;byte,1,1,fin);\n        pix-&gt;g = byte;\n\n        fread(&amp;byte,1,1,fin);\n        pix-&gt;r = byte;\n    }\n\n    return liniar;\n}\n\nint\nmain(void)\n{\n    pixel *liniar;\n\n    liniar = liniarizare(filename);\n\n    return 0;\n}\n</code></pre>\n\n<hr>\n\n<p><strong>UPDATE:</strong></p>\n\n<blockquote>\n  <p>Miraculously enough it works. The only problem is that i need to be able to pass the array by \"reference\" in the function and have the function provide back the modified array,which is why i insisted on using <code>**</code> and a <code>void</code>. Do you have any idea what could be wrong in my code with your advice? You said something about <code>linear[i]-&gt;b</code> being wrong.</p>\n</blockquote>\n\n<p>Okay, the simplest/best way to deal with a \"return\" double star argument (e.g.) <code>whatever **retptr</code>) is to <em>ignore</em> this as much as possible.</p>\n\n<p>That is, the function deals with the simpler <code>whatever *ptr</code> internally. This is <em>faster</em> because there is only a single dereference level and <em>not</em> a <em>double</em> dereference on <em>each</em> statement.</p>\n\n<p>The return value (i.e. the double star pointer) is only set at the end <em>once</em>.</p>\n\n<p>Here's my example reworked to use your original function prototype [but with my other cleanup]. Note that only two lines are changed (the function prototype and the last line of the function):</p>\n\n<pre><code>typedef struct pixel {\n    unsigned int r;\n    unsigned int g;\n    unsigned int b;\n} pixel;\n\nvoid\nliniarizare(char *filename,pixel **retval)\n{\n    int i;\n\n    int count = width * height;\n    int size = sizeof(pixel) * count;\n    pixel *liniar = malloc(size);\n\n    pixel *pix = liniar;\n    unsigned char byte;\n    for (i = 0; i &lt; count; ++i, ++pix) {\n        fread(&amp;byte,1,1,fin);\n        pix-&gt;b = byte;\n\n        fread(&amp;byte,1,1,fin);\n        pix-&gt;g = byte;\n\n        fread(&amp;byte,1,1,fin);\n        pix-&gt;r = byte;\n    }\n\n    *retval = liniar;\n}\n\nint\nmain(void)\n{\n    pixel *liniar;\n\n    liniarizare(filename,&amp;liniar);\n\n    return 0;\n}\n</code></pre>\n\n<hr>\n\n<p>Sometimes the \"return value\" pointer needs to be read at the top of a function and set at the bottom.</p>\n\n<p>Here's a \"push to tail\" function for a singly linked list:</p>\n\n<pre><code>void\npush(node **list,node *new)\n{\n    node *head;\n    node *prev;\n    node *cur;\n\n    head = *list;\n\n    prev = NULL;\n    for (cur = head;  cur != NULL;  cur = cur-&gt;next)\n        prev = cur;\n\n    if (prev != NULL)\n        prev-&gt;next = new;\n    else\n        head = new;\n\n    new-&gt;next = NULL;\n\n    *list = head;\n}\n</code></pre>\n\n<hr>\n\n<p><strong>UPDATE #2:</strong></p>\n\n<p>Okay, now that we've got something <em>working</em>, it's time to <em>optimize</em> it [after a suitable rest period :-)].</p>\n\n<p>Keep the now working version around as a reference/cross-check.</p>\n\n<p><code>fread</code> calls on single bytes are somewhat expensive.</p>\n\n<p>Since your code is doing byte at a time I/O, we can replace the <code>fread</code> calls with <code>fgetc</code>. This should be slightly faster:</p>\n\n<pre><code>for (i = 0; i &lt; count; ++i, ++pix) {\n    pix-&gt;b = fgetc(fin) &amp; 0xFF;\n    pix-&gt;g = fgetc(fin) &amp; 0xFF;\n    pix-&gt;r = fgetc(fin) &amp; 0xFF;\n}\n</code></pre>\n\n<p>However, we'd like to read as much as we can in single chunk. To read the <em>entire</em> image in one <code>fread</code> call would require a temp array of (e.g.) <code>unsigned char image[count];</code>. This is probably <em>too</em> much memory, and reading a large image might run into cache hit/miss issues.</p>\n\n<p>But we <em>could</em> do a <em>row</em> at a time (e.g. <code>unsigned char row[width * 3];</code>). This is more tractable and probably produces as good or better results, so it may be a good compromise.</p>\n\n<p>This <em>may</em> or may <em>not</em> be faster. That's why we keep the other versions around and benchmark to determine the fastest/best.</p>\n\n<p>Note that this code assumes that pixels in the X dimension are physically adjacent [a reasonable possibility], but still works even if the matrix is transposed. In the end, it still reads <code>count</code> pixels in linear order, per your original code:</p>\n\n<pre><code>typedef struct pixel {\n    unsigned int r;\n    unsigned int g;\n    unsigned int b;\n} pixel;\n\nvoid\nliniarizare_by_row(char *filename,pixel **retval)\n{\n    int i;\n    int yidx;\n\n    int count = width * height;\n    int size = sizeof(pixel) * count;\n    int w3 = width * 3;\n    pixel *liniar = malloc(size);\n\n    pixel *pix = liniar;\n    unsigned char row[w3];\n    for (yidx = 0;  yidx &lt; height;  ++yidx) {\n        fread(row,sizeof(row),1,fin);\n        for (i = 0;  i &lt; w3;  i += 3, ++pix) {\n            pix-&gt;b = row[i + 0];\n            pix-&gt;g = row[i + 1];\n            pix-&gt;r = row[i + 2]\n        }\n    }\n\n    *retval = liniar;\n}\n\nint\nmain(void)\n{\n    pixel *liniar;\n    pixel *liniar_fast;\n\n    liniarizare(filename,&amp;liniar);\n    liniarizare_fast(filename,&amp;liniar_fast);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 10859888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83b6b3016e41dcdc51486c0145d4755d?s=128&d=identicon&r=PG&f=1", "display_name": "valentine george", "link": "https://stackoverflow.com/users/10859888/valentine-george"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "accepted_answer_id": 54013939, "answer_count": 1, "score": 1, "last_activity_date": 1546475538, "creation_date": 1546465741, "last_edit_date": 1546467080, "question_id": 54013617, "link": "https://stackoverflow.com/questions/54013617/dynamically-allocated-struct-in-function", "title": "Dynamically allocated struct in function", "body": "<p>I have a school project related to bmp and im a bit stuck with the dynamic allocation aspect of things(as I have been asked to use that).\nWhat im trying to do is pass my array using a pointer, so that the array changes its value even after the function ends,which is why i used **. However, the code just ends up crashing because of this single bit(as without it it runs smoothly).Im sure it's my use of * and &amp; incorrectly but I don't know where and how to fix it.</p>\n\n<pre><code>typedef struct pixel{unsigned int r,g,b;}pixel;\nvoid liniarizare(char *filename,pixel **liniar)\n{int i;\n ... (i calculate size which is surely correct and declare fin;size=width*height*sizeof(pixel)\n*liniar=(pixel*)malloc(size);\nfor (i=0;i&lt;width*height;i++)\n    {fread(&amp;liniar[i]-&gt;b,1,1,fin);\n     fread(&amp;liniar[i]-&gt;g,1,1,fin);\n     fread(&amp;liniar[i]-&gt;r,1,1,fin);\n     } \n }\n...\nint main()\n{...\n pixel *liniar\n liniarizare(filename,&amp;liniar);\n ....}\n</code></pre>\n"}, {"tags": ["c", "string", "substring"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1546466836, "post_id": 54013599, "comment_id": 94864661, "body": "In your example there is no <code>*&#47;</code> ending text."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 3, "creation_date": 1546467065, "post_id": 54013599, "comment_id": 94864747, "body": "@tadman: markdown ate the star."}, {"owner": {"reputation": 2178, "user_id": 2208372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce0f8d54e87a4835f7cf67694cad247f?s=128&d=identicon&r=PG", "display_name": "Phil1970", "link": "https://stackoverflow.com/users/2208372/phil1970"}, "edited": false, "score": 0, "creation_date": 1546467151, "post_id": 54013599, "comment_id": 94864773, "body": "Does it have only one pair of <code>&#47;*</code> and <code>*&#47;</code> as it simplify code?"}], "answers": [{"tags": [], "owner": {"reputation": 2178, "user_id": 2208372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce0f8d54e87a4835f7cf67694cad247f?s=128&d=identicon&r=PG", "display_name": "Phil1970", "link": "https://stackoverflow.com/users/2208372/phil1970"}, "is_accepted": false, "score": 0, "last_activity_date": 1546467158, "creation_date": 1546467158, "answer_id": 54013856, "question_id": 54013599, "link": "https://stackoverflow.com/questions/54013599/function-which-will-delete-part-of-string/54013856#54013856", "title": "Function which will delete part of string", "body": "<p>You could use <code>strstr</code> (<a href=\"https://www.tutorialspoint.com/c_standard_library/c_function_strstr.htm\" rel=\"nofollow noreferrer\">https://www.tutorialspoint.com/c_standard_library/c_function_strstr.htm</a>) to find start delimiter and again to find end delimiter.</p>\n\n<p>Then you could use <code>memmove</code> (<a href=\"http://www.cplusplus.com/reference/cstring/memmove/\" rel=\"nofollow noreferrer\">http://www.cplusplus.com/reference/cstring/memmove/</a>) to move the remaining part of the string.</p>\n\n<p>If you can have multiple part to remove, then you can do that in a loop.</p>\n\n<p>Try to do it on paper first and also try to debug your program to see if it does what you expect it to do.</p>\n"}, {"tags": [], "owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "is_accepted": false, "score": 0, "last_activity_date": 1546467174, "creation_date": 1546467174, "answer_id": 54013859, "question_id": 54013599, "link": "https://stackoverflow.com/questions/54013599/function-which-will-delete-part-of-string/54013859#54013859", "title": "Function which will delete part of string", "body": "<p>C doesn't really have 'strings' as a type you can do things with.  Instead, C \"strings\" are a concept -- a sequence of characters in memory, terminated by a NUL character.  As a result, to do anything with strings you need to understand memory management.</p>\n\n<p>Generally, beginning programmers (and examples) do things with fixed-sized arrays and mixture of static (constant) strings and strings in fixed-size arrays that are assumed to fit (which you should always check).</p>\n\n<p>So in your case, you just say you \"have a string\" -- but don't say how or where you \"have\" it.  If you have it in a memory buffer that is big enough to hold it, then you could modify the buffer in place to contain the (shorter) desired string.  Or you could copy it to another buffer that is large enough to hold the modified string.  Those would be two very different C functions both of which could be described as \"deleting part of a string\"</p>\n"}, {"comments": [{"owner": {"reputation": 2178, "user_id": 2208372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce0f8d54e87a4835f7cf67694cad247f?s=128&d=identicon&r=PG", "display_name": "Phil1970", "link": "https://stackoverflow.com/users/2208372/phil1970"}, "edited": false, "score": 0, "creation_date": 1546468864, "post_id": 54013889, "comment_id": 94865366, "body": "Well, as it seems to be an homework, you are not really helping OP to learn by giving complete code."}], "tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": false, "score": 0, "last_activity_date": 1546467964, "last_edit_date": 1546467964, "creation_date": 1546467400, "answer_id": 54013889, "question_id": 54013599, "link": "https://stackoverflow.com/questions/54013599/function-which-will-delete-part-of-string/54013889#54013889", "title": "Function which will delete part of string", "body": "<p><code>str</code> has to be modifiable</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n\nchar *RemoveComment(char *str)\n{\n    char *start;\n    char *end;\n\n\n    do\n    {\n        start = strstr(str, \"/*\");\n        end = strstr(str, \"*/\");\n        if(start &amp;&amp; end &amp;&amp; end &gt; start)\n        {\n            memmove(start, end + 2, strlen(end + 2) + 1);\n        }\n    }while (start &amp;&amp; end);\n    return str;\n}\n\n\nint main()\n{\n\n    char text[] = \"D/*ad a*/nd mom /* and sister */ ar/*e at*/ ho/*me*/\";\n    printf(\"%s\\n\", RemoveComment(text));\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10859895, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-67wnUGYD-Y0/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwca8Ntilz3OeYSrPBg12qHZrX4JJKw/mo/photo.jpg?sz=128", "display_name": "Majcik X", "link": "https://stackoverflow.com/users/10859895/majcik-x"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1546467964, "creation_date": 1546465687, "last_edit_date": 1546467021, "question_id": 54013599, "link": "https://stackoverflow.com/questions/54013599/function-which-will-delete-part-of-string", "title": "Function which will delete part of string", "body": "<p>I need to create a function which will delete part of string. I can use stdio.h and stdlib.h only. </p>\n\n<p>E.g.: I have this string: \"<code>Dad and mom /* and sister */ are at home</code>\". And I need to delete the part which begin with <code>/*</code> and ends with <code>*/</code>. So the result will be \"<code>Dad and mom are at home</code>\". </p>\n"}, {"tags": ["c", "stack", "fwrite", "fread"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1546464068, "post_id": 54013231, "comment_id": 94863595, "body": "<a href=\"https://stackoverflow.com/questions/5431941\">while(!feof(fp)) is always wrong</a>"}, {"owner": {"reputation": 622, "user_id": 9612225, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "flaixman", "link": "https://stackoverflow.com/users/9612225/flaixman"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1546464154, "post_id": 54013231, "comment_id": 94863636, "body": "what&#39;s the right way to have the same stack I just wrote? How do I modify it?"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1546464155, "post_id": 54013231, "comment_id": 94863637, "body": "A lot of code is missing so it&#39;s not easy to help you. But it seems that you are writing pointer values to the file. That is nearly always a mistake."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1546464157, "post_id": 54013231, "comment_id": 94863638, "body": "Oh, you can&#39;t write pointers out and expect to read the addresses back and have them point to anything meaningful...  (e.g. <code>fwrite(aux ,sizeof(aux), 1, file);</code>) You have to <i>serialize</i> your data and write the actual data to a file, and then read the values back into your struct and stack (which both will have very different addresses when read back in) <code>aux</code> is a pointer, and <code>sizeof (aux)</code> is <code>sizeof a_pointer</code>."}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 2, "creation_date": 1546464249, "post_id": 54013231, "comment_id": 94863673, "body": "The final <code>fwrite</code> in your write function is incorrect. You are writing the <i>pointer</i> to the stack struct and <i>not</i> the stack struct itself--not terribly useful. You [probably] want <code>fwrite(stack, sizeof(struct my_stack), 1, file);</code>. And, you probably want to move this to the top and write it out <i>first</i> because you read it first in your read function. Also, <code>fread(stackRead, sizeof(stackRead), 1, file);</code> is incorrect. You want: <code>fread(stackRead, sizeof(sizeof(struct mystack)), 1, file);</code>"}, {"owner": {"reputation": 1789, "user_id": 3980968, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/FXI47.jpg?s=128&g=1", "display_name": "BlueStrat", "link": "https://stackoverflow.com/users/3980968/bluestrat"}, "edited": false, "score": 0, "creation_date": 1546464374, "post_id": 54013231, "comment_id": 94863712, "body": "At first glance, it seems that your writing logic is writing the list as a sequence of <code>my_stack_node</code> type instances, while the reading logic, initially reads an instance of type <code>struct my_stack</code> and then reads the rest of the list as instances of type <code>struct my_stack_node</code>. If both types are not binary-equivalent, this will surely produce wrong results."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1546464398, "post_id": 54013231, "comment_id": 94863725, "body": "@flaixman That was just the first thing that I saw. It&#39;s a common problem, so I thought you should be aware of it."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1546464629, "post_id": 54013231, "comment_id": 94863813, "body": "In the read function it seems you <code>malloc</code> into <code>stackRead</code> twice and thereby leaks memory"}, {"owner": {"reputation": 622, "user_id": 9612225, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "flaixman", "link": "https://stackoverflow.com/users/9612225/flaixman"}, "edited": false, "score": 0, "creation_date": 1546465383, "post_id": 54013231, "comment_id": 94864091, "body": "I will try for a print debugging, as I only have 10 nodes for the text, I will print each node I write, and then each node I read. I&#39;ll catch back once I have tried all your solutions. Thanks."}, {"owner": {"reputation": 622, "user_id": 9612225, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "flaixman", "link": "https://stackoverflow.com/users/9612225/flaixman"}, "edited": false, "score": 0, "creation_date": 1546466870, "post_id": 54013231, "comment_id": 94864677, "body": "@3422102   I just changed the code for a clear view (the data type is void, but it correlates). Can you see anything more? Tried some things, but with no avail"}], "owner": {"reputation": 622, "user_id": 9612225, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "flaixman", "link": "https://stackoverflow.com/users/9612225/flaixman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1546470462, "creation_date": 1546463413, "last_edit_date": 1546470462, "question_id": 54013231, "link": "https://stackoverflow.com/questions/54013231/write-and-read-a-linked-list-stack-on-a-file-not-the-same", "title": "Write and read a linked list stack on a file not the same", "body": "<p>I'm having trouble writing and reading a stack (linked list of nodes) on a file, as the writing and the reading, comes in different sizes.</p>\n\n<p>When it comes to the writing, this is my function:</p>\n\n<pre><code>int my_stack_write(struct my_stack *stack, char *filename){\n        int count = 0;\n        struct my_stack_node *aux =malloc(sizeof(struct my_stack_node));\n        FILE *file = fopen(filename, \"wb\");\n\n        if(stack-&gt;first != NULL){\n                aux = stack-&gt;first;\n                count++;\n                while(aux-&gt;next != NULL){\n                        printf(\"New node in s1: (%p)\\n\", aux-&gt;data);\n                        fwrite(aux ,sizeof(struct my_stack_node), 1, file);\n                        aux = aux-&gt;next;\n                        count++;\n                }\n                printf(\"New node in s1: (%p)\\n\", aux-&gt;data);\n                fwrite(aux ,sizeof(struct my_stack_node), 1, file);\n\n        }\n        fclose(file);\n        return count;\n}\n</code></pre>\n\n<p>And this is my read:</p>\n\n<pre><code>struct my_stack *my_stack_read(char *filename){\n        struct my_stack *stackRead = my_stack_init(sizeof(struct my_stack_node));;\n        struct my_stack_node *stackNode = malloc(sizeof(struct my_stack_node));\n        FILE *file = fopen(filename, \"rb\");\n\n        if(!file){\n                puts(\"Impossible obrir el fitxer\");\n                return NULL;\n        }else{\n\n                while(fread(stackNode, sizeof(struct my_stack_node), 1, file)){\n\n                                printf(\"New node in fs1: (%p)\\n\", stackNode-&gt;data);\n                                stackNode = (struct my_stack_node*) stackNode;\n                                my_stack_push(stackRead, stackNode);\n                }\n                fclose(file);\n                return stackRead;\n        }\n}\n</code></pre>\n\n<p>The test I am using is this one:</p>\n\n<pre><code> if (my_stack_write(s1, \"/tmp/my_stack.data\") != len1) {\n        puts(\"Error in my_stack_write (s1)\");\n        exit(1);\n    }\n    puts(\"\\nReading the file...\");\n    fs1 = my_stack_read(\"/tmp/my_stack.data\");\n    if (!fs1) {\n        puts(\"Error in my_stack_read (fs1)\");\n        exit(1);\n    }\n\n    if (my_stack_len(s1) != my_stack_len(fs1)) {\n    printf(\"Stacks s1 (initial stack 1) %d and fs1 %d (retrieved from file) don't have the same length\\n\",my_stack_len(s1) ,my_stack_len(fs1));\n\n        exit(1);\n    }\nputs(\"s1 and the one retrieved from file (fs1) have the same length.\");\nputs(\"Comparing the data...\");\n\n// Test we can free the data and compare stacks s1 and fs1\nwhile ((data1 = my_stack_pop(s1))) {\n    data2 = my_stack_pop(fs1);\n    printf(\"Node of s1: (%d, %s)\\t\", data1-&gt;val, data1-&gt;name);\n    printf(\"Node of fs1: (%d, %s)\\n\", data2-&gt;val, data2-&gt;name);\n    if (!data2 || data1-&gt;val != data2-&gt;val || my_strcmp(data1-&gt;name, data2-&gt;name)) {\n        printf(\"Data in s1 and fs1 are not the same.\\n (data1-&gt;val: %d &lt;&gt; data2-&gt;val: %d) o (data1-&gt;name: %s &lt;&gt; data2-&gt;name: \"\n               \"%s)\\n\",\n               data1-&gt;val, data2-&gt;val, data1-&gt;name, data2-&gt;name);\n        exit(1);\n    }\n    size1 = sizeof(*data1);\n    size2 = sizeof(*data2);\n    free(data1);\n    free(data2);\n}\nprintf(\"size of data from s1: %d\\t\", size1);\nprintf(\"size of data from fs1: %d\\n\", size2);\n</code></pre>\n\n<p>Just changed the test, and managed to read \"better\", the output is:</p>\n\n<pre><code>Writting the smaller stack (s1), it must truncate the file.\nNew node in s1: (0x55969ed2be70)\nNew node in s1: (0x55969ed2be00)\nNew node in s1: (0x55969ed2bd90)\nNew node in s1: (0x55969ed2bd20)\nNew node in s1: (0x55969ed2bcb0)\nNew node in s1: (0x55969ed2bc40)\nNew node in s1: (0x55969ed2bbd0)\nNew node in s1: (0x55969ed2bb60)\nNew node in s1: (0x55969ed2baf0)\nNew node in s1: (0x55969ed2ba80)\n\nReading the file...\nNew node in fs1: (0x55969ed2be70)\nNew node in fs1: (0x55969ed2be00)\nNew node in fs1: (0x55969ed2bd90)\nNew node in fs1: (0x55969ed2bd20)\nNew node in fs1: (0x55969ed2bcb0)\nNew node in fs1: (0x55969ed2bc40)\nNew node in fs1: (0x55969ed2bbd0)\nNew node in fs1: (0x55969ed2bb60)\nNew node in fs1: (0x55969ed2baf0)\nNew node in fs1: (0x55969ed2ba80)\ns1 and the one retrieved from file (fs1) have the same length.\n</code></pre>\n\n<p>So I think the read and the write, write and read the exact same node every time, but when i compares the nodes:</p>\n\n<pre><code>Comparing the data...\nNode of s1: (-1630355856, \ufffdU)   Node of fs1: (-1630350448, \ufffdU)\nData in s1 and fs1 are not the same.\n (data1-&gt;val: -1630355856 &lt;&gt; data2-&gt;val: -1630350448) o (data1-&gt;name: \ufffdU &lt;&gt; data2-&gt;name: \ufffdU)\n</code></pre>\n\n<p>it \"explodes\". Any idea why is it?</p>\n\n<p>Any help will work.</p>\n"}, {"tags": ["c", "openssl", "bcrypt", "libcrypto"], "comments": [{"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1546464785, "post_id": 54012951, "comment_id": 94863876, "body": "Why are you assuming that bcrypt is just Blowfish?"}, {"owner": {"reputation": 4095, "user_id": 3957200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/25mzd.jpg?s=128&g=1", "display_name": "Cinder Biscuits", "link": "https://stackoverflow.com/users/3957200/cinder-biscuits"}, "edited": false, "score": 1, "creation_date": 1546465285, "post_id": 54012951, "comment_id": 94864052, "body": "Best lesson you can learn in cryptography, don&#39;t roll your own when a cryptographer already has done the work: <a href=\"https://github.com/libressl-portable/openbsd/blob/master/src/lib/libc/crypt/bcrypt.c\" rel=\"nofollow noreferrer\">github.com/libressl-portable/openbsd/blob/master/src/lib/lib&zwnj;&#8203;c/&hellip;</a>"}, {"owner": {"reputation": 4095, "user_id": 3957200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/25mzd.jpg?s=128&g=1", "display_name": "Cinder Biscuits", "link": "https://stackoverflow.com/users/3957200/cinder-biscuits"}, "edited": false, "score": 0, "creation_date": 1546465371, "post_id": 54012951, "comment_id": 94864086, "body": "Blowfish and BCrypt aren&#39;t the same thing. Blowfish is a cryptographic cipher, BCrypt is a password hashing algorithm <i>based on</i> blowfish."}, {"owner": {"reputation": 4095, "user_id": 3957200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/25mzd.jpg?s=128&g=1", "display_name": "Cinder Biscuits", "link": "https://stackoverflow.com/users/3957200/cinder-biscuits"}, "edited": false, "score": 0, "creation_date": 1546465469, "post_id": 54012951, "comment_id": 94864124, "body": "Finally, I would not recommend skipping the IV in any password hashing scheme, it opens your software up to rainbow table attacks (see my first comment)"}, {"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1546466091, "post_id": 54012951, "comment_id": 94864381, "body": "What your code is doing is blowfish-CBC. Bcrypt has nothing to do with it. Unclear what you&#39;re asking."}, {"owner": {"reputation": 97, "user_id": 2197150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d99486c9d46bd2890f2940d1941ab978?s=128&d=identicon&r=PG", "display_name": "Davi Doro", "link": "https://stackoverflow.com/users/2197150/davi-doro"}, "edited": false, "score": 0, "creation_date": 1546477448, "post_id": 54012951, "comment_id": 94867313, "body": "Thank you all for the help. As it was pointed out, I was wrong in assuming Blowfish and BCrypt are the same thing, just because I read somewhere B stands for Blowfish. I understand now that BCrypt is based on Blowfish and these are not the same thing."}], "answers": [{"tags": [], "owner": {"reputation": 97, "user_id": 2197150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d99486c9d46bd2890f2940d1941ab978?s=128&d=identicon&r=PG", "display_name": "Davi Doro", "link": "https://stackoverflow.com/users/2197150/davi-doro"}, "is_accepted": true, "score": 1, "last_activity_date": 1546479598, "creation_date": 1546479598, "answer_id": 54015333, "question_id": 54012951, "link": "https://stackoverflow.com/questions/54012951/how-to-use-bcrypt-in-openssl/54015333#54015333", "title": "How to use bcrypt in OpenSSL?", "body": "<p>As it was pointed out in the comments, I was wrong in assuming Blowfish and BCrypt are the same thing, just because I read somewhere B stands for Blowfish.</p>\n\n<p>I ended up following the suggestion from Cinder Biscuits  of using the OpenBSD implementation of bcrypt, avaiable at</p>\n\n<p><a href=\"https://github.com/libressl-portable/openbsd/blob/master/src/lib/libc/crypt/bcrypt.c\" rel=\"nofollow noreferrer\">https://github.com/libressl-portable/openbsd/blob/master/src/lib/libc/crypt/bcrypt.c</a></p>\n"}], "owner": {"reputation": 97, "user_id": 2197150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d99486c9d46bd2890f2940d1941ab978?s=128&d=identicon&r=PG", "display_name": "Davi Doro", "link": "https://stackoverflow.com/users/2197150/davi-doro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3595, "favorite_count": 0, "accepted_answer_id": 54015333, "answer_count": 1, "score": 1, "last_activity_date": 1546479598, "creation_date": 1546461974, "last_edit_date": 1546465013, "question_id": 54012951, "link": "https://stackoverflow.com/questions/54012951/how-to-use-bcrypt-in-openssl", "title": "How to use bcrypt in OpenSSL?", "body": "<p>I want to use bcrypt encryption for storing passwords and I know OpenSSL implements Blowfish Cipher (which I'm assuming is the same thing).</p>\n\n<p>I made some adaptations from the code shown in this page <a href=\"https://wiki.openssl.org/index.php/EVP_Symmetric_Encryption_and_Decryption\" rel=\"nofollow noreferrer\">https://wiki.openssl.org/index.php/EVP_Symmetric_Encryption_and_Decryption</a>\nand came up with this:</p>\n\n<pre><code>int OpenSSLEncrypt(\n    unsigned char* plaintext, \n    int plaintext_len, \n    unsigned char* key,\n    unsigned char* iv, \n    unsigned char* ciphertext) \n{\n    EVP_CIPHER_CTX *ctx;\n\n    int len;\n\n    int ciphertext_len;\n\n    if (!(ctx = EVP_CIPHER_CTX_new())) OpenSSLHandleErrors();\n\n    if (1 != EVP_EncryptInit_ex(ctx, EVP_bf_cbc(), 0, key, 0))\n        OpenSSLHandleErrors();\n\n    if (1 != EVP_EncryptUpdate(ctx, ciphertext, &amp;len, plaintext, plaintext_len))\n        OpenSSLHandleErrors();\n    ciphertext_len = len;\n\n    if (1 != EVP_EncryptFinal_ex(ctx, ciphertext + len, &amp;len)) \n        OpenSSLHandleErrors();\n\n    ciphertext_len += len;\n\n    /* Clean up */\n    EVP_CIPHER_CTX_free(ctx);\n\n    return ciphertext_len;\n}\n\nint OpenSSLDecrypt(\n    unsigned char* ciphertext, \n    int ciphertext_len, \n    unsigned char* key,\n    unsigned char* iv, \n    unsigned char* plaintext)\n{\n    EVP_CIPHER_CTX *ctx;\n    int len;\n    int plaintext_len;\n\n    if (!(ctx = EVP_CIPHER_CTX_new())) OpenSSLHandleErrors();\n\n    if (1 != EVP_DecryptInit_ex(ctx, EVP_bf_cbc(), NULL, key, 0))\n        OpenSSLHandleErrors();\n\n    if (1 != EVP_DecryptUpdate(ctx, plaintext, &amp;len, ciphertext, ciphertext_len))\n        OpenSSLHandleErrors();\n    plaintext_len = len;\n\n    if (1 != EVP_DecryptFinal_ex(ctx, plaintext + len, &amp;len)) \n        OpenSSLHandleErrors();\n\n    plaintext_len += len;\n\n    /* Clean up */\n    EVP_CIPHER_CTX_free(ctx);\n\n    return plaintext_len;\n}\n</code></pre>\n\n<p>But the length of the cipher that I get from OpenSSLEncrypt(...) depends on the length of the plaintext input parameter, which is not what I was expecting. I was expecting the output to be 64 bytes long no matter the length of the password.</p>\n\n<p>Also, I don't know if EVP_EncryptInit_ex needs an iv (initialization vector) or not for EVP_bf_cbc, and I found no documentation that could help me with this.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 8699, "user_id": 1726083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/757452f7cd7ba2347c667ef9298ceadb?s=128&d=identicon&r=PG", "display_name": "Daniel Farrell", "link": "https://stackoverflow.com/users/1726083/daniel-farrell"}, "edited": false, "score": 2, "creation_date": 1546458339, "post_id": 54012242, "comment_id": 94861316, "body": "It&#39;s awesome to see such a thoroughly considered and well written question.  Nicely done."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1546458673, "post_id": 54012242, "comment_id": 94861453, "body": "Understand, on access <code>int myArr[3][5]</code> the first level of indirection (e.g. the first <code>[..]</code>) is converted to a pointer to the first element in the array. With a 2D array the first element is a pointer to the first row (array). So it is converted <code>(*myArr)[5]</code> which is a pointer-to-array of <code>int [5]</code>. You can&#39;t just use <code>*myArr[5]</code> as <code>[ ]</code> binds tighter than <code>&#39;*&#39;</code> from a precedence standpoint which would result in an array-of-pointers to <code>int</code> (5 pointers). With <code>(*myArr)[5]</code> the pointer advances by 20-bytes (5-int) per-increment, with <code>*myArr[5]</code> the pointer advances by <code>sizeof a_pointer</code>."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 2, "creation_date": 1546458789, "post_id": 54012242, "comment_id": 94861495, "body": "The reference in the standard is <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.3.2.1p3\" rel=\"nofollow noreferrer\">C11 Standard - 6.3.2.1 Other Operands - Lvalues, arrays, and function designators(p3)</a> (note the exceptions when it is NOT converted to a pointer)"}], "answers": [{"comments": [{"owner": {"reputation": 739, "user_id": 7262393, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/10209827239390452/picture?type=large", "display_name": "Dan", "link": "https://stackoverflow.com/users/7262393/dan"}, "edited": false, "score": 0, "creation_date": 1546459987, "post_id": 54012440, "comment_id": 94861950, "body": "...and on the last iteration? The compiler knows not to increment the pointer to point at the non-existent <code>myArr[4][0]</code> or is that included in the &lt;?  Seems like to me given the order of operations the pointer is incremented before the loop can test <code>counter</code> and evaluate it to &lt;4"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 4, "creation_date": 1546460080, "post_id": 54012440, "comment_id": 94861978, "body": "Question #2: The proper syntax <i>without</i> the hard cast (avoided by seasoned programmers, nearly always a sign of misunderstanding or masking type issues by beginners), is to use <code>int *p = *pt;</code>"}, {"owner": {"reputation": 8699, "user_id": 1726083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/757452f7cd7ba2347c667ef9298ceadb?s=128&d=identicon&r=PG", "display_name": "Daniel Farrell", "link": "https://stackoverflow.com/users/1726083/daniel-farrell"}, "edited": false, "score": 1, "creation_date": 1546460164, "post_id": 54012440, "comment_id": 94862010, "body": "That&#39;s a great question.  Actually <code>pt</code> and <code>p</code> <i>are</i> post-incremented to the first &quot;non-existent&quot; address on the last iteration of the loop, but they&#39;re not dereferenced again because the <code>for</code> loop&#39;s condition is violated on the 5th pass, when an out-of-bounds <code>p</code> or <code>pt</code> would be dereferenced .  So though the last value of <code>pt</code> and <code>p</code> is an invalid one, that value is never actually accessed."}, {"owner": {"reputation": 739, "user_id": 7262393, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/10209827239390452/picture?type=large", "display_name": "Dan", "link": "https://stackoverflow.com/users/7262393/dan"}, "edited": false, "score": 0, "creation_date": 1546460266, "post_id": 54012440, "comment_id": 94862047, "body": "@danFarrell well...ive been reading a lot about pointing at nothing and how it can really mess up your day, so ive been ultra sensitive to it...but thank you!  I appreciate your answers!"}, {"owner": {"reputation": 739, "user_id": 7262393, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/10209827239390452/picture?type=large", "display_name": "Dan", "link": "https://stackoverflow.com/users/7262393/dan"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1546460385, "post_id": 54012440, "comment_id": 94862087, "body": "@whozcraig I need to digest and research what you&#39;ve said.  I&#39;m not sure Im understanding but Im going to try.  I appreciate the input!"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 739, "user_id": 7262393, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/10209827239390452/picture?type=large", "display_name": "Dan", "link": "https://stackoverflow.com/users/7262393/dan"}, "edited": false, "score": 0, "creation_date": 1546460851, "post_id": 54012440, "comment_id": 94862260, "body": "@Dan - <a href=\"https://pastebin.com/CeNYUChE\" rel=\"nofollow noreferrer\">2 versions of your <code>prnMyArr</code></a> that may offer a bit more exercise of the issue."}, {"owner": {"reputation": 739, "user_id": 7262393, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/10209827239390452/picture?type=large", "display_name": "Dan", "link": "https://stackoverflow.com/users/7262393/dan"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1546460872, "post_id": 54012440, "comment_id": 94862270, "body": "@whozcraig and @danFarrell, so I think I understand. no need to type cast. what if I didn&#39;t bother with the declaration for the pointer and just de-referenced in the <code>&#39;printf()</code> statement? This is where I was having trouble before and it was giving me the addresses instead of the values so maybe I hadn&#39;t done it quite right..."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "reply_to_user": {"reputation": 739, "user_id": 7262393, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/10209827239390452/picture?type=large", "display_name": "Dan", "link": "https://stackoverflow.com/users/7262393/dan"}, "edited": false, "score": 2, "creation_date": 1546461283, "post_id": 54012440, "comment_id": 94862470, "body": "@Dan First, pointers in C <i>point</i> to stuff (bear with me). You <i>dereference</i> a pointer to get to what it points to. The underlying <i>type</i> of the thing being pointed to dictates many things, among them outcome of <i>pointer arithmetic</i>. If you have some <code>int *p</code>, then <code>*p</code> gets you the <code>int</code> being pointed-to, and <code>++p</code> (or p++ post-facto) advances the pointer to the next <code>int</code>. That said, your function argument is a pointer to an <i>array</i> <code>[4]</code> of <code>int</code>. That&#39;s important, because that mean <code>++p</code> will advance to the next <code>int[4]</code> (not what you want to do). That&#39;s probably where the wheels came off."}, {"owner": {"reputation": 739, "user_id": 7262393, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/10209827239390452/picture?type=large", "display_name": "Dan", "link": "https://stackoverflow.com/users/7262393/dan"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1546461668, "post_id": 54012440, "comment_id": 94862614, "body": "Right @WhozCraig. I think I\u2019ve got the dereference thing...I just have a hard time keeping it straight!  Lol"}], "tags": [], "owner": {"reputation": 8699, "user_id": 1726083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/757452f7cd7ba2347c667ef9298ceadb?s=128&d=identicon&r=PG", "display_name": "Daniel Farrell", "link": "https://stackoverflow.com/users/1726083/daniel-farrell"}, "is_accepted": true, "score": 2, "last_activity_date": 1546460954, "last_edit_date": 1546460954, "creation_date": 1546459272, "answer_id": 54012440, "question_id": 54012242, "link": "https://stackoverflow.com/questions/54012242/precedence-parentheses-pointers-with-iterative-array-functions/54012440#54012440", "title": "Precedence, Parentheses, Pointers with iterative array functions", "body": "<blockquote>\n  <p>Question 1: Here, I've passed the pointer to the function and I keep thinking, \"What is this loop iterating over?\". Am I correct in thinking that I am incrementing the pointer to each of the first elements in each array (myArr[0][0], myArr[1][0], myArr[2][0], myArr[3][0])? </p>\n</blockquote>\n\n<p>more or less.  <code>pt</code> starts at the address of <code>myArr</code>.  You know there's 4 things in the array so you loop 4 times, incrementing <code>pt</code> after accessing it (read below) every time to pass to <code>printMyArr</code> each of the 4 elements of the \"top level\", \"outer\" array.  Then  <code>printMyArr</code> iterates over the 4 elements of the inner array to show each number.  </p>\n\n<blockquote>\n  <p>Also, am I correct in assuming that the syntax of this line is in essence saying: \"Execute the function passing the current pointer and THEN when it's done increment the pointer.\"?</p>\n</blockquote>\n\n<p>Functionally, yes.  Technically the order of operations looks like this:</p>\n\n<p>1) get the value of <code>pt</code>\n2) increment <code>pt</code>\n3) call function, passing the previous value of <code>pt</code> from step 1</p>\n\n<p><code>pt</code> is incremented as part of the <code>pt++</code> call, but <code>pt++</code> evaluates to the old value.  As an argument to a funciton, <code>pt++</code> must be evaluated <em>before</em> the function it's passed to runs.  But the timing looks the same as it evaluating directly after the function runs for your case.  </p>\n\n<p>Let's take questions 2 and 3 together because they're both part of the answer.</p>\n\n<blockquote>\n  <p>Question 2: This is what has me the most confused. After quite a bit of digging I found this bit to make it run right and I realize this is how it works, but why?</p>\n  \n  <p>Question 3: Am I correct thinking that I am incrementing each element here?</p>\n</blockquote>\n\n<pre><code>p = (int *)pt;          \nfor(counter=0; counter&lt;4; counter++)\n    printf(\"\\n\\n\\n%d\", *p++);  \n</code></pre>\n\n<p><code>p</code> stores an address of an integer.  You set it to the address of the first element of the inner array (which is the address of the inner array itself, so to speak).  Then, knowing you have 4 elements in the array, you'r able to loop 4 times, doing a similar pointer post-increment operation on <code>p</code> that you did with <code>pt</code> on the outer array.</p>\n\n<p>The first iteration, <code>p</code> is the same as <code>pt</code>, the address of the first of 4 integer values in memory.  <code>*p</code>, dereferencing the pointer, gets the first integer.  <code>*p++</code>, due to order of operations ( ++ being of the highest precedence, and dereferencing * being lower), returns the integer at <code>p</code>, leaving <code>p</code> pointing to the next integer address for the next loop.    </p>\n\n<p>In general, <a href=\"https://gustedt.wordpress.com/2014/04/02/dont-use-casts-i/\" rel=\"nofollow noreferrer\">casting values in C should be avoidid whenever possible</a>.  You merely have to do a dereference here to point <code>p</code> to the set of integers.    <code>pt</code> holds the address of one of 4 addresses ( outer array ) of contiguous sets of 4 integers (inner array) in memory.  The value at <code>*pt</code> is the address of the \"current\" set of 4 contiguous integers in memory.  So you can simply say, </p>\n\n<pre><code>int* p=*pt;\n</code></pre>\n\n<p>Which doesn't arbitrarily cast a type and is very straightforward and clear.  (Thanks @WhozCraig)</p>\n"}, {"tags": [], "owner": {"reputation": 527, "user_id": 10488746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vTDhZ.jpg?s=128&g=1", "display_name": "H.cohen", "link": "https://stackoverflow.com/users/10488746/h-cohen"}, "is_accepted": false, "score": 1, "last_activity_date": 1546459566, "creation_date": 1546459566, "answer_id": 54012502, "question_id": 54012242, "link": "https://stackoverflow.com/questions/54012242/precedence-parentheses-pointers-with-iterative-array-functions/54012502#54012502", "title": "Precedence, Parentheses, Pointers with iterative array functions", "body": "<p>A multy D array is kept in memory as a continuous array so if you have an array [2][2] it will allocate 4 continuous sizeof(int). The reason you need to define array[][COL] is to let the compiler know how the pointer arithmetic should be done.</p>\n\n<p>so- for Q1- you are right, each time you increment you do so for(sizeof(int)*COL). so each time you move by a row.</p>\n\n<p>Q2- now for each row you want to print one int value at a time, so when you have int* p- this means each increment is done by sizeof(int).</p>\n\n<p>Q3- the increment is for the pointer- not the value- its easy to see for yourself if you do another print in your main.</p>\n\n<p>Hope this help, good luck!</p>\n"}, {"tags": [], "owner": {"reputation": 9095, "user_id": 8542346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11b206b49cec657d28a5876f8330780e?s=128&d=identicon&r=PG&f=1", "display_name": "H.S.", "link": "https://stackoverflow.com/users/8542346/h-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1546525686, "last_edit_date": 1546525686, "creation_date": 1546467578, "answer_id": 54013919, "question_id": 54012242, "link": "https://stackoverflow.com/questions/54012242/precedence-parentheses-pointers-with-iterative-array-functions/54013919#54013919", "title": "Precedence, Parentheses, Pointers with iterative array functions", "body": "<p>The in-memory view of <code>2D</code> <code>myArr</code> array would be something like this:</p>\n\n<pre><code>        myArr\n         ---------------------\nmyArr[0] | 12 | 16 | 19 | 20 |\n         ---------------------\nmyArr[1] | 5  | 99 |102 |200 |\n         ---------------------\nmyArr[2] | 12 | 20 | 25 |600 |\n         ---------------------\nmyArr[3] | 65 | 66 |999 |1000|\n         ---------------------\n</code></pre>\n\n<blockquote>\n  <p><em><code>Question 1: Here, I've passed the pointer to the function and I keep thinking, \"What is this loop iterating over?\". Am I correct in thinking that I am incrementing the pointer to each of the first elements in each array (myArr[0][0], myArr[1][0], myArr[2][0], myArr[3][0])? Also, am I correct in assuming that the syntax of this line is in essence saying: \"Execute the function passing the current pointer and THEN when it's done, increment the pointer.\"?</code></em></p>\n</blockquote>\n\n<h2>Answer of question 1:</h2>\n\n<pre><code>int (*pt)[4]\n</code></pre>\n\n<p><code>pt</code> is pointer to an array of <code>4</code> integer. This statement </p>\n\n<pre><code>pt = myArr;\n</code></pre>\n\n<p>makes the <code>pt</code> pointing to first <code>1D</code> array of <code>myArr</code> <code>2D</code> array. It is similar to:</p>\n\n<pre><code>pt = &amp;myArr[0];\n</code></pre>\n\n<p>The impact of both the statement will be like this:</p>\n\n<pre><code>pt--------|\n         \\|/\n         ---------------------\nmyArr[0] | 12 | 16 | 19 | 20 |\n         ---------------------\n</code></pre>\n\n<p>When you increment a pointer, it gets incremented in steps of the <strong>object size that the pointer can point to</strong>. Here</p>\n\n<pre><code>printMyArr(pt++);\n</code></pre>\n\n<p>first the <code>pt</code> pointer value passed to <code>printMyArr()</code> and then <code>pt</code> will be incremented and since its type is <code>int (*)[4]</code> that means it can point to an object which is an array of <code>4</code> integers, so after increment the <code>pt</code> will point to the address (which is <code>address pointing to</code> + <code>size of array of 4 int</code>) i.e. to <code>myArr[1]</code> address.</p>\n\n<p>Note that this:</p>\n\n<pre><code>for(counter=0; counter&lt;4; counter++)\n        printMyArr(pt++);\n</code></pre>\n\n<p>is same as this:</p>\n\n<pre><code>for(counter=0; counter&lt;4; counter++)\n        printMyArr(&amp;myArr[counter]);\n                   ^^^^^^^^^^^^^^^\n</code></pre>\n\n<blockquote>\n  <p><em><code>Question 2: This is what has me the most confused. After quite a bit of digging I found this bit to make it run right and I realize this is how it works, but why?</code></em></p>\n</blockquote>\n\n<h2>Answer of question 2:</h2>\n\n<p>Here</p>\n\n<pre><code>p = (int *)pt;   // pt is pointer to an array of `4` integer\n</code></pre>\n\n<p>if you remove the <code>(int *)</code> cast, you will find that the compiler is giving a warning message on this statement. The reason is <code>p</code> and <code>pt</code> are not the compatible pointer types. The type of <code>p</code> is <code>int *</code> whereas the type of <code>pt</code> is <code>int (*)[4]</code>. This incompatible pointer assignment is working because <strong>the address of an array and address of first element of an array is numerically same though their type is different</strong>. Instead, you should do </p>\n\n<pre><code>p = &amp;(*pt)[0];\n</code></pre>\n\n<p>From C Standards#6.5.2.1</p>\n\n<blockquote>\n  <p>The definition of the subscript operator [] is that E1[E2] is identical to (*((E1)+(E2)))</p>\n</blockquote>\n\n<p>by this rule</p>\n\n<pre><code>&amp;(*pt)[0] --&gt; &amp;(*((*pt)+(0))) --&gt; ((*p)+(0)) --&gt; *p\n</code></pre>\n\n<p><em><code>The operator &amp; is used to get the address and the operator * is used for dereferencing. These operators cancel the effect of each other when used one after another.</code></em></p>\n\n<p>Hence, this statement</p>\n\n<pre><code>p = &amp;(*pt)[0];\n</code></pre>\n\n<p>is same as this statement</p>\n\n<pre><code>p = *pt;\n</code></pre>\n\n<blockquote>\n  <p><em><code>Question 3: Am I correct thinking that I am incrementing each element here?</code></em></p>\n</blockquote>\n\n<h2>Answer of question 3:</h2>\n\n<p>Yes.<br>\n<code>p</code> is a pointer pointing to first element of array of <code>4</code> integer and its type is <code>int *</code> i.e. it can point to an object which is an <code>int</code>. When you are doing <code>*p++</code>, this will first dereference <code>p</code> and get the value at the address it is pointing to then the <code>p</code> will be incremented and pointing to next element of array.</p>\n"}], "owner": {"reputation": 739, "user_id": 7262393, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/10209827239390452/picture?type=large", "display_name": "Dan", "link": "https://stackoverflow.com/users/7262393/dan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 188, "favorite_count": 0, "accepted_answer_id": 54012440, "answer_count": 3, "score": 4, "last_activity_date": 1546525686, "creation_date": 1546458177, "last_edit_date": 1546468898, "question_id": 54012242, "link": "https://stackoverflow.com/questions/54012242/precedence-parentheses-pointers-with-iterative-array-functions", "title": "Precedence, Parentheses, Pointers with iterative array functions", "body": "<p>I'm teaching myself a little C and have run across an exercise that I want to make sure I understand completely.  The exercise is asking me to pass a pointer to a multidimensional array of integers to a function and iterate through the array. So I started with a print function before moving on to one taking input to populate the array. I tried all sorts of things but after finding a bit of code on type casting and iterating pointers I have the below program that seems to work but I'm not quite understanding what is going on. In my comments I have questions labeled 1-3, referring to the questions below the code. I was hoping someone more intelligent than myself could enlighten me.  </p>\n\n<pre><code>//passing multi-Array to a simple print function\n#include &lt;stdio.h&gt;\n\n//simple print function prototype\nvoid printMyArr(int (*pt)[4]);\n\nint main()\n{\n    //declare and initialize a multi-array. I picked 4x4 and some arbitrary \n    //numbers for simplicity's sake\n\n    int myArr[4][4] = { {12, 16, 19, 20}, \n                        {5, 99, 102, 200}, \n                        {12, 20, 25, 600},\n                        {65, 66, 999, 1000} };\n\n    //declare a pointer to an array of integers and an int for a loop counter\n    int (*pt)[4], counter;\n\n    //initialize the pointer\n    pt = myArr;\n\n    //for loop calling printMyArr function to iterate through arrays -- or this is what I understand it to mean\n    for(counter=0; counter&lt;4; counter++)\n        printMyArr(pt++);   //&lt;-------------Question 1\n    return 0;\n}\n\n//function called to print array elements to the console\nvoid printMyArr(int(*pt)[4])\n{\n    //declare a counter....and apparently another pointer\n    int counter, *p;\n\n    //initialize new pointer to old pointer and type cast array as int\n    p = (int *)pt;          //&lt;-------------Question 2\n\n    //for loop to iterate through elements of array -- or this is what I understand it to mean\n    for(counter=0; counter&lt;4; counter++)\n        printf(\"\\n\\n\\n%d\", *p++);  //&lt;------Question 3\n}\n</code></pre>\n\n<p>Question 1:  Here, I've passed the pointer to the function and I keep thinking, \"What is this loop iterating over?\".  Am I correct in thinking that I am incrementing the pointer to each of the first elements in each array (<code>myArr[0][0]</code>, <code>myArr[1][0]</code>, <code>myArr[2][0]</code>, <code>myArr[3][0]</code>)? Also, am I correct in assuming that the syntax of this line is in essence saying: \"Execute the function passing the current pointer and THEN when it's done, increment the pointer.\"?</p>\n\n<p>Question 2:  This is what has me the most confused.  After quite a bit of digging I found this bit to make it run right and I realize this is how it works, but why?</p>\n\n<p>Question 3:  Am I correct thinking that I am incrementing each element here? </p>\n\n<p>So </p>\n\n<p>1: pass pointer as assigned -> <code>myArr[0][0]</code> then print the values in <code>myArr[0][0]</code>, <code>myArr[0][1]</code>, <code>myArr[0][2]</code>, and <code>myArr[0][3]</code>, then increment pointer <code>myArr[1][0]</code></p>\n\n<p>2: pass pointer as assigned -><code>myArr[1][0]</code> then print the values in <code>myArr[1][0]</code>, <code>myArr[1][1]</code>, <code>myArr[1][2]</code> and <code>myArr[1][3]</code> increment pointer to <code>myArr[2][0]</code> </p>\n\n<p>3: pass pointer as assigned -><code>myArr[2][0]</code> then print the values in <code>myArr[2][0]</code>, <code>myArr[2][1]</code>, <code>myArr[2][2]</code> and <code>myArr[2][3]</code> increment pointer to <code>myArr[3][0]</code> </p>\n\n<p>4: pass pointer as assigned -><code>myArr[3][0]</code> then print the values in <code>myArr[3][0]</code>, <code>myArr[3][1]</code>, <code>myArr[3][2]</code> and <code>myArr[3][3]</code> increment pointer to <code>myArr[4][0]</code> and if this is the case what is the pointer pointing to since there shouldn't be a <code>myArr[4][0]</code>? </p>\n"}, {"tags": ["javascript", "c", "express"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1546465636, "post_id": 54012209, "comment_id": 94864181, "body": "A <code>Content-length</code> header that specifies the correct size of the request body ought to help."}, {"owner": {"reputation": 103, "user_id": 5942913, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f768a8117cce4903d9f470c70860c888?s=128&d=identicon&r=PG&f=1", "display_name": "rated2016", "link": "https://stackoverflow.com/users/5942913/rated2016"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1546474843, "post_id": 54012209, "comment_id": 94866819, "body": "I am doing a GET request which believe does not require a content-length? Nonetheless, I have tried that approach but did not work."}, {"owner": {"reputation": 103, "user_id": 5942913, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f768a8117cce4903d9f470c70860c888?s=128&d=identicon&r=PG&f=1", "display_name": "rated2016", "link": "https://stackoverflow.com/users/5942913/rated2016"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1546475652, "post_id": 54012209, "comment_id": 94867000, "body": "Found something interesting and seems to be working now. So, if I comment the first getResponse(&amp;a) call both writes go in successfully. Now, the last response call returns a string where the two responses are concatenated. WOW. I will update my post with what my getResponse(&amp;a) looks like. Would be great if someone can explain why it is that."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1546478508, "post_id": 54012209, "comment_id": 94867511, "body": "I can explain the behavior when you comment out the first <code>getResponse()</code> call, but to fully answer the question I need a more complete explanation of <i>exactly</i> what you do in the original case, and what result you observe, including any error messages.  I&#39;m not prepared to believe that the description already given is complete.  A hint: your <code>getResponse()</code> function is not suited for use with a persistent connection."}, {"owner": {"reputation": 103, "user_id": 5942913, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f768a8117cce4903d9f470c70860c888?s=128&d=identicon&r=PG&f=1", "display_name": "rated2016", "link": "https://stackoverflow.com/users/5942913/rated2016"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1546481037, "post_id": 54012209, "comment_id": 94867967, "body": "I have added the outputs for both scenarios. Here are links to my files containing the whole: <a href=\"https://pastebin.com/u3R4WVMA\" rel=\"nofollow noreferrer\">pastebin.com/u3R4WVMA</a>  <a href=\"https://pastebin.com/J59RRkC0\" rel=\"nofollow noreferrer\">pastebin.com/J59RRkC0</a>. Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 5942913, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f768a8117cce4903d9f470c70860c888?s=128&d=identicon&r=PG&f=1", "display_name": "rated2016", "link": "https://stackoverflow.com/users/5942913/rated2016"}, "edited": false, "score": 0, "creation_date": 1546539039, "post_id": 54015823, "comment_id": 94891547, "body": "Awesome, this helped a lot!"}, {"owner": {"reputation": 103, "user_id": 5942913, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f768a8117cce4903d9f470c70860c888?s=128&d=identicon&r=PG&f=1", "display_name": "rated2016", "link": "https://stackoverflow.com/users/5942913/rated2016"}, "edited": false, "score": 0, "creation_date": 1546540088, "post_id": 54015823, "comment_id": 94892007, "body": "So, it&#39;s the while loop with read that is preventing the attempt of second request. The wait block caused the connection to be lost? Either the connection was active enough to send the second request, but not enough to get a response, or not active enough to send the request in the first place. Similarly, I am confused why an error was not thrown from either write or read calls."}, {"owner": {"reputation": 103, "user_id": 5942913, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f768a8117cce4903d9f470c70860c888?s=128&d=identicon&r=PG&f=1", "display_name": "rated2016", "link": "https://stackoverflow.com/users/5942913/rated2016"}, "edited": false, "score": 0, "creation_date": 1546540917, "post_id": 54015823, "comment_id": 94892354, "body": "The read call returns 0 bytes once the connection has closed from the other end and not the usual end-of-file? With persistent connection, my code for reading the response is waiting too long causing the connection to be lost. So, I can&#39;t have persistent connection where I send 1 request now and another 30 minutes later?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 103, "user_id": 5942913, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f768a8117cce4903d9f470c70860c888?s=128&d=identicon&r=PG&f=1", "display_name": "rated2016", "link": "https://stackoverflow.com/users/5942913/rated2016"}, "edited": false, "score": 0, "creation_date": 1546545915, "post_id": 54015823, "comment_id": 94894406, "body": "@rated2016, the connection being closed <i>is</i> the usual end-of-file for a socket.  Until then, the remote side may send more data, so even if there isn&#39;t any data to read <i>now</i>, there may be some later, therefore the end of the file has not been reached (or at least it cannot be recognized)."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 1, "last_activity_date": 1546484915, "creation_date": 1546484915, "answer_id": 54015823, "question_id": 54012209, "link": "https://stackoverflow.com/questions/54012209/how-to-make-mutiple-socket-writes-with-one-active-socket-connection-to-an-expres/54015823#54015823", "title": "How to make mutiple socket writes with one active socket connection to an express web server?", "body": "<blockquote>\n  <p>I am trying to do multiple write requests with one active socket connection to an express server running on localhost.</p>\n</blockquote>\n\n<p>Your <code>receiveResponse()</code> function is not suited for use with a persistent (a.k.a. keep-alive) connection.  Consider this fragment:</p>\n\n<blockquote>\n<pre><code>int total, bytes, received = 0;\n\nmemset(response, 0, RESPONSE_SIZE);\ntotal = RESPONSE_SIZE - 1;\ndo {\n    bytes = read(*socket_ref, response + received, total - received);\n    if (bytes &lt; 0) {\n        perror(\"ERROR reading response from socket yo\");\n        exit(EXIT_FAILURE);\n    }\n    if (bytes == 0) break;\n    received += bytes;\n} while (received &lt; total);\n</code></pre>\n</blockquote>\n\n<p>Under what conditions does the loop terminate? Well, it terminates</p>\n\n<ul>\n<li><p>if the receive buffer fills.</p></li>\n<li><p>if <code>read()</code> returns a negative number, signaling an error.</p></li>\n<li><p>if <code>read()</code> returns 0, signaling end-of-file.</p></li>\n</ul>\n\n<p>No other in-program condition causes the loop to terminate.  Each of the first two possibilities triggers an error message and program termination, so if one of those were occurring then you would know (right?).  Therefore, you must be seeing the last alternative ... <em>or are you</em>?</p>\n\n<p>What exactly does end-of-file mean for a socket?  As with any other file, it means that no more data can (ever) be obtained from the socket -- for natural reasons, else you would get an error instead.  For a socket specifically, that means the remote peer has closed the connection, or at least has shut down its output side of that connection.  And that's exactly what <em>does not</em> happen with a persistent connection, at least not quickly.  When it eventually does happen, if you wait that long, the connection is gone -- you need to establish a new one to receive another response.</p>\n\n<p>So,</p>\n\n<blockquote>\n  <p>I am expected to get two \"71\" on my express server end, but I am only\n  receiving the first one.</p>\n</blockquote>\n\n<p>This is because the second request is not attempted until after the server closes the connection (the read loop blocks until then), at which point the second request cannot be delivered, or at minimum, no response to it can be received.</p>\n\n<blockquote>\n  <p>The first write request gives a successful\n  response back, but the next one sends no response (http connection is\n  kept alive).</p>\n</blockquote>\n\n<p>The response to the first request is successfully received as expected.  No response to the second is received because the second is not successfully delivered to the server, which is also consistent with what you see on the server side.  I am at a loss to explain why the client does not emit an error message in this case, which is why I pressed you for more information, but it is certain that <code>getResponse()</code> will return successfully at most once for any given connection, and it is improbable that any further requests can successfully be sent over the connection after that.</p>\n\n<p>You commented,</p>\n\n<blockquote>\n  <p>if I comment the first getResponse(&amp;a) call both writes go in successfully. Now, the last response call returns a string where the two responses are concatenated.</p>\n</blockquote>\n\n<p>That's perfectly natural.  You're using a persistent connection, so the response to each successfully delivered request is readable from the same connection.  In this case, you defer reading the data until after both requests have been sent, so the server responds to both.</p>\n\n<p>To handle persistent connections, an HTTP client needs to be able to recognize message boundaries other than at EOF.  The standard way to do this is by parsing the response headers as they come in, finding and parsing the content-length among them, and after reaching the response body, reading the number of bytes given by the content length.</p>\n"}], "owner": {"reputation": 103, "user_id": 5942913, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f768a8117cce4903d9f470c70860c888?s=128&d=identicon&r=PG&f=1", "display_name": "rated2016", "link": "https://stackoverflow.com/users/5942913/rated2016"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 54015823, "answer_count": 1, "score": 0, "last_activity_date": 1546484915, "creation_date": 1546457964, "last_edit_date": 1546480938, "question_id": 54012209, "link": "https://stackoverflow.com/questions/54012209/how-to-make-mutiple-socket-writes-with-one-active-socket-connection-to-an-expres", "title": "How to make mutiple socket writes with one active socket connection to an express web server?", "body": "<p>I am trying to do multiple write requests with one active socket connection to an express server running on localhost. I am making a http request to a express web server running on localhost. The message is sent like so:</p>\n\n<pre><code>GET /temp?sensorId=1&amp;value=71 HTTP/1.1\nContent-Type: text/html; charset=utf-8\nConnection: keep-alive\n</code></pre>\n\n<p>I made sure to include \"Connection: keep-alive\" header in the message (though, it's not necessary since I am using HTTP/1.1). </p>\n\n<p>Code for sending request</p>\n\n<pre><code>void sendRequest (char** message, int* socket_ref) {\nint total = strlen(*message);\nint bytes, sent = 0;\ndo {\n    bytes = write(*socket_ref, *message + sent, total - sent);\n    if (bytes &lt; 0) {\n        perror(\"ERROR writing message to socket yo\");\n        exit(EXIT_FAILURE);\n    }\n    if (bytes == 0) break;\n    sent += bytes;\n} while (sent &lt; total);\n\n   printf(\"Data sent. %d\\n\\n\", sent);\n}\n</code></pre>\n\n<p>Driver code</p>\n\n<pre><code> char* dummy[80] = {\"GET\", \"localhost\", \"3001\", \"/temp\", \"?sensorId=1&amp;value=71\"};\n        setMessage(a, dummy);\n        makeRequest(a);\n\n        getResponse(&amp;a);\n        sleep(2);\n\n        makeRequest(a);\n        getResponse(&amp;a);\n</code></pre>\n\n<p>I am expected to get two \"71\" on my express server end, but I am only receiving the first one. The first write request gives a successful response back, but the next one sends no response (http connection is kept alive).</p>\n\n<p>The two write commands do return the expected number of bytes written.</p>\n\n<p>The <em>makeRequest(a)</em> is a wrapper to call sendRequest() as shown above.<br>\nThe <em>getRequest(&amp;a)</em> is a wrapper to call read on the socket.</p>\n\n<p><strong>UPDATE</strong>\nThe getResponse(&amp;a) simply makes a call to the following code</p>\n\n<pre><code>#define RESPONSE_SIZE 4096\nchar* receiveResponse(int* socket_ref) {\nchar* response = malloc(RESPONSE_SIZE);\nint total, bytes, received = 0;\n\nmemset(response, 0, RESPONSE_SIZE);\ntotal = RESPONSE_SIZE - 1;\ndo {\n    bytes = read(*socket_ref, response + received, total - received);\n    if (bytes &lt; 0) {\n        perror(\"ERROR reading response from socket yo\");\n        exit(EXIT_FAILURE);\n    }\n    if (bytes == 0) break;\n    received += bytes;\n} while (received &lt; total);\nif (received == total) {\n    perror(\"ERROR storing complete response from socket yo\");\n    exit(EXIT_FAILURE);\n}\nreturn response;\n</code></pre>\n\n<p>}</p>\n\n<p><strong>UPDATE 2</strong>\nHaving called getResponse(&amp;a)after each makeRequest(a) call results in the following response:</p>\n\n<pre><code>Data sent. 125\n\nResponse:\nHTTP/1.1 200 OK\nX-Powered-By: Express\nAccess-Control-Allow-Origin: *\nContent-Type: text/html; charset=utf-8\nContent-Length: 4\nETag: W/\"4-d2PTd7kl/AFtn95E/ir6IzKjD9I\"\nDate: Thu, 03 Jan 2019 01:51:12 GMT\nConnection: keep-alive\n\nGOOD\nData sent. 125\n\nResponse:\n</code></pre>\n\n<p>However, if a getResponse(&amp;a) is called after the two makeRequest(a) then both writes occur successfully, but I get the following for response:</p>\n\n<pre><code>Data sent. 125\n\nData sent. 125\n\nResponse:\nHTTP/1.1 200 OK\nX-Powered-By: Express\nAccess-Control-Allow-Origin: *\nContent-Type: text/html; charset=utf-8\nContent-Length: 4\nETag: W/\"4-d2PTd7kl/AFtn95E/ir6IzKjD9I\"\nDate: Thu, 03 Jan 2019 02:00:43 GMT\nConnection: keep-alive\n\nGOODHTTP/1.1 200 OK\nX-Powered-By: Express\nAccess-Control-Allow-Origin: *\nContent-Type: text/html; charset=utf-8\nContent-Length: 4\nETag: W/\"4-d2PTd7kl/AFtn95E/ir6IzKjD9I\"\nDate: Thu, 03 Jan 2019 02:00:43 GMT\nConnection: keep-alive\n\nGOOD\n</code></pre>\n"}, {"tags": ["c", "time", "localtime"], "comments": [{"owner": {"reputation": 9095, "user_id": 8542346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11b206b49cec657d28a5876f8330780e?s=128&d=identicon&r=PG&f=1", "display_name": "H.S.", "link": "https://stackoverflow.com/users/8542346/h-s"}, "edited": false, "score": 0, "creation_date": 1546458027, "post_id": 54012133, "comment_id": 94861173, "body": "<code>arch2</code> <code>FILE</code> pointer is not pointing to any <code>FILE</code> object."}, {"owner": {"reputation": 9095, "user_id": 8542346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11b206b49cec657d28a5876f8330780e?s=128&d=identicon&r=PG&f=1", "display_name": "H.S.", "link": "https://stackoverflow.com/users/8542346/h-s"}, "edited": false, "score": 1, "creation_date": 1546458176, "post_id": 54012133, "comment_id": 94861239, "body": "You are using wrong format specifier in <code>fprintf()</code>, which is undefined behavior."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1546458521, "post_id": 54012133, "comment_id": 94861387, "body": "Most of the fields in the <code>struct tm</code> are not <code>long</code> but <code>int</code> and printing them with <code>%ld</code> on a 64-bit machine leads to unpredictable behaviour.  You could use <code>%.2d</code> or <code>%02d</code> to get your desired result (probably), though maybe you should use 4 instead of 2 for the year (though it does no damage with 2).  On a 32-bit machine, you might get away with as <code>sizeof(int) == sizeof(long)</code>.  Also, Win64 might be OK for the sam reason."}, {"owner": {"reputation": 3, "user_id": 10859354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8b552d003e41a122cb10aee7ec43d24?s=128&d=identicon&r=PG&f=1", "display_name": "Fausto", "link": "https://stackoverflow.com/users/10859354/fausto"}, "edited": false, "score": 0, "creation_date": 1546468093, "post_id": 54012133, "comment_id": 94865097, "body": "Could that be the only reason? I&#39;m trying to replicate that error in another machine but i can&#39;t. I&#39;m running the same code and it prints the time the way it should be, even printing  with   <code>%ld</code>"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1546591281, "post_id": 54012133, "comment_id": 94906405, "body": "@Fausto: the trouble with undefined behaviour is that the code is allowed to work as expected and to work other than as expected, and both are correct because the official requirement is undefined.  One way that you can see it working on Machine A and failing on Machine B is if Machine A is 32-bit and Machine B is 64-bit.  You could also run into issues if the working machine is Windows 64-bit and the non-working machine is not.  And you could run into issues if the CPU on one machine is little-endian and on the other big-endian.  You&#39;ve not identified how similar your two machines are."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 10859354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8b552d003e41a122cb10aee7ec43d24?s=128&d=identicon&r=PG&f=1", "display_name": "Fausto", "link": "https://stackoverflow.com/users/10859354/fausto"}, "edited": false, "score": 0, "creation_date": 1546469440, "post_id": 54012301, "comment_id": 94865518, "body": "Could that be the only reason? I&#39;m trying to replicate that error in another machine but i can&#39;t. I&#39;m running the same code and it prints the time the way it should be, even printing with <code>%ld</code>"}, {"owner": {"reputation": 9095, "user_id": 8542346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11b206b49cec657d28a5876f8330780e?s=128&d=identicon&r=PG&f=1", "display_name": "H.S.", "link": "https://stackoverflow.com/users/8542346/h-s"}, "reply_to_user": {"reputation": 3, "user_id": 10859354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8b552d003e41a122cb10aee7ec43d24?s=128&d=identicon&r=PG&f=1", "display_name": "Fausto", "link": "https://stackoverflow.com/users/10859354/fausto"}, "edited": false, "score": 0, "creation_date": 1546478681, "post_id": 54012301, "comment_id": 94867545, "body": "@Fausto An undefined behavior includes it may execute incorrectly (either crashing or silently generating incorrect results), or it may fortuitously do exactly what the programmer intended. On my machine, with <code>%ld</code>, I was getting - <code>03&#47;01&#47;2019, \t 01:4294967309:37</code> result."}], "tags": [], "owner": {"reputation": 9095, "user_id": 8542346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11b206b49cec657d28a5876f8330780e?s=128&d=identicon&r=PG&f=1", "display_name": "H.S.", "link": "https://stackoverflow.com/users/8542346/h-s"}, "is_accepted": true, "score": 3, "last_activity_date": 1546458546, "creation_date": 1546458546, "answer_id": 54012301, "question_id": 54012133, "link": "https://stackoverflow.com/questions/54012133/c-time-function-returns-strange-values/54012301#54012301", "title": "c-time function returns strange values", "body": "<p>From <a href=\"https://linux.die.net/man/3/localtime\" rel=\"nofollow noreferrer\">localtime</a>:</p>\n\n<pre><code>Broken-down time is stored in the structure tm which is defined in &lt;time.h&gt; as follows:\n\nstruct tm {\n    int tm_sec;         /* seconds */\n    int tm_min;         /* minutes */\n    int tm_hour;        /* hours */\n    int tm_mday;        /* day of the month */\n    int tm_mon;         /* month */\n    int tm_year;        /* year */\n    int tm_wday;        /* day of the week */\n    int tm_yday;        /* day in the year */\n    int tm_isdst;       /* daylight saving time */\n};\n</code></pre>\n\n<p>All the <code>tm</code> structure member are of type <code>int</code> and you are using format specifier <code>%ld</code> for them in <code>fprintf()</code>. Instead, you should use <code>%d</code> format specifier.</p>\n\n<p>From C Standard#7.21.6.1p9</p>\n\n<blockquote>\n  <p>9 If a conversion specification is invalid, the behavior is undefined.282) If any argument is not the correct type for the corresponding conversion specification, the behavior is undefined. </p>\n</blockquote>\n"}], "owner": {"reputation": 3, "user_id": 10859354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8b552d003e41a122cb10aee7ec43d24?s=128&d=identicon&r=PG&f=1", "display_name": "Fausto", "link": "https://stackoverflow.com/users/10859354/fausto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 54012301, "answer_count": 1, "score": 0, "last_activity_date": 1546458546, "creation_date": 1546457483, "question_id": 54012133, "link": "https://stackoverflow.com/questions/54012133/c-time-function-returns-strange-values", "title": "c-time function returns strange values", "body": "<p>I'm working with a code in C, which gets the time from a server using the following:</p>\n\n<p>(This is a very short version, other sections and functions of the code use time, ftime and localtime functions to get the time).</p>\n\n<pre><code>struct  tm *stiempo;\nlong    ltiempo;\nFILE * arch2;\n\nint main()\n{\n  print_error_time();\n}\n\n\nvoid print_error_time()\n{\n   time (&amp;ltiempo);\n   stiempo = localtime (&amp;ltiempo);\n   fprintf (arch2, \"%02.2ld/%02.2ld/%02.2ld, \\t %02.2ld:%02.2ld:%02.2ld\", stiempo-&gt;tm_mday, (stiempo-&gt;tm_mon + 1), (stiempo-&gt;tm_year + 1900), stiempo-&gt;tm_hour, stiempo-&gt;tm_min, stiempo-&gt;tm_sec);\n}\n</code></pre>\n\n<p>Sometimes it works just fine, but sometimes, when the time is printed into the file, i get something like this:</p>\n\n<pre><code>   21/08/2018,   15:48:7956003943165722682\n   21/08/2018,   15:50:7956003943165722667\n   21/08/2018,   15:51:7956003943165722649\n</code></pre>\n\n<p>Does anyone knows what could be causing this beheaviour or what could affect the time functions that makes them return those values?</p>\n"}, {"tags": ["c", "c-preprocessor"], "comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1546454814, "post_id": 54011554, "comment_id": 94859846, "body": "Well, the disadvantage is twice as many builds to maintain."}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 1, "creation_date": 1546454887, "post_id": 54011554, "comment_id": 94859882, "body": "the first can produce no code at all, that helps to have a code comparable only in some conditions, for instance only on windows but not on linux etc"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1546454891, "post_id": 54011554, "comment_id": 94859886, "body": "Conditional compilation with the preprocessor directive <code>#if</code> happens at compile-time. The <code>if</code> statement is done at run-time."}, {"owner": {"reputation": 39, "user_id": 8593984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cfc2e49c09f08b1745973b49218e5bb?s=128&d=identicon&r=PG&f=1", "display_name": "Shiva2794", "link": "https://stackoverflow.com/users/8593984/shiva2794"}, "edited": false, "score": 2, "creation_date": 1546454927, "post_id": 54011554, "comment_id": 94859904, "body": "Possible duplicate. Check this link <a href=\"https://stackoverflow.com/questions/17007241/advantages-of-conditional-preprocessor-over-conditional-statements\">Advantages of Conditional Compilation</a>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1546455548, "post_id": 54011554, "comment_id": 94860138, "body": "<code>if (expression)</code> is well defined when <code>expression</code> involves FP math.  <code>#if (expression)</code> is not."}], "owner": {"reputation": 1717, "user_id": 8740387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c52c34f18b15f314a70053032eb0931?s=128&d=identicon&r=PG&f=1", "display_name": "S. Hesam", "link": "https://stackoverflow.com/users/8740387/s-hesam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "closed_date": 1546455430, "answer_count": 0, "score": 0, "last_activity_date": 1546454592, "creation_date": 1546454592, "question_id": 54011554, "link": "https://stackoverflow.com/questions/54011554/what-is-the-advantage-of-conditional-compilation", "closed_reason": "Duplicate", "title": "What is the advantage of conditional compilation?", "body": "<p>What is the advantage of using </p>\n\n<pre><code>#if (expression)\nstatement\n#endif\n</code></pre>\n\n<p>instead of </p>\n\n<pre><code>if (expression){\nstatement\n }\n</code></pre>\n\n<p>?</p>\n"}, {"tags": ["c", "opengl", "freeglut", "opengl-1.x"], "comments": [{"owner": {"reputation": 41, "user_id": 10433463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede1ed919cc2dd84f819cebf562b1ce0?s=128&d=identicon&r=PG&f=1", "display_name": "Ana", "link": "https://stackoverflow.com/users/10433463/ana"}, "edited": false, "score": 0, "creation_date": 1546454688, "post_id": 54011452, "comment_id": 94859799, "body": "I try to do this, but the result is the same. The brightness is so low, nearly to the black."}, {"owner": {"reputation": 41, "user_id": 10433463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede1ed919cc2dd84f819cebf562b1ce0?s=128&d=identicon&r=PG&f=1", "display_name": "Ana", "link": "https://stackoverflow.com/users/10433463/ana"}, "reply_to_user": {"reputation": 138000, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 0, "creation_date": 1546455222, "post_id": 54011452, "comment_id": 94860012, "body": "I dont use that."}, {"owner": {"reputation": 9554, "user_id": 31782, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8ea4581df89970a5ba17daf4ad93041c?s=128&d=identicon&r=PG", "display_name": "n0rd", "link": "https://stackoverflow.com/users/31782/n0rd"}, "edited": false, "score": 0, "creation_date": 1546455917, "post_id": 54011452, "comment_id": 94860288, "body": "Do you draw your text before or after drawing the model? Did you try swapping the order?"}, {"owner": {"reputation": 41, "user_id": 10433463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede1ed919cc2dd84f819cebf562b1ce0?s=128&d=identicon&r=PG&f=1", "display_name": "Ana", "link": "https://stackoverflow.com/users/10433463/ana"}, "edited": false, "score": 0, "creation_date": 1546456166, "post_id": 54011452, "comment_id": 94860407, "body": "after the model, but if i draw the model after the texts the result is the same"}, {"owner": {"reputation": 41, "user_id": 10433463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede1ed919cc2dd84f819cebf562b1ce0?s=128&d=identicon&r=PG&f=1", "display_name": "Ana", "link": "https://stackoverflow.com/users/10433463/ana"}, "edited": false, "score": 0, "creation_date": 1546456875, "post_id": 54011452, "comment_id": 94860704, "body": "I have this GLfloat lightpos[] = { 5.0, 15., 5., 0. }; \tglLightfv(GL_LIGHT0, GL_POSITION, lightpos); Maybe, this is the problem?"}, {"owner": {"reputation": 41, "user_id": 10433463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede1ed919cc2dd84f819cebf562b1ce0?s=128&d=identicon&r=PG&f=1", "display_name": "Ana", "link": "https://stackoverflow.com/users/10433463/ana"}, "reply_to_user": {"reputation": 9554, "user_id": 31782, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8ea4581df89970a5ba17daf4ad93041c?s=128&d=identicon&r=PG", "display_name": "n0rd", "link": "https://stackoverflow.com/users/31782/n0rd"}, "edited": false, "score": 0, "creation_date": 1546457725, "post_id": 54011452, "comment_id": 94861054, "body": "OHHH this is the answer correct. THANK YOU SO MUCH"}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 10433463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede1ed919cc2dd84f819cebf562b1ce0?s=128&d=identicon&r=PG&f=1", "display_name": "Ana", "link": "https://stackoverflow.com/users/10433463/ana"}, "edited": false, "score": 0, "creation_date": 1546455093, "post_id": 54011535, "comment_id": 94859963, "body": "I try this but the result is the same"}, {"owner": {"reputation": 41, "user_id": 10433463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede1ed919cc2dd84f819cebf562b1ce0?s=128&d=identicon&r=PG&f=1", "display_name": "Ana", "link": "https://stackoverflow.com/users/10433463/ana"}, "edited": false, "score": 0, "creation_date": 1546458010, "post_id": 54011535, "comment_id": 94861163, "body": "Rabbid your comment for Disable and Enable function was the solution THANKS YOUU!!"}, {"owner": {"reputation": 41, "user_id": 10433463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede1ed919cc2dd84f819cebf562b1ce0?s=128&d=identicon&r=PG&f=1", "display_name": "Ana", "link": "https://stackoverflow.com/users/10433463/ana"}, "edited": false, "score": 0, "creation_date": 1546458280, "post_id": 54011535, "comment_id": 94861294, "body": "but your comment in my question were delete, but I dont do that. I try to found your comment but doesnt appear."}, {"owner": {"reputation": 138000, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "reply_to_user": {"reputation": 41, "user_id": 10433463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede1ed919cc2dd84f819cebf562b1ce0?s=128&d=identicon&r=PG&f=1", "display_name": "Ana", "link": "https://stackoverflow.com/users/10433463/ana"}, "edited": false, "score": 0, "creation_date": 1546458318, "post_id": 54011535, "comment_id": 94861306, "body": "@Ana I extended the answer. I deleted the comment and added the comment to the answer (at the begin of the answer)."}], "tags": [], "owner": {"reputation": 138000, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "is_accepted": true, "score": 2, "last_activity_date": 1546457916, "last_edit_date": 1546457916, "creation_date": 1546454474, "answer_id": 54011535, "question_id": 54011452, "link": "https://stackoverflow.com/questions/54011452/glcolor3f-in-opengl-have-little-brightness/54011535#54011535", "title": "glColor3f in OpenGl have little brightness", "body": "<p>The fixed function light model is applied on the text, too. This will cause arbitrary results, dependent on the current light settings ans current normal vector attribute. You have to disable lighting before you draw the text. </p>\n\n<pre><code>glDisable(GL_LIGHTING);\n</code></pre>\n\n<p>and you have to enable it before you draw the geometry </p>\n\n<pre><code>glEnable(GL_LIGHTING);\n</code></pre>\n\n<hr>\n\n<p>The parameters to <a href=\"https://www.khronos.org/registry/OpenGL-Refpages/gl2.1/xhtml/glColor.xml\" rel=\"nofollow noreferrer\"><code>glColor3f</code></a> have to be floating point values in the range [0.0, 1.0],</p>\n\n<pre><code>glColor3f(0.0f, 1.0f, 1.0f);\n</code></pre>\n\n<p>in compare to <code>glColor3ub</code>, where the parameters are integral values in the range [0, 255].</p>\n\n<pre><code>glColor3ub(0, 255, 255);\n</code></pre>\n\n<hr>\n\n<p>See <a href=\"https://www.khronos.org/registry/OpenGL/specs/gl/glspec20.pdf\" rel=\"nofollow noreferrer\">OpenGL Specification (Version 2.0) - 2.7. VERTEX SPECIFICATION; page 21</a></p>\n\n<blockquote>\n  <p>The commands to set RGBA colors are</p>\n\n<pre><code>void Color{34}{bsifd ubusui}( T components );\nvoid Color{34}{bsifd ubusui}v( T components );\n</code></pre>\n  \n  <p>The Color command has two major variants: <code>Color3</code> and <code>Color4</code>. The four value versions set all four values. The three value versions set R, G, and B to the provided values; A is set to 1.0.<br>\n  [...] Versions of the Color and SecondaryColor commands that take floating-point\n  values <strong>accept values nominally between 0.0 and 1.0</strong>.<br>\n  [...]</p>\n\n<pre><code>GL        Type Conversion\nubyte     c/(2^8 \u2212 1)\nbyte      (2c + 1)/(2^8 \u2212 1)\nushort    c/(2 16 \u2212 1)\nshort     (2c + 1)/(2^16 \u2212 1)\nuint      c/(2^32 \u2212 1)\nint       (2c + 1)/(2^32 \u2212 1)\nfloat     c\ndouble    c\n</code></pre>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "is_accepted": false, "score": 0, "last_activity_date": 1546457405, "creation_date": 1546457405, "answer_id": 54012118, "question_id": 54011452, "link": "https://stackoverflow.com/questions/54011452/glcolor3f-in-opengl-have-little-brightness/54012118#54012118", "title": "glColor3f in OpenGl have little brightness", "body": "<p>Do you use a texture somewhere? If so, try disabling texturing before drawing the other thing.</p>\n"}], "owner": {"reputation": 41, "user_id": 10433463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede1ed919cc2dd84f819cebf562b1ce0?s=128&d=identicon&r=PG&f=1", "display_name": "Ana", "link": "https://stackoverflow.com/users/10433463/ana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 656, "favorite_count": 0, "accepted_answer_id": 54011535, "answer_count": 2, "score": 0, "last_activity_date": 1546457916, "creation_date": 1546454063, "last_edit_date": 1546457022, "question_id": 54011452, "link": "https://stackoverflow.com/questions/54011452/glcolor3f-in-opengl-have-little-brightness", "title": "glColor3f in OpenGl have little brightness", "body": "<p>I have a problem with my code in OpenGl\nI need to do a game engine. \nI use freeglut library. \nI did this practise with old Visual Studio versions and I don't have this problem. But with the Visual Studio 2017 the attribute <code>glColor3f</code> is showed with little brightness. Why?</p>\n\n<p>This is the code that I use for to show the texts:</p>\n\n<pre><code>char instrucciones3[100];\nsprintf_s(instrucciones3, \"PULSA 'ESC' SI QUIERES SALIR\");\nchar *res4 = instrucciones3;\nglColor3f(0.0f, 1.0f, 1.0f); //This is the problem, I dont have alpha but the brightness is low.\nglRasterPos3f(1.0f, 5.0f, 0.0f);\ndrawString(res4);\n\nchar instrucciones2[100];\nsprintf_s(instrucciones2, \"PULSA 'H' PARA COMENZAR PARTIDA \");\nchar *res3 = instrucciones2;\nglColor3f(0.0f, 1.0f, 1.0f);\nglRasterPos3f(-10.0f, 5.0f, 0.0f);\ndrawString(res3);\n</code></pre>\n\n<hr>\n\n<p>Update:</p>\n\n<p><a href=\"https://i.stack.imgur.com/PJIY3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PJIY3.png\" alt=\"This is the result of my code\"></a></p>\n\n<p>The brightness is so low, but the model is good. I put <code>glColor3f(0.0f, 1.0f, 1.0f);</code> in the new code but the result is the same.</p>\n\n<hr>\n\n<p>Update2\nThis is my displayMe func:</p>\n\n<pre><code>glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\nglLoadIdentity();\ngluLookAt(0, 3, 15, 0, 0, 0, 0, 1, 0);\n\nglRotatef(yaw, 0.0, 1.0, 0.0);\nglRotatef(pitch, 1.0, 0.0, 0.0);\nglRotatef(roll, 0.0, 0.0, 1.0);\nGLfloat lightpos[] = { 5.0, 15., 5., 0. };\nglLightfv(GL_LIGHT0, GL_POSITION, lightpos);\n</code></pre>\n"}, {"tags": ["c", "windows", "encoding", "codepages", "widechar"], "comments": [{"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1546493283, "post_id": 54011433, "comment_id": 94870179, "body": "To transcode an encoded string we generally have to first decode to Unicode (UTF-16) via <code>MultiByteToWideChar</code>, for which we must know the source encoding. Otherwise, if we know the two encodings ahead of time, we can skip decoding to Unicode if we pre-compute a translation table. This is simple for translating between two single-byte codepages, but multi-byte codepages require a stateful conversion."}, {"owner": {"reputation": 1, "user_id": 10798765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddcef9ff76e81846b54e6a8558697838?s=128&d=identicon&r=PG&f=1", "display_name": "NoonkRiper", "link": "https://stackoverflow.com/users/10798765/noonkriper"}, "reply_to_user": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1546518683, "post_id": 54011433, "comment_id": 94880649, "body": "@eryksun I read this byte * from binary file so it don&#39;t have any encoding , I just want to encode it with code page like 1252 or 1250 and like that .    so I can&#39;t want use <code>MultiByteToWideChar</code> and then <code>widechartomultibyte</code> because when I use <code>MultiByteToWideChar</code> the buffer will be damage"}, {"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 0, "creation_date": 1546530395, "post_id": 54011433, "comment_id": 94887334, "body": "If you don&#39;t know the encoding of the source data, how will you be able to re-encode it? &quot;Hi, here&#39;s a book written in an unknown language. Translate it to French.&quot; How do you know that 0x91 0x96 map to 0x3f 0x3f?"}, {"owner": {"reputation": 1, "user_id": 10798765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddcef9ff76e81846b54e6a8558697838?s=128&d=identicon&r=PG&f=1", "display_name": "NoonkRiper", "link": "https://stackoverflow.com/users/10798765/noonkriper"}, "reply_to_user": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 0, "creation_date": 1546532574, "post_id": 54011433, "comment_id": 94888508, "body": "@RaymondChen because I can encode byte with python <code>codecs.code_page_encode(1252, &#39;\\x91&#39;, &#39;replace&#39;)</code> and see that 0x91 and 0x96 map to 0x3F while I encoding with 1252 ,   So I need it with c , encode char * with spesific code page ,    the source file is binary file , like <code>C:\\Windows\\System32\\notepad.exe</code> and I want to encode the binary file with spesific code page"}, {"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 0, "creation_date": 1546538231, "post_id": 54011433, "comment_id": 94891173, "body": "<code>&#39;\\x91&#39;</code> is not a byte. It is a string. According to the documentation, when used in a string literal, the <code>\\x</code> prefix &quot;denote a Unicode character with the given value.&quot; Therefore, <code>\\x91</code> is really U+0091. You can encode that character as a UTF-16LE code unit, and then pass that to WideCharToMultiByte."}, {"owner": {"reputation": 1, "user_id": 10798765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddcef9ff76e81846b54e6a8558697838?s=128&d=identicon&r=PG&f=1", "display_name": "NoonkRiper", "link": "https://stackoverflow.com/users/10798765/noonkriper"}, "reply_to_user": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 0, "creation_date": 1546538705, "post_id": 54011433, "comment_id": 94891398, "body": "@RaymondChen Ok, there is no faster way with c ?  maybe to read directly from binary file and encoding it to code page? or maybe encoding char * to code page without encoding it  first to  UTF-16LE ?  maybe the faster way will be to add 0x00 byte before each byte and then pass it to <code>WideCharToMultiByte</code>"}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1546542730, "post_id": 54011433, "comment_id": 94893159, "body": "@NoonkRiper, if you&#39;re in Python 3, then <code>&#39;\\x91&#39;</code> is a Unicode string, and encoding U+0091 -&gt; 0x3f has destroyed data. It won&#39;t roundtrip since it uses the default replacement byte <code>b&quot;?&quot;</code> (0x3f). The &#39;replace&#39; handler uses <code>WideCharToMultiByte</code> with a best-fit mapping, which is only meant for an approximate display, e.g. &quot;\u221e&quot; (U+221E) maps to &quot;8&quot;. On the other hand, the <i>byte</i> 0x91 decodes without loss to &quot;\u2018&quot; (U+2018). AFAIK, all of Microsoft&#39;s single-byte codepages roundtrip (i.e. <code>MultiByteToWideChar</code> -&gt; <code>WideCharToMultiByte</code>) for all byte values, even if it&#39;s trivially 0x81 -&gt; U+0081."}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1546543139, "post_id": 54011433, "comment_id": 94893324, "body": "You can cast <code>char</code> to <code>wchar_t</code> as a quick decode to Latin-1. Codepage 1252 differs in that it maps characters to most of the C1 controls block, 0x80-0x9f."}, {"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 0, "creation_date": 1546543899, "post_id": 54011433, "comment_id": 94893622, "body": "&quot;Storing only the bottom 8 bits of Unicode code points&quot; is not an encoding I&#39;m familiar with. it doesn&#39;t matter, because the WideCharToMultiByte and MultiByteToWideChar functions cannot convert directly between two 8-bit encodings. You have to go through UTF-16LE. So even if such a code page existed, you would still have to convert to UTF-16LE first. For this specific case, you might just want to use a 256-entry lookup table."}, {"owner": {"reputation": 1, "user_id": 10798765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddcef9ff76e81846b54e6a8558697838?s=128&d=identicon&r=PG&f=1", "display_name": "NoonkRiper", "link": "https://stackoverflow.com/users/10798765/noonkriper"}, "reply_to_user": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1546589169, "post_id": 54011433, "comment_id": 94905581, "body": "@eryksun  how can I quick cast char * to wchar_t* (that mean add 0x00 before each bytes) ?  and than I can pass it to <code>WideCharToMultiByte</code> with code page"}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1546591465, "post_id": 54011433, "comment_id": 94906490, "body": "If you have a <code>wchar_t</code> array named <code>wcArray</code> that&#39;s the same length as <code>myArray</code>, just loop over it and cast the values, e.g. <code>wcArray[i] = (wchar_t)myArray[i]</code>. You can encode it back to the original bytes using codepage 28591. Or simply cast the values back to <code>char</code>."}, {"owner": {"reputation": 1, "user_id": 10798765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddcef9ff76e81846b54e6a8558697838?s=128&d=identicon&r=PG&f=1", "display_name": "NoonkRiper", "link": "https://stackoverflow.com/users/10798765/noonkriper"}, "reply_to_user": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1546598472, "post_id": 54011433, "comment_id": 94909865, "body": "@eryksun I use this code <code>char myArray[] = { 0xa0, 0x90, 0x91, 0x96, 0xb0 };     wchar_t wcArray[5];     for (int i =0 ; i &lt;5;i++)     {                 wcArray[i] = (wchar_t)myArray[i];     } </code>     and I dont see that <code>wcArray</code> equal to <code>00a0, 0090, 0091, 0096, 00b0</code> so I can pass it to  <code>WideCharToMultiByte</code> and encode it with code page I want,  thank you about your help"}, {"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 0, "creation_date": 1546638688, "post_id": 54011433, "comment_id": 94928654, "body": "&quot;I don&#39;t see...&quot; Tell us what you <i>do</i> see."}], "owner": {"reputation": 1, "user_id": 10798765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddcef9ff76e81846b54e6a8558697838?s=128&d=identicon&r=PG&f=1", "display_name": "NoonkRiper", "link": "https://stackoverflow.com/users/10798765/noonkriper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 258, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1546518713, "creation_date": 1546453993, "last_edit_date": 1546518713, "question_id": 54011433, "link": "https://stackoverflow.com/questions/54011433/how-to-encode-char-array-with-code-page-with-c", "title": "how to encode char array with code page with c", "body": "<p>I have char array in C that I read from a binary file and I want to encode with spesific code page </p>\n\n<p>For example I want to encode this char * with 1252 code page </p>\n\n<pre><code>char myArray[] = { 0xa0, 0x90, 0x91, 0x96, 0xb0 };\n</code></pre>\n\n<p>the result need to be <code>{ 0xa0, 0x90, 0x3F, 0x3F, 0xb0 }</code></p>\n\n<p>I know that <code>widechartomultibyte</code> can do that , but it need to get a wide char (like <code>00a0,0090,0091,0096,00b0</code> ) and I have only char * not wide char.</p>\n\n<p>I can maybe convet c* to wide char with <code>MultiByteToWideChar</code> and then use <code>widechartomultibyte</code>  but when I do that it damages the encoding  and that looks strange to convert twice.</p>\n\n<p>So how can I encoding char * with spesific code page in c with Windows ?</p>\n"}, {"tags": ["c", "casting", "operators"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1546466955, "post_id": 54011382, "comment_id": 94864708, "body": "Detail: <code>x</code> is not <i>cast</i> - there is no cast in <code>x &lt; ux</code>.  <code>x</code> is <i>converted</i> to an <code>unsigned</code>."}], "answers": [{"tags": [], "owner": {"reputation": 200780, "user_id": 116908, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/54d38793d7a407446999b33b81d607fd?s=128&d=identicon&r=PG", "display_name": "Carl Norum", "link": "https://stackoverflow.com/users/116908/carl-norum"}, "is_accepted": false, "score": 0, "last_activity_date": 1546453923, "creation_date": 1546453923, "answer_id": 54011416, "question_id": 54011382, "link": "https://stackoverflow.com/questions/54011382/signed-and-unsigned-integers-with-logical-operators/54011416#54011416", "title": "Signed and unsigned integers with logical operators", "body": "<p>No, <code>0</code> is an <code>int</code>, so there are no promotions in the <code>x &gt;= 0</code> part of your expression.</p>\n"}, {"tags": [], "owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "is_accepted": false, "score": 4, "last_activity_date": 1546459174, "last_edit_date": 1546459174, "creation_date": 1546453943, "answer_id": 54011422, "question_id": 54011382, "link": "https://stackoverflow.com/questions/54011382/signed-and-unsigned-integers-with-logical-operators/54011422#54011422", "title": "Signed and unsigned integers with logical operators", "body": "<p>No. It happens operator by operator.</p>\n\n<pre><code>x &gt;= 0 || x &lt; ux\n</code></pre>\n\n<p>is naturally</p>\n\n<pre><code>(x &gt;= 0) || (x &lt; ux)\n</code></pre>\n\n<p>Since <code>x</code> and <code>0</code> are both <code>int</code>s, there is no need for any <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.3.1.8\" rel=\"nofollow noreferrer\">(usual arithmetic) conversions</a>... </p>\n\n<p>And even though <code>x</code> is converted to <em>unsigned</em> in <code>x &lt; ux</code>, the <em>value</em> of the expression <code>x &lt; ux</code> is of type <code>int</code> - either <code>0</code> or <code>1</code> (just like on the the left-hand side).</p>\n"}, {"comments": [{"owner": {"reputation": 119, "user_id": 10498285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cc6ac89f103ffed9d3a80e806bf7eb0?s=128&d=identicon&r=PG&f=1", "display_name": "cellka", "link": "https://stackoverflow.com/users/10498285/cellka"}, "edited": false, "score": 0, "creation_date": 1546454104, "post_id": 54011435, "comment_id": 94859591, "body": "Thanks, makes sense"}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 1, "last_activity_date": 1546454109, "last_edit_date": 1546454109, "creation_date": 1546454002, "answer_id": 54011435, "question_id": 54011382, "link": "https://stackoverflow.com/questions/54011382/signed-and-unsigned-integers-with-logical-operators/54011435#54011435", "title": "Signed and unsigned integers with logical operators", "body": "<p>No it isn\u2019t.</p>\n\n<p>This is because x >= 0 is an expression. (Formally 0 is an octal constant of type int.)</p>\n\n<p>Try 1 / 2 * 1.0 for a more pernicious example. This is grouped as (1 / 2) * 1.0 and is zero since the integers in the expression 1 / 2 are not promoted to floating point.</p>\n"}], "owner": {"reputation": 119, "user_id": 10498285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cc6ac89f103ffed9d3a80e806bf7eb0?s=128&d=identicon&r=PG&f=1", "display_name": "cellka", "link": "https://stackoverflow.com/users/10498285/cellka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 233, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1546459174, "creation_date": 1546453769, "last_edit_date": 1546454025, "question_id": 54011382, "link": "https://stackoverflow.com/questions/54011382/signed-and-unsigned-integers-with-logical-operators", "title": "Signed and unsigned integers with logical operators", "body": "<pre><code>int x = /* some integer */; \nunsigned int ux = (unsigned) x;\n</code></pre>\n\n<p>we have </p>\n\n<pre><code>x &gt;= 0 || x &lt; ux\n</code></pre>\n\n<p>we know that in <code>x &lt; ux</code> the first <code>x</code> is cast implicitly to <code>unsigned</code> but is the first <code>x</code> in <code>x &gt;= 0</code> (1) cast to <code>unsigned</code> implicitly? </p>\n"}, {"tags": ["c", "gcc"], "answers": [{"comments": [{"owner": {"reputation": 1189, "user_id": 2176679, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a0d32e0d627eeae71f9c547982f7cb12?s=128&d=identicon&r=PG&f=1", "display_name": "Sukhanov Ni\u0441kolay", "link": "https://stackoverflow.com/users/2176679/sukhanov-ni%d1%81kolay"}, "edited": false, "score": 0, "creation_date": 1546452183, "post_id": 54011037, "comment_id": 94858828, "body": "Where can I read about &quot;means that it can ignore alignment when it is in another structure&quot; I didn&#39;t find it in the gcc docs or anywhere. :("}, {"owner": {"reputation": 5181, "user_id": 5529197, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6af647bacfb3f0b596c73b0e3b0dc4b1?s=128&d=identicon&r=PG&f=1", "display_name": "Afshin", "link": "https://stackoverflow.com/users/5529197/afshin"}, "reply_to_user": {"reputation": 1189, "user_id": 2176679, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a0d32e0d627eeae71f9c547982f7cb12?s=128&d=identicon&r=PG&f=1", "display_name": "Sukhanov Ni\u0441kolay", "link": "https://stackoverflow.com/users/2176679/sukhanov-ni%d1%81kolay"}, "edited": false, "score": 0, "creation_date": 1546452310, "post_id": 54011037, "comment_id": 94858883, "body": "@SukhanovNi\u0441kolay it had a &quot;it seems&quot; at start of sentence too. but I found 1 sentence about it in gcc manual and I add it to reply."}, {"owner": {"reputation": 1189, "user_id": 2176679, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a0d32e0d627eeae71f9c547982f7cb12?s=128&d=identicon&r=PG&f=1", "display_name": "Sukhanov Ni\u0441kolay", "link": "https://stackoverflow.com/users/2176679/sukhanov-ni%d1%81kolay"}, "edited": false, "score": 0, "creation_date": 1546452615, "post_id": 54011037, "comment_id": 94859003, "body": "Yeah, I saw the same cite, then it seems it is an ISO C requirement. :) UPDATE: Sorry, wrong cite, I saw this:  &quot;ISO C standard to be at least a perfect multiple of the lowest common multiple of the alignments of all of the members of the struct&quot;"}], "tags": [], "owner": {"reputation": 5181, "user_id": 5529197, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6af647bacfb3f0b596c73b0e3b0dc4b1?s=128&d=identicon&r=PG&f=1", "display_name": "Afshin", "link": "https://stackoverflow.com/users/5529197/afshin"}, "is_accepted": true, "score": 6, "last_activity_date": 1546453337, "last_edit_date": 1546453337, "creation_date": 1546452029, "answer_id": 54011037, "question_id": 54010839, "link": "https://stackoverflow.com/questions/54010839/how-does-attribute-packed-for-a-field-affect-struct-which-contains-this-f/54011037#54011037", "title": "How does __attribute__((packed)) for a field affect struct which contains this field?", "body": "<p>it seems because <code>__attribute__((packed))</code> means use the minimum memory for structure, it also means that it can ignore alignment for siding members when it is in another structure. Check following structure:</p>\n\n<pre><code>struct bar {\n  char b;\n  __attribute__((packed)) int bla;\n  char a;\n};\n</code></pre>\n\n<p>When you check size for this structure, it will be 6. This happens because it ignores member alignment for 2 side members(<code>a</code> and <code>b</code> here). But this structure:</p>\n\n<pre><code>struct bar {\n  char b;\n  __attribute__((packed)) int bla;\n  char a;\n  int c;\n};\n</code></pre>\n\n<p>has size of 12, because it is aligned <code>c</code> on 4 bytes boundary. In your case, if you use <code>aligned</code> attribute too at same time, it works as you expect:</p>\n\n<pre><code>struct bar {\n  char b;\n  __attribute__((aligned (4), packed)) int bla;\n  char a;\n};\n</code></pre>\n\n<p>This structure size is 12.</p>\n\n<p><strong>Update:</strong></p>\n\n<p>I only found this in <code>GCC</code>'s <em>aligned</em> section of <a href=\"https://gcc.gnu.org/onlinedocs/gcc-3.3/gcc/Type-Attributes.html\" rel=\"nofollow noreferrer\">attributes</a>. I think it is related to what I mentioned here:</p>\n\n<blockquote>\n  <p>The <strong>aligned</strong> attribute can only increase the alignment; but you can\n  decrease it by specifying <strong>packed</strong> as well</p>\n</blockquote>\n\n<p>.Just remember that if you want to keep child structure packed but main structure aligned, you need to use 2 attributes in 2 different declarations. For example following structure has size of 12:</p>\n\n<pre><code>struct foo {\n  char b;\n  int a;\n} __attribute__((packed));\n\nstruct bar {\n  char b;\n  __attribute__((aligned(4))) struct foo bla;\n  char a;\n};\n</code></pre>\n\n<p>but if you use <code>aligned()</code> in declaration of <code>foo</code> as <code>__attribute__((aligned (4), packed))</code>, size will be 16. This happens because <code>foo</code> gets aligned too, and it will not be useful in case of packing. </p>\n"}], "owner": {"reputation": 1189, "user_id": 2176679, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a0d32e0d627eeae71f9c547982f7cb12?s=128&d=identicon&r=PG&f=1", "display_name": "Sukhanov Ni\u0441kolay", "link": "https://stackoverflow.com/users/2176679/sukhanov-ni%d1%81kolay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "accepted_answer_id": 54011037, "answer_count": 1, "score": 7, "last_activity_date": 1546453337, "creation_date": 1546451048, "question_id": 54010839, "link": "https://stackoverflow.com/questions/54010839/how-does-attribute-packed-for-a-field-affect-struct-which-contains-this-f", "title": "How does __attribute__((packed)) for a field affect struct which contains this field?", "body": "<p>If I have a field in my struct which is packed, why my whole structure is becoming packed? </p>\n\n<p>Example:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nstruct foo {\n  int a;\n} __attribute__((packed));\n\nstruct bar {\n  char b;\n  struct foo bla;\n  char a;\n};\n\nint main() {\n  printf(\"%ld\\n\", sizeof(struct bar));\n  return 0;\n}\n</code></pre>\n\n<p><a href=\"https://ideone.com/bjoZHB\" rel=\"noreferrer\">https://ideone.com/bjoZHB</a></p>\n\n<p>Sizeof of <code>bar</code> struct is 6, but it should be 12, because it should be aligned.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1546450091, "post_id": 54010599, "comment_id": 94857962, "body": "did you executed it with <i>valgrind</i> to see where you have an invalid memory modification or something like ?"}, {"owner": {"reputation": 51, "user_id": 10835382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5dda74073d3ae3eedd3f3e533f460825?s=128&d=identicon&r=PG&f=1", "display_name": "valentin.ciprian", "link": "https://stackoverflow.com/users/10835382/valentin-ciprian"}, "reply_to_user": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1546450323, "post_id": 54010599, "comment_id": 94858070, "body": "@bruno, i dont know what is valgrind or how to use it. I just started learning C two months ago"}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1546450331, "post_id": 54010599, "comment_id": 94858075, "body": "It is difficult for us without an example of &quot;rom-eng.txt&quot; input file producing the problem."}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1546450404, "post_id": 54010599, "comment_id": 94858106, "body": "@valentinciprianyou don&#39;t know <i>valgrind</i> ?  it is not forbidden to search about it ;-) <i>valgrind</i> is really useful, look at it"}, {"owner": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "edited": false, "score": 1, "creation_date": 1546450423, "post_id": 54010599, "comment_id": 94858112, "body": "Welcome to SO! Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> which contains the text file contents and the smallest amount of code that reproduces the error."}, {"owner": {"reputation": 51, "user_id": 10835382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5dda74073d3ae3eedd3f3e533f460825?s=128&d=identicon&r=PG&f=1", "display_name": "valentin.ciprian", "link": "https://stackoverflow.com/users/10835382/valentin-ciprian"}, "reply_to_user": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1546450635, "post_id": 54010599, "comment_id": 94858204, "body": "@bruno, okk, i`ll  look into it :D"}, {"owner": {"reputation": 51, "user_id": 10835382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5dda74073d3ae3eedd3f3e533f460825?s=128&d=identicon&r=PG&f=1", "display_name": "valentin.ciprian", "link": "https://stackoverflow.com/users/10835382/valentin-ciprian"}, "reply_to_user": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "edited": false, "score": 0, "creation_date": 1546450726, "post_id": 54010599, "comment_id": 94858240, "body": "@ggorlen, well it says that the application wrote to memory after the of heap buffer"}, {"owner": {"reputation": 51, "user_id": 10835382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5dda74073d3ae3eedd3f3e533f460825?s=128&d=identicon&r=PG&f=1", "display_name": "valentin.ciprian", "link": "https://stackoverflow.com/users/10835382/valentin-ciprian"}, "reply_to_user": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1546450872, "post_id": 54010599, "comment_id": 94858300, "body": "@bruno, that text file i wrote on every line something like this: word=wordtranslated. But that part of the code works fine. Well i could say the code works without the need to deallocate the memory, but from what i here that is &quot;bad practice&quot;"}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1546450935, "post_id": 54010599, "comment_id": 94858324, "body": "The code looks Windows-ish to me, so I don&#39;t know if valgrind is an option, but <a href=\"https://stackoverflow.com/q/413477/10077\">there are other tools for Windows</a>. BTW, <a href=\"https://stackoverflow.com/q/2108192/10077\">your <code>main</code> signature is wrong</a>."}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1546451025, "post_id": 54010599, "comment_id": 94858359, "body": "@valentin.ciprian I see a strcpy going out of the allocated block of memory, look at my answer and replace the two lines with the simple <i>strdup</i> then try again"}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1546451114, "post_id": 54010599, "comment_id": 94858399, "body": "@valentin.ciprian: What &quot;minimal&quot; means, among other things, is this: Rip out all the parts that do not <b>directly</b> contribute to the problem. An example for your problem -- how to deallocate memory -- would ideally <i>only</i> include the allocation and deallocation of memory, with all the irrelevant parts, those that matter only in the context of your complete program, taken out / replaced with &quot;stuff happens here&quot; comments. The <i>minimal</i> amount of code required to reproduce, not the functionality of your program, but <i>your problem</i>. This &quot;reduction of scope&quot; is an important debugging technique."}, {"owner": {"reputation": 51, "user_id": 10835382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5dda74073d3ae3eedd3f3e533f460825?s=128&d=identicon&r=PG&f=1", "display_name": "valentin.ciprian", "link": "https://stackoverflow.com/users/10835382/valentin-ciprian"}, "reply_to_user": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1546451250, "post_id": 54010599, "comment_id": 94858455, "body": "@DevSolar, sorry for the inconvenience. Its my second time posting here. Next time i will be more carefull."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1546451269, "post_id": 54010599, "comment_id": 94858462, "body": "(ctd.) When this hasn&#39;t happened, and &quot;the whole program&quot; is being posted (like in your case), this might get interpreted as, &quot;you haven&#39;t bothered trying to find the problem yourself&quot;. Because if you had tried, you would already <i>have</i> a smaller example. We react indulgent if this happens to a new contributor, but it&#39;s pretty much a requirement on SO to do this kind of &quot;scope reduction&quot; if you don&#39;t want to be met with the downvote / close-vote hammer. (Partly because, usually, there are many, many <i>other</i> problems in a non-minimal example that would <i>also</i> have to be addressed...) ;-)"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1546451305, "post_id": 54010599, "comment_id": 94858476, "body": "Also see <a href=\"https://stackoverflow.com/questions/5431941/why-is-while-feof-file-always-wrong\"><b>Why is \u201cwhile ( !feof (file) )\u201d always wrong?</b></a>"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1546451646, "post_id": 54010599, "comment_id": 94858602, "body": "Calling <code>cp = strtok(bp, &quot;=\\n&quot;);</code> within a loop is an incorrect use of <code>strtok</code>, the first call uses <code>bp</code>, all subsequent calls use <code>NULL</code>. You must limit <code>while (1)</code> to execute no more than <code>2*lines</code> times (or you run out of pointers)"}, {"owner": {"reputation": 51, "user_id": 10835382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5dda74073d3ae3eedd3f3e533f460825?s=128&d=identicon&r=PG&f=1", "display_name": "valentin.ciprian", "link": "https://stackoverflow.com/users/10835382/valentin-ciprian"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1546451843, "post_id": 54010599, "comment_id": 94858687, "body": "@DavidC.Rankin, well after the first call, if i write bp=NULL, its not ok at all?"}, {"owner": {"reputation": 51, "user_id": 10835382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5dda74073d3ae3eedd3f3e533f460825?s=128&d=identicon&r=PG&f=1", "display_name": "valentin.ciprian", "link": "https://stackoverflow.com/users/10835382/valentin-ciprian"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1546453396, "post_id": 54010599, "comment_id": 94859323, "body": "@AndrewHenle, i<code>ve just seen that question a few moments ago. I</code>ll read the answers."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1546456116, "post_id": 54010599, "comment_id": 94860371, "body": "You don&#39;t write <code>bp = NULL</code> you write <code>cp = strtok(NULL, &quot;=\\n&quot;);</code> look at <a href=\"http://man7.org/linux/man-pages/man3/strtok.3.html\" rel=\"nofollow noreferrer\">man strtok</a> <code>&quot;On the first call to strtok(), the string to be parsed should be specified in str. In each subsequent call that should parse the same string, str must be NULL.&quot;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 10835382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5dda74073d3ae3eedd3f3e533f460825?s=128&d=identicon&r=PG&f=1", "display_name": "valentin.ciprian", "link": "https://stackoverflow.com/users/10835382/valentin-ciprian"}, "edited": false, "score": 0, "creation_date": 1546451124, "post_id": 54010787, "comment_id": 94858403, "body": "wow, i really forgot that plus 1. Sorry for not paying enough attention. Now works. I will look into strdup, Till now i didnt use something like this"}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 1, "creation_date": 1546451451, "post_id": 54010787, "comment_id": 94858530, "body": "<code>strlen()</code>, <code>malloc()</code> and <code>strcpy()</code> are language standard, <code>strdup()</code> -- while being widely available -- isn&#39;t. Depending on environment, this might make <code>strdup()</code> a non-option."}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "reply_to_user": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1546451676, "post_id": 54010787, "comment_id": 94858609, "body": "@DevSolar in that case to define <i>strdup</i> to be able to reuse it everywhere when needed is not really just an option and is almost mandatory :-)"}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1546451740, "post_id": 54010787, "comment_id": 94858636, "body": "@bruno: Others dislike <code>strdup()</code> because it&#39;s hiding a dynamic memory allocation behind a function name that isn&#39;t <code>malloc()</code>. ;-) Tastes differ."}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "reply_to_user": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1546451894, "post_id": 54010787, "comment_id": 94858713, "body": "@DevSolar say them it is never too late to learn and memorize something new ;-)"}, {"owner": {"reputation": 51, "user_id": 10835382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5dda74073d3ae3eedd3f3e533f460825?s=128&d=identicon&r=PG&f=1", "display_name": "valentin.ciprian", "link": "https://stackoverflow.com/users/10835382/valentin-ciprian"}, "edited": false, "score": 0, "creation_date": 1546452207, "post_id": 54010787, "comment_id": 94858840, "body": "@bruno, i`ve just read a little about strdup(), and i think about using it :) thanks for the information"}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1546481383, "post_id": 54010787, "comment_id": 94868024, "body": "Please don&#39;t cast malloc in an answer. It&#39;s a bad habbit."}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "reply_to_user": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1546501276, "post_id": 54010787, "comment_id": 94872536, "body": "@Broman what a curious remark, personally I think exactly the reverse. When I can I compile C codes both with gcc and g++, so the cast is mandatory to avoid error in C++."}], "tags": [], "owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "is_accepted": true, "score": 3, "last_activity_date": 1546451137, "last_edit_date": 1546451137, "creation_date": 1546450839, "answer_id": 54010787, "question_id": 54010599, "link": "https://stackoverflow.com/questions/54010599/how-do-i-deallocate-memory-here-c/54010787#54010787", "title": "How do i deallocate memory here? (c)", "body": "<p>There is something wrong in  <em>translateWord</em> :</p>\n\n<pre><code>array[i] = (char*)malloc(sizeof(char)*strlen(cp));\nstrcpy(array[i++], cp);\n</code></pre>\n\n<p>The first line must be <code>array[i] = (char*)malloc(strlen(cp) + 1);</code> else 1 char is missing to save the final null char during the <em>strcpy</em>.</p>\n\n<p>Note that by definition <code>sizeof(char)</code> is 1.</p>\n\n<p>And why do you not just use <em>strdup</em> rather than a <em>malloc</em> then a <em>strcpy</em> ? just replace these 2 lines by <code>array[i++] = strdup(cp);</code></p>\n"}], "owner": {"reputation": 51, "user_id": 10835382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5dda74073d3ae3eedd3f3e533f460825?s=128&d=identicon&r=PG&f=1", "display_name": "valentin.ciprian", "link": "https://stackoverflow.com/users/10835382/valentin-ciprian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 54010787, "answer_count": 1, "score": 0, "last_activity_date": 1546452874, "creation_date": 1546449838, "last_edit_date": 1546452874, "question_id": 54010599, "link": "https://stackoverflow.com/questions/54010599/how-do-i-deallocate-memory-here-c", "title": "How do i deallocate memory here? (c)", "body": "<p>I have a really quick question. Why do i get heap corruption detected when i try to deallocate the array in the void translateWord() function?\nI tried to deallocate line by line in a for loop but it doesnt seem to work. I thought that if i use that function more than once, and every time the function allocates memory, i should deallocate it at the end of the function. Any idea?</p>\n\n<pre><code>#define _CRT_SECURE_NO_WARNINGS\n#include&lt;stdio.h&gt;\n#include &lt;conio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;ctype.h&gt;\n\n\nvoid translateWord(char word[], FILE *point_out, FILE *point_1)\n{\n    rewind(point_1);\n    char ch;\n    int gasit = 0;\n    int lines = count_lines(point_1);\n    int i = 0;\n    char *cp;\n    char *bp;\n    char line[255];\n    char **array = (char**)malloc(sizeof(char*)*2*lines);\n\n    rewind(point_1);\n    while (fgets(line, sizeof(line), point_1) != NULL) {\n        bp = line;\n        while (1) {\n            cp = strtok(bp, \"=\\n\");\n            bp = NULL;\n\n            if (cp == NULL)\n                break;\n            array[i] = (char*)malloc(sizeof(char)*strlen(cp));\n            strcpy(array[i++], cp);\n        }\n    }\n\n    gasit = cuvant_gasit(word, array, lines, point_out, gasit);\n    if (gasit == 0)\n    {\n        fprintf(point_out, \"&lt;&lt;%s&gt;&gt;\", word);\n    }\n\n    for (int k = 0; k &lt; 2 * lines; k++)\n    {\n        free(array[k]);\n    }\n    free(array);\n}\n</code></pre>\n"}, {"tags": ["c", "file", "loops", "text", "eof"], "comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1546450146, "post_id": 54010524, "comment_id": 94857992, "body": "<code>if (txt2 == EOF)                 break;</code>?!?!  Turn on all compiler warnings."}, {"owner": {"reputation": 551, "user_id": 4567147, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/20733e11bbf5d2ad7ae1007573afa560?s=128&d=identicon&r=PG&f=1", "display_name": "Tanmay Patil", "link": "https://stackoverflow.com/users/4567147/tanmay-patil"}, "edited": false, "score": 0, "creation_date": 1546450442, "post_id": 54010524, "comment_id": 94858122, "body": "txt2 being character buffer will not be EOF . you need to change the condition to fgets(txt2, 100,fp) != null to avoid infinite loop"}, {"owner": {"reputation": 120, "user_id": 10845583, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3a6JmuW6DFw/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwca81X3N_lQyQQvH_Ql0OS1sR-Q2sA/mo/photo.jpg?sz=128", "display_name": "Mr Josh", "link": "https://stackoverflow.com/users/10845583/mr-josh"}, "edited": false, "score": 0, "creation_date": 1546450836, "post_id": 54010524, "comment_id": 94858282, "body": "does this method not work for strings like in the case for characters?<a href=\"https://beginnersbook.com/2014/01/c-file-io/\" rel=\"nofollow noreferrer\">beginnersbook.com/2014/01/c-file-io</a>"}], "owner": {"reputation": 120, "user_id": 10845583, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3a6JmuW6DFw/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwca81X3N_lQyQQvH_Ql0OS1sR-Q2sA/mo/photo.jpg?sz=128", "display_name": "Mr Josh", "link": "https://stackoverflow.com/users/10845583/mr-josh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "closed_date": 1546450045, "answer_count": 0, "score": 0, "last_activity_date": 1546449882, "creation_date": 1546449437, "last_edit_date": 1546449882, "question_id": 54010524, "link": "https://stackoverflow.com/questions/54010524/reading-and-writing-text-file-in-c", "closed_reason": "Duplicate", "title": "reading and writing text file in c", "body": "<p>a simple program to perform writing operation to a text file and then read and display the text from file.\n How do I rectify it and how to avoid using \"#define _CRT_SECURE_NO_WARNINGS\"\nI am using visual studios 2018\nI have tried multiple times but the output seems to go infinit<a href=\"https://i.stack.imgur.com/0Le5x.png\" rel=\"nofollow noreferrer\">the output</a></p>\n\n<pre><code>   #define _CRT_SECURE_NO_WARNINGS\n    #include &lt;stdio.h&gt;\n   #include &lt;stdlib.h&gt;\n    void main()\n    {\n        FILE *fp1, *fp2;\n        fp1 = fopen(\"text.txt\", \"w\");\n        printf(\"enter no of lines\");\n        int line;\n        scanf(\"%d\", &amp;line);\n\n        char txt[1000];\n        for (int i=0; i &lt; line; i++)\n        {\n            gets( txt);\n            fprintf(fp1, \"s\", txt);\n\n        }\n        fclose(fp1);\n        char txt2[1000];\n        fp2 = fopen(\"text.txt\", \"r\");\n        while (1)\n        {\n            fgets(txt2, 1000, fp2);\n\n            if (txt2 == EOF)\n                break;\n            printf(\"%s\", txt2);\n        }\n        fclose(fp2);\n    }`\n</code></pre>\n"}, {"tags": ["c", "sql-server", "rdlc", "sp-executesql"], "comments": [{"owner": {"reputation": 28373, "user_id": 5015238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8790f8091d3c6c58fd45664a165117a?s=128&d=identicon&r=PG", "display_name": "jdweng", "link": "https://stackoverflow.com/users/5015238/jdweng"}, "edited": false, "score": 0, "creation_date": 1546448622, "post_id": 54010205, "comment_id": 94857366, "body": "Try  adding a &quot;USE DataBaseName&quot; in the query.  the server can have more than one database and Report Manager doe not know which database to query.  The RDLC (is text and can open with Notepad) file has a tag with CommandText and you can put the command text into SSMS to test and make sure it returns results.  The greater than sign and less than sign are html &amp;gt; and &amp;lt; and need to get replace in SSMS."}, {"owner": {"reputation": 21, "user_id": 10759595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00dded931c6fce7849a378399afb2ec3?s=128&d=identicon&r=PG&f=1", "display_name": "NHCives", "link": "https://stackoverflow.com/users/10759595/nhcives"}, "reply_to_user": {"reputation": 28373, "user_id": 5015238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8790f8091d3c6c58fd45664a165117a?s=128&d=identicon&r=PG", "display_name": "jdweng", "link": "https://stackoverflow.com/users/5015238/jdweng"}, "edited": false, "score": 0, "creation_date": 1546451243, "post_id": 54010205, "comment_id": 94858452, "body": "Good! In the CommandText tag as you indicated me the same figure the following: &lt;CommandText&gt; / * Local Query * / &lt;/ CommandText&gt; With respect to the signs greater than and less than, I can not understand what you indicate."}, {"owner": {"reputation": 28373, "user_id": 5015238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8790f8091d3c6c58fd45664a165117a?s=128&d=identicon&r=PG", "display_name": "jdweng", "link": "https://stackoverflow.com/users/5015238/jdweng"}, "edited": false, "score": 0, "creation_date": 1546451548, "post_id": 54010205, "comment_id": 94858565, "body": "html contains the characters &#39;&lt;&#39; and &#39;&gt;&#39; around the element names to the innertext cannot contain these two characters.  So the innertext of the html you use &#39;&amp;gt;&#39; instead of the greater than sign and &#39;&amp;lt;&#39; instead of the less than sign.  The innertext should be what you put in comments a &quot;/* Local Query */  I assume there is a real SELECT statement instead of just the comments."}, {"owner": {"reputation": 21, "user_id": 10759595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00dded931c6fce7849a378399afb2ec3?s=128&d=identicon&r=PG&f=1", "display_name": "NHCives", "link": "https://stackoverflow.com/users/10759595/nhcives"}, "reply_to_user": {"reputation": 28373, "user_id": 5015238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8790f8091d3c6c58fd45664a165117a?s=128&d=identicon&r=PG", "display_name": "jdweng", "link": "https://stackoverflow.com/users/5015238/jdweng"}, "edited": false, "score": 0, "creation_date": 1546528305, "post_id": 54010205, "comment_id": 94886280, "body": "There add the full code of the SP that I am using to bring me the result set. As I indicated, the inconvenience is when I add a data set to the rdlc report, it is not giving me anything back."}, {"owner": {"reputation": 28373, "user_id": 5015238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8790f8091d3c6c58fd45664a165117a?s=128&d=identicon&r=PG", "display_name": "jdweng", "link": "https://stackoverflow.com/users/5015238/jdweng"}, "edited": false, "score": 0, "creation_date": 1546537629, "post_id": 54010205, "comment_id": 94890933, "body": "I would add a &quot;USE&quot; into the query to make sure it is using the right database.  I would check log files to see if database is reporting any errors.  I would also would try to determine if the procedures are being called.  You could create a view for debugging and add writes to view so you can tell if the procedures ran and how far the code executed."}], "answers": [{"comments": [{"owner": {"reputation": 4114, "user_id": 4122872, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c44972b43d3faf754a452bc921b8efd5?s=128&d=identicon&r=PG&f=1", "display_name": "userfl89", "link": "https://stackoverflow.com/users/4122872/userfl89"}, "reply_to_user": {"reputation": 21, "user_id": 10759595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00dded931c6fce7849a378399afb2ec3?s=128&d=identicon&r=PG&f=1", "display_name": "NHCives", "link": "https://stackoverflow.com/users/10759595/nhcives"}, "edited": false, "score": 0, "creation_date": 1546627349, "post_id": 54011351, "comment_id": 94924384, "body": "@NHCives I didn&#39;t quite understand your comment.  Did this solve your problem?"}, {"owner": {"reputation": 21, "user_id": 10759595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00dded931c6fce7849a378399afb2ec3?s=128&d=identicon&r=PG&f=1", "display_name": "NHCives", "link": "https://stackoverflow.com/users/10759595/nhcives"}, "edited": false, "score": 0, "creation_date": 1546627851, "post_id": 54011351, "comment_id": 94924608, "body": "Good afternoon! I do not think the problem is in the data type of each column that composes the ResultSet, but rather that it is not recognizing the Stored Procedure as an Object that returns rows, as if the case of the SP that has a &quot;Select&quot;"}, {"owner": {"reputation": 4114, "user_id": 4122872, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c44972b43d3faf754a452bc921b8efd5?s=128&d=identicon&r=PG&f=1", "display_name": "userfl89", "link": "https://stackoverflow.com/users/4122872/userfl89"}, "reply_to_user": {"reputation": 21, "user_id": 10759595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00dded931c6fce7849a378399afb2ec3?s=128&d=identicon&r=PG&f=1", "display_name": "NHCives", "link": "https://stackoverflow.com/users/10759595/nhcives"}, "edited": false, "score": 0, "creation_date": 1546628092, "post_id": 54011351, "comment_id": 94924701, "body": "The WITH RESULT SETS option defines the columns that are returned.  The data types are included to associate the proper metadata.  This is similar to defining what columns the &quot;Select&quot; will consist of."}], "tags": [], "owner": {"reputation": 4114, "user_id": 4122872, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c44972b43d3faf754a452bc921b8efd5?s=128&d=identicon&r=PG&f=1", "display_name": "userfl89", "link": "https://stackoverflow.com/users/4122872/userfl89"}, "is_accepted": false, "score": 0, "last_activity_date": 1546453646, "creation_date": 1546453646, "answer_id": 54011351, "question_id": 54010205, "link": "https://stackoverflow.com/questions/54010205/how-to-capture-the-result-set-of-a-stored-procedure-with-a-dynamic-select-sp-ex/54011351#54011351", "title": "How to capture the result set of a stored procedure with a dynamic Select (sp_executesql) in a RDLC report", "body": "<p>The <code>WITH RESULT SETS</code> option can be used to define metadata for a stored procedure when no results are returned by the input parameter(s).  By doing this, you will define columns that will be used for the results and there will be columns in work with in the report regardless of the parameter that's used.  An example of this follows.  Also, is the <code>NOLOCK</code> hint necessary?  This can lead to inconsistent results among other things.</p>\n\n<pre><code>EXEC YourDatabase.YourSchema.YourSP @ParameterName\nWITH RESULT SETS \n(\n  (\n    ColumnA INT,\n    ColumnB VARCHAR(100),\n    ColumnC VARCHAR(100)\n  )\n)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 10759595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00dded931c6fce7849a378399afb2ec3?s=128&d=identicon&r=PG&f=1", "display_name": "NHCives", "link": "https://stackoverflow.com/users/10759595/nhcives"}, "is_accepted": false, "score": 0, "last_activity_date": 1546866018, "creation_date": 1546866018, "answer_id": 54074927, "question_id": 54010205, "link": "https://stackoverflow.com/questions/54010205/how-to-capture-the-result-set-of-a-stored-procedure-with-a-dynamic-select-sp-ex/54074927#54074927", "title": "How to capture the result set of a stored procedure with a dynamic Select (sp_executesql) in a RDLC report", "body": "<p>I just generated the connection, the sql command and the data adapter to get the resultset. Could you tell me if it's okay:</p>\n\n<pre><code>SqlConnection conexionSQL = new SqlConnection(\"Data Source=SRVDESARROLLO7\\\\BASCS;Initial Catalog=BASCSREPORT;Integrated Security=True\");\nconexionSQL.Open();\nstring stringCommand = \"dbo.XXX_SP_REPORTING_SERVICES_DESPACHOS\";\nSqlCommand comandoSQL = new SqlCommand(stringCommand, conexionSQL);\ncomandoSQL.CommandType = CommandType.StoredProcedure;\ncomandoSQL.Parameters.AddWithValue(\"@xmlParametros\", SqlDbType.Xml).Value = parametrosXML.ToString();\nSqlDataAdapter da = new SqlDataAdapter(comandoSQL.ToString(), conexionSQL);\nda.SelectCommand = comandoSQL;\nBASCSREPORTDataSet dataSet1 = new BASCSREPORTDataSet();\nda.Fill(dataSet1, dataSet1.Tables[0].TableName);\nReportDataSource rds = new ReportDataSource(\"XXX_SP_REPORTING_SERVICES_DESPACHOS\", dataSet1.Tables[0]);\nthis.reportViewer1.LocalReport.DataSources.Clear();\nthis.reportViewer1.LocalReport.DataSources.Add(rds);\nthis.reportViewer1.LocalReport.Refresh();\nthis.reportViewer1.RefreshReport();\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 10759595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00dded931c6fce7849a378399afb2ec3?s=128&d=identicon&r=PG&f=1", "display_name": "NHCives", "link": "https://stackoverflow.com/users/10759595/nhcives"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 624, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1546866018, "creation_date": 1546448051, "last_edit_date": 1546453941, "question_id": 54010205, "link": "https://stackoverflow.com/questions/54010205/how-to-capture-the-result-set-of-a-stored-procedure-with-a-dynamic-select-sp-ex", "title": "How to capture the result set of a stored procedure with a dynamic Select (sp_executesql) in a RDLC report", "body": "<p>I need to be able to obtain the result set that will generate a stored procedure that has a dynamic query (<code>sp_executesql</code>), the problem is that when defining the <code>DataSource</code>, which in this case would be the stored procedure, it does not return any column as a result by the same from the <code>DataSource</code> wizard.</p>\n\n<p>I have another report (rdlc) that the stored procedure that has a DataSource is not a dynamic query that returns the result set.</p>\n\n<p>I was thinking about being able to capture the instruction that solves the <code>sp_executesql</code> in a variable (<code>@instruction</code>) and then take it and execute it again as Select from the query configuration wizard of <code>TableAdapter</code>.</p>\n\n<pre><code>ALTER PROCEDURE dbo.StoredProcedureA \n    @xmlParameter XML \nAS\nBEGIN\n    SET NOCOUNT ON \n\n    DECLARE @DespachoR  VARCHAR(100),\n    @DespachoRBEsta TINYINT,\n    @PaisOrigenR VARCHAR(100),\n    @PaisOrigenBEsta TINYINT,\n    @Estampilla INTEGER,\n    @DesdeFecha VARCHAR(10),\n    @HastaFecha VARCHAR(10),\n    @desfecha datetime,\n    @hasfecha datetime,\n    @strWhereRan VARCHAR(MAX),\n    @strWhere VARCHAR(MAX),\n\n\n    @seteos nvarchar(200),\n    @instruccion nvarchar(max),\n    @instruccion2 nvarchar(max),\n    @texto varchar(max),\n    @columna varchar(100),\n    @tipodato varchar(50)\n\n\n    If @xmlParametros is not null\n    begin\n\nDECLARE @xml TABLE ( identidad integer IDENTITY (1,1) not null, tipo char(1) not null, columna varchar(30) not null, campoxml varchar(1000) not null, \n    tipodato varchar(50) not null, nulo tinyint null)\n\nINSERT @xml (columna, tipo, campoxml, tipodato, nulo)\n\n\nSELECT '@DespachoR', 'E', '(/Parameters/DESPACHOR/text())[1]', 'varchar(100)', null \nUNION ALL\nSELECT '@DespachoRBEsta', 'E', '(/Parameters/DESPACHORBESTA/text())[1]', 'tinyint', null \nUNION ALL\nSELECT '@PaisOrigenR', 'E', '(/Parameters/PAISORIGENR/text())[1]', 'varchar(100)', null \nUNION ALL\nSELECT '@PaisOrigenBEsta', 'E', '(/Parameters/PAISORIGENRBESTA/text())[1]', 'tinyint', null \nUNION ALL\nSELECT '@Estampilla', 'E', '(/Parameters/ESTAMPILLA/text())[1]', 'integer', null \nUNION ALL\nSELECT '@DesdeFecha', 'E', '(/Parameters/DESDEFECHA/text())[1]', 'varchar(10)', null \nUNION ALL\nSELECT '@HastaFecha', 'E', '(/Parameters/HASTAFECHA/text())[1]', 'varchar(10)', null \n\n\nSELECT @seteos = 'SET ANSI_NULLS ON\n        SET QUOTED_IDENTIFIER ON\n        SET CONCAT_NULL_YIELDS_NULL ON\n        SET ANSI_PADDING ON\n        SET ANSI_WARNINGS ON\n        SET ARITHABORT ON\n        SET NUMERIC_ROUNDABORT OFF '\nselect @instruccion =null, @instruccion2 = N'@xmlParametros xml'\n\nDECLARE INSTRUCCION INSENSITIVE CURSOR FOR\nSELECT columna, \"@xmlParametros.value('\" + campoxml + \"', '\" + tipodato + \"')\", tipodato\nFROM @xml\nWHERE tipo='E'\nORDER BY identidad  \n\nOPEN INSTRUCCION\nFETCH NEXT FROM INSTRUCCION INTO @columna, @texto, @tipodato\n\nWHILE (@@FETCH_STATUS &lt;&gt; -1)\n begin\n    If @instruccion is not null\n        SELECT @instruccion  = @instruccion + ', '\n\n    SELECT @instruccion  = @instruccion + @columna + '=' + @texto, @instruccion2 = @instruccion2 + ', ' + @columna + ' ' + @tipodato + ' OUTPUT'\n\n    FETCH NEXT FROM INSTRUCCION INTO @columna, @texto, @tipodato\n end\n\nCLOSE INSTRUCCION\nDEALLOCATE INSTRUCCION\n\nSELECT @instruccion = @seteos + N'SELECT ' + @instruccion \n\n--end\n                    --@instruccion: SETEOS\nexec sp_executesql  @instruccion, @instruccion2,@xmlParametros=@xmlParametros, @DespachoR=@DespachoR OUTPUT,\n                    @DespachoRBEsta=@DespachoRBEsta OUTPUT, @PaisOrigenR=@PaisOrigenR OUTPUT, @PaisOrigenBEsta=@PaisOrigenBEsta OUTPUT, @Estampilla=@Estampilla OUTPUT,\n                    @DesdeFecha=@DesdeFecha OUTPUT, @HastaFecha=@HastaFecha OUTPUT\n\nIF @DespachoR is not null\n begin\n    EXEC sp_armo_rango @DespachoR, 'D.Despacho', @DespachoRBEsta, 0, @strWhereRan OUTPUT\n\n    IF @strWhereRan is not null\n        Set @strWhere = @strWhere + \" AND \" + rtrim(@strWhereRan)\n\n\n end\n\nIF @PaisOrigenR is not null\nbegin\n     EXEC sp_armo_rango @PaisOrigenR, 'D.Paisorigen', @PaisOrigenBEsta, 0, @strWhereRan OUTPUT\n     IF @strWhereRan is not null\n          Set  @strWhere  =  @strWhere  + \" AND \" + rtrim(@strWhereRan)\nend\n\nIF @Estampilla is not null\n     --Esto determina que se listen los despachos que tienen la estampilla indicada, los despachos as\u00ed determinados se listan completos, \n     --es decir, con todos los rangos de estampillas.\n     Set @strWhere = @strWhere + ' AND 0&lt;&gt;(SELECT count(*) FROM Despachosestampillas De1 (nolock)\n                          WHERE     De1.Despacho=D.Despacho AND \n                               De1.Hasta &gt;=@estampilla AND De1.Desde &lt;= @estampilla )'\n\nIF @DesdeFecha is not null\nbegin\n    select @desfecha=convert(datetime, @desdefecha, 103)\n\n     Set  @strWhere  =  @strWhere  + ' AND  D.Fecha &gt;=@desfecha'\n end\n\nIF @HastaFecha is not NULL\n    begin\n    select @hasfecha=convert(datetime, @HastaFecha, 103)\n\n     Set @strWhere = @strWhere + ' AND  D.Fecha &lt;=@hasfecha'\n end\n\n\nSet @instruccion  = N'SELECT D.Despacho, D.Fecha as FechaD, D.Aduana, D.Paisorigen as Pais, D.Garantia, \n                CASE WHEN D.TipoGarantia=\"E\" THEN \"Efectivo\" \n                     WHEN D.TipoGarantia=\"C\" THEN \"Cauci\u00f3n\" \n                     WHEN D.TipoGarantia=\"M\" THEN \"Mixto\" \n                     ELSE null END as Tipo, \n                D.Efectivo, D.FechaGarantia as Fecha, D.Compania, D.Poliza, D.FechavtoGarantia as Fechavto, D.Monto as Importe, \n                De.Desde, De.Hasta, convert(varchar(254), D.Observacion) as Observacion \n          FROM Despachos D (nolock)\n                LEFT JOIN Despachosestampillas De (nolock) ON D.Despacho=De.Despacho\n          WHERE 1=1 ' +  @strWhere + '\n          ORDER BY D.Despacho, De.Desde'\n\n\n          exec sp_executesql    @instruccion, N'@estampilla integer, @desfecha datetime, @hasfecha datetime', @estampilla=@estampilla, @desfecha=@desfecha, @hasfecha=@hasfecha\n\n\n    end\n\n\n\n    END\n</code></pre>\n\n<hr>\n\n<pre><code>ALTER PROCEDURE dbo.StoredProcedureB    \n    @xmlParametros XML\nAS\nBEGIN\n    SET NOCOUNT ON;\n    SET CONCAT_NULL_YIELDS_NULL OFF\n    SET ANSI_NULLS OFF\n    SET QUOTED_IDENTIFIER OFF\n    SET NOCOUNT ON\n\n    DECLARE @Sistema CHAR(1),\n@Caratula tinyint,\n@FormatoQRP VARCHAR(12),\n\n@seteos NVARCHAR(200),\n@instruccion NVARCHAR(max),\n@instruccion2 NVARCHAR(max),\n@texto VARCHAR(max),\n@columna VARCHAR(100),\n@tipodato VARCHAR(50)\n\nIF @xmlParametros is not null\n BEGIN\n\n    DECLARE @xml TABLE ( identidad integer IDENTITY (1,1) not null, tipo char(1) not null, columna varchar(30) not null, campoxml varchar(1000) not null, \n        tipodato varchar(50) not null, nulo tinyint null)\n\n    INSERT @xml (columna, tipo, campoxml, tipodato, nulo)\n\n    --      PARAMETRO    DIF      RUTA_DEL_NODO                         TIPO_DATO_NODO  NULO\n\n    SELECT '@Sistema', 'E', '(/Parameters/SISTEMA)[1]', 'char(1)', null \n    UNION ALL\n    SELECT '@Caratula', 'E', '(/Parameters/CARATULA)[1]', 'tinyint', null \n    UNION ALL\n    SELECT '@FormatoQRP', 'E', '(/Parameters/FORMATOQRP)[1]', 'varchar(12)', null \n    --SELECT*FROM @xml\n\n    --SETEOS SUMADOS A LA INSTRUCCION GRAL.\n    SELECT @seteos = 'SET ANSI_NULLS ON\n            SET QUOTED_IDENTIFIER ON\n            SET CONCAT_NULL_YIELDS_NULL ON\n            SET ANSI_PADDING ON\n            SET ANSI_WARNINGS ON\n            SET ARITHABORT ON\n            SET NUMERIC_ROUNDABORT OFF '\n    select @instruccion =null, @instruccion2 = N'@xmlParametros xml'\n\n    --DECLARA CURSOR PARA RECORRER TABLA DECLARADA\n    DECLARE INSTRUCCION INSENSITIVE CURSOR FOR\n    SELECT columna, \"@xmlParametros.value('\" + campoxml + \"', '\" + tipodato + \"')\", tipodato\n    FROM @xml\n    WHERE tipo='E'\n    ORDER BY identidad  \n\n    OPEN INSTRUCCION\n    FETCH NEXT FROM INSTRUCCION INTO @columna, @texto, @tipodato\n\n    WHILE (@@FETCH_STATUS &lt;&gt; -1)\n     BEGIN\n        If @instruccion is not null\n            SELECT @instruccion  = @instruccion + ', '\n\n        SELECT @instruccion  = @instruccion + @columna + '=' + @texto, @instruccion2 = @instruccion2 + ', ' + @columna + ' ' + @tipodato + ' OUTPUT'\n\n        FETCH NEXT FROM INSTRUCCION INTO @columna, @texto, @tipodato\n     END\n\n    CLOSE INSTRUCCION\n    DEALLOCATE INSTRUCCION\n\n    SELECT @instruccion = @seteos + N'SELECT ' + @instruccion \n\n\n    exec sp_executesql  @instruccion, @instruccion2,@xmlParametros=@xmlParametros,\n                        @Sistema=@Sistema OUTPUT, @Caratula=@Caratula OUTPUT,\n                        @FormatoQRP=@FormatoQRP OUTPUT\n END\n\n\nIF @Sistema != 'C'\n    SELECT CENPREFI, CODCEN, NOMBRE, ADMNEGOCIOS\n    FROM dbo.CENTROSAP  (NOLOCK)\n    ORDER BY CENPREFI\nELSE\n    SELECT CENPREFI, CODCEN, NOMBRE\n    FROM dbo.CENTROSAP  (NOLOCK)\n    ORDER BY CENPREFI\nEND\n</code></pre>\n\n<p>It is necessary to obtain in both cases the result set to provide the <code>DataSource</code> defined in the RDLC report.</p>\n\n<p>Thank you so much!</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 1, "creation_date": 1546447505, "post_id": 54009995, "comment_id": 94856821, "body": "At least you have a problem with <code>strlen(s1)</code> since you don\u2019t null terminate it. You have n, use it. Otherwise, have you stepped your code through with a debugger to see what is happening?"}, {"owner": {"reputation": 2427, "user_id": 4983398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbc9ed33d775a17d6965fd2efbfe4b52?s=128&d=identicon&r=PG", "display_name": "Gardener", "link": "https://stackoverflow.com/users/4983398/gardener"}, "edited": false, "score": 0, "creation_date": 1546449886, "post_id": 54009995, "comment_id": 94857888, "body": "I am not sure why you are using malloc() and realloc().  Is this a requirement of a professor or instructor?  Can you do this without using malloc()?"}, {"owner": {"reputation": 139, "user_id": 10754202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70aab040f606f43443f0c6f9affc402a?s=128&d=identicon&r=PG&f=1", "display_name": "Rajesh Sri", "link": "https://stackoverflow.com/users/10754202/rajesh-sri"}, "edited": false, "score": 0, "creation_date": 1546493741, "post_id": 54009995, "comment_id": 94870300, "body": "I am required to use malloc ,calloc ,realloc actually !"}], "answers": [{"comments": [{"owner": {"reputation": 139, "user_id": 10754202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70aab040f606f43443f0c6f9affc402a?s=128&d=identicon&r=PG&f=1", "display_name": "Rajesh Sri", "link": "https://stackoverflow.com/users/10754202/rajesh-sri"}, "edited": false, "score": 0, "creation_date": 1546493930, "post_id": 54012522, "comment_id": 94870354, "body": "Thanks a lot man! I was really stumped due to this question . And yes i should have realized this mistake :("}, {"owner": {"reputation": 139, "user_id": 10754202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70aab040f606f43443f0c6f9affc402a?s=128&d=identicon&r=PG&f=1", "display_name": "Rajesh Sri", "link": "https://stackoverflow.com/users/10754202/rajesh-sri"}, "edited": false, "score": 0, "creation_date": 1546620904, "post_id": 54012522, "comment_id": 94921607, "body": "Thanks for guiding me. I might get used this website!"}], "tags": [], "owner": {"reputation": 3510, "user_id": 2162550, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f74689baa9af8a44163fa395c457212f?s=128&d=identicon&r=PG", "display_name": "user2162550", "link": "https://stackoverflow.com/users/2162550/user2162550"}, "is_accepted": true, "score": 0, "last_activity_date": 1546460674, "last_edit_date": 1546460674, "creation_date": 1546459700, "answer_id": 54012522, "question_id": 54009995, "link": "https://stackoverflow.com/questions/54009995/even-after-incrementing-the-value-of-the-variable-it-wont-change-in-the-while-l/54012522#54012522", "title": "Even after incrementing the value of the variable it won&#39;t change in the while loop", "body": "<p>Your <code>++k</code> (inside the <code>if</code> statement) is not needed, remove it and it will work:</p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n    #include&lt;stdlib.h&gt;\n    #include&lt;string.h&gt;\n    #include&lt;ctype.h&gt;\n    int main()\n    {\n    char s[] = \"We promptly judged antique ivory buckles for the next prize\";\n\n    for(int i=0;i&lt;strlen(s);i++)\n    {\n        s[i] = tolower(s[i]);\n    }\n    int i=0;\n    int n=2;\n    int counter =0;\n    char *s1;\n    s1=(char*)malloc(sizeof(char)*n);\n    s1[0] = s[0];\n    s1[1]='\\0';\n\n    int k=0;\n    while(s[i]!='\\0')\n    {\n\n            for( k=0;k&lt;strlen(s1);++k)\n            {\n                if(s[i] == s1[k] &amp;&amp; s[i] !=' ')\n                    ++counter;\n\n            }\n\n            if(counter==0 &amp;&amp; s[i]!=' ' )\n            {\n                ++n;\n\n              s1 = realloc(s1, sizeof(char) * (n));\n              /* ++k; */  /* &lt;== REMOVE IT */\n              printf(\"%d :  %d\\n\",n,k);\n              s1[k] = s[i];\n              s1[k+1]='\\0';\n            }\n\n\n        ++i;\n        counter =0;\n        k=0;\n    }\n    s1 =realloc(s1 , sizeof(char)*(n+1));\n    s1[n] = '\\0';\n    printf(\"%s\\n\",s1);\n\n    if(n == 26)\n    printf(\"yes\");\n    else\n    printf(\"No\");\n\n    return 0;\n}\n</code></pre>\n\n<p><code>k</code> was already incremented at the end of the <code>for</code> statement, so the <code>++k</code> later is the cause for the wrong result. Also <code>s1</code> should be initialized as <code>NULL</code> terminated, and should be kept <code>NULL</code> terminated inside the <code>if</code> statement, as without it <code>s1</code> likely to contain garbage.</p>\n"}], "owner": {"reputation": 139, "user_id": 10754202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70aab040f606f43443f0c6f9affc402a?s=128&d=identicon&r=PG&f=1", "display_name": "Rajesh Sri", "link": "https://stackoverflow.com/users/10754202/rajesh-sri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 54012522, "answer_count": 1, "score": 0, "last_activity_date": 1546460674, "creation_date": 1546447221, "last_edit_date": 1546447978, "question_id": 54009995, "link": "https://stackoverflow.com/questions/54009995/even-after-incrementing-the-value-of-the-variable-it-wont-change-in-the-while-l", "title": "Even after incrementing the value of the variable it won&#39;t change in the while loop", "body": "<pre><code>    #include &lt;stdio.h&gt;\n    #include&lt;stdlib.h&gt;\n    #include&lt;string.h&gt;\n    #include&lt;ctype.h&gt;\n    int main()\n    {\n    char s[] = \"We promptly judged antique ivory buckles for the next prize\";\n\n    for(int i=0;i&lt;strlen(s);i++)\n    {\n        s[i] = tolower(s[i]);\n    }\n    int i=0;\n    int n=1;\n    int counter =0;\n    char *s1;\n    s1=(char*)malloc(sizeof(char)*n);\n    s1[0] = s[0];\n\n    int k=0;\n    while(s[i]!='\\0')\n    {\n\n            for( k=0;k&lt;strlen(s1);++k)\n            {\n                if(s[i] == s1[k] &amp;&amp; s[i] !=' ')\n                ++counter;\n\n\n            }\n            if(counter==0 &amp;&amp; s[i]!=' ' )\n            {\n                ++n;\n\n              s1 = realloc(s1, sizeof(char) * (n));\n              ++k;\n              printf(\"%d :  %d\\n\",n,k);\n              s1[k] = s[i];\n            }\n\n\n        ++i;\n        counter =0;\n        k=0;\n    }\n    s1 =realloc(s1 , sizeof(char)*(n+1));\n    s1[n] = '\\0';\n    printf(\"%s\\n\",s1);\n\n    if(n == 26)\n    printf(\"yes\");\n    else\n    printf(\"No\");\n\n    return 0;\n}\n</code></pre>\n\n<p>This program seeks to check whether the word is  pangram or not..\nIt takes a letter from the array s and stores it in array s1 if the letter is not repeated in the latter. Thus if the length of the array s1 after the while loop finishes is 26 it has all the letters possible.\nBut when i tried printing the s1 array it shows only w has its contents..\nConfused to the extreme...</p>\n"}, {"tags": ["c++", "c", "traminer"], "answers": [{"comments": [{"owner": {"reputation": 3038, "user_id": 1586731, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/17OGA.jpg?s=128&g=1", "display_name": "Gilbert", "link": "https://stackoverflow.com/users/1586731/gilbert"}, "edited": false, "score": 0, "creation_date": 1546849602, "post_id": 54009897, "comment_id": 94974244, "body": "You also find the distancefunctions.cpp file in the src folder in the in the .tar.gz file available on the CRAN."}], "tags": [], "owner": {"reputation": 592, "user_id": 6672815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee6c8d74588b5dbf028aeed0e33b8ee5?s=128&d=identicon&r=PG&f=1", "display_name": "virgesmith", "link": "https://stackoverflow.com/users/6672815/virgesmith"}, "is_accepted": false, "score": 1, "last_activity_date": 1546446796, "creation_date": 1546446796, "answer_id": 54009897, "question_id": 54009663, "link": "https://stackoverflow.com/questions/54009663/c-cstringrefseqdistance-and-c-cstringdistance-functions-in-traminer-r-package/54009897#54009897", "title": "C_cstringrefseqdistance and C_cstringdistance functions in TraMineR R package", "body": "<p>The traminer package source is here <a href=\"https://github.com/cran/TraMineR\" rel=\"nofollow noreferrer\">https://github.com/cran/TraMineR</a></p>\n\n<p>The functions you are looking for are in this source file: <a href=\"https://github.com/cran/TraMineR/blob/8db14382ec387d32470c21edd6f473217522c241/src/distancefunctions.cpp\" rel=\"nofollow noreferrer\">https://github.com/cran/TraMineR/blob/8db14382ec387d32470c21edd6f473217522c241/src/distancefunctions.cpp</a></p>\n\n<p>Note the C_ prefix is R automagic, the C functions are actually <code>cstringrefseqdistance</code> and <code>cstringdistance</code>.</p>\n"}], "owner": {"reputation": 19, "user_id": 3284568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b697e5c675479ce919847430f2fe69be?s=128&d=identicon&r=PG&f=1", "display_name": "user3284568", "link": "https://stackoverflow.com/users/3284568/user3284568"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "closed_date": 1546447025, "answer_count": 1, "score": 1, "last_activity_date": 1546446796, "creation_date": 1546445829, "question_id": 54009663, "link": "https://stackoverflow.com/questions/54009663/c-cstringrefseqdistance-and-c-cstringdistance-functions-in-traminer-r-package", "closed_reason": "Not suitable for this site", "title": "C_cstringrefseqdistance and C_cstringdistance functions in TraMineR R package", "body": "<p>I cannot access the source codes for C_cstringrefseqdistance and C_cstringdistance C functions used by the seqdist() function in the TraMineR R package. Do you know if these source codes have been published or how I can retrieve it from the package?</p>\n\n<p>Thanks in advance for your help, best,</p>\n\n<p>t.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 168120, "user_id": 102937, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1233ec65168f4aae4d939ae8fe6cde1e?s=128&d=identicon&r=PG", "display_name": "Robert Harvey", "link": "https://stackoverflow.com/users/102937/robert-harvey"}, "edited": false, "score": 4, "creation_date": 1546444836, "post_id": 54009387, "comment_id": 94855518, "body": "Holy crap, that function really does use zero as a signaling value.  Whose idea was that?"}, {"owner": {"reputation": 4251, "user_id": 4605105, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-_cFfGx1khYs/AAAAAAAAAAI/AAAAAAAAGt0/vfQ_28nwAEE/photo.jpg?sz=128", "display_name": "&#212;rel", "link": "https://stackoverflow.com/users/4605105/%c3%94rel"}, "edited": false, "score": 2, "creation_date": 1546444861, "post_id": 54009387, "comment_id": 94855531, "body": "check if p is different from argv"}, {"owner": {"reputation": 168120, "user_id": 102937, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1233ec65168f4aae4d939ae8fe6cde1e?s=128&d=identicon&r=PG", "display_name": "Robert Harvey", "link": "https://stackoverflow.com/users/102937/robert-harvey"}, "edited": false, "score": 0, "creation_date": 1546445044, "post_id": 54009387, "comment_id": 94855632, "body": "Actually, I think zero is just the default return value if it cannot parse the string."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1546456856, "post_id": 54009387, "comment_id": 94860696, "body": "Unknown, <a href=\"https://stackoverflow.com/questions/54009387/how-to-convert-the-number-0-with-strtol#comment94855531_54009387\">@&#212;rel</a> comments correctly.  After <code>strtol(argv, &amp;p, 10)</code>, <code>if (argv == p)  perror(&quot;Conversion error&quot;);</code>"}], "answers": [{"comments": [{"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 1, "creation_date": 1546447008, "post_id": 54009415, "comment_id": 94856565, "body": "I&#39;m not sure it is required that <code>errno</code> is set when no conversion is done. The man page says: &quot;The implementation <b>may</b> also set errno to EINVAL in case no conversion was performed (no digits seen, and 0 returned).&quot; and the standard only mentions ERANGE as errno in case of over/underflow. This example doesn&#39;t set <code>errno</code> <a href=\"https://ideone.com/T3ddyH\" rel=\"nofollow noreferrer\">ideone.com/T3ddyH</a> . I think you need to compare <code>argv</code> and <code>p</code> to catch the case with no conversion"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1546457125, "post_id": 54009415, "comment_id": 94860809, "body": "The C standard has no requirements about <code>errno</code> when conversion fails (only range issues). The Linux man page is inconsistent with the C spec on this point.  Code should check <code>if (argv == p)</code> for the no conversion condition."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1546457414, "post_id": 54009415, "comment_id": 94860926, "body": "@chux The code I&#39;ve posted should account for all error cases, whether or not <code>errno is set to </code>EINVAL<code>.  It both checks </code>errno` and check that <code>p</code> points to the end of the string to test for a complete conversion."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1546466553, "post_id": 54009415, "comment_id": 94864557, "body": "If <code>errno</code> was not set by <code>strtol()</code> on a non-conversion (which is compliant with the C standard), this code would errantly not complain about <code>strtol(&quot;&quot;, &amp;p, 10);</code>"}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 4, "last_activity_date": 1546450359, "last_edit_date": 1546450359, "creation_date": 1546444835, "answer_id": 54009415, "question_id": 54009387, "link": "https://stackoverflow.com/questions/54009387/how-to-convert-the-number-0-with-strtol/54009415#54009415", "title": "How to convert the number 0 with strtol?", "body": "<p>Prior to calling  <code>strtol</code>, set <code>errno</code> to 0.  </p>\n\n<p>Then after the call, check the value of <code>errno</code>.  If it's 0, you know the call was successful.  Addtionally, you'll want to check if <code>*p</code> is 0.  If so, that means the entire string was parsed successfully with no extra characters.</p>\n\n<pre><code>errno = 0;\nlong conv = strtol(argv, &amp;p, 10);  \nif (errno)\n{\n    perror(\"Conversion error\");\n    exit(EXIT_FAILURE);\n}\nelse if (*p)\n{\n    perror(\"Not all characters converted\");\n    exit(EXIT_FAILURE);\n}\n</code></pre>\n\n<p>The <a href=\"https://linux.die.net/man/3/strtol\" rel=\"nofollow noreferrer\">man page</a> also mentions this in the \"Notes\" section:</p>\n\n<blockquote>\n  <p>Since strtol() can legitimately return 0, LONG_MAX, or LONG_MIN\n  (LLONG_MAX or LLONG_MIN for strtoll()) on both success and failure,\n  the calling\n         program  should set errno to 0 before the call, and then determine if an error occurred by checking whether errno has a nonzero\n  value after the\n         call.</p>\n</blockquote>\n"}], "owner": {"reputation": 81, "user_id": 10759547, "user_type": "registered", "profile_image": "https://graph.facebook.com/2185787468361231/picture?type=large", "display_name": "Unknown", "link": "https://stackoverflow.com/users/10759547/unknown"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 1, "closed_date": 1546444923, "accepted_answer_id": 54009415, "answer_count": 1, "score": 2, "last_activity_date": 1546450359, "creation_date": 1546444724, "last_edit_date": 1546445281, "question_id": 54009387, "link": "https://stackoverflow.com/questions/54009387/how-to-convert-the-number-0-with-strtol", "closed_reason": "Duplicate", "title": "How to convert the number 0 with strtol?", "body": "<p>I need strtol to convert some numbers from a range of [0 to 255]\nhow can I check the conversion of 0 if 0 is also a number that i need to convert?</p>\n\n<pre><code>long conv = strtol(argv, &amp;p, 10);\nif (conv == 0)\n{\n    perror(\"Conversion error\");\n    exit(EXIT_FAILURE);\n}\nif ((conv &gt;= LONG_MAX || conv &lt;= LONG_MIN) &amp;&amp; errno == 34);\n{\n    perror(\"Invalid Range!\");\n    exit(EXIT_FAILURE);\n}\n</code></pre>\n"}, {"tags": ["c", "linked-list"], "comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1546444964, "post_id": 54009295, "comment_id": 94855585, "body": "where is the definition of function: <code>ft_print()</code>?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1546445007, "post_id": 54009295, "comment_id": 94855615, "body": "when the parameters to <code>main(0</code> are not being used, then should use the signature: <code>int main( void )</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1546445320, "post_id": 54009295, "comment_id": 94855775, "body": "regarding: <code>if (!(new_node = malloc(sizeof(t_lst))))         return (0);</code>  when the call to <code>malloc()</code> fails, then a NULL pointer is returned to <code>main()</code>.  However, <code>main()</code> fails to check for that condition,  This will lead to a seg fault event.  Much better to use: <code>if (!(new_node = malloc(sizeof(t_lst)))) { perror( &quot;malloc failed&quot; );  exit( EXIT_FAILURE ); }</code> so the program exits rather than trying to continue with an unrecoverable error. The call to <code>perror()</code> also enables the error message and the text reason the system thinks the error occurred to be output to <code>stderr</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1546445875, "post_id": 54009295, "comment_id": 94856038, "body": "regarding: <code>t_lst   *new_node(char *name, int data) {     t_lst *new_node;</code> it is  a very poor programming practice to have some local variable in a function be the same name as the name of the function."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1546446670, "post_id": 54009295, "comment_id": 94856406, "body": "Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> so we can reproduce the problem, so we can help you debug it.,  Especially show what the problem is with the child"}, {"owner": {"reputation": 13, "user_id": 10767806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d662d991041117b2c3a012f399612ad8?s=128&d=identicon&r=PG&f=1", "display_name": "marlon", "link": "https://stackoverflow.com/users/10767806/marlon"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1546451041, "post_id": 54009295, "comment_id": 94858367, "body": "Hey, thanks for your help and tips. I update my post with more explanation and a picture as example."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1546451437, "post_id": 54009295, "comment_id": 94858525, "body": "<code>new_node-&gt;content = name;</code> is only working by happy accident that you are passing <i>string literals</i>, but won&#39;t work for <code>0</code>. Since <code>new_node-&gt;content</code> is type <code>char*</code>, you must assign the address for a valid block of memory (which is generally done by allocating, copying to the new block, and then assigning, but it can point to the address of a <i>string literal</i>, but not to the address of <code>0</code>, though it can be <code>NULL</code>)"}, {"owner": {"reputation": 13, "user_id": 10767806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d662d991041117b2c3a012f399612ad8?s=128&d=identicon&r=PG&f=1", "display_name": "marlon", "link": "https://stackoverflow.com/users/10767806/marlon"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1546462589, "post_id": 54009295, "comment_id": 94862992, "body": "@DavidC.Rankin thanks man, I just use strdup now to allocate the memory and in case is NULL, i just set it to NULL.  <code>if (name == NULL) \t\tnew_node-&gt;content = NULL; \telse \t\tnew_node-&gt;content = strdup(name);</code>"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1546464009, "post_id": 54009295, "comment_id": 94863568, "body": "That&#39;s a solid approach. Remember, since <code>strdup</code> allocates, you should <i>validate</i>, e.g. <code>new_node-&gt;content = strdup(name); if (!new_node-&gt;content) { &#47;* handle error *&#47; }</code>"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 10767806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d662d991041117b2c3a012f399612ad8?s=128&d=identicon&r=PG&f=1", "display_name": "marlon", "link": "https://stackoverflow.com/users/10767806/marlon"}, "edited": false, "score": 0, "creation_date": 1546462526, "post_id": 54011470, "comment_id": 94862965, "body": "Hey!  Thanks for your help man, I just found and i am going to start using local variables :D it has more logic and easy to use :)!"}], "tags": [], "owner": {"reputation": 5360, "user_id": 9435815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xaQWU.jpg?s=128&g=1", "display_name": "r3mus n0x", "link": "https://stackoverflow.com/users/9435815/r3mus-n0x"}, "is_accepted": true, "score": 0, "last_activity_date": 1546454530, "last_edit_date": 1546454530, "creation_date": 1546454121, "answer_id": 54011470, "question_id": 54009295, "link": "https://stackoverflow.com/questions/54009295/adding-information-to-child-child-linked-list/54011470#54011470", "title": "adding information to child-&gt;child LINKED LIST", "body": "<p>Your main problem is that in your second loop you are adding into the same (first) child:</p>\n\n<pre><code>for (int i = 0; i &lt; 4; i++)\n    lst_add(&amp;(root)-&gt;child-&gt;child, new_node(\"inside second child child\", i));\n//                        ^~~~~~~\n//              should be -&gt;next-&gt;child here\n</code></pre>\n\n<p>Better yet would be to take advantage of the return values of <code>add_child</code> which will make the logic a lot more clear:</p>\n\n<pre><code>t_lst *first_child = add_child(root, \"first-child\", 0);\nfor (int i = 0; i &lt; 4; i++)\n    lst_add(&amp;first_child-&gt;child, new_node(\"inside first child child\", i));\n\nt_lst *second_child = add_child(root, \"second-child\", 0);\nfor (int i = 0; i &lt; 4; i++)\n    lst_add(&amp;second_child-&gt;child, new_node(\"inside second child child\", i));\n</code></pre>\n\n<p>The other problem which you've not discovered <strong>yet</strong> is that you are modifying your lists in your <code>ft_print</code> function:</p>\n\n<pre><code>void ft_print(t_lst *root)\n{\n    while (root)\n    {\n        while (root-&gt;child)\n        {\n            ...\n            while (root-&gt;child-&gt;child)\n            {\n                ...\n                root-&gt;child-&gt;child = root-&gt;child-&gt;child-&gt;next;\n                // reassigning and effectively \"loosing\" child nodes here\n            }\n            ...\n            root-&gt;child = root-&gt;child-&gt;next;\n            // and here\n        }\n        root = root-&gt;next;\n    }\n}\n</code></pre>\n\n<p>You should use local variables for iterating through child nodes instead:</p>\n\n<pre><code>t_lst *current = root-&gt;child;\nwhile (current)\n{\n    ...\n    current = current-&gt;next;\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 10767806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d662d991041117b2c3a012f399612ad8?s=128&d=identicon&r=PG&f=1", "display_name": "marlon", "link": "https://stackoverflow.com/users/10767806/marlon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 54011470, "answer_count": 1, "score": 0, "last_activity_date": 1546454530, "creation_date": 1546444323, "last_edit_date": 1546450901, "question_id": 54009295, "link": "https://stackoverflow.com/questions/54009295/adding-information-to-child-child-linked-list", "title": "adding information to child-&gt;child LINKED LIST", "body": "<p>So I am trying to do a program with multiples child that those ones contains multiple child inside them, for example :</p>\n\n<pre><code>root = NULL.\n\n-root-&gt;child  (this one contain the first file name)\n--root-&gt;child-&gt;child  (this one contain the information inside the file)\n-root-&gt;child  (second file name)\n--root-&gt;child-&gt;child  (second file information)\n</code></pre>\n\n<p>So my main problem is putting the right information inside the child.</p>\n\n<p>So I am wondering if the way I am doing it goes with the good logic or I should start from 0 again.</p>\n\n<p>this is my structure :</p>\n\n<pre><code>typedef struct      s_lst\n{\n    char            *content; //path name \n    int             data;     //path number\n    struct s_lst    *next;\n    struct s_lst    *child;\n}                   t_lst;\n</code></pre>\n\n<p>this is my code :</p>\n\n<pre><code>int main(int ac, char **av)\n{\n    t_lst *root;\n    root = NULL;\n    root = new_node(0,0);\n    add_child(root, \"first-child\", 0);\n    for (int i = 0; i &lt; 4; i++)\n        lst_add(&amp;(root)-&gt;child-&gt;child, new_node(\"inside first child child\", i));\n    add_child(root, \"second\", 0);\n    for (int i = 0; i &lt; 4; i++)\n        lst_add(&amp;(root)-&gt;child-&gt;child, new_node(\"inside second child child\", i));\n    ft_print(root);\n}\n\nt_lst   *new_node(char *name, int data)\n{\n    t_lst *new_node;\n\n    if (!(new_node = malloc(sizeof(t_lst))))\n        return (0);\n    new_node-&gt;content = name;\n    new_node-&gt;data = data;\n    new_node-&gt;next = NULL;\n    new_node-&gt;child = NULL;\n    return (new_node);\n}\n\nt_lst   *add_sibling(t_lst *n, char *name, int data)\n{\n    if (n == NULL)\n        return (NULL);\n    while (n-&gt;next)\n        n = n-&gt;next;\n    return (n-&gt;next = new_node(name, data));\n}\n\nt_lst   *add_child(t_lst *n, char *name, int data)\n{\n    if (n == NULL)\n        return (NULL);\n\n    if (n-&gt;child)\n        return (add_sibling(n-&gt;child, name, data));\n    else\n        return (n-&gt;child = new_node(name, data));\n}\n\nvoid    lst_add(t_lst **head, t_lst *new)\n{\n    t_lst   *tmp;\n\n    if (*head)\n    {\n        tmp = *head;\n        while (tmp-&gt;next)\n            tmp = tmp-&gt;next;\n        tmp-&gt;next = new;\n    }\n    else\n        *head = new;\n}\n</code></pre>\n\n<p>ft_print :</p>\n\n<pre><code>void    ft_print(t_lst *root)\n{\n    while (root)\n    {\n        while (root-&gt;child)\n        {\n            printf(\"%s\\n\", root-&gt;child-&gt;content);\n            printf(\"-----------------------------\\n\");\n            while (root-&gt;child-&gt;child)\n            {\n                printf(\"node-&gt;child-&gt;child %s\\n\", root-&gt;child-&gt;child-&gt;content);\n                root-&gt;child-&gt;child = root-&gt;child-&gt;child-&gt;next;\n            }\n            printf(\"\\n\");\n            root-&gt;child = root-&gt;child-&gt;next;\n        }\n        root = root-&gt;next;\n    }\n}\n</code></pre>\n\n<p>also an image as example : \n<a href=\"https://i.stack.imgur.com/XKeJo.png\" rel=\"nofollow noreferrer\">here is an example what i am trying to do. As you can see the second \"text\" goes into my first child.</a>\nthanks for your help, having a hard time learning linked list :D!</p>\n"}, {"tags": ["c", "string", "char"], "comments": [{"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 0, "creation_date": 1546443124, "post_id": 54009000, "comment_id": 94854594, "body": "Could you give an example of input and expected output?"}, {"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 0, "creation_date": 1546443851, "post_id": 54009000, "comment_id": 94854962, "body": "<code>scanf(&quot;%d %c&quot;,&amp;choc_num,choc_type);</code>--&gt;<code>scanf(&quot;%d %c&quot;,&amp;choc_num, &amp;choc_type);</code>."}, {"owner": {"reputation": 1, "user_id": 10558266, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-i64cd4C9Tps/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAL9rAqab9AzvQfbR_hiPJWHkbbKQ/mo/photo.jpg?sz=128", "display_name": "Ravindra varma Kanumuri", "link": "https://stackoverflow.com/users/10558266/ravindra-varma-kanumuri"}, "edited": false, "score": 0, "creation_date": 1546444099, "post_id": 54009000, "comment_id": 94855111, "body": "input: 1 A, 3 B, 2 A     output : ABBBAA"}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1546525134, "post_id": 54009000, "comment_id": 94884324, "body": "Naming a variable &quot;String&quot; doesn&#39;t make iit one."}], "answers": [{"tags": [], "owner": {"reputation": 9095, "user_id": 8542346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11b206b49cec657d28a5876f8330780e?s=128&d=identicon&r=PG&f=1", "display_name": "H.S.", "link": "https://stackoverflow.com/users/8542346/h-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1546446197, "last_edit_date": 1546446197, "creation_date": 1546444229, "answer_id": 54009273, "question_id": 54009000, "link": "https://stackoverflow.com/questions/54009000/trying-to-assign-a-set-of-characters-to-a-string/54009273#54009273", "title": "Trying to assign a set of characters to a string", "body": "<p>You should pass the address of <code>choc_type</code> to <code>scanf()</code>:</p>\n\n<pre><code>scanf(\"%d %c\",&amp;choc_num, &amp;choc_type);\n                         ^\n</code></pre>\n\n<p>In <code>C</code>, strings are actually one-dimensional array of characters terminated by a null character <code>'\\0'</code> and you are <strong>not</strong> adding null character in <code>String</code> array after filling it. After the outer <code>for</code> loop, you should do:</p>\n\n<pre><code>String[F] = '\\0';\n</code></pre>\n\n<p>There is scope of improvement in your code like, you should do some validation of input given by user, check the <code>scanf()</code> return value etc.</p>\n"}], "owner": {"reputation": 1, "user_id": 10558266, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-i64cd4C9Tps/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAL9rAqab9AzvQfbR_hiPJWHkbbKQ/mo/photo.jpg?sz=128", "display_name": "Ravindra varma Kanumuri", "link": "https://stackoverflow.com/users/10558266/ravindra-varma-kanumuri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1546446197, "creation_date": 1546442990, "last_edit_date": 1546444708, "question_id": 54009000, "link": "https://stackoverflow.com/questions/54009000/trying-to-assign-a-set-of-characters-to-a-string", "title": "Trying to assign a set of characters to a string", "body": "<p>I am trying to store a set of A's and B's in a particular order into a string, but couldn't.</p>\n\n<pre><code>char String[100];\nchar choc_type;    \nint F=0,L,i,j,choc_num,N; //F=First, L=Last\nscanf(\"%d\",&amp;N);\nfor(i=0;i&lt;N;i++)\n{              //choc_type is 'A' or 'B' and choc_num is no.of A's or B's        \n    scanf(\"%d %c\",&amp;choc_num,&amp;choc_type);\n    L=F+choc_num;\n    for(j=F;j&lt;L;j++)\n    {\n        if(choc_type=='A')\n        String[j]='A';          //is this a right way to assign character\n        else if(choc_type=='B')\n        String[j]='B';\n     }\n     F=L;\n     L=L+choc_num;\n } \nprintf(\"%s\",String);\ngetch();\n}          \n</code></pre>\n"}, {"tags": ["c", "arrays", "string"], "comments": [{"owner": {"reputation": 915, "user_id": 3254536, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c4d61200a78c3d51c929553f2a3c5de8?s=128&d=identicon&r=PG&f=1", "display_name": "Neijwiert", "link": "https://stackoverflow.com/users/3254536/neijwiert"}, "edited": false, "score": 0, "creation_date": 1546443039, "post_id": 54008964, "comment_id": 94854558, "body": "If <code>char *</code> is a pointer to a character (array) then you could try <code>char **</code> which is a pointer to a pointer of a character (array)."}], "answers": [{"tags": [], "owner": {"reputation": 449, "user_id": 9131933, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/272423f6785184b9d180ef6a5bd16504?s=128&d=identicon&r=PG&f=1", "display_name": "newbie", "link": "https://stackoverflow.com/users/9131933/newbie"}, "is_accepted": false, "score": 0, "last_activity_date": 1546443498, "creation_date": 1546443498, "answer_id": 54009105, "question_id": 54008964, "link": "https://stackoverflow.com/questions/54008964/how-to-pass-arrays-of-strings-to-another-function-in-c/54009105#54009105", "title": "How to pass arrays of strings to another function in C", "body": "<p>In C when functions are invoked, the variables declared in that function are created on the \"stack\" and this stack is automatically deleted when the function returns. In inputAccounts you define the arrays on the stack when means they don't exist when the function returns. You ned to define the array on the \"heap\" using dynamic memory allocation such as calling \"malloc\". This will enable you to pass the address between functions.  </p>\n"}, {"tags": [], "owner": {"reputation": 3439, "user_id": 220034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2ee5c3aaab4812b216c03f81ae897b5?s=128&d=identicon&r=PG", "display_name": "Ass3mbler", "link": "https://stackoverflow.com/users/220034/ass3mbler"}, "is_accepted": true, "score": 0, "last_activity_date": 1546443712, "creation_date": 1546443712, "answer_id": 54009155, "question_id": 54008964, "link": "https://stackoverflow.com/questions/54008964/how-to-pass-arrays-of-strings-to-another-function-in-c/54009155#54009155", "title": "How to pass arrays of strings to another function in C", "body": "<p>If I don't misunderstand what you want to do, the <code>inputAccounts()</code> function should generate a single random string and the v<code>iewAllRecords()</code> function should list all the random strings generated. The array sStr is defined <strong>inside</strong> the function <code>inputAccounts()</code>, so it isn't available to the function <code>viewAllRecords()</code>. You should move the array in the global section of the code or define it static. You may try something like this:</p>\n\n<pre><code>int randomNumber(int min, int max);\nchar randomString(char *str, int randomCharCount);\n\nint numOfAccounts;\nchar sStr[50][9];       // String storage array defined globally\n\nint main()\n{\n    system(\"cls\");\n    showOptions();\n}\n\nint randomNumber(int min, int max)\n{\n    max -= min;\n    return (rand() % max) +min;\n}\n\nchar randomString(char *str, int randomCharCount)\n{\n    const char *charSet = \"abcdefghijklmnopqrstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ\";\n    int i;\n    for (i = 0; i &lt; randomCharCount; i++)\n    {\n        str[i] = charSet[randomNumber(0, 61)];\n    }\n}\n\nvoid showOptions()\n{\n    char choice;\n    system(\"cls\");\n    printf(\"System\");\n    printf(\"\\n[1] Sign up Account\");\n    printf(\"\\n[2] View Records\");\n    printf(\"\\n[3] Exit\");\n    scanf(\"%c\", &amp;choice);\n    getchar();\n    chosenOperation(choice);\n    showOptions();\n}\n\nvoid inputAccounts()\n{\n    srand(time(NULL));\n    char rStr[9] = {0};     // sStr is where the rStr are saved .\n    randomString(rStr, 8);\n    strcpy(sStr[numOfAccounts],rStr);\n    printf(\"Random String Generated: %s\\n\", sStr[numOfAccounts]);\n    numOfAccounts++;\n    getch();\n}\n\nvoid chosenOperation(char choice)\n{\n    if(choice == '1')\n    {\n        inputAccounts();\n    }\n    else if(choice == '2')\n    {\n        chooseViewType();\n    }\n    else if(choice == '3')\n    {\n        exit(0);\n    }\n}\n\nvoid viewAllRecords()\n{\n    srand(time(NULL));\n    int i = 0;  \n    system(\"cls\");\n    while(i &lt; numOfAccounts)\n    {\n        printf(\"Random String Generated: %s\\n\", sStr[i]);\n        i++;\n    }\n}\n\nvoid chooseViewType()\n{\n    system(\"cls\");\n    int choice;\n    printf(\"[1] View All Records\\n\");\n    choice = getch();\n\n    if(choice == '1')\n    {\n        viewAllRecords();\n    }\n    getch();\n}\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 10856021, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/358912fbabd31d0e99db2660201a0a6c?s=128&d=identicon&r=PG&f=1", "display_name": "ktl159", "link": "https://stackoverflow.com/users/10856021/ktl159"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 54009155, "answer_count": 2, "score": -1, "last_activity_date": 1546443712, "creation_date": 1546442863, "last_edit_date": 1546443636, "question_id": 54008964, "link": "https://stackoverflow.com/questions/54008964/how-to-pass-arrays-of-strings-to-another-function-in-c", "title": "How to pass arrays of strings to another function in C", "body": "<p>I am having a hard time figuring out how to pass the random strings I've generated from a certain function to another.</p>\n\n<p>I want the strings generated on the function <code>inputAccounts()</code> to be passed on the function <code>viewAllRecords()</code>.</p>\n\n<p>The strings generated from the function <code>inputAccounts()</code> are contained in an array and I want them to still be in an array when passed to the function <code>viewAllRecords()</code>.</p>\n\n<p>Here is my program:</p>\n\n<pre><code>int randomNumber(int min, int max);\nchar randomString(char *str, int randomCharCount);\n\nint numOfAccounts;\n\nint main()\n{\n    system(\"cls\");\n    showOptions();\n}\n\nint randomNumber(int min, int max)\n{\n    max -= min;\n    return (rand() % max) +min;\n}\n\nchar randomString(char *str, int randomCharCount)\n{\n    const char *charSet = \"abcdefghijklmnopqrstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ\";\n    int i;\n    for (i = 0; i &lt; randomCharCount; i++)\n    {\n        str[i] = charSet[randomNumber(0, 61)];\n    }\n}\n\nvoid showOptions()\n{\n    char choice;\n    system(\"cls\");\n    printf(\"System\");\n    printf(\"\\n[1] Sign up Account\");\n    printf(\"\\n[2] View Records\");\n    printf(\"\\n[3] Exit\");\n    scanf(\"%c\", &amp;choice);\n    getchar();\n    chosenOperation(choice);\n    showOptions();\n}\n\nvoid inputAccounts()\n{\n    srand(time(NULL));\n    char rStr[9] = {0};     // sStr is where the rStr are saved .\n    char sStr[50][9];       // max 50 rStr\n    randomString(rStr, 8);\n    strcpy(sStr[numOfAccounts],rStr);\n    printf(\"Random String Generated: %s\\n\", sStr[numOfAccounts]);\n    numOfAccounts++;\n    getch();\n}\n\nvoid chosenOperation(char choice)\n{\n    if(choice == '1')\n    {\n        inputAccounts();\n    }\n    else if(choice == '2')\n    {\n        chooseViewType();\n    }\n    else if(choice == '3')\n    {\n        exit(0);\n    }\n}\n\nvoid viewAllRecords()\n{\n    srand(time(NULL));\n    char rStr[9] = {0};     // sStr is where the rStr are saved .\n    char sStr[50][9];       // max 50 rStr\n    int i = 0;  \n    system(\"cls\");\n    while(i &lt; numOfAccounts)\n    {\n        randomString(rStr, 8);\n        strcpy(sStr[i],rStr);\n        printf(\"Random String Generated: %s\\n\", sStr[i]);\n        i++;\n    }\n}\n\nvoid chooseViewType()\n{\n    system(\"cls\");\n    int choice;\n    printf(\"[1] View All Records\\n\");\n    choice = getch();\n\n    if(choice == '1')\n    {\n        viewAllRecords();\n    }\n    getch();\n}\n</code></pre>\n\n<p>Please help, thank you!</p>\n"}, {"tags": ["c", "makefile", "compilation"], "comments": [{"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1546445841, "post_id": 54008827, "comment_id": 94856019, "body": "An example non-recursive make for you: <a href=\"https://stackoverflow.com/a/7321954/412080\">stackoverflow.com/a/7321954/412080</a>"}], "answers": [{"comments": [{"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1546445728, "post_id": 54009267, "comment_id": 94855958, "body": "<code>all: $(OBJDIR) $(OBJECTS)</code> breaks in parallel builds. The robust way is to have object files depend order-only on their directories. e.g. <code>%.o : %.cc | $$(@D)</code> (requires <code>.SECONDEXPANSION</code>)."}, {"owner": {"reputation": 5339, "user_id": 1714692, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/bd72cbc200eb7c9aa507624f154b21a7?s=128&d=identicon&r=PG", "display_name": "Francesco Boi", "link": "https://stackoverflow.com/users/1714692/francesco-boi"}, "edited": false, "score": 0, "creation_date": 1546450391, "post_id": 54009267, "comment_id": 94858101, "body": "<code>..&#47;server: $(OBJECTS) $(COMMON_OBJECTS)</code> is not working: it seems it is not linking properly: the error is <code>undefined reference to FunctionInCommonFile</code>"}, {"owner": {"reputation": 5339, "user_id": 1714692, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/bd72cbc200eb7c9aa507624f154b21a7?s=128&d=identicon&r=PG", "display_name": "Francesco Boi", "link": "https://stackoverflow.com/users/1714692/francesco-boi"}, "edited": false, "score": 0, "creation_date": 1546450430, "post_id": 54009267, "comment_id": 94858116, "body": "You are right about the rule in <code>common&#47;Makefile</code> though"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "reply_to_user": {"reputation": 5339, "user_id": 1714692, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/bd72cbc200eb7c9aa507624f154b21a7?s=128&d=identicon&r=PG", "display_name": "Francesco Boi", "link": "https://stackoverflow.com/users/1714692/francesco-boi"}, "edited": false, "score": 0, "creation_date": 1546450950, "post_id": 54009267, "comment_id": 94858332, "body": "@FrancescoBoi that implies you&#39;ve missed out one (or more) of the object files from common, or there is some code you&#39;ve not yet written"}], "tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": true, "score": 0, "last_activity_date": 1546444192, "creation_date": 1546444192, "answer_id": 54009267, "question_id": 54008827, "link": "https://stackoverflow.com/questions/54008827/compiling-and-linking-subfolders-using-different-makefiles/54009267#54009267", "title": "Compiling and linking subfolders using different Makefiles", "body": "<p>You don't specify any rules for building the objects in your \"common\" Makefile - this is the only rule you have.</p>\n\n<pre><code>$(OBJDIR):\n    mkdir -p $(OBJDIR)\n</code></pre>\n\n<p>You want to put a rule before that to all get it to build the objects, maybe something along the lines of:</p>\n\n<pre><code>all: $(OBJDIR) $(OBJECTS)\n</code></pre>\n\n<p>It has to go before the original rule as if you don't specify what is being built, make will do the first rule it finds.</p>\n\n<p>Including header files from \"common\" in your other directories should be working just fine by using <code>-I../common/</code>.</p>\n\n<p>Using the objects from \"common\" should just be a case of adding them to the list of objects ie:</p>\n\n<pre><code>COMMON_OBJECTS=../common/obj/utilities.o\n\n../server: $(OBJECTS) $(COMMON_OBJECTS)\n</code></pre>\n\n<p>Or having them built into a library so you don't need to know what object files there are.</p>\n\n<p>Also it's worth noting that <code>$(CXX)</code> is the variable used to store the C++ compiler - for building with the C compiler you want to be using <code>$(CC)</code> and <code>$(CFLAGS)</code>.</p>\n"}], "owner": {"reputation": 5339, "user_id": 1714692, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/bd72cbc200eb7c9aa507624f154b21a7?s=128&d=identicon&r=PG", "display_name": "Francesco Boi", "link": "https://stackoverflow.com/users/1714692/francesco-boi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 1, "accepted_answer_id": 54009267, "answer_count": 1, "score": 1, "last_activity_date": 1546444192, "creation_date": 1546442291, "last_edit_date": 1546442999, "question_id": 54008827, "link": "https://stackoverflow.com/questions/54008827/compiling-and-linking-subfolders-using-different-makefiles", "title": "Compiling and linking subfolders using different Makefiles", "body": "<p>I have a client/server application in C. The server has its own folder <code>dserver</code>, the same for the client <code>dclient</code>. Using both of them some files containing utility functions, I created another directory at the same level of the previously ones, named <code>common</code>.</p>\n\n<p>My idea is to create each <code>Makefile</code> in each subfolder (one in <code>dserver</code>, one in <code>dclient</code> and another in <code>common</code>) and then one <code>Makefile</code> in the main directory which will run the other <code>Makefiles</code> which looks like:</p>\n\n<pre><code>all:\n    +$(MAKE) -C common\n    +$(MAKE) -C dserver\n    +$(MAKE) -C dclient\n</code></pre>\n\n<p>The first problem is that the <code>common/Makefile</code> should not create an executable but only create the object files that will be needed to create the executable for the client and for the server. In my case it is:</p>\n\n<pre><code>CXX = gcc\n\nSOURCEDIR := ./\nSOURCES := $(wildcard $(SOURCEDIR)/*.c)\nOBJDIR=$(SOURCEDIR)/obj\n\nOBJECTS := $(patsubst $(SOURCEDIR)/%.c,$(OBJDIR)/%.o, $(SOURCES))\nDEPENDS := $(patsubst $(SOURCEDIR)/%.c,$(OBJDIR)/%.d, $(SOURCES))\n\n# ADD MORE WARNINGS!\nWARNING := -Wall -Wextra\n\n$(OBJDIR)/%.o: $(SOURCEDIR)/%.c Makefile | $(OBJDIR)\n    $(CXX) $(WARNING) -MMD -MP -c $&lt; -o $@\n\n$(OBJDIR):\n    mkdir -p $(OBJDIR)\n</code></pre>\n\n<p>My problem is that it is creating the object directory specified by <code>OBJDIR</code> but not the object files <code>*.o</code>: how should it be?</p>\n\n<p>Secondly in the client and server <code>Makefile</code>s I should both include path to the files in <code>common</code> and then referencing the object files in the resulting from the compilation of <code>common</code> to build the executables. So taking for example the <code>dserver/Makefile</code> I added the line <code>INC_PATH = -I../common/</code> and referencing it in the compilation as <code>$(CXX) $(WARNING) -MMD -MP -c $(INC_PATH) $&lt; -o $@</code>. However in the code I had to do <code>#include \"../common/utilities.h\"</code>. </p>\n\n<p>Is there a way to include the path in the Makefile so that in the code it allows to do just: <code>#include \"utilities.h\"</code>?</p>\n\n<p>And also, supposing that <code>common</code> has its own object directory containing the object files needed both by the client and server, how build, for example the server executable referencing the object files both in the <code>common</code> directory and the ones specific and contained in the <code>server</code> directory?</p>\n\n<p>The <code>dserver/Makefile</code> is something like (and the <code>dclient/Makefile</code> has the same structure):</p>\n\n<pre><code>CXX = gcc\n\nINC_PATH = -I../common/\n\nSOURCEDIR := ./\nSOURCES := $(wildcard $(SOURCEDIR)/*.c)\nOBJDIR=./obj\n\nOBJECTS := $(patsubst $(SOURCEDIR)/%.c,$(OBJDIR)/%.o, $(SOURCES))\nDEPENDS := $(patsubst $(SOURCEDIR)/%.c,$(OBJDIR)/%.d, $(SOURCES))\n\n# ADD MORE WARNINGS!\nWARNING := -Wall -Wextra\n\n# .PHONY means these rules get executed even if\n# files of those names exist.\n.PHONY: all clean\n\n# The first rule is the default, ie. \"make\",\n# \"make all\" and \"make parking\" mean the same\nall: server\n\nclean:\n    $(RM) $(OBJECTS) $(DEPENDS) server\n\n# Linking the executable from the object files\n# $^   # \"src.c src.h\" (all prerequisites)\n../server: $(OBJECTS)\n    $(CXX) $(WARNING) $(INC_PATH) $^ -o $@\n    #$(CXX) $(WARNING) $(CXXFLAGS) $(INC_PATH) $^ -o $@ $(LIBS)\n\n-include $(DEPENDS)\n\n$(OBJDIR):\n    mkdir -p $(OBJDIR)\n\n$(OBJDIR)/%.o: $(SOURCEDIR)/%.c Makefile | $(OBJDIR)\n    $(CXX) $(WARNING) -MMD -MP -c $(INC_PATH) $&lt; -o $@\n</code></pre>\n"}, {"tags": ["c", "visual-studio-2017", "windows-10"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 3, "creation_date": 1546441959, "post_id": 54008714, "comment_id": 94854013, "body": "<i>it breaks and becomes unusable</i> - this is not a sufficient problem description. Have you tried to run it with a debugger?"}, {"owner": {"reputation": 29, "user_id": 10700254, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FCVVR.jpg?s=128&g=1", "display_name": "B15", "link": "https://stackoverflow.com/users/10700254/b15"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1546442110, "post_id": 54008714, "comment_id": 94854090, "body": "@EugeneSh. yes but i don&#39;t seem to find the problem,sorry it breaks meaning the cursor doesn&#39;t work anymore."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1546442409, "post_id": 54008714, "comment_id": 94854234, "body": "<code>printf(format);</code> is clearly wrong - it is never right to use a calculated string with no arguments. Consider <code>fputs(format, stdout);</code>"}, {"owner": {"reputation": 29, "user_id": 10700254, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FCVVR.jpg?s=128&g=1", "display_name": "B15", "link": "https://stackoverflow.com/users/10700254/b15"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1546442712, "post_id": 54008714, "comment_id": 94854386, "body": "@AnttiHaapala thanks i&#39;ll keep that in mind"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1546442822, "post_id": 54008714, "comment_id": 94854440, "body": "i.e. if the string does not contain <code>%</code> then it is just ineffective. and if it contains a <code>%</code> then it is also wrong - and some day someone will use a string with <code>%</code>."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1546443282, "post_id": 54008714, "comment_id": 94854672, "body": "A better course of action would have been to remove the &quot;security&quot; warnings."}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 10700254, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FCVVR.jpg?s=128&g=1", "display_name": "B15", "link": "https://stackoverflow.com/users/10700254/b15"}, "edited": false, "score": 0, "creation_date": 1546444140, "post_id": 54009022, "comment_id": 94855136, "body": "sorry if i was not clear but the problem is not with the looping itself but with the <code>menu(...);</code> function not repeating.  it&#39;s cursor doesn&#39;t work any more in the second iteration of the loop (excuse my English please)."}, {"owner": {"reputation": 175, "user_id": 9805734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4ff9b2a45d9046d42dd5927c5af93d7?s=128&d=identicon&r=PG&f=1", "display_name": "Sean Monroe", "link": "https://stackoverflow.com/users/9805734/sean-monroe"}, "reply_to_user": {"reputation": 29, "user_id": 10700254, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FCVVR.jpg?s=128&g=1", "display_name": "B15", "link": "https://stackoverflow.com/users/10700254/b15"}, "edited": false, "score": 0, "creation_date": 1546444487, "post_id": 54009022, "comment_id": 94855308, "body": "Yep your edit does completely invalidate my answer. Next time, please make sure  you check the code you post to verify it replicates your problem and not another."}], "tags": [], "owner": {"reputation": 175, "user_id": 9805734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4ff9b2a45d9046d42dd5927c5af93d7?s=128&d=identicon&r=PG&f=1", "display_name": "Sean Monroe", "link": "https://stackoverflow.com/users/9805734/sean-monroe"}, "is_accepted": false, "score": 0, "last_activity_date": 1546443779, "last_edit_date": 1546443779, "creation_date": 1546443088, "answer_id": 54009022, "question_id": 54008714, "link": "https://stackoverflow.com/questions/54008714/problem-with-looping-console-menu-implementation-in-c/54009022#54009022", "title": "Problem with looping console menu implementation in C", "body": "<p>Here is a simplified form as I see it:</p>\n\n<pre><code>int main()\n{\n    int exit;\n\n    do {\n        exit = 1;\n        int response = menu(...);\n\n        switch (response)\n        {\n        case 1:\n        case 2:\n            break;\n        default:\n            exit = 0;\n        }\n\n    } while (!exit);\n\n    return 0;\n}\n</code></pre>\n\n<p>As long as <code>menu()</code> returns <code>1</code> or <code>2</code>, <code>exit == 1</code> therefore <code>(!exit) == 0</code>. This cuts the <code>do...while</code> loop short.</p>\n\n<p>I would recommend either</p>\n\n<pre><code>exit = 0;       // exit is meaningful, this means \"exit - false\"\n...\ndefault:\n    exit = 1;   // \"exit - true\"\n...\nwhile (!exit);  // while not exiting, loop\n</code></pre>\n\n<p>or</p>\n\n<pre><code>keep_looping = 1;      // you keep the original value '1' but the variable\n                       // name is meaningful; i.e. \"keep_looping - true\"\n...\ndefault:\n    keep_looping = 0;  // \"keep_looping - false\"\n...\nwhile (keep_looping);  // \"keep looping while keep_looping\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 29, "user_id": 10700254, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FCVVR.jpg?s=128&g=1", "display_name": "B15", "link": "https://stackoverflow.com/users/10700254/b15"}, "is_accepted": true, "score": 0, "last_activity_date": 1546447502, "creation_date": 1546447502, "answer_id": 54010077, "question_id": 54008714, "link": "https://stackoverflow.com/questions/54008714/problem-with-looping-console-menu-implementation-in-c/54010077#54010077", "title": "Problem with looping console menu implementation in C", "body": "<p>i added <code>_getch();</code> before looping and everything was fine again now ,why ? i don't really know but i know that this code works (i put <code>_getch();</code> before returning the value of <code>menu(...);</code> instead) :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;conio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdarg.h&gt;\n#include &lt;windows.h&gt;\n// LXSoft\n// mod: cui/menu_021\n// stdarg.h  -&gt; used for variable list of arguments (va_list, va_start ...)\n// windows.h -&gt; used for Sleep function, for *nix use unistd.h\n\ntypedef unsigned short int usint_t;\n// Menu function prototype\nint menu(char* name, char* prefix, char* cursor, usint_t orientation,\n    usint_t padding, usint_t start_pos, usint_t delay,\n    usint_t num_childs, ...);\n\nint main()\n{\n    int exit;\n    do {\n        exit = 1;\n    int response = menu(\"List des commandes\", \"-\", \"--&gt;\", 1, 3, 1, 0, 2,\n        \"1- Ajouter un etudiant (ou un ensemble d'etudiants)\",\n        \"2- exit\");\n    printf(\"\\n\");\n    switch (response)\n    {\n    case 1:\n        // doSomethingFoo1();\n        exit = 0;\n        break;\n    case 2:\n        //doSomethingFoo2();\n        exit = 1;\n        break;\n    default:\n        exit = 0;\n    }\n        printf(\"\\nYour choice is: %d\", response);\n    } while (!exit);\n    return 0;\n}\n\n// Menu implementation\nint menu\n(\n    char *name,        // Menu name (eg.: OPTIONS)\n    char *prefix,      // Menu prefix (eg.: [*])\n    char *cursor,      // Menu cursor (eg.: -&gt;)\n    usint_t orient,    /*\n                        * Menu orientation vertical or horzontal.\n                        * 0 or false for horizontal\n                        * 1 or true for vertical\n                        */\n    usint_t padding,   // Menu childrens padding (eg.: 3)\n    usint_t start_pos, // Menu set active child (eg.: 1)\n    usint_t delay,     // Menu children switch delay\n    usint_t childs,    // Number of childrens\n    ...                /*\n                        * Variable list of arguments char* type.\n                        * Name of the childrens.\n                        */\n)\n{\n    va_list args;\n    int tmp = 0, pos;\n    char chr=0;\n    usint_t opt = start_pos;\n    char* format = malloc\n    (\n        (\n            strlen(name) + strlen(prefix) + strlen(cursor) +\n            3 + /* menu suffix (1 byte) and backspace (2 bytes) */\n            (2 * childs) + /* newline (2 bytes) times childs */\n            (padding*childs) + /* number of spaces times childs */\n            childs * 60 /* children name maxlen (15 bytes) times childs*/\n            ) * sizeof(char)\n    );\n    do\n    {\n\n        if (tmp != 0)chr = _getch();\n        if (chr == 0x48 || chr == 0x4B)\n            (opt &gt; 1 &amp;&amp; opt != 1) ? opt-- : (opt = childs);\n        else if (chr == 0x50 || chr == 0x4D)\n            (opt &gt;= 1 &amp;&amp; opt != childs) ? opt++ : (opt = 1);\n        else {/* do nothing at this time*/ }\n        strcpy(format, \"\");\n        strcat(format, prefix);\n        strcat(format, name);\n        strcat(format, \":\");\n        va_start(args, childs);\n        for (tmp = 1; tmp &lt;= childs; tmp++)\n        {\n            (orient) ? strcat_s(format, SizeFormat, \"\\n\") : 0;\n            pos = padding;\n            while ((pos--) &gt; 0) strcat_s(format, SizeFormat, \" \");\n            if (tmp == opt)\n            {\n                strcat(format, \"\\b\");\n                strcat(format, cursor);\n            }\n            strcat(format, va_arg(args, char*));\n        }\n        /*if(tmp!=childs)\n        {\n            fprintf(stderr,\"%s: recieved NULL pointer argument,\"\n                           \" child not named\", __func__);\n            return -1;\n        }*/\n        Sleep(delay);\n        system(\"cls\");\n        fputs(format, stdout);\n        va_end(args);\n    } while ((chr = _getch()) != 0x0D);\n     _getch(); //THE EDIT \n    return opt;\n}\n</code></pre>\n\n<p><strong>i would love to know why if anyone knows !</strong></p>\n"}], "owner": {"reputation": 29, "user_id": 10700254, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FCVVR.jpg?s=128&g=1", "display_name": "B15", "link": "https://stackoverflow.com/users/10700254/b15"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "accepted_answer_id": 54010077, "answer_count": 2, "score": 0, "last_activity_date": 1546447502, "creation_date": 1546441830, "last_edit_date": 1546445769, "question_id": 54008714, "link": "https://stackoverflow.com/questions/54008714/problem-with-looping-console-menu-implementation-in-c", "title": "Problem with looping console menu implementation in C", "body": "<p>i was searching for a way to implement a console menu then i found this \n<a href=\"https://stackoverflow.com/questions/10571127/how-to-write-a-console-menu-in-ansi-iso-c/20700874#20700874\">an answer from LXSoft on \"How to write a console menu in ANSI/ISO C?\"</a>\nso i tried to implement it in my code using Visual studio 2017</p>\n\n<p><strong>The Code:</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;conio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdarg.h&gt;\n#include &lt;windows.h&gt;\n// LXSoft\n// mod: cui/menu_021\n// stdarg.h  -&gt; used for variable list of arguments (va_list, va_start ...)\n// windows.h -&gt; used for Sleep function, for *nix use unistd.h\n\ntypedef unsigned short int usint_t;\n// Menu function prototype\nint menu(char* name, char* prefix, char* cursor, usint_t orientation,\n    usint_t padding, usint_t start_pos, usint_t delay,\n    usint_t num_childs, ...);\n\nint main()\n{\n    int exit;\n    do {\n        exit = 1;\n    int response = menu(\"List des commandes\", \"-\", \"--&gt;\", 1, 3, 1, 0, 2,\n        \"1- Ajouter un etudiant (ou un ensemble d'etudiants)\",\n        \"2- exit\");\n    printf(\"\\n\");\n    switch (response)\n    {\n    case 1:\n        // doSomethingFoo1();\n        exit = 0;\n        break;\n    case 2:\n        //doSomethingFoo2();\n        exit = 1;\n        break;\n    default:\n        exit = 0;\n    }\n        printf(\"\\nYour choice is: %d\", response);\n    } while (!exit);\n    return 0;\n}\n\n// Menu implementation\nint menu\n(\n    char *name,        // Menu name (eg.: OPTIONS)\n    char *prefix,      // Menu prefix (eg.: [*])\n    char *cursor,      // Menu cursor (eg.: -&gt;)\n    usint_t orient,    /*\n                        * Menu orientation vertical or horzontal.\n                        * 0 or false for horizontal\n                        * 1 or true for vertical\n                        */\n    usint_t padding,   // Menu childrens padding (eg.: 3)\n    usint_t start_pos, // Menu set active child (eg.: 1)\n    usint_t delay,     // Menu children switch delay\n    usint_t childs,    // Number of childrens\n    ...                /*\n                        * Variable list of arguments char* type.\n                        * Name of the childrens.\n                        */\n)\n{\n    va_list args;\n    int tmp = 0, pos;\n    char chr=0;\n    usint_t opt = start_pos;\n    char* format = malloc\n    (\n        (\n            strlen(name) + strlen(prefix) + strlen(cursor) +\n            3 + /* menu suffix (1 byte) and backspace (2 bytes) */\n            (2 * childs) + /* newline (2 bytes) times childs */\n            (padding*childs) + /* number of spaces times childs */\n            childs * 60 /* children name maxlen (15 bytes) times childs*/\n            ) * sizeof(char)\n    );\n    do\n    {\n\n        if (tmp != 0)chr = _getch();\n        if (chr == 0x48 || chr == 0x4B)\n            (opt &gt; 1 &amp;&amp; opt != 1) ? opt-- : (opt = childs);\n        else if (chr == 0x50 || chr == 0x4D)\n            (opt &gt;= 1 &amp;&amp; opt != childs) ? opt++ : (opt = 1);\n        else {/* do nothing at this time*/ }\n        strcpy(format, \"\");\n        strcat(format, prefix);\n        strcat(format, name);\n        strcat(format, \":\");\n        va_start(args, childs);\n        for (tmp = 1; tmp &lt;= childs; tmp++)\n        {\n            (orient) ? strcat_s(format, SizeFormat, \"\\n\") : 0;\n            pos = padding;\n            while ((pos--) &gt; 0) strcat_s(format, SizeFormat, \" \");\n            if (tmp == opt)\n            {\n                strcat(format, \"\\b\");\n                strcat(format, cursor);\n            }\n            strcat(format, va_arg(args, char*));\n        }\n        /*if(tmp!=childs)\n        {\n            fprintf(stderr,\"%s: recieved NULL pointer argument,\"\n                           \" child not named\", __func__);\n            return -1;\n        }*/\n        Sleep(delay);\n        system(\"cls\");\n        fputs(format, stdout);\n        va_end(args);\n    } while ((chr = _getch()) != 0x0D);\n    return opt;\n}\n</code></pre>\n\n<p>and it worked fine but it seems i can't call the function \"menu\" more than one time(case1:), because i tried to loop it but it breaks and becomes unusable in other words i can't use the cursor anymore.<strong>(the code was EDITED for more Simplicity)</strong></p>\n\n<p><strong>Am i doing something stupid and wrong ?</strong></p>\n\n<p><strong>Or is it impossible to loop ? if not How so ?</strong></p>\n\n<p>thanks in advance</p>\n\n<p><strong>EDIT:</strong>\ni found using debugger that <code>if (tmp != 0)chr = _getch();</code>\ndosen't give the proper input value when clicking the arrow key after the first iteration of the loop.\n<strong>Why is that ?</strong></p>\n"}, {"tags": ["c", "pointers", "matrix"], "comments": [{"owner": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "edited": false, "score": 0, "creation_date": 1546447786, "post_id": 54008454, "comment_id": 94856966, "body": "Welcome to SO! How do you define &quot;smallest column&quot;? Is this the sum of the column, the count of elements in the column or index number of the column (i.e. <code>j</code>)?"}], "answers": [{"comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1546443012, "post_id": 54008982, "comment_id": 94854542, "body": "why couldn&#39;t it be double?!"}, {"owner": {"reputation": 1404, "user_id": 7671328, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6gynE.jpg?s=128&g=1", "display_name": "Yunbin Liu", "link": "https://stackoverflow.com/users/7671328/yunbin-liu"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1546443090, "post_id": 54008982, "comment_id": 94854576, "body": "@AnttiHaapala Because use <code>a[i][j] != 0</code>"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1546443194, "post_id": 54008982, "comment_id": 94854628, "body": "that works almost equally well with double... in any case <code>int a[][M]</code> is equivalent to <code>int (*a)[M]</code> as a function parameter."}, {"owner": {"reputation": 1404, "user_id": 7671328, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6gynE.jpg?s=128&g=1", "display_name": "Yunbin Liu", "link": "https://stackoverflow.com/users/7671328/yunbin-liu"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1546443458, "post_id": 54008982, "comment_id": 94854768, "body": "I think that for double should use like <code>a[i][j] &lt;= ... &amp;&amp; a[i][j] &gt;= ...</code>"}], "tags": [], "owner": {"reputation": 1404, "user_id": 7671328, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6gynE.jpg?s=128&g=1", "display_name": "Yunbin Liu", "link": "https://stackoverflow.com/users/7671328/yunbin-liu"}, "is_accepted": true, "score": 0, "last_activity_date": 1546442952, "creation_date": 1546442952, "answer_id": 54008982, "question_id": 54008454, "link": "https://stackoverflow.com/questions/54008454/finding-the-leading-element-in-a-matrix-that-has-the-smallest-column-number/54008982#54008982", "title": "Finding the leading element in a matrix that has the smallest column number", "body": "<p>The line <code>double a[][M]</code> should be <code>int (*a)[3]</code></p>\n\n<p>You can check each element from <code>a[0][0]</code>, <code>a[1][0]</code>, <code>a[2][0]</code>, <code>a[0][1]</code>, ..... until <code>a[i][j] != 0</code> or end</p>\n\n<p>The following <code>code</code> could work:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdbool.h&gt;\n\nbool find_leading_elements(int (*a)[3], int n, int m, int* row, int* col) {\n  for (int j = 0; j != m; ++j)\n    for (int i = 0; i != n; ++i)\n      if (a[i][j] != 0) {\n        *row = i;\n        *col = j;\n        return true;\n      }\n  return false;\n}\n\nint main() {\n  int a[3][3] = {\n    {0, 2, 2},\n    {2, 3, 5},\n    {0, 2, 5}\n  };\n  int row;\n  int col;\n  if (find_leading_elements(a, 3, 3, &amp;row, &amp;col))\n    printf(\"row= %d col = %d \\n\", row, col);\n  else\n    printf(\"No answer\\n\");\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 10718257, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-vBZCgHniIC0/AAAAAAAAAAI/AAAAAAAAB7M/XCHDz5vHg38/photo.jpg?sz=128", "display_name": "Mary Tim", "link": "https://stackoverflow.com/users/10718257/mary-tim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 54008982, "answer_count": 1, "score": -1, "last_activity_date": 1546447559, "creation_date": 1546440806, "last_edit_date": 1546447559, "question_id": 54008454, "link": "https://stackoverflow.com/questions/54008454/finding-the-leading-element-in-a-matrix-that-has-the-smallest-column-number", "title": "Finding the leading element in a matrix that has the smallest column number", "body": "<p>I need to find the first leading element (the first number in a row that is different from 0) that is in the smallest column.</p>\n\n<p>For example, in the matrix <code>{(0, 2, 2), (2, 3, 5), (0, 2, 5)}</code>, the leading element is 2: second row, first column.</p>\n\n<p>In the matrix <code>{(0, 0, 6), (0, 0, 5), (0, 0, 2)}</code>, the leading element is 6.</p>\n\n<pre><code>bool find_leading_elements(double a[][M], int n, int m, int *row, int *column) {\n    int i, j, first_j = 0, count = 0;\n\n    for (i = 0; i &lt; n; i++) {\n        for (j = 0; j &lt; m; j++) {\n            if (a[i][j] != 0)\n                first_j = min(first_j, j);\n            else \n                count++;\n        }\n    }\n\n    if (count == n * m)\n        return false;\n    else {\n        *row = i;\n        *column = first_j;\n        return true;\n    }\n}\n</code></pre>\n\n<p>I wrote this code which correctly gives me the smallest column, but I'm not sure how to get the right row. Do you have any suggestions? </p>\n\n<p><em>Note:</em> at <code>min(first_j, j)</code>, <code>min</code> is just a function that gives me the smallest column every time I find a place that doesn't have a zero.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 2, "creation_date": 1546440933, "post_id": 54008387, "comment_id": 94853464, "body": "Looks quite good; where exactly parameters and return values are passed is defined by the ABI of the platform. On many platforms the result of a function is for example not pushed on the stack, but passed in a register. Or the first three arguments are passed in registers, anything in excess is put on the stack... And so on..."}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 4, "creation_date": 1546440957, "post_id": 54008387, "comment_id": 94853476, "body": "Too short to be an answer, but it&#39;s up to the calling convention for the function. In C, you can pass any number of parameters to a function, so generally caller is responsible for restoring stack pointer after the call. As for returned values, that depends on calling convention too. Note that C standard itself doesn&#39;t even specify &quot;stack&quot;, it&#39;s just what most platforms have and is the usual way to pass and return values which don&#39;t fit to registers."}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 2, "creation_date": 1546441130, "post_id": 54008387, "comment_id": 94853570, "body": "One way to investigate what <i>your</i> compiler does, is to write different functions and call them in C code, then ask compiler to produce assembly code (or run under debugger and use its disassembler). Just be sure to turn off all optimisations, or the code might be hard to understand and might do unexpected things (inline function calls, eliminate code which has no effect, then reorder the assembly instructions, etc)."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1546441186, "post_id": 54008387, "comment_id": 94853609, "body": "A C compiler is allowed to optimize to the point that it does not use any call stack (per the <a href=\"https://en.wikipedia.org/wiki/As-if_rule\" rel=\"nofollow noreferrer\">as-if rule</a>). BTW, on most systems, some arguments are passed in registers (so not pushed on the stack). Read about <a href=\"https://en.wikipedia.org/wiki/Calling_convention\" rel=\"nofollow noreferrer\">calling conventions</a>"}, {"owner": {"reputation": 2999, "user_id": 7520531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0107497596782a18d4a853214a883546?s=128&d=identicon&r=PG&f=1", "display_name": "Jose", "link": "https://stackoverflow.com/users/7520531/jose"}, "edited": false, "score": 1, "creation_date": 1546441665, "post_id": 54008387, "comment_id": 94853876, "body": "Regarding the variables on the top of the function, it was the convention in the past, no because of the stack."}, {"owner": {"reputation": 22312, "user_id": 463758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/105689a9cb392f18c1d0b27ed0cf657f?s=128&d=identicon&r=PG&f=1", "display_name": "balki", "link": "https://stackoverflow.com/users/463758/balki"}, "edited": false, "score": 1, "creation_date": 1546442892, "post_id": 54008387, "comment_id": 94854491, "body": "you might like <a href=\"https://godbolt.org\" rel=\"nofollow noreferrer\">godbolt.org</a> to experiment with assembly"}], "answers": [{"comments": [{"owner": {"reputation": 29848, "user_id": 5958455, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lBWIE.png?s=128&g=1", "display_name": "iBug", "link": "https://stackoverflow.com/users/5958455/ibug"}, "edited": false, "score": 0, "creation_date": 1546442259, "post_id": 54008728, "comment_id": 94854161, "body": "Note in 64-bit: First 6 arguments are passed in registers <code>rdi</code>, <code>rsi</code>, <code>rdx</code>, <code>rcx</code>, <code>r8</code>, <code>r9</code>. The rest are pushed onto the stack, starting from the 7th argument."}, {"owner": {"reputation": 5181, "user_id": 5529197, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6af647bacfb3f0b596c73b0e3b0dc4b1?s=128&d=identicon&r=PG&f=1", "display_name": "Afshin", "link": "https://stackoverflow.com/users/5529197/afshin"}, "reply_to_user": {"reputation": 29848, "user_id": 5958455, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lBWIE.png?s=128&g=1", "display_name": "iBug", "link": "https://stackoverflow.com/users/5958455/ibug"}, "edited": false, "score": 0, "creation_date": 1546442373, "post_id": 54008728, "comment_id": 94854214, "body": "@iBug I had <code>normally never</code> because I meant it is rare to have 7+ arguments... :D But I will add that too."}, {"owner": {"reputation": 5181, "user_id": 5529197, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6af647bacfb3f0b596c73b0e3b0dc4b1?s=128&d=identicon&r=PG&f=1", "display_name": "Afshin", "link": "https://stackoverflow.com/users/5529197/afshin"}, "reply_to_user": {"reputation": 29848, "user_id": 5958455, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lBWIE.png?s=128&g=1", "display_name": "iBug", "link": "https://stackoverflow.com/users/5958455/ibug"}, "edited": false, "score": 0, "creation_date": 1546442624, "post_id": 54008728, "comment_id": 94854332, "body": "@iBug btw, where did you see 7th? I though it was 5th and I checked and it was like that in microsoft x64 calling convention."}, {"owner": {"reputation": 29848, "user_id": 5958455, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lBWIE.png?s=128&g=1", "display_name": "iBug", "link": "https://stackoverflow.com/users/5958455/ibug"}, "edited": false, "score": 0, "creation_date": 1546442672, "post_id": 54008728, "comment_id": 94854356, "body": "Oh, it was unclear after all. I was right looking at the System V ABI for x86-64."}, {"owner": {"reputation": 554, "user_id": 1770034, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/94179b72a263c9a963250f164a4b2371?s=128&d=identicon&r=PG", "display_name": "Questionable", "link": "https://stackoverflow.com/users/1770034/questionable"}, "edited": false, "score": 0, "creation_date": 1546442936, "post_id": 54008728, "comment_id": 94854510, "body": "Thanks, this is awesome! One question I have is that line 4 says it is reserving memory for local variables. Why does it reserve 16 more bytes when d and e are using only 8 total?"}, {"owner": {"reputation": 5181, "user_id": 5529197, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6af647bacfb3f0b596c73b0e3b0dc4b1?s=128&d=identicon&r=PG&f=1", "display_name": "Afshin", "link": "https://stackoverflow.com/users/5529197/afshin"}, "reply_to_user": {"reputation": 554, "user_id": 1770034, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/94179b72a263c9a963250f164a4b2371?s=128&d=identicon&r=PG", "display_name": "Questionable", "link": "https://stackoverflow.com/users/1770034/questionable"}, "edited": false, "score": 1, "creation_date": 1546444414, "post_id": 54008728, "comment_id": 94855272, "body": "@Questionable stack size is aligned on specific boundries. if you add 2 more int too, instruction is still <code>add esp,16</code>, but if you add 3rd one, it becomes <code>add esp,32</code>."}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1546444942, "post_id": 54008728, "comment_id": 94855571, "body": "You could qualify &quot;default calling convention&quot; a bit more at the start (especially since you have bolded it), as there is really no default. I mean like, default calling convention of <i>what</i> platform or ABI?"}, {"owner": {"reputation": 5181, "user_id": 5529197, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6af647bacfb3f0b596c73b0e3b0dc4b1?s=128&d=identicon&r=PG&f=1", "display_name": "Afshin", "link": "https://stackoverflow.com/users/5529197/afshin"}, "reply_to_user": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1546445299, "post_id": 54008728, "comment_id": 94855768, "body": "@hyde I meant for x86. All famous compilers compile like that for x86 at least. From default,I meant without any compiler option."}, {"owner": {"reputation": 5181, "user_id": 5529197, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6af647bacfb3f0b596c73b0e3b0dc4b1?s=128&d=identicon&r=PG&f=1", "display_name": "Afshin", "link": "https://stackoverflow.com/users/5529197/afshin"}, "reply_to_user": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1546445411, "post_id": 54008728, "comment_id": 94855810, "body": "@hyde even though if you compile code as <code>stdcall</code>, it releases stack in function."}], "tags": [], "owner": {"reputation": 5181, "user_id": 5529197, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6af647bacfb3f0b596c73b0e3b0dc4b1?s=128&d=identicon&r=PG&f=1", "display_name": "Afshin", "link": "https://stackoverflow.com/users/5529197/afshin"}, "is_accepted": true, "score": 1, "last_activity_date": 1546445899, "last_edit_date": 1546445899, "creation_date": 1546441914, "answer_id": 54008728, "question_id": 54008387, "link": "https://stackoverflow.com/questions/54008387/how-is-the-stack-unwound-and-stack-frames-identified/54008728#54008728", "title": "How is the stack unwound and stack frames identified", "body": "<p><strong>In default calling convention</strong> for <code>C</code>, caller frees function argument after return from function. But function itself manages its own variables on stack. For example here is your code in assembly without any optimization:</p>\n\n<pre><code>my_func:\n  push ebp                      // +\n  mov ebp, esp                  // These 2 lines prepare function stack\n  sub esp, 16                   // reserve memory for local variables\n  mov DWORD PTR [ebp-4], 0\n  mov DWORD PTR [ebp-8], 0\n  mov edx, DWORD PTR [ebp-8]\n  mov eax, DWORD PTR [ebp-4]\n  add eax, edx                  // &lt;--return value in eax\n  leave                         // return esp to what it was at start of function\n  ret                           // return to caller\nmain:\n  push ebp\n  mov ebp, esp\n  push 3\n  push 2\n  push 1\n  call my_func\n  add esp, 12                   // &lt;- return esp to what it was before pushing arguments\n  mov eax, 0\n  leave\n  ret\n</code></pre>\n\n<p>As you see, there is a <code>add esp, 12</code> in <code>main</code> for returning <code>esp</code> as it was before pushing arguments. In <code>my_func</code> there is a pair like this:</p>\n\n<pre><code>  push ebp\n  mov ebp, esp\n  sub esp, 16 // &lt;--- size of stack\n  ...\n  leave\n  ret\n</code></pre>\n\n<p>This pair set is used for reserving some memory as stack. <code>leave</code> reverses the effect of <code>push ebp/move ebp,esp</code>. And function used <code>ebp</code> for accessing its arguments and stack-allocated variables. Return value is always in <code>eax</code>.</p>\n\n<p><strong>A quick allocated stack size note:</strong> \nAs you see, in function, there is a <code>add esp, 16</code> instruction even though you only keep 2 variable of type <code>int</code> on stack which has a total size of 8 bytes. It is because stack size is aligned to specific boundaries (At least with default compile options). If you add 2 more <code>int</code> variables to <code>my_func</code>, this instruction is still <code>add esp, 16</code>, because total stack is still in 16 byte alignment. But if you add a 3rd variable of <code>int</code>, this instruction becomes <code>add esp, 32</code>. This alignment can be configured by <code>-mpreferred-stack-boundary</code> option in <code>GCC</code>.</p>\n\n<p>By the way, all of these are for 32-bit compilation of code.In contrast, you normally never pass argument via stack pushing in 64-bit and you pass them through registers. As mentioned in comment, in 64-bit arguments are only passed through stack starting 5th argument<a href=\"https://en.wikipedia.org/wiki/X86_calling_conventions#x86-64_calling_conventions\" rel=\"nofollow noreferrer\">(on microsoft x64 calling convention</a>).</p>\n\n<p><strong>Update:</strong></p>\n\n<p>From <strong>default calling convention</strong>, In mean <code>cdecl</code> which is normally used  when you compile your code for x86, without any compiler options or specific function attributes. If you change function call to <code>stdcall</code> as an example, all these will change.</p>\n"}], "owner": {"reputation": 554, "user_id": 1770034, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/94179b72a263c9a963250f164a4b2371?s=128&d=identicon&r=PG", "display_name": "Questionable", "link": "https://stackoverflow.com/users/1770034/questionable"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 54008728, "answer_count": 1, "score": 1, "last_activity_date": 1546445899, "creation_date": 1546440535, "question_id": 54008387, "link": "https://stackoverflow.com/questions/54008387/how-is-the-stack-unwound-and-stack-frames-identified", "title": "How is the stack unwound and stack frames identified", "body": "<p>Let's say I have this simple program in C.</p>\n\n<pre><code>int my_func(int a, int b, int c) //0x4000\n{\n    int d = 0;\n    int e = 0;\n    return e+d;\n}\n\nint main()\n{\n    my_func(1,2,3); // 0x5000\n    return 0;\n}\n</code></pre>\n\n<p>Ignoring the fact that it is essentially all dead code which can be completely optimized away. We'll say that my_func() lives at address 0x4000 and it is being called at address 0x5000.</p>\n\n<p>From my understanding, a c compiler (I understand they can operate differently by vendor) may:</p>\n\n<ul>\n<li>push c to the stack</li>\n<li>push b to the stack</li>\n<li>push a to the stack</li>\n<li>push 0x5000 to the stack (return address)</li>\n<li>call 0x4000</li>\n</ul>\n\n<p>Then I'm assuming to access a it uses sp (stack pointer) + 1. b is sp+2 and c is sp+3.</p>\n\n<p>Since d and e are on the stack, I'm guessing our stack would now look like this?</p>\n\n<ul>\n<li>c</li>\n<li>b</li>\n<li>a</li>\n<li>0x5000</li>\n<li>d</li>\n<li>e</li>\n</ul>\n\n<p>When we get to the end of the function.</p>\n\n<ul>\n<li>Does it then pop e and d off the stack?</li>\n<li>Then... push e+d? Or save it to a register to be used after return?</li>\n<li>Return to 0x5000 because it's the top of the stack?</li>\n<li>Then pop the return address (0x5000) and a, b and c?</li>\n</ul>\n\n<p>I'm guessing this is why old c required all the variables to be declared at the top of a function so that the compiler could count the number of pops it needed to perform at the end of the function?</p>\n\n<p>I understand that it could have stored 0x5000 in a register, but a C program is able to go multiple levels deep into many functions and there are only so many registers...</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c", "arduino"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1546440295, "post_id": 54008315, "comment_id": 94853190, "body": "You can divide by 10 and use one decimal point of precision..what&#39;s the problem?"}, {"owner": {"reputation": 1243, "user_id": 1678652, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/7c7d49dc20caa98ad8877fc502a88789?s=128&d=identicon&r=PG", "display_name": "Leif Neland", "link": "https://stackoverflow.com/users/1678652/leif-neland"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1546565377, "post_id": 54008315, "comment_id": 94900248, "body": "123/10 = 12. printf(&quot;%01f&quot;,123/10) = 0.0"}], "answers": [{"comments": [{"owner": {"reputation": 1243, "user_id": 1678652, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/7c7d49dc20caa98ad8877fc502a88789?s=128&d=identicon&r=PG", "display_name": "Leif Neland", "link": "https://stackoverflow.com/users/1678652/leif-neland"}, "edited": false, "score": 0, "creation_date": 1546561822, "post_id": 54008405, "comment_id": 94899577, "body": "This is using division, which was trying to avoid."}, {"owner": {"reputation": 1351, "user_id": 7326901, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CgLWO.png?s=128&g=1", "display_name": "Gambit Support", "link": "https://stackoverflow.com/users/7326901/gambit-support"}, "reply_to_user": {"reputation": 1243, "user_id": 1678652, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/7c7d49dc20caa98ad8877fc502a88789?s=128&d=identicon&r=PG", "display_name": "Leif Neland", "link": "https://stackoverflow.com/users/1678652/leif-neland"}, "edited": false, "score": 0, "creation_date": 1546609552, "post_id": 54008405, "comment_id": 94915224, "body": "Integer division != floating point division. You can test it, probably 100 times faster. Give a better suggestion, please."}], "tags": [], "owner": {"reputation": 1351, "user_id": 7326901, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CgLWO.png?s=128&g=1", "display_name": "Gambit Support", "link": "https://stackoverflow.com/users/7326901/gambit-support"}, "is_accepted": false, "score": 0, "last_activity_date": 1546496755, "last_edit_date": 1546496755, "creation_date": 1546440618, "answer_id": 54008405, "question_id": 54008315, "link": "https://stackoverflow.com/questions/54008315/sprintf-scaling-integers-123-print-as-12-3/54008405#54008405", "title": "sprintf scaling integers. 123 print as 12,3", "body": "<pre><code>snprintf (dest, len, \"%3d.%01d\", 123/10, 123%10)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1546441183, "post_id": 54008497, "comment_id": 94853608, "body": "<code>int n = snprintf(dest, len, &quot;%d.&quot;, 123); dest[n - 1] = dest[n - 2] ; dest[n - 2] = &#39;.&#39;;</code> you save one line :-)"}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "reply_to_user": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1546441367, "post_id": 54008497, "comment_id": 94853708, "body": "Good idea, @bruno. Incorporated into my answer, thanks."}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1546441440, "post_id": 54008497, "comment_id": 94853754, "body": "I was about to answer with that when I saw you did ;-)"}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1546441792, "post_id": 54008497, "comment_id": 94853939, "body": "is sad a swap char (inline) doesn&#39;t exist, else save again a line <code>int n = snprintf(dest, len, &quot;%d.&quot;, 123); swap(dest + n - 1, dest + n - 2);</code>"}], "tags": [], "owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "is_accepted": false, "score": 1, "last_activity_date": 1546441485, "last_edit_date": 1546441485, "creation_date": 1546440995, "answer_id": 54008497, "question_id": 54008315, "link": "https://stackoverflow.com/questions/54008315/sprintf-scaling-integers-123-print-as-12-3/54008497#54008497", "title": "sprintf scaling integers. 123 print as 12,3", "body": "<p>Make sure you have enough space in <code>dest</code>!</p>\n\n<pre><code>int n = snprintf(dest, len, \"%d\", 123);\ndest[n + 1] = 0;\ndest[n] = dest[n - 1];\ndest[n - 1] = '.';\n</code></pre>\n\n<p>or, saving one line of code (thanks to @bruno)</p>\n\n<pre><code>int n = snprintf(dest, len, \"%d#\", 123);\ndest[n - 1] = dest[n - 2];\ndest[n - 2] = '.';\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "is_accepted": false, "score": 0, "last_activity_date": 1546567697, "last_edit_date": 1546567697, "creation_date": 1546567245, "answer_id": 54032248, "question_id": 54008315, "link": "https://stackoverflow.com/questions/54008315/sprintf-scaling-integers-123-print-as-12-3/54032248#54032248", "title": "sprintf scaling integers. 123 print as 12,3", "body": "<p>Note that with <code>fprint(\"%0.2f\",123/10)</code> OP code has undefined behavior due to a mismatch between the <code>double</code> type expected by the <code>%f</code> conversion specifier and the <code>int</code> value <code>123/10</code>.</p>\n\n<p>Integer division is well-defined and does not suffer from rounding errors. The C Standard Library provides the <a href=\"https://port70.net/~nsz/c/c11/n1570.html#7.22.6.2\" rel=\"nofollow noreferrer\"><code>div(), ldiv(), and lldiv()</code></a> functions to compute integer division and remainder values in a single operation, so why not take advantage?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(void)\n{\n    for (int i = 0; i &lt; 1010; i += 500) {\n        for (int j = 0; j &lt; 10; j++) {\n            int num = i + j;\n            div_t val = div(num, 10);\n            printf(\"%d --&gt; %d.%d\\n\", num, val.quot, val.rem);\n        }\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Program output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>0 --&gt; 0.0\n1 --&gt; 0.1\n2 --&gt; 0.2\n3 --&gt; 0.3\n4 --&gt; 0.4\n5 --&gt; 0.5\n6 --&gt; 0.6\n7 --&gt; 0.7\n8 --&gt; 0.8\n9 --&gt; 0.9\n500 --&gt; 50.0\n501 --&gt; 50.1\n502 --&gt; 50.2\n503 --&gt; 50.3\n504 --&gt; 50.4\n505 --&gt; 50.5\n506 --&gt; 50.6\n507 --&gt; 50.7\n508 --&gt; 50.8\n509 --&gt; 50.9\n1000 --&gt; 100.0\n1001 --&gt; 100.1\n1002 --&gt; 100.2\n1003 --&gt; 100.3\n1004 --&gt; 100.4\n1005 --&gt; 100.5\n1006 --&gt; 100.6\n1007 --&gt; 100.7\n1008 --&gt; 100.8\n1009 --&gt; 100.9\n</code></pre>\n"}], "owner": {"reputation": 1243, "user_id": 1678652, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/7c7d49dc20caa98ad8877fc502a88789?s=128&d=identicon&r=PG", "display_name": "Leif Neland", "link": "https://stackoverflow.com/users/1678652/leif-neland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "answer_count": 3, "score": -4, "last_activity_date": 1546567697, "creation_date": 1546440201, "last_edit_date": 1546565533, "question_id": 54008315, "link": "https://stackoverflow.com/questions/54008315/sprintf-scaling-integers-123-print-as-12-3", "title": "sprintf scaling integers. 123 print as 12,3", "body": "<p>I have an integer, representing tenths. \nInstead of dividing by 10, thereby introducing rounding errors (and wasting time), is there a quick way of adding a decimal point before the last digit?</p>\n\n<p>Some magic like</p>\n\n<pre><code>snprintf(dest,len,\"%d4.-1\", 123) resulting in 12.3\n</code></pre>\n\n<p>The reason is to avoid rounding errors, for instance in money, where the amount is calculated internally as integer cents, not fractions of \u00a3, \u20ac or $.</p>\n\n<p>If I remember my COBOL correctly, here it is possible to specify a format like 9,990.00 which makes 1234 be printed as 12.34 and 1 as 0.01.</p>\n\n\n\n<pre><code>void setup() {\n  Serial.begin(115200);\n  delay(1000);\n  uint16_t i16 = 0;\n  float f = 998;\n  for (i16 = 998; i16 &lt; 1011; i16++) {\n    Serial.print(i16 / 1000);\n    Serial.print(\" \");\n    Serial.print(f / 1000);\n    Serial.printf(\"  %0.3f %0.3f %0.7f\\n\",i16/1000,f/1000,f/1000);\n    f = f + 1;\n  }\n}\n</code></pre>\n\n<p>An int / 10 is still an int, so 123/10 = 12.</p>\n\n<p>Strangely <code>fprint(\"%0.2f\",123/10)</code> prints <code>0.00</code></p>\n\n<p><code>\n0 1.00  0.000 0.998 0.9980000\n0 1.00  0.000 0.999 0.9990000\n1 1.00  0.000 1.000 1.0000000\n1 1.00  0.000 1.001 1.0010000\n1 1.00  0.000 1.002 1.0020000\n1 1.00  0.000 1.003 1.0030000\n1 1.00  0.000 1.004 1.0039999  &lt;--- Rounding error\n1 1.00  0.000 1.005 1.0050000\n1 1.01  0.000 1.006 1.0060000\n1 1.01  0.000 1.007 1.0070000\n1 1.01  0.000 1.008 1.0080000\n1 1.01  0.000 1.009 1.0089999  &lt;--- Rounding error \n1 1.01  0.000 1.010 1.0100000\n</code></p>\n\n<p>a %0.6f does not give rounding errors, but %0.7f does.</p>\n\n<p>So for doing fractional ints, it would have been nice to have an integer format with a decimal point shifted in.   </p>\n\n<p>Using floats can give some funny results sometimes, just yesterday I saw \"The water is expected to rise between 10.000000002 and 12 feet\".</p>\n"}, {"tags": ["c", "pointers", "linux-kernel", "linux-device-driver"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1546439520, "post_id": 54008138, "comment_id": 94852820, "body": "Tangential but I assume the author meant to write <i>&quot;the first <b>argument</b> of container_of&quot;</i>"}, {"owner": {"reputation": 6795, "user_id": 1460665, "user_type": "registered", "accept_rate": 39, "profile_image": "https://i.stack.imgur.com/o8b6s.jpg?s=128&g=1", "display_name": "Insane Coder", "link": "https://stackoverflow.com/users/1460665/insane-coder"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1546439587, "post_id": 54008138, "comment_id": 94852858, "body": "yes even I understand that, but still I don&#39;t understand why?"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 1, "creation_date": 1546530843, "post_id": 54008138, "comment_id": 94887610, "body": "There were changes to <code>container_of</code> in kernel version 4.13 to address this problem. I tried your code on kernel version 4.18 and 4.19 and it worked."}], "answers": [{"comments": [{"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 1, "creation_date": 1546527849, "post_id": 54008280, "comment_id": 94886010, "body": "A <a href=\"https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=c7acec713d14c6ce8a20154f9dfda258d6bcad3b\" rel=\"nofollow noreferrer\">later version of the patch</a> in that kernel dev discussion eventually made it into kernel version 4.13. (Actually, it ended up as the last part of a <a href=\"https://lore.kernel.org/lkml/xa1t4lw9hw55.fsf@mina86.com/t/\" rel=\"nofollow noreferrer\">series of 6 patches</a> that I wrote.)"}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 0, "last_activity_date": 1546440069, "creation_date": 1546440069, "answer_id": 54008280, "question_id": 54008138, "link": "https://stackoverflow.com/questions/54008138/container-of-macro-does-not-work-for-char-or-array-members/54008280#54008280", "title": "container_of macro does not work for char* or array members", "body": "<p>This is due to ISO C rules on pointer initialisations, which break the initialisation of <code>__mptr</code> for this case.</p>\n\n<p>Here's a stripped-back example:</p>\n\n<pre><code>int main()\n{\n    char ar[5] = {0};\n    const char (*ptr)[5] = &amp;ar;\n}\n\n// warning: pointers to arrays with different qualifiers are incompatible in ISO C [-Wpedantic]\n</code></pre>\n\n<h3>(<a href=\"http://coliru.stacked-crooked.com/a/9413a62bac51155a\" rel=\"nofollow noreferrer\">live demo</a>)</h3>\n\n<p>There is a discussion about this problem on <a href=\"https://stackoverflow.com/a/34488782/560648\">a prior SO question</a>. Note that <a href=\"http://coliru.stacked-crooked.com/a/e341c1c2509b55bb\" rel=\"nofollow noreferrer\">C++ has no such limitation</a>; the <code>const</code> may be added freely.</p>\n\n<p><a href=\"https://lore.kernel.org/patchwork/patch/790486/\" rel=\"nofollow noreferrer\">A kernel dev discussion</a> suggested replacing <code>__mptr</code> with another way to perform the type check inside <code>container_of</code>, so you may find that this already no longer affects you.</p>\n"}], "owner": {"reputation": 6795, "user_id": 1460665, "user_type": "registered", "accept_rate": 39, "profile_image": "https://i.stack.imgur.com/o8b6s.jpg?s=128&g=1", "display_name": "Insane Coder", "link": "https://stackoverflow.com/users/1460665/insane-coder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 337, "favorite_count": 0, "accepted_answer_id": 54008280, "answer_count": 1, "score": 1, "last_activity_date": 1546440069, "creation_date": 1546439452, "last_edit_date": 1546439487, "question_id": 54008138, "link": "https://stackoverflow.com/questions/54008138/container-of-macro-does-not-work-for-char-or-array-members", "title": "container_of macro does not work for char* or array members", "body": "<p>I am reading Linux Device Drivers Development from John Madieu and one para says</p>\n\n<pre><code>The container_of macro won't work for char * or array members. It\nmeans the first member of container_of must not be a pointer to\nanother pointer to char nor to array in the structure.\n</code></pre>\n\n<p>This is the definition of <code>container_of</code> :</p>\n\n<pre><code>#define container_of(ptr, type, member) ({ \\\n                const typeof( ((type *)0)-&gt;member ) *__mptr = (ptr); \n                (type *)( (char *)__mptr - offsetof(type,member) );})\n</code></pre>\n\n<p>So if I have </p>\n\n<pre><code>struct person {\nint age;\nint salary;\nchar *name;\n} me;\n</code></pre>\n\n<p>and I have <code>char ** my_name = &amp;(me.name);</code>, why can't I do the following :</p>\n\n<pre><code>struct person * me = container_of(my_name,struct person,name);\n</code></pre>\n"}, {"tags": ["c", "gdb"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1546439053, "post_id": 54008015, "comment_id": 94852599, "body": "Most likely, you have done nothing wrong, it&#39;s your environment causing those extra &quot;step&quot;s."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1546439061, "post_id": 54008015, "comment_id": 94852604, "body": "Your <code>main</code> is called by some <a href=\"https://en.wikipedia.org/wiki/Crt0\" rel=\"nofollow noreferrer\">crt0</a> and your debugger is stepping into it"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 3, "creation_date": 1546439184, "post_id": 54008015, "comment_id": 94852661, "body": "Or more precisely, <i>back to it</i> after stepping out of the previous call."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2201041"}, "edited": false, "score": 1, "creation_date": 1546441156, "post_id": 54008015, "comment_id": 94853589, "body": "(FYI, you can just do <code>s</code> instead of <code>step</code>)"}], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 9887837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/132b914ad8096774d5b8b06c2630b8fb?s=128&d=identicon&r=PG&f=1", "display_name": "Xited", "link": "https://stackoverflow.com/users/9887837/xited"}, "edited": false, "score": 0, "creation_date": 1546528576, "post_id": 54012561, "comment_id": 94886406, "body": "Can you tell me how i can tell gdb to debug only my code."}], "tags": [], "owner": {"reputation": 162629, "user_id": 50617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFykQ.png?s=128&g=1", "display_name": "Employed Russian", "link": "https://stackoverflow.com/users/50617/employed-russian"}, "is_accepted": true, "score": 2, "last_activity_date": 1546529061, "last_edit_date": 1546529061, "creation_date": 1546459940, "answer_id": 54012561, "question_id": 54008015, "link": "https://stackoverflow.com/questions/54008015/step-not-ending-program-at-the-end-of-program-but-it-ending-it-after-5-more/54012561#54012561", "title": "&quot;step&quot; not ending program at the end of program, but it ending it after 5 more &quot;step&quot;", "body": "<blockquote>\n  <p>\u201cstep\u201d not ending program at the end of program</p>\n</blockquote>\n\n<p>The problem is that your notion of where your program begins and ends is quite wrong: your program executes 100s or 1000s of instructions before it reaches <code>main</code>, and 100s or 1000s more after <code>main</code> returns.</p>\n\n<p>These instructions are part of C runtime startup and shutdown. Usually you are not interested in debugging there, but developers of the C runtime do need to debug it, and the debugger doesn't know whether you want to or not.</p>\n\n<blockquote>\n  <p>Can you tell me how i can tell gdb to debug only my code.</p>\n</blockquote>\n\n<p>GDB <em>doesn't know</em> which code is your own, and which isn't (and I don't believe there is a way to tell it).</p>\n\n<p>If you don't want to debug past the end of <code>main</code>, then don't ask GDB to do so: once you reach the end of \"your code\", use <code>continue</code> instead of <code>step</code>.</p>\n"}], "owner": {"reputation": 59, "user_id": 9887837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/132b914ad8096774d5b8b06c2630b8fb?s=128&d=identicon&r=PG&f=1", "display_name": "Xited", "link": "https://stackoverflow.com/users/9887837/xited"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 54012561, "answer_count": 1, "score": 3, "last_activity_date": 1546529061, "creation_date": 1546438966, "question_id": 54008015, "link": "https://stackoverflow.com/questions/54008015/step-not-ending-program-at-the-end-of-program-but-it-ending-it-after-5-more", "title": "&quot;step&quot; not ending program at the end of program, but it ending it after 5 more &quot;step&quot;", "body": "<p>I am using Windows 10. I wrote a HelloWorld program in C.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    printf(\"Hello World\\n\");\n    return 0;\n}\n</code></pre>\n\n<p>I compiled this with cmd with the following command</p>\n\n<pre><code>gcc -g -o HelloWorld HelloWorld.c\n</code></pre>\n\n<p>In gdb, I write <code>start</code>. And I typed <code>step</code> quite a few times. At some point it prints</p>\n\n<pre><code>(gdb) step\n7       }\n</code></pre>\n\n<p>Then I typed <code>step</code> again. It prints</p>\n\n<pre><code>(gdb) step\n__tmainCRTStartup () at C:/crossdev/src/mingw-w64-v4-git/mingw-w64-crt/crt/crtexe.c:334\n334     C:/crossdev/src/mingw-w64-v4-git/mingw-w64-crt/crt/crtexe.c: No such file or directory.\n</code></pre>\n\n<p>After another step it prints</p>\n\n<pre><code>332     in C:/crossdev/src/mingw-w64-v4-git/mingw-w64-crt/crt/crtexe.c\n</code></pre>\n\n<p>After that it prints above line every time I wrote <code>step</code>. And eventually sometime it printed</p>\n\n<pre><code>[Thread 1952.0x1628 exited with code 0]\n[Inferior 1 (process 1952) exited normally]\n</code></pre>\n\n<p>I want to know, what I have done wrong that causes the problem.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 2254, "user_id": 1003650, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6b653616a592b8bdc296b0abf6207a71?s=128&d=identicon&r=PG", "display_name": "Venantius", "link": "https://stackoverflow.com/users/1003650/venantius"}, "edited": false, "score": 3, "creation_date": 1546437979, "post_id": 54007736, "comment_id": 94852058, "body": "What did you expect the program to return, and what did it actually return?"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 3, "creation_date": 1546438010, "post_id": 54007736, "comment_id": 94852077, "body": "<code>c</code> ain&#39;t initialised for staters."}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 2, "creation_date": 1546438094, "post_id": 54007736, "comment_id": 94852123, "body": "It seems you haven&#39;t tried <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">running your program using a debugger</a>; you should do that."}, {"owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "edited": false, "score": 0, "creation_date": 1546438543, "post_id": 54007736, "comment_id": 94852348, "body": "neither is <code>e</code> (initialized)"}, {"owner": {"reputation": 329, "user_id": 10858089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dKuRy.jpg?s=128&g=1", "display_name": "Mohamed Sulaimaan Sheriff", "link": "https://stackoverflow.com/users/10858089/mohamed-sulaimaan-sheriff"}, "reply_to_user": {"reputation": 2254, "user_id": 1003650, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6b653616a592b8bdc296b0abf6207a71?s=128&d=identicon&r=PG", "display_name": "Venantius", "link": "https://stackoverflow.com/users/1003650/venantius"}, "edited": false, "score": 0, "creation_date": 1546438777, "post_id": 54007736, "comment_id": 94852467, "body": "My input is 12345                                                                                                                            Actual output 35286 25471 21456  52614 25325                                                                                                             Expected output 11111 to display the frequency of the number in this series. Please help me as I am a beginner. @Venantius"}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1546438927, "post_id": 54007736, "comment_id": 94852541, "body": "Please provide your input, expected output, and actual output."}, {"owner": {"reputation": 329, "user_id": 10858089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dKuRy.jpg?s=128&g=1", "display_name": "Mohamed Sulaimaan Sheriff", "link": "https://stackoverflow.com/users/10858089/mohamed-sulaimaan-sheriff"}, "reply_to_user": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "edited": false, "score": 0, "creation_date": 1546438953, "post_id": 54007736, "comment_id": 94852555, "body": "I have intialized it as int e[100] @SanderDeDycker"}, {"owner": {"reputation": 160, "user_id": 6594779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/847c25720c1e7423a97c7894b530bfa4?s=128&d=identicon&r=PG&f=1", "display_name": "svtag", "link": "https://stackoverflow.com/users/6594779/svtag"}, "edited": false, "score": 0, "creation_date": 1546439009, "post_id": 54007736, "comment_id": 94852577, "body": "Initialise <code>c</code> as 0 in the <code>count()</code> and all indexes of <code>e</code> with 0 before using them."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1546439019, "post_id": 54007736, "comment_id": 94852580, "body": "@zeeshan That&#39;s <i>defined</i>, not initialized. <code>int e[100] = {0};</code> to zero-fill that array (or use a loop). yours contains <i>indeterminate</i> values, and as such it&#39;s content is <i>undefined</i>. A <i>debugger</i> an examining the content of <code>e</code> <i>before</i> entering the loop would make the problem I&#39;m describing clearer. Get one (a debugger)."}, {"owner": {"reputation": 329, "user_id": 10858089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dKuRy.jpg?s=128&g=1", "display_name": "Mohamed Sulaimaan Sheriff", "link": "https://stackoverflow.com/users/10858089/mohamed-sulaimaan-sheriff"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1546439213, "post_id": 54007736, "comment_id": 94852677, "body": "@WhozCraig Thank you! It worked.you are great.Used this:int e[100] = {0};"}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 2, "creation_date": 1546439254, "post_id": 54007736, "comment_id": 94852693, "body": "A couple of hints. In an array such as <code>e[100]</code> a valid array index will have a value of 0 to 99 inclusive, and every element of that array should be set to 0 before use. Also, it isn&#39;t necessary to store the digits in any particular order\u2014you can do whatever&#39;s most convenient. Additionally, there are only 10 digits, so a counter of digit frequency should probably be an array of size 10. Finally, make sure your code works with numbers such as <code>10</code>."}], "answers": [{"tags": [], "owner": {"reputation": 1404, "user_id": 7671328, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6gynE.jpg?s=128&g=1", "display_name": "Yunbin Liu", "link": "https://stackoverflow.com/users/7671328/yunbin-liu"}, "is_accepted": true, "score": 1, "last_activity_date": 1546439325, "creation_date": 1546439325, "answer_id": 54008109, "question_id": 54007736, "link": "https://stackoverflow.com/questions/54007736/why-the-output-of-this-program-is-wrong-frequency-of-number/54008109#54008109", "title": "why the output of this program is wrong?.Frequency of number", "body": "<ol>\n<li>The line <code>int c;</code> should be <code>int c = 0;</code></li>\n<li>The line <code>int e[100];</code> should be <code>int e[100] = {0};</code></li>\n</ol>\n\n<p>The following <code>code</code> could work:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint count(int a) {\n  int c = 0;\n  while (a &gt;= 1) {\n    c++;\n    a = a / 10;\n  }\n  return c;\n}\nint main() {\n  // program to find frquency of the number\n  int a, n, d;\n  int b[100];\n  int e[100] = {0};\n  scanf(\"%d\", &amp;a);\n  n = count(a);\n\n  for (int i = n; a &gt; 0; i--) {\n    b[i] = a % 10;\n    a = a / 10;\n  }\n  for (int i = 1; i &lt;= n; i++) {\n    d = b[i];\n    e[d]++;             // most probably this part error occurs\n    printf(\"%d\\n\", d);  // used this this to confirm that i have correctly\n                        // stored value in d.\n  }\n\n  for (int i = 1; i &lt;= n; i++) {\n    printf(\"%d \", e[i]);\n  }\n\n  return 0;\n}\n</code></pre>\n\n<p>Also, you can do it use <code>snprintf</code>: </p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n\n    int main() {\n      int a;\n      int max = -1;\n      char buf[100];\n      int count[10] = {0};\n\n      scanf(\"%d\", &amp;a);\n      snprintf(buf, sizeof(buf), \"%d\", a);\n\n      for (int i = 0; buf[i] != '\\0'; ++i) {\n        int temp = buf[i] - '0';\n        ++count[temp];\n        if (temp &gt; max)\n          max = temp;\n      }\n\n      for (int i = 0; i &lt;= max; ++i)\n        printf(\"%d \", count[i]);\n\n      return 0;\n    }\n</code></pre>\n"}], "owner": {"reputation": 329, "user_id": 10858089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dKuRy.jpg?s=128&g=1", "display_name": "Mohamed Sulaimaan Sheriff", "link": "https://stackoverflow.com/users/10858089/mohamed-sulaimaan-sheriff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 54008109, "answer_count": 1, "score": -1, "last_activity_date": 1546445665, "creation_date": 1546437870, "last_edit_date": 1546445665, "question_id": 54007736, "link": "https://stackoverflow.com/questions/54007736/why-the-output-of-this-program-is-wrong-frequency-of-number", "title": "why the output of this program is wrong?.Frequency of number", "body": "<p>Program for the frequency of a number<br>\nPlease help me with this code to get clear output. I am a beginner\nI have made the program using an array. I don't know whether it is correct or not. Made with my own logic</p>\n\n<pre><code>int count(int a)  \n{  \n    int c;    \n    while(a&gt;=1)  \n    {  \n        c++;  \n        a=a/10;  \n    }  \n    return c;  \n}\nint main()   \n{  \n     //program to find frquency of the number  \n     int a,n,d;  \n     int b[100];  \n     int e[100];  \n     scanf(\"%d\",&amp;a);\n     n=count(a);\n\n     for(int i=n;a&gt;0;i--)     \n     {\n        b[i]=a%10; \n        a=a/10;\n     }\n     for(int i=1;i&lt;=n;i++) \n     {\n\n        d=b[i];\n        e[d]++;//most probably this part error occurs\n        printf(\"%d\\n\",d); //used this this to confirm that i have correctly stored value in d.\n     }\n\n      for(int i=1;i&lt;=n;i++) \n     {\n\n        printf(\"%d \",e[i]);\n     }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 3, "creation_date": 1546437344, "post_id": 54007576, "comment_id": 94851771, "body": "<code>sizeof (length + 1)</code> is the same as <code>sizeof (length * 2)</code> is the same as <code>sizeof (length - length)</code> ..."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1546437424, "post_id": 54007576, "comment_id": 94851807, "body": "Read <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a>. Notice that C11 knows about complex numbers, read <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">n1570</a> &#167;6.2.5-11"}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 4, "creation_date": 1546437566, "post_id": 54007576, "comment_id": 94851867, "body": "Since you&#39;re (apparently) using C99 (or more recent), consider using the <i>brand new</i> <a href=\"http://port70.net/~nsz/c/c99/n1256.html#6.2.5p11\" rel=\"nofollow noreferrer\"><code>_Complex</code> types</a>"}, {"owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "edited": false, "score": 1, "creation_date": 1546437614, "post_id": 54007576, "comment_id": 94851901, "body": "also be aware of memory leaks : the memory allocated inside <code>instanceOfComplex</code> can not be free&#39;d any more in several instances in your code, since you don&#39;t store the returned pointer anywhere, but instead immediately dereference it and copy the object."}, {"owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "edited": false, "score": 2, "creation_date": 1546437817, "post_id": 54007576, "comment_id": 94851981, "body": "and : when do you think this loop will end ? <code>for(i = length; length &gt; 0; i--)</code>"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1546440204, "post_id": 54007576, "comment_id": 94853149, "body": "note that C99 also has a built-in complex type"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1546441884, "post_id": 54007576, "comment_id": 94853972, "body": "@pmg: &quot;brand new&quot; meaning &quot;only 19 years old&quot;. And they say that technology <i>accelerates</i> changes :-)"}], "answers": [{"tags": [], "owner": {"reputation": 1799, "user_id": 3618854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45e8563fab07e0c27d82e18d8ba9aa8e?s=128&d=identicon&r=PG&f=1", "display_name": "Yakov Dan", "link": "https://stackoverflow.com/users/3618854/yakov-dan"}, "is_accepted": false, "score": 1, "last_activity_date": 1546437722, "creation_date": 1546437722, "answer_id": 54007698, "question_id": 54007576, "link": "https://stackoverflow.com/questions/54007576/c-programming-struct-of-complex-numbers/54007698#54007698", "title": "C programming: struct of complex numbers", "body": "<p>When you allocate memory for your array, it's wrong to say <code>sizeof(length+1)</code>. </p>\n\n<p>Instead, that line should be:</p>\n\n<pre><code>struct Complex* complexArray = malloc((length + 1) * sizeof(struct Complex));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": true, "score": 2, "last_activity_date": 1546438111, "creation_date": 1546438111, "answer_id": 54007802, "question_id": 54007576, "link": "https://stackoverflow.com/questions/54007576/c-programming-struct-of-complex-numbers/54007802#54007802", "title": "C programming: struct of complex numbers", "body": "<p>You are allocating memory for a new instance in <code>instanceOfComplex</code> and you return that (i.e. you return a pointer to the newly allocated memory).</p>\n\n<p>In your <code>main</code> you dereference the pointer and assign the values to the array element.</p>\n\n<p>You are loosing memory. Eiter allocate in <code>main</code> an array of pointers to complex, or have a local variable in <code>instanceOfComplex</code> that you return by value.</p>\n\n<p>As user Yakov Dan says in his answer, you wrongly allocate the memory in <code>main</code> which probably causes your error.</p>\n"}], "owner": {"reputation": 3, "user_id": 10670258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da622b7e6cc756986e8aaf1a768c8474?s=128&d=identicon&r=PG&f=1", "display_name": "johnnydas", "link": "https://stackoverflow.com/users/10670258/johnnydas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 920, "favorite_count": 0, "accepted_answer_id": 54007802, "answer_count": 2, "score": 0, "last_activity_date": 1546438111, "creation_date": 1546437202, "question_id": 54007576, "link": "https://stackoverflow.com/questions/54007576/c-programming-struct-of-complex-numbers", "title": "C programming: struct of complex numbers", "body": "<p>I have an array of complex numbers and want to add a new complex number at the very first postion of the array.</p>\n\n<p>I have a struct and a function which enters a new complex number at the first position of the array.</p>\n\n<p>I have a struct which holds complex numbers</p>\n\n<pre><code>struct Complex\n{\n  float imag;\n  float real;\n};\n</code></pre>\n\n<p>I also have a function which is creating an instance of such a complex number on the heap</p>\n\n<pre><code>struct Complex* instanceOfComplex(float a, float b)\n{\n  struct Complex* complex = malloc(sizeof(struct Complex));\n  if(complex == NULL)\n  {\n    return NULL; // out of memory\n  }\n\n  complex-&gt;imag = a;\n  complex-&gt;real = b;\n\n  return complex;\n}\n</code></pre>\n\n<p>Finally I have a function which should place a new complex number at the very first position of an array of complex numbers</p>\n\n<pre><code>int attach(struct Complex *complexArray, struct Complex complex, int length)\n{\n  int i;\n  for(i = length; length &gt; 0; i--)\n  {\n    complexArray[i] = complexArray[i - 1];\n  }\n  complexArray[i] = complex;\n\n  length++;\n\n  return length;\n}\n</code></pre>\n\n<p>The main function looks like this</p>\n\n<pre><code>int main()\n{\n  float a = 3.6;\n  float b = 6.8;\n\n  struct Complex* complex = instanceOfComplex(a, b);\n\n  printf(\"%f %f\\n\", complex-&gt;imag, complex-&gt;real);\n\n  int length = 4;\n\n  struct Complex* complexArray = malloc(sizeof(length + 1) * sizeof(struct Complex));\n\n  complexArray[0] = *instanceOfComplex(8.2, 9.3);\n  complexArray[1] = *instanceOfComplex(7.1, 4.6);\n  complexArray[2] = *instanceOfComplex(0.1, 2.7);\n  complexArray[3] = *instanceOfComplex(5.6, 1.9);\n\n  attach(complexArray, *complex, length);\n}\n</code></pre>\n\n<p>So finally the array should contain 5 elements of complex numbers where the new complex number is at position complexArray[0] and the other 4 elements are the following elements.</p>\n\n<p>The problem is in the main function because all elements are holding (8.2, 9.3). Could someone please tell me, whats wrong here?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 1, "creation_date": 1546434663, "post_id": 54006966, "comment_id": 94850467, "body": "Use an array for inputs (and loop)"}, {"owner": {"reputation": 4251, "user_id": 4605105, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-_cFfGx1khYs/AAAAAAAAAAI/AAAAAAAAGt0/vfQ_28nwAEE/photo.jpg?sz=128", "display_name": "&#212;rel", "link": "https://stackoverflow.com/users/4605105/%c3%94rel"}, "edited": false, "score": 0, "creation_date": 1546435157, "post_id": 54006966, "comment_id": 94850703, "body": "Build a tree to handle the priority of <code>*</code> on <code>+</code>"}, {"owner": {"reputation": 75, "user_id": 10640978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/165199145f5e9abb9a49856ad6e5ec7d?s=128&d=identicon&r=PG&f=1", "display_name": "stefnto", "link": "https://stackoverflow.com/users/10640978/stefnto"}, "reply_to_user": {"reputation": 4251, "user_id": 4605105, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-_cFfGx1khYs/AAAAAAAAAAI/AAAAAAAAGt0/vfQ_28nwAEE/photo.jpg?sz=128", "display_name": "&#212;rel", "link": "https://stackoverflow.com/users/4605105/%c3%94rel"}, "edited": false, "score": 0, "creation_date": 1546435497, "post_id": 54006966, "comment_id": 94850865, "body": "@&#212;rel what do you mean to build a tree?"}, {"owner": {"reputation": 4251, "user_id": 4605105, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-_cFfGx1khYs/AAAAAAAAAAI/AAAAAAAAGt0/vfQ_28nwAEE/photo.jpg?sz=128", "display_name": "&#212;rel", "link": "https://stackoverflow.com/users/4605105/%c3%94rel"}, "edited": false, "score": 0, "creation_date": 1546436057, "post_id": 54006966, "comment_id": 94851141, "body": "<a href=\"https://medium.com/basecs/grammatically-rooting-oneself-with-parse-trees-ec9daeda7dad\" rel=\"nofollow noreferrer\">medium.com/basecs/&hellip;</a>"}, {"owner": {"reputation": 2233, "user_id": 2669128, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/430a24425fb593f00def23e45c454c39?s=128&d=identicon&r=PG", "display_name": "thurizas", "link": "https://stackoverflow.com/users/2669128/thurizas"}, "edited": false, "score": 3, "creation_date": 1546436601, "post_id": 54006966, "comment_id": 94851412, "body": "there is no quick answer to this question, what you really want to craft is an interpreter.  However, you may want to take a look at <a href=\"http://www.craftinginterpreters.com/\" rel=\"nofollow noreferrer\">craftinginterpreters.com</a>, chapter 6 (parsing expressions) <a href=\"http://www.craftinginterpreters.com/parsing-expressions.html\" rel=\"nofollow noreferrer\">craftinginterpreters.com/parsing-expressions.html</a> has a bunch of useful information on how to parse expressions.  Best of luck."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1546437051, "post_id": 54006966, "comment_id": 94851648, "body": "There&#39;s a whole chapter dedicated to this in K &amp; R. Worth a read. Also &quot;Converts ASCII to decimal&quot; is much better rephrased as &quot;Converts to decimal&quot;."}, {"owner": {"reputation": 9367, "user_id": 4454124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c094d8979fb41b789a7c7f21d9329359?s=128&d=identicon&r=PG&f=1", "display_name": "mnistic", "link": "https://stackoverflow.com/users/4454124/mnistic"}, "edited": false, "score": 0, "creation_date": 1546438285, "post_id": 54006966, "comment_id": 94852220, "body": "tinyexpr is probably the smallest C math expression parser you will find: <a href=\"https://github.com/codeplea/tinyexpr\" rel=\"nofollow noreferrer\">github.com/codeplea/tinyexpr</a> You can either learn how it works, or just use it."}, {"owner": {"reputation": 75, "user_id": 10640978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/165199145f5e9abb9a49856ad6e5ec7d?s=128&d=identicon&r=PG&f=1", "display_name": "stefnto", "link": "https://stackoverflow.com/users/10640978/stefnto"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1546438897, "post_id": 54006966, "comment_id": 94852517, "body": "@Bathsheba which chapter is it?"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1546439113, "post_id": 54006966, "comment_id": 94852627, "body": "@stefnto: I can&#39;t recall, but there&#39;s no harm in reading the whole book (and completing all the example exercises)."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1546441399, "post_id": 54006966, "comment_id": 94853732, "body": "Read about <a href=\"https://en.wikipedia.org/wiki/Recursive_descent_parser\" rel=\"nofollow noreferrer\">recursive descent parser</a>s"}], "answers": [{"comments": [{"owner": {"reputation": 973, "user_id": 10721563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tGUHp.png?s=128&g=1", "display_name": "Ozan Yurtsever", "link": "https://stackoverflow.com/users/10721563/ozan-yurtsever"}, "edited": false, "score": 1, "creation_date": 1546441554, "post_id": 54008567, "comment_id": 94853816, "body": "What about the operator precedence?"}, {"owner": {"reputation": 128, "user_id": 8710770, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KGhJP.jpg?s=128&g=1", "display_name": "Physx", "link": "https://stackoverflow.com/users/8710770/physx"}, "reply_to_user": {"reputation": 973, "user_id": 10721563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tGUHp.png?s=128&g=1", "display_name": "Ozan Yurtsever", "link": "https://stackoverflow.com/users/10721563/ozan-yurtsever"}, "edited": false, "score": 0, "creation_date": 1546482878, "post_id": 54008567, "comment_id": 94868264, "body": "You mean what about if the operator is inputted first (wrong input)? If that&#39;s the case, when converting from infix to prefix notation you can make that it prints error if input&#39;s wrong."}], "tags": [], "owner": {"reputation": 128, "user_id": 8710770, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KGhJP.jpg?s=128&g=1", "display_name": "Physx", "link": "https://stackoverflow.com/users/8710770/physx"}, "is_accepted": false, "score": 1, "last_activity_date": 1546441620, "last_edit_date": 1546441620, "creation_date": 1546441275, "answer_id": 54008567, "question_id": 54006966, "link": "https://stackoverflow.com/questions/54006966/making-a-calculator-in-c-how-to-calculate-more-than-2-numbers/54008567#54008567", "title": "Making a calculator in c, how to calculate more than 2 numbers", "body": "<p>You can use the prefix notation for easier calculating.<br>\nYou have lots of online materials and code for infix-prefix notations.<br>\nThe basic idea is that your input (e.g.: (1+2)*(3*4)), which represents infix notation, can be converted in prefix notation (*+12*34). Use <em>Stack data structure</em> to calculate given prefix structure.  </p>\n\n<p><strong><em>EVALUATE_PREFIX (STRING):</em></strong>  </p>\n\n<p>So let's say you have: <strong>*+12*34</strong> like in our previous example.</p>\n\n<ol>\n<li>Put a pointer at the end of the expression so that it points to number 4 in our example and then read the character.  </li>\n<li>If the character at pointer is an operand push it to Stack.  </li>\n<li>If the character at pointer is an operator pop two elements from the Stack. Operate on these elements, according to the operator, and push the result back to the Stack.  </li>\n<li>Decrement pointer by 1 and go to 2. step as long as there are characters left to be scanned in the expression.  </li>\n<li>When there are no more characters left <em>the result</em> is stored at the top of the Stack so just return it.</li>\n</ol>\n\n<p>I suggest that you take a look at prefix, infix and postfix expressions. It won't take long to understand it and it should provide a good solution for your problem. Hope it helps. :)</p>\n"}, {"tags": [], "owner": {"reputation": 116, "user_id": 1392186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c781d7149b92109ab81787d9ca20ba9d?s=128&d=identicon&r=PG", "display_name": "Stove", "link": "https://stackoverflow.com/users/1392186/stove"}, "is_accepted": false, "score": 1, "last_activity_date": 1546441940, "last_edit_date": 1546441940, "creation_date": 1546441430, "answer_id": 54008601, "question_id": 54006966, "link": "https://stackoverflow.com/questions/54006966/making-a-calculator-in-c-how-to-calculate-more-than-2-numbers/54008601#54008601", "title": "Making a calculator in c, how to calculate more than 2 numbers", "body": "<p>I've found this a good exercise for myself =D\nPieces of suggestions:</p>\n\n<ul>\n<li>A state machine can help with getting the input</li>\n<li>In this case (calculator), a linked list should be sufficient to facilitate multiple operations</li>\n<li>fill the list up as you gather inputs, and then empty the list in the order of the operator priority</li>\n</ul>\n\n<p>I tried put together some code, hope it is of help. Have not get the chance to compile and test though.</p>\n\n<pre><code> #include &lt;stdio.h&gt;\n #include &lt;stdlib.h&gt;\n\n#define MAX_INPUT_SIZE 1000;\nstruct Node\n{\n    char operator;\n    int result;\n    struct Node* left;\n    struct Node* right;\n};\n\nenum InputState{\n    START = 0,\n    NUMBER,\n    OPERATOR\n    };\n\nvoid pushNodeToList( struct Node**head, struct Node**tail, char op, int result)\n{\n    struct Node* nodePtr = malloc(sizeof(*nodePtr));\n    nodePtr-&gt;operator = op;\n    result = result;\n    if(!head)\n    {\n        *head = nodePtr;\n        *tail = nodePtr;\n        nodePtr-&gt;left = 0;\n        nodePtr-&gt;right = 0;\n    }\n    else{\n        nodePtr-&gt;left = *tail;\n        (*tail)-&gt;right = nodePtr;\n        *tail = nodePtr;\n    }\n}\n\nvoid calculateNode( struct Node* nodePtr)\n{\n    if(nodePtr-&gt;left != 0 &amp;&amp; nodePtr-&gt;right != 0)\n    {\n        if(nodePtr-&gt;left-&gt;operator == 'n' &amp;&amp; nodePtr-&gt;right-&gt;operator == 'n' )\n        {\n            //calculate result\n            switch(nodePtr-&gt;operator)\n            {\n                case '+':\n                    nodePtr-&gt;result = nodePtr-&gt;left-&gt;result + nodePtr-&gt;right-&gt;result;\n                    break;\n                case '-':\n                    nodePtr-&gt;result = nodePtr-&gt;left-&gt;result - nodePtr-&gt;right-&gt;result;\n                    break;\n                case '*':\n                    nodePtr-&gt;result = nodePtr-&gt;left-&gt;result * nodePtr-&gt;right-&gt;result;\n                    break;\n                default:\n                    printf(\"Calculation Error: %d \\n\", 5);\n                    return;\n\n            }\n            //change type of node to 'n'\n            nodePtr-&gt;operator == 'n';\n\n            //reduce the numbers consumed\n            struct Node* tempLeft = nodePtr-&gt;left;\n            struct Node* tempRight = nodePtr-&gt;right;\n            nodePtr-&gt;left = tempLeft-&gt;left;\n            nodePtr-&gt;right = tempRight-&gt;right;\n            free(tempLeft);\n            free(tempRight);\n        }\n        else\n        {\n            printf(\"Calculation Error: %d \\n\", 4);\n            return;\n        }\n    }\n    else{\n        printf(\"Calculation Error: %d \\n\", 3);\n        return;\n    }\n}\n\nint main(void) {\n\nint ch;\nstruct Node* head = 0;\nstruct Node* tail = 0;\n\n//have a state machine to handle the logics related to parsing input\nint num = 0;\nenum InputState mState = START;\n\nint i = 1;\nwhile ((ch = getchar()) != EOF)\n{\n    switch(mState)\n    {\n        case START:\n            if (ch &gt;= '0' &amp;&amp; ch &lt;= '9'){\n                mState = NUMBER;\n                num = 0;\n                //initialize state to number\n            }\n            else if(ch == '+' || ch == '-' || ch == '*'){\n                mState = OPERATOR;\n                //initilize state to operator\n            }\n            else{\n                //your error code\n                printf(\"Input Error: %d \\n\", 1);\n                return 0;\n            }\n        break;\n        case NUMBER:\n            if (ch &gt;= '0' &amp;&amp; ch &lt;= '9'){\n                num = num * 10 + ch - '0';\n            }\n            else if(ch == '+' || ch == '-' || ch == '*'){\n                mState = OPERATOR;\n                //we just got a number recorded\n                pushNodeToList(&amp;head,&amp;tail,'n',num);//'n' for number\n            }\n            else{\n                printf(\"Input Error: %d \\n\", 2);\n                return 0;\n            }\n        break;\n        case OPERATOR:\n            if (ch &gt;= '0' &amp;&amp; ch &lt;= '9'){\n                mState = NUMBER;\n                num = ch - '0';\n            }\n            else if(ch == '+' || ch == '-' || ch == '*'){\n                pushNodeToList(&amp;head,&amp;tail,ch,0);//push in operator\n            }\n            else{\n                printf(\"Input Error: %d \\n\", 3);\n                return 0;\n            }\n        break;\n    }\n}\n//terminal condition to push-in last number\nif(mState == NUMBER)\n{\n    pushNodeToList(&amp;head,&amp;tail,'n',num);//'n' for number\n}\n\n//higher prioriety operation\nstruct Node* workingPtr = head;\nwhile(workingPtr !=tail)//assuming the last input is number (not operator)\n{\n    if(workingPtr-&gt;operator == '*')\n    {\n        calculateNode(workingPtr);\n    }\n}\n//lower prioriety operations\nworkingPtr = head;\nwhile(workingPtr !=tail)\n{\n    if(workingPtr-&gt;operator == '+' || workingPtr-&gt;operator == '-' )\n    {\n        calculateNode(workingPtr);\n    }\n}\n//print result\nif(head == tail &amp;&amp; head-&gt;operator == 'n')\n{\n    printf(\"Result : %d\\n\", head-&gt;result);\n}\nelse\n{\n    printf(\"Error: %d \\n\", 7);\n    return 0;\n}\n\n\nreturn 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 10640978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/165199145f5e9abb9a49856ad6e5ec7d?s=128&d=identicon&r=PG&f=1", "display_name": "stefnto", "link": "https://stackoverflow.com/users/10640978/stefnto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1558, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1546441940, "creation_date": 1546434554, "last_edit_date": 1546438186, "question_id": 54006966, "link": "https://stackoverflow.com/questions/54006966/making-a-calculator-in-c-how-to-calculate-more-than-2-numbers", "title": "Making a calculator in c, how to calculate more than 2 numbers", "body": "<p>I have to make a calculator in c in which the program reads the mathematical operation in the first line and prints the result of it in the next line. Also an error message must be written if in the mathematical operation are characters that are not numbers. Right now my program only reads one mathematical operation in one line (ex. 2+5). Any ideas how it can read more operations in one line? (ex. 2+5+7+8)\nMy code is the following:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n    int ch;\n    int input1 = 0, input2 = 0, flag = 0, flag1 = 0;\n    char oper;\n    int i = 1;\n    while ((ch = getchar()) != EOF){\n        int result = 0;\n        if (ch != '\\n'){ /* If user didnt change line */\n            if (ch &gt;= '0' &amp;&amp; ch &lt;= '9'){ /* Checks if ch is a number */\n                if(flag == 0) /* flag is used to change to the second number */\n                    input1 = input1*10 + ch - '0'; /* Converts ASCII to decimal */\n                else\n                    input2 = input2*10 + ch - '0';  /* Converts ASCII to decimal*/\n            }\n            if (ch == '+' || ch == '-' || ch == '*'){ /* Operator has been detected */\n                oper = ch;\n                flag = 1;\n            }\n            if (ch &gt;= 'A'){\n                flag1 = 1; /* flag1 is used to determine if a non-number character was written */\n            }   \n        }\n        else{\n            switch(oper){\n                case '+': /* if operator is \"+\" add the numbers */\n                    result = input1 + input2;\n                break;\n                case '-': /* if operator is \"-\" subtract the numbers */\n                    result = input1 - input2;\n                break;\n                case '*': /* if operator is \"*\" multiply the numbers */\n                    result = input1 * input2;\n                break;      \n            }\n            if (flag1 == 0){\n                printf(\"Result %d: %d\\n\", i, result);\n                i++;\n                input1 = 0;\n                input2 = 0;\n                flag = 0;\n            }\n            else if (flag1 == 1){\n                printf(\"Result %d: Error!\\n\", i);\n                i++;\n                input1 = 0;\n                input2 = 0;\n                flag = 0;\n                flag1 = 0;\n            }\n        }\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "embedded", "stm32", "interrupt-handling", "stm32f0"], "comments": [{"owner": {"reputation": 765, "user_id": 10143388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e95f5ed267f8601015469bc5617750a?s=128&d=identicon&r=PG&f=1", "display_name": "A.R.C.", "link": "https://stackoverflow.com/users/10143388/a-r-c"}, "edited": false, "score": 0, "creation_date": 1546434616, "post_id": 54006571, "comment_id": 94850448, "body": "Sounds more like a debugger problem then an programming issue."}, {"owner": {"reputation": 3, "user_id": 10451545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ca58c66eb9abc31035d96afcd1b6ebb?s=128&d=identicon&r=PG&f=1", "display_name": "user10451545", "link": "https://stackoverflow.com/users/10451545/user10451545"}, "reply_to_user": {"reputation": 765, "user_id": 10143388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e95f5ed267f8601015469bc5617750a?s=128&d=identicon&r=PG&f=1", "display_name": "A.R.C.", "link": "https://stackoverflow.com/users/10143388/a-r-c"}, "edited": false, "score": 0, "creation_date": 1546435051, "post_id": 54006571, "comment_id": 94850645, "body": "I thought that too, however when I had the chip running of a power supply and not connected to the PC, the same problem was occurring"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 10451545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ca58c66eb9abc31035d96afcd1b6ebb?s=128&d=identicon&r=PG&f=1", "display_name": "user10451545", "link": "https://stackoverflow.com/users/10451545/user10451545"}, "edited": false, "score": 0, "creation_date": 1546439279, "post_id": 54007939, "comment_id": 94852704, "body": "Thankyou very much! TIM14 IRQn is 19, so do I need to write &#39;HAL_NVIC_EnableIRQ(TIM14_IRQ19)?"}, {"owner": {"reputation": 3, "user_id": 10451545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ca58c66eb9abc31035d96afcd1b6ebb?s=128&d=identicon&r=PG&f=1", "display_name": "user10451545", "link": "https://stackoverflow.com/users/10451545/user10451545"}, "edited": false, "score": 0, "creation_date": 1546439775, "post_id": 54007939, "comment_id": 94852944, "body": "Hi, I have added that line to my code and unfortunately the same thing is happening, on initial load of the debugger it works fine, however after pressing restart it does not enter the &#39;void HAL_TIM_PeriodElapsedCallback(TIM_HandleTypeDef *htim)&#39; function"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 3, "user_id": 10451545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ca58c66eb9abc31035d96afcd1b6ebb?s=128&d=identicon&r=PG&f=1", "display_name": "user10451545", "link": "https://stackoverflow.com/users/10451545/user10451545"}, "edited": false, "score": 0, "creation_date": 1546440261, "post_id": 54007939, "comment_id": 94853169, "body": "<code>TIM14_IRQn</code>  ----"}, {"owner": {"reputation": 3, "user_id": 10451545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ca58c66eb9abc31035d96afcd1b6ebb?s=128&d=identicon&r=PG&f=1", "display_name": "user10451545", "link": "https://stackoverflow.com/users/10451545/user10451545"}, "edited": false, "score": 0, "creation_date": 1546440541, "post_id": 54007939, "comment_id": 94853294, "body": "Hi, I have just realised my mistake, as I am using a new IDE (from keil to IAR) I did not realise the debugger was automatically set to &#39;software reset&#39; not &#39;hardware rest pin&#39;, I have altered this setting and it is now working fine with the debugger and without, thank you for your help"}], "tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": true, "score": 1, "last_activity_date": 1546438625, "creation_date": 1546438625, "answer_id": 54007939, "question_id": 54006571, "link": "https://stackoverflow.com/questions/54006571/stm32f051r8t6-tim14-interrupt-handler-not-working-after-reset/54007939#54007939", "title": "stm32f051r8t6 TIM14 interrupt handler not working after reset", "body": "<p>You need to add to enable the interrupt. </p>\n\n<pre><code>  MX_TIM14_Init();\n\n  HAL_NVIC_EnableIRQ(TIM14_IRQn);   // &lt;----------------------------\n\n  HAL_TIM_Base_Start(&amp;htim14);\n</code></pre>\n\n<p>Just check the IRQn TIM14 UG event number. They are defined in the <code>IRQn_Type</code> enum type defined in the <code>STM32F___.h</code> file where <code>___</code> is the model of your micro (you will find it in the include folder)</p>\n"}], "owner": {"reputation": 3, "user_id": 10451545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ca58c66eb9abc31035d96afcd1b6ebb?s=128&d=identicon&r=PG&f=1", "display_name": "user10451545", "link": "https://stackoverflow.com/users/10451545/user10451545"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 252, "favorite_count": 0, "accepted_answer_id": 54007939, "answer_count": 1, "score": 0, "last_activity_date": 1546438625, "creation_date": 1546432812, "question_id": 54006571, "link": "https://stackoverflow.com/questions/54006571/stm32f051r8t6-tim14-interrupt-handler-not-working-after-reset", "title": "stm32f051r8t6 TIM14 interrupt handler not working after reset", "body": "<p>I am using STM32CubeMX to generate code into IAR, and I am using a stm32f051r8t6 microcontroller,\nThe problem I am having is that when first loading the code onto the chip, it all works perfect, however after pressing restart on either the board or IAR debugger, the TIM14 interrupt handler is not entered, but as soon as I leave the debugger and enter again, it starts working until I press restart. Has anybody come across this problem before? My code is below</p>\n\n<pre><code>static void MX_TIM14_Init(void);\n\nvoid HAL_TIM_PeriodElapsedCallback(TIM_HandleTypeDef *htim)\n{\n  if (htim-&gt;Instance == TIM14)\n  {\n    HAL_GPIO_WritePin(GPIOA, USART1_TE_Pin, GPIO_PIN_SET);\n  }\n}\n\nint main(void)\n{\n   /* USER CODE BEGIN 1 */\n\n   /* USER CODE END 1 */\n\n   /* MCU Configuration---------------------------------------------------*/\n\n  /* Reset of all peripherals, Initializes the Flash interface and the\n  Systick.    */\n  HAL_Init();\n\n /* USER CODE BEGIN Init */\n\n /* USER CODE END Init */\n\n /* Configure the system clock */\n  SystemClock_Config();\n\n  /* USER CODE BEGIN SysInit */\n\n  /* USER CODE END SysInit */\n\n  /* Initialize all configured peripherals */\n  MX_GPIO_Init();\n  MX_DMA_Init();\n  MX_ADC_Init();\n  MX_USART1_UART_Init();\n  MX_USART2_UART_Init();\n  MX_TIM14_Init();\n\n  HAL_TIM_Base_Start(&amp;htim14);\n  /* USER CODE END 2 */\n\n  /* Infinite loop */\n  /* USER CODE BEGIN WHILE */\n while (1)\n{\nFslBufferControl();\nMimModeCheck();\n/* USER CODE END WHILE */\n\n/* USER CODE BEGIN 3 */\n}\n/* USER CODE END 3 */\n}\nstatic void MX_TIM14_Init(void)\n{\n\n /* USER CODE BEGIN TIM14_Init 0 */\n\n /* USER CODE END TIM14_Init 0 */\n\n /* USER CODE BEGIN TIM14_Init 1 */\n\n /* USER CODE END TIM14_Init 1 */\n htim14.Instance = TIM14;\n htim14.Init.Prescaler = 47999;\n htim14.Init.CounterMode = TIM_COUNTERMODE_UP;\n htim14.Init.Period = 1;\n htim14.Init.ClockDivision = TIM_CLOCKDIVISION_DIV1;\n htim14.Init.AutoReloadPreload = TIM_AUTORELOAD_PRELOAD_ENABLE;\n if (HAL_TIM_Base_Init(&amp;htim14) != HAL_OK)\n {\n  Error_Handler();\n }\n /* USER CODE BEGIN TIM14_Init 2 */\n\n /* USER CODE END TIM14_Init 2 */\n\n }\n</code></pre>\n"}, {"tags": ["c", "variables", "scope", "global", "local"], "comments": [{"owner": {"reputation": 3126, "user_id": 2955790, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vShcC.png?s=128&g=1", "display_name": "Duck Dodgers", "link": "https://stackoverflow.com/users/2955790/duck-dodgers"}, "edited": false, "score": 2, "creation_date": 1546432725, "post_id": 54006491, "comment_id": 94849528, "body": "try compiling with <code>-Wshadow</code>, if you are using gcc."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1546432758, "post_id": 54006491, "comment_id": 94849545, "body": "You forget the assignment in <code>i = i + j</code>. In the second call to <code>crypt</code> the value of the global <code>i</code> is no longer <code>3</code>."}, {"owner": {"reputation": 846, "user_id": 4675426, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/6a40956551f38afd8a2c712b4780d73a?s=128&d=identicon&r=PG", "display_name": "Karthick", "link": "https://stackoverflow.com/users/4675426/karthick"}, "edited": false, "score": 0, "creation_date": 1546432774, "post_id": 54006491, "comment_id": 94849554, "body": "<code>return ( i = i + j ), there&#39;s no i in this function so i = 3 + 10... returns 13?</code> You have already changed the global <code>i</code> to <code>8</code> in the previous call to crypt. So <code>i</code> is 8 now"}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 2, "creation_date": 1546433017, "post_id": 54006491, "comment_id": 94849673, "body": "And all that explains why playing with globals and partially hiding them in locals is so dangerous..."}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "reply_to_user": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1546436535, "post_id": 54006491, "comment_id": 94851379, "body": "As @SergeBallesta said, this is a bad practice. Did you compiler not warn you that the local variables were hiding the globals? If not, look into enabling compiler warnings. They will save you a lot of grief in future."}, {"owner": {"reputation": 3, "user_id": 10857775, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-O1ws1yf0D78/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOE80bnpKl1RkdRPIbsr1Mgc-wXpg/mo/photo.jpg?sz=128", "display_name": "Nattymaths", "link": "https://stackoverflow.com/users/10857775/nattymaths"}, "edited": false, "score": 0, "creation_date": 1546441305, "post_id": 54006491, "comment_id": 94853681, "body": "Thank you guys so much, I&#39;ll look into changing my compiler settings."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 10857775, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-O1ws1yf0D78/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOE80bnpKl1RkdRPIbsr1Mgc-wXpg/mo/photo.jpg?sz=128", "display_name": "Nattymaths", "link": "https://stackoverflow.com/users/10857775/nattymaths"}, "edited": false, "score": 0, "creation_date": 1546441291, "post_id": 54006569, "comment_id": 94853675, "body": "Ahh thank you! I see where I went wrong. I completely forgot about the ( i = i+j) affecting the global variable."}], "tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": true, "score": 1, "last_activity_date": 1546433701, "last_edit_date": 1546433701, "creation_date": 1546432808, "answer_id": 54006569, "question_id": 54006491, "link": "https://stackoverflow.com/questions/54006491/global-and-local-scope-variables-why-is-the-2nd-printout-28-here/54006569#54006569", "title": "Global and Local Scope Variables ( Why is the 2nd printout 28 here? )", "body": "<p>You write:</p>\n\n<blockquote>\n  <p>return ( i = i + j ), there's no i in this function so i = 3 + 10... returns 13?</p>\n</blockquote>\n\n<p>No, <code>i</code> is not 3 anymore. It was changed to 8 previously, i.e. here <code>return (i = i+j);</code> due to the first call of <code>crypt</code></p>\n\n<p>When you write:</p>\n\n<blockquote>\n  <p>So the i in the main function becomes 8.</p>\n</blockquote>\n\n<p>it's correct but the global <code>i</code> was changed as well.</p>\n"}, {"tags": [], "owner": {"reputation": 527, "user_id": 10488746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vTDhZ.jpg?s=128&g=1", "display_name": "H.cohen", "link": "https://stackoverflow.com/users/10488746/h-cohen"}, "is_accepted": false, "score": 0, "last_activity_date": 1546433741, "creation_date": 1546433741, "answer_id": 54006794, "question_id": 54006491, "link": "https://stackoverflow.com/questions/54006491/global-and-local-scope-variables-why-is-the-2nd-printout-28-here/54006794#54006794", "title": "Global and Local Scope Variables ( Why is the 2nd printout 28 here? )", "body": "<p>You have here a global i and j, and a local i var. In the main when ever you refer to i, it first checks your current scope - so any changes there will be made on your local i, and the global i will not change. if you ask a function out side of main to do something with i var, it checks its own scope first, and then checks for global i var. in this case the changes that will be made are on the global i.</p>\n\n<p>So.. first time- </p>\n\n<p>local i is set in main and then receives the value of i = crypt(5); another thing is that in this function you also assign the 8 value to the global i-> (i = i+j), before returning the 8 value to the local i.</p>\n\n<p>second function:</p>\n\n<p>decrypt(i, j); here you send the local i(= 8) and global j(=10) to the function, in it you have:</p>\n\n<p>j += crypt(i);<br>\nwhich gives you j= j+((global) i = 8 + 10): 10+8+10. and also set your global i to 18.</p>\n"}, {"tags": [], "owner": {"reputation": 468, "user_id": 8843433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d48ce87f54a32371b91600d41325ecc?s=128&d=identicon&r=PG&f=1", "display_name": "Sujay", "link": "https://stackoverflow.com/users/8843433/sujay"}, "is_accepted": false, "score": 0, "last_activity_date": 1546434377, "creation_date": 1546434377, "answer_id": 54006913, "question_id": 54006491, "link": "https://stackoverflow.com/questions/54006491/global-and-local-scope-variables-why-is-the-2nd-printout-28-here/54006913#54006913", "title": "Global and Local Scope Variables ( Why is the 2nd printout 28 here? )", "body": "<blockquote>\n  <p><strong>Global variables</strong> are declared outside any function, and they can be\n  accessed (used) on any function in the program. <strong>Local variables</strong> are\n  declared inside a funcion, and can be used only inside that function.\n  It is possible to have local variables with the same name in different\n  functions.</p>\n</blockquote>\n\n<p>At the first call of function <strong>crypt(5);</strong> you have modified the global variable value to,</p>\n\n<blockquote>\n  <p>i = i+j ---->  i = 3+5 ----> i=8</p>\n</blockquote>\n\n<p>And when <strong>decrypt()</strong> function is called, <strong>i=8</strong> \nBecause of i is 8 <strong>j prints 28</strong> after additon which is a global variable .</p>\n\n<p><a href=\"https://stackoverflow.com/questions/14588767/where-in-memory-are-my-variables-stored-in-c\">You can see how memory is allocated in <strong>C</strong></a></p>\n"}, {"tags": [], "owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "is_accepted": false, "score": 0, "last_activity_date": 1546437816, "last_edit_date": 1546437816, "creation_date": 1546437401, "answer_id": 54007617, "question_id": 54006491, "link": "https://stackoverflow.com/questions/54006491/global-and-local-scope-variables-why-is-the-2nd-printout-28-here/54007617#54007617", "title": "Global and Local Scope Variables ( Why is the 2nd printout 28 here? )", "body": "<p>Consider the following version of the code, where variables have been renamed to avoid any confusion.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint iGlobal = 3, jGlobal = 10;\n\nint crypt(int jParam)\n{\n  return (iGlobal = iGlobal+jParam);\n}\n\nvoid decrypt(int xUnused, int iParam)\n{\n  jGlobal += crypt(iParam);\n}\n\nint main(void)\n{\n  int iLocal = 0;\n  iLocal = crypt(5);\n  decrypt(iLocal, jGlobal);\n  printf(\"|%d %d|\", iLocal, jGlobal);\n  return 0;\n}\n</code></pre>\n\n<p>Now, it should be relatively easy to explain what happens when the code is executed:</p>\n\n<ol>\n<li>In <code>main()</code>, <code>iLocal</code> is zet to 0</li>\n<li><code>main</code> calls <code>crypt(5)</code></li>\n<li><code>crypt</code> evaluates <code>iGlobal+jParam</code>, i.e. 3+5, and assigns the result to <code>iGlobal</code>, i.e. <code>iGlobal</code> is 8</li>\n<li><code>crypt</code> returns 8</li>\n<li><code>main</code> assigns the return value of 8 to <code>iLocal</code></li>\n<li><code>main</code> calls <code>decrypt(8,10)</code></li>\n<li><code>decrypt</code> calls <code>crypt(10)</code></li>\n<li><code>crypt</code> evaluates <code>iGlobal+jParam</code>, i.e. 8+10, and assigns the result to <code>iGlobal</code>, i.e. <code>iGlobal</code> is 18</li>\n<li><code>crypt</code> returns 18</li>\n<li><code>decrypt</code> adds the return value of 18 to <code>jGlobal</code>, i.e. <code>jGlobal</code> is 28</li>\n<li><code>printf</code> prints the values of <code>iLocal</code>, 8, and <code>jGlobal</code>, 28</li>\n</ol>\n\n<p>The complicated part, if any, is knowing when the global variables are replaced (a.k.a. hidden, or shadowed) by their local counterparts, the answer being \"whenever possible\".</p>\n"}], "owner": {"reputation": 3, "user_id": 10857775, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-O1ws1yf0D78/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOE80bnpKl1RkdRPIbsr1Mgc-wXpg/mo/photo.jpg?sz=128", "display_name": "Nattymaths", "link": "https://stackoverflow.com/users/10857775/nattymaths"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 54006569, "answer_count": 4, "score": 0, "last_activity_date": 1546437816, "creation_date": 1546432456, "question_id": 54006491, "link": "https://stackoverflow.com/questions/54006491/global-and-local-scope-variables-why-is-the-2nd-printout-28-here", "title": "Global and Local Scope Variables ( Why is the 2nd printout 28 here? )", "body": "<pre><code>#include &lt;stdio.h&gt;\n\nint i = 3, j = 10;\n\nint crypt(int j)\n{\n  return (i = i+j);\n}\n\nvoid decrypt(int x, int i)\n{\n  j += crypt(i);\n}\n\nint main(void)\n{\n  int i = 0;\n  i = crypt(5);\n  decrypt(i, j);\n  printf(\"|%d %d|\", i, j);\n  return 0;\n}\n</code></pre>\n\n<p>I'm having trouble figuring out why does it printout |8 28|.</p>\n\n<p>The \"8\" part, I understand that at</p>\n\n<p>i = crypt(5) -> j is now 5 in this function -> i = i + j -> There's no i therefore it uses the global variable i = 3 -> i = 3 + 5 -> returns i = 8</p>\n\n<p>So the i in the main function becomes 8.</p>\n\n<p>But what about the next printout? Why is it 28 instead of 23?</p>\n\n<p>The way I read it was like this</p>\n\n<p>decrypt(i, j) -> decrypt(8, 10) -> x is now 8 and i is now 10 in this function -> j += crypt(i) -> j += crypt(10) -> j in this function is now 10. </p>\n\n<p>return ( i = i + j ), there's no i in this function so i = 3 + 10... returns 13?</p>\n\n<p>So then j += 13 is 23? </p>\n\n<p>Which part of the step did I mess up? I've been reading local / global scope online and I still don't quite get where did I go wrong... Feels like I'm messing up my value for i somewhere. </p>\n\n<p>PS: I apologize for the poor formatting, not quite sure how else can I put it cleanly. </p>\n"}, {"tags": ["c", "guile", "boehm-gc"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1546446469, "post_id": 54006159, "comment_id": 94856301, "body": "What are your &quot;strange errors&quot;?"}, {"owner": {"reputation": 139, "user_id": 10838901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c82815e4c3a1ae1b24704ceae1ee699?s=128&d=identicon&r=PG&f=1", "display_name": "Tommi H&#246;yn&#228;l&#228;nmaa", "link": "https://stackoverflow.com/users/10838901/tommi-h%c3%b6yn%c3%a4l%c3%a4nmaa"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1546534661, "post_id": 54006159, "comment_id": 94889555, "body": "Control flow of the program changed when I added a call to procedure display in a different place."}, {"owner": {"reputation": 139, "user_id": 10838901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c82815e4c3a1ae1b24704ceae1ee699?s=128&d=identicon&r=PG&f=1", "display_name": "Tommi H&#246;yn&#228;l&#228;nmaa", "link": "https://stackoverflow.com/users/10838901/tommi-h%c3%b6yn%c3%a4l%c3%a4nmaa"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1546534758, "post_id": 54006159, "comment_id": 94889589, "body": "An object in guile (wrapped C variable) gets destroyed by the garbage collector even though there is a let variable containing its value."}, {"owner": {"reputation": 118, "user_id": 12599383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4db00b5e939f15b1391b9247f6e44a45?s=128&d=identicon&r=PG&f=1", "display_name": "saffronsnail", "link": "https://stackoverflow.com/users/12599383/saffronsnail"}, "edited": false, "score": 0, "creation_date": 1578099923, "post_id": 54006159, "comment_id": 105340412, "body": "If an object is being collected when there is a valid reference to it, it sounds like there is a bug in Guile. Have you reported this to the maintainers? The mailing address is bug-guile@gnu.org."}], "owner": {"reputation": 139, "user_id": 10838901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c82815e4c3a1ae1b24704ceae1ee699?s=128&d=identicon&r=PG&f=1", "display_name": "Tommi H&#246;yn&#228;l&#228;nmaa", "link": "https://stackoverflow.com/users/10838901/tommi-h%c3%b6yn%c3%a4l%c3%a4nmaa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 126, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1546431139, "creation_date": 1546431139, "question_id": 54006159, "link": "https://stackoverflow.com/questions/54006159/valgrind-reports-errors-with-libgc", "title": "Valgrind reports errors with libgc", "body": "<p>I'm developing an application with guile and I get some strange errors with it. I suspect that the errors are caused by uninitialized variables in guile or some of the libraries it uses. The problem occurs with both guile versions 2.0 and 2.2.</p>\n\n<p>When I ran guile with valgrind I got the following error (among others):</p>\n\n<pre><code>==9945== Conditional jump or move depends on uninitialised value(s)\n==9945==    at 0x4D5005B: GC_push_all_eager (mark.c:1583)\n==9945==    by 0x4D514C4: GC_push_current_stack (mark_rts.c:695)\n==9945==    by 0x4D4B254: GC_with_callee_saves_pushed (mach_dep.c:322)\n==9945==    by 0x4D51535: GC_push_regs_and_stack (mark_rts.c:772)\n==9945==    by 0x4D5163E: GC_push_roots (mark_rts.c:845)\n==9945==    by 0x4D4D8F5: GC_mark_some (mark.c:351)\n==9945==    by 0x4D42CBA: GC_stopped_mark (alloc.c:702)\n==9945==    by 0x4D4283C: GC_try_to_collect_inner (alloc.c:488)\n==9945==    by 0x4D527B1: GC_init (misc.c:1292)\n==9945==    by 0x48BBC22: ??? (in /usr/lib/x86_64-linux-gnu/libguile-2.2.so.1.3.1)\n==9945==    by 0x48C46EE: ??? (in /usr/lib/x86_64-linux-gnu/libguile-2.2.so.1.3.1)\n==9945==    by 0x491826D: ??? (in /usr/lib/x86_64-linux-gnu/libguile-2.2.so.1.3.1)\n==9945==  Uninitialised value was created by a stack allocation\n==9945==    at 0x4D4B182: GC_with_callee_saves_pushed (mach_dep.c:227)\n==9945== \n==9945== Conditional jump or move depends on uninitialised value(s)\n==9945==    at 0x4D50063: GC_push_all_eager (mark.c:1583)\n==9945==    by 0x4D514C4: GC_push_current_stack (mark_rts.c:695)\n==9945==    by 0x4D4B254: GC_with_callee_saves_pushed (mach_dep.c:322)\n==9945==    by 0x4D51535: GC_push_regs_and_stack (mark_rts.c:772)\n==9945==    by 0x4D5163E: GC_push_roots (mark_rts.c:845)\n==9945==    by 0x4D4D8F5: GC_mark_some (mark.c:351)\n==9945==    by 0x4D42CBA: GC_stopped_mark (alloc.c:702)\n==9945==    by 0x4D4283C: GC_try_to_collect_inner (alloc.c:488)\n==9945==    by 0x4D527B1: GC_init (misc.c:1292)\n==9945==    by 0x48BBC22: ??? (in /usr/lib/x86_64-linux-gnu/libguile-2.2.so.1.3.1)\n==9945==    by 0x48C46EE: ??? (in /usr/lib/x86_64-linux-gnu/libguile-2.2.so.1.3.1)\n==9945==    by 0x491826D: ??? (in /usr/lib/x86_64-linux-gnu/libguile-2.2.so.1.3.1)\n==9945==  Uninitialised value was created by a stack allocation\n==9945==    at 0x4D4B182: GC_with_callee_saves_pushed (mach_dep.c:227)\n==9945== \n</code></pre>\n\n<p>I can't find any uninitialized values in function\nGC_with_callee_saves_pushed. I tried to memset the context variable in\nGC_with_callee_saves_pushed to 0 but it didn't help.\nThe second argument to GC_with_callee_saved_pushed in the trace comes from function call to GC_approx_sp in line 702 of alloc.c.</p>\n\n<p>The conditional branch compiled in GC_with_callee_saves_pushed is the one after \"#if defined(UNIX_LIKE)...\".  The else branch of \"#if defined(HAVE_BUILTIN_UNWIND_INIT)\" is not compiled.</p>\n\n<p>Could this bug be similar to\n<a href=\"https://stackoverflow.com/questions/25703245/valgrind-error-and-ucontext-why-use-of-uninitialised-value-of-size-8\">this</a></p>\n\n<p>Do you have any ideas how to move forward with this?</p>\n"}, {"tags": ["python", "c", "perl", "sh"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 10857590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/114cc3a92a39195ac65207899ba80740?s=128&d=identicon&r=PG&f=1", "display_name": "AlmostAHerb", "link": "https://stackoverflow.com/users/10857590/almostaherb"}, "edited": false, "score": 0, "creation_date": 1546434701, "post_id": 54006261, "comment_id": 94850483, "body": "Thanks - I agree with this"}], "tags": [], "owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "is_accepted": false, "score": 0, "last_activity_date": 1546431549, "creation_date": 1546431549, "answer_id": 54006261, "question_id": 54005963, "link": "https://stackoverflow.com/questions/54005963/how-to-find-old-large-files-and-generate-metrics-for-directories-containg-those/54006261#54006261", "title": "How to find old large files and generate metrics for directories containg those files", "body": "<p>Use <code>cut</code> to extract the correct column from your extracted lines in place of <code>sed</code>. <code>cut -d, -f3</code> will extract the third column each separated by <code>,</code>.</p>\n\n<p>With input:</p>\n\n<pre><code>10,2,5,a/b\n20,4,5,a/c\n30,2,15,b/d\n40,4,10,a/d\n</code></pre>\n\n<p>command <code>grep a/ a.txt | cut -f3 -d, | paste -sd+ - | bc</code> will produce:</p>\n\n<pre><code>20\n</code></pre>\n\n<p>and command <code>grep b/ a.txt | cut -f3 -d, | paste -sd+ - | bc</code>:</p>\n\n<pre><code>15\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "is_accepted": false, "score": 0, "last_activity_date": 1546432656, "last_edit_date": 1546432656, "creation_date": 1546432120, "answer_id": 54006411, "question_id": 54005963, "link": "https://stackoverflow.com/questions/54005963/how-to-find-old-large-files-and-generate-metrics-for-directories-containg-those/54006411#54006411", "title": "How to find old large files and generate metrics for directories containg those files", "body": "<p>Call <code>'python script.py startdir ~/somefile.txt'</code>. </p>\n\n<p>You can use this as starting point:</p>\n\n<pre><code>import os\nimport sys\nimport time\n\ndef get_age_in_days(file_stats):\n    \"\"\"Calculate age in days from files stat.\"\"\"\n    return (time.time() - file_stats.st_mtime) // (60*60*24) \n\ndef get_size_in_MB(file_stats):\n    \"\"\"Calculate file size in megabytes from files stat.\"\"\"\n    return file_stats.st_size / (1024 * 1024)\n\ndef metric(root,f):\n    \"\"\"Uses root and f to create a metric for the file at 'os.path.join(root,f)'\"\"\"\n    fn = os.path.join(root,f)\n    fn_stat = os.stat(fn) \n    age = get_age_in_days(fn_stat)\n    size = get_size_in_MB(fn_stat)\n    metric = age*size\n\n    return [metric, age, size, fn] \n\npath = None\nfn   = None\nif len(sys.argv)==3:\n    path = sys.argv[1]\n    fn = sys.argv[2]\nelse:\n    sys.exit(2)\n\n\nwith open(fn,\"w\") as output:  \n    # walk directory recursivly and report anything with a metric &gt; 1 \n    for root,dirs,files in os.walk(path):\n        total_dict = 0\n        for f in files:\n            m = metric(root,f)\n\n            # cutoff - only write to file if metric &gt; 1\n            if m[0] &gt; 1: \n                total_dict += m[0]\n                output.write(','.join(map(str,m))+\"\\n\")\n       output.write(','.join([str(total_dict), \"total\",\"dictionary\",root])+\"\\n\")\n\n# testing purposes\n# print(open(fn).read())\n</code></pre>\n\n<p>Example-file - (without cutoff - using <a href=\"https://pyfiddle.io/\" rel=\"nofollow noreferrer\">https://pyfiddle.io/</a>):</p>\n\n<pre><code>0.0,0.0,0.0011606216430664062,./main.py\n0.0,0.0,0.0,./myfiles.txt\n0.0,total,dictionary,./\n</code></pre>\n\n<p>You can look up any line that contains <strong><code>,total,dictionary,</code></strong>:  <code>0.0,total,dictionary,./</code> for dictionary-totals.</p>\n"}, {"comments": [{"owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1546590267, "post_id": 54006456, "comment_id": 94906010, "body": "@zdim That should work. now. It worked when I tested it last time because my initial directory was <code>..</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1546590749, "post_id": 54006456, "comment_id": 94906192, "body": "Thank you :)  (I would also round numbers and sort by metric)"}, {"owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1546592700, "post_id": 54006456, "comment_id": 94907008, "body": "@zdim I&#39;ll leave that as an exercise for the poster, they may want to do that by options :-)"}, {"owner": {"reputation": 23, "user_id": 10857590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/114cc3a92a39195ac65207899ba80740?s=128&d=identicon&r=PG&f=1", "display_name": "AlmostAHerb", "link": "https://stackoverflow.com/users/10857590/almostaherb"}, "edited": false, "score": 0, "creation_date": 1546611181, "post_id": 54006456, "comment_id": 94916088, "body": "Thanks a lot for you help. Was enough to get me going"}], "tags": [], "owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "is_accepted": true, "score": 4, "last_activity_date": 1546590155, "last_edit_date": 1546590155, "creation_date": 1546432285, "answer_id": 54006456, "question_id": 54005963, "link": "https://stackoverflow.com/questions/54005963/how-to-find-old-large-files-and-generate-metrics-for-directories-containg-those/54006456#54006456", "title": "How to find old large files and generate metrics for directories containg those files", "body": "<p>You could do the whole lot in Perl. Perl comes with two operators <code>-M</code> and <code>-s</code> which are respectively the age of the file in days and the size of the file in bytes. Age here being the script start time minus the file modification time, and also the <code>File::Find</code> module that mimics the find command.</p>\n\n<pre><code>#!perl\nuse strict;\nuse warnings;\n\nuse File::Find;\n\nfind(\\&amp;process, shift); # shift the start directory off @ARGV\n\nsub process {\n    # Lots of use of the magic _ file handle so we don't keep having to call stat()\n    print( (-M _) * (-s _), ' ', -M _, ' ', -s _, \" $File::Find::name\\n\")\n        if -f $_;\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 10857590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/114cc3a92a39195ac65207899ba80740?s=128&d=identicon&r=PG&f=1", "display_name": "AlmostAHerb", "link": "https://stackoverflow.com/users/10857590/almostaherb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 54006456, "answer_count": 3, "score": 2, "last_activity_date": 1546590155, "creation_date": 1546430345, "question_id": 54005963, "link": "https://stackoverflow.com/questions/54005963/how-to-find-old-large-files-and-generate-metrics-for-directories-containg-those", "title": "How to find old large files and generate metrics for directories containg those files", "body": "<p>I am a hardware engineer working in a design department and we routinely generate directories with large amounts of data (both large files and directories that contain large numbers of small files). This data can hang around on the disk for quite a while and I am looking for a metric to identify directories with large amounts of old data in them as candidates for deletion.</p>\n\n<p>The metric I have decided on is File Size (in M) * File Age (in days).</p>\n\n<p>I have a working solution, but it is a combination of shell scripting and c and is neither maintainable, pretty nor elegant.</p>\n\n<p>I am looking for ideas to improve the script.</p>\n\n<p>The basic idea is to generate raw data on all the files using find</p>\n\n<pre><code>find $Dir -type f -exec stat -c \"%s,%Y,%n\" {} \\; &gt; rpt3\n</code></pre>\n\n<p>and then process that file in C to get a file (rpt3b) in the format</p>\n\n<p>Metric,Age,Size,FileName</p>\n\n<p>Metric is Age*Size</p>\n\n<p>Age is number of days since file was modified</p>\n\n<p>Size is size of file in M</p>\n\n<p>FileName is name of file.</p>\n\n<p>I then process this file to sum the metrics for each directory</p>\n\n<pre><code>for Directory in $( find /projects/solaris/implementation -maxdepth 4 -type d ) ; do\n  Total=`grep $Directory/ rpt3a | sed -e 's?,.*??' | paste -sd+ - | bc`\n  echo $Total,$Directory &gt;&gt; rpt3c\ndone\n</code></pre>\n\n<p>So the output is similar to a du, but it is the metric that is reported rather than the size taken on disk.</p>\n\n<p>I could pull the last step into the C program, but I am looking for a solution that ideally works in one environment (doesn't have to be C, I am open to learning new languages).</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["c", "switch-statement"], "comments": [{"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 3, "creation_date": 1546429312, "post_id": 54005675, "comment_id": 94848051, "body": "How do you plan to <i>use</i> the chosen value? Please show us an example."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1546429371, "post_id": 54005675, "comment_id": 94848078, "body": "You know in <code>C99</code> onwards, <code>const result = 5;</code> is invalid, right? you need to be explicit <code>const int result = 5;</code>, as implicit int rule is obsolete."}, {"owner": {"reputation": 661, "user_id": 5537770, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/f97da445cf7af4efd508de4586b80150?s=128&d=identicon&r=PG&f=1", "display_name": "Pryda", "link": "https://stackoverflow.com/users/5537770/pryda"}, "reply_to_user": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1546429499, "post_id": 54005675, "comment_id": 94848133, "body": "@user694733 Edited"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1546429555, "post_id": 54005675, "comment_id": 94848147, "body": "Can&#39;t you just define <code>MULTIPLY_BY_10  10</code> and so forth? Then it reduces to <code>5 * CHOSEN_FACTOR</code>."}, {"owner": {"reputation": 661, "user_id": 5537770, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/f97da445cf7af4efd508de4586b80150?s=128&d=identicon&r=PG&f=1", "display_name": "Pryda", "link": "https://stackoverflow.com/users/5537770/pryda"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1546429555, "post_id": 54005675, "comment_id": 94848148, "body": "@SouravGhosh Edited. I forgot the type."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 2, "creation_date": 1546429602, "post_id": 54005675, "comment_id": 94848161, "body": "Also, why not simply define <code>#define MULTIPLY_BY_1000 50000</code> directly? What benefit does the temporary value <code>4</code> give?"}, {"owner": {"reputation": 661, "user_id": 5537770, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/f97da445cf7af4efd508de4586b80150?s=128&d=identicon&r=PG&f=1", "display_name": "Pryda", "link": "https://stackoverflow.com/users/5537770/pryda"}, "reply_to_user": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1546429666, "post_id": 54005675, "comment_id": 94848185, "body": "@user694733 Even i I do so, How to fix result value with a macro in the header file ?"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1546429894, "post_id": 54005675, "comment_id": 94848266, "body": "There is no <i>switch</i> possible in the preprocessor. Youll need a chain of<code>#if</code> // <code>#elif</code>// <code>#else</code>"}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1546429947, "post_id": 54005675, "comment_id": 94848292, "body": "I&#39;m not sure I understand what you mean by fixing? I assume you would change <code>return result * myFoo;</code> to <code>return CHOSEN_FACTOR * myFoo;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 1123, "user_id": 5198054, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/H6xkh.jpg?s=128&g=1", "display_name": "Hasan", "link": "https://stackoverflow.com/users/5198054/hasan"}, "is_accepted": false, "score": 1, "last_activity_date": 1546430745, "creation_date": 1546430745, "answer_id": 54006057, "question_id": 54005675, "link": "https://stackoverflow.com/questions/54005675/using-switch-with-macros/54006057#54006057", "title": "Using Switch With MACROS", "body": "<p>Like in <a href=\"https://stackoverflow.com/questions/52239318/how-to-use-switch-statement-inside-a-macro-in-c\">this</a> answer suggests, i would suggest you to use enum for getting the selected value and based on the selection with the enum type, return the macro that you have specified. To do that, you can create a function and get the correct macro as shown below.</p>\n\n<pre><code>typedef enum {\n    MULTIPLY_BY_1\n    MULTIPLY_BY_10     \n    MULTIPLY_BY_100    \n    MULTIPLY_BY_1000   \n}multiplier_t;\n\nuint16_t foo(multiplier_t multiplier)\n{\n       switch (multiplier) {                      \n        case MULTIPLY_BY_1:           \n           return 1;       \n        case MULTIPLY_BY_10:       \n          return 2;   \n        case MULTIPLY_BY_100:       \n          return 3;\n        case MULTIPLY_BY_1000:       \n          return 4;    \n     }            \n    return 0;  // just in case no code matches\n}\n</code></pre>\n\n<p>Hope this helps you.</p>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 1, "last_activity_date": 1546445725, "creation_date": 1546445725, "answer_id": 54009632, "question_id": 54005675, "link": "https://stackoverflow.com/questions/54005675/using-switch-with-macros/54009632#54009632", "title": "Using Switch With MACROS", "body": "<p>Assuming I understand what you're asking for, I think you're looking for something like this:</p>\n\n<pre><code>#define INIT_FACTOR(var, value)               \\\n  #ifdef CHOSEN_FACTOR                        \\         \n    #if CHOSEN_FACTOR == MULTIPLY_BY_1        \\\n      const uint16_t var = value              \\\n    #elif CHOSEN_FACTOR == MULTIPLY_BY_10     \\\n      const uint16_t  var = value * 10        \\\n    #elif CHOSEN_FACTOR == MULTIPLY_BY_100    \\\n      const uint16_t var = value * 100        \\\n    #elif CHOSEN_FACTOR == MULTIPLY_BY_1000   \\\n      const uint16_t var = value * 1000       \\\n    #endif                                    \\\n  #else                                       \\\n    const uint16_t var = value                \\\n  #endif                                      \n</code></pre>\n\n<p>This will define a macro named <code>INIT_FACTOR</code> that takes two arguments, the name of the variable to define and the starting value.  You'd add it in the body of your code as</p>\n\n<pre><code>INIT_FACTOR(result, 5);\n</code></pre>\n\n<p>and then, if <code>CHOSEN_FACTOR</code> is <code>MULTIPLY_BY_100</code>, that line would expand to</p>\n\n<pre><code>const uint16_t result = 5 * 100;\n</code></pre>\n\n<p>If <code>CHOSEN_FACTOR</code> is not defined, that line expands to</p>\n\n<pre><code>const uint16_t result = 5;\n</code></pre>\n\n<p>Remember that macro substitution happens at compile time, not run time.  If you want a run time solution, this isn't it.  </p>\n"}, {"tags": [], "owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": false, "score": 1, "last_activity_date": 1546462531, "creation_date": 1546462531, "answer_id": 54013064, "question_id": 54005675, "link": "https://stackoverflow.com/questions/54005675/using-switch-with-macros/54013064#54013064", "title": "Using Switch With MACROS", "body": "<p>Selection in the preprocessor can be done by using a helper macro to expand a parameter and then pasting it with a token to kludge a look-up table:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n\nint main(void)\n{\n    #define MULTIPLY_BY_1      1\n    #define MULTIPLY_BY_10     2\n    #define MULTIPLY_BY_100    3\n    #define MULTIPLY_BY_1000   4\n\n    #define CHOSEN_FACTOR      MULTIPLY_BY_100\n\n    #define Foo1    1\n    #define Foo2    10\n    #define Foo3    100\n    #define Foo4    1000\n    #define FooHelper(x)    Foo##x\n    #define Foo(x)  FooHelper(x)\n\n    printf(\"%d\\n\", Foo(CHOSEN_FACTOR));\n}\n</code></pre>\n\n<p>Preprocessor abuse of this sort should be generally avoided and likely is not needed for the actual problem that motivated this question.</p>\n"}, {"tags": [], "owner": {"reputation": 661, "user_id": 5537770, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/f97da445cf7af4efd508de4586b80150?s=128&d=identicon&r=PG&f=1", "display_name": "Pryda", "link": "https://stackoverflow.com/users/5537770/pryda"}, "is_accepted": false, "score": 0, "last_activity_date": 1546514221, "creation_date": 1546514221, "answer_id": 54021255, "question_id": 54005675, "link": "https://stackoverflow.com/questions/54005675/using-switch-with-macros/54021255#54021255", "title": "Using Switch With MACROS", "body": "<p>Thank you all for your answers. I was looking for a specific solution and I guess I found it.</p>\n\n<pre><code>#define MULTIPLY_BY_1      0\n#define MULTIPLY_BY_10     1\n#define MULTIPLY_BY_100    2\n#define MULTIPLY_BY_1000   3\n\nconst struct\n{\n  uint8_t index;\n  uint16_t value;\n}myArray[] = {\n  {MULTIPLY_BY_1, 1},\n  {MULTIPLY_BY_10, 10},\n  {MULTIPLY_BY_100, 100},\n  {MULTIPLY_BY_1000, 1000}\n};\n\n#define CHOSEN_VALUE MULTIPLY_BY_10\n\nconst uint16_t result = myArray[CHOSEN_VALUE].value;\n\nvoid foo(void)\n{\n   printf(\"%d\", result); // 10\n}\n</code></pre>\n"}], "owner": {"reputation": 661, "user_id": 5537770, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/f97da445cf7af4efd508de4586b80150?s=128&d=identicon&r=PG&f=1", "display_name": "Pryda", "link": "https://stackoverflow.com/users/5537770/pryda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 198, "favorite_count": 0, "answer_count": 4, "score": -1, "last_activity_date": 1546514221, "creation_date": 1546429184, "last_edit_date": 1546433866, "question_id": 54005675, "link": "https://stackoverflow.com/questions/54005675/using-switch-with-macros", "title": "Using Switch With MACROS", "body": "<p>I am trying to simulate Switch statement using macros in my Header file (.h) .</p>\n\n<p>I have some predefined macros:</p>\n\n<pre><code>#define MULTIPLY_BY_1      1\n#define MULTIPLY_BY_10     2\n#define MULTIPLY_BY_100    3\n#define MULTIPLY_BY_1000   4\n\n#define CHOSEN_FACTOR      MULTIPLY_BY_100\n</code></pre>\n\n<p>I have a <code>const  result</code> that takes a value according to <code>CHOSEN_FACTOR</code> (The user will define this macro). I am in the header file and I want to \"simulate\" the switch statement like this:</p>\n\n<pre><code>switch(CHOSEN_VALUE)\n{\n  case MULTIPLY_BY_1:\n    const uint16_t result = 5;\n    break;\n  case MULTIPLY_BY_10:\n    const uint16_t result = 50;\n    break;\n  case MULTIPLY_BY_100:\n    const uint16_t result = 500;\n    break;\n  case MULTIPLY_BY_1000:\n    const uint16_t result = 50000;\n    break;\n\n  default:\n    break;\n}\n</code></pre>\n\n<p>EDIT:</p>\n\n<p>In the source file (.c), I want to use result like this:</p>\n\n<pre><code>uint16_t foo(void)\n{\n  uint16_t myFoo = getMyFooValue();\n  return result * myFoo;\n}\n</code></pre>\n\n<p>Is there any macros-based-solution to so ? Is there a more optimised approach to get the same result ? </p>\n"}, {"tags": ["c", "matrix", "character"], "comments": [{"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1546428000, "post_id": 54005280, "comment_id": 94847419, "body": "Why are you writing pointer values to a file (at <code>fwrite((*matrix)[i][j], sizeof(char *), 1, u);</code>)?"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1546428138, "post_id": 54005280, "comment_id": 94847471, "body": "You probably need to set <code>j = 0;</code> inside the outer <code>while</code> loop, before the start of the inner <code>while</code> loop."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1546428254, "post_id": 54005280, "comment_id": 94847511, "body": "<code>(*matrix)[i][j] = NULL;</code> and <code>(*matrix)[i] = NULL;</code> leak memory."}, {"owner": {"reputation": 17209, "user_id": 1055118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/44Trt.jpg?s=128&g=1", "display_name": "doctorlove", "link": "https://stackoverflow.com/users/1055118/doctorlove"}, "edited": false, "score": 0, "creation_date": 1546428758, "post_id": 54005280, "comment_id": 94847779, "body": "Just before the string duplicate call, you have allocated memory of <code>sizeof(char *)*(j + 1));</code>, where <code>j</code> is 0. So, 1 char. Surely you need to check how long your strings are?"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "reply_to_user": {"reputation": 17209, "user_id": 1055118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/44Trt.jpg?s=128&g=1", "display_name": "doctorlove", "link": "https://stackoverflow.com/users/1055118/doctorlove"}, "edited": false, "score": 0, "creation_date": 1546429021, "post_id": 54005280, "comment_id": 94847927, "body": "@doctorlove I think that is just extending the array of char pointers by 1. The allocation for the string is done by the <code>_strdup</code> call and the returned pointer is stored in the newly created space."}, {"owner": {"reputation": 1, "user_id": 10854964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/debfdd9a732d40339ef2dd969120dc72?s=128&d=identicon&r=PG&f=1", "display_name": "Andre", "link": "https://stackoverflow.com/users/10854964/andre"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1546435110, "post_id": 54005280, "comment_id": 94850676, "body": "@IanAbbott the pointer stores my word from the text that I want to show"}, {"owner": {"reputation": 1, "user_id": 10854964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/debfdd9a732d40339ef2dd969120dc72?s=128&d=identicon&r=PG&f=1", "display_name": "Andre", "link": "https://stackoverflow.com/users/10854964/andre"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1546435257, "post_id": 54005280, "comment_id": 94850745, "body": "@IanAbbott is there another way to write it in the binary file? Sorry I ask such this question but I&#39;m totally beginner at binary files."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1546444023, "post_id": 54005280, "comment_id": 94855062, "body": "Provide example of your input file."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1546453996, "post_id": 54005280, "comment_id": 94859558, "body": "&quot;is there another way to write it in the binary file?&quot; You probably need to write the actual string contents rather than a pointer to the string contents, because the pointer will be meaningless and invalid for whatever program reads back the binary file. You&#39;ll need to take account of the fact that strings are variable length, so you will either need to write the null terminator after the string, or write a string length before writing the string. (Writing the length first may be more useful for whatever reads the string back from the file so it knows how much memory to allocate.)"}, {"owner": {"reputation": 1, "user_id": 10854964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/debfdd9a732d40339ef2dd969120dc72?s=128&d=identicon&r=PG&f=1", "display_name": "Andre", "link": "https://stackoverflow.com/users/10854964/andre"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1546470588, "post_id": 54005280, "comment_id": 94865839, "body": "@ryyker  Afiseaza pe ecran continutul fisierului de intrare, mai putin primele m si ultimele n linii (1p). Valorile m si n si numele fisierului de"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1546520593, "post_id": 54005280, "comment_id": 94881748, "body": "V-a\u021bi oprit comentariul &#238;n mijlocul propozi\u021biei \u0219i nu mi-a\u021bi adresat solicitarea. Pute\u021bi edita postarea dvs. cu c&#226;teva linii de con\u021binut pentru un fi\u0219ier de intrare normal? (De asemenea, folosi\u021bi engleza &#238;n orice comentarii.)"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1546527610, "post_id": 54005280, "comment_id": 94885876, "body": "See additional responses to your questions in comments under my answer..."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10854964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/debfdd9a732d40339ef2dd969120dc72?s=128&d=identicon&r=PG&f=1", "display_name": "Andre", "link": "https://stackoverflow.com/users/10854964/andre"}, "edited": false, "score": 0, "creation_date": 1546470055, "post_id": 54007236, "comment_id": 94865702, "body": "ok, I&#39;ve got the memory thing, but I have a question: why at the first calloc instead of  arr = calloc(hR, sizeof(char *)); you did&#39;t do  arr = calloc(hR, sizeof(char ***)); and the following ones with sizeof(char **), (char *) ?"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 1, "user_id": 10854964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/debfdd9a732d40339ef2dd969120dc72?s=128&d=identicon&r=PG&f=1", "display_name": "Andre", "link": "https://stackoverflow.com/users/10854964/andre"}, "edited": false, "score": 0, "creation_date": 1546519940, "post_id": 54007236, "comment_id": 94881353, "body": "Because the size of memory being created is <code>== sizeof (char *)</code>.  That is a 32bit memory location for a <code>char ***</code> is the same as that for a <code>char *</code> and the same for a <code>char ******</code>.  They are all 4 bytes.  If using 64bit addressing, then the size for each of them would be 8 bytes.  You can easily prove this by simply executing <code>int size = sizeof(char *);</code> then <code>int size2 = sizeof(char ******);</code>.  <code>size</code> and <code>size2</code> will be the same value.  They are just pointers.  The first is a pointer to a <code>char</code> sized memory location, the address for which takes 4 bytes, the second is a ..."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 1, "user_id": 10854964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/debfdd9a732d40339ef2dd969120dc72?s=128&d=identicon&r=PG&f=1", "display_name": "Andre", "link": "https://stackoverflow.com/users/10854964/andre"}, "edited": false, "score": 0, "creation_date": 1546521830, "post_id": 54007236, "comment_id": 94882420, "body": "... pointer to a bunch of other pointers, i.e. <code>char *****</code>, still only requires 4 bytes, as does <code>char ****</code>, and <code>char ***</code>, and so on.   Keep in mind using more than 2 pointers (eg. <code>char **var</code> is rarely if ever needed to read and parse a file.  But when they <b><i>are</i></b> used it is for the purpose of creating addressable locations to <i>simulate</i> array like indexing, as illustrated in the answer, where  In the example above, there are 2 blocks, each with 4 rows, each of those with 6 columns.  All 48 of those are memory locations pointing to indexable space enough for 8 char."}, {"owner": {"reputation": 1, "user_id": 10854964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/debfdd9a732d40339ef2dd969120dc72?s=128&d=identicon&r=PG&f=1", "display_name": "Andre", "link": "https://stackoverflow.com/users/10854964/andre"}, "edited": false, "score": 0, "creation_date": 1546550829, "post_id": 54007236, "comment_id": 94896410, "body": "okk, but if I&#39;ve got a matrix of strings like in my programm, I don&#39;t know the right dimensions, right? I could I know how much memory I should storage , without giving random numbers at malloc?"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 1, "user_id": 10854964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/debfdd9a732d40339ef2dd969120dc72?s=128&d=identicon&r=PG&f=1", "display_name": "Andre", "link": "https://stackoverflow.com/users/10854964/andre"}, "edited": false, "score": 0, "creation_date": 1546553115, "post_id": 54007236, "comment_id": 94897220, "body": "@Andre  - I typically read through the file first (using <code>fopen</code>, <code>fgets</code>, <code>strtok</code>, <code>fclose</code>, etc., to determine things like longest line and number of lines, or word count, longest word, depending on what I need in that program.  Then use those values to create a 2D matrix with number of strings, and length of longest string as the arguments (like the example code I provided, except with only 2 arguments)"}], "tags": [], "owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "is_accepted": false, "score": 0, "last_activity_date": 1546522793, "last_edit_date": 1546522793, "creation_date": 1546435706, "answer_id": 54007236, "question_id": 54005280, "link": "https://stackoverflow.com/questions/54005280/characters-matrix-written-in-a-binary-file/54007236#54007236", "title": "Characters matrix written in a binary file", "body": "<p>The call to <code>_strdup</code> is likely failing because memory for <code>(*matrix)[i][j]</code> has not been allocated properly..</p>\n\n<p>Using as many pointers as you are to read words from a file is not necessary, but given that you <em>are</em> using them, memory needs to be created for each, in the right order.</p>\n\n<p>That is</p>\n\n<pre><code>matrix = malloc(sizeof(char *));\n</code></pre>\n\n<p>is the first of locations required before creating any others</p>\n\n<p>For example, the method to create a properly allocated collection of pointers, for a <em>4 dimension array</em>, might look like this:  </p>\n\n<pre><code>char **** Create4D(int hR, int p, int c, int r)     \n{\n    char ****arr;\n    int    w,x,y;\n\n    arr = calloc(hR, sizeof(char *));\n    for(w=0;w&lt;hR;w++)\n    {\n        arr[w] = calloc(p, sizeof(char *));\n        for(x=0;x&lt;p;x++)\n        {\n            arr[w][x] = calloc(c, sizeof(char *));\n            for(y=0;y&lt;c;y++)\n            {                                        \n                arr[w][x][y] = calloc(r, 1); \n                                      // ^ sizeof(char) == 1\n            }\n        }\n    }\n    return arr;\n}\n</code></pre>\n\n<p>Note the italicized is to remind you that this is not actually creating a <em>matrix</em>, just a collection of memory addresses, some with space for pointers, others with space for strings of <code>char</code>.</p>\n\n<p>To call this function:</p>\n\n<pre><code>char ****matrix = Create4D(2, 4, 6, 8);\nif(matrix)//always test for success.  If failed, matrix is set to NULL.\n{ \n    //use matrix\n    //With these arguments, 48 (2*4*6) pointers are created, \n    //each with space allocated to contain strings of 8 char each\n    ....\n</code></pre>\n\n<p>Note also that in all of these calls, casting the return of [m][c]alloc is not used here, <em><a href=\"https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">because it is not recommended in C</a></em>.  Also, if you plan create all of this memory, corresponding calls to <code>free()</code> must be made for each call to <code>calloc()</code>.</p>\n\n<p>Memory from calling the method above on my system is illustrated here:</p>\n\n<p><a href=\"https://i.stack.imgur.com/CR4LO.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CR4LO.jpg\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 1, "user_id": 10854964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/debfdd9a732d40339ef2dd969120dc72?s=128&d=identicon&r=PG&f=1", "display_name": "Andre", "link": "https://stackoverflow.com/users/10854964/andre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1546522793, "creation_date": 1546427531, "last_edit_date": 1546437598, "question_id": 54005280, "link": "https://stackoverflow.com/questions/54005280/characters-matrix-written-in-a-binary-file", "title": "Characters matrix written in a binary file", "body": "<p>I have a text file from which I read words. After that, I have to write in a binary file each word and near it the row and column where it appears. At _strdup(p) my programm crashes. Does anyone know why? I would appreciate your help. Here is the code:</p>\n\n<pre><code>void create(const char *filename, const char ****matrix) {\n\n    FILE *u, *f;\n    u = fopen(filename, \"wb\");\n    assert(u != NULL);\n    f = fopen(\"in.txt\", \"r\");\n    assert(f != NULL);\n    (*matrix) = (char ***)malloc(sizeof(char **) * 1);\n    int i = 0;\n    int j=0; char buff[1024];\n    while (fgets(buff, 1024, f)!=NULL) {\n\n        (*matrix) = realloc((*matrix), (i + 1) * sizeof(char **));\n        char *p = strtok(buff, \" ().,\");\n        (*matrix)[i] = (char **)malloc(sizeof(char *));\n        while (p) {\n\n                (*matrix)[i] = (char **)realloc((*matrix)[i], sizeof(char *)*(j + 1));\n                strcpy((*matrix)[i], buff);\n                (*matrix)[i][j] = _strdup(p);\n\n                fwrite((*matrix)[i][j], sizeof(char *), 1, u);\n                fwrite(&amp;i, sizeof(int), 1, u);\n                fwrite(&amp;i, sizeof(int), 1, u);\n                j++;\n\n                (*matrix)[i][j] = NULL;\n\n            p = strtok(NULL, \" ().,\");\n        }\n        (*matrix)[i] = NULL;\n        i++;\n        printf(\"\\n\");\n\n    }\n    fclose(u);\n    fclose(f);\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "arm", "bare-metal", "newlib"], "comments": [{"owner": {"reputation": 19253, "user_id": 657267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1dcf516021abb964aecd6ae2386fd59d?s=128&d=identicon&r=PG", "display_name": "user657267", "link": "https://stackoverflow.com/users/657267/user657267"}, "edited": false, "score": 0, "creation_date": 1546426814, "post_id": 54005091, "comment_id": 94846914, "body": "Dump the imports with <code>objdump</code>?"}, {"owner": {"reputation": 593, "user_id": 4599151, "user_type": "registered", "accept_rate": 6, "profile_image": "https://graph.facebook.com/1050011471682240/picture?type=large", "display_name": "Karolis Milie\u0161ka", "link": "https://stackoverflow.com/users/4599151/karolis-milie%c5%a1ka"}, "reply_to_user": {"reputation": 19253, "user_id": 657267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1dcf516021abb964aecd6ae2386fd59d?s=128&d=identicon&r=PG", "display_name": "user657267", "link": "https://stackoverflow.com/users/657267/user657267"}, "edited": false, "score": 0, "creation_date": 1546443441, "post_id": 54005091, "comment_id": 94854753, "body": "How to do that only for newlib&#39;s imports? I can dump all symbols, but not sure what you meant."}, {"owner": {"reputation": 3545, "user_id": 4017881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe8b3f2a230655ae601b95f7e490d507?s=128&d=identicon&r=PG", "display_name": "Frant", "link": "https://stackoverflow.com/users/4017881/frant"}, "edited": false, "score": 0, "creation_date": 1546448380, "post_id": 54005091, "comment_id": 94857265, "body": "Are you using  existing, complete custom linker scripts, which should then already contain definitions for __init_array_start and friends, or working on creating such custom linker scripts from scratch? By the way, the following command should give you the default linker script used by your toolchain linker: arm-none-eabi-ld --verbose."}, {"owner": {"reputation": 593, "user_id": 4599151, "user_type": "registered", "accept_rate": 6, "profile_image": "https://graph.facebook.com/1050011471682240/picture?type=large", "display_name": "Karolis Milie\u0161ka", "link": "https://stackoverflow.com/users/4599151/karolis-milie%c5%a1ka"}, "edited": false, "score": 0, "creation_date": 1546849830, "post_id": 54005091, "comment_id": 94974340, "body": "I am building LD script from scratch. Also, I am interested in learning about newlib by learning what symbols it uses. I am switching form other toolchain so it is valuable information to me."}, {"owner": {"reputation": 3545, "user_id": 4017881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe8b3f2a230655ae601b95f7e490d507?s=128&d=identicon&r=PG", "display_name": "Frant", "link": "https://stackoverflow.com/users/4017881/frant"}, "edited": false, "score": 0, "creation_date": 1547041582, "post_id": 54005091, "comment_id": 95055238, "body": "Run arm-none-eabi-ld --verbose then."}, {"owner": {"reputation": 3545, "user_id": 4017881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe8b3f2a230655ae601b95f7e490d507?s=128&d=identicon&r=PG", "display_name": "Frant", "link": "https://stackoverflow.com/users/4017881/frant"}, "edited": false, "score": 0, "creation_date": 1550029440, "post_id": 54005091, "comment_id": 96115344, "body": "Did  running arm-none-eabi-ld --verbose help ?"}], "owner": {"reputation": 593, "user_id": 4599151, "user_type": "registered", "accept_rate": 6, "profile_image": "https://graph.facebook.com/1050011471682240/picture?type=large", "display_name": "Karolis Milie\u0161ka", "link": "https://stackoverflow.com/users/4599151/karolis-milie%c5%a1ka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 131, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1546426632, "creation_date": 1546426632, "question_id": 54005091, "link": "https://stackoverflow.com/questions/54005091/symbols-required-by-newlib", "title": "Symbols required by newlib", "body": "<p>Can I find somewhere where all symbols required by (referenced by) <code>newlib</code> are listed? For example, I know <code>newlib</code> needs <code>end</code> or <code>__init_array_start(end)</code> symbols, but that comes from know-how, not from an official doc.</p>\n\n<p>I am an embedded software for ARM engineer and using custom linker scripts with arm-none-eabi GCC toolchain by ARM.</p>\n\n<p>Thank you in advance.</p>\n"}, {"tags": ["c", "mpi", "communication", "ring"], "answers": [{"comments": [{"owner": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 1, "creation_date": 1546433107, "post_id": 54004865, "comment_id": 94849727, "body": "Simply <code>MPI_Wait(&amp;req)</code> after <code>MPI_Recv()</code>. <code>MPI_Barrier()</code> is an overkill and does not even guarantee the message will be sent. <code>MPI_Request_free()</code> is not needed here."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "reply_to_user": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 0, "creation_date": 1546436731, "post_id": 54004865, "comment_id": 94851474, "body": "Indeed, that&#39;s true. Changing the answer."}], "tags": [], "owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "is_accepted": false, "score": 2, "last_activity_date": 1546436751, "last_edit_date": 1546436751, "creation_date": 1546425657, "answer_id": 54004865, "question_id": 54004822, "link": "https://stackoverflow.com/questions/54004822/mpi-ring-communication-deadlock/54004865#54004865", "title": "MPI Ring Communication deadlock", "body": "<p>You are creating a new send message, freeing it before it completes and then call receive:</p>\n\n<pre><code>MPI_Isend(points, size*DIMS, MPI_FLOAT, sending_to, 0, MPI_COMM_WORLD, &amp;req);\nMPI_Request_free(&amp;req);\n\nMPI_Recv(query_points, size*DIMS, MPI_FLOAT, receiving_from, 0, MPI_COMM_WORLD, MPI_STATUS_IGNORE);\n</code></pre>\n\n<p>You should free the request after the message is sent:</p>\n\n<pre><code>MPI_Isend(points, size*DIMS, MPI_FLOAT, sending_to, 0, MPI_COMM_WORLD, &amp;req);\nMPI_Recv(query_points, size*DIMS, MPI_FLOAT, receiving_from, 0, MPI_COMM_WORLD, MPI_STATUS_IGNORE);\nMPI_Wait(&amp;req);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 10857291, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-om0QWQapOws/AAAAAAAAAAI/AAAAAAAAANg/PuYnVAgvkDI/photo.jpg?sz=128", "display_name": "Johnny Fli", "link": "https://stackoverflow.com/users/10857291/johnny-fli"}, "is_accepted": false, "score": 0, "last_activity_date": 1546426288, "creation_date": 1546426288, "answer_id": 54005012, "question_id": 54004822, "link": "https://stackoverflow.com/questions/54004822/mpi-ring-communication-deadlock/54005012#54005012", "title": "MPI Ring Communication deadlock", "body": "<p>I'm sorry guys, had to post it to discover what was wrong right afterwards.\nProcess Ids in receiving_from and  sending_to are mixed up since the second iteration. </p>\n"}, {"tags": [], "owner": {"reputation": 25, "user_id": 8225956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ca7fd66be9872496912dbdd7567f83d?s=128&d=identicon&r=PG&f=1", "display_name": "Hanaa Ibrahim", "link": "https://stackoverflow.com/users/8225956/hanaa-ibrahim"}, "is_accepted": false, "score": -1, "last_activity_date": 1583169882, "creation_date": 1583169882, "answer_id": 60493800, "question_id": 54004822, "link": "https://stackoverflow.com/questions/54004822/mpi-ring-communication-deadlock/60493800#60493800", "title": "MPI Ring Communication deadlock", "body": "<p>I don't know why there is a loop in the first place but I hope your problem is fixed.</p>\n"}], "owner": {"reputation": 1, "user_id": 10857291, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-om0QWQapOws/AAAAAAAAAAI/AAAAAAAAANg/PuYnVAgvkDI/photo.jpg?sz=128", "display_name": "Johnny Fli", "link": "https://stackoverflow.com/users/10857291/johnny-fli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 230, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1583169882, "creation_date": 1546425498, "question_id": 54004822, "link": "https://stackoverflow.com/questions/54004822/mpi-ring-communication-deadlock", "title": "MPI Ring Communication deadlock", "body": "<p>While experimenting for a school mpi project wrote this and wondering why it doesn't work:\nWhat I want to do is simply pass all points in points to the next process (process with rank processId+1) and receive the ones from the previous. Then do the same thing receiving from the one sending to in the previous iteration and sending to the next one (processId+2 and so on).\nAlthough it executes neatly for 2 processes, when I get to run it with 4,8,.. processes, it deadlocks after the first iteration.</p>\n\n<pre><code>if(processId!=noProcesses-1)\n    sending_to=processId+1;\nelse\n    sending_to=0;\n\nif(processId!=0)\n    receiving_from=processId-1;\nelse\n    receiving_from=noProcesses-1;\n\nfor(l=1;l&lt;noProcesses;l++)\n// ring communication with non-blocking methods\n{\n    printf(\"PROCESS %d: Iteration %d: sending_to=%d/receiving_from=%d\\n\",processId,l,sending_to,receiving_from);\n\n    MPI_Isend(points, size*DIMS, MPI_FLOAT, sending_to, 0, MPI_COMM_WORLD, &amp;req);\n    MPI_Request_free(&amp;req);\n\n    MPI_Recv(query_points, size*DIMS, MPI_FLOAT, receiving_from, 0, MPI_COMM_WORLD, MPI_STATUS_IGNORE);\n\n    receiving_from=sending_to;\n\n    if(sending_to==noProcesses-1) {\n        sending_to=0;\n    } else {\n        sending_to++;\n    }\n}\n</code></pre>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c", "raspberry-pi3", "odroid", "wiringpi"], "comments": [{"owner": {"reputation": 1632, "user_id": 2429333, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5eb897104dc190de7ea7da0ac29a59ae?s=128&d=identicon&r=PG", "display_name": "pbn", "link": "https://stackoverflow.com/users/2429333/pbn"}, "edited": false, "score": 0, "creation_date": 1546425891, "post_id": 54004785, "comment_id": 94846472, "body": "Did you provide your compiler collection an argument to link <code>wiringPi</code>? There is a snippet on the page you linked that does exactly that. It&#39;s the first snipper in Odroid-C2 section (look at <code>-lwiringPi</code> argument). Also take a look <a href=\"https://www.rapidtables.com/code/linux/gcc/gcc-l.html\" rel=\"nofollow noreferrer\">at gcc&#39;s <code>-l</code> option</a>"}, {"owner": {"reputation": 65, "user_id": 10754462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6eecdc55e48b1321546b3d1080a1ab0f?s=128&d=identicon&r=PG&f=1", "display_name": "Bob SO", "link": "https://stackoverflow.com/users/10754462/bob-so"}, "reply_to_user": {"reputation": 1632, "user_id": 2429333, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5eb897104dc190de7ea7da0ac29a59ae?s=128&d=identicon&r=PG", "display_name": "pbn", "link": "https://stackoverflow.com/users/2429333/pbn"}, "edited": false, "score": 0, "creation_date": 1546426403, "post_id": 54004785, "comment_id": 94846714, "body": "I use the following command to compile the file in Geany: <code>gcc -Wall -c &quot;%f&quot; -lwiringPi</code>"}, {"owner": {"reputation": 1632, "user_id": 2429333, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5eb897104dc190de7ea7da0ac29a59ae?s=128&d=identicon&r=PG", "display_name": "pbn", "link": "https://stackoverflow.com/users/2429333/pbn"}, "edited": false, "score": 0, "creation_date": 1546427408, "post_id": 54004785, "comment_id": 94847171, "body": "What happens when you add <code>extern          void wiringPiSetup\t(void);</code> before <code>int main</code>?"}, {"owner": {"reputation": 65, "user_id": 10754462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6eecdc55e48b1321546b3d1080a1ab0f?s=128&d=identicon&r=PG&f=1", "display_name": "Bob SO", "link": "https://stackoverflow.com/users/10754462/bob-so"}, "reply_to_user": {"reputation": 1632, "user_id": 2429333, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5eb897104dc190de7ea7da0ac29a59ae?s=128&d=identicon&r=PG", "display_name": "pbn", "link": "https://stackoverflow.com/users/2429333/pbn"}, "edited": false, "score": 0, "creation_date": 1546427810, "post_id": 54004785, "comment_id": 94847351, "body": "After adding above line a new error appears: <code>undefined reference to wiringPiSetup</code>"}, {"owner": {"reputation": 1632, "user_id": 2429333, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5eb897104dc190de7ea7da0ac29a59ae?s=128&d=identicon&r=PG", "display_name": "pbn", "link": "https://stackoverflow.com/users/2429333/pbn"}, "edited": false, "score": 0, "creation_date": 1546428117, "post_id": 54004785, "comment_id": 94847460, "body": "Well it means that <code>wiringPi</code> library is not available under default path."}, {"owner": {"reputation": 1632, "user_id": 2429333, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5eb897104dc190de7ea7da0ac29a59ae?s=128&d=identicon&r=PG", "display_name": "pbn", "link": "https://stackoverflow.com/users/2429333/pbn"}, "edited": false, "score": 0, "creation_date": 1546428215, "post_id": 54004785, "comment_id": 94847496, "body": "You can check the paths by using <a href=\"https://stackoverflow.com/a/29546339/2429333\">this answer</a>"}, {"owner": {"reputation": 1632, "user_id": 2429333, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5eb897104dc190de7ea7da0ac29a59ae?s=128&d=identicon&r=PG", "display_name": "pbn", "link": "https://stackoverflow.com/users/2429333/pbn"}, "edited": false, "score": 0, "creation_date": 1546428519, "post_id": 54004785, "comment_id": 94847658, "body": "IIRC when you are not providing any <code>-L</code> option to the compiler you will get only the libraries that are listed by running <code>ldconfig --verbose</code>."}, {"owner": {"reputation": 65, "user_id": 10754462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6eecdc55e48b1321546b3d1080a1ab0f?s=128&d=identicon&r=PG&f=1", "display_name": "Bob SO", "link": "https://stackoverflow.com/users/10754462/bob-so"}, "reply_to_user": {"reputation": 1632, "user_id": 2429333, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5eb897104dc190de7ea7da0ac29a59ae?s=128&d=identicon&r=PG", "display_name": "pbn", "link": "https://stackoverflow.com/users/2429333/pbn"}, "edited": false, "score": 0, "creation_date": 1546429345, "post_id": 54004785, "comment_id": 94848064, "body": "After running <code>ldconfig --verbose</code> I get: <code>&#47;usr&#47;local&#47;lib:</code>          <code>libwiringPi.so  -&gt; libwiringPi.so.2.44</code> and           <code>libwiringPiDev.so  -&gt; libwiringPiDev.so.2.44</code>."}, {"owner": {"reputation": 1632, "user_id": 2429333, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5eb897104dc190de7ea7da0ac29a59ae?s=128&d=identicon&r=PG", "display_name": "pbn", "link": "https://stackoverflow.com/users/2429333/pbn"}, "edited": false, "score": 0, "creation_date": 1546429866, "post_id": 54004785, "comment_id": 94848248, "body": "Could you check if <code>wiringPiSetup</code> symbol is in <code>libwiringPi.so</code> by running <code>nm -g &#47;usr&#47;local&#47;lib&#47;libwiringPi.so</code>?"}, {"owner": {"reputation": 65, "user_id": 10754462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6eecdc55e48b1321546b3d1080a1ab0f?s=128&d=identicon&r=PG&f=1", "display_name": "Bob SO", "link": "https://stackoverflow.com/users/10754462/bob-so"}, "reply_to_user": {"reputation": 1632, "user_id": 2429333, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5eb897104dc190de7ea7da0ac29a59ae?s=128&d=identicon&r=PG", "display_name": "pbn", "link": "https://stackoverflow.com/users/2429333/pbn"}, "edited": false, "score": 0, "creation_date": 1546435397, "post_id": 54004785, "comment_id": 94850812, "body": "After running above commend I&#39;ve just got list of some &quot;functions&quot; (or someting like that) with I suppose adresses written in hex on the left. I&#39;m not familiar with linux-systems, so is this correct? There is <code>wiringPiSetup</code> on this list."}, {"owner": {"reputation": 1632, "user_id": 2429333, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5eb897104dc190de7ea7da0ac29a59ae?s=128&d=identicon&r=PG", "display_name": "pbn", "link": "https://stackoverflow.com/users/2429333/pbn"}, "edited": false, "score": 0, "creation_date": 1546436361, "post_id": 54004785, "comment_id": 94851291, "body": "This is a list of symbols defined in the library. It&#39;s a wild guess but try changing options order in build command to <code>gcc -Wall -lwiringPi -c &quot;%f&quot;</code>."}, {"owner": {"reputation": 65, "user_id": 10754462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6eecdc55e48b1321546b3d1080a1ab0f?s=128&d=identicon&r=PG&f=1", "display_name": "Bob SO", "link": "https://stackoverflow.com/users/10754462/bob-so"}, "reply_to_user": {"reputation": 1632, "user_id": 2429333, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5eb897104dc190de7ea7da0ac29a59ae?s=128&d=identicon&r=PG", "display_name": "pbn", "link": "https://stackoverflow.com/users/2429333/pbn"}, "edited": false, "score": 0, "creation_date": 1546437337, "post_id": 54004785, "comment_id": 94851769, "body": "I&#39;ve tried but still is wrong."}, {"owner": {"reputation": 1632, "user_id": 2429333, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5eb897104dc190de7ea7da0ac29a59ae?s=128&d=identicon&r=PG", "display_name": "pbn", "link": "https://stackoverflow.com/users/2429333/pbn"}, "edited": false, "score": 0, "creation_date": 1546437465, "post_id": 54004785, "comment_id": 94851830, "body": "Is there an alternative in geany to provide libraries to link to the final target? I just realised that &#39;-c&#39; means it is an intermediary object compilation. You need to add this library wiringPi to final linking."}, {"owner": {"reputation": 65, "user_id": 10754462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6eecdc55e48b1321546b3d1080a1ab0f?s=128&d=identicon&r=PG&f=1", "display_name": "Bob SO", "link": "https://stackoverflow.com/users/10754462/bob-so"}, "reply_to_user": {"reputation": 1632, "user_id": 2429333, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5eb897104dc190de7ea7da0ac29a59ae?s=128&d=identicon&r=PG", "display_name": "pbn", "link": "https://stackoverflow.com/users/2429333/pbn"}, "edited": false, "score": 0, "creation_date": 1546439037, "post_id": 54004785, "comment_id": 94852591, "body": "I&#39;m not sure that I understand correctly. After compilation,  I can click button Build which runs the following command:&#39;gcc - Wall -o &quot;%e&quot; &quot;%f&quot; -lwiringPi&#39; , but this other action while the error occures during the compilation."}, {"owner": {"reputation": 1632, "user_id": 2429333, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5eb897104dc190de7ea7da0ac29a59ae?s=128&d=identicon&r=PG", "display_name": "pbn", "link": "https://stackoverflow.com/users/2429333/pbn"}, "edited": false, "score": 1, "creation_date": 1546439535, "post_id": 54004785, "comment_id": 94852828, "body": "By the way, you are using <code>&lt;cstdio&gt;</code> . It&#39;s C++ library. Can this be related? Are you sure you are compiling with gcc and not <code>g++</code>? Maybe you should edit your <code>g++</code> compilation flags?"}, {"owner": {"reputation": 1632, "user_id": 2429333, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5eb897104dc190de7ea7da0ac29a59ae?s=128&d=identicon&r=PG", "display_name": "pbn", "link": "https://stackoverflow.com/users/2429333/pbn"}, "edited": false, "score": 1, "creation_date": 1546440073, "post_id": 54004785, "comment_id": 94853079, "body": "Regarding your understanding correctly, please read <a href=\"https://stackoverflow.com/a/6264256/2429333\">this</a> to get deeper understanding how the process works."}], "owner": {"reputation": 65, "user_id": 10754462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6eecdc55e48b1321546b3d1080a1ab0f?s=128&d=identicon&r=PG&f=1", "display_name": "Bob SO", "link": "https://stackoverflow.com/users/10754462/bob-so"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 457, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1546425337, "creation_date": 1546425337, "question_id": 54004785, "link": "https://stackoverflow.com/questions/54004785/the-problem-with-wiringpi-library-on-odroid-c2-function-not-declared-in-this-s", "title": "The problem with wiringPi library on ODROID-C2 - function not declared in this scope", "body": "<p>I work with ODROID-C2. I have installed the wiringPi library followed the instructions (from page <a href=\"https://wiki.odroid.com/odroid-c2/application_note/gpio/wiringpi\" rel=\"nofollow noreferrer\">https://wiki.odroid.com/odroid-c2/application_note/gpio/wiringpi</a>):</p>\n\n<p><code>$ sudo apt install git</code></p>\n\n<p><code>$ git clone https://github.com/hardkernel/wiringPi</code></p>\n\n<p><code>$ cd wiringPi</code></p>\n\n<p><code>$ sudo ./build</code></p>\n\n<p>and finaly I get the information \"All Done\".\nHowever during the instalation among different common warnings (e.g. \"<code>ignoring return value of ...</code>\") I get the following warning (e.g.):\n\"<code>implicit declatration of function 'pinMode' [-Wimplicit-function-declaration]</code>\".\nSimilar warnings related to the diffrent functions appear many times during library instalation. \nAfter instalation the usage of the command <code>gpio readall</code> allows to get the whole map of pins. Moreover, if I add the library to my program in <code>C</code>(<code>#include &lt;wiringPi.h&gt;</code>), the program is compiled successfully. However, when I use the command from library (e.g. <code>wiringPiSetup();</code>), the compilation fails and the following error appears:\n<code>16: error: 'wiringPiSetup' was not declared in this scope</code>.\nMy simple code bellow:</p>\n\n<pre><code>#include &lt;unistd.h&gt;\n#include &lt;wiringPi.h&gt; \n#include &lt;cstdio&gt;\nusing namespace std;\n\nint main (void)\n{\n    wiringPiSetup();\n    while (1)\n    {\n        printf(\"*** T E S T ***\\n\");\n        usleep(100000);   \n    }\n\n}\n</code></pre>\n\n<p>How can I fix the problem with wiringPi library?</p>\n"}, {"tags": ["java", "android", "c", "callback", "native"], "comments": [{"owner": {"reputation": 9, "user_id": 10857099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c14d257fb27c71cef2e014767994efb?s=128&d=identicon&r=PG&f=1", "display_name": "JohnnyWang", "link": "https://stackoverflow.com/users/10857099/johnnywang"}, "edited": false, "score": 0, "creation_date": 1546477539, "post_id": 54004611, "comment_id": 94867325, "body": "Hi, Jens, Thanks for your review.i checked all the issue in that link provided by you. And i think my issue is different from those issue in that link. the reason is that the calling thread is destroyed(DetachCurrentThread) before sendBroadcast is called, so when i delete DetachCurrentThread, the issue doesn&#39;t occur, however, other issue happen, so i need some clue for fixing the issue fundamentally."}, {"owner": {"reputation": 9, "user_id": 10857099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c14d257fb27c71cef2e014767994efb?s=128&d=identicon&r=PG&f=1", "display_name": "JohnnyWang", "link": "https://stackoverflow.com/users/10857099/johnnywang"}, "reply_to_user": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 0, "creation_date": 1546507641, "post_id": 54004611, "comment_id": 94874957, "body": "@Jens If you agree with me, please remove that maker[duplicate], thanks."}, {"owner": {"reputation": 9, "user_id": 10857099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c14d257fb27c71cef2e014767994efb?s=128&d=identicon&r=PG&f=1", "display_name": "JohnnyWang", "link": "https://stackoverflow.com/users/10857099/johnnywang"}, "reply_to_user": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 0, "creation_date": 1546836020, "post_id": 54004611, "comment_id": 94970237, "body": "@Jens If you agree with me, please remove that maker[duplicate], thanks"}, {"owner": {"reputation": 9, "user_id": 10857099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c14d257fb27c71cef2e014767994efb?s=128&d=identicon&r=PG&f=1", "display_name": "JohnnyWang", "link": "https://stackoverflow.com/users/10857099/johnnywang"}, "edited": false, "score": 0, "creation_date": 1547188653, "post_id": 54004611, "comment_id": 95114098, "body": "Duplicate is so ..."}], "owner": {"reputation": 9, "user_id": 10857099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c14d257fb27c71cef2e014767994efb?s=128&d=identicon&r=PG&f=1", "display_name": "JohnnyWang", "link": "https://stackoverflow.com/users/10857099/johnnywang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "closed_date": 1546424978, "answer_count": 0, "score": 0, "last_activity_date": 1546478643, "creation_date": 1546424568, "last_edit_date": 1546478643, "question_id": 54004611, "link": "https://stackoverflow.com/questions/54004611/how-to-fix-the-issue-about-sendbroadcast", "closed_reason": "Duplicate", "title": "How to fix the issue about sendBroadcast", "body": "<p>I create an android project, project is a service, no UI.\nJava layer(function name is onReceive) will receive a broadcast to startservice.\nAnd a native c function(function name is startService) will be called.\nThe C function(function name is SendResult) will create a thread, in this thread, it will call function(function name is SendLaResult) in Java.\nAnd the java function will sendBroadcast to another APP.\nThis is a major flow.</p>\n\n<p>The following code is sample.</p>\n\n<pre><code>    1. start work\n\npublic void onReceive(final Context context, final Intent intent) {\n...\n              new Thread() {\n                public void run() {\n                    try {\n                        String str=\"test\";\n                        startService(str);\n                        Log.i(TAG, \"startService end!!!\");\n                    }\n                    catch(Exception e) {\n                        e.printStackTrace();\n                    }\n                }\n            }.start();\n...\n}\n\n    2. native-lib.cpp, call funtion in java.\n\nvoid SendResult( LaResult         laResult)\n{\nbool isAttached = false;\nif(!isAttached) {\n    int getEnvStat = g_JavaVM-&gt;GetEnv((void **)&amp;g_env, JNI_VERSION_1_6);\n    if(getEnvStat &lt; 0) {\n        jint status = g_JavaVM-&gt;AttachCurrentThread(&amp;g_env, NULL);\n        if(status &gt;= 0) {\n            isAttached = true;\n        }\n    }\n}\n\nif(g_env == NULL) {\n    LOGE(\"g_env is NULL!!!\");\n}\njshort conf = laResult.conf ;\njshort nls = laResult.nls ;\njshort egoln = laResult.egoln ;\n\n\ng_laresult_constructor = g_env-&gt;GetMethodID(g_callback_laresult,\"&lt;init&gt;\",\"(SSSI[S)V\");\nif(g_laresult_constructor == NULL) {\n    LOGE(\"GetMethodID laresult error!!!\");\n}\njobject jparams = g_env-&gt;NewObject(g_callback_laresult, g_laresult_constructor, conf, nls, egoln);\nif(jparams == NULL) {\n    char * str=strerror(errno);\n    LOGE(\"NewObject jparams error %s !!!\" ,str);\n}\ng_mid_sendlaresult = g_env-&gt;GetMethodID(g_callback_laservice, \"SendLaResult\", \"(Lcom/xxx/xxx/xxxx/LaResult;)V\");\nif(g_mid_sendlaresult == NULL) {\n    LOGE(\"GetMethodID g_mid_sendlaresult error!!!\");\n}\njobject serviceobject = g_env-&gt;AllocObject(g_callback_laservice);\nif(serviceobject == NULL) {\n    LOGE(\"AllocObject serviceobject error!!!\");\n}\n\ng_env-&gt;CallVoidMethod(serviceobject, g_mid_sendlaresult, jparams);\n\n\ng_env-&gt;DeleteLocalRef(jparams);\nif(isAttached ) {\n    g_JavaVM-&gt;DetachCurrentThread();\n}\n\nreturn;\n</code></pre>\n\n<p>}</p>\n\n<pre><code>    3.LaService.java, sendBroadcast to another APK\n  public void SendLaResult(LaResult laresult) {\n    Intent intent = new Intent();\n    intent.setAction( \"com.xxx.xxx.xxx.LA_RESULT\" );\n    intent.putExtra( \"conf\", laresult.conf);\n    Log.d( \"confidence\", Integer.toString(laneresult.confidence) );\n    intent.putExtra( \"nls\", laresult.nls);\n    Log.d( \"nLanes\", Integer.toString(laneresult.nLanes) );\n    intent.putExtra( \"egoln\", laresult.egoln);\n\n    sendBroadcast( intent );\n\n}\n    4.When the sendBroadcast is called, the following crash occur.\n--------- beginning of crash\n01-02 18:05:11.505 13501-13537/com.xxx.xxx.xxxxx\nE/AndroidRuntime: FATAL EXCEPTION: Thread-9\nProcess: com.xxx.xxx.xxxx, PID: 13501\njava.lang.NullPointerException: Attempt to invoke virtual method 'void android.content.Context.sendBroadcast(android.content.Intent)' on a null object reference\n    at android.content.ContextWrapper.sendBroadcast(ContextWrapper.java:431)\n    at com.xxx.xxx.xxxxx.xxxxxx.SendLaResult(LaService.java:94)\n</code></pre>\n\n<p>I found that the sendBroadcast is asynchronous, it is called by system finally, and return immediately. So i delete the following source code in function SendResult.</p>\n\n<pre><code>g_JavaVM-&gt;DetachCurrentThread();\n</code></pre>\n\n<p>That crash don't occur, however, the following error log occur, please refer to source code in function SendResult. </p>\n\n<pre><code>01-02 18:15:03.696 13707-13743/com.xxx.xxx.xxxx\nE/native-lib: NewObject jparams error Success !!!\n</code></pre>\n\n<p>The NewObject in function SendResult will return null when it is called secondly\uff0cfirst calling is successull. And please ignore that Success word, it is unuseful error number.</p>\n\n<p>I don't have any clue for fixing the issue fundamentally.\nWho can provide some instruction?</p>\n"}, {"tags": ["python", "c", "promela", "spin"], "answers": [{"comments": [{"owner": {"reputation": 6681, "user_id": 6024122, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-uiRWa4coXLs/AAAAAAAAAAI/AAAAAAAAJUs/5BxfhSS1bUY/photo.jpg?sz=128", "display_name": "Patrick Trentin", "link": "https://stackoverflow.com/users/6024122/patrick-trentin"}, "edited": false, "score": 0, "creation_date": 1546440719, "post_id": 54008320, "comment_id": 94853368, "body": "Upvoted, since you beat me to it and it works, but there is also an alternative solution ;)"}, {"owner": {"reputation": 2026, "user_id": 1406083, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1gC8p.jpg?s=128&g=1", "display_name": "Billy Brown", "link": "https://stackoverflow.com/users/1406083/billy-brown"}, "reply_to_user": {"reputation": 6681, "user_id": 6024122, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-uiRWa4coXLs/AAAAAAAAAAI/AAAAAAAAJUs/5BxfhSS1bUY/photo.jpg?sz=128", "display_name": "Patrick Trentin", "link": "https://stackoverflow.com/users/6024122/patrick-trentin"}, "edited": false, "score": 0, "creation_date": 1546440841, "post_id": 54008320, "comment_id": 94853421, "body": "@PatrickTrentin An alternative solution, but yours is the correct solution."}], "tags": [], "owner": {"reputation": 2026, "user_id": 1406083, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1gC8p.jpg?s=128&g=1", "display_name": "Billy Brown", "link": "https://stackoverflow.com/users/1406083/billy-brown"}, "is_accepted": false, "score": 1, "last_activity_date": 1546440226, "creation_date": 1546440226, "answer_id": 54008320, "question_id": 54004497, "link": "https://stackoverflow.com/questions/54004497/python-file-included-with-c-in-promela-spin-inline-text-too-long/54008320#54008320", "title": "Python file included with C in Promela/Spin: &#39;inline text too long&#39;", "body": "<p><a href=\"http://spinroot.com/fluxbb/viewtopic.php?pid=2850#p2850\" rel=\"nofollow noreferrer\">According to the spinroot website</a>:</p>\n\n<blockquote>\n  <p>The maximum length of an inline is 64K (65536 characters).</p>\n</blockquote>\n\n<p>and</p>\n\n<blockquote>\n  <p>the limit is per inline definition</p>\n</blockquote>\n\n<p><code>\"python2.7/Python.h\"</code> and some of its own includes are more than 64K, which is why you are getting this error. You cannot simply include the whole Python library into your Promela specification (at lease with spin as it is currently implemented).</p>\n\n<p>As the C code must link to the Python libraries anyway, you could provide <code>extern</code> definitions, or even a custom header file, for the elements that your C code needs in order to call your Python code.</p>\n\n<p>So in your case, in <code>minimal_python.h</code> (I am assuming <code>void</code> return types when unused):</p>\n\n<pre><code>#ifndef MINIMAL_PYTHON_H\n#define MINIMAL_PYTHON_H\n\nvoid Py_Initialize(void); \nvoid Py_Finalize(void);\n\nvoid PyRun_SimpleString(const char *);\n\nPyObject * PyImport_ImportModule(const char *);\n\nvoid PyEval_CallObject(PyObject *, void *); \nPyObject * PyObject_GetAttrString(PyObject *, const char *); \n\n#endif\n</code></pre>\n\n<p>And then <code>demo1.c</code> includes <code>minimal_python.h</code> instead of <code>python2.7/Python.h</code>.</p>\n\n<p>In your code's case, you would also need a definition for <code>printf</code> and any other standard library or Python functions, as those includes are beyond the 64K limit.</p>\n"}, {"tags": [], "owner": {"reputation": 6681, "user_id": 6024122, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-uiRWa4coXLs/AAAAAAAAAAI/AAAAAAAAJUs/5BxfhSS1bUY/photo.jpg?sz=128", "display_name": "Patrick Trentin", "link": "https://stackoverflow.com/users/6024122/patrick-trentin"}, "is_accepted": true, "score": 2, "last_activity_date": 1546440663, "creation_date": 1546440663, "answer_id": 54008415, "question_id": 54004497, "link": "https://stackoverflow.com/questions/54004497/python-file-included-with-c-in-promela-spin-inline-text-too-long/54008415#54008415", "title": "Python file included with C in Promela/Spin: &#39;inline text too long&#39;", "body": "<p>An alternative solution, which is recommended by <code>Spin</code> documentation, is to replace</p>\n\n<pre><code>c_code{\n  #include \"demo1.c\" /* the c code written above */\n}\n</code></pre>\n\n<p>with </p>\n\n<pre><code>c_code{\n  \\#include \"demo1.c\" /* the c code written above */\n}\n</code></pre>\n\n<p>This prevents the c code from being inserted into the text of the model before it is passed to the <code>Spin</code> parser. </p>\n\n<p>From the <a href=\"https://spinroot.com/spin/Doc/spin4_ch17.pdf\" rel=\"nofollow noreferrer\">docs</a>:</p>\n\n<blockquote>\n  <p>The <code>Spin</code> parser will now simply copy the <code>include</code> directive itself into the generated <code>C</code> code, without expanding it first.</p>\n  \n  <p>The backslash can only be used in this way inside <code>c_decl</code> and <code>c_code</code> statements, and it is the recommended way to handle included files in these cases.</p>\n</blockquote>\n\n<hr>\n\n<p>Sample output:</p>\n\n<pre><code>~$ spin t.pml\nspin: warning: c_code fragments remain uninterpreted\n      in random simulations with spin; use ./pan -r instead\nc_code2:    { \n         demo_fun();\n        }\nc_code3:     x == 5 \nc_code2:    { \n         demo_fun();\n        }\nc_code3:     x == 5 \nc_code2:    { \n         demo_fun();\n        }\nc_code3:     x == 5 \nc_code2:    { \n         demo_fun();\n        }\n...\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 10857131, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-WuoYPxpn904/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZx-C2YM4FWboxsWkRNnCiTvV9tkQ/mo/photo.jpg?sz=128", "display_name": "Tania Saleem", "link": "https://stackoverflow.com/users/10857131/tania-saleem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 54008415, "answer_count": 2, "score": 2, "last_activity_date": 1546440663, "creation_date": 1546424086, "last_edit_date": 1546439507, "question_id": 54004497, "link": "https://stackoverflow.com/questions/54004497/python-file-included-with-c-in-promela-spin-inline-text-too-long", "title": "Python file included with C in Promela/Spin: &#39;inline text too long&#39;", "body": "<p>I get this error message when trying to use a Python library in Promela and spin (<a href=\"https://i.stack.imgur.com/1ibHL.png\" rel=\"nofollow noreferrer\">error message screenshot</a>):</p>\n\n<pre><code>spin: /usr/include/unistd.h:778, Error: inline text too long near '/usr/include/unistd.h'\n</code></pre>\n\n<p>My Promela code is </p>\n\n<pre><code>c_code{\n  #include \"demo1.c\" /* the c code written above */\n}\n\nbool badstate = false;\n\nactive proctype driver()\n{\n  do\n    :: (1) -&gt;\n       c_code{\n         demo_fun();\n       } \n       if\n        :: c_expr{ x == 5 } -&gt;\n           badstate = true;\n        :: else -&gt;\n           skip;\n       fi;\n  od;\n}\n</code></pre>\n\n<p>Here is my <code>demo1.c</code> file, which I am including in my Promela code:</p>\n\n<pre><code>#include \"python2.7/Python.h\"\n\nvoid demo_fun(void)\n{\n    Py_Initialize(); \n    PyRun_SimpleString(\"import sys; sys.path.insert(0, '/home/zeeshan/Documents/Promela')\");\n    PyObject* pModule = NULL; \n    PyObject* pFunc   = NULL; \n    pModule = PyImport_ImportModule(\"hello\");\n    if (pModule == NULL) {\n        printf(\"Error importing module.\");\n        exit(-1);\n    }\n    pFunc = PyObject_GetAttrString(pModule, \"Hello\"); \n    PyEval_CallObject(pFunc, NULL); \n    Py_Finalize();\n}\n\nint main() \n{ \n    demo_fun();\n    return 0; \n}\n</code></pre>\n\n<p>The Python code in <code>hello.py</code> is:</p>\n\n<pre><code>def Hello():\n    a = 5\n    b = 2\n    print(\"hello world \" + str(a + b))\n</code></pre>\n\n<p>From what I understand, Promela takes the code from all included files and inlines it. The size of this code becomes larger than spin's big number after the inline and causes it to crash.</p>\n\n<p>Am I correct in thinking this? How can I fix my issue, and successfully call the Python code from my Promela specification?</p>\n"}, {"tags": ["c++", "c", "algorithm"], "comments": [{"owner": {"reputation": 463, "user_id": 6337519, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1CiVF.jpg?s=128&g=1", "display_name": "joH1", "link": "https://stackoverflow.com/users/6337519/joh1"}, "edited": false, "score": 0, "creation_date": 1546423913, "post_id": 54004394, "comment_id": 94845618, "body": "If you&#39;re asking for help and tips on improving your code, I suggest you go to (codereview.stackexchange.com)[codereview.stackexchange.com]&zwnj;&#8203;. Otherwise can you maker it clearer what your question is about?"}, {"owner": {"reputation": 147, "user_id": 9780666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94d91c926014d5a7c93eb7e07f6a4776?s=128&d=identicon&r=PG&f=1", "display_name": "Giorgi Lagidze", "link": "https://stackoverflow.com/users/9780666/giorgi-lagidze"}, "reply_to_user": {"reputation": 463, "user_id": 6337519, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1CiVF.jpg?s=128&g=1", "display_name": "joH1", "link": "https://stackoverflow.com/users/6337519/joh1"}, "edited": false, "score": 0, "creation_date": 1546424064, "post_id": 54004394, "comment_id": 94845694, "body": "<a href=\"http://cs-fundamentals.com/tech-interview/c/c-program-to-count-number-of-ones-in-unsigned-integer.php\" rel=\"nofollow noreferrer\">cs-fundamentals.com/tech-interview/c/&hellip;</a> look for divide and conquer strategy algorithm. It counds the bits for unsigned integer. I need the same thing for unsigned long long."}, {"owner": {"reputation": 463, "user_id": 6337519, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1CiVF.jpg?s=128&g=1", "display_name": "joH1", "link": "https://stackoverflow.com/users/6337519/joh1"}, "edited": false, "score": 0, "creation_date": 1546424634, "post_id": 54004394, "comment_id": 94845933, "body": "You can always adapt the given solution to your needs. In this case you&#39;ll need to change the constants: for example <code>0x55555555</code>will become <code>0x5555555555555555</code> if your <code>long long</code> is 64 bits."}], "answers": [{"comments": [{"owner": {"reputation": 147, "user_id": 9780666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94d91c926014d5a7c93eb7e07f6a4776?s=128&d=identicon&r=PG&f=1", "display_name": "Giorgi Lagidze", "link": "https://stackoverflow.com/users/9780666/giorgi-lagidze"}, "edited": false, "score": 0, "creation_date": 1546423901, "post_id": 54004442, "comment_id": 94845615, "body": "but i still need the first while loop right? is it possible not to use any loop?"}, {"owner": {"reputation": 20484, "user_id": 521776, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/60dd3c3417791c535860abc76ec01f28?s=128&d=identicon&r=PG", "display_name": "BlackBear", "link": "https://stackoverflow.com/users/521776/blackbear"}, "reply_to_user": {"reputation": 1052, "user_id": 3698648, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/199b49d13342baa233c08aac5793ed4d?s=128&d=identicon&r=PG&f=1", "display_name": "ntshetty", "link": "https://stackoverflow.com/users/3698648/ntshetty"}, "edited": false, "score": 0, "creation_date": 1546428874, "post_id": 54004442, "comment_id": 94847846, "body": "@ntshetty yes, for example with n=5 you are considering the numbers between 0 and 32=2^5"}], "tags": [], "owner": {"reputation": 20484, "user_id": 521776, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/60dd3c3417791c535860abc76ec01f28?s=128&d=identicon&r=PG", "display_name": "BlackBear", "link": "https://stackoverflow.com/users/521776/blackbear"}, "is_accepted": false, "score": 2, "last_activity_date": 1546425109, "last_edit_date": 1546425109, "creation_date": 1546423851, "answer_id": 54004442, "question_id": 54004394, "link": "https://stackoverflow.com/questions/54004394/how-to-count-only-1bits-in-binary-representation-of-number-without-loop/54004442#54004442", "title": "how to count only 1bits in binary representation of number without loop", "body": "<p>Look at the bit patterns for the numbers between 0 and <code>2^3</code></p>\n\n<pre><code>000\n001\n010\n011\n100\n101\n110\n111\n</code></pre>\n\n<p>What do you see?</p>\n\n<p>Every bit is one 4 times.</p>\n\n<p>If you generalize, you find that the numbers between 0 and <code>2^n</code> have <code>n*2^(n-1)</code> bits set in total.</p>\n\n<p>I am sure you can extend this reasoning for arbitrary bounds.</p>\n"}, {"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 1, "last_activity_date": 1546424594, "creation_date": 1546424594, "answer_id": 54004616, "question_id": 54004394, "link": "https://stackoverflow.com/questions/54004394/how-to-count-only-1bits-in-binary-representation-of-number-without-loop/54004616#54004616", "title": "how to count only 1bits in binary representation of number without loop", "body": "<p>Here's how I do it for a 32 bit number.</p>\n\n<pre><code>std::uint16_t bitcount(\n    std::uint32_t n\n)\n{\n    register std::uint16_t reg;\n    reg = n - ((n &gt;&gt; 1) &amp; 033333333333)\n            - ((n &gt;&gt; 2) &amp; 011111111111);\n    return ((reg + (reg &gt;&gt; 3)) &amp; 030707070707) % 63;\n}\n</code></pre>\n\n<p>And the supporting comments from the program:</p>\n\n<p>Consider a 3 bit number as being 4a + 2b + c. If we shift it right 1 bit, we have 2a + b. Subtracting this from the original gives 2a + b + c. If we right-shift the original 3-bit number by two bits, we get a, and so with another subtraction we have a + b + c, which is the number of bits in the original number.</p>\n\n<p>The first assignment statement in the routine computes 'reg'. Each digit in the octal representation is simply the number of 1\u2019s in the corresponding three bit positions in 'n'.</p>\n\n<p>The last return statement sums these octal digits to produce the final answer. The key idea is to add adjacent pairs of octal digits together and then compute the remainder modulus 63.</p>\n\n<p>This is accomplished by right-shifting 'reg' by three bits, adding it to 'reg' itself and ANDing with a suitable mask. This yields a number in which groups of six adjacent bits (starting from the LSB) contain the number of 1\u2019s among those six positions in n. This number modulo 63 yields the final answer. For 64-bit numbers, we would have to add triples of octal digits and use modulus 1023.</p>\n"}], "owner": {"reputation": 147, "user_id": 9780666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94d91c926014d5a7c93eb7e07f6a4776?s=128&d=identicon&r=PG&f=1", "display_name": "Giorgi Lagidze", "link": "https://stackoverflow.com/users/9780666/giorgi-lagidze"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1546425109, "creation_date": 1546423618, "question_id": 54004394, "link": "https://stackoverflow.com/questions/54004394/how-to-count-only-1bits-in-binary-representation-of-number-without-loop", "title": "how to count only 1bits in binary representation of number without loop", "body": "<p>Suppose I have two numbers(minimum and maximum) . `</p>\n\n<blockquote>\n  <p>for example (0 and 9999999999)</p>\n</blockquote>\n\n<p>maximum could be so huge. now I also have some other number. it could be between those minimum and maximum number. <code>Let's say 15</code>. now What I need to do is get all the multiples of <code>15(15,30,45 and so on, until it reaches the maximum number)</code>. and for each these numbers, I have to count how many 1 bits there are in their binary representations. <code>for example, 15 has 4(because it has only 4 1bits).</code></p>\n\n<p>The problem is, I need a loop in a loop to get the result. first loop is to get all multiples of that specific number(in our example it was 15) and then for each multiple, i need another loop to count only 1bits. My solution takes so much time. Here is how I do it.</p>\n\n<pre><code>unsigned long long int min = 0;\n    unsigned long long int max = 99999999;\n    unsigned long long int other_num = 15; \n    unsigned long long int count = 0;\n\n    unsigned long long int other_num_helper = other_num;\n    while(true){\n        if(other_num_helper &gt; max) break;\n        for(int i=0;i&lt;sizeof(int)*4;i++){\n            int buff = other_num_helper &amp; 1&lt;&lt;i;\n            if(buff != 0) count++; //if bit is not 0 and is anything else, then it's 1bits.\n        }\n\n        other_num_helper+=other_num;\n\n    }\n    cout&lt;&lt;count&lt;&lt;endl;\n</code></pre>\n"}, {"tags": ["c", "strcmp"], "comments": [{"owner": {"reputation": 625, "user_id": 3140754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qceIh.jpg?s=128&g=1", "display_name": "Tom Kuschel", "link": "https://stackoverflow.com/users/3140754/tom-kuschel"}, "edited": false, "score": 2, "creation_date": 1546421520, "post_id": 54003931, "comment_id": 94844599, "body": "the index in C starts from 0. so fromAge[4] doesn&#39;t exist. The defined <code>fromAge[4]</code> is only from <code>fromAge[0]</code> to <code>fromAge[3]</code> and so on."}, {"owner": {"reputation": 4398, "user_id": 3697264, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5adc5afbd7a1145fdd762d872b4b43bb?s=128&d=identicon&r=PG", "display_name": "SPlatten", "link": "https://stackoverflow.com/users/3697264/splatten"}, "edited": false, "score": 0, "creation_date": 1546421775, "post_id": 54003931, "comment_id": 94844719, "body": "This isn&#39;t how you assign numeric values to a character array.  Use atoi()"}], "answers": [{"tags": [], "owner": {"reputation": 8351, "user_id": 4279155, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/841b7391f3f7873bec1a8d9d8d2dc759?s=128&d=identicon&r=PG&f=1", "display_name": "Dominique", "link": "https://stackoverflow.com/users/4279155/dominique"}, "is_accepted": false, "score": 2, "last_activity_date": 1546421681, "creation_date": 1546421681, "answer_id": 54003991, "question_id": 54003931, "link": "https://stackoverflow.com/questions/54003931/strcmp-on-numeric-strings/54003991#54003991", "title": "STRCMP on numeric strings", "body": "<p>You are checking strings, which means you are checking it alphabetically, and indeed : \"2\" does not come before \"1\" in the alphabet: in ASCII, the value for \"2\" is 50, while the value for \"1\" is 49, and indeed: 50 does not come before 49.</p>\n\n<p>Therefore it's always a bad idea to use numbers a strings, just treat them as numbers and everything should be fine:</p>\n\n<pre><code>int FromAge;\nint ToAge;\n...\n</code></pre>\n\n<p>Good luck</p>\n"}, {"tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": true, "score": 3, "last_activity_date": 1546423852, "last_edit_date": 1546423852, "creation_date": 1546422733, "answer_id": 54004216, "question_id": 54003931, "link": "https://stackoverflow.com/questions/54003931/strcmp-on-numeric-strings/54004216#54004216", "title": "STRCMP on numeric strings", "body": "<p><code>strcmp</code> compares strings by comparing the individual characters from left to right and it will return as soon as two characters differ. As the character <code>'1'</code> is less than the character <code>'2'</code>, the string \"100\" will be considered less than the string \"25\".</p>\n\n<p>Try this code and give the input \"100\" and \"25\"</p>\n\n<pre><code>int main()\n{\n  char toAge[4] = {0};\n  char age[4]={0};\n  scanf(\"%3s\", age);\n  scanf(\"%3s\", toAge);\n\n  // Using string compare\n  if (strcmp(age, toAge) &lt; 0)\n    printf(\"\\\"%s\\\" is less than \\\"%s\\\"\\n\", age, toAge);\n  else if (strcmp(age, toAge) &gt; 0)\n    printf(\"\\\"%s\\\" is greater than \\\"%s\\\"\\n\", age, toAge);\n  else\n    printf(\"\\\"%s\\\" is equal to \\\"%s\\\"\\n\", age, toAge);\n\n  // Using integer compare\n  if (atoi(age) &lt; atoi(toAge))\n    printf(\"%s is less than %s\\n\", age, toAge);\n  else if (atoi(age) &gt; atoi(toAge))\n    printf(\"%s is greater than %s\\n\", age, toAge);\n  else\n    printf(\"%s is equal to %s\\n\", age, toAge);\n\n  return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>\"100\" is less than \"25\"\n100 is greater than 25\n</code></pre>\n\n<p>As you can see the function <code>atoi</code> can be used to get the result you expect.</p>\n"}], "owner": {"reputation": 107, "user_id": 10700430, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eRTg7.png?s=128&g=1", "display_name": "Idan", "link": "https://stackoverflow.com/users/10700430/idan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 574, "favorite_count": 0, "accepted_answer_id": 54004216, "answer_count": 2, "score": -5, "last_activity_date": 1546423852, "creation_date": 1546421345, "last_edit_date": 1546421732, "question_id": 54003931, "link": "https://stackoverflow.com/questions/54003931/strcmp-on-numeric-strings", "title": "STRCMP on numeric strings", "body": "<p>so I have 3 variables:</p>\n\n<pre><code>char fromAge[4];\nchar toAge[4];\nchar age[4];\n</code></pre>\n\n<p>They can all have a number between 18 and 100 (include 18 and 100).\nWhen I give them the follwing values, the following statement is wrong for some reason:</p>\n\n<pre><code>fromAge[4] = 18;\ntoAge[4] = 100;\nage[4] = 25;\nif (strcmp(age, fromAge) &gt;= 0 &amp;&amp; strcmp(age, toAge) &lt;= 0)\n{\n//actions\n}\n</code></pre>\n\n<p>It thinks \"age\" isn't smaller or equals to \"toAge\".\nAny suggestions for why?</p>\n\n<p>edit:\nThis is how I assign the variables, I leave 1 byte for '\\0'</p>\n\n<pre><code>scanf(\"%s\", fromAge);\nscanf(\"%s\", toAge);\n</code></pre>\n\n<p>and age is 2,5,'\\0'</p>\n"}, {"tags": ["c", "for-loop"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1546421213, "post_id": 54003846, "comment_id": 94844482, "body": "When you declare an array with two entries, like <code>a[2]</code>, the only valid indexes are 0 and 1. But the loops and the printf are using indexes 1 and 2. One solution is to make the array bigger <code>int a[3][3]</code>."}, {"owner": {"reputation": 625, "user_id": 3140754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qceIh.jpg?s=128&g=1", "display_name": "Tom Kuschel", "link": "https://stackoverflow.com/users/3140754/tom-kuschel"}, "edited": false, "score": 1, "creation_date": 1546421315, "post_id": 54003846, "comment_id": 94844523, "body": "In C the array starts at 0 not 1, so the declared array <code>a[2][2]</code> contains <code>a[0][0]</code> upto <code>a[1][1]</code>."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1546421328, "post_id": 54003846, "comment_id": 94844528, "body": "<code>a[1][2]</code> and <code>a[2][1]</code> and <code>a[2][2]</code> do not exist. Your array has 4 elements: <code>a[0][0]</code>, <code>a[0][1]</code>, <code>a[1][0]</code>, and <code>a[1][1]</code>."}, {"owner": {"reputation": 11, "user_id": 10856998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/356958698f7703aabc1623340da6f25f?s=128&d=identicon&r=PG&f=1", "display_name": "F.Fred", "link": "https://stackoverflow.com/users/10856998/f-fred"}, "edited": false, "score": 0, "creation_date": 1546423418, "post_id": 54003846, "comment_id": 94845427, "body": "thanks for the advice... but It doesn&#39;t seem to work that way.. it is what we define in the for loop as i am able to get the results as expected. When i printed, a[0][0]..a[1][1], all values except a[1][1] had zeroes.."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1546423976, "post_id": 54003846, "comment_id": 94845650, "body": "Read <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a>."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 10856998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/356958698f7703aabc1623340da6f25f?s=128&d=identicon&r=PG&f=1", "display_name": "F.Fred", "link": "https://stackoverflow.com/users/10856998/f-fred"}, "edited": false, "score": 0, "creation_date": 1546423148, "post_id": 54003959, "comment_id": 94845304, "body": "Thanks for the help,. when i tried with my original program, i mean for(i=1;i&lt;2;i++), i still get the results with a comment as such &quot; *** stack smashing detected ***: ./a.out terminated Aborted (core dumped)&quot;.. Why is that so? should i understand something more?"}, {"owner": {"reputation": 17209, "user_id": 1055118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/44Trt.jpg?s=128&g=1", "display_name": "doctorlove", "link": "https://stackoverflow.com/users/1055118/doctorlove"}, "reply_to_user": {"reputation": 11, "user_id": 10856998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/356958698f7703aabc1623340da6f25f?s=128&d=identicon&r=PG&f=1", "display_name": "F.Fred", "link": "https://stackoverflow.com/users/10856998/f-fred"}, "edited": false, "score": 0, "creation_date": 1546424002, "post_id": 54003959, "comment_id": 94845670, "body": "When you tried what with your original program? Have you sorted the <code>printf</code> statement? If you have a core dump, you can load it in the debugger to see what went wrong where. Concentrate on making sure you don&#39;t try to access <code>[2]</code> in <code>a</code> - for either index though."}], "tags": [], "owner": {"reputation": 17209, "user_id": 1055118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/44Trt.jpg?s=128&g=1", "display_name": "doctorlove", "link": "https://stackoverflow.com/users/1055118/doctorlove"}, "is_accepted": false, "score": 4, "last_activity_date": 1546423890, "last_edit_date": 1546423890, "creation_date": 1546421476, "answer_id": 54003959, "question_id": 54003846, "link": "https://stackoverflow.com/questions/54003846/i-m-trying-to-build-a-22-array-but-my-program-asks-for-5-inputs-why/54003959#54003959", "title": "I m trying to build a 2*2 array but my program asks for 5 inputs. Why?", "body": "<p>You have declared this</p>\n\n<pre><code>int a[2][2];\n</code></pre>\n\n<p>which has four items, <code>a[0][0]</code>, <code>a[0][1]</code>, <code>a[1][0]</code> and <code>a[1][1]</code>.</p>\n\n<p>However, you are starting your indexing at <code>1</code> and going up to <code>2</code>, so are stepping out of bounds which is undefined behaviour. \nAnything can then happen.</p>\n\n<p>Change your loops i.e.:</p>\n\n<pre><code>   for(i=0;i&lt;2;i++)\n   {\n     for(j=0;j&lt;2;j++)\n     // as you were\n</code></pre>\n\n<p>to index from 0.</p>\n\n<p>You also need to consider your <code>printf</code> statement, since that oversteps too.</p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 10856998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/356958698f7703aabc1623340da6f25f?s=128&d=identicon&r=PG&f=1", "display_name": "F.Fred", "link": "https://stackoverflow.com/users/10856998/f-fred"}, "edited": false, "score": 0, "creation_date": 1546422589, "post_id": 54004115, "comment_id": 94845083, "body": "Thanks a lot.. the tab was trouble some &#39;\\t&#39;. I have one more q. when i added one more matrix with the &#39;\\t&#39; say b[2][2] in the same program(int i,j,m,n,a[2][2],b[2][2], then the fifth value that got entered after a[1][1] appeared as the first value in the b[0][0]. Where was it stored then?(should i specify the code?)"}], "tags": [], "owner": {"reputation": 527, "user_id": 10488746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vTDhZ.jpg?s=128&g=1", "display_name": "H.cohen", "link": "https://stackoverflow.com/users/10488746/h-cohen"}, "is_accepted": true, "score": 2, "last_activity_date": 1546422272, "creation_date": 1546422272, "answer_id": 54004115, "question_id": 54003846, "link": "https://stackoverflow.com/questions/54003846/i-m-trying-to-build-a-22-array-but-my-program-asks-for-5-inputs-why/54004115#54004115", "title": "I m trying to build a 2*2 array but my program asks for 5 inputs. Why?", "body": "<pre><code>#include &lt;stdio.h&gt;\n\n\nint main()\n{\n  int i,j,a[2][2];\n  for(i=0;i&lt;2;i++) /*go through rows - arrays in c go [0- (n-1)]*/\n  {\n    for(j=0;j&lt;2;j++)/*go through col */\n       scanf(\"%d\",&amp;a[i][j]); /*remove \\t- now will scan 4 values only */\n  }\n\n  printf(\"\\n%d\\t%d\\n%d\\t%d\", a[0][0],a[0][1],a[1][0],a[1][1]);\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 10856998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/356958698f7703aabc1623340da6f25f?s=128&d=identicon&r=PG&f=1", "display_name": "F.Fred", "link": "https://stackoverflow.com/users/10856998/f-fred"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 54004115, "answer_count": 2, "score": 0, "last_activity_date": 1546423890, "creation_date": 1546420906, "last_edit_date": 1546421083, "question_id": 54003846, "link": "https://stackoverflow.com/questions/54003846/i-m-trying-to-build-a-22-array-but-my-program-asks-for-5-inputs-why", "title": "I m trying to build a 2*2 array but my program asks for 5 inputs. Why?", "body": "<p>I couldn't zero down where i have missed in the input statement. I have build it to acquire four values as input but it goes one more. </p>\n\n<p>manipulating the array entries to check if the fifth value is stored. Basic things</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n   int i,j,a[2][2];\n   for(i=1;i&lt;=2;i++)\n   {\n     for(j=1;j&lt;=2;j++)\n        scanf(\"%d\\t\",&amp;a[i][j]);\n    }\n\n    printf(\"\\n%d\\t%d\\n%d\\t%d\", a[1][1],a[1][2],a[2][1],a[2][2]);\n}\n</code></pre>\n"}, {"tags": ["c", "colors", "hex", "hsl"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1546419635, "post_id": 54003337, "comment_id": 94843795, "body": "Try searching for <code>[c] hsl</code> here on SO."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 2, "creation_date": 1546420031, "post_id": 54003337, "comment_id": 94843980, "body": "There is not a single definition for &quot;complementary colors&quot;, several contradicting methods exist. Simply inverting the RGB colors bitwise for example is a perfectly valid method. In general, it&#39;s the opposite color of a &quot;color wheel&quot;, but how this wheel is exactly constructed is to the disposition of the &quot;artist&quot;"}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "reply_to_user": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1546421201, "post_id": 54003337, "comment_id": 94844478, "body": "@ctx, the color wheel is constructed by placing the three primay colors on a circle and then gradually changing the color(s) in between. Nothing is left to the artist, except for maybe the number of steps (bits?) in between."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1546421830, "post_id": 54003337, "comment_id": 94844744, "body": "@PaulOgilvie Already the definition, what the primary colors are (RYB or RGB) differs. But there are even more possibilities to vary the color wheel, ask google."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "reply_to_user": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1546423422, "post_id": 54003337, "comment_id": 94845430, "body": "@Ctx, in computes (i.e. displays) we use the additive RGB colors (additive. i.e. light emitting). In subtractive colors (i.e. reflecting from a surface) the primary colors as used in e.g. printing are CYMK, also on a color wheel of which there is only one way to construct it. RYB are part of the subtractive color wheel, not the additive RGB."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1546423874, "post_id": 54003337, "comment_id": 94845596, "body": "@PaulOgilvie I do not see why computer monitors play a role here. Just because you are staring at one right now? What does this have to do with color theory? A monitor tries to display a color as accurate as possible, regardless of the color model. There might be subtractive displays (i.e. E-paper displays etc), which will try to print exactly the same color for the same hex value, regardless of its fundamental technology."}, {"owner": {"reputation": 2026, "user_id": 1406083, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1gC8p.jpg?s=128&g=1", "display_name": "Billy Brown", "link": "https://stackoverflow.com/users/1406083/billy-brown"}, "edited": false, "score": 0, "creation_date": 1546429242, "post_id": 54003337, "comment_id": 94848030, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/12380682/how-to-convert-rgb-to-hsl-in-c\">How to convert RGB to HSL in C?</a>"}], "owner": {"reputation": 23, "user_id": 10856865, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yN5U2G5GlaE/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZDI_pm5FAr3pnlS0JKdzsGceCbeA/mo/photo.jpg?sz=128", "display_name": "joana", "link": "https://stackoverflow.com/users/10856865/joana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 173, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1546418142, "creation_date": 1546418142, "question_id": 54003337, "link": "https://stackoverflow.com/questions/54003337/get-complementary-color-of-hex-color-in-c", "title": "Get Complementary Color of Hex Color in C", "body": "<p>I want to get the complementary color of an hexadecimal color in C.\nFrom what I understood I need to first convert it to HSL and then change the angles. But how can I do this conversion? Is that any other way to get the complementary?</p>\n"}, {"tags": ["c"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10851630"}, "edited": false, "score": 0, "creation_date": 1546449516, "post_id": 54003022, "comment_id": 94857748, "body": "Yes, I use Lubuntu 16.04 (32 Bit)."}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": true, "score": 4, "last_activity_date": 1546416672, "last_edit_date": 1546416672, "creation_date": 1546415996, "answer_id": 54003022, "question_id": 54002944, "link": "https://stackoverflow.com/questions/54002944/strange-output-behaviour-when-using-system-bin-stty-raw/54003022#54003022", "title": "Strange output behaviour when using system(&quot;/bin/stty raw&quot;)", "body": "<p><a href=\"https://en.wikipedia.org/wiki/Computer_terminal\" rel=\"nofollow noreferrer\">Terminals</a> were very complex devices (and today's <a href=\"https://en.wikipedia.org/wiki/Terminal_emulator\" rel=\"nofollow noreferrer\">terminal emulators</a> are trying to mimic them, something like the <a href=\"https://en.wikipedia.org/wiki/VT100\" rel=\"nofollow noreferrer\">VT100</a>; of course these emulators are <a href=\"https://en.wikipedia.org/wiki/Operating_system\" rel=\"nofollow noreferrer\">operating-system</a> specific). Read the <a href=\"http://www.linusakesson.net/programming/tty/\" rel=\"nofollow noreferrer\">TTY demystified</a> page and <a href=\"http://man7.org/linux/man-pages/man3/termios.3.html\" rel=\"nofollow noreferrer\">termios(3)</a>. Be also aware of <a href=\"https://en.wikipedia.org/wiki/ANSI_escape_code\" rel=\"nofollow noreferrer\">ANSI escape codes</a>.</p>\n\n<p>And  <code>stty raw</code> is not doing what you dream of (it is related to the <a href=\"https://en.wikipedia.org/wiki/Line_discipline\" rel=\"nofollow noreferrer\">line discipline</a>). See also <a href=\"http://man7.org/linux/man-pages/man1/stty.1.html\" rel=\"nofollow noreferrer\">stty(1)</a> and <a href=\"http://man7.org/linux/man-pages/man7/pty.7.html\" rel=\"nofollow noreferrer\">pty(7)</a>.</p>\n\n<p>If you want to write a terminal text oriented application, use some library such as <a href=\"https://www.gnu.org/software/ncurses/\" rel=\"nofollow noreferrer\">ncurses</a>. So <strong>throw your code away</strong>, spend a few days reading documentation, and write your code again from scratch.</p>\n\n<p>Maybe you could consider making instead your game some graphical application, e.g. by using some toolkit such as <a href=\"https://gtk.org/\" rel=\"nofollow noreferrer\">GTK</a> or <a href=\"https://www.libsdl.org/\" rel=\"nofollow noreferrer\">libSDL</a>.</p>\n\n<p>PS. You don't mention it, but I guess you are using some Linux system.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10851630"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2824, "favorite_count": 0, "accepted_answer_id": 54003022, "answer_count": 1, "score": 0, "last_activity_date": 1546428367, "creation_date": 1546415513, "last_edit_date": 1546428367, "question_id": 54002944, "link": "https://stackoverflow.com/questions/54002944/strange-output-behaviour-when-using-system-bin-stty-raw", "title": "Strange output behaviour when using system(&quot;/bin/stty raw&quot;)", "body": "<p>In my program, a 5x20 field of points is displayed. A player which has the symbol \"#\" is also on the field. You can move the player around with w, a, s and d. If I use buffered input everything is fine. But the user dont want hit enter every time. So I used the command</p>\n\n<pre><code>system(\"/bin/stty raw\")\n</code></pre>\n\n<p>The problem now is that the output behavior is very strange. The lines of the field are not displayed properly now. I wasted much time by trying to find the error by myself. Also Google seems not to have an appropriate explanation to this behavior.</p>\n\n<p>Can you tell me why the program behaves that strange, and how to fix that?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define FIELD_VERTIKAL 5\n#define FIELD_HORIZONTAL 20\n#define PLAYER_SYMBOL '#'\n\nvoid print_field(char field[FIELD_VERTIKAL][FIELD_HORIZONTAL])\n{\n    // reset display\n    for (int i = 0; i &lt; 20; i++)\n        putchar('\\n');\n\n    // display field\n    for (int i = 0; i &lt; FIELD_VERTIKAL; i++)\n    {\n        for (int j = 0; j &lt; FIELD_HORIZONTAL; j++)\n            putchar(field[i][j]);\n        putchar('\\n');  \n    }\n}\n\nvoid draw_field(char field[FIELD_VERTIKAL][FIELD_HORIZONTAL], \n  int pos_vertikal, int pos_horizontal)\n{\n    for (int i = 0; i &lt; FIELD_VERTIKAL; i++)\n        for (int j = 0; j &lt; FIELD_HORIZONTAL; j++)\n            field[i][j] = '.';\n    field[pos_vertikal][pos_horizontal] = '#';\n}\n\nint main() \n{\n    // create field and initialize it\n    char field[FIELD_VERTIKAL][FIELD_HORIZONTAL];   \n\n    // position of player\n    int pos_vertikal = 0;\n    int pos_horizontal = 0;\n\n    // initialize field\n    draw_field(field, pos_vertikal, pos_horizontal);\n\n    system(\"/bin/stty raw\");\n    print_field(field);\n    char input;\n    while ((input = getchar()) != EOF) \n    {\n        // move player\n        if (input == 'w')\n        {\n            pos_vertikal--;\n        }\n        else if (input == 'a')\n        {\n            pos_horizontal--;\n        }\n        else if (input == 's')\n        {\n            pos_vertikal++;\n        }\n        else if (input == 'd')\n        {\n            pos_horizontal++;\n        }\n\n        // place player and display field\n        draw_field(field, pos_vertikal, pos_horizontal);\n        print_field(field);\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "getline"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 5, "creation_date": 1546411854, "post_id": 54002322, "comment_id": 94841358, "body": "You have declared an array of pointers but have not allocated memory for the pointers. Your code has undefined behavior because of that."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1546411976, "post_id": 54002322, "comment_id": 94841405, "body": "Curious: who or what text suggested putting a <code>&quot;\\n&quot;</code> at the <i>start</i> of <code>&quot;\\n%s&quot;</code>?"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1546412633, "post_id": 54002322, "comment_id": 94841607, "body": "Read <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a>. You really should be able to find such bugs by yourself."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1546412753, "post_id": 54002322, "comment_id": 94841639, "body": "Besides the obvious errors in calling it that others have pointed out, your <code>getline2</code> has pretty much the exact same semantics as <code>getline()</code> (minus the correct handling of EOF conditions), so it&#39;s broken by design, as it uses an external buffer but doesn&#39;t allow to pass in the buffer size."}, {"owner": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "edited": false, "score": 1, "creation_date": 1546412849, "post_id": 54002322, "comment_id": 94841670, "body": "If the <code>printf</code> loop is not relevant, then it should be removed from the <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "edited": false, "score": 0, "creation_date": 1546413058, "post_id": 54002322, "comment_id": 94841753, "body": "@WernerHenze <code>printf()</code> is relevant and good here as it shows an example of how OP intended to use the input.  From time to time, a program crashes lurks there and not in the input code portion.  IMO, a question without output is not a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1546417835, "post_id": 54002322, "comment_id": 94843164, "body": "@chux I disagree. It crashes prior to printf already. The while loop in <code>main</code> is probably noise too. <code>getline2(lines[0])</code> would have sufficed to produce the crash."}, {"owner": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1546419443, "post_id": 54002322, "comment_id": 94843742, "body": "@AnttiHaapala Thanks, that is what I believe, too. It perfectly shows why an mcve is so useful. It helps narrowing down the problem and may lead the questioner to the right answer without the need to ask the question here."}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 4, "last_activity_date": 1546412537, "last_edit_date": 1546412537, "creation_date": 1546411883, "answer_id": 54002352, "question_id": 54002322, "link": "https://stackoverflow.com/questions/54002322/program-crashed-after-one-line-input-how-to-fix/54002352#54002352", "title": "Program crashed after one line input. How to fix?", "body": "<p>In your code, <code>char *lines[3];</code> defines an array of <code>char</code> pointers. The pointers themselves do not point to any valid memory <em>automatically</em>. Unless initialized properly, attempt to use (or de-reference) them would lead to <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>.</p>\n\n<p>There are two common approach of achieving what you want (based on your requirement):</p>\n\n<ul>\n<li>Allocate a size at compile time and length-limit your input [i.e., pass the size of the buffer as a function argument, like <a href=\"https://linux.die.net/man/3/fgets\" rel=\"nofollow noreferrer\"><code>fgets()</code></a>]</li>\n<li>Allocate memory at run time (allocator functions, <a href=\"https://linux.die.net/man/3/malloc\" rel=\"nofollow noreferrer\"><code>malloc()</code> and family</a>) and resize based on the input length.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1546414485, "creation_date": 1546414485, "answer_id": 54002753, "question_id": 54002322, "link": "https://stackoverflow.com/questions/54002322/program-crashed-after-one-line-input-how-to-fix/54002753#54002753", "title": "Program crashed after one line input. How to fix?", "body": "<p>In addition to supplying a <code>char*</code> which points to valid memory (as well suggested by others), <code>getline2()</code> has other weaknesses to address.</p>\n\n<p><strong>Unknown size</strong></p>\n\n<p><code>getline2()</code> does not know how many characters can be saved.  Suggest accepting a size parameter and adjust code to prevent overfilling <code>s</code>.</p>\n\n<pre><code>// void getline2(char *s)\nvoid getline2(char *s, size_t sz)\n</code></pre>\n\n<p><strong>Infinite loop on <code>EOF</code></strong></p>\n\n<p>When <code>stdin</code> is closed or a rare input error occurs, <code>getchar()</code> can perpetual return <code>EOF</code> and never exit the loop.</p>\n\n<p><strong>257 values do not fit in <code>char</code></strong></p>\n\n<p><code>int fgetc()</code> returns values in the range of <code>unsigned char</code> and <code>EOF</code>.  Use <code>int c;</code> and test loop for <code>c != '\\n' &amp;&amp; c != EOF</code></p>\n\n<pre><code>// char c;\n// while((c=getchar())!='\\n')\nint c;\nwhile((c=getchar())!='\\n' &amp;&amp; c != EOF)\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 10402344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd2f508d8c55f11641126d8ed268ee82?s=128&d=identicon&r=PG&f=1", "display_name": "theviralv", "link": "https://stackoverflow.com/users/10402344/theviralv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 54002352, "answer_count": 2, "score": -3, "last_activity_date": 1546414485, "creation_date": 1546411686, "last_edit_date": 1546414252, "question_id": 54002322, "link": "https://stackoverflow.com/questions/54002322/program-crashed-after-one-line-input-how-to-fix", "title": "Program crashed after one line input. How to fix?", "body": "<p>I have made a program of getline function of mine. Which takes input till a '\\n' is encountered and shifts to the next input. Also I have used pointer arrays here to store the string inputs, but the program crashes after the first string input. What's the problem?</p>\n\n<p>This is the code of the program. I have tried to debug it but it but I can't find the problem here.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\nvoid getline2(char *s)\n{\n    char c;\n    while((c=getchar())!='\\n')\n    {\n        *s=c;\n        s++;\n    }\n    *s='\\0';\n}\n\nint main()\n{\n    char *lines[3];\n    int i=0;\n    while(i&lt;3)\n    {\n        getline2(lines[i]);\n        i++;\n    }\n    for (i = 0; i &lt; 3; i++)\n    {\n        printf(\"\\n%s\", lines[i]);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>When I input the first line after pressing the enter the program crashes.</p>\n"}, {"tags": ["c", "comparison-operators"], "comments": [{"owner": {"reputation": 362, "user_id": 835743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05778473adef8dff58caaa2709b7bcf3?s=128&d=identicon&r=PG", "display_name": "burnabyRails", "link": "https://stackoverflow.com/users/835743/burnabyrails"}, "edited": false, "score": 3, "creation_date": 1546415144, "post_id": 54006433, "comment_id": 94849267, "body": "Welcome to <a href=\"https://cs.stackexchange.com\">Computer Science</a>! It might be a surprise to you, but your question is off-topic here. We deal with computer <i>science</i> questions, not programming questions. Please see our <a href=\"https://cs.stackexchange.com/help/on-topic\">help on topic</a>. Your question might be on-topic on <a href=\"https://stackoverflow.com\">Stack Overflow</a>."}, {"owner": {"reputation": 362, "user_id": 835743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05778473adef8dff58caaa2709b7bcf3?s=128&d=identicon&r=PG", "display_name": "burnabyRails", "link": "https://stackoverflow.com/users/835743/burnabyrails"}, "edited": false, "score": 0, "creation_date": 1546415296, "post_id": 54006433, "comment_id": 94849268, "body": "This code will help you. <code>printf(&quot;%d\\n&quot;,1&lt;-1);printf(&quot;%d\\n&quot;,1&lt;1);printf(&quot;%d\\n&quot;,1&lt;2);pr&zwnj;&#8203;intf(&quot;%d\\n&quot;,1&lt;-1&lt;5);&zwnj;&#8203;printf(&quot;%d\\n&quot;,1&lt;1&lt;5)&zwnj;&#8203;;printf(&quot;%d\\n&quot;,1&lt;2&lt;5&zwnj;&#8203;);printf(&quot;%d\\n&quot;,1&lt;5&lt;&zwnj;&#8203;5);printf(&quot;%d\\n&quot;,1&lt;6&zwnj;&#8203;&lt;5);</code> What happens is that the result of a comparison is either 0 or 1."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10862846"}, "reply_to_user": {"reputation": 362, "user_id": 835743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05778473adef8dff58caaa2709b7bcf3?s=128&d=identicon&r=PG", "display_name": "burnabyRails", "link": "https://stackoverflow.com/users/835743/burnabyrails"}, "edited": false, "score": 1, "creation_date": 1546958192, "post_id": 54006433, "comment_id": 95020081, "body": "@burnabyRails Thanks , it&#39;s very helpful. Guess I&#39;ll need to learn more about this ..."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "Suklav Ghosh"}, "edited": false, "score": 0, "creation_date": 1546411161, "post_id": 54006434, "comment_id": 94849269, "body": "but , then it must stop counting when the value of a reaches 5."}, {"owner": {"reputation": 3, "user_id": 10249338, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Q8Y66Qz6Kww/AAAAAAAAAAI/AAAAAAAAAA4/Bcbj11cgM4o/photo.jpg?sz=128", "display_name": "Prashant Kalikotay", "link": "https://stackoverflow.com/users/10249338/prashant-kalikotay"}, "edited": false, "score": 0, "creation_date": 1546411418, "post_id": 54006434, "comment_id": 94849270, "body": "Here the first condition in true that is 1&lt;a so compiler ignores a&lt;5 so the loop condition is always true."}], "tags": [], "owner": {"reputation": 3, "user_id": 10249338, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Q8Y66Qz6Kww/AAAAAAAAAAI/AAAAAAAAAA4/Bcbj11cgM4o/photo.jpg?sz=128", "display_name": "Prashant Kalikotay", "link": "https://stackoverflow.com/users/10249338/prashant-kalikotay"}, "is_accepted": false, "score": 0, "last_activity_date": 1547713014, "last_edit_date": 1547713014, "creation_date": 1546410802, "answer_id": 54006434, "question_id": 54006433, "link": "https://stackoverflow.com/questions/54006433/why-is-while-1-a-5-an-infinite-loop/54006434#54006434", "title": "Why is while (1 &lt; a &lt; 5) an infinite loop?", "body": "<p>Loop is running infinitely many times because the condition that 1\n\n<p>This could help:</p>\n\n<p>int a=2;</p>\n\n<p>while(a&lt;5)</p>\n\n<p>{</p>\n\n<p>printf(\"%d\\n\",a);</p>\n\n<p>a=a+1;</p>\n\n<p>}</p>\n"}, {"comments": [{"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 2, "creation_date": 1546432489, "post_id": 54006435, "comment_id": 94849396, "body": "&quot;<code>1 &lt; a</code> ... is cast to <code>int</code>&quot; -- not really: <code>1 &lt; a</code> has type <code>int</code> (and value <code>1</code>) to begin with."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1546432507, "post_id": 54006435, "comment_id": 94849403, "body": "Note that <code>1 &lt; a</code> <b>is</b> either 0 or 1. It has an <code>int</code> type. No need to talk about <code>true</code> and casting here. In this respect, C differs from C++."}, {"owner": {"reputation": 128, "user_id": 10814887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc75cfbdc9c2ed647d6d1a6d3ac05f7d?s=128&d=identicon&r=PG&f=1", "display_name": "RcnSc", "link": "https://stackoverflow.com/users/10814887/rcnsc"}, "edited": false, "score": 0, "creation_date": 1546432634, "post_id": 54006435, "comment_id": 94849479, "body": "Could you point me towards a source on <code>operator&lt;</code> returning an <code>int</code> in C? Edit: Turns out C doesn&#39;t have a boolean type. Pardon my C++."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 1, "creation_date": 1546432880, "post_id": 54006435, "comment_id": 94849606, "body": "@RcnSc: see <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.5.8p6\" rel=\"nofollow noreferrer\">C11 6.5.8p6</a>."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1546432924, "post_id": 54006435, "comment_id": 94849622, "body": "@RcnSc <a href=\"https://port70.net/~nsz/c/c11/n1570.html#6.5.8p6\" rel=\"nofollow noreferrer\"><b>6.5.8 Relational operators</b></a>: &quot;Each of the operators &lt; (less than), &gt; (greater than), &lt;= (less than or equal to), and &gt;= (greater than or equal to) shall yield 1 if the specified relation is true and 0 if it is false. The result has type int.&quot;  <a href=\"https://port70.net/~nsz/c/c11/n1570.html#note107\" rel=\"nofollow noreferrer\">Footnote 107</a> is directly relevant:  &quot;The expression a&lt;b&lt;c is not interpreted as in ordinary mathematics. As the syntax indicates, it means (a&lt;b)&lt;c; in other words, &#39;&#39;if a is less than b, compare 1 to c; otherwise, compare 0 to c&#39;&#39;.&quot;"}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1546433025, "post_id": 54006435, "comment_id": 94849677, "body": "@RcnSc: also <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.2.5p2\" rel=\"nofollow noreferrer\">C11 6.2.5p2</a>: &quot;An object declared as type <code>_Bool</code> is large enough to store the values 0 and 1.&quot; If you <code>#include &lt;stdbool.h&gt;</code> you can use <code>bool</code> instead of <code>_Bool</code>."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1546433369, "post_id": 54006435, "comment_id": 94849847, "body": "Hope you don&#39;t mind my edit. Have an upvote and this is a good first answer!"}, {"owner": {"reputation": 128, "user_id": 10814887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc75cfbdc9c2ed647d6d1a6d3ac05f7d?s=128&d=identicon&r=PG&f=1", "display_name": "RcnSc", "link": "https://stackoverflow.com/users/10814887/rcnsc"}, "edited": false, "score": 0, "creation_date": 1546433423, "post_id": 54006435, "comment_id": 94849880, "body": "Thanks, have a nice day."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10862846"}, "edited": false, "score": 0, "creation_date": 1546521859, "post_id": 54006435, "comment_id": 94882447, "body": "(1&lt;a&lt;5) is evaluated as ((1&lt;a)&lt;5) since &quot;&lt;&quot; associates left to right . 1&lt;a is either 0 or 1 , both are less then 5 , so the condition is always true(1)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10862846"}, "edited": false, "score": 0, "creation_date": 1547087156, "post_id": 54006435, "comment_id": 95074471, "body": "Thanks , it&#39;s very helpful. Guess I&#39;ll need to learn more about this"}], "tags": [], "owner": {"reputation": 128, "user_id": 10814887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc75cfbdc9c2ed647d6d1a6d3ac05f7d?s=128&d=identicon&r=PG&f=1", "display_name": "RcnSc", "link": "https://stackoverflow.com/users/10814887/rcnsc"}, "is_accepted": true, "score": 9, "last_activity_date": 1546433668, "last_edit_date": 1546433668, "creation_date": 1546431193, "answer_id": 54006435, "question_id": 54006433, "link": "https://stackoverflow.com/questions/54006433/why-is-while-1-a-5-an-infinite-loop/54006435#54006435", "title": "Why is while (1 &lt; a &lt; 5) an infinite loop?", "body": "<p><code>1 &lt; a &lt; 5</code> is grouped as <code>(1 &lt; a) &lt; 5</code>.</p>\n\n<p>For your value of <code>a</code>, <code>1 &lt; a</code> returns <code>1</code> (true), so now your expression becomes <code>1 &lt; 5</code>, which always evaluates to <code>1</code>, that's why you end up with an infinite loop.</p>\n\n<p>The behavior you want can be obtained by writing <code>while((1 &lt; a) &amp;&amp; (a &lt; 5))</code> instead.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10862846"}, "edited": false, "score": 0, "creation_date": 1546521879, "post_id": 54006721, "comment_id": 94882456, "body": "That means :: (1&lt;a&lt;5) is evaluated as ((1&lt;a)&lt;5) since &quot;&lt;&quot; associates left to right . 1&lt;a is either 0 or 1 , both are less then 5 , so the condition is always true(1)."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 1, "last_activity_date": 1546433501, "creation_date": 1546433501, "answer_id": 54006721, "question_id": 54006433, "link": "https://stackoverflow.com/questions/54006433/why-is-while-1-a-5-an-infinite-loop/54006721#54006721", "title": "Why is while (1 &lt; a &lt; 5) an infinite loop?", "body": "<p>The expression <code>1 &lt; a &lt; 5</code> is <code>1</code> for any value of <code>a</code>, and <code>while (1)</code> loops.</p>\n\n<p>It's grouped as <code>(1 &lt; a) &lt; 5</code> and <code>1 &lt; a</code> is either <code>0</code> or <code>1</code>, which are both less than 5.</p>\n\n<p>Did you want <code>1 &lt; a &amp;&amp; a &lt; 5</code>?</p>\n"}], "migrated_from": {"other_site": {"aliases": ["http://computerscience.stackexchange.com"], "markdown_extensions": ["MathJax", "Prettify"], "launch_date": 1439905020, "open_beta_date": 1332272936, "closed_beta_date": 1331060400, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/cs/Img/apple-touch-icon@2.png", "favicon_url": "https://cdn.sstatic.net/Sites/cs/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/cs/Img/apple-touch-icon.png", "audience": "students, researchers and practitioners of computer science", "site_url": "https://cs.stackexchange.com", "api_site_parameter": "cs", "logo_url": "https://cdn.sstatic.net/Sites/cs/Img/logo.png", "name": "Computer Science", "site_type": "main_site"}, "on_date": 1546432194, "question_id": 102272}, "owner": {"reputation": 97, "user_id": 11390586, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7VGdy.jpg?s=128&g=1", "display_name": "Mr. Suklav Ghosh", "link": "https://stackoverflow.com/users/11390586/mr-suklav-ghosh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 337, "favorite_count": 1, "accepted_answer_id": 54006435, "answer_count": 3, "score": 1, "last_activity_date": 1547713014, "creation_date": 1546409909, "last_edit_date": 1546432606, "question_id": 54006433, "link": "https://stackoverflow.com/questions/54006433/why-is-while-1-a-5-an-infinite-loop", "title": "Why is while (1 &lt; a &lt; 5) an infinite loop?", "body": "<pre><code>int a = 2;   \nwhile (1 &lt; a &lt; 5)  {\n      printf(\"%d\\n\", a);\n      a = a + 1;\n}\n</code></pre>\n\n<p>In a C program, I have used the above code, but it is always counting infinitely. That means the test condition of the while loop is always true. But I could not understand why this is happening.</p>\n"}, {"tags": ["c", "linux", "linux-kernel", "x86", "linux-device-driver"], "comments": [{"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 2, "creation_date": 1546409658, "post_id": 54001978, "comment_id": 94840673, "body": "<code>printf</code> can&#39;t run from an interrupt handler; you might be in the middle of a <code>printf</code> already when the interrupt fires.  Other than that, there&#39;s obviously no heap memory because there&#39;s no dynamic allocation.  Stack usage depends on the compiler, but should be about zero beyond the return return address; everything easily fits in registers.  Compile it and look at the compiler output to see what it does, e.g. on the Compiler Explorer: <a href=\"https://godbolt.org/\" rel=\"nofollow noreferrer\">godbolt.org</a>"}, {"owner": {"reputation": 3868, "user_id": 2589553, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/490f0b6836112dc8929c72ed3f03bf68?s=128&d=identicon&r=PG", "display_name": "duong_dajgja", "link": "https://stackoverflow.com/users/2589553/duong-dajgja"}, "edited": false, "score": 0, "creation_date": 1546409709, "post_id": 54001978, "comment_id": 94840686, "body": "<a href=\"https://www.geeksforgeeks.org/memory-layout-of-c-program/\" rel=\"nofollow noreferrer\">geeksforgeeks.org/memory-layout-of-c-program</a> is worth reading"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 3868, "user_id": 2589553, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/490f0b6836112dc8929c72ed3f03bf68?s=128&d=identicon&r=PG", "display_name": "duong_dajgja", "link": "https://stackoverflow.com/users/2589553/duong-dajgja"}, "edited": false, "score": 1, "creation_date": 1546409787, "post_id": 54001978, "comment_id": 94840703, "body": "@duong_dajgja: that&#39;s somewhat useful, but they compile with optimization disabled so nothing will get optimized away.  Unlike here where a <code>-O0</code> version of this function would use stack space for the locals."}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 1, "creation_date": 1546409819, "post_id": 54001978, "comment_id": 94840711, "body": "you tagged this as linux device driver. Are you running this from inside an interrupt handler? <code>printf</code> in that context is bad. <code>printk</code> and <code>trace_printk</code> might be alternatives you&#39;d want to look at if this is running in kernel context."}], "answers": [{"tags": [], "owner": {"reputation": 8402, "user_id": 4664415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hsfxj.jpg?s=128&g=1", "display_name": "mevets", "link": "https://stackoverflow.com/users/4664415/mevets"}, "is_accepted": false, "score": 0, "last_activity_date": 1546413136, "creation_date": 1546413136, "answer_id": 54002565, "question_id": 54001978, "link": "https://stackoverflow.com/questions/54001978/how-much-stack-and-heap-in-bytes-is-required-by-the-c-function-in-x86/54002565#54002565", "title": "How much stack and heap (in bytes) is required by the C function in X86", "body": "<p>How much stack?  After removing the printf, 0 bytes of stack are needed; the function is simple enough to work with 3 registers:</p>\n\n<pre><code>.globl _sum\n_sum: /* (int *b, int c); */\n    mov 4(%esp), %edx\n    mov 8(%esp), %ecx\n    cmp $0, %ecx\n    jl   badcount\n    leal (%edx,%ecx,4), %ecx\n    xor %eax, %eax\nnxt:\n    cmp %ecx, %edx\n    je    done\n    add (%edx), %eax\n    add $4, %edx\n    jmp nxt\ndone:\n    ret\nbadcount:\n    mov $-1, %eax\n    ret\n</code></pre>\n\n<p>You need to be able to rely on a compiler to not do completely stupid stuff ( no matter what standard c## thinks ).</p>\n\n<p>If you are so far into a corner that you need to count stack bytes, look for a mistake earlier in your path.  Even Frank n Furter realized that solving the symptoms was different from the cause.</p>\n"}, {"comments": [{"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1546528588, "post_id": 54024824, "comment_id": 94886411, "body": "Nice trick for stack usage.  You forgot to enable optimization, which should reduce it to near 0 for this function, depending on what the compiler does around printf.  But your heap usage test program doesn&#39;t ever call the function you want to test.  In this case, for it to possibly use any heap at all, obviously we have to pass it invalid input so it calls printf.  But you do need to call it as part of the execution of the program for it to be a valid test."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1546528736, "post_id": 54024824, "comment_id": 94886491, "body": "Other ways to use stack: deeply nested function calls, especially through functions with medium to large <code>struct</code> local vars.  This is why Linux&#39;s XFS filesystem code is often a culprit in kernel-stack problems.  Obviously recursion that isn&#39;t optimized away could use a huge amount of stack, so don&#39;t do that either."}, {"owner": {"reputation": 3126, "user_id": 2955790, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vShcC.png?s=128&g=1", "display_name": "Duck Dodgers", "link": "https://stackoverflow.com/users/2955790/duck-dodgers"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1546528910, "post_id": 54024824, "comment_id": 94886588, "body": "@PeterCordes, ah yes, of course. Recursion. Thank you for pointing that out. That didn&#39;t cross my mind, when I was writing that. Yes, large structs with lots of variables would indeed also eat up &#39;significant&#39; amounts of stack. Thanks for bringing that up also."}, {"owner": {"reputation": 3126, "user_id": 2955790, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vShcC.png?s=128&g=1", "display_name": "Duck Dodgers", "link": "https://stackoverflow.com/users/2955790/duck-dodgers"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1546529224, "post_id": 54024824, "comment_id": 94886748, "body": "@PeterCordes, strange! I compiled and ran the code again with <code>valgrind</code>, after adding a line <code>sum(NULL, 0);</code> to the <code>main()</code> function. This time the heap allocation is reported as <code>0</code>. I had optimizations turned off this time also. I removed the line, compiled again and ran again with <code>valgrind</code> and I see again heap usage as <code>0</code>. Either I was seeing things earlier, or the compiler is doing some magic here, since earlier it was reporting ~84KB of heap usage. As a final test, I used this line <code>sum(NULL, -1);</code> in the <code>main()</code> function &amp; now the heap usage is 1KB exact - because of the <code>printf()</code>"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1546533281, "post_id": 54024824, "comment_id": 94888879, "body": "I&#39;d expect non-zero heap usage from glibc init functions, at least peak.  Not surprising that most of it is freed before exit.  Even if you don&#39;t include <code>stdio.h</code> or link code that contains a reference to <code>printf</code>, glibc still inits some tables and buffers."}, {"owner": {"reputation": 1, "user_id": 10856393, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xS-EAIKQILY/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYGanrxLbxLNMpGOeEJ1DzZoZKBCA/mo/photo.jpg?sz=128", "display_name": "Muni Sekhar", "link": "https://stackoverflow.com/users/10856393/muni-sekhar"}, "edited": false, "score": 0, "creation_date": 1546609399, "post_id": 54024824, "comment_id": 94915150, "body": "Great explanation.  Regarding stack usage, I noticed two different results in two different methods i.e. \u201c-Wframe-larger-than=&lt;X&gt; pragma\u201d &amp; \u201c-fstack-usage\u201d, what could be the reason?  So the worst case execution time of the function sum (buffer,n) is O(n), right? How the system behaves if n is UINTMAX_MAX and this function is invoked from within an interrupt-handler, I mean here I would like to know is there any threshold time limit for an interrupt-handler to be finished?   Last one, what other parameters of the x86 platform which have an impact on the runtime for this \u2018sum() function\u2019?"}, {"owner": {"reputation": 3126, "user_id": 2955790, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vShcC.png?s=128&g=1", "display_name": "Duck Dodgers", "link": "https://stackoverflow.com/users/2955790/duck-dodgers"}, "reply_to_user": {"reputation": 1, "user_id": 10856393, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xS-EAIKQILY/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYGanrxLbxLNMpGOeEJ1DzZoZKBCA/mo/photo.jpg?sz=128", "display_name": "Muni Sekhar", "link": "https://stackoverflow.com/users/10856393/muni-sekhar"}, "edited": false, "score": 0, "creation_date": 1546612088, "post_id": 54024824, "comment_id": 94916561, "body": "@MuniSekhar, Why the two stack methods give two different results, I don&#39;t know. It might be some *behind the scene&quot; stuff being done by the compiler. Still <code>32bytes</code>&amp;<code>48bytes</code> are &#39;pretty close&#39;. I don&#39;t know of any time limit imposed on servicing interrupts. What will happen is this ISR will block everything else. Then you may lose incoming data being sent by other hardware. More on that <a href=\"https://arduino.stackexchange.com/questions/29495/what-is-the-maximum-length-an-interrupt-service-routine\">here</a>. Real-time systems are another story. Regarding X86 params, better to ask separate question."}], "tags": [], "owner": {"reputation": 3126, "user_id": 2955790, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vShcC.png?s=128&g=1", "display_name": "Duck Dodgers", "link": "https://stackoverflow.com/users/2955790/duck-dodgers"}, "is_accepted": false, "score": 2, "last_activity_date": 1546530406, "last_edit_date": 1546530406, "creation_date": 1546527705, "answer_id": 54024824, "question_id": 54001978, "link": "https://stackoverflow.com/questions/54001978/how-much-stack-and-heap-in-bytes-is-required-by-the-c-function-in-x86/54024824#54024824", "title": "How much stack and heap (in bytes) is required by the C function in X86", "body": "<p>To build upon what other users have already pointed out, I will try to address both questions of the OP.</p>\n\n<p><strong>OP's first Question:</strong></p>\n\n<blockquote>\n  <p>I'd like to know, How much stack and heap in bytes is required by the\n  function sum in X86 Linux platform? How to know this?</p>\n</blockquote>\n\n<p>We can break this first question down into 2 parts. One is about stack size and the other is about heap size. </p>\n\n<p><strong>Stack Size:</strong></p>\n\n<p>To find out how much stack your function is using, you can use one of the <em>GCC diagnostic pragmas</em>, i.e. the <code>-Wframe-larger-than=&lt;X&gt;</code> pragma. Here is an example, on how to use it. First we add the pragma to the code and save the file.</p>\n\n<p><em>main.cpp</em></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#pragma GCC diagnostic error \"-Wframe-larger-than=1\"\n\nint sum(int b[], int c) {\n    int s,i;\n    if (c&lt;0) {\n            printf(\"ERROR\\n\");\n    }\n    s = 0;\n    for(i=0; i&lt;c; ++i) {\n        s = s + b[i];\n    }\n    return s;\n}\n</code></pre>\n\n<p>We can now try to compile the code:</p>\n\n<pre><code>junglefox@ubuntu:~$ gcc -c main.cpp\nmain.cpp: In function \u2018int sum(int*, int)\u2019:\nmain.cpp:20:1: error: the frame size of 32 bytes is larger than 1 bytes [-Werror=frame-larger-than=]\n }\n ^\ncc1plus: some warnings being treated as errors\njunglefox@ubuntu:~$\n</code></pre>\n\n<p>which reports a size of <em>32 bytes</em>.</p>\n\n<ul>\n<li>An alternative method to measuring the stack size is to use the <code>stack-usage</code> compiler flag in <em>GCC</em>. So, we remove or comment out the <code>// #pragma GCC diagnostic error \"-Wframe-larger-than=1\"</code> line and try to compile the file again, as shown below.</li>\n</ul>\n\n<p><code>junglefox@ubuntu:~$ gcc -c main.cpp -fstack-usage</code></p>\n\n<p>This will generate a file <code>main.su</code>.</p>\n\n<pre><code>junglefox@ubuntu:~$ cat main.su \nmain.cpp:5:5:int sum(int*, int) 48  static\n</code></pre>\n\n<p>which shows that apparently, we are using <em>48 bytes</em> of stack.</p>\n\n<hr>\n\n<p><strong>Heap Size</strong></p>\n\n<p>To find out how much heap size our program is using, we will use the <code>valgrind</code> tool <code>Massif</code>. For that we first need to add a main() function to our code (without which we cannot create a binary. And a binary is what we would need to be run with valgrind). So the <code>main.cpp</code>, looks like this now,</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n// #pragma GCC diagnostic error \"-Wframe-larger-than=1\"\n\nint sum(int b[], int c) {\n    int s,i;\n    if (c&lt;0) {\n            printf(\"ERROR\\n\");\n    }\n    s = 0;\n    for(i=0; i&lt;c; ++i) {\n        s = s + b[i];\n    }\n    return s;\n}\n\nint main() {\n    // As Peter pointed, uncomment one of the following lines,\n    // for it to be a valid test. Also, compiler optimizations,\n    // when turned on, can give different results.\n    // sum(NULL,0);\n    // sum(NULL,-1);\n    return 0;\n}\n</code></pre>\n\n<p>And now we will compile, build and run the binary with the help of valgrind, as shown here:</p>\n\n<pre><code>junglefox@ubuntu:~$ gcc -o main main.cpp\njunglefox@ubuntu:~$ valgrind ./main --tool=massif\n</code></pre>\n\n<p>This will generate a bunch of info, which looks something like below:</p>\n\n<pre><code>    ==8179== Memcheck, a memory error detector\n==8179== Copyright (C) 2002-2017, and GNU GPL'd, by Julian Seward et al.\n==8179== Using Valgrind-3.13.0 and LibVEX; rerun with -h for copyright info\n==8179== Command: ./main --tool=massif\n==8179== \n==8179== \n==8179== HEAP SUMMARY:\n==8179==     in use at exit: 0 bytes in 0 blocks\n==8179==   total heap usage: 0 allocs, 0 frees, 0 bytes allocated\n==8179== \n==8179== All heap blocks were freed -- no leaks are possible\n==8179== \n==8179== For counts of detected and suppressed errors, rerun with: -v\n==8179== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)\n</code></pre>\n\n<p>which reports a total heap usage of 0 Kilobytes.</p>\n\n<p>Also, as @mevets has tried to explain, you can always look into the the underlying assembly code generated by the compiler. In GCC, you could do,</p>\n\n<pre><code>junglefox@ubuntu:~/gcc -S main.cpp\njunglefox@ubuntu:~/cat main.s\n</code></pre>\n\n<p>which will show you what your function looks like in the underlying assembly output.</p>\n\n<p><strong>NOTE/EDIT:</strong> But just to be complete, in C or C++, without dynamic memory allocation using <code>malloc()</code> or <code>new</code>, you as a programmer are NOT using the heap. Also, unless you are declaring an array inside your function, you are not using any significant amount of the stack.</p>\n\n<hr>\n\n<p><strong>OP's second Question:</strong></p>\n\n<blockquote>\n  <p>Is invocation of the function from within an interrupt-handler likely\n  to be problematic or successful?</p>\n</blockquote>\n\n<p>As many people have kindly pointed out in the comments, do NOT use <code>printf()</code> in your <em>Interrupt handler</em>.</p>\n\n<p>To quote from this <a href=\"https://notes.shichao.io/lkd/ch7/\" rel=\"nofollow noreferrer\">link</a>:</p>\n\n<blockquote>\n  <p>What differentiates interrupt handlers from other kernel functions \n  is that the kernel invokes them in response to interrupts and that\n  they run in a special context called interrupt context. This special \n  context is occasionally called atomic context because code executing \n  in this context is unable to block.</p>\n  \n  <p>Because an interrupt can occur at any time, an interrupt handler can\n  be executed at any time. It is imperative that the handler runs\n  quickly, to resume execution of the interrupted code as soon as\n  possible.</p>\n</blockquote>\n\n<p>So, apart from <code>printf()</code>, one thing that could take a long time, is how big an array you are passing to that function, when used as an <code>Interrupt Service Routine</code>. It has a complexity of <code>O(n)</code>. If <code>c</code> is too big, your program would be halted for a relatively long time till the ISR finishes going through that <code>for()</code> loop.</p>\n"}, {"tags": [], "owner": {"reputation": 25733, "user_id": 559737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5de249db6565b87a2699e131974268a?s=128&d=identicon&r=PG", "display_name": "Brendan", "link": "https://stackoverflow.com/users/559737/brendan"}, "is_accepted": false, "score": 0, "last_activity_date": 1546536357, "creation_date": 1546536357, "answer_id": 54027014, "question_id": 54001978, "link": "https://stackoverflow.com/questions/54001978/how-much-stack-and-heap-in-bytes-is-required-by-the-c-function-in-x86/54027014#54027014", "title": "How much stack and heap (in bytes) is required by the C function in X86", "body": "<p>C has no concept of \"stack\"; and when code written in C is compiled you should think of it as being mangled into an unrecognizable form.</p>\n\n<p>For example, if the caller does this:</p>\n\n<pre><code>    myArray[2] = 99;\n    result = sum( myArray, 4);\n</code></pre>\n\n<p>Then the compiler can inline a completely separate copy of the <code>sum()</code> function, and then (using optimizations like constant folding, dead code elimination and loop unrolling) convert that separate copy of the function into (the equivalent of):</p>\n\n<pre><code>    result = myArray[0] + myArray[1] + 99 + myArray[3];\n</code></pre>\n\n<p>..and then annotate it (or convert to \"single static assignment' form) to allow more parallelism, like:</p>\n\n<pre><code>    temp1 = (myArray[0] + myArray[1]); temp2 = (99 + myArray[3]);\n    result = temp1 + temp2;\n</code></pre>\n\n<p>..and then convert into something like:</p>\n\n<pre><code>    mov eax,[myArray]\n    mov ebx,[myArray+4]\n    lea eax,[eax+ebx]\n\n    mov ecx,99\n    mov edx,[myArray+12]\n    lea ecx,[ecx+edx]\n\n    lea eax,[eax+ecx]\n\n    mov [result],eax\n</code></pre>\n\n<p>..and then optimize and reorder the instructions to get:</p>\n\n<pre><code>    mov eax,[myArray]\n    mov ebx,[myArray+4]\n    mov edx,[myArray+12]\n    lea eax,[eax+ebx]\n    lea eax,[eax+edx+99]\n    mov [result],eax\n</code></pre>\n\n<p>Notice that this looks nothing like the original code - e.g. there's no <code>printf()</code>, there's no loop and there's no branches.</p>\n\n<p>Of course (given that the function isn't <code>static</code>, and assuming no link time optimization or link time code generation is being done) the compiler will probably also generate an \"I know nothing about the caller\" version of the function and shove that into the output object file in case the linker wants it; and (if no other object files use the function) the linker might throw that version of the function away. In that case; you can look at the code the compiler generated for the \"I know nothing about the caller\" version, and then make worthless/incorrect assumptions based on the amount of stack used by code that is discarded and never executed.</p>\n"}], "owner": {"reputation": 1, "user_id": 10856393, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xS-EAIKQILY/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYGanrxLbxLNMpGOeEJ1DzZoZKBCA/mo/photo.jpg?sz=128", "display_name": "Muni Sekhar", "link": "https://stackoverflow.com/users/10856393/muni-sekhar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 504, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1546536357, "creation_date": 1546409477, "last_edit_date": 1546409501, "question_id": 54001978, "link": "https://stackoverflow.com/questions/54001978/how-much-stack-and-heap-in-bytes-is-required-by-the-c-function-in-x86", "title": "How much stack and heap (in bytes) is required by the C function in X86", "body": "<p>The implementation of a function sum in \u201cC\u201d is as follows:</p>\n\n<pre><code>int sum(int b[], int c)\n{\n    int s,i;\n\n    if (c&lt;0)\n    {\n            printf(\"ERROR\\n\");\n    }\n    s = 0;\n\n    for(i=0; i&lt;c; ++i)\n    {\n        s = s + b[i];\n    }\n    return s;\n}\n</code></pre>\n\n<p>I'd like to know, How much stack and heap in bytes is required by the function sum in X86 Linux platform? How to know this?</p>\n\n<p>Is invocation of the function from within an interrupt-handler likely to be problematic or successful? </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 2465, "user_id": 5462988, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9i3ex.jpg?s=128&g=1", "display_name": "anoopknr", "link": "https://stackoverflow.com/users/5462988/anoopknr"}, "edited": false, "score": 2, "creation_date": 1546408348, "post_id": 54001814, "comment_id": 94840354, "body": "try <code>fgets</code> to read sting."}, {"owner": {"reputation": 38430, "user_id": 429063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fd38783123814dee889d28c991e56fb?s=128&d=identicon&r=PG", "display_name": "Chris Stratton", "link": "https://stackoverflow.com/users/429063/chris-stratton"}, "edited": false, "score": 2, "creation_date": 1546408363, "post_id": 54001814, "comment_id": 94840360, "body": "What was your question?  If you are seeking debugging help, you must specifically state how the observed behavior differs from the expected behavior."}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1546409817, "post_id": 54001814, "comment_id": 94840710, "body": "Use <code>fgets</code> as others have mentioned. Change <code>i&lt;30</code> to <code>string[i] != 0</code> or you may count garbage chars at the end. Change <code>&#39;&#39;</code> to <code>&#39; &#39;</code> to count blanks."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1546411630, "post_id": 54001814, "comment_id": 94841292, "body": "Read  <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">how to debug small programs</a>. You really should be able to find such bugs by yourself. And take the habit of reading the documentation of <i>every</i> used function (e.g. of <a href=\"https://en.cppreference.com/w/c/io/fscanf\" rel=\"nofollow noreferrer\">scanf</a> and of <a href=\"https://en.cppreference.com/w/c/io/fgets\" rel=\"nofollow noreferrer\">fgets</a> and other <a href=\"https://en.cppreference.com/w/c/io\" rel=\"nofollow noreferrer\"><code>&lt;stdio.h&gt;</code> functions</a>...)"}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 6475857, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SQplP3y35hw/AAAAAAAAAAI/AAAAAAAAAKs/eimSTtyU_z4/photo.jpg?sz=128", "display_name": "Arvind Bakshi", "link": "https://stackoverflow.com/users/6475857/arvind-bakshi"}, "edited": false, "score": 0, "creation_date": 1546412818, "post_id": 54001951, "comment_id": 94841657, "body": "can u explain string[i]!=0, what&#39;s this coding style? moreover below code doesn&#39;t count tabs:"}, {"owner": {"reputation": 55, "user_id": 6475857, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SQplP3y35hw/AAAAAAAAAAI/AAAAAAAAAKs/eimSTtyU_z4/photo.jpg?sz=128", "display_name": "Arvind Bakshi", "link": "https://stackoverflow.com/users/6475857/arvind-bakshi"}, "edited": false, "score": 0, "creation_date": 1546412856, "post_id": 54001951, "comment_id": 94841673, "body": "fgets(string, sizeof(string), stdin);            for(int i=0; string[i]!=0; i++){                if(string[i]==&#39; &#39;)                  blanks++;               if(string[i]==&#39;\\t&#39;)                  tabs++;               if(string[i]==&#39;\\n&#39;)                  newlines++;             }"}, {"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "reply_to_user": {"reputation": 55, "user_id": 6475857, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SQplP3y35hw/AAAAAAAAAAI/AAAAAAAAAKs/eimSTtyU_z4/photo.jpg?sz=128", "display_name": "Arvind Bakshi", "link": "https://stackoverflow.com/users/6475857/arvind-bakshi"}, "edited": false, "score": 0, "creation_date": 1546413111, "post_id": 54001951, "comment_id": 94841774, "body": "@ArvindBakshi <code>string[i]!=0</code> to check whether the indexing reached <code>\\0</code> character. It is to make sure to not access out of bound."}, {"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "reply_to_user": {"reputation": 55, "user_id": 6475857, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SQplP3y35hw/AAAAAAAAAAI/AAAAAAAAAKs/eimSTtyU_z4/photo.jpg?sz=128", "display_name": "Arvind Bakshi", "link": "https://stackoverflow.com/users/6475857/arvind-bakshi"}, "edited": false, "score": 0, "creation_date": 1546413132, "post_id": 54001951, "comment_id": 94841780, "body": "@ArvindBakshi <code>C</code> strings are null terminated by standard."}, {"owner": {"reputation": 55, "user_id": 6475857, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SQplP3y35hw/AAAAAAAAAAI/AAAAAAAAAKs/eimSTtyU_z4/photo.jpg?sz=128", "display_name": "Arvind Bakshi", "link": "https://stackoverflow.com/users/6475857/arvind-bakshi"}, "edited": false, "score": 0, "creation_date": 1546413516, "post_id": 54001951, "comment_id": 94841886, "body": "what about not calculating tabs?"}, {"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "reply_to_user": {"reputation": 55, "user_id": 6475857, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SQplP3y35hw/AAAAAAAAAAI/AAAAAAAAAKs/eimSTtyU_z4/photo.jpg?sz=128", "display_name": "Arvind Bakshi", "link": "https://stackoverflow.com/users/6475857/arvind-bakshi"}, "edited": false, "score": 0, "creation_date": 1546413572, "post_id": 54001951, "comment_id": 94841908, "body": "@ArvindBakshi It is working perfectly fine other than <code>if(string[i]==&#39;&#39;)</code> empty char error. It should be <code>if(string[i]==&#39; &#39;)</code>"}, {"owner": {"reputation": 55, "user_id": 6475857, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SQplP3y35hw/AAAAAAAAAAI/AAAAAAAAAKs/eimSTtyU_z4/photo.jpg?sz=128", "display_name": "Arvind Bakshi", "link": "https://stackoverflow.com/users/6475857/arvind-bakshi"}, "edited": false, "score": 0, "creation_date": 1546413914, "post_id": 54001951, "comment_id": 94842006, "body": "I have done if(string[i]== &#39;  &#39;) still not counting tabs. using c complier on codechef.com/ide."}, {"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "reply_to_user": {"reputation": 55, "user_id": 6475857, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SQplP3y35hw/AAAAAAAAAAI/AAAAAAAAAKs/eimSTtyU_z4/photo.jpg?sz=128", "display_name": "Arvind Bakshi", "link": "https://stackoverflow.com/users/6475857/arvind-bakshi"}, "edited": false, "score": 0, "creation_date": 1546414544, "post_id": 54001951, "comment_id": 94842167, "body": "@ArvindBakshi codchef ide is feeding spaces instead of tabs. Try running on different environments."}, {"owner": {"reputation": 55, "user_id": 6475857, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SQplP3y35hw/AAAAAAAAAAI/AAAAAAAAAKs/eimSTtyU_z4/photo.jpg?sz=128", "display_name": "Arvind Bakshi", "link": "https://stackoverflow.com/users/6475857/arvind-bakshi"}, "edited": false, "score": 0, "creation_date": 1546425970, "post_id": 54001951, "comment_id": 94846507, "body": "Thanks. You are right codechef ide treats tabs as blanks."}, {"owner": {"reputation": 55, "user_id": 6475857, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SQplP3y35hw/AAAAAAAAAAI/AAAAAAAAAKs/eimSTtyU_z4/photo.jpg?sz=128", "display_name": "Arvind Bakshi", "link": "https://stackoverflow.com/users/6475857/arvind-bakshi"}, "edited": false, "score": 0, "creation_date": 1546426131, "post_id": 54001951, "comment_id": 94846567, "body": "Is there any way to set setbuf(stdout,NULL); for all c code by default in eclipse?"}, {"owner": {"reputation": 55, "user_id": 6475857, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SQplP3y35hw/AAAAAAAAAAI/AAAAAAAAAKs/eimSTtyU_z4/photo.jpg?sz=128", "display_name": "Arvind Bakshi", "link": "https://stackoverflow.com/users/6475857/arvind-bakshi"}, "edited": false, "score": 0, "creation_date": 1546541952, "post_id": 54001951, "comment_id": 94892831, "body": "Can you help me with this - <a href=\"https://github.com/abcool/C_training/blob/Chapter-1/01_1.5.3_1-9.c\" rel=\"nofollow noreferrer\">github.com/abcool/C_training/blob/Chapter-1/01_1.5.3_1-9.c</a>"}], "tags": [], "owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "is_accepted": true, "score": 1, "last_activity_date": 1546409258, "creation_date": 1546409258, "answer_id": 54001951, "question_id": 54001814, "link": "https://stackoverflow.com/questions/54001814/program-to-calculate-number-of-blanks-tabs-and-newlines-in-a-string/54001951#54001951", "title": "Program to calculate number of blanks, tabs and newlines in a string", "body": "<p><code>scanf</code> stops reading when it occurs whitespace,tabs or newline.</p>\n\n<blockquote>\n  <p>Matches a sequence of non-white-space characters; the next pointer\n  must be a pointer to character array that is long enough to hold the\n  input sequence and the terminating null byte ('\\0'), which is added\n  automatically. <strong>The input string stops at white space or at the maximum\n  field width, whichever occurs first.</strong></p>\n</blockquote>\n\n<p>Thus you are not reading the entire string as you input.</p>\n\n<p>Try using <code>fgets</code> as below.</p>\n\n<pre><code>    fgets(string, sizeof(string), stdin); \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1546414219, "last_edit_date": 1546414219, "creation_date": 1546411506, "answer_id": 54002292, "question_id": 54001814, "link": "https://stackoverflow.com/questions/54001814/program-to-calculate-number-of-blanks-tabs-and-newlines-in-a-string/54002292#54002292", "title": "Program to calculate number of blanks, tabs and newlines in a string", "body": "<blockquote>\n  <p>to calculate number of blanks, tabs and newlines in a string</p>\n</blockquote>\n\n<p>OP's code is almost OK with the string processing, but fails to read user input as needed.</p>\n\n<p><code>scanf(\"%s\"</code> will not save white-spaces.  Use <code>fgets()</code>.  <a href=\"https://stackoverflow.com/questions/54001814/program-to-calculate-number-of-blanks-tabs-and-newlines-in-a-string/54002292#comment94840354_54001814\">@anoopknr</a></p>\n\n<pre><code>// scanf(\"%s\", &amp;string);\nfgets(string, sizeof string, stdin);\n\n// Process the string until a null character is found.\n// for(int i=0; i&lt;30; i++){\nfor(int i=0; string[i]; i++){\n   // OP's code should fail to compile as coded.\n   // if(string[i]=='')\n   if(string[i]==' ')\n     blanks++;\n   if(string[i]=='\\t')\n     tabs++;\n   if(string[i]=='\\n')\n     newlines++;\n}\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 6475857, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SQplP3y35hw/AAAAAAAAAAI/AAAAAAAAAKs/eimSTtyU_z4/photo.jpg?sz=128", "display_name": "Arvind Bakshi", "link": "https://stackoverflow.com/users/6475857/arvind-bakshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 200, "favorite_count": 1, "accepted_answer_id": 54001951, "answer_count": 2, "score": -2, "last_activity_date": 1546414219, "creation_date": 1546408250, "question_id": 54001814, "link": "https://stackoverflow.com/questions/54001814/program-to-calculate-number-of-blanks-tabs-and-newlines-in-a-string", "title": "Program to calculate number of blanks, tabs and newlines in a string", "body": "<pre><code>// Program to calculate number of blanks, tabs and newlines in a string\n#include &lt;stdio.h&gt;\n\nint main(void) {\n    int blanks,tabs,newlines;\n    char string[30];\n    blanks=0;\n    tabs=0;\n    newlines=0;\n    printf(\"Enter some text less than size 30:\\t\");\n    scanf(\"%s\", &amp;string);\n    for(int i=0; i&lt;30; i++){\n       if(string[i]=='')\n         blanks++;\n       if(string[i]=='\\t')\n         tabs++;\n       if(string[i]=='\\n')\n         newlines++;\n    }\n       printf(\"No of blanks: %d \\n No of Tabs: %d \\n No of Newlines: %d\", blanks,tabs,newlines);\n   return 0;\n }\n</code></pre>\n\n<p>This is not getchar()!=EOF version so don't mark it as repeat. Also can't use any library except stdio.h</p>\n"}, {"tags": ["c", "function", "vector", "shuffle"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 2, "creation_date": 1546402277, "post_id": 54001040, "comment_id": 94839099, "body": "I missed the <i>specific</i> question in your question. If the code works, this should be on <a href=\"http://codereview.stackexchange.com\">codereview.stackexchange.com</a>. If it doesn&#39;t, what <i>specifically</i> seems to be wrong? How is the behavior you&#39;re expecting different than the behavior you&#39;re actually <i>getting</i>? This seems an <i>ideal</i> candidate for a debugger if it indeed is malfunctioning."}, {"owner": {"reputation": 1, "user_id": 10799320, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h3e8t.jpg?s=128&g=1", "display_name": "HatariiMisaka", "link": "https://stackoverflow.com/users/10799320/hatariimisaka"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1546402450, "post_id": 54001040, "comment_id": 94839120, "body": "I dont know how to return shuffle. How to use read_vector, display_vector. It should loading and displaying. I never did that so i need help with this."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1546402527, "post_id": 54001040, "comment_id": 94839135, "body": "for ease of readability and understanding: 1) use meaningful variable names.  variable names should indicate <code>content</code> or <code>usage</code> (or better, both)  2) please consistently indent the code.  Indent after every opening brace &#39;{&#39;.  Unindent before every closing brace &#39;}&#39;.  Suggest each indent level be 4 spaces"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1546402654, "post_id": 54001040, "comment_id": 94839151, "body": "regarding: <code>j = rand() % size+1;</code> before calling <code>rand()</code> the function <code>srand()</code> needs to be called (exactly) once.  Typically very near the top of <code>main()</code> with a statement like: <code>srand( (unsigned)time( void ) );</code>  note: for success, the header file: <code>time.h</code> should be one of the header files that are included"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1546402824, "post_id": 54001040, "comment_id": 94839181, "body": "regarding: <code>if(a&lt;1) {     printf(&quot;Incorrect input&quot;);     return 1; }</code>  1) error messages should be output to <code>stderr</code>, not <code>stdout</code>.  2) the <code>return 1</code> statement is very risky,  Suggest: <code>exit( EXIT_FAILURE );  How to output to </code>stderr<code>?  suggest: </code>fprintf( stderr, &quot;scanf failed\\n&quot; );`"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1546403302, "post_id": 54001040, "comment_id": 94839244, "body": "regarding: <code>shuffle(tab[i], i);</code> this is passing the first argument as 1) an integer rather than a pointer to the array <code>tab[]</code>  2) actually is passing an item beyond the end of the initialized table elements.  Suggest: <code>shuffle(tab, i);</code>"}, {"owner": {"reputation": 1, "user_id": 10799320, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h3e8t.jpg?s=128&g=1", "display_name": "HatariiMisaka", "link": "https://stackoverflow.com/users/10799320/hatariimisaka"}, "edited": false, "score": 0, "creation_date": 1546403395, "post_id": 54001040, "comment_id": 94839262, "body": "Okey but how can i add it to int main() And print shuffle numbers?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1546403472, "post_id": 54001040, "comment_id": 94839274, "body": "the function: <code>rand()</code> (and my suggested function: <code>srand()</code> are exposed in the header file: <code>stdlib.h</code>  So the code needs to have the statement: <code>#include &lt;stdlib.h&gt;</code> inserted at the beginning of the code"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1546403557, "post_id": 54001040, "comment_id": 94839282, "body": "<i>Okey but how can i add it to int main() And print shuffle numbers?</i>   Ok to what comment?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1546403693, "post_id": 54001040, "comment_id": 94839301, "body": "the posted code fails to inform the user that entering a 0 causes the code to quit asking for more numbers.  Especially when the user enters a 0, then this: <code>if(a&lt;1) \t\t{ \t\t\tprintf(&quot;Incorrect input&quot;); \t\t\treturn 1; \t\t}</code> will cause the program to exit"}, {"owner": {"reputation": 1, "user_id": 10799320, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h3e8t.jpg?s=128&g=1", "display_name": "HatariiMisaka", "link": "https://stackoverflow.com/users/10799320/hatariimisaka"}, "edited": false, "score": 0, "creation_date": 1546403714, "post_id": 54001040, "comment_id": 94839305, "body": "I dont know how to use void shuffle(int tab[], int size) which i did. Every time i did return something but now i dont know what to return in the end. Maybe i have to use  read_vector and display_vector but i dont know how."}], "answers": [{"comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1546405615, "post_id": 54001407, "comment_id": 94839705, "body": "notice that I did not handle the corner cases of 0 or 1 entries in the <code>tab[]</code> array"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1546405777, "post_id": 54001407, "comment_id": 94839756, "body": "notice that if there are an even number of items in the array that it is possible for the resulting array to be unchanged after the call to <code>shuffle()</code>"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1546436218, "post_id": 54001407, "comment_id": 94851229, "body": "Your shuffle (and OPs) is biased. See <a href=\"https://stackoverflow.com/questions/859253/why-does-this-simple-shuffle-algorithm-produce-biased-results-what-is-a-simple\" title=\"why does this simple shuffle algorithm produce biased results what is a simple\">stackoverflow.com/questions/859253/&hellip;</a> (or many other pages, that was just the first one which showed up in a search)."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1546444377, "post_id": 54001407, "comment_id": 94855246, "body": "Nothing in the question indicated a desire for an unbiased shuffle.  So that is not a concern"}], "tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": true, "score": -1, "last_activity_date": 1546405426, "last_edit_date": 1546405426, "creation_date": 1546405107, "answer_id": 54001407, "question_id": 54001040, "link": "https://stackoverflow.com/questions/54001040/c-functions-shuffle-read-vector-display-vector/54001407#54001407", "title": "C functions shuffle, read_vector, display_vector", "body": "<p>the following proposed code:</p>\n\n<ol>\n<li>cleanly compiles</li>\n<li>incorporates the comments to the question</li>\n<li>performs the desired functionality</li>\n<li>properly checks for errors</li>\n<li>eliminated the 'magic' numbers 100 and 101</li>\n<li>since the OPs code does not have separate functions for <code>read_vector()</code> nor <code>display_vector()</code> I did not implement them separately,  However, they should be trivial to implement</li>\n</ol>\n\n<p>And now the proposed code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\nvoid shuffle(int tab[], int size);\n//int read_vector(int vec[], int size, int stop_value);\n//void display_vector(const int vec[], int size);\n\n#define MAX_VECTOR_LENGTH 100\n\nint main( void )\n{\n    int i; \n    int tab[ MAX_VECTOR_LENGTH ];\n\n    srand( (unsigned)time( NULL ) );\n\n    printf(\"Podaj pierwszy wektor:\\n \");\n    for(i=0; i&lt;MAX_VECTOR_LENGTH; i++)\n    {\n        printf( \"%s\", \"enter vector entry or 0 to indicate done \" );\n        if( scanf(\"%d\", &amp;tab[i]) != 1)\n        {\n            fprintf( stderr, \"scanf failed\\n\");\n            exit( EXIT_FAILURE );\n        }\n\n        // implied else, scanf successful\n\n        if(tab[i]==0)\n        {\n            break;\n        }\n    }\n\n    shuffle(tab, i-1);\n\n    for(int j = 0; j &lt; i; j++)\n    {\n        printf(\"%d  \", tab[j]);\n    }\n    return 0;\n}\n\n\nvoid shuffle(int tab[], int size)\n{\n    int i;\n    int j;\n    int x;\n\n    for(i=size; i&gt;0; i--)\n    {\n        j = rand() % size;\n        x = tab[i];\n        tab[i]=tab[j];\n        tab[j]=x;\n    }\n}\n</code></pre>\n\n<p>A typical run of the program results in:</p>\n\n<pre><code>Podaj pierwszy wektor: \nenter vector entry or 0 to indicate done 1\nenter vector entry or 0 to indicate done 2\nenter vector entry or 0 to indicate done 3\nenter vector entry or 0 to indicate done 4\nenter vector entry or 0 to indicate done 5\nenter vector entry or 0 to indicate done 6\nenter vector entry or 0 to indicate done 7\nenter vector entry or 0 to indicate done 0\n1  6  5  3  4  7  2  \n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10799320, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h3e8t.jpg?s=128&g=1", "display_name": "HatariiMisaka", "link": "https://stackoverflow.com/users/10799320/hatariimisaka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 54001407, "answer_count": 1, "score": -2, "last_activity_date": 1546430979, "creation_date": 1546401496, "last_edit_date": 1546430979, "question_id": 54001040, "link": "https://stackoverflow.com/questions/54001040/c-functions-shuffle-read-vector-display-vector", "title": "C functions shuffle, read_vector, display_vector", "body": "<p>How can i use <code>read_vector</code> and <code>display_vector</code> in C?\nI have to shuffle array and then use this functions.\n<code>void shuffle(int tab[], int size)</code>.\nI don't know if <code>read_vector</code> and <code>display_vector</code> is good.\nAny help will be good.\n(It have to be max 100 numebrs)</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nvoid shuffle(int tab[], int size);\nint read_vector(int vec[], int size, int stop_value);\nvoid display_vector(const int vec[], int size);\n\nint main()\n{\nint i; \nint tab[101], a;\n\nprintf(\"Podaj pierwszy wektor: \");\nfor(i=0; i&lt;100; i++)\n{\na = scanf(\"%d\", &amp;tab[i]);\nif(a&lt;1)\n{\n    printf(\"Incorrect input\");\n    return 1;\n}\nif(tab[0]==0)\n{\n    printf(\"Not enough data available\");\n    return 2;\n}\nif(tab[i]==0)\n{\n    break;\n}\n}\n\nshuffle(tab[i], i);\n\nfor(i=0; i&lt;100; i++)\n{\n    printf(\"%d\", tab[i]);\n}\nreturn 0;\n}\n\nvoid shuffle(int tab[], int size)\n{\nint i, j=0, x=0;\n\nfor(i=size; i&gt;0; i--)\n{\n    j = rand() % size+1;\n    x = tab[i];\n    tab[i]=tab[j];\n    tab[j]=x;\n    x=0;\n}\n\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "string"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1546400703, "post_id": 54000957, "comment_id": 94838841, "body": "The problem is not in the code you show, but in the code you <i>don&#39;t</i> show. What does <code>randomString</code> <i>really</i> do? What does it <i>return</i>? Please create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> to show us."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1546401737, "post_id": 54000957, "comment_id": 94839002, "body": "<code>char* rStr[9] = {0}</code> creates an <b><i>array of 9 pointers to char</i></b>, not an array of <code>char [9]</code>??  (and be very wary of learning how to code from youtube...)"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1546402040, "post_id": 54000957, "comment_id": 94839055, "body": "Your <code>randomString</code> function is declared to return a single <code>char</code>. And in fact doesn&#39;t return anything at all. You also dereference the pointer being passed, which is not the correct type (you pass a pointer to a pointer to <code>char</code>, i.e. <code>char **</code>)."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1546402158, "post_id": 54000957, "comment_id": 94839075, "body": "Unless you are coding for a <i>freestanding</i> embedded system without an Operating System your declaration for <code>main</code> is incorrect. For hosted systems, the proper declarations for <code>main</code> are <code>int main (void)</code> and <code>int main (int argc, char **argv)</code> See: <a href=\"http://port70.net/~nsz/c/c11/n1570.html#5.1.2.2.1p1\" rel=\"nofollow noreferrer\">C11 Standard &#167;5.1.2.2.1 Program startup p1 (draft n1570)</a>. See also: <a href=\"http://stackoverflow.com/questions/204476/\">What should main() return in C and C++?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 10855915, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SRdEy.jpg?s=128&g=1", "display_name": "Adam Dad", "link": "https://stackoverflow.com/users/10855915/adam-dad"}, "is_accepted": false, "score": 1, "last_activity_date": 1546402048, "last_edit_date": 1546402048, "creation_date": 1546401846, "answer_id": 54001061, "question_id": 54000957, "link": "https://stackoverflow.com/questions/54000957/how-to-put-a-string-into-an-array/54001061#54001061", "title": "How to put a string into an array", "body": "<p>Think you're looking for <code>strcpy</code>.</p>\n\n<p>Initialising and then \"pushing\" to the array:</p>\n\n<pre><code>char stringarray[MAX_NUMBER_STRINGS][MAX_STRING_SIZE]; \nstrcpy(stringarray[0], \"blah\");\n</code></pre>\n\n<p>Also main should return an int see valid options below for main:</p>\n\n<pre><code>int main(void);\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>int main(int argc, char* argv[]);\n</code></pre>\n\n<p>References:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/1088622/how-do-i-create-an-array-of-strings-in-c\">How do I create an array of strings in C?</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/2108192/what-are-the-valid-signatures-for-cs-main-function/\">What are the valid signatures for C&#39;s main() function?</a></p>\n"}, {"comments": [{"owner": {"reputation": 61, "user_id": 10856021, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/358912fbabd31d0e99db2660201a0a6c?s=128&d=identicon&r=PG&f=1", "display_name": "ktl159", "link": "https://stackoverflow.com/users/10856021/ktl159"}, "edited": false, "score": 2, "creation_date": 1546402684, "post_id": 54001073, "comment_id": 94839158, "body": "Thank you very much for answering my question and providing a code, anoopknr! This is a huge help for me. God bless!"}], "tags": [], "owner": {"reputation": 2465, "user_id": 5462988, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9i3ex.jpg?s=128&g=1", "display_name": "anoopknr", "link": "https://stackoverflow.com/users/5462988/anoopknr"}, "is_accepted": true, "score": 1, "last_activity_date": 1546401966, "creation_date": 1546401966, "answer_id": 54001073, "question_id": 54000957, "link": "https://stackoverflow.com/questions/54000957/how-to-put-a-string-into-an-array/54001073#54001073", "title": "How to put a string into an array", "body": "<p>Your code has following problems</p>\n\n<ol>\n<li>No <code>return</code> type for <code>main()</code>.</li>\n<li>You have to declare <strong>separate array</strong> for saving <code>strings</code>. </li>\n</ol>\n\n<p>Try the following code :-</p>\n\n<pre><code>char main()\n{\n  srand(time(NULL));\n\n  char rStr[9] = {0};\n  // sStr is where the rStr are saved .\n  char sStr[50][9];  // max 50 rStr\n  int i;\n  for (i = 0; i &lt; 7; i++)\n  {\n    randomString(rStr, 8);\n    strcpy(sStr[i],rStr);\n    printf(\"%d---%s\\n\", i, sStr[i]);\n  }\n // some return value here.\nreturn 0;\n} \n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 10856021, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/358912fbabd31d0e99db2660201a0a6c?s=128&d=identicon&r=PG&f=1", "display_name": "ktl159", "link": "https://stackoverflow.com/users/10856021/ktl159"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "accepted_answer_id": 54001073, "answer_count": 2, "score": 1, "last_activity_date": 1546415674, "creation_date": 1546400391, "last_edit_date": 1546415674, "question_id": 54000957, "link": "https://stackoverflow.com/questions/54000957/how-to-put-a-string-into-an-array", "title": "How to put a string into an array", "body": "<p>I am having a hard time putting a string into an array.</p>\n\n<p>The purpose of my program is to generate random strings. And I want those random strings generated to be placed on an array so I can access those strings again later.</p>\n\n<pre><code>char main()\n{\n    srand(time(NULL));\n    char* rStr[9] = {0};\n\n    int i;\n    for (i = 0; i &lt; 7; i++)\n    {\n        randomString(rStr, 8);    //This is the function that generates a \n                          //random string with 8 characters\n        printf(\"%d---%s\\n\", i, rStr);\n    }   \n}\n</code></pre>\n\n<p>The above code will produce 7 randomly-generated strings with 8 characters. But my problem is I want every strings generated to be placed on an array so I can call them or display them again.</p>\n\n<p>I have tried this below:</p>\n\n<pre><code>char main()\n{\n    srand(time(NULL));\n    char* rStr[9] = {0};\n    int i;\n    for (i = 0; i &lt; 7; i++)\n    {\n        rStr[i] = randomString(rStr, 8);\n        printf(\"%d---%s\\n\", i, rStr[i]);\n    }   \n}\n</code></pre>\n\n<p>but my program would just crash.</p>\n\n<p>EDIT:</p>\n\n<pre><code>int randomNumber(int min, int max)     //This function is responsible for \n                                       //the randomness of the string\n{\n    max -= min;\n    return (rand() % max) +min;\n}\n\nchar randomString(char *str, int randomCharCount)\n{\n    const char *charSet = \"abcdefghijklmnopqrstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ\";\n    int i;\n    for (i = 0; i &lt; randomCharCount; i++)\n    {\n        str[i] = charSet[randomNumber(0, 35)];\n    }\n}\n</code></pre>\n\n<p>Credits of the code to the tutorial right here: </p>\n\n<p><a href=\"https://www.youtube.com/watch?v=3l1TKWVKyAY&amp;index=58&amp;list=PL0170B6E7DD6D8810&amp;fbclid=IwAR2qq87y9qKt4PKPSZrwoRF10j1V9NU9W055j3-1YBXNBU7YtFDMMa1mxMg\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=3l1TKWVKyAY&amp;index=58&amp;list=PL0170B6E7DD6D8810&amp;fbclid=IwAR2qq87y9qKt4PKPSZrwoRF10j1V9NU9W055j3-1YBXNBU7YtFDMMa1mxMg</a></p>\n\n<p><a href=\"https://www.youtube.com/watch?v=3l1TKWVKyAY&amp;index=58&amp;list=PL0170B6E7DD6D8810&amp;fbclid=IwAR2qq87y9qKt4PKPSZrwoRF10j1V9NU9W055j3-1YBXNBU7YtFDMMa1mxMg\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=3l1TKWVKyAY&amp;index=58&amp;list=PL0170B6E7DD6D8810&amp;fbclid=IwAR2qq87y9qKt4PKPSZrwoRF10j1V9NU9W055j3-1YBXNBU7YtFDMMa1mxMg</a></p>\n"}, {"tags": ["c", "function"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10605163"}, "edited": false, "score": 0, "creation_date": 1546396516, "post_id": 54000525, "comment_id": 94838183, "body": "Your code compiles just fine, what is the error you want to solve? It will not run fine though, because you are using <code>x</code> uninitialized."}, {"owner": {"reputation": 1, "user_id": 10799320, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h3e8t.jpg?s=128&g=1", "display_name": "HatariiMisaka", "link": "https://stackoverflow.com/users/10799320/hatariimisaka"}, "edited": false, "score": 0, "creation_date": 1546397113, "post_id": 54000525, "comment_id": 94838258, "body": "I use in school special program to check my work and it sometimes do error. np enter 7 0 ave 116671774720.00\u23ce std 0.00 I dont know why"}, {"owner": {"reputation": 1, "user_id": 10799320, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h3e8t.jpg?s=128&g=1", "display_name": "HatariiMisaka", "link": "https://stackoverflow.com/users/10799320/hatariimisaka"}, "edited": false, "score": 0, "creation_date": 1546397413, "post_id": 54000525, "comment_id": 94838317, "body": "I think a problem is that i have to add const int tab[101] but this doesnt work good"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10605163"}, "edited": false, "score": 0, "creation_date": 1546397439, "post_id": 54000525, "comment_id": 94838323, "body": "No, it is completely unrelated, see my answer below."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user10605163"}, "is_accepted": false, "score": 1, "last_activity_date": 1546397779, "last_edit_date": 1546397779, "creation_date": 1546397419, "answer_id": 54000692, "question_id": 54000525, "link": "https://stackoverflow.com/questions/54000525/function-average-and-stddev-const-int-tab-average-problems/54000692#54000692", "title": "Function average and stdDev const int tab[ ]. Average problems", "body": "<p>You define the variable <code>x</code> in <code>average</code> here:</p>\n\n<pre><code>float y=0, x;\n</code></pre>\n\n<p>without giving it a value. Then here:</p>\n\n<pre><code>x = x + tab[i];\n</code></pre>\n\n<p>you are reading its value without setting it anywhere beforehand. Because you never gave <code>x</code> a value, its value will be indeterminate and reading it will cause undefined behavior, which means that your program could e.g. print garbage output.</p>\n\n<p>Always initialize your variables:</p>\n\n<pre><code>float y=0, x=0;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10799320, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h3e8t.jpg?s=128&g=1", "display_name": "HatariiMisaka", "link": "https://stackoverflow.com/users/10799320/hatariimisaka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1546397779, "creation_date": 1546395680, "question_id": 54000525, "link": "https://stackoverflow.com/questions/54000525/function-average-and-stddev-const-int-tab-average-problems", "title": "Function average and stdDev const int tab[ ]. Average problems", "body": "<p>I have to use:\nfloat average(const int tab[], int size);\nfloat stdDev(const int tab[], int size);\nto printf average and stdDev in C.</p>\n\n<p>I have problem with average and i think with const int.\nWhen i add const int tab[101] i have error with a1;\nSo how can i make it work with const int (if i can).\nAnd if it is anything wrong with this code.\nAny help will be helpful.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;math.h&gt;\n\nfloat average(const int tab[], int size);\nfloat stdDev(const int tab[], int size);\n\nint main()\n{\nfloat ave, std;\nint a1;\nint j;\nint tab[101];\nprintf(\"Podaj liczby: \");\nfor(j=0; j&lt;=99; j++)\n{\n    a1 = scanf(\"%d\", &amp;tab[j]);\n\n    if(a1&lt;1)\n {\n    printf(\"Incorrect input\");\n    return 1;\n }\n if(tab[0]==0)\n {\n    printf(\"not enough data available\");\n    return 2;\n }\n    if(tab[j]==0)\n    {\n        break;\n    }\n\n} \n\nave = average(tab, j);\nprintf(\"%.2f\\n\", ave);\nstd = stdDev(tab, j);\nprintf(\"%.2f\", std);\nreturn 0;\n}\n\nfloat average(const int tab[], int size)\n{\nint i;\nfloat y=0, x;\n\nif(size&lt;=0)\n{\n    return -1;\n}\n\nfor(i=0; i&lt;size; i++)\n{\n\n    x = x + tab[i];\n}\ny = x/size;\nreturn y;\n}\nfloat stdDev(const int tab[], int size)\n{\nint i;\nfloat y, z, z1, z2=0, z3=0;\nif(size&lt;=0)\n{\n    return -1;\n}\n\ny = average(tab, size);\n\n\nfor(i=0; i&lt;size; i++)\n{\n\n    z = tab[i] - y;\n    z1 = pow(z, 2);\n    z2 = z2 + z1;\n    z=0;\n    z1=0;\n}\nz3 = sqrt(z2/size);\nreturn z3;\n}\n</code></pre>\n"}, {"tags": ["c", "rcpp", "r-package"], "answers": [{"comments": [{"owner": {"reputation": 131, "user_id": 9206514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d74726541ea6ddbc7eaaabd55f283c5?s=128&d=identicon&r=PG&f=1", "display_name": "Timothy Bilton", "link": "https://stackoverflow.com/users/9206514/timothy-bilton"}, "edited": false, "score": 0, "creation_date": 1546391215, "post_id": 54000162, "comment_id": 94837350, "body": "Thanks Dirk. So if I understand you correctly, I have to have two packages, one for the C code and another for the C++ code? I can&#39;t just manually register <code>convolve_c</code> on top of the having <code>convolve_cpp</code> registered by <code>compileAttributes()</code>?"}, {"owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "reply_to_user": {"reputation": 131, "user_id": 9206514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d74726541ea6ddbc7eaaabd55f283c5?s=128&d=identicon&r=PG&f=1", "display_name": "Timothy Bilton", "link": "https://stackoverflow.com/users/9206514/timothy-bilton"}, "edited": false, "score": 0, "creation_date": 1546391347, "post_id": 54000162, "comment_id": 94837371, "body": "You misunderstand. I laid out two options (with the two packages) trying to explain that by having <i>one joint</i> package <i>you</i> still have to do the work of <i>both halves</i>.  Or, you punt, and add a trivial C++ caller to your c function. That would get wrapped.   It also sounds you are overcomplicating things for no obvious reason so maybe you want to rethink the why and how.  But in short, you can <i>always</i> do everything manually too that is done by helpers for you.  Nothing is stopping you."}, {"owner": {"reputation": 131, "user_id": 9206514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d74726541ea6ddbc7eaaabd55f283c5?s=128&d=identicon&r=PG&f=1", "display_name": "Timothy Bilton", "link": "https://stackoverflow.com/users/9206514/timothy-bilton"}, "edited": false, "score": 0, "creation_date": 1546392832, "post_id": 54000162, "comment_id": 94837592, "body": "Oh right, I see what you mean now (sorry I have a tendency to over complicate things)."}, {"owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "reply_to_user": {"reputation": 131, "user_id": 9206514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d74726541ea6ddbc7eaaabd55f283c5?s=128&d=identicon&r=PG&f=1", "display_name": "Timothy Bilton", "link": "https://stackoverflow.com/users/9206514/timothy-bilton"}, "edited": false, "score": 0, "creation_date": 1546392881, "post_id": 54000162, "comment_id": 94837599, "body": "There is nothing wrong with that as a research device to understand things. Just remember to step back once in a while to get the bigger picture."}], "tags": [], "owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "is_accepted": false, "score": 4, "last_activity_date": 1546392744, "last_edit_date": 1546392744, "creation_date": 1546390824, "answer_id": 54000162, "question_id": 54000015, "link": "https://stackoverflow.com/questions/54000015/r-package-with-both-c-and-cpp-files-with-rcpp/54000162#54000162", "title": "R package with both .c and .cpp files with Rcpp", "body": "<p>It helps to step back and review.  Consider two packages:</p>\n\n<ul>\n<li><code>convolve_c</code> which you write by hand as a C only package in 'long-form' and do everything manually, including handcrafting the initialization and registration</li>\n<li><code>convolve_cpp</code> which you write using Rcpp -- and <code>compileAttributes()</code> and other tools do everything for you.</li>\n</ul>\n\n<p>In essence, you question amount to <em>also having the C part done for you by Rcpp</em> and it just doesn't work that way. Rcpp does not 'see' your <code>src/convolvec.c</code> so it won't add it.</p>\n\n<p>But if you look at how these function registrations work -- thousand of CRAN packages to look at, and a manual to peruse -- then you <em>can</em> fill it by hand.</p>\n\n<p>Or you could punt. Just add a third function, in C++, which calls your C function.  Rcpp will take care of everything, and you're done.  Your choice: easy, or elaborate.</p>\n\n<p><em>Edit:</em> To be more explicit, option 3 consists of adding</p>\n\n<pre><code>#include &lt;Rcpp.h&gt;\n\nextern \"C\" SEXP convolve_c(SEXP a, SEXP b);\n\n// [[Rcpp::export]]\nSEXP callCconvolve(SEXP a, SEXP b) {\n    return convolve_c(a, b);\n}\n</code></pre>\n\n<p>Then run <code>compileAttributes()</code> and all is good. The mixing and matching will work too for the usual reason but is more work -- see \"Writing R Extensions\" for all the details.</p>\n\n<p>Illustration of it working:</p>\n\n<pre><code>R&gt; library(testrcpp)\nR&gt; a &lt;- as.double(1:10)\nR&gt; b &lt;- as.double(10:1)\nR&gt; identical(convolve_cpp(a, b), callCconvolve(a, b))\n[1] TRUE\nR&gt; \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 0, "creation_date": 1546392526, "post_id": 54000236, "comment_id": 94837545, "body": "That&#39;s approximately the same as my answer, but longer.  Actually, it&#39;s not as you are forcing yourself to rewrite his C function."}, {"owner": {"reputation": 17516, "user_id": 1345455, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DrBTs.jpg?s=128&g=1", "display_name": "coatless", "link": "https://stackoverflow.com/users/1345455/coatless"}, "reply_to_user": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 0, "creation_date": 1546392658, "post_id": 54000236, "comment_id": 94837566, "body": "Who needs brevity? ;) In all seriousness, it&#39;s a larger implementation of the third option through a working package."}, {"owner": {"reputation": 17516, "user_id": 1345455, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DrBTs.jpg?s=128&g=1", "display_name": "coatless", "link": "https://stackoverflow.com/users/1345455/coatless"}, "reply_to_user": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 0, "creation_date": 1546392748, "post_id": 54000236, "comment_id": 94837579, "body": "Not really a re-write of the <i>C</i> function. I&#39;m just placing the <i>C</i> function definition in a header file and calling it from <i>C++</i> whereas you are doing the <code>extern</code> include within the <i>C++</i> file."}, {"owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 0, "creation_date": 1546392822, "post_id": 54000236, "comment_id": 94837589, "body": "Smaller delta. Fewer changes. Smaller difference to OP&#39;s approach."}], "tags": [], "owner": {"reputation": 17516, "user_id": 1345455, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DrBTs.jpg?s=128&g=1", "display_name": "coatless", "link": "https://stackoverflow.com/users/1345455/coatless"}, "is_accepted": false, "score": 5, "last_activity_date": 1546392090, "creation_date": 1546392090, "answer_id": 54000236, "question_id": 54000015, "link": "https://stackoverflow.com/questions/54000015/r-package-with-both-c-and-cpp-files-with-rcpp/54000236#54000236", "title": "R package with both .c and .cpp files with Rcpp", "body": "<blockquote>\n  <p>First, is it actually possible to do this? Can one call C scripts and C++ scripts that are in the same R package?</p>\n</blockquote>\n\n<p>Yes. <em>Rcpp</em> very famously is taking advantage of <em>R</em>'s <em>C</em> API. (c.f. <a href=\"https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Portable-C-and-C_002b_002b-code\" rel=\"noreferrer\">Section 1.6.4 Portable C and C++ code</a> of <a href=\"https://cran.r-project.org/doc/manuals/r-release/R-exts.html\" rel=\"noreferrer\">Writing R Extensions\n</a>.</p>\n\n<blockquote>\n  <p>If the previous is possible, how then does one properly register the functions in the C and C++ scripts.</p>\n</blockquote>\n\n<p>Ideally, only surface aspects from the <em>C++</em> script. Otherwise, you're stuck writing the glue. </p>\n\n<p>I've taken this approach. The post goes on to detail the slight changes. A working example can be found off-site at:</p>\n\n<p><a href=\"https://github.com/r-pkg-examples/rcpp-and-c\" rel=\"noreferrer\">https://github.com/r-pkg-examples/rcpp-and-c</a></p>\n\n<hr>\n\n<p>In short, we'll create a header file for the function definitions and include it with the <em>C</em> code. From there, we'll create a third file that is in <em>C++</em> and export that function into <em>R</em> using _Rcpp.</p>\n\n<h3>convolve_in_c.h</h3>\n\n<p>Here we use an inclusion guard via <code>#ifndef</code> and <code>#define</code> to ensure the function definitions are not repeated if we reuse the header file multiple times.</p>\n\n<pre><code>#ifndef CONVOLVE_C_H\n#define CONVOLVE_C_H\n\nSEXP convolve_c(SEXP a, SEXP b);\n\n#endif /* CONVOLVE_C_H */\n</code></pre>\n\n<h3>convolve_in_c.c</h3>\n\n<p>Now, let's modify the file to allow for our custom header.</p>\n\n<pre><code>#include &lt;R.h&gt;\n#include &lt;Rinternals.h&gt;\n\n// Incorporate our header\n#include \"convolve_in_c.h\"\n\nSEXP convolve_c(SEXP a, SEXP b) {\n  int na, nb, nab;\n  double *xa, *xb, *xab;\n  SEXP ab;\n  a = PROTECT(coerceVector(a, REALSXP));\n  b = PROTECT(coerceVector(b, REALSXP));\n  na = length(a); nb = length(b);\n  nab = na + nb - 1;\n  ab = PROTECT(allocVector(REALSXP, nab));\n  xa = REAL(a); xb = REAL(b); xab = REAL(ab);\n  for(int i = 0; i &lt; nab; i++)\n    xab[i] = 0.0;\n  for(int i = 0; i &lt; na; i++)\n    for(int j = 0; j &lt; nb; j++)\n      xab[i + j] += xa[i] * xb[j];\n  UNPROTECT(3);\n  return ab;\n}\n</code></pre>\n\n<h3>convolve_from_c_to_rcpp.cpp</h3>\n\n<p>Finally, we incorporate the <em>C</em> code using <code>extern</code> within our <em>C++</em> file to have the function name in <em>C++</em> align with the <em>C</em> linkage. In addition, we manipulate the data type from <code>SEXP</code> to <code>NumericVector</code>.</p>\n\n<pre><code>#include \"Rcpp.h\"\n\n// Define the method signature\n\n#ifdef __cplusplus\nextern \"C\" {\n#endif\n\n#include \"convolve_in_c.h\"\n\n#ifdef __cplusplus\n}\n#endif\n\n//' Call C function from Rcpp\n//' \n//' Uses the convolve_c function inside of a C++ routine by Rcpp.\n//' \n//' @param a,b A `numeric` vector.\n//' \n//' @return \n//' A `numeric` vector of length \\eqn{N_a + N_b}.\n//' \n//' @examples\n//' \n//' convolve_from_c(1:5, 5:1)\n//' \n//' @export\n// [[Rcpp::export]]\nRcpp::NumericVector convolve_from_c(const Rcpp::NumericVector&amp; a,\n                                    const Rcpp::NumericVector&amp; b) {\n\n  // Compute the result in _C_ from _C++_.\n  SEXP ab = convolve_c(a, b);\n\n  // Cast as an _Rcpp_ NumericVector \n  Rcpp::NumericVector result( ab );\n\n  // Alternatively:\n  // Rcpp::NumericVector result( convolve_c(a, b) );\n\n  // Return result\n  return result;\n}\n</code></pre>\n"}], "owner": {"reputation": 131, "user_id": 9206514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d74726541ea6ddbc7eaaabd55f283c5?s=128&d=identicon&r=PG&f=1", "display_name": "Timothy Bilton", "link": "https://stackoverflow.com/users/9206514/timothy-bilton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 934, "favorite_count": 2, "answer_count": 2, "score": 3, "last_activity_date": 1546392744, "creation_date": 1546388760, "question_id": 54000015, "link": "https://stackoverflow.com/questions/54000015/r-package-with-both-c-and-cpp-files-with-rcpp", "title": "R package with both .c and .cpp files with Rcpp", "body": "<p>I'm trying to build an R package which contains both C (in the form of .c files) and C++ code (in the form of .cpp files) using the Rcpp package as a dependency. </p>\n\n<p>I have a couple of questions.</p>\n\n<ol>\n<li>First, is it actually possible to do this? Can one call C scripts and C++ scripts that are in the same R package?</li>\n<li>If the previous is possible, how then does one properly register the functions in the C and C++ scripts.</li>\n</ol>\n\n<p>To help with this, I have set up a little example which is available on my GitHub page (<a href=\"https://github.com/tpbilton/testrcpp\" rel=\"nofollow noreferrer\">https://github.com/tpbilton/testrcpp</a>). I have used <code>Rcpp.package.skeleton(\"testrcpp\")</code> to initialize the package and added some functions (from this tutorial <a href=\"https://cran.r-project.org/web/packages/Rcpp/vignettes/Rcpp-introduction.pdf\" rel=\"nofollow noreferrer\">https://cran.r-project.org/web/packages/Rcpp/vignettes/Rcpp-introduction.pdf</a>) and then ran <code>Rcpp::compileAttributes()</code>. I installed the package and the c++ function <code>convolve_cpp</code> works fine but the <code>convolve_c</code> is not registered and I have no idea how to do this properly and my attempts at trying to register both functions have gone nowhere.</p>\n"}, {"tags": ["c", "pointers", "memory-address"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1546383591, "post_id": 53999585, "comment_id": 94836159, "body": "you&#39;re comparing pointers to pointers... drop the <code>&amp;</code> you&#39;ll see the same value"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 1, "creation_date": 1546383669, "post_id": 53999585, "comment_id": 94836173, "body": "Because in C, <i>no two different objects have the same address</i>. Pointers are objects, too. They are not the same as the thing they point at, just like an envelope is different from the house whose addres is printed on it."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1546384399, "post_id": 53999585, "comment_id": 94836295, "body": "Remember a pointer is simply a normal variable that holds the <i>address of</i> something else as its value. In other words, a pointer <i>points to</i> the address where something else can be found. Where you normally think of a variable holding an immediate values, such as <code>int a = 5;</code>, a pointer would simply hold the address where <code>5</code> is stored in memory, e.g. <code>int *b = &amp;a;</code>. If you need the value stored at the memory address <code>b</code> points to, you <i>dereference</i> <code>b</code> using the unary <code>&#39;*&#39;</code> operator, e.g. <code>int c = *b;</code> will initialize <code>c = 5</code>)."}, {"owner": {"reputation": 168120, "user_id": 102937, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1233ec65168f4aae4d939ae8fe6cde1e?s=128&d=identicon&r=PG", "display_name": "Robert Harvey", "link": "https://stackoverflow.com/users/102937/robert-harvey"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1546384529, "post_id": 53999585, "comment_id": 94836318, "body": "@rici: Unlike most other programming languages, pointers in C are <i>actual memory addresses,</i> not objects. They&#39;re neither the envelope nor the house."}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "reply_to_user": {"reputation": 168120, "user_id": 102937, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1233ec65168f4aae4d939ae8fe6cde1e?s=128&d=identicon&r=PG", "display_name": "Robert Harvey", "link": "https://stackoverflow.com/users/102937/robert-harvey"}, "edited": false, "score": 1, "creation_date": 1546386425, "post_id": 53999585, "comment_id": 94836605, "body": "@RobertHarvey -- pointers are objects in the sense that a pointer is a location in memory that holds some value. <a href=\"https://port70.net/~nsz/c/c11/n1570.html#3.15\" rel=\"nofollow noreferrer\">That is what C objects are.</a>"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 168120, "user_id": 102937, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1233ec65168f4aae4d939ae8fe6cde1e?s=128&d=identicon&r=PG", "display_name": "Robert Harvey", "link": "https://stackoverflow.com/users/102937/robert-harvey"}, "edited": false, "score": 0, "creation_date": 1546403585, "post_id": 53999585, "comment_id": 94839286, "body": "@robert: in C, an <i>actual memory address</i> is a value, and an object is simply the storage which holds a value. So I guess that&#39;s not like &quot;most other languages&quot; in which addresses are not first-class values. In a pointer-free language like Java, the envelope is an implementation detail and only the house has semantics. In C (and other languages) the envelope is visible and has semantics independent of the addressed house, so both the envelope and the house exist and you need to avoid confusing them with each other."}], "answers": [{"comments": [{"owner": {"reputation": 141, "user_id": 1875932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9736a39a3334d3f2038844971f4ac143?s=128&d=identicon&r=PG", "display_name": "NorseGaud", "link": "https://stackoverflow.com/users/1875932/norsegaud"}, "edited": false, "score": 1, "creation_date": 1546387840, "post_id": 53999604, "comment_id": 94836798, "body": "Thank you for clarifying! Really appreciate you taking the time and being succinct."}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": false, "score": 3, "last_activity_date": 1546383683, "creation_date": 1546383683, "answer_id": 53999604, "question_id": 53999585, "link": "https://stackoverflow.com/questions/53999585/my-pointer-addresses-are-wrong-no-matter-what-i-try/53999604#53999604", "title": "My pointer/addresses are wrong no matter what I try", "body": "<p>now <code>a</code>,<code>b</code> and <code>ptr</code> are 3 different variables (regardless of their type)</p>\n\n<p>So their <em>address</em> is different. You'll have the same values by <em>not</em> taking the <em>address</em> of pointer variables.</p>\n\n<pre><code>int a,*b;\nint *ptr;\n\na = 123;\nptr = &amp;a;\nb = ptr;\n\nprintf(\"&amp;a is %p\\n\",&amp;a);\nprintf(\"ptr points to %p\\n\",ptr);\nprintf(\"b is %p\\n\",b);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 141, "user_id": 1875932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9736a39a3334d3f2038844971f4ac143?s=128&d=identicon&r=PG", "display_name": "NorseGaud", "link": "https://stackoverflow.com/users/1875932/norsegaud"}, "edited": false, "score": 0, "creation_date": 1546387913, "post_id": 53999726, "comment_id": 94836806, "body": "Thank you for going into depth to explain the misunderstanding I had. The class I&#39;m taking on linkedin learning is limited when they explain these things, so I&#39;m figuring it out by trial, error, and stackoverflow!"}], "tags": [], "owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "is_accepted": true, "score": 3, "last_activity_date": 1546385047, "creation_date": 1546385047, "answer_id": 53999726, "question_id": 53999585, "link": "https://stackoverflow.com/questions/53999585/my-pointer-addresses-are-wrong-no-matter-what-i-try/53999726#53999726", "title": "My pointer/addresses are wrong no matter what I try", "body": "<blockquote>\n  <p>I expected &amp;b to show the same address as &amp;a\u2026</p>\n</blockquote>\n\n<p>Having that expectation means, that you have a wrong mental model about how pointers work and what their semantics are in the C programming language. The key misconception seems to happen at these two lines of the original code fragment:</p>\n\n<p>First you have</p>\n\n<blockquote>\n<pre><code>b = *ptr;\n</code></pre>\n</blockquote>\n\n<p>This line translates into *\"copy the contents of the memory at address <code>ptr</code> into the variable <code>b</code>.\" The variable <code>b</code> never even gets into contact with the pointer itself. You could rewrite it perfectly fine to the same effect into</p>\n\n<pre><code>int tmp = *ptr;\nb = tmp;\n</code></pre>\n\n<p>As a matter of fact, every modern C compiler out there will produce identical code for either case.</p>\n\n<p>The second line where you have a misconception is this one</p>\n\n<blockquote>\n<pre><code>printf(\"&amp;b is %p\\n\",&amp;b);\n</code></pre>\n</blockquote>\n\n<p>specifically the effects of taking the address of the variable <code>b</code>, i.e. the result of <code>&amp;b</code>. <code>b</code> is a completely independent variable, with its very own address. <em>This address cannot be changed!</em> The only thing that can be changed about a variable is its value.</p>\n\n<p>Pointers are variables, too, and yes, a pointer does have an address itself. The value of a pointer is the address it points to. But like every variable, you cannot change the address where the variable is stored and when you assign an address to a pointer, you are changing its value. Hence when in your second code snipped you assign <code>b = ptr;</code> you're copying the <em>value</em> of <code>ptr</code> to <code>b</code>. After that, both <code>ptr</code> and <code>b</code> point to the same address, but these two pointers are two independent copies of the same value, where each copy is placed at a different place in memory. Naturally taking the address of <code>b</code> yields something different as the address of <code>ptr</code>.</p>\n"}], "owner": {"reputation": 141, "user_id": 1875932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9736a39a3334d3f2038844971f4ac143?s=128&d=identicon&r=PG", "display_name": "NorseGaud", "link": "https://stackoverflow.com/users/1875932/norsegaud"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 53999726, "answer_count": 2, "score": 3, "last_activity_date": 1546385047, "creation_date": 1546383456, "question_id": 53999585, "link": "https://stackoverflow.com/questions/53999585/my-pointer-addresses-are-wrong-no-matter-what-i-try", "title": "My pointer/addresses are wrong no matter what I try", "body": "<p>Here is what I'm trying:</p>\n\n<pre><code>int a,b;\nint *ptr;\n\na = 123;\nptr = &amp;a;\nb = *ptr;\n\nprintf(\"&amp;a is %p\\n\",&amp;a);\nprintf(\"ptr points to %p\\n\",ptr);\nprintf(\"&amp;ptr is %p\\n\",&amp;ptr);\nprintf(\"&amp;b is %p\\n\",&amp;b);\n</code></pre>\n\n<p>Results in:</p>\n\n<pre><code>&amp;a is 0x7ffee01fc828\nptr points to 0x7ffee01fc828\n&amp;ptr is 0x7ffee01fc818\n&amp;b is 0x7ffee01fc820\n</code></pre>\n\n<p>I expected &amp;b to show the same address as &amp;a... But that's not the case, so I tried:</p>\n\n<pre><code>int a,*b;\nint *ptr;\n\na = 123;\nptr = &amp;a;\nb = ptr;\n\nprintf(\"&amp;a is %p\\n\",&amp;a);\nprintf(\"ptr points to %p\\n\",ptr);\nprintf(\"&amp;ptr is %p\\n\",&amp;ptr);\nprintf(\"&amp;b is %p\\n\",&amp;b);\n</code></pre>\n\n<p>This still results in an unexpected memory address for &amp;b:</p>\n\n<pre><code>&amp;a is 0x7ffee1cbd828\nptr points to 0x7ffee1cbd828\n&amp;ptr is 0x7ffee1cbd818\n&amp;b is 0x7ffee1cbd820\n</code></pre>\n\n<p>Can someone help me understand why I'm unable to get &amp;b matching the same address as &amp;ptr or &amp;a?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "c", "string", "interop", "ctypes"], "answers": [{"comments": [{"owner": {"reputation": 10955, "user_id": 1915854, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/gIC27.jpg?s=128&g=1", "display_name": "Serge Rogatch", "link": "https://stackoverflow.com/users/1915854/serge-rogatch"}, "edited": false, "score": 0, "creation_date": 1546382150, "post_id": 53999463, "comment_id": 94835940, "body": "If this functions as designed, could you elaborate on how to workaround this?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 10955, "user_id": 1915854, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/gIC27.jpg?s=128&g=1", "display_name": "Serge Rogatch", "link": "https://stackoverflow.com/users/1915854/serge-rogatch"}, "edited": false, "score": 0, "creation_date": 1546382359, "post_id": 53999463, "comment_id": 94835979, "body": "@SergeRogatch: Answer expanded."}, {"owner": {"reputation": 10955, "user_id": 1915854, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/gIC27.jpg?s=128&g=1", "display_name": "Serge Rogatch", "link": "https://stackoverflow.com/users/1915854/serge-rogatch"}, "edited": false, "score": 0, "creation_date": 1546383038, "post_id": 53999463, "comment_id": 94836078, "body": "If I change <code>restype</code> to <code>ctypes.POINTER(ctypes.c_char_p)</code>, I get error:  <code>AttributeError: &#39;LP_c_char_p&#39; object has no attribute &#39;value&#39;</code>"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 10955, "user_id": 1915854, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/gIC27.jpg?s=128&g=1", "display_name": "Serge Rogatch", "link": "https://stackoverflow.com/users/1915854/serge-rogatch"}, "edited": false, "score": 0, "creation_date": 1546383184, "post_id": 53999463, "comment_id": 94836099, "body": "@SergeRogatch: First, it&#39;s <code>ctypes.POINTER(ctypes.c_char)</code>, not <code>ctypes.POINTER(ctypes.c_char_p)</code>. Second, you&#39;re going to need more adjustment than just swapping out the restype. <code>c_char_p</code> is a &quot;pseudo-primitive&quot; type that doesn&#39;t behave like normal pointers. You&#39;re going to have to do pointer handling yourself, or cast back to c_char_p."}], "tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": true, "score": 3, "last_activity_date": 1546382326, "last_edit_date": 1546382326, "creation_date": 1546382043, "answer_id": 53999463, "question_id": 53999442, "link": "https://stackoverflow.com/questions/53999442/inconsistent-c-char-p-behavior-between-returning-vs-pointer-assignment/53999463#53999463", "title": "Inconsistent c_char_p behavior between returning vs pointer assignment", "body": "<p>ctypes <a href=\"https://docs.python.org/3/library/ctypes.html#ctypes-fundamental-data-types-2\" rel=\"nofollow noreferrer\">automatically converts</a> <code>c_char_p</code> return values to bytes objects.</p>\n\n<blockquote>\n  <p>Fundamental data types, when returned as foreign function call results, or, for example, by retrieving structure field members or array items, are transparently converted to native Python types. In other words, if a foreign function has a restype of c_char_p, you will always receive a Python bytes object, <em>not</em> a c_char_p instance.</p>\n</blockquote>\n\n<p>If you want the actual pointer value, use <code>ctypes.POINTER(ctypes.c_char)</code> as the <code>restype</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 10955, "user_id": 1915854, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/gIC27.jpg?s=128&g=1", "display_name": "Serge Rogatch", "link": "https://stackoverflow.com/users/1915854/serge-rogatch"}, "is_accepted": false, "score": 1, "last_activity_date": 1546384189, "creation_date": 1546384189, "answer_id": 53999649, "question_id": 53999442, "link": "https://stackoverflow.com/questions/53999442/inconsistent-c-char-p-behavior-between-returning-vs-pointer-assignment/53999649#53999649", "title": "Inconsistent c_char_p behavior between returning vs pointer assignment", "body": "<p>Finally here is a workaround for this problem:</p>\n\n<p>To avoid automatic conversions of <code>c_char_p</code> to <code>bytes</code>, set C function's <code>restype</code> as <code>c_void_p</code>:</p>\n\n<pre><code>lib.Return.restype = ctypes.c_void_p\n</code></pre>\n\n<p>Then <code>cast</code> to <code>c_char_p</code> before passing to a function that expects <code>c_char_p</code> as the common case:</p>\n\n<pre><code>void_ptr = lib.Return()\nc_str = ctypes.cast(void_ptr, ctypes.c_char_p)\nprint(to_python_string(c_str))\n</code></pre>\n"}], "owner": {"reputation": 10955, "user_id": 1915854, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/gIC27.jpg?s=128&g=1", "display_name": "Serge Rogatch", "link": "https://stackoverflow.com/users/1915854/serge-rogatch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 682, "favorite_count": 0, "accepted_answer_id": 53999463, "answer_count": 2, "score": 0, "last_activity_date": 1546384189, "creation_date": 1546381722, "last_edit_date": 1546382063, "question_id": 53999442, "link": "https://stackoverflow.com/questions/53999442/inconsistent-c-char-p-behavior-between-returning-vs-pointer-assignment", "title": "Inconsistent c_char_p behavior between returning vs pointer assignment", "body": "<p>Consider the following C functions:</p>\n\n<pre><code>void AssignPointer(char **p) {\n    *p = \"Test1\";\n}\n\nchar* Return() {\n    return \"Test2\";\n}\n</code></pre>\n\n<p>Now consider the following code in Python:</p>\n\n<pre><code>import ctypes\n\nlib = CDLL('LibraryPathHere')\n\nlib.AssignPointer.restype = None\nlib.AssignPointer.argtypes = (ctypes.POINTER(ctypes.c_char_p),)\n\nlib.Return.restype = ctypes.c_char_p\nlib.Return.argtypes = None\n\ndef to_python_string(c_str : ctypes.c_char_p) -&gt; str:\n    return c_str.value.decode('ascii')\n</code></pre>\n\n<p>Now the following works:</p>\n\n<pre><code>c_str = ctypes.c_char_p()\nlib.AssignPointer(ctypes.byref(c_str))\nprint(to_python_string(c_str))\n</code></pre>\n\n<p>However the following gives <code>AttributeError: 'bytes' object has no attribute 'value'</code> :</p>\n\n<pre><code>c_str = lib.Return()\nprint(to_python_string(c_str))\n</code></pre>\n\n<p>In the first case the debugger shows <code>c_str</code> as <code>c_char_p(ADDRESS_HERE)</code>. In the second case the debugger shows <code>c_str</code> as <code>b'Test2'</code>.</p>\n\n<p>So is this a bug in Python/ctypes or am I doing something wrong?</p>\n"}, {"tags": ["android", "c++", "c", "compilation", "cross-compiling"], "comments": [{"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1546378825, "post_id": 53999096, "comment_id": 94835302, "body": "<code>__builtin_ia32_punpcklwd</code> is an <i>intel</i> <code>x86</code> intrinsic call for <code>x86</code> SIMD instructions. Android [in most cases] uses the <code>arm</code> architecture which has no such equivalent."}, {"owner": {"reputation": 820, "user_id": 1935655, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/743ead27b3f8a771dc27218e96cf7236?s=128&d=identicon&r=PG", "display_name": "LUser", "link": "https://stackoverflow.com/users/1935655/luser"}, "reply_to_user": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1546378984, "post_id": 53999096, "comment_id": 94835338, "body": "I was thinking this, how can I use the correct toolchain?"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 2, "creation_date": 1546379002, "post_id": 53999096, "comment_id": 94835343, "body": "I just looked it up, and SDL seems to come with Gradle build scripts for targeting android. <code>docs&#47;README-android.md</code> seems to have some detailed instructions. Did you try those?"}, {"owner": {"reputation": 820, "user_id": 1935655, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/743ead27b3f8a771dc27218e96cf7236?s=128&d=identicon&r=PG", "display_name": "LUser", "link": "https://stackoverflow.com/users/1935655/luser"}, "edited": false, "score": 0, "creation_date": 1546421214, "post_id": 53999096, "comment_id": 94844483, "body": "I don&#39;t think the problem is with SDL . I compiled a helloworld sdl app for tests and it worked.  When I tried the opensource app and made my own CMAKE file I ran into weirdness ."}, {"owner": {"reputation": 820, "user_id": 1935655, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/743ead27b3f8a771dc27218e96cf7236?s=128&d=identicon&r=PG", "display_name": "LUser", "link": "https://stackoverflow.com/users/1935655/luser"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1546462676, "post_id": 53999096, "comment_id": 94863028, "body": "Ok @HolyBlackCat I have to recant. I think you might be on to something SDL is importing the lib which is using this as a header. I will look at them. I think this is weird that it didn&#39;t cause problems with hello world programs but now it is throwing a fit.Thank you."}], "answers": [{"tags": [], "owner": {"reputation": 820, "user_id": 1935655, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/743ead27b3f8a771dc27218e96cf7236?s=128&d=identicon&r=PG", "display_name": "LUser", "link": "https://stackoverflow.com/users/1935655/luser"}, "is_accepted": false, "score": 0, "last_activity_date": 1546773330, "creation_date": 1546773330, "answer_id": 54060946, "question_id": 53999096, "link": "https://stackoverflow.com/questions/53999096/cross-compiling-sdl-c-application-to-android/54060946#54060946", "title": "Cross Compiling SDL C++ application to Android", "body": "<p>Ultimately, I switched compilers to g++ 4.4.9 removed the #include  from the repo.</p>\n\n<p>To download the compiler:\n<a href=\"https://developer.android.com/ndk/downloads/older_releases\" rel=\"nofollow noreferrer\">https://developer.android.com/ndk/downloads/older_releases</a></p>\n\n<p><strong>In your local.properties add line</strong></p>\n\n<pre><code>ndk.dir=/path/to/your/ndk-bundle\n</code></pre>\n\n<p>And the thing worked that helped the most was installing the in your app build.gradle </p>\n\n<p>You can specify the GCC compiler (which is no longer supported but my project requires it)</p>\n\n<pre><code>externalNativeBuild {\n            cmake {\n                arguments '-DBUILD_TESTING=OFF', '-DANDROID_TOOLCHAIN=gcc'\n                cppFlags \"-w -std=c++14\"\n            }\n</code></pre>\n\n<p>I hope this helps someone . I only had to make minor changes to compile the app. </p>\n"}], "owner": {"reputation": 820, "user_id": 1935655, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/743ead27b3f8a771dc27218e96cf7236?s=128&d=identicon&r=PG", "display_name": "LUser", "link": "https://stackoverflow.com/users/1935655/luser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 230, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1546773330, "creation_date": 1546378314, "question_id": 53999096, "link": "https://stackoverflow.com/questions/53999096/cross-compiling-sdl-c-application-to-android", "title": "Cross Compiling SDL C++ application to Android", "body": "<p>I want to compile an open source C++ project to Android . The project runs on Linux but needs to be compiled to 32 bit.</p>\n\n<p>Here is the output of the compile process\n<a href=\"https://pastebin.com/9CkVVD9i\" rel=\"nofollow noreferrer\">https://pastebin.com/9CkVVD9i</a></p>\n\n<p>Here is my CMAKE file with which I am working with.\n<a href=\"https://pastebin.com/eMDntghP\" rel=\"nofollow noreferrer\">https://pastebin.com/eMDntghP</a></p>\n\n<p>Problem is that when I compile I see tons of these errors. </p>\n\n<pre><code>  /home/qndel/Android/Sdk/ndk-bundle/toolchains/llvm/prebuilt/linux-x86_64/lib64/clang/7.0.2/include/mmintrin.h:324:19: error: use of undeclared identifier '__builtin_ia32_punpcklwd'\n      return (__m64)__builtin_ia32_punpcklwd((__v4hi)__m1, (__v4hi)__m2);\n                    ^\n  /home/qndel/Android/Sdk/ndk-bundle/toolchains/llvm/prebuilt/linux-x86_64/lib64/clang/7.0.2/include/mmintrin.h:345:19: error: use of undeclared identifier '__builtin_ia32_punpckldq'\n      return (__m64)__builtin_ia32_punpckldq((__v2si)__m1, (__v2si)__m2);\n                    ^\n  fatal error: too many errors emitted, stopping now [-ferror-limit=]\n  20 errors generated.\n  ninja: build stopped: subcommand failed.\n</code></pre>\n\n<p>I am not sure what to think apart from maybe I am targeting the wrong architecture and googling seems to return not very good results. </p>\n\n<p>Let me know if you need a link to the project .</p>\n"}, {"tags": ["c", "casting", "overflow"], "comments": [{"owner": {"reputation": 3108, "user_id": 5288867, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh3.googleusercontent.com/-zd2wZZ4VrjY/AAAAAAAAAAI/AAAAAAAADiM/koENXn3dc8s/photo.jpg?sz=128", "display_name": "dangee1705", "link": "https://stackoverflow.com/users/5288867/dangee1705"}, "edited": false, "score": 1, "creation_date": 1546376536, "post_id": 53998772, "comment_id": 94834815, "body": "Assuming <code>c</code> is signed, the overflow is undefined according to the C standard. In many implementations, setting <code>c</code> to 250 will overflow to -6, then adding 8 will make <code>c</code> 2. This is implementation dependant."}, {"owner": {"reputation": 11, "user_id": 10855348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f47ac83b622612b71260f4f5a63846de?s=128&d=identicon&r=PG&f=1", "display_name": "Kikky", "link": "https://stackoverflow.com/users/10855348/kikky"}, "reply_to_user": {"reputation": 3108, "user_id": 5288867, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh3.googleusercontent.com/-zd2wZZ4VrjY/AAAAAAAAAAI/AAAAAAAADiM/koENXn3dc8s/photo.jpg?sz=128", "display_name": "dangee1705", "link": "https://stackoverflow.com/users/5288867/dangee1705"}, "edited": false, "score": 0, "creation_date": 1546376855, "post_id": 53998772, "comment_id": 94834877, "body": "Thanks a lot! Still I would like to ask that is there any possible way to solve this using binary addition?"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1546380029, "post_id": 53998772, "comment_id": 94835532, "body": "The hint to use binary addition is that 250 is 11111010 in binary, and 8 is 1000, and their sum is 100000010, which is nine bits. If a <code>char</code> holds only the last eight bits, the first 1 is lost, and the value is 00000010, so the result is 2. However, this hint ignores the rules of C. If <code>char</code> is unsigned, this binary view of the arithmetic is okay; C\u2019s modulo-wrapping rules are equivalent to discarding high bits. If <code>char</code> is signed, the rules of C may differ from this binary view; an implementation is allowed to do things other than use the low eight bits."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1546407301, "post_id": 53998772, "comment_id": 94840065, "body": "Note the is no <i>casting</i> done nor <i>overflow</i> here.  There is <i>assignment</i>."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 10855348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f47ac83b622612b71260f4f5a63846de?s=128&d=identicon&r=PG&f=1", "display_name": "Kikky", "link": "https://stackoverflow.com/users/10855348/kikky"}, "edited": false, "score": 0, "creation_date": 1546375937, "post_id": 53998809, "comment_id": 94834692, "body": "Thanks a lot Weather Vane!! Further it is obvious that % is taking remainder value(if I&#39;m not wrong). So is there any possible way to solve using binary addition. Also why is result undefined if char is signed? Hope to hear from you soon."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1546377465, "post_id": 53998809, "comment_id": 94835029, "body": "@Nikhil the binary addition is <code>1111 1010 + 0000 1000 = 1 0000 0010</code> and the modulus, which can be seen as a truncation to 8 bits, leaves <code>0000 0010</code> which is decimal <code>2</code>."}, {"owner": {"reputation": 11, "user_id": 10855348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f47ac83b622612b71260f4f5a63846de?s=128&d=identicon&r=PG&f=1", "display_name": "Kikky", "link": "https://stackoverflow.com/users/10855348/kikky"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1546377721, "post_id": 53998809, "comment_id": 94835085, "body": "@Eric Postpischil:Sir, could you please let me know the difference between arithmetic overflow rules &amp; conversion rules."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1546377747, "post_id": 53998809, "comment_id": 94835090, "body": "C11 draft standard n1570: <i>6.3 Conversions 6.3.1 Arithmetic operands 6.3.1.3 Signed and unsigned integers 3 Otherwise, the new type is signed and the value cannot be represented in it; either the result is implementation-defined or an implementation-defined signal is raised.</i> Note: <b>implementation defined</b>"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 11, "user_id": 10855348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f47ac83b622612b71260f4f5a63846de?s=128&d=identicon&r=PG&f=1", "display_name": "Kikky", "link": "https://stackoverflow.com/users/10855348/kikky"}, "edited": false, "score": 0, "creation_date": 1546377841, "post_id": 53998809, "comment_id": 94835114, "body": "@Kikky: The rules in clause 6.3 of the C standard (2018 and 2011 versions) govern conversions, which are what occur when a value is changed from one type to another type. Such conversions occur automatically in assignments, initializations, function call arguments, and some other places. Arithmetic overflow is what occurs when the mathematical result of an arithmetic operation is not representable in the type being used for arithmetic. Differ rules apply; the mathematical result is not automatically converted to the necessary type."}, {"owner": {"reputation": 11, "user_id": 10855348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f47ac83b622612b71260f4f5a63846de?s=128&d=identicon&r=PG&f=1", "display_name": "Kikky", "link": "https://stackoverflow.com/users/10855348/kikky"}, "edited": false, "score": 0, "creation_date": 1546377858, "post_id": 53998809, "comment_id": 94835119, "body": "@Weather Van:Thanks a lot, Wish you all a very Happy New Year 2019!!"}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 2, "last_activity_date": 1546378290, "last_edit_date": 1546378290, "creation_date": 1546375530, "answer_id": 53998809, "question_id": 53998772, "link": "https://stackoverflow.com/questions/53998772/overflow-in-casting-in-c/53998809#53998809", "title": "Overflow in casting in C", "body": "<p>If the <code>char</code> is 8-bit <code>unsigned</code> the result is <code>2</code> which is <code>258 % 256</code>.</p>\n\n<p>If the char is <code>signed</code> the result is <strike>undefined</strike> implementation defined.</p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 10855348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f47ac83b622612b71260f4f5a63846de?s=128&d=identicon&r=PG&f=1", "display_name": "Kikky", "link": "https://stackoverflow.com/users/10855348/kikky"}, "edited": false, "score": 0, "creation_date": 1546378208, "post_id": 53999029, "comment_id": 94835179, "body": "and all others:I thank once again to all. Now I&#39;m clear with it, it&#39;s fixed. May this New Year bring happiness to all!! Amen"}], "tags": [], "owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": false, "score": 4, "last_activity_date": 1546378247, "last_edit_date": 1546378247, "creation_date": 1546377681, "answer_id": 53999029, "question_id": 53998772, "link": "https://stackoverflow.com/questions/53998772/overflow-in-casting-in-c/53999029#53999029", "title": "Overflow in casting in C", "body": "<h1>Introduction</h1>\n\n<p>There are two practical cases to consider:</p>\n\n<ul>\n<li><code>char</code> is unsigned and eight bits. For this, the result is 2.</li>\n<li><code>char</code> is signed and eight bits. For this, the result is implementation-defined or an implementation-defined signal is raised.</li>\n</ul>\n\n<h1>The char type is unsigned and eight bits</h1>\n\n<p>In this case, <code>char c = 250;</code> is straightforward; it initializes <code>c</code> to 250. Then, in <code>c += 8;</code>, the statement is equivalent to <code>c = c + 8;</code>. In this statement, <code>c</code> is promoted to <code>int</code>, and the addition is performed, resulting in 258. Finally, this result must be converted to <code>char</code> to be stored in <code>c</code>.</p>\n\n<p>The rule for converting to an unsigned type is to adjust the value modulo \u201cone more than the maximum value\u201d that can be represented. That is, for an unsigned <code>char</code> where the maximum value is 255, we add or subtract 256 to make a representable value. So 258 becomes 258\u2212256 = 2, and <code>c</code> is set to 2.</p>\n\n<h1>The char type is signed and eight bits</h1>\n\n<p>In this case, <code>char c = 250;</code> attempts to initialize <code>c</code> with a value that it cannot represent. Per C 2018 6.7.9 11, the initialization is performed like an assignment. Per 6.5.16.1 2, assignment converts the value to the type of the left operand (after lvalue conversion). Per 6.3.1.3 3, conversion of a value that cannot be represented to a signed type is implementation defined:</p>\n\n<blockquote>\n  <p>Otherwise, the new type is signed and the value cannot be represented in it; either the result is implementation-defined or an implementation-defined signal is raised.</p>\n</blockquote>\n\n<p>Assuming execution continues past <code>char c = 250;</code> to <code>c += 8;</code>, then 8 is added to whatever value <code>c</code> was initialized to. This cannot overflow since the operands are promoted to the <code>int</code> type, and any <code>char</code> value plus 8 is representable in <code>int</code>. If the result of the addition is representable in <code>char</code>, it is stored in <code>c</code>. Otherwise, the rules for conversion apply again: The result is implementation-defined or an implementation-defined signal is raised.</p>\n\n<h1>Hypothetical situations</h1>\n\n<p>These situations rarely or never occur in modern practice.</p>\n\n<p>If <code>char</code> is signed and nine bits, then 250 is representable, so <code>c</code> is initialized to 250. Then, in <code>c += 8;</code>, the addition produces a result that is not representable in <code>char</code> (the maximum would be 255), so the conversion rules discussed above apply, and the result is implementation-defined or an implementation-defined result is raised.</p>\n\n<p>If <code>char</code> is wider than nine bits, no errors occur, and <code>c</code> ends up being 258.</p>\n\n<p>If <code>char</code> were the same width as <code>int</code> (a hypothetical possibility discussed elsewhere on Stack Overflow), and <code>char c = 250;</code> were changed to, say, <code>char c = INT_MAX-5;</code>, then <code>c</code> would be initialized without problem, but <code>c += 8;</code> would overflow during the arithmetic, and then the behavior is not defined by the C standard.</p>\n"}], "owner": {"reputation": 11, "user_id": 10855348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f47ac83b622612b71260f4f5a63846de?s=128&d=identicon&r=PG&f=1", "display_name": "Kikky", "link": "https://stackoverflow.com/users/10855348/kikky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3028, "favorite_count": 1, "answer_count": 2, "score": -2, "last_activity_date": 1546378290, "creation_date": 1546375182, "last_edit_date": 1546376404, "question_id": 53998772, "link": "https://stackoverflow.com/questions/53998772/overflow-in-casting-in-c", "title": "Overflow in casting in C", "body": "<pre><code>char c = 250;\nc += 8;\n</code></pre>\n\n<p>What value does <code>c</code> have after the above statements are executed?</p>\n\n<p>I am unable to decode the procedure to solve this question, also hint is to use binary addition.</p>\n"}, {"tags": ["c", "arrays", "file", "sorting"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1546375236, "post_id": 53998752, "comment_id": 94834557, "body": "Please read <a href=\"https://stackoverflow.com/questions/5431941/why-is-while-feof-file-always-wrong\">Why is \u201cwhile ( !feof (file) )\u201d always wrong?</a>"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1546375301, "post_id": 53998752, "comment_id": 94834574, "body": "Also the <a href=\"https://en.cppreference.com/w/c/io/fscanf\" rel=\"nofollow noreferrer\"><code>scanf</code></a> format <code>&quot;%[&quot;</code> ends with <code>&quot;]&quot;</code>. There&#39;s no <code>&quot;s&quot;</code> in the format. And you will have some trouble if the last line doesn&#39;t end with a newline."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1546375395, "post_id": 53998752, "comment_id": 94834600, "body": "Lastly, where do you store the <i>different</i> user-names/dates? Perhaps it&#39;s time for you to learn about <i>structures</i>? And about the <a href=\"https://en.cppreference.com/w/c/algorithm/qsort\" rel=\"nofollow noreferrer\"><code>qsort</code></a> function."}, {"owner": {"reputation": 3, "user_id": 10520510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46d490bda505d88a59682385da154289?s=128&d=identicon&r=PG&f=1", "display_name": "Blackscorpioz", "link": "https://stackoverflow.com/users/10520510/blackscorpioz"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1546375753, "post_id": 53998752, "comment_id": 94834655, "body": "Hey, and thanks for some faste responses and help with formating. At the moment the &quot;users&quot; are only the name of the person who does the test. When you start the program it just ask the persons name and save it in the history file together with the result.      <code>printf(&quot;What are your name?\\n&quot;);</code>     <code>printf(&quot;&gt;&gt; &quot;);</code>    <code>gets(&amp;answerName);</code>     <code>printf(&quot;\\nWelcome, %s!\\n&quot;,answerName);</code>  Saving to history.txt     ` fp = fopen(&quot;history.txt&quot;, &quot;a&quot;);`    ` fprintf(fp,&quot;%.f%% \\t  %-12.12s\\t %d \\t  %s\\n&quot;,result, answerName,`      <code>typeOfTest, date);</code>      <code>fclose(fp)</code>"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1546379165, "post_id": 53998752, "comment_id": 94835378, "body": "If you are going to store all the user names and test types and test dates, then you need more that just one variable <code>testTy</code> \u2014 you need an array of those values too.  And you&#39;ll need to swap that array in parallel with the scores array \u2014 or use a structure (which would be better from all sorts of points of view, except perhaps that you&#39;ve not learned about structures yet)."}, {"owner": {"reputation": 3, "user_id": 10520510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46d490bda505d88a59682385da154289?s=128&d=identicon&r=PG&f=1", "display_name": "Blackscorpioz", "link": "https://stackoverflow.com/users/10520510/blackscorpioz"}, "edited": false, "score": 0, "creation_date": 1546416661, "post_id": 53998752, "comment_id": 94842768, "body": "I have learned little about structures but not so much that i thought this was a good place to use or how to fully implement it. My main study in school is Java but learn C-programming in a side course.  Thanks for all the help from you all!"}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 7429830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91f088b6990212d9dc5ba7ccf0421a23?s=128&d=identicon&r=PG", "display_name": "Davy Souza", "link": "https://stackoverflow.com/users/7429830/davy-souza"}, "is_accepted": false, "score": 0, "last_activity_date": 1546381393, "creation_date": 1546381393, "answer_id": 53999405, "question_id": 53998752, "link": "https://stackoverflow.com/questions/53998752/read-from-file-a-string-of-info-and-sort-by-int-result/53999405#53999405", "title": "Read from file a string of info and sort by int result", "body": "<p>I think the problem is that <code>testTy</code> is not an array. You are splitting the input in 2 variables:</p>\n\n<ul>\n<li><code>topResult</code>: which is an array with the values to be sorted</li>\n<li><code>testTy</code>: the rest of string</li>\n</ul>\n\n<p>When you print the result, the variable <code>testTy</code> always have the same output.</p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 10520510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46d490bda505d88a59682385da154289?s=128&d=identicon&r=PG&f=1", "display_name": "Blackscorpioz", "link": "https://stackoverflow.com/users/10520510/blackscorpioz"}, "edited": false, "score": 0, "creation_date": 1546416439, "post_id": 54000853, "comment_id": 94842685, "body": "Real thanks for the good and clear instructions and tips for the future. I Need to study more on structures and pointers. And read Why is while ( !feof (file) ) always wrong? in detail.  Learned alot from all the explanations!"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 3, "user_id": 10520510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46d490bda505d88a59682385da154289?s=128&d=identicon&r=PG&f=1", "display_name": "Blackscorpioz", "link": "https://stackoverflow.com/users/10520510/blackscorpioz"}, "edited": false, "score": 0, "creation_date": 1546450233, "post_id": 54000853, "comment_id": 94858035, "body": "Sure, glad to help. Structures just allow you to collect varying types, wrap it in <code>{...}</code> and give it a label.  You refer to each member through the <code>&#39;.&#39;</code> operator (if you have a struct itself) or the <code>-&gt;</code> operator (if you have a pointer-to-struct). A pointer is simply a normal variable that holds the <i>address of</i> something else as its value, e.g. a pointer <i>points to</i> the address where something else can be found. You normally think of a variable holding an immediate values, such as <code>int a = 5;</code>, a pointer simply holds the address where <code>5</code> is stored in memory, e.g. <code>int *b = &amp;a;</code>."}], "tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": true, "score": 0, "last_activity_date": 1546413403, "last_edit_date": 1546413403, "creation_date": 1546399176, "answer_id": 54000853, "question_id": 53998752, "link": "https://stackoverflow.com/questions/53998752/read-from-file-a-string-of-info-and-sort-by-int-result/54000853#54000853", "title": "Read from file a string of info and sort by int result", "body": "<p>Your immediate problem was pointed out in the comment and you were directed to <a href=\"http://stackoverflow.com/questions/5431941/why-is-while-feof-file-always-wrong\">Why is while ( !feof (file) ) always wrong?</a>. Always condition the read loop on the read function itself, or loop continually and check the return of the read function within the loop and <code>break;</code> the loop when a successful read has occurred and all constraints are satisfied.</p>\n\n<pre><code>fp = fopen(\"history.txt\", \"r\");\n</code></pre>\n\n<p>Don't hardcode filenames or use <em>magic-numbers</em> in your code. For filenames, either pass the filename to read as an argument to your program (that's what <code>argv</code> is for) or prompt for its entry. (preferably pass it as an argument). If you need constants within your code, <code>#define</code> one (or more) or use a global <code>enum</code> to accomplish the same thing.</p>\n\n<p>Now to the crux of your problem. Anytime when you have to handle differing types of values as a single record or object, you should be thinking about using a structure to coordinate the different types as a single object. Here you can declare a <code>struct</code> with <code>int</code> members to store the percent and test type values and <code>char[]</code> (or <code>char*</code> and allocate) to hold the name and date information. You can then simply declare an array of struct to hold all values read from your <code>history.txt</code> file that can be easily sorted with <code>qsort</code> on any of the members you choose.</p>\n\n<p>First, declare a simple struct, e.g.</p>\n\n<pre><code>struct users {     /* simple struct to hold values read from input */\n    int pct,\n        test;\n    char name[MAXNM],\n        date[MAXDT];\n};\n</code></pre>\n\n<p>Then you can simply declare an array with <code>struct users array[50];</code> However, you can make your life easier and avoid having to type <code>struct users ...</code> over and over by creating a <code>typedef</code>. In C you can even drop the struct label <code>users</code> and add the typedef label at the end, e.g.</p>\n\n<pre><code>typedef struct {    /* simple struct w/typedef to hold values read from input */\n    int pct,\n        test;\n    char name[MAXNM],\n        date[MAXDT];\n} userhist_t;\n</code></pre>\n\n<p>Now you can simply create an array of struct with <code>userhist_t array[50];</code> (it's up to you whether you use a <code>typedef</code> or not, it isn't required, it just saves typing)</p>\n\n<p>If you are sorting values in C, go ahead and do yourself a favor and learn how to write <strong>compare</strong> functions for <code>qsort</code>. It is the swiss-army-knife for sorting in C. (it is also quite efficient and much more well tested than anything you will roll on your own). There is nothing difficult about writing a compare function. The prototype is:</p>\n\n<pre><code>int compare (const void *a, const void *b);\n</code></pre>\n\n<p>Where <code>a</code> and <code>b</code> are simply pointers to adjacent elements in the array you pass and you return <code>-1</code> if <code>a</code> sorts before <code>b</code>, <code>0</code> if they are the same, or <code>1</code> if <code>b</code> sorts before <code>a</code> -- just like <code>strcmp</code> does. To do that you simply cast <code>a</code> and <code>b</code> to the element type for your array and then compare the values, returning an appropriate value. For instance:</p>\n\n<pre><code>/* qsort compare function sorting array of struct by percent (descending) */\nint compare_pct (const void *a, const void *b)\n{\n    const userhist_t    *as = a,    /* cast the pointers to correct type */\n                        *bs = b;\n\n    /* return descending sort (conditionals avoids potential overflow)\n     * for ascending sort use (as &gt; bs) - (as &lt; bs)\n     */\n    return (as-&gt;pct &lt; bs-&gt;pct) - (as-&gt;pct &gt; bs-&gt;pct);\n}\n</code></pre>\n\n<p>Above, the pointers <code>a</code> and <code>b</code> are cast as a pointer to your struct (I just tagged on the <code>s</code> for struct to create different variable names, e.g. <code>as</code> and <code>bs</code>, you can name them anything you like). </p>\n\n<p>While you could just return <code>bs-&gt;pct - as-&gt;pct</code>, there is a risk of overflow if the values exceed what can be returned as an <code>int</code>, (e.g. both large negative value that when subtracted would be less than <code>INT_MIN</code>. Instead, the conditionals are used to normalize the return to <code>-1, 0, 1</code> just using the result of the conditional expressions. </p>\n\n<p>(think through it, if <code>(as-&gt;pct &lt; bs-&gt;pct)</code> the result evaluates to <code>1</code> and <code>(as-&gt;pct &gt; bs-&gt;pct)</code> evaluates to <code>0</code> yielding <code>1 - 0 = 1</code> (so <code>b</code> sorts before <code>a</code> in the descending case))</p>\n\n<p>To sort your array, you then simply call:</p>\n\n<pre><code>qsort (array, nelements, sizeof element, compare);\n</code></pre>\n\n<p>Now on to reading/filling the array of struct. So let's declare our constants, you have the struct above, let's declare an array of struct and then read values from the file into the array, e.g.</p>\n\n<pre><code>/* global enum defining constants for use in code */\nenum { MAXDT = 12, MAXNM = 16, MAXS = 64 };\n...\n    userhist_t user[MAXS] = {{ .pct = 0 }};   /* array of struct */\n    size_t n = 0;\n    ...\n    /* read/fill up to MAXS struct from file */\n    while (n &lt; MAXS &amp;&amp; fscanf (fp, \"%d%% %s %d %s\", &amp;user[n].pct,\n            user[n].name, &amp;user[n].test, user[n].date) == 4)\n        n++;\n</code></pre>\n\n<p>While you can use <code>fgets</code> and <code>sscanf</code> to read a line and then parse the values separately, <code>fscanf</code> will do both for example purposes here. The key is to <strong>validate</strong> the return to insure 4-conversions succeeded and no <em>input</em> or <em>matching</em> failure occurred.</p>\n\n<p>Putting it altogether, passing the filename as the 1st argument to the program (or reading from <code>stdin</code> by default if no argument is provided), handling the declarations, the read, the sort with <code>qsort</code> and the output, you could do something similar to the following:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n/* global enum defining constants for use in code */\nenum { MAXDT = 12, MAXNM = 16, MAXS = 64 };\n\ntypedef struct {    /* simple struct to hold values read from input */\n    int pct,\n        test;\n    char name[MAXNM],\n        date[MAXDT];\n} userhist_t;\n\n/* qsort compare function sorting array of struct by percent (descending) */\nint compare_pct (const void *a, const void *b)\n{\n    const userhist_t    *as = a,    /* cast the pointers to correct type */\n                        *bs = b;\n\n    /* return descending sort (conditionals avoids potential overflow)\n     * for ascending sort use (as &gt; bs) - (as &lt; bs)\n     */\n    return (as-&gt;pct &lt; bs-&gt;pct) - (as-&gt;pct &gt; bs-&gt;pct);\n}\n\nint main (int argc, char **argv) {\n\n    userhist_t user[MAXS] = {{ .pct = 0 }};   /* array of struct */\n    size_t n = 0;\n    /* use filename provided as 1st argument (stdin by default) */\n    FILE *fp = argc &gt; 1 ? fopen (argv[1], \"r\") : stdin;\n\n    if (!fp) {  /* validate file open for reading */\n        perror (\"file open failed\");\n        return 1;\n    }\n\n    /* read/fill up to MAXS struct from file */\n    while (n &lt; MAXS &amp;&amp; fscanf (fp, \"%d%% %s %d %s\", &amp;user[n].pct,\n            user[n].name, &amp;user[n].test, user[n].date) == 4)\n        n++;\n    if (fp != stdin) fclose (fp);   /* close file if not stdin */\n\n    /* sort by calling compare_pct to sort by percent (descending order) */\n    qsort (user, n, sizeof *user, compare_pct);\n\n    for (size_t i = 0; i &lt; n; i++)  /* output sorted results */\n        printf (\"%3d%%      %-8s    %2d     %s\\n\", \n                user[i].pct, user[i].name, user[i].test, user[i].date);\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Example Input File</strong></p>\n\n<pre><code>$ cat dat/history.txt\n26%       User1           1       01/01/2019\n100%      User2           3       01/01/2019\n73%       User3           1       01/01/2019\n52%       User4           1       01/01/2019\n75%       User5           2       01/01/2019\n60%       User6           1       01/01/2019\n</code></pre>\n\n<p><strong>Example Use/Output</strong></p>\n\n<p>Using your input file, would result in the sorted order you describe:</p>\n\n<pre><code>$ ./bin/userhistsort dat/history.txt\n100%      User2        3     01/01/2019\n 75%      User5        2     01/01/2019\n 73%      User3        1     01/01/2019\n 60%      User6        1     01/01/2019\n 52%      User4        1     01/01/2019\n 26%      User1        1     01/01/2019\n</code></pre>\n\n<p>If you want to save the results to a new file, simply redirect the output, e.g.</p>\n\n<pre><code>$ ./bin/userhistsort dat/history.txt &gt; sortedfile.txt\n</code></pre>\n\n<p>(or you can open a new file-stream within your code and output the information there)</p>\n\n<p>Look things over and let me know if you have further questions.</p>\n"}], "owner": {"reputation": 3, "user_id": 10520510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46d490bda505d88a59682385da154289?s=128&d=identicon&r=PG&f=1", "display_name": "Blackscorpioz", "link": "https://stackoverflow.com/users/10520510/blackscorpioz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 54000853, "answer_count": 2, "score": 0, "last_activity_date": 1546413403, "creation_date": 1546374945, "last_edit_date": 1546375196, "question_id": 53998752, "link": "https://stackoverflow.com/questions/53998752/read-from-file-a-string-of-info-and-sort-by-int-result", "title": "Read from file a string of info and sort by int result", "body": "<p>I'm trying to create a top 5 ranking i C programming. The info are stored in a normal text file.</p>\n\n<p>I want to sort the info in the history.txt file by the result of the %: The ints 1-3 are the type of test the user made.</p>\n\n<pre><code>26%       User1           1       01/01/2019\n100%      User2           3       01/01/2019\n73%       User3           1       01/01/2019\n52%       User4           1       01/01/2019\n75%       User5           2       01/01/2019\n60%       User6           1       01/01/2019\n</code></pre>\n\n<p>I now I have wrong in my code but just walking in circles for the moment. it\u00b4s the   char testTy[50]; It\u00b4s not an array but i don\u00b4t really know how to solve it to stay together with the result in %. I have for the moment solved the sorting of the result. But the rest of the text is just a repeated mess.</p>\n\n<p>// Display Best result grade 5 (This is in a function)</p>\n\n<pre><code>fp = fopen(\"history.txt\", \"r\");\nint ch=0;\nint lines=0;\nwhile(!feof(fp))\n{\n    ch = fgetc(fp);\n    if(ch == '\\n')\n    {\n        lines++;\n    }\n}\nfclose(fp);\n\nfp = fopen(\"history.txt\", \"r\");\n\nint i =0, temp, swapped;\nint topResult[lines];\nchar testTy[50];\n\nchar singelLine[100];\nwhile(!feof(fp))\n{\n    fgets(singelLine, 100, fp);\n    sscanf(singelLine, \"%d%[^'\\n']s\",&amp;topResult[i], testTy);\n    i++;\n}\n\nfclose(fp);\nwhile(1)\n{\n    swapped = 0;\n\n    for( i= 0; i &lt;lines-1; i++)\n    {\n        if(topResult[i]&lt;topResult[i+1])\n        {\n            int temp = topResult[i];\n            topResult[i] = topResult[i+1];\n            topResult[i+1] = temp;\n            swapped = 1;\n        }\n    }\n    if(swapped == 0)\n    {\n        break;\n    }\n}\n\nprintf(\"Result:   User:      Test type:      Date:\\n\");\nfor (i = 0; i &lt; 5; i++)\n{\n    printf(\"\\n%d%25s\", topResult[i], testTy);\n}\nprintf(\"\\n\\n\");\nreturn;\n</code></pre>\n\n<p>The Result I want is info like this:</p>\n\n<pre><code>100%     user2  3 01/01/2019\n75%      user5  2 01/01/2019\n73%      user3  1 01/01/2019\n60%      user6  1 01/01/2019\n52%      user4  1 01/01/2019\n</code></pre>\n\n<p>My output now are: </p>\n\n<pre><code>100%     user1  1 01/01/2019\n75%      user1  1 01/01/2019\n73%      user1  1 01/01/2019\n60%      user1  1 01/01/2019\n52%      user1  1 01/01/2019\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1546373936, "post_id": 53998625, "comment_id": 94834299, "body": "<code>scanf(&quot;%s&quot;, &amp;n);</code> -&gt; <code>scanf(&quot;%d&quot;, &amp;n);</code> - Wrong format specifier"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10605163"}, "edited": false, "score": 0, "creation_date": 1546374157, "post_id": 53998625, "comment_id": 94834351, "body": "Did you really copy your code? <code>main();</code> seems like it should be the <code>int main() {</code>. If this really is your code I&#39;d say calling <code>main</code> is fishy."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 1, "creation_date": 1546377924, "post_id": 53998625, "comment_id": 94835136, "body": "What is expected to be entered when asked for &quot;gender&quot;? Be aware that <code>gender[6]</code> cannot hold the string &quot;female&quot;. Please always provide a <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a> .Your code is neither complete, nor compilable."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1546540254, "post_id": 53998625, "comment_id": 94892091, "body": "the question is abut a run-time problem.  For such problems please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> so we can reproduce the problem and help you debug it."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1546540376, "post_id": 53998625, "comment_id": 94892148, "body": "OT: for ease of readability and understanding: 1) follow the axiom: <i>only one statement per line and (at most) one variable declaration per statement.</i>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1546540672, "post_id": 53998625, "comment_id": 94892271, "body": "regarding: <code>scanf(&quot;%s&quot;, &amp;n);</code>  1) always check the returned value (not the parameter values) to assure the operation was successful.  2) This is trying to read an integer, but the input format specifier &#39;%s&#39; is for reading a string, until the first &#39;white space&#39;  suggest using: &#39;%d&#39;.  Note: if actually trying to read a string, then always include a MAX_CHARACTERS modifier that is one less than the length of the input buffer because &#39;%s&#39; and &#39;%[...]&#39; always append a NUL byte to the input.  This also avoids any possibility of a buffer overflow and the resulting undefined behaivor"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1546540852, "post_id": 53998625, "comment_id": 94892328, "body": "regarding: <code>main()</code>  The function <code>main()</code> should never be called by &#39;user&#39; code. Suggest implementing a loop inside the <code>main()</code> function."}], "answers": [{"tags": [], "owner": {"reputation": 2192, "user_id": 10848591, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-eoV3Oz4qBEo/AAAAAAAAAAI/AAAAAAAAEz8/sAjB2IHG5Ao/photo.jpg?sz=128", "display_name": "Spinkoo", "link": "https://stackoverflow.com/users/10848591/spinkoo"}, "is_accepted": true, "score": 0, "last_activity_date": 1546376059, "last_edit_date": 1546376059, "creation_date": 1546374201, "answer_id": 53998674, "question_id": 53998625, "link": "https://stackoverflow.com/questions/53998625/adding-the-number-of-students/53998674#53998674", "title": "Adding the number of students", "body": "<pre><code>struct student\n{\n  char name[50], number[13], gender[6], program[50], age[3], email[100];\n  int roll;\n} s[10];\n\nint main(){\n\nint i, n;\n\nprintf(\"Enter how many students to add:\\n\");\n// the problem was here\nscanf(\"%d\", &amp;n);\n\n// storing information\ni = 0;\nfor (i; i &lt; n; ++i)\n{\n    s[i].roll = i + 1;\n\n    printf(\"\\nFor roll number%d\\n\", s[i].roll);   //number of the student\n\n    printf(\"Enter name: \\n\");\n    scanf(\"%s\", s[i].name);\n\n    printf(\"Enter personal number (yyyymmdd-xxxx):\\n\");\n    scanf(\"%s\", &amp;s[i].number);\n\n    printf(\"Enter gender (male or female):\\n\");\n    scanf(\"%s\", &amp;s[i].gender);\n\n    printf(\"Enter program of student: \\n\");\n    scanf(\"%s\", &amp;s[i].program);\n\n    printf(\"Enter age of student: \\n\");\n    scanf(\"%s\", &amp;s[i].age);\n\n    printf(\"Enter email of student: \\n\");\n    scanf(\"%s\", &amp;s[i].email);\n\n    printf(\"\\n\");\n}\n\nprintf(\"Displaying Information:\\n\");}\n</code></pre>\n\n<p>the %s format is for strings and %d for integer</p>\n"}], "owner": {"reputation": 7, "user_id": 10851380, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JMTFeds6C0w/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbFr3T5YV6ZIQ93pvvPjmYRuXkBvg/mo/photo.jpg?sz=128", "display_name": "Rudolf Hakkenien", "link": "https://stackoverflow.com/users/10851380/rudolf-hakkenien"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 53998674, "answer_count": 1, "score": 0, "last_activity_date": 1546376059, "creation_date": 1546373773, "question_id": 53998625, "link": "https://stackoverflow.com/questions/53998625/adding-the-number-of-students", "title": "Adding the number of students", "body": "<p>Trying to make a program that will store information of students and so far I got a problem when the user should choose the nummber of students that should be stored. maybe i have missed something but i cant find it, when i instead of using in this case n (number of students to be stored) as 10 it works fine and then 10 students gets registered but now i want to change this so the user should choose how many students to add. </p>\n\n<p>At the moment after the user chooses the number of students it skips the \"storing information\" part and jumps to the end so my guess is that it must be n that is the problem.</p>\n\n<pre><code>    struct student\n    {\n      char name[50], number[13], gender[6], program[50], age[3], email[100];\n      int roll;\n    } s[10];\n\n    main();\n\n    int i, n;\n\n    printf(\"Enter how many students to add:\\n\");\n    scanf(\"%s\", &amp;n);\n\n    // storing information\n    i = 0;\n    for (i; i &lt; n; ++i)\n    {\n        s[i].roll = i + 1;\n\n        printf(\"\\nFor roll number%d\\n\", s[i].roll);   //number of the student\n\n        printf(\"Enter name: \\n\");\n        scanf(\"%s\", s[i].name);\n\n        printf(\"Enter personal number (yyyymmdd-xxxx):\\n\");\n        scanf(\"%s\", &amp;s[i].number);\n\n        printf(\"Enter gender (male or female):\\n\");\n        scanf(\"%s\", &amp;s[i].gender);\n\n        printf(\"Enter program of student: \\n\");\n        scanf(\"%s\", &amp;s[i].program);\n\n        printf(\"Enter age of student: \\n\");\n        scanf(\"%s\", &amp;s[i].age);\n\n        printf(\"Enter email of student: \\n\");\n        scanf(\"%s\", &amp;s[i].email);\n\n        printf(\"\\n\");\n    }\n\n    printf(\"Displaying Information:\\n\");\n</code></pre>\n"}, {"tags": ["c", "linux", "posix"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1546373837, "post_id": 53998609, "comment_id": 94834284, "body": "Threads are running <i>independently</i> from each other. Once you&#39;ve created them you have no control over in which order they start, or how they will run. If you need the threads to run in a specific order, you need to explicitly specify that order using synchronization primitives (like condition variables or semaphores or such)."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1546373960, "post_id": 53998609, "comment_id": 94834302, "body": "Also, the <code>ret1</code> and <code>ret2</code> variables contain the success/failure of the <code>pthread_create</code> calls only, not what the thread &quot;returns&quot;"}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1546374110, "post_id": 53998609, "comment_id": 94834340, "body": "Maybe also think about the differences between &quot;arbitrary&quot;, &quot;unpredictable&quot;, &quot;random&quot;, and &quot;implementation-dependent&quot;. Anyhow, in the end, you simply cannot depend on any specific behavior."}], "answers": [{"tags": [], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "is_accepted": true, "score": 0, "last_activity_date": 1546374470, "creation_date": 1546374470, "answer_id": 53998712, "question_id": 53998609, "link": "https://stackoverflow.com/questions/53998609/pthreads-running-in-reverse-order/53998712#53998712", "title": "pthreads running in reverse order", "body": "<blockquote>\n  <p>Is there any way I can make sure the thread I create the first runs\n  first?</p>\n</blockquote>\n\n<p>Sure there is. Serialize the other threads after the first one with e.g., a semaphore (error checking omitted):</p>\n\n<pre><code>#include &lt;pthread.h&gt;\n\n#include &lt;stdio.h&gt;\n#include &lt;semaphore.h&gt;\nsem_t semaphore;\nvoid *myfunc (void *variable)\n{\n    char *msg;\n    msg = variable;\n    /*if not first, wait on the semaphore and the post to it\n      otherwise just post so the other threads may start*/\n    if('F'!=*msg) \n        sem_wait(&amp;semaphore);\n    printf(\"%s\\n\", msg);\n    sem_post(&amp;semaphore);\n}\n\nint main(int argc, char *argv[])\n{\n    pthread_t thread1, thread2;\n    char *msg1 = \"First thread\";\n    char *msg2 = \"Second thread\";\n    int ret1, ret2;\n\n    sem_init(&amp;semaphore,0,0);\n\n    ret1 = pthread_create(&amp;thread1, NULL, myfunc, (void *) msg1);\n    ret2 = pthread_create(&amp;thread2, NULL, myfunc, (void *) msg2);\n\n    pthread_join(thread1, NULL);\n    pthread_join(thread2, NULL);\n\n    printf(\"First thread ret1 = %d\\n\", ret1);\n    printf(\"Second thread ret2 = %d\\n\", ret2);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 9063391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d5ff0a4654bb372380a9e5195570da6?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio", "link": "https://stackoverflow.com/users/9063391/sergio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 246, "favorite_count": 1, "closed_date": 1546373934, "accepted_answer_id": 53998712, "answer_count": 1, "score": 0, "last_activity_date": 1546374470, "creation_date": 1546373597, "question_id": 53998609, "link": "https://stackoverflow.com/questions/53998609/pthreads-running-in-reverse-order", "closed_reason": "Duplicate", "title": "pthreads running in reverse order", "body": "<p>I have this very simple code:</p>\n\n<pre><code>void *myfunc (void *variable);\n\nint main(int argc, char *argv[])\n{\n    pthread_t thread1, thread2;\n    char *msg1 = \"First thread\";\n    char *msg2 = \"Second thread\";\n    int ret1, ret2;\n\n    ret1 = pthread_create(&amp;thread1, NULL, myfunc, (void *) msg1);\n    ret2 = pthread_create(&amp;thread2, NULL, myfunc, (void *) msg2);\n\n    pthread_join(thread1, NULL);\n    pthread_join(thread2, NULL);\n\n    printf(\"First thread ret1 = %d\\n\", ret1);\n    printf(\"Second thread ret2 = %d\\n\", ret2);\n    return 0;\n}\n\nvoid *myfunc (void *variable)\n{\n    char *msg;\n    msg = (char *) variable;\n    printf(\"%s\\n\", msg);\n}\n</code></pre>\n\n<p>And this is the result I'm consistently getting:</p>\n\n<pre><code>Second thread \nFirst thread\nFirst thread ret1 = 0\nSecond thread ret2 = 0\n</code></pre>\n\n<p>In the code I create the first thread before, but the second thread appear to runs the first. As far as I know you can't control which thread runs first, but I've run the program multiple times, with a \"for\" loop, and it's always the same result, it doesn't look random. Is there any way I can make sure the thread I create the first runs first?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 3, "creation_date": 1546373090, "post_id": 53998556, "comment_id": 94834134, "body": "C or C++? It cannot be both."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1546373277, "post_id": 53998556, "comment_id": 94834164, "body": "In a recent similar question, the text had rolled off the top of the console buffer."}, {"owner": {"reputation": 2849, "user_id": 10497483, "user_type": "registered", "profile_image": "https://graph.facebook.com/478365672547562/picture?type=large", "display_name": "Himanshu Ahuja", "link": "https://stackoverflow.com/users/10497483/himanshu-ahuja"}, "edited": false, "score": 2, "creation_date": 1546373317, "post_id": 53998556, "comment_id": 94834175, "body": "please show the output you are actually getting with this code you tried"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1546373335, "post_id": 53998556, "comment_id": 94834179, "body": "Will you always have at least 10000 entries put into the array <code>a</code>? If there could be less then part of the array will be uninitialized and have <i>indeterminate</i> (and seemingly random) values. And in C++ even the act of reading such values leads to <i>undefined behavior</i>."}, {"owner": {"reputation": 39, "user_id": 10517100, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HAkmY.png?s=128&g=1", "display_name": "ak_ghoul", "link": "https://stackoverflow.com/users/10517100/ak-ghoul"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1546373366, "post_id": 53998556, "comment_id": 94834183, "body": "@MatthieuBrucher It&#39;s C."}, {"owner": {"reputation": 2849, "user_id": 10497483, "user_type": "registered", "profile_image": "https://graph.facebook.com/478365672547562/picture?type=large", "display_name": "Himanshu Ahuja", "link": "https://stackoverflow.com/users/10497483/himanshu-ahuja"}, "edited": false, "score": 0, "creation_date": 1546373459, "post_id": 53998556, "comment_id": 94834203, "body": "I guess perhaps the <code>prinf(&quot;%s&quot;,...) </code> it needs an immediate break thereafter coz the cursor waits rather appending in the loop has caused the undefined behaviour"}, {"owner": {"reputation": 39, "user_id": 10517100, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HAkmY.png?s=128&g=1", "display_name": "ak_ghoul", "link": "https://stackoverflow.com/users/10517100/ak-ghoul"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1546373481, "post_id": 53998556, "comment_id": 94834209, "body": "@Someprogrammerdude yup, a fixed set of random 10000 values."}, {"owner": {"reputation": 39, "user_id": 10517100, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HAkmY.png?s=128&g=1", "display_name": "ak_ghoul", "link": "https://stackoverflow.com/users/10517100/ak-ghoul"}, "edited": false, "score": 0, "creation_date": 1546373729, "post_id": 53998556, "comment_id": 94834259, "body": "The output I&#39;m getting in both lang is a huge list of numbers from 7895 to 9269."}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 2, "creation_date": 1546374317, "post_id": 53998556, "comment_id": 94834383, "body": "why do you read the numbers <i>by hand</i> after reading the string rather than just do a <code>fscanf(fp, &quot;%d&quot;, &amp;a[j++]);</code> ?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1546374539, "post_id": 53998556, "comment_id": 94834425, "body": "I tried this with your input file and it output the same 10000 numbers. Have you tried directing the program output to a text file and examining that with a text editor?"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1546378585, "post_id": 53998556, "comment_id": 94835245, "body": "The way to read numbers as text and convert to numbers is a bit strange and will fail if there is some whitespace after the number"}], "answers": [{"tags": [], "owner": {"reputation": 419, "user_id": 4060054, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000167524995/picture?type=large", "display_name": "Nirvedh Meshram", "link": "https://stackoverflow.com/users/4060054/nirvedh-meshram"}, "is_accepted": false, "score": 0, "last_activity_date": 1546374046, "creation_date": 1546374046, "answer_id": 53998661, "question_id": 53998556, "link": "https://stackoverflow.com/questions/53998556/the-numbers-in-the-array-are-not-displaying-from-the-first-number-in-file/53998661#53998661", "title": "The numbers in the array are not displaying from the first number in file", "body": "<p>I worked with a small subset of your file and it does work fine for me. I think you are storing the number of elements in the variable j and you should use that instead of having a fixed number of 10000 in the print loop</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;math.h&gt;\n#include&lt;string.h&gt;\nint main() {\n    const int MAXCHAR=10;\n    FILE *fp;\n    int i,j=0,a[10000];\n    long long int c=0;\n    char str[MAXCHAR];  //MAXCHAR is defined as 10\n    char filename[80] = \"test.txt\";\n\n    fp = fopen(filename, \"r\");\n    if (fp == NULL){\n        printf(\"Could not open file %s\",filename);\n        return 1;\n    }\n    while(fgets(str, MAXCHAR, fp)!=NULL)\n    {\n      int len=strlen(str);\n      int num=0;\n      printf(\"%s\",str);\n      for(i=1;i&lt;len;i++)\n        num+=(str[len-(i+1)]-'0')*pow(10,i);\n      a[j]=num/10;\n      j++;\n    }\n    printf(\"STARTING THE ARRAY PRINT\\n\");\n    for(i=0;i&lt;j;i++)\n    printf(\"%d\\n\",a[i]);\n    return 0;\n  }\n</code></pre>\n\n<blockquote>\n  <p>To compile</p>\n</blockquote>\n\n<pre><code>gcc -o cque cque.c -lm\n\noutput\n2148\n9058\n7742\n3153\n6324\n609\n7628\n5469\n7017\n504\n4092\n1582\n9572\n1542\n5697\n2081\n4218\n3130\n7923\n9595\n6558\n3859\n9832\n3062\n6788\n7578\n7432\n479\n8439\n9079\n7173\n2667\n2770\n2655\n972\n4264\n2014\n3171\nSTARTING THE ARRAY PRINT\n2148\n9058\n7742\n3153\n6324\n609\n7628\n5469\n7017\n504\n4092\n1582\n9572\n1542\n5697\n2081\n4218\n3130\n7923\n9595\n6558\n3859\n9832\n3062\n6788\n7578\n7432\n479\n8439\n9079\n7173\n2667\n2770\n2655\n972\n4264\n2014\n3171\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 10517100, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HAkmY.png?s=128&g=1", "display_name": "ak_ghoul", "link": "https://stackoverflow.com/users/10517100/ak-ghoul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1546374046, "creation_date": 1546373022, "last_edit_date": 1546373838, "question_id": 53998556, "link": "https://stackoverflow.com/questions/53998556/the-numbers-in-the-array-are-not-displaying-from-the-first-number-in-file", "title": "The numbers in the array are not displaying from the first number in file", "body": "<p>The txt file contains 10000 elements starting from 2148 to 9269, but after storing them in array and displaying the elements does not print elements from start.Though the last element is being displayed perfectly. </p>\n\n<p>I have tried searching the web but not able to find an exact solution.I have tried the code in python also. After storing the elements in list if displayed the whole list output is perfect but if I convert them from string to int and then print one by one same problem arises.</p>\n\n<pre><code>int main() {\n    FILE *fp;\n    int i,j=0,a[10000];\n    long long int c=0;\n    char str[MAXCHAR];  //MAXCHAR is defined as 10\n    char filename[80] = \"C:\\\\Users\\\\Akshat\\\\Desktop\\\\codes\\\\C\\\\QuickSort.txt\";\n\n    fp = fopen(filename, \"r\");\n    if (fp == NULL){\n        printf(\"Could not open file %s\",filename);\n        return 1;\n    }\n    while(fgets(str, MAXCHAR, fp)!=NULL)\n    {\n      int len=strlen(str);\n      int num=0;\n      for(i=1;i&lt;len;i++)\n        num+=(str[len-(i+1)]-'0')*pow(10,i);\n      a[j]=num/10;\n      j++;\n    }\n    fclose(fp);\n    for(i=0;i&lt;10000;i++)\n    printf(\"%d\\n\",a[i]);\n    return 0;\n  }\n</code></pre>\n\n<p>The same happens if I print str inside loop. First element displayed in from somewhere between.Also, the total number of elements when printed, prints 10000 which is right. </p>\n\n<p>here's a link to the file - <a href=\"https://d3c33hcgiwev3.cloudfront.net/_32387ba40b36359a38625cbb397eee65_QuickSort.txt?Expires=1546473600&amp;Signature=Tapm7qDg-hFcSkGtF6~zP5uDxoVK3cr4p-vePsnONjcd46aCAS9BZQGAry3gBmAd0upm3WbFJSosVdl1Owj~AY8bhlKvNbyiOMg9oYdko0ax4-PKRtP0NjyXa-Q35equ7YQmp3W4r3RAYb9hO-bQnpX1Q-JNIntYvV3rk4GUmdc_&amp;Key-Pair-Id=APKAJLTNE6QMUY6HBC5A\" rel=\"nofollow noreferrer\">https://d3c33hcgiwev3.cloudfront.net/_32387ba40b36359a38625cbb397eee65_QuickSort.txt?Expires=1546473600&amp;Signature=Tapm7qDg-hFcSkGtF6~zP5uDxoVK3cr4p-vePsnONjcd46aCAS9BZQGAry3gBmAd0upm3WbFJSosVdl1Owj~AY8bhlKvNbyiOMg9oYdko0ax4-PKRtP0NjyXa-Q35equ7YQmp3W4r3RAYb9hO-bQnpX1Q-JNIntYvV3rk4GUmdc_&amp;Key-Pair-Id=APKAJLTNE6QMUY6HBC5A</a></p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1546372955, "post_id": 53998521, "comment_id": 94834102, "body": "The &quot;technical reason&quot; is most likely because of <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\"><i>undefined behavior</i></a>. Have you tried adding some <i>bounds checking</i> for the insertion into <code>c</code>? Remember that C doesn&#39;t have any bounds checking for arrays."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 1, "creation_date": 1546372988, "post_id": 53998521, "comment_id": 94834110, "body": "I bet more than 100 chars in the input. And you write outside the bounds"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1546373053, "post_id": 53998521, "comment_id": 94834129, "body": "Are you sure a newline will terminate the input? Check for <code>EOF</code> as well, but you must change <code>char ch;</code> to <code>int ch;</code> I would use <code>while ((ch = getchar()) != &#39;\\n&#39; &amp;&amp; ch != EOF)</code> Without a newline, you&#39;ll break the array."}, {"owner": {"reputation": 53, "user_id": 9850734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9117176184ed98262ccadf74d2ad2b79?s=128&d=identicon&r=PG&f=1", "display_name": "brunshte", "link": "https://stackoverflow.com/users/9850734/brunshte"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1546373229, "post_id": 53998521, "comment_id": 94834154, "body": "@Someprogrammerdude not sure I understand, I am seemingly not defining anything that even approaches the bounds. The c array is only 100 chars"}, {"owner": {"reputation": 53, "user_id": 9850734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9117176184ed98262ccadf74d2ad2b79?s=128&d=identicon&r=PG&f=1", "display_name": "brunshte", "link": "https://stackoverflow.com/users/9850734/brunshte"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1546373309, "post_id": 53998521, "comment_id": 94834173, "body": "@WeatherVane it does when I run it in my Ubuntu VM, in Geany IDE. What do you mean &quot;break the array&quot;?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1546373391, "post_id": 53998521, "comment_id": 94834190, "body": "I mean &quot;exceed the <b>bounds</b> of the array <code>c[]</code>&quot; since without a newline the loop continues until you break something."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1546373439, "post_id": 53998521, "comment_id": 94834199, "body": "Usually these challenge sites redirect a file to the input of your program. A text file does not have to end with a newline."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1546373503, "post_id": 53998521, "comment_id": 94834213, "body": "One major problem with many sites such as HackerRank is that they don&#39;t tell you the exact input. Without the exact input it becomes very hard to debug. If the input from HackerRank is flawed in any way (possibly on purpose), or perhaps not exactly what you expect, then you will have plenty of problems. Like possibly reading more than 99 characters into the array <code>a</code>."}, {"owner": {"reputation": 53, "user_id": 9850734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9117176184ed98262ccadf74d2ad2b79?s=128&d=identicon&r=PG&f=1", "display_name": "brunshte", "link": "https://stackoverflow.com/users/9850734/brunshte"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1546373598, "post_id": 53998521, "comment_id": 94834230, "body": "@WeatherVane I see. So is that an assumption I should make? Is it trial and error to check how their files are formatted or should I basically write code that knows how to satisfy both scenarios?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1546373695, "post_id": 53998521, "comment_id": 94834253, "body": "I would say the latter."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1546374290, "post_id": 53998521, "comment_id": 94834380, "body": "@Someprogrammerdude <i>they don&#39;t tell you the exact input</i> That&#39;s a feature, not a bug."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 2, "creation_date": 1546374423, "post_id": 53998521, "comment_id": 94834405, "body": "<i>Is it trial and error to check how their files are formatted</i> No, you should <i>carefully</i> read the assignment and implement <i>exactly</i> what it says. If it says your program should read a string, it should read a string. Not a string shorter than 100 characters. Not a string shorter than 1000000 characters. A string."}], "owner": {"reputation": 53, "user_id": 9850734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9117176184ed98262ccadf74d2ad2b79?s=128&d=identicon&r=PG&f=1", "display_name": "brunshte", "link": "https://stackoverflow.com/users/9850734/brunshte"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1546372698, "creation_date": 1546372698, "question_id": 53998521, "link": "https://stackoverflow.com/questions/53998521/code-works-in-geany-ide-but-segmentation-fault-in-hackerranks-whats-the-techn", "title": "Code works in Geany IDE, but segmentation fault in HackerRanks. What&#39;s the technical reason for this?", "body": "<p>It's a simple program that initializes 3 data types and takes 3 inputs, an int, a double, and a string. Then perform addition on the numbers and prints out the \"concatenated\" string (doesn't actually have to be concatenated). It works in Geany IDE running on a VM of Ubuntu 16.04, but gets a segmentation fault in HackerRank. Why would this occur?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;math.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main() {\n    int i = 4;\n    double d = 4.0;\n    char s[] = \"HackerRank \";\n    int j, cnt = 0;\n    double e;\n    char c[100];\n    char ch;\n\n    scanf(\" %d\", &amp;j);\n    scanf(\" %lf\", &amp;e);\n    ch = getchar();\n    while ((ch = getchar()) != '\\n'){\n        c[cnt++] = ch;\n    }\n    c[cnt] = '\\0';\n    printf(\"%d\\n\", i+j);\n    printf(\"%.1lf\\n\", d+e);\n    printf(\"%s%s\\n\", s, c);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1546372573, "post_id": 53998495, "comment_id": 94834036, "body": "<i>&quot;must be on the exact memory space address&quot;</i> - that&#39;s only possible with a custom allocation function, none of the standard ones provide this guarantee"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 6, "creation_date": 1546372588, "post_id": 53998495, "comment_id": 94834041, "body": "You could implement a one-dimensional array and manage the indexing yourself. For example <code>array[row * width + column]</code>."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1546372830, "post_id": 53998495, "comment_id": 94834079, "body": "If you have a fixed-sized constraint, then using a single long array and using indexing to access it differently is the best and simplest way (as shown by @WeatherVane). Otherwise if you need to keep it as a jagged array (like you do with <code>unsigned char **</code>) then just free the memory you already have allocated, and allocate it anew with the new dimensions."}, {"owner": {"reputation": 1, "user_id": 10855221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c90c33cb1462a97e4084a95f57aa068f?s=128&d=identicon&r=PG&f=1", "display_name": "Papaki", "link": "https://stackoverflow.com/users/10855221/papaki"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1546373291, "post_id": 53998495, "comment_id": 94834170, "body": "@WeatherVane: That is a very clever idea, will be my last resort, as I have to re-write a lot of stuff to use the new type of pointer. I was wondering if I can initially declare / reserve the space needed (10.000 bytes) in a way to get the pointer for this space, and then format it as needed - like UnholySheep speculated"}, {"owner": {"reputation": 1, "user_id": 10855221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c90c33cb1462a97e4084a95f57aa068f?s=128&d=identicon&r=PG&f=1", "display_name": "Papaki", "link": "https://stackoverflow.com/users/10855221/papaki"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1546373756, "post_id": 53998495, "comment_id": 94834268, "body": "@Someprogrammerdude, as I am a newbie, can you show me a line of code to test &amp; understand this?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1546374132, "post_id": 53998495, "comment_id": 94834344, "body": "You have shown us the code to allocate your array. I assume you also have some code to <code>free</code> the memory you allocate? Then just call the function to free the currently allocated memory, and call <code>reshape</code> with the new dimensions."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1546374170, "post_id": 53998495, "comment_id": 94834354, "body": "By the way, in C you <a href=\"http://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc/605858#605858\">should not cast the result of <code>malloc</code> (or its siblings like <code>calloc</code>)</a>."}], "answers": [{"tags": [], "owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": false, "score": 0, "last_activity_date": 1546375453, "creation_date": 1546375453, "answer_id": 53998803, "question_id": 53998495, "link": "https://stackoverflow.com/questions/53998495/c-reshape-2d-array-in-runtime/53998803#53998803", "title": "C - Reshape 2D array in runtime", "body": "<p>Array reshaping can be accomplished with casting:</p>\n\n<pre><code>char (*p)[FirstColumns] = calloc(FirstRows, sizeof *p);\n// Test p and handle error if NULL.\nchar (*q)[SecondColumns] = (char (*)[SecondColumns]) p;\n</code></pre>\n\n<p>As long as the underlying elements are the same type, there should not be any aliasing issues.</p>\n\n<p>(A pedantic C interpretation might question whether accessing an array of <code>SecondColumns</code> that was originally an array of <code>FirstColumns</code>, or part of it, or overlapping several, violates aliasing rules, but arrays are not actually accessed through their lvalues, as their lvalues are converted to pointers. I am not aware of any compiler that produces problems with such code.)</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 10855221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c90c33cb1462a97e4084a95f57aa068f?s=128&d=identicon&r=PG&f=1", "display_name": "Papaki", "link": "https://stackoverflow.com/users/10855221/papaki"}, "edited": false, "score": 0, "creation_date": 1546470582, "post_id": 53998850, "comment_id": 94865836, "body": "Thanks for the input @hyde! In my mind I had it like: &quot;dear compiler, reserve 10000 bytes starting at a memory location e.g. 0x80003000&quot;, and then give me two options: &quot;format this specific memory space as my_array[20][500] or my_array[40][250]&quot;. Looks like I can&#39;t do that...  The other pointing method you proposed (as others did too), is a good one, but needs me to rewrite other sections of my code to work. Also, doing multiplications &amp; addtions to calc the pointer, means extra CPU cycles, and this costs speed in a microprocessor project. :-("}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "reply_to_user": {"reputation": 1, "user_id": 10855221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c90c33cb1462a97e4084a95f57aa068f?s=128&d=identicon&r=PG&f=1", "display_name": "Papaki", "link": "https://stackoverflow.com/users/10855221/papaki"}, "edited": false, "score": 0, "creation_date": 1546503883, "post_id": 53998850, "comment_id": 94873465, "body": "@Papaki Unless you have some low-MHz embedded CPU, indirection through an extra pointer table is probably <i>significantly</i> slower than multiplication+addition."}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "reply_to_user": {"reputation": 1, "user_id": 10855221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c90c33cb1462a97e4084a95f57aa068f?s=128&d=identicon&r=PG&f=1", "display_name": "Papaki", "link": "https://stackoverflow.com/users/10855221/papaki"}, "edited": false, "score": 0, "creation_date": 1546503954, "post_id": 53998850, "comment_id": 94873489, "body": "In C you can typedef a local VLA type, which creates basically the same machine code as multiplication+addition, except with cleaner syntax and compiler generating the calculation. It might suit your purpose, if you just want the syntax, and don&#39;t actually need the pointer array for other reasons. If you want a <code>typedef</code> example, add short example function using the data to your question."}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "reply_to_user": {"reputation": 1, "user_id": 10855221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c90c33cb1462a97e4084a95f57aa068f?s=128&d=identicon&r=PG&f=1", "display_name": "Papaki", "link": "https://stackoverflow.com/users/10855221/papaki"}, "edited": false, "score": 0, "creation_date": 1546504017, "post_id": 53998850, "comment_id": 94873511, "body": "If you do need the pointer array, then the pointer array actually contains pointers to start of each row. If row length changes, then these pointers must be changed to match, there is no magic solution to <i>that</i>."}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "reply_to_user": {"reputation": 1, "user_id": 10855221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c90c33cb1462a97e4084a95f57aa068f?s=128&d=identicon&r=PG&f=1", "display_name": "Papaki", "link": "https://stackoverflow.com/users/10855221/papaki"}, "edited": false, "score": 0, "creation_date": 1546504410, "post_id": 53998850, "comment_id": 94873653, "body": "Oh, and if it isn&#39;t clear to you, there are actually two kinds of &quot;2-dimensional array&quot; in C commonly used. One is more like &quot;jagged array&quot; (because each row can be of different length), where you have 1-dimensional array of pointers to 1-dimensional arrays of row data (which don&#39;t need to be one block of memory, or in any kind of order). And then you can have actual 2-dimensional (or more) array, where data is continuous and compiler must know the extra dimensions so it can calculate the offset."}], "tags": [], "owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "is_accepted": false, "score": 0, "last_activity_date": 1546376208, "last_edit_date": 1546376208, "creation_date": 1546375890, "answer_id": 53998850, "question_id": 53998495, "link": "https://stackoverflow.com/questions/53998495/c-reshape-2d-array-in-runtime/53998850#53998850", "title": "C - Reshape 2D array in runtime", "body": "<p>So, you actually want a memory buffer, and then you have different arrays of pointers, which point to this memory buffer.</p>\n\n<p>So, using globals (ugly), something like:</p>\n\n<pre><code>unsigned char *my_data; // allocate to have enough space, 10000 chars or whatever\n\nunsigned char **my_array; //Global defined\n\nvoid reshape(unsigned short max_cols, unsigned short max_rows) {\n    free(my_array); // don't leak memory\n\n    // no need for cast below\n    // also, since array will be initialized below, use malloc\n    my_array = malloc(max_cols * sizeof(unsigned char*)); \n\n    // initialize my_data with addresses of rows\n    for(i = 0; i &lt; max_cols; ++i) {\n        my_array[i] = &amp;(my_data[i * max_rows]);\n    }\n}\n</code></pre>\n\n<hr>\n\n<p>Though note that unless you really need <code>my_array</code> to be array of pointers, you can avoid the indirection by directly accessing mydata like this:</p>\n\n<pre><code>my_data[row_index * max_cols + column_index]\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10855221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c90c33cb1462a97e4084a95f57aa068f?s=128&d=identicon&r=PG&f=1", "display_name": "Papaki", "link": "https://stackoverflow.com/users/10855221/papaki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 89, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1546384484, "creation_date": 1546372479, "question_id": 53998495, "link": "https://stackoverflow.com/questions/53998495/c-reshape-2d-array-in-runtime", "title": "C - Reshape 2D array in runtime", "body": "<p>How can a 2D array be re-shaped in runtime, in C? \nFor example, we have initially declared a unsigned char array[20][500] and need later to re-shape it, to something like e.g. array[40][250]. The total memory consumption will (and must) always stay the same (10.000 bytes). </p>\n\n<p>The restrain is that the newly shaped array, must be on the exact memory space address - as initially was declared. We can't allocate a different space / we are not sure if there will be any free space to use (microprocessor project). \nI tried with calloc, but eventually it goes bananas:</p>\n\n<pre><code>unsigned char **my_array; //Global defined\n\nvoid reshape(unsigned short max_cols, unsigned short max_rows){\n    my_array = (unsigned char **) calloc(max_cols, sizeof(unsigned char*));\n    for(i = 0; i &lt; max_cols; ++i){\n        my_array[i] = (unsigned char **) calloc(max_rows, sizeof(unsigned char));\n    }\n}\n</code></pre>\n\n<p>I am a newbie in C, so any help is appreciated - thanks!</p>\n"}, {"tags": ["c", "debugging", "struct", "segmentation-fault", "dynamic-memory-allocation"], "comments": [{"owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 1, "creation_date": 1546370639, "post_id": 53998192, "comment_id": 94833676, "body": "Please provide an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. This code doesn\u2019t show cleary what is <code>head</code>, you talk about passing arguments to a function but there\u2019s no function here etc. We need a complete code to know what\u2019s happening."}, {"owner": {"reputation": 2653, "user_id": 1028434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a340b89a8b4efdb83da69d6cc93caac7?s=128&d=identicon&r=PG", "display_name": "fdk1342", "link": "https://stackoverflow.com/users/1028434/fdk1342"}, "edited": false, "score": 0, "creation_date": 1546370690, "post_id": 53998192, "comment_id": 94833684, "body": "You should update the code to show what the function parameters are.  Clearly you are using <code>malloc</code> and <code>free</code> but then comment elsewhere that you didn&#39;t mean to use it in that function.  Is <code>head</code> passed into the function.  Also <code>malloc</code> doesn&#39;t clear the data it points to.  In this case <code>element</code> still needs to be initialized so that <code>name</code> and <code>next</code> have meaningful values."}, {"owner": {"reputation": 69, "user_id": 9095574, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VqI4h.jpg?s=128&g=1", "display_name": "Mihu", "link": "https://stackoverflow.com/users/9095574/mihu"}, "edited": false, "score": 0, "creation_date": 1546372838, "post_id": 53998192, "comment_id": 94834082, "body": "@user10605163 thank you, however after changing the code so that I don&#39;t use malloc or free, the function still seems to cause a problem in the debugger (and crashes the program) EVEN if I allocate memory to member &quot;next&quot; of the list element passed to the function."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10605163"}, "edited": false, "score": 0, "creation_date": 1546373650, "post_id": 53998192, "comment_id": 94834241, "body": "@Mihu Yes the reason is missing initialization as pointed out by bruno. I have added my comment together with the initialization problem as answer."}], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 9095574, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VqI4h.jpg?s=128&g=1", "display_name": "Mihu", "link": "https://stackoverflow.com/users/9095574/mihu"}, "edited": false, "score": 0, "creation_date": 1546370125, "post_id": 53998225, "comment_id": 94833564, "body": "Well, that doesn&#39;t really solve my problem. I want current=head, not head=current so I should&#39;ve just skipped using malloc."}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "reply_to_user": {"reputation": 69, "user_id": 9095574, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VqI4h.jpg?s=128&g=1", "display_name": "Mihu", "link": "https://stackoverflow.com/users/9095574/mihu"}, "edited": false, "score": 2, "creation_date": 1546370536, "post_id": 53998225, "comment_id": 94833654, "body": "@Mihu I edited my answer, the problem is you do not give us enough source code, we don&#39;t see how you initialize your cells"}, {"owner": {"reputation": 8699, "user_id": 1726083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/757452f7cd7ba2347c667ef9298ceadb?s=128&d=identicon&r=PG", "display_name": "Daniel Farrell", "link": "https://stackoverflow.com/users/1726083/daniel-farrell"}, "reply_to_user": {"reputation": 69, "user_id": 9095574, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VqI4h.jpg?s=128&g=1", "display_name": "Mihu", "link": "https://stackoverflow.com/users/9095574/mihu"}, "edited": false, "score": 0, "creation_date": 1546370623, "post_id": 53998225, "comment_id": 94833672, "body": "True, the source is incomplete.  @Mihu you need to use <code>malloc</code> or an equivalent to allocate dynamic memory, so you can&#39;t &quot;just skipped using malloc&quot; or you have no way to initialize an arbitrary amount of elements for your list.  Reread this answer and try to understand it before you say it doesn&#39;t fix your problem."}, {"owner": {"reputation": 69, "user_id": 9095574, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VqI4h.jpg?s=128&g=1", "display_name": "Mihu", "link": "https://stackoverflow.com/users/9095574/mihu"}, "edited": false, "score": 0, "creation_date": 1546371880, "post_id": 53998225, "comment_id": 94833904, "body": "I&#39;ve added an edit which might make the code more understandable. What I get from your answer, I cannot check if member &quot;next&quot; of a list is equal to NULL if I don&#39;t alloc &quot;element.next&quot;? How would I check if a list is empty then?"}, {"owner": {"reputation": 69, "user_id": 9095574, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VqI4h.jpg?s=128&g=1", "display_name": "Mihu", "link": "https://stackoverflow.com/users/9095574/mihu"}, "edited": false, "score": 0, "creation_date": 1546372033, "post_id": 53998225, "comment_id": 94833927, "body": "By &quot;skipping malloc&quot; I mean that it&#39;s unnecesary here, as I&#39;ve allocated memory for &quot;head&quot; previously, so I guess i don&#39;t need to allocate it to &quot;current&quot; just to overwrite it with &quot;head&quot; in the next line."}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "reply_to_user": {"reputation": 69, "user_id": 9095574, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VqI4h.jpg?s=128&g=1", "display_name": "Mihu", "link": "https://stackoverflow.com/users/9095574/mihu"}, "edited": false, "score": 0, "creation_date": 1546372225, "post_id": 53998225, "comment_id": 94833959, "body": "@Mihu when you create a new cell you need <i>always</i> to set its fields <i>including next</i> else their value is undefined. While you will not give more from your code it is not possible to progress, do you think we have a magic crystal ball to guess what you did ?"}, {"owner": {"reputation": 69, "user_id": 9095574, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VqI4h.jpg?s=128&g=1", "display_name": "Mihu", "link": "https://stackoverflow.com/users/9095574/mihu"}, "edited": false, "score": 0, "creation_date": 1546372527, "post_id": 53998225, "comment_id": 94834021, "body": "@bruno I&#39;ve shown you how I declare a variable and pass the variable as an argument to the function, and I showed you the whole function. What else can I show that is relevant to this question?"}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "reply_to_user": {"reputation": 69, "user_id": 9095574, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VqI4h.jpg?s=128&g=1", "display_name": "Mihu", "link": "https://stackoverflow.com/users/9095574/mihu"}, "edited": false, "score": 0, "creation_date": 1546372899, "post_id": 53998225, "comment_id": 94834092, "body": "@Mihu do you understand the meaning of the word <i>initialize</i> ? <code>ListEl* element = malloc(sizeof(ListEl));</code> <i>only</i> allocate a piece of memory and save its address into <i>element</i>, but the allocated memory is <i>not initialized</i> this means the fields name and next have a unknown value"}], "tags": [], "owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "is_accepted": false, "score": 2, "last_activity_date": 1546373144, "last_edit_date": 1546373144, "creation_date": 1546369990, "answer_id": 53998225, "question_id": 53998192, "link": "https://stackoverflow.com/questions/53998192/why-wont-this-c-program-let-me-access-memory/53998225#53998225", "title": "Why won&#39;t this C program let me access memory?", "body": "<p>may be</p>\n\n<pre><code>ListEl* current = malloc(sizeof(ListEl));\ncurrent = head;\n</code></pre>\n\n<p>must be</p>\n\n<pre><code>ListEl* current = malloc(sizeof(ListEl));\nhead = current;\n</code></pre>\n\n<p>else why to do the malloc and lost it immediately ?</p>\n\n<hr>\n\n<p>I hope you have additional code before </p>\n\n<pre><code>if (current-&gt;next==NULL)\n</code></pre>\n\n<p>because current is only allocated, not initialized</p>\n\n<hr>\n\n<p><em>When I watch the \"current->next\" variable, the debugger says \"Cannot access memory at address\".</em></p>\n\n<p>That means <em>current</em> was broken because for instance it was deleted, or you just never initialized the field <em>next</em>. the problem is you do not give <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a></p>\n\n<p>If you code is really that :</p>\n\n<pre><code>ListEl* element = malloc(sizeof(ListEl));\nprint_listEl(element);\n</code></pre>\n\n<p><em>element->name</em> nor <em>element->next</em> are not initialized, so in <code>print_listEl</code> it is the same</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user10605163"}, "is_accepted": true, "score": 1, "last_activity_date": 1546373220, "last_edit_date": 1546373220, "creation_date": 1546372893, "answer_id": 53998542, "question_id": 53998192, "link": "https://stackoverflow.com/questions/53998192/why-wont-this-c-program-let-me-access-memory/53998542#53998542", "title": "Why won&#39;t this C program let me access memory?", "body": "<ol>\n<li><p>You are not supposed to <code>malloc</code> for <code>current</code>. You are replacing the pointer obtained from it immediately with <code>head</code> and loose the allocation. The later <code>free</code> will free the last element of the list, but will not set the pointer of the previous element to <code>NULL</code>, causing undefined behavior if the list is used later.</p></li>\n<li><p>You are allocating memory for a node here:</p>\n\n<pre><code>ListEl* element = malloc(sizeof(ListEl));\n</code></pre>\n\n<p>but you never set any of its values before calling <code>print_listEl(element);</code>. Therefore the pointer <code>element-&gt;next</code> will be indeterminate and comparison against <code>NULL</code> will not be useful. You dereference this pointer later in <code>print_listEl</code> causing undefined behavior. Always initialize after <code>malloc</code>:</p>\n\n<pre><code>ListEl* element = malloc(sizeof(ListEl));\nelement-&gt;next = NULL;\nmemset(element-&gt;name, '\\0', sizeof(element-&gt;name));\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 69, "user_id": 9095574, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VqI4h.jpg?s=128&g=1", "display_name": "Mihu", "link": "https://stackoverflow.com/users/9095574/mihu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 53998542, "answer_count": 2, "score": 0, "last_activity_date": 1546373220, "creation_date": 1546369733, "last_edit_date": 1546372417, "question_id": 53998192, "link": "https://stackoverflow.com/questions/53998192/why-wont-this-c-program-let-me-access-memory", "title": "Why won&#39;t this C program let me access memory?", "body": "<p>I'm trying to do a linked list database and for some reason the program won't let me access the memory, or at least that's what the debugger says. I'm using the gdb debugger, codeblocks. </p>\n\n<p>I've already compiled the program on another machine, with the same operating system (windows). It worked flawlessly, BUT the debugger showed the same error. </p>\n\n<pre><code>void print_ListEl(ListEl* head)\n{\n ListEl* current = malloc(sizeof(ListEl));\n current = head;\n if (head==NULL) exit(EXIT_FAILURE);\n if (current-&gt;next==NULL)\n {\n     puts(\"No elements\");\n     return;\n }\n else\n {\n     int i=1;\n     while(current-&gt;next!=NULL)\n     {\n         printf(\"%d.%s\\n\", i, current-&gt;name);\n         current=current-&gt;next;\n         ++i;\n     }\n }\n free(current);\n}\n</code></pre>\n\n<p>It's used like that:</p>\n\n<pre><code>ListEl* element = malloc(sizeof(ListEl));\nprint_listEl(element);\n</code></pre>\n\n<p>This is the function that seems to cause the problem according to the debugger. When I watch the \"current->next\" variable, the debugger says \"Cannot access memory at address\". If I change current->next to current, the debugger still shows the same function as causing the problem. The ListEl structure is just a regular single linked list with a char type data.</p>\n\n<pre><code> struct ListEl\n {\n     char name[MAX_CHAR];\n     struct ListEl* next;\n };\n</code></pre>\n\n<p>I also use </p>\n\n<pre><code>typedef struct ListEl ListEl\n</code></pre>\n\n<p>Headers are safe with <em>ifndef</em> and <em>endif</em> and are all included, I've checked.</p>\n\n<p>This function, instead of putting \"No elements\" when there's no elements in the list, spews out some random character and crashes the program.</p>\n"}, {"tags": ["c", "gtk", "gtk3", "glade"], "comments": [{"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1546375278, "post_id": 53997981, "comment_id": 94834568, "body": "This is a good time to start learning how to use a debugger. Run your program in GDB and you will immediately see the problem."}], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 5699703, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/Lvj7y.jpg?s=128&g=1", "display_name": "M. P.", "link": "https://stackoverflow.com/users/5699703/m-p"}, "edited": false, "score": 0, "creation_date": 1546375958, "post_id": 53998801, "comment_id": 94834701, "body": "Thank you very much for showing me not only the problem but how you found the problem.  You&#39;ve been a huge help."}], "tags": [], "owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "is_accepted": true, "score": 0, "last_activity_date": 1546375449, "creation_date": 1546375449, "answer_id": 53998801, "question_id": 53997981, "link": "https://stackoverflow.com/questions/53997981/gtkstack-segmentation-fault/53998801#53998801", "title": "GtkStack segmentation fault", "body": "<p>The debugger tells you where the segmentation fault happens:</p>\n\n<pre><code>gtk_stack_set_visible_child (GTK_STACK(mrp-&gt;myStack), mrp-&gt;page1);\n</code></pre>\n\n<p>Only used variable is <code>mrp</code>. This variable is <code>NULL</code>.</p>\n\n<p>And it is <code>NULL</code> because you provide only a <code>NULL</code> pointer:</p>\n\n<pre><code>g_signal_connect(mrp.buttonPage0, \"clicked\", G_CALLBACK(clickedButtonPage0), NULL);\ng_signal_connect(mrp.buttonPage1, \"clicked\", G_CALLBACK(clickedButtonPage1), NULL);\n</code></pre>\n\n<p>Replace <code>NULL</code> with <code>&amp;mrp</code> and it will work.</p>\n"}], "owner": {"reputation": 91, "user_id": 5699703, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/Lvj7y.jpg?s=128&g=1", "display_name": "M. P.", "link": "https://stackoverflow.com/users/5699703/m-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 53998801, "answer_count": 1, "score": 0, "last_activity_date": 1546375449, "creation_date": 1546367947, "last_edit_date": 1546373187, "question_id": 53997981, "link": "https://stackoverflow.com/questions/53997981/gtkstack-segmentation-fault", "title": "GtkStack segmentation fault", "body": "<p>I've made a simple program to learn how to work with the GtkStack Widget.  The program is supposed to switch stack pages when the button is clicked.  However when the button is clicked the program terminates with the error <code>segmentation fault</code> I am very new to both C and GTK and can't seem to understand why this isn't working.  </p>\n\n<p>OS: Debian 9.6 with Gnome 3.22.2</p>\n\n<p>C Code:</p>\n\n<pre><code>#include &lt;gtk/gtk.h&gt;\n\ntypedef struct _MyStruct\n{\n    GtkWidget *mainWindow;\n    GtkWidget *myStack;\n    GtkWidget *page0;\n    GtkWidget *page1;\n    GtkWidget *buttonPage0;\n    GtkWidget *buttonPage1;\n}   MyStruct;\n\nstatic void clickedButtonPage0(GtkWidget *widget, MyStruct *mrp)\n{\n    gtk_stack_set_visible_child (GTK_STACK(mrp-&gt;myStack), mrp-&gt;page1);\n}\n\nstatic void clickedButtonPage1(GtkWidget *widget, MyStruct *mrp)\n{\n    gtk_stack_set_visible_child (GTK_STACK(mrp-&gt;myStack), mrp-&gt;page0);\n}\n\nint main(int argc, char *argv[])\n{\n    GtkBuilder *builder;\n    MyStruct mrp;\n\n    gtk_init(&amp;argc, &amp;argv);\n\n    builder = gtk_builder_new();\n    gtk_builder_add_from_file (builder, \"stackTest.glade\", NULL);\n\n    mrp.mainWindow = GTK_WIDGET(gtk_builder_get_object(builder, \"myWindow\"));\n    g_signal_connect(mrp.mainWindow, \"destroy\", G_CALLBACK(gtk_main_quit), NULL);\n\n    mrp.myStack = GTK_WIDGET(gtk_builder_get_object(builder, \"myStack\"));\n    mrp.page0 = GTK_WIDGET(gtk_builder_get_object(builder, \"page0\"));\n    mrp.page1 = GTK_WIDGET(gtk_builder_get_object(builder, \"page1\"));\n\n    mrp.buttonPage0 = GTK_WIDGET(gtk_builder_get_object(builder, \"buttonPage0\"));\n    mrp.buttonPage1 = GTK_WIDGET(gtk_builder_get_object(builder, \"buttonPage1\"));\n\n    g_signal_connect(mrp.buttonPage0, \"clicked\", G_CALLBACK(clickedButtonPage0), NULL);\n    g_signal_connect(mrp.buttonPage1, \"clicked\", G_CALLBACK(clickedButtonPage1), NULL);\n\n    g_object_unref(builder);\n\n    gtk_window_set_default_size(GTK_WINDOW(mrp.mainWindow), 600, 400);\n    gtk_window_set_title(GTK_WINDOW(mrp.mainWindow), \"GtkStack Test\");\n\n    gtk_widget_show_all(mrp.mainWindow);\n\n    gtk_main();\n\n    return 0;\n}\n</code></pre>\n\n<p>Glade XLM:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;!-- Generated with glade 3.20.0 --&gt;\n&lt;interface&gt;\n  &lt;requires lib=\"gtk+\" version=\"3.20\"/&gt;\n  &lt;object class=\"GtkWindow\" id=\"myWindow\"&gt;\n    &lt;property name=\"can_focus\"&gt;False&lt;/property&gt;\n    &lt;child&gt;\n      &lt;object class=\"GtkStack\" id=\"myStack\"&gt;\n        &lt;property name=\"visible\"&gt;True&lt;/property&gt;\n        &lt;property name=\"can_focus\"&gt;False&lt;/property&gt;\n        &lt;child&gt;\n          &lt;object class=\"GtkBox\" id=\"page0\"&gt;\n            &lt;property name=\"visible\"&gt;True&lt;/property&gt;\n            &lt;property name=\"can_focus\"&gt;False&lt;/property&gt;\n            &lt;property name=\"orientation\"&gt;vertical&lt;/property&gt;\n            &lt;child&gt;\n              &lt;object class=\"GtkLabel\" id=\"lblPage0\"&gt;\n                &lt;property name=\"visible\"&gt;True&lt;/property&gt;\n                &lt;property name=\"can_focus\"&gt;False&lt;/property&gt;\n                &lt;property name=\"label\" translatable=\"yes\"&gt;I am page 0&lt;/property&gt;\n              &lt;/object&gt;\n              &lt;packing&gt;\n                &lt;property name=\"expand\"&gt;True&lt;/property&gt;\n                &lt;property name=\"fill\"&gt;True&lt;/property&gt;\n                &lt;property name=\"position\"&gt;0&lt;/property&gt;\n              &lt;/packing&gt;\n            &lt;/child&gt;\n            &lt;child&gt;\n              &lt;object class=\"GtkButton\" id=\"buttonPage0\"&gt;\n                &lt;property name=\"label\" translatable=\"yes\"&gt;button&lt;/property&gt;\n                &lt;property name=\"visible\"&gt;True&lt;/property&gt;\n                &lt;property name=\"can_focus\"&gt;True&lt;/property&gt;\n                &lt;property name=\"receives_default\"&gt;True&lt;/property&gt;\n              &lt;/object&gt;\n              &lt;packing&gt;\n                &lt;property name=\"expand\"&gt;False&lt;/property&gt;\n                &lt;property name=\"fill\"&gt;True&lt;/property&gt;\n                &lt;property name=\"position\"&gt;1&lt;/property&gt;\n              &lt;/packing&gt;\n            &lt;/child&gt;\n          &lt;/object&gt;\n          &lt;packing&gt;\n            &lt;property name=\"name\"&gt;page0&lt;/property&gt;\n            &lt;property name=\"title\" translatable=\"yes\"&gt;page0&lt;/property&gt;\n          &lt;/packing&gt;\n        &lt;/child&gt;\n        &lt;child&gt;\n          &lt;object class=\"GtkBox\" id=\"page1\"&gt;\n            &lt;property name=\"visible\"&gt;True&lt;/property&gt;\n            &lt;property name=\"can_focus\"&gt;False&lt;/property&gt;\n            &lt;property name=\"orientation\"&gt;vertical&lt;/property&gt;\n            &lt;child&gt;\n              &lt;object class=\"GtkLabel\" id=\"lblPage1\"&gt;\n                &lt;property name=\"visible\"&gt;True&lt;/property&gt;\n                &lt;property name=\"can_focus\"&gt;False&lt;/property&gt;\n                &lt;property name=\"label\" translatable=\"yes\"&gt;I am Page 1&lt;/property&gt;\n              &lt;/object&gt;\n              &lt;packing&gt;\n                &lt;property name=\"expand\"&gt;True&lt;/property&gt;\n                &lt;property name=\"fill\"&gt;True&lt;/property&gt;\n                &lt;property name=\"position\"&gt;0&lt;/property&gt;\n              &lt;/packing&gt;\n            &lt;/child&gt;\n            &lt;child&gt;\n              &lt;object class=\"GtkButton\" id=\"buttonPage1\"&gt;\n                &lt;property name=\"label\" translatable=\"yes\"&gt;Home&lt;/property&gt;\n                &lt;property name=\"visible\"&gt;True&lt;/property&gt;\n                &lt;property name=\"can_focus\"&gt;True&lt;/property&gt;\n                &lt;property name=\"receives_default\"&gt;True&lt;/property&gt;\n              &lt;/object&gt;\n              &lt;packing&gt;\n                &lt;property name=\"expand\"&gt;False&lt;/property&gt;\n                &lt;property name=\"fill\"&gt;True&lt;/property&gt;\n                &lt;property name=\"position\"&gt;1&lt;/property&gt;\n              &lt;/packing&gt;\n            &lt;/child&gt;\n          &lt;/object&gt;\n          &lt;packing&gt;\n            &lt;property name=\"name\"&gt;page1&lt;/property&gt;\n            &lt;property name=\"title\" translatable=\"yes\"&gt;page1&lt;/property&gt;\n            &lt;property name=\"position\"&gt;1&lt;/property&gt;\n          &lt;/packing&gt;\n        &lt;/child&gt;\n        &lt;child&gt;\n          &lt;placeholder/&gt;\n        &lt;/child&gt;\n      &lt;/object&gt;\n    &lt;/child&gt;\n  &lt;/object&gt;\n&lt;/interface&gt;\n</code></pre>\n\n<p>Compiled using:</p>\n\n<pre><code>gcc stackTest.c -o stackTest `pkg-config --cflags --libs gtk+-3.0`\n</code></pre>\n"}, {"tags": ["c", "arrays", "function", "pointers"], "comments": [{"owner": {"reputation": 9846, "user_id": 1745544, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/92a0f69d86d214e0cffceb76c6e3f09f?s=128&d=identicon&r=PG", "display_name": "OldProgrammer", "link": "https://stackoverflow.com/users/1745544/oldprogrammer"}, "edited": false, "score": 0, "creation_date": 1546367163, "post_id": 53997844, "comment_id": 94832920, "body": "Huh?  Where is the definition of &quot;table&quot;?"}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 3, "creation_date": 1546367235, "post_id": 53997844, "comment_id": 94832932, "body": "Are you sure you have to store them all in a single array and are not allowed to have different arrays? (Though using an array of <code>struct</code> would still be the best option)"}, {"owner": {"reputation": 305833, "user_id": 68587, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7d9fd158e03cbde94f7e0b33b78222af?s=128&d=identicon&r=PG", "display_name": "John Kugelman", "link": "https://stackoverflow.com/users/68587/john-kugelman"}, "edited": false, "score": 2, "creation_date": 1546367296, "post_id": 53997844, "comment_id": 94832945, "body": "Look up &quot;<a href=\"https://softwareengineering.stackexchange.com/questions/350006/when-is-it-okay-to-use-parallel-arrays\">parallel arrays</a>&quot;. I&#39;m still looking for a good question to link to, but that&#39;s the technique you want to use. Note that parallel arrays are fine for intro programming classes but in the real world <a href=\"https://codeblog.jonskeet.uk/2014/06/03/anti-pattern-parallel-collections/\" rel=\"nofollow noreferrer\">they&#39;re an anti-pattern</a>."}, {"owner": {"reputation": 15, "user_id": 10836048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6424431563db11458abf7670de5129b1?s=128&d=identicon&r=PG&f=1", "display_name": "Michael P.", "link": "https://stackoverflow.com/users/10836048/michael-p"}, "reply_to_user": {"reputation": 9846, "user_id": 1745544, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/92a0f69d86d214e0cffceb76c6e3f09f?s=128&d=identicon&r=PG", "display_name": "OldProgrammer", "link": "https://stackoverflow.com/users/1745544/oldprogrammer"}, "edited": false, "score": 0, "creation_date": 1546367372, "post_id": 53997844, "comment_id": 94832962, "body": "@OldProgrammer I mean &#39;&#39;array&#39;&#39; I am sorry."}, {"owner": {"reputation": 15, "user_id": 10836048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6424431563db11458abf7670de5129b1?s=128&d=identicon&r=PG&f=1", "display_name": "Michael P.", "link": "https://stackoverflow.com/users/10836048/michael-p"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1546367454, "post_id": 53997844, "comment_id": 94832988, "body": "@UnholySheep Yes I am 100% sure about that"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1546367520, "post_id": 53997844, "comment_id": 94833004, "body": "Aside: <code>&quot;%.2f&quot;</code> should be <code>&quot;%f&quot;</code> for <code>scanf</code>."}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1546367591, "post_id": 53997844, "comment_id": 94833027, "body": "How is <code>table</code> defined (which data type)?"}, {"owner": {"reputation": 15, "user_id": 10836048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6424431563db11458abf7670de5129b1?s=128&d=identicon&r=PG&f=1", "display_name": "Michael P.", "link": "https://stackoverflow.com/users/10836048/michael-p"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1546367829, "post_id": 53997844, "comment_id": 94833074, "body": "@UnholySheep as char *table[100][4]"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1546371242, "post_id": 53997844, "comment_id": 94833781, "body": "&quot;only ... I can use for this project ... is pointers and tables, NOT structures&quot; s lk prvdng n nswr wtht vwls."}], "answers": [{"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1546368876, "post_id": 53998038, "comment_id": 94833298, "body": "Hmmm.. Is the original a triple-pointer? <code>table[n][j] = malloc(50 * sizeof(char));</code>? You are allocating for <code>50-char</code> (or <code>int</code> or <code>float</code>) to every element? Not saying it is wrong, hard to tell without a declaration for <code>table</code>, just looks wonky."}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1546368984, "post_id": 53998038, "comment_id": 94833324, "body": "@DavidC.Rankin OP commented that <code>table</code> is defined as <code>char* table[100][4]</code>. And that allocation is only for the &quot;string&quot; part (it looks a bit confusing due to the <code>for</code> loop, I&#39;ll rewrite it in a minute)"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1546369023, "post_id": 53998038, "comment_id": 94833330, "body": "That would explain. We have a 100x4 array of pointers to char. Could work. An array of 100 struct would probably be a more sane approach for the OP <code>:)</code>"}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1546369404, "post_id": 53998038, "comment_id": 94833409, "body": "@DavidC.Rankin fully agreed, but according to OP they are neither allowed to use <code>struct</code> or parallel arrays. Personally I am not entirely sure what the purpose of such an exercise is (which is why I added the <b>Disclaimer</b> at the start)"}, {"owner": {"reputation": 3222, "user_id": 5533928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/517d5a0e08d76cd446ac7e6b156093a4?s=128&d=identicon&r=PG&f=1", "display_name": "Susmit Agrawal", "link": "https://stackoverflow.com/users/5533928/susmit-agrawal"}, "edited": false, "score": 0, "creation_date": 1546369864, "post_id": 53998038, "comment_id": 94833508, "body": "In this case, wouldn&#39;t <code>int</code> be overwritten by <code>float</code>, since it occupies 4 bytes alone? Basically, if we have 4 bytes(as stated by OP),  char-&gt;byte 0, int-&gt;byte 1,2,3,4(already past allocated memory address), float-&gt;bytes 5,6,7,8. This could result in segmentation fault."}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "reply_to_user": {"reputation": 3222, "user_id": 5533928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/517d5a0e08d76cd446ac7e6b156093a4?s=128&d=identicon&r=PG&f=1", "display_name": "Susmit Agrawal", "link": "https://stackoverflow.com/users/5533928/susmit-agrawal"}, "edited": false, "score": 0, "creation_date": 1546370049, "post_id": 53998038, "comment_id": 94833549, "body": "@SusmitAgrawal no, I&#39;m not assigning to the same pointer. And the type of pointer i assign the result of <code>malloc</code> to has no influence on where the memory is allocated"}, {"owner": {"reputation": 15, "user_id": 10836048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6424431563db11458abf7670de5129b1?s=128&d=identicon&r=PG&f=1", "display_name": "Michael P.", "link": "https://stackoverflow.com/users/10836048/michael-p"}, "edited": false, "score": 0, "creation_date": 1546370358, "post_id": 53998038, "comment_id": 94833615, "body": "@UnholySheep We have to create a menu which the user can add,modify,view all the meals that he has already eaten,search a specific one, sort all the meals and of course exit the program. These things have to be done in functions.Especially for Add function we have to input the food that we ate,the calories of it,and the hour that we ate it (on XX.YY type)that&#39;s why I was thinking to use float.All these data must be together in a single table of the sizes that I told you before. I also have to tell you that they didn&#39;t teach us anything about malloc so I cannot use it :/"}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "reply_to_user": {"reputation": 15, "user_id": 10836048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6424431563db11458abf7670de5129b1?s=128&d=identicon&r=PG&f=1", "display_name": "Michael P.", "link": "https://stackoverflow.com/users/10836048/michael-p"}, "edited": false, "score": 0, "creation_date": 1546371008, "post_id": 53998038, "comment_id": 94833736, "body": "@MichaelP. I don&#39;t understand how my proposed solution causes a problem for your menu, it does exactly what you requested in the question. However if you cannot use <code>struct</code>, multiple arrays <i>or</i> <code>malloc</code> then your assignment is impossible to do. In fact the amount of things you can do with <code>char*</code> without <code>malloc</code> is very limited"}], "tags": [], "owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "is_accepted": true, "score": 0, "last_activity_date": 1546369179, "last_edit_date": 1546369179, "creation_date": 1546368482, "answer_id": 53998038, "question_id": 53997844, "link": "https://stackoverflow.com/questions/53997844/is-there-any-tip-to-conclude-different-types-in-the-same-table/53998038#53998038", "title": "Is there any tip to conclude different types in the same table?", "body": "<p><strong>Disclaimer</strong> This is not a general purpose solution, in nearly all cases there are better ways of doing such an exercise. However this is what your assignment restrictions call for</p>\n\n<p>In C a pointer is allowed to alias any other type of pointer (though there are special restrictions when it comes to dereferencing such pointers), so you have to <em>type pun</em> your other types into your array (which is generally risky as you give up type safety). Modifying your code sample this would look like this (I have removed the loop and branching as I found them to hinder readability):</p>\n\n<pre><code>printf (\"Add your food:\\n\");\n// 50 is just to showcase, replace with actual value in your code\ntable[n][0] = malloc(50 * sizeof(char));\nscanf(\"%s\",table[n][0]);\n\nprintf (\"Add calories:\\n\");\ntable[n][1] = malloc(sizeof(int));\nscanf(\"%d\",(int*)table[n][1]);\n\nprintf (\"Add the time you ate:\\n\");\ntable[n][2] = malloc(sizeof(float));\nscanf(\"%f\",(float*)table[n][2]);\n\nprintf (\"Kati\\n\");\n</code></pre>\n\n<p>Also make note of the changes I made to the <code>scanf</code> lines to make sure that the pointers passed in are of the actual correct types. Since you <code>malloc</code> all elements of the array you also need to remember to <code>free</code> them all at the end of your program to avoid memory leaks.</p>\n\n<p><strong>EDIT</strong> As commented by OP, <code>table</code> is defined as <code>char* table[100][4]</code></p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1546390004, "last_edit_date": 1546390004, "creation_date": 1546372985, "answer_id": 53998554, "question_id": 53997844, "link": "https://stackoverflow.com/questions/53997844/is-there-any-tip-to-conclude-different-types-in-the-same-table/53998554#53998554", "title": "Is there any tip to conclude different types in the same table?", "body": "<blockquote>\n  <p>add different types in a table?  ... pointers and tables, NOT structures ..<br>\n  ... as char *table[100][4] ...</p>\n</blockquote>\n\n<p>Save all data as <em>strings</em>.  Convert the type/value into a string with enough information to reconstruct the type/value later.</p>\n\n<pre><code>#include &lt;float.h&gt;\n#include &lt;stdlib.h&gt;\nvoid table_add(char *table[100][4], size_t index, const char *food, int calories, float hour) {\n  table[index][0] = strdup(food);\n  char buf[42]; // large enough for a 128 bit `int`\n  sprintf(buf, \"%d\", index);\n  table[index][1] = strdup(buf);\n  sprintf(buf, \"%.*e\", FLT_DECIMAL_DIG - 1, index);\n  table[index][2] = strdup(buf);\n  table[index][3] = NULL;  // Unclear what OP needs a 4th element for\n}\n</code></pre>\n\n<p>Usage</p>\n\n<pre><code>#define FOOD_SIZE 50\n\nchar *table[100][4] = { 0 };\n\nfor (index = 0; index &lt; 100; index++) {\n  char food[FOOD_SIZE];\n  printf (\"Add your food:\\n\");\n  scanf(\"%49s\",food);\n\n  int calories\n  printf (\"Add calories:\\n\");\n  scanf(\"%d\",&amp;calories);\n\n  float hour;\n  printf (\"Add the time you ate:\\n\");  // Unclear why OP is using float for `time`\n  scanf(\"%f\", &amp;hour);\n\n  printf (\"Kati\\n\");\n\n  table_add(table, index, food, calories, hour);\n}\n\n// now use the data somehow\nindex = ...\nfood = table[index][0];\ncalories = atoi(table[index][1]);\nhour = atof(table[index][2]);\nprintf(\"Food:%s Calories:%d Time:%.2f\\n\", food, calories, hour);\n\n// When done, free all allocations\nfor (index = 0; index &lt; 100; index++) {\n  for (j = 0; j &lt; 4; j++) {\n    free(table[index][j]);\n  }\n}\n</code></pre>\n\n<p>For details on <code>FLT_DECIMAL_DIG - 1</code> in <code>sprintf(buf, \"%.*e\", FLT_DECIMAL_DIG - 1, index);</code> see <a href=\"https://stackoverflow.com/q/16839658/2410359\">Printf width specifier to maintain precision of floating-point value</a>.</p>\n"}], "owner": {"reputation": 15, "user_id": 10836048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6424431563db11458abf7670de5129b1?s=128&d=identicon&r=PG&f=1", "display_name": "Michael P.", "link": "https://stackoverflow.com/users/10836048/michael-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 53998038, "answer_count": 2, "score": 1, "last_activity_date": 1546390004, "creation_date": 1546366910, "last_edit_date": 1546367258, "question_id": 53997844, "link": "https://stackoverflow.com/questions/53997844/is-there-any-tip-to-conclude-different-types-in-the-same-table", "title": "Is there any tip to conclude different types in the same table?", "body": "<p>How can I add different types in a table? Firstly I have to create a function in order to add the food that I ate (<code>char</code>), the calories (<code>int</code>) and the hour that I ate it (<code>float</code>) in a table with maximum size <code>[100][4]</code>.</p>\n\n<p>The only knowledge that I have and I can use for this project for my university is pointers and tables, NOT structures (which is the solution I was also thinking)</p>\n\n<p>I've tried many things and the only thing that I did is to fill only the first column with the name of the food.</p>\n\n<pre><code>for (j=0;j&lt;4;j++){\n    if (j==0){\n        printf (\"Add your food:\\n\");\n                    //char\n        scanf(\"%s\",&amp;table[n][j]);\n    }else if (j==1){\n        printf (\"Add calories:\\n\");\n                    //int\n        scanf(\"%d\",&amp;table[n][j]);\n\n    }else if (j==2){\n        printf (\"Add the time you ate:\\n\");\n                    //float\n        scanf(\"%.2f\",&amp;table[n][j]);\n    }else if (j==3){\n        printf (\"Kati\\n\");\n    }\n}\n</code></pre>\n\n<p>I expected my code to show all the data I filled but of course that doesn't work. So is there any solution to add different types in a table?</p>\n"}, {"tags": ["c", "chess"], "comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1546367755, "post_id": 53997720, "comment_id": 94833059, "body": "The posted code contains several non-portable statements.  IE.  <code>system(&quot;CLS&quot;);</code>, <code>getch()</code>   The result is the code will not run (or even compile) on OSs other than windows"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1546367837, "post_id": 53997720, "comment_id": 94833076, "body": "OT: regarding statements like: <code>scanf(&quot;%d %d&quot;, &amp;linOri, &amp;colOri );</code>  Always check the returned value (not the parameter values) to assure the operation was successful"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1546367980, "post_id": 53997720, "comment_id": 94833122, "body": "regarding: <code>case 1: break;</code>  the possibility of the value (at this point in the code) is 0 because of the proceeding: <code>if (resultado != 1)</code>   Also, should always have a <code>default:</code> case, to handle unexpected values"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1546368129, "post_id": 53997720, "comment_id": 94833150, "body": "OT: for ease of readability and understanding: follow the axiom: <i>only one statement per line and (at most) one variable declaration per statement.</i>"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 9257862, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-aHdX35al4MU/AAAAAAAAAAI/AAAAAAAAAao/bCQQTsNMi3I/photo.jpg?sz=128", "display_name": "Diana Moura", "link": "https://stackoverflow.com/users/9257862/diana-moura"}, "edited": false, "score": 0, "creation_date": 1546371969, "post_id": 53997882, "comment_id": 94833917, "body": "you are the officially nominated code-hero of the day! It worked thank you so much! I didn&#39;t know the order of the parameters could be so important"}, {"owner": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "reply_to_user": {"reputation": 31, "user_id": 9257862, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-aHdX35al4MU/AAAAAAAAAAI/AAAAAAAAAao/bCQQTsNMi3I/photo.jpg?sz=128", "display_name": "Diana Moura", "link": "https://stackoverflow.com/users/9257862/diana-moura"}, "edited": false, "score": 1, "creation_date": 1546398813, "post_id": 53997882, "comment_id": 94838534, "body": "@DianaMoura - I am happy to help. But I need to be honest - coming to stackoverflow to enlist others to debug your program is not going to enable you to grow your skills and get more proficient. Parameter ordering is a fundamental concept of almost all programming languages. And mismatched parameter ordering is a common mistake that even experienced engineers make.  But you should have been able to diagnose this bug yourself.  Simply by adding additional &quot;printf&quot; statements into your code to display the values of variables and program flow would have solved this problem for you."}, {"owner": {"reputation": 31, "user_id": 9257862, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-aHdX35al4MU/AAAAAAAAAAI/AAAAAAAAAao/bCQQTsNMi3I/photo.jpg?sz=128", "display_name": "Diana Moura", "link": "https://stackoverflow.com/users/9257862/diana-moura"}, "edited": false, "score": 0, "creation_date": 1546547311, "post_id": 53997882, "comment_id": 94894988, "body": "Thanks for the tips @selbie I will keep them in mind. Also it&#39;s my first time learning a programming language (1st subject, 1st year) so I am not used to debugging yet. Will definitely learn it. Did send it to my teacher as well though."}], "tags": [], "owner": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "is_accepted": false, "score": 2, "last_activity_date": 1546367166, "creation_date": 1546367166, "answer_id": 53997882, "question_id": 53997720, "link": "https://stackoverflow.com/questions/53997720/chess-game-in-c-some-pieces-are-not-moving/53997882#53997882", "title": "Chess Game in C - Some Pieces are not moving", "body": "<p>Your <code>moverPeca</code> function expects parameters in the following order:</p>\n\n<pre><code>int moverPeca(int linOri, int linDes, int colOri, int colDes)\n</code></pre>\n\n<p>That is line-origin, line-destination, column-origin, and column-destination, in that order.</p>\n\n<p>But you are invoking it with:</p>\n\n<pre><code>int resultado = moverPeca(linOri, colOri, linDes, colDes);\n</code></pre>\n\n<p>The result is that the <code>colOri</code> and <code>linDes</code> are getting swapped in the function invocation.  So instead of attempting to move the pawn from [6,4] to [5,4], the code attempts to move the pawn from [6,4] to [4,4].</p>\n\n<p>Simple fix is to declare moverPeca like this:</p>\n\n<pre><code>int moverPeca(int linOri, int colOri, int linDes, int colDes)\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 9257862, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-aHdX35al4MU/AAAAAAAAAAI/AAAAAAAAAao/bCQQTsNMi3I/photo.jpg?sz=128", "display_name": "Diana Moura", "link": "https://stackoverflow.com/users/9257862/diana-moura"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1546367166, "creation_date": 1546365797, "question_id": 53997720, "link": "https://stackoverflow.com/questions/53997720/chess-game-in-c-some-pieces-are-not-moving", "title": "Chess Game in C - Some Pieces are not moving", "body": "<p>I am making a chess game in C. It needs to be strickly c. But my chess pieces are not responding to movement as they should. The movement of the pieces is defined by coordinates.</p>\n\n<p>I think the problem should be in this function:</p>\n\n<pre><code>// fun\u00e7\u00e3o mover pe\u00e7a com problema encontrar\nint moverPeca(int linOri, int linDes, int colOri, int colDes) {\n    int mover = 0;\n    char peca;\n    //deslocamento vertical e deslocamento horizontal (n\u00ba linhas que avan\u00e7a)\n    int dV = abs(linDes - linOri);\n    int dH = abs(colDes - colOri);\n\n    if ((linOri &gt;= 0 &amp;&amp; linOri &lt; 8 &amp;&amp; colOri &gt;= 0 &amp;&amp; colOri &lt; 8) &amp;&amp;\n        (linDes &gt;= 0 &amp;&amp; linDes &lt; 8 &amp;&amp; colDes &gt;= 0 &amp;&amp; colDes &lt; 8)) {\n        peca = xadrez[linOri][colOri];\n\n        // defini\u00e7\u00e3o do movimento apropriado da pe\u00e7a Torre - mexe na vertical e na horizontal quantas casas quiseres\n        if ((peca == 'T' || peca == 't') &amp;&amp; (dV == 0 || dH == 0)) {\n\n            mover = 1;\n        }\n\n        // defini\u00e7\u00e3o do movimento apropriado da pe\u00e7a Bispo - s\u00f3 mexe na diagonal quantas casas quiseres\n        if ((peca == 'B' || peca == 'b') &amp;&amp; (dV == dH)) {\n\n            mover = 1;\n        }\n\n        // defini\u00e7\u00e3o do movimento apropriado da pe\u00e7a Cavalo mexe em L 2/3 ou 3/2\n        if ( (peca == 'C' || peca == 'c') &amp;&amp; \n            ( (dV == 1 &amp;&amp; dH == 2) || (dV == 2 &amp;&amp; dH == 1) ) ) {\n\n            mover = 1;\n        }\n\n        // defini\u00e7\u00e3o do movimento apropriado da pe\u00e7a Q Rainha anda de todas as formas H e V\n        if ( (peca == 'Q' || peca == 'q') &amp;&amp; \n            ( (dV == dH) || (dV == 0) || (dH == 0) ) ) {\n\n            mover = 1;\n        }\n\n        // defini\u00e7\u00e3o do movimento apropriado da pe\u00e7a K REi s\u00f3 anda 1 casa na V ou H ou Diagonal\n        if ( (peca == 'K' || peca == 'k') &amp;&amp; \n            ( (dV &gt;= 0 &amp;&amp; dV &lt;= 1) &amp;&amp; (dH &gt;= 0 &amp;&amp; dH &lt;= 1 ) ) ) {\n\n            mover = 1;\n        }\n\n        // defini\u00e7\u00e3o do movimento apropriado da pe\u00e7a p pe\u00e3o pode andar 2 casas a 1 vez e depois anda sempre s\u00f3 uma e come na diagonal\n        if ((peca == 'p') &amp;&amp; ( (linOri - linDes) == 1) &amp;&amp; (dH == 0) ) {\n\n            mover = 1;\n        }\n\n        // defini\u00e7\u00e3o do movimento apropriado da pe\u00e7a p pe\u00e3o pode andar 2 casas a 1 vez e depois anda sempre s\u00f3 uma e come na diagonal\n\n        if ((peca == 'P') &amp;&amp; ( (linDes - linOri) == 1) &amp;&amp; (dH == 0) ) {\n\n            mover = 1;\n        }\n\n\n        if (mover) {\n            xadrez[linDes][colDes] = xadrez[linOri][colOri];\n            xadrez[linOri][colOri] = ' ';\n        }\n        return 1;\n    }\n    else {\n        return 0;\n    }\n}\n</code></pre>\n\n<p>This is the code I have so far:</p>\n\n<pre><code>#define _CRT_SECURE_NO_WARNINGS\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdbool.h&gt;\n\n// Matriz de 8 por 8 para fazer os quadrados do jogo\nchar xadrez[8][8] = {\n    { 'T', 'C', 'B', 'Q', 'K', 'B', 'C', 'T'}, //Pretas em mai\u00fasculas\n    { 'P', 'P', 'P', 'P', 'P', 'P', 'P', 'P'},\n    { ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},\n    { ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},\n    { ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},\n    { ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},\n    { 'p', 'p', 'p', 'p', 'p', 'p', 'p', 'p'},//Brancas em min\u00fasculas\n    { 't', 'c', 'b', 'q', 'k', 'b', 'c', 't'}\n\n};\n\n// Fun\u00e7\u00e3o para pintar a tela e o texto dentro dos quadrados\nvoid pintarTelaTexto() {\n    system(\"CLS\");// serve para limpar a tela\n    //linha - coluna e r para controle da casa central onde vamos por a letra\n    int lin, col, r;\n\n    for (lin=0; lin &lt; 8; lin++) {\n\n        for (r=0; r &lt; 3; r++) {\n            for (col=0; col &lt; 8; col++) {\n                //char letra com problema nao aparece na casa central apa\n\n                char peca = xadrez[lin][col];\n                char letra = ((lin + col) % 2 == 0) ? '\\xB2' : ' ';\n                letra = (r == 1 &amp;&amp; peca != ' ') ? peca : letra; // operador tern\u00e1rio\n                    if ((lin + col ) % 2 == 0) {\n                        printf(\"\\xB2\\xB2%c\\xB2\\xB2\", letra);\n                    }\n                    else {\n                        // %c para inser\u00e7\u00e3o da letra\n                        printf(\"  %c  \", letra);\n                    }\n            }\n            printf(\"\\n\");\n        }\n    }\n}\n\n// fun\u00e7\u00e3o mover pe\u00e7a com problema encontrar\nint moverPeca(int linOri, int linDes, int colOri, int colDes) {\n    int mover = 0;\n    char peca;\n    //deslocamento vertical e deslocamento horizontal (n\u00ba linhas que avan\u00e7a)\n    int dV = abs(linDes - linOri);\n    int dH = abs(colDes - colOri);\n\n    if ((linOri &gt;= 0 &amp;&amp; linOri &lt; 8 &amp;&amp; colOri &gt;= 0 &amp;&amp; colOri &lt; 8) &amp;&amp;\n        (linDes &gt;= 0 &amp;&amp; linDes &lt; 8 &amp;&amp; colDes &gt;= 0 &amp;&amp; colDes &lt; 8)) {\n        peca = xadrez[linOri][colOri];\n\n        // defini\u00e7\u00e3o do movimento apropriado da pe\u00e7a Torre - mexe na vertical e na horizontal quantas casas quiseres\n        if ((peca == 'T' || peca == 't') &amp;&amp; (dV == 0 || dH == 0)) {\n\n            mover = 1;\n        }\n\n        // defini\u00e7\u00e3o do movimento apropriado da pe\u00e7a Bispo - s\u00f3 mexe na diagonal quantas casas quiseres\n        if ((peca == 'B' || peca == 'b') &amp;&amp; (dV == dH)) {\n\n            mover = 1;\n        }\n\n        // defini\u00e7\u00e3o do movimento apropriado da pe\u00e7a Cavalo mexe em L 2/3 ou 3/2\n        if ( (peca == 'C' || peca == 'c') &amp;&amp; \n            ( (dV == 1 &amp;&amp; dH == 2) || (dV == 2 &amp;&amp; dH == 1) ) ) {\n\n            mover = 1;\n        }\n\n        // defini\u00e7\u00e3o do movimento apropriado da pe\u00e7a Q Rainha anda de todas as formas H e V\n        if ( (peca == 'Q' || peca == 'q') &amp;&amp; \n            ( (dV == dH) || (dV == 0) || (dH == 0) ) ) {\n\n            mover = 1;\n        }\n\n        // defini\u00e7\u00e3o do movimento apropriado da pe\u00e7a K REi s\u00f3 anda 1 casa na V ou H ou Diagonal\n        if ( (peca == 'K' || peca == 'k') &amp;&amp; \n            ( (dV &gt;= 0 &amp;&amp; dV &lt;= 1) &amp;&amp; (dH &gt;= 0 &amp;&amp; dH &lt;= 1 ) ) ) {\n\n            mover = 1;\n        }\n\n        // defini\u00e7\u00e3o do movimento apropriado da pe\u00e7a p pe\u00e3o pode andar 2 casas a 1 vez e depois anda sempre s\u00f3 uma e come na diagonal\n        if ((peca == 'p') &amp;&amp; ( (linOri - linDes) == 1) &amp;&amp; (dH == 0) ) {\n\n            mover = 1;\n        }\n\n        // defini\u00e7\u00e3o do movimento apropriado da pe\u00e7a p pe\u00e3o pode andar 2 casas a 1 vez e depois anda sempre s\u00f3 uma e come na diagonal\n\n        if ((peca == 'P') &amp;&amp; ( (linDes - linOri) == 1) &amp;&amp; (dH == 0) ) {\n\n            mover = 1;\n        }\n\n\n        if (mover) {\n            xadrez[linDes][colDes] = xadrez[linOri][colOri];\n            xadrez[linOri][colOri] = ' ';\n        }\n        return 1;\n    }\n    else {\n        return 0;\n    }\n}\n\n// MAIN\nint main() {\n    int linOri, linDes, colOri, colDes;\n    while (1) {\n        pintarTelaTexto();\n        printf(\"Informe a linha e coluna de origem: \");\n        scanf(\"%d %d\", &amp;linOri, &amp;colOri );\n        printf(\"\\nInforme a linha e coluna de destino: \");\n        scanf(\"%d %d\", &amp;linDes, &amp;colDes );\n        int resultado = moverPeca(linOri, colOri, linDes, colDes);\n        if (resultado != 1) {\n            switch (resultado) {\n            case 9: printf(\"A pe\u00e7a n\u00e3o pode ser usada assim\"); getch(); break;\n            case 0: printf(\"\\nERRO : Coordenadas Inv\u00e1lidas\"); getch(); break;\n            case 1: break;\n            }\n        }\n\n    }\n    getch();\n    return 0;\n\n}\n</code></pre>\n"}, {"tags": ["c", "unix", "process"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 2, "creation_date": 1546366397, "post_id": 53997676, "comment_id": 94832745, "body": "Did you read documentation of <a href=\"http://man7.org/linux/man-pages/man2/waitpid.2.html\" rel=\"nofollow noreferrer\">waitpid(2)</a> ? It does not forbid calling <code>waitpid</code> several times (even if that might not do what you dream)"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1546367429, "post_id": 53997676, "comment_id": 94832977, "body": "BTW, read <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a> and learn to use <a href=\"http://man7.org/linux/man-pages/man1/strace.1.html\" rel=\"nofollow noreferrer\">strace(1)</a>..."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1546368877, "post_id": 53997676, "comment_id": 94833299, "body": "OT: regarding: <code>child_pids = malloc((argc - 1) * sizeof(pid_t));</code>  when calling any of the heap allocation functions: <code>malloc</code> <code>calloc</code> <code>realloc</code>, always check (!=NULL) the returned value to assure the operation was successful."}, {"owner": {"reputation": 99, "user_id": 10854982, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PJB5QPNGnos/AAAAAAAAAAI/AAAAAAAAADk/tQmq2sIP2N8/photo.jpg?sz=128", "display_name": "Alexandre Maneta", "link": "https://stackoverflow.com/users/10854982/alexandre-maneta"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1546369021, "post_id": 53997676, "comment_id": 94833329, "body": "@BasileStarynkevitch I did read the doc of waitpid. But oddly my program stops at this exact moment and I don&#39;t know for what reason. And I don&#39;t know if it is the right way to wait for alll children. Is there a more efficient way of doing it. <b>Thank you</b> for the advice for the <i>strace</i> command"}, {"owner": {"reputation": 99, "user_id": 10854982, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PJB5QPNGnos/AAAAAAAAAAI/AAAAAAAAADk/tQmq2sIP2N8/photo.jpg?sz=128", "display_name": "Alexandre Maneta", "link": "https://stackoverflow.com/users/10854982/alexandre-maneta"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1546369287, "post_id": 53997676, "comment_id": 94833394, "body": "@user3629249 OOPSIE. You&quot;re right, I forgot to check for null. Adding it rigth now !"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1546369476, "post_id": 53997676, "comment_id": 94833424, "body": "OT: regarding: <code>perror(&quot;Not enough args\\n&quot;);</code>  at this point, there is no system error, so the text message will be &#39;success&#39;,  It is typical at this point to output a USAGE message similar to: <code>fprintf( stderr, &quot;USAGE: %s number [[number]]\\n&quot;, argv[0] );</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1546369642, "post_id": 53997676, "comment_id": 94833461, "body": "regarding: <code>switch( n = fork()){                 case -1:                     perror(&quot;fork failed&quot;);                     _exit(EXIT_FAILURE);</code>  At this point it is not a good idea to exit the program.  Rather, any open pipes should be closed and any child processes should be exited/killed before calling <code>_exit()</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1546369797, "post_id": 53997676, "comment_id": 94833493, "body": "regarding: <code>if (0 == (stop_val = atoi(argv[i+1]))){</code>  The function: <code>atoi()</code> does not actually return an error condition and the user may have placed  0 somewhere in the command line arguments.  Suggest calling: <code>strtol()</code> as that does have an error status that can be checked"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1546369930, "post_id": 53997676, "comment_id": 94833526, "body": "regarding: <code>for (j = 0; j &lt; 20 ; j++){                         write(STDOUT_FILENO, &quot;here\\n&quot;, 5);                         if (stop_val % j == 0){                             kill(ppid, SIGUSR1);                             } </code> this assumes that all command line argumentd are less than 20.  This is not a valid assumption as nothing in the code is enforcing that assumption"}, {"owner": {"reputation": 99, "user_id": 10854982, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PJB5QPNGnos/AAAAAAAAAAI/AAAAAAAAADk/tQmq2sIP2N8/photo.jpg?sz=128", "display_name": "Alexandre Maneta", "link": "https://stackoverflow.com/users/10854982/alexandre-maneta"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1546369975, "post_id": 53997676, "comment_id": 94833537, "body": "@user3629249 Is there a way of exiting all processes in one shot. Does exiting the parent process terminate all child processes ?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1546370084, "post_id": 53997676, "comment_id": 94833554, "body": "to exit all the child processes. suggest: <code>while( wait( NULL ) != -1 ){;}</code>"}, {"owner": {"reputation": 99, "user_id": 10854982, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PJB5QPNGnos/AAAAAAAAAAI/AAAAAAAAADk/tQmq2sIP2N8/photo.jpg?sz=128", "display_name": "Alexandre Maneta", "link": "https://stackoverflow.com/users/10854982/alexandre-maneta"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1546370181, "post_id": 53997676, "comment_id": 94833575, "body": "@user3629249 You&#39;e pointed a great mistake the stop_val should be the other way around  : j % stop_val. I&#39;ll change to strtol() for the error catching possibility."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1546370311, "post_id": 53997676, "comment_id": 94833603, "body": "suggest the parent signal handler be setup before starting all the child processes."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1546370376, "post_id": 53997676, "comment_id": 94833619, "body": "It seems each child process is run for a small amount of time, then killed, that the next child process is started, etc.  Probably not what you want to do"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1546370706, "post_id": 53997676, "comment_id": 94833687, "body": "the parent signal handler is not setup until after all the children are started, however, it is being called by <code>kill(ppid, SIGUSR1);</code> in the child process before the child exits.  This will very likely kill the parent, immediately"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1546370870, "post_id": 53997676, "comment_id": 94833713, "body": "regarding: <code>default:                     &#47;* PARENT - process scheduling *&#47;                     child_pids[i] = n;                     kill(n, SIGSTOP);</code>  This will very likely kill the child before it has done anything.   Suggest rethinking the details of how the child processes are killed and when they are killed"}, {"owner": {"reputation": 99, "user_id": 10854982, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PJB5QPNGnos/AAAAAAAAAAI/AAAAAAAAADk/tQmq2sIP2N8/photo.jpg?sz=128", "display_name": "Alexandre Maneta", "link": "https://stackoverflow.com/users/10854982/alexandre-maneta"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1546371190, "post_id": 53997676, "comment_id": 94833772, "body": "@user3629249 What I want to do is to pause all child processes and then listen to them one by one for a certain amount of message"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1546371870, "post_id": 53997676, "comment_id": 94833903, "body": "@AlexandreManeta: avoid commenting your own question but instead <a href=\"https://stackoverflow.com/posts/53997676/edit\">edit</a> it to improve it"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1546389968, "post_id": 53997676, "comment_id": 94837120, "body": "Suggest a semaphore for each child process.  the child would then run up to the <code>sem_wait()</code> and sit there until the <code>main()</code> performs a <code>sem_post()</code> for that semaphore."}], "answers": [{"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 1, "last_activity_date": 1546371007, "creation_date": 1546371007, "answer_id": 53998323, "question_id": 53997676, "link": "https://stackoverflow.com/questions/53997676/is-it-possible-to-call-waitpid-multiple-time-unix-c/53998323#53998323", "title": "Is it possible to call waitpid multiple time ? [UNIX] [C]", "body": "<p>why is the parent (seeming) to stop at the instruction:</p>\n\n<pre><code>waitpid(child_pids[i], &amp;status, 0);\n</code></pre>\n\n<p>because the child is killing the parent, before the parent has setup a signal handler</p>\n"}], "owner": {"reputation": 99, "user_id": 10854982, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PJB5QPNGnos/AAAAAAAAAAI/AAAAAAAAADk/tQmq2sIP2N8/photo.jpg?sz=128", "display_name": "Alexandre Maneta", "link": "https://stackoverflow.com/users/10854982/alexandre-maneta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 346, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1546420478, "creation_date": 1546365375, "last_edit_date": 1546420478, "question_id": 53997676, "link": "https://stackoverflow.com/questions/53997676/is-it-possible-to-call-waitpid-multiple-time-unix-c", "title": "Is it possible to call waitpid multiple time ? [UNIX] [C]", "body": "<p>My teacher assigned a work which consists of making a pseudo-scheduler. I'm now stuck at the most important part. The line that is giving me trouble is the <em>waitpid</em> line at the end. Basically I want the parent process to wait for all his child that is why I've done that. But the code freezes at that point. When I comment it, it runs to the end but nothing is written to STDOUT.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;string.h&gt;\n#include &lt;signal.h&gt;\n\n#define LOOP_SIZE 20;\n\n/* SIG HANDLERS DEFINITION */\nvoid parentsighandler(int);\n\n/* GLOBAL VARIABLE DEFINITION */ \npid_t n, ppid;\nint nb_args, compteur;\n\n// array of pid_t to send signals to child\npid_t  *child_pids;     \n\n\nint main(int argc, char *argv[]){   \n    if (argc - 1 &gt;= 1 ){\n        // Variable initialisation\n        compteur = 0;\n        nb_args = argc - 1;\n        child_pids = malloc((argc - 1) * sizeof(pid_t)); \n\n        // String for sprintf\n        char sstr[40]; \n        char rstr[40];\n\n\n        // Initializing all the pipes for the processes\n        int p[2 * (argc - 1)];  \n\n        // getting the pid of the parent process\n        ppid = getpid();\n\n        //Initializing all pipes\n        int i, j, status, stop_val;\n        for (i = 0; i &lt; argc - 1; i++){\n            if (pipe(&amp;p[2*i]) == -1){\n                perror(\"pipe failed\");\n                _exit(EXIT_FAILURE);\n            }\n        }\n\n        for (i = 0; i &lt; argc - 1; i ++){\n            switch( n = fork()){\n                case -1:\n                    perror(\"fork failed\");\n                    _exit(EXIT_FAILURE);\n                case 0:\n                    /* CHILD */\n                    if (0 == (stop_val = atoi(argv[i+1]))){\n                        perror(\"atoi failed\");\n                        _exit(EXIT_FAILURE);\n                    }\n                    close(p[i*2]);\n                    for (j = 0; j &lt; 20 ; j++){\n                        write(STDOUT_FILENO, \"here\\n\", 5);\n                        if (j % stop_val == 0){\n                            kill(ppid, SIGUSR1);    \n                        } \n                        sprintf(sstr, \"Je suis le proc %d : message %d\\n\", getpid(), i);\n                        write(p[i * 2 + 1], sstr, 40);\n                    }   \n                    close(p[i*2+1]);\n                    _exit(EXIT_SUCCESS);\n\n                default:\n                    /* PARENT - process scheduling */\n                    child_pids[i] = n;\n                    kill(n, SIGSTOP);\n            } \n        }\n        write(STDOUT_FILENO, \"Debut de l'ordonnancement\\n\",26);\n\n        // Setting up the signal\n        signal(SIGUSR1, parentsighandler); \n\n        write(STDOUT_FILENO, \"before wait\\n\",12);   \n        // The parent as to wait for all child to finish\n        for (i = 0; i &lt; argc - 1; i ++){\n        //  write(STDOUT_FILENO, \"beit\\n\",12);  \n            printf(\"value of pid n%d is %d\\n\", i, child_pids[i]);\n    //      waitpid(child_pids[i], &amp;status, 0);\n        //  close(p[i * 2 + 1]); // closing the write end of the pipe\n        }\n\n        write(STDOUT_FILENO, \"cefore main\\n\",12);\n        char mystr[15];\n        sprintf(mystr, \"compteur : %d\\n\", compteur);\n        write(STDOUT_FILENO, mystr, 15);\n        while(1){\n            write(STDOUT_FILENO, \"refore main\\n\",12);\n            kill(child_pids[compteur], SIGCONT);\n            write(STDOUT_FILENO, \"jefore main\\n\",12);\n            while(read(p[2 * compteur], rstr, 40) &gt; 0){\n                write(STDOUT_FILENO, rstr, 40);\n            }       \n        }\n    } else {\n        perror(\"Not enough args\\n\");\n        _exit(EXIT_FAILURE);\n    }   \n    return 0;\n}\n\nvoid parentsighandler(int sig){\n    if (sig == SIGUSR1){\n        write(STDOUT_FILENO, \"passe dans sig handler\\n\", 23);\n        kill(child_pids[compteur], SIGSTOP);\n        if (compteur == nb_args){\n            compteur = 0;   \n        } else {\n            compteur ++;\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "cpu-architecture", "riscv"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1546363708, "post_id": 53997468, "comment_id": 94832164, "body": "Have you read the documentation? What does it say about the matter?"}], "answers": [{"tags": [], "owner": {"reputation": 305, "user_id": 6729061, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KV6WY.jpg?s=128&g=1", "display_name": "sbh", "link": "https://stackoverflow.com/users/6729061/sbh"}, "is_accepted": false, "score": 1, "last_activity_date": 1546365018, "creation_date": 1546365018, "answer_id": 53997629, "question_id": 53997468, "link": "https://stackoverflow.com/questions/53997468/riscv-32-bit-base-and-64-bit-extensions/53997629#53997629", "title": "RISCV 32-bit base and 64-bit extensions", "body": "<p>RISC-V is designed to support extensive customization and specialization. Each base instruction set is characterized by the width of the registers and the corresponding size of the user address space. There are two base variants, RV32I and RV64I, where I stands for integer ISA.</p>\n\n<p>The base integer ISA may be subset by a hardware implementation, but opcode traps and software emulation by a supervisor layer must then be used to implement functionality not provided by hardware. </p>\n\n<p>Although 64-bit address spaces are a requirement for larger systems, 32-bit address spaces may adequate for many embedded and client devices for decades to come and will be desirable to lower memory traffic and energy consumption. In addition, 32-bit address spaces are sufficient for educational purposes. A larger flat 128-bit address space might eventually be required, so we could be accommodated within the RISC-V ISA framework. </p>\n\n<p>The base integer ISA can be extended with one or more optional instruction-set extensions, however the base integer instructions cannot be redefined. RISC-V instruction-set extensions are divided into standard and non-standard extensions. Standard extensions should be generally useful and should not conflict with other standard extensions. </p>\n\n<p>Non-standard extensions may be highly specialized, or may conflict with other standard or non-standard extensions. </p>\n\n<p>Instruction-set extensions may provide slightly different functionality depending on the width of the base integer instruction set. A naming convention for RISC-V base instructions and instruction-set extensions, to support more general software development, a set of standard extensions are defined to provide integer multiply/divide, atomic operations, and single and double-precision floating-point arith- metic. </p>\n\n<p>The base integer ISA is named \u201cI\u201d (prefixed by RV32 or RV64 depending on integer register width), and contains integer computational instructions, integer loads, integer stores, and control-flow instructions, and is mandatory for all RISC-V implementations. </p>\n\n<p>The standard integer multiplication and division extension is named \u201cM\u201d, and adds instructions to multiply and divide values held in the integer registers. </p>\n\n<p>The standard atomic instruction extension, denoted by \u201cA\u201d, adds instructions that atomically read, modify, and write memory for inter-processor synchronization. The standard single-precision floating-point extension, denoted by \u201cF\u201d, adds floating-point registers, single-precision computational instructions, and single-precision loads and stores. The standard double-precision floating-point extension, denoted by \u201cD\u201d, expands the floating-point registers, and adds double precision computational instructions, loads, and stores.</p>\n\n<p>Reference - RISC-V ISA Manual</p>\n"}], "owner": {"reputation": 11, "user_id": 7669221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05dcc947d68bd0d66bbeab3c3b82786c?s=128&d=identicon&r=PG&f=1", "display_name": "Bern", "link": "https://stackoverflow.com/users/7669221/bern"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 827, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1546365018, "creation_date": 1546363490, "question_id": 53997468, "link": "https://stackoverflow.com/questions/53997468/riscv-32-bit-base-and-64-bit-extensions", "title": "RISCV 32-bit base and 64-bit extensions", "body": "<p>I'd like to build a RISCV simulator in C language which would support a limited instruction set of the RISC-V ISA, restricted to the 32-bit base with 64- bit extensions (RV32I and RV64I). But I'm not quite understand what are the 64-bit extensions and how to use them. Could someone explain to me what the difference between the base and extensions and how could I distinguish them in code ?</p>\n"}, {"tags": ["c", "visual-studio"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1546361570, "post_id": 53997234, "comment_id": 94831708, "body": "First of all, why don&#39;t you use the <i>standard</i> <a href=\"https://en.cppreference.com/w/c/string/byte/strtok\" rel=\"nofollow noreferrer\"><code>strtok</code></a> function? Secondly, I suggest you <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">learn how to debug your programs</a>. Especially how to run inside the debugger and how to catch crashes (which might be what you have)."}, {"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 0, "creation_date": 1546361583, "post_id": 53997234, "comment_id": 94831711, "body": "Where does it hang?  (Attach a debugger.)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10109860"}, "reply_to_user": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 0, "creation_date": 1546361660, "post_id": 53997234, "comment_id": 94831733, "body": "@Davis Herring after i type the input and hit enter. it doesn&#39;t do anything. It just stays there"}, {"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 0, "creation_date": 1546361696, "post_id": 53997234, "comment_id": 94831736, "body": "@catify: And <b>what line</b> is running then?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1546361766, "post_id": 53997234, "comment_id": 94831748, "body": "What <i>is</i> the (exact!) input given?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10109860"}, "reply_to_user": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 0, "creation_date": 1546362170, "post_id": 53997234, "comment_id": 94831853, "body": "@Davis Herring oh...51"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10109860"}, "edited": false, "score": 0, "creation_date": 1546362569, "post_id": 53997234, "comment_id": 94831929, "body": "I got why i&#39;m wrong ! Thank you so much Davis Herring and programmer dude !"}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 2, "creation_date": 1546364311, "post_id": 53997234, "comment_id": 94832297, "body": "You should edit the question rather than clarify in comments.  The question says that it does not run, when it clearly does if it prompts for input.  VS has about the best debugger available - consider using it; it will be far faster that posting questions on SO."}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 1, "creation_date": 1546364717, "post_id": 53997234, "comment_id": 94832382, "body": "@catify to use all these offsets complicate a lot your program, it is more simple to have a pointer going through the string, just my 2 cents"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10109860"}, "reply_to_user": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1546434864, "post_id": 53997234, "comment_id": 94850561, "body": "@bruno I have to use &#39;struct&#39;. It&#39;s an assignment"}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1546435527, "post_id": 53997234, "comment_id": 94850883, "body": "@catify sorry if I wasn&#39;t clear, I speak about the offsets saved in the variables l q and p, in the block for you (must) have <code>pInput + l + q + 3 + p</code> while it can be a simple pointer or an alone index. Your code is wrong because of that (artificial) complexity"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10109860"}, "reply_to_user": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1546436329, "post_id": 53997234, "comment_id": 94851272, "body": "@bruno please show me how you could simplify this. Could you please post your code as another answer or may be, update your last answer? sorry if that&#39;s too much to ask. I just don&#39;t understand how a simple pointer would work but i really want to know."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1546436524, "post_id": 53997234, "comment_id": 94851369, "body": "You are misusing <code>gets_s()</code>. The correct prototype is <code>char *gets_s(char *s, rsize_t n);</code> (see <a href=\"http://port70.net/~nsz/c/c11/n1570.html#K.3.5.4.1\" rel=\"nofollow noreferrer\">C11 K.3.5.4.1</a>). <b>Turn on all your compiler warnings</b> and mind them."}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1546438563, "post_id": 53997234, "comment_id": 94852363, "body": "@catify I edited my answer to add a proposal for Exam"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1546442661, "post_id": 53997234, "comment_id": 94854349, "body": "@pmg <i>You are misusing <code>gets_s()</code>.</i>  True here, but in general, using the C standard to document Microsoft&#39;s versions of Annex K functions is likely to not match Microsoft&#39;s horrendous implementation.  <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1967.htm\" rel=\"nofollow noreferrer\">Per the ISO C committee</a>: &quot;Microsoft Visual Studio implements an early version of the APIs. However, the implementation is incomplete and conforms neither to C11 nor to the original TR 24731-1. ...  As a result of the numerous deviations from the specification the Microsoft implementation cannot be considered conforming or portable.&quot;"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10109860"}, "edited": false, "score": 0, "creation_date": 1546438908, "post_id": 53997373, "comment_id": 94852523, "body": "Thank you so much for your time and knowledge sir!"}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1546439819, "post_id": 53997373, "comment_id": 94852963, "body": "@catify I added <i>strndup</i> if you don&#39;t have it on visual-studio, and I added a missing <i>const</i> in the declaration of <i>p</i>"}], "tags": [], "owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "is_accepted": true, "score": 5, "last_activity_date": 1546439571, "last_edit_date": 1546439571, "creation_date": 1546362624, "answer_id": 53997373, "question_id": 53997234, "link": "https://stackoverflow.com/questions/53997234/im-writing-a-c-program-on-visual-studio-but-my-program-doesnt-run-nor-it-retu/53997373#53997373", "title": "I&#39;m writing a C program on visual studio. But my program doesn&#39;t run nor it returns any errors. Can someone take a look at it?", "body": "<p>The last <em>for</em> in Exam is :</p>\n\n<pre><code>for (p = 0; *(pInput + l + q + 4) != ';' || *(pInput + l + q + 4) != 0; p++);\n</code></pre>\n\n<p>that <em>for</em> never end because its condition is always true</p>\n\n<ul>\n<li>if <code>*(pInput + l + q + 4)</code> values ';' the test is <code>false || true</code> then true</li>\n<li>if <code>*(pInput + l + q + 4)</code> values 0 the test is <code>true || false</code> then true</li>\n<li>for all the other characters the test is <code>true || true</code> so again true</li>\n<li><code>+ 4</code> must be <code>+ 3</code> else goes 1 character too far</li>\n<li>and <code>p++</code> has no effect at all on the test</li>\n</ul>\n\n<p>The test can be changed to <code>!(*(pInput + l + q + 3 + p) == ';' || *(pInput + l + q + 3  + p) == 0)</code> to stop when ';' or the null character is reached </p>\n\n<p>Of course after <code>*(pInput + l + q + 4) = 0;</code> must be <code>*(pInput + l + q + 3 + p) = 0;</code> </p>\n\n<p>Note that <code>pQuantity</code> and <code>pPrice</code> are allocated but never freed.</p>\n\n<hr>\n\n<p>Exam can be simplified, for instance :</p>\n\n<pre><code>ITEM *Exam(const char *pInput)\n{\n    ITEM *pItem = (ITEM *)malloc(sizeof(ITEM));\n    const char *p;\n\n    p = strchr(pInput, ',');\n    pItem-&gt;pName = strndup(pInput, p - pInput);\n    p += 1;\n\n    pItem-&gt;Quantity = atoi(p);\n    p = strchr(p, ',') + 1;\n\n    pItem-&gt;Price = atoi(p);\n    pItem-&gt;Total = pItem-&gt;Price * pItem-&gt;Quantity;\n\n    return pItem;\n}\n</code></pre>\n\n<p>Note that the input string is not modified (I moved it <code>const</code>) and there is no dynamic allocation except for the result and the name</p>\n\n<hr>\n\n<p>if you do not have <em>strndup</em> :</p>\n\n<pre><code>char * strndup(const char * s, int n)\n{\n    char * r = (char *) malloc(n + 1);\n\n    memcpy(r, s, n);\n    r[n] = 0;\n    return r;\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10109860"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 53997373, "answer_count": 1, "score": 1, "last_activity_date": 1546439571, "creation_date": 1546361384, "question_id": 53997234, "link": "https://stackoverflow.com/questions/53997234/im-writing-a-c-program-on-visual-studio-but-my-program-doesnt-run-nor-it-retu", "title": "I&#39;m writing a C program on visual studio. But my program doesn&#39;t run nor it returns any errors. Can someone take a look at it?", "body": "<p>I hopelessly tried to copy paste this into another file but it still doesn't return anything. </p>\n\n<pre><code>#include \"stdio.h\"\n#include \"stdlib.h\"\n#include \"string.h\"\n#include \"conio.h\"\n#pragma warning (disable: 4996)\n\ntypedef struct item\n{\n    char *pName;\n    int Quantity, Price, Total;\n} ITEM;\n\nITEM *Exam(char *pInput);\n\nint main()\n{\n    ITEM *pItem;\n    char input[81];\n    printf(\"Type items: \");\n    gets_s(input);\n    char *pInput = input;\n    pItem = Exam(pInput);\n    printf(\"Name: %s\\nQuantity: %d\\nPrice: %d\\nTotal: %d\\n\", pItem-&gt;pName, pItem-&gt;Quantity, pItem-&gt;Price, pItem-&gt;Total);\n    free(pItem);\n    return 0;\n}\n\nITEM *Exam(char *pInput)\n{\n    ITEM *pItem = (ITEM *)malloc(sizeof(ITEM));\n    char *pNam, *pQuantity, *pPrice;\n    int total, l, q, p;\n    int qu, pr;\n\n    for (l = 0; *(pInput + l) != ','; l++);\n    pNam = (char *)malloc(l + 1);\n    *(pInput + l) = '\\0';\n    strcpy(pNam, pInput);\n    pItem-&gt;pName = pNam;\n    *(pInput + l) = ',';\n\n    for (q = 0; *(pInput + l + 2 + q) != ','; q++);\n    pQuantity = (char *)malloc(q + 1);\n    *(pInput + l + q + 2) = 0;\n    strcpy(pQuantity, pInput + l + 2);\n    qu = atoi(pQuantity);\n    pItem-&gt;Quantity = qu;\n\n    for (p = 0; *(pInput + l + q + 4) != ';' || *(pInput + l + q + 4) != 0; p++);\n    pPrice = (char *)malloc(p + 1);\n    *(pInput + l + q + 4) = 0;\n    strcpy(pPrice, pInput + l + q + 4);\n    pr = atoi(pPrice);\n    pItem-&gt;Price = pr;\n    pItem-&gt;Total = pr * qu;\n    return pItem;\n}\n</code></pre>\n\n<p>input is 'shirt, 100, 5'. I want the output to be a structure of name, quantity, price and total. It let me type the input but when i press enter it doesn't return anything. The program just hangs...</p>\n"}, {"tags": ["c", "gcc", "arm", "lto"], "answers": [{"comments": [{"owner": {"reputation": 4276, "user_id": 403571, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/c50481e6b5ce49d4779e0adbd2e85b68?s=128&d=identicon&r=PG", "display_name": "RushPL", "link": "https://stackoverflow.com/users/403571/rushpl"}, "edited": false, "score": 0, "creation_date": 1546363202, "post_id": 53997288, "comment_id": 94832059, "body": "Thank you .. you have raised some good questions. The exception handlers are referenced in the same file that defines the default handlers:  <code>const pFunc __Vectors[] __attribute__ ((section(&quot;.vectors&quot;))) = {   &#47;* Cortex-M Exception Handlers *&#47;   (pFunc)&amp;__StackTop,                       &#47;*      Initial Stack Pointer     *&#47;   Reset_Handler,                            &#47;*      Reset Handler             *&#47;   NMI_Handler,     </code>  I will try marking this symbol as used and I&#39;ll let you know! But for the handlers themselves .. marking them as used does not help."}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "reply_to_user": {"reputation": 4276, "user_id": 403571, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/c50481e6b5ce49d4779e0adbd2e85b68?s=128&d=identicon&r=PG", "display_name": "RushPL", "link": "https://stackoverflow.com/users/403571/rushpl"}, "edited": false, "score": 1, "creation_date": 1546367384, "post_id": 53997288, "comment_id": 94832966, "body": "@RushPL: OK, then where is <code>__Vectors</code> referenced from? I suspect this is your problem."}, {"owner": {"reputation": 4276, "user_id": 403571, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/c50481e6b5ce49d4779e0adbd2e85b68?s=128&d=identicon&r=PG", "display_name": "RushPL", "link": "https://stackoverflow.com/users/403571/rushpl"}, "edited": false, "score": 0, "creation_date": 1546368882, "post_id": 53997288, "comment_id": 94833301, "body": "Thanks! Vectors is being referenced only by the linker script. I spent the last hour trying different things and indeed marking the <code>__Vectors</code> symbol with the <code>used</code> attribute, helps. It wasn&#39;t the whole solution though! Other important takeaway is that weak functions and their overrides should be compiled in the same way (either all LTO, or all no LTO) Having a basic weak implementation compiled with -fno-lto and its override in LTO (or vice versa) was causing the override to not work.  In the end .. almost all of my code is compiling with LTO! Newlib overrides being the only exception."}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "reply_to_user": {"reputation": 4276, "user_id": 403571, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/c50481e6b5ce49d4779e0adbd2e85b68?s=128&d=identicon&r=PG", "display_name": "RushPL", "link": "https://stackoverflow.com/users/403571/rushpl"}, "edited": false, "score": 0, "creation_date": 1546370652, "post_id": 53997288, "comment_id": 94833678, "body": "@RushPL: I think you&#39;re mistaken about weak and the mechanism of your problem is something different. Strong definitions, <i>if linked at all</i>, replace weak definitions before any garbage collection of unreferenced code can happen; if this were not the case, LTO would break semantics badly and would be unusable for anything using weak definitions. Perhaps your strong definitions are in object files inside a <code>.a</code> library and nothing causes those files to be pulled into the link at all? Maybe <code>--whole-archive</code> is broken with LTO?"}, {"owner": {"reputation": 4276, "user_id": 403571, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/c50481e6b5ce49d4779e0adbd2e85b68?s=128&d=identicon&r=PG", "display_name": "RushPL", "link": "https://stackoverflow.com/users/403571/rushpl"}, "edited": false, "score": 0, "creation_date": 1546426302, "post_id": 53997288, "comment_id": 94846655, "body": "You may be right R.., I will try to find out what&#39;s going on and I&#39;ll keep this thread updated. Thanks again for your help."}, {"owner": {"reputation": 628, "user_id": 3186936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbf460fb6453008fa584be62a5e440c7?s=128&d=identicon&r=PG&f=1", "display_name": "hermannk", "link": "https://stackoverflow.com/users/3186936/hermannk"}, "edited": false, "score": 0, "creation_date": 1547998000, "post_id": 53997288, "comment_id": 95377749, "body": "I am using the same compiler as the OP and I am in the lucky position to have two projects: A preliminary sketch and a restructured version. The old version links with LTO, the new version does not. So, arm_none_eabi_gcc 8-2018-q4-major <b>can</b> do LTO linking. Sometimes. I can swap the <code>startup_stm32l476xx.o</code> files between the projects (source is identical, binary differs by some bytes) and the behaviour does not change. <code>nm</code> and <code>readelf</code> did not show differences. I have a workaround, though. Any idea how I can isolate the problem?"}, {"owner": {"reputation": 2303, "user_id": 966797, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Kc70.jpg?s=128&g=1", "display_name": "escrafford", "link": "https://stackoverflow.com/users/966797/escrafford"}, "reply_to_user": {"reputation": 628, "user_id": 3186936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbf460fb6453008fa584be62a5e440c7?s=128&d=identicon&r=PG&f=1", "display_name": "hermannk", "link": "https://stackoverflow.com/users/3186936/hermannk"}, "edited": false, "score": 0, "creation_date": 1552026827, "post_id": 53997288, "comment_id": 96864380, "body": "@hermannk you probably have an interrupt handler somewhere that you haven&#39;t marked as used. Hunt them down, there can&#39;t be that many. :) I was able to get my projects working with LTO by marking the vector table and all interrupt handlers as used."}, {"owner": {"reputation": 561, "user_id": 2833040, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/owW9d.jpg?s=128&g=1", "display_name": "MarkusM", "link": "https://stackoverflow.com/users/2833040/markusm"}, "edited": false, "score": 0, "creation_date": 1596614170, "post_id": 53997288, "comment_id": 111864390, "body": "I was experiencing the same problem as described in the original question. In my case the problem seemed to be dependent on the order in which object files were passed into the linker (arm-none-eabi-gcc). I have two relevant source files: <code>gcc_startup_nrf52.S</code> holding the default IRQ handler and <code>myirq.c</code> holding my custom IRQ handler, both compiled with <code>-flto</code>. When calling the linker like <code>arm-none-eabi-gcc ... gcc_startup_nrf52.o myirq.o</code>, everything worked as expected, but when calling like <code>arm-none-eabi-gcc ... myirq.o gcc_startup_nrf52.o</code> I observed the same issues."}], "tags": [], "owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "is_accepted": true, "score": 3, "last_activity_date": 1546361888, "creation_date": 1546361888, "answer_id": 53997288, "question_id": 53997196, "link": "https://stackoverflow.com/questions/53997196/gcc-8-for-arm-in-lto-mode-is-removing-interrupt-handlers-and-weak-functions-ho/53997288#53997288", "title": "GCC 8 for ARM in LTO mode is removing interrupt handlers and weak functions - how to prevent it?", "body": "<p>Where are your interrupt handlers referenced from? Just like unreferenced static functions and objects will be removed from a single translation unit, external ones that are unused will be removed during LTO. In order to prevent this (and in order for your program to be valid anyway in the abstract model) there needs to be some chain of references, starting from the entry point, leading to the functions and objects; if none exists, then you're <em>not actually using them in your program</em>.</p>\n\n<p>If the reference is from a linker script or asm source file, it's possible that this is a bug in LTO, and it's not seeing the references like it should. In this case you might be able to apply a hack like <code>__attribute__((__used__))</code> to the affected function definitions. Alternatively you could make fake references to them, e.g. by storing their addresses to dummy volatile objects or using their addresses in input constraints to empty inline asm blocks. As yet another alternative, there may be a way to redo whatever you're doing with asm source files or linked scripts to make your interrupt table at the C level, with appropriate structs/arrays in special sections, so that the compiler can actually see the references without you having to fake them.</p>\n"}], "owner": {"reputation": 4276, "user_id": 403571, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/c50481e6b5ce49d4779e0adbd2e85b68?s=128&d=identicon&r=PG", "display_name": "RushPL", "link": "https://stackoverflow.com/users/403571/rushpl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1186, "favorite_count": 2, "accepted_answer_id": 53997288, "answer_count": 1, "score": 5, "last_activity_date": 1546369169, "creation_date": 1546361051, "last_edit_date": 1546369169, "question_id": 53997196, "link": "https://stackoverflow.com/questions/53997196/gcc-8-for-arm-in-lto-mode-is-removing-interrupt-handlers-and-weak-functions-ho", "title": "GCC 8 for ARM in LTO mode is removing interrupt handlers and weak functions - how to prevent it?", "body": "<p>My target device is an EFM32 Cortex-M3 based device. My toolchain is the official ARM GNU toolchain gcc-arm-none-eabi-8-2018-q4-major.</p>\n\n<p>Everything works fine without LTO, but to make LTO work I have to mark all interrupt handler code with <code>-fno-lto</code>. I would like to get rid of this workaround.</p>\n\n<p>The problem is, every interrupt handler is getting removed from the final binary. (I am checking with <code>arm-none-eabi-nm --print-size --size-sort --radix=d -C -n file.out</code>) This makes the resulting binary crash.</p>\n\n<p>Digging deeper and after googling for similar problems:</p>\n\n<ul>\n<li>I tried marking such functions as <code>__attribute__((used))</code>, <code>__attribute((interrupt))</code> to no avail - the interrupt handlers are getting removed in spite of these attributes. (related <a href=\"https://stackoverflow.com/questions/38389702/prevent-gcc-lto-from-deleting-function\">Prevent GCC LTO from deleting function</a>)</li>\n<li>Found possibly related discussion <a href=\"https://bugs.launchpad.net/gcc-arm-embedded/+bug/1747966\" rel=\"nofollow noreferrer\">https://bugs.launchpad.net/gcc-arm-embedded/+bug/1747966</a> - no solutions posted</li>\n</ul>\n\n<p>Sample code from <code>startup_efm32gg.c</code> defines default interrupt handlers as such:</p>\n\n<pre><code>void DMA_IRQHandler(void) __attribute__ ((weak, alias(\"Default_Handler\")));\n/* many other interrupts */\nvoid Default_Handler(void) { while (1); }\n</code></pre>\n\n<p>The same problem happens for regular interrupt handler definitions as well (as in, no aliases and not weak)</p>\n\n<p>It might be related but it seems that weak symbols are misbehaving in LTO mode in the same way.</p>\n\n<p>Thank you in advance for any ideas!</p>\n\n<p><strong>Edit: See my reply to the marked answer for a full solution!</strong></p>\n"}, {"tags": ["c", "return"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1546355754, "post_id": 53996562, "comment_id": 94830393, "body": "This is implementation specific (actually operating system specific) and false on my Linux computer"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 1, "creation_date": 1546356135, "post_id": 53996562, "comment_id": 94830462, "body": "the cycle is actually 256 if you use Linux <a href=\"https://stackoverflow.com/q/10878618/995714\">Why does return value wrap around 256 in c</a>, <a href=\"https://stackoverflow.com/q/179565/995714\">ExitCodes bigger than 255, possible?</a>, <a href=\"https://stackoverflow.com/q/31626445/995714\">C++ Programs return int type, so why does return -1 return 255?</a>"}], "owner": {"reputation": 39, "user_id": 8911677, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13ac8a196eb9b9432b9dacf93abc1607?s=128&d=identicon&r=PG&f=1", "display_name": "Joanny Rouviere", "link": "https://stackoverflow.com/users/8911677/joanny-rouviere"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "closed_date": 1546355803, "answer_count": 0, "score": 0, "last_activity_date": 1546360496, "creation_date": 1546355551, "question_id": 53996562, "link": "https://stackoverflow.com/questions/53996562/why-does-main-return-statement-allows-for-1024-error-codes", "closed_reason": "Duplicate", "title": "Why does main() return statement allows for 1024 error codes?", "body": "<p>I am a computer science student, and over my course I have noticed an interesting behaviour in C I couldn't find an answer for: the return statement in the main function only allows for 1024 positive integers as unique return codes. If I try to return 1024 for instance, the program will actually return 0, and 1025 will return 1, and so on; up until another 1024 codes, when it restarts again. Why is that?</p>\n"}, {"tags": ["c", "linux", "gdb", "pthreads"], "comments": [{"owner": {"reputation": 127, "user_id": 7186730, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aL0Ox.jpg?s=128&g=1", "display_name": "Robert Baldyga", "link": "https://stackoverflow.com/users/7186730/robert-baldyga"}, "edited": false, "score": 2, "creation_date": 1546350286, "post_id": 53995906, "comment_id": 94829189, "body": "You need to compile program with <code>-g</code> flag, then you will be able to setup breakpoint."}, {"owner": {"reputation": 1, "user_id": 156458, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/3PCjR.png?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/156458/tim"}, "reply_to_user": {"reputation": 127, "user_id": 7186730, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aL0Ox.jpg?s=128&g=1", "display_name": "Robert Baldyga", "link": "https://stackoverflow.com/users/7186730/robert-baldyga"}, "edited": false, "score": 0, "creation_date": 1546350340, "post_id": 53995906, "comment_id": 94829206, "body": "Thanks. The post I linked doesn&#39;t complie it with -g, but it says &quot;By using scheduler locking in gdb, I can keep the program and its threads alive so I can capture what top&quot;"}, {"owner": {"reputation": 1, "user_id": 156458, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/3PCjR.png?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/156458/tim"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1546351121, "post_id": 53995906, "comment_id": 94829379, "body": "@Eric My Lubuntu 18.04 is a general purposed OS. Is scheduler locking in gdb a feature only supported by special OSes?"}, {"owner": {"reputation": 1, "user_id": 156458, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/3PCjR.png?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/156458/tim"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1546357484, "post_id": 53995906, "comment_id": 94830729, "body": "Thanks. @Eric  Where can I set the breakpoint, so that I can use top or ps to show all the three threads as in the original post? I only see one thread when pausing at line 43, and am not sure where I shall place the breakpoint instead."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1546357815, "post_id": 53995906, "comment_id": 94830807, "body": "First things first, when you set a breakpoint in <code>main</code>, then run the program, then execute <code>set scheduler-locking on</code>, do you still get an error message?"}, {"owner": {"reputation": 1, "user_id": 156458, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/3PCjR.png?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/156458/tim"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1546358084, "post_id": 53995906, "comment_id": 94830860, "body": "no error message. @Eric"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1546362579, "post_id": 53995906, "comment_id": 94831933, "body": "when compiling, always enable the warnings, then fix those warnings.  Suggest using: `gcc -ggdb3 -Wall -Wextra -Wconversion -pedantic -std=gnu11 -o thread_test  thread_test.c -pthread"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1546362762, "post_id": 53995906, "comment_id": 94831971, "body": "the last line in the function: <code>threadMethod()</code>  should be: <code>pthread_exit( NULL );</code>  Otherwise the compiler will complain."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1546363246, "post_id": 53995906, "comment_id": 94832070, "body": "OT: regarding: <code>fprintf(stderr, &quot;pthread_create: error\\n&quot;);</code> This fails to tell the user why the function failed.  Strongly suggest: <code>perror( &quot;pthread_create failed&quot; );</code>  as that will output the error message and the text reason the system thinks the error occurred to <code>stderr</code>"}, {"owner": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 1, "creation_date": 1546384544, "post_id": 53995906, "comment_id": 94836320, "body": "Re: &quot;The post I linked doesn&#39;t complie it with -g&quot; You can compile without -g, but then you&#39;ll be able to place breakpoints only at functions and numeric object code addresses, not line numbers."}], "answers": [{"tags": [], "owner": {"reputation": 162629, "user_id": 50617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFykQ.png?s=128&g=1", "display_name": "Employed Russian", "link": "https://stackoverflow.com/users/50617/employed-russian"}, "is_accepted": false, "score": 2, "last_activity_date": 1546357775, "creation_date": 1546357775, "answer_id": 53996814, "question_id": 53995906, "link": "https://stackoverflow.com/questions/53995906/how-can-i-pause-the-execution-of-a-pthread-program-so-that-i-can-check-the-pid/53996814#53996814", "title": "How can I pause the execution of a pthread program, so that I can check the pid and tgid of the threads?", "body": "<p>You have two problems:</p>\n\n<ul>\n<li>you built your program without debugging info (add <code>-g</code> flag), and</li>\n<li>you are trying to <code>set scheduler-locking on</code> before the program started (that doesn't work).</li>\n</ul>\n\n<p>This should work:</p>\n\n<pre><code> gcc -g -pthread -o thread_test thread_test.c\n gdb -q ./thread_test\n (gdb) start\n (gdb) set scheduler-locking on\n</code></pre>\n\n<p>However, you must be extra careful with this setting -- simply continuing from this point will get your program to block in <code>pthread_join</code>, as only the main thread will keep running.</p>\n"}, {"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 1, "last_activity_date": 1546364940, "last_edit_date": 1546364940, "creation_date": 1546363678, "answer_id": 53997484, "question_id": 53995906, "link": "https://stackoverflow.com/questions/53995906/how-can-i-pause-the-execution-of-a-pthread-program-so-that-i-can-check-the-pid/53997484#53997484", "title": "How can I pause the execution of a pthread program, so that I can check the pid and tgid of the threads?", "body": "<p>the following is an example of using <code>gdb</code> with the posted code to pause everything:</p>\n\n<p>note: this was compiled to find/fix compile problems via:</p>\n\n<pre><code>gcc -ggdb -Wall -Wextra -Wconversion -pedantic -std=gnu11 -c untitled.c\n</code></pre>\n\n<p>this was finally compiled/linked via:</p>\n\n<pre><code>gcc -ggdb -Wall -o untitled untitled.c   -lpthread \n</code></pre>\n\n<p>then using the debugger: <code>gdb</code>, thereby showing my inputs and the <code>gdb</code> outputs:</p>\n\n<pre><code>$ gdb untitled\nGNU gdb (Ubuntu 8.1-0ubuntu3) 8.1.0.20180409-git\nCopyright (C) 2018 Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version 3 or later &lt;http://gnu.org/licenses/gpl.html&gt;\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.  Type \"show copying\"\nand \"show warranty\" for details.\nThis GDB was configured as \"x86_64-linux-gnu\".\nType \"show configuration\" for configuration details.\nFor bug reporting instructions, please see:\n&lt;http://www.gnu.org/software/gdb/bugs/&gt;.\nFind the GDB manual and other documentation resources online at:\n&lt;http://www.gnu.org/software/gdb/documentation/&gt;.\nFor help, type \"help\".\nType \"apropos word\" to search for commands related to \"word\"...\nReading symbols from untitled...done.\n(gdb) br main\nBreakpoint 1 at 0x9a5: file untitled.c, line 20.\n(gdb) br threadMethod\nBreakpoint 2 at 0x946: file untitled.c, line 9.\n(gdb) r\nStarting program: /home/richard/Documents/forum/untitled \n[Thread debugging using libthread_db enabled]\nUsing host libthread_db library \"/lib/x86_64-linux-gnu/libthread_db.so.1\".\n\nBreakpoint 1, main () at untitled.c:20\n20  {\n(gdb) c\nContinuing.\n[New Thread 0x7ffff77c4700 (LWP 8645)]\n[New Thread 0x7ffff6fc3700 (LWP 8646)]\n[Switching to Thread 0x7ffff77c4700 (LWP 8645)]\n\nThread 2 \"untitled\" hit Breakpoint 2, threadMethod (arg=0x7fffffffdf4c)\n    at untitled.c:9\n9       int intArg = (int) *((int*) arg);\n(gdb) \n</code></pre>\n\n<p>then you can (in another terminal window) use <code>ps</code> etc to display info.  However, the thread function will output (to <code>stdout</code> the information you might be interested in.</p>\n\n<p>or you can (in <code>gdb</code> enter commands like:</p>\n\n<pre><code>(gdb) c\n[Process] getpid() = 8641\n[Process] pthread_self() = 140737353992000\n[Switching to Thread 0x7ffff6fc3700 (LWP 8646)]\n\nThread 3 \"untitled\" hit Breakpoint 2, threadMethod (arg=0x7fffffffdf50)\nat untitled.c:9\n9       int intArg = (int) *((int*) arg);\n(gdb) c\n....\n[Thread 1] getpid() = 8641\n[Thread 1] pthread_self() = 140737345505024\n....\n[Thread 2] getpid() = 8641\n[Thread 2] pthread_self() = 140737337112320\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 156458, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/3PCjR.png?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/156458/tim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1563622344, "creation_date": 1546349908, "last_edit_date": 1563622344, "question_id": 53995906, "link": "https://stackoverflow.com/questions/53995906/how-can-i-pause-the-execution-of-a-pthread-program-so-that-i-can-check-the-pid", "title": "How can I pause the execution of a pthread program, so that I can check the pid and tgid of the threads?", "body": "<p>I am trying with a small program from <a href=\"https://stackoverflow.com/q/9154671/156458\">Distinction between processes and threads in Linux</a></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;pthread.h&gt;\n\nvoid* threadMethod(void* arg)\n{\n    int intArg = (int) *((int*) arg);\n\n    int32_t pid = getpid();\n    uint64_t pti = pthread_self();\n\n    printf(\"[Thread %d] getpid() = %d\\n\", intArg, pid);\n    printf(\"[Thread %d] pthread_self() = %lu\\n\", intArg, pti);\n}\n\nint main()\n{\n    pthread_t threads[2];\n\n    int thread1 = 1;\n\n    if ((pthread_create(&amp;threads[0], NULL, threadMethod, (void*) &amp;thread1))\n         != 0)\n    {\n        fprintf(stderr, \"pthread_create: error\\n\");\n        exit(EXIT_FAILURE);\n    }\n\n    int thread2 = 2;\n\n    if ((pthread_create(&amp;threads[1], NULL, threadMethod, (void*) &amp;thread2))\n         != 0)\n    {\n        fprintf(stderr, \"pthread_create: error\\n\");\n        exit(EXIT_FAILURE);\n    }\n\n    int32_t pid = getpid();\n    uint64_t pti = pthread_self();\n\n    printf(\"[Process] getpid() = %d\\n\", pid);\n    printf(\"[Process] pthread_self() = %lu\\n\", pti);\n\n    if ((pthread_join(threads[0], NULL)) != 0)\n    {\n        fprintf(stderr, \"Could not join thread 1\\n\");\n        exit(EXIT_FAILURE);\n    }\n\n    if ((pthread_join(threads[1], NULL)) != 0)\n    {\n        fprintf(stderr, \"Could not join thread 2\\n\");\n        exit(EXIT_FAILURE);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>On 64 bit Lubuntu 18.04, I compile it by the same command from the post:</p>\n\n<pre><code>$ gcc -pthread -o thread_test thread_test.c\n</code></pre>\n\n<p>I also try to follow what the post says:</p>\n\n<blockquote>\n  <p>By using scheduler locking in gdb, I can keep the program and its threads alive so I can capture what top</p>\n</blockquote>\n\n<p>but because I am not familiar with gdb,  the program runs to finish without pausing (see below). I also tried to set up breakpoint by <code>break 43</code>, but gdb says <code>No line 40 in the current file</code>. What shall I do to pause the execution, so that I can use <code>top</code> or <code>ps</code> to examine the threads' pid and tgid?</p>\n\n<pre><code>$ gdb thread_test\nGNU gdb (Ubuntu 8.1-0ubuntu3) 8.1.0.20180409-git\nCopyright (C) 2018 Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version 3 or later &lt;http://gnu.org/licenses/gpl.html&gt;\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.  Type \"show copying\"\nand \"show warranty\" for details.\nThis GDB was configured as \"x86_64-linux-gnu\".\nType \"show configuration\" for configuration details.\nFor bug reporting instructions, please see:\n&lt;http://www.gnu.org/software/gdb/bugs/&gt;.\nFind the GDB manual and other documentation resources online at:\n&lt;http://www.gnu.org/software/gdb/documentation/&gt;.\nFor help, type \"help\".\nType \"apropos word\" to search for commands related to \"word\"...\nReading symbols from thread_test...(no debugging symbols found)...done.\n(gdb) set scheduler-locking\nRequires an argument. Valid arguments are off, on, step, replay.\n(gdb) set scheduler-locking on\nTarget 'exec' cannot support this command.\n(gdb) run\nStarting program: /tmp/test/pthreads/thread_test \n[Thread debugging using libthread_db enabled]\nUsing host libthread_db library \"/lib/x86_64-linux-gnu/libthread_db.so.1\".\n[New Thread 0x7ffff77c4700 (LWP 4711)]\n[New Thread 0x7ffff6fc3700 (LWP 4712)]\n[Thread 1] getpid() = 4707\n[Thread 1] pthread_self() = 140737345505024\n[Process] getpid() = 4707\n[Process] pthread_self() = 140737353951040\n[Thread 0x7ffff77c4700 (LWP 4711) exited]\n[Thread 2] getpid() = 4707\n[Thread 2] pthread_self() = 140737337112320\n[Thread 0x7ffff6fc3700 (LWP 4712) exited]\n[Inferior 1 (process 4707) exited normally]\n(gdb) \n</code></pre>\n"}, {"tags": ["c", "sdl"], "comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1546349816, "post_id": 53995818, "comment_id": 94829090, "body": "&quot; //all appropriate includes are there&quot;, please type them for us and make a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1546358502, "post_id": 53995818, "comment_id": 94830950, "body": "Please elaborate what keeps you from doing exactly as you described: Use the code which you currently use to make one rectangle inside a loop to do several. You are aware which code that is, aren&#39;t you? Can you highlight that part of the code, e.g. with comments &quot;rectangle start&quot; and &quot;rectangle end&quot;?"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1546358626, "post_id": 53995818, "comment_id": 94830989, "body": "The code you show demonstrates how you successfully create a single rectangle, doesn&#39;t it? Could you show your (unsuccessful) attempt to create multiple? Try to make a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of that."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 9592689, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5jSsws8K4n4/AAAAAAAAAAI/AAAAAAAAALo/ECQJO2EzPq8/photo.jpg?sz=128", "display_name": "Siddharth Murpani", "link": "https://stackoverflow.com/users/9592689/siddharth-murpani"}, "is_accepted": false, "score": 1, "last_activity_date": 1546361231, "last_edit_date": 1546361231, "creation_date": 1546360501, "answer_id": 53997124, "question_id": 53995818, "link": "https://stackoverflow.com/questions/53995818/creating-multiple-rectangles-using-sdl-rect/53997124#53997124", "title": "Creating multiple rectangles using SDL_Rect", "body": "<p>The mistake was the fact that my random number generation formula with CreateRectanglesX() and CreateRectanglesY was wrong. It was </p>\n\n<pre><code>v = rand() / (x_max - x_min) / RAND_MAX + x_min;\n</code></pre>\n\n<p>Should have been: </p>\n\n<pre><code>v = rand() * (x_max - x_min) / RAND_MAX + x_min; \n</code></pre>\n\n<p>Only one rectangle was being displayed because the random numbers being produced with the random generation function were too close (due to wrong formula). Fixing the formula resolved the issue! </p>\n"}], "owner": {"reputation": 11, "user_id": 9592689, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5jSsws8K4n4/AAAAAAAAAAI/AAAAAAAAALo/ECQJO2EzPq8/photo.jpg?sz=128", "display_name": "Siddharth Murpani", "link": "https://stackoverflow.com/users/9592689/siddharth-murpani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 519, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1546361231, "creation_date": 1546349242, "last_edit_date": 1546360521, "question_id": 53995818, "link": "https://stackoverflow.com/questions/53995818/creating-multiple-rectangles-using-sdl-rect", "title": "Creating multiple rectangles using SDL_Rect", "body": "<p>I'm creating a simulation for Conway's game of life using C and SDL. To represent the alive cells I would like to create multiple rectangles in the window which I have created. Is there any way to call SDL_Rect in a for loop without redefintion of SDL_Rect and output the result of the for loop all on the same renderer? Thank you. </p>\n\n<p>My Code: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n#include &lt;stdbool.h&gt;\n#include &lt;SDL.h&gt;\n#define main SDL_main\n#undef main\n\ndouble CreateRectanglesX()\n{   \n    double x; double x_max = 640; double x_min = 20;\n    x = rand() / (x_max - x_min) / (double)RAND_MAX + x_min;\n    return x;\n}\n\ndouble CreateRectanglesY()\n{\n    double y; double y_max = 480; double y_min = 20; \n    y = rand() / (y_max - y_min) / (double)RAND_MAX + y_min;\n    return y; \n}\n\nint main(int argc, char* argv[])\n{\n    SDL_Init(SDL_INIT_VIDEO); //initializes the SDL/SDL2 window\n\n    SDL_Window *screen; //SDL window created with pointer \n    screen = SDL_CreateWindow(\"My Program Window\", SDL_WINDOWPOS_UNDEFINED, SDL_WINDOWPOS_UNDEFINED, 640, 480, SDL_WINDOW_OPENGL); \n    //definition for pointer - dimensions of SDL window\n\n    SDL_Renderer *renderer; //Renderer created with pointer\n    renderer = SDL_CreateRenderer(screen, -1, SDL_RENDERER_ACCELERATED); //definition for pointer - still to learn\n\n    if (screen == NULL) //checks if window exists or not\n    {\n        printf(\"Could not create window: %s\\n\", SDL_GetError()); //returns error if window doesn't exsit\n        return 1;\n    } \n\n    SDL_SetRenderDrawColor(renderer, 0, 0, 0, 255); //changes color of renderer\n    SDL_RenderClear(renderer); \n    SDL_RenderPresent(renderer); //displays the renderer with the changed color\n\n    for (int i = 0; i &lt; 5; i++)\n    {\n        double x = CreateRectanglesX();\n        double y = CreateRectanglesY();\n        printf(\"%lf %lf\", x, y);\n        SDL_Rect a;\n        a.x = x;\n        a.y = y;\n        a.w = 20;\n        a.h = 20;\n        SDL_SetRenderDrawColor(renderer, 0, 0, 255, 255);\n        SDL_RenderFillRect(renderer, &amp;a);\n        SDL_RenderPresent(renderer);\n    }\n\n    SDL_Delay(5000); //wait time for window\n    SDL_DestroyWindow(screen);\n    SDL_QUIT;\n\n    return EXIT_SUCCESS;\n}\n</code></pre>\n"}, {"tags": ["c", "realloc"], "comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1546348300, "post_id": 53995550, "comment_id": 94828751, "body": "Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, along with sample input which provokes the misbehaviour. Ideally find a text input, otherwise describe the (hopefully few) non-text parts of the needed input."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1546350235, "post_id": 53995550, "comment_id": 94829182, "body": "This sample code would be easier to read if everything would be named in English. However, I believe there are two main reasons why a <code>realloc()</code> may fail: 1.) the amount of memory to allocate is not available 2.) the pointer to memory for realloc doesn&#39;t result from a previous allocation and isn&#39;t <code>NULL</code>. These are the things I would check in debugger first."}], "answers": [{"tags": [], "owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "is_accepted": false, "score": 2, "last_activity_date": 1546350108, "creation_date": 1546350108, "answer_id": 53995935, "question_id": 53995550, "link": "https://stackoverflow.com/questions/53995550/realloc-crashes-my-program-in-reading-binary-file-function/53995935#53995935", "title": "Realloc crashes my program in reading binary file function", "body": "<p>Among possible reasons</p>\n\n<ul>\n<li><em>vetorEmprestimos</em> is not initialized when you call the realloc</li>\n<li><em>vetorEmprestimos</em> point to the stack when you call the realloc</li>\n<li><em>vetorEmprestimos</em> point to a constant memory area  when you call the realloc</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 2, "last_activity_date": 1546364029, "last_edit_date": 1592644375, "creation_date": 1546360541, "answer_id": 53997130, "question_id": 53995550, "link": "https://stackoverflow.com/questions/53995550/realloc-crashes-my-program-in-reading-binary-file-function/53997130#53997130", "title": "Realloc crashes my program in reading binary file function", "body": "<blockquote>\n<p>I just can't find anything wrong</p>\n</blockquote>\n<p><strong>Save time</strong>, let the compiler help you.</p>\n<p>Good compilers, fully enabled, will complain about all sorts of things:</p>\n<pre><code>In function 'lerFichBin_Emprestimos':\nwarning: conversion to 'int' from 'size_t {aka long unsigned int}' may alter its value [-Wconversion]\n     quantlidos = fread(&amp;quantEmprestimos, sizeof(int), 1, ficheiro);\n                  ^~~~~\nwarning: conversion to 'long unsigned int' from 'int' may change the sign of the result [-Wsign-conversion]\n         (*quantEmprestimos) * sizeof(tipoEmprestimo));\n                             ^\nwarning: conversion to 'size_t {aka long unsigned int}' from 'int' may change the sign of the result [-Wsign-conversion]\n           *quantEmprestimos, ficheiro);\n           ^\nwarning: conversion to 'int' from 'size_t {aka long unsigned int}' may alter its value [-Wconversion]\n       quantlidos = fread(vetorEmprestimos, sizeof(tipoEmprestimo),\n                    ^~~~~\nFinished building: ../round.c\n</code></pre>\n<p>Fixing the above may/may not solve your issue but it demonstrates that good coding practices were first employed before turning to Stackoverflow.</p>\n<hr />\n<h2>Why read a pointer?</h2>\n<p>The below is trying to read a pointer and not an <code>int</code>.  This is a huge coding mistake.</p>\n<pre><code>int *quantEmprestimos\n...\n... fread(&amp;quantEmprestimos, ...\n</code></pre>\n<p>Certainly code should read an <code>int</code>.</p>\n<pre><code>//        v--------No &amp; \n... fread( quantEmprestimos, ...\n</code></pre>\n<p><strong>Avoid explicit types</strong></p>\n<p>Rather than code types and perhaps get it wrong - as OP did, use the size of the referenced object.</p>\n<pre><code>//               points to an `int *`, mis-matched size\n// quantlidos=fread(&amp;quantEmprestimos, sizeof(int),1,ficheiro);\n\n//                                   matched size                 \nquantlidos = fread(quantEmprestimos, sizeof *quantEmprestimos, 1, ficheiro);\n</code></pre>\n<hr />\n<p><strong>Rethink error handling</strong></p>\n<p>Should <code>fread()</code> not return 1, what is the value of <code>quantEmprestimos</code> used in <code>realloc()</code>?  On error, code still uses <code>quantEmprestimos</code>.  <code>stdio</code> is often line  buffered and thus the lack of an error message is not an indication of success.  Use <strong>stderr</strong> for error output as it is flushed on each write.</p>\n<blockquote class=\"spoiler\">\n<p> <code>quantEmprestimos</code> is uninitialized - could be anything!</p>\n</blockquote>\n<pre><code>// OP's code with problems\nquantlidos = fread(&amp;quantEmprestimos, sizeof(int), 1, ficheiro);\nif (quantlidos != 1) {\n  printf(&quot;\\nErro ao ler ficheiro!&quot;);\n}\nvetorEmprestimos = realloc(vetorEmprestimos, (*quantEmprestimos) * sizeof(tipoEmprestimo));\n</code></pre>\n<p>Alternative code</p>\n<pre><code>quantlidos = fread(quantEmprestimos, sizeof *quantEmprestimos, 1, ficheiro);\nif (quantlidos != 1) {\n  // printf(&quot;\\nErro ao ler ficheiro!&quot;);\n  fprintf(stderr, &quot;\\nErro ao ler ficheiro!&quot;);\n  exit(EXIT_FAILURE);  // or do something other than continue on.\n}\nvetorEmprestimos = realloc(vetorEmprestimos, sizeof *vetorEmprestimos * *quantEmprestimos);\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 10854324, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-kiJBD2rJvAA/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYSszk9pq8GP4m396KKXEAe_9y5VQ/mo/photo.jpg?sz=128", "display_name": "Gon&#231;alo C", "link": "https://stackoverflow.com/users/10854324/gon%c3%a7alo-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "closed_date": 1546376230, "answer_count": 2, "score": 0, "last_activity_date": 1546364029, "creation_date": 1546346762, "question_id": 53995550, "link": "https://stackoverflow.com/questions/53995550/realloc-crashes-my-program-in-reading-binary-file-function", "closed_reason": "Not suitable for this site", "title": "Realloc crashes my program in reading binary file function", "body": "<p>So i have this fuction in C to read data from a binary file to a dynamic array. When i run it it crashes, i tried to put some printf to know where it is stuck and seems like it's when I try to do a realloc. \nI just can't find anything wrong. Hope somebody can help me.</p>\n\n<pre><code>tipoEmprestimo *lerFichBin_Emprestimos(tipoEmprestimo *vetorEmprestimos,int *quantEmprestimos)\n{\n    int quantlidos;\n    FILE *ficheiro;\n\n\n    ficheiro=fopen(\"emprestimos.dat\",\"rb\");\n\n    if (ficheiro == NULL)\n    {\n        printf(\"\\nNao foi possivel ler o ficheiro!\");\n        free(vetorEmprestimos);\n        vetorEmprestimos=NULL;\n        *quantEmprestimos=0;\n    }\n    else\n    {\n\n        quantlidos=fread(&amp;quantEmprestimos,sizeof(int),1,ficheiro);\n        if (quantlidos != 1)\n        {\n            printf(\"\\nErro ao ler ficheiro!\");\n        }\n        vetorEmprestimos=realloc(vetorEmprestimos,(*quantEmprestimos)*sizeof(tipoEmprestimo));\n\n\n        if (vetorEmprestimos == NULL)\n        {\n            printf(\"\\nErro ao reservar memoria!\");\n\n        }\n        else\n        {\n\n            quantlidos=fread(vetorEmprestimos,sizeof(tipoEmprestimo),*quantEmprestimos,ficheiro);\n            if(quantlidos != *quantEmprestimos)\n            {\n                printf(\"\\nErro ao ler ficheiro!\");\n            }\n        }\n\n    }\n    fclose(ficheiro);\nreturn vetorEmprestimos;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 9095, "user_id": 8542346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11b206b49cec657d28a5876f8330780e?s=128&d=identicon&r=PG&f=1", "display_name": "H.S.", "link": "https://stackoverflow.com/users/8542346/h-s"}, "edited": false, "score": 0, "creation_date": 1546340042, "post_id": 53994808, "comment_id": 94827051, "body": "Comparing an integer with a pointer -&gt; <code>(*nNumArray &lt;= &amp;nNumArray[nSize-1])</code>. This is incorrect."}], "answers": [{"tags": [], "owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "is_accepted": false, "score": 2, "last_activity_date": 1546340464, "last_edit_date": 1546340464, "creation_date": 1546340033, "answer_id": 53994856, "question_id": 53994808, "link": "https://stackoverflow.com/questions/53994808/pointers-and-arrays-without-using-index/53994856#53994856", "title": "Pointers and arrays without using index", "body": "<p>\"which works perfectly\" : this is impossible</p>\n\n<p><code>(*nNumArray &lt;= &amp;nNumArray[nSize-1])</code> : you compare an <em>int</em> into the vector (and later outside it) and an address of an <em>int</em> into the vector ( and in fact after its end). A priori your compiler signal the error</p>\n\n<p>Furthermore <code>&amp;nNumArray[nSize-1]</code> will not be the end of the vector after the first loop because you modify <em>nNumArray</em> </p>\n\n<p>If you want to use a pointer you can use an other variable to store it to not modify <em>nNumArray</em>, and to change test like <code>(ptr &lt;= &amp;nNumArray[nSize-1])</code> :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint sumArray(int nNumArray[], int nSize)\n{\n    int nSum = 0;\n    int * ptr = nNumArray;\n\n    while(ptr &lt;= &amp;nNumArray[nSize-1])\n    {\n        nSum += *ptr++;\n    }\n    return nSum;\n}\n\nint main()\n{\n  int a[3] = {1,2,3};\n\n  printf(\"%d\\n\", sumArray(a, 3));\n  return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9095, "user_id": 8542346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11b206b49cec657d28a5876f8330780e?s=128&d=identicon&r=PG&f=1", "display_name": "H.S.", "link": "https://stackoverflow.com/users/8542346/h-s"}, "is_accepted": false, "score": 2, "last_activity_date": 1546340248, "creation_date": 1546340248, "answer_id": 53994885, "question_id": 53994808, "link": "https://stackoverflow.com/questions/53994808/pointers-and-arrays-without-using-index/53994885#53994885", "title": "Pointers and arrays without using index", "body": "<p>The <code>while</code> loop condition is incorrect:</p>\n\n<pre><code>while(*nNumArray &lt;= &amp;nNumArray[nSize-1])\n</code></pre>\n\n<p>because you are comparing an integer <code>(*nNumArray)</code> with a pointer <code>(&amp;nNumArray[nSize-1])</code>. Compiler must be giving warning message on this statement.</p>\n\n<p>Instead, you can do:</p>\n\n<pre><code>int sumArray(int nNumArray[], int nSize)\n{\n    int nSum = 0;\n\n    while(nSize--)\n    {\n        nSum += *nNumArray;\n        nNumArray++;\n    }\n    return nSum;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 10854077, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-IvcYi-kZEZs/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcaGz9JGR9g-OEOs3qnPUA33dGHBRQ/mo/photo.jpg?sz=128", "display_name": "Roy Azami", "link": "https://stackoverflow.com/users/10854077/roy-azami"}, "edited": false, "score": 0, "creation_date": 1546427442, "post_id": 53996027, "comment_id": 94847190, "body": "Compiler doesn&#39;t show any errors to my code, and running it gives the result expected in every situation I tried. However, I can&#39;t understand why it is working,  If I change the code according to what your said, (the way I wrote it down at first) the code did not work properly."}, {"owner": {"reputation": 11, "user_id": 9667751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cd91c0763e2fa53002d7813a91eb95d?s=128&d=identicon&r=PG&f=1", "display_name": "Absnormal", "link": "https://stackoverflow.com/users/9667751/absnormal"}, "reply_to_user": {"reputation": 11, "user_id": 10854077, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-IvcYi-kZEZs/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcaGz9JGR9g-OEOs3qnPUA33dGHBRQ/mo/photo.jpg?sz=128", "display_name": "Roy Azami", "link": "https://stackoverflow.com/users/10854077/roy-azami"}, "edited": false, "score": 0, "creation_date": 1546436182, "post_id": 53996027, "comment_id": 94851211, "body": "I&#39;ve tried to run your code, but I got a warning about comparison between integer and pointer, I can&#39;t understand why it is working on your computer, maybe someone else can help you further. And I revised some expression mistake about the compiler and made a little edit about my code, hope you can understand it more better."}], "tags": [], "owner": {"reputation": 11, "user_id": 9667751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cd91c0763e2fa53002d7813a91eb95d?s=128&d=identicon&r=PG&f=1", "display_name": "Absnormal", "link": "https://stackoverflow.com/users/9667751/absnormal"}, "is_accepted": false, "score": 1, "last_activity_date": 1546435236, "last_edit_date": 1546435236, "creation_date": 1546350884, "answer_id": 53996027, "question_id": 53994808, "link": "https://stackoverflow.com/questions/53994808/pointers-and-arrays-without-using-index/53996027#53996027", "title": "Pointers and arrays without using index", "body": "<p><strong>First error</strong> here : </p>\n\n<p><code>(*nNumArray &lt;= &amp;nNumArray[nSize-1])</code></p>\n\n<p>The name of the array variable itself is considered as a pointer in C, thus <code>*nNumArray</code> represents the reference of an pointer.</p>\n\n<p>It should be <code>nNumArray</code> to make it compare the address.</p>\n\n<p><strong>Second error</strong> :</p>\n\n<p>It won't work perfectly if only the first error is fixed. </p>\n\n<p>The index operation works like this :</p>\n\n<p><code>&amp;nNumArray[nSize-1]</code> works the same as <code>nNumArray + nSize - 1</code></p>\n\n<p>Thus the while loop might looks like this :</p>\n\n<pre><code>while(nNumArray &lt;= nNumArray + nSize - 1){\n    nSum += *nNumArray;\n    nNumArray++;\n}\n</code></pre>\n\n<p>(This might makes it more simple to see where is wrong)</p>\n\n<p>The while loop will run forever until <code>*nNumArray</code> accessed an <em>int</em> which is out of the array that causes a segmentation fault.</p>\n\n<p>You might want to do it by using another pointer to compare with <code>nNumArray + nSize - 1</code>, and the whole <code>sumArray</code> function should look like this: </p>\n\n<pre><code>int sumArray(int nNumArray[], int nSize)\n{\n    int nSum = 0;\n    int *ptr = nNumArray;\n    while(ptr &lt;= nNumArray + nSize - 1)\n    {\n        nSum += *ptr;\n        ptr++;\n    }\n    return nSum;\n}\n</code></pre>\n\n<p>And now it should work perfectly :)</p>\n"}], "owner": {"reputation": 11, "user_id": 10854077, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-IvcYi-kZEZs/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcaGz9JGR9g-OEOs3qnPUA33dGHBRQ/mo/photo.jpg?sz=128", "display_name": "Roy Azami", "link": "https://stackoverflow.com/users/10854077/roy-azami"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1546435236, "creation_date": 1546339331, "question_id": 53994808, "link": "https://stackoverflow.com/questions/53994808/pointers-and-arrays-without-using-index", "title": "Pointers and arrays without using index", "body": "<p>I have been asked to sum up an int array and return the sum not using index.\n(function needs to get the array and the size)</p>\n\n<p>I know I should've set a pointer to the array and compare the pointer to the array address and use pointer++ to run over the array.</p>\n\n<p>Tho, I wrote down the following code :</p>\n\n<pre><code>int sumArray(int nNumArray[], int nSize)\n{\n    int nSum = 0;\n\n    while(*nNumArray &lt;= &amp;nNumArray[nSize-1])\n    {\n        nSum += *nNumArray;\n        nNumArray++;\n    }\n    return nSum;\n}\n</code></pre>\n\n<p>which works perfectly,</p>\n\n<p>thing is *nNumArray is referring to values and &amp;nNumArray[nSize-1] is referring to an address.</p>\n\n<p>I'm trying to understand how come this way works.</p>\n\n<p>Will appreciate some insights. Thanks.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1546354160, "post_id": 53994635, "comment_id": 94830054, "body": "The error message means you\u2019re using the dot operator where you should be using the arrow operator, or vice versa."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1546366863, "post_id": 53994635, "comment_id": 94832854, "body": "Please use Copy&amp;Paste to show us the text error messages. They are no artwork and don&#39;t need to be shown as images."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1546390381, "post_id": 53994635, "comment_id": 94837172, "body": "the <code>set1</code> does not compile.  How are we to advise you on run-time logic when you do not post code that compiles?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1546390613, "post_id": 53994635, "comment_id": 94837216, "body": "the <code>set2</code> results in the compiler giving two (serious) warnings: <code>untitled.c:17:18: warning: format \u2018%s\u2019 expects argument of type \u2018char *\u2019, but argument 2 has type \u2018char (*)[10]\u2019 [-Wformat=]</code> and <code>untitled.c:24:19: warning: format \u2018%s\u2019 expects argument of type \u2018char *\u2019, but argument 2 has type \u2018ak * {aka struct &lt;anonymous&gt; *}\u2019 [-Wformat=]</code>  Both of these problems need to be corrected, or the code will not act as desired when run"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1546390751, "post_id": 53994635, "comment_id": 94837238, "body": "OT: the struct definition is missing a &#39;tag&#39; name.  Without a &#39;tag&#39; name, most debuggers will not display the individual fields in the struct."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1546390995, "post_id": 53994635, "comment_id": 94837282, "body": "OT:  regarding: <code>scanf(&quot;%s&quot;,&amp;p[i].str);</code>  1) always check the returned value (not the parameter values) to assure the operation was successful.  2) when using the input format specifiers &#39;%s&#39; and/or &#39;%[...]&#39;  always include a MAX CHARACTERS modifier that is 1 less than the length of the input buffer because those specifiers always append a NUL byte to the end of the input.  This also assures that the buffer cannot be overrun with the resulting undefined behavior"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1546391157, "post_id": 53994635, "comment_id": 94837338, "body": "regarding: <code>scanf(&quot;%s&quot;,&amp;p[i].str);</code>  the field <code>str[]</code> is an array  referencing an array results in the address of the first byte of the array, so this statement should be: <code>scanf(&quot;%9s&quot;,p[i].str);</code> similar considerations need to be applied to all the calls to <code>scanf()</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1546391305, "post_id": 53994635, "comment_id": 94837365, "body": "regarding: <code>printf(&quot;%s\\n&quot;,s[i]);  this is trying to pass the whole struct instance to a &#39;%s&#39; output format specifier.  This will not work.  Suggest: </code>printf(&quot;%s\\n&quot;,s[i]-&gt;str);"}], "answers": [{"comments": [{"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1546340792, "post_id": 53994709, "comment_id": 94827185, "body": "@AthulKrishnan do you understand the problems ?"}], "tags": [], "owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "is_accepted": false, "score": 2, "last_activity_date": 1546409587, "last_edit_date": 1546409587, "creation_date": 1546338345, "answer_id": 53994709, "question_id": 53994635, "link": "https://stackoverflow.com/questions/53994635/how-to-use-array-of-pointers-to-print-structure-entities/53994709#53994709", "title": "How to use array of pointers to print structure entities?", "body": "<p>Concerning set1 and your problems with <code>printf(\"%s\\n\",*s[i].id);</code>.</p>\n\n<p><code>*s[i].id</code> is equivalent to <code>*(s[i].id)</code>, not to <code>(*s[i]).id</code> as you probably supposed. Because the type of <code>s[i]</code> is <code>ak *</code> you cannot get its field <em>id</em> through <code>s[i].id</code>.</p>\n\n<p>You can write <code>(*s[i]).id</code> but a more readable way is to use <code>s[i]-&gt;id</code>.</p>\n\n<p>Your <em>printf</em> has an other problem, the format cannot be <code>\"%s\"</code> because <code>s[i]-&gt;id</code> is an <em>int</em>, not a <em>char *</em></p>\n\n<hr>\n\n<p>Concerning set2</p>\n\n<p>You do <code>printf(\"%s\\n\",s[i]);</code>, and you are surprised because only the string is printed, how can you expect that print the string <em>and</em> the int ? </p>\n\n<p>You request to print a string (format <code>%s</code>) but <code>s[i]</code> is not a string. By <em>chance</em> the <em>struct</em> starts by the field <em>str</em> being a string, so yes you write it, but this is not the right way.</p>\n\n<p>You have to explicitly print each attributes, for instance doing <code>printf(\"%s %d\\n\",s[i]-&gt;str, s[i]-&gt;id);</code></p>\n"}], "owner": {"reputation": 31, "user_id": 8618549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff5f68820d71d8deedcd41c9c45a84bd?s=128&d=identicon&r=PG&f=1", "display_name": "Athul Krishnan", "link": "https://stackoverflow.com/users/8618549/athul-krishnan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1546409587, "creation_date": 1546337648, "last_edit_date": 1546357855, "question_id": 53994635, "link": "https://stackoverflow.com/questions/53994635/how-to-use-array-of-pointers-to-print-structure-entities", "title": "How to use array of pointers to print structure entities?", "body": "<p>I wrote a program in C which has a structure named <code>ak</code>. \nThere is an array of pointers <code>s</code> which stores the address of array <code>p</code> of ak type. After inputting the values, only <code>str</code> is getting printed.</p>\n\n<p>How can I print both <code>str</code> and <code>id</code> using array of pointers?  </p>\n\n<p>set 1:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\ntypedef struct\n{\n    char str[10];\n    int id;\n}ak;\n\nint main()\n{   \n    printf(\"Hey\\n\"); \n    int i;\n    ak *s[5],p[5];\n    for(i=0;i&lt;5;i++)\n    {\n        s[i]=&amp;p[i];\n        printf(\"Input string:\");\n        scanf(\"%s\",&amp;p[i].str);\n        printf(\"Input id:\");\n        scanf(\"%d\",&amp;p[i].id);\n    }    \n    i=0;\n    while(i&lt;5)\n    {\n        printf(\"%s\\n\",s[i].id);\n        ++i;\n    } \n    return 0;   \n}\n</code></pre>\n\n<p>set 2:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\ntypedef struct\n{\n    char str[10];\n    int id;\n}ak;\n\nint main()\n{  \n    printf(\"Hey\\n\"); \n    int i;\n    ak *s[5],p[5];\n    for(i=0;i&lt;5;i++)\n    {\n         s[i]=&amp;p[i];\n         printf(\"Input string:\");\n         scanf(\"%s\",&amp;p[i].str);\n         printf(\"Input id:\");\n         scanf(\"%d\",&amp;p[i].id);\n    }    \n    i=0;\n    while(i&lt;5)\n    {\n         printf(\"%s\\n\",s[i]);\n         ++i;\n    }\n    return 0;    \n}\n</code></pre>\n\n<p>So when I tried set1 code,it gave me error saying: </p>\n\n<pre><code>C:\\CPP\\c\\Prototypes&gt;gcc -o ct structure.c\nstructure.c: In function 'main':\nstructure.c:22:32: error: request for member 'id' in something not a structure or union\n\n       printf(\"%s\\n\",*s[i].id);\n                          ^ \n</code></pre>\n\n<p>Screenshot is here:</p>\n\n<p><a href=\"https://imageshack.com/a/img921/3084/j1rHig.png\" rel=\"nofollow noreferrer\">https://imageshack.com/a/img921/3084/j1rHig.png</a></p>\n\n<p>When I tried set2 code, it only printed str values.\nscreenshot is here:</p>\n\n<p><a href=\"https://imageshack.com/a/img922/614/JHSGZ9.png\" rel=\"nofollow noreferrer\">https://imageshack.com/a/img922/614/JHSGZ9.png</a></p>\n"}, {"tags": ["c"], "answers": [{"tags": [], "owner": {"reputation": 43502, "user_id": 377953, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hm9UN.jpg?s=128&g=1", "display_name": "taskinoor", "link": "https://stackoverflow.com/users/377953/taskinoor"}, "is_accepted": false, "score": 1, "last_activity_date": 1546332634, "creation_date": 1546332634, "answer_id": 53994151, "question_id": 53994115, "link": "https://stackoverflow.com/questions/53994115/dumping-a-int32-array-into-a-bin-file/53994151#53994151", "title": "Dumping a INT32 array into a .bin file", "body": "<p>No, it is not the right way if you plan to transfer the file to a different machine and read it as you haven't considered the <a href=\"https://en.wikipedia.org/wiki/Endianness\" rel=\"nofollow noreferrer\">Endianness</a>. Let's say the file is:</p>\n\n<ol>\n<li>Written in little endian machine but read in big endian machine</li>\n<li>Written in big endian machine but read in little endian machine</li>\n</ol>\n\n<p>It won't work for none of the cases above.</p>\n"}, {"tags": [], "owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "is_accepted": false, "score": 0, "last_activity_date": 1546332992, "creation_date": 1546332992, "answer_id": 53994186, "question_id": 53994115, "link": "https://stackoverflow.com/questions/53994115/dumping-a-int32-array-into-a-bin-file/53994186#53994186", "title": "Dumping a INT32 array into a .bin file", "body": "<p>Out of the order of the bytes signaled by askinoor, that way is not generic because the reader have to now it is an <code>INT32[6][12]</code> when it read it</p>\n\n<p>Why the useless variables <code>var_row_index</code> etc in your program ?</p>\n"}, {"tags": [], "owner": {"reputation": 877, "user_id": 1997006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79f0a9e0bec4f690f2afd2e8966eee35?s=128&d=identicon&r=PG", "display_name": "idoby", "link": "https://stackoverflow.com/users/1997006/idoby"}, "is_accepted": false, "score": 0, "last_activity_date": 1546538347, "creation_date": 1546538347, "answer_id": 54027461, "question_id": 53994115, "link": "https://stackoverflow.com/questions/53994115/dumping-a-int32-array-into-a-bin-file/54027461#54027461", "title": "Dumping a INT32 array into a .bin file", "body": "<p>As already mentioned, when serializing data in and out of the CPU it is preferable to force network byte order. This can be done easily using functions like <code>htonl()</code>, which should be available on most platforms (and compile down to nothing on big endian machines).</p>\n\n<p>Here's the doc from Linux:\n<a href=\"https://linux.die.net/man/3/htonl\" rel=\"nofollow noreferrer\">https://linux.die.net/man/3/htonl</a></p>\n\n<p>Also, it's not good practice to explicitly code sizes and types into your program.\nUse <code>sizeof(array[0][0])</code> to get the size of the element type of <code>array</code>, then iterate over it and use <code>htonl()</code> to write each element to the file.</p>\n"}], "owner": {"reputation": 21, "user_id": 3369977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b0ef91c8fa8c528d636da0c760ef886?s=128&d=identicon&r=PG&f=1", "display_name": "Archana Charati", "link": "https://stackoverflow.com/users/3369977/archana-charati"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1546538347, "creation_date": 1546332140, "question_id": 53994115, "link": "https://stackoverflow.com/questions/53994115/dumping-a-int32-array-into-a-bin-file", "title": "Dumping a INT32 array into a .bin file", "body": "<p>I have the array defined as below</p>\n\n<pre><code>INT32 LUT_OffsetValues[6][12] = {\n0,180,360,540,720,900,1080,1260,1440,1620,1800,1980,\n2160,2340,2520,2700,2880,3060,3240,3420,3600,3780,3960,4140,\n4320,4500,4680,4860,5040,5220,5400,5580,5760,5940,6120,6300,\n6480,6660,6840,7020,7200,7380,7560,7740,7920,8100,8280,8460,\n8640,8820,9000,9180,9360,9540,9720,9900,10080,10260,10440,10620,\n10800,10980,11160,11340,11520,11700,11880,12060,12240,12420,12600,12780\n};\n\nint main(int argc,char *argv[])\n{\n int var_row_index = 4 ;\nint var_column_index = 5 ;\nint computed_val = 0 ;\nFILE *fp = NULL ;\n\nfp = fopen(\"./LUT_Offset.bin\",\"wb\");\nif(NULL != fp)\n{\n    fwrite(LUT_OffsetValues,sizeof(INT32),72,fp);\n    fclose(fp);\n}\n\nprintf(\"Size of Array:%d\\n\",sizeof(LUT_OffsetValues));\n//computed_val  =  LUT_OffsetValues[var_row_index][var_column_index];\nreturn 0;\n}\n</code></pre>\n\n<p>Above is the code snippet with which I have generated the .bin file. Is that the right way of doing it?</p>\n"}, {"tags": ["c", "cmake", "project"], "comments": [{"owner": {"reputation": 1211, "user_id": 1509809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2be13fa9f78f64b8f3ca00f7d1c988d?s=128&d=identicon&r=PG", "display_name": "thuyein", "link": "https://stackoverflow.com/users/1509809/thuyein"}, "edited": false, "score": 1, "creation_date": 1546331788, "post_id": 53994016, "comment_id": 94825697, "body": "Is there a reason why you need to access the root project name? Normally I just call the root project &quot;xproject&quot; and the tests project will be simply &quot;xproject-test&quot;"}, {"owner": {"reputation": 425, "user_id": 7730917, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--cnzqh5_Ylk/AAAAAAAAAAI/AAAAAAAAABo/m03tAzH7Z48/photo.jpg?sz=128", "display_name": "tjysdsg", "link": "https://stackoverflow.com/users/7730917/tjysdsg"}, "reply_to_user": {"reputation": 1211, "user_id": 1509809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2be13fa9f78f64b8f3ca00f7d1c988d?s=128&d=identicon&r=PG", "display_name": "thuyein", "link": "https://stackoverflow.com/users/1509809/thuyein"}, "edited": false, "score": 0, "creation_date": 1546332765, "post_id": 53994016, "comment_id": 94825850, "body": "@ThuYeinTun Because I may want to change the name in the future, and I prefer changing it only once while taking effect across the project"}], "answers": [{"comments": [{"owner": {"reputation": 425, "user_id": 7730917, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--cnzqh5_Ylk/AAAAAAAAAAI/AAAAAAAAABo/m03tAzH7Z48/photo.jpg?sz=128", "display_name": "tjysdsg", "link": "https://stackoverflow.com/users/7730917/tjysdsg"}, "edited": false, "score": 0, "creation_date": 1546335961, "post_id": 53994428, "comment_id": 94826354, "body": "According to the document, it says <code>the name of the current project.</code>. But I have another project in <code>test&#47;CMakeLists.txt</code>. So this won&#39;t work, will it?"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 425, "user_id": 7730917, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--cnzqh5_Ylk/AAAAAAAAAAI/AAAAAAAAABo/m03tAzH7Z48/photo.jpg?sz=128", "display_name": "tjysdsg", "link": "https://stackoverflow.com/users/7730917/tjysdsg"}, "edited": false, "score": 0, "creation_date": 1546336012, "post_id": 53994428, "comment_id": 94826363, "body": "@tjysdsg - Why would you define another project in <code>test</code>? Is it not the test directory of <code>cproj</code>? It&#39;s not standalone, is it?"}, {"owner": {"reputation": 425, "user_id": 7730917, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--cnzqh5_Ylk/AAAAAAAAAAI/AAAAAAAAABo/m03tAzH7Z48/photo.jpg?sz=128", "display_name": "tjysdsg", "link": "https://stackoverflow.com/users/7730917/tjysdsg"}, "edited": false, "score": 0, "creation_date": 1546336117, "post_id": 53994428, "comment_id": 94826382, "body": "I made test standalone, I just realized that&#39;s a stupid move"}, {"owner": {"reputation": 6790, "user_id": 1027706, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/ff91cf16cbd51dad8e48e2799f97e811?s=128&d=identicon&r=PG", "display_name": "Ad N", "link": "https://stackoverflow.com/users/1027706/ad-n"}, "edited": false, "score": 0, "creation_date": 1560937125, "post_id": 53994428, "comment_id": 99897374, "body": "Now, CMAKE_PROJECT_NAME is the name of the top level <code>project</code>, not the most recent: <a href=\"https://cmake.org/cmake/help/v3.14/variable/CMAKE_PROJECT_NAME.html#variable:CMAKE_PROJECT_NAME\" rel=\"nofollow noreferrer\">cmake.org/cmake/help/v3.14/variable/&hellip;</a>"}], "tags": [], "owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": true, "score": 3, "last_activity_date": 1546336261, "last_edit_date": 1546336261, "creation_date": 1546335797, "answer_id": 53994428, "question_id": 53994016, "link": "https://stackoverflow.com/questions/53994016/cmake-get-root-project-name/53994428#53994428", "title": "CMake: Get root project name", "body": "<p>If I gather your use case correctly, you should probably do as follows:</p>\n\n<ol>\n<li><p><code>test</code> is quite likely not a standalone sub-project. It should not have a <code>project</code> directive. If you remove it, it will now be under the <code>cproj</code> project.</p></li>\n<li><p>Now you looking for the project name you've set in the root, it should be available via the <a href=\"https://cmake.org/cmake/help/v3.0/variable/CMAKE_PROJECT_NAME.html#cmake-project-name\" rel=\"nofollow noreferrer\"><code>CMAKE_PROJECT_NAME</code></a> variable.</p></li>\n</ol>\n"}], "owner": {"reputation": 425, "user_id": 7730917, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--cnzqh5_Ylk/AAAAAAAAAAI/AAAAAAAAABo/m03tAzH7Z48/photo.jpg?sz=128", "display_name": "tjysdsg", "link": "https://stackoverflow.com/users/7730917/tjysdsg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 775, "favorite_count": 0, "accepted_answer_id": 53994428, "answer_count": 1, "score": 3, "last_activity_date": 1546336511, "creation_date": 1546330753, "last_edit_date": 1546336042, "question_id": 53994016, "link": "https://stackoverflow.com/questions/53994016/cmake-get-root-project-name", "title": "CMake: Get root project name", "body": "<p>Suppose I have following C project structure:</p>\n\n<pre><code>\u251c\u2500\u2500 CMakeLists.txt\n\u251c\u2500\u2500 include\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 header.h\n\u251c\u2500\u2500 README.md \n\u251c\u2500\u2500 src\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 src.c\n\u2514\u2500\u2500 test\n    \u251c\u2500\u2500 CMakeLists.txt\n    \u2514\u2500\u2500 test.c\n</code></pre>\n\n<p>The <code>CMakeLists.txt</code> in the root directory contains a project called <code>cproj</code></p>\n\n<pre><code>PROJECT(cproj C)\n</code></pre>\n\n<p>Also in <code>test/CMakeLists.txt</code>, I have another project</p>\n\n<pre><code>PROJECT(test C)\n</code></pre>\n\n<p>The question is how can I assess the project name <code>cproj</code> in the <code>CMakeLists.txt</code> in <code>test</code> directory?</p>\n"}, {"tags": ["c++", "c", "memory"], "comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1546328425, "post_id": 53993776, "comment_id": 94825125, "body": "<code>myarray[]</code> is not a pointer. It is actually nothing at all, because <code>myarray[]</code> is not an lvalue, it is just a declarator syntax. <code>myarray</code> is an array, <code>myarray[0]</code> is a pointer. <code>myarray[0]</code> points to the first element of a string literal. You get the size of a <code>thing</code> on <b>your</b> target system with <code>sizeof thing</code> - what does it say?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1546328696, "post_id": 53993776, "comment_id": 94825168, "body": "Remember to take into account that it is illegal, a compiler error, to assign a string literal (<code>const char []</code>) to a non-<code>const</code> pointer in modern C++."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1546329032, "post_id": 53993776, "comment_id": 94825228, "body": "And it is valid C, hence I believe the c++ tag is erroneous... but who knows. Also, what is <code>Char</code>?"}, {"owner": {"reputation": 3303, "user_id": 5859925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de386e94c47dfbffb5235306b1affc96?s=128&d=identicon&r=PG&f=1", "display_name": "Kunal Puri", "link": "https://stackoverflow.com/users/5859925/kunal-puri"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1546329427, "post_id": 53993776, "comment_id": 94825287, "body": "@AnttiHaapala I think OP meant to say <code>char</code>, not <b>Char</b>"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1546329685, "post_id": 53993776, "comment_id": 94825333, "body": "Then I guess that&#39;s one more thing that OP would like to clarify."}], "answers": [{"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1546328005, "post_id": 53993790, "comment_id": 94825058, "body": "C and C++ both place the null terminator."}, {"owner": {"reputation": 3303, "user_id": 5859925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de386e94c47dfbffb5235306b1affc96?s=128&d=identicon&r=PG&f=1", "display_name": "Kunal Puri", "link": "https://stackoverflow.com/users/5859925/kunal-puri"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1546328392, "post_id": 53993790, "comment_id": 94825122, "body": "@user4581301 After posting the answer, I just figured out that it is array of <code>char *</code>, not character array. Sorry for that."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1546328768, "post_id": 53993790, "comment_id": 94825183, "body": "@KunalPuri size of <code>char</code> is always 1 = 1 byte."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1546329086, "post_id": 53993790, "comment_id": 94825239, "body": "... but byte need not be 8 bits... it is nevertheless called a byte by the C standard."}, {"owner": {"reputation": 3303, "user_id": 5859925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de386e94c47dfbffb5235306b1affc96?s=128&d=identicon&r=PG&f=1", "display_name": "Kunal Puri", "link": "https://stackoverflow.com/users/5859925/kunal-puri"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1546329265, "post_id": 53993790, "comment_id": 94825265, "body": "@AnttiHaapala In CPP also, 1 byte means 8 bits as far as I know."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1546329450, "post_id": 53993790, "comment_id": 94825293, "body": "The classic Crays made pretty much everything 32 bits. This lead to much fun porting code. More reading  at <a href=\"https://stackoverflow.com/questions/2215445/are-there-machines-where-sizeofchar-1-or-at-least-char-bit-8\">Are there machines, where sizeof(char) != 1, or at least CHAR_BIT &gt; 8?</a>"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1546329544, "post_id": 53993790, "comment_id": 94825308, "body": "@KunalPuri now you&#39;ll know further: <i>&quot;The fundamental storage unit in the C ++ memory model is the byte. A byte is at least large enough to contain any member of the basic execution character set (5.3) and the eight-bit code units of the Unicode UTF-8 encoding form and is composed of a contiguous sequence of bits, the <b>number of which is implementation-defined.</b>&quot;</i>"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1546329621, "post_id": 53993790, "comment_id": 94825322, "body": "A C or C++ implementation may choose the number of bits in a byte but it may not change the identity byte === character type."}], "tags": [], "owner": {"reputation": 3303, "user_id": 5859925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de386e94c47dfbffb5235306b1affc96?s=128&d=identicon&r=PG&f=1", "display_name": "Kunal Puri", "link": "https://stackoverflow.com/users/5859925/kunal-puri"}, "is_accepted": true, "score": 1, "last_activity_date": 1546328290, "last_edit_date": 1546328290, "creation_date": 1546327956, "answer_id": 53993790, "question_id": 53993776, "link": "https://stackoverflow.com/questions/53993776/how-much-memory-allocation-there-will-be-in-the-pointer-array/53993790#53993790", "title": "How much Memory allocation there will be in the pointer array", "body": "<p>It depends on the OS Architecture. Because it is an array of <code>char *</code>, It will take size equivalent to one pointer in this case.</p>\n\n<p>For 32-bit addressing, it will take 4 bytes.</p>\n\n<p>For 64-bit addressing, it will take 8 bytes.</p>\n"}], "owner": {"reputation": 1399, "user_id": 1821361, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DnT7L.jpg?s=128&g=1", "display_name": "Abdul Rahman", "link": "https://stackoverflow.com/users/1821361/abdul-rahman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 1, "closed_date": 1546330000, "accepted_answer_id": 53993790, "answer_count": 1, "score": -1, "last_activity_date": 1546337531, "creation_date": 1546327777, "last_edit_date": 1546337531, "question_id": 53993776, "link": "https://stackoverflow.com/questions/53993776/how-much-memory-allocation-there-will-be-in-the-pointer-array", "closed_reason": "Needs details or clarity", "title": "How much Memory allocation there will be in the pointer array", "body": "<p>In the following statement:</p>\n\n<pre><code>char *myarray[] = {\"Amir\"};\n</code></pre>\n\n<p>For pointer myarray[], how many bytes of memory has been allocated?</p>\n"}, {"tags": ["c", "string", "pointers", "clang", "unions"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1546325789, "post_id": 53993312, "comment_id": 94824791, "body": "You tried walking on very thin ice and fell through."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1546326105, "post_id": 53993312, "comment_id": 94824831, "body": "Your compiler should have emitted diagnostic for all versions of your program. If it didn&#39;t, throw away your compiler and get a modern free one. If it did, fix your program so that the compiler no longer complains. It makes no sense to discuss behaviour of a program that doesn&#39;t compile cleanly. Always use <code>-Wall -Werror</code> or equivalent."}, {"owner": {"reputation": 373, "user_id": 1611665, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2015763aac6a23b776317d40b0bbb0f5?s=128&d=identicon&r=PG", "display_name": "Ajay MT", "link": "https://stackoverflow.com/users/1611665/ajay-mt"}, "edited": false, "score": 0, "creation_date": 1546326667, "post_id": 53993312, "comment_id": 94824895, "body": "I have edited my post. My program compiles without warnings and behaves the same."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1546328874, "post_id": 53993312, "comment_id": 94825199, "body": "Now your program just contains undefined behaviour. Some compilers will still warn you about it.  <code>strcpy(&amp;test.chr,...)</code> is only allowed to copy one character. The fact that <code>test</code> itself has larger size is irrelevant."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1546331798, "post_id": 53993312, "comment_id": 94825699, "body": "<code>printf(&quot;%s\\n&quot;, &amp;test);</code> causes undefined behaviour (the argument for <code>%s</code> must have type <code>char *</code> or <code>char const *</code>)"}], "answers": [{"comments": [{"owner": {"reputation": 373, "user_id": 1611665, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2015763aac6a23b776317d40b0bbb0f5?s=128&d=identicon&r=PG", "display_name": "Ajay MT", "link": "https://stackoverflow.com/users/1611665/ajay-mt"}, "edited": false, "score": 0, "creation_date": 1546324771, "post_id": 53993492, "comment_id": 94824668, "body": "Compiler warnings aside, why does <code>strcpy(&amp;test.chr, ...)</code> crash when <code>strcpy(&amp;test.num, ...)</code> doesn&#39;t, despite the fact that the two have the same address?"}, {"owner": {"reputation": 11619, "user_id": 5346306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsACH.jpg?s=128&g=1", "display_name": "Achal", "link": "https://stackoverflow.com/users/5346306/achal"}, "reply_to_user": {"reputation": 373, "user_id": 1611665, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2015763aac6a23b776317d40b0bbb0f5?s=128&d=identicon&r=PG", "display_name": "Ajay MT", "link": "https://stackoverflow.com/users/1611665/ajay-mt"}, "edited": false, "score": 0, "creation_date": 1546325345, "post_id": 53993492, "comment_id": 94824738, "body": "yes <code>&amp;test.num</code> and <code>&amp;test.chr</code> results in same address but what you are copying onto those address is wrong."}, {"owner": {"reputation": 11619, "user_id": 5346306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsACH.jpg?s=128&g=1", "display_name": "Achal", "link": "https://stackoverflow.com/users/5346306/achal"}, "reply_to_user": {"reputation": 373, "user_id": 1611665, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2015763aac6a23b776317d40b0bbb0f5?s=128&d=identicon&r=PG", "display_name": "Ajay MT", "link": "https://stackoverflow.com/users/1611665/ajay-mt"}, "edited": false, "score": 0, "creation_date": 1546325714, "post_id": 53993492, "comment_id": 94824781, "body": "This <code>printf(&quot;%s\\n&quot;, &amp;test);</code> is completely wrong. why <code>&amp;</code> ? If you want to print address of union, use <code>%p</code> not <code>%s</code>. Since <code>test.chr</code> is of <code>char</code> type not <code>char*</code> type you should use <code>%c</code>. for e.g  <code>strcpy(&amp;test.chr, &quot;t&quot;);  printf(&quot;%p\\n&quot;,(void*)&amp;test.chr); printf(&quot;%c\\n&quot;,test.chr);</code>"}, {"owner": {"reputation": 373, "user_id": 1611665, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2015763aac6a23b776317d40b0bbb0f5?s=128&d=identicon&r=PG", "display_name": "Ajay MT", "link": "https://stackoverflow.com/users/1611665/ajay-mt"}, "edited": false, "score": 0, "creation_date": 1546326295, "post_id": 53993492, "comment_id": 94824850, "body": "I understand how format specifiers work. I am not trying to print the address of the union, I am trying to print the bytes I have written to it as a string, so <code>printf(&quot;%s\\n&quot;, &amp;test)</code> is exactly what I intended. Here&#39;s my question: when I declare <code>doublechar test</code>, 8 bytes are allocated on the stack. I can write to these bytes and print out the result (<a href=\"https://gist.github.com/AjayMT/fbe3c6d662461bbe5e903940d2ce8d8a\" rel=\"nofollow noreferrer\">like so</a>), except with strcpy when I give it the address of a character. Why?"}], "tags": [], "owner": {"reputation": 11619, "user_id": 5346306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsACH.jpg?s=128&g=1", "display_name": "Achal", "link": "https://stackoverflow.com/users/5346306/achal"}, "is_accepted": false, "score": -1, "last_activity_date": 1546325984, "last_edit_date": 1546325984, "creation_date": 1546324476, "answer_id": 53993492, "question_id": 53993312, "link": "https://stackoverflow.com/questions/53993312/a-program-aborts-when-strcpying-over-a-char-in-a-union/53993492#53993492", "title": "A program aborts when strcpying over a char in a union", "body": "<p>This</p>\n\n<pre><code>strcpy(&amp;test, \"test\");\n</code></pre>\n\n<p>is not correct, compiler could have warn you like below if you had compile your code with flag like <code>-Wall -Wstrict-prototypes -Wpedantic -Werror</code>. Never ignore compiler warning.</p>\n\n<blockquote>\n  <p>error: passing argument 1 of \u2018strcpy\u2019 from incompatible pointer type\n  [-Werror]    strcpy(&amp;test, \"test\");    ^</p>\n</blockquote>\n\n<p>as <code>&amp;test</code> is of <code>doublechar*</code> type and <code>\"test\"</code> is of <code>char*</code> type &amp; copying <code>char*</code> to <code>doublechar*</code> results in above error message.</p>\n\n<p>Also here</p>\n\n<pre><code>typedef union {\n  double num; /* 8 byte gets allocated for whole union as this member needs the highest memory */\n  char chr;\n} doublechar;\n</code></pre>\n\n<p><code>doublechar</code> is union i.e here all members shares the common mmory which is <code>8</code> byte in <code>32-bit</code> system</p>\n\n<pre><code> --------------------------------------------------\n |                         |                        |\n  --------------------------------------------------\n MSB                                           &lt;-- LSB\n                                                   num\n                                                   chr &lt;-- both num and chr access memory from beginning\n</code></pre>\n\n<p>Also this</p>\n\n<pre><code>strcpy(&amp;test.chr, \"test\"); // this does not work\nprintf(\"%s\\n\", &amp;test); /* format specifier is wrong */\n</code></pre>\n\n<p>causes <strong>undefined behavior</strong> as <code>test.chr</code> is of <code>char</code> type, copying more than <code>1</code> <code>char</code> is not recommended as it may overwrite next member content, point is be careful while doing so.</p>\n\n<p>Also <code>printf</code> format specifier are not correct, <code>%s</code> expects argument of <code>char*</code> and <code>&amp;test</code> type is not of <code>char*</code>. You want like below</p>\n\n<pre><code>strcpy(&amp;test.chr, \"t\"); /* test.chr is of char type, */\nprintf(\"%c\\n\", test.chr); /* use %c as chr is of char type*/\nprintf(\"%p\\n\",(void*)&amp;test); /* use %p if you want to print address */\n</code></pre>\n\n<p>Also here</p>\n\n<blockquote>\n  <p>strcpy(&amp;test.num, \"test\"); // this works</p>\n</blockquote>\n\n<p><strong>No, it doesn't work</strong> as <code>test.num</code> is of <code>double</code> type not <code>char*</code> type, your compiler could have warned you like</p>\n\n<blockquote>\n  <p>note: expected \u2018char * <strong>restrict</strong>\u2019 but argument is of type \u2018double\n  *\u2019</p>\n</blockquote>\n\n<p>you may want to use <code>memcpy()</code> in above case.</p>\n"}, {"tags": [], "owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "is_accepted": true, "score": 3, "last_activity_date": 1546331363, "last_edit_date": 1546331363, "creation_date": 1546327396, "answer_id": 53993742, "question_id": 53993312, "link": "https://stackoverflow.com/questions/53993312/a-program-aborts-when-strcpying-over-a-char-in-a-union/53993742#53993742", "title": "A program aborts when strcpying over a char in a union", "body": "<p>The reason is simple. You've defined <code>test</code> as a <code>doublechar</code>, and <code>test.chr</code> is therefore a <strong>single character</strong>.  When you take a  pointer to it, it behaves for the purposes of indexing <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.5.6p7\" rel=\"nofollow noreferrer\">as if it were a pointer to the first element of an array <strong>of length 1</strong></a>.</p>\n\n<p>And here,</p>\n\n<pre><code>strcpy(&amp;test.chr, \"test\");\n</code></pre>\n\n<p>you're trying to copy an array of length <strong>5</strong> over array of length <strong>1</strong>, and the behaviour is undefined. It does not matter whether it is the same address as <code>&amp;test.num</code> - because that is not the only thing that matters; what matters too is the type of the addressed element, the element's location within the (possible) array it belongs to and the pointer's provenance.</p>\n\n<p>In the past this could have been a \"non-issue\", because the undefined behaviour means that an implementation that overruns the array of length 1 with 4 more characters would have been correct. Now compilers and C implementations are implementing range checking in builtin functions, and <code>strcpy</code> can guard that you do not write out of bounds of a <em>known</em> array of length 1, and aborts the program before worse behaviour occurs. That <em>too</em> is allowed by the standard.</p>\n\n<p>The definition of undefined behaviour is <a href=\"http://port70.net/~nsz/c/c11/n1570.html#3.4.3p1\" rel=\"nofollow noreferrer\">3.4.3p1</a></p>\n\n<blockquote>\n  <ol>\n  <li><p>undefined behavior behavior, upon use of a nonportable or erroneous program construct or of erroneous data, for which this International\n  Standard imposes no requirements</p></li>\n  <li><p>NOTE Possible undefined behavior ranges from ignoring the situation completely with unpredictable results, to behaving during translation\n  or program execution in a documented manner characteristic of the\n  environment (with or without the issuance of a diagnostic message), <strong>to\n  terminating a translation or execution (with the issuance of a\n  diagnostic message).</strong></p></li>\n  </ol>\n</blockquote>\n\n<hr>\n\n<p>The fix for your program would be to state your intentions clearly. Perhaps this would be better:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n\ntypedef union {\n    double num;\n    char chrs[sizeof (double)];\n} doublechar;\n\nint main (int argc, char *argv[])\n{\n  doublechar test;\n  strcpy(test.chrs, \"test\");\n  printf(\"%s\\n\", test.chrs);\n\n  return 0;\n}\n</code></pre>\n\n<hr>\n\n<p>For the record, GCC Ubuntu 7.3.0-27ubuntu1~18.04 behaves somewhat better with your last excerpt - it issues <strong>proper diagnostics</strong>:</p>\n\n<pre><code>% gcc union.c -O3\nIn file included from /usr/include/string.h:494:0,\n                 from union.c:2:\nIn function \u2018strcpy\u2019,\n    inlined from \u2018main\u2019 at union.c:13:3:\n/usr/include/x86_64-linux-gnu/bits/string_fortified.h:90:10: warning: \n   \u2018__builtin___memcpy_chk\u2019 writing 5 bytes into a region of size 1 overflows the \n   destination [-Wstringop-overflow=]\n   return __builtin___strcpy_chk (__dest, __src, __bos (__dest));\n          ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n\n% ./a.out        \n*** buffer overflow detected ***: ./a.out terminated\nzsh: abort (core dumped)  ./a.out\n</code></pre>\n\n<p>Here, just using the default switches is not sufficient; the one compiled without optimization would print <code>test</code>.</p>\n"}], "owner": {"reputation": 373, "user_id": 1611665, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2015763aac6a23b776317d40b0bbb0f5?s=128&d=identicon&r=PG", "display_name": "Ajay MT", "link": "https://stackoverflow.com/users/1611665/ajay-mt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "accepted_answer_id": 53993742, "answer_count": 2, "score": 2, "last_activity_date": 1546331363, "creation_date": 1546322152, "last_edit_date": 1546330095, "question_id": 53993312, "link": "https://stackoverflow.com/questions/53993312/a-program-aborts-when-strcpying-over-a-char-in-a-union", "title": "A program aborts when strcpying over a char in a union", "body": "<p>I am trying to <code>strcpy</code> to a union of size 8, as follows:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n\ntypedef union {\n  double num;\n  char chr;\n} doublechar;\n\nint main (int argc, char *argv[])\n{\n  doublechar test;\n  strcpy(&amp;test, \"test\");\n  printf(\"%s\\n\", &amp;test);\n\n  return 0;\n}\n</code></pre>\n\n<p>This works fine. However, when I try to copy to the address of the union as a character with <code>strcpy</code> or <code>strncpy</code>, the program crashes with an <code>abort</code> message:</p>\n\n<pre><code>strcpy(&amp;test.chr, \"test\"); // this does not work\nstrncpy(&amp;test.chr, \"test\", 3); // this does not work\nstrcpy(&amp;test.num, \"test\"); // this works\nmemcpy(&amp;test.chr, \"test\", 3); // this works\n</code></pre>\n\n<p>In all four of these cases, the memory address is the same, so why do some of them fail? <code>strcpy</code> and <code>strncpy</code> don't seem to work with a heap-allocated union either. Additionally, this seems to work fine even though it shouldn't:</p>\n\n<pre><code>char *p = &amp;test.chr;\nstrcpy(p, \"test\"); // this works\n</code></pre>\n\n<p>Can anyone explain this?</p>\n\n<p>EDIT:\nObviously, the compiler produces a bunch of warnings when this program is compiled, but all of those have to do with printf format specifiers. Here's a version of the program that compiles cleanly:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n\ntypedef union {\n  double num;\n  char chr;\n} doublechar;\n\nint main (int argc, char *argv[])\n{\n  doublechar test;\n  strcpy(&amp;test.chr, \"test\");\n  printf(\"%s\\n\", &amp;test.chr);\n\n  return 0;\n}\n</code></pre>\n\n<p>I am using the following compiler:</p>\n\n<pre><code>Apple LLVM version 10.0.0 (clang-1000.11.45.5)\nTarget: x86_64-apple-darwin18.2.0\nThread model: posix\n</code></pre>\n\n<p>This is what I see when I run the program:</p>\n\n<pre><code>[1]    74379 abort      a.out\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1546328631, "post_id": 53993082, "comment_id": 94825159, "body": "Pointers cannot be printed with <code>%u</code>. You must convert them to <code>(void *)</code> and print them with <code>%p</code>."}], "answers": [{"tags": [], "owner": {"reputation": 138, "user_id": 4610738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XSifY.jpg?s=128&g=1", "display_name": "SbrTa", "link": "https://stackoverflow.com/users/4610738/sbrta"}, "is_accepted": true, "score": 3, "last_activity_date": 1546319776, "creation_date": 1546319776, "answer_id": 53993150, "question_id": 53993082, "link": "https://stackoverflow.com/questions/53993082/unable-to-understand-how-next-address-is-getting-computed-in-array-when-perf/53993150#53993150", "title": "Unable to understand , how next address is getting computed in array , when performing operation &amp;arr+1", "body": "<p>&amp;arr is a pointer to an entire array. So, if we move &amp;arr by 1 position it will point the next block of <strong>n</strong> elements.\nIf the array base address is <strong>b</strong>, &amp;arr+1 will be <code>b + (n * 4)</code></p>\n\n<p>here, n=6 and b = 2293248\nso, <code>&amp;arr+1 = b+(n*4) = 2293248 + (6*4) = 2293272</code></p>\n"}], "owner": {"reputation": 908, "user_id": 3649496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59c95010d46812ccabe7eea947a090ab?s=128&d=identicon&r=PG&f=1", "display_name": "infiniteLearner", "link": "https://stackoverflow.com/users/3649496/infinitelearner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 1, "closed_date": 1546320497, "accepted_answer_id": 53993150, "answer_count": 1, "score": 1, "last_activity_date": 1546364157, "creation_date": 1546318378, "last_edit_date": 1546364157, "question_id": 53993082, "link": "https://stackoverflow.com/questions/53993082/unable-to-understand-how-next-address-is-getting-computed-in-array-when-perf", "closed_reason": "Duplicate", "title": "Unable to understand , how next address is getting computed in array , when performing operation &amp;arr+1", "body": "<p>I am trying to understand array behavior. Please see the code below. Size of int is 4.</p>\n\n<pre><code>int arr[]={10,9,8,7,6,5};\n\nprintf(\"\\nSingle array print=&gt; \\n%u  ||  %u  ||  %u  ||  %u\",\n       singlearr, &amp;singlearr, &amp;singlearr + 1);\n</code></pre>\n\n<p>I am getting the output:</p>\n\n<pre><code>2293248  ||  2293248  ||  2293272\n</code></pre>\n\n<p>I understand the expressions \"<code>singlarr</code>\" and \"<code>&amp;singlearr</code>\" but when I am doing \"<code>&amp;singlearr + 1</code>\", why it is giving output as 2293272 which is 24 bytes after the address 2293248 (2293248+24) ?</p>\n"}, {"tags": ["c", "mp4", "h.264", "fmp4"], "comments": [{"owner": {"reputation": 1210, "user_id": 3544926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/967caec5be8d2cbfbb89fbf067d93fff?s=128&d=identicon&r=PG&f=1", "display_name": "raju_odi", "link": "https://stackoverflow.com/users/3544926/raju-odi"}, "edited": false, "score": 0, "creation_date": 1546316544, "post_id": 53992918, "comment_id": 94823710, "body": "please add your code which you tried till now."}, {"owner": {"reputation": 87, "user_id": 10853379, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/d5hYx.jpg?s=128&g=1", "display_name": "YuanDa.Yu", "link": "https://stackoverflow.com/users/10853379/yuanda-yu"}, "reply_to_user": {"reputation": 1210, "user_id": 3544926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/967caec5be8d2cbfbb89fbf067d93fff?s=128&d=identicon&r=PG&f=1", "display_name": "raju_odi", "link": "https://stackoverflow.com/users/3544926/raju-odi"}, "edited": false, "score": 0, "creation_date": 1546330864, "post_id": 53992918, "comment_id": 94825542, "body": "The code is messy and inconvenient to display, just tell me the way of thinking, and then I will debug, thank you very much!"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1546345777, "post_id": 53992918, "comment_id": 94828181, "body": "Create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> please. If you follow the concept, it will not be messy anymore. Also if you do, helping you will be easier. Describing code is often laden with the misconceptions which cause it to malfunction. Making an MCVE provices a second layer of communication which usually helps spotting the root fo the problem."}, {"owner": {"reputation": 27067, "user_id": 210785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a561cd4d29738e18d9e565a6265d86ac?s=128&d=identicon&r=PG", "display_name": "szatmary", "link": "https://stackoverflow.com/users/210785/szatmary"}, "edited": false, "score": 0, "creation_date": 1546373606, "post_id": 53992918, "comment_id": 94834231, "body": "The answer is too complex for  Q/A format unless you are a little more specific.  The layout of the mdat is described in the moov (or moof) you can\u2019t address one without addressing the other."}], "answers": [{"comments": [{"owner": {"reputation": 9322, "user_id": 2285255, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7ceea0d298e3d7f7f50898e60b07066c?s=128&d=identicon&r=PG", "display_name": "rsc", "link": "https://stackoverflow.com/users/2285255/rsc"}, "edited": false, "score": 0, "creation_date": 1581723638, "post_id": 54014027, "comment_id": 106544575, "body": "You said &quot;I assume your encoder emits &quot;Annex B&quot;, but you are removing the start code. Maybe you meant &quot;MP4&quot; instead of &quot;Annex B&quot;?"}, {"owner": {"reputation": 5944, "user_id": 646173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23cb9ef472d0c9c24f216dc6c19af696?s=128&d=identicon&r=PG", "display_name": "Markus Schumann", "link": "https://stackoverflow.com/users/646173/markus-schumann"}, "reply_to_user": {"reputation": 9322, "user_id": 2285255, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7ceea0d298e3d7f7f50898e60b07066c?s=128&d=identicon&r=PG", "display_name": "rsc", "link": "https://stackoverflow.com/users/2285255/rsc"}, "edited": false, "score": 0, "creation_date": 1581804817, "post_id": 54014027, "comment_id": 106560302, "body": "No - I meant Annex B and yes you are removing the start codes (00) 00 00 01 to convert from Annex B to MP4."}, {"owner": {"reputation": 9322, "user_id": 2285255, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7ceea0d298e3d7f7f50898e60b07066c?s=128&d=identicon&r=PG", "display_name": "rsc", "link": "https://stackoverflow.com/users/2285255/rsc"}, "edited": false, "score": 0, "creation_date": 1581894399, "post_id": 54014027, "comment_id": 106579150, "body": "Ah, got it. You are converting it from Annex B to MP4. Reading your answer I was with the impression that you could have both types (Annex B or MP4) as MDAT, but you cannot, you need to convert it to MP4. Now it is clear. Thank you."}], "tags": [], "owner": {"reputation": 5944, "user_id": 646173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23cb9ef472d0c9c24f216dc6c19af696?s=128&d=identicon&r=PG", "display_name": "Markus Schumann", "link": "https://stackoverflow.com/users/646173/markus-schumann"}, "is_accepted": true, "score": 2, "last_activity_date": 1546468316, "creation_date": 1546468316, "answer_id": 54014027, "question_id": 53992918, "link": "https://stackoverflow.com/questions/53992918/about-fmp4-encoding-how-to-fill-the-mdat-box-wit-h264-frame/54014027#54014027", "title": "about fmp4 encoding , how to fill the mdat box wit H264 frame?", "body": "<p>H.264 can be in different stream formats. One is called \"Annex B\" the other one is MP4.\nIn \"Annex B\" your NAL units are prefix with start codes 00 00 00 01 or 00 00 01.\nIn MP4 your NAL units are prefixed with the size in bytes.</p>\n\n<p>I assume your encoder emits \"Annex B\".</p>\n\n<ol>\n<li><p>Remove the start code (00) 00 00 01</p></li>\n<li><p>Prefix your NAL units with the size (typically 4 bytes)</p></li>\n<li><p>Filter out AUD/SPS/PPS NAL units from your stream</p></li>\n<li><p>Write you converted NAL units into the MDAT box</p></li>\n<li><p>Create an AVC Configuration Box ('avcC') based on your SPS, PPS and the length size</p></li>\n<li><p>Store your avcC box in moov->trak->mdia->minf->stbl->avc1->avcC</p></li>\n<li><p>While you are writing your samples into mdat - keep track of sizes, offsets and frame types to create the correct stts, stss, stsc, stsz and stco boxes.</p></li>\n</ol>\n"}], "owner": {"reputation": 87, "user_id": 10853379, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/d5hYx.jpg?s=128&g=1", "display_name": "YuanDa.Yu", "link": "https://stackoverflow.com/users/10853379/yuanda-yu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 745, "favorite_count": 1, "accepted_answer_id": 54014027, "answer_count": 1, "score": 1, "last_activity_date": 1546468316, "creation_date": 1546315152, "last_edit_date": 1546345651, "question_id": 53992918, "link": "https://stackoverflow.com/questions/53992918/about-fmp4-encoding-how-to-fill-the-mdat-box-wit-h264-frame", "title": "about fmp4 encoding , how to fill the mdat box wit H264 frame?", "body": "<p>I used C language to encode H264 frames (just have I/P frame) into fmp4 files. When I fill the mdat box, I don't know how to fill the frame data.<br>\nIs (I/P)frame data filled directly?<br>\nDo the first 4 bytes need to be filled with frame length? </p>\n\n<p>I tried to use FFMPG to encode fmp4 file, and found that the data in mdat box was completely different from the original I/P frame data.<br>\nIs it coded again?<br>\nCan I directly fill the data of I/P frame into mdat box?</p>\n"}, {"tags": ["c", "arrays", "sorting", "qsort"], "comments": [{"owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "edited": false, "score": 0, "creation_date": 1546303442, "post_id": 53992350, "comment_id": 94822413, "body": "If the two columns are always treated a pair, one option could be to make it a one-dimensional array of <code>struct</code> containing two fields."}, {"owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "edited": false, "score": 1, "creation_date": 1546303548, "post_id": 53992350, "comment_id": 94822427, "body": "Also, why do your arrays contain <code>float</code> when you treat the contents as <code>int</code> everywhere? Or, alternatively, why is everything else (including format strings) treating them as <code>int</code>? In particular, <code>a - a * (b&#47;3000) - c * a &#47;40</code> is very unlikely to give the results you expect when <code>a</code>, <code>b</code>, and <code>c</code> are <code>int</code>."}, {"owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "edited": false, "score": 2, "creation_date": 1546303706, "post_id": 53992350, "comment_id": 94822445, "body": "Also, your range comparisons are impossible: <code>while (a &lt; 1 &amp;&amp; a &gt; 1000000000)</code> continues as long as <code>a</code> is less than 1  <i>and at the same time</i> greater than 1000000000\u2026 I&#39;m sorry, but I&#39;m tempted to say that you need to fix a lot of other stuff before <code>qsort</code> even becomes relevant."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1546304369, "post_id": 53992350, "comment_id": 94822528, "body": "Make the size of your element be the size of a row. Not super efficient, but works. Alternatively, allocate an array of indices, sort them according to the contents of the first column. Then allocate another buffer the size of the original array and copy each row into the proper location."}, {"owner": {"reputation": 49, "user_id": 10762300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb4c990345ae7b8e84358042d9c9ed61?s=128&d=identicon&r=PG&f=1", "display_name": "Giannis D", "link": "https://stackoverflow.com/users/10762300/giannis-d"}, "reply_to_user": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "edited": false, "score": 0, "creation_date": 1546306390, "post_id": 53992350, "comment_id": 94822737, "body": "@Arkku arrays were declared as float by mistake because I had tried something else earlier. You are also right about the <code>while</code>, I confused the data check conditions. Thank you for your advice."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1546307778, "post_id": 53992350, "comment_id": 94822916, "body": "the posted code does not compile!  One of several reasons is: <code>apod1[k][2] = i       k = k + 1;</code>  is missing a trailing semicolon on the first statement.  There are several other reasons.  When compiling, enable the warnings, then fix those warnings.  (for <code>gcc</code>, at a minimum use: <code>-Wall -Wextra -Wconversion -pedantic -std=gnu11</code> )  Note: other compilers use different options to perform the same thing"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1546307968, "post_id": 53992350, "comment_id": 94822949, "body": "regarding: <code>file_in=fopen(&quot;file.in&quot;, &quot;r&quot;);</code>  always check (!=NULL) the returned value to assure the operation was successful.  If not successful, then call <code>perror( fopen for input file failed&quot; );</code> followed by: <code>exit( EXIT_FAILURE );</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1546308279, "post_id": 53992350, "comment_id": 94822980, "body": "because the function: <code>main()</code> is missing (at least) a final closing brace &#39;}&#39;, the function: <code>cmpfunc()</code> is actually nested inside the <code>main()</code> function.  While some compilers can be &#39;forced&#39; to accept a nested function, that is not part of the C language specification.  Please correct all the compiler problems and add an edit to your posted code with a valid C program."}], "answers": [{"comments": [{"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1546377061, "post_id": 53992790, "comment_id": 94834940, "body": "@AnttiHaapala - I deleted my comments as I&#39;ve updated my answer to note the issue with indexes. I&#39;ll delete this comment later."}], "tags": [], "owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "is_accepted": false, "score": 2, "last_activity_date": 1546377027, "last_edit_date": 1546377027, "creation_date": 1546311986, "answer_id": 53992790, "question_id": 53992350, "link": "https://stackoverflow.com/questions/53992350/how-to-sort-two-dimensional-array-using-qsort-in-c/53992790#53992790", "title": "How to sort two-dimensional array using qsort() in C", "body": "<p>C doesn't allow the assignment of arrays. You could create an array of pointers, sort the pointers according to one of the arrays, the reorder the arrays according to the pointers using memcpy or a loop to move rows (the link below shows an efficient way to do this). (Using an array of indexes would require the compare function to be able to reference an array's elements only given the indexes.)</p>\n\n<p>The second part of the answer in this thread shows the pointer method. For qsort(), the compare function input parameters would be pointer to pointer to (the first integer of a) row.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/44027808/sorting-two-arrays-based-on-one-with-standard-library-copy-steps-avoided/44030600#44030600\">Sorting two arrays based on one with standard library (copy steps avoided)</a></p>\n\n<p>An alternative would be to use structures, where each structure contains an array, since C does allow structures to be assigned.</p>\n"}], "owner": {"reputation": 49, "user_id": 10762300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb4c990345ae7b8e84358042d9c9ed61?s=128&d=identicon&r=PG&f=1", "display_name": "Giannis D", "link": "https://stackoverflow.com/users/10762300/giannis-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 353, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1548974310, "creation_date": 1546303091, "last_edit_date": 1548974310, "question_id": 53992350, "link": "https://stackoverflow.com/questions/53992350/how-to-sort-two-dimensional-array-using-qsort-in-c", "title": "How to sort two-dimensional array using qsort() in C", "body": "<p>I want to sort the two-dimensional array of integers \"d\" according to the first column in decreasing order, using qsort(). However, I want each element of the first column to match the element that was in the second column in the same line on the beginning.</p>\n\n<p>For example:</p>\n\n<p>Array in the beginning:</p>\n\n<p>column1: { 4, 5, 1, 3, 0} <br> column2: { 1, 2, 3, 4, 5}</p>\n\n<p>and the result should be:</p>\n\n<p>column1: { 5, 4, 3, 1, 0} <br> column2: { 2, 1, 4, 3, 5}</p>\n\n<p>I have written the code for sorting an one-dimensional array, but I can't figure out how to do that for the two-dimensional one.</p>\n\n<pre><code>int main(){\n\n    FILE *file_in, *file_out;\n\n    file_in=fopen(\"file.in\", \"r\");\n        fscanf(file_in, \"%d\", &amp;N);\n\n    for( i = 1; i &lt;= N; i = i + 1 ){\n            fscanf(file_in, \"%d\", &amp;a);\n\n            fscanf(file_in, \"%d\", &amp;b);\n\n            fscanf(file_in, \"%d\", &amp;c);\n\n            d[i][1] = a+b+c;\n            d[i][2] = a*b*c\n    }\n    fclose(file_in);\n\n    int cmpfunc (const void * a, const void * b) {\n        return ( *(int*)b - *(int*)a );\n    }\n    qsort(d, N, sizeof(int), cmpfunc);\n\n    file_out=fopen(\"file.out\",\"w\");\n    fprintf(file_out, \"%d\", M);\n    for ( i=1; i&lt;=N; i = i + 1){\n        fprintf(file_out, \"%d\", d);\n    }\n    fclose(file_out);\n    return 0;\n}\n</code></pre>\n\n<p>Thank you in advance for your help.</p>\n"}, {"tags": ["c", "data-structures"], "answers": [{"comments": [{"owner": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "edited": false, "score": 0, "creation_date": 1546303163, "post_id": 53992217, "comment_id": 94822375, "body": "Even though your <code>struct Neuron</code> contains an array, it is still passed by value. C arrays <i>do</i> get passed by value (effectively) if they are embedded in a struct that is being passed by value.  That&#39;s a C trick for simulating by-value passing semantics for arrays. Instead of trying to pass <code>int array[42]</code>, make a <code>struct array_wrapper { int array[42]; }</code> and pass that structure."}], "tags": [], "owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "is_accepted": true, "score": 3, "last_activity_date": 1546300847, "creation_date": 1546300847, "answer_id": 53992217, "question_id": 53992193, "link": "https://stackoverflow.com/questions/53992193/how-to-change-a-global-defined-variable-from-a-function-in-c/53992217#53992217", "title": "How to change a global defined variable from a function in C", "body": "<p>The argument of type <code>struct Neuron</code> is passed by value, meaning the function receives a <em>copy</em> of the structure, leaving the original unchanged. To pass by reference, make the argument a pointer (<code>struct Neuron *</code>) and pass the address of your original, e.g., <code>&amp;Q</code>.</p>\n"}], "owner": {"reputation": 1372, "user_id": 10625375, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-xqGgE7_RDqg/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbCsrPfQhNHCZ2m9W1_ri6S-3UT2ww/mo/photo.jpg?sz=128", "display_name": "forthelulx", "link": "https://stackoverflow.com/users/10625375/forthelulx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 53992217, "answer_count": 1, "score": -1, "last_activity_date": 1550353392, "creation_date": 1546300413, "last_edit_date": 1550353392, "question_id": 53992193, "link": "https://stackoverflow.com/questions/53992193/how-to-change-a-global-defined-variable-from-a-function-in-c", "title": "How to change a global defined variable from a function in C", "body": "<p>I am passing a structure as a variable to a function, this function accepts a structure argument.</p>\n\n<p>and then i am changing some of values of the passed structure inside the function and i want to change the global variable defined under the same name.</p>\n\n<pre><code>struct Neuron{\n\ndouble Center[3];\nchar name;\nint xCor;\nint yCor;\n\n};\n\nstruct Neuron Q;\nstruct Neuron W;\nstruct Neuron E;\nstruct Neuron R;\n\n\nvoid Winning_NEURON(struct Neuron K){\nfor(int i=0; i&lt;3; i++){\n\n   K.Center[i] =  K.Center[i]+(learningParam*(inputArray[i]-K.Center[i]));\n}\n</code></pre>\n\n<p>So if i pass neuron Q to the function, the data is computed correctly but the Q neuron values does not change, how can i change globally and not only locally?</p>\n"}, {"tags": ["c", "pointers", "struct"], "comments": [{"owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "edited": false, "score": 1, "creation_date": 1546299147, "post_id": 53992071, "comment_id": 94821867, "body": "Please include the actual code you are using that reproduces whatever problem you are having (e.g.,1-3 lines of actual use instead of <code>&#47;&#47; Code</code> + the calling code and definitions of any required variables). (In this case I suspect that if you do that, the compiler errors <i>when you test that code before posting it here</i>, or lack thereof, will show you which is the correct way.)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1546307655, "post_id": 53992071, "comment_id": 94822887, "body": "<code>sizeof(struct)</code> is invalid C code.  Suggest <code>array = malloc(sizeof *array * 10);</code>  Easier to code right, review and maintain."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1546391741, "post_id": 53992071, "comment_id": 94837433, "body": "regarding: <code>Void</code> there is no such modifier in C.  Perhaps you meant: <code>void</code> (all lower case) Regarding: <code>Void main()</code>  There are only two valid signatures for <code>main()</code>  they are: <code>int main( int argc, char *argv[] )</code>  and  <code>int main( void )</code>   Notice that both signatures use a return type of <code>int</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1546392046, "post_id": 53992071, "comment_id": 94837473, "body": "please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> so we can reproduce the problem and help you debug it."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 9128464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1150e90981210ddb33fde1f5f01d08d1?s=128&d=identicon&r=PG", "display_name": "Idan C.", "link": "https://stackoverflow.com/users/9128464/idan-c"}, "edited": false, "score": 0, "creation_date": 1546325568, "post_id": 53992290, "comment_id": 94824761, "body": "Yes I want to reallocate my array, then it seems that the second option is correct.  And I should send the array to the function like this: My_func(&amp;array)"}], "tags": [], "owner": {"reputation": 73, "user_id": 10850779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dca47176cf51f7ce06aa746a8288af0?s=128&d=identicon&r=PG&f=1", "display_name": "James R.", "link": "https://stackoverflow.com/users/10850779/james-r"}, "is_accepted": false, "score": 0, "last_activity_date": 1546301949, "creation_date": 1546301949, "answer_id": 53992290, "question_id": 53992071, "link": "https://stackoverflow.com/questions/53992071/dynamic-array-of-pointers-to-structs-how-to-pass-to-funcs/53992290#53992290", "title": "Dynamic array of pointers to structs- how to pass to funcs?", "body": "<p>It depends on what you intend to do with <code>array</code> within the function. If you intend to, for example, reallocate it, then define your function's parameter with an extra level of pointer (<code>***</code>).</p>\n"}], "owner": {"reputation": 11, "user_id": 9128464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1150e90981210ddb33fde1f5f01d08d1?s=128&d=identicon&r=PG", "display_name": "Idan C.", "link": "https://stackoverflow.com/users/9128464/idan-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1546301949, "creation_date": 1546298166, "question_id": 53992071, "link": "https://stackoverflow.com/questions/53992071/dynamic-array-of-pointers-to-structs-how-to-pass-to-funcs", "title": "Dynamic array of pointers to structs- how to pass to funcs?", "body": "<p>I am trying to figure out how should I get some code done so I will send a dynamic array of pointers to structs to functions and will be able to free all memory at the end of the program.</p>\n\n<pre><code>Void main()\n{\nSome_struct **array;\narray = (Some_struct**)malloc(10 * sizeof(struct));\n}\n</code></pre>\n\n<p>Now should my function be like:</p>\n\n<pre><code>Void My_func(Some_struct** array)\n{ //Code}\n</code></pre>\n\n<p>Or should it be like:</p>\n\n<pre><code>Void My_func(Some_struct*** array)\n    { //Code}\n</code></pre>\n\n<p>I would like some explanation pls :)</p>\n"}, {"tags": ["c", "libtiff"], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 6082541, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7YGAj.png?s=128&g=1", "display_name": "Nofal", "link": "https://stackoverflow.com/users/6082541/nofal"}, "edited": false, "score": 0, "creation_date": 1546297232, "post_id": 53991954, "comment_id": 94821648, "body": "Thank you it worked! ,  i tried the same thing before but i didn&#39;t add &quot;data++&quot; . I believe i now have a clear understanding of how the code actually works ."}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": true, "score": 0, "last_activity_date": 1546296416, "creation_date": 1546296416, "answer_id": 53991954, "question_id": 53991765, "link": "https://stackoverflow.com/questions/53991765/reading-tif-images-in-c-using-libtiff-returns-one-column/53991954#53991954", "title": "Reading .tif images in C using libtiff returns one column", "body": "<p>In the <code>col</code> loop each column does exactly the same thing using <code>data = (uint8*)buf;</code> which seems to be the <strong>first</strong> column's data. The loop is also missing <code>{</code> braces <code>}</code>.</p>\n\n<p>Move the line </p>\n\n<pre><code>data = (uint8*)buf;\n</code></pre>\n\n<p>outside the column loop and increment it within the loop.</p>\n\n<pre><code>for (row = 0; row &lt; imagelength; row++)\n{\n    TIFFReadScanline(tif, buf, row,1);\n    count2++;\n    data = (uint8*)buf;                     // move up\n    for (col = 0; col &lt; scanline; col++)\n    {                                       // add braces\n        printf(\"%d \", *data);\n        im[count] = *data;\n        count++;\n        data++;                             // increment buffer pointer\n    }\n    printf(\"\\n\");\n}\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 6082541, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7YGAj.png?s=128&g=1", "display_name": "Nofal", "link": "https://stackoverflow.com/users/6082541/nofal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 167, "favorite_count": 0, "accepted_answer_id": 53991954, "answer_count": 1, "score": 0, "last_activity_date": 1546296416, "creation_date": 1546293992, "question_id": 53991765, "link": "https://stackoverflow.com/questions/53991765/reading-tif-images-in-c-using-libtiff-returns-one-column", "title": "Reading .tif images in C using libtiff returns one column", "body": "<p>I want to use \"libtiff\" library to read u8-bit pixel intensity values from \".tiff\" images . i came across this code and modified it to read 8 bit values as desired and returns correct values for one column only . </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;inttypes.h&gt;\n#include \"tiffio.h\"\n#define imsize 286628\n int count;\n int count2;\n uint8* im;\n uint32 imagelength;\n uint32 width;\nint main(){\n\nim = (uint8*)malloc(imsize*sizeof(uint8));\nTIFF* tif = TIFFOpen(\"image1.tif\", \"r\");\n    if (tif) {\n\n        tsize_t scanline;\n        tdata_t buf;\n        uint32 row;\n        uint32 col;\n\n\n        uint16 nsamples;\n\n        TIFFGetField(tif, TIFFTAG_SAMPLESPERPIXEL, &amp;nsamples);\n        TIFFGetField(tif, TIFFTAG_IMAGELENGTH, &amp;imagelength);\n        TIFFGetField(tif,TIFFTAG_IMAGEWIDTH,&amp;width);\n\n        scanline = TIFFScanlineSize(tif);\n        buf = _TIFFmalloc(scanline);\n        uint8* data;\n\n        for (row = 0; row &lt; imagelength; row++)\n        {\n            TIFFReadScanline(tif, buf, row,1);\n            count2++;\n            for (col = 0; col &lt; scanline; col++)\n                data = (uint8*)buf;\n                //printf(\"%d\\n\",col); remains the same not incrementing\n                printf(\"%d \", *data);//printing for testing need only to copy to an array to access by index\n                im[count] = *data;\n                count++;\n            printf(\"\\n\");\n\n        }\n        printf(\"im[1]= %d\\n im[2] = %d \\n im[3] = %d \\n im[286628] = %d\\n\",im[0],im[1],im[2],im[286627]);\n        _TIFFfree(buf);\n        TIFFClose(tif);\n        free(im);\n    }\n    printf(\"num of cols= %d\\n\",count);\n    printf(\"num of rows = %d\\n\",count2);//both counts print col size\n    printf(\"width = %d\\n\",width); //prints row size\n\n    return 0;\n\n}\n</code></pre>\n\n<p>in the nested forloop if I add brackets , the loops iterate over the correct number of pixels \n(for this example #of-pixels = 286628, 547x524 image), but with incorrect values . \nif i keep the brackets removed i get correct values but for the first column  (only 547 values). </p>\n\n<p><strong><em>What changes need to be made to iterate over all the pixels correctly ?</em></strong> </p>\n\n<p><strong>note:</strong> \ni'm trying to obtain a matrix with values as matlabs \"imread()\"</p>\n"}, {"tags": ["c", "atom-editor"], "comments": [{"owner": {"reputation": 151, "user_id": 5895811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bed50a2eb82fc748c4b0062e517eec5?s=128&d=identicon&r=PG&f=1", "display_name": "TZof", "link": "https://stackoverflow.com/users/5895811/tzof"}, "edited": false, "score": 0, "creation_date": 1546294376, "post_id": 53991696, "comment_id": 94821247, "body": "what do you think about use a real IDE like CLion ?"}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1546295860, "post_id": 53991696, "comment_id": 94821460, "body": "You&#39;re referring to this? <a href=\"https://ide.atom.io/\" rel=\"nofollow noreferrer\">ide.atom.io</a>"}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1546296108, "post_id": 53991696, "comment_id": 94821498, "body": "When you say you copied the results to &quot;Atom &gt; Edit &gt; Config&quot; do you mean config.cson? What exactly did you copy? Basically we need more detail about what you did in Atom IDE."}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1546296334, "post_id": 53991696, "comment_id": 94821534, "body": "Which ide package are you using for C language support? ide-cpp?"}, {"owner": {"reputation": 1, "user_id": 10812599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85c290b0c34a513d8a770560ebb53405?s=128&d=identicon&r=PG&f=1", "display_name": "aria_rdm", "link": "https://stackoverflow.com/users/10812599/aria-rdm"}, "edited": false, "score": 0, "creation_date": 1546339259, "post_id": 53991696, "comment_id": 94826936, "body": "i copied the results of &quot;pkg-config --libs ncursesw&quot; and &quot;pkg-config --cflags ncursesw&quot;  which were &quot;-lncursesw -ltinfo&quot; and &quot;-D_GNU_SOURCE -I/usr/include/ncursesw&quot; ... i exactly don&#39;t know what these results are , but i know these should be copied to Atom to link ncurses to the compiler in &quot;linker setting&quot; and &quot;Other compiler option&quot; through Atom, just like Code::Blocks . wish you can figure out my problem."}], "owner": {"reputation": 1, "user_id": 10812599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85c290b0c34a513d8a770560ebb53405?s=128&d=identicon&r=PG&f=1", "display_name": "aria_rdm", "link": "https://stackoverflow.com/users/10812599/aria-rdm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 90, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1546296806, "creation_date": 1546293217, "last_edit_date": 1546296806, "question_id": 53991696, "link": "https://stackoverflow.com/questions/53991696/whats-the-problem-for-my-atom-ide-when-im-trying-to-run-a-ncurses-project", "title": "what&#39;s the problem for my atom IDE when i&#39;m trying to run a ncurses project?", "body": "<p>Recently i was trying to compile and run a <em>ncurses</em> project in Atom IDE.\nI successfully link my ncurses to Atom using these commands:  </p>\n\n<pre><code>pkg-config --libs ncursesw\npkg-config --cflags ncursesw\n</code></pre>\n\n<p>then I copy the results in <em>Atom > Edit > Config</em>, But when I try to compile my code I face this error:</p>\n\n<pre><code>gcc: fatal error: no input files\ncompilation terminated.\n/bin/sh: 2: main.c: not found\n</code></pre>\n\n<p>i tried to change my compiler and I'm using <a href=\"http://%20https://atom.io/packages/gcc-make-run\" rel=\"nofollow noreferrer\">GCC_MAKE_RUN compiler</a> now.</p>\n\n<p>Also I successfully link ncurses to Code::Blocks IDE and compile it easy.</p>\n\n<pre><code>#include &lt;ncurses.h&gt;\n\nint main(void)\n{\ninitscr();\nprintw(\"Hello World !!!\");\nrefresh();\ngetch();\nendwin();\nreturn 0;\n}\n</code></pre>\n\n<p>I expected Atom to simply run my code but actually I face errors...</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10605163"}, "edited": false, "score": 0, "creation_date": 1546291768, "post_id": 53991462, "comment_id": 94820808, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/2876357/determine-the-line-of-code-that-causes-a-segmentation-fault\">Determine the line of code that causes a segmentation fault?</a>"}, {"owner": {"reputation": 12629, "user_id": 546871, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/p1diY.jpg?s=128&g=1", "display_name": "AdrianHHH", "link": "https://stackoverflow.com/users/546871/adrianhhh"}, "edited": false, "score": 0, "creation_date": 1546293839, "post_id": 53991462, "comment_id": 94821177, "body": "Please read <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and take special note of the link (near the page bottom) about debugging small programs."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1546305405, "post_id": 53991462, "comment_id": 94822633, "body": "the posted code causes the compiler to output several warnings many of which MUST be corrected.  Especially the warnings about using uninitialized variables.  When compiling, always enable the warnings, then fix those warnings.  ( for <code>gcc</code>, at a minimum use: <code>-Wall -Wextra -Wconversion -pedantic -std=gnu11</code>  )  Note: other compilers use different options to produce the same thing"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10605163"}, "edited": false, "score": 1, "creation_date": 1546293163, "post_id": 53991623, "comment_id": 94821077, "body": "Neither GCC nor Clang warn for it by default. @adonie So add <code>-Wall -Wextra</code> to your compiler invocation to be warned! (or the equivalent for your compiler)."}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 1, "last_activity_date": 1546293631, "last_edit_date": 1546293631, "creation_date": 1546292437, "answer_id": 53991623, "question_id": 53991462, "link": "https://stackoverflow.com/questions/53991462/segmentation-fault-core-dumped-no-compiling-error/53991623#53991623", "title": "Segmentation fault (core dumped), no compiling error", "body": "<p>No compiler warnings? Why not?</p>\n\n<p>Function <code>putBorder</code> uses <em>uninitialised variables</em> <code>i</code> and <code>j</code>.</p>\n\n<pre><code>void putBorder(char board[ROWS][COLUMNS], int rows, int columns)\n{\n    int i, j;\n    if(i==0 || i==rows+1)\n        board[i][j] = '-';\n    if(j==0 || j==columns+1)\n        board[i][j] = '|';\n}\n</code></pre>\n\n<p>The function seems to be missing some loops, as seen in function <code>printBoard</code>.</p>\n\n<pre><code>void putBorder(char board[ROWS][COLUMNS], int rows, int columns)\n{\n    int i, j;\n    for(i=0; i&lt;rows+1; i++)\n    {\n        for(j=0; j&lt;columns+1; j++)\n        {\n            if(i==0 || i==rows+1)\n                board[i][j] = '-';\n            if(j==0 || j==columns+1)\n                board[i][j] = '|';\n        }\n    }\n}\n</code></pre>\n\n<p>However, having copied those loops, their upper limit seems off-by-1. So I suggest</p>\n\n<pre><code>i&lt;rows+2\nj&lt;columns+2\n</code></pre>\n\n<p>etc, in both these functions, to allow for a border all round.</p>\n"}], "owner": {"reputation": 1, "user_id": 10824654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a6ffc06e15b9e4877929623453c726d?s=128&d=identicon&r=PG&f=1", "display_name": "adonle", "link": "https://stackoverflow.com/users/10824654/adonle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "closed_date": 1546363083, "answer_count": 1, "score": -1, "last_activity_date": 1546293631, "creation_date": 1546290889, "question_id": 53991462, "link": "https://stackoverflow.com/questions/53991462/segmentation-fault-core-dumped-no-compiling-error", "closed_reason": "Not suitable for this site", "title": "Segmentation fault (core dumped), no compiling error", "body": "<p>This is a program to initialize a minesweeper with parameters entered by a user and then print it. I get Segmentation fault (core dumped) when I run it (after I enter the parameters). But it compiles with no errors or warnings. How do I find the error?\nI tried compiling and running it in Ubuntu terminal and in dev-C++ in Windows 10. No difference. Any ideas?\nThank you in advance.</p>\n\n<pre><code>//File: 5.2mineboard_setup.c\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n#define ROWS 101            //\u039c\u03ad\u03b3\u03b9\u03c3\u03c4\u03bf \u03b5\u03c0\u03b9\u03c4\u03c1\u03b5\u03c0\u03cc\u03bc\u03b5\u03bd\u03bf \u03cd\u03c8\u03bf\u03c2 \u03c0\u03af\u03c3\u03c4\u03b1\u03c2\n#define COLUMNS 101         //\u039c\u03ad\u03b3\u03b9\u03c3\u03c4\u03bf \u03b5\u03c0\u03b9\u03c4\u03c1\u03b5\u03c0\u03bf\u03bc\u03b5\u03bd\u03bf \u03bc\u03ae\u03ba\u03bf\u03c2 \u03c0\u03af\u03c3\u03c4\u03b1\u03c2\n\nvoid welcome(void);\nint getRows(void);\nint getColumns(void);\nint getBombs(int, int);\nvoid initializeBoard(char board[ROWS][COLUMNS], int, int);\nvoid putBombs(char board[ROWS][COLUMNS], int, int, int);\nvoid putNums(char board[ROWS][COLUMNS], int, int);\nvoid putBorder(char board[ROWS][COLUMNS], int, int);\nvoid printBoard(char board[ROWS][COLUMNS], int, int);\n\nint main(void)\n{\n//  system (\"chcp 1253\");                   //Uncomment to run in Windows. Comment to run on Unix\n    int Rows, Columns, Bombs;\n    char Board[ROWS][COLUMNS];\n    welcome();                              //\u039c\u03ae\u03bd\u03c5\u03bc\u03b1 \u03c5\u03c0\u03bf\u03b4\u03bf\u03c7\u03ae\u03c2\n    Rows = getRows();                       //\u03a0\u03bb\u03ae\u03b8\u03bf\u03c2 \u03b3\u03c1\u03b1\u03bc\u03bc\u03ce\u03bd\n    Columns = getColumns();                 //\u03a0\u03bb\u03ae\u03b8\u03bf\u03c5\u03c2 \u03c3\u03c4\u03b7\u03bb\u03ce\u03bd\n    Bombs = getBombs(Rows, Columns);        //\u0395\u03b9\u03c3\u03b1\u03b3\u03c9\u03b3\u03ae \u03c0\u03bb\u03ae\u03b8\u03bf\u03c5\u03c2 \u03b2\u03bf\u03bc\u03b2\u03ce\u03bd\n    initializeBoard(Board, Rows, Columns);  //\u0391\u03c1\u03c7\u03b9\u03ba\u03bf\u03c0\u03bf\u03af\u03b7\u03c3\u03b7 \u03c4\u03bf\u03c5 \u03c0\u03af\u03bd\u03b1\u03ba\u03b1 \u03bc\u03b5 \u03c7\u03b1\u03c1\u03b1\u03ba\u03c4\u03ae\u03c1\u03b5\u03c2 \u03ba\u03b5\u03bd\u03bf\u03cd\n    putBombs(Board, Rows, Columns, Bombs);  //\u03a4\u03c5\u03c7\u03b1\u03af\u03b1 \u03c4\u03bf\u03c0\u03bf\u03b8\u03ad\u03c4\u03b7\u03c3\u03b7 \u03b2\u03bf\u03bc\u03b2\u03ce\u03bd (\u03cc\u03c7\u03b9 \u03c3\u03c4\u03b9\u03c2 \u03b1\u03ba\u03c1\u03b1\u03af\u03b5\u03c2 \u03c3\u03c4\u03ae\u03bb\u03b5\u03c2 \u03ba\u03b1\u03b9 \u03c3\u03b5\u03b9\u03c1\u03ad\u03c2)\n    putNums(Board, Rows, Columns);          //\u039a\u03b1\u03c4\u03b1\u03bc\u03ad\u03c4\u03c1\u03b7\u03c3\u03b7 \u03b2\u03bf\u03bc\u03b2\u03ce\u03bd \u03c3\u03b5 \u03b3\u03b5\u03b9\u03c4\u03bf\u03bd\u03b9\u03ba\u03ac \u03c4\u03b5\u03c4\u03c1\u03ac\u03b3\u03c9\u03bd\u03b1\n    putBorder(Board, Rows, Columns);        //\u03a4\u03bf\u03c0\u03bf\u03b8\u03ad\u03c4\u03b7\u03c3\u03b7 \u03c0\u03b5\u03c1\u03b9\u03b3\u03c1\u03ac\u03bc\u03bc\u03b1\u03c4\u03bf\u03c2 \u03c0\u03af\u03c3\u03c4\u03b1\u03c2\n    printBoard(Board, Rows, Columns);       //\u0395\u03ba\u03c4\u03cd\u03c0\u03c9\u03c3\u03b7 \u03c0\u03af\u03c3\u03c4\u03b1\u03c2\n    return 0;\n}\n\n//\u03a4\u03af\u03c4\u03bb\u03bf\u03c2 \u03c0\u03c1\u03bf\u03b3\u03c1\u03ac\u03bc\u03bc\u03b1\u03c4\u03bf\u03c2\nvoid welcome(void)\n{\n    printf(\"\u0394\u03b7\u03bc\u03b9\u03bf\u03c5\u03c1\u03b3\u03af\u03b1 \u03c0\u03af\u03c3\u03c4\u03b1\u03c2 \u03bd\u03b1\u03c1\u03ba\u03b1\u03bb\u03b9\u03b5\u03c5\u03c4\u03ae\\n\");\n    printf(\"=============================\\n\\n\");\n}   \n\n//\u0395\u03b9\u03c3\u03b1\u03b3\u03c9\u03b3\u03ae \u03cd\u03c8\u03bf\u03c5\u03c2 \u03c0\u03af\u03c3\u03c4\u03b1\u03c2\nint getRows(void)\n{   \n    int rows;\n    printf(\"\u0395\u03b9\u03c3\u03ac\u03b3\u03b5\u03c4\u03b5 \u03cd\u03c8\u03bf\u03c2 \u03c0\u03af\u03c3\u03c4\u03b1\u03c2 \u03b1\u03c0\u03cc 1 \u03c9\u03c2 %d: \\n\", (ROWS-2));\n    scanf (\"%d\",&amp;rows);\n    while(rows&gt;(ROWS-2))    //\u0388\u03bb\u03b5\u03b3\u03c7\u03bf\u03c2 \u03b1\u03bd \u03c4\u03bf \u03cd\u03c8\u03bf\u03c2 \u03c5\u03c0\u03b5\u03c1\u03b2\u03b1\u03af\u03bd\u03b5\u03b9 \u03c4\u03bf \u03bc\u03ad\u03b3\u03b9\u03c3\u03c4\u03bf \u03b5\u03c0\u03b9\u03c4\u03c1\u03b5\u03c0\u03cc\u03bc\u03b5\u03bd\u03bf\n    {\n        printf(\"\u03a5\u03c0\u03b5\u03c1\u03b2\u03bf\u03bb\u03b9\u03ba\u03ac \u03bc\u03b5\u03b3\u03ac\u03bb\u03bf \u03cd\u03c8\u03bf\u03c2. \u0395\u03b9\u03c3\u03ac\u03b3\u03b5\u03c4\u03b5 \u03bd\u03ad\u03bf \u03cd\u03c8\u03bf\u03c2: \\n\");\n        scanf(\"%d\",&amp;rows);          \n    }\n    return rows;\n}   \n\n//\u0395\u03b9\u03c3\u03b1\u03b3\u03c9\u03b3\u03ae \u03bc\u03ae\u03ba\u03bf\u03c5\u03c2 \u03c0\u03af\u03c3\u03c4\u03b1\u03c2\nint getColumns(void)\n{\n    int columns;\n    printf(\"\u0395\u03b9\u03c3\u03ac\u03b3\u03b5\u03c4\u03b5 \u03bc\u03ae\u03ba\u03bf\u03c2 \u03c0\u03af\u03c3\u03c4\u03b1\u03c2 \u03b1\u03c0\u03cc 1 \u03c9\u03c2 %d: \\n\", (COLUMNS-2));\n    scanf (\"%d\",&amp;columns);\n    while(columns&gt;(COLUMNS-2))  //\u0388\u03bb\u03b5\u03b3\u03c7\u03bf\u03c2 \u03b1\u03bd \u03c4\u03bf \u03bc\u03ae\u03ba\u03bf\u03c2 \u03c5\u03c0\u03b5\u03c1\u03b2\u03b1\u03af\u03bd\u03b5\u03b9 \u03c4\u03bf \u03bc\u03ad\u03b3\u03b9\u03c3\u03c4\u03bf \u03b5\u03c0\u03b9\u03c4\u03c1\u03b5\u03c0\u03cc\u03bc\u03b5\u03bd\u03bf\n    {\n        printf(\"\u03a5\u03c0\u03b5\u03c1\u03b2\u03bf\u03bb\u03b9\u03ba\u03ac \u03bc\u03b5\u03b3\u03ac\u03bb\u03bf \u03bc\u03ae\u03ba\u03bf\u03c2. \u0395\u03b9\u03c3\u03ac\u03b3\u03b5\u03c4\u03b5 \u03bd\u03ad\u03bf \u03bc\u03ae\u03ba\u03bf\u03c2: \\n\");\n        scanf(\"%d\",&amp;columns);           \n    }\n    return columns;\n}   \n\n//\u0395\u03b9\u03c3\u03b1\u03b3\u03c9\u03b3\u03ae \u03b1\u03c1\u03b9\u03b8\u03bc\u03bf\u03cd \u03b2\u03bf\u03bc\u03b2\u03ce\u03bd\nint getBombs(int r, int c)\n{   \n    int bombs;\n    printf(\"\u0395\u03b9\u03c3\u03ac\u03b3\u03b5\u03c4\u03b5 \u03c0\u03bb\u03ae\u03b8\u03bf\u03c2 \u03b2\u03bf\u03bc\u03b2\u03ce\u03bd \u03b1\u03c0\u03cc 1 \u03c9\u03c2 %d: \\n\", (r*c));\n    scanf (\"%d\",&amp;bombs);\n    while(bombs&gt;(r*c))  //\u0388\u03bb\u03b5\u03b3\u03c7\u03bf\u03c2 \u03b1\u03bd \u03c7\u03c9\u03c1\u03ac\u03bd\u03b5 \u03bf\u03b9 \u03b2\u03cc\u03bc\u03b2\u03b5\u03c2\n    {\n        printf(\"\u038c\u03c0\u03b1, \u03b4\u03b5 \u03c7\u03c9\u03c1\u03ac\u03bd\u03b5 \u03c4\u03cc\u03c3\u03b5\u03c2 \u03b2\u03cc\u03bc\u03b2\u03b5\u03c2. \u0395\u03b9\u03c3\u03ac\u03b3\u03b5\u03c4\u03b5 \u03bd\u03ad\u03bf \u03c0\u03bb\u03ae\u03b8\u03bf\u03c2 \u03b2\u03bf\u03bc\u03b2\u03ce\u03bd: \\n\");\n        scanf(\"%d\",&amp;bombs);         \n    }\n    return bombs;\n}\n\n//\u0391\u03c1\u03c7\u03b9\u03ba\u03bf\u03c0\u03bf\u03af\u03b7\u03c3\u03b5 \u03c0\u03af\u03bd\u03b1\u03ba\u03b1 \u03bc\u03b5 \u03c7\u03b1\u03c1\u03b1\u03ba\u03c4\u03ae\u03c1\u03b5\u03c2 \u03ba\u03b5\u03bd\u03bf\u03cd\nvoid initializeBoard(char board[ROWS][COLUMNS], int rows, int columns)\n{\n    int i, j;\n    for(i=0; i&lt;(ROWS); i++)\n        for(j=0; j&lt;(COLUMNS); j++)\n            board[i][j] = ' ';\n}\n\n/*\u03a4\u03bf\u03c0\u03bf\u03b8\u03ad\u03c4\u03b7\u03c3\u03b5 x \u03b2\u03cc\u03bc\u03b2\u03b5\u03c2 \u03c3\u03b5 \u03c4\u03c5\u03c7\u03b1\u03af\u03b5\u03c2 \u03b8\u03ad\u03c3\u03b5\u03b9\u03c2\n(\u03cc\u03c7\u03b9 \u03c3\u03c4\u03bf \u03c0\u03b5\u03c1\u03af\u03b3\u03c1\u03b1\u03bc\u03bc\u03b1), \u03c0\u03c1\u03bf\u03c3\u03b5\u03c7\u03bf\u03bd\u03c4\u03b1\u03c2 \u03bd\u03b1 \u03bc\u03b7 \u03c3\u03c5\u03bc\u03c0\u03ad\u03c3\u03bf\u03c5\u03bd*/\nvoid putBombs(char board[ROWS][COLUMNS], int rows, int columns, int bombs)\n{\n    int i, j, k;\n    srand(time(NULL));\n    for(k=0; k&lt;bombs; k++)              //\u0395\u03c0\u03b1\u03bd\u03ac\u03bb\u03b1\u03b2\u03b5 \u03c4\u03cc\u03c3\u03b5\u03c2 \u03c6\u03bf\u03c1\u03ad\u03c2 \u03cc\u03c3\u03b5\u03c2 \u03bf\u03b9 \u03b2\u03cc\u03bc\u03b2\u03b5\u03c2\n    {\n        do\n        {\n            i = 1 + rand()/rows;        //\u03a4\u03c5\u03c7\u03b1\u03af\u03b1 \u03b5\u03c0\u03b9\u03bb\u03bf\u03b3\u03ae \u03b3\u03c1\u03b1\u03bc\u03bc\u03ae\u03c2\n            j = 1 + rand()/columns;     //\u03a4\u03c5\u03c7\u03b1\u03af\u03b1 \u03b5\u03c0\u03b9\u03bb\u03bf\u03b3\u03ae \u03c3\u03c4\u03ae\u03bb\u03b7\u03c2\n        }\n        while(board[i][j] != ' ');      //\u0391\u03bd \u03b5\u03af\u03bd\u03b1\u03b9 \u03b2\u03cc\u03bc\u03b2\u03b1, \u03ba\u03ac\u03bd\u03b5 \u03bd\u03ad\u03b1 \u03c4\u03c5\u03c7\u03b1\u03af\u03b1 \u03b5\u03c0\u03b9\u03bb\u03bf\u03b3\u03ae\n        board[i][j] = '*';              //\u0392\u03ac\u03bb\u03b5 \u03b2\u03cc\u03bc\u03b2\u03b1\n    }\n}   \n\n/*\u03a4\u03bf\u03c0\u03bf\u03b8\u03ad\u03c4\u03b7\u03c3\u03b5 \u03b1\u03c1\u03b9\u03b8\u03bc\u03bf\u03cd\u03c2 \u03bc\u03b5 \u03c4\u03bf \u03c0\u03bb\u03ae\u03b8\u03bf\u03c2 \u03c4\u03c9\u03bd \u03b3\u03b5\u03b9\u03c4\u03bf\u03bd\u03b9\u03ba\u03ce\u03bd \u03b2\u03bf\u03bc\u03b2\u03ce\u03bd\n\u03c3\u03c4\u03b1 \u03ba\u03b5\u03bb\u03b9\u03ac \u03c0\u03bf\u03c5 \u03b4\u03b5\u03bd \u03ad\u03c7\u03bf\u03c5\u03bd \u03b2\u03cc\u03bc\u03b2\u03b5\u03c2 (\u03cc\u03c7\u03b9 \u03c3\u03c4\u03bf \u03c0\u03b5\u03c1\u03af\u03b3\u03c1\u03b1\u03bc\u03bc\u03b1)*/\nvoid putNums(char board[ROWS][COLUMNS], int rows, int columns)\n{\n    int i, j, k, l;\n    char n;                                     //\u03a0\u03bb\u03ae\u03b8\u03bf\u03c2 \u03b3\u03b5\u03b9\u03c4\u03bf\u03bd\u03b9\u03ba\u03ce\u03bd \u03b2\u03bf\u03bc\u03b2\u03ce\u03bd \u03c3\u03b5 \u03bc\u03bf\u03c1\u03c6\u03ae char\n    int m = 0;                                  //\u0391\u03c1\u03c7\u03b9\u03ba\u03bf\u03c0\u03bf\u03af\u03b7\u03c3\u03b7 \u03bc\u03b5\u03c4\u03c1\u03b7\u03c4\u03ae \u03b2\u03bf\u03bc\u03b2\u03ce\u03bd\n    for(i=1; i&lt;(rows-1); i++)                   //\u0393\u03b9\u03b1 \u03ba\u03ac\u03b8\u03b5 \u03b5\u03c3\u03c9\u03c4\u03b5\u03c1\u03b9\u03ba\u03cc \u03ba\u03b5\u03bb\u03af\n        {\n        for(j=1; j&lt;(columns-1); j++)\n            if(board[i][j] != '*')              //\u0391\u03bd \u03b4\u03b5\u03bd \u03b5\u03af\u03bd\u03b1\u03b9 \u03b2\u03cc\u03bc\u03b2\u03b1\n                for(k=(i-1); k&lt;i+2; k++)        //\u0388\u03bb\u03b5\u03b3\u03be\u03b5 \u03c4\u03b1 \u03b3\u03b5\u03b9\u03c4\u03bf\u03bd\u03b9\u03ba\u03ac \u03ba\u03b5\u03bb\u03b9\u03ac\n                    for(l=(j-1); l&lt;j+2; l++)    \n                        if(board[k][l] = '*')   //\u0393\u03b9\u03b1 \u03ba\u03b1\u03b8\u03ad\u03bd\u03b1 \u03c0\u03bf\u03c5 \u03b5\u03af\u03bd\u03b1\u03b9 \u03b2\u03cc\u03bc\u03b2\u03b1\n                            m++;                //\u0391\u03cd\u03be\u03b7\u03c3\u03b5 \u03c4\u03bf\u03bd \u03bc\u03b5\u03c4\u03c1\u03b7\u03c4\u03ae \u03b2\u03bf\u03bc\u03b2\u03ce\u03bd \u03ba\u03b1\u03c4\u03ac 1\n        char n = (char)m;                       //casting \u03b1\u03c0\u03cc int \u03c3\u03b5 char \u03b3\u03b9\u03b1 \u03c4\u03bf \u03c0\u03bb\u03ae\u03b8\u03bf\u03c2 \u03b3\u03b5\u03b9\u03c4\u03bf\u03bd\u03b9\u03ba\u03ce\u03bd \u03b2\u03bf\u03bc\u03b2\u03ce\u03bd\n        board[i][j] = 'm';                      //\u0394\u03ce\u03c3\u03b5 \u03c3\u03c4\u03bf \u03ba\u03b5\u03bb\u03af \u03c4\u03b7\u03bd \u03c4\u03b9\u03bc\u03ae \u03c4\u03bf\u03c5 \u03bc\u03b5\u03c4\u03c1\u03b7\u03c4\u03ae \u03b2\u03bf\u03bc\u03b2\u03ce\u03bd\n        }\n}\n\n//\u039a\u03b1\u03c4\u03b1\u03c7\u03ce\u03c1\u03b9\u03c3\u03b5 \u03c0\u03b5\u03c1\u03af\u03b3\u03c1\u03b1\u03bc\u03bc\u03b1 \u03c0\u03af\u03c3\u03c4\u03b1\u03c2\nvoid putBorder(char board[ROWS][COLUMNS], int rows, int columns)\n{\n    int i, j;\n    if(i==0 || i==rows+1)\n        board[i][j] = '-';\n    if(j==0 || j==columns+1)\n        board[i][j] = '|';\n}\n\n//\u03a4\u03cd\u03c0\u03c9\u03c3\u03b5 \u03c4\u03b5\u03bb\u03b9\u03ba\u03ae \u03c0\u03af\u03c3\u03c4\u03b1\nvoid printBoard(char board[ROWS][COLUMNS], int rows, int columns)\n{\n    int i,j;\n    for(i=0; i&lt;rows+1; i++)\n    {\n        printf(\"\\n\");\n        for(j=0; j&lt;columns+1; j++)\n        {\n            printf(\"%c\", board[i][j]);\n        }\n    }\n    printf(\"\\n\");\n}\n</code></pre>\n"}]