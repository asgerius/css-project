[{"tags": ["c", "macros"], "comments": [{"owner": {"reputation": 279739, "user_id": 16076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D29fm.jpg?s=128&g=1", "display_name": "Mitch Wheat", "link": "https://stackoverflow.com/users/16076/mitch-wheat"}, "edited": false, "score": 2, "creation_date": 1509578719, "post_id": 47065181, "comment_id": 81078611, "body": "you should measure......"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 3, "creation_date": 1509578753, "post_id": 47065181, "comment_id": 81078620, "body": "Yup.  Measure, then dump the macro."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1509578877, "post_id": 47065181, "comment_id": 81078648, "body": "Inlined functions are the way to go. Let the compiler do the thinking."}, {"owner": {"reputation": 2104, "user_id": 5129504, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/476994845791992/picture?type=large", "display_name": "Josh Weinstein", "link": "https://stackoverflow.com/users/5129504/josh-weinstein"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1509578927, "post_id": 47065181, "comment_id": 81078663, "body": "@wildplasser but can large functions also be inlined?"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1509579120, "post_id": 47065181, "comment_id": 81078732, "body": "Yes.See: <a href=\"https://github.com/JamesSjaalman/wakkerbot/blob/master/tokenize.c\" rel=\"nofollow noreferrer\">github.com/JamesSjaalman/wakkerbot/blob/master/tokenize.c</a> The (rather large ...) tokenize() function is <i>completely</i> inlined (hard to find it back in the assmbler output! Still: measure it."}, {"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 0, "creation_date": 1509579154, "post_id": 47065181, "comment_id": 81078739, "body": "I believe that the compiler can always ignore the <code>inline</code> qualifier"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1509579183, "post_id": 47065181, "comment_id": 81078747, "body": "the general idea is that the compiler knows when inlining will do better than calling a function. If inlining is less efficient, so would a macro be."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1509579338, "post_id": 47065181, "comment_id": 81078794, "body": "<b>If</b> the compiler ignores the <code>inline</code> (or <code>static</code>) , you pay the function-calling (and register shuffling-tetris) overhead. The compiler <i>should</i> know. And,wrt thecode: <code>if(chPtr[1] == &#39;d&#39;)...</code> Try to avoid token-lookahead. Instead: introduce a state-variable."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 1, "creation_date": 1509580123, "post_id": 47065181, "comment_id": 81079011, "body": "And: both your implementations suffer from the fact that they are unable to report back to the caller how many characters they have consumed: <code>void Lex_Char(...)</code>"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1509581845, "post_id": 47065181, "comment_id": 81079489, "body": "Most compilers have pragam or attributes to force inclining. Avoid macros at any price"}], "answers": [{"tags": [], "owner": {"reputation": 2104, "user_id": 5129504, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/476994845791992/picture?type=large", "display_name": "Josh Weinstein", "link": "https://stackoverflow.com/users/5129504/josh-weinstein"}, "is_accepted": false, "score": 0, "last_activity_date": 1509597155, "creation_date": 1509597155, "answer_id": 47067639, "question_id": 47065181, "link": "https://stackoverflow.com/questions/47065181/are-macros-for-large-switch-statements-faster-than-functions-with-large-switch-s/47067639#47067639", "title": "Are macros for large switch statements faster than functions with large switch statements?", "body": "<p>So it turns out after a timed test, and repeated under an identical for loop, the macro version is about twice as fast as the regular function.</p>\n\n<p>Here's is my complete timer and full file compiled to produce the result</p>\n\n<pre><code>#include \"stdio.h\"\n#include \"stdlib.h\"\n#include \"time.h\"\n\n\n\n#define LEX_CHAR(chPtr, tag) switch(*chPtr) { \\\n    case 'a':\\\n    case 'b':\\\n    case 'c':\\\n    case 'e':\\\n    case '$': tag = Tag_A;\\\n              break; \\\n    case '0':\\\n    case '1':\\\n    case '2':\\\n    case '3': tag = Tag_B;\\\n             break;\\\n    case 'r':\\\n          if(chPtr[1] == 'd' || chPtr[1] == '@') tag = Tag_C;\\\n          else tag = Tag_B;\\\n          break;\\\n    case '+':\\\n    case '#':\\\n    case '!':\\\n         if(chPtr[1] == 'd') tag = Tag_C;\\\n    case '-':\\\n    case '^':\\\n            tag = Tag_D;\\\n            break;\\\n    default:\\\n            tag = Tag_B;\\\n}\n\nenum Tag\n{\n  Tag_A,\n  Tag_B,\n  Tag_C,\n  Tag_D\n};\n\ntypedef enum Tag Tag;\n\n\nvoid Lex_Char(char* chPtr, Tag* tag)\n{\nswitch(*chPtr) { \n    case 'a':\n    case 'b':\n    case 'c':\n    case 'e':\n    case '$': *tag = Tag_A;\n              break; \n    case '0':\n    case '1':\n    case '2':\n    case '3': *tag = Tag_B;\n             break;\n    case 'r':\n          if(chPtr[1] == 'd' || chPtr[1] == '@') *tag = Tag_C;\n          else *tag = Tag_B;\n          break;\n    case '+':\n    case '#':\n    case '!':\n         if(chPtr[1] == 'd') *tag = Tag_C;\n    case '-':\n    case '^':\n            *tag = Tag_D;\n            break;\n    default:\n            *tag = Tag_B;\n     }  \n}\n\n\n\n\nint main(){\n    Tag tagPnt = Tag_D;\n    char* code = \"#he\";\n\n    clock_t start, end;\n\n\n    start = clock();\n\n    //for(size_t i = 0; i&lt;10000;i++) Lex_Char(code, &amp;tagPnt); Number of seconds: 0.000067\n    for(size_t i = 0; i&lt;10000;i++) LEX_CHAR(code, tagPnt); // Number of seconds: 0.000032\n\n    end = clock();\n    printf( \"Number of seconds: %f\\n\", (end-start)/(double)CLOCKS_PER_SEC );\n    printf(\"%d is tag\\n\", tagPnt);\n\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Result:</strong></p>\n\n<ul>\n<li>Function: 0.000067</li>\n<li>Macro: 0.000032</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 2104, "user_id": 5129504, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/476994845791992/picture?type=large", "display_name": "Josh Weinstein", "link": "https://stackoverflow.com/users/5129504/josh-weinstein"}, "edited": false, "score": 0, "creation_date": 1509641788, "post_id": 47075775, "comment_id": 81110465, "body": "Yea it appears GNU also says inline functions are as fast as macros <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Inline.html\" rel=\"nofollow noreferrer\">gcc.gnu.org/onlinedocs/gcc/Inline.html</a>"}], "tags": [], "owner": {"reputation": 96, "user_id": 8713143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b515663f5d70775ad31c7b8b426e932a?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/8713143/david"}, "is_accepted": true, "score": 1, "last_activity_date": 1509627005, "creation_date": 1509627005, "answer_id": 47075775, "question_id": 47065181, "link": "https://stackoverflow.com/questions/47065181/are-macros-for-large-switch-statements-faster-than-functions-with-large-switch-s/47075775#47075775", "title": "Are macros for large switch statements faster than functions with large switch statements?", "body": "<p>First, note that when you have code in a macro, the compiler <em>must</em> insert it inline in the calling code.  When you make it a function, the compiler <em>may</em> insert it inline.</p>\n\n<p>You should also understand what happens when you declare a function like:</p>\n\n<pre><code>void Lex_Char(char* chPtr, Tag* tag) { ... }\n</code></pre>\n\n<p>This tells the compiler that the function is accessible from other C files - the compiler has to make a full version of this function.  Inlining the function would then mean making two copies of the code - one for the full function version, and one inlined at the call site.  The compiler will be reluctant to do this unless your optimisation settings put a strong emphasis on size over speed.</p>\n\n<p>If a function is only to be used within the current translation unit, you should mark it \"static\":</p>\n\n<pre><code>static void Lex_Char(char* chPtr, Tag* tag) { ... }\n</code></pre>\n\n<p>This tells the compiler that it is inaccessible from outside.  If the function is only ever used once within the current module, then the compiler can happily inline it - doing so is \"free\".</p>\n\n<p>You can also mark the function as \"static inline\", giving the compiler a hint that you are keen on it being inlined.</p>\n\n<p>Of course, this all depends on having optimisation enabled for the compiler - if you don't enable optimisation, all your time testing is worthless.</p>\n\n<p>An inlined static function is always a better choice than a macro (when you have the choice - macros can be more flexible than inline functions).  The code is clearer to write, and you have better static warning and error checking.  The resulting code (assuming optimisation) will be the same.</p>\n\n<p>Your timing tests, incidentally, are pointless here - the compiler will see that the values involved don't change and will not run the function more than once, when it is inlined and optimisation is enabled.  It might not run it at all, but pre-calculate the result at compile time.</p>\n\n<p>Oh, and you've forgotten a \"break\" in the case '!'.</p>\n"}], "owner": {"reputation": 2104, "user_id": 5129504, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/476994845791992/picture?type=large", "display_name": "Josh Weinstein", "link": "https://stackoverflow.com/users/5129504/josh-weinstein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 47075775, "answer_count": 2, "score": 1, "last_activity_date": 1509627005, "creation_date": 1509578512, "question_id": 47065181, "link": "https://stackoverflow.com/questions/47065181/are-macros-for-large-switch-statements-faster-than-functions-with-large-switch-s", "title": "Are macros for large switch statements faster than functions with large switch statements?", "body": "<p>So, for inline functions (1-2 statements) and small macros, it seems that there isn't too much of a performance difference between using a macro or an inline function.</p>\n\n<p>However, given the function call overhead for a larger function, I am wondering for,</p>\n\n<ul>\n<li>GCC 7.0</li>\n<li>C language (not C++)</li>\n<li>OSX (not sure if this would vary that much cross platform)</li>\n</ul>\n\n<p>Would using large macros for a switch statement be faster than putting them in an equivalent function call? This is on my part assuming such large functions will not be inlined. Here is my example code.</p>\n\n<pre><code>#define LEX_CHAR(chPtr, tag) switch(*chPtr) { \\\n    case 'a':\\\n    case 'b':\\\n    case 'c':\\\n    case 'e':\\\n    case '$': tag = Tag_A;\\\n              break; \\\n    case '0':\\\n    case '1':\\\n    case '2':\\\n    case '3': tag = Tag_B;\\\n             break;\\\n    case 'r':\\\n          if(chPtr[1] == 'd' || chPtr[1] == '@') tag = Tag_c;\\\n          else tag = Tag_B;\\\n          break;\\\n    case '+':\\\n    case '#':\\\n    case '!':\\\n         if(chPtr[1] == 'd') tag = Tag_C;\\\n    case '-':\\\n    case '^':\\\n            tag = Tag_D;\\\n            break;\\\n    default:\\\n            tag = Tag_B;\\\n}\n\nenum Tag\n{\n  Tag_A,\n  Tag_B,\n  Tag_C,\n  Tag_D\n};\n\ntypedef enum Tag Tag;\n\n\nvoid Lex_Char(char* chPtr, Tag* tag)\n{\nswitch(*chPtr) { \n    case 'a':\n    case 'b':\n    case 'c':\n    case 'e':\n    case '$': *tag = Tag_A;\n              break; \n    case '0':\n    case '1':\n    case '2':\n    case '3': *tag = Tag_B;\n             break;\n    case 'r':\n          if(chPtr[1] == 'd' || chPtr[1] == '@') *tag = Tag_C;\n          else *tag = Tag_B;\n          break;\n    case '+':\n    case '#':\n    case '!':\n         if(chPtr[1] == 'd') *tag = Tag_C;\n    case '-':\n    case '^':\n            *tag = Tag_D;\n            break;\n    default:\n            *tag = Tag_B;\n     }  \n}\n</code></pre>\n\n<p>So between these two, the macro and the function, is there any optimization in using the macro over the function?</p>\n"}, {"tags": ["c", "embedded", "rgb", "lcd", "stm32f4discovery"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8870665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77690d27eb8ca2a0f5d63b1afc7461a4?s=128&d=identicon&r=PG&f=1", "display_name": "hubert", "link": "https://stackoverflow.com/users/8870665/hubert"}, "edited": false, "score": 0, "creation_date": 1510238826, "post_id": 47190015, "comment_id": 81358104, "body": "Thank you for your reply. I have experimented with the length of sync pulses but that doesn&#39;t give any results. The problem might be that this display supports only HV (Sync mode) and doesn&#39;t support DE mode. LTDC interface might support only DE mode. The way LTDC sends data to the display might be not suitable for Sync mode. However, I couldn&#39;t find any inforamtion in LTDC documenttion about different operating modes."}], "tags": [], "owner": {"reputation": 106, "user_id": 1139455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6d7ed41fda91883984016201e9cf956?s=128&d=identicon&r=PG", "display_name": "user1139455", "link": "https://stackoverflow.com/users/1139455/user1139455"}, "is_accepted": false, "score": 0, "last_activity_date": 1510176645, "creation_date": 1510176645, "answer_id": 47190015, "question_id": 47064750, "link": "https://stackoverflow.com/questions/47064750/control-wvga-display-with-stm32f429-discovery-ltdc/47190015#47190015", "title": "Control WVGA display with stm32f429-discovery LTDC", "body": "<p>It could be something else, but I can see a problem with your timing values.</p>\n\n<p>The back porch for both horizontal and vertical includes the sync pulses, but there must be a sync pulse width.  My observation is that you have tried to get the total clocks for h = 1056 and v = 525 as per the data sheet by setting the sync pulses to 0.  That won't work.</p>\n\n<p>I would make the hsync pulse 20 and vysnc 10.  The total clocks will be the same, but it is not critical that they match the spec sheet. </p>\n"}], "owner": {"reputation": 1, "user_id": 8870665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77690d27eb8ca2a0f5d63b1afc7461a4?s=128&d=identicon&r=PG&f=1", "display_name": "hubert", "link": "https://stackoverflow.com/users/8870665/hubert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 957, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1538175529, "creation_date": 1509575835, "last_edit_date": 1538175529, "question_id": 47064750, "link": "https://stackoverflow.com/questions/47064750/control-wvga-display-with-stm32f429-discovery-ltdc", "title": "Control WVGA display with stm32f429-discovery LTDC", "body": "<p>I am trying to output some data on the 7 inch TFT-LCD display (MCT070PC12W800480LML) using LCD-TFT display controller (LTDC 18 bits) on STM32F4.</p>\n\n<p>LTDC interface setting are configured in CubeMx. In the program lcd data buffer is created with some values and it's starting address is mapped to the LTDC frame buffer start address.</p>\n\n<p>At this moment display doesn't react to data sent by the LTDC. It only shows white and black strips, after i connect ground and power for digital circuit to the 3 volts source. VLED+ is connected to the 9 volts source. The VSYNC, HSYNC and CLOCK signals are generated by the LTDC and they match with specified values. I measured them on LCD strip, so the connection should be right. I also tried putting pulse on the LCD reset pin, but that doesn't make any sense.</p>\n\n<p>The timing setting might be wrong. \n<img src=\"https://i.stack.imgur.com/6UnJT.png\" alt=\"My current settings:\"></p>\n\n<p>LTDC clock is 33 MHz.</p>\n\n<p>Here is the link to the diplay datasheet <a href=\"http://www.farnell.com/datasheets/2151568.pdf?_ga=2.128714188.1569403307.1506674811-10787525.1500902348\" rel=\"nofollow noreferrer\">http://www.farnell.com/datasheets/2151568.pdf?_ga=2.128714188.1569403307.1506674811-10787525.1500902348</a> I saw some other WVGA displays using the same timing for synchronization signals, so i assume that timings are standard for that kind of displays.   </p>\n\n<p>Maybe signal polarity is wrong or i am missing something else. The program i am using now, worked on  stm32f429-discovery build in LCD i just changed the timings. Any suggestions?</p>\n\n<p>Thank you.  </p>\n"}, {"tags": ["c", "pipe", "fork", "zombie-process", "xv6"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1509576877, "post_id": 47064462, "comment_id": 81078037, "body": "How would using <code>wait</code> set the schedule?"}, {"owner": {"reputation": 1167, "user_id": 3066571, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c229fff899ffd9f6ace71937b5cfda5d?s=128&d=identicon&r=PG&f=1", "display_name": "user3066571", "link": "https://stackoverflow.com/users/3066571/user3066571"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1509636731, "post_id": 47064462, "comment_id": 81106880, "body": "Because the parent waits for the child to complete work before running itself, instead of both just sending work to the Scheduler and it deciding who goes next."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1509637923, "post_id": 47064462, "comment_id": 81107830, "body": "Have the parent fork two children and let them run free."}], "owner": {"reputation": 1167, "user_id": 3066571, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c229fff899ffd9f6ace71937b5cfda5d?s=128&d=identicon&r=PG&f=1", "display_name": "user3066571", "link": "https://stackoverflow.com/users/3066571/user3066571"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1057, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1509574085, "creation_date": 1509574085, "question_id": 47064462, "link": "https://stackoverflow.com/questions/47064462/c-xv6-avoid-zombie-in-forks-without-wait-or-pipes", "title": "C XV6 avoid Zombie in forks without wait() or pipes", "body": "<p>I have an Assignment (yes I know everyone loves homework questions), in which I'm supposed to be allowing the CPU scheduler pick which of two forked processes it runs next.  Essentially, I <code>fork()</code>, then pass a number to an <code>exec()</code> in each fork that simply counts up to that number, printing to screen.  The objective is to show how the Scheduler is Round Robining between each one.  But they keep throwing <code>Zombie!</code> a little ways in.</p>\n\n<p>Doing some research, it's because I need to have the parent <code>wait()</code> on the child, or at the least use pipes to make sure they don't stumble on each other.  But that defeats the purpose of what I've set out to do, as I am now arbitrarily setting the schedule through <code>wait()</code> or pipes.</p>\n\n<p>Does anyone know how to let two forked processes just run next to each other without throwing a <code>Zombie!</code>without making them wait on each other?</p>\n"}, {"tags": ["c", "arrays", "string", "random", "malloc"], "comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1509573289, "post_id": 47064165, "comment_id": 81076806, "body": "try <code>printf(&quot;%d\\n&quot;, &amp;randomWord[count]);</code> with %s instead of %d, but make sure you zero-terminate the strings before."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1509574298, "post_id": 47064165, "comment_id": 81077182, "body": "What do you think <code>&amp;randomWord[count]</code> is?"}], "answers": [{"tags": [], "owner": {"reputation": 985, "user_id": 6531241, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/XySrX.jpg?s=128&g=1", "display_name": "Karim Manaouil", "link": "https://stackoverflow.com/users/6531241/karim-manaouil"}, "is_accepted": false, "score": 0, "last_activity_date": 1509573400, "creation_date": 1509573400, "answer_id": 47064336, "question_id": 47064165, "link": "https://stackoverflow.com/questions/47064165/how-to-create-an-array-of-100-random-strings-in-c/47064336#47064336", "title": "How to create an array of 100 random strings in C", "body": "<p>You are actually using the wrong format specifier:<br></p>\n\n<p><code>%d</code> is used to output a signed decimal integer.<br>\n<code>%c</code> is used to output a character. <br></p>\n\n<p>Your inner <code>printf</code> should become : <code>printf(\"%c\\n\", randomLetter)</code></p>\n"}, {"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1509574201, "post_id": 47064346, "comment_id": 81077149, "body": "You may want to comment additionally on just how wrong <code>&amp;randomWord[count]</code> is and what that actually does."}, {"owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1509575140, "post_id": 47064346, "comment_id": 81077483, "body": "@David C. Rankin: Done. Hope it helps OP."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1509576478, "post_id": 47064346, "comment_id": 81077912, "body": "Good job. That was just wonky as heck and indicated a clear misunderstanding of what was going on. I&#39;m sure it will help. Letting that misconception go would just be down right dangerous.... (not the mention the <i>Undefined Behavior</i> invoked by printing the pointer address with <code>%d</code>)..."}], "tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": false, "score": 2, "last_activity_date": 1509575099, "last_edit_date": 1509575099, "creation_date": 1509573453, "answer_id": 47064346, "question_id": 47064165, "link": "https://stackoverflow.com/questions/47064165/how-to-create-an-array-of-100-random-strings-in-c/47064346#47064346", "title": "How to create an array of 100 random strings in C", "body": "<p>First, as you know for sure, you do not write into <code>randomWord[count]</code>, such that you cannot print out the result later.</p>\n\n<p>Second, you'd need to terminate each string with <code>\\0</code>, and you should use <code>printf(\"%s\\n\", randomWord[count]);</code>, i.e. without the <code>&amp;</code> and with <code>%s</code>. Not terminating a string and using it in <code>printf(\"%s\"...</code> very likely yields undefined behaviour; When printing a string, use <code>%s</code>, not <code>%d</code>. And when using <code>%s</code>, <code>printf</code> requires a pointer to the first character of the string. As you defined <code>char *randomWord[100]</code>, <code>randomWord[count]</code> stands for such a pointer to a character, whereas <code>&amp;randomWord[count]</code> would stand for the address of the pointer, not of the string's first character.</p>\n\n<pre><code>wordLength = ((rand() % 10) + 3);  // get random size of word\nrandomWord[count] = malloc(wordLength + 1); // allocated space for word\nfor(number = 0; number &lt; wordLength; number++)\n{\n    randomLetter = 'A' + (rand() % 26);\n    randomWord[count][number] = randomLetter;\n    // printf(\"%c\", randomLetter);\n}\nrandomWord[count][wordLength] = '\\0';\nprintf(\"%s\\n\", randomWord[count]);\n</code></pre>\n\n<p>BTW: Note that <code>(rand() % 10) + 3)</code> gives random lengths between <code>3</code> and <code>12</code>, not between <code>3</code> and <code>10</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 0, "last_activity_date": 1509577611, "creation_date": 1509577611, "answer_id": 47065041, "question_id": 47064165, "link": "https://stackoverflow.com/questions/47064165/how-to-create-an-array-of-100-random-strings-in-c/47065041#47065041", "title": "How to create an array of 100 random strings in C", "body": "<p>I won't plow the same ground plowed by the other answers. You now understand that:</p>\n\n<pre><code>printf(\"%d\\n\", &amp;randomWord[count]);\n</code></pre>\n\n<p>was attempting to print the <em>address of the pointer</em> <code>randomWord[count]</code> and not at all the character you were attempting to print the ASCII value of. Remember <code>&amp;</code> is the <em>address of</em> unary operator while <code>*</code> is the <em>dereference</em> operator. (which was invoking <em>Undefined Behavior</em> by attempting to print a pointer address with the <code>%d</code> format specifier. Use <code>%p</code> to print addresses)</p>\n\n<p>Rather than invent each character from a <em>modulo</em> operation, it may be easier to simply pick a random index from a literal <code>A-Za-z0-9</code> (or whatever character set you wish to include). It is really \"six to one\" a \"half-dozen to another\", but it may be conceptually easier to keep track of what you are doing.</p>\n\n<p>Before looking at an alternative, let's address using <em>magic numbers</em> in your code. (don't do it). If you need constants for use in your code, then <code>#define</code> them or use a global <code>enum</code> to do the same. For example, if you need constants for the <em>minimum length</em> of string to generate (say <code>MINL</code>) and max length <code>MAXL</code> or the maximum number of strings <code>MAXS</code> (and the number of characters to choose from <code>NCHR</code>), you can simply define constants with:</p>\n\n<pre><code>enum { MINL = 3, MAXL = 10, NCHR = 62, MAXS = 100 };\n</code></pre>\n\n<p>That way you have a single convenient location at the top of your code to adjust values as required -- without having to pick through your variable and loop declarations to do it.</p>\n\n<p>Now the alternative. You can simply declare a string literal <code>alpha</code> with the characters you wish to create <code>100</code> random strings from. Then all that is required is to get a random length for each, allocate <code>length + 1</code> bytes of storage, and create <code>length</code> random numbers between <code>0</code> and <code>NCHR - 1</code> assigning the character to the indexes in your string and nul-terminating at the end.</p>\n\n<p>(<strong>note:</strong> by using <code>calloc</code>, you have already filled the final byte in each string with zero, effectively providing for nul-termination, but it is good practice to affirmatively nul-terminate each string)</p>\n\n<p>Putting that altogether, you could do something like the following:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\nenum { MINL = 3, MAXL = 10, NCHR = 62, MAXS = 100 };\n\nint main (void) {\n\n    char *alpha = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\"  /* NCHR long literal */\n                  \"abcdefghijklmnopqrstuvwxyz\"  /* of chars to shuffle */\n                  \"0123456789\",\n        *a[MAXS] = { NULL };        /* array of pointers to char  */\n    int modlen = MAXL - MINL + 1;   /* mod length for 3 - 10 char */\n\n    srand (time (NULL));            /* seed random number generator */\n\n    for (int i = 0; i &lt; MAXS; i++) {    /* loop to create MAXS strings */\n        int len = rand() % modlen + MINL;       /* get length 3 - 10 */\n        if (!(a[i] = calloc (len + 1, 1))) {    /* allocate memory */\n            fprintf (stderr, \"error: memory exhausted 'a[%d]'.\\n\", i);\n            return 1;\n        }\n        for (int j = 0; j &lt; len; j++)       /* loop over len chars */\n            a[i][j] = alpha[rand() % NCHR]; /* assing char from alpha */\n        a[i][len] = 0;              /* affirmatively nul-terminate */\n    }\n\n    for (int i = 0; i &lt; MAXS; i++) {        /* output results */\n        printf (\"a[%2d] : %s\\n\", i, a[i]);\n        free (a[i]);        /* don't forget to free your memory */\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Example Use/Output</strong></p>\n\n<pre><code>$ ./bin/str_randshuffle\na[ 0] : KhwC0FhKv\na[ 1] : j4U4zwfHf\na[ 2] : vSd\na[ 3] : 4jWlzWJ725\na[ 4] : q9h\na[ 5] : sxYmHSZ1w\na[ 6] : WSPot\na[ 7] : hTD\na[ 8] : GXQ\na[ 9] : NJD3GksyYE\na[10] : dUvVGPrWe\n....\na[92] : vHl5\na[93] : 5LZjkFYl\na[94] : Q4Y\na[95] : 67sWds\na[96] : YlQWDuFKV8\na[97] : PHJwrOLQ6b\na[98] : U0EPiarOi\na[99] : zyZ2gcB2aw\n</code></pre>\n\n<p>Look over all the answers. There are good points made. Then let us know if you have any further questions.</p>\n"}, {"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": true, "score": 0, "last_activity_date": 1509578893, "creation_date": 1509578893, "answer_id": 47065246, "question_id": 47064165, "link": "https://stackoverflow.com/questions/47064165/how-to-create-an-array-of-100-random-strings-in-c/47065246#47065246", "title": "How to create an array of 100 random strings in C", "body": "<p>There are multiple problems:</p>\n\n<ul>\n<li>You do not store the characters into the allocated arrays.</li>\n<li>You compute one random letter too few, starting the loop at <code>0</code> would fix this.</li>\n<li>You do not print the words, but merely their addresses.</li>\n</ul>\n\n<p>Here is how to fix the code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(void) {\n    int count, number;\n    char *randomWord[100]; // 1-d array of pointers to char\n\n    // generate 100 strings or random sizes between 3 and 10 letters\n    for (count = 0; count &lt; 100; count++) {\n        int wordLength = 3 + rand() % 8;  // get random word size in 3..10\n        randomWord[count] = malloc(wordLength + 1); // allocated space for word\n        for (number = 0; number &lt; wordLength; number++) {\n            randomWord[count][number] = 'A' + rand() % 26;\n        }\n        randomWord[count][number] = '\\0';\n        printf(\"%s\\n\", randomWord[count]);\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 4163899, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EE0En.jpg?s=128&g=1", "display_name": "blazek", "link": "https://stackoverflow.com/users/4163899/blazek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1070, "favorite_count": 0, "accepted_answer_id": 47065246, "answer_count": 4, "score": 1, "last_activity_date": 1509578893, "creation_date": 1509572592, "last_edit_date": 1509578469, "question_id": 47064165, "link": "https://stackoverflow.com/questions/47064165/how-to-create-an-array-of-100-random-strings-in-c", "title": "How to create an array of 100 random strings in C", "body": "<p>I'm trying to create an array of 100 strings of random sizes between 3 and 10 letters long in C but I'm having a bit of trouble. This is what I have so far...</p>\n\n<pre><code>int main() {\n    int count, number;\n    char *randomWord[100]; // 1-d array of pointers to char\n    char randomLetter;\n    int wordLength;\n\n    // generate 100 strings or random sizes between 3 and 10 letters\n    for (count = 0; count &lt; 100; count++) {\n        wordLength = ((rand() % 10) + 3);  // get random size of word\n        randomWord[count] = malloc(wordLength + 1); // allocated space for word\n        for (number = 1; number &lt; wordLength; number++) {\n            randomLetter = 'A' + (rand() % 26);\n            //randomWord[count] =\n            printf(\"%d\\n\", randomLetter);\n        }\n\n        printf(\"%d\\n\", &amp;randomWord[count]);\n    }\n}\n</code></pre>\n\n<p>The output I get looks like this...</p>\n\n<pre><code>72\n90\n82\n73\n87\n75\n66\n65\n6356712\n88\n66\n71\n70\n67\n66\n67\n69\n89\n72\n74\n6356716\n71\n73\n88\n87\n6356720\n</code></pre>\n\n<p>Any help or direction would be appreciated.</p>\n"}, {"tags": ["python", "c", "python-3.x", "object", "struct"], "answers": [{"comments": [{"owner": {"reputation": 8239, "user_id": 4056181, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/G0SRK.jpg?s=128&g=1", "display_name": "jmd_dk", "link": "https://stackoverflow.com/users/4056181/jmd-dk"}, "edited": false, "score": 0, "creation_date": 1509572707, "post_id": 47064171, "comment_id": 81076542, "body": "Yea, let&#39;s disregard custom made <code>class</code>es. Regarding the size of the <code>struct</code>, isn&#39;t that exactly what <code>sys.getsizeof(obj)</code> provides?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 8239, "user_id": 4056181, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/G0SRK.jpg?s=128&g=1", "display_name": "jmd_dk", "link": "https://stackoverflow.com/users/4056181/jmd-dk"}, "edited": false, "score": 0, "creation_date": 1509572797, "post_id": 47064171, "comment_id": 81076580, "body": "@jmd_dk: Nope. It includes other memory that belongs to the object but isn&#39;t actually part of the struct, such as a list&#39;s backing buffer."}], "tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": true, "score": 0, "last_activity_date": 1509573002, "last_edit_date": 1509573002, "creation_date": 1509572613, "answer_id": 47064171, "question_id": 47063996, "link": "https://stackoverflow.com/questions/47063996/printing-the-underlying-c-struct-representation-of-cpython-objects/47064171#47064171", "title": "Printing the underlying C struct representation of CPython objects", "body": "<p>The problem with trying to do this automatically is that there's no general way to get the layout of a Python type. Heck, there isn't even a general way to tell how big the structure is. Also, types created with the <code>class</code> statement don't quite use <code>struct</code>s for their instances, though they mostly work like structs.</p>\n\n<p>You'd need to provide struct definitions yourself for any type you want to work with, and you'd still need custom handling for types like <code>int</code> and <code>str</code> with particularly weird representations.</p>\n"}], "owner": {"reputation": 8239, "user_id": 4056181, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/G0SRK.jpg?s=128&g=1", "display_name": "jmd_dk", "link": "https://stackoverflow.com/users/4056181/jmd-dk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 1, "accepted_answer_id": 47064171, "answer_count": 1, "score": 0, "last_activity_date": 1509573002, "creation_date": 1509571855, "question_id": 47063996, "link": "https://stackoverflow.com/questions/47063996/printing-the-underlying-c-struct-representation-of-cpython-objects", "title": "Printing the underlying C struct representation of CPython objects", "body": "<p>Under the hood, any Python object is implemented as a C struct with some fields. A 16 bytes <a href=\"https://docs.python.org/3/c-api/structures.html#c.PyObject\" rel=\"nofollow noreferrer\">header</a> containing the reference count and a pointer to the object's type is always present on this struct. This is at least the case for 64bit stock CPython 3.x, for which my question is restricted.</p>\n\n<p>For academic purposes and the fun of it, I'm in search of a function <code>print_object(obj)</code> which prints out this underlying <code>struct</code> of the passed object <code>obj</code>.</p>\n\n<p>In terms of implementation, the simplest Python object is perhaps the <code>float</code>, which is just a C <code>double</code> appended to the previously mentioned header. In this simple case I've been able to write my own such function using the <code>ctypes</code> and <code>struct</code> modules:</p>\n\n<pre><code>import collections, ctypes, struct, sys\n\nheader_fields = ['refcount', 'typeptr']\nFloat = collections.namedtuple('Float', header_fields + ['value'])\n\ndef print_object(obj):\n    ptr = id(obj)\n    size = sys.getsizeof(obj)\n    byterep = ctypes.string_at(ptr, size)\n    header = struct.unpack('qq', byterep[:16])\n    if isinstance(obj, float):\n        obj_struct = Float(*header, *struct.unpack('d', byterep[16:]))\n    elif isinstance(obj, int):\n        ...\n    print(obj_struct)\n\n# Try it out\na = 1.23\nprint_object(a)\nprint('The typeptr should be equal to', id(float))\nprint('\\nNow the refcount should have increased by 1:')\nb = a\nprint_object(a)\n</code></pre>\n\n<p>In essence, this function reads the underlying memory of the object and builds a copy of the C <code>struct</code> as a Python <code>namedtuple</code>, effectively re-representing a piece of Python in itself. The code should run on Python 3.5 and up. It prints</p>\n\n<blockquote>\n  <p>Float(refcount=5, typeptr=140429307606720, value=1.23)<br>\n   The typeptr should be equal to 140429307606720</p>\n  \n  <p>Now the refcount should have increased by 1:<br>\n  Float(refcount=6, typeptr=140429307606720, value=1.23)</p>\n</blockquote>\n\n<p>The above <code>print_object</code> function works great for <code>float</code>s, and the same method could be extended to (I suppose?) all other types. Does any library out there (or perhaps even the Python stadard library) contain such functionality?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 40865, "user_id": 10431, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/22aac6106c44ae4078bd4c0a564714e0?s=128&d=identicon&r=PG", "display_name": "Keith Nicholas", "link": "https://stackoverflow.com/users/10431/keith-nicholas"}, "edited": false, "score": 1, "creation_date": 1509571939, "post_id": 47063909, "comment_id": 81076182, "body": "well, pile is not initialized to point to anything in your example code"}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1509571942, "post_id": 47063909, "comment_id": 81076183, "body": "you&#39;re not allocating any memory for <code>pile</code>. As soon as you do <code>queue-&gt;</code> in <code>enqueue</code> you&#39;re invoking undefined behavior."}, {"owner": {"reputation": 43, "user_id": 8786170, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-yBppw9l8CdY/AAAAAAAAAAI/AAAAAAAAAVM/XFMGwNfiTeQ/photo.jpg?sz=128", "display_name": "Tina Tran", "link": "https://stackoverflow.com/users/8786170/tina-tran"}, "edited": false, "score": 0, "creation_date": 1509572274, "post_id": 47063909, "comment_id": 81076338, "body": "my bad, forgot to add it in my example code. Thanks!"}, {"owner": {"reputation": 40865, "user_id": 10431, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/22aac6106c44ae4078bd4c0a564714e0?s=128&d=identicon&r=PG", "display_name": "Keith Nicholas", "link": "https://stackoverflow.com/users/10431/keith-nicholas"}, "edited": false, "score": 0, "creation_date": 1509572312, "post_id": 47063909, "comment_id": 81076361, "body": "still your bad, it&#39;s still not pointing to anything"}, {"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 0, "creation_date": 1509579359, "post_id": 47063909, "comment_id": 81078799, "body": "if you run your code in a debugger like <code>gdb</code> it will show you exactly where the line of code that hits the exception is.  You can then show the values of the variables that are causing the problem"}, {"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "reply_to_user": {"reputation": 40865, "user_id": 10431, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/22aac6106c44ae4078bd4c0a564714e0?s=128&d=identicon&r=PG", "display_name": "Keith Nicholas", "link": "https://stackoverflow.com/users/10431/keith-nicholas"}, "edited": false, "score": 0, "creation_date": 1509582803, "post_id": 47063909, "comment_id": 81079756, "body": "<code>pile</code> definitely needs to be initialized as @KeithNicholas states.  I think that you would crash in enqueue first."}], "answers": [{"tags": [], "owner": {"reputation": 40865, "user_id": 10431, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/22aac6106c44ae4078bd4c0a564714e0?s=128&d=identicon&r=PG", "display_name": "Keith Nicholas", "link": "https://stackoverflow.com/users/10431/keith-nicholas"}, "is_accepted": false, "score": 0, "last_activity_date": 1509589615, "last_edit_date": 1509589615, "creation_date": 1509572498, "answer_id": 47064134, "question_id": 47063909, "link": "https://stackoverflow.com/questions/47063909/war-card-game-in-c/47064134#47064134", "title": "War card game in C", "body": "<p>you have a lot of pointers that don't point to things, you need to allocate memory for them, perhaps something like</p>\n\n<pre><code>struct Deck* newDeck() {\n    struct Deck* p = malloc(sizeof(struct Deck));\n    p-&gt;Top = NULL;\n    return p;\n}\n\nvoid displayDeck(struct Deck* deck)\n{\n    if(deck == NULL)\n    {\n        printf(\"No Deck\\r\\n\");\n        return;\n    }\n    struct Card* p = deck-&gt;Top;\n    while(p != NULL)\n    {\n        printf(\"%d\\r\\n\", p-&gt;value);\n        p = p-&gt;next;\n    }\n}\n\nint main() {\n\n    pile = newDeck();\n\n    enqueue(pile, 2);\n    enqueue(pile, 3);\n    enqueue(pile, 4);\n\n    displayDeck(pile);\n\n    printf(\"%d\\r\\n\", dequeue(pile));\n    printf(\"%d\\r\\n\", dequeue(pile));\n    printf(\"%d\\r\\n\", dequeue(pile));\n    printf(\"%d\\r\\n\", dequeue(pile));    \n\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/5Px3v.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5Px3v.png\" alt=\"enter image description here\"></a> </p>\n\n<p>Also</p>\n\n<pre><code>if (queue-&gt;Top-&gt;next == NULL) queue-&gt;Top = NULL;     \nelse { queue-&gt;Top = queue-&gt;Top-&gt;next; }\n</code></pre>\n\n<p>is just the same as</p>\n\n<pre><code>queue-&gt;Top = queue-&gt;Top-&gt;next; \n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 8786170, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-yBppw9l8CdY/AAAAAAAAAAI/AAAAAAAAAVM/XFMGwNfiTeQ/photo.jpg?sz=128", "display_name": "Tina Tran", "link": "https://stackoverflow.com/users/8786170/tina-tran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 193, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1509589615, "creation_date": 1509571493, "last_edit_date": 1509573213, "question_id": 47063909, "link": "https://stackoverflow.com/questions/47063909/war-card-game-in-c", "title": "War card game in C", "body": "<p>Beginner coder here. I am currently taking a class where I have to make a card war game in a c program. I have a segmentation fault and I'm pretty sure it's happening in my queue/enqueue/dequeue functions. Can anyone help me? </p>\n\n<p>This isn't all the code, just a smaller test case I used to figure out I have a segmentation fault. </p>\n\n<p>Edit: posted all the code instead</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n#include &lt;stdbool.h&gt;\n\n/// Valid cards in our deck\n/// 2\n/// 3\n/// ...\n/// 9\n/// 10\n/// Jack  = 11\n/// Queen = 12\n/// King  = 13\n/// Ace   = 14\n\n//global variables\nstruct Deck{\n    struct Card* Top;\n};\n\nstruct Card{\n    int value;\n    struct Card* next;\n};\n\nstruct Deck* plyhand1;\nstruct Deck* plyhand2;\n\n#define deckSize 52\n\nint* deck; //Complete deck of cards\nstruct Deck* pile; //Pile of flipped cards\nint rounds = 0;\nint num_war = 0;\nint flip1 = 0;\nint flip2 = 0;\nint cards = 0;\nint localwar = 0;\n\n\nvoid enqueue(struct Deck* queue, int item){\n    //Creates new card to add to deck and gives it a value\n    struct Card* newCard = malloc(sizeof(struct Card));\n    newCard-&gt;next = NULL;\n    newCard-&gt;value = item;\n    item = 0;\n\n    if(queue-&gt;Top == NULL){ // checks if deck is empty\n        queue-&gt;Top = newCard;\n        return;\n}else{\n    struct Card* h = queue-&gt;Top;\n    while(h-&gt;next!=NULL){// Loops to the end of the queue\n        h = h-&gt;next;\n    }\n    h-&gt;next = newCard; // Adds card to the end of the queue\n}\nreturn;\n}\n\n///USED FOR REMOVING THINGS FROM HAND EASIER\n///PRE: deck size during play\n///POST: returns value of the top card if deck is not empty\nint dequeue(struct Deck* queue){\n    if(queue-&gt;Top == NULL){ // Checks if deck is empty\n        return -1;\n    }\n    int temp = queue-&gt;Top-&gt;value; // takes values of top of the deck\n    struct Card* t = queue-&gt;Top;\n</code></pre>\n\n<p>I think this is where the seg fault is happening</p>\n\n<pre><code>        if(queue-&gt;Top-&gt;next == NULL) queue-&gt;Top = NULL; // deletes top card from the deck\n\n        else{ queue-&gt;Top = queue-&gt;Top-&gt;next; }\n\n        free(t);\n    return temp;\n}\n\n\n\n\n\n\nvoid shuffle(int* array){\n    int n = 52;\n    if (n &gt; 1){\n        int i;\n        for (i = 0; i &lt; n - 1; i++){\n            /// get  random element in the listplayer1Hand[26] = 2;\n            int j = i + rand() / (RAND_MAX / (n - i) + 1);\n\n            ///swap these two elements\n            int temp = array[j];\n            array[j] = array[i];\n            array[i] = temp;\n        }\n    }\n}\n\n///Players hands\n//deals the entire deck to the two players\n//PRE: entire array containing the entire deck of cards\n//OUTPUT: gives 26 shuffled cards to each player\nvoid deal(int* d){\n    int count=1;\n    while(count&lt;53){\n        if(count%2!=0) enqueue(plyhand1, *deck); //Gives card to player1\n        else{\n            enqueue(plyhand2, *deck); //Gives card to player2\n        }\n        count++;\n    }\n}\n\n//when flip cards equal each other, declare war\n//PRE: war is declared when the first two flipped cards equal each other\n//POST: flips cards until one player wins, increases number of wars while flip1=flip2 with while loop\nvoid war(){\n    while (flip1==flip2){\n        num_war++;\n        localwar++;\n\n        //Flips another hand of cards\n        flip1=dequeue(plyhand1);\n        flip2=dequeue(plyhand2);\n\n        //Adds flipped cards to pile deck\n        enqueue(pile, flip1);\n        enqueue(pile, flip2);\n\n        //Checks value of cards\n        if(flip1&gt;10){\n            switch(flip1){\n                case 11:\n                    printf(\"Jack\");\n                case 12:\n                    printf(\"Queen\");\n                case 13:\n                    printf(\"King\");\n                case 14:\n                    printf(\"Ace\");\n                default:\n                    printf(\"Error\");\n                    break;\n            }\n        }\n        else{\n            printf(\"Player 1: %d\\n\", flip1);\n        }\n        if(flip2&gt;10){\n            switch(flip2){\n                case 11:\n                    printf(\"Jack\");\n                case 12:\n                    printf(\"Queen\");\n                case 13:\n                    printf(\"King\");\n                case 14:\n                    printf(\"Ace\");\n                default:\n                    printf(\"Error\");\n                    break;\n            }\n        }\n        else{ printf(\"Player 2: %d\\n\", flip1); }\n    }\n    /*If cards are still equal while loop will execute again,\n     otherwise the function will return to play() */\n\n    return;\n}\n\n///Game logic\n//PRE: empty player hands\n//OUTPUT: the card flipped, winner of game, &amp; cards won by player\nvoid play(int* d){\n    plyhand1 = malloc(sizeof(struct Deck));\n    plyhand1-&gt;Top = malloc(sizeof(struct Card *)); \n    plyhand2 = malloc(sizeof(struct Deck));\n    plyhand2-&gt;Top = malloc(sizeof(struct Card *));\n\n    deal(d);\n    while(plyhand1-&gt;Top!=NULL &amp;&amp; plyhand2-&gt;Top!=NULL){\n        rounds++;\n        flip1=dequeue(plyhand1);\n        flip2=dequeue(plyhand2);\n        enqueue(pile, flip1);\n        enqueue(pile, flip2);\n        //flipping check\n        if(flip1&gt;10){\n            switch(flip1){\n                case 11:\n                    printf(\"Jack\");\n                case 12:\n                    printf(\"Queen\");\n                case 13:\n                    printf(\"King\");\n                case 14:\n                    printf(\"Ace\");\n                default:\n                    printf(\"Error\");\n                    break;\n            }\n        }\n        else{ printf(\"Player 1: %d\\n\", flip1); }\n\n        if(flip2&gt;10){\n            switch(flip2){\n                case 11:\n                    printf(\"Jack\");\n                case 12:\n                    printf(\"Queen\");\n                case 13:\n                    printf(\"King\");\n                case 14:\n                    printf(\"Ace\");\n                default:\n                    printf(\"Error\");\n                    break;\n            }\n        }else{ printf(\"Player 2: %d\\n\", flip2); }\n        //end of flipping check\n        if(flip1==flip2){\n            int localwar = 0;\n            war(); //if two cards equal each other, declare war\n            cards += (localwar * 2);\n        }\n\n        if(flip1 &lt; flip2){\n            cards += 2;\n            printf(\"Player 2 wins (%d) cards!\\n\", cards);\n            while(pile-&gt;Top!=NULL){\n                enqueue(plyhand2, dequeue(pile));\n            }\n\n        }\n        else\n        {\n            while(pile-&gt;Top!=NULL){\n                enqueue(plyhand1, dequeue(pile));\n            }\n            cards += 2;\n            printf(\"Player 1 wins (%d) cards!\\n\", cards);\n\n        }\n        printf(\"Rounds won: (%d) \\n\", rounds);\n        printf(\"Wars Declared: (%d) \\n\", num_war);\n    }\n    free(plyhand2);\n    free(plyhand1);\n}\n\nint main(){\n    /// random number generator seed\n    srand(time(NULL));\n\n    deck = malloc(sizeof( int) * 52 );\n\n    /* deck = malloc(52 * sizeof(int)); */\n    /// Make our deck\n    int i, j, count = 0;\n    for(i = 0;i &lt; 4;i++){\n        for(j = 2;j &lt; 15;j++){\n            deck[count] = j;\n            count++;\n        }\n    }\n\n    /// Shuffle Our Deck\n    shuffle(deck);\n\n    //Plays game\n    play(deck);\n\n    /* free(deck); */\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "algorithm", "sqrt", "ieee"], "comments": [{"owner": {"reputation": 65414, "user_id": 768469, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/383724e63ab04b146277912c16f27f54?s=128&d=identicon&r=PG", "display_name": "Nemo", "link": "https://stackoverflow.com/users/768469/nemo"}, "edited": false, "score": 0, "creation_date": 1509570849, "post_id": 47063724, "comment_id": 81075713, "body": "<code>-Ofast</code> probably inlined the <code>sqrt</code> call. Compile (specifically, link) with <code>-lm</code> and you should be good"}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 0, "creation_date": 1509570867, "post_id": 47063724, "comment_id": 81075723, "body": "Does <a href=\"https://stackoverflow.com/a/25439802/5522303\">this answer</a> from the question you linked not help?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1509570871, "post_id": 47063724, "comment_id": 81075725, "body": "Insure code first  uses <code>#include &lt;math.h&gt;</code>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1509571195, "post_id": 47063724, "comment_id": 81075857, "body": "&quot;algorithm picks two random points (the x and y coordinates) between zero and one.&quot; and <code>x = 2*randf() - 1;</code> is not consistent.  <code>x</code> can have negative values too between <code>[-1 0]</code>."}, {"owner": {"reputation": 21, "user_id": 3556814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60eda15e2c6838c0de6cde81b27b415f?s=128&d=identicon&r=PG&f=1", "display_name": "user3556814", "link": "https://stackoverflow.com/users/3556814/user3556814"}, "reply_to_user": {"reputation": 65414, "user_id": 768469, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/383724e63ab04b146277912c16f27f54?s=128&d=identicon&r=PG", "display_name": "Nemo", "link": "https://stackoverflow.com/users/768469/nemo"}, "edited": false, "score": 0, "creation_date": 1509571356, "post_id": 47063724, "comment_id": 81075922, "body": "@Nemo, I already link libm. That is not the issue."}, {"owner": {"reputation": 21, "user_id": 3556814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60eda15e2c6838c0de6cde81b27b415f?s=128&d=identicon&r=PG&f=1", "display_name": "user3556814", "link": "https://stackoverflow.com/users/3556814/user3556814"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1509571478, "post_id": 47063724, "comment_id": 81075978, "body": "@chux , I can assure you that randf() only returns a number between zero and one."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 3, "creation_date": 1509571617, "post_id": 47063724, "comment_id": 81076038, "body": "You might think you&#39;re linking libm, but it&#39;s telling you quite clearly you&#39;re not. Listen to your compiler. One thing that&#39;s an issue sometimes is that the <code>-lm</code> has to come last on the <code>gcc</code> command. Also, maybe the compiler and/or libraries aren&#39;t installed right? All the other stuff here is distraction. Find the library!"}, {"owner": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "edited": false, "score": 0, "creation_date": 1509571626, "post_id": 47063724, "comment_id": 81076042, "body": "what if you use spherical coordinates?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1509572255, "post_id": 47063724, "comment_id": 81076324, "body": "@user3556814 &quot;randf() only returns a number between zero and one&quot; is fuzzy on the edges.  Does it create 0.0?  1.0?  Yet an important concern is that with the possibilities of FP optimizations, <code>FLT_EVAL_METHOD</code>, does the generation of <code>mag, point[0], point[1], point[2]</code> given any set of results from <code>randf()</code> generate an unacceptable value set?  Near the edges, FP math differs importantly from true math."}, {"owner": {"reputation": 25508, "user_id": 847269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/564ffe2e3f1ffe82696cd1ac01ac035e?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick87", "link": "https://stackoverflow.com/users/847269/patrick87"}, "edited": false, "score": 0, "creation_date": 1509579469, "post_id": 47063724, "comment_id": 81078837, "body": "Something about this code stinks. If x^2 + y^2 &lt;= 1 then the fabs is basically useless unless to handle edge cases around x^2 +y^2 ~ 1 only. Also, mag is guaranteed to be between 0 and 1 and equal to the value z such that x^2 + y^2 + z^2 ~ 1 ... So (x, y, mag) is on the +z side of the unit sphere. But (2.x.mag, 2.y.mag and 1-2.mag^2) has basically no relation to the unit sphere. To see this, let x ~ y ~ sqrt(1/3). Then mag ~ sqrt(1/3) and the point (2/3, 2/3, 1/3) is not on the unit sphere. Or x ~ y ~ sqrt(2) gives point (0, 0, 0). What gives?"}, {"owner": {"reputation": 25508, "user_id": 847269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/564ffe2e3f1ffe82696cd1ac01ac035e?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick87", "link": "https://stackoverflow.com/users/847269/patrick87"}, "edited": false, "score": 0, "creation_date": 1509580608, "post_id": 47063724, "comment_id": 81079163, "body": "Ignore sqrt(1/3) example and use sqrt (1/2) only. Sqrt(1/3) actually turns out OK"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 25508, "user_id": 847269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/564ffe2e3f1ffe82696cd1ac01ac035e?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick87", "link": "https://stackoverflow.com/users/847269/patrick87"}, "edited": false, "score": 0, "creation_date": 1509584494, "post_id": 47063724, "comment_id": 81080191, "body": "@Patrick87: There are edge cases where <code>x*x+y*y</code> is exactly 1 due to rounding but <code>1-x*x-y*y</code> is negative. The <code>fabs</code> deals with that. However, a better solution may have been to use the same expression in both places, either <code>1-x*x-y*y &lt; 0</code> in the loop test or <code>1-(x*x+y*y)</code> in the <code>sqrt</code>."}, {"owner": {"reputation": 36328, "user_id": 5483526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec50563f80bacd2a7fed69bd31d0c810?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Timmermans", "link": "https://stackoverflow.com/users/5483526/matt-timmermans"}, "edited": false, "score": 0, "creation_date": 1509585270, "post_id": 47063724, "comment_id": 81080392, "body": "I don&#39;t want to argue with you about whether or not you linked libm...  but in any case your code does not produce uniformly distributed points.  It is a miraculous property of spheres that you can pick a uniformly distributed point by choosing a uniform random z, and then a uniform random angle around the z axis to get x,y.  You don&#39;t need a rejection loop."}, {"owner": {"reputation": 65414, "user_id": 768469, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/383724e63ab04b146277912c16f27f54?s=128&d=identicon&r=PG", "display_name": "Nemo", "link": "https://stackoverflow.com/users/768469/nemo"}, "edited": false, "score": 0, "creation_date": 1509590335, "post_id": 47063724, "comment_id": 81081535, "body": "&quot;I already link libm. That is not the issue&quot; No you don&#39;t and yes it is"}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1509571033, "post_id": 47063801, "comment_id": 81075787, "body": "&quot;The x and y must satisfy x * x + y * y &lt;= 1 in order for there to be a solution for z.&quot; --&gt; is not that insured with <code>while (x*x + y*y &gt; 1);</code>?"}, {"owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1509571139, "post_id": 47063801, "comment_id": 81075830, "body": "@chux Well, maybe. The code disagrees with the text, I&#39;d say. Or the text is extremely ambiguous."}, {"owner": {"reputation": 21, "user_id": 3556814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60eda15e2c6838c0de6cde81b27b415f?s=128&d=identicon&r=PG&f=1", "display_name": "user3556814", "link": "https://stackoverflow.com/users/3556814/user3556814"}, "edited": false, "score": 0, "creation_date": 1509571300, "post_id": 47063801, "comment_id": 81075898, "body": "I checked this box of very early in my trouble shooting process. I already link libm. That is not the issue. And you are correct about the math stuff."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1509571734, "post_id": 47063801, "comment_id": 81076087, "body": "Then you checked off that box prematurely. Everything else is distraction--get the compiler command pointed at the correct library."}, {"owner": {"reputation": 10212, "user_id": 1277769, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/wEHKk.jpg?s=128&g=1", "display_name": "SirGuy", "link": "https://stackoverflow.com/users/1277769/sirguy"}, "edited": false, "score": 0, "creation_date": 1509572749, "post_id": 47063801, "comment_id": 81076562, "body": "Is it just me or is this the only answer that actually attempts to answer the question?"}, {"owner": {"reputation": 21, "user_id": 3556814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60eda15e2c6838c0de6cde81b27b415f?s=128&d=identicon&r=PG&f=1", "display_name": "user3556814", "link": "https://stackoverflow.com/users/3556814/user3556814"}, "reply_to_user": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1509573948, "post_id": 47063801, "comment_id": 81077068, "body": "@LeeDanielCrocker, I know it&#39;s linked to the correct library because I wrote a test function using just sqrt() and it worked fine."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1509575076, "post_id": 47063801, "comment_id": 81077463, "body": "It&#39;s still something about the build process, not the code. You&#39;re no longer using <code>-Ofast</code> or <code>--fast-math</code>, right?"}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1509576083, "post_id": 47063801, "comment_id": 81077796, "body": "I still want to see your Makefile/other build script."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1509576155, "post_id": 47063801, "comment_id": 81077815, "body": "To a mathematician, the magnitude of x and y, considered as a pair, is the magnitude of the vector [x, y], hence sqrt(x*x+y*y). If they wanted to talk about their magnitudes separately they would say \u201ctheir magnitudes\u201d rather than \u201ctheir magnitude.\u201d Although the sentence is wrong because it says \u201cless than\u201d but should say \u201cless than or equal to.\u201d"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 21, "user_id": 3556814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60eda15e2c6838c0de6cde81b27b415f?s=128&d=identicon&r=PG&f=1", "display_name": "user3556814", "link": "https://stackoverflow.com/users/3556814/user3556814"}, "edited": false, "score": 0, "creation_date": 1509576333, "post_id": 47063801, "comment_id": 81077867, "body": "@user3556814: A test function using <code>sqrt</code> might compile and link even without the correct libm linked for various reasons, such as it took the square root of a constant, so the compiler evaluated it at compile time and did not generate a run-time reference to <code>sqrt</code>, or because its result was not used, so the compiler discarded it."}], "tags": [], "owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "is_accepted": false, "score": 1, "last_activity_date": 1509570962, "creation_date": 1509570962, "answer_id": 47063801, "question_id": 47063724, "link": "https://stackoverflow.com/questions/47063724/issue-with-square-root-in-c-algorithm/47063801#47063801", "title": "Issue with Square Root in C Algorithm", "body": "<p>As for the undefined reference to <code>sqrt</code> you need to link with <code>libm</code>, usually with <code>-lm</code> or similar option.</p>\n\n<p>Also note that</p>\n\n<blockquote>\n  <p>Provided their magnitude is less than one we have room to define a third coordinate by solving the above equation for z.</p>\n</blockquote>\n\n<p>is wrong. The x and y must satisfy x * x + y * y &lt;= 1 in order for there to be a solution for z.</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1509572921, "last_edit_date": 1509572921, "creation_date": 1509571640, "answer_id": 47063939, "question_id": 47063724, "link": "https://stackoverflow.com/questions/47063724/issue-with-square-root-in-c-algorithm/47063939#47063939", "title": "Issue with Square Root in C Algorithm", "body": "<p>To insure the points meet a condition, test for the condition itself as part of the <code>while</code> loop, rather than a derivation of the condition.</p>\n\n<pre><code>// functions like `sqrt(), hypot()` benefit with declaration before use\n//   and without it may generate \"undefined reference to `sqrt'\"\n// Some functions like `sqrt()` are understood and optimized out by a smart compiler.\n// Still, best to always declare them.\n#include &lt;math.h&gt;\n\nvoid pointOnSphere(double *point){\n  double x, y, z;\n  do {\n    x = 2*randf() - 1;\n    y = 2*randf() - 1;\n    double zz = 1.0 - hypot(x,y); \n    if (zz &lt; 0.) continue;  // On rare negative values due to imprecision\n    z = sqrt(zz);\n    if (rand()%2) z = -z;  // Flip z half the time\n  } while (x*x + y*y + z*z &gt; 1);  // Must meet this condition\n\n  point[0] = x;\n  point[1] = y;\n  point[2] = z;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1509572770, "post_id": 47063990, "comment_id": 81076572, "body": "Note: Using spherical coordinates does generate a different distribution of points on a sphere than OPs original approach: perhaps better, perhaps worse.  Yet the final <i>computed</i> <code>|x,y,z|</code> still may exceed 1.0 by just a tad.  If that is an issue for OP, a loop to re-generate on excessive magnitude would easily solve that."}], "tags": [], "owner": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "is_accepted": false, "score": 0, "last_activity_date": 1509572425, "last_edit_date": 1509572425, "creation_date": 1509571846, "answer_id": 47063990, "question_id": 47063724, "link": "https://stackoverflow.com/questions/47063724/issue-with-square-root-in-c-algorithm/47063990#47063990", "title": "Issue with Square Root in C Algorithm", "body": "<p>I'd use <a href=\"https://en.wikipedia.org/wiki/Spherical_coordinate_system\" rel=\"nofollow noreferrer\">spherical coordinates</a></p>\n\n<pre><code>theta = randf()*M_PI;\nphi = randf()*2*M_PI;\nr = 1.0;\nx = r*sin(theta)*cos(phi);\ny = r*sin(theta)*sin(phi);\nz = r*cos(theta);\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 3556814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60eda15e2c6838c0de6cde81b27b415f?s=128&d=identicon&r=PG&f=1", "display_name": "user3556814", "link": "https://stackoverflow.com/users/3556814/user3556814"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1509574096, "creation_date": 1509570680, "last_edit_date": 1509574096, "question_id": 47063724, "link": "https://stackoverflow.com/questions/47063724/issue-with-square-root-in-c-algorithm", "title": "Issue with Square Root in C Algorithm", "body": "<p>I have a bit of code that finds a point on a unit sphere. Recall, for a unit sphere:</p>\n\n<p>1 = sqrt( x^2 + y^2 + z^2 )</p>\n\n<p>The algorithm picks two random points (the x and y coordinates) between zero and one. Provided their magnitude is less than one we have room to define a third coordinate by solving the above equation for z.</p>\n\n<pre><code>void pointOnSphere(double *point){\ndouble x, y;\n\ndo {\n    x = 2*randf() - 1;\n    y = 2*randf() - 1;\n} while (x*x + y*y &gt; 1);\n\ndouble mag = sqrt(fabs(1 - x*x - y*y));\n\npoint[0] = 2*(x*mag);\npoint[1] = 2*(y*mag);\npoint[2] = 1 - 2*(mag*mag);\n}\n</code></pre>\n\n<p>Technically, I inherited this code. The previous owner compiled using -Ofast which \"Disregards strict standards compliance\". TL;DR it means your code doesn't need to follow strict IEEE standards. So when I tried to compile without optimization I ran into an error.</p>\n\n<pre><code> undefined reference to `sqrt'\n</code></pre>\n\n<p>What are IEEE standards? Well, because computers can't store floating point numbers to infinite precision, rounding errors pop up during certain calculations if you're not careful.</p>\n\n<p>After some googling I ran into <a href=\"https://stackoverflow.com/questions/25439794/anything-other-than-ofast-causes-undefined-reference-error\" title=\"This questionquot;\">this question</a> which got me on the right track about using proper IEEE stuff. I even read <a href=\"https://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html\" rel=\"nofollow noreferrer\">this article</a> about floating point numbers (which I recommend). Unfortunately it didn't answer my questions. </p>\n\n<p>I'd like to use sqrt() in my function as opposed to something like <a href=\"http://mathworld.wolfram.com/NewtonsIteration.html\" rel=\"nofollow noreferrer\">Newton Iteration</a>. I understand the issue in my algorithm probably comes from the fact I could potentially (even though not really) pass a negative number to the sqrt() function. I'm just not quite sure how to remedy the issue. Thanks for all the help!</p>\n\n<p>Oh, and if it's relevant I'm using a <a href=\"https://en.wikipedia.org/wiki/Mersenne_Twister\" rel=\"nofollow noreferrer\">Mersenne Twister</a> number generator.</p>\n\n<p>Just to clarify, I am linking libm with -lm! I have also confirmed it is pointing to the correct library.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 45741, "user_id": 744178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3193139ea494c45e63752504f5ff1f2?s=128&d=identicon&r=PG", "display_name": "jwodder", "link": "https://stackoverflow.com/users/744178/jwodder"}, "edited": false, "score": 0, "creation_date": 1509570757, "post_id": 47063709, "comment_id": 81075674, "body": "Are you actually writing <code>sizeof(char)</code> or are you instead using <code>sizeof &#39;x&#39;</code> for some character <code>x</code>?  Those are not the same thing."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 1, "creation_date": 1509570804, "post_id": 47063709, "comment_id": 81075689, "body": "Pointer declared as <code>datatype *p;</code> increments by multiples of <code>sizeof(datatype)</code> bytes, not by one byte."}, {"owner": {"reputation": 115587, "user_id": 56541, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/Wm7Xg.png?s=128&g=1", "display_name": "David Z", "link": "https://stackoverflow.com/users/56541/david-z"}, "edited": false, "score": 1, "creation_date": 1509570829, "post_id": 47063709, "comment_id": 81075703, "body": "What is the type of the pointer? It would help if you can show a <a href=\"https://stackoverflow.com/help/mcve\">short complete program</a> demonstrating the behavior you&#39;re asking about."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1509570830, "post_id": 47063709, "comment_id": 81075704, "body": "How is <code>pointer</code> declared?"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1509570896, "post_id": 47063709, "comment_id": 81075733, "body": "Look up &quot;pointer arithmetic&quot;."}, {"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 0, "creation_date": 1509570967, "post_id": 47063709, "comment_id": 81075754, "body": "There is pretty much never a time where it would make sense to allow incrementing a pointer by a custom amount of bytes so C helps you out and increments by <code>n * sizeof(ptr[0])</code>."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1509571067, "post_id": 47063709, "comment_id": 81075796, "body": "<code>pointer += sizeof...</code> is ALWAYS wrong. Pointers must a have a type, and adding 1 to a pointer advances by the size of that type. Let&#39;s say the pointer is type <code>int*</code>. Since sizeof(char) is 1 by definition, <code>pointer + sizeof(char)</code> is the same as <code>pointer + 1</code>, which makes it point to the next <code>int</code>, probably 4 bytes away, but confuses the person reading the code into thinking its only advancing one byte."}, {"owner": {"reputation": 55, "user_id": 8690840, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6b502a62490ed27ece464b74f0d933d2?s=128&d=identicon&r=PG&f=1", "display_name": "connor.roche", "link": "https://stackoverflow.com/users/8690840/connor-roche"}, "edited": false, "score": 0, "creation_date": 1509571405, "post_id": 47063709, "comment_id": 81075943, "body": "Pointer is declared as and int*"}, {"owner": {"reputation": 55, "user_id": 8690840, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6b502a62490ed27ece464b74f0d933d2?s=128&d=identicon&r=PG&f=1", "display_name": "connor.roche", "link": "https://stackoverflow.com/users/8690840/connor-roche"}, "edited": false, "score": 0, "creation_date": 1509571460, "post_id": 47063709, "comment_id": 81075966, "body": "Ahh I understand now thanks!"}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1509576339, "post_id": 47063709, "comment_id": 81077870, "body": "Sounds like you solved your problem, but in future, it&#39;s safer to print pointer values using <code>%p</code>, not <code>%x</code>.  (You&#39;ll get fewer surprises that way, if you&#39;re on a machine where pointers are not the same size as ints.)"}], "answers": [{"tags": [], "owner": {"reputation": 16, "user_id": 8870765, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/b1554c62bf1d05a4a9c48754a6619c17?s=128&d=identicon&r=PG", "display_name": "user8870765", "link": "https://stackoverflow.com/users/8870765/user8870765"}, "is_accepted": true, "score": 0, "last_activity_date": 1509572587, "creation_date": 1509572587, "answer_id": 47064164, "question_id": 47063709, "link": "https://stackoverflow.com/questions/47063709/how-does-the-value-of-a-pointer-memory-address-change-according-to-size-of-inc/47064164#47064164", "title": "How does the value of a pointer (memory address) change according to size of increments?", "body": "<p>Sizeof(char) is   1 so you are adding \u20181\u2019 to your \u2018pointer\u2019  and pointer points to the next location. But that next location depends on the type of your pointer or type of variable your pointer is pointing to . It looks like it is pointing to something that has 4 bytes in length. Suppose your pointer is declared like this</p>\n\n<pre><code>char * ptr\n</code></pre>\n\n<p>Print statement indicates that before the addition ptr is pointing to address 0x2000</p>\n\n<pre><code>   ptr = ptr+sizeof(char) \n</code></pre>\n\n<p>After the addition pointer will be pointing to 0x2001.</p>\n\n<pre><code>int * ptr\n</code></pre>\n\n<p>In this if ptr is pointing to address 0x2000 before addition </p>\n\n<pre><code>ptr = ptr+sizeof(char) \n</code></pre>\n\n<p>After the addition pointer will be pointing to 0x2004.\n(here the assumption is int is 4 bytes not a short int)</p>\n"}], "owner": {"reputation": 55, "user_id": 8690840, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6b502a62490ed27ece464b74f0d933d2?s=128&d=identicon&r=PG&f=1", "display_name": "connor.roche", "link": "https://stackoverflow.com/users/8690840/connor-roche"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 47064164, "answer_count": 1, "score": 0, "last_activity_date": 1509572587, "creation_date": 1509570595, "question_id": 47063709, "link": "https://stackoverflow.com/questions/47063709/how-does-the-value-of-a-pointer-memory-address-change-according-to-size-of-inc", "title": "How does the value of a pointer (memory address) change according to size of increments?", "body": "<p>When I have a pointer in C and print it out using %x in printf I would receive something like this: 924752f7</p>\n\n<p>Now if I increment the pointer by the size of a char, like so:</p>\n\n<pre><code>pointer += sizeof(char)\n</code></pre>\n\n<p>How come I get back 924752fb? If a char is one byte (8 bits), wouldn't it only increment it by one address and the new value after incrementing would be: 924752f8?</p>\n"}, {"tags": ["c", "arrays", "memory", "memory-management", "char"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1509570245, "post_id": 47063596, "comment_id": 81075434, "body": "Named arrays cannot be resized in C. You will need to use the <code>malloc</code> and <code>realloc</code> functions to create a resizeable array."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1509570670, "post_id": 47063596, "comment_id": 81075634, "body": "In C, &quot;I need to increase the first char array&quot;, is a false premise.  Instead, create a pointer to data and later increase the memory&#39;s allocation with <code>realloc()</code>."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1509571908, "post_id": 47063596, "comment_id": 81076169, "body": "&quot;<i>As you can see I have a length of 2 and then 10.</i>&quot; -- <b>NO!</b> You have an array of <code>2</code> <code>10</code> character arrays. A 2D array is an <i>array of arrays</i>. Here, you have and array of 2 - 10-char arrays. Arrays cannot be resized. Blocks of memory can. You can declare <code>char (*my_test)[10];</code> to create a pointer to an array of 10-chars and then allocate/reallocate the number of 10-char arrays in that block. Or, you can decalre <code>char **my_test;</code> and allocate and reallocate each individual block each pointer points to."}, {"owner": {"reputation": 131, "user_id": 1584556, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/aTIWy.jpg?s=128&g=1", "display_name": "Ben Osborne", "link": "https://stackoverflow.com/users/1584556/ben-osborne"}, "edited": false, "score": 0, "creation_date": 1509572129, "post_id": 47063596, "comment_id": 81076258, "body": "Ok. I did say I&#39;m a beginner and learning C, I have read about pointers but they confuse the hell out of me. Does anyone have a really newbie way of explaining them?"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1509572338, "post_id": 47063596, "comment_id": 81076381, "body": "Pointers are simply variables that hold the <i>address of</i> something else as their value. (a pointer <i>points</i> to where in memory a value is found) So where <code>int a = 5;</code> (<code>a</code> holds the immediate value <code>5</code> as its value), <code>int *b;</code> declares a pointer to type <code>int</code>. Meaning it will hold the address of where an integer is stored as its value. (e.g. <code>b = &amp;a;</code>) would assign the address where <code>a</code> is stored to the pointer <code>b</code>). Nothing else special about them."}, {"owner": {"reputation": 131, "user_id": 1584556, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/aTIWy.jpg?s=128&g=1", "display_name": "Ben Osborne", "link": "https://stackoverflow.com/users/1584556/ben-osborne"}, "edited": false, "score": 0, "creation_date": 1509572464, "post_id": 47063596, "comment_id": 81076439, "body": "Thanks David C. I will try this tomorrow."}], "answers": [{"tags": [], "owner": {"reputation": 1275, "user_id": 1835601, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/j6OWh.jpg?s=128&g=1", "display_name": "Simo Erkinheimo", "link": "https://stackoverflow.com/users/1835601/simo-erkinheimo"}, "is_accepted": false, "score": 2, "last_activity_date": 1509570280, "creation_date": 1509570280, "answer_id": 47063642, "question_id": 47063596, "link": "https://stackoverflow.com/questions/47063596/c-increase-char-array-of-char-array-size/47063642#47063642", "title": "C Increase char array of char array size", "body": "<pre><code>char my_test[2][10];\n</code></pre>\n\n<p>is compile-time constant, which means that the required memory to use that array is carved to the stone already before your application starts. So you will never be able to change it's size. </p>\n\n<p>You'll have to use DYNAMIC allocation. Check for something called <strong>malloc</strong> and <strong>free</strong> in case you are really working with C, or with C++ <strong>new</strong> and <strong>delete</strong> are what you need. You'll also need to learn about pointers.</p>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 1, "last_activity_date": 1509571008, "creation_date": 1509571008, "answer_id": 47063815, "question_id": 47063596, "link": "https://stackoverflow.com/questions/47063596/c-increase-char-array-of-char-array-size/47063815#47063815", "title": "C Increase char array of char array size", "body": "<p>You should dynamically allocate memory for the array using standard C functions <code>malloc</code> and <code>realloc</code> declared in header <code>&lt;stdlib.h&gt;</code>.</p>\n\n<p>Here is a demonstrative program that shows how the memory can be allocated.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n#define N   10\n\nint main(void) \n{\n    size_t n = 2;\n    char ( *my_test )[N] = malloc( n * sizeof( char[N] ) );\n\n    strcpy( my_test[0], \"first\" );\n    strcpy( my_test[1], \"second\" );\n\n    for ( size_t i = 0; i &lt; n; i++ ) puts( my_test[i] );\n\n    putchar( '\\n' );\n\n    char ( *tmp )[N] = realloc( my_test, ( n + 1 ) * sizeof( char[N] ) );\n\n    if ( tmp != NULL )\n    {\n        my_test = tmp;\n        strcpy( my_test[n++], \"third\" );\n    }\n\n    for ( size_t i = 0; i &lt; n; i++ ) puts( my_test[i] );\n\n    free( my_test );\n\n    return 0;\n}\n</code></pre>\n\n<p>The program output is</p>\n\n<pre><code>first\nsecond\n\nfirst\nsecond\nthird\n</code></pre>\n"}], "owner": {"reputation": 131, "user_id": 1584556, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/aTIWy.jpg?s=128&g=1", "display_name": "Ben Osborne", "link": "https://stackoverflow.com/users/1584556/ben-osborne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3114, "favorite_count": 2, "accepted_answer_id": 47063815, "answer_count": 2, "score": 1, "last_activity_date": 1529589427, "creation_date": 1509570027, "last_edit_date": 1529589427, "question_id": 47063596, "link": "https://stackoverflow.com/questions/47063596/c-increase-char-array-of-char-array-size", "title": "C Increase char array of char array size", "body": "<p>I have a char array of char array like so:</p>\n\n<pre><code>char my_test[2][10];\n</code></pre>\n\n<p>As you can see I have a length of 2 and then 10. If I need to increase the first char array (2), how can this be done dynamically?</p>\n\n<p>For example, half way through my application char[2] might be in use so therefore I need to use position 3 in the char array. I would then end up with this:</p>\n\n<pre><code>char store[3][10];\n</code></pre>\n\n<p>But keeping the data originally store in:</p>\n\n<pre><code>char store[0][10];\nchar store[1][10];\nchar store[2][10];\n</code></pre>\n"}, {"tags": ["c++", "c", "c++11"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 3, "creation_date": 1509570043, "post_id": 47063552, "comment_id": 81075335, "body": "Why do you need this? It might be an instance of the <a href=\"http://xyproblem.info\" rel=\"nofollow noreferrer\">XY Problem</a>."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 2, "creation_date": 1509570047, "post_id": 47063552, "comment_id": 81075336, "body": "There are a few options. You can return a <code>void*</code> and allocate the <code>std::function</code> on the heap, and also provide functions to call back into C++, cast, and perform whatever operations on the function you wanted. Exactly how you convert the <code>std::function</code> into a C compatible data type is up to you; you could even put it into a raw character array (wrapped in a struct perhaps). There are a lot of options"}, {"owner": {"reputation": 889, "user_id": 7946648, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q2VPH.jpg?s=128&g=1", "display_name": "Karina Kozarova", "link": "https://stackoverflow.com/users/7946648/karina-kozarova"}, "edited": false, "score": 0, "creation_date": 1509570067, "post_id": 47063552, "comment_id": 81075347, "body": "<a href=\"https://stackoverflow.com/questions/2399344/calling-c-code-from-c\" title=\"calling c code from c\">stackoverflow.com/questions/2399344/calling-c-code-from-c</a>"}, {"owner": {"reputation": 96886, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 1, "creation_date": 1509570102, "post_id": 47063552, "comment_id": 81075365, "body": "You could make a pass through that returned a raw function pointer (e.g. <code>int (*AdderFunction)(int)</code>), but you cannot pass a <code>std::function</code>. This is essentially what <a href=\"http://en.cppreference.com/w/cpp/utility/functional/function/target\" rel=\"nofollow noreferrer\"><code>std::function::target</code></a> does"}, {"owner": {"reputation": 3007, "user_id": 100172, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/80e9429d71c6a81807032275d57c7859?s=128&d=identicon&r=PG", "display_name": "Stuart K", "link": "https://stackoverflow.com/users/100172/stuart-k"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1509570483, "post_id": 47063552, "comment_id": 81075538, "body": "@IharobAlAsimi context is I&#39;m trying to manually define an interface to C++ code for Javascript with Emscripten. Embind works, but creates a lot of excess code and uses <code>eval</code> to achieve it."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1509570565, "post_id": 47063552, "comment_id": 81075581, "body": "That&#39;s interesting. Emscripten? Never heard of it. I will check that to learn about it."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1509570862, "post_id": 47063552, "comment_id": 81075722, "body": "Regarding my comment: &quot;<i>BTW: I cannot reproduce it with gcc</i>&quot; Of course, it compiles with g++ but it&#39;s not possible to call it from c."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "reply_to_user": {"reputation": 96886, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1509571596, "post_id": 47063552, "comment_id": 81076024, "body": "@CoryKramer Isn\u2019t language linkage part of a function type, so <code>std::function::target</code> would still not work?"}], "answers": [{"comments": [{"owner": {"reputation": 3007, "user_id": 100172, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/80e9429d71c6a81807032275d57c7859?s=128&d=identicon&r=PG", "display_name": "Stuart K", "link": "https://stackoverflow.com/users/100172/stuart-k"}, "edited": false, "score": 1, "creation_date": 1509571121, "post_id": 47063647, "comment_id": 81075820, "body": "Yep, I tried this, unfortunately <code>target</code> returns a null pointer. The code looks like this:      <code>CAdderFunction* makeCAdder(int amount) {         return makeAdder(amount).target&lt;CAdderFunction&gt;();     }</code>"}, {"owner": {"reputation": 3007, "user_id": 100172, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/80e9429d71c6a81807032275d57c7859?s=128&d=identicon&r=PG", "display_name": "Stuart K", "link": "https://stackoverflow.com/users/100172/stuart-k"}, "edited": false, "score": 1, "creation_date": 1509571227, "post_id": 47063647, "comment_id": 81075877, "body": "I believe the above is because the <code>target_type</code> is different, as mentioned here <a href=\"http://en.cppreference.com/w/cpp/utility/functional/function/target_type\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/utility/functional/function/&hellip;</a>"}, {"owner": {"reputation": 1119, "user_id": 6797534, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Tu8Gt9iJGt8/AAAAAAAAAAI/AAAAAAAAAI0/Diz261BzMYk/photo.jpg?sz=128", "display_name": "Ray Hamel", "link": "https://stackoverflow.com/users/6797534/ray-hamel"}, "reply_to_user": {"reputation": 3007, "user_id": 100172, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/80e9429d71c6a81807032275d57c7859?s=128&d=identicon&r=PG", "display_name": "Stuart K", "link": "https://stackoverflow.com/users/100172/stuart-k"}, "edited": false, "score": 0, "creation_date": 1509571460, "post_id": 47063647, "comment_id": 81075967, "body": "@StuartK Try making the return type of makeAdder <code>std::function&lt;CAdderFunction&gt;</code>?"}, {"owner": {"reputation": 1119, "user_id": 6797534, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Tu8Gt9iJGt8/AAAAAAAAAAI/AAAAAAAAAI0/Diz261BzMYk/photo.jpg?sz=128", "display_name": "Ray Hamel", "link": "https://stackoverflow.com/users/6797534/ray-hamel"}, "reply_to_user": {"reputation": 3007, "user_id": 100172, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/80e9429d71c6a81807032275d57c7859?s=128&d=identicon&r=PG", "display_name": "Stuart K", "link": "https://stackoverflow.com/users/100172/stuart-k"}, "edited": false, "score": 0, "creation_date": 1509572328, "post_id": 47063647, "comment_id": 81076373, "body": "Another possibility is <code>return makeAdder(amount).target&lt;int(int)&gt;();</code> , I believe this should implicitly convert to CAdderFunction."}], "tags": [], "owner": {"reputation": 1119, "user_id": 6797534, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Tu8Gt9iJGt8/AAAAAAAAAAI/AAAAAAAAAI0/Diz261BzMYk/photo.jpg?sz=128", "display_name": "Ray Hamel", "link": "https://stackoverflow.com/users/6797534/ray-hamel"}, "is_accepted": false, "score": 4, "last_activity_date": 1509571362, "last_edit_date": 1509571362, "creation_date": 1509570301, "answer_id": 47063647, "question_id": 47063552, "link": "https://stackoverflow.com/questions/47063552/can-i-call-a-stdfunction-from-c/47063647#47063647", "title": "Can I call a std::function from C?", "body": "<p>You need to put the typedef inside the <code>extern \"C\"</code> block at the minimum (to get it to compile as C++). I'm not sure that will work from C, however. What will work from C is just to use plain function pointers, e.g.</p>\n\n<pre><code>extern \"C\" {\nusing AdderFunction = int(int);\n// old-style: typedef int(*AdderFunction)(int);\n}\n</code></pre>\n\n<p>Edit: If you're using an API that gives you <code>std::function</code> objects, you can use the <a href=\"http://en.cppreference.com/w/cpp/utility/functional/function/target\" rel=\"nofollow noreferrer\"><code>std::function::target()</code></a> method to obtain the (C-callable) raw function pointer it refers to.</p>\n\n<pre><code>using AdderFunction = std::function&lt;int(int)&gt;;\nextern \"C\" {\nusing CAdderFunction = int(int);\nCAdderFunction makeCAdder(int amount)\n{\n        return makeAdder(amount).target&lt;CAdderFunction&gt;();\n}\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1509570510, "post_id": 47063656, "comment_id": 81075557, "body": "Will that let you actually <i>call</i> <code>f</code>, though?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1509570575, "post_id": 47063656, "comment_id": 81075585, "body": "@DanielH, as in, use <code>makeCAdder(10).f(20);</code>?"}, {"owner": {"reputation": 3007, "user_id": 100172, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/80e9429d71c6a81807032275d57c7859?s=128&d=identicon&r=PG", "display_name": "Stuart K", "link": "https://stackoverflow.com/users/100172/stuart-k"}, "edited": false, "score": 1, "creation_date": 1509570829, "post_id": 47063656, "comment_id": 81075702, "body": "Thanks for the answer, unfortunately this results in a similar/the same warning: <code>&#39;makeCAdder&#39; has C-linkage specified, but returns user-defined type &#39;AdderWrapper&#39; which is incompatible with C</code>"}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 1, "creation_date": 1509571537, "post_id": 47063656, "comment_id": 81076002, "body": "@RSahu Yes, that\u2019s what the OP said he actually wants to do. I think the only way to do that is an <code>extern C</code> wrapper function which actually makes that call, but I\u2019m not confident enough in my ability to write it to make that an answer."}, {"owner": {"reputation": 3007, "user_id": 100172, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/80e9429d71c6a81807032275d57c7859?s=128&d=identicon&r=PG", "display_name": "Stuart K", "link": "https://stackoverflow.com/users/100172/stuart-k"}, "edited": false, "score": 1, "creation_date": 1509576375, "post_id": 47063656, "comment_id": 81077880, "body": "Great, the expanded <code>make</code>/<code>invoke</code>/<code>delete</code> pattern works. Thanks!"}, {"owner": {"reputation": 60850, "user_id": 221955, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/0bc09e1bd45610fc85274cd7bb002c56?s=128&d=identicon&r=PG", "display_name": "Michael Anderson", "link": "https://stackoverflow.com/users/221955/michael-anderson"}, "edited": false, "score": 0, "creation_date": 1509581976, "post_id": 47063656, "comment_id": 81079529, "body": "You can avoid one level of indirection by creating the <code>function&lt;int(int)&gt;</code> using new and C casting to/from your struct type."}, {"owner": {"reputation": 14968, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "edited": false, "score": 1, "creation_date": 1509603804, "post_id": 47063656, "comment_id": 81085529, "body": "<code>__cplusplus</code> should be in lowercase if you&#39;re intending to use <a href=\"http://en.cppreference.com/w/cpp/preprocessor/replace#Predefined_macros\" rel=\"nofollow noreferrer\">the standard macro</a>."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 15, "last_activity_date": 1510070846, "last_edit_date": 1510070846, "creation_date": 1509570346, "answer_id": 47063656, "question_id": 47063552, "link": "https://stackoverflow.com/questions/47063552/can-i-call-a-stdfunction-from-c/47063656#47063656", "title": "Can I call a std::function from C?", "body": "<p>The most portable method to interface between C/C++ will be to use pointers to pass data between languages and use non-member functions to make function calls.</p>\n\n<p>The .h file:</p>\n\n<pre><code>#ifdef __cplusplus\nextern \"C\" {\n#endif\n\n   // Declare the struct.\n   struct Adder;\n\n   // Declare functions to work with the struct.\n   Adder* makeAdder(int amount);\n\n   int invokeAdder(Adder* adder, int n);\n\n   void deleteAdder(Adder* adder);\n\n#ifdef __cplusplus\n}\n#endif\n</code></pre>\n\n<p>Implement them in a .cpp file as:</p>\n\n<pre><code>#include &lt;functional&gt;\n\ntypedef std::function&lt;int(int)&gt; AdderFunction;\nstruct Adder\n{\n   AdderFunction f;\n};\n\nAdderFunction makeAdderFunction(int amount) {\n    return [amount] (int n) {\n        return n + amount;\n    };\n}\n\nAdder* makeAdder(int amount)\n{\n   Adder* adder = new Adder;\n   adder-&gt;f = makeAdderFunction(amount);\n   return adder;\n}\n\nint invokeAdder(Adder* adder, int n)\n{\n   return adder-&gt;f(n);\n}\n\nvoid deleteAdder(Adder* adder)\n{\n   delete adder;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123967, "user_id": 251153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b25144c09555e7d5b5e288469e011ef?s=128&d=identicon&r=PG", "display_name": "zneak", "link": "https://stackoverflow.com/users/251153/zneak"}, "is_accepted": false, "score": 8, "last_activity_date": 1509571854, "creation_date": 1509571854, "answer_id": 47063995, "question_id": 47063552, "link": "https://stackoverflow.com/questions/47063552/can-i-call-a-stdfunction-from-c/47063995#47063995", "title": "Can I call a std::function from C?", "body": "<p>It's not possible to call a <code>std::function</code> from C, because C doesn't support the language features that are required. C doesn't have templates, access modifiers, callable objects, virtual methods, or anything else that <code>std::function</code> could use under the hood. You need to come up with a strategy that C can understand.</p>\n\n<p>One such strategy is to copy/move your <code>std::function</code> to the heap and return it as an opaque pointer. Then, you would provide another function through your C++ interface that takes that opaque pointer and calls the function that it contains.</p>\n\n<pre><code>// C side\nstruct function_opaque;\nint call_opaque(struct function_opaque*, int param);\n\n// C++ side\nextern \"C\" {\n    struct function_opaque {\n        std::function&lt;int(int)&gt; f;\n    };\n\n    int call_opaque(function_opaque* func, int param) {\n        return func-&gt;f(param);\n    }\n};\n</code></pre>\n\n<p>Of course, this comes with memory management implications.</p>\n"}, {"comments": [{"owner": {"reputation": 5668, "user_id": 4083309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6b4ef5a2e912153069b82607789a717?s=128&d=identicon&r=PG&f=1", "display_name": "Arne Vogel", "link": "https://stackoverflow.com/users/4083309/arne-vogel"}, "edited": false, "score": 1, "creation_date": 1509714382, "post_id": 47065066, "comment_id": 81142431, "body": "This is an unsolvable problem (except by using run time code generation). There are a bunch of workarounds such as using thread-local variables, or templates if the argument value is known at compile time. Many C APIs allow passing an arbitrary <code>void *data</code> in addition to the callback function, though. In simple cases, you could just <code>reinterpret_cast&lt;void *&gt;(myInt)</code>, or else point to a data structure."}], "tags": [], "owner": {"reputation": 20235, "user_id": 1462718, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7d451483b64aa999fecf316e7132afc6?s=128&d=identicon&r=PG", "display_name": "Brandon", "link": "https://stackoverflow.com/users/1462718/brandon"}, "is_accepted": false, "score": 0, "last_activity_date": 1509578620, "last_edit_date": 1509578620, "creation_date": 1509577737, "answer_id": 47065066, "question_id": 47063552, "link": "https://stackoverflow.com/questions/47063552/can-i-call-a-stdfunction-from-c/47065066#47065066", "title": "Can I call a std::function from C?", "body": "<p>The problem with this solution is when you call <code>makeAdder</code> with parameter values.. Couldn't solve it but I'm posting just in case someone else can..</p>\n\n<pre><code>template &lt;typename FunctionPointerType, typename Lambda, typename ReturnType, typename ...Args&gt;\ninline FunctionPointerType MakeFunc(Lambda&amp;&amp; lambda, ReturnType (*)(Args...))\n{\n    thread_local std::function&lt;ReturnType(Args...)&gt; func(lambda);\n\n    struct Dummy\n    {\n        static ReturnType CallLambda(Args... args)\n        {\n            return func(std::forward&lt;Args&gt;(args)...);\n        }\n    };\n\n    return &amp;Dummy::CallLambda;\n}\n\ntemplate &lt;typename FunctionPointerType, typename Lambda&gt;\nFunctionPointerType MakeFunc(Lambda&amp;&amp; lambda)\n{\n    return MakeFunc&lt;FunctionPointerType, Lambda&gt;(std::forward&lt;Lambda&gt;(lambda), FunctionPointerType());\n}\n\n\ntypedef int(*AdderFunction)(int);\n\nAdderFunction makeAdder(int amount) {\n    return MakeFunc&lt;int(*)(int)&gt;([amount] (int n) {\n        return n + amount;\n    });\n}\n\nextern \"C\" {\n    typedef int(*CAdderFunction)(int);\n\n    CAdderFunction makeCAdder(int amount)\n    {\n        return makeAdder(amount);\n    }\n}\n</code></pre>\n\n<p>It works by storing the lambda a thread local <code>std::function</code>. Then return a pointer to a static function which will call the lambda with the parameters passed in.</p>\n\n<p>I thought about using an <code>unordered_map</code> and keeping track of each <code>makeAdder</code> call but then you can't reference it from static context..</p>\n"}, {"tags": [], "owner": {"reputation": 48938, "user_id": 246886, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dd1ebaade6623fc538fb8af3338e730d?s=128&d=identicon&r=PG", "display_name": "Jon Purdy", "link": "https://stackoverflow.com/users/246886/jon-purdy"}, "is_accepted": false, "score": 1, "last_activity_date": 1509583825, "last_edit_date": 1509583825, "creation_date": 1509583525, "answer_id": 47065848, "question_id": 47063552, "link": "https://stackoverflow.com/questions/47063552/can-i-call-a-stdfunction-from-c/47065848#47065848", "title": "Can I call a std::function from C?", "body": "<p>Another solution is to split the <code>std::function</code> into a pointer to the closure and a pointer to the member function, and pass three things to the C function that wants to invoke the lambda:</p>\n\n<ul>\n<li>The address of a C++ function that knows how to invoke the function on the closure type-safely</li>\n<li>The closure pointer (unsafely cast to <code>void *</code>)</li>\n<li>The member function pointer (hidden inside a wrapper struct and cast to <code>void *</code> as well)</li>\n</ul>\n\n<p>Here\u2019s a sample implementation.</p>\n\n<pre><code>#include &lt;functional&gt;\n#include &lt;iostream&gt;\n\ntemplate&lt;typename Closure, typename Result, typename... Args&gt;\nstruct MemberFunctionPointer\n{\n    Result (Closure::*value)(Args...) const;\n};\n\ntemplate&lt;typename Closure, typename Result, typename... Args&gt;\nMemberFunctionPointer&lt;Closure, Result, Args...&gt;\nmember_function_pointer(\n    Result (Closure::*const value)(Args...) const)\n{\n    return MemberFunctionPointer&lt;Closure, Result, Args...&gt;{value};\n}\n\ntemplate&lt;typename Closure, typename Result, typename... Args&gt;\nResult\ncall(\n    const void *const function,\n    const void *const closure,\n    Args... args)\n{\n    return\n        ((reinterpret_cast&lt;const Closure *&gt;(closure))\n        -&gt;*(reinterpret_cast&lt;const MemberFunctionPointer&lt;Closure, Result, Args...&gt;*&gt;(function)-&gt;value))\n        (std::forward&lt;Args&gt;(args)...);\n}\n</code></pre>\n\n<p>Sample usage from the C side:</p>\n\n<pre><code>int\nc_call(\n    int (*const caller)(const void *, const void *, int),\n    const void *const function,\n    const void *const closure,\n    int argument)\n{\n    return caller (function, closure, argument);\n}\n</code></pre>\n\n<p>Sample usage from the C++ side:</p>\n\n<pre><code>int\nmain()\n{\n    int captured = 5;\n    auto unwrapped = [captured] (const int argument) {\n        return captured + argument;\n    };\n    std::function&lt;int(int)&gt; wrapped = unwrapped;\n\n    auto function = member_function_pointer(&amp;decltype(unwrapped)::operator());\n    auto closure = wrapped.target&lt;decltype(unwrapped)&gt;();\n    auto caller = &amp;call&lt;decltype(unwrapped), int, int&gt;;\n    std::cout\n        &lt;&lt; c_call(\n            caller,\n            reinterpret_cast&lt;const void *&gt;(&amp;function),\n            reinterpret_cast&lt;const void *&gt;(closure),\n            10)\n        &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>The reason for the wrapper struct is that you can\u2019t cast a member function pointer to <code>void *</code> or any other object pointer type, not even with <code>reinterpret_cast</code>, so instead we pass the <em>address</em> of the member function pointer. You can choose to place the <code>MemberFunctionPointer</code> structure on the heap, e.g. with <code>unique_ptr</code>, if it needs to live longer than it does in this simple example.</p>\n\n<p>You can also wrap these three arguments in a single structure on the C side, rather than pass them individually:</p>\n\n<pre><code>struct IntIntFunction\n{\n    int (*caller)(const void *, const void *, int);\n    const void *function;\n    const void *closure;\n};\n\n#define INVOKE(f, ...) ((f).caller((f).function, (f).closure, __VA_ARGS__))\n\nint\nc_call(IntIntFunction function)\n{\n    return INVOKE(function, 10);\n}\n</code></pre>\n"}], "owner": {"reputation": 3007, "user_id": 100172, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/80e9429d71c6a81807032275d57c7859?s=128&d=identicon&r=PG", "display_name": "Stuart K", "link": "https://stackoverflow.com/users/100172/stuart-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3845, "favorite_count": 5, "accepted_answer_id": 47063656, "answer_count": 5, "score": 20, "last_activity_date": 1510070846, "creation_date": 1509569834, "last_edit_date": 1509570001, "question_id": 47063552, "link": "https://stackoverflow.com/questions/47063552/can-i-call-a-stdfunction-from-c", "title": "Can I call a std::function from C?", "body": "<p>I have some C++ code that returns a <code>std::function</code>. I would like to call this from some C code. Is this possible? As an example I have the following code:</p>\n\n<pre><code>typedef std::function&lt;int(int)&gt; AdderFunction;\n\nAdderFunction makeAdder(int amount) {\n    return [amount] (int n) {\n        return n + amount;\n    };\n}\n\nextern \"C\" {\n    AdderFunction makeCAdder(int amount) {\n        return makeAdder(amount);\n    }\n}\n</code></pre>\n\n<p>with <code>clang++ -std=c++11 test.cpp</code> it results in the following warning:</p>\n\n\n\n<pre class=\"lang-none prettyprint-override\"><code>'makeCAdder' has C-linkage specified, but returns user-defined type 'AdderFunction' (aka 'function&lt;int (int)&gt;') which is incompatible with C\n</code></pre>\n\n<p>I understand why this is happening, but wondering if there is a pattern to make it possible?</p>\n"}, {"tags": ["c", "gcc", "sublimetext3"], "comments": [{"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1509569923, "post_id": 47063454, "comment_id": 81075277, "body": "Can you call gcc from the command prompt? Do you see main.exe in Windows Explorer?"}, {"owner": {"reputation": 85, "user_id": 8662372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c91498739a70138ca96f092cb901b558?s=128&d=identicon&r=PG&f=1", "display_name": "UnexpectedBehaviour", "link": "https://stackoverflow.com/users/8662372/unexpectedbehaviour"}, "reply_to_user": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1509578346, "post_id": 47063454, "comment_id": 81078506, "body": "Yes I see a main.exe, it runs this .exe when I use the command palette to build with gcc -RUN. gcc --version outputs the following in command prompt: gcc (MinGW.org GCC-6.3.0-1) 6.3.0 Copyright (C) 2016 Free Software Foundation, Inc. This is free software; see the source for copying conditions.  There is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE."}], "answers": [{"tags": [], "owner": {"reputation": 33, "user_id": 9950060, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Dsx5ZTCYvAU/AAAAAAAAAAI/AAAAAAAAGWc/LzfVxq-qgv0/photo.jpg?sz=128", "display_name": "Pikesh Patel", "link": "https://stackoverflow.com/users/9950060/pikesh-patel"}, "is_accepted": false, "score": 0, "last_activity_date": 1561235339, "creation_date": 1561235339, "answer_id": 56718960, "question_id": 47063454, "link": "https://stackoverflow.com/questions/47063454/sublime-text-3-gcc-build-system-issue/56718960#56718960", "title": "Sublime Text 3, GCC build system issue", "body": "<p>This will allow you to compile and run c++ programs in sublime as well as command prompt also </p>\n\n<pre><code>{\n\"shell_cmd\": \"g++ -Wall -std=c++11 \\\"${file}\\\" -o \\\"${file_path}/${file_base_name}.exe\\\"\",\n\"file_regex\": \"^(..[^:]*):([0-9]+):?([0-9]+)?:? (.*)$\",\n\"working_dir\": \"${file_path}\",\n\"selector\": \"source.c, source.c++\",\n\n\"variants\":\n[   // to run in the sublime text console\n    {\n        \"name\": \"Run\",\n        \"shell_cmd\":\"\\\"${file_path}/${file_base_name}\\\"\"\n    },\n    // to run in the Windows command line\n    {\n        \"name\": \"Run in cmd\",\n\n        \"shell_cmd\":   \"start cmd /k  $file_base_name \"\n\n    }\n]}\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 8662372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c91498739a70138ca96f092cb901b558?s=128&d=identicon&r=PG&f=1", "display_name": "UnexpectedBehaviour", "link": "https://stackoverflow.com/users/8662372/unexpectedbehaviour"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 928, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1561235339, "creation_date": 1509569415, "last_edit_date": 1509578490, "question_id": 47063454, "link": "https://stackoverflow.com/questions/47063454/sublime-text-3-gcc-build-system-issue", "title": "Sublime Text 3, GCC build system issue", "body": "<p>When building a working \".c\" code file I experience an error building with the menu icons to build(build system GCC)</p>\n\n<p>When I navigate: tools -> build (with GCC selected as build system)</p>\n\n<pre><code>'main.exe' is not recognized as an internal or external command,\noperable program or batch file.\n[Finished in 0.1s with exit code 1]\n[cmd: ['main.exe']]\n[dir: C:\\Users\\erik\\Documents\\Carleton University\\Sysc 2006\\Lab 11\\Recursion\\Recursion]\n[path: C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\bin;C:\\Perl64\\site\\bin;C:\\Perl64\\bin;C:\\ProgramData\\Oracle\\Java\\javapath;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\MinGW\\bin;C:\\MinGW\\mingw32\\bin;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\;C:\\Program Files (x86)\\QuickTime\\QTSystem\\;C:\\Program Files (x86)\\PharosSystems\\Core;C:\\Python35-32;C:\\Python35-32\\Lib\\site-packages\\;C:\\Python35-32\\Scripts\\;C:\\Program Files\\TortoiseSVN\\bin;C:\\Program Files (x86)\\NVIDIA Corporation\\PhysX\\Common;C:\\Program Files\\dotnet\\;C:\\Program Files\\Microsoft SQL Server\\130\\Tools\\Binn\\;C:\\Users\\erik\\AppData\\Local\\bin\\NASM;C:\\Program Files\\Git\\cmd;C:\\Users\\erik\\AppData\\Local\\Microsoft\\WindowsApps;C:\\altera\\13.0sp1\\modelsim_ase\\win32aloem;C:\\Users\\erik\\AppData\\Local\\GitHubDesktop\\bin;]\n</code></pre>\n\n<p>But if i navigate: tools -> command palette -> build with:GCC</p>\n\n<pre><code>[Finished in 0.5s]\n</code></pre>\n\n<p>Following this beloved visual above I would then navigate: tools -> build (with GCC selected as build system), OR tools -> command palette -> build with:GCC -RUN</p>\n\n<pre><code>***Expected working output***\n</code></pre>\n\n<p>This is my GCC.sublime-build file, I suspect this is the file that is causing issues. </p>\n\n<pre><code>// Put this file here:\n// \"C:\\Users\\[User Name]\\AppData\\Roaming\\Sublime Text 3\\Packages\\User\"\n// Use \"Ctrl+B\" to Build and \"Crtl+Shift+B\" to Run the project.\n// OR use \"Tools -&gt; Build System -&gt; New Build System...\" and put the code there.\n{\n    \"cmd\" : [\"gcc\", \"$file_name\", \"-o\", \"${file_base_name}.exe\"],\n\n    // Doesn't work, sublime text 3, Windows 8.1    \n    // \"cmd\" : [\"gcc $file_name -o ${file_base_name}\"],\n\n    \"selector\" : \"source.c\",\n    \"shell\": true,\n    \"working_dir\" : \"$file_path\",\n\n    // You could add path to your gcc compiler this and don't add path to your \"PATH environment variable\"\n    // \"path\" : \"C:\\\\MinGW\\\\bin\"\n\n    \"variants\" : [\n\n        { \"name\": \"Run\",\n          \"cmd\" : [\"${file_base_name}.exe\"]\n        }\n    ]\n}\n</code></pre>\n\n<p>Although the issue may be here, I am very concerned it may also be elsewhere as I have been struggling with implementing libraries.\nA second side question would be why is my \"Path:\" variable so long, is it unnecessarily long? many of those would not be needed in sublime correct?</p>\n"}, {"tags": ["c", "function", "variables", "printing", "return"], "answers": [{"comments": [{"owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "edited": false, "score": 0, "creation_date": 1509569666, "post_id": 47063494, "comment_id": 81075135, "body": "this isn&#39;t C, is it?"}, {"owner": {"reputation": 921, "user_id": 4499969, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6dprL.png?s=128&g=1", "display_name": "unDeadHerbs", "link": "https://stackoverflow.com/users/4499969/undeadherbs"}, "reply_to_user": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "edited": false, "score": 0, "creation_date": 1509569745, "post_id": 47063494, "comment_id": 81075180, "body": "woops sorry, needs to pass by pointers, fixed"}, {"owner": {"reputation": 13, "user_id": 8628606, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fqrHFejvH7M/AAAAAAAAAAI/AAAAAAAAALs/2lko5OVNjXU/photo.jpg?sz=128", "display_name": "Alex ", "link": "https://stackoverflow.com/users/8628606/alex"}, "edited": false, "score": 0, "creation_date": 1509569900, "post_id": 47063494, "comment_id": 81075267, "body": "@undeadherbs Thank you! i didnt know that you could use the reference parameter to return both values. I would verify your answer but the site redirected me to a question on the comma operate... Thank you for answering tho!"}, {"owner": {"reputation": 13, "user_id": 8628606, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fqrHFejvH7M/AAAAAAAAAAI/AAAAAAAAALs/2lko5OVNjXU/photo.jpg?sz=128", "display_name": "Alex ", "link": "https://stackoverflow.com/users/8628606/alex"}, "edited": false, "score": 0, "creation_date": 1509569970, "post_id": 47063494, "comment_id": 81075300, "body": "@undeadherbs never mind it says i can verify it in 3 minutes XD"}], "tags": [], "owner": {"reputation": 921, "user_id": 4499969, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6dprL.png?s=128&g=1", "display_name": "unDeadHerbs", "link": "https://stackoverflow.com/users/4499969/undeadherbs"}, "is_accepted": true, "score": 1, "last_activity_date": 1509569787, "last_edit_date": 1509569787, "creation_date": 1509569585, "answer_id": 47063494, "question_id": 47063411, "link": "https://stackoverflow.com/questions/47063411/confused-on-output-returning-two-variables-and-still-prints/47063494#47063494", "title": "confused on output. returning two variables and still prints", "body": "<p>The function isn't returning two values, you have stumbled upon the <a href=\"https://en.wikipedia.org/wiki/Comma_operator\" rel=\"nofollow noreferrer\">Comma operator</a>.</p>\n\n<pre><code>/**\n *  Assigns value of b into i.\n *  Results: a=1, b=2, c=3, i=2\n */\nint a=1, b=2, c=3;              \nint i = (a, b);           \n</code></pre>\n\n<p>The function is just returning the value of <code>ll</code>, you want to use reference parameters to return the two values.</p>\n\n<pre><code>void addmult(int ii, int jj, int* kk,int* ll){\n  *kk = ii + jj;\n  *ll = ii * jj;\n}\nvoid main(void){\n  int i=3, j=4, k, l;\n  addmult(i, j, &amp;k, &amp;l);\n  printf(\"%d, %d\\n\", k, l);\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 8628606, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fqrHFejvH7M/AAAAAAAAAAI/AAAAAAAAALs/2lko5OVNjXU/photo.jpg?sz=128", "display_name": "Alex ", "link": "https://stackoverflow.com/users/8628606/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "closed_date": 1509569622, "accepted_answer_id": 47063494, "answer_count": 1, "score": -1, "last_activity_date": 1509570442, "creation_date": 1509569253, "last_edit_date": 1509570442, "question_id": 47063411, "link": "https://stackoverflow.com/questions/47063411/confused-on-output-returning-two-variables-and-still-prints", "closed_reason": "Duplicate", "title": "confused on output. returning two variables and still prints", "body": "<pre><code>int addmult(int ii, int jj){\n  int kk, ll;\n  kk = ii + jj;\n  ll = ii * jj;\n  return (kk, ll);\n}\nvoid main(void){\n  int i=3, j=4, k, l;\n  k = addmult(i, j);\n  l = addmult(i, j);\n  printf(\"%d, %d\\n\", k, l);\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/JNxGy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JNxGy.png\" alt=\"The code prints &quot;12, 12&quot;.\"></a></p>\n\n<p>I thought that it wasn't possible to return two variables from a function. How does the compiler know to print <code>ll</code> instead of <code>kk</code>? I know that in the function <code>ii=3</code> and <code>jj=4</code>, <code>k=7</code> and <code>l=12</code>, but then it goes on to return two variables.  Could someone please elaborate on why it ends up printing:</p>\n\n<pre><code>12, 12\n</code></pre>\n"}, {"tags": ["c", "arrays", "recursion"], "comments": [{"owner": {"reputation": 249, "user_id": 4237493, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/my1IB.png?s=128&g=1", "display_name": "Kovalainen", "link": "https://stackoverflow.com/users/4237493/kovalainen"}, "edited": false, "score": 0, "creation_date": 1509569268, "post_id": 47063150, "comment_id": 81074953, "body": "I assume this is a homework assignment, right? Because Moore neighborhood is a weird thing to traverse recursively."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1509569329, "post_id": 47063150, "comment_id": 81074981, "body": "What are some of the typical values used for <code>row</code> and <code>col</code>?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1509569473, "post_id": 47063150, "comment_id": 81075047, "body": "<code>printf(&quot;%d\\t&quot;, rand() % 2);</code> prints a number but that is not assigned to <code>arr[i][j]</code>.  Was that intended?"}, {"owner": {"reputation": 43, "user_id": 5425126, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/7cd5e58cadd5db5f04b9650cacca8a71?s=128&d=identicon&r=PG", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/5425126/anonymous"}, "reply_to_user": {"reputation": 249, "user_id": 4237493, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/my1IB.png?s=128&g=1", "display_name": "Kovalainen", "link": "https://stackoverflow.com/users/4237493/kovalainen"}, "edited": false, "score": 0, "creation_date": 1509569532, "post_id": 47063150, "comment_id": 81075062, "body": "@Kovalainen yeah lol"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1509569570, "post_id": 47063150, "comment_id": 81075084, "body": "Yes, the memory for the 2D array is yet to be populated.  Try <code>printf(&quot;%d\\t&quot;, rand() % 2);</code> --&gt; <code>arr[i][j] = rand() % 2; printf(&quot;%d\\t&quot;, arr[i][j]);</code>"}, {"owner": {"reputation": 43, "user_id": 5425126, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/7cd5e58cadd5db5f04b9650cacca8a71?s=128&d=identicon&r=PG", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/5425126/anonymous"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1509569676, "post_id": 47063150, "comment_id": 81075145, "body": "@chux I am supposed to use random number generator to fill in the 2D array. But like you mentioned I don&#39;t think I am using those randomly generated number in the arr[i][j]. I was afraid I was doing that  EDIT: It compiles and I think it&#39;s filling the 2d array with 0&#39;s or 1&#39;s thanks"}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1509570155, "post_id": 47063588, "comment_id": 81075397, "body": "OT issue: Consider <code>int *arrStorage = malloc(row * col * sizeof(int));</code> --&gt; <code>int *arrStorage = malloc(sizeof *arrStorage * row * col);</code>.  Easier to code correctly, review and maintain.  Also a benefit for extreme cases: With <i>very large</i> arrays, does not overflow some <code>int</code> math that can work with <code>size_t</code> math."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 1, "last_activity_date": 1509569984, "creation_date": 1509569984, "answer_id": 47063588, "question_id": 47063150, "link": "https://stackoverflow.com/questions/47063150/counting-pixels-using-recursion/47063588#47063588", "title": "Counting pixels using recursion", "body": "<p>OP was printing a random number, yet not assigning the number to the array.</p>\n\n<p>Simply assign the value and then print.</p>\n\n<pre><code>// printf(\"%d\\t\", rand() % 2);\narr[i][j] = rand() % 2;\nprintf(\"%d\\t\", arr[i][j]);\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 5425126, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/7cd5e58cadd5db5f04b9650cacca8a71?s=128&d=identicon&r=PG", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/5425126/anonymous"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 0, "accepted_answer_id": 47063588, "answer_count": 1, "score": 1, "last_activity_date": 1509570488, "creation_date": 1509568124, "last_edit_date": 1509570488, "question_id": 47063150, "link": "https://stackoverflow.com/questions/47063150/counting-pixels-using-recursion", "title": "Counting pixels using recursion", "body": "<p>I have a problem where I need to count the number of 1's in a 2D array that is randomly generated. First the user puts in the size of the 2D array through the command line arguments, and then the user puts in the coordinates to see if there are 1's in the coordinates he put in. If the coordinate happen to land in 0, it is supposed to return 0. Otherwise if the inputted coordinate lands on a 1, then I am supposed to recursively check up, top right, right, bottom right, bottom, bottom left, left, and top left. </p>\n\n<p>The main problem I am having is that I don't know if I can even read in one 1 from the array. I have no idea what to put into my recursive method parameters. I have my <strong>array pointer</strong>, <strong>xcoord</strong>, <strong>ycoord</strong> which are what the user puts in and <strong>row</strong> and <strong>col</strong> which are supposed to be command line arguments. </p>\n\n<p>I think everything else works, but I could be wrong. I tried this recursive formula.</p>\n\n<pre><code>if(arr[row][col] == 1)\n{\n     recursive(arr, xcoord-1, ycoord, row, col);\n     blobsize = blobsize + 1;\n     //more recursive things down here...\n}\n</code></pre>\n\n<p>to check up but it didn't do anything.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n#include &lt;ctype.h&gt;\n\nint recursive(int **arr, int xcoord, int ycoord, int row, int col);//What are the arguments for the recursive function?\n\nint main(int argc, char** argv)\n{\n    int i;//counters\n    int j;//counters\n    int xcoord;//x coordinate input\n    int ycoord;//y coordinate input\n\n    //random number generator thing idk lol\n    srand((unsigned int)time(NULL));\n\n    int row = strtol(argv[1], NULL, 0);//ROW from command line arguments (1st number)\n    int col = strtol(argv[2], NULL, 0);//COL from command line arguments (2nd number)\n\n    int *arrStorage = malloc(row * col * sizeof(int));//dynamically allocating memory for 2d array\n    int **arr = malloc(row * sizeof(int*));       //pointer to pointer to array or whatever\n\n    //intializing array\n    for (i = 0; i &lt; row; i++)\n    {\n            arr[i] = arrStorage + col * i;\n    }\n\n    //printing out 2d array\n        for (i = 0; i &lt;  row; i++)\n        {\n           for (j = 0; j &lt; col; j++)\n           {\n              arr[i][j] = rand() % 2;\n              printf(\"%d\\t\", arr[i][j]);\n           }\n\n           printf(\"\\n\");\n        }\n\n    printf(\" \");\n\n    //Exit the function when non number is entered\n    //Otherwise continue\n    while(1)\n    {\n        printf(\"Enter coordinate i,j (Non numeric to quit) \\n\");    \n\n        if(1!=scanf(\"%d\", &amp;xcoord) || 1!=scanf(\"%d\", &amp;ycoord))\n        {\n            return 0;\n        }\n\n        printf(\"Blob size: %d\\n\", recursive(arr, xcoord, ycoord, row, col));\n    }\n\n    free(arr[0]);\n    free(arr);\n\n}\n\nint recursive(int **arr, int xcoord, int ycoord, int row, int col)\n{\n    int blobsize = 0;\n\n    //This is outside the bounds (BASE CASE)\n    if(xcoord &gt; row &amp;&amp; ycoord &gt; col)\n    {\n        return 0;\n    }\n    //If the selected xcoord &amp; ycoord is 0\n    if(arr[xcoord][ycoord] == 0)\n    {\n        return 0;\n    }\n\n    else\n    {\n        if((arr[xcoord][ycoord]==1))\n        {\n            //blobsize = blobsize + 1;\n            //recursive(arr, xcoord - 1, ycoord, row, col);\n\n        }\n        else\n        {\n\n        }\n    }\n\n    return blobsize;\n\n}\n</code></pre>\n\n<p>Thanks if you can help</p>\n\n<p>EDIT: Fixed one critical part. Now to die over figuring out the recursion part.</p>\n"}, {"tags": ["c", "makefile"], "comments": [{"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 1, "creation_date": 1509569068, "post_id": 47062848, "comment_id": 81074869, "body": "setenvp should probably be included in the .PHONY since you are not creating a file of that name."}], "answers": [{"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1509568652, "post_id": 47063129, "comment_id": 81074676, "body": "<i>&quot;it&#39;s not actually possible for a child process to change the environment of its parent&quot;</i> -- it&#39;s those core concepts that seem to escape a number of posters. It isn&#39;t covered that well in documentation either, e.g. <a href=\"http://tldp.org/LDP/abs/html/subshells.html\" rel=\"nofollow noreferrer\">Chapter 21. Subshells</a>. Strange..."}], "tags": [], "owner": {"reputation": 69991, "user_id": 939557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3VPea.png?s=128&g=1", "display_name": "MadScientist", "link": "https://stackoverflow.com/users/939557/madscientist"}, "is_accepted": false, "score": 1, "last_activity_date": 1509568065, "creation_date": 1509568065, "answer_id": 47063129, "question_id": 47062848, "link": "https://stackoverflow.com/questions/47062848/trouble-with-setting-my-ld-library-path-inside-my-makefile/47063129#47063129", "title": "trouble with setting my LD_LIBRARY_PATH inside my makefile", "body": "<p>First, you are using a make variable <code>PWD</code> but you've never set it.  The only way this will be set is if your shell sets it and exports it before make is invoked, but it's poor practice to rely on this.  If you really want to refer to the current directory, why not just use <code>.</code> instead of <code>$(PWD)</code>?  It's more reliable.</p>\n\n<p>Second, environment variables are an attribute of the current process, in UNIX.  When you change the environment variables in a given process, those changes will be passed down to any new children created by the process after the change is made.</p>\n\n<p>But, it's not actually possible for a child process to change the environment of its parent.</p>\n\n<p>Every make recipe is run in a new child process (a shell process).</p>\n\n<p>So, your target here:</p>\n\n<pre><code>setenvp:\n        export LD_LIBRARY_PATH=./lib\n</code></pre>\n\n<p>will essentially run <code>/bin/sh -c 'export LD_LIBRARY_PATH=./lib'</code> which will start a shell, have the subshell set <code>LD_LIBRARY_PATH</code> in its environment, then exit the subshell whereupon the environment change is gone.  So this is a no-op: it just takes up time while having no effect.</p>\n\n<p>In fact there is no way to have make change the environment of the shell that invoked it, because make is a child process of your shell and thus make cannot change your shell's environment.</p>\n"}, {"tags": [], "owner": {"reputation": 2566, "user_id": 2940881, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/lz0ZZ.png?s=128&g=1", "display_name": "Frank-Rene Sch&#228;fer", "link": "https://stackoverflow.com/users/2940881/frank-rene-sch%c3%a4fer"}, "is_accepted": false, "score": 2, "last_activity_date": 1509696359, "creation_date": 1509696359, "answer_id": 47091038, "question_id": 47062848, "link": "https://stackoverflow.com/questions/47062848/trouble-with-setting-my-ld-library-path-inside-my-makefile/47091038#47091038", "title": "trouble with setting my LD_LIBRARY_PATH inside my makefile", "body": "<p>Since every line is executed in a new shell environment, you must \nprefix anything to be inherited before the commands. That is you\nmight want to define </p>\n\n<pre><code>MY_CC := export LD_LIBRARY_PATH=$(PWD)/lib; gcc\n</code></pre>\n\n<p>and then have your targets be built by</p>\n\n<pre><code>target.o: target.c\n    $(MY_CC) ...\n</code></pre>\n"}], "owner": {"reputation": 101, "user_id": 6890735, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/13982685ca77eeb79ad00024cafaf423?s=128&d=identicon&r=PG&f=1", "display_name": "Sam K9", "link": "https://stackoverflow.com/users/6890735/sam-k9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1043, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1509696359, "creation_date": 1509566818, "last_edit_date": 1509569234, "question_id": 47062848, "link": "https://stackoverflow.com/questions/47062848/trouble-with-setting-my-ld-library-path-inside-my-makefile", "title": "trouble with setting my LD_LIBRARY_PATH inside my makefile", "body": "<p>I am trying to set my LD_LIBRARY_PATH inside my makefile so that I do not have to run the commands to set it after I do \"make all.\" However, although the command is executed, when I try to use ./driver, I get</p>\n\n<blockquote>\n  <p>./driver: error while loading shared libraries: libparser.so: cannot\n  open shared object file: No such file or directory.</p>\n</blockquote>\n\n<p>When I do the command after I get that error (outside of the makefile) it's fixed. Do you have any ideas as to what I'm doing wrong? Here's my Makefile currently:</p>\n\n<pre><code># OPTIONAL: Set these variables as required.\nCFLAGS := -g -Wall -std=c99\nLDFLAGS :=\nLDLIBS :=\n\nall: static-driver driver setenvp\n\n# OPTIONAL: COMPLETE THIS TARGET\n# This target produces an object file for making libraries.\nparser.o: parser.c\n    cc -c -fPIC $(CFLAGS) parser.c\n\n# COMPLETE THIS TARGET\n# This target produces the dynamic library.\nlib/libparser.so: parser.o\n    gcc -shared -o libparser.so parser.o\n\n# COMPLETE THIS TARGET\n# This target produces the executable using the dynamic library\ndriver: driver.c lib/libparser.so\n    gcc driver.c -I$(PWD) -L$(PWD)/lib -o driver -lparser\n\n# This target produces the executable using static library\nstatic-driver: driver.c lib/test.a\n    $(CC) $(CFLAGS) driver.c -I$(PWD) lib/test.a -o static-driver\n\nsetenvp:\n    export LD_LIBRARY_PATH=$(PWD)/lib\n\n.PHONY: clean\nclean:\n    rm -fv static-driver driver\n    rm -fv lib/libparser.so\n    rm -fv *.o *.txt *.bin\n    rm -fv *~ \\#*\\# *.swp\n</code></pre>\n"}, {"tags": ["c", "stdout"], "comments": [{"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 4, "creation_date": 1509566306, "post_id": 47062702, "comment_id": 81073489, "body": "Insert a blank before %  scanf(&quot; %c&quot;, &amp;c); Otherwise the new line character that corresponds to the key Enter is also read"}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 0, "creation_date": 1509566353, "post_id": 47062702, "comment_id": 81073522, "body": "It read the character, writes the prompt, it reads a newline, writes the prompt."}, {"owner": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "edited": false, "score": 0, "creation_date": 1509566597, "post_id": 47062702, "comment_id": 81073669, "body": "I&#39;m 100% sure this is a duplicate, but I can&#39;t find of what."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1509566644, "post_id": 47062702, "comment_id": 81073690, "body": "When you press the <code>Enter</code> key a <code>&#39;\\n&#39;</code> is generated in the <i>Input buffer</i> (e.g. <code>stdin</code>). You read 1-char, leaving the <code>&#39;\\n&#39;</code> in <code>stdin</code> to be read on the next iteration of the <code>while</code> loop. Including a <code>space</code> in your <i>format string</i> (before the <code>%c</code> <i>format specifier</i>) causes <code>scanf</code> to skip all intervening <i>whitespace</i> (<code>&#39;\\n&#39;</code> being whitepace). This is one of the <i>primary pitfalls</i> C-programmers fall victim to using <code>scanf</code> for user input, and why <code>fgets</code> is the recommended way to take user input."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1509568018, "post_id": 47062702, "comment_id": 81074373, "body": "&quot;prints out &quot;Input a character&quot; twice each time&quot; is because user typed 2 keys."}], "answers": [{"comments": [{"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 1, "creation_date": 1509566937, "post_id": 47062757, "comment_id": 81073846, "body": "A space before <code>%c</code> should be enough =&gt;&gt; <code>&quot; %c&quot;</code>"}], "tags": [], "owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "is_accepted": false, "score": 1, "last_activity_date": 1509566749, "last_edit_date": 1509566749, "creation_date": 1509566438, "answer_id": 47062757, "question_id": 47062702, "link": "https://stackoverflow.com/questions/47062702/why-does-this-c-program-print-twice/47062757#47062757", "title": "why does this c program print twice", "body": "<p>cause you press a number PLUS enter and enter will be read by <code>scanf()</code> at the next call</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n  char c = 'A';\n  while (c != ',') {\n    printf(\"Input a character:\");\n    if (scanf(\"%c\", &amp;c) != 1) {\n      return 0; // we stop if user don't input anything\n    }\n    if (c &gt;= '0' &amp;&amp; c &lt;= '9') {\n      printf(\"%d\\n\", (int)c); // by the way did you want (int)(c - '0') ?\n    } else {\n      printf(\"enter a number ! you enter %d\\n\", c);\n    }\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 167, "user_id": 1558348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ec2178d3bf0409ba122d87f980c3243?s=128&d=identicon&r=PG", "display_name": "Prime", "link": "https://stackoverflow.com/users/1558348/prime"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 533, "favorite_count": 0, "closed_date": 1509632780, "answer_count": 1, "score": -2, "last_activity_date": 1509567713, "creation_date": 1509566212, "question_id": 47062702, "link": "https://stackoverflow.com/questions/47062702/why-does-this-c-program-print-twice", "closed_reason": "Needs more focus", "title": "why does this c program print twice", "body": "<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n        char c = 'A';\n        while (c != ',')\n        {\n                printf(\"Input a character:\");\n                scanf(\"%c\", &amp;c);\n                if (c &gt;= '0' &amp;&amp; c &lt;= '9')\n                {\n                        printf(\"%d\\n\", (int)c);\n                }\n        }\n}\n</code></pre>\n\n<p>After taking in the first set of input, this code prints out \"Input a character\" twice each time - why is this?</p>\n"}, {"tags": ["c", "file", "stdin"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 3, "creation_date": 1509566561, "post_id": 47062692, "comment_id": 81073641, "body": "Please show real code. Read this: <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 451, "user_id": 8824227, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2acdee80e12a830b0538b61637944b47?s=128&d=identicon&r=PG&f=1", "display_name": "Bachman", "link": "https://stackoverflow.com/users/8824227/bachman"}, "edited": false, "score": 0, "creation_date": 1509566588, "post_id": 47062692, "comment_id": 81073664, "body": "How is the adresy[] array defined? Is it long enough?"}, {"owner": {"reputation": 21, "user_id": 4749032, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/2935299c22d423b796275bde856bddde?s=128&d=identicon&r=PG&f=1", "display_name": "chiro", "link": "https://stackoverflow.com/users/4749032/chiro"}, "reply_to_user": {"reputation": 451, "user_id": 8824227, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2acdee80e12a830b0538b61637944b47?s=128&d=identicon&r=PG&f=1", "display_name": "Bachman", "link": "https://stackoverflow.com/users/8824227/bachman"}, "edited": false, "score": 0, "creation_date": 1509566904, "post_id": 47062692, "comment_id": 81073825, "body": "@Bachman char adresy[100];"}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1509567661, "post_id": 47062692, "comment_id": 81074214, "body": "What happens if you do <code>char adresy[100] = { 0 };</code> ?"}, {"owner": {"reputation": 21, "user_id": 4749032, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/2935299c22d423b796275bde856bddde?s=128&d=identicon&r=PG&f=1", "display_name": "chiro", "link": "https://stackoverflow.com/users/4749032/chiro"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1509568061, "post_id": 47062692, "comment_id": 81074393, "body": "@Michi yeah, that was it. Thanks m8"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1509568238, "post_id": 47062692, "comment_id": 81074481, "body": "Post the needed code here.  <code>while  ( ( x = getchar() ) != EOF )                   char c=x;                     adresy[i]=c;</code> is insufficient."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1509571414, "post_id": 47062692, "comment_id": 81075946, "body": "Also note, after <code>adresy[i] = c;</code>, <code>adresy</code> is only <i>nul-terminated</i> by virtue of initialization. You use <code>adresy</code> as a string, so it is better to affirmatively <i>nul-terminate</i> with (e.g. <code>adresy[i+1] = 0;</code>) following the assignment. See <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\"><b>How to debug small programs</b></a>"}], "answers": [{"comments": [{"owner": {"reputation": 451, "user_id": 8824227, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2acdee80e12a830b0538b61637944b47?s=128&d=identicon&r=PG&f=1", "display_name": "Bachman", "link": "https://stackoverflow.com/users/8824227/bachman"}, "edited": false, "score": 0, "creation_date": 1509568222, "post_id": 47063166, "comment_id": 81074471, "body": "OK, I see @Michi answered it in the comments while I was typing, disregard."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 1, "creation_date": 1509568330, "post_id": 47063166, "comment_id": 81074512, "body": "This still remains a good Answer as long as the OP is agree. +1"}], "tags": [], "owner": {"reputation": 451, "user_id": 8824227, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2acdee80e12a830b0538b61637944b47?s=128&d=identicon&r=PG&f=1", "display_name": "Bachman", "link": "https://stackoverflow.com/users/8824227/bachman"}, "is_accepted": true, "score": 1, "last_activity_date": 1509568638, "last_edit_date": 1509568638, "creation_date": 1509568173, "answer_id": 47063166, "question_id": 47062692, "link": "https://stackoverflow.com/questions/47062692/c-reading-file-via-stdin-reads-random-signs/47063166#47063166", "title": "C Reading file via stdin reads random signs", "body": "<p>Taking a look at your code (not easy, as I couldn't understand any of the comments..), I think the problem is that you don't initialize adresy[100] to 0 the first you run. So when you use printf() and strcmp(), it depends on the first random \\0 it finds.\nThe next words don't have the same issue, since you use memset to set the array to 0's.</p>\n"}], "owner": {"reputation": 21, "user_id": 4749032, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/2935299c22d423b796275bde856bddde?s=128&d=identicon&r=PG&f=1", "display_name": "chiro", "link": "https://stackoverflow.com/users/4749032/chiro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 47063166, "answer_count": 1, "score": -2, "last_activity_date": 1509617530, "creation_date": 1509566166, "last_edit_date": 1592644375, "question_id": 47062692, "link": "https://stackoverflow.com/questions/47062692/c-reading-file-via-stdin-reads-random-signs", "title": "C Reading file via stdin reads random signs", "body": "<p>I have program that reads file via stdin and saves each char one by one into char array &quot;adresy&quot;. Output of this program is char array adresy everytime new letter is put in there. But I have a problem with output. In my txt file there are 6 words, each line of file contains 1 word. As you can see in output, it reads signs that are not there and I dont know why. I found out that when I change order of words in file it doesnt change anything and it reads those random signs anyway but only with first word. Does someone know why?</p>\n<p><a href=\"http://textuploader.com/dloib\" rel=\"nofollow noreferrer\">whole code</a></p>\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nmain (int argc, char *argv[]) \n{\n    char *search; //vyhladavanie zadane uzivatelom\n    search=argv[1];  //        ulozenie vyhladavaneho vyrazu (b, br, brn, at\u010f)    \n    int searchLen=strlen(search); // dlzka search\n    char adresy[100]; //subor na docasne uchovanie adries z txt suboru\n    char enable[42]=&quot;&quot;; //vystup povolenych znakov\n    int enableLen=strlen(enable); //dlzka enable\n    printf(&quot;dlzka enable: %d\\n&quot;, enableLen);\n    char adresyArray[100];  //ulozenie text suboru\n    char slovo[100];        //ak search vyhovuje len 1 adresa, ulozi sa sem\n    int thisWord=0;         //tato premenna urcuje ktore adresy sa ulozia do slovo, v tomto pripade len ak kontrola bola uspesna\n    \n    int found=0;          //mnozstvo najdenych vyhovujucich vyrazov\n    int canCheck=1;     //kontrola je mozna len ak x je prvy znak suboru alebo predchadzajuci znak bol \\n\n    int canEnable=0;    //hodnota urcuje ci sa kontrola so search vydarila, ak ano, ulozi sa nasledujuci znak c\n    int x; //ulozisko jednotlivych znakov zo suboru\n    int i=0; //index pre adresy\n   // int k=0;\n    while  ( ( x = getchar() ) != EOF ) //cyklus be\u017e\u00ed kym sa nedostane ku koncu &quot;suboru&quot;, kym nenajde EOF znak; uklada jednotlive znaky suboru do x\n    {   \n       \n        char c=x;  //konvertovanie int na char\n        adresy[i]=c;   // ulozi znak x do adresy na indexe i   \n        //adresyArray[k]=c;\n        //k++;\n        i++;  // zvy\u0161enie indexu o 1 (posunutie doprava)   \n        if(canEnable==1)        //ak posledna kontrola bola uspesna, ulozi sa znak do enable\n        {\n            enableLen=strlen(enable); \n            printf(&quot;dlzka enable po uspesnej kontrole: %d\\n&quot;, enableLen);\n            enable[enableLen]=c;            //ulozenie znaku c do enable na koniec arrayu\n            printf(&quot;enable po uspesnej kontrole: %s\\n&quot;, enable);\n            canEnable=0;  //&quot;zresetovanie&quot; aby sa nezapisali 2 znaky za sebou\n            thisWord=1;\n            found++;    //pocet vyhovujucich adries sa navy\u0161\u0161i\n        }\n        if(c!='\\n')     //kontrola prebieha len ak aktualny znak nie je \\n\n        {            \n            int control=strcmp(search, adresy); //kontrola search a aktualnej casti adresy\n            if(control==0)                  //ak sa rovnaju, canEnable sa nastavi na hodnotu 1 aby sa pri dalsom behu cykla ulozil znak\n            {\n                printf(&quot;kontrola prebehla uspesne: %s\\n&quot;, adresy);\n                canEnable=1;\n            }            \n            else\n            {\n                printf(&quot;kontrola prebehla neuspesne: %s\\n&quot;, adresy);\n            }\n        }\n        else            //ak sa c rovna \\n, nastavi sa i na nulu a obsah adresy sa vymaze\n        {\n            printf(&quot;posledna adresa: %s\\n&quot;, adresy);\n            if(found==1 &amp;&amp; thisWord==1)\n            {\n                sprintf(slovo, &quot;Found: %s&quot;, adresy);\n            }\n            \n            memset(adresy, 0, sizeof(adresy));\n            i=0;\n            thisWord=0;\n        }\n    }\n  /*  if(strstr(adresy, search)!=NULL)\n    {\n        sprintf(slovo, &quot;Found: %s&quot;, adresy);\n    }\n    printf(&quot;najdene: %d\\n&quot;, found);\n    for(int i=0;i&lt;strlen(enable);i++)\n    {\n        for(int j=i+1;j&lt;strlen(enable);j++)\n        {\n            if(enable[i]&gt;enable[j])\n            {\n                char a=enable[i];\n                enable[i]=enable[j];\n                enable[j]=a;\n            }\n        }\n    }*/\n    printf(&quot;povolene: %s\\n&quot;, enable);\n     \n   \n   \n    return (EXIT_SUCCESS);\n}\n</code></pre>\n<p><strong>Content of file:</strong></p>\n<blockquote>\n<p>broumov</p>\n<p>praha</p>\n<p>bratislava</p>\n<p>brno</p>\n<p>medzev</p>\n<p>martin</p>\n</blockquote>\n<p><strong>Code that reads file:</strong></p>\n<pre><code>                  while  ( ( x = getchar() ) != EOF )\n                  char c=x;  \n                  adresy[i]=c; skontrola prebehla neuspesne: \n</code></pre>\n<p><strong>Output of my program:</strong></p>\n<pre><code>b$\nkontrola prebehla neuspesne: br\nkontrola prebehla neuspesne: bro\nkontrola prebehla neuspesne: brou\nkontrola prebehla neuspesne: broum\u015e\u25a0(\nkontrola prebehla neuspesne: broumo\u25a0(\nkontrola prebehla neuspesne: broumov(\nposledna adresa: broumov\n\nkontrola prebehla neuspesne: p\nkontrola prebehla neuspesne: pr\nkontrola prebehla neuspesne: pra\nkontrola prebehla neuspesne: prah\nkontrola prebehla neuspesne: praha\nposledna adresa: praha\n\nkontrola prebehla uspesne: b\ndlzka enable po uspesnej kontrole: 0\nenable po uspesnej kontrole: r\nkontrola prebehla neuspesne: br\nkontrola prebehla neuspesne: bra\nkontrola prebehla neuspesne: brat\nkontrola prebehla neuspesne: brati\nkontrola prebehla neuspesne: bratis\nkontrola prebehla neuspesne: bratisl\nkontrola prebehla neuspesne: bratisla\nkontrola prebehla neuspesne: bratislav\nkontrola prebehla neuspesne: bratislava\nposledna adresa: bratislava\n\nkontrola prebehla uspesne: b\ndlzka enable po uspesnej kontrole: 1\nenable po uspesnej kontrole: rr\nkontrola prebehla neuspesne: br\nkontrola prebehla neuspesne: brn\nkontrola prebehla neuspesne: brno\nposledna adresa: brno\n\nkontrola prebehla neuspesne: m\nkontrola prebehla neuspesne: me\nkontrola prebehla neuspesne: med\nkontrola prebehla neuspesne: medz\nkontrola prebehla neuspesne: medze\nkontrola prebehla neuspesne: medzev\nposledna adresa: medzev\n\nkontrola prebehla neuspesne: m\nkontrola prebehla neuspesne: ma\nkontrola prebehla neuspesne: mar\nkontrola prebehla neuspesne: mart\nkontrola prebehla neuspesne: marti\nkontrola prebehla neuspesne: martin\nposledna adresa: martin\n</code></pre>\n"}, {"tags": ["c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1509566639, "post_id": 47062683, "comment_id": 81073687, "body": "Please show a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. And maybe it&#39;s time to learn how to use your debugger."}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1509566682, "post_id": 47062683, "comment_id": 81073712, "body": "where is memory the memory allocated that the elements of dictionary should be pointing to?"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1509567563, "post_id": 47062683, "comment_id": 81074158, "body": "<code>dictionary</code> is <code>size</code> number of <i>array [<code>2</code>] pointers to char</i>. A <i>pointer</i> is a variable that stores the address of something else as its value. When you declare a pointer without initializing it to point to something else, it is an <i>uninitialized pointer</i>. (it doesn&#39;t store the address of anything else). Just like <code>int a;</code> declares <code>a</code> without a value. A <i>pointer</i> points to the <i>address of</i> something (i.e. it points to a memory address). You provide that address by assigning the address of a valid block of memory to your pointer, from existing or newly allocated memory."}], "answers": [{"comments": [{"owner": {"reputation": 8289, "user_id": 391806, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/88a2ea78dadbdaf73e1033fe7cbdeb73?s=128&d=identicon&r=PG", "display_name": "Dale Wilson", "link": "https://stackoverflow.com/users/391806/dale-wilson"}, "edited": false, "score": 2, "creation_date": 1509566515, "post_id": 47062745, "comment_id": 81073613, "body": "actually fgets does not read from dictionary, it writes to the memory pointed to by dictionary which is even worse."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 8289, "user_id": 391806, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/88a2ea78dadbdaf73e1033fe7cbdeb73?s=128&d=identicon&r=PG", "display_name": "Dale Wilson", "link": "https://stackoverflow.com/users/391806/dale-wilson"}, "edited": false, "score": 0, "creation_date": 1509566581, "post_id": 47062745, "comment_id": 81073660, "body": "@DaleWilson I&#39;m not saying <code>fgets</code> is doing the reading. I&#39;m saying the expression reads from the variable in order to get the value to pass to the function."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 0, "last_activity_date": 1509566386, "creation_date": 1509566386, "answer_id": 47062745, "question_id": 47062683, "link": "https://stackoverflow.com/questions/47062683/writing-to-char-array-in-c-throws-segfault/47062745#47062745", "title": "Writing to char* array in C throws segfault", "body": "<p><code>fgets(dictionary[i][j],100,stdin);</code> reads from an uninitialized variable (<code>dictionary[i][j]</code> was never given a value), which has undefined behavior.</p>\n\n<p>Also, <code>i</code> is going out of bounds later.</p>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": true, "score": 1, "last_activity_date": 1509566992, "creation_date": 1509566992, "answer_id": 47062890, "question_id": 47062683, "link": "https://stackoverflow.com/questions/47062683/writing-to-char-array-in-c-throws-segfault/47062890#47062890", "title": "Writing to char* array in C throws segfault", "body": "<p>Let's look at this part of your code:</p>\n\n<pre><code>char* dictionary[size][2];\n\n while(i &lt;= size) \n {   \n     printf(\"dictionary[%u][%u]= \",i,j);\n     fgets(dictionary[i][j],100,stdin);\n</code></pre>\n\n<p>Each <code>dictionary[i][j]</code> is a pointer to <code>char</code>, but you haven't set them to point anywhere meaningful yet - each array element contains some random bit pattern that may or may not correspond to a writable address.  Your first few entries get written <em>somewhere</em>, but eventually you try to write to a memory location you don't own or don't have access to.  </p>\n\n<p>You will need to set aside additional memory to store each individual string.  You either need create a 3D array of <code>char</code> (not <code>char *</code>):</p>\n\n<pre><code>#define MAX_STR_LEN 100\n...\nchar dictionary[size][2][MAX_STR_LEN+1]; \n</code></pre>\n\n<p><em>or</em> you will need to dynamically allocate memory for each array entry:</p>\n\n<pre><code>while ( i &lt; size )  // &lt;, not &lt;=\n{\n  dictionary[i][j] = malloc( sizeof *dictionary[i][j] * (MAX_STR_LEN + 1));\n  if ( !dictionary[i][j] )\n  {\n    // memory allocation failed, handle error\n  }\n  printf(\"dictionary[%u][%u]= \",i,j);\n  fgets(dictionary[i][j],MAX_STR_LEN,stdin);\n</code></pre>\n\n<p>If you allocate memory dynamically, you will need to explicitly <code>free</code> it when you're done:</p>\n\n<pre><code>for ( i = 0; i &lt; size; i++ )\n{\n  free( dictionary[i][0] );\n  free( dictionary[i][1] );\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 59, "user_id": 7200726, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-PNgygGxyHQs/AAAAAAAAAAI/AAAAAAAAAKw/gw0ZMBa0QDI/photo.jpg?sz=128", "display_name": "randomcoding", "link": "https://stackoverflow.com/users/7200726/randomcoding"}, "edited": false, "score": 0, "creation_date": 1509573980, "post_id": 47062981, "comment_id": 81077077, "body": "I am not allowed to use structures."}, {"owner": {"reputation": 3693, "user_id": 5494721, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WHK5j.png?s=128&g=1", "display_name": "OznOg", "link": "https://stackoverflow.com/users/5494721/oznog"}, "reply_to_user": {"reputation": 59, "user_id": 7200726, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-PNgygGxyHQs/AAAAAAAAAAI/AAAAAAAAAKw/gw0ZMBa0QDI/photo.jpg?sz=128", "display_name": "randomcoding", "link": "https://stackoverflow.com/users/7200726/randomcoding"}, "edited": false, "score": 0, "creation_date": 1509614301, "post_id": 47062981, "comment_id": 81091061, "body": "Well, in that case, consider this exercise as an illustration of the kind of code you don&#39;t want to write in the future (IMHO, structuring the code is always better than scratching one&#39;s head with arrays in 3 dimensions...). Nevertheless, dura lex sed lex."}], "tags": [], "owner": {"reputation": 3693, "user_id": 5494721, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WHK5j.png?s=128&g=1", "display_name": "OznOg", "link": "https://stackoverflow.com/users/5494721/oznog"}, "is_accepted": false, "score": 1, "last_activity_date": 1509568385, "last_edit_date": 1509568385, "creation_date": 1509567387, "answer_id": 47062981, "question_id": 47062683, "link": "https://stackoverflow.com/questions/47062683/writing-to-char-array-in-c-throws-segfault/47062981#47062981", "title": "Writing to char* array in C throws segfault", "body": "<p>instead of messing around with arrays of multiple dimensions, I suggest you use structures:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main()\n{\n    unsigned int size;\n    printf(\"Enter # of words to add: \");\n    if (scanf(\"%u\", &amp;size) != 1)\n        return 1; // cannot convert input to integer\n\n#define WORD_MAX_SIZE 100\n\n    struct {\n        char word[WORD_MAX_SIZE];\n        char translation[WORD_MAX_SIZE];\n    } dictionary[size];\n\n    memset(dictionary, 0, sizeof(dictionary));\n\n    for (int i = 0; i &lt; size; i++) {\n        printf(\"dictionary[%u].word= \", i);\n        fgets(dictionary[i].word, WORD_MAX_SIZE, stdin);\n        printf(\"dictionary[%u].translation= \", i);\n        fgets(dictionary[i].translation, WORD_MAX_SIZE, stdin);\n    }\n\n    // do something with your stuff\n}\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 7200726, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-PNgygGxyHQs/AAAAAAAAAAI/AAAAAAAAAKw/gw0ZMBa0QDI/photo.jpg?sz=128", "display_name": "randomcoding", "link": "https://stackoverflow.com/users/7200726/randomcoding"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 47062890, "answer_count": 3, "score": -1, "last_activity_date": 1509568385, "creation_date": 1509566129, "last_edit_date": 1509566788, "question_id": 47062683, "link": "https://stackoverflow.com/questions/47062683/writing-to-char-array-in-c-throws-segfault", "title": "Writing to char* array in C throws segfault", "body": "<p>I'm an infosec student, who has just begun learning C. I've been given an assignment to write a simple translation program using this prototype: <code>char* dictionary[number_of_words][2];</code>.</p>\n\n<p>The output should look something like this:</p>\n\n<pre><code>Enter # of words to add: 3\n\ndictionary[0][0]= plane\ndictionary[0][1]= Flugzeug\ndictionary[1][0]= house\ndictionary[1][1]= Haus\ndictionary[2][0]= cat\ndictionary[2][1]= Katze\n\nEnter english word to translate: house\n---&gt; Haus\n</code></pre>\n\n<p>My current (work in progress) code looks like this:</p>\n\n<pre><code>void clean_stdin(void);\nint main(void)\n{\n     unsigned int i = 0,j = 0,size; \n     printf(\"Enter # of words to add: \");\n     scanf(\"%u\",&amp;size);\n     clean_stdin(); //clears input buffer\n\n     char* dictionary[size][2];\n\n     while(i &lt;= size) \n     {   \n         printf(\"dictionary[%u][%u]= \",i,j);\n         fgets(dictionary[i][j],100,stdin);\n\n         if(j &gt;= 1)\n         {\n             j = 0;\n             ++i; \n         }\n         else\n             j = 1;\n         }   \n\n     return 0;\n }\n</code></pre>\n\n<p>The code throws no errors when compiled with <code>gcc -Wall main.c</code>, but this is the behaviour I get:</p>\n\n<pre><code>Enter # of words to add: 3\ndictionary[0][0]= plane\ndictionary[0][1]= Flugzeug\ndictionary[1][0]= house\ndictionary[1][1]= Haus\nfish: \u201c./a.out\u201d terminated by signal SIGSEGV (Adressbereichsfehler)\n\n*****\n\nEnter # of words to add: 4\ndictionary[0][0]= plane\nfish: \u201c./a.out\u201d terminated by signal SIGSEGV (Adressbereichsfehler)\n</code></pre>\n\n<p>There's a fundamental flaw somewhere in my thought process. Any help/heads up is very appreciated. Cheers!</p>\n"}, {"tags": ["c", "arrays", "segmentation-fault", "cs50"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 5, "creation_date": 1509566217, "post_id": 47062661, "comment_id": 81073448, "body": "Make a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and post it here."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1509566326, "post_id": 47062661, "comment_id": 81073501, "body": "<i>is it because I&#39;m allocating memory off of the stack and not the heap?</i> So why don&#39;t you try to allocate memory elsewhere than on the stack?"}, {"owner": {"reputation": 13, "user_id": 8870248, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZDI-jWGaPzs/AAAAAAAAAAI/AAAAAAAAFpA/MIzuB2M7ils/photo.jpg?sz=128", "display_name": "Kyle Regan", "link": "https://stackoverflow.com/users/8870248/kyle-regan"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1509566881, "post_id": 47062661, "comment_id": 81073816, "body": "Not sure how to allocate a 2 dimensional array with pointers and malloc, but I guess I need to figure that out."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1509567328, "post_id": 47062661, "comment_id": 81074053, "body": "Try to make a static global array."}, {"owner": {"reputation": 13, "user_id": 8870248, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZDI-jWGaPzs/AAAAAAAAAAI/AAAAAAAAFpA/MIzuB2M7ils/photo.jpg?sz=128", "display_name": "Kyle Regan", "link": "https://stackoverflow.com/users/8870248/kyle-regan"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1509567673, "post_id": 47062661, "comment_id": 81074224, "body": "All arrays are global in c I thought. Also, how could I declare it globally before I gather the n size where it bases it&#39;s dimensions off of?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1509568726, "post_id": 47062661, "comment_id": 81074713, "body": "Give it some a fixed size, if it it&#39;s too big it doesn&#39;t matter. And when it works then you have some clue where the problem might be."}, {"owner": {"reputation": 13, "user_id": 8870248, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZDI-jWGaPzs/AAAAAAAAAAI/AAAAAAAAFpA/MIzuB2M7ils/photo.jpg?sz=128", "display_name": "Kyle Regan", "link": "https://stackoverflow.com/users/8870248/kyle-regan"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1509570656, "post_id": 47062661, "comment_id": 81075629, "body": "Did that and it worked, tried it declaring the array in the body of the code, and it caught a segmentation fault between size of n = 1018 and 1019. Still puzzled as to why."}, {"owner": {"reputation": 1033, "user_id": 3410010, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zFRd3.jpg?s=128&g=1", "display_name": "yadhu", "link": "https://stackoverflow.com/users/3410010/yadhu"}, "edited": false, "score": 0, "creation_date": 1509571558, "post_id": 47062661, "comment_id": 81076008, "body": "After having a look at the code, As  mentioned by @WeatherVane. When the value of <code>i = 0</code> you are trying to access the memory which is not allocated(<code>body[i-1][j-1]</code> line 164). that&#39;s is when segmentation fault happens."}, {"owner": {"reputation": 451, "user_id": 8824227, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2acdee80e12a830b0538b61637944b47?s=128&d=identicon&r=PG&f=1", "display_name": "Bachman", "link": "https://stackoverflow.com/users/8824227/bachman"}, "edited": false, "score": 0, "creation_date": 1509571948, "post_id": 47062661, "comment_id": 81076189, "body": "Will just reading (not writing) out of bounds cause a seg fault?"}, {"owner": {"reputation": 451, "user_id": 8824227, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2acdee80e12a830b0538b61637944b47?s=128&d=identicon&r=PG&f=1", "display_name": "Bachman", "link": "https://stackoverflow.com/users/8824227/bachman"}, "edited": false, "score": 0, "creation_date": 1509572045, "post_id": 47062661, "comment_id": 81076224, "body": "Couldn&#39;t it be that when trying to allocate on the stack 1019*1019 long longs, it&#39;s just too big for the stack?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 1033, "user_id": 3410010, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zFRd3.jpg?s=128&g=1", "display_name": "yadhu", "link": "https://stackoverflow.com/users/3410010/yadhu"}, "edited": false, "score": 0, "creation_date": 1509572091, "post_id": 47062661, "comment_id": 81076245, "body": "@Yadhunandana I deleted that comment because I misread the <code>j</code> loop."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1509572229, "post_id": 47062661, "comment_id": 81076313, "body": "@KyleRegan you said &quot;tried declaring the array in the body of the code&quot; but that will still be on the stack. Define the array as a global array, before any code body, to validate the code. Likely you will need dynamic allocation, if the dimensions are not know in advance."}, {"owner": {"reputation": 451, "user_id": 8824227, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2acdee80e12a830b0538b61637944b47?s=128&d=identicon&r=PG&f=1", "display_name": "Bachman", "link": "https://stackoverflow.com/users/8824227/bachman"}, "edited": false, "score": 0, "creation_date": 1509572353, "post_id": 47062661, "comment_id": 81076385, "body": "Or just malloc the array inside the function."}, {"owner": {"reputation": 1033, "user_id": 3410010, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zFRd3.jpg?s=128&g=1", "display_name": "yadhu", "link": "https://stackoverflow.com/users/3410010/yadhu"}, "reply_to_user": {"reputation": 451, "user_id": 8824227, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2acdee80e12a830b0538b61637944b47?s=128&d=identicon&r=PG&f=1", "display_name": "Bachman", "link": "https://stackoverflow.com/users/8824227/bachman"}, "edited": false, "score": 1, "creation_date": 1509572391, "post_id": 47062661, "comment_id": 81076397, "body": "@bachman has a point.  It is too much memory to be allocated in stack, Why don&#39;t you use heap?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1509572887, "post_id": 47062661, "comment_id": 81076617, "body": "Obviously, but @KyleRegan already answered earlier comments to that effect, saying <i>Not sure how to allocate a 2 dimensional array with pointers and malloc, but I guess I need to figure that out.</i>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1509572967, "post_id": 47062661, "comment_id": 81076647, "body": "@KyleRegan, you say &quot;Still puzzled as to why&quot;. The reason is because the stack usually has a very small size compared to the heap."}, {"owner": {"reputation": 13, "user_id": 8870248, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZDI-jWGaPzs/AAAAAAAAAAI/AAAAAAAAFpA/MIzuB2M7ils/photo.jpg?sz=128", "display_name": "Kyle Regan", "link": "https://stackoverflow.com/users/8870248/kyle-regan"}, "edited": false, "score": 0, "creation_date": 1509597808, "post_id": 47062661, "comment_id": 81083437, "body": "I&#39;m still puzzled because I don&#39;t see why declaring the array globablly matters since all arrays are globally accessible in C I thought. Does declaring an array globally (i.e. before the main function) allocate the memory from the heap instead of the stack?"}, {"owner": {"reputation": 13, "user_id": 8870248, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZDI-jWGaPzs/AAAAAAAAAAI/AAAAAAAAFpA/MIzuB2M7ils/photo.jpg?sz=128", "display_name": "Kyle Regan", "link": "https://stackoverflow.com/users/8870248/kyle-regan"}, "edited": false, "score": 0, "creation_date": 1509599228, "post_id": 47062661, "comment_id": 81083843, "body": "Either way, it is working if I either declare the array globally or if I allocate the memory dynamically. Now I&#39;m bumping into file size limitations for bitmaps, I could probably stretch the parameters a bit more if I switch the format to black and white since that&#39;s all it uses anyway, but that will have to wait till another day, lol."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 8870248, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZDI-jWGaPzs/AAAAAAAAAAI/AAAAAAAAFpA/MIzuB2M7ils/photo.jpg?sz=128", "display_name": "Kyle Regan", "link": "https://stackoverflow.com/users/8870248/kyle-regan"}, "edited": false, "score": 0, "creation_date": 1509598993, "post_id": 47064243, "comment_id": 81083762, "body": "Hey, thank you. The link you provided worked great! I&#39;m going to pour over it though as I&#39;m not sure how it did work, like, why do we use three ***&#39;s when passing the array to the function? Also, what does setting the *array inside the parentheses do?"}, {"owner": {"reputation": 451, "user_id": 8824227, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2acdee80e12a830b0538b61637944b47?s=128&d=identicon&r=PG&f=1", "display_name": "Bachman", "link": "https://stackoverflow.com/users/8824227/bachman"}, "reply_to_user": {"reputation": 13, "user_id": 8870248, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZDI-jWGaPzs/AAAAAAAAAAI/AAAAAAAAFpA/MIzuB2M7ils/photo.jpg?sz=128", "display_name": "Kyle Regan", "link": "https://stackoverflow.com/users/8870248/kyle-regan"}, "edited": false, "score": 0, "creation_date": 1509607727, "post_id": 47064243, "comment_id": 81087412, "body": "&quot;Not sure how it worked&quot; - take a look at this <a href=\"https://stackoverflow.com/questions/19240540/dynamically-allocating-array-explain/19240932#19240932\">answer</a>"}, {"owner": {"reputation": 13, "user_id": 8870248, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZDI-jWGaPzs/AAAAAAAAAAI/AAAAAAAAFpA/MIzuB2M7ils/photo.jpg?sz=128", "display_name": "Kyle Regan", "link": "https://stackoverflow.com/users/8870248/kyle-regan"}, "edited": false, "score": 0, "creation_date": 1509626319, "post_id": 47064243, "comment_id": 81099289, "body": "Literally just joind yesterday . Not enough clout to vote."}], "tags": [], "owner": {"reputation": 451, "user_id": 8824227, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2acdee80e12a830b0538b61637944b47?s=128&d=identicon&r=PG&f=1", "display_name": "Bachman", "link": "https://stackoverflow.com/users/8824227/bachman"}, "is_accepted": true, "score": 0, "last_activity_date": 1509572924, "creation_date": 1509572924, "answer_id": 47064243, "question_id": 47062661, "link": "https://stackoverflow.com/questions/47062661/why-am-i-getting-a-seg-fault-in-c/47064243#47064243", "title": "Why am I getting a seg fault in C?", "body": "<p>Your body[n][n] array is too large to be allocated on the stack.\nYou can allocate it on the heap instead where you will be much less limited by size.\nSee previous answer for how to dynamically allocate a 2d array:\n<a href=\"https://stackoverflow.com/q/15062718/8824227\">Allocate memory 2d array in function C</a></p>\n"}], "owner": {"reputation": 13, "user_id": 8870248, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZDI-jWGaPzs/AAAAAAAAAAI/AAAAAAAAFpA/MIzuB2M7ils/photo.jpg?sz=128", "display_name": "Kyle Regan", "link": "https://stackoverflow.com/users/8870248/kyle-regan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 1, "accepted_answer_id": 47064243, "answer_count": 1, "score": 1, "last_activity_date": 1509945194, "creation_date": 1509566045, "last_edit_date": 1509945194, "question_id": 47062661, "link": "https://stackoverflow.com/questions/47062661/why-am-i-getting-a-seg-fault-in-c", "title": "Why am I getting a seg fault in C?", "body": "<p><a href=\"https://github.com/KRegan82/Tinkering/blob/master/sierpinskiBMP.c\" rel=\"nofollow noreferrer\">https://github.com/KRegan82/Tinkering/blob/master/sierpinskiBMP.c</a></p>\n\n<p><sup><em>(Code retrieved 2017-11-05 \u2014 may not be identical to the original, which is another reason to require code in the question.)</em></sup></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;cs50.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n#include &lt;stdint.h&gt;\n\n\n// data types for the standard MS sruct values for the headers\ntypedef uint8_t  BYTE;\ntypedef uint32_t DWORD;\ntypedef int32_t  LONG;\ntypedef uint16_t WORD;\n\n//bmp file header struct\ntypedef struct\n{\n    WORD bfType;\n    DWORD bfSize;\n    WORD bfReserved1;\n    WORD bfReserved2;\n    DWORD bfOffBits;\n} __attribute__((__packed__))\nBITMAPFILEHEADER;\n\n//bmp info header struct\ntypedef struct\n{\n    DWORD biSize;\n    LONG biWidth;\n    LONG biHeight;\n    WORD biPlanes;\n    WORD biBitCount;\n    DWORD biCompression;\n    DWORD biSizeImage;\n    LONG biXPelsPerMeter;\n    LONG biYPelsPerMeter;\n    DWORD biClrUsed;\n    DWORD biClrImportant;\n} __attribute__((__packed__))\nBITMAPINFOHEADER;\n\n//bmp pixel struct\ntypedef struct\n{\n    BYTE rgbtBlue;\n    BYTE rgbtGreen;\n    BYTE rgbtRed;\n} __attribute__((__packed__))\nRGBTRIPLE;\n// this program is designed to 'build' a sierpinski triangle of n layers given the users input. triangle built from top down using 2 x 2 pixel structure\n// the structs above are completely 'borrowed' from the team at harvards cs50 class, whose mobile IDE is also wehre I wrote this\n// and a special thank you to Irene Naya and Aditya Singhania two strangers on facebook for whom I couldn't have made this without\nint main(void)\n{\n    //prompt for and store height (in 2x2 pixel size)\n    fprintf(stderr, \"How many layers do you want? \");\n    int n = get_int();\n\n    //setup paramaters to write to .bmp file and filename\n\n    char ofName[21];\n    sprintf(ofName,\"sierpinski%05i.bmp\",n);\n    FILE *outfile = fopen(ofName,\"w\");\n\n    // setup file header and info header assignments\n    BITMAPFILEHEADER bf;\n    BITMAPINFOHEADER bi;\n\n    //calculate header and header info values to write using structs in bmp.h\n    bi.biWidth = (n * 2) + 4;\n    bi.biHeight = 0 -((n * 2) + 4);\n\n    //calculate padding that will be needed\n    int pad = (4 - (bi.biWidth * sizeof(RGBTRIPLE)) % 4) % 4;\n\n    // assign new image size\n    bi.biSizeImage = abs(bi.biHeight) * ((bi.biWidth * sizeof(RGBTRIPLE)) + pad);\n\n    // assign new file header parameters\n\n    bf.bfType = 0x4d42;\n    bf.bfReserved1 = 0;\n    bf.bfReserved2 = 0;\n    bf.bfOffBits = 0x36;\n\n    //assign new info header parameters\n    bi.biSize = 0x28;\n    bi.biPlanes = 1;\n    bi.biBitCount = 24;\n    bi.biCompression = 0;\n    bi.biXPelsPerMeter = 0xb12;\n    bi.biYPelsPerMeter = 0xb12;\n    bi.biClrUsed = 0;\n    bi.biClrImportant = 0;\n\n    // assign new file size\n    bf.bfSize = bi.biSizeImage + sizeof(BITMAPFILEHEADER) + sizeof(BITMAPINFOHEADER);\n\n    // write outfile's BITMAPFILEHEADER\n    fwrite(&amp;bf, sizeof(BITMAPFILEHEADER), 1, outfile);\n\n    // write outfile's BITMAPINFOHEADER\n    fwrite(&amp;bi, sizeof(BITMAPINFOHEADER), 1, outfile);\n\n    //necessary variables for triangle algorithm\n    long long body[n][n];\n    int print = 0;\n\n    //create rgp triple for manipulation\n    RGBTRIPLE pixel;\n\n    //add buffer lines to top of .bmp\n    for(int i = 0; i&lt; ((n * 2) + 4); i++)\n    {\n        pixel.rgbtRed = 0xff;\n        pixel.rgbtBlue = 0xff;\n        pixel.rgbtGreen = 0xff;\n        fwrite(&amp;pixel, sizeof(RGBTRIPLE), 1, outfile);\n    }\n\n    //add padding in if necessary\n    for (int l = 0; l &lt; pad; l++)\n    {\n        fputc(0x00, outfile);\n    }\n\n    // second layer of top buffer lining\n    for(int i = 0; i&lt; ((n * 2) + 4); i++)\n    {\n        pixel.rgbtRed = 0xff;\n        pixel.rgbtBlue = 0xff;\n        pixel.rgbtGreen = 0xff;\n        fwrite(&amp;pixel, sizeof(RGBTRIPLE), 1, outfile);\n    }\n    //add padding in if necessary\n    for (int l = 0; l &lt; pad; l++)\n    {\n        fputc(0x00, outfile);\n    }\n    // iterate over the area and print necessary digits\n    for(int i = 0; i &lt; n ; i++)\n    {\n        // blank space that borders triangle value\n        int blankCount = (n + 1) - i;\n        //write blank space surrounding start of triangle\n        for(int j = 0; j &lt; blankCount; j++ )\n        {\n            pixel.rgbtRed = 0xff;\n            pixel.rgbtBlue = 0xff;\n            pixel.rgbtGreen = 0xff;\n            fwrite(&amp;pixel, sizeof(RGBTRIPLE), 1, outfile);\n        }\n        //draw first line of this rows triangle values\n        for(int j = 0; j&lt;=i; j++)\n        {\n\n\n            if (j == 0 || i == j)\n            {\n                print = 1;\n                body[i][j] = 1;\n            }\n\n            else if( body[i-1][j-1] + body[i-1][j] == 2 || body[i-1][j-1] + body[i-1][j] == 0)\n            {\n                print = 0;\n                body[i][j] = 0;\n\n            }\n            else if(body[i-1][j-1] + body[i-1][j] == 1 )\n            {\n                print = 1;\n                body[i][j] = 1;\n\n            }\n\n            if ( print == 0)\n            {\n                pixel.rgbtRed = 0xff;\n                pixel.rgbtBlue = 0xff;\n                pixel.rgbtGreen = 0xff;\n                fwrite(&amp;pixel, sizeof(RGBTRIPLE), 1, outfile);\n                fwrite(&amp;pixel, sizeof(RGBTRIPLE), 1, outfile);\n            }\n            else if (print == 1)\n            {\n                pixel.rgbtRed = 0x00;\n                pixel.rgbtBlue = 0x00;\n                pixel.rgbtGreen = 0x00;\n                fwrite(&amp;pixel, sizeof(RGBTRIPLE), 1, outfile);\n                fwrite(&amp;pixel, sizeof(RGBTRIPLE), 1, outfile);\n            }\n\n        }\n        // proceeding blank space bordering back end of triangle\n        for(int j = 0; j &lt; blankCount; j++ )\n            {\n                pixel.rgbtRed = 0xff;\n                pixel.rgbtBlue = 0xff;\n                pixel.rgbtGreen = 0xff;\n                fwrite(&amp;pixel, sizeof(RGBTRIPLE), 1, outfile);\n            }\n        //add back in if necessary\n        for (int l = 0; l &lt; pad; l++)\n        {\n            fputc(0x00, outfile);\n        }\n        //this is really just a second iteration of drawing the same row. each row has to be drawn twice because each element is 2 pixels by two pixels\n\n        for(int j = 0; j &lt;blankCount ; j++ )\n        {\n            pixel.rgbtRed = 0xff;\n            pixel.rgbtBlue = 0xff;\n            pixel.rgbtGreen = 0xff;\n            fwrite(&amp;pixel, sizeof(RGBTRIPLE), 1, outfile);\n        }\n\n        for(int j = 0; j&lt;=i; j++)\n        {\n\n\n            if (j == 0 || i == j)\n            {\n                print = 1;\n                body[i][j] = 1;\n            }\n\n            else if( body[i-1][j-1] + body[i-1][j] == 2 || body[i-1][j-1] + body[i-1][j] == 0)\n            {\n                print = 0;\n                body[i][j] = 0;\n\n            }\n            else if(body[i-1][j-1] + body[i-1][j] == 1 )\n            {\n                print = 1;\n                body[i][j] = 1;\n\n            }\n\n            if ( print == 0)\n            {\n                pixel.rgbtRed = 0xff;\n                pixel.rgbtBlue = 0xff;\n                pixel.rgbtGreen = 0xff;\n                fwrite(&amp;pixel, sizeof(RGBTRIPLE), 1, outfile);\n                fwrite(&amp;pixel, sizeof(RGBTRIPLE), 1, outfile);\n            }\n            else if (print == 1)\n            {\n                pixel.rgbtRed = 0x00;\n                pixel.rgbtBlue = 0x00;\n                pixel.rgbtGreen = 0x00;\n                fwrite(&amp;pixel, sizeof(RGBTRIPLE), 1, outfile);\n                fwrite(&amp;pixel, sizeof(RGBTRIPLE), 1, outfile);\n            }\n\n        }\n        for(int j = 0; j &lt; blankCount; j++ )\n            {\n                pixel.rgbtRed = 0xff;\n                pixel.rgbtBlue = 0xff;\n                pixel.rgbtGreen = 0xff;\n                fwrite(&amp;pixel, sizeof(RGBTRIPLE), 1, outfile);\n            }\n        //add padding in if necessary\n        for (int l = 0; l &lt; pad; l++)\n        {\n            fputc(0x00, outfile);\n        }\n\n    }\n    // add buffer lines to bottom of .bmp\n    for(int i = 0; i&lt; ((n * 2) + 4); i++)\n    {\n        pixel.rgbtRed = 0xff;\n        pixel.rgbtBlue = 0xff;\n        pixel.rgbtGreen = 0xff;\n        fwrite(&amp;pixel, sizeof(RGBTRIPLE), 1, outfile);\n    }\n    //add padding in if necessary\n    for (int l = 0; l &lt; pad; l++)\n    {\n        fputc(0x00, outfile);\n    }\n    for(int i = 0; i&lt; ((n * 2) + 4); i++)\n    {\n        pixel.rgbtRed = 0xff;\n        pixel.rgbtBlue = 0xff;\n        pixel.rgbtGreen = 0xff;\n        fwrite(&amp;pixel, sizeof(RGBTRIPLE), 1, outfile);\n    }\n    //add padding in if necessary\n    for (int l = 0; l &lt; pad; l++)\n    {\n        fputc(0x00, outfile);\n    }\n    // just tidying up here\n    fclose(outfile);\n    return 0;\n}\n</code></pre>\n\n<p>I am taking CS50 class, and wrote this program to output a Sierpinski triangle to a <code>.bmp</code> file of a user given height. It works fine for generating anything up to and a somewhat over 512 rows, but at 1024 (the next complete triangle height) I get a seg fault.</p>\n\n<p>Not sure why this is happening, is it because I'm allocating memory off of the stack and not the heap? Any help would be appreciated.</p>\n\n<p>Here is the segment of code where I initialize the array that keeps track of the values each pixel should hold.</p>\n\n<pre><code> long long body[n][n];\n</code></pre>\n\n<p>I changed it to a long long hoping that would fix the problem, but clearly it's something else. Puzzled. </p>\n"}, {"tags": ["c", "pointers", "structure", "dereference", "anonymous-struct"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 10, "creation_date": 1509562967, "post_id": 47061871, "comment_id": 81071662, "body": "In the first example the structure is an <i>anonymous</i> structure, and <code>p</code> is a pointer to that anonymous structure."}, {"owner": {"reputation": 362, "user_id": 8107423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/335a2f3546dfa7a2872910a69d4e0782?s=128&d=identicon&r=PG&f=1", "display_name": "Eulerian", "link": "https://stackoverflow.com/users/8107423/eulerian"}, "edited": false, "score": 0, "creation_date": 1509563153, "post_id": 47061871, "comment_id": 81071752, "body": "What&#39;s an anonymous structure? Is it a kind of structure or are you referring to the the fact that the structure type is undefined?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1509563190, "post_id": 47061871, "comment_id": 81071776, "body": "It&#39;s just a structure that has no name, like the one shown. It&#39;s not used very often, because it&#39;s of limited use."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 6, "creation_date": 1509563191, "post_id": 47061871, "comment_id": 81071778, "body": "It&#39;s a structure type with no name, so you can&#39;t declare any other variables with the same structure type."}, {"owner": {"reputation": 362, "user_id": 8107423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/335a2f3546dfa7a2872910a69d4e0782?s=128&d=identicon&r=PG&f=1", "display_name": "Eulerian", "link": "https://stackoverflow.com/users/8107423/eulerian"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1509563277, "post_id": 47061871, "comment_id": 81071820, "body": "@WhozCraig Yes, I missed that; made the edit. Thanks!"}, {"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 2, "creation_date": 1509563634, "post_id": 47061871, "comment_id": 81072007, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/22117726/the-use-of-a-pointer-to-an-unnamed-struct-in-c\">The use of a pointer to an unnamed struct in C?</a>"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 1, "creation_date": 1509564107, "post_id": 47061871, "comment_id": 81072255, "body": "@RaymondChen Apparently that question is not really about anonymous structures, but about a pointer <i>type</i> rather than just a pointer to such."}, {"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1509569074, "post_id": 47061871, "comment_id": 81074875, "body": "@EugeneSh. But as part of the set-up for that question, it answer the question about &quot;What does this tagless struct syntax mean?&quot;"}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1509575410, "post_id": 47061871, "comment_id": 81077573, "body": "you should select one of the answers if it is to your satisfaction"}, {"owner": {"reputation": 25595, "user_id": 202229, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6cc1d82c11563b440c57280ad587ee47?s=128&d=identicon&r=PG", "display_name": "smci", "link": "https://stackoverflow.com/users/202229/smci"}, "edited": false, "score": 0, "creation_date": 1509619733, "post_id": 47061871, "comment_id": 81094945, "body": "Was it correct of me to tag this <a href=\"https://stackoverflow.com/questions/tagged/anonymous-struct\">anonymous-struct</a> ?"}], "answers": [{"comments": [{"owner": {"reputation": 1672, "user_id": 86969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0972de716efa6fe812f0993f8f0df17?s=128&d=identicon&r=PG", "display_name": "Dan", "link": "https://stackoverflow.com/users/86969/dan"}, "edited": false, "score": 0, "creation_date": 1509583983, "post_id": 47062039, "comment_id": 81080065, "body": "Should the phrase &quot;provide a pointer <i>to</i> that type&quot; be more accurately written, &quot;provide a pointer <i>of</i> that type&quot;?  I misread your answer to mean that we had a pointer to the type itself."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "reply_to_user": {"reputation": 1672, "user_id": 86969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0972de716efa6fe812f0993f8f0df17?s=128&d=identicon&r=PG", "display_name": "Dan", "link": "https://stackoverflow.com/users/86969/dan"}, "edited": false, "score": 0, "creation_date": 1509589308, "post_id": 47062039, "comment_id": 81081248, "body": "@Dan. Fixed. Thanks for catching."}], "tags": [], "owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "is_accepted": true, "score": 12, "last_activity_date": 1509589282, "last_edit_date": 1509589282, "creation_date": 1509563470, "answer_id": 47062039, "question_id": 47061871, "link": "https://stackoverflow.com/questions/47061871/what-does-this-pointer-of-type-structure-definition-mean-in-c/47062039#47062039", "title": "What does this pointer of type structure definition mean (in C)?", "body": "<p>The <code>struct</code> keyword works sort of like an extended version of <code>typedef</code>, except that you create a complex custom type (called a structure) instead of aliasing an existing type. If you only have one thing that needs to use the declared type, you do not need to provide an explicit name for the type.</p>\n\n<p>The first statement you are looking at declares a structure with two fields, but does not name it. This is called an anonymous structure. The declaration does, however, provide a pointer of that type.</p>\n\n<p>One possible use-case for such a declaration is when you make a header for an external library, possibly one that is not even written in C. In that case, the type of the structure may be opaque or incomplete, and you just need to have a convenient reference to some parts of it. Making the structure anonymous prevents you from being able to allocate it yourself easily, but allows you to interact with it through the pointer.</p>\n\n<p>More commonly, you will see this notation used in conjunction with named or at least aliased structures. The second statement could be rewritten as</p>\n\n<pre><code>struct example { ... } s1, *ptr;\n</code></pre>\n\n<p>In that case, <code>struct example *ptr = &amp;s1;</code> would be just <code>ptr = &amp;s1;</code>.</p>\n\n<p>An even more common occurrence is the use of anonymous structures with <code>typedef</code>, create custom type names that do not include the <code>struct</code> keyword. Your second example could be rewritten as</p>\n\n<pre><code>typedef struct { ... } example, *pexample;\nexample s1;\npexample ptr; // alternatively example *ptr;\nptr = &amp;s1;\n</code></pre>\n\n<p>Note that the type of <code>s1</code> is <code>example</code> and not <code>struct example</code> in this case.</p>\n"}, {"comments": [{"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1509563763, "post_id": 47062085, "comment_id": 81072078, "body": "Or accidentally allocating one of our own."}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1509563793, "post_id": 47062085, "comment_id": 81072097, "body": "@MadPhysicist.: Yes true.you cant allocate when it&#39;s anonymous...just like one time use..."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1509564093, "post_id": 47062085, "comment_id": 81072246, "body": "How would you refer to the anon struct elements?"}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "reply_to_user": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 1, "creation_date": 1509564191, "post_id": 47062085, "comment_id": 81072294, "body": "@stark.: Like this"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1509564954, "post_id": 47062085, "comment_id": 81072734, "body": "@coderredoc <code>p=malloc(sizeof(*p))</code>. (It&#39;s in the original case of <code>p</code> being pointer).. <b>update</b> - oh, I see it is mentioned in the other answer.."}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1509590111, "post_id": 47062085, "comment_id": 81081481, "body": "@EugeneSh.: It is just an example for the user to get the example. If there is any error let me know..and thanks."}], "tags": [], "owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "is_accepted": false, "score": 2, "last_activity_date": 1509564184, "last_edit_date": 1509564184, "creation_date": 1509563668, "answer_id": 47062085, "question_id": 47061871, "link": "https://stackoverflow.com/questions/47061871/what-does-this-pointer-of-type-structure-definition-mean-in-c/47062085#47062085", "title": "What does this pointer of type structure definition mean (in C)?", "body": "<p>Also another use (of anonymous structures) would be to use them inside unions or other structs which basically limits the use of that struct to that particular parents union or structure not anything else, which is quite useful from programmer's point of view because looking at a code like this it provides us with the information that it is used locally on the context of the struct or union inside it -\n nothing more than that. (also saves us from naming). </p>\n\n<hr>\n\n<p>Also if you use this anonymous structure you wont be able to allocate one instance of it other than the one which already exists.</p>\n\n<p>Example:-(stark's comment: how to use it?)</p>\n\n<pre><code>struct {\n  int a;\n  int b;\n} p;\n\nscanf(\"%d\",&amp;p.a);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9367, "user_id": 4454124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c094d8979fb41b789a7c7f21d9329359?s=128&d=identicon&r=PG&f=1", "display_name": "mnistic", "link": "https://stackoverflow.com/users/4454124/mnistic"}, "is_accepted": false, "score": 0, "last_activity_date": 1509564294, "creation_date": 1509564294, "answer_id": 47062243, "question_id": 47061871, "link": "https://stackoverflow.com/questions/47061871/what-does-this-pointer-of-type-structure-definition-mean-in-c/47062243#47062243", "title": "What does this pointer of type structure definition mean (in C)?", "body": "<p>If you needed an ad-hoc, one-time-use definition of a struct (or union) that will not be useful outside of scope in which it was declared, you would use what is called <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Unnamed-Fields.html\" rel=\"nofollow noreferrer\">anonymous or unnamed structs and unions</a>. This saves you from having to declare the struct before you use it and, in the case of complex types, declaring the inner types, such as <a href=\"https://stackoverflow.com/a/26361366/4454124\">here</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1509564990, "post_id": 47062333, "comment_id": 81072755, "body": "TIL you could still extract the size via <code>sizeof(*p)</code>. Very +1."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1509568498, "post_id": 47062333, "comment_id": 81074604, "body": "@MadPhysicist or <code>sizeof *p</code>.  <code>()</code> not needed.  (A style issue)"}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1509569662, "post_id": 47062333, "comment_id": 81075130, "body": "@chux. Point taken. I just happen to prefer putting parentheses everywhere."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 2, "creation_date": 1509569788, "post_id": 47062333, "comment_id": 81075199, "body": "@MadPhysicist You may enjoy <a href=\"https://imgs.xkcd.com/comics/lisp_cycles.png\" rel=\"nofollow noreferrer\"><code>(LISP)</code></a>."}, {"owner": {"reputation": 32760, "user_id": 206367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/121b360a4d7d20be6e220dcdb555649f?s=128&d=identicon&r=PG", "display_name": "t0mm13b", "link": "https://stackoverflow.com/users/206367/t0mm13b"}, "edited": false, "score": 0, "creation_date": 1509576279, "post_id": 47062333, "comment_id": 81077853, "body": "The string is not allocated so how could that work? I think there should be a warning to that code usage in dealing with a uninitialized pointer to char on the LHS expression with a constant string used as RHS."}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 3, "last_activity_date": 1509564907, "last_edit_date": 1509564907, "creation_date": 1509564664, "answer_id": 47062333, "question_id": 47061871, "link": "https://stackoverflow.com/questions/47061871/what-does-this-pointer-of-type-structure-definition-mean-in-c/47062333#47062333", "title": "What does this pointer of type structure definition mean (in C)?", "body": "<p>For starters consider the following simple program</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt; \n\nint main(void) \n{\n    struct {\n        int len;\n        char *str;\n    } *p;\n\n    p = malloc( sizeof( *p ) );\n\n    p-&gt;str = \"Hello Nihal Jain\";\n    p-&gt;len = strlen( p-&gt;str );\n\n    while ( *p-&gt;str ) putchar( *p-&gt;str++ );\n    putchar( '\\n' );\n\n    free( p );\n\n    return 0;\n}\n</code></pre>\n\n<p>Its output is</p>\n\n<pre><code>Hello Nihal Jain\n</code></pre>\n\n<p>So in this declaration</p>\n\n<pre><code>    struct {\n        int len;\n        char *str;\n    } *p;\n</code></pre>\n\n<p>there is declared a pointer of the type of the unnamed structure. The pointer itself is not initialized. You could write for example</p>\n\n<pre><code>    struct {\n        int len;\n        char *str;\n    } *p = malloc( sizeof( *p ) );\n</code></pre>\n\n<p>For this simple program the name of the structure is not required because neither declaration of an object of the structure type is present or needed in the program.</p>\n\n<p>So you can not declare an object of the structure type but it is not required in this case.</p>\n\n<p>According to the C Standard structure or union are declared like</p>\n\n<pre>\nstruct-or-union-specifier:\n    struct-or-union identifier<sub>opt</sub> { struct-declaration-list }\n    struct-or-union identifier\n</pre>\n\n<p>It is seen that the identifier is optional if there is a struct-declaration-list. So an unnamed structure can be used as a type specifier. </p>\n\n<p>One more example with using enumerations. You can declare enumerators without declaring the enumeration type. For example</p>\n\n<pre><code>enum { EXIT_SUCCESS = 0, EXIT_FAILURE = -1 }; \n</code></pre>\n\n<p>You can use the enumerators that have the type <code>int</code> without declaring an object of the enumeration type if there is no such a requirement in the program.</p>\n"}], "owner": {"reputation": 362, "user_id": 8107423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/335a2f3546dfa7a2872910a69d4e0782?s=128&d=identicon&r=PG&f=1", "display_name": "Eulerian", "link": "https://stackoverflow.com/users/8107423/eulerian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 849, "favorite_count": 2, "accepted_answer_id": 47062039, "answer_count": 4, "score": 22, "last_activity_date": 1509619701, "creation_date": 1509562866, "last_edit_date": 1509619701, "question_id": 47061871, "link": "https://stackoverflow.com/questions/47061871/what-does-this-pointer-of-type-structure-definition-mean-in-c", "title": "What does this pointer of type structure definition mean (in C)?", "body": "<p>In K&amp;R Chapter 6, a declaration is mentioned as follows:</p>\n\n<pre><code>struct{\n    int len;\n    char *str;\n} *p;\n</code></pre>\n\n<p>I couldn't understand which structure is this pointer p pointing to and if such a pointer definition is even valid because in all other examples given in the book and the ones I have seen otherwise, when defining a pointer to a structure, the name of the structure, that is, the type being defined needs to be mentioned. For example,</p>\n\n<pre><code>struct example{\n    int a;\n    ...\n}s1;\n</code></pre>\n\n<p>and then,</p>\n\n<pre><code>struct example *ptr = &amp;s1;\n</code></pre>\n\n<p>so, it is mentioned that ptr is pointing to a type struct example and not just struct.</p>\n\n<p>Also, of particular interest was this:</p>\n\n<blockquote>\n  <p>*p->str fetches whatever str points to; *p->str++\n  increments str after accessing whatever it points to (just like *s++);</p>\n</blockquote>\n\n<p>I couldn't follow what p is in the first place, hence, not the increment and dereference as well.</p>\n\n<p>What is going on here?</p>\n\n<p>Thanks in advance!</p>\n\n<p>P.S. I am new here, so any feedback on the format of the question would also be appreciated.</p>\n"}, {"tags": ["php", "c", "sockets", "pack"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8869973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f24ef6b3963f6ddb5464bb0608158fb?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/8869973/alexander"}, "edited": false, "score": 0, "creation_date": 1509571664, "post_id": 47062916, "comment_id": 81076065, "body": "Hello Furgas, thanks for helping. It does not work for me, the device does not recognize the command. I already try several combinations and nothing"}], "tags": [], "owner": {"reputation": 2652, "user_id": 170403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30677a3ca40a24f09fce8ca74e26e399?s=128&d=identicon&r=PG", "display_name": "Furgas", "link": "https://stackoverflow.com/users/170403/furgas"}, "is_accepted": false, "score": 0, "last_activity_date": 1509567094, "creation_date": 1509567094, "answer_id": 47062916, "question_id": 47061866, "link": "https://stackoverflow.com/questions/47061866/convert-string-hexadecimal-to-binary-pack-in-c-for-socket/47062916#47062916", "title": "Convert string Hexadecimal to Binary PACK in C for SOCKET", "body": "<p>Does it work?</p>\n\n<pre><code>char message[] = \"\\xa5\\x00\\x00\\x00\\x01\\x5e\\x00\\x00\\xbc\\x19\";\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8869973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f24ef6b3963f6ddb5464bb0608158fb?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/8869973/alexander"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 289, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1510668817, "creation_date": 1509562861, "question_id": 47061866, "link": "https://stackoverflow.com/questions/47061866/convert-string-hexadecimal-to-binary-pack-in-c-for-socket", "title": "Convert string Hexadecimal to Binary PACK in C for SOCKET", "body": "<p>I need help with a code that I must pass from PHP to C.\nThe code allows to send via SOCKET an instruction to a remote device.\nIt works perfect for me in PHP, but I have to convert it to C. Everything is fine, except PHP's pack () function, I do not see how to replace it in C.\nBasically I have to pass this:</p>\n\n<pre><code>$message = pack(\"H2H8H2H4H4\", \"a5\", \"00000001\", \"5e\", \"0000\", \"bc19\");\n</code></pre>\n\n<p>A mesaje_in_c = \u00bf ?</p>\n\n<p>I would appreciate the support you can give me, thanks!</p>\n\n<p>This is the PHP code:</p>\n\n<pre><code>&lt;?php\n\n$host    = \"192.168.0.140\";\n$port    = 8081;\n$socket = socket_create(AF_INET, SOCK_STREAM, SOL_TCP);\nif ($socket === false) {\n    print \"socket_create() fall\u00f3: raz\u00f3n: \" . socket_strerror(socket_last_error()) .\"\\n\";\n} else {\n    print \"create socket OK.\\n\";\n}\n\nsocket_set_option(\n  $socket,\n  SOL_SOCKET,  // socket level\n  SO_RCVTIMEO, // timeout option\n  array(\n    \"sec\"=&gt;10, // Timeout in seconds\n    \"usec\"=&gt;0  // I assume timeout in microseconds\n    )\n  );\n\n// connect to server\n$result = socket_connect($socket, $host, $port) or die(\"Could not connect to server\\n\");  \nif ($result === false) {\n    print \"socket_connect() fall\u00f3.\\nRaz\u00f3n: ($result) \" . socket_strerror(socket_last_error($socket)) . \"\\n\";\n} else {\n    print \"connect to server OK.\\n\";\n}\n\n$message = pack(\"H2H8H2H4H4\", \"a5\", \"00000001\", \"5e\", \"0000\", \"bc19\"); \necho \"Message To server Bin: \".$message.\"\\n\";\necho \"Message dec: \";\nprint_r(unpack(\"H*\", $message)).\"\\n\"; \n\n// send string to server\nsocket_write($socket, $message, strlen($message)) or die(\"Could not send data to server\\n\");\n\n// get server response\n$result = socket_read($socket, 1024) or die(\"Could not read server response\\n\");\n\nprint \"Reply From Server  Bin:\".$result.\"\\n\";\n\n$resultHex = unpack(\"H*\", $result);\nprint \"Reply From Server  Hex:\";\nprint_r($resultHex).\"\\n\";\n\n// close socket\nsocket_close($socket);\n?&gt;\n</code></pre>\n\n<p><strong>And this is the C code to finish:</strong></p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;winsock2.h&gt;\n#pragma comment(lib,\"ws2_32.lib\") //Winsock Library\n\nint main(int argc , char *argv[]){\n\n    WSADATA wsa;\n    SOCKET s;\n    struct sockaddr_in server;\n    char *message , server_reply[2000];\n    int recv_size;\n\n    printf(\"\\nInitialising Winsock...\");\n    if (WSAStartup(MAKEWORD(2,2),&amp;wsa) != 0)\n    {\n        printf(\"Failed. Error Code : %d\",WSAGetLastError());\n        return 1;\n    }\n\n    printf(\"Initialised.\\n\");\n\n    //Create a socket\n    if((s = socket(AF_INET , SOCK_STREAM , 0 )) == INVALID_SOCKET)\n    {\n        printf(\"Could not create socket : %d\" , WSAGetLastError());\n    }\n\n    printf(\"Socket created.\\n\");\n\n\n    server.sin_addr.s_addr = inet_addr(\"192.168.0.140\");\n    server.sin_family = AF_INET;\n    server.sin_port = htons(8081);\n\n    //Connect to remote server\n    if (connect(s , (struct sockaddr *)&amp;server , sizeof(server)) &lt; 0)\n    {\n        puts(\"connect error\");\n        return 1;\n    }\n\n    puts(\"Connected\");\n\n    //Send some data\n    message = \"a5000000015e0000bc19\";\n    // ???? message = pack(\"H2H8H2H4H4\", \"a5\", \"00000001\", \"5e\", \"0000\", \"bc19\");\n\n    if( send(s , message , strlen(message) , 0) &lt; 0)\n    {\n        puts(\"Send failed\");\n        system(\"pause\");\n        return 1;\n    }\n    puts(\"Data Send\\n\");\n\n    //Receive a reply from the server\n    if((recv_size = recv(s , server_reply , 2000 , 0)) == SOCKET_ERROR)\n    {\n        puts(\"recv failed\");\n    }\n\n    puts(\"Reply received\\n\");\n\n    //Add a NULL terminating character to make it a proper string before printing\n    server_reply[recv_size] = '\\0';\n    puts(server_reply);\n\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n\n<p>I would appreciate the support you can give me, thanks!</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 2, "creation_date": 1509562665, "post_id": 47061774, "comment_id": 81071508, "body": "I think he&#39;s asking why <code>~0&lt;&lt;2</code> results in the warning, but <code>~0&lt;&lt;count</code> does not."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 1, "creation_date": 1509562675, "post_id": 47061774, "comment_id": 81071514, "body": "@ChristianGibbons Yeah, got it. A bit too late"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1509562715, "post_id": 47061774, "comment_id": 81071534, "body": "Probably because <code>count</code> can be <code>0</code>"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 1, "creation_date": 1509562756, "post_id": 47061774, "comment_id": 81071564, "body": "What compiler/version?"}, {"owner": {"reputation": 283, "user_id": 2994173, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3dbf18648bc9e60db5d7e3eb9447b518?s=128&d=identicon&r=PG&f=1", "display_name": "Anand Barnwal", "link": "https://stackoverflow.com/users/2994173/anand-barnwal"}, "reply_to_user": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1509562986, "post_id": 47061774, "comment_id": 81071669, "body": "gcc - 4.2.1 @dbush"}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1509563838, "post_id": 47061774, "comment_id": 81072113, "body": "I found this mailing list exchange in regard to <code>-Wshift-negative-value</code> to be a little enlightening as to what goes into the thought behind the warning: <a href=\"https://gcc.gnu.org/ml/gcc-patches/2015-04/msg01529.html\" rel=\"nofollow noreferrer\">gcc.gnu.org/ml/gcc-patches/2015-04/msg01529.html</a>"}], "answers": [{"tags": [], "owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "is_accepted": true, "score": 3, "last_activity_date": 1509564101, "creation_date": 1509564101, "answer_id": 47062182, "question_id": 47061774, "link": "https://stackoverflow.com/questions/47061774/why-shifting-a-negative-value-with-literal-is-giving-wshift-negative-value-wa/47062182#47062182", "title": "Why shifting a negative value with literal is giving [-Wshift-negative-value] warning", "body": "<p>Under C89, ones'-complement and sign-magnitude implementations were required to process left shifts of negative values in ways that may not have been the most logical on those platforms.  For example, on a ones'-complement platform, C89 defined -1&lt;&lt;1 as -3.  The authors of the Standard decided to correct this problem by allowing compiler writers to handle left shifts of negative numbers in any way they saw fit.  The fact that they allowed that flexibility to all implementations including two's-complement ones shouldn't be taken to imply that they intended that two's-complement implementations to deviate from the C89 behavior.  Much more likely, they intended and expected that the sensible behavior on two's-complement platforms would be sufficiently obvious that compiler writers would figure it out with or without a mandate.</p>\n\n<p>Compilers often squawk about left-shifting negative constants by other constants because <code>x&lt;&lt;y</code> can be simplified when both <code>x</code> and <code>y</code> are constants, but such simplification would require performing the shift at compile time <em>whether or not the code containing the shift is executed</em>.  By contrast, given <code>someConstant &lt;&lt; nonConstant</code>, no simplification would usually be possible and thus the compiler would simply generate code that does the shift at run-time.</p>\n"}], "owner": {"reputation": 283, "user_id": 2994173, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3dbf18648bc9e60db5d7e3eb9447b518?s=128&d=identicon&r=PG&f=1", "display_name": "Anand Barnwal", "link": "https://stackoverflow.com/users/2994173/anand-barnwal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1501, "favorite_count": 0, "accepted_answer_id": 47062182, "answer_count": 1, "score": 7, "last_activity_date": 1509564101, "creation_date": 1509562486, "question_id": 47061774, "link": "https://stackoverflow.com/questions/47061774/why-shifting-a-negative-value-with-literal-is-giving-wshift-negative-value-wa", "title": "Why shifting a negative value with literal is giving [-Wshift-negative-value] warning", "body": "<p>I am doing a bitwise left shift operation on negative number.</p>\n\n<pre><code>int main(void) {\n    int count = 2;\n    printf(\"%d\\n\", ~0&lt;&lt;count);\n    printf(\"%d\\n\", ~0&lt;&lt;2); // warning:shifting a negative signed value is undefined [-Wshift-negative-value]\n    return 0;\n}\n</code></pre>\n\n<p>My doubt is why the warning is coming on compiling above code when integer literal is used in shifting and not when variable is used.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 1718, "user_id": 1729458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f0b52fd8b25825ec60c94e78f129a87?s=128&d=identicon&r=PG", "display_name": "Strikegently", "link": "https://stackoverflow.com/users/1729458/strikegently"}, "edited": false, "score": 0, "creation_date": 1509562329, "post_id": 47061700, "comment_id": 81071335, "body": "Can&#39;t help if you don&#39;t post code."}, {"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 1, "creation_date": 1509562370, "post_id": 47061700, "comment_id": 81071354, "body": "&quot;but I stop in point which I don&#39;t know how I can type a code to decide if the game is drawn or not..&quot; <code>#define MyGameLooksBoss #ifdef MyGameLooksBoss draw(); #endif</code>."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1509562468, "post_id": 47061700, "comment_id": 81071395, "body": "Do you really think this question can be seriously taken?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1509562568, "post_id": 47061700, "comment_id": 81071449, "body": "Have you written the code to test if either player has won? I presume you test that every time a move is made, and end the game if a line of three is formed. If there wasn&#39;t a line of three formed, and the board is full: that is a draw."}, {"owner": {"reputation": 9095, "user_id": 8542346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11b206b49cec657d28a5876f8330780e?s=128&d=identicon&r=PG&f=1", "display_name": "H.S.", "link": "https://stackoverflow.com/users/8542346/h-s"}, "edited": false, "score": 0, "creation_date": 1509562682, "post_id": 47061700, "comment_id": 81071517, "body": "Please show us the code you have written than only we can help you out."}, {"owner": {"reputation": 1, "user_id": 8864814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d507ed70fd6b6db04de98dbcf57080f?s=128&d=identicon&r=PG&f=1", "display_name": "Chemist", "link": "https://stackoverflow.com/users/8864814/chemist"}, "edited": false, "score": 0, "creation_date": 1509563039, "post_id": 47061700, "comment_id": 81071699, "body": "i wrote my code"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1509564681, "post_id": 47061700, "comment_id": 81072575, "body": "Deciding a draw is not the only problem. When a player wins, the winning move is not shown, and it always says player 2 has won (even if it was player 1)."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 1, "creation_date": 1509692239, "post_id": 47061700, "comment_id": 81129313, "body": "Welcome to Stack Overflow Where Developers Learn, Share, &amp; Build Careers! Please do not vandalize your posts.  By posting on the Stack Exchange network, you&#39;ve granted a non-revocable right for SE to distribute that content (under the <a href=\"https://creativecommons.org/licenses/by-sa/3.0/\" rel=\"nofollow noreferrer\">CC BY-SA 3.0 license</a>).  By SE policy, any vandalism will be reverted.  If you would like to disassociate this post from your account, see <a href=\"https://meta.stackoverflow.com/q/323395\">What is the proper route for a disassociation request?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1196, "user_id": 5220257, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/526725060808494/picture?type=large", "display_name": "Asim", "link": "https://stackoverflow.com/users/5220257/asim"}, "is_accepted": false, "score": 0, "last_activity_date": 1509562452, "creation_date": 1509562452, "answer_id": 47061768, "question_id": 47061700, "link": "https://stackoverflow.com/questions/47061700/about-tic-toc-toe-game-in-c-language/47061768#47061768", "title": "About Tic-Toc-Toe Game in C language", "body": "<p>Set a boolean variable \"draw\" as false and if no player wins and all 9 moves are done and no free block is available set the \"draw\" as true. And calculate the result based on \"draw\" that either the game is a draw or not. </p>\n"}, {"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1509570816, "post_id": 47063489, "comment_id": 81075694, "body": "@Chemist exercise 2: predict a draw before the board is full ;)"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1509570963, "post_id": 47063489, "comment_id": 81075753, "body": "You&#39;ll have to do that in the <code>check()</code> function. If every row, column, and diagonal has two different player numbers, no one can in. You can return <code>d</code> in that case, and change to <code>if(done == &#39; &#39; || done == &#39;d&#39;)</code>"}, {"owner": {"reputation": 1, "user_id": 8864814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d507ed70fd6b6db04de98dbcf57080f?s=128&d=identicon&r=PG&f=1", "display_name": "Chemist", "link": "https://stackoverflow.com/users/8864814/chemist"}, "edited": false, "score": 0, "creation_date": 1509571234, "post_id": 47063489, "comment_id": 81075881, "body": "Thanks Mr.Barmar ,, can i convert my code  using ( if statments for and while ) insted of function and how ?? thank you @Barmar"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1509571325, "post_id": 47063489, "comment_id": 81075909, "body": "If you want to use the same code in multiple places, it&#39;s best to use functions. The code for <code>check</code> is best kept in a function."}, {"owner": {"reputation": 1, "user_id": 8864814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d507ed70fd6b6db04de98dbcf57080f?s=128&d=identicon&r=PG&f=1", "display_name": "Chemist", "link": "https://stackoverflow.com/users/8864814/chemist"}, "edited": false, "score": 0, "creation_date": 1509571463, "post_id": 47063489, "comment_id": 81075969, "body": "Oh Thanks, But it&#39;s possible to conver it ? @Barmar"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1509571683, "post_id": 47063489, "comment_id": 81076071, "body": "Anything is possible, it just makes the program more complicated."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 1, "user_id": 8864814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d507ed70fd6b6db04de98dbcf57080f?s=128&d=identicon&r=PG&f=1", "display_name": "Chemist", "link": "https://stackoverflow.com/users/8864814/chemist"}, "edited": false, "score": 0, "creation_date": 1509721004, "post_id": 47063489, "comment_id": 81147014, "body": "@Chemist Why did you try to edit my answer into just a bunch of &quot;CLOSED&quot;?"}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 1, "last_activity_date": 1509569572, "creation_date": 1509569572, "answer_id": 47063489, "question_id": 47061700, "link": "https://stackoverflow.com/questions/47061700/about-tic-toc-toe-game-in-c-language/47063489#47063489", "title": "About Tic-Toc-Toe Game in C language", "body": "<p><code>if(done=='X')</code> should be <code>if(done == '1')</code> because <code>matrix</code> contains <code>1</code> and <code>2</code>, not <code>X</code> and <code>O</code>.</p>\n\n<p>To tell if the game is a draw, keep a count of the number of moves, and break out of the loop when it reaches 9. You only have to check this after player 1 moves, because player 2 always moves on even numbers.</p>\n\n<p>There's no need to use <code>do{...} while (done == ' ')</code> because the code always breaks out of the loop when <code>done != ' '</code>. So just use <code>while(1)</code> to make an infinite loop.</p>\n\n<pre><code>int count = 0;\nwhile (1) {\n    get_player1_move();\n    done = check(); /* if winner or not */\n    disp_matrix();\n    if(done!= ' ' || ++count == 9) break; /* winner or draw */\n    get_player2_move(); \n    disp_matrix();\n    done = check(); /* if winner or not */\n    if(done!= ' ') break; /* winner!*/\n    ++count;\n\n}\nif (done == ' ') {\n    printf(\"It's a draw!\\n\");\n} else {\n    printf(\"Player %c won the game!!\\n\", done);\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8864814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d507ed70fd6b6db04de98dbcf57080f?s=128&d=identicon&r=PG&f=1", "display_name": "Chemist", "link": "https://stackoverflow.com/users/8864814/chemist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "answer_count": 2, "score": -5, "last_activity_date": 1509913887, "creation_date": 1509562197, "last_edit_date": 1509913887, "question_id": 47061700, "link": "https://stackoverflow.com/questions/47061700/about-tic-toc-toe-game-in-c-language", "title": "About Tic-Toc-Toe Game in C language", "body": "<p>I wrote a full code for this game using <strong>do and while in C language</strong> .. but I stop in point which I don't know how I can type a code to decide if the game is drawn or not..</p>\n\n<p>Thanks</p>\n\n<p>This is my code</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nchar matrix[3][3]; \nchar check(void);\nvoid init_matrix(void);\nvoid get_player1_move(void);\nvoid get_player2_move(void);\nvoid disp_matrix(void);\n\nint main(void)\n{\n  char done,choise;\n\n  printf(\"Welcome to the tic-tac-toe game!!!\\n\\n\");\n  printf(\"Rule for playing the game is:\\n\\n\");\n  printf(\"Each player must put the value of raw and column like: 1 2 to put his symbol in\\nthe tic-tac-toe board.\\n\\n\");\n  printf(\"The tic-tac-toe board looks like as follows:\\n\\n\");\n  init_matrix();\n      disp_matrix();\n    printf(\"Are you ready to start the game?   \");\n    scanf(\" %c\",&amp;choise);\n    if (choise == 'y'){\n\n  do {\n\n    get_player1_move();\n    done = check(); /* if winner or not */\n    if(done!= ' ') break; /* winner!*/\n    disp_matrix();\n    get_player2_move(); \n    disp_matrix();\n    done = check(); /* if winner or not */\n    if(done!= ' ') break; /* winner!*/\n\n  } while(done== ' ');\n\n     if(done=='X') printf(\"Player 1 won the game!!!!!\\n\");\n     else printf(\"Player 2 won the game!!!!!\\n\");\n    }\n\n    else {\n    printf(\"\\n\\nThank you!!!\\n\\n\");\n    printf(\"We hope you will play the game anther time....\");\n    }\n  return 0;\n}\n\n/****************************************************/\nvoid init_matrix(void)\n{\n  int i, j;\n\n  for(i=0; i&lt;3; i++)\n    for(j=0; j&lt;3; j++) matrix[i][j] =  ' ';\n}\n\n/****************************************************/\nvoid get_player1_move(void)\n{\n  int x, y;\n\n  printf(\"Enter row and column input for player 1: \");\n  scanf(\"%d%*c%d\", &amp;x, &amp;y);\n\n  x--; y--;\n\n  if(matrix[x][y]!= ' '){\n    printf(\"You can not choose this row and clumn!! Try again\\n\");\n    get_player1_move();\n  }\n  else matrix[x][y] = '1';\n}\n\n/****************************************************/\nvoid get_player2_move(void)\n{\n  int x, y;\n\n  printf(\"Enter row and column input for player 2:  \");\n  scanf(\"%d%*c%d\", &amp;x, &amp;y);\n\n  x--; y--;\n\n  if(matrix[x][y]!= ' '){\n    printf(\"You can not choose this row and clumn!! Try again\\n\");\n    get_player2_move();\n  }\n  else matrix[x][y] = '2';\n}\n\n/****************************************************/\nvoid disp_matrix(void)\n{\n  int t;\n\n  for(t=0; t&lt;3; t++) {\n    printf(\"                         :    :  \");\n    printf(\"\\n                       %c :  %c : %c\",matrix[t][0],matrix[t][1], matrix [t][2]);\n    if(t!=2) printf(\"\\n                     ----:----:----\\n\");\n  }\n  printf(\"\\n\\n\");\n}\n\n/****************************************************/\n\nchar check(void)\n{\n  int i;\n\n  for(i=0; i&lt;3; i++)  /* check rows */\n    if(matrix[i][0]==matrix[i][1] &amp;&amp; matrix[i][0]==matrix[i][2])\n     return matrix[i][0];\n\n  for(i=0; i&lt;3; i++)  /* check columns */\n    if(matrix[0][i]==matrix[1][i] &amp;&amp; matrix[0][i]==matrix[2][i])\n     return matrix[0][i];\n\n  /* test diagonals */\n  if(matrix[0][0]==matrix[1][1] &amp;&amp; matrix[1][1]==matrix[2][2])\n     return matrix[0][0];\n\n  if(matrix[0][2]==matrix[1][1] &amp;&amp; matrix[1][1]==matrix[2][0])\n     return matrix[0][2];\n\n  return ' ';\n}\n</code></pre>\n"}, {"tags": ["python", "c", "opencv", "raspberry-pi", "cython"], "comments": [{"owner": {"reputation": 5482, "user_id": 2286337, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/A8dkr.jpg?s=128&g=1", "display_name": "zindarod", "link": "https://stackoverflow.com/users/2286337/zindarod"}, "edited": false, "score": 1, "creation_date": 1509562733, "post_id": 47061578, "comment_id": 81071544, "body": "Add the OpenCV directory to <code>PATH</code> and <code>LD_LIBRARY_PATH</code> environment variables."}, {"owner": {"reputation": 373, "user_id": 8014623, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8c549808e163e1181894193e9678629b?s=128&d=identicon&r=PG&f=1", "display_name": "noureddine-as", "link": "https://stackoverflow.com/users/8014623/noureddine-as"}, "reply_to_user": {"reputation": 5482, "user_id": 2286337, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/A8dkr.jpg?s=128&g=1", "display_name": "zindarod", "link": "https://stackoverflow.com/users/2286337/zindarod"}, "edited": false, "score": 0, "creation_date": 1510049985, "post_id": 47061578, "comment_id": 81260121, "body": "@zindarod What directory should I add exactly? I added the dist-packages directory : <code>&#47;home&#47;pi&#47;.virtualenvs&#47;cv&#47;local&#47;lib&#47;python2.7&#47;site-packages</code> where the cv2.so  is installed to both variablesbut it&#39;s still doesn&#39;t work !"}], "answers": [{"comments": [{"owner": {"reputation": 373, "user_id": 8014623, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8c549808e163e1181894193e9678629b?s=128&d=identicon&r=PG&f=1", "display_name": "noureddine-as", "link": "https://stackoverflow.com/users/8014623/noureddine-as"}, "edited": false, "score": 0, "creation_date": 1510050083, "post_id": 47073858, "comment_id": 81260203, "body": "I verified the variables contain already that. The problems is that the executable doesn&#39;t detected the cv2 (says:  <code>ImportError: No module named cv2</code> Even when I launch the executable from within the virtual environment! But when I launch a normal python script it works normally!"}, {"owner": {"reputation": 4536, "user_id": 4165324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8d50177f8e05b2c515b26455ba250ce?s=128&d=identicon&r=PG&f=1", "display_name": "danny", "link": "https://stackoverflow.com/users/4165324/danny"}, "reply_to_user": {"reputation": 373, "user_id": 8014623, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8c549808e163e1181894193e9678629b?s=128&d=identicon&r=PG&f=1", "display_name": "noureddine-as", "link": "https://stackoverflow.com/users/8014623/noureddine-as"}, "edited": false, "score": 0, "creation_date": 1510310267, "post_id": 47073858, "comment_id": 81391162, "body": "If cv2 does not work in the virtualenv then how do you expect enabling virtualenv to make a difference? Fix the installation in the virtualenv then it will work."}, {"owner": {"reputation": 373, "user_id": 8014623, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8c549808e163e1181894193e9678629b?s=128&d=identicon&r=PG&f=1", "display_name": "noureddine-as", "link": "https://stackoverflow.com/users/8014623/noureddine-as"}, "edited": false, "score": 0, "creation_date": 1510401390, "post_id": 47073858, "comment_id": 81425283, "body": "I said that CV2 works great when I run the Python script in the virtualenv, the problem appears when i run the executable, when i run it it gives me that error even if i run it inside the virtualenv u see what i mean?"}], "tags": [], "owner": {"reputation": 4536, "user_id": 4165324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8d50177f8e05b2c515b26455ba250ce?s=128&d=identicon&r=PG&f=1", "display_name": "danny", "link": "https://stackoverflow.com/users/4165324/danny"}, "is_accepted": false, "score": 1, "last_activity_date": 1509621001, "creation_date": 1509621001, "answer_id": 47073858, "question_id": 47061578, "link": "https://stackoverflow.com/questions/47061578/gcc-doesnt-compile-with-libraries-installed-to-a-virtual-environment/47073858#47073858", "title": "GCC doesn&#39;t compile with libraries installed to a virtual environment", "body": "<p>To activate the virtualenv for all processes the following environment variables need to be set.</p>\n\n<pre><code>VIRTUAL_ENV=&lt;absolute path of virtual env directory&gt;\nPATH=&lt;virtual env dir&gt;/bin:$PATH\n</code></pre>\n\n<p>You can set these on boot in the usual places (<code>/etc/profile</code> et al) to make all processes use the virtual env by default.</p>\n"}], "owner": {"reputation": 373, "user_id": 8014623, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8c549808e163e1181894193e9678629b?s=128&d=identicon&r=PG&f=1", "display_name": "noureddine-as", "link": "https://stackoverflow.com/users/8014623/noureddine-as"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 814, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1509621001, "creation_date": 1509561699, "question_id": 47061578, "link": "https://stackoverflow.com/questions/47061578/gcc-doesnt-compile-with-libraries-installed-to-a-virtual-environment", "title": "GCC doesn&#39;t compile with libraries installed to a virtual environment", "body": "<p>I have a problem with compiling using GCC toolchain. I'm working on facial detection program using OpenCV destined to work later in an Embedded Linux platform such as Raspberry PI3, this is how I proceed:</p>\n\n<p><strong><em>First, on a PC running Ubuntu:</em></strong></p>\n\n<p>In this machine I installed OpenCV 2.4 with <strong>NO</strong> virtual environnment.</p>\n\n<p>I developed the software in Python 2.7, using OpenCV library and other libraries such as NumPy and others. Now to optimize my code I use Cython to convert the .py files to .c then I compile and link the resulted .c files into a unique executable file. The executable works fine and passes all the tests, I also gain in performance (quick response).</p>\n\n<p><strong><em>Second, on Raspberry PI 3 the problem occurs</em></strong></p>\n\n<p>Here I have installed OpenCV 3.1.0 IN A VIRTUAL ENVIRONMENT called (cv) with Python 2.7.</p>\n\n<p>Then I try to port the code source to Raspberry PI after some tweaking and some minor modifications i get my Python files .py working and the software works fine. Now the problem is that when I procedd with the same method to compile the .C files generated using Cython, the compilation fails, I guess because of the fact that OpenCV was installed only in the virtual environment, so I gave GCC a link to the path of the VirtualEnv folder where OpenCV is installed and the compilation passes. But the executable still gives me an error saying that Import cv2 fails to find the cv2 package even if all thses steps are done with the (cv) virtual environment activated.</p>\n\n<p>Now I have to questions:\n- Is there any method to generalize what has been installed in a virtual environment, I mean for example in my case, that i need OpenCV to be callable from anywhere in the Raspberry without logging to the virtual environment?\n- Are executables aware of the fact that they are launched on a virtual environment? I mean if they need a package that is only installed in a virtual env, how could I make them know that ?</p>\n\n<p><strong>NB</strong> I based my methods on these two articles:</p>\n\n<ul>\n<li><a href=\"https://www.pyimagesearch.com/2016/04/18/install-guide-raspberry-pi-3-raspbian-jessie-opencv-3/\" rel=\"nofollow noreferrer\">Install guide: Raspberry Pi 3 + Raspbian Jessie + OpenCV 3</a>   </li>\n<li><a href=\"https://www.pyimagesearch.com/2017/08/28/fast-optimized-for-pixel-loops-with-opencv-and-python/\" rel=\"nofollow noreferrer\">Fast, optimized \u2018for\u2019 pixel loops with OpenCV and Python</a></li>\n</ul>\n"}, {"tags": ["c", "arrays", "sorting"], "comments": [{"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 3, "creation_date": 1509560380, "post_id": 47061242, "comment_id": 81070277, "body": "<code>sizeof(x)</code> does not return the size of the array but of a pointer. And would it be the size then it should be minus 1 because you index with <code>i + 1</code>"}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 1, "creation_date": 1509560383, "post_id": 47061242, "comment_id": 81070281, "body": "What&#39;s the type of <code>x</code>? <code>sizeof(x)</code> is definitely wrong, but wrong in different ways depending on whether <code>x</code> is an array or pointer."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1509560415, "post_id": 47061242, "comment_id": 81070300, "body": "&#39;sizeof(x)&#39; what does that mean?"}, {"owner": {"reputation": 1, "user_id": 8864943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf8ba804ebeca1e9f1c000abc6f54f1a?s=128&d=identicon&r=PG&f=1", "display_name": "Shane", "link": "https://stackoverflow.com/users/8864943/shane"}, "reply_to_user": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1509560436, "post_id": 47061242, "comment_id": 81070318, "body": "@interjay It is <code>char **x</code> type"}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 1, "creation_date": 1509560505, "post_id": 47061242, "comment_id": 81070355, "body": "Then you need to use the actual size (stored in another variable) instead. By the way, this code is not an insertion sort."}], "answers": [{"tags": [], "owner": {"reputation": 2592, "user_id": 2963819, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bcc08ce2a4490cf3496020812fe10ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Ishay Peled", "link": "https://stackoverflow.com/users/2963819/ishay-peled"}, "is_accepted": true, "score": 0, "last_activity_date": 1509561048, "creation_date": 1509561048, "answer_id": 47061433, "question_id": 47061242, "link": "https://stackoverflow.com/questions/47061242/segmentation-fault-when-alphabetically-sorting-an-array-of-pointers-to-chars-in/47061433#47061433", "title": "Segmentation fault when alphabetically sorting an array of pointers to chars in C", "body": "<p>This will not work without knowing the size of the array. When you call sizeof(x) you are in fact returning sizeof(char**) which is 8 on most 64 bit systems and NOT the number of elements in the array.</p>\n\n<p>You need to know the number of elements in the array and than modify you code to do this:</p>\n\n<pre><code>int x_length = &lt;number of elements in x&gt;\nchar **x\nfor (i = 0; i &lt; x_length; i++) {\n    if (strcmp(x[i], x[i + 1]) &gt; 0) {\n       char *temp = x[i];\n       x[i] = x[i + 1];\n       x[i + 1] = temp;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8864943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf8ba804ebeca1e9f1c000abc6f54f1a?s=128&d=identicon&r=PG&f=1", "display_name": "Shane", "link": "https://stackoverflow.com/users/8864943/shane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 47061433, "answer_count": 1, "score": -1, "last_activity_date": 1509561048, "creation_date": 1509560190, "last_edit_date": 1509560765, "question_id": 47061242, "link": "https://stackoverflow.com/questions/47061242/segmentation-fault-when-alphabetically-sorting-an-array-of-pointers-to-chars-in", "title": "Segmentation fault when alphabetically sorting an array of pointers to chars in C", "body": "<p>Say I want to lexicographically sort an array, <code>**x</code>, and I'm attempting to use an sort:</p>\n\n<pre><code>char **x\n    for (i = 0; i &lt; sizeof(x); i++) {\n        if (strcmp(x[i], x[i + 1]) &gt; 0) {\n           char *temp = x[i];\n           x[i] = x[i + 1];\n           x[i + 1] = temp;\n        }\n    }\n</code></pre>\n\n<p>Of course, I'm also looping through it too. Each time I attempt to sort, however, I get a segmentation fault. It prints fine when I don't sort it. What could be causing the sort to fail?</p>\n"}, {"tags": ["c", "opengl", "glfw"], "comments": [{"owner": {"reputation": 473, "user_id": 6405712, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/66716761277120457b31513170f94749?s=128&d=identicon&r=PG&f=1", "display_name": "user308485", "link": "https://stackoverflow.com/users/6405712/user308485"}, "reply_to_user": {"reputation": 138000, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 0, "creation_date": 1509558689, "post_id": 47060718, "comment_id": 81069275, "body": "Just tried it, doesn&#39;t work unfortunately."}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 0, "creation_date": 1509561327, "post_id": 47060718, "comment_id": 81070812, "body": "How are you getting the values for <code>windowWidth</code> and <code>windowHeight</code>?"}, {"owner": {"reputation": 473, "user_id": 6405712, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/66716761277120457b31513170f94749?s=128&d=identicon&r=PG&f=1", "display_name": "user308485", "link": "https://stackoverflow.com/users/6405712/user308485"}, "edited": false, "score": 0, "creation_date": 1509561540, "post_id": 47060718, "comment_id": 81070909, "body": "They are the same values as my window. I use them to create the window as well."}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 0, "creation_date": 1509561617, "post_id": 47060718, "comment_id": 81070959, "body": "@user308485 &quot;<i>How are you getting the values</i>&quot; means &quot;Show us the code.&quot;"}, {"owner": {"reputation": 473, "user_id": 6405712, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/66716761277120457b31513170f94749?s=128&d=identicon&r=PG&f=1", "display_name": "user308485", "link": "https://stackoverflow.com/users/6405712/user308485"}, "edited": false, "score": 0, "creation_date": 1509561683, "post_id": 47060718, "comment_id": 81070996, "body": "int windowWidth = 1024; int windowHeight = 768;"}, {"owner": {"reputation": 473, "user_id": 6405712, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/66716761277120457b31513170f94749?s=128&d=identicon&r=PG&f=1", "display_name": "user308485", "link": "https://stackoverflow.com/users/6405712/user308485"}, "edited": false, "score": 0, "creation_date": 1509561700, "post_id": 47060718, "comment_id": 81071008, "body": "window = glfwCreateWindow(1024, 768, &quot; Dragon!&quot;, NULL, NULL);"}, {"owner": {"reputation": 38487, "user_id": 2327517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Bulc.jpg?s=128&g=1", "display_name": "derhass", "link": "https://stackoverflow.com/users/2327517/derhass"}, "edited": false, "score": 2, "creation_date": 1509564020, "post_id": 47060718, "comment_id": 81072204, "body": "You are passing that <i>address</i> of the pointer, <b>not</b> the address of the memory  where your buffer starts. You really should start by properly learning the programming language you are using, before going to advanced topics like OpenGL."}], "answers": [{"tags": [], "owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "is_accepted": true, "score": 4, "last_activity_date": 1509566682, "creation_date": 1509566682, "answer_id": 47062810, "question_id": 47060718, "link": "https://stackoverflow.com/questions/47060718/glreadpixels-causing-crash/47062810#47062810", "title": "glReadPixels causing crash", "body": "<p>As opined by Derhass, you need to pass the pointer, not the address of the pointer.</p>\n\n<p>This code will (technically) work:</p>\n\n<pre><code>image = (GLuint*)malloc(windowWidth * windowHeight * sizeof(GLuint)); //Need to make it large enough!\nglReadPixels(0, 0, windowWidth, windowHeight, GL_DEPTH_COMPONENT, GL_UNSIGNED_INT, image); //Note we're not taking the address of image\nfree(image);\n</code></pre>\n\n<p>The following code will be much safer, and is all-around better code (assuming you're using C++, which your call to <code>vertices.size()</code> seems to imply):</p>\n\n<pre><code>std::vector&lt;GLuint&gt; image(windowWidth * windowHeight);\nglReadPixels(0, 0, windowWidth, windowHeight, GL_DEPTH_COMPONENT, GL_UNSIGNED_INT, image.data());\n</code></pre>\n\n<p>One more consideration: <code>glfwCreateWindow(windowWidth, windowHeight, \"Dragon!\", nullptr, nullptr);</code> creates a <em>window</em> sized according to the provided width and height, but the actual size of the <em>Framebuffer</em> (the portion of the window where rendering actually takes place) may differ (usually by being smaller), especially if the window is resizable by the user. You should be querying for the size of the <em>Framebuffer</em> before you try to size things:</p>\n\n<pre><code>do {\n    glfwPollEvents();\n    int fbwidth, fbheight;\n    glfwGetFramebufferSize(window, &amp;fbwidth, &amp;fbheight);\n    //use fbwidth and fbheight in all code that needs the size of the rendered image\n    /*...*/\nwhile(/*...*/);\n</code></pre>\n"}], "owner": {"reputation": 473, "user_id": 6405712, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/66716761277120457b31513170f94749?s=128&d=identicon&r=PG&f=1", "display_name": "user308485", "link": "https://stackoverflow.com/users/6405712/user308485"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 706, "favorite_count": 0, "accepted_answer_id": 47062810, "answer_count": 1, "score": 1, "last_activity_date": 1509568496, "creation_date": 1509558122, "last_edit_date": 1509568496, "question_id": 47060718, "link": "https://stackoverflow.com/questions/47060718/glreadpixels-causing-crash", "title": "glReadPixels causing crash", "body": "<p>I have a 3d scene which I can render on my display. However, in addition to rendering it to display, I would like to also be able to export the rendered scene, say once every 100 frames, as a image (say a JPG or PNG image), maybe saving it as a file somewhere on my machine.</p>\n\n<pre><code>do{\n    glfwPollEvents();\n    glBindFramebuffer(GL_FRAMEBUFFER, framebuffername);\n    drawScene();\n    glDrawArrays(GL_TRIANGLES, 0, (GLsizei)vertices.size());\n    glFramebufferTexture2D(GL_FRAMEBUFFER, GL_DEPTH_ATTACHMENT, GL_TEXTURE_2D, depthTexture, 0);\n    image = (GLuint*)malloc(windowWidth * windowHeight);\n    glReadPixels(0, 0, windowWidth, windowHeight, GL_DEPTH_COMPONENT, GL_UNSIGNED_INT, &amp;image);\n    free(image);\n    glBindFramebuffer(GL_FRAMEBUFFER, 0);\n    drawScene();\n    glfwSwapBuffers(window);\n} // Check if the ESC key was pressed or the window was closed\nwhile( glfwGetKey(window, GLFW_KEY_ESCAPE ) != GLFW_PRESS &amp;&amp;\n       glfwWindowShouldClose(window) == 0 );\n</code></pre>\n\n<p>What I am trying to do is render my scene both to the display and also to the framebuffer object I have defined. The above crashes and gives me a weird Visual Studio error: \"ig75icd64.pdb not loaded\". But if I comment out this line: </p>\n\n<pre><code>glReadPixels(0, 0, windowWidth, windowHeight, GL_DEPTH_COMPONENT, GL_UNSIGNED_INT, &amp;image);\n</code></pre>\n\n<p>Then the program does not crash, and it correctly renders to the display (but I want to be able to use glReadPixels to write to a 2d texture). My ultimate goal is to be able to export the display as a formatted image to later do image processing.</p>\n\n<p>Suggestions?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 1, "creation_date": 1509558825, "post_id": 47060624, "comment_id": 81069345, "body": "<code>while(fin != EOF)</code> is totally wrong"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1509558936, "post_id": 47060624, "comment_id": 81069409, "body": "&quot;I am trying to use strtok&quot; --&gt; This is unclear.  Code does not have <code>strtok()</code>.  Post the  <code>strtok()</code> code attempt."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1509558998, "post_id": 47060624, "comment_id": 81069446, "body": "<code>else           fgets(arr, SIZE, fin);          while(fin != EOF) { ...</code> --&gt; <code>else  { while (fgets(arr, SIZE, fin)) { ...</code>"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 8867851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ce9b0fb518d540b28cfcd3b0bedbbfe?s=128&d=identicon&r=PG&f=1", "display_name": "Ronaldo7", "link": "https://stackoverflow.com/users/8867851/ronaldo7"}, "edited": false, "score": 0, "creation_date": 1509560680, "post_id": 47061203, "comment_id": 81070476, "body": "thanks for the answer, It helps a lot. sorry if my code is a horrible read, I  am just starting to learn C language."}], "tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": true, "score": 0, "last_activity_date": 1509560813, "last_edit_date": 1509560813, "creation_date": 1509560029, "answer_id": 47061203, "question_id": 47060624, "link": "https://stackoverflow.com/questions/47060624/how-to-dynamically-allocate-memory-to-my-file-stream/47061203#47061203", "title": "how to dynamically allocate memory to my file stream?", "body": "<p>Just  concentrating on your memory question and ignoring all other errors in your code:</p>\n\n<pre><code>sample* arr[SIZE] = {NULL};\n</code></pre>\n\n<p>So you have an array of pointes to <code>sample</code>s. The following statement will not compile because <code>sample</code> is not a variable, however, you are close:</p>\n\n<pre><code>sample = (sample*)malloc(sizeof(sample);\n</code></pre>\n\n<p>All you need is a buffer to read the line and a variable to keep track of where you are in the array:</p>\n\n<pre><code>     int i= 0;\n     char linebuf[1024];\n     while (fgets(linebuf, 1024, fin) &amp;&amp; i&lt;SIZE) {\n         arr[i]= malloc(sizeof(sample));\n         // now parse the linebuf and fill arr[i] with it\n         i++;\n    }\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 8867851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ce9b0fb518d540b28cfcd3b0bedbbfe?s=128&d=identicon&r=PG&f=1", "display_name": "Ronaldo7", "link": "https://stackoverflow.com/users/8867851/ronaldo7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 947, "favorite_count": 0, "accepted_answer_id": 47061203, "answer_count": 1, "score": 0, "last_activity_date": 1509560813, "creation_date": 1509557830, "last_edit_date": 1509558406, "question_id": 47060624, "link": "https://stackoverflow.com/questions/47060624/how-to-dynamically-allocate-memory-to-my-file-stream", "title": "how to dynamically allocate memory to my file stream?", "body": "<p>I have an assignment in CS class with the description as follows but I am having a hard time to dynamically allocating memory, please help me, I have to submit my code today. </p>\n\n<p>I have a structure as follows: </p>\n\n<pre><code>typedef struct sample{\n char* name;\n int list_len;\n float* value_list;\n}sample;\n</code></pre>\n\n<p>I need to dynamically allocate memory while reading the file. </p>\n\n<p>Read a file (created in a text editor \u2013 pico) of delimited Sample data records into an array of pointers to your sample structs. Note: you may use a statically sized array of size 1024, however, each element of the array must be a pointer to a sample struct (as defined above). Initially, each element of the array must be set to NULL (to indicated that it is not used), and then later to a dynamically allocated sample struct if it is to be used.</p>\n\n<p>Note: after dynamically allocating memory for a sample struct, you have enough memory for each/every component of the structure. However, for each component of that structure that is a pointer, I will eventually need to allocate memory for the \u201cthing\u201d that it points to as well (think string via char*, array via float*). You will also have to remember this when freeing memory via a pointer to a sample struct.</p>\n\n<p>I have this so far and I am trying to use strtok to parse through the list. </p>\n\n<pre><code>void readfile(){\n     int SIZE = 1024;\n     sample* arr[SIZE] = {NULL};\n     FILE* fin;\n     sample* sample;     \n     fin = fopen(\"sample.txt\", \"r\");\n     if (fin == NULL) {\n         printf(\"sample.txt could not be opened\"\\n\");\n         exit(1);\n     }\n     else \n         fgets(arr, SIZE, fin);\n         while(fin != EOF){\n          sample = (sample*)malloc(sizeof(sample);\n        }\n\n\n }\n</code></pre>\n"}, {"tags": ["c", "gcc", "linker", "curses"], "comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 3, "creation_date": 1509556980, "post_id": 47060311, "comment_id": 81068288, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/1513417/why-is-curses-on-linux-giving-me-following-error\">Why is curses on linux giving me following error?</a>"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1509559089, "post_id": 47060311, "comment_id": 81069504, "body": "I believe it is not a duplicate. However the question lacks indeed of research efforts."}], "answers": [{"comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 1, "creation_date": 1509557366, "post_id": 47060434, "comment_id": 81068513, "body": "Why is that not a duplicate? They are clearly not linking with the library as covered by the answer in that duplicate"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 1, "creation_date": 1509557409, "post_id": 47060434, "comment_id": 81068533, "body": "Because the other answer don&#39;t mention <code>pkg-config</code> and on some distributions, notably my Debian Sid, <code>ncurses</code> depend on other libraries."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1509557738, "post_id": 47060434, "comment_id": 81068700, "body": "Find a better duplicate then, rather than trying to score some quick and easy points from a common question"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 1, "creation_date": 1509557794, "post_id": 47060434, "comment_id": 81068727, "body": "I leave you to find one. I tried quickly to find a duplicate, and failed."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1509557945, "post_id": 47060434, "comment_id": 81068821, "body": "But the one you found is not correct today in 2017 on Debian/Sid. It was correct a few years ago. <code>ncurses</code> depend now on <code>tinfo</code> and that was not the case in distributions a few years ago. Teaching newbies to use <code>pkg-config</code> when relevant is worthwhile, the other answer don&#39;t even mention it."}, {"owner": {"reputation": 123, "user_id": 6299344, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/c2ff7f527cdc05ba68a0d3277854f524?s=128&d=identicon&r=PG&f=1", "display_name": "Banish", "link": "https://stackoverflow.com/users/6299344/banish"}, "edited": false, "score": 0, "creation_date": 1509558608, "post_id": 47060434, "comment_id": 81069215, "body": "@Basile Starynkevitch: So it compiles using your advice. But when I run it I get: <code>Enter a character:  Its ASCII code is -1</code> But I do not touch the keyboard. It runs automatically. Obviously the further debugging is a problem ob my source. But the command works!"}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": true, "score": 3, "last_activity_date": 1509559788, "last_edit_date": 1509559788, "creation_date": 1509557114, "answer_id": 47060434, "question_id": 47060311, "link": "https://stackoverflow.com/questions/47060311/getting-a-char-from-keyboard-using-curses-h/47060434#47060434", "title": "getting a char from keyboard using curses.h", "body": "<p>It is a linker error (see <a href=\"https://stackoverflow.com/questions/1513417/why-is-curses-on-linux-giving-me-following-error\">this</a>, nearly a duplicate). <code>ncurses</code> is generally known to <a href=\"https://www.freedesktop.org/wiki/Software/pkg-config/\" rel=\"nofollow noreferrer\">pkg-config</a> (which gives more dependencies, when required), so try to compile with:</p>\n\n<pre><code> gcc -Wall -Wextra -g \\\n    $(pkg-config --cflags ncurses) \\\n    get_char_example.c \\\n    $(pkg-config --libs ncurses)\n</code></pre>\n\n<p><sup>You want to <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Invoking-GCC.html\" rel=\"nofollow noreferrer\">Invoke GCC</a> with all warnings and debug info; you would <a href=\"https://sourceware.org/gdb/current/onlinedocs/gdb/\" rel=\"nofollow noreferrer\">use GDB</a>, perhaps under <code>emacs</code> or with <code>ddd</code>, for debugging.</sup></p>\n\n<p>Even better, use some <a href=\"https://en.wikipedia.org/wiki/Build_automation\" rel=\"nofollow noreferrer\">build automation</a> tool (like <a href=\"https://www.gnu.org/software/make\" rel=\"nofollow noreferrer\"><code>make</code></a> or <code>ninja</code>). With <a href=\"https://www.gnu.org/software/make/manual/html_node/index.html\" rel=\"nofollow noreferrer\">GNU <code>make</code></a> take inspiration from <a href=\"https://stackoverflow.com/a/20146082/841108\">this</a> to write your  <a href=\"https://en.wikipedia.org/wiki/Makefile\" rel=\"nofollow noreferrer\"><code>Makefile</code></a> (where <kbd>tab</kbd>-s are significant).</p>\n\n<p>On my Debian Sid, <code>pkg-config --cflags ncurses</code> gives <code>-D_GNU_SOURCE -D_DEFAULT_SOURCE</code> and <code>pkg-config --libs ncurses</code> gives <code>-lncurses -ltinfo</code>, so simply linking with <code>-lncurses</code> is <em>not</em> enough (and that is why <a href=\"https://stackoverflow.com/questions/1513417/why-is-curses-on-linux-giving-me-following-error\">this</a> is not exactly a duplicate today in November 2017; a few years ago linking with simply <code>-lncurses</code> was enough, today it is not).</p>\n\n<p>Use <code>pkg-config --list-all</code> to find all the packages and libraries known to <a href=\"https://www.freedesktop.org/wiki/Software/pkg-config/\" rel=\"nofollow noreferrer\">pkg-config</a>; when developing <em>your</em> libraries consider also providing some <code>.pc</code> file for it. </p>\n\n<p>BTW, your program should start by initializing with <code>initscr</code> and use <code>printw</code>; Read <a href=\"http://www.tldp.org/HOWTO/NCURSES-Programming-HOWTO/\" rel=\"nofollow noreferrer\">Ncurses-programming-HowTo</a> even if it is a bit old.</p>\n\n<p>Notice also that using ASCII in the 21<sup>st</sup> century is obsolete. <strong>Programs</strong> and computers <strong>use <a href=\"http://utf8everywhere.org/\" rel=\"nofollow noreferrer\">UTF-8 everywhere</a></strong>, and this has profound consequences you should be aware of (since an <a href=\"https://en.wikipedia.org/wiki/UTF-8\" rel=\"nofollow noreferrer\">UTF-8</a> character can span <em>several</em> bytes). My French keyboard has keys for <code>\u00b2</code>, <code>\u00a7</code>, <code>\u20ac</code> and <code>\u00e9</code> (even with American keyboards your could paste them) and none of these are in ASCII. Consider also using some UTF-8 library like <a href=\"https://www.gnu.org/software/libunistring/manual/libunistring.html\" rel=\"nofollow noreferrer\">libunistring</a>.</p>\n"}], "owner": {"reputation": 123, "user_id": 6299344, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/c2ff7f527cdc05ba68a0d3277854f524?s=128&d=identicon&r=PG&f=1", "display_name": "Banish", "link": "https://stackoverflow.com/users/6299344/banish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 630, "favorite_count": 0, "accepted_answer_id": 47060434, "answer_count": 1, "score": 1, "last_activity_date": 1509559788, "creation_date": 1509556689, "question_id": 47060311, "link": "https://stackoverflow.com/questions/47060311/getting-a-char-from-keyboard-using-curses-h", "title": "getting a char from keyboard using curses.h", "body": "<p>I'm trying to get a character from the keyboard using curses.h.\nThis is my source (get_char_example.c):</p>\n\n<pre><code>#include &lt;curses.h&gt;\n#include &lt;stdio.h&gt;\n\nint main(void)\n{\n    char ch;\n\n    printf(\"Enter a character: \");\n    ch = getch();\n    printf(\"\\nIts ASCII code is %d\\n\", ch);\n\n    return 0;\n}\n</code></pre>\n\n<p>I use the following command to compile:</p>\n\n<pre><code>gcc get_char_example.c -o get_char_example\n</code></pre>\n\n<p>And I get the following error:</p>\n\n<p>/tmp/ccjaXwRU.o: In function `main':</p>\n\n<pre><code>get_char_example.c:(.text+0x1c): undefined reference to `stdscr'\nget_char_example.c:(.text+0x24): undefined reference to `wgetch'\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>using: gcc (GCC) 7.2.0\nArch Linux 4.13.9-1-ARCH</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["c", "visual-studio-2012"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 4, "creation_date": 1509555635, "post_id": 47059944, "comment_id": 81067432, "body": "There are no VLAs in Visual Studio. If you really need this, you can use <code>int *tab = alloca(a * sizeof(*tab)</code> instead of <code>int tab[a];</code>. Don&#39;t forget <code>#include &lt;malloc.h&gt;  </code>"}, {"owner": {"reputation": 3310, "user_id": 1853605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ab8d886abc51e874c1ed067b912ddd?s=128&d=identicon&r=PG", "display_name": "Potato", "link": "https://stackoverflow.com/users/1853605/potato"}, "edited": false, "score": 0, "creation_date": 1509556233, "post_id": 47059944, "comment_id": 81067788, "body": "VLA =&gt; Variable Length Array"}, {"owner": {"reputation": 95, "user_id": 8746042, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh4.googleusercontent.com/-AMqnV6JDOGY/AAAAAAAAAAI/AAAAAAAAAD4/xVEqJLqwRUU/photo.jpg?sz=128", "display_name": "Finer", "link": "https://stackoverflow.com/users/8746042/finer"}, "edited": false, "score": 0, "creation_date": 1509556587, "post_id": 47059944, "comment_id": 81068048, "body": "So how can i declare length of tab from keyboard? I mean by scanf_s"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1509556612, "post_id": 47059944, "comment_id": 81068066, "body": "@Finer by doing what I suggested in the first comment."}, {"owner": {"reputation": 1221, "user_id": 6610379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/869458e7097eb3f538a64ab550a0aa4b?s=128&d=identicon&r=PG&f=1", "display_name": "Phil Brubaker", "link": "https://stackoverflow.com/users/6610379/phil-brubaker"}, "edited": false, "score": 0, "creation_date": 1509558741, "post_id": 47059944, "comment_id": 81069304, "body": "@Finer There&#39;s another aspect to consider here as well: This was tagged as a &quot;C&quot; question, but depending on the C standard you&#39;re dealing with, what you&#39;re compiling successfully in Dev C++ may only be valid by virtue of extension; see <a href=\"https://stackoverflow.com/q/288441/6610379\">Variable declaration placement in C</a>.  If it&#39;s optional to compile as &quot;C&quot; (and you could just as well work in C++), you&#39;ll have some other possibilities."}, {"owner": {"reputation": 5010, "user_id": 3150445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bfca2588483eadf6695a120cbcef1f8?s=128&d=identicon&r=PG&f=1", "display_name": "jwdonahue", "link": "https://stackoverflow.com/users/3150445/jwdonahue"}, "edited": false, "score": 0, "creation_date": 1509559872, "post_id": 47059944, "comment_id": 81069977, "body": "What error did you get from VS2015?"}], "answers": [{"tags": [], "owner": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "is_accepted": false, "score": 1, "last_activity_date": 1509571114, "creation_date": 1509571114, "answer_id": 47063833, "question_id": 47059944, "link": "https://stackoverflow.com/questions/47059944/very-simple-program-compiles-in-dev-c-but-not-in-visual-studio/47063833#47063833", "title": "Very simple program compiles in Dev C++ but not in Visual Studio", "body": "<p>Variable Length Arrays (VLA) are part of the C99 Standard, but not part of the C++11/C++14 Standard so they are not implemented by the Visual C++ compiler. As a \"C\" compiler, Visual C++ is C90 conformant with the portions of the C11 Standard Library that are required by reference in C++11.</p>\n\n<blockquote>\n  <p>Note that the core of this question is already answered <a href=\"https://stackoverflow.com/questions/5246900/enabling-vlasvariable-length-arrays-in-ms-visual-c\">here</a></p>\n</blockquote>\n"}], "owner": {"reputation": 95, "user_id": 8746042, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh4.googleusercontent.com/-AMqnV6JDOGY/AAAAAAAAAAI/AAAAAAAAAD4/xVEqJLqwRUU/photo.jpg?sz=128", "display_name": "Finer", "link": "https://stackoverflow.com/users/8746042/finer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1509573545, "creation_date": 1509555509, "last_edit_date": 1509573545, "question_id": 47059944, "link": "https://stackoverflow.com/questions/47059944/very-simple-program-compiles-in-dev-c-but-not-in-visual-studio", "title": "Very simple program compiles in Dev C++ but not in Visual Studio", "body": "<p>I made this very simple program:</p>\n\n<pre><code>   int a;\n   scanf(\"%i\", &amp;a);\n   int tab[a];\n</code></pre>\n\n<p>And there there is the rest of program which works fine when I compile in DevC++. But when I use this:</p>\n\n<pre><code>   int a;\n   scanf_s(\"%i\", &amp;a);\n   int tab[a];\n</code></pre>\n\n<p>in Visual Studio 2015 there is a error. I have no idea whats wrong with that.</p>\n"}, {"tags": ["c", "arrays", "string"], "comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 4, "creation_date": 1509555318, "post_id": 47059823, "comment_id": 81067208, "body": "size your array correctly and you won&#39;t have a problem - a <code>char</code> array needs to be 1 larger than the number of characters in it so you can store the NUL terminator at the end"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1509555541, "post_id": 47059823, "comment_id": 81067363, "body": "Please stop bean-counting. Unless you are stuck with a RAM-restricted embedded system, estimate your string size, round it up to the nearest 128 boundary and double it.  Shtap messing about:)"}, {"owner": {"reputation": 3310, "user_id": 1853605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ab8d886abc51e874c1ed067b912ddd?s=128&d=identicon&r=PG", "display_name": "Potato", "link": "https://stackoverflow.com/users/1853605/potato"}, "edited": false, "score": 0, "creation_date": 1509555597, "post_id": 47059823, "comment_id": 81067401, "body": "this function load_mpn_search doesn&#39;t end with a }"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1509596889, "post_id": 47059823, "comment_id": 81083170, "body": "Because you tried to store more than 5 chars in a 5-char array"}], "answers": [{"tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": false, "score": 1, "last_activity_date": 1509555464, "creation_date": 1509555464, "answer_id": 47059928, "question_id": 47059823, "link": "https://stackoverflow.com/questions/47059823/array-of-strings-scanning-properly-then-running-together/47059928#47059928", "title": "Array of Strings scanning Properly, then Running Together", "body": "<p>That is because <code>char search_array[][5]</code> is one char too small for e.g. <code>1-2-3</code>, which is six including <code>\\0</code>. As a result, upon each <code>fscanf</code>, the terminating null character of the previous entry is overwritten. Entry 3 is less than 6 so its terminator is not overwritten.</p>\n"}, {"tags": [], "owner": {"reputation": 3310, "user_id": 1853605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ab8d886abc51e874c1ed067b912ddd?s=128&d=identicon&r=PG", "display_name": "Potato", "link": "https://stackoverflow.com/users/1853605/potato"}, "is_accepted": true, "score": 1, "last_activity_date": 1509555795, "creation_date": 1509555795, "answer_id": 47060038, "question_id": 47059823, "link": "https://stackoverflow.com/questions/47059823/array-of-strings-scanning-properly-then-running-together/47060038#47060038", "title": "Array of Strings scanning Properly, then Running Together", "body": "<p>string length is not quite enough</p>\n\n<pre><code>int load_mpn_search(char search_filename[], int size, char search_array[][5]);\n</code></pre>\n\n<p>increase the size</p>\n\n<pre><code>int load_mpn_search(char search_filename[], int size, char search_array[][128]);\n</code></pre>\n\n<p>Note you need to accommodate space for '\\0' as well.</p>\n"}], "owner": {"reputation": 3, "user_id": 8869430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e624791b632cc00ac76dd75c95774b97?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/8869430/dan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 47060038, "answer_count": 2, "score": 0, "last_activity_date": 1509555795, "creation_date": 1509555116, "question_id": 47059823, "link": "https://stackoverflow.com/questions/47059823/array-of-strings-scanning-properly-then-running-together", "title": "Array of Strings scanning Properly, then Running Together", "body": "<p>I have a function that is designed to read multiple strings from an input file so I can call them back later.  That is coded as follows:</p>\n\n<pre><code>int load_mpn_search(char search_filename[], int size, char search_array[][5])\n{\nint search_size = 0;\nint n = 0;\nFILE * infile;\nint i = 0;\n\n\ninfile = fopen(search_filename, \"r\");\n\nif(infile==NULL)\n{\n    printf(\"\\nUnable to open %s\\n\", search_filename);\n}\n\nelse\n{   \nprintf(\"\\n\\nDuring Scan:\");\n    while(fscanf(infile, \"%s\\n\", search_array[n]) != EOF)\n            {\n                printf(\"\\n%d  %s\",n, search_array[n]);\n                n++;\n            }\n\n            search_size = n;\n}\nfclose(infile);\n</code></pre>\n\n<p>This appears to pull all of the strings in properly from the input file, and store them in the array.  I use the print function to show me what is being stored, and what I get back is:</p>\n\n<pre><code>During Scan:\n0  2-1-0\n1  1-0-2\n2  1-3-5\n3  1-10\n4  3-3-0\n5  5-1-0\n6  5-1-0-1\n7  5-2-1\n</code></pre>\n\n<p>However, immediately after in the same program, I try to print them back to see what is stored using this:</p>\n\n<pre><code>printf(\"\\n\\nIn Function:\");\n\n\nfor(i = 0; i &lt; search_size; i++)\n{\n    printf(\"\\ni = %d\", i);\n     printf(\"\\t search_array[%d] = %s\", i, search_array[i]);\n}\n</code></pre>\n\n<p>and what I get back is:</p>\n\n<pre><code>In Function:\ni = 0    search_array[0] = 2-1-01-0-21-3-51-10\ni = 1    search_array[1] = 1-0-21-3-51-10\ni = 2    search_array[2] = 1-3-51-10\ni = 3    search_array[3] = 1-10\ni = 4    search_array[4] = 3-3-05-1-05-1-05-2-1\ni = 5    search_array[5] = 5-1-05-1-05-2-1\ni = 6    search_array[6] = 5-1-05-2-1\ni = 7    search_array[7] = 5-2-1\n</code></pre>\n\n<p>Each string should only be 5 characters long, except for i = 6, which is 7 characters long, yet it appears the program is bunching them together into a seemingly random collection and repeating through the file to fill all strings in the array.  Any help would be sincerely appreciated.  Thanks!</p>\n"}, {"tags": ["c", "printf"], "comments": [{"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1509554784, "post_id": 47059697, "comment_id": 81066899, "body": "There is no space in an empty string."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 3, "creation_date": 1509554789, "post_id": 47059697, "comment_id": 81066903, "body": "You&#39;re not passing an <code>int</code> so why do you expect any kind of sensible value?"}, {"owner": {"reputation": 9095, "user_id": 8542346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11b206b49cec657d28a5876f8330780e?s=128&d=identicon&r=PG&f=1", "display_name": "H.S.", "link": "https://stackoverflow.com/users/8542346/h-s"}, "edited": false, "score": 3, "creation_date": 1509554797, "post_id": 47059697, "comment_id": 81066908, "body": "<code>&quot;&quot;</code> is not space, this is empty string. &#39; &#39; is space character. Try <code>printf(&quot;%d&quot;, &#39; &#39;)</code> , you will get output 32."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 2, "creation_date": 1509554802, "post_id": 47059697, "comment_id": 81066912, "body": "Could be anything. You&#39;re printing a random memory address as an integer. If you want to print the string, use <code>%s</code>, If you want the pointer, use <code>%p</code>."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1509554908, "post_id": 47059697, "comment_id": 81066978, "body": "Use <code>printf(&quot;%d&quot;, &#39; &#39;);</code>."}, {"owner": {"reputation": 3310, "user_id": 1853605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ab8d886abc51e874c1ed067b912ddd?s=128&d=identicon&r=PG", "display_name": "Potato", "link": "https://stackoverflow.com/users/1853605/potato"}, "edited": false, "score": 0, "creation_date": 1509555364, "post_id": 47059697, "comment_id": 81067234, "body": "output 173 woww I was expecting an address value far bigger than 173, this 3 digit number is a shocker to me."}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "reply_to_user": {"reputation": 3310, "user_id": 1853605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ab8d886abc51e874c1ed067b912ddd?s=128&d=identicon&r=PG", "display_name": "Potato", "link": "https://stackoverflow.com/users/1853605/potato"}, "edited": false, "score": 0, "creation_date": 1509562207, "post_id": 47059697, "comment_id": 81071276, "body": "@kkk -- you should expect nothing. Attempting to print an address with the wrong conversion specifier leads to undefined behavior, <code>&quot;&quot;</code> is a string literal which indicates an array somewhere in static storage, and even if the correct specifier were used <code>%p</code> converts addresses to printable characters in an implementation-defined way."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8866153, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jT_jP6wlIeU/AAAAAAAAAAI/AAAAAAAAAtI/RIi_W0IHnlw/photo.jpg?sz=128", "display_name": "Shyam pandit", "link": "https://stackoverflow.com/users/8866153/shyam-pandit"}, "edited": false, "score": 0, "creation_date": 1509555878, "post_id": 47059807, "comment_id": 81067588, "body": "Let the code be same,so it is printing 173  why?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 1, "user_id": 8866153, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jT_jP6wlIeU/AAAAAAAAAAI/AAAAAAAAAtI/RIi_W0IHnlw/photo.jpg?sz=128", "display_name": "Shyam pandit", "link": "https://stackoverflow.com/users/8866153/shyam-pandit"}, "edited": false, "score": 0, "creation_date": 1509556072, "post_id": 47059807, "comment_id": 81067706, "body": "@Shyampandit what is your platform/compiler versions etc.? The <code>173</code> is <i>undefined behaviour</i> (google that). But I must admit that I expected some larger number."}, {"owner": {"reputation": 1, "user_id": 8866153, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jT_jP6wlIeU/AAAAAAAAAAI/AAAAAAAAAtI/RIi_W0IHnlw/photo.jpg?sz=128", "display_name": "Shyam pandit", "link": "https://stackoverflow.com/users/8866153/shyam-pandit"}, "edited": false, "score": 0, "creation_date": 1509556677, "post_id": 47059807, "comment_id": 81068103, "body": "i am using Turbo c7."}, {"owner": {"reputation": 1022, "user_id": 5863987, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z7wZz.png?s=128&g=1", "display_name": "NieDzejkob", "link": "https://stackoverflow.com/users/5863987/niedzejkob"}, "reply_to_user": {"reputation": 1, "user_id": 8866153, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jT_jP6wlIeU/AAAAAAAAAAI/AAAAAAAAAtI/RIi_W0IHnlw/photo.jpg?sz=128", "display_name": "Shyam pandit", "link": "https://stackoverflow.com/users/8866153/shyam-pandit"}, "edited": false, "score": 0, "creation_date": 1509559187, "post_id": 47059807, "comment_id": 81069566, "body": "@Shyampandit Is that a DOS compiler? That would explain everything."}, {"owner": {"reputation": 1, "user_id": 8866153, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jT_jP6wlIeU/AAAAAAAAAAI/AAAAAAAAAtI/RIi_W0IHnlw/photo.jpg?sz=128", "display_name": "Shyam pandit", "link": "https://stackoverflow.com/users/8866153/shyam-pandit"}, "edited": false, "score": 0, "creation_date": 1509600685, "post_id": 47059807, "comment_id": 81084343, "body": "Yes it is DOS compiler ,till now i am not getting why the output is 173."}], "tags": [], "owner": {"reputation": 3054, "user_id": 193848, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HWieK.jpg?s=128&g=1", "display_name": "Andrew Cottrell", "link": "https://stackoverflow.com/users/193848/andrew-cottrell"}, "is_accepted": false, "score": 1, "last_activity_date": 1509555051, "creation_date": 1509555051, "answer_id": 47059807, "question_id": 47059697, "link": "https://stackoverflow.com/questions/47059697/why-the-output-of-printfd-is-173-in-c-language/47059807#47059807", "title": "Why the output of printf(&quot;%d&quot;,&quot;&quot;) is 173 in c language?", "body": "<p>First, you're trying to print a string as decimal integer, which means the decimal you try to print is going to be the pointer to the string (actually a pointer to the array of characters) and not the string itself.  To use an individual character use single-quotes, not double-quotes.</p>\n\n<p>To accomplish what you're actually trying to do, do this:</p>\n\n<pre><code>printf(\"%d\", ' ');\n</code></pre>\n\n<p>Note there is an actual space between the two single-quotes.</p>\n\n<p>The result will be 32, which is the decimal value for the ASCII Space character.</p>\n"}], "owner": {"reputation": 1, "user_id": 8866153, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jT_jP6wlIeU/AAAAAAAAAAI/AAAAAAAAAtI/RIi_W0IHnlw/photo.jpg?sz=128", "display_name": "Shyam pandit", "link": "https://stackoverflow.com/users/8866153/shyam-pandit"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "closed_date": 1509556491, "answer_count": 1, "score": -6, "last_activity_date": 1509600754, "creation_date": 1509554659, "last_edit_date": 1509600754, "question_id": 47059697, "link": "https://stackoverflow.com/questions/47059697/why-the-output-of-printfd-is-173-in-c-language", "closed_reason": "Not suitable for this site", "title": "Why the output of printf(&quot;%d&quot;,&quot;&quot;) is 173 in c language?", "body": "<pre><code>#include&lt;stdio.h&gt;\n#include&lt;conio.h&gt;\n\nvoid main()\n{\n    printf(\"%d\",\"\");//printing output\n    getch();\n}\n</code></pre>\n\n<p>The output is 173 .I am not getting why the output is 173.</p>\n"}, {"tags": ["c", "linux", "signals"], "comments": [{"owner": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "edited": false, "score": 0, "creation_date": 1509554695, "post_id": 47059627, "comment_id": 81066846, "body": "have you tries <code>sigemptyset(....);siggaddset( ..., SIGINT);sigprocmask( SIG_UNBLOCK, ... );</code> ?"}], "answers": [{"comments": [{"owner": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "edited": false, "score": 0, "creation_date": 1509554823, "post_id": 47059734, "comment_id": 81066927, "body": "from man: SIG_BLOCK: The set of blocked signals is <i>the union</i> of the current set and the set argument."}, {"owner": {"reputation": 43, "user_id": 7632112, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/34bc7a6872b5876d204ce9e07db523e7?s=128&d=identicon&r=PG&f=1", "display_name": "zsloan112", "link": "https://stackoverflow.com/users/7632112/zsloan112"}, "edited": false, "score": 0, "creation_date": 1509555456, "post_id": 47059734, "comment_id": 81067291, "body": "I tried using sigprocmask (SIG_SETMASK, ...) and SIG_UNBLOCK and SIG_BLOCK, and im still getting the same result"}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "reply_to_user": {"reputation": 43, "user_id": 7632112, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/34bc7a6872b5876d204ce9e07db523e7?s=128&d=identicon&r=PG&f=1", "display_name": "zsloan112", "link": "https://stackoverflow.com/users/7632112/zsloan112"}, "edited": false, "score": 0, "creation_date": 1509556200, "post_id": 47059734, "comment_id": 81067769, "body": "@zsloan112 did you understand that you need two <b>different</b> call of <code>sigprocmask()</code> ?"}, {"owner": {"reputation": 43, "user_id": 7632112, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/34bc7a6872b5876d204ce9e07db523e7?s=128&d=identicon&r=PG&f=1", "display_name": "zsloan112", "link": "https://stackoverflow.com/users/7632112/zsloan112"}, "edited": false, "score": 0, "creation_date": 1509556310, "post_id": 47059734, "comment_id": 81067848, "body": "Yes, i put thd ze on"}, {"owner": {"reputation": 43, "user_id": 7632112, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/34bc7a6872b5876d204ce9e07db523e7?s=128&d=identicon&r=PG&f=1", "display_name": "zsloan112", "link": "https://stackoverflow.com/users/7632112/zsloan112"}, "edited": false, "score": 0, "creation_date": 1509556352, "post_id": 47059734, "comment_id": 81067871, "body": "Sorry on mobile, cant delete that comment, but yes, I tried the second sigprocmask aftet the sigdelset"}], "tags": [], "owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "is_accepted": false, "score": 2, "last_activity_date": 1509554910, "last_edit_date": 1509554910, "creation_date": 1509554764, "answer_id": 47059734, "question_id": 47059627, "link": "https://stackoverflow.com/questions/47059627/blocking-and-unblocking-sigint-and-sigquit/47059734#47059734", "title": "Blocking and Unblocking SIGINT and SIGQUIT", "body": "<p>Just use <a href=\"https://linux.die.net/man/2/sigprocmask\" rel=\"nofollow noreferrer\"><code>sigprocmask();</code></a> a second time. And use <code>SIG_SETMASK</code></p>\n\n<blockquote>\n  <p>SIG_SETMASK\n  The set of blocked signals is set to the argument set.</p>\n</blockquote>\n\n<pre><code>sigdelset(&amp;new_set, SIGQUIT);\nsigprocmask(SIG_SETMASK, &amp;new_set, NULL);\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 7632112, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/34bc7a6872b5876d204ce9e07db523e7?s=128&d=identicon&r=PG&f=1", "display_name": "zsloan112", "link": "https://stackoverflow.com/users/7632112/zsloan112"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2100, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1509555308, "creation_date": 1509554437, "question_id": 47059627, "link": "https://stackoverflow.com/questions/47059627/blocking-and-unblocking-sigint-and-sigquit", "title": "Blocking and Unblocking SIGINT and SIGQUIT", "body": "<p>I am writing a program that has two for loops and during the first for loop (just prints 1-5 and sleeps 1 second in between) SIGINT and SIGQUIT are to be blocked and in the second for loop only SIGINT is to be blocked. I successfully block the correct signals for the first for loop, then on the second for loop, I try to remove SIGQUIT from being blocked but both signals still seem to be blocked. </p>\n\n<p>Here is what I have as of right now:</p>\n\n<pre><code>#include &lt;unistd.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;wait.h&gt;\n#include &lt;signal.h&gt;\n#include &lt;string.h&gt;\n\n\nvoid hd1(int sig){\n    if(sig == SIGINT){\n        printf(\" SIGINT Recieved\\n\");\n    }else if(sig == SIGQUIT){\n        printf(\" SIGQUIT Recieved\\n\");\n    }\n}\n\n\nint main(){\n    sigset_t new_set;\n    sigset_t old_set;\n\n    //struct sigaction act;\n    //memset(&amp;act, 0, sizeof(act));\n\n    //act.sa_handler = hd1;\n\n    //sigaction(SIGINT, &amp;act, 0);\n    //sigaction(SIGQUIT, &amp;act, 0);\n\n    sigemptyset(&amp;new_set);\n    sigaddset(&amp;new_set, SIGINT);\n    sigaddset(&amp;new_set, SIGQUIT);\n\n    sigprocmask(SIG_BLOCK, &amp;new_set, &amp;old_set);\n\n    for(int i = 1; i &lt;= 5; i++){\n        printf(\"%d\\n\", i);\n        sleep(1);\n    }\n\n\n    sigdelset(&amp;new_set, SIGQUIT);\n\n\n    for(int i = 1; i &lt;= 5; i++){\n        printf(\"%d\\n\", i);\n        sleep(1);\n    }\n}\n</code></pre>\n\n<p>I have tried using <code>sigprocmask</code> to unblock and setmask to reset the mask but it terminates the program after the loop when I unblock the signal.</p>\n"}, {"tags": ["c", "bash"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1509554468, "post_id": 47059615, "comment_id": 81066702, "body": "maybe share your code?"}, {"owner": {"reputation": 3310, "user_id": 1853605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ab8d886abc51e874c1ed067b912ddd?s=128&d=identicon&r=PG", "display_name": "Potato", "link": "https://stackoverflow.com/users/1853605/potato"}, "edited": false, "score": 2, "creation_date": 1509554585, "post_id": 47059615, "comment_id": 81066779, "body": "sorry but I&#39;m really having difficulty in understanding which process is sending to whom"}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1509555354, "post_id": 47059615, "comment_id": 81067225, "body": "Why do you think the read blocks?  Are you expecting to see something on your tty?"}, {"owner": {"reputation": 19, "user_id": 8784910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c55c49665213940cc1975bd74409cee?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Pepito", "link": "https://stackoverflow.com/users/8784910/juan-pepito"}, "edited": false, "score": 0, "creation_date": 1509566442, "post_id": 47059615, "comment_id": 81073574, "body": "I think read block because when I remove it it terminate. I am expecting the stder to be containing the result of process B which is not the case \u2013"}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1509617888, "post_id": 47059615, "comment_id": 81093503, "body": "<code>stderr</code> does not get redirected in your command line, I am not sure why you write into it. Write into <code>stdout</code>."}, {"owner": {"reputation": 19, "user_id": 8784910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c55c49665213940cc1975bd74409cee?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Pepito", "link": "https://stackoverflow.com/users/8784910/juan-pepito"}, "edited": false, "score": 0, "creation_date": 1509618847, "post_id": 47059615, "comment_id": 81094254, "body": "sorry, i didnt mention i redirect stderr of A into a file for debug purpose"}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 8784910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c55c49665213940cc1975bd74409cee?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Pepito", "link": "https://stackoverflow.com/users/8784910/juan-pepito"}, "edited": false, "score": 0, "creation_date": 1509561897, "post_id": 47060003, "comment_id": 81071115, "body": "But i use a thread to read, so for me, the thread listen while the main send to processB. When process B terminate (and it always do, its a famous sat solver) the thead should finally recieve in stdin something and proceed."}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "reply_to_user": {"reputation": 19, "user_id": 8784910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c55c49665213940cc1975bd74409cee?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Pepito", "link": "https://stackoverflow.com/users/8784910/juan-pepito"}, "edited": false, "score": 0, "creation_date": 1509562351, "post_id": 47060003, "comment_id": 81071346, "body": "@JuanPepito Is processB getting enough data?  Add some diagnostics to your programs so you can get some visibility in to what they are doing."}, {"owner": {"reputation": 19, "user_id": 8784910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c55c49665213940cc1975bd74409cee?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Pepito", "link": "https://stackoverflow.com/users/8784910/juan-pepito"}, "edited": false, "score": 0, "creation_date": 1509562667, "post_id": 47060003, "comment_id": 81071511, "body": "yep, i actually print a lot of debuging message into stdr, so i know that every time the generatedimac ouput is correct. Also, if i remove the read and just pipe A into B i Get the right result every time printed in terminal."}], "tags": [], "owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "is_accepted": false, "score": 4, "last_activity_date": 1509561508, "last_edit_date": 1509561508, "creation_date": 1509555684, "answer_id": 47060003, "question_id": 47059615, "link": "https://stackoverflow.com/questions/47059615/c-bash-redirection-processus-communication/47060003#47060003", "title": "C &amp; bash redirection processus communication", "body": "<p>You have a potentially blocking race condition.  If the processB needs to read a large amount of data before it produces anything, then it is possible that processA will be data starved before it produces enough data.  Once that happens, there's a deadlock.  Or, if processA never generates any data until it reads something, then both processes will just sit there.  It really depends on what processA and processB are doing.</p>\n\n<p>If the processes are sufficiently simple, what you are doing should work.  For instance:</p>\n\n<pre><code>$ cat a.sh\n#!/bin/sh \n\necho \"$$\"\n\nwhile read line; do echo $(($line + 1 )); echo $$ read: $line &gt;&amp;2; sleep 1; done\n$ ./a.sh &lt; fifo | ./a.sh &gt; fifo\n26385 read: 26384\n26384 read: 26385\n26385 read: 26386\n26384 read: 26385\n26385 read: 26386\n26384 read: 26387\n26385 read: 26388\n26384 read: 26387\n^C\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 19, "user_id": 8784910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c55c49665213940cc1975bd74409cee?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Pepito", "link": "https://stackoverflow.com/users/8784910/juan-pepito"}, "edited": false, "score": 0, "creation_date": 1509563550, "post_id": 47060577, "comment_id": 81071966, "body": "I fflush at the end of generateDimacFile()"}, {"owner": {"reputation": 19, "user_id": 8784910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c55c49665213940cc1975bd74409cee?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Pepito", "link": "https://stackoverflow.com/users/8784910/juan-pepito"}, "edited": false, "score": 0, "creation_date": 1509616287, "post_id": 47060577, "comment_id": 81092381, "body": "Ok thanks  indeed now the first read dont block, but the nexts ones does"}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 19, "user_id": 8784910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c55c49665213940cc1975bd74409cee?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Pepito", "link": "https://stackoverflow.com/users/8784910/juan-pepito"}, "edited": false, "score": 0, "creation_date": 1509617840, "post_id": 47060577, "comment_id": 81093457, "body": "@JuanPepito <code>stderr</code> does not get redirected in your command line, I am not sure why you mention it."}, {"owner": {"reputation": 19, "user_id": 8784910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c55c49665213940cc1975bd74409cee?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Pepito", "link": "https://stackoverflow.com/users/8784910/juan-pepito"}, "edited": false, "score": 0, "creation_date": 1509619247, "post_id": 47060577, "comment_id": 81094562, "body": "I didnt not mention (to simplify)but i redirect A stderr into a file in the bash for debugging purpose. I replaced my way of reading whit yours, and now it block at first read"}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 19, "user_id": 8784910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c55c49665213940cc1975bd74409cee?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Pepito", "link": "https://stackoverflow.com/users/8784910/juan-pepito"}, "edited": false, "score": 0, "creation_date": 1509619739, "post_id": 47060577, "comment_id": 81094948, "body": "@JuanPepito You may like to post complete examples that can be used to replicate your observations. <a href=\"https://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>"}, {"owner": {"reputation": 19, "user_id": 8784910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c55c49665213940cc1975bd74409cee?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Pepito", "link": "https://stackoverflow.com/users/8784910/juan-pepito"}, "edited": false, "score": 0, "creation_date": 1509620595, "post_id": 47060577, "comment_id": 81095514, "body": "Since it need to finish it before saturday. I will focuse on another solution (since I dont have the knowledge to resolve such a problem) and then trying to understand this case later. I will try to usen popen() for now, which will allow me to remove the bash. I welcome any advices"}], "tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1509618229, "last_edit_date": 1509618229, "creation_date": 1509557636, "answer_id": 47060577, "question_id": 47059615, "link": "https://stackoverflow.com/questions/47059615/c-bash-redirection-processus-communication/47060577#47060577", "title": "C &amp; bash redirection processus communication", "body": "<p>Using <code>|</code> or <code>&gt;</code> in <code>bash</code> makes the process block-buffered, so that it does not output anything until the buffer is full or <code>fflush</code> is invoked.</p>\n\n<p>Try disabling all buffering with <code>stdbuf -o0 ./processA &lt;fifo | stdbuf -o0 processB &gt;fifo</code>.</p>\n\n<hr>\n\n<p><code>stderr</code> does not get redirected in your command line, I am not sure why you write into it. Write into <code>stdout</code>.</p>\n\n<p>Another issue is that </p>\n\n<pre><code>read(0, satResult, solutionSize);\nfprintf(stderr, \"\\n%s\\n\", satResult);\n</code></pre>\n\n<p>is incorrect, <code>satResult</code> is not zero-terminated and the errors are not handled. A fixL</p>\n\n<pre><code>ssize_t r = read(0, satResult, solutionSize);\nif(r &gt; 0)\n    fwrite(satResult, r, 1, stdout);\nelse\n    // Handle read error.\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 8784910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c55c49665213940cc1975bd74409cee?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Pepito", "link": "https://stackoverflow.com/users/8784910/juan-pepito"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1509618229, "creation_date": 1509554393, "last_edit_date": 1509617660, "question_id": 47059615, "link": "https://stackoverflow.com/questions/47059615/c-bash-redirection-processus-communication", "title": "C &amp; bash redirection processus communication", "body": "<p>look at this bash :</p>\n\n<pre><code>mkfifo fifo\n./processA &lt;fifo | processB &gt;fifo\n</code></pre>\n\n<p>In my process A, i generate a file which is send by process B. Then I want to process the result of processB.</p>\n\n<p>So in A I just send info to B with printfs into std out. Then I create a thread who just read(stdin). After creating this thread, I send infos to B via printf.</p>\n\n<p>I do not understand why this whole sh block. The read never recieive anything. Why? the two process are tested and work fine separatly. The whole sh also work perfectly (dont block) if I dont read (but then I cant process B output).</p>\n\n<p>Can somebody explain me what i am understanding wrong?\nSorry for my approximative English. I am also intersted by your clean solution if you have one (but it would prefer understanding why this one is not working).</p>\n\n<p>//edit \nHere is the main (process A):</p>\n\n<pre><code>//managing some arguments threatment, constructing object...\n\n\n   pthread_t thread;//creation of the thread supposed to read\n\n  if(pthread_create(&amp;thread, NULL,IsKhacToolKit::threadRead, solver) != 0) {\n    fprintf(stderr,\"\\nSomething went wrong while creating Reader thread\\n\" );\n  }\n  solver-&gt;generateDimacFile();//printing to stdout\n\n\n  pthread_exit(0);\n}\n</code></pre>\n\n<p>the function executed by the thread is just supposed to read stdin and printing into stderr the string obtened (for now). Nothing is printed in stderr right now. </p>\n\n<p>generateDimacFile print a char* into stdout (and flush(stdout) at the end) that processB use. The process B is that one: <a href=\"http://www.labri.fr/perso/lsimon/glucose/\" rel=\"nofollow noreferrer\">http://www.labri.fr/perso/lsimon/glucose/</a></p>\n\n<p>here ise the function executed by the thread now :</p>\n\n<pre><code>char* satResult=(char*)malloc(sizeof(char)* solutionSize);\nfor (int i=0; i&lt;2; i++){\nread(0, satResult, solutionSize );\nfprintf(stderr, \"\\n%s\\n\", satResult);\n}\nDEBUGFLAG(\"Getting result from glucose\");\n</code></pre>\n\n<p>Ok so now thanks to Maxim Egorushkin, I discovered that the first read dont block, but the next one block using that bash instead:</p>\n\n<pre><code>./processA &lt;fifo | stdbuf -o0 ./processB &gt;fifo\n</code></pre>\n\n<p>and if I use that one :</p>\n\n<pre><code>stdbuf -o0 ./processA &lt;fifo | stdbuf -o0 ./processB &gt;fifo\n</code></pre>\n\n<p>Most of the time I can read twice whitout blocking (some time it block). I still can't read 3 times. I dont understand why it change anything because I flush stdout in generateDimacFile.</p>\n\n<p>Look at what's actually printed when it dont block(reading twice) in stderr:</p>\n\n<pre><code>c\nc This is glucose 4.0 --  based on MiniSAT (Many thanks to MiniSAT team)\nc\n\n\n\nc This is glucose 4.0 --  based on MiniSAT (Many thanks to MiniSAT team)\nc\n\nc Reading from standard input... Use '--help' for help.\ns to MiniSAT team)\nc\n</code></pre>\n\n<p>The coresponding expected result:</p>\n\n<pre><code>c\nc This is glucose 4.0 --  based on MiniSAT (Many thanks to MiniSAT team)\nc\nc Reading from standard input... Use '--help' for help.\nc |                                                                                                       |\ns UNSATISFIABLE\n</code></pre>\n"}, {"tags": ["c", "sockets", "stdout", "stdin"], "answers": [{"comments": [{"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "reply_to_user": {"reputation": 3, "user_id": 8869210, "user_type": "registered", "profile_image": "https://graph.facebook.com/10212443163427375/picture?type=large", "display_name": "Jerry Sciangula", "link": "https://stackoverflow.com/users/8869210/jerry-sciangula"}, "edited": false, "score": 0, "creation_date": 1509554619, "post_id": 47059522, "comment_id": 81066806, "body": "@JerrySciangula don&#39;t forget to valide this answer, to mark this question solved."}], "tags": [], "owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "is_accepted": true, "score": 0, "last_activity_date": 1509554024, "creation_date": 1509554024, "answer_id": 47059522, "question_id": 47059452, "link": "https://stackoverflow.com/questions/47059452/standard-input-and-standard-output-with-select-in-c/47059522#47059522", "title": "Standard input and standard output with select() in C", "body": "<p>use <code>fflush(stdout)</code> before <code>select()</code></p>\n\n<pre><code>read_fds = master;\n\nfflush(stdout);\n\nret = select(fdmax + 1, &amp;read_fds, NULL, NULL, NULL);\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 8869210, "user_type": "registered", "profile_image": "https://graph.facebook.com/10212443163427375/picture?type=large", "display_name": "Jerry Sciangula", "link": "https://stackoverflow.com/users/8869210/jerry-sciangula"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 528, "favorite_count": 0, "accepted_answer_id": 47059522, "answer_count": 1, "score": 0, "last_activity_date": 1509554069, "creation_date": 1509553759, "last_edit_date": 1509554069, "question_id": 47059452, "link": "https://stackoverflow.com/questions/47059452/standard-input-and-standard-output-with-select-in-c", "title": "Standard input and standard output with select() in C", "body": "<p>i'm doing a client-server project for university. For the client-side i have to use the select() system call. First of all I need to print \">\" and then wait, using select(), if socket is ready for reading a notification from server or stdin ready for reading from terminal.\nWhen i try to print \">\", i have this problem:</p>\n\n<pre><code>input(socket or stdin)\n&gt;\n</code></pre>\n\n<p>but i would like to have:</p>\n\n<pre><code>&gt;\ninput(socket or stdin).\n</code></pre>\n\n<p>Is there someone that could help me??\nHere is part of my code:</p>\n\n<pre><code>...\n...\nFD_SET(sd, &amp;master);\nFD_SET(std_in, &amp;master);\nfdmax = sd; \n\nfor(;;){        \n    printf(\"&gt;\");\n\n    read_fds = master;\n\n    ret = select(fdmax+1, &amp;read_fds,NULL, NULL,NULL);\n    check_error_rs(ret,0);\n\n\n    for(cont = fdmax + 1; cont &gt;= 0; cont--){   \n        if(FD_ISSET(cont, &amp;read_fds)){\n            if(cont == std_in){\n                scanf(\"%s\",send_buf);\n                if(strcmp(send_buf,\"!help\") == 0){\n                    .....\n                }\n\n                if(strcmp(send_buf,\"!who\") == 0){\n                    .....\n                }\n            }\n            if(cont == sd){\n                check_notify();\n\n            }\n\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "stack"], "comments": [{"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1509553348, "post_id": 47059234, "comment_id": 81065992, "body": "If it is a linked list, then <code>size</code> and <code>node_capacity</code> are completely unnecessary; you just walk the list and if there is no <code>next</code>, you are at the end. Your code seems overly complex for such a simple task. Suggest you go back to the drawing board."}, {"owner": {"reputation": 1717, "user_id": 8690361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3678a10e6bc70a207a4a458c76b04c08?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/8690361/steve"}, "edited": false, "score": 0, "creation_date": 1509553367, "post_id": 47059234, "comment_id": 81066005, "body": "If you&#39;re only storing <code>ints</code>, why are you allocating memory for them? Just put the <code>int</code> in the node."}, {"owner": {"user_type": "does_not_exist", "display_name": "user955340"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1509553439, "post_id": 47059234, "comment_id": 81066046, "body": "@PaulOgilvie My guess is they are storing blocks of ints on each node to increase the chance of a cache hit. Not that a heap-allocated stack is how I&#39;d consider doing that in the first place if that was the concern, but there are &quot;potential use cases&quot; for that structure."}, {"owner": {"reputation": 3, "user_id": 8777293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8a16d3dfeff4e059b5bd5effdcdb32d?s=128&d=identicon&r=PG&f=1", "display_name": "Charlotte K", "link": "https://stackoverflow.com/users/8777293/charlotte-k"}, "edited": false, "score": 0, "creation_date": 1509553811, "post_id": 47059234, "comment_id": 81066288, "body": "It&#39;s for an assignment, and yes, it is a stack that is made up of nodes that hold an array of ints, and the user can choose how large that array is by setting the node capacity. I will update this to include my method to make the stack."}, {"owner": {"reputation": 3, "user_id": 8777293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8a16d3dfeff4e059b5bd5effdcdb32d?s=128&d=identicon&r=PG&f=1", "display_name": "Charlotte K", "link": "https://stackoverflow.com/users/8777293/charlotte-k"}, "edited": false, "score": 0, "creation_date": 1509554282, "post_id": 47059234, "comment_id": 81066569, "body": "Updated with push"}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1509554464, "post_id": 47059234, "comment_id": 81066698, "body": "In <code>make_stack</code>, <code>stacky-&gt;size</code> should be set to 1 as there is one node. Size is again completely unnecesary as you can walk the list."}, {"owner": {"reputation": 3, "user_id": 8777293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8a16d3dfeff4e059b5bd5effdcdb32d?s=128&d=identicon&r=PG&f=1", "display_name": "Charlotte K", "link": "https://stackoverflow.com/users/8777293/charlotte-k"}, "edited": false, "score": 0, "creation_date": 1509554655, "post_id": 47059234, "comment_id": 81066818, "body": "No, size is referring to the ints that it currently holds. Size shouldn&#39;t be 1 until the first time push is called."}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "edited": false, "score": 0, "creation_date": 1509555409, "post_id": 47059234, "comment_id": 81067265, "body": "@CharlotteK.: You want to delete the element from <code>contents</code> array which is popped?"}, {"owner": {"reputation": 3, "user_id": 8777293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8a16d3dfeff4e059b5bd5effdcdb32d?s=128&d=identicon&r=PG&f=1", "display_name": "Charlotte K", "link": "https://stackoverflow.com/users/8777293/charlotte-k"}, "reply_to_user": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "edited": false, "score": 0, "creation_date": 1509555749, "post_id": 47059234, "comment_id": 81067506, "body": "@coderredoc Technically yes, but I initially allocate an array of 5 ints when creating a node, so when I am deleting a node, I delete the space for those 5 ints. I never free the space for one int, it is always an entire array of size node_capacity."}, {"owner": {"reputation": 3, "user_id": 8777293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8a16d3dfeff4e059b5bd5effdcdb32d?s=128&d=identicon&r=PG&f=1", "display_name": "Charlotte K", "link": "https://stackoverflow.com/users/8777293/charlotte-k"}, "edited": false, "score": 0, "creation_date": 1509556055, "post_id": 47059234, "comment_id": 81067695, "body": "It works, but it is leaking memory somewhere. I&#39;m not sure where, but the gcc compiler is giving me a warning in the pop method:      int_stack.c:113:13: warning: incompatible integer to pointer conversion       assigning to &#39;int *&#39; from &#39;int&#39;; take the address with &amp;     pop_val = stk-&gt;head-&gt;contents[0]; so I figure the leak is in the pop method and I am wondering if I am simply using my pointers incorrectly."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 2609493, "user_type": "registered", "profile_image": "https://graph.facebook.com/708687510/picture?type=large", "display_name": "Dan Crevier", "link": "https://stackoverflow.com/users/2609493/dan-crevier"}, "is_accepted": false, "score": 0, "last_activity_date": 1509553386, "creation_date": 1509553386, "answer_id": 47059326, "question_id": 47059234, "link": "https://stackoverflow.com/questions/47059234/pop-implementation-for-a-stack-without-a-memory-leak/47059326#47059326", "title": "Pop Implementation for a stack without a memory leak", "body": "<p>Your return value pop_val is not leaked in this case. As a local variable it's allocated on the stack, not the heap and does not need to be freed.</p>\n"}, {"tags": [], "owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "is_accepted": false, "score": 0, "last_activity_date": 1509557670, "last_edit_date": 1509557670, "creation_date": 1509553604, "answer_id": 47059399, "question_id": 47059234, "link": "https://stackoverflow.com/questions/47059234/pop-implementation-for-a-stack-without-a-memory-leak/47059399#47059399", "title": "Pop Implementation for a stack without a memory leak", "body": "<p>THe thing is you want to dynamically allocate deallocate the nodes of the stack. </p>\n\n<p>Now let's consider the design which has two parts:-</p>\n\n<ol>\n<li><p>You are creating an head node which will basically store all the meta information regarding the list and as well the beginning of the list.</p></li>\n<li><p>Now before you were using an dynamically created array for that. Now let's look into the  thing more closely. To delete a node of stack (stack-node) you will have to delete the whole allocated <code>contents</code> and create new one with all the other elements. This is one way but it is very very inefficient in that allocating deallocating for every pop etc.</p></li>\n</ol>\n\n<p>What about changing the design a bit?</p>\n\n<p>Keep the head node as you have kept. And then keep a <code>stack-node*</code>. Now everytime you push, create a new stack node and then add it to the <code>head</code>. Similarly when you pop just delete that node from <code>head</code>. No need to keep an array. Just put the data in separate nodes and that's it. This will make your code a lot simple.</p>\n"}], "owner": {"reputation": 3, "user_id": 8777293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8a16d3dfeff4e059b5bd5effdcdb32d?s=128&d=identicon&r=PG&f=1", "display_name": "Charlotte K", "link": "https://stackoverflow.com/users/8777293/charlotte-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 120, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1566463970, "creation_date": 1509553085, "last_edit_date": 1566463970, "question_id": 47059234, "link": "https://stackoverflow.com/questions/47059234/pop-implementation-for-a-stack-without-a-memory-leak", "title": "Pop Implementation for a stack without a memory leak", "body": "<p>I am attempting to create my own stack of ints (struct int_stack) that is a linked list of a struct I created (struct is_node). I want to do this with no occurrences of memory leaks, but I can't figure out how to implement the pop method. The pop method takes in paramaters (int_stack) and returns an int. Lets say node_capacity is set to 5, there are 6 ints in the stack (meaning 2 nodes) one that is full, and one that has only one int, and pop is called. It should return the value of the int on the node with only 1, but it needs to free the array of ints on a node and also free the node. I'm not sure how to free an int, and then return it, without causing a memory leak. This is what I am trying:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include \"int_stack.h\"\n\nstruct int_stack *make_stack(int node_capacity) {\n  //malloc theseprintf(\"%d]\", temp-&gt;contents[i]);\n  struct is_node *head;\n  struct int_stack *stacky;\n  head = malloc(sizeof(struct is_node));\n  stacky = malloc(sizeof(struct int_stack));\n  stacky-&gt;node_capacity = node_capacity;\n  head-&gt;contents = malloc(node_capacity * sizeof(int));\n  head-&gt;next_index = 0;\n  head-&gt;next = NULL;\n  stacky-&gt;size = 0;\n  stacky-&gt;head = head;\n  return stacky;\n}\n\nvoid free_stack(struct int_stack *stk) {\n  struct is_node *pointee;\n  pointee = stk-&gt;head;\n  while (stk-&gt;head-&gt;next != NULL) {\n    pointee = stk-&gt;head-&gt;next;\n    free(stk-&gt;head-&gt;contents);\n    free(stk-&gt;head);\n    stk-&gt;head = pointee;\n  }\n  free(stk-&gt;head-&gt;contents);\n  free(stk-&gt;head);\n  free(stk);\n}\n\nvoid reset_stack(struct int_stack *stk) {\n  struct is_node *temp;\n  while (stk-&gt;head-&gt;next != NULL) {\n    temp = stk-&gt;head-&gt;next;\n    free(stk-&gt;head-&gt;contents);\n    free(stk-&gt;head);\n    stk-&gt;head = temp;\n  }\n  stk-&gt;size = 0;\n  stk-&gt;head-&gt;contents = NULL;\n  stk-&gt;head-&gt;next_index = 0;\n}\n\nvoid print_stack(struct int_stack *stk) {\n  struct is_node *temp;\n  int i;\n  temp = stk-&gt;head;\n  i = temp-&gt;next_index - 1;\n  if (is_empty(stk) == 1) {\n    printf(\"(]\");\n  }\n  while (i &gt;= 0) {\n    if (i == temp-&gt;next_index - 1) {\n      if (i == stk-&gt;node_capacity - 1) {\n        if (i == 0) {\n          printf(\"[%d]\",temp-&gt;contents[i]);\n        } else {\n          printf(\"[%d,\",temp-&gt;contents[i]);\n      }\n      } else if (i == 0) {\n        printf(\"(%d]\",temp-&gt;contents[i]);\n      } else {\n        printf(\"(%d,\",temp-&gt;contents[i]);\n      }\n    } else {\n      if (i == 0) {\n        printf(\"%d]\", temp-&gt;contents[i]);\n      } else {\n        printf(\"%d,\",temp-&gt;contents[i]);\n      }\n    }\n    if (i == 0 &amp;&amp; temp-&gt;next != NULL) {\n      temp = temp-&gt;next;\n      i = temp-&gt;next_index;\n    }\n    --i;\n  }\n  printf(\"\\n\");\n}\n\nint is_empty(struct int_stack *stk) {\n  if (stk-&gt;size == 0) {\n    return 1;\n  }\n  return 0;\n}\n\nvoid push(struct int_stack *stk, int v) {\n  stk-&gt;size++;\n  int i = stk-&gt;head-&gt;next_index;\n  if ((stk-&gt;size % stk-&gt;node_capacity == 1 &amp;&amp; stk-&gt;size &gt; stk-&gt;node_capacity) || (stk-&gt;node_capacity == 1)) {\n    struct is_node *new_head;\n    new_head = malloc(sizeof(struct is_node));\n    new_head-&gt;contents = malloc(sizeof(stk-&gt;node_capacity * sizeof(int)));\n    new_head-&gt;next = stk-&gt;head;\n    new_head-&gt;next_index = 1;\n    new_head-&gt;contents[0] = v;\n    stk-&gt;head = new_head;\n  } else {\n    stk-&gt;head-&gt;contents[i] = v;\n    stk-&gt;head-&gt;next_index = realloc();\n  }\n}\n\nint pop(struct int_stack *stk) {\n  int pop_val;\n  struct is_node *temp;\n  if (is_empty(stk) == 1) {\n    return -1;\n  } else if (stk-&gt;head-&gt;next_index == 1) {\n    pop_val = stk-&gt;head-&gt;contents[0];\n    stk-&gt;size = stk-&gt;size - 1;\n    stk-&gt;head-&gt;next_index = 0;\n    if (stk-&gt;head-&gt;next != NULL) {\n      temp = stk-&gt;head-&gt;next;\n      free(stk-&gt;head-&gt;contents);\n      free(stk-&gt;head);\n      stk-&gt;head = temp;\n    }\n    return pop_val;\n  } else {\n    pop_val = stk-&gt;head-&gt;contents[stk-&gt;head-&gt;next_index - 1];\n    stk-&gt;head-&gt;next_index = stk-&gt;head-&gt;next_index - 1;\n    stk-&gt;size = stk-&gt;size - 1;\n    return pop_val;\n  }\n}\n\nint top(struct int_stack *stk) {\n  if (is_empty(stk) != 1) {\n    return stk-&gt;head-&gt;contents[stk-&gt;head-&gt;next_index - 1];\n  }\n  return -1;\n}\n</code></pre>\n\n<p>And my structs are defined as:</p>\n\n<pre><code> struct is_node {\n   int *contents;\n   int next_index;\n   struct is_node *next;\n };\n\n struct int_stack {\n   int size;\n   int node_capacity;\n   struct is_node *head;\n };\n</code></pre>\n"}, {"tags": ["c", "udp", "ipv4", "packet-sniffers", "packets"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1509552447, "post_id": 47058897, "comment_id": 81065405, "body": "Here&#39;s a <a href=\"https://stackoverflow.com/questions/35568996/socket-programming-udp-client-server-in-c\">similar question</a>."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1509552590, "post_id": 47058897, "comment_id": 81065500, "body": "Why is there a blank line between <i>every</i> line in your code? No, it&#39;s not more readable."}, {"owner": {"reputation": 50, "user_id": 6593177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/urnKw.png?s=128&g=1", "display_name": "KJanek", "link": "https://stackoverflow.com/users/6593177/kjanek"}, "edited": false, "score": 0, "creation_date": 1509553561, "post_id": 47058897, "comment_id": 81066122, "body": "Now is more readable."}], "answers": [{"tags": [], "owner": {"reputation": 50, "user_id": 6593177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/urnKw.png?s=128&g=1", "display_name": "KJanek", "link": "https://stackoverflow.com/users/6593177/kjanek"}, "is_accepted": false, "score": 0, "last_activity_date": 1509557413, "creation_date": 1509557413, "answer_id": 47060515, "question_id": 47058897, "link": "https://stackoverflow.com/questions/47058897/building-and-send-raw-datagrams/47060515#47060515", "title": "Building and send RAW datagrams", "body": "<p>Ok I fix it. The problem was with int one = 1; which specife number of interface. I changed to 0 and it works. What a stupid mistake :D</p>\n"}], "owner": {"reputation": 50, "user_id": 6593177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/urnKw.png?s=128&g=1", "display_name": "KJanek", "link": "https://stackoverflow.com/users/6593177/kjanek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1509557413, "creation_date": 1509551909, "last_edit_date": 1509553525, "question_id": 47058897, "link": "https://stackoverflow.com/questions/47058897/building-and-send-raw-datagrams", "title": "Building and send RAW datagrams", "body": "<p>Hello I would like to make a programm which would work similarly to \"SendIP a command-line tool to send arbitrary IP packets\"</p>\n\n<p>I have a programm to send \"IPv4 + UDP\". I try to validate my program by Wireshark but nothing is received and I don't know why.</p>\n\n<p>I send it by command ./Project 192.168.1.15 21 192.168.1.15 8080 5</p>\n\n<p>Here is my code:  (In ipv4.h and udp.h I have ip and udp headers)</p>\n\n<pre><code>#include &lt;unistd.h&gt;\n\n#include &lt;stdio.h&gt;\n\n#include &lt;sys/socket.h&gt;\n\n#include &lt;netinet/ip.h&gt;\n\n#include &lt;netinet/udp.h&gt;\n#include \"ipv4.h\"\n#include \"udp.h\"\n\n// Source IP, source port, target IP, target port from the command line arguments\n\nint main(int argc, char *argv[])\n\n{\n    if (argc != 6)\n\n    {\n\n        printf(\"- Invalid parameters!!!\\n\");\n\n        printf(\n                \"- Usage %s &lt;source hostname/IP&gt; &lt;source port&gt; &lt;target hostname/IP&gt; &lt;target port&gt;\\n\",\n                argv[0]);\n\n        exit(-1);\n\n    }\n\n    else {\n        int sd;\n\n        char buffer[PCKT_LEN];\n\n        struct ipheader *ip = (struct ipheader *) buffer;\n\n        struct udpheader *udp = (struct udpheader *) (buffer\n                + sizeof(struct ipheader));\n\n        // Source and destination addresses: IP and port\n\n        struct sockaddr_in sin, din;\n\n        int one = 1;\n\n        const int *val = &amp;one;\n\n        memset(buffer, 0, PCKT_LEN);\n\n        // Create a raw socket with UDP protocol\n\n        sd = socket(PF_INET, SOCK_RAW, IPPROTO_UDP);\n\n        if (sd &lt; 0)\n\n        {\n\n            perror(\"socket() error\");\n\n            // If something wrong just exit\n\n            exit(-1);\n\n        }\n\n        else\n\n            printf(\n                    \"socket() - Using SOCK_RAW socket and UDP protocol is OK.\\n\");\n\n        // The address family\n\n        sin.sin_family = AF_INET;\n\n        din.sin_family = AF_INET;\n\n        // Port numbers\n\n        sin.sin_port = htons(atoi(argv[2]));\n\n        din.sin_port = htons(atoi(argv[4]));\n\n        // IP addresses\n\n        sin.sin_addr.s_addr = inet_addr(argv[1]);\n\n        din.sin_addr.s_addr = inet_addr(argv[3]);\n\n        ip-&gt;iph_ihl = 5;\n\n        ip-&gt;iph_ver = 4;\n\n        ip-&gt;iph_tos = 16; // Low delay\n\n        ip-&gt;iph_len = sizeof(struct ipheader) + sizeof(struct udpheader);\n\n        ip-&gt;iph_ident = htons(54321);\n\n        ip-&gt;iph_ttl = 64; // hops\n\n        ip-&gt;iph_protocol = 17; // UDP\n\n        ip-&gt;iph_sourceip = inet_addr(argv[1]);\n\n        // The destination IP address\n\n        ip-&gt;iph_destip = inet_addr(argv[3]);\n\n        // Fabricate the UDP header. Source port number, redundant\n\n        udp-&gt;udph_srcport = htons(atoi(argv[2]));\n\n        // Destination port number\n\n        udp-&gt;udph_destport = htons(atoi(argv[4]));\n\n        udp-&gt;udph_len = htons(sizeof(struct udpheader));\n\n        // Calculate the checksum for integrity\n\n        ip-&gt;iph_chksum = csum((unsigned short *) buffer,\n                sizeof(struct ipheader) + sizeof(struct udpheader));\n\n        if (setsockopt(sd, IPPROTO_IP, IP_HDRINCL, val, sizeof(one)) &lt; 0)\n\n        {\n\n            perror(\"setsockopt() error\");\n\n            exit(-1);\n\n        }\n\n        else\n\n            printf(\"setsockopt() is OK.\\n\");\n\n        printf(\"Trying...\\n\");\n\n        printf(\"Using raw socket and UDP protocol\\n\");\n\n        printf(\"Using Source IP: %s port: %u, Target IP: %s port: %u.\\n\",\n                argv[1], atoi(argv[2]), argv[3], atoi(argv[4]));\n\n        //printf(\"Interfejs=%d\\n\", *val);\n\n        int count;\n        int number = (atoi(argv[5]));\n        printf(\"Number=%d\\n\", number);\n        for (count = 1; count &lt;= number; count++)\n\n        {\n\n            if (sendto(sd, buffer, ip-&gt;iph_len, 0, (struct sockaddr *) &amp;sin,\n                    sizeof(sin)) &lt; 0)\n\n            {\n\n                perror(\"sendto() error\");\n\n                exit(-1);\n\n            }\n\n            else\n\n            {\n\n                printf(\"Count #%u - sendto() is OK.\\n\", count);\n\n                sleep(2);\n\n            }\n\n        }\n\n        close(sd);\n\n        return 0;\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "matrix"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 3, "creation_date": 1509551256, "post_id": 47058645, "comment_id": 81064586, "body": "&#39;The above code doesn&#39;t work&#39; uh?  Why not?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 2, "creation_date": 1509551306, "post_id": 47058645, "comment_id": 81064626, "body": "post some code that doesn&#39;t work using <code>char Schedule[8][5][10];</code> (<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>)"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 3, "creation_date": 1509551315, "post_id": 47058645, "comment_id": 81064630, "body": "Note that 10 displayable chars means you need space for 11 bytes."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1509551340, "post_id": 47058645, "comment_id": 81064656, "body": "writing in strings in <code>char *Schedule[8][5];</code> without allocating is just undefined behaviour"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1509551476, "post_id": 47058645, "comment_id": 81064753, "body": "I would have gone with &#39;Schedule[8][5][128];&#39; anyway, just in case someone wants to schedule some new subject with more chars."}, {"owner": {"reputation": 165, "user_id": 6664548, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/iXxVy.jpg?s=128&g=1", "display_name": "Atreidex", "link": "https://stackoverflow.com/users/6664548/atreidex"}, "edited": false, "score": 0, "creation_date": 1509551490, "post_id": 47058645, "comment_id": 81064764, "body": "<a href=\"https://codeshare.io/2K6Z4E\" rel=\"nofollow noreferrer\">codeshare.io/2K6Z4E</a> doesn&#39;t compile. &quot;error: assignment to expression with array type      Schedule[0][0] = &quot;sdwdwd&quot;;&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 165, "user_id": 6664548, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/iXxVy.jpg?s=128&g=1", "display_name": "Atreidex", "link": "https://stackoverflow.com/users/6664548/atreidex"}, "edited": false, "score": 0, "creation_date": 1509551867, "post_id": 47058767, "comment_id": 81065014, "body": "Scanning the values worked, thanks. But why &quot; Schedule[i][j] = &quot;abc&quot; &quot; doesn&#39;t work?"}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "reply_to_user": {"reputation": 165, "user_id": 6664548, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/iXxVy.jpg?s=128&g=1", "display_name": "Atreidex", "link": "https://stackoverflow.com/users/6664548/atreidex"}, "edited": false, "score": 1, "creation_date": 1509552093, "post_id": 47058767, "comment_id": 81065177, "body": "@Atreidex.: You cannot use assignment on an array. Arrays are not assignable in C. Here you can use <code>strcpy(Schedule[0][0] ,&quot;sdwdwd&quot;);</code> as you know that destination is capable of holding the string lliteral."}], "tags": [], "owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "is_accepted": true, "score": 2, "last_activity_date": 1509553894, "last_edit_date": 1509553894, "creation_date": 1509551503, "answer_id": 47058767, "question_id": 47058645, "link": "https://stackoverflow.com/questions/47058645/creating-a-matrix-of-strings-in-c-without-malloc-and-without-initializing/47058767#47058767", "title": "Creating a matrix of strings in C (without malloc and without initializing)", "body": "<p>Maybe you are using the <code>char Schedule[8][5][10]</code> in wrong way, The correct way would be to do like this (an example)</p>\n\n<p><code>scanf(\"%s\",Schedule[i][j]);</code></p>\n\n<p><code>char *Schedule[8][5]</code> can be trust if you know that it is basically the 40 <code>char*</code> to which you can allocate memory as you want.</p>\n\n<p>For the second case you can allocate in <code>Schedule[i][j]=malloc(sizeof(char)*n)</code></p>\n\n<p>These are the common ways to using char arrays in your code. These are the ways to create a char array and use them. <strong>You wouldn't find other ways to do the same.</strong></p>\n\n<p>OP asked in comment:</p>\n\n<blockquote>\n  <p>Scanning the values worked, thanks. But why \" Schedule[i][j] = \"abc\" \"\n  doesn't work?</p>\n</blockquote>\n\n<p>Ans:  You cannot use assignment on an array. Arrays are not assignable in C. Here you can use <code>strcpy(Schedule[0][0] ,\"sdwdwd\");</code> <sup>1</sup>as you know that destination is capable of holding the string lliteral.</p>\n\n<p><sup>1. Use of strcpy is not advised. Here shown as an example to give user a quick idea. For safer <code>strcpy</code> use <code>strcat</code> like <a href=\"https://stackoverflow.com/a/1258577/3796113\">this</a> </sup></p>\n"}], "owner": {"reputation": 165, "user_id": 6664548, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/iXxVy.jpg?s=128&g=1", "display_name": "Atreidex", "link": "https://stackoverflow.com/users/6664548/atreidex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "accepted_answer_id": 47058767, "answer_count": 1, "score": 0, "last_activity_date": 1509553894, "creation_date": 1509551144, "question_id": 47058645, "link": "https://stackoverflow.com/questions/47058645/creating-a-matrix-of-strings-in-c-without-malloc-and-without-initializing", "title": "Creating a matrix of strings in C (without malloc and without initializing)", "body": "<p>I want to create a matrix of weekly timetable which must have 8 rows and 5 rows. And each string has 10 chars. It's possible to do that with malloc like that:</p>\n\n<pre><code>char ***Schedule = (char ***)malloc(ROW*sizeof(char **));\n\nfor (int i = 0; i &lt; ROW; i++)\n{\n    Schedule[i] = (char **)malloc(COL*sizeof(char *));\n\n    for (int j = 0; j &lt; COL; j++)\n        Schedule[i][j] = (char *)malloc(SIZE*sizeof(char));\n}\n</code></pre>\n\n<p>But I want to not use malloc, because it seems too much lines of code and size of matrix is very little already (8*5*10 = 400 bytes).</p>\n\n<pre><code>char Schedule[8][5][10];\n</code></pre>\n\n<p>The above code doesn't work.</p>\n\n<pre><code>char *Schedule[8][5];\n</code></pre>\n\n<p>This one works but i don't trust it, because size of strings are uncertain. It may crash.</p>\n"}, {"tags": ["c++", "c", "makefile"], "comments": [{"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1509551187, "post_id": 47058530, "comment_id": 81064537, "body": "Why do you assume that the C code needs the C++ STL? It makes much more sense to assume that the C++ function needs the C++ STL."}, {"owner": {"reputation": 425, "user_id": 8543542, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0735a717fbbd536b75d4a2ccfa0d5d15?s=128&d=identicon&r=PG&f=1", "display_name": "J.R.", "link": "https://stackoverflow.com/users/8543542/j-r"}, "reply_to_user": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1509551522, "post_id": 47058530, "comment_id": 81064791, "body": "@nwp hi. what I wanted to say is the C++ function that the C file calls need stl. But my question is does this option rly mean the gcc compile the C code with stl?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1509551627, "post_id": 47058530, "comment_id": 81064863, "body": "<code>main.o</code> isn&#39;t C code. You&#39;re linking, not compiling."}], "answers": [{"comments": [{"owner": {"reputation": 425, "user_id": 8543542, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0735a717fbbd536b75d4a2ccfa0d5d15?s=128&d=identicon&r=PG&f=1", "display_name": "J.R.", "link": "https://stackoverflow.com/users/8543542/j-r"}, "edited": false, "score": 0, "creation_date": 1509551615, "post_id": 47058633, "comment_id": 81064858, "body": "Thnx. I thought the stl is already compiled into the object file. how come are they still necessary while linking?"}, {"owner": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "edited": false, "score": 0, "creation_date": 1509551811, "post_id": 47058633, "comment_id": 81064968, "body": "Much of the std:: library is &quot;compiled into the object file&quot; as you described (since they are largely template header files), but these header files in turn invoke functions that are in the std lib.  Hence, there&#39;s stuff to link. (e.g. &quot;new and delete&quot;)."}, {"owner": {"reputation": 425, "user_id": 8543542, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0735a717fbbd536b75d4a2ccfa0d5d15?s=128&d=identicon&r=PG&f=1", "display_name": "J.R.", "link": "https://stackoverflow.com/users/8543542/j-r"}, "reply_to_user": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "edited": false, "score": 0, "creation_date": 1509552000, "post_id": 47058633, "comment_id": 81065112, "body": "@selbie alright. Seems I learnt something new. Thnx."}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": false, "score": 2, "last_activity_date": 1509551123, "creation_date": 1509551123, "answer_id": 47058633, "question_id": 47058530, "link": "https://stackoverflow.com/questions/47058530/how-do-i-link-a-c-object-file-to-a-c-executable/47058633#47058633", "title": "how do I link a C++ object file to a C executable?", "body": "<p>the C++ object you linked with needs the C++ library.</p>\n\n<p>If you're linking with the C driver (ex: <code>gcc</code>), you need to add linkage to C++ library because of this C++ object, not because of the C object. C driver isn't aware of C++.</p>\n\n<p>Had you linked with the C++ driver (ex: <code>g++</code>), the C++ library is set by default (you don't need to add it to the link options)</p>\n\n<p>Note that at this point all objects are compiled, the phase is the <em>link</em> phase.</p>\n"}, {"comments": [{"owner": {"reputation": 425, "user_id": 8543542, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0735a717fbbd536b75d4a2ccfa0d5d15?s=128&d=identicon&r=PG&f=1", "display_name": "J.R.", "link": "https://stackoverflow.com/users/8543542/j-r"}, "edited": false, "score": 0, "creation_date": 1509552075, "post_id": 47058676, "comment_id": 81065165, "body": "Hey. I cannot compile it as cpp file. Cause actually the main.c calls other c libs. If I compile main.c with g++ I get over thousands errors..."}, {"owner": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "reply_to_user": {"reputation": 425, "user_id": 8543542, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0735a717fbbd536b75d4a2ccfa0d5d15?s=128&d=identicon&r=PG&f=1", "display_name": "J.R.", "link": "https://stackoverflow.com/users/8543542/j-r"}, "edited": false, "score": 0, "creation_date": 1509553661, "post_id": 47058676, "comment_id": 81066191, "body": "I didn&#39;t say compile the .c file with the c++ compiler, I&#39;m saying have all generated .o files linked by invoking: <code>g++ -o main main.o get_config.o</code>. In this case, there&#39;s nothing to &quot;compile&quot; and the C++ compiler will in turn just invoke the linker with the correct parameters."}, {"owner": {"reputation": 425, "user_id": 8543542, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0735a717fbbd536b75d4a2ccfa0d5d15?s=128&d=identicon&r=PG&f=1", "display_name": "J.R.", "link": "https://stackoverflow.com/users/8543542/j-r"}, "edited": false, "score": 0, "creation_date": 1509556084, "post_id": 47058676, "comment_id": 81067713, "body": "Hi. sorry it was my mistake, I wanted to say it is at the linking stage I have a dynamic c lib to link with the main. Would it work?"}, {"owner": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "reply_to_user": {"reputation": 425, "user_id": 8543542, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0735a717fbbd536b75d4a2ccfa0d5d15?s=128&d=identicon&r=PG&f=1", "display_name": "J.R.", "link": "https://stackoverflow.com/users/8543542/j-r"}, "edited": false, "score": 0, "creation_date": 1509557060, "post_id": 47058676, "comment_id": 81068329, "body": "Most likely. Linking is independent of the programming language.  It&#39;s just the the compiler just invokes the linker for you with the correct flags and parameters. So I was suggesting if your Makefile will <i>compile</i> everything into a .o using the correct compiler, then you can can link all your .o files and get the correct C++ libs passed to the linker by using the c++ compiler."}, {"owner": {"reputation": 425, "user_id": 8543542, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0735a717fbbd536b75d4a2ccfa0d5d15?s=128&d=identicon&r=PG&f=1", "display_name": "J.R.", "link": "https://stackoverflow.com/users/8543542/j-r"}, "edited": false, "score": 0, "creation_date": 1509558808, "post_id": 47058676, "comment_id": 81069340, "body": "Thnx. I was not very aware with the linking process. I thought it is language dependent.  But if things are as you state, what are the differences between g++ linker and gcc linker?  Do they actually both call ld but just with different default parameters?"}, {"owner": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "reply_to_user": {"reputation": 425, "user_id": 8543542, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0735a717fbbd536b75d4a2ccfa0d5d15?s=128&d=identicon&r=PG&f=1", "display_name": "J.R.", "link": "https://stackoverflow.com/users/8543542/j-r"}, "edited": false, "score": 0, "creation_date": 1509566175, "post_id": 47058676, "comment_id": 81073420, "body": "There is no &quot;g++ linker&quot; or &quot;gcc linker&quot;.  There&#39;s just <code>ld</code> (the linker) which combines all the <code>.o</code> files and all the additional libraries into a single executable with <code>main</code> as your entry point.  When you invoke <code>gcc</code> or <code>g++</code>, it launches a child process for <code>ld</code> and passes all the appropriate arguments for a C or C++ program including the list of additional libraries needed for C and C++.  It&#39;s just that C++ also needs all the C libs.  That&#39;s why the above should work."}], "tags": [], "owner": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "is_accepted": false, "score": 1, "last_activity_date": 1509551235, "creation_date": 1509551235, "answer_id": 47058676, "question_id": 47058530, "link": "https://stackoverflow.com/questions/47058530/how-do-i-link-a-c-object-file-to-a-c-executable/47058676#47058676", "title": "how do I link a C++ object file to a C executable?", "body": "<p>Most likely, you just need to use the C++ compiler to initiate the final link. By doing that, all the correct linkage parameters will get passed to the linker.</p>\n\n<pre><code>main: main.o get_config.o\n    ${CROSS}${CXX} $^ -o $@ ${LDFLAGS}\n</code></pre>\n"}], "owner": {"reputation": 425, "user_id": 8543542, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0735a717fbbd536b75d4a2ccfa0d5d15?s=128&d=identicon&r=PG&f=1", "display_name": "J.R.", "link": "https://stackoverflow.com/users/8543542/j-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1145, "favorite_count": 0, "closed_date": 1509551452, "answer_count": 2, "score": 0, "last_activity_date": 1509553507, "creation_date": 1509550852, "last_edit_date": 1509553507, "question_id": 47058530, "link": "https://stackoverflow.com/questions/47058530/how-do-i-link-a-c-object-file-to-a-c-executable", "closed_reason": "Duplicate", "title": "how do I link a C++ object file to a C executable?", "body": "<p>I am trying to call a C++ function from a C file. \nSo I declared the function as extern \"C\" and declared it in C file as well.\nCreated a object file from the cpp file let's call it cpp_object.o, then created a object file for the main.c.</p>\n\n<p>It is not that obvious that I can use g++ to link them. No, the main calls some c libs so I cannot link them with g++. So I have to link them with gcc.\nI tried the followings:</p>\n\n<pre><code>main: main.o cpp_object.o\n    ${CROSS}${CC} $^ -o $@ ${LDFLAGS}\n</code></pre>\n\n<p>It shows error that the object file cannot find the C++ stdlib. I did not know what happened. Googled it tried the following:</p>\n\n<pre><code>main: main.o get_config.o\n    ${CROSS}${CC} $^ -o $@ ${LDFLAGS}  -lstdc++\n</code></pre>\n\n<p>Then it worked!? Does it mean the gcc compile the code with the c++ stdlib? But I am bit confused, how do we need to compile a C code with c++ stl?</p>\n\n<p>So is this actually did what I wanted? Or I missed something?</p>\n"}, {"tags": ["c", "linux", "gpio"], "comments": [{"owner": {"reputation": 191202, "user_id": 147356, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b9506717d24256a090524dd5505d3207?s=128&d=identicon&r=PG", "display_name": "larsks", "link": "https://stackoverflow.com/users/147356/larsks"}, "edited": false, "score": 0, "creation_date": 1509551540, "post_id": 47057966, "comment_id": 81064802, "body": "The file is obviously there when you run <code>ls &#47;sys&#47;class&#47;gpio&#47;gpio971&#47;</code>. It is possible there is a delay between writing the gpio number to the <code>export</code> file and the corresponding <code>gpio971</code> directory showing up.  What happens if you insert a short delay after exporting the pin?"}, {"owner": {"reputation": 191202, "user_id": 147356, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b9506717d24256a090524dd5505d3207?s=128&d=identicon&r=PG", "display_name": "larsks", "link": "https://stackoverflow.com/users/147356/larsks"}, "edited": false, "score": 0, "creation_date": 1509551701, "post_id": 47057966, "comment_id": 81064902, "body": "Also, it&#39;s a good idea to use the <code>perror</code> function to display the reason that a system call failed (see <a href=\"https://stackoverflow.com/questions/12102332/when-should-i-use-perror-and-fprintfstderr\">here</a> for some discussion on that topic)."}], "answers": [{"tags": [], "owner": {"reputation": 1113, "user_id": 3336541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a2fe96f859a541bd9f0fb375800922d?s=128&d=identicon&r=PG", "display_name": "Prabhakar Lad", "link": "https://stackoverflow.com/users/3336541/prabhakar-lad"}, "is_accepted": true, "score": 1, "last_activity_date": 1509552088, "creation_date": 1509552088, "answer_id": 47058948, "question_id": 47057966, "link": "https://stackoverflow.com/questions/47057966/linux-gpio-value-file-not-created-on-export/47058948#47058948", "title": "Linux GPIO Value File Not Created on Export", "body": "<p>You need to open file \"/sys/class/gpio/gpio971/direction\" and not \"/sys/class/gpio971/direction\"</p>\n\n<pre><code>   directionfd = open(\"/sys/class/gpio/gpio971/direction\", O_RDWR);\n\n    if(directionfd &lt; 0)\n    {\n        printf(\"Cannot open GPIO direction it\\n\");\n        exit(1);\n    }\n</code></pre>\n\n<p>You can refer [1], and get the code to export/unexport/set direction/read/write gpio pin.</p>\n\n<p>[1] <a href=\"https://elinux.org/RPi_GPIO_Code_Samples#sysfs\" rel=\"nofollow noreferrer\">https://elinux.org/RPi_GPIO_Code_Samples#sysfs</a></p>\n"}], "owner": {"reputation": 255, "user_id": 8825833, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/51b901da80f75bacf5bf0b6eb7ead307?s=128&d=identicon&r=PG&f=1", "display_name": "John Frye", "link": "https://stackoverflow.com/users/8825833/john-frye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 686, "favorite_count": 0, "accepted_answer_id": 47058948, "answer_count": 1, "score": 0, "last_activity_date": 1509553608, "creation_date": 1509549033, "last_edit_date": 1509553608, "question_id": 47057966, "link": "https://stackoverflow.com/questions/47057966/linux-gpio-value-file-not-created-on-export", "title": "Linux GPIO Value File Not Created on Export", "body": "<p>I am trying to write a basic Linux GPIO user space application. For some reason, I am able to open the export file and export the GPIO with the given number. However, after exporting it, I cannot specify whether it is input or output because the /sys/class/gpio/gpio&lt;###>/direction file is not created. As a result, my C errs out.</p>\n\n<p>Here is the code</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;fcntl.h&gt;\n\nint main()\n{\n\n    int valuefd, exportfd, directionfd;\n\n    printf(\"GPIO test running...\\n\");\n\n    exportfd = open(\"/sys/class/gpio/export\", O_WRONLY);\n\n    if(exportfd &lt; 0)\n    {\n        printf(\"Cannot open GPIO to export it\\n\");\n        exit(1);\n    }\n\n    write(exportfd, \"971\", 4);\n    close(exportfd);\n\n    printf(\"GPIO exported successfully\\n\");\n\n    directionfd = open(\"/sys/class/gpio971/direction\", O_RDWR);\n\n    if(directionfd &lt; 0)\n    {\n        printf(\"Cannot open GPIO direction it\\n\");\n        exit(1);\n    }\n\n    write(directionfd, \"out\", 4);\n    close(directionfd);\n\n    printf(\"GPIO direction set as output successfully\\n\");\n\n    valuefd = open(\"/sys/class/gpio/gpio971/value\", O_RDWR);\n\n    if(valuefd &lt; 0)\n    {\n        printf(\"Cannot open GPIO value\\n\");\n        exit(1);\n    }\n\n    printf(\"GPIO value opened, now toggling...\\n\");\n\n    while(1)\n    {\n        write(valuefd, \"1\", 2);\n        write(valuefd, \"0\", 2);\n    }\n\n\n    return 0;\n}\n</code></pre>\n\n<p>Output from run:</p>\n\n<blockquote>\n  <p>root@plnx_arm:~# /usr/bin/basic-gpio </p>\n  \n  <p>GPIO test running...</p>\n  \n  <p>GPIO exported successfully</p>\n  \n  <p>Cannot open GPIO direction it</p>\n</blockquote>\n\n<p>File is there</p>\n\n<blockquote>\n  <p>root@plnx_arm:~# ls /sys/class/gpio/gpio971/</p>\n  \n  <p>active_low  device      direction   edge        power       subsystem \n  uevent      value</p>\n</blockquote>\n"}, {"tags": ["c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 1, "creation_date": 1509549173, "post_id": 47057809, "comment_id": 81063211, "body": "You can&#39;t return arrays from functions in C, but this code does not even attempt that; here <code>ptr[0]</code> is returned, which is a pointer to a local variable. The lifetime of the local variable has ended after the function has returned...."}, {"owner": {"reputation": 49, "user_id": 7001540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1079cc32bec5b499499611fb98a2957?s=128&d=identicon&r=PG&f=1", "display_name": "Karna", "link": "https://stackoverflow.com/users/7001540/karna"}, "reply_to_user": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1509550148, "post_id": 47057809, "comment_id": 81063880, "body": "Can this problem be solved using static integer pointer variable and returning ptr instead of *ptr?"}, {"owner": {"reputation": 1021, "user_id": 3335118, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s22sH.png?s=128&g=1", "display_name": "theGleep", "link": "https://stackoverflow.com/users/3335118/thegleep"}, "edited": false, "score": 0, "creation_date": 1509550254, "post_id": 47057809, "comment_id": 81063930, "body": "What is your expected output?"}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1509550382, "post_id": 47057809, "comment_id": 81064025, "body": "@SrihariRaoM -- probably, but that is not ideal; better to either pass an array from the caller into the function, or dynamically allocate within the function. You could also wrap <code>ptr[]</code> in a <code>struct</code> and return that, since <code>struct</code>s can be returned from functions."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1509551577, "post_id": 47057809, "comment_id": 81064832, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/11656532/returning-an-array-using-c\">Returning an array using C</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1404, "user_id": 6395770, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/a1dd74e2bc23bea3918a139070114d23?s=128&d=identicon&r=PG&f=1", "display_name": "information_interchange", "link": "https://stackoverflow.com/users/6395770/information-interchange"}, "is_accepted": false, "score": 2, "last_activity_date": 1509550235, "creation_date": 1509550235, "answer_id": 47058336, "question_id": 47057809, "link": "https://stackoverflow.com/questions/47057809/returning-an-array-of-pointers-from-a-function/47058336#47058336", "title": "Returning an array of pointers from a function", "body": "<p>You can't return the stack-allocated array since once the function call finishes, it is no longer marked in use. Instead, you should <code>malloc</code> the array, for example <code>int *ptr = malloc(sizeof(int)*20);</code>. Also remember to <code>free</code> the array when done with it (it's good practice). See these posts for details</p>\n\n<p><a href=\"https://stackoverflow.com/questions/11656532/returning-an-array-using-c\">Returning an array using C</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/4824342/returning-a-local-variable-from-function-in-c\">returning a local variable from function in C</a></p>\n"}, {"tags": [], "owner": {"reputation": 697, "user_id": 8861854, "user_type": "registered", "profile_image": "https://graph.facebook.com/10159396468575112/picture?type=large", "display_name": "Luke Smith", "link": "https://stackoverflow.com/users/8861854/luke-smith"}, "is_accepted": false, "score": 2, "last_activity_date": 1509550841, "creation_date": 1509550841, "answer_id": 47058525, "question_id": 47057809, "link": "https://stackoverflow.com/questions/47057809/returning-an-array-of-pointers-from-a-function/47058525#47058525", "title": "Returning an array of pointers from a function", "body": "<p>How about this</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n#define MAXLEN 20\n\nvoid c2i(char *str, int *out, int len); \n\nint main(){\n\n    char s[MAXLEN];\n    int  out[MAXLEN];\n    int *p, i;\n\n    printf(\"Enter your string:\\n\");\n    /* fgets safer that scanf, \n      protects buffer overrun */\n    fgets(s, sizeof(s), stdin);\n    /* fgets gives you the newline char though, \n      so remove it */\n    if(s[strlen(s)-1] == '\\n') {\n        s[strlen(s)-1] = '\\0';\n    }\n\n    c2i(s,out,strlen(s));\n    for(i=0; i&lt;strlen(s); i++){\n        printf(\"%d\\n\", out[i]);\n    }\n\n    return 0;\n}\n\nvoid c2i(char *str, int *out, int len){\n\n    int i=0;\n\n    for(i=0; i&lt;len; i++)\n    {\n        out[i]=*(str+i) &amp; 0xff;\n    }\n}\n</code></pre>\n\n<p>Passing the out buffer to c2i means you don't need to malloc/free a buffer, but this is probably just a matter of taste.</p>\n\n<p>Using fgets means rather than scanf means you're protected from buffer overruns and your strings can have spaces in them too.</p>\n"}, {"comments": [{"owner": {"reputation": 9095, "user_id": 8542346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11b206b49cec657d28a5876f8330780e?s=128&d=identicon&r=PG&f=1", "display_name": "H.S.", "link": "https://stackoverflow.com/users/8542346/h-s"}, "edited": false, "score": 0, "creation_date": 1509552560, "post_id": 47058837, "comment_id": 81065484, "body": "Your program is logically wrong. <code>result[20]</code> array is a local variable of function <code>c2i()</code> and you are storing the address of its elements in <code>ptr[i]</code> and returning ptr and in <code>main()</code>, reading the content of a local variable address in it. You are lucky that It&#39;s working somehow but this is undefined behavior."}, {"owner": {"reputation": 679, "user_id": 7314871, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K3EKh.jpg?s=128&g=1", "display_name": "Srikanth Chekuri", "link": "https://stackoverflow.com/users/7314871/srikanth-chekuri"}, "reply_to_user": {"reputation": 9095, "user_id": 8542346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11b206b49cec657d28a5876f8330780e?s=128&d=identicon&r=PG&f=1", "display_name": "H.S.", "link": "https://stackoverflow.com/users/8542346/h-s"}, "edited": false, "score": 0, "creation_date": 1509552725, "post_id": 47058837, "comment_id": 81065583, "body": "@H.S. yes result array should also be created using malloc . edited"}, {"owner": {"reputation": 9095, "user_id": 8542346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11b206b49cec657d28a5876f8330780e?s=128&d=identicon&r=PG&f=1", "display_name": "H.S.", "link": "https://stackoverflow.com/users/8542346/h-s"}, "edited": false, "score": 0, "creation_date": 1509552981, "post_id": 47058837, "comment_id": 81065745, "body": "Still, there are issues in your program. In this statement - <code>ptr = (int *)malloc(10*sizeof(int *)) ;</code> you are typecasting malloc return to <code>(int *)</code> but <code>ptr</code> is of type <code>int **</code>. Moreover, you should not typecast the malloc result."}, {"owner": {"reputation": 49, "user_id": 7001540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1079cc32bec5b499499611fb98a2957?s=128&d=identicon&r=PG&f=1", "display_name": "Karna", "link": "https://stackoverflow.com/users/7001540/karna"}, "edited": false, "score": 0, "creation_date": 1509553459, "post_id": 47058837, "comment_id": 81066058, "body": "@srikanth_16 I copy pasted your code and tried to execute the same but I am not getting the output that you have got."}, {"owner": {"reputation": 679, "user_id": 7314871, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K3EKh.jpg?s=128&g=1", "display_name": "Srikanth Chekuri", "link": "https://stackoverflow.com/users/7314871/srikanth-chekuri"}, "edited": false, "score": 0, "creation_date": 1509553615, "post_id": 47058837, "comment_id": 81066168, "body": "here is the link to ideone. seems it is working fine. <a href=\"https://ideone.com/YHGgmX\" rel=\"nofollow noreferrer\">ideone.com/YHGgmX</a> . let me now what is the problem you are having ??"}, {"owner": {"reputation": 49, "user_id": 7001540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1079cc32bec5b499499611fb98a2957?s=128&d=identicon&r=PG&f=1", "display_name": "Karna", "link": "https://stackoverflow.com/users/7001540/karna"}, "edited": false, "score": 0, "creation_date": 1509553994, "post_id": 47058837, "comment_id": 81066401, "body": "@srikanth_16 after creating result array using malloc I am getting the expected output. Again thanks for helping man."}], "tags": [], "owner": {"reputation": 679, "user_id": 7314871, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K3EKh.jpg?s=128&g=1", "display_name": "Srikanth Chekuri", "link": "https://stackoverflow.com/users/7314871/srikanth-chekuri"}, "is_accepted": true, "score": 2, "last_activity_date": 1509553036, "last_edit_date": 1509553036, "creation_date": 1509551720, "answer_id": 47058837, "question_id": 47057809, "link": "https://stackoverflow.com/questions/47057809/returning-an-array-of-pointers-from-a-function/47058837#47058837", "title": "Returning an array of pointers from a function", "body": "<pre><code>#include &lt;stdio.h&gt;\n\nint** c2i(char *str) {\n\n    int i=0, *result, **ptr;\n    result = (int *)malloc(20*sizeof(int)) ;\n    ptr = (int **)malloc(10*sizeof(int *)) ;\n\n    while(*(str+i)!='\\0'){\n        result[i]=*(str+i) &amp; 0xff;\n        ptr[i]=&amp;result[i];\n        i++;\n    }\n    printf(\"%d %d %d %d %p %p %p %p\", *ptr[0], *ptr[1], *ptr[2], *ptr[3], ptr[0], ptr[1], ptr[2], ptr[3]);\n\n    return ptr;\n}\nint main(){\n\n    char s[20];\n    int **p, i;\n    printf(\"Enter your string:\\n\");\n    scanf(\"%s\", s);\n    p=c2i(s);\n    for(i=0; i&lt;4; i++){\n        printf(\"\\n%d\\t%p\\n\", **p, *p);\n        p++;\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>double-pointer might solve your issue, look at your modified code..this gives you the desired result.here i'm attaching the screen shot of execution..<a href=\"https://i.stack.imgur.com/gShOt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gShOt.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 49, "user_id": 7001540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1079cc32bec5b499499611fb98a2957?s=128&d=identicon&r=PG&f=1", "display_name": "Karna", "link": "https://stackoverflow.com/users/7001540/karna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2557, "favorite_count": 0, "accepted_answer_id": 47058837, "answer_count": 3, "score": 3, "last_activity_date": 1510970748, "creation_date": 1509548571, "last_edit_date": 1510970748, "question_id": 47057809, "link": "https://stackoverflow.com/questions/47057809/returning-an-array-of-pointers-from-a-function", "title": "Returning an array of pointers from a function", "body": "<p>I am trying to print the integer value of each character in a given string using a function. When I pass a string to this function, it converts each character in the given string to an integer and then saves it to a result array. I have also created an array of pointers which will hold the address of each character's corresponding integer. But when I return this array of pointers, I am not able to print all integer values correctly.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint *c2i(char *str); \n\nint main(){\n\n    char s[20];\n    int *p, i;\n    printf(\"Enter your string:\\n\");\n    scanf(\"%s\", s);\n    p=c2i(s);\n    for(i=0; i&lt;4; i++){\n        printf(\"\\n%d\\t%d\\n\", *p, p);\n        p++;\n    }\n\n    return 0;\n}\n\nint *c2i(char *str){\n\n    int i=0, result[20], *ptr[20];\n\n    while(*(str+i)!='\\0'){\n        result[i]=*(str+i) &amp; 0xff;\n        ptr[i]=&amp;result[i];\n        i++;\n    }\n    printf(\"%d %d %d %d %d %d %d %d\", *ptr[0], *ptr[1], *ptr[2], *ptr[3], ptr[0], ptr[1], ptr[2], ptr[3]);\n\n    return *ptr;\n}\n</code></pre>\n\n<p>I have included many <strong><code>printf</code></strong> statements just for debugging purposes. The output of the program when I try to run the code above is:</p>\n\n<blockquote>\n  <p>Enter your string:</p>\n  \n  <p>abcd</p>\n  \n  <p>97 98 99 100 6356588 6356592 6356596 6356600</p>\n  \n  <p>97                  6356588</p>\n  \n  <p>1999382056          6356592</p>\n  \n  <p>20                  6356596</p>\n  \n  <p>1                   6356600</p>\n</blockquote>\n\n<p>I am only getting the first value correctly when I print it in the <strong><code>main()</code></strong> function. When I increment the pointer and try to print the next values, I am getting garbage results. I can see that the address is the same but the values have been corrupted. What am I doing wrong here?</p>\n"}, {"tags": ["c", "pointers", "queue", "malloc"], "comments": [{"owner": {"reputation": 499, "user_id": 5339899, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/ebf68221eb3e8ff1037314f300217549?s=128&d=identicon&r=PG&f=1", "display_name": "TheQAGuy", "link": "https://stackoverflow.com/users/5339899/theqaguy"}, "edited": false, "score": 0, "creation_date": 1509548604, "post_id": 47057775, "comment_id": 81062847, "body": "It tests if you successfully allocated memory for <code>newPtr</code>. Its the same as <code>newPtr = malloc(sizeof(QUEUE_NODE));</code> and then <code>if(newPtr == NULL) {}</code>"}, {"owner": {"reputation": 3054, "user_id": 193848, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HWieK.jpg?s=128&g=1", "display_name": "Andrew Cottrell", "link": "https://stackoverflow.com/users/193848/andrew-cottrell"}, "edited": false, "score": 0, "creation_date": 1509640659, "post_id": 47057775, "comment_id": 81109702, "body": "@AliciaMay - I&#39;ve answered your initial question and your follow-up question below.  Please select an answer.  :)"}], "answers": [{"tags": [], "owner": {"reputation": 3054, "user_id": 193848, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HWieK.jpg?s=128&g=1", "display_name": "Andrew Cottrell", "link": "https://stackoverflow.com/users/193848/andrew-cottrell"}, "is_accepted": false, "score": 0, "last_activity_date": 1509640580, "last_edit_date": 1509640580, "creation_date": 1509548633, "answer_id": 47057834, "question_id": 47057775, "link": "https://stackoverflow.com/questions/47057775/enqueue-operation-code-interpretation-in-c-language/47057834#47057834", "title": "Enqueue operation code interpretation in c language", "body": "<p>It is checking to see if the <code>malloc()</code> succeeded.  If it returns <code>NULL</code> then the statement will evaluate to false, and trigger the <code>return false</code>.</p>\n\n<p>Logically speaking, here's a simple breakdown of how it works:</p>\n\n<p>Step 1: The <code>malloc()</code> fails to allocate memory and returns NULL, so the expression is now this:</p>\n\n<pre><code>if (!(newPtr = NULL))\n    return false;\n</code></pre>\n\n<p>Step 2: The <code>newPtr</code> is assigned, and its assigned value is used:</p>\n\n<pre><code>if (!(NULL))\n    return false;\n</code></pre>\n\n<p>Step 3: This is some C basic knowledge that people either love or hate.  In C, anything that evaluates to zero is considered logically <code>false</code>, and anything non-zero evaluates to logically <code>true</code>.  <code>NULL</code> is equivalent to zero, which means it is logically equivalent to <code>false</code>:</p>\n\n<pre><code>if (!(false))\n    return false;\n</code></pre>\n\n<p>Step 4: The <code>!</code> (the logical NOT operator) flips the <code>false</code> to <code>true</code>:</p>\n\n<pre><code>if (true)\n    return false;\n</code></pre>\n\n<p>Thus through these steps, if <code>malloc()</code> returns <code>NULL</code> that evaluates to <code>false</code>, and the <code>!</code> (logical NOT) changes the entire expression to <code>true</code>.  This in turn causes the function to return <code>false</code>, indicating failure.</p>\n\n<p>EDIT: To answer your additional question: <code>malloc()</code> will return NULL if you attempt to allocate too much memory, e.g. more than the system has available and/or more than the system will allow.  Go ahead and try it.  Run a loop that repeatedly allocates memory without freeing it and it will eventually return NULL.</p>\n"}, {"comments": [{"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "edited": false, "score": 0, "creation_date": 1509549373, "post_id": 47057838, "comment_id": 81063341, "body": "Downvoter please ..mention what&#39;s wrong? This answers what is asked by the user?"}], "tags": [], "owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "is_accepted": false, "score": 1, "last_activity_date": 1509549891, "last_edit_date": 1509549891, "creation_date": 1509548643, "answer_id": 47057838, "question_id": 47057775, "link": "https://stackoverflow.com/questions/47057775/enqueue-operation-code-interpretation-in-c-language/47057838#47057838", "title": "Enqueue operation code interpretation in c language", "body": "<p>It is checking if <code>malloc</code> failed or not. Not an issue with linked list. To give you a flavour, I am showing you an example of allocating n memory locations which will store <code>int</code>.</p>\n\n<pre><code>int *p = malloc(sizeof(int)*n);\nif( p == NULL )\n{\n    fprintf(stderr,\"%s\",\"error\");\n    exit(1);\n}\n</code></pre>\n\n<p>Here in your case it returns false when it can't allocate denoting that enqueue operation has failed.</p>\n\n<p>Also casting the <code>malloc</code> is not required. Don't do this - it's bad practice.</p>\n\n<p>Also whatever you allocate <code>free</code> it when you are done working with the allocated memory. That saves you from memory leak,</p>\n\n<pre><code>free(p);\np=NULL;\n</code></pre>\n\n<h3>Dissection of the line:-</h3>\n\n<pre><code>!(newPtr =\n(QUEUE_NODE*)malloc(sizeof(QUEUE_NODE)))\n</code></pre>\n\n<p>The value of assignment expression is the assigned value itself. So if this allocation returns <code>NULL</code> then <code>!NULL</code> will be condition in if block. Which will be true meaning that the malloc has failed and the enqueue operation will not be performed. (NULL is considered to be zero, that <code>!NULL</code> is something non-zero and anything nonzero in C is considered to be <code>true</code>)</p>\n\n<p>Same code can be written this way:-</p>\n\n<pre><code>QUEUE_NODE *newPtr = malloc(sizeof(QUEUE_NODE)));\nif(newPtr == NULL ){\n   return false;\n}\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 8813317, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d4d4f02f22290865b655d44a6ba4787a?s=128&d=identicon&r=PG&f=1", "display_name": "Alicia May", "link": "https://stackoverflow.com/users/8813317/alicia-may"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 159, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1509640580, "creation_date": 1509548432, "last_edit_date": 1509585655, "question_id": 47057775, "link": "https://stackoverflow.com/questions/47057775/enqueue-operation-code-interpretation-in-c-language", "title": "Enqueue operation code interpretation in c language", "body": "<p>This is Queue ADT and I have a question in the 'Enqueue' part..</p>\n\n<pre><code>//Queue ADT Type Defintions\n    typedef struct node\n        {\n        void* dataPtr;\n        struct node* next;\n        } QUEUE_NODE;\n    typedef struct\n        {\n        QUEUE_NODE* front;\n        QUEUE_NODE* rear;\n        int count;\n        } QUEUE;\n//Prototype Declarations\n    QUEUE* createQueue (void);\n    QUEUE* destroyQueue (QUEUE* queue);\n    bool dequeue (QUEUE* queue, void** itemPtr);\n    bool enqueue (QUEUE* queue, void* itemPtr);\n    bool queueFront (QUEUE* queue, void** itemPtr);\n    bool queueRear (QUEUE* queue, void** itemPtr);\n    int queueCount (QUEUE* queue);\n    bool emptyQueue (QUEUE* queue);\n    bool fullQueue (QUEUE* queue); \n//End of Queue ADT Definitions\n\n\nbool enqueue (QUEUE* queue, void* itemPtr)\n{\n//Local Definitions\nQUEUE_NODE* newPtr;\n//Statements\nif (!(newPtr =\n    (QUEUE_NODE*)malloc(sizeof(QUEUE_NODE))))\n    return false;\n\nnewPtr-&gt;dataPtr = itemPtr;\nnewPtr-&gt;next = NULL;\nif (queue-&gt;count == 0)\n// Inserting into null queue\n    queue-&gt;front = newPtr;\nelse\n    queue-&gt;rear-&gt;next = newPtr;\n\n(queue-&gt;count)++;\nqueue-&gt;rear = newPtr;\nreturn true;\n} // enqueue\n</code></pre>\n\n<p>Here, I wonder what does </p>\n\n<pre><code>!(newPtr =\n(QUEUE_NODE*)malloc(sizeof(QUEUE_NODE)))\n</code></pre>\n\n<p>this mean...</p>\n\n<p>I know that malloc creates dynamic memory but we haven't assign anything to newPtr yet, and how can we compare with memory pointer?? I assumed that this is the checker whether the queue is full or not.</p>\n\n<p>Thanks a lot..</p>\n\n<p>+) Now I understand the code.... Could somebody answer this, too? In what case does the memory assignment fail?</p>\n"}, {"tags": ["c", "http", "tcp", "header"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1509548943, "post_id": 47057653, "comment_id": 81063057, "body": "They must be there, in the TCP payload, surely?"}, {"owner": {"reputation": 37, "user_id": 8676315, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/871d50b17df07cadde3578838659fa55?s=128&d=identicon&r=PG&f=1", "display_name": "BOB", "link": "https://stackoverflow.com/users/8676315/bob"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1509549440, "post_id": 47057653, "comment_id": 81063380, "body": "I thought so to, put when I print each packets payload it is just the data and not the headers"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1509549573, "post_id": 47057653, "comment_id": 81063459, "body": "So you&#39;ve removed it."}, {"owner": {"reputation": 37, "user_id": 8676315, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/871d50b17df07cadde3578838659fa55?s=128&d=identicon&r=PG&f=1", "display_name": "BOB", "link": "https://stackoverflow.com/users/8676315/bob"}, "edited": false, "score": 0, "creation_date": 1509549896, "post_id": 47057653, "comment_id": 81063695, "body": "Would I start printing the data from packet - size of all the headers?"}], "answers": [{"tags": [], "owner": {"reputation": 16, "user_id": 8909999, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oO6FvpzesJs/AAAAAAAAAAI/AAAAAAAAANQ/IznMXm_2B3c/photo.jpg?sz=128", "display_name": "Caleo Reis Nascimento", "link": "https://stackoverflow.com/users/8909999/caleo-reis-nascimento"}, "is_accepted": false, "score": 0, "last_activity_date": 1512052184, "creation_date": 1512052184, "answer_id": 47575838, "question_id": 47057653, "link": "https://stackoverflow.com/questions/47057653/getting-http-header-from-packet-after-tcp-ip-and-ethernet-headers-removed/47575838#47575838", "title": "Getting HTTP header from packet after TCP, IP and Ethernet headers removed", "body": "<p>The http header is within the data obtained in the TCP packet, but you must convert this data correctly.</p>\n"}], "owner": {"reputation": 37, "user_id": 8676315, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/871d50b17df07cadde3578838659fa55?s=128&d=identicon&r=PG&f=1", "display_name": "BOB", "link": "https://stackoverflow.com/users/8676315/bob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1512052184, "creation_date": 1509548096, "question_id": 47057653, "link": "https://stackoverflow.com/questions/47057653/getting-http-header-from-packet-after-tcp-ip-and-ethernet-headers-removed", "title": "Getting HTTP header from packet after TCP, IP and Ethernet headers removed", "body": "<p>I am writing a packet sniffer and have the parsed the headers down to TCP, and was wondering how I would now go about getting the HTTP headers.</p>\n\n<p>I have tried printing the packet data at this point, however this does not contain the HTTP header.</p>\n\n<p>Any help would be appreciated.</p>\n"}, {"tags": ["c", "c-preprocessor", "array-initialization"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1509547706, "post_id": 47057462, "comment_id": 81062272, "body": "No, there is no easy way. C preprocessor is not supporting looping or recursion. There are some X-macro tricks, but they are not universal."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1509547981, "post_id": 47057462, "comment_id": 81062465, "body": "You could initialize the array programmatically with 3-4 lines of code."}, {"owner": {"reputation": 952, "user_id": 5548598, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/46ca4f3bb8b45761077cbfd9a6e9d0cf?s=128&d=identicon&r=PG&f=1", "display_name": "Taelsin", "link": "https://stackoverflow.com/users/5548598/taelsin"}, "edited": false, "score": 0, "creation_date": 1509548617, "post_id": 47057462, "comment_id": 81062852, "body": "Just out of curiosity, why not use a function?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1509548720, "post_id": 47057462, "comment_id": 81062910, "body": "You can do it with boost.preproceasor (yes you can use boost.preprocessor with C)."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1509560567, "post_id": 47057462, "comment_id": 81070399, "body": "One complicating factor is the null pointer for the last entry; it is different from the rest. Any scheme will need to account for that."}], "answers": [{"tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": false, "score": 1, "last_activity_date": 1509549292, "last_edit_date": 1509549292, "creation_date": 1509548378, "answer_id": 47057755, "question_id": 47057462, "link": "https://stackoverflow.com/questions/47057462/c-creating-an-initialisation-macro-for-an-array-of-structs/47057755#47057755", "title": "C - Creating an initialisation macro for an array of structs", "body": "<p>If you really need to do a initialisation rather than doing the initialisation programmatically the best you can do with macros is something like this:</p>\n\n<pre><code>#define TIMERINIT(a)      {.id = a, .next = &amp;_timer_llists[a] },\n#define END_TIMERINIT(a)  {.id = a, .next = 0 },\n\nTIMER_llist _timer_llists[] =\n{\n  TIMERINIT(1)\n  TIMERINIT(2)\n  TIMERINIT(3)\n  TIMERINIT(4)\n  ...\n  TIMERINIT(12)\n  END_TIMERINIT(13)\n};\n</code></pre>\n\n<p>It's not perfect but still better than writing everything by hand.</p>\n\n<hr>\n\n<p>Now the programmatic solution (that's the easiest and most flexible solution IMO):</p>\n\n<pre><code>#define NUMBER_ENTRIES 13\nTIMER_llist _timer_llists[NUMBER_ENTRIES];\n\nint main()\n{\n  for (int i = 0; i &lt; NUMBER_ENTRIES; i++)\n  {\n    _timer_llists[i].id = i + 1;\n    _timer_llists[i].next = &amp;_timer_llists[i + 1];\n  }\n  ...\n}\n</code></pre>\n\n<p>For <code>NUMBER_ENTRIES</code> larger than approximately 8, the generated code will most likely be shorter with this solution.</p>\n\n<hr>\n\n<p>Another approach would be to write a special program that generates the initialisation table by writing it into a .h file and include that .h file into your .c file. Your build process should then call that special program prior the comnpilation.</p>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 1, "last_activity_date": 1509549414, "creation_date": 1509549414, "answer_id": 47058104, "question_id": 47057462, "link": "https://stackoverflow.com/questions/47057462/c-creating-an-initialisation-macro-for-an-array-of-structs/47058104#47058104", "title": "C - Creating an initialisation macro for an array of structs", "body": "<p>You can use \"X-macros\". It is not necessarily an improvement over hard-coding everything, but it would look like this:</p>\n\n<pre><code>#define TIMER_INIT_LIST \\\n  X(1)   \\\n  X(2)   \\\n  X(3)   \\\n  X(4)   \\\n  X(5)   \\\n  X(6)   \\\n  X(7)   \\\n  X(8)   \\\n  X(9)   \\\n  X(10)  \\\n  X(11)  \\\n  X(12)  \\\n  X(13)  \\\n\nint main()\n{\n  TIMER_llist _timer_llists[] =\n  {\n    #define X(n) [n-1] = {.id = n, .next = &amp;_timer_llists[n] },\n      TIMER_INIT_LIST\n    #undef X\n  };\n\n  return 0;\n} \n</code></pre>\n\n<p>At the same time, I improved the code by using array index designated initializers, to ensure data integrity even if the X macro list is modified or unsorted. </p>\n\n<p>The macros expand to something like this:</p>\n\n<pre><code>[0] = {.id = 1, .next = .next = &amp;_timer_llists[1] },\n[1] = {.id = 2, .next = .next = &amp;_timer_llists[2] },\n...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2336, "user_id": 3936002, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/utGjG.png?s=128&g=1", "display_name": "H Walters", "link": "https://stackoverflow.com/users/3936002/h-walters"}, "is_accepted": true, "score": 3, "last_activity_date": 1509589824, "last_edit_date": 1509589824, "creation_date": 1509587874, "answer_id": 47066389, "question_id": 47057462, "link": "https://stackoverflow.com/questions/47057462/c-creating-an-initialisation-macro-for-an-array-of-structs/47066389#47066389", "title": "C - Creating an initialisation macro for an array of structs", "body": "<p>If you use boost preprocessor (see n.m.'s comment), you can simply do this:</p>\n\n<pre><code>#include &lt;boost/preprocessor/enum.hpp&gt;\n#include &lt;boost/preprocessor/arithmetic/inc.hpp&gt;\n#include &lt;boost/preprocessor/arithmetic/dec.hpp&gt;\n\n#define TIMER_ENTRY(_, n, data) \\\n   { .id = BOOST_PP_INC(n), .next = &amp;data[BOOST_PP_INC(n)] }\n#define DECL_TIMER_LLIST(NAME_, COUNT_) \\\n   TIMER_llist NAME_[] = \\\n   { \\\n      BOOST_PP_ENUM(BOOST_PP_DEC(COUNT_), TIMER_ENTRY, NAME_) \\\n      , { .id = COUNT_, .next = 0 } \\\n   }\n</code></pre>\n\n<p><a href=\"http://www.boost.org/doc/libs/1_65_1/libs/preprocessor/doc/ref/enum.html\" rel=\"nofollow noreferrer\"><code>BOOST_PP_ENUM</code></a> is almost everything you need.</p>\n\n<p><code>BOOST_PP_INC</code> and <code>BOOST_PP_DEC</code> supplement the special start case (start count at <code>1</code> instead of default <code>0</code>)/end case (count up to <code>n-1</code> then add a different line).</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/c2019d712ce902a1\" rel=\"nofollow noreferrer\">Here's a \"live\" sample.</a></p>\n\n<p>(FYI, unless you're programming on hardware you found in a time capsule, I wouldn't even take the overhead of programmatic alternatives into consideration when comparing approaches).</p>\n"}], "owner": {"reputation": 161, "user_id": 8868682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cdee0740030935980754045e2d6aeb0?s=128&d=identicon&r=PG&f=1", "display_name": "engelant", "link": "https://stackoverflow.com/users/8868682/engelant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 649, "favorite_count": 1, "accepted_answer_id": 47066389, "answer_count": 3, "score": 2, "last_activity_date": 1509589824, "creation_date": 1509547375, "last_edit_date": 1509580547, "question_id": 47057462, "link": "https://stackoverflow.com/questions/47057462/c-creating-an-initialisation-macro-for-an-array-of-structs", "title": "C - Creating an initialisation macro for an array of structs", "body": "<p>I would like to do this with a macro:</p>\n\n<pre><code>typedef struct _TIMER_llist {\n    struct _TIMER_llist *next;\n    uint32_t time;\n    const int id;\n} TIMER_llist;\n\nTIMER_llist _timer_llists[] =\n{\n    { .id = 1, .next = &amp;_timer_llists[1] },\n    { .id = 2, .next = &amp;_timer_llists[2] },\n    { .id = 3, .next = &amp;_timer_llists[3] },\n    { .id = 4, .next = &amp;_timer_llists[4] },\n    { .id = 5, .next = &amp;_timer_llists[5] },\n    { .id = 6, .next = &amp;_timer_llists[6] },\n    { .id = 7, .next = &amp;_timer_llists[7] },\n    { .id = 8, .next = &amp;_timer_llists[8] },\n    { .id = 9, .next = &amp;_timer_llists[9] },\n    { .id = 10, .next = &amp;_timer_llists[10] },\n    { .id = 11, .next = &amp;_timer_llists[11] },\n    { .id = 12, .next = &amp;_timer_llists[12] },\n    { .id = 13, .next = 0 } };\n\n//This won't work, because const .id\nTIMER_llist _timer_llists[1];\nvoid init() {\n    _timer_llists[0].id = 1;\n    _timer_llists[0].next = 0;\n}\n</code></pre>\n\n<p>Instead of writing a line for each buffer entry I would like to use a</p>\n\n<pre><code>#define NUMBER_ENTRIES 13  \n</code></pre>\n\n<p>as this gets really unhandy, if I want to do 64 entries or so...</p>\n\n<p>Unfortunatly I don't have any experience with the C preprocessor, so I'm curious if:  </p>\n\n<ol>\n<li>there is a better non macro solution</li>\n<li>there is an easy way with gcc to accomplish this macro operation</li>\n</ol>\n\n<p>Besides, and that is more a theoretical aspect, is execution speed. AfaIk the example in the first post would be just a memcpy(.data[?], _timer_llists, sizeof(_timer_llists)), while a programmatical approach would require at least a counter, maybe an if statement for the last case, and a function overhead (ok, maybe inline). On the other hand this would save space in .data.</p>\n\n<p>In this particular case I am using gcc-avr, but this question came to my mind repeatedly and I would like to have an universal approach.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 3, "creation_date": 1509547334, "post_id": 47057438, "comment_id": 81062026, "body": "This is not C. All your iniitializations should not compile. <code>{}</code> is only allowed in C++, but generally the compiler tries to determine the size of incomplete arrays (those with <code>[]</code>) from the initializer."}, {"owner": {"reputation": 1, "user_id": 8868786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe18d85f6be77196b585ba19d697df54?s=128&d=identicon&r=PG&f=1", "display_name": "locked_code", "link": "https://stackoverflow.com/users/8868786/locked-code"}, "reply_to_user": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1509547447, "post_id": 47057438, "comment_id": 81062113, "body": "I tried with just char name_of_string[]; but it didn&#39;t work, so I&#39;ve put the {} in order to make it works."}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 2, "creation_date": 1509547507, "post_id": 47057438, "comment_id": 81062145, "body": "No, it cannot be compiled perfectly. You should have got a lot of diagnostics. (Or you compiled it as C++?). Repair them first."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 1, "creation_date": 1509547574, "post_id": 47057438, "comment_id": 81062182, "body": "which compiler did you use? even if you fix to <code>char cognome[] = &quot;&quot;;</code>, you didn&#39;t specify any space for the array so it won&#39;t work"}, {"owner": {"reputation": 1, "user_id": 8868786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe18d85f6be77196b585ba19d697df54?s=128&d=identicon&r=PG&f=1", "display_name": "locked_code", "link": "https://stackoverflow.com/users/8868786/locked-code"}, "edited": false, "score": 0, "creation_date": 1509547677, "post_id": 47057438, "comment_id": 81062255, "body": "Basically I&#39;m using the gcc compiler. So the problem is that I have to specify the size of each array I declared?"}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1509547832, "post_id": 47057438, "comment_id": 81062354, "body": "Yes, or give it an initializer that has enough elements. Otherwise the compiler can&#39;t know what you need. But I didn&#39;t check if this are all your errors. If you still have some, please come back in a new question with a minimal example that compiles cleanly and that shows your problem. Also it would be nice if you could indent code that you are posting here."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1509547859, "post_id": 47057438, "comment_id": 81062375, "body": "BTW: not directly related to your problem: you probably don&#39;t want to read month, day and year as a string."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 3, "creation_date": 1509548039, "post_id": 47057438, "comment_id": 81062494, "body": "Your code <a href=\"https://ideone.com/pMu3xN#cmperr\" rel=\"nofollow noreferrer\">does not compile</a>. You may be using a broken compiler, or a compiler for a different language, or a compiler with too lax default settings. No one knows until you share relevant details about your environment."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1509548369, "post_id": 47057438, "comment_id": 81062698, "body": "If you are using gcc, use compilation  flags -Wall -pedantic -Werror -std=c99 (or -std=c11 if you want to). They are an absolute must."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8868786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe18d85f6be77196b585ba19d697df54?s=128&d=identicon&r=PG&f=1", "display_name": "locked_code", "link": "https://stackoverflow.com/users/8868786/locked-code"}, "edited": false, "score": 0, "creation_date": 1509548233, "post_id": 47057473, "comment_id": 81062614, "body": "Well, it seems that now it works. I didn&#39;t think I had to specify the length of each array because I thought the scanf automatically gave it to the array after writing it in input. Anyway, in order to answer about your BTW: actually I need them as strings, that&#39;s why they are of that type. Thanks again!"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1509553841, "post_id": 47057473, "comment_id": 81066310, "body": "Learn also about using <code>%ms</code> in <code>scanf</code>, or to use <a href=\"http://man7.org/linux/man-pages/man3/getline.3.html\" rel=\"nofollow noreferrer\">getline</a>"}], "tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": false, "score": 2, "last_activity_date": 1509551328, "last_edit_date": 1509551328, "creation_date": 1509547427, "answer_id": 47057473, "question_id": 47057438, "link": "https://stackoverflow.com/questions/47057438/printf-takes-only-the-last-scanf/47057473#47057473", "title": "Printf takes only the last scanf", "body": "<p>You need to specify a maximum length for each of your strings.</p>\n\n<p>For example:</p>\n\n<pre><code>char cognome[30];   // maximum lenght of cognome is 30-1 (1 for the NUL terminator)\nchar nome[30];      // etc.\n</code></pre>\n\n<p>And then call <code>scanf</code> like this:</p>\n\n<pre><code>scanf(\"%29s\", cognome);\n</code></pre>\n\n<p>So you won't get a buffer overflow if the user enters a name longer than 29 chars.</p>\n"}], "owner": {"reputation": 1, "user_id": 8868786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe18d85f6be77196b585ba19d697df54?s=128&d=identicon&r=PG&f=1", "display_name": "locked_code", "link": "https://stackoverflow.com/users/8868786/locked-code"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1509551328, "creation_date": 1509547276, "last_edit_date": 1509547385, "question_id": 47057438, "link": "https://stackoverflow.com/questions/47057438/printf-takes-only-the-last-scanf", "title": "Printf takes only the last scanf", "body": "<p>I have this code here:</p>\n\n<pre><code>int main() {\nchar cognome[] = {};\nchar nome[] = {} ;\nchar sesso[] = {};\nchar giorno_n[] = {};\nchar mese_n[] = {};\nchar anno_n[] = {};\nchar comune[] = {};\nchar lettera[] = {};\nint i;\n\n\nprintf(\"Programma che calcola il codice fiscale.\\n\");\nprintf(\"Inserisci il cognome: \");\nscanf(\"%s\", cognome);\nstrupr(cognome);\nprintf(\"Inserisci il nome: \");\nscanf(\"%s\", nome);\nstrupr(nome);\nprintf(\"Inserisci il sesso: \");\nscanf(\"%s\", sesso);\nstrupr(sesso);\nprintf(\"Inserisci il giorno di nascita: \");\nscanf(\"%s\", giorno_n);\nprintf(\"Inserisci il mese di nascita: \");\nscanf(\"%s\", mese_n);\nprintf(\"Inserisci l'anno di nascita: \");\nscanf(\"%s\", anno_n);\nprintf(\"Inserisci il comune di nascita: \");\nscanf(\"%s\", comune);\nprintf(\"Il comune \u00e8: %s\", comune);\n\nprintf(\"%s\", cognome);\n\n\ngetch();\n\n\n}`\n</code></pre>\n\n<p>The problem with this code is that the last <code>printf(\"%s\", cognome)</code> doesn't take the input value of the <code>scanf(\"%s\", cognome)</code>, but it takes the value of the last <code>scanf(\"%s\", comune)</code>, and I really don't understand why.</p>\n"}, {"tags": ["c"], "answers": [{"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1509548340, "post_id": 47057424, "comment_id": 81062684, "body": "It is not confusing the compiler; it is confusing the coder.  Using a variable with the same name as a function you plan to call leads to problems \u2014 while the variable is in scope, you can&#39;t call the function by name."}, {"owner": {"reputation": 155, "user_id": 7071193, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/K9woC.jpg?s=128&g=1", "display_name": "jesusjimsa", "link": "https://stackoverflow.com/users/7071193/jesusjimsa"}, "edited": false, "score": 0, "creation_date": 1509548403, "post_id": 47057424, "comment_id": 81062725, "body": "Than you, it fixed it."}], "tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": true, "score": 4, "last_activity_date": 1509547249, "creation_date": 1509547249, "answer_id": 47057424, "question_id": 47057353, "link": "https://stackoverflow.com/questions/47057353/error-called-object-type-ssize-t-aka-long-is-not-a-function-or-function-p/47057424#47057424", "title": "error: called object type &#39;ssize_t&#39; (aka &#39;long&#39;) is not a function or function pointer", "body": "<p>You have a variable named <code>read</code> which is confusing compiler with the function <code>read(2)</code> when you call <code>read(2)</code>. Rename your variable <code>read</code> to something else.</p>\n"}], "owner": {"reputation": 155, "user_id": 7071193, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/K9woC.jpg?s=128&g=1", "display_name": "jesusjimsa", "link": "https://stackoverflow.com/users/7071193/jesusjimsa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 362, "favorite_count": 0, "accepted_answer_id": 47057424, "answer_count": 1, "score": 1, "last_activity_date": 1509547249, "creation_date": 1509547048, "question_id": 47057353, "link": "https://stackoverflow.com/questions/47057353/error-called-object-type-ssize-t-aka-long-is-not-a-function-or-function-p", "title": "error: called object type &#39;ssize_t&#39; (aka &#39;long&#39;) is not a function or function pointer", "body": "<p>I'm not very experienced in C programming and I'm trying to write a program using pipes. The thing is that when I try to compile it, it gives me a strange error I can't understand, even by reading other similar questions in Stackoverflow.</p>\n\n<p>The errors are the next ones:</p>\n\n<pre><code>ejercicio.c:91:8: error: called object type 'ssize_t' (aka 'long') is not a function or function pointer\n                    read(tuberiaCom[0], login, sizeof(int));\n                    ~~~~^\nejercicio.c:103:8: error: called object type 'ssize_t' (aka 'long') is not a function or function pointer\n                        read(tuberiaCom[0], *checkuser, 256);\n</code></pre>\n\n<p>And the affected code is this one:</p>\n\n<pre><code>int main(){\n    int tuberiaCom[2];\n    int fduser;\n    int login = 0;\n    char username[256];\n    char answer[1024];\n    char checkuser[256];\n    char command[64];\n    char program[16];\n    char options[48];\n    char *line = NULL;\n    pid_t familia;\n    size_t len = 0;\n    ssize_t read;\n\n    if(pipe(tuberiaCom) == -1){\n        fprintf(stderr, \"Pipe error\\n\");\n        exit(1);\n    }\n\n    switch(familia = fork()){\n        case -1:\n            fprintf(stderr, \"Fork error\\n\");\n            exit(1);\n            break;\n        case 0:\n            scanf(\"Please, write your username %s\", username);\n\n            write(tuberiaCom[1], &amp;username, strlen(username));\n            read(tuberiaCom[0], login, sizeof(int));    /////////Line 91\n\n            if(login == 1){\n                printf(\"User %s exists, you can continue\", username);\n            }\n            else{\n                printf(\"There is no user called %s, the program will finnish\", username);\n                exit(1);\n            }\n\n            break;\n        default:\n            read(tuberiaCom[0], *checkuser, 256);    /////////Line 103\n            fduser = open(\"users.txt\", O_RDONLY);\n\n            while ((read = getline(&amp;line, &amp;len, fduser)) != -1){    \n                if(*line == *checkuser){\n                    login = 1;\n                    break;\n                }\n            }\n\n            write(tuberiaCom[1], &amp;login, sizeof(int));\n\n            break;\n    }\n    ......\n</code></pre>\n"}, {"tags": ["c", "function", "subroutine"], "comments": [{"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 2, "creation_date": 1509545320, "post_id": 47056768, "comment_id": 81060572, "body": "What happens when you try it?"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 4, "creation_date": 1509545325, "post_id": 47056768, "comment_id": 81060577, "body": "I imagine that using <code>pow</code> is considered cheating"}, {"owner": {"reputation": 83, "user_id": 8868593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fed64ae28528b532f6846f3940d40145?s=128&d=identicon&r=PG&f=1", "display_name": "Teorema", "link": "https://stackoverflow.com/users/8868593/teorema"}, "edited": false, "score": 0, "creation_date": 1509545416, "post_id": 47056768, "comment_id": 81060667, "body": "Nothing happens if I run it because I have only to write a function and not the whole program (including main function etc.)"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1509545417, "post_id": 47056768, "comment_id": 81060668, "body": "Moreover it will give some pretty unexpected results for some numbers..."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1509545453, "post_id": 47056768, "comment_id": 81060693, "body": "@Teorema Then write the full program! Do you expect others to do it for you?"}, {"owner": {"reputation": 6254, "user_id": 2261424, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a0beda634f65f29aace865be9504e5e6?s=128&d=identicon&r=PG", "display_name": "AntonH", "link": "https://stackoverflow.com/users/2261424/antonh"}, "edited": false, "score": 1, "creation_date": 1509545456, "post_id": 47056768, "comment_id": 81060696, "body": "<code>pow</code> returns a double, so probably not great to cast to an int. I&#39;m supposing that this was a homework assignment, so it can go one of 2 ways. Either you&#39;ll be good because you learned that libraries exist, or you&#39;ll fail because you didn&#39;t learn how to think to resolve a code request."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1509545522, "post_id": 47056768, "comment_id": 81060738, "body": "Welcome to stackoverflow.com. Please take some time to read <a href=\"http://stackoverflow.com/help\">the help pages</a>, especially the sections named <a href=\"http://stackoverflow.com/help/on-topic\">&quot;What topics can I ask about here?&quot;</a> and <a href=\"http://stackoverflow.com/help/dont-ask\">&quot;What types of questions should I avoid asking?&quot;</a>. Also please <a href=\"http://stackoverflow.com/tour\">take the tour</a> and <a href=\"http://stackoverflow.com/help/how-to-ask\">read about how to ask good questions</a>. Lastly please learn how to create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a>."}, {"owner": {"reputation": 30168, "user_id": 5612562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gzBQY.jpg?s=128&g=1", "display_name": "msc", "link": "https://stackoverflow.com/users/5612562/msc"}, "edited": false, "score": 0, "creation_date": 1509545533, "post_id": 47056768, "comment_id": 81060751, "body": "<a href=\"https://stackoverflow.com/questions/29787310/does-pow-work-for-int-data-type-in-c\" title=\"does pow work for int data type in c\">stackoverflow.com/questions/29787310/&hellip;</a>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1509545631, "post_id": 47056768, "comment_id": 81060830, "body": "&quot;Is my code correct?&quot;  Not portable.  <code>power = lrint(pow(b,e));</code> would work yet an integer only solution would be better."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 1, "creation_date": 1509545882, "post_id": 47056768, "comment_id": 81061033, "body": "Input values...?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 6, "creation_date": 1509545993, "post_id": 47056768, "comment_id": 81061105, "body": "You don&#39;t call the <code>funzione_potenza</code>. Therefore the content of the <code>potenza</code> variable is indeterminate."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1509546006, "post_id": 47056768, "comment_id": 81061114, "body": "Replace <code>potenza = pow(b,e);</code> with <code>double y = pow(b,e); potenza = y; printf(&quot;.20e %d\\n&quot;, y, potenza);</code> to gain insight as to what is wrong."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1509546731, "post_id": 47056768, "comment_id": 81061587, "body": "@Teorema I suppose this is a homework (it&#39;s OK to ask questions about homework if you have difficulties with the code you have written). What is the exact requirement of the homework?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1509546967, "post_id": 47056768, "comment_id": 81061765, "body": "@Teorema however the answer I posted is may not be what your teacher expects. Maybe he wants you to create your own &quot;power&quot; function  without callign the built-in <code>pow</code> function."}], "answers": [{"comments": [{"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "edited": false, "score": 0, "creation_date": 1509545730, "post_id": 47056874, "comment_id": 81060911, "body": "Come on downvoter I expected a better one. Atleast give a review of what&#39;s wrong? :)"}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "edited": false, "score": 0, "creation_date": 1509546102, "post_id": 47056874, "comment_id": 81061173, "body": "I don&#39;t want to get an upvote --but at least let me know what I am doing wrong? Is it my answering bothering someone? Or is it tecnical issue? Because I am saying the same thing as the other answers posted here."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1509546350, "post_id": 47056874, "comment_id": 81061315, "body": "NMDV, yet <code>pow(0, 1)</code> unnecessarily fails.  Also solution is weak as it takes <code>e</code> iterations when a <code>log(e)</code> solution is easy to code.  It unnecessarily uses <code>long</code>, when OP&#39;s goal is <code>int</code>."}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1509546489, "post_id": 47056874, "comment_id": 81061422, "body": "@chux.: Yes ok..I was editing that..when I answer here I generally try to give the incremental approach to the solution...first simple to more complicated efficient. And yes...thanks for the support..I don&#39;t want to know the faults to get an upvote later....but if you downvote giving the user to modify his/her answer is a great thing. Thanks for that. I am always for changing my answer to make it better."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1509546845, "post_id": 47056874, "comment_id": 81061665, "body": "NMDV either but I can guess on a number of reasons. a) How should your code be &quot;simpler than just <code>pow</code> ? b) You change function signature c) you change function name d) You don&#39;t handle <code>b</code> equal zero."}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "reply_to_user": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1509547018, "post_id": 47056874, "comment_id": 81061805, "body": "@4386427.: It&#39;s not simpler but the realization is much more easier. That exponentiation is nothing other than series of multiplication I will edit the line because yes it leads people to think what I didnt mean."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1509547118, "post_id": 47056874, "comment_id": 81061882, "body": "<code>pow(0,0)</code> is <a href=\"http://www.askamathematician.com/2010/12/q-what-does-00-zero-raised-to-the-zeroth-power-equal-why-do-mathematicians-and-high-school-teachers-disagree/\" rel=\"nofollow noreferrer\">often considered</a> <code>1</code> and not <code>0</code> like this code."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1509547154, "post_id": 47056874, "comment_id": 81061909, "body": "@coderredoc - I don&#39;t care how hard it is to implement the <code>pow</code>cause someone has already done that for me. So for me it is simpler to use <code>pow</code> than writing my own function ;-) There could be other reasons for writing my own function but to me &quot;simpler&quot; is not a reason"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1509548384, "post_id": 47056874, "comment_id": 81062709, "body": "@4386427 Note that simplistic application of the <code>double</code> function <code>pow()</code> for integer math has <a href=\"https://stackoverflow.com/questions/47056768/create-a-function-that-return-the-pow-be/47056874?noredirect=1#comment81062247_47057172\">implementation concerns</a>."}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1509548531, "post_id": 47056874, "comment_id": 81062797, "body": "@chux.: That&#39;s why check my edit where I said that don&#39;t do that."}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1509549194, "post_id": 47056874, "comment_id": 81063231, "body": "@chux.: Is there anything I can do to modify the answer regarding what you said? I have mentioned that point"}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1509549974, "post_id": 47056874, "comment_id": 81063736, "body": "@chux.: Would it be possible for you to comment on the answer?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1509550941, "post_id": 47056874, "comment_id": 81064369, "body": "coderredoc: My <a href=\"https://stackoverflow.com/questions/47056768/create-a-function-that-return-the-pow-be/47056874?noredirect=1#comment81062709_47056874\">comment</a> was to 4386427. Good to advise against direct use of <code>pow()</code>.  Some  <code>mpow()</code> concerns.   1) It is problematic when <code>b &lt; -1</code>. (not that many care)  2) problem when <code>b == -1</code> due to <code>INT_MAX&#47;b</code> overflow (again, not that many care) 3) The comment about OF with <code>res*b</code> also applies to <code>b*b</code>."}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1509551084, "post_id": 47056874, "comment_id": 81064468, "body": "@chux.: 3) I have mentioned...in comment. It can always be checked via a function... .."}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1509552363, "post_id": 47056874, "comment_id": 81065355, "body": "@chux.: I will modify the answer and let you know"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1509562988, "post_id": 47056874, "comment_id": 81071671, "body": "Seems to work OK and reasonable efficient for many typical values although it does unnecessarily fail when <code>checkIfOverflown(b, b)</code> is true yet the loop did not need to perform that multiplication because the loop would have ended due to small <code>e</code>.  It also reports  <code>mpow(-1, -1) --&gt; 1</code> when <code>-1</code> is expected.  IMO, the exponent should be <code>unsigned</code> or the function specified to be UB with negative <code>e</code>.  For a good review, consider <a href=\"https://codereview.stackexchange.com\">codereview.stackexchange.com</a>"}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1509563180, "post_id": 47056874, "comment_id": 81071767, "body": "@chux.: I can make the necessary changes now..you have given a great feedback"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1509563961, "post_id": 47056874, "comment_id": 81072169, "body": "try <code>mpow(3,16), mpow(3,19)</code>  For further review, create an account at codereview.stackexchange.com"}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1509564091, "post_id": 47056874, "comment_id": 81072245, "body": "@chux.: It will overflow...that;s why I should use the return type of <code>long</code>..the arguments to be long..to give a more high range..changing it to long will give a broader range."}], "tags": [], "owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "is_accepted": false, "score": -1, "last_activity_date": 1509563205, "last_edit_date": 1509563205, "creation_date": 1509545524, "answer_id": 47056874, "question_id": 47056768, "link": "https://stackoverflow.com/questions/47056768/create-a-function-that-return-the-pow-be/47056874#47056874", "title": "Create a function that return the pow b^e", "body": "<p>My intention was to show the way you can realize that but that's basically reinventing the wheel so not recommended. Here I have shown the rough idea of how you can try to write a power function. </p>\n\n<p>Alternative way to realize that would be</p>\n\n<pre><code>int mpow(int b, int e) {\n    if (e &lt;= -1) {\n        fprintf(stderr, \"mpow:(b: integer, e:non-negative integer )\");\n        exit(1);\n    }\n    if (e == 0) return 1;\n    if (b == 0) return 0;\n    int ans = 1;\n    for (int i = 1; i &lt;= e; i++) {\n        if (!checkIfOverflown(ans, b)) ans = ans * b;\n        else {\n            fprintf(stderr, \"%s\\n\", \"overflow in multiplication\");\n            exit(1);\n        }\n\n    }\n    return ans;\n\n}\n</code></pre>\n\n<p>As <code>pow</code> returns <code>double</code> you shouldn't cast it to integer( why do you want to lose precision).</p>\n\n<p>And why wrap <code>pow</code> in function? You can use it directly.</p>\n\n<h3>Is my function correct?</h3>\n\n<p>This function is correct as long as the integer doesn't mess it up by spilling up things. For small value of <code>b</code>,<code>e</code> it works.</p>\n\n<p>Also a simple more effective way to do this will be</p>\n\n<pre><code>int mpow(int b, int e) {\n    int res = 1, flag = 0;\n    if (e &lt;= -1) {\n        fprintf(stderr, \"mpow:(b: integer, e:non-negative integer )\");\n        exit(1);\n    }\n    while (e &gt; 0) {\n        if (e % 2 == 1) {\n            if (!checkIfOverflown(res, b))\n                res = (res * b);\n            else {\n                flag = 1;\n                break;\n            }\n        }\n        if (!checkIfOverflown(b, b))\n            b = (b * b);\n        else {\n            flag = 1;\n            break;\n        }\n        e /= 2;\n    }\n    if( flag ){\n        fprintf(stderr, \"%s\\n\", \"overflow in multiplication\");\n        exit(1);\n    }\n    return res;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1509545744, "post_id": 47056878, "comment_id": 81060920, "body": "Although what this answer says is true, it doe not answer the post &quot;is my function correct?&quot;"}], "tags": [], "owner": {"reputation": 63, "user_id": 5115600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17e60e8b0378526af27a2a21004839cc?s=128&d=identicon&r=PG&f=1", "display_name": "sudha", "link": "https://stackoverflow.com/users/5115600/sudha"}, "is_accepted": false, "score": 2, "last_activity_date": 1509545538, "creation_date": 1509545538, "answer_id": 47056878, "question_id": 47056768, "link": "https://stackoverflow.com/questions/47056768/create-a-function-that-return-the-pow-be/47056878#47056878", "title": "Create a function that return the pow b^e", "body": "<p>You don't need a function to invoke the inbuilt pow function. If you are trying to write a function of your own, try to build a solution with loop or recursion.  </p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 8778812, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Lhd3rk0A7jk/AAAAAAAAAAI/AAAAAAAAC4g/yKvoG9EwTNQ/photo.jpg?sz=128", "display_name": "Vishal Keshav", "link": "https://stackoverflow.com/users/8778812/vishal-keshav"}, "edited": false, "score": 0, "creation_date": 1509546856, "post_id": 47057085, "comment_id": 81061676, "body": "@chux yes, agreed."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1509546869, "post_id": 47057085, "comment_id": 81061693, "body": "Weakness: false when <code>e &lt; -1</code> .  Perhaps use <code>unsigned  e</code>?  (early comment removed as to double check things)"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1509547749, "post_id": 47057085, "comment_id": 81062308, "body": "An iterative solution rather than a recursive one would be more effcient."}], "tags": [], "owner": {"reputation": 1, "user_id": 8778812, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Lhd3rk0A7jk/AAAAAAAAAAI/AAAAAAAAC4g/yKvoG9EwTNQ/photo.jpg?sz=128", "display_name": "Vishal Keshav", "link": "https://stackoverflow.com/users/8778812/vishal-keshav"}, "is_accepted": false, "score": 0, "last_activity_date": 1509546133, "creation_date": 1509546133, "answer_id": 47057085, "question_id": 47056768, "link": "https://stackoverflow.com/questions/47056768/create-a-function-that-return-the-pow-be/47057085#47057085", "title": "Create a function that return the pow b^e", "body": "<p>Assuming you are free to use math library, the method will return correct answer unless the number fits in \"int\". Otherwise, consider using \"long long int\" for larger numbers.</p>\n\n<p>In case you are not allowed to use math library, here is a correct implementation:</p>\n\n<pre><code>long long int power(int b, int e){\n          if(e==0){\n                 return 1;\n           }\n           else if(e%2==1){\n                 long long int temp = power(b,e/2);\n                 return temp*temp*b;\n           }\n           else{\n                 long long int temp = power(b,e/2);\n                 return temp*temp;\n           }\n }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1509546598, "post_id": 47057172, "comment_id": 81061498, "body": "I doubt their teacher would accept this as a valid answer to their homework though - they&#39;re meant to write their own version of <code>pow</code>"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 2, "creation_date": 1509546659, "post_id": 47057172, "comment_id": 81061537, "body": "@ChrisTurner maybe, but the OP didn&#39;t specify anything. And the main problem was the function not being called."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1509547671, "post_id": 47057172, "comment_id": 81062247, "body": "<code>pow(b, e);</code> returns a <code>double</code>.  Many <code>pow()</code> implementations return a <code>double</code> that is not an exact mathematical correct result for integer arguments, yet only <i>very</i> near it - and sometime just less.  The assignment of a <code>double</code> to <code>int</code> truncates the fraction resulting in an off-by-one result.  Not portable code and difficult to insure it is correct on a given platform."}], "tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": true, "score": 0, "last_activity_date": 1509546425, "creation_date": 1509546425, "answer_id": 47057172, "question_id": 47056768, "link": "https://stackoverflow.com/questions/47056768/create-a-function-that-return-the-pow-be/47057172#47057172", "title": "Create a function that return the pow b^e", "body": "<p>There are two issues:</p>\n\n<p>First of all you're getting a garbage value because you never call the <code>funzione_potenza</code> function.</p>\n\n<pre><code>int main()\n{\n  int b, e, potenza;\n\n  printf(\"Inserisci la base: \");\n  scanf(\"%d\", &amp;b);\n\n  printf(\"Inserisci l'esponente: \");\n  scanf(\"%d\", &amp;e);\n\n  potenza = funzione_potenza(b, e);       // &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; insert this line\n\n  printf(\"La potenza e' %d\", potenza);\n\n  return 0;\n}\n</code></pre>\n\n<p>Secondly you don't even need the <code>funzione_potenza</code> which is just a wrapper around <code>pow</code>, you can call <code>pow</code> directly:</p>\n\n<pre><code>...\nscanf(\"%d\", &amp;e);\n\npotenza = pow(b, e);\n\nprintf(\"La potenza e' %d\", potenza);\n...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5460126, "user_type": "registered", "profile_image": "https://graph.facebook.com/826949267417954/picture?type=large", "display_name": "Mohmmed Asif", "link": "https://stackoverflow.com/users/5460126/mohmmed-asif"}, "is_accepted": false, "score": 0, "last_activity_date": 1509566223, "creation_date": 1509566223, "answer_id": 47062706, "question_id": 47056768, "link": "https://stackoverflow.com/questions/47056768/create-a-function-that-return-the-pow-be/47062706#47062706", "title": "Create a function that return the pow b^e", "body": "<p>you can implement power function without using \"pow\"<a href=\"https://www.tutorialspoint.com/c_standard_library/c_function_pow.htm\" rel=\"nofollow noreferrer\">usage of \"pow\"-function</a> the built-in function as well below is the code.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n//function prototype\nint funzione_potenza (int b, int e);\n\nint main ()\n{\n  int b, e, potenza;\n\n  printf(\"Inserisci la base: \");\n  scanf(\"%d\",&amp;b);\n\n  printf(\"Inserisci l'esponente: \");\n  scanf(\"%d\",&amp;e);\n\n  potenza = funzione_potenza (b,e);\n\n  printf(\"La potenza e' %d\",potenza);\n\n  return 0;\n }\n\n int funzione_potenza (int b, int e)\n {\n    //local variables\n    int i, potenza = b; //initialize potenza with b\n\n    for (i = 0; i &lt; e; i++ )\n    {\n       potenza = potenza * e; //multiply n-number of times to get the power\n    } \n\n    return potenza;\n }\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 8868593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fed64ae28528b532f6846f3940d40145?s=128&d=identicon&r=PG&f=1", "display_name": "Teorema", "link": "https://stackoverflow.com/users/8868593/teorema"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 47057172, "answer_count": 5, "score": -2, "last_activity_date": 1509566223, "creation_date": 1509545213, "last_edit_date": 1509545796, "question_id": 47056768, "link": "https://stackoverflow.com/questions/47056768/create-a-function-that-return-the-pow-be", "title": "Create a function that return the pow b^e", "body": "<p>I have to create a function that return the value of b^e. This is what I have done:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;math.h&gt;\n\nint funzione_potenza (int b, int e);\n\nint main ()\n{\n    int b, e, potenza;\n\n    printf(\"Inserisci la base: \");\n    scanf(\"%d\",&amp;b);\n\n    printf(\"Inserisci l'esponente: \");\n    scanf(\"%d\",&amp;e);\n\n    printf(\"La potenza e' %d\",potenza);\n\n    return 0;\n}\n\nint funzione_potenza (int b, int e)\n{\n    int potenza;\n\n    potenza = pow(b,e);\n\n    return potenza;\n}\n</code></pre>\n\n<p>When i run it, it displays a false value of the power (ex. 5343123)\nWhat is wrong?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user936965"}, "edited": false, "score": 0, "creation_date": 1509544504, "post_id": 47056502, "comment_id": 81060074, "body": "Please explain what you mean by &#39;how its working&#39; more precise."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 3, "creation_date": 1509544622, "post_id": 47056502, "comment_id": 81060159, "body": "Think about how a pointer arithmetic is working and what <code>&amp;arr+1</code> is really doing."}, {"owner": {"reputation": 916, "user_id": 1290118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15bb8719fcee276c022948f3d1d7b998?s=128&d=identicon&r=PG", "display_name": "jhenderson2099", "link": "https://stackoverflow.com/users/1290118/jhenderson2099"}, "edited": false, "score": 0, "creation_date": 1509544771, "post_id": 47056502, "comment_id": 81060242, "body": "Please review <a href=\"https://stackoverflow.com/help/mcve\">How to create a Minimal, Complete, and Verifiable example</a> and revise your question."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1509544991, "post_id": 47056502, "comment_id": 81060391, "body": "What output did you get and what output do you expect?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 916, "user_id": 1290118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15bb8719fcee276c022948f3d1d7b998?s=128&d=identicon&r=PG", "display_name": "jhenderson2099", "link": "https://stackoverflow.com/users/1290118/jhenderson2099"}, "edited": false, "score": 0, "creation_date": 1509545077, "post_id": 47056502, "comment_id": 81060439, "body": "@jhenderson2099 \u2014 it is an MCVE. It\u2019s not very good (missing newline in output mainly), but it is an MCVE."}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1509545220, "post_id": 47056502, "comment_id": 81060508, "body": "This answer might help you understand: <a href=\"https://stackoverflow.com/a/2528328/669576\">stackoverflow.com/a/2528328/669576</a>"}, {"owner": {"reputation": 916, "user_id": 1290118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15bb8719fcee276c022948f3d1d7b998?s=128&d=identicon&r=PG", "display_name": "jhenderson2099", "link": "https://stackoverflow.com/users/1290118/jhenderson2099"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1509545714, "post_id": 47056502, "comment_id": 81060897, "body": "@JonathanLeffler - When I originally reviewed the post, the only question was in the subject.  The answer to that question seemed could be researched.  The question has since been reworded.  Please note that with a -7 score, multiple people other than me agree that there are issues with this question."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 916, "user_id": 1290118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15bb8719fcee276c022948f3d1d7b998?s=128&d=identicon&r=PG", "display_name": "jhenderson2099", "link": "https://stackoverflow.com/users/1290118/jhenderson2099"}, "edited": false, "score": 0, "creation_date": 1509545857, "post_id": 47056502, "comment_id": 81061006, "body": "@jhenderson2099: Looks pretty good to me now."}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 1, "creation_date": 1509547247, "post_id": 47056502, "comment_id": 81061965, "body": "Generally doing things like this is a bad idea. Use <code>sizeof arr</code> to determine the size of an object, don&#39;t mess around with pointer arithmetic for that."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 916, "user_id": 1290118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15bb8719fcee276c022948f3d1d7b998?s=128&d=identicon&r=PG", "display_name": "jhenderson2099", "link": "https://stackoverflow.com/users/1290118/jhenderson2099"}, "edited": false, "score": 0, "creation_date": 1509548225, "post_id": 47056502, "comment_id": 81062610, "body": "@jhenderson2099: I didn&#39;t say there weren&#39;t issues with the question.  I did say that it contained an MCVE."}], "answers": [{"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1509546117, "post_id": 47056734, "comment_id": 81061185, "body": "It is correct, <code>&amp;arr</code> gives you an array pointer to a single object (the array) and you are not allowed to point past that object. The rule that allows us to point one item past an array does not apply, if so the code should have been written as <code>(arr + 9)</code> which would have been well-defined. De-referencing the array pointer <code>*(&amp;arr + 1)</code> is, arguably, de-referencing of an invalid array pointer."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1509550034, "post_id": 47056734, "comment_id": 81063791, "body": "\u201cBorderline invalid\u201d is an interesting concept. Isn\u2019t almost every code snippet just a small change away from invalid. Is \u201c0\u201d borderline invalid since using it as a divisor has undefined behavior?"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1509550220, "post_id": 47056734, "comment_id": 81063920, "body": "@Lundin: What do you mean the one-past rule does not apply? You do not mean <code>&amp;arr+1</code> is undefined, do you? Do you mean that, although we can evaluate <code>&amp;arr+1</code>, the one-past rule does not allow us to apply <code>*</code> to it? Or do you mean something else?"}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 5, "last_activity_date": 1509545406, "last_edit_date": 1509545406, "creation_date": 1509545130, "answer_id": 47056734, "question_id": 47056502, "link": "https://stackoverflow.com/questions/47056502/how-this-is-calculating-size-in-c/47056734#47056734", "title": "How this is calculating size in c?", "body": "<p>The behaviour of <code>*(&amp;arr+1)</code> is <em>undefined</em>:</p>\n\n<p><code>&amp;arr</code> is of type <code>int (*)[9]</code> due to the address of operator being applied to <code>arr</code>, which is of type <code>int[9]</code> (Acknowledgements to Klas Lindb\u00e4ck for pointing out that pointer decay does not occur here.)</p>\n\n<p><code>&amp;arr + 1</code> is borderline invalid pointer arithmetic since you don't have an <em>array</em> of <code>int (*)[9]</code>. But you <em>are</em> allowed to set a pointer to one past a scalar, so all fine here.</p>\n\n<p>But <em>deferencing</em> that is undefined. Don't be at all surprised if you compiler eats your cat.</p>\n"}, {"comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1509545967, "post_id": 47056770, "comment_id": 81061088, "body": "<a href=\"https://ideone.com/MuPlH7\" rel=\"nofollow noreferrer\">Here</a> <code>sizeof(int (*)[9])</code> is giving <code>8</code>. What am I doing wrong?"}, {"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 0, "creation_date": 1509545970, "post_id": 47056770, "comment_id": 81061091, "body": "@DanielTrugman The <code>sizeof</code> operator works in bytes (chars if we want to nitpick) whereas pointer arithmetic doesn&#39;t. Your reasoning is sound but your terminology is confusing."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1509546120, "post_id": 47056770, "comment_id": 81061187, "body": "I don&#39;t like it. <code>*(&amp;arr + 1)</code> is UB. That&#39;s the end of it."}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 1, "creation_date": 1509547101, "post_id": 47056770, "comment_id": 81061868, "body": "What do you want to say with <code>sizeof(int (*)[9])</code>? This is the size of a pointer, has nothing to do with the problem at hand. Maybe you wanted to talk about <code>sizeof(int [9])</code> ? But this will usually be <code>sizeof(int)*9</code>."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1509547780, "post_id": 47056770, "comment_id": 81062328, "body": "@DanielTrugman I understand that, but you are assuming that everyone who knows C, also knows C++ and can read your answer. Which is definitely not true."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1509552000, "post_id": 47056770, "comment_id": 81065110, "body": "The final note &quot; *(&amp;arr + 1) is undefined behavior&quot; deserves to be first - and not a note."}, {"owner": {"reputation": 6050, "user_id": 1030410, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e13caf6116a45714153bd145754fd292?s=128&d=identicon&r=PG", "display_name": "Daniel Trugman", "link": "https://stackoverflow.com/users/1030410/daniel-trugman"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1509553480, "post_id": 47056770, "comment_id": 81066071, "body": "@chux, I hear ya, moved the comment to the top :)"}], "tags": [], "owner": {"reputation": 6050, "user_id": 1030410, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e13caf6116a45714153bd145754fd292?s=128&d=identicon&r=PG", "display_name": "Daniel Trugman", "link": "https://stackoverflow.com/users/1030410/daniel-trugman"}, "is_accepted": true, "score": 2, "last_activity_date": 1509553466, "last_edit_date": 1509553466, "creation_date": 1509545216, "answer_id": 47056770, "question_id": 47056502, "link": "https://stackoverflow.com/questions/47056502/how-this-is-calculating-size-in-c/47056770#47056770", "title": "How this is calculating size in c?", "body": "<p><strong>First and foremost</strong>, please don't write code this way... <code>*(&amp;arr + 1)</code> is <strong>undefined behavior</strong>...</p>\n\n<hr>\n\n<p><strong>Note:</strong> This answer assumes <code>sizeof(int) = 4</code>.</p>\n\n<p>What is <code>arr</code>? It's an array of 9 ints</p>\n\n<pre><code>printf(\"%zu\\n\", sizeof(arr)); // 36 bytes\nprintf(\"%p\\n\", (void *)arr); // 0x7ffed90f48a0\n</code></pre>\n\n<p>What is <code>&amp;arr</code>? It's a pointer to an array or ints = <code>int (*)[9]</code></p>\n\n<pre><code>printf(\"%zu\\n\", sizeof(&amp;arr)); // 8 bytes (the size of a pointer)\nprintf(\"%p\\n\", (void *)(&amp;arr)); // 0x7ffed90f48a0\n</code></pre>\n\n<p>What is <code>&amp;arr + 1</code>? Since this implies pointer arithmetic, the result is a pointer to the subsequent <code>int (*)[9]</code> in the memory (Notice the address gap of 0x24(36) bytes)</p>\n\n<pre><code>printf(\"%zu\\n\", sizeof(&amp;arr + 1)); // 8 bytes (the size of a pointer)\nprintf(\"%p\\n\", (void *)(&amp;arr + 1)); // 0x7ffed90f48c4\n</code></pre>\n\n<p>What is <code>*(&amp;arr + 1)</code>? We dereference the pointer to the subsequent array <code>&amp;arr + 1</code> and get a pointer to an array of ints, just like our original <code>arr</code>, only that this pointer points to some invalid memory location:</p>\n\n<pre><code>printf(\"%zu\\n\", sizeof(*(&amp;arr + 1))); // 36 bytes\nprintf(\"%p\\n\", (void *)(*(&amp;arr + 1))); // 0x7ffed90f48c4\n</code></pre>\n\n<p><strong>Conclusion</strong></p>\n\n<p><code>*(&amp;arr + 1) - arr</code> performs an implicit pointer arithmetic subtraction between two int arrays (pretty much the same as subtracting <code>int *</code>).</p>\n\n<p>Since we already saw that the difference is 36 bytes, and we use <code>int</code> units and <code>sizeof(int) = 4</code>, the result is 9.</p>\n"}, {"tags": [], "owner": {"reputation": 716, "user_id": 7713056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5be6a3eb72a7cba59db95a1f1b878d05?s=128&d=identicon&r=PG", "display_name": "Aniket Kariya", "link": "https://stackoverflow.com/users/7713056/aniket-kariya"}, "is_accepted": false, "score": 0, "last_activity_date": 1509548347, "creation_date": 1509548347, "answer_id": 47057745, "question_id": 47056502, "link": "https://stackoverflow.com/questions/47056502/how-this-is-calculating-size-in-c/47057745#47057745", "title": "How this is calculating size in c?", "body": "<p>Suppose that int size is 2 bytes currently.</p>\n\n<p>arr is stored at 65506 and when you do (&amp;arr + 1) address of arr is incremented by 1 (not with an integer 1 an give you 65507), and give you next address where array ends. becuase arr is is a variable no matter of which type and how long when you increment it, it will take you to the end of variable.</p>\n\n<p>Now, as i said above that int is 2 bytes long so the array of 9 will be 18 bytes long and arr+1 will give you 65506 + 18 = 65626</p>\n\n<p>so, we have value of arr + 1 = 65524 and arr = 65506. i i know the anser will be 18, but as you used address of and references, it will return 9. for this you need to go deep inside dereferencing and address variables and also need to debug the stack and program for every itteration for better understanding.</p>\n\n<p>By the way, you can also use another simple methods for doing this such as</p>\n\n<pre><code>   int size = sizeof(arr)/sizeof(a[0]);\n</code></pre>\n\n<p>Here the size of your total array, taht is 18 is devided by your first element's size. no doubt, every element present in array is of same type, same size; which is here int it will return 2 and 18 is divided by 2 and will give you 9 in simple and efficient way.</p>\n"}], "owner": {"reputation": 11, "user_id": 7854979, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fEf9d0rhvkw/AAAAAAAAAAI/AAAAAAAAAPc/Uvn2Rk9y-dA/photo.jpg?sz=128", "display_name": "Pradeep Raghuwanshi", "link": "https://stackoverflow.com/users/7854979/pradeep-raghuwanshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 47056770, "answer_count": 3, "score": -6, "last_activity_date": 1509553466, "creation_date": 1509544376, "last_edit_date": 1509545817, "question_id": 47056502, "link": "https://stackoverflow.com/questions/47056502/how-this-is-calculating-size-in-c", "title": "How this is calculating size in c?", "body": "<p>Can someone please explain why the following code successfully prints the length of <code>arr[]</code>?</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint main()\n{\n  int arr[] = {1,2,3,4,5,6,9,8,7};\n\n  int size = *(&amp;arr+1) - arr;    \n\n  printf(\"%d\\n\",size);\n}\n</code></pre>\n\n<p>I'm specifically interested in the memory layout behind these operations.</p>\n"}, {"tags": ["c", "synchronization", "mutex", "kernel-extension", "xnu"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1509549391, "post_id": 47056457, "comment_id": 81063355, "body": "Use a semaphore."}], "answers": [{"comments": [{"owner": {"reputation": 458, "user_id": 1014847, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/404a4b377fbd8e35003d279b7202506f?s=128&d=identicon&r=PG", "display_name": "mrdvlpr", "link": "https://stackoverflow.com/users/1014847/mrdvlpr"}, "edited": false, "score": 3, "creation_date": 1509829743, "post_id": 47057519, "comment_id": 81181140, "body": "I think msleep/wakeup is actually built on top of lck_mtx_sleep_deadline() and does exactly what it is being described above. He is just missing an actual mutex lock in the msleep call, he&#39;s passing NULL."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7256215"}, "edited": false, "score": 0, "creation_date": 1509869534, "post_id": 47057519, "comment_id": 81188680, "body": "@mrdvlper, thanks.. now that&#39;s also an option I wasn&#39;t aware of, I can pass the mutex to msleep, and it&#39;s being passed to lck_mtx_sleep_deadline eventually."}], "tags": [], "owner": {"reputation": 18176, "user_id": 48660, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/NJ1Lx.jpg?s=128&g=1", "display_name": "pmdj", "link": "https://stackoverflow.com/users/48660/pmdj"}, "is_accepted": true, "score": 1, "last_activity_date": 1509547603, "creation_date": 1509547603, "answer_id": 47057519, "question_id": 47056457, "link": "https://stackoverflow.com/questions/47056457/using-synchronization-efficiently-in-macos-kernel-extension/47057519#47057519", "title": "Using synchronization efficiently in macOS kernel extension", "body": "<p>Use <code>lck_mtx_sleep_deadline()</code> (or the <code>IOLockSleepDeadline()</code> wrapper) in connection with a mutex. On the thread that waits:</p>\n\n<ol>\n<li>Lock mutex</li>\n<li>Check wait condition (is first function still running?)</li>\n<li>If yes, call <code>lck_mtx_sleep_deadline()</code></li>\n<li>Unlock mutex</li>\n</ol>\n\n<p>You may want to make steps 2+3 a <code>while()</code> loop depending on your situation.</p>\n\n<p>In your \"first function\":</p>\n\n<ol>\n<li>Lock mutex</li>\n<li>Clear wait condition (increment channel)</li>\n<li>Send wakeup to event. (e.g. <code>thread_wakeup_prim((event_t) event, oneThread, THREAD_AWAKENED);</code>)</li>\n<li>Unlock mutex.</li>\n</ol>\n\n<p>You can probably also do all of this with the lower-level <code>msleep()</code>/<code>wakeup()</code> directly somehow, but I'm not so familiar with that API.</p>\n"}, {"comments": [{"owner": {"reputation": 3214, "user_id": 4333809, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eb246fedefccc8b02a3efb989143d3b9?s=128&d=identicon&r=PG&f=1", "display_name": "Zohar81", "link": "https://stackoverflow.com/users/4333809/zohar81"}, "edited": false, "score": 0, "creation_date": 1528640740, "post_id": 48822786, "comment_id": 88575841, "body": "Hi, I&#39;m also using the msleep/wakeup technic but I used timeout instead of mutex, and I&#39;ve got the following panic <code>thread_invoke: preemption_level -1, possible cause: unlocking an unlocked mutex or spinlock</code> .. do you have any insights about how can it be ? (I&#39;ve tested it on 10.14 beta). thanks !"}, {"owner": {"reputation": 6632, "user_id": 1249950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7503655be5fe0fa08e91b12afc97a0a3?s=128&d=identicon&r=PG", "display_name": "Daniel Roethlisberger", "link": "https://stackoverflow.com/users/1249950/daniel-roethlisberger"}, "reply_to_user": {"reputation": 3214, "user_id": 4333809, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eb246fedefccc8b02a3efb989143d3b9?s=128&d=identicon&r=PG&f=1", "display_name": "Zohar81", "link": "https://stackoverflow.com/users/4333809/zohar81"}, "edited": false, "score": 0, "creation_date": 1528645639, "post_id": 48822786, "comment_id": 88577249, "body": "Hard so tell without seeing your code. In any case, you might be interested in <code>IOSleep()</code> if you are after a simple timed sleep without programmatic wakeup capability."}, {"owner": {"reputation": 3214, "user_id": 4333809, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eb246fedefccc8b02a3efb989143d3b9?s=128&d=identicon&r=PG&f=1", "display_name": "Zohar81", "link": "https://stackoverflow.com/users/4333809/zohar81"}, "edited": false, "score": 0, "creation_date": 1529222283, "post_id": 48822786, "comment_id": 88789564, "body": "I actually need the wakeup capability. The project is based on driver-userspace agents whereas the driver get events and send them to user-space straight away. The driver waits for completion using the <code>msleep</code> command and when the userspace finishes, it sends back IOkit command to driver with the matching channel to wakeup the waiting thread. However, there can be multiple requests being handled concurrently  so I refrained from using mutex in <code>msleep</code>.. maybe I need to have mutex array in the size of the concurrency level. I&#39;d be happy to hear you advice here. thanks again !"}, {"owner": {"reputation": 3214, "user_id": 4333809, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eb246fedefccc8b02a3efb989143d3b9?s=128&d=identicon&r=PG&f=1", "display_name": "Zohar81", "link": "https://stackoverflow.com/users/4333809/zohar81"}, "edited": false, "score": 0, "creation_date": 1529229887, "post_id": 48822786, "comment_id": 88791167, "body": "And one more thing, do you assume that the <code>msleep</code> release the mutex once the <code>wakeup</code> on the same channel is received or upon timeout ? thanks"}, {"owner": {"reputation": 6632, "user_id": 1249950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7503655be5fe0fa08e91b12afc97a0a3?s=128&d=identicon&r=PG", "display_name": "Daniel Roethlisberger", "link": "https://stackoverflow.com/users/1249950/daniel-roethlisberger"}, "reply_to_user": {"reputation": 3214, "user_id": 4333809, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eb246fedefccc8b02a3efb989143d3b9?s=128&d=identicon&r=PG&f=1", "display_name": "Zohar81", "link": "https://stackoverflow.com/users/4333809/zohar81"}, "edited": false, "score": 0, "creation_date": 1530001661, "post_id": 48822786, "comment_id": 89067918, "body": "I think you may find answers in old FreeBSD manual pages: <a href=\"https://www.freebsd.org/cgi/man.cgi?query=msleep&amp;apropos=0&amp;sektion=0&amp;manpath=FreeBSD+5.5-RELEASE+and+Ports&amp;arch=default&amp;format=html\" rel=\"nofollow noreferrer\">freebsd.org/cgi/&hellip;</a> - I am not an expert on in-kernel concurrency so I cannot give you reliable advice on what locking strategy is best for your use case. Lock reacquisition behaviour depends on whether you use <code>PDROP</code> in priority or not; I would recommend to look into the relevant XNU source code to check what the exact behaviour of <code>msleep</code>."}], "tags": [], "owner": {"reputation": 6632, "user_id": 1249950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7503655be5fe0fa08e91b12afc97a0a3?s=128&d=identicon&r=PG", "display_name": "Daniel Roethlisberger", "link": "https://stackoverflow.com/users/1249950/daniel-roethlisberger"}, "is_accepted": false, "score": 2, "last_activity_date": 1518772193, "last_edit_date": 1518772193, "creation_date": 1518769825, "answer_id": 48822786, "question_id": 47056457, "link": "https://stackoverflow.com/questions/47056457/using-synchronization-efficiently-in-macos-kernel-extension/48822786#48822786", "title": "Using synchronization efficiently in macOS kernel extension", "body": "<p>There are two issues with your use of <code>msleep</code>.</p>\n\n<p>First, <code>channel</code> is an opaque value, not a \"pointer to boolean value\"; you do not increment it, it will not be modified by the call.  Instead, you simply have to ensure that it is unique, i.e. not used by other unrelated calls to <code>msleep</code>.  Convention is to use the memory address of a related data structure to achieve uniqueness.  If in your case you cannot ensure that <code>msleep</code> is called before <code>wakeup</code>, then you would use a <a href=\"https://developer.apple.com/library/content/documentation/Darwin/Conceptual/KernelProgramming/synchronization/synchronization.html\" rel=\"nofollow noreferrer\">Mach semaphore</a>, not <code>msleep</code>/<code>wakeup</code>.</p>\n\n<p>The other issue is, as @mrdvlpr has already pointed out in a comment, that <code>msleep</code> needs a mutex in order to be able to wake up.  If you call it with <code>mtx=NULL</code>, it will sleep indefinitely and calls to <code>wakeup</code> on the same channel will not have any effect.  If you want to wake up later with <code>wakeup</code> or <code>wakeup_once</code>, you need to provide a valid and locked mutex instead of <code>NULL</code>.</p>\n\n<p>A minimal but functional call to <code>msleep</code> without timeout in XNU looks like this:</p>\n\n<pre><code>lck_grp_t *lck_grp;\nlck_mtx_t *lck_mtx;\n\nlck_grp = lck_grp_alloc_init(\"com.example.mslpex\", LCK_GRP_ATTR_NULL);\nif (!lck_grp)\n    /* handle failure */\nlck_mtx = lck_mtx_alloc_init(lck_grp, LCK_ATTR_NULL);\nif (!lck_mtx)\n    /* handle failure */\n\n/* ... */\n\nlck_mtx_lock(lck_mtx);\nerror = msleep(channel, lck_mtx, pri|PDROP, \"mslpex\", NULL);\nif (error)\n    /* handle failure */\nelse\n    /* handle success */\n\n/* ... */\n\nlck_mtx_free(lck_mtx, lck_grp);\nlck_grp_free(lck_grp);\n</code></pre>\n\n<p>The corresponding wake-up call is simply:</p>\n\n<pre><code>wakeup(channel);\n</code></pre>\n\n<p>In the interest of system stability you probably want to use a timeout on the call to <code>msleep</code> in order to recover from situations where <code>wakeup</code> does not get called as expected.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7256215"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 573, "favorite_count": 0, "accepted_answer_id": 47057519, "answer_count": 2, "score": 3, "last_activity_date": 1518772193, "creation_date": 1509544228, "last_edit_date": 1509544924, "question_id": 47056457, "link": "https://stackoverflow.com/questions/47056457/using-synchronization-efficiently-in-macos-kernel-extension", "title": "Using synchronization efficiently in macOS kernel extension", "body": "<p>I'm using synchronization KPI in my macOS kernel extension to verify that one function is fully performed before the other function starts (both functions are performed in different threads of course). </p>\n\n<p>These are the synchronization methods : </p>\n\n<pre><code>msleep(void *channel,lck_mtx_t *mtx,int priority,const char *wmesg,  struct  timespec *timeout);\nwakeup(void *channel);\n</code></pre>\n\n<p>So <code>channel</code> is a pointer to boolean value that represent first function was fully performed. </p>\n\n<p>Here's my implementation in the first function:</p>\n\n<pre><code>OSIncrementAtomic(channel);\nwakeup(channel);\n</code></pre>\n\n<p>And on the other function I wait for <code>channel</code> to be set: </p>\n\n<pre><code>msleep(channel, NULL, 0, \"\", ts);\n</code></pre>\n\n<p>However, in case the first function terminated before the second one (which is the common case), I shell wait for the timeout in <code>ts</code> for vein. </p>\n\n<p>My question is whether there's a way to skip the <code>msleep</code> in case the <code>wakeup</code> already occurred ? </p>\n\n<p>thanks, </p>\n"}, {"tags": ["c", "linux", "system-calls", "dup2", "vfork"], "comments": [{"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 0, "creation_date": 1509544191, "post_id": 47056411, "comment_id": 81059859, "body": "No. Use posix_spawn. A good posix_spawn implementation (like musl&#39;s) should get you both the benefits of vfork and the ability to run pre-exec actions in the child."}, {"owner": {"reputation": 560, "user_id": 4191577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27d407a0215a2748ef9b054c7d0b0afe?s=128&d=identicon&r=PG&f=1", "display_name": "talshorer", "link": "https://stackoverflow.com/users/4191577/talshorer"}, "reply_to_user": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 1, "creation_date": 1509544308, "post_id": 47056411, "comment_id": 81059945, "body": "Can you give me an example of using <code>posix_spawn()</code> so that  the underlying system call used is <code>vfork()</code> and output is redirected?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1509544550, "post_id": 47056411, "comment_id": 81060105, "body": "Forget that <code>vfork()</code> exists.  The rules on its use are stringent and IMO not worth the trouble. You can call one of the <code>exec*()</code> functions or one of the exit functions, and that\u2019s it. Check the rules."}, {"owner": {"reputation": 560, "user_id": 4191577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27d407a0215a2748ef9b054c7d0b0afe?s=128&d=identicon&r=PG&f=1", "display_name": "talshorer", "link": "https://stackoverflow.com/users/4191577/talshorer"}, "edited": false, "score": 1, "creation_date": 1509544995, "post_id": 47056411, "comment_id": 81060394, "body": "I read the rules, and found no explanation or discussion of them anywhere."}, {"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "reply_to_user": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 0, "creation_date": 1555204326, "post_id": 47056411, "comment_id": 98028585, "body": "@PSkocik All the <code>posix_spawn</code> does is call <code>fork</code> or <code>vfork</code> or possibly Linux <code>clone</code>. It is not a very special function in its implementation."}, {"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 0, "creation_date": 1564610721, "post_id": 47056411, "comment_id": 101092659, "body": "Why do you want to use vfork instead of fork?  If it&#39;s for some specific capability of vfork that fork does not share, consider using clone instad.  If you don&#39;t need anything that fork doesn&#39;t give you, why bother?"}], "answers": [{"tags": [], "owner": {"reputation": 133, "user_id": 4786480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f4c4295adfecc29e31bef8c3f371576?s=128&d=identicon&r=PG&f=1", "display_name": "wpc062", "link": "https://stackoverflow.com/users/4786480/wpc062"}, "is_accepted": false, "score": 1, "last_activity_date": 1564541691, "creation_date": 1564541691, "answer_id": 57282521, "question_id": 47056411, "link": "https://stackoverflow.com/questions/47056411/can-i-call-dup2-after-vfork/57282521#57282521", "title": "Can I call dup2 after vfork?", "body": "<p>My answer is probably yes.</p>\n\n<p>Based on Linux manual, A call to vfork() is equivalent to calling clone(2) with flags specified as:</p>\n\n<pre><code>        CLONE_VM | CLONE_VFORK | SIGCHLD \n</code></pre>\n\n<p>Note from clone(2):</p>\n\n<p>CLONE_FILES (since Linux 2.0)\n              If  CLONE_FILES is set, the calling process and the child process share the same file descriptor table.  Any file descriptor created by the calling process or by the child\n              process is also valid in the other process.  Similarly, if one of the processes closes a file descriptor, or changes its associated flags (using the fcntl(2) F_SETFD oper\u2010\n              ation), the other process is also affected.</p>\n\n<pre><code>          If  CLONE_FILES  is not set, the child process inherits a copy of all file descriptors opened in the calling process at the time of clone().  (The duplicated file descrip\u2010\n          tors in the child refer to the same open file descriptions (see open(2)) as the corresponding file descriptors in the calling process.)  Subsequent operations that open or\n          close file descriptors, or change file descriptor flags, performed by either the calling process or the child process do not affect the other process. \n</code></pre>\n\n<p><strong>So after vfork, file operations in child process are isolated by default.</strong></p>\n"}], "owner": {"reputation": 560, "user_id": 4191577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27d407a0215a2748ef9b054c7d0b0afe?s=128&d=identicon&r=PG&f=1", "display_name": "talshorer", "link": "https://stackoverflow.com/users/4191577/talshorer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 346, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1564541691, "creation_date": 1509544082, "question_id": 47056411, "link": "https://stackoverflow.com/questions/47056411/can-i-call-dup2-after-vfork", "title": "Can I call dup2 after vfork?", "body": "<p>I want to <code>vfork()</code> a child process, but have its <code>stdout</code> be different than the parent's <code>stdout</code>.</p>\n\n<p>The obvious way to achieve this with <code>fork()</code> would be to <code>dup2()</code> (and <code>close()</code> the original file descriptor) in the child after forking.</p>\n\n<p>Let's say I have the file descriptor ready before calling <code>vfork()</code> and just need to call these two system calls before calling an <code>exec*()</code> function. Am I allowed to do that?</p>\n"}, {"tags": ["c", "gets", "getch", "puts"], "comments": [{"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "edited": false, "score": 3, "creation_date": 1509543719, "post_id": 47056260, "comment_id": 81059510, "body": "<code>gets()</code> we avoid"}, {"owner": {"reputation": 4301, "user_id": 423955, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/21306ab5c55a1e70ae23991665941efe?s=128&d=identicon&r=PG", "display_name": "Alessandro Da Rugna", "link": "https://stackoverflow.com/users/423955/alessandro-da-rugna"}, "edited": false, "score": 2, "creation_date": 1509543912, "post_id": 47056260, "comment_id": 81059661, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/1694036/why-is-the-gets-function-so-dangerous-that-it-should-not-be-used\">Why is the gets function so dangerous that it should not be used?</a>"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1509547665, "post_id": 47056260, "comment_id": 81062240, "body": "read the manual of those functions. Is Google forbidden in your country?"}], "answers": [{"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1509547928, "post_id": 47056346, "comment_id": 81062423, "body": "I wouldn&#39;t call Turbo C infamous, just very ancient. It was <i>the</i> state of the art compiler back in the days. Great performance, great IDE, nearly completely bug-free, great debugger, great documentation. Compare the number of spotted bugs in Turbo C with the number of spotted bugs in lets say gcc+Eclipse. I wouldn&#39;t call a T-Ford infamous just because it is old, but I would certainly not drive one in the year 2017."}], "tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": false, "score": 1, "last_activity_date": 1509545283, "last_edit_date": 1509545283, "creation_date": 1509543883, "answer_id": 47056346, "question_id": 47056260, "link": "https://stackoverflow.com/questions/47056260/use-of-getch-function-and-gets-and-puts-functions/47056346#47056346", "title": "Use of getch function and gets and puts functions", "body": "<p><code>gets</code> doesn't exist anymore (except in outdated environnments such as the infamous TurboC), use <code>fgets</code> instead.</p>\n\n<ul>\n<li><code>fgets</code> reads one line of text from a file including from the terminal (standard output)</li>\n<li><code>puts</code> writes one line of text to the terminal (standard output)</li>\n<li><code>fputs</code> writes one line of text to a file, including the terminal (standard output)</li>\n<li><code>getch</code> reads on character from the standard input (terminal)</li>\n<li><code>printf</code> and friends allow you to print formatted output</li>\n<li><code>scanf</code> and friends allow you to read formatted input.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 0, "last_activity_date": 1509548118, "last_edit_date": 1509548118, "creation_date": 1509547576, "answer_id": 47057511, "question_id": 47056260, "link": "https://stackoverflow.com/questions/47056260/use-of-getch-function-and-gets-and-puts-functions/47057511#47057511", "title": "Use of getch function and gets and puts functions", "body": "<blockquote>\n  <p>Why do we use gets() and puts() when we have scanf() and printf()?</p>\n</blockquote>\n\n<p>We don't use <code>gets()</code>, the function was so poorly designed that it was flagged obsolete 18 years ago and finally completely removed from the C language 6 years ago. If someone taught you to use <code>gets()</code>, you need to find a more updated source of learning. See <a href=\"https://stackoverflow.com/questions/2565727/what-are-the-c-functions-from-the-standard-library-that-must-should-be-avoided\">What are the C functions from the standard library that must / should be avoided?</a>.</p>\n\n<p><code>puts(str)</code> is only used as a micro-optimization of <code>printf(\"%s\", str)</code>. <code>puts()</code> is traditionally ever so slightly faster than <code>printf()</code>, since it doesn't need to parse a format string. Today, this performance benefit is a non-issue. </p>\n\n<p>However, <code>puts()</code> is much <em>safer</em> than <code>printf()</code>. You can write bad code like <code>printf(\"%s\", pointer_to_int)</code> and it might compile without warnings. But <code>puts(pointer_to_int)</code> will never compile without warnings/errors.</p>\n\n<p>Generally, most of stdio.h is dangerous and unsafe because of the poor type safety. It is avoided in professional, production-quality code. For student/hobbyist purposes, printf/scanf are however fine.</p>\n\n<hr>\n\n<blockquote>\n  <p>What is the use of getch()</p>\n</blockquote>\n\n<p><code>getch()</code> was a non-standard extension to C, which allowed programs to read a character from stdin without echoing the typed character to stdout (the screen).</p>\n\n<p>This function was popular back in the days of MS DOS when Borland Turbo C was the dominant compiler. Because Turbo C had it, some other compilers also started supporting it together with the non-standard <code>conio.h</code> library. We're talking early 1990s.</p>\n\n<p>You shouldn't use this function in modern C programming. </p>\n\n<p>(Though it is possible to implement it yourself with various API calls, as in <a href=\"https://stackoverflow.com/a/9783195/584518\">this example for Windows</a>.)</p>\n"}], "owner": {"reputation": 21, "user_id": 8864563, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2c158b7b908c0a875da4811d072272de?s=128&d=identicon&r=PG&f=1", "display_name": "SGG", "link": "https://stackoverflow.com/users/8864563/sgg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 547, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1509548118, "creation_date": 1509543626, "last_edit_date": 1509543821, "question_id": 47056260, "link": "https://stackoverflow.com/questions/47056260/use-of-getch-function-and-gets-and-puts-functions", "title": "Use of getch function and gets and puts functions", "body": "<p>Experts I've doubts in gets(),puts() and getch().</p>\n\n<ol>\n<li>Why do we use gets() and puts() when we have scanf() and printf()?</li>\n<li>What is the use of getch(). </li>\n</ol>\n\n<p>Please explain this in simple language because I'm a beginner.</p>\n\n<p>THank you in advance. :)</p>\n"}, {"tags": ["c", "language-lawyer", "undefined-behavior", "calloc"], "comments": [{"owner": {"reputation": 4649, "user_id": 5601284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qVVND.jpg?s=128&g=1", "display_name": "byxor", "link": "https://stackoverflow.com/users/5601284/byxor"}, "edited": false, "score": 0, "creation_date": 1509543077, "post_id": 47055947, "comment_id": 81059045, "body": "Why do you want to do this? Are you looking for a generic way to initialise any piece of memory to some sort of &quot;safe&quot; value?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1509543191, "post_id": 47055947, "comment_id": 81059123, "body": "I don&#39;t get this question... you are aware that calloc is the same thing as malloc+memset zero? Why the extra memset?"}], "answers": [{"tags": [], "owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "is_accepted": true, "score": 11, "last_activity_date": 1509543211, "creation_date": 1509543211, "answer_id": 47056115, "question_id": 47055947, "link": "https://stackoverflow.com/questions/47055947/can-all-bits-0-be-a-trap-representation-for-integers/47056115#47056115", "title": "Can all bits 0 be a trap representation for integers?", "body": "<p>From <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.2.6.2p5\" rel=\"noreferrer\">C Standard, 6.2.6.2, Integer Types</a></p>\n\n<blockquote>\n  <p>For any integer type, the object representation where all the bits are zero shall be a representation of the value zero in that type.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 1, "creation_date": 1509548880, "post_id": 47056497, "comment_id": 81063028, "body": "Prior to C89, it would have been allowable for a system to use a representation that would trap if integers didn&#39;t have certain padding bits set, even if the value of all data bits was zero.  On such a system, static initialization would have been required to initialize integers to a valid zero value, but that&#39;s not a particularly exotic requirement, since even under C99 default initialization of pointers and floating-point values may require a bit pattern other than all bits zero."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 2, "last_activity_date": 1509544346, "creation_date": 1509544346, "answer_id": 47056497, "question_id": 47055947, "link": "https://stackoverflow.com/questions/47055947/can-all-bits-0-be-a-trap-representation-for-integers/47056497#47056497", "title": "Can all bits 0 be a trap representation for integers?", "body": "<p>The definition of a trap representation is, C11 6.2.6.1/5:</p>\n\n<blockquote>\n  <p>Certain object representations need not represent a value of the object type. If the stored\n  value of an object has such a representation and is read by an lvalue expression that does\n  not have character type, the behavior is undefined. If such a representation is produced\n  by a side effect that modifies all or any part of the object by an lvalue expression that\n  does not have character type, the behavior is undefined.50) Such a representation is called\n  a trap representation.</p>\n</blockquote>\n\n<p>This means that a trap representation has to be something that is not a valid value. </p>\n\n<p>In case of two's complement, all binary combinations of an <code>int</code> are valid values, so trap representations aren't possible.</p>\n\n<p>In case of wildly fictional one's complement systems, it would be possible to make the value <code>0xFFFFFFFF</code> (assuming 32 bit int) a trap representation, if negative zeroes are not supported. Similarly, on a wildly fictional signed magnitude system, the value <code>0x80000000</code> could be used as a trap representation.</p>\n\n<p>On even wilder fictional systems, integers may have padding bits and then such padding bits could be used to hold trap representations.</p>\n\n<p>In any of these cases, the binary representation 0 is always a value. A lot of the C standard depends on this, such as initialization of objects with static storage duration, the calloc() function, the values of padding bytes in structs etc etc. In all of these, the outcome shall not be a trap representation.</p>\n\n<p>Please note that if you aren't a programmer of wildly fictional systems, none of this is of any concern. There may have existed a few odd, experimental computers where this was a thing. You may even find someone yet alive who can tell you about them.</p>\n\n<p>If you are designing for compatibility with such exotic, most likely fictional systems, you should document in detail exactly why this compatibility is needed for your product. Since your boss probably wants to know why you are spending lots of time designing for compatibility with computers that actually don't exist in the real world.</p>\n"}], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 471, "favorite_count": 0, "accepted_answer_id": 47056115, "answer_count": 2, "score": 1, "last_activity_date": 1509544346, "creation_date": 1509542779, "last_edit_date": 1509543459, "question_id": 47055947, "link": "https://stackoverflow.com/questions/47055947/can-all-bits-0-be-a-trap-representation-for-integers", "title": "Can all bits 0 be a trap representation for integers?", "body": "<p>It is common to assume that initializing an object to all bits 0 is a simple way to set all its members to <code>0</code>.  The standard does not guarantee this for non integer types as:</p>\n\n<ul>\n<li>all bits zero might not be a valid representation for pointers, even null pointers, although all common modern systems use exactly that.</li>\n<li>all bits zero might not be a legal representation for floating point numbers, although it is on IEEE compliant systems.</li>\n</ul>\n\n<p>What about integers? Is the following code fully defined:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main(void) {\n    int *p = calloc(sizeof(*p), 1);\n    if (p) {\n        printf(\"%d\\n\", *p);\n        memset(p, 0, sizeof(*p));\n        printf(\"%d\\n\", *p);\n        free(p);\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "memory-leaks", "stack"], "comments": [{"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 5, "creation_date": 1509539053, "post_id": 47054643, "comment_id": 81056352, "body": "Because undefined behavior is undefined. You do a bad thing that can break things. Sometimes things don&#39;t break immediately. Maybe there&#39;s a safety margin, maybe there&#39;s some alignment going on. Maybe you just happen to be lucky and avoid killing the canary when overflowing in one way, but not the other (the thing that detects stack smashing is called a canary). Don&#39;t write outside of the array you allocated."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1509539221, "post_id": 47054643, "comment_id": 81056465, "body": "If your array indexes are out of bounds, then anything can happen. It can even appear to work fine."}, {"owner": {"reputation": 1180, "user_id": 4233968, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/34a8a28a578ed988cb3b7800cc79a867?s=128&d=identicon&r=PG&f=1", "display_name": "achoora", "link": "https://stackoverflow.com/users/4233968/achoora"}, "reply_to_user": {"reputation": 1206, "user_id": 2830225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6812bca0f44a9c23dd9ab00ef70deccf?s=128&d=identicon&r=PG&f=1", "display_name": "Anton Angelov", "link": "https://stackoverflow.com/users/2830225/anton-angelov"}, "edited": false, "score": 1, "creation_date": 1509539249, "post_id": 47054643, "comment_id": 81056482, "body": "@AntonAngelov I have read the  <a href=\"https://stackoverflow.com/questions/1345670/stack-smashing-detected\" title=\"stack smashing detected\">stackoverflow.com/questions/1345670/stack-smashing-detected</a> ,I am curious about why its not happening with row index and happening only with the column index. There must be something under the hood"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1509539376, "post_id": 47054643, "comment_id": 81056569, "body": "@achoora yes, there is something under the hood. It&#39;s called &quot;undefined behaviour&quot;. If you really want to find out what&#39;s going on, execute your program step by step in disassembly mode, but I&#39;d rather no waste my time with this. BTW on my VS2017 I get &quot;stack smashing&quot; in both cases !!"}, {"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 1, "creation_date": 1509539423, "post_id": 47054643, "comment_id": 81056605, "body": "@achoora Under the hood, write down the array indexes you write to in both versions of the loop. You will notice that they are different. Two programs that do different things will have different behaviors."}, {"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 1, "creation_date": 1509539504, "post_id": 47054643, "comment_id": 81056643, "body": "In one case you kill the canary, in the other case you&#39;re unlucky and happen to miss the canary."}, {"owner": {"reputation": 1180, "user_id": 4233968, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/34a8a28a578ed988cb3b7800cc79a867?s=128&d=identicon&r=PG&f=1", "display_name": "achoora", "link": "https://stackoverflow.com/users/4233968/achoora"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1509539553, "post_id": 47054643, "comment_id": 81056670, "body": "@MichaelWalz I tried with valgrind , it lead me to  , Process terminating with default action of signal 6 (SIGABRT)    at 0x4E6F428: raise (raise.c:54)    by 0x4E71029: abort (abort.c:89)    by 0x4EB17E9: __libc_message (libc_fatal.c:175)    by 0x4F5311B: __fortify_fail (fortify_fail.c:37)    by 0x4F530BF: __stack_chk_fail (stack_chk_fail.c:28)    by 0x4006C4: main (in /home/achoora/Desktop/CodeJig/matrix/a.out) When the column index caused stack smashing, but the question about why row index is saved still remains!!"}, {"owner": {"reputation": 1180, "user_id": 4233968, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/34a8a28a578ed988cb3b7800cc79a867?s=128&d=identicon&r=PG&f=1", "display_name": "achoora", "link": "https://stackoverflow.com/users/4233968/achoora"}, "reply_to_user": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 0, "creation_date": 1509539736, "post_id": 47054643, "comment_id": 81056790, "body": "@Art , I agree that once I cross the bounds it can be undefined but why I am crossing the bounds in one case and escaping without scratch in another should be deterministic isnt it . I ran my program using gcc compiler on a linux pc , didnt toss a coin to leave it to chance :D"}, {"owner": {"reputation": 1206, "user_id": 2830225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6812bca0f44a9c23dd9ab00ef70deccf?s=128&d=identicon&r=PG&f=1", "display_name": "Anton Angelov", "link": "https://stackoverflow.com/users/2830225/anton-angelov"}, "edited": false, "score": 0, "creation_date": 1509539842, "post_id": 47054643, "comment_id": 81056859, "body": "@anchoora In this case this behavior could be specific to the particular compiler, compiler version and libc implementation."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1509539891, "post_id": 47054643, "comment_id": 81056885, "body": "@achoora Undefined behaviour is undefined. Valgrind basically just told you that you did something wrong. Don&#39;t waste your time. Writing out of array bounds is undefined behaviour. Use <a href=\"http://www.cplusplus.com/reference/cassert/assert/\" rel=\"nofollow noreferrer\"><code>assert</code></a> for early detection of out of bounds problems."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1509540003, "post_id": 47054643, "comment_id": 81056967, "body": "@achoora <i>escaping without scratch in another should be deterministic isnt it?</i>. Well it <i>may</i> be deterministic on <i>your</i> computer with <i>your</i> operating system and <i>your</i> compiler."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1509540075, "post_id": 47054643, "comment_id": 81057022, "body": "@achoora BTW, how do you know that you escaped without a scratch? Actually there <i>is</i> a scratch, you just don&#39;t see it."}, {"owner": {"reputation": 1180, "user_id": 4233968, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/34a8a28a578ed988cb3b7800cc79a867?s=128&d=identicon&r=PG&f=1", "display_name": "achoora", "link": "https://stackoverflow.com/users/4233968/achoora"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1509540250, "post_id": 47054643, "comment_id": 81057164, "body": "@MichaelWalz Thats right , might be  in my selection of gcc compiler and the amd processor based on x86 architecture lies some thing which causes this index mis match thing. Any guide to debugging using disassembly would be helpful , since this can be my starting point to it .any references??. Today is a holiday , I have some time :D ."}, {"owner": {"reputation": 14830, "user_id": 3757232, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/kLzML.jpg?s=128&g=1", "display_name": "Jared Smith", "link": "https://stackoverflow.com/users/3757232/jared-smith"}, "edited": false, "score": 0, "creation_date": 1509548920, "post_id": 47054643, "comment_id": 81063044, "body": "I&#39;m voting to close this question as off-topic because it&#39;s asking for an explanation of a specific undefined behavior which is by definition not possible."}], "answers": [{"tags": [], "owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "is_accepted": true, "score": 5, "last_activity_date": 1509540487, "creation_date": 1509540487, "answer_id": 47055252, "question_id": 47054643, "link": "https://stackoverflow.com/questions/47054643/why-stack-smashing-happens-with-column-index-only-in-my-matrix-program/47055252#47055252", "title": "Why stack smashing happens with column index only in my matrix program?", "body": "<p>Most implementations of stack smashing detection is done by the prologue of the function writing a magic value (often called \"canary\", like a canary in a coal mine) on the stack. Then, the epilogue of the function checks if the magic value is still the same. Nothing in a correct program can overwrite the magic value therefore if the value has changed, the program must broken and is quickly killed.</p>\n\n<p>The two different variants of your program overwrite different parts of the stack. One of them happens to overwrite the canary. The other one doesn't.</p>\n\n<p>You were unlucky and the bug detection mechanism didn't detect the bug in one version of your program. No bug detection is perfect. </p>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 4, "last_activity_date": 1509540915, "creation_date": 1509540915, "answer_id": 47055396, "question_id": 47054643, "link": "https://stackoverflow.com/questions/47054643/why-stack-smashing-happens-with-column-index-only-in-my-matrix-program/47055396#47055396", "title": "Why stack smashing happens with column index only in my matrix program?", "body": "<p>Writing out of bounds of an array invokes undefined behavior, meaning that anything can happen.</p>\n\n<p>The compiler is free to arrange the memory layout of your local variables in any way it pleases. It can allocate them from top to bottom, from bottom to top, with lots of space in between or whatever. It doesn't need to allocate them on the stack - the computer doesn't even need to have a stack, as far as C is concerned. The compiler could also allocate the variables in register, or not allocate them at all.</p>\n\n<p>This is why various garage hacker tutorials speaking about \"stack smashing\" from a generic C programming point of view are confused. In order to actually exploit memory layout, you need to know exactly how the layout is done in the very specific case.</p>\n\n<p>On hosted systems, the stack use will be specified by the system ABI. It is common that the system uses so-called <a href=\"https://en.wikipedia.org/wiki/Call_stack#STACK-FRAME\" rel=\"nofollow noreferrer\">stack frames</a>, which are system-specific. Various protection mechanisms of the specific system may or may not be present.</p>\n\n<hr>\n\n<p>Another aspect of undefined behavior (a C programming term for things beyond the scope of the language), is that the compiler is free to assume that the programmer never invokes it. So when you declare an array of size 2, the compiler is free to generate code which assumes that you never access items beyond that. </p>\n\n<p>Meaning that even though you wrote code that access 1 item beyond the array, the compiler is not even obliged to listen to the programmer and generate the corresponding machine code.</p>\n"}], "owner": {"reputation": 1180, "user_id": 4233968, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/34a8a28a578ed988cb3b7800cc79a867?s=128&d=identicon&r=PG&f=1", "display_name": "achoora", "link": "https://stackoverflow.com/users/4233968/achoora"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 191, "favorite_count": 0, "closed_date": 1509575774, "accepted_answer_id": 47055252, "answer_count": 2, "score": 1, "last_activity_date": 1509540915, "creation_date": 1509538650, "last_edit_date": 1509539321, "question_id": 47054643, "link": "https://stackoverflow.com/questions/47054643/why-stack-smashing-happens-with-column-index-only-in-my-matrix-program", "closed_reason": "Duplicate", "title": "Why stack smashing happens with column index only in my matrix program?", "body": "<p>I have observed stack smashing and have read the posts about it,like this <a href=\"https://stackoverflow.com/questions/1345670/stack-smashing-detected\">Stack smashing detected</a>. and I understood that its like we are trying to override the boundaries and gcc have prevention mechanisms for that. But in my case when I change the row index to cross the bounds its printings 0s as values but when the column index is exceeding the bounds it's causing stack smashing.</p>\n\n<p>Following is the program with necessary comments </p>\n\n<pre><code>#include&lt;stdio.h&gt;  \nvoid main()  \n{  \n    int i,j;  \n    i=0;  \n    j=0;  \n    int d[2][2]={{0,0},{0,0}};  \n    for(i=0;i&lt;2;i++)   //**when I put  i&lt;=2 there is no stack smashing**     \n    {  \n        for(j=0;j&lt;2;j++)   //**When I put  j&lt;=2 there comes the  stack smashing**    \n        {  \n            if(i==j)  \n            {  \n                d[i][j]=1;  \n            }   \n            else  \n            {  \n                d[i][j]=0;  \n            }  \n            printf(\"%d  \",d[i][j]);  \n        }  \n        printf(\"\\n\");  \n    }  \n}\n</code></pre>\n\n<p>matrix$ ./a.out \nOutput with (i&lt;=2) and (j&lt;2)</p>\n\n<pre><code>1  0  \n0  1  \n0  0  \n</code></pre>\n\n<p>Out put with (i&lt;=2) and (j&lt;=2)\nmatrix$ ./a.out </p>\n\n<pre><code>1  0  0  \n0  1  0  \n0  0  1  \n</code></pre>\n\n<p><strong>* stack smashing detected *</strong>: ./a.out terminated\nAborted (core dumped)</p>\n\n<p>is there any inherent limit on the number of items that can be exceeded to cause stack smashing based on architecture. Or is this just random? Any explanation would help as I couldn't figure </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 1, "creation_date": 1509537948, "post_id": 47054332, "comment_id": 81055708, "body": "You should read about 2&#39;s complement representation of negative numbers. It explains it all."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1509538083, "post_id": 47054332, "comment_id": 81055776, "body": "Post the real code and the real output. Don&#39;t manually re-type it here, copy paste it."}, {"owner": {"reputation": 1, "user_id": 8867897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10f78c943c837556d0e751d901c81496?s=128&d=identicon&r=PG&f=1", "display_name": "Yael123", "link": "https://stackoverflow.com/users/8867897/yael123"}, "edited": false, "score": 0, "creation_date": 1509538149, "post_id": 47054332, "comment_id": 81055811, "body": "Where can I read about it? I&#39;m totally new to this website and programming in general."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1509538257, "post_id": 47054332, "comment_id": 81055879, "body": "@Yael123: It&#39;s buried quite deeply within the rules of C (which legitimises this question IMHO). Start reading a book: <a href=\"https://stackoverflow.com/questions/562303/the-definitive-c-book-guide-and-list\" title=\"the definitive c book guide and list\">stackoverflow.com/questions/562303/&hellip;</a>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1509538867, "post_id": 47054332, "comment_id": 81056240, "body": "If you study programming in a proper school, they teach you binary, hex and two&#39;s complement before you are even allowed to write a single line of code. <a href=\"https://en.wikipedia.org/wiki/Two%27s_complement\" rel=\"nofollow noreferrer\">Google two&#39;s complement</a>."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 2, "creation_date": 1509539177, "post_id": 47054332, "comment_id": 81056434, "body": "@Bathsheba This has little to do with C and everything to do with how CPUs work. And unlike C, CPUs have well-defined two&#39;s complement wrap-around. (Which would be why &quot;integer overflow is UB&quot; is a very stupid language restriction in the first place.)"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1509540317, "post_id": 47054332, "comment_id": 81057201, "body": "@Lundin: I wonder why it wasn&#39;t promoted to &quot;implementation defined&quot; in C99? On the C++ side, from C++11 we now have a well-defined <code>%</code> for negative arguments. Whoop-de-doo. But nothing for <code>int</code> overflow."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1509541479, "post_id": 47054332, "comment_id": 81057967, "body": "@Bathsheba It is because all the old men in ivory towers who still insist that C must support signed magnitude and one&#39;s complement computers. Because if C doesn&#39;t, then they can no longer make besserwisser comments to make themselves seem smart. &quot;But what if another signedness format is used!&quot;  &quot;But what about integer padding bits!&quot;  &quot;But what if the number is a trap representation!&quot;  And similar BS. Of course, there have never existed any signed magnitude or one&#39;s complement computers as mainstream products. But they must be supported, come hell or high water!"}], "answers": [{"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 5, "last_activity_date": 1509538476, "last_edit_date": 1509538476, "creation_date": 1509537745, "answer_id": 47054357, "question_id": 47054332, "link": "https://stackoverflow.com/questions/47054332/why-does-an-int-with-a-positive-value-become-negative-when-i-add-to-it-in-c/47054357#47054357", "title": "Why does an int with a positive value become negative when I add to it in c?", "body": "<p>Are you sure the output is not <code>2147483647, -2147483648</code>? I've never come across a platform where <code>2147483646</code> is a valid <code>int</code> and <code>2147483647</code> is not (despite it being theoretically possible).</p>\n\n<p>The behaviour of overflowing an <code>int</code> type is <em>undefined</em> in C.</p>\n\n<p>What appears to be happening here is a wraparound to INT_MIN once INT_MAX is attained (a fairly common manifestation of this particular undefined construct, but <strong>don't</strong> rely on that).</p>\n"}, {"comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1509538134, "post_id": 47054462, "comment_id": 81055801, "body": "&quot;4 bytes implementation&quot; -&gt; &quot;4 bytes, 2&#39;s complement implementation&quot;"}, {"owner": {"reputation": 31, "user_id": 8837195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b5bf508eb475eae777fe254180bc78d?s=128&d=identicon&r=PG&f=1", "display_name": "C&#233;sar PA", "link": "https://stackoverflow.com/users/8837195/c%c3%a9sar-pa"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1509538326, "post_id": 47054462, "comment_id": 81055916, "body": "You are right. I&#39;ve edited the comment to add that detail."}], "tags": [], "owner": {"reputation": 31, "user_id": 8837195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b5bf508eb475eae777fe254180bc78d?s=128&d=identicon&r=PG&f=1", "display_name": "C&#233;sar PA", "link": "https://stackoverflow.com/users/8837195/c%c3%a9sar-pa"}, "is_accepted": false, "score": 2, "last_activity_date": 1509538290, "last_edit_date": 1509538290, "creation_date": 1509538100, "answer_id": 47054462, "question_id": 47054332, "link": "https://stackoverflow.com/questions/47054332/why-does-an-int-with-a-positive-value-become-negative-when-i-add-to-it-in-c/47054462#47054462", "title": "Why does an int with a positive value become negative when I add to it in c?", "body": "<p>The output is <code>2147483647, -2147483648</code> and that's due to overflowing of the <code>int</code> type. This type in a 4 bytes and 2's complement implementation have a range of [\u20132,147,483,648, 2,147,483,647].\nYour overflow is undefined behaviour.</p>\n"}, {"comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1509538288, "post_id": 47054519, "comment_id": 81055893, "body": "&quot;integers are represented by 32 bits, with 2^32 possible values&quot; - very far from being necessarily the case."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1509539766, "post_id": 47054519, "comment_id": 81056808, "body": "32 bit 2&#39;s complement numbers range from \u20132147483648. Also, this is nonsense: &quot;The computer adds numbers mechanically, and doesn&#39;t check that adding caused it to &quot;go over&quot; the limit.&quot; Pretty much every single CPU in the world has some manner of condition code register where there is an overflow bit, called something like &#39;O&#39; or &#39;V&#39;. The computer does check for overflow and then uses a well-defined wrap-around."}], "tags": [], "owner": {"reputation": 915, "user_id": 3090929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f07a37a6cb6f79cee0ae3ebfb5930ae?s=128&d=identicon&r=PG&f=1", "display_name": "moomima", "link": "https://stackoverflow.com/users/3090929/moomima"}, "is_accepted": false, "score": -3, "last_activity_date": 1509538261, "creation_date": 1509538261, "answer_id": 47054519, "question_id": 47054332, "link": "https://stackoverflow.com/questions/47054332/why-does-an-int-with-a-positive-value-become-negative-when-i-add-to-it-in-c/47054519#47054519", "title": "Why does an int with a positive value become negative when I add to it in c?", "body": "<p>C is designed to work as closely as possible to the way a computer works. This means that numbers (or any data type, for that matter), is represented in memory in a very strict way. For instance, integers are represented by 32 bits, with 2^32 possible values. </p>\n\n<p>Depending on your computer, signed integers range from \u20132147483647 to 2147483647, where as unsigned integers range from 0 to 4294967295 (see <a href=\"https://msdn.microsoft.com/en-us/library/7fh3a000.aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/7fh3a000.aspx</a> or <a href=\"http://www.cplusplus.com/reference/climits/\" rel=\"nofollow noreferrer\">http://www.cplusplus.com/reference/climits/</a>)</p>\n\n<p>The computer adds numbers mechanically, and doesn't check that adding caused it to \"go over\" the limit. Instead, the number just goes from the maximum possible to the minimum possible values. </p>\n"}], "owner": {"reputation": 1, "user_id": 8867897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10f78c943c837556d0e751d901c81496?s=128&d=identicon&r=PG&f=1", "display_name": "Yael123", "link": "https://stackoverflow.com/users/8867897/yael123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 521, "favorite_count": 0, "answer_count": 3, "score": -4, "last_activity_date": 1509538476, "creation_date": 1509537679, "last_edit_date": 1509538201, "question_id": 47054332, "link": "https://stackoverflow.com/questions/47054332/why-does-an-int-with-a-positive-value-become-negative-when-i-add-to-it-in-c", "title": "Why does an int with a positive value become negative when I add to it in c?", "body": "<p>I wrote in c the code:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\nint main()\n{\n\n    int num= 2147483646;\n    printf(\"%d,%d\" , num+1, num+2);\n\n    return 0;\n} \n</code></pre>\n\n<p>and the output is <code>-2147483647,-2147483648</code></p>\n\n<p>Why does the number becomes negative when I add 2 to the variable num?</p>\n"}, {"tags": ["c", "linux", "compiler-errors", "sdk", "linker"], "comments": [{"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 0, "creation_date": 1509538559, "post_id": 47053886, "comment_id": 81056074, "body": "What operating system will the binary be running on? Knowing the naming conventions of those tools &quot;aarch64-none&quot; kind of implies no operating system. What makes you think that there is a <code>dl</code> library at all? &quot;Xilinx SDK&quot; from quick googling seems to be intended to build stuff that runs on bare metal."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1509540504, "post_id": 47053886, "comment_id": 81057332, "body": "Use <code>--sysroot</code> to point to the target&#39;s headers and libraries."}], "answers": [{"tags": [], "owner": {"reputation": 7371, "user_id": 1510211, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4acda0216d7fd2ea07c31c0cfc53a714?s=128&d=identicon&r=PG", "display_name": "Shachar Shemesh", "link": "https://stackoverflow.com/users/1510211/shachar-shemesh"}, "is_accepted": false, "score": 0, "last_activity_date": 1509539442, "creation_date": 1509539442, "answer_id": 47054909, "question_id": 47053886, "link": "https://stackoverflow.com/questions/47053886/how-to-access-ldl-in-cross-compiler-in-sdk/47054909#47054909", "title": "How to access -ldl in cross compiler in SDK", "body": "<p>Different parts of your answer seem to conflict.</p>\n\n<p><code>dlopen</code>, <code>dlsym</code> and friends are used to load code from another <strong>file</strong> on the filesystem. In other words, these functions are related to loading code, at runtime, from a library available on the target platform filesystem and operating system.</p>\n\n<p>In the case of cross compiling, the toolchain needs to provide the library (<code>libdl.so</code> or <code>libdl.a</code>) that has the implementaiton of those functions. The toolchain provide the code that has the relevant <em>operating system</em> calls to open the file with the code, map it to memory and link it into the running program.</p>\n\n<p>Which is where the conflict comes into play. The toolchain you mention seems to be <strong>bare metal</strong> toolchain. In other words, this is a tool chain for running your code directly on the chip, with no operating system. If you have no operating system, it should be obvious that you cannot use it in order to load further code at runtime.</p>\n\n<p>With that in mind, it should be obvious why the tool chain does not supply you with a suitable implementation of <code>libdl.a</code>. It cannot be generically implemented on the platform.</p>\n"}], "owner": {"reputation": 1, "user_id": 8829868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/692df8b38372a3bc5c047cf1f1535a93?s=128&d=identicon&r=PG&f=1", "display_name": "Balakrishna Modela", "link": "https://stackoverflow.com/users/8829868/balakrishna-modela"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 301, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1509539442, "creation_date": 1509536082, "question_id": 47053886, "link": "https://stackoverflow.com/questions/47053886/how-to-access-ldl-in-cross-compiler-in-sdk", "title": "How to access -ldl in cross compiler in SDK", "body": "<p>i am using Xilinx SDK with cross compiler as <code>aarch64-none-elf-gcc</code>\ni am loading a shared library in my program and i am getting error as </p>\n\n<pre><code>Building target: fsbl.elf\nInvoking: ARM v8 gcc linker\naarch64-none-elf-gcc -L\"/proj/ssw_xhd/boot/balakrish/workspace/hello_world/Debug\" -Lwrk/released/2017.3/GA/2017.3_1005_1/installs/lin64/SDK/2017.3/gnu/aarch64/lin/aarch64-none/bin/../lib/gcc/aarch64-none-elf/6.2.1/../../../../aarch64-none-elf/bin/ld -Wl,-T -Wl,../src/lscript.ld -L../../fsbl_bsp/psu_cortexa53_0/lib -o \"fsbl.elf\"  ./src/psu_init.o ./src/xfsbl_authentication.o ./src/xfsbl_board.o ./src/xfsbl_bs.o ./src/xfsbl_csu_dma.o ./src/xfsbl_dfu_util.o ./src/xfsbl_exit.o ./src/xfsbl_handoff.o ./src/xfsbl_hooks.o ./src/xfsbl_image_header.o ./src/xfsbl_initialization.o ./src/xfsbl_main.o ./src/xfsbl_misc.o ./src/xfsbl_misc_drivers.o ./src/xfsbl_nand.o ./src/xfsbl_partition_load.o ./src/xfsbl_plpartition_valid.o ./src/xfsbl_qspi.o ./src/xfsbl_rsa_sha.o ./src/xfsbl_sd.o ./src/xfsbl_translation_table.o ./src/xfsbl_usb.o   -lhello -Wl,--start-group,-lxil,-lgcc,-lc,--end-group -Wl,--start-group,-lxilffs,-lxil,-lgcc,-lc,--end-group -Wl,--start-group,-lxilsecure,-lxil,-lgcc,-lc,--end-group -Wl,--start-group,-lxilpm,-lxil,-lgcc,-lc,--end-group -n\n/tmp/ccjtx6CQ.ltrans0.ltrans.o: In function `main':\n&lt;artificial&gt;:(.text.startup+0x18c): undefined reference to `dlopen'\n&lt;artificial&gt;:(.text.startup+0x18c): relocation truncated to fit: R_AARCH64_CALL26 against undefined symbol `dlopen'\n&lt;artificial&gt;:(.text.startup+0x19c): undefined reference to `dlsym'\n&lt;artificial&gt;:(.text.startup+0x19c): relocation truncated to fit: R_AARCH64_CALL26 against undefined symbol `dlsym'\n&lt;artificial&gt;:(.text.startup+0x1a4): undefined reference to `library_function'\n&lt;artificial&gt;:(.text.startup+0x1a4): relocation truncated to fit: R_AARCH64_CALL26 against undefined symbol `library_function'\n&lt;artificial&gt;:(.text.startup+0x1ac): undefined reference to `dlclose'\n&lt;artificial&gt;:(.text.startup+0x1ac): relocation truncated to fit: R_AARCH64_CALL26 against undefined symbol `dlclose'\ncollect2: error: ld returned 1 exit status\nmake: *** [fsbl.elf] Error 1\n</code></pre>\n\n<p>Finally my question is how to load -ldl in cross compiling\nif i use -ldl in C/C++ Build settings-.libraries->library paths . I am getting error as</p>\n\n<pre><code>/wrk/released/2017.3/GA/2017.3_1005_1/installs/lin64/SDK/2017.3/gnu/aarch64/lin/aarch64-none/bin/../lib/gcc/aarch64-none-elf/6.2.1/../../../../aarch64-none-elf/bin/ld: cannot find -ldl\ncollect2: error: ld returned 1 exit status\nmake: *** [fsbl.elf] Error 1\n</code></pre>\n"}, {"tags": ["c", "math", "fixed-point"], "answers": [{"tags": [], "owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "is_accepted": false, "score": 1, "last_activity_date": 1509536508, "creation_date": 1509536508, "answer_id": 47054018, "question_id": 47053852, "link": "https://stackoverflow.com/questions/47053852/horners-rule-using-fixed-point-arithmetic-in-c/47054018#47054018", "title": "Horner&#39;s rule using fixed point arithmetic in C", "body": "<p>First thing is to determine the domain and codomain of the polynomial and the partial ones. Then you can adjust the shifts to minimize the truncation error while avoiding overflows.</p>\n\n<p>If you need to automate this process, you will have to find the minima and maxima of all these polynomials, which requires solving for the real roots.</p>\n"}], "owner": {"reputation": 91, "user_id": 8795394, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh4.googleusercontent.com/-ghltm1MVXpE/AAAAAAAAAAI/AAAAAAAAACY/tSUooqUIvEo/photo.jpg?sz=128", "display_name": "Shaown", "link": "https://stackoverflow.com/users/8795394/shaown"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1509536508, "creation_date": 1509535970, "last_edit_date": 1509536177, "question_id": 47053852, "link": "https://stackoverflow.com/questions/47053852/horners-rule-using-fixed-point-arithmetic-in-c", "title": "Horner&#39;s rule using fixed point arithmetic in C", "body": "<p>I am having a tough time tracking down the radix point for this following Horner's rule using fixed point arithmetic.</p>\n\n<pre><code>int16_t horner(int16_t q)\n{\n    const int16_t c0 = 0x0033;\n    const int16_t c1 = 0x0055;\n    const int16_t c2 = 0x001C;\n    const int16_t c3 = 0x0048;\n    const int16_t c4 = 0x0200;\n\n    horner_rule = c0 + q * (c1 - q * (c2 + q * (c3 - q * c4)));\n\n    return horner_rule;\n}\n</code></pre>\n\n<p>Where <code>c0</code>, <code>c1</code>, <em>etc.</em> are different 16-bit signed coefficients, <code>q</code> is the value that I would like to evaluate at (<code>q</code> is taken as an input and shifted to 16-bit signed format). All these values are already shifted into signed 16-bit format. I have implemented this in floating point arithmetic and it just works fine.</p>\n\n<p>My question is, how shall I proceed to get my desired value maintaining the radix point and keeping the overflow in control?</p>\n"}, {"tags": ["c", "arrays", "gcc", "struct", "unused-variables"], "comments": [{"owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "edited": false, "score": 2, "creation_date": 1509535190, "post_id": 47053565, "comment_id": 81054115, "body": "Put this attribute to the variable, not to the struct definition. <code>__attribute__ ((unused)) struct  St s[1];</code>"}], "answers": [{"comments": [{"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1509537738, "post_id": 47053666, "comment_id": 81055594, "body": "I do not recommend hiding array types behind <code>typedef</code>. It&#39;s easier to make mistakes due to array decay. Array variables (like pointers too) are better declared explicitly."}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 9, "last_activity_date": 1509535248, "creation_date": 1509535248, "answer_id": 47053666, "question_id": 47053565, "link": "https://stackoverflow.com/questions/47053565/why-unused-attribute-generated-warning-for-array-of-struct/47053666#47053666", "title": "Why &quot;unused attribute&quot; generated warning for array of struct?", "body": "<p>You are not attaching the attribute to a variable, you are attaching it to a type. In this case, different rules apply:</p>\n\n<blockquote>\n  <p>When attached to a type (including a <code>union</code> or a <code>struct</code>), this [unused] attribute means that variables of that type are meant to appear possibly unused. GCC will not produce a warning for any variables of that type, even if the variable appears to do nothing.</p>\n</blockquote>\n\n<p>This is exactly what happens inside <code>func1</code>: variable <code>struct St s</code> is of type <code>struct St</code>, so the warning is not generated.</p>\n\n<p>However, <code>func2</code> is different, because the type of <code>St s[1]</code> is not <code>struct St</code>, but an array of <code>struct St</code>. This array type has no special attributes attached to it, hence the warning is generated.</p>\n\n<p>You can add an attribute to an array type of a specific size with <code>typedef</code>:</p>\n\n<pre><code>typedef __attribute__ ((unused)) struct St ArrayOneSt[1];\n...\nvoid func2() { \n  ArrayOneSt s;   // No warning\n}\n</code></pre>\n\n<p><a href=\"https://ideone.com/pps5uI\" rel=\"noreferrer\">Demo.</a></p>\n"}, {"tags": [], "owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "is_accepted": false, "score": 3, "last_activity_date": 1509535504, "creation_date": 1509535504, "answer_id": 47053737, "question_id": 47053565, "link": "https://stackoverflow.com/questions/47053565/why-unused-attribute-generated-warning-for-array-of-struct/47053737#47053737", "title": "Why &quot;unused attribute&quot; generated warning for array of struct?", "body": "<p>This attribute should be applied on a variable <strong>not</strong> <code>struct</code> definition.\nChanging it to</p>\n\n<pre><code>void func2()\n{ \n  __attribute__ ((unused)) struct St s[1];  \n}\n</code></pre>\n\n<p>will do the job.</p>\n"}], "owner": {"reputation": 30168, "user_id": 5612562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gzBQY.jpg?s=128&g=1", "display_name": "msc", "link": "https://stackoverflow.com/users/5612562/msc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 567, "favorite_count": 1, "accepted_answer_id": 47053666, "answer_count": 2, "score": 2, "last_activity_date": 1509541700, "creation_date": 1509534881, "last_edit_date": 1509541700, "question_id": 47053565, "link": "https://stackoverflow.com/questions/47053565/why-unused-attribute-generated-warning-for-array-of-struct", "title": "Why &quot;unused attribute&quot; generated warning for array of struct?", "body": "<p>Here used, <code>unused</code> attribute with structure.</p>\n\n<p>According to <a href=\"https://gcc.gnu.org/onlinedocs/gcc-3.2/gcc/Variable-Attributes.html\" rel=\"nofollow noreferrer\">GCC</a> document:</p>\n\n<blockquote>\n  <p><strong>unused :</strong></p>\n  \n  <p>This attribute, attached to a variable, means that the variable is\n  meant to be possibly unused. GCC will not produce a warning for this\n  variable.</p>\n</blockquote>\n\n<p>But, In the following code, array of struct generated warning.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nstruct __attribute__ ((unused)) St \n{ \n    int x; \n};\n\nvoid func1()\n{\n  struct St s;      // no warning, ok\n}\n\nvoid func2()\n{ \n  struct St s[1];   // Why warning???\n}\n\nint main() {\n    func1();\n    func2();\n    return 0;\n}\n</code></pre>\n\n<p>Why does GCC generated warning for array of struct?</p>\n"}, {"tags": ["c", "sendmail", "reentrancy", "milter"], "comments": [{"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1509537840, "post_id": 47053441, "comment_id": 81055642, "body": "&quot;This for sure means that malloc() is thread-safe, and it probably means that malloc() is not re-entrant.&quot; Something which is thread-safe may also be re-entrant but not necessarily vice versa. Imagine a single threaded application which passes function pointers to functions (e.g. signal handlers in a signal-slot concept). This may cause situations where re-entrance becomes an issue though thread-safety is not one. IMHO, if <code>malloc()</code> is granted to be thread-safe I would bet it&#39;s re-entrant as well."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1509537905, "post_id": 47053441, "comment_id": 81055679, "body": "Found a nice Q&amp;A about this: <a href=\"https://stackoverflow.com/q/856823/7478597\">SO: Threadsafe vs re-entrant</a>."}, {"owner": {"reputation": 2997, "user_id": 3239842, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/43fb8ed63990c7b890667c0a6c5e4674?s=128&d=identicon&r=PG&f=1", "display_name": "Binarus", "link": "https://stackoverflow.com/users/3239842/binarus"}, "reply_to_user": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1509546381, "post_id": 47053441, "comment_id": 81061338, "body": "@Scheff The reason why I believe that <code>malloc()</code> is thread-safe is that they are using mutexes (i.e. a sort of locks). The reason why I believe that <code>malloc()</code> is not re-entrant is that they are using mutexes (i.e. a sort of locks) ..."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1509547415, "post_id": 47053441, "comment_id": 81062088, "body": "Well, I followed the link I provided above and read it again. The (currently) <a href=\"https://stackoverflow.com/a/33445858/7478597\">last answer</a> makes a clear distinction between thread-safe and re-entrant. Haven&#39;t seen it this clear before. Thus, I must admit <code>malloc()</code> might be thread-safe but not necessarily re-entrant (if not stated in the manual)."}], "owner": {"reputation": 2997, "user_id": 3239842, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/43fb8ed63990c7b890667c0a6c5e4674?s=128&d=identicon&r=PG&f=1", "display_name": "Binarus", "link": "https://stackoverflow.com/users/3239842/binarus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1509548756, "creation_date": 1509534338, "last_edit_date": 1509548756, "question_id": 47053441, "link": "https://stackoverflow.com/questions/47053441/does-a-milter-callback-really-need-to-be-re-entrant", "title": "Does a milter callback really need to be re-entrant?", "body": "<p>I need to develop a milter for Sendmail and have thought a long time about which language / framework I should use. Finally, I have decided to do it in plain C directly using the milter API.</p>\n\n<p>I have studied <a href=\"http://www.elandsys.com/resources/sendmail/libmilter/\" rel=\"nofollow noreferrer\">the milter API documentation</a> and think I have grasped the concepts. But there is one thing which worries me heavily. From <a href=\"http://www.elandsys.com/resources/sendmail/libmilter/overview.html#Multithreading\" rel=\"nofollow noreferrer\">this section</a>:</p>\n\n<blockquote>\n  <p>A single filter process may handle any number of connections\n  simultaneously. All filtering callbacks must therefore be reentrant,\n  and use some appropriate external synchronization methods to access\n  global data [...].</p>\n</blockquote>\n\n<p>While I very well understand why the callbacks must be thread-safe, I cannot understand why they must be re-entrant. I cannot imagine that those callbacks could be called from an interrupt or a signal handler (perhaps except the abort callback, I'll have to re-read this).</p>\n\n<p>The problem with the requirement to be re-entrant is that a re-entrant function must not call non-re-entrant code. Therefore, if the callbacks really had to be re-entrant, I couldn't use <code>malloc()</code> and most other library functions in there; from <code>man 3 malloc</code>:</p>\n\n<blockquote>\n  <p>To avoid corruption in multithreaded applications, mutexes are used\n  internally to protect the memory-management data structures employed\n  by these functions [...]</p>\n</blockquote>\n\n<p>This for sure means that <code>malloc()</code> is thread-safe, and it probably means that <code>malloc()</code> is not re-entrant, and thus no function which uses it.</p>\n\n<p>So I have got two questions:</p>\n\n<p>1) Do the milter callbacks really need to be re-entrant, or is this actually a very odd wording for \"need to be thread-safe\" in the milter API documentation?</p>\n\n<p>2) If they really need to be re-entrant, how can I circumvent the problems mentioned above? Due to the characteristics of the milter API, I can hardly imagine how to do something reasonable in the callbacks without using <code>malloc()</code> and other non-re-entrant library functions.</p>\n"}, {"tags": ["c", "performance"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1509534073, "post_id": 47053247, "comment_id": 81053532, "body": "Don&#39;t worry about such details, a few Kb (or even Mb) more or less won&#39;t make any noticeable change. Focus rather on the algorithms you&#39;re useing."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 1, "creation_date": 1509534144, "post_id": 47053247, "comment_id": 81053564, "body": "For the amount of text (a few KiB) you&#39;re describing, the difference in loading/execution speed will be insignificant, unless you are using some very old/slow hardware.    I wouldn&#39;t bet on that being true if you are using a unix.  If you are using such hardware, do testing to determine if the effect is significant at all."}], "answers": [{"comments": [{"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1509537865, "post_id": 47053326, "comment_id": 81055657, "body": "Jonathan, many call and jmp addresses are relative to where the exe is loaded in memory. How are these resolved with demand paging?"}, {"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1509620408, "post_id": 47053326, "comment_id": 81095398, "body": "Paul, I&#39;m not sure what you&#39;re getting at. Let&#39;s say the program is loaded at 1000 and libfoo is loaded at 4000. The calls to libfoo can still be calculated, even though libfoo isn&#39;t actually present in RAM. From the perspective of userspace demand-paging doesn&#39;t even exist; it is transparent."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1509622267, "post_id": 47053326, "comment_id": 81096477, "body": "Assume a non-demand paging system and a (small) executable is loaded into memory. Are there adresses that the loader needs to fix before the executable can run? If so, in demand-paging a page gets loaded into (virtual) memory - does the paging loader fix addresses in this page (that it got from the exe on disk)?"}, {"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1512383289, "post_id": 47053326, "comment_id": 82220185, "body": "I understand your question now. You&#39;re asking how/when relocations are applied. Depmand paging is implemented by the kernel, while dynamic loading is implemented in user-space. So demand paging doesn&#39;t really affect that part of the load process. It does invert the problem though: I believe the application of relocations causes pages to be faulted in before they&#39;re executed / accessed by the program. I&#39;m sure there are optimizations to avoid this. I&#39;ll have to look for a reference."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1512388266, "post_id": 47053326, "comment_id": 82223034, "body": "So your answer to this question should have been &quot;dynamic loading&quot; and the address fix-ups are applied by the dynamic loader. Once loaded, the demand-paging of the kernel takes over. Though they need to work in concert: a non-loaded (never-loaded) page must first be fixed-up and a paged-out page can just be reloaded (paged-in)."}, {"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1512391264, "post_id": 47053326, "comment_id": 82224745, "body": "This conversation is starting to get a bit broad. Demand paging is just a natural function of virtual memory in Linux, and pages (from files or from nothing) are mapped into a process&#39; virtual memory space with <code>mmap</code>."}, {"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 1, "creation_date": 1512391349, "post_id": 47053326, "comment_id": 82224802, "body": "When you run a dynamic executable on Linux, the kernel reads the ELF header and sees that it is requesting an interpreter (the dynamic linker/loader e.g. <code>&#47;lib64&#47;ld-linux-x86-64.so.2</code>). Instead of loading the executable, the kernel invokes the loader (itself a necessarily statically-linked executable), passing it the path of the file to be executed. <code>ld.so</code> then proceeds to <code>mmap</code> load segments of the executable into memory, then performs relocations as required. At all times, it&#39;s up to the kernel whether or not a given page is actually present in RAM or not."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1512391804, "post_id": 47053326, "comment_id": 82225075, "body": "Great! Thanks for your in-depth research. So a not-yet paged-in (loaded) page generates a page-fault and because the page isn&#39;t in the swap-file, control is given to ld which loads (<code>mmap</code>) the page and does the fix-ups, then returns control to the kernel which transfes control to the now loaded page. An already loaded but paged-out page is just paged-in by the kernel."}, {"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1512392277, "post_id": 47053326, "comment_id": 82225365, "body": "Not quite. <code>mmap()</code> says &quot;pages from this file should be visible in virtual memory&quot;. Whether or not they have actually been read from disk into RAM is up to the kernel. Only the kernel handles page faults.  <code>ld.so</code> first dictates what should be loaded where, and the kernel makes it so.  There is no back-and-forth between the kernel and <code>ld.so</code> like you&#39;ve described."}], "tags": [], "owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "is_accepted": true, "score": 3, "last_activity_date": 1509533936, "creation_date": 1509533936, "answer_id": 47053326, "question_id": 47053247, "link": "https://stackoverflow.com/questions/47053247/will-inlining-help-into-my-executable-reduce-loading-execution-speed/47053326#47053326", "title": "Will inlining help into my executable reduce loading/execution speed?", "body": "<p>You have nothing to worry about.</p>\n\n<p>Linux uses demand paging for executables. That means when the executable is first launched, nothing is read from disk. Only when a page fault occurs (meaning the program tried to access memory which is not yet present) are the pages actually read from disk.</p>\n\n<p>Some binaries written in Go are <em>tens of megabytes</em> in size and have no noticeable startup latency.</p>\n\n<p>I encourage you to actually <em>try</em> each approach and benchmark the startup delay.</p>\n"}], "owner": {"reputation": 984, "user_id": 1503120, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7aa23c93c08150267e6f0014fac9285a?s=128&d=identicon&r=PG", "display_name": "jamadagni", "link": "https://stackoverflow.com/users/1503120/jamadagni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 47053326, "answer_count": 1, "score": 1, "last_activity_date": 1520194409, "creation_date": 1509533653, "last_edit_date": 1520194409, "question_id": 47053247, "link": "https://stackoverflow.com/questions/47053247/will-inlining-help-into-my-executable-reduce-loading-execution-speed", "title": "Will inlining help into my executable reduce loading/execution speed?", "body": "<p>I have written a program written in C intended for command-line use and expected to be frequently use interspersed into shell-scripts has specialized help which cannot be served by <code>man</code> or <code>info</code> since it heavily uses ANSI escape sequences for colours.</p>\n\n<p>The help as plain text including the escape sequences weighs 18.7 KiB. The executable with it inlined as a zero-terminated string (and an <code>if</code> clause to display it upon request) weighs 39.0 KiB and without it weighs 19 KiB. (No optimization or debugging options at compiling.)</p>\n\n<p>I was thinking of inlining the help into the executable to make it easy for users to access it rather than having to remember a separate file name and location to <code>cat</code> to their terminal. (The executable will be in the shell search path so that's not an issue there.)</p>\n\n<p>But I am concerned that the doubling will reduce the loading/execution speed.</p>\n\n<p>OTOH I seem to have read/heard that the OS will cache the loaded executable so I need not worry much about this.</p>\n\n<p>Another option is to make another separate <code>-help</code> executable (which weighs 28 KiB but which I don't need to worry about since it's not frequent use).</p>\n\n<p>Are there any best practices for this kind of situation? Please advise. Thank you!</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 1768, "user_id": 7672985, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a6233938657e3693fca648b313da8557?s=128&d=identicon&r=PG", "display_name": "Gabriel Mesquita", "link": "https://stackoverflow.com/users/7672985/gabriel-mesquita"}, "edited": false, "score": 0, "creation_date": 1509533549, "post_id": 47053160, "comment_id": 81053214, "body": "you need this validation in your first scanf or in you getchar?"}, {"owner": {"reputation": 1699, "user_id": 4891815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/niZw9.jpg?s=128&g=1", "display_name": "Gnqz", "link": "https://stackoverflow.com/users/4891815/gnqz"}, "edited": false, "score": 4, "creation_date": 1509533657, "post_id": 47053160, "comment_id": 81053289, "body": "This question has striking resemblance with <a href=\"https://stackoverflow.com/questions/47035858/how-to-restrict-a-user-to-not-be-able-to-input-a-0-in-c#comment81017956_47035858\" title=\"how to restrict a user to not be able to input a 0 in c%23comment81017956_47035858\">stackoverflow.com/questions/47035858/&hellip;</a>"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1509533877, "post_id": 47053160, "comment_id": 81053419, "body": "you&#39;re not sure how to test if <code>option1</code> is 0 or a negative number?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8867549"}, "edited": false, "score": 0, "creation_date": 1509533996, "post_id": 47053160, "comment_id": 81053484, "body": "I will concieve that it is extremely similar and I used the suggestion but it has a bug as when I put 0 in, I have to type it in twice that it recognises the input."}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1509534307, "post_id": 47053160, "comment_id": 81053644, "body": "If there is a bug in your code, describe it in the text of your question. You might want to read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 1, "creation_date": 1509534547, "post_id": 47053160, "comment_id": 81053763, "body": "<code>scanf(&quot;%f%c&quot;,&amp;option1,&amp;c) == 0</code> --&gt; <code>scanf(&quot;%f%c&quot;,&amp;option1,&amp;c) != 2</code>"}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1509535181, "post_id": 47053160, "comment_id": 81054107, "body": "<code>check1</code> should be an <code>int</code> instead of a <code>float</code> since <code>getchar()</code> returns an <code>int</code>."}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 1, "creation_date": 1509535960, "post_id": 47053160, "comment_id": 81054524, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/47035858/how-to-restrict-a-user-to-not-be-able-to-input-a-0-in-c\">How to restrict a user to not be able to input a 0 in c</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1924, "user_id": 2669042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c66a47707c3d1748c9977727ddfa4d50?s=128&d=identicon&r=PG", "display_name": "xing", "link": "https://stackoverflow.com/users/2669042/xing"}, "is_accepted": false, "score": 0, "last_activity_date": 1509538307, "creation_date": 1509538307, "answer_id": 47054535, "question_id": 47053160, "link": "https://stackoverflow.com/questions/47053160/how-to-prevent-the-user-from-inputting-a-0-or-a-negative-number-in-c/47054535#47054535", "title": "How to prevent the user from inputting a 0 or a negative number in c", "body": "<p>Consider using <code>fgets</code> for input and parse with <code>strtod</code>. Unless there is a reason, use <code>double</code> instead of <code>float</code>. Using a min of <code>-HUGE_VALF</code> and a max of <code>HUGE_VALF</code> will restrict the double to the range of a float. This uses a min of <code>1.0e-10</code> to reject zero and smaller. The valid delimiter is <code>\"\\n\"</code> but that can be changed as needed to allow commas or others.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;limits.h&gt;\n#include &lt;math.h&gt;\n\nint parse_double ( char *line, char **next, char *delim, double *value, double min, double max) {\n    char *end = NULL;\n    double input = 0.0;\n\n    errno = 0;\n    input = strtod ( line, &amp;end);\n    if ( ( errno == ERANGE &amp;&amp; ( input == HUGE_VAL || input == -HUGE_VAL))\n    || ( errno != 0 &amp;&amp; input == 0.0)){\n        perror ( \"input: \");\n        return 0;// failure\n    }\n    if ( end == line) {\n        line[strcspn ( line, \"\\n\")] = '\\0';\n        printf ( \"input [%s] MUST be a number\\n\", line);\n        return 0;// failure\n    }\n    if ( *end != '\\0' &amp;&amp; !( delim &amp;&amp; ( strchr ( delim, *end)))) {// is *end '\\0' or is *end in delim\n        line[strcspn ( line, \"\\n\")] = '\\0';//remove trailing newline\n        printf ( \"problem with input: [%s] \\n\", line);\n        return 0;// failure\n    }\n    if ( next != NULL) {// if next is NULL, caller did not want pointer to end of parsed value\n        *next = end;// *next allows modification to caller's pointer\n    }\n    if ( input &lt; min || input &gt; max) {\n        printf ( \"out of range\\n\");\n        return 0;// failure\n    }\n    if ( value != NULL) {// make sure value is not NULL\n        *value = input;// *value allows modification to callers double\n    }\n    return 1;// success\n}\n\nint read_double ( double *dValue) {\n    char line[900] = {'\\0'};\n    int valid = 0;\n\n    *dValue = 0.0;\n    do {\n        printf ( \"Enter a number or quit\\n\");\n        if ( fgets ( line, sizeof ( line), stdin)) {//read a line\n            if ( strcmp ( line, \"quit\\n\") == 0) {\n                return 0;//exit when quit is entered\n            }\n            valid = parse_double ( line, NULL, \"\\n\", dValue, 1.0e-10, HUGE_VALF);\n        }\n        else {\n            return 0;//fgets failed\n        }\n    } while ( !valid);\n\n    return 1;\n}\n\nint main()\n{\n    double dResult = 0.0;\n\n    if ( read_double ( &amp;dResult)) {\n        printf ( \"You entered %f\\n\", dResult);\n    }\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8867549"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 657, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1509538307, "creation_date": 1509533388, "question_id": 47053160, "link": "https://stackoverflow.com/questions/47053160/how-to-prevent-the-user-from-inputting-a-0-or-a-negative-number-in-c", "title": "How to prevent the user from inputting a 0 or a negative number in c", "body": "<p>I have written this function:</p>\n\n<pre><code>float checkInput1(void){\n    float option1,check1;\n    char c;\n\n    do{\n        printf(\"Enter the first side of the triangle: \");\n\n        if(scanf(\"%f%c\",&amp;option1,&amp;c) == 0 || c != '\\n'){\n            while((check1 = getchar()) != 0 &amp;&amp; check1 != '\\n' &amp;&amp; check1 != EOF);\n            printf(\"\\t[ERR] Invalid number for the triplet.\\n\");\n        }else{\n            break;\n        }\n    }while(1);\n    return option1;\n}\n</code></pre>\n\n<p>To stop the user from entering letters and such, however, I would like to extend this validation function such that the user cannot input 0 or negative numbers.\nHow do I do that?\nThanks in advance</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 846, "user_id": 4675426, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/6a40956551f38afd8a2c712b4780d73a?s=128&d=identicon&r=PG", "display_name": "Karthick", "link": "https://stackoverflow.com/users/4675426/karthick"}, "edited": false, "score": 2, "creation_date": 1509532970, "post_id": 47052973, "comment_id": 81052848, "body": "you need to increment a and b inside for"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1509533365, "post_id": 47052973, "comment_id": 81053105, "body": "Please ask a coherent question. Your title says: &quot;first character in both string won&#39;t swap.&quot; Yet the <b>first characters are the only ones that are swapped!</b> Please read the help page on <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1509533480, "post_id": 47052973, "comment_id": 81053178, "body": "Also you&#39;re printing <code>string2</code> as the <b>string 1</b> and vice versa!"}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 1, "creation_date": 1509533958, "post_id": 47052973, "comment_id": 81053465, "body": "All you&#39;re doing is swapping the first character, then you&#39;re printing the strings in reverse order (string2 followed by string1).  So it <i>looks</i> like everything but the first character has been swapped, but in fact it&#39;s the exact opposite.  You&#39;ve been given a solution but your other bug (the backwards printf) prevented you from recognizing it."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 7290442, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IJm9v.jpg?s=128&g=1", "display_name": "p-k-h", "link": "https://stackoverflow.com/users/7290442/p-k-h"}, "edited": false, "score": 0, "creation_date": 1509533560, "post_id": 47053072, "comment_id": 81053216, "body": "Thanks for your reply, but I&#39;ve tried the corrected version but it won&#39;t swap the string..."}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 1, "creation_date": 1509533564, "post_id": 47053072, "comment_id": 81053220, "body": "Another way to control it would be to swap up to and including the terminating null character."}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "reply_to_user": {"reputation": 41, "user_id": 7290442, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IJm9v.jpg?s=128&g=1", "display_name": "p-k-h", "link": "https://stackoverflow.com/users/7290442/p-k-h"}, "edited": false, "score": 0, "creation_date": 1509533619, "post_id": 47053072, "comment_id": 81053264, "body": "@k&#39;hng Are you sure?  You&#39;re printing string2, string1 - try reversing them in your <code>printf</code>."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 41, "user_id": 7290442, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IJm9v.jpg?s=128&g=1", "display_name": "p-k-h", "link": "https://stackoverflow.com/users/7290442/p-k-h"}, "edited": false, "score": 1, "creation_date": 1509533651, "post_id": 47053072, "comment_id": 81053284, "body": "@k&#39;hng yes it does, comment out the call to <code>swap</code> in your program and see what happens."}, {"owner": {"reputation": 41, "user_id": 7290442, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IJm9v.jpg?s=128&g=1", "display_name": "p-k-h", "link": "https://stackoverflow.com/users/7290442/p-k-h"}, "edited": false, "score": 0, "creation_date": 1509534061, "post_id": 47053072, "comment_id": 81053527, "body": "Yup finally get it to work. I&#39;ve done so by reversing the string 1 and string 2 in my scanf. What a mistake I&#39;ve made..Thank Tom and Michael for being such a great help..."}, {"owner": {"reputation": 41, "user_id": 7290442, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IJm9v.jpg?s=128&g=1", "display_name": "p-k-h", "link": "https://stackoverflow.com/users/7290442/p-k-h"}, "edited": false, "score": 0, "creation_date": 1509534182, "post_id": 47053072, "comment_id": 81053584, "body": "If its not too much trouble can you guys please explain to me why the other function will give me the same problem as well? and what should I do to fix it?"}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "reply_to_user": {"reputation": 41, "user_id": 7290442, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IJm9v.jpg?s=128&g=1", "display_name": "p-k-h", "link": "https://stackoverflow.com/users/7290442/p-k-h"}, "edited": false, "score": 1, "creation_date": 1509534314, "post_id": 47053072, "comment_id": 81053650, "body": "@k&#39;hng The other function you posted is just swapping the first character.  If you want to swap the entire strings, you need to loop over each pair of characters, not just the first pair.  Try working it out on paper.  Follow the code and see what it does.  It really doesn&#39;t get much simpler than this."}], "tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": false, "score": 1, "last_activity_date": 1509533130, "creation_date": 1509533130, "answer_id": 47053072, "question_id": 47052973, "link": "https://stackoverflow.com/questions/47052973/the-first-character-in-both-string-wont-swap-in-c/47053072#47053072", "title": "The first character in both string won&#39;t swap in C", "body": "<p>Your <code>swap</code> function is wrong:</p>\n\n<p>Here is the corrected version:</p>\n\n<pre><code>void swap(char* a, char* b)\n{\n  int i; char temp;\n  for (i = 0; i&lt;SIZE; i++)\n  {\n    temp = a[i];\n    a[i] = b[i];\n    b[i] = temp;\n  }\n}\n</code></pre>\n\n<hr>\n\n<ul>\n<li>you don't need a <code>temp</code> array, just one <code>char</code> is enough for the temporary.</li>\n<li>you need to access the different chars of the input <code>a</code> and <code>b</code>, and not only the first one.</li>\n</ul>\n\n<hr>\n\n<p>BTW: here is a better version of <code>swap</code> where you pass the size as parameter:</p>\n\n<pre><code>void swap(char* a, char* b, int size)\n{\n  int i; char temp;\n  for (i = 0; i &lt; size; i++)\n  {\n    temp = a[i];\n    a[i] = b[i];\n    b[i] = temp;\n  }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 2, "creation_date": 1509533840, "post_id": 47053266, "comment_id": 81053401, "body": "Why use <code>*(a+i)</code> instead of <code>a[i]</code>?"}, {"owner": {"reputation": 366, "user_id": 8542211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f05066391d07ae07bdca05842b5d8dd?s=128&d=identicon&r=PG&f=1", "display_name": "Amit Singh", "link": "https://stackoverflow.com/users/8542211/amit-singh"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1509534218, "post_id": 47053266, "comment_id": 81053601, "body": "<code>a[i]</code> is actually resolved to *(a+i). In array declaration <code>array[n]</code>, variable name <code>array</code> stores the base address. When we use <code>array[i]</code>, it first add <code>number of bytes * i</code> and add it to base address to get actual address at which value is stored."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1509534595, "post_id": 47053266, "comment_id": 81053788, "body": "Of course <code>*(a+i)</code> and <code>a[i]</code> are equivalent in this case, but <code>a[i]</code> is much simpler to read and understand. Btw in array declaration <code>int array[n];</code>, <code>array</code> is not a variable, it is the name of the array. in <code>array[i]</code>, <code>array</code> decays into a pointer to the first entry of the array, whose value is the base address of the array."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1509534662, "post_id": 47053266, "comment_id": 81053831, "body": "Your explanation <i>You have to use parentheses instead of bracket.</i> is misleading: both array notations can be used interchangeably, but the OP uses none, which <b>is</b> the problem."}, {"owner": {"reputation": 366, "user_id": 8542211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f05066391d07ae07bdca05842b5d8dd?s=128&d=identicon&r=PG&f=1", "display_name": "Amit Singh", "link": "https://stackoverflow.com/users/8542211/amit-singh"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1509534970, "post_id": 47053266, "comment_id": 81054004, "body": "OK, I agree. I was trying to say In <code>int array[n]</code>, <code>array</code> works as identifier like in case of declaration of a simple variable."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1509535449, "post_id": 47053266, "comment_id": 81054275, "body": "I know what you were trying to say, but your wording would not help people confused about pointers and arrays. To make things worse, as a function argument definition, <code>int array[n]</code> indeed defines <code>array</code> as a pointer. The details of pointer arithmetic implementation are beyond the scope of this simple question, although they might help understand how pionters and arrays work."}], "tags": [], "owner": {"reputation": 366, "user_id": 8542211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f05066391d07ae07bdca05842b5d8dd?s=128&d=identicon&r=PG&f=1", "display_name": "Amit Singh", "link": "https://stackoverflow.com/users/8542211/amit-singh"}, "is_accepted": false, "score": 0, "last_activity_date": 1509535513, "last_edit_date": 1509535513, "creation_date": 1509533728, "answer_id": 47053266, "question_id": 47052973, "link": "https://stackoverflow.com/questions/47052973/the-first-character-in-both-string-wont-swap-in-c/47053266#47053266", "title": "The first character in both string won&#39;t swap in C", "body": "<p>Try to use parentheses like <code>*(a+1)</code> instead of bracket <code>*[b+1]</code>. In your code\nchange the following </p>\n\n<pre><code>for(i=0; i&lt;SIZE; i++)\n{\n     temp[i]= *a;\n     *a=*b;\n     *b=temp[i];\n}\n</code></pre>\n\n<p>with </p>\n\n<pre><code>for(i=0; i&lt;SIZE; i++)\n{\n     temp[i] = *(a+i);\n     *(a+i) = *(b+i);\n     *(b+i) = temp[i];\n}\n</code></pre>\n\n<p>Final code is here:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define SIZE 101\nvoid swap(char* a, char* b);\n\nint main(void)\n{\n    char string1[SIZE]; char string2[SIZE];\n    printf(\"please enter string 1 :\");\n    scanf(\"%s\",string1);\n\n    printf(\"please enter string 2 :\");\n    scanf(\"%s\",string2);\n\n    swap(string1, string2);\n\n    printf(\"string 1 is %s, string 2 is %s\\n\",string1,string2);\n    return 0;\n}\n\nvoid swap(char* a, char* b)\n{    \n   int i; char temp[101];\n    for(i=0; i&lt;SIZE; i++)\n    {\n        temp[i] = *(a+i);\n        *(a+i) = *(b+i);\n        *(b+i) = temp[i];\n    }\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/czchp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/czchp.png\" alt=\"Output is here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 6951, "user_id": 3475381, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b6a1c5d19f4ae8c6a1dbf097487c96d7?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Sehgal", "link": "https://stackoverflow.com/users/3475381/gaurav-sehgal"}, "is_accepted": false, "score": 1, "last_activity_date": 1509533770, "creation_date": 1509533770, "answer_id": 47053276, "question_id": 47052973, "link": "https://stackoverflow.com/questions/47052973/the-first-character-in-both-string-wont-swap-in-c/47053276#47053276", "title": "The first character in both string won&#39;t swap in C", "body": "<p>Actually only the first characters of your strings is swapped(which makes sense as mentioned in other answers), you don't see this because you change the order of printing with</p>\n\n<pre><code>printf(\"string 1 is %s, string 2 is %s\\n\", string2, string1);\n                                            ^^^^^^^^^^^^^^^\n</code></pre>\n\n<p>Here you are always just swapping the first character since you <code>a</code> and <code>b</code> always point to first element.</p>\n\n<pre><code>for(i=0; i&lt;SIZE; i++)\n{\n    temp[i]= *a;\n    *a=*b;\n    *b=temp[i];\n}\n</code></pre>\n\n<p>you can use array subscript</p>\n\n<pre><code>int i; char temp;\nfor (i = 0; i &lt; SIZE; i++)\n{\n  temp = a[i];\n  a[i] = b[i];\n  b[i] = temp;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 0, "last_activity_date": 1509534821, "last_edit_date": 1509534821, "creation_date": 1509534283, "answer_id": 47053426, "question_id": 47052973, "link": "https://stackoverflow.com/questions/47052973/the-first-character-in-both-string-wont-swap-in-c/47053426#47053426", "title": "The first character in both string won&#39;t swap in C", "body": "<p>There are multiple problems in your code:</p>\n\n<ul>\n<li>you print the strings in the wrong order</li>\n<li>you only swap the first character, and you do this <code>SIZE</code> times. <code>SIZE</code> is odd so you see it swapped, the previous bug makes it look like the other characters were swapped. If <code>SIZE</code> were even, you would not swap anything and the previous bug would let you erroneously believe everything is fine...</li>\n</ul>\n\n<p>Less important, but worth mentioning:</p>\n\n<ul>\n<li>you do not check the return values of <code>scanf()</code></li>\n<li>you do not return <code>0</code> at the end of <code>main()</code>.</li>\n</ul>\n\n<p>Here is a corrected and improved version:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define SIZE 101\n\nvoid swap(char *a, char *b, int size) {\n    for (int i = 0; i &lt; size; i++) {\n        char temp = a[i];\n        a[i] = b[i];\n        b[i] = temp;\n    }\n}\n\nint main(void) {\n    char string1[SIZE];\n    char string2[SIZE];\n\n    printf(\"please enter string 1 :\");\n    if (scanf(\"%s\", string1) != 1)\n        return 1;\n\n    printf(\"please enter string 2 :\");\n    if (scanf(\"%s\", string2) != 1)\n        return 1;\n\n    swap(string1, string2, SIZE);\n\n    printf(\"string 1 is %s, string 2 is %s\\n\", string1, string2);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 7290442, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IJm9v.jpg?s=128&g=1", "display_name": "p-k-h", "link": "https://stackoverflow.com/users/7290442/p-k-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "closed_date": 1509538158, "answer_count": 4, "score": 0, "last_activity_date": 1592127367, "creation_date": 1509532812, "last_edit_date": 1592127367, "question_id": 47052973, "link": "https://stackoverflow.com/questions/47052973/the-first-character-in-both-string-wont-swap-in-c", "closed_reason": "Not suitable for this site", "title": "The first character in both string won&#39;t swap in C", "body": "<pre><code>#include &lt;stdio.h&gt;\n\n#define SIZE 101\nvoid swap(char *a, char *b);\n\nint main(void) {\n    char string1[SIZE];\n    char string2[SIZE];\n    printf(\"please enter string 1 :\");\n    scanf(\"%s\", string1);\n\n    printf(\"please enter string 2 :\");\n    scanf(\"%s\", string2);\n\n    swap(string1, string2);\n\n    printf(\"string 1 is %s, string 2 is %s\\n\", string2, string1);\n}\n\nvoid swap(char *a, char *b) {    \n    int i;\n    char temp[101];\n    for (i = 0; i &lt; SIZE; i++) {\n        temp[i] = *a;\n        *a = *b;\n        *b = temp[i];\n    }\n}\n</code></pre>\n\n<p>When I give inputs to both <code>string1</code> and <code>string2</code> lets say <code>\"yes\"</code> and <code>\"hello\"</code>, it will print <code>string1</code> is <code>yello</code> and <code>string2</code> is <code>hes</code>. I've tried to modify by changing <code>*b</code> to <code>*[b+1]</code> and <code>*a</code> to <code>*[a+1]</code> and it gets the first character to work but now the second character won't swap.</p>\n\n<p>EDIT</p>\n\n<p>Also I've tried another function but the problem is still there.</p>\n\n<pre><code>void swap(char* a, char* b)\n{\n    char temp;\n     temp=*a;\n     *a=*b;\n    *b=temp;\n    a++;\n    b++;\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "pthreads"], "comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1509532037, "post_id": 47052640, "comment_id": 81052314, "body": "POSIX threads are for  <i>user-space</i> processes not kernel modules"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1509534196, "post_id": 47052640, "comment_id": 81053590, "body": "What is your goal? Learn programming? Learn C? Learn POSIX threads? Learn kernel programming? Please <b>edit your question</b> to motivate it."}], "answers": [{"tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": true, "score": 6, "last_activity_date": 1509534680, "last_edit_date": 1509534680, "creation_date": 1509532018, "answer_id": 47052725, "question_id": 47052640, "link": "https://stackoverflow.com/questions/47052640/c-linux-using-pthread-h-in-kernel/47052725#47052725", "title": "c, linux - using pthread.h in kernel", "body": "<h2>Don't use <code>&lt;pthread.h&gt;</code> in kernel code</h2>\n\n<p>You are very <strong><em>confused</em></strong> about the difference between <a href=\"https://en.wikipedia.org/wiki/Kernel_(operating_system)\" rel=\"nofollow noreferrer\">kernel</a> code and application (<a href=\"https://en.wikipedia.org/wiki/User_space\" rel=\"nofollow noreferrer\">user-space</a>) code. You should <strong>avoid writing kernel code.</strong> Read about <a href=\"https://en.wikipedia.org/wiki/CPU_modes\" rel=\"nofollow noreferrer\">CPU modes</a>.</p>\n\n<p><sup>(you need to become a guru about C and about Linux application programming before daring writing a single line of kernel code, even a trivial <a href=\"https://en.wikipedia.org/wiki/Loadable_kernel_module\" rel=\"nofollow noreferrer\">kernel module</a>)</sup></p>\n\n<p>Kernel code is for stuff like <a href=\"https://en.wikipedia.org/wiki/Device_driver\" rel=\"nofollow noreferrer\">device drivers</a>, not for Sudoku-s. Of course, you cannot use pthread in kernel code : the kernel is <em>implementing</em> threads by <em>providing</em> the <a href=\"http://man7.org/linux/man-pages/man2/clone.2.html\" rel=\"nofollow noreferrer\">clone(2)</a> syscall to applications. The POSIX C library -your <code>libc.so</code>, generally the GNU <a href=\"https://www.gnu.org/software/libc/\" rel=\"nofollow noreferrer\">glibc</a>- is implementing <a href=\"http://man7.org/linux/man-pages/man7/pthreads.7.html\" rel=\"nofollow noreferrer\">pthreads(7)</a> with the help of many <a href=\"https://en.wikipedia.org/wiki/System_call\" rel=\"nofollow noreferrer\">system calls</a> -listed in <a href=\"http://man7.org/linux/man-pages/man2/syscalls.2.html\" rel=\"nofollow noreferrer\">syscalls(2)</a>-, including <code>clone</code> and <a href=\"http://man7.org/linux/man-pages/man7/futex.7.html\" rel=\"nofollow noreferrer\">futex(7)</a>.</p>\n\n<p><strong>Read <a href=\"http://pages.cs.wisc.edu/~remzi/OSTEP/\" rel=\"nofollow noreferrer\"><em>Operating Systems: Three easy pieces</em></a></strong> to understand more the role of OSes.</p>\n\n<blockquote>\n  <p>I just can't figure out what went wrong</p>\n</blockquote>\n\n<p><strong>Your entire approach is wrong</strong>. <em>Throw your code away.</em> </p>\n\n<hr>\n\n<h2>Learn multi-threaded POSIX application programming</h2>\n\n<p>Read <a href=\"http://www.makelinux.net/alp/\" rel=\"nofollow noreferrer\">ALP</a> (and <a href=\"http://man7.org/linux/man-pages/man2/intro.2.html\" rel=\"nofollow noreferrer\">intro(2)</a> then <a href=\"http://man7.org/linux/man-pages/man3/intro.3.html\" rel=\"nofollow noreferrer\">intro(3)</a>...) to learn how to <strong>write Linux application code</strong>.</p>\n\n<p>Take several days to <strong>read some <a href=\"https://computing.llnl.gov/tutorials/pthreads/\" rel=\"nofollow noreferrer\">pthread tutorial</a>.</strong></p>\n\n<p>Then, code some application program using Posix threads (so having a <code>main</code> and calling <a href=\"http://man7.org/linux/man-pages/man3/pthread_create.3.html\" rel=\"nofollow noreferrer\">pthread_create(3)</a> and <a href=\"http://man7.org/linux/man-pages/man3/pthread_join.3.html\" rel=\"nofollow noreferrer\">pthread_join(3)</a>) to solve your sudoku. You'll probably need <a href=\"https://en.wikipedia.org/wiki/Lock_(computer_science)\" rel=\"nofollow noreferrer\">mutexes</a> and <a href=\"https://en.wikipedia.org/wiki/Monitor_(synchronization)#Condition_variables\" rel=\"nofollow noreferrer\">conditional variables</a> for synchronization.</p>\n\n<p>If you want to learn kernel programming, start with some much simpler task. Before that, become extremely fluent with Linux application programming.</p>\n\n<p><sup>(adding <a href=\"https://en.wikipedia.org/wiki/Thread_(computing)#KERNEL\" rel=\"nofollow noreferrer\">kernel threads</a> is really difficult; they are not POSIX threads at all. Leave that to advanced kernel developers; learn first about user-space thread programming, it is difficult enough.)</sup></p>\n\n<p>So give up your kernel programming idea. Focus on learning C programming and POSIX application programming (that takes <a href=\"http://norvig.com/21-days.html\" rel=\"nofollow noreferrer\">many</a> years).</p>\n\n<p>Compile your (<a href=\"https://en.wikipedia.org/wiki/User_space\" rel=\"nofollow noreferrer\">user-space</a>) code with all warnings and debug info: <code>gcc -Wall -Wextra -g</code> with <a href=\"http://gcc.gnu.org/\" rel=\"nofollow noreferrer\">GCC</a>. Improve it to get no warnings. Learn to use the <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Invoking-GCC.html\" rel=\"nofollow noreferrer\"><code>gcc</code> compiler</a>, <a href=\"https://en.wikipedia.org/wiki/Build_automation\" rel=\"nofollow noreferrer\">build automation</a> tools like <a href=\"https://www.gnu.org/software/make/manual/html_node/index.html\" rel=\"nofollow noreferrer\">GNU <code>make</code></a> or <a href=\"https://ninja-build.org/manual.html\" rel=\"nofollow noreferrer\"><code>ninja</code></a>, the <a href=\"https://sourceware.org/gdb/current/onlinedocs/gdb/\" rel=\"nofollow noreferrer\"><code>gdb</code> debugger</a>, <a href=\"http://valgrind.org/\" rel=\"nofollow noreferrer\">valgrind</a>, <a href=\"https://en.wikipedia.org/wiki/AddressSanitizer\" rel=\"nofollow noreferrer\">address sanitizers</a> and other <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Instrumentation-Options.html\" rel=\"nofollow noreferrer\">instrumentation options</a>.</p>\n"}], "owner": {"reputation": 452, "user_id": 5785396, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/0d6zi.jpg?s=128&g=1", "display_name": "Eric Hung", "link": "https://stackoverflow.com/users/5785396/eric-hung"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1360, "favorite_count": 0, "closed_date": 1509579017, "accepted_answer_id": 47052725, "answer_count": 1, "score": -2, "last_activity_date": 1509534680, "creation_date": 1509531716, "question_id": 47052640, "link": "https://stackoverflow.com/questions/47052640/c-linux-using-pthread-h-in-kernel", "closed_reason": "Needs more focus", "title": "c, linux - using pthread.h in kernel", "body": "<p>I'm trying to test the validity of a 9*9 sudoku problem and the results should be printed via <code>printk(KERN_INFO \"blablabla\")</code>. I've tried two methods to compile my c file, <code>make</code> and <code>gcc myfile.c myfile -o -lpthread</code>. However, none of them worked. </p>\n\n<p>When I called <code>make</code> it threw me with an fatal error: pthread.h: no such file or directory but it is right in the path <code>/usr/include</code>.</p>\n\n<p>Then I found some recommendations from the net so I tried <code>gcc</code> this time. Unfortunately, I got a bunch of errors after calling <code>gcc myfile.c myfile -o -lpthread</code> such as </p>\n\n<p><code>/usr/include/linux/list.h: In function 'INIT_LIST_HEAD': /usr/include/linux/list.h:27:17: error: dereferencing pointer to incomplete type 'struct list_head'</code></p>\n\n<p>and</p>\n\n<p><code>error: unknown type name 'bool'</code>, </p>\n\n<p>to name but a few. The point is that I got these errors <strong>after</strong> I upgrade my softwares via <code>sudo apt-get update -y</code>.</p>\n\n<p>Here's the code:</p>\n\n<pre><code>#include &lt;pthread.h&gt;\n#include &lt;linux/module.h&gt;\n#include &lt;linux/kernel.h&gt;\n#include &lt;linux/init.h&gt;\n\ntypedef struct\n{\n    int row;\n    int col;\n    int (* board)[9];\n} parameters;\n\nvoid * find_rows(void * params);\n\nvoid * find_cols(void * params);\n\nvoid * check_valid(void * params);\n\n/***************\n * ENTRY POINT\n **************/\nint thread_init(void)\n{\n    // ====== Create the board =======\n    int board[9][9] = {\n            {6, 2, 4, 5, 3, 9, 1, 8, 7},\n            {5, 1, 9, 7, 2, 8, 6, 3, 4},\n            {8, 3, 7, 6, 1, 4, 2, 9, 5},\n            {1, 4, 3, 8, 6, 5, 7, 2, 9},\n            {9, 5, 8, 2, 4, 7, 3, 6, 1},\n            {7, 6, 2, 3, 9, 1, 4, 5, 8},\n            {3, 7, 1, 9, 5, 6, 8, 4, 2},\n            {4, 9, 6, 1, 8, 2, 5, 7, 3},\n            {2, 8, 5, 4, 7, 3, 9, 1, 6}\n        };\n\n    /*int  i, j = 0;\n    size_t count;\n    int board[9][9];\n    char *line = (char *) malloc(100);\n\n    FILE *file;\n    file = fopen(\"test.txt\", \"r\");\n\n    while(getline(&amp;line, &amp;count, file) != -1) {\n        for (count &gt; 0; count--; j++)\n            sscanf(line, \"%d\", &amp;board[i][j]);\n        i++;\n    }*/\n\n    parameters * data = (parameters *) malloc(sizeof(parameters));\n    data-&gt;row = 0;\n    data-&gt;col = 0;\n    data-&gt;board = board;\n\n    // ====== Create the parameters for the 3x3 threads ======\n\n    // First 3x3\n    parameters * data1 = (parameters *) malloc(sizeof(parameters));\n    data1-&gt;row = 0;\n    data1-&gt;col = 0;\n    data1-&gt;board = board;\n\n    // Second 3x3\n    parameters * data2 = (parameters *) malloc(sizeof(parameters));\n    data2-&gt;row = 0;\n    data2-&gt;col = 3;\n    data2-&gt;board = board;\n\n    // Third 3x3\n    parameters * data3 = (parameters *) malloc(sizeof(parameters));\n    data3-&gt;row = 0;\n    data3-&gt;col = 6;\n    data3-&gt;board = board;\n\n    // Fourth 3x3\n    parameters * data4 = (parameters *) malloc(sizeof(parameters));\n    data4-&gt;row = 3;\n    data4-&gt;col = 0;\n    data4-&gt;board = board;\n\n    // Fifth 3x3\n    parameters * data5 = (parameters *) malloc(sizeof(parameters));\n    data5-&gt;row = 3;\n    data5-&gt;col = 3;\n    data5-&gt;board = board;\n\n    // Sixth 3x3\n    parameters * data6 = (parameters *) malloc(sizeof(parameters));\n    data6-&gt;row = 3;\n    data6-&gt;col = 6;\n    data6-&gt;board = board;\n\n    // Seventh 3x3\n    parameters * data7 = (parameters *) malloc(sizeof(parameters));\n    data7-&gt;row = 6;\n    data7-&gt;col = 0;\n    data7-&gt;board = board;\n\n    // Eighth 3x3\n    parameters * data8 = (parameters *) malloc(sizeof(parameters));\n    data8-&gt;row = 6;\n    data8-&gt;col = 3;\n    data8-&gt;board = board;\n\n    // Ninth 3x3\n    parameters * data9 = (parameters *) malloc(sizeof(parameters));\n    data9-&gt;row = 6;\n    data9-&gt;col = 6;\n    data9-&gt;board = board;\n\n    // ====== Create the threads ======\n    pthread_t thread_rows, thread_cols, thread1, thread2, thread3, thread4, thread5, thread6, thread7, thread8, thread9;\n\n    // ====== Create the return values for the threads ======\n    void * all_rows;\n    void * all_cols;\n    void * square1;\n    void * square2;\n    void * square3;\n    void * square4;\n    void * square5;\n    void * square6;\n    void * square7;\n    void * square8;\n    void * square9;\n\n    // ====== Initialize the threads ======\n    pthread_create(&amp;thread_rows, NULL, find_rows, (void *) data);\n    pthread_create(&amp;thread_cols, NULL, find_cols, (void *) data);\n    pthread_create(&amp;thread1, NULL, check_valid, (void *) data1);\n    pthread_create(&amp;thread2, NULL, check_valid, (void *) data2);\n    pthread_create(&amp;thread3, NULL, check_valid, (void *) data3);\n    pthread_create(&amp;thread4, NULL, check_valid, (void *) data4);\n    pthread_create(&amp;thread5, NULL, check_valid, (void *) data5);\n    pthread_create(&amp;thread6, NULL, check_valid, (void *) data6);\n    pthread_create(&amp;thread7, NULL, check_valid, (void *) data7);\n    pthread_create(&amp;thread8, NULL, check_valid, (void *) data8);\n    pthread_create(&amp;thread9, NULL, check_valid, (void *) data9);\n\n    // ======= Wait for all threads to finish their tasks =======\n    pthread_join(thread_rows, &amp;all_rows);\n    pthread_join(thread_cols, &amp;all_cols);\n    pthread_join(thread1, &amp;square1);\n    pthread_join(thread2, &amp;square2);\n    pthread_join(thread3, &amp;square3);\n    pthread_join(thread4, &amp;square4);\n    pthread_join(thread5, &amp;square5);\n    pthread_join(thread6, &amp;square6);\n    pthread_join(thread7, &amp;square7);\n    pthread_join(thread8, &amp;square8);\n    pthread_join(thread9, &amp;square9);\n\n    // ====== Check whether the Sudoku Puzzle was solved ======\n    if (    (int)(uintptr_t) all_rows == 1 &amp;&amp;\n            (int)(uintptr_t) all_cols == 1 &amp;&amp;\n            (int)(uintptr_t) square1 == 1 &amp;&amp;\n            (int)(uintptr_t) square2 == 1 &amp;&amp;\n            (int)(uintptr_t) square3 == 1 &amp;&amp;\n            (int)(uintptr_t) square4 == 1 &amp;&amp;\n            (int)(uintptr_t) square5 == 1 &amp;&amp;\n            (int)(uintptr_t) square6 == 1 &amp;&amp;\n            (int)(uintptr_t) square7 == 1 &amp;&amp;\n            (int)(uintptr_t) square8 == 1 &amp;&amp;\n            (int)(uintptr_t) square9 == 1 )\n    {\n        printf(\"The Sudoku Puzzle is solved!\\n\");\n    }\n    else\n    {\n        printf(\"The Sudoku Puzzle is NOT solved.\\n\");\n    }\n\n    return 0;\n}\n\nvoid * find_rows(void * params) {\n    parameters * data = (parameters *) params;\n    int startRow = data-&gt;row;\n    int startCol = data-&gt;col;\n    for (int i = startRow; i &lt; 9; ++i) {\n        int row[10] = {0};\n        for (int j = startCol; j &lt; 9; ++j) {\n            int val = data-&gt;board[i][j];\n            if (row[val] != 0) {\n                return (void *) 0;\n            }\n            else{\n                row[val] = 1;\n            }\n        }\n    }\n    return (void *) 1;\n}\n\nvoid * find_cols(void * params) {\n    parameters * data = (parameters *) params;\n    int startRow = data-&gt;row;\n    int startCol = data-&gt;col;\n    for (int i = startCol; i &lt; 9; ++i) {\n        int col[10] = {0};\n        for (int j = startRow; j &lt; 9; ++j) {\n            int val = data-&gt;board[j][i];\n            if (col[val] != 0) {\n                return (void *) 0;\n            }\n            else{\n                col[val] = 1;\n            }\n        }\n    }\n    return (void *) 1;\n}\n\nvoid * check_valid(void * params) {\n    parameters * data = (parameters *) params;\n    int startRow = data-&gt;row;\n    int startCol = data-&gt;col;\n    int saved[10] = {0};\n    for (int i = startRow; i &lt; startRow + 3; ++i) {\n        for (int j = startCol; j &lt; startCol + 3; ++j) {\n            int val = data-&gt;board[i][j];\n            if (saved[val] != 0) {\n                return (void *) 0;\n            }\n            else{\n                saved[val] = 1;\n            }\n        }\n    }\n    return (void *) 1;\n}\n\nvoid thread_exit(void)\n{\n    printk(KERN_INFO \"Removing Module\\n\");\n}\n\nmodule_init( thread_init );\nmodule_exit( thread_exit );\n</code></pre>\n\n<p>I just can't figure out what went wrong...and no idea how to debug.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 2, "creation_date": 1509529075, "post_id": 47051887, "comment_id": 81050660, "body": "With <code>c = b</code> you are overwriting <code>c</code> so the memory allocated by <code>malloc</code> of it is lost. You will need an intemediate variable."}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1509529986, "post_id": 47051887, "comment_id": 81051147, "body": "How to fix the code depends on what exactly you want it to do. For example, what value do you expect the function to return?"}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 8867042, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-qNv15LJMFIY/AAAAAAAAAAI/AAAAAAAAAI0/q3EmdTdD2hg/photo.jpg?sz=128", "display_name": "Alessandro Ferdian", "link": "https://stackoverflow.com/users/8867042/alessandro-ferdian"}, "edited": false, "score": 0, "creation_date": 1509529974, "post_id": 47051990, "comment_id": 81051140, "body": "Thanks, i have tried the code.. it still working. But, if i use valgrind program to log the memory leak, the errors still exist... and about the"}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 1, "creation_date": 1509529992, "post_id": 47051990, "comment_id": 81051151, "body": "The <code>return c</code> would still be a problem, but it isn&#39;t clear what OP intends to return there."}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 1, "last_activity_date": 1509530176, "last_edit_date": 1509530176, "creation_date": 1509529407, "answer_id": 47051990, "question_id": 47051887, "link": "https://stackoverflow.com/questions/47051887/swapping-2-pointer-array-of-char-without-using-strcpy-and-must-use-assignment-op/47051990#47051990", "title": "Swapping 2 pointer array of char without using strcpy and must use assignment operator?", "body": "<p>Remove this:</p>\n\n<pre><code>c = (char *) malloc(sizeof(char) * 50);\n</code></pre>\n\n<p>you don't need to allocate a third buffer, you never use it and in fact overwrite it when doing the swap. Just let <code>c</code> be a temporary <code>char *</code>.</p>\n\n<p>Also, the allocations can be simplified to:</p>\n\n<pre><code>a = malloc(50);\nb = malloc(50);\n</code></pre>\n\n<p>since you don't need to cast, and <code>sizeof (char)</code> is always 1.</p>\n\n<p>For completeness' sake you should also check that the allocations succeed, before relying on it.</p>\n\n<p>Then as pointed out in a comment remove the <code>return</code>, since that makes no sense at all.</p>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 1, "last_activity_date": 1509530829, "creation_date": 1509530829, "answer_id": 47052382, "question_id": 47051887, "link": "https://stackoverflow.com/questions/47051887/swapping-2-pointer-array-of-char-without-using-strcpy-and-must-use-assignment-op/47052382#47052382", "title": "Swapping 2 pointer array of char without using strcpy and must use assignment operator?", "body": "<p>What your teacher is likely fishing for, is that those assignments you point out only change where the pointers point, they do not make a hard copy of the data. There's two blatant bugs:</p>\n\n<ul>\n<li>Upon <code>c = b;</code> you get a memory leak as the memory which <code>c</code> pointed at is lost. </li>\n<li>And then when you later free what <code>b</code> points at, you also free what <code>c</code> now points at.</li>\n</ul>\n\n<p>One solution would be to never allocate any memory for <code>c</code>, assign <code>c</code> to point at the same memory as <code>b</code> and then don't free what <code>b</code> points at.</p>\n"}, {"tags": [], "owner": {"reputation": 9, "user_id": 8867042, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-qNv15LJMFIY/AAAAAAAAAAI/AAAAAAAAAI0/q3EmdTdD2hg/photo.jpg?sz=128", "display_name": "Alessandro Ferdian", "link": "https://stackoverflow.com/users/8867042/alessandro-ferdian"}, "is_accepted": false, "score": 0, "last_activity_date": 1509548648, "last_edit_date": 1509548648, "creation_date": 1509548039, "answer_id": 47057637, "question_id": 47051887, "link": "https://stackoverflow.com/questions/47051887/swapping-2-pointer-array-of-char-without-using-strcpy-and-must-use-assignment-op/47057637#47057637", "title": "Swapping 2 pointer array of char without using strcpy and must use assignment operator?", "body": "<p>Just got back asking from the friend.. He said the return c isn't having a problem. He said also the same about c doesn't need to be malloc()-ed (thanks to unwind's reference)...and about free(a) causes memory leak to c (thanks to Lundin's reference).</p>\n\n<p>free(a) causes c to be gone, which it's reference to b also affected. The revised program will be</p>\n\n<pre><code>#include&lt;stdlib.h&gt;\n#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n\nchar *tukar(){\n    char *a, *b, *c;\n    a = malloc(50);\n    b = malloc(50);\n\n    strcpy(a,\"string a\");\n    strcpy(b,\"string b\");\n\n    printf(\"\\nBefore :\\n\");\n    printf(\"a = %s\\n\",a);\n    printf(\"b = %s\\n\",b);\n\n    c = b;\n    b = a;\n    a = c;\n\n    printf(\"\\nAfter :\\n\");\n    printf(\"a = %s\\n\",a);\n    printf(\"b = %s\\n\",b);\n\n    free(b);\n    return c;\n}\n\nint main(){\n    char *y;\n    y=tukar();\n    printf(\"%s\",y);\n    free(y);\n    getchar();\n    return 0;\n}\n</code></pre>\n\n<p>while valgrind gives output</p>\n\n<pre><code>==2527== Memcheck, a memory error detector\n==2527== Copyright (C) 2002-2015, and GNU GPL'd, by Julian Seward et al.\n==2527== Using Valgrind-3.12.0 and LibVEX; rerun with -h for copyright info\n==2527== Command: ./aa\n==2527== Parent PID: 2159\n==2527== \n==2527== \n==2527== HEAP SUMMARY:\n==2527==     in use at exit: 0 bytes in 0 blocks\n==2527==   total heap usage: 4 allocs, 4 frees, 2,148 bytes allocated\n==2527== \n==2527== All heap blocks were freed -- no leaks are possible\n==2527== \n==2527== For counts of detected and suppressed errors, rerun with: -v\n==2527== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)\n</code></pre>\n\n<p>that's the goal of modifying the program.</p>\n"}], "owner": {"reputation": 9, "user_id": 8867042, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-qNv15LJMFIY/AAAAAAAAAAI/AAAAAAAAAI0/q3EmdTdD2hg/photo.jpg?sz=128", "display_name": "Alessandro Ferdian", "link": "https://stackoverflow.com/users/8867042/alessandro-ferdian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1509548648, "creation_date": 1509528940, "question_id": 47051887, "link": "https://stackoverflow.com/questions/47051887/swapping-2-pointer-array-of-char-without-using-strcpy-and-must-use-assignment-op", "title": "Swapping 2 pointer array of char without using strcpy and must use assignment operator?", "body": "<p>Hello i was given a task to fix this program that it generates no errors log generated by valgrind.</p>\n\n<p><em>This is the recent code</em></p>\n\n<pre><code>#include&lt;stdlib.h&gt;\n#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n\nchar *tukar(){\n    char *a, *b, *c;\n    a = (char *) malloc(sizeof(char) * 50);\n    b = (char *) malloc(sizeof(char) * 50);\n    c = (char *) malloc(sizeof(char) * 50);\n\n    strcpy(a,\"string a\");\n    strcpy(b,\"string b\");\n\n    printf(\"\\nBefore :\\n\");\n    printf(\"a = %s\\n\",a);\n    printf(\"b = %s\\n\",b);\n\n    c = b;\n    b = a;\n    a = c;\n\n    printf(\"\\nAfter :\\n\");\n    printf(\"a = %s\\n\",a);\n    printf(\"b = %s\\n\",b);\n\n    free(a);\n    free(b);\n    return c;\n}\n\nint main(){\n    char *y = tukar();\n    printf(\"%s\\n\",y);\n    free(y);\n    getchar();\n    return 0;\n}\n</code></pre>\n\n<p><em>The current errors prints out</em></p>\n\n<pre><code>==5300== Memcheck, a memory error detector\n==5300== Copyright (C) 2002-2015, and GNU GPL'd, by Julian Seward et al.\n==5300== Using Valgrind-3.12.0 and LibVEX; rerun with -h for copyright info\n==5300== Command: ./aa\n==5300== Parent PID: 5110\n==5300== \n==5300== Invalid read of size 1\n==5300==    at 0x4C30D22: strlen (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==5300==    by 0x4EAA931: puts (ioputs.c:35)\n==5300==    by 0x1088CB: main (atan.c:33)\n==5300==  Address 0x52010c0 is 0 bytes inside a block of size 50 free'd\n==5300==    at 0x4C2ED5B: free (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==5300==    by 0x108897: tukar (atan.c:26)\n==5300==    by 0x1088BB: main (atan.c:32)\n==5300==  Block was alloc'd at\n==5300==    at 0x4C2DB2F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==5300==    by 0x1087BF: tukar (atan.c:8)\n==5300==    by 0x1088BB: main (atan.c:32)\n==5300== \n==5300== Invalid read of size 1\n==5300==    at 0x4C30D34: strlen (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==5300==    by 0x4EAA931: puts (ioputs.c:35)\n==5300==    by 0x1088CB: main (atan.c:33)\n==5300==  Address 0x52010c1 is 1 bytes inside a block of size 50 free'd\n==5300==    at 0x4C2ED5B: free (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==5300==    by 0x108897: tukar (atan.c:26)\n==5300==    by 0x1088BB: main (atan.c:32)\n==5300==  Block was alloc'd at\n==5300==    at 0x4C2DB2F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==5300==    by 0x1087BF: tukar (atan.c:8)\n==5300==    by 0x1088BB: main (atan.c:32)\n==5300== \n==5300== Invalid read of size 1\n==5300==    at 0x4EB5145: _IO_file_xsputn@@GLIBC_2.2.5 (fileops.c:1309)\n==5300==    by 0x4EAA9F2: puts (ioputs.c:40)\n==5300==    by 0x1088CB: main (atan.c:33)\n==5300==  Address 0x52010c7 is 7 bytes inside a block of size 50 free'd\n==5300==    at 0x4C2ED5B: free (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==5300==    by 0x108897: tukar (atan.c:26)\n==5300==    by 0x1088BB: main (atan.c:32)\n==5300==  Block was alloc'd at\n==5300==    at 0x4C2DB2F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==5300==    by 0x1087BF: tukar (atan.c:8)\n==5300==    by 0x1088BB: main (atan.c:32)\n==5300== \n==5300== Invalid read of size 1\n==5300==    at 0x4EB515C: _IO_file_xsputn@@GLIBC_2.2.5 (fileops.c:1309)\n==5300==    by 0x4EAA9F2: puts (ioputs.c:40)\n==5300==    by 0x1088CB: main (atan.c:33)\n==5300==  Address 0x52010c6 is 6 bytes inside a block of size 50 free'd\n==5300==    at 0x4C2ED5B: free (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==5300==    by 0x108897: tukar (atan.c:26)\n==5300==    by 0x1088BB: main (atan.c:32)\n==5300==  Block was alloc'd at\n==5300==    at 0x4C2DB2F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==5300==    by 0x1087BF: tukar (atan.c:8)\n==5300==    by 0x1088BB: main (atan.c:32)\n==5300== \n==5300== Invalid read of size 1\n==5300==    at 0x4C35028: __GI_mempcpy (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==5300==    by 0x4EB5079: _IO_file_xsputn@@GLIBC_2.2.5 (fileops.c:1327)\n==5300==    by 0x4EAA9F2: puts (ioputs.c:40)\n==5300==    by 0x1088CB: main (atan.c:33)\n==5300==  Address 0x52010c7 is 7 bytes inside a block of size 50 free'd\n==5300==    at 0x4C2ED5B: free (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==5300==    by 0x108897: tukar (atan.c:26)\n==5300==    by 0x1088BB: main (atan.c:32)\n==5300==  Block was alloc'd at\n==5300==    at 0x4C2DB2F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==5300==    by 0x1087BF: tukar (atan.c:8)\n==5300==    by 0x1088BB: main (atan.c:32)\n==5300== \n==5300== Invalid read of size 1\n==5300==    at 0x4C35038: __GI_mempcpy (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==5300==    by 0x4EB5079: _IO_file_xsputn@@GLIBC_2.2.5 (fileops.c:1327)\n==5300==    by 0x4EAA9F2: puts (ioputs.c:40)\n==5300==    by 0x1088CB: main (atan.c:33)\n==5300==  Address 0x52010c5 is 5 bytes inside a block of size 50 free'd\n==5300==    at 0x4C2ED5B: free (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==5300==    by 0x108897: tukar (atan.c:26)\n==5300==    by 0x1088BB: main (atan.c:32)\n==5300==  Block was alloc'd at\n==5300==    at 0x4C2DB2F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==5300==    by 0x1087BF: tukar (atan.c:8)\n==5300==    by 0x1088BB: main (atan.c:32)\n==5300== \n==5300== Invalid free() / delete / delete[] / realloc()\n==5300==    at 0x4C2ED5B: free (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==5300==    by 0x1088D7: main (atan.c:34)\n==5300==  Address 0x52010c0 is 0 bytes inside a block of size 50 free'd\n==5300==    at 0x4C2ED5B: free (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==5300==    by 0x108897: tukar (atan.c:26)\n==5300==    by 0x1088BB: main (atan.c:32)\n==5300==  Block was alloc'd at\n==5300==    at 0x4C2DB2F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==5300==    by 0x1087BF: tukar (atan.c:8)\n==5300==    by 0x1088BB: main (atan.c:32)\n==5300== \n==5300== \n==5300== HEAP SUMMARY:\n==5300==     in use at exit: 50 bytes in 1 blocks\n==5300==   total heap usage: 5 allocs, 5 frees, 2,198 bytes allocated\n==5300== \n==5300== 50 bytes in 1 blocks are definitely lost in loss record 1 of 1\n==5300==    at 0x4C2DB2F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==5300==    by 0x1087CD: tukar (atan.c:9)\n==5300==    by 0x1088BB: main (atan.c:32)\n==5300== \n==5300== LEAK SUMMARY:\n==5300==    definitely lost: 50 bytes in 1 blocks\n==5300==    indirectly lost: 0 bytes in 0 blocks\n==5300==      possibly lost: 0 bytes in 0 blocks\n==5300==    still reachable: 0 bytes in 0 blocks\n==5300==         suppressed: 0 bytes in 0 blocks\n==5300== \n==5300== For counts of detected and suppressed errors, rerun with: -v\n==5300== ERROR SUMMARY: 27 errors from 8 contexts (suppressed: 0 from 0)\n</code></pre>\n\n<p>i'm suspecting that these assignments</p>\n\n<pre><code>c = b;\nb = a;\na = c;\n</code></pre>\n\n<p>creates the problem. However, my teacher says it cannot be changed or replaced with strcpy(). I'm thinking about replacing the pointer's address but the pointer has been declared malloc() in it.</p>\n\n<p>Is there any way to modify the code without replacing the assignments?</p>\n\n<p>PS : 'tukar' means swap.</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1509528592, "post_id": 47051727, "comment_id": 81050379, "body": "<i>&quot;It also has to be a number that contains only 1 unique digit. So for example 2520 will not meet this requirement since there are two same digits (2).&quot;</i> - This is a contradiction. According to the first sentence, it would fail because 2520 contains two (not only one) unique digit, 5 and 0."}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1509528827, "post_id": 47051727, "comment_id": 81050510, "body": "<i>&quot;I was thinking about converting value in an array to string, and then putting this string in another array so every digit would be represented by one array entry.&quot;</i> - Well, try. It is a possible way to solve it, so try."}, {"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 1, "creation_date": 1509529125, "post_id": 47051727, "comment_id": 81050692, "body": "<code>n = 7560; z = pow(10, n);</code> That doesn&#39;t sound right, for example <code>pow(10, 7560);</code> You have to check the math."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1509531951, "post_id": 47051727, "comment_id": 81052255, "body": "Use <a href=\"http://www.cplusplus.com/reference/cstdio/sprintf/\" rel=\"nofollow noreferrer\"><code>sprintf</code></a> to transform the number into a string and then count the digits. The whole program should not exceed 30 lines, blank lines included."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1511105385, "post_id": 47051727, "comment_id": 81709207, "body": "@PatrykBesler: you can accept one of the answers by clicking on the grey checkmark below its score."}], "answers": [{"tags": [], "owner": {"reputation": 56, "user_id": 7757123, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/X3c5o.jpg?s=128&g=1", "display_name": "Chatz", "link": "https://stackoverflow.com/users/7757123/chatz"}, "is_accepted": false, "score": 0, "last_activity_date": 1509531922, "creation_date": 1509531922, "answer_id": 47052692, "question_id": 47051727, "link": "https://stackoverflow.com/questions/47051727/finding-numbers-with-unique-digits-in-c/47052692#47052692", "title": "Finding numbers with unique digits in C", "body": "<p>If i understand correctly, your problem is that you need to identify whether a number is consisted of multiple digits.\nFollowing your proposed approach, to convert the number into a string and use an array to represent digits, i can suggest the following solution for a function that implements it. The main function is used to test the has_repeated_digits function. It just shows a way to do it. \nYou can alter it and use it in your code.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define MAX_DIGITS_IN_NUM  20\n\n//returns 1 when there are repeated digits, 0 otherwise\nint has_repeated_digits(int num){\n\n  // in array, array[0] represents how many times the '0' is found\n  // array[1], how many times '1' is found etc...\n  int array[10] = {0,0,0,0,0,0,0,0,0,0};\n  char num_string[MAX_DIGITS_IN_NUM];\n\n  //converts the number to string and stores it in num_string\n  sprintf(num_string, \"%d\", num);\n\n  int i = 0;\n  while (num_string[i] != '\\0'){\n\n    //if a digit is found more than one time, return 1.\n    if (++array[num_string[i] - '0'] &gt;= 2){\n        return 1;   //found repeated digit\n    }\n    i++;\n   }\n\n return 0;  //no repeated digits found\n}\n\n\n// test tha function\n\nint main()\n{\n  int x=0;\n  while (scanf(\"%d\", &amp;x) != EOF){\n    if (has_repeated_digits(x))\n        printf(\"repeated digits found!\\n\");\n    else\n        printf(\"no repeated digits\\n\");\n  }\n\n  return 0;\n\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1509533489, "post_id": 47052751, "comment_id": 81053183, "body": "Note that this will work on <i>any</i> encoding: the C++ and C standards insists that 0 to 9 are in a consecutive block, so <code>snumber[i] - &#39;0&#39;</code> is the idiomatic way of extracting a numerical value from a character. Therefore, have an upvote."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1509533588, "post_id": 47052751, "comment_id": 81053242, "body": "@Bathsheba the question is tagged C, not C++, does the C standard say the same? (I suppose so)."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1509533627, "post_id": 47052751, "comment_id": 81053275, "body": "Yes\u034f\u034f\u034f\u034f\u034f\u034f\u034f\u034f\u034f\u034f\u034f\u034f\u034f"}], "tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": false, "score": 2, "last_activity_date": 1509533698, "last_edit_date": 1509533698, "creation_date": 1509532128, "answer_id": 47052751, "question_id": 47051727, "link": "https://stackoverflow.com/questions/47051727/finding-numbers-with-unique-digits-in-c/47052751#47052751", "title": "Finding numbers with unique digits in C", "body": "<p>This should give you a base:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main()\n{\n  char snumber[20];\n  int number = 11235;\n\n  printf(\"Number = %d\\n\\n\", number);\n\n  sprintf(snumber, \"%d\", number);    \n  int histogram[10] = { 0 };    \n  int len = strlen(snumber);\n\n  for (int i = 0; i &lt; len; i++)\n  {\n    histogram[snumber[i] - '0']++;\n  }\n\n  for (int i = 0; i &lt; 10; i++)\n  {\n    if (histogram[i] != 0)\n      printf(\"%d occurs %d times\\n\", i, histogram[i]);\n  }\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Number = 11235\n\n1 occurs 2 times\n2 occurs 1 times\n3 occurs 1 times\n5 occurs 1 times\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 1, "creation_date": 1509532706, "post_id": 47052781, "comment_id": 81052700, "body": "Given the other requirement, it could be <code>for (uint64_t i = 2520; i &lt;= 9876543210; ...</code>."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1509532818, "post_id": 47052781, "comment_id": 81052771, "body": "@Bob__: Showoff ;-) But I&#39;ve pinched that. Couldn&#39;t resist. I&#39;ll upvote an answer of yours for good karma."}, {"owner": {"reputation": 1975, "user_id": 6070341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHHZU.png?s=128&g=1", "display_name": "Costantino Grana", "link": "https://stackoverflow.com/users/6070341/costantino-grana"}, "edited": false, "score": 0, "creation_date": 1548257132, "post_id": 47052781, "comment_id": 95479001, "body": "@Bathsheba FYI the question you linked was removed from SO."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 1, "last_activity_date": 1509532871, "last_edit_date": 1509532871, "creation_date": 1509532233, "answer_id": 47052781, "question_id": 47051727, "link": "https://stackoverflow.com/questions/47051727/finding-numbers-with-unique-digits-in-c/47052781#47052781", "title": "Finding numbers with unique digits in C", "body": "<p>That code is a mess. Let's bin it.</p>\n\n<blockquote>\n  <p>Theorem: Any number that divides all numbers in the range 2 to 9 is a\n  multiple of 2520.</p>\n</blockquote>\n\n<p>Therefore your algorithm takes the form</p>\n\n<pre><code>for (long i = 2520; i &lt;= 9876543210 /*Beyond this there must be a duplicate*/; i += 2520){\n    // ToDo - reject if `i` contains one or more of the same digit.\n}\n</code></pre>\n\n<p>For the <code>ToDo</code> part, see <a href=\"https://stackoverflow.com/questions/27983097/how-to-write-a-code-to-detect-duplicate-digits-of-any-given-number-in-c\">How to write a code to detect duplicate digits of any given number in C++?</a>. Granted, it's C++, but the accepted answer ports verbatim.</p>\n"}, {"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 0, "last_activity_date": 1510583498, "last_edit_date": 1510583498, "creation_date": 1509537078, "answer_id": 47054167, "question_id": 47051727, "link": "https://stackoverflow.com/questions/47051727/finding-numbers-with-unique-digits-in-c/47054167#47054167", "title": "Finding numbers with unique digits in C", "body": "<p>You can simplify your problem from these remarks:</p>\n\n<ul>\n<li>the least common multiple of 2, 3, 4, 5, 6, 7, 8 and 9 is 2520.</li>\n<li>numbers larger than 9876543210 must have at least twice the same digit in their base 10 representation.</li>\n<li>checking for duplicate digits can be done by counting the remainders of successive divisions by 10.</li>\n</ul>\n\n<p>A simple approach is therefore to enumerate multiples of 2520 up to 9876543210 and select the numbers that have no duplicate digits.</p>\n\n<p>Type <code>unsigned long long</code> is guaranteed to be large enough to represent all values to enumerate, but neither <code>int</code> nor <code>long</code> are.</p>\n\n<p>Here is the code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n    unsigned long long i, n;\n    for (n = 2520; n &lt;= 9876543210; n += 2520) {\n        int digits[10] = { 0 };\n        for (i = n; i != 0; i /= 10) {\n            if (digits[i % 10]++)\n                break;\n        }\n        if (i == 0)\n            printf(\"%llu\\n\", n);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>This program produces <strong>13818</strong> numbers in 0.076 seconds. The first one is <strong>7560</strong> and the last one is <strong>9876351240</strong>. </p>\n\n<p>The number <strong>0</strong> technically does match your constraints: it is evenly divisible by all non zero integers and it has no duplicate digits. But you excluded it explicitly.</p>\n"}], "owner": {"reputation": 21, "user_id": 8829890, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/13af9806c3dbde48b6a35caf8e3cef55?s=128&d=identicon&r=PG&f=1", "display_name": "Patryk Besler", "link": "https://stackoverflow.com/users/8829890/patryk-besler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2132, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1510583498, "creation_date": 1509528417, "last_edit_date": 1509536410, "question_id": 47051727, "link": "https://stackoverflow.com/questions/47051727/finding-numbers-with-unique-digits-in-c", "title": "Finding numbers with unique digits in C", "body": "<p>I have to write a program that finds every number (except 0) which can be factored by numbers from 2-9.\nFor example first such a number would be number 2520 as it can be divided by every single number from 2 to 9.\nIt also has to be a number that contains only 1 type of digit of its own (no multiple digits in a number). So for example 2520 will not meet this requirement since there are two same digits (2). The example of a number that meets both requirements is number 7560. That is the point I don't how to do it. I was thinking about converting value in an array to string, and then putting this string in another array so every digit would be represented by one array entry.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\nint main() {\n    int i, n, x, flag, y = 0;\n    scanf(\"%d\", &amp;n);\n    double z = pow(10, n) - 1;\n    int array[(int)z];\n\n    for (i = 0; i &lt;= z; i++) {\n        flag = 0;\n        array[i] = i;\n        if (i &gt; 0) {\n            for (x = 2; x &lt;= 9; x++) {\n                if (array[i] % x != 0) {\n                    flag = 1;\n                }\n            }\n\n            if (flag == 0) {\n                y = 1;\n                printf(\"%d\\n\", array[i]);\n            }\n        }\n    }\n\n    if (y == 0) {\n        printf(\"not exist\");\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "makefile", "linux-kernel", "kernel-module"], "comments": [{"owner": {"reputation": 3310, "user_id": 1853605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ab8d886abc51e874c1ed067b912ddd?s=128&d=identicon&r=PG", "display_name": "Potato", "link": "https://stackoverflow.com/users/1853605/potato"}, "edited": false, "score": 0, "creation_date": 1509527607, "post_id": 47051402, "comment_id": 81049840, "body": "&quot;Im in the process of creating a &quot;build machine&quot; that will check for Available latest kernel, download necessary packages and compile the kernel module for that kernel.&quot; -- are you not downloading the sources and simply doing a make ? I mean that should configure your build tree"}, {"owner": {"reputation": 4454, "user_id": 1426106, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/67b5bab68445cf71df9b77cef2fc3ec8?s=128&d=identicon&r=PG", "display_name": "ilansch", "link": "https://stackoverflow.com/users/1426106/ilansch"}, "reply_to_user": {"reputation": 3310, "user_id": 1853605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ab8d886abc51e874c1ed067b912ddd?s=128&d=identicon&r=PG", "display_name": "Potato", "link": "https://stackoverflow.com/users/1853605/potato"}, "edited": false, "score": 0, "creation_date": 1509528045, "post_id": 47051402, "comment_id": 81050056, "body": "when using yum install kernel or kernel-devel, does it compile the build tree ?"}, {"owner": {"reputation": 18942, "user_id": 894328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3db17c5296335f63e856be44aa821bf6?s=128&d=identicon&r=PG", "display_name": "Ahmed Masud", "link": "https://stackoverflow.com/users/894328/ahmed-masud"}, "edited": false, "score": 1, "creation_date": 1509544055, "post_id": 47051402, "comment_id": 81059762, "body": "have you actually read the error message?? It tells you what&#39;s wrong."}, {"owner": {"reputation": 4408, "user_id": 154680, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1fe5646f7071126187fbda8c68c526f6?s=128&d=identicon&r=PG", "display_name": "russoue", "link": "https://stackoverflow.com/users/154680/russoue"}, "reply_to_user": {"reputation": 18942, "user_id": 894328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3db17c5296335f63e856be44aa821bf6?s=128&d=identicon&r=PG", "display_name": "Ahmed Masud", "link": "https://stackoverflow.com/users/894328/ahmed-masud"}, "edited": false, "score": 0, "creation_date": 1541102347, "post_id": 47051402, "comment_id": 93112319, "body": "@AhmedMasud, not always is the error message right.  For example, both the files exist for me."}, {"owner": {"reputation": 18942, "user_id": 894328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3db17c5296335f63e856be44aa821bf6?s=128&d=identicon&r=PG", "display_name": "Ahmed Masud", "link": "https://stackoverflow.com/users/894328/ahmed-masud"}, "reply_to_user": {"reputation": 4408, "user_id": 154680, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1fe5646f7071126187fbda8c68c526f6?s=128&d=identicon&r=PG", "display_name": "russoue", "link": "https://stackoverflow.com/users/154680/russoue"}, "edited": false, "score": 1, "creation_date": 1541200733, "post_id": 47051402, "comment_id": 93148513, "body": "@russoue if you have that exact error message and it&#39;s not working, it means your build is broken ... start with <code>make mrproper</code> and retry"}], "answers": [{"tags": [], "owner": {"reputation": 18942, "user_id": 894328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3db17c5296335f63e856be44aa821bf6?s=128&d=identicon&r=PG", "display_name": "Ahmed Masud", "link": "https://stackoverflow.com/users/894328/ahmed-masud"}, "is_accepted": false, "score": 3, "last_activity_date": 1509544443, "creation_date": 1509544443, "answer_id": 47056528, "question_id": 47051402, "link": "https://stackoverflow.com/questions/47051402/compiling-kernel-module-what-packages-are-required/47056528#47056528", "title": "Compiling kernel module - what packages are required", "body": "<p>Before you can run <code>make</code> to compile the kernel you need to run <code>make oldconfig</code> or copy a .config file over into the build tree.  <code>make oldconfig</code> will  then use the .config and update it to the newer kernel.</p>\n\n<p>You also have other options:</p>\n\n<p>a simple <code>make help | grep -i config</code> in the kernel source directory shows:</p>\n\n<pre><code>Configuration targets:\n  config      - Update current config utilising a line-oriented program\n  nconfig         - Update current config utilising a ncurses menu based\n  menuconfig      - Update current config utilising a menu based program\n  xconfig     - Update current config utilising a Qt based front-end\n  gconfig     - Update current config utilising a GTK+ based front-end\n  oldconfig   - Update current config utilising a provided .config as base\n  localmodconfig  - Update current config disabling modules not loaded\n  localyesconfig  - Update current config converting local mods to core\n  silentoldconfig - Same as oldconfig, but quietly, additionally update deps\n  defconfig   - New config with default from ARCH supplied defconfig\n  savedefconfig   - Save current config as ./defconfig (minimal config)\n  allnoconfig     - New config where all options are answered with no\n  allyesconfig    - New config where all options are accepted with yes\n  allmodconfig    - New config selecting modules when possible\n  alldefconfig    - New config with all symbols set to default\n  randconfig      - New config with random answer to all options\n  listnewconfig   - List new options\n  olddefconfig    - Same as silentoldconfig but sets new symbols to their\n  kvmconfig   - Enable additional options for kvm guest kernel support\n  xenconfig       - Enable additional options for xen dom0 and guest kernel support\n  tinyconfig      - Configure the tiniest possible kernel\n  kselftest-merge - Merge all the config dependencies of kselftest to existing\n                    .config.\n  configuration. This is e.g. useful to build with nit-picking config.\n  i386_defconfig           - Build for i386\n  x86_64_defconfig         - Build for x86_64\n  make O=dir [targets] Locate all output files in \"dir\", including .config\n</code></pre>\n"}], "owner": {"reputation": 4454, "user_id": 1426106, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/67b5bab68445cf71df9b77cef2fc3ec8?s=128&d=identicon&r=PG", "display_name": "ilansch", "link": "https://stackoverflow.com/users/1426106/ilansch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 650, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1509544443, "creation_date": 1509527170, "question_id": 47051402, "link": "https://stackoverflow.com/questions/47051402/compiling-kernel-module-what-packages-are-required", "title": "Compiling kernel module - what packages are required", "body": "<p>Until now, When I compiled my kernel module, I installed: kernel-devel, kernel-headers.<br>\nLater on, I had to include kernel sources.<br>\nSo now the packages I install in order to compile my kernel module are: kernel-devel, kernel-headers and kernel.src.rpm (kernel source).<br>\nIm in the process of creating a \"build machine\" that will check for Available latest kernel, download necessary packages and compile the kernel module for that kernel.<br>\nI dont want to install the package, just to download it, and copy the files to their location (download kernel.src.rpm, rpm2cpio, cpio, and copy to /lib/modules/kernel-X-Y/)\nI noticed that if kernel src is installed, there is not need for kernel-headers.  </p>\n\n<p>kernel-devel is needed ??, I am not sure it is, when trying to install without kernel-devel, I get the following exception:  </p>\n\n<pre><code>make[2]: Entering directory `/usr/src/kernels/3.10.0-693.el7.x86_64'\n\n  ERROR: Kernel configuration is invalid.\n         include/generated/autoconf.h or include/config/auto.conf are missing.\n         Run 'make oldconfig &amp;&amp; make prepare' on kernel src to fix it.\n  WARNING: Symbol version dump ./Module.symvers\n           is missing; modules will have no dependencies and modversions.\n</code></pre>\n\n<p>What am I missing ? If i install kernel-devel, then i dont get this exception, I dont want to install kernel-devel.</p>\n"}, {"tags": ["c", "sdk", "linker", "shared-libraries", "dynamic-loading"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8829868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/692df8b38372a3bc5c047cf1f1535a93?s=128&d=identicon&r=PG&f=1", "display_name": "Balakrishna Modela", "link": "https://stackoverflow.com/users/8829868/balakrishna-modela"}, "edited": false, "score": 0, "creation_date": 1509535282, "post_id": 47053199, "comment_id": 81054170, "body": "Hi, then how to access -ldl in cross compiling, can i use -L /wrk/released/2017.3/GA/2017.3_1005_1/installs/lin64/SDK/201&zwnj;&#8203;7.3/gnu/aarch64/lin/&zwnj;&#8203;aarch64-none/bin/../&zwnj;&#8203;lib/gcc/aarch64-none&zwnj;&#8203;-elf/6.2.1/../../../&zwnj;&#8203;../aarch64-none-elf/&zwnj;&#8203;bin/ld"}, {"owner": {"reputation": 24, "user_id": 4509162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9304238e1b29bba0b4373ccb8ba6d495?s=128&d=identicon&r=PG&f=1", "display_name": "awahl", "link": "https://stackoverflow.com/users/4509162/awahl"}, "reply_to_user": {"reputation": 1, "user_id": 8829868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/692df8b38372a3bc5c047cf1f1535a93?s=128&d=identicon&r=PG&f=1", "display_name": "Balakrishna Modela", "link": "https://stackoverflow.com/users/8829868/balakrishna-modela"}, "edited": false, "score": 0, "creation_date": 1509538538, "post_id": 47053199, "comment_id": 81056062, "body": "Look for the PATH in your arm SDK containing the file libdl.so*. And then use that PATH with -L with -ldl"}], "tags": [], "owner": {"reputation": 24, "user_id": 4509162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9304238e1b29bba0b4373ccb8ba6d495?s=128&d=identicon&r=PG&f=1", "display_name": "awahl", "link": "https://stackoverflow.com/users/4509162/awahl"}, "is_accepted": false, "score": 0, "last_activity_date": 1509533514, "creation_date": 1509533514, "answer_id": 47053199, "question_id": 47051104, "link": "https://stackoverflow.com/questions/47051104/undefined-reference-to-dlopen-dlsym-dlclose-in-xilinx-sdk/47053199#47053199", "title": "Undefined reference to dlopen.dlsym,dlclose in Xilinx SDK", "body": "<p>If you are cross compiling from Linux(intel) to arm, then -L/usr/lib64/ -L/usr/local/lib\npoints to your x86_64 libraries and not to your arm libraries</p>\n"}], "owner": {"reputation": 1, "user_id": 8829868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/692df8b38372a3bc5c047cf1f1535a93?s=128&d=identicon&r=PG&f=1", "display_name": "Balakrishna Modela", "link": "https://stackoverflow.com/users/8829868/balakrishna-modela"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 443, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1509533514, "creation_date": 1509526036, "question_id": 47051104, "link": "https://stackoverflow.com/questions/47051104/undefined-reference-to-dlopen-dlsym-dlclose-in-xilinx-sdk", "title": "Undefined reference to dlopen.dlsym,dlclose in Xilinx SDK", "body": "<p>I am workind in Xilinx sdk, i am working on shared librariesand i created one shared library(<strong>libhello.so</strong>) by using \n <code>\naarch64-none-elf-gcc -shared -o libhello.so ../src/helloworld.o</code></p>\n\n<p>After creatind library i dynamiclly loaded in my c file as</p>\n\n<pre><code>void *handle;\nvoid (*foo)(void);\nhandle = dlopen(\"/proj/ssw_xhd/boot/balakrish/workspace/hello_world/Debug/libhello.so\", RTLD_GLOBAL);\nfoo = dlsym(handle,\"foo\");\nif (foo){\n    library_function();\n}\ndlclose(handle);\n</code></pre>\n\n<p>But i am getting error as follows</p>\n\n<pre><code>&lt;artificial&gt;:(.text.startup+0x18c): undefined reference to `dlopen'\n&lt;artificial&gt;:(.text.startup+0x18c): relocation truncated to fit: R_AARCH64_CALL26 against undefined symbol `dlopen'\n&lt;artificial&gt;:(.text.startup+0x1a0): undefined reference to `dlsym'\n&lt;artificial&gt;:(.text.startup+0x1a0): relocation truncated to fit: R_AARCH64_CALL26 against undefined symbol `dlsym'\n&lt;artificial&gt;:(.text.startup+0x1a8): undefined reference to `library_function'\n&lt;artificial&gt;:(.text.startup+0x1a8): relocation truncated to fit: R_AARCH64_CALL26 against undefined symbol `library_function'\n&lt;artificial&gt;:(.text.startup+0x1b0): undefined reference to `dlclose'\n&lt;artificial&gt;:(.text.startup+0x1b0): relocation truncated to fit: R_AARCH64_CALL26 against undefined symbol `dlclose'\ncollect2: error: ld returned 1 exit status\nmake: *** [fsbl.elf] Error 1\n</code></pre>\n\n<p>Also i tried adding -ldl in <strong>C/C++ Build settings->ARM v8 gcc linker->libraries->libraries(dl)->library paths(/usr/lib/ or /usr/lib64/)</strong>\nAnd getting error as </p>\n\n<pre><code>Building target: fsbl.elf\nInvoking: ARM v8 gcc linker\naarch64-none-elf-gcc -L\"/proj/ssw_xhd/boot/balakrish/workspace/hello_world/Debug\" -L/usr/lib64/ -L/usr/local/lib -Wl,-T -Wl,../src/lscript.ld -L../../fsbl_bsp/psu_cortexa53_0/lib -o \"fsbl.elf\"  ./src/psu_init.o ./src/xfsbl_authentication.o ./src/xfsbl_board.o ./src/xfsbl_bs.o ./src/xfsbl_csu_dma.o ./src/xfsbl_dfu_util.o ./src/xfsbl_exit.o ./src/xfsbl_handoff.o ./src/xfsbl_hooks.o ./src/xfsbl_image_header.o ./src/xfsbl_initialization.o ./src/xfsbl_main.o ./src/xfsbl_misc.o ./src/xfsbl_misc_drivers.o ./src/xfsbl_nand.o ./src/xfsbl_partition_load.o ./src/xfsbl_plpartition_valid.o ./src/xfsbl_qspi.o ./src/xfsbl_rsa_sha.o ./src/xfsbl_sd.o ./src/xfsbl_translation_table.o ./src/xfsbl_usb.o   -lhello -ldl -Wl,--start-group,-lxil,-lgcc,-lc,--end-group -Wl,--start-group,-lxilffs,-lxil,-lgcc,-lc,--end-group -Wl,--start-group,-lxilsecure,-lxil,-lgcc,-lc,--end-group -Wl,--start-group,-lxilpm,-lxil,-lgcc,-lc,--end-group -n\n/wrk/released/2017.3/GA/2017.3_1005_1/installs/lin64/SDK/2017.3/gnu/aarch64/lin/aarch64-none/bin/../lib/gcc/aarch64-none-elf/6.2.1/../../../../aarch64-none-elf/bin/ld: cannot find -ldl\ncollect2: error: ld returned 1 exit status\nmake: *** [fsbl.elf] Error 1\n\n14:08:01 Build Finished (took 5s.747ms)\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 4703, "user_id": 5375464, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3292ca87ff6c766b75dbe4b2ea0831da?s=128&d=identicon&r=PG&f=1", "display_name": "J...S", "link": "https://stackoverflow.com/users/5375464/j-s"}, "edited": false, "score": 4, "creation_date": 1509525683, "post_id": 47050947, "comment_id": 81048924, "body": "What do you mean &#39;exact&#39; substring? Both have the substring."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 3, "creation_date": 1509525701, "post_id": 47050947, "comment_id": 81048932, "body": "The first thing you have to do is strictly define what you mean by &quot;name&quot;.  You seem to be breaking your two example file names into separate strings.  To fully match those strings, one approach would be to separate a filename into what you define as its separate substrings, and then look for <i>complete</i> matches on the substrings with something like <code>strcmp()</code>."}, {"owner": {"reputation": 1975, "user_id": 6070341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHHZU.png?s=128&g=1", "display_name": "Costantino Grana", "link": "https://stackoverflow.com/users/6070341/costantino-grana"}, "edited": false, "score": 1, "creation_date": 1509526046, "post_id": 47050947, "comment_id": 81049089, "body": "What is the structure of your filenames? Is SOMETHINGTAN5346 a valid filename? Should TAN be found here?"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 1, "creation_date": 1509526055, "post_id": 47050947, "comment_id": 81049091, "body": "As others have said, decide what is your convention for the file names first. Couldn&#39;t you <code>p = strstr(str, &quot;Tan&quot;)</code> and if it is found check whether the next character at <code>p[strlen(&quot;Tan&quot;)]</code> is a digit? (That would fail if there are users with names <code>&quot;Tan5&quot;</code> and <code>&quot;gTan&quot;</code>, of course.)"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1509526740, "post_id": 47050947, "comment_id": 81049391, "body": "Why should &quot;SomethingTan5346&quot; be matched but not &quot;nothingTangyrs634&quot;? Both contain the substring &quot;Tan&quot;. You need to be more specific."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 3, "creation_date": 1509527023, "post_id": 47050947, "comment_id": 81049529, "body": "It looks like you have a too vague idea of what your code should do. At one place you mention an &quot;exact substring&quot; without defining what it is. At other place you mention a &quot;file&quot; that is &quot;for&quot; a &quot;person&quot;, again without defining what these words mean. If you think these things are self-evident, think again. Is <code>!@#$Tz:Gh012NV65$#</code> a &quot;file&quot;? What &quot;person&quot; is it &quot;for&quot;? Why?"}], "answers": [{"tags": [], "owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "is_accepted": false, "score": 4, "last_activity_date": 1509585897, "last_edit_date": 1509585897, "creation_date": 1509526597, "answer_id": 47051249, "question_id": 47050947, "link": "https://stackoverflow.com/questions/47050947/c-trying-to-match-the-exact-substring-and-nothing-more/47051249#47051249", "title": "C Trying to match the exact substring and nothing more", "body": "<p>If, as seems to be the case, you just want to identify strings that have your text but are immediately followed by a digit, your best bet is probably to get yourself <a href=\"https://www.regular-expressions.info/pcre.html\" rel=\"nofollow noreferrer\">a good regular expression implementation</a> and just search for <code>Tan[0-9]</code>.</p>\n\n<p>It <em>could</em> be done simply be using <code>strstr()</code> to find the string then checking the character following that with <code>isnum()</code> but the actual code to do that would be:</p>\n\n<ol>\n<li>not as easy as you think since you may have to do <em>multiple</em> searchs (e.g., <code>TangoTangoTan42</code> would need three checks); and</li>\n<li>inadvisable if there's the chance the searches my become more complex (such as <code>Tan</code> followed by 1-3 digits or exactly two <code>@</code> characters and an <code>X</code>).</li>\n</ol>\n\n<p>A regular expression library will make this much easier, provided you're willing to invest a little effort into learning about it.</p>\n\n<hr>\n\n<p>If you <em>don't</em> want to invest the time in learning regular expressions, the following complete test program should be a good starting point to evaluate a string based on the requirements in the first paragraph:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ctype.h&gt;\n\nint hasSubstrWithDigit(char *lookFor, char *searchString) {\n    // Cache length and set initial search position.\n\n    size_t lookLen = strlen(lookFor);\n    char *foundPos = searchString;\n\n    // Keep looking for string until none left.\n\n    while ((foundPos = strstr(foundPos, lookFor)) != NULL) {\n        // If at end, no possibility of following digit.\n\n        if (strlen(foundPos) == lookLen) return 0;\n\n        // If followed by digit, return true.\n\n        if (isdigit(foundPos[lookLen])) return 1;\n\n        // Otherwise keep looking, from next character.\n\n         foundPos++;\n    }\n\n    // Not found, return false.\n\n    return 0;\n}\n\nint main(int argc, char *argv[]) {\n    if (argc &lt; 3) {\n        printf(\"Usage testprog &lt;lookFor&gt; &lt;searchIn&gt;...\\n\");\n        return 1;\n    }\n    for (int i = 2; i &lt; argc; ++i) {\n        printf(\"Result of looking for '%s' in '%s' is %d\\n\", argv[1], argv[i], hasSubstrWithDigit(argv[1], argv[i]));\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Though, as you can see, it's not as elegant as a regex search, and is likely to become even <em>less</em> elegant if your requirements change :-)</p>\n\n<p>Running that with:</p>\n\n<pre><code>./testprog Tan xyzzyTan xyzzyTan7 xyzzyTangy4 xyzzyTangyTan12\n</code></pre>\n\n<p>shows it is action:</p>\n\n<pre><code>Result of looking for 'Tan' in 'xyzzyTan' is 0\nResult of looking for 'Tan' in 'xyzzyTan7' is 1\nResult of looking for 'Tan' in 'xyzzyTangy4' is 0\nResult of looking for 'Tan' in 'xyzzyTangyTan12' is 1\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1509527259, "post_id": 47051357, "comment_id": 81049644, "body": "POSIX C has <a href=\"http://man7.org/linux/man-pages/man3/regcomp.3.html\" rel=\"nofollow noreferrer\">regex(3)</a>, no need for C++"}], "tags": [], "owner": {"reputation": 11963, "user_id": 2707864, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/LYdpu.png?s=128&g=1", "display_name": "sancho.s ReinstateMonicaCellio", "link": "https://stackoverflow.com/users/2707864/sancho-s-reinstatemonicacellio"}, "is_accepted": true, "score": 1, "last_activity_date": 1519686121, "last_edit_date": 1519686121, "creation_date": 1509527015, "answer_id": 47051357, "question_id": 47050947, "link": "https://stackoverflow.com/questions/47050947/c-trying-to-match-the-exact-substring-and-nothing-more/47051357#47051357", "title": "C Trying to match the exact substring and nothing more", "body": "<p>The solution depends on your definition of exact matching.\nThis might be useful for you:</p>\n\n<ol>\n<li>Traverse all matches of the target substring.</li>\n</ol>\n\n<p><a href=\"https://stackoverflow.com/questions/13482519/c-find-all-occurrences-of-substring\">C find all occurrences of substring</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/5169562/finding-all-instances-of-a-substring-in-a-string\">Finding all instances of a substring in a string</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/9052490/find-the-count-of-substring-in-string\">find the count of substring in string</a></p>\n\n<p><a href=\"https://cboard.cprogramming.com/c-programming/73365-how-use-strstr-find-all-occurrences-substring-string-not-only-first.html\" rel=\"nofollow noreferrer\">https://cboard.cprogramming.com/c-programming/73365-how-use-strstr-find-all-occurrences-substring-string-not-only-first.html</a></p>\n\n<p>etc.</p>\n\n<ol start=\"2\">\n<li>Having the span of the match, verify that the previous and following characters match/do not match your criterion for \"exact match\".</li>\n</ol>\n\n<p>Or,</p>\n\n<ol>\n<li>You could take advantage of regex in C++ (I know the tag is \"C\"), with <code>#include &lt;regex&gt;</code>, or POSIX <code>#include &lt;regex.h&gt;</code>.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 1, "last_activity_date": 1509527991, "last_edit_date": 1509527991, "creation_date": 1509527315, "answer_id": 47051431, "question_id": 47050947, "link": "https://stackoverflow.com/questions/47050947/c-trying-to-match-the-exact-substring-and-nothing-more/47051431#47051431", "title": "C Trying to match the exact substring and nothing more", "body": "<p>You may want to use <a href=\"http://man7.org/linux/man-pages/man3/strstr.3.html\" rel=\"nofollow noreferrer\">strstr(3)</a> to search a substring in a string, <a href=\"http://man7.org/linux/man-pages/man3/strchr.3.html\" rel=\"nofollow noreferrer\">strchr(3)</a> to search a character in a string, or even <strong><a href=\"https://en.wikipedia.org/wiki/Regular_expression\" rel=\"nofollow noreferrer\">regular expression</a>s</strong> with <a href=\"http://man7.org/linux/man-pages/man3/regcomp.3.html\" rel=\"nofollow noreferrer\">regcomp(3)</a>.</p>\n\n<p>You should read more about <strong><a href=\"https://en.wikipedia.org/wiki/Parsing\" rel=\"nofollow noreferrer\">parsing</a> techniques</strong>, notably about <a href=\"https://en.wikipedia.org/wiki/Recursive_descent_parser\" rel=\"nofollow noreferrer\">recursive descent parsers</a>. In some cases, <a href=\"http://man7.org/linux/man-pages/man3/sscanf.3.html\" rel=\"nofollow noreferrer\">sscanf(3)</a> with <code>%n</code> can also be handy. You should take care of the return count.</p>\n\n<p>You could loop to read then parse every line, perhaps using <a href=\"http://man7.org/linux/man-pages/man3/getline.3.html\" rel=\"nofollow noreferrer\">getline(3)</a>, see <a href=\"https://stackoverflow.com/a/9171511/841108\">this</a>.</p>\n\n<p>You need first to <strong>document your input <a href=\"https://en.wikipedia.org/wiki/File_format\" rel=\"nofollow noreferrer\">file format</a></strong> (or your file name conventions, if <code>SomethingTan5346</code> is some <a href=\"https://en.wikipedia.org/wiki/Path_(computing)\" rel=\"nofollow noreferrer\">file path</a>), perhaps using <a href=\"https://en.wikipedia.org/wiki/Extended_Backus%E2%80%93Naur_form\" rel=\"nofollow noreferrer\">EBNF</a> notation.</p>\n\n<p><sup>(you probably want to combine several approaches I am suggesting above)</sup></p>\n\n<p>BTW, I recommend limiting (for your convenience) file paths to a restricted set of characters. For example using <code>*</code> or <code>;</code> or spaces or tabs in file paths is possible (see <a href=\"http://man7.org/linux/man-pages/man7/path_resolution.7.html\" rel=\"nofollow noreferrer\">path_resolution(7)</a>) but should be frowned upon.</p>\n"}], "owner": {"reputation": 149, "user_id": 8851729, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-13jjL-LHLN0/AAAAAAAAAAI/AAAAAAAAASE/sSNw2-2hHkk/photo.jpg?sz=128", "display_name": "Rishaal", "link": "https://stackoverflow.com/users/8851729/rishaal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 484, "favorite_count": 0, "accepted_answer_id": 47051357, "answer_count": 3, "score": 1, "last_activity_date": 1519686121, "creation_date": 1509525401, "last_edit_date": 1509525900, "question_id": 47050947, "link": "https://stackoverflow.com/questions/47050947/c-trying-to-match-the-exact-substring-and-nothing-more", "title": "C Trying to match the exact substring and nothing more", "body": "<p>I have tried different functions including <code>strtok()</code>, <code>strcmp()</code> and <code>strstr()</code>, but I guess I'm missing something. Is there a way to match the exact substring in a string?</p>\n\n<p>For example:</p>\n\n<p>If I have a name: <strong>\"Tan\"</strong></p>\n\n<p>And I have 2 file names: \"SomethingTan5346\" and \"nothingTangyrs634\"</p>\n\n<p>So how can I make sure that I match the first string and not both? Because the second file is for the person Tangyrs. Or is it impossible with this approach? Am I going at it the wrong way?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 6356, "user_id": 1109725, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ab7e17981e19525fe1bed0878d0d2cc9?s=128&d=identicon&r=PG", "display_name": "Joe", "link": "https://stackoverflow.com/users/1109725/joe"}, "edited": false, "score": 0, "creation_date": 1509523680, "post_id": 47050541, "comment_id": 81048068, "body": "You&#39;re not converting from real data to a string representation. Since the first byte is 0x00, that&#39;s a NUL and a string terminator. Try <code>printf(&quot;%02X:%02X:%02X:%02X:%02X:%02X\\n&quot;, array[0], array[1], array[2], array[3]. array[4], array[5])</code> to see what I mean."}, {"owner": {"reputation": 408, "user_id": 6406569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/534c75e4dd0ae2bd2406944f73deee19?s=128&d=identicon&r=PG&f=1", "display_name": "vivek", "link": "https://stackoverflow.com/users/6406569/vivek"}, "reply_to_user": {"reputation": 6356, "user_id": 1109725, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ab7e17981e19525fe1bed0878d0d2cc9?s=128&d=identicon&r=PG", "display_name": "Joe", "link": "https://stackoverflow.com/users/1109725/joe"}, "edited": false, "score": 0, "creation_date": 1509523901, "post_id": 47050541, "comment_id": 81048167, "body": "@Joe even though I modified first byte with 0x01 from 0x00 then also it is not working"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1509524015, "post_id": 47050541, "comment_id": 81048214, "body": "I wouln&#39;t use variable number of arguments in first place for this problem."}, {"owner": {"reputation": 408, "user_id": 6406569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/534c75e4dd0ae2bd2406944f73deee19?s=128&d=identicon&r=PG&f=1", "display_name": "vivek", "link": "https://stackoverflow.com/users/6406569/vivek"}, "reply_to_user": {"reputation": 6356, "user_id": 1109725, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ab7e17981e19525fe1bed0878d0d2cc9?s=128&d=identicon&r=PG", "display_name": "Joe", "link": "https://stackoverflow.com/users/1109725/joe"}, "edited": false, "score": 0, "creation_date": 1509524045, "post_id": 47050541, "comment_id": 81048226, "body": "@Joe thanks for the answer....your solution will work in the main function not in the function which receives variable number of arguments."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1509524666, "post_id": 47050541, "comment_id": 81048457, "body": "Why do you think your function is 1) receiving a variable number of arguments and 2) receiving a string?  It&#39;s receiving neither. You&#39;re passing it a single <code>unsigned char[]</code>, which is passed as a <code>char *</code>.  You&#39;re <i>not</i> passing it a string."}, {"owner": {"reputation": 408, "user_id": 6406569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/534c75e4dd0ae2bd2406944f73deee19?s=128&d=identicon&r=PG&f=1", "display_name": "vivek", "link": "https://stackoverflow.com/users/6406569/vivek"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1509524840, "post_id": 47050541, "comment_id": 81048531, "body": "@AndrewHenle  Sorry I didn&#39;t follow what you have said......If you see in the main function I have called the function fun(10,array) where array is having mac in hex values...."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1509525494, "post_id": 47050541, "comment_id": 81048837, "body": "Unrelated: but please <code>snprintf(mac,18,&quot;Mac %s&quot;,k);</code> -&gt; <code>snprintf(mac, sizeof(mac), &quot;Mac %s&quot;, k);</code>"}], "answers": [{"tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": false, "score": 0, "last_activity_date": 1509526387, "last_edit_date": 1509526387, "creation_date": 1509526077, "answer_id": 47051113, "question_id": 47050541, "link": "https://stackoverflow.com/questions/47050541/how-to-receive-mac-address-in-variable-number-of-arguments-in-c/47051113#47051113", "title": "How to receive MAC address in variable number of arguments in c?", "body": "<p>This would work (try it):</p>\n\n<pre><code>unsigned char array[6] = \"abc\";\n</code></pre>\n\n<p>but as you basically do this:</p>\n\n<pre><code>unsigned char array[6] = { 0x00, 0x0c, 0x2a, 0xab, 0x0f, 0x3c };\n...\nprintf(\"%s\", array);\n</code></pre>\n\n<p>you are actually printing a string of size 0. Remember that strings are NUL terminated.</p>\n\n<p>Using variable number of arguments here is pointless.\nYou probably want this:</p>\n\n<pre><code>void fun(int x, unsigned char array[])\n{\n  char mac[28];\n  snprintf(mac, sizeof(mac), \"Mac %02x %02x %02x %02x %02x %02x\", array[0], array[1], array[2], array[3], array[4], array[5]);\n  printf(\"Final mac is %s\\n\", mac);\n}\n</code></pre>\n\n<p>or this:</p>\n\n<pre><code>void fun(int x, unsigned char array[])\n{\n  char mac[28];\n  char hex[4];\n\n  snprintf(mac, sizeof(mac), \"Mac\");\n\n  for (int i = 0; i &lt; 6 ; i++)\n  {\n    sprintf(hex, \" %02x\", array[i]);\n    strcat(mac, hex);\n  }\n\n  printf(\"Final mac is %s\\n\", mac);\n}\n</code></pre>\n"}], "owner": {"reputation": 408, "user_id": 6406569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/534c75e4dd0ae2bd2406944f73deee19?s=128&d=identicon&r=PG&f=1", "display_name": "vivek", "link": "https://stackoverflow.com/users/6406569/vivek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1509526387, "creation_date": 1509523326, "question_id": 47050541, "link": "https://stackoverflow.com/questions/47050541/how-to-receive-mac-address-in-variable-number-of-arguments-in-c", "title": "How to receive MAC address in variable number of arguments in c?", "body": "<p>As I have less idea on variable number of arguments in c, I couldn't find the appropriate solution for my problem. </p>\n\n<p>In short my problem is I'll receive the mac address in the function which receives variable number of arguments. I want to fetch the mac address and print it in the following format\n    x:x:x:x:x:x </p>\n\n<p>I want formatting of mac address in the string form should take place in the function which receives variable number of arguments. </p>\n\n<p>So far I have done this</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdarg.h&gt;\n\nvoid fun(int,...);\n\n\nvoid main()\n{\nunsigned char array[6] = {0x00, 0x0c, 0x2a, 0xab, 0x0f, 0x3c};\nfun(10,array);\n}\n\nvoid fun(int x,...)\n{\n    unsigned char *k=NULL;\n    char mac[18];\n    va_list list;\n    va_start(list,x);\n    k=va_arg(list,unsigned char *);\n\n    snprintf(mac,18,\"Mac %s\",k);\n    printf(\"Final mac is %s\\n\",mac);\n    va_end(list);\n}\n</code></pre>\n\n<p>While printing it is printing nothing. How to achieve this?</p>\n"}, {"tags": ["c", "linux", "multithreading"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1509522649, "post_id": 47050352, "comment_id": 81047630, "body": "How many threads are you creating? And don&#39;t include printout in the timing (it can be relatively slow and skew benchmark results)."}, {"owner": {"reputation": 155, "user_id": 5527743, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/358625ddba0ce3c9ce45c5068742290d?s=128&d=identicon&r=PG&f=1", "display_name": "Som", "link": "https://stackoverflow.com/users/5527743/som"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1509523642, "post_id": 47050352, "comment_id": 81048050, "body": "I doing a academic project here, where we study the performance when the number of threads is from 2 to 64. And regarding the printout I removed it.Thanks."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1509523793, "post_id": 47050352, "comment_id": 81048118, "body": "Unclear - what parameters are you passing for your testing?"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1509524018, "post_id": 47050352, "comment_id": 81048215, "body": "&#39;where we study the performance when the number of threads is from 2 to 64&#39; well, since threads are not always, (it should be &#39;hardly ever&#39;), used in this &#39;continually create, join, terminate&#39; manner, you should be careful when drawing conclusions from such studies."}, {"owner": {"reputation": 155, "user_id": 5527743, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/358625ddba0ce3c9ce45c5068742290d?s=128&d=identicon&r=PG&f=1", "display_name": "Som", "link": "https://stackoverflow.com/users/5527743/som"}, "edited": false, "score": 0, "creation_date": 1509525477, "post_id": 47050352, "comment_id": 81048828, "body": "we pass size of matrix and number of threads for solving the distribution of random numbers in matrix.  But I find that the problem is with resource creation here."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1509529166, "post_id": 47050352, "comment_id": 81050710, "body": "&#39;we pass size of matrix&#39; sure, but what actual values are you testing with?"}, {"owner": {"reputation": 155, "user_id": 5527743, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/358625ddba0ce3c9ce45c5068742290d?s=128&d=identicon&r=PG&f=1", "display_name": "Som", "link": "https://stackoverflow.com/users/5527743/som"}, "edited": false, "score": 0, "creation_date": 1509532348, "post_id": 47050352, "comment_id": 81052489, "body": "The matrix is filled with random values."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1509541140, "post_id": 47050352, "comment_id": 81057758, "body": "@Som Command-line values!  How big is your matrix that you test with?"}, {"owner": {"reputation": 155, "user_id": 5527743, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/358625ddba0ce3c9ce45c5068742290d?s=128&d=identicon&r=PG&f=1", "display_name": "Som", "link": "https://stackoverflow.com/users/5527743/som"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1509610023, "post_id": 47050352, "comment_id": 81088626, "body": "@MartinJames between 64 and 1000."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1509619653, "post_id": 47050352, "comment_id": 81094880, "body": "64*64 is much too small.  1000*1000 is getting there."}], "answers": [{"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": true, "score": 3, "last_activity_date": 1509522858, "creation_date": 1509522858, "answer_id": 47050433, "question_id": 47050352, "link": "https://stackoverflow.com/questions/47050352/no-significant-performance-improvement-in-multi-threading/47050433#47050433", "title": "No significant performance improvement in multi threading", "body": "<p>The process of creating a thread takes up a lot of resources. So if you create threads just to do some trivial calculations, you might end up with worse performance than a single threaded application. Multi-threading only pays off performance-wise where there are a whole lot of processing work to be done, and where there is a case to \"parallelize\" the program, such as \"go through this huge array and perform lots of calculations per item\".</p>\n\n<p>Note that the reason why you'd make a program multi-threaded is not often related to performance at all. The most common reason is that you wish to execute several things at once, such as having one thread handling the GUI and another thread doing calculations without freezing the GUI.</p>\n"}], "owner": {"reputation": 155, "user_id": 5527743, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/358625ddba0ce3c9ce45c5068742290d?s=128&d=identicon&r=PG&f=1", "display_name": "Som", "link": "https://stackoverflow.com/users/5527743/som"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 47050433, "answer_count": 1, "score": 0, "last_activity_date": 1509522858, "creation_date": 1509522423, "question_id": 47050352, "link": "https://stackoverflow.com/questions/47050352/no-significant-performance-improvement-in-multi-threading", "title": "No significant performance improvement in multi threading", "body": "<p>I am trying to find a distribution of variables in a NxN matrix. The matrix is filled randomly by numbers from 1 to 10. </p>\n\n<p>I am creating some number of threads (from cmdline input) and assigning each of them some rows(equally distributed to threads) for finding the distribution. But I don't see any performance improvement from single threaded application. Is it a expected result or am I doing something wrong here.</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;pthread.h&gt;\n#include &lt;string.h&gt;\n#include \"timing.h\"\n\n\nstruct threadInput{\nint** inputArray;\nint* distribution;\nint size;\n};\n\nint sizeofArray;\nint matrixDistribution[10] = {0};\npthread_mutex_t count_mutex;\n\nvoid* findDistribution(void* distribution);\n\nint main(int argc,char** argv){\n    if(argc &lt; 3){\n        printf(\"%s \\n\",\"please enter the size of NxN matrix and number of threads. ex: ./part3parallel.out \");\n        exit(0);\n    }\n\n    timing_start();\n    int numThreads;\n    sizeofArray= atoi(argv[1]);\n    numThreads = atoi(argv[2]);\n\n    /*generate matrix */\n    int array[sizeofArray][sizeofArray];\n    srand(time(NULL));\n    int i,j;\n    for(i = 0;i&lt;sizeofArray;i++){\n        for(j=0;j&lt;sizeofArray;j++){\n            array[i][j] = (rand() % 10) + 1;\n         }\n     }\n\n    /* split the array between threads */\n    int divideArraybythreads[numThreads];\n    memset(divideArraybythreads, 0, sizeof divideArraybythreads);\n    int threadCounter = 0;\n\n    for(i=0;i&lt;sizeofArray ;i++){\n        divideArraybythreads[threadCounter] = divideArraybythreads[threadCounter] + 1;\n        ++threadCounter;\n        if(threadCounter &gt; numThreads - 1)\n            threadCounter = 0;\n    }\n    /*****************************/\n\n    struct threadInput ti[numThreads];\n    pthread_t threadIds[numThreads];\n    int arrayCounter = 0;\n\n    for(i=0;i&lt;numThreads;i++){\n       if(divideArraybythreads[i] == 0)\n            continue;\n\n        ti[i].inputArray = (int **)malloc(divideArraybythreads[i] * sizeof(int *));\n        int j;\n        for (j=0; j&lt;divideArraybythreads[i] ; j++){\n            ti[i].inputArray[j] = (int *)malloc(sizeofArray * sizeof(int));\n            ti[i].inputArray[j] = *(array + arrayCounter);\n            arrayCounter++;\n        }\n        ti[i].size = divideArraybythreads[i];\n        ti[i].distribution = (int *)malloc(10 * sizeof(int));\n\n        pthread_attr_t attr;\n        pthread_attr_init(&amp;attr);\n        pthread_create(&amp;threadIds[i],&amp;attr, findDistribution,&amp;ti[i]);\n    }\n\n    for(i=0;i&lt;numThreads;i++){\n        if(divideArraybythreads[i] == 0)\n            continue;\n        pthread_join(threadIds[i],NULL);\n    }\n\n    for(i=0;i&lt;numThreads;i++){\n        if(divideArraybythreads[i] == 0)\n            continue;\n        for(j=0;j&lt;10;j++)\n        {\n            matrixDistribution[j]  =  matrixDistribution[j]  + ti[i].distribution[j];\n        }   \n    }\n\n    for(i=0;i&lt;10;i++){\n        printf(\"%d \\n\",matrixDistribution[i]);\n    }\n\n    timing_stop();\n\n    printf(\"%lli \\n\",get_timing());\n\n    return 0;\n}\n\n\nvoid* findDistribution(void* distribution){\n    struct threadInput *arr = (struct threadInput*) distribution;\n\n    int i,j;\n    for(i=0;i&lt;arr-&gt;size;i++){\n        for(j=0;j&lt;sizeofArray;j++){\n            arr-&gt;distribution[arr-&gt;inputArray[i][j] - 1]++;\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "character"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1509522028, "post_id": 47050210, "comment_id": 81047384, "body": "Literal strings in C are just <i>arrays</i> stored in a special location. As other arrays they <i>decay</i> to a pointer to its first element, which is what you assign to e.g. <code>p</code> with <code>p=&quot;Bye&quot;;</code>."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1509522156, "post_id": 47050210, "comment_id": 81047429, "body": "Furthermore, the <a href=\"http://en.cppreference.com/w/c/io/fprintf\" rel=\"nofollow noreferrer\"><code>printf</code></a> format <code>&quot;%s&quot;</code> takes the corresponding argument, and treats it as a pointer to the first character of a <i>null-terminated byte string</i> (which is the real name of a <code>char</code> string)."}, {"owner": {"reputation": 21, "user_id": 8864563, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2c158b7b908c0a875da4811d072272de?s=128&d=identicon&r=PG&f=1", "display_name": "SGG", "link": "https://stackoverflow.com/users/8864563/sgg"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1509525859, "post_id": 47050210, "comment_id": 81049004, "body": "Thanks for helping. Please elaborate more on literal string. Why do we need literal strings when we can normally use strings? And why can&#39;t we copy a string to another but can copy literal strings? Thanks."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1509526157, "post_id": 47050210, "comment_id": 81049138, "body": "Think about those <code>printf</code> calls you have... Would you rather need to use actual variables for the format strings, or simple plain literal strings? There are many places where it&#39;s easier, simpler and more readable to use literal strings instead of having to use arrays and variables."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1509526186, "post_id": 47050210, "comment_id": 81049157, "body": "And what do you mean by &quot;why can&#39;t we copy a string to another but can copy literal strings&quot;? That doesn&#39;t make any sense."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 8864563, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2c158b7b908c0a875da4811d072272de?s=128&d=identicon&r=PG&f=1", "display_name": "SGG", "link": "https://stackoverflow.com/users/8864563/sgg"}, "edited": false, "score": 0, "creation_date": 1509540109, "post_id": 47051817, "comment_id": 81057051, "body": "Thank you so so much!! It helped me a lott!! :)"}], "tags": [], "owner": {"reputation": 9095, "user_id": 8542346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11b206b49cec657d28a5876f8330780e?s=128&d=identicon&r=PG&f=1", "display_name": "H.S.", "link": "https://stackoverflow.com/users/8542346/h-s"}, "is_accepted": false, "score": 2, "last_activity_date": 1509540205, "last_edit_date": 1509540205, "creation_date": 1509528712, "answer_id": 47051817, "question_id": 47050210, "link": "https://stackoverflow.com/questions/47050210/character-pointer-in-c/47051817#47051817", "title": "Character Pointer in C", "body": "<p>You are very much correct here:</p>\n\n<blockquote>\n  <p>As we know pointers store the address of a variable and suppose if we used p=str1 then it should store the base address of array str1.</p>\n</blockquote>\n\n<p>Your first question:</p>\n\n<blockquote>\n  <p>Then here how p is acting like an array itself which is storing a string?</p>\n</blockquote>\n\n<p>You can say <code>p</code> is acting like an array but in reality, it is just a pointer which is pointing to the base address of string <code>str1</code> which is a null-terminated string.</p>\n\n<p>Your second question:</p>\n\n<blockquote>\n  <p>I've not really understood what's character pointer. Is it not really a pointer?</p>\n</blockquote>\n\n<p>A character pointer is again a pointer like the pointers to other types in C. </p>\n\n<p>But there is catch here. when you do:</p>\n\n<pre><code>char a = 'A';\nchar *ptr = &amp;a; // ptr points to character 'A'\n</code></pre>\n\n<p>Here <code>ptr</code> is <strong>pointer to a character</strong>.</p>\n\n<p>But when you do:</p>\n\n<pre><code>char *str = \"Hello\";\nchar *ptr = str;  // ptr points to first character of string str\n</code></pre>\n\n<p>Here <code>ptr</code> is <strong>pointer to a string</strong></p>\n\n<p>A point to note here is - pointer to a character is different from the pointer to a string.</p>\n\n<p>In C, strings are defined as an array of characters. The difference between a character array and a string is the string is terminated with a special character \u2018\\0\u2019.\nSo,</p>\n\n<pre><code>char str[6] = {'H', 'e', 'l', 'l', 'o', '\\0'};\nchar str[] = \"Hello\";\n</code></pre>\n\n<p>Both are same but there is a difference in the way they have been initialized.</p>\n\n<p>Wherever in the program, we use <code>str</code>, this will give the base address of string \"Hello\". Similarly, string literals are also an array of characters with an exception that they can not be changed because the compiler may put them read-only data section.</p>\n\n<p>So, if we have <code>char *ptr = str</code> then</p>\n\n<pre><code>ptr[0] == str[0]\nptr[1] == str[1]\n.....\n..... and so on\n</code></pre>\n\n<p>Because,</p>\n\n<p><code>ptr[0]</code> is <code>*(ptr + 0)</code> which is character at 0th location of string <code>str</code> and can also be written as <code>*ptr</code> and </p>\n\n<p><code>ptr[1]</code> is <code>*(ptr + 1)</code> which is a character at the 1st location of string <code>str</code>.</p>\n\n<p>When we increment a pointer, it gets incremented in steps of the object size that the pointer points to. Here, ptr is pointer to <code>char</code> so, <code>ptr+1</code> will give address of next character and <code>*(ptr + 1)</code> give the character at that location. That's why to the user it looks like its acting like an array.</p>\n\n<p>Your third question:</p>\n\n<blockquote>\n  <p>Because we are not using &amp; and neither are we getting the address as an output.</p>\n</blockquote>\n\n<p>If I am getting it correctly you want to print the base address of the string, the pointer is pointing to.</p>\n\n<p>In order to get the base address of string a pointer is pointing to you need to use <code>%p</code>. Like this:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint main() {\n  char str1[] = \"Hello\";\n  char * ptr = str1;\n  printf (\"%s\\n\", str1);\n  printf (\"%s\\n\", ptr);\n  printf (\"%p\\n\", ptr);\n  printf (\"%p\\n\", str1);\n  printf (\"%p\\n\", &amp;str1[0]);\n  return 0;\n}\n</code></pre>\n\n<p>Output on my system:</p>\n\n<pre><code>Hello\nHello\n0x7fff5e997b46\n0x7fff5e997b46\n0x7fff5e997b46\n</code></pre>\n\n<p>Here you can see - <code>ptr</code>, <code>str</code> and <code>&amp;str[0]</code> giving same address.</p>\n"}], "owner": {"reputation": 21, "user_id": 8864563, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2c158b7b908c0a875da4811d072272de?s=128&d=identicon&r=PG&f=1", "display_name": "SGG", "link": "https://stackoverflow.com/users/8864563/sgg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5617, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1509540205, "creation_date": 1509521802, "last_edit_date": 1509522107, "question_id": 47050210, "link": "https://stackoverflow.com/questions/47050210/character-pointer-in-c", "title": "Character Pointer in C", "body": "<p>Experts I've some doubts in this programme.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nvoid main() {\n  char str1[] = \"Hello\";\n  char * p = \"Hello\", * s, * q;\n  p = \"Bye\";\n  printf(\"%s\", p);\n  s = p;\n  printf(\"%s\", s);\n  q = str1;\n  printf(\"\\n%s\", q);\n}\n</code></pre>\n\n<p>Here p,s and q are character pointers. As we know pointers store the address of a variable and suppose if we used p=str1 then it should store the base address of array str1. Then here how p is acting like an array itself which is storing a string? I've not really understood what's character pointer. Is it not really a pointer? Because we are not using &amp; and neither are we getting the address as an output. Please help. Thank you. </p>\n"}, {"tags": ["c", "string"], "comments": [{"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 2, "creation_date": 1509520511, "post_id": 47049875, "comment_id": 81046775, "body": "You should not realloc so often. There has to be a more efficient way."}, {"owner": {"reputation": 15, "user_id": 6421880, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98db8c60631457171735079d13d733e5?s=128&d=identicon&r=PG&f=1", "display_name": "linpohsien", "link": "https://stackoverflow.com/users/6421880/linpohsien"}, "reply_to_user": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1509520696, "post_id": 47049875, "comment_id": 81046846, "body": "Do you mean I had better realloc before return instead of inside while loop?"}, {"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1509524268, "post_id": 47049875, "comment_id": 81048310, "body": "Allocate initially at least enough space to hold the original string and then use some prediction, realloc by adding a block of some N chars at once instead of 1 char, maybe doubling N every time."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 6421880, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98db8c60631457171735079d13d733e5?s=128&d=identicon&r=PG&f=1", "display_name": "linpohsien", "link": "https://stackoverflow.com/users/6421880/linpohsien"}, "edited": false, "score": 0, "creation_date": 1509522833, "post_id": 47049897, "comment_id": 81047727, "body": "but I should allocate memory for it before assigning it a character, shouldn&#39;t I?"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 15, "user_id": 6421880, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98db8c60631457171735079d13d733e5?s=128&d=identicon&r=PG&f=1", "display_name": "linpohsien", "link": "https://stackoverflow.com/users/6421880/linpohsien"}, "edited": false, "score": 0, "creation_date": 1509554746, "post_id": 47049897, "comment_id": 81066881, "body": "@linpohsien You already did. The very first line of code allocated space."}, {"owner": {"reputation": 15, "user_id": 6421880, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98db8c60631457171735079d13d733e5?s=128&d=identicon&r=PG&f=1", "display_name": "linpohsien", "link": "https://stackoverflow.com/users/6421880/linpohsien"}, "edited": false, "score": 0, "creation_date": 1509585009, "post_id": 47049897, "comment_id": 81080328, "body": "but it only allocate one space for null terminated character"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 15, "user_id": 6421880, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98db8c60631457171735079d13d733e5?s=128&d=identicon&r=PG&f=1", "display_name": "linpohsien", "link": "https://stackoverflow.com/users/6421880/linpohsien"}, "edited": false, "score": 0, "creation_date": 1509609359, "post_id": 47049897, "comment_id": 81088268, "body": "@linpohsien Right, so what&#39;s the issue? <code>*destptr = *sentence;</code> only copies one character."}], "tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": true, "score": 2, "last_activity_date": 1509523093, "last_edit_date": 1509523093, "creation_date": 1509520309, "answer_id": 47049897, "question_id": 47049875, "link": "https://stackoverflow.com/questions/47049875/valgrind-invalid-read-write-of-size-1-ask/47049897#47049897", "title": "Valgrind: Invalid read / write of size 1 Ask", "body": "<pre><code>char *dest = malloc (len_total + 1);\nchar *destptr = dest;\n</code></pre>\n\n<p>Okay, so <code>destptr</code> points into the block that <code>dest</code> points to.</p>\n\n<pre><code>dest = realloc(dest, len_total + 1);\n*destptr = *sentence;\n</code></pre>\n\n<p>You dereference <code>destptr</code> while it points into the block you just reallocated. That can't be right. Start by swapping the order of those last two statements.</p>\n"}], "owner": {"reputation": 15, "user_id": 6421880, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98db8c60631457171735079d13d733e5?s=128&d=identicon&r=PG&f=1", "display_name": "linpohsien", "link": "https://stackoverflow.com/users/6421880/linpohsien"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 419, "favorite_count": 0, "accepted_answer_id": 47049897, "answer_count": 1, "score": 1, "last_activity_date": 1509532629, "creation_date": 1509520191, "last_edit_date": 1509532629, "question_id": 47049875, "link": "https://stackoverflow.com/questions/47049875/valgrind-invalid-read-write-of-size-1-ask", "title": "Valgrind: Invalid read / write of size 1 Ask", "body": "<p>I try to write a code which can replace certain words or characters in a string. Although output seems great, I got some error by using <code>valgrind</code>. Can anyone help?</p>\n\n<pre><code>01: #include &lt;stdio.h&gt;\n02: #include &lt;stdlib.h&gt;\n03: #include &lt;string.h&gt;\n04: \n05: char *changewords (char *sentence, char *find, char *replace)\n06: {\n07:     size_t len_total =  0;\n08: \n09:     char *dest = malloc (len_total + 1);\n10:     char *destptr = dest;\n11: \n12:     *dest = 0;\n13: \n14:     while (*sentence)\n15:     {\n16:         if (!strncmp (sentence, find, strlen(find)))\n17:         {\n18:             len_total += strlen(replace);\n19:             dest = realloc(dest, len_total + 1);\n20:             *destptr = 0;\n21:             strcat (destptr, replace);\n22:             sentence += strlen(find);\n23:             destptr += strlen(replace);\n24:         } else\n25:         {\n26:             len_total++;\n27:             dest = realloc(dest, len_total + 1);\n28:             *destptr = *sentence;\n29:             destptr++;\n30:             sentence++;\n31:         }\n32: \n33:     }\n34:     *destptr = 0;\n35:     return dest;\n36: }\n37: \n38: int main (void)\n39: {\n40:     char *result;\n41: \n42:     result = changewords (\"i like it\", \"i\", \"ooooooooo\");\n43:     printf (\"%s\\n\", result);\n44:     free (result);\n45: }\n</code></pre>\n\n<h2>Valgrind report:</h2>\n\n<pre><code>==20396== Invalid write of size 1\n==20396==    at 0x40076F: changewords (changeword4.c:22)\n==20396==    by 0x400815: main (changeword4.c:45)\n==20396==  Address 0x5204040 is 0 bytes inside a block of size 1 free'd\n==20396==    at 0x4C2FD5F: realloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==20396==    by 0x400766: changewords (changeword4.c:21)\n==20396==    by 0x400815: main (changeword4.c:45)\n==20396==  Block was alloc'd at\n==20396==    at 0x4C2DB8F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==20396==    by 0x400701: changewords (changeword4.c:11)\n==20396==    by 0x400815: main (changeword4.c:45)\n==20396== \n==20396== Invalid read of size 1\n==20396==    at 0x4C30C04: strcat (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==20396==    by 0x400784: changewords (changeword4.c:23)\n==20396==    by 0x400815: main (changeword4.c:45)\n==20396==  Address 0x5204040 is 0 bytes inside a block of size 1 free'd\n==20396==    at 0x4C2FD5F: realloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==20396==    by 0x400766: changewords (changeword4.c:21)\n==20396==    by 0x400815: main (changeword4.c:45)\n==20396==  Block was alloc'd at\n==20396==    at 0x4C2DB8F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==20396==    by 0x400701: changewords (changeword4.c:11)\n==20396==    by 0x400815: main (changeword4.c:45)\n==20396== \n==20396== Invalid write of size 1\n==20396==    at 0x4C30C30: strcat (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==20396==    by 0x400784: changewords (changeword4.c:23)\n==20396==    by 0x400815: main (changeword4.c:45)\n==20396==  Address 0x5204040 is 0 bytes inside a block of size 1 free'd\n==20396==    at 0x4C2FD5F: realloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==20396==    by 0x400766: changewords (changeword4.c:21)\n==20396==    by 0x400815: main (changeword4.c:45)\n==20396==  Block was alloc'd at\n==20396==    at 0x4C2DB8F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==20396==    by 0x400701: changewords (changeword4.c:11)\n==20396==    by 0x400815: main (changeword4.c:45)\n==20396== \n==20396== Invalid write of size 1\n==20396==    at 0x4C30C3F: strcat (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==20396==    by 0x400784: changewords (changeword4.c:23)\n==20396==    by 0x400815: main (changeword4.c:45)\n==20396==  Address 0x5204049 is 8 bytes after a block of size 1 free'd\n==20396==    at 0x4C2FD5F: realloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==20396==    by 0x400766: changewords (changeword4.c:21)\n==20396==    by 0x400815: main (changeword4.c:45)\n==20396==  Block was alloc'd at\n==20396==    at 0x4C2DB8F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==20396==    by 0x400701: changewords (changeword4.c:11)\n==20396==    by 0x400815: main (changeword4.c:45)\n==20396== \n==20396== Invalid write of size 1\n==20396==    at 0x4007D2: changewords (changeword4.c:30)\n==20396==    by 0x400815: main (changeword4.c:45)\n==20396==  Address 0x5204049 is 8 bytes after a block of size 1 free'd\n==20396==    at 0x4C2FD5F: realloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==20396==    by 0x400766: changewords (changeword4.c:21)\n==20396==    by 0x400815: main (changeword4.c:45)\n==20396==  Block was alloc'd at\n==20396==    at 0x4C2DB8F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==20396==    by 0x400701: changewords (changeword4.c:11)\n==20396==    by 0x400815: main (changeword4.c:45)\n==20396== \n==20396== Invalid write of size 1\n==20396==    at 0x4007F1: changewords (changeword4.c:36)\n==20396==    by 0x400815: main (changeword4.c:45)\n==20396==  Address 0x5204061 is 17 bytes after a block of size 16 in arena \"client\"\n==20396== \n\n==20396== \n==20396== HEAP SUMMARY:\n==20396==     in use at exit: 0 bytes in 0 blocks\n==20396==   total heap usage: 11 allocs, 11 frees, 1,215 bytes allocated\n==20396== \n==20396== All heap blocks were freed -- no leaks are possible\n==20396== \n==20396== For counts of detected and suppressed errors, rerun with: -v\n==20396== ERROR SUMMARY: 43 errors from 6 contexts (suppressed: 0 from 0)\n</code></pre>\n\n<h2>Output:</h2>\n\n<pre><code>ooooooooo loooooooooke ooooooooot\n</code></pre>\n"}, {"tags": ["c++", "c", "visual-studio", "visual-studio-2017", "cross-compiling"], "comments": [{"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 0, "creation_date": 1509520302, "post_id": 47049836, "comment_id": 81046687, "body": "if this is a cmake-project, cmake can generate a visual studio solution for you."}, {"owner": {"reputation": 23, "user_id": 8789450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c04dfeea3a32c7506c19ce1aae05b9ba?s=128&d=identicon&r=PG&f=1", "display_name": "trying2learn", "link": "https://stackoverflow.com/users/8789450/trying2learn"}, "reply_to_user": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 0, "creation_date": 1509528848, "post_id": 47049836, "comment_id": 81050527, "body": "a little guide on how to do that?"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 8789450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c04dfeea3a32c7506c19ce1aae05b9ba?s=128&d=identicon&r=PG&f=1", "display_name": "trying2learn", "link": "https://stackoverflow.com/users/8789450/trying2learn"}, "edited": false, "score": 0, "creation_date": 1509528889, "post_id": 47049903, "comment_id": 81050550, "body": "Greattt (Y). Works."}], "tags": [], "owner": {"reputation": 462, "user_id": 8547128, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh5.googleusercontent.com/-VdtX8-xzgi4/AAAAAAAAAAI/AAAAAAAAADY/Qpj1DlW3s4M/photo.jpg?sz=128", "display_name": "Ali Sepehri-Amin", "link": "https://stackoverflow.com/users/8547128/ali-sepehri-amin"}, "is_accepted": true, "score": 0, "last_activity_date": 1509520343, "creation_date": 1509520343, "answer_id": 47049903, "question_id": 47049836, "link": "https://stackoverflow.com/questions/47049836/how-to-compile-code-from-other-compilers-in-vs-2017/47049903#47049903", "title": "How to compile code from other compilers in VS 2017", "body": "<p>Yes, you should Create a New project -> Visual C++ -> Empty Project. After that, you will see in the solution explorer (Resource files, Header files, and Source files) folders. Right click on Header files and Then Add -> Add existing items, Then you can select multiple header files. Follow for source files same as header files that you Added</p>\n"}], "owner": {"reputation": 23, "user_id": 8789450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c04dfeea3a32c7506c19ce1aae05b9ba?s=128&d=identicon&r=PG&f=1", "display_name": "trying2learn", "link": "https://stackoverflow.com/users/8789450/trying2learn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "closed_date": 1509537634, "accepted_answer_id": 47049903, "answer_count": 1, "score": 0, "last_activity_date": 1509520343, "creation_date": 1509520017, "question_id": 47049836, "link": "https://stackoverflow.com/questions/47049836/how-to-compile-code-from-other-compilers-in-vs-2017", "closed_reason": "Needs more focus", "title": "How to compile code from other compilers in VS 2017", "body": "<p>I have downloaded a source code and can't get my head around to how can I compile it/open it in VS 2017. It should have been straight forward but nothing worked until you create a new project. If I just open a C file in VS, it just show me the file and there's no way to run it. Imagine I wrote a simple Hello World in C and I have its C file. How could I open and run it in VS? The only way I found was to create a new project and copy/paste the code from my C file into the newly generated file by VS. This gets extremely inefficient with large projects having multiple C/h files :/</p>\n"}, {"tags": ["c", "string", "char", "function-pointers", "return-type"], "comments": [{"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 0, "creation_date": 1509520080, "post_id": 47049823, "comment_id": 81046601, "body": "Don&#39;t return pointers to local (stack-allocated) variables."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1509520580, "post_id": 47049823, "comment_id": 81046805, "body": "in <code>snprintf(conversion, length + 1</code> you maybe write out of bounds - the second argument should be the size of the buffer"}, {"owner": {"reputation": 183, "user_id": 7521901, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wbyYjo227po/AAAAAAAAAAI/AAAAAAAAAFI/10r5zP2BUUI/photo.jpg?sz=128", "display_name": "Robert James Mieta", "link": "https://stackoverflow.com/users/7521901/robert-james-mieta"}, "edited": false, "score": 0, "creation_date": 1509555243, "post_id": 47049823, "comment_id": 81067159, "body": "Thanks  :)  just realized there&#39;s no need for &quot;int length&quot; in this, and it should be &quot;snprintf(conversion, sizeof(conversion) . . .&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 3794, "user_id": 7256714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adeb98b0e8995d8576ad5f66c0f982e5?s=128&d=identicon&r=PG&f=1", "display_name": "Pras", "link": "https://stackoverflow.com/users/7256714/pras"}, "is_accepted": false, "score": 0, "last_activity_date": 1509520165, "creation_date": 1509520165, "answer_id": 47049870, "question_id": 47049823, "link": "https://stackoverflow.com/questions/47049823/how-to-return-type-char-from-function-pointer-in-c/47049870#47049870", "title": "How to return type char from function pointer in c", "body": "<pre><code>return(standard_format);\n</code></pre>\n\n<p>Here you have returned pointer that points to local variable when <code>standard_time_format</code> returns its stack will be deallocated and eventually <code>standard_format</code> that you returned will become invalid</p>\n\n<p>You should pass char array to <code>standard_time_format</code>  and copy the string that you want to return in it, instead of returning local variable</p>\n"}, {"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 0, "last_activity_date": 1509520216, "creation_date": 1509520216, "answer_id": 47049881, "question_id": 47049823, "link": "https://stackoverflow.com/questions/47049823/how-to-return-type-char-from-function-pointer-in-c/47049881#47049881", "title": "How to return type char from function pointer in c", "body": "<p>In the <code>standard_time_format</code> function when you do</p>\n\n<pre><code>return(standard_format);\n</code></pre>\n\n<p>you attempt to return a pointer to the first element in the array <code>standard_format</code> (remember that arrays <em>decays</em> to pointers to its first element, i.e. <code>&amp;standard_format[0]</code>). Its type is <code>char *</code>.</p>\n\n<p><strong><em>However</em></strong> this is very problematic since <code>standard_format</code> is a <em>local variable</em> inside the function, and it will go out of scope once the <code>return</code> statement have been executed, leaving you with a <em>dangling pointer</em> which you can't dereference (attempting to do so will lead to <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\"><em>undefined behavior</em></a>).</p>\n\n<p>The simple and standard solution is to pass the string to be filled as an <em>argument</em> to the function.</p>\n"}], "owner": {"reputation": 183, "user_id": 7521901, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wbyYjo227po/AAAAAAAAAAI/AAAAAAAAAFI/10r5zP2BUUI/photo.jpg?sz=128", "display_name": "Robert James Mieta", "link": "https://stackoverflow.com/users/7521901/robert-james-mieta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 537, "favorite_count": 0, "closed_date": 1509522334, "accepted_answer_id": 47049881, "answer_count": 2, "score": 0, "last_activity_date": 1509557573, "creation_date": 1509519913, "last_edit_date": 1509557573, "question_id": 47049823, "link": "https://stackoverflow.com/questions/47049823/how-to-return-type-char-from-function-pointer-in-c", "closed_reason": "Duplicate", "title": "How to return type char from function pointer in c", "body": "<p>Wrote the following code that takes the time input from a struct and prints it all together into a string:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nstruct time\n{\n    int hour;                                       \n    int minute;                                     \n    char am_pm [3];                                 \n    char (*standard_time)(struct time *self);\n};\n\nchar standard_time_format(struct time *self)\n{\n    char standard_format[8], conversion[3];\n    int length;\n\n    length = snprintf(NULL, 0, \"%d\", self-&gt;hour);\n    snprintf(conversion, length + 1, \"%d\", self-&gt;hour);\n    strcpy(standard_format, conversion);\n\n    strcat(standard_format, \":\");\n\n    length = snprintf(NULL, 0, \"%d\", self-&gt;minute);\n    snprintf(conversion, length + 1, \"%d\", self-&gt;minute);\n    strcat(standard_format, conversion);\n\n    strcat(standard_format, self-&gt;am_pm);\n\n    return(standard_format);\n}\n\nint  main()\n{\n    struct time start;\n    char standard_format[8];\n\n    start.hour = 2;\n    start.minute = 34;\n    strcpy(start.am_pm, \"am\");\n    start.standard_time = standard_time_format;\n\n    strcpy(standard_format, start.standard_time(&amp;start));\n    printf(\"%s\\n\", standard_format);\n\n    return 0;\n}\n</code></pre>\n\n<p>However, it is unable to print out the result as the return type doesn't seem to be compatible.</p>\n\n<p>Changing types to pointers didn't fix it either:</p>\n\n<p>in the struct:</p>\n\n<pre><code>char *(*standard_time)(struct time *self);\n</code></pre>\n\n<p>the function:</p>\n\n<pre><code>char *standard_time_format(struct time *self)\n</code></pre>\n\n<p>and in both routines creating a pointer to standard_format:</p>\n\n<pre><code>char *str = &amp;standard_format;\n</code></pre>\n\n<p>and returning the pointer in the function:</p>\n\n<pre><code>return(str);\n</code></pre>\n\n<p><strong>So what type exactly is being returned, and how can it be accessed properly to display it in the printf command?</strong></p>\n\n<p><strong>EDIT</strong></p>\n\n<p>As suggested in the answers, I modified the code such that a string was passed as an argument to the function instead, which remedied the issue. The following is the updated code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nstruct time\n{\n    int hour;\n    int minute;\n    char am_pm [3];\n    void (*standard_time)(struct time *self, char standard_format[8]);\n};\n\nvoid standard_time_format(struct time *self, char standard_format[8])\n{\n    char conversion[3];\n\n    snprintf(conversion, sizeof(conversion), \"%d\", self-&gt;hour);\n    strcpy(standard_format, conversion);\n\n    strcat(standard_format, \":\");\n\n    snprintf(conversion, sizeof(conversion), \"%d\", self-&gt;minute);\n    strcat(standard_format, conversion);\n\n    strcat(standard_format, self-&gt;am_pm);\n}\n\nint  main()\n{\n    struct time start;\n    char standard_format[8];\n\n    start.hour = 2;\n    start.minute = 34;\n    strcpy(start.am_pm, \"am\");\n    start.standard_time = standard_time_format;\n\n    start.standard_time(&amp;start, standard_format);\n    printf(\"%s\\n\", standard_format);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "unix", "system-calls"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1509520005, "post_id": 47049820, "comment_id": 81046571, "body": "you could use a wrapper which reads an environment variable instead."}, {"owner": {"reputation": 6731, "user_id": 725163, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Kgxeq.jpg?s=128&g=1", "display_name": "e.dan", "link": "https://stackoverflow.com/users/725163/e-dan"}, "edited": false, "score": 2, "creation_date": 1509520334, "post_id": 47049820, "comment_id": 81046702, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/3830823/hiding-secret-from-command-line-parameter-on-unix\">Hiding secret from command line parameter on Unix</a>"}], "answers": [{"tags": [], "owner": {"reputation": 3725, "user_id": 8471208, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zX6iRd9pmRI/AAAAAAAAAAI/AAAAAAAAAgE/F3-J9H4ZCno/photo.jpg?sz=128", "display_name": "Kevin Boone", "link": "https://stackoverflow.com/users/8471208/kevin-boone"}, "is_accepted": true, "score": 0, "last_activity_date": 1509522985, "creation_date": 1509522985, "answer_id": 47050460, "question_id": 47049820, "link": "https://stackoverflow.com/questions/47049820/how-to-hide-the-system-call-passed-in-the-system-function-from-htop/47050460#47050460", "title": "How to hide the system call passed in the system() function from htop", "body": "<p>In all the Unix-like systems I've used, including many Linux variants, it's possible for a program to overwrite it's command-line arguments \"from inside\". So in C we might use, for example, <code>strcnpy()</code> just to blank the values of <code>argv[1]</code>, <code>argv[2]</code>, etc. Of course, you need to have processed or copied these arguments first, and you need to be careful not to overwrite memory outside the specific limits of each <code>argv</code>.</p>\n\n<p>I don't think anything about Unix guarantees the portability or continued applicability of this approach, but I have been using it for at least twenty years. It conceals the command from casual uses of <code>ps</code>, etc., and also from <code>/proc/NN/cmdline</code>, but it won't stop the shell storing the command line somewhere (e.g., in a shell history file). So it only prevents casual snooping.</p>\n\n<p>A better approach is not to get into the situation in the first place -- have the program take its input from files (which could be encrypted), or environment variables, or use certificates. Or almost anything, in fact, except the command line.</p>\n"}], "owner": {"reputation": 91, "user_id": 6437140, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-h4LDyq8a9V4/AAAAAAAAAAI/AAAAAAAAAfE/63xc7LI-moc/photo.jpg?sz=128", "display_name": "RuMAN S", "link": "https://stackoverflow.com/users/6437140/ruman-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "accepted_answer_id": 47050460, "answer_count": 1, "score": 0, "last_activity_date": 1509522985, "creation_date": 1509519898, "question_id": 47049820, "link": "https://stackoverflow.com/questions/47049820/how-to-hide-the-system-call-passed-in-the-system-function-from-htop", "title": "How to hide the system call passed in the system() function from htop", "body": "<p>Consider this C snippet:\n</p>\n\n<pre><code>snprintf(buf, sizeof(buf), \"&lt;LONG PROCESS WITH PARAMETERS HAVING SENSITIVE INFO&gt;\";\nsystem(buf);\n</code></pre>\n\n<p>Now on compiling and executing this, the \"sensitive\" parameters of the process can be seen on programs like <code>htop</code>\nAnd I don't want that.</p>\n\n<p>I would like to know if there's a way to hide everything passed in <code>system()</code> such that <code>htop</code> will only show the name of the compiled executable (i.e htop just displays <code>a.out</code> all the time)</p>\n"}, {"tags": ["c", "arrays", "switch-statement", "printf", "scanf"], "comments": [{"owner": {"reputation": 9095, "user_id": 8542346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11b206b49cec657d28a5876f8330780e?s=128&d=identicon&r=PG&f=1", "display_name": "H.S.", "link": "https://stackoverflow.com/users/8542346/h-s"}, "edited": false, "score": 0, "creation_date": 1509519806, "post_id": 47049709, "comment_id": 81046495, "body": "Have you tried compiling your program? Looked into the warnings that compiler is throwing? There are several problems in your program, for e.g. - <code>strcmp(answerYN[0],alowwed_answerYN[0])</code>--&gt; <code>strcmp()</code> is not for comparing <code>char</code>. You can directly compare them using operator <code>==</code>."}, {"owner": {"reputation": 7021, "user_id": 4620609, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dR89W.jpg?s=128&g=1", "display_name": "Samuel Robert", "link": "https://stackoverflow.com/users/4620609/samuel-robert"}, "edited": false, "score": 1, "creation_date": 1509520707, "post_id": 47049709, "comment_id": 81046850, "body": "Looks like a binary search"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1509532448, "post_id": 47049709, "comment_id": 81052549, "body": "<code>scanf(&quot;%c&quot;,</code> --&gt; <code>scanf(&quot; %c&quot;,</code>"}, {"owner": {"reputation": 69, "user_id": 8602273, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/4fb92bbcd2f4bfecd2b67d12cf4e9188?s=128&d=identicon&r=PG&f=1", "display_name": "DEN_VER", "link": "https://stackoverflow.com/users/8602273/den-ver"}, "edited": false, "score": 0, "creation_date": 1509621809, "post_id": 47049709, "comment_id": 81096208, "body": "BLUEPIXY thank you, but I understood your comment only today, when I found more detail explanation from other expert. Thanx anyway."}], "answers": [{"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 2, "last_activity_date": 1509519737, "creation_date": 1509519737, "answer_id": 47049777, "question_id": 47049709, "link": "https://stackoverflow.com/questions/47049709/problems-with-array-and-scanf-function-working-together/47049777#47049777", "title": "Problems with array and scanf function working together", "body": "<p>The function <a href=\"http://en.cppreference.com/w/c/string/byte/strcmp\" rel=\"nofollow noreferrer\"><code>strcmp</code></a> expected two pointers as arguments, pointers to the first characters of a <strong><em>null-terminated</strong> byte strings</em>.</p>\n\n<p>With e.g.</p>\n\n<pre><code>strcmp(answerYN[0],alowwed_answerYN[0]);\n</code></pre>\n\n<p>you have <em>two</em> major problems:</p>\n\n<ol>\n<li><p>The array <code>answerYN</code> is (partially) uninitialized, its contents is (also partially) <em>indeterminate</em>. That means <code>answerYN[1]</code> is likely not the string terminator as needed.</p></li>\n<li><p><code>alowwed_answerYN[0]</code> is a single <code>char</code> not a pointer to a string. This should have given you a warning about invalid conversions or similar.</p></li>\n</ol>\n\n<p>If you just want to compare characters, use normal comparison for equality <code>==</code>, as in <code>answerYN[0] == alowwed_answerYN[0]</code>.</p>\n\n<p>Or why not skip <code>alowwed_answerYN</code> completely and plainly use the explicit character literal as in <code>answerYN[0] == 'Y'</code>. That's even clearer than using an array for the <code>'Y'</code> and <code>'N'</code>.</p>\n"}], "owner": {"reputation": 69, "user_id": 8602273, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/4fb92bbcd2f4bfecd2b67d12cf4e9188?s=128&d=identicon&r=PG&f=1", "display_name": "DEN_VER", "link": "https://stackoverflow.com/users/8602273/den-ver"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "accepted_answer_id": 47049777, "answer_count": 1, "score": -1, "last_activity_date": 1556961485, "creation_date": 1509519406, "last_edit_date": 1592644375, "question_id": 47049709, "link": "https://stackoverflow.com/questions/47049709/problems-with-array-and-scanf-function-working-together", "title": "Problems with array and scanf function working together", "body": "<p>I am a beginner. I want to write a program, that will guess a number, which user picked. In general, user pick a number within the given limit, the program will generate a random number within same limit, ask user if it's a right number, Y/N answer, program reads it, then ask if user's number is bigger or smaller, reads the answer and pass this information to 2 additional functions.</p>\n<p>(I didn't finish those yet, but the idea is that it will divide the rest of numbers in 2, ask again, bigger smaller, divide it once again by 2 and so on, till we get the answer.)</p>\n<p>The problem is, that even if I use a simplest array of type char, I cannot get it work. The answer of the computer is if I didn't book enough memory for one of the arrays.</p>\n<p>I'm still 2 chapters away from the arrays theme in my book, I just wanted to write this program. What I use here is what I've learned so far, so if it's possible, don't use any more complex functions and features of C in your answers.</p>\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;time.h&gt;\nint bigger(int number, int limit);\nint lower(int number, int limit);\n\nint main(void) {\n    system(&quot;COLOR B0&quot;);\n    \n    const int Hlimit=100;\n    const int Llimit=0;\n    char alowwed_answer[]={'&gt;','&lt;'};\n    char answer[2];\n    char alowwed_answerYN[]={'Y', 'N'};\n    char answerYN[2];\n    srand((unsigned)time(NULL));\n    int numberTOguess;\n    printf(&quot;\\r\\nEnter your number from %i to %i, &quot;\n            &quot;and I will try to guess!: &quot;,Llimit,Hlimit);\n    \n    while(scanf(&quot;%i&quot;,&amp;numberTOguess) )\n    {\n        int check=rand()%Hlimit;\n        printf(&quot;\\r\\nyour number is - %i Y/N?&quot;,check);\n        scanf(&quot;%c&quot;,&amp;answerYN[0]);\n        printf(&quot;answer is %c\\r\\n&quot;, answerYN);//this line is for checking;\n        int check_answ=strcmp(answerYN[0],alowwed_answerYN[0]);\n        printf(&quot;check answer is %i&quot;,check_answ);//this line is for checking;\n        if(check_answ==0)\n        {\n            printf(&quot;I did it!&quot;);\n            break;\n        }\n        else if(strcmp(answerYN[0],alowwed_answerYN[1])==0)\n        {\n            printf(&quot;\\r\\nyour number is bigger '&gt;' or smaller '&lt;'?: &quot;);\n            scanf(&quot;%c&quot;,&amp;answer);\n            if(strcmp(answer[0],alowwed_answer[0])==0)\n            {\n                bigger(check, Hlimit);\n            }\n            else if(strcmp(answer[0],alowwed_answer[1])==0)\n            {\n                lower(check, Llimit);\n            }\n        }        \n    }\n    printf(&quot;\\r\\nI did it!&quot;);\n    return 0;\n}\n\nint bigger(int number, int limit)\n{\n    printf(&quot;it is bigger!&quot;);//I will finish this part as soon as I will get first part working.\n    return 0;\n    \n}\nint lower(int number, int limit)\n{\n    printf(&quot;it is lower!!!&quot;);//I will finish this part as soon as I will get first part working.\n    return 0;\n    \n}\n</code></pre>\n<h2>Update</h2>\n<p>Thanks, I took your advice and change the statement type to SWITCH. But it still doesn't work properly. Somehow, nested switch doesn't function at all.</p>\n<p>Look at the code:</p>\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;time.h&gt;\nint bigger(int number, int limit);\nint lower(int number, int limit);\n\nint main(void) {\n    system(&quot;COLOR B0&quot;);\n    \n    const int Hlimit=100;\n    const int Llimit=0;\n    \n    char answerBL;\n   \n    char answerYN;\n    srand((unsigned)time(NULL));\n    int numberTOguess;\n    printf(&quot;\\r\\nEnter your number from %i to %i, &quot;\n            &quot;and I will try to guess!: &quot;,Llimit,Hlimit);\n    \n    while(scanf(&quot;%i&quot;,&amp;numberTOguess) )\n    {\n        int check=rand()%Hlimit;\n        printf(&quot;\\r\\nyour number is - %i Y/N?&quot;,check);\n        scanf(&quot;%c&quot;,&amp;answerYN);\n        \n        switch(answerYN)\n        {\n            case 'Y':\n                printf(&quot;I did it!&quot;);\n                break;\n            case 'N':\n                printf(&quot;\\r\\nOk, your number is bigger '&gt;' or smaller '&lt;'?: &quot;);\n                scanf(&quot;%c&quot;,&amp;answerBL);\n                switch(answerBL)\n                {\n                    case '&gt;':\n                         bigger(check, Hlimit);\n                         break;\n                    case'&lt;':\n                        lower(check, Llimit);\n                        break;\n                        \n                }\n            default:\n                printf(&quot;Y or N?&quot;);\n                \n        }\n        \n    }\n    printf(&quot;\\r\\nEND!&quot;);\n    return 0;\n}\n\nint bigger(int number, int limit)\n{\n    printf(&quot;it is bigger!&quot;);\n    return 0;\n    \n}\nint lower(int number, int limit)\n{\n    printf(&quot;it is lower!!!&quot;);\n    return 0;\n    \n}\n</code></pre>\n<h2>Edit</h2>\n<p>Problem is solved, I found the reason and how to fix it. Here it is, from another topic</p>\n<blockquote>\n<p>The basic problem is that scanf() leaves the newline after the number in the buffer, and then reads it with %c on the next pass. Actually, this is a good demonstration of why I don't use scanf(); I use a line reader (fgets(), for example) and sscanf(). It is easier to control.</p>\n<p>You can probably rescue it by using &quot; %c&quot; instead of &quot;%c&quot; for the format string. The blank causes  scanf() to skip white space (including newlines) before reading the character.</p>\n<p>But it will be easier in the long run to give up scanf() and fscanf() and use fgets() or equivalent plus sscanf(). All else apart, error reporting is much easier when you have the whole string to work with, not the driblets left behind by scanf() after it fails.</p>\n<p>You should also, always, check that you get a value converted from scanf(). Input fails \u2014 routinely and horribly. Don't let it wreck your program because you didn't check.</p>\n<p>answered Mar 5 '12 at 7:05<br />\nJonathan Leffler</p>\n</blockquote>\n"}, {"tags": ["c", "gcc", "warnings", "bitmask"], "answers": [{"tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": false, "score": 3, "last_activity_date": 1509519359, "creation_date": 1509519359, "answer_id": 47049699, "question_id": 47049617, "link": "https://stackoverflow.com/questions/47049617/gcc-doesnt-warn-about-0-or-1-with-bit-masking/47049699#47049699", "title": "GCC doesn&#39;t warn about 0 or 1 with bit-masking", "body": "<pre><code> (!mask &amp; 2)\n</code></pre>\n\n<p>here you're mixing bitwise operators with boolean ones. That doesn't matter with <code>0</code> or <code>1</code> since only handling the first bit (boolean operators turn expressions into 0 or 1), but with <code>2</code> the result is different if you put parentheses or not, hence the warning.</p>\n\n<p>(another example here which proves that gcc tries hard not to issue warnings unneccessarily)</p>\n"}, {"tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 2, "last_activity_date": 1509521492, "last_edit_date": 1509521492, "creation_date": 1509519380, "answer_id": 47049704, "question_id": 47049617, "link": "https://stackoverflow.com/questions/47049617/gcc-doesnt-warn-about-0-or-1-with-bit-masking/47049704#47049704", "title": "GCC doesn&#39;t warn about 0 or 1 with bit-masking", "body": "<p>Because your code is valid C code. And the warning is only a <em>suggestion</em>.</p>\n\n<p>BTW <code>!mask</code> (a logical not operation) is a boolean, so can only be 0 or 1. if you want a bitwise-not operation, use <code>~mask</code>. Look at the <a href=\"http://en.cppreference.com/w/c/language/operator_precedence\" rel=\"nofollow noreferrer\">list of operators</a> in C.</p>\n\n<p>As <a href=\"https://stackoverflow.com/a/47049699/841108\">Jean-Fran\u00e7ois Fabre explains</a> having 0 and 1 is licit and common (they are common bitmasks).</p>\n\n<p>GCC is emitting (with <code>gcc -Wall -Wextra</code>) some warnings (using heuristics), but it has to balance between the case of weird but valid code and the case of improbable code. It tries to avoid emitting useless warnings.</p>\n\n<p>You can extend GCC to give additional warnings if you wanted to. Just spend months to code your own <a href=\"https://gcc.gnu.org/onlinedocs/gccint/Plugins.html\" rel=\"nofollow noreferrer\">GCC plugin</a> providing those warnings. </p>\n"}], "owner": {"reputation": 4293, "user_id": 7035151, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ce9aa200c854d26a2cd263f6fc8c24eb?s=128&d=identicon&r=PG&f=1", "display_name": "Jayesh", "link": "https://stackoverflow.com/users/7035151/jayesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 2, "answer_count": 2, "score": 2, "last_activity_date": 1509521492, "creation_date": 1509518983, "last_edit_date": 1509520284, "question_id": 47049617, "link": "https://stackoverflow.com/questions/47049617/gcc-doesnt-warn-about-0-or-1-with-bit-masking", "title": "GCC doesn&#39;t warn about 0 or 1 with bit-masking", "body": "<p>Following program working fine on GCC without any warning.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint func(unsigned int mask)\n{\n    return (!mask &amp; 0) ? 1 : 0;  // No warning for 0 or 1\n                    ^^\n                    0 or 1\n}\n\nint main() {\n        func(1);\n        return 0;\n}\n</code></pre>\n\n<p>In this program If I write <code>0</code> or <code>1</code>. GCC doesn't give any warning.</p>\n\n<p>But, If I write other number like <code>2</code> :</p>\n\n<pre><code> return (!mask &amp; 2) ? 1 : 0; // GCC gives warning\n</code></pre>\n\n<p>Then GCC give following warning.</p>\n\n<pre><code> warning: suggest parentheses around operand of \u2018!\u2019 or change \u2018&amp;\u2019 to \u2018&amp;&amp;\u2019 or \u2018!\u2019 to \u2018~\u2019 [-Wparentheses]\n     return (!mask &amp; 2) ? 1 : 0;\n</code></pre>\n\n<p>GCC warns about other number like <code>2</code>, which is good, but why doesn't it warn about <code>0</code> or <code>1</code>?</p>\n"}, {"tags": ["c", "fgets"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1509518252, "post_id": 47049366, "comment_id": 81045866, "body": "And here are a few ways to <a href=\"https://stackoverflow.com/questions/2693776\">remove the newline from fgets</a>"}], "answers": [{"comments": [{"owner": {"reputation": 105, "user_id": 7926170, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f8b69a640eb3c4cb97210668c543c7ee?s=128&d=identicon&r=PG&f=1", "display_name": "Milk_QD", "link": "https://stackoverflow.com/users/7926170/milk-qd"}, "edited": false, "score": 0, "creation_date": 1509517988, "post_id": 47049391, "comment_id": 81045762, "body": "OMG I feel so stupid now. Haha. Thanks a lot. Guys, your carriage return is scaned with fgets() too"}], "tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": true, "score": 4, "last_activity_date": 1509517783, "creation_date": 1509517783, "answer_id": 47049391, "question_id": 47049366, "link": "https://stackoverflow.com/questions/47049366/please-explain-this-behavior-of-fgets-in-c/47049391#47049391", "title": "Please explain this behavior of fgets() in C", "body": "<p>You got an input of \"Hello\" followed by a newline. You reversed it, to get a newline followed by \"Hello\". Then you printed that out, followed by a newline.</p>\n\n<pre><code>fgets(mesg,BUF_SZ,stdin);\n</code></pre>\n\n<p>Okay, so now we have \"Hello\" followed by a newline.</p>\n\n<pre><code>reverse(mesg);\n</code></pre>\n\n<p>Okay, so now we have a newline followed by \"olleH\".</p>\n\n<pre><code>printf(\"%s\\n\",mesg);\n</code></pre>\n\n<p>And we output that, followed by another newline.</p>\n\n<p>What's the mystery?</p>\n"}, {"tags": [], "owner": {"reputation": 7044, "user_id": 7670262, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3zdDY.jpg?s=128&g=1", "display_name": "Azeem", "link": "https://stackoverflow.com/users/7670262/azeem"}, "is_accepted": false, "score": 2, "last_activity_date": 1509518065, "creation_date": 1509518065, "answer_id": 47049448, "question_id": 47049366, "link": "https://stackoverflow.com/questions/47049366/please-explain-this-behavior-of-fgets-in-c/47049448#47049448", "title": "Please explain this behavior of fgets() in C", "body": "<p>From <a href=\"http://en.cppreference.com/w/cpp/io/c/fgets\" rel=\"nofollow noreferrer\">fgets</a> documentation, it keeps the carriage return <code>\\n</code> in the input:</p>\n\n<blockquote>\n  <p>Reads at most count - 1 characters from the given file stream and stores them in the character array pointed to by str. Reading stops if end-of-file occurs or a newline character is found, in which case <strong>str will contain that newline character</strong>. If no errors occur, writes a null character at the position immediately after the last character written to str.</p>\n</blockquote>\n\n<p>So,</p>\n\n<pre><code>\"Hello\\n\"\n</code></pre>\n\n<p>becomes:</p>\n\n<pre><code>\"\\nelloH\"\n</code></pre>\n\n<p>That's what you are getting!</p>\n"}], "owner": {"reputation": 105, "user_id": 7926170, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f8b69a640eb3c4cb97210668c543c7ee?s=128&d=identicon&r=PG&f=1", "display_name": "Milk_QD", "link": "https://stackoverflow.com/users/7926170/milk-qd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 0, "accepted_answer_id": 47049391, "answer_count": 2, "score": 0, "last_activity_date": 1509520779, "creation_date": 1509517691, "last_edit_date": 1509520779, "question_id": 47049366, "link": "https://stackoverflow.com/questions/47049366/please-explain-this-behavior-of-fgets-in-c", "title": "Please explain this behavior of fgets() in C", "body": "<p>To my understanding, <code>fgets()</code> will scan for input until a carriage return(<code>\\n</code>), but my this code shows otherwise. I do not know where the extra line come from. Can someone explain?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n#define BUF_SZ 256\n\nvoid reverse(char str[]) {\n    /* fill in the function body please */\n    for (int i = 0, j = strlen(str) - 1; i &lt; strlen(str) / 2; i++, j--)\n    {\n        char temp; // perform the swap\n        temp = str[i];\n        str[i] = str[j];\n        str[j] = temp;\n    }\n}\n\nint main() {\n    char mesg[BUF_SZ];\n    printf(\"Enter a message please=&gt; \");\n    fgets(mesg,BUF_SZ,stdin);\n    reverse(mesg);\n    printf(\"%s\\n\",mesg);\n    return 0;\n}\n</code></pre>\n\n<p>This is the output:\n<a href=\"https://i.stack.imgur.com/RJSbG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RJSbG.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c", "malloc", "valgrind"], "comments": [{"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1509518537, "post_id": 47049218, "comment_id": 81046003, "body": "Is <code>thread_read</code> supposed to return a pointer to a string? If not, how is the caller supposed to know how many bytes were returned?"}], "answers": [{"comments": [{"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1509518508, "post_id": 47049442, "comment_id": 81045991, "body": "He doesn&#39;t write after the end of the string. He reads after the end of the data. Allocating an extra space won&#39;t fix it."}, {"owner": {"reputation": 1560, "user_id": 6252134, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/TRCYQ.jpg?s=128&g=1", "display_name": "Paul Lemarchand", "link": "https://stackoverflow.com/users/6252134/paul-lemarchand"}, "edited": false, "score": 0, "creation_date": 1509519622, "post_id": 47049442, "comment_id": 81046420, "body": "I tried to add 1 to the <code>malloc</code> parameter and set <code>buf[fi-&gt;seekwidth] = &#39;\\0&#39;</code> before using <code>pread</code>, but unfortunately it didn&#39;t fix it and I am still getting the same valgrind messages."}], "tags": [], "owner": {"reputation": 26934, "user_id": 8316315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d833a8a46fea39d7bfca1540ea9c07?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Weimer", "link": "https://stackoverflow.com/users/8316315/florian-weimer"}, "is_accepted": false, "score": 2, "last_activity_date": 1509524853, "last_edit_date": 1509524853, "creation_date": 1509518036, "answer_id": 47049442, "question_id": 47049218, "link": "https://stackoverflow.com/questions/47049218/multiple-valgrind-invalid-read-of-size-n-on-working-program/47049442#47049442", "title": "Multiple valgrind &quot;invalid read of size n&quot; on working program", "body": "<p>When the string is constructed in the <code>thread_read</code> function, you do not allocate space for a null terminator and write it after the end of the string.  As a result, the <code>strlen</code> call in <code>concat</code> reads beyond the end of the allocated memory area.</p>\n"}], "owner": {"reputation": 1560, "user_id": 6252134, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/TRCYQ.jpg?s=128&g=1", "display_name": "Paul Lemarchand", "link": "https://stackoverflow.com/users/6252134/paul-lemarchand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 501, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1509524853, "creation_date": 1509516861, "last_edit_date": 1509517868, "question_id": 47049218, "link": "https://stackoverflow.com/questions/47049218/multiple-valgrind-invalid-read-of-size-n-on-working-program", "title": "Multiple valgrind &quot;invalid read of size n&quot; on working program", "body": "<p>Here is the concerned example that retrieves a text from a file with multiple threads (added line numbers to rely on valgrind messages) :</p>\n\n<pre><code>001:     #define _POSIX_C_SOURCE 200809L\n002: \n003:     #include &lt;stdio.h&gt;\n004:     #include &lt;stdlib.h&gt;\n005:     #include &lt;pthread.h&gt;\n006:     #include &lt;stdint.h&gt;\n007:     #include &lt;unistd.h&gt;\n008:     #include &lt;string.h&gt;\n009: \n010:     typedef struct Ft {\n011:         FILE *fp;\n012:         int seekpoint;\n013:         int seekwidth;\n014:     } Ft;\n015: \n016:     off_t get_file_length(FILE *file) {\n017:         fpos_t position; // fpos_t may be a struct and store multibyte info\n018:         off_t length; // off_t is integral type, perhaps long long\n019: \n020:         fgetpos(file, &amp;position); // save previous position in file\n021: \n022:         fseeko(file, 0, SEEK_END); // seek to end\n023:         length = ftello(file); // determine offset of end\n024: \n025:         fsetpos(file, &amp;position); // restore position\n026: \n027:         return length;\n028:     }\n029: \n030:     Ft *get_ft(FILE *fp, int seekpoint, int seekwidth) {\n031:        Ft *ft = malloc(sizeof(Ft));\n032:        if(!ft) return NULL;\n033: \n034:        ft-&gt;fp = fp;\n035:        ft-&gt;seekpoint = seekpoint;\n036:        ft-&gt;seekwidth = seekwidth;\n037:        return ft;\n038:     }\n039: \n040:     void *thread_read(void *arg) {\n041:        Ft* fi = (Ft*)arg;\n042:        unsigned char *buf = malloc(fi-&gt;seekwidth * sizeof(char));\n043: \n044:        if (pread(fileno(fi-&gt;fp), buf, fi-&gt;seekwidth, fi-&gt;seekpoint) == -1) {\n045:           fprintf(stderr, \"error seeking and/or reading at: %d\\n\", fi-&gt;seekpoint);\n046:           exit(EXIT_FAILURE);\n047:        }\n048: \n049:        return buf;\n050:     }\n051: \n052:     char* concat(const char *s1, const char *s2)\n053:     {\n054:         const size_t len1 = strlen(s1);\n055:         const size_t len2 = strlen(s2);\n056:         char *result = malloc(len1+len2+1);//+1 for the null-terminator\n057:         //in real code you would check for errors in malloc here\n058:         memcpy(result, s1, len1);\n059:         memcpy(result+len1, s2, len2+1);//+1 to copy the null-terminator\n060:         return result;\n061:     }\n062: \n063:     int main() {\n064:          // load text file and image\n065:        char *file_name = \"file.txt\";\n066:        int thread_count = 5;\n067: \n068:        FILE *f = fopen(file_name, \"r\");\n069:        if(f == NULL) {\n070:          fprintf(stderr, \"file %s does not exist\\n\", file_name);\n071:          return EXIT_FAILURE;\n072:        }\n073:        int text_size = get_file_length(f);\n074: \n075:        // Number of characters each thread should read.\n076:        int seekwidth = (text_size / thread_count), seekpoint;\n077: \n078:        pthread_t threads[thread_count];\n079:        for (int i = 0; i &lt; thread_count; i++) {\n080:             seekpoint = seekwidth * i;\n081:             if(i == thread_count - 1)// last thread might have more work\n082:               seekwidth += (text_size % thread_count);\n083: \n084:             if (pthread_create(&amp;threads[i], NULL, thread_read, get_ft(f, seekpoint, seekwidth)) != 0) {\n085:               fprintf(stderr, \"pthread_create failed!\\n\");\n086:               return EXIT_FAILURE;\n087:             }\n088:        }\n089: \n090:        void *retrieve;\n091:        char *text = \"\";\n092: \n093:        for(int i = 0; i &lt; thread_count; i++) {\n094:           if(pthread_join(threads[i], &amp;retrieve) != 0) {\n095:               fprintf(stderr, \"pthread_join failed!\\n\");\n096:               return EXIT_FAILURE;\n097:           }\n098:           text = concat(text, retrieve);\n099:        }\n100: \n101:        printf(\"%s\\n\", text);\n102: \n103:        fclose(f);\n104:        free(text);\n105:        return EXIT_SUCCESS;\n106:     }\n</code></pre>\n\n<p>The program works fine, however valgrind is showing me these errors :</p>\n\n<blockquote>\n<pre><code>==23883== Invalid read of size 1\n==23883==    at 0x4C30F74: strlen (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==23883==    by 0x400D35: concat (test.c:55)\n==23883==    by 0x400F97: main (test.c:98)\n==23883==  Address 0x5422b15 is 0 bytes after a block of size 5 alloc'd\n==23883==    at 0x4C2DB8F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==23883==    by 0x400C91: thread_read (test.c:42)\n==23883==    by 0x4E416B9: start_thread (pthread_create.c:333)\n==23883==\n==23883== Invalid read of size 2\n==23883==    at 0x4C3272E: memcpy@@GLIBC_2.14 (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==23883==    by 0x400D8D: concat (test.c:59)\n==23883==    by 0x400F97: main (test.c:98)\n==23883==  Address 0x5422b14 is 4 bytes inside a block of size 5 alloc'd\n==23883==    at 0x4C2DB8F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==23883==    by 0x400C91: thread_read (test.c:42)\n==23883==    by 0x4E416B9: start_thread (pthread_create.c:333)\n==23883==\n==23883== Invalid read of size 1\n==23883==    at 0x4C32758: memcpy@@GLIBC_2.14 (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==23883==    by 0x400D8D: concat (test.c:59)\n==23883==    by 0x400F97: main (test.c:98)\n==23883==  Address 0x5422b65 is 0 bytes after a block of size 5 alloc'd\n==23883==    at 0x4C2DB8F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==23883==    by 0x400C91: thread_read (test.c:42)\n==23883==    by 0x4E416B9: start_thread (pthread_create.c:333)\n</code></pre>\n</blockquote>\n\n<p>I'm really disappointed, I have no idea of why that would appear.</p>\n"}, {"tags": ["c", "arrays", "pointers", "dynamic-allocation"], "comments": [{"owner": {"reputation": 3310, "user_id": 1853605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ab8d886abc51e874c1ed067b912ddd?s=128&d=identicon&r=PG", "display_name": "Potato", "link": "https://stackoverflow.com/users/1853605/potato"}, "edited": false, "score": 0, "creation_date": 1509514480, "post_id": 47048714, "comment_id": 81044589, "body": "what if you put your code in a function returning int * and return a from there ?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1509515479, "post_id": 47048714, "comment_id": 81044914, "body": "I suggest starting with a simpler function first, make a function <code>foo</code> that lets you modify an <code>int</code> that was defined in <code>main</code>"}], "answers": [{"tags": [], "owner": {"reputation": 3310, "user_id": 1853605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ab8d886abc51e874c1ed067b912ddd?s=128&d=identicon&r=PG", "display_name": "Potato", "link": "https://stackoverflow.com/users/1853605/potato"}, "is_accepted": false, "score": 1, "last_activity_date": 1509514385, "creation_date": 1509514385, "answer_id": 47048783, "question_id": 47048714, "link": "https://stackoverflow.com/questions/47048714/function-that-reads-an-array-until-0-is-entered/47048783#47048783", "title": "Function that reads an array until 0 is entered", "body": "<p>how about putting everything inside a function and returning a;</p>\n\n<pre><code>int *read()\n{\n    int *a;\n    int i = 0;\n\n    a = malloc(sizeof(int));\n    if( !a ) return NULL;\n\n    do\n    {\n        scanf(\"%d\", &amp;a[i]);\n        a = realloc(a, (i + 2) * sizeof(int)); // enough space for storing another number\n        if( !a ) return NULL;\n    i++;\n\n    } while (a[i-1] != 0);\n\n    return a;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1509515506, "post_id": 47048968, "comment_id": 81044921, "body": "That\u2019s true, adding that. Thanks @M.M"}], "tags": [], "owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "is_accepted": false, "score": 1, "last_activity_date": 1509515626, "last_edit_date": 1509515626, "creation_date": 1509515363, "answer_id": 47048968, "question_id": 47048714, "link": "https://stackoverflow.com/questions/47048714/function-that-reads-an-array-until-0-is-entered/47048968#47048968", "title": "Function that reads an array until 0 is entered", "body": "<p>Assuming you are calling this in the usual way:</p>\n\n<pre><code>void read(int **a, int *cnt)\n{\na = malloc(sizeof(int)); // This overwrites local a disconnecting it from the main a\n*a = malloc(sizeof(int)); // so this will only change the memory pointed by local a and leak memory\n...\n}\n\nint main()\n{\n  int *a;\n  int cnt = 0;\n  read(&amp;a, &amp;cnt);\n  ...\n}\n</code></pre>\n\n<p>What is happening you\u2019re giving the address to the pointer <code>a</code> to the function and then in the function you\u2019re immediately overwriting it with the memory allocation. Matter this the <code>a</code> in the function and <code>a</code> in the main are <em>completely separate entities</em>. If you then allocate memory for <code>*a</code> you\u2019re only storing that in the <em>local</em> <code>a</code> and the main <code>a</code> will remain pointing to whatever it happened to be. So it is uninitialized and causes undefined behavior. </p>\n\n<p>So remove the line <code>a = malloc(sizeof(int))</code> and your code will properly affect the main <code>a</code> also.</p>\n\n<p>You also have to use <code>*a</code> for everything in <code>read</code>, including <code>scanf</code> and <code>while</code>. So it might be better to make the function handle allocation and return a pointer as was suggested in another answer. </p>\n\n<p>Also note you should check <code>realloc</code> for return values so you won\u2019t leak memory or crash there and you should use <code>sizeof(int*)</code> when allocating a pointer, no matter if size of <code>int</code> and <code>int*</code> were the same. It looks clearer. </p>\n"}, {"tags": [], "owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "is_accepted": false, "score": 0, "last_activity_date": 1509517351, "creation_date": 1509517351, "answer_id": 47049304, "question_id": 47048714, "link": "https://stackoverflow.com/questions/47048714/function-that-reads-an-array-until-0-is-entered/47049304#47049304", "title": "Function that reads an array until 0 is entered", "body": "<p>You can pattern your function along the POSIX <a href=\"http://man7.org/linux/man-pages/man3/getline.3.html\" rel=\"nofollow noreferrer\"><code>getline()</code></a> function.</p>\n\n<p>The pattern is very simple. Your function receives a reference to the pointer (i.e., a pointer to a pointer) used for the data, resized dynamically; and a pointer to the size allocated to that pointer. It will return the number of elements read to the array.</p>\n\n<p>If you were reading <code>double</code>s rather than <code>int</code>s, and wished to read all doubles from the input until end-of-input (either end of file, if redirected from a file, or until the user types a non-number and presses <kbd>Enter</kbd>, or until the user presses <kbd>Ctrl</kbd>+<kbd>D</kbd> at the beginning of the line), the code would look something like this:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;errno.h&gt;\n\nsize_t read_doubles(double **dataptr, size_t *sizeptr, FILE *in)\n{\n    double *data;      /* A local copy of the pointer */\n    size_t  used = 0;  /* Number of doubles in data */\n    size_t  size;      /* Number of doubles allocated for data */\n\n    /* Sanity checks against NULL pointers. */\n    if (!dataptr || !sizeptr || !in) {\n        errno = EINVAL; /* \"Invalid parameter\" */\n        return 0;\n    }\n\n    /* If *dataptr is NULL, or *sizeptr is zero,\n       there is no memory allocated yet. */\n    if (*dataptr != NULL &amp;&amp; *sizeptr &gt; 0) {\n        data = *dataptr;\n        size = *sizeptr;\n    } else {\n        data = NULL;\n        size = 0;\n        *dataptr = NULL;\n        *sizeptr = 0;\n    }\n\n    while (1) {\n\n        /* Ensure there is room in the data. */\n        if (used &gt;= size) {\n            /* Need to allocate more.\n               Note: we have a copy of (data) in (*dataptr),\n               and of (size) in (*sizeptr). */\n\n            /* Reallocation policy. This one is simple,\n               reallocating in fixed-size chunks, but\n               better ones are well known: you probably\n               wish to ensure the size is at least some\n               sensible minimum (maybe a thousand or so),\n               then double the size up to a few million,\n               then increase the size in fixed-size chunks\n               of a few million, in a real-world application. */\n            size = used + 500;\n\n            /* Note: malloc(size) and realloc(NULL, size)\n               are equivalent; no need to check for NULL. */\n            data = realloc(data, size * sizeof data[0]);\n            if (!data) {\n                /* Reallocation failed, but the old data\n                   pointer in (*dataptr) is still valid,\n                   it isn't lost. Return an error. */\n                errno = ENOMEM;\n                return 0;\n            }\n\n            /* Reallocation succeeded; update the originals,\n               that are visible to the caller. */\n            *dataptr = data;\n            *sizeptr = size;\n        }\n\n        /* Read one more element, if possible.\n           Note: \"&amp;(data[used])\" and \"data+used\"\n           are completely equivalent expressions.\n        */\n        if (fscanf(input, \" %lf\", data + used) != 1)\n            break; /* No more input, or not a number. */\n\n        /* Yes, read a new data element. */\n        used++;\n    }\n\n    /* If we encountered a true read error,\n       return an error. */\n    if (ferror(input)) {\n        errno = EIO;\n        return 0;\n    }\n\n    /* Not an error; there just weren't more\n       data, or the data was not a number.\n    */\n\n    /* Normally, programs do not set errno\n       except in case of an error. However,\n       here, used==0 just means there was no\n       data, it does not indicate an error per se.\n       For simplicity, because we know no error\n       has occurred, we just set errno=0 here,\n       rather than check if used==0 and only then\n       set errno to zero.\n       This also means it is safe to examine errno\n       after a call to this function, no matter what\n       the return value is. errno will be zero if no\n       errors have occurred, and nonzero in error cases.\n    */\n\n    errno = 0;\n    return used;\n}\n</code></pre>\n\n<p>The <code>&lt;errno.h&gt;</code> was included for the library to expose <code>errno</code>, and <code>&lt;string.h&gt;</code> for <code>strerror()</code>. These are both standard C.</p>\n\n<p>However, the <a href=\"http://man7.org/linux/man-pages/man3/errno.3.html\" rel=\"nofollow noreferrer\">error constants</a> I used above, <code>EINVAL</code>, <code>ENOMEM</code>, and <code>EIO</code>, are only defined by POSIXy systems, and might not exist in all systems. That is okay; you can just pick any smallish nonzero values and use them instead, because the function always sets <code>errno</code>. In that case, however, you need to check each of them and print the appropriate error message for each. In my case, all the systems I use define those three error codes for me, and I can just use <code>strerror(errno)</code> to convert the code to a standard error message (<code>Invalid argument</code>, <code>Not enough space</code>, and <code>Input/output error</code>, respectively, in non-localized programs).</p>\n\n<p>Using a function defined like above, is very simple:</p>\n\n<pre><code>int main(void)\n{\n    double *data = NULL; /* NULL for \"Not allocated yet\" */\n    size_t  size = 0;    /* 0 for \"Not allocated yet\" */\n    size_t  used;\n\n    size_t  i; /* Just a loop variable. */\n\n    used = read_doubles(&amp;data, &amp;size, stdin);\n    if (!used) {\n        /* No data read. Was it an actual error, or just no data? */\n        if (errno)\n            fprintf(stderr, \"Error reading standard input: %s.\\n\", strerror(errno));\n        else\n            fprintf(stderr, \"No numbers in standard input!\\n\");\n        return EXIT_FAILURE;\n    }\n\n    printf(\"Read %zu numbers from standard input.\\n\", used);\n    printf(\"(The dynamically allocated array has room for %zu.)\\n\", size);\n\n    for (i = 0; i &lt; used; i++)\n        printf(\"    %f\\n\", data[i]);\n\n    /* Array no longer needed, so we can free it.\n       Explicitly NULLing and zeroing them means\n       we can safely reuse them later, if we were\n       to extend this program. So, it's not necessary\n       to clear them this way, but it is a good practice\n       considering it makes long-term maintenance easier. */\n    free(data);\n    data = NULL;\n    size = 0;\n    used = 0;\n\n    /* This version of the program has nothing more to do. */\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>Essentially, you just set the pointer you supply the address of to <code>NULL</code>, and the size you supply the address of also to <code>0</code>, before the call to indicate no array has been dynamically allocated yet.  There is no need to <code>malloc()</code> an initial array; <code>realloc(NULL, size)</code> is completely safe, and does exactly what <code>malloc(size)</code> does. Indeed, I often write code that has no <code>malloc()</code> anywhere in it, and use only <code>realloc()</code>.</p>\n\n<p>Note that the above code snippets are untested, so there might be typos in them. (And I did choose to use <code>double</code>s instead of <code>int</code>s and a different end-of-input condition, to ensure you don't just copy-paste the code and use as-is, without reading and understanding it first.) If you find or suspect you found any, let me know in a comment, and I'll check.</p>\n\n<p>Also note that the above code snippets are long only because I tried to write descriptive comments -- literally most of the \"code\" in them is comments.  Writing descriptive comments -- those that describe the <em>intent</em> of the code, and not just what the code actually does; the latter is easy to read from the code itself, but the former is what you or others later reading the code <em>need</em> to know, to check if the code is sound or buggy --, is very hard, and even after over two decades, I'm still trying to get better at it.</p>\n\n<p>If you like writing code, I do warmly recommend you start practicing writing good, intent-describing comments right away, rather than battle with it for decades like I have.  It is surprising how much good comments, and occasionally a good nights sleep to review the code with fresh pair of eyes, helps.</p>\n"}], "owner": {"reputation": 111, "user_id": 6548566, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/fa6503f6e9ac05f5615d348618eadf97?s=128&d=identicon&r=PG&f=1", "display_name": "Liviu", "link": "https://stackoverflow.com/users/6548566/liviu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1037, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1509517351, "creation_date": 1509513816, "question_id": 47048714, "link": "https://stackoverflow.com/questions/47048714/function-that-reads-an-array-until-0-is-entered", "title": "Function that reads an array until 0 is entered", "body": "<p>I want to make a program that dynamically allocates memory for each element of an array while it is entered from stdin and stored into an array. The reading should stop when 0 is entered. If I try to make it directly in main(), in looks like this:</p>\n\n<pre><code>int *a;\nint i = 0;\n\na = malloc(sizeof(int));\n\ndo\n{\n    scanf(\"%d\", &amp;a[i]);\n    a = realloc(a, (i + 2) * sizeof(int)); // enough space for storing another number\n    i++;\n\n} while (a[i-1] != 0);\n</code></pre>\n\n<p>But I don't know how to make a function that does this. This is what I've tried, but it crashes everytime.</p>\n\n<pre><code>void read(int **a, int *cnt)\n{\na = malloc(sizeof(int));\n*a = malloc(sizeof(int));\n*cnt = 0;\n\ndo\n{\n    scanf(\"%d\", a[*cnt]);\n    *a = realloc(*a, (*cnt + 2) * sizeof(int)); // enough space for storing another number\n    (*cnt)++;\n\n} while (a[*cnt-1] != 0);\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["c", "memory-leaks"], "comments": [{"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1509513065, "post_id": 47048492, "comment_id": 81044186, "body": "What\u2019s <code>MAX_LENGTH</code>?"}, {"owner": {"reputation": 227, "user_id": 5776129, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6e871bcff9cb401eaf6272e04bdfd67e?s=128&d=identicon&r=PG&f=1", "display_name": "Zach", "link": "https://stackoverflow.com/users/5776129/zach"}, "reply_to_user": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1509513106, "post_id": 47048492, "comment_id": 81044207, "body": "@Ryan It&#39;s 1025"}, {"owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "edited": false, "score": 0, "creation_date": 1509513537, "post_id": 47048492, "comment_id": 81044312, "body": "The fact that people are asking you fundamental details necessary to get the code working on their system indicates that you&#39;ve not provided an <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a>, and it&#39;s possible that the error lies elsewhere. There are four words in MCVE: 1/ minimal 2/ complete 3/ verifiable 4/ example; your code must meet all four criteria, and at the moment it&#39;s not <i>verifiable</i> because the code you&#39;ve given us doesn&#39;t produce <i>memory errors</i>; it produces <i>compiler errors</i> due to being <i>incomplete</i>."}, {"owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "edited": false, "score": 0, "creation_date": 1509513921, "post_id": 47048492, "comment_id": 81044420, "body": "In spite of being <i>incomplete</i>, your code includes logic which I&#39;d suggest can&#39;t possibly be related to your <i>memory errors</i>, so your code isn&#39;t minimal, complete or verifiable; it&#39;s just an example, and one we can&#39;t do anything with, except perhaps suggest that you read <a href=\"https://linux.die.net/man/3/execvp\" rel=\"nofollow noreferrer\">the first sentence of this here <code>execvp</code> manual</a> because that&#39;s a common problem which you might have missed in a quest to <i>guess as much as possible and read as little as possible</i>."}, {"owner": {"reputation": 227, "user_id": 5776129, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6e871bcff9cb401eaf6272e04bdfd67e?s=128&d=identicon&r=PG&f=1", "display_name": "Zach", "link": "https://stackoverflow.com/users/5776129/zach"}, "reply_to_user": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "edited": false, "score": 0, "creation_date": 1509517778, "post_id": 47048492, "comment_id": 81045685, "body": "@Sebivor Thanks, but I actually did research execvp. However, this was on the man pages. I&#39;m sorry if I appeared to guess as much as possible but I believe I did do my research. As I mentioned above, my code was only failing in rare cases."}, {"owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "edited": false, "score": 0, "creation_date": 1509521685, "post_id": 47048492, "comment_id": 81047265, "body": "All good, Zach. Don&#39;t take it personally, I&#39;m not attacking people but behaviours when I write rants like this. These rants are getting longer because it&#39;s an ongoing issue, that people don&#39;t read <i>something or other</i> and hence end up writing questions about code which doesn&#39;t compile while claiming it does compile (and outputs something)... but I guess it is to be expected so I probably should just roll with it. I wonder if StackOverflow needs to evolve towards encouraging people to just generally <i>read more than they write</i>. Having said that, it&#39;s not in SOs best interests to do that, so..."}], "answers": [{"tags": [], "owner": {"reputation": 22505, "user_id": 1411457, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XqssD.png?s=128&g=1", "display_name": "harmic", "link": "https://stackoverflow.com/users/1411457/harmic"}, "is_accepted": true, "score": 1, "last_activity_date": 1509515333, "last_edit_date": 1509515333, "creation_date": 1509515149, "answer_id": 47048924, "question_id": 47048492, "link": "https://stackoverflow.com/questions/47048492/execvp-memory-error/47048924#47048924", "title": "Execvp Memory Error", "body": "<p>In function <code>parseLine</code> you copy the arguments into a local variable which you then pass to <code>strtok</code>:</p>\n\n<pre><code>   char copyLine[MAX_LENGTH];\n   ...\n   strcpy(copyLine, commandLine);\n\n   token = strtok(copyLine, DELIM);\n</code></pre>\n\n<p>You then store the resulting pointers in <code>args</code>, which you then use to initialize your structures.</p>\n\n<p>Note that <code>strtok</code> returns pointers to the beginning of each token within the supplied buffer, so within the local variable <code>copyLine</code>. Local variables can only be referenced inside the function where they are declared, if you later refer to those pointers after returning from the function, the result is undefined.</p>\n\n<p>You are making a copy inside <code>makeSequence</code>, but you are copying the array of pointers, not the strings that the pointers are pointing to!</p>\n\n<p>To avoid this, either allocate <code>copyLine</code> on the heap (and free it later) or pass it in from outside.</p>\n"}], "owner": {"reputation": 227, "user_id": 5776129, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6e871bcff9cb401eaf6272e04bdfd67e?s=128&d=identicon&r=PG&f=1", "display_name": "Zach", "link": "https://stackoverflow.com/users/5776129/zach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "accepted_answer_id": 47048924, "answer_count": 1, "score": 0, "last_activity_date": 1509849348, "creation_date": 1509512293, "last_edit_date": 1509849348, "question_id": 47048492, "link": "https://stackoverflow.com/questions/47048492/execvp-memory-error", "title": "Execvp Memory Error", "body": "<p>So I have a c program that is takes in an input of commands but occasionally I seem to be getting some sort of memory error.</p>\n\n<p>How I read input:</p>\n\n<pre><code>static void parseLine(char* commandLine, Sequence* sequences, int* seqSize) {\n   char copyLine[MAX_LENGTH];\n   char* token;\n\n   strcpy(copyLine, commandLine);\n\n   token = strtok(copyLine, DELIM);\n\n   while (token != NULL) { /* updates args here */\n\n\n   }\n}\n</code></pre>\n\n<p>I print out my Sequence arguments before calling the function above and all seems to be good. Using Valgrind I get the following (in execute):</p>\n\n<pre><code>Invalid read of size 1\n</code></pre>\n\n<p>The command I am calling is </p>\n\n<pre><code>cat aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa/test\n</code></pre>\n\n<p>However when my program fails it prints out:</p>\n\n<pre><code>cat: aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaD: No such file or directory\n</code></pre>\n\n<p>This seems to be becoming overwritten. Can someone explain why?</p>\n"}, {"tags": ["c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1509512288, "post_id": 47048481, "comment_id": 81043988, "body": "<code>scanf(&quot;%d&quot;,ptr+sizeof(int)*i);</code> =&gt; <code>scanf(&quot;%d&quot;, ptr + i);</code> <code>sum=sum+*(ptr+sizeof(int)*k);</code> =&gt; <code>sum = sum + *(ptr + i);</code>, <code>a</code> is not an array you shoud declare <code>a</code> after your first <code>scanf()</code>, <code>int a[n];</code>"}, {"owner": {"reputation": 409, "user_id": 5106317, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1Zfye.jpg?s=128&g=1", "display_name": "Ozgur Murat", "link": "https://stackoverflow.com/users/5106317/ozgur-murat"}, "edited": false, "score": 0, "creation_date": 1509512513, "post_id": 47048481, "comment_id": 81044036, "body": "You didn&#39;t allocate for ptr. You just make it point to an integer. Therefore, in the loop, it will point to incorrect location after the first iteration."}, {"owner": {"reputation": 35, "user_id": 8713458, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QvKg_5lAV2Y/AAAAAAAAAAI/AAAAAAAAEuY/mSXZSl5nTKo/photo.jpg?sz=128", "display_name": "varun bheemaiah", "link": "https://stackoverflow.com/users/8713458/varun-bheemaiah"}, "edited": false, "score": 0, "creation_date": 1509512799, "post_id": 47048481, "comment_id": 81044110, "body": "Stargateur That was the first thing I tried. But if I do that, it doesn&#39;t accept all the input. If I enter 5 as the number of elements, It only takes 2 inputs"}, {"owner": {"reputation": 4912, "user_id": 1953533, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Vs4v8.jpg?s=128&g=1", "display_name": "CroCo", "link": "https://stackoverflow.com/users/1953533/croco"}, "edited": false, "score": 0, "creation_date": 1509512813, "post_id": 47048481, "comment_id": 81044114, "body": "Take advantage of variable length array (VLA) (i.e. C99 feature) and notice that <code>a[i] same *(a+i)</code>."}, {"owner": {"reputation": 35, "user_id": 8713458, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QvKg_5lAV2Y/AAAAAAAAAAI/AAAAAAAAEuY/mSXZSl5nTKo/photo.jpg?sz=128", "display_name": "varun bheemaiah", "link": "https://stackoverflow.com/users/8713458/varun-bheemaiah"}, "edited": false, "score": 0, "creation_date": 1509512926, "post_id": 47048481, "comment_id": 81044139, "body": "CroCo I believe that method requires me to declare and array in the start as int a[10], but that can&#39;t be done as [ and ] are forbidden characters"}, {"owner": {"reputation": 35, "user_id": 8713458, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QvKg_5lAV2Y/AAAAAAAAAAI/AAAAAAAAEuY/mSXZSl5nTKo/photo.jpg?sz=128", "display_name": "varun bheemaiah", "link": "https://stackoverflow.com/users/8713458/varun-bheemaiah"}, "edited": false, "score": 0, "creation_date": 1509513002, "post_id": 47048481, "comment_id": 81044162, "body": "Ozgur can you perhaps show me how it should be done? Because I&#39;m not allowed to include anything either and malloc.h is required for memory allocation"}, {"owner": {"reputation": 35, "user_id": 8713458, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QvKg_5lAV2Y/AAAAAAAAAAI/AAAAAAAAEuY/mSXZSl5nTKo/photo.jpg?sz=128", "display_name": "varun bheemaiah", "link": "https://stackoverflow.com/users/8713458/varun-bheemaiah"}, "edited": false, "score": 0, "creation_date": 1509513737, "post_id": 47048481, "comment_id": 81044363, "body": "@Statgateur I&#39;m not allowed to use square brakcets. So doing <code>int a[n]</code> isn&#39;t possible"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1509525513, "post_id": 47048481, "comment_id": 81048845, "body": "This question, with it&#39;s unrealistic constraints, is not useful to future SO users/visitors."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 3, "creation_date": 1509525631, "post_id": 47048481, "comment_id": 81048895, "body": "I&#39;m voting to close this question as off-topic because unrealistic design constraints are not useful to future SO users/visitors."}], "answers": [{"tags": [], "owner": {"reputation": 11092, "user_id": 8794221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81e2de0a8497383ad1889e87d91adc91?s=128&d=identicon&r=PG&f=1", "display_name": "Allan", "link": "https://stackoverflow.com/users/8794221/allan"}, "is_accepted": false, "score": 2, "last_activity_date": 1509512413, "creation_date": 1509512413, "answer_id": 47048514, "question_id": 47048481, "link": "https://stackoverflow.com/questions/47048481/find-sum-of-elements-in-an-array-without-using-or/47048514#47048514", "title": "Find sum of elements in an array without using [ or ]", "body": "<p>You should change your loop like this:</p>\n\n<pre><code>for(i=0;i&lt;n;i++) \n{ \n    sum=sum+*ptr; \n    ptr++;\n} \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 131, "user_id": 3319236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9eb35dd940cbac0b4b50b7fe9539f944?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin Kenny", "link": "https://stackoverflow.com/users/3319236/kevin-kenny"}, "is_accepted": false, "score": 3, "last_activity_date": 1509512476, "creation_date": 1509512476, "answer_id": 47048524, "question_id": 47048481, "link": "https://stackoverflow.com/questions/47048481/find-sum-of-elements-in-an-array-without-using-or/47048524#47048524", "title": "Find sum of elements in an array without using [ or ]", "body": "<p>The pointer-array duality in C is that</p>\n\n<pre><code>*(p+i) == p[i]\n</code></pre>\n\n<p>No multiplication by <code>sizeof</code> needed in this notation!</p>\n"}, {"comments": [{"owner": {"reputation": 35, "user_id": 8713458, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QvKg_5lAV2Y/AAAAAAAAAAI/AAAAAAAAEuY/mSXZSl5nTKo/photo.jpg?sz=128", "display_name": "varun bheemaiah", "link": "https://stackoverflow.com/users/8713458/varun-bheemaiah"}, "edited": false, "score": 0, "creation_date": 1509514125, "post_id": 47048549, "comment_id": 81044486, "body": "Thanks Man. I completely forgot to do that"}], "tags": [], "owner": {"reputation": 6951, "user_id": 3475381, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b6a1c5d19f4ae8c6a1dbf097487c96d7?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Sehgal", "link": "https://stackoverflow.com/users/3475381/gaurav-sehgal"}, "is_accepted": true, "score": 3, "last_activity_date": 1509512655, "creation_date": 1509512655, "answer_id": 47048549, "question_id": 47048481, "link": "https://stackoverflow.com/questions/47048481/find-sum-of-elements-in-an-array-without-using-or/47048549#47048549", "title": "Find sum of elements in an array without using [ or ]", "body": "<p>First you never allocate memory for storing array elements.So </p>\n\n<pre><code>int *ptr;//this will be the array\n//input n\nptr = malloc(sizeof(int)*n);\n</code></pre>\n\n<p>Now accessing <code>i</code>th element of <code>ptr</code> is <code>ptr[i]</code> which gets resolved to <code>*(ptr+i)</code>, so you can replace <code>ptr[i]</code> with <code>*(ptr+i)</code></p>\n\n<pre><code>for(i=0;i&lt;n;i++) \n{ \n    scanf(\"%d\",&amp;(*(ptr+i)));  //&amp;ptr[i]\n} \n</code></pre>\n\n<p>and </p>\n\n<pre><code>for(i=0;i&lt;n;i++) \n{ \nsum=sum+ *(ptr+i); //ptr[i]\n} \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 207, "user_id": 3184532, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/62c15703e6ac95a451a0dcbf1817d34a?s=128&d=identicon&r=PG&f=1", "display_name": "quickdraw", "link": "https://stackoverflow.com/users/3184532/quickdraw"}, "is_accepted": false, "score": 1, "last_activity_date": 1509514315, "creation_date": 1509514315, "answer_id": 47048774, "question_id": 47048481, "link": "https://stackoverflow.com/questions/47048481/find-sum-of-elements-in-an-array-without-using-or/47048774#47048774", "title": "Find sum of elements in an array without using [ or ]", "body": "<p>There are a few issues in this code,\n(1) You have not allocated memory for the number of elements you want \n(2) You have allocated memory only for the first element and you have a pointer pointing to that and is incremented. This will cause undefined behaviour\n(3) You dont have to say the distance the pointer has to move(ie ptr+ptr+sizeof(int)*i) since it knows it needs to move a distance of sizeof(int) since its an integer pointer</p>\n\n<p>This code inside main should work(sorry I had to write it in C++, please convert the necessary as required),</p>\n\n<pre><code>int sum, n; \nprintf(\"Enter the number of elements in an array\\n\");\ncin&gt;&gt; n;\nint *ptr = (int*)malloc(n*sizeof(int)); \nprintf(\"Enter the array elements\\n\");\nfor (int i = 0; i &lt; n; i++)\n{\n    cin &gt;&gt; *ptr++;      \n}\nptr--;  //since it would have incremented the last time\nsum = 0;\nfor (int i = 0; i&lt;n; i++)\n{\n    sum += *ptr--;      \n}\nprintf(\"The sum of the elements in the array is %d\", sum);  \nreturn 0;\n</code></pre>\n\n<p>Thanks!</p>\n"}], "owner": {"reputation": 35, "user_id": 8713458, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QvKg_5lAV2Y/AAAAAAAAAAI/AAAAAAAAEuY/mSXZSl5nTKo/photo.jpg?sz=128", "display_name": "varun bheemaiah", "link": "https://stackoverflow.com/users/8713458/varun-bheemaiah"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 294, "favorite_count": 0, "closed_date": 1509540636, "accepted_answer_id": 47048549, "answer_count": 4, "score": -4, "last_activity_date": 1509514315, "creation_date": 1509512206, "question_id": 47048481, "link": "https://stackoverflow.com/questions/47048481/find-sum-of-elements-in-an-array-without-using-or", "closed_reason": "Not suitable for this site", "title": "Find sum of elements in an array without using [ or ]", "body": "<p>I need to find the sum of all the elements in an array but nowhere am I allowed to use square brackets([ or ]). I seem to have the logic figured out but can't get it to work. Please tell me where I've gone wrong.\nThis is the program I wrote</p>\n\n<pre><code>#include&lt;stdio.h&gt; \nint main() \n{ \n    int i,a,n,sum; \n    int *ptr; \n    ptr=&amp;a; \n    printf(\"Enter the number of elements in an array\\n\"); \n    scanf(\"%d\",&amp;n); \n    printf(\"Enter the array elements\\n\"); \n    for(i=0;i&lt;n;i++) \n    { \n        scanf(\"%d\",ptr+sizeof(int)*i); \n    } \n    sum=0; \n    for(i=0;i&lt;n;i++) \n    { \n    sum=sum+*(ptr+sizeof(int)*k); \n    } \n    printf(\"The sum of the elements in the array is %d\",sum); \n    return 0; \n} \n</code></pre>\n"}, {"tags": ["c", "winapi"], "comments": [{"owner": {"reputation": 5417, "user_id": 7607970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3K8Ke.png?s=128&g=1", "display_name": "Psi", "link": "https://stackoverflow.com/users/7607970/psi"}, "edited": false, "score": 0, "creation_date": 1509510879, "post_id": 47048234, "comment_id": 81043633, "body": "What is the value before the bit shift?"}, {"owner": {"reputation": 743, "user_id": 2355322, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/2wRIw.jpg?s=128&g=1", "display_name": "Sergio Calderon", "link": "https://stackoverflow.com/users/2355322/sergio-calderon"}, "reply_to_user": {"reputation": 5417, "user_id": 7607970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3K8Ke.png?s=128&g=1", "display_name": "Psi", "link": "https://stackoverflow.com/users/7607970/psi"}, "edited": false, "score": 0, "creation_date": 1509510977, "post_id": 47048234, "comment_id": 81043666, "body": "A bitmask returned by <code>GetLogicalDrives</code> function. I am receiving, according to the debugger: <code>263020</code>"}, {"owner": {"reputation": 5417, "user_id": 7607970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3K8Ke.png?s=128&g=1", "display_name": "Psi", "link": "https://stackoverflow.com/users/7607970/psi"}, "edited": false, "score": 0, "creation_date": 1509511043, "post_id": 47048234, "comment_id": 81043689, "body": "Did you read <a href=\"https://social.msdn.microsoft.com/Forums/en-US/b0822157-3602-4f5f-9e64-13d2bbc8a95d/environmentgetlogicaldrives-not-returning-network-drives-in-windows-10-os?forum=windowscompatibility\" rel=\"nofollow noreferrer\">social.msdn.microsoft.com/Forums/en-US/&hellip;</a> yet?"}, {"owner": {"reputation": 743, "user_id": 2355322, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/2wRIw.jpg?s=128&g=1", "display_name": "Sergio Calderon", "link": "https://stackoverflow.com/users/2355322/sergio-calderon"}, "reply_to_user": {"reputation": 5417, "user_id": 7607970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3K8Ke.png?s=128&g=1", "display_name": "Psi", "link": "https://stackoverflow.com/users/7607970/psi"}, "edited": false, "score": 0, "creation_date": 1509511189, "post_id": 47048234, "comment_id": 81043727, "body": "I didn&#39;t, but I would like to know if, in fact, there is any related issue with this function in Windows 10."}, {"owner": {"reputation": 5417, "user_id": 7607970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3K8Ke.png?s=128&g=1", "display_name": "Psi", "link": "https://stackoverflow.com/users/7607970/psi"}, "edited": false, "score": 0, "creation_date": 1509511249, "post_id": 47048234, "comment_id": 81043741, "body": "Suggestion: Just read and test the workaround explained there"}, {"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 2, "creation_date": 1509514635, "post_id": 47048234, "comment_id": 81044620, "body": "It&#39;s not clear why you consider it an error if the result of the shift is zero. 263020 = 0x4036c, which corresponds to drives C, D, F, G, I J, and S. (Check my math.)"}, {"owner": {"reputation": 743, "user_id": 2355322, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/2wRIw.jpg?s=128&g=1", "display_name": "Sergio Calderon", "link": "https://stackoverflow.com/users/2355322/sergio-calderon"}, "reply_to_user": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 0, "creation_date": 1509514963, "post_id": 47048234, "comment_id": 81044739, "body": "@RaymondChen, but it should get all the drives, shouldn\u2019t it? If not, how do I check for not mounted drives?"}, {"owner": {"reputation": 743, "user_id": 2355322, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/2wRIw.jpg?s=128&g=1", "display_name": "Sergio Calderon", "link": "https://stackoverflow.com/users/2355322/sergio-calderon"}, "edited": false, "score": 0, "creation_date": 1509515267, "post_id": 47048234, "comment_id": 81044845, "body": "No. The X drive is not mounted. <code>GetLogicalDrives</code> gets all volumes and I can use <code>&amp; 1</code> to test if it is mounted. That is what I understand from the doc on MSDN. No idea if I\u2019m wrong."}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 2, "creation_date": 1509517552, "post_id": 47048234, "comment_id": 81045602, "body": "<code>GetLogicalDrives</code> returns the drive mapping for the current process, which is referenced from the access token&#39;s logon session. In a kernel debugger you can inspect the logon session&#39;s device map, plus the one from its referenced <code>GlobalDosDevicesDirectory</code>. The overall <code>DriveMap</code> is the bitwise OR of the two maps. Note that a logical drive isn&#39;t necessarily a volume, and volumes may be available without a drive (e.g. GUID names and NTFS mount points). Use <code>FindFirstVolume</code> to list the GUID names of mounted volumes. Then <code>GetVolumePathNamesForVolumeName</code> to list the mount points of a volume."}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 1, "creation_date": 1509525609, "post_id": 47048234, "comment_id": 81048885, "body": "This question makes no sense. If the drive isn&#39;t mounted, its corresponding bit in the bitmask will be 0."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 2, "creation_date": 1509528758, "post_id": 47048234, "comment_id": 81050466, "body": "And, as always, you are calling <code>GetLastError</code> at the wrong time. It returns a (potentially) meaningless value, and you have destroyed all evidence that would have allowed you to determine, whether it is."}, {"owner": {"reputation": 743, "user_id": 2355322, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/2wRIw.jpg?s=128&g=1", "display_name": "Sergio Calderon", "link": "https://stackoverflow.com/users/2355322/sergio-calderon"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1509530673, "post_id": 47048234, "comment_id": 81051520, "body": "@IInspectable, @Johathan Potter, I have updated the question to add clarity. As you can see, if I set <code>17</code>, which means <code>R</code>, it will test and, if it is not mounted, will print the message in the second <code>else</code>. It does not work the same way from <code>19</code> to <code>25</code>, why?"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 1, "creation_date": 1509531232, "post_id": 47048234, "comment_id": 81051819, "body": "It works exactly the same for <b>all</b> drive letters. If you get different results for some, then that has to do with <i>your</i> environment. Which we have no access to. This question isn&#39;t answerable."}, {"owner": {"reputation": 743, "user_id": 2355322, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/2wRIw.jpg?s=128&g=1", "display_name": "Sergio Calderon", "link": "https://stackoverflow.com/users/2355322/sergio-calderon"}, "edited": false, "score": 0, "creation_date": 1509531393, "post_id": 47048234, "comment_id": 81051925, "body": "I have Windows 10, version 1709, and that\u2019s the only code I have. Can you try it?"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 1, "creation_date": 1509531815, "post_id": 47048234, "comment_id": 81052176, "body": "No, we cannot try to run code on your machine. I can&#39;t believe I had to write this."}, {"owner": {"reputation": 743, "user_id": 2355322, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/2wRIw.jpg?s=128&g=1", "display_name": "Sergio Calderon", "link": "https://stackoverflow.com/users/2355322/sergio-calderon"}, "edited": false, "score": 0, "creation_date": 1509531978, "post_id": 47048234, "comment_id": 81052272, "body": "I was not talking about trying on my machine, but on yours. I mean, I would like to know if you can try the code to see if the problem is my environment, as you said. I\u2019m just trying to fin some help to understand that behavior. If you believe I have something wrong with my code, please let me know."}, {"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 2, "creation_date": 1509532003, "post_id": 47048234, "comment_id": 81052292, "body": "Remove the <code>if (drives ==0) { error }</code>. As I noted earlier, that test makes no sense. It causes your code to report a false error. That is why it doesn&#39;t work for 19 and higher. You have no drives mounted above S, so the result of the shift is zero, to say &quot;no drives above S&quot;."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1509532409, "post_id": 47048234, "comment_id": 81052525, "body": "The code prints a meaningless error message on my machine (<code>Error: 0</code>). I&#39;m not sure why you believe this would help you."}, {"owner": {"reputation": 743, "user_id": 2355322, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/2wRIw.jpg?s=128&g=1", "display_name": "Sergio Calderon", "link": "https://stackoverflow.com/users/2355322/sergio-calderon"}, "reply_to_user": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 0, "creation_date": 1509532601, "post_id": 47048234, "comment_id": 81052643, "body": "Thanks for answering again, @RaymondChen. Should I check for <code>==0</code> before shifting to test fail function result or that is not needed? And, may you post that answer so I can mark it?"}, {"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 1, "creation_date": 1509532953, "post_id": 47048234, "comment_id": 81052838, "body": "Go ahead and post your own answer and accept it. I don&#39;t need the imaginary points. If you want to test the result of the call against zero, do so before shifting (because if you do it after shifting, then you aren&#39;t testing the result of the call). But it&#39;s not clear what your program can do to recover. You may as well act as if drive X doesn&#39;t exist, which is the behavior you get if you remove the test against zero."}, {"owner": {"reputation": 743, "user_id": 2355322, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/2wRIw.jpg?s=128&g=1", "display_name": "Sergio Calderon", "link": "https://stackoverflow.com/users/2355322/sergio-calderon"}, "reply_to_user": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 0, "creation_date": 1509533187, "post_id": 47048234, "comment_id": 81052997, "body": "Thank you so much for your explanation, @RaymondChen, really appreciate it."}], "answers": [{"comments": [{"owner": {"reputation": 743, "user_id": 2355322, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/2wRIw.jpg?s=128&g=1", "display_name": "Sergio Calderon", "link": "https://stackoverflow.com/users/2355322/sergio-calderon"}, "edited": false, "score": 0, "creation_date": 1509554803, "post_id": 47059676, "comment_id": 81066913, "body": "Thank you very much, @Remy Lebeau. Little question if you don&#39;t mind: would <code>GetLastError()</code> report the correct error code or just <code>0</code>?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 743, "user_id": 2355322, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/2wRIw.jpg?s=128&g=1", "display_name": "Sergio Calderon", "link": "https://stackoverflow.com/users/2355322/sergio-calderon"}, "edited": false, "score": 1, "creation_date": 1509555203, "post_id": 47059676, "comment_id": 81067139, "body": "@SergioCalderon that is answered in the documentation. If the result of the function is 0, <code>GetLastError()</code> will return a valid error code (until another Win32 function is called that resets it)"}, {"owner": {"reputation": 743, "user_id": 2355322, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/2wRIw.jpg?s=128&g=1", "display_name": "Sergio Calderon", "link": "https://stackoverflow.com/users/2355322/sergio-calderon"}, "edited": false, "score": 0, "creation_date": 1509555250, "post_id": 47059676, "comment_id": 81067163, "body": "Thanks again for answering."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 1, "last_activity_date": 1509555081, "last_edit_date": 1509555081, "creation_date": 1509554598, "answer_id": 47059676, "question_id": 47048234, "link": "https://stackoverflow.com/questions/47048234/getlogicaldrives-and-bit-position-23/47059676#47059676", "title": "GetLogicalDrives and bit position 23", "body": "<p>Per the documentation:</p>\n\n<blockquote>\n  <p><strong>If the function succeeds, the return value is a bitmask representing the currently available disk drives</strong>. Bit position 0 (the least-significant bit) is drive A, bit position 1 is drive B, bit position 2 is drive C, and so on.</p>\n  \n  <p><strong>If the function fails, the return value is zero</strong>. To get extended error information, call\u00a0<code>GetLastError</code>.</p>\n</blockquote>\n\n<p>If the function succeeds and the bitmask does not contain any bits for drives after X, the result of the shift will be 0, causing your code to report a false error.  You need to check for 0 <em>immediately</em> after <code>GetLogicalDrives()</code> returns, before you shift: </p>\n\n<pre><code>DWORD drives = GetLogicalDrives();\nif (drives == 0)\n{\n    wprintf(L\"Error: %lu\\n\", GetLastError());\n}\nelse\n{\n    drives &gt;&gt;= 23;\n    if (drives &amp; 1)\n        wprintf(L\"Drive is mounted\\n\");\n    else\n        wprintf(L\"Drive is not mounted\\n\");\n}\n</code></pre>\n\n<p>That being said, you don't need to shift the bitmask itself at all:</p>\n\n<pre><code>DWORD drives = GetLogicalDrives();\nif (drives == 0)\n{\n    wprintf(L\"Error: %lu\\n\", GetLastError());\n}\nelse\n{\n    //if (drives &amp; 0x800000)\n    if (drives &amp; (1&lt;&lt;23))\n        wprintf(L\"Drive is mounted\\n\");\n    else\n        wprintf(L\"Drive is not mounted\\n\");\n}\n</code></pre>\n"}], "owner": {"reputation": 743, "user_id": 2355322, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/2wRIw.jpg?s=128&g=1", "display_name": "Sergio Calderon", "link": "https://stackoverflow.com/users/2355322/sergio-calderon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 0, "accepted_answer_id": 47059676, "answer_count": 1, "score": -1, "last_activity_date": 1509555081, "creation_date": 1509510405, "last_edit_date": 1509530423, "question_id": 47048234, "link": "https://stackoverflow.com/questions/47048234/getlogicaldrives-and-bit-position-23", "title": "GetLogicalDrives and bit position 23", "body": "<p>As far as I understand, if I would like to check for <strong>X:\\</strong> drive, It would be bit 23 if using <code>GetLogicalDrives</code> function; so, I am trying to test that, but it turns to <code>0</code> if I set the bitmask to <code>&gt;&gt;=23</code>. </p>\n\n<p>This is my code:</p>\n\n<pre><code>DWORD drives;\n\ndrives = GetLogicalDrives();\n\ndrives &gt;&gt;= 23;\n\nif (drives == 0)\n{\n    wprintf(L\"Error: %lu\\n\", GetLastError());\n}\nelse if (drives &amp; 1)\n{\n    wprintf(L\"Drive is mounted\\n\");\n\n}       \nelse\n{\n    wprintf(L\"Drive is not mounted\\n\");\n}\n</code></pre>\n\n<p><strong>EDIT:</strong>\nNow, if I set <code>drives</code>, for example, to <code>17</code>, which, I believe, would refers to letter <code>R</code>, It will be tested in the first <code>else</code> and, if it is not mounted, will go to the second; so It will show <code>Drive is not mounted</code>. Same if I set <code>drives&gt;&gt;=1</code>, which refers to B, I think. </p>\n\n<p>It will get <code>0</code> only from <code>19</code> (letter <code>T</code>) to <code>25</code> (letter <code>Z</code>), if they are not mounted. </p>\n\n<p>What am I doing wrong?</p>\n\n<p>Thanks in advanced.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 1992, "user_id": 3924496, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YPKhm.jpg?s=128&g=1", "display_name": "roelofs", "link": "https://stackoverflow.com/users/3924496/roelofs"}, "edited": false, "score": 0, "creation_date": 1509508746, "post_id": 47047846, "comment_id": 81043159, "body": "What exactly is your question/problem?  We can help with specific questions, but we can&#39;t write entire solutions..."}, {"owner": {"reputation": 3310, "user_id": 1853605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ab8d886abc51e874c1ed067b912ddd?s=128&d=identicon&r=PG", "display_name": "Potato", "link": "https://stackoverflow.com/users/1853605/potato"}, "edited": false, "score": 0, "creation_date": 1509509239, "post_id": 47047846, "comment_id": 81043275, "body": "IMHO you should break your code into smaller functions first to make it more readable it&#39;ll help coder, reviewer ,maintainer and everyone trying to answer this question"}], "answers": [{"tags": [], "owner": {"reputation": 679, "user_id": 7314871, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K3EKh.jpg?s=128&g=1", "display_name": "Srikanth Chekuri", "link": "https://stackoverflow.com/users/7314871/srikanth-chekuri"}, "is_accepted": false, "score": 0, "last_activity_date": 1509508801, "creation_date": 1509508801, "answer_id": 47048021, "question_id": 47047846, "link": "https://stackoverflow.com/questions/47047846/i-want-to-get-back-to-the-options-after-inputting-something-to-the-file-with-cho/47048021#47048021", "title": "I want to get back to the options after inputting something to the file with choice 1", "body": "<p>Remove the <code>menu = 0;</code> in case one and two it works fine.</p>\n"}], "owner": {"reputation": 1, "user_id": 8865910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2332151a7ed09994be409d5c4f7813f0?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Lewis", "link": "https://stackoverflow.com/users/8865910/ben-lewis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1509508855, "creation_date": 1509507407, "last_edit_date": 1509508855, "question_id": 47047846, "link": "https://stackoverflow.com/questions/47047846/i-want-to-get-back-to-the-options-after-inputting-something-to-the-file-with-cho", "title": "I want to get back to the options after inputting something to the file with choice 1", "body": "<p>I need to be able to go to choice 1, add a record to the file, and then return to the menu to do another option. I also need to be able to do this for choice 2.</p>\n\n<blockquote>\n  <p>Code snippet</p>\n</blockquote>\n\n<pre><code>while(program == 1){\n            while(menu == 1){\n                    num = 0;\n                    printf(\"(1)Add record, (2)View records, or (3)Quit.\\n\");\n                    scanf(\"%d\", &amp;choice);\n\n\n                    if(choice == 1){\n                            menu =0;\n                            inv = fopen(\"recs\", \"w\");\n                                            printf(\"&lt;Item Number&gt; &lt;Item Category&gt; &lt;cost&gt; &lt;city&gt; &lt;date&gt;\\n\");\n                                            fscanf(inv, \"%d %c %c %c %c %c %c %c %c %c %c %.2f %c %c %c %c %c %c$\n                                            &amp;cost, &amp;city[0], &amp;city[1], &amp;city[2], &amp;city[3], &amp;city[4], &amp;city[5], &amp;$\n                            fclose(inv);\n                            if(num &gt;= 1){\n                                    menu =1;\n                                    continue;\n                            }\n                    }\n\n                    else if(choice == 2){\n                            menu =0;\n                            int c;\n                            inv = fopen(\"recs\", \"r\");\n                            if(inv){\n                                    while((c = getc(inv)) != EOF)\n                                            putchar(c);\n                                    fclose(inv);\n                            }\n                    }\n\n                    else if(choice == 3){\n                            printf(\"Iventory program terminated\\n\");\n                            menu = 0;\n                            program =0;\n                            break;\n                    }\n\n                    else;\n            }\n    }\n     return(0);\n}\n</code></pre>\n"}, {"tags": ["c"], "answers": [{"tags": [], "owner": {"reputation": 1336, "user_id": 3331750, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MlZX7.jpg?s=128&g=1", "display_name": "Justlike", "link": "https://stackoverflow.com/users/3331750/justlike"}, "is_accepted": true, "score": -1, "last_activity_date": 1509509349, "creation_date": 1509509349, "answer_id": 47048078, "question_id": 47047796, "link": "https://stackoverflow.com/questions/47047796/while-loop-not-executing-in-c/47048078#47048078", "title": "While Loop not Executing in C", "body": "<p>^_^</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n    int num_lines;\n\n    do{\n        printf(\"Enter the number of lines to print\\nMust be greater than or equal to 7 :  \");\n        scanf(\"%d\", &amp;num_lines);\n    }while(num_lines &lt; 7);\n\n\n    char symbol;\n    printf(\"Choose a symbol/character to be displayed */&amp;/+/0/x :  \");\n    scanf(\" %c\", &amp;symbol);\n\n    int num_symbols;\n    printf(\"Enter the number of symbols to print per line :  \");\n    scanf(\"%d\", &amp;num_symbols);\n\n    if (num_symbols &lt; 7 || num_symbols &gt; 27) {\n        num_symbols = 19;\n    }\n\n    for (int i = 1; i &lt;= num_lines; ++i) {\n\n        if (i % 2 == 0) {\n            for (int m = 0; m &lt; i / 2; ++m) {\n                printf(\"\\t\");\n            }\n        }\n\n        for (int j = 0; j &lt; num_symbols; ++j) {\n            printf(\"%c\", symbol);\n        }\n        printf(\"\\n\");\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 366, "user_id": 8542211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f05066391d07ae07bdca05842b5d8dd?s=128&d=identicon&r=PG&f=1", "display_name": "Amit Singh", "link": "https://stackoverflow.com/users/8542211/amit-singh"}, "is_accepted": false, "score": 0, "last_activity_date": 1509511373, "last_edit_date": 1509511373, "creation_date": 1509510116, "answer_id": 47048193, "question_id": 47047796, "link": "https://stackoverflow.com/questions/47047796/while-loop-not-executing-in-c/47048193#47048193", "title": "While Loop not Executing in C", "body": "<p>You can try this to print your desired pattern :</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint main(void) {\n    int num_lines,i,j;\n    printf(\"Enter a number of lines, greater than or equal to 7, to print :  \");\n    scanf(\"%d\", &amp;num_lines);\n\n    while ( num_lines &lt; 7 ) {\n        printf(\"Enter the number of lines to print\\nMust be greater than or equal to 7 :  \");\n        scanf(\"%d\", &amp;num_lines);\n    }\n\n    char symbol ;\n    printf(\"Choose a symbol/character to be displayed */&amp;/+/0/x :  \");\n    scanf(\" %c\", &amp;symbol);\n\n    int num_symbols;\n    printf(\"Enter the number of symbols to print per line :  \");\n    scanf(\"%d\", &amp;num_symbols);\n\n    if (num_symbols &lt; 7 || num_symbols &gt; 27) {\n        num_symbols = 19;\n    }\n    i = 1;\n    while (i &lt;= num_lines) {\n        if(i%2 == 0){\n            j = i/2;\n            while(j != 0){\n                printf(\"\\t\");\n                j--;\n            }\n        }\n        j = 0;\n        while(j &lt; num_symbols){\n            printf(\"%c\",symbol);\n            j++;\n       }\n        printf(\"\\n\");\n        i++;\n    }\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/b4AL7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/b4AL7.png\" alt=\"Here is the output:\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 307, "user_id": 8466102, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb1029f3c7739fbf285c09dbb40ea491?s=128&d=identicon&r=PG&f=1", "display_name": "Cjdcoy", "link": "https://stackoverflow.com/users/8466102/cjdcoy"}, "is_accepted": false, "score": 0, "last_activity_date": 1509511352, "last_edit_date": 1509511352, "creation_date": 1509510449, "answer_id": 47048242, "question_id": 47047796, "link": "https://stackoverflow.com/questions/47047796/while-loop-not-executing-in-c/47048242#47048242", "title": "While Loop not Executing in C", "body": "<p>In your loop there are problems in the way you declare your variables and put your conditions.<br>\nTry to think step by step:<br>\n1. Am I on on a pair or impair line?<br>\n2. If yes I put \\t<br>\n3. Print x times my number<br>\n4. Do the same until you've done enough lines<br></p>\n\n<pre><code>if (num_symbols &lt; 7 || num_symbols &gt; 27) {\n    }\n    int which_line = 1;\n    while (num_lines &gt; 0) {\n        if (which_line % 2 == 0) { //STEP 1\n         for (int tmp_line = which_line - 1; tmp_line &gt;= 1 ; tmp_line--) { //STEP2\n         printf(\"\\t\");\n            }\n        }\n        for (int tmp_symbols = num_symbols; tmp_symbols &gt;= 1 ; tmp_symbols--) { //STEP 3\n           printf(\"%c\", symbol); \n        }\n        printf(\"\\n\");\n        which_line++; //STEP 4\n        --num_lines;\n    }\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 8864379, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mDtDO.jpg?s=128&g=1", "display_name": "Alex Helvaty", "link": "https://stackoverflow.com/users/8864379/alex-helvaty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 47048078, "answer_count": 3, "score": 0, "last_activity_date": 1509511373, "creation_date": 1509507069, "last_edit_date": 1509507165, "question_id": 47047796, "link": "https://stackoverflow.com/questions/47047796/while-loop-not-executing-in-c", "title": "While Loop not Executing in C", "body": "<p>I am unable to get this program to print out the lines of symbols with a tab. I included a picture of how it should be printing. Currently it's working except that there is no indentation. Any help at all would be greatly appreciated.</p>\n\n<p>The idea is to display even numbered lines with indents (\u2018\\t\u2019) and the odd ones without indent:</p>\n\n<p>Example of correct output</p>\n\n<p><img src=\"https://i.stack.imgur.com/cKeqr.png\" alt=\"\"></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n    int num_lines;\n    printf(\"Enter a number of lines, greater than or equal to 7, to print :  \");\n    scanf(\"%d\", &amp;num_lines);\n\n    if (num_lines &lt; 7) {\n        while ( num_lines &lt; 7 ) {\n            printf(\"Enter the number of lines to print\\nMust be greater than or equal to 7 :  \");\n            scanf(\"%d\", &amp;num_lines);\n        }\n    }\n\n    char symbol;\n    printf(\"Choose a symbol/character to be displayed */&amp;/+/0/x :  \");\n    scanf(\" %c\", &amp;symbol);\n\n    int num_symbols;\n    printf(\"Enter the number of symbols to print per line :  \");\n    scanf(\"%d\", &amp;num_symbols);\n\n    if (num_symbols &lt; 7 || num_symbols &gt; 27) {\n        num_symbols = 19;\n    }\n\n    while (num_lines &gt; 0) {\n        int n = num_symbols;\n        int nl = 1;\n        int nll = nl / 2;\n\n        while (nl &lt;= num_lines) {\n            if ( (nl % 2) == 0) {\n                while (nll &gt; 0) {\n                    printf(\"\\t\");\n                    --nll;\n                }\n                while (n &gt; 0) {\n                    printf(\"%c\", symbol);\n                    --n;\n                }\n            }\n            else {\n                while (n &gt; 0) {\n                    printf(\"%c\", symbol);\n                    --n;\n                }\n            }\n            ++nl;\n        }\n        printf(\"\\n\");\n        --num_lines;\n    }\n    return;\n}\n</code></pre>\n"}, {"tags": ["c"], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 4613372, "user_type": "registered", "profile_image": "https://graph.facebook.com/778649778849084/picture?type=large", "display_name": "Kartik Setia", "link": "https://stackoverflow.com/users/4613372/kartik-setia"}, "is_accepted": false, "score": 0, "last_activity_date": 1509507017, "creation_date": 1509507017, "answer_id": 47047793, "question_id": 47047696, "link": "https://stackoverflow.com/questions/47047696/how-to-split-string-in-equal-size-part-and-copy-it-to-temporary-string-array-for/47047793#47047793", "title": "How to split string in equal size part and copy it to temporary string array for further processing in c language?", "body": "<pre><code>int main()\n{\n  char *text = \"HELLOGOODMORNING\"; /* string length 16, array size 17 */\n\n  /* size of these has to accomodate the terminating null */\n  char one[8];\n  char two[8];\n\n\n  /* copy 8 characters, starting at index 0 */\n  strncpy(two, &amp;text[0], 8);\n\n\n\n  /* we can do strcpy if we're at the end of the string.  It will stop when it hits '\\0' */\n  strcpy(one, &amp;text[7]);\n\n  /* note that we still have to null-terminate the strings when we use strncpy */\n  two[2] = '\\0';\n\n\n  /* but we don't have to null-terminate when we use strcpy */\n  /* so we can comment this out: one[5] = '\\0'; */\n\n  printf(\"%s\\n\", one);\n  printf(\"%s\\n\", two);\n\n\n  return 0; /* returns 0, since no errors occurred */\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 679, "user_id": 7314871, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K3EKh.jpg?s=128&g=1", "display_name": "Srikanth Chekuri", "link": "https://stackoverflow.com/users/7314871/srikanth-chekuri"}, "is_accepted": true, "score": 0, "last_activity_date": 1509509596, "last_edit_date": 1509509596, "creation_date": 1509507465, "answer_id": 47047850, "question_id": 47047696, "link": "https://stackoverflow.com/questions/47047696/how-to-split-string-in-equal-size-part-and-copy-it-to-temporary-string-array-for/47047850#47047850", "title": "How to split string in equal size part and copy it to temporary string array for further processing in c language?", "body": "<p>Here you go!</p>\n\n<p><code>strncpy(caETF,caText,8);</code> modify this as <code>strncpy(caETF,caText+i,8);</code> this will work for any case.</p>\n\n<p>String declaration should be like <code>char *Text = \"HELLOGOODMORNING\";</code> not <code>char caText = \"HELLOGOODMORNING\";</code></p>\n"}, {"tags": [], "owner": {"reputation": 307, "user_id": 8466102, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb1029f3c7739fbf285c09dbb40ea491?s=128&d=identicon&r=PG&f=1", "display_name": "Cjdcoy", "link": "https://stackoverflow.com/users/8466102/cjdcoy"}, "is_accepted": false, "score": 0, "last_activity_date": 1509508324, "creation_date": 1509508324, "answer_id": 47047959, "question_id": 47047696, "link": "https://stackoverflow.com/questions/47047696/how-to-split-string-in-equal-size-part-and-copy-it-to-temporary-string-array-for/47047959#47047959", "title": "How to split string in equal size part and copy it to temporary string array for further processing in c language?", "body": "<p>the thing your doing actually cannot work because the variable caText you declared is not even a string but a char.<br>\nI based the bellow code on the fact that you're just interested in cutting in half the string but you can actually modify the if by any other value<br></p>\n\n<pre><code> #include &lt;string.h&gt;\n\n    void main()\n    {\n     char caETF[8 + 1]; // +1 for '\\0'\n     char caText[]=\"HELLOGOODMORNING\";// here you forget the [] \n     int i,j,len;\n     i = 0;\n     j = 1; //initialize j = 1 because i devide len by j and you cant divide by 0\n     len = strlen(caText) + 1; //add 1 because j = 1\n     for (j ; j &lt; len ; j++)\n      {\n          if (len / j &gt;= 2){  //if middle of string then copy in tmp string\n          caETF[i] = caText[j];\n          i++;\n          }\n       }\n      caETF[i] = '\\0'; //add '\\0' so the computer understand that the string is terminated\n      passtofun(caETF);  //now you can do whatever you want with that string\n    }\n</code></pre>\n\n<p><code>caETF[i] = caText[j];</code> allows you to copy a character from a position <code>j</code> to a position <code>i</code> in the new array. (eg:<code>caETF[0] = caText[9]</code>).</p>\n"}], "owner": {"reputation": 19, "user_id": 7760096, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-WB5pkpKQHNs/AAAAAAAAAAI/AAAAAAAAACE/09bb-gO80iY/photo.jpg?sz=128", "display_name": "Earth Patel", "link": "https://stackoverflow.com/users/7760096/earth-patel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 47047850, "answer_count": 3, "score": -2, "last_activity_date": 1509509596, "creation_date": 1509506209, "question_id": 47047696, "link": "https://stackoverflow.com/questions/47047696/how-to-split-string-in-equal-size-part-and-copy-it-to-temporary-string-array-for", "title": "How to split string in equal size part and copy it to temporary string array for further processing in c language?", "body": "<p>Enter String=\"HELLOGOODMORNING\"\nsplitsize=8\nI want to split it in 8-8 size and store it in tempstring[8] and to independently processing on it,and then the same on the another 8 char ,these till string does not end.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\nvoid passtofun(char string[8])\n{\n//logic of operation\n}\nvoid main()\n{\n char caETF[8];\n char caText=\"HELLOGOODMORNING\";//strlen will in multiple of 8.\n int i,j,len;\n len=strlen(caText);\nfor(i = 0; i &lt; len; i+=8)\n  {\n      strncpy(caETF,caText,8);\n      passtofun(caETF); \n      // passtofun() is the logic/function i want to perform on 8 char independently.\n   } \n}\n</code></pre>\n\n<p>on the first time it should be take caETF=\"HELLOGOO\" and should pass it to passtofun(caETF).\non the second  it should be take caETF=\"DMORNING\" and should pass it to passtofun(caETF) and likewise till the end of string.\nI have tried as above but it works for only first 8 character.How to do this?</p>\n"}, {"tags": ["c", "arrays", "file-io", "linked-list", "singly-linked-list"], "comments": [{"owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 0, "creation_date": 1509506206, "post_id": 47047667, "comment_id": 81042617, "body": "Where did it get to when you debugged it?"}, {"owner": {"reputation": 3, "user_id": 5213380, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/043886171da0834b40b208f58026ea17?s=128&d=identicon&r=PG&f=1", "display_name": "eel314", "link": "https://stackoverflow.com/users/5213380/eel314"}, "reply_to_user": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 0, "creation_date": 1509506284, "post_id": 47047667, "comment_id": 81042643, "body": "line 134: read_to_list(arg[1])"}, {"owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 0, "creation_date": 1509506349, "post_id": 47047667, "comment_id": 81042656, "body": "So step into <code>read_to_list</code>..."}, {"owner": {"reputation": 3, "user_id": 5213380, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/043886171da0834b40b208f58026ea17?s=128&d=identicon&r=PG&f=1", "display_name": "eel314", "link": "https://stackoverflow.com/users/5213380/eel314"}, "reply_to_user": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 0, "creation_date": 1509506726, "post_id": 47047667, "comment_id": 81042731, "body": "@John3136 here is the gdb output:   (gdb) run ./a.out dump.txt  Starting program: /DCNFS/users/student/cbrereto/COEN11/a.out ./a.out dump.txt   Program received signal SIGSEGV, Segmentation fault. 0x00007ffff7b7d921 in __strlen_sse2_pminub () from /lib64/libc.so.6"}, {"owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 0, "creation_date": 1509508736, "post_id": 47047667, "comment_id": 81043151, "body": "You need to learn to use gdb.. Try the bt command to get a stack trace."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1509533093, "post_id": 47047667, "comment_id": 81052939, "body": "<code>char header = &quot;Name\\t\\tGroup Size\\n----------------------------------\\n&quot;;</code> ??"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 5213380, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/043886171da0834b40b208f58026ea17?s=128&d=identicon&r=PG&f=1", "display_name": "eel314", "link": "https://stackoverflow.com/users/5213380/eel314"}, "edited": false, "score": 0, "creation_date": 1509506401, "post_id": 47047700, "comment_id": 81042677, "body": "are you referring to node *p=NULL; ??"}], "tags": [], "owner": {"reputation": 144, "user_id": 401360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3609286d56a88ce59bfec29a5aae9c2?s=128&d=identicon&r=PG", "display_name": "totsubo", "link": "https://stackoverflow.com/users/401360/totsubo"}, "is_accepted": false, "score": 0, "last_activity_date": 1509506257, "creation_date": 1509506257, "answer_id": 47047700, "question_id": 47047667, "link": "https://stackoverflow.com/questions/47047667/segmentation-fault-when-reading-text-file-to-array-of-linked-list/47047700#47047700", "title": "Segmentation fault when reading text file to array of linked list", "body": "<p>You're de-referencing a null pointer.</p>\n"}], "owner": {"reputation": 3, "user_id": 5213380, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/043886171da0834b40b208f58026ea17?s=128&d=identicon&r=PG&f=1", "display_name": "eel314", "link": "https://stackoverflow.com/users/5213380/eel314"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 190, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1509506257, "creation_date": 1509505965, "question_id": 47047667, "link": "https://stackoverflow.com/questions/47047667/segmentation-fault-when-reading-text-file-to-array-of-linked-list", "title": "Segmentation fault when reading text file to array of linked list", "body": "<p>The <em>read_to_list</em> function is designed to scan the contents of a file - <em>dump.txt</em> - and load it into the array of singly linked lists. </p>\n\n<p><strong>The problem lies in LINE 2 of the main function: <em>read_to_list(argv[1]);</em></strong> </p>\n\n<p>The dump.txt file contains the following information:</p>\n\n<pre><code>Name        Group Size\n----------------------------------\nAnna         2\nBill         4\nConnor       6\nDenise       8\n</code></pre>\n\n<p>The argv[1] correlates to a text file that I declare on the command line to dump data from my linked list after running the program. After exiting the program the .txt file saves the data in the above format format. </p>\n\n<p>I do not know why I am getting a segmentation fault when calling the <em>read_to_list</em> function on the file passed in the CLI as it appears to me that the function should load the data correctly and the function is called at the right position in the main function.</p>\n\n<p>Thank you for any and all help that I can get!</p>\n\n<p>The code is below:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\ntypedef struct node\n{\n    char name[20];\n    int size;\n    struct node *next;\n}node;\n\nnode* head[4]={NULL,NULL,NULL,NULL};\nnode* tail[4]={NULL,NULL,NULL,NULL};\n\n\n\nvoid read_to_list(char *filename)\n{\n    FILE *fp;\n    int mined_partysize;\n    char mined_partyname[20];\n\n    char header = \"Name\\t\\tGroup Size\\n----------------------------------\\n\";\n\n    fp = fopen(filename, \"r\");\n    if (fp == NULL)\n        return;\n\n    fseek(fp, strlen(header), SEEK_SET);\n    printf(\"This is working1\");\n    while(fscanf(fp, \"%s%d\", mined_partyname, &amp;mined_partysize) == 2)\n    {\n        printf(\"This is working2\");\n        if(mined_partysize == 0)\n        {\n            printf(\"\\nThat is not a valid command. Party not added!\\n\");\n        }\n        if(mined_partysize &gt;= 1 &amp;&amp; mined_partysize &lt;= 2)\n        {\n            add_party(0, mined_partyname, mined_partysize);\n        }\n        else if(mined_partysize &gt;= 3 &amp;&amp; mined_partysize &lt;= 4)\n        {\n            add_party(1, mined_partyname, mined_partysize);\n        }\n        else if(mined_partysize &gt;= 5 &amp;&amp; mined_partysize &lt;= 6)\n        {\n            add_party(2, mined_partyname, mined_partysize);\n        }\n        else if(mined_partysize &gt;= 7)\n        {\n            add_party(3, mined_partyname, mined_partysize);\n        }\n    }\n\n    fclose(fp);\n    return;\n}\n\n\n//\n// main function\n//\n\n\nint main(int argc, char *argv[])\n{\n    int x;\n    read_to_list(argv[1]);\n    while (1)\n    {\n        fflush(stdin);\n        printf(\"\\n\\nEnter 1 to add a party\\nEnter 2 to remove a party\\nEnter 3 for the list of the party\\nEnter 4 to change party size.\\nEnter 5 to quit.\\n\\n\");\n\n        // user interface\n        scanf(\"%d\",&amp;x);\n        char name[20];\n        int size;\n        switch(x)\n        {\n\n            case 1:\n                printf(\"\\nParty Name: \");\n                scanf(\"%s\", name);\n                printf(\"\\nParty Size: \");\n                scanf(\"%d\", &amp;size);\n                if(size == 0)\n                {\n                    printf(\"\\nThat is not a valid command. Party not added!\\n\");\n                }\n                if(size &gt;= 1 &amp;&amp; size &lt;= 2)\n                {\n                    add_party(0, name, size);\n                }\n                else if(size &gt;= 3 &amp;&amp; size &lt;= 4)\n                {\n                    add_party(1, name, size);\n                }\n                else if(size &gt;= 5 &amp;&amp; size &lt;= 6)\n                {\n                    add_party(2, name, size);\n                }\n                else if(size &gt;= 7)\n                {\n                    add_party(3, name, size);\n                }\n                break;\n\n            case 2:\n                printf(\"\\nSize of party to delete: \");\n                scanf(\"%i\", &amp;size);\n                delete_party(NULL, size);\n                break;\n\n            case 3:\n                list_parties();\n                break;\n\n            case 4:\n                change_partysize(name, size);\n                break;\n\n            case 5:\n                write_to_file(argv[1]);\n                exit(0);\n                break;\n\n            default:\n                continue;\n        }\n    }\n}\n\n\n//\n//add function\n//\n\n\nvoid add_party(int h, char *name, int size)\n{\n    //declare file pointer\n    FILE *fp;\n\n    //to be used by fscanf\n    int number;\n\n    //create a new node\n    int i=0;\n    int breaker = 0;\n    node *p;\n    node *new_item;\n\n    new_item = (node *)malloc(sizeof(node)); // allocate memory the size of the struct\n\n    strcpy(new_item-&gt;name,name);\n    new_item-&gt;size = size;\n\n    if(head[h] == NULL &amp;&amp; tail[h] == NULL) // if an empty list, create a head and tail\n    {\n        head[h] = new_item;\n        tail[h] = head[h];\n        new_item-&gt;next = NULL;\n        return;\n    }\n\n    //traversal\n    for(i=0; i&lt;4; i++)\n    {\n        p = head[i];\n        while(p != NULL)\n        {\n            //check that no repeating names. delete nodes that do have repeating names\n            if(strcmp(p-&gt;name,name) == 0)\n            {\n                printf(\"\\nSorry, that name is already taken\\n\");\n                free(new_item);\n                return;\n            }\n            p = p-&gt;next; //go to the next node in the list\n        }\n    }\n    tail[h]-&gt;next = new_item;\n    new_item-&gt;next = NULL;\n    tail[h] = new_item;\n\n\n}\n</code></pre>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1509502648, "post_id": 47047075, "comment_id": 81041698, "body": "Presumably, you should be using <code>*num &#47;= 4;</code> if you want to divide the number that <code>num</code> points at by 4.  You also need to print <code>*num</code> or change the format to <code>\u201d%p\\n\u201d</code> if you really want to print a pointer.  Another possibility is that you should define <code>int num = 0;</code> instead of defining a pointer."}, {"owner": {"reputation": 301, "user_id": 4793495, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/67c5e7176883bd9ffa3548a6bce43141?s=128&d=identicon&r=PG&f=1", "display_name": "MicrosoftDave", "link": "https://stackoverflow.com/users/4793495/microsoftdave"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1509503209, "post_id": 47047075, "comment_id": 81041834, "body": "Jonathan Leffler , using <code>int num = 0;</code> fixed my problems. Thank you."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1509503315, "post_id": 47047075, "comment_id": 81041866, "body": "@MicrosoftDave: If using <code>int num = 0;</code> fixed your problems, what was your original intent with <code>int *num = 0;</code> then?"}], "answers": [{"comments": [{"owner": {"reputation": 301, "user_id": 4793495, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/67c5e7176883bd9ffa3548a6bce43141?s=128&d=identicon&r=PG&f=1", "display_name": "MicrosoftDave", "link": "https://stackoverflow.com/users/4793495/microsoftdave"}, "edited": false, "score": 0, "creation_date": 1509503171, "post_id": 47047088, "comment_id": 81041824, "body": "Okay, so I got it, turns out I should not have been defining it as a pointer. But just simply as <code>int num = 0</code>, from there using <code>num = num&#47;4</code> works as expected. Thank you, Im still learning C and pointers have been tricky to keep track of."}], "tags": [], "owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "is_accepted": true, "score": 1, "last_activity_date": 1509502738, "last_edit_date": 1509502738, "creation_date": 1509501172, "answer_id": 47047088, "question_id": 47047075, "link": "https://stackoverflow.com/questions/47047075/divide-int-and-store-back-into-original-variable/47047088#47047088", "title": "Divide int and store back into original variable", "body": "<p><code>num</code> is of type pointer. So <code>num = num /4</code>  ; is a very unlikely thing to do. It is not even allowed.</p>\n\n<p>As per standard <strong>6.5.5</strong><code>Each of the operands shall have arithmetic type.</code>(Multiplicative expression)</p>\n\n<p>Compiler also tells you that thing <code>error: invalid operands to binary / (have 'int *' and 'int')</code>. </p>\n\n<p><code>/</code> takes two arguments. But compiler is looking at the operands and it sees that they are of type *. So it complains because it not allowed as oer standard.</p>\n\n<p><code>num =*num/4;</code> is basically assigning an integer result to a pointer variable. Which even though may not lead to desired behavior but allowed. (We also do <code>int *p =NULL</code>)</p>\n"}, {"tags": [], "owner": {"reputation": 3310, "user_id": 1853605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ab8d886abc51e874c1ed067b912ddd?s=128&d=identicon&r=PG", "display_name": "Potato", "link": "https://stackoverflow.com/users/1853605/potato"}, "is_accepted": false, "score": 0, "last_activity_date": 1509503696, "creation_date": 1509503696, "answer_id": 47047368, "question_id": 47047075, "link": "https://stackoverflow.com/questions/47047075/divide-int-and-store-back-into-original-variable/47047368#47047368", "title": "Divide int and store back into original variable", "body": "<p>This statement below declares a pointer</p>\n\n<pre><code>int *num = 0;\n</code></pre>\n\n<p>meaning points to some memory where value is there; </p>\n\n<p>This statement below is very interesting </p>\n\n<pre><code>.\n. //num is determined here...\n.\n</code></pre>\n\n<p>when you say num is determined here there are couple of ways to interpret this</p>\n\n<p>is there an assignment to value as below in which case RHS must be value</p>\n\n<pre><code>*num = some value;\n</code></pre>\n\n<p>or assignment to pointer as below in which case RHS must be an address or pointer.</p>\n\n<pre><code>num = some address;\n</code></pre>\n\n<p>Finally when you do this, you are operating on pointer because <code>num</code> represents a pointer where as <code>*num</code> represents value and below statement is invalid for pointers as <code>Multiplication or Division of a pointer is not allowed in C</code></p>\n\n<pre><code>num = num/4; // &lt;-- My issue\n</code></pre>\n\n<p>also when you are printing here, you are basically printing the address of num than printing the value.</p>\n\n<pre><code>printf(\"%d\\n\", num);\n</code></pre>\n"}], "owner": {"reputation": 301, "user_id": 4793495, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/67c5e7176883bd9ffa3548a6bce43141?s=128&d=identicon&r=PG&f=1", "display_name": "MicrosoftDave", "link": "https://stackoverflow.com/users/4793495/microsoftdave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 47047088, "answer_count": 2, "score": -2, "last_activity_date": 1509503696, "creation_date": 1509501081, "question_id": 47047075, "link": "https://stackoverflow.com/questions/47047075/divide-int-and-store-back-into-original-variable", "title": "Divide int and store back into original variable", "body": "<p>I have a function that does some stuff (that portion is irrelevant) then it sets a value called num, then prints that value. My issue is as a final step of my function before printing the value it must divide by 4. That is where I am hitting a snag... See below:</p>\n\n<pre><code>int *num = 0;\n\n.\n. //num is determined here...\n.\n\nnum = num/4; // &lt;-- My issue\nprintf(\"%d\\n\", num);\n</code></pre>\n\n<p>The error I get is:</p>\n\n<pre><code>error: invalid operands to binary / (have 'int *' and 'int')\n</code></pre>\n\n<p>Which, from so searching means I need to deference it like so:</p>\n\n<pre><code>num = (*num)/4;\n</code></pre>\n\n<p>Though this also does not work correctly (it doesn't give any errors, it actually puts my code into an infinite loop and Windows stops it). What I am trying to do is take the value stored at num (the address) and divide it by for and then set num value to that new value. But I see to be struggling with getting this work correctly.</p>\n"}, {"tags": ["c++", "c", "debugging", "floating-point", "c++-cli"], "comments": [{"owner": {"reputation": 13842, "user_id": 2790621, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/b7bSs.jpg?s=128&g=1", "display_name": "xMRi", "link": "https://stackoverflow.com/users/2790621/xmri"}, "edited": false, "score": 1, "creation_date": 1509520078, "post_id": 47046945, "comment_id": 81046600, "body": "It is just a guess, but I suppose that the debug viewer for the variables are simply different and the binary representation is the same... I have also a C++/CLI module (accessed from C++) that uses doubles and I never saw any inaccuracies."}, {"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 3, "creation_date": 1509524286, "post_id": 47046945, "comment_id": 81048320, "body": "It will be a lot more obvious when you use <code>float retFloat = 1 &#47; 3.0f;</code>  The managed debugging engine displays one more significant digit than a float or double can possibly store.  Which is 7 for float, 16 for double.  So you&#39;ll now see 8 and 17 digits in the displayed value.  The unmanaged engine is inconsistent for float, displaying 2 extra digits.  Whether that was intentional is hard to guess."}, {"owner": {"reputation": 1624, "user_id": 7159784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72be4c6fd2ba4ad48b276cb3627ace11?s=128&d=identicon&r=PG&f=1", "display_name": "Nik", "link": "https://stackoverflow.com/users/7159784/nik"}, "reply_to_user": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1509547057, "post_id": 47046945, "comment_id": 81061835, "body": "@HansPassant, Here&#39;s something interesting, using <code>1 &#47; 3.0f</code>, <code>floats</code> have identical representation in both environments of <code>0.333333343</code>, and <code>doubles</code>: <code>C</code> - <code>0.33333334326744080</code>, <code>C++&#47;CLI</code> - <code>0.3333333432674408</code> (identical minus the least significant zero)."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1509565625, "post_id": 47046945, "comment_id": 81073080, "body": "Reported the result of <code>#include &lt;float.h&gt; ... printf(%d\\n&quot;, FLT_EVAL_METHOD);</code> in your various environments.  That provides useful information as to what the underlying code may be doing here."}, {"owner": {"reputation": 1624, "user_id": 7159784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72be4c6fd2ba4ad48b276cb3627ace11?s=128&d=identicon&r=PG&f=1", "display_name": "Nik", "link": "https://stackoverflow.com/users/7159784/nik"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1509580471, "post_id": 47046945, "comment_id": 81079120, "body": "@chux, the preprocessor evaluates <code>FLT_EVAL_METHOD</code> to <code>0</code> in both <code>C</code> and <code>C++&#47;CLI</code> environments. Thanks for your comment, it was really interesting to learn about this, but doesn&#39;t look like the answer is there."}], "answers": [{"comments": [{"owner": {"reputation": 1624, "user_id": 7159784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72be4c6fd2ba4ad48b276cb3627ace11?s=128&d=identicon&r=PG&f=1", "display_name": "Nik", "link": "https://stackoverflow.com/users/7159784/nik"}, "edited": false, "score": 0, "creation_date": 1509754922, "post_id": 47066540, "comment_id": 81162823, "body": "Excellent insight! Although, as you said, this is at best a supposition, your answer is completely consistent with what I am observing."}, {"owner": {"reputation": 1624, "user_id": 7159784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72be4c6fd2ba4ad48b276cb3627ace11?s=128&d=identicon&r=PG&f=1", "display_name": "Nik", "link": "https://stackoverflow.com/users/7159784/nik"}, "edited": false, "score": 0, "creation_date": 1509755419, "post_id": 47066540, "comment_id": 81162910, "body": "I would like to make a revision suggestion. 1) Your answer naturally leads from Hans Passant&#39;s comment, yet your answer only implies it. For any future readers, it may take some research to fully understand what your answer is getting at. 2) I also think that the way you used <code>FLT_EVAL_METHOD</code> to craft your response is not entirely obvious. For any future readers for whom it does not evaluate to <code>0</code> may not get their answer without thoroughly reading and researching all comments. I am happy to do it, but I thought you are a much better person for the job!"}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 1, "last_activity_date": 1509589514, "last_edit_date": 1509589514, "creation_date": 1509589094, "answer_id": 47066540, "question_id": 47046945, "link": "https://stackoverflow.com/questions/47046945/floating-point-representation-in-debugger-in-c-vs-ccli/47066540#47066540", "title": "Floating Point Representation in Debugger in C vs C++(CLI)", "body": "<p>Consider <strong>Debugger in C++/CLI</strong> itself is not necessarily coded in C, C# or C++.</p>\n\n<p>MS libraries support the <a href=\"https://docs.microsoft.com/en-us/dotnet/standard/base-types/standard-numeric-format-strings\" rel=\"nofollow noreferrer\">\"R\" format</a>: A string that can round-trip to an identical number.  I suspect this or a <code>g</code> format was used.</p>\n\n<p>Without MS source code, the following is only a good supposition:</p>\n\n<p><strong>The debug output is enough to distinguish the <code>double</code> from other nearby <code>double</code>.</strong> So code need not print <code>\"42.420000000000002\"</code>, but <code>\"42.42\"</code> is sufficient - whatever format is used.</p>\n\n<p>42.42 as an IEEE <code>double</code> is about <code>42.4200000000000017053025658242404460906982...</code> and the debugger certainly need not print the exact value.</p>\n\n<p>Potential; similar C code </p>\n\n<pre><code>int main(void) {\n  puts(\"12.34567890123456\");\n  double d = 42.42;\n  printf(\"%.16g\\n\", nextafter(d,0));\n  printf(\"%.16g\\n\", d);\n  printf(\"%.17g\\n\", d);\n  printf(\"%.16g\\n\", nextafter(d,2*d));\n  d = 1 / 3.0f;\n  printf(\"%.9g\\n\", nextafterf(d,0));\n  printf(\"%.9g\\n\", d);\n  printf(\"%.9g\\n\", nextafterf(d,2*d));\n  d = 1 / 3.0f;\n  printf(\"%.16g\\n\", nextafter(d,0));\n  printf(\"%.16g\\n\", d);\n  printf(\"%.16g\\n\", nextafter(d,2*d));\n}\n</code></pre>\n\n<p>output</p>\n\n<pre><code>12.34567890123456\n42.41999999999999\n42.42\n42.420000000000002   // this level of precision not needed.\n42.42000000000001\n0.333333313\n0.333333343\n0.333333373\n0.3333333432674407\n0.3333333432674408\n0.3333333432674409\n</code></pre>\n\n<p>For your code to convert a <code>double</code> to text with sufficient textual precision and back to <code>double</code> to \"round-trip\" the number, see <a href=\"https://stackoverflow.com/q/16839658/2410359\">Printf width specifier to maintain precision of floating-point value</a>.</p>\n"}], "owner": {"reputation": 1624, "user_id": 7159784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72be4c6fd2ba4ad48b276cb3627ace11?s=128&d=identicon&r=PG&f=1", "display_name": "Nik", "link": "https://stackoverflow.com/users/7159784/nik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 0, "accepted_answer_id": 47066540, "answer_count": 1, "score": 3, "last_activity_date": 1509589514, "creation_date": 1509499932, "last_edit_date": 1509503190, "question_id": 47046945, "link": "https://stackoverflow.com/questions/47046945/floating-point-representation-in-debugger-in-c-vs-ccli", "title": "Floating Point Representation in Debugger in C vs C++(CLI)", "body": "<p><strong>A little background</strong>: I was working on some data conversion from <code>C</code> to <code>C#</code> by using a <code>C++/CLI</code> midlayer, and I noticed a peculiarity with the way the debugger shows <code>floats</code> and <code>doubles</code>, depending on which dll the code is executing in (see code and images below). At first I thought it had something to do with managed/unmanaged differences, but then I realized that if I completely left the <code>C#</code> layer out of it and only used unmanaged data types, the same behaviour was exhibited. </p>\n\n<p><strong>Test Case</strong>: To further explore the issue, I created an isolated test case to clearly identify the strange behaviour. I am assuming that anyone who may be testing this code already has a working Solution and <code>dllimport</code>/<code>dllexport</code>/ <a href=\"https://stackoverflow.com/questions/14980649/macro-for-dllexport-dllimport-switch\">macros</a> set up. Mine is called <code>DLL_EXPORT</code>. If you need a minimal working header file, let me know. Here the main application is in <code>C</code> and calling a function from a <code>C++/CLI</code> dll. I am using <strong>Visual Studio 2015</strong> and both assemblies are <code>32 bit</code>.</p>\n\n<p>I am a bit concerned, as I am not sure if this is something I need to worry about or it's just something the debugger is doing (I am leaning towards the latter). And to be quite honest, I am just outright curious as to what's happening here.</p>\n\n<p><strong>Question:</strong> Can anyone explain the observed behaviour or at least point me in the right direction?</p>\n\n<p><strong>C - Calling Function</strong></p>\n\n<pre><code>void floatTest()\n{\n    float floatValC = 42.42f;\n    double doubleValC = 42.42;\n    //even if passing the address, behaviour is same as all others.\n    float retFloat = 42.42f;\n    double retDouble = 42.42;\n    int sizeOfFloatC = sizeof(float);\n    int sizeOfDoubleC = sizeof(double);\n\n    floatTestCPP(floatValC, doubleValC, &amp;retFloat, &amp;retDouble);\n\n    //do some dummy math to make compiler happy (i.e. no unsused variable warnings)\n    sizeOfFloatC = sizeOfFloatC + sizeOfDoubleC;//break point here\n}\n</code></pre>\n\n<p><strong>C++/CLI Header</strong></p>\n\n<pre><code>DLL_EXPORT void floatTestCPP(float floatVal, double doubleVal, \n      float *floatRet, double *doubleRet);\n</code></pre>\n\n<p><strong>C++/CLI Source</strong></p>\n\n<pre><code>//as you can see, there are no managed types in this function\nvoid floatTestCPP(float floatVal, double doubleVal, float *floatRet, double *doubleRet)\n{\n    float floatLocal = floatVal;\n    double doubleLocal = doubleVal;\n\n    int sizeOfFloatCPP = sizeof(float);\n    int sizeOfDoubleCPP = sizeof(double);\n\n    *floatRet = 42.42f;\n    *doubleRet = 42.42;\n\n    //do some dummy math to make compiler happy (no warnings)\n    floatLocal = (float)doubleLocal;//break point here\n    sizeOfDoubleCPP = sizeOfFloatCPP;\n}\n</code></pre>\n\n<p><strong>Debugger in C</strong> - break point on last line of <code>floatTest()</code></p>\n\n<p><a href=\"https://i.stack.imgur.com/PZw2w.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PZw2w.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Debugger in C++/CLI</strong> - break point on the second to last line of <code>floatTestCPP()</code></p>\n\n<p><a href=\"https://i.stack.imgur.com/EGQPj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EGQPj.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c", "pthreads"], "comments": [{"owner": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "edited": false, "score": 0, "creation_date": 1509513356, "post_id": 47046901, "comment_id": 81044258, "body": "If you had 5 threads how would you do it?"}, {"owner": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "edited": false, "score": 0, "creation_date": 1509513484, "post_id": 47046901, "comment_id": 81044304, "body": "Also, you create <code>x</code> threads each using the same <code>thr</code> variable. And you only wait for the last one to finish."}], "owner": {"reputation": 47, "user_id": 4867491, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/X6iBO.jpg?s=128&g=1", "display_name": "krambo", "link": "https://stackoverflow.com/users/4867491/krambo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 303, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1509499557, "creation_date": 1509499557, "question_id": 47046901, "link": "https://stackoverflow.com/questions/47046901/dividing-tasks-among-pthreads-in-c", "title": "Dividing tasks among pthreads in C?", "body": "<p>Currently I am making a program that creates 60 random integers from 1-99 and stores them in a [5][12] 2d array, and I'm trying to use pthreads so that a user inputs a number x between 2 &amp; 4 inclusive, and for every even number in the array the number is incremented by 1, and for every odd number it's decremented by 1, with the x number of threads doing the incrementing/decrementing.   Currently I have this:</p>\n\n<pre><code>int randint[5][12];\nint x;\n\nvoid *routine(void* arg){\n  for(int i = 0; i &lt; 5; i++){\n    for(int j = 0; j &lt; 12; j++){\n        if(randint[i][j] % 2){\n            randint[i][j]--;\n        }\n        else randint[i][j]++;\n    }\n  }\nreturn NULL;\n}\n\nint main(int argc, char* argv[]){\n   x = atoi(argv[1]);\n   time_t t;\n   assert(x &gt;= 2 &amp;&amp; x &lt;= 4);\n   printf(\"You entered: %d\\n\", x);\n\n   srand((unsigned) time(&amp;t));\n   printf(\"Original Array\\n\");\n   for(int i = 0; i &lt; 5; i++){\n       for(int j = 0; j &lt; 12; j++){\n           randint[i][j] = rand() % (99 + 1 - 1) + 1;\n           printf(\"%d\\t\", randint[i][j]);\n       }\n    printf(\"\\n\");\n   }\n   printf(\"\\n\\n\");\n\n   pthread_t thr;\n   int r;\n   for(int i = 1; i &lt;= x; i++){\n       r=pthread_create(&amp;thr, NULL, &amp;routine, (void*)(long)i);\n   }\n   pthread_join(thr, NULL);\n\n\n\n   printf(\"Updated Array\\n\");\n   for(int i = 0; i &lt; 5; i++){\n       for(int j = 0; j &lt; 12; j++){\n           printf(\"%d\\t\", randint[i][j]);\n       }\n       printf(\"\\n\");\n   }\n   printf(\"\\n\");\n\n\n}\n</code></pre>\n\n<p>Currently the pthread function would get weird if there was more than one thread created, which obviously isn't the plan.</p>\n\n<p>My question is how do I divide the [5][12] array up between the x amount of pthreads, so that they don't increment/decrement over each other, and each thread gets a (relatively) equal share of the array?</p>\n"}, {"tags": ["c", "arrays", "matching"], "comments": [{"owner": {"reputation": 20235, "user_id": 1462718, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7d451483b64aa999fecf316e7132afc6?s=128&d=identicon&r=PG", "display_name": "Brandon", "link": "https://stackoverflow.com/users/1462718/brandon"}, "edited": false, "score": 0, "creation_date": 1509499219, "post_id": 47046838, "comment_id": 81040910, "body": "<code>sprintf(str, %.15f&quot;,a);</code> but a is an integer.. and you&#39;re missing a quote there.."}, {"owner": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "edited": false, "score": 0, "creation_date": 1509499318, "post_id": 47046838, "comment_id": 81040930, "body": "And you don&#39;t need 2 loops."}, {"owner": {"reputation": 4703, "user_id": 5375464, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3292ca87ff6c766b75dbe4b2ea0831da?s=128&d=identicon&r=PG&f=1", "display_name": "J...S", "link": "https://stackoverflow.com/users/5375464/j-s"}, "edited": false, "score": 0, "creation_date": 1509499336, "post_id": 47046838, "comment_id": 81040937, "body": "And <code>a= (l - (int)l)</code> is always zero here."}, {"owner": {"reputation": 51, "user_id": 3529730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf19387ff975db6b20f7aed6f5b51531?s=128&d=identicon&r=PG&f=1", "display_name": "KolacheMaster", "link": "https://stackoverflow.com/users/3529730/kolachemaster"}, "reply_to_user": {"reputation": 4703, "user_id": 5375464, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3292ca87ff6c766b75dbe4b2ea0831da?s=128&d=identicon&r=PG&f=1", "display_name": "J...S", "link": "https://stackoverflow.com/users/5375464/j-s"}, "edited": false, "score": 0, "creation_date": 1509499455, "post_id": 47046838, "comment_id": 81040966, "body": "@J...S that is a lower case L not a 1, I subtracted the integer part from the decimal part"}, {"owner": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "reply_to_user": {"reputation": 4703, "user_id": 5375464, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3292ca87ff6c766b75dbe4b2ea0831da?s=128&d=identicon&r=PG&f=1", "display_name": "J...S", "link": "https://stackoverflow.com/users/5375464/j-s"}, "edited": false, "score": 0, "creation_date": 1509499457, "post_id": 47046838, "comment_id": 81040967, "body": "@J...S. yes, when <code>a</code> is an <code>int</code>. But not if a <code>float</code>"}, {"owner": {"reputation": 51, "user_id": 3529730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf19387ff975db6b20f7aed6f5b51531?s=128&d=identicon&r=PG&f=1", "display_name": "KolacheMaster", "link": "https://stackoverflow.com/users/3529730/kolachemaster"}, "reply_to_user": {"reputation": 4703, "user_id": 5375464, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3292ca87ff6c766b75dbe4b2ea0831da?s=128&d=identicon&r=PG&f=1", "display_name": "J...S", "link": "https://stackoverflow.com/users/5375464/j-s"}, "edited": false, "score": 0, "creation_date": 1509499563, "post_id": 47046838, "comment_id": 81040995, "body": "@J...S sorry I retyped my code, a and b are both doubles in my compiler"}, {"owner": {"reputation": 20235, "user_id": 1462718, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7d451483b64aa999fecf316e7132afc6?s=128&d=identicon&r=PG", "display_name": "Brandon", "link": "https://stackoverflow.com/users/1462718/brandon"}, "edited": false, "score": 0, "creation_date": 1509500003, "post_id": 47046838, "comment_id": 81041077, "body": "Your code is hard to read for me.. <a href=\"https://ideone.com/yiY1op\" rel=\"nofollow noreferrer\">ideone.com/yiY1op</a> . In any case, you only need one loop and it starts at 2 because decimals start with 0 + decimal point. Not sure why your loop started at 3.."}, {"owner": {"reputation": 51, "user_id": 3529730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf19387ff975db6b20f7aed6f5b51531?s=128&d=identicon&r=PG&f=1", "display_name": "KolacheMaster", "link": "https://stackoverflow.com/users/3529730/kolachemaster"}, "reply_to_user": {"reputation": 20235, "user_id": 1462718, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7d451483b64aa999fecf316e7132afc6?s=128&d=identicon&r=PG", "display_name": "Brandon", "link": "https://stackoverflow.com/users/1462718/brandon"}, "edited": false, "score": 0, "creation_date": 1509500227, "post_id": 47046838, "comment_id": 81041132, "body": "@Brandon I apologize for that, this is an excerpt from a larger piece of code I wrote and retyped everything piece by piece.  Why would I only need one loop?"}, {"owner": {"reputation": 20235, "user_id": 1462718, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7d451483b64aa999fecf316e7132afc6?s=128&d=identicon&r=PG", "display_name": "Brandon", "link": "https://stackoverflow.com/users/1462718/brandon"}, "edited": false, "score": 0, "creation_date": 1509500366, "post_id": 47046838, "comment_id": 81041169, "body": "Well.. you only need one loop because you only need to iterate the length of the smallest string. Since that&#39;s the case, one loop will suffice. You iterate the length of the smallest string while comparing the characters in that string with the next one."}, {"owner": {"reputation": 4703, "user_id": 5375464, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3292ca87ff6c766b75dbe4b2ea0831da?s=128&d=identicon&r=PG&f=1", "display_name": "J...S", "link": "https://stackoverflow.com/users/5375464/j-s"}, "edited": false, "score": 0, "creation_date": 1509500413, "post_id": 47046838, "comment_id": 81041179, "body": "You probably meant the commas in <code>for(t=3,t&lt;c,t++){ </code> to be semicolons."}], "answers": [{"comments": [{"owner": {"reputation": 4703, "user_id": 5375464, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3292ca87ff6c766b75dbe4b2ea0831da?s=128&d=identicon&r=PG&f=1", "display_name": "J...S", "link": "https://stackoverflow.com/users/5375464/j-s"}, "edited": false, "score": 0, "creation_date": 1509500556, "post_id": 47046995, "comment_id": 81041219, "body": "I think he wants to know the number of matching decimal decimal places."}], "tags": [], "owner": {"reputation": 335, "user_id": 8856002, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-BFZhiSQLfec/AAAAAAAAAAI/AAAAAAAAAP0/eBirc_wgQC4/photo.jpg?sz=128", "display_name": "Joe Mother", "link": "https://stackoverflow.com/users/8856002/joe-mother"}, "is_accepted": false, "score": -1, "last_activity_date": 1509500444, "creation_date": 1509500444, "answer_id": 47046995, "question_id": 47046838, "link": "https://stackoverflow.com/questions/47046838/c-programming-how-to-determine-an-exact-match-between-2-numbers/47046995#47046995", "title": "C Programming: How to determine an exact match between 2 numbers", "body": "<p>This may not be the answer, but do</p>\n\n<pre><code>if (number1 == number2)\n{\n// do something to stop it\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 51, "user_id": 3529730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf19387ff975db6b20f7aed6f5b51531?s=128&d=identicon&r=PG&f=1", "display_name": "KolacheMaster", "link": "https://stackoverflow.com/users/3529730/kolachemaster"}, "edited": false, "score": 0, "creation_date": 1509501666, "post_id": 47047038, "comment_id": 81041495, "body": "That makes a lot of sense, I had contemplated using a ternary operator earlier but I brushed off the notion when I converted a and b into strings with 15 decimal places.  Thank you very much for your explanation and time!"}, {"owner": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "reply_to_user": {"reputation": 51, "user_id": 3529730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf19387ff975db6b20f7aed6f5b51531?s=128&d=identicon&r=PG&f=1", "display_name": "KolacheMaster", "link": "https://stackoverflow.com/users/3529730/kolachemaster"}, "edited": false, "score": 0, "creation_date": 1509511586, "post_id": 47047038, "comment_id": 81043817, "body": "@KolacheMaster Here the ternary operator is used to return the min of <code>c</code> and <code>d</code>."}, {"owner": {"reputation": 51, "user_id": 3529730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf19387ff975db6b20f7aed6f5b51531?s=128&d=identicon&r=PG&f=1", "display_name": "KolacheMaster", "link": "https://stackoverflow.com/users/3529730/kolachemaster"}, "reply_to_user": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "edited": false, "score": 0, "creation_date": 1509578962, "post_id": 47047038, "comment_id": 81078677, "body": "@MFisherKDX the ternary operator is returning which string length is smaller, they are both equal therefore due to its syntax it out puts d and then i &lt; d is used as the second expression in the for loop."}], "tags": [], "owner": {"reputation": 20235, "user_id": 1462718, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7d451483b64aa999fecf316e7132afc6?s=128&d=identicon&r=PG", "display_name": "Brandon", "link": "https://stackoverflow.com/users/1462718/brandon"}, "is_accepted": true, "score": 1, "last_activity_date": 1509500853, "creation_date": 1509500853, "answer_id": 47047038, "question_id": 47046838, "link": "https://stackoverflow.com/questions/47046838/c-programming-how-to-determine-an-exact-match-between-2-numbers/47047038#47047038", "title": "C Programming: How to determine an exact match between 2 numbers", "body": "<p>First, when comparing two strings, you only need to iterate to the length of the smallest string if the two strings differ in length.. That is, if you want to count the amount of sequential character matches in a string.</p>\n\n<p>For example:</p>\n\n<pre><code>A = 0.99997552\nB = 0.9999753\n</code></pre>\n\n<p>would need one for loop to compare.. You would only iterate up to the length of B to determine that 6 decimals match. Why? Because going any further is irrelevant since none of the extra digits would exist in B. Iterating past the end of an array is undefined behaviour anyway. </p>\n\n<p>In your case both buffers are the same length so no worries there, but again, the shorter string won't have the extra digits found in the longer string.. Hence: Iterate up to the smallest length.</p>\n\n<p>The solution can be done as follows:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main() {\n\n    //Create large enough buffer to hold 100 digits/characters..\n    char str[100] = {0};\n    char buf[100] = {0};\n\n    //Two doubles to be compared..\n    double l = 59874.141715197809000;\n    double m = 59874.141715197817000;\n\n    //Counter keeps track of matching digits..\n    int count = 0;\n\n    //Get rid of the base and keep only the decimals..\n    double a = (l - (int)l);\n    double b = (m - (int)m);\n\n    //Copy a maximum of 15 decimal places to `str` and `buf`\n    sprintf(str, \"%.15f\", a);\n    sprintf(buf,\"%.15f\", b);\n\n    //Get the length of both strings..\n    int c = strlen(str);\n    int d = strlen(buf);\n\n    //If C is smaller, iterate to length(c) else iterate to length(d).\n    for (int i = 2; i &lt; (c &lt; d ? c : d); ++i)\n    {\n        //If the two characters match, increment the count..\n        if (str[i] == buf[i])\n        {\n            ++count;\n        }\n    }\n\n    //Print the amount of matching decimals..\n    printf(\"matching decimal places = %d \\n\", count);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 3529730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf19387ff975db6b20f7aed6f5b51531?s=128&d=identicon&r=PG&f=1", "display_name": "KolacheMaster", "link": "https://stackoverflow.com/users/3529730/kolachemaster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "accepted_answer_id": 47047038, "answer_count": 2, "score": 0, "last_activity_date": 1509500853, "creation_date": 1509499051, "last_edit_date": 1509500276, "question_id": 47046838, "link": "https://stackoverflow.com/questions/47046838/c-programming-how-to-determine-an-exact-match-between-2-numbers", "title": "C Programming: How to determine an exact match between 2 numbers", "body": "<p>I am trying to find the exact match between two numbers and have my counter stop at the first instance when they are not a match. However the code I have written counts the entire string length of my numbers.  Is there an alternative way to do this?</p>\n\n<p>Since my counter is starting from the first decimal place and not 0. , it counts to 15 but should stop at 10.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;math.h&gt;\n#include&lt;string.h&gt;\n#include&lt;stdlib.h&gt;\nint main(){    \n    char str[100];\n    char buf[100];\n\n    double l,m,a,b;\n\n    int c,d,t,u,r,q;\n    int count =0;\n\n    l=59874.141715197809000;\n    m=59874.141715197817000;\n\n    a= (l - (int)l);\n    b= (m -(int)m);\n\n    sprintf(str,\"%.15f\",a);\n    sprintf(buf,\"%.15f\",b);\n\n    c = strlen(str);\n    d = strlen(buf);\n\n    for(t=3;t&lt;c;t++){\n        for(u=3;u&lt;d;u++){\n            if(str[t]==buf[u]){\n                count++;\n                break;\n            }\n        }\n    }\n    printf(\"matching decimal places = %d \\n\",count);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "kbhit"], "comments": [{"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 1, "creation_date": 1509497917, "post_id": 47046581, "comment_id": 81040629, "body": "What do you mean by &quot;first check&quot;? You can use the <code>if(_kbhit())</code> / <code>_getch()</code> combination in a loop to read multiple characters if that&#39;s what you&#39;re asking."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 8865447, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lHH_sB1vtiI/AAAAAAAAAAI/AAAAAAAABxs/mgtWk5-Rci0/photo.jpg?sz=128", "display_name": "Mathias Hemmer", "link": "https://stackoverflow.com/users/8865447/mathias-hemmer"}, "edited": false, "score": 0, "creation_date": 1509527107, "post_id": 47047483, "comment_id": 81049575, "body": "Yeah, I thought of that, but it does the same thing, passes the W ant not the S"}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "reply_to_user": {"reputation": 13, "user_id": 8865447, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lHH_sB1vtiI/AAAAAAAAAAI/AAAAAAAABxs/mgtWk5-Rci0/photo.jpg?sz=128", "display_name": "Mathias Hemmer", "link": "https://stackoverflow.com/users/8865447/mathias-hemmer"}, "edited": false, "score": 0, "creation_date": 1509541987, "post_id": 47047483, "comment_id": 81058307, "body": "I added a complete example that works correctly for me. It prints W or S if you press those keys and exits if you press X."}], "tags": [], "owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "is_accepted": false, "score": 1, "last_activity_date": 1509541913, "last_edit_date": 1509541913, "creation_date": 1509504497, "answer_id": 47047483, "question_id": 47046581, "link": "https://stackoverflow.com/questions/47046581/kbhit-and-multiple-calls-on-function/47047483#47047483", "title": "kbhit and multiple calls on function", "body": "<p>Your problem is that you're trying to read once for every key you're interested in with this code:</p>\n\n<pre><code>if(GetUserInput() == 2)\n    printf(\"W\");\nif(GetUserInput() == 1)\n    printf(\"S\");\n</code></pre>\n\n<p>For example, I press 'S', you read the key, check if the return value is 2 and it is not. Then you try to read another key, but I haven't pressed one, so the second check for 'S' also fails.</p>\n\n<p>To fix this you need to perform all of your tests on the value you get from <code>GetUserInput()</code>.</p>\n\n<pre><code>int val = GetUserInput();\nif(val == 2)\n    printf(\"W\");\nelse if(val == 1)\n    printf(\"S\");\n</code></pre>\n\n<p>You don't need to use else if, but once you've found a match it makes no sense to keep checking if all of your checks are mutually exclusive.  You might consider using a switch statement and an enum instead of hardcoded magic values, or even return the key value directly if one is pressed and a sentinel value like 0 that won't match any of the keys you're interested in.</p>\n\n<p>Here is a complete example that works for me:</p>\n\n<pre><code>#include &lt;conio.h&gt;\n#include &lt;stdio.h&gt;\n\nint GetUserInput()\n{\n    if (_kbhit())\n    {\n        char c = _getch();\n        switch (c)\n        {\n        case 's':\n        case 'S':\n            return 2;\n\n        case 'w':\n        case 'W':\n            return 1;\n\n        case 'x':\n        case 'X':\n            return -1;\n        }\n    }\n    return 0;\n}\n\nint main()\n{\n    for (;;)\n    {\n        int c = GetUserInput();\n        switch (c)\n        {\n        case 1:\n            printf(\"W\");\n            break;\n        case 2:\n            printf(\"S\");\n            break;\n        case -1:\n            return 0;\n        }\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 8865447, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lHH_sB1vtiI/AAAAAAAAAAI/AAAAAAAABxs/mgtWk5-Rci0/photo.jpg?sz=128", "display_name": "Mathias Hemmer", "link": "https://stackoverflow.com/users/8865447/mathias-hemmer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 518, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1509541913, "creation_date": 1509496844, "last_edit_date": 1509503956, "question_id": 47046581, "link": "https://stackoverflow.com/questions/47046581/kbhit-and-multiple-calls-on-function", "title": "kbhit and multiple calls on function", "body": "<p>While making a asteroid shooter, I came around using <code>_kbhit()</code> and <code>kbhit()</code>. I'm no expert, but here is the problem I think I'm having:</p>\n\n<pre><code>int run = 1;\n\nint main() {\n    while(run){\n        if(GetUserInput() == 2)\n            printf(\"W\");\n        if(GetUserInput() == 1)\n            printf(\"S\");\n        Sleep(50);\n    }\n}\n\nint GetUserInput(){\n    if(kbhit()){\n        char c = _getch();\n        if(c == 's')\n            return 2;\n        if(c == 'w')\n            return 1;\n    }\n    else\n        return 0;*\n\n}\n</code></pre>\n\n<p>So, what I think is happening, it does the first check on <code>GetUserInput()</code>, and because of the nature of <code>getch()</code>, the keyboard is read from the buffer and discarded? Anyways, I store the value in <code>c</code> and should return appropriately. But it only does the first check. Is it because there is no more input on the buffer after the first check (in the <code>main()</code> function)?</p>\n"}, {"tags": ["c", "multithreading", "pthreads"], "comments": [{"owner": {"reputation": 9367, "user_id": 4454124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c094d8979fb41b789a7c7f21d9329359?s=128&d=identicon&r=PG&f=1", "display_name": "mnistic", "link": "https://stackoverflow.com/users/4454124/mnistic"}, "edited": false, "score": 2, "creation_date": 1509497541, "post_id": 47046547, "comment_id": 81040546, "body": "Thread synchronization is done with condition variables, would they work for you: <a href=\"https://stackoverflow.com/questions/8901538/synchronize-threads-for-pthread-cond-broadcast-call\" title=\"synchronize threads for pthread cond broadcast call\">stackoverflow.com/questions/8901538/&hellip;</a>"}, {"owner": {"reputation": 873, "user_id": 2693030, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/33fad089255c86e4bc887744d6c3920c?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Blake", "link": "https://stackoverflow.com/users/2693030/michael-blake"}, "reply_to_user": {"reputation": 9367, "user_id": 4454124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c094d8979fb41b789a7c7f21d9329359?s=128&d=identicon&r=PG&f=1", "display_name": "mnistic", "link": "https://stackoverflow.com/users/4454124/mnistic"}, "edited": false, "score": 0, "creation_date": 1509499105, "post_id": 47046547, "comment_id": 81040880, "body": "I forgot about condition variables. I&#39;ll have to see if I can restructure my code to use them. Hopefully that&#39;ll do the trick."}, {"owner": {"reputation": 873, "user_id": 2693030, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/33fad089255c86e4bc887744d6c3920c?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Blake", "link": "https://stackoverflow.com/users/2693030/michael-blake"}, "reply_to_user": {"reputation": 9367, "user_id": 4454124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c094d8979fb41b789a7c7f21d9329359?s=128&d=identicon&r=PG&f=1", "display_name": "mnistic", "link": "https://stackoverflow.com/users/4454124/mnistic"}, "edited": false, "score": 0, "creation_date": 1509502817, "post_id": 47046547, "comment_id": 81041741, "body": "Looking at this again, I don&#39;t know if condition variables will work because <code>wait</code> will block any threads, including the main thread that needs to keep looping. Is there any way of using a signal to inform the loop that it can stop looping and exit?"}, {"owner": {"reputation": 9367, "user_id": 4454124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c094d8979fb41b789a7c7f21d9329359?s=128&d=identicon&r=PG&f=1", "display_name": "mnistic", "link": "https://stackoverflow.com/users/4454124/mnistic"}, "edited": false, "score": 0, "creation_date": 1509503452, "post_id": 47046547, "comment_id": 81041905, "body": "I&#39;m a little confused. Your main thread is stuck in accept. Is your goal to somehow break out of accept based on what happens in another thread?"}, {"owner": {"reputation": 873, "user_id": 2693030, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/33fad089255c86e4bc887744d6c3920c?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Blake", "link": "https://stackoverflow.com/users/2693030/michael-blake"}, "reply_to_user": {"reputation": 9367, "user_id": 4454124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c094d8979fb41b789a7c7f21d9329359?s=128&d=identicon&r=PG&f=1", "display_name": "mnistic", "link": "https://stackoverflow.com/users/4454124/mnistic"}, "edited": false, "score": 0, "creation_date": 1509503671, "post_id": 47046547, "comment_id": 81041966, "body": "My main thread is stuck in accept unless a new connection is established, then it makes a new thread, and loops back around to accept and waits. If anything happens within <code>threaded_function</code> that sets <code>a</code> to zero, I just want the program to end (and the threads to exit) once that thread returns."}], "answers": [{"tags": [], "owner": {"reputation": 9367, "user_id": 4454124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c094d8979fb41b789a7c7f21d9329359?s=128&d=identicon&r=PG&f=1", "display_name": "mnistic", "link": "https://stackoverflow.com/users/4454124/mnistic"}, "is_accepted": true, "score": 1, "last_activity_date": 1509554391, "last_edit_date": 1509554391, "creation_date": 1509545341, "answer_id": 47056805, "question_id": 47046547, "link": "https://stackoverflow.com/questions/47046547/is-pthread-join-necessary-for-the-threaded-function-to-return/47056805#47056805", "title": "Is pthread_join necessary for the threaded function to return?", "body": "<p>Your problem is that your main thread is stuck in accept which is a blocking call, so to make it break out of it it would probably be best to send a signal which will cause an interrupt. IIRC something like this should work. In your worker thread:</p>\n\n<pre><code>void* sthread(void* p)\n{\n  int* keep_running = (int*)p;\n  sigset_t set;\n  sigemptyset(&amp;set);\n  sigaddset(&amp;set, SIGTERM);\n  pthread_sigmask(SIG_BLOCK, &amp;set, NULL);\n  sleep(5);\n  *keep_running = 0;\n  pthread_kill(main_threadId, SIGTERM);\n}\n</code></pre>\n\n<p>And then in your main thread:</p>\n\n<pre><code>struct sigaction sa;\nint keep_running = 1;\n...\nmain_threadId = pthread_self();\nsa.sa_handler = signal_handler; //This can be just an empty function\nsigaction(SIGTERM, &amp;sa, NULL);\n...\nwhile(keep_running)\n{\n    sock = accept(sock_desc, (struct sockaddr *)&amp;client, (socklen_t*)&amp;c);\n    pthread_create(&amp;thread, NULL, sthread, &amp;keep_running);\n}\nclose(sock);\n</code></pre>\n\n<p>This will allow you to close the socket cleanly and tidy up. Of course, you will probably want to have more than one socket so you will have to manage them in an array or somehow else.</p>\n"}], "owner": {"reputation": 873, "user_id": 2693030, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/33fad089255c86e4bc887744d6c3920c?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Blake", "link": "https://stackoverflow.com/users/2693030/michael-blake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 203, "favorite_count": 0, "accepted_answer_id": 47056805, "answer_count": 1, "score": 0, "last_activity_date": 1509554391, "creation_date": 1509496567, "question_id": 47046547, "link": "https://stackoverflow.com/questions/47046547/is-pthread-join-necessary-for-the-threaded-function-to-return", "title": "Is pthread_join necessary for the threaded function to return?", "body": "<pre><code>int main()\n{\n    pthread_t thread;\n    int a = 0;\n\n    while(a == 0)\n    {\n        accept(...); //accept a new connection (blocking)\n        pthread_create(&amp;thread, NULL, threaded_function, &amp;a);\n    }\n    pthread_join(...);\n    return 0;\n}\n</code></pre>\n\n<p>My goal is to keep the main thread looping until a thread returns with <code>a</code> not equal to zero. The problem is that <code>pthread_create</code> isn't returning a value. I'm guessing this is because the main thread isn't waiting at <code>pthread_join</code>, but instead is in a loop waiting at <code>accept</code>. But if I join the threads inside of the loop, the loop won't be running. Is the only way of accomplishing this by creating another thread, and another threaded function just to watch the value of <code>a</code>? </p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1509495342, "post_id": 47046365, "comment_id": 81040012, "body": "what going wrong?"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1509495965, "post_id": 47046365, "comment_id": 81040172, "body": "are you expecting hostdata in main to get updated?"}, {"owner": {"reputation": 10183, "user_id": 1292061, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/afD1k.jpg?s=128&g=1", "display_name": "ravron", "link": "https://stackoverflow.com/users/1292061/ravron"}, "edited": false, "score": 0, "creation_date": 1509496831, "post_id": 47046365, "comment_id": 81040375, "body": "What exactly is going wrong? What are you expecting? Providing a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> is a prerequisite for a good answer."}, {"owner": {"reputation": 123, "user_id": 5090433, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Dr_RyEuLqEo/AAAAAAAAAAI/AAAAAAAAAcY/KZ0dOvq8Lko/photo.jpg?sz=128", "display_name": "user5090433", "link": "https://stackoverflow.com/users/5090433/user5090433"}, "edited": false, "score": 0, "creation_date": 1509498712, "post_id": 47046365, "comment_id": 81040792, "body": "the exception is in this line :  printf(&quot;%1.4f &quot;, hostdata[i]) ,  where hostdata still remains to NULL, and cause an access to address zero error, so the value of hostdata is not the address that i allocate in the randgen function."}, {"owner": {"reputation": 17608, "user_id": 3650362, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fqdi1.jpg?s=128&g=1", "display_name": "trentcl", "link": "https://stackoverflow.com/users/3650362/trentcl"}, "edited": false, "score": 0, "creation_date": 1509498854, "post_id": 47046365, "comment_id": 81040826, "body": "<code>hostdata</code>, <code>hostData</code>, and <code>host_Data</code>, <i>really</i>?"}], "answers": [{"comments": [{"owner": {"reputation": 123, "user_id": 5090433, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Dr_RyEuLqEo/AAAAAAAAAAI/AAAAAAAAAcY/KZ0dOvq8Lko/photo.jpg?sz=128", "display_name": "user5090433", "link": "https://stackoverflow.com/users/5090433/user5090433"}, "edited": false, "score": 0, "creation_date": 1509495733, "post_id": 47046394, "comment_id": 81040111, "body": "hi rounak, but i already have this line: float * hostData = *host_Data;"}], "tags": [], "owner": {"reputation": 8639, "user_id": 424406, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/7Avez.jpg?s=128&g=1", "display_name": "rounak", "link": "https://stackoverflow.com/users/424406/rounak"}, "is_accepted": false, "score": 0, "last_activity_date": 1509495449, "creation_date": 1509495449, "answer_id": 47046394, "question_id": 47046365, "link": "https://stackoverflow.com/questions/47046365/cant-change-my-pointers-reference/47046394#47046394", "title": "Can&#39;t change my pointers reference", "body": "<p>I'd change</p>\n\n<pre><code>hostData = (float *)calloc(n, sizeof(float)); \n</code></pre>\n\n<p>to </p>\n\n<pre><code>*host_Data = (float *)calloc(n, sizeof(float)); \n</code></pre>\n\n<p>And the same thing for CUDA_CALL</p>\n"}, {"tags": [], "owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "is_accepted": false, "score": 0, "last_activity_date": 1509496218, "creation_date": 1509496218, "answer_id": 47046496, "question_id": 47046365, "link": "https://stackoverflow.com/questions/47046365/cant-change-my-pointers-reference/47046496#47046496", "title": "Can&#39;t change my pointers reference", "body": "<p>if you expect hostdata in main to be updated you need to do</p>\n\n<pre><code> *host_Data = (float *)calloc(n, sizeof(float)); \n hostData = *host_Data;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 123, "user_id": 5090433, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Dr_RyEuLqEo/AAAAAAAAAAI/AAAAAAAAAcY/KZ0dOvq8Lko/photo.jpg?sz=128", "display_name": "user5090433", "link": "https://stackoverflow.com/users/5090433/user5090433"}, "edited": false, "score": 0, "creation_date": 1509512031, "post_id": 47046900, "comment_id": 81043923, "body": "thanks a lot for your patiently words and time,your way it works and lesson learned."}], "tags": [], "owner": {"reputation": 26, "user_id": 8530825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb0859910220279571f2eb82e498b686?s=128&d=identicon&r=PG&f=1", "display_name": "A.A.O.", "link": "https://stackoverflow.com/users/8530825/a-a-o"}, "is_accepted": true, "score": 0, "last_activity_date": 1509499556, "creation_date": 1509499556, "answer_id": 47046900, "question_id": 47046365, "link": "https://stackoverflow.com/questions/47046365/cant-change-my-pointers-reference/47046900#47046900", "title": "Can&#39;t change my pointers reference", "body": "<p>Just like everyone else has said, you should change:</p>\n\n<pre><code>hostData = (float *)calloc(n, sizeof(float)); \n</code></pre>\n\n<p>to:</p>\n\n<pre><code>*host_Data = (float *)calloc(n, sizeof(float));\n</code></pre>\n\n<p>The reason for this is based on the way memory works in C. Each instance of a function is given it's own stack for its variables, which is garbage collected once the instance of the function is finished. This means that any value saved in your <code>randgen</code> variables from will be deleted at the end. You pass in the address of the original <code>hostdata</code> variable from the main function to your <code>randgen</code> function as <code>host_data</code> so that you can alter the data inside the original <code>hostdata</code> variable from main's stack. Since <code>hostdata</code> in main is equal to NULL, setting <code>hostData</code> equal to <code>*host_data</code>, which is the equivalent of saying \"go to the address stored in <code>host_data</code> and take that value and save it in <code>hostData</code>\", makes it also equal to NULL. Then, when you assign the return value of calloc to <code>hostData</code>, you are saving that value on the functions's stack, which is then deleted after the function finishes. On the other hand, when you assign the return value of calloc to <code>*host_data</code>, you are saying \"go to the address stored in <code>host_data</code>, which is the address of <code>hostdata</code>, and save the value there, so now you have access to the calloced memory in your main function.</p>\n"}], "owner": {"reputation": 123, "user_id": 5090433, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Dr_RyEuLqEo/AAAAAAAAAAI/AAAAAAAAAcY/KZ0dOvq8Lko/photo.jpg?sz=128", "display_name": "user5090433", "link": "https://stackoverflow.com/users/5090433/user5090433"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 47046900, "answer_count": 3, "score": -2, "last_activity_date": 1509543240, "creation_date": 1509495263, "last_edit_date": 1509543240, "question_id": 47046365, "link": "https://stackoverflow.com/questions/47046365/cant-change-my-pointers-reference", "title": "Can&#39;t change my pointers reference", "body": "<p>I want to declare a pointer, pass it into a function and use that function to allocate memory space for that pointer and to use later.</p>\n\n<p>Can someone help me find out where I went wrong?</p>\n\n<pre><code>int main()\n{\n    float * hostdata=NULL;\n\n    int size = 10;\n    randgen(&amp;hostdata, size);\n    /* Show result */\n    for (int i = 0; i &lt; size; i++) {\n        printf(\"%1.4f \", hostdata[i]);// here goes wrong, i got a exception here.\n    }\n    free(hostdata);\n\n    return 0;\n}\n\nint randgen(float ** host_Data,int size_n) {\n    size_t n = size_n;\n    size_t i;\n\n    float * hostData = *host_Data;// **I went wrong at this line, i just tell system that , declare a float pointer and it's value is the same value as host_data ,  nothing more. so , hostdata in main function still remain NULL.**\n\n    curandGenerator_t gen;\n    float *devData;\n    /* Allocate n floats on host */\n    hostData = (float *)calloc(n, sizeof(float)); \n   /* Allocate n floats on device */\n    CUDA_CALL(cudaMalloc((void **)&amp;devData, n * sizeof(float))); \n   /* Create pseudo-random number generator */ \n    CURAND_CALL(curandCreateGenerator(&amp;gen, CURAND_RNG_PSEUDO_DEFAULT));\n   /* Set seed */ \n    CURAND_CALL(curandSetPseudoRandomGeneratorSeed(gen, 1234ULL));\n   /* Generate n floats on device */\n    CURAND_CALL(curandGenerateUniform(gen, devData, n)); \n   /* Copy device memory to host */ \n   CUDA_CALL(cudaMemcpy(hostData, devData, n * sizeof(float), \n  cudaMemcpyDeviceToHost)); \n\n    /* Cleanup */\n    CURAND_CALL(curandDestroyGenerator(gen));\n    CUDA_CALL(cudaFree(devData));\n\n    return EXIT_SUCCESS;\n}\n</code></pre>\n"}, {"tags": ["c", "function", "sdl"], "comments": [{"owner": {"reputation": 6746, "user_id": 1143634, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7lca.png?s=128&g=1", "display_name": "StaceyGirl", "link": "https://stackoverflow.com/users/1143634/staceygirl"}, "edited": false, "score": 3, "creation_date": 1509494721, "post_id": 47046276, "comment_id": 81039856, "body": "If it quits to <code>main</code>, then what is your problem? Why don&#39;t you just return from <code>main</code> too?"}, {"owner": {"reputation": 31, "user_id": 8865298, "user_type": "registered", "profile_image": "https://graph.facebook.com/1342112332583406/picture?type=large", "display_name": "Gergo Miklos", "link": "https://stackoverflow.com/users/8865298/gergo-miklos"}, "reply_to_user": {"reputation": 6746, "user_id": 1143634, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7lca.png?s=128&g=1", "display_name": "StaceyGirl", "link": "https://stackoverflow.com/users/1143634/staceygirl"}, "edited": false, "score": 0, "creation_date": 1509495188, "post_id": 47046276, "comment_id": 81039978, "body": "I made a game (who wants to be a millionare), so this would be really annoying for users. Furthermore this want to be a homework,  and i dont want to send it in with this annoying behaviour."}, {"owner": {"reputation": 6746, "user_id": 1143634, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7lca.png?s=128&g=1", "display_name": "StaceyGirl", "link": "https://stackoverflow.com/users/1143634/staceygirl"}, "edited": false, "score": 0, "creation_date": 1509495272, "post_id": 47046276, "comment_id": 81039995, "body": "I mean what issue do you have if you are able to return to <code>main</code> function? You should be able to exit terminate program just by returning from <code>main</code>."}, {"owner": {"reputation": 31, "user_id": 8865298, "user_type": "registered", "profile_image": "https://graph.facebook.com/1342112332583406/picture?type=large", "display_name": "Gergo Miklos", "link": "https://stackoverflow.com/users/8865298/gergo-miklos"}, "reply_to_user": {"reputation": 6746, "user_id": 1143634, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7lca.png?s=128&g=1", "display_name": "StaceyGirl", "link": "https://stackoverflow.com/users/1143634/staceygirl"}, "edited": false, "score": 0, "creation_date": 1509495375, "post_id": 47046276, "comment_id": 81040027, "body": "and when you click on the &quot;x&quot; while the program is in a function, it returns to the main and execute the rest part of it with bad datas. So not just annoying."}, {"owner": {"reputation": 6746, "user_id": 1143634, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7lca.png?s=128&g=1", "display_name": "StaceyGirl", "link": "https://stackoverflow.com/users/1143634/staceygirl"}, "edited": false, "score": 0, "creation_date": 1509495444, "post_id": 47046276, "comment_id": 81040046, "body": "So why don&#39;t you return from <code>main</code> instead of executing that code? Just <code>return 0;</code> or <code>return EXIT_SUCCESS;</code>."}, {"owner": {"reputation": 15473, "user_id": 744720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65030f1bd22dbb4d1e6976cfac08a1c5?s=128&d=identicon&r=PG", "display_name": "keltar", "link": "https://stackoverflow.com/users/744720/keltar"}, "edited": false, "score": 0, "creation_date": 1509505845, "post_id": 47046276, "comment_id": 81042530, "body": "@GergoMiklos it reads like you have event loop in main too. If so, this is horribly wrong. &quot;Simple&quot; answer would be something like <code>exit(1)</code> call, but it is most likely not &quot;correct&quot; one."}, {"owner": {"reputation": 453, "user_id": 5807228, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6184dc053ba925e032e00c01b01d7c7a?s=128&d=identicon&r=PG&f=1", "display_name": "Jul10", "link": "https://stackoverflow.com/users/5807228/jul10"}, "reply_to_user": {"reputation": 15473, "user_id": 744720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65030f1bd22dbb4d1e6976cfac08a1c5?s=128&d=identicon&r=PG", "display_name": "keltar", "link": "https://stackoverflow.com/users/744720/keltar"}, "edited": false, "score": 0, "creation_date": 1509642209, "post_id": 47046276, "comment_id": 81110740, "body": "I share the opinion of @keltar to have many event loops, but if you want to obtain an immediate and a bit &quot;rude&quot; exit to the program maybe adding the <code>SDL_Quit();</code> function to the SDL_QUIT case of the switch can solve your problem."}], "answers": [{"tags": [], "owner": {"reputation": 30210, "user_id": 735446, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/9dfecf03d8106728f8bb324b201ebf1f?s=128&d=identicon&r=PG", "display_name": "Petr Abdulin", "link": "https://stackoverflow.com/users/735446/petr-abdulin"}, "is_accepted": true, "score": 1, "last_activity_date": 1509688724, "creation_date": 1509688724, "answer_id": 47089343, "question_id": 47046276, "link": "https://stackoverflow.com/questions/47046276/c-and-sdl-quit-from-function/47089343#47089343", "title": "C and SDL quit from function", "body": "<p>As already mentioned in comments you, most probably, have multiple event handling loops, which is usually incorrect design. You game general layout should be something like:</p>\n\n<pre><code>int main(int argc, char* argv[]) {\n\n    // do initialize stuff\n\n    bool run = true;\n    SDL_Event evt;\n\n    // game loop\n    while (run) {\n        // process OS events\n        while(SDL_PollEvent(&amp;evt) != 0) {\n            switch (evt.type) {\n                case SDL_QUIT:    \n                  run = false;        \n                  break;\n            }\n        }\n\n        update();\n        render();\n    }\n\n    // clean up\n    SDL_Quit();\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 8865298, "user_type": "registered", "profile_image": "https://graph.facebook.com/1342112332583406/picture?type=large", "display_name": "Gergo Miklos", "link": "https://stackoverflow.com/users/8865298/gergo-miklos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 769, "favorite_count": 0, "accepted_answer_id": 47089343, "answer_count": 1, "score": 0, "last_activity_date": 1509688724, "creation_date": 1509494552, "question_id": 47046276, "link": "https://stackoverflow.com/questions/47046276/c-and-sdl-quit-from-function", "title": "C and SDL quit from function", "body": "<p>I use C and SDL 2.0, but i have a problem, this(when you click on the window's \"x\" it quits):</p>\n\n<pre><code>void function(SDL_Surface *screen) {\n  SDL_Event event;\n  bool quit=false;\n    while (!quit) {\n            SDL_WaitEvent(&amp;event);\n\n            switch (event.type) {\n               case...\n\n               case SDL_QUIT:    \n                  quit = true;        \n                  break;\n            }\n}\n</code></pre>\n\n<p>This is working, but not well. If this is in a function like this, it quits only to the main(), so I need to click on \"x\" again to quit from the whole program.\nHow can I solve it? (I want to quit from the whole program everytime, does not matter if it's in a function or not).</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1509494026, "post_id": 47046175, "comment_id": 81039674, "body": "There&#39;s a better way to do everything else in that program, but no, <code>printf(&quot;%d&quot;)</code> is a perfectly fine way to print the decimal value of a number."}, {"owner": {"reputation": 35, "user_id": 8595552, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/1864164660576213/picture?type=large", "display_name": "Trevor Good", "link": "https://stackoverflow.com/users/8595552/trevor-good"}, "reply_to_user": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1509494083, "post_id": 47046175, "comment_id": 81039690, "body": "I mean more so the way that I loop over the array and count the binary values. It seems like to many if statements."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1509494150, "post_id": 47046175, "comment_id": 81039710, "body": "Your instincts there are good...yes, it&#39;s too much repetition. Use a switch, or a loop."}], "answers": [{"tags": [], "owner": {"reputation": 1717, "user_id": 8690361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3678a10e6bc70a207a4a458c76b04c08?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/8690361/steve"}, "is_accepted": true, "score": 2, "last_activity_date": 1509494091, "creation_date": 1509494091, "answer_id": 47046207, "question_id": 47046175, "link": "https://stackoverflow.com/questions/47046175/c-array-of-binary-values/47046207#47046207", "title": "C array of binary values", "body": "<pre><code>int multiplier = 1;\nint value = 0;\nfor (int i = 7; i &gt;= 0; i--)\n{\n    value += (numbers[i] * multiplier);\n    multiplier *= 2;\n}\n\nprintf(\"%d\\n\", value); \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1509523564, "creation_date": 1509523564, "answer_id": 47050586, "question_id": 47046175, "link": "https://stackoverflow.com/questions/47046175/c-array-of-binary-values/47050586#47050586", "title": "C array of binary values", "body": "<p>You can write a separate function that will convert an array of binary digits to a number. For example</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nunsigned long long int array_to_binary(const unsigned int a[], size_t n)\n{\n    const unsigned long long Base = 2;\n    unsigned long long int binary = 0;\n\n    for (size_t i = 0; i &lt; n; i++)\n    {\n        binary = Base * binary + a[i];\n    }\n\n    return binary;\n}\n\nint main( void )\n{\n    unsigned int a[] = { 0, 1, 1, 0, 1, 0, 0, 1 };\n\n    printf(\"array_to_binary( a, sizeof( a ) / sizeof( *a ) ) = %lld\\n\",\n        array_to_binary(a, sizeof(a) / sizeof(*a)));\n\n    return 0;\n}\n</code></pre>\n\n<p>The program output is</p>\n\n<pre><code>array_to_binary( a, sizeof( a ) / sizeof( *a ) ) = 105\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 8595552, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/1864164660576213/picture?type=large", "display_name": "Trevor Good", "link": "https://stackoverflow.com/users/8595552/trevor-good"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 405, "favorite_count": 0, "accepted_answer_id": 47046207, "answer_count": 2, "score": 0, "last_activity_date": 1509523564, "creation_date": 1509493834, "question_id": 47046175, "link": "https://stackoverflow.com/questions/47046175/c-array-of-binary-values", "title": "C array of binary values", "body": "<p>This is my c code that is within the function main: </p>\n\n<pre><code>int numbers[8] = {0,1,1,0,1,0,0,1}; \nint i = 7;\nint value = 0;\nwhile (i &gt; -1){\n   if (i == 7){\n      if (numbers[i] == 1){\n         value += 1; \n      }\n   } else if (i == 6){\n      if (numbers[i] == 1){\n           value += 2;\n      }\n  } else if (i == 5){\n      if (numbers[i] == 1){\n            value += 4;\n      }\n  } else if (i == 4){\n      if (numbers[i] == 1){\n            value += 8;\n      }\n  } else if (i == 3){\n      if (numbers[i] == 1){\n             value += 16;\n      }\n  } else if (i == 2){\n      if (numbers[i] == 1){\n         value += 32;\n      }\n } else if (i == 1){\n      if (numbers[i] == 1){\n           value += 64;\n     }\n } else if (i == 0){\n     if (numbers[i] == 1){\n         value += 128;\n     }\n  }\n  i--; \n}\nprintf(\"%d\\n\", value); \n</code></pre>\n\n<p>Is there a better way to display the decimal number that is within the array numbers? The array numbers represents the decimal value: 105, in binary. </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 1, "creation_date": 1509492867, "post_id": 47045998, "comment_id": 81039387, "body": "<a href=\"https://stackoverflow.com/a/20638659/4944425\">stackoverflow.com/a/20638659/4944425</a>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1509492889, "post_id": 47045998, "comment_id": 81039391, "body": "Experiment with some small numbers, such as <code>42</code> and see what happens when you print out values at each step. What does your Tutor say?"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1509494468, "post_id": 47045998, "comment_id": 81039798, "body": "and google &#39;c % operator&#39;"}], "answers": [{"tags": [], "owner": {"reputation": 44, "user_id": 8604676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c83d7a5dfff1f48c7f403ec89c8f31d?s=128&d=identicon&r=PG&f=1", "display_name": "Jongmin Lee", "link": "https://stackoverflow.com/users/8604676/jongmin-lee"}, "is_accepted": true, "score": 0, "last_activity_date": 1509493091, "creation_date": 1509493091, "answer_id": 47046073, "question_id": 47045998, "link": "https://stackoverflow.com/questions/47045998/c-programming-number-reverse/47046073#47046073", "title": "C Programming &quot;Number Reverse&quot;", "body": "<p>'While loop' repeats the number of entered numbers.</p>\n\n<p>'num%10' means the remainder of num divided by 10. This is the process to know the numbers at the end.</p>\n\n<p>For example, if you enter '123' then while loop will repeat 3 times.</p>\n\n<p>The first step,  reverse -> 3, num -> 12</p>\n\n<p>Second, reverse -> 30 -> 32, num -> 1</p>\n\n<p>Third, reverse -> 320 -> 321, num -> 0</p>\n\n<p>Therefore you can get the reverse number!</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7211554, "user_type": "registered", "profile_image": "https://graph.facebook.com/1132442676808861/picture?type=large", "display_name": "Kuba Gwizda\u0142a", "link": "https://stackoverflow.com/users/7211554/kuba-gwizda%c5%82a"}, "is_accepted": false, "score": 0, "last_activity_date": 1509493978, "creation_date": 1509493978, "answer_id": 47046195, "question_id": 47045998, "link": "https://stackoverflow.com/questions/47045998/c-programming-number-reverse/47046195#47046195", "title": "C Programming &quot;Number Reverse&quot;", "body": "<p>In your code <code>while</code> loop is the place where the digits of the entered number get reversed and stored as another number - <code>reverse</code>. In order to do that the last digits of the original number need to be accessed first. The <code>%</code> modulo operator returns the remainder of the division. Since you are dividing the original number by 10 you get the last digit of it, which is the remainder. We need to store that digit as the first of the reversed number and albo somehow get to the next digits of the original number. To store consequtive digits you multiply currently existing reversed number by 10 and add the next digit. That way you add next digit to the right of <code>reverse</code>, eventually, after adding all digits, getting the complete reversed number. Getting to the next digits of the original number uses the property of the division <code>/</code> operator which leaves the quotient of the division. When dividing by 10 it \"cuts off\" the last digit of the given number. That also explains the condition in the <code>while</code> loop: when your number becomes 0 it means you have gone through all of its digits. </p>\n"}], "owner": {"reputation": 71, "user_id": 8473525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f39b8f7efff6206e7ae19179119ec947?s=128&d=identicon&r=PG&f=1", "display_name": "hobaa", "link": "https://stackoverflow.com/users/8473525/hobaa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 630, "favorite_count": 0, "closed_date": 1509523845, "accepted_answer_id": 47046073, "answer_count": 2, "score": -2, "last_activity_date": 1509493978, "creation_date": 1509492565, "question_id": 47045998, "link": "https://stackoverflow.com/questions/47045998/c-programming-number-reverse", "closed_reason": "Needs more focus", "title": "C Programming &quot;Number Reverse&quot;", "body": "<p>I have a small simple school project for c programming. I am supposed to write a number and get the reverse of it and I couldn't understand how this code works. So, I need someone to explain to me what happens in the while loop, and why we use these operations, and whats %10?</p>\n\n<p>Thanks!</p>\n\n<pre><code>/* Reverse number using while loop */\n\n#include&lt;stdio.h&gt;\nint main()\n{\n    int num, reverse=0;\n    scanf(\"%d\",&amp;num);\n    while(num &gt; 0)\n    {\n        reverse= reverse*10;\n        reverse = reverse + (num%10);\n        num = num/10;\n    }\n    printf(\"%d\",reverse);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1509491950, "post_id": 47045867, "comment_id": 81039136, "body": "The two pointer variables <code>*name</code> and <code>*name2</code> both point to the same memory allocated. When you <code>free</code> that memory, neither variable will point to a valid memory allocation."}, {"owner": {"reputation": 12557, "user_id": 1270789, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/FXwoB.png?s=128&g=1", "display_name": "Ken Y-N", "link": "https://stackoverflow.com/users/1270789/ken-y-n"}, "edited": false, "score": 1, "creation_date": 1509492106, "post_id": 47045867, "comment_id": 81039185, "body": "I&#39;d just like to point out that you shouldn&#39;t cast the return from <code>malloc()</code>, and by definition <code>sizeof(char)</code> is always 1, so <code>char * name2 = malloc(100);</code> is sufficient."}, {"owner": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "reply_to_user": {"reputation": 177576, "user_id": 8620333, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WSmLn.png?s=128&g=1", "display_name": "Temani Afif", "link": "https://stackoverflow.com/users/8620333/temani-afif"}, "edited": false, "score": 2, "creation_date": 1509492441, "post_id": 47045867, "comment_id": 81039261, "body": "@TemaniAfif I prefer <code>sizeof(*name2)</code>"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1509492541, "post_id": 47045867, "comment_id": 81039283, "body": "If you want <code>name</code> and <code>name2</code> to point to different copies of the same string, then you would need to allocate (and later free) <code>name</code> separately from <code>name2</code>.  You might copy a string into <code>name2</code> with <code>strcpy()</code> and then copy the string to <code>name</code>, also with <code>strcpy()</code>.  But as it stands, you&#39;re OK as long as you don&#39;t think that the string was copied by the assignment.  Only the pointer value in <code>name</code> was changed; no other copying occurred."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 177576, "user_id": 8620333, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WSmLn.png?s=128&g=1", "display_name": "Temani Afif", "link": "https://stackoverflow.com/users/8620333/temani-afif"}, "edited": false, "score": 0, "creation_date": 1509589846, "post_id": 47045867, "comment_id": 81081412, "body": "@TemaniAfif <code>name2 = malloc(sizeof *name2 * 100);</code> is even easier to code correctly, review and maintain."}], "answers": [{"tags": [], "owner": {"reputation": 494, "user_id": 3764280, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001208043450/picture?type=large", "display_name": "segfault", "link": "https://stackoverflow.com/users/3764280/segfault"}, "is_accepted": false, "score": 2, "last_activity_date": 1509492037, "creation_date": 1509492037, "answer_id": 47045922, "question_id": 47045867, "link": "https://stackoverflow.com/questions/47045867/is-this-code-correct-or-do-i-have-to-allocate-name-before-making-it-equal-to-nam/47045922#47045922", "title": "Is this code correct or do I have to allocate name before making it equal to name2", "body": "<p>A char * is a pointer to a memory location.\nThus when you do name = name2 , all c does is it that both now reference the same memory location.</p>\n"}], "owner": {"reputation": 1, "user_id": 8865278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a02b52a90e943448114d69a92556388?s=128&d=identicon&r=PG&f=1", "display_name": "gonc.M", "link": "https://stackoverflow.com/users/8865278/gonc-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1509492400, "creation_date": 1509491767, "last_edit_date": 1509491848, "question_id": 47045867, "link": "https://stackoverflow.com/questions/47045867/is-this-code-correct-or-do-i-have-to-allocate-name-before-making-it-equal-to-nam", "title": "Is this code correct or do I have to allocate name before making it equal to name2", "body": "<pre><code>char * name = NULL;\nchar * name2 = (char*)malloc(100*sizeof(char));\n\nname = name2; \n</code></pre>\n"}, {"tags": ["c", "arrays", "loops", "if-statement", "scanf"], "comments": [{"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 3, "creation_date": 1509491606, "post_id": 47045799, "comment_id": 81039038, "body": "<a href=\"https://stackoverflow.com/a/2979217/7076153\"><code>fflush(stdin)</code> is UB</a>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1509491772, "post_id": 47045799, "comment_id": 81039085, "body": "In <code>if(ary[0]&lt;ary[x])</code> the first element <code>ary[0]</code> has an undefined value."}], "answers": [{"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 2, "last_activity_date": 1509493210, "last_edit_date": 1509493210, "creation_date": 1509491889, "answer_id": 47045888, "question_id": 47045799, "link": "https://stackoverflow.com/questions/47045799/printing-biggest-even-number-with-multiple-scanf/47045888#47045888", "title": "Printing biggest even number with multiple scanf", "body": "<p>Before the loop initialize <code>ary[0]</code> for example the following way (otherwise uninitialized value of <code>ary[0]</code> is used in the program)</p>\n\n<pre><code>ary[0] = 1;\n</code></pre>\n\n<p>then substitute these if statements</p>\n\n<pre><code>    if(ary[x]%2==0)\n    {\n        if(ary[0]&lt;ary[x])\n</code></pre>\n\n<p>for</p>\n\n<pre><code>if( ary[x]%2==0 &amp;&amp; ( x == 1 || ary[0]&lt;ary[x] ) )\n</code></pre>\n\n<p>And at last write</p>\n\n<pre><code>if ( ary[0] != 1 ) printf(\"%d\",ary[0]);\n</code></pre>\n\n<p>Take into account that this call</p>\n\n<pre><code>fflush(stdin);\n</code></pre>\n\n<p>has undefined behavior and should be removed.</p>\n\n<p>In fact there is no need to declare an array. Without the array the program can look like</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main( void )\n{\n    unsigned int n;\n    int max_even = 1;\n\n    printf(\"How many numbers are you going to enter: \");\n    scanf(\"%u\", &amp;n);\n\n    int x;\n\n    for (unsigned int i = 0; i &lt; n &amp;&amp; scanf( \"%d\", &amp;x ) == 1; i++)\n    {\n        if ((x % 2) == 0 &amp;&amp; (max_even == 1 || max_even &lt; x))\n        {\n            max_even = x;\n        }\n    }\n\n    if (max_even != 1)\n    {\n        printf(\"maximum entered even number is %d\\n\", max_even);\n    }\n    else\n    {\n        puts(\"None even number was enetered\");\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Its output might look like</p>\n\n<pre><code>How many numbers are you going to enter: 10\n0 1 2 3 4 5 6 7 8 9\nmaximum entered even number is 8\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 0, "last_activity_date": 1509533114, "last_edit_date": 1509533114, "creation_date": 1509492392, "answer_id": 47045973, "question_id": 47045799, "link": "https://stackoverflow.com/questions/47045799/printing-biggest-even-number-with-multiple-scanf/47045973#47045973", "title": "Printing biggest even number with multiple scanf", "body": "<p>Your code does not work because <code>ary[0]</code> is not yet initialized the first time you compare its value to the value read, furthermore it might not be even for the other comparisons.</p>\n\n<p>You should use an indicator telling you whether an even value has been seen.</p>\n\n<p>Here is a solution:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(void) {\n    int has_even = 0, max_even = 0, value, amount, x;\n\n    if (scanf(\"%d\", &amp;amount) != 1)\n        return 1;\n    for (x = 0; x &lt; amount; x++) {\n        if (scanf(\"%d\", &amp;value) != 1)\n            break;\n        if (!has_even || value &gt; max) {\n            max_even = value;\n            has_even = 1;\n        }\n    }\n    if (has_even)\n        printf(\"%d\\n\", max_even);\n    else\n        printf(\"no even value\\n\");\n\n    getchar();\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 36, "user_id": 8865213, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/b1554c62bf1d05a4a9c48754a6619c17?s=128&d=identicon&r=PG", "display_name": "user8865213", "link": "https://stackoverflow.com/users/8865213/user8865213"}, "is_accepted": false, "score": 0, "last_activity_date": 1509500722, "creation_date": 1509500722, "answer_id": 47047024, "question_id": 47045799, "link": "https://stackoverflow.com/questions/47045799/printing-biggest-even-number-with-multiple-scanf/47047024#47047024", "title": "Printing biggest even number with multiple scanf", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main() {\n int ary[100];\n int ary[0 = 0;\n int x, y = 0;\n int amount;\n scanf(\"%d\", &amp;amount);\n fflush(stdin);\n for (x = 1; x &lt;= amount; x++) {\n    scanf(\"%d\", &amp;ary[x]);\n    if (ary[x] % 2 == 0) {\n        if (ary[0] &lt; ary[x]) {\n            ary[0] = ary[x];\n        }\n    }\n}\nprintf(\"%d\", ary[0]);\n\ngetchar();\nreturn 0;\n</code></pre>\n\n<p>}</p>\n"}], "owner": {"reputation": 21, "user_id": 8865253, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ageTS0oSsro/AAAAAAAAAAI/AAAAAAAABfc/RcVMtUbLOU0/photo.jpg?sz=128", "display_name": "Suraenhom", "link": "https://stackoverflow.com/users/8865253/suraenhom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1509533114, "creation_date": 1509491309, "last_edit_date": 1509492081, "question_id": 47045799, "link": "https://stackoverflow.com/questions/47045799/printing-biggest-even-number-with-multiple-scanf", "title": "Printing biggest even number with multiple scanf", "body": "<p>I would like to get an output of the biggest even number. but when I input <code>1 2 3</code> (3 calls to <code>scanf</code>) the output is <code>4</code>. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main() {\n    int ary[100];\n    int x, y = 0;\n    int amount;\n    scanf(\"%d\", &amp;amount);\n    fflush(stdin);\n    for (x = 1; x &lt;= amount; x++) {\n        scanf(\"%d\", &amp;ary[x]);\n        if (ary[x] % 2 == 0) {\n            if (ary[0] &lt; ary[x]) {\n                ary[0] = ary[x];\n            }\n        }\n    }\n    printf(\"%d\", ary[0]);\n\n    getchar();\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 4, "creation_date": 1509491139, "post_id": 47045747, "comment_id": 81038918, "body": "As you said, &quot;<i>Any pointers will be of help</i>&quot;"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1509492701, "post_id": 47045747, "comment_id": 81039339, "body": "This isn&#39;t a C-problem, per-se, it is an OS issue and virtual memory manager issue. Modern OS&#39;s don&#39;t allow Real Mode memory access. (granted some APIs do for specialized hardware, graphics, etc.) But from a secure-computing standpoint, the last two decades of progress have been designed to prevent exactly this type of direct access in favor of Protected Mode where you interact with a hardware API instead of the hardware. Can you set <a href=\"https://en.wikipedia.org/wiki/Real_mode\" rel=\"nofollow noreferrer\">Real mode</a> in your simulator and where the user-space addressing starts?"}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 1, "creation_date": 1509493463, "post_id": 47045747, "comment_id": 81039531, "body": "A compiler with optimizations enabled will avoid storing the value of the <code>p</code> variable if possible. You shouldn&#39;t perform such micro-optimizations unless you have seen the generated assembly and know that there is a better way."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1509494514, "post_id": 47045747, "comment_id": 81039809, "body": "@David C. Rankin now all programs run in hosted environment. 99% of my ones do not (I do mostly the bare metal embedded projects)."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1509505419, "post_id": 47045747, "comment_id": 81042415, "body": "Yes, I see the need and benefit, especially for embedded systems. It is a ironic how much effort was spent trying to prevent real mode addressing just to find the need reemerge as software begins running on more and more devices and serving different purposes. It wasn&#39;t that long ago you had to shuffle punch-cards into a card reader just to get a FORTRAN program to run...."}], "answers": [{"comments": [{"owner": {"reputation": 107, "user_id": 4129249, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2d8bfd170c10918b3a3465eefbbcf6b7?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Mathews", "link": "https://stackoverflow.com/users/4129249/andrew-mathews"}, "edited": false, "score": 0, "creation_date": 1509491342, "post_id": 47045772, "comment_id": 81038979, "body": "I will soon run it on the simulator, and report back if it is taking that extra cycle. Thank you."}], "tags": [], "owner": {"reputation": 1190, "user_id": 3207828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1EPkw.jpg?s=128&g=1", "display_name": "Dan Korn", "link": "https://stackoverflow.com/users/3207828/dan-korn"}, "is_accepted": false, "score": 2, "last_activity_date": 1509491099, "creation_date": 1509491099, "answer_id": 47045772, "question_id": 47045747, "link": "https://stackoverflow.com/questions/47045747/how-to-directly-access-a-memory-address-without-using-a-pointer/47045772#47045772", "title": "How to directly access a memory address without using a pointer?", "body": "<p>I don't know if you can do it without a pointer at all, but if you don't want to declare a pointer on a separate line, you could do this:</p>\n\n<pre><code>*(int*)(0xffff) = 3;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 1, "creation_date": 1509493341, "post_id": 47046040, "comment_id": 81039501, "body": "A decent optimizing compiler will automatically use the best instruction for the job. There&#39;s no reason to use inline assembly for this."}, {"owner": {"reputation": 814, "user_id": 3664123, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/s3okH.png?s=128&g=1", "display_name": "vasia", "link": "https://stackoverflow.com/users/3664123/vasia"}, "reply_to_user": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1509493910, "post_id": 47046040, "comment_id": 81039645, "body": "You are right, I didn&#39;t know it was so easy to do it directly."}], "tags": [], "owner": {"reputation": 814, "user_id": 3664123, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/s3okH.png?s=128&g=1", "display_name": "vasia", "link": "https://stackoverflow.com/users/3664123/vasia"}, "is_accepted": false, "score": 0, "last_activity_date": 1509493791, "last_edit_date": 1509493791, "creation_date": 1509492902, "answer_id": 47046040, "question_id": 47045747, "link": "https://stackoverflow.com/questions/47045747/how-to-directly-access-a-memory-address-without-using-a-pointer/47046040#47046040", "title": "How to directly access a memory address without using a pointer?", "body": "<p>If you are concerned with the extra cycles, you can use some inline assembly. Typically, the MOV instruction (MOV r/m32, imm32) allows you to move the immediate value into the register, or into the address pointed to by the register. If you wish to bypass the use of the register completely, you could use the C6 instruction (<a href=\"https://stackoverflow.com/questions/7408983/is-there-an-x86-opcode-for-moving-an-immediate-byte-to-a-direct-memory-location\">from this post</a>).</p>\n\n<pre><code>  c6        04         25      0xffff     3\n  opcode    modr/m     sib     address    immediate\n</code></pre>\n\n<p>Assuming you are using an x86 architecture, you can include that instruction in inline assembly in your source file.</p>\n"}], "owner": {"reputation": 107, "user_id": 4129249, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2d8bfd170c10918b3a3465eefbbcf6b7?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Mathews", "link": "https://stackoverflow.com/users/4129249/andrew-mathews"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 680, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1509493791, "creation_date": 1509490910, "question_id": 47045747, "link": "https://stackoverflow.com/questions/47045747/how-to-directly-access-a-memory-address-without-using-a-pointer", "title": "How to directly access a memory address without using a pointer?", "body": "<p>Below is my code.\nPlease note that I am not running this code on a normal machine, but on an architecture simulator (gem5).</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main() \n{\n   int *p;\n   int x;\n   p = &amp;x;\n   p[0] = 3;\n   // *(0xffff) = 6;\n   return 0;\n}\n</code></pre>\n\n<p>If I uncomment the line, I get a compiler error (which is expected) \"indirection requires pointer operand\".\nSince I am not running it on an actual machine, but on a simulator, I have control over how the hardware behaves, and the address space. \nI want to store value 6 in address 0xffff. One way to do this is:</p>\n\n<pre><code>int *p;\np = (int *)0xffff;\np[0] = 6;\n</code></pre>\n\n<p>Please note that this will not result in a segmentation fault for me, because I am running it on a simulator, and I control the address space.\nBut, this is an inefficient way, because every time variable 'p' should be accessed, get 0xffff, and then store 6. Accessing variable 'p' even if declared as register, will take 1 cycle which is costly for me in the long run.\nSince I know 'p' will always have 0xffff, can't I write something like</p>\n\n<pre><code>*(0xffff) = 3;\n</code></pre>\n\n<p>How do I allow the compiler to generate this code?\nAny pointers will be of help.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 31483, "user_id": 502381, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/74b99e687909be449e0130a50950eac7?s=128&d=identicon&r=PG&f=1", "display_name": "JJJ", "link": "https://stackoverflow.com/users/502381/jjj"}, "edited": false, "score": 0, "creation_date": 1509490108, "post_id": 47045596, "comment_id": 81038608, "body": "Calculating whether a year is a leap year is a very, very common homework task. You&#39;ll find literally hundreds if not thousands of solutions with a simple Google search."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 2, "creation_date": 1509490895, "post_id": 47045596, "comment_id": 81038855, "body": "<i>OR is divisible by 100</i> -&gt; OR is divisible by 400"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1509491059, "post_id": 47045596, "comment_id": 81038893, "body": "stackoverflow.com is NOT for doing your homework for you.  However; &#39;google&#39; is your best friend is searching for answers to such questions."}], "answers": [{"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 0, "last_activity_date": 1509491444, "creation_date": 1509491444, "answer_id": 47045821, "question_id": 47045596, "link": "https://stackoverflow.com/questions/47045596/if-statemtents-identify-leap-year-and-date-day-code/47045821#47045821", "title": "if statemtents: Identify leap year and date day code", "body": "<p>There is no difficulty in implementing a function to test if a given year is a leap year in the proleptic gregorian calendar (applying the rules for the gregorian calendar even before its adoption):</p>\n\n<pre><code>int isleap(unsigned int year) {\n    return (year % 4) == 0 &amp;&amp; ((year % 100) != 0 || (year % 400) == 0));\n}\n</code></pre>\n\n<p>If you want a very efficient function, you may want to use a precomputed byte array for a range of common years and use the year as an index:</p>\n\n<pre><code>#define MAX_LEAP_YEAR  2100\nunsigned char isleap_array[MAX_LEAP_YEAR] = { ... };\n\nint last_isleap(unsigned int year) {\n    if (year &lt; MAX_LEAP_YEAR)\n        return isleap_array[year];\n    else\n        return isleap(year);\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8865206, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uV0GkEVBHjY/AAAAAAAAAAI/AAAAAAAAO3g/SBCn-2OdoEc/photo.jpg?sz=128", "display_name": "Mohamed-Ali Karaki", "link": "https://stackoverflow.com/users/8865206/mohamed-ali-karaki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1509500554, "creation_date": 1509489902, "last_edit_date": 1509500554, "question_id": 47045596, "link": "https://stackoverflow.com/questions/47045596/if-statemtents-identify-leap-year-and-date-day-code", "title": "if statemtents: Identify leap year and date day code", "body": "<p>I would like help on identifying the underlying pattern in this issue of mine. </p>\n\n<p>I am creating a program that identifies the day of year(for example. Jan. 1,2011 is day 1 and December 31 2011 is 365). December 31 2012 is day 366 because its a leap year. I would like help with being able to differentiate between leap years in code form. </p>\n\n<blockquote>\n  <p>A leap year is a leap year if it is divisible by 4 but not divisible by 100. or is divisible by 400.</p>\n</blockquote>\n\n<p>I cannot seem to grasp the most efficient way of writing this leap identifying function. I am using c in dev c compiler. If you can help me with a way of assigning a number to ever day of the year I would greatly appreciate it.</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 140, "user_id": 8524668, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/123478a1e020e5fd43928c0c105a4071?s=128&d=identicon&r=PG&f=1", "display_name": "Pouya", "link": "https://stackoverflow.com/users/8524668/pouya"}, "edited": false, "score": 0, "creation_date": 1509488762, "post_id": 47045379, "comment_id": 81038195, "body": "If you&#39;re writing C++, then you&#39;re making use of it&#39;s object-oriented and template features and that&#39;s nothing like what you would see in C."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 1, "creation_date": 1509488766, "post_id": 47045379, "comment_id": 81038198, "body": "declaration after use is bad in c and c++, the difference being that c will compile it with a warning, c++ will fatal it"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1509488768, "post_id": 47045379, "comment_id": 81038199, "body": "it&#39;s probably C, since <code>foo</code> has a default prototype (still bad practice)"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 1, "creation_date": 1509488818, "post_id": 47045379, "comment_id": 81038211, "body": "what does &quot;However, it does have a native boolean type.&quot; mean?"}, {"owner": {"reputation": 2181, "user_id": 5374560, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/4a81fcff611fbd1d0421683bdfff4c53?s=128&d=identicon&r=PG", "display_name": "Ethan", "link": "https://stackoverflow.com/users/5374560/ethan"}, "reply_to_user": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1509488960, "post_id": 47045379, "comment_id": 81038259, "body": "@pm100 see updated question"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 1, "creation_date": 1509489014, "post_id": 47045379, "comment_id": 81038283, "body": "Doesnt make it any clearer, your code makes not mention of &#39;bool&#39; or anything like it"}, {"owner": {"reputation": 3923, "user_id": 8309701, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S44bo.png?s=128&g=1", "display_name": "Chris Uzdavinis", "link": "https://stackoverflow.com/users/8309701/chris-uzdavinis"}, "edited": false, "score": 2, "creation_date": 1509489173, "post_id": 47045379, "comment_id": 81038335, "body": "An enum named &quot;bool&quot; would not compile in C++, since it&#39;s a reserved keyword.  If you see any C++ keywords used as variable names, it&#39;s definitely C and cannot be valid C++.  (Excluding the contextual keywords in c++ like &quot;override&quot; which only has meaning when declaring a function, and elsewhere is still allowed to be an ordinary identifier name.)"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1509489272, "post_id": 47045379, "comment_id": 81038373, "body": "Actually, C99 does have <a href=\"https://stackoverflow.com/questions/1608318/is-bool-a-native-c-type\">a native boolean type</a>."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1509489767, "post_id": 47045379, "comment_id": 81038516, "body": "If this was C99 or later it would use <code>_Bool</code>."}], "answers": [{"comments": [{"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1509488992, "post_id": 47045429, "comment_id": 81038274, "body": "How did you know this!? Also this is likely way more specific than the OP was looking for. But still, +1."}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 2, "creation_date": 1509489066, "post_id": 47045429, "comment_id": 81038303, "body": "You could also mention <code>void main</code> which is never c++."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 1, "creation_date": 1509489450, "post_id": 47045429, "comment_id": 81038426, "body": "@Fantastic Mr Fox - some people actually <i>read</i> the standards, and some of us have been doing so for <i>decades</i>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "reply_to_user": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1509489535, "post_id": 47045429, "comment_id": 81038454, "body": "@Fantastic It&#39;s not valid in C either, at least for hosted implementations - <a href=\"https://stackoverflow.com/questions/204476/what-should-main-return-in-c-and-c\" title=\"what should main return in c and c\">stackoverflow.com/questions/204476/&hellip;</a>"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1509489727, "post_id": 47045429, "comment_id": 81038510, "body": "@FantasticMrFox I <i>think</i> the same rules apply re. the <code>void</code> return type, i.e. it is allowed in a &quot;freestanding&quot; implementation. But I have to check the C89 standard for that."}], "tags": [], "owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "is_accepted": true, "score": 10, "last_activity_date": 1509490118, "last_edit_date": 1509490118, "creation_date": 1509488921, "answer_id": 47045429, "question_id": 47045379, "link": "https://stackoverflow.com/questions/47045379/how-to-recongnise-c-or-c/47045429#47045429", "title": "How to recongnise C or C++", "body": "<p>It uses <em>implicit function declarations</em> (for <code>foo()</code> and <code>printf()</code>, so if it is anything, it is C89. Implicit function declarations were never in C++, and were removed from C in C99.</p>\n\n<hr>\n\n<p>To answer the question \"how to recognise C or C++\", there is a great deal of C++ that isn't valid C, and there is a smaller amount of C that isn't valid C++. So a reasonable level of knowledge of both languages is needed.</p>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 4, "last_activity_date": 1509490672, "creation_date": 1509490672, "answer_id": 47045715, "question_id": 47045379, "link": "https://stackoverflow.com/questions/47045379/how-to-recongnise-c-or-c/47045715#47045715", "title": "How to recongnise C or C++", "body": "<p>The code you've shown is definitely not C++ (C++ doesn't allow implicit declarations), although it's not strictly correct C, either. The implicit <code>int</code> declaration of <code>foo</code> (which would only be valid in C89) is contradicted by the explicit <code>void</code> declaration/definition later - any decent C compiler should yell at you about this.  </p>\n\n<p>Also, <code>void</code> isn't a proper return type for <code>main</code> in either C or C++ (at least in a hosted implementation).   </p>\n\n<p>One really easy way to tell if code is C++ is to look at the standard headers.  If the headers don't have a trailing <code>.h</code>, like</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n</code></pre>\n\n<p>etc., then you're definitely looking at C++ code.  If the code uses the memory allocation operators <code>new</code> and <code>delete</code>, then you're definitely looking at C++ code.  If you see the scope resolution operator <code>::</code> anywhere, you're definitely looking at C++ code.  There are a few other C++-specific features (templates, lambdas, etc.) that are not found in C.  </p>\n\n<p>C++ doesn't allow variable-length arrays, while C99 and later do - if you see an array declaration where the size is given by a runtime variable, like</p>\n\n<pre><code>int size = 20;\nint arr[size];\n</code></pre>\n\n<p>then you're definitely looking at C99 or later.</p>\n\n<p>Unfortunately, that's where it stops being so easy.  C++ can use <code>stdio.h</code> routines, as well as <code>malloc</code> and <code>free</code> for memory management.  It's possible to write code that compiles as both C <em>and</em> C++, mainly by avoiding C++-specific syntax and keywords and by sticking with the C standard library.  </p>\n"}], "owner": {"reputation": 2181, "user_id": 5374560, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/4a81fcff611fbd1d0421683bdfff4c53?s=128&d=identicon&r=PG", "display_name": "Ethan", "link": "https://stackoverflow.com/users/5374560/ethan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 1, "accepted_answer_id": 47045429, "answer_count": 2, "score": -2, "last_activity_date": 1509494660, "creation_date": 1509488641, "last_edit_date": 1509494660, "question_id": 47045379, "link": "https://stackoverflow.com/questions/47045379/how-to-recongnise-c-or-c", "title": "How to recongnise C or C++", "body": "<p>I have some code, and I can't work out if it is written in C or C++.</p>\n\n<p>According to <a href=\"https://www.cprogramming.com/tutorial/c-vs-c++.html\" rel=\"nofollow noreferrer\">this article</a>:</p>\n\n<p>I believe that it is C, as there are functions which are declared after use eg.</p>\n\n<pre><code>void main() {\n    foo();\n}\n\nvoid foo() {\n    printf( \"Hello world\" );\n}\n</code></pre>\n\n<p>However, it does have a native boolean type - according to the website above:</p>\n\n<blockquote>\n  <p>C does not provide a native boolean type. You can simulate it using an\n  enum, though: typedef enum {FALSE, TRUE} bool;</p>\n</blockquote>\n\n<p>Any idea if the code would be C, C++ or something else? Or any common things to look out for?</p>\n\n<p>In addition, when I declare a variable outside a function then I have to write:</p>\n\n<pre><code>int test;\n</code></pre>\n\n<p>And then assign it a value in a function, instead of being able to do:</p>\n\n<pre><code>int test = 5;\n</code></pre>\n"}, {"tags": ["c", "string", "function", "parameter-passing"], "comments": [{"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 1, "creation_date": 1509488313, "post_id": 47045313, "comment_id": 81038009, "body": "<code>sizeof(str)</code> in this context <code>str</code> is a pointer."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1509488660, "post_id": 47045313, "comment_id": 81038151, "body": "people have not pointed this out. On your machine a pointer is 4 bytes long (32 bit). So <code>sizeof(str)</code> always return 4"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1509489007, "post_id": 47045313, "comment_id": 81038276, "body": "The <code>sizeof</code> operator returns the size of a <i>type</i>. It&#39;s not a function."}], "answers": [{"comments": [{"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1509488592, "post_id": 47045344, "comment_id": 81038126, "body": "or better - have getline allocate a buffer and return it"}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1509489827, "post_id": 47045344, "comment_id": 81038527, "body": "by the way, &quot;Reading stops after an EOF or a newline. If a newline is read, it is stored into the buffer. A terminating null byte (aq\\0aq) is stored after the last character in the buffer.&quot;, so <code>strchr()</code> could be remove just use the return value of <code>fgets()</code>."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1509490710, "post_id": 47045344, "comment_id": 81038796, "body": "@Stargateur: the <code>GetLine()</code> function reads a line into the destination array, and strips the newline. Long lines are truncated and the remaining characters are discarded, unlike <code>fgets()</code> which breaks long lines and returns the next fragment at the following call."}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1509491246, "post_id": 47045344, "comment_id": 81038946, "body": "@chqrlie I didn&#39;t well understand what you said but whatever never mind, I forget that <code>fgets()</code> don&#39;t return the number of characters read."}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": true, "score": 0, "last_activity_date": 1509488818, "last_edit_date": 1509488818, "creation_date": 1509488385, "answer_id": 47045344, "question_id": 47045313, "link": "https://stackoverflow.com/questions/47045313/c-function-received-strings-seem-to-always-have-4-spaces/47045344#47045344", "title": "C: Function received strings seem to always have 4 spaces", "body": "<p><code>fgets(str, sizeof(str), stdin);</code> is incorrect in function <code>GetLine</code> as the array is passed as a pointer to its first element. Hence <code>str</code> in <code>GetLine()</code> is a pointer, so <code>sizeof(str)</code> is not the size of the destination array, but merely the size of a pointer, 4 bytes on your system. </p>\n\n<p>You should instead pass the size of the array to <code>GetLine()</code> and use that as the size argument to <code>fgets()</code>.</p>\n\n<p>There are other problems in your code:</p>\n\n<ul>\n<li><p>you should test the return value of <code>fgets()</code> to properly detect end of file.</p></li>\n<li><p>you should make <code>DISCARD</code> an <code>int</code> so it can store <code>EOF</code> properly.</p></li>\n<li><p>you discard the newline from the end of the buffer with an inefficient and slightly incorrect method: there is a remote possibility that <code>strlen(str)</code> be <code>0</code>.  You could use this one liner:</p>\n\n<pre><code>str[strcspn(str, \"\\n\")] = '\\0';  // discard the newline if present.\n</code></pre>\n\n<p>Or you could use <code>strchr()</code>.</p></li>\n</ul>\n\n<p>Here is a corrected version:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nchar *GetLine(char str[], int size) {\n    if (fgets(str, size, stdin)) {\n        char *p = strchr(str, '\\n');\n        if (p != NULL) {\n            // This is for clearing the newline character\n            *p = '\\0';\n        } else {\n            int c;\n            while ((c = getchar()) != EOF &amp;&amp; c != '\\n')\n                continue;\n        }\n        return str;\n    }\n    return NULL;\n}\n\nint main(void) {\n    char MyString[51];\n\n    printf(\"Maximum size of the string in main: %i\\n\", (int)sizeof(MyString) - 1);\n    if (GetLine(MyString, sizeof(MyString)))\n        printf(\"Contents of the string: &gt;%s&lt;\\n\", MyString);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8816544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d56aa15427b02cc6f205c84ff0ed1e8?s=128&d=identicon&r=PG&f=1", "display_name": "Pedro Augusto", "link": "https://stackoverflow.com/users/8816544/pedro-augusto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "closed_date": 1509489365, "accepted_answer_id": 47045344, "answer_count": 1, "score": -1, "last_activity_date": 1509488818, "creation_date": 1509488233, "question_id": 47045313, "link": "https://stackoverflow.com/questions/47045313/c-function-received-strings-seem-to-always-have-4-spaces", "closed_reason": "Duplicate", "title": "C: Function received strings seem to always have 4 spaces", "body": "<p>As I was practicing the use of fgets() to read string from input, I found myself copying the same piece of code over and over, so I created a function to call every time I need to do it. Here is a simple example of how it works:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nvoid GetLine(char str[]) {\n    // This is the function, I added a printf() to better show what's happening\n    printf(\"Maximum size of the string in GetLine: %i\\n\", sizeof(str));\n    fgets(str, sizeof(str), stdin);\n\n    // This is for clearing the newline character\n    // either from the recently received string or from the input buffer\n    if (str[strlen(str)-1] == '\\n')\n        str[strlen(str)-1] = '\\0';\n    else {\n        char DISCARD;\n        while((DISCARD = getchar())!='\\n' &amp;&amp; DISCARD != EOF);\n    }\n}\n\nint main() {\n    char MyString[51];\n\n    printf(\"Maximum size of the string in main: %i\\n\", sizeof(MyString));\n    GetLine(MyString);\n\n    printf(\"Contents of the string: &gt;%s&lt;\\n\", MyString);\n\n    return 0;\n}\n</code></pre>\n\n<p>Here's the output:</p>\n\n<pre><code>Maximum size of the string in main: 51\nMaximum size of the string in GetLine: 4\nMy name is Pedro\nContents of the string: &gt;My &lt;\n</code></pre>\n\n<p>Notice how <code>str[]</code> only have 4 spaces, instead of being the size of the string passed to it.</p>\n\n<p>The workaround for this is pretty easy: make <code>GetLine()</code> also receive an integer that holds the size of the string, so it can read the correct number of characters without depending of <code>sizeof(str)</code>. </p>\n\n<p>However I'd really like to know both why this happens(the 4 space thing) and if I can fix this method somehow(make <code>char str[]</code> the same size as the string passed as argument).</p>\n\n<p>Thanks in advance.</p>\n"}]