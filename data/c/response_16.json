[{"tags": ["c", "list", "function", "struct"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 1, "creation_date": 1430352087, "post_id": 29956625, "comment_id": 48034106, "body": "What is this: <code>for(i=0; i&lt;=i; i++)</code> ?"}, {"owner": {"reputation": 21, "user_id": 4848562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b2e249c2d55292e5310c4b364e6b62f?s=128&d=identicon&r=PG&f=1", "display_name": "badcoderiter", "link": "https://stackoverflow.com/users/4848562/badcoderiter"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1430364041, "post_id": 29956625, "comment_id": 48037462, "body": "was using it to test my loop, didnt want to change it until i knew it worked"}], "answers": [{"tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 0, "last_activity_date": 1430351569, "creation_date": 1430351569, "answer_id": 29956646, "question_id": 29956625, "link": "https://stackoverflow.com/questions/29956625/writing-to-strings-inside-a-structure-doubly-linked-list-in-c/29956646#29956646", "title": "writing to strings inside a structure doubly linked list in C", "body": "<ol>\n<li><p>You are passing the name of a type that you just defined instead of a variable declared of that type, this</p>\n\n<pre><code>typedef struct person people;\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>struct person people;\n</code></pre></li>\n<li><p>Change</p>\n\n<pre><code>n = write(people);\n</code></pre>\n\n<p>to</p>\n\n<pre><code>n = write(&amp;people);\n</code></pre></li>\n<li><p>Remove <code>fflush(stdin)</code> it's undefined behavior.</p></li>\n<li><p>Do not use <code>gets()</code> it's very unsafe, use <code>fgets()</code> instead</p>\n\n<pre><code>char name[40];\ngets(name);\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>char name[40];\nfgets(name, sizeof(name), stdin);\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 21, "user_id": 4848562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b2e249c2d55292e5310c4b364e6b62f?s=128&d=identicon&r=PG&f=1", "display_name": "badcoderiter", "link": "https://stackoverflow.com/users/4848562/badcoderiter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1430351569, "creation_date": 1430351427, "last_edit_date": 1430351517, "question_id": 29956625, "link": "https://stackoverflow.com/questions/29956625/writing-to-strings-inside-a-structure-doubly-linked-list-in-c", "title": "writing to strings inside a structure doubly linked list in C", "body": "<p>I have an issue with my code, I changed a few of the functions to accomodate the structure I added, so instead of having variables all over the place, but now it does not work at all. I need it to create a structure person, then it prompts the user to enter the persons name, and age; then it asks for more persons to fill a doubly linked list which stops the loop if nothing is input for the persons name. THEN it spits out the reverse of what I input into the doubly linked list. All help is appreciated ^-^</p>\n\n<pre><code>struct person\n{\n    char name[10][41];\n    int age[10];\n};\n\nint write(struct person *people);\nvoid print(struct person *people);\nint main(void)\n{\n    char names[10][41];\n    int n = 10;\n    int ages[10];\n\n    typedef struct person people;\n\n    n = write(people);\n    print(people);\n\n\n    system(\"PAUSE\");\n    return 0;\n}\n\n\nint write(struct person *people)\n{\n    int i;\n    char name[41];\n    int age[10];\n    for(i=0; i&lt;=i; i++)\n    {\n        fflush(stdin);\n        printf(\"Enter full name\\n\");\n\n        gets(people.name);\n        strcpy(names[i], name);\n\n        if(names[i][0] == '\\0')\n            break;\n\n        printf(\"Enter their age\\n\");\n        scanf(\"%d\", &amp;age[i]);\n        ages[i] = age[i];\n    }\n}\n\nvoid print(struct person *people)\n{\n    int i = 0;\n    for(i = 0; i &lt; 10; i++)\n    {\n        if(names[i][0] == '\\0')\n            break;\n\n        printf(\"%s is %d year(s) old\\n\", names[i], ages[i]);\n    }\n    return i;\n}\n</code></pre>\n"}, {"tags": ["c", "gcc", "assembly", "logic", "nasm"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1430352559, "post_id": 29956567, "comment_id": 48034254, "body": "Be aware that <code>div 32-bit-reg</code> divides the 64-bit word in <code>edx:eax</code> by <code>reg</code>, so you need to initialize <code>edx</code> before."}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 4844336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76658929c5e006f8bf3fe1b688b53199?s=128&d=identicon&r=PG&f=1", "display_name": "vroom", "link": "https://stackoverflow.com/users/4844336/vroom"}, "edited": false, "score": 0, "creation_date": 1430351727, "post_id": 29956619, "comment_id": 48033994, "body": "Am I incorrect in thinking that the div command is passed the divisor and then uses the last used register for the dividend? I&#39;m an absolute beginner so my understanding is very limited."}, {"owner": {"reputation": 821764, "user_id": 893, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/747ffa5da3538e66840ebc0548b8fd58?s=128&d=identicon&r=PG", "display_name": "Greg Hewgill", "link": "https://stackoverflow.com/users/893/greg-hewgill"}, "reply_to_user": {"reputation": 45, "user_id": 4844336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76658929c5e006f8bf3fe1b688b53199?s=128&d=identicon&r=PG&f=1", "display_name": "vroom", "link": "https://stackoverflow.com/users/4844336/vroom"}, "edited": false, "score": 0, "creation_date": 1430351884, "post_id": 29956619, "comment_id": 48034046, "body": "@vroom: Yes, that is incorrect. The <code>div</code> instruction has no idea what the &quot;last used register&quot; is. It also puts the quotient and remainder in specific registers, neither of which are <code>ecx</code>."}, {"owner": {"reputation": 45, "user_id": 4844336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76658929c5e006f8bf3fe1b688b53199?s=128&d=identicon&r=PG&f=1", "display_name": "vroom", "link": "https://stackoverflow.com/users/4844336/vroom"}, "edited": false, "score": 0, "creation_date": 1430352246, "post_id": 29956619, "comment_id": 48034146, "body": "Oh, I see now what the problem is. <code>div</code> works on the <code>eax</code> register, which was assigned <code>ecx</code>, so after <code>div</code> is called I need to reassign <code>ecx</code> with <code>mov ecx, eax</code>"}, {"owner": {"reputation": 821764, "user_id": 893, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/747ffa5da3538e66840ebc0548b8fd58?s=128&d=identicon&r=PG", "display_name": "Greg Hewgill", "link": "https://stackoverflow.com/users/893/greg-hewgill"}, "reply_to_user": {"reputation": 45, "user_id": 4844336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76658929c5e006f8bf3fe1b688b53199?s=128&d=identicon&r=PG&f=1", "display_name": "vroom", "link": "https://stackoverflow.com/users/4844336/vroom"}, "edited": false, "score": 0, "creation_date": 1430352301, "post_id": 29956619, "comment_id": 48034162, "body": "Sure, or just use <code>eax</code> in the following <code>add</code> and <code>cmp</code> instructions."}], "tags": [], "owner": {"reputation": 821764, "user_id": 893, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/747ffa5da3538e66840ebc0548b8fd58?s=128&d=identicon&r=PG", "display_name": "Greg Hewgill", "link": "https://stackoverflow.com/users/893/greg-hewgill"}, "is_accepted": true, "score": 2, "last_activity_date": 1430351403, "creation_date": 1430351403, "answer_id": 29956619, "question_id": 29956567, "link": "https://stackoverflow.com/questions/29956567/nasm-assembly-mathematical-logic/29956619#29956619", "title": "NASM Assembly mathematical logic", "body": "<p>I think the problem is here:</p>\n\n<pre><code>div    ebx\nadd    ecx, 1      ;(a+b*c)/(d-e*f) + 1\n</code></pre>\n\n<p>The result of the <code>div</code> instruction is not in <code>ecx</code>.</p>\n"}], "owner": {"reputation": 45, "user_id": 4844336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76658929c5e006f8bf3fe1b688b53199?s=128&d=identicon&r=PG&f=1", "display_name": "vroom", "link": "https://stackoverflow.com/users/4844336/vroom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 589, "favorite_count": 0, "accepted_answer_id": 29956619, "answer_count": 1, "score": 0, "last_activity_date": 1430351403, "creation_date": 1430351012, "question_id": 29956567, "link": "https://stackoverflow.com/questions/29956567/nasm-assembly-mathematical-logic", "title": "NASM Assembly mathematical logic", "body": "<p>I have a program in assembly for the Linux terminal that's supposed to work through a series of mathematical manipulations, compare the final value to 20, and then using if logic, report &lt;, > or = relationship. Code is:</p>\n\n<pre><code>segment .data\n\nout_less     db \"Z is less than 20.\", 10, 0\nout_greater  db \"Z is greater than 20.\", 10, 0\nout_equal    db \"Z is equal to 20.\", 10, 0\n\nsegment .bss\n\nsegment .text\n\nglobal main\nextern printf\n\nmain:\n\n    mov    eax, 10\n    mov    ebx, 12\n    mov    ecx, eax\n    add    ecx, ebx    ;set c (ecx reserved)\n\n    mov    eax, 3\n    mov    ebx, ecx\n    sub    ebx, eax    ;set f (ebx reserved)\n\n    mov    eax, 12\n    mul    ecx\n    add    ecx, 10     ;(a+b*c) (ecx reserved)\n\n    mov    eax, 6\n    mul    ebx\n    mov    eax, 3\n    sub    eax, ebx\n    mov    ebx, eax    ;(d-e*f) (ebx reserved) reassign to ebx to free eax\n\n    mov    eax, ecx\n    div    ebx\n    add    ecx, 1      ;(a+b*c)/(d-e*f) + 1\n\n    cmp    ecx, 20\n    jl     less\n    jg     greater\n    je     equal\n\n    mov    eax, 0\n    ret\n\nless:\n\n    push    out_less\n    call    printf\n    jmp     end\n\ngreater:\n\n    push    out_greater\n    call    printf\n    jmp     end\n\nequal:\n\n    push    out_equal\n    call    printf\n    jmp     end\n\nend:\n\n    mov     eax, 0\n    ret\n</code></pre>\n\n<p>Commands for compiling in terminal using nasm and gcc:</p>\n\n<pre><code>nasm -f elf iftest.asm\ngcc -o iftest iftest.o\n./iftest\n</code></pre>\n\n<p>Equivalent C code would be:</p>\n\n<pre><code>main() {\n    int a, b, c, d, e, f, z;\n    a = 10;\n    b = 12;\n    c = a + b;\n    d = 3;\n    e = 6;\n    f = c - d;\n    z = ((a + b*c) / (d - e*f)) + 1;\n\n    if (z &lt; 20) {\n        printf(\"Z (%d) is less than 20.\\n\", z);\n    }\n    else if (z &gt; 20) {\n        printf(\"Z is greater than 20.\\n\");\n    }\n    else {\n        printf(\"Z is equal to 20.\\n\");\n    }\n}    \n</code></pre>\n\n<p>The current output is incorrect. The C code will report that z = -1, and therefore less than 20, but the assembly code outputs <code>Z is greater than 20.</code> I've tried printing out the final value, but I run into this issue where printing the value somehow changes it. I've checked and rechecked the math logic and I can't see why it shouldn't give the correct value, unless I'm using the math operators incorrectly. Any and all help is appreciated.</p>\n"}, {"tags": ["c", "linux", "serial-port"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1430350781, "post_id": 29956513, "comment_id": 48033721, "body": "It&#39;s impossible to understand what are you asking."}, {"owner": {"reputation": 27723, "user_id": 627005, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/016a165f7d0d5d24bb38331502b912ed?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Manta", "link": "https://stackoverflow.com/users/627005/paul-manta"}, "edited": false, "score": 2, "creation_date": 1430351023, "post_id": 29956513, "comment_id": 48033794, "body": "Open <code>&#47;dev&#47;random</code> and read from that. Also, you don&#39;t read from ports <i>per se</i>, you read from sockets. Fortunately, sockets and &quot;normal&quot; files are both the same in POSIX, so you can read from <code>&#47;dev&#47;random</code> as if it was a socket that received data from a network."}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "reply_to_user": {"reputation": 27723, "user_id": 627005, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/016a165f7d0d5d24bb38331502b912ed?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Manta", "link": "https://stackoverflow.com/users/627005/paul-manta"}, "edited": false, "score": 2, "creation_date": 1430351689, "post_id": 29956513, "comment_id": 48033983, "body": "@PaulManta: Make that <code>&#47;dev&#47;urandom</code>. It uses a pseudorandom number generator that is mixed when entropy is available, but never blocks; whereas <code>&#47;dev&#47;random</code> will block if you run out of entropy. (Entropy is basically a measure of <i>&quot;unused random bits&quot;</i> collected from various random-ish sources like clock jitter and such timings, within the kernel.)"}], "answers": [{"comments": [{"owner": {"reputation": 21174, "user_id": 972202, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/k5Gxr.png?s=128&g=1", "display_name": "sazr", "link": "https://stackoverflow.com/users/972202/sazr"}, "edited": false, "score": 0, "creation_date": 1430352498, "post_id": 29956748, "comment_id": 48034232, "body": "Thanks that connected successfully and I read data in. The data is coming in as binary (I imaging thats whats being sent or maybe my setup isn&#39;t configured to receive ascii). Do you know of ports that are writing ascii?"}, {"owner": {"reputation": 4827, "user_id": 2372604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dba658108aa453906cfe0e229a8a18d?s=128&d=identicon&r=PG", "display_name": "ilent2", "link": "https://stackoverflow.com/users/2372604/ilent2"}, "reply_to_user": {"reputation": 21174, "user_id": 972202, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/k5Gxr.png?s=128&g=1", "display_name": "sazr", "link": "https://stackoverflow.com/users/972202/sazr"}, "edited": false, "score": 0, "creation_date": 1430353093, "post_id": 29956748, "comment_id": 48034407, "body": "<code>&#47;dev&#47;urandom&#47;</code> will output random bytes (8-bit), if you want ASCII (7-bit) you can take the modulo 2 of the output <code>output % 2</code> however your character set might not provide symbols for all ASCII characters."}, {"owner": {"reputation": 4827, "user_id": 2372604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dba658108aa453906cfe0e229a8a18d?s=128&d=identicon&r=PG", "display_name": "ilent2", "link": "https://stackoverflow.com/users/2372604/ilent2"}, "reply_to_user": {"reputation": 21174, "user_id": 972202, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/k5Gxr.png?s=128&g=1", "display_name": "sazr", "link": "https://stackoverflow.com/users/972202/sazr"}, "edited": false, "score": 0, "creation_date": 1430353128, "post_id": 29956748, "comment_id": 48034420, "body": "Oops, not modulo 2, divide by 2."}], "tags": [], "owner": {"reputation": 4827, "user_id": 2372604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dba658108aa453906cfe0e229a8a18d?s=128&d=identicon&r=PG", "display_name": "ilent2", "link": "https://stackoverflow.com/users/2372604/ilent2"}, "is_accepted": true, "score": 0, "last_activity_date": 1430352244, "creation_date": 1430352244, "answer_id": 29956748, "question_id": 29956513, "link": "https://stackoverflow.com/questions/29956513/what-linux-port-is-always-writing/29956748#29956748", "title": "What Linux Port is always writing", "body": "<p>I would suggest either open <code>/dev/random</code> (or <code>/dev/urandom</code>) as Paul suggests or create your own socket and read/write to that.  Don't just pick an arbitrary socket and hope it has information that no other process needed.</p>\n\n<p>If this is your first time working with sockets I would also suggest that you try playing around with things in a language like python simply because you don't need to recompile to see where you went wrong and the warnings are often more readable (take a look at <a href=\"https://docs.python.org/2/howto/sockets.html\" rel=\"nofollow\">https://docs.python.org/2/howto/sockets.html</a>)</p>\n\n<p>As a side note: If you have access to an arduino you might like to try connecting to that socket (usually something like <code>ser = serial.Serial('/dev/ttyACM0', 9600)</code> in python).</p>\n"}], "owner": {"reputation": 21174, "user_id": 972202, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/k5Gxr.png?s=128&g=1", "display_name": "sazr", "link": "https://stackoverflow.com/users/972202/sazr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "closed_date": 1430355010, "accepted_answer_id": 29956748, "answer_count": 1, "score": 0, "last_activity_date": 1430352317, "creation_date": 1430350719, "last_edit_date": 1495541663, "question_id": 29956513, "link": "https://stackoverflow.com/questions/29956513/what-linux-port-is-always-writing", "closed_reason": "Needs details or clarity", "title": "What Linux Port is always writing", "body": "<p>I am experimenting reading (and eventually writing) serial ports in C. I want to be able to connect to a port on debian and read in some data but I need a port that is writing (speaking). I am new to linux programming.</p>\n\n<p>What port, that will definitely be present and talking in debian, can I connect to to read some data in?</p>\n\n<p>Can you also suggest a port I can eventually use to write to aswell? </p>\n\n<p>I've tried connecting to <code>/dev/ttyUSB1</code> that this <a href=\"https://stackoverflow.com/questions/6947413/how-to-open-read-and-write-from-serial-port-in-c\">example</a> uses but that port doesn't exist. </p>\n"}, {"tags": ["c", "pipe"], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 4020952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e4085e55fcbd287f5986d2491148a3db?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/4020952/john"}, "edited": false, "score": 0, "creation_date": 1430352379, "post_id": 29956444, "comment_id": 48034188, "body": "How can I receive the second message from children?"}, {"owner": {"reputation": 10381, "user_id": 3011009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XVtZq.jpg?s=128&g=1", "display_name": "mcleod_ideafix", "link": "https://stackoverflow.com/users/3011009/mcleod-ideafix"}, "reply_to_user": {"reputation": 29, "user_id": 4020952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e4085e55fcbd287f5986d2491148a3db?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/4020952/john"}, "edited": false, "score": 0, "creation_date": 1430404419, "post_id": 29956444, "comment_id": 48060736, "body": "Remove the <code>wait(NULL)</code> in the middle of the block and put it at the end of it. I will edit my answer to reflect that."}], "tags": [], "owner": {"reputation": 10381, "user_id": 3011009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XVtZq.jpg?s=128&g=1", "display_name": "mcleod_ideafix", "link": "https://stackoverflow.com/users/3011009/mcleod-ideafix"}, "is_accepted": true, "score": 1, "last_activity_date": 1430404439, "last_edit_date": 1430404439, "creation_date": 1430350335, "answer_id": 29956444, "question_id": 29956354, "link": "https://stackoverflow.com/questions/29956354/how-to-send-message-through-anonymous-pipe-in-c/29956444#29956444", "title": "How to send message through anonymous pipe in c", "body": "<p>You have to close the end of the pipe that you don't use within each process:</p>\n\n<pre><code>   int main( ) {\n      int ret, myPipes[2];\n      char buff[MaxLen + 1];\n\n      if( pipe( myPipes ) == 0 ){\n\n           if( fork( ) == 0 ) {\n              close (myPipes[PipeStdIn]);\n              char *reply = {\"child sends first message.\\n\"};\n              write( myPipes[PipeStdOut], reply, strlen(reply) + 1); \n\n              char *reply2 = {\"child sends second message.\\n\"};\n              write( myPipes[PipeStdOut], reply2, strlen(reply2) + 1); \n\n       } \n       else { \n              close (myPipes[StdOut]);\n              read(myPipes[PipeStdIn], buff, MaxLen); \n              printf(\"Parent receives message: %s\", buff);\n\n              read(myPipes[PipeStdIn], buff, MaxLen);\n              printf(\"Parent receives 2nd message : %s\", buff);\n              wait(NULL);\n       }\n     }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 478, "user_id": 2500784, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/9ytNA.jpg?s=128&g=1", "display_name": "tea-addict", "link": "https://stackoverflow.com/users/2500784/tea-addict"}, "is_accepted": false, "score": 0, "last_activity_date": 1430395869, "creation_date": 1430395869, "answer_id": 29967453, "question_id": 29956354, "link": "https://stackoverflow.com/questions/29956354/how-to-send-message-through-anonymous-pipe-in-c/29967453#29967453", "title": "How to send message through anonymous pipe in c", "body": "<p>Look, it works now, your close() functions were in wrong line. You should close before read or write.</p>\n\n<pre><code>#include &lt;unistd.h&gt;  \n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;wait.h&gt;  \n\n#define MaxLen 80\n#define PipeStdIn   0    \n#define PipeStdOut  1   \n\nint main( ) {\n  int ret, myPipes[2];\n  char buff[MaxLen + 1];\n\n  if( pipe( myPipes ) == 0 ){\n\n       if( fork( ) == 0 ) {\n\n          char *reply = {\"child sends first message.\\n\"};\n\n          char *reply2 = {\"child sends second message.\\n\"};\n\n          close(myPipes[PipeStdIn]); // CLOSE BEFORE WRITE\n          write( myPipes[PipeStdOut], reply, strlen(reply) + 1); \n          write( myPipes[PipeStdOut], reply2, strlen(reply2) + 1); \n\n   } \n   else { \n\n          close(myPipes[PipeStdOut]); // CLOSE BEFORE READ\n          read(myPipes[PipeStdIn], buff, MaxLen); \n          printf(\"Parent receives message: %s\", buff);\n\n          read(myPipes[PipeStdIn], buff, MaxLen);\n          printf(\"Parent receives 2nd message : %s\", buff);\n   }\n }\n  return 0; \n }\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 4020952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e4085e55fcbd287f5986d2491148a3db?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/4020952/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2162, "favorite_count": 0, "accepted_answer_id": 29956444, "answer_count": 2, "score": 0, "last_activity_date": 1430404439, "creation_date": 1430349803, "question_id": 29956354, "link": "https://stackoverflow.com/questions/29956354/how-to-send-message-through-anonymous-pipe-in-c", "title": "How to send message through anonymous pipe in c", "body": "<p>I try to use anonymous pipe to send two messages to the parent.  I understand that I need to put the parent into the wait state to let children write the second message then read it from the pipe.  I've tried to use <code>wait(NULL)</code> to let the parent wait for the children writing to pipe, but it seems not working. Could somebody help me out? Thanks first.</p>\n\n<p>Here is the code I have so far:</p>\n\n<pre><code>    #include &lt;unistd.h&gt;  \n    #include &lt;stdio.h&gt;\n    #include &lt;string.h&gt;\n    # include &lt;wait.h&gt;  \n\n    #define MaxLen 80\n    #define PipeStdIn   0    \n    #define PipeStdOut  1   \n\n   int main( ) {\n      int ret, myPipes[2];\n      char buff[MaxLen + 1];\n\n      if( pipe( myPipes ) == 0 ){\n\n           if( fork( ) == 0 ) {\n              char *reply = {\"child sends first message.\\n\"};\n              write( myPipes[PipeStdOut], reply, strlen(reply) + 1); \n\n              char *reply2 = {\"child sends second message.\\n\"};\n              write( myPipes[PipeStdOut], reply2, strlen(reply2) + 1); \n\n       } \n       else { \n              read(myPipes[PipeStdIn], buff, MaxLen); \n              printf(\"Parent receives message: %s\", buff);\n              wait(NULL);\n              read(myPipes[PipeStdIn], buff, MaxLen);\n              printf(\"Parent receives 2nd message : %s\", buff);\n       }\n     }\n      close( myPipes[PipeStdIn] );  \n      close( myPipes[PipeStdOut] ); \n\n      return 0; \n}\n</code></pre>\n\n<p>And this is what I got when I compile it:</p>\n\n<pre><code>aaa@ubuntu:~/Desktop/fork$ ./fork\nParent receives message: child sends first message.\n</code></pre>\n"}, {"tags": ["c", "user-interface", "pipe", "tcl", "io-redirection"], "answers": [{"comments": [{"owner": {"reputation": 475, "user_id": 4088557, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/097d7f8d879ed56304a61ed678bb2f0e?s=128&d=identicon&r=PG&f=1", "display_name": "CSjunkie", "link": "https://stackoverflow.com/users/4088557/csjunkie"}, "edited": false, "score": 0, "creation_date": 1430356997, "post_id": 29957179, "comment_id": 48035520, "body": "The child process is a tcl program, do you know how to do the equivalent of <code>dup2</code> in tcl?"}, {"owner": {"reputation": 92307, "user_id": 167735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5deb8de031f80c23f19e9b6d389e5afe?s=128&d=identicon&r=PG", "display_name": "slebetman", "link": "https://stackoverflow.com/users/167735/slebetman"}, "reply_to_user": {"reputation": 475, "user_id": 4088557, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/097d7f8d879ed56304a61ed678bb2f0e?s=128&d=identicon&r=PG&f=1", "display_name": "CSjunkie", "link": "https://stackoverflow.com/users/4088557/csjunkie"}, "edited": false, "score": 0, "creation_date": 1430367034, "post_id": 29957179, "comment_id": 48038254, "body": "@CSjunkie: No need to dup stdin and stdout in tcl. Leave them as is and just open <code>&#47;dev&#47;tty</code> directly to read from the keyboard as if it was a file."}], "tags": [], "owner": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "is_accepted": true, "score": 1, "last_activity_date": 1430355083, "creation_date": 1430355083, "answer_id": 29957179, "question_id": 29956242, "link": "https://stackoverflow.com/questions/29956242/c-child-i-o-with-parent-and-keyboard/29957179#29957179", "title": "C: Child I/O with parent and keyboard", "body": "<p>It sounds as if the child would have a conventional command-line interface, e.g.,line-buffered.  I suggest these design changes:</p>\n\n<ul>\n<li>modify the two-way pipe to the child to something other than its standard input and output (you can read/write on other streams)</li>\n<li>it might be simplest to make that change within the child</li>\n<li>you can use <code>dup2</code>, etc., within the child to modify the pipe.  That leaves the question of how to get a usable keyboard interface for the child.</li>\n<li>you can solve <em>that</em> problem by opening <code>/dev/tty</code> directly, and (again with <code>dup2</code> and friends) making the file opened on <code>/dev/tty</code> into the child's standard input and output.</li>\n</ul>\n\n<p>As an example, the <a href=\"http://invisible-island.net/dialog/dialog.html\" rel=\"nofollow\">dialog</a> program has a feature for reading data via a pipe (at the shell level, that is its standard input), and in initialization, changing that into a different stream and opening <code>/dev/tty</code> for a \"real\" standard input.  Your problem is a little more complicated (with both input and output pipes), but reading the <code>dialog</code> source may be helpful.  For reference, that is the <code>init_dialog</code> function in <code>util.c</code> (source <a href=\"http://invisible-island.net/dialog/dialog.html#download\" rel=\"nofollow\">here</a>).</p>\n"}], "owner": {"reputation": 475, "user_id": 4088557, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/097d7f8d879ed56304a61ed678bb2f0e?s=128&d=identicon&r=PG&f=1", "display_name": "CSjunkie", "link": "https://stackoverflow.com/users/4088557/csjunkie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "accepted_answer_id": 29957179, "answer_count": 1, "score": 0, "last_activity_date": 1430355083, "creation_date": 1430349213, "last_edit_date": 1430354294, "question_id": 29956242, "link": "https://stackoverflow.com/questions/29956242/c-child-i-o-with-parent-and-keyboard", "title": "C: Child I/O with parent and keyboard", "body": "<p>Shortened Question:</p>\n\n<p>I have a parent process that creates a child process as seen below:</p>\n\n<pre><code>int me2them[2], them2me[2];\npipe(me2them);pipe(them2me);\nif (!fork()){\n    close(0); dup2(me2them[0],0); close(me2them[0]); \n    close(1); dup2(them2me[1],1); close(them2me[1]);\n    char * cmds[] = {\"wish\", \"myProg.tcl\",NULL};\n    execvp(cmds[0], cmds); \n    fprintf(stderr, \"Unable to exec 1\\n\");\n    exit(-1);\n}\nclose(0); dup2(them2me[0],0); close(them2me[0]); \nclose(1); dup2(me2them[1],1); close(me2them[1]);\n</code></pre>\n\n<p>But, I need the child process to be able to recieve input from the user.  With this method, the stdin for the child is changed from the keyboard to the stdout of the parent.  How can I maintain communication with both the keyboard and the parent?</p>\n\n<p>Also, the parent is the client of a server, and thus multiple parents can be running on the same or different machines, making a shared file between parent and child difficult because the child of any parent would be able to access any other parent's file.</p>\n\n<p>NOTE: I'd prefer to keep the parent's stdout being mapped to the child's input because I did not write the c code and I want to re-route its printf statements to the child.  </p>\n\n<p>Original Version:</p>\n\n<p>I am using tcl to make a GUI for a c code.  The tcl is a child process of the c code and I use I/O redirection to make the stdout of the c to be the stdin of the tcl and the stdout of the tcl to be the stdin of the c.  However,  there is a part where the c requests the user's name and it sends the request via stdout to the stdin of the tcl code, no problems, then the tcl requests the name.  The tcl name request presents two problems:  </p>\n\n<p>1) tcl is in effect sending the request to the c code, causing the c code to mistake the request as being the actual name (solved by sending the request to stderr instead of stdout) </p>\n\n<p>2) When tcl attempts to get the user input for the name, it will be checking stdin, which is mapped to receive from the c code not the keyboard, and will not be able to read the response from the user.</p>\n\n<p>Is there a way to specify to get the response from the keyboard? Or should I map the stdout of the c code to a different fd for the tcl? And if so, how do I specify to get from the keyboard/new fd.</p>\n\n<p>Here is how I make the tcl a child process of the c code:</p>\n\n<pre><code>int me2them[2], them2me[2];\npipe(me2them);pipe(them2me);\nif (!fork()){\n    close(0); dup2(me2them[0],0); close(me2them[0]); \n    close(1); dup2(them2me[1],1); close(them2me[1]);\n    char * cmds[] = {\"wish\", \"myProg.tcl\",NULL};\n    execvp(cmds[0], cmds); \n    fprintf(stderr, \"Unable to exec 1\\n\");\n    exit(-1);\n}\nclose(0); dup2(them2me[0],0); close(them2me[0]); \nclose(1); dup2(me2them[1],1); close(me2them[1]);\n</code></pre>\n"}, {"tags": ["c", "string"], "comments": [{"owner": {"reputation": 2755, "user_id": 2682312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M37ut.png?s=128&g=1", "display_name": "Axalo", "link": "https://stackoverflow.com/users/2682312/axalo"}, "edited": false, "score": 0, "creation_date": 1430348625, "post_id": 29956114, "comment_id": 48033024, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/9655202/how-to-convert-integer-to-string-in-c\">How to convert integer to string in C?</a>"}, {"owner": {"reputation": 3, "user_id": 4642587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d5ca0475f7aa252cd8dcfdc8de24735?s=128&d=identicon&r=PG&f=1", "display_name": "Camila J.", "link": "https://stackoverflow.com/users/4642587/camila-j"}, "reply_to_user": {"reputation": 2755, "user_id": 2682312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M37ut.png?s=128&g=1", "display_name": "Axalo", "link": "https://stackoverflow.com/users/2682312/axalo"}, "edited": false, "score": 0, "creation_date": 1430348711, "post_id": 29956114, "comment_id": 48033053, "body": "no, it&#39;s not the same thing as conversion. I&#39;m already making a conversion in the code"}, {"owner": {"reputation": 1006, "user_id": 3888756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mPnk1.jpg?s=128&g=1", "display_name": "DigitalNinja", "link": "https://stackoverflow.com/users/3888756/digitalninja"}, "edited": false, "score": 0, "creation_date": 1430348813, "post_id": 29956114, "comment_id": 48033091, "body": "I think you need space for the null termination (which <code>sprintf</code> adds), try making <code>n1</code> and <code>n2</code> be <code>n1[2]</code> and <code>n2[2]</code>."}, {"owner": {"reputation": 1006, "user_id": 3888756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mPnk1.jpg?s=128&g=1", "display_name": "DigitalNinja", "link": "https://stackoverflow.com/users/3888756/digitalninja"}, "edited": false, "score": 0, "creation_date": 1430349064, "post_id": 29956114, "comment_id": 48033174, "body": "Right... your number strings will be bigger than that even, make <code>n1</code> and <code>n2</code> larger like 6 or something."}, {"owner": {"reputation": 4446, "user_id": 696485, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4de94e14f977802057b0109d079d95a1?s=128&d=identicon&r=PG", "display_name": "Iskar Jarak", "link": "https://stackoverflow.com/users/696485/iskar-jarak"}, "edited": false, "score": 0, "creation_date": 1430349525, "post_id": 29956114, "comment_id": 48033339, "body": "In general, you need 10 digits for 32-bit integers, plus 1 more for the null terminator. In this case you are doing <code>...% 1023) + 2;</code> so you need 4 for the digits and 1 more for the null."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1430350453, "post_id": 29956114, "comment_id": 48033625, "body": "Delete everything from <code>char str[2];</code> onwards and put: <code>char str[100]; snprintf(str, sizeof str, &quot;String: %d %d&quot;, number1, number2);</code>"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 4642587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d5ca0475f7aa252cd8dcfdc8de24735?s=128&d=identicon&r=PG&f=1", "display_name": "Camila J.", "link": "https://stackoverflow.com/users/4642587/camila-j"}, "edited": false, "score": 0, "creation_date": 1430350602, "post_id": 29956197, "comment_id": 48033668, "body": "Thank you a lot! I understand what you said, and it worked! But what i really need is to put the values of n1 and n2 inside of the string str (it&#39;s the activity my professor asked us). But i still don&#39;t know how to do that. N1 and n2 have to be passed to str, and i have to print str. Can i still do that with the tools you told me?"}, {"owner": {"reputation": 3, "user_id": 4642587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d5ca0475f7aa252cd8dcfdc8de24735?s=128&d=identicon&r=PG&f=1", "display_name": "Camila J.", "link": "https://stackoverflow.com/users/4642587/camila-j"}, "edited": false, "score": 0, "creation_date": 1430351174, "post_id": 29956197, "comment_id": 48033839, "body": "Thank you so much!! I didn&#39;t know that sprintf could concatenate too"}, {"owner": {"reputation": 30275, "user_id": 4272464, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4fa45261dec56004145c653832504920?s=128&d=identicon&r=PG&f=1", "display_name": "bgoldst", "link": "https://stackoverflow.com/users/4272464/bgoldst"}, "reply_to_user": {"reputation": 3, "user_id": 4642587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d5ca0475f7aa252cd8dcfdc8de24735?s=128&d=identicon&r=PG&f=1", "display_name": "Camila J.", "link": "https://stackoverflow.com/users/4642587/camila-j"}, "edited": false, "score": 0, "creation_date": 1430351212, "post_id": 29956197, "comment_id": 48033850, "body": "You&#39;re very welcome :) Don&#39;t forget to upvote all answers that helped you and accept the answer that helped you most ;)"}], "tags": [], "owner": {"reputation": 30275, "user_id": 4272464, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4fa45261dec56004145c653832504920?s=128&d=identicon&r=PG&f=1", "display_name": "bgoldst", "link": "https://stackoverflow.com/users/4272464/bgoldst"}, "is_accepted": true, "score": 0, "last_activity_date": 1430350887, "last_edit_date": 1430350887, "creation_date": 1430348980, "answer_id": 29956197, "question_id": 29956114, "link": "https://stackoverflow.com/questions/29956114/how-do-i-make-a-string-receive-an-int-value-its-not-about-conversion/29956197#29956197", "title": "how do i make a string receive an int value? It&#39;s not about conversion", "body": "<p>Your calculation of <code>number1</code> and <code>number2</code> will result in a number which can have anything from 1 to 4 digits. 32-bit integers can normally have anything from 1 to 10 digits, but since your formula applies a modulus of 1023, the number will be capped at 1022, or rather 1024, since you add 2 afterward. Thus it can range from 2 to 1024. Hence, your <code>char n1[1]</code> and <code>char n2[1]</code> buffers are not big enough to handle your calls to <code>sprintf()</code>. They must be at least 5 chars long for that, which is necessary for the (up to) 4 digits, plus the terminal NUL added by <code>sprintf()</code>.</p>\n\n<p>Furthermore, your attempt to assign the entire <code>n1</code> and <code>n2</code> buffers to <code>str[0]</code> and <code>str[1]</code> is incorrect; you cannot assign a char array to a char. I'm also not entirely sure why you want to transfer the values from <code>n1</code> and <code>n2</code> to another string buffer.</p>\n\n<p>What you seem to want to do is convert back to <code>int</code> after converting to string. You can do this as follows:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;sys/time.h&gt;\n\nstruct timeval TempoInicial;\n\nint main() {\n\n    int number1, number2;\n\n    gettimeofday(&amp;TempoInicial,NULL);\n    number1 = ((TempoInicial.tv_usec / 47) % 1023) + 2;\n    number2 = ((TempoInicial.tv_usec / 47) % 1023) + 2;\n\n    char n1[5],n2[5];\n\n    sprintf(n1, \"%d\", number1 );\n    sprintf(n2, \"%d\", number2 );\n\n    int i1 = atoi(n1);\n    int i2 = atoi(n2);\n\n    printf(\"%d %d\\n\", i1, i2 );\n\n}\n</code></pre>\n\n<hr>\n\n<p>You seem to have some confusion about what data can be stored in which data types. A char cannot handle a number that can range over 0..1024. A char is an 8-bit value, thus it can only hold 2^8 == 256 possible values. Thus it is incorrect to assign these numbers to <code>str[0]</code> or <code>str[1]</code>.</p>\n\n<p>If you want a string representation of the numbers, you already have it in <code>n1</code> and <code>n2</code>, courtesy of <code>sprintf()</code>. If you want an integral representation of the numbers, you already had it in <code>number1</code> and <code>number2</code>, and you can get it again from the string representations courtesy of <code>atoi()</code>, as I show in my code. If you want to print out the string values, you can say something like <code>printf(\"%s %s\\n\", n1, n2 );</code>. If you want to print the integral values, you can say something like <code>printf(\"%d %d\\n\", i1, i2 );</code>, as I show in my code. Those are all the actions that I believe are relevant to what you're trying to do. Let me know if you have any more questions about anything.</p>\n\n<hr>\n\n<p>Ah, I think I see what you're after. You can combine <code>n1</code> and <code>n2</code> into the same string with <code>sprintf()</code>. You just have to be careful to use a sufficiently large buffer, which will be 4 digits + 1 space + 4 digits + 1 NUL == 10 as the upper limit or \"worst case\" scenario, if you will. (The \"best case\" scenario is 1 digit + 1 space + 1 digit + 1 NUL == 4.) Thus we have:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;sys/time.h&gt;\n\nstruct timeval TempoInicial;\n\nint main() {\n\n    int number1, number2;\n\n    gettimeofday(&amp;TempoInicial,NULL);\n    number1 = ((TempoInicial.tv_usec / 47) % 1023) + 2;\n    number2 = ((TempoInicial.tv_usec / 47) % 1023) + 2;\n\n    char n1[5],n2[5];\n    sprintf(n1, \"%d\", number1 );\n    sprintf(n2, \"%d\", number2 );\n\n    char str[10];\n    sprintf(str, \"%s %s\", n1, n2 );\n\n    printf(\"%s\\n\", str );\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1800, "user_id": 4769313, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/gFISt.png?s=128&g=1", "display_name": "Sir Jo Black", "link": "https://stackoverflow.com/users/4769313/sir-jo-black"}, "is_accepted": false, "score": 0, "last_activity_date": 1430350354, "last_edit_date": 1430350354, "creation_date": 1430349042, "answer_id": 29956209, "question_id": 29956114, "link": "https://stackoverflow.com/questions/29956114/how-do-i-make-a-string-receive-an-int-value-its-not-about-conversion/29956209#29956209", "title": "how do i make a string receive an int value? It&#39;s not about conversion", "body": "<p>The C strings are arrays of chars terminated by a zero. They should be big enough to contain all the chars that represent the string you want plus one byte to insert the value 0 (the string terminator). The n1 and n2 char arrays in your code might have a dimension of 5 byte. The char str[] in your code doesn't nothing useful, then I've deleted it. </p>\n\n<p>Try this:</p>\n\n<pre><code>int main()\n{\n    int number1, number2,conv;\n    char n1[11],n2[11];\n\n    gettimeofday(&amp;TempoInicial,NULL);\n    number1 = ((TempoInicial.tv_usec / 47) % 1023) + 2;\n    number2 = ((TempoInicial.tv_usec / 47) % 1023) + 4; /* +4 to be different from n1!*/\n\n    sprintf(n1, \"%d\", number1);\n    sprintf(n2, \"%d\", number2);\n\n    conv = atoi(n1);\n    printf(\"String: %s %d\\n\",n1,conv);\n    conv = atoi(n2);\n    printf(\"String: %s %d\\n\",n2,conv);\n\n    return 0;\n}\n</code></pre>\n\n<p>If you need to use str as a new string different from n1 and/or n2 you have to declare it as:</p>\n\n<pre><code>char str[11];\n</code></pre>\n\n<p>then, to copy the value of n1 into str, you have to use strcpy:</p>\n\n<pre><code>strcpy(str,n1);\n</code></pre>\n\n<p>If you want to have pointers to the strings n1 and n2 so that changing the contents of str[0] you change n1 and changing the contents of str[1] you change n2, you have to declare:</p>\n\n<pre><code>char * str[2];\n</code></pre>\n\n<p>and then you have to assign the value of n1 and n2 to str[0] and str[1]:</p>\n\n<pre><code>str[0]=n1;\nstr[1]=n2;\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 4642587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d5ca0475f7aa252cd8dcfdc8de24735?s=128&d=identicon&r=PG&f=1", "display_name": "Camila J.", "link": "https://stackoverflow.com/users/4642587/camila-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 29956197, "answer_count": 2, "score": -2, "last_activity_date": 1430350887, "creation_date": 1430348528, "last_edit_date": 1430349038, "question_id": 29956114, "link": "https://stackoverflow.com/questions/29956114/how-do-i-make-a-string-receive-an-int-value-its-not-about-conversion", "title": "how do i make a string receive an int value? It&#39;s not about conversion", "body": "<p>I have to make the string receive number1 and number2 values and then print the string as an int, so here i'm converting number1 and number2 from int to string, and trying to put them in str[0] and str[1], but this isn't working... How can i do this? I've been searching on the web but haven't found anything... Can someone help me?</p>\n\n<pre><code>#include &lt;stdlib.h&gt;  \n#include &lt;stdio.h&gt;  \n#include &lt;sys/time.h&gt;       \n\nstruct timeval TempoInicial;   \n\nint main()\n{\n  int number1, number2;\n    gettimeofday(&amp;TempoInicial,NULL);\n    number1 = ((TempoInicial.tv_usec / 47) % 1023) + 2;\n    number2 = ((TempoInicial.tv_usec / 47) % 1023) + 2; \n\n  char str[2];\n  char n1[1],n2[1];\n  int i;\n\n  sprintf(n1, \"%d\", number1);\n  sprintf(n2, \"%d\", number2);\n\n  str[0]=n1;\n  str[1]=n2;\n\n\n   int conv = atoi(str);\n\n  printf(\"String: %d %d\\n\",str[0],str[1]);\n}\n</code></pre>\n\n<p>I get this message:</p>\n\n<p>assignment makes integer from pointer without a cast [enabled by default]\n   str[0]=n1;</p>\n\n<p>teste.c:21:9: warning: assignment makes integer from pointer without a cast [enabled by default]\n   str[1]=n2;</p>\n"}, {"tags": ["c", "doubly-linked-list"], "comments": [{"owner": {"reputation": 1164, "user_id": 1315445, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b0eeb4c9c7014c711ed715047bb09436?s=128&d=identicon&r=PG", "display_name": "jithinpt", "link": "https://stackoverflow.com/users/1315445/jithinpt"}, "edited": false, "score": 0, "creation_date": 1430348716, "post_id": 29956049, "comment_id": 48033056, "body": "Are you required to use a doubly-linked list? If not, using an array would be a much better option (as peterh suggested) since the elements would be placed in contiguous memory locations and each element access would be much more efficient, since a lot of unnecessary pointer dereferencing can be avoided."}, {"owner": {"reputation": 1164, "user_id": 1315445, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b0eeb4c9c7014c711ed715047bb09436?s=128&d=identicon&r=PG", "display_name": "jithinpt", "link": "https://stackoverflow.com/users/1315445/jithinpt"}, "edited": false, "score": 0, "creation_date": 1430348769, "post_id": 29956049, "comment_id": 48033077, "body": "Also, could you state the problem you&#39;re facing more clearly? Are you getting an incorrect output? Or do you want better performance?"}, {"owner": {"reputation": 41, "user_id": 4793947, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TBX87.jpg?s=128&g=1", "display_name": "IdislikeCalot", "link": "https://stackoverflow.com/users/4793947/idislikecalot"}, "reply_to_user": {"reputation": 1164, "user_id": 1315445, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b0eeb4c9c7014c711ed715047bb09436?s=128&d=identicon&r=PG", "display_name": "jithinpt", "link": "https://stackoverflow.com/users/1315445/jithinpt"}, "edited": false, "score": 0, "creation_date": 1430349610, "post_id": 29956049, "comment_id": 48033364, "body": "No it has to be a doubly-linked list. I&#39;m trying to wrap my head around the address of an address with pointers."}, {"owner": {"reputation": 1164, "user_id": 1315445, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b0eeb4c9c7014c711ed715047bb09436?s=128&d=identicon&r=PG", "display_name": "jithinpt", "link": "https://stackoverflow.com/users/1315445/jithinpt"}, "edited": false, "score": 0, "creation_date": 1430349717, "post_id": 29956049, "comment_id": 48033387, "body": "As I mentioned before, what is the exact problem you&#39;re facing? Are you getting an incorrect output? If so, please clearly highlight what you&#39;re inputs were and the output you got?"}], "answers": [{"tags": [], "owner": {"reputation": 9620, "user_id": 1783163, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/BfUwH.jpg?s=128&g=1", "display_name": "peterh", "link": "https://stackoverflow.com/users/1783163/peterh"}, "is_accepted": false, "score": 0, "last_activity_date": 1430348395, "creation_date": 1430348395, "answer_id": 29956093, "question_id": 29956049, "link": "https://stackoverflow.com/questions/29956049/how-sort-forward-backward-and-output-to-file-using-a-doubly-linked-list/29956093#29956093", "title": "How Sort forward,backward and output to file using a doubly linked list", "body": "<p>If you want a simple solution, the <a href=\"http://en.wikipedia.org/wiki/Bubble_sort\" rel=\"nofollow\">bubble sorting</a> will do what you want.</p>\n\n<p>In an environment where speed is important, the list would be converted to more suitable data structure for the task (f.e. to an array), and it would be sorted with a much faster algorithm.</p>\n"}, {"tags": [], "owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "is_accepted": false, "score": 0, "last_activity_date": 1430354929, "creation_date": 1430354929, "answer_id": 29957159, "question_id": 29956049, "link": "https://stackoverflow.com/questions/29956049/how-sort-forward-backward-and-output-to-file-using-a-doubly-linked-list/29957159#29957159", "title": "How Sort forward,backward and output to file using a doubly linked list", "body": "<p>A list sort operation only requires a single linked list, so you could implement a sort using just the next pointers, then after the sort, making a pass through the list to set the previous pointers. Backwards versus forwards just needs to change the sense of the compare, unless you actually wanted to make a backwards sort that uses the previous pointers, then make a pass through the list to set the next pointers.</p>\n\n<p>A bubble sort will work, but it would be easier to start off with a second empty list pointer (like node * sorted = NULL;), then remove nodes from the original list one at a time and insert them into the second list in the proper location. Another variation on this would be to scan the original list for the node with the largest value, then remove that node from the original list and prepend it to the sorted list.</p>\n\n<p>A bottom up merge sort would be much faster, but probably not needed in this case.</p>\n"}], "owner": {"reputation": 41, "user_id": 4793947, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TBX87.jpg?s=128&g=1", "display_name": "IdislikeCalot", "link": "https://stackoverflow.com/users/4793947/idislikecalot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 185, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1430354929, "creation_date": 1430348187, "question_id": 29956049, "link": "https://stackoverflow.com/questions/29956049/how-sort-forward-backward-and-output-to-file-using-a-doubly-linked-list", "title": "How Sort forward,backward and output to file using a doubly linked list", "body": "<p>I am really at a loss as to how to get a doubly linked list to work. I previously used parallel arrays to sort a user name and age with a bubblesort. \n The goal is to read the name and age from the user and store the values into nodes. Print the values sorted forward and backward and I think using strcmp would be easier for this program because the bubblesort was very difficult for me.<br>\n I need suggestions based on the code I have so far. What is the best way to get this program to work.   </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n//create structure of person that can hold a name and an age that can be used in a doubly linked list\n\nint main(int argc, char *argv[])\n{\n  struct person //structure of person\n  {\n         char name [41];\n         int age;\n         struct person *next;//doubly linked list\n         struct person *prev;       \n  };\n\n  typedef struct person people;//using a new type of our structure\n\n  people first;//declade first of type people\n  first.age = 12;//puts 12 in the age portion of the variable first of the structure person which can hold someones age\n\n  strcpy (first.name, \"sue\");\n  people *p; //creates a pointer to a storage location\n  p = &amp;first; //that storage location now has the contents of the storage location of first.\n  (*p).age = 13; //this is the same as p-&gt;age=13; or arrow. This dereferences the pointer. arrow for pointer, (*x) \n  //dereferencing through structure\n  //make two pointers to manage a doubly linked list\n  //make two pointers of type people named head and tail\n  people *head,*tail;\n  *head = NULL;\n  *tail = NULL;\n  //start with printing rout9ine\n  printit(head);//shows nothing\n  //linked list\n  void printit(people *h);\n  {\n            people *t;\n            t=h;\n            while (t != NULL)\n            {\n                  //print the information here, he didnt give me code so i need to remember this on my own\n                  t = t-&gt;next;//continues the list      goes through pointers to the first node then destroyes t by making it\n                  //the next. You can also use the h. \n            }\n  }\n\n  //sending address, pass by reference\n\n  buildit(&amp;head,&amp;tail);\n  //head is a pointer of type people, want the pointer not the value\n  //so you need a pointer of a pointer, it acccepts the address of head and tail which\n  //is the address of the addres of the start and end of the linked list\n  void buildit (people **h, people **t)\n  {\n           people *current;\n           current = malloc (sizeof(people)); //creates space for a people structure, current points to it.\n           //assume doubly linked list\n           //t refers to the address of tail, if you want the contents of the address of tail you need *t.\n           (*t) -&gt; next = current;\n           current -&gt; prev = *t;\n           *t = current;\n  }\n\n  //structure in iostream, called FILE\n  FILE *out;\n  out = fopen(/*name of the file*/ stringname, access); \n  //fopen opens a file, you can open stdin, com 1, com 2, opens keyboard or ports or files.\n  //access has two values, r and w. r = read w = write. input reads from output writes to.\n  out = fopen(\"output.txt\",\"w\"); //opens output.txt\n\n  char filename [81];\n  gets (filename); //allows a user to input the file they want to open. array of chars, reads entire string spaces and all\n  out = fopen(filename,\"w\");\n\n  if (out != NULL) //checks if file is open or note, if null no file opened up, it checks\n  {\n     fprintf (out, \"formatstring\"; parameterlist); //file print f        \n     fscanf //adds file handle to parameters, thats it.\n     fgets //same, file gets\n  }\n  //changing a file needs pass by reference, not value.\n  ptintit(person*, FILE**);\n  void printit(person*h, FILE**o)\n  {\n       fprintf (*o,\",,,,,\",...); \n  }\n\n\n  system(\"PAUSE\");    \n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 8305, "user_id": 2654518, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e222ed5c00d3fece05f0121e059d7ea1?s=128&d=identicon&r=PG", "display_name": "ericbn", "link": "https://stackoverflow.com/users/2654518/ericbn"}, "edited": false, "score": 1, "creation_date": 1430348483, "post_id": 29956005, "comment_id": 48032968, "body": "You&#39;re not using <code>b</code> variable, so that whole line can be ignored..."}], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 4755711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f5ff4ebdb0dbd785902095b58482bc5?s=128&d=identicon&r=PG&f=1", "display_name": "Ishtiaq", "link": "https://stackoverflow.com/users/4755711/ishtiaq"}, "edited": false, "score": 0, "creation_date": 1430349260, "post_id": 29956044, "comment_id": 48033257, "body": "Ok. So, there&#39;s no difference between printing <code>*(a+2)</code> and <code>a[2]</code>, right? Just like printing either <code>*a</code>, <code>*(a+1)</code>, <code>*(a+2)</code> , <code>*(a+3)</code>.. and <code>a[0]</code>, <code>a[1]</code>, <code>a[2]</code>, <code>a[3]</code>.. are same?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 71, "user_id": 4755711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f5ff4ebdb0dbd785902095b58482bc5?s=128&d=identicon&r=PG&f=1", "display_name": "Ishtiaq", "link": "https://stackoverflow.com/users/4755711/ishtiaq"}, "edited": false, "score": 0, "creation_date": 1430349305, "post_id": 29956044, "comment_id": 48033273, "body": "@Ishtiaq Yes <code>x[y]</code> is defined to mean <code>*(x+y)</code> ."}], "tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": true, "score": 4, "last_activity_date": 1430348136, "creation_date": 1430348136, "answer_id": 29956044, "question_id": 29956005, "link": "https://stackoverflow.com/questions/29956005/can-someone-explain-whats-happening-with-this-code/29956044#29956044", "title": "Can someone explain what&#39;s happening with this code?", "body": "<p><code>a - 1</code> does not change <code>a</code>, in the same way that <code>3 + 2</code> does not change <code>3</code>. </p>\n\n<p>This code causes undefined behaviour because <code>a - 1</code> tries to form a pointer outside of the bounds of <code>a</code>. But in practice it is likely that the <code>b</code> line will just be ignored, so your code will behave the same as:</p>\n\n<pre><code>int a[] = {10, 20, 30, 40, 50};\nprintf(\"%d \\n\",*(a+2));\n</code></pre>\n\n<p>which of course prints <code>30</code>.</p>\n"}], "owner": {"reputation": 71, "user_id": 4755711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f5ff4ebdb0dbd785902095b58482bc5?s=128&d=identicon&r=PG&f=1", "display_name": "Ishtiaq", "link": "https://stackoverflow.com/users/4755711/ishtiaq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 1, "accepted_answer_id": 29956044, "answer_count": 1, "score": 1, "last_activity_date": 1430348615, "creation_date": 1430347963, "last_edit_date": 1430348112, "question_id": 29956005, "link": "https://stackoverflow.com/questions/29956005/can-someone-explain-whats-happening-with-this-code", "title": "Can someone explain what&#39;s happening with this code?", "body": "<pre><code>#include&lt;stdio.h&gt;\n\nint main()\n{\n    int a[] = {10, 20, 30, 40, 50};\n    int *b = a - 1;\n\n    printf(\"%d \\n\",*(a+2));\n}\n</code></pre>\n\n<p>I know that it prints <code>30</code> which is same as <code>a[2]</code>, but how?\nWhat does <code>a - 1</code> do  to the the array <code>a[]</code>? </p>\n"}, {"tags": ["c", "c89"], "comments": [{"owner": {"reputation": 305833, "user_id": 68587, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7d9fd158e03cbde94f7e0b33b78222af?s=128&d=identicon&r=PG", "display_name": "John Kugelman", "link": "https://stackoverflow.com/users/68587/john-kugelman"}, "edited": false, "score": 0, "creation_date": 1430347370, "post_id": 29955846, "comment_id": 48032484, "body": "Please post a <a href=\"/help/mcve\">self-contained example program</a> that we can run directly."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1430349598, "post_id": 29955846, "comment_id": 48033360, "body": "Why do you have <code>i++</code> at the bottom of the code block and not as part of the <code>for(i ...</code> statement?"}, {"owner": {"reputation": 369, "user_id": 1217580, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f258bac5c7ce4f56f9a7983ce743f794?s=128&d=identicon&r=PG", "display_name": "DamianJ", "link": "https://stackoverflow.com/users/1217580/damianj"}, "edited": false, "score": 0, "creation_date": 1430349819, "post_id": 29955846, "comment_id": 48033420, "body": "Because comment lines aren&#39;t counted. I skip any comments in the file using <code>if(buffer[0] == &#39;#&#39;) { continue;}</code>"}], "answers": [{"comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1430347627, "post_id": 29955879, "comment_id": 48032586, "body": "And is there <b>any</b> extant system that doesn&#39;t have <code>strdup()</code>?"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1430347681, "post_id": 29955879, "comment_id": 48032610, "body": "It is a bit difficult to use <code>strdup()</code> with the MSVC compiler, it requires macros like <code>#define strdup _strdup</code> how dumb is that? But it is so. The compiler would tell you that you should not use the <code>POSIX</code> names."}, {"owner": {"reputation": 369, "user_id": 1217580, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f258bac5c7ce4f56f9a7983ce743f794?s=128&d=identicon&r=PG", "display_name": "DamianJ", "link": "https://stackoverflow.com/users/1217580/damianj"}, "edited": false, "score": 0, "creation_date": 1430347719, "post_id": 29955879, "comment_id": 48032627, "body": "Initially table[index][0].notes doesn&#39;t have anything it&#39;s just a null char*. So i think the use of calloc vs malloc in this case is inconsequential. I see your point about the length though. Although, my real issue is my loop never gets to that section of code because strtok() doesn&#39;t return the last token it should, instead it returns null and exits."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1430347777, "post_id": 29955879, "comment_id": 48032649, "body": "There is no problem because of using <code>calloc()</code> but you don&#39;t need to, it could hide memory bugs from memory debuggers, when your code fails to initialize something and it did initialize it anyway."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1430347986, "post_id": 29955879, "comment_id": 48032754, "body": "@Andrew Henle Suggest posting your <code>strdup()</code> question."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 369, "user_id": 1217580, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f258bac5c7ce4f56f9a7983ce743f794?s=128&d=identicon&r=PG", "display_name": "DamianJ", "link": "https://stackoverflow.com/users/1217580/damianj"}, "edited": false, "score": 0, "creation_date": 1430348316, "post_id": 29955879, "comment_id": 48032905, "body": "@DamianJ you should post the rest of the function, i.e what is <code>del</code>? And I think it could be easy to parse that line of text with <code>strchr()</code>."}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 3, "last_activity_date": 1430347629, "last_edit_date": 1430347629, "creation_date": 1430347382, "answer_id": 29955879, "question_id": 29955846, "link": "https://stackoverflow.com/questions/29955846/cant-retrieve-last-token-from-a-file-buffer/29955879#29955879", "title": "Can&#39;t retrieve last token from a file buffer", "body": "<p>This <code>calloc(strlen(token), sizeof(char));</code> is the problem, </p>\n\n<ol>\n<li>Don't use <code>calloc()</code> if you will overwrite the zeroes immediately.</li>\n<li><p>More importantly, you need 1 more byte to store a string.</p>\n\n<pre><code>table[index][0].notes = malloc(1 + strlen(token));\n</code></pre>\n\n<p>in your code, <code>strcpy()</code> is writing the terminating <code>'\\0'</code> to an illegal location, which causes undefined behavior.</p></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 369, "user_id": 1217580, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f258bac5c7ce4f56f9a7983ce743f794?s=128&d=identicon&r=PG", "display_name": "DamianJ", "link": "https://stackoverflow.com/users/1217580/damianj"}, "edited": false, "score": 0, "creation_date": 1430349176, "post_id": 29956188, "comment_id": 48033211, "body": "Yeah I tried to isolate it, but I couldn&#39;t reproduce it outside of my function. I edited my question accordingly."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 369, "user_id": 1217580, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f258bac5c7ce4f56f9a7983ce743f794?s=128&d=identicon&r=PG", "display_name": "DamianJ", "link": "https://stackoverflow.com/users/1217580/damianj"}, "edited": false, "score": 0, "creation_date": 1430349262, "post_id": 29956188, "comment_id": 48033258, "body": "Well now you&#39;ve just added a load of stuff including presumably the extra 1 required for memory allocation that @iharob recommended, does that now cancel the question?"}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 0, "last_activity_date": 1430348932, "creation_date": 1430348932, "answer_id": 29956188, "question_id": 29955846, "link": "https://stackoverflow.com/questions/29955846/cant-retrieve-last-token-from-a-file-buffer/29956188#29956188", "title": "Can&#39;t retrieve last token from a file buffer", "body": "<p>I've made a minimal compilable example of your code (from the details posted) and there is simply nothing wrong with it - as posed in the question. It extracts all the tokens. I would criticise though, the cack-handed way it is put together - a horrible blend of <code>for</code> and implied <code>while</code> and <code>switch</code>.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main(void) {\n    int j;\n    char *token;\n    char buffer[] = \"Words words,Wordswords,Words,Words\\n\";\n    char del[] = \",\\n\";\n    for(j = 0, token = strtok(buffer, del); token != NULL; token = strtok(NULL, del), j++) {\n            printf(\"j: %d, token: %s\\n\",j, token);\n            switch(j) {\n                case 0:\n                    break;\n                case 1:\n                    break;\n                case 2:\n                    break;\n                case 3:\n                    break;\n            }\n        }\n    return 0;\n}\n</code></pre>\n\n<p>Program output:</p>\n\n<pre><code>j: 0, token: Words words\nj: 1, token: Wordswords\nj: 2, token: Words\nj: 3, token: Words\n</code></pre>\n"}], "owner": {"reputation": 369, "user_id": 1217580, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f258bac5c7ce4f56f9a7983ce743f794?s=128&d=identicon&r=PG", "display_name": "DamianJ", "link": "https://stackoverflow.com/users/1217580/damianj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1430355000, "creation_date": 1430347252, "last_edit_date": 1430355000, "question_id": 29955846, "link": "https://stackoverflow.com/questions/29955846/cant-retrieve-last-token-from-a-file-buffer", "title": "Can&#39;t retrieve last token from a file buffer", "body": "<p>I wrote some code that reads a text file and and loads each line into a buffer. That buffer is then processed using the strtok() function with \",\" as the delimiter. I retrieve the first 3 tokens just fine, but I can't get the last token. This is the first time I've run across this. On the last strtok() call when I should get the pointer to the last token, strtok() returns null.</p>\n\n<p>Partial Code:</p>\n\n<pre><code>   for(j = 0, token = strtok(buffer, del); token != NULL; token = strtok(NULL, del), j++) {\n            printf(\"j: %d, token: %s\\n\",j, token);\n            switch(j) {\n                case 0:\n                    index = fnv1aHash(token, (reqdata_len-1));\n                    t_indices[i] = index;\n                    addNode(&amp;(table[index]));\n                    table[index][0].course = (char *) malloc(1 + strlen(token));\n                    strcpy(table[index][0].course, token);\n                    break;\n                case 1:\n                    table[index][0].category = (char *) malloc(1 + strlen(token));\n                    strcpy(table[index][0].category, token);\n                    break;\n                case 2:\n                    strcpy(prereqbuff, token);\n                    addPrereqs(prereqbuff, &amp;(table[index][0].prereqs));\n                    break;\n                case 3:\n                    table[index][0].notes = (char *) malloc(1 + strlen(token));\n                    strcpy(table[index][0].notes, token);\n                    break;\n            }\n        }\n</code></pre>\n\n<p>The switch statement is just to control what stuff goes where in a struct that organizes the line info by columns (delimited by the commas). So a sample line would look like:</p>\n\n<pre><code>Words words,Wordswords,Words,Words\\n // (where \\n represents a new line)\n</code></pre>\n\n<p>I've tried adding \\n as a delimiter, but it didn't help. I don't even get inside \"case 3:\" since token points to null.</p>\n\n<p><strong>FINAL EDIT</strong></p>\n\n<p>I figured out my problem. addPrereqs() calls strtok within itself, and of course this means that messes up my original call to strtok in my main function. I read that one can use strtok_r() as a workaround. Ultimately I called strtok() once again right before I call addPrereqs() and used that token right away for what I originally wanted it. Relevant section of the code is below:</p>\n\n<pre><code>for(j = 0, token = strtok(buffer, del); token != NULL; token = strtok(NULL, del), j++) {\n    switch(j) {\n        case 0:\n            index = fnv1aHash(token, (reqdata_len-1));\n            t_indices[i] = index;\n            addNode(&amp;(table[index]));\n            table[index][0].course = (char *) malloc(1 + strlen(token));\n            strcpy(table[index][0].course, token);\n            break;\n        case 1:\n            table[index][0].category = (char *) malloc(1 + strlen(token));\n            strcpy(table[index][0].category, token);\n            break;\n        case 2:\n            strcpy(prereqbuff, token);\n            token = strtok(NULL, del);\n            table[index][0].notes = (char *) malloc(1 + strlen(token));\n            strcpy(table[index][0].notes, token);\n            addPrereqs(prereqbuff, &amp;(table[index][0].prereqs));\n            break;\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "list"], "comments": [{"owner": {"reputation": 3057, "user_id": 2403513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/951ec384441df1db3a7394c9af5250fd?s=128&d=identicon&r=PG", "display_name": "ahoffner", "link": "https://stackoverflow.com/users/2403513/ahoffner"}, "edited": false, "score": 2, "creation_date": 1430347380, "post_id": 29955776, "comment_id": 48032488, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/4893706/why-does-my-c-random-number-generator-only-return-42\">Why does my C random number generator only return &quot;42&quot;?</a>"}, {"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 0, "creation_date": 1430347846, "post_id": 29955776, "comment_id": 48032693, "body": "I&#39;m surprised you don&#39;t see that your array is always the same (beyond even the first element)."}], "answers": [{"tags": [], "owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "is_accepted": true, "score": 3, "last_activity_date": 1430347202, "creation_date": 1430347202, "answer_id": 29955837, "question_id": 29955776, "link": "https://stackoverflow.com/questions/29955776/drand48-always-returning-0-for-first-element-c/29955837#29955837", "title": "Drand48 always returning 0 for first element? (C)", "body": "<p>You need to call <code>srand48()</code> <em>before</em> calling <code>drand48()</code>. From t<a href=\"http://man7.org/linux/man-pages/man3/drand48.3.html\" rel=\"nofollow\">he manpage for <code>drand48()</code></a>:</p>\n\n<blockquote>\n  <p>The srand48(), seed48() and lcong48() functions are initialization\n  functions, one of which should be called before using drand48(),\n  lrand48() or mrand48().</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1430353031, "post_id": 29955936, "comment_id": 48034389, "body": "Also make sure to only call <code>srand48</code> once"}], "tags": [], "owner": {"reputation": 51, "user_id": 3670102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cba299f9966c1ec932c7fe5a06e43149?s=128&d=identicon&r=PG&f=1", "display_name": "user3670102", "link": "https://stackoverflow.com/users/3670102/user3670102"}, "is_accepted": false, "score": 2, "last_activity_date": 1430363616, "last_edit_date": 1430363616, "creation_date": 1430347652, "answer_id": 29955936, "question_id": 29955776, "link": "https://stackoverflow.com/questions/29955776/drand48-always-returning-0-for-first-element-c/29955936#29955936", "title": "Drand48 always returning 0 for first element? (C)", "body": "<p>You need to move the <code>srand48()</code> before the call to <code>drand48()</code>.  After any particular call to <code>srand48()</code>, <code>drand48()</code> will give the same sequence.  </p>\n\n<p>So using time to get and unpredictable <code>srand48()</code> seed will give the overall appearance of randomness.  But only if you do this <em>before</em> repeatedly calling <code>drand48()</code>.</p>\n"}], "owner": {"reputation": 23, "user_id": 4585790, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ac4356ffab4061d7e8f4a644057faa6d?s=128&d=identicon&r=PG&f=1", "display_name": "REALLYANGRYSTUDENT", "link": "https://stackoverflow.com/users/4585790/reallyangrystudent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 570, "favorite_count": 0, "accepted_answer_id": 29955837, "answer_count": 2, "score": -1, "last_activity_date": 1430363616, "creation_date": 1430346920, "question_id": 29955776, "link": "https://stackoverflow.com/questions/29955776/drand48-always-returning-0-for-first-element-c", "title": "Drand48 always returning 0 for first element? (C)", "body": "<p>For some reason when I try to make an array and fill it up with random numbers generated by drand48, the first element will always be 0. Code is run like ./exec size. Can someone please help me out?</p>\n\n<pre><code>int matrixSize = atoi(argv[1]);\ndouble vect[matrixSize];\nprintf(\"THIS IS NVECTOR-----------------------\\n\");\nfor(k = 0; k &lt; matrixSize; ++k){\n    vect[k] = drand48();\n    printf(\"%f\\n\", vect[k]);\n}\nsrand48(time(NULL));\n</code></pre>\n"}, {"tags": ["c", "multithreading", "pthreads"], "comments": [{"owner": {"reputation": 54473, "user_id": 41747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbc53a4faffef3f7a1d0a3c492d21757?s=128&d=identicon&r=PG", "display_name": "D.Shawley", "link": "https://stackoverflow.com/users/41747/d-shawley"}, "edited": false, "score": 0, "creation_date": 1430347083, "post_id": 29955734, "comment_id": 48032358, "body": "It depends on what <i>&quot;it&#39;s job&quot;</i> is.  If it is to increment <code>n</code> as fast as possible, then what you have works."}, {"owner": {"reputation": 6043, "user_id": 3998522, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/042b8c418b7f1129fa54862a935377b8?s=128&d=identicon&r=PG&f=1", "display_name": "xiver77", "link": "https://stackoverflow.com/users/3998522/xiver77"}, "reply_to_user": {"reputation": 54473, "user_id": 41747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbc53a4faffef3f7a1d0a3c492d21757?s=128&d=identicon&r=PG", "display_name": "D.Shawley", "link": "https://stackoverflow.com/users/41747/d-shawley"}, "edited": false, "score": 0, "creation_date": 1430347418, "post_id": 29955734, "comment_id": 48032497, "body": "@D.Shawley Well, I need to spawn several threads, and let them do some calculation together, which must be done within a certain time, say 30 seconds. So they should do their best within 28 seconds for example, and the last 2 seconds are for some cleanup job. Is my solution measuring the time accurately enough to do this?"}, {"owner": {"reputation": 54473, "user_id": 41747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbc53a4faffef3f7a1d0a3c492d21757?s=128&d=identicon&r=PG", "display_name": "D.Shawley", "link": "https://stackoverflow.com/users/41747/d-shawley"}, "edited": false, "score": 0, "creation_date": 1430355002, "post_id": 29955734, "comment_id": 48034923, "body": "yes.  IIRC, <code>CLOCKS_PER_SEC</code> is required to be 1,000,000 by POSIX so it should be more that accurate."}], "answers": [{"comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1430350022, "post_id": 29956348, "comment_id": 48033487, "body": "Agreed. But with the caveat that it is safe/desirable to abort &quot;do work&quot; at any time."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1430350131, "post_id": 29956348, "comment_id": 48033515, "body": "@AlanAu: Alternatively, you can have a <code>volatile sig_atomic_t</code> that is tested in the loop, and set by the signal handler. That way the cleanup can be done outside of the signal-handler context, in normal code."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1430350286, "post_id": 29956348, "comment_id": 48033565, "body": "Again agreed. But it depends on the granularity of the timeout (seconds, microseconds, etc) versus how long the actual work is.  If, for example, the timeout is in seconds and the work in milli or micro seconds then the OP&#39;s current solution is probably adequate and somewhat simpler."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1430350371, "post_id": 29956348, "comment_id": 48033600, "body": "@AlanAu: Eh, I&#39;ve found this kind of timer to be surprisingly simple to use. I&#39;m a bit wary of mixing signals and threads, however."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1430350556, "post_id": 29956348, "comment_id": 48033654, "body": "Yep. I meant the signal and threads aspect rather than the timer per se. Especially in this case where there are multiple threads. The timer solution would not work (or would require signal/thread/synchronisation gymnastics) if, for example, each thread required a different work timeout. Cause the signal could be delivered to any thread."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1430350676, "post_id": 29956348, "comment_id": 48033685, "body": "@AlanAu: The <code>volatile sig_atomic_t</code>-variant should easily work with threads."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1430415672, "post_id": 29956348, "comment_id": 48068451, "body": "You don&#39;t want to call <code>pthread_exit()</code> from a signal handler, really!"}], "tags": [], "owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "is_accepted": false, "score": 0, "last_activity_date": 1430351940, "last_edit_date": 1430351940, "creation_date": 1430349788, "answer_id": 29956348, "question_id": 29955734, "link": "https://stackoverflow.com/questions/29955734/how-do-i-make-a-posix-thread-finish-its-job-after-a-certain-amount-of-time/29956348#29956348", "title": "How do I make a Posix thread finish its job after a certain amount of time?", "body": "<p>You can set up a timer to send you a signal when your time is up. Pseudocode:</p>\n\n<pre><code>sig_action_handler()\n{\n  /*cleanup*/\n  pthread_exit();\n}\n\nworker()\n{\n  sigaction(sig_action_handler);\n  timer_create();\n  timer_settime();\n  while(true)\n    {\n      /*do work*/\n    }\n }\n</code></pre>\n\n<p>Alternatively, and for easier threading:</p>\n\n<pre><code>sig_action_handler(int, siginfo_t *t, void *)\n{\n  volatile sig_atomic_t *at = t-&gt;si_value.sival_ptr;\n  *at = true;\n}\n\nworker()\n{\n  volatile sig_atomic_t at = 0;\n  struct sigevent si = {/*...*/, .sigev_value.sival_ptr = &amp;at};\n  sigaction(sig_action_handler);\n  timer_create(/*...*/, &amp;si, /*...*/);\n  timer_settime();\n  while(!at)\n    {\n      /*do work*/\n    }\n  /*cleanup*/\n }\n</code></pre>\n"}], "owner": {"reputation": 6043, "user_id": 3998522, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/042b8c418b7f1129fa54862a935377b8?s=128&d=identicon&r=PG&f=1", "display_name": "xiver77", "link": "https://stackoverflow.com/users/3998522/xiver77"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1430351940, "creation_date": 1430346730, "question_id": 29955734, "link": "https://stackoverflow.com/questions/29955734/how-do-i-make-a-posix-thread-finish-its-job-after-a-certain-amount-of-time", "title": "How do I make a Posix thread finish its job after a certain amount of time?", "body": "<p>I want to make a Posix thread finish its job after a certain amount of time has passed. You can see my solution in the simple C + Python pseudocode. But I don't think that is an efficient and accurate solution. What is the best way to achive this?</p>\n\n<pre><code>Mutex incrementLock\nBigInteger n = 0\nint milliToWork = 5000\n\nWorker()\n    int elapsedMilli = 0\n    while elapsedMilli &lt; milliToWork\n        clock_t startClock = clock()\n        Lock(incrementLock)\n        n += 1\n        Unlock(incrementLock)\n        clock_t endClock = clock()\n        elapsedMilli += (double)(endClock - startClock) / (double)CLOCKS_PER_SEC * 1000.0\n\nmain()\n    int nThreads = 100\n    Thread threads[nThreads]\n    for i = 1 to nThreads\n        ThreadCreate(threads[i], Worker)\n    for i = 1 to nThreads\n        ThreadJoin(threads[i])\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 1090, "user_id": 2843157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qorh2.jpg?s=128&g=1", "display_name": "John Odom", "link": "https://stackoverflow.com/users/2843157/john-odom"}, "edited": false, "score": 1, "creation_date": 1430346629, "post_id": 29955685, "comment_id": 48032169, "body": "Please paste the code into your question instead of a link. You never know when the link will stop working."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1430346754, "post_id": 29955685, "comment_id": 48032208, "body": "Please format it too, it&#39;s difficult to read."}], "answers": [{"tags": [], "owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "is_accepted": false, "score": 2, "last_activity_date": 1430351262, "last_edit_date": 1430351262, "creation_date": 1430347952, "answer_id": 29956001, "question_id": 29955685, "link": "https://stackoverflow.com/questions/29955685/in-c-value-is-changing-from-the-end-of-a-function-to-outside-the-function-after/29956001#29956001", "title": "in c, value is changing from the end of a function to outside the function after function call", "body": "<p>Your <code>_setCapacityDynArr</code> function is written in a rather nonsensical fashion. All functions in this \"API\" receive a pointer <code>v</code> (or, sometimes, <code>b</code>) to an existing <code>struct DynArr</code> object, which they work with. They can manipulate the fields of <code>*v</code> object. They can allocate/deallocate/reallocate the actual array <code>v-&gt;data</code>. But they never allocate/deallocate the <code>*v</code> object itself. Object <code>*v</code> is passed from the outside and managed by the outside code.</p>\n\n<p>But your <code>_setCapacityDynArr</code> function attempts to do something completely and drastically different. It begins with </p>\n\n<pre><code>temp = v;\nv = malloc(sizeof(struct DynArr));\n...\nfree(temp);\n</code></pre>\n\n<p>That is already incorrect. This is completely unacceptable. You are not allowed to allocate/deallocate <code>*v</code> object itself.</p>\n\n<p>In any case, changing the value of <code>v</code> inside the function make no sense simply because <code>v</code> is passed to <code>_setCapacityDynArr</code> by value. The outside code will not see these changes anyway. </p>\n\n<p>This latter detail is what makes your code to output allegedly \"changing\" value of <code>v-&gt;size</code> - you are simply outputing two completely different <code>v-&gt;size</code> values and one of them actually belongs to deallocated memory. In line 77 you are printing <code>v-&gt;size</code> value stored in \"dead\" memory already deallocated by <code>free(temp)</code> call inside <code>_setCapacityDynArr</code>.</p>\n\n<p>Don't try to acclocate/deallocate <code>*v</code> object inside your <code>_setCapacityDynArr</code>. Where did you get that idea? Just reallocate <code>v-&gt;data</code> and change  the other firelds accordingly. But don't attempt to change the value of <code>v</code> itself.</p>\n"}], "owner": {"reputation": 41, "user_id": 3713215, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7020e28cc2ed44533ac6a4711f3ff9b5?s=128&d=identicon&r=PG&f=1", "display_name": "user3713215", "link": "https://stackoverflow.com/users/3713215/user3713215"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1430351262, "creation_date": 1430346482, "last_edit_date": 1430347480, "question_id": 29955685, "link": "https://stackoverflow.com/questions/29955685/in-c-value-is-changing-from-the-end-of-a-function-to-outside-the-function-after", "title": "in c, value is changing from the end of a function to outside the function after function call", "body": "<p>In line 77 v->size is 0 while in line 186 v-size is 2. I dont understand why this is so because line 186 is at the very end of the function definition of void _setCapacityDynArr(struct DynArr *v, int newCap)(in line 140) and line 77 is right after the call to the function. Somehow between the end of the function and the next line after the function call the value has changed. I thought because v is a pointer it should retain the value. If someone could please tell me why the value is changing it would be greatly appreciated. I've run out of ideas and have no idea what to do.</p>\n\n<p><a href=\"http://pastebin.com/tWR6w8rG\" rel=\"nofollow\">http://pastebin.com/tWR6w8rG</a></p>\n\n<pre><code>   /* \n * File:   main.c\n * Author: user1\n *\n * Created on April 7, 2015, 3:57 PM\n */\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n/* \n * File:   main.c\n * Author: user1\n *\n * Created on April 7, 2015, 3:57 PM\n */\n\n/*\n * \n */\n# ifndef TYPE\n# define TYPE int\n# endif\n\nstruct DynArr\n{\n    TYPE *data;\n        int size;\nint capacity;\n};\n\n/* pointer to the data array */\n/* Number of elements in the array */\n/* capacity ofthe array */\nvoid initDynArr(struct DynArr *v, int capacity)\n{\n    v-&gt;data = malloc(sizeof(TYPE) * capacity);\n    //assert(v-&gt;data != 0);\n    v-&gt;size = 0;\n    v-&gt;capacity = capacity;\n}\n\nvoid freeDynArr(struct DynArr *v)\n{\n    if(v-&gt;data != 0)\n    {\n        free(v-&gt;data); /* free the space on the heap */\n        v-&gt;data = 0;\n        /* make it point to null */\n    }\n    v-&gt;size = 0;\n    v-&gt;capacity = 0;\n}\n\nint sizeDynArr( struct DynArr *v)\n{\n    return v-&gt;size;\n}\n\n/*\nvoid addDynArr(struct DynArr *v, TYPE val)\n{\n// Check to see if a resize is necessary \nif(v-&gt;size == v-&gt;capacity)\n_setCapacityDynArr(v, 2 * v-&gt;capacity);\nv-&gt;data[v-&gt;size] = val;\nv-&gt;size++;\n}\n\n*/\n\nvoid addDynArr(struct DynArr *v, TYPE val)\n{\n    // Check to see if a resize is necessary \n    if(v-&gt;size &gt;= v-&gt;capacity)\n    {\n        _setCapacityDynArr(v, 2 * v-&gt;capacity);\n        printf(\"&gt;&gt;&gt;%d\",v-&gt;size);   //&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;v-&gt;size = 0\n        v-&gt;data[v-&gt;size] = val;\n        v-&gt;size++;\n\n        printf(\"setcapacity: size is: %d capacity is: %d value is %d value in array is: %d\\n\", v-&gt;size, v-&gt;capacity, val, v-&gt;data[v-&gt;size-1]);\n\n\n    }\n    else\n    {\n\n\n        v-&gt;data[v-&gt;size] = val;\n        v-&gt;size++;\n\n       printf(\"not setcapacity: size is: %d capacity is: %d value is %d value in array is: %d\\n\", v-&gt;size, v-&gt;capacity, val, v-&gt;data[v-&gt;size-1]);\n\n\n    }\n\n//printf(\"%d\\n\", v-&gt;capacity);\n}\n\nvoid removeDynArray(struct DynArr *b, TYPE v)\n{\n    for(int i = 0; i &lt; b-&gt;size; i++)\n    {\n        if(b-&gt;data[i] == v)\n        {\n\n            while(i &lt; (b-&gt;size))\n            {\n                b-&gt;data[i] = b-&gt;data[i+1];\n\n                i++;\n\n\n\n            }\n\n            break;\n\n\n        }\n\n    }\n    b-&gt;size--;\n}\n\n\nvoid print(struct DynArr *v)\n{\n\n    for(int i = 0; i &lt; v-&gt;size; i++)\n    {\n\n        printf(\"%d\\n\", v-&gt;data[i]);\n\n    }\n}\n\n\n//do this\nvoid _setCapacityDynArr(struct DynArr *v, int newCap)\n{\n\n\n    struct DynArr* temp;\n\n    temp = v;\n\n\n\n   ///print(temp);\n\n    //struct DynArr v;\n    v = malloc(sizeof(struct DynArr));\n\n    v-&gt;data = malloc(sizeof(TYPE)  * newCap);\n\n\n\n\n\n    v-&gt;capacity = newCap;\n\n\n\n    v-&gt;size = 0; //temp size is also being set\n\n\n\n\n    for (int i = 0 ; i &lt; temp-&gt;size; i++)\n    {\n        v-&gt;data[i] = temp-&gt;data[i];\n\n        v-&gt;size++;\n    }\n\n\n\n\n\n    free(temp-&gt;data);\n    temp-&gt;size = 0;\n    temp-&gt;capacity = 0;\n    temp = 0;\n\n    printf(\"&gt;!&gt;&gt;%d\",v-&gt;size); //////////&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;v-&gt;size = 2\n\n}\n\nint main(int argc, char** argv) \n{\n\n    struct DynArr a;\n\n    initDynArr(&amp;a, 2);\n\n    addDynArr(&amp;a, 5);\n\n    addDynArr(&amp;a, 7);\n\n\n\n    addDynArr(&amp;a, 8);\n\n\n\n    //printf(\"%d\\n\", a.size);\n\n    //print(&amp;a);\n\n   // printf (\"%d\\n\",a.data[2]);\n\n\n    return (EXIT_SUCCESS);\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1430346479, "post_id": 29955661, "comment_id": 48032108, "body": "Is that your exact code? Where are you learning c from?"}, {"owner": {"reputation": 1, "user_id": 4821809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac4a1b6d12eaa4637e18ce45ea13c01b?s=128&d=identicon&r=PG&f=1", "display_name": "jojki rakim", "link": "https://stackoverflow.com/users/4821809/jojki-rakim"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1430346638, "post_id": 29955661, "comment_id": 48032171, "body": "yes thats my code im learning code by my self @iharob"}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 2, "last_activity_date": 1430346573, "creation_date": 1430346573, "answer_id": 29955700, "question_id": 29955661, "link": "https://stackoverflow.com/questions/29955661/why-my-program-stops-working-when-type-enter/29955700#29955700", "title": "why my program stops working when type enter?", "body": "<pre><code>scanf(\"%s\", &amp;word);\n</code></pre>\n\n<p>needs an array of characters to read the data. <code>&amp;word</code> only has space for one character.</p>\n\n<p>You are running into undefined behavior.</p>\n\n<p>Use</p>\n\n<pre><code>char word[26];\nscanf(\"%25s\", &amp;word);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 0, "last_activity_date": 1430346605, "creation_date": 1430346605, "answer_id": 29955710, "question_id": 29955661, "link": "https://stackoverflow.com/questions/29955661/why-my-program-stops-working-when-type-enter/29955710#29955710", "title": "why my program stops working when type enter?", "body": "<p>The reason is that you are passing the address to the <code>char</code> variable you declared and <code>scanf()</code> is trying to write two bytes where it only fits one.</p>\n\n<pre><code>char word\n</code></pre>\n\n<p>this declares a <code>char</code> variable, it can hold a single byte</p>\n\n<pre><code>scanf(\"%s\", &amp;word);\n</code></pre>\n\n<p>whill require at least one byte for an empty string the <code>'\\0'</code>.</p>\n\n<p>But also, you declared a lot of functions inside <code>void grab_user_input(void)</code>, that is not valid standard c, it might work with some compiler, but it's not standard.</p>\n"}], "owner": {"reputation": 1, "user_id": 4821809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac4a1b6d12eaa4637e18ce45ea13c01b?s=128&d=identicon&r=PG&f=1", "display_name": "jojki rakim", "link": "https://stackoverflow.com/users/4821809/jojki-rakim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1430346721, "creation_date": 1430346344, "last_edit_date": 1430346721, "question_id": 29955661, "link": "https://stackoverflow.com/questions/29955661/why-my-program-stops-working-when-type-enter", "title": "why my program stops working when type enter?", "body": "<p>My main goal for this code is to capture the users input and do whatever he wants to do with the choices I have presented, but I'm stuck: when I compile, I can only type the word and the program stops working.</p>\n\n<p>i have no idea where I'm making a mistake.</p>\n\n<p>The is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#define MAX_STRING_LENGTH 100\n\nvoid grab_user_input(void);\nvoid load_menu(void);\nvoid Count_the_letters(void);\n\nint main(void)\n{\n    grab_user_input();\n    return 0;\n}\n\nvoid grab_user_input(void)\n{\n    char word;\n    {\n        printf(\"Please enter a single word (25 characters or less): \\n\");\n        scanf(\"%s\", &amp;word);\n        printf(\"Thanks! The word you entered is: %s\\n\", word);\n    }\n\n    void load_menu(void)\n    {\n        int choice;\n        do\n        {\n            int choice;\n            printf(\"\\n(:===Menu====:)\\n\");\n            printf(\"1. Count_the_letters\\n\");\n            printf(\"2. Count_the_vowels\\n\");\n            printf(\"3. Reverse_the_word\\n\");\n            printf(\"4. Check_if_palindrome\\n\");\n            printf(\"5. Enter_a_new_word\\n\");\n            printf(\"6.     Exit\\n\");\n            scanf(\"%d\", &amp;choice);\n            switch (choice)\n            {\n            case 1: Count_the_letters();\n            break;\n\n            }\n        } while (choice != 3);\n    }\n\n    void Count_the_letters(void)\n    {\n        char S[MAX_STRING_LENGTH];\n        int  count;\n\n        count = 0;\n\n        do {\n            printf(\"string:\\t\");\n            scanf(\"%s\",S);\n            if (strcmp(S,\"exit\") != 0)\n                ++count;\n        } while (strcmp(S,\"exit\") != 0);\n\n        printf(\"word count:\\t%d\\n\", count);\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "debugging", "gdb", "malloc"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1430346389, "post_id": 29955609, "comment_id": 48032065, "body": "You need to find, or compile, a debug version of the libraries."}, {"owner": {"reputation": 10516, "user_id": 776345, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/379d691c110d9dd8becf1fee282d140d?s=128&d=identicon&r=PG", "display_name": "Paschalis", "link": "https://stackoverflow.com/users/776345/paschalis"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1430347299, "post_id": 29955609, "comment_id": 48032447, "body": "@MartinJames that&#39;s the part I am failing at! :("}], "answers": [{"comments": [{"owner": {"reputation": 10516, "user_id": 776345, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/379d691c110d9dd8becf1fee282d140d?s=128&d=identicon&r=PG", "display_name": "Paschalis", "link": "https://stackoverflow.com/users/776345/paschalis"}, "edited": false, "score": 0, "creation_date": 1430346803, "post_id": 29955713, "comment_id": 48032233, "body": "I should have downvoted just because you said &quot;gdb is not a wizard&quot;!"}, {"owner": {"reputation": 10516, "user_id": 776345, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/379d691c110d9dd8becf1fee282d140d?s=128&d=identicon&r=PG", "display_name": "Paschalis", "link": "https://stackoverflow.com/users/776345/paschalis"}, "edited": false, "score": 0, "creation_date": 1430346854, "post_id": 29955713, "comment_id": 48032258, "body": "Jokes aside, I think I did that. I am on Ubuntu, and I believe <code>libc6-dbg</code> is the equivalent of what you suggested!"}, {"owner": {"reputation": 9620, "user_id": 1783163, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/BfUwH.jpg?s=128&g=1", "display_name": "peterh", "link": "https://stackoverflow.com/users/1783163/peterh"}, "reply_to_user": {"reputation": 10516, "user_id": 776345, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/379d691c110d9dd8becf1fee282d140d?s=128&d=identicon&r=PG", "display_name": "Paschalis", "link": "https://stackoverflow.com/users/776345/paschalis"}, "edited": false, "score": 0, "creation_date": 1430346865, "post_id": 29955713, "comment_id": 48032262, "body": "@Paschalis I am sorry, I didn&#39;t have any negative intention with that. I removed this from the answer."}, {"owner": {"reputation": 10516, "user_id": 776345, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/379d691c110d9dd8becf1fee282d140d?s=128&d=identicon&r=PG", "display_name": "Paschalis", "link": "https://stackoverflow.com/users/776345/paschalis"}, "edited": false, "score": 0, "creation_date": 1430347204, "post_id": 29955713, "comment_id": 48032399, "body": "I was joking :) I &#39;ve installed a debug version of the libc. Still does not work! I &#39;ve updated my question a while ago!"}, {"owner": {"reputation": 9620, "user_id": 1783163, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/BfUwH.jpg?s=128&g=1", "display_name": "peterh", "link": "https://stackoverflow.com/users/1783163/peterh"}, "reply_to_user": {"reputation": 10516, "user_id": 776345, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/379d691c110d9dd8becf1fee282d140d?s=128&d=identicon&r=PG", "display_name": "Paschalis", "link": "https://stackoverflow.com/users/776345/paschalis"}, "edited": false, "score": 0, "creation_date": 1430347347, "post_id": 29955713, "comment_id": 48032468, "body": "@Paschalis Is the glibc source also on your system? Can you see its files? It is big."}, {"owner": {"reputation": 10516, "user_id": 776345, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/379d691c110d9dd8becf1fee282d140d?s=128&d=identicon&r=PG", "display_name": "Paschalis", "link": "https://stackoverflow.com/users/776345/paschalis"}, "edited": false, "score": 0, "creation_date": 1430347945, "post_id": 29955713, "comment_id": 48032742, "body": "I have installed the <code>eglibc-source</code> package, but I haven&#39;t found the source yet on the machine. Also, still gdb does not find src of <code>malloc.c</code>"}], "tags": [], "owner": {"reputation": 9620, "user_id": 1783163, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/BfUwH.jpg?s=128&g=1", "display_name": "peterh", "link": "https://stackoverflow.com/users/1783163/peterh"}, "is_accepted": false, "score": 3, "last_activity_date": 1430346837, "last_edit_date": 1430346837, "creation_date": 1430346611, "answer_id": 29955713, "question_id": 29955609, "link": "https://stackoverflow.com/questions/29955609/include-source-code-of-malloc-c-in-gdb/29955713#29955713", "title": "Include source code of malloc.c in gdb?", "body": "<p>Gdb can only show the source codes because the debug-compiled binaries contain references between the binary code and the source files.</p>\n\n<p><code>malloc()</code> is in the C library. On normal systems, it is not compiled with debug metadata, and its sources are also not installed in the system.</p>\n\n<p>But they are reachable, you only need to install the debug versions of these libraries. For example, on debian an <code>apt-get install glibc-debug</code> or similar will do it. On SuSE, a <code>zipper in libc6-debug</code> (afaik, maybe the exact package names could be a little bit differ).</p>\n"}, {"comments": [{"owner": {"reputation": 10516, "user_id": 776345, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/379d691c110d9dd8becf1fee282d140d?s=128&d=identicon&r=PG", "display_name": "Paschalis", "link": "https://stackoverflow.com/users/776345/paschalis"}, "edited": false, "score": 0, "creation_date": 1430349975, "post_id": 29956038, "comment_id": 48033476, "body": "Works like charm! Also, step 4 can be added in <code>.gdbinit</code>!"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "reply_to_user": {"reputation": 10516, "user_id": 776345, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/379d691c110d9dd8becf1fee282d140d?s=128&d=identicon&r=PG", "display_name": "Paschalis", "link": "https://stackoverflow.com/users/776345/paschalis"}, "edited": false, "score": 1, "creation_date": 1430350831, "post_id": 29956038, "comment_id": 48033739, "body": "Great! One somewhat related gotcha (which it sounds like you know about). But for future readers: Don&#39;t break on <code>malloc</code> itself as libc does all sorts of symbol gymnastics so that the <code>malloc</code> symbol is not the actual <code>malloc</code> that is invoked. Instead break in  the caller and step into the <code>malloc</code> call."}, {"owner": {"reputation": 1649, "user_id": 6824752, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/dlCSp.png?s=128&g=1", "display_name": "Filip Kilibarda", "link": "https://stackoverflow.com/users/6824752/filip-kilibarda"}, "edited": false, "score": 6, "creation_date": 1560735176, "post_id": 29956038, "comment_id": 99820296, "body": "For <code>Ubuntu 18.04</code> users, seems that <code>eglibc-source</code> isn&#39;t a thing anymore. Seems to just be <code>glibc-source</code> now, based on my search through the repos."}], "tags": [], "owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "is_accepted": true, "score": 29, "last_activity_date": 1430348127, "creation_date": 1430348127, "answer_id": 29956038, "question_id": 29955609, "link": "https://stackoverflow.com/questions/29955609/include-source-code-of-malloc-c-in-gdb/29956038#29956038", "title": "Include source code of malloc.c in gdb?", "body": "<p>The following worked for me. Not sure whether there is a better way.</p>\n\n<ol>\n<li>Install libc6-dbg (which you have already done):\n<code>sudo apt-get install libc6-dbg</code></li>\n<li>Install the eglibc-source package (ubuntu actually uses eglibc): <code>sudo apt-get install eglibc-source</code>.</li>\n<li>Unpack the tar file that was installed in /usr/src/glibc: <code>/usr/src/glibc $ sudo tar xvf eglibc-2.19.tar.xz</code></li>\n<li>Crank up gdb and add in the path to the malloc source: <code>(gdb) dir /usr/src/glibc/eglibc-2.19/malloc</code></li>\n</ol>\n\n<blockquote>\n  <p>(gdb) n </p>\n  \n  <p>13          char *c = malloc(100); </p>\n  \n  <p>(gdb) s</p>\n  \n  <p>__GI___libc_malloc (bytes=100) at malloc.c:2876 2876    </p>\n  \n  <p>{ </p>\n  \n  <p>(gdb) </p>\n</blockquote>\n"}], "owner": {"reputation": 10516, "user_id": 776345, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/379d691c110d9dd8becf1fee282d140d?s=128&d=identicon&r=PG", "display_name": "Paschalis", "link": "https://stackoverflow.com/users/776345/paschalis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7041, "favorite_count": 15, "accepted_answer_id": 29956038, "answer_count": 2, "score": 18, "last_activity_date": 1467291999, "creation_date": 1430346093, "last_edit_date": 1495540497, "question_id": 29955609, "link": "https://stackoverflow.com/questions/29955609/include-source-code-of-malloc-c-in-gdb", "title": "Include source code of malloc.c in gdb?", "body": "<p>How can I include/view the source code of <code>malloc</code> in gdb?</p>\n\n<p>I want to do a step by step execution in <code>gdb</code>, and step into <code>malloc.c</code> source code when any of the malloc functions is called.</p>\n\n<p>Currently what gdb says is:\n<code>malloc.c: No such file or directory.</code></p>\n\n<p><a href=\"https://stackoverflow.com/questions/9220853/call-to-malloc-failing-in-gdb-session\">This</a> guy here faced the same problem, but they do not mention a solution, ie how to actually step into the source code of malloc.</p>\n\n<p>I am on <code>Ubuntu server 14.04</code>, and I have already tried to install the following:\n<code>libc6-dbg</code>, <code>libc6-dev</code>, and <code>libc6-dbgsym</code>.\nI don't even know if one of these packages might help, but installing the <code>libc-dbgsym</code> gives me the following error:</p>\n\n<pre><code>dpkg: error processing archive /var/cache/apt/archives/libc6-dbgsym_2.19-0ubuntu6.6_amd64.ddeb (--unpack):  trying to overwrite\n    '/usr/lib/debug/usr/lib/x86_64-linux-gnu/audit/sotruss-lib.so', which\n    is also in package libc6-dbg:amd64 2.19-0ubuntu6.6 dpkg-deb: error:\n    subprocess paste was killed by signal (Broken pipe)\n</code></pre>\n"}, {"tags": ["c", "openssl"], "comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 1, "creation_date": 1430347186, "post_id": 29955600, "comment_id": 48032395, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/26656680/check-if-a-connection-is-tlsv1-vs-sslv3-ssl-cipher-description-ssl-cipher-get-n\">Check if a connection is TLSv1 vs SSLv3 (SSL_CIPHER_description/SSL_CIPHER_get_name)</a>. And see the documentation on the functions at <a href=\"https://www.openssl.org/docs/ssl/SSL_CIPHER_get_name.html\" rel=\"nofollow noreferrer\"><code>SSL_CIPHER_get_name</code></a>. Also see the source code for <code>s_client</code> located at <code>&lt;openssl src&gt;&#47;apps&#47;s_client.c</code>."}, {"owner": {"reputation": 97, "user_id": 3421673, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/fe8ffb06dd217697bace40a6631b8bbb?s=128&d=identicon&r=PG&f=1", "display_name": "user3421673", "link": "https://stackoverflow.com/users/3421673/user3421673"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1430347831, "post_id": 29955600, "comment_id": 48032684, "body": "I have read this topic before I make this one, but I didn&#39;t find answer for my question. I don&#39;t know if this code which I posted is doing what I need, because I don&#39;t know how to print it out. I also read the documentation as I wrote in first post, but I am still not sure how to use it, and I didn&#39;t find any example. Thanks ;)"}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 1, "creation_date": 1430348058, "post_id": 29955600, "comment_id": 48032782, "body": "<code>SSL_CIPHER_get_name</code> returns a <code>const char*</code>. Try printing it. You can do so with <code>printf(&quot;Cipher name: %s&quot;, SSL_CIPHER_get_name(cipher) ? SSL_CIPHER_get_name(cipher) : &quot;no cipher&quot;);</code>"}, {"owner": {"reputation": 97, "user_id": 3421673, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/fe8ffb06dd217697bace40a6631b8bbb?s=128&d=identicon&r=PG&f=1", "display_name": "user3421673", "link": "https://stackoverflow.com/users/3421673/user3421673"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1430348487, "post_id": 29955600, "comment_id": 48032970, "body": "Yes, it works, this is what I need, thank you so much :)"}], "owner": {"reputation": 97, "user_id": 3421673, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/fe8ffb06dd217697bace40a6631b8bbb?s=128&d=identicon&r=PG&f=1", "display_name": "user3421673", "link": "https://stackoverflow.com/users/3421673/user3421673"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 498, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1430346719, "creation_date": 1430346044, "last_edit_date": 1430346719, "question_id": 29955600, "link": "https://stackoverflow.com/questions/29955600/how-to-get-name-of-cipher", "title": "How to get name of cipher?", "body": "<p>I have problem with getting name of cipher. I read documentation about SSL_CIPHER_get_name and SSL_get_current_cipher, there is some differences, but I think that result is similar. However, I still don't understand how to use it in code, and I didn't find any examples. Could somebody help me? I also need to print it, but I don't know how. Here is my code:</p>\n\n<pre><code>SSL *ssl = SSL_new(ctx);\nSSL_set_fd(ssl,sockfd);\nSSL_connect(ssl);\n\nSSL_CIPHER *cipher;\ncipher = SSL_get_current_cipher(ssl);\nSSL_CIPHER_get_name(cipher);\n</code></pre>\n\n<p>Thank you in advance.</p>\n"}, {"tags": ["c++", "c", "sse", "simd"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1430345985, "post_id": 29955471, "comment_id": 48031904, "body": "No, you can&#39;t easily do this. The closest thing would be <code>_mm_shuffle_epi8</code>, which is a general purpose permute, but I don&#39;t see any obvious way to apply it here. You really want the inverse of this instruction, which doesn&#39;t exist."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 2, "creation_date": 1430346130, "post_id": 29955471, "comment_id": 48031952, "body": "In your example, shouldn&#39;t element r[0] also be 1 ?"}, {"owner": {"reputation": 1071, "user_id": 1293890, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d8b025551cf4766b10e57a2e5589c755?s=128&d=identicon&r=PG", "display_name": "martin s", "link": "https://stackoverflow.com/users/1293890/martin-s"}, "reply_to_user": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1430347086, "post_id": 29955471, "comment_id": 48032360, "body": "Yes, I was thinking if I could use the _mm_shuffle_epi8 instruction. But I could not come up with a solution. I was affraid to hear this.  Thanks for the fast answer though. And yes, r[0] should be 1."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1430347239, "post_id": 29955471, "comment_id": 48032415, "body": "FWIW you can do it with a loop, which is no more efficient than the original scalar version, but if this is going to be mixed in with a bunch of other SIMD code then it might be worthwhile, in order to avoid scalar code in the middle of your SIMD instruction stream."}, {"owner": {"reputation": 1071, "user_id": 1293890, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d8b025551cf4766b10e57a2e5589c755?s=128&d=identicon&r=PG", "display_name": "martin s", "link": "https://stackoverflow.com/users/1293890/martin-s"}, "reply_to_user": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1430347523, "post_id": 29955471, "comment_id": 48032544, "body": "Do think about shifting the register 16 times and comparing with the index position?"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1430347807, "post_id": 29955471, "comment_id": 48032674, "body": "Yes, something like that, although you might be able to &quot;early out&quot; once you have processed the last index, so it might be less than 16 iterations in the general case, depending on what your data typically looks like."}], "answers": [{"comments": [{"owner": {"reputation": 1071, "user_id": 1293890, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d8b025551cf4766b10e57a2e5589c755?s=128&d=identicon&r=PG", "display_name": "martin s", "link": "https://stackoverflow.com/users/1293890/martin-s"}, "edited": false, "score": 0, "creation_date": 1433209510, "post_id": 30570762, "comment_id": 49241617, "body": "wow your solution looks great. Thank a lot for sharing it. I still try to understand all details."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1435218523, "post_id": 30570762, "comment_id": 50111038, "body": "You don&#39;t need zeros as an input to <code>_mm_cmpeq</code> to generate all-ones.  Any input is equal to itself.  The CPU even takes advantage of this, by generating a uop that doesn&#39;t depend on the previous value of the register, when both operands are the same.  (i.e. it&#39;s recognized as a dependency-breaking instruction.)"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1435219366, "post_id": 30570762, "comment_id": 50111610, "body": "NVM, looks like you are using your <code>zero</code> reg in the algorithm.  Otherwise, you could get <code>one_epi8</code> from <code>_mm_sign_epi8(bin_ones, bin_ones)</code>.  I thought there was a plain vector negate instruction, but maybe not."}], "tags": [], "owner": {"reputation": 3352, "user_id": 2439725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/428ff617402eb64c48ed6dfc153617f9?s=128&d=identicon&r=PG", "display_name": "wim", "link": "https://stackoverflow.com/users/2439725/wim"}, "is_accepted": true, "score": 2, "last_activity_date": 1433155222, "last_edit_date": 1433155222, "creation_date": 1433153378, "answer_id": 30570762, "question_id": 29955471, "link": "https://stackoverflow.com/questions/29955471/is-possible-to-address-the-output-simd-register-by-using-an-input-register/30570762#30570762", "title": "Is possible to address the output SIMD register by using an input register", "body": "<p>It seems that _mm_shuffle_epi8 is indeed the key to a solution. The idea is to set individual bits according to the values of the input vector a. \nThese bits are distributed over (horizontal OR) the bytes of the 128 bits wide \nregister.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;immintrin.h&gt;\n/*  gcc -O3 -Wall -mavx test4.c                                  */\n/*  gcc -O3 -Wall -msse2 -mssse3 -msse4.1 test4.c                */\n\nint print_char128(__m128i * x);\n\nint print_char128(__m128i * x){\n  unsigned char v_x[16];\n  _mm_storeu_si128((__m128i *)v_x,*x);\n  printf(\"%4u %4u %4u %4u | %4u %4u %4u %4u | %4u %4u %4u %4u | %4u %4u %4u %4u  \\n\",\n  v_x[0],  v_x[1],  v_x[2],  v_x[3],  v_x[4],  v_x[5],  v_x[6],  v_x[7],\n  v_x[8],  v_x[9],  v_x[10], v_x[11], v_x[12], v_x[13], v_x[14], v_x[15] );\n  return 0;\n}\n\n\nint main()\n{\nunsigned char  a_v[] = {0, 0, 0, 10, 0, 0, 0, 2, 0, 0, 0, 0, 3, 1, 0, 0 };\n/*unsigned char  a_v[] = {13, 30, 0, 10, 0, 6, 0, 2, 0, 0, 7, 0, 3, 11, 0, 0 };*/\n  __m128i t0, t1, t2, t3;\n  __m128i a, r, msk0, msk1, msk0_1, zero, bin_ones, one_epi8;\n\n  /* set some constants */\n  unsigned char  msk0_v[] ={1, 2, 4, 8, 16, 32, 64, 128, 0, 0, 0, 0, 0, 0, 0, 0};\n  msk0=_mm_loadu_si128((__m128i *)msk0_v);\n  msk1=_mm_shuffle_epi32(msk0,0b01001110);\n  msk0_1=_mm_blend_epi16(msk0,msk1,0b11110000);\n  zero=_mm_setzero_si128();\n  bin_ones=_mm_cmpeq_epi32(zero,zero);\n  one_epi8=_mm_sub_epi8(zero,bin_ones);\n\n  /* load indices */\n  a=_mm_loadu_si128((__m128i *)a_v);\n\n  /* start of 'SIMD magic'                                            */\n  /* index a_i sets the a_i -th bit within a byte of t0 if 0&lt;=a_i&lt;8  */\n  /* or set (a_i-8)-th bit within a byte of t1 if 8&lt;=a_i&lt;16          */\n  t0=_mm_shuffle_epi8(msk0,a);\n  t1=_mm_shuffle_epi8(msk1,a);\n  /* horizontal OR of the bytes in t0 and t1: */\n  t2=_mm_blend_epi16(t0,t1,0b11110000);\n  t3=_mm_alignr_epi8(t1,t0,8);\n  t0=_mm_or_si128(t2,t3);\n  t1=_mm_shuffle_epi32(t0,0b10110001);\n  t0=_mm_or_si128(t0,t1);\n  t1=_mm_slli_si128(t0,2);\n  t0=_mm_or_si128(t0,t1);\n  t1=_mm_slli_si128(t0,1);\n  t0=_mm_or_si128(t0,t1);\n  t0=_mm_shuffle_epi32(t0,0b11110101);  /* end of horizontal OR */\n  /* filter out the relevant bits */\n  t0=_mm_and_si128(t0,msk0_1);\n  t0=_mm_cmpeq_epi8(t0,zero);\n  r=_mm_andnot_si128(t0,one_epi8);      /* the result is in r */\n  print_char128(&amp;r);\n\n  return 0;\n}\n</code></pre>\n\n<p>This should work quite fast: Aside from the instructions for setting the constants and loading the data it is only 15 SSEx instructions. On today's processors these instructions all have a latency of only 1 cycle.\nThe (reciprocal) througput is even smaller: 1/2 or 1/3 cycle.\nIntrinsic <em>_mm_blend_epi16</em> is SSE4.1, some others are SSSE3.</p>\n"}], "owner": {"reputation": 1071, "user_id": 1293890, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d8b025551cf4766b10e57a2e5589c755?s=128&d=identicon&r=PG", "display_name": "martin s", "link": "https://stackoverflow.com/users/1293890/martin-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 193, "favorite_count": 0, "accepted_answer_id": 30570762, "answer_count": 1, "score": 1, "last_activity_date": 1433155222, "creation_date": 1430345498, "last_edit_date": 1430346927, "question_id": 29955471, "link": "https://stackoverflow.com/questions/29955471/is-possible-to-address-the-output-simd-register-by-using-an-input-register", "title": "Is possible to address the output SIMD register by using an input register", "body": "<p>Is it possible to use the scalar values of an input vector to index the output vector? I try to implement the following function in SIMD but I can not find any solution.</p>\n\n<pre><code> void shuffle(unsigned char * a,    // input a\n              unsigned char * r){   // output r\n     for (i=0; i &lt; 16; i++)\n            r[i] = 0;\n     for (i=0; i &lt; 16; i++)\n            r[a[i] % 16] = 1;\n }\n</code></pre>\n\n<p>An example input / output vector would look like this</p>\n\n<pre><code>unsigned char * a = {0, 0, 0, 10, 0, 0, 0, 2, 0, 0, 0, 0, 3, 1, 0, 0 };\n... do SIMD magic\n//                   0  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15\nunsigned char * r = {1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0 };\n</code></pre>\n\n<p>I was not able to find any suitable instruction that can dynamicly address the left side of an assignment. Maybe this function can be implemented by shifting operations? Did anybody implement something similar?</p>\n"}, {"tags": ["c", "nasm", "fault"], "comments": [{"owner": {"reputation": 9620, "user_id": 1783163, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/BfUwH.jpg?s=128&g=1", "display_name": "peterh", "link": "https://stackoverflow.com/users/1783163/peterh"}, "edited": false, "score": 0, "creation_date": 1430345565, "post_id": 29955467, "comment_id": 48031748, "body": "Your asm seems okay to me."}, {"owner": {"reputation": 1632, "user_id": 4178025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/159c588df64aaa5d1b2c96c1461e85cf?s=128&d=identicon&r=PG&f=1", "display_name": "Diego", "link": "https://stackoverflow.com/users/4178025/diego"}, "edited": false, "score": 0, "creation_date": 1430347245, "post_id": 29955467, "comment_id": 48032421, "body": "Do you have a <code>ret</code> instruction after the <code>printf</code>s?"}, {"owner": {"reputation": 77, "user_id": 4844185, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ef4d1cf40e2b1e58e74a296c91195321?s=128&d=identicon&r=PG&f=1", "display_name": "mm19", "link": "https://stackoverflow.com/users/4844185/mm19"}, "edited": false, "score": 0, "creation_date": 1430347377, "post_id": 29955467, "comment_id": 48032487, "body": "yes i&#39;ve tired that it didn&#39;t take care of the segmentation problem :("}], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 4844185, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ef4d1cf40e2b1e58e74a296c91195321?s=128&d=identicon&r=PG&f=1", "display_name": "mm19", "link": "https://stackoverflow.com/users/4844185/mm19"}, "edited": false, "score": 0, "creation_date": 1430346527, "post_id": 29955603, "comment_id": 48032129, "body": "Thanks that actually helped quite a bit I&#39;ll see if it works."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1430352383, "post_id": 29955603, "comment_id": 48034192, "body": "Diego, since this is a stand-alone assembly program, there is no <code>main</code> and no need to return. What is needed is to make a syscall to exit to cleanup on program termination. The exit code is set in <code>ebx</code>, the <b>x86</b> syscall for exit is <code>1</code> (see: <code>&#47;usr&#47;include&#47;asm&#47;unistd_32.h</code>) and goes in <code>eax</code>, then the kernel is called to execute the command <code>int 0x80</code> or <code>int 80h</code>."}, {"owner": {"reputation": 22751, "user_id": 2399879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UxMS5.jpg?s=128&g=1", "display_name": "Crowman", "link": "https://stackoverflow.com/users/2399879/crowman"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1430353635, "post_id": 29955603, "comment_id": 48034568, "body": "@DavidC.Rankin: Making an exit system call instead of returning is obviously fine, but this program clearly does have a <code>main</code> function. Most assembly programs linking to the standard C library will have one."}, {"owner": {"reputation": 77, "user_id": 4844185, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ef4d1cf40e2b1e58e74a296c91195321?s=128&d=identicon&r=PG&f=1", "display_name": "mm19", "link": "https://stackoverflow.com/users/4844185/mm19"}, "edited": false, "score": 0, "creation_date": 1430354941, "post_id": 29955603, "comment_id": 48034906, "body": "Could you guys also look at this code for me really quick as well? It also having a segmentation issue which I&#39;m not able to figure out. Its a similar exercise where we take a c program and create a nasm program from it.                 <a href=\"http://stackoverflow.com/questions/29956567/nasm-assembly-mathematical-logic\" title=\"nasm assembly mathematical logic\">stackoverflow.com/questions/29956567/&hellip;</a>"}], "tags": [], "owner": {"reputation": 1632, "user_id": 4178025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/159c588df64aaa5d1b2c96c1461e85cf?s=128&d=identicon&r=PG&f=1", "display_name": "Diego", "link": "https://stackoverflow.com/users/4178025/diego"}, "is_accepted": false, "score": 0, "last_activity_date": 1430349197, "last_edit_date": 1430349197, "creation_date": 1430346060, "answer_id": 29955603, "question_id": 29955467, "link": "https://stackoverflow.com/questions/29955467/converting-c-to-nasm-assembly-with-segmentation-issue/29955603#29955603", "title": "Converting C to NASM assembly with segmentation issue", "body": "<p>I think you are not following the calling convention for <code>printf</code> (it's <a href=\"http://en.wikipedia.org/wiki/X86_calling_conventions#cdecl\" rel=\"nofollow\">cdecl</a> IIRC).</p>\n\n<ol>\n<li>the caller must clean the stack after the call</li>\n<li>and eax is clobbered by the first call to <code>printf</code> with it's return value</li>\n</ol>\n\n<p>Number one will cause trouble when returning from <code>main</code>. Actually, there is no <code>ret</code> instruction after the <code>printf</code>s which causes the execution to go on until something goes wrong :)</p>\n\n<p>Add the following after printing:</p>\n\n<pre><code>   add     esp, 16  ; Fix stack, usually it's done after each call\n                    ; with the appropiate values.\n                    ; In this way (one fixup for many calls) stack\n                    ; grows unnecessarily\n   xor     eax, eax ; set return value to 0\n   ret              ; Return from main\n</code></pre>\n\n<p>Although, this does not take care of issue number two.</p>\n"}, {"comments": [{"owner": {"reputation": 77, "user_id": 4844185, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ef4d1cf40e2b1e58e74a296c91195321?s=128&d=identicon&r=PG&f=1", "display_name": "mm19", "link": "https://stackoverflow.com/users/4844185/mm19"}, "edited": false, "score": 0, "creation_date": 1430348891, "post_id": 29956090, "comment_id": 48033113, "body": "i&#39;m still getting the segmentation fault with the changes"}], "tags": [], "owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "is_accepted": false, "score": 0, "last_activity_date": 1430350368, "last_edit_date": 1430350368, "creation_date": 1430348384, "answer_id": 29956090, "question_id": 29955467, "link": "https://stackoverflow.com/questions/29955467/converting-c-to-nasm-assembly-with-segmentation-issue/29956090#29956090", "title": "Converting C to NASM assembly with segmentation issue", "body": "<p>Updated and complete example:</p>\n\n<pre><code>segment .data\nout1    db      \"It took %d iterations to complete loop. That seems like \"\n        db      \"a lot.\", 0aH, 00H\nsegment .bss\nsegment .text\n        global  main\n        extern  printf\nmain:   xor     eax, eax\n        mov     ebx, 10\n        mov     ecx, 2\nloop0:  inc     ebx\n        add     ecx, 2\n        inc     eax\n        cmp     ecx, ebx\n        jl      loop0\n        push    eax\n        push    offset out1\n        call    printf\n        add     esp, 8\n        xor     eax, eax\n        ret\n        end\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "edited": false, "score": 0, "creation_date": 1437700381, "post_id": 29956488, "comment_id": 51152665, "body": "I&#39;m not sure I&#39;d waste time and effort coding up a buffer for it when you have a perfectly good stack just sitting around, waiting to be used :-) In other words, <code>push eax</code>, <code>pop eax</code>."}], "tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 0, "last_activity_date": 1430350587, "creation_date": 1430350587, "answer_id": 29956488, "question_id": 29955467, "link": "https://stackoverflow.com/questions/29955467/converting-c-to-nasm-assembly-with-segmentation-issue/29956488#29956488", "title": "Converting C to NASM assembly with segmentation issue", "body": "<p>If you haven't got it sorted out yet, the issue is due to <code>eax</code> getting thrashed on your <code>printf</code> call. How to fix? Save it to a buffer before the first <code>printf</code> call and load <code>eax</code> before the second. E.g. add:</p>\n\n<pre><code>segment .bss\n\nbuffer resd  1          ; reserve 32 bit buffer\n...\nmov     [buffer], eax   ; save eax in the buffer\n\npush    out1\ncall    printf\n\nmov     eax, [buffer]   ; load eax from the buffer\n\npush    eax\npush    out2\ncall    printf\n\npush    out3\ncall    printf\n\nxor     ebx, ebx         ; exit nicely \nmov     eax, 1\nint     0x80\n</code></pre>\n\n<p><strong>Use/Output</strong></p>\n\n<pre><code>$ ./bin/pt\nIt took 8 iterations to complete the loop. That seems like a lot.\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 4844185, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ef4d1cf40e2b1e58e74a296c91195321?s=128&d=identicon&r=PG&f=1", "display_name": "mm19", "link": "https://stackoverflow.com/users/4844185/mm19"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 133, "favorite_count": 0, "answer_count": 3, "score": 5, "last_activity_date": 1430350587, "creation_date": 1430345471, "question_id": 29955467, "link": "https://stackoverflow.com/questions/29955467/converting-c-to-nasm-assembly-with-segmentation-issue", "title": "Converting C to NASM assembly with segmentation issue", "body": "<p>I'm trying to get this c code:</p>\n\n<pre><code>main()\n\n {int x, y, count ;\n\n  count = 0 ;\n  x = 10 ; \n  y = 2 ;\n  while (y &lt; x)\n    { x = x + 1 ;\n      y = y + 2 ;\n      count = count + 1 ;\n     } \n\n    printf(\u201c It took %d iterations to complete loop. That seems like a     lot\\n\u201d,count) ;\n}\n</code></pre>\n\n<p>to its NASM equivalent which I have this so far: </p>\n\n<pre><code>segment .data\n\nout1    db \"It took \", 0\nout2    db \"%i \", 0\nout3    db \"iterations to complete the loop. That seems like a lot.\", 10, 0\n\nsegment .bss\n\nsegment .text\n\nglobal     main\nextern printf\n\nmain:\n\n    mov    eax, 0        ;count\n    mov    ebx, 10        ;x\n    mov    ecx, 2        ;y\n\n    jmp     lp\n\n    mov    eax, 0\n    ret\n\nlp:\n    cmp    ecx, ebx    ;compare y to x\n    jge    end        ;jump to end if y &gt;= x\n    add    eax, 1\n    add    ebx, 1\n    add    ecx, 2\n    jmp    lp\n\nend:\n\n    push    out1\n    call    printf\n\n   push    eax\n   push    out2\n   call    printf\n\n   push    out3\n   call    printf\n</code></pre>\n\n<p>I keep getting a segmentation fault and I don't understand why it keeps happening. I've tried adding in print statements everywhere and cannot find where the fault is located. Any advice would be great! Thank you!</p>\n"}, {"tags": ["python", "c", "linux-kernel"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1430345507, "post_id": 29955458, "comment_id": 48031722, "body": "Show your code. You should be able to split the buffer into a list and loop over that."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1430346392, "post_id": 29955458, "comment_id": 48032068, "body": "Unless the file is infinite, one inherent quality will always be that it will end, (and therefore exhibit an <i>end of file</i>)   <b><i><a href=\"http://en.wikipedia.org/wiki/End-of-file\" rel=\"nofollow noreferrer\">EOF</a></i></b> is a condition, that in turn precipitates a flag that is set by C libraries to indicate by return value that the end of the file has been reached."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1430347832, "post_id": 29955458, "comment_id": 48032686, "body": "It sounds like there is a problem in your implementation of the procfs module. Are you returning the correct read size from your read callback?"}, {"owner": {"reputation": 383, "user_id": 2158951, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/90e9102d8eb4a5568575f9fe6918d8c1?s=128&d=identicon&r=PG", "display_name": "mezo", "link": "https://stackoverflow.com/users/2158951/mezo"}, "edited": false, "score": 0, "creation_date": 1430348806, "post_id": 29955458, "comment_id": 48033088, "body": "I&#39;m sending data to userspace by calling copy_to_user(buffer, procf_buffer, procf_buffer_pos), whereprocf_buffer_pos is size of data sent. I&#39;m returning this value in procf_read func"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1430350385, "post_id": 29955458, "comment_id": 48033603, "body": "@mezo: and do you check and respond to the off parameter?"}, {"owner": {"reputation": 383, "user_id": 2158951, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/90e9102d8eb4a5568575f9fe6918d8c1?s=128&d=identicon&r=PG", "display_name": "mezo", "link": "https://stackoverflow.com/users/2158951/mezo"}, "edited": false, "score": 0, "creation_date": 1430381597, "post_id": 29955458, "comment_id": 48045068, "body": "If the &#39;off parameter&#39; stands for return value then no and thats exactly my question - how to check it in python"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1430408769, "post_id": 29955458, "comment_id": 48064061, "body": "@mezo: the read callback to implement a procfs entry has an off parameter, which tells you which byte position to start reading from. If that byte position is greater than the data size, you need to return 0 from the callback to indicate EOF. Also, if you want to attract my attention, you need to address the comment to me using an @ and my nick."}], "answers": [{"comments": [{"owner": {"reputation": 383, "user_id": 2158951, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/90e9102d8eb4a5568575f9fe6918d8c1?s=128&d=identicon&r=PG", "display_name": "mezo", "link": "https://stackoverflow.com/users/2158951/mezo"}, "edited": false, "score": 0, "creation_date": 1430346240, "post_id": 29955507, "comment_id": 48031999, "body": "You&#39;re right. I didn&#39;t express that in right way, but still my point is clear, so despite of how I&#39;m glad you enlighten me of how EOF trully works that&#39;s NOT answer to my question which would be appreciated."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 383, "user_id": 2158951, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/90e9102d8eb4a5568575f9fe6918d8c1?s=128&d=identicon&r=PG", "display_name": "mezo", "link": "https://stackoverflow.com/users/2158951/mezo"}, "edited": false, "score": 0, "creation_date": 1430346332, "post_id": 29955507, "comment_id": 48032040, "body": "Your question is diffuclt to read or understand, you might want to improve it&#39;s formatting and I promise that then I will try to give an answer that you accept."}, {"owner": {"reputation": 383, "user_id": 2158951, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/90e9102d8eb4a5568575f9fe6918d8c1?s=128&d=identicon&r=PG", "display_name": "mezo", "link": "https://stackoverflow.com/users/2158951/mezo"}, "edited": false, "score": 0, "creation_date": 1430346482, "post_id": 29955507, "comment_id": 48032110, "body": "Oh and I thought tag python did it, but obviously not. User space application is written in python. So I&#39;m looking for solution in python. in C I would obviously use fread."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 383, "user_id": 2158951, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/90e9102d8eb4a5568575f9fe6918d8c1?s=128&d=identicon&r=PG", "display_name": "mezo", "link": "https://stackoverflow.com/users/2158951/mezo"}, "edited": false, "score": 0, "creation_date": 1430346814, "post_id": 29955507, "comment_id": 48032241, "body": "AFAIK in python you can just use <code>.readlines()</code> method of file objects, and you don&#39;t need to care about the rest, why isn&#39;t it working?"}, {"owner": {"reputation": 383, "user_id": 2158951, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/90e9102d8eb4a5568575f9fe6918d8c1?s=128&d=identicon&r=PG", "display_name": "mezo", "link": "https://stackoverflow.com/users/2158951/mezo"}, "edited": false, "score": 0, "creation_date": 1430347639, "post_id": 29955507, "comment_id": 48032596, "body": "Because as I stated in question, it loops over printing a few lines sent to proc file over and over again..."}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 1, "last_activity_date": 1430346027, "last_edit_date": 1495542513, "creation_date": 1430345666, "answer_id": 29955507, "question_id": 29955458, "link": "https://stackoverflow.com/questions/29955458/read-file-without-eof-flag/29955507#29955507", "title": "Read file without EOF flag", "body": "<p>Files never contains <code>EOF</code>, it's not a character, so there is no way of doing what you want because it does not make sense.</p>\n\n<p>When you are reading from a file, the library marks the file handle with <code>EOF</code> when it attempts to read past the end of the file, after that a call to <code>feof(file)</code> would return a non-zero value. But there is no character read from the file that is the <code>EOF</code> character, if there was then how would you be able to store this particular value in a file?</p>\n\n<p>See <a href=\"https://stackoverflow.com/a/26557243/1983495\">this</a> for more information.</p>\n\n<p>You can build the following solution</p>\n\n<pre><code>size_t fileSize;\n\nfseek(file, 0L, SEEK_END);\nfileSize = ftell(file);\nfseek(file, 0L, SEEK_SET);\n</code></pre>\n\n<p>now you do know what to pass to <code>fread()</code>.</p>\n"}], "owner": {"reputation": 383, "user_id": 2158951, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/90e9102d8eb4a5568575f9fe6918d8c1?s=128&d=identicon&r=PG", "display_name": "mezo", "link": "https://stackoverflow.com/users/2158951/mezo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 734, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1430346685, "creation_date": 1430345411, "last_edit_date": 1430346685, "question_id": 29955458, "link": "https://stackoverflow.com/questions/29955458/read-file-without-eof-flag", "title": "Read file without EOF flag", "body": "<p>Is there some smart way of reading content of file by lines (in python) if this file kinda acts like buffer?</p>\n\n<p>To be more specific I'm implementing simple firewall as kernel module which communicates with user space application through procfs. When userspace application requests to print all firewall rules procf_read function is called and all rules are stored in buffer which is later copied to user (<code>copy_to_user</code> func). If I use simple for loop to read file by lines it loops over file and prints lines just fine (let's say there are 3 of them) but then it loops over printing same lines over and over until whole buffer is read (my guess). I would like to print just these 3 lines ideally without inserting extra symbol to file's end to simulate 'EOF' and then detecting it in user space (python). I'm thinking of reading file by bytes but how to get number of bytes to read in C's <code>fread()</code> way?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1430345411, "post_id": 29955409, "comment_id": 48031694, "body": "I don&#39;t understand why are you using functions with global variables, you know you can pass parameters to the functions, don&#39;t you? Also it&#39;s funny that you check if the file was opened for writing but you don&#39;t check for the input file, which is much more likely to fail. And you also need to <code>fclose()</code> the output file."}, {"owner": {"reputation": 12072, "user_id": 1630963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97c2d181ef6bbb9eee0c4033561c3891?s=128&d=identicon&r=PG", "display_name": "enhzflep", "link": "https://stackoverflow.com/users/1630963/enhzflep"}, "edited": false, "score": 0, "creation_date": 1430345518, "post_id": 29955409, "comment_id": 48031729, "body": "Look at the first line of your last for-loop. <code>a[i][0] = 1;</code> Obviously, this is why the value in the first column is 1. It appears as though you&#39;ve copied someone else&#39;s work without understanding it. :shrugs:"}], "answers": [{"comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1430345609, "post_id": 29955485, "comment_id": 48031766, "body": "The same applies here <code>for (i = 0; i &lt;=ELEMENTS; i++) </code>"}], "tags": [], "owner": {"reputation": 603, "user_id": 4142717, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ka9sc.jpg?s=128&g=1", "display_name": "sabreitweiser", "link": "https://stackoverflow.com/users/4142717/sabreitweiser"}, "is_accepted": false, "score": 4, "last_activity_date": 1430346320, "last_edit_date": 1495541182, "creation_date": 1430345561, "answer_id": 29955485, "question_id": 29955409, "link": "https://stackoverflow.com/questions/29955409/print-in-a-specific-format-matrix-with-c/29955485#29955485", "title": "Print in a specific format matrix with C", "body": "<p>This code</p>\n\n<pre><code>#define ELEMENTS 1\n....\ndouble Angstroms[ELEMENTS];\ndouble Energy[ELEMENTS];\n</code></pre>\n\n<p>Is making two arrays with one element each (so max index would be 0). When you try to access the element at index 1 of Angstroms, you're getting into undefined behavior. You just happen to have stumbled upon a situation in which it didn't segfault.</p>\n\n<hr>\n\n<p>Edit: see, for example <a href=\"https://stackoverflow.com/questions/9137157/no-out-of-bounds-error\">this question.</a> It looks like you made a similar mistake defining n, which I believe should also be 2.</p>\n\n<p>Furthermore, I don't think that you're going to get the output you said you want when the program runs correctly, I think you'd get</p>\n\n<pre><code>1.00000000 2.00000000\n1.00000000 6.00000000\n</code></pre>\n\n<p>You're setting ax[i][0] to 1 each time, and then printing it as the first number on each line, then printing Angstroms[i], which was the first number on the ith input line. At least if I'm understanding this code right:</p>\n\n<pre><code>ax[i][0] = 1;\nax[i][1] = Angstroms[i];\nfprintf (outfile, \"%.8f %.8f\\n\", ax[i][0], ax[i][1]);\n</code></pre>\n\n<p>Don't be discouraged if it seems confusing!</p>\n"}, {"tags": [], "owner": {"reputation": 2076, "user_id": 1866196, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/TrCUq.png?s=128&g=1", "display_name": "skrtbhtngr", "link": "https://stackoverflow.com/users/1866196/skrtbhtngr"}, "is_accepted": false, "score": 1, "last_activity_date": 1430346156, "creation_date": 1430346156, "answer_id": 29955622, "question_id": 29955409, "link": "https://stackoverflow.com/questions/29955409/print-in-a-specific-format-matrix-with-c/29955622#29955622", "title": "Print in a specific format matrix with C", "body": "<p>This might help:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#define ELEMENTS 2\n\ndouble Angstroms[ELEMENTS];\ndouble Energy[ELEMENTS];\n\nvoid file_input ();\nvoid polynomial ();\n\nint main () {\n     file_input ();\n     polynomial ();\n   return 0;\n }\n\nvoid file_input () {\n\n     float a, b;\n     int i;\n\n     FILE * in_file = fopen(\"H2.txt\", \"r\");\n     for (i = 0; i &lt; ELEMENTS; i++) {\n          fscanf(in_file, \"%f %f\\n\", &amp;a, &amp;b);\n          Angstroms[i] = a;\n          Energy [i] = b;\n     }\n     fclose(in_file);\n}\n\nvoid polynomial () {\n\n      int i;\n      FILE * outfile = fopen(\"PolyTest1.txt\", \"w\");\n      if (outfile == NULL) {\n         printf (\"Error file does not exist\");\n         exit (-1);\n       }\n      fprintf (outfile, \"%.8f %.8f\\n\", 1.0, 1.0);\n      for (i = 0; i &lt; ELEMENTS; i++) {\n          fprintf (outfile, \"%.8f \", Angstroms[i]);\n      }\n      fclose(outfile);\n}\n</code></pre>\n"}], "owner": {"reputation": 547, "user_id": 2536951, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/4babb3c9c4de67b74d2af2b0f74e7bff?s=128&d=identicon&r=PG", "display_name": "Suliman Sharif", "link": "https://stackoverflow.com/users/2536951/suliman-sharif"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1430346320, "creation_date": 1430345120, "question_id": 29955409, "link": "https://stackoverflow.com/questions/29955409/print-in-a-specific-format-matrix-with-c", "title": "Print in a specific format matrix with C", "body": "<p>Hey so this is frustrating the hell out of me and I don't know why it isn't working. As of right now I just want to make a basic 2 by 2 matrix. The in_file would be </p>\n\n<pre><code>   2.000000000 3.00000000\n   6.000000000 5.00000000\n</code></pre>\n\n<p>So the code is as follows</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#define ELEMENTS 1\n#define n 1\n\ndouble Angstroms[ELEMENTS];\ndouble Energy[ELEMENTS];\ndouble ax[ELEMENTS][n];\n\nvoid file_input ();\nvoid polynomial ();\n// void conversion ();\n\nint main () {\n     file_input ();\n     polynomial ();\n//     conversion ();\n   return 0;\n }\n\nvoid file_input () {\n\n     float a, b;\n     int i;\n\n     FILE * in_file = fopen(\"H2Mini.txt\", \"r\");\n     for (i = 0; i &lt;= ELEMENTS; i++) {\n          fscanf(in_file, \"%f %f\\n\", &amp;a, &amp;b);\n          Angstroms[i] = a;\n          Energy [i] = b;\n     }\n     fclose(in_file);\n}\n\nvoid polynomial () {\n\n      int i;\n      FILE * outfile = fopen(\"PolyTest1.txt\", \"w\");\n      if (outfile == NULL) {\n         printf (\"Error file does not exist\");\n         exit (-1);\n       }\n\n      for (i = 0; i &lt;=ELEMENTS; i++) {\n          ax[i][0] = 1;\n         // printf (\"\\n\");\n          ax[i][1] = Angstroms[i];\n          fprintf (outfile, \"%.8f %.8f\\n\", ax[i][0], ax[i][1]);\n      }\n\n}\n</code></pre>\n\n<p>The outfile is making this</p>\n\n<pre><code> [1.00000000 2.00000000\n  1.00000000 1.00000000]\n</code></pre>\n\n<p>I want the outfile to look like this</p>\n\n<pre><code> [1.00000000 1.00000000\n  2.00000000 6.00000000]\n</code></pre>\n\n<p>I really don't understand why the outfile is looking like that so any input please let me know.</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 5888, "user_id": 1305139, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/586cd837b40cb957deed4942ba1850d5?s=128&d=identicon&r=PG", "display_name": "GergelyPolonkai", "link": "https://stackoverflow.com/users/1305139/gergelypolonkai"}, "edited": false, "score": 0, "creation_date": 1430345622, "post_id": 29955301, "comment_id": 48031772, "body": "It&#39;s hard to understand what you really want to achieve, but from what I do understand you are pretty much on the wrong track. Why do you need the <code>const char *</code> variable at the top, why don&#39;t you use <code>char *</code> without <code>const</code>?"}, {"owner": {"reputation": 616, "user_id": 1762208, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xBdrF.jpg?s=128&g=1", "display_name": "bentank", "link": "https://stackoverflow.com/users/1762208/bentank"}, "edited": false, "score": 0, "creation_date": 1430345898, "post_id": 29955301, "comment_id": 48031868, "body": "assigning one array to another is not what you are intneding to do, I believe. Try <code>strcpy(pathArray[pathIndex], nextfile);</code> You also need to allocate the correct memory needed in your <code>pathArray[index];</code> That being said, there is a lot that does not make much sense here."}, {"owner": {"reputation": 3, "user_id": 4644417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2268de84b145d1d5330417fd07712a3?s=128&d=identicon&r=PG&f=1", "display_name": "Follow", "link": "https://stackoverflow.com/users/4644417/follow"}, "edited": false, "score": 0, "creation_date": 1430346268, "post_id": 29955301, "comment_id": 48032011, "body": "It causes segmentation faults for some reason (when I try to use strcpy), and when I don&#39;t use strcpy, it has the same issue. EDIT: Sorry, I posted before bentank commented. How do I allocate the correct amount of memory for pathArray[pathIndex]?"}, {"owner": {"reputation": 3, "user_id": 4644417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2268de84b145d1d5330417fd07712a3?s=128&d=identicon&r=PG&f=1", "display_name": "Follow", "link": "https://stackoverflow.com/users/4644417/follow"}, "edited": false, "score": 0, "creation_date": 1430346594, "post_id": 29955301, "comment_id": 48032153, "body": "Thanks, that worked! EDIT: strdup(nextFile)"}], "answers": [{"comments": [{"owner": {"reputation": 4446, "user_id": 696485, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4de94e14f977802057b0109d079d95a1?s=128&d=identicon&r=PG", "display_name": "Iskar Jarak", "link": "https://stackoverflow.com/users/696485/iskar-jarak"}, "edited": false, "score": 0, "creation_date": 1430347208, "post_id": 29955679, "comment_id": 48032400, "body": "<code>pathIndex</code> should be <code>size_t</code> instead of <code>int</code>, really."}, {"owner": {"reputation": 616, "user_id": 1762208, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xBdrF.jpg?s=128&g=1", "display_name": "bentank", "link": "https://stackoverflow.com/users/1762208/bentank"}, "reply_to_user": {"reputation": 4446, "user_id": 696485, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4de94e14f977802057b0109d079d95a1?s=128&d=identicon&r=PG", "display_name": "Iskar Jarak", "link": "https://stackoverflow.com/users/696485/iskar-jarak"}, "edited": false, "score": 1, "creation_date": 1430347484, "post_id": 29955679, "comment_id": 48032529, "body": "@IskarJarak, it does not matter at all in this case. Unless INT_MAX was less than 50... And given int must be 16 bits or greater, that is not the case."}, {"owner": {"reputation": 4446, "user_id": 696485, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4de94e14f977802057b0109d079d95a1?s=128&d=identicon&r=PG", "display_name": "Iskar Jarak", "link": "https://stackoverflow.com/users/696485/iskar-jarak"}, "edited": false, "score": 1, "creation_date": 1430348150, "post_id": 29955679, "comment_id": 48032820, "body": "I&#39;m well aware &quot;it doesn&#39;t matter in this case&quot; but it is better practice to use <code>size_t</code>, and I think your answer would be improved by it."}, {"owner": {"reputation": 616, "user_id": 1762208, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xBdrF.jpg?s=128&g=1", "display_name": "bentank", "link": "https://stackoverflow.com/users/1762208/bentank"}, "reply_to_user": {"reputation": 4446, "user_id": 696485, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4de94e14f977802057b0109d079d95a1?s=128&d=identicon&r=PG", "display_name": "Iskar Jarak", "link": "https://stackoverflow.com/users/696485/iskar-jarak"}, "edited": false, "score": 0, "creation_date": 1430348308, "post_id": 29955679, "comment_id": 48032901, "body": "Sure, it couldn&#39;t hurt."}], "tags": [], "owner": {"reputation": 616, "user_id": 1762208, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xBdrF.jpg?s=128&g=1", "display_name": "bentank", "link": "https://stackoverflow.com/users/1762208/bentank"}, "is_accepted": true, "score": 2, "last_activity_date": 1430346787, "last_edit_date": 1430346787, "creation_date": 1430346423, "answer_id": 29955679, "question_id": 29955301, "link": "https://stackoverflow.com/questions/29955301/how-can-i-assign-elements-to-a-const-char-array-from-a-normal-char-array-in-a/29955679#29955679", "title": "How can I assign elements to a const char * array from a normal char array in a loop?", "body": "<p>I believe you are looking for something like this</p>\n\n<pre><code>char *pathArray[50];\nchar nextFile[35];\nint pathIndex = 0;\n\n// Do something to read into nextFile?\n// create new mem for string and assign pointer to new string in your array\npathArray[pathIndex++] = strdup(nextFile); \n</code></pre>\n\n<p>The reason it is seg faulting is due to not allocating any memory for the string inside your array.</p>\n\n<p>From strdup man page:</p>\n\n<blockquote>\n  <p>The  strdup()  function  returns  a  pointer  to  a  new string which is a duplicate of the string s.  Memory for the new string is\n         obtained with malloc(3), and can be freed with free(3).</p>\n</blockquote>\n\n<p>Note: you are required to free the newly created copy.</p>\n"}], "owner": {"reputation": 3, "user_id": 4644417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2268de84b145d1d5330417fd07712a3?s=128&d=identicon&r=PG&f=1", "display_name": "Follow", "link": "https://stackoverflow.com/users/4644417/follow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 29955679, "answer_count": 1, "score": -1, "last_activity_date": 1430346787, "creation_date": 1430344562, "last_edit_date": 1430345878, "question_id": 29955301, "link": "https://stackoverflow.com/questions/29955301/how-can-i-assign-elements-to-a-const-char-array-from-a-normal-char-array-in-a", "title": "How can I assign elements to a const char * array from a normal char array in a loop?", "body": "<pre><code>const char * pathArray[50];\nchar nextFile[35];\n\nwhile(lastFile == 0) {\n    file_descriptor = open(nextFile, O_RDWR);\n\n    if (file_descriptor == -1){\n        printf(\"Sorry, but %s could not be opened\", nextFile);  \n        exit(1);\n    }\n\n    nread = read (file_descriptor, buffer, 512);\n    close(file_descriptor);\n\n    if(strstr(buffer, \"LAST_FILE\") != NULL){\n        lastFile++;\n        break;\n    }\n\n    printf(\"CURRENT FILE: %s\\n\", nextFile);\n    printf(\"\\n NEXT FILE:\");\n    scanf(\" %[^\\n]\", nextFile); \n    pathIndex++;\n    pathArray[pathIndex] = nextFile;\n\n    for(i = 0; i &lt; pathIndex; i++) { \n        printf(\"%d: %s\\n\", i, pathArray[i]);        \n    }\n} //end while\n</code></pre>\n\n<p>What I hadn't anticipated is that pathArray[pathIndex] = nextFile; assigns the address of nextFile to that index, so the entire array gets changed whenever nextFile does. I'm very new to C and have tried a lot of things and found a lot of problems getting the whole file name in (many of the file names have spaces in them so it's supposed to be read until the user hits enter, and the above was the way I found to prevent the file name from being cut off at the first space).</p>\n\n<p>I also tried adding a char * otherArray[50] so that I could use strcpy, but changing my assignment to:  </p>\n\n<pre><code>    strcpy(otherArray[pathIndex], nextFile);\n    pathArray[pathIndex] = otherArray[pathIndex];\n</code></pre>\n\n<p>causes a segmentation fault. Can anyone help?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 18098, "user_id": 3744681, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/XvLrx.jpg?s=128&g=1", "display_name": "Jahid", "link": "https://stackoverflow.com/users/3744681/jahid"}, "edited": false, "score": 0, "creation_date": 1430347139, "post_id": 29955736, "comment_id": 48032373, "body": "So what&#39;s your question? and why isn&#39;t there any c tag and why is there a shell tag?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4580220"}, "edited": false, "score": 0, "creation_date": 1430348146, "post_id": 29955736, "comment_id": 48032816, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/12781954/processing-input-file-in-c\">Processing Input file in c</a>"}, {"owner": {"reputation": 33642, "user_id": 620097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820980fd43f2607a815c1f3dbfe152cc?s=128&d=identicon&r=PG", "display_name": "shellter", "link": "https://stackoverflow.com/users/620097/shellter"}, "edited": false, "score": 0, "creation_date": 1430348430, "post_id": 29955736, "comment_id": 48032951, "body": "@BillyKlarr : looks like you&#39;re on the right track, but you have to tell us what the problem is. Don&#39;t expect us to compile your code and tell you if it is working or what needs to be fixed. That&#39;s not how the stackexchange sites work. To get so you can read from an input file, as you describe above, search here for <code>[c] read input fgets</code>. Good luck."}], "answers": [{"comments": [{"owner": {"reputation": 175, "user_id": 3686216, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e14c442f97c1c3a692316e507cc21c60?s=128&d=identicon&r=PG&f=1", "display_name": "Torger597", "link": "https://stackoverflow.com/users/3686216/torger597"}, "edited": false, "score": 0, "creation_date": 1430824140, "post_id": 29956071, "comment_id": 48217031, "body": "As the question was rather vague, pointed out a few errors in the source posted, and linked to a tutorial of file I/O. I hope this was a decent answer."}], "tags": [], "owner": {"reputation": 175, "user_id": 3686216, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e14c442f97c1c3a692316e507cc21c60?s=128&d=identicon&r=PG&f=1", "display_name": "Torger597", "link": "https://stackoverflow.com/users/3686216/torger597"}, "is_accepted": false, "score": 2, "last_activity_date": 1430348277, "creation_date": 1430348277, "answer_id": 29956071, "question_id": 29955736, "link": "https://stackoverflow.com/questions/29955736/how-to-take-input-from-a-file-using-a-c-program/29956071#29956071", "title": "How to take input from a file using a C program?", "body": "<p>You have several issues here. <br>\nFirst: you declare \"conv_type\" and initialize it, but fail to do anything with it. <br></p>\n\n<pre><code>conv_type;\nconv_type = atoi(argv[1]); \n</code></pre>\n\n<p>Second: before you give a value for \"conv_temp\" you are attempting to use it in an if statement.</p>\n\n<pre><code>if(conv_temp == 1)  \n        conv_temp = (((temp - 273) * 1.8) + 32);  \n    else  \n        conv_temp = ((((temp - 32) *5) / 9) + 273); \n</code></pre>\n\n<p>Third: in the problem statement, you state you have to do file I/O.<br>\n<a href=\"http://www.cprogramming.com/tutorial/cfileio.html\" rel=\"nofollow\">Here</a> is a link to a tutorial on file IO in C.<br></p>\n"}], "migrated_from": {"other_site": {"aliases": ["http://linux.stackexchange.com"], "markdown_extensions": ["Prettify"], "launch_date": 1294871917, "open_beta_date": 1282071600, "closed_beta_date": 1281466800, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/unix/Img/apple-touch-icon@2.png", "favicon_url": "https://cdn.sstatic.net/Sites/unix/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/unix/Img/apple-touch-icon.png", "audience": "users of Linux, FreeBSD and other Un*x-like operating systems", "site_url": "https://unix.stackexchange.com", "api_site_parameter": "unix", "logo_url": "https://cdn.sstatic.net/Sites/unix/Img/logo.png", "name": "Unix &amp; Linux", "site_type": "main_site"}, "on_date": 1430346725, "question_id": 199504}, "owner": {"user_type": "does_not_exist", "display_name": "billy klarr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1430348277, "creation_date": 1430343989, "last_edit_date": 1430348024, "question_id": 29955736, "link": "https://stackoverflow.com/questions/29955736/how-to-take-input-from-a-file-using-a-c-program", "title": "How to take input from a file using a C program?", "body": "<p>I have to take input from a file and convert the number from kelvin to fahrenheit(vice versa), using a \"C\" program.  </p>\n\n<p>Requirements:  </p>\n\n<ol>\n<li>The conversion and numeric outputs must take place in the compiled program.  </li>\n<li>The script will give the user an option to convert either kelvin to fahrenheit or fahrenheit to kelvin.  </li>\n<li>Numbers need to be rounded to the nearest tenth.  </li>\n</ol>\n\n<p>Input file:  </p>\n\n<pre><code>0\n32\n100\n212\n108\n1243\n3000\n85  \n22\n2388\n235\n</code></pre>\n\n<p>Output File:  </p>\n\n<pre><code>Fahrenheit Temperature     Kelvin Temperature  \n  0                           256    \n  32                          273  \n  100                         310    \n  212                         373    \n  108                         315    \n  1243                        945    \n  3000                        1921  \n  85                          302  \n  22                          268  \n  2388                        1581  \n  235                         385  \n</code></pre>\n\n<p>\"C\" Program:  </p>\n\n<pre><code>#include &lt;stdio.h&gt;  \n#include &lt;stdlib.h&gt;  \n\nint main(int argc, char *argv[])  \n{  \n    //assign the variables used in this program  \n    int temp, conv_temp, conv_type;  \n\n    //assign the input options to variables\n    conv_type = atoi(argv[1]);  \n    temp = atoi(argv[2]);  \n\n    //convert the temps  \n    // if input number is 1, then convert from kelvin to fahrenheit    \n    // if input number is anything else, convert from fahrenheit to kelvin    \n\n    if(conv_temp == 1)  \n        conv_temp = (((temp - 273) * 1.8) + 32);  \n    else  \n        conv_temp = ((((temp - 32) *5) / 9) + 273);  \n\n    //print the data    \n    printf(\"    %3.1i    %3.1i\\n\",temp, conv_temp);\n\n    //end of main function  \n\n    return 0;  \n}\n</code></pre>\n"}, {"tags": ["c", "fork", "pvm"], "comments": [{"owner": {"reputation": 4652, "user_id": 2189128, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/P19VP.jpg?s=128&g=1", "display_name": "Jeff Hammond", "link": "https://stackoverflow.com/users/2189128/jeff-hammond"}, "edited": false, "score": 0, "creation_date": 1430366577, "post_id": 29955041, "comment_id": 48038151, "body": "PVM? Are you serious? That project has been dead for ages."}], "owner": {"reputation": 21, "user_id": 4848262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f60113b7b12a1354ca2e7d9a270e892?s=128&d=identicon&r=PG&f=1", "display_name": "Remigiusz M", "link": "https://stackoverflow.com/users/4848262/remigiusz-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 93, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1430344321, "creation_date": 1430343393, "last_edit_date": 1430344321, "question_id": 29955041, "link": "https://stackoverflow.com/questions/29955041/pvm-with-fork", "title": "PVM with fork()", "body": "<p>I am currently trying to make my application. I am writing C code and using PVM library. I will try to shorten what is the app supposed to do:</p>\n\n<blockquote>\n  <p>Master process spawns eg. 5 slave processes, which are communicating between each other and master. Slave process is supposed to do two parallel actions: execute own procedures and the second thing - be a listener to messages coming from other slaves.</p>\n</blockquote>\n\n<p>Here is a small part of code, which is working randomly:</p>\n\n<pre><code>int main()\n{\n     init();\n     if(fork() == 0)\n     {  \n        while(1)\n        {\n        //perform listener actions\n        }\n     }\n     else\n     {  \n        while(1)\n        {\n        //perform some procedures\n        }\n     }      \n}\n</code></pre>\n\n<p>When I put some SEND_MESSAGE actions to MASTER process inside both of these while loops, it performs very strange to me. For example, without those while loops, if I send 5 messages form both of these whiles (together 10 :-)), the master process receives eg. 5 from first loop and 1 message from second. If we <strong>WAIT(NULL)</strong> in the parent process, it executes well (of course there is no while(1) loop then). What might be the problem? Master process keeps waiting for incoming messages, but never receives them.</p>\n\n<p>Thank You for help!\nRegards,\nRemy</p>\n"}, {"tags": ["c", "function", "multidimensional-array", "arguments"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1430343900, "post_id": 29955018, "comment_id": 48031070, "body": "So it is telling you everything. <code>render</code> expecting to get <code>char*</code>, but you are giving it <code>char[][]</code>."}, {"owner": {"reputation": 1297, "user_id": 2132169, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Xn30A.png?s=128&g=1", "display_name": "Marmstrong", "link": "https://stackoverflow.com/users/2132169/marmstrong"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1430344042, "post_id": 29955018, "comment_id": 48031134, "body": "@EugeneSh. Char * is a pointer and I thought passing an array passes the pointer to the first element of the array?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1430344177, "post_id": 29955018, "comment_id": 48031182, "body": "The <b>value</b> of the pointers might be the same, but their type is different and incompatible, as the compiler suggesting. As you can see, it is not an error, it&#39;s a warning, so if you really want to and know what you are doing, you can try and ignore it. But I wouldn&#39;t recommend that."}], "owner": {"reputation": 1297, "user_id": 2132169, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Xn30A.png?s=128&g=1", "display_name": "Marmstrong", "link": "https://stackoverflow.com/users/2132169/marmstrong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 0, "closed_date": 1430345800, "answer_count": 0, "score": 0, "last_activity_date": 1430344910, "creation_date": 1430343307, "question_id": 29955018, "link": "https://stackoverflow.com/questions/29955018/multidimensional-array-passed-as-argument-to-a-function", "closed_reason": "Duplicate", "title": "Multidimensional array passed as argument to a function", "body": "<p>My code below is trying to pass a multidimensional array to another function to perform certain tasks on it however it always produces the following error which I can't understand why. Everywhere I have look online states it was people using the '&amp;' to pass the array parameter but I don't do that.</p>\n\n<pre><code>pong.c:48:17: warning: passing argument 1 of 'render' from incompatible pointer type [enabled by default] \n  case PAINT:     \n             render(new_frame, argv[1], test_screen_size_x,test_screen_size_y);\n</code></pre>\n\n<p>My code:</p>\n\n<pre><code>void render(char *new_frame, char *out_frame, int screen_size_x, int screen_size_y);\n\nint main(int argc, char **argv)\n{\n    int state  = START;     // Holds the current state of the state machine\n\n    if(argc &gt; 1){\n        int test_screen_size_x;\n        int test_screen_size_y;\n\n        test_screen_size_x = *argv[2];  // int screen_size_x\n        test_screen_size_y = *argv[3];  // int screen_size_y\n        char new_frame[test_screen_size_x][test_screen_size_y];   \n\n        while(1){\n            switch(state){\n\n                /*  START state - \n                */\n                case START:     player_config(&amp;player1, test_screen_size_y);\n                            player_config(&amp;player2, test_screen_size_y);\n\n                            state = CALC;       // Move to the CALC state\n                            break;\n\n            /*  CALCULATION state - Performs all the game calculations\n            */\n            case CALC:      paddle(&amp;player1, test_screen_size_y); // Calc paddle position of player 1\n                            paddle(&amp;player2, test_screen_size_y); // Calc paddle position of player 1\n\n                            state = PAINT;       // Move to the PAINT state\n                            break;\n\n            /*  PAINT state - \n            */                         \n            case PAINT:     render(new_frame, argv[1], test_screen_size_x, test_screen_size_y);\n\n                            state = CALC;       // Move to the CALC state\n                            break;    \n        }\n    }\n    return (0);       \n}\n\n\nvoid render(char *new_frame, char *out_frame, int screen_size_x, int screen_size_y)\n/*  Function creates the new frame\n */\n{    \n    memset(new_frame, 0, sizeof(new_frame[0][0]) * screen_size_x * screen_size_y);  // Fill multi-dimensional array full of zeros\n\n    draw_dyn_object(&amp;player1, new_frame);\n    draw_dyn_object(&amp;player2, new_frame);\n\n    out_frame = new_frame;\n}\n\n...\n</code></pre>\n"}, {"tags": ["c", "arrays", "pointers", "memory-address", "base-address"], "comments": [{"owner": {"reputation": 4446, "user_id": 696485, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4de94e14f977802057b0109d079d95a1?s=128&d=identicon&r=PG", "display_name": "Iskar Jarak", "link": "https://stackoverflow.com/users/696485/iskar-jarak"}, "edited": false, "score": 0, "creation_date": 1430343100, "post_id": 29954948, "comment_id": 48030673, "body": "We need to know what the type of the array is, and what size that type is on your machine."}, {"owner": {"reputation": 799, "user_id": 3025112, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3969372f245ff510feb5ba5ae7d08474?s=128&d=identicon&r=PG&f=1", "display_name": "omerfarukdogan", "link": "https://stackoverflow.com/users/3025112/omerfarukdogan"}, "edited": false, "score": 0, "creation_date": 1430343342, "post_id": 29954948, "comment_id": 48030799, "body": "You can check this by any IDE like Visual Studio and Eclipse."}], "answers": [{"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 2, "last_activity_date": 1430343342, "creation_date": 1430343342, "answer_id": 29955029, "question_id": 29954948, "link": "https://stackoverflow.com/questions/29954948/memory-map-of-array/29955029#29955029", "title": "Memory Map of Array", "body": "<p>The location of <code>Arr[n]</code> will be <code>0x5600bc + n*sizeof(Arr[0])</code>. So if the size of the array elements is <code>4</code>, <code>Arr[1]</code> will indeed be at <code>0x5600c0</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 6009, "user_id": 3313438, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/Ks9C6.jpg?s=128&g=1", "display_name": "Ziezi", "link": "https://stackoverflow.com/users/3313438/ziezi"}, "is_accepted": false, "score": 0, "last_activity_date": 1430344661, "last_edit_date": 1430344661, "creation_date": 1430343357, "answer_id": 29955032, "question_id": 29954948, "link": "https://stackoverflow.com/questions/29954948/memory-map-of-array/29955032#29955032", "title": "Memory Map of Array", "body": "<p>Array name (identifier) is actually a pointer to its first element, so the answer to <code>Arr[0]</code> is <code>0x5600bc</code>. Depending on the <code>type</code> of the array and more specifically its <code>element size</code> (in bytes) will determine the increment of the address of each next element.  </p>\n\n<p>In general, <a href=\"http://en.wikipedia.org/wiki/Addressing_mode\" rel=\"nofollow noreferrer\">Indirect addressing</a> mode is used, where you have: \n<code>base address + offset</code>, where <code>base = array name</code>, <code>offset = (element size)*(index of element)</code></p>\n\n<p>Great explanations for <a href=\"http://www.cplusplus.com/doc/tutorial/arrays/\" rel=\"nofollow noreferrer\">arrays</a> and <a href=\"http://www.cplusplus.com/forum/articles/9/\" rel=\"nofollow noreferrer\">pointer and arrays</a>.</p>\n\n<p>Graphical representation:\n <img src=\"https://i.stack.imgur.com/6UD3k.png\" alt=\"enter image description here\"></p>\n"}, {"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1430345094, "post_id": 29955241, "comment_id": 48031562, "body": "By <code>foo[0] + sizeof typename</code>, you mean <code>(uintptr_t)&amp;foo[0] + sizeof typename</code>"}], "tags": [], "owner": {"reputation": 4446, "user_id": 696485, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4de94e14f977802057b0109d079d95a1?s=128&d=identicon&r=PG", "display_name": "Iskar Jarak", "link": "https://stackoverflow.com/users/696485/iskar-jarak"}, "is_accepted": false, "score": 4, "last_activity_date": 1430345168, "last_edit_date": 1430345168, "creation_date": 1430344303, "answer_id": 29955241, "question_id": 29954948, "link": "https://stackoverflow.com/questions/29954948/memory-map-of-array/29955241#29955241", "title": "Memory Map of Array", "body": "<p>Given</p>\n\n<pre><code>typename foo[10] = { 0 };\n</code></pre>\n\n<p>Then <code>foo[0]</code> will be at some address, <code>(uintptr_t)&amp;foo[0]</code>.</p>\n\n<p><code>foo[1]</code> is at <code>(uintptr_t)&amp;foo[0] + sizeof typename</code>, and <code>foo[n]</code> is at <code>(uintptr_t)&amp;foo[0] + n * sizeof typename</code>.</p>\n\n<p>Like this (assuming a 4 byte type here)</p>\n\n<pre><code>0x00000000 arr[0] &lt;- arr is a pointer to this location\n0x00000004 arr[1]\n0x00000008 arr[2]\n...\n</code></pre>\n\n<p>If you have an array of 32-bit integers, that's 4 bytes each, and the array starts at <code>0x5600bc</code> then yes, <code>arr[1]</code> will be at <code>0x5600c0</code>.</p>\n\n<p>You can print the addresses of each element in your array like so:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\nint main(void) {\n  #define ARR_SIZE 10\n  int arr[ARR_SIZE] = {0};\n\n  for (size_t n = 0; n &lt; ARR_SIZE; ++n) {\n    printf(\"arr[%zu] = %p\\n\", n, (void*)&amp;arr[n]);\n  }\n\n  return EXIT_SUCCESS;\n}\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 4681805, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d9e60b9ab9197c9389d923019c7f4cc1?s=128&d=identicon&r=PG&f=1", "display_name": "kids", "link": "https://stackoverflow.com/users/4681805/kids"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1120, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1442353404, "creation_date": 1430342968, "last_edit_date": 1442353404, "question_id": 29954948, "link": "https://stackoverflow.com/questions/29954948/memory-map-of-array", "title": "Memory Map of Array", "body": "<p>If I had an array of size 10 with a base address of say <code>0x5600bc</code>. What would be the memory location of each element of the array and of the <code>ptr</code>? </p>\n\n<p>Ex: What is <code>Arr[0]</code> address, would it be <code>0x5600bc</code>? &amp; would that make <code>Arr[1]</code> be <code>0x5600c0</code>?</p>\n"}, {"tags": ["c", "ipc", "spinlock"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 2, "creation_date": 1430342628, "post_id": 29954818, "comment_id": 48030416, "body": "Can you describe exactly what behavior makes you say it doesn&#39;t work? Do you get an error message? Does your program hang? Does it produce unexpected output?"}, {"owner": {"reputation": 310, "user_id": 3561837, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AmpbB.png?s=128&g=1", "display_name": "jkbx", "link": "https://stackoverflow.com/users/3561837/jkbx"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1430343025, "post_id": 29954818, "comment_id": 48030623, "body": "I am deeply sorry, I forgot the loop. Well it just does not lock my application at all. Semaphores work like a charm, but just not this spinlock."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1430343326, "post_id": 29954818, "comment_id": 48030790, "body": "What the - you&#39;re doing the spinning yourself? Just use <code>pthread_spin_lock</code> instead of that loop. The pre-edit form of your code was correct."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1430343503, "post_id": 29954818, "comment_id": 48030874, "body": "Also, again, what behavior makes you say it &quot;does not lock my application at all&quot;?"}, {"owner": {"reputation": 1161, "user_id": 1055568, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/b5d29d3b038b1bb0e8a5dbc6da5f5177?s=128&d=identicon&r=PG", "display_name": "user1055568", "link": "https://stackoverflow.com/users/1055568/user1055568"}, "edited": false, "score": 0, "creation_date": 1430343622, "post_id": 29954818, "comment_id": 48030936, "body": "pthread_spin_lock will not return until it has acquired the lock.  Looks like that&#39;s what you&#39;re trying to achieve by looping on trylock."}], "answers": [{"comments": [{"owner": {"reputation": 310, "user_id": 3561837, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AmpbB.png?s=128&g=1", "display_name": "jkbx", "link": "https://stackoverflow.com/users/3561837/jkbx"}, "edited": false, "score": 0, "creation_date": 1430344426, "post_id": 29955262, "comment_id": 48031273, "body": "The criticalInt is actually shared memory."}, {"owner": {"reputation": 2626, "user_id": 300290, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wI1od.png?s=128&g=1", "display_name": "Mike Andrews", "link": "https://stackoverflow.com/users/300290/mike-andrews"}, "reply_to_user": {"reputation": 310, "user_id": 3561837, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AmpbB.png?s=128&g=1", "display_name": "jkbx", "link": "https://stackoverflow.com/users/3561837/jkbx"}, "edited": false, "score": 0, "creation_date": 1430344507, "post_id": 29955262, "comment_id": 48031310, "body": "Is &quot;lock&quot; in shared memory too?"}, {"owner": {"reputation": 310, "user_id": 3561837, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AmpbB.png?s=128&g=1", "display_name": "jkbx", "link": "https://stackoverflow.com/users/3561837/jkbx"}, "edited": false, "score": 0, "creation_date": 1430344707, "post_id": 29955262, "comment_id": 48031389, "body": "No, how do I get it in there?"}, {"owner": {"reputation": 2626, "user_id": 300290, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wI1od.png?s=128&g=1", "display_name": "Mike Andrews", "link": "https://stackoverflow.com/users/300290/mike-andrews"}, "reply_to_user": {"reputation": 310, "user_id": 3561837, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AmpbB.png?s=128&g=1", "display_name": "jkbx", "link": "https://stackoverflow.com/users/3561837/jkbx"}, "edited": false, "score": 0, "creation_date": 1430344966, "post_id": 29955262, "comment_id": 48031498, "body": "If you look at the typedef for pthread_spinlock_t, it&#39;s just &quot;volatile int&quot;.  It might work if you can declare the lock the same way you declared the criticalInt."}, {"owner": {"reputation": 2626, "user_id": 300290, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wI1od.png?s=128&g=1", "display_name": "Mike Andrews", "link": "https://stackoverflow.com/users/300290/mike-andrews"}, "reply_to_user": {"reputation": 310, "user_id": 3561837, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AmpbB.png?s=128&g=1", "display_name": "jkbx", "link": "https://stackoverflow.com/users/3561837/jkbx"}, "edited": false, "score": 0, "creation_date": 1430345387, "post_id": 29955262, "comment_id": 48031679, "body": "Also, if you&#39;re using gcc, consider using __sync_fetch_and_add to atomically increment the integer instead of dealing with the locking!"}], "tags": [], "owner": {"reputation": 2626, "user_id": 300290, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wI1od.png?s=128&g=1", "display_name": "Mike Andrews", "link": "https://stackoverflow.com/users/300290/mike-andrews"}, "is_accepted": true, "score": 2, "last_activity_date": 1430344369, "creation_date": 1430344369, "answer_id": 29955262, "question_id": 29954818, "link": "https://stackoverflow.com/questions/29954818/usage-of-spinlock-functions/29955262#29955262", "title": "Usage of spinlock functions", "body": "<p>For anything related to POSIX threads to work, you need to use <code>pthread_create()</code> to start a new thread.  Here, you're using <code>fork()</code>, which starts a new process that does not share the same address space as the parent.</p>\n"}, {"tags": [], "owner": {"reputation": 118, "user_id": 4833751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9b6c96ed44ff0364d50e53af77cafdc?s=128&d=identicon&r=PG&f=1", "display_name": "ckolivas", "link": "https://stackoverflow.com/users/4833751/ckolivas"}, "is_accepted": false, "score": 1, "last_activity_date": 1430344702, "creation_date": 1430344702, "answer_id": 29955337, "question_id": 29954818, "link": "https://stackoverflow.com/questions/29954818/usage-of-spinlock-functions/29955337#29955337", "title": "Usage of spinlock functions", "body": "<p>If you want the spinlock to be used by multiple <em>processes</em> and not <em>threads</em> then the spinlock itself also needs to be generated in shared process memory. The pshared value of PTHREAD_PROCESS_SHARED by itself is not enough for a spinlock to be shared between processes.</p>\n"}], "owner": {"reputation": 310, "user_id": 3561837, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AmpbB.png?s=128&g=1", "display_name": "jkbx", "link": "https://stackoverflow.com/users/3561837/jkbx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 799, "favorite_count": 0, "accepted_answer_id": 29955262, "answer_count": 2, "score": 0, "last_activity_date": 1430344702, "creation_date": 1430342488, "last_edit_date": 1430344369, "question_id": 29954818, "link": "https://stackoverflow.com/questions/29954818/usage-of-spinlock-functions", "title": "Usage of spinlock functions", "body": "<p>How do I use these functions?\nI have declared lock globally.</p>\n\n<pre><code>pthread_spinlock_t lock;\n</code></pre>\n\n<p>Also the spinlock is initialized locally.</p>\n\n<pre><code>pthread_spin_init(&amp;lock, 1); // non-zero as pshared for IPC\n</code></pre>\n\n<p>But now I want to lock my critical integer and increment it.\nI have multiple processes running this in a loop:</p>\n\n<pre><code>while(0 != pthread_spin_trylock(&amp;lock));\ncriticalInt += 1;\npthread_spin_unlock(&amp;lock);\n</code></pre>\n\n<p>Why doesn't that work?\nAlso, how is the following function used?</p>\n\n<pre><code>pthread_spin_lock(&amp;lock);\n</code></pre>\n\n<p>EDIT:</p>\n\n<pre><code>for (i=0; i &lt; NUM_CHILDREN; i++) {\n\n   pid[i] = fork();\n   if (pid[i] == -1) { return EXIT_FAILURE; }\n   if (pid[i] == 0) {\n   while (criticalInt &lt; MAXCOUNT) {\n      pthread_spin_lock(&amp;lock);\n      criticalInt += 1;\n      pthread_spin_unlock(&amp;lock);\n      count++;\n   }\n   printf(\"Process %i counted %i\\n\", i, count);\n\n}\n</code></pre>\n\n<p>For a MAXCOUNT of 1000000 hat produces the following output:</p>\n\n<pre><code>    Process 3 counted 687858\n    Process 0 counted 815657\n    Process 1 counted 640191\n    Process 2 counted 744340\n</code></pre>\n\n<p>Actually all together summed up should be 1000000. But they are not.</p>\n\n<p>I get similar results if I totally delete the lock.</p>\n"}, {"tags": ["c", "windows", "signals"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1430341792, "post_id": 29954597, "comment_id": 48029955, "body": "Or maybe the program is handling the signal only once because of some bug?"}, {"owner": {"reputation": 2967, "user_id": 2324576, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/993e0f8ecc3e4d85f2990b6a6fe5b0a1?s=128&d=identicon&r=PG", "display_name": "James Joshua Street", "link": "https://stackoverflow.com/users/2324576/james-joshua-street"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1430341991, "post_id": 29954597, "comment_id": 48030059, "body": "that&#39;s the thing. i am looking at the program as it runs. I don&#39;t see any issue at all. the code looks fine, and stepping through it it looks like the code is running fine, it just doesn&#39;t receive the second signal even though it&#39;s in the right loop. I&#39;m wondering if it&#39;s due to some difference between windows and linux."}, {"owner": {"reputation": 2967, "user_id": 2324576, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/993e0f8ecc3e4d85f2990b6a6fe5b0a1?s=128&d=identicon&r=PG", "display_name": "James Joshua Street", "link": "https://stackoverflow.com/users/2324576/james-joshua-street"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1430342061, "post_id": 29954597, "comment_id": 48030100, "body": "I guess my only option to try next is to figure out how to use gdb to capture the signal and then see where it goes. However, when i tried that a few minutes ago I was confused as to why the program was exiting. However,based on this: <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms682541%28v=vs.85%29.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/&hellip;</a>  it seems that i need to handle the exception that is raised"}, {"owner": {"reputation": 2967, "user_id": 2324576, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/993e0f8ecc3e4d85f2990b6a6fe5b0a1?s=128&d=identicon&r=PG", "display_name": "James Joshua Street", "link": "https://stackoverflow.com/users/2324576/james-joshua-street"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1430343203, "post_id": 29954597, "comment_id": 48030733, "body": "hmm anyway i think your comments helped get me on the right track. my guess is that somewhere some call is deattaching the signals handler too early. I don&#39;t see where it is, but that must be the case"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1430345023, "post_id": 29954597, "comment_id": 48031523, "body": "And that makes a lot of sense."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1430346404, "post_id": 29954597, "comment_id": 48032076, "body": "@JamesJoshuaStreet If you think that is a possibility, you can use <code>sigaction</code> to examine whether the handler is still installed."}], "answers": [{"comments": [{"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1430368804, "post_id": 29956110, "comment_id": 48038762, "body": "If you are using a modern version of Visual Studio, there should be no problem with calling runtime functions from the control-C signal handler.  However, if it worries you, you do have the option of using the native API rather than the C library."}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 1, "creation_date": 1430412014, "post_id": 29956110, "comment_id": 48066311, "body": "FYI, Windows doesn&#39;t implement POSIX signals, so this isn&#39;t the operating system. Console applications register handlers that get called by <code>kernel32!CtrlRoutine</code> on a thread that&#39;s started remotely by csrss.exe, after it gets a control event message from conhost.exe. Microsoft&#39;s C runtime, if used at all, registers a handler to implement <code>SIGINT</code> and <code>SIGBREAK</code> signals, but you can&#39;t send <code>SIGINT</code> to an arbitrary console process. You can maybe trigger a <code>CTRL_C_EVENT</code> in a process group (or all processes) if you&#39;re attached to the same console and Ctrl+C isn&#39;t disabled."}], "tags": [], "owner": {"reputation": 2967, "user_id": 2324576, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/993e0f8ecc3e4d85f2990b6a6fe5b0a1?s=128&d=identicon&r=PG", "display_name": "James Joshua Street", "link": "https://stackoverflow.com/users/2324576/james-joshua-street"}, "is_accepted": false, "score": 1, "last_activity_date": 1430348503, "creation_date": 1430348503, "answer_id": 29956110, "question_id": 29954597, "link": "https://stackoverflow.com/questions/29954597/how-does-windows-command-prompt-handle-consecutive-ctrl-c-sigint-signals/29956110#29956110", "title": "how does windows command prompt handle consecutive CTRL + C (SIGINT) signals?", "body": "<p>It appears that you have to reattach the handler after it is activated. I am guessing the operating system is removing it or something, but it wasn't the code I was looking at that deattached it. However, doing as the site below recommends and reatttaching the handler seems to work.</p>\n\n<p><a href=\"http://www.geeksforgeeks.org/write-a-c-program-that-doesnt-terminate-when-ctrlc-is-pressed/\" rel=\"nofollow\">http://www.geeksforgeeks.org/write-a-c-program-that-doesnt-terminate-when-ctrlc-is-pressed/</a></p>\n\n<p>One slightly bothersome thing is that the documentation:\n<a href=\"http://en.cppreference.com/w/c/program/signal\" rel=\"nofollow\">http://en.cppreference.com/w/c/program/signal</a></p>\n\n<p>states that\n\"\nIf the signal handler is called NOT as a result of abort or raise (in other words, the signal handler is asynchronous), the behavior is undefined if\nthe signal handler calls any function within the standard library, except\nabort\n_Exit\nquick_exit\nsignal with the first argument not being the number of the signal currently handled.\n\"</p>\n\n<p>I take this to mean that since I am calling the signal with first argument being the same number of the currently handled signal, that I should expect undefined behavior. This is slightly bothersome, which makes me wonder if there are any other options. However, for now this seems to work.</p>\n"}], "owner": {"reputation": 2967, "user_id": 2324576, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/993e0f8ecc3e4d85f2990b6a6fe5b0a1?s=128&d=identicon&r=PG", "display_name": "James Joshua Street", "link": "https://stackoverflow.com/users/2324576/james-joshua-street"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 796, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1430348503, "creation_date": 1430341704, "last_edit_date": 1430343165, "question_id": 29954597, "link": "https://stackoverflow.com/questions/29954597/how-does-windows-command-prompt-handle-consecutive-ctrl-c-sigint-signals", "title": "how does windows command prompt handle consecutive CTRL + C (SIGINT) signals?", "body": "<p>I am running a program from the windows command prompt, and I am getting some weird behavior when I press CTRL C, resume, then CTRL C again. </p>\n\n<p>ctrl C causes the program I am using (icarus verilog) to pause the first time I hit ctrl C. I then type \"cont\"(an icarus verilog command to continue after being paused) and then it exits that handler and reenters the main loop (I have print statements inside that let me know) it was in the 1st time. </p>\n\n<p>However, the 2nd press of CTRL + C does not hit the SIGINT handler. </p>\n\n<p>I am wondering whether windows interprets a 2nd ctrl C event differently and in fact sends a different signal to the program, or perhaps sends a terminate signal.</p>\n\n<p>I was going to post the main code loop, but i realize I can simplify things for the reader.</p>\n\n<p>this function here:</p>\n\n<pre><code>extern \"C\" void signals_handler(int)\n{\n    printf(\"Inside Signals handler \\n\");\n      schedule_stopped_flag = true;\n}\n</code></pre>\n\n<p>is hit by CTRL C the first time, but not the 2nd time it is called. </p>\n\n<p>It is attached by passing this function pointer in the function:</p>\n\n<pre><code>static void signals_capture(void)\n{\n      signal(SIGINT, &amp;signals_handler);\n}\n</code></pre>\n\n<p>the documentation of the function \"signal\" can be seen here:\n<a href=\"http://www.cplusplus.com/reference/csignal/signal/\" rel=\"nofollow\">http://www.cplusplus.com/reference/csignal/signal/</a></p>\n\n<p>There does not appear to be any place within the code where the signal handler is detached.</p>\n"}, {"tags": ["c", "gdb", "ncurses"], "comments": [{"owner": {"reputation": 863, "user_id": 507761, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1a777be80e0c463a139e737821941952?s=128&d=identicon&r=PG", "display_name": "Matthew Read", "link": "https://stackoverflow.com/users/507761/matthew-read"}, "edited": false, "score": 2, "creation_date": 1430341757, "post_id": 29954577, "comment_id": 48029939, "body": "You&#39;re going to need to find debug symbols for that library, or else build it yourself and use that version and its symbols."}, {"owner": {"reputation": 382, "user_id": 2570513, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7eb8f514f4fb6aa178669e98bc512797?s=128&d=identicon&r=PG", "display_name": "Mario Gil", "link": "https://stackoverflow.com/users/2570513/mario-gil"}, "reply_to_user": {"reputation": 863, "user_id": 507761, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1a777be80e0c463a139e737821941952?s=128&d=identicon&r=PG", "display_name": "Matthew Read", "link": "https://stackoverflow.com/users/507761/matthew-read"}, "edited": false, "score": 0, "creation_date": 1430343938, "post_id": 29954577, "comment_id": 48031087, "body": "@MatthewRead please see my edit, i believe that symbols are loaded."}, {"owner": {"reputation": 3688, "user_id": 1111557, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f2b40cacf02c8fa3f91429ef441912ac?s=128&d=identicon&r=PG", "display_name": "inetknght", "link": "https://stackoverflow.com/users/1111557/inetknght"}, "edited": false, "score": 0, "creation_date": 1430347848, "post_id": 29954577, "comment_id": 48032695, "body": "@GilL&#225;zaro the symbols are <i>loaded</i> insomuch as GDB was able to locate the exported symbols. However they don&#39;t describe any debugging information as the subnote explains."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1430365671, "post_id": 29954577, "comment_id": 48037925, "body": "Chances are, you are passing invalid data to the function (NULL or uninitialized pointer value). Go up in the call stack and see."}], "answers": [{"tags": [], "owner": {"reputation": 1581, "user_id": 4788085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8412430be42932ed20e55d7b1400356a?s=128&d=identicon&r=PG&f=1", "display_name": "Moldova", "link": "https://stackoverflow.com/users/4788085/moldova"}, "is_accepted": true, "score": 1, "last_activity_date": 1430420392, "creation_date": 1430420392, "answer_id": 29975657, "question_id": 29954577, "link": "https://stackoverflow.com/questions/29954577/how-to-debug-inside-a-library/29975657#29975657", "title": "How to debug inside a library?", "body": "<p>Most likely the library is not at fault and you are passing it bad data such as an already freed pointer or a pointer to memory that has been overwritten. Try running your program under <code>valgrind</code> and see if that tells you where the error is.</p>\n\n<p>If you must debug into the library, ncurses is open source so you can download and build it yourself from source with debug on, and link against your own copy. This will give you full source-level debugging in the library. </p>\n"}], "owner": {"reputation": 382, "user_id": 2570513, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7eb8f514f4fb6aa178669e98bc512797?s=128&d=identicon&r=PG", "display_name": "Mario Gil", "link": "https://stackoverflow.com/users/2570513/mario-gil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 220, "favorite_count": 0, "accepted_answer_id": 29975657, "answer_count": 1, "score": 0, "last_activity_date": 1430420392, "creation_date": 1430341673, "last_edit_date": 1430353567, "question_id": 29954577, "link": "https://stackoverflow.com/questions/29954577/how-to-debug-inside-a-library", "title": "How to debug inside a library?", "body": "<p>I am coding a program that will have a ncurses TUI, in one function i use the <code>werase(WINDOW * win)</code> function that is causing problems. The function does not return <code>ERR</code> or <code>OK</code> because is causing a segmentation fault in it. What i want to know is how do i see whats going on inside the function declaration. I'm using gdb and enabled <code>set step-mode on</code>and managed to enter the library pressing s over werase, but, gdb outputs something like this:</p>\n\n<pre><code>0x00007ffff7b8fc4b in werase () from /usr/lib/libncursesw.so.5\n</code></pre>\n\n<p>(gdb) </p>\n\n<p>Then, after a few s keystrokes: </p>\n\n<pre><code>Program received signal SIGSEGV, Segmentation fault.\n0x00007ffff7b8fc60 in werase () from /usr/lib/libncursesw.so.5\n</code></pre>\n\n<p>(gdb)</p>\n\n<p>How do i make gdb to output the line that is reading in the function declaration instead of just de memory address of that line?</p>\n\n<p>Additional information</p>\n\n<pre><code>(gdb) info sharedlibrary\nFrom                To                  Syms Read   Shared Object Library\n0x00007ffff7ddbb80  0x00007ffff7df52f0  Yes (*)     /lib64/ld-linux-x86-64.so.2\n0x00007ffff7b8b000  0x00007ffff7bbff38  Yes (*)     /usr/lib/libncursesw.so.5\n0x00007ffff77f24d0  0x00007ffff791eee4  Yes (*)     /usr/lib/libc.so.6\n(*): Shared library is missing debugging information.\n(gdb) sharedlibrary libncursesw\nSymbols already loaded for /usr/lib/libncursesw.so.5\n</code></pre>\n\n<p>I found that i had to compile with -lncurses_g or -lcurses_g wich i done already with no result else than <code>/usr/bin/ld: cannot find -lcurses_g</code>. It seems that the debugging info is not installed in my system but i can't figure out why. I'm using Arch linux.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 13, "user_id": 4848208, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hHIie.jpg?s=128&g=1", "display_name": "Costantinos", "link": "https://stackoverflow.com/users/4848208/costantinos"}, "reply_to_user": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 0, "creation_date": 1430342494, "post_id": 29954370, "comment_id": 48030345, "body": "Sorry guys ... I correct it    ... thank you again"}], "answers": [{"tags": [], "owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "is_accepted": true, "score": 0, "last_activity_date": 1430345469, "creation_date": 1430345469, "answer_id": 29955466, "question_id": 29954370, "link": "https://stackoverflow.com/questions/29954370/c-language-program-dynamic-table-with-use-of-poionters/29955466#29955466", "title": "C Language Program Dynamic Table with use of poionters", "body": "<p>rewrite sample with malloc and realloc</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define LINE(n) do { int num = n; while(num--){ putchar('-'); } putchar('\\n'); }while(0)\n\nint main(void){\n    system(\"COLOR A\");\n    srand(time(NULL));\n\n    int a, b;\n    int **pinak;\n    int i, j;\n\n    printf(\"input a and b for pinak[a][b] : \");\n    scanf(\"%d %d\", &amp;a, &amp;b);\n\n    /* creation and filling of table pinak[a][b] */\n    pinak = malloc(a * sizeof(*pinak));//malloc(a * sizeof(int*));\n    for(i = 0; i &lt; a; i++){\n        pinak[i] = malloc(b * sizeof(*pinak[0]));//malloc(b * sizeof(int);\n        for(j = 0; j &lt; b; j++){\n            pinak[i][j] = (rand()%(500-1))+1;/*Fillinig the table  */\n        } \n    }\n\n    /*printing the table*/\n    for(i = 0; i &lt; a; i++){\n        LINE(b * 6 + 1);\n        for(j=0;j&lt;b;j++){\n            printf(\"|%4d \", pinak[i][j]);\n        }\n        printf(\"|\\n\");\n    }\n    LINE(b * 6 + 1);\n\n    int a2 = a*2, b2 = b*2;//expand width and height\n    pinak = realloc(pinak, a2 * sizeof(*pinak));\n    for(i = 0; i &lt; a; i++) {\n        pinak[i] = realloc(pinak[i], b2 * sizeof(*pinak[0]));\n        for(j = b; j &lt; b2; j++){\n            pinak[i][j]=(rand()%(500-1))+1;\n        } \n    }\n    for(i = a; i &lt; a2; i++) {\n        pinak[i] = malloc(b2 * sizeof(*pinak[0]));\n        for(j = 0; j &lt; b2; j++){\n            pinak[i][j] = (rand()%(500-1))+1;\n        } \n    }\n\n    /*printing the table*/\n    for(i = 0; i &lt; a2; i++){\n        LINE(b2 * 6 + 1);\n        for(j = 0; j &lt; b2; j++){\n            printf(\"|%4d \", pinak[i][j]);\n        }\n        printf(\"|\\n\");\n    }\n    LINE(b2 * 6 + 1);\n\n    //release\n    for(i = 0; i &lt; a2; i++)\n        free(pinak[i]);\n    free(pinak);\n\n    system(\"PAUSE\");\n    system(\"COLOR 7\");\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 4848208, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hHIie.jpg?s=128&g=1", "display_name": "Costantinos", "link": "https://stackoverflow.com/users/4848208/costantinos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 29955466, "answer_count": 1, "score": -1, "last_activity_date": 1432167497, "creation_date": 1430340961, "last_edit_date": 1432167497, "question_id": 29954370, "link": "https://stackoverflow.com/questions/29954370/c-language-program-dynamic-table-with-use-of-poionters", "title": "C Language Program Dynamic Table with use of poionters", "body": "<p>I wrote this program under 64bit win7 in C with DevC \nand it stacks all the time , when it began it makes the first table and when trying to double the table it stack ,someone told me about realloc but i dont know the use of it if somenone can help i apretiate . thank you </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(){\nsystem(\"COLOR A\");  \nsrand(time(NULL));  \nint a,b,c,i,j;\nint *p,*r;  \nint k;\n\nprintf(\"Dwse ari8mo grammwn pinaka : \");\nscanf(\"%d\",&amp;a);       /*scanf for x,y of table */\nprintf(\"\\n\\n\\n\");\nprintf(\"Dwse ari8mo sthlwn pinaka : \");\nscanf(\"%d\",&amp;b);\nprintf(\"\\n\");\n\nint pinak[a][b];  /*table declare*/\n\nfor (i=0;i&lt;a;i++) /* creation and filling of table pinak[a][b]*/ {\n    for (j=0;j&lt;b;j++){\n        pinak[i][j]=(rand()%(500-1))+1;  /*Fillinig the table  */\n       } \n    }   \n\n  /*printing the table*/\n\nfor (i=0;i&lt;a;i++){\n     for (k=0;k&lt;((b+1)*2);k++){\n          printf(\"---\");    \n     }  \n     printf(\"\\n\");\n\n     for (j=0;j&lt;b;j++){                  \n       printf(\"|%4d |\",pinak[i][j]);                    \n     }      \n       printf(\"\\n\");        \n    }       \nfor (k=0;k&lt;(b+1)*2;k++){\n          printf(\"---\");    \n}\n\np=&amp;a;  /*pointer ffor double the table dynamic */\nr=&amp;b;\n\nprintf(\"H dieu8insi mnhmhs A einai : %d kai i 8esh b einai : %d\",*p,*r);\n\nprintf(\"\\n\");\nprintf(\"\\n\");\n\n*p=(*p)*2;  /* doubling the x,y of table */\n*r=(*r)*2;\n\n    /* Create and fill the new table */ \n\nfor (i=0;i&lt;a;i++){\n      for (k=0;k&lt;((b+1)*2);k++){\n          printf(\"---\");    \n       }  \n      printf(\"\\n\");\n     for (j=0;j&lt;b;j++){          \n       if(i&lt;(a/2) &amp;&amp; j&lt;(b/2)){           \n           printf(\"|%4d |\",pinak[i][j]);                      \n        }\n       else{\n         pinak[i][j]=(rand()%(500-1))+1;\n         printf(\"|%4d |\",pinak[i][j]);                              \n       }                          \n      }                                         \n      printf(\"\\n\");     \n }      \nfor (k=0;k&lt;(b+1)*2;k++){\n          printf(\"---\");    \n}   \nsystem(\"PAUSE\");    \n}\n</code></pre>\n"}, {"tags": ["c", "loops", "optimization", "matrix", "iteration"], "comments": [{"owner": {"reputation": 10428, "user_id": 3135317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e914266956f4052eef356be7850ea49?s=128&d=identicon&r=PG&f=1", "display_name": "FoggyDay", "link": "https://stackoverflow.com/users/3135317/foggyday"}, "edited": false, "score": 0, "creation_date": 1430340868, "post_id": 29954270, "comment_id": 48029438, "body": "because incrementing <code>*p</code> is equivalent to indexing <code>a[ri + j]</code>"}, {"owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 2, "creation_date": 1430340895, "post_id": 29954270, "comment_id": 48029457, "body": "The idea is that the pointer will keep on going, so after one j loop it will point to a[n], after two a[2*n] etc. That is why it needs no ri in it."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1430372592, "post_id": 29954270, "comment_id": 48040140, "body": "To be identical, you have to put <code>p = a;</code> instead of <code>*p = a;</code> or you will run into trouble."}], "answers": [{"tags": [], "owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "is_accepted": false, "score": 2, "last_activity_date": 1430341298, "creation_date": 1430341298, "answer_id": 29954474, "question_id": 29954270, "link": "https://stackoverflow.com/questions/29954270/explanation-of-matrix-iteration-optimization/29954474#29954474", "title": "Explanation of matrix iteration optimization", "body": "<p>The code goes through an array of n*n elements. In the first one it is indexed like by row and column, which are calculated separately and then added together. But since the data is in one array without gaps, there is no need to calculate the indexes this way for sequential access.</p>\n\n<p>If you think about the indexer in the first: <code>i*n + j</code>, it means that after i goes up by one, the indexer goes up by n. In the second one the pointer moves forward one position after every element, so when the <code>j</code> loop goes from 0 to n-1, <code>i</code> turns into 1 and the pointer <code>p</code> has moved n elements forward. So it points to <code>a[1*n+0]</code>, which is equivalent to <code>i*n+j</code> at this position. And this is continued until the end.</p>\n"}, {"tags": [], "owner": {"reputation": 6639, "user_id": 1157100, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/1f9W9.png?s=128&g=1", "display_name": "200_success", "link": "https://stackoverflow.com/users/1157100/200-success"}, "is_accepted": true, "score": 2, "last_activity_date": 1430341890, "creation_date": 1430341890, "answer_id": 29954657, "question_id": 29954270, "link": "https://stackoverflow.com/questions/29954270/explanation-of-matrix-iteration-optimization/29954657#29954657", "title": "Explanation of matrix iteration optimization", "body": "<p>If you ignore all of the calculations, and just look at the loop counters\u2026</p>\n\n<pre><code>for ( int i = 0; i &lt; n; i++ ) {\n  for ( int j = 0; j &lt; n; j++ )\n    printf(\"%d\\n\", n * i + j);\n}\n</code></pre>\n\n<p>You'll see that <code>ri + j</code>, which is <code>n * i + j</code>, counts up from 0 (inclusive) to n<sup>2</sup> (exclusive).  Therefore, <code>a[ri + j]</code> is just walking along the array one element at a time.  You can do the same walk with <code>p++</code>.</p>\n"}], "owner": {"reputation": 85, "user_id": 3371725, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/bVXyh.jpg?s=128&g=1", "display_name": "5antoro", "link": "https://stackoverflow.com/users/3371725/5antoro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 29954657, "answer_count": 2, "score": 1, "last_activity_date": 1430347030, "creation_date": 1430340624, "last_edit_date": 1430347030, "question_id": 29954270, "link": "https://stackoverflow.com/questions/29954270/explanation-of-matrix-iteration-optimization", "title": "Explanation of matrix iteration optimization", "body": "<p>I'm studying for my final exam and I'm going over some optimization techniques. For some reason, there's not a lot of information on this particular example and I don't understand it, so maybe I can get some help.</p>\n\n<p>In the Powerpoint slides, there is this example of strength reduction.</p>\n\n<pre><code>c1 = f();\nfor ( int i = 0; i &lt; n; i++ ) {\n  c2 = c1 + g(i);\n  int ri = n * i;\n  for ( int j = 0; j &lt; n; j++ )\n    a[ ri + j ] = c2 + h(j);\n}\n</code></pre>\n\n<p>can be transformed into</p>\n\n<pre><code>c1 = f();\n*p = a;\nfor ( int i = 0; i &lt; n; i++ ){\n  c2 = c1 + g(i);\n  for ( int j = 0; j &lt; n; j++ )\n    *p++ = c2 + h(j);\n}\n</code></pre>\n\n<p>How is this the same code? I don't understand because incrementing a pointer just moves it up one element and the original moves up a lot more than 1 for every i value. Is there some error or am I missing something?</p>\n"}, {"tags": ["c", "floating-point"], "answers": [{"comments": [{"owner": {"reputation": 181, "user_id": 1144251, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c8710b5099198e71dff74223fde67303?s=128&d=identicon&r=PG", "display_name": "user1144251", "link": "https://stackoverflow.com/users/1144251/user1144251"}, "edited": false, "score": 0, "creation_date": 1430340730, "post_id": 29954217, "comment_id": 48029352, "body": "How do I dump the hex representation of the floating point value? ie. what it looks like in memory."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 181, "user_id": 1144251, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c8710b5099198e71dff74223fde67303?s=128&d=identicon&r=PG", "display_name": "user1144251", "link": "https://stackoverflow.com/users/1144251/user1144251"}, "edited": false, "score": 2, "creation_date": 1430341341, "post_id": 29954217, "comment_id": 48029697, "body": "@user1144251 Try <code>printf(&quot;fTest = %a\\n&quot;,fTest);</code> to print in &quot;hexadecimal floating-point&quot;."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1430341436, "post_id": 29954217, "comment_id": 48029752, "body": "@chux I have never used the <code>a</code> specifier, but your are absolutely right, just read it in the draft pdf."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1430343036, "post_id": 29954217, "comment_id": 48030633, "body": "@chux interesting! <code>fTest</code> is a rather small number and the <code>%a</code> format reveals more than the unqualified <code>%f</code>does."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1430343320, "post_id": 29954217, "comment_id": 48030785, "body": "@Weather Vane for more detail on revealing more: <a href=\"http://stackoverflow.com/q/16839658/2410359\">stackoverflow.com/q/16839658/2410359</a>"}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": true, "score": 3, "last_activity_date": 1430341713, "last_edit_date": 1430341713, "creation_date": 1430340468, "answer_id": 29954217, "question_id": 29954187, "link": "https://stackoverflow.com/questions/29954187/floating-point-value-changes-after-function-return/29954217#29954217", "title": "Floating Point Value Changes After Function Return", "body": "<p>You cannot print a <code>float</code> value with the <code>\"%x\"</code> specifier. It's undefined behavior, and your program is obviously behaving accordingly.</p>\n\n<p>This is from the C11 draft 1570,</p>\n\n<blockquote>\n  <p><strong>7.21.6.1 The <code>fprintf</code> function</strong></p>\n  \n  <ol start=\"8\">\n  <li><p>The conversion specifiers and their meanings are:</p>\n  \n  <p><strong><code>o,u,x,X</code></strong></p>\n  \n  <p>The <strong>unsigned int</strong> argument is converted to unsigned octal (o), unsigned\n  decimal (u), or unsigned hexadecimal notation (x or X) in the style dddd; the\n  letters abcdef are used for x conversion and the letters ABCDEF for X\n  conversion. The precision specifies the minimum number of digits to appear;\n  if the value being converted can be represented in fewer digits, it is expanded|\n  with leading zeros. The default precision is 1. The result of converting a\n  zero value with a precision of zero is no characters.\n  ?</p></li>\n  <li>If a conversion specification is invalid, the behavior is undefined. 282) <strong>If any argument is not the correct type for the corresponding conversion specification, the behavior is undefined</strong>.</li>\n  </ol>\n</blockquote>\n"}], "owner": {"reputation": 181, "user_id": 1144251, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c8710b5099198e71dff74223fde67303?s=128&d=identicon&r=PG", "display_name": "user1144251", "link": "https://stackoverflow.com/users/1144251/user1144251"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 0, "closed_date": 1430341232, "accepted_answer_id": 29954217, "answer_count": 1, "score": 1, "last_activity_date": 1430341713, "creation_date": 1430340368, "question_id": 29954187, "link": "https://stackoverflow.com/questions/29954187/floating-point-value-changes-after-function-return", "closed_reason": "Duplicate", "title": "Floating Point Value Changes After Function Return", "body": "<p>I'm finding my float value has changed after being returned. \nI output the hex value of the float before being returned and then after it gets returned. I expect the HEX output to be identical but they have changed. Can you please explain why this is happening and how do I prevent this from happening? </p>\n\n<p>Thanks!</p>\n\n<pre><code>  #include &lt;stdio.h&gt;\n  typedef int             uint32;\n  typedef unsigned char   uint8;\n  static const float CONST_FLOAT = 150.36e6;\n\n  uint32 foo( uint8 param ) {\n     return 1;\n  }\n\n  float get_float( uint8 param )\n  {\n       float fVal = 0.0;\n\n       fVal = (foo( param )*1.0) / ( 60.0 * CONST_FLOAT );\n\n       printf(\"fVal = 0x%X\\n\", fVal);\n       printf(\"fVal = %f\\n\", fVal);\n\n       return fVal;\n  }\n\n  int main(void) {\n     float fTest;\n\n     fTest = get_float(1);\n\n     printf(\"fTest = 0x%X\\n\",fTest);\n     printf(\"fTest = %f\\n\",fTest);\n\n     return;\n  }\n</code></pre>\n\n<p>OUTPUT: \nfVal = 0x6A96C728\nfVal = 0.000000</p>\n\n<p>fTest = 0x9AAF9000\nfTest = 0.000000</p>\n\n<p>I expect the fVal displayed in Hex format to be the same as fTest in Hex but they turned out different why is that?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c", "embedded"], "comments": [{"owner": {"reputation": 2279, "user_id": 1370785, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/oASta.jpg?s=128&g=1", "display_name": "jiveturkey", "link": "https://stackoverflow.com/users/1370785/jiveturkey"}, "edited": false, "score": 0, "creation_date": 1430342181, "post_id": 29954177, "comment_id": 48030168, "body": "Are you asking why you are getting stuck or suggestions on how to reformat so you can process one number?  Because you can only process 2 keys because <code>displayNumber</code> is called in you 2nd loop after your 2nd called to <code>getkey</code>"}, {"owner": {"reputation": 45, "user_id": 3381525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3793311c6cec9a729c23a983408f1a8c?s=128&d=identicon&r=PG&f=1", "display_name": "Apprentice0", "link": "https://stackoverflow.com/users/3381525/apprentice0"}, "reply_to_user": {"reputation": 2279, "user_id": 1370785, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/oASta.jpg?s=128&g=1", "display_name": "jiveturkey", "link": "https://stackoverflow.com/users/1370785/jiveturkey"}, "edited": false, "score": 0, "creation_date": 1430349710, "post_id": 29954177, "comment_id": 48033385, "body": "I would like suggestions to process one number if only one number is pressed, and also handle two numbers.  So, my goal is that if the user presses one number followed by the key F, then i will return that single digit.  If the user enters two digits, then I return that number.  My code can&#39;t handle a one digit input correctly.  Thanks"}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 3381525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3793311c6cec9a729c23a983408f1a8c?s=128&d=identicon&r=PG&f=1", "display_name": "Apprentice0", "link": "https://stackoverflow.com/users/3381525/apprentice0"}, "edited": false, "score": 0, "creation_date": 1430416760, "post_id": 29974093, "comment_id": 48069069, "body": "Thanks for your input.  I have changed my code since yesterday, but I still have bugs in it.  I will keep debugging  it."}, {"owner": {"reputation": 45, "user_id": 3381525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3793311c6cec9a729c23a983408f1a8c?s=128&d=identicon&r=PG&f=1", "display_name": "Apprentice0", "link": "https://stackoverflow.com/users/3381525/apprentice0"}, "edited": false, "score": 0, "creation_date": 1430454472, "post_id": 29974093, "comment_id": 48082647, "body": "There was no bugs in my final code of processAnswer(), it was elsewhere in my code."}], "tags": [], "owner": {"reputation": 2279, "user_id": 1370785, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/oASta.jpg?s=128&g=1", "display_name": "jiveturkey", "link": "https://stackoverflow.com/users/1370785/jiveturkey"}, "is_accepted": false, "score": 0, "last_activity_date": 1430414663, "creation_date": 1430414663, "answer_id": 29974093, "question_id": 29954177, "link": "https://stackoverflow.com/questions/29954177/logic-error-in-processing-user-input-from-a-keypad/29974093#29974093", "title": "Logic error in processing user input from a keypad", "body": "<p>You need to structure into one loop, I'm sure there are bugs but you can work them out - something like:</p>\n\n<pre><code>sign = 0;\nnumber = 0;\nwhile (inKey == 0x0F) {\n   inkey = getKey();\n   keyRelease();\n\n   if (inKey == 15)\n      break;\n   if (inKey == 14)\n      sign = 1;\n   else {\n       number += inKey;\n       displayNumber(number);\n       number = number*10;\n   }\n }\n if (sign &amp;&amp; number) {\n    number = ~number +1;\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 3381525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3793311c6cec9a729c23a983408f1a8c?s=128&d=identicon&r=PG&f=1", "display_name": "Apprentice0", "link": "https://stackoverflow.com/users/3381525/apprentice0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1430417073, "creation_date": 1430340318, "last_edit_date": 1430417073, "question_id": 29954177, "link": "https://stackoverflow.com/questions/29954177/logic-error-in-processing-user-input-from-a-keypad", "title": "Logic error in processing user input from a keypad", "body": "<p>First of all this is homework.  I am trying to do the following:</p>\n\n<p>The user should be be able to input one or two digit number solution with the proper sign.  </p>\n\n<p>I am programming a Freescale HCS12 micro controller.  So, I cannot use any of the C libraries.  </p>\n\n<p>I created the following function to grab user input from a keypad  one at a time.  Then, my goal is to print it to the LCD, and wait for the user to press the next key, if any.  If the user presses another number, then I concatenate it to the previous number.  I don't have to do error checking, so I can expect that the user will not input more than two numbers.</p>\n\n<p>In the code, if the user presses 14, I return a negative number.</p>\n\n<p>My problem is that for the number I finally save in the 'numberEntered' variable is not what the user pressed.  </p>\n\n<p>Below you will find my code:</p>\n\n<pre><code> //this method will take user input and display it to LED\n  int processAnswer(void)\n  {\n    int sign;  //if sign remains zero, then number entered by user is positive\n    int counter;\n    int negFlag;\n    numberEntered = 0;\n    sign = 0;  //if sign remains zero, then number entered by user is positive\n    counter = 0;\n    negFlag =0;\n   //Program will continue to query for a key until someting is pressed\n   //The number 0x1F is a number assigned in getKey() routine if no key is pressed\n      inKey = 0;\n      while(1){\n        inKey = getkey();\n        keyrelease(); //checks if key is released\n        if(inKey == 15){\n          break;\n        }\n        if(inKey == 0x1F){\n          continue;\n        }\n\n        if(inKey != 14 &amp;&amp; inKey != 0x1F ){\n          counter++;\n\n        }\n        if(inKey != 14 &amp;&amp; counter == 2 ){  \n          numberEntered = numberEntered * 10;\n          numberEntered = numberEntered + inKey;\n          displayNumber(numberEntered);\n\n        }\n\n        if(inKey != 14 &amp;&amp; numberEntered &lt; 10){\n          numberEntered = inKey;\n          displayNumber(numberEntered);\n        }\n        if(inKey == 14 ){\n\n          if(negFlag==0){\n\n          Command(0x86);\n          Print('-');\n          sign = 1;\n          negFlag = 1;\n          }\n\n          continue;\n        }\n\n      }//end of while loop\n\n\n           //if user pressed key 'C', then delete input\n        // if(inKey == 12) //if the user wants to delete latest input\n        // {\n\n        //  //Command(0x85); //sets cursor to address 0x05 of first line\n        //  //Print(0x00);  //will clear previous input\n        //  //Command(0x84);\n        //  //Print(0x00);\n        //  numberEntered=backspace(numberEntered);\n\n        // }\n\n\n  //return final answer from user\n      if(sign == 1)\n      {\n        numberEntered = -numberEntered;\n      }\n      return numberEntered;\n  }//end of processAnswer function\n</code></pre>\n"}, {"tags": ["c", "windows", "cygwin", "libc", "msvcrt"], "comments": [{"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 0, "creation_date": 1430340969, "post_id": 29954038, "comment_id": 48029492, "body": "<code>msvcrt.dll</code>&#39;s <code>malloc()</code> is basically just a <code>RtlAllocateHeap()</code> (or <code>HeapAlloc()</code>) wrapper. newlib&#39;s one is probably more sophisticated."}, {"owner": {"reputation": 1190, "user_id": 3207828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1EPkw.jpg?s=128&g=1", "display_name": "Dan Korn", "link": "https://stackoverflow.com/users/3207828/dan-korn"}, "edited": false, "score": 0, "creation_date": 1430341148, "post_id": 29954038, "comment_id": 48029592, "body": "I can&#39;t imagine that the vast majority of Windows programs which use msvcrt.dll are hobbled by a &quot;slow&quot; malloc() function.  There&#39;s almost certainly something else in your test program that&#39;s slowing things down.  Profiling is almost always better than guessing."}, {"owner": {"reputation": 6043, "user_id": 3998522, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/042b8c418b7f1129fa54862a935377b8?s=128&d=identicon&r=PG&f=1", "display_name": "xiver77", "link": "https://stackoverflow.com/users/3998522/xiver77"}, "reply_to_user": {"reputation": 1190, "user_id": 3207828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1EPkw.jpg?s=128&g=1", "display_name": "Dan Korn", "link": "https://stackoverflow.com/users/3207828/dan-korn"}, "edited": false, "score": 1, "creation_date": 1430341494, "post_id": 29954038, "comment_id": 48029782, "body": "@DanKorn You can see the code. <a href=\"http://ideone.com/3tIJiA\" rel=\"nofollow noreferrer\">ideone.com/3tIJiA</a>"}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 3, "creation_date": 1430342538, "post_id": 29954038, "comment_id": 48030365, "body": "<code>msvcrt</code> isn&#39;t meant to be used by large numbers of programs, it&#39;s simply a bare minimum implementation so that there&#39;s <i>something</i> available on every Windows system. Yes, avoid it whenever possible - you&#39;re expected to use the standard library that came with your compiler."}, {"owner": {"reputation": 6223, "user_id": 2726892, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/DE8Dn.png?s=128&g=1", "display_name": "MooseBoys", "link": "https://stackoverflow.com/users/2726892/mooseboys"}, "reply_to_user": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 1, "creation_date": 1430342978, "post_id": 29954038, "comment_id": 48030600, "body": "To expand on @MarkRansom&#39;s comment, new MSVC runtimes are meant to be redistributed with applications.  <a href=\"https://msdn.microsoft.com/en-us/library/windows/hardware/dn448963%28v=vs.85%29.aspx\" rel=\"nofollow noreferrer\">This page</a> has more details.  Not sure how the <code>malloc</code> performance compares though."}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "reply_to_user": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 1, "creation_date": 1430409458, "post_id": 29954038, "comment_id": 48064597, "body": "@MarkRansom, I don&#39;t see any significant difference between the disassembled code of <code>malloc!msvcrt</code> vs <code>malloc!msvcr100</code>. Both are just wrapping <code>HeapAlloc</code>, as was already mentioned, which you can also see in the distributed CRT source. I also tested both versions by allocating 512 MB in 1 KB blocks. Both always took about the same amount of time as measured by <code>QueryPerformanceCounter</code>. As to Cygwin, it possibly bypasses Win32 to create and manage its own heap via system functions such as <code>NtVirtualAlloc</code>."}], "owner": {"reputation": 6043, "user_id": 3998522, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/042b8c418b7f1129fa54862a935377b8?s=128&d=identicon&r=PG&f=1", "display_name": "xiver77", "link": "https://stackoverflow.com/users/3998522/xiver77"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 522, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1430339846, "creation_date": 1430339846, "question_id": 29954038, "link": "https://stackoverflow.com/questions/29954038/why-is-msvcrt-very-very-slow", "title": "Why is msvcrt (very very) slow?", "body": "<p>I'm specifically asking about the old <code>msvcrt.dll</code>. Hasn't Microsoft updated that library in newer versions of windows? or is that exactly the same library that one can find in Windows 98 distros?</p>\n\n<p>I tested msvcrt against Cygwin with a test program that calls <code>malloc</code> a lot of times by a singly linked list blocking queue with mutexes and semaphores. By <code>ifdef</code>s, the program can be compiled to use Posix functions or else use Windows API calls. When compiled by MinGW with WinAPI calls the only dependency it has is <code>kernel32.dll</code>, <code>ntdll.dll</code>, and <code>msvcrt.dll</code>, while when compiled by Cygwin with Posix functions, the program will depend on <code>cygwin1.dll</code>.</p>\n\n<p>I at first simply assumed that the Cygwin version will run slower because of the extra emulation layer for Posix functions; it has to translate them to WinAPI calls. But it appears that it runs 4 times faster in my machine than the MinGW compiled native binary.</p>\n\n<p>The documentation of Cygwin states that it uses a different libc called newlib, and certainly the Cygwin-compiled binary does not appear to depend on msvcrt. So is this making the huge speed difference?</p>\n\n<p>I have also experienced before, that when a C program calls millions of <code>malloc</code>s, one that depends on <code>msvcrt.dll</code> will run many times slower than any others depending on newer <code>msvcrXX.dll</code>. They even ran slower than the same program running under a virtual machine linux.</p>\n\n<p>What's wrong with <code>msvcrt.dll</code>? Should I avoid it whenever possible?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 1163, "user_id": 2443844, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/30b6ef0de1c372e61d35fd94cd6d91d8?s=128&d=identicon&r=PG", "display_name": "rfreytag", "link": "https://stackoverflow.com/users/2443844/rfreytag"}, "edited": false, "score": 2, "creation_date": 1430339500, "post_id": 29953933, "comment_id": 48028636, "body": "how are you doing it right now? Code sample?"}, {"owner": {"reputation": 43, "user_id": 4848124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bffdacaaab723e7a7f6b5bc479b683d?s=128&d=identicon&r=PG&f=1", "display_name": "96r", "link": "https://stackoverflow.com/users/4848124/96r"}, "reply_to_user": {"reputation": 1163, "user_id": 2443844, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/30b6ef0de1c372e61d35fd94cd6d91d8?s=128&d=identicon&r=PG", "display_name": "rfreytag", "link": "https://stackoverflow.com/users/2443844/rfreytag"}, "edited": false, "score": 0, "creation_date": 1430339583, "post_id": 29953933, "comment_id": 48028666, "body": "all i know what to do right now is this:"}, {"owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "edited": false, "score": 0, "creation_date": 1430339605, "post_id": 29953933, "comment_id": 48028680, "body": "Please edit your question to include your attempt"}, {"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 2, "creation_date": 1430339646, "post_id": 29953933, "comment_id": 48028704, "body": "then I think you&#39;re in deep trouble - the purpose of SO is not to do your work but instead it is to help you fix problems in the work you do.  If you haven&#39;t done anything, our work here cannot begin."}, {"owner": {"reputation": 43, "user_id": 4848124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bffdacaaab723e7a7f6b5bc479b683d?s=128&d=identicon&r=PG&f=1", "display_name": "96r", "link": "https://stackoverflow.com/users/4848124/96r"}, "edited": false, "score": 0, "creation_date": 1430339652, "post_id": 29953933, "comment_id": 48028710, "body": "scanf(&quot;%d %s %d&quot;, &amp;id, name, &amp;points) this is what i have learned what to do but of course this doesn work"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 2, "creation_date": 1430339845, "post_id": 29953933, "comment_id": 48028806, "body": "@96r that would not work. There are spaces in the name."}], "answers": [{"tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 11, "last_activity_date": 1494281509, "last_edit_date": 1494281509, "creation_date": 1430339787, "answer_id": 29954022, "question_id": 29953933, "link": "https://stackoverflow.com/questions/29953933/how-do-i-scan-a-string-up-to-when-a-certain-character-appears/29954022#29954022", "title": "How do I scan a string up to when a certain character appears?", "body": "<p><code>scanf</code> allows you to read all characters up to a specific character(s) by using this format specifier:</p>\n\n<pre><code>%[^;,#]\n</code></pre>\n\n<p>This means \"read a string of characters until you hit a semicolon, a comma, or an octothorpe (pound)\". The <code>^</code> character at the beginning of the range means that the characters need to be excluded.</p>\n\n<p>When you read into a fixed-size buffer, add the max number of characters to your format string:</p>\n\n<pre><code>char name[100];\nint id, points;\nint count = scanf(\"%d %99[^;];%d\", &amp;id, name, &amp;points);\nif (count == 3) {\n    // the read was successful\n}\n</code></pre>\n\n<p><code>99</code> above means the max number of characters that can fit into the <code>name</code> buffer. Note that the buffer must have an additional <code>char</code> for the null terminator.</p>\n"}], "owner": {"reputation": 43, "user_id": 4848124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bffdacaaab723e7a7f6b5bc479b683d?s=128&d=identicon&r=PG&f=1", "display_name": "96r", "link": "https://stackoverflow.com/users/4848124/96r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10473, "favorite_count": 1, "accepted_answer_id": 29954022, "answer_count": 1, "score": 2, "last_activity_date": 1494281509, "creation_date": 1430339427, "last_edit_date": 1430339561, "question_id": 29953933, "link": "https://stackoverflow.com/questions/29953933/how-do-i-scan-a-string-up-to-when-a-certain-character-appears", "title": "How do I scan a string up to when a certain character appears?", "body": "<p>hi so this is what i have to do: </p>\n\n<p>Every line has:</p>\n\n<ul>\n<li>Id: An integer between 1 and 10000</li>\n<li>Name and surname: at most 50 char including English letters and digits and space. Some people might have middle names. Name and surname ends with a semicolon.</li>\n<li>Points: An integer less than 10000</li>\n</ul>\n\n<p>My problem is than i cant scan the string after the first integer because it includes spaces and has to stop scanning the string when a semicolon appears.\ncan anybody help me figure this out??</p>\n\n<p>A sample input would be:\n</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>5     //number of people\n\n1 Maria Angel Juaves; 200    // Id nr, name , points\n\n12 John Pick; 300\n\n123 Dean Patrick Jr.; 230\n\n5 Dea Torres; 140\n\n11 Mick Doger; 250\n</code></pre>\n\n<p>Im am very new to programming also :D. Thank you in advance for anyone who answers</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1430338012, "post_id": 29953467, "comment_id": 48027748, "body": "<code>sizeof(struct mydata)</code>."}, {"owner": {"reputation": 5101, "user_id": 700170, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gZ8hw.png?s=128&g=1", "display_name": "Morten Jensen", "link": "https://stackoverflow.com/users/700170/morten-jensen"}, "edited": false, "score": 0, "creation_date": 1430338025, "post_id": 29953467, "comment_id": 48027754, "body": "<code>sizeof(struct my_data)</code> will give you that."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 4848102, "user_type": "registered", "profile_image": "https://graph.facebook.com/1081521785210611/picture?type=large", "display_name": "Andrew John Niven", "link": "https://stackoverflow.com/users/4848102/andrew-john-niven"}, "edited": false, "score": 0, "creation_date": 1430338194, "post_id": 29953503, "comment_id": 48027848, "body": "thanks but how do you calculate that? as it is in a written exam i will have tomorrow"}, {"owner": {"reputation": 53754, "user_id": 198536, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9edaf4c1c1b89b5d39c40528d0017509?s=128&d=identicon&r=PG", "display_name": "wallyk", "link": "https://stackoverflow.com/users/198536/wallyk"}, "reply_to_user": {"reputation": 3, "user_id": 4848102, "user_type": "registered", "profile_image": "https://graph.facebook.com/1081521785210611/picture?type=large", "display_name": "Andrew John Niven", "link": "https://stackoverflow.com/users/4848102/andrew-john-niven"}, "edited": false, "score": 0, "creation_date": 1430338240, "post_id": 29953503, "comment_id": 48027882, "body": "@AndrewJohnNiven:  How to calculate what?  Does <code>8 * 100 + 4</code> or <code>8 * 100 + 8</code> not tell you?"}, {"owner": {"reputation": 3, "user_id": 4848102, "user_type": "registered", "profile_image": "https://graph.facebook.com/1081521785210611/picture?type=large", "display_name": "Andrew John Niven", "link": "https://stackoverflow.com/users/4848102/andrew-john-niven"}, "edited": false, "score": 0, "creation_date": 1430338672, "post_id": 29953503, "comment_id": 48028137, "body": "aw saw it would just be 8*100 = 800 +8 for a total of 808 bytes"}, {"owner": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 0, "creation_date": 1430339376, "post_id": 29953503, "comment_id": 48028554, "body": "Normally struct sizes by default are rounded to a whole number of words with pad bytes are the end if necessary."}], "tags": [], "owner": {"reputation": 53754, "user_id": 198536, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9edaf4c1c1b89b5d39c40528d0017509?s=128&d=identicon&r=PG", "display_name": "wallyk", "link": "https://stackoverflow.com/users/198536/wallyk"}, "is_accepted": false, "score": 0, "last_activity_date": 1430338034, "creation_date": 1430338034, "answer_id": 29953503, "question_id": 29953467, "link": "https://stackoverflow.com/questions/29953467/how-do-you-find-out-how-many-bytes-a-bit-of-code-uses-in-c/29953503#29953503", "title": "how do you find out how many bytes a bit of code uses in C", "body": "<p>It should be sizeof (double) * 100 + sizeof (char *).</p>\n\n<p>More directly, you could use sizeof on a variable of that type and take the result.</p>\n\n<p>For most current CPUs, this should be 8 * 100 + (4 or 8), depending on whether it is targeted at a 32 or 64 bit architecture:  4 bytes are used for 32-bit pointers, and 8 bytes for 64-bit pointers.</p>\n\n<p>Note that \"a 64-bit compiler\" doesn't say anything about the <em>target</em> architecture.</p>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1430338041, "creation_date": 1430338041, "answer_id": 29953504, "question_id": 29953467, "link": "https://stackoverflow.com/questions/29953467/how-do-you-find-out-how-many-bytes-a-bit-of-code-uses-in-c/29953504#29953504", "title": "how do you find out how many bytes a bit of code uses in C", "body": "<p>Use the <code>sizeof</code> operator.</p>\n\n<pre><code>printf(\"%zd\\n\", sizeof(struct my_data));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 4848147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/998fbe385c1344bce9db0963bd9593e6?s=128&d=identicon&r=PG&f=1", "display_name": "ugluk911", "link": "https://stackoverflow.com/users/4848147/ugluk911"}, "is_accepted": false, "score": 0, "last_activity_date": 1430339371, "creation_date": 1430339371, "answer_id": 29953920, "question_id": 29953467, "link": "https://stackoverflow.com/questions/29953467/how-do-you-find-out-how-many-bytes-a-bit-of-code-uses-in-c/29953920#29953920", "title": "how do you find out how many bytes a bit of code uses in C", "body": "<p>You have to declare a struct my_data variable and then ask for the sizeof(variable) result. Here's the code:</p>\n\n<pre><code>struct my_data MyData;\n\nprintf(\"%lu\\n\", sizeof(MyData));\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 4848102, "user_type": "registered", "profile_image": "https://graph.facebook.com/1081521785210611/picture?type=large", "display_name": "Andrew John Niven", "link": "https://stackoverflow.com/users/4848102/andrew-john-niven"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "answer_count": 3, "score": -4, "last_activity_date": 1430339371, "creation_date": 1430337925, "question_id": 29953467, "link": "https://stackoverflow.com/questions/29953467/how-do-you-find-out-how-many-bytes-a-bit-of-code-uses-in-c", "title": "how do you find out how many bytes a bit of code uses in C", "body": "<p>i need help with this question, what is the answer to this question and what is the process needed to get the answer.</p>\n\n<p>How many bytes does the following data type take up in a standard 64-bit compiler </p>\n\n<pre><code>struct my_data\n{\ndouble vals[100];\nchar *name;\n};\n</code></pre>\n"}, {"tags": ["c", "gcc", "shared-memory", "static-linking", "shared-objects"], "comments": [{"owner": {"reputation": 2279, "user_id": 1370785, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/oASta.jpg?s=128&g=1", "display_name": "jiveturkey", "link": "https://stackoverflow.com/users/1370785/jiveturkey"}, "edited": false, "score": 0, "creation_date": 1430338351, "post_id": 29953402, "comment_id": 48027940, "body": "<code>PIC</code> stands for &#39;Position Independent Code&#39; and indicates to the linker that it can take the function from the library and place it anywhere in the code section of memory.  I may not be as swift as many others but other than what you&#39;re doing I don&#39;t really have a solution."}, {"owner": {"reputation": 175, "user_id": 4847959, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/X03fw.jpg?s=128&g=1", "display_name": "Scott L.", "link": "https://stackoverflow.com/users/4847959/scott-l"}, "reply_to_user": {"reputation": 2279, "user_id": 1370785, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/oASta.jpg?s=128&g=1", "display_name": "jiveturkey", "link": "https://stackoverflow.com/users/1370785/jiveturkey"}, "edited": false, "score": 0, "creation_date": 1430348918, "post_id": 29953402, "comment_id": 48033124, "body": "Yes, I read the description for the flag in the man page and it raised some warning flags with me. However, I am using the distutils to build the Python module and the flag is inserted automatically. My assumption was that it was required for the module to work with Python correctly but I will do some investigating."}], "answers": [{"tags": [], "owner": {"reputation": 175, "user_id": 4847959, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/X03fw.jpg?s=128&g=1", "display_name": "Scott L.", "link": "https://stackoverflow.com/users/4847959/scott-l"}, "is_accepted": false, "score": 0, "last_activity_date": 1430516606, "last_edit_date": 1495539813, "creation_date": 1430516606, "answer_id": 29995604, "question_id": 29953402, "link": "https://stackoverflow.com/questions/29953402/resolving-statically-defined-symbols-in-a-shared-library/29995604#29995604", "title": "Resolving statically defined symbols in a shared library", "body": "<p>After researching and much experimentation with various flags (<code>--just-symbols</code>, <code>-Bsymbolic</code>, <code>--dynamic-list</code>, <code>--defsym</code>, etc) and with the help of <a href=\"https://stackoverflow.com/questions/10032598/gnu-ld-how-to-override-a-symbol-value-an-address-defined-by-the-linker-script\">these</a> <a href=\"https://stackoverflow.com/questions/8368423/why-does-the-linker-modify-a-defsym-absolute-address\">answers</a> and objdump and some printf's, I found that the way shared objects index their symbols prevent the result I was going for. It's really not feasible to compile the desired Python extension as a shared object without manually setting up pointers to all the symbols you need. </p>\n\n<p>What I was able to do was add the same module code I had written to the built-in Python modules. Recompiling Python with my custom module there and linking against the static object file and linker command scripts I already had (added to the Modules/Setup file: <code>my_module my_module.c -I/include/path -Xlinker /path/static_object.o /path/linker_script.ld</code>) allowed all the symbols to resolve to their correct addresses. The documentation within the Python source was sufficient to show me how to do this.</p>\n"}], "owner": {"reputation": 175, "user_id": 4847959, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/X03fw.jpg?s=128&g=1", "display_name": "Scott L.", "link": "https://stackoverflow.com/users/4847959/scott-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 241, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1430516606, "creation_date": 1430337738, "last_edit_date": 1495542513, "question_id": 29953402, "link": "https://stackoverflow.com/questions/29953402/resolving-statically-defined-symbols-in-a-shared-library", "title": "Resolving statically defined symbols in a shared library", "body": "<p>I have a legacy system which declares symbols in a shared memory region. The addresses of the are statically defined to absolute addresses in memory using gcc's linker command script function. I can build a static test executable in C which references these symbols correctly when I pass the static object file and linker command script during compilation, and attach to the shared memory region (<code>shmat()</code>, etc).</p>\n\n<p>What I am trying to do is build a Python extension library which can access the same symbols. Being able to access the library from Python requires the <code>-shared</code> and <code>-fPIC</code> options from what I understand. When I compile this way, the symbols are no longer located at the correct addresses. Compiling the C test program with <code>-shared -fPIC</code> causes the addresses to be wrong as well.\nI can define the symbols within the extension library directly:</p>\n\n<pre><code>int *pA = 0x030A0000;\n</code></pre>\n\n<p>and this works when compiled using <code>-shared -fPIC</code>. But should I? There are hundreds of symbols I need and it would be unmaintainable if the addresses ever changed. It seems like there should be a way to indicate to the linker that these symbols should not be relocated, but nothing I have <a href=\"https://stackoverflow.com/questions/7253801/how-to-force-symbols-from-a-static-library-to-be-included-in-a-shared-library-bu\">tried</a> has <a href=\"https://stackoverflow.com/questions/6054942/gcc-rdynamic-not-working-with-static-libraries\">worked</a>, including compiling as below:</p>\n\n<p>In the code for Python extension:</p>\n\n<pre><code>extern int symbol_i_need;\n...\nprintf(\"%d\", symbol_i_need); // Seg fault\n</code></pre>\n\n<p>Compile commands:</p>\n\n<pre><code>gcc -fPIC -o my_module.o my_module.c /path/static_object.o /path/linker_command_script.ld \ngcc -shared -fPIC -o my_module.so my_module.o -Wl,-Bstatic,/path/static_defined_object.o,/path/linker_command_script.ld,-Bdynamic -rdynamic\n</code></pre>\n"}, {"tags": ["c", "windows", "winapi"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1430337288, "post_id": 29953158, "comment_id": 48027372, "body": "Can you have a struct array of 101 values of r,b,g for each percentage progress?"}, {"owner": {"reputation": 4685, "user_id": 4192931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c26d448bf8935cf10be612180b85ffc7?s=128&d=identicon&r=PG", "display_name": "JS1", "link": "https://stackoverflow.com/users/4192931/js1"}, "edited": false, "score": 0, "creation_date": 1430337584, "post_id": 29953158, "comment_id": 48027535, "body": "That screenshot of VLC seems like the change is nonlinear.  You need to use a function that changes slowly at first and then accelerates.  You could try using t^2 like this: <code>t = t*t; return a * ( 1 - t ) + b * t;</code>.  If that isn&#39;t enough, try t^3, t^4, etc..  Or use another function.  Btw it would be helpful to see a screenshot of your current linear attempt."}, {"owner": {"reputation": 2172, "user_id": 178878, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/ab776d9e9a3043f815553db0bceddd5c?s=128&d=identicon&r=PG", "display_name": "kampi", "link": "https://stackoverflow.com/users/178878/kampi"}, "reply_to_user": {"reputation": 4685, "user_id": 4192931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c26d448bf8935cf10be612180b85ffc7?s=128&d=identicon&r=PG", "display_name": "JS1", "link": "https://stackoverflow.com/users/4192931/js1"}, "edited": false, "score": 0, "creation_date": 1430338963, "post_id": 29953158, "comment_id": 48028311, "body": "@JS1: I updated my question."}, {"owner": {"reputation": 4685, "user_id": 4192931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c26d448bf8935cf10be612180b85ffc7?s=128&d=identicon&r=PG", "display_name": "JS1", "link": "https://stackoverflow.com/users/4192931/js1"}, "edited": false, "score": 0, "creation_date": 1430339536, "post_id": 29953158, "comment_id": 48028647, "body": "Why does this line: <code>float test = ( CurrentStep &#47; MaxStep ) &#47; 100;</code> have a divide by 100 in it?  Shouldn&#39;t it just be <code>float test = ( CurrentStep &#47; MaxStep );</code>?"}, {"owner": {"reputation": 2172, "user_id": 178878, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/ab776d9e9a3043f815553db0bceddd5c?s=128&d=identicon&r=PG", "display_name": "kampi", "link": "https://stackoverflow.com/users/178878/kampi"}, "reply_to_user": {"reputation": 4685, "user_id": 4192931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c26d448bf8935cf10be612180b85ffc7?s=128&d=identicon&r=PG", "display_name": "JS1", "link": "https://stackoverflow.com/users/4192931/js1"}, "edited": false, "score": 0, "creation_date": 1430339716, "post_id": 29953158, "comment_id": 48028736, "body": "@JS1: as far as I understand the things, it should be a percentage of the progress. If I remove the <code>&#47;100</code> it will start as red immidiately"}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1430340026, "post_id": 29953158, "comment_id": 48028902, "body": "Don&#39;t do it as a single gradient, do it in multiple segments. Move the endpoints of the segments around until it works the way you want."}, {"owner": {"reputation": 2172, "user_id": 178878, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/ab776d9e9a3043f815553db0bceddd5c?s=128&d=identicon&r=PG", "display_name": "kampi", "link": "https://stackoverflow.com/users/178878/kampi"}, "reply_to_user": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1430340179, "post_id": 29953158, "comment_id": 48029006, "body": "@MarkRansom: sorry, but I don&#39;t fully understand this inerpolation. I am happy, that it works this way. Took me the whole day. Could you explain a little bit more, what and how I should do?"}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1430341983, "post_id": 29953158, "comment_id": 48030055, "body": "@kampi sorry I don&#39;t have time for a full-blown answer right now, maybe later today."}, {"owner": {"reputation": 2172, "user_id": 178878, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/ab776d9e9a3043f815553db0bceddd5c?s=128&d=identicon&r=PG", "display_name": "kampi", "link": "https://stackoverflow.com/users/178878/kampi"}, "reply_to_user": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1430342328, "post_id": 29953158, "comment_id": 48030243, "body": "@MarkRansom: JS1 already solved my problem, but still thanks."}, {"owner": {"reputation": 6223, "user_id": 2726892, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/DE8Dn.png?s=128&g=1", "display_name": "MooseBoys", "link": "https://stackoverflow.com/users/2726892/mooseboys"}, "edited": false, "score": 0, "creation_date": 1430519202, "post_id": 29953158, "comment_id": 48111620, "body": "<a href=\"https://www.youtube.com/watch?v=LKnqECcg6Gw\" rel=\"nofollow noreferrer\">Linear interpolation is the wrong thing to do</a>."}], "answers": [{"comments": [{"owner": {"reputation": 2172, "user_id": 178878, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/ab776d9e9a3043f815553db0bceddd5c?s=128&d=identicon&r=PG", "display_name": "kampi", "link": "https://stackoverflow.com/users/178878/kampi"}, "edited": false, "score": 0, "creation_date": 1430342359, "post_id": 29954384, "comment_id": 48030261, "body": "You are right. You find all my errors. Now it is working fine. Thank you!"}], "tags": [], "owner": {"reputation": 4685, "user_id": 4192931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c26d448bf8935cf10be612180b85ffc7?s=128&d=identicon&r=PG", "display_name": "JS1", "link": "https://stackoverflow.com/users/4192931/js1"}, "is_accepted": true, "score": 1, "last_activity_date": 1430341689, "last_edit_date": 1430341689, "creation_date": 1430341015, "answer_id": 29954384, "question_id": 29953158, "link": "https://stackoverflow.com/questions/29953158/how-to-calculate-the-interpolation-between-two-colors-correctly/29954384#29954384", "title": "How to calculate the interpolation between two colors correctly?", "body": "<h2>Moving targets</h2>\n\n<p>Your current code is not interpolating between the start color and the end color.  It is interpolating between the <strong>current</strong> color and the end color, which makes your interpolation accelerate too quickly.  These lines:</p>\n\n<pre><code>    startColor.r = result.r;\n    startColor.g = result.g;\n    startColor.b = result.b;\n</code></pre>\n\n<p>should be changed to:</p>\n\n<pre><code>    startColor.r = 36;\n    startColor.g = 149;\n    startColor.b = 16;\n</code></pre>\n\n<h2>Percentage already factored in</h2>\n\n<p>The next problem is that this line here:</p>\n\n<pre><code>float test = ( CurrentStep / MaxStep ) / 100;\n</code></pre>\n\n<p>should be changed to:</p>\n\n<pre><code>float test = ( CurrentStep / MaxStep );\n</code></pre>\n\n<p>This is assuming that CurrentStep ranges from 0..MaxStep.  If for some reason CurrentStep ranges from 0..100*MaxStep, then your current code would be correct.</p>\n\n<h2>Which way is CurrentStep moving?</h2>\n\n<p>The other thing that might be happening is that CurrentStep is starting at MaxStep and counting down toward 0.  In that case, your code should be:</p>\n\n<pre><code>float test = 1.0f - ( CurrentStep / MaxStep );\n</code></pre>\n"}], "owner": {"reputation": 2172, "user_id": 178878, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/ab776d9e9a3043f815553db0bceddd5c?s=128&d=identicon&r=PG", "display_name": "kampi", "link": "https://stackoverflow.com/users/178878/kampi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 1, "accepted_answer_id": 29954384, "answer_count": 1, "score": 0, "last_activity_date": 1430341689, "creation_date": 1430336873, "last_edit_date": 1430340197, "question_id": 29953158, "link": "https://stackoverflow.com/questions/29953158/how-to-calculate-the-interpolation-between-two-colors-correctly", "title": "How to calculate the interpolation between two colors correctly?", "body": "<p>I created a progress bar, and I like to change it's color as it makes the progress. From green to red (it is counting down).\nThe problem is, that the progress bar changes too quickly to red, and between the green and red stage, it has multiple colors. Basically I want something like VLC has:</p>\n\n<p><img src=\"https://i.stack.imgur.com/Vy0qq.png\" alt=\"enter image description here\"></p>\n\n<p>My code:</p>\n\n<pre><code>typedef struct RgbColor\n{\n  unsigned char r;\n  unsigned char g;\n  unsigned char b;\n} RgbColor;\n\ntypedef struct HsvColor\n{\n  unsigned char h;\n  unsigned char s;\n  unsigned char v;\n} HsvColor;\n\ntemplate&lt;typename F&gt;\nRgbColor interpolate( RgbColor a, RgbColor b, float t, F interpolator )\n{\n  // 0.0 &lt;= t &lt;= 1.0\n  HsvColor ca = RgbToHsv1( a );\n  HsvColor cb = RgbToHsv1( b );\n  HsvColor final;\n\n  final.h = interpolator( ca.h, cb.h, t );\n  final.s = interpolator( ca.s, cb.s, t );\n  final.v = interpolator( ca.v, cb.v, t );\n\n  return HsvToRgb1( final );\n}\n\nint linear( int a, int b, float t )\n{\n   return a * ( 1 - t ) + b * t;\n}\n</code></pre>\n\n<p>And then in WndProc:</p>\n\n<pre><code>case WM_PAINT:\n{ \n    float CurrentStep = SendMessage( hwndPB, PBM_GETPOS, 0, 0 );\n    static float MaxStep = SendMessage( hwndPB, PBM_GETRANGE, 0, 0 );\n    static RgbColor result;\n        static BOOL bFirst = TRUE;\n\n        if ( bFirst )\n        {\n            result.r = 36;\n            result.g = 149;\n            result.b = 16;\n            bFirst = FALSE;\n        }\n\n        RgbColor startColor, endColor;\n        startColor.r = result.r;\n        startColor.g = result.g;\n        startColor.b = result.b;\n        endColor.r = 183;\n        endColor.g = 13;\n        endColor.b = 14;\n            float test = ( CurrentStep / MaxStep ) / 100;\n            result = interpolate( startColor, endColor, test, &amp;linear )\n           SendMessage( hwndPB, PBM_SETBARCOLOR, 0, RGB( result.r, result.g, result.b) );\n        SendMessage( hwndPB, PBM_STEPIT, 0, 0 );\n\n}\nbreak;\n</code></pre>\n\n<p>Could someone please help me? </p>\n\n<p><strong>Edit:</strong>\nThis is the progressbar how I have it now.<br>\n<img src=\"https://i.stack.imgur.com/uyYTi.png\" alt=\"enter image description here\"></p>\n\n<p>In this case, the time is set to 200, and it is counting back from there, and about 50 seconds later it looks like this. About more 10 seconds, and it has reached the target color, which isn't right. I also noticed, if I set the Timer to 20 seconds, then it stays green. I think there wasn't enough time to start changing the color, so my calculations are wrong.</p>\n\n<p>Changing the formula to t^2 or t^3 or bigger has also not the effect which I expect.</p>\n"}, {"tags": ["c", "function", "pointers", "structure"], "comments": [{"owner": {"reputation": 722, "user_id": 1071881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b67a86627618c886bdb744b74058d2f2?s=128&d=identicon&r=PG", "display_name": "siliconwafer", "link": "https://stackoverflow.com/users/1071881/siliconwafer"}, "edited": false, "score": 0, "creation_date": 1430336063, "post_id": 29952847, "comment_id": 48026653, "body": "Why is dateUpdate() returning a value when you&#39;re passing by reference?"}], "answers": [{"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 2, "last_activity_date": 1430336326, "last_edit_date": 1430336326, "creation_date": 1430335943, "answer_id": 29952904, "question_id": 29952847, "link": "https://stackoverflow.com/questions/29952847/pointers-expression-is-not-assignable/29952904#29952904", "title": "Pointers: Expression is not assignable", "body": "<p>The correct syntax (which you already used in the function) is the following</p>\n\n<pre><code>dait-&gt;day = tomorrow.day;\ndait-&gt;month = tomorrow.month;\ndait-&gt;year = tomorrow.year;\n</code></pre>\n\n<p>Take into account that instead of these three statements you could write simply</p>\n\n<pre><code>*dait = tomorrow;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "is_accepted": false, "score": 0, "last_activity_date": 1430335978, "creation_date": 1430335978, "answer_id": 29952919, "question_id": 29952847, "link": "https://stackoverflow.com/questions/29952847/pointers-expression-is-not-assignable/29952919#29952919", "title": "Pointers: Expression is not assignable", "body": "<p><code>dait</code> is already a pointer, so <code>&amp;dait</code> is a pointer to a pointer, and thus it has no fields to de-reference.</p>\n\n<p>Solution: lose the <code>&amp;</code> before <code>dait</code>.</p>\n"}], "owner": {"reputation": 536, "user_id": 4253848, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/100001877465512/picture?type=large", "display_name": "Frank Tocci", "link": "https://stackoverflow.com/users/4253848/frank-tocci"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4190, "favorite_count": 0, "accepted_answer_id": 29952904, "answer_count": 2, "score": 2, "last_activity_date": 1430336326, "creation_date": 1430335728, "question_id": 29952847, "link": "https://stackoverflow.com/questions/29952847/pointers-expression-is-not-assignable", "title": "Pointers: Expression is not assignable", "body": "<p>I'm writing a function whose purpose is to change the value of struct variables. I'm getting error messages that say the expressions toward the end of my first function are not assignable. How, then, do I have the function change the values of the daate structure?</p>\n\n<p>Here's my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdbool.h&gt;\n\nstruct date\n{\n    int month;\n    int day;\n    int year;\n};\n\nstruct date dateUpdate (struct date *dait) {\n    struct date tomorrow;\n    int numberOfDays (struct date d);\n\n    if (dait-&gt;day != numberOfDays (*dait) ) {\n        tomorrow.day = dait-&gt;day + 1;\n        tomorrow.month = dait-&gt;month;\n        tomorrow.year = dait-&gt;year;\n    }\n    else if ( dait-&gt;month == 12 ) { //end of year\n        tomorrow.day = 1;\n        tomorrow.month = 1;\n        tomorrow.year = dait-&gt;year + 1;\n    }\n    else { //end of month\n        tomorrow.day = 1;\n        tomorrow.month = dait-&gt;month + 1;\n        tomorrow.year = dait-&gt;year;\n    }\n\n    &amp;dait-&gt;day = tomorrow.day;\n    &amp;dait-&gt;month = tomorrow.month;\n    &amp;dait-&gt;year = tomorrow.year;\n\n    return *dait;\n}\n\n//Function to find the number of days in a month;\n\nint numberOfDays (struct date d)\n{\n    int days;\n    bool isLeapYear (struct date d);\n    const int daysPerMonth[12] = \n    { 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31 };\n\n    if ( isLeapYear (d) &amp;&amp; d.month == 2 )\n        days = 29;\n    else\n        days = daysPerMonth[d.month - 1];\n\n    return days;\n}\n\n}\n\nint main (void) {\n    struct date daate;\n    daate.day = 21;\n    daate.month = 6;\n    daate.year = 2013;\n\n    dateUpdate(&amp;daate);\n    printf(\"%d\", daate.day);\n}\n</code></pre>\n"}, {"tags": ["c", "string", "struct", "malloc"], "comments": [{"owner": {"reputation": 25589, "user_id": 15727, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FFivc.jpg?s=128&g=1", "display_name": "Thomas Padron-McCarthy", "link": "https://stackoverflow.com/users/15727/thomas-padron-mccarthy"}, "edited": false, "score": 2, "creation_date": 1430335907, "post_id": 29952840, "comment_id": 48026555, "body": "Your second scanf needs a pointer to the variable you read into. Add a &amp;."}, {"owner": {"reputation": 1602, "user_id": 1716310, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/24ff82e0962f79caedf7011c505ef136?s=128&d=identicon&r=PG", "display_name": "Btc Sources", "link": "https://stackoverflow.com/users/1716310/btc-sources"}, "edited": false, "score": 0, "creation_date": 1430335909, "post_id": 29952840, "comment_id": 48026559, "body": "Is being printed the second name?"}, {"owner": {"reputation": 481, "user_id": 1549360, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/1a9969033a6fe436795241305a14d513?s=128&d=identicon&r=PG", "display_name": "RidableCthulu", "link": "https://stackoverflow.com/users/1549360/ridablecthulu"}, "edited": false, "score": 0, "creation_date": 1430336044, "post_id": 29952840, "comment_id": 48026640, "body": "I added a &amp; to the scanf but now it stops taking input after the first name and year and it prints out the following  RANDOMNUMBER Subject Name Subject Year"}, {"owner": {"reputation": 25589, "user_id": 15727, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FFivc.jpg?s=128&g=1", "display_name": "Thomas Padron-McCarthy", "link": "https://stackoverflow.com/users/15727/thomas-padron-mccarthy"}, "edited": false, "score": 0, "creation_date": 1430336125, "post_id": 29952840, "comment_id": 48026691, "body": "The newline character from the ENTER key is in the input buffer. Simplest (but brittle) solution is to add a getchar(); after the scanf."}, {"owner": {"reputation": 481, "user_id": 1549360, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/1a9969033a6fe436795241305a14d513?s=128&d=identicon&r=PG", "display_name": "RidableCthulu", "link": "https://stackoverflow.com/users/1549360/ridablecthulu"}, "edited": false, "score": 0, "creation_date": 1430336428, "post_id": 29952840, "comment_id": 48026894, "body": "@ammoQ I have an if which checks that and it didn&#39;t return anything."}, {"owner": {"reputation": 481, "user_id": 1549360, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/1a9969033a6fe436795241305a14d513?s=128&d=identicon&r=PG", "display_name": "RidableCthulu", "link": "https://stackoverflow.com/users/1549360/ridablecthulu"}, "reply_to_user": {"reputation": 25589, "user_id": 15727, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FFivc.jpg?s=128&g=1", "display_name": "Thomas Padron-McCarthy", "link": "https://stackoverflow.com/users/15727/thomas-padron-mccarthy"}, "edited": false, "score": 0, "creation_date": 1430336430, "post_id": 29952840, "comment_id": 48026896, "body": "@ThomasPadron-McCarthy I tried getchar(); but it still doesn&#39;t work. It cuts the first letter of first name, I can input n-1 data and it still outputs a random number before everything."}, {"owner": {"reputation": 746, "user_id": 1950231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df0910fa12013d5192756e65e68452fb?s=128&d=identicon&r=PG", "display_name": "Jamal", "link": "https://stackoverflow.com/users/1950231/jamal"}, "edited": false, "score": 0, "creation_date": 1430336484, "post_id": 29952840, "comment_id": 48026926, "body": "<code>gets()</code>?  You should be using <code>fgets()</code> instead, which is safer."}, {"owner": {"reputation": 481, "user_id": 1549360, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/1a9969033a6fe436795241305a14d513?s=128&d=identicon&r=PG", "display_name": "RidableCthulu", "link": "https://stackoverflow.com/users/1549360/ridablecthulu"}, "reply_to_user": {"reputation": 746, "user_id": 1950231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df0910fa12013d5192756e65e68452fb?s=128&d=identicon&r=PG", "display_name": "Jamal", "link": "https://stackoverflow.com/users/1950231/jamal"}, "edited": false, "score": 0, "creation_date": 1430336510, "post_id": 29952840, "comment_id": 48026938, "body": "@Jamal I tried with both functions, however in both cases it&#39;s the same."}, {"owner": {"reputation": 746, "user_id": 1950231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df0910fa12013d5192756e65e68452fb?s=128&d=identicon&r=PG", "display_name": "Jamal", "link": "https://stackoverflow.com/users/1950231/jamal"}, "edited": false, "score": 0, "creation_date": 1430336607, "post_id": 29952840, "comment_id": 48026989, "body": "It was a general note, which is why I didn&#39;t post it as an answer."}, {"owner": {"reputation": 25589, "user_id": 15727, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FFivc.jpg?s=128&g=1", "display_name": "Thomas Padron-McCarthy", "link": "https://stackoverflow.com/users/15727/thomas-padron-mccarthy"}, "edited": false, "score": 0, "creation_date": 1430336614, "post_id": 29952840, "comment_id": 48026994, "body": "You need to post a minimal, compilable program that still shows the problem. The code that prints your random number, etcetera, is missing, so we can only guess what&#39;s wrong."}, {"owner": {"reputation": 481, "user_id": 1549360, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/1a9969033a6fe436795241305a14d513?s=128&d=identicon&r=PG", "display_name": "RidableCthulu", "link": "https://stackoverflow.com/users/1549360/ridablecthulu"}, "reply_to_user": {"reputation": 25589, "user_id": 15727, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FFivc.jpg?s=128&g=1", "display_name": "Thomas Padron-McCarthy", "link": "https://stackoverflow.com/users/15727/thomas-padron-mccarthy"}, "edited": false, "score": 0, "creation_date": 1430336919, "post_id": 29952840, "comment_id": 48027163, "body": "@ThomasPadron-McCarthy I added the whole code now"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1430337138, "post_id": 29952840, "comment_id": 48027290, "body": "@RidableCthulu Since you are allocating with <code>malloc</code> anyway, it would be simpler to just allocate <code>name</code> as well. Declare it as <code>char *name;</code> and then to fill it. just use <code>fgets (buf, BUFSIZE, stdin);</code>, then <code>ptr[i] = strdup (buf);</code>. Just don&#39;t forget to free it later."}, {"owner": {"reputation": 25589, "user_id": 15727, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FFivc.jpg?s=128&g=1", "display_name": "Thomas Padron-McCarthy", "link": "https://stackoverflow.com/users/15727/thomas-padron-mccarthy"}, "edited": false, "score": 0, "creation_date": 1430337152, "post_id": 29952840, "comment_id": 48027297, "body": "You&#39;re missing a getchar(); after the first scanf too. The newline character from when you pressed the ENTER key after that number is left in the input buffer, and is read by gets as a (very short) line."}, {"owner": {"reputation": 481, "user_id": 1549360, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/1a9969033a6fe436795241305a14d513?s=128&d=identicon&r=PG", "display_name": "RidableCthulu", "link": "https://stackoverflow.com/users/1549360/ridablecthulu"}, "reply_to_user": {"reputation": 25589, "user_id": 15727, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FFivc.jpg?s=128&g=1", "display_name": "Thomas Padron-McCarthy", "link": "https://stackoverflow.com/users/15727/thomas-padron-mccarthy"}, "edited": false, "score": 0, "creation_date": 1430337299, "post_id": 29952840, "comment_id": 48027379, "body": "@ThomasPadron-McCarthy Thank you so much. I knew it had to be something with input. Did I mention I hate buffers in C? It is definitely the source of most of my problems in this subject. I never had any problems like this with C++. Thanks again!"}, {"owner": {"reputation": 25589, "user_id": 15727, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FFivc.jpg?s=128&g=1", "display_name": "Thomas Padron-McCarthy", "link": "https://stackoverflow.com/users/15727/thomas-padron-mccarthy"}, "edited": false, "score": 1, "creation_date": 1430337453, "post_id": 29952840, "comment_id": 48027458, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/9562218/c-multiple-scanfs-when-i-enter-in-a-value-for-one-scanf-it-skips-the-second-s\">C: Multiple scanf&#39;s, when I enter in a value for one scanf it skips the second scanf</a>"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1430338811, "post_id": 29952840, "comment_id": 48028218, "body": "@RidableCthulu, the use of buffers, dynamic or static, and a full understanding of pointers is one of the greatest strengths of C. While it may take a little effort learn, it is well worth the time spent. You want to change your outlook from <b>I hate buffers in C</b>, to <b>I love buffers in C</b>. You won&#39;t believe what a whole new world of programming will open up <code>:p</code>"}], "answers": [{"comments": [{"owner": {"reputation": 25589, "user_id": 15727, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FFivc.jpg?s=128&g=1", "display_name": "Thomas Padron-McCarthy", "link": "https://stackoverflow.com/users/15727/thomas-padron-mccarthy"}, "edited": false, "score": 1, "creation_date": 1430336190, "post_id": 29952967, "comment_id": 48026745, "body": "This is double-wrong. First, it is not the cause of the problem, and second, this:  <a href=\"http://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\" title=\"do i cast the result of malloc\">stackoverflow.com/questions/605845/&hellip;</a>"}], "tags": [], "owner": {"reputation": 569, "user_id": 2700896, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8e2ed56c7fa6aa7129e9deee8b7a43ee?s=128&d=identicon&r=PG&f=1", "display_name": "user2700896", "link": "https://stackoverflow.com/users/2700896/user2700896"}, "is_accepted": false, "score": -6, "last_activity_date": 1430336612, "last_edit_date": 1430336612, "creation_date": 1430336140, "answer_id": 29952967, "question_id": 29952840, "link": "https://stackoverflow.com/questions/29952840/array-of-a-struct-with-strings/29952967#29952967", "title": "Array of a struct with strings", "body": "<p>Malloc returns a void pointer type. In order to use it as a pointer to your structure you have to cast it first. Try changing the line with malloc into:</p>\n\n<pre><code>int n, i;\nscanf(\"%d\", &amp;n);\nstruct subject *ptr = (struct subject*) malloc(n*sizeof(struct subject));\n</code></pre>\n\n<p>You also have to change your input into:</p>\n\n<pre><code>for(i = 0; i &lt; n; i++)\n{\n   gets((ptr + i)-&gt;name);\n   scanf(\"%d\", &amp;((ptr + i)-&gt;year));\n}\n</code></pre>\n"}], "owner": {"reputation": 481, "user_id": 1549360, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/1a9969033a6fe436795241305a14d513?s=128&d=identicon&r=PG", "display_name": "RidableCthulu", "link": "https://stackoverflow.com/users/1549360/ridablecthulu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1430337549, "creation_date": 1430335708, "last_edit_date": 1430337549, "question_id": 29952840, "link": "https://stackoverflow.com/questions/29952840/array-of-a-struct-with-strings", "title": "Array of a struct with strings", "body": "<p>I have defined a structure</p>\n\n<pre><code>struct subject\n{\n    char name[100];\n    int year;\n};\n</code></pre>\n\n<p>and since I need <code>n</code> of these and I have to use <code>malloc</code> I did the following in my main function:</p>\n\n<pre><code>int n, i;\nscanf(\"%d\", &amp;n);\nstruct subject *ptr = malloc(n*sizeof(struct subject));\n</code></pre>\n\n<p>Unfortunately when I try to input something with this code:</p>\n\n<pre><code>for(i = 0; i &lt; n; i++)\n{\n   gets((ptr + i)-&gt;name);\n   scanf(\"%d\", (ptr + i)-&gt;year);\n}\n</code></pre>\n\n<p>It crashes after I type the first name. The task requires the use of <code>malloc</code>.</p>\n\n<p>Here's the whole code (unfortunately it's in my native language so it's a little bit different)</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\n#ifndef DEBUG\n#define DEBUG(...)printf(_VA_ARGS_)\n#endif\n\nstruct kolegij\n{\n    char naziv[100];\n    int semestar;\n};\n\nint main(){\n    int brPredmeta, i;\n\n    scanf(\"%d\", &amp;brPredmeta);\n\n    struct kolegij *ptr = malloc(brPredmeta*sizeof(struct kolegij));\n\n    if(ptr == NULL)\n    {\n       printf(\"error\\n\");\n       return 0;\n    }\n\n    for(i = 0; i &lt; brPredmeta; i++)\n    {\n       //gets(ptr-&gt;naziv);\n       gets((ptr + i)-&gt;naziv);\n       scanf(\"%d\", &amp;(ptr + i)-&gt;semestar);\n       getchar();\n    }\n\n    for(i = 0; i &lt; brPredmeta; i++)\n    {\n       printf(\"%s\\n\", ptr[i].naziv);\n       printf(\"%d\\n\", ptr[i].semestar);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>With regards to the duplicate issue. I believe this shouldn't be a duplicate since it's related to structs and pointers. I had issues with scanfs before and I haven't considered this as a solution so I think it shouldn't be flagged as a duplicate.</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1430335191, "post_id": 29952652, "comment_id": 48026109, "body": "Use <code>strtol()</code> instead of <code>scanf()</code>, can you provide a sample file? Also, don&#39;t compare <code>fscanf()</code> output to <code>EOF</code> but instead to the number of values that it has to read, if it fails to read, you will cause undefined behavior."}, {"owner": {"reputation": 5966, "user_id": 80410, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/daf7ba6f06480c52ac459772f2bb5268?s=128&d=identicon&r=PG", "display_name": "Mark Probst", "link": "https://stackoverflow.com/users/80410/mark-probst"}, "edited": false, "score": 0, "creation_date": 1430338756, "post_id": 29952652, "comment_id": 48028181, "body": "Don&#39;t make us do your homework."}], "answers": [{"tags": [], "owner": {"reputation": 6034, "user_id": 4460500, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/7TTnO.jpg?s=128&g=1", "display_name": "VolAnd", "link": "https://stackoverflow.com/users/4460500/voland"}, "is_accepted": false, "score": 0, "last_activity_date": 1430339456, "creation_date": 1430339456, "answer_id": 29953945, "question_id": 29952652, "link": "https://stackoverflow.com/questions/29952652/how-to-add-a-series-of-numbers-to-an-array-from-file/29953945#29953945", "title": "how to add a series of numbers to an array from file?", "body": "<p>Your <code>fscanf</code> looks strange...</p>\n\n<p>In the line</p>\n\n<pre><code>fscanf(fp,\"%1d %d\",dataset[i].s[k],&amp;dataset[i].support)\n</code></pre>\n\n<p>Pay attention at:</p>\n\n<p>1) what <code>%1d</code> mean? (perhaps, <code>%d</code> is what you need)</p>\n\n<p>2) it seams you need two <code>fscanf</code>: the first for items in <code>s</code> (this should be in the nested loop), and the second for <code>support</code></p>\n\n<p>3) I do not see what you do with '{' and '}' characters from file...</p>\n"}], "owner": {"reputation": 74, "user_id": 3872569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e53cf2feda3567b1ae0a357fb50bc661?s=128&d=identicon&r=PG", "display_name": "Pavan Kate", "link": "https://stackoverflow.com/users/3872569/pavan-kate"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1430339456, "creation_date": 1430335104, "question_id": 29952652, "link": "https://stackoverflow.com/questions/29952652/how-to-add-a-series-of-numbers-to-an-array-from-file", "title": "how to add a series of numbers to an array from file?", "body": "<p>In C, while reading from file,the problem is to read a set of space separated integers into an array and last integer as another entity like </p>\n\n<pre><code> { 2 3 14 } 15\n { 2 3 15 16 19} 20 \n</code></pre>\n\n<p>To store 2 3 14 into an array and 15 as separate variable and same with next set enclosed in brackets , which i need to store in a structure.</p>\n\n<pre><code>   struct dataset{\n   int support;\n   int s[100]; \n   }\n</code></pre>\n\n<p>and read file using </p>\n\n<pre><code>while( fscanf(fp,\"%1d %d\",dataset[i].s[k],&amp;dataset[i].support) != EOF )\n</code></pre>\n\n<p>here the dataset[i].s[k] should read a set of integers enclosed within brackets into array.</p>\n"}, {"tags": ["c", "file-handling"], "comments": [{"owner": {"reputation": 18098, "user_id": 3744681, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/XvLrx.jpg?s=128&g=1", "display_name": "Jahid", "link": "https://stackoverflow.com/users/3744681/jahid"}, "edited": false, "score": 0, "creation_date": 1430335429, "post_id": 29952595, "comment_id": 48026271, "body": "It prints all 50 for me.."}, {"owner": {"reputation": 3169, "user_id": 4114124, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/k73hh.jpg?s=128&g=1", "display_name": "Politank-Z", "link": "https://stackoverflow.com/users/4114124/politank-z"}, "edited": false, "score": 1, "creation_date": 1430335541, "post_id": 29952595, "comment_id": 48026322, "body": "25 in ASCII is the END OF MEDIUM control character. I suspect that this is being interpreted as an end of file by your particular platform."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 18098, "user_id": 3744681, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/XvLrx.jpg?s=128&g=1", "display_name": "Jahid", "link": "https://stackoverflow.com/users/3744681/jahid"}, "edited": false, "score": 0, "creation_date": 1430335573, "post_id": 29952595, "comment_id": 48026347, "body": "@Jahid mine prints up to 25 then 25 again then stops."}, {"owner": {"reputation": 40086, "user_id": 499581, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1ba2cebc4582467916f2ddd6128447f4?s=128&d=identicon&r=PG", "display_name": "l&#39;L&#39;l", "link": "https://stackoverflow.com/users/499581/lll"}, "edited": false, "score": 0, "creation_date": 1430335679, "post_id": 29952595, "comment_id": 48026413, "body": "Trying using <code>printf(p,&quot;%d&quot;,a);</code> or <code>printf(p,&quot;%i&quot;,a);</code> perhaps."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1430335739, "post_id": 29952595, "comment_id": 48026452, "body": "Try checking the result of <code>fscanf</code> rather than <code>feof</code> which is flawed."}, {"owner": {"reputation": 177, "user_id": 4192965, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100000322580538/picture?type=large", "display_name": "Sagar Kar", "link": "https://stackoverflow.com/users/4192965/sagar-kar"}, "edited": false, "score": 0, "creation_date": 1430336146, "post_id": 29952595, "comment_id": 48026708, "body": "` for(a=1;a&lt;=50;a++)  {     if(a!=26)         fprintf(p,&quot;%c&quot;,a);  }` this code print all 49 except 26... so i guess the <code>fprintf(p,&quot;%c&quot;,26);</code> is culprit"}], "answers": [{"comments": [{"owner": {"reputation": 177, "user_id": 4192965, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100000322580538/picture?type=large", "display_name": "Sagar Kar", "link": "https://stackoverflow.com/users/4192965/sagar-kar"}, "edited": false, "score": 0, "creation_date": 1430336465, "post_id": 29952926, "comment_id": 48026915, "body": "thanks that helped a lot! the text mode respond to control char and binary mode dont.... but y someone down voting my question i have no idea!"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 177, "user_id": 4192965, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100000322580538/picture?type=large", "display_name": "Sagar Kar", "link": "https://stackoverflow.com/users/4192965/sagar-kar"}, "edited": false, "score": 0, "creation_date": 1430336993, "post_id": 29952926, "comment_id": 48027198, "body": "@SagarKar please do not overlook the <code>feof()</code> issue, follow up the link: <a href=\"http://stackoverflow.com/questions/5431941/why-is-while-feof-file-always-wrong\" title=\"why is while feof file always wrong\">stackoverflow.com/questions/5431941/&hellip;</a>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1430425742, "post_id": 29952926, "comment_id": 48073952, "body": "I found the code works correctly, even if the file is opened in text mode.  To me, the problem is the printf statement needs to include a &#39;\\n&#39; so the output buffer is flushed."}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": true, "score": 1, "last_activity_date": 1430336580, "last_edit_date": 1495539813, "creation_date": 1430336013, "answer_id": 29952926, "question_id": 29952595, "link": "https://stackoverflow.com/questions/29952595/c-file-handling-unable-to-write-after-25-y/29952926#29952926", "title": "c file handling : unable to write after 25 y?", "body": "<p>There are two reasons for failure. If your system opens files in text mode by default, it will respond to control characters. So you must open the files in <code>binary</code> mode:</p>\n\n<pre><code>p = fopen(\"three\", \"wb\");\n...\nq = fopen(\"three\", \"rb\");\n</code></pre>\n\n<p>The second failure is the use of the useless <code>feof()</code>. It does not inform when you reach the end of file, but only <em>after</em> you made a bad read beyond the end of file. That is why the <code>25</code> or in the corrected case the <code>50</code> is printed twice.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/5431941/why-is-while-feof-file-always-wrong\">Here is</a> the <code>feof()</code> link.</p>\n\n<p>This shows what works</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint main()                              // main needs a return type\n{\n    FILE *p,*q;\n    char b;\n    int a;\n    p = fopen(\"three\", \"wb\");           // binary mode\n    if (p == NULL)                      // test file open\n        return 1;\n    for(a=1; a&lt;=50; a++)\n        fprintf(p, \"%c\", a);\n    fclose(p);\n\n    q = fopen(\"three\", \"rb\");           // binary mode\n    if (q == NULL)                      // test file open\n        return 1;\n    while (1 == fscanf(q, \"%c\", &amp;b))    // test the read result\n        printf(\"%d \",b);\n    fclose(q);\n    return 0;\n}\n</code></pre>\n\n<p>Program output </p>\n\n<pre><code>1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1430425403, "creation_date": 1430425403, "answer_id": 29977126, "question_id": 29952595, "link": "https://stackoverflow.com/questions/29952595/c-file-handling-unable-to-write-after-25-y/29977126#29977126", "title": "c file handling : unable to write after 25 y?", "body": "<p>here is how I wrote, tested the code.</p>\n\n<p>Notice the corrections to the main function declaration</p>\n\n<p>Notice the addition of the return statement at the end</p>\n\n<p>Notice, just for output formatting, the format string for the printf</p>\n\n<p>the '\\n' in the printf format string causes the output buffer to be immediately flushed.</p>\n\n<p>Notice the addition of the error checking after the two fopen statements</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main( void )\n{\n    FILE *p,*q;\n    char b;\n    int a;\n    if( NULL == ( p = fopen(\"three\", \"w\") ) )\n    { // then fopen failed\n        perror( \"fopen for write: three failed\" );\n        exit( EXIT_FAILURE );\n    }\n\n    // implied else,  fopen successful\n\n    for(a=1; a&lt;=50; a++)\n        fprintf(p, \"%c\", a);\n    fclose(p);\n\n    if( NULL == (q = fopen(\"three\", \"r\") ) )\n    { // then fopen failed\n        perror( \"fopen for read: three failed\" );\n        exit( EXIT_FAILURE );\n    }\n\n    // implied else, fopen successful\n\n    while(1 == fscanf(q, \"%c\", &amp;b) ) //dont print after 25! ?\n    {\n        printf(\"%d\\n\",b);\n    }\n    fclose(q);\n\n    return(0);\n} \n</code></pre>\n"}], "owner": {"reputation": 177, "user_id": 4192965, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100000322580538/picture?type=large", "display_name": "Sagar Kar", "link": "https://stackoverflow.com/users/4192965/sagar-kar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 29952926, "answer_count": 2, "score": 0, "last_activity_date": 1430425403, "creation_date": 1430334908, "last_edit_date": 1430335354, "question_id": 29952595, "link": "https://stackoverflow.com/questions/29952595/c-file-handling-unable-to-write-after-25-y", "title": "c file handling : unable to write after 25 y?", "body": "<pre><code>#include&lt;stdio.h&gt;\n\nmain()\n{\n    FILE *p,*q;\n    char b;\n    int a;\n    p = fopen(\"three\", \"w\");\n    for(a=1; a&lt;=50; a++)\n        fprintf(p, \"%c\", a);\n    fclose(p);\n\n    q = fopen(\"three\", \"r\");\n    while(!feof(q))\n    {\n        fscanf(q, \"%c\", &amp;b); //dont print after 25! ?\n        printf(\"%d\",b);\n    }\n    fclose(q);\n}\n</code></pre>\n\n<p>The question is why it does not print after 25. I tried by removing <code>feof</code> also but it showed that only 25th char is read to file.\nI guess this line is creating some problem!</p>\n\n<pre><code>fprintf(p,\"%c\",26);\n</code></pre>\n\n<p>but have no idea why!</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1430334808, "post_id": 29952514, "comment_id": 48025887, "body": "If it reads a space but it previously read a space (because <code>inspace == 1</code>), it doesn&#39;t call <code>putchar(c)</code>, so the output is different from the input."}, {"owner": {"reputation": 42447, "user_id": 1016716, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/1c83d772b1c065603c7f20975d8d3552?s=128&d=identicon&r=PG", "display_name": "Mr Lister", "link": "https://stackoverflow.com/users/1016716/mr-lister"}, "edited": false, "score": 1, "creation_date": 1430334813, "post_id": 29952514, "comment_id": 48025890, "body": "Not sure what causes your confusion exactly. You do know the difference between <code>=</code> and <code>==</code>? You say &quot;If inspace is == 1 then it just outputs the characters inputted back out.&quot;, but that&#39;s the opposite of what happens."}, {"owner": {"reputation": 43, "user_id": 4262378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d60f9dc41c98ebd1e1aefd40cd0aa2b?s=128&d=identicon&r=PG&f=1", "display_name": "sphere", "link": "https://stackoverflow.com/users/4262378/sphere"}, "edited": false, "score": 0, "creation_date": 1430335522, "post_id": 29952514, "comment_id": 48026312, "body": "Ok you&#39;re right I wasn&#39;t very clear.  What I don&#39;t get is where it&#39;s deleting extra spaces. It looks to me like no matter what it says putchar(c) where C represents whatever was inputted, am I wrong? Where does the deletion/replacement take place?  I get that the program has to output the same characters, but it also has  to replace the double spaces with a single space and I don&#39;t see where that&#39;s happening."}], "answers": [{"tags": [], "owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "is_accepted": false, "score": 0, "last_activity_date": 1430334972, "creation_date": 1430334972, "answer_id": 29952613, "question_id": 29952514, "link": "https://stackoverflow.com/questions/29952514/clarifying-kr-exercise-1-9/29952613#29952613", "title": "Clarifying K&amp;R exercise 1-9", "body": "<p>The first <code>if</code> block along with the inner one is saying, \"If the input is a space and the <code>inspace</code> flag is zero, print it, and also set the flag to one\". I.e. print space if it is the first one, and indicate the next one won't be the first. The second block is saying \"If the input is not space, print it and reset the previous spaces flag so the next encountered space will be considered the first one.\". That's all.</p>\n"}, {"tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": false, "score": 1, "last_activity_date": 1430336445, "last_edit_date": 1430336445, "creation_date": 1430334990, "answer_id": 29952623, "question_id": 29952514, "link": "https://stackoverflow.com/questions/29952514/clarifying-kr-exercise-1-9/29952623#29952623", "title": "Clarifying K&amp;R exercise 1-9", "body": "<blockquote>\n  <p>how does <code>putchar(c)</code> not output the same exact data that came in.</p>\n</blockquote>\n\n<p>When the code reaches <code>putchar(c)</code>, it outputs the same exact character that came in. However, the code may not be reaching <code>putchar(c)</code> on some of the iterations.</p>\n\n<blockquote>\n  <p>what importance does <code>inspace == 1</code> or <code>0</code> have?</p>\n</blockquote>\n\n<p>Once the program sets <code>inspace</code> to <code>1</code>, it stops printing further space characters, because the code will not reach <code>putchar(c)</code> on second and subsequent iterations of the loop.</p>\n\n<p><code>inspace</code> is set to <code>1</code> after printing the first space in a sequence of one or more spaces.  If <code>inspace</code> is set to zero coming into the first conditional, a space would be printed; otherwise, no space would be printed.</p>\n\n<p>Here is a diagram that explains what is happening:</p>\n\n<p><img src=\"https://i.stack.imgur.com/8FYvH.png\" alt=\"Diagram\"></p>\n\n<p>The program starts in the black circle, and proceeds to one of two states, depending on the input character:</p>\n\n<ul>\n<li>If the character is space, the state on the left is entered, when the first space is printed, and the rest of spaces are ignored (i.e. <code>inspace</code> is set to <code>1</code>)</li>\n<li>If the character is non-space, the state on the right is entered, when each character is printed.</li>\n<li>Each time a new character is read the program decides if it wants to switch the state, or to remain in the current state.</li>\n</ul>\n\n<p>Note: the diagram is not showing the <code>EOF</code> to save some space. When <code>EOF</code> is reached, the program exits.</p>\n"}, {"comments": [{"owner": {"reputation": 43, "user_id": 4262378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d60f9dc41c98ebd1e1aefd40cd0aa2b?s=128&d=identicon&r=PG&f=1", "display_name": "sphere", "link": "https://stackoverflow.com/users/4262378/sphere"}, "edited": false, "score": 0, "creation_date": 1430336036, "post_id": 29952651, "comment_id": 48026637, "body": "This answer made me realize what another guy said which in turn his advice helped further and so on. Thanks a lot everyone."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 2, "last_activity_date": 1430336132, "last_edit_date": 1430336132, "creation_date": 1430335104, "answer_id": 29952651, "question_id": 29952514, "link": "https://stackoverflow.com/questions/29952514/clarifying-kr-exercise-1-9/29952651#29952651", "title": "Clarifying K&amp;R exercise 1-9", "body": "<p>Think about the logic in this block when there are two ore more consecutive <code>' '</code> characters in the input.</p>\n\n<pre><code>    if(c == ' ')\n    {\n        if(inspace == 0)\n        {\n            inspace = 1;\n            putchar(c);\n        }\n    }\n</code></pre>\n\n<p>When the first space character is encountered, the code enters the nested <code>if</code> block and prints the character.</p>\n\n<p>When the second space character is encountered, the code does not enter the nested <code>if</code> block and the character is not printed.</p>\n\n<p>If you follow this logic, you'll notice that if there are two or more consecutive space characters in the input, only one is printed.</p>\n"}, {"tags": [], "owner": {"reputation": 305833, "user_id": 68587, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7d9fd158e03cbde94f7e0b33b78222af?s=128&d=identicon&r=PG", "display_name": "John Kugelman", "link": "https://stackoverflow.com/users/68587/john-kugelman"}, "is_accepted": true, "score": 4, "last_activity_date": 1430339035, "last_edit_date": 1430339035, "creation_date": 1430335116, "answer_id": 29952655, "question_id": 29952514, "link": "https://stackoverflow.com/questions/29952514/clarifying-kr-exercise-1-9/29952655#29952655", "title": "Clarifying K&amp;R exercise 1-9", "body": "<blockquote>\n  <p>First of all, how does putchar(c) not output the same exact data that came in. Despite it checking for a blank or != blank, it still says to output \"c\" which is just getchar(c) meaning whatever was inputted. I see no code that specifies to delete extra spaces and output just one space. Where does the code specify that that is what must take place? I'm having trouble understanding how getchar/putchar works it seems to me.</p>\n</blockquote>\n\n<p>You are correct that <em>if</em> putchar is called, it just outputs the input character. The key to this program is that putchar isn't called on every input character. The various <code>if</code> statements control when it is called. At a high level, the program avoids calling putchar on the second, third, fourth, etc., spaces if there are multiple spaces in a row. It's only called on the first space.</p>\n\n<blockquote>\n  <p>Also, what importance does inspace == 1 or 0 have? If inspace is == 1 then it just outputs the characters inputted back out. There's nothing saying that the extra blanks are deleted and inspace isn't defined as anything except 0 or 1, there's nothing defining it as a space so how can it possibly have any real meaning as to what the program is doing? </p>\n</blockquote>\n\n<p>Don't think of it as spaces being <em>deleted</em>. Think of it as them being <em>omitted</em>. Sometimes putchar is called, sometimes it isn't. Look at the loop and try to figure out what conditions would cause putchar <em>not</em> to be called.</p>\n\n<p>Importantly, look at what happens if you start a loop iteration, <code>inspace == 1</code>, and <code>c == ' '</code>. What happens?</p>\n\n<p>It might help to put together a table showing when putchar is and isn't called.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Is putchar(c) called?\n=====================\n\n             | c == ' ' | c != ' '\n-------------+----------+---------\ninspace == 0 |    Y     |    Y\ninspace == 1 |    N     |    Y\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 4262378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d60f9dc41c98ebd1e1aefd40cd0aa2b?s=128&d=identicon&r=PG&f=1", "display_name": "sphere", "link": "https://stackoverflow.com/users/4262378/sphere"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 211, "favorite_count": 0, "accepted_answer_id": 29952655, "answer_count": 4, "score": 2, "last_activity_date": 1430339035, "creation_date": 1430334635, "last_edit_date": 1430337860, "question_id": 29952514, "link": "https://stackoverflow.com/questions/29952514/clarifying-kr-exercise-1-9", "title": "Clarifying K&amp;R exercise 1-9", "body": "<p>I have a few questions on this exercise. Here is the code I'm dealing with:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main (void)\n{\n    int c;\n    int inspace;\n\n    inspace = 0;\n    while((c = getchar()) != EOF)\n    {\n        if(c == ' ')\n        {\n            if(inspace == 0)\n            {\n                inspace = 1;\n                putchar(c);\n            }\n        }\n\n        if(c != ' ')\n        {\n            inspace = 0;\n            putchar(c);\n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>(Sorry I'm having a lot of trouble comprehending how these programs work because they're so simple and lack description on how they actually work)</p>\n\n<p>First of all, how does putchar(c) not output the same exact data that came in. Despite it checking for a blank or != blank, it still says to output \"c\" which is just getchar(c) meaning whatever was inputted. I see no code that specifies to delete extra spaces and output just one space. Where does the code specify that that is what must take place? I'm having trouble understanding how getchar/putchar works it seems to me.</p>\n\n<p>Also, what importance does inspace == 1 or 0 have? If inspace is == 1 then it just outputs the characters inputted back out. There's nothing saying that the extra blanks are deleted and inspace isn't defined as anything except 0 or 1, there's nothing defining it as a space so how can it possibly have any real meaning as to what the program is doing? </p>\n\n<p>I'm really confused, where is the code that's replacing the spaces and how does it work? Is there a simpler book I should be learning from that explains the solutions?</p>\n"}, {"tags": ["c", "c-preprocessor"], "comments": [{"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 0, "creation_date": 1430334414, "post_id": 29952326, "comment_id": 48025663, "body": "You can use the <code>#</code> character to stringify a macro. Use two levels of indirection to stringify the expansion of the macro."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1430334455, "post_id": 29952326, "comment_id": 48025691, "body": "Can you define things the other way round, such that <code>MAX_VALUE_STRLEN</code> drives <code>MAX_VALUE</code>?"}, {"owner": {"reputation": 852, "user_id": 1941914, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/051b651759f8a0f9abe838f1bafeb0d3?s=128&d=identicon&r=PG", "display_name": "Edvard Fagerholm", "link": "https://stackoverflow.com/users/1941914/edvard-fagerholm"}, "edited": false, "score": 0, "creation_date": 1430334519, "post_id": 29952326, "comment_id": 48025726, "body": "the constants are POSIX constants from system headers, so I can&#39;t go changing them"}, {"owner": {"reputation": 395, "user_id": 3233754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3efbc4f3d993b7169db76d5f9cb2d33?s=128&d=identicon&r=PG&f=1", "display_name": "Technophile", "link": "https://stackoverflow.com/users/3233754/technophile"}, "edited": false, "score": 0, "creation_date": 1507743992, "post_id": 29952326, "comment_id": 80336714, "body": "What happens for:  &lt;code&gt;#define MAX_VALUE (99999)&lt;/code&gt;?"}], "answers": [{"comments": [{"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1430334968, "post_id": 29952494, "comment_id": 48025974, "body": "@WeatherVane not my fault. <code>size_t</code> is conventionally used for sizes (and it&#39;s what the <code>sizeof</code> operator yields anyway). The <code>%zu</code> conversion specifier is present in C99 and later; too bad MSVC doesn&#39;t support C99."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1430335043, "post_id": 29952494, "comment_id": 48026016, "body": "I&#39;m on MSVC 9.0 anyway - the freebie."}, {"owner": {"reputation": 2286, "user_id": 3228495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e0163d41bd310e00b055618846734b0?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/3228495/andrew"}, "edited": false, "score": 0, "creation_date": 1430335252, "post_id": 29952494, "comment_id": 48026148, "body": "I&#39;m pretty sure that the  <code>#define STRINGIFY_</code> is not being used... or am I missing something?"}, {"owner": {"reputation": 852, "user_id": 1941914, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/051b651759f8a0f9abe838f1bafeb0d3?s=128&d=identicon&r=PG", "display_name": "Edvard Fagerholm", "link": "https://stackoverflow.com/users/1941914/edvard-fagerholm"}, "edited": false, "score": 0, "creation_date": 1430335402, "post_id": 29952494, "comment_id": 48026251, "body": "Nope, it&#39;s not used. However, it&#39;s a very cool trick (although not needed  here) to add one more level of expansion to a function, so that the argument can be made to expand first. Thanks!"}, {"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "reply_to_user": {"reputation": 852, "user_id": 1941914, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/051b651759f8a0f9abe838f1bafeb0d3?s=128&d=identicon&r=PG", "display_name": "Edvard Fagerholm", "link": "https://stackoverflow.com/users/1941914/edvard-fagerholm"}, "edited": false, "score": 1, "creation_date": 1430335633, "post_id": 29952494, "comment_id": 48026384, "body": "@EdvardFagerholm oops, indeed, it&#39;s not used. it&#39;s not necessary, I&#39;ve removed it (since you already have the needed levels of indirection)."}], "tags": [], "owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "is_accepted": true, "score": 7, "last_activity_date": 1430335598, "last_edit_date": 1430335598, "creation_date": 1430334588, "answer_id": 29952494, "question_id": 29952326, "link": "https://stackoverflow.com/questions/29952326/extracting-the-number-of-digits-in-a-macro-constant-at-compile-time/29952494#29952494", "title": "Extracting the number of digits in a macro constant at compile-time", "body": "<p>Stringify using <code>#</code> and two levels of macro expansion, then chop off the terminating <code>NUL</code>:</p>\n\n<pre><code>#define MAX_VALUE 99999\n\n#define STRINGIFY(x) #x\n\n#define LENGTH(x) (sizeof(STRINGIFY(x)) - 1)\n\n#include &lt;stdio.h&gt;    \n\nint main()\n{\n    size_t n = LENGTH(MAX_VALUE);\n    printf(\"length = %zu\\n\", n);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 852, "user_id": 1941914, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/051b651759f8a0f9abe838f1bafeb0d3?s=128&d=identicon&r=PG", "display_name": "Edvard Fagerholm", "link": "https://stackoverflow.com/users/1941914/edvard-fagerholm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 512, "favorite_count": 0, "accepted_answer_id": 29952494, "answer_count": 1, "score": 3, "last_activity_date": 1430335598, "creation_date": 1430334052, "question_id": 29952326, "link": "https://stackoverflow.com/questions/29952326/extracting-the-number-of-digits-in-a-macro-constant-at-compile-time", "title": "Extracting the number of digits in a macro constant at compile-time", "body": "<p>I need to do some preprocessor magic. Assume that I have a global constant</p>\n\n<pre><code>#define MAX_VALUE 99999\n</code></pre>\n\n<p>What I need to do is to extract the length of this constant in its decimal representation at compile-time. In other words, I don't want to have another constant</p>\n\n<pre><code>#define MAX_VALUE_STRLEN 5\n</code></pre>\n\n<p>polluting the global namespace and I don't want to add a place in the code that needs to be changed in the case that MAX_VALUE is modified. If I have a number literal, then I can do something like</p>\n\n<pre><code>#define INTLEN(x) (sizeof(#x)/sizeof((#x)[0]) - 1)\n</code></pre>\n\n<p>and then <code>INTLEN(99999)</code> would expand to <code>5</code> at compile-time. Unfortunately, I can't do something like</p>\n\n<pre><code>INTLEN(MAX_VALUE),\n</code></pre>\n\n<p>because the preprocessor expands INTLEN first, so that I get</p>\n\n<pre><code> (sizeof(\"MAX_VALUE\")/sizeof((\"MAX_VALUE\")[0]) - 1)\n</code></pre>\n\n<p>Is there a preprocessor trick that achieves what I want? Another trickier issue that I should be able to safely ignore is that can this be made generic enough that if someone decides to add a type annotation, say, 99999L to the constant that I can still get the right value?</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 2, "creation_date": 1430334011, "post_id": 29952215, "comment_id": 48025431, "body": "This is also tagged with C++, is that on purpose?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 1, "creation_date": 1430334176, "post_id": 29952215, "comment_id": 48025529, "body": "Make it <code>valid = (fread((void*)(&amp;vals), 1, 6 * sizeof(float), file) == 6 * sizeof(float));</code> and(!) check that <code>valid</code>"}, {"owner": {"reputation": 2802, "user_id": 3661207, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/tzrwF.jpg?s=128&g=1", "display_name": "manatttta", "link": "https://stackoverflow.com/users/3661207/manatttta"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 1, "creation_date": 1430334207, "post_id": 29952215, "comment_id": 48025550, "body": "@AndyG this is using C syntax but I am compiling it as C++ code"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 4, "creation_date": 1430334390, "post_id": 29952215, "comment_id": 48025650, "body": "<a href=\"http://stackoverflow.com/questions/5431941/why-is-while-feof-file-always-wrong\">Why is \u201cwhile ( !feof (file) )\u201d always wrong?</a>"}, {"owner": {"reputation": 2802, "user_id": 3661207, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/tzrwF.jpg?s=128&g=1", "display_name": "manatttta", "link": "https://stackoverflow.com/users/3661207/manatttta"}, "edited": false, "score": 0, "creation_date": 1430334437, "post_id": 29952215, "comment_id": 48025679, "body": "@DieterL&#252;cking returns the same"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1430335264, "post_id": 29952215, "comment_id": 48026156, "body": "@manatttta: Regarding your latest edit, what is <code>(...)</code>? Please, for the love of programming create a <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a>"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 4, "creation_date": 1430335423, "post_id": 29952215, "comment_id": 48026266, "body": "Try opening in binary <code>fopen(&quot;file.bin&quot;, &quot;rb&quot;)</code> so that characters equal to the ASCII EOF (aka 26 aka 0x1A aka Ctrl-Z) are not treated as the end of the file."}, {"owner": {"reputation": 2802, "user_id": 3661207, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/tzrwF.jpg?s=128&g=1", "display_name": "manatttta", "link": "https://stackoverflow.com/users/3661207/manatttta"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1430336072, "post_id": 29952215, "comment_id": 48026658, "body": "@BenVoigt solved it!!! thank you!"}], "answers": [{"tags": [], "owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "is_accepted": true, "score": 4, "last_activity_date": 1430337477, "last_edit_date": 1430337477, "creation_date": 1430336947, "answer_id": 29953184, "question_id": 29952215, "link": "https://stackoverflow.com/questions/29952215/fread-and-fgetc-in-the-same-file-stream-not-working/29953184#29953184", "title": "fread and fgetc in the same file stream not working", "body": "<blockquote>\n  <p>it simply stops parsing (way way before the end of the file).</p>\n</blockquote>\n\n<p>You and the C Standard library are having a difference of opinion about where the end of the file is.  ASCII character EOF (for DOS/Windows: decimal 26, hex 1A, aka Ctrl+Z, for Unix/Linux: decimal 4, hex 04, aka Ctrl+D) is a control character meaning \"end of file\".  There's also the file length stored by the filesystem metadata.</p>\n\n<p>The C stdio functions can operate in several modes: text, default, binary, and these control several behaviors:</p>\n\n<ul>\n<li>Newline translations (implementation-defined): enabled in text mode, disabled in binary mode, default: ???</li>\n<li>End of file: Implementation-defined, but usually EOF character in text mode, by filesystem file length in binary mode, default: ???</li>\n</ul>\n\n<p>Since your file contains binary data, you should force binary mode by using <code>\"b\"</code> in the mode string to <code>fopen</code>, e.g.</p>\n\n<pre><code>FILE* file = fopen(\"file.bin\", \"rb\");\n</code></pre>\n\n<p>When you do so, characters with value 26 are treated like any other byte and lose their \"EOF\" meaning.</p>\n"}], "owner": {"reputation": 2802, "user_id": 3661207, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/tzrwF.jpg?s=128&g=1", "display_name": "manatttta", "link": "https://stackoverflow.com/users/3661207/manatttta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 0, "accepted_answer_id": 29953184, "answer_count": 1, "score": 1, "last_activity_date": 1430337477, "creation_date": 1430333737, "last_edit_date": 1430334818, "question_id": 29952215, "link": "https://stackoverflow.com/questions/29952215/fread-and-fgetc-in-the-same-file-stream-not-working", "title": "fread and fgetc in the same file stream not working", "body": "<p>I have a binary file with the following repeating format: 6 float values + 3 unsigned char (byte`, integer value from 0 to 255) values.</p>\n\n<p>I am parsing it like this:</p>\n\n<pre><code>FILE *file = fopen(\"file.bin\", \"r\");\nbool valid = true;\n\nwhile(!feof(file)) {\n\n  float vals[6];\n  valid = valid &amp;&amp; (fread((void*)(&amp;vals), sizeof(float), 6, file) == 6);\n  unsigned char a,b,c;\n  a = fgetc(file); b = fgetc(file); c = fgetc(file); \n\n  (...)\n\n}\n</code></pre>\n\n<p>This works fine for the first 30 iterations or so, but after that it simply stops parsing (way way before the end of the file).</p>\n\n<p>What could be wrong?</p>\n\n<p>I also tried parsing the <code>unsigned char</code> bytes with </p>\n\n<pre><code>fread((void*)&amp;(a), sizeof(unsigned char), 1, file);\n</code></pre>\n"}, {"tags": ["c", "sockets", "tcp", "network-programming", "udp"], "comments": [{"owner": {"reputation": 2792, "user_id": 3125367, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/650027e104822e3cd1be56bb90fa5271?s=128&d=identicon&r=PG&f=1", "display_name": "user3125367", "link": "https://stackoverflow.com/users/3125367/user3125367"}, "edited": false, "score": 0, "creation_date": 1430339890, "post_id": 29952156, "comment_id": 48028824, "body": "AFAIK, connect() implicitly binds unbound sockets (thus assigning source ip:port), as well as listen(), though it is not very useful unless you&#39;re using service discovery tool. You may freely bind before connect."}], "answers": [{"comments": [{"owner": {"reputation": 3265, "user_id": 2606938, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/7gIUB.jpg?s=128&g=1", "display_name": "Prabhu", "link": "https://stackoverflow.com/users/2606938/prabhu"}, "edited": false, "score": 0, "creation_date": 1430334199, "post_id": 29952306, "comment_id": 48025545, "body": "The link you posted appears to be incorrect.  Getting 404"}], "tags": [], "owner": {"reputation": 2626, "user_id": 3243563, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/100002431404708/picture?type=large", "display_name": "laurisvr", "link": "https://stackoverflow.com/users/3243563/laurisvr"}, "is_accepted": true, "score": 5, "last_activity_date": 1430673837, "last_edit_date": 1495539813, "creation_date": 1430334017, "answer_id": 29952306, "question_id": 29952156, "link": "https://stackoverflow.com/questions/29952156/bind-in-tcp-udp-sockets/29952306#29952306", "title": "Bind in TCP/UDP Sockets", "body": "<p>Binding is only a required, if there is no other way for the computer to know which program to send the packets to. For connection less programs this is only the receiving end.</p>\n\n<p>Please have a look at <a href=\"https://stackoverflow.com/questions/27014955/socket-connect-vs-bind][1]\">socket connect() vs bind()</a> this post. </p>\n\n<p>There a much better job of explaining is done than I'm able to do. If you've got any questions after. Feel free to ask:)</p>\n"}, {"tags": [], "owner": {"reputation": 3265, "user_id": 2606938, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/7gIUB.jpg?s=128&g=1", "display_name": "Prabhu", "link": "https://stackoverflow.com/users/2606938/prabhu"}, "is_accepted": false, "score": 2, "last_activity_date": 1430334915, "last_edit_date": 1430334915, "creation_date": 1430334532, "answer_id": 29952470, "question_id": 29952156, "link": "https://stackoverflow.com/questions/29952156/bind-in-tcp-udp-sockets/29952470#29952470", "title": "Bind in TCP/UDP Sockets", "body": "<p>Client on calling <code>connect</code> implicitly <code>bind</code> to a ephemeral, available port provided by the kernel. It need not specifically bind because it is  the initiator of the connection. Server explicitly need to bind because it need to tell external world (the clients) how they can reach the server. Server <code>listen</code>s on that port.Client knowing that published port initiates connection to it. </p>\n\n<p>Now servers can send packets to client because on connection establishment the peer details (IP and Port) becomes known and are part of connection identifier.</p>\n\n<p>And the above applied to both TCP and UDP. (UDP will not have <code>connect</code>)</p>\n"}], "owner": {"reputation": 398, "user_id": 4546831, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/7469881a075e3e1d1504ae72b9a14edf?s=128&d=identicon&r=PG&f=1", "display_name": "Novak007", "link": "https://stackoverflow.com/users/4546831/novak007"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5364, "favorite_count": 0, "accepted_answer_id": 29952306, "answer_count": 2, "score": 0, "last_activity_date": 1430673837, "creation_date": 1430333563, "question_id": 29952156, "link": "https://stackoverflow.com/questions/29952156/bind-in-tcp-udp-sockets", "title": "Bind in TCP/UDP Sockets", "body": "<p>Bind function is used to assign a name (a sockaddr struct) to a socket descriptor. Why is it required for TCP server but not TCP client ? And why it is required for bot UDP Client and server?</p>\n\n<p>I have also written correctly working code without using bind() in UDP Client .</p>\n\n<p>I do not understand why bind() is not used universally i.e. in all cases above.</p>\n"}, {"tags": ["c", "pointers", "struct", "syntax"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1430333430, "post_id": 29952084, "comment_id": 48025042, "body": "Well you can do something similar to inheritance in c++."}, {"owner": {"reputation": 3169, "user_id": 4114124, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/k73hh.jpg?s=128&g=1", "display_name": "Politank-Z", "link": "https://stackoverflow.com/users/4114124/politank-z"}, "edited": false, "score": 0, "creation_date": 1430333450, "post_id": 29952084, "comment_id": 48025055, "body": "Have you tried your <code>isempty</code>? It looks, at first glance, as if it could work. If it didn&#39;t, what happened?"}, {"owner": {"reputation": 4638, "user_id": 4279201, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/cff52351d37f559a2f8886ccf441cdb7?s=128&d=identicon&r=PG&f=1", "display_name": "shinzou", "link": "https://stackoverflow.com/users/4279201/shinzou"}, "reply_to_user": {"reputation": 3169, "user_id": 4114124, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/k73hh.jpg?s=128&g=1", "display_name": "Politank-Z", "link": "https://stackoverflow.com/users/4114124/politank-z"}, "edited": false, "score": 0, "creation_date": 1430333619, "post_id": 29952084, "comment_id": 48025160, "body": "@Politank-Z it didn&#39;t work, see the edit."}, {"owner": {"reputation": 4638, "user_id": 4279201, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/cff52351d37f559a2f8886ccf441cdb7?s=128&d=identicon&r=PG&f=1", "display_name": "shinzou", "link": "https://stackoverflow.com/users/4279201/shinzou"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1430333693, "post_id": 29952084, "comment_id": 48025221, "body": "@iharob c++ also has template functions (which I suppose could work here) but unfortunately I&#39;m restricted to c only."}, {"owner": {"reputation": 3169, "user_id": 4114124, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/k73hh.jpg?s=128&g=1", "display_name": "Politank-Z", "link": "https://stackoverflow.com/users/4114124/politank-z"}, "edited": false, "score": 3, "creation_date": 1430333770, "post_id": 29952084, "comment_id": 48025263, "body": "You&#39;re declaring <code>a</code> as both a <code>List *</code> and as an <code>int</code>. If you use different identifiers, do you get the same error?"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1430333944, "post_id": 29952084, "comment_id": 48025382, "body": "@kuhaku I didn&#39;t say that the programming language should be c++, the question is tagged c, I just said that one can emulate inheritance."}, {"owner": {"reputation": 4638, "user_id": 4279201, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/cff52351d37f559a2f8886ccf441cdb7?s=128&d=identicon&r=PG&f=1", "display_name": "shinzou", "link": "https://stackoverflow.com/users/4279201/shinzou"}, "reply_to_user": {"reputation": 3169, "user_id": 4114124, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/k73hh.jpg?s=128&g=1", "display_name": "Politank-Z", "link": "https://stackoverflow.com/users/4114124/politank-z"}, "edited": false, "score": 0, "creation_date": 1430334082, "post_id": 29952084, "comment_id": 48025473, "body": "@Politank-Z oh damn... Hmm I need to test it now if it works properly."}], "answers": [{"comments": [{"owner": {"reputation": 4638, "user_id": 4279201, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/cff52351d37f559a2f8886ccf441cdb7?s=128&d=identicon&r=PG&f=1", "display_name": "shinzou", "link": "https://stackoverflow.com/users/4279201/shinzou"}, "edited": false, "score": 0, "creation_date": 1431171621, "post_id": 29952262, "comment_id": 48387748, "body": "I tried to do this with <code>listlen</code> function: <a href=\"http://pastebin.com/EB2u23JV\" rel=\"nofollow noreferrer\">pastebin.com/EB2u23JV</a> but it seems that when the <code>curr</code> pointer reaches what is supposed to be <code>NULL</code> it isn&#39;t <code>NULL</code> but just junk, resulting in an error. Any idea on how to make it recognize the last pointer as <code>NULL</code>? also, why does it happen?"}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": true, "score": 2, "last_activity_date": 1430333887, "creation_date": 1430333887, "answer_id": 29952262, "question_id": 29952084, "link": "https://stackoverflow.com/questions/29952084/is-there-a-way-to-perform-operations-on-the-same-field-in-different-list-structs/29952262#29952262", "title": "Is there a way to perform operations on the same field in different list structs with the same function?", "body": "<p>Suppose you have two lists, then you could define them as follows</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nstruct GenericList\n {\n    struct GenericList *commonField;\n };\n\nstruct FirstList\n {\n    struct FirstList *commonField;\n    int               firstListField;\n };\n\nstruct SecondList\n {\n    struct SecondList *commonField;\n    int                secondListField;\n };\n\nint isempty(struct GenericList *list)\n {\n    return ((list != NULL) &amp;&amp; (list-&gt;commonField != NULL));\n }\n\nint main(void)\n {\n    struct FirstList  firstList;\n    struct SecondList secondList;\n\n    memset(&amp;firstList, 0, sizeof(firstList));\n    memset(&amp;secondList, 0, sizeof(secondList));\n\n    if (isempty((struct GenericList *)&amp;firstList) == 0)\n        printf(\"The list is empty ... \\n\");\n    if (isempty((struct  GenericList *)&amp;secondList) == 0)\n        printf(\"The list is empty ... \\n\");\n\n    return 0;\n }\n</code></pre>\n\n<p>As long as the begining of the structure definitions match, you can do it for more fields, that's why it's like inheritance in c++.</p>\n"}], "owner": {"reputation": 4638, "user_id": 4279201, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/cff52351d37f559a2f8886ccf441cdb7?s=128&d=identicon&r=PG&f=1", "display_name": "shinzou", "link": "https://stackoverflow.com/users/4279201/shinzou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 29952262, "answer_count": 1, "score": 2, "last_activity_date": 1430333887, "creation_date": 1430333352, "last_edit_date": 1430333602, "question_id": 29952084, "link": "https://stackoverflow.com/questions/29952084/is-there-a-way-to-perform-operations-on-the-same-field-in-different-list-structs", "title": "Is there a way to perform operations on the same field in different list structs with the same function?", "body": "<p>Is there a way to access the same field in different list structs with the same function?</p>\n\n<p>For example, like the max function that can be used with different types: </p>\n\n<pre><code>#define MAX(a,b) (((a)&gt;(b))?(a):(b))\n</code></pre>\n\n<p>Then suppose I have two different list types:</p>\n\n<pre><code>typedef struct lst1{\n    struct lst1 * head;\n    ...\n} LST1;\n\ntypedef struct lst2{\n    struct lst2 * head;\n    ...\n} LST2;\n</code></pre>\n\n<p>Is there a function that would work similarly to the <code>max</code> function like this maybe?</p>\n\n<pre><code>#define isempty(x) ((x-&gt;head==NULL) ? 1 : 0)\n</code></pre>\n\n<p>PS: <code>isempty</code> didn't work for me, this is the sample code and error I got:</p>\n\n<pre><code>List lst;\nlst.head = NULL;\nList * a = &amp;lst;\nint a = isempty(a);\n\nerror C2040: 'a' : 'int' differs in levels of indirection from 'List *' \n</code></pre>\n"}, {"tags": ["java", "c", "windows", "sandbox"], "comments": [{"owner": {"reputation": 7658, "user_id": 3195477, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/PK4P1.jpg?s=128&g=1", "display_name": "StayOnTarget", "link": "https://stackoverflow.com/users/3195477/stayontarget"}, "edited": false, "score": 0, "creation_date": 1536251758, "post_id": 29951671, "comment_id": 91366535, "body": "What specific software are you using to create your sandbox?"}], "owner": {"reputation": 49, "user_id": 4792125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZmaiV.jpg?s=128&g=1", "display_name": "James Morgan McGill", "link": "https://stackoverflow.com/users/4792125/james-morgan-mcgill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 130, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1430332633, "creation_date": 1430332122, "question_id": 29951671, "link": "https://stackoverflow.com/questions/29951671/windows-sandboxing", "title": "Windows sandboxing", "body": "<p>We all know that when a sandbox runs, it does a few things before running the application. First, it creates a restricted token, this token restricts the \"securable\" objects the process can act on. Second, the sandbox spawns the child process with a low integrity level. Integrity levels are a feature of Windows Vista and above. A low integrity process can only edit a small area of the registry related to the applications settings.</p>\n\n<p>My question is: Is it possible to run <code>Java</code> or <code>C</code> in the sandbox? Right now I am opening up cmd.exe and running java (for a file) but I have to disable the Alternative Desktop which opens the sandbox up to more attacks.</p>\n\n<p>Any ideas?\nThanks</p>\n"}, {"tags": ["c", "embedded", "embedded-linux", "misra"], "comments": [{"owner": {"reputation": 1040, "user_id": 1614319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff0ff3e7d5ad91f5432ad168d4f4c9f5?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/1614319/andrew"}, "edited": false, "score": 0, "creation_date": 1434828637, "post_id": 29951591, "comment_id": 49948830, "body": "As per the document title, MISRA-C applies to all <i>critical systems</i> - and can be used for any applications beyond that scope.  Your approach to some of the rules (especially the advisories) may be more relaxed if used on non-embedded code."}], "answers": [{"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 4, "last_activity_date": 1430399905, "creation_date": 1430399905, "answer_id": 29968832, "question_id": 29951591, "link": "https://stackoverflow.com/questions/29951591/is-misra-c-applicable-to-linux-applications/29968832#29968832", "title": "Is MISRA-C applicable to Linux applications", "body": "<p>While MISRA-C was originally created as a standard just for automotive and safety-critical applications, this is no longer true. Nowadays MISRA-C is more of a general standard that can be used for any C programs where bugs, crashes and portability issues are not desired. </p>\n\n<p>You need to ask yourself why you are using MISRA-C. Is it because you wish to use it as a coding standard to get rid of bugs, or because the application is of a mission-critical nature?</p>\n\n<p>For the Linux case, the main issue will be if you'll just have your own code MISRA compliant, or if you will demand that this is true for all libraries included as well. And there is just no way you'll make the Linux kernel + libraries MISRA compliant, you'd have to rewrite Linux from scratch. </p>\n\n<p>This makes Linux unsuitable for mission-critical software. But if your program is not of a mission-critical nature, you should be able to use Linux. You might have to write a number of standing deviations from MISRA-C in advance, for things that you can tell will cause problems.</p>\n"}, {"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1430721187, "post_id": 29974502, "comment_id": 48164991, "body": "Whether or not the libraries must be MISRA compliant is kind of debated. Because you&#39;ll find sloppily written libraries everywhere, and not just in the Linux source. That&#39;s why I think it is fine to ignore the libraries if the OP just wants MISRA-C to improve their own code. Linux programmers in general would benefit from adopting MISRA, or a subset of MISRA, so that they may learn what a real coding standard might look like. Instead of thinking that the hobbyist-level &quot;Linux kernal style guide&quot; is some sort of canon for good programming practice even outside the kernel project."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1430721629, "post_id": 29974502, "comment_id": 48165179, "body": "The reason you usually have to use MISRA-C is not because of &quot;customers&quot; however, but because you have to conform with industry safety standards for safety-critical applications. IEC 61508 (industry/generic), ISO 26262 (automotive), DO-178 (avionics) and so on. These standards demand that you use a safer subset of the language, with static code analysis, leaving you with pretty much just MISRA-C and SPARK Ada to chose from. But given that at least 61508 and 26262 and all other SIL standards are mostly filled with nonsense, I suppose it might boil back to &quot;customer insists&quot; in the end :)"}, {"owner": {"reputation": 7797, "user_id": 942746, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/34cf9eae5d595c0b480a7cb42f3722b1?s=128&d=identicon&r=PG", "display_name": "Brian McFarland", "link": "https://stackoverflow.com/users/942746/brian-mcfarland"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1430758513, "post_id": 29974502, "comment_id": 48187034, "body": "Most of the MISRA requirements are based around developing software that is as deterministic as possible under all operating conditions.  You don&#39;t use <code>malloc</code> for the same reason CAN, ARINC-428, and MIL-STD-1553 are (typically) synchronous (compared with inherently async would of IP).  Determinism.  Guaranteeing deterministic performance is of paramount concern in hard realtime systems (particularly mission or safety critical ones), but often <i>detrimental</i> to overall system performance and therefore doesn&#39;t belong in a general purpose OS."}, {"owner": {"reputation": 7797, "user_id": 942746, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/34cf9eae5d595c0b480a7cb42f3722b1?s=128&d=identicon&r=PG", "display_name": "Brian McFarland", "link": "https://stackoverflow.com/users/942746/brian-mcfarland"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1430758811, "post_id": 29974502, "comment_id": 48187203, "body": "If you&#39;re trying to make certifiably MISRA-compliant software for Linux, you either don&#39;t understand the underpinnings of the standard or have a customer that doesn&#39;t.  That said, Linux is perfectly suitable to a wide range of non-safety critical embedded systems where some (often unknown) rate of failure due to over-subscribing your memory or dropping on a bus, etc, etc is acceptable.  Also, generally speaking, Linux userspace code <i>is</i> atrocious and could benefit from following more rigorous programming practices, I just think MISRA is not the answer."}], "tags": [], "owner": {"reputation": 7797, "user_id": 942746, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/34cf9eae5d595c0b480a7cb42f3722b1?s=128&d=identicon&r=PG", "display_name": "Brian McFarland", "link": "https://stackoverflow.com/users/942746/brian-mcfarland"}, "is_accepted": false, "score": 4, "last_activity_date": 1430416099, "creation_date": 1430416099, "answer_id": 29974502, "question_id": 29951591, "link": "https://stackoverflow.com/questions/29951591/is-misra-c-applicable-to-linux-applications/29974502#29974502", "title": "Is MISRA-C applicable to Linux applications", "body": "<p>In a word: No.</p>\n\n<p>MISRA does provide some good guidelines, but you'd be better off just cherry picking rules to which you want to adhere (assuming you have automated checking in your build / static analysis). </p>\n\n<p>Skimming through MISRA-2004 stuff, here are some problem areas.</p>\n\n<p>Having all your libraries be MISRA compliant is, in itself, MISRA rule.</p>\n\n<p>Rules on <code>goto</code>, <code>continue</code> and <code>break</code>, function returns, and pointer arithmetic are violated in literally billions of lines of both kernel and userspace code, so good luck getting your libraries (or kernel) under compliance.</p>\n\n<p>Pointer casting rules will be impossible to follow if using sockets, among other common APIs.</p>\n\n<blockquote>\n  <p>MISRA-2004 11.2 Conversions shall not be performed between a pointer to object and any\n  type other than an integral type, another pointer to object type or a\n  pointer to void.</p>\n</blockquote>\n\n<p>2004-20.x sections ban <code>&lt;errno.h&gt;</code>, <code>&lt;stdio.h&gt;</code>, <code>&lt;time.h&gt;</code> and <code>&lt;signal.h&gt;</code>.  Banning signals and error checking promotes BAD Linux programming if you're writing long-running, robust services.</p>\n\n<p>And no dynamic memory allocation is a rule in there somewhere.</p>\n\n<p>I know MISRA has rules that allow you to violate rules if you document them (is this true for <em>required</em> or just <em>advisory</em>???), but you'll document soooo many exceptions that it's really sort of pointless.</p>\n\n<p>All that said, if you have a customer insisting on MISRA compliance (which is the only reason I've ever seen it used), you could probably document all your rule violations and make some hand-wavy attempt to call yourself MISRA compliant.  So there might be a business case for pretending to be MISRA compliant on Linux, but I see little to no technical advantage in it.</p>\n\n<p>I'm afraid if you want to be <em>truly</em> compliant AND need a heavyweight/full-featured OS you're better off forking out the dough for QNX, GHS Integrity, VxWorks, etc.</p>\n"}], "owner": {"reputation": 71, "user_id": 4847690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27ca19a57f3b31f48faa0e15b0dfcaa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew W.", "link": "https://stackoverflow.com/users/4847690/andrew-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2299, "favorite_count": 1, "answer_count": 2, "score": 7, "last_activity_date": 1430416099, "creation_date": 1430331808, "last_edit_date": 1430399982, "question_id": 29951591, "link": "https://stackoverflow.com/questions/29951591/is-misra-c-applicable-to-linux-applications", "title": "Is MISRA-C applicable to Linux applications", "body": "<p>I understand that MISRA-C standards are intended for embedded <em>firmware</em>. When embedded Linux is your product platform, can/should your embedded applications be developed to be MISRA-C compliant? Has anyone ever considered such an exercise?</p>\n\n<p>My general sense is that you must first understand all the 'rules' and then apply them in your design/coding phase. There may be instances like system calls (pthread_create) and void* that need to be forced into compliance - producing ugly looking code.</p>\n"}, {"tags": ["c", "pointers", "binary-search-tree", "huffman-code"], "comments": [{"owner": {"reputation": 21695, "user_id": 726106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49ae1042b27f435f55de01b640671189?s=128&d=identicon&r=PG", "display_name": "Jeremy Huddleston Sequoia", "link": "https://stackoverflow.com/users/726106/jeremy-huddleston-sequoia"}, "edited": false, "score": 3, "creation_date": 1430331755, "post_id": 29951449, "comment_id": 48024017, "body": "There are issues all throughout your code.  Some functions aren&#39;t returning values that should be, returned values aren&#39;t being checked for errors, etc.  I see many places where you could get a segfault.  Which one are you wanting help with?  What line are you experiencing your problem on?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4847729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/febf7466647cb2f9b66a4a98a67ef35f?s=128&d=identicon&r=PG&f=1", "display_name": "Raz", "link": "https://stackoverflow.com/users/4847729/raz"}, "edited": false, "score": 0, "creation_date": 1430332553, "post_id": 29951496, "comment_id": 48024456, "body": "<a href=\"http://pastebin.com/1v5xQBQ9\" rel=\"nofollow noreferrer\">pastebin.com/1v5xQBQ9</a> did those changes according to your answer , still same problem your answers (1) and (3) kinda confused me though"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 1, "user_id": 4847729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/febf7466647cb2f9b66a4a98a67ef35f?s=128&d=identicon&r=PG&f=1", "display_name": "Raz", "link": "https://stackoverflow.com/users/4847729/raz"}, "edited": false, "score": 0, "creation_date": 1430333181, "post_id": 29951496, "comment_id": 48024893, "body": "@Raz You improved it a lot, some style issues though but they are a matter of taste and experience, for example single line <code>malloc()</code> and error check, might be confusing, I&#39;ll take a look to see what might be happening."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 1, "user_id": 4847729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/febf7466647cb2f9b66a4a98a67ef35f?s=128&d=identicon&r=PG&f=1", "display_name": "Raz", "link": "https://stackoverflow.com/users/4847729/raz"}, "edited": false, "score": 0, "creation_date": 1430333327, "post_id": 29951496, "comment_id": 48024979, "body": "@Raz Don&#39;t close the file in a function that didn&#39;t open it, it could be confusing. Can you add to your question the file content please."}, {"owner": {"reputation": 1, "user_id": 4847729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/febf7466647cb2f9b66a4a98a67ef35f?s=128&d=identicon&r=PG&f=1", "display_name": "Raz", "link": "https://stackoverflow.com/users/4847729/raz"}, "edited": false, "score": 0, "creation_date": 1430334531, "post_id": 29951496, "comment_id": 48025730, "body": "did , and so should i not close it at all or should i colse it in the main?"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 1, "user_id": 4847729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/febf7466647cb2f9b66a4a98a67ef35f?s=128&d=identicon&r=PG&f=1", "display_name": "Raz", "link": "https://stackoverflow.com/users/4847729/raz"}, "edited": false, "score": 0, "creation_date": 1430334718, "post_id": 29951496, "comment_id": 48025837, "body": "You should close it where you opened it, what are you using to write the program?"}, {"owner": {"reputation": 1, "user_id": 4847729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/febf7466647cb2f9b66a4a98a67ef35f?s=128&d=identicon&r=PG&f=1", "display_name": "Raz", "link": "https://stackoverflow.com/users/4847729/raz"}, "edited": false, "score": 0, "creation_date": 1430334799, "post_id": 29951496, "comment_id": 48025885, "body": "sublime text 2 , compling with the treminal useing linux gcc"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 1, "user_id": 4847729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/febf7466647cb2f9b66a4a98a67ef35f?s=128&d=identicon&r=PG&f=1", "display_name": "Raz", "link": "https://stackoverflow.com/users/4847729/raz"}, "edited": false, "score": 0, "creation_date": 1430335108, "post_id": 29951496, "comment_id": 48026055, "body": "Excelent, I recommend running the program with <code>gdb</code>, compile it with <code>gcc -Wall -Werror -g3 -O0</code> and also use <a href=\"http://www.valgrind.org\" rel=\"nofollow noreferrer\">valgrind</a>. That sould help you find the problematic line."}, {"owner": {"reputation": 1, "user_id": 4847729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/febf7466647cb2f9b66a4a98a67ef35f?s=128&d=identicon&r=PG&f=1", "display_name": "Raz", "link": "https://stackoverflow.com/users/4847729/raz"}, "edited": false, "score": 0, "creation_date": 1430397043, "post_id": 29951496, "comment_id": 48055167, "body": "<a href=\"http://pastebin.com/1LXJyJdA\" rel=\"nofollow noreferrer\">pastebin.com/1LXJyJdA</a> did minor changes , compiled wtih gcc -Wall -Werror -g3 -O0 and and it gives me this error  zip.c:22:16: error: variable \u2018tree\u2019 set but not used [-Werror=unused-but-set-variable]    struct Node *tree;  still not running and gives me the same error : Segmentation fault (core dumped)"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 1, "user_id": 4847729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/febf7466647cb2f9b66a4a98a67ef35f?s=128&d=identicon&r=PG&f=1", "display_name": "Raz", "link": "https://stackoverflow.com/users/4847729/raz"}, "edited": false, "score": 0, "creation_date": 1430397515, "post_id": 29951496, "comment_id": 48055462, "body": "@Raz You need to use <b>gdb</b> to check where the Segmentation Fault happens, there is no easy way to tell what&#39;s wrong. Now I have a lot of work to do, but later I might be able to take a look at your code. After you have removed the segmentation fault, check the program with valgrind and verify that there are no other silent memory errors that could trigger strange behavior under certain situations."}, {"owner": {"reputation": 1, "user_id": 4847729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/febf7466647cb2f9b66a4a98a67ef35f?s=128&d=identicon&r=PG&f=1", "display_name": "Raz", "link": "https://stackoverflow.com/users/4847729/raz"}, "edited": false, "score": 0, "creation_date": 1430398346, "post_id": 29951496, "comment_id": 48056059, "body": "@iharbo , <a href=\"http://pastebin.com/NJCxJuZ6\" rel=\"nofollow noreferrer\">pastebin.com/NJCxJuZ6</a> runned with gbd and the problem is in the method isertTree ,in if(!(*root)) it just crash beforehand"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 1, "user_id": 4847729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/febf7466647cb2f9b66a4a98a67ef35f?s=128&d=identicon&r=PG&f=1", "display_name": "Raz", "link": "https://stackoverflow.com/users/4847729/raz"}, "edited": false, "score": 0, "creation_date": 1430406312, "post_id": 29951496, "comment_id": 48062098, "body": "@Raz Change it to <code>if ((root == NULL) || (*root == NULL))</code>. Due to short-circuit, the second condition will not be evaluated if the first is true, and it appears that you are trying to dereference a <code>NULL</code> pointer there."}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 0, "last_activity_date": 1430331934, "last_edit_date": 1495540497, "creation_date": 1430331540, "answer_id": 29951496, "question_id": 29951449, "link": "https://stackoverflow.com/questions/29951449/c-segmentation-fault-core-dumped/29951496#29951496", "title": "C Segmentation fault (core dumped)", "body": "<p>Your,</p>\n\n<pre><code>struct Node* getBinTree(FILE *fsrc)\n</code></pre>\n\n<p>is not returning anything.</p>\n\n<p>You should enable compiler warnings, the compiler would have told you about that, the function is not returning a value, but you still assign it to <code>tree</code> in <code>main()</code>.</p>\n\n<p>But apart from that there is a serious problem with your code, a simple example</p>\n\n<pre><code>int main()\n{\n  FILE *fsrc;\n  struct Node *tree = (struct Node*)malloc (sizeof(struct Node));\n  fsrc = fopen(\"src.txt\",\"rb\");\n  tree=getBinTree(fsrc);\n  inorder(tree);\n  return 1;\n}\n</code></pre>\n\n<p>This single function has many problems,</p>\n\n<ol>\n<li><p>You allocate new memory and point to it with <code>tree</code>, but you never use it because you overwrite the pointer here</p>\n\n<pre><code>tree = getBinTree(fsrc);\n</code></pre>\n\n<p>that causes a memory leak.</p></li>\n<li><p>You don't check if the file was succesfuly opened, you must check</p>\n\n<pre><code>fsrc = fopen(\"src.txt\", \"rb\");\nif (fsrc == NULL)\n    return -1;\n</code></pre></li>\n<li><p>You don't need to <a href=\"https://stackoverflow.com/a/605858/1983495\">cast</a> <code>malloc()</code></p>\n\n<pre><code>struct Node *tree = malloc(sizeof(*tree));\n</code></pre>\n\n<p>this is more robust, and easier to read.</p></li>\n<li><p>You have to make sure that <code>malloc()</code> did not fail to allocate memory, when it does <code>NULL</code> is returned, so you need this when you do a <code>malloc()</code> that is actually required, for example in <code>getBinTree()</code></p>\n\n<p>struct Node *tree = malloc(sizeof(*tree));\n  if (tree == NULL)\n      return NULL;</p>\n\n<p>i.e., copy <code>malloc()</code>'s behavior by returning <code>NULL</code> on failure.</p></li>\n</ol>\n"}], "owner": {"reputation": 1, "user_id": 4847729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/febf7466647cb2f9b66a4a98a67ef35f?s=128&d=identicon&r=PG&f=1", "display_name": "Raz", "link": "https://stackoverflow.com/users/4847729/raz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 105, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1430334424, "creation_date": 1430331419, "last_edit_date": 1430334424, "question_id": 29951449, "link": "https://stackoverflow.com/questions/29951449/c-segmentation-fault-core-dumped", "title": "C Segmentation fault (core dumped)", "body": "<p>Hey i am starting to work on Huffman coding and I have a bit of a problem I getting this error </p>\n\n<blockquote>\n  <p>Segmentation fault (core dumped)</p>\n</blockquote>\n\n<p>I understand it is caused by trying to reach memory you are not allow to but I can not realize what is the problem in my code, thank in advnace for the help!</p>\n\n<p>src.txt - <a href=\"http://pastebin.com/kDf8nEhV\" rel=\"nofollow\">http://pastebin.com/kDf8nEhV</a></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint freq[256] = {0};\n\nstruct Node {\n    unsigned char m_ch;\n    int m_freq;\n    struct Node* m_ls, *m_rs;\n    struct Node* m_hls, *m_hrs;\n};\n\nstruct Node* createNode(int freq, char ch);\nvoid insertTree(struct Node** root, struct Node* n);\nstruct Node* getBinTree(FILE* fsrc);\nvoid inorder(struct Node* root);\n\nint main() {\n    FILE* fsrc;\n    struct Node* tree = (struct Node*)malloc(sizeof(struct Node));\n    fsrc = fopen(\"src.txt\", \"rb\");\n    tree = getBinTree(fsrc);\n    inorder(tree);\n    return 1;\n}\n\nstruct Node* createNode(int freq, char ch) {\n    struct Node* pNode = (struct Node*)malloc(sizeof(struct Node));\n    pNode-&gt;m_freq = freq;\n    pNode-&gt;m_ch = ch;\n    return pNode;\n}\n\nvoid insertTree(struct Node** root, struct Node* n) {\n    if (!(*root)) {\n        *root = n;\n        return;\n    }\n    if (n-&gt;m_freq &lt; (*root)-&gt;m_freq) {\n        insertTree(&amp;(*root)-&gt;m_ls, n);\n    } else {\n        insertTree(&amp;(*root)-&gt;m_rs, n);\n    }\n}\n\nstruct Node* getBinTree(FILE* fsrc) {\n    struct Node* temp = (struct Node*)malloc(sizeof(struct Node));\n    struct Node** root = (struct Node**)malloc(sizeof(struct Node*));\n    *root = (struct Node*)malloc(sizeof(struct Node));\n    int c, i;\n    while ((c = fgetc(fsrc)) != EOF) {\n        freq[c]++;\n    }\n    freq[255] = 1;\n    fclose(fsrc);\n    for (i = 0; i &lt; 256; i++) {\n        if (freq[i] &gt; 0) {\n            temp = createNode(freq[i], i);\n            insertTree(root, temp);\n        }\n    }\n}\n\nvoid inorder(struct Node* root) {\n    if (root != NULL) {\n        inorder(root-&gt;m_ls);\n        printf(\" %d\\n\", root-&gt;m_freq);\n        inorder(root-&gt;m_rs);\n    }\n    return;\n}\n</code></pre>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 4, "creation_date": 1430331451, "post_id": 29951405, "comment_id": 48023821, "body": "how do you display values?"}, {"owner": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 1, "creation_date": 1430331599, "post_id": 29951405, "comment_id": 48023915, "body": "also, there is no such OS like <code>sql server 2008 64 bit OS</code>"}, {"owner": {"reputation": 369, "user_id": 3374456, "user_type": "registered", "accept_rate": 5, "profile_image": "https://graph.facebook.com/1475851013/picture?type=large", "display_name": "Biryukov Pavel", "link": "https://stackoverflow.com/users/3374456/biryukov-pavel"}, "reply_to_user": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 0, "creation_date": 1430372823, "post_id": 29951405, "comment_id": 48040255, "body": "Sorry i meant Windows server 2008 OS. i&#39;m using time_t object to display the value. time_t current_time = time(NULL); LONGLONG x = current_time;"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1430378055, "post_id": 29951405, "comment_id": 48042974, "body": "If you want to correct a mistake in your question, you should exit the question, not just mention it in a comment."}], "answers": [{"comments": [{"owner": {"reputation": 369, "user_id": 3374456, "user_type": "registered", "accept_rate": 5, "profile_image": "https://graph.facebook.com/1475851013/picture?type=large", "display_name": "Biryukov Pavel", "link": "https://stackoverflow.com/users/3374456/biryukov-pavel"}, "edited": false, "score": 0, "creation_date": 1430650998, "post_id": 29951485, "comment_id": 48143908, "body": "In my case that was a misunderstood behavior that was caused by bad licensing. That may cause additional functions not to work correctly not only time."}], "tags": [], "owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "is_accepted": false, "score": 0, "last_activity_date": 1430331516, "creation_date": 1430331516, "answer_id": 29951485, "question_id": 29951405, "link": "https://stackoverflow.com/questions/29951405/strange-behavior-when-using-timenull/29951485#29951485", "title": "Strange behavior when using time(NULL)", "body": "<p>According to <a href=\"http://en.cppreference.com/w/cpp/chrono/c/time\" rel=\"nofollow\">this</a> reference for <a href=\"http://en.cppreference.com/w/c/chrono/time\" rel=\"nofollow\">std::time()</a>:</p>\n\n<blockquote>\n  <p>The encoding of calendar time in std::time_t is unspecified, but most\n  systems conform to <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/time.html\" rel=\"nofollow\">POSIX specification</a> and return a value of integral\n  type holding the number of seconds since the Epoch. Implementations in\n  which std::time_t is a 32-bit signed integer (many historical\n  implementations) fail in the year 2038.</p>\n</blockquote>\n\n<p>So it seems the return value of time is not guaranteed to be \" the number of seconds since 1.1.1970\".</p>\n"}, {"comments": [{"owner": {"reputation": 369, "user_id": 3374456, "user_type": "registered", "accept_rate": 5, "profile_image": "https://graph.facebook.com/1475851013/picture?type=large", "display_name": "Biryukov Pavel", "link": "https://stackoverflow.com/users/3374456/biryukov-pavel"}, "edited": false, "score": 0, "creation_date": 1430373163, "post_id": 29951497, "comment_id": 48040415, "body": "That looks like the problem. The question is how did that happen."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 1, "last_activity_date": 1430331547, "creation_date": 1430331547, "answer_id": 29951497, "question_id": 29951405, "link": "https://stackoverflow.com/questions/29951405/strange-behavior-when-using-timenull/29951497#29951497", "title": "Strange behavior when using time(NULL)", "body": "<p>The return value of <a href=\"http://en.cppreference.com/w/cpp/chrono/c/time\" rel=\"nofollow\"><code>std::time</code></a> is unspecified:</p>\n\n<blockquote>\n  <p>The encoding of calendar time in <code>std::time_t</code> is unspecified, but <strong>most</strong> systems conform to POSIX specification and return a value of integral type holding the number of seconds since the Epoch. Implementations in which std::time_t is a 32-bit signed integer (many historical implementations) fail in the year 2038.</p>\n</blockquote>\n\n<p>Looks like one of your systems gave what you expected the POSIX version to give and the other... didn't?</p>\n\n<p>Note that <a href=\"http://en.cppreference.com/w/cpp/chrono/c/time_t\" rel=\"nofollow\"><code>std::time_t</code></a> itself is also unspecified:</p>\n\n<blockquote>\n<pre><code>typedef /* unspecified */ time_t;\n</code></pre>\n  \n  <p>Although not defined, this is <strong>almost</strong> always an integral value holding the number of seconds (not counting leap seconds) since 00:00, Jan 1 1970 UTC, corresponding to POSIX time.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 369, "user_id": 3374456, "user_type": "registered", "accept_rate": 5, "profile_image": "https://graph.facebook.com/1475851013/picture?type=large", "display_name": "Biryukov Pavel", "link": "https://stackoverflow.com/users/3374456/biryukov-pavel"}, "is_accepted": false, "score": 0, "last_activity_date": 1430377871, "creation_date": 1430377871, "answer_id": 29961251, "question_id": 29951405, "link": "https://stackoverflow.com/questions/29951405/strange-behavior-when-using-timenull/29961251#29961251", "title": "Strange behavior when using time(NULL)", "body": "<p>It looks like the problem was caused by windows licensing problem, we had to activate it after 30 days and we did renewed the licence but restart to our services didn't helped, but when i re installed our application i started to work.</p>\n\n<p>Regards,\nPavel.</p>\n"}], "owner": {"reputation": 369, "user_id": 3374456, "user_type": "registered", "accept_rate": 5, "profile_image": "https://graph.facebook.com/1475851013/picture?type=large", "display_name": "Biryukov Pavel", "link": "https://stackoverflow.com/users/3374456/biryukov-pavel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1430377871, "creation_date": 1430331260, "last_edit_date": 1430331551, "question_id": 29951405, "link": "https://stackoverflow.com/questions/29951405/strange-behavior-when-using-timenull", "title": "Strange behavior when using time(NULL)", "body": "<p>I'm using</p>\n\n<pre><code>time_t t = time(NULL);\n</code></pre>\n\n<p>to get the number of seconds since <strong>1.1.1970</strong>.</p>\n\n<p>On two separate machines I get two different values, on one I get <code>1,419,120,000</code> on the other i get <code>7,812,616,799,348,535,896</code>. </p>\n\n<p>It's important to say that the value was fine on both machines but suddenly stopped working. other machines run the same code for a long time without any issues.</p>\n\n<p>In addition the project compiled as a 32 bit project whereas the project runs on sql server 2008 64 bit OS.</p>\n\n<p>Any suggestions ? </p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c", "string", "function"], "comments": [{"owner": {"reputation": 11144, "user_id": 4428462, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BQbHx.png?s=128&g=1", "display_name": "JonasCz", "link": "https://stackoverflow.com/users/4428462/jonascz"}, "edited": false, "score": 1, "creation_date": 1430331370, "post_id": 29951063, "comment_id": 48023763, "body": "<i>Is this right?</i> Did you test it ? If it works, i suppose it&#39;s okay."}, {"owner": {"reputation": 1700, "user_id": 2125444, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/VqC96.jpg?s=128&g=1", "display_name": "reggaeguitar", "link": "https://stackoverflow.com/users/2125444/reggaeguitar"}, "edited": false, "score": 0, "creation_date": 1430331570, "post_id": 29951063, "comment_id": 48023894, "body": "This question is more appropriate for codereview.stackexchange.com"}, {"owner": {"reputation": 12398, "user_id": 1310566, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/5qiMO.jpg?s=128&g=1", "display_name": "Simon Forsberg", "link": "https://stackoverflow.com/users/1310566/simon-forsberg"}, "reply_to_user": {"reputation": 1700, "user_id": 2125444, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/VqC96.jpg?s=128&g=1", "display_name": "reggaeguitar", "link": "https://stackoverflow.com/users/2125444/reggaeguitar"}, "edited": false, "score": 1, "creation_date": 1430331752, "post_id": 29951063, "comment_id": 48024015, "body": "@reggaeguitar No it isn&#39;t. Code Review is for stuff that works and that is wanted to be made cleaner. Not for &quot;Is this right?&quot; / &quot;Does this work?&quot;"}, {"owner": {"reputation": 1700, "user_id": 2125444, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/VqC96.jpg?s=128&g=1", "display_name": "reggaeguitar", "link": "https://stackoverflow.com/users/2125444/reggaeguitar"}, "edited": false, "score": 0, "creation_date": 1430334384, "post_id": 29951063, "comment_id": 48025643, "body": "Fair enough, I just thought the op would benefit from knowing about codereview.stackexchange and might get some more helpful feedback without getting downvoted by posting there"}], "answers": [{"comments": [{"owner": {"reputation": 6024, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "edited": false, "score": 1, "creation_date": 1430336307, "post_id": 29951120, "comment_id": 48026823, "body": "Why not <code>for ( int i = 0; text[i]; i++ ) text[i] += 13;</code> or even <code>for ( int i = 0; text[i]; text[i++] += 13 );</code>?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4227915"}, "reply_to_user": {"reputation": 6024, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "edited": false, "score": 0, "creation_date": 1430357824, "post_id": 29951120, "comment_id": 48035782, "body": "@i486... yes, you can!! I didn&#39;t know about that... but I tried here and it works: <i><a href=\"http://ideone.com/QWxaFz\" rel=\"nofollow noreferrer\">ideone.com/QWxaFz</a></i> when the char contains &#39;\\0&#39; it returns false"}, {"owner": {"reputation": 6024, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "edited": false, "score": 0, "creation_date": 1430380107, "post_id": 29951120, "comment_id": 48044187, "body": "In fact, &quot;false&quot; is zero in C and &#39;\\0&#39; is zero too."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4227915"}, "is_accepted": true, "score": 1, "last_activity_date": 1430331659, "last_edit_date": 1430331659, "creation_date": 1430330354, "answer_id": 29951120, "question_id": 29951063, "link": "https://stackoverflow.com/questions/29951063/how-to-add-a-number-to-each-character-of-a-string/29951120#29951120", "title": "how to add a number to each character of a string", "body": "<p>You need look some details:</p>\n\n<pre><code>// a void function should NOT return\n\nvoid code (char text[]){\n// when passing a string as argument, you don't need to indicate its' size\n\n    int i = 0; // pay attention to give a value when initializing\n\n    while (text[i] != '\\0') { // '\\0' indicates string's end...\n\n        // while not the end\n        text[i] += 13;    // same as text[i] = text[i] + 13;\n        i += 1;           // same as i = i + 1;\n\n    }\n\n    printf(\"%s\", text);\n    // the string was encoded\n}\n</code></pre>\n\n<hr>\n\n<p>Example:</p>\n\n<pre><code>char text[100];  // its' size is 100, but..\ngets(text);      // if you read \"hello\" from input/keyboard\n</code></pre>\n\n<p>the result will be:</p>\n\n<pre><code>value -&gt;        h  e  l  l  o  \\0 \n                |  |  |  |  |   |\nposition -&gt;     0  1  2  3  4   5  ....\n</code></pre>\n\n<p>Your text ends in position 5.... because that, you need search for '\\0', to find where the string ends..</p>\n\n<p>Hope it helps.</p>\n"}, {"tags": [], "owner": {"reputation": 3785, "user_id": 4427938, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/M6mua.png?s=128&g=1", "display_name": "Ayushi Jha", "link": "https://stackoverflow.com/users/4427938/ayushi-jha"}, "is_accepted": false, "score": 0, "last_activity_date": 1430336042, "last_edit_date": 1430336042, "creation_date": 1430330548, "answer_id": 29951173, "question_id": 29951063, "link": "https://stackoverflow.com/questions/29951063/how-to-add-a-number-to-each-character-of-a-string/29951173#29951173", "title": "how to add a number to each character of a string", "body": "<p><code>code</code> function should have a return type, if it does not require to return anything, set its type to <code>void</code>.<br/> A function prototype/definition should be present before you use it. <br/>The user may not necessarily input a string of a fixed length, so use the <code>strlen</code> function from the <code>string.h</code> header file to calculate the legth of input string.<br/> The standard definition of <code>main()</code> should be as <code>int main(){ return 0;}</code></p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\nvoid code(char []);\nint main()\n{\n    char text[100];\n    gets(text);\n    code (text);\n    return 0;\n}\n\nvoid code (char text[100])\n{\n    int i;\n    int length=strlen(text);\n    for(i=0;i&lt;=length;i++)\n    {\n        text[i]=text[i] + 13 ;\n    }\n    printf (\"%s\",text);\n    //return (0);\n}\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 5641540, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/0a475cbadcb629ce9a171c2263fadf35?s=128&d=identicon&r=PG", "display_name": "Alice1nw0", "link": "https://stackoverflow.com/users/5641540/alice1nw0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 767, "favorite_count": 0, "accepted_answer_id": 29951120, "answer_count": 2, "score": 0, "last_activity_date": 1430336042, "creation_date": 1430330172, "question_id": 29951063, "link": "https://stackoverflow.com/questions/29951063/how-to-add-a-number-to-each-character-of-a-string", "title": "how to add a number to each character of a string", "body": "<p>I have to code a function in C which which receives a string of characters and then adds to each character the number 13. I've come up with this solution :</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nmain() \n{\n     char text[100];\n     gets(text);\n     code (text);\n     }\n\n code (char text[100])\n{\n    int i;\n    for(i=0;i&lt;=98;i++)\n    {\n        text[i]=text[i] + 13 ;\n    }\n    printf (\"%s\",text);\n    return (0);\n\n}\n</code></pre>\n\n<p>Is this right?</p>\n"}, {"tags": ["c", "assembly", "x86", "sse", "simd"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 1, "creation_date": 1430330514, "post_id": 29951057, "comment_id": 48023204, "body": "Why not just use intrinsics ? You could have done this in a fraction of the time compared to doing it from scratch in asm, and it would be a lot more portable too."}, {"owner": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 2, "creation_date": 1430331090, "post_id": 29951057, "comment_id": 48023588, "body": "You are loading integers without converting to float, and trying to print floats with integer format too. PS: learn to use a debugger."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1430331400, "post_id": 29951057, "comment_id": 48023779, "body": "BTW <code>dec</code> affects the <code>Z</code> flag, so there is no need for <code>cmp ecx,0</code>"}, {"owner": {"reputation": 3705, "user_id": 1094430, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f18d3b966f55d07a050a890889b1005a?s=128&d=identicon&r=PG", "display_name": "StepTNT", "link": "https://stackoverflow.com/users/1094430/steptnt"}, "edited": false, "score": 0, "creation_date": 1430331464, "post_id": 29951057, "comment_id": 48023831, "body": "Care to explain the downvote? I edited the question with a new addition that I used to take care of the format problems but I still got the same result as before. Is the overall code correct?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1430331862, "post_id": 29951057, "comment_id": 48024081, "body": "I can&#39;t see what you are doing wrong in the output, but if you are computing <code>4^1</code> you will get 16, since the multiply loop iterates once. <code>xmm0</code> should be <code>1</code> at the start of the loop."}, {"owner": {"reputation": 19034, "user_id": 780717, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eead3a6ab011b880ca6ec354ca00f0b3?s=128&d=identicon&r=PG", "display_name": "njuffa", "link": "https://stackoverflow.com/users/780717/njuffa"}, "edited": false, "score": 2, "creation_date": 1430336839, "post_id": 29951057, "comment_id": 48027120, "body": "As Jester says, you need to <i>convert</i> inputs from integer to floating-point, and output from floating-point to integer. Your current code causes the integer input to be <i>re-interpreted</i> as a floating-point number, resulting in an extremely tiny number called a denormal (on the order of 10**-42). The product of those denormals is zero. This floating-point zero is then <i>re-interpreted</i> as an integer, thus the code prints zero."}], "answers": [{"comments": [{"owner": {"reputation": 3705, "user_id": 1094430, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f18d3b966f55d07a050a890889b1005a?s=128&d=identicon&r=PG", "display_name": "StepTNT", "link": "https://stackoverflow.com/users/1094430/steptnt"}, "edited": false, "score": 0, "creation_date": 1430379317, "post_id": 29953581, "comment_id": 48043734, "body": "Can you please give me some kind of reference to this function? I couldn&#39;t find it when I searched for a way to convert float to int, and having a link to check before asking may be helpful."}, {"owner": {"reputation": 13243, "user_id": 3512216, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Kg2sx.gif?s=128&g=1", "display_name": "rkhb", "link": "https://stackoverflow.com/users/3512216/rkhb"}, "reply_to_user": {"reputation": 3705, "user_id": 1094430, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f18d3b966f55d07a050a890889b1005a?s=128&d=identicon&r=PG", "display_name": "StepTNT", "link": "https://stackoverflow.com/users/1094430/steptnt"}, "edited": false, "score": 1, "creation_date": 1430394003, "post_id": 29953581, "comment_id": 48053103, "body": "@StepTNT: The <a href=\"http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html\" rel=\"nofollow noreferrer\">Intel manual</a> plus some Google hits (&quot;sse integer&quot;) plus a debugger (OllyDbg) plus some trials. ;-)"}], "tags": [], "owner": {"reputation": 13243, "user_id": 3512216, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Kg2sx.gif?s=128&g=1", "display_name": "rkhb", "link": "https://stackoverflow.com/users/3512216/rkhb"}, "is_accepted": true, "score": 2, "last_activity_date": 1430339033, "last_edit_date": 1430339033, "creation_date": 1430338246, "answer_id": 29953581, "question_id": 29951057, "link": "https://stackoverflow.com/questions/29951057/using-sse-to-mimic-the-standard-math-pow-function/29953581#29953581", "title": "Using SSE to mimic the standard Math.pow function", "body": "<p><code>MOVSS</code> moves single precision floats (32-bit). I assume that <code>n</code> is an integer so you can't load it into a XMM register with <code>MOVSS</code>. Use <code>CVTSI2SS</code> instead. <code>printf</code> cannot process single precision floats, which would converted to doubles by the compiler. It's convenient to use <code>CVTSS2SI</code> at this point. So the code should look like:</p>\n\n<pre><code>...\n    ;\n    ; pow is computed by doing n*n d times\n    ;\n\n    cvtsi2ss xmm0, [ebp+n]      ; load integer\n    sub ecx, 1                  ; first step (n^1) is done\n    cvtsi2ss xmm1, [ebp+n]      ; load integer\n\nloop:\n    mulss   xmm0, xmm1          ; scalar mult from sse\n    sub     ecx, 1\n    jnz     loop\n\n    cvtss2si eax, xmm0          ; result as integer\n\n    ;\n    ; Print using C's printf\n    ;\n    push    eax                 ; result\n    mov     ecx, [ebp-8]        ; copy the original d back since we used it as loop's counter\n    push    ecx                 ; exponent\n    push    ebx                 ; base\n    push    resmsg              ; string format\n    call    printf              ; printf call\n    add     esp, 16             ; clean the stack only from printf's vars\n...\n</code></pre>\n"}], "owner": {"reputation": 3705, "user_id": 1094430, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f18d3b966f55d07a050a890889b1005a?s=128&d=identicon&r=PG", "display_name": "StepTNT", "link": "https://stackoverflow.com/users/1094430/steptnt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 193, "favorite_count": 0, "accepted_answer_id": 29953581, "answer_count": 1, "score": 1, "last_activity_date": 1430339033, "creation_date": 1430330164, "last_edit_date": 1430331403, "question_id": 29951057, "link": "https://stackoverflow.com/questions/29951057/using-sse-to-mimic-the-standard-math-pow-function", "title": "Using SSE to mimic the standard Math.pow function", "body": "<p>I'm trying to learn how to work with <code>SSE</code> and I decided to realize a simple code that computes <code>n^d</code>, using a function that gets called by a <code>C</code> program.</p>\n\n<p>Here's my <code>NASM</code> code:</p>\n\n<pre><code>section .data\n\nresmsg:     db      '%d^%d = %d', 0\n\nsection .bss\n\nsection .text\n\nextern printf\n\n\n; ------------------------------------------------------------\n; Function called from a c program, I only use n and d parameters but I left the others\n; ------------------------------------------------------------\n\nglobal main\n\nT       equ     8\nn       equ     12\nd       equ     16\nm       equ     20\nSid     equ     24\nSn      equ     28\n\nmain:\n    ; ------------------------------------------------------------\n    ; Function enter sequence\n    ; ------------------------------------------------------------\n    push    ebp             ; save Base Pointer\n    mov     ebp, esp        ; Move Base Point to current frame\n    sub     esp, 8          ; reserve space for two local vars\n    push    ebx             ; save some registries (don't know if needed)\n    push    esi\n    push    edi\n\n    ; ------------------------------------------------------------\n    ; copy function's parameters to registries from stack\n    ; ------------------------------------------------------------\n    mov     eax, [ebp+T]        ; T\n    mov     ebx, [ebp+n]        ; n\n    mov     ecx, [ebp+d]        ; d\n    mov     edx, [ebp+m]        ; m\n    mov     esi, [ebp+Sid]      ; Sid\n    mov     edi, [ebp+Sn]       ; Sn    \n    mov     [ebp-8], ecx        ; copy ecx into one of the local vars\n\n    ;\n    ; pow is computed by doing n*n d times\n    ;\n    movss   xmm0, [ebp+n]   ; base\n    movss   xmm1, [ebp+n]   ; another copy of the base because xmm0 will be overwritten by the result\n\nloop:   mulss   xmm0, xmm1      ; scalar mult from sse\n        dec     ecx             ; counter--\n        cmp     ecx,0           ; check if counter is 0 to end loop\n        jnz     loop            ; \n\n    ;\n    ; let's store the result in eax by moving it to the stack and then copying to the registry (we use the other local var as support)\n    ;\n    movss   [ebp-4], xmm0       \n    mov     eax, [ebp-4]\n\n    ;\n    ; Print using C's printf\n    ;       \n    push    eax                 ; result\n    mov     ecx, [ebp-8]        ; copy the original d back since we used it as loop's counter\n    push    ecx                 ; exponent\n    push    ebx                 ; base\n    push    resmsg              ; string format\n    call    printf              ; printf call\n    add     esp, 24             ; clean the stack from both our local and printf's vars\n\n    ; ------------------------------------------------------------\n    ; Function exit sequence\n    ; ------------------------------------------------------------\n\n    pop edi                     ; restore the registries\n    pop esi\n    pop ebx\n    mov esp, ebp                ; restore the Stack Pointer\n    pop ebp                     ; restore the Base Pointer\n    ret                         ; get back to C program\n</code></pre>\n\n<p>Now, what I'd expect is it to print</p>\n\n<blockquote>\n  <p>4^2 = 16</p>\n</blockquote>\n\n<p>but, instead, I got</p>\n\n<blockquote>\n  <p>4^2 = 0</p>\n</blockquote>\n\n<p>I've spent my whole afternoon on this and I couldn't find a solution, do you have any hints?</p>\n\n<p>EDIT:</p>\n\n<p>Since it seems a format problem, I tried converting the data using </p>\n\n<pre><code>movss   [ebp-4], xmm0       \nfld     dword [ebp-4]\nmov     eax, dword [ebp-4]\n</code></pre>\n\n<p>instead of </p>\n\n<pre><code>movss   [ebp-4], xmm0       \nmov     eax, [ebp-4]\n</code></pre>\n\n<p>but I got the same result.</p>\n"}, {"tags": ["c", "recursion"], "comments": [{"owner": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 1, "creation_date": 1430330111, "post_id": 29951002, "comment_id": 48022962, "body": "<code>3%2 == 1</code> and <code>3&#47;2 == 1</code> so your function will jump to <code>4 * power(4,1) * power(4,1)</code>; <code>power(4,1)</code> will be converted to <code>4*power(4,0)*power(4,0)</code>, because <code>1%2 == 1</code> and <code>1&#47;2 == 0</code>, so final result is <code>4 * 4*power(4,0)*power(4,0) * 4*power(4,0)*power(4,0)</code> which is <code>4*4*4</code>"}, {"owner": {"reputation": 1579, "user_id": 3914988, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d14cff2139e905a6c46c29e4ec9163d2?s=128&d=identicon&r=PG&f=1", "display_name": "Tania", "link": "https://stackoverflow.com/users/3914988/tania"}, "reply_to_user": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 0, "creation_date": 1430330210, "post_id": 29951002, "comment_id": 48023024, "body": "@Lashane My question is how does power(4,1) return 4"}, {"owner": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 0, "creation_date": 1430330231, "post_id": 29951002, "comment_id": 48023037, "body": "@Tania I&#39;ve updated comment"}, {"owner": {"reputation": 1579, "user_id": 3914988, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d14cff2139e905a6c46c29e4ec9163d2?s=128&d=identicon&r=PG&f=1", "display_name": "Tania", "link": "https://stackoverflow.com/users/3914988/tania"}, "reply_to_user": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 0, "creation_date": 1430330459, "post_id": 29951002, "comment_id": 48023174, "body": "@Lashane I sorta seem to get it now."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1430331134, "post_id": 29951002, "comment_id": 48023607, "body": "the very first &#39;if&#39; checks for a power of 0 and returns 1."}], "answers": [{"comments": [{"owner": {"reputation": 1579, "user_id": 3914988, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d14cff2139e905a6c46c29e4ec9163d2?s=128&d=identicon&r=PG&f=1", "display_name": "Tania", "link": "https://stackoverflow.com/users/3914988/tania"}, "edited": false, "score": 0, "creation_date": 1430330551, "post_id": 29951078, "comment_id": 48023235, "body": "Thanks for mentioning the algorithm @haccks. Can you please explain why would we want to apply it here?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 1579, "user_id": 3914988, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d14cff2139e905a6c46c29e4ec9163d2?s=128&d=identicon&r=PG&f=1", "display_name": "Tania", "link": "https://stackoverflow.com/users/3914988/tania"}, "edited": false, "score": 0, "creation_date": 1430330847, "post_id": 29951078, "comment_id": 48023419, "body": "@Tania it&#39;s because it is a recursive function. The function itself does not calculate any powers, until the power has been halved until it is either 0 or 1."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 1579, "user_id": 3914988, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d14cff2139e905a6c46c29e4ec9163d2?s=128&d=identicon&r=PG&f=1", "display_name": "Tania", "link": "https://stackoverflow.com/users/3914988/tania"}, "edited": false, "score": 0, "creation_date": 1430330895, "post_id": 29951078, "comment_id": 48023456, "body": "@Tania; Added the explanation."}, {"owner": {"reputation": 98839, "user_id": 3848, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/W10YY.jpg?s=128&g=1", "display_name": "Motti", "link": "https://stackoverflow.com/users/3848/motti"}, "edited": false, "score": 2, "creation_date": 1430332352, "post_id": 29951078, "comment_id": 48024346, "body": "Cute but you need a halting condition for zero.  Fails for <code>pow(2,0)</code>"}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 98839, "user_id": 3848, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/W10YY.jpg?s=128&g=1", "display_name": "Motti", "link": "https://stackoverflow.com/users/3848/motti"}, "edited": false, "score": 0, "creation_date": 1430332857, "post_id": 29951078, "comment_id": 48024662, "body": "@Motti; Good catch :). A shorter version for you: <code>int power(int x, unsigned int y) {     if( y == 0)         return 1;     if (y%2 == 0)           return power(x*x, y&#47;2);     else          return x*power(x*x, y&#47;2); } </code> :)"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1430335695, "post_id": 29951078, "comment_id": 48026421, "body": "It almost makes more sense just to declare the function and <code>x</code> and <code>t</code> as <code>long</code>, since any type capable of promotion will be accepted. <code>y</code> is fine. You need something larger than <code>power (2, 32) - 1</code> as the exponent and you need another method and library to handle the results for anything other than the trivial case."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1430337872, "post_id": 29951078, "comment_id": 48027674, "body": "@DavidC.Rankin; Agreed, but actually I just explained how the algorithm works."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1430338896, "post_id": 29951078, "comment_id": 48028271, "body": "Agreed, it was more of a <b>tongue-in-cheek</b> suggestion for you <code>:p</code> (great answer by the way)"}], "tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": true, "score": 10, "last_activity_date": 1553030008, "last_edit_date": 1553030008, "creation_date": 1430330218, "answer_id": 29951078, "question_id": 29951002, "link": "https://stackoverflow.com/questions/29951002/c-implementation-of-power-function/29951078#29951078", "title": "C implementation of power function", "body": "<p>The algorithm used is <a href=\"http://en.wikipedia.org/wiki/Exponentiation_by_squaring\" rel=\"nofollow noreferrer\">exponentiation by squaring</a>. It is divided into two parts, for a positive integer <code>n</code> </p>\n\n<p><img src=\"https://i.stack.imgur.com/s55sL.png\" alt=\"enter image description here\">   </p>\n\n<p>Therefore, the above function, for even exponent will return </p>\n\n<pre><code>power(x, y/2)*power(x, y/2);  \n</code></pre>\n\n<p>and for odd exponent will return  </p>\n\n<pre><code>x*power(x, y/2)*power(x, y/2);   \n</code></pre>\n\n<p>It will calculate the power in order <code>log(n)</code> time.  </p>\n\n<p>For 2<sup>5</sup> it will be executed as:</p>\n\n<ul>\n<li><code>5</code> is odd therefore <code>return 2*power(2, 5/2)*power(2, 5/2)</code> will be executed. </li>\n<li><code>5/2 = 2</code>, an even therefore <code>return power(2, 2/2)*power(2, 2/2)</code> will be executed.   </li>\n<li><code>2/2 = 1</code> is odd therefore <code>return 2*power(2, 1/2)*power(2, 1/2)</code> will be executed.  </li>\n<li><code>1/2 = 0</code>, base condition therefore for both of <code>power(2, 1/2)</code>, <code>1</code> will be returned.   </li>\n</ul>\n\n<p>So,   </p>\n\n<ul>\n<li><code>return 2*power(2, 1/2)*power(2, 1/2)</code> will return <code>2*1*1 = 2</code> to its caller.  </li>\n<li><code>return power(2, 2/2)*power(2, 2/2)</code> will return <code>2*2 = 4</code> to its caller.  </li>\n<li><code>return 2*power(2, 5/2)*power(2, 5/2)</code> will return <code>2*4*4 = 32</code> to its caller.  </li>\n</ul>\n\n<p>A more efficient version would be  </p>\n\n<pre><code>int power(int x, unsigned int y)\n{\n    if( y == 0)\n        return 1;\n\n    int t = power(x, y/2);  // power is called only once instead of twice.\n\n    return y%2 ? x*t*t : t*t;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 2, "creation_date": 1430331610, "post_id": 29951271, "comment_id": 48023925, "body": "This defeats the whole purpose of doing the divide-and-conquer recursion."}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "reply_to_user": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 0, "creation_date": 1430341380, "post_id": 29951271, "comment_id": 48029721, "body": "For sure, but as he said he was a beginner, I assumed he would want to see a &quot;simple&quot; recursion example."}], "tags": [], "owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "is_accepted": false, "score": 0, "last_activity_date": 1430330841, "creation_date": 1430330841, "answer_id": 29951271, "question_id": 29951002, "link": "https://stackoverflow.com/questions/29951002/c-implementation-of-power-function/29951271#29951271", "title": "C implementation of power function", "body": "<p>For simplicity, the following does a power and demonstrates recursion in an easier to understand manner:</p>\n\n<pre><code>\nint power(int x, unsigned int y)\n{\n    if( y == 0)\n        return 1;\n\n    return x * power(x, y-1);\n}\n</code></pre>\n\n<p>This shows a simple way to use recursion to handle a power calc.  The method you have will still roughly do what this does, but it's maximum stack depth will be much better (it will recurse less) because it divides the work up a bit better.</p>\n\n<p>Not sure why you'd use either in the real world though.  Iteration would probably be far superior, or perhaps a logarithm - multiply exponent - antilog approach (which would handle franctional exponents as well).  </p>\n\n<p>In addition, this type of calculation is also prone to overflow integer values  really, really fast as well so please beware.</p>\n"}], "owner": {"reputation": 1579, "user_id": 3914988, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d14cff2139e905a6c46c29e4ec9163d2?s=128&d=identicon&r=PG&f=1", "display_name": "Tania", "link": "https://stackoverflow.com/users/3914988/tania"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1881, "favorite_count": 0, "accepted_answer_id": 29951078, "answer_count": 2, "score": 5, "last_activity_date": 1553030008, "creation_date": 1430330007, "question_id": 29951002, "link": "https://stackoverflow.com/questions/29951002/c-implementation-of-power-function", "title": "C implementation of power function", "body": "<p>I am a beginner trying to comprehend this innocent C function:\nGiven two numbers x and y, this function computes the power of x raised to y.</p>\n\n<pre><code>/* Function to calculate x raised to the power y */\nint power(int x, unsigned int y)\n{\n    if( y == 0)\n        return 1;\n    else if (y%2 == 0)\n        return power(x, y/2)*power(x, y/2); //what's happening here?\n    else\n        return x*power(x, y/2)*power(x, y/2);\n}\n</code></pre>\n\n<p>I am trying hard to trace the part where they multiply the return values from two functions. Suppose I pass in 4 and 3 as x and y, My function jumps to the second else part. and I return <code>4*(power(4,1)*power(4,1))</code>\nas far as my understanding goes, the next call is to <code>4*power(4,0)*power(4*0)</code> and since y==0 returns 1, it should be 4*1*1 where I want 4*4*4. I am missing something here. What is this algorithm exactly doing?</p>\n\n<p>The logic behind this function is to multiply x, y times. Can anyone please tell me how this simple division arithmetic (or divide and conquer) results in realizing the logic?  Thanks in advance.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1430330127, "post_id": 29950949, "comment_id": 48022978, "body": "Have you tried using your debugger ?"}], "answers": [{"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1430330476, "post_id": 29951051, "comment_id": 48023185, "body": "Indeed there isn&#39;t a single <code>malloc()</code> or <code>calloc()</code> or even <code>realloc()</code> in the code."}], "tags": [], "owner": {"reputation": 1632, "user_id": 4178025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/159c588df64aaa5d1b2c96c1461e85cf?s=128&d=identicon&r=PG&f=1", "display_name": "Diego", "link": "https://stackoverflow.com/users/4178025/diego"}, "is_accepted": false, "score": 3, "last_activity_date": 1430330143, "creation_date": 1430330143, "answer_id": 29951051, "question_id": 29950949, "link": "https://stackoverflow.com/questions/29950949/tree-structure-segmentation-fault/29951051#29951051", "title": "Tree structure segmentation fault", "body": "<blockquote>\n<pre><code>  struct Node *pNode=NULL;\n  pNode-&gt;m_freq=freq;\n</code></pre>\n</blockquote>\n\n<p>One of the reasons is dereferencing the NULL pointer in the quoted code block above.</p>\n\n<p>Memory must be allocated before using the pointer. Like this:</p>\n\n<pre><code>struct Node *pNode = malloc (sizeof *pNode);\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 3865461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98a43883624bc1a8f60659993de1acfd?s=128&d=identicon&r=PG&f=1", "display_name": "user3865461", "link": "https://stackoverflow.com/users/3865461/user3865461"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1430330164, "creation_date": 1430329806, "last_edit_date": 1430330164, "question_id": 29950949, "link": "https://stackoverflow.com/questions/29950949/tree-structure-segmentation-fault", "title": "Tree structure segmentation fault", "body": "<p>Segmentation fault (core dumped), please help. I don't understand what I did wrong. The code compiles but I get the error above. I understand that the code tries to access memory that it can't, but I don't see where it is happening.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint freq[256] = {0};\n\nstruct Node\n{\n  unsigned char m_ch;\n  int m_freq;\n  struct Node *m_ls,*m_rs;\n  struct Node *m_hls,*m_hrs;\n};\n\nstruct Node* createNode(int freq,char ch);\nvoid insertTree(struct Node **root,struct Node * n);\nstruct Node* getBinTree(FILE *fsrc);\nvoid inorder(struct Node *root);\n\nint main()\n{\n  FILE *fsrc;\n  struct Node *tree=NULL;\n  fsrc = fopen(\"src.txt\",\"rb\");\n  tree=getBinTree(fsrc);\n  inorder(tree);\n  return 1;\n}\n\n\nstruct Node* createNode(int freq,char ch)\n{\n    struct Node *pNode=NULL;\n    pNode-&gt;m_freq=freq;\n    pNode-&gt;m_ch=ch;\n    return pNode;\n}\n\nvoid insertTree(struct Node **root,struct Node *n)\n{\n  if(!(*root))\n  {\n    *root=n;\n    return;\n  }\n  if(n-&gt;m_freq&lt;(*root)-&gt;m_freq)\n  {\n    insertTree(&amp;(*root)-&gt;m_ls,n);\n  }\n  else\n  {\n    insertTree(&amp;(*root)-&gt;m_rs,n);\n  }\n}\n\nstruct Node* getBinTree(FILE *fsrc)\n{\n  struct Node *temp=NULL;\n  struct Node **root=NULL;\n  int c,i;\n  while ((c = fgetc(fsrc)) != EOF)\n  {\n    freq[c]++;\n  }\n  freq[255]=1;\n  fclose(fsrc);\n  for(i=0;i&lt;256;i++)\n  {\n    if(freq[i]&gt;0)\n    {\n      temp=createNode(freq[i],i);\n      insertTree(root,temp);\n    }\n  }\n}\n\nvoid inorder(struct Node *root)\n{\nif(root != NULL)\n   {\n     inorder(root-&gt;m_ls);\n     printf(\" %d\\n\",root-&gt;m_freq);\n     inorder(root-&gt;m_rs);\n   }\n   return;\n}\n</code></pre>\n"}, {"tags": ["c", "listview", "winapi"], "answers": [{"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 0, "last_activity_date": 1430330477, "creation_date": 1430330477, "answer_id": 29951151, "question_id": 29950909, "link": "https://stackoverflow.com/questions/29950909/lvm-getitem-confusion/29951151#29951151", "title": "LVM_GETITEM confusion", "body": "<blockquote>\n  <p>I'm not sure I understand what does the highlighted text means, does it mean that the buffer that I set to the pszText member could not be used, but rather the pszText member could map to a string that is placed elsewhere in memory?</p>\n</blockquote>\n\n<p>Yes, that is exactly what it means.</p>\n"}], "owner": {"reputation": 521, "user_id": 4582812, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/7a1b31917b1c556fd426c990c21019b3?s=128&d=identicon&r=PG&f=1", "display_name": "user4582812", "link": "https://stackoverflow.com/users/4582812/user4582812"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 29951151, "answer_count": 1, "score": 1, "last_activity_date": 1430330477, "creation_date": 1430329673, "question_id": 29950909, "link": "https://stackoverflow.com/questions/29950909/lvm-getitem-confusion", "title": "LVM_GETITEM confusion", "body": "<p>The <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb774953%28v=vs.85%29.aspx\" rel=\"nofollow noreferrer\"><code>LVM_GETITEM</code></a> message documentation says:</p>\n\n<p><img src=\"https://i.stack.imgur.com/csNvM.jpg\" alt=\"enter image description here\"></p>\n\n<p>I'm not sure I understand what does the highlighted text means, does it mean that the buffer that I set to the <code>pszText</code> member could not be used, but rather the <code>pszText</code> member could map to a string that is placed elsewhere in memory?</p>\n"}, {"tags": ["c", "errno"], "comments": [{"owner": {"reputation": 6065, "user_id": 864027, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3f26a415e9299390c5090b6150a39b30?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/864027/daniel"}, "edited": false, "score": 1, "creation_date": 1430328696, "post_id": 29950585, "comment_id": 48022114, "body": "If you don&#39;t access any of the functionality, why would you need to include it?"}], "answers": [{"tags": [], "owner": {"reputation": 2556, "user_id": 3488231, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/da4ac79b71c44d696f3567d4b53f6239?s=128&d=identicon&r=PG&f=1", "display_name": "user12205", "link": "https://stackoverflow.com/users/3488231/user12205"}, "is_accepted": true, "score": 3, "last_activity_date": 1430329508, "last_edit_date": 1430329508, "creation_date": 1430328752, "answer_id": 29950646, "question_id": 29950585, "link": "https://stackoverflow.com/questions/29950585/include-errno-if-not-accessed-directly/29950646#29950646", "title": "include errno if not accessed directly", "body": "<p>You don't need <code>&lt;errno.h&gt;</code> if you use only <code>perror()</code>.</p>\n\n<p>From the <em>Linux Programmer's Manual</em>:</p>\n\n<pre><code>NAME\n       perror - print a system error message\n\nSYNOPSIS\n       #include &lt;stdio.h&gt;\n\n       void perror(const char *s);\n\n       #include &lt;errno.h&gt;\n\n       const char *sys_errlist[];\n       int sys_nerr;\n       int errno;\n</code></pre>\n\n<p>This means that you need <code>&lt;errno.h&gt;</code> only if you use <code>sys_errlist</code>, <code>sys_nerr</code> or <code>errno</code>. Note that <code>sys_errlist</code> and <code>sys_nerr</code> are BSD extensions.</p>\n\n<p>Similar entries can also be found on the C99 standard.</p>\n\n<blockquote>\n  <p>7.19.10.4 The perror function</p>\n  \n  <p>Synopsis</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nvoid perror(const char *s);\n</code></pre>\n</blockquote>\n\n<p>And you need <code>&lt;errno.h&gt;</code> only if you use the following:</p>\n\n<blockquote>\n  <p>7.5 Errors </p>\n  \n  <p>1 The header <code>&lt;errno.h&gt;</code> defines several macros, all relating to the reporting of error conditions.</p>\n  \n  <p>2 The macros are</p>\n\n<pre><code>EDOM\nEILSEQ\nERANGE\n</code></pre>\n  \n  <p>which expand to integer constant expressions with\n  type <code>int</code>, distinct positive values, and which are suitable for use in\n  <code>#if</code> preprocessing directives; and</p>\n\n<pre><code>errno\n</code></pre>\n  \n  <p>which expands to a modifiable lvalue <sup>175)</sup> that has type <code>int</code>, the value of which is set to a positive\n  error number by several library functions.</p>\n  \n  <p>[...]</p>\n  \n  <p>4\n  Additional macro definitions, beginning with <code>E</code> and a digit or <code>E</code> and an\n  uppercase letter, <sup>177)</sup> may also be specified by the implementation.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "is_accepted": false, "score": 2, "last_activity_date": 1430328818, "creation_date": 1430328818, "answer_id": 29950667, "question_id": 29950585, "link": "https://stackoverflow.com/questions/29950585/include-errno-if-not-accessed-directly/29950667#29950667", "title": "include errno if not accessed directly", "body": "<ul>\n<li>malloc() requires stdlib.h</li>\n<li>perror() requires stdio.h</li>\n<li>exit() requires stdlib.h</li>\n</ul>\n\n<p>So nothing here requires errno.h</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4259083"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 210, "favorite_count": 0, "accepted_answer_id": 29950646, "answer_count": 2, "score": 3, "last_activity_date": 1430329508, "creation_date": 1430328556, "question_id": 29950585, "link": "https://stackoverflow.com/questions/29950585/include-errno-if-not-accessed-directly", "title": "include errno if not accessed directly", "body": "<p>Do i need to include <code>errno.h</code> even if i don't access <code>errno</code> directly? Eg.</p>\n\n<pre><code>void *mem = malloc(16384);\nif (mem == NULL) {\n    perror(\"malloc\");\n    exit(EXIT_FAILURE);\n}\n</code></pre>\n\n<p>I tried a simple piece of code like this without including <code>errno.h</code> and it worked, but i'm not sure if it's OK to do this. Maybe <code>errho.h</code> is also included in other libraries like <code>stdlib.h</code> and so i don't need to explicitly include it myself?</p>\n"}, {"tags": ["c", "linux"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1430328701, "post_id": 29950519, "comment_id": 48022119, "body": "<code>printf()</code> is not async-safe, AFAIK. Your program is meaningless."}], "answers": [{"tags": [], "owner": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "is_accepted": true, "score": 2, "last_activity_date": 1430328779, "creation_date": 1430328779, "answer_id": 29950657, "question_id": 29950519, "link": "https://stackoverflow.com/questions/29950519/why-we-call-the-signal-function-in-the-start-of-the-linux-c-program/29950657#29950657", "title": "Why we call the signal function in the start of the linux c program?", "body": "<p>Putting it at the end means it will come after the <code>while (1) ...</code> loop, so no, you can't put it in the end, because it would never be executed.</p>\n\n<p>Also, pay attention to the code you place inside signal handlers: It is not safe to call <code>printf()</code> inside a signal handler.</p>\n"}], "owner": {"reputation": 3, "user_id": 4698159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adebb316a5c5c385c824c47f34ba7d08?s=128&d=identicon&r=PG&f=1", "display_name": "carlael", "link": "https://stackoverflow.com/users/4698159/carlael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 29950657, "answer_count": 1, "score": 0, "last_activity_date": 1430328779, "creation_date": 1430328333, "last_edit_date": 1430328670, "question_id": 29950519, "link": "https://stackoverflow.com/questions/29950519/why-we-call-the-signal-function-in-the-start-of-the-linux-c-program", "title": "Why we call the signal function in the start of the linux c program?", "body": "<p>The program is very simple, I have a handler function named <code>fintr()</code> and the program is:</p>\n\n<pre><code>void fintr();\n\nint main() {\n    int i;\n    signal(SIGINT,fintr);\n    while(1) {\n        printf(\"*\");\n    }\n    return 0;\n}\n\nvoid fintr() {\n    printf(\"signal received\");\n    exit(1);\n}\n</code></pre>\n\n<p>Can I put <code>signal(SIGINT,fintr);</code> at the end of the function <code>main()</code>? And why do we have to put it in the beginning of <code>main()</code>?</p>\n"}, {"tags": ["c", "arrays", "memory", "free", "pointers"], "comments": [{"owner": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "edited": false, "score": 1, "creation_date": 1430328355, "post_id": 29950451, "comment_id": 48021909, "body": "Essentially the same thing, but in reverse order: first, free every <code>(*pA)[i]</code>, then free <code>*pA</code>. You might want to redesign your code though. It is rarely a good sign when things like <code>int ***</code> start showing up."}, {"owner": {"reputation": 21, "user_id": 4847098, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x41d6.png?s=128&g=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/4847098/brian"}, "reply_to_user": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "edited": false, "score": 0, "creation_date": 1430328579, "post_id": 29950451, "comment_id": 48022056, "body": "If you were doing it, can you show me how you would do this?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1430329754, "post_id": 29950451, "comment_id": 48022737, "body": "much better to use a function prototype of :  &#39;void * allocArray( int nodeLength, int numRow, int numCol )  the inside the function: void * theArray = NULL;    then allocate the row pointers and clear them all to NULL.  then, allocate each row of columns.   It would be better is the initialization of the row columns be initialized separately rather that as part of the allocation of the array."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1430329846, "post_id": 29950451, "comment_id": 48022803, "body": "when calling malloc() (and family of functions) 1) in C, do not cast the returned value.  2) always check (!=NULL) the returned value to assure the operation was successful."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1430330316, "post_id": 29950451, "comment_id": 48023088, "body": "the initial result from calling malloc for the row pointers should have the resulting allocated memory set to NULLs.  Then if any problem occurs, freeing the memory will be a simple loop (passing NULL to free() is ok)"}], "answers": [{"comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1430329049, "post_id": 29950650, "comment_id": 48022322, "body": "@AlterMann, He needs <code>row</code>, not <code>column</code>. <code>column</code> is used only determine the size to be used in the call to <code>malloc</code>. There are only <code>row</code> number of calls to <code>malloc</code>. Hence, there has be <code>row</code> number of calls to <code>free</code>."}, {"owner": {"reputation": 21, "user_id": 4847098, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x41d6.png?s=128&g=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/4847098/brian"}, "edited": false, "score": 0, "creation_date": 1430337373, "post_id": 29950650, "comment_id": 48027415, "body": "Thanks R Sahu!, you&#39;re a amazing pro!"}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1430328938, "last_edit_date": 1430328938, "creation_date": 1430328757, "answer_id": 29950650, "question_id": 29950451, "link": "https://stackoverflow.com/questions/29950451/how-to-free-a-two-dimensional-array-allocated-memory-using-int-ptr/29950650#29950650", "title": "How to free a two dimensional array allocated memory using int ** ptr", "body": "<p>For every call to <code>malloc</code>, there has to be a corresponding call to  <code>free</code>. The call to <code>free</code> has to use the same pointer value that was returned by corresponding call to <code>malloc</code>.</p>\n\n<p>In your case, you have the following lines that use <code>malloc</code> to allocate memory.</p>\n\n<pre><code>*pA = (int **) malloc(row * sizeof(int *));\nfor (int i =0; i&lt;row; ++i)\n{\n    (*pA)[i] = (int *) malloc( column * sizeof(int));\n}\n</code></pre>\n\n<p>There has to be <code>row</code> number of calls to <code>free</code>, using the valus stored in <code>(*pA)</code>.</p>\n\n<p>And then, there has to be one call to <code>free</code>, using <code>*pA</code>.</p>\n\n<p>Now, you can implement <code>freeArray</code> as:</p>\n\n<pre><code>// No need for using int ***. You are not going to modify pA\n// You are just going to use the pointer.\n// You don't need column in this function.\n\nvoid freeArray( int ** pA, int row)\n{\n    for (int i =0; i&lt;row; ++i)\n    {\n        free(pA[i]);\n    }\n    free(pA);\n}\n</code></pre>\n\n<p>And call it from <code>test_array_allocation</code> using:</p>\n\n<pre><code>freeArray(pA, row);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 4847098, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x41d6.png?s=128&g=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/4847098/brian"}, "edited": false, "score": 0, "creation_date": 1430337326, "post_id": 29950837, "comment_id": 48027394, "body": "Thanks wrtmu,  you&#39;re amazingly a pro!"}, {"owner": {"reputation": 21, "user_id": 4847098, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x41d6.png?s=128&g=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/4847098/brian"}, "edited": false, "score": 0, "creation_date": 1430337527, "post_id": 29950837, "comment_id": 48027499, "body": "Thanks for the tip using valgrind!"}], "tags": [], "owner": {"reputation": 691, "user_id": 1291457, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0c2de53b1653add71f472e35a12b856c?s=128&d=identicon&r=PG", "display_name": "Charles", "link": "https://stackoverflow.com/users/1291457/charles"}, "is_accepted": false, "score": 2, "last_activity_date": 1430330394, "last_edit_date": 1430330394, "creation_date": 1430329379, "answer_id": 29950837, "question_id": 29950451, "link": "https://stackoverflow.com/questions/29950451/how-to-free-a-two-dimensional-array-allocated-memory-using-int-ptr/29950837#29950837", "title": "How to free a two dimensional array allocated memory using int ** ptr", "body": "<blockquote>\n  <p>If you were doing it, can you show me how you would do this?</p>\n</blockquote>\n\n<p>Here's how I would implement this. I've never implemented 2d arrays in C before, fun bit of code to write.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nvoid*\nxmalloc(size_t n)\n{\n  void* p = malloc(n);\n  if (p == NULL)\n    {\n      printf(\"I handle my errors!\\n\");\n      exit(EXIT_FAILURE);\n    }\n  return p;\n}\n\nint**\nalloc2dArray(unsigned rows, unsigned cols)\n{\n  int** r = xmalloc(sizeof(int*) * rows);\n  for (int i = 0; i &lt; rows; i++)\n    r[i] = xmalloc(sizeof(int) * cols);\n  return r;\n}\n\nvoid\nprint2dArray(int** a, unsigned rows, unsigned cols)\n{\n  for (int i = 0; i &lt; rows; i++) \n    {\n      for (int j = 0; j &lt; cols; j++)\n      printf(\"%4d\", a[i][j]);\n      putchar('\\n');\n    }\n}\n\nvoid\nfree2dArray(int** x, unsigned rows)\n{\n  for (int i = 0; i &lt; rows; i++)\n    free(x[i]);\n  free(x);\n}\n\nint main(void)\n{\n  int** x = alloc2dArray(10, 14);\n\n  for (int i = 0; i &lt; 10; i++)\n    for (int j = 0; j &lt; 14; j++)\n      x[i][j] = i*j;\n\n  print2dArray(x, 10, 14);\n  free2dArray(x, 10);\n\n  return 0;\n}\n</code></pre>\n\n<p>Another tip you might not be aware of: you can use <code>valgrind</code> on GNU/Linux to verify that you deallocated correctly:</p>\n\n<pre><code>==9322== HEAP SUMMARY:\n==9322==     in use at exit: 0 bytes in 0 blocks\n==9322==   total heap usage: 11 allocs, 11 frees, 640 bytes allocated\n==9322== \n==9322== All heap blocks were freed -- no leaks are possible\n==9322== \n==9322== For counts of detected and suppressed errors, rerun with: -v\n==9322== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1430330065, "creation_date": 1430330065, "answer_id": 29951012, "question_id": 29950451, "link": "https://stackoverflow.com/questions/29950451/how-to-free-a-two-dimensional-array-allocated-memory-using-int-ptr/29951012#29951012", "title": "How to free a two dimensional array allocated memory using int ** ptr", "body": "<p>for this function:</p>\n\n<pre><code>void freeArray( int *** pA, int row, int column)\n{\n\n}\n</code></pre>\n\n<p>the parameter 'column' is not needed.</p>\n\n<pre><code>void freeArray( int **pA, int row )\n{\n    for( int i = 0; i &lt; row; i++ )\n    {\n        free( pA[i] );\n    }\n    free( pA );\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 4847098, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x41d6.png?s=128&g=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/4847098/brian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 770, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1430330394, "creation_date": 1430328090, "last_edit_date": 1430328233, "question_id": 29950451, "link": "https://stackoverflow.com/questions/29950451/how-to-free-a-two-dimensional-array-allocated-memory-using-int-ptr", "title": "How to free a two dimensional array allocated memory using int ** ptr", "body": "<p>How to free a two dimensional array using a function allocated memory using int ** ptr?</p>\n\n<p>For example I use <code>allocArray( &amp;ptrArray, row, column);</code> to allocate the array.\nWhat is the proper procedure to free the allocated memory using this function:\n<code>void freeArray( int *** pA, int row, int column)</code></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nvoid allocArray( int *** pA, int row, int column)\n{\n    int i, j, count;\n\n    *pA = (int **) malloc(row * sizeof(int *));\n    for (int i =0; i&lt;row; ++i)\n    {\n        (*pA)[i] = (int *) malloc( column * sizeof(int));\n    }\n    // Note that pA[i][j] is same as *(*(pA+i)+j)\n    count = 0;\n    for (i = 0; i &lt;  row ; i++)\n        for (j = 0; j &lt; column; j++)\n            (*pA)[i][j] = ++count;  // OR *(*(pA+i)+j) = ++count\n\n    for (i = 0; i &lt;  row; i++)  {\n        for (j = 0; j &lt; column; j++)  {\n            printf(\"%d \", (*pA)[i][j]);\n        }\n        printf(\"\\n\");\n    }\n}\n\n// How to free a two dimensional array  allocated memory using int ** ptr?\nvoid freeArray( int *** pA, int row, int column)\n{\n\n}\n\nvoid test_array_allocation()\n{\n    int i, j;\n    int row = 3, column = 4;\n    int ** ptrArray;\n\n    allocArray( &amp;ptrArray, row, column);\n\n    printf(\"test_array_allocation\\n\");\n    for (i = 0; i &lt;  row; i++)  {\n        for (j = 0; j &lt; column; j++)  {\n            printf(\"%d \", (ptrArray)[i][j]);\n        }\n        printf(\"\\n\");\n    }\n    freeArray(&amp;ptrArray, row, column); // free allocated memory  \n}\n\nint main(int argc, const char * argv[]) {\n    test_array_allocation();  \n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "segmentation-fault", "malloc"], "comments": [{"owner": {"reputation": 6065, "user_id": 864027, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3f26a415e9299390c5090b6150a39b30?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/864027/daniel"}, "edited": false, "score": 0, "creation_date": 1430329133, "post_id": 29950444, "comment_id": 48022373, "body": "What line number is given for the error?"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 4593971, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b444921d07921c92722655ccc36c00ea?s=128&d=identicon&r=PG&f=1", "display_name": "Conor", "link": "https://stackoverflow.com/users/4593971/conor"}, "edited": false, "score": 0, "creation_date": 1430328828, "post_id": 29950541, "comment_id": 48022193, "body": "unfortunately this isn&#39;t the issue. You&#39;re right, my function to make the vector used to assign N+1 spaces so I could pretend that the array ran from 1 to N. On applying this change I do seem to no longer get the malloc error, but the Seg fault remains"}, {"owner": {"reputation": 6065, "user_id": 864027, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3f26a415e9299390c5090b6150a39b30?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/864027/daniel"}, "reply_to_user": {"reputation": 23, "user_id": 4593971, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b444921d07921c92722655ccc36c00ea?s=128&d=identicon&r=PG&f=1", "display_name": "Conor", "link": "https://stackoverflow.com/users/4593971/conor"}, "edited": false, "score": 0, "creation_date": 1430329067, "post_id": 29950541, "comment_id": 48022329, "body": "@Conor Perhaps we can see your <code>make_complex_vector</code> function as well as the other functions that are declared but not defined in the code that you have provided?"}, {"owner": {"reputation": 23, "user_id": 4593971, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b444921d07921c92722655ccc36c00ea?s=128&d=identicon&r=PG&f=1", "display_name": "Conor", "link": "https://stackoverflow.com/users/4593971/conor"}, "edited": false, "score": 0, "creation_date": 1430329410, "post_id": 29950541, "comment_id": 48022542, "body": "hey man thanks for your help. I was just about to post these functions when I realised that the mistake is just that w requires more space then the others and I hadn&#39;t given it enough. Problem solved, sorry for being such a noob, thanks for your time :) @Daniel"}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1430329583, "post_id": 29950541, "comment_id": 48022639, "body": "Go ahead and answer as such and close the thread then, when you get a chance."}, {"owner": {"reputation": 6065, "user_id": 864027, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3f26a415e9299390c5090b6150a39b30?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/864027/daniel"}, "reply_to_user": {"reputation": 23, "user_id": 4593971, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b444921d07921c92722655ccc36c00ea?s=128&d=identicon&r=PG&f=1", "display_name": "Conor", "link": "https://stackoverflow.com/users/4593971/conor"}, "edited": false, "score": 0, "creation_date": 1430329641, "post_id": 29950541, "comment_id": 48022673, "body": "@Conor No problem. Just as a side-point, allocating N+1 elements for an array and not using position 0 is <i>very</i> non-colloquial for C.  Most C programmers would be extremely confused to see a loop going from 1 and with a &lt;= N condition. For the sake of making your code understandable, don&#39;t do that."}], "tags": [], "owner": {"reputation": 6065, "user_id": 864027, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3f26a415e9299390c5090b6150a39b30?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/864027/daniel"}, "is_accepted": false, "score": 1, "last_activity_date": 1430328934, "last_edit_date": 1430328934, "creation_date": 1430328400, "answer_id": 29950541, "question_id": 29950444, "link": "https://stackoverflow.com/questions/29950444/segmentation-fault-malloc-error/29950541#29950541", "title": "segmentation fault / malloc error?", "body": "<p>You are iterating from 1 -> N and assigning to <code>y</code>.  In C, arrays are 0-indexed. For example, if you create an array of size 5, the elements are numbered like so:</p>\n\n<p><code>[a[0], a[1], a[2], a[3], a[4]]</code> (5 elements, numbered 0-4)</p>\n\n<p>So instead of</p>\n\n<pre><code>for(i = 1; i &lt;= N; i++)\n</code></pre>\n\n<p>what you really want is</p>\n\n<pre><code>for(i = 0; i &lt; N; i++)\n</code></pre>\n\n<p>Otherwise, you are going to write past the end of the allocated memory. If you want the first element of the vector to be 1, write something like this:</p>\n\n<pre><code>for(i = 0; i &lt; N; i++)\n{\n    y[i] = i + 1;\n}\n</code></pre>\n\n<p>(I am assuming that <code>make_complex_vector(N)</code> allocates an array of size <code>N</code>).</p>\n"}], "owner": {"reputation": 23, "user_id": 4593971, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b444921d07921c92722655ccc36c00ea?s=128&d=identicon&r=PG&f=1", "display_name": "Conor", "link": "https://stackoverflow.com/users/4593971/conor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1430329894, "creation_date": 1430328054, "last_edit_date": 1430329894, "question_id": 29950444, "link": "https://stackoverflow.com/questions/29950444/segmentation-fault-malloc-error", "title": "segmentation fault / malloc error?", "body": "<p>EDIT: PROBLEM NOW SOLVED, THANKS ALL</p>\n\n<p>So I'm writing a code for my final piece of C coursework. I've written a function FastDFS which carries out a Fourier Transform. The following code is supposed to time this process for different input sizes.   </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;complex.h&gt;\n#include &lt;math.h&gt;\n#include &lt;time.h&gt;\n\nvoid FastDFS(complex double *, complex double *, complex double *, complex double *, int, int);\nvoid print_complex_vector(complex double *, int);\nvoid free_complex_vector(complex double *);\ncomplex double *make_complex_vector(int);\ncomplex double *MakeWpowers(int);\n\nint main(void)\n{\n    int i,N, operations_required;\n    int index_counter = 1;\n    double initial_time, final_time, time_taken, mega_flops_rate;\n\n    complex double *mega_flops_vector = make_complex_vector(21);\n\n    for(N = 2; N &lt;= pow(2,20); N = N * 2)\n    {\n        complex double *Wp = MakeWpowers(N);\n        complex double *y = make_complex_vector(N);\n        complex double *x = make_complex_vector(N);\n        complex double *w = make_complex_vector(N);\n\n        printf(\"N = %d\\n\",N);\n\n        operations_required = 1024;\n\n        for(i = 1; i &lt;= N; i++)\n        {\n            y[i] = i;\n        }\n\n        initial_time = clock();\n        FastDFS(x,y,w,Wp,N,1);\n        final_time = clock();\n\n        time_taken = (final_time - initial_time) / CLOCKS_PER_SEC;\n\n        mega_flops_rate = operations_required / (time_taken * pow(10,6));\n\n        free(Wp);\n        free(y);\n        free(x);\n        free(w);\n    }\n\n    return(0);\n}\n</code></pre>\n\n<p>The code has been simplified slightly from the original, but contains the same error. At some stage either the error \"timings.out(49621,0x7fff7e684300) malloc: *** error for object 0x7f81ca80c208: incorrect checksum for freed object - object was probably modified after being freed.\"  is returned or Segmentation Fault:11. Where the program crashes varies on different runs, but never gets part N = 8192.</p>\n\n<p>I've written a main function to test the code and don't encounter these errors. The main uses the same functions (make_complex_vector etc). A difference I can see is that I don't free any pointers in the main as I only test it for one value of N at a time, but I don't see how this could cause it to crash? I can run the code for much greater values of N than this in the main.</p>\n\n<p>Can anyone see something obviously wrong here? Many thanks</p>\n"}, {"tags": ["c", "listview", "winapi"], "answers": [{"tags": [], "owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "is_accepted": true, "score": 0, "last_activity_date": 1579520595, "last_edit_date": 1579520595, "creation_date": 1430396446, "answer_id": 29967631, "question_id": 29950430, "link": "https://stackoverflow.com/questions/29950430/what-is-the-difference-between-lvm-getitem-and-lvm-getitemtext/29967631#29967631", "title": "What is the difference between LVM_GETITEM and LVM_GETITEMTEXT?", "body": "<p>Both <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb774953.aspx\" rel=\"nofollow noreferrer\">LVM_GETITEM</a> and <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb761055.aspx\" rel=\"nofollow noreferrer\">LVM_GETITEMTEXT</a> can be used to retrieve an item's or subitem's text data. Since retrieving an item's text data is a very common operation, the <code>LVM_GETITEMTEXT</code> message is provided as a convenience implementation.</p>\n\n<p>To illustrate the difference, here are two implementations using either message (error handling elided for brevity):</p>\n\n<pre><code>std::wstring GetListViewItemText( HWND a_hWnd, int a_Item, int a_SubItem) {\n    std::vector&lt;wchar_t&gt; buffer( 1024 );\n    LVITEM lvi = { 0 };\n    lvi.mask = LVIF_TEXT;  // Only required when using LVM_GETITEM\n    lvi.pszText = buffer.data();\n    lvi.cchTextMax = static_cast&lt;int&gt;( buffer.size() );\n    lvi.iItem = a_Item;    // Only required when using LVM_GETITEM\n    lvi.iSubItem = a_SubItem;\n\n    ::SendMessage( hwnd, LVM_GETITEM, 0, reinterpret_cast&lt;LPARAM&gt;( &amp;lvi ) );\n\n    return std::wstring( lvi.pszText );\n}\n</code></pre>\n\n<p>Slightly shorter, using <code>LVM_GETITEMTEXT</code>:</p>\n\n<pre><code>std::wstring GetListViewItemText( HWND a_hWnd, int a_Item, int a_SubItem) {\n    std::vector&lt;wchar_t&gt; buffer( 1024 );\n    LVITEM lvi = { 0 };\n    lvi.pszText = buffer.data();\n    lvi.cchTextMax = static_cast&lt;int&gt;( buffer.size() );\n    lvi.iSubItem = a_SubItem;\n\n    ::SendMessage( hwnd, LVM_GETITEMTEXT, a_Item, reinterpret_cast&lt;LPARAM&gt;( &amp;lvi ) );\n\n    return std::wstring( lvi.pszText );\n}\n</code></pre>\n"}], "owner": {"reputation": 521, "user_id": 4582812, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/7a1b31917b1c556fd426c990c21019b3?s=128&d=identicon&r=PG&f=1", "display_name": "user4582812", "link": "https://stackoverflow.com/users/4582812/user4582812"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1172, "favorite_count": 1, "accepted_answer_id": 29967631, "answer_count": 1, "score": 0, "last_activity_date": 1579520595, "creation_date": 1430328009, "question_id": 29950430, "link": "https://stackoverflow.com/questions/29950430/what-is-the-difference-between-lvm-getitem-and-lvm-getitemtext", "title": "What is the difference between LVM_GETITEM and LVM_GETITEMTEXT?", "body": "<p>I want to get the text of a ListView row (text of the item and the subitems), but I am not sure if I should use <code>LVM_GETITEM</code> or <code>LVM_GETITEMTEXT</code>.</p>\n\n<p>What is the difference between these two messages, does the first retrieve the entire information about an item or subitem while the other only retrieve the text?</p>\n"}, {"tags": ["python", "c", "arrays", "numpy", "cython"], "comments": [{"owner": {"reputation": 24570, "user_id": 2272172, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/40d9cf17504d06006a0154ef0b332457?s=128&d=identicon&r=PG&f=1", "display_name": "cel", "link": "https://stackoverflow.com/users/2272172/cel"}, "edited": false, "score": 1, "creation_date": 1430329127, "post_id": 29950407, "comment_id": 48022369, "body": "As a side note: Do you really want to do that? Cython is a great tool when you would like to speed up time critical code or interface with external C code. For everything else normal python is probably a much better choice. as it is less error prone and much more readable."}, {"owner": {"reputation": 3737, "user_id": 2811074, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/XlxpL.jpg?s=128&g=1", "display_name": "Dalek", "link": "https://stackoverflow.com/users/2811074/dalek"}, "reply_to_user": {"reputation": 24570, "user_id": 2272172, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/40d9cf17504d06006a0154ef0b332457?s=128&d=identicon&r=PG&f=1", "display_name": "cel", "link": "https://stackoverflow.com/users/2272172/cel"}, "edited": false, "score": 0, "creation_date": 1430329483, "post_id": 29950407, "comment_id": 48022580, "body": "@cel It is a small part of my code which is written in cython. I need to access to this array as fast as possible if it has been computed once. I tried with python I/O functions. I think using c and binary file would be the fastest option."}, {"owner": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1430338765, "post_id": 29950407, "comment_id": 48028189, "body": "One small point: scanf needs &quot;%lf&quot; when reading doubles (this is different to printf!)."}, {"owner": {"reputation": 3737, "user_id": 2811074, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/XlxpL.jpg?s=128&g=1", "display_name": "Dalek", "link": "https://stackoverflow.com/users/2811074/dalek"}, "reply_to_user": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1430338882, "post_id": 29950407, "comment_id": 48028259, "body": "@DavidW Thanks a lot for the point :)"}, {"owner": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1430339120, "post_id": 29950407, "comment_id": 48028391, "body": "Also, is it worth looking at <a href=\"http://docs.scipy.org/doc/numpy/reference/generated/numpy.fromfile.html\" rel=\"nofollow noreferrer\">docs.scipy.org/doc/numpy/reference/generated/&hellip;</a> (and related) numpy functions for loading and saving your data. They should be both quick and painless (and do the whole array in one go)"}, {"owner": {"reputation": 3737, "user_id": 2811074, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/XlxpL.jpg?s=128&g=1", "display_name": "Dalek", "link": "https://stackoverflow.com/users/2811074/dalek"}, "reply_to_user": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1430341352, "post_id": 29950407, "comment_id": 48029704, "body": "@DavidW I updated my question and I used pointer, but there is problem where I assigned the value of the pointer to memortview."}, {"owner": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1430342036, "post_id": 29950407, "comment_id": 48030087, "body": "I didn&#39;t recommend using pointers to store your data! That seems a much more difficult way of doing things than using numpy arrays. Unfortunatly I don&#39;t have a computer with Cython on infront of me so I don&#39;t think I can help further. I&#39;m a little surprised Christian&#39;s answer didn&#39;t work though."}, {"owner": {"reputation": 789, "user_id": 4454801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d100a9778b2114c3e89b11054397c712?s=128&d=identicon&r=PG&f=1", "display_name": "Cristi&#225;n Antu&#241;a", "link": "https://stackoverflow.com/users/4454801/cristi%c3%a1n-antu%c3%b1a"}, "reply_to_user": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1430342233, "post_id": 29950407, "comment_id": 48030194, "body": "@DavidW the problems seems to be when the file in <code>path</code> doesn&#39;t exist previously. My answer works when the file is previously created. I&#39;m looking why it is still not working in all cases."}, {"owner": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1430342530, "post_id": 29950407, "comment_id": 48030359, "body": "Actually - one further thought: fscanf makes no sense for binary files, right?"}, {"owner": {"reputation": 789, "user_id": 4454801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d100a9778b2114c3e89b11054397c712?s=128&d=identicon&r=PG&f=1", "display_name": "Cristi&#225;n Antu&#241;a", "link": "https://stackoverflow.com/users/4454801/cristi%c3%a1n-antu%c3%b1a"}, "edited": false, "score": 0, "creation_date": 1430342685, "post_id": 29950407, "comment_id": 48030446, "body": "fscanf reads from the stream and stores in the format you put. I wouldn&#39;t say that it doesn&#39;t make sens, but you have to be careful that you always know the format of the data you are reading."}, {"owner": {"reputation": 3737, "user_id": 2811074, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/XlxpL.jpg?s=128&g=1", "display_name": "Dalek", "link": "https://stackoverflow.com/users/2811074/dalek"}, "reply_to_user": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1430392461, "post_id": 29950407, "comment_id": 48052128, "body": "@DavidW I have fixed the bug of writing and reading an array to a file. It works perfectly now. On the other hand, the way I allocate the pointer to a memoryview still has a problem because the values in <code>self.Da</code> are almost zero."}], "answers": [{"comments": [{"owner": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1430339477, "post_id": 29953895, "comment_id": 48028616, "body": "Or move it to after &quot;if ptr_fr==NULL:&quot;. This is obviously the right answer though."}, {"owner": {"reputation": 3737, "user_id": 2811074, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/XlxpL.jpg?s=128&g=1", "display_name": "Dalek", "link": "https://stackoverflow.com/users/2811074/dalek"}, "edited": false, "score": 0, "creation_date": 1430340451, "post_id": 29953895, "comment_id": 48029178, "body": "@Cristi&#225;nAntu&#241;a there is something wrong with the way I use <code>fwrite</code> for the pointer. Because the file are basically empty even I used your answer. Moreover, I am not sure the way I allocated a pointer to a memoryview is correct or not?!!"}, {"owner": {"reputation": 3737, "user_id": 2811074, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/XlxpL.jpg?s=128&g=1", "display_name": "Dalek", "link": "https://stackoverflow.com/users/2811074/dalek"}, "edited": false, "score": 0, "creation_date": 1430388005, "post_id": 29953895, "comment_id": 48049342, "body": "@Cristi&#225;nAntu&#241;a The code crashed with the change you have suggested in the updated answer.  The error  is:<code>*** glibc detected *** python: free(): corrupted unsorted chunks: 0x000000000104ddc0 *** ======= Backtrace: ========= &#47;lib&#47;x86_64-linux-gnu&#47;libc.so.6(+0x7db26)[0x7fb6501d7b26] &#47;lib&#47;x86_64-linux-gnu&#47;libc.so.6(fclose+0x155)[0x7fb6501c77a5&zwnj;&#8203;] .&#47;Test.so(+0x182a1)[0x7fb64ef862a1] .&#47;Test.so(+0x19e48)[0x7fb64ef87e48] </code>"}], "tags": [], "owner": {"reputation": 789, "user_id": 4454801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d100a9778b2114c3e89b11054397c712?s=128&d=identicon&r=PG&f=1", "display_name": "Cristi&#225;n Antu&#241;a", "link": "https://stackoverflow.com/users/4454801/cristi%c3%a1n-antu%c3%b1a"}, "is_accepted": false, "score": 4, "last_activity_date": 1430352169, "last_edit_date": 1430352169, "creation_date": 1430339279, "answer_id": 29953895, "question_id": 29950407, "link": "https://stackoverflow.com/questions/29950407/reading-and-writing-an-array-in-a-file-using-c-functions-in-cython/29953895#29953895", "title": "Reading and writing an array in a file using C functions in cython", "body": "<p>You should change your line:</p>\n\n<pre><code>ptr_fw = fopen(self.path, \"wb\")\n</code></pre>\n\n<p>For</p>\n\n<pre><code>ptr_fw = fopen(self.path, \"ab\")\n</code></pre>\n\n<p>See <a href=\"http://www.cplusplus.com/reference/cstdio/fopen/\" rel=\"nofollow\">http://www.cplusplus.com/reference/cstdio/fopen/</a></p>\n\n<blockquote>\n  <p>[w option] write: Create an empty file for output operations. If a file with the same name already exists, its contents are discarded and the file is treated as a new empty file. </p>\n</blockquote>\n\n<p>While</p>\n\n<blockquote>\n  <p>[a option] append: Open file for output at the end of a file. Output operations always write data at the end of the file, expanding it. Repositioning operations (fseek, fsetpos, rewind) are ignored. The file is created if it does not exist.</p>\n</blockquote>\n\n<p>The brackets are mine. You were deleting the content in <code>path</code> once you opened it. So the next time, you opened an empty file.</p>\n\n<p><strong>UPDATE:</strong> (I did both of these changes on your first implementation)</p>\n\n<p>Plus, change your</p>\n\n<pre><code>fwrite(&lt;void*&gt;&amp;ptr_d[0], sizeof(double), N, ptr_fw)\n</code></pre>\n\n<p>for:</p>\n\n<pre><code>       for i in range(N):\n           fprintf(ptr_fw, \"%lf\\n\", ptr_d[N-i-1])\n</code></pre>\n\n<p>You were reading formated but writting unformatted (remember to cimport fprintf from stdio, and the change above is also important).</p>\n"}, {"comments": [{"owner": {"reputation": 789, "user_id": 4454801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d100a9778b2114c3e89b11054397c712?s=128&d=identicon&r=PG&f=1", "display_name": "Cristi&#225;n Antu&#241;a", "link": "https://stackoverflow.com/users/4454801/cristi%c3%a1n-antu%c3%b1a"}, "edited": false, "score": 0, "creation_date": 1430396616, "post_id": 29967089, "comment_id": 48054880, "body": "Glad you found your answer; I tried mine and it didn&#39;t crash on my PC so I couldn&#39;t be any hel beyond that point. (it used the first version, with memoryviews insted of pointers)."}, {"owner": {"reputation": 3737, "user_id": 2811074, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/XlxpL.jpg?s=128&g=1", "display_name": "Dalek", "link": "https://stackoverflow.com/users/2811074/dalek"}, "reply_to_user": {"reputation": 789, "user_id": 4454801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d100a9778b2114c3e89b11054397c712?s=128&d=identicon&r=PG&f=1", "display_name": "Cristi&#225;n Antu&#241;a", "link": "https://stackoverflow.com/users/4454801/cristi%c3%a1n-antu%c3%b1a"}, "edited": false, "score": 0, "creation_date": 1430397010, "post_id": 29967089, "comment_id": 48055149, "body": "@ Cristi&#225;nAntu&#241;a I don&#39;t know exactly why it crashed! Thanks for the help!"}], "tags": [], "owner": {"reputation": 3737, "user_id": 2811074, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/XlxpL.jpg?s=128&g=1", "display_name": "Dalek", "link": "https://stackoverflow.com/users/2811074/dalek"}, "is_accepted": true, "score": 3, "last_activity_date": 1430394847, "creation_date": 1430394847, "answer_id": 29967089, "question_id": 29950407, "link": "https://stackoverflow.com/questions/29950407/reading-and-writing-an-array-in-a-file-using-c-functions-in-cython/29967089#29967089", "title": "Reading and writing an array in a file using C functions in cython", "body": "<p>The answer to my own question is:</p>\n\n<pre><code>import numpy as np\ncimport numpy as np\ncimport cython\nfrom libc.stdio cimport FILE, fopen, fwrite, fscanf, fclose, fprintf, fseek, ftell, SEEK_END, rewind, fread\nfrom numpy cimport float64_t\nfrom libc.stdlib cimport malloc, free\ncdef extern from \"math.h\":\n    double exp(double) nogil\n    double log(double) nogil\n\ncdef class Hit(object):\n    cdef public double[::1] zs,  Da\n    cdef char* path\n\n    @cython.boundscheck(False)\n    @cython.cdivision(True)\n    @cython.wraparound(False)\n    @cython.nonecheck(False)\n    def __cinit__(self, path=None, zs=None):\n        if path is None:\n           raise ValueError(\"Could not find a path to the file which contains the table of distances\")\n        else:\n           self.path=path\n\n        if zs is None:\n           raise ValueError(\"You must give an array which contains the steps!\")\n        self.zs=zs\n\n        cdef Py_ssize_t i, N, lSize\n        N=len(np.ascontiguousarray(self.zs))\n        print \"Input file should have \",N\n        cdef FILE *ptr_fr\n        cdef FILE *ptr_fw\n        cdef size_t result\n        cdef double *ptr_d= &lt;double *&gt;malloc(N * sizeof(double))\n        ptr_fr = fopen(self.path, \"rb\")        \n        if (ptr_fr==NULL):\n           print \"I/O Error: cannot open file {}\".format( self.path) \n           for i from N &gt; i &gt;= 0:\n               ptr_d[i]=log(self.zs[i])\n               print ptr_d[i]\n           ptr_fw = fopen(self.path, \"wb\")\n           if (ptr_fw == NULL):\n               print \"Unable to open file!\\n\"\n\n           else:\n\n               print \"Opened file successfully for writing.\\n\"\n               fwrite(ptr_d, sizeof(double), N, ptr_fw)\n               fclose(ptr_fw)\n               self.Da = np.asarray(&lt;double[:N]&gt;ptr_d)\n        else: \n           fseek (ptr_fr , 0 , SEEK_END)\n           lSize = ftell (ptr_fr)\n           print lSize\n           rewind (ptr_fr)\n           result=fread(ptr_d,sizeof(double),lSize ,ptr_fr )\n           for i from N &gt; i &gt;= 0:\n               print ptr_d[i]\n           fclose(ptr_fr)\n           self.Da = np.asarray(&lt;double[:N]&gt;ptr_d)\n        print np.ascontiguousarray(self.Da)\n\n        free(ptr_d)\n</code></pre>\n"}], "owner": {"reputation": 3737, "user_id": 2811074, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/XlxpL.jpg?s=128&g=1", "display_name": "Dalek", "link": "https://stackoverflow.com/users/2811074/dalek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2911, "favorite_count": 1, "accepted_answer_id": 29967089, "answer_count": 2, "score": 2, "last_activity_date": 1430408098, "creation_date": 1430327945, "last_edit_date": 1430408098, "question_id": 29950407, "link": "https://stackoverflow.com/questions/29950407/reading-and-writing-an-array-in-a-file-using-c-functions-in-cython", "title": "Reading and writing an array in a file using C functions in cython", "body": "<p>I am instantiating a class in <strong>cython</strong>. I want to declare one of the instance which is an array of <code>float</code> values once by computing it with a given function and save it in a binary file using <strong>c</strong> functions. For the further call of my class if the input file does already exist, the instance would be declared by reading the array from the file otherwise it would compute it again.</p>\n\n<pre><code>import numpy as np\ncimport numpy as np\ncimport cython\n\nfrom libc.stdio cimport FILE, fopen, fwrite, fscanf, fclose, fseek, SEEK_END, ftell, stdout, stderr\ncdef extern from \"math.h\":\n    double exp(double) nogil\n    double log(double) nogil\n\ncdef class Hit(object):\n    cdef public double[::1] zs, Da\n    cdef char* path\n\n    def __cinit__(self, zs=None, path=None):\n        if path is None:\n           raise ValueError(\"Could not find a path to the file which contains the table of distances\")\n        else:\n           self.path=path\n        if zs is None:\n           raise ValueError(\"You must give an array which contains the steps!\")\n        self.zs=zs\n        cdef Py_ssize_t i, N\n        N=len(self.zs)\n        cdef FILE *ptr_fr\n        cdef FILE *ptr_fw\n        cdef double[::1] ptr_d = np.empty((N,))\n        ptr_fr = fopen(self.path, \"rb\")\n        ptr_fw = fopen(self.path, \"wb\")\n        if (ptr_fr==NULL):\n           print \"I/O Error: cannot open file {}\".format( self.path)  \n           for i from N &gt; i &gt;= 0:\n               ptr_d[i]=log(self.zs[i]+1.) /(1- self.zs[i])**0.5    \n           if (ptr_fw == NULL):\n               print \"Unable to open file!\\n\"\n           else:\n               print \"Opened file successfully for writing.\\n\"\n               fwrite(&lt;void*&gt;&amp;ptr_d[0], sizeof(double), N, ptr_fw)\n               fclose(ptr_fw)\n               self.Da = ptr_d\n\n        else: \n           for i from N &gt; i &gt;= 0:\n               fscanf(ptr_fr,\"%f\", &amp;ptr_d[i])\n\n           fclose(ptr_fr)\n           self.Da = ptr_d\n</code></pre>\n\n<p>When I run my code for the second time the values that returns from reading a file to a pointer is correct, however I think the way I allocated the pointer to a memoryview has a problem since all the values in <code>self.Da</code> instance are zeros. Any suggestion ?!! </p>\n"}, {"tags": ["c", "gcc", "arm", "linker-scripts"], "comments": [{"owner": {"reputation": 18888, "user_id": 1880339, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/0PkGx.png?s=128&g=1", "display_name": "artless noise", "link": "https://stackoverflow.com/users/1880339/artless-noise"}, "edited": false, "score": 0, "creation_date": 1430333113, "post_id": 29950386, "comment_id": 48024844, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/22497953/placing-static-library-answer-in-the-beginning-of-flash-section\">placing static library answer in the beginning of flash section</a>"}, {"owner": {"reputation": 299, "user_id": 4847458, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ndT4g.jpg?s=128&g=1", "display_name": "Afoxinabox", "link": "https://stackoverflow.com/users/4847458/afoxinabox"}, "reply_to_user": {"reputation": 18888, "user_id": 1880339, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/0PkGx.png?s=128&g=1", "display_name": "artless noise", "link": "https://stackoverflow.com/users/1880339/artless-noise"}, "edited": false, "score": 0, "creation_date": 1430430275, "post_id": 29950386, "comment_id": 48076199, "body": "Thanks for the correction and the link to the similar question. I agree that both cases lead to the same solution, however my question is asked in a more generalized way. It is highly possible that one could have a similar issue not only when placing a library at the beginning of a flash section. The other question is about a specific task, my question is focusing on the syntax."}, {"owner": {"reputation": 299, "user_id": 4847458, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ndT4g.jpg?s=128&g=1", "display_name": "Afoxinabox", "link": "https://stackoverflow.com/users/4847458/afoxinabox"}, "reply_to_user": {"reputation": 18888, "user_id": 1880339, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/0PkGx.png?s=128&g=1", "display_name": "artless noise", "link": "https://stackoverflow.com/users/1880339/artless-noise"}, "edited": false, "score": 0, "creation_date": 1430430785, "post_id": 29950386, "comment_id": 48076434, "body": "I&#39;d like to clarify that I was thinking about the visibility (&quot;searchability&quot;) of the answer when someone is looking for it."}], "answers": [{"comments": [{"owner": {"reputation": 18888, "user_id": 1880339, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/0PkGx.png?s=128&g=1", "display_name": "artless noise", "link": "https://stackoverflow.com/users/1880339/artless-noise"}, "edited": false, "score": 0, "creation_date": 1430333020, "post_id": 29950811, "comment_id": 48024778, "body": "This is <a href=\"https://sourceware.org/binutils/docs/ld/Input-Section-Basics.html\" rel=\"nofollow noreferrer\">another link to the same information</a>.  The form is <code>archive:file</code> and you can use wildcards on either side and then wildcards in the section."}, {"owner": {"reputation": 299, "user_id": 4847458, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ndT4g.jpg?s=128&g=1", "display_name": "Afoxinabox", "link": "https://stackoverflow.com/users/4847458/afoxinabox"}, "edited": false, "score": 0, "creation_date": 1430430437, "post_id": 29950811, "comment_id": 48076271, "body": "Thanks for the clarifying citation and link!"}], "tags": [], "owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "is_accepted": true, "score": 1, "last_activity_date": 1430329318, "creation_date": 1430329318, "answer_id": 29950811, "question_id": 29950386, "link": "https://stackoverflow.com/questions/29950386/arm-none-eabi-gcc-sections-unclear-syntax-archivename-a/29950811#29950811", "title": "arm-none-eabi-gcc: SECTIONS: unclear syntax *&lt;archivename&gt;.a:", "body": "<p>For some reason this information is hard to find in the official GNU docs, so I assume it is some kind of extension. <a href=\"https://web.eecs.umich.edu/~prabal/teaching/resources/eecs373/Linker.pdf\" rel=\"nofollow\">Here</a> on page 50 is telling us:</p>\n\n<blockquote>\n  <p>You can also specify files within archives by writing a pattern\n  matching the archive, a colon, then the pattern matching the file,\n  with no whitespace around the colon.</p>\n\n<pre><code>\u2018archive:file\u2019 matches file within archive\n\u2018archive:\u2019 matches the whole archive\n\u2018:file\u2019 matches file but not one in an archive\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 299, "user_id": 4847458, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ndT4g.jpg?s=128&g=1", "display_name": "Afoxinabox", "link": "https://stackoverflow.com/users/4847458/afoxinabox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 1, "accepted_answer_id": 29950811, "answer_count": 1, "score": 3, "last_activity_date": 1430336705, "creation_date": 1430327863, "last_edit_date": 1495542844, "question_id": 29950386, "link": "https://stackoverflow.com/questions/29950386/arm-none-eabi-gcc-sections-unclear-syntax-archivename-a", "title": "arm-none-eabi-gcc: SECTIONS: unclear syntax *&lt;archivename&gt;.a:", "body": "<p>I could not find a clear answer to a very specific problem, even after reading several manual pages and guides. I work on a linker script for the tool chain mentioned in the title. During the development I was tying to link a static library (archived, .a) to a location in my RAM. I could <strong>not</strong> accomplish this task by handling it like a regular .o file as in the following example: </p>\n\n<pre><code>SECTIONS {\n  outputa 0x10000 :\n    {\n    all.o\n    foo.o (.input1)\n    }\n  outputb :\n    {\n    foo.o (.input2)\n    foo1.o (.input1)\n    }\n  outputc :\n    {\n    *(.input1)\n    *(.input2)\n    }\n}\n</code></pre>\n\n<p>After a long journey, I found a hint in another <a href=\"https://stackoverflow.com/questions/25300996/linker-script-input-sections-archive-aobject-o-syntax-issue\">Question</a>. That lead me to my current solution:</p>\n\n<pre><code>...\n    .ramlib : ALIGN(4)\n        {\n            *liblpcspifilib_M3.a: (*);\n        } &gt; RamLoc40  AT&gt;MFlashA512\n...\n</code></pre>\n\n<p>Please note the colon syntax. This will link all contents of <code>liblpcspifilib</code> as a block to the Ram. However without the \":\" it won't link anything. Even after I found out how to solve the issue, I could not find any other information about that behaviour.</p>\n\n<p>Can anyone explain this to me?</p>\n"}, {"tags": ["c", "algorithm", "recursion", "mandelbrot"], "comments": [{"owner": {"reputation": 69452, "user_id": 953482, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/T3HH6.png?s=128&g=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/953482/kevin"}, "edited": false, "score": 0, "creation_date": 1430327864, "post_id": 29950289, "comment_id": 48021601, "body": "Wild guess: you should only need to recursively call <code>mandelbrot</code> once. What happens if you replace your <code>return</code> statement with <code>return multiplied;</code>?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1430327870, "post_id": 29950289, "comment_id": 48021607, "body": "In a full Mandelbrot you won&#39;t get very far using recursion. You&#39;ll break the stack. And isn&#39;t the limit supposed to be the radius (magnitude)?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1430332290, "post_id": 29950289, "comment_id": 48024320, "body": "BTW, the <code>n</code> should be integer, not double. You are risking not to terminate with comparing double to zero. Will update my answer as well"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4847435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a07d2d912cff494bf58835f4f86b065?s=128&d=identicon&r=PG&f=1", "display_name": "Jon Smith", "link": "https://stackoverflow.com/users/4847435/jon-smith"}, "edited": false, "score": 1, "creation_date": 1430329650, "post_id": 29950400, "comment_id": 48022677, "body": "I see but I am supposed to return the mandelbrot function, not the add_complex function.  Here is something in the Instructions that could help:  mandelbrot(n) = mandelbrot(n-1)*mandelbrot(n-1)  + c;  f(0) = c"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 1, "user_id": 4847435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a07d2d912cff494bf58835f4f86b065?s=128&d=identicon&r=PG&f=1", "display_name": "Jon Smith", "link": "https://stackoverflow.com/users/4847435/jon-smith"}, "edited": false, "score": 0, "creation_date": 1430329840, "post_id": 29950400, "comment_id": 48022794, "body": "You are supposed to return a value, not a function. And the value is calculated based on recursively computed previous (<code>first</code>) value and the constant <code>c</code> added to it."}], "tags": [], "owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "is_accepted": false, "score": 2, "last_activity_date": 1430332375, "last_edit_date": 1430332375, "creation_date": 1430327922, "answer_id": 29950400, "question_id": 29950289, "link": "https://stackoverflow.com/questions/29950289/mandelbrot-recursive-function-for-c/29950400#29950400", "title": "Mandelbrot Recursive Function for C", "body": "<p>Yo are performing two recursive calls for some reason. But not performing the addition part. Your function's <code>else</code> part should look similar to this:</p>\n\n<pre><code>complex_t first = mandelbrot(n-1, c);\nreturn add_complex(c, multiply_complex(first, first));\n</code></pre>\n\n<p><strong>Update</strong>:<br>\nThe <code>n</code> should be integer, not double. You are risking not to terminate with comparing double to zero in the base case since due to floating point rounding specifics the exact equality comparison won't work most likely.</p>\n"}], "owner": {"reputation": 1, "user_id": 4847435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a07d2d912cff494bf58835f4f86b065?s=128&d=identicon&r=PG&f=1", "display_name": "Jon Smith", "link": "https://stackoverflow.com/users/4847435/jon-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2115, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1430332375, "creation_date": 1430327569, "question_id": 29950289, "link": "https://stackoverflow.com/questions/29950289/mandelbrot-recursive-function-for-c", "title": "Mandelbrot Recursive Function for C", "body": "<p>I am new to coding and am required to make a Mandelbrot function.  For those of you who don't know, the Mandelbrot set is a set of complex numbers.  Essentially, you take a complex number to start with, then square it and add it to the original complex number.  For example, If I used the number 1, the set would be 0, 1, 2, 5, 26, ... I got this value from: 0, 1, (1^2) + 1 = 2, (2^2) + 1 = 5, (5^2) + 1 = 26. \nNow, my recursive function is supposed to find the sum of this set using two inputs: a number n, which is how far we are going into the set.  For example, if n is 3, then my first example the set would be (0, 1, 2).  The second input is a complex number structure, which I have already defined as two parts, an imaginary number and a real number.  The goal is to multiply two complex numbers and add the original complex number.  I have already made the multiply and add functions for complex as well, so essentially I just need help with the recursion part.  Here is what I have so far:</p>\n\n<pre><code>    #include &lt;math.h&gt;\n    #include &lt;stdio.h&gt;\n    complex_t mandelbrot(doublen, complex_t c) {\n            if(n == 0) {\n               return c; \n            }\n            else {\n               complex_t first = mandelbrot(n-1, c);\n               complex_t multiplied;\n               complex_t multiplied = multiply_complex(first, first);\n               return mandelbrot(n-1, multiplied); \n               }\n</code></pre>\n\n<p>For this program, n is going to be set to 15, and if the absolute value of the real part of the complex number is less than 100, it is in the mandelbrot set.  However, this is done later; here, I just need to find out why my recursion process is not processing correctly.       </p>\n"}, {"tags": ["c++", "c", "memory-management"], "comments": [{"owner": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "edited": false, "score": 1, "creation_date": 1430327562, "post_id": 29950235, "comment_id": 48021406, "body": "Since you&#39;ve tagged it C++, use <code>std::aligned_storage</code>. Or was that tag a mistake?"}, {"owner": {"reputation": 1824, "user_id": 4770328, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1c70cd143e81361f854286346810e5a5?s=128&d=identicon&r=PG&f=1", "display_name": "Anatoly", "link": "https://stackoverflow.com/users/4770328/anatoly"}, "reply_to_user": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "edited": false, "score": 0, "creation_date": 1430327681, "post_id": 29950235, "comment_id": 48021481, "body": "@MikeSeymour Ok, thanks. <b>alignof</b> doesn&#39;t work in c++ ?"}, {"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 1, "creation_date": 1430327710, "post_id": 29950235, "comment_id": 48021501, "body": "Are you asking how to check the alignment of a buffer returned from <code>malloc()</code> or how to force a particular alignment on a statically allocated (or automatic) buffer?  The possible solutions are different, and the last few lines in the question suggest the latter."}, {"owner": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "edited": false, "score": 0, "creation_date": 1430327742, "post_id": 29950235, "comment_id": 48021524, "body": "@Anatoly: Yes, C++ has <code>alignof</code>."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1430327768, "post_id": 29950235, "comment_id": 48021545, "body": "Anatoly - Mike is saying you can just use <a href=\"http://en.cppreference.com/w/cpp/types/aligned_storage\" rel=\"nofollow noreferrer\">std::aligned_storage</a> if you&#39;re really using C++."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1430328003, "post_id": 29950235, "comment_id": 48021688, "body": "C11 has <code>max_align_t</code> which has the greatest aliment needs."}, {"owner": {"reputation": 4244, "user_id": 4577158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MFS4a.jpg?s=128&g=1", "display_name": "Ulfalizer", "link": "https://stackoverflow.com/users/4577158/ulfalizer"}, "edited": false, "score": 0, "creation_date": 1430328016, "post_id": 29950235, "comment_id": 48021695, "body": "There&#39;s <code>alignas</code> in C11 as well, e.g. <code>alignas(8) static char heap[Heap_Capacity];</code>. An older trick is to store the thing-to-be-aligned together with some sufficiently-aligned type in a <code>union</code>, which guarantees the same alignment as for that type. There&#39;s likely to be compiler-specific alignment directives as well."}, {"owner": {"reputation": 4244, "user_id": 4577158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MFS4a.jpg?s=128&g=1", "display_name": "Ulfalizer", "link": "https://stackoverflow.com/users/4577158/ulfalizer"}, "edited": false, "score": 0, "creation_date": 1430328070, "post_id": 29950235, "comment_id": 48021732, "body": "<code>alignas</code> requires <code>&lt;stdalign.h&gt;</code> to be included by the way. Otherwise you have to spell it <code>_Alignas</code>."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1430328171, "post_id": 29950235, "comment_id": 48021802, "body": "In C11 - in C++11, <code>alignas</code> is a keyword."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1430328305, "post_id": 29950235, "comment_id": 48021875, "body": "<a href=\"http://stackoverflow.com/a/16339908/2410359\">stackoverflow.com/a/16339908/2410359</a> may be useful"}, {"owner": {"reputation": 1824, "user_id": 4770328, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1c70cd143e81361f854286346810e5a5?s=128&d=identicon&r=PG&f=1", "display_name": "Anatoly", "link": "https://stackoverflow.com/users/4770328/anatoly"}, "edited": false, "score": 1, "creation_date": 1430328322, "post_id": 29950235, "comment_id": 48021889, "body": "There is no difference because both of this functions returns 8"}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1430330570, "post_id": 29950235, "comment_id": 48023246, "body": "How about a simple <code>metadata* block = (metadata*)((((uint64_t)heap-1)&#47;8+1)*8)</code>? Of course, you will have to take into account that not all <code>Heap_Capacity</code> bytes are available to you. Note that I&#39;ve used <code>8</code> just in order to make it more readable in this comment, and that you should basically use <code>sizeof(uint64_t)</code> instead."}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 1, "creation_date": 1430330919, "post_id": 29950235, "comment_id": 48023471, "body": "Alternatively, you can declare <code>static uint64_t heap[Heap_Capacity&#47;sizeof(uint64_t)]</code>. This will guarantee that your heap is properly aligned."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 1, "creation_date": 1430339088, "post_id": 29950235, "comment_id": 48028374, "body": "@barak manos  1) Likely needs <code>uint64_t heap[(Heap_Capacity + sizeof(uint64_t) - 1)&#47;sizeof(uint64_t)]</code> as integer division truncates.  2) &quot;guarantee ... properly aligned&quot; is a bit over-stated (consider <code>complex double</code>, etc.), but practically correct."}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1430371757, "post_id": 29950235, "comment_id": 48039767, "body": "@chux: Yep, but I couldn&#39;t put this into the comment while keeping it readable :)"}], "answers": [{"comments": [{"owner": {"reputation": 1824, "user_id": 4770328, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1c70cd143e81361f854286346810e5a5?s=128&d=identicon&r=PG&f=1", "display_name": "Anatoly", "link": "https://stackoverflow.com/users/4770328/anatoly"}, "edited": false, "score": 0, "creation_date": 1430328849, "post_id": 29950398, "comment_id": 48022201, "body": "As I said <code>sizeof(metadata) % 8 == 0</code>, so I dont need to use union. Problem with static char heap[Heap_Capacity]; because it start with value that not divided by 8, for example 123. So when I add to it 24, it also not divided by 8"}, {"owner": {"reputation": 65414, "user_id": 768469, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/383724e63ab04b146277912c16f27f54?s=128&d=identicon&r=PG", "display_name": "Nemo", "link": "https://stackoverflow.com/users/768469/nemo"}, "reply_to_user": {"reputation": 1824, "user_id": 4770328, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1c70cd143e81361f854286346810e5a5?s=128&d=identicon&r=PG&f=1", "display_name": "Anatoly", "link": "https://stackoverflow.com/users/4770328/anatoly"}, "edited": false, "score": 0, "creation_date": 1430328968, "post_id": 29950398, "comment_id": 48022274, "body": "@Anatoly: He means to make your heap itself be a union."}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 1, "creation_date": 1430329367, "post_id": 29950398, "comment_id": 48022513, "body": "<code>union heap_union { void *v; size_t sz; long long ll; long double ld; char heap[Heap_Capacity]; } </code> Then you declare <code>static union heap_union heap;</code> and use <code>heap.heap</code>. Or instead of a union, you could use compiler specific features to request that your char array need a certain alignment."}], "tags": [], "owner": {"reputation": 839, "user_id": 1135979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59464968f70aff62c07a7da3a0f6ba80?s=128&d=identicon&r=PG", "display_name": "yachoor", "link": "https://stackoverflow.com/users/1135979/yachoor"}, "is_accepted": true, "score": 2, "last_activity_date": 1430328242, "last_edit_date": 1495540312, "creation_date": 1430327909, "answer_id": 29950398, "question_id": 29950235, "link": "https://stackoverflow.com/questions/29950235/how-to-check-alignment-of-returned-data-in-the-malloc-implementation/29950398#29950398", "title": "How to check alignment of returned data in the malloc() implementation?", "body": "<p>You could use a union to force correct alignment (see <a href=\"https://stackoverflow.com/questions/891471/union-element-alignment\">Union element alignment</a>) or calculate starting index for allocation that is correctly aligned (which could reduce your heap capacity by up to 7 bytes).</p>\n"}], "owner": {"reputation": 1824, "user_id": 4770328, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1c70cd143e81361f854286346810e5a5?s=128&d=identicon&r=PG&f=1", "display_name": "Anatoly", "link": "https://stackoverflow.com/users/4770328/anatoly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 776, "favorite_count": 0, "accepted_answer_id": 29950398, "answer_count": 1, "score": 5, "last_activity_date": 1430330034, "creation_date": 1430327403, "last_edit_date": 1430330034, "question_id": 29950235, "link": "https://stackoverflow.com/questions/29950235/how-to-check-alignment-of-returned-data-in-the-malloc-implementation", "title": "How to check alignment of returned data in the malloc() implementation?", "body": "<p><code>malloc(sz)</code> returns memory whose alignment works for any object.</p>\n\n<p>On 32-bit x86 machines, this means that the address value returned by <code>malloc()</code>must be evenly divisible by 4. But in practice, 32-bit malloc implementations return 8-byte aligned memory, meaning that returned addresses are always evenly divisible by 8. You should do this too. (On x86-64/IA-64 machines, the maximum data alignment is 8, but malloc implementations return 16-byte aligned memory.)</p>\n\n<p>I have a test for this situation</p>\n\n<pre><code>// Check alignment of returned data.\n\n int main() \n {\n     double* ptr = (double*) malloc(sizeof(double));\n     assert((uintptr_t) ptr % __alignof__(double) == 0);\n     assert((uintptr_t) ptr % __alignof__(unsigned long long) == 0);\n\n     char* ptr2 = (char*) malloc(1);\n     assert((uintptr_t) ptr2 % __alignof__(double) == 0);\n     assert((uintptr_t) ptr2 % __alignof__(unsigned long long) == 0);\n  }\n</code></pre>\n\n<p>My malloc code allocate more space than the user requested. The first part of that space is used to store metadata about the allocation, including the allocated size. </p>\n\n<p><code>sizeof(metadata) % 8 == 0</code></p>\n\n<p>But my heap</p>\n\n<pre><code> static char heap[Heap_Capacity];\n</code></pre>\n\n<p>starting with value that not divided by 8      </p>\n\n<pre><code>metadata* block = (metadata*)heap;\n(uintptr_t)block % 8 != 0\n</code></pre>\n\n<p>My tests fails, what can I do in this situation?\nHow to be sure that the array begins with address that </p>\n\n<pre><code>metadata* block = (metadata*)heap;\n(uintptr_t)block % 8 == 0\n</code></pre>\n\n<p>?</p>\n"}, {"tags": ["c", "unix", "posix", "semaphore"], "answers": [{"comments": [{"owner": {"reputation": 310, "user_id": 3561837, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AmpbB.png?s=128&g=1", "display_name": "jkbx", "link": "https://stackoverflow.com/users/3561837/jkbx"}, "edited": false, "score": 0, "creation_date": 1430327573, "post_id": 29950167, "comment_id": 48021414, "body": "Can you please be more specific? How do I get it into shared memory? Mapping it somehow or really saving it in there with *shared_mem=sem ?"}, {"owner": {"reputation": 51391, "user_id": 132382, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/20fc7ee8f405aa42e36eb73e841e5a36?s=128&d=identicon&r=PG", "display_name": "pilcrow", "link": "https://stackoverflow.com/users/132382/pilcrow"}, "reply_to_user": {"reputation": 310, "user_id": 3561837, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AmpbB.png?s=128&g=1", "display_name": "jkbx", "link": "https://stackoverflow.com/users/3561837/jkbx"}, "edited": false, "score": 0, "creation_date": 1430327912, "post_id": 29950167, "comment_id": 48021636, "body": "@JohannesKlaus The argument to <code>sem_init</code> must point to shared memory.  I&#39;ve updated the answer.  (Note you couldn&#39;t just copy the sem on to shared memory, as operations on a copy are <a href=\"http://pubs.opengroup.org/onlinepubs/7908799/xsh/sem_init.html\" rel=\"nofollow noreferrer\">undefined</a>.)"}, {"owner": {"reputation": 24802, "user_id": 232918, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b5897762377de1c8ffb9a98673262e91?s=128&d=identicon&r=PG", "display_name": "doron", "link": "https://stackoverflow.com/users/232918/doron"}, "edited": false, "score": 1, "creation_date": 1430328342, "post_id": 29950167, "comment_id": 48021900, "body": "Instead of using a stack allocated <code>sem_t</code> use a pointer which points somewhere into your shared memory block."}, {"owner": {"reputation": 310, "user_id": 3561837, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AmpbB.png?s=128&g=1", "display_name": "jkbx", "link": "https://stackoverflow.com/users/3561837/jkbx"}, "reply_to_user": {"reputation": 24802, "user_id": 232918, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b5897762377de1c8ffb9a98673262e91?s=128&d=identicon&r=PG", "display_name": "doron", "link": "https://stackoverflow.com/users/232918/doron"}, "edited": false, "score": 0, "creation_date": 1430329454, "post_id": 29950167, "comment_id": 48022563, "body": "@doron Does it matter where it points to? Or do I have to make my shared memory segment bigger (it&#39;s size of int now) and save one &#39;slot&#39; for the pointer to point to?"}, {"owner": {"reputation": 24802, "user_id": 232918, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b5897762377de1c8ffb9a98673262e91?s=128&d=identicon&r=PG", "display_name": "doron", "link": "https://stackoverflow.com/users/232918/doron"}, "edited": false, "score": 0, "creation_date": 1430388782, "post_id": 29950167, "comment_id": 48049801, "body": "The actual semaphore must reside in shared memory which means you will need some sort of pointer to it, just like memory on the heap. The example above is a perfect what to do what you want. The alternative is to use a names semaphore."}], "tags": [], "owner": {"reputation": 51391, "user_id": 132382, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/20fc7ee8f405aa42e36eb73e841e5a36?s=128&d=identicon&r=PG", "display_name": "pilcrow", "link": "https://stackoverflow.com/users/132382/pilcrow"}, "is_accepted": true, "score": 2, "last_activity_date": 1430327793, "last_edit_date": 1430327793, "creation_date": 1430327165, "answer_id": 29950167, "question_id": 29950001, "link": "https://stackoverflow.com/questions/29950001/unnamed-semaphore-posix-ipc/29950167#29950167", "title": "Unnamed semaphore POSIX IPC", "body": "<p>The <code>sem_t</code> itself must be in shared memory if it is to be \"pshared\".</p>\n\n<pre><code>struct my_shared_mem {\n  sem_t sem;\n  int   value;\n};\n\n... later ...\n\n struct my_shared_mem *shared;\n\n shmID  = shmget(IPC_PRIVATE, sizeof(*shared), ...);\n shared = shmat(shmID, ...);\n shared-&gt;value = 0;\n sem_init(&amp;shared-&gt;sem, 1, 1);\n ...\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 310, "user_id": 3561837, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AmpbB.png?s=128&g=1", "display_name": "jkbx", "link": "https://stackoverflow.com/users/3561837/jkbx"}, "edited": false, "score": 0, "creation_date": 1430330354, "post_id": 29950796, "comment_id": 48023105, "body": "Is the semget attempt a named or an unnamed semaphore?"}, {"owner": {"reputation": 46, "user_id": 2933434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628aa0490618e329807c8cb076d5af7c?s=128&d=identicon&r=PG&f=1", "display_name": "arch3r", "link": "https://stackoverflow.com/users/2933434/arch3r"}, "reply_to_user": {"reputation": 310, "user_id": 3561837, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AmpbB.png?s=128&g=1", "display_name": "jkbx", "link": "https://stackoverflow.com/users/3561837/jkbx"}, "edited": false, "score": 0, "creation_date": 1430331452, "post_id": 29950796, "comment_id": 48023822, "body": "@JohannesKlaus You don&#39;t use a name to identify it, but you use a key. Technically, according to the definition given <a href=\"http://stackoverflow.com/questions/13145885/name-and-unnamed-semaphore/13148258#13148258\">here</a> it is a named semaphore.  Sorry for the edits. I am new to the formatting :/"}], "tags": [], "owner": {"reputation": 46, "user_id": 2933434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628aa0490618e329807c8cb076d5af7c?s=128&d=identicon&r=PG&f=1", "display_name": "arch3r", "link": "https://stackoverflow.com/users/2933434/arch3r"}, "is_accepted": false, "score": 1, "last_activity_date": 1430329258, "creation_date": 1430329258, "answer_id": 29950796, "question_id": 29950001, "link": "https://stackoverflow.com/questions/29950001/unnamed-semaphore-posix-ipc/29950796#29950796", "title": "Unnamed semaphore POSIX IPC", "body": "<p>Whenever you fork, the child process inherits a copy of the parent process's address space. Thus the variable sem will be copied to the child's address space. Any changes made in the parent will not be reflected in the child. (<code>sem_wait</code> basically decrements the value of the semaphore)</p>\n\n<p>One way as mentioned previously is to put the semaphore in the shared memory segment. <br>\nThe other method is to create a system-wide semaphore using the <code>semget</code> call (refer to <code>man semget</code>). The interface here is a bit more complex than pthread library one. You will have to use <code>semctl</code> to set the value (using <code>union semun</code>) and perform semaphore operations using <code>semop</code> (using <code>struct sembuf</code>). This semaphore is an IPC which has a key (passed in the <code>semget</code> call). You can see the system-wide semaphores using <code>ipcs -s</code></p>\n"}], "owner": {"reputation": 310, "user_id": 3561837, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AmpbB.png?s=128&g=1", "display_name": "jkbx", "link": "https://stackoverflow.com/users/3561837/jkbx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2738, "favorite_count": 0, "accepted_answer_id": 29950167, "answer_count": 2, "score": 1, "last_activity_date": 1430329258, "creation_date": 1430326630, "question_id": 29950001, "link": "https://stackoverflow.com/questions/29950001/unnamed-semaphore-posix-ipc", "title": "Unnamed semaphore POSIX IPC", "body": "<p>I allocated a shared memory segment of the size of an integer.</p>\n\n<p>The expected outcome on stdout should be:</p>\n\n<pre><code>P: 1\nC: 2\n</code></pre>\n\n<p>But instead it is:</p>\n\n<pre><code>C: 1\nP: 2\n</code></pre>\n\n<p>Why is the child process not being blocked until parent is done and has unlocked the shared memory segment?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/ipc.h&gt;\n#include &lt;sys/shm.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;semaphore.h&gt;\n\n#define SHMSEGSIZE sizeof(int)\n\nint main(void){\n\n   pid_t pid;\n   int shmID;\n   int *shared_mem;\n\n   /* initializing shared memory */\n   shmID  = shmget(IPC_PRIVATE, SHMSEGSIZE, IPC_CREAT | 0644);\n   shared_mem  = (int *)shmat(shmID, 0, 0);\n   *shared_mem = 0;\n\n   /* initializing semaphore */\n   sem_t sem;\n   int pshared = 1; // !=0 for processes, =0 for threads\n   int value = 1; // number of processes at a time\n   sem_init(&amp;sem, pshared, value); // initialize the semaphore\n\n   pid = fork();\n\n   if(pid&gt;(pid_t)0){ // parent\n       sem_wait(&amp;sem);\n       sleep(6);\n       *shared_mem += 1;\n       printf(\"P: %d\\n\", *shared_mem);\n       sem_post(&amp;sem);\n       exit(EXIT_SUCCESS);\n   } // parent\n\n   if(pid==(pid_t)0){ // child\n       sleep(3);\n       sem_wait(&amp;sem);\n       *shared_mem += 1;\n       sem_post(&amp;sem);\n       printf(\"C: %d\\n\", *shared_mem);\n       exit(EXIT_SUCCESS);\n   } // child\n\n   /* fork() failed */\n   printf(\"Failed to fork().\");\n   exit(EXIT_FAILURE);\n}\n</code></pre>\n\n<p>Compiled with:</p>\n\n<pre><code>gcc -o executable sem.c -pthread\n</code></pre>\n"}, {"tags": ["c", "arrays", "struct"], "comments": [{"owner": {"reputation": 3068, "user_id": 1558269, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/lENiy.jpg?s=128&g=1", "display_name": "JabberwockyDecompiler", "link": "https://stackoverflow.com/users/1558269/jabberwockydecompiler"}, "edited": false, "score": 0, "creation_date": 1430324515, "post_id": 29949323, "comment_id": 48019423, "body": "Are there any errors or is it just a silent fail?"}, {"owner": {"reputation": 820, "user_id": 4266707, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-fLyyGXepW68/AAAAAAAAAAI/AAAAAAAAABI/RjSsIhv1dvs/photo.jpg?sz=128", "display_name": "Javia1492", "link": "https://stackoverflow.com/users/4266707/javia1492"}, "edited": false, "score": 0, "creation_date": 1430324823, "post_id": 29949323, "comment_id": 48019626, "body": "You should not even be able to run that code. It will give you errors since you did not initialize <code>record list[]</code> properly."}], "answers": [{"comments": [{"owner": {"reputation": 597, "user_id": 2018675, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a4df4468cb806769e22a53bd720211d?s=128&d=identicon&r=PG", "display_name": "user2018675", "link": "https://stackoverflow.com/users/2018675/user2018675"}, "edited": false, "score": 0, "creation_date": 1430324816, "post_id": 29949399, "comment_id": 48019622, "body": "Could you explain why does <code>sizeof(list)</code> returns 16 when initialized the wrong way?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4227915"}, "edited": false, "score": 0, "creation_date": 1430325724, "post_id": 29949399, "comment_id": 48020168, "body": "Thank you.. now I&#39;m seeing the issue"}, {"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 0, "creation_date": 1430327009, "post_id": 29949399, "comment_id": 48021029, "body": "I&#39;m glad if the answer helped :)"}], "tags": [], "owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "is_accepted": true, "score": 4, "last_activity_date": 1430370485, "last_edit_date": 1430370485, "creation_date": 1430324687, "answer_id": 29949399, "question_id": 29949323, "link": "https://stackoverflow.com/questions/29949323/initializing-array-of-structs-in-c/29949399#29949399", "title": "Initializing array of structs in c", "body": "<p>Change initialization to:</p>\n\n<pre><code>record list[] = { {1, \"one\"}, {2, \"two\"}, {3, \"three\"} };\n/*                ^        ^  ^        ^  ^          ^  */\n</code></pre>\n\n<p>Your initialization with <code>(...)</code> leaves effect similar to <code>{\"one\", \"two\", \"three\"}</code> and creates a struct array with elements <code>{ {(int)\"one\", \"two\"}, {(int)\"three\", (char *)0} }</code></p>\n\n<p><a href=\"http://en.wikipedia.org/wiki/Comma_operator\" rel=\"nofollow\">comma operator</a> in C evaluates the expressions from left to right and discard all except the last. This is the reason why <code>1</code>, <code>2</code> and <code>3</code> are discarded.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4227915"}, "edited": false, "score": 0, "creation_date": 1430325777, "post_id": 29949403, "comment_id": 48020195, "body": "Thank you... I didn&#39;t see this warnings... ideone compiled it as normal code"}], "tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 3, "last_activity_date": 1430325456, "last_edit_date": 1430325456, "creation_date": 1430324701, "answer_id": 29949403, "question_id": 29949323, "link": "https://stackoverflow.com/questions/29949323/initializing-array-of-structs-in-c/29949403#29949403", "title": "Initializing array of structs in c", "body": "<p>You are not initializing  <code>list</code> properly. <strong>Putting initializing elements in <code>()</code> will let the compiler to treat <code>,</code> as <a href=\"http://en.wikipedia.org/wiki/Comma_operator\" rel=\"nofollow\">comma operator</a> instead of separator</strong>.   </p>\n\n<p>Your compiler should give these warnings  </p>\n\n<pre><code>[Warning] left-hand operand of comma expression has no effect [-Wunused-value]\n[Warning] missing braces around initializer [-Wmissing-braces]\n[Warning] (near initialization for 'list[0]') [-Wmissing-braces]\n[Warning] initialization makes integer from pointer without a cast [enabled by default]\n[Warning] (near initialization for 'list[0].value') [enabled by default]\n[Warning] left-hand operand of comma expression has no effect [-Wunused-value]\n[Warning] left-hand operand of comma expression has no effect [-Wunused-value]\n[Warning] initialization makes integer from pointer without a cast [enabled by default]\n[Warning] (near initialization for 'list[1].value') [enabled by default]\n[Warning] missing initializer for field 'name' of 'record' [-Wmissing-field-initializers]\n</code></pre>\n\n<p>Initialization should be done as</p>\n\n<pre><code> record list[] = { {1, \"one\"}, {2, \"two\"}, {3, \"three\"} };  \n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4227915"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2517, "favorite_count": 0, "accepted_answer_id": 29949399, "answer_count": 2, "score": 4, "last_activity_date": 1430370485, "creation_date": 1430324433, "last_edit_date": 1430370417, "question_id": 29949323, "link": "https://stackoverflow.com/questions/29949323/initializing-array-of-structs-in-c", "title": "Initializing array of structs in c", "body": "<p>I've initialized an array of structs with three items and <a href=\"https://ideone.com/L1FWqV\" rel=\"nofollow\">it is showing 2</a> for me !!!</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\ntypedef struct record {\n    int value;\n    char *name;\n} record;\n\nint main (void) {\n    record list[] = { (1, \"one\"), (2, \"two\"), (3, \"three\") };\n    int n = sizeof(list) / sizeof(record);\n\n    printf(\"list's length: %i \\n\", n);\n    return 0;\n}\n</code></pre>\n\n<p>What is happening here? Am I getting crazy?</p>\n"}, {"tags": ["c", "pointers", "initialization", "malloc"], "comments": [{"owner": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "edited": false, "score": 3, "creation_date": 1430323190, "post_id": 29948893, "comment_id": 48018585, "body": "You don&#39;t need to pass <code>a</code> as a parameter."}, {"owner": {"reputation": 5511, "user_id": 4516316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBirF.jpg?s=128&g=1", "display_name": "Arun A S", "link": "https://stackoverflow.com/users/4516316/arun-a-s"}, "edited": false, "score": 0, "creation_date": 1430323196, "post_id": 29948893, "comment_id": 48018587, "body": "Where do you get that error? To be more specific, in which line?"}, {"owner": {"reputation": 19, "user_id": 4786810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cbd63f9ddc5518e6919a6ec8bf68aea?s=128&d=identicon&r=PG&f=1", "display_name": "Constantin", "link": "https://stackoverflow.com/users/4786810/constantin"}, "edited": false, "score": 0, "creation_date": 1430323286, "post_id": 29948893, "comment_id": 48018648, "body": "in line &quot;a=alocare(a,&amp;n);&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1430323513, "post_id": 29948944, "comment_id": 48018799, "body": "@SouravGhosh; Oops! Sorry."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1430323567, "post_id": 29948944, "comment_id": 48018845, "body": "and...return 0; ...return NULL; should be better, isn&#39;t it?"}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1430323672, "post_id": 29948944, "comment_id": 48018903, "body": "@SouravGhosh; Yes. But you can use them interchangeably."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 2, "creation_date": 1430323729, "post_id": 29948944, "comment_id": 48018937, "body": "Props for noting  <code>a</code> needs a local declaration in <code>alocare</code> now that is has been stripped from the parameter list."}], "tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 1, "last_activity_date": 1430323864, "last_edit_date": 1430323864, "creation_date": 1430323298, "answer_id": 29948944, "question_id": 29948893, "link": "https://stackoverflow.com/questions/29948893/dynamic-allocation-for-an-array-in-c/29948944#29948944", "title": "dynamic allocation for an array in C", "body": "<p>You are passing <code>a</code> uninitialized in function call <code>alocare(a, &amp;n);</code>. Pointer to dynamically allocated memory can be returned from a function. Remove the parameter <code>int *a</code> and declare <code>a</code> as local variable in <code>alocare</code>:   </p>\n\n<pre><code>   int  *alocare(int *n)\n   {\n        printf(\"Introduceti numarul de elemente din sir\");\n        scanf(\"%d\", n);\n        // Local declaration of pointer a\n        int *a = malloc(*n*sizeof(int)); \n        if (!a)\n        {\n            printf(\"Eroare la alocare\\n\");\n            return 0;\n        }\n        return a;\n}  \n</code></pre>\n\n<p>and make function call as  </p>\n\n<pre><code>a = alocare(&amp;n);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 0, "last_activity_date": 1430323721, "last_edit_date": 1430323721, "creation_date": 1430323360, "answer_id": 29948965, "question_id": 29948893, "link": "https://stackoverflow.com/questions/29948893/dynamic-allocation-for-an-array-in-c/29948965#29948965", "title": "dynamic allocation for an array in C", "body": "<p>You get the error because of this line</p>\n\n<pre><code> a=alocare(a, &amp;n);\n</code></pre>\n\n<p>in <code>main()</code>. Here, the <code>a</code> is a local variable with <em>auto</em> storage type, which, unless initialized explicitly, contains garbage value. You don't need to pass <code>a</code> as parameter. Just collect the return value of <code>allocare()</code> into <code>a</code>. That will suffice.</p>\n\n<p>Change your function signature </p>\n\n<pre><code>  int  *alocare(int *a, int *n)\n</code></pre>\n\n<p>to</p>\n\n<pre><code>  int  *alocare(int *n)\n</code></pre>\n\n<p>and your code </p>\n\n<pre><code>a=alocare(a, &amp;n);\n</code></pre>\n\n<p>to </p>\n\n<pre><code>a=alocare(&amp;n);\n</code></pre>\n\n<p>and in case of <code>if (!a)</code></p>\n\n<pre><code>return 0;\n</code></pre>\n\n<p>to</p>\n\n<pre><code>return NULL;  //return type is int *\n</code></pre>\n\n<p>or, better</p>\n\n<pre><code>exit(-1);\n</code></pre>\n\n<p>If you choose to return <code>NULL</code>, in <code>main()</code> check <code>a</code> against <code>NULL</code> to ensure <code>malloc()</code> success.</p>\n\n<p>Note: Instead of <code>void main(void)</code>, use <code>int main(void)</code>. It's better and recommended.</p>\n\n<p>Also, do not cast the return value of <code>malloc()</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1430324156, "creation_date": 1430324156, "answer_id": 29949230, "question_id": 29948893, "link": "https://stackoverflow.com/questions/29948893/dynamic-allocation-for-an-array-in-c/29949230#29949230", "title": "dynamic allocation for an array in C", "body": "<p>First of all in this function</p>\n\n<pre><code>int  *alocare(int *a, int *n)\n{\n    printf(\"Introduceti numarul de elemente din sir\");\n    scanf(\"%d\", n);\n    a = (int*)(malloc(*n*sizeof(int))); //alocam memorie dinamica (in zona Heap) pentru memorarea unui vector in mod dinamic de n elemente\n    if (!a)\n    {\n        printf(\"Eroare la alocare\\n\");\n        return 0;\n    }\n    return a;\n\n}\n</code></pre>\n\n<p>the value of parameter <code>a</code> is not used. Also any parameter of a function is a local variable of the function. So when you call the function like</p>\n\n<pre><code>a=alocare(a, &amp;n);\n</code></pre>\n\n<p>parameter <code>a</code> gets indertermined value of argument <code>a</code> because the last was not initialized in main.  There is no sense to declare a paremeter if its value is not used.</p>\n\n<p>I would define the function the following way</p>\n\n<pre><code>int  alocare( int **a )\n{\n    int n = 0;\n\n    printf( \"Introduceti numarul de elemente din sir: \" );\n    scanf( \"%d\", n );\n\n    if ( n &lt;= 0 ) return 0;\n\n    *a = malloc( n * sizeof( int ) ); //alocam memorie dinamica (in zona Heap) pentru memorarea unui vector in mod dinamic de n elemente\n    if ( !*a )\n    {\n        printf(\"Eroare la alocare\\n\");\n        return 0;\n    }\n\n    return n;\n}\n</code></pre>\n\n<p>and call it like</p>\n\n<pre><code>n = alocare( &amp;a );\n</code></pre>\n\n<p>Though it would be better to declare <code>n</code> as having type <code>size_t</code></p>\n\n<p>Take into account that according to the C Standard function main shall have return type <code>int</code> that is it should be declared like</p>\n\n<pre><code>int main( void )\n{\n    //...\n}\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 4786810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cbd63f9ddc5518e6919a6ec8bf68aea?s=128&d=identicon&r=PG&f=1", "display_name": "Constantin", "link": "https://stackoverflow.com/users/4786810/constantin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1430324156, "creation_date": 1430323132, "last_edit_date": 1430324044, "question_id": 29948893, "link": "https://stackoverflow.com/questions/29948893/dynamic-allocation-for-an-array-in-c", "title": "dynamic allocation for an array in C", "body": "<pre><code> #define _CRT_SECURE_NO_WARNINGS\n    #include &lt;stdio.h&gt;\n    #include &lt;conio.h&gt;\n    #include &lt;stdlib.h&gt;\n    int  *alocare(int *a, int *n)\n    {\n        printf(\"Introduceti numarul de elemente din sir\");\n        scanf(\"%d\", n);\n        a = (int*)(malloc(*n*sizeof(int))); //alocam memorie dinamica (in zona Heap) pentru memorarea unui vector in mod dinamic de n elemente\n        if (!a)\n        {\n            printf(\"Eroare la alocare\\n\");\n            return 0;\n        }\n        return a;\n\n    }\n    void citire(int *a, int n)\n    {\n        for (int i = 0; i &lt; n; i++)\n        {\n            printf(\"\\telem %d\\n\", i + 1);\n            scanf(\"%d\", &amp;a[i]);\n        }\n    }\n    void afisare(int *a, int n)\n    {\n        for (int i = 0; i &lt; n; i++)\n                printf(\"%d\\n\", a[i]);\n\n    }\n    void main(void)\n    {\n        int *a, n;\n        a=alocare(a, &amp;n);\n        citire(a, n);\n        afisare(a, n);\n        _getch();\n    }\n</code></pre>\n\n<p>The error I am getting is</p>\n\n<blockquote>\n  <p>error C4700: unitialized local variable 'a' used.</p>\n</blockquote>\n\n<p>How could I initialize variable <code>a</code>? And why it  must be initialized? Because I have a allocation function.  </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 2, "creation_date": 1430322764, "post_id": 29948695, "comment_id": 48018274, "body": "C != C++, plus have you tried debugging and <i>know</i> where it crashes?"}, {"owner": {"reputation": 105, "user_id": 4248838, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/lLSBp.png?s=128&g=1", "display_name": "Valinho", "link": "https://stackoverflow.com/users/4248838/valinho"}, "reply_to_user": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1430322871, "post_id": 29948695, "comment_id": 48018345, "body": "I have to admit that I am a newbie. Haven&#39;t tried it so far."}, {"owner": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 2, "creation_date": 1430322923, "post_id": 29948695, "comment_id": 48018379, "body": "Please turn on full warnings on your compiler (try with and without optimizations), it should tell you at least one problem. And please edit your tags, this looks &amp; feels like C, not C++."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1430322980, "post_id": 29948695, "comment_id": 48018421, "body": "<code>int valuesOfRoll[DICEEYES]</code> -&gt; <code>int valuesOfRoll[pow(6, DICE)];</code> in other words, <code>36</code> in this case"}, {"owner": {"reputation": 105, "user_id": 4248838, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/lLSBp.png?s=128&g=1", "display_name": "Valinho", "link": "https://stackoverflow.com/users/4248838/valinho"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1430323402, "post_id": 29948695, "comment_id": 48018726, "body": "@WeatherVane I don&#39;t get your comment to be honest"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1430323412, "post_id": 29948695, "comment_id": 48018732, "body": "1) 2 dice can have a sum value that ranges from 2 through 12, not 2 through 11. the calculation for DICEEYES is wrong.  2) this line: &#39;sum += rand() % 6 + 1;&#39; will have Precedence and order of evaluation problems.  suggest: &#39;sum += (rand() % 6) + 1;&#39;"}, {"owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 0, "creation_date": 1430323493, "post_id": 29948695, "comment_id": 48018786, "body": "It&#39;s a good idea to test new functions in isolation. After you wrote <code>diceRoll</code> you should have tested it before wrapping it in loops and arrays and macros. <i>One call</i> to <code>diceRoll</code> would have shown you the problem."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1430323556, "post_id": 29948695, "comment_id": 48018835, "body": "@Valinho sorry, the array size should be <code>DICE*6+1</code>."}, {"owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 0, "creation_date": 1430323664, "post_id": 29948695, "comment_id": 48018897, "body": "I&#39;m voting to close this question as off-topic because the underlying problem has nothing to do with the title or most of the text. It is unlikely to help future readers."}, {"owner": {"reputation": 105, "user_id": 4248838, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/lLSBp.png?s=128&g=1", "display_name": "Valinho", "link": "https://stackoverflow.com/users/4248838/valinho"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1430323987, "post_id": 29948695, "comment_id": 48019106, "body": "@user3629249 If I have two dice I can dice the values from 2 to 12 and that makes for me 11 values that I can get."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1430324730, "post_id": 29948695, "comment_id": 48019563, "body": "when a value is being incremented, that value needs to be initialized.  suggest &#39;sum = 0;&#39;"}, {"owner": {"reputation": 105, "user_id": 4248838, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/lLSBp.png?s=128&g=1", "display_name": "Valinho", "link": "https://stackoverflow.com/users/4248838/valinho"}, "reply_to_user": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 0, "creation_date": 1430325028, "post_id": 29948695, "comment_id": 48019726, "body": "@Beta I will keep this in mind for the future thanks."}], "answers": [{"comments": [{"owner": {"reputation": 105, "user_id": 4248838, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/lLSBp.png?s=128&g=1", "display_name": "Valinho", "link": "https://stackoverflow.com/users/4248838/valinho"}, "edited": false, "score": 0, "creation_date": 1430323375, "post_id": 29948836, "comment_id": 48018712, "body": "I haven&#39;t seen this mistake. This solved the problem. Thank you very much."}], "tags": [], "owner": {"reputation": 3971, "user_id": 2840714, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/s9vli.jpg?s=128&g=1", "display_name": "ChuckCottrill", "link": "https://stackoverflow.com/users/2840714/chuckcottrill"}, "is_accepted": false, "score": 4, "last_activity_date": 1430330748, "last_edit_date": 1430330748, "creation_date": 1430322969, "answer_id": 29948836, "question_id": 29948695, "link": "https://stackoverflow.com/questions/29948695/create-a-dice-chart/29948836#29948836", "title": "Create a dice chart", "body": "<p>You should initialize sum in the function diceRoll(),</p>\n\n<pre><code>/* always return value between [dice..dice*6]*/\nint diceRoll(int dice)\n{\n  int sum=0;\n  for(int i = 0; i &lt; dice; i++)\n  {\n    sum += rand() % 6 + 1;\n  }\n  return sum;\n}\n</code></pre>\n\n<p>Since sum could have any value (on the stack), you were using an index value that could fall outside the ValuesOfRoll[] array.  One way to avoid is to use the modulus operator to limit the returned index to a valid range.</p>\n\n<pre><code>int main(void)\n{\n  srand(time(0));\n  int valuesOfRoll[DICEEYES] = { 0 };\n  for(int i = 0; i &lt; COUNT; i++)\n  {\n    int index = diceRoll(DICE) - DICE;\n    /* limit index to [0..DICEEYES] */\n    index %= DICEEYES;\n    valuesOfRoll[index]++;\n  }\n  for(int i = 0; i &lt; DICEEYES; i++)\n  {\n    if(valuesOfRoll[i] &lt; 1) continue;\n    printf(\"The number %d was rolled %4d times\", i + DICE, valuesOfRoll[i]);\n  }\n  return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 105, "user_id": 4248838, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/lLSBp.png?s=128&g=1", "display_name": "Valinho", "link": "https://stackoverflow.com/users/4248838/valinho"}, "edited": false, "score": 0, "creation_date": 1430323677, "post_id": 29948905, "comment_id": 48018909, "body": "Thank you too for your effort and explanation. This solved the problem. :)"}], "tags": [], "owner": {"reputation": 3785, "user_id": 4427938, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/M6mua.png?s=128&g=1", "display_name": "Ayushi Jha", "link": "https://stackoverflow.com/users/4427938/ayushi-jha"}, "is_accepted": true, "score": 1, "last_activity_date": 1430323531, "last_edit_date": 1430323531, "creation_date": 1430323178, "answer_id": 29948905, "question_id": 29948695, "link": "https://stackoverflow.com/questions/29948695/create-a-dice-chart/29948905#29948905", "title": "Create a dice chart", "body": "<p>Initialise the value of <code>sum</code> in your function (preferably to 0), otherwise it will hold some garbage value. </p>\n\n<pre><code>int diceRoll(int dice)\n{\n int sum;\n for(int i = 0; i &lt; dice; i++)\n  {\n   sum += rand() % 6 + 1;\n }\n return sum;\n}\n</code></pre>\n\n<p>The garbage value may be a very large number, and so will be the returned value of the function. So, when the returned value is used in this line: </p>\n\n<pre><code>int index = diceRoll(DICE) - DICE;\n</code></pre>\n\n<p>then the array will have an index of that large number, <code>valuesOfRoll[some_large_integer]++;</code>. This causes an out-of-array-bound situation, and causes seg-fault.</p>\n"}, {"comments": [{"owner": {"reputation": 105, "user_id": 4248838, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/lLSBp.png?s=128&g=1", "display_name": "Valinho", "link": "https://stackoverflow.com/users/4248838/valinho"}, "edited": false, "score": 0, "creation_date": 1430324513, "post_id": 29949235, "comment_id": 48019422, "body": "But in this case you are creating two arrays which aren&#39;t really used the [0] and [1] element."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 105, "user_id": 4248838, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/lLSBp.png?s=128&g=1", "display_name": "Valinho", "link": "https://stackoverflow.com/users/4248838/valinho"}, "edited": false, "score": 0, "creation_date": 1430324652, "post_id": 29949235, "comment_id": 48019522, "body": "There is only one array."}, {"owner": {"reputation": 105, "user_id": 4248838, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/lLSBp.png?s=128&g=1", "display_name": "Valinho", "link": "https://stackoverflow.com/users/4248838/valinho"}, "edited": false, "score": 0, "creation_date": 1430324692, "post_id": 29949235, "comment_id": 48019545, "body": "You are right, I mean two elements which are not used."}, {"owner": {"reputation": 105, "user_id": 4248838, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/lLSBp.png?s=128&g=1", "display_name": "Valinho", "link": "https://stackoverflow.com/users/4248838/valinho"}, "edited": false, "score": 0, "creation_date": 1430324935, "post_id": 29949235, "comment_id": 48019679, "body": "Yes, but the thing I want to point out that my solution is not wrong. By the way I am wondering why the middle values are always the highest."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 105, "user_id": 4248838, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/lLSBp.png?s=128&g=1", "display_name": "Valinho", "link": "https://stackoverflow.com/users/4248838/valinho"}, "edited": false, "score": 1, "creation_date": 1430325042, "post_id": 29949235, "comment_id": 48019735, "body": "Because of the perms. There is one way to make <code>2</code> (1+1) and <code>12</code> (6+6). There are more ways to make <code>7</code> (1+6) or (2+5) or (3+4) or (4+3) or (5+2) or (6+1). That&#39;s why <code>7</code> is 6 times more frequent than <code>2</code> or <code>12</code>."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1430325313, "post_id": 29949235, "comment_id": 48019912, "body": "there is a (very unlikely) chance that all the dice rolls yield the same pair of numbers, say 5, so the value format needs to allow for the max number of characters.  (and still keep everything vertically aligned) so the format for the value should be %5d"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1430325831, "post_id": 29949235, "comment_id": 48020225, "body": "IMO:  bad coding practice to try and avoid using prototypes.  (compile parameter &#39;-Wstrict-prototypes&#39; will flag such practices.)   bad coding practice placing more than one statement on a line (the variables &#39;i&#39; and &#39;sum&#39;)"}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 1, "last_activity_date": 1430324691, "last_edit_date": 1430324691, "creation_date": 1430324174, "answer_id": 29949235, "question_id": 29948695, "link": "https://stackoverflow.com/questions/29948695/create-a-dice-chart/29949235#29949235", "title": "Create a dice chart", "body": "<p>Slightly belatedly, the faults are not initialising <code>sum</code>, and <code>DICEEYES</code>.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\n#define DICE      2\n#define DICEEYES  (DICE * 6)\n#define COUNT     10000\n\nint diceRoll(int dice)\n{\n    int i, sum = 0;                         // need to initialise!\n    for(i = 0; i &lt; dice; i++)\n        sum += rand() % 6 + 1;\n    return sum;\n}\n\nint main(void)\n{\n    int i;\n    int valuesOfRoll[DICEEYS+1] = { 0 };     // size of array\n    srand((unsigned)time(0));\n\n    for(i = 0; i &lt; COUNT; i++)\n        valuesOfRoll[diceRoll(DICE)]++;\n\n    for(i = DICE; i &lt;= DICEEYES; i++)\n        printf(\"The number %2d was rolled %4d times\\n\", i, valuesOfRoll[i]);\n    return 0;\n}\n</code></pre>\n\n<p>Program output:</p>\n\n<pre><code>The number  2 was rolled  264 times\nThe number  3 was rolled  573 times\nThe number  4 was rolled  798 times\nThe number  5 was rolled 1145 times\nThe number  6 was rolled 1373 times\nThe number  7 was rolled 1697 times\nThe number  8 was rolled 1385 times\nThe number  9 was rolled 1143 times\nThe number 10 was rolled  835 times\nThe number 11 was rolled  528 times\nThe number 12 was rolled  259 times\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1430325091, "post_id": 29949493, "comment_id": 48019766, "body": "note that the first two entries in the &#39;valueOfRolls[]&#39; array are not actually used.  Not using those two values makes the code much easier to code/read/understand"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1430326005, "post_id": 29949493, "comment_id": 48020342, "body": "You should cast the return value from <code>time</code> to justify your claim of a clean compilation."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1430326223, "post_id": 29949493, "comment_id": 48020493, "body": "To be a general solution, <code>MIN_DICEROLL_VALUE</code> and <code>MAX_DICEROLL_VALUE</code> should be defined as <code>(DICE)</code> and <code>(DICE*6)</code> respectively: bad coding pratice."}], "tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1430324974, "creation_date": 1430324974, "answer_id": 29949493, "question_id": 29948695, "link": "https://stackoverflow.com/questions/29948695/create-a-dice-chart/29949493#29949493", "title": "Create a dice chart", "body": "<p>the following code</p>\n\n<pre><code>1) cleanly compiles\n2) has corrections to the output formatting\n3) properly initializes values (good case for always initialize all values)\n4) outputs the proper data\n5) does not try to fiddle offset/indexes, etc\n6) uses meaningful #define names, function parameter names, etc\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\n#define NUM_DICE           (2)\n#define NUM_ROLLS          (10000)\n#define MIN_DICEROLL_VALUE (2)\n#define MAX_DICEROLL_VALUE (12)\n\nint diceRoll(int numDice);\n\nint main(void)\n{\n    srand(time(NULL));\n\n    int valuesOfRoll[MAX_DICEROLL_VALUE+1] = { 0 }; // notice the +1\n\n    for(int i = 0; i &lt; NUM_ROLLS; i++)\n    {\n        int index = diceRoll(NUM_DICE);\n        valuesOfRoll[index]++;\n    }\n\n    for(int i = MIN_DICEROLL_VALUE; i &lt;= MAX_DICEROLL_VALUE; i++)\n    {\n        // 2d for values 2...12  5d for values 0...10000  \\n so each output on anew line\n        printf(\"The number %2d was rolled %5d times\\n\", i, valuesOfRoll[i]);\n    }\n    return 0;\n} // end function: main\n\n\nint diceRoll(int numDice)\n{\n    int sum = 0;  // be sure to initialize value\n\n    for(int i = 0; i &lt; numDice; i++)\n    {\n        sum += (rand() % 6) + 1;\n    }\n    return sum;\n} // end of function: diceRoll\n</code></pre>\n"}], "owner": {"reputation": 105, "user_id": 4248838, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/lLSBp.png?s=128&g=1", "display_name": "Valinho", "link": "https://stackoverflow.com/users/4248838/valinho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 0, "accepted_answer_id": 29948905, "answer_count": 4, "score": 2, "last_activity_date": 1430330748, "creation_date": 1430322596, "last_edit_date": 1430324042, "question_id": 29948695, "link": "https://stackoverflow.com/questions/29948695/create-a-dice-chart", "title": "Create a dice chart", "body": "<p>I am facing a problem right now and can't seem to solve it. Whenever I start my code I get a segmentation fault. My aim is to roll two dice. The value is generated by a random number. I want to roll 10000 times and save the values within an array, so I can create a little chart at the end which will show the diced the values. I appreciate any help and hints on how to solve the problem. Here is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\n#define DICE      2\n#define DICEEYES  (DICE * 6) -DICE +1\n#define COUNT     10000\n\nint diceRoll(int dice);\n\nint main(void)\n{\n  srand(time(0));\n  int valuesOfRoll[DICEEYES] = { 0 };\n  for(int i = 0; i &lt; COUNT; i++)\n  {\n    int index = diceRoll(DICE) - DICE;\n    valuesOfRoll[index]++;\n  }\n  for(int i = 0; i &lt; DICEEYES; i++)\n  {\n    if(valuesOfRoll[i] &lt; 1) continue;\n    printf(\"The number %2d was rolled %4d times\\r\\n\", i + DICE, valuesOfRoll[i]);\n  }\n  return 0;\n}\n\nint diceRoll(int dice)\n{\n  int sum;\n  for(int i = 0; i &lt; dice; i++)\n  {\n    sum += rand() % 6 + 1;\n  }\n  return sum;\n}\n</code></pre>\n"}, {"tags": ["c", "translation", "gettext", "po", "mo"], "answers": [{"tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 2, "last_activity_date": 1430322283, "creation_date": 1430322283, "answer_id": 29948576, "question_id": 29948518, "link": "https://stackoverflow.com/questions/29948518/load-mo-files-in-c/29948576#29948576", "title": "Load .mo files in C", "body": "<p>You don't load the files directly, that's done by gettext.</p>\n\n<p>See <a href=\"http://www.gnu.org/software/gettext/manual/gettext.html\" rel=\"nofollow\">the manual</a>. It's long, but it's pretty good.</p>\n"}], "owner": {"reputation": 1668, "user_id": 4761359, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-j4tZfcd7b-Q/AAAAAAAAAAI/AAAAAAAACPo/jJ3n99V4ccM/photo.jpg?sz=128", "display_name": "Jorge Barroso", "link": "https://stackoverflow.com/users/4761359/jorge-barroso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1430322283, "creation_date": 1430322114, "last_edit_date": 1495540708, "question_id": 29948518, "link": "https://stackoverflow.com/questions/29948518/load-mo-files-in-c", "title": "Load .mo files in C", "body": "<p>I've been working on a project, and I've finally decided to make translation files, so now I have translated .po files, but I don't know how to use it now on C, just that I have to make .mo files using those .po (no mattter with that).</p>\n\n<p>I've been looking around but I've found answers which are for php (like this one: <a href=\"https://stackoverflow.com/questions/8802093/how-to-run-or-load-po-mo-files-for-localization-in-php\">How to run or load .po/.mo files for localization in php</a>) but nothing for C so if you could help me it would be great.</p>\n"}, {"tags": ["python", "c++", "c", "module"], "comments": [{"owner": {"reputation": 51, "user_id": 4847041, "user_type": "registered", "profile_image": "https://graph.facebook.com/502924550593/picture?type=large", "display_name": "Thorsten Kurth", "link": "https://stackoverflow.com/users/4847041/thorsten-kurth"}, "edited": false, "score": 0, "creation_date": 1430526330, "post_id": 29948345, "comment_id": 48113433, "body": "Ok, since I got no response so far and I really do not like the API documentation, I want to use boost.python. However, it seems trickier than I though. That is my whole method now:  BOOST_PYTHON_MODULE(threevecd) {     class_&lt; threevec&lt;double&gt; &gt;(&quot;threevecd&quot;,init&lt;double,double,double&gt;()); }  BOOST_PYTHON_MODULE(LuscherClm) {     class_&lt;Zetafunc&gt;(&quot;LuscherClm&quot;,init&lt;int,int, optional&lt;double,threevec&lt;double&gt;,double,int&gt; &gt;())     .def(&quot;eval&quot;,&amp;Zetafunc::operator(),return_value_policy&lt;return&zwnj;&#8203;_by_value&gt;());     boost::python::to_python_converter&lt;dcomplex,dcomplex_to_pyth&zwnj;&#8203;on_object&gt;(); }"}, {"owner": {"reputation": 2953, "user_id": 1805397, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BPHyG.jpg?s=128&g=1", "display_name": "wouter bolsterlee", "link": "https://stackoverflow.com/users/1805397/wouter-bolsterlee"}, "edited": false, "score": 0, "creation_date": 1430658438, "post_id": 29948345, "comment_id": 48146134, "body": "In Python, __init__() is invoked after constructing the instance, so that means you can use &#39;self&#39; without problems, since it is a valid object (although uninitialised) at that point."}, {"owner": {"reputation": 2953, "user_id": 1805397, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BPHyG.jpg?s=128&g=1", "display_name": "wouter bolsterlee", "link": "https://stackoverflow.com/users/1805397/wouter-bolsterlee"}, "edited": false, "score": 1, "creation_date": 1430658629, "post_id": 29948345, "comment_id": 48146186, "body": "re. calling the instances directly: i guess you&#39;ll want to populate the tp_call slot  (__call__() in python)."}, {"owner": {"reputation": 51, "user_id": 4847041, "user_type": "registered", "profile_image": "https://graph.facebook.com/502924550593/picture?type=large", "display_name": "Thorsten Kurth", "link": "https://stackoverflow.com/users/4847041/thorsten-kurth"}, "reply_to_user": {"reputation": 2953, "user_id": 1805397, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BPHyG.jpg?s=128&g=1", "display_name": "wouter bolsterlee", "link": "https://stackoverflow.com/users/1805397/wouter-bolsterlee"}, "edited": false, "score": 0, "creation_date": 1430853540, "post_id": 29948345, "comment_id": 48237927, "body": "Ok, thanks. But how can I get around my segfault problem? The ideal case would be to return a complex number in Python."}, {"owner": {"reputation": 2953, "user_id": 1805397, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BPHyG.jpg?s=128&g=1", "display_name": "wouter bolsterlee", "link": "https://stackoverflow.com/users/1805397/wouter-bolsterlee"}, "edited": false, "score": 0, "creation_date": 1430905495, "post_id": 29948345, "comment_id": 48259873, "body": "Have you tried the <code>Py_complex</code> type? <a href=\"https://docs.python.org/2.7/c-api/complex.html\" rel=\"nofollow noreferrer\">docs.python.org/2.7/c-api/complex.html</a>"}, {"owner": {"reputation": 51, "user_id": 4847041, "user_type": "registered", "profile_image": "https://graph.facebook.com/502924550593/picture?type=large", "display_name": "Thorsten Kurth", "link": "https://stackoverflow.com/users/4847041/thorsten-kurth"}, "reply_to_user": {"reputation": 2953, "user_id": 1805397, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BPHyG.jpg?s=128&g=1", "display_name": "wouter bolsterlee", "link": "https://stackoverflow.com/users/1805397/wouter-bolsterlee"}, "edited": false, "score": 0, "creation_date": 1430928904, "post_id": 29948345, "comment_id": 48277443, "body": "Yep, it works now, thanks."}], "answers": [{"tags": [], "owner": {"reputation": 51, "user_id": 4847041, "user_type": "registered", "profile_image": "https://graph.facebook.com/502924550593/picture?type=large", "display_name": "Thorsten Kurth", "link": "https://stackoverflow.com/users/4847041/thorsten-kurth"}, "is_accepted": true, "score": 1, "last_activity_date": 1430870894, "creation_date": 1430870894, "answer_id": 30065296, "question_id": 29948345, "link": "https://stackoverflow.com/questions/29948345/writing-a-python-module-using-c-api-and-c-classes/30065296#30065296", "title": "Writing a Python module using C/API and C++ classes", "body": "<p>Ok, I got it. The following converter does the job:</p>\n\n<pre><code>struct dcomplex_to_python_object\n{\n    static PyObject* convert(dcomplex const&amp; comp)\n    {\n        PyObject* result;\n        if(std::abs(comp.im())&lt;=std::numeric_limits&lt;double&gt;::epsilon()){\n            result=PyFloat_FromDouble(comp.re());\n        }\n        else{\n            result=PyComplex_FromDoubles(comp.re(),comp.im());\n        }\n        Py_INCREF(result);\n        return result;\n    }\n};\n</code></pre>\n\n<p>Using this converter and the post by Wouter, I suppose my question is answered. Thanks</p>\n"}], "owner": {"reputation": 51, "user_id": 4847041, "user_type": "registered", "profile_image": "https://graph.facebook.com/502924550593/picture?type=large", "display_name": "Thorsten Kurth", "link": "https://stackoverflow.com/users/4847041/thorsten-kurth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 295, "favorite_count": 0, "accepted_answer_id": 30065296, "answer_count": 1, "score": 4, "last_activity_date": 1430870894, "creation_date": 1430321678, "last_edit_date": 1430870798, "question_id": 29948345, "link": "https://stackoverflow.com/questions/29948345/writing-a-python-module-using-c-api-and-c-classes", "title": "Writing a Python module using C/API and C++ classes", "body": "<p>I am new to the business of writing custom Python modules and I am a bit confused how Capsules work. I use Python 2.7.6 from the system OSX installation and try to use Capsules (as recommended for Python > 2.7) for passing pointers around (before they used PyCObject for that). My code does not work at the moment and I would like to get some insights how things should be handled in principle here. The code should define a class LuscherClm and I want be able to do the following:</p>\n\n<pre><code>&gt;&gt;&gt; c40=Luscher(4,0)\n&gt;&gt;&gt;\n&gt;&gt;&gt; c40(0.12)\n&gt;&gt;&gt; &lt;print the result of the evaluation&gt;\n</code></pre>\n\n<p>First question: at the moment I would have to do something like:</p>\n\n<pre><code>&gt;&gt;&gt; c40=Luscher.init(4,0)\n&gt;&gt;&gt;\n&gt;&gt;&gt; c40.eval(0.12)\nSegfault \n</code></pre>\n\n<p>My first question is therefore: how do I have to modify the method table to have more operator-style casts instead of the member functions init and eval.</p>\n\n<p>However, my code has other problems and here is the relevant part (the underlying C++ class works smoothly, I use it in production a lot):</p>\n\n<p>The destructor:</p>\n\n<pre><code>//destructor\nstatic void clm_destruct(PyObject* capsule){\n    void* ptr=PyCapsule_GetPointer(capsule,\"zetfunc\");\n    Zetafunc* zetptr=static_cast&lt;Zetafunc*&gt;(ptr);\n    delete zetptr;\n    return;\n}\n</code></pre>\n\n<p>The constructor: it returns the pointer to the capsule. I do not know whether this is correct. Because in this case when I call, clm=LuscherClm.init(l,m), the clm object is a PyCapsule and has no attribute eval so that I cannot call clm.eval(x) on that. How should this be handled?</p>\n\n<pre><code>//constructor\nstatic PyObject* clm_init(PyObject* self, PyObject *args){\n    //return value\n    PyObject* result=NULL;\n\n    //parse variables\n    unsigned int lval=0;\n    int mval=0;\n    if(!PyArg_ParseTuple(args,\"li\",&amp;lval,&amp;mval)){\n        ::std::cout &lt;&lt; \"Please specify l and m!\" &lt;&lt; ::std::endl;\n        return result;\n    }\n\n    //class instance:\n    Zetafunc* zetfunc=new Zetafunc(lval,mval);\n    instanceCapsule=PyCapsule_New(static_cast&lt;void*&gt;   (zetfunc),\"zetfunc\",&amp;clm_destruct);\n    return instanceCapsule;\n}\n</code></pre>\n\n<p>So how is the capsule passed to the evaluate function? the code below is not correct since I have not updated it after moving from CObjects to Capsules. Shall the capsule be a global variable (I do not like that) or how can I pass it to the evaluation function? Or shall I call it on self, but what is self at the moment?</p>\n\n<pre><code>//evaluate the function\nstatic PyObject* clm_evaluate(PyObject* self, PyObject* args){\n    //get the PyCObject from the capsule:\n    void* tmpzetfunc=PyCapsule_GetPointer(instanceCapsule,\"zetfunc\");\n    if (PyErr_Occurred()){\n        std::cerr &lt;&lt; \"Some Error occured!\" &lt;&lt; std::endl;\n        return NULL;\n    }\n    Zetafunc* zetfunc=static_cast&lt; Zetafunc* &gt;(tmpzetfunc);\n    //parse value:\n    double x;\n    if(!PyArg_ParseTuple(args,\"d\",&amp;x)){\n        std::cerr &lt;&lt; \"Specify a number at which you want to evaluate the function\" &lt;&lt; std::endl;\n        return NULL;\n    }\n    double result=(*zetfunc)(x).re();\n\n    //return the result as a packed function:\n    return Py_BuildValue(\"d\",result);\n}\n\n//methods\nstatic PyMethodDef LuscherClmMethods[] = {\n    {\"init\",  clm_init, METH_VARARGS, \"Initialize clm class!\"},\n    {\"eval\", clm_evaluate, METH_VARARGS, \"Evaluate the Zeta-Function!\"},\n    {NULL, NULL, 0, NULL}        /* Sentinel */\n};\n</code></pre>\n\n<p>Python &lt; 3 initialisation function:</p>\n\n<pre><code>PyMODINIT_FUNC\ninitLuscherClm(void)\n{\n    PyObject *m = Py_InitModule(\"LuscherClm\", LuscherClmMethods);\n    return;\n}\n</code></pre>\n\n<p>Can you explain to me what is wrong and why? I would like to stay away from SWIG or boost if possible, since this module should be easily portable and I want to avoid having to install additional packages every time I want to use it somewhere else. \nFurther: what is the overhead produced by the C/API in calling the function? I need to call it an order of O(10^6) times and I would still like it to be fast.</p>\n\n<p>Ok, I am using boost.python now but I get a segfault when I run object.eval(). That is my procedure now:</p>\n\n<pre><code>BOOST_PYTHON_MODULE(threevecd)\n{\n    class_&lt; threevec&lt;double&gt; &gt;(\"threevecd\",init&lt;double,double,double&gt;());\n}\n\nBOOST_PYTHON_MODULE(LuscherClm)\n{\n    class_&lt;Zetafunc&gt;(\"LuscherClm\",init&lt;int,int, optional&lt;double,threevec&lt;double&gt;,double,int&gt; &gt;())\n    .def(\"eval\",&amp;Zetafunc::operator(),return_value_policy&lt;return_by_value&gt;());\n    boost::python::to_python_converter&lt;dcomplex,dcomplex_to_python_object&gt;();\n}\n</code></pre>\n\n<p>dcomplex is my own complex number implementation. So I had to write a converter:</p>\n\n<pre><code>struct dcomplex_to_python_object\n{\n    static PyObject* convert(dcomplex const&amp; comp)\n    {\n        if(fabs(comp.im())&lt;std::numeric_limits&lt;double&gt;::epsilon()){\n            boost::python::object result=boost::python::object(complex&lt;double&gt;(comp.re(),comp.im()));\n            return boost::python::incref(result.ptr());\n        }\n        else{\n            return Py_BuildValue(\"d\",comp.re());\n        }\n    }\n};\n</code></pre>\n\n<p>Complex128 is a numpy extension which is not understood by boost. So my questions are:\n1) how can I return a complex number as a python datatype (is complex a standard python type?)\n2) Why do I get a segfault. My result in my testcase is real so it should default to the else statement. I guess that the pointer runs out of scope and thats it. But even in the if-case (where I take care about ref-increments), it segfaults. Can someone help me with the type conversion issue?</p>\n\n<p>Thanks\nThorsten</p>\n"}, {"tags": ["c++", "c", "segmentation-fault", "valgrind"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1430320415, "post_id": 29947806, "comment_id": 48016599, "body": "And then I am supposed to guess what caused it? where is the code?"}, {"owner": {"reputation": 4151, "user_id": 1764386, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d3e9fd784eadc2deaf33fa9df8b06605?s=128&d=identicon&r=PG", "display_name": "user1764386", "link": "https://stackoverflow.com/users/1764386/user1764386"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1430320604, "post_id": 29947806, "comment_id": 48016732, "body": "I am just looking for explanation of how an invalid read could manifest on computer but not another.  My perception was that the invalid read would always be present, and the behaviour resulting from the invalid read is what could vary."}, {"owner": {"reputation": 4151, "user_id": 1764386, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d3e9fd784eadc2deaf33fa9df8b06605?s=128&d=identicon&r=PG", "display_name": "user1764386", "link": "https://stackoverflow.com/users/1764386/user1764386"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1430320668, "post_id": 29947806, "comment_id": 48016780, "body": "I edited the question to specify that the compiler version is the same"}, {"owner": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "edited": false, "score": 1, "creation_date": 1430320906, "post_id": 29947806, "comment_id": 48016976, "body": "It looks like the address is a random value, so it might point to readable memory by accident in some circumstances, and not in others."}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1430321292, "post_id": 29947806, "comment_id": 48017270, "body": "The address interpreted as ASCII spells out <code>&quot;d.td&quot;</code> (MSB first). No idea if that means anything to you, but often when ASCII text appears in addresses, that can help to a) identify the issue as an overwrite and b) help identify the source."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1430321737, "post_id": 29947806, "comment_id": 48017538, "body": "A great number of things could cause the program to follow an execution path different enough in one environment than it is in the other to result in the invalid read occuring only in one context.  Different hardware, different library or compiler versions, different compilation options, different time of day, different working directory, different user name, different program arguments, and many, many more differences could have an effect.  Without any code, we have no chance of narrowing it down."}, {"owner": {"reputation": 1261, "user_id": 1846228, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9a17eedf0472db2700ce6f3d8848265d?s=128&d=identicon&r=PG", "display_name": "XapaJIaMnu", "link": "https://stackoverflow.com/users/1846228/xapajiamnu"}, "edited": false, "score": 0, "creation_date": 1430321774, "post_id": 29947806, "comment_id": 48017558, "body": "Check the version of libraries used on both systems."}, {"owner": {"reputation": 2157, "user_id": 3865653, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Fv3Fj.jpg?s=128&g=1", "display_name": "Deanie", "link": "https://stackoverflow.com/users/3865653/deanie"}, "edited": false, "score": 0, "creation_date": 1430325468, "post_id": 29947806, "comment_id": 48020017, "body": "What version of Valgrind are you using.  I used an older version which complained about <code>Invalid read of size 1</code> from strlen (another function called strlen, not my program).  The solution was to update my Valgrind.  Then the error disappeared.  Make sure you are running the same version of Vagrind on both systems."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1430325620, "post_id": 29947806, "comment_id": 48020112, "body": "Are you sure you running the exact same test cases on both machines? That is the program takes the exact same execution path?"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1430325728, "post_id": 29947806, "comment_id": 48020172, "body": "There is a bug in the source. Feel lucky you at least have <b>one</b> machine pointing you to this. Fix the bug on this latter machine and be happy."}], "answers": [{"tags": [], "owner": {"reputation": 4182, "user_id": 2992101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7363e9ce46406af3326492e2f6cf40ca?s=128&d=identicon&r=PG", "display_name": "michalsrb", "link": "https://stackoverflow.com/users/2992101/michalsrb"}, "is_accepted": false, "score": 3, "last_activity_date": 1430320941, "creation_date": 1430320941, "answer_id": 29948061, "question_id": 29947806, "link": "https://stackoverflow.com/questions/29947806/valgrind-reporting-invalid-read-on-one-system-but-not-another/29948061#29948061", "title": "Valgrind reporting invalid read on one system but not another", "body": "<p>Valgrind makes the running environment more deterministic, but it does not eliminate all randomness. Maybe the other machine has bit different versions of libraries installed, or anything external it is using (files, network..) is different, the code execution does not have to be exactly the same.</p>\n\n<p>You should look at the stack trace and analyze the code where the error happens. If it is not obvious from the stack trace alone, you can start <code>valgrind</code> with <code>--vgdb=full</code> parameter. It will pause the execution once the error happens and print out instructions how to attach <code>gdb</code>. Or you can just run the program under debugger directly - you wrote that it crashes even without valgrind.</p>\n"}, {"tags": [], "owner": {"reputation": 123, "user_id": 2043481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac913bbac49b13d835c59e0d4c9257f6?s=128&d=identicon&r=PG", "display_name": "Simon", "link": "https://stackoverflow.com/users/2043481/simon"}, "is_accepted": false, "score": 0, "last_activity_date": 1430323487, "creation_date": 1430323487, "answer_id": 29949003, "question_id": 29947806, "link": "https://stackoverflow.com/questions/29947806/valgrind-reporting-invalid-read-on-one-system-but-not-another/29949003#29949003", "title": "Valgrind reporting invalid read on one system but not another", "body": "<p>Different library versions are the best guess, judging from the sparse information you gave. Things to try:</p>\n\n<p>1) Bring both machines up to date via package manager and try again</p>\n\n<p>2) Run <code>ldd [binary]</code> to see all libraries used by the program in question. Run something like <code>md5sum</code> on them on both machines to find out if there are differences.</p>\n\n<p>In general I made the experience that valgrind is really bad at detecting invalid memory access on the stack, so this might be a hidden root cause. If all else fails, you might want to try using clang and address sanitizer. It might find things valgrind doesn't catch, and vice versa.</p>\n"}, {"tags": [], "owner": {"reputation": 2157, "user_id": 3865653, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Fv3Fj.jpg?s=128&g=1", "display_name": "Deanie", "link": "https://stackoverflow.com/users/3865653/deanie"}, "is_accepted": false, "score": 0, "last_activity_date": 1430325972, "creation_date": 1430325972, "answer_id": 29949809, "question_id": 29947806, "link": "https://stackoverflow.com/questions/29947806/valgrind-reporting-invalid-read-on-one-system-but-not-another/29949809#29949809", "title": "Valgrind reporting invalid read on one system but not another", "body": "<p>This could be caused by using different versions of Valgrind.</p>\n\n<p>Some common false positive errors get removed in newer versions.  Which would explain why one machine complains about it (older version) and another one doesn't (newer version).</p>\n"}], "owner": {"reputation": 4151, "user_id": 1764386, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d3e9fd784eadc2deaf33fa9df8b06605?s=128&d=identicon&r=PG", "display_name": "user1764386", "link": "https://stackoverflow.com/users/1764386/user1764386"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 310, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1430325972, "creation_date": 1430320320, "last_edit_date": 1430320646, "question_id": 29947806, "link": "https://stackoverflow.com/questions/29947806/valgrind-reporting-invalid-read-on-one-system-but-not-another", "title": "Valgrind reporting invalid read on one system but not another", "body": "<p>I need to run a rather large software package on a new machine for work.  The application is written in C and C++ and I am running on CentOS 6.5.</p>\n\n<p>The program builds fine, but segfaults when I go to run it.  Using valgrind, I see the following error reported at the location of the segfault:</p>\n\n<pre><code>==23843== Invalid read of size 4\n[stack trace here]\n==23843==  Address 0x642e7464 is not stack'd, malloc'd or (recently) free'd\n</code></pre>\n\n<p>So for some reason we are reading from memory we aren't supposed to and are invoking undefined behaviour.  When I tar up my source files, take them to another CentOS 6.5 machine (w/ same kernel) and compile them (with same makefiles and same GCC version) the program seems to run fine.</p>\n\n<p>I ran valgrind on that machine as well and expected to see the invalid read again.  My thought was that the invalid read would always be present, yet because the behaviour is undefined things just happened to work correctly on one machine and not on the other.</p>\n\n<p>What I found, however, was that valgrind reports no read errors on the second machine.  How could this be possible?  </p>\n"}, {"tags": ["c", "linux", "macos"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7256215"}, "edited": false, "score": 0, "creation_date": 1520179400, "post_id": 29947424, "comment_id": 85199728, "body": "Hi, I&#39;m dealing with the exact same issue. perhaps did you find any other image format besides <code>dmg</code> which can be used in <code>mount(2)</code> command to mount the image file directly to mountpoint ? thanks"}, {"owner": {"reputation": 1567, "user_id": 3049753, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/P4ed5.jpg?s=128&g=1", "display_name": "RedEyed", "link": "https://stackoverflow.com/users/3049753/redeyed"}, "edited": false, "score": 0, "creation_date": 1520239339, "post_id": 29947424, "comment_id": 85217696, "body": "Unfortunately, I have not programmed OSX for several years, so I can&#39;t help..."}], "answers": [{"comments": [{"owner": {"reputation": 1567, "user_id": 3049753, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/P4ed5.jpg?s=128&g=1", "display_name": "RedEyed", "link": "https://stackoverflow.com/users/3049753/redeyed"}, "edited": false, "score": 0, "creation_date": 1430396421, "post_id": 29949677, "comment_id": 48054746, "body": "Thanks! I made the similar code as <a href=\"http://www.opensource.apple.com/source/diskdev_cmds/diskdev_cmds-491/mount_hfs.tproj/mount_hfs.c\" rel=\"nofollow noreferrer\">source</a> which you gave me. But it doesn&#39;t work :( Also, I cannot mount the dmg image using mount_hfs/mount command from the shell/bash/terminal. But I can mount image using command:  sudo hdiutil attach -mountpoint &quot;${MountPointPath}&quot; &quot;${Image}&quot;  How can I mount dmg image using mount/mount_hfs commands or  using C language? Thanks."}, {"owner": {"reputation": 4113, "user_id": 4699494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/442751ccd19b23782d3a4def58265f88?s=128&d=identicon&r=PG&f=1", "display_name": "baf", "link": "https://stackoverflow.com/users/4699494/baf"}, "reply_to_user": {"reputation": 1567, "user_id": 3049753, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/P4ed5.jpg?s=128&g=1", "display_name": "RedEyed", "link": "https://stackoverflow.com/users/3049753/redeyed"}, "edited": false, "score": 0, "creation_date": 1430674543, "post_id": 29949677, "comment_id": 48151547, "body": "@Vadim If you are trying to mount apple <code>dmg</code> image, AFAIK this is a proprietary format, not well documented. See <a href=\"http://newosxbook.com/DMG.html\" rel=\"nofollow noreferrer\">newosxbook.com/DMG.html</a>. You may try to ask new question how to mount OS X proprietary <code>dmg</code> image programatically."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7256215"}, "edited": false, "score": 0, "creation_date": 1520179340, "post_id": 29949677, "comment_id": 85199702, "body": "perhaps you&#39;re familiar with a different image format rather then <code>dmg</code> which can work in macOS. i also wish to mount my image file which is properly formatted to <code>hfs+</code>, and cannot perform the attaching of <code>dmg</code> image to device file programmatically."}], "tags": [], "owner": {"reputation": 4113, "user_id": 4699494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/442751ccd19b23782d3a4def58265f88?s=128&d=identicon&r=PG&f=1", "display_name": "baf", "link": "https://stackoverflow.com/users/4699494/baf"}, "is_accepted": true, "score": 1, "last_activity_date": 1430325540, "creation_date": 1430325540, "answer_id": 29949677, "question_id": 29947424, "link": "https://stackoverflow.com/questions/29947424/how-to-mount-image-using-mount2/29949677#29949677", "title": "How to mount image using mount(2)", "body": "<p>There is no <code>hfs+</code> type in</p>\n\n<pre><code>mount(\"hfs+\", m_TargetPath.c_str(), MNT_RDONLY, &amp;data)\n</code></pre>\n\n<p>You should use <code>hfs</code> to handle both HFS and HFS+. Look for example at <a href=\"https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man8/mount_hfs.8.html\" rel=\"nofollow\">mount_hfs</a> command <a href=\"http://www.opensource.apple.com/source/diskdev_cmds/diskdev_cmds-491/mount_hfs.tproj/mount_hfs.c\" rel=\"nofollow\">source</a>:</p>\n\n<pre><code>#define HFS_MOUNT_TYPE              \"hfs\"\n</code></pre>\n"}], "owner": {"reputation": 1567, "user_id": 3049753, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/P4ed5.jpg?s=128&g=1", "display_name": "RedEyed", "link": "https://stackoverflow.com/users/3049753/redeyed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 162, "favorite_count": 0, "accepted_answer_id": 29949677, "answer_count": 1, "score": 1, "last_activity_date": 1430325540, "creation_date": 1430319447, "question_id": 29947424, "link": "https://stackoverflow.com/questions/29947424/how-to-mount-image-using-mount2", "title": "How to mount image using mount(2)", "body": "<p>I cannot mount some IMAGE on the MacOSX 10.10 via C function <a href=\"https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man2/mount.2.html\" rel=\"nofollow\">mount()</a>.</p>\n\n<p>I use following code</p>\n\n<pre><code>...\n    char ImgPath[m_IMGName.size() + 1];\n    memcpy(ImgPath, m_IMGName.c_str(), m_IMGName.size() + 1);\n    struct hfs_mount_args data;\n    data.fspec = ImgPath;\n    if(mount(\"hfs+\", m_TargetPath.c_str(), MNT_RDONLY, &amp;data)){\n        throw SysCallTestExeption(errno, \"mount() is failed!\", GET_FILE_LINE_FUNC_ARG);\n    }\n...\n</code></pre>\n\n<p>And when I start the program I get the error \"mount() is failed! Error(Operation not supported by device).\"</p>\n\n<p>And image was mounted if I use the following command:</p>\n\n<pre><code>sudo hdiutil attach -mountpoint \"${MountPointPath}\" \"${Image}\"\n</code></pre>\n\n<p>Also, when I use <a href=\"http://linux.die.net/man/2/mount\" rel=\"nofollow\">mount()</a> on the Linux - All is OK.\nFollowing Linux code:</p>\n\n<pre><code>...\nif(mount(m_IMGName.c_str(), m_TargetPath.c_str(), m_FSType.c_str(), 0, m_Opts.c_str())){\n        throw SysCallTestExeption(errno, \"mount() is failed!\", GET_FILE_LINE_FUNC_ARG);\n    }\n...\n</code></pre>\n"}, {"tags": ["c", "listview", "winapi"], "comments": [{"owner": {"reputation": 158803, "user_id": 246342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8ba0aea3f521082f18dd7c186e7d4c3?s=128&d=identicon&r=PG", "display_name": "Alex K.", "link": "https://stackoverflow.com/users/246342/alex-k"}, "edited": false, "score": 0, "creation_date": 1430319437, "post_id": 29947377, "comment_id": 48015759, "body": "Its a field that&#39;s populated when you <i>receive</i> that struct from an API call, its irrelevant when dispatching it."}], "answers": [{"tags": [], "owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "is_accepted": true, "score": 1, "last_activity_date": 1430325153, "last_edit_date": 1430325153, "creation_date": 1430324280, "answer_id": 29949265, "question_id": 29947377, "link": "https://stackoverflow.com/questions/29947377/what-is-the-purpose-of-lvcolumn-cchtextmax-and-lvitem-cchtextmax/29949265#29949265", "title": "What is the purpose of LVCOLUMN.cchTextMax and LVITEM.cchTextMax?", "body": "<p>The documentation for the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb774760.aspx\" rel=\"nofollow\">LVITEM structure</a> has the following to say on the <code>cchTextMax</code> member:</p>\n\n<blockquote>\n  <p>This member is only used when the structure receives item attributes. It is ignored when the structure specifies item attributes. For example, <strong>cchTextMax</strong> is ignored during <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb761186.aspx\" rel=\"nofollow\"><strong>LVM_SETITEM</strong></a> and <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb761107.aspx\" rel=\"nofollow\"><strong>LVM_INSERTITEM</strong></a>. It is read-only during <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb774818.aspx\" rel=\"nofollow\">LVN_GETDISPINFO</a> and other LVN_ notifications.</p>\n</blockquote>\n\n<p>Unless you are using this structure to retrieve item information, this member is ignored. When receiving data you have to pass a pointer to a buffer to <code>pszText</code>, and communicate its size through the <code>cchTextMax</code> member.</p>\n\n<p>This is a common pattern throughout the Windows API, where the same structure is used to set and query values. The semantics of the individual members depend on the direction. Other common structures, that are used in a similar fashion include <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb773456.aspx\" rel=\"nofollow\">TVITEM</a> or <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms647578.aspx\" rel=\"nofollow\">MENUITEMINFO</a>, for example.</p>\n"}], "owner": {"reputation": 521, "user_id": 4582812, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/7a1b31917b1c556fd426c990c21019b3?s=128&d=identicon&r=PG&f=1", "display_name": "user4582812", "link": "https://stackoverflow.com/users/4582812/user4582812"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 494, "favorite_count": 0, "accepted_answer_id": 29949265, "answer_count": 1, "score": 0, "last_activity_date": 1430325153, "creation_date": 1430319342, "question_id": 29947377, "link": "https://stackoverflow.com/questions/29947377/what-is-the-purpose-of-lvcolumn-cchtextmax-and-lvitem-cchtextmax", "title": "What is the purpose of LVCOLUMN.cchTextMax and LVITEM.cchTextMax?", "body": "<p>I have tried to set the values of <code>LVCOLUMN.cchTextMax</code> and <code>LVITEM.cchTextMax</code> to a random value (less than the corresponding string length) and it worked, did it work by mistake or these fields are not necessary to set?</p>\n\n<p>I have also seen examples that do not use these fields, for example: <a href=\"http://www.codeproject.com/Articles/9148/C-functions-to-insert-columns-items-and-subitems-i\" rel=\"nofollow\">http://www.codeproject.com/Articles/9148/C-functions-to-insert-columns-items-and-subitems-i</a></p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 3785, "user_id": 4427938, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/M6mua.png?s=128&g=1", "display_name": "Ayushi Jha", "link": "https://stackoverflow.com/users/4427938/ayushi-jha"}, "edited": false, "score": 0, "creation_date": 1430319185, "post_id": 29947235, "comment_id": 48015525, "body": "How do you call your function?"}, {"owner": {"reputation": 4833, "user_id": 509839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nzm8B.jpg?s=128&g=1", "display_name": "Don Cruickshank", "link": "https://stackoverflow.com/users/509839/don-cruickshank"}, "edited": false, "score": 0, "creation_date": 1430319217, "post_id": 29947235, "comment_id": 48015552, "body": "Since you are getting an error, you should include it in your question."}, {"owner": {"reputation": 141, "user_id": 4174752, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2b15fc239013f566a29568391ba92c1d?s=128&d=identicon&r=PG&f=1", "display_name": "Defa1t", "link": "https://stackoverflow.com/users/4174752/defa1t"}, "edited": false, "score": 0, "creation_date": 1430319252, "post_id": 29947235, "comment_id": 48015576, "body": "fillTable((char *)tableValues); , I have a similar function that does work that prints the table out, I call it as &quot;printTable((char *)tableValues);&quot; so I assumed I could call it the same way"}], "answers": [{"comments": [{"owner": {"reputation": 141, "user_id": 4174752, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2b15fc239013f566a29568391ba92c1d?s=128&d=identicon&r=PG&f=1", "display_name": "Defa1t", "link": "https://stackoverflow.com/users/4174752/defa1t"}, "edited": false, "score": 0, "creation_date": 1430319474, "post_id": 29947390, "comment_id": 48015793, "body": "I do that in my other function, printTable. I&#39;ve tried printing before and after the fillTable function, and my table with the &quot;-&quot;s prints fine, but gets stuck during the function fillTable"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 141, "user_id": 4174752, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2b15fc239013f566a29568391ba92c1d?s=128&d=identicon&r=PG&f=1", "display_name": "Defa1t", "link": "https://stackoverflow.com/users/4174752/defa1t"}, "edited": false, "score": 0, "creation_date": 1430319511, "post_id": 29947390, "comment_id": 48015816, "body": "@Defa1t that is unecessarily complicated, write code that looks natural when you read it, not just code that works. And parametrize as much as you can, that way your code is much more extensible and scalable."}, {"owner": {"reputation": 3785, "user_id": 4427938, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/M6mua.png?s=128&g=1", "display_name": "Ayushi Jha", "link": "https://stackoverflow.com/users/4427938/ayushi-jha"}, "reply_to_user": {"reputation": 141, "user_id": 4174752, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2b15fc239013f566a29568391ba92c1d?s=128&d=identicon&r=PG&f=1", "display_name": "Defa1t", "link": "https://stackoverflow.com/users/4174752/defa1t"}, "edited": false, "score": 0, "creation_date": 1430319891, "post_id": 29947390, "comment_id": 48016158, "body": "@Defa1t: Edited the code."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1430320809, "post_id": 29947390, "comment_id": 48016897, "body": "That is not correct. The array size is <code>xsize-1</code> x <code>ysize-1</code>."}], "tags": [], "owner": {"reputation": 3785, "user_id": 4427938, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/M6mua.png?s=128&g=1", "display_name": "Ayushi Jha", "link": "https://stackoverflow.com/users/4427938/ayushi-jha"}, "is_accepted": true, "score": 1, "last_activity_date": 1430321152, "last_edit_date": 1430321152, "creation_date": 1430319364, "answer_id": 29947390, "question_id": 29947235, "link": "https://stackoverflow.com/questions/29947235/passing-multi-dimensional-arrays-into-functions-and-editing-values/29947390#29947390", "title": "Passing multi-dimensional arrays into functions and editing values", "body": "<p>Try <a href=\"http://www.geeksforgeeks.org/pass-2d-array-parameter-c/\" rel=\"nofollow\">this</a>,</p>\n\n<pre><code>void fillTable(char *tableValues){\nfor ( int i = 0 ; i &lt; xsize ; i++ ){\n    for ( int j = 0 ; j &lt; ysize ; j++ ){\n        if ( *((tableValues +i*(xsize-1))+j)=='-')\n            *((tableValues+i*(xsize-1))+j) = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\"[rand () % 26];\n    }\n}\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 1, "last_activity_date": 1430319377, "creation_date": 1430319377, "answer_id": 29947393, "question_id": 29947235, "link": "https://stackoverflow.com/questions/29947235/passing-multi-dimensional-arrays-into-functions-and-editing-values/29947393#29947393", "title": "Passing multi-dimensional arrays into functions and editing values", "body": "<p>You are passing an 2d array and the function expects a pointer to <code>char</code> which is not compatible, specially accessing it with two subscript operators is wrong, you will need to change your function signature to something like</p>\n\n<pre><code>char (int xsize, int ysize, char array[xsize][ysize])\n { \n }\n</code></pre>\n\n<p>don't declare <code>xsize</code> and <code>ysize</code> as globals, just pass them to the functions so that way the functions are really reusable, otherwise there is very little to gain in wrinting functions.</p>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1430319396, "creation_date": 1430319396, "answer_id": 29947401, "question_id": 29947235, "link": "https://stackoverflow.com/questions/29947235/passing-multi-dimensional-arrays-into-functions-and-editing-values/29947401#29947401", "title": "Passing multi-dimensional arrays into functions and editing values", "body": "<p>The function should be defined like</p>\n\n<pre><code>void fillTable( char ( *tableValues )[ysize-1], int rows )\n{\n    for ( int i = 0 ; i &lt; rows ; i++ )\n    {\n        for ( int j = 0 ; j &lt; ysize - 1 ; j++ )\n        {\n            if ( tableValues[i][j] == '-' )\n                tableValues[i][j] = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\"[rand () % 26];\n        }\n    }\n}\n</code></pre>\n\n<p>provided that <code>ysize</code> is some defined constant.</p>\n\n<p>Otherwise if your compiler supports Variable Length Arrays then it can be defined like</p>\n\n<pre><code>void fillTable( int rows, int cols, char tableValues[rows][cols] )\n{\n    for ( int i = 0 ; i &lt; rows ; i++ )\n    {\n        for ( int j = 0 ; j &lt; cols ; j++ )\n        {\n            if ( tableValues[i][j] == '-' )\n                tableValues[i][j] = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\"[rand () % 26];\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 141, "user_id": 4174752, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2b15fc239013f566a29568391ba92c1d?s=128&d=identicon&r=PG&f=1", "display_name": "Defa1t", "link": "https://stackoverflow.com/users/4174752/defa1t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "closed_date": 1430319439, "accepted_answer_id": 29947390, "answer_count": 3, "score": 0, "last_activity_date": 1430321152, "creation_date": 1430319000, "last_edit_date": 1430319287, "question_id": 29947235, "link": "https://stackoverflow.com/questions/29947235/passing-multi-dimensional-arrays-into-functions-and-editing-values", "closed_reason": "Duplicate", "title": "Passing multi-dimensional arrays into functions and editing values", "body": "<p>I'm working on creating a simple wordsearch generator but having a problem passing a two dimensional array through a function and editing the value inside. I have declared my array in main as such:</p>\n\n<pre><code>char tableValues[xsize-1][ysize-1];\n</code></pre>\n\n<p>I'm filling each point in the array with a - in main, then passing it through to a function that fills the array with random letters and returns.</p>\n\n<pre><code>void fillTable(char *tableValues){\n    for ( int i = 0 ; i &lt; xsize ; i++ ){\n        for ( int j = 0 ; j &lt; ysize ; j++ ){\n            if ( tableValues[i][j]=='-')\n                tableValues[i][j] = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\"[rand () % 26];\n        }\n    }\n}\n</code></pre>\n\n<p>My problem is that an error gets flagged at the \"tableValues[i][j]\" parts, I'm not sure how else I'd edit individual points in an array with pointers. Any help would be much appreciated, thanks</p>\n\n<p>I am calling my function as</p>\n\n<pre><code>fillTable((char *)tableValues);\n</code></pre>\n"}, {"tags": ["c", "boolean", "return"], "comments": [{"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1430318003, "post_id": 29946771, "comment_id": 48014543, "body": "Both are the same. And &quot;<i>Returns true no matter the value of isFound.</i>&quot; is wrong. &quot;<i>...isFound is a local variable and is destroyed after function is finished.</i>&quot; -- Yes, but you aren&#39;t using the address of it. You are just returning the value of it(true or false). So, it isn&#39;t the problem."}, {"owner": {"reputation": 110733, "user_id": 1009479, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlrC5.jpg?s=128&g=1", "display_name": "Yu Hao", "link": "https://stackoverflow.com/users/1009479/yu-hao"}, "edited": false, "score": 6, "creation_date": 1430318021, "post_id": 29946771, "comment_id": 48014559, "body": "Provide <a href=\"http://stackoverflow.com/help/mcve\">a Minimal, Complete, and Verifiable example</a>."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1430318796, "post_id": 29946771, "comment_id": 48015234, "body": "First code return false. I don&#39;t know how can it return true...."}, {"owner": {"reputation": 8305, "user_id": 2654518, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e222ed5c00d3fece05f0121e059d7ea1?s=128&d=identicon&r=PG", "display_name": "ericbn", "link": "https://stackoverflow.com/users/2654518/ericbn"}, "edited": false, "score": 2, "creation_date": 1430318827, "post_id": 29946771, "comment_id": 48015256, "body": "Did you <code>#include &lt;stdbool.h&gt;</code>?"}, {"owner": {"reputation": 2615, "user_id": 2385414, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/DcTdB.png?s=128&g=1", "display_name": "urzeit", "link": "https://stackoverflow.com/users/2385414/urzeit"}, "edited": false, "score": 0, "creation_date": 1430319577, "post_id": 29946771, "comment_id": 48015878, "body": "There is no type named bool in plain old c and there are no keywords <code>true</code> and <code>false</code>. Please try to print out the (integer-)values of <code>true</code> and <code>false</code> to see, if they are defined strange."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 2615, "user_id": 2385414, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/DcTdB.png?s=128&g=1", "display_name": "urzeit", "link": "https://stackoverflow.com/users/2385414/urzeit"}, "edited": false, "score": 0, "creation_date": 1430319736, "post_id": 29946771, "comment_id": 48016020, "body": "@urzeit There is a type <code>bool</code>in stdbool.h which is a macro that expands to standard keyword <code>_Bool</code>. The same header contains the macros <code>true</code> and <code>false</code> which expand to 1 and 0 respectively. This was introduced in the C language 16 years ago."}, {"owner": {"reputation": 2615, "user_id": 2385414, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/DcTdB.png?s=128&g=1", "display_name": "urzeit", "link": "https://stackoverflow.com/users/2385414/urzeit"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1430319925, "post_id": 29946771, "comment_id": 48016188, "body": "@Lundin: Right, the header file was introduced in C99. It might not be there in older compilers (I wrote <i>old</i> C to that I don&#39;t have to look which standard intruduced bool...)"}, {"owner": {"reputation": 8305, "user_id": 2654518, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e222ed5c00d3fece05f0121e059d7ea1?s=128&d=identicon&r=PG", "display_name": "ericbn", "link": "https://stackoverflow.com/users/2654518/ericbn"}, "edited": false, "score": 0, "creation_date": 1430320201, "post_id": 29946771, "comment_id": 48016419, "body": "Make sure you test your code with the same scenario when changing that return code you&#39;re saying makes a difference."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 2615, "user_id": 2385414, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/DcTdB.png?s=128&g=1", "display_name": "urzeit", "link": "https://stackoverflow.com/users/2385414/urzeit"}, "edited": false, "score": 2, "creation_date": 1430320400, "post_id": 29946771, "comment_id": 48016591, "body": "@urzeit Unless the OP explicitly states that they are using some dinosaur compiler or a specific version of the standard (by adding C90 or C99 tags etc), always assume they are using the current standard."}], "answers": [{"comments": [{"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1430319266, "post_id": 29946900, "comment_id": 48015587, "body": "Your whole answer is based on <code>isFound</code> is <code>bool</code> and it&#39;s either <code>true</code> or <code>false</code>. However, this question is tagged as &#39;C&#39;, and <code>isFound</code>, even though is a <code>bool</code>, can hold any non-zero value. Using <code>isFound ? true : false;</code> to convert a non-zero to <code>false</code> is good practice and not redundant."}, {"owner": {"reputation": 8305, "user_id": 2654518, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e222ed5c00d3fece05f0121e059d7ea1?s=128&d=identicon&r=PG", "display_name": "ericbn", "link": "https://stackoverflow.com/users/2654518/ericbn"}, "reply_to_user": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1430319774, "post_id": 29946900, "comment_id": 48016050, "body": "@user3528438, updated the answer."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1430319814, "post_id": 29946900, "comment_id": 48016083, "body": "There&#39;s no references in C so it seems quite unlikely that the function returns a reference."}, {"owner": {"reputation": 8305, "user_id": 2654518, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e222ed5c00d3fece05f0121e059d7ea1?s=128&d=identicon&r=PG", "display_name": "ericbn", "link": "https://stackoverflow.com/users/2654518/ericbn"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1430320005, "post_id": 29946900, "comment_id": 48016251, "body": "@Lundin, you&#39;re right. I was led by a discussion about this that started here..."}], "tags": [], "owner": {"reputation": 8305, "user_id": 2654518, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e222ed5c00d3fece05f0121e059d7ea1?s=128&d=identicon&r=PG", "display_name": "ericbn", "link": "https://stackoverflow.com/users/2654518/ericbn"}, "is_accepted": false, "score": 1, "last_activity_date": 1430320019, "last_edit_date": 1430320019, "creation_date": 1430318215, "answer_id": 29946900, "question_id": 29946771, "link": "https://stackoverflow.com/questions/29946771/why-is-not-these-two-return-of-bool-equal/29946900#29946900", "title": "Why is not these two return of bool equal?", "body": "<p><strong>I'm assuming that your variable is declared as boolean type (</strong><code>bool isFound</code><strong>).</strong> </p>\n\n<p>The expression <code>isFound ? true : false;</code> is redundant.</p>\n\n<p>It will evaluate to <code>true</code> if <code>isFound</code> is true, or to <code>false</code> if <code>isFound</code> is false.</p>\n\n<p>It has the exact same behavior as just writing <code>isFound</code>. So <code>return isFound ? true : false;</code> is equivalent to <code>return isFound;</code></p>\n\n<p>The same applies to code like</p>\n\n<pre><code>if (isFound) {\n    return true;\n} else {\n    return false;\n}\n</code></pre>\n\n<p>which is the same as writing <code>return isFound;</code></p>\n\n<p><strong>EDIT:</strong> You said this is always returning <code>true</code>:</p>\n\n<pre><code>bool isFound = false;\nreturn isFound;\n</code></pre>\n\n<p><a href=\"http://ideone.com/KwmXZb\" rel=\"nofollow\">http://ideone.com/KwmXZb</a></p>\n\n<p>Double check the rest of the code. This alone will sure return <code>false</code>.</p>\n"}], "owner": {"reputation": 310, "user_id": 4777095, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-2OEYe9yofKc/AAAAAAAAAAI/AAAAAAAAACI/eTK5eT3KX8c/photo.jpg?sz=128", "display_name": "Henrik St&#229;hlberg", "link": "https://stackoverflow.com/users/4777095/henrik-st%c3%a5hlberg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "closed_date": 1430319326, "answer_count": 1, "score": 0, "last_activity_date": 1430320019, "creation_date": 1430317935, "last_edit_date": 1430319330, "question_id": 29946771, "link": "https://stackoverflow.com/questions/29946771/why-is-not-these-two-return-of-bool-equal", "closed_reason": "Not suitable for this site", "title": "Why is not these two return of bool equal?", "body": "<p>These two return statements does not seem to be equal and I wonder why?</p>\n\n<pre><code>bool isFound = false;\nreturn isFound;\n</code></pre>\n\n<p>Returns true no matter the value of isFound.</p>\n\n<pre><code>bool isFound = false;\nreturn isFound ? true: false;\n</code></pre>\n\n<p>Returns the value of isFound in this case false.</p>\n\n<p>I guess the answer might be that isFound is a local variable and is destroyed after function is finished.</p>\n\n<p>The return type of the function is const bool but the const doesn't seem to make a difference.</p>\n\n<pre><code>bool SecventialSearch(int* arr, int size, int target, long* time){\n\nstruct timeval start, stop;\nbool isFound = false;\nlong seconds, useconds;\nint* iter = arr;\n\ngettimeofday(&amp;start, NULL);\n\nwhile (*iter != target &amp;&amp; iter != &amp;arr[size-1])\n    iter++;\n\nif (*iter == target )\n    isFound = true;\n\ngettimeofday(&amp;stop, NULL);\n\nseconds = stop.tv_sec - start.tv_sec;\nuseconds = stop.tv_usec - start.tv_usec;\n\n*time = ((seconds)*1000000 + useconds);\nreturn isFound;\n}\n</code></pre>\n\n<p>Returns true in the following code in main even if target is not in array. Altering to isFound ? true: false; makes it work properly.</p>\n\n<pre><code>if (SecventialSearch(testArr,testArrSize,5, &amp;test))\n    printf(\"Is true.\");\nelse\n    printf(\"Is false.\");\n</code></pre>\n\n<p><img src=\"https://i.stack.imgur.com/VdfNP.png\" alt=\"enter image description here\"></p>\n"}, {"tags": ["c", "arrays", "string", "pointers", "malloc"], "comments": [{"owner": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "edited": false, "score": 2, "creation_date": 1430317828, "post_id": 29946714, "comment_id": 48014373, "body": "Welcome to Stack Overflow! Warning: You <a href=\"http://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">should not cast</a> the return of malloc. Second warning: when calling <code>sizeof</code> in <code>malloc</code> (and the like) <a href=\"http://stackoverflow.com/a/17258659/1151654\">you should always write it</a> as <code>ptr = malloc(sizeof(*ptr) * ...);</code> instead of <code>ptr = malloc(sizeof(ptrtype*) * ...);</code>."}, {"owner": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "edited": false, "score": 1, "creation_date": 1430317892, "post_id": 29946714, "comment_id": 48014445, "body": "<code>word = &quot;Test&quot;;</code> assigns the address of the string litteral <code>&quot;Test&quot;</code> to <code>word</code>, overwriting what you got in there with <code>malloc</code> in the first place. You don&#39;t seem to know what you are doing at all there and maybe should get a good tutorial or good book on C programming"}, {"owner": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "edited": false, "score": 0, "creation_date": 1430318726, "post_id": 29946714, "comment_id": 48015188, "body": "You might have to, or you might <a href=\"https://www.google.fr/search?q=C+change+char+in+string\" rel=\"nofollow noreferrer\">search how to do it</a> and then try <a href=\"http://stackoverflow.com/questions/9149327/replace-individual-character-element-of-a-string-c\">what you found is supposed to work</a>."}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1430318311, "last_edit_date": 1495540512, "creation_date": 1430317905, "answer_id": 29946762, "question_id": 29946714, "link": "https://stackoverflow.com/questions/29946714/change-value-in-pointer-string-array-in-c/29946762#29946762", "title": "Change value in pointer string array in C", "body": "<p><strong>Point 1</strong></p>\n\n<p>You don't assign <em>strings</em> after <code>malloc()</code>. Otherwise, you'll be leaking memory. Use <a href=\"http://linux.die.net/man/3/strcpy\" rel=\"nofollow noreferrer\"><code>strcpy()</code></a> instead. </p>\n\n<p>Also, please <a href=\"https://stackoverflow.com/q/605845/2173917\">do not cast</a> the return value of <code>malloc()</code> and family.</p>\n\n<p><strong>Point 2</strong></p>\n\n<p>[Without <code>malloc()</code>] <em>string literals</em> (here, <code>\"Test\"</code>) are usually stored in read only memory. Trying to alter them will invoke  <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behaviour</a>.</p>\n\n<p>Ref: As per <code>C11</code> standard, chapter \u00a76.4.5, string literals, (emphasis mine)</p>\n\n<blockquote>\n  <p>It is unspecified whether these arrays are distinct provided their elements have the appropriate values. <strong>If the program attempts to modify such an array, the behavior is undefined.</strong></p>\n</blockquote>\n\n<p>in your code,</p>\n\n<pre><code>word[2] = 'w';\n</code></pre>\n\n<p>is trying to alter the <em>string literal</em>. And segmentation fault is one of the side effects of UB.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4846819"}, "edited": false, "score": 0, "creation_date": 1430321113, "post_id": 29946786, "comment_id": 48017139, "body": "Just a last question. If &quot;Test&quot; is a string literal, why can I alter it if the array is declared by the standard array declaration word[]? I want to catch the internal representation of both declarations."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1430321574, "post_id": 29946786, "comment_id": 48017448, "body": "@morophla Because then you create a local array that you can modify like any other local variable."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4846819"}, "edited": false, "score": 0, "creation_date": 1430324625, "post_id": 29946786, "comment_id": 48019501, "body": "So the declaration &quot;char word[] = &quot;Test&quot; acts like a strcpy? The string literal is copied at the adress of the first element of the array this way?"}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 7, "last_activity_date": 1430317964, "creation_date": 1430317964, "answer_id": 29946786, "question_id": 29946714, "link": "https://stackoverflow.com/questions/29946714/change-value-in-pointer-string-array-in-c/29946786#29946786", "title": "Change value in pointer string array in C", "body": "<p>You get a crash because you do this:</p>\n\n<pre><code>word = \"Test\";\nword[2] = 'w';\n</code></pre>\n\n<p>The first assignment <em>changes</em> the pointer, so it no longer points to the memory you have allocated but to a string literal. And string literals are actually read-only character arrays. And as they are read-only, your attempt of modifying the array in the second assignment will lead to <a href=\"http://en.wikipedia.org/wiki/Undefined_behavior\"><em>undefined behavior</em></a>.</p>\n\n<p>The correct way is to <em>copy</em> the string to the memory you have allocated, which you do with the <a href=\"http://en.cppreference.com/w/c/string/byte/strcpy\"><code>strcpy</code></a> function:</p>\n\n<pre><code>strcpy(word, \"test\");\n</code></pre>\n\n<hr>\n\n<p>Another thing with the reassigning of the pointer is that you then loose the pointer to the allocated memory, and have a memory leak. You can not call <code>free</code> on the pointer either, since the memory pointed to by <code>word</code> (after your original reassignment) is no longer allocated by you, which would have caused another case of undefined behavior.</p>\n"}, {"tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 0, "last_activity_date": 1430318377, "last_edit_date": 1430318377, "creation_date": 1430318046, "answer_id": 29946820, "question_id": 29946714, "link": "https://stackoverflow.com/questions/29946714/change-value-in-pointer-string-array-in-c/29946820#29946820", "title": "Change value in pointer string array in C", "body": "<p>It depends. If the pointer pointing to a string literal the you can't. If it is an array of character then it is possible.  </p>\n\n<p>In the snippet given, you allocated memory for <code>word</code> using <code>malloc</code> and then you are assigning a string literal to <code>word</code> which let the <code>word</code> point to first character of <code>Test</code> and the previous allocated memory is not pointed by it anymore and it will cause a memory leak. In this case you can't modify <code>Test</code> by <code>word[2] = 'w';</code>. It will invoke undefined behavior.  </p>\n\n<p>Instead of <code>word = \"Test\";</code>, use <code>strcpy</code> to copy string  </p>\n\n<pre><code>strcpy(word, \"Test\");  \n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4846819"}, "edited": false, "score": 0, "creation_date": 1430330059, "post_id": 29946914, "comment_id": 48022939, "body": "So while initializing an array like word[] = &quot;Test&quot;, does it means the content of the string literal is copied in the array, more or less like strcpy?"}, {"owner": {"reputation": 7003, "user_id": 4408382, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kA8fE.png?s=128&g=1", "display_name": "geckon", "link": "https://stackoverflow.com/users/4408382/geckon"}, "edited": false, "score": 0, "creation_date": 1430385426, "post_id": 29946914, "comment_id": 48047597, "body": "@morophia You can do <code>char word[] = &quot;Test&quot;;</code> which will allocate memory on stack (not on heap) and initializes the char array with the given string. But the string must be known at compile-time."}], "tags": [], "owner": {"reputation": 7003, "user_id": 4408382, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kA8fE.png?s=128&g=1", "display_name": "geckon", "link": "https://stackoverflow.com/users/4408382/geckon"}, "is_accepted": false, "score": 0, "last_activity_date": 1430318262, "creation_date": 1430318262, "answer_id": 29946914, "question_id": 29946714, "link": "https://stackoverflow.com/questions/29946714/change-value-in-pointer-string-array-in-c/29946914#29946914", "title": "Change value in pointer string array in C", "body": "<p>Your code snippet should probably look more like this:</p>\n\n<pre><code>int maxlen = 10;\nchar *word;\nword = malloc(maxlen * sizeof(char));\nstrncpy(word, \"Test\", maxlen);\nword[2] = 'w';\n\nreturn 0;\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4846819"}, "edited": false, "score": 0, "creation_date": 1430329449, "post_id": 29947022, "comment_id": 48022561, "body": "So you say we should never cast a malloc in C. But in C++ the casting is obligatory right?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1430375246, "post_id": 29947022, "comment_id": 48041430, "body": "@morophla Yes. One of many cases where the languages aren&#39;t compatible. It doesn&#39;t really matter because you shouldn&#39;t be using malloc in C++ anyhow."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 1, "last_activity_date": 1430318512, "last_edit_date": 1495535049, "creation_date": 1430318512, "answer_id": 29947022, "question_id": 29946714, "link": "https://stackoverflow.com/questions/29946714/change-value-in-pointer-string-array-in-c/29947022#29947022", "title": "Change value in pointer string array in C", "body": "<p>There are numerous problems in your code.</p>\n\n<ul>\n<li>You should <a href=\"https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">never cast the result of malloc</a> because doing so is pointless and potentially dangerous.</li>\n<li>In C you copy strings with strcpy(), not with the assignment operator =.</li>\n<li>Since you never copied the string but just told the pointer to point some place else, you created a memory leak.</li>\n<li>And since you never copied the string, but are rather just pointing at a string literal, you invoke undefined behavior because you attempt to modify the contents of a string literal. (Remove the malloc line and you'll still have this bug.)</li>\n<li>You don't seem to free() the memory nor check the return value of malloc.</li>\n</ul>\n\n<p>Correct code:</p>\n\n<pre><code>char* word;\nword = malloc(10);\nif(word == NULL)\n{\n  // out of memory, error handling here\n}\n\nstrcpy(word, \"Test\");\nword[2] = 'w'; // should give \"Tewt\"\n...\nfree(word);\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4846819"}, "edited": false, "score": 0, "creation_date": 1430329968, "post_id": 29949992, "comment_id": 48022882, "body": "So while initializing an array like word[] = &quot;Test&quot;, does it means the content of the string literal is copied in the array, more or less like strcpy?"}], "tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1430326587, "creation_date": 1430326587, "answer_id": 29949992, "question_id": 29946714, "link": "https://stackoverflow.com/questions/29946714/change-value-in-pointer-string-array-in-c/29949992#29949992", "title": "Change value in pointer string array in C", "body": "<p>1) the pointer is 'word' is being replaced. \n That results in a memory leak  </p>\n\n<p>2) a literal is in readonly memory, \nso trying to change anything in that memory results in a seg fault event</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4846819"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5553, "favorite_count": 0, "answer_count": 6, "score": 3, "last_activity_date": 1430326587, "creation_date": 1430317790, "last_edit_date": 1430318668, "question_id": 29946714, "link": "https://stackoverflow.com/questions/29946714/change-value-in-pointer-string-array-in-c", "title": "Change value in pointer string array in C", "body": "<p>Is it possible to change a value in a character array initialized by a string pointer this way:</p>\n\n<pre><code>char *word;\nword = (char*) malloc(10 * sizeof(char));\nword = \"Test\";\nword[2] = 'w';\n\nreturn 0;\n</code></pre>\n\n<p>I get a segmentation fault while executing the above code.</p>\n"}, {"tags": ["c", "eclipse", "io"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1430317765, "post_id": 29946663, "comment_id": 48014325, "body": "did you try <code>fopen()</code>/<code>fprintf()</code>?"}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1430317835, "post_id": 29946663, "comment_id": 48014383, "body": "Your <code>scanf(&quot;%s&quot;, cognome);</code> reads into a variable named <code>cognome</code>. What&#39;s the relation between that variable and the <code>contatto a</code> that you use in e.g <code>write(df, a.cognome, sizeof(a.cognome));</code> ?"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1430319072, "post_id": 29946663, "comment_id": 48015434, "body": "You need to post the whole code, because of, as shown, the variable a is not filled with scanfs. Post contatto struct, also."}, {"owner": {"reputation": 13, "user_id": 4846691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbd7fd50bc0ef83904e1feb02b716f1d?s=128&d=identicon&r=PG&f=1", "display_name": "Greg917", "link": "https://stackoverflow.com/users/4846691/greg917"}, "edited": false, "score": 0, "creation_date": 1430322331, "post_id": 29946663, "comment_id": 48017954, "body": "Here is my whole code, divided into 2 Source file , named Server and Client:    <a href=\"http://pastebin.com/tzeUKd6C\" rel=\"nofollow noreferrer\">pastebin.com/tzeUKd6C</a> <a href=\"http://pastebin.com/hsDu9S1H\" rel=\"nofollow noreferrer\">pastebin.com/hsDu9S1H</a>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1430327424, "post_id": 29946663, "comment_id": 48021312, "body": "regarding this kind of line: &#39;scanf(&quot;%s&quot;, cognome);&#39;  always check the returned value from scanf (not the parameter value) to assure the operation was successful (in this case, the returned value should be &#39;1&#39;)   Most likely ALL the scanf calls after the first will fail because of the white space character (probably a newline) that is still in the stdin file stream  Suggest: if( 1 != scanf(&quot; %20s&quot;, a.cognome) ) { // handle error }   Notice the leading space in the format string, so white space is consumed/skipped."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1430327824, "post_id": 29946663, "comment_id": 48021580, "body": "(continued) regarding this kind of line: &#39;scanf(&quot;%s&quot;, cognome);&#39;  it seems the actual receiving array is &#39;a.cognome&#39; not &#39;cognome&#39;.     the user can overflow the input buffer &#39;a.cognome&#39; because there is no limit on the number of characters.  suggest using a length modifier that is 1 less than the length of a.cognome.  the &#39;one less than&#39; is to have room for the NUL byte appended by scanf()"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1430328129, "post_id": 29946663, "comment_id": 48021785, "body": "looking at the postbin code.   this line: &#39;#define perror(x) {puts(x); exit(1);} &#39; is a very bad idea for two main reasons.  1) perror() is system function, included in stdio.h.  (It prints the enclosed text + errno + the system message related to errno, to stderr)   2) the result is confusion in the human reader and a warning being raised by the compiler"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1430329009, "post_id": 29946663, "comment_id": 48022299, "body": "in looking at the postbin code, placing all the sub functions before where they are called, to try and avoid using prototype statements has several shortcommings.   some of those shortcomings are: 1) maintenance is much more difficult.  2) calling a sub function from a different source file is much more difficult. (will need to have prototypes for that.)  suggest a header file that contains the prototypes and (perhaps) the macro definitions.  As projects get progressively bigger (real life projects are often hundreds of files) individual header files + prototypes will be required"}, {"owner": {"reputation": 13, "user_id": 4846691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbd7fd50bc0ef83904e1feb02b716f1d?s=128&d=identicon&r=PG&f=1", "display_name": "Greg917", "link": "https://stackoverflow.com/users/4846691/greg917"}, "edited": false, "score": 0, "creation_date": 1430340573, "post_id": 29946663, "comment_id": 48029247, "body": "I&#39;ve changed partially my code following your suggestions, but the problem doesn&#39;t disappear, the file Elenco stay empty, I cannot write on it."}], "owner": {"reputation": 13, "user_id": 4846691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbd7fd50bc0ef83904e1feb02b716f1d?s=128&d=identicon&r=PG&f=1", "display_name": "Greg917", "link": "https://stackoverflow.com/users/4846691/greg917"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1430323098, "creation_date": 1430317658, "last_edit_date": 1430323098, "question_id": 29946663, "link": "https://stackoverflow.com/questions/29946663/wrong-output-on-eclipse", "title": "wrong output on eclipse", "body": "<p>I open a file called \"elenco\" in order to write strings taken from keyboard input, but the files that I create through eclipse is empty, ideas why?\nbefore this problem it regularly wrote on the file, but the output was full of strange symbols.</p>\n\n<pre><code>ds_file = open(\"elenco\",O_RDWR|O_CREAT, 0666);\nif (ds_file==-1) {\n    perror(\"Errore nell'apertura del file\");\n}\n</code></pre>\n\n<p>With this I take the strings from keyboard</p>\n\n<pre><code>printf(\"Cognome &gt;&gt; \");\n                        scanf(\"%s\", cognome);\n                        printf(\"Nome &gt;&gt; \");\n                        scanf(\"%s\", nome);\n                        printf(\"Telefono &gt;&gt; \");\n                        scanf(\"%s\", telefono);\n</code></pre>\n\n<p>And with that I write the parameters in the file list, using as support a struct called contacts</p>\n\n<pre><code>int aggiungi(contatto a, int df){\nint sizeWR;\n\nlseek(df,0,2);\n\nsizeWR=write(df, a.cognome, sizeof(a.cognome));\nif(sizeWR==-1) return 0;\nsizeWR=write(df, a.nome, sizeof(a.nome));\nif(sizeWR==-1) return 0;\nsizeWR=write(df, a.telefono, sizeof(a.telefono));\nif(sizeWR==-1) return 0;\n\nreturn 1; //contatto aggiunto correttamente\n</code></pre>\n\n<p>}</p>\n\n<p>Any ideas to solve this problem? if you need more specifications just ask,the problem is really complex to explain in few lines.</p>\n\n<p>EDIT: i explain shortly how application works: The server manages the file Elenco (creating) interacting with multiple clients from which I take (from the keyboard) name, lastname and phone number in order to create a phone book in Elenco.</p>\n\n<p>For communication between client and server use a sockets.There are others functions for research and other stuff.</p>\n\n<p>Here is whole code of my application:</p>\n\n<p><a href=\"http://pastebin.com/tzeUKd6C\" rel=\"nofollow\">http://pastebin.com/tzeUKd6C</a>\n<a href=\"http://pastebin.com/hsDu9S1H\" rel=\"nofollow\">http://pastebin.com/hsDu9S1H</a></p>\n"}, {"tags": ["c", "visual-studio", "visual-studio-2013"], "comments": [{"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "edited": false, "score": 0, "creation_date": 1430316470, "post_id": 29946003, "comment_id": 48013221, "body": "When creating the project, click on next, then uncheck the boxes below &quot;empty project&quot;, then check the &quot;empty project&quot; box. This works for console and windows type programs."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1430317203, "post_id": 29946003, "comment_id": 48013815, "body": "Please note that Visual Studio doesn&#39;t follow the C standard."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 2, "creation_date": 1430318530, "post_id": 29946003, "comment_id": 48015035, "body": "Use a standard console C++ project empty project and add c files instead of cpp"}, {"owner": {"reputation": 4974, "user_id": 2587816, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d0ec5b10cbc8a9a5b707ea67ea60f84d?s=128&d=identicon&r=PG", "display_name": "Jiminion", "link": "https://stackoverflow.com/users/2587816/jiminion"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1430319317, "post_id": 29946003, "comment_id": 48015634, "body": "@Lundin I thought VS2013 was basically C99."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1430319946, "post_id": 29946003, "comment_id": 48016202, "body": "@Jiminion It has never been good at following any C standard. If you are concerned about writing strictly conforming C programs, you should use a different compiler."}, {"owner": {"reputation": 4974, "user_id": 2587816, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d0ec5b10cbc8a9a5b707ea67ea60f84d?s=128&d=identicon&r=PG", "display_name": "Jiminion", "link": "https://stackoverflow.com/users/2587816/jiminion"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1430321122, "post_id": 29946003, "comment_id": 48017148, "body": "@Lundin  I don&#39;t disagree, but not an option."}], "answers": [{"comments": [{"owner": {"reputation": 4398, "user_id": 2012715, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/0a04a0851dba37de648917cf0abea9b8?s=128&d=identicon&r=PG", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/2012715/dmitry"}, "edited": false, "score": 0, "creation_date": 1516715791, "post_id": 31649470, "comment_id": 83795157, "body": "that&#39;s not enough. If you try <code>struct IDispatchVtbl foo;</code> and try <code>foo.</code> to see if intellisense can find members of foo, it won&#39;t work. also need <code>#ifdef __cplusplus #undef __cplusplus #endif</code>. surely there must be a workaround but I can&#39;t find one."}], "tags": [], "owner": {"reputation": 146, "user_id": 4444357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cf14b3b87065f9ec91c314c9df30dca?s=128&d=identicon&r=PG&f=1", "display_name": "Ran Bao", "link": "https://stackoverflow.com/users/4444357/ran-bao"}, "is_accepted": true, "score": 13, "last_activity_date": 1531821774, "last_edit_date": 1531821774, "creation_date": 1437989301, "answer_id": 31649470, "question_id": 29946003, "link": "https://stackoverflow.com/questions/29946003/build-a-visual-studio-2013-project-in-pure-c/31649470#31649470", "title": "Build a Visual Studio 2013 project in pure C", "body": "<p>The solution is simple and easy</p>\n\n<ol>\n<li><p>You create a new win32 console project</p></li>\n<li><p>Remove the default .cpp file</p></li>\n<li><p>Add new .c file as you wish</p></li>\n<li><p>In Properties, under C/C++ --> All Options, find \"Compile as\", then select \"Compile as C code\"</p></li>\n</ol>\n\n<p><img src=\"https://i.stack.imgur.com/J9Pnm.png\" alt=\"two muppets\" title=\"tooltip\"></p>\n\n<ol start=\"5\">\n<li><p>Simple sanity check. This code doesn't work with C++ since \"new\" is a reserved word for C++.</p>\n\n<p>int new = 10;</p></li>\n</ol>\n"}], "owner": {"reputation": 4974, "user_id": 2587816, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d0ec5b10cbc8a9a5b707ea67ea60f84d?s=128&d=identicon&r=PG", "display_name": "Jiminion", "link": "https://stackoverflow.com/users/2587816/jiminion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7098, "favorite_count": 2, "accepted_answer_id": 31649470, "answer_count": 1, "score": 3, "last_activity_date": 1531821774, "creation_date": 1430315996, "question_id": 29946003, "link": "https://stackoverflow.com/questions/29946003/build-a-visual-studio-2013-project-in-pure-c", "title": "Build a Visual Studio 2013 project in pure C", "body": "<p>What is the best way to do this?  The templates seem to allow only for C++ (which is basically compatible with C, but not the same.)  What is the proper way to do this?  (A particular #define or whatever.)  Any help would be appreciated.</p>\n"}, {"tags": ["c", "gcc", "linker", "undefined-reference", "cmocka"], "answers": [{"comments": [{"owner": {"reputation": 1144, "user_id": 2525299, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/UgIB3.png?s=128&g=1", "display_name": "neo post modern", "link": "https://stackoverflow.com/users/2525299/neo-post-modern"}, "edited": false, "score": 1, "creation_date": 1430316051, "post_id": 29945853, "comment_id": 48012823, "body": "I now successfully ran <code>gcc -o Tests tests.c -l cmocka -L &#47;usr&#47;local&#47;lib</code> but I&#39;m pretty sure the <code>-L</code> is redundant. I had forgotten to do <code>ldconfig</code> too, but thankfully there is <a href=\"http://stackoverflow.com/questions/480764/linux-error-while-loading-shared-libraries-cannot-open-shared-object-file-no-s#comment7282227_480764\">always a StackOverflow question</a>."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 1144, "user_id": 2525299, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/UgIB3.png?s=128&g=1", "display_name": "neo post modern", "link": "https://stackoverflow.com/users/2525299/neo-post-modern"}, "edited": false, "score": 1, "creation_date": 1430316116, "post_id": 29945853, "comment_id": 48012894, "body": "@neopostmodern that&#39;s why i used <b>may</b> :-)"}, {"owner": {"reputation": 1144, "user_id": 2525299, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/UgIB3.png?s=128&g=1", "display_name": "neo post modern", "link": "https://stackoverflow.com/users/2525299/neo-post-modern"}, "edited": false, "score": 0, "creation_date": 1430316861, "post_id": 29945853, "comment_id": 48013530, "body": "@SouravGhosh - <a href=\"http://meta.stackexchange.com/questions/50697/time-limit-on-accepting-an-answer\">Why is there a 15 minute time limit on accepting an answer in StackOverflow?</a>"}, {"owner": {"reputation": 8915, "user_id": 1818608, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/2c7fd43d0ea66acaf6eadc8062693a50?s=128&d=identicon&r=PG", "display_name": "Gill Bates", "link": "https://stackoverflow.com/users/1818608/gill-bates"}, "edited": false, "score": 1, "creation_date": 1440439008, "post_id": 29945853, "comment_id": 52262496, "body": "I have exactly the same problem, but this solutions doesnt help"}, {"owner": {"reputation": 8915, "user_id": 1818608, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/2c7fd43d0ea66acaf6eadc8062693a50?s=128&d=identicon&r=PG", "display_name": "Gill Bates", "link": "https://stackoverflow.com/users/1818608/gill-bates"}, "edited": false, "score": 0, "creation_date": 1440503799, "post_id": 29945853, "comment_id": 52290820, "body": "The source of my problem was that I called <code>gcc -lcmocka cmockatest.c</code> instead of <code>gcc  cmockatest.c -lcmocka</code>."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 5, "last_activity_date": 1430315660, "creation_date": 1430315660, "answer_id": 29945853, "question_id": 29945791, "link": "https://stackoverflow.com/questions/29945791/undefined-reference-to-cmocka-run-group-tests-when-running-sample-cmocka-te/29945853#29945853", "title": "&quot;undefined reference to `_cmocka_run_group_tests&#39;&quot; when running sample CMocka test", "body": "<p>Including the header files provides the forward declaration of the functions. To get the function definitions, you need to link with the library.</p>\n\n<p>You can use <code>-l</code> option with <code>gcc</code> to link to the required libarary. You may also need to use <code>-L</code> option to provide the path to the library.</p>\n"}], "owner": {"reputation": 1144, "user_id": 2525299, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/UgIB3.png?s=128&g=1", "display_name": "neo post modern", "link": "https://stackoverflow.com/users/2525299/neo-post-modern"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2927, "favorite_count": 1, "accepted_answer_id": 29945853, "answer_count": 1, "score": 4, "last_activity_date": 1430317073, "creation_date": 1430315507, "last_edit_date": 1430317073, "question_id": 29945791, "link": "https://stackoverflow.com/questions/29945791/undefined-reference-to-cmocka-run-group-tests-when-running-sample-cmocka-te", "title": "&quot;undefined reference to `_cmocka_run_group_tests&#39;&quot; when running sample CMocka test", "body": "<p>I installed the <a href=\"https://cmocka.org/\" rel=\"nofollow\">CMocka testing framework</a> and tried the <a href=\"https://api.cmocka.org/#main-test\" rel=\"nofollow\">sample code</a>:</p>\n\n<pre><code>#include &lt;stdarg.h&gt;\n#include &lt;stddef.h&gt;\n#include &lt;setjmp.h&gt;\n#include &lt;cmocka.h&gt;\n\n/* A test case that does nothing and succeeds. */\nstatic void null_test_success(void **state) {\n    (void) state; /* unused */\n}\nint main(void) {\n    const struct CMUnitTest tests[] = {\n            cmocka_unit_test(null_test_success),\n    };\n    return cmocka_run_group_tests(tests, NULL, NULL);\n}\n</code></pre>\n\n<p>But when I try to compile I get the following error:</p>\n\n<pre><code>$ gcc -o Tests tests.c\n    /tmp/ccbwAXrr.o: In function `main':\n    tests.c:(.text+0x5e): undefined reference to `_cmocka_run_group_tests'\n    collect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>What am I missing?</p>\n"}, {"tags": ["c", "debugging", "string-matching", "lcs"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1430315113, "post_id": 29945626, "comment_id": 48012011, "body": "<code>scanf(&quot;%s&quot;,&amp;x);</code>--&gt; <code>scanf(&quot;%9s&quot;,x);</code> should suffice."}, {"owner": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "edited": false, "score": 0, "creation_date": 1430315720, "post_id": 29945626, "comment_id": 48012527, "body": "You should try and use no globals."}, {"owner": {"reputation": 1785, "user_id": 4680870, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClLL3.png?s=128&g=1", "display_name": "tivn", "link": "https://stackoverflow.com/users/4680870/tivn"}, "edited": false, "score": 0, "creation_date": 1430316321, "post_id": 29945626, "comment_id": 48013098, "body": "Could you post sample input and incorrect output you have and what you expect it should output?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1430317418, "post_id": 29945626, "comment_id": 48014005, "body": "You can also have variable names longer than one letter. Especially handy if you expect someone else to be able to read your code."}, {"owner": {"reputation": 149, "user_id": 4564579, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d8613372a3fe95eb5fadd74e6854c5e2?s=128&d=identicon&r=PG&f=1", "display_name": "gospelslide", "link": "https://stackoverflow.com/users/4564579/gospelslide"}, "edited": false, "score": 0, "creation_date": 1430317845, "post_id": 29945626, "comment_id": 48014403, "body": "For input  seq 1:1000101011 &amp; seq 2:00011101 I get lcs as 001 whereas the actual answer is  0001101"}], "owner": {"reputation": 149, "user_id": 4564579, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d8613372a3fe95eb5fadd74e6854c5e2?s=128&d=identicon&r=PG&f=1", "display_name": "gospelslide", "link": "https://stackoverflow.com/users/4564579/gospelslide"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1430319280, "creation_date": 1430315078, "last_edit_date": 1430319280, "question_id": 29945626, "link": "https://stackoverflow.com/questions/29945626/error-in-finding-the-longest-common-sub-sequence-between-two-strings", "title": "error in finding the longest common sub sequence between two strings", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint m,n,a,c[20][20];\nchar x[15],y[15],b[20][20];\n\nvoid print_lcs(int i,int j)\n{\n    if(i==0 || j==0)\n        return;\n    if(b[i][j]=='C')\n    {\n        print_lcs(i-1,j-1);\n        printf(\"%c\",x[i-1]);\n    }\n    else if(b[i][j]=='U')\n        print_lcs(i-1,j);\n    else\n        print_lcs(i,j-1);\n}\n\nvoid lcs()\n{\n    int i,j;\n    m=strlen(x);\n    n=strlen(y);\n    for(i=0;i&lt;=m;i++)\n        c[i][0]=0;\n    for(i=0;i&lt;=n;i++)\n    {\n        printf(\"0\\t\");\n        c[0][i]=0;\n    }\n    printf(\"\\n\");\n    for(i=1;i&lt;=m;i++)\n    {\n        printf(\"0\\t\");\n        for(j=1;j&lt;=n;j++)\n        {\n            if(x[i-1]==y[i-1])\n            {\n                c[i][j]=c[i-1][j-1]+1;\n                b[i][j]='C';\n                printf(\"%dC\\t\",c[i][j]);\n            }\n            else if(c[i-1][j]&gt;=c[i][j-1])\n            {\n                c[i][j]=c[i-1][j];\n                b[i][j]='U';\n                printf(\"%dU\\t\",c[i][j]);\n            }\n            else\n            {\n                c[i][j]=c[i][j-1];\n                b[i][j]='L';\n                printf(\"%dL\\t\",c[i][j]);\n            }\n        }\n        printf(\"\\n\\n\");\n    }\n    printf(\"\\nLongest common subsequence is:\");\n    print_lcs(m,n);\n    printf(\"\\n\");\n    printf(\"\\nThe length of the subsequence is:%d\",c[m][n]);\n}\n\nint main()\n{\n    printf(\"Enter the 1st sequence:\");\n    scanf(\"%s\",&amp;x);\n    printf(\"\\nEnter the 2nd sequence:\");\n    scanf(\"%s\",&amp;y);\n    lcs();\n    printf(\"\\n\");\n    getch();\n    return 0;\n}\n</code></pre>\n\n<p>The function print_lcs starts from m,n and used to print the subsequence.\nthe lcs function will find the lcs the two d array b has characters C,U,L meaning top left, upper and left elements. The output I get is not the answer, it gives a subsequence shorter than the actual answer.</p>\n\n<p>For input seq 1=<code>1000101011</code> &amp; seq 2=<code>00011101</code> I get lcs as <code>001</code> whereas the actual answer is <code>0001101</code></p>\n"}, {"tags": ["c", "performance", "cuda", "gpu", "tesla"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1430317833, "post_id": 29945529, "comment_id": 48014378, "body": "Questions about graphics card hardware differences is off-topic for SO. For the question to be on-topic, you have to point out that the problem is strictly related to your software and provide an example of the troublesome code. We can&#39;t tell what you are doing wrong if we don&#39;t know what you are doing at all."}], "answers": [{"tags": [], "owner": {"reputation": 5135, "user_id": 3242721, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e611aa36c6efd0568bd7ede8993c538e?s=128&d=identicon&r=PG&f=1", "display_name": "Michal Hosala", "link": "https://stackoverflow.com/users/3242721/michal-hosala"}, "is_accepted": true, "score": 2, "last_activity_date": 1430317834, "last_edit_date": 1430317834, "creation_date": 1430317202, "answer_id": 29946480, "question_id": 29945529, "link": "https://stackoverflow.com/questions/29945529/cuda-program-running-slower-on-tesla-k20-than-gtx-965/29946480#29946480", "title": "CUDA program running slower on Tesla K20 than GTX 965", "body": "<p>Many cores do not necessarily mean shorter execution times. If your CUDA app would only be utilizing single thread and you would run your app on:</p>\n\n<ul>\n<li>K20, which has lots of cores  with 706MHz frequency,</li>\n<li>As opposed to GTX965 which has roughly half of them but working on 944MHz</li>\n</ul>\n\n<p>... then obviously GTX965 <em>can</em> work faster. In theory, as long as you would be utilizing less than 1024 cores by your app, GTX can outperform K20, in case if the memory is not the bottleneck as actually K20 has:</p>\n\n<ul>\n<li>Bigger memory bandwidth,</li>\n<li>Much more memory in general,</li>\n<li>A tiny bit higher memory clock.</li>\n</ul>\n\n<p>So, to sum up, it is quite easy to \"tailor\" the CUDA app to suit one GPU better than the others, taking hardware limitations into account. Just take into consideration such simple things as kernel launch parameters, i.e. grid size and block size.</p>\n\n<p>Also, the same goes for <a href=\"http://www.nvidia.com/docs/IO/43395/BD-05880-001_v02.pdf\" rel=\"nofollow\">C2075</a> as according to spec, its core clock is 1.15GHz, so superior to both K20 and GTX965.</p>\n"}], "owner": {"reputation": 176, "user_id": 2388474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/feb2b51440b07cf39caf0edf3702b8f3?s=128&d=identicon&r=PG", "display_name": "Srinivas", "link": "https://stackoverflow.com/users/2388474/srinivas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 335, "favorite_count": 0, "closed_date": 1430319515, "accepted_answer_id": 29946480, "answer_count": 1, "score": -1, "last_activity_date": 1430317834, "creation_date": 1430314858, "question_id": 29945529, "link": "https://stackoverflow.com/questions/29945529/cuda-program-running-slower-on-tesla-k20-than-gtx-965", "closed_reason": "Needs more focus", "title": "CUDA program running slower on Tesla K20 than GTX 965", "body": "<p>I'm doing a project where i have to compare various gpu cards for performance analysis.</p>\n\n<p>I had ran the same cuda code for Canny Edge Detection in both GPU's and found that gtx 965 is much faster(200%) than the Tesla K20. Also i observed that Tesla C2075 is running same as that of Tesla K20.</p>\n\n<p>As far as i know K20 has 2496 cores, 965 has 1024 cores and C2075 has 448 cores. K20 and C2075 are NVIDIA Kepler architecture and 965 is Maxwell architecture.</p>\n\n<p>What is it i'm doing wrong or is there any difference in hardware part that is causing this problem?</p>\n\n<p>Also, can we check the power consumed by the graphic card using any program or theoretical calculations?</p>\n"}, {"tags": ["c", "pointers", "struct", "curses", "pdcurses"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1430313564, "post_id": 29944977, "comment_id": 48010720, "body": "what is the definition of  <code>PFILMS_NEW</code>?"}, {"owner": {"reputation": 1, "user_id": 4846537, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-A2m1EGcG9NY/AAAAAAAAAAI/AAAAAAAAFDs/05KNETFVo-o/photo.jpg?sz=128", "display_name": "Gwenvael l", "link": "https://stackoverflow.com/users/4846537/gwenvael-l"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1430314025, "post_id": 29944977, "comment_id": 48011095, "body": "typedef struct {     int     nId;                    /*  Id du film                      <i>/ (...)     struct  FILMS_NEW</i> pNext;   } FILMS_NEW;  typedef FILMS_NEW * PFILMS_NEW;"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1430314177, "post_id": 29944977, "comment_id": 48011223, "body": "Please <a href=\"http://stackoverflow.com/posts/29944977/edit\">edit your question and add the details there</a>. in comments it&#39;s barely readable. Also, as a first look, do you need something like  <code>mvprintw(i, 0, (char *)&amp;pFilm-&gt;nId);</code>, (notice the <code>&amp;</code>)"}, {"owner": {"reputation": 1, "user_id": 4846537, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-A2m1EGcG9NY/AAAAAAAAAAI/AAAAAAAAFDs/05KNETFVo-o/photo.jpg?sz=128", "display_name": "Gwenvael l", "link": "https://stackoverflow.com/users/4846537/gwenvael-l"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1430315711, "post_id": 29944977, "comment_id": 48012520, "body": "I&#39;ve changed With &amp; i have no error but I have no result on my screen"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1430316418, "post_id": 29944977, "comment_id": 48013179, "body": "I think I got the problem. See the answer below."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4846537, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-A2m1EGcG9NY/AAAAAAAAAAI/AAAAAAAAFDs/05KNETFVo-o/photo.jpg?sz=128", "display_name": "Gwenvael l", "link": "https://stackoverflow.com/users/4846537/gwenvael-l"}, "edited": false, "score": 0, "creation_date": 1430318525, "post_id": 29946165, "comment_id": 48015029, "body": "same as <code>mvprintw(i, 0, (char *)&amp;pFilm-&gt;nId);</code>"}, {"owner": {"reputation": 1706, "user_id": 2906189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f346585e5c2b436ad98d6317256bc38?s=128&d=identicon&r=PG", "display_name": "William McBrine", "link": "https://stackoverflow.com/users/2906189/william-mcbrine"}, "reply_to_user": {"reputation": 1, "user_id": 4846537, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-A2m1EGcG9NY/AAAAAAAAAAI/AAAAAAAAFDs/05KNETFVo-o/photo.jpg?sz=128", "display_name": "Gwenvael l", "link": "https://stackoverflow.com/users/4846537/gwenvael-l"}, "edited": false, "score": 0, "creation_date": 1430407634, "post_id": 29946165, "comment_id": 48063145, "body": "@Gwenvael No, it&#39;s not the same, at all. You can&#39;t just take a pointer to an int, cast it as a pointer to a char, and expect that to print. You&#39;ll get gibberish, if you&#39;re lucky."}, {"owner": {"reputation": 1, "user_id": 4846537, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-A2m1EGcG9NY/AAAAAAAAAAI/AAAAAAAAFDs/05KNETFVo-o/photo.jpg?sz=128", "display_name": "Gwenvael l", "link": "https://stackoverflow.com/users/4846537/gwenvael-l"}, "edited": false, "score": 0, "creation_date": 1430501884, "post_id": 29946165, "comment_id": 48103359, "body": "Sorry when i say its same, i mean its the same result : nothing on screen :)"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 0, "last_activity_date": 1430316389, "creation_date": 1430316389, "answer_id": 29946165, "question_id": 29944977, "link": "https://stackoverflow.com/questions/29944977/pdcurses-mvprintw-error-with-structure/29946165#29946165", "title": "PDCurses mvprintw error with structure", "body": "<p>From your code, it looks like, your usage of <code>mvprintw()</code> is wrong. As per the <a href=\"http://pubs.opengroup.org/onlinepubs/7908799/xcurses/mvprintw.html\" rel=\"nofollow\">man page</a>, the synax is</p>\n\n<pre><code>int mvprintw(int y, int x, char *fmt, ...);\n</code></pre>\n\n<p>so, you need to write your code like</p>\n\n<pre><code>mvprintw(i, 0, \"%d\", pFilm-&gt;nId);  //for ints\n.\n.\nmvprintw(i, 15, \"%s\", pFilm-&gt;pszTitre); // for strings\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4846537, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-A2m1EGcG9NY/AAAAAAAAAAI/AAAAAAAAFDs/05KNETFVo-o/photo.jpg?sz=128", "display_name": "Gwenvael l", "link": "https://stackoverflow.com/users/4846537/gwenvael-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 143, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1433512307, "creation_date": 1430313461, "last_edit_date": 1433512307, "question_id": 29944977, "link": "https://stackoverflow.com/questions/29944977/pdcurses-mvprintw-error-with-structure", "title": "PDCurses mvprintw error with structure", "body": "<p>I'm using PDCurses and i want to show a list of films with it.</p>\n\n<p>My code is this one :</p>\n\n<pre><code>typedef struct{\nint     nId;                    /*  Id du film                      */\nint     nId_Genre;              /*  Id du genre                     */\nint     nId_Distributeur;       /*  Id du distributeur              */\nchar*   pszTitre;               /*  Titre du film                   */\nchar*   pszResume;              /*  Resum\u00e9 du film                  */\nchar*   pszDate_Debut;          /*  Date de d\u00e9but du film           */\nchar*   pszDate_Fin;            /*  Date de fin du film             */\nint     nDuree;                 /*  Dur\u00e9e du film                   */\nint     nAnnee;                 /*  Ann\u00e9e du film                   */\nstruct  FILMS_NEW* pNext;       /*  Pointeur sur le prochain film     */\n}FILMS_NEW;\n\ntypedef FILMS_NEW * PFILMS_NEW;\n\n\nint DisplayListFilms(){\nPFILMS_NEW pFilm;\nint nCount=0,nSizeString;\nint i=9;\nWINDOW *menu_win;\nint startx = 0;\nint starty = 0;\n\ninitscr();\nstart_color();          /* Start color functionality    */\nclear();\nnoecho();\ncbreak();   /* Line buffering disabled. pass on everything */\nstartx = (180 - WIDTH) / 2;\nstarty = (40 - HEIGHT) / 2;\n\ninit_pair(1, COLOR_GREEN, COLOR_BLACK);\nattron(COLOR_PAIR(1));\nattron(A_BOLD);\n\nmvprintw(1, startx+6, \"*************************************\\n\");\nmvprintw(2, startx+6, \"****                           ******\");\nmvprintw(3, startx+6, \"****      LISTE OF FILMS       ******\");\nmvprintw(4, startx+6, \"****                           ******\");\nmvprintw(5, startx+6, \"*************************************\");\nmvprintw(7, 0,ENTETE_F);\nrefresh();\n\nif ((pFilm = pRootFilm) == NULL)\n    return 0;\n\n\nwhile (pFilm)\n{\n    mvprintw(i, 0, (char *)pFilm-&gt;nId);\n    mvprintw(i, 5, (char *)pFilm-&gt;nId_Genre);\n    mvprintw(i, 10, (char *)pFilm-&gt;nId_Distributeur);\n    mvprintw(i, 15, pFilm-&gt;pszTitre);\n    mvprintw(i, 20, pFilm-&gt;pszResume);\n    mvprintw(i, 25, pFilm-&gt;pszDate_Debut);\n    mvprintw(i, 30, pFilm-&gt;pszDate_Fin);\n    mvprintw(i, 35, (char *)pFilm-&gt;nDuree);\n    mvprintw(i, 40, (char *)pFilm-&gt;nAnnee);\n\n    pFilm = pFilm-&gt;pNext;\n    nCount++;\n    i++;\n}\n\nreturn nCount;\n</code></pre>\n\n<p>}</p>\n\n<p>Why is it not working? And why is it working if I put mvprintw(i,0,\"toto\")?</p>\n\n<p>Pleeeease help !!!! I need to do it for next month :)</p>\n"}, {"tags": ["c", "windows", "unicode", "utf-16", "wchar-t"], "comments": [{"owner": {"reputation": 20069, "user_id": 596219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4a385671d1a06953de272d02e8095dd?s=128&d=identicon&r=PG", "display_name": "\u4e00\u4e8c\u4e09", "link": "https://stackoverflow.com/users/596219/%e4%b8%80%e4%ba%8c%e4%b8%89"}, "edited": false, "score": 2, "creation_date": 1430313599, "post_id": 29944855, "comment_id": 48010755, "body": "&quot;UTF-16&quot; and &quot;UCS-2&quot; are separate encodings, and are not different names for the same thing. UTF-16 cannot represent characters above <code>0xFFFF</code> in less than 2 code units (UCS-2 cannot represent them at all). It&#39;s not clear what you mean by &quot;symbol&quot;, but no UTF-16 implementation should treat a surrogate pair as more than 1 code point."}, {"owner": {"reputation": 7126, "user_id": 1560774, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e5c7d8e9733ac6dee89d29d0cd0123f4?s=128&d=identicon&r=PG", "display_name": "Virus721", "link": "https://stackoverflow.com/users/1560774/virus721"}, "reply_to_user": {"reputation": 20069, "user_id": 596219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4a385671d1a06953de272d02e8095dd?s=128&d=identicon&r=PG", "display_name": "\u4e00\u4e8c\u4e09", "link": "https://stackoverflow.com/users/596219/%e4%b8%80%e4%ba%8c%e4%b8%89"}, "edited": false, "score": 0, "creation_date": 1430313924, "post_id": 29944855, "comment_id": 48011014, "body": "What I mean by symbol is what you would put at a single position if you were printing a string into a single dimension grid. These two are what I call symbols : <code>^</code> and <code>&#234;</code>. Do you know if Windows CE is using UTF-16 or UCS-2 ?"}, {"owner": {"reputation": 20069, "user_id": 596219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4a385671d1a06953de272d02e8095dd?s=128&d=identicon&r=PG", "display_name": "\u4e00\u4e8c\u4e09", "link": "https://stackoverflow.com/users/596219/%e4%b8%80%e4%ba%8c%e4%b8%89"}, "edited": false, "score": 0, "creation_date": 1430314363, "post_id": 29944855, "comment_id": 48011374, "body": "Your definition of a &quot;symbol&quot; sounds more like a &quot;<a href=\"http://unicode.org/reports/tr29/#Grapheme_Cluster_Boundaries\" rel=\"nofollow noreferrer\">grapheme cluster</a>&quot;; e.g., <code>&#234;</code> can be encoded with 1 or 2 <code>wchar_t</code> units. Windows CE has support for UTF-16: <a href=\"https://msdn.microsoft.com/en-us/library/ms904394.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/ms904394.aspx</a>"}, {"owner": {"reputation": 7126, "user_id": 1560774, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e5c7d8e9733ac6dee89d29d0cd0123f4?s=128&d=identicon&r=PG", "display_name": "Virus721", "link": "https://stackoverflow.com/users/1560774/virus721"}, "reply_to_user": {"reputation": 20069, "user_id": 596219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4a385671d1a06953de272d02e8095dd?s=128&d=identicon&r=PG", "display_name": "\u4e00\u4e8c\u4e09", "link": "https://stackoverflow.com/users/596219/%e4%b8%80%e4%ba%8c%e4%b8%89"}, "edited": false, "score": 0, "creation_date": 1430314374, "post_id": 29944855, "comment_id": 48011383, "body": "Btw i assumed that UTF-16 was also UCS-2 because wikipedia let me think that UTF-32 is UCS-4 : &quot; UTF-32 (or UCS-4) stands for Unicode Transformation Format 32 bits.  &quot;"}, {"owner": {"reputation": 7126, "user_id": 1560774, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e5c7d8e9733ac6dee89d29d0cd0123f4?s=128&d=identicon&r=PG", "display_name": "Virus721", "link": "https://stackoverflow.com/users/1560774/virus721"}, "reply_to_user": {"reputation": 20069, "user_id": 596219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4a385671d1a06953de272d02e8095dd?s=128&d=identicon&r=PG", "display_name": "\u4e00\u4e8c\u4e09", "link": "https://stackoverflow.com/users/596219/%e4%b8%80%e4%ba%8c%e4%b8%89"}, "edited": false, "score": 0, "creation_date": 1430314425, "post_id": 29944855, "comment_id": 48011422, "body": "Thank you. I deduce from what you say that the system&#39;s encoding is UCS-2 ?"}, {"owner": {"reputation": 20069, "user_id": 596219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4a385671d1a06953de272d02e8095dd?s=128&d=identicon&r=PG", "display_name": "\u4e00\u4e8c\u4e09", "link": "https://stackoverflow.com/users/596219/%e4%b8%80%e4%ba%8c%e4%b8%89"}, "edited": false, "score": 0, "creation_date": 1430314596, "post_id": 29944855, "comment_id": 48011561, "body": "The statement\u2014&quot;Windows CE provides Unicode surrogate support at the OS level and in Microsoft&#174; Internet Explorer. The support is limited to surrogate handling and display; editing is not supported.&quot;\u2014implies UTF-16, except for edit controls."}, {"owner": {"reputation": 7126, "user_id": 1560774, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e5c7d8e9733ac6dee89d29d0cd0123f4?s=128&d=identicon&r=PG", "display_name": "Virus721", "link": "https://stackoverflow.com/users/1560774/virus721"}, "reply_to_user": {"reputation": 20069, "user_id": 596219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4a385671d1a06953de272d02e8095dd?s=128&d=identicon&r=PG", "display_name": "\u4e00\u4e8c\u4e09", "link": "https://stackoverflow.com/users/596219/%e4%b8%80%e4%ba%8c%e4%b8%89"}, "edited": false, "score": 0, "creation_date": 1430314767, "post_id": 29944855, "comment_id": 48011709, "body": "Thanks for your help."}], "owner": {"reputation": 7126, "user_id": 1560774, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e5c7d8e9733ac6dee89d29d0cd0123f4?s=128&d=identicon&r=PG", "display_name": "Virus721", "link": "https://stackoverflow.com/users/1560774/virus721"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 181, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1430313202, "creation_date": 1430313202, "question_id": 29944855, "link": "https://stackoverflow.com/questions/29944855/windows-ce-utf-16-encoding-and-surrogates", "title": "Windows CE UTF-16 encoding and &quot;surrogates&quot;", "body": "<p>According to what i've read here and there, Windows CE is using UTF-16 (aka UCS-2) encoding for strings.</p>\n\n<p>With this encoding any character below 0xFFFF in the unicode table can be represented using a single Windows wchar_t, and anything over that is called a \"surrogate\" that can take up to two wchar_t for a single \"symbol\".\nIs this right ?</p>\n\n<p>Now how does windows handle these \"surrogates\" ? Does it allow these \"characters\" to take more than a single wchar_t ? In that case there is no way to make sure than the N-th pair of bytes in the N-th symbol right ?\nOr does it \"truncate\" and treat each wchar_t as a separate symbol, which could cause some symbols over 0xFFFF to be treated as two different symbols ?</p>\n\n<p>Thank you. :)</p>\n"}, {"tags": ["c", "declaration", "definition", "extern", "undefined-reference"], "comments": [{"owner": {"reputation": 1304, "user_id": 1073171, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/zrsir.jpg?s=128&g=1", "display_name": "Brian Sidebotham", "link": "https://stackoverflow.com/users/1073171/brian-sidebotham"}, "edited": false, "score": 0, "creation_date": 1430312508, "post_id": 29944454, "comment_id": 48009820, "body": "You&#39;ve written a definition for C1TX0PRIO, but you&#39;ve not written an implementation. i.e. in your C code you need <code>unsigned int C1TX0PRIO;</code> so that the variable exists"}], "answers": [{"comments": [{"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1430314373, "post_id": 29944725, "comment_id": 48011382, "body": "Should <b><i>volatile</i></b> <code>unsigned int C1TX0PRIO;</code> not be added."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1430314752, "post_id": 29944725, "comment_id": 48011696, "body": "@ryyker yeah, missed that part.I&#39;ll update accordingly. However, the major point I was trying to make is differenciate between definition and declaration."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1430314937, "post_id": 29944725, "comment_id": 48011863, "body": "Yeah, I saw that, that&#39;s why I upvoted.  But then realized the missing modifier."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1430314764, "last_edit_date": 1592644375, "creation_date": 1430312882, "answer_id": 29944725, "question_id": 29944454, "link": "https://stackoverflow.com/questions/29944454/bit-declaration-undefined-reference-to-variable/29944725#29944725", "title": "bit-declaration - undefined reference to &#39;variable&#39;", "body": "<blockquote class=\"spoiler\">\n<p> <strong>TL;DR</strong>- declaration does not allocate memory, definition does.</p>\n</blockquote>\n<p>As per <code>C11</code> standard document, chapter \u00a76.7, declaration,</p>\n<blockquote>\n<p>A declaration specifies the interpretation and attributes of a set of identifiers. A definition of an identifier is a declaration for that identifier that:</p>\n<p>\u2014 for an object, causes storage to be reserved for that object;</p>\n<p>\u2014 .....</p>\n</blockquote>\n<p>When you put <code>extern</code> storage class specifier, you're <em>declaring</em> a variable, not <em>defining</em> it.</p>\n<p>So, you need to <em>define</em> the variable before you use it.</p>\n<p>Add</p>\n<pre><code>volatile unsigned int C1TX0PRIO;\n</code></pre>\n<p>in your source file.</p>\n"}, {"tags": [], "owner": {"reputation": 131, "user_id": 3379082, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000986603892/picture?type=large", "display_name": "user252592", "link": "https://stackoverflow.com/users/3379082/user252592"}, "is_accepted": false, "score": 1, "last_activity_date": 1430312906, "creation_date": 1430312906, "answer_id": 29944737, "question_id": 29944454, "link": "https://stackoverflow.com/questions/29944454/bit-declaration-undefined-reference-to-variable/29944737#29944737", "title": "bit-declaration - undefined reference to &#39;variable&#39;", "body": "<p>You have the variables declared as extern in the header.</p>\n\n<p>Usually you need to put the variable as extern in the header, if you want to use that variable from multiple source files. In this way, the variable will be accessible in all source files which include this header. However, in one of the C files you will need to have the following:</p>\n\n<pre><code>volatile unsigned int C1TX0PRIO __attribute__((__sfr__));\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 4846464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e386e0cccbd0a7e31a2519978b1fd98a?s=128&d=identicon&r=PG&f=1", "display_name": "Johannes", "link": "https://stackoverflow.com/users/4846464/johannes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 388, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1430314764, "creation_date": 1430312242, "last_edit_date": 1430313680, "question_id": 29944454, "link": "https://stackoverflow.com/questions/29944454/bit-declaration-undefined-reference-to-variable", "title": "bit-declaration - undefined reference to &#39;variable&#39;", "body": "<p>I have problem and hope, that you could help me.\nI try to make CAN-communication between two dsPIC30F4011. It also works. Now I have to make the Identifier. I have to use the SID and the EID. They are divided into 4 parts. I want to make a bit-declaration and get an error.\nI made a new header-file</p>\n\n<pre><code>#ifndef IDENTIFIER_H\n#define IDENTIFIER_H\n\n#ifdef  __cplusplus\nextern \"C\" {\n#endif\n\n\n\n\n#ifdef  __cplusplus\n}\n#endif\n\n#endif  /* IDENTIFIER_H */\n\n\n#include &lt;p30F4011.h&gt;\n#include \"system.h\"\n#include &lt;p30fxxxx.h&gt;\n\n\ntypedef struct tagCxTXxSIDBITS{\n    unsigned          : 11;\n    unsigned PRIO4_0  : 5;\n}CxTXxPRIOBITS;\n\nextern volatile unsigned int C1TX0PRIO __attribute__((__sfr__));\nextern volatile CxTXxPRIOBITS C1TX0PRIObits __attribute__((__sfr__));\nextern volatile unsigned int C1TX1PRIO __attribute__((__sfr__));\nextern volatile CxTXxPRIOBITS C1TX1PRIObits __attribute__((__sfr__));\nextern volatile unsigned int C1TX2PRIO __attribute__((__sfr__));\nextern volatile CxTXxPRIOBITS C1TX2PRIObits __attribute__((__sfr__));\n</code></pre>\n\n<p>In the Code I want to write</p>\n\n<pre><code>...\n...\nC1TX0PRIO = 0x0000;\n...\n</code></pre>\n\n<p>If I want to build the project I get the error</p>\n\n<blockquote>\n<pre><code>build/default/production/CAN_function.o(.text+0x66): In  function    `.LSM19':\n: undefined reference to `_C1TX0PRIO'\nmake[2]: *** [dist/default/production/blink.X.production.hex] Error 255\nmake[1]: *** [.build-conf] Error 2\nmake: *** [.build-impl] Error 2\n</code></pre>\n</blockquote>\n\n<p>What did I do wrong?\nI wrote it like in the p30F4011.h</p>\n"}, {"tags": ["c", "windows", "progress-bar"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1430312299, "post_id": 29944198, "comment_id": 48009629, "body": "You vary the H value from 0 (red) to 120 (green). For more information look <a href=\"http://en.wikipedia.org/wiki/HSL_and_HSV\" rel=\"nofollow noreferrer\">here</a>."}, {"owner": {"reputation": 2172, "user_id": 178878, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/ab776d9e9a3043f815553db0bceddd5c?s=128&d=identicon&r=PG", "display_name": "kampi", "link": "https://stackoverflow.com/users/178878/kampi"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1430312348, "post_id": 29944198, "comment_id": 48009665, "body": "How? Just by incrementing it? Or is there some logic which should be applied?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1430312394, "post_id": 29944198, "comment_id": 48009718, "body": "<code>for (hue = 0; hue &lt;= 120; hue++)</code> sort of."}], "answers": [{"comments": [{"owner": {"reputation": 2172, "user_id": 178878, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/ab776d9e9a3043f815553db0bceddd5c?s=128&d=identicon&r=PG", "display_name": "kampi", "link": "https://stackoverflow.com/users/178878/kampi"}, "edited": false, "score": 0, "creation_date": 1430313551, "post_id": 29944536, "comment_id": 48010710, "body": "Could you maybe show me a simple example? I can&#39;t find one, and I really don&#39;t understand it. Once I&#39;ve seen it, it will be easier to understand."}, {"owner": {"reputation": 2172, "user_id": 178878, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/ab776d9e9a3043f815553db0bceddd5c?s=128&d=identicon&r=PG", "display_name": "kampi", "link": "https://stackoverflow.com/users/178878/kampi"}, "edited": false, "score": 0, "creation_date": 1430318249, "post_id": 29944536, "comment_id": 48014794, "body": "ok, but how do i use that in a win32 api? nothing happened. the color didn&#39;t changed. and what is alpha in my case? and what is is hue1? you declared hue0 and hue2. and how do i define a second or a tird color. sorry, i really don&#39;t understand. I didn&#39;t think, that a simple progressbar is that complicated. :("}, {"owner": {"reputation": 8876, "user_id": 1545171, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TiAiM.jpg?s=128&g=1", "display_name": "DrKoch", "link": "https://stackoverflow.com/users/1545171/drkoch"}, "reply_to_user": {"reputation": 2172, "user_id": 178878, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/ab776d9e9a3043f815553db0bceddd5c?s=128&d=identicon&r=PG", "display_name": "kampi", "link": "https://stackoverflow.com/users/178878/kampi"}, "edited": false, "score": 0, "creation_date": 1430374953, "post_id": 29944536, "comment_id": 48041283, "body": "Well, your request &quot;smoothly change from one color to another&quot; <b>is</b> complicated, given that <i>color</i> is a 3d space and human perception is complicated. All your other questions should becoime separate SO questions."}], "tags": [], "owner": {"reputation": 8876, "user_id": 1545171, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TiAiM.jpg?s=128&g=1", "display_name": "DrKoch", "link": "https://stackoverflow.com/users/1545171/drkoch"}, "is_accepted": true, "score": 1, "last_activity_date": 1430381551, "last_edit_date": 1430381551, "creation_date": 1430312416, "answer_id": 29944536, "question_id": 29944198, "link": "https://stackoverflow.com/questions/29944198/how-to-interpolate-a-hsv-color/29944536#29944536", "title": "How to interpolate a HSV color?", "body": "<p>Like <code>RGB</code> coordinates, <code>HSV</code> coordinates define a point in a three dimensional space.</p>\n\n<p>You may find a <em>trajectory</em> form one point (x0, one color) to the second (x1) with a formula like:</p>\n\n<pre><code>x = x0 + alpha * (x1-x0)\n</code></pre>\n\n<p>with alpha varying form 0.0 to 1.0</p>\n\n<p>You can do this for all three components simultaneaously.</p>\n\n<p>With a <em>trajectory</em> from green to red in HSV space you will mainly modify the H (Hue) value. If you want to see some yellow in the middle of your path (and not violett) you need to define a second or even third color and walk</p>\n\n<pre><code>green -&gt; yellow -&gt; red \n</code></pre>\n\n<p><HR>\n<strong>Edit: Example</strong></p>\n\n<pre><code>int hue0 = 0; // red\nint hue2 = 120; // green\n\n// find 100 colors between red and green\nfor(double alpha = 0; alpha &lt;= 1.0; alpha += 0.01)\n{\n     hueX = hue0 + alpha * (hue1 - hue0);\n     // same for value, saturation:\n     // valX = val0 + alpha * (val1 - val0)\n     // ...\n     // plot this color\n}\n</code></pre>\n"}], "owner": {"reputation": 2172, "user_id": 178878, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/ab776d9e9a3043f815553db0bceddd5c?s=128&d=identicon&r=PG", "display_name": "kampi", "link": "https://stackoverflow.com/users/178878/kampi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 460, "favorite_count": 0, "accepted_answer_id": 29944536, "answer_count": 1, "score": 0, "last_activity_date": 1430381551, "creation_date": 1430311652, "question_id": 29944198, "link": "https://stackoverflow.com/questions/29944198/how-to-interpolate-a-hsv-color", "title": "How to interpolate a HSV color?", "body": "<p>I am creating an application in win32 api, which will use a progress bar. This progress bar, should change its color. From red (left end) to green(right), and in the middle some yellow.</p>\n\n<p>I searched a little, and found out, that I should use HSV to achieve this. I just don't know how? I found in <a href=\"http://www.cs.rit.edu/~ncs/color/t_convert.html\" rel=\"nofollow\">this</a> link, two functions, to convert the color, from RGB to HSV and back. </p>\n\n<p>But what should I do if the color has been converted to HSV? </p>\n"}, {"tags": ["c", "linux", "shell", "dup2"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1430311390, "post_id": 29943969, "comment_id": 48008918, "body": "<a href=\"http://man7.org/linux/man-pages/man2/dup2.2.html\" rel=\"nofollow noreferrer\">Read the manual page</a>?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user1945613"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1430311756, "post_id": 29943969, "comment_id": 48009204, "body": "Yes my friend that&#39;s why I am posting here because I find it hard to understand."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user1945613"}, "edited": false, "score": 0, "creation_date": 1430311973, "post_id": 29944077, "comment_id": 48009372, "body": "I am using what you recommended but still not working. I put the close() in comments because I don&#39;t really knew when to close them. I am using fork before by the way. What happens even with your code is that the program outputs the sorted contents of the in.txt on the screen"}], "tags": [], "owner": {"reputation": 81300, "user_id": 296974, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0e26cfe3ac75cd582ca200fbc6fa0421?s=128&d=identicon&r=PG", "display_name": "glglgl", "link": "https://stackoverflow.com/users/296974/glglgl"}, "is_accepted": true, "score": 0, "last_activity_date": 1430311349, "creation_date": 1430311349, "answer_id": 29944077, "question_id": 29943969, "link": "https://stackoverflow.com/questions/29943969/using-dup2-from-file-to-another-file/29944077#29944077", "title": "Using dup2 from file to another file", "body": "<p>The way you use it closes <code>fdout</code> again, removing its connection to <code>fdout</code>, and then connects it to the <code>fdin</code>. So if <code>fdin</code> and <code>fdout</code> are, maybe, 4 and 5, both 4 and 5 now point to <code>in.txt</code>.</p>\n\n<p>Rather than that, you should do something like </p>\n\n<pre><code>dup2(fdin, 0) // now 0 will point to the same as fdin\ndup2(fdout, 1) // now 1 will point to the same as fdout\nclose(fdin); // as we don't need these any longer - if they are not 0 or 1! That should be checked.\nclose(fdout);\nexecvp(...);\n</code></pre>\n\n<p>There are some other pitfalls to be taken care for, however. For example, you should <code>fork()</code> before this one if you want your process to go on what it does.</p>\n\n<p>Why this comment at <code>close()</code> above? Well, when your process hasn't fd 0 and/or 1 open (what would be unusual, but not impossible), <code>fdin</code> might be 0 or 1 and <code>fdout</code> might be 1. These situations you have to cope with.</p>\n\n<p>An even better way would be</p>\n\n<pre><code>if (fdin &gt; 0) {\n    dup2(fdin, 0); // now 0 will point to the same as fdin\n    close(fdin);\n}\nif (fdout &gt; 1) { // cannot be 0!\n    dup2(fdout, 1) // now 1 will point to the same as fdout\n    close(fdout);\n}\nexecvp(...);\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user1945613"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 357, "favorite_count": 0, "accepted_answer_id": 29944077, "answer_count": 1, "score": 0, "last_activity_date": 1430311349, "creation_date": 1430311044, "question_id": 29943969, "link": "https://stackoverflow.com/questions/29943969/using-dup2-from-file-to-another-file", "title": "Using dup2 from file to another file", "body": "<p>I'm trying to execute the command sort &lt; in.txt > out.txt, so I am using dup2.\nThis is my code:</p>\n\n<pre><code>    int fdin = open(\"in.txt\",O_RDWR);\n    int fdout = open(\"out.txt\",O_RDWR);\n\n    dup2(fdin,fdout);\n    //close(fdin);\n    //close(fdout);\n    //execvp...\n</code></pre>\n\n<p>How exactly does dup2 work? I can't get it...\nThank you!</p>\n"}, {"tags": ["c++", "c", "process", "shared-memory"], "comments": [{"owner": {"reputation": 4244, "user_id": 4577158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MFS4a.jpg?s=128&g=1", "display_name": "Ulfalizer", "link": "https://stackoverflow.com/users/4577158/ulfalizer"}, "edited": false, "score": 1, "creation_date": 1430311610, "post_id": 29943905, "comment_id": 48009096, "body": "Why is it horrendously stupid? If the class has a constructor, then you could use placement <code>new</code> (which is a form of <code>new</code> that lets you specify where the class is created) to construct it in the shared memory mapping. If it&#39;s a plain old <code>struct</code> with no constructor, then it&#39;s sufficient to just cast the address from <code>mmap()</code> to that type. Either way, you need to provide synchronization of course."}, {"owner": {"reputation": 1632, "user_id": 4178025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/159c588df64aaa5d1b2c96c1461e85cf?s=128&d=identicon&r=PG&f=1", "display_name": "Diego", "link": "https://stackoverflow.com/users/4178025/diego"}, "edited": false, "score": 1, "creation_date": 1430312452, "post_id": 29943905, "comment_id": 48009765, "body": "However, if the class manages memory you have to make sure chunks are allocated from the shared block and not somewhere else because otherwise they won&#39;t be available to other processes. And pointers get useless, as each process may map the shared block on different virtual addresses"}, {"owner": {"reputation": 4244, "user_id": 4577158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MFS4a.jpg?s=128&g=1", "display_name": "Ulfalizer", "link": "https://stackoverflow.com/users/4577158/ulfalizer"}, "reply_to_user": {"reputation": 1632, "user_id": 4178025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/159c588df64aaa5d1b2c96c1461e85cf?s=128&d=identicon&r=PG&f=1", "display_name": "Diego", "link": "https://stackoverflow.com/users/4178025/diego"}, "edited": false, "score": 0, "creation_date": 1430312703, "post_id": 29943905, "comment_id": 48009971, "body": "@Diego: Yeah, that&#39;s a good point. This is probably a case where you ought to keep it simple. :)"}, {"owner": {"reputation": 4244, "user_id": 4577158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MFS4a.jpg?s=128&g=1", "display_name": "Ulfalizer", "link": "https://stackoverflow.com/users/4577158/ulfalizer"}, "edited": false, "score": 0, "creation_date": 1430312946, "post_id": 29943905, "comment_id": 48010182, "body": "Those <code>std::string</code> objects will be problematic as they might dynamically allocate memory. I&#39;d stick to plain old data types (<code>char</code> arrays instead of <code>std::string</code>, etc.) for a shared memory segment. Could use a custom allocator too, but that&#39;s probably overcomplicating things to the extreme."}, {"owner": {"reputation": 371, "user_id": 4182202, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/tTLXm.jpg?s=128&g=1", "display_name": "countofmontecristo", "link": "https://stackoverflow.com/users/4182202/countofmontecristo"}, "reply_to_user": {"reputation": 4244, "user_id": 4577158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MFS4a.jpg?s=128&g=1", "display_name": "Ulfalizer", "link": "https://stackoverflow.com/users/4577158/ulfalizer"}, "edited": false, "score": 0, "creation_date": 1430314011, "post_id": 29943905, "comment_id": 48011086, "body": "@Ulfalizer How exactly would you declare the char array? I&#39;m having no luck with this technique."}, {"owner": {"reputation": 4244, "user_id": 4577158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MFS4a.jpg?s=128&g=1", "display_name": "Ulfalizer", "link": "https://stackoverflow.com/users/4577158/ulfalizer"}, "edited": false, "score": 0, "creation_date": 1430314210, "post_id": 29943905, "comment_id": 48011249, "body": "@countofmontecristo: <code>char word[MAX_WORD_LEN]</code> for example. The crucial point is that memory allocated with plain <code>new</code> or <code>malloc()</code> in one of the processes won&#39;t be part of the shared memory mapping, and so can&#39;t be accessed by the other process. That also goes for classes that do this internally (e.g., <code>std::string</code> for longer strings). Unless it&#39;s just an exercise, you might want to ask yourself if you really need multiple processes too."}, {"owner": {"reputation": 371, "user_id": 4182202, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/tTLXm.jpg?s=128&g=1", "display_name": "countofmontecristo", "link": "https://stackoverflow.com/users/4182202/countofmontecristo"}, "reply_to_user": {"reputation": 4244, "user_id": 4577158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MFS4a.jpg?s=128&g=1", "display_name": "Ulfalizer", "link": "https://stackoverflow.com/users/4577158/ulfalizer"}, "edited": false, "score": 0, "creation_date": 1430314544, "post_id": 29943905, "comment_id": 48011516, "body": "@Ulfalizer Then how would the mmap cast look? I&#39;ve tried various casts and reinterpreted cast, and I can&#39;t compile without one."}, {"owner": {"reputation": 4244, "user_id": 4577158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MFS4a.jpg?s=128&g=1", "display_name": "Ulfalizer", "link": "https://stackoverflow.com/users/4577158/ulfalizer"}, "edited": false, "score": 0, "creation_date": 1430314762, "post_id": 29943905, "comment_id": 48011705, "body": "@countofmontecristo: What you have at the moment looks fine. (Could use <code>static_cast</code> too, but it shouldn&#39;t make any difference.) Make sure to check for errors from <code>mmap()</code> too."}], "answers": [{"comments": [{"owner": {"reputation": 371, "user_id": 4182202, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/tTLXm.jpg?s=128&g=1", "display_name": "countofmontecristo", "link": "https://stackoverflow.com/users/4182202/countofmontecristo"}, "edited": false, "score": 0, "creation_date": 1430316774, "post_id": 29945542, "comment_id": 48013459, "body": "This does solve the problem of the process from crashing, but I can&#39;t access wCopy later on in the program. cout &lt;&lt; wCopy; and cout &lt;&lt; wCopy[0]; both print blank lines even though I know that wCopy is initialized in init."}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "reply_to_user": {"reputation": 371, "user_id": 4182202, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/tTLXm.jpg?s=128&g=1", "display_name": "countofmontecristo", "link": "https://stackoverflow.com/users/4182202/countofmontecristo"}, "edited": false, "score": 0, "creation_date": 1430317032, "post_id": 29945542, "comment_id": 48013670, "body": "@countofmontecristo : assuming you did not forget the lines <code>for (int i=0; i&lt;wLen; i++) wCopy[i] = &#39;_&#39;; wCopy[wLen] = </code>\\0<code>;</code>, what is shown in init call for : <code>cout &lt;&lt; wCopy &lt;&lt;endl;</code> 4 lines below ?"}, {"owner": {"reputation": 371, "user_id": 4182202, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/tTLXm.jpg?s=128&g=1", "display_name": "countofmontecristo", "link": "https://stackoverflow.com/users/4182202/countofmontecristo"}, "edited": false, "score": 0, "creation_date": 1430317917, "post_id": 29945542, "comment_id": 48014471, "body": "Yup, all that code is in there. The init call does exactly what&#39;s expected: &quot;_______&quot; I should add that the cout later on is H -&gt;wCopy"}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "reply_to_user": {"reputation": 371, "user_id": 4182202, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/tTLXm.jpg?s=128&g=1", "display_name": "countofmontecristo", "link": "https://stackoverflow.com/users/4182202/countofmontecristo"}, "edited": false, "score": 0, "creation_date": 1430320459, "post_id": 29945542, "comment_id": 48016639, "body": "@countofmontecristo : Hmm, wCopy is correctly initialized in <code>init</code>, but looses is value after some time. What happens between the moment it is initialized and the moment where you call  <code>cout &lt;&lt; H-&gt;wCopy;</code> ? How do you write to <code>word</code> or <code>wCopy</code> ?"}, {"owner": {"reputation": 371, "user_id": 4182202, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/tTLXm.jpg?s=128&g=1", "display_name": "countofmontecristo", "link": "https://stackoverflow.com/users/4182202/countofmontecristo"}, "edited": false, "score": 0, "creation_date": 1430322409, "post_id": 29945542, "comment_id": 48018017, "body": "Here&#39;s a laugh. I called init... <i>starts cracking up insanely</i>  I... I c-called init....... BEFORE THE MMAP. OH MAN!! WHAT A CARD THAT BRAIN OF MINE! <i>enters Baltimore riots</i>"}], "tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": true, "score": 0, "last_activity_date": 1430314882, "creation_date": 1430314882, "answer_id": 29945542, "question_id": 29943905, "link": "https://stackoverflow.com/questions/29943905/establishing-shared-memory-between-different-processes-with-limited-resources/29945542#29945542", "title": "Establishing shared memory between different processes with limited resources?", "body": "<p>Your problem is that C++ types are too clever to fit in shared memory, including <code>std::string</code>, not speaking of <code>unique_ptr</code> or containers.</p>\n\n<p>Internally, a string will contain another pointer. And hell is just here : even if you put your string in shared memory, by default, it will point to the dynamic memory of one single process.</p>\n\n<p>IMHO, this is one use case for remembering that all good old C types can be used from C++. And that fixed size char array and not always that bad, if you can accept the constraint of a maximum size for your words.</p>\n\n<p>I would use :</p>\n\n<pre><code>struct Hangman{\n\n    char word[MAXSIZE];\n    char wCopy[MAXSIZE];\n    int strikes, wLen;\n    bool solved;\n    int test;\n\n    void init(string orig_word) {\n\n        wLen = orig_word.length();\n        if (wLen &gt;= MAXSIZE) {\n            // ERROR word is too long\n        }\n        strncpy(word, orig, wLen);\n        word[wLen] = `\\0`;\n        for (int i=0; i&lt;wLen; i++) wCopy[i] = '_';\n        wCopy[wLen] = `\\0`;\n\n        cout&lt;&lt;\"wCopy in init is: \" &lt;&lt; word &lt;&lt;endl;\n        strikes = 0;\n        cout &lt;&lt; wCopy &lt;&lt;endl;\n        solved = false;\n        test = 0;\n    }\n}\n</code></pre>\n\n<p>That way, you can be sure that all elements used by the struct reside in shared memory. And you initialize the struct once allocated with its member function <code>init</code>.</p>\n"}], "owner": {"reputation": 371, "user_id": 4182202, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/tTLXm.jpg?s=128&g=1", "display_name": "countofmontecristo", "link": "https://stackoverflow.com/users/4182202/countofmontecristo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 29945542, "answer_count": 1, "score": 0, "last_activity_date": 1544365769, "creation_date": 1430310871, "last_edit_date": 1544365769, "question_id": 29943905, "link": "https://stackoverflow.com/questions/29943905/establishing-shared-memory-between-different-processes-with-limited-resources", "title": "Establishing shared memory between different processes with limited resources?", "body": "<p>After some painful debugging, I realized trying to use mmap to store a class in shared memory is horrendously stupid. </p>\n\n<p>So, say that I have a class with something like 5 variables (strings and ints) that I would like to be accessible to all running processes. How could I go about coding this if I could not use non standard libraries like boost?</p>\n\n<p>One idea that comes to mind, and it's pretty bad, is to make the variables global and then simply use mmap a few times. At first, I tried to do this but with the variables initially declared in the class and then mmap'd in the constructor, but from my understanding this does not work either. </p>\n\n<p>I would like to add that I'm forced to use a version that does not support MAP_ANONYMOUS and only MAP_ANON.</p>\n\n<p>Hold the phone. I, in this morning haze, have forgotten that I previously tested object mmap'ing and managed to update a member of the object from two different processes in a shared manner. I now believe my problem lies entirely in the construct initialization and the way that I declare the object. Yet a very similar access in my current code causes the process to abruptly end...</p>\n\n<p>This is my code:</p>\n\n<pre><code>Hangman * H; // I've tried this with and without using new here\n             // and this talk of placement new may show illumination\nH =(Hangman*) mmap(NULL, sizeof *H, PROT_READ | PROT_WRITE,\n                    MAP_SHARED | MAP_ANON, -1, 0);\n</code></pre>\n\n<p>And here is the object: </p>\n\n<pre><code>struct Hangman{\n\n        string word;\n        string wCopy;\n        int strikes, wLen;\n        bool solved;\n        int test;\n\n        Hangman(){\n                word = getWord();\n                wLen  = word.length();\n                wCopy = word;\n                cout&lt;&lt;\"wCopy in construc is: \" &lt;&lt;wCopy&lt;&lt;endl;\n                for(int i = 0; i &lt; wLen; i++)\n                        wCopy[i] = '_';\n                strikes = 0;\n                cout &lt;&lt; wCopy &lt;&lt;endl;\n                solved = false;\n                test = 0;\n        }  \n //(...)\n };\n</code></pre>\n\n<p>... and now the fact that I recall the int access to be fine and the string access to run amok leads me to believe I should not use string here. If this is the case, should I use a c style string?</p>\n"}, {"tags": ["c", "pointers", "struct", "parameter-passing", "void"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1430310953, "post_id": 29943846, "comment_id": 48008543, "body": "<i>What</i> error messages do you get? When posting questions regarding errors, always include the actual errors (complete and unedited) in the question. Please edit your question to include that information."}, {"owner": {"reputation": 17210, "user_id": 2436175, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/CK0Zo.png?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/2436175/antonio"}, "edited": false, "score": 0, "creation_date": 1430311112, "post_id": 29943846, "comment_id": 48008670, "body": "You can find some relevant information here <a href=\"http://stackoverflow.com/q/23805910/2436175\">stackoverflow.com/q/23805910/2436175</a>"}], "answers": [{"comments": [{"owner": {"reputation": 482, "user_id": 1920212, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/dcb77bf6d2242db7ea1416e2f610f180?s=128&d=identicon&r=PG&f=1", "display_name": "qwerty", "link": "https://stackoverflow.com/users/1920212/qwerty"}, "edited": false, "score": 0, "creation_date": 1430314617, "post_id": 29943876, "comment_id": 48011579, "body": "and how could I afterwards get the value of element? I have tried with int a = (int) data.element; inside the inserter method but it raises compilation errors"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 482, "user_id": 1920212, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/dcb77bf6d2242db7ea1416e2f610f180?s=128&d=identicon&r=PG&f=1", "display_name": "qwerty", "link": "https://stackoverflow.com/users/1920212/qwerty"}, "edited": false, "score": 0, "creation_date": 1430314917, "post_id": 29943876, "comment_id": 48011847, "body": "@user1920212 nopes, not like that. take <code>struct info * if = data; int a = if-&gt;element;</code>. Hope this clears up the issue. Frankly, if you&#39;re not much familiar with pointers, I suggest to go through the basics first."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 2, "last_activity_date": 1430313336, "last_edit_date": 1430313336, "creation_date": 1430310783, "answer_id": 29943876, "question_id": 29943846, "link": "https://stackoverflow.com/questions/29943846/issue-in-passing-a-structure-to-a-function-accepting-void-parameter/29943876#29943876", "title": "Issue in passing a structure to a function accepting void * parameter", "body": "<blockquote>\n  <p><em>I have heard that when the input format is of type void, it accepts every type of input variable type</em></p>\n</blockquote>\n\n<p>Absolutely wrong !!! <code>void</code> means <em>nothing</em>. It <em>accepts</em> nothing.</p>\n\n<p>However, <code>void *</code> is <em>considered</em> a generic pointer. To quote the <code>C11</code> standard document, chapter 6.3.2.3, pointers, paragaraph 1,</p>\n\n<blockquote>\n  <p>A pointer to void may be converted to or from a pointer to any object type. A pointer to any object type may be converted to a pointer to void and back again; the result shall compare equal to the original pointer.</p>\n</blockquote>\n\n<p>using this attribute, many a times, the function parameter is written as <code>void *</code> so that, the function can accept different types of pointer and then, inside function body, based on some other paramater, that received pointer is converted (casted) back to the actual pointer type before using it.</p>\n\n<p>If you check properly, the parameter to the function is not <code>void</code>, it's <code>void *</code>.</p>\n\n<p>You need to call your function like</p>\n\n<pre><code>inserter(&amp;inserter_info);\n</code></pre>\n\n<p>P.S - Your compiler should have warned you regarding the mismatch.</p>\n"}, {"tags": [], "owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "is_accepted": false, "score": 1, "last_activity_date": 1430310823, "creation_date": 1430310823, "answer_id": 29943890, "question_id": 29943846, "link": "https://stackoverflow.com/questions/29943846/issue-in-passing-a-structure-to-a-function-accepting-void-parameter/29943890#29943890", "title": "Issue in passing a structure to a function accepting void * parameter", "body": "<p><code>void *data</code> is expecting a pointer</p>\n\n<p>Here:</p>\n\n<pre><code>struct info inserter_info;\ninserter_info.element = 0;\ninserter(inserter_info);\n</code></pre>\n\n<p>you are not passing a pointer, change to:</p>\n\n<pre><code>inserter(&amp;inserter_info);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 1, "last_activity_date": 1430310826, "creation_date": 1430310826, "answer_id": 29943892, "question_id": 29943846, "link": "https://stackoverflow.com/questions/29943846/issue-in-passing-a-structure-to-a-function-accepting-void-parameter/29943892#29943892", "title": "Issue in passing a structure to a function accepting void * parameter", "body": "<p>It expects a pointer, but you are not passing a pointer, if the <code>inserter()</code> function is going to run in a different thread you need to allocate the struct on the heap, otherwise it will be deallocated when the thread starts.</p>\n\n<pre><code>struct info {\n    int element;\n};\n\nstruct info *inserter_info;\ninserter_info = malloc(sizeof(*inserter_info));\nif (inserter_info == NULL)\n    abortThisOperation();\ninserter_info-&gt;element = 0;\n\ninserter(inserter_info);\n</code></pre>\n\n<p>you should ensure that when the thread has finished working you will free the allocated pointer.</p>\n\n<p>If the function is not going to run from a different thread then passing the address of the struct like this</p>\n\n<pre><code>struct info inserter_info;\ninserter_info.element = 0;\n\ninserter(&amp;inserter_info);\n</code></pre>\n\n<p>would be enough.</p>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 0, "last_activity_date": 1430312916, "creation_date": 1430312916, "answer_id": 29944741, "question_id": 29943846, "link": "https://stackoverflow.com/questions/29943846/issue-in-passing-a-structure-to-a-function-accepting-void-parameter/29944741#29944741", "title": "Issue in passing a structure to a function accepting void * parameter", "body": "<blockquote>\n  <p>I have heard that when the input format is of type void, it accepts every type of input variable type</p>\n</blockquote>\n\n<p>A <em>pointer</em> to void accepts any other pointer to <em>object type</em>. Conversions between <code>void*</code> and a pointer to <em>function type</em> is undefined behavior, it is not covered by the standard. </p>\n\n<p>Still the standard lists this as a \"common language extension\", meaning that such casts may be ok on your given system, but only if your compiler has implemented a non-standard extension.</p>\n\n<p>In practice, pointers almost always corresponds directly to raw CPU addresses, in which case there is most often no difference between an address of a variable and the address of a function. So in the real world outside the C standard, you will probably get away with such casts.</p>\n\n<p>Otherwise you can \"hack the C standard\" by first converting your function pointer into an integer type (such as uintptr_t) and then convert it to a <code>void*</code> from there. In that case the code only invokes undefined behavior in case the pointer cannot be represented as an integer (which is very unlikely).</p>\n"}], "owner": {"reputation": 482, "user_id": 1920212, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/dcb77bf6d2242db7ea1416e2f610f180?s=128&d=identicon&r=PG&f=1", "display_name": "qwerty", "link": "https://stackoverflow.com/users/1920212/qwerty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 193, "favorite_count": 0, "accepted_answer_id": 29943876, "answer_count": 4, "score": 0, "last_activity_date": 1430313798, "creation_date": 1430310704, "last_edit_date": 1430313798, "question_id": 29943846, "link": "https://stackoverflow.com/questions/29943846/issue-in-passing-a-structure-to-a-function-accepting-void-parameter", "title": "Issue in passing a structure to a function accepting void * parameter", "body": "<p>I want to call a function of type <code>foo(void * data)</code> having as input parameter a struct variable.</p>\n\n<p>I have heard that when the input format is of type void, it accepts every type of input variable type. Nevertheless, I get an error message.</p>\n\n<pre><code>struct info{\n    int element;\n};\n\nstruct info inserter_info;\ninserter_info.element = 0;\n\ninserter(inserter_info);\n</code></pre>\n\n<p>Where <code>inserter()</code> is prototyped as <code>void * inserter(void * data)</code>.</p>\n\n<p>I  tried casting but then also I got error messages.</p>\n"}, {"tags": ["c", "arrays", "recursion", "quicksort", "bubble-sort"], "comments": [{"owner": {"reputation": 8851, "user_id": 760746, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/19726c55cf8ab72ea01bbb2feee5a3f1?s=128&d=identicon&r=PG", "display_name": "Nobody moving away from SE", "link": "https://stackoverflow.com/users/760746/nobody-moving-away-from-se"}, "edited": false, "score": 2, "creation_date": 1430310177, "post_id": 29943571, "comment_id": 48007936, "body": "Could you elaborate on what you tried with pointers? Maybe provide the code?"}, {"owner": {"reputation": 22202, "user_id": 696391, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/VrUwT.jpg?s=128&g=1", "display_name": "samgak", "link": "https://stackoverflow.com/users/696391/samgak"}, "edited": false, "score": 2, "creation_date": 1430310600, "post_id": 29943571, "comment_id": 48008267, "body": "Can you just make your counter a global variable?"}, {"owner": {"reputation": 115, "user_id": 4605780, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7b4910f22ba7bfb6533e607e222806c4?s=128&d=identicon&r=PG&f=1", "display_name": "Isak", "link": "https://stackoverflow.com/users/4605780/isak"}, "edited": false, "score": 0, "creation_date": 1430311172, "post_id": 29943571, "comment_id": 48008722, "body": "thanks for a quick reply, but we manage to solve the problem."}], "answers": [{"comments": [{"owner": {"reputation": 284, "user_id": 4721592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1185a1d52241d2f7c5077f4b29f81bfe?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Siebert", "link": "https://stackoverflow.com/users/4721592/daniel-siebert"}, "edited": false, "score": 0, "creation_date": 1430311683, "post_id": 29943965, "comment_id": 48009156, "body": "I agree that a global variable is a viable option. The second option will have a compile time error as <code>int&amp;</code> is not a data type."}], "tags": [], "owner": {"reputation": 223, "user_id": 4588741, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cecde354d3da40f213913e84e38961f?s=128&d=identicon&r=PG&f=1", "display_name": "C. Ridley", "link": "https://stackoverflow.com/users/4588741/c-ridley"}, "is_accepted": true, "score": 4, "last_activity_date": 1430312107, "last_edit_date": 1430312107, "creation_date": 1430311035, "answer_id": 29943965, "question_id": 29943571, "link": "https://stackoverflow.com/questions/29943571/recursive-quicksort-count-swap-and-comparison-issue/29943965#29943965", "title": "recursive quicksort, count swap and comparison issue", "body": "<p>Either use a global variable as suggested in the comments :</p>\n\n<pre><code>int _SwapCount = 0;\nvoid quicksort(int arr[],int first,int last)\n{\n   ...\n   //whenever you swap\n   _SwapCount++;\n</code></pre>\n\n<p>or take a pointer to an int as a parameter:</p>\n\n<pre><code>void quicksort(int arr[],int first,int last, int* swapCount)\n{\n   ...\n   //whenever you swap\n   (*swapCount)++;\n   //recursion\n   quicksort(arr,first,j-1, swapCount);\n   ...\n</code></pre>\n\n<p>and output the swapCount once the top level quicksort has completed.</p>\n\n<p>Edit : initially mis-read the tag as c#;</p>\n"}], "owner": {"reputation": 115, "user_id": 4605780, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7b4910f22ba7bfb6533e607e222806c4?s=128&d=identicon&r=PG&f=1", "display_name": "Isak", "link": "https://stackoverflow.com/users/4605780/isak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2175, "favorite_count": 0, "accepted_answer_id": 29943965, "answer_count": 1, "score": 0, "last_activity_date": 1430312107, "creation_date": 1430309968, "last_edit_date": 1430311390, "question_id": 29943571, "link": "https://stackoverflow.com/questions/29943571/recursive-quicksort-count-swap-and-comparison-issue", "title": "recursive quicksort, count swap and comparison issue", "body": "<p>I want to compare how many swaps and comparisons (&lt;, >, ==, !=) it took for a bubblesort vs. quicksort function to sort an array of unique numbers. The problem is that the quicksort function I use is recursive and I am a bit unsure how to keep track of swaps comparisons. Tried to use pointers to keep track of the count but was unsuccessful. Could anyone help me?</p>\n\n<p>my bubblesort:</p>\n\n<pre><code>void bubble_sort(int arr[], int max)\n{\n    int i=0, j, temp, flag;\n    int swap=0, comp=0;\n    while(1)\n    {\n        flag = 0;\n        for (j = 0 &amp;&amp; comp++;  j &lt; max - i - 1; j++)\n        {\n            comp++;\n            if (arr[j] &gt; arr[j+1])\n            {\n                swap++;\n                /* Swapping */\n\n                temp     = arr[j];\n                arr[j]   = arr[j+1];\n                arr[j+1] = temp;\n                flag=1;\n            }\n        }\n        i++;\n        comp++;\n        if (flag == 0)\n        {\n            printf(\"number of swaps: %d\\n\",swap);\n            printf(\"number of comparisons: %d \\n\\n\",comp);\n            break;\n        }\n    }\n}\n</code></pre>\n\n<p>my quicksort:</p>\n\n<pre><code>void quicksort(int arr[],int first,int last)\n{\n    int pivot,j,temp,i;\n\n    if(first&lt;last)\n    {\n        pivot=first;\n        i=first;\n        j=last;\n\n        while(i&lt;j)\n        {\n            while(arr[i]&lt;=arr[pivot]&amp;&amp;i&lt;last)\n                i++;\n            while(arr[j]&gt;arr[pivot])\n                j--;\n            if(i&lt;j)\n            {\n                temp=arr[i];\n                arr[i]=arr[j];\n                arr[j]=temp;\n            }\n        }\n\n        temp=arr[pivot];\n        arr[pivot]=arr[j];\n        arr[j]=temp;\n        quicksort(arr,first,j-1);\n        quicksort(arr,j+1,last);\n\n    }\n}\n</code></pre>\n\n<p>solution:</p>\n\n<pre><code>void quick_sort(int arr[],int first,int last, int *swap, int *comp)\n{\n    int pivot,j,temp,i;\n    if(++(*comp) &amp;&amp; first&lt;last)\n    {\n        pivot=first;\n        i=first;\n        j=last;\n\n        while(++(*comp) &amp;&amp; i&lt;j)\n        {\n            while(++(*comp) &amp;&amp; arr[i]&lt;=arr[pivot]&amp;&amp;i&lt;last)\n                i++;\n            while(++(*comp) &amp;&amp; arr[j]&gt;arr[pivot])\n                j--;\n            if(++(*comp) &amp;&amp; i&lt;j)\n            {\n                ++(*swap);\n                temp=arr[i];\n                arr[i]=arr[j];\n                arr[j]=temp;\n            }\n        }\n        ++(*swap);\n        temp=arr[pivot];\n        arr[pivot]=arr[j];\n        arr[j]=temp;\n        quick_sort(arr,first,j-1, swap, comp);\n        quick_sort(arr,j+1,last, swap, comp);\n\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "avr", "uart"], "comments": [{"owner": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "edited": false, "score": 0, "creation_date": 1430310043, "post_id": 29943566, "comment_id": 48007830, "body": "Because <code>!(in &amp; UART_NO_DATA) || (in &amp; UART_BUFFER_OVERFLOW)</code> is always true in the case you encounter. What have <b><i>you</i></b> tried?"}, {"owner": {"reputation": 63, "user_id": 2362043, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/236199da7297f13aec63329410a77159?s=128&d=identicon&r=PG", "display_name": "Jirka", "link": "https://stackoverflow.com/users/2362043/jirka"}, "reply_to_user": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "edited": false, "score": 0, "creation_date": 1430310124, "post_id": 29943566, "comment_id": 48007896, "body": "I wanted to check if data are available.  Sorry, this is goog condition: while((in &amp; UART_NO_DATA) || (in &amp; UART_BUFFER_OVERFLOW));"}, {"owner": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "edited": false, "score": 0, "creation_date": 1430310151, "post_id": 29943566, "comment_id": 48007921, "body": "What have you tried to do about your problem? Have you tried using a debugger? Have you tried anything?"}, {"owner": {"reputation": 63, "user_id": 2362043, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/236199da7297f13aec63329410a77159?s=128&d=identicon&r=PG", "display_name": "Jirka", "link": "https://stackoverflow.com/users/2362043/jirka"}, "reply_to_user": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "edited": false, "score": 0, "creation_date": 1430310263, "post_id": 29943566, "comment_id": 48008000, "body": "Unfortunately. I do not own debugger. :("}, {"owner": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "edited": false, "score": 0, "creation_date": 1430310638, "post_id": 29943566, "comment_id": 48008301, "body": "Are you programming on windows or on linux? There are readily available debuggers such as gdb"}, {"owner": {"reputation": 63, "user_id": 2362043, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/236199da7297f13aec63329410a77159?s=128&d=identicon&r=PG", "display_name": "Jirka", "link": "https://stackoverflow.com/users/2362043/jirka"}, "reply_to_user": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "edited": false, "score": 0, "creation_date": 1430310734, "post_id": 29943566, "comment_id": 48008370, "body": "Sorry. This program is for ATmega128. The programming environment AVR Studio 6.2."}, {"owner": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "edited": false, "score": 0, "creation_date": 1430310818, "post_id": 29943566, "comment_id": 48008431, "body": "Well I think AVR Studio has a built-in debugger. Just do a simple search..."}, {"owner": {"reputation": 63, "user_id": 2362043, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/236199da7297f13aec63329410a77159?s=128&d=identicon&r=PG", "display_name": "Jirka", "link": "https://stackoverflow.com/users/2362043/jirka"}, "reply_to_user": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "edited": false, "score": 0, "creation_date": 1430311873, "post_id": 29943566, "comment_id": 48009299, "body": "This condition is bad.  while((in &amp; UART_NO_DATA) || (in &amp; UART_BUFFER_OVERFLOW))"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1430312002, "post_id": 29943566, "comment_id": 48009396, "body": "A programmer without a debugger is kind of like a taxi driver without a car... how do you expect to get any job done at all if you don&#39;t have a debugger?"}, {"owner": {"reputation": 63, "user_id": 2362043, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/236199da7297f13aec63329410a77159?s=128&d=identicon&r=PG", "display_name": "Jirka", "link": "https://stackoverflow.com/users/2362043/jirka"}, "edited": false, "score": 0, "creation_date": 1430312675, "post_id": 29943566, "comment_id": 48009951, "body": "The problem I found and removed without the debugger.  It was enough to add this condition if ((dolar = uart1_getc()) != UART_NO_DATA)"}, {"owner": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "edited": false, "score": 0, "creation_date": 1430314412, "post_id": 29943566, "comment_id": 48011411, "body": "We have no idea what your problem was. You gave us nothing to work with."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 4852736, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/de7419f3be101430400f2c9d26f4d122?s=128&d=identicon&r=PG", "display_name": "UnanymousCoward", "link": "https://stackoverflow.com/users/4852736/unanymouscoward"}, "is_accepted": false, "score": 0, "last_activity_date": 1430438232, "creation_date": 1430438232, "answer_id": 29979714, "question_id": 29943566, "link": "https://stackoverflow.com/questions/29943566/stopping-the-program-when-reading-data-from-uart/29979714#29979714", "title": "Stopping the program when reading data from UART", "body": "<p>Even if your current approach works, you are prone at losing UART data. You should really be using interrupts instead of polling. Have the interrupt fill a sufficiently large buffer and set a flag condition when it is done. Then, have the program process the buffer.</p>\n\n<p>Cheers.</p>\n"}], "owner": {"reputation": 63, "user_id": 2362043, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/236199da7297f13aec63329410a77159?s=128&d=identicon&r=PG", "display_name": "Jirka", "link": "https://stackoverflow.com/users/2362043/jirka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1430438232, "creation_date": 1430309954, "last_edit_date": 1430310217, "question_id": 29943566, "link": "https://stackoverflow.com/questions/29943566/stopping-the-program-when-reading-data-from-uart", "title": "Stopping the program when reading data from UART", "body": "<p>I have this simple code:</p>\n\n<pre><code>while(1){           \n    char dolar = gps_get_char();//read char from uart\n    if ((dolar == '$') || (receive_dolar == 1)){\n        receive_dolar = 1;\n\n        gps_get_nmea(nmea_in, sizeof(nmea_in));\n        rozloz_nmea();\n\n        receive_dolar = 0;\n    }       \n\n    /*control running program*/\n    if (tl2 == 1){ //flag button from interrupt\n        LCD ^= (1 &lt;&lt; LED_ON_OFF);\n        tl2 = 0;\n    }   \n}\n</code></pre>\n\n<p>But when the GPS is turned off, so the program stops here:</p>\n\n<pre><code>char dolar = gps_get_char();//read char from uart\n</code></pre>\n\n<p>Where function gps_get_char();</p>\n\n<pre><code>char gps_get_char()\n{\n    unsigned int in = 0;\n\n    do {\n        in = uart1_getc();\n    } while((in &amp; UART_NO_DATA) || (in &amp; UART_BUFFER_OVERFLOW));\n\n    return((char) in);\n}\n</code></pre>\n\n<p><strong>Any idea why the program is stopped?</strong></p>\n"}, {"tags": ["c", "algorithm"], "comments": [{"owner": {"reputation": 4380, "user_id": 482682, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/T2ZMC.jpg?s=128&g=1", "display_name": "Lrrr", "link": "https://stackoverflow.com/users/482682/lrrr"}, "edited": false, "score": 0, "creation_date": 1430309805, "post_id": 29943464, "comment_id": 48007619, "body": "and what is wrong with your try?"}, {"owner": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "edited": false, "score": 0, "creation_date": 1430309984, "post_id": 29943464, "comment_id": 48007775, "body": "Welcome to Stack Overflow! Questions seeking debugging help (&quot;why isn&#39;t this code working?&quot;) must include the desired behavior, a specific problem or error and the shortest code necessary to reproduce it in the question itself. Questions without a clear problem statement are not useful to other readers. See: <a href=\"http://stackoverflow.com/help/mcve\">How to create a Minimal, Complete, and Verifiable example</a>."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1430311951, "post_id": 29943464, "comment_id": 48009354, "body": "<code>strcpy(ecost,\u201dNode %d\u201d,i);</code> that does not work. Please learn about <code>sprintf()</code>, or even better: <code>snprintf()</code> ."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1430313718, "post_id": 29943464, "comment_id": 48010865, "body": "<b>&quot;create the structure(s) that will allow you to associate the nodes to its connected nodes. These connections are bidirectional.&quot;</b> To me says create a <b>doubly-linked-list</b> (or similar iterative structure with reference to <b>previous/next</b> members) so that the user request any node and you would then be able to provide the cost to the neighbors, etc. Also <b>do not cast the return of <code>malloc</code></b>. (i.e. <code>(struct town *) malloc</code> should simply be <code>malloc</code>)."}, {"owner": {"reputation": 39, "user_id": 4844933, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/35790608f39d79644c291802de34e385?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle Ramos", "link": "https://stackoverflow.com/users/4844933/kyle-ramos"}, "edited": false, "score": 0, "creation_date": 1430315961, "post_id": 29943464, "comment_id": 48012739, "body": "Thanks for your help guys!"}], "owner": {"reputation": 39, "user_id": 4844933, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/35790608f39d79644c291802de34e385?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle Ramos", "link": "https://stackoverflow.com/users/4844933/kyle-ramos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1430553961, "creation_date": 1430309676, "last_edit_date": 1592644375, "question_id": 29943464, "link": "https://stackoverflow.com/questions/29943464/linking-and-assigning-struct-elements-to-random-nodes", "title": "Linking and assigning struct elements to random nodes", "body": "<p>This is the problem:</p>\n<blockquote>\n<p>Basically, you will be given a LARGE file (think 20000+ lines of text) that contains the following:\nLine 1: <code>&lt;number_of_nodes&gt; &lt;number of edges&gt;</code><br />\nThe rest: <code>&lt;Source&gt; &lt;Destination&gt; &lt;Cost&gt;</code><br />\nYour goal is to figure out a memory efficient way to create the structure(s) that will allow you to associate the nodes to its connected nodes. These connections are bidirectional.</p>\n<p>The user should be allowed to input any location/node and the program must output all the neighbors of the node and the corresponding cost from the input node to each of the neighbors.</p>\n</blockquote>\n<p>*note: that |LARGE FILES| contain 25000 lines of text in this format</p>\n<pre><code>integer integer integer\n</code></pre>\n<p>Here's the supposed output:</p>\n<pre><code>Number of nodes is 25000\n\nEnter a node to examine: 0\nNeighbors of node 0 are:\nNode 1 with cost 450\nNode 100 with cost 1130\n\nEnter a node to examine:0\nNeighbors of node 0 are:\nNode 4 with cost 850\nNode 91 with cost 304\n\n\nEnter a node to examine: 0\nNeighbors of node 0 are:\nNode 3 with cost 230\nNode 11 with cost 330\n\nEnter a node to examine: exit\n</code></pre>\n<p>And here's what I've tried:</p>\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nstruct graph {\n    int src;\n    int dest;\n    int cost;\n}PathEdge;\n\nint main()\n{\n    int nlines, i,v;\n    char r;\n    int ecost,ebegin, eend;\n\n    scanf(\u201c%s\u201d,&amp;nlines);\n\n    PathEdge[nlines + 1];\n\n    for(i = 0; i &lt; nlines; i++) {\n        scanf(&quot;%d, %d, %d\\n&quot;, &amp;ebegin, &amp;eend, &amp;ecost);\n        edges[i].begin = ebegin;\n        edges[i].end = eend;\n        edges[i].cost = ecost;\n        struct town\n        {\n            struct town *north;\n            int name[25000];\n        };\n        struct town *root, *current;\n        root = (struct town *) malloc (sizeof (struct town));\n        root-&gt;north = NULL;\n        strcpy (root-&gt;name,ecost);\n        current = (struct town *) malloc (sizeof (struct town));\n        current-&gt;north = root;\n        strcpy (current-&gt;name, ecost);\n        strcpy(ecost,\u201dNode %d\u201d,i);\n    }\n\n    printf(\u201c%d\u201d,sizeof(int name));\n    printf(\u201cPlease enter a node that you want to examine. If you want to exit, please press \u2018X\u2019.\\n\u201d);\n    scanf(\u201c%c\u201d,&amp;r);\n\n    switch(r)\n    {\n    case \u2018X\u2019:\n    case \u2018x\u2019:\n        printf(\u201cYou entered a wrong value. Gomen. Try again.\\n\u201d);\n        break;\n    default:\n        if(0&lt;r&lt;25000)\n        {\n            printf(\u201cYou have accessed node %d\\n\u201d,r);\n            printf(\u201cIts neighboring nodes are %d\\n %d\\n\u201d,ecost[nlines+1],ecost[nlines+2]);\n        }\n        else\n        {\n            printf(\u201cInvalid input again. Please do try again. Thanks\\n\u201d);\n        }\n        break;\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "clock"], "comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1430314145, "post_id": 29943266, "comment_id": 48011202, "body": "Have you contacted the author at the address left in the middle of the <b>library</b> link you provided?"}, {"owner": {"reputation": 1507, "user_id": 4323939, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eroMA.png?s=128&g=1", "display_name": "greenhoorn", "link": "https://stackoverflow.com/users/4323939/greenhoorn"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1430314262, "post_id": 29943266, "comment_id": 48011291, "body": "You mean because it&#39;s in German? No I did not."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1430318345, "post_id": 29943266, "comment_id": 48014866, "body": "My only thought was he may have an English version he can point you to, and I would suspect he can communicate in English. I&#39;d shoot him an e-mail and ask. (and obviously, do not re-post his address on SO or any other public forum -- he would probably not thank you for that)"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1430325308, "post_id": 29943266, "comment_id": 48019903, "body": "@greenhoom I&#39;ve looked at the code. In <code>nibobee&#47;clock.h</code> the declaration for <code>clock_sec</code> is <code>extern volatile uint32_t clock_sec;</code>. The definition of  <code>clock_sec</code> is in <code>clock.c</code> as <code>volatile uint32_t clock_sec;</code>, so unless you are <b>both</b> including <code>clock.h</code> (or defining  <code>extern volatile uint32_t clock_sec;</code> in your code) <b>and</b> compiling your code with <code>clock.c</code> or including the library in your compile string, <code>clock_sec</code> will <b>always</b> be <code>0</code> because it isn&#39;t declared or set."}, {"owner": {"reputation": 1507, "user_id": 4323939, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eroMA.png?s=128&g=1", "display_name": "greenhoorn", "link": "https://stackoverflow.com/users/4323939/greenhoorn"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1430470130, "post_id": 29943266, "comment_id": 48087201, "body": "@DavidC.Rankin Unfortunately he does not have an English version. Thanks for your answer, I will give it a try asap."}], "owner": {"reputation": 1507, "user_id": 4323939, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eroMA.png?s=128&g=1", "display_name": "greenhoorn", "link": "https://stackoverflow.com/users/4323939/greenhoorn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1430309794, "creation_date": 1430309168, "last_edit_date": 1430309794, "question_id": 29943266, "link": "https://stackoverflow.com/questions/29943266/get-clock-sec-from-nibobee-library-clock-h", "title": "get clock_sec from nibobee-library &lt;clock.h&gt;", "body": "<p>I am trying to access the variable <code>clock_sec</code> from the <a href=\"http://doku.nibo-roboter.de/nibobeelib/clock_8h.html\" rel=\"nofollow\">library</a> <code>nibobee/clock.h</code>. But it seems the variable is always zero.</p>\n\n<p>Does someone have a hint?</p>\n\n<pre><code>uint32_t time = clock_sec;\n</code></pre>\n\n<p>Unfortunately I did not find the documentation in English.</p>\n"}, {"tags": ["c", "linux-kernel", "system-calls", "userspace"], "comments": [{"owner": {"reputation": 20035, "user_id": 2971, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f3f6251940b41a2251e7a9f4b745a7f2?s=128&d=identicon&r=PG", "display_name": "Magnus Hoff", "link": "https://stackoverflow.com/users/2971/magnus-hoff"}, "edited": false, "score": 3, "creation_date": 1430309427, "post_id": 29943245, "comment_id": 48007282, "body": "They use the doorbell. This question is platform dependent. On <code>x86-64</code>, the kernel sets up the processor to dispatch <code>syscall</code>s to the kernel. <code>syscall</code> is an assembly instruction, which in the analogy acts as the doorbell."}, {"owner": {"reputation": 100, "user_id": 3705710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25d94fbc225fb418d7b08d6713e47fbf?s=128&d=identicon&r=PG&f=1", "display_name": "nowat", "link": "https://stackoverflow.com/users/3705710/nowat"}, "reply_to_user": {"reputation": 20035, "user_id": 2971, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f3f6251940b41a2251e7a9f4b745a7f2?s=128&d=identicon&r=PG", "display_name": "Magnus Hoff", "link": "https://stackoverflow.com/users/2971/magnus-hoff"}, "edited": false, "score": 0, "creation_date": 1430309534, "post_id": 29943245, "comment_id": 48007357, "body": "What do you mean by &quot;the kernel sets up the processor to dispatch syscall to the kernel&quot;?"}, {"owner": {"reputation": 20035, "user_id": 2971, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f3f6251940b41a2251e7a9f4b745a7f2?s=128&d=identicon&r=PG", "display_name": "Magnus Hoff", "link": "https://stackoverflow.com/users/2971/magnus-hoff"}, "edited": false, "score": 0, "creation_date": 1430309974, "post_id": 29943245, "comment_id": 48007763, "body": "In general, the kernel configures the processor by writing values to specific registers and places in memory. This is reasonable to do as soon as the kernel is loaded at boot. This information is used by the processor to handle the <code>syscall</code> instruction and lots of other stuff the way the kernel intended."}, {"owner": {"reputation": 18888, "user_id": 1880339, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/0PkGx.png?s=128&g=1", "display_name": "artless noise", "link": "https://stackoverflow.com/users/1880339/artless-noise"}, "edited": false, "score": 0, "creation_date": 1430402880, "post_id": 29943245, "comment_id": 48059580, "body": "A <a href=\"http://stackoverflow.com/questions/572942/whats-the-difference-between-c-system-calls-and-c-library-routines\">related question on *syscalls and the &#39;C&#39; library</a>.  You may also look at <a href=\"http://git.kernel.org/cgit/libs/klibc/klibc.git/tree/usr/klibc/arch\" rel=\"nofollow noreferrer\">some</a> <a href=\"https://sourceware.org/git/?p=glibc.git;a=tree;f=sysdeps;hb=HEAD\" rel=\"nofollow noreferrer\">source</a>. As per the answers below, the calls will not be pure &#39;C&#39; but will at least need some compiler extensions or assembler.  <b>Specifics</b> are &#39;platform dependent&#39;, but access protection between userspace and kernel must provide a <code>syscall</code> analogue."}], "answers": [{"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 1, "last_activity_date": 1583016247, "last_edit_date": 1583016247, "creation_date": 1430309500, "answer_id": 29943404, "question_id": 29943245, "link": "https://stackoverflow.com/questions/29943245/how-does-the-linux-kernel-listen-to-the-c-library/29943404#29943404", "title": "How does the Linux kernel &quot;listen&quot; to the C library?", "body": "<p>Many processors have an instruction to call a specific \"trap\" or \"interrupt\", the Linux kernel sets up such a \"trap\" or \"interrupt\" specifically for systems calls.</p>\n\n<p>The library sets up processor registers in a certain way, and then performs the special trap or interrupt instruction, which causes the processor to enter privileged mode and call the kernel's trap/interrupt handler function, which decodes the values in the registers and calls the appropriate function to handle the system call.</p>\n\n<p>That is the most common way, and basically how it's done for just about all systems that need isolation between kernel and user-space.</p>\n"}, {"comments": [{"owner": {"reputation": 100, "user_id": 3705710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25d94fbc225fb418d7b08d6713e47fbf?s=128&d=identicon&r=PG&f=1", "display_name": "nowat", "link": "https://stackoverflow.com/users/3705710/nowat"}, "edited": false, "score": 0, "creation_date": 1430311301, "post_id": 29943624, "comment_id": 48008824, "body": "Are these registers virtual or physical? (the kernel creates virtual memory for each process, are the registers also virtual? or the C library writes straight into the processor when setting up the system call?)"}, {"owner": {"reputation": 1879, "user_id": 1586929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f75b3597330a3d6854efc6f1578fc595?s=128&d=identicon&r=PG", "display_name": "Krzysztof Adamski", "link": "https://stackoverflow.com/users/1586929/krzysztof-adamski"}, "reply_to_user": {"reputation": 100, "user_id": 3705710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25d94fbc225fb418d7b08d6713e47fbf?s=128&d=identicon&r=PG&f=1", "display_name": "nowat", "link": "https://stackoverflow.com/users/3705710/nowat"}, "edited": false, "score": 0, "creation_date": 1430312047, "post_id": 29943624, "comment_id": 48009427, "body": "@yuri: I don&#39;t know what you mean by virtual register. Userspace always uses real CPU registers. There may be more than one process in the system but only one can run on each CPU at the time. If this process is paused, context switch happens and all the register values are saved to memory. They are restored when process is scheduled again. That&#39;s how registers are never overwritten by different process even though they all share them."}], "tags": [], "owner": {"reputation": 1879, "user_id": 1586929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f75b3597330a3d6854efc6f1578fc595?s=128&d=identicon&r=PG", "display_name": "Krzysztof Adamski", "link": "https://stackoverflow.com/users/1586929/krzysztof-adamski"}, "is_accepted": true, "score": 12, "last_activity_date": 1583032631, "last_edit_date": 1583032631, "creation_date": 1430310104, "answer_id": 29943624, "question_id": 29943245, "link": "https://stackoverflow.com/questions/29943245/how-does-the-linux-kernel-listen-to-the-c-library/29943624#29943624", "title": "How does the Linux kernel &quot;listen&quot; to the C library?", "body": "<p>That's quiet easy - the person can use the doorbell to let the kernel know it's waiting outside. And this doorbell in our case is usually a special CPU exception, software interrupt or dedicated instruction that a user-space application is allowed to use and the kernel can handle.</p>\n\n<p>So the procedure is like this:</p>\n\n<ol>\n<li><p>First you need to know the system call number. Each syscall has its unique number and there is a table inside of the kernel that maps those numbers to specific functions. Each architecture can have different table entries for the same number. On two different architectures the same number may map to different syscalls.</p></li>\n<li><p>Then you set up your arguments. This is also architecture specific but is not much different from passing arguments between usual function calls. Usually, you will put your arguments in specific CPU registers. This is described in the ABI of this architecture.</p></li>\n<li><p>Then you enter syscall. Depending on the architecture this may mean causing some exception or executing a dedicated CPU instruction.</p></li>\n<li><p>The kernel has special handler function that runs in kernel mode when a syscall is called. It will pause process execution, storing all the information specific to this process (this is called <code>context switch</code>), read the syscall number and arguments and call proper syscall routine. It will also make sure to put the return value in proper place for user-space to read and to schedule the process back when the syscall routine is done (restoring its context). </p></li>\n</ol>\n\n<p>As an example, to let the kernel know you want to call syscall on x86_64 you can use <code>sysenter</code> instruction with syscall number in <code>%rax</code> register. Arguments are passed using registers (if I remember correctly) <code>%rdi</code>, <code>%rsi</code>, <code>%rdx</code>, <code>%rcx</code>, <code>%r8</code> and <code>%r9</code>.</p>\n\n<p>You could also use an older way that was used on 32 bit x86 CPUs - a software interrupt number 0x80 (<code>int 0x80</code> instruction). Again, syscall number is specified in <code>%rax</code> register and arguments go to (again, if I'm not mistaken) <code>%ebx</code>, <code>%ecx</code>, <code>%edx</code>, <code>%esi</code>, <code>%edi</code>, <code>%ebp</code>.</p>\n\n<p>ARM is very similar - you will use \"supervisor call\" instruction (<code>SVC #0</code>). Your syscall number will go to <code>r7</code> register, all the arguments will go to registers <code>r0-r6</code> and the return value of syscall will be stored in <code>r0</code>.</p>\n\n<p>Other architectures and operating systems use similar techniques. The details may vary - software interrupt numbers may be different, arguments may be passed using different registers or even using stack but the core idea is the same.</p>\n"}], "owner": {"reputation": 100, "user_id": 3705710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25d94fbc225fb418d7b08d6713e47fbf?s=128&d=identicon&r=PG&f=1", "display_name": "nowat", "link": "https://stackoverflow.com/users/3705710/nowat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 594, "favorite_count": 3, "accepted_answer_id": 29943624, "answer_count": 2, "score": 2, "last_activity_date": 1583032631, "creation_date": 1430309118, "question_id": 29943245, "link": "https://stackoverflow.com/questions/29943245/how-does-the-linux-kernel-listen-to-the-c-library", "title": "How does the Linux kernel &quot;listen&quot; to the C library?", "body": "<p>I'm trying to build up a \"big picture\" of how things work in the Linux kernel and userspace, and I'm quite confused.\nI know that userspace make use of system calls to \"talk\" to the kernel, but I don't know how. I tried to read the C library and kernel source codes but they are complex and not easy to understand. I've also read several books regarding conceptual facts about operating systems, like managing processes, memory, devices, but they don't make the \"transition\" (userspace->kernel) clear.\nSo, where exactly the transition between the userspace and kernel space happens? How does the C library run a code that's inside the Linux kernel running in the machine?</p>\n\n<p>To make an analogy: imagine that there is a house. The house is locked. The key to open the house is inside the house itself. There's only one person inside the house, the kernel. The userspace is someone trying to enter the house. My question would be: how does the kernel knows there's someone outside the house wanting the key, and which mechanism allows the house to be opened with that key?</p>\n"}, {"tags": ["android", "c", "reverse-engineering", "elf"], "comments": [{"owner": {"reputation": 2314, "user_id": 446477, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/spFZJ.jpg?s=128&g=1", "display_name": "ouflak", "link": "https://stackoverflow.com/users/446477/ouflak"}, "edited": false, "score": 0, "creation_date": 1430309773, "post_id": 29943220, "comment_id": 48007594, "body": "Could you post your attempt?"}, {"owner": {"reputation": 74, "user_id": 2082238, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/LxSwN.jpg?s=128&g=1", "display_name": "Mustafa Saleem", "link": "https://stackoverflow.com/users/2082238/mustafa-saleem"}, "reply_to_user": {"reputation": 2314, "user_id": 446477, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/spFZJ.jpg?s=128&g=1", "display_name": "ouflak", "link": "https://stackoverflow.com/users/446477/ouflak"}, "edited": false, "score": 0, "creation_date": 1430310334, "post_id": 29943220, "comment_id": 48008049, "body": "i found boat.oat file and .so but these are not executable elf binaries"}, {"owner": {"reputation": 38430, "user_id": 429063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fd38783123814dee889d28c991e56fb?s=128&d=identicon&r=PG", "display_name": "Chris Stratton", "link": "https://stackoverflow.com/users/429063/chris-stratton"}, "edited": false, "score": 3, "creation_date": 1430313627, "post_id": 29943220, "comment_id": 48010791, "body": "Which executable?  Android mostly works by forking and loading libraries, exec() is rarely called.  Normally the only executables will be those shipped with the Android installation."}, {"owner": {"reputation": 70442, "user_id": 1060350, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/XCkw7.jpg?s=128&g=1", "display_name": "Has QUIT--Anony-Mousse", "link": "https://stackoverflow.com/users/1060350/has-quit-anony-mousse"}, "edited": false, "score": 2, "creation_date": 1430341078, "post_id": 29943220, "comment_id": 48029549, "body": "The poor elves. First they need to do christmas presents, and now they are exploited in mining..."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 38430, "user_id": 429063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fd38783123814dee889d28c991e56fb?s=128&d=identicon&r=PG", "display_name": "Chris Stratton", "link": "https://stackoverflow.com/users/429063/chris-stratton"}, "edited": false, "score": 1, "creation_date": 1430431222, "post_id": 29943220, "comment_id": 48076633, "body": "To clarify, I <i>think</i> what @ChrisStratton is trying to tell you is that the <code>.so</code> you found <i>is</i> the AOT-compiled binary you are looking for - it&#39;s just not an <i>executable</i>, because the ART VM operates by <code>dlopen</code>-ing applications and calling them, rather than <code>exec</code>-ing them.  (I don&#39;t actually <i>know</i> that, though, it&#39;s just my interpretation of their comment.)"}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1430431272, "post_id": 29943220, "comment_id": 48076658, "body": "Also I would think your analysis would have better luck clustering on the <code>.apk</code> or <code>.dex</code> or <code>.odex</code> or whatever, as those contain strictly more information."}, {"owner": {"reputation": 38430, "user_id": 429063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fd38783123814dee889d28c991e56fb?s=128&d=identicon&r=PG", "display_name": "Chris Stratton", "link": "https://stackoverflow.com/users/429063/chris-stratton"}, "reply_to_user": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1430447534, "post_id": 29943220, "comment_id": 48081214, "body": "@zwol - the ART-compiled output is a .oat file, though like a .so it is at least to a degree in ELF format.  The only native code in a typical .apk would be JNI libraries if utilized, while a .odex file does not contain native code either, but only dex code which has been partially digested by and for a Davlik (vs ART) system, by having things like symbolic references resolved."}], "owner": {"reputation": 74, "user_id": 2082238, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/LxSwN.jpg?s=128&g=1", "display_name": "Mustafa Saleem", "link": "https://stackoverflow.com/users/2082238/mustafa-saleem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1137, "favorite_count": 3, "answer_count": 0, "score": 3, "last_activity_date": 1430339250, "creation_date": 1430309082, "last_edit_date": 1430334932, "question_id": 29943220, "link": "https://stackoverflow.com/questions/29943220/how-to-get-elf-executable-binaries-in-android-5-0-art", "title": "How to get ELF executable binaries in Android 5.0 ART", "body": "<p>We are working on <a href=\"http://en.wikipedia.org/wiki/Executable_and_Linkable_Format\" rel=\"nofollow\">ELF</a> mining. We are unable to find path of <code>ELF</code> executable in Android 5.0 ART Architecture. \nI currently found <code>.so</code> and <code>.oat</code> files via Xplore, but these are not ELF executable binaries. </p>\n\n<p>More Detail:\nAfter Android 4.4.4 the Dalvik VM was replaced by ART. In Android 5.0 the DVM's App's dex code was converted to <code>odex</code> to get executed. In ART its converted to <code>ELF</code> executable code. </p>\n\n<p>I am working on Malware detection software which works by mining <code>ELF</code> files to cluster patterns of anomalies. As ART works on AOT compilation so executable binary file (ELF) should exist against each App in internal storage.</p>\n\n<p>My question:\n I want to know the path of the <code>ELF</code> file of Apps or some method to obtain <code>ELF</code> from <code>.apk</code> or <code>.dex</code> file.</p>\n"}, {"tags": ["c", "linux", "device", "barcode", "barcode-scanner"], "comments": [{"owner": {"reputation": 1718, "user_id": 2760375, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/25679f917da6b6f54efa1b30a0546d57?s=128&d=identicon&r=PG", "display_name": "user2760375", "link": "https://stackoverflow.com/users/2760375/user2760375"}, "edited": false, "score": 0, "creation_date": 1430307857, "post_id": 29942421, "comment_id": 48006151, "body": "I tried your code by replacing file with a text file opening it is printing everything as expected. I don&#39;t think any wrong with the code"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1430308131, "post_id": 29942421, "comment_id": 48006360, "body": "You have to be careful with that check for failed read. You should really handle the case when <code>read</code> returns separately, and also check what <code>errno</code> is when <code>read</code> returns <code>-1</code> (as you don&#39;t know if it&#39;s an error or no data available)."}], "answers": [{"comments": [{"owner": {"reputation": 959, "user_id": 3166532, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f116ebe7c11450f913285087ec9109d5?s=128&d=identicon&r=PG&f=1", "display_name": "Andre", "link": "https://stackoverflow.com/users/3166532/andre"}, "edited": false, "score": 0, "creation_date": 1430378259, "post_id": 29956584, "comment_id": 48043115, "body": "Thanks for your answer, but there is a reason to use O_NONBLOCK. The read is blocking and when there is no data anymore, my program has to recognise that. And I sleep for 1 second so there are not thousands of calls, there is only one call per second."}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "reply_to_user": {"reputation": 959, "user_id": 3166532, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f116ebe7c11450f913285087ec9109d5?s=128&d=identicon&r=PG&f=1", "display_name": "Andre", "link": "https://stackoverflow.com/users/3166532/andre"}, "edited": false, "score": 0, "creation_date": 1430386408, "post_id": 29956584, "comment_id": 48048311, "body": "@Andre: You&#39;d be better off not using O_NONBLOCK. If you want a timeout, use a periodic timer with about timeout/2 period. The delivery of the signal will interrupt the blocking read. Do you need real example code?"}, {"owner": {"reputation": 959, "user_id": 3166532, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f116ebe7c11450f913285087ec9109d5?s=128&d=identicon&r=PG&f=1", "display_name": "Andre", "link": "https://stackoverflow.com/users/3166532/andre"}, "edited": false, "score": 0, "creation_date": 1430400084, "post_id": 29956584, "comment_id": 48057339, "body": "I never worked with this stuff, so a example would be interesting :)"}, {"owner": {"reputation": 959, "user_id": 3166532, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f116ebe7c11450f913285087ec9109d5?s=128&d=identicon&r=PG&f=1", "display_name": "Andre", "link": "https://stackoverflow.com/users/3166532/andre"}, "edited": false, "score": 1, "creation_date": 1430400213, "post_id": 29956584, "comment_id": 48057430, "body": "by the way, I solved my problem with a extra-thread. This thread is now reading(and blocking) and gives the results through a pipe to the main-process."}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "reply_to_user": {"reputation": 959, "user_id": 3166532, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f116ebe7c11450f913285087ec9109d5?s=128&d=identicon&r=PG&f=1", "display_name": "Andre", "link": "https://stackoverflow.com/users/3166532/andre"}, "edited": false, "score": 1, "creation_date": 1430474028, "post_id": 29956584, "comment_id": 48088807, "body": "@Andre: A separate privileged process is a workable solution (as you can run that separate process with different credentials) but you should add an <code>udev</code> rule to allow a specific user and/or group to read from the device. I&#39;ve added my own initial approach -- only very lightly tested -- to this answer."}], "tags": [], "owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "is_accepted": true, "score": 8, "last_activity_date": 1440177509, "last_edit_date": 1495541633, "creation_date": 1430351181, "answer_id": 29956584, "question_id": 29942421, "link": "https://stackoverflow.com/questions/29942421/read-barcodes-from-input-event-linux-c/29956584#29956584", "title": "Read barcodes from input-event (linux, c)", "body": "<p>You should only consider the event when the <code>read()</code> returns <code>== sizeof ev</code>, because we're reading from an input device here. If it returns zero, it means no more events are forthcoming (maybe device detached?). If it returns <code>-1</code>, check <code>errno</code>. If <code>read()</code> returns any other value, the kernel driver has gone bonkers and you could consider it a fatal error.</p>\n\n<p><code>errno == EINTR</code> is normal (occurs when a signal is delivered), it is not an error per se. It shouldn't happen here, but ignoring it (treating it as just a hiccup, not an error) is quite safe.</p>\n\n<p><code>errno == EAGAIN</code> occurs when you used <code>O_NONBLOCK</code> in the <code>open()</code> flags, and there is no new event available yet.</p>\n\n<p>There is absolutely no reason to use <code>O_NONBLOCK</code> here. All it does is causes your code to waste CPU cycles, returning tens of thousands of times per second from the <code>read()</code> call just to return <code>-1</code> with <code>errno == EAGAIN</code>. Just drop it, so that the <code>read()</code> will simply wait until a new event arrives, and returns it.</p>\n\n<p>See my answer to the <a href=\"https://stackoverflow.com/a/16695758/1475978\">input_event structure description</a> question.</p>\n\n<p>In summary, for <code>ev_type == 1 == EV_KEY</code>:</p>\n\n<ul>\n<li><code>ev_value == 0</code>: key released (key up)</li>\n<li><code>ev_value == 1</code>: key pressed (key down)</li>\n<li><code>ev_value == 2</code>: autorepeat (key automatically repeated)</li>\n<li><code>ev_code == 1 == KEY_ESC</code></li>\n<li><code>ev_code == 2 == KEY_1</code></li>\n<li><code>ev_code == 3 == KEY_2</code></li>\n<li><code>ev_code == 10 == KEY_9</code></li>\n<li><code>ev_code == 11 == KEY_0</code></li>\n<li><code>ev_code == 28 == KEY_ENTER</code></li>\n</ul>\n\n<p>The keypresses the device provided are actually <kbd>1</kbd> <kbd>2</kbd> <kbd>3</kbd> <kbd>4</kbd> <kbd>5</kbd> <kbd>6</kbd> <kbd>7</kbd> <kbd>8</kbd> <kbd>9</kbd> <kbd>Enter</kbd>.</p>\n\n<p>(Note that you only showed the key release events; you should actually see two, one with <code>ev_value == 1</code>, followed by one with <code>ev_value == 0</code>, for each <code>ev_code</code>.)</p>\n\n<p>The one Chinese one I've tried was very nice, although dirt cheap. It had a manual with a few barcodes, including some to switch between barcode formats (and number of digits). I vaguely remember using two barcodes to switch to another mode, and to use the minimum volume for the beeps. It seemed to retain the settings even after being detached.</p>\n\n<hr>\n\n<p>Here is an example of what kind of implementation I'd use to read barcodes. I'd obviously split the barcode reading part to a separate file.</p>\n\n<p>The below code is dedicated to public domain (licensed under <a href=\"https://creativecommons.org/publicdomain/zero/1.0/\" rel=\"noreferrer\">CC0</a>), so feel free to use it in any way you wish. There is no guarantees of any kind, so don't blame me for any breakage. (Any bug fixes are welcome; if reported, I will check and include in the below code. I recommend adding a comment below; I do read all comments to my answers every couple of days or so.)</p>\n\n<p>The header file <code>barcode.h</code>:</p>\n\n<pre><code>#ifndef   BARCODE_H\n#define   BARCODE_H\n#include &lt;stdlib.h&gt;\n#include &lt;signal.h&gt;\n\n/* This flags turns nonzero if any signal\n * installed with install_done is caught.\n*/\nextern volatile sig_atomic_t done;\n\n/* Install signals that set 'done'.\n*/\nint install_done(const int signum);\n\n/* Barcode device description.\n * Do not meddle with the internals;\n * this is here only to allow you\n * to allocate one statically.\n*/\ntypedef struct {\n    int             fd;\n    volatile int    timeout;\n    timer_t         timer;\n} barcode_dev;\n\n/* Close a barcode device.\n * Returns 0 if success, nonzero errno error code otherwise.\n*/\nint barcode_close(barcode_dev *const dev);\n\n/* Open a barcode device.\n * Returns 0 if success, nonzero errno error code otherwise.\n*/\nint barcode_open(barcode_dev *const dev, const char *const device_path);\n\n/* Read a barcode, but do not spend more than maximum_ms.\n * Returns the length of the barcode read.\n * (although at most length-1 characters are saved at the buffer,\n *  the total length of the barcode is returned.)\n * errno is always set; 0 if success, error code otherwise.\n * If the reading timed out, errno will be set to ETIMEDOUT.\n*/\nsize_t barcode_read(barcode_dev *const dev,\n                    char *const buffer, const size_t length,\n                    const unsigned long maximum_ms);\n\n#endif /* BARCODE_H */\n</code></pre>\n\n<p>The implementation in the following <code>barcode.c</code> file currently accepts only digits (0 through 1), but it should be trivial to add any other necessary keys (like <code>KEY_A</code> through <code>KEY_Z</code>). The current one ignores shift, control, et cetera, as they are not provided by any scanners as far as I know. It uses <code>SIGRTMAX-0</code> realtime signal and a custom timer per barcode device to read barcodes, so you'll need to link it against <code>librt</code> (<code>-lrt</code>): </p>\n\n<pre><code>#define  _POSIX_C_SOURCE 200809L\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;sys/ioctl.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;signal.h&gt;\n#include &lt;time.h&gt;\n#include &lt;linux/input.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;errno.h&gt;\n\n/* Link against the rt library; -lrt. */\n\n#define UNUSED          __attribute__((unused))\n#define TIMEOUT_SIGNAL  (SIGRTMAX-0)\n\n/*\n * done - flag used to exit program at SIGINT, SIGTERM etc.\n*/\n\nvolatile sig_atomic_t done = 0;\n\nstatic void handle_done(int signum UNUSED)\n{\n    done = 1;\n}\n\nint install_done(const int signum)\n{\n    struct sigaction act;\n    sigemptyset(&amp;act.sa_mask);\n    act.sa_handler = handle_done;\n    act.sa_flags = 0;\n    if (sigaction(signum, &amp;act, NULL) == -1)\n        return errno;\n    return 0;\n}\n\n/*\n * Barcode input event device, and associated timeout timer.\n*/\n\ntypedef struct {\n    int             fd;\n    volatile int    timeout;\n    timer_t         timer;\n} barcode_dev;\n\nstatic void handle_timeout(int signum UNUSED, siginfo_t *info, void *context UNUSED)\n{\n    if (info &amp;&amp; info-&gt;si_code == SI_TIMER &amp;&amp; info-&gt;si_value.sival_ptr)\n#if __GNUC__ &gt; 4 || (__GNUC__ == 4 &amp;&amp; __GNUC_MINOR__ &gt;= 7)\n        __atomic_add_fetch((int *)info-&gt;si_value.sival_ptr, 1, __ATOMIC_SEQ_CST);\n#else\n        __sync_add_and_fetch((int *)info-&gt;si_value.sival_ptr, 1);\n#endif\n}\n\nstatic int install_timeouts(void)\n{\n    static int installed = 0;\n\n    if (!installed) {\n        struct sigaction act;\n        sigemptyset(&amp;act.sa_mask);\n        act.sa_sigaction = handle_timeout;\n        act.sa_flags = SA_SIGINFO;\n        if (sigaction(TIMEOUT_SIGNAL, &amp;act, NULL) == -1)\n            return errno;\n        installed = 1;        \n    }\n\n    return 0;\n}\n\nint barcode_close(barcode_dev *const dev)\n{\n    int retval = 0;\n\n    if (!dev)\n        return 0;\n\n    if (dev-&gt;fd != -1)\n        if (close(dev-&gt;fd) == -1)\n            retval = errno;\n\n    dev-&gt;fd = -1;\n\n    if (dev-&gt;timer)\n        if (timer_delete(dev-&gt;timer) == -1)\n            if (!retval)\n                retval = errno;\n\n    dev-&gt;timer = (timer_t)0;\n\n    /* Handle all pending TIMEOUT_SIGNALs */\n    while (1) {\n        struct timespec t;\n        siginfo_t info;\n        sigset_t s;\n\n        t.tv_sec = (time_t)0;\n        t.tv_nsec = 0L;\n        sigemptyset(&amp;s);\n\n        if (sigtimedwait(&amp;s, &amp;info, &amp;t) != TIMEOUT_SIGNAL)\n            break;\n\n        if (info.si_code != SI_TIMER || !info.si_value.sival_ptr)\n            continue;\n\n#if __GNUC__ &gt; 4 || (__GNUC__ == 4 &amp;&amp; __GNUC_MINOR__ &gt;= 7)\n        __atomic_add_fetch((int *)info.si_value.sival_ptr, 1, __ATOMIC_SEQ_CST);\n#else\n        __sync_add_and_fetch((int *)info.si_value.sival_ptr, 1);\n#endif\n    }\n\n    return errno = retval;\n}\n\nint barcode_open(barcode_dev *const dev, const char *const device_path)\n{\n    struct sigevent event;\n    int fd;\n\n    if (!dev)\n        return errno = EINVAL;\n\n    dev-&gt;fd = -1;\n    dev-&gt;timeout = -1;\n    dev-&gt;timer = (timer_t)0;\n\n    if (!device_path || !*device_path)\n        return errno = EINVAL;\n\n    if (install_timeouts())\n        return errno;\n\n    do {\n        fd = open(device_path, O_RDONLY | O_NOCTTY | O_CLOEXEC);\n    } while (fd == -1 &amp;&amp; errno == EINTR);\n    if (fd == -1)\n        return errno;\n\n    errno = 0;\n    if (ioctl(fd, EVIOCGRAB, 1)) {\n        const int saved_errno = errno;\n        close(fd);\n        return errno = (saved_errno) ? errno : EACCES;\n    }\n\n    dev-&gt;fd = fd;\n\n    memset(&amp;event, 0, sizeof event);\n    event.sigev_notify = SIGEV_SIGNAL;\n    event.sigev_signo = TIMEOUT_SIGNAL;\n    event.sigev_value.sival_ptr = (void *)&amp;(dev-&gt;timeout);\n    if (timer_create(CLOCK_REALTIME, &amp;event, &amp;dev-&gt;timer) == -1) {\n        const int saved_errno = errno;\n        close(fd);\n        return errno = (saved_errno) ? errno : EMFILE;\n    }\n\n    return errno = 0;\n}\n\nsize_t barcode_read(barcode_dev *const dev,\n                    char *const buffer, const size_t length,\n                    const unsigned long maximum_ms)\n{\n    struct itimerspec it;\n    size_t len = 0;\n    int status = ETIMEDOUT;\n\n    if (!dev || !buffer || length &lt; 2 || maximum_ms &lt; 1UL) {\n        errno = EINVAL;\n        return (size_t)0;\n    }\n\n    /* Initial timeout. */\n    it.it_value.tv_sec = maximum_ms / 1000UL;\n    it.it_value.tv_nsec = (maximum_ms % 1000UL) * 1000000L;\n\n    /* After elapsing, fire every 10 ms. */\n    it.it_interval.tv_sec = 0;\n    it.it_interval.tv_nsec = 10000000L;\n\n    if (timer_settime(dev-&gt;timer, 0, &amp;it, NULL) == -1)\n        return (size_t)0;\n\n    /* Because of the repeated elapsing, it is safe to\n     * clear the timeout flag here. */\n#if __GNUC__ &gt; 4 || (__GNUC__ == 4 &amp;&amp; __GNUC_MINOR &gt;= 7)\n    __atomic_store_n((int *)&amp;(dev-&gt;timeout), 0, __ATOMIC_SEQ_CST);\n#else\n    __sync_fetch_and_and((int *)&amp;(dev-&gt;timeout), 0);\n#endif\n\n    while (!dev-&gt;timeout) {\n        struct input_event ev;\n        ssize_t n;\n        int digit;\n\n        n = read(dev-&gt;fd, &amp;ev, sizeof ev);\n        if (n == (ssize_t)-1) {\n            if (errno == EINTR)\n                continue;\n            status = errno;\n            break;\n\n        } else\n        if (n == sizeof ev) {\n\n            /* We consider only key presses and autorepeats. */\n            if (ev.type != EV_KEY || (ev.value != 1 &amp;&amp; ev.value != 2))\n                continue;\n\n            switch (ev.code) {\n            case KEY_0: digit = '0'; break;\n            case KEY_1: digit = '1'; break;\n            case KEY_2: digit = '2'; break;\n            case KEY_3: digit = '3'; break;\n            case KEY_4: digit = '4'; break;\n            case KEY_5: digit = '5'; break;\n            case KEY_6: digit = '6'; break;\n            case KEY_7: digit = '7'; break;\n            case KEY_8: digit = '8'; break;\n            case KEY_9: digit = '9'; break;\n            default:    digit = '\\0';\n            }\n\n            /* Non-digit key ends the code, except at beginning of code. */\n            if (digit == '\\0') {\n                if (!len)\n                    continue;\n                status = 0;\n                break;\n            }\n\n            if (len &lt; length)\n                buffer[len] = digit;\n            len++;\n\n            continue;\n\n        } else\n        if (n == (ssize_t)0) {\n            status = ENOENT;\n            break;                \n\n        } else {\n            status = EIO;\n            break;\n        }\n    }\n\n    /* Add terminator character to buffer. */\n    if (len + 1 &lt; length)\n        buffer[len + 1] = '\\0';\n    else\n        buffer[length - 1] = '\\0';\n\n    /* Cancel timeout. */\n    it.it_value.tv_sec = 0;\n    it.it_value.tv_nsec = 0;\n    it.it_interval.tv_sec = 0;\n    it.it_interval.tv_nsec = 0L;\n    (void)timer_settime(dev-&gt;timer, 0, &amp;it, NULL);\n\n    errno = status;\n    return len;\n}\n</code></pre>\n\n<p>Here is an example program, <code>example.c</code>. You supply the input event device (I suggest using a symlink in <code>/dev/input/by-id/</code> or <code>/dev/input/by-path/</code> if your <code>udev</code> provides those, as event device indexes may not be stable across kernel versions and hardware boots), and the maximum duration you're willing to wait for/until next barcode.</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;signal.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;errno.h&gt;\n#include \"barcode.h\"\n\n#define BARCODE_MAXLEN  1023\n\nint main(int argc, char *argv[])\n{\n    barcode_dev    dev;\n    unsigned long  ms;\n    int            status, exitcode;\n\n    if (argc != 3 || !strcmp(argv[1], \"-h\") || !strcmp(argv[1], \"--help\")) {\n        fprintf(stderr, \"\\n\");\n        fprintf(stderr, \"Usage: %s [ -h | --help ]\\n\", argv[0]);\n        fprintf(stderr, \"       %s INPUT-EVENT-DEVICE IDLE-TIMEOUT\\n\", argv[0]);\n        fprintf(stderr, \"\\n\");\n        fprintf(stderr, \"This program reads barcodes from INPUT-EVENT-DEVICE,\\n\");\n        fprintf(stderr, \"waiting at most IDLE-TIMEOUT seconds for a new barcode.\\n\");\n        fprintf(stderr, \"The INPUT-EVENT-DEVICE is grabbed, the digits do not appear as\\n\");\n        fprintf(stderr, \"inputs in the machine.\\n\");\n        fprintf(stderr, \"You can at any time end the program by sending it a\\n\");\n        fprintf(stderr, \"SIGINT (Ctrl+C), SIGHUP, or SIGTERM signal.\\n\");\n        fprintf(stderr, \"\\n\");\n        return EXIT_FAILURE;\n    }\n\n    if (install_done(SIGINT) ||\n        install_done(SIGHUP) ||\n        install_done(SIGTERM)) {\n        fprintf(stderr, \"Cannot install signal handlers: %s.\\n\", strerror(errno));\n        return EXIT_FAILURE;\n    }\n\n    {\n        double value, check;\n        char dummy;\n        if (sscanf(argv[2], \" %lf %c\", &amp;value, &amp;dummy) != 1 || value &lt; 0.001) {\n            fprintf(stderr, \"%s: Invalid idle timeout value (in seconds).\\n\", argv[2]);\n            return EXIT_FAILURE;\n        }\n        ms = (unsigned long)(value * 1000.0);\n        check = (double)ms / 1000.0;\n\n        if (value &lt; check - 0.001 || value &gt; check + 0.001 || ms &lt; 1UL) {\n            fprintf(stderr, \"%s: Idle timeout is too long.\\n\", argv[2]);\n            return EXIT_FAILURE;\n        }\n    }\n\n    if (barcode_open(&amp;dev, argv[1])) {\n        fprintf(stderr, \"%s: Cannot open barcode input event device: %s.\\n\", argv[1], strerror(errno));\n        return EXIT_FAILURE;\n    }\n\n    while (1) {\n        char    code[BARCODE_MAXLEN + 1];\n        size_t  len;\n\n        if (done) {\n            status = EINTR;\n            break;\n        }\n\n        len = barcode_read(&amp;dev, code, sizeof code, ms);\n        if (errno) {\n            status = errno;\n            break;\n        }\n        if (len &lt; (size_t)1) {\n            status = ETIMEDOUT;\n            break;\n        }\n\n        printf(\"%zu-digit barcode: %s\\n\", len, code);\n        fflush(stdout);\n    }\n\n    if (status == EINTR) {\n        fprintf(stderr, \"Signaled to exit. Complying.\\n\");\n        fflush(stderr);\n        exitcode = EXIT_SUCCESS;\n    } else\n    if (status == ETIMEDOUT) {\n        fprintf(stderr, \"Timed out, no more barcodes.\\n\");\n        fflush(stderr);\n        exitcode = EXIT_SUCCESS;\n    } else {\n        fprintf(stderr, \"Error reading input event device %s: %s.\\n\", argv[1], strerror(status));\n        fflush(stderr);\n        exitcode = EXIT_FAILURE;\n    }\n\n    if (barcode_close(&amp;dev)) {\n        fprintf(stderr, \"Warning: Error closing input event device %s: %s.\\n\", argv[1], strerror(errno));\n        fflush(stderr);\n        exitcode = EXIT_FAILURE;\n    }\n\n    return exitcode;\n}\n</code></pre>\n\n<p>As you can see, it just prints the barcodes to standard output (and any error messages and warnings to standard error). To compile it, I recommend using the following <code>Makefile</code> (indentation must be using <kbd>Tab</kbd>, not spaces):</p>\n\n<pre><code>CC      := gcc\nCFLAGS  := -Wall -Wextra -O2\nLDFLAGS := -lrt\n\n.PHONY: all clean\n\nall: clean example\n\nclean:\n    rm -f example *.o\n\n%.o: %.c\n    $(CC) $(CFLAGS) -c $^\n\nexample: example.o barcode.o\n    $(CC) $(CFLAGS) $^ $(LDFLAGS) -o example\n</code></pre>\n\n<p>To compile, create the four files listed above, then run</p>\n\n<pre><code>make clean example\n</code></pre>\n\n<p>Running for example</p>\n\n<pre><code>./example /dev/input/event4 5.0\n</code></pre>\n\n<p>will read barcodes from <code>/dev/input/event4</code>, but will exit at <kbd>Ctrl</kbd>+<kbd>C</kbd> (INT signal), HUP signal, TERM signal, or if no barcode appears within 5 seconds.</p>\n\n<p>Note that if only a partial barcode is read within that 5 seconds, we do get that partial part (and could just try and read the rest of it), but the above example program ignores the partial, and only shows the timeout.</p>\n\n<p>Questions?</p>\n"}], "owner": {"reputation": 959, "user_id": 3166532, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f116ebe7c11450f913285087ec9109d5?s=128&d=identicon&r=PG&f=1", "display_name": "Andre", "link": "https://stackoverflow.com/users/3166532/andre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7794, "favorite_count": 3, "accepted_answer_id": 29956584, "answer_count": 1, "score": 4, "last_activity_date": 1441758304, "creation_date": 1430307032, "last_edit_date": 1430318140, "question_id": 29942421, "link": "https://stackoverflow.com/questions/29942421/read-barcodes-from-input-event-linux-c", "title": "Read barcodes from input-event (linux, c)", "body": "<p>I have a small program that read barcodes from /dev/input/event4.\nThis is the code:</p>\n\n<pre><code>#include &lt;sys/file.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;linux/input.h&gt;\n\nint main (int argc, char *argv[])\n{\n        struct input_event ev;\n        int fd, rd;\n\n        //Open Device\n        if ((fd = open (\"/dev/input/event4\", O_RDONLY|O_NONBLOCK)) == -1){\n                printf (\"not a vaild device.\\n\");\n                return -1;\n        }\n\n        while (1){\n\n                memset((void*)&amp;ev, 0, sizeof(ev));\n\n                rd = read (fd, (void*)&amp;ev, sizeof(ev));\n\n                if (rd &lt;= 0){\n                        printf (\"rd: %d\\n\", rd);\n                        sleep(1);\n                }\n\n                if(rd&gt;0 &amp;&amp; ev.value==0 &amp;&amp; ev.type==1){\n                        printf(\"type: %d, code: %d, value: %d, rd: %d\\n\", ev.type, ev.code, ev.value, rd);\n                }\n        }\n\n        return 0;\n}\n</code></pre>\n\n<p>I have now created some barcodes with an online-generator (<a href=\"http://www.barcode-generator.de/V2/de/index.jsp\" rel=\"nofollow\">http://www.barcode-generator.de/V2/de/index.jsp</a>). The barcodes are:\n123456789 and 1234567890</p>\n\n<p>The output of my programm when scanning the barcodes is:</p>\n\n<pre><code>type: 1, code: 2, value: 0, rd: 16\ntype: 1, code: 3, value: 0, rd: 16\ntype: 1, code: 4, value: 0, rd: 16\ntype: 1, code: 5, value: 0, rd: 16\ntype: 1, code: 6, value: 0, rd: 16\ntype: 1, code: 7, value: 0, rd: 16\ntype: 1, code: 8, value: 0, rd: 16\ntype: 1, code: 9, value: 0, rd: 16\ntype: 1, code: 10, value: 0, rd: 16\ntype: 1, code: 28, value: 0, rd: 16\n</code></pre>\n\n<p>for the 123456789</p>\n\n<p>and </p>\n\n<pre><code>type: 1, code: 28, value: 0, rd: 16\n</code></pre>\n\n<p>for the 1234567890</p>\n\n<p>So, the 10-digit-barcodes is not recognised correctly.</p>\n\n<p>The code: 28 means this is an RETURN/ENTER, this is the internal terminator for a barcode, so this comes directly from the scanner.</p>\n\n<p>Does anyone can tell my why ? Maybe there is something wrong with the code ?</p>\n\n<p>Goodbye, Andre</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 4, "creation_date": 1430307144, "post_id": 29942414, "comment_id": 48005555, "body": "See <a href=\"http://en.wikipedia.org/wiki/Short-circuit_evaluation\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Short-circuit_evaluation</a>"}, {"owner": {"reputation": 27069, "user_id": 2307070, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/l8ha6.jpg?s=128&g=1", "display_name": "Thomas Ayoub", "link": "https://stackoverflow.com/users/2307070/thomas-ayoub"}, "edited": false, "score": 1, "creation_date": 1430307187, "post_id": 29942414, "comment_id": 48005587, "body": "Or <a href=\"http://stackoverflow.com/a/29141619/2307070\">this answer of mine</a>"}, {"owner": {"reputation": 477, "user_id": 1100521, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/2c8b35fc8f056b8760911b4338f3fd09?s=128&d=identicon&r=PG", "display_name": "Jonathan V", "link": "https://stackoverflow.com/users/1100521/jonathan-v"}, "edited": false, "score": 0, "creation_date": 1430307390, "post_id": 29942414, "comment_id": 48005770, "body": "that makes sense, thanks"}, {"owner": {"reputation": 224, "user_id": 3663917, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/RWAo3.jpg?s=128&g=1", "display_name": "user-ag", "link": "https://stackoverflow.com/users/3663917/user-ag"}, "edited": false, "score": 1, "creation_date": 1430307658, "post_id": 29942414, "comment_id": 48005996, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/29141368/if-statements-what-is-happening-in-an-if-and-if-construc\">If Statements - What is happening in an &quot;If(..||..)&quot; and &quot;If(...&amp;&amp;...)&quot; construct internally?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 1, "creation_date": 1430309657, "post_id": 29942806, "comment_id": 48007493, "body": "Mention the word &quot;short-circuit&quot; somewhere."}], "tags": [], "owner": {"reputation": 4224, "user_id": 3383213, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/91b489041a73ecbb02cc26af19b5f664?s=128&d=identicon&r=PG&f=1", "display_name": "Himanshu", "link": "https://stackoverflow.com/users/3383213/himanshu"}, "is_accepted": true, "score": 2, "last_activity_date": 1430308038, "creation_date": 1430308038, "answer_id": 29942806, "question_id": 29942414, "link": "https://stackoverflow.com/questions/29942414/effect-of-the-operator-on-x/29942806#29942806", "title": "Effect of the ||-operator on ++x", "body": "<p>In <code>||</code> OR ,  if first condition is true, it will not check second condition.(it will skip 2nd condition).    </p>\n\n<p>As </p>\n\n<pre><code>m = ++i || ++k;\n</code></pre>\n\n<p>in this condition after <code>++i</code>, value of <code>i</code> will become <code>1</code>, as first condition is <code>true</code>, so it will skip second condition. so the operation <code>++k</code> will not be performed.<br>\nAnd hence <code>k</code> will remain <code>0</code>.  </p>\n\n<p>Same as if you are using  <code>&amp;&amp;</code> , and first condition is <code>false</code> it will skip second condition. and result will be <code>0</code> (false).</p>\n"}], "owner": {"reputation": 477, "user_id": 1100521, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/2c8b35fc8f056b8760911b4338f3fd09?s=128&d=identicon&r=PG", "display_name": "Jonathan V", "link": "https://stackoverflow.com/users/1100521/jonathan-v"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 29942806, "answer_count": 1, "score": -4, "last_activity_date": 1430308038, "creation_date": 1430307021, "question_id": 29942414, "link": "https://stackoverflow.com/questions/29942414/effect-of-the-operator-on-x", "title": "Effect of the ||-operator on ++x", "body": "<pre><code>#include&lt;stdio.h&gt;\nint main()\n{\n   int i=0, k=0, m;\n   m = ++i || ++k;\n   printf(\"%d, %d, %d\\n\", i, k, m);\n   return 0;\n }\n</code></pre>\n\n<p>returns </p>\n\n<pre><code>1,0,1\n</code></pre>\n\n<p>Why is k = 0 and not 1? what is the effect of the ||-operator on the ++k?\nThanks!</p>\n\n<p>example: <a href=\"https://ideone.com/Fjsbii\" rel=\"nofollow\">https://ideone.com/Fjsbii</a></p>\n"}, {"tags": ["c", "visual-studio", "ascii"], "comments": [{"owner": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "edited": false, "score": 0, "creation_date": 1430307063, "post_id": 29942397, "comment_id": 48005502, "body": "Welcome to Stack Overflow! You could take the <a href=\"http://stackoverflow.com/tour\">tour</a> to have a global idea of how this site works, and read the <a href=\"http://stackoverflow.com/help/asking\">advice on how to ask</a> in the help center to see what questions are welcomed here and which are not."}, {"owner": {"reputation": 292363, "user_id": 37213, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/eeec80237213c91e5bab56b77ac5b8ca?s=128&d=identicon&r=PG", "display_name": "duffymo", "link": "https://stackoverflow.com/users/37213/duffymo"}, "edited": false, "score": 1, "creation_date": 1430307074, "post_id": 29942397, "comment_id": 48005505, "body": "What are you having trouble with?"}, {"owner": {"reputation": 11, "user_id": 4846095, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206837013950827/picture?type=large", "display_name": "Kirill Gavrilenko", "link": "https://stackoverflow.com/users/4846095/kirill-gavrilenko"}, "edited": false, "score": 0, "creation_date": 1430307405, "post_id": 29942397, "comment_id": 48005784, "body": "it still show me the numbers 0, 7-10 , 13 in output"}, {"owner": {"reputation": 18759, "user_id": 2226988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c6fbec3a71b2e95e4a6e41478deb379?s=128&d=identicon&r=PG", "display_name": "Tom Blodget", "link": "https://stackoverflow.com/users/2226988/tom-blodget"}, "edited": false, "score": 0, "creation_date": 1430328814, "post_id": 29942397, "comment_id": 48022185, "body": "An ASCII table ends at codepoint 127. If you go to 255, you are using <a href=\"http://en.wikipedia.org/wiki/Character_encoding#Common_character_encodings\" rel=\"nofollow noreferrer\">some other</a> character set. Run <code>chcp</code> to find out. Note: <a href=\"http://unicode.org/Public/MAPPINGS/VENDORS/MICSFT/WINDOWS/CP1252.TXT\" rel=\"nofollow noreferrer\">Windows-1252</a> has some holes so, although, it goes from 0 to 255, you should skip additional codepoints."}], "answers": [{"tags": [], "owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "is_accepted": false, "score": 1, "last_activity_date": 1430308452, "last_edit_date": 1430308452, "creation_date": 1430308066, "answer_id": 29942816, "question_id": 29942397, "link": "https://stackoverflow.com/questions/29942397/c-programming-beginner-help-ascii-table/29942816#29942816", "title": "C programming (beginner help) Ascii table", "body": "<p>Why are those codes excluded? Wouldn't it be better to exclude all non-printable codes? <code>isprint</code> will do just that.</p>\n\n<pre><code>    #include &lt;ctype.h&gt;\n\n    if (isprint(i)) printf(\"%d = %c\\t\", i, i);\n</code></pre>\n\n<p>If you want to exclude those particular codes, you can use the same technique as the isxxx functions:</p>\n\n<pre><code>char is_print[256] = { 0,1,1,1,1,1,1,0,0,0,0,1,1,0,1,1, /* 0 in pos 0, 7-10 and 13 */\n                       1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,\n                       1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,\n                       1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,\n                       1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,\n                       1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,\n                       1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,\n                       1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,\n                       1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,\n                       1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,\n                       1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,\n                       1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,\n                       1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,\n                       1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,\n                       1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,\n                       1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1\n}; /* Filter with 0 for the chars we want to exclude. */ \n\nint myIsprint(char c) {\n    return is_print((unsigned char)c); /* Use the filter */\n}\n</code></pre>\n\n<p>And in your function:</p>\n\n<pre><code>if (myIsprint(i)) printf(\"%d = %c\\t\", i, i);\n</code></pre>\n\n<p><strong>Note:</strong></p>\n\n<p>In simple cases you might as well just use an <code>if</code> that tests the particular codes <code>if (i != 0 &amp;&amp; i != 13 &amp;&amp; (i &lt; 7 || i &gt; 10)) print...</code>.\nThe filter technique described above has the advantage of being lightning fast, and the code easy to read, even if the number of cases is large.</p>\n"}, {"tags": [], "owner": {"reputation": 19681, "user_id": 4751173, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Haz6W.jpg?s=128&g=1", "display_name": "Glorfindel", "link": "https://stackoverflow.com/users/4751173/glorfindel"}, "is_accepted": false, "score": 0, "last_activity_date": 1430308087, "creation_date": 1430308087, "answer_id": 29942826, "question_id": 29942397, "link": "https://stackoverflow.com/questions/29942397/c-programming-beginner-help-ascii-table/29942826#29942826", "title": "C programming (beginner help) Ascii table", "body": "<p>You should wrap</p>\n\n<pre><code>printf(\"%d = %c\\t\", i, i);\n</code></pre>\n\n<p>in an <code>if</code>-statement which excludes the special cases:</p>\n\n<pre><code>if (!(i == 0 || (i &gt;= 7 &amp;% i &lt;= 10) || i == 13)) {\n    printf(\"%d = %c\\t\", i, i);\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 4846095, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206837013950827/picture?type=large", "display_name": "Kirill Gavrilenko", "link": "https://stackoverflow.com/users/4846095/kirill-gavrilenko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1430308452, "creation_date": 1430306980, "question_id": 29942397, "link": "https://stackoverflow.com/questions/29942397/c-programming-beginner-help-ascii-table", "title": "C programming (beginner help) Ascii table", "body": "<p>Hi everybody need some help with C programming .\nI need to write ascii table without numbers : 0, 7-10 , 13 . between every char will be \"\\t\" and after every 10 chars it will skip line .\nmy code for now :</p>\n\n<pre><code>void ascii()\n{\n    int i;\n    for (i = 0; i &lt;= 255; i++)\n    {\n        if (i == 0)\n        {\n            printf(\"\\t\");\n\n        }\n        if (0 == i % 10)\n        {\n            printf(\"\\n\");\n        }       \n        printf(\"%d = %c\\t\", i, i);\n\n    }\n    return;\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "windows", "linux-kernel"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1430306554, "post_id": 29942185, "comment_id": 48005119, "body": "You have to elaborate on what are your exact requirements, compare like <code>struct tm a, b; if (a == b) </code>?"}], "answers": [{"comments": [{"owner": {"reputation": 1185, "user_id": 3441222, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c1ef99d243c541138c9084f434bc98bf?s=128&d=identicon&r=PG&f=1", "display_name": "RedCollarPanda", "link": "https://stackoverflow.com/users/3441222/redcollarpanda"}, "edited": false, "score": 0, "creation_date": 1430309394, "post_id": 29942429, "comment_id": 48007256, "body": "Is there a difftime in linux kernel and in windows? As I know - no. Read the question before low down karma.."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "reply_to_user": {"reputation": 1185, "user_id": 3441222, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c1ef99d243c541138c9084f434bc98bf?s=128&d=identicon&r=PG&f=1", "display_name": "RedCollarPanda", "link": "https://stackoverflow.com/users/3441222/redcollarpanda"}, "edited": false, "score": 0, "creation_date": 1430375106, "post_id": 29942429, "comment_id": 48041355, "body": "@RedCollarPanda <code>difftime</code> is standard <code>time.h</code> function, so it&#39;s at least in Windows. Not sure what you mean about karma; I didn&#39;t downvote you."}, {"owner": {"reputation": 1519, "user_id": 4997125, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206189287947874/picture?type=large", "display_name": "Ian Walters", "link": "https://stackoverflow.com/users/4997125/ian-walters"}, "edited": false, "score": 0, "creation_date": 1467326807, "post_id": 29942429, "comment_id": 63699896, "body": "Its also in linux, windows + linux + os-x meets my definition of multi-platform even if it proves not to be in the linux-kernel, whatever the asker meant by that. I&#39;m voting this answer up as my google search on the title of the question was helped by the answer.  Also I feel classifying &#39;linux-kernel&#39; as a platform is almost the same as classifying &#39;gimp&#39; as a platform. So I&#39;m downvoting the question"}, {"owner": {"reputation": 820, "user_id": 1735458, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/45ad4e19f178f150d44ef1e74189daa7?s=128&d=identicon&r=PG", "display_name": "Yd Ahhrk", "link": "https://stackoverflow.com/users/1735458/yd-ahhrk"}, "edited": false, "score": 0, "creation_date": 1540399862, "post_id": 29942429, "comment_id": 92854927, "body": "@user694733 I think you have it backwards: <code>difftime(t1, t2) &gt; 0</code> means <code>tm1 &gt; tm2</code>, not <code>tm2 &gt; tm1</code>"}], "tags": [], "owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "is_accepted": false, "score": 10, "last_activity_date": 1540451039, "last_edit_date": 1540451039, "creation_date": 1430307053, "answer_id": 29942429, "question_id": 29942185, "link": "https://stackoverflow.com/questions/29942185/compare-2-struct-tm-on-multiplatform/29942429#29942429", "title": "Compare 2 struct tm on multiplatform", "body": "<p>You could convert them with <code>mktime</code> to <code>time_t</code> and then calculate difference with <code>difftime</code>:</p>\n\n<pre><code>time_t t1 = mktime(tm1);\ntime_t t2 = mktime(tm2);\ndouble diffSecs = difftime(t1, t2); // If positive, then tm1 &gt; tm2\n</code></pre>\n"}], "owner": {"reputation": 1185, "user_id": 3441222, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c1ef99d243c541138c9084f434bc98bf?s=128&d=identicon&r=PG&f=1", "display_name": "RedCollarPanda", "link": "https://stackoverflow.com/users/3441222/redcollarpanda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5648, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1540451039, "creation_date": 1430306420, "last_edit_date": 1430306794, "question_id": 29942185, "link": "https://stackoverflow.com/questions/29942185/compare-2-struct-tm-on-multiplatform", "title": "Compare 2 struct tm on multiplatform", "body": "<p>Lets say I have two </p>\n\n<pre><code>struct tm\n</code></pre>\n\n<p>I need to compare them in Linux, in Linux kernel and in Windows.\nWhat is the best way to make cross-platform check?</p>\n\n<p>By \"compare\" I mean finding out what date is bigger.\nFor example - I get date at this moment and compare it to date of some account expired.</p>\n"}, {"tags": ["c", "stm32", "linker-scripts"], "comments": [{"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1430329742, "post_id": 29941742, "comment_id": 48022727, "body": "I&#39;ve found that there are &quot;section&quot; or &quot;pragma&quot; type commands that can be added to your variable declarations to perhaps do this without linker script hacking.  Is this a possibilty for you?"}, {"owner": {"reputation": 349, "user_id": 223969, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mFhG4.jpg?s=128&g=1", "display_name": "FrankPak", "link": "https://stackoverflow.com/users/223969/frankpak"}, "reply_to_user": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1430407166, "post_id": 29941742, "comment_id": 48062765, "body": "No this cannot be a solution since the library mylib is quite big and I&#39;m not the manteiner of it, so I would avoid changes to that code!"}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1430414729, "post_id": 29941742, "comment_id": 48067920, "body": "Then it comes down to linker script trial and error.  It always takes much longer than you expect to get stupid things to work right.  You can also hack away at your crt0.s - or equivilent bootstrap module - to manually move stuff to where you want as well."}, {"owner": {"reputation": 749, "user_id": 1135781, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e598be3f28bed15a9fbd568abf19a67?s=128&d=identicon&r=PG", "display_name": "Pait", "link": "https://stackoverflow.com/users/1135781/pait"}, "edited": false, "score": 0, "creation_date": 1431072599, "post_id": 29941742, "comment_id": 48347862, "body": "It would be helpful to know which toolchain you are using including the version. From your examples I guess its GNU."}, {"owner": {"reputation": 1288, "user_id": 13923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01f6b0442d0e08a636cee29a07b4ca16?s=128&d=identicon&r=PG", "display_name": "LarryH", "link": "https://stackoverflow.com/users/13923/larryh"}, "edited": false, "score": 0, "creation_date": 1485230904, "post_id": 29941742, "comment_id": 70827633, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/22497953/placing-static-library-answer-in-the-beginning-of-flash-section\">placing static library answer in the beginning of flash section</a>"}], "owner": {"reputation": 349, "user_id": 223969, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mFhG4.jpg?s=128&g=1", "display_name": "FrankPak", "link": "https://stackoverflow.com/users/223969/frankpak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 764, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1430329287, "creation_date": 1430305216, "last_edit_date": 1430329287, "question_id": 29941742, "link": "https://stackoverflow.com/questions/29941742/how-to-put-all-static-variables-coming-from-a-static-library-in-a-specific-linke", "title": "How to put all static variables coming from a static library in a specific linker script section", "body": "<p>I'm working on a stm32 nucleo board. My project is composed of several different libraries. </p>\n\n<p>I would like to put all uninitialized variables coming from static library (mylib.a) in a specific memory section instead of the bss section.</p>\n\n<p>Here is my bss section inside the linker script:</p>\n\n<pre><code>. = ALIGN(4);\n.bss :\n{\n    /* This is used by the startup in order to initialize the .bss section */\n    _sbss = .;         /* define a global symbol at bss start */\n    __bss_start__ = _sbss;\n    *(.bss)\n    *(.bss*)\n    *(COMMON)\n\n    . = ALIGN(4);\n    _ebss = .;         /* define a global symbol at bss end */\n    __bss_end__ = _ebss;\n} &gt;RAM\n</code></pre>\n\n<p>I tried adding this section before the bss one:</p>\n\n<pre><code>. = ALIGN(4);\n.mybss :\n{\n    /* This is used by the startup in order to initialize the .bss section */\n    _smybss = .;         /* define a global symbol at bss start */\n    __mybss_start__ = _smybss;\n    mylib.a:*(.bss)\n    mylib.a:*(.bss*)\n    mylib.a:*(COMMON)\n\n    . = ALIGN(4);\n    _emybss = .;         /* define a global symbol at bss end */\n    __mybss_end__ = _emybss;\n} &gt;RAM\n</code></pre>\n\n<p>The compiler does not complain but when I inspect with nm command the generated elf _smybss symbol is at the same address of _emybss symbol. So mybss section is empty.</p>\n\n<p>Do you have any suggestion on how to achive this?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c", "sockets"], "comments": [{"owner": {"reputation": 19948, "user_id": 3150853, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/qIPrg.jpg?s=128&g=1", "display_name": "Jayesh Bhoi", "link": "https://stackoverflow.com/users/3150853/jayesh-bhoi"}, "edited": false, "score": 0, "creation_date": 1430304504, "post_id": 29941430, "comment_id": 48003680, "body": "You can visualize the defference after reading this post <a href=\"http://stackoverflow.com/questions/3761276/when-should-i-use-tcp-nodelay-and-when-tcp-cork\" title=\"when should i use tcp nodelay and when tcp cork\">stackoverflow.com/questions/3761276/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 14274, "user_id": 579078, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/xC5kj.png?s=128&g=1", "display_name": "\u11bc\u11ba\u11bc", "link": "https://stackoverflow.com/users/579078/%e1%86%bc%e1%86%ba%e1%86%bc"}, "is_accepted": false, "score": 0, "last_activity_date": 1430322731, "creation_date": 1430322731, "answer_id": 29948742, "question_id": 29941430, "link": "https://stackoverflow.com/questions/29941430/will-tcp-cork-and-tcp-nodelay-helps-in-increasing-the-performance-of-scoket-prog/29948742#29948742", "title": "will tcp_cork and tcp_nodelay helps in increasing the performance of scoket programming in c", "body": "<p><code>TCP_NODELAY</code> might help, as it will enable <code>Linux</code> to send subsequent packets right away instead of waiting for <code>ACK</code>s.</p>\n\n<p>However, this problem has been solved before, and any modern FTP or HTTP server would provide something close to the best achievable transfer throughput.</p>\n"}], "owner": {"reputation": 89, "user_id": 3559865, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d8392995c12808b2ff57587764a192c9?s=128&d=identicon&r=PG&f=1", "display_name": "knp", "link": "https://stackoverflow.com/users/3559865/knp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 158, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1430322731, "creation_date": 1430304362, "question_id": 29941430, "link": "https://stackoverflow.com/questions/29941430/will-tcp-cork-and-tcp-nodelay-helps-in-increasing-the-performance-of-scoket-prog", "title": "will tcp_cork and tcp_nodelay helps in increasing the performance of scoket programming in c", "body": "<p>I have a combination of small files and large files(8k  to 100 gb) files in my filesystem.I need to transfer them using socket programming in c over a network of 1GB with 4 sockets to use much of network . </p>\n\n<p>I have set the options tcp_cork and tcp_nodelay to improve the performance(MB/s).But I couldn't see significant difference whether I set those options or not.\nIn which scenario these two options will be useful .Is the chunk that we transfer mattes really.</p>\n"}, {"tags": ["c", "string", "io"], "comments": [{"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 0, "creation_date": 1430303385, "post_id": 29941019, "comment_id": 48002878, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/2854488/reading-a-string-with-spaces-with-sscanf\">reading a string with spaces with sscanf</a>"}], "answers": [{"tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": true, "score": 2, "last_activity_date": 1430303379, "creation_date": 1430303379, "answer_id": 29941060, "question_id": 29941019, "link": "https://stackoverflow.com/questions/29941019/cannot-take-proper-input-from-scanf-for-string-as-a-character-of-arrays/29941060#29941060", "title": "Cannot take proper input from scanf for string (as a character of arrays)", "body": "<p>Instead of <code>scanf()</code> use</p>\n\n<pre><code>fgets(s,sizeof(s),stdin);\n</code></pre>\n\n<p>It is never a good idea to use <code>scanf()</code> while reading strings.So I suggest you to use <code>fgets()</code></p>\n\n<p>PS: <code>fgets()</code> comes with a newline character and suppress the newline character.</p>\n"}, {"tags": [], "owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "is_accepted": false, "score": 3, "last_activity_date": 1430306767, "last_edit_date": 1495542513, "creation_date": 1430303897, "answer_id": 29941261, "question_id": 29941019, "link": "https://stackoverflow.com/questions/29941019/cannot-take-proper-input-from-scanf-for-string-as-a-character-of-arrays/29941261#29941261", "title": "Cannot take proper input from scanf for string (as a character of arrays)", "body": "<p>As per the C11 standard,</p>\n\n<blockquote>\n  <p><strong>7.21.6.2 The fscanf function</strong></p>\n  \n  <p>[...]</p>\n  \n  <ol start=\"12\">\n  <li>The conversion specifiers and their meanings are:<br>\n    [...]<br>\n      s. Matches a sequence of non-white-space characters. <sup>286</sup><br>\n    [...]</li>\n  </ol>\n</blockquote>\n\n<p>You have</p>\n\n<pre><code>scanf(\"%s\",s);\n</code></pre>\n\n<p>to take input. <code>%s</code> will stop scanning the input until it encounters a <a href=\"http://en.wikipedia.org/wiki/Whitespace_character\" rel=\"nofollow noreferrer\">whitespace character</a>. A space is a whitespace character as per the C11 standard:</p>\n\n<blockquote>\n  <p><strong>6.4 Lexical elements</strong></p>\n  \n  <p>[...]</p>\n  \n  <ol start=\"3\">\n  <li>[...]<br>\n  Preprocessing tokens can be separated by white space; this consists of comments (described later), or white-space characters (<em>space</em>, horizontal tab, new-line, vertical tab, and form-feed), or both<br>\n  [...]</li>\n  </ol>\n</blockquote>\n\n<p>So, when the <code>%s</code> sees the space after the first word, it stops scanning. \n<hr>\nFix the problem by using <code>fgets</code> as shown in <a href=\"https://stackoverflow.com/a/29941060/3049655\">@Gopi's answer</a> or if you need to use <code>scanf</code>, use</p>\n\n<pre><code>scanf(\"%[^\\n]\",s);\n</code></pre>\n\n<p>The above <code>scanf</code> reads everything until it encounters a newline character. A better way would be to limit the amount of characters that <code>scanf</code> reads(a maximum of 999 in your case) in order to prevent <a href=\"https://www.google.co.in/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=2&amp;cad=rja&amp;uact=8&amp;ved=0CCEQFjAB&amp;url=http%3A%2F%2Fen.wikipedia.org%2Fwiki%2FBuffer_overflow&amp;ei=krVAVe2XJoqyuASFjoGwCw&amp;usg=AFQjCNGEYiKtKtJeSlECyXESnczCI1nwzw&amp;sig2=7b_zICOE4d170dIRSfjWig\" rel=\"nofollow noreferrer\">buffer overflows</a> and also, checking the return value of <code>scanf</code> to see if it was successful(The return value will be 1, in your case, if <code>scanf</code> was successful).</p>\n\n<p>Note: The above fix, unlike <code>fgets</code>, will leave the newline character in the standard input stream(<code>stdin</code>).</p>\n"}], "owner": {"reputation": 33, "user_id": 4063317, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/100000442202722/picture?type=large", "display_name": "Ravi Kala", "link": "https://stackoverflow.com/users/4063317/ravi-kala"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 202, "favorite_count": 0, "accepted_answer_id": 29941060, "answer_count": 2, "score": 1, "last_activity_date": 1430306767, "creation_date": 1430303285, "last_edit_date": 1592644375, "question_id": 29941019, "link": "https://stackoverflow.com/questions/29941019/cannot-take-proper-input-from-scanf-for-string-as-a-character-of-arrays", "title": "Cannot take proper input from scanf for string (as a character of arrays)", "body": "<p><strong><a href=\"https://www.hackerrank.com/challenges/pangrams\" rel=\"nofollow noreferrer\">Problem statement</a></strong></p>\n<p>Roy wanted to increase his typing speed for programming contests. So, his friend advised him to type the sentence &quot;The quick brown fox jumps over the lazy dog&quot; repeatedly, because it is a pangram. (Pangrams are sentences constructed by using every letter of the alphabet at least once.)</p>\n<p>After typing the sentence several times, Roy became bored with it. So he started to look for other pangrams.</p>\n<p>Given a sentence s, tell Roy if it is a pangram or not.</p>\n<p><strong>Input Format</strong> Input consists of a line containing s.</p>\n<p><strong>Constraints</strong>\nLength of s can be at most 103 (1\u2264|s|\u2264103) and it may contain spaces, lower case and upper case letters. Lower case and upper case instances of a letter are considered the same.</p>\n<p><strong>Output Format</strong> Output a line containing pangram if s is a pangram, otherwise output not pangram.</p>\n<pre><code>void panagram(char s[])\n {\nint num1[26]={0};\nint num2[26]={0};\nint len=strlen(s);\nint count=0,j,i;\nfor(i=0;i&lt;len;i++)\n{   \n    if(s[i]&gt;=97&amp;&amp;s[i]&lt;=122)\n    {\n        num1[s[i]-97]++;\n    }\n    if(s[i]&gt;=65&amp;&amp;s[i]&lt;=90)\n    {\n        num2[s[i]-65]++;\n    }\n\n\n}\nfor(j=0;j&lt;26;j++)\n        {\n            if(num1[j]&gt;=1||num2[j]&gt;=1)\n            {   printf(&quot;%d\\t\\t%d\\n&quot;,num1[j],num2[j]);\n                count++;\n            }\n        }\nprintf(&quot;%d\\t&quot;,count);\nif(count&gt;=26)\n            printf(&quot;panagram&quot;);\n            else\n                printf(&quot;not panagram&quot;);\n}\nint main() {\n    char s[1000];\n     scanf(&quot;%s&quot;,s);\n     panagram(s);\n    return 0;\n    }\n</code></pre>\n<p>The code works fine for strings without blank spaces like &quot;Wepromptlyjudgedantiqueivorybucklesforthenextprize&quot; but fails to work for strings with blank spaces - &quot;We promptly judged antique ivory buckles for the next prize&quot;\nCan anyone tell where I am going wrong?\nAm I taking input incorrectly?</p>\n"}]