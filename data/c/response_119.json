[{"tags": ["c", "switch-statement"], "comments": [{"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1492645761, "post_id": 43507884, "comment_id": 74070366, "body": "The preprocessor operates on your source code, not on program input."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1492657547, "post_id": 43507884, "comment_id": 74073251, "body": "Any compiler warnings or errors with <code>int ch; ... scanf(&quot;%d&quot;, ch);</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "is_accepted": true, "score": 1, "last_activity_date": 1492646159, "creation_date": 1492646159, "answer_id": 43507955, "question_id": 43507884, "link": "https://stackoverflow.com/questions/43507884/using-string-commands-with-switch-using-define/43507955#43507955", "title": "Using string commands with switch() using #define", "body": "<p>You'll need a function to convert the user input to your commands.\ne.g.</p>\n\n<pre><code>int stringToCommand(char* cmd)\n{\n   if (strcmp(cmd, \"put\") == 0)\n       return put;\n   ...\n}\n</code></pre>\n\n<p>Then you can use the #defines in the switch</p>\n\n<pre><code>int cmd = stringToCommand(userInput);\nswitch (cmd) {\n    case put:\n        puts(\"You chose \\\"put\\\" as a command.\");\n        break;\n    ...\n</code></pre>\n\n<p>Normally for this type of scenario I'd look at enums rather than relying on #defines.</p>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1492647217, "creation_date": 1492647217, "answer_id": 43508113, "question_id": 43507884, "link": "https://stackoverflow.com/questions/43507884/using-string-commands-with-switch-using-define/43508113#43508113", "title": "Using string commands with switch() using #define", "body": "<p>Here is shown how the switch statement can be implemented.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main(void) \n{\n    const char * key_word[] = { \"put\", \"get\", \"run\" };\n    const size_t N = sizeof( key_word ) / sizeof( *key_word );\n\n    enum { PUT, GET, RUN };\n\n    char command[5];\n\n    printf( \"Please enter a command: \" );\n    fgets( command, sizeof( command ), stdin );\n\n    command[ strcspn( command, \"\\n\" ) ] = '\\0';\n\n    size_t i = 0;\n\n    while ( i &lt; N &amp;&amp; strcmp( command, key_word[i] ) != 0 ) i++;\n\n/*  \n    if ( i != N )\n    {\n        printf( \"You chose \\\"%s\\\" as a command.\\n\", key_word[i] );\n    }\n    else\n    {\n        puts( \"Invalid input.\" );\n    }\n*/\n\n    switch ( i )\n    {\n    case PUT:\n        printf( \"You chose \\\"%s\\\" as a command.\\n\", key_word[i] );\n        break;\n    case GET:\n        printf( \"You chose \\\"%s\\\" as a command.\\n\", key_word[i] );\n        break;\n    case RUN:\n        printf( \"You chose \\\"%s\\\" as a command.\\n\", key_word[i] );\n        break;\n    default:\n        puts( \"Invalid input.\" );\n        break;\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>The program output might look like</p>\n\n<pre><code>Please enter a command: get\nYou chose \"get\" as a command.\n</code></pre>\n"}], "owner": {"reputation": 139, "user_id": 4683175, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh5.googleusercontent.com/-WJeFH_wvGQ8/AAAAAAAAAAI/AAAAAAAAABc/M-F1uNUB7cs/photo.jpg?sz=128", "display_name": "C.j.", "link": "https://stackoverflow.com/users/4683175/c-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 43507955, "answer_count": 2, "score": 0, "last_activity_date": 1492647217, "creation_date": 1492645661, "question_id": 43507884, "link": "https://stackoverflow.com/questions/43507884/using-string-commands-with-switch-using-define", "title": "Using string commands with switch() using #define", "body": "<p>I'm attempting to make use of a <code>switch()</code> statement by using keywords instead of an integer. I've written my problem into a more simple and direct example to better point out my goal here. My relevant code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define put 0\n#define get 1\n#define run 2\n\nint main () {\n    int ch;\n\n    printf(\"%s\", \"Please enter a command: \");\n    scanf(\"%d\", ch);\n\n    switch (ch) {\n        case 0:\n            puts(\"You chose \\\"put\\\" as a command.\");\n            break;\n        case 1:\n            puts(\"You chose \\\"get\\\" as a command.\");\n            break;\n        case 2:\n            puts(\"You chose \\\"run\\\" as a command.\");\n            break;\n    }\n}\n</code></pre>\n\n<p>Ideally, when I scan for user input, I would like the user to be able to utilize the command's provided in the above <code>#define</code> statements. Therefore, the user is prompted for a value, <code>put</code> is input, and the program outputs the <code>case 0</code>. Is this possible with a <code>switch()</code>?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1492645697, "post_id": 43507854, "comment_id": 74070352, "body": "Maybe you should look at destination, not at the source (which is still dest+3). (NOTE: <code>sizeof(char)</code> is 1, by definition)"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1492645723, "post_id": 43507854, "comment_id": 74070357, "body": "<code>memmove</code> means to copy bytes even if the regions overlap"}, {"owner": {"reputation": 115, "user_id": 7869325, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/cd4025b33d5de8046f5f5b2e14d4ea46?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Olivadese", "link": "https://stackoverflow.com/users/7869325/juan-olivadese"}, "edited": false, "score": 1, "creation_date": 1492646605, "post_id": 43507854, "comment_id": 74070567, "body": "Yes, im sorry , is overwriting not overlapping."}], "answers": [{"tags": [], "owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "is_accepted": true, "score": 3, "last_activity_date": 1492647266, "creation_date": 1492647266, "answer_id": 43508120, "question_id": 43507854, "link": "https://stackoverflow.com/questions/43507854/memmove-is-overlapping/43508120#43508120", "title": "Memmove is overlapping", "body": "<p><code>memmove</code> allows the source and destination to have an overlapping region, and it is defined so that the contents of the source before <code>memmove</code> will compare equal to contents of the destination after the <code>memmove</code>.</p>\n\n<p>If the source and destination overlap, you will expect the source to have changed in some way after the <code>memmove</code> call. What is prevented is the possible corruption of destination.</p>\n\n<p>The behavior of <code>memmove(dst, src, len)</code> will be similar to:</p>\n\n<pre><code>char buf[len];\nmemcpy(buf, src, len);\nmemcpy(dst, buf, len);\n</code></pre>\n\n<p>But the implementation is optimized to make only a single pass, rather than two.</p>\n"}], "owner": {"reputation": 115, "user_id": 7869325, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/cd4025b33d5de8046f5f5b2e14d4ea46?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Olivadese", "link": "https://stackoverflow.com/users/7869325/juan-olivadese"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 546, "favorite_count": 0, "accepted_answer_id": 43508120, "answer_count": 1, "score": 2, "last_activity_date": 1524535261, "creation_date": 1492645504, "last_edit_date": 1524535261, "question_id": 43507854, "link": "https://stackoverflow.com/questions/43507854/memmove-is-overlapping", "title": "Memmove is overlapping", "body": "<p>I'm using <code>memmove()</code>, but it seems that the destination is overwriting the source or maybe I do not understand what overwriting is. I have the array of <code>char</code> (the destination) and then a pointer to the destination, that is inside the vector.</p>\n\n<pre><code>char destination[]=\"abcdefg\";\nchar * source = destination+3;\n</code></pre>\n\n<p>The source is  <code>\"defg\"</code>. Then I use <code>memmove()</code> to move four characters and print the source. When I look at the source, it has changed to <code>\"gefg\"</code>.</p>\n\n<pre><code>printf(\"%s\\n\",memmove(destination,source,sizeof(char)*4));\nprintf(\"%s\",source);\n</code></pre>\n\n<p>I thought that <code>memmove()</code> should prevent the overwriting, or maybe I am not understanding.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 3, "creation_date": 1492644883, "post_id": 43507748, "comment_id": 74070149, "body": "You&#39;ve divided your code across boxes making it very difficult to see how it all fits together.  Beyond this, I give you the &quot;Single step in the debugger and see where it goes sideways.&quot; Standard response to the question of &quot;Why doesn&#39;t it work?&quot;"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1492645126, "post_id": 43507748, "comment_id": 74070216, "body": "To maintain mental sanity, I&#39;d advice to replace all your <code>while()</code> loops by <code>for()</code> loops. That will not only increase readability, it will also reduce the chance for errors."}], "answers": [{"comments": [{"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 1, "creation_date": 1492645424, "post_id": 43507810, "comment_id": 74070284, "body": "If you down-vote, explain why or what is wrong with my answer please.  I see a case where <code>l</code> can go past the size of the array in the area of the code OP called out as being questionable.  What is the issue?"}], "tags": [], "owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "is_accepted": true, "score": -1, "last_activity_date": 1492645131, "creation_date": 1492645131, "answer_id": 43507810, "question_id": 43507748, "link": "https://stackoverflow.com/questions/43507748/gauss-jordan-elimination-in-c/43507810#43507810", "title": "Gauss-Jordan Elimination in C", "body": "<p>Not 100% sure what your code is up to, but I see at least 1 place where I believe that you are reading off the end of your arrays:</p>\n\n<pre><code>while(l&lt;10)\n{\n    j=0;\n    l++;\n</code></pre>\n\n<p>...</p>\n\n<pre><code>           b[l][j]=a[l][j]-b[i][j]*a[l][0];\n</code></pre>\n\n<p>Because you are incrementing after you check for max size, you have 1 iteration where you are probably reading passed the max size of the array.</p>\n\n<p>To check, put some prints on your indexes in your code where you do your assignments or assert them or something and I think you will find the source of your woes.</p>\n\n<p>Also, PLEASE use constants for your sizes instead of the magic numbers all over the place.  You will thank me later when trying to do a calculation of a matrix of a different size.</p>\n"}], "owner": {"reputation": 19, "user_id": 7892532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7205369c9417fb30467d64551ea77ae9?s=128&d=identicon&r=PG&f=1", "display_name": "Albert Garcia", "link": "https://stackoverflow.com/users/7892532/albert-garcia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 467, "favorite_count": 0, "closed_date": 1492666921, "accepted_answer_id": 43507810, "answer_count": 1, "score": 0, "last_activity_date": 1492645131, "creation_date": 1492644673, "question_id": 43507748, "link": "https://stackoverflow.com/questions/43507748/gauss-jordan-elimination-in-c", "closed_reason": "Not suitable for this site", "title": "Gauss-Jordan Elimination in C", "body": "<p>So, I have some class work that I cannot solve. I could get the code to work partially but now it is just useless. It either freezes (doesn't complete running) or it will give me several inf in the first row.  </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\nint main()\n{\n\n    double a[10][11]={\n{3.55618, 5.87317, 7.84934, 5.6951, 3.84642, 9.15038, -1.68539, 5.03067, 7.63384, -1.75626, -1.92193},\n{-4.82893, 8.38177, -0.301221, 5.10182, -4.1169,-6.09145, -3.95675, -2.33365, 1.3969, 6.54555, -2.35262},\n{-7.64196, 5.66605, 3.20481, 1.55619, -1.19814, 9.79288, 5.35547, 5.86109, 4.95544, -9.35749, 2.27709},\n{-2.95914, -9.16958, 7.3216, 2.39876, -8.1302, -7.55135, -2.37718, 7.29694, 5.9867, 8.5401, -2.67493},\n{-8.42043, -0.369407, -5.4102, -8.00545, 9.22153, 3.96454, 5.38499, 0.438365, 0.419677, 4.17166, 1.84756},\n{6.02952, 4.57728, 5.46424, 3.52915, -1.01135, -3.74686, 8.14264, -8.86961, -2.88114, 1.29821, 4.154126},\n{0.519819, -6.16655, 1.13216, 2.75811, -1.05975, 4.20286, -3.45764, 0.763558, -0.281287, -9.76168, -.93387},\n{5.15737, -9.67481, 9.29904, -3.93334, 9.12785, -4.25208, -6.1652, 2.5375, 0.139195, 2.00106, -1.28356},\n{-4.30784, 1.40711, -6.97966, -9.29715, 5.17234, 2.42634, 1.88818, -2.05526, -3.7679, 3.3708, -3.46841},\n{-4.65418, 7.18118, 6.51338, 3.13249, 0.188456, -16.85599, 7.21435, -2.93417, 1.06061, 1.10807, -2.61529}};\n    int i, j, k, l;\n    double b[10][11];\n\n    i=0;\n    while(i&lt;10)\n    {\n            j=0;\n            l=i;\n            while(l&lt;10)\n            {\n                    j=0;\n                    l++;\n                    while(j&lt;11)\n                    {\n</code></pre>\n\n<p>This code below works fine. When used on its own, it will turn all the diagonal values into 1.</p>\n\n<pre><code>                            b[i][j]=a[i][j]/a[i][i]; \n</code></pre>\n\n<p>This code used below to work partially, setting the first column equal to 0, but now it is useless. I tried to manipulate it into getting rid of all values by having that 0 be a k, with k++ within the while code, but it would return either a segmentation code if I placed it by the i++; or a bus error is placed in front of the j=0;, and it would just freeze the program if I placed the i in the 0. Now it is useless that I restored it to default</p>\n\n<pre><code>                            b[l][j]=a[l][j]-b[i][j]*a[l][0];\n                            j++;\n                    }\n            }\n            i++;\n    }\n\n    j=0;\n    i=0;\n    while(i&lt;10)\n    {\n            while(j&lt;11)\n            {\n                    printf(\"%lf\\t\", b[i][j]);\n                    j++;\n            }\n    printf(\"\\n\");\n    i++;\n    j=0;\n    }\n\nreturn 0;\n}\n</code></pre>\n\n<p>How do I go about solving all these issues within my C program?</p>\n"}, {"tags": ["c", "string", "binary"], "comments": [{"owner": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 5, "creation_date": 1492643623, "post_id": 43507577, "comment_id": 74069758, "body": "<code>strlen</code> expects ASCIIZ string, your char array is not null-terminated"}, {"owner": {"reputation": 29, "user_id": 5556491, "user_type": "registered", "profile_image": "https://graph.facebook.com/982158795180805/picture?type=large", "display_name": "Pavle Vodopija", "link": "https://stackoverflow.com/users/5556491/pavle-vodopija"}, "reply_to_user": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 0, "creation_date": 1492644593, "post_id": 43507577, "comment_id": 74070046, "body": "Thanks a lot, it works when i put &#39;\\0&#39; at the end. Sow why does it even work for numbers less than 128? @Lashane"}, {"owner": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 1, "creation_date": 1492644799, "post_id": 43507577, "comment_id": 74070124, "body": "it was undefined behavior, so just luck"}], "owner": {"reputation": 29, "user_id": 5556491, "user_type": "registered", "profile_image": "https://graph.facebook.com/982158795180805/picture?type=large", "display_name": "Pavle Vodopija", "link": "https://stackoverflow.com/users/5556491/pavle-vodopija"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 280, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1492646521, "creation_date": 1492643575, "last_edit_date": 1492646521, "question_id": 43507577, "link": "https://stackoverflow.com/questions/43507577/weird-symbols-when-printing-char-array", "title": "Weird symbols when printing char array", "body": "<p>Ok, so I wrote simple program in C to convert number from decimal to binary and it works just fine until I try to convert 128. Some weird symbols come up and it probably has something to do with ASCII. Could someone explain as why this is happening with numbers 128 and above. Here is my code and image;<br>\n<img src=\"https://i.stack.imgur.com/X4oVG.png\" alt=\"screenshot from terminal\"></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main(int argc, char const *argv[]){\n\n    int a = 128;\n    int counter = 0;\n    char array[512];\n    char c;\n\n    while(a!=0){\n        c = a%2 + '0'; // Gives me eather 1 or 0 and converts to char\n        array[counter] = c;\n        a /= 2;\n        counter++;\n    }\n    for(int i=strlen(array)-1; i&gt;=0; i--){\n        printf(\"%c\", array[i]); //printing in reverse\n    }\n    printf(\"\\n\");\n\n\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "string", "argv", "atoi"], "comments": [{"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1492640495, "post_id": 43507045, "comment_id": 74068760, "body": "Are you using C or C++?  They are different languages, with different answers.  Please don&#39;t tag both, unless the question is specifically about the differences."}, {"owner": {"reputation": 13, "user_id": 7783612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dd22c1a9cbeabb1c5289a1e244c1b62?s=128&d=identicon&r=PG&f=1", "display_name": "Marcus", "link": "https://stackoverflow.com/users/7783612/marcus"}, "reply_to_user": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1492640567, "post_id": 43507045, "comment_id": 74068784, "body": "sorry about that, it&#39;s just in C.  I removed the tag, thanks for clarifying!"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 5, "creation_date": 1492640606, "post_id": 43507045, "comment_id": 74068794, "body": "Use <code>strcmp</code> to compare strings. Do not compare pointers the way you do."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1492640607, "post_id": 43507045, "comment_id": 74068795, "body": "<code>argv[1]</code> is a pointer to a string. <code>&quot;a&quot;</code> is a <i>string literal</i>. <code>letter</code> is a pointer to a string. You cannot compare <i>strings</i> with <code>==</code> or <code>!=</code>."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1492640642, "post_id": 43507045, "comment_id": 74068802, "body": "<code>argv[1]</code> is a <code>char*</code>. Specifically, either a <code>NULL</code> pointer or a pointer to the first character of the first argument. Since it&#39;s something you don&#39;t control, you can&#39;t just assume it&#39;s either a or d."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1492640750, "post_id": 43507045, "comment_id": 74068841, "body": "<code>if(letter != &quot;a&quot; || letter != &quot;d&quot;)</code> --&gt; <code>if(strcmp(letter, &quot;a&quot;) &amp;&amp; strcmp(letter, &quot;d&quot;))</code>"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1492641081, "post_id": 43507045, "comment_id": 74068951, "body": "BTW, your condition(in case it was working) will be true always."}], "answers": [{"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 0, "last_activity_date": 1492641271, "last_edit_date": 1492641271, "creation_date": 1492641193, "answer_id": 43507190, "question_id": 43507045, "link": "https://stackoverflow.com/questions/43507045/storing-argv1-to-a-char-or-int-in-c/43507190#43507190", "title": "storing argv[1] to a char or int in C", "body": "<p>There is no sense to compare the value of the pointer <code>argv[1]</code> with the addresses of the first characters of the string literals <code>\"a\"</code> and <code>\"d\"</code>.</p>\n\n<p>Just write</p>\n\n<pre><code>#include &lt;string.h&gt;\n\n//...\n\nif( letter == NULL || ( strcmp( letter, \"a\" ) != 0  &amp;&amp; strcmp( letter, \"d\" ) != 0 ) ) \n      printf(\"Input letter not 'a' or 'd'\\n\");\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 7783612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dd22c1a9cbeabb1c5289a1e244c1b62?s=128&d=identicon&r=PG&f=1", "display_name": "Marcus", "link": "https://stackoverflow.com/users/7783612/marcus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 369, "favorite_count": 0, "accepted_answer_id": 43507190, "answer_count": 1, "score": -1, "last_activity_date": 1492641271, "creation_date": 1492640386, "last_edit_date": 1492640555, "question_id": 43507045, "link": "https://stackoverflow.com/questions/43507045/storing-argv1-to-a-char-or-int-in-c", "title": "storing argv[1] to a char or int in C", "body": "<p>So, I'm not sure whether I should try to convert argv[1] to an int or if I can leave it as a char.  But I'm having difficulties getting argv to behave the way I want it to.</p>\n\n<p>My terminal input will look like this:</p>\n\n<pre><code>./a.out a\n</code></pre>\n\n<p>where argv[1] can either be an 'a' or a 'd'.</p>\n\n<p>The Problem:  when trying to pass it through an if statement such as:</p>\n\n<pre><code>int main(int argc, char *argv[])\n{\n  char *letter;\n  letter=argv[1];\n\n  printf(\" %s  %s \", argv[1], letter); //THIS prints correctly\n\n//However, even when the input IS 'a', it will still print this:\n\n  if(letter != \"a\" || letter != \"d\") \n      printf(\"Input letter not 'a' or 'd'\\n\");\n  else{//More stuff//}    \n}\n</code></pre>\n\n<p>I get all kinds of errors when I attempt to fix it myself. I saw a few threads explaining argv[1][0] and using atoi, but after playing around with it, I could not get it to print out.</p>\n"}, {"tags": ["c", "sockets", "pipe"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 4, "creation_date": 1492638176, "post_id": 43506554, "comment_id": 74067880, "body": "You have to do the file-based I/O redirection (<code>&gt;file.txt</code> and <code>&lt;file.txt</code>) as well as the pipe-based I/O redirection.  The shell normally handles it for you, but when you&#39;re writing the shell-like code, you have to get busy!  You&#39;ll also need to wait until the pipeline feeding <code>sort</code> is complete before running <code>less</code>; otherwise, <code>less</code> will find an empty file and will simply exit."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 3, "creation_date": 1492638177, "post_id": 43506554, "comment_id": 74067881, "body": "Do you know what &quot;&gt;file.txt&quot; and &quot;&lt;file.txt&quot; actually do? Do you know what <code>execlp</code> does?"}, {"owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "edited": false, "score": 1, "creation_date": 1492638278, "post_id": 43506554, "comment_id": 74067922, "body": "The redirections are a feature of the shell; they are performed by the shell. <code>sort</code> writes to <code>stdout</code>, <code>less</code> reads from <code>stdin</code>, the shell binds these streams to files when one uses <code>&gt;</code> and <code>&lt;</code> in the command line."}, {"owner": {"reputation": 19, "user_id": 3477806, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/91b178f00964009583f4f8494bf98f62?s=128&d=identicon&r=PG&f=1", "display_name": "Ackerman", "link": "https://stackoverflow.com/users/3477806/ackerman"}, "edited": false, "score": 0, "creation_date": 1492638326, "post_id": 43506554, "comment_id": 74067938, "body": "&gt;file.txt and &lt; file.txt the sort the find .type by size"}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 3477806, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/91b178f00964009583f4f8494bf98f62?s=128&d=identicon&r=PG&f=1", "display_name": "Ackerman", "link": "https://stackoverflow.com/users/3477806/ackerman"}, "edited": false, "score": 0, "creation_date": 1492638549, "post_id": 43506639, "comment_id": 74068028, "body": "what about the &lt; and &gt; ? If i don&#39;t put them it doesn&#39;t sort them"}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "reply_to_user": {"reputation": 19, "user_id": 3477806, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/91b178f00964009583f4f8494bf98f62?s=128&d=identicon&r=PG&f=1", "display_name": "Ackerman", "link": "https://stackoverflow.com/users/3477806/ackerman"}, "edited": false, "score": 2, "creation_date": 1492638711, "post_id": 43506639, "comment_id": 74068102, "body": "For <code>&lt;</code>, open the file <code>O_RDONLY</code> without <code>O_TRUNC</code>, and then <code>dup</code> it onto <code>0</code> instead of <code>1</code>. For more info, Read The Friendly Manual."}, {"owner": {"reputation": 19, "user_id": 3477806, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/91b178f00964009583f4f8494bf98f62?s=128&d=identicon&r=PG&f=1", "display_name": "Ackerman", "link": "https://stackoverflow.com/users/3477806/ackerman"}, "edited": false, "score": 0, "creation_date": 1492639269, "post_id": 43506639, "comment_id": 74068300, "body": "the error message is &quot;&gt;file.txt: No such file or directory &lt;file.txt: No such file or directory&quot; when I do what you  say"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 19, "user_id": 3477806, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/91b178f00964009583f4f8494bf98f62?s=128&d=identicon&r=PG&f=1", "display_name": "Ackerman", "link": "https://stackoverflow.com/users/3477806/ackerman"}, "edited": false, "score": 1, "creation_date": 1492639568, "post_id": 43506639, "comment_id": 74068430, "body": "No @Ackerman, what this answer says has no reference to a file named &quot;&gt;file.txt&quot; or &quot;&lt;file.txt&quot;, nor should it.  If you&#39;re getting error messages about such files then it comes from <i>other</i> code, where you are <i>not</i> doing what this answer says."}, {"owner": {"reputation": 19, "user_id": 3477806, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/91b178f00964009583f4f8494bf98f62?s=128&d=identicon&r=PG&f=1", "display_name": "Ackerman", "link": "https://stackoverflow.com/users/3477806/ackerman"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1492639741, "post_id": 43506639, "comment_id": 74068499, "body": "@JohnBollinger Maybe the trouble is somewhere else. I&#39;m going to write all the code"}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 0, "creation_date": 1492640329, "post_id": 43506639, "comment_id": 74068706, "body": "In my answer, the <code>&quot;&gt;file.txt&quot; </code> from your execlp line vanished and became the open-dup-close sequence precedening it. You need to do the same thing."}], "tags": [], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "is_accepted": false, "score": 3, "last_activity_date": 1492639042, "last_edit_date": 1492639042, "creation_date": 1492638414, "answer_id": 43506639, "question_id": 43506554, "link": "https://stackoverflow.com/questions/43506554/weird-execlp-command/43506639#43506639", "title": "Weird execlp() command", "body": "<p>Redirections are processessed by shells.\nIn C you'll need to be your own shell and do the redirection yourself:</p>\n\n<pre><code>int fd = open(\"file.txt\", O_TRUNC|O_WRONLY);\nif(0&gt;fd) /*handle error*/;\ndup2(fd, 1 /*STDOUT*/); \nclose(fd); /*file.txt is now on fd 1*/\n///....\nexeclp(\"sort\", \"sort\",\"-n\", \"-k\", \"7\", (char*)NULL);\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 3477806, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/91b178f00964009583f4f8494bf98f62?s=128&d=identicon&r=PG&f=1", "display_name": "Ackerman", "link": "https://stackoverflow.com/users/3477806/ackerman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1492640001, "creation_date": 1492637981, "last_edit_date": 1492640001, "question_id": 43506554, "link": "https://stackoverflow.com/questions/43506554/weird-execlp-command", "title": "Weird execlp() command", "body": "<p>so I basically need to make this command in c</p>\n\n<pre><code>find . -type f -ls | cut -c 2- | sort -n -k 7 &gt;file.txt ; less &lt;file.txt\n</code></pre>\n\n<p>The programm is working but it doesn't do the <code>&gt;,&lt;</code> in <code>&gt;file.txt</code> and <code>less &lt;file.txt</code> </p>\n\n<p>I write execlp() like this</p>\n\n<pre><code>execlp(\"sort\", \"sort\",\"-n\", \"-k\", \"7\",\"&gt;file.txt\", NULL)\n\nexeclp(\"less\",\"less\",\"&lt;file.txt\", NULL)\n</code></pre>\n\n<p>Any tips in how to write them? Thanks</p>\n\n<p>-first pipe is with sockets AF_UNIX</p>\n\n<p>-second pipe is normal</p>\n\n<pre><code>#include &lt;fcntl.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;signal.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;sys/un.h&gt;\n#include &lt;errno.h&gt;\n\nchar *socket_path = \"/tmp/socket\";\nvoid child1(); \nvoid child2(); \nvoid child3(int *pipe_fd);\nvoid father(pid_t *pid);\n\nint main(int argc, char *argv []) {\n\n  pid_t childpid[3];\n  int fd[2];\n\n  if (argc != 1) { \n    puts(\"ERROR!\");\n    exit(0);\n  }\n\n  //Pipe\n  if (pipe(fd) == -1) {\n    perror(\"pipe\");\n  }\n\n  //Filhos\n  childpid[0]=fork(); \n\n  if(childpid[0]==-1) perror(\"Erro filho 1\");\n\n  else if (childpid[0]==0){\n    child1(); // Find\n    wait(0);\n    exit(1);\n  } \n  else{\n    childpid[1]=fork(); //filho 2\n\n      if(childpid[1]==-1) perror(\"Erro filho 2\");\n\n      else if (childpid[1]==0){\n        child2();// 'cut'\n    wait(0);\n    exit(1);\n      }\n\n      else{\n        childpid[2]=fork(); \n\n    if(childpid[2]==-1) perror(\"Erro filho 3\");\n\n      else if (childpid[2]==0){\n        child3(fd); // Sort\n        wait(0);\n        exit(1);\n      }\n\n      else{\n        father(childpid); // Less\n        wait(0);\n        exit(1);\n      }\n       }\n   }\n  return(0);\n}\n\n\nvoid child1() { // FIND\n\n  struct sockaddr_un addr;\n  int socket_fd;\n\n\n  if ( (socket_fd = socket(AF_UNIX, SOCK_STREAM, 0)) == -1) {\n    perror(\"socket filho1\");\n    exit(-1);\n  }\n\n\n  memset(&amp;addr, 0, sizeof(addr));\n  addr.sun_family = AF_UNIX;\n\n  if (*socket_path == '\\0') {\n    *addr.sun_path = '\\0';\n    strncpy(addr.sun_path+1, socket_path+1, sizeof(addr.sun_path)-2);\n  } \n\n  else {\n    strncpy(addr.sun_path, socket_path, sizeof(addr.sun_path)-1);\n  }\n\n\n  while (connect(socket_fd, (struct sockaddr *)&amp;addr, (socklen_t)sizeof(addr)) == -1) {\n    if (errno != ENOENT &amp;&amp; errno != ECONNREFUSED) {\n      perror(\"Erro connect filho 1\");\n    }\n  }\n\n\n  if( dup2(socket_fd,1) == -1) {  //escreve no output!\n    perror(\"Erro no dup filho 1\");\n  }\n\n  if( close(socket_fd) == -1) {\n   perror(\"Erro no close filho 1\");\n  }\n\n  if( execlp(\"find\",\"find\", \".\", \"-type\", \"f\", \"-ls\", NULL) == -1) {\n    perror(\"Find\");\n  }\n}\n\nvoid child2() { // CUT\n\n  wait(0);\n  struct sockaddr_un  local, remote;\n  socklen_t           socket_length = (socklen_t)sizeof(remote);\n  int socket_fd, saida_fd;\n\n\n  if ((socket_fd = socket(AF_UNIX, SOCK_STREAM, 0)) == -1) {\n    perror(\"Erro no socket\\n\");\n    exit(-1);\n  }\n\n  memset(&amp;local, 0, sizeof(local));\n  memset(&amp;remote, 0, sizeof(remote));\n\n  local.sun_family = AF_UNIX;\n  strcpy(local.sun_path, socket_path);\n\n  if (unlink(socket_path) == -1){     \n    if (errno != ENOENT){\n      perror(\"filho2 unlink\");\n    }\n  }\n\n  if (bind(socket_fd, (struct sockaddr *)&amp;local,(socklen_t)(strlen(local.sun_path) + sizeof(local.sun_family))) == -1){\n    perror(\"filho 2  bind\");\n  }\n\n  if (listen(socket_fd, 1) == -1) {\n    perror(\"Erro no listen\");\n  }\n\n  if ((socket_fd = accept(socket_fd, (struct sockaddr *)&amp;remote, &amp;socket_length)) == -1){\n    perror(\"filho 2 accept\");\n  }\n\n  if( dup2(socket_fd,0) == -1) { // recebe do output!\n    perror(\"dup2(1) do  filho 2\");\n  }\n\n  if( close(socket_fd) == -1) {\n    perror(\"Failed to close(1) child 2\");\n  }\n\n  //--------------------------------------------------//\n  if((saida_fd = open(\"file.txt\", O_WRONLY )) == -1) {\n    perror(\"Open filho 2\");\n  }\n\n  if( dup2(saida_fd,1) == -1) { \n    perror(\"Failed to dup2(2) child 2\");\n  }\n\n  if(close(saida_fd) ==  -1) { \n    perror(\"Failed to close(2) child 2\");\n  }\n\n  if(execlp(\"cut\", \"cut\", \"-c\", \"2-\", (char *)NULL) == -1 ){\n    perror(\"Cut\");\n  }\n}\n\n\nvoid child3(int *pipe_fd) // SORT\n{\n  int fd;\n\n  if (close(pipe_fd[1]) == -1){\n    perror(\"erro no close da escrita do filho3\");\n  }\n\n  if (dup2(pipe_fd[0], STDIN_FILENO) == -1){\n    perror(\"erro no dup do filho 3 \");\n  }\n\n  if (close(pipe_fd[0]) == -1){\n    perror(\"erro no close da leitura do filho 3 \");\n  }\n\n  if ((fd = open(\"file.txt\", O_RDWR)) == -1) {\n    perror(\"erro no open do pai\");\n  }\n\n  if (dup2(fd, 1) == -1) {\n    perror(\"erro no dup do filho 3\");\n  }\n\n  if (close(fd) == -1){\n    perror(\"erro no close 3 do filho 3\");\n  }\n\n  if (execlp(\"sort\", \"sort\",\"-n\", \"-k\", \"7\",\"&gt;file.txt\", (char*)NULL) == -1) {\n    perror(\"Sort\");\n  }\n}\n\n\nvoid father(pid_t *pid) // 'less' \n{\n  int i;\n  int ID_final;\n  int status[4];\n  int file_fd;\n\n  if ((file_fd = open(\"file.txt\",O_WRONLY | O_TRUNC | O_CREAT, 0666)) == -1) {\n    perror(\"erro no open pai\");\n  }\n\n  //espera pelos filhos\n  for (i = 0; i &lt; 3; i++){\n    while ((ID_final = waitpid(pid[i], &amp;status[i], 0)) != pid[i]){\n      if (ID_final == -1){\n        perror(\"erro no waitpid\");\n      }\n    }\n  }\n\n  if ((file_fd = open(\"file.txt\", O_RDONLY)) == -1) {\n    perror(\"erro no open do pai\");\n  }\n\n    if (dup2(file_fd, STDIN_FILENO) == -1){\n    perror(\"erro no dup do pai\");\n  }\n\n  if (close(file_fd) == -1){\n    perror(\"erro no close do pai\");\n  }\n\n  if (execlp(\"less\",\"less\",\"&lt;file.txt\", (char*)NULL) == -1){\n    perror(\"erro no 'less'\");\n  }\n}\n</code></pre>\n"}, {"tags": ["c", "linux-kernel", "operating-system", "context-switch", "rdtsc"], "answers": [{"comments": [{"owner": {"reputation": 242, "user_id": 2095777, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4373a11d6c454a9845ec5028a03eb9df?s=128&d=identicon&r=PG", "display_name": "tabs_over_spaces", "link": "https://stackoverflow.com/users/2095777/tabs-over-spaces"}, "edited": false, "score": 0, "creation_date": 1492639212, "post_id": 43506730, "comment_id": 74068279, "body": "I am running it with the <code>time -v</code> command to check for voluntary/involuntary switches. So far, the involuntary switches are very minimum (&lt; 0.1%). The context switch time comes to be about 30K cycles/12.5usec."}], "tags": [], "owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "is_accepted": true, "score": 2, "last_activity_date": 1492638836, "creation_date": 1492638836, "answer_id": 43506730, "question_id": 43506444, "link": "https://stackoverflow.com/questions/43506444/using-rdtsc-rdtscp-across-context-switch/43506730#43506730", "title": "Using rdtsc + rdtscp across context switch", "body": "<p>I've done this before, and it seems to be a valid way of measuring context switch time. Whenever doing timing of something this fine-grained, scheduling unpredictability is always going to come into play; usually you deal with that by measuring thousands of times and looking for figures like the minimum, media, or mean time interval. You can make scheduling less of an issue by running both processes with real-time <code>SCHED_FIFO</code> priority. If you want to know actual <em>switching</em> time (on a single cpu core) you need to bind both processes to a single cpu with affinity settings. If you just want to know latency for one process being able to respond to the output of another, letting them run on different cpus is fine.</p>\n\n<p>Another issue to keep in mind is that voluntary and involuntary context switches, and switches starting from user-space versus from kernel-space have different costs. Yours is likely to be voluntary. Measuring involuntary is harder and requires poking at shared memory from busy loops, or similar.</p>\n"}, {"tags": [], "owner": {"reputation": 693, "user_id": 1666237, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/9ae31965f7351e2e8679156cf114b3a8?s=128&d=identicon&r=PG", "display_name": "Don Slowik", "link": "https://stackoverflow.com/users/1666237/don-slowik"}, "is_accepted": false, "score": 1, "last_activity_date": 1497817557, "creation_date": 1497817557, "answer_id": 44619237, "question_id": 43506444, "link": "https://stackoverflow.com/questions/43506444/using-rdtsc-rdtscp-across-context-switch/44619237#44619237", "title": "Using rdtsc + rdtscp across context switch", "body": "<p>I used a similar timing code, except I have the parent loop 1000000 times, and time the whole loop in both the parent and child. The code is attached. Then I modified it to time the individual context switches, as in you pseudo-code, summed the 1000000 individual times and got good agreement with my original code. So either way seems to work, given the caveats already mentioned.</p>\n\n<p>The thing I find interesting is that the context switching time is more than doubled when <code>sched_setaffinity()</code> is used to set the parent and child to run on separate cpus. Why does that affect the time in that way? Is the pipe faster between processes running on same cpu?</p>\n\n<p>rdtscp.h:</p>\n\n<pre><code>static inline unsigned long rdtscp_start(void) {\n  unsigned long var;\n  unsigned int hi, lo;\n\n  __asm volatile (\"cpuid\\n\\t\"\n          \"rdtsc\\n\\t\" : \"=a\" (lo), \"=d\" (hi)\n          :: \"%rbx\", \"%rcx\");\n\n  var = ((unsigned long)hi &lt;&lt; 32) | lo;\n  return (var);\n}\n\nstatic inline unsigned long rdtscp_end(void) {\n  unsigned long var;\n  unsigned int hi, lo;\n\n  __asm volatile (\"rdtscp\\n\\t\"\n          \"mov %%edx, %1\\n\\t\"\n          \"mov %%eax, %0\\n\\t\"\n          \"cpuid\\n\\t\"  : \"=r\" (lo), \"=r\" (hi)\n          :: \"%rax\", \"%rbx\", \"%rcx\", \"%rdx\");\n\n  var = ((unsigned long)hi &lt;&lt; 32) | lo;\n  return (var);\n  }\n\n/*see https://www.intel.com/content/www/us/en/embedded/training/ia-32-ia-64-benchmark-code-execution-paper.html\n */\n</code></pre>\n\n<p>cntxtSwtchr.c:</p>\n\n<pre><code>#define _GNU_SOURCE\n#include &lt;sched.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n#include \"rdtscp.h\"\n\nint main() {\n  int pipe1[2], pipe2[2];\n  pipe(pipe1) || pipe(pipe2);\n  cpu_set_t set;\n  CPU_ZERO(&amp;set);\n\n  clock_t tick, tock;\n\n  int fork_rtn;\n  if ((fork_rtn = fork()) &lt; 0)\n    exit(1);\n\n  if (fork_rtn == 0) {  // Child\n    close(pipe1[1]);\n    close(pipe2[0]);\n\n    CPU_SET(1, &amp;set);\n    sched_setaffinity(0, sizeof(set), &amp;set);\n\n    tick = clock();\n    unsigned long tsc_start = rdtscp_start();\n    int i;\n    while (read(pipe1[0], &amp;i, 4)) \n      write(pipe2[1], &amp;i, 4);\n    printf(\"child tsc_ticks: %lu\\n\", rdtscp_end() - tsc_start);\n    tock = clock();\n    clock_t ticks = tock - tick;\n    double dt = (double)ticks / CLOCKS_PER_SEC;\n    printf(\"Elapsed child cpu time: %gs.\\n\", dt); \n\n    close(pipe1[0]);\n    close(pipe2[1]);\n    exit(0);\n\n  } else {              // Parent\n    close(pipe1[0]);\n    close(pipe2[1]);\n\n    CPU_SET(1, &amp;set);\n    sched_setaffinity(0, sizeof(set), &amp;set);\n\n    int idx, lim = 1000000;\n    int i_rtnd;\n    tick = clock();\n    unsigned long tsc_start = rdtscp_start();\n    for (idx = 0; idx &lt; lim; ++idx) {\n      write(pipe1[1], &amp;idx, 4);\n      read(pipe2[0], &amp;i_rtnd, 4);\n      if (i_rtnd != idx) \n    break;\n    }\n    printf(\"parent tsc_ticks: %lu\\n\", rdtscp_end() - tsc_start);\n    tock = clock();\n    clock_t ticks = tock - tick;\n    double dt = (double)ticks / CLOCKS_PER_SEC;\n    printf(\"Elapsed parent cpu time: %gs, %gs/switch.\\n\", dt, dt / lim); \n    if (idx == lim)\n      printf(\"Parent reached end of processing loop.\\n\");\n    else\n      printf(\"Parent failed to reach end of processing loop.\\n\");\n\n    close(pipe1[1]);\n    close(pipe2[0]);\n    exit(0);\n  }\n\n}\n</code></pre>\n"}], "owner": {"reputation": 242, "user_id": 2095777, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4373a11d6c454a9845ec5028a03eb9df?s=128&d=identicon&r=PG", "display_name": "tabs_over_spaces", "link": "https://stackoverflow.com/users/2095777/tabs-over-spaces"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 550, "favorite_count": 0, "accepted_answer_id": 43506730, "answer_count": 2, "score": 1, "last_activity_date": 1497817557, "creation_date": 1492637525, "question_id": 43506444, "link": "https://stackoverflow.com/questions/43506444/using-rdtsc-rdtscp-across-context-switch", "title": "Using rdtsc + rdtscp across context switch", "body": "<p>I am trying to write a program to measure context switch. I have gone through this <a href=\"http://www.intel.com/content/dam/www/public/us/en/documents/white-papers/ia-32-ia-64-benchmark-code-execution-paper.pdf\" rel=\"nofollow noreferrer\">Intel's manual</a> about rdtsc + rdtscp instructions. </p>\n\n<p>Now, I want to use these time-stamp instructions across context switch. I have the general skeleton as follows:</p>\n\n<pre><code>// init two pipes P1, P2\nfork();\n\nset_affinity();              // same core\n\n// parent's code:\n    cpuid + rdtsc            // start timer\n    write(timer to P1);\n\n    read(timer from P2);     // blocks parent if timer value not written\n    rdtscp + cpuid           // stop timer, get difference\n\n// child's code:\n    read(timer from P1);     // blocks child if timer value not written\n    rdtscp + cpuid           // stop timer, get difference\n\n    cpuid + rdtsc            // start timer\n    write(timer to P2);\n</code></pre>\n\n<p>There are a few problem I am seeing with this code. Assuming the timer operations are correct, </p>\n\n<p>If the OS chooses to context switch to some entirely different process (not the child or parent), it won't work.</p>\n\n<p>This code will also include the time taken by the read() and write() system calls. </p>\n\n<p>Ignoring these issues, is it a valid use of rdtsc + rdtscp instructions?</p>\n\n<pre><code>I know writing a kernel module and disabling preemption/interrupts is a better way\n</code></pre>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 3270, "user_id": 3059385, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/dc876278926d67b3da29594601fdc82a?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Schneider", "link": "https://stackoverflow.com/users/3059385/christopher-schneider"}, "edited": false, "score": 1, "creation_date": 1492635684, "post_id": 43505907, "comment_id": 74066682, "body": "You say these are null. What are &quot;these&quot;? argBB? s1, s2, s3?"}, {"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 5, "creation_date": 1492635714, "post_id": 43505907, "comment_id": 74066700, "body": "<code>scanf(&quot;%s %s %s&quot;, &amp;s1, &amp;s2, &amp;s3);</code> =&gt; <code>scanf(&quot;%s %s %s&quot;, s1, s2, s3);</code>"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1492635734, "post_id": 43505907, "comment_id": 74066714, "body": "Read the documentation of scanf and check the return value."}, {"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 1, "creation_date": 1492636182, "post_id": 43505907, "comment_id": 74066925, "body": "also, if you turn on warnings you will see other obvious problems"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 4, "creation_date": 1492636391, "post_id": 43505907, "comment_id": 74067041, "body": "That array should be <code>char *argBB[] = { s1, s2, s3, NULL };</code>"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 4, "creation_date": 1492636401, "post_id": 43505907, "comment_id": 74067049, "body": "<code>&#39;\\0&#39;</code> is not a <code>char*</code> - it is a char"}, {"owner": {"reputation": 2763, "user_id": 4901556, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/WwVta.jpg?s=128&g=1", "display_name": "RyeGuy", "link": "https://stackoverflow.com/users/4901556/ryeguy"}, "reply_to_user": {"reputation": 3270, "user_id": 3059385, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/dc876278926d67b3da29594601fdc82a?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Schneider", "link": "https://stackoverflow.com/users/3059385/christopher-schneider"}, "edited": false, "score": 0, "creation_date": 1492637379, "post_id": 43505907, "comment_id": 74067534, "body": "@ChristopherSchneider these are s1, s2, s3"}, {"owner": {"reputation": 2763, "user_id": 4901556, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/WwVta.jpg?s=128&g=1", "display_name": "RyeGuy", "link": "https://stackoverflow.com/users/4901556/ryeguy"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1492637447, "post_id": 43505907, "comment_id": 74067568, "body": "@WhozCraig thanks. I think I had that initially but changed it for whatever reason"}], "answers": [{"tags": [], "owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "is_accepted": true, "score": 2, "last_activity_date": 1492638003, "last_edit_date": 1492638003, "creation_date": 1492636517, "answer_id": 43506200, "question_id": 43505907, "link": "https://stackoverflow.com/questions/43505907/c-take-3-string-inputs-then-place-in-character-array/43506200#43506200", "title": "C Take 3 string inputs then place in character array", "body": "<p>There are several problems with your code.  For your scanf call, <code>%s</code> expects <code>char *</code> but your are passing in <code>char *[50]</code>.  You define the variable <code>argBB</code> to be a <code>char *[]</code>, but you initialized it with one three correct variables, and a constant char.  Here's a simplified version of a corrected code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n    char str[20];\n\n    printf(\"enter a string\\n\");\n    scanf(\"%s\", str);\n    printf(\"your string is %s\\n\", str);\n    char *arg[] = {str, \"\"};\n    printf(\"your string is still %s\\n\", arg[0]);\n}\n</code></pre>\n"}], "owner": {"reputation": 2763, "user_id": 4901556, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/WwVta.jpg?s=128&g=1", "display_name": "RyeGuy", "link": "https://stackoverflow.com/users/4901556/ryeguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 43506200, "answer_count": 1, "score": -1, "last_activity_date": 1492693900, "creation_date": 1492635415, "last_edit_date": 1492693900, "question_id": 43505907, "link": "https://stackoverflow.com/questions/43505907/c-take-3-string-inputs-then-place-in-character-array", "title": "C Take 3 string inputs then place in character array", "body": "<p>Hello I am trying to take 3 string inputs from a user than pass these values into an array pointer. </p>\n\n<p>However when I pass the values I am getting a null reference. I have researched this issue and have found some solutions using strcpy(). But implementing them has not worked out so far. Below is my code.</p>\n\n<p>Any suggestions would be great. Thanks</p>\n\n<pre><code>char s1[50], s2[50], s3[50];\n\nprintf(\"Enter 3 strings \");\nscanf(\"%s %s %s\", s1, s2, s3);\n\n//THESE ARE NULL\nchar *argBB[] = { &amp;s1, &amp;s2, &amp;s3, '\\0'};\n</code></pre>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1492635541, "post_id": 43505899, "comment_id": 74066624, "body": "Step through your code mentally. Check edge cases. Does it work, say, for <code>a = 5</code>?"}, {"owner": {"reputation": 25, "user_id": 7733340, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fb1ee452e04e277ef83921d205891e23?s=128&d=identicon&r=PG&f=1", "display_name": "Andy C", "link": "https://stackoverflow.com/users/7733340/andy-c"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1492635826, "post_id": 43505899, "comment_id": 74066762, "body": "if a is a single digit, calling index 0 returns index 0. Which is the same behavior as any other number. But if call any other index it also returns 0"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1492635859, "post_id": 43505899, "comment_id": 74066778, "body": "But does the array contain the correct value?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1492636199, "post_id": 43505899, "comment_id": 74066936, "body": "Note that an empty object initializer is non-conforming.  You should instead write <code>str[20]= {0}</code>.  That will initialize <i>all</i> elements, the first explicitly to 0, and the rest to their default initialization value, which happens to also be 0."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1492637429, "post_id": 43505899, "comment_id": 74067560, "body": "What result do you want if <code>a == 0</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 475, "user_id": 2391458, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e7597c607b98cbca3c8d548bb78f4262?s=128&d=identicon&r=PG&f=1", "display_name": "FCo", "link": "https://stackoverflow.com/users/2391458/fco"}, "edited": false, "score": 1, "creation_date": 1492637503, "post_id": 43506060, "comment_id": 74067595, "body": "@FCo <code>while(i&gt;=0)</code> would be an infinite loop for OP as <code>i</code> is unsigned."}, {"owner": {"reputation": 25, "user_id": 7733340, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fb1ee452e04e277ef83921d205891e23?s=128&d=identicon&r=PG&f=1", "display_name": "Andy C", "link": "https://stackoverflow.com/users/7733340/andy-c"}, "reply_to_user": {"reputation": 5543, "user_id": 6372809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O11k5.jpg?s=128&g=1", "display_name": "ilkkachu", "link": "https://stackoverflow.com/users/6372809/ilkkachu"}, "edited": false, "score": 0, "creation_date": 1492641517, "post_id": 43506060, "comment_id": 74069108, "body": "@ilkkachu How would that look like?"}, {"owner": {"reputation": 5543, "user_id": 6372809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O11k5.jpg?s=128&g=1", "display_name": "ilkkachu", "link": "https://stackoverflow.com/users/6372809/ilkkachu"}, "reply_to_user": {"reputation": 25, "user_id": 7733340, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fb1ee452e04e277ef83921d205891e23?s=128&d=identicon&r=PG&f=1", "display_name": "Andy C", "link": "https://stackoverflow.com/users/7733340/andy-c"}, "edited": false, "score": 0, "creation_date": 1492674279, "post_id": 43506060, "comment_id": 74080198, "body": "@AndyC, I was thinking something like <code>do { str[i]=a%10; a=a&#47;10; } while(i--)</code>   (I got it wrong the first time, it has to be a post-decrement)"}], "tags": [], "owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "is_accepted": false, "score": 3, "last_activity_date": 1492635989, "creation_date": 1492635989, "answer_id": 43506060, "question_id": 43505899, "link": "https://stackoverflow.com/questions/43505899/long-long-array-not-returning-expected-value-when-calling-index-of-0-in-c/43506060#43506060", "title": "long long array not returning expected value when calling index of 0 in c", "body": "<p>You forgot to deal with the final (least significant) digit:</p>\n\n<pre><code>while(i&gt;0)\n{\n    str[i]=a%10;\n    a=a/10;\n    i--;\n}\n\nstr[i] = a;  // &lt;---- last digit (here i == 0 and a &lt; 10)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1492637663, "post_id": 43506345, "comment_id": 74067649, "body": "Using a signed type for <code>b</code> and an unsigned type for <code>a</code> is not good practice.  Suggest both <code>unsigned long long</code>.  BTW, certainly <code>i</code> and <code>str[20]</code> can use a narrower type than <code>unsigned long long</code>.  Recommend <code>size_t</code> for indexing arrays.  Consider what happens when <code>a==0</code>."}, {"owner": {"reputation": 25, "user_id": 7733340, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fb1ee452e04e277ef83921d205891e23?s=128&d=identicon&r=PG&f=1", "display_name": "Andy C", "link": "https://stackoverflow.com/users/7733340/andy-c"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1492638373, "post_id": 43506345, "comment_id": 74067952, "body": "Great advise. Thanks. What do you mean when recommend size_t for indexing arrays?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1492647340, "post_id": 43506345, "comment_id": 74070752, "body": "In this small code, <code>i</code> will never be large, maybe 0 to 20 or so, any integer type will work.  Yet in <i>general</i> application where code indexes an array, what type <code>i</code> should be used?  Is <code>int</code> enough?  C <i>specifies</i> <code>size_t</code> as wide enough to handle any valid index into an array.  It is some <i>unsigned</i> type, so that needs consideration too."}], "tags": [], "owner": {"reputation": 25, "user_id": 7733340, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fb1ee452e04e277ef83921d205891e23?s=128&d=identicon&r=PG&f=1", "display_name": "Andy C", "link": "https://stackoverflow.com/users/7733340/andy-c"}, "is_accepted": false, "score": 0, "last_activity_date": 1492637179, "creation_date": 1492637179, "answer_id": 43506345, "question_id": 43505899, "link": "https://stackoverflow.com/questions/43505899/long-long-array-not-returning-expected-value-when-calling-index-of-0-in-c/43506345#43506345", "title": "long long array not returning expected value when calling index of 0 in c", "body": "<p>Here is the final code that I finally got to work as expected. \nI was never writing to index zero.</p>\n\n<p>I changed <code>str[i]=a%10;</code> to <code>str[i-1]=a%10;</code></p>\n\n<p>Made a few other minor changes as well to get the loop to run properly since it was not doing the last loop. Thanks your help everyone.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n\nint main()\n{\n    // a will hold the number\n    unsigned long long int a=123456,i=0;\n    // str will hold the result which is the array\n    unsigned long long int str[20]= {0};\n    // first we need to see the length of the number a\n    long long int b=a;\n    while(b&gt;0)\n    {\n        b=b/10;\n        i++;\n    }\n    // the length of the number a will be stored in variable i \n    // the while loop below will store the digit from the end of str to the \n    // the beginning \n    while(i&gt;0)\n    {\n        str[i-1]=a%10;\n        a=a/10;\n        i--;\n    }\n    // only for test \n    printf(\"the value of str is \\\"%llu\\\"\\n\", str[1]); //[0]\n\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 25, "user_id": 7733340, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fb1ee452e04e277ef83921d205891e23?s=128&d=identicon&r=PG&f=1", "display_name": "Andy C", "link": "https://stackoverflow.com/users/7733340/andy-c"}, "edited": false, "score": 0, "creation_date": 1492638776, "post_id": 43506628, "comment_id": 74068131, "body": "Thanks for the detailed response! And I appreciate the tips on memory allocation conventions"}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 25, "user_id": 7733340, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fb1ee452e04e277ef83921d205891e23?s=128&d=identicon&r=PG&f=1", "display_name": "Andy C", "link": "https://stackoverflow.com/users/7733340/andy-c"}, "edited": false, "score": 0, "creation_date": 1492639732, "post_id": 43506628, "comment_id": 74068494, "body": "@AndyC Thanks! I made a few small fixes and improvements, like what ilkkachu recommended. See the edits."}, {"owner": {"reputation": 25, "user_id": 7733340, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fb1ee452e04e277ef83921d205891e23?s=128&d=identicon&r=PG&f=1", "display_name": "Andy C", "link": "https://stackoverflow.com/users/7733340/andy-c"}, "edited": false, "score": 0, "creation_date": 1492642293, "post_id": 43506628, "comment_id": 74069329, "body": "When the input is a series of numbers that begins with a zero (01234), it is ignoring the final zero. I think it has to do with the comment that @ilkkachu had but I&#39;m not sure how to address this"}, {"owner": {"reputation": 25, "user_id": 7733340, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fb1ee452e04e277ef83921d205891e23?s=128&d=identicon&r=PG&f=1", "display_name": "Andy C", "link": "https://stackoverflow.com/users/7733340/andy-c"}, "edited": false, "score": 0, "creation_date": 1492642928, "post_id": 43506628, "comment_id": 74069547, "body": "I found out the issue is the custom function I am using to take user input to store into a. What is the best way to taking in user input and pass it to an uint64?"}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 25, "user_id": 7733340, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fb1ee452e04e277ef83921d205891e23?s=128&d=identicon&r=PG&f=1", "display_name": "Andy C", "link": "https://stackoverflow.com/users/7733340/andy-c"}, "edited": false, "score": 1, "creation_date": 1492644428, "post_id": 43506628, "comment_id": 74069991, "body": "@AndyC <code>scanf(&quot;%&quot;SCNd64)</code> to read the input string and convert it to a <code>uint64_t</code> in one step, but <a href=\"http://c-faq.com/stdio/scanfprobs.html\" rel=\"nofollow noreferrer\"><code>scanf</code> has serious problems</a>. <code>fgets</code> + <code>sscanf</code> is safer, read the whole input line with <code>fgets</code> into a string then <code>sscanf</code> to process it into <code>uint64_t</code> with error checking. But since the input is a string, there&#39;s no need to convert it to a number, then split it out into digits. You&#39;ve already got the digits as characters of the string. So just <code>fgets</code> and use the resulting string."}], "tags": [], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 3, "last_activity_date": 1492639684, "last_edit_date": 1492639684, "creation_date": 1492638359, "answer_id": 43506628, "question_id": 43505899, "link": "https://stackoverflow.com/questions/43505899/long-long-array-not-returning-expected-value-when-calling-index-of-0-in-c/43506628#43506628", "title": "long long array not returning expected value when calling index of 0 in c", "body": "<pre><code>while(i&gt;0)\n{\n    str[i]=a%10;\n    a=a/10;\n    i--;\n}\n</code></pre>\n\n<p>This loop isn't counting all the way to 0, it's counting down to 1. If <code>i</code> is never 0, <code>str[i]</code> is never set.</p>\n\n<p>I suspect what happened is you wrote <code>while(i&gt;=0)</code> and the compiler told you that won't work because <code>i</code> can never be negative because its unsigned. That's what happened to me. It's odd that the iterator is unsigned, perhaps because <code>i</code> is really the number of digits, but there's no real reason for that to be unsigned either. <code>i</code> should never get larger than 20, it could be a <code>short</code>.</p>\n\n<p>The smallest fix is to store <code>i</code> as a signed integer and switch to <code>while(i&gt;=0)</code>.</p>\n\n<hr>\n\n<p>I'd go steps further and suggest:</p>\n\n<ul>\n<li>Storing the number of digits in <code>num_digits</code>.</li>\n<li>Make <code>i</code> just the iterator to avoid confusion.</li>\n</ul>\n\n<p><code>i</code> is commonly used as a loop iterator and it's a bad habit to use it for anything else or have its value persist into the next loop. If you have to do that, name it something else.</p>\n\n<p>It also means that the number of digits is destroyed in the process of populating <code>str</code> leaving no way to print all of <code>str</code>. So store that separately in <code>num_digits</code> and copy it to <code>i</code> as needed.</p>\n\n<ul>\n<li>Use <code>for</code> loops.</li>\n</ul>\n\n<p>For simple iterations, for loops make it very clear how it's initialized, how it's incremented, and what the end condition is. Your first loop is not good for a for loop, but your second is.</p>\n\n<ul>\n<li>Declare variables as they're needed.</li>\n</ul>\n\n<p>This avoids forgetting the types, what they're initialized to, and what everything for. It also makes it easier to see what should be split out into a function.</p>\n\n<ul>\n<li>Change <code>str</code> to <code>digits</code>.</li>\n</ul>\n\n<p>It's not a string.</p>\n\n<ul>\n<li>Change the type of <code>digits</code> to <code>short</code>.</li>\n</ul>\n\n<p><code>digits</code> is an array of individual digits, none will be larger than 9. Allocating 64 bits for each of them is overkill.</p>\n\n<ul>\n<li><code>unsigned long long int</code> might overflow <code>str[20]</code>.</li>\n</ul>\n\n<p>This is the other actual bug in the code. <code>unsigned long long int</code> is guaranteed to be <em>at least</em> 64 bits, but it could be more. If it is, that would overflow <code>str</code> which is fixed at 20. You'd have to either <code>malloc</code> the memory for <code>str</code> based on <code>num_digits</code>, or use <code>uint64_t</code> from <a href=\"https://en.wikipedia.org/wiki/C_data_types#stdint.h\" rel=\"nofollow noreferrer\"><code>stdint.h</code></a> to explicitly get an unsigned 64 bit integer.</p>\n\n<hr>\n\n<p>Putting it all together...</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;inttypes.h&gt;\n\nint main()\n{    \n    // a will hold the number\n    uint64_t a=548763;\n</code></pre>\n\n<p>We're using <code>uint64_t</code> instead of <code>malloc</code>ing <code>str</code>. YMMV, so long as <code>str</code> cannot be overflowed. I chose a fixed size to avoid introducing memory allocation, you might not have learned that yet. I kept it unsigned to not have to deal with the sign.</p>\n\n<pre><code>// first we need to see the length of the number a\nint num_digits = 0;\nuint64_t b = a;\nwhile( b&gt;=10 ) {\n    b=b/10;\n    num_digits++;\n}\n</code></pre>\n\n<p>I left this as a <code>while</code> loop because it's not a simple iterator. The variables are declared as needed (this would make a nice little function). And it's storing the number of digits in <code>num_digits</code>, a simple integer.</p>\n\n<pre><code>short digits[20]= {0};    \nfor( int i = num_digits; i &gt;= 0; i-- ) {\n    digits[i]=a%10;\n    a=a/10;\n}\n</code></pre>\n\n<p>This has been reworked into a <code>for</code> loop to make it clear this is a simple iterator. <code>num_digits</code> has been copied to <code>i</code> so we can use <code>num_digits</code> later. And it goes down to 0. <code>digits</code> is now an array of <code>short</code>s, 1 byte integers; that's all it needs to store a list of digits from 0 to 9.</p>\n\n<p>Note that an initializer of <code>{}</code> is non-standard. It should be <code>{0}</code> to initialize all the elements to 0.</p>\n\n<pre><code>for( int i = 0; i &lt;= num_digits; i++ ) {\n    printf(\"the value of str is \\\"%d\\\"\\n\", digits[i]);\n}\n</code></pre>\n\n<p>The pay off is we still have <code>num_digits</code> around to iterate through <code>digits</code>.</p>\n\n<hr>\n\n<p>This is probably an exercise. In production code you can accomplish basically the same thing with <code>sprintf</code>. This will also deal with negative numbers, no need for unsigned.</p>\n\n<pre><code>int64_t a=548763;\n\nchar str[22] = {0}; // 1 extra for the possible sign, 1 for the null byte.\nsprintf(str, \"%\"PRId64, a);\n\nfor( int i = 0; str[i] != '\\0'; i++ ) {\n    printf(\"the value of str is \\\"%c\\\"\\n\", str[i]);\n}\n</code></pre>\n\n<p>Note that <a href=\"https://en.wikipedia.org/wiki/C_data_types#Printf_and_scanf_format_specifiers\" rel=\"nofollow noreferrer\">the types from stdint.h have their own printf format specifiers</a>. <code>PRId64</code> is the PRIntf format for a 64 bit digit. It's a macro and has to be outside the quotes to expand into its own string. It takes advantage of adjacent C strings automatically concatenating at compile time.</p>\n\n<pre><code>printf(\"This \" \"is all \" \"one string!\\n\");\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 7733340, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fb1ee452e04e277ef83921d205891e23?s=128&d=identicon&r=PG&f=1", "display_name": "Andy C", "link": "https://stackoverflow.com/users/7733340/andy-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 43506628, "answer_count": 3, "score": 0, "last_activity_date": 1492639684, "creation_date": 1492635383, "question_id": 43505899, "link": "https://stackoverflow.com/questions/43505899/long-long-array-not-returning-expected-value-when-calling-index-of-0-in-c", "title": "long long array not returning expected value when calling index of 0 in c", "body": "<p>Why does <code>printf(\"the value of str is \\\"%llu\\\"\\n\", str[0]);</code> not return the value of the first digit in array str? </p>\n\n<p>When I try other index values (1, 2, 3) the expected value is returned?</p>\n\n<p>Apprciate any help. Just started learning c.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n\nint main()\n{\n    // a will hold the number\n    unsigned long long int a=548763,i=0;\n    // str will hold the result which is the array\n    unsigned long long int str[20]= {};\n    // first we need to see the length of the number a\n    unsigned long long int b=a;\n    while(b&gt;=10)\n    {\n        b=b/10;\n        i++;\n    }\n    // the length of the number a will be stored in variable i \n    // the while loop below will store the digit from the end of str to the \n    // the beginning \n    while(i&gt;0)\n    {\n        str[i]=a%10;\n        a=a/10;\n        i--;\n    }\n    // only for test \n    printf(\"the value of str is \\\"%llu\\\"\\n\", str[0]); //[0]\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 897, "user_id": 3830887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9aa739aedfb6760abc3605091e12810e?s=128&d=identicon&r=PG&f=1", "display_name": "TonyB", "link": "https://stackoverflow.com/users/3830887/tonyb"}, "edited": false, "score": 3, "creation_date": 1492636627, "post_id": 43505815, "comment_id": 74067180, "body": "AA does not successfully compile on Ubuntu Linux 16.04... Additionally what is this code in AA:  ` waitVal3 = (waitVal4);`"}, {"owner": {"reputation": 2763, "user_id": 4901556, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/WwVta.jpg?s=128&g=1", "display_name": "RyeGuy", "link": "https://stackoverflow.com/users/4901556/ryeguy"}, "reply_to_user": {"reputation": 897, "user_id": 3830887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9aa739aedfb6760abc3605091e12810e?s=128&d=identicon&r=PG&f=1", "display_name": "TonyB", "link": "https://stackoverflow.com/users/3830887/tonyb"}, "edited": false, "score": 0, "creation_date": 1492637247, "post_id": 43505815, "comment_id": 74067470, "body": "Sorry I accidentally removed their initialization when I pasted my code. The purpose of those values is waitVal3 should be the process Id of DD. After the wait function is complete it should enter the if condition below but it does not."}, {"owner": {"reputation": 897, "user_id": 3830887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9aa739aedfb6760abc3605091e12810e?s=128&d=identicon&r=PG&f=1", "display_name": "TonyB", "link": "https://stackoverflow.com/users/3830887/tonyb"}, "edited": false, "score": 4, "creation_date": 1492637634, "post_id": 43505815, "comment_id": 74067639, "body": "Where do you call &quot;wait()&quot;  in AA ..???"}, {"owner": {"reputation": 2763, "user_id": 4901556, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/WwVta.jpg?s=128&g=1", "display_name": "RyeGuy", "link": "https://stackoverflow.com/users/4901556/ryeguy"}, "reply_to_user": {"reputation": 897, "user_id": 3830887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9aa739aedfb6760abc3605091e12810e?s=128&d=identicon&r=PG&f=1", "display_name": "TonyB", "link": "https://stackoverflow.com/users/3830887/tonyb"}, "edited": false, "score": 0, "creation_date": 1492639367, "post_id": 43505815, "comment_id": 74068348, "body": "well....this is embarrassing. You deserve a big fat green check. Provide an answer with that comment ill give you credit. THANKS!!!"}, {"owner": {"reputation": 842, "user_id": 6572460, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3c0888e8617ae4a4c18fc6b3cba6d517?s=128&d=identicon&r=PG&f=1", "display_name": "Nguai al", "link": "https://stackoverflow.com/users/6572460/nguai-al"}, "edited": false, "score": 0, "creation_date": 1492646010, "post_id": 43505815, "comment_id": 74070432, "body": "From the top code block, need to check if fork() failed.   if ( D == -1 ){ ... }. Also need to check if execv() failed.  if( execv() == -1 ){ ... }"}, {"owner": {"reputation": 842, "user_id": 6572460, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3c0888e8617ae4a4c18fc6b3cba6d517?s=128&d=identicon&r=PG&f=1", "display_name": "Nguai al", "link": "https://stackoverflow.com/users/6572460/nguai-al"}, "edited": false, "score": 0, "creation_date": 1492665056, "post_id": 43505815, "comment_id": 74075400, "body": "What is the executable &#39;CC&#39;  supposed to be doing?"}], "answers": [{"comments": [{"owner": {"reputation": 842, "user_id": 6572460, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3c0888e8617ae4a4c18fc6b3cba6d517?s=128&d=identicon&r=PG&f=1", "display_name": "Nguai al", "link": "https://stackoverflow.com/users/6572460/nguai-al"}, "edited": false, "score": 1, "creation_date": 1492643946, "post_id": 43507441, "comment_id": 74069859, "body": "Don&#39;t you need to check the returned value of rc to determine if it failed? Like &quot;if (rc == -1 ){  ... failed ...  }"}, {"owner": {"reputation": 897, "user_id": 3830887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9aa739aedfb6760abc3605091e12810e?s=128&d=identicon&r=PG&f=1", "display_name": "TonyB", "link": "https://stackoverflow.com/users/3830887/tonyb"}, "reply_to_user": {"reputation": 842, "user_id": 6572460, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3c0888e8617ae4a4c18fc6b3cba6d517?s=128&d=identicon&r=PG&f=1", "display_name": "Nguai al", "link": "https://stackoverflow.com/users/6572460/nguai-al"}, "edited": false, "score": 1, "creation_date": 1492657871, "post_id": 43507441, "comment_id": 74073341, "body": "@Nguaial If execv() succeeds, then AA will be &quot;replaced&quot; with &quot;DD&quot;... The printf() following it will only be called if execv() fails..."}, {"owner": {"reputation": 842, "user_id": 6572460, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3c0888e8617ae4a4c18fc6b3cba6d517?s=128&d=identicon&r=PG&f=1", "display_name": "Nguai al", "link": "https://stackoverflow.com/users/6572460/nguai-al"}, "edited": false, "score": 1, "creation_date": 1492667238, "post_id": 43507441, "comment_id": 74076159, "body": "I tried with waitpid().  It didn&#39;t work.  I posted the code below.  I cannot understand why this won&#39;t work."}, {"owner": {"reputation": 897, "user_id": 3830887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9aa739aedfb6760abc3605091e12810e?s=128&d=identicon&r=PG&f=1", "display_name": "TonyB", "link": "https://stackoverflow.com/users/3830887/tonyb"}, "reply_to_user": {"reputation": 842, "user_id": 6572460, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3c0888e8617ae4a4c18fc6b3cba6d517?s=128&d=identicon&r=PG&f=1", "display_name": "Nguai al", "link": "https://stackoverflow.com/users/6572460/nguai-al"}, "edited": false, "score": 1, "creation_date": 1492715243, "post_id": 43507441, "comment_id": 74108900, "body": "The same reason that that I didn&#39;t need to check the returned value from the execv() that you asked about in your prior comment... Think of the process of the execv() in this manner... if the execv() succeeds, the program (&quot;AA&quot;) stops existing, and DD replaces it in memory..."}, {"owner": {"reputation": 842, "user_id": 6572460, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3c0888e8617ae4a4c18fc6b3cba6d517?s=128&d=identicon&r=PG&f=1", "display_name": "Nguai al", "link": "https://stackoverflow.com/users/6572460/nguai-al"}, "edited": false, "score": 0, "creation_date": 1492722344, "post_id": 43507441, "comment_id": 74112561, "body": "Thanks for the feedback.  When execv() succeeds in A, it looks like it loses the program control. It doesn&#39;t follow the concept of returning from a function.  DD goes to LaLaLand after it terminates. Once DD is done, the program flow does not go back to AA.  The only way to synchronize this is with wait() or waitpid().  AA executable is still running and the wait() or waitpid() brings the control back to AA."}, {"owner": {"reputation": 897, "user_id": 3830887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9aa739aedfb6760abc3605091e12810e?s=128&d=identicon&r=PG&f=1", "display_name": "TonyB", "link": "https://stackoverflow.com/users/3830887/tonyb"}, "reply_to_user": {"reputation": 842, "user_id": 6572460, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3c0888e8617ae4a4c18fc6b3cba6d517?s=128&d=identicon&r=PG&f=1", "display_name": "Nguai al", "link": "https://stackoverflow.com/users/6572460/nguai-al"}, "edited": false, "score": 1, "creation_date": 1492824201, "post_id": 43507441, "comment_id": 74160463, "body": "You need to think about it in this manner:  Fork creates a &quot;twin&quot; process, which (with a few exceptions) has only two differences, the newly created twin has a different PID, and the return from <code>fork()</code> is a zero (whereas in the original &quot;twin&quot; (i.e. the &quot;original&quot; forking process) fork() returns the NEW TWIN&#39;s pid).  Now there are TWO processes, each with its own control flow, and both at the same point in the code.  The NEW twin calls <code>execv()</code> and it STOPs being a TWIN... it is now DD.... when DD exits, its exit status is available to its &quot;parent&quot; (i.e. original twin) when wait() is called"}], "tags": [], "owner": {"reputation": 897, "user_id": 3830887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9aa739aedfb6760abc3605091e12810e?s=128&d=identicon&r=PG&f=1", "display_name": "TonyB", "link": "https://stackoverflow.com/users/3830887/tonyb"}, "is_accepted": true, "score": 1, "last_activity_date": 1492642690, "creation_date": 1492642690, "answer_id": 43507441, "question_id": 43505815, "link": "https://stackoverflow.com/questions/43505815/c-exiting-a-program-correctly/43507441#43507441", "title": "C exiting a program correctly", "body": "<p>You didn't call wait() and your execv() was incorrect... \n... compare this with your version to check the differences...</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;signal.h&gt;\n#include &lt;string.h&gt;    \n#include &lt;string.h&gt;    \n#include &lt;sys/wait.h&gt;\n#include &lt;errno.h&gt;\n\nint main() {\n\n    char *args[2] = {\"DD\", NULL};\n    int D, waitVal3, waitVal4, rc, waitStatus;\n    D = fork();\n    if ( D == -1 )\n    {\n        printf(\"fork failed\\n\");\n    exit(1);\n    }\n    if(D == 0)\n    {\n    // ORIG: execv(\"DD\", args);\n    rc = execv(\"/some/path/to/DD\", args);\n    printf(\"execv failed: errno: %d\\n\", errno);\n    exit(1);\n    }\n    if(D != 0)\n    {\n    printf(\"\\nPid = %d Code AA: created proccess Pid = %d (code DD)\\n\", getpid(), D);\n    }\n\n\n    waitVal4 = wait(&amp;waitStatus);\n    waitVal3 = (waitVal4);\n       //ORIGINALLY - NEVER ENTERS THIS CONDITION\n    printf(\"WAIT VAL: %d\", waitVal3);\n    if(waitVal3 == D)\n    {\n    printf(\"\\nPid = %d Code AA: process Pid = %d terminated\\n\", getpid(), D);\n\n    }\n    return 0;\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 842, "user_id": 6572460, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3c0888e8617ae4a4c18fc6b3cba6d517?s=128&d=identicon&r=PG&f=1", "display_name": "Nguai al", "link": "https://stackoverflow.com/users/6572460/nguai-al"}, "is_accepted": false, "score": 1, "last_activity_date": 1492720405, "last_edit_date": 1492720405, "creation_date": 1492667125, "answer_id": 43511143, "question_id": 43505815, "link": "https://stackoverflow.com/questions/43505815/c-exiting-a-program-correctly/43511143#43511143", "title": "C exiting a program correctly", "body": "<p>I tried to come up with a solution using waitpid() instead of wait().\nWhy this didn't work?</p>\n\n<pre><code>int main() {\n\nchar *args[2] = {\"DD\", NULL};\nint  waitVal3, waitVal4, rc, waitStatus;\npid_t D;\n\nD = fork();\nif ( D == -1 )\n{\n    printf(\"fork failed\\n\");\n    exit(1);\n}\n\nif(D == 0)\n{\n   // ORIG: execv(\"DD\", args);\n  if( execv(\"/home/ubuntu/workspace/C/DD\", args) == -1 ){\n      printf(\"execv failed: errno: %d\\n\", errno);\n      exit(1);\n  }\n  if( waitpid( D, &amp;waitStatus, 0 ) == -1 ){\n      printf(\"Error waiting child process.\\n\");\n      exit(1);\n  };\n  printf(\"\\nPid = %d Code AA: process Pid = %d terminated\\n\", getpid(), D);\n}\n\nreturn 0;\n}\n</code></pre>\n\n<p>Observation:\n  If I put the waitid() statement outside the child process, this works.\n  The following code worked:</p>\n\n<pre><code>if(D == 0)\n{\n   // ORIG: execv(\"DD\", args);\n   if( execv(\"/home/ubuntu/workspace/C/DD\", args) == -1 ){\n      printf(\"execv failed: errno: %d\\n\", errno);\n      exit(1);\n   }\n}\n\n if( waitpid( D, &amp;waitStatus, 0 ) == -1 ){\n    printf(\"Error waiting child process.\\n\");\n    exit(1);\n };\n\n printf(\"\\nPid = %d Code AA: process Pid = %d terminated\\n\", getpid(), D);\n</code></pre>\n\n<p>This means that the parent process was able detect the termination of child process in this case.  My understanding is that waitpid() should work whether\nin child or parent process.  I am firm believer that it did work.  However, the consequent printf() statement in the child process didn't get executed since the child process got terminated.</p>\n"}], "owner": {"reputation": 2763, "user_id": 4901556, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/WwVta.jpg?s=128&g=1", "display_name": "RyeGuy", "link": "https://stackoverflow.com/users/4901556/ryeguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "accepted_answer_id": 43507441, "answer_count": 2, "score": 0, "last_activity_date": 1492720405, "creation_date": 1492635086, "last_edit_date": 1492637162, "question_id": 43505815, "link": "https://stackoverflow.com/questions/43505815/c-exiting-a-program-correctly", "title": "C exiting a program correctly", "body": "<p>Hello I am writing a c program which runs then waits for it to complete then executes an if condition. However after the child process completes it does not execute the rest of code in parent. Any advice would be great. Thanks</p>\n\n<p>AA</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;signal.h&gt;\n#include &lt;string.h&gt;    \nint main() {\n\n    int D, waitVal3, waitVal4;\n            D = fork();\n        if(D == 0)\n        {\n            execv(\"DD\", 0);\n        }\n            if(D != 0)\n        {\n            printf(\"\\nPid = %d Code AA: created proccess Pid = %d (code DD)\\n\", getpid(), D);\n        }\n\n\n            waitVal3 = (waitVal4);\n           //NEVER ENTERS THIS CONDITION\n        printf(\"WAIT VAL: %d\", waitVal3);\n            if(waitVal3 == D)\n            {\n                printf(\"\\nPid = %d Code AA: process Pid = %d terminated\\n\", getpid(), D);\n\n            }\n        return 0;\n\n}\n</code></pre>\n\n<p>DD</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;signal.h&gt;\n\nint main (int argc, char *argBB[]) {\n\n    int C3, waitVal, waitVal2, ps;\n    C3 = fork(); \n\n    if(C3 != 0)\n    {\n        printf(\"\\nPid = %d Code DD: created proccess Pid = %d (code CC)\\n\", getpid(), C3);\n    }\n    if( C3 == 0 )\n    {\n        execv(\"CC\", 0);\n        printf(\"\\nexecv failed\\n\");\n        exit(0);\n    }\n\n    if(C3 &lt; 0)\n    {\n        printf(\"Fork failed\");\n        exit(1);\n    }\n\n    ps = fork();\n    if(ps != 0)\n    {\n        printf(\"\\nPid = %d Code DD: created proccess Pid = %d (code ps)\\n\", getpid(), ps);\n    }\n\n    if( ps == 0 )\n    {\n        char command[50];\n        strcpy(command, \"ps -u username\");\n        system(command);    \n        exit(11);\n        kill(ps, SIGKILL);//KILL PROCCESS PS HERE\n    }\n\n    waitVal = wait(waitVal2);\n\n    if(waitVal == ps)\n        {\n        printf(\"\\nPid= %d Code DD: process Pid = %d terminated\\n\", getpid(), ps);\n            printf(\"\\nPid = %d Code DD: killing process Pid = %d\\n\", getpid(), C3);\n            kill(C3, SIGKILL);\n            printf(\"\\nPid= %d Code DD: process Pid = %d terminated\\n\", getpid(), C3);\n        printf(\"\\nPid = %d Code DD: terminating\\n\", getpid());\n\n        exit(7);\n        }\n\n    return 0;\n\n\n\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 2645, "user_id": 7310344, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jNHYg.png?s=128&g=1", "display_name": "BusyProgrammer", "link": "https://stackoverflow.com/users/7310344/busyprogrammer"}, "edited": false, "score": 2, "creation_date": 1492631935, "post_id": 43504953, "comment_id": 74064569, "body": "What result are you expecting? What value do you enter as input? Your question is not clear enough."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1492632027, "post_id": 43504953, "comment_id": 74064619, "body": "Take the <a href=\"https://stackoverflow.com/tour\">tour</a> make a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1492632155, "post_id": 43504953, "comment_id": 74064694, "body": "What do you mean by &quot;does not calculate&quot;? Does it crash or output an incorrect value? Which one? Please provide us with sample input and output."}, {"owner": {"reputation": 241, "user_id": 3437710, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/29282ad7d97865afbba4f94a4bfe03ae?s=128&d=identicon&r=PG&f=1", "display_name": "hkn", "link": "https://stackoverflow.com/users/3437710/hkn"}, "edited": false, "score": 0, "creation_date": 1492632191, "post_id": 43504953, "comment_id": 74064715, "body": "sorry forget put test results"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1492633052, "post_id": 43504953, "comment_id": 74065220, "body": "The use of <code>fabs()</code> in <code>double mAB = (fabs(x1-x2) &#47; fabs(y1-y2));     double mAC = (fabs(x1-x3) &#47; fabs(y1-y3));</code> is incorrect to detect a degenerate triangle."}, {"owner": {"reputation": 241, "user_id": 3437710, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/29282ad7d97865afbba4f94a4bfe03ae?s=128&d=identicon&r=PG&f=1", "display_name": "hkn", "link": "https://stackoverflow.com/users/3437710/hkn"}, "edited": false, "score": 0, "creation_date": 1492633107, "post_id": 43504953, "comment_id": 74065258, "body": "double mAB = (abs(x1-x2) / abs(y1-y2)); there is a problem at here if i enter integer calculates 1 as i show show on second example"}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1492634017, "post_id": 43504953, "comment_id": 74065759, "body": "Why are you using <code>csqrt()</code> when everything should be real? In the first case, the points (1,1) (2,2) (3,3) do not form a triangle--that&#39;s correct, they fall in a straight line. But your distance calculations are off-the perimeter of the second triangle should be 14.49. Distance is the sqrt of the sum of squares, and you&#39;re subtracting. Don&#39;t need <code>fabs()</code> either."}], "answers": [{"comments": [{"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 1, "creation_date": 1492634061, "post_id": 43505266, "comment_id": 74065794, "body": "Don&#39;t need fabs() either because <code>distancexAB</code> and <code>distanceyAB</code> are guaranteed to be non-negative."}, {"owner": {"reputation": 732, "user_id": 7443166, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df0596c7e86b8bb097445ff08f101b5a?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Daum", "link": "https://stackoverflow.com/users/7443166/alexander-daum"}, "reply_to_user": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1492634150, "post_id": 43505266, "comment_id": 74065838, "body": "Thanks, I&#39;ve overlooked that"}], "tags": [], "owner": {"reputation": 732, "user_id": 7443166, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df0596c7e86b8bb097445ff08f101b5a?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Daum", "link": "https://stackoverflow.com/users/7443166/alexander-daum"}, "is_accepted": false, "score": 0, "last_activity_date": 1492634250, "last_edit_date": 1492634250, "creation_date": 1492632851, "answer_id": 43505266, "question_id": 43504953, "link": "https://stackoverflow.com/questions/43504953/calculate-length-and-perimeter-of-triangle-from-points/43505266#43505266", "title": "calculate length and perimeter of triangle from points", "body": "<p>Where calculating distances, you have to write:</p>\n\n<pre><code>double distanceAB = sqrt(distancexAB + distanceyAB);\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>double distanceAB = csqrt(fabs(distancexAB - distanceyAB));\n</code></pre>\n\n<p>Because the distance is the hypothenuse and use sqrt instead of csqrt, because csqrt is intended for complex variables.<br>\nYou don't need fabs, because <code>distancexAB</code> and <code>distanceyAB</code> are squares and so they cannot be negative, and the sum of two positive numbers will be positive as long as no overflow occurs.</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 3, "last_activity_date": 1492647568, "last_edit_date": 1495540471, "creation_date": 1492635016, "answer_id": 43505794, "question_id": 43504953, "link": "https://stackoverflow.com/questions/43504953/calculate-length-and-perimeter-of-triangle-from-points/43505794#43505794", "title": "calculate length and perimeter of triangle from points", "body": "<ol>\n<li>Calculate the distance between points by adding the sum of squares, not subtracting them.   <code>fabs()</code> not needed.  <code>sqrt()</code> is sufficient.  <a href=\"https://stackoverflow.com/a/43505266/2410359\">@Alexander Daum</a>.<br>\nEven better, use <code>hypot()</code>.</li>\n</ol>\n\n<blockquote>\n  <p>The <code>hypot</code> functions compute the square root of the sum of the squares of <code>x</code> and <code>y</code>, without undue overflow or underflow. C11 \u00a77.12.7.3 2</p>\n</blockquote>\n\n<pre><code>    double distancexAB = (x2 - x1) * (x2 - x1);\n    double distanceyAB = (y2 - y1) * (y2 - y1);\n    // double distanceAB = csqrt(fabs(distancexAB - distanceyAB));\n    double distanceAB = sqrt(distancexAB + distanceyAB);\n\n    // or even more simple\n    double distanceAB = hypot(x2 - x1, y2 - y1);\n</code></pre>\n\n<ol start=\"2\">\n<li><p>OP uses weak code to detect if slopes are parallel.  2 problems:<br>\n<code>fabs()</code> loses the sign of the slope.<br>\nOP's method is subject to divide by 0.0. </p>\n\n<pre><code>// Alternative code:\ndouble delta_x12 = x1 - x2;\ndouble delta_y12 = y1 - y2;\ndouble delta_x13 = x1 - x3;\ndouble delta_y13 = y1 - y3;\nif (delta_x12*delta_y13 == delta_y12*delta_x13) {\n  printf(\"These points do not form a triangle.\");\n}\n</code></pre></li>\n</ol>\n\n<hr>\n\n<p>If OP wants to calculate the area, code could use <a href=\"https://en.wikipedia.org/wiki/Heron%27s_formula\" rel=\"nofollow noreferrer\">Heron's formula</a> and use that to determine if  \"points do not form a triangle\".</p>\n\n<pre><code>    double a = hypot(x1 - x2, y1 - y2);\n    double b = hypot(x2 - x3, y2 - y3);\n    double c = hypot(x2 - x1, y3 - y1);\n    double perimeter = a + b + c;\n    double s /* semi-perimeter */ = perimeter/2;\n    double area2 = s*(s-a)*(s-b)*(s-c);\n\n    // due to small inaccuracies, area2 may be negative.\n    double area = area2 &gt; 0.0 ? sqrt(area2) : 0.0;\n\n    if (area == 0) {\n      printf(\"These points do not form a triangle.\");\n    }\n</code></pre>\n"}], "owner": {"reputation": 241, "user_id": 3437710, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/29282ad7d97865afbba4f94a4bfe03ae?s=128&d=identicon&r=PG&f=1", "display_name": "hkn", "link": "https://stackoverflow.com/users/3437710/hkn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1492647568, "creation_date": 1492631698, "last_edit_date": 1492632174, "question_id": 43504953, "link": "https://stackoverflow.com/questions/43504953/calculate-length-and-perimeter-of-triangle-from-points", "title": "calculate length and perimeter of triangle from points", "body": "<p>y coordinates from user as double variable  and calculating them if points forms a triangle but i cant get correct result.\nI think there is a problem about using double variables for example if i put integer variable to x1 , y1 it does not calculate mAB</p>\n\n<pre><code>   #include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include&lt;math.h&gt;\n#include&lt;conio.h&gt;\n\nint main()\n{\n    double x1,y1,x2,y2,x3,y3;\n\n    printf(\"Enter x , y coordinates of first vertice!\\n\");\n\n    scanf(\"%lf\",&amp;x1);\n    scanf(\"%lf\",&amp;y1);\n/*\n    if(isInteger(x1)==0)\n    {\n        printf(\"\\ndouble\");\n    }\n    else\n    {\n        printf(\"\\nint\");\n    }\n    */\n    /*********************************************/\n    printf(\"Enter x , y coordinates of second vertice!\\n\");\n\n    scanf(\"%lf\",&amp;x2);\n    scanf(\"%lf\",&amp;y2);\n    /*********************************************/\n    printf(\"Enter x , y coordinates of third vertice!\\n\");\n\n    scanf(\"%lf\",&amp;x3);\n    scanf(\"%lf\",&amp;y3);\n    /*********************************************/\n    /*********************************************/\n\n    double mAB = (fabs(x1-x2) / fabs(y1-y2));\n    double mAC = (fabs(x1-x3) / fabs(y1-y3));\n\n    printf(\"\\n mAB %lf\", mAB);\n    printf(\"\\n mAC %lf\", mAC);\n\n    if(mAB == mAC)\n    {\n        printf(\"These points does not forms a triangle!!!!\");\n    }\n    else\n    {\n        /*\n        * 1-2 AB\n        * 1-3 AC\n        * 2-3 BC\n        */\n        double distancexAB = (x2 - x1) * (x2 - x1);\n        double distanceyAB = (y2 - y1) * (y2 - y1);\n        double distanceAB = csqrt(fabs(distancexAB - distanceyAB));\n        /*********************************************/\n        double distancexAC = (x3 - x1) * (x3 - x1);\n        double distanceyAC = (y3 - y1) * (y3 - y1);\n        double distanceAC = csqrt(fabs(distancexAC - distanceyAC));\n        /*********************************************/\n        double distancexBC = (x2 - x3) * (x2 - x3);\n        double distanceyBC = (y2 - y3) * (y2 - y3);\n        double distanceBC = csqrt(fabs(distancexBC - distanceyBC));\n        /*********************************************/\n        printf(\"\\n AB %lf\", distanceAB);\n        printf(\"\\n AC %lf\", distanceAC);\n        printf(\"\\n BC %lf\", distanceBC);\n\n        double perimeter = distanceAB+distanceAC+distanceBC;\n        printf(\"\\n Perimeter: %lf\", perimeter);\n\n    }\n\n    getch();\n    return 0;\n}\n</code></pre>\n\n<p>Test results: </p>\n\n<pre><code>Enter x , y coordinates of first vertice!\n1 1\nEnter x , y coordinates of second vertice!\n2 2\nEnter x , y coordinates of third vertice!\n3 3\n\n mAB 1.000000\n mAC 1.000000These points does not forms a triangle!!!!\n</code></pre>\n\n<p>Second test</p>\n\n<pre><code>Enter x , y coordinates of first vertice!\n3.4 5.6\nEnter x , y coordinates of second vertice!\n1.2 3.4\nEnter x , y coordinates of third vertice!\n1.8 9.8\n\n mAB 1.000000\n mAC 0.380952\n AB 0.000000\n AC 3.883298\n BC 6.371813\n Perimeter: 10.255111\n</code></pre>\n"}, {"tags": ["c", "algorithm", "time-complexity", "big-o"], "comments": [{"owner": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 5, "creation_date": 1492630892, "post_id": 43504709, "comment_id": 74063928, "body": "complexity is O(N^2)"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1492631257, "post_id": 43504709, "comment_id": 74064172, "body": "<code>N + (N-1) + (N-2) +...+1 = ?</code>"}], "answers": [{"tags": [], "owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "is_accepted": false, "score": 4, "last_activity_date": 1506024667, "last_edit_date": 1506024667, "creation_date": 1492631268, "answer_id": 43504829, "question_id": 43504709, "link": "https://stackoverflow.com/questions/43504709/what-is-the-time-complexity-of-this-doubly-nested-loop/43504829#43504829", "title": "What is the time complexity of this doubly-nested loop?", "body": "<p>In cases like these, keep this in mind:</p>\n\n<blockquote>\n  <p>When in doubt, work inside out!</p>\n</blockquote>\n\n<p>Let's take your code:</p>\n\n<pre><code> for ( i = 1; i &lt;= n ; i ++)\n    for ( j= i+1; j &lt;= n; j++)\n      //print something\n</code></pre>\n\n<p>Here, the cost of printing something is &Theta;(1) (assuming you're always printing the same thing), so we can rewrite this code like this:</p>\n\n<pre><code> for ( i = 1; i &lt;= n ; i ++)\n    for ( j= i+1; j &lt;= n; j++)\n       do \u0398(1) work\n</code></pre>\n\n<p>Now, let's work from the inside out. What is that inner loop going to do? Well, when i = 1, it's going to run for n - 1 iterations. When i = 2, it's going to run for n - 2 iterations. When i = 3, it's going to run for n - 3 iterations. In that sense, the work done is &Theta;(n - i), so we can replace the inner loop with something like this:</p>\n\n<pre><code> for ( i = 1; i &lt;= n ; i ++)\n    do \u0398(n - i) work\n</code></pre>\n\n<p>Now, let's look at this outer loop. The first time through, this is going to do (roughly) n - 1 work, the second time it'll do n - 2 work, the third time it'll do n - 3 work, etc. In other words, the total work done here is (roughly) equal to</p>\n\n<blockquote>\n  <p>(n - 1) + (n - 2) + (n - 3) + ... + 3 + 2 + 1</p>\n</blockquote>\n\n<p>This is a famous sum called <a href=\"https://en.wikipedia.org/wiki/Quadratic_Gauss_sum\" rel=\"nofollow noreferrer\">Gauss's sum</a>, and its value is n(n - 1) / 2, which is &Theta;(n<sup>2</sup>). Consequently, the total work done here is &Theta;(n<sup>2</sup>), as @Lashane pointed out in their comment.</p>\n"}], "owner": {"reputation": 139, "user_id": 4082109, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cf8a91d29914d292102ffac2b22bbd98?s=128&d=identicon&r=PG&f=1", "display_name": "guru th", "link": "https://stackoverflow.com/users/4082109/guru-th"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1660, "favorite_count": 0, "closed_date": 1504725141, "answer_count": 1, "score": -3, "last_activity_date": 1506024667, "creation_date": 1492630831, "last_edit_date": 1492647423, "question_id": 43504709, "link": "https://stackoverflow.com/questions/43504709/what-is-the-time-complexity-of-this-doubly-nested-loop", "closed_reason": "Duplicate", "title": "What is the time complexity of this doubly-nested loop?", "body": "<p>Hi i am a bit confused about time complexity of following snippet, \nIt would be great if some one can shed light on this.</p>\n\n<pre><code>     for ( i = 1; i &lt;= n ; i ++)\n        for ( j= i+1; j &lt;= n; j++)\n          //print something\n</code></pre>\n"}, {"tags": ["c", "user-defined-functions"], "comments": [{"owner": {"reputation": 21279, "user_id": 507793, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/6G686.jpg?s=128&g=1", "display_name": "Matthew", "link": "https://stackoverflow.com/users/507793/matthew"}, "edited": false, "score": 9, "creation_date": 1492630135, "post_id": 43504466, "comment_id": 74063431, "body": "it expands to <code>(x + 1 * y + 1)</code>, which is probably not what you&#39;d expect, you need some more brackets."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1492630144, "post_id": 43504466, "comment_id": 74063436, "body": "Read your last sentence carefully again. See the output of the preprocessor and then think about what you learned at your elementary school math class."}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 1, "creation_date": 1492630169, "post_id": 43504466, "comment_id": 74063450, "body": "...  One good reason for not using macros"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 2, "creation_date": 1492630216, "post_id": 43504466, "comment_id": 74063479, "body": "@EdHeal: Oh, macros do have their usage. Just not where a(n <code>inline</code>) function will do as well."}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1492630308, "post_id": 43504466, "comment_id": 74063530, "body": "@Olaf - I agree they sometimes do. But better to avoid them though IMHO"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1492630616, "post_id": 43504466, "comment_id": 74063726, "body": "@EdHeal: I normally keep it with writing understandable/readable code which can also be debugged properly (unless optimisations are unavoidable). If a macro suits better for this goal, I&#39;m fine. If both are similarily suited, the function wins. Until now, no user of my code (that includes myself) complained:-) But I&#39;m quite sure that&#39;s what you mean, too."}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1492630699, "post_id": 43504466, "comment_id": 74063789, "body": "@Olaf - Would they dare complain ;-)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1492630796, "post_id": 43504466, "comment_id": 74063856, "body": "@EdHeal: Not often. But my customers and co-workers well know I take a complain serious if there are good arguments. Despite what one might think, I&#39;m very willing to acept if I&#39;m <b>proved</b> wrong. (notice the emphasis, though:-)"}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1492630853, "post_id": 43504466, "comment_id": 74063894, "body": "@Olaf - The comment was tongue in cheek :-)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1492630982, "post_id": 43504466, "comment_id": 74063993, "body": "@EdHeal: I got that already ;-P"}], "answers": [{"tags": [], "owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "is_accepted": false, "score": 3, "last_activity_date": 1492633199, "last_edit_date": 1492633199, "creation_date": 1492630501, "answer_id": 43504596, "question_id": 43504466, "link": "https://stackoverflow.com/questions/43504466/c-defined-behaviour-returning-wrong-result/43504596#43504596", "title": "C: Defined behaviour returning wrong result", "body": "<p>Macro <code>#define mul(x,y) (x * y)</code> actually tells the pre-compiler that if it finds string <strong>mul(<em>any pattern X</em>, <em>any pattern Y</em>)</strong>, it should replace it with <strong>(<em>any pattern X</em> * <em>any pattern Y</em>)</strong>.</p>\n\n<p>So what do you have in your example?</p>\n\n<pre><code>int x = 3;\nint y = 4;\nint z = 0;\nz = mul(x+1, y+1);\n</code></pre>\n\n<p>After <code>mul</code> is replaced, you get</p>\n\n<pre><code>int x = 3;\nint y = 4;\nint z = 0;\nz = x+1*y+1;\n</code></pre>\n\n<p>==> z = 3 + 1*4 + 1 = 8</p>\n\n<p>The best practice is to surround each macro parameter by brackets. In your example (to achieve the desired result) it should be:</p>\n\n<pre><code>#define mul(x,y) ((x) * (y))\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 7544880, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-g_DugilbqWM/AAAAAAAAAAI/AAAAAAAAARo/SzFFfTrXQno/photo.jpg?sz=128", "display_name": "Paso", "link": "https://stackoverflow.com/users/7544880/paso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "closed_date": 1492637809, "answer_count": 1, "score": 0, "last_activity_date": 1492633199, "creation_date": 1492630055, "question_id": 43504466, "link": "https://stackoverflow.com/questions/43504466/c-defined-behaviour-returning-wrong-result", "closed_reason": "Duplicate", "title": "C: Defined behaviour returning wrong result", "body": "<p>So I have an exam tomorrow and I encountered this on my questions.</p>\n\n<pre><code>#define mul(x,y) (x * y)\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main()\n{\n    int x = 3;\n    int y = 4;\n    int z = 0;\n    z = mul(x+1, y+1);\n    printf(\"4 * 5 = %d \\n\", z);\n    return 0;\n}\n</code></pre>\n\n<p>my question is, why is this outputting 8 instead of 20.\nBecause when I replace <code>z= mul(x+1,y+1)</code> with <code>z= mul((x+1),(y+1))</code> I get the correct answer of 20</p>\n"}, {"tags": ["c", "for-loop", "linked-list", "codeblocks"], "comments": [{"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1492630130, "post_id": 43504433, "comment_id": 74063423, "body": "The first line of the <code>for</code> loop needs to create a new <code>Node</code> using <code>malloc()</code>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 2, "creation_date": 1492630134, "post_id": 43504433, "comment_id": 74063429, "body": "<code>newnode-&gt;number</code> : <code>newnode</code> is <code>NULL</code>. So It can&#39;t dereference."}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1492630195, "post_id": 43504433, "comment_id": 74063468, "body": "Also, assign <code>here</code> after you <code>malloc()</code> <code>head</code>."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1492630508, "post_id": 43504433, "comment_id": 74063651, "body": "these two lines are incompatable: <code>struct node *newnode = NULL;</code> and <code>newnode-&gt;number = rand()%100;</code>  because it is set to NULL and never updated."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1492630902, "post_id": 43504433, "comment_id": 74063938, "body": "You are thinking about use of <code>newnode</code> wrong. You should allocate <code>newnode</code> each time and check <code>if (head == NULL) head = newnode; &#47;* for first node *&#47; else {... iterate to last node and then last-&gt;next = newnode ...}</code>"}, {"owner": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 0, "creation_date": 1492632150, "post_id": 43504433, "comment_id": 74064690, "body": "&#39;I don&#39;t know what I am doing wrong.&#39; well, not using a debugger, for one:("}], "answers": [{"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1492631961, "creation_date": 1492631961, "answer_id": 43505020, "question_id": 43504433, "link": "https://stackoverflow.com/questions/43504433/creating-a-linked-list-with-100-nodes-each-containing-a-random-number-c/43505020#43505020", "title": "creating a linked list with 100 nodes each containing a random number C", "body": "<p>here is a version of the code that checks for errors, and properly initializes each node</p>\n\n<pre><code>#include &lt;stdio.h&gt;   // printf(), NULL\n#include &lt;stdlib.h&gt;  // malloc()\n\nstruct node\n{\n    int number;\n    struct node * next;\n};\n\n\n\nint main( void ) //creating the linked list\n{\n    int i;\n    struct node *head = malloc(sizeof( struct node ));\n    if(head == NULL)\n    { //was told build the 1st node out of the loop\n        perror( \"malloc for for node failed\" );\n        exit( EXIT_FAILURE );\n    }\n\n    // implied else, malloc successful\n\n    head-&gt;next = NULL;\n    head-&gt;number = rand()%100;\n    printf(\"node: %2.2d, %2.2d, %p\\n\", 0, head-&gt;number, head-&gt;next);\n\n    struct node *here = head;\n\n    for (i=1; i&lt;100; i++)\n    {\n        here-&gt;next = malloc( sizeof( struct node ) );\n        if( !(here-&gt;next) )\n        {\n            perror( \"malloc failed\" );\n            exit( EXIT_FAILURE );\n        }\n\n        // implied else, malloc successful\n\n        here = here-&gt;next;\n        here-&gt;number = rand()%100;\n        printf(\"node: %2.2d, %2.2d, %p\\n\", i, here-&gt;number, here-&gt;next);\n    }\n\n    return 0; // &lt;&lt; in modern compilers, this line not needed\n              // &lt;&lt; when returning from 'main()' and value is 0\n} // end function: main\n</code></pre>\n\n<p>and the typical output is:</p>\n\n<pre><code>node: 00, 83, (nil)\nnode: 01, 86, (nil)\nnode: 02, 77, (nil)\nnode: 03, 15, (nil)\nnode: 04, 93, (nil)\nnode: 05, 35, (nil)\nnode: 06, 86, (nil)\nnode: 07, 92, (nil)\nnode: 08, 49, (nil)\nnode: 09, 21, (nil)\nnode: 10, 62, (nil)\nnode: 11, 27, (nil)\nnode: 12, 90, (nil)\nnode: 13, 59, (nil)\nnode: 14, 63, (nil)\nnode: 15, 26, (nil)\nnode: 16, 40, (nil)\nnode: 17, 26, (nil)\nnode: 18, 72, (nil)\nnode: 19, 36, (nil)\nnode: 20, 11, (nil)\nnode: 21, 68, (nil)\nnode: 22, 67, (nil)\nnode: 23, 29, (nil)\nnode: 24, 82, (nil)\nnode: 25, 30, (nil)\nnode: 26, 62, (nil)\nnode: 27, 23, (nil)\nnode: 28, 67, (nil)\nnode: 29, 35, (nil)\nnode: 30, 29, (nil)\nnode: 31, 02, (nil)\nnode: 32, 22, (nil)\nnode: 33, 58, (nil)\nnode: 34, 69, (nil)\nnode: 35, 67, (nil)\nnode: 36, 93, (nil)\nnode: 37, 56, (nil)\nnode: 38, 11, (nil)\nnode: 39, 42, (nil)\nnode: 40, 29, (nil)\nnode: 41, 73, (nil)\nnode: 42, 21, (nil)\nnode: 43, 19, (nil)\nnode: 44, 84, (nil)\nnode: 45, 37, (nil)\nnode: 46, 98, (nil)\nnode: 47, 24, (nil)\nnode: 48, 15, (nil)\nnode: 49, 70, (nil)\nnode: 50, 13, (nil)\nnode: 51, 26, (nil)\nnode: 52, 91, (nil)\nnode: 53, 80, (nil)\nnode: 54, 56, (nil)\nnode: 55, 73, (nil)\nnode: 56, 62, (nil)\nnode: 57, 70, (nil)\nnode: 58, 96, (nil)\nnode: 59, 81, (nil)\nnode: 60, 05, (nil)\nnode: 61, 25, (nil)\nnode: 62, 84, (nil)\nnode: 63, 27, (nil)\nnode: 64, 36, (nil)\nnode: 65, 05, (nil)\nnode: 66, 46, (nil)\nnode: 67, 29, (nil)\nnode: 68, 13, (nil)\nnode: 69, 57, (nil)\nnode: 70, 24, (nil)\nnode: 71, 95, (nil)\nnode: 72, 82, (nil)\nnode: 73, 45, (nil)\nnode: 74, 14, (nil)\nnode: 75, 67, (nil)\nnode: 76, 34, (nil)\nnode: 77, 64, (nil)\nnode: 78, 43, (nil)\nnode: 79, 50, (nil)\nnode: 80, 87, (nil)\nnode: 81, 08, (nil)\nnode: 82, 76, (nil)\nnode: 83, 78, (nil)\nnode: 84, 88, (nil)\nnode: 85, 84, (nil)\nnode: 86, 03, (nil)\nnode: 87, 51, (nil)\nnode: 88, 54, (nil)\nnode: 89, 99, (nil)\nnode: 90, 32, (nil)\nnode: 91, 60, (nil)\nnode: 92, 76, (nil)\nnode: 93, 68, (nil)\nnode: 94, 39, (nil)\nnode: 95, 12, (nil)\nnode: 96, 26, (nil)\nnode: 97, 86, (nil)\nnode: 98, 94, (nil)\nnode: 99, 39, (nil)\n</code></pre>\n\n<p>so, perhaps you would like to display the address of the current node rather than the contents of the 'next' field.</p>\n\n<p>then the <code>printf()</code> statements would be:</p>\n\n<pre><code>printf(\"node: %2.2d, %2.2d, %p\\n\", 0, head-&gt;number, head);\n</code></pre>\n\n<p>and   </p>\n\n<pre><code>printf(\"node: %2.2d, %2.2d, %p\\n\", i, here-&gt;number, here);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 22041, "user_id": 108207, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dd8608b8b423bdcbda3fe5c0cf8b6230?s=128&d=identicon&r=PG&f=1", "display_name": "Niklas R.", "link": "https://stackoverflow.com/users/108207/niklas-r"}, "is_accepted": false, "score": 0, "last_activity_date": 1492633515, "last_edit_date": 1492633515, "creation_date": 1492632055, "answer_id": 43505048, "question_id": 43504433, "link": "https://stackoverflow.com/questions/43504433/creating-a-linked-list-with-100-nodes-each-containing-a-random-number-c/43505048#43505048", "title": "creating a linked list with 100 nodes each containing a random number C", "body": "<p>Creating a linked list with 100 random numbers can be done in the following way. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\ntypedef struct node {\n    int data;\n    struct node *next;\n} node;\n\nnode *newNode(int data) {\n    node *new_node = (node *) malloc(sizeof(node));\n    new_node-&gt;data = data;    \n    new_node-&gt;next = NULL;;\n    return new_node;\n}\n\nnode *insert_node(node *root, int data) {\n    if (root == NULL)\n        return newNode(data);\n    else {\n        node *cur;    \n        cur = insert_node(root-&gt;next, data);\n        root-&gt;next = cur;    \n    }\n    return root;\n}\n\nvoid print(node *np) {\n    if (np) {\n        printf(\"(%d)\", np-&gt;data);\n        print(np-&gt;next);\n    }\n}\n\nint main() {\n    int T = 100;\n    node *root = NULL;\n    while (T-- &gt; 0) {\n        int r = rand() % 200;\n        root = insert_node(root, r);\n    }\n    print(root);\n    printf(\"\\n\");\n    return 0;\n}\n</code></pre>\n\n<p>Please try it <a href=\"http://ideone.com/Arp1CH\" rel=\"nofollow noreferrer\">online</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 0, "last_activity_date": 1492634513, "last_edit_date": 1492634513, "creation_date": 1492632322, "answer_id": 43505128, "question_id": 43504433, "link": "https://stackoverflow.com/questions/43504433/creating-a-linked-list-with-100-nodes-each-containing-a-random-number-c/43505128#43505128", "title": "creating a linked list with 100 nodes each containing a random number C", "body": "<p>Your use of <code>newnode</code> and <code>head</code> are a bit reversed. All you need do is allocate <code>newnode</code> each tine and then either create a <em>new</em> list (e.g. assign <code>head=newnode</code> or iterate over your list and assign <code>newnode</code> at the end of list. For example:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\ntypedef struct node {\n    int number;\n    struct node *next;\n} node;\n\nint main (void) {\n\n    srand (time (NULL));\n\n    node *head = NULL;\n\n    for (int i = 0; i &lt; 100; i++) {\n        node *newnode = malloc (sizeof *newnode);\n        if (!newnode) {\n            fprintf (stderr, \"error: memory exhausted node '%d'.\\n\", i);\n            break;\n        }\n\n        newnode-&gt;number = rand() % 100;\n        newnode-&gt;next = NULL;\n\n        if (!head)          /* new list, assign to head */\n            head = newnode;\n        else {              /* otherwise iterate and add to end */\n            node *iter = head;\n            for (; iter-&gt;next; iter = iter-&gt;next) {}\n            iter-&gt;next = newnode;\n        }\n    }\n\n    int j = 0;  /* output list (including pointer addresses) */\n    for (node *iter = head; iter; iter = iter-&gt;next)\n        printf (\"node[%3d] : %3d,       addr: %p, next: %p\\n\",\n                j++, iter-&gt;number, (void*)iter, (void*)iter-&gt;next);\n\n    /* free list memory */\n    node *victim = NULL;    /* node to delete */\n    for (node *iter = head; iter; iter = iter-&gt;next) {\n        if (victim)     /* cannot delete until after loop increment */\n            free (victim);\n        victim = iter;  /* so save node as victim, delete next iteration */\n    }\n    if (victim)         /* free last node */\n        free (victim);\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Note</strong> don't forget to <code>free</code> all memory you allocate.</p>\n\n<p><strong>Example Use/Output</strong></p>\n\n<pre><code>$ ./bin/llmin\nnode[  0] :  91,       addr: 0x2228010, next: 0x2228030\nnode[  1] :  48,       addr: 0x2228030, next: 0x2228050\nnode[  2] :  18,       addr: 0x2228050, next: 0x2228070\nnode[  3] :  97,       addr: 0x2228070, next: 0x2228090\nnode[  4] :  15,       addr: 0x2228090, next: 0x22280b0\nnode[  5] :  46,       addr: 0x22280b0, next: 0x22280d0\nnode[  6] :  93,       addr: 0x22280d0, next: 0x22280f0\nnode[  7] :  22,       addr: 0x22280f0, next: 0x2228110\nnode[  8] :  17,       addr: 0x2228110, next: 0x2228130\nnode[  9] :   6,       addr: 0x2228130, next: 0x2228150\nnode[ 10] :  64,       addr: 0x2228150, next: 0x2228170\n...\nnode[ 90] :  57,       addr: 0x2228b50, next: 0x2228b70\nnode[ 91] :  64,       addr: 0x2228b70, next: 0x2228b90\nnode[ 92] :  91,       addr: 0x2228b90, next: 0x2228bb0\nnode[ 93] :  66,       addr: 0x2228bb0, next: 0x2228bd0\nnode[ 94] :  13,       addr: 0x2228bd0, next: 0x2228bf0\nnode[ 95] :  89,       addr: 0x2228bf0, next: 0x2228c10\nnode[ 96] :  73,       addr: 0x2228c10, next: 0x2228c30\nnode[ 97] :  42,       addr: 0x2228c30, next: 0x2228c50\nnode[ 98] :  79,       addr: 0x2228c50, next: 0x2228c70\nnode[ 99] :  23,       addr: 0x2228c70, next: (nil)\n</code></pre>\n\n<p>Look it over and let me know if you have any questions.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7595729"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3351, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1492634513, "creation_date": 1492629963, "last_edit_date": 1492630524, "question_id": 43504433, "link": "https://stackoverflow.com/questions/43504433/creating-a-linked-list-with-100-nodes-each-containing-a-random-number-c", "title": "creating a linked list with 100 nodes each containing a random number C", "body": "<p>**I'm trying to understand linked lists and I want to make one that contains 100 nodes containing random numbers.. My codeblocks says that there are no errors but my program crashes when I try to run it. I don't know what I am doing wrong.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\ntypedef struct node{\n    int number;\n    struct node * next;\n}Node;\n\ntypedef Node*Nodeptr;\n\nint main() //creating the linked list  \n{\n    int i;\n    Nodeptr head = NULL;\n    Nodeptr here = head;\n    Nodeptr newnode = NULL;\n    head = malloc(sizeof(Node));\n\n    if(head == NULL){ //was told build the 1st node out of the loop\n        return 1;\n    }\n    for (i=0; i&lt;100; i++){\n         newnode-&gt;number = rand()%100;\n         newnode-&gt;next = NULL;\n         here-&gt;next = newnode;\n         here = here-&gt;next;\n    }\n\n    printf(\"%d, %d, %p\\n\", i, here-&gt;number, here-&gt;next);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "openacc"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1492629463, "post_id": 43504239, "comment_id": 74063046, "body": "C and C++ are different languages. Remove the unrelated tag. And read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}, {"owner": {"reputation": 23, "user_id": 6337986, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-2Jsa66biOg4/AAAAAAAAAAI/AAAAAAAAIEM/g2clExXOgyg/photo.jpg?sz=128", "display_name": "Pragya Sharma", "link": "https://stackoverflow.com/users/6337986/pragya-sharma"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1492629927, "post_id": 43504239, "comment_id": 74063307, "body": "done, removed, thanks for suggestion."}, {"owner": {"reputation": 3901, "user_id": 3204484, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F7Cc9.jpg?s=128&g=1", "display_name": "Mat Colgrove", "link": "https://stackoverflow.com/users/3204484/mat-colgrove"}, "edited": false, "score": 0, "creation_date": 1492716113, "post_id": 43504239, "comment_id": 74109358, "body": "Can you post the full reproducing example or provide a link to it?  If so, I&#39;ll take a look and see what I can determine."}, {"owner": {"reputation": 23, "user_id": 6337986, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-2Jsa66biOg4/AAAAAAAAAAI/AAAAAAAAIEM/g2clExXOgyg/photo.jpg?sz=128", "display_name": "Pragya Sharma", "link": "https://stackoverflow.com/users/6337986/pragya-sharma"}, "reply_to_user": {"reputation": 3901, "user_id": 3204484, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F7Cc9.jpg?s=128&g=1", "display_name": "Mat Colgrove", "link": "https://stackoverflow.com/users/3204484/mat-colgrove"}, "edited": false, "score": 0, "creation_date": 1492769946, "post_id": 43504239, "comment_id": 74131985, "body": "@MatColgrove I have updated the entire code."}, {"owner": {"reputation": 23, "user_id": 6337986, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-2Jsa66biOg4/AAAAAAAAAAI/AAAAAAAAIEM/g2clExXOgyg/photo.jpg?sz=128", "display_name": "Pragya Sharma", "link": "https://stackoverflow.com/users/6337986/pragya-sharma"}, "edited": false, "score": 0, "creation_date": 1492773412, "post_id": 43504239, "comment_id": 74134414, "body": "Also now the output is generating 3 digit numbers but unsorted."}, {"owner": {"reputation": 23, "user_id": 6337986, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-2Jsa66biOg4/AAAAAAAAAAI/AAAAAAAAIEM/g2clExXOgyg/photo.jpg?sz=128", "display_name": "Pragya Sharma", "link": "https://stackoverflow.com/users/6337986/pragya-sharma"}, "edited": false, "score": 0, "creation_date": 1492786028, "post_id": 43504239, "comment_id": 74143432, "body": "I made some changes in the program, also now I checked that in output I am getting most of the elements more than once although in the input it occurred only once:-The unsorted a is:205  831  382  842  137  757  112 21 ......Sorted a:21  21  66  66  112  112  137  149  149  171  ...Array is not sorted. for example, in unsorted array 21 is only once but in output its twice."}, {"owner": {"reputation": 23, "user_id": 6337986, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-2Jsa66biOg4/AAAAAAAAAAI/AAAAAAAAIEM/g2clExXOgyg/photo.jpg?sz=128", "display_name": "Pragya Sharma", "link": "https://stackoverflow.com/users/6337986/pragya-sharma"}, "edited": false, "score": 0, "creation_date": 1492793188, "post_id": 43504239, "comment_id": 74148145, "body": "I am using now iterative merge sort algorithm as I though with that it would be easy to avoid recursive parallelism, although now I am getting :-PGC-S-0155-Procedures called in a compute region must have acc routine information: min (mer_acc.c: 135) PGC-S-0155-Accelerator region ignored; see -Minfo messages  (mer_acc.c: 123) this error for min function."}, {"owner": {"reputation": 3901, "user_id": 3204484, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F7Cc9.jpg?s=128&g=1", "display_name": "Mat Colgrove", "link": "https://stackoverflow.com/users/3204484/mat-colgrove"}, "edited": false, "score": 0, "creation_date": 1492793648, "post_id": 43504239, "comment_id": 74148439, "body": "I&#39;m seeing unsorted arrays even when compiled without optimization and without OpenACC.  So there&#39;s something wrong with your algorithm rather than anything to do with the OpenACC code.  Though, the data regions around the while loops are extraneous since you&#39;re computing on the host."}, {"owner": {"reputation": 3901, "user_id": 3204484, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F7Cc9.jpg?s=128&g=1", "display_name": "Mat Colgrove", "link": "https://stackoverflow.com/users/3204484/mat-colgrove"}, "edited": false, "score": 0, "creation_date": 1492793732, "post_id": 43504239, "comment_id": 74148490, "body": "As for the missing device &quot;min&quot; routine, are you defining your own &quot;min&quot; routine?  If so, you need to decorate the definition with &quot;acc routine&quot; so the compiler knows to create a device version of the routine.  (or inline the routine by adding the -Minline compiler flag).  Also you can use the standard &quot;fmin&quot; by including the PGI supplied &quot;accelmath.h&quot; header file."}, {"owner": {"reputation": 23, "user_id": 6337986, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-2Jsa66biOg4/AAAAAAAAAAI/AAAAAAAAIEM/g2clExXOgyg/photo.jpg?sz=128", "display_name": "Pragya Sharma", "link": "https://stackoverflow.com/users/6337986/pragya-sharma"}, "edited": false, "score": 0, "creation_date": 1492794108, "post_id": 43504239, "comment_id": 74148716, "body": "Thanks for the suggestion, as per your guidance I used fmin instead of min, although still I am getting same error. int right_end = fmin (x , n-1);"}, {"owner": {"reputation": 23, "user_id": 6337986, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-2Jsa66biOg4/AAAAAAAAAAI/AAAAAAAAIEM/g2clExXOgyg/photo.jpg?sz=128", "display_name": "Pragya Sharma", "link": "https://stackoverflow.com/users/6337986/pragya-sharma"}, "edited": false, "score": 0, "creation_date": 1492794236, "post_id": 43504239, "comment_id": 74148810, "body": "Apologies, now, it&#39;s not giving error for min, it&#39;s same error but for merge function."}, {"owner": {"reputation": 23, "user_id": 6337986, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-2Jsa66biOg4/AAAAAAAAAAI/AAAAAAAAIEM/g2clExXOgyg/photo.jpg?sz=128", "display_name": "Pragya Sharma", "link": "https://stackoverflow.com/users/6337986/pragya-sharma"}, "edited": false, "score": 0, "creation_date": 1492794393, "post_id": 43504239, "comment_id": 74148905, "body": "# pragma acc kernels   \t  # pragma acc loop independent gang (1), worker(1)\t     for (curr_size=1; curr_size&lt;=n-1; curr_size = 2*curr_size)    { \t     # pragma acc loop independent vector        for (left_start=0; left_start&lt;n-1; left_start += 2*curr_size)        { int mid = left_start + curr_size - 1;            int x = left_start + 2*curr_size - 1;            int right_end = fmin (x , n-1);            \t\t    if ((right_end - left_start) &gt; THR)            merge(arr, left_start, mid, right_end);          else          isort(arr, left_start,mid, right_end);}}} This is mergesort."}, {"owner": {"reputation": 23, "user_id": 6337986, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-2Jsa66biOg4/AAAAAAAAAAI/AAAAAAAAIEM/g2clExXOgyg/photo.jpg?sz=128", "display_name": "Pragya Sharma", "link": "https://stackoverflow.com/users/6337986/pragya-sharma"}, "edited": false, "score": 0, "creation_date": 1492796380, "post_id": 43504239, "comment_id": 74150065, "body": "I was reading PGI forum <a href=\"http://www.pgroup.com/userforum/viewtopic.php?t=5583&amp;highlight=pgcs0155procedures+called+compute+region+acc+routine+information\" rel=\"nofollow noreferrer\">pgroup.com/userforum/&hellip;</a> and found someone has similar issue while calling function inside the kernel, but the solution is not clear to me. Can someone explain me."}, {"owner": {"reputation": 3901, "user_id": 3204484, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F7Cc9.jpg?s=128&g=1", "display_name": "Mat Colgrove", "link": "https://stackoverflow.com/users/3204484/mat-colgrove"}, "edited": false, "score": 0, "creation_date": 1492799477, "post_id": 43504239, "comment_id": 74151731, "body": "I doubt that post is related.  Basically, in order to be able to call a function from within a compute region, the function you&#39;re calling needs to have a device version available.  (i.e. you can&#39;t call a host function from the device).  Adding a  &quot;acc routine&quot; directive to the prototype and definition of the function is how you indicate to the compiler to create a device version of the function.  Some system functions are available on the device (such as &quot;fmin&quot; if you add &quot;#include &lt;accelmath.h&gt;&quot; to get the correct definition), but if no device version is available, you may need to add it."}, {"owner": {"reputation": 23, "user_id": 6337986, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-2Jsa66biOg4/AAAAAAAAAAI/AAAAAAAAIEM/g2clExXOgyg/photo.jpg?sz=128", "display_name": "Pragya Sharma", "link": "https://stackoverflow.com/users/6337986/pragya-sharma"}, "edited": false, "score": 0, "creation_date": 1492807548, "post_id": 43504239, "comment_id": 74155640, "body": "Thanks for explaining the post, I also felt similar so now I changed my approach from recursive to iterative merge sort and now I am using kernel directive in merge and insertion sort function, instead of mergeSort function. Now I am not getting previous errors but correct code parallelization is hard to achieve."}, {"owner": {"reputation": 23, "user_id": 6337986, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-2Jsa66biOg4/AAAAAAAAAAI/AAAAAAAAIEM/g2clExXOgyg/photo.jpg?sz=128", "display_name": "Pragya Sharma", "link": "https://stackoverflow.com/users/6337986/pragya-sharma"}, "edited": false, "score": 0, "creation_date": 1492808566, "post_id": 43504239, "comment_id": 74156122, "body": "Although I have one question, maybe it will look silly, but is there some other way to use kernels in all function without calling one kernel inside other.As if now I am not using the kernel in mergeSort so compiler is not calling that function for parallelization."}, {"owner": {"reputation": 23, "user_id": 6337986, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-2Jsa66biOg4/AAAAAAAAAAI/AAAAAAAAIEM/g2clExXOgyg/photo.jpg?sz=128", "display_name": "Pragya Sharma", "link": "https://stackoverflow.com/users/6337986/pragya-sharma"}, "edited": false, "score": 0, "creation_date": 1492808941, "post_id": 43504239, "comment_id": 74156266, "body": "I know maybe I am asking more help from you, but I am really trying to run this program properly, but it&#39;s getting harder, if it&#39;s possible can you please run program from your end and help me to figure out the solution. I am using these compiler settings:-pgcc -acc -ta=nvidia:managed,time -Minfo=accel -Mautoinline  -o output mer_acc.c."}, {"owner": {"reputation": 3901, "user_id": 3204484, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F7Cc9.jpg?s=128&g=1", "display_name": "Mat Colgrove", "link": "https://stackoverflow.com/users/3204484/mat-colgrove"}, "edited": false, "score": 0, "creation_date": 1493131263, "post_id": 43504239, "comment_id": 74276504, "body": "I would encourage you to go back and look at the original C, i.e. no OpenACC, version.  Run the executable multiple times and you will see that it will that it fails to sort the array on some of the runs.  I believe the problem is with your isort routine.  When I change the starting index of the outer loop from mid to left, it passes each time as does the OpenACC version.  I don&#39;t know if this is the proper fix, but something you should examine."}, {"owner": {"reputation": 23, "user_id": 6337986, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-2Jsa66biOg4/AAAAAAAAAAI/AAAAAAAAIEM/g2clExXOgyg/photo.jpg?sz=128", "display_name": "Pragya Sharma", "link": "https://stackoverflow.com/users/6337986/pragya-sharma"}, "reply_to_user": {"reputation": 3901, "user_id": 3204484, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F7Cc9.jpg?s=128&g=1", "display_name": "Mat Colgrove", "link": "https://stackoverflow.com/users/3204484/mat-colgrove"}, "edited": false, "score": 0, "creation_date": 1493285716, "post_id": 43504239, "comment_id": 74355329, "body": "Yes @MatColgrove you are absolutely correct, I also found the same, that issue is with isort, although, the solution of changing starting index also doesn&#39;t seems proper."}, {"owner": {"reputation": 23, "user_id": 6337986, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-2Jsa66biOg4/AAAAAAAAAAI/AAAAAAAAIEM/g2clExXOgyg/photo.jpg?sz=128", "display_name": "Pragya Sharma", "link": "https://stackoverflow.com/users/6337986/pragya-sharma"}, "reply_to_user": {"reputation": 3901, "user_id": 3204484, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F7Cc9.jpg?s=128&g=1", "display_name": "Mat Colgrove", "link": "https://stackoverflow.com/users/3204484/mat-colgrove"}, "edited": false, "score": 0, "creation_date": 1493805386, "post_id": 43504239, "comment_id": 74554835, "body": "@MatColgrove, I figured out almost all the issues and I have rephrased my question again, now I have only single error, I will really appreciate if you may please have a look on it."}, {"owner": {"reputation": 23, "user_id": 6337986, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-2Jsa66biOg4/AAAAAAAAAAI/AAAAAAAAIEM/g2clExXOgyg/photo.jpg?sz=128", "display_name": "Pragya Sharma", "link": "https://stackoverflow.com/users/6337986/pragya-sharma"}, "edited": false, "score": 0, "creation_date": 1493807058, "post_id": 43504239, "comment_id": 74555987, "body": "I have changed independent to seq and the error is gone:- #pragma acc loop seq private(k) reduction(+:j) private (L[0:n1]) private (R[0:n1]) private (arr[0:n1])reduction(+:i)   However, the result is still floating point exception."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 6337986, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-2Jsa66biOg4/AAAAAAAAAAI/AAAAAAAAIEM/g2clExXOgyg/photo.jpg?sz=128", "display_name": "Pragya Sharma", "link": "https://stackoverflow.com/users/6337986/pragya-sharma"}, "edited": false, "score": 0, "creation_date": 1494230887, "post_id": 43771576, "comment_id": 74721254, "body": "Dear @MatColgrove thanks for explaining and providing the solution so well. Although, in oder to check performance and efficiency of the code, I was calculating time w.r.t. different number of gangs and vectors, however, now with parallel directive it&#39;s giving :-PGCC-S-0155-Illegal context for gang(num:) or worker(num:) or vector(length:)  (acc_mer.cpp: 69) PGCC/x86 Linux 16.10-0: compilation completed with severe errors error and with kernels directive its giving:- PGCC-S-0155-vector(x) not allowed in a kernels region having vector_length  error."}, {"owner": {"reputation": 3901, "user_id": 3204484, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F7Cc9.jpg?s=128&g=1", "display_name": "Mat Colgrove", "link": "https://stackoverflow.com/users/3204484/mat-colgrove"}, "reply_to_user": {"reputation": 23, "user_id": 6337986, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-2Jsa66biOg4/AAAAAAAAAAI/AAAAAAAAIEM/g2clExXOgyg/photo.jpg?sz=128", "display_name": "Pragya Sharma", "link": "https://stackoverflow.com/users/6337986/pragya-sharma"}, "edited": false, "score": 0, "creation_date": 1494262543, "post_id": 43771576, "comment_id": 74742064, "body": "For &quot;parallel&quot;, you can only use the &quot;num_gang&quot;, &quot;num_worker&quot; and &quot;vector_length&quot; clauses on the &quot;parallel&quot; directive.  For &quot;kernels&quot;, you can &quot;gang(num)&quot;, &quot;worker(num)&quot;, and &quot;vector(length)&quot; on individual loop directives.  The reason is that with &quot;parallel&quot;, only a single device kernel is created so all loops within the region need the same values.  With &quot;kernels&quot;, multiple device kernels may be created so the values can change per loop.  Note that these restrictions maybe lifted in the OpenACC 2.6 standard, but are still enforced by the 16.10 and 17.4 PGI compilers."}, {"owner": {"reputation": 23, "user_id": 6337986, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-2Jsa66biOg4/AAAAAAAAAAI/AAAAAAAAIEM/g2clExXOgyg/photo.jpg?sz=128", "display_name": "Pragya Sharma", "link": "https://stackoverflow.com/users/6337986/pragya-sharma"}, "edited": false, "score": 0, "creation_date": 1494345545, "post_id": 43771576, "comment_id": 74784227, "body": "Thanks again for explanation, now I am using #pragma acc parallel num_gangs(1), vector_length(128)       {     #pragma acc loop gang, vector."}], "tags": [], "owner": {"reputation": 3901, "user_id": 3204484, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F7Cc9.jpg?s=128&g=1", "display_name": "Mat Colgrove", "link": "https://stackoverflow.com/users/3204484/mat-colgrove"}, "is_accepted": true, "score": 0, "last_activity_date": 1493854200, "creation_date": 1493854200, "answer_id": 43771576, "question_id": 43504239, "link": "https://stackoverflow.com/questions/43504239/floating-point-exception-in-openacc-merge-sort-program/43771576#43771576", "title": "Floating point exception in OpenAcc Merge Sort program", "body": "<p>There's a few problems here.</p>\n\n<p>It looks like there can be a case where \"mid\" is greater that \"right_end\" which will cause a malloc to have a negative size.  While I'm not sure it's the correct fix, I added an if statement to skip the merge when mid>right_end.</p>\n\n<p>Parallel loops must be countable, i.e. that the number of iterations is known at the start of the loop.  Hence you can't put \"loop\" directives around while loops.</p>\n\n<p>Putting \"arr\" in a private clause isn't what you want here.  You want to update the global array, not a private copy.  Private will make a private copy of the variable for every gang, vector, or worker (depending upon the schedule of the loop with the private clause).  The private variable goes away after the kernel executes.  </p>\n\n<p>Also your \"curr_size\" for loop has a dependency so can't be parallelized.  The problem here is that it strides by \"curr_size=2*curr_size\".  Each iteration needs the previous iteration's curr_size value before it can compute it's own curr_size.  </p>\n\n<p>Note that using \"malloc\" within a compute region is problematic.  First, device side mallocs are very slow so will have an adverse impact on performance.  Also, the heap on the device is quite small (default 8MB but can be increased but setting the environment variable PGI_ACC_HEAPSIZE) so very large values of n may overflow the heap and give an illegal address error.</p>\n\n<p>Here's the fixed code:</p>\n\n<pre><code>% cat test.c\n#include&lt;stdlib.h&gt;\n#include&lt;stdio.h&gt;\n#include &lt;time.h&gt;\n#include &lt;omp.h&gt;\n#include &lt;openacc.h&gt;\n#define THR 10\n\n\n//Function to test if the output is in asending order or not\nvoid test(int a[], int n) {\nint i;\nfor (i=1;i&lt;n;++i) {\nif (a[i]&lt;a[i-1]) {\n  break;\n}\n}\nif (i&lt;n) {\nfor (i=1;i&lt;n;++i) {\n   if (a[i]&gt;a[i-1]){\n      break;\n   }\n }\nif (i&lt;n) {\n  printf(\"\\nArray is not sorted\\n\");\n}\n}\nelse {\nprintf(\"\\nArray is sorted\\n\");\n}\n}\n\n /* Function to sort an array using insertion sort in serial*/\nvoid isort (int *array, int low, int mid, int high) {\n\nfor (int i = mid; i &lt;= high; i++) {\n    for (int j = i - 1; j &gt;= 0; j--) {\n        if (array[i] &lt; array [j]) {\n            int holder = array[j];\n            array[j] = array[i];\n            array[i] = holder;\n            i--;\n        }\n    }\n }\n }\n/* Function to merge */\nvoid merge(int arr[], int l, int m, int r);\n\n// Utility function to find minimum of two integers\n#pragma acc routine seq\nint min(int x, int y) { return (x&lt;y)? x :y; }\n\n/* Iterative mergesort function to sort arr[0...n-1] */\nvoid mergeSort(int arr[], int n)\n{\nint curr_size;  // For current size of subarrays to be merged\n               // curr_size varies from 1 to n/2\nint left_start; // For picking starting index of left subarray\n               // to be merged\n#pragma acc data copy(arr[0:n])// pcopying (R[0:n2])\n      {\n  for (curr_size=1; curr_size&lt;=n-1; curr_size = 2*curr_size)\n {\n  #pragma acc parallel loop\n   // Pick starting point of different subarrays of current size\n   for (left_start=0; left_start&lt;n-1; left_start += 2*curr_size)\n   {\n       // Find ending point of left subarray. mid+1 is starting\n       // point of right\n       int mid = left_start + curr_size - 1;\n\n       int right_end = min(left_start + 2*curr_size - 1, n-1);\n\n       // Merge Subarrays arr[left_start...mid] &amp; arr[mid+1...right_end]\n       if (mid &lt; right_end) merge(arr, left_start, mid, right_end);\n   }\n }\n}}\n\n/* Function to merge the two haves arr[l..m] and arr[m+1..r] of array arr[]\n*/\n #pragma acc routine(merge) vector\n void merge(int arr[], int l, int m, int r)\n{\nint i, j, k;\nint n1 = m - l + 1;\nint n2 =  r - m;\n\n/* create temp arrays */\nint *L, *R;\n L = (int *)malloc(sizeof(int) * n1);\n R = (int *)malloc(sizeof(int) * n2);\n/* Copy data to temp arrays L[] and R[] */\n #pragma acc loop independent\nfor (i = 0; i &lt; n1; i++)\n    L[i] = arr[l + i];\n #pragma acc loop independent\nfor (j = 0; j &lt; n2; j++)\n    R[j] = arr[m + 1+ j];\n\n/* Merge the temp arrays back into arr[l..r]*/\ni = 0;\nj = 0;\nk = l;\n\nwhile (i &lt; n1 &amp;&amp; j &lt; n2)\n{\n    if (L[i] &lt;= R[j])\n    {\n        arr[k] = L[i];\n        i++;\n    }\n    else\n    {\n        arr[k] = R[j];\n        j++;\n    }\n    k++;\n}\n\n/* Copy the remaining elements of L[], if there are any */\n\nwhile (i &lt; n1)\n{\n    arr[k] = L[i];\n    i++;\n    k++;\n}\n\n/* Copy the remaining elements of R[], if there are any */\nwhile (j &lt; n2)\n{\n    arr[k] = R[j];\n    j++;\n    k++;\n}\nfree(L);\nfree(R);\n}\n\n\n/* Function to print an array */\nvoid printArray(int A[], int size)\n{\nint i;\nfor (i=0; i &lt; size; i++)\n    printf(\"%d \", A[i]);\nprintf(\"\\n\");\n}\n\n/* Driver program to test above functions */\nint main()\n {\n int i, n=100, *a;\n double startTime, endTime;\n\n printf(\"How many elements in the array? \");\n\n a = (int *)malloc(sizeof(int) * n);\n srand(time(0));\n for(i=0;i&lt;n;i++)\n       {\n         a[i]=rand()%1000;\n       }\n printf(\"List Before Sorting...\\n\");\n printArray(a, n);\n if (n&lt;=THR)\n {\n startTime = omp_get_wtime();\n isort(a,0,0,n);\n endTime = omp_get_wtime();\n printf(\"\\nSorted array:  \");\n printArray(a,n);\n printf(\"\\n\");\n test(a,n);\n printf(\"IN\");\n printf(\"\\nTime: %g\\n\",endTime-startTime);\n exit(0);\n }\n\n else\n {\n startTime = omp_get_wtime();\n mergeSort(a,n);\n endTime = omp_get_wtime();\n printf(\"\\nSorted array:  \");\n printArray(a,n);\n printf(\"\\n\");\n test(a,n);\n printf(\"ACC\");\n printf(\"\\nTime: %g\\n\",endTime-startTime);\n printf(\"\\nSize of the array is %d\\n\",n);\n\n exit(0);\n }\n }\n\n% pgcc -Minfo=accel -acc test.c -fast -o gpu\nmin:\n     51, Generating acc routine seq\n         Generating Tesla code\nmergeSort:\n     60, Generating copy(arr[:n])\n     64, Accelerator kernel generated\n         Generating Tesla code\n         66, #pragma acc loop gang /* blockIdx.x */\nmerge:\n     84, Generating Tesla code\n         95, #pragma acc loop vector /* threadIdx.x */\n         98, #pragma acc loop vector /* threadIdx.x */\n        106, #pragma acc loop seq\n        123, #pragma acc loop seq\n        131, #pragma acc loop seq\n     95, Loop is parallelizable\n     98, Loop is parallelizable\n    106, Loop carried scalar dependence for i at line 119,126,125\n         Loop carried scalar dependence for j at line 106,108\n         Loop carried scalar dependence for i at line 111,110\n         Loop carried scalar dependence for j at line 116\n         Scalar last value needed after loop for i at line 123\n         Loop carried scalar dependence for j at line 134,133\n         Loop carried scalar dependence for i at line 108\n         Loop carried scalar dependence for j at line 115\n    110, Accelerator restriction: induction variable live-out from loop: k\n    115, Accelerator restriction: induction variable live-out from loop: k\n    118, Accelerator restriction: induction variable live-out from loop: k\n% ./gpu\nHow many elements in the array? List Before Sorting...\n58 612 99 182 914 802 452 229 856 644 932 339 650 915 533 300 456 892 860 764 866 229 400 561 328 170 573 121 364 392 801 775 356 901 309 622 703 762 851 911 406 135 602 56 51 136 708 507 380 568 623 246 797 24 160 125 194 733 599 910 477 400 685 185 653 995 808 709 109 659 972 867 147 575 276 198 711 984 57 91 553 680 689 702 56 849 828 602 935 779 865 412 179 550 598 185 897 758 894 6\n\nSorted array:  6 24 51 56 56 57 58 91 99 109 121 125 135 136 147 160 170 179 182 185 185 194 198 229 229 246 276 300 309 328 339 356 364 380 392 400 400 406 412 452 456 477 507 533 550 553 561 568 573 575 598 599 602 602 612 622 623 644 650 653 659 680 685 689 702 703 708 709 711 733 758 762 764 775 779 797 801 802 808 828 849 851 856 860 865 866 867 892 894 897 901 910 911 914 915 932 935 972 984 995\n\n\nArray is sorted\nACC\nTime: 1.26239\n\nSize of the array is 100\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 6337986, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-2Jsa66biOg4/AAAAAAAAAAI/AAAAAAAAIEM/g2clExXOgyg/photo.jpg?sz=128", "display_name": "Pragya Sharma", "link": "https://stackoverflow.com/users/6337986/pragya-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 282, "favorite_count": 0, "accepted_answer_id": 43771576, "answer_count": 1, "score": 0, "last_activity_date": 1493854200, "creation_date": 1492629302, "last_edit_date": 1493808485, "question_id": 43504239, "link": "https://stackoverflow.com/questions/43504239/floating-point-exception-in-openacc-merge-sort-program", "title": "Floating point exception in OpenAcc Merge Sort program", "body": "<pre><code>#include&lt;stdlib.h&gt;\n#include&lt;stdio.h&gt;\n#include &lt;time.h&gt;\n#include &lt;omp.h&gt;\n#include &lt;openacc.h&gt;\n#define THR 10\n\n\n//Function to test if the output is in asending order or not\nvoid test(int a[], int n) {\nint i;\nfor (i=1;i&lt;n;++i) {\nif (a[i]&lt;a[i-1]) {\n  break;\n}\n}\nif (i&lt;n) { \nfor (i=1;i&lt;n;++i) {  \n   if (a[i]&gt;a[i-1]){\n      break;\n   }\n }\nif (i&lt;n) {\n  printf(\"\\nArray is not sorted\\n\");\n}\n}\nelse {\nprintf(\"\\nArray is sorted\\n\");\n}\n}\n\n /* Function to sort an array using insertion sort in serial*/\nvoid isort (int *array, int low, int mid, int high) {\n\nfor (int i = mid; i &lt;= high; i++) {\n    for (int j = i - 1; j &gt;= 0; j--) {\n        if (array[i] &lt; array [j]) {\n            int holder = array[j];\n            array[j] = array[i];\n            array[i] = holder;\n            i--;\n        }\n    }\n }\n }\n/* Function to merge */\nvoid merge(int arr[], int l, int m, int r);\n\n// Utility function to find minimum of two integers\n#pragma acc routine seq\nint min(int x, int y) { return (x&lt;y)? x :y; }\n\n/* Iterative mergesort function to sort arr[0...n-1] */\nvoid mergeSort(int arr[], int n)\n{\nint curr_size;  // For current size of subarrays to be merged\n               // curr_size varies from 1 to n/2\nint left_start; // For picking starting index of left subarray\n               // to be merged\n#pragma acc kernels //pcopy(arr[0:n1])// pcopying (R[0:n2])\n      { \n #pragma acc loop independent\n  for (curr_size=1; curr_size&lt;=n-1; curr_size = 2*curr_size)\n {\n  #pragma acc loop independent\n   // Pick starting point of different subarrays of current size\n   for (left_start=0; left_start&lt;n-1; left_start += 2*curr_size)\n   {\n       // Find ending point of left subarray. mid+1 is starting \n       // point of right\n       int mid = left_start + curr_size - 1;\n\n       int right_end = min(left_start + 2*curr_size - 1, n-1);\n\n       // Merge Subarrays arr[left_start...mid] &amp; arr[mid+1...right_end]\n       merge(arr, left_start, mid, right_end);\n   }\n }\n}}\n\n/* Function to merge the two haves arr[l..m] and arr[m+1..r] of array arr[] \n*/\n #pragma acc routine vector\n void merge(int arr[], int l, int m, int r)\n{\nint i, j, k;\nint n1 = m - l + 1;\nint n2 =  r - m;\n\n/* create temp arrays */\nint *L, *R;\n L = (int *)malloc(sizeof(int) * n1); \n R = (int *)malloc(sizeof(int) * n2);     \n/* Copy data to temp arrays L[] and R[] */\n #pragma acc loop independent \nfor (i = 0; i &lt; n1; i++)\n    L[i] = arr[l + i];\n #pragma acc loop independent \nfor (j = 0; j &lt; n2; j++)\n    R[j] = arr[m + 1+ j];\n\n/* Merge the temp arrays back into arr[l..r]*/\ni = 0;\nj = 0;\nk = l;\n\n#pragma acc loop independent private(k) reduction(+:j) private (L[0:n1]) private (R[0:n1]) private (arr[0:n1])reduction(+:i)\n      //  private(k) reduction(+:j)\nwhile (i &lt; n1 &amp;&amp; j &lt; n2)\n{\n    if (L[i] &lt;= R[j])\n    {\n        arr[k] = L[i];\n        i++;\n    }\n    else\n    {\n        arr[k] = R[j];\n        j++;\n    }\n    k++;\n}\n\n/* Copy the remaining elements of L[], if there are any */\n\n#pragma acc loop seq private (arr[0:n2]) \nwhile (i &lt; n1)\n{\n    arr[k] = L[i];\n    i++;\n    k++;\n}\n\n/* Copy the remaining elements of R[], if there are any */\n#pragma acc loop seq private (arr[0:n2]) \nwhile (j &lt; n2)\n{\n    arr[k] = R[j];\n    j++;\n    k++;\n}\nfree(L);\nfree(R);\n}\n\n\n/* Function to print an array */\nvoid printArray(int A[], int size)\n{\nint i;\nfor (i=0; i &lt; size; i++)\n    printf(\"%d \", A[i]);\nprintf(\"\\n\");\n}\n\n/* Driver program to test above functions */\nint main()\n {\n int i, n=20, *a;\n double startTime, endTime;\n\n printf(\"How many elements in the array? \");\n\n a = (int *)malloc(sizeof(int) * n);        \n srand(time(0));\n for(i=0;i&lt;n;i++)\n       {\n         a[i]=rand()%1000;\n       }    \n printf(\"List Before Sorting...\\n\");\n printArray(a, n);\n if (n&lt;=THR) \n {\n startTime = omp_get_wtime();\n isort(a,0,0,n); \n endTime = omp_get_wtime();\n printf(\"\\nSorted array:  \");\n printArray(a,n);\n printf(\"\\n\");\n test(a,n);\n printf(\"IN\");\n printf(\"\\nTime: %g\\n\",endTime-startTime);\n exit(0);\n }       \n\n else \n {\n startTime = omp_get_wtime();\n mergeSort(a,n); \n endTime = omp_get_wtime();\n printf(\"\\nSorted array:  \");\n printArray(a,n);\n printf(\"\\n\");\n test(a,n);\n printf(\"ACC\");\n printf(\"\\nTime: %g\\n\",endTime-startTime);\n printf(\"\\nSize of the array is %d\",n);\n\n exit(0);\n }      \n }\n</code></pre>\n\n<p>After reading plenty of articles in PGI forum and help of @MAT from stackoverflow, I managed to resolve most of the errors and now I am using iterative Merge Sort instead of recursive as I found that OpenAcc doesn't work well with recursive functions. Now, I have only one error remaining this is in merge function:-</p>\n\n<p>109, Loop without integer trip count will be executed in sequential mode</p>\n\n<p>And I read <a href=\"http://www.pgroup.com/userforum/viewtopic.php?p=17748&amp;sid=0aa1537bdc68fc1f6fac74f66a788970\" rel=\"nofollow noreferrer\">http://www.pgroup.com/userforum/viewtopic.php?p=17748&amp;sid=0aa1537bdc68fc1f6fac74f66a788970</a> also but can't get certain idea to use it in my program. Because of this error, my result is:-</p>\n\n<p>How many elements in the array? List Before Sorting...\n801 673 288 374 516 908 473 130 874 928 491 406 276 302 186 442 865 341 624 725\nFloating point exception</p>\n\n<p>It's saying floating point exception even when I am using integers in my program.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1492629312, "post_id": 43504178, "comment_id": 74062948, "body": "<code>const</code> does not imply read-only. C has no symbolic constants other than <code>enum</code>-constants."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1492629358, "post_id": 43504178, "comment_id": 74062984, "body": "copying your constant in an auto-variable shortens its life if you use the return variable! assign to a pointer works."}], "answers": [{"comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1492629715, "post_id": 43504313, "comment_id": 74063179, "body": "<a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.4.5p5\" rel=\"nofollow noreferrer\">Where is it?</a>"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1492630107, "post_id": 43504313, "comment_id": 74063405, "body": "@eugene: fixed the typo (it&#39;s in para 6) and added the link. Thanks for the html."}], "tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": false, "score": 1, "last_activity_date": 1492630062, "last_edit_date": 1492630062, "creation_date": 1492629565, "answer_id": 43504313, "question_id": 43504178, "link": "https://stackoverflow.com/questions/43504178/what-is-the-lifespan-of-string-literals-in-c/43504313#43504313", "title": "What is the lifespan of string literals in C?", "body": "<p>String literals have static storage duration (i.e. their lifetime is the execution time of the program).</p>\n\n<p>See <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.4.5p6\" rel=\"nofollow noreferrer\">&sect;6.4.5/6</a> of the C standard.</p>\n"}], "owner": {"reputation": 877, "user_id": 425713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32a400282b5d55c48fef215c1d8793a3?s=128&d=identicon&r=PG", "display_name": "fagricipni", "link": "https://stackoverflow.com/users/425713/fagricipni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 0, "closed_date": 1492629792, "answer_count": 1, "score": 0, "last_activity_date": 1492630062, "creation_date": 1492629078, "question_id": 43504178, "link": "https://stackoverflow.com/questions/43504178/what-is-the-lifespan-of-string-literals-in-c", "closed_reason": "Duplicate", "title": "What is the lifespan of string literals in C?", "body": "<p>What is the lifespan of the string literals <code>\"zero\"</code> and <code>\"non-zero\"</code> in the following program?</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\nconst char* tester(int inp)\n{\n    const char *retval=NULL;\n\n    if (inp==0)\n        retval=\"zero\";\n    else\n        retval=\"non-zero\";\n\n    return retval;\n}\n\nint main()\n{\n    const char *outval=NULL;\n\n    outval=tester(0);\n    printf(\"0 is %s\\n\",outval);\n    outval=tester(1);\n    printf(\"1 is %s\\n\",outval);\n\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>I know from <a href=\"http://c-faq.com/decl/strlitinit.html\" rel=\"nofollow noreferrer\">this question in the C FAQ list</a> that <code>\"zero\"</code> and <code>\"non-zero\"</code> are (or at least are allowed to be) read-only.  I assume that is why I had to put in the <code>const</code>s before the <code>char*</code> declarations to stop the compiler's warnings about \"... discards 'const' qualifier ...\".  But while the program gives the expected result of</p>\n\n<blockquote>\n  <p>0 is zero</p>\n  \n  <p>1 is non-zero</p>\n</blockquote>\n\n<p>I also know that <code>tester</code> can not be defined as:</p>\n\n<pre><code>char* tester(int inp)\n{\n    char retval[9];\n\n    if (inp==0)\n        strcpy(retval,\"zero\");\n    else\n        strcpy(retval,\"non-zero\");\n\n    return retval;\n}\n</code></pre>\n\n<p>because the array <code>retval</code> must be assumed to be disposed of when <code>tester</code> exits.  </p>\n\n<p>So can I do what I have done in the original code or must I use <code>malloc</code>?</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 4, "creation_date": 1492628592, "post_id": 43504035, "comment_id": 74062526, "body": "Why do you think it should be <code>0.8</code>?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1492628718, "post_id": 43504035, "comment_id": 74062597, "body": "I&#39;d say that it converges to infinity since you&#39;re performing a square 100 times. not really surprising."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1492629108, "post_id": 43504035, "comment_id": 74062830, "body": "I suggest you put the <code>printf</code> inside the loop then you will see the value &quot;escape&quot; at the 23rd iteration. This kind of investigative approach will pay off ... infinitely on the road ahead."}, {"owner": {"reputation": 43, "user_id": 7870951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9546097abfb9df4f36862d6fb05d6756?s=128&d=identicon&r=PG&f=1", "display_name": "vishal_ag", "link": "https://stackoverflow.com/users/7870951/vishal-ag"}, "edited": false, "score": 0, "creation_date": 1492629311, "post_id": 43504035, "comment_id": 74062947, "body": "I think it should be 0.8 because for every iteration, I am getting the value of x as 0.8. and if you look at the number(every time), its not growing. Also if you run this loop for 5 times only, still it is showing run time error with the output value not equal to 0.8."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1492629397, "post_id": 43504035, "comment_id": 74062996, "body": "You are accumulating errors in representation. Please read <a href=\"http://stackoverflow.com/questions/588004/is-floating-point-math-broken\">Is floating point math broken?</a> The value <code>0.8</code> cannot be exactly represented by <code>float</code>."}, {"owner": {"reputation": 43, "user_id": 7870951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9546097abfb9df4f36862d6fb05d6756?s=128&d=identicon&r=PG&f=1", "display_name": "vishal_ag", "link": "https://stackoverflow.com/users/7870951/vishal-ag"}, "edited": false, "score": 0, "creation_date": 1492630658, "post_id": 43504035, "comment_id": 74063756, "body": "so #weather Vanes, I got your point but tell me one thing, if I am doing any basic operation with the no. 0.8, system is not storing the value same all the time. Sometimes its taking 0.799996 and sometime 0.800103. But if I print this floating point value without any operation (simply I am printing x in my code) 100 or 1000 times then its value is never changing. Every time it is giving output 0.8 only. Why?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1492632568, "post_id": 43504035, "comment_id": 74064940, "body": "<code>printf</code> rounds the value it is given, and is using the default 6 decimal places, and so the error in encoding <code>0.8</code> is not noticeable when printed; and that error is repeatable, not random. I understand why you expect <code>x = 0.8 * 0.2 * 5.0</code> to be <code>0.8</code>. But when you make further calculations, the processor uses the inaccurate representation, does not work on exactly <code>0.8</code> so the error gets increasingly worse until the value finally shoots off to infinity. BTW if you want to flag a commenter the style is @WeatherVane."}, {"owner": {"reputation": 3319, "user_id": 1886765, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73af3c058967ab01b4599c1a8f72306f?s=128&d=identicon&r=PG", "display_name": "Pharaoh", "link": "https://stackoverflow.com/users/1886765/pharaoh"}, "edited": false, "score": 3, "creation_date": 1492636759, "post_id": 43504035, "comment_id": 74067246, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/588004/is-floating-point-math-broken\">Is floating point math broken?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 7870951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9546097abfb9df4f36862d6fb05d6756?s=128&d=identicon&r=PG&f=1", "display_name": "vishal_ag", "link": "https://stackoverflow.com/users/7870951/vishal-ag"}, "edited": false, "score": 0, "creation_date": 1492629976, "post_id": 43504129, "comment_id": 74063342, "body": "okey. I am not going to the values now. If I iterate this code for 5 times only, still it is showing run time error. why? [link] (<a href=\"https://ideone.com/shXVur\" rel=\"nofollow noreferrer\">ideone.com/shXVur</a>)"}, {"owner": {"reputation": 374, "user_id": 5062253, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-XOsdVz2hsMk/AAAAAAAAAAI/AAAAAAAAAGk/tRIFxkYOADw/photo.jpg?sz=128", "display_name": "Pablo Escobar", "link": "https://stackoverflow.com/users/5062253/pablo-escobar"}, "reply_to_user": {"reputation": 43, "user_id": 7870951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9546097abfb9df4f36862d6fb05d6756?s=128&d=identicon&r=PG&f=1", "display_name": "vishal_ag", "link": "https://stackoverflow.com/users/7870951/vishal-ag"}, "edited": false, "score": 0, "creation_date": 1492630409, "post_id": 43504129, "comment_id": 74063594, "body": "@vishal_ag the code works fine and output is coming correctly, this is error given by online IDEs so ignore. Try to run code in your system."}], "tags": [], "owner": {"reputation": 374, "user_id": 5062253, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-XOsdVz2hsMk/AAAAAAAAAAI/AAAAAAAAAGk/tRIFxkYOADw/photo.jpg?sz=128", "display_name": "Pablo Escobar", "link": "https://stackoverflow.com/users/5062253/pablo-escobar"}, "is_accepted": true, "score": 3, "last_activity_date": 1492628917, "creation_date": 1492628917, "answer_id": 43504129, "question_id": 43504035, "link": "https://stackoverflow.com/questions/43504035/what-is-the-output-for-this-program/43504129#43504129", "title": "what is the output for this program?", "body": "<p>It means minus infinity.</p>\n\n<blockquote>\n  <p>EEE 754 floating point numbers can represent positive or negative infinity, and NaN (not a number). These three values arise from calculations whose result is undefined or cannot be represented accurately. You can also deliberately set a floating-point variable to any of them, which is sometimes useful. Some examples of calculations that produce infinity or NaN:</p>\n</blockquote>\n\n<p>This is output of you're code</p>\n\n<pre><code>0.800000 \n0.800000 \n0.800000 \n0.800001 \n0.799996 \n0.800011 \n0.799966 \n0.800103 \n0.799692 \n0.800923 \n0.797227 \n0.808280 \n0.774816 \n0.872380 \n0.556664 \n1.233946 \n-1.443383 \n-17.633698 \n-1642.905029 \n-13503899.000000 \n-911776526893056.000000 \n-4156682286578109086379962007552.000000 \n-inf \nafter this -inf -inf\n</code></pre>\n\n<p>because the value is out of range of flat</p>\n"}, {"tags": [], "owner": {"reputation": 311, "user_id": 6019827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sMsg3.jpg?s=128&g=1", "display_name": "Frapto", "link": "https://stackoverflow.com/users/6019827/frapto"}, "is_accepted": false, "score": 2, "last_activity_date": 1492629174, "creation_date": 1492629174, "answer_id": 43504200, "question_id": 43504035, "link": "https://stackoverflow.com/questions/43504035/what-is-the-output-for-this-program/43504200#43504200", "title": "what is the output for this program?", "body": "<p>floating point error: try taking the loop from 0 to 24 and see the output,\nYou get around 0.800018 , that changes the 1-x part which becomes a negative answer (around 40sh loop) so at 100th it is a very low negative number that it is basically -inf.</p>\n\n<p>It basically happens because x=0.8; is not 0.8 sharp but a very close number to 0.8, with loops the number grows until it affects the calculations.</p>\n\n<p>There are lots of solutions -one way is to round x every time-, just search google :)</p>\n"}], "owner": {"reputation": 43, "user_id": 7870951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9546097abfb9df4f36862d6fb05d6756?s=128&d=identicon&r=PG&f=1", "display_name": "vishal_ag", "link": "https://stackoverflow.com/users/7870951/vishal-ag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 43504129, "answer_count": 2, "score": -5, "last_activity_date": 1492629174, "creation_date": 1492628540, "last_edit_date": 1492628617, "question_id": 43504035, "link": "https://stackoverflow.com/questions/43504035/what-is-the-output-for-this-program", "title": "what is the output for this program?", "body": "<pre><code>#include&lt;stdio.h&gt;\nvoid main()\n{\n    int i;\n    float x=0.8;\n    for(i=0; i&lt;100; i++)\n    x=x*(1-x)*5;\n    printf(\"%f \\n\",x);\n}\n</code></pre>\n\n<p>According to me, it looks quite simple with answer <strong>0.80000000</strong> but the real answer is something else. Its getting run time error with the output value <strong>\"-inf\"</strong>. Why? </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1492627542, "post_id": 43503750, "comment_id": 74061925, "body": "The c++ tag is for c++ questions, which this is not."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1492627576, "post_id": 43503750, "comment_id": 74061944, "body": "Post the definition of <code>st</code>."}, {"owner": {"reputation": 7070, "user_id": 1087848, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7c09991a02e7ffa559c69d159231b07a?s=128&d=identicon&r=PG", "display_name": "11684", "link": "https://stackoverflow.com/users/1087848/11684"}, "edited": false, "score": 0, "creation_date": 1492628060, "post_id": 43503750, "comment_id": 74062227, "body": "Why is this tagged <a href=\"https://stackoverflow.com/questions/tagged/objective-c\">objective-c</a>?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1492628689, "post_id": 43503750, "comment_id": 74062579, "body": "Why is <code>st.name</code> apparently only 5 characters max, but the input not restricted?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1492631431, "post_id": 43503750, "comment_id": 74064266, "body": "Aside: it is a good idea to print the results after <i>all</i> the inputs have been entered, not after each. Then you can see if one has corrupted another, which would be the case if the user enters a name longer than 14 letters. I suggest you read the man page for <code>scanf</code> to see how you restrict string entry length, and what the function&#39;s return value means: which is always essential to check. You should also consider what will happen if the name contains a space, for example &quot;Peggy Sue&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "is_accepted": false, "score": 0, "last_activity_date": 1492627896, "creation_date": 1492627896, "answer_id": 43503866, "question_id": 43503750, "link": "https://stackoverflow.com/questions/43503750/validate-input-fields-in-c-programming/43503866#43503866", "title": "Validate input fields in C programming", "body": "<p>Try <code>fgets</code> and <code>sscanf</code></p>\n\n<pre><code>char buffer[1000];\nchar name[6];\nint age;\nfgets(buffer, sizeof buffer, stdin); /* needs error checking */\nif (sscanf(buffer, \"%5s%d\", name, &amp;age) != 2) /* error */;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 374, "user_id": 5062253, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-XOsdVz2hsMk/AAAAAAAAAAI/AAAAAAAAAGk/tRIFxkYOADw/photo.jpg?sz=128", "display_name": "Pablo Escobar", "link": "https://stackoverflow.com/users/5062253/pablo-escobar"}, "is_accepted": false, "score": 0, "last_activity_date": 1492628385, "creation_date": 1492628385, "answer_id": 43504006, "question_id": 43503750, "link": "https://stackoverflow.com/questions/43503750/validate-input-fields-in-c-programming/43504006#43504006", "title": "Validate input fields in C programming", "body": "<p>Assuming your name and age are char[] type this is how you can check</p>\n\n<pre><code>int flag=1;\n\n    for(i=0;i&lt;size&amp;&amp;flag==1;i++){//size is the length of n\n        if( isdigit(name[i]) )\n            flag=1;\n        else\n            flag=0;\n    }\nif(flag==1)\n   printf(\"Is an integer\");\nelse\n  printf(\"It has characters\");\n</code></pre>\n"}], "owner": {"reputation": 202, "user_id": 5696428, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/18c397eeb4e92faed6fc463c332732a1?s=128&d=identicon&r=PG&f=1", "display_name": "Muli", "link": "https://stackoverflow.com/users/5696428/muli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 131, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1492630975, "creation_date": 1492627448, "last_edit_date": 1492630975, "question_id": 43503750, "link": "https://stackoverflow.com/questions/43503750/validate-input-fields-in-c-programming", "title": "Validate input fields in C programming", "body": "<p>I want to validate my fields that I type, and display an error.\nthis is my code in C:</p>\n\n<pre><code>struct student\n{\n    char name[15];\n    char age[3];\n};\n\nstruct student st;\n\n\nprintf(\"enter your name: \");\nscanf(\"%s\", st.name);\nfprintf(ptrShkrues, \"%5s\", st.name);\n\nprintf(\"enter your age: \");\nscanf(\"%s\", st.age);\nfprintf(ptrShkrues, \"%5s\", st.age);\n</code></pre>\n\n<p>So I need to check if its a char or int and display a printf. Is it better to save my age in <code>INT</code> is better ? and how to validate it too ?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 3612, "user_id": 1813336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zONI.jpg?s=128&g=1", "display_name": "cleblanc", "link": "https://stackoverflow.com/users/1813336/cleblanc"}, "edited": false, "score": 0, "creation_date": 1492627484, "post_id": 43503729, "comment_id": 74061884, "body": "Do you also have a function called <code>validatekArgs</code> defined somewhere, or is it just <code>validateArgs</code>"}, {"owner": {"reputation": 96748, "user_id": 74757, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/10331bb0b4eb995500acc85fb0d16aea?s=128&d=identicon&r=PG", "display_name": "C\u1d0f\u0280\u028f", "link": "https://stackoverflow.com/users/74757/c%e1%b4%8f%ca%80%ca%8f"}, "edited": false, "score": 0, "creation_date": 1492627490, "post_id": 43503729, "comment_id": 74061889, "body": "Your method name is defined as <code>validateArgs</code>, but you call it as <code>validatekArgs</code> later (notice the extrac &quot;k&quot;)."}, {"owner": {"reputation": 179, "user_id": 4790874, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/1ed4a493c4440af5ec1b1195d484eaa9?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel D", "link": "https://stackoverflow.com/users/4790874/daniel-d"}, "reply_to_user": {"reputation": 3612, "user_id": 1813336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zONI.jpg?s=128&g=1", "display_name": "cleblanc", "link": "https://stackoverflow.com/users/1813336/cleblanc"}, "edited": false, "score": 0, "creation_date": 1492627793, "post_id": 43503729, "comment_id": 74062065, "body": "@cleblanc Even with that fixed, same error, besides it would have given me a different error, so it doesn&#39;t seem like that&#39;s the issue."}, {"owner": {"reputation": 179, "user_id": 4790874, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/1ed4a493c4440af5ec1b1195d484eaa9?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel D", "link": "https://stackoverflow.com/users/4790874/daniel-d"}, "reply_to_user": {"reputation": 96748, "user_id": 74757, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/10331bb0b4eb995500acc85fb0d16aea?s=128&d=identicon&r=PG", "display_name": "C\u1d0f\u0280\u028f", "link": "https://stackoverflow.com/users/74757/c%e1%b4%8f%ca%80%ca%8f"}, "edited": false, "score": 0, "creation_date": 1492627817, "post_id": 43503729, "comment_id": 74062074, "body": "@C\u1d0f\u0280\u028f See above comment."}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 2, "creation_date": 1492627977, "post_id": 43503729, "comment_id": 74062183, "body": "<code>int validateArgs(int MIN_INPUT, int MAX_INPUT, int argc)</code> expands to <code>int validateArgs(int 0, int 9, int argc)</code> with those <code>#define</code>s... are <code>0</code> or <code>9</code> valid parameter names?"}, {"owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "edited": false, "score": 0, "creation_date": 1492628166, "post_id": 43503729, "comment_id": 74062287, "body": "<b><i>&quot;This question was caused by a simple typographical error.&quot;</i></b> -  Voting to close"}], "answers": [{"tags": [], "owner": {"reputation": 173, "user_id": 6705350, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RfMCA.jpg?s=128&g=1", "display_name": "staa99", "link": "https://stackoverflow.com/users/6705350/staa99"}, "is_accepted": false, "score": -2, "last_activity_date": 1508745363, "last_edit_date": 1508745363, "creation_date": 1492628001, "answer_id": 43503893, "question_id": 43503729, "link": "https://stackoverflow.com/questions/43503729/expected-or-before-numeric-constant-this-is-weird/43503893#43503893", "title": "Expected \u2018;\u2019, \u2018,\u2019 or \u2018)\u2019 before numeric constant? This is weird", "body": "<p>Your validate args method is ok except for the return type. Change to boolean/bool or whatever is used to represent true/false values in C.</p>\n\n<p>I'm sorry but I am a java dev.</p>\n\n<pre><code>boolean validateArgs(int MIN_INPUT, int MAX_INPUT, int argc)\n{\n    if ((argc &lt; MIN_INPUT) || (argc &gt; MAX_INPUT))\n    {\n        printf(\"%s\\n\", \"Input must be between 1 and 7, inclusive, digits.\");\n        return FALSE;\n    }\n    return TRUE;\n}\n</code></pre>\n\n<p>Hope your problem was solved.</p>\n\n<p><strong>EDIT:</strong> I did not know MIN_INPUT is a declared constant. And probably, I also didn't really understand the question. Sorry.</p>\n"}, {"comments": [{"owner": {"reputation": 179, "user_id": 4790874, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/1ed4a493c4440af5ec1b1195d484eaa9?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel D", "link": "https://stackoverflow.com/users/4790874/daniel-d"}, "edited": false, "score": 0, "creation_date": 1492628333, "post_id": 43503894, "comment_id": 74062385, "body": "You&#39;re right, I&#39;ve made those local variables and just stored the constants into the local variables and now it works, thanks."}, {"owner": {"reputation": 2324, "user_id": 5334131, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JU6Bo.jpg?s=128&g=1", "display_name": "Hellmar Becker", "link": "https://stackoverflow.com/users/5334131/hellmar-becker"}, "reply_to_user": {"reputation": 179, "user_id": 4790874, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/1ed4a493c4440af5ec1b1195d484eaa9?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel D", "link": "https://stackoverflow.com/users/4790874/daniel-d"}, "edited": false, "score": 0, "creation_date": 1492650594, "post_id": 43503894, "comment_id": 74071553, "body": "I believe you might still be confusing local variables and formal parameters."}], "tags": [], "owner": {"reputation": 2324, "user_id": 5334131, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JU6Bo.jpg?s=128&g=1", "display_name": "Hellmar Becker", "link": "https://stackoverflow.com/users/5334131/hellmar-becker"}, "is_accepted": true, "score": 3, "last_activity_date": 1492628002, "creation_date": 1492628002, "answer_id": 43503894, "question_id": 43503729, "link": "https://stackoverflow.com/questions/43503729/expected-or-before-numeric-constant-this-is-weird/43503894#43503894", "title": "Expected \u2018;\u2019, \u2018,\u2019 or \u2018)\u2019 before numeric constant? This is weird", "body": "<p>Your line</p>\n\n<pre><code>int validateArgs(int MIN_INPUT, int MAX_INPUT, int argc)\n</code></pre>\n\n<p>translates as</p>\n\n<pre><code>int validateArgs(int 0, int 9, int argc)\n</code></pre>\n\n<p>because of your constant definitions. That is not correct C syntax and probably not what you want.</p>\n"}], "owner": {"reputation": 179, "user_id": 4790874, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/1ed4a493c4440af5ec1b1195d484eaa9?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel D", "link": "https://stackoverflow.com/users/4790874/daniel-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 297, "favorite_count": 0, "accepted_answer_id": 43503894, "answer_count": 2, "score": -3, "last_activity_date": 1508745363, "creation_date": 1492627390, "last_edit_date": 1492628410, "question_id": 43503729, "link": "https://stackoverflow.com/questions/43503729/expected-or-before-numeric-constant-this-is-weird", "title": "Expected \u2018;\u2019, \u2018,\u2019 or \u2018)\u2019 before numeric constant? This is weird", "body": "<p>I am running into a really weird error. Commenting out the below pieces of code lets my program run. Keeping it in, gives me the error.</p>\n\n<p>In my functions .c file:</p>\n\n<pre><code>int validateArgs(int MIN_INPUT, int MAX_INPUT, int argc)\n{\n    if ((argc &lt; MIN_INPUT) || (argc &gt; MAX_INPUT))\n    {\n        printf(\"Wrong input.\");\n        return FALSE;\n    }\n    return TRUE;\n}\n</code></pre>\n\n<p>I have all constants in a header file.</p>\n\n<p>Constants are 0 and 9.</p>\n"}, {"tags": ["c", "function-pointers", "wdk", "rootkit"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 3387560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b7f60f2b077503d9bb4858b9fe728ab?s=128&d=identicon&r=PG&f=1", "display_name": "Prince", "link": "https://stackoverflow.com/users/3387560/prince"}, "edited": false, "score": 0, "creation_date": 1493635153, "post_id": 43689809, "comment_id": 74478725, "body": "firsty, thank you so, so much!! You&#39;ve saved me a lot of time!! You&#39;re right! I&#39;ve actually hooked NtOpenFile and so parameters aren&#39;t checked! I&#39;ve fixed the synchronize problem, so now I&#39;m calling: <code>ZwOpenFile(&amp;handle, SYNCHRONIZE, &amp;objAttr, &amp;ioStatusBlock, FILE_SHARE_READ | FILE_SHARE_WRITE, FILE_SYNCHRONOUS_IO_ALERT);</code>   Now I&#39;m getting a different error (which is good as it means I&#39;m moving forward), I&#39;m getting STATUS_ACCESS_VIOLATION. Do you have any idea why this might be happening?   I added null terminators to my Unicode strings by adding a &#39;\\0&#39; to the end."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 23, "user_id": 3387560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b7f60f2b077503d9bb4858b9fe728ab?s=128&d=identicon&r=PG&f=1", "display_name": "Prince", "link": "https://stackoverflow.com/users/3387560/prince"}, "edited": false, "score": 0, "creation_date": 1493637377, "post_id": 43689809, "comment_id": 74479616, "body": "@Prince - of course you must get <code>STATUS_ACCESS_VIOLATION</code> because you call <b>not</b> <code>ZwOpenFile</code> <b>but</b> <code>NtOpenFile</code> and <a href=\"https://msdn.microsoft.com/en-us/library/windows/hardware/ff559860(v=vs.85).aspx\" rel=\"nofollow noreferrer\"><b>PreviousMode</b></a> - is <b>UserMode</b>. from another side say <code>&amp;ioStatusBlock</code> in your stack - so kernel address. as result when parameters checked - <code>If the buffer was allocated in system memory instead of in user-mode memory, the ProbeForXxx routine raises an exception, and the NtXxx routine returns the STATUS_ACCESS_VIOLATION error code.</code> - this is very basic things.."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 23, "user_id": 3387560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b7f60f2b077503d9bb4858b9fe728ab?s=128&d=identicon&r=PG&f=1", "display_name": "Prince", "link": "https://stackoverflow.com/users/3387560/prince"}, "edited": false, "score": 0, "creation_date": 1493643767, "post_id": 43689809, "comment_id": 74482369, "body": "@Prince are you understand PreviousMode ? look like you full novice in kernel. way call Zw* functions when you use kernel mode addresses and somehow determinate recursive  calls (that you already call Zw*) or allocate user mode buffers. and finally hook SSDT is wrong and not actual more than 10 years already"}], "tags": [], "owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "is_accepted": false, "score": 0, "last_activity_date": 1493419283, "creation_date": 1493419283, "answer_id": 43689809, "question_id": 43502316, "link": "https://stackoverflow.com/questions/43502316/windows-driver-rootkit-development-function-pointer-status-invalid-parameter/43689809#43689809", "title": "Windows Driver/Rootkit Development - function pointer - STATUS_INVALID_PARAMETER", "body": "<p>at first you call not <code>ZwOpenFile</code> but <code>NtOpenFile</code>. at second when you call <code>ZwOpenFile</code> from kernel <em>PreviousMode</em> is kernel mode and <code>IopCreateFile</code> not check parameters (kernel trust for kernel). when you call <code>NtOpenFile</code> <em>PreviousMode</em> can be user mode and parameters is checked. and you use invalid parameters in call <code>NtOpenFile</code> - you use <code>FILE_SYNCHRONOUS_IO_ALERT</code> option but not ask for <code>SYNCHRONIZE</code> in desired access. so you and must got <code>STATUS_INVALID_PARAMETER</code>. </p>\n"}], "owner": {"reputation": 23, "user_id": 3387560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b7f60f2b077503d9bb4858b9fe728ab?s=128&d=identicon&r=PG&f=1", "display_name": "Prince", "link": "https://stackoverflow.com/users/3387560/prince"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 402, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1493419283, "creation_date": 1492622704, "question_id": 43502316, "link": "https://stackoverflow.com/questions/43502316/windows-driver-rootkit-development-function-pointer-status-invalid-parameter", "title": "Windows Driver/Rootkit Development - function pointer - STATUS_INVALID_PARAMETER", "body": "<p>This is quite a difficult problem to explain online, but I can't figure out what's going on and I really need help, so here goes! </p>\n\n<p>Basically, I have written a security software (as a kernel driver) that will eventually hook every method in the SSDT (System Service Descriptor Table) for Windows XP - 32 bit. Everytime a system call is made, I log it in a file.</p>\n\n<p>My issue arose when I hooked ZwOpenFile because that is a system call that MY code also makes to open the log file to write to it. So I got a Kernel stack overflow error because something would call ZwOpenFile, then I would try log it, my logger (which is part of my driver) would then call ZwOpenFile which would then call ZwOpenFile and so on and so forth until I had filled up the Stack enough to cause a blue screen of death. </p>\n\n<p>In order to get around this, I decided, that everytime the logger function is called, it will also be supplied with a pointer to the old, unhooked, ZwOpenFile function so it could call that directly rather than go through my hooked function and create a recursive mess. However, when the logger calls the ZwOpenFile function pointer that it is supplied with as a parameter, it gets a STATUS_INVALID_PARAMETER error. If the ZwOpenFile is called directly (as opposed to through the pointer) it works perfectly! But when the pointer to what should be the same function with the SAME parameters is called, it throws the STATUS_INVALID_PARAMETER error code! However, the pointer must be pointing to the correct function as otherwise it wouldn't throw this Windows error message. Here's small and (hopefully) digestible snippets of my code to make more sense:</p>\n\n<pre><code>*mydriver.h*\n    #define UNICODE\n    #define _UNICODE\n    #include &lt;ntddk.h&gt;\n    #include &lt;ntstrsafe.h&gt;\n\n    #define OPEN_FILE_INDEX 0x74\n\n    NTSTATUS newZwOpenFile(\n        PHANDLE FileHandle, \n        ACCESS_MASK DesiredAccess, \n        POBJECT_ATTRIBUTES ObjectAttributes, \n        PIO_STATUS_BLOCK IoStatusBlock, \n        ULONG ShareAccess, \n        ULONG OpenOptions);\n\n    typedef NTSTATUS (*ZwOpenFilePtr)(\n        PHANDLE FileHandle, \n        ACCESS_MASK DesiredAccess, \n        POBJECT_ATTRIBUTES ObjectAttributes, \n        PIO_STATUS_BLOCK IoStatusBlock, \n        ULONG ShareAccess, \n        ULONG OpenOptions);\n\n*mydriver.c*\n    #include \"mydriver.h\"\n    #include \"filehandling.c\"        \n\n    //global definition of pointer at top of mydriver.c file    \n    ZwOpenFilePtr oldZwOpenFile;\n\n    NTSTATUS DriverEntry(PDRIVER_OBJECT  pDriverObject, PUNICODE_STRING pRegistryPath){\n       ...\n       ...\n       //hooks the SSDT using the index of ZwOpenFile in the SSDT\n       oldZwOpenFile = (ZwOpenFilePtr)hookSSDTWithIndex(OPEN_FILE_INDEX, (BYTE*)newZwOpenFile, (DWORD*)systemCallTable);\n       ...\n       ...\n    }\n\n    //inside the method body of every hooked function, there is, at some point, the a call to the logger. \n    //This is shown in the context of newZwOpenFile\n    NTSTATUS newZwOpenFile(PHANDLE FileHandle, ACCESS_MASK DesiredAccess, POBJECT_ATTRIBUTES ObjectAttributes, PIO_STATUS_BLOCK IoStatusBlock, ULONG ShareAccess, ULONG OpenOptions){\n      ...         \n      driverWriteFile(&amp;uFullString, &amp;uProcess, *oldZwOpenFile);\n      ...\n    }\n\n*filehandling.c*\n    #include &lt;ntstrsafe.h&gt;\n\n    //the logger file\n    //the function doing the opening and writing\n    NTSTATUS driverWriteFile(PUNICODE_STRING stringToLog, PUNICODE_STRING filename, NTSTATUS (*fileOpenFunction)(PHANDLE,ACCESS_MASK,POBJECT_ATTRIBUTES,PIO_STATUS_BLOCK,ULONG,ULONG)) {\n      ...\n      //the failing call that returns c000000d\n      ntstatus = fileOpenFunction(&amp;handle, FILE_APPEND_DATA, &amp;objAttr, &amp;ioStatusBlock, FILE_SHARE_READ | FILE_SHARE_WRITE, FILE_SYNCHRONOUS_IO_NONALERT);\n      ...\n  }\n</code></pre>\n\n<p>What's more is, that, all the hooked functions are spewing out the c000000d error (using DbgPrint), but once or twice, it does somehow succeed... Any help or suggestions would be HUGELY appreciated!</p>\n"}, {"tags": ["c", "binary", "integer"], "answers": [{"tags": [], "owner": {"reputation": 15921, "user_id": 676558, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/PbWyu.png?s=128&g=1", "display_name": "Amin Negm-Awad", "link": "https://stackoverflow.com/users/676558/amin-negm-awad"}, "is_accepted": false, "score": 0, "last_activity_date": 1492626624, "creation_date": 1492626624, "answer_id": 43503502, "question_id": 43501553, "link": "https://stackoverflow.com/questions/43501553/objective-c-int-to-2s-complement-conversion/43503502#43503502", "title": "Objective C Int to 2&#39;s Complement Conversion", "body": "<p>A two's complement is a kind of representation of signed numbers, not a value or an operation. On nearly all modern computers two's complements are the standard representation of signed integers. (And it is one of three allowed representations of integers in the standard.)</p>\n\n<p>Therefore if you have any signed integral number, it <em>is</em> represented in two's complement. I think you want to have \"the\" two's complement of a positive number. This is simply the negative value, if your machine uses two's complements for signed numbers.</p>\n\n<pre><code>int positiveValue = 5; \nint twosComplement = -positiveValue;\n</code></pre>\n"}], "owner": {"reputation": 841, "user_id": 6758725, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/c0711065e1551351cfd88abe9a353289?s=128&d=identicon&r=PG&f=1", "display_name": "Faisal Syed", "link": "https://stackoverflow.com/users/6758725/faisal-syed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 194, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1492626791, "creation_date": 1492620303, "last_edit_date": 1492626791, "question_id": 43501553, "link": "https://stackoverflow.com/questions/43501553/objective-c-int-to-2s-complement-conversion", "title": "Objective C Int to 2&#39;s Complement Conversion", "body": "<p>I'm trying to convert my 16 bit integer to two's complement if it's negative. </p>\n\n<p>At the moment, I'm using the One's complement operator. I figure I can use that, and then add 1 to the binary value to convert it to two's complement. However, I'm unable to do x = ~a + 1 because that just yields the integer value + 1. </p>\n\n<p>If my process is correct, how can I add 1 to the binary integer? If not, what is the most appropriate way to convert a 16 bit integer to 2's complement in Objective-C?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1492619744, "post_id": 43501224, "comment_id": 74057035, "body": "Where are you checking it is largest?"}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 2, "creation_date": 1492620660, "post_id": 43501224, "comment_id": 74057629, "body": "580085 is the last number your program outputs, but not the biggest."}, {"owner": {"reputation": 31, "user_id": 7560256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7102402e3d20f17b0734bda9e12f769f?s=128&d=identicon&r=PG&f=1", "display_name": "JBird", "link": "https://stackoverflow.com/users/7560256/jbird"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1492620978, "post_id": 43501224, "comment_id": 74057846, "body": "as pointed out by @EugeneSh. I have updated program to check for largest palindrome"}, {"owner": {"reputation": 31, "user_id": 7560256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7102402e3d20f17b0734bda9e12f769f?s=128&d=identicon&r=PG&f=1", "display_name": "JBird", "link": "https://stackoverflow.com/users/7560256/jbird"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1492621156, "post_id": 43501224, "comment_id": 74057975, "body": "after the changes made for checking largest palindrome i was able to get the correct answer, thanks @EugeneSh."}, {"owner": {"reputation": 13033, "user_id": 4029014, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ndZhu.jpg?s=128&g=1", "display_name": "aghast", "link": "https://stackoverflow.com/users/4029014/aghast"}, "edited": false, "score": 0, "creation_date": 1492621161, "post_id": 43501224, "comment_id": 74057982, "body": "Not for nothing, but why are you counting up, rather than down?"}, {"owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "edited": false, "score": 0, "creation_date": 1492621266, "post_id": 43501224, "comment_id": 74058060, "body": "Your amended question gives the right answer now as the last line of output - I just compiled and ran it."}, {"owner": {"reputation": 31, "user_id": 7560256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7102402e3d20f17b0734bda9e12f769f?s=128&d=identicon&r=PG&f=1", "display_name": "JBird", "link": "https://stackoverflow.com/users/7560256/jbird"}, "reply_to_user": {"reputation": 13033, "user_id": 4029014, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ndZhu.jpg?s=128&g=1", "display_name": "aghast", "link": "https://stackoverflow.com/users/4029014/aghast"}, "edited": false, "score": 0, "creation_date": 1492621347, "post_id": 43501224, "comment_id": 74058113, "body": "@AustinHastings I&#39;m still learning, my aim was to solve the problem and not to write optimized code"}, {"owner": {"reputation": 31, "user_id": 7560256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7102402e3d20f17b0734bda9e12f769f?s=128&d=identicon&r=PG&f=1", "display_name": "JBird", "link": "https://stackoverflow.com/users/7560256/jbird"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1492621476, "post_id": 43501224, "comment_id": 74058194, "body": "@chux let me revert it back to original and post my own answer to accept it"}, {"owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "reply_to_user": {"reputation": 13033, "user_id": 4029014, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ndZhu.jpg?s=128&g=1", "display_name": "aghast", "link": "https://stackoverflow.com/users/4029014/aghast"}, "edited": false, "score": 0, "creation_date": 1492621526, "post_id": 43501224, "comment_id": 74058231, "body": "@AustinHastings It actually doesn&#39;t save much to count downwards. You have to introduce extra checks in each loop to make them terminate early and the program as written takes 0.08 seconds on my laptop at <code>-Onone</code>."}, {"owner": {"reputation": 31, "user_id": 7560256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7102402e3d20f17b0734bda9e12f769f?s=128&d=identicon&r=PG&f=1", "display_name": "JBird", "link": "https://stackoverflow.com/users/7560256/jbird"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1492621821, "post_id": 43501224, "comment_id": 74058422, "body": "@chux its not allowing me to accept the answer now and says I need to wait for two days, I will accept it after two days. Thanks everyone."}], "answers": [{"tags": [], "owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "is_accepted": false, "score": 1, "last_activity_date": 1492621214, "last_edit_date": 1492621214, "creation_date": 1492620711, "answer_id": 43501686, "question_id": 43501224, "link": "https://stackoverflow.com/questions/43501224/largest-palindrome-product-in-c/43501686#43501686", "title": "Largest palindrome product in c", "body": "<p>Your reverse algorithm works even though you could do it more efficiently.</p>\n\n<pre><code>int reverse_num(int num)\n{\n    int result = 0;\n    while (num &gt; 0)\n    {\n       int digit = num % 10;\n       result = result * 10 + digit;\n       num /= 10;\n    }\n    return result;\n</code></pre>\n\n<p>I think you'll get more than one print line. You might also find that the right answer is not necessarily the last answer printed, especially as you work out every product twice.</p>\n\n<p><strong>Edit</strong> </p>\n\n<p>The question was amended after I wrote this answer. The code in the question now works.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1492622716, "post_id": 43502008, "comment_id": 74059003, "body": "Note that <code>reverse_num(int num)</code>, with larger <code>num</code> can needlessly overflow and generate the wrong answer even when the palindrome is representable in <code>int</code> unlike <a href=\"http://stackoverflow.com/a/43501686/2410359\">this code</a>.  Not a issue, though, with 32-bit <code>int</code>  when <code>0 &lt;= num &lt; 1000000</code>."}], "tags": [], "owner": {"reputation": 31, "user_id": 7560256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7102402e3d20f17b0734bda9e12f769f?s=128&d=identicon&r=PG&f=1", "display_name": "JBird", "link": "https://stackoverflow.com/users/7560256/jbird"}, "is_accepted": true, "score": 0, "last_activity_date": 1492621746, "creation_date": 1492621746, "answer_id": 43502008, "question_id": 43501224, "link": "https://stackoverflow.com/questions/43501224/largest-palindrome-product-in-c/43502008#43502008", "title": "Largest palindrome product in c", "body": "<p>as questioned by Eugene Sh. I added a check for the largest palindrome and now it works, below is the code that works:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint reverse_num(int num) \n{\n    int ret = 0, value = 1, temp = 0;\n    temp = num;\n    while(temp&gt;0)\n    {       \n        temp = temp/10;\n        value = value * 10;\n    }\n    value = value/10;\n\n    while(num&gt;0)\n    {\n        temp = num % 10;\n        temp = temp * value;\n        ret = ret + temp;\n        num = num/10;\n        value = value/10;\n    }\n\n    return ret;\n}\n\nint check_palindrome(int num)\n{\n    if(num==reverse_num(num))\n        return 1;\n    else\n        return 0;\n}\n\nint main(void)\n{\n    int num = 0, i = 0, j = 0, temp = 0, largest = 0;\n\n    for(i=100; i&lt;1000; i++)\n    {\n        for(j=100; j&lt;1000; j++)\n        {\n            temp = i * j;\n            if(check_palindrome(temp))\n            {\n                if(temp&gt;largest)\n                {\n                    largest = temp;\n                    printf(\"found largest %d palindrome, its product of %d and %d\\n\", largest, i, j);\n                }\n                //printf(\"found %d palindrome, its product of %d and %d\\n\", temp, i, j);\n            }\n\n        }\n    }\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 7560256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7102402e3d20f17b0734bda9e12f769f?s=128&d=identicon&r=PG&f=1", "display_name": "JBird", "link": "https://stackoverflow.com/users/7560256/jbird"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 364, "favorite_count": 1, "closed_date": 1492631444, "accepted_answer_id": 43502008, "answer_count": 2, "score": 1, "last_activity_date": 1492621746, "creation_date": 1492619196, "last_edit_date": 1492621531, "question_id": 43501224, "link": "https://stackoverflow.com/questions/43501224/largest-palindrome-product-in-c", "closed_reason": "Not suitable for this site", "title": "Largest palindrome product in c", "body": "<p>I'm trying to solve problem 4 from project euler (Q: find the largest palindrome made from the product of two 3-digit numbers). I get 580085 as answer but it is not the correct. What I'm doing wrong? not looking for a different implementation just wanted to know whats wrong with my implementation.</p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n\nint reverse_num(int num) \n{\n    int ret = 0, value = 1, temp = 0;\n    temp = num;\n    while(temp&gt;0)\n    {       \n        temp = temp/10;\n        value = value * 10;\n    }\n    value = value/10;\n\n    while(num&gt;0)\n    {\n        temp = num % 10;\n        temp = temp * value;\n        ret = ret + temp;\n        num = num/10;\n        value = value/10;\n    }\n\n    return ret;\n}\n\nint check_palindrome(int num)\n{\n    if(num==reverse_num(num))\n        return 1;\n    else\n        return 0;\n}\n\nint main(void)\n{\n    int num = 0, i = 0, j = 0, temp = 0;\n\n    for(i=100; i&lt;1000; i++)\n    {\n        for(j=100; j&lt;1000; j++)\n        {\n            temp = i * j;\n            if(check_palindrome(temp))\n            {\n                printf(\"found %d palindrome, its product of %d and %d\\n\", temp, i, j);\n            }\n\n        }\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "string", "string-literals"], "comments": [{"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 3, "creation_date": 1492619124, "post_id": 43501073, "comment_id": 74056635, "body": "<code>&lt;String.h&gt;</code> should be <code>&lt;string.h&gt;</code>.  <code>void main</code> should be <code>int main</code>.  And you cannot change the characters in a string literal."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1492619152, "post_id": 43501073, "comment_id": 74056660, "body": "undefined behaviour. Anything could happen in a program that starts with <code>void main</code>."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1492619395, "post_id": 43501073, "comment_id": 74056808, "body": "@AnttiHaapala ...unless the implementation supports it which is rare."}, {"owner": {"reputation": 1787, "user_id": 1712449, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/PlwBV.gif?s=128&g=1", "display_name": "hymie", "link": "https://stackoverflow.com/users/1712449/hymie"}, "edited": false, "score": 1, "creation_date": 1492619395, "post_id": 43501073, "comment_id": 74056809, "body": "You are assuming all of your characters are letters.  Your first space character is going to be converted.  Space is character 32.  What happens when you subtract 32?"}, {"owner": {"reputation": 6091, "user_id": 933198, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/25a22103fd3210fdfa142843c7777ff1?s=128&d=identicon&r=PG", "display_name": "Lee Taylor", "link": "https://stackoverflow.com/users/933198/lee-taylor"}, "edited": false, "score": 0, "creation_date": 1492619488, "post_id": 43501073, "comment_id": 74056866, "body": "<a href=\"https://www.tutorialspoint.com/c_standard_library/c_function_toupper.htm\" rel=\"nofollow noreferrer\">tutorialspoint.com/c_standard_library/c_function_toupper.htm</a>"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1492619514, "post_id": 43501073, "comment_id": 74056884, "body": "Isn&#39;t it you&#39;re modifying a string literal?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1492619577, "post_id": 43501073, "comment_id": 74056921, "body": "<code>void main()</code> is an invalid signature. The most simple signature is <code>int main(void)</code>."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 2, "creation_date": 1492619919, "post_id": 43501073, "comment_id": 74057137, "body": "avoid magic numbers like 65 or 90. Use <code>&#39;a&#39;</code> or <code>&#39;z&#39;</code> instead."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1492620039, "post_id": 43501073, "comment_id": 74057222, "body": "@L\u01b0uV\u0129nhPh&#250;c :) beat you by like <i>whole 60 seconds</i>. :)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1492621082, "post_id": 43501073, "comment_id": 74057916, "body": "<code>for(i=0; i&lt;strlen(a); i++){</code> wastefully recalculates the length repeatedly.  Use <code>for(i=0; a[i]; i++){</code> or similar, instead."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1492621461, "post_id": 43501073, "comment_id": 74058181, "body": "@chux Right now, avoiding wastefully recalculating things could probably be characterized as a form of &quot;premature optimization&quot;."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1492621935, "post_id": 43501073, "comment_id": 74058499, "body": "@AndrewHenle &quot;premature optimization&quot; is especially true when the <a href=\"https://en.wikipedia.org/wiki/Big_O_notation\" rel=\"nofollow noreferrer\">order of complexity</a>  does not improve.  <code>NOMB_car_chif()</code>  is <code>O(string_length*string_length)</code>.  The comment makes that function <code>O(string_length)</code> - so disagree that it is p.o..  Not a big deal with <code>&quot;Welcome To My Word&quot;</code> size strings, yet important for string of much greater length."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1492631524, "post_id": 43501073, "comment_id": 74064324, "body": "@chux I was referring to the coder, not the code.  Sorry for not being clear."}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1492619910, "last_edit_date": 1492619910, "creation_date": 1492619565, "answer_id": 43501337, "question_id": 43501073, "link": "https://stackoverflow.com/questions/43501073/changes-to-char-array-not-visible-with-printf/43501337#43501337", "title": "Changes to char array not visible with printf", "body": "<p>The call</p>\n\n<pre><code> NOMB_car_chif(\"Welcome To My Word\");\n</code></pre>\n\n<p>passes a string literal as argument, which , if attempted to be modified, causes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>. You need to pass a pointer to modifiable memory location, for example, an array.</p>\n\n<p>That said, the conversion operation is buggy. The <code>else</code> part operates for <em>all</em>\nvalues outside the ASCII code for UPPERCASE alphabets which is not what you want. You need to check for the range of lowercase alphabet and then perform the subtraction for conversion to UPPERCASE.</p>\n\n<p>Finally, a couple of suggestions:</p>\n\n<ul>\n<li>Do not use magic numbers like <code>65</code> and <code>90</code>, use the corresponding character constants themselves, like <code>'a'</code>, <code>'z'</code> etc.</li>\n<li>For hosted environments, the conforming signature of <code>main()</code> is <code>int main(void)</code>, at least.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 1674, "user_id": 6613299, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/WGQGV.jpg?s=128&g=1", "display_name": "Rohit-Pandey", "link": "https://stackoverflow.com/users/6613299/rohit-pandey"}, "is_accepted": false, "score": 0, "last_activity_date": 1492626362, "last_edit_date": 1492626362, "creation_date": 1492621237, "answer_id": 43501859, "question_id": 43501073, "link": "https://stackoverflow.com/questions/43501073/changes-to-char-array-not-visible-with-printf/43501859#43501859", "title": "Changes to char array not visible with printf", "body": "<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt; \nvoid NOMB_car_chif(char a[1000])\n{\nint i=0,b=0;\nfor(i =0;i&lt;strlen(a);i++)\n{\n    if(a[i]&gt;=65 &amp;&amp; a[i]&lt;=90)\n    b=a[i]+32;\n    else if(a[i]&gt;=97&amp;&amp;a[i]&lt;=122)\n    b=a[i]-32;\n    else\n    b=a[i];\n    printf(\"%c\",b);\n    }\n }\n void main()\n {\n    NOMB_car_chif(\"Welcome To My Word\");  \n }\n</code></pre>\n\n<p>Solution of your problem .\nYou have to use %c in place of %s in your code.</p>\n"}], "owner": {"reputation": 23, "user_id": 7748427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cff1d39143faff2ebab591d6d16aae95?s=128&d=identicon&r=PG&f=1", "display_name": "ahmed.fager", "link": "https://stackoverflow.com/users/7748427/ahmed-fager"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "closed_date": 1492641351, "answer_count": 2, "score": -1, "last_activity_date": 1492626362, "creation_date": 1492618699, "last_edit_date": 1492619858, "question_id": 43501073, "link": "https://stackoverflow.com/questions/43501073/changes-to-char-array-not-visible-with-printf", "closed_reason": "Not suitable for this site", "title": "Changes to char array not visible with printf", "body": "<p>I'm writing a C function that changes the case between letters: change capital letters to small letters and small letters to capital ones. The code compiles without errors, but does not print anything. Why?</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;String.h&gt;\nvoid NOMB_car_chif(char a[])\n{\n  int i;\n  for(i=0; i&lt;strlen(a); i++){\n\n    if(a[i]&gt;=65 &amp;&amp; a[i]&lt;=90)\n        a[i]=a[i]+32;\n    else\n        a[i]=a[i]-32;\n\n    printf(\"%s\" ,a);\n\n   }\n}\n\nvoid main()\n{\n  NOMB_car_chif(\"Welcome To My Word\");  \n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 10, "creation_date": 1492618340, "post_id": 43500909, "comment_id": 74056070, "body": "It is the same, period. Not &quot;for the most compilers&quot;. The style is opinion based."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1492627229, "post_id": 43500909, "comment_id": 74061736, "body": "Note about post text: With <code>char myArray[10];   char (*myArraypointer)[10] = &amp;myArray</code>,   <code>foo(myArray + 1)</code> &quot;adding 1 to an Array&quot;, as in the title, is not the same as code  <code>foo(myArraypointer + 1)</code>, adding 1 to an <i>array pointer</i>.  The first adds 1 (sizeof element), the 2nd adds 10 (sizeof array)."}, {"owner": {"reputation": 157, "user_id": 5883093, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e99ba59526cc0690943d803bf1016095?s=128&d=identicon&r=PG&f=1", "display_name": "anyone", "link": "https://stackoverflow.com/users/5883093/anyone"}, "edited": false, "score": 0, "creation_date": 1492674292, "post_id": 43500909, "comment_id": 74080205, "body": "Changed the title to be consistent with the question. The other answers contradict your comment, are you sure about the diffrence?"}], "answers": [{"comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 2, "creation_date": 1492618463, "post_id": 43500978, "comment_id": 74056161, "body": "and also <code>i[a]</code>."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 5, "creation_date": 1492618501, "post_id": 43500978, "comment_id": 74056190, "body": "@AnttiHaapala Well, that would be a bad style in all adequate opinions :)"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1492618587, "post_id": 43500978, "comment_id": 74056245, "body": "The famous book Introduction to Algorithms uses the notation <code>index[Array]</code> in its pseudo code, it is very cute :D"}, {"owner": {"reputation": 157, "user_id": 5883093, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e99ba59526cc0690943d803bf1016095?s=128&d=identicon&r=PG&f=1", "display_name": "anyone", "link": "https://stackoverflow.com/users/5883093/anyone"}, "edited": false, "score": 0, "creation_date": 1492618588, "post_id": 43500978, "comment_id": 74056246, "body": "Well that was certainly fast. Accepted. Wow, thats some exotic notation..."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1492618708, "post_id": 43500978, "comment_id": 74056332, "body": "@AnttiHaapala Would it use <code>0[a]</code> to indicate the first element? o_O"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1492619047, "post_id": 43500978, "comment_id": 74056577, "body": "ah sorry I didn&#39;t recall correctly. It was just that length of an array was coded as <code>length[A]</code> while indexing would have been <code>A[0]</code> for example. In later editions they now seem to use <code>A.length</code> instead."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1492619199, "post_id": 43500978, "comment_id": 74056690, "body": "I wonder why this error <code>error: subscripted value is neither array nor pointer nor vector</code> is issued when neither <code>a</code> or <code>i</code> are pointers only, and not issued for one of them being a pointer. Even though in <code>i[a]</code> the  subscripted value is neither as well."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 4, "last_activity_date": 1492618424, "creation_date": 1492618424, "answer_id": 43500978, "question_id": 43500909, "link": "https://stackoverflow.com/questions/43500909/c-programming-what-happens-if-i-increment-an-arraypointer-while-passing-it-as-a/43500978#43500978", "title": "C-Programming: What happens if I increment an Arraypointer while passing it as an argument", "body": "<p>For any pointer or array <code>a</code> and index <code>i</code>, the expression <code>a[i]</code> is equal to <code>*(a + i)</code>. That means that <code>&amp;a[i]</code> is equal to <code>&amp;*(a + i)</code>, where the last can be shortened to <code>a + i</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 2, "last_activity_date": 1492618708, "creation_date": 1492618708, "answer_id": 43501076, "question_id": 43500909, "link": "https://stackoverflow.com/questions/43500909/c-programming-what-happens-if-i-increment-an-arraypointer-while-passing-it-as-a/43501076#43501076", "title": "C-Programming: What happens if I increment an Arraypointer while passing it as an argument", "body": "<p>They are exactly the same as required by the C standard. Note that the compiler must not evaluate the array index before taking its address: i.e. the expression is well defined even if the array elements are not initialised.</p>\n\n<p>I prefer the first one though. It's clearer and is friendlier to C++ code which might have overloaded the address of operator for your type. And the non-initialised point I've already made is really one for the pub quiz.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 5239236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/910f501424e0edea00e40113ec54fd13?s=128&d=identicon&r=PG&f=1", "display_name": "Utpal Shanker", "link": "https://stackoverflow.com/users/5239236/utpal-shanker"}, "is_accepted": false, "score": 0, "last_activity_date": 1492683615, "creation_date": 1492683615, "answer_id": 43516740, "question_id": 43500909, "link": "https://stackoverflow.com/questions/43500909/c-programming-what-happens-if-i-increment-an-arraypointer-while-passing-it-as-a/43516740#43516740", "title": "C-Programming: What happens if I increment an Arraypointer while passing it as an argument", "body": "<p>Both of them are same as in the first one <code>foo(myArraypointer + 10);</code> it access <code>myArraypointer</code> which is the base address of variable and +10 will increment the address to 10th position from base address. \nIncrementing or decrementing address of a pointer depends upon the data type of the pointer Variable. i.e. if pointer is character type it'll increment/decrements by 1. \nIf <code>myArraypointer</code> points to a character whose address is 1000, then increment by one will point to the location 1001 but if <code>myArraypointer</code> points to an integer whose address is 1000, then increment by one will point to the location 1002(1000 + 2). Like this for float also. </p>\n"}], "owner": {"reputation": 157, "user_id": 5883093, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e99ba59526cc0690943d803bf1016095?s=128&d=identicon&r=PG&f=1", "display_name": "anyone", "link": "https://stackoverflow.com/users/5883093/anyone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 43500978, "answer_count": 3, "score": 3, "last_activity_date": 1492683615, "creation_date": 1492618236, "last_edit_date": 1492674216, "question_id": 43500909, "link": "https://stackoverflow.com/questions/43500909/c-programming-what-happens-if-i-increment-an-arraypointer-while-passing-it-as-a", "title": "C-Programming: What happens if I increment an Arraypointer while passing it as an argument", "body": "<p>Will this work? \nI expect</p>\n\n<pre><code>foo(myArraypointer + 10);\n</code></pre>\n\n<p>be the same as</p>\n\n<pre><code>foo( &amp;(myArraypointer[10]));\n</code></pre>\n\n<p>will this be treated as same for most compilers? Is this considered good or bad practice and why? What could go wrong?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 3, "creation_date": 1492617289, "post_id": 43500570, "comment_id": 74055342, "body": "<code>return image_ret;</code> --&gt; <code>return img_ret;</code>. Type name vs variable name."}, {"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 1, "creation_date": 1492617462, "post_id": 43500570, "comment_id": 74055469, "body": "Well that must be embarrassing."}, {"owner": {"reputation": 155, "user_id": 4127602, "user_type": "registered", "profile_image": "https://graph.facebook.com/844853216/picture?type=large", "display_name": "Phl3tch", "link": "https://stackoverflow.com/users/4127602/phl3tch"}, "edited": false, "score": 0, "creation_date": 1492617663, "post_id": 43500570, "comment_id": 74055608, "body": "Ha ha ha. What can I say? I&#39;ve been looking at this for way too long."}, {"owner": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 0, "creation_date": 1492618816, "post_id": 43500570, "comment_id": 74056404, "body": "LOL, next time you get tired, and you&#39;ve looked at something like this over, and over again, copy/paste the local var name to the return value.  It&#39;s amazing how copying a string over an &#39;identical&#39; string can somehow make stuff work:)"}], "answers": [{"tags": [], "owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "is_accepted": false, "score": 1, "last_activity_date": 1492617759, "creation_date": 1492617759, "answer_id": 43500741, "question_id": 43500570, "link": "https://stackoverflow.com/questions/43500570/expected-expression-before-return-value/43500741#43500741", "title": "expected expression before -return value-", "body": "<p>You need to return a value, not a type. <code>image_ret</code> is a type, <code>img_ret</code> is a poitner to a value of that type and probably what you want to return, except I see nowhere in your code where you allocate any storage to it, or initialising any of the fields except <code>image_ret_len</code></p>\n"}], "owner": {"reputation": 155, "user_id": 4127602, "user_type": "registered", "profile_image": "https://graph.facebook.com/844853216/picture?type=large", "display_name": "Phl3tch", "link": "https://stackoverflow.com/users/4127602/phl3tch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 749, "favorite_count": 0, "closed_date": 1492626370, "answer_count": 1, "score": -4, "last_activity_date": 1492617759, "creation_date": 1492617217, "question_id": 43500570, "link": "https://stackoverflow.com/questions/43500570/expected-expression-before-return-value", "closed_reason": "Not suitable for this site", "title": "expected expression before -return value-", "body": "<p>Given the following function:</p>\n\n<pre><code>image_ret* minify_1(image_src img_src, CLIENT* cl) {\n  image_ret* img_ret;\n  magickminify_init();\n  magickminify(img_src.image_src_val, img_src.image_src_len, (ssize_t*)&amp;img_ret-&gt;image_ret_len);\n  return image_ret;\n}\n</code></pre>\n\n<p>The compiler is telling me \"expected expression before \u2018image_ret\u2019\" with regard to the last line. I'm sure I'm missing some fundamental aspect of syntax here, but I don't know what. Lil' help?</p>\n"}, {"tags": ["c", "strcpy", "strncpy"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1492616149, "post_id": 43500151, "comment_id": 74054541, "body": "When one has complete knowledge of the source and destination, of course. Save oneself a few precious cycles."}, {"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 2, "creation_date": 1492616179, "post_id": 43500151, "comment_id": 74054561, "body": "Doesn&#39;t matter. <code>std::string</code> is better."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1492616244, "post_id": 43500151, "comment_id": 74054606, "body": "...but @StoryTeller, since that is impossible as long as the code has not been proven (hence has bugs, ub), defensive programming requires to always use <code>strncpy</code>."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1492616276, "post_id": 43500151, "comment_id": 74054626, "body": "What are you asking that is not already addressed by the answers to the question you linked?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1492616307, "post_id": 43500151, "comment_id": 74054655, "body": "@PaulOgilvie Defensive programming requires <code>strlcpy</code>"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 1, "creation_date": 1492616314, "post_id": 43500151, "comment_id": 74054658, "body": "@PaulOgilvie - What is there to prove when copying c-string literals to buffers of a known size!? :)"}, {"owner": {"reputation": 4031, "user_id": 7640269, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/szGUJ.png?s=128&g=1", "display_name": "danglingpointer", "link": "https://stackoverflow.com/users/7640269/danglingpointer"}, "edited": false, "score": 0, "creation_date": 1492616359, "post_id": 43500151, "comment_id": 74054690, "body": "strncpy is better than strcpy but still it&#39;s a  debate. I prefers to use strncpy instead of strcpy."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1492616438, "post_id": 43500151, "comment_id": 74054747, "body": "@StoryTeller, that some increased the string literal that now no longer fits the buffer. (Probably Marketing wanted a nicer message, or so.)"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1492616617, "post_id": 43500151, "comment_id": 74054871, "body": "@PaulOgilvie - Our complete knowledge has changed, but it&#39;s still complete. There&#39;s also the matter of the string literal being a poor choice as a user visible label. With i18n to consider, those things shouldn&#39;t be hard coded as literals anyway :)"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 3, "creation_date": 1492617878, "post_id": 43500151, "comment_id": 74055761, "body": "Your code does, as you say, leave room for the string terminator, but it doesn&#39;t put it in, so the resulting string is unterminated. You&#39;ve just built yourself a trap."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1492620254, "post_id": 43500151, "comment_id": 74057354, "body": "@PeteBecker <a href=\"http://stackoverflow.com/questions/43500151/isnt-strncpy-better-than-strcpy#comment74055761_43500151\">comment</a> is key!  OP was under the false assumption that the code snippet was safe (it formed a string) because <code>strncpy()</code> was used and instead it is a problem when code uses <code>dest</code> as a string."}, {"owner": {"reputation": 21, "user_id": 7890510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/007c7d5a1653c36247c9d295fead43a6?s=128&d=identicon&r=PG&f=1", "display_name": "haveri", "link": "https://stackoverflow.com/users/7890510/haveri"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1492622196, "post_id": 43500151, "comment_id": 74058667, "body": "@JohnBollinger: To understand when would one use strcpy instead of strncpy."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1492677803, "post_id": 43500151, "comment_id": 74082322, "body": "If you are fine with writing beyond the end of a buffer, use <code>strcpy</code>. If you are more at ease with reading beyond the end of an array, use <code>strncpy</code>. If you wish to write well defined code, use <code>strncpy</code> and explicitly zero-terminate the destination buffer."}, {"owner": {"reputation": 21, "user_id": 7890510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/007c7d5a1653c36247c9d295fead43a6?s=128&d=identicon&r=PG&f=1", "display_name": "haveri", "link": "https://stackoverflow.com/users/7890510/haveri"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1492700441, "post_id": 43500151, "comment_id": 74099758, "body": "@PeteBecker: strncpy automatically adds in the null character if sizeof(dest) &gt; sizeof(src). So, dest would then be &quot;Hell&quot;."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1492704649, "post_id": 43500151, "comment_id": 74102763, "body": "@anusha -- RTFM. The effect of <code>std::strncpy</code> does not depend on the size of the destination array. It depends on <b>how many characters you tell it to copy</b>, and if it hits that limit before seeing a terminator in the source array, the destination <b>does not get a terminator</b>. <code>std::strncpy</code> is <b>not</b> a &quot;safe&quot; replacement for <code>std::strcpy</code> under any sensible definition of &quot;safe&quot;."}, {"owner": {"reputation": 21, "user_id": 7890510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/007c7d5a1653c36247c9d295fead43a6?s=128&d=identicon&r=PG&f=1", "display_name": "haveri", "link": "https://stackoverflow.com/users/7890510/haveri"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1492716812, "post_id": 43500151, "comment_id": 74109738, "body": "@PeteBecker: Maybe it&#39;s you who should do it. The whole reason why I do sizeof(dest)-1, is just so strncpy appends in the NULL character for that 1 byte that I still have."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1492717254, "post_id": 43500151, "comment_id": 74109978, "body": "@anusha - PAY ATTENTION: your code <b>does not terminate the result string</b>. It tells <code>strncpy</code> to copy 4 characters, and since <code>strncpy</code> does not hit a terminator in the source string, it <b>stops</b> after the fourth character <b>without</b> writing a terminator. The result of the copy is something like <code>&quot;Hell#(ALJLKJ&quot;</code>, i.e., it has whatever random stuff is in memory starting at <code>dest[4]</code>, and any code that uses <code>dest</code> is very likely to access memory off the end of the array. That will not end well."}], "answers": [{"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1492616527, "post_id": 43500294, "comment_id": 74054813, "body": "Of course, one must also use C strings when one is programming in C, and not C++."}, {"owner": {"reputation": 7022, "user_id": 7659995, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iZH7M.png?s=128&g=1", "display_name": "MD XF", "link": "https://stackoverflow.com/users/7659995/md-xf"}, "edited": false, "score": 0, "creation_date": 1492629914, "post_id": 43500294, "comment_id": 74063300, "body": "<code>My opinion cannot be inaccurate information, it is my opinion.</code> No, that&#39;s not at all true. Saying &quot;In my opinion, <i>insert random made-up statistics here</i>&quot; means your opinion is simply <b>inaccurate</b>. Regardless of whether it&#39;s an opinion or a &quot;fact&quot;, it&#39;s made-up and it&#39;s wrong."}, {"owner": {"reputation": 7022, "user_id": 7659995, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iZH7M.png?s=128&g=1", "display_name": "MD XF", "link": "https://stackoverflow.com/users/7659995/md-xf"}, "edited": false, "score": 0, "creation_date": 1492630015, "post_id": 43500294, "comment_id": 74063366, "body": "For your answer to be accurate, you could rephrase that to say something like &quot;In my <i>experience</i>, 85% of <i>bugs</i>...&quot; or &quot;In my code, 85% of bugs...&quot;"}, {"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 0, "creation_date": 1492630558, "post_id": 43500294, "comment_id": 74063695, "body": "Sounds like flamewar bait to me. You can feel free to disagree with my opinion in the comments. You don&#39;t get to solely decide what is true and what is not, and edit it out in someone else&#39;s answer. I prefaced it with &quot;in my opinion&quot;, I see no difference between that and &quot;in my experience.&quot; It definitely is not &quot;in my code&quot;, as I don&#39;t use c-style strings if I can help it. I just get to fix other people&#39;s bug riddled code for 20 years along the way. Posting a craw of the bug trackers for 7 companies (which I have done) to show 85% of bugs come from c-style strings is not reasonable here."}, {"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 0, "creation_date": 1492630902, "post_id": 43500294, "comment_id": 74063939, "body": "See <a href=\"http://stackoverflow.com/help/editing\">stackoverflow.com/help/editing</a>"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1492676235, "post_id": 43500294, "comment_id": 74081355, "body": "<code>strncpy</code> doesn&#39;t prevent overflows. It merely exchanges writes past the end with reads past the end. It doesn&#39;t zero-terminate the destination for all cases where <code>strcpy</code> would have been problematic. You should at least point those dangers out."}], "tags": [], "owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "is_accepted": false, "score": 1, "last_activity_date": 1492618219, "last_edit_date": 1492618219, "creation_date": 1492616389, "answer_id": 43500294, "question_id": 43500151, "link": "https://stackoverflow.com/questions/43500151/isnt-strncpy-better-than-strcpy/43500294#43500294", "title": "Isn&#39;t strncpy better than strcpy?", "body": "<p>In C++, use <code>std::string</code> rather than c-style strings unless performance in a particular area is critical, in which case performance test to see if it is more than a negligible difference. You can use <code>std::string::reserve</code> to minimize allocations when you know the size up front.</p>\n\n<p>In my opinion, 85% of bugs are caused by c-style strings. <code>std::string</code> is much safer and is less error prone.</p>\n\n<p>In C, you won't have <code>std::string</code> available.</p>\n\n<p>If you have to use c-style strings, then I'd prefer <code>strncpy</code>, because at least it asks for the size and makes you think about the size, rather than just overflowing.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1492620748, "post_id": 43500415, "comment_id": 74057682, "body": "Agree <code>snprintf(dst, size, &quot;%s&quot;, src);</code> is a superior alternative to <code>strncpy()</code> for typical use to limit copying.  It does have a weakness in detecting truncated results that is cumbersome.  (too long, encoding error and type change)."}], "tags": [], "owner": {"reputation": 9690, "user_id": 1707560, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/8VK4M.jpg?s=128&g=1", "display_name": "imreal", "link": "https://stackoverflow.com/users/1707560/imreal"}, "is_accepted": false, "score": 9, "last_activity_date": 1492705608, "last_edit_date": 1492705608, "creation_date": 1492616765, "answer_id": 43500415, "question_id": 43500151, "link": "https://stackoverflow.com/questions/43500151/isnt-strncpy-better-than-strcpy/43500415#43500415", "title": "Isn&#39;t strncpy better than strcpy?", "body": "<p>It is not better. Contrary to common belief <code>strncpy</code> was not created to replace <code>strcpy</code> or to be a safe version of it. It fails to null terminate the string when the source string is larger than the <code>num</code> parameter, so you have to do it manually. Like this:</p>\n\n<pre><code>strncpy(dst, src, num);\ndst[num - 1] = 0;\n</code></pre>\n\n<p>Which requires 2 lines to achieve 1 simple goal and it is easy for developers to forget the second one.</p>\n\n<p>Besides that, it always writes <code>num</code> characters (appends <code>0</code>'s if necessary) regardless of the sizes of the strings which can be a performance concern when <code>dst</code> is small and <code>num</code> is large.</p>\n\n<p>Using <code>strncat</code> fixes the second problem of writing extra characters but still forces you to write 2 lines:</p>\n\n<pre><code>dst[0];\nstrncat(dst, src, num);\n</code></pre>\n\n<p>The function <a href=\"https://www.freebsd.org/cgi/man.cgi?query=strlcpy&amp;sektion=3\" rel=\"nofollow noreferrer\"><code>strlcpy</code></a> fixes both of these problems but it is not a C standard library function so do not use it.</p>\n\n<p>The right choice is <a href=\"https://linux.die.net/man/3/snprintf\" rel=\"nofollow noreferrer\"><code>snprintf</code></a> which is guaranteed to null terminate the string and only writes the necessary amount of characters, even if it means truncating the source string.</p>\n\n<pre><code>snprintf(dst, size, \"%s\", src);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": false, "score": 3, "last_activity_date": 1492620826, "last_edit_date": 1492620826, "creation_date": 1492616965, "answer_id": 43500492, "question_id": 43500151, "link": "https://stackoverflow.com/questions/43500151/isnt-strncpy-better-than-strcpy/43500492#43500492", "title": "Isn&#39;t strncpy better than strcpy?", "body": "<p>In C, <code>strncpy</code> has the advantage over <code>strcpy</code> that it does not overflow the buffer when the source is larger than the destination.</p>\n\n<p><code>strncpy</code> has the disadvantage that,  when the source is larger than the destination, it <em>does not</em> terminate the buffer with a <code>\\0</code>. So every call of <code>strncpy</code> <em>must</em> be followed with a statement terminating the buffer, such as</p>\n\n<pre><code>strncpy(dst, src, n);\ndst[n-1]='\\0';\n</code></pre>\n\n<p>User Eugene Sh points out that for defensive programming <code>strlcpy</code> must be used: \"strlcpy() takes the full size of the destination buffer and\nguarantees NUL-termination.\"</p>\n"}], "owner": {"reputation": 21, "user_id": 7890510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/007c7d5a1653c36247c9d295fead43a6?s=128&d=identicon&r=PG&f=1", "display_name": "haveri", "link": "https://stackoverflow.com/users/7890510/haveri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2092, "favorite_count": 1, "closed_date": 1492617194, "answer_count": 3, "score": -2, "last_activity_date": 1492705608, "creation_date": 1492615991, "last_edit_date": 1495535462, "question_id": 43500151, "link": "https://stackoverflow.com/questions/43500151/isnt-strncpy-better-than-strcpy", "closed_reason": "Duplicate", "title": "Isn&#39;t strncpy better than strcpy?", "body": "<p>I know there are a lot of answers on the web which say one is better than the other but I have come to this understanding of <code>strncpy()</code> is better in terms of preventing unnecessary crashes in the system because of the missing <code>'\\0'</code>. As many people put it, it is quite defensive. </p>\n\n<p>I have already gone through this link: <a href=\"https://stackoverflow.com/questions/1258550/why-should-you-use-strncpy-instead-of-strcpy\">Why should you use strncpy instead of strcpy?</a></p>\n\n<p>Let's say:</p>\n\n<pre><code>char dest[5];\nchar src[7] = \"Hello\";\nstrncpy(dest, src, sizeof(dest)-1);\n</code></pre>\n\n<p>With this implementation (the key being <code>sizeof(dest)-1</code> which always gives room for the <code>'\\0'</code> to be appended), even if the destination has a truncated string, isn't it always safer to use <code>strncpy()</code> instead of <code>strcpy()</code>? In other words, I'm trying to understand when would one want to use <code>strcpy()</code> over <code>strncpy()</code>?</p>\n"}, {"tags": ["c", "openmp"], "answers": [{"comments": [{"owner": {"reputation": 73919, "user_id": 44309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iL4TW.png?s=128&g=1", "display_name": "High Performance Mark", "link": "https://stackoverflow.com/users/44309/high-performance-mark"}, "edited": false, "score": 1, "creation_date": 1492616685, "post_id": 43500188, "comment_id": 74054910, "body": "Now explain why this fixes the problem."}, {"owner": {"reputation": 355, "user_id": 67596, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6cf5e180b621fc8da33858bf011e09b0?s=128&d=identicon&r=PG", "display_name": "zakk", "link": "https://stackoverflow.com/users/67596/zakk"}, "reply_to_user": {"reputation": 73919, "user_id": 44309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iL4TW.png?s=128&g=1", "display_name": "High Performance Mark", "link": "https://stackoverflow.com/users/44309/high-performance-mark"}, "edited": false, "score": 0, "creation_date": 1492688567, "post_id": 43500188, "comment_id": 74090184, "body": "The variable is the same for all the concurrent threads spawned for the outermost for loop, whereas what you want is a different variable for each thread."}], "tags": [], "owner": {"reputation": 355, "user_id": 67596, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6cf5e180b621fc8da33858bf011e09b0?s=128&d=identicon&r=PG", "display_name": "zakk", "link": "https://stackoverflow.com/users/67596/zakk"}, "is_accepted": false, "score": 0, "last_activity_date": 1492616097, "creation_date": 1492616097, "answer_id": 43500188, "question_id": 43500073, "link": "https://stackoverflow.com/questions/43500073/crash-using-openmp-within-c-and-two-nested-loops/43500188#43500188", "title": "Crash using OpenMP within C and two nested loops", "body": "<p>Found the solution one minute after posting, the d variable should be declared inside the outermost loop, as in</p>\n\n<pre><code>int do_something(void)\n{\n    int c;\n    double data[YLEN][XLEN];\n\n#pragma omp parallel for\n\n    for(c=0;c&lt;XLEN;c++)\n    {\n        int d;\n\n        for(d=0;d&lt;YLEN;d++)\n        {\n</code></pre>\n\n<p>etc...</p>\n"}], "owner": {"reputation": 355, "user_id": 67596, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6cf5e180b621fc8da33858bf011e09b0?s=128&d=identicon&r=PG", "display_name": "zakk", "link": "https://stackoverflow.com/users/67596/zakk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 124, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1492616097, "creation_date": 1492615791, "question_id": 43500073, "link": "https://stackoverflow.com/questions/43500073/crash-using-openmp-within-c-and-two-nested-loops", "title": "Crash using OpenMP within C and two nested loops", "body": "<p>I have been experiencing a weird behaviour in C code using OpenMP. The following code snippet very often crashes:</p>\n\n<pre><code>#define XLEN        (5)\n#define YLEN        (5)\n\nint do_something(void)\n{\n    int c,d;\n    double data[YLEN][XLEN];\n\n#pragma omp parallel for\n\n    for(c=0;c&lt;XLEN;c++)\n    {\n        for(d=0;d&lt;YLEN;d++)\n        {\n\n            /*\n                In the real code here I calculate a result which is a function of c and d, save it in a temporary variable and then write it in the critical section. However this is not necessary for this minimal example.\n            */\n\n#pragma omp critical\n\n            {\n                data[d][c]=0.0f;                \n            }\n        }\n    }\n\n    return 0;\n}\n\nint main(void)\n{\n    do_something();\n}\n</code></pre>\n\n<p>I am using Mac OS X and my code is compiled using either GCC (version 6, from MacPorts) or Clang (version 3.8, also from MacPorts).</p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1492615323, "post_id": 43499789, "comment_id": 74053937, "body": "What&#39;s the point to have and allocate array of void <i>pointers</i> ratther than <code>book</code>s?"}], "answers": [{"tags": [], "owner": {"reputation": 706, "user_id": 3320702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7c9b7ac64b2b4313d0dccbc7a9c57ca?s=128&d=identicon&r=PG&f=1", "display_name": "MrPromethee", "link": "https://stackoverflow.com/users/3320702/mrpromethee"}, "is_accepted": true, "score": 2, "last_activity_date": 1492615297, "creation_date": 1492615297, "answer_id": 43499881, "question_id": 43499789, "link": "https://stackoverflow.com/questions/43499789/a-pointer-addr-in-a-struct-was-allocated-memory-but-when-i-call-it-in-another/43499881#43499881", "title": "A pointer &quot;addr&quot; in a struct was allocated memory but when I call it in another function, it can&#39;t work", "body": "<p>This is a problem of operator precedence.</p>\n\n<p>Changing <code>book * bk = (book *)books.addr[j];</code> to <code>book * bk = ((book *)books.addr)[j];</code> should fix the problem.</p>\n"}, {"tags": [], "owner": {"reputation": 609, "user_id": 7690030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11846ade17a8760f2501ab72fcc1f37?s=128&d=identicon&r=PG", "display_name": "Martin Chekurov", "link": "https://stackoverflow.com/users/7690030/martin-chekurov"}, "is_accepted": false, "score": 0, "last_activity_date": 1492698225, "creation_date": 1492698225, "answer_id": 43522258, "question_id": 43499789, "link": "https://stackoverflow.com/questions/43499789/a-pointer-addr-in-a-struct-was-allocated-memory-but-when-i-call-it-in-another/43522258#43522258", "title": "A pointer &quot;addr&quot; in a struct was allocated memory but when I call it in another function, it can&#39;t work", "body": "<blockquote>\n  <p>error: operand of type 'void' where arithmetic or pointer type is required. 1 error generated.</p>\n</blockquote>\n\n<p>You are using pointer arithmetic on a void pointer which is not allowed ( addr[ j ] ).</p>\n\n<p>First you have to cast the void pointer</p>\n\n<pre><code>((book *)(books.addr))\n</code></pre>\n\n<p>And then dereference it</p>\n\n<pre><code>((book *)(books.addr))[j]\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 6929473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc2be3f22c8942b03c13b8041688b293?s=128&d=identicon&r=PG&f=1", "display_name": "Nanton Zhang", "link": "https://stackoverflow.com/users/6929473/nanton-zhang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 43499881, "answer_count": 2, "score": 0, "last_activity_date": 1492698225, "creation_date": 1492615068, "last_edit_date": 1492615437, "question_id": 43499789, "link": "https://stackoverflow.com/questions/43499789/a-pointer-addr-in-a-struct-was-allocated-memory-but-when-i-call-it-in-another", "title": "A pointer &quot;addr&quot; in a struct was allocated memory but when I call it in another function, it can&#39;t work", "body": "<p>At the beginning of the C file, I define two structures like this.</p>\n\n<pre><code>typedef struct\n{\n    char name[LEN];\n    double price;\n} book;\n\ntypedef struct\n{\n    void *addr;\n    int num;\n} Array;\n\nArray book;\n</code></pre>\n\n<p>Later, I use <code>malloc(sizeof(void *)*len)</code> to allocate memory to the pointer <code>addr</code>. The void pointer points to a book structure which is also allocated memory in heap.</p>\n\n<p>After doing this, when I call it in another function in this way:</p>\n\n<pre><code>void print_view_of_books(Array books)\n{\n   int j;\n   int limit = books.num;\n   for(j=0; j&lt;limit; j++)\n   {\n      book * bk = (book *)books.addr[j]; \n      printf(\"Book title: %s\\n\", bk-&gt;name);\n      printf(\"Book price: %lf\\n\", bk-&gt;price);\n      puts(\"----------------------\");\n   }\n\n}\n</code></pre>\n\n<p>My compiler says  </p>\n\n<blockquote>\n  <p>error: operand of type 'void' where arithmetic or pointer type is required. 1 error generated.</p>\n</blockquote>\n\n<p>I find there's a problem with the expression <code>books.addr[j]</code> and if I substitute it simply with <code>books.addr</code>, it will work.</p>\n\n<p>Can somebody instruct me how to fix the problem please?</p>\n"}, {"tags": ["java", "c", "pointers", "jna"], "answers": [{"comments": [{"owner": {"reputation": 451, "user_id": 2203205, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/cdb75fb4c4cf02bf4db8018e02bbbe36?s=128&d=identicon&r=PG", "display_name": "Anass Boukalane", "link": "https://stackoverflow.com/users/2203205/anass-boukalane"}, "edited": false, "score": 0, "creation_date": 1492617345, "post_id": 43500475, "comment_id": 74055389, "body": "thank you for your answer , but i still have the same issue : in the while loop i have a logic that should read a card id , i got the same first card&#39;s id even if i change the card , the <b>id</b> doesn&#39;t change."}, {"owner": {"reputation": 5374, "user_id": 1161484, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/lg24v.png?s=128&g=1", "display_name": "Daniel Widdis", "link": "https://stackoverflow.com/users/1161484/daniel-widdis"}, "reply_to_user": {"reputation": 451, "user_id": 2203205, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/cdb75fb4c4cf02bf4db8018e02bbbe36?s=128&d=identicon&r=PG", "display_name": "Anass Boukalane", "link": "https://stackoverflow.com/users/2203205/anass-boukalane"}, "edited": false, "score": 0, "creation_date": 1492638034, "post_id": 43500475, "comment_id": 74067823, "body": "That&#39;s about all I can help with, with the Java/JNA pieces you&#39;ve provided.  Is there more documentation available for the DLL methods?"}, {"owner": {"reputation": 451, "user_id": 2203205, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/cdb75fb4c4cf02bf4db8018e02bbbe36?s=128&d=identicon&r=PG", "display_name": "Anass Boukalane", "link": "https://stackoverflow.com/users/2203205/anass-boukalane"}, "edited": false, "score": 0, "creation_date": 1492689224, "post_id": 43500475, "comment_id": 74090677, "body": "here is my logic in the while loop  <code>while(true){ \t\t\t\ttry { \t\t\t\t\tThread.sleep(1500); \t\t\t\t} catch (InterruptedException e1) { \t\t\t\t\te1.printStackTrace(); \t\t\t\t} \t\t\t\tif(demo.cardPresent() == 0 &amp;&amp; read == false){ \t\t\t\t\tdemo.ReadCP(id, size); \t\t\t\t\ttry { \t\t\t\t\t\tSystem.out.println(&quot; -- id : &quot; + new String(id.getByteArray(0, 10),&quot;UTF-8&quot;)); \t\t\t\t\t\tread = true; \t\t\t\t\t\tcontinue; \t\t\t\t\t} catch (Exception ex) { \t\t\t\t\t\tex.printStackTrace(); \t\t\t\t\t} \t\t\t\t}else if(demo.cardPresent() != 0){ \t\t\t\t\tread = false; \t\t\t\t} \t\t\t}</code>"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1492690027, "post_id": 43500475, "comment_id": 74091232, "body": "<i>you cannot pass an array as an argument via JNA</i>  And that&#39;s just one of the reasons I gave up on JNA a long time ago and just learned how to do JNI reliably.  Once you know how, implementing the JNI side of the Java <code>static native byte[] getByteArray();</code> or <code>static native int fillInByteArray( byte arr[] );</code> methods is almost trivial."}, {"owner": {"reputation": 5374, "user_id": 1161484, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/lg24v.png?s=128&g=1", "display_name": "Daniel Widdis", "link": "https://stackoverflow.com/users/1161484/daniel-widdis"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1492700382, "post_id": 43500475, "comment_id": 74099708, "body": "Fair point, @AndrewHenle.  And if you have the ability to write your own C, that&#39;s preferred for a variety of reasons.  However, if you&#39;re stuck with someone else&#39;s DLL and can&#39;t write your own, JNA isn&#39;t a bad backup.  (NOTE: I edited my post to clarify &quot;primitive array&quot;. You can pass arrays of structures or pointers or other things JNA reserves native memory for.)"}, {"owner": {"reputation": 5374, "user_id": 1161484, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/lg24v.png?s=128&g=1", "display_name": "Daniel Widdis", "link": "https://stackoverflow.com/users/1161484/daniel-widdis"}, "reply_to_user": {"reputation": 451, "user_id": 2203205, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/cdb75fb4c4cf02bf4db8018e02bbbe36?s=128&d=identicon&r=PG", "display_name": "Anass Boukalane", "link": "https://stackoverflow.com/users/2203205/anass-boukalane"}, "edited": false, "score": 0, "creation_date": 1492700541, "post_id": 43500475, "comment_id": 74099821, "body": "@AnassBoukalane what is the nature of the <code>id</code> being read? Does documentation for <code>ReadCP</code> indicate it should be different or might it possibly be the same, e.g., a <code>PNPDeviceID</code> is not necessarily unique if one is removed and another replaces it."}, {"owner": {"reputation": 451, "user_id": 2203205, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/cdb75fb4c4cf02bf4db8018e02bbbe36?s=128&d=identicon&r=PG", "display_name": "Anass Boukalane", "link": "https://stackoverflow.com/users/2203205/anass-boukalane"}, "edited": false, "score": 0, "creation_date": 1492701295, "post_id": 43500475, "comment_id": 74100446, "body": "@DanielWiddis the id is a document id , it&#39;s unique and should be different from card to another one"}, {"owner": {"reputation": 5374, "user_id": 1161484, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/lg24v.png?s=128&g=1", "display_name": "Daniel Widdis", "link": "https://stackoverflow.com/users/1161484/daniel-widdis"}, "reply_to_user": {"reputation": 451, "user_id": 2203205, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/cdb75fb4c4cf02bf4db8018e02bbbe36?s=128&d=identicon&r=PG", "display_name": "Anass Boukalane", "link": "https://stackoverflow.com/users/2203205/anass-boukalane"}, "edited": false, "score": 0, "creation_date": 1492702229, "post_id": 43500475, "comment_id": 74101095, "body": "@AnassBoukalane are there any other methods in the DLL that prompt a re-read of the card after it&#39;s been swapped out?   Have you tried starting your program with the second card in first and switching back to the first one?    This sounds like not a java/jna issue but more a hardware/dll interface issue."}, {"owner": {"reputation": 451, "user_id": 2203205, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/cdb75fb4c4cf02bf4db8018e02bbbe36?s=128&d=identicon&r=PG", "display_name": "Anass Boukalane", "link": "https://stackoverflow.com/users/2203205/anass-boukalane"}, "edited": false, "score": 0, "creation_date": 1492702473, "post_id": 43500475, "comment_id": 74101255, "body": "@DanielWiddis there is no re-read methods in the DLL and if i switched cards it keeps always the first card id"}, {"owner": {"reputation": 5374, "user_id": 1161484, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/lg24v.png?s=128&g=1", "display_name": "Daniel Widdis", "link": "https://stackoverflow.com/users/1161484/daniel-widdis"}, "edited": false, "score": 0, "creation_date": 1492703024, "post_id": 43500475, "comment_id": 74101652, "body": "Try generating a new Pointer each time in the loop (<code>id = new Memory(10)</code> before each <code>ReadCP()</code>).  That will get rid of the old card ID: if it still doesn&#39;t read the new card ID then you&#39;ve ruled out Java/JNA as the problem."}, {"owner": {"reputation": 5374, "user_id": 1161484, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/lg24v.png?s=128&g=1", "display_name": "Daniel Widdis", "link": "https://stackoverflow.com/users/1161484/daniel-widdis"}, "edited": false, "score": 0, "creation_date": 1492703106, "post_id": 43500475, "comment_id": 74101704, "body": "Also track what happens to <code>size</code> after the read.  If it ends up being <code>0</code> then you might be reading a 0-length array and not overwriting the old one."}, {"owner": {"reputation": 451, "user_id": 2203205, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/cdb75fb4c4cf02bf4db8018e02bbbe36?s=128&d=identicon&r=PG", "display_name": "Anass Boukalane", "link": "https://stackoverflow.com/users/2203205/anass-boukalane"}, "edited": false, "score": 0, "creation_date": 1492703511, "post_id": 43500475, "comment_id": 74101988, "body": "i have already tried to generate a new pointer each time in the loop , same result"}, {"owner": {"reputation": 5374, "user_id": 1161484, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/lg24v.png?s=128&g=1", "display_name": "Daniel Widdis", "link": "https://stackoverflow.com/users/1161484/daniel-widdis"}, "edited": false, "score": 0, "creation_date": 1492704230, "post_id": 43500475, "comment_id": 74102472, "body": "If a new pointer is reading an old card ID then the problem is outside of Java/JNA and there&#39;s nothing else we can help you with here."}, {"owner": {"reputation": 5374, "user_id": 1161484, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/lg24v.png?s=128&g=1", "display_name": "Daniel Widdis", "link": "https://stackoverflow.com/users/1161484/daniel-widdis"}, "edited": false, "score": 0, "creation_date": 1492709138, "post_id": 43500475, "comment_id": 74105403, "body": "One final thought. It&#39;s possible that when you first load the DLL it takes a snapshot of the current state, and you may need to unload/reload the DLL.  Again, impossible to further troubleshoot with what you have given us, but offering suggestions on how you can narrow this down."}], "tags": [], "owner": {"reputation": 5374, "user_id": 1161484, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/lg24v.png?s=128&g=1", "display_name": "Daniel Widdis", "link": "https://stackoverflow.com/users/1161484/daniel-widdis"}, "is_accepted": false, "score": 3, "last_activity_date": 1492710174, "last_edit_date": 1495540015, "creation_date": 1492616917, "answer_id": 43500475, "question_id": 43499744, "link": "https://stackoverflow.com/questions/43499744/java-and-jna-passing-params-for-c-function/43500475#43500475", "title": "Java and JNA passing params for C function", "body": "<p>Your mapping of <code>id</code> is wrong: you cannot pass a primitive array as an argument via JNA.</p>\n\n<p>You should change your interface to use a <code>Pointer</code>:</p>\n\n<pre><code>int ReadCP(Pointer id, IntByReference size);\n</code></pre>\n\n<p>Then you would allocate native-side memory for id:</p>\n\n<pre><code>Pointer id = new Memory(10);\n</code></pre>\n\n<p>After passing and retrieving <code>id</code> from the function you would then fetch the byte array from the native memory:</p>\n\n<pre><code>byte[] idByteArray = id.getByteArray(0, 10);\n</code></pre>\n\n<p>There are <a href=\"http://java-native-access.github.io/jna/4.4.0/javadoc/com/sun/jna/Pointer.html\" rel=\"nofollow noreferrer\">other <code>get*()</code> methods for <code>Pointer</code></a>, such as <code>getString()</code>, that may or may not be more applicable to the ultimate type of the <code>Id</code> field that you're trying to fetch.</p>\n\n<p>As far as the value updating once but not after repeated calls, this sounds like at some point the system is taking a \"snapshot\" of the current hardware state and you must find a way to refresh that snapshot.  Troubleshooting steps would include:</p>\n\n<ul>\n<li>Clear out the data in the array/pointer and see if it's repopulated from the C-side DLL (the problem is not in your JNA it's in usage of the DLL).</li>\n<li>Check your <code>size</code> variable throughout the process to make sure it's remaining the value of 10 you expect.  It's possible that when you remove the card it may return 0, and then if you try to read a new value (of length 0) you're not overwriting the old array past index 0.</li>\n<li>Alternate which card is used first.</li>\n<li>Alternate the order of starting the program, loading, and swapping out the cards to collect data on which step of the process seems to cause the value to stick.</li>\n<li>Investigate the DLL for methods to \"refresh\" or \"reload\" a snapshot of the hardware state.</li>\n<li>Try <a href=\"https://stackoverflow.com/questions/41056322/how-to-dispose-library-loaded-with-jna\">unloading and reloading the DLL</a> in between loops.</li>\n</ul>\n\n<p>Most of these steps are outside of the scope of your question, on using JNA, and would require you to provide more information about the DLL being used for us to help further.</p>\n"}, {"tags": [], "owner": {"reputation": 451, "user_id": 2203205, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/cdb75fb4c4cf02bf4db8018e02bbbe36?s=128&d=identicon&r=PG", "display_name": "Anass Boukalane", "link": "https://stackoverflow.com/users/2203205/anass-boukalane"}, "is_accepted": false, "score": 0, "last_activity_date": 1492689609, "creation_date": 1492689609, "answer_id": 43518936, "question_id": 43499744, "link": "https://stackoverflow.com/questions/43499744/java-and-jna-passing-params-for-c-function/43518936#43518936", "title": "Java and JNA passing params for C function", "body": "<p>here the business login in the while loop</p>\n\n<pre><code>while(true){ \n try { \n   Thread.sleep(1500); \n } catch (InterruptedException e1) \n { \n   e1.printStackTrace();\n } \nif(demo.cardPresent() == 0 &amp;&amp; read == false){\n demo.ReadCP(id, size);\n try { \nSystem.out.println(\" -- id : \" + new String(id.getByteArray(0, 10),\"UTF-8\"));\n read = true;\n continue; \n} catch (Exception ex) {\n ex.printStackTrace();\n }\n}else if(demo.cardPresent() != 0){\nread = false;\n} \n</code></pre>\n"}], "owner": {"reputation": 451, "user_id": 2203205, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/cdb75fb4c4cf02bf4db8018e02bbbe36?s=128&d=identicon&r=PG", "display_name": "Anass Boukalane", "link": "https://stackoverflow.com/users/2203205/anass-boukalane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 692, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1492710174, "creation_date": 1492614946, "last_edit_date": 1492615309, "question_id": 43499744, "link": "https://stackoverflow.com/questions/43499744/java-and-jna-passing-params-for-c-function", "title": "Java and JNA passing params for C function", "body": "<p>I am using JNA to call a function from a C DLL :</p>\n\n<pre><code>extern _declspec( dllexport )\nint ReadCP(IN OUT unsigned char* Id, IN OUT unsigned int* Size);\n</code></pre>\n\n<p>In Java I am using an interface for JNA with this method :</p>\n\n<pre><code>int ReadCP(byte[] id, IntByReference size);\n</code></pre>\n\n<p>I load the DLL successfully and call the method that way :</p>\n\n<pre><code>byte[] id= new byte[10];\nIntByReference size = new IntByReference();\nIMimicDLL demo = (IMimicDLL) Native.loadLibrary(\"MyLib\", IMimicDLL.class);\nsize.setValue(10);\n//....\nwhile(true){\n  demo.ReadCP(id, size);\n  //...\n}\n</code></pre>\n\n<p>The first time in the loop <code>id</code> has a correct value, but it keeps the same value even if the logic should change it. What can be the problem? Is that something to do with pointers?</p>\n"}, {"tags": ["c", "arrays", "malloc"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1492614979, "post_id": 43499685, "comment_id": 74053708, "body": "You probably shouldn&#39;t increment <code>(*p)++</code> before you check whether <code>a == NULL</code>."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 2, "creation_date": 1492615003, "post_id": 43499685, "comment_id": 74053715, "body": "which line does it crash on? run it in a debugger to find out"}, {"owner": {"reputation": 53, "user_id": 7361551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a41c1bc30c4d4695f948ff00e0159816?s=128&d=identicon&r=PG&f=1", "display_name": "ILoveTheDoggos", "link": "https://stackoverflow.com/users/7361551/ilovethedoggos"}, "edited": false, "score": 0, "creation_date": 1492615235, "post_id": 43499685, "comment_id": 74053879, "body": "when the code scope <code>r[(*p)-1] = a</code> after <code>malloc</code> call"}, {"owner": {"reputation": 9173, "user_id": 172265, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/7d658f2c111ae5d8b48f0f0aa7624372?s=128&d=identicon&r=PG", "display_name": "lang2", "link": "https://stackoverflow.com/users/172265/lang2"}, "edited": false, "score": 0, "creation_date": 1492615799, "post_id": 43499685, "comment_id": 74054257, "body": "I&#39;m assuming <code>rama()</code> is <code>path()</code>? You only allocate memory when you actually found the value, which means that all the previous navigation references <code>NULL</code> pointer returned by <code>path()</code>. I&#39;m guessing that&#39;s your first crash."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 1, "creation_date": 1492616116, "post_id": 43499685, "comment_id": 74054517, "body": "You forgot to ask a question. Is your question, &quot;how do you figure out what caused a segmentation fault&quot;? What debugger are you using?"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1492616927, "post_id": 43499685, "comment_id": 74055089, "body": "The memory location <code>*p</code> is used by all recursions, but your code only ever increments it, never decrements it. I think this is the cause of your problem. I also think it would be easier to pass the depth as a number instead of as a pointer to a location holding a number."}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 7361551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a41c1bc30c4d4695f948ff00e0159816?s=128&d=identicon&r=PG&f=1", "display_name": "ILoveTheDoggos", "link": "https://stackoverflow.com/users/7361551/ilovethedoggos"}, "edited": false, "score": 0, "creation_date": 1492620505, "post_id": 43500802, "comment_id": 74057513, "body": "thanks, now i understand"}], "tags": [], "owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "is_accepted": true, "score": 1, "last_activity_date": 1492617902, "creation_date": 1492617902, "answer_id": 43500802, "question_id": 43499685, "link": "https://stackoverflow.com/questions/43499685/segmentation-fault-to-create-malloc-array-of-node/43500802#43500802", "title": "segmentation fault to create malloc array of node", "body": "<p>The main problem with your original code seems to be that the location holding the current depth is shared between all recursions, and it is only ever incremented, never decremented. I think a cleaner approach is to pass the depth as an actual number, rather than as a pointer to a shared depth location, as in the following code:</p>\n\n<pre><code>typedef struct nodo {\n  int v;\n  struct nodo *left, *right;\n} Nodo;\n\nNodo **path(Nodo *a, int v, int depth) {\n  Nodo **r;\n  if (a == NULL) {\n    return NULL;\n  }\n  if (a-&gt;v == v) {\n    r = malloc((depth+1)*sizeof(Nodo*));\n  }\n  else if (a-&gt;v &lt; v) {\n    r = path(a-&gt;right, v, depth+1);\n  }\n  else {\n    r = path(a-&gt;left, v, depth+1);\n  }\n  if (r != NULL) {\n    r[depth] = a;\n  }\n  return r;\n}\n</code></pre>\n\n<p>The initial call should use 0 for the depth, for example: <code>p = path(node, value, 0);</code>.</p>\n\n<p>To avoid having to pass 0 in the initial call, the recursive part of the function could be factored out as follows:</p>\n\n<pre><code>Nodo **path_(Nodo *a, int v, int depth) {\n  Nodo **r;\n  if (a == NULL) {\n    return NULL;\n  }\n  if (a-&gt;v == v) {\n    r = malloc((depth+1)*sizeof(Nodo*));\n  }\n  else if (a-&gt;v &lt; v) {\n    r = path_(a-&gt;right, v, depth+1);\n  }\n  else {\n    r = path_(a-&gt;left, v, depth+1);\n  }\n  if (r != NULL) {\n    r[depth] = a;\n  }\n  return r;\n}\n\nNodo **path(Nodo *a, int v) {\n  return path_(a, v, 0);\n}\n</code></pre>\n\n<p>Then the initial call can be, for example: <code>p = path(node, value);</code>.</p>\n"}], "owner": {"reputation": 53, "user_id": 7361551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a41c1bc30c4d4695f948ff00e0159816?s=128&d=identicon&r=PG&f=1", "display_name": "ILoveTheDoggos", "link": "https://stackoverflow.com/users/7361551/ilovethedoggos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "closed_date": 1492631418, "accepted_answer_id": 43500802, "answer_count": 1, "score": -2, "last_activity_date": 1546924526, "creation_date": 1492614802, "last_edit_date": 1546924526, "question_id": 43499685, "link": "https://stackoverflow.com/questions/43499685/segmentation-fault-to-create-malloc-array-of-node", "closed_reason": "Not suitable for this site", "title": "segmentation fault to create malloc array of node", "body": "<p>I'm trying to create a function <code>path()</code>, which would return an array of node pointers with the path of node when a find a element within the tree. I tried to do with recursion, but I don't know what is wrong, the function path have a signature: <code>Node *a</code>, the binary tree, <code>int v</code>, the value to find, and <code>int *p</code> like as a counter of visited nodes.</p>\n\n<p>Here's my code:</p>\n\n<pre><code>typedef struct nodo {\n  int v;\n  struct nodo *left, *right;\n} Nodo;\n\nNodo **path(Nodo *a, int v, int *p) {\n  (*p)++;\n  Nodo **r = NULL;\n  if (a == NULL) {\n    return NULL;\n  }\n  if (a-&gt;v == v) {\n    r = (Nodo**)malloc((*p)*sizeof(Nodo*));\n    r[(*p)-1] = a;\n    return r;\n  }\n\n  else if (a-&gt;v &lt; v) {\n    Nodo **r = path(a-&gt;right, v, p);\n    r[(*p)-1] = a;\n    return r;\n  }\n  else if (a-&gt;v &gt; v) {\n    Nodo **r = path(a-&gt;left, v, p);\n    r[(*p)-1] = a;\n    return r;\n  }\n  return r;\n}\n</code></pre>\n"}, {"tags": ["c", "string"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1492614599, "post_id": 43499542, "comment_id": 74053428, "body": "Are you <i>sure</i> about <code>word[running1]=repeated</code>? You don&#39;t mean e.g. <code>repeated[i++] = word[running1]</code> (where <code>i</code> is an integer variable initialized to zero)? And don&#39;t forget to <i>terminate</i> the <code>repeated</code> array or it will not really be a string."}, {"owner": {"reputation": 11, "user_id": 7890482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pLssK.jpg?s=128&g=1", "display_name": "Victor Barboza", "link": "https://stackoverflow.com/users/7890482/victor-barboza"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1492614737, "post_id": 43499542, "comment_id": 74053523, "body": "I&#39;ll try it,thanks!"}], "owner": {"reputation": 11, "user_id": 7890482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pLssK.jpg?s=128&g=1", "display_name": "Victor Barboza", "link": "https://stackoverflow.com/users/7890482/victor-barboza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "closed_date": 1492614849, "answer_count": 0, "score": 0, "last_activity_date": 1492614849, "creation_date": 1492614394, "last_edit_date": 1492614849, "question_id": 43499542, "link": "https://stackoverflow.com/questions/43499542/specifically-about-strings-on-c", "closed_reason": "Duplicate", "title": "specifically about strings on C", "body": "<p>I am just a beginning in C and my question is on the topic of strings. I'm studying from a blog who gives the content and then a few questions, one of which is to code a program that reads a string (being specific, a word) and returns which of the letters of the word is repeated. I did the code but when I run it, it returns <code>@@</code>. Can someone help me or tell me where is the mistake?\ncode below:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n#include &lt;string.h&gt;\n\nint main()\n{\n    char word[11];\n    int running1;\n    int running2;\n    char repeated[11];\n\n    printf(\"Give us a word:\");\n    fgets(word, 11, stdin);\n    printf(\"word:%s\", word);\n\n    for (running1 = 0; running1 &lt; 10; running1++)\n        for (running2 = 0; running2 &lt; 10; running2++)\n            if(word[running1] == word[running2])\n            {\n                word[running1] = repeated;\n            }\n\n    printf(\"\\nletters repeated:%s\", repeated);\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 5, "creation_date": 1492613556, "post_id": 43499185, "comment_id": 74052660, "body": "Please enable compiler warnings. They basically answer your question. Also <a href=\"http://stackoverflow.com/q/2979209/3425536\"><code>fflush(stdin)</code> is undefined behavior</a>."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 3, "creation_date": 1492613659, "post_id": 43499185, "comment_id": 74052746, "body": "Given <code>int *speed</code>, what is <code>&amp;speed</code>?  And <code>fflush(stdin);</code>?"}, {"owner": {"reputation": 2279, "user_id": 1370785, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/oASta.jpg?s=128&g=1", "display_name": "jiveturkey", "link": "https://stackoverflow.com/users/1370785/jiveturkey"}, "edited": false, "score": 3, "creation_date": 1492614275, "post_id": 43499185, "comment_id": 74053213, "body": "You&#39;ve got pointer problems, as Andrew Henle is pointing out.  Instead of passing pointers to <code>scanf</code> in <code>createCar</code> you are passing pointers-to-pointers.  Your <code>while</code>&#39;s are being disregarded b/c you are comparing pointer values to 0 instead of values (i.e. use <code>*year</code>), also in <code>case 2</code> do not compare <code>topSpeed == NULL</code> because <code>topSpeed</code> is not a pointer.  Hint: Read up on pointers.  But this is a nice exercise."}], "answers": [{"tags": [], "owner": {"reputation": 310, "user_id": 2962431, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000339190603/picture?type=large", "display_name": "thomas", "link": "https://stackoverflow.com/users/2962431/thomas"}, "is_accepted": false, "score": 0, "last_activity_date": 1492619229, "last_edit_date": 1492619229, "creation_date": 1492618867, "answer_id": 43501128, "question_id": 43499185, "link": "https://stackoverflow.com/questions/43499185/parameters-not-passing-correctly-back-to-main/43501128#43501128", "title": "Parameters not passing correctly back to main", "body": "<p>You have to dereference the age and year pointer to get/set its value.</p>\n\n<pre><code>//Calculate age of car\n*age = now - *year;\n</code></pre>\n\n<p>You have to remove the '&amp;' at the <code>scanf()</code> in <code>createVar</code>, because <code>speed</code>, <code>year</code> and <code>bhp</code> are already pointers to int.</p>\n\n<p>Enabling compiler warnings and resolving them would avoid you troubles!</p>\n"}], "owner": {"reputation": 11, "user_id": 6790792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57e62590632eee494efde15d9b2ec224?s=128&d=identicon&r=PG&f=1", "display_name": "Bob Smith", "link": "https://stackoverflow.com/users/6790792/bob-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1492619229, "creation_date": 1492613494, "last_edit_date": 1492613749, "question_id": 43499185, "link": "https://stackoverflow.com/questions/43499185/parameters-not-passing-correctly-back-to-main", "title": "Parameters not passing correctly back to main", "body": "<p><strong>Source outline:</strong> User selects option either to 1. Make Bugatti; 2. Create Bugatti; or 3. Exit program. After each option is complete, the user should be returned back to the menu to select another option.</p>\n\n<p>(Note: the user cannot display the car until it is created, hence the <code>if</code> statement in case 2)</p>\n\n<p><strong>The problem:</strong> User's inputs for <code>createCar()</code> function are not being returned back into <code>main()</code> (specifically to case 2 - Display Bugatti) and is displaying some large, odd values, instead of the user's inputs. I know it has something to do with the values not being stored into memory/called back to <code>main()</code>.</p>\n\n<p>Also, the <code>while</code> statements in <code>createCar()</code> function are completely being disregarded when I use parameters for some reason.</p>\n\n<p>I would appreciate answers in code to make things easier to resolve personally if possible, thanks!</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n#define now 2017\n\n//Function headers\nvoid printMenu(void);\nvoid createCar(int *speed, int *year, int *bhp, int *age);\n\nint main(void)\n{\n    //Variables\n    int userInput;\n    int topSpeed, yearMade, horsepower, carAge;\n\n    /***Loop program to return to menu after option is completed***/\n    for(;;)\n    {\n        //Print menu and get input from user\n        printMenu();\n        scanf(\"%i\", &amp;userInput), fflush(stdin);\n\n        //Validate input\n        while(userInput &lt; 1 || userInput &gt; 3)\n        {\n            printf(\"\\nWrong input, please retry...\\n\");\n            scanf(\"%i\", &amp;userInput), fflush(stdin);\n        }\n\n        //Make decisions after user's choice\n        switch(userInput)\n        {\n            //Option 1: Create car then return to menu\n            case 1:\n                createCar(&amp;topSpeed, &amp;yearMade, &amp;horsepower, &amp;carAge);\n                continue;\n\n            //Option 2: Read car details (if created) then return to menu\n            case 2:\n                if(topSpeed == NULL)\n                {\n                    printf(\"\\nYou must first create a car, please retry...\\n\\n\");\n                    continue;\n                }\n                printf(\"\\n----Bugatti Veyron----\\n\");\n                printf(\"Top Speed: %i km/h\\nYear made: %i\\nAge: %i years old\\nHorsepower: %i bhp\\n\", &amp;topSpeed, &amp;yearMade, &amp;horsepower, &amp;carAge);\n                printf(\"----------------------\\n\");\n                continue;\n\n            //Option 3: Kill program\n            case 3:\n                exit(1);    \n        }\n    }\n    return 0;\n}\n\n//Function: Display menu\nvoid printMenu(void)\n{\n    printf(\"-----------------------------------------\\n\");\n    printf(\"[Bob's Custom Car Creation Complex v1.0]\\n\");\n    printf(\"1. Create Bugatti\\n2. Display Bugatti\\n3. Exit\\n\");\n    printf(\"-----------------------------------------\\n\");\n}\n\n//Function: Make a car + validate inputs\nvoid createCar(int *speed, int *year, int *bhp, int *age)\n{\n    //Prompt user for top speed + validate input\n    printf(\"Enter the top speed of your Bugatti:\");\n    scanf(\"%i\", &amp;speed), fflush(stdin);\n\n    while(speed &lt;=0)\n    {\n        printf(\"You cannot have a top speed of nothing silly :-D\\nPlease retry...\\n\");\n        scanf(\"%i\", &amp;speed), fflush(stdin);\n    }\n    //Prompt user for year mate + validate input\n    printf(\"What year is your Bugatti produced?:\");\n    scanf(\"%i\", &amp;year), fflush(stdin);\n\n    while(year &lt;=0)\n    {\n        printf(\"You cannot own a Bugatti that is from the future laddy!!\\nPlease retry...\\n\");\n        scanf(\"%i\", &amp;year), fflush(stdin);\n    }\n    //Calculate age of car\n    age = now - year;\n\n    //Prompt user for horsepower + validate input\n    printf(\"How much horsepower does your Bugatti have?:\");\n    scanf(\"%i\", &amp;bhp), fflush(stdin);\n\n    while(bhp &lt;=0)\n    {\n        printf(\"A Bugatti with no engine... doesn't sound too promising :-O\\nPlease retry...\\n\");\n        scanf(\"%i\", &amp;bhp), fflush(stdin);\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "opengl"], "comments": [{"owner": {"reputation": 597, "user_id": 3105008, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/37eda99332c40c71723731e34bed4687?s=128&d=identicon&r=PG&f=1", "display_name": "CMilby", "link": "https://stackoverflow.com/users/3105008/cmilby"}, "edited": false, "score": 0, "creation_date": 1492616504, "post_id": 43499097, "comment_id": 74054792, "body": "Do &quot;xInc&quot; and &quot;zInc&quot; have values? They initially are 0 and are never set. If you were to set &quot;xInc&quot; to 1, for example, your camera would move right when you press &#39;w&#39;."}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1492616712, "post_id": 43499097, "comment_id": 74054936, "body": "Your &#39;w&#39; and &#39;s&#39; keys are moving the camera in both X/Z <b>world</b> axis (not camera space) at once. It would be better to move only in one axis. Another matter is if you want to move the camera following world or camera axis."}, {"owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "edited": false, "score": 0, "creation_date": 1492666881, "post_id": 43499097, "comment_id": 74076012, "body": "take a look at  <a href=\"http://stackoverflow.com/a/28084380/2521214\">Understanding 4x4 homogenous transform matrices</a> especially the links at the end (edit3) there are examples of keyboard camera and player control in local coordinates of each ..."}, {"owner": {"reputation": 86, "user_id": 7144987, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/426fc0e1df03135dc6e2ec84de8aa01b?s=128&d=identicon&r=PG&f=1", "display_name": "DevFallingstar", "link": "https://stackoverflow.com/users/7144987/devfallingstar"}, "edited": false, "score": 0, "creation_date": 1492676740, "post_id": 43499097, "comment_id": 74081646, "body": "Thanks guys. I really appreciate your answers. xInc and yInc was variables that represent the vector of each x and y coordinate, but with my mistake, i just forgot to type it in to my codes. I&#39;m sorry. I&#39;ll changed the moving coordinates as Said, and i&#39;ll watch the article about <a href=\"http://stackoverflow.com/questions/28075743/how-do-i-compose-a-rotation-matrix-with-human-readable-angles-from-scratch/28084380#28084380\">Understanding 4x4 homogenous transform matrices</a>.  Thank you :)"}], "owner": {"reputation": 86, "user_id": 7144987, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/426fc0e1df03135dc6e2ec84de8aa01b?s=128&d=identicon&r=PG&f=1", "display_name": "DevFallingstar", "link": "https://stackoverflow.com/users/7144987/devfallingstar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 113, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1492616935, "creation_date": 1492613259, "last_edit_date": 1492616935, "question_id": 43499097, "link": "https://stackoverflow.com/questions/43499097/side-camera-moving-in-opengl", "title": "Side camera moving in OpenGL", "body": "<p>Ok, I'm done with forward and backward movement with <code>gluLookAt()</code> function.<br>\nI subtract <code>eyeX</code> from <code>atX</code>, and <code>eyeZ</code> from <code>atZ</code>. Names of each variables are <code>xVector</code> and <code>zVector</code>. And I add it with some multiplication with constant.</p>\n\n<p>From now on, I have to calculate side movement vector. But how can I get that one? Is there any way to move a camera from side to side with z and x vectors?</p>\n\n<p>I use C, so there's no vector class or some kinds of high-level class/functions.<br>\nI need you guys' help now.</p>\n\n<p>This is my function for camera movement processing,</p>\n\n<pre><code>void cameraProc() {\n    int xInc, zInc;\n\n    at[0] += xTheta;\n    at[1] += yTheta;\n\n    if (keys['w']) {\n        eye[0] += xInc*SPD;\n        at[0] += xInc*SPD;\n\n        eye[2] += zInc*SPD;\n        at[2] += zInc*SPD;\n    }\n    if (keys['a']) {\n        //How?\n    }\n    if (keys['s']) {\n        eye[0] -= xInc*SPD;\n        at[0] -= xInc*SPD;\n\n        eye[2] -= zInc*SPD;\n        at[2] -= zInc*SPD;\n    }\n    if (keys['d']) {\n        //And how?\n    }\n    printf(\"\\nEye : %f %f %f\\n\", eye[0], eye[1], eye[2]);\n    printf(\"At : %f %f %f\\n\", at[0], at[1], at[2]);\n\n    gluLookAt(eye[0], eye[1], eye[2], at[0], at[1], at[2], up[0], up[1], up[2]);\n    at[0] -= xTheta;\n    at[1] -= yTheta;\n}\n</code></pre>\n\n<p>P.s. <code>xTheta</code> and <code>yTheta</code> is variables to spin the camera.</p>\n"}, {"tags": ["c", "static", "storage", "linkage"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1492612093, "post_id": 43498474, "comment_id": 74051454, "body": "Likely because the two independent properties rarely need to be independently used.  In the end, it is asking why C was done this way. - I suspect for simplicity and it matched the art of the time."}, {"owner": {"reputation": 631, "user_id": 3762627, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/62cc959f6d15c5a429116d08a5df4fdb?s=128&d=identicon&r=PG&f=1", "display_name": "Gil-Mor", "link": "https://stackoverflow.com/users/3762627/gil-mor"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1492612282, "post_id": 43498474, "comment_id": 74051631, "body": "@chux, Can you elaborate? I don&#39;t understand why &quot;the two independent properties rarely need to be independently used.&quot;. I don&#39;t understand the relation between static storage and internal linkage and why the two are tightly bound.."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1492612561, "post_id": 43498474, "comment_id": 74051846, "body": "Hopefully the below answer(s) will suffice."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1492612525, "post_id": 43498757, "comment_id": 74051816, "body": "Ah the <code>COMMON</code> statement - shuddder."}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 8, "last_activity_date": 1492612424, "creation_date": 1492612424, "answer_id": 43498757, "question_id": 43498474, "link": "https://stackoverflow.com/questions/43498474/why-storage-class-specifiers-are-used-to-determine-two-independent-properties/43498757#43498757", "title": "Why Storage-Class Specifiers are used to determine two independent properties?", "body": "<p>The reason is mostly historical: linkage came into the design of C language as an afterthought. In the early versions you could redeclare global variables as many times as you wish, and linker would merge all these declarations for you:</p>\n\n<blockquote>\n  <p>Ritchie's original intention had been to model C's rules on FORTRAN COMMON declarations, on the theory that any machine that could handle FORTRAN would be ready for C. In the common-block model, a public variable may be declared multiple times; identical declarations are merged by the linker. (<a href=\"http://www.faqs.org/docs/artu/c_evolution.html\" rel=\"noreferrer\">source</a>)</p>\n</blockquote>\n\n<p>The current rule of a single declaration came later, along with <code>extern</code> keyword. At that point there was a body of C code significant enough to make backward compatibility important. That is probably the reason why language designers refrained from introducing a new keyword for handling linkage, reusing <code>static</code> instead.</p>\n"}], "owner": {"reputation": 631, "user_id": 3762627, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/62cc959f6d15c5a429116d08a5df4fdb?s=128&d=identicon&r=PG&f=1", "display_name": "Gil-Mor", "link": "https://stackoverflow.com/users/3762627/gil-mor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 1, "accepted_answer_id": 43498757, "answer_count": 1, "score": 9, "last_activity_date": 1492612996, "creation_date": 1492611715, "last_edit_date": 1492612996, "question_id": 43498474, "link": "https://stackoverflow.com/questions/43498474/why-storage-class-specifiers-are-used-to-determine-two-independent-properties", "title": "Why Storage-Class Specifiers are used to determine two independent properties?", "body": "<p>From <a href=\"http://en.cppreference.com/w/c/language/storage_duration\" rel=\"nofollow noreferrer\">Storage-class specifiers</a>: </p>\n\n<blockquote>\n  <p>The storage-class specifiers determine two independent properties of the names they declare: storage duration and linkage.</p>\n</blockquote>\n\n<p>So, for example, when <code>static</code> keyword is used on global variables and functions (who's storage class is static anyway) it sets their linkage to Internal-linkage. When used on variables inside functions (which have no linkage) - it sets their storage class to static.</p>\n\n<p>My question is: why is the same specifier used for both things? </p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user3458"}, "edited": false, "score": 0, "creation_date": 1492610349, "post_id": 43497858, "comment_id": 74049998, "body": "Use shuffle to generate an array that contains numbers from 1 to 200 in random order."}, {"owner": {"reputation": 29, "user_id": 7323225, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7032dcec2fc24575553ab1f910dd6e60?s=128&d=identicon&r=PG&f=1", "display_name": "Sven B", "link": "https://stackoverflow.com/users/7323225/sven-b"}, "edited": false, "score": 0, "creation_date": 1492610410, "post_id": 43497858, "comment_id": 74050041, "body": "@Arkadiy can&#39;t, we haven&#39;t learned that yet in class..."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 1, "creation_date": 1492610464, "post_id": 43497858, "comment_id": 74050083, "body": "@Sven B  The program has undefined behavior because the value of the variable x set like x = 100 + rand() % 200; can exceed  the size of the array."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user3458"}, "edited": false, "score": 1, "creation_date": 1492610497, "post_id": 43497950, "comment_id": 74050123, "body": "Simple and square"}, {"owner": {"reputation": 1747, "user_id": 3726902, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/kV59z.png?s=128&g=1", "display_name": "Miket25", "link": "https://stackoverflow.com/users/3726902/miket25"}, "edited": false, "score": 1, "creation_date": 1492612702, "post_id": 43497950, "comment_id": 74051966, "body": "Simple and &quot;squared&quot; \ud83d\ude1c"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1492613048, "post_id": 43497950, "comment_id": 74052254, "body": "It&#39;s simple but not very effective."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 1, "last_activity_date": 1492610422, "creation_date": 1492610422, "answer_id": 43497950, "question_id": 43497858, "link": "https://stackoverflow.com/questions/43497858/how-to-remove-duplicate-elements-from-random-array-i-generated/43497950#43497950", "title": "How to remove duplicate elements from random array I generated?", "body": "<p>A simple solution is to loop over the array and copy each element to a new array, <em>but</em> first check that the value doesn't already exist in the new array.</p>\n"}, {"tags": [], "owner": {"reputation": 25937, "user_id": 338904, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/dea29233fa03ea84f8a853102deb0344?s=128&d=identicon&r=PG", "display_name": "e2-e4", "link": "https://stackoverflow.com/users/338904/e2-e4"}, "is_accepted": false, "score": 0, "last_activity_date": 1492611244, "creation_date": 1492611244, "answer_id": 43498269, "question_id": 43497858, "link": "https://stackoverflow.com/questions/43497858/how-to-remove-duplicate-elements-from-random-array-i-generated/43498269#43498269", "title": "How to remove duplicate elements from random array I generated?", "body": "<p>An <code>O(n)</code> solution, assuming your array contains only letters <em>a</em> to <em>z</em>, consists of creating another small array of 26 integers initialized to zeroes, <code>exist[26]</code>, then for each letter from the the main array, </p>\n\n<ul>\n<li>if <code>exist[letter - 'a'] &gt; 0</code> don't print it</li>\n<li>otherwise print it and increment <code>exist[letter - 'a']</code></li>\n</ul>\n\n<p>for instance,</p>\n\n<pre><code>int exist[26] = { 0 };\n\nfor(int i=0 ; i&lt;x ; i++) {\n   if (exist[a[i] - 'a'] == 0) {\n      exist[a[i] - 'a']++;\n      printf(\"%c \", a[i]);\n   }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1492612303, "creation_date": 1492612303, "answer_id": 43498710, "question_id": 43497858, "link": "https://stackoverflow.com/questions/43497858/how-to-remove-duplicate-elements-from-random-array-i-generated/43498710#43498710", "title": "How to remove duplicate elements from random array I generated?", "body": "<p>For starters the program has undefined behavior due to the statement</p>\n\n<pre><code>x = 100 + rand() % 200;\n</code></pre>\n\n<p>because the calculated value of the variable <code>x</code> can exceed the size of the array.</p>\n\n<p>I think you mean</p>\n\n<pre><code>x = 1 + rand() % 200;\n   ^^^\n</code></pre>\n\n<p>Also it is desirable to call the standard function <code>srand</code> to get different random sequences when the program runs.</p>\n\n<p>The program can look the following way.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\n#define N   200\n\nint main(void) \n{\n    char s[N];\n    size_t n;\n\n    srand( ( unsigned int )time( NULL ) );\n\n    n = 1 + rand() % N;\n\n    for ( size_t i = 0; i &lt; n; i++ )\n    {\n        s[i] = 'a' + rand() % ( 'z' - 'a'  + 1 ); \n    }\n\n    for ( size_t i = 0; i &lt; n; i++ )\n    {\n        putchar( s[i] );\n        if ( ( i + 1 ) % 10 == 0 || i + 1 == n ) putchar( '\\n' );\n    }\n\n    putchar( '\\n');\n\n    size_t m = 0;\n\n    for ( size_t i = 0; i &lt; n; i++ )\n    {\n        size_t j = 0;\n        while ( j &lt; m &amp;&amp; s[j] != s[i] ) j++;\n\n        if ( j == m )\n        {\n            if ( m != i ) s[m] = s[i];\n            ++m;\n        }\n    }\n\n    n = m;\n\n    for ( size_t i = 0; i &lt; n; i++ )\n    {\n        putchar( s[i] );\n        if ( ( i + 1 ) % 10 == 0 || i + 1 == n ) putchar( '\\n' );\n    }\n\n    putchar( '\\n');\n\n    return 0;\n}\n</code></pre>\n\n<p>Its output might be like</p>\n\n<pre><code>bimiwgnkew\ntphzfidwmn\nyqoyoxbbxd\nkalxljfyvj\nupzdoglrez\nedsubgsfjr\nkvrvscgadb\nlxsmdhuoaz\n\nbimwgnketp\nhzfdyqoxal\njvursc\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 7323225, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7032dcec2fc24575553ab1f910dd6e60?s=128&d=identicon&r=PG&f=1", "display_name": "Sven B", "link": "https://stackoverflow.com/users/7323225/sven-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 43497950, "answer_count": 3, "score": 0, "last_activity_date": 1492612303, "creation_date": 1492610197, "question_id": 43497858, "link": "https://stackoverflow.com/questions/43497858/how-to-remove-duplicate-elements-from-random-array-i-generated", "title": "How to remove duplicate elements from random array I generated?", "body": "<p>So I have this code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main() {\n\n    char a[200], b = 0;\n    int x;\n    x = 100 + rand() % 200;\n    for (int i = 0; i &lt; x; i++) {\n        a[i] = 'a' + rand() % 26;\n    }\n\n    for (int i = 0; i &lt; x; i++) {\n        if (b % 10 == 0) { \n            printf(\"\\n%c \", a[i]); \n            b = 0;\n        }\n        else {\n            printf(\"%c \", a[i]);\n        }\n        b++;\n    }\n    printf(\"\\n\");\n\n    return 0;\n\n}\n</code></pre>\n\n<p>Purpose is that I should generate random array of letters from 'a' to 'z' (which I've managed to do) and after that print new array without elements that repeat in first array. I've tried implementing code from <a href=\"http://www.studytonight.com/c/remove-duplicate-element-program.php\" rel=\"nofollow noreferrer\">here</a> for removing duplicate elements but it didn't worked in my code. </p>\n"}, {"tags": ["c", "switch-statement"], "comments": [{"owner": {"reputation": 605, "user_id": 7179161, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-okC4oO7pOyk/AAAAAAAAAAI/AAAAAAAACVU/NjHIR2HSwCQ/photo.jpg?sz=128", "display_name": "Tom", "link": "https://stackoverflow.com/users/7179161/tom"}, "edited": false, "score": 0, "creation_date": 1492610155, "post_id": 43497769, "comment_id": 74049830, "body": "Which language are you using? What do you mean by Artificial Intelligence?"}, {"owner": {"reputation": 3, "user_id": 7890125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vwSJn.jpg?s=128&g=1", "display_name": "Ranjith Madheswaran", "link": "https://stackoverflow.com/users/7890125/ranjith-madheswaran"}, "reply_to_user": {"reputation": 605, "user_id": 7179161, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-okC4oO7pOyk/AAAAAAAAAAI/AAAAAAAACVU/NjHIR2HSwCQ/photo.jpg?sz=128", "display_name": "Tom", "link": "https://stackoverflow.com/users/7179161/tom"}, "edited": false, "score": 0, "creation_date": 1492610232, "post_id": 43497769, "comment_id": 74049890, "body": "I am using C. Responding to the user by the phrases which they provide as input.  <b>Artificial Intelligence</b> can be shortly termed as decision taken by the computer itself."}, {"owner": {"reputation": 9279, "user_id": 3094731, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/yHWeg.jpg?s=128&g=1", "display_name": "Abdullah Khan", "link": "https://stackoverflow.com/users/3094731/abdullah-khan"}, "edited": false, "score": 0, "creation_date": 1492610650, "post_id": 43497769, "comment_id": 74050250, "body": "Hello and welcome to StackOverflow. Please take some time to read the help page, especially the sections named <a href=\"http://stackoverflow.com/help/on-topic\">&quot;What topics can I ask about here?&quot;</a> and <a href=\"http://stackoverflow.com/help/dont-ask\">&quot;What types of questions should I avoid asking?&quot;</a>. And more importantly, please read the Stack Overflow <a href=\"http://meta.stackexchange.com/q/156810/204922\">question checklist</a>. You might also want to learn about <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Examples</a>."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 7890125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vwSJn.jpg?s=128&g=1", "display_name": "Ranjith Madheswaran", "link": "https://stackoverflow.com/users/7890125/ranjith-madheswaran"}, "edited": false, "score": 0, "creation_date": 1492610629, "post_id": 43497973, "comment_id": 74050228, "body": "If so then how could I achieve the task of accepting string as input and giving output based on the inputs. in other words which language will satisfy my requirement ?"}, {"owner": {"reputation": 605, "user_id": 7179161, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-okC4oO7pOyk/AAAAAAAAAAI/AAAAAAAACVU/NjHIR2HSwCQ/photo.jpg?sz=128", "display_name": "Tom", "link": "https://stackoverflow.com/users/7179161/tom"}, "reply_to_user": {"reputation": 3, "user_id": 7890125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vwSJn.jpg?s=128&g=1", "display_name": "Ranjith Madheswaran", "link": "https://stackoverflow.com/users/7890125/ranjith-madheswaran"}, "edited": false, "score": 0, "creation_date": 1492610739, "post_id": 43497973, "comment_id": 74050324, "body": "It depends on what you would like to do with the strings. Do you expect precise strings? keywords? do you care about syntax? Do you want to interpret the meaning? There are many levels of complexity depending on what you would like to do. It is very difficult to answer without more details."}], "tags": [], "owner": {"reputation": 605, "user_id": 7179161, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-okC4oO7pOyk/AAAAAAAAAAI/AAAAAAAACVU/NjHIR2HSwCQ/photo.jpg?sz=128", "display_name": "Tom", "link": "https://stackoverflow.com/users/7179161/tom"}, "is_accepted": false, "score": 0, "last_activity_date": 1492610490, "creation_date": 1492610490, "answer_id": 43497973, "question_id": 43497769, "link": "https://stackoverflow.com/questions/43497769/passing-string-as-a-case-condition/43497973#43497973", "title": "Passing string as a case condition", "body": "<p>The short answer is that a switch in C only accepts integer values, or something easy to cast to an integer (like a character).</p>\n\n<p>There are workarounds tough, like using a hash function or using a series of \u201cif\u201d.</p>\n\n<p>Concerning Artificial Intelligence, this is a vast field, that cannot be addressed with a simple switch. At least for a good result. You can have a look at <a href=\"https://en.wikipedia.org/wiki/Expert_system\" rel=\"nofollow noreferrer\" title=\"expert systems\">expert systems</a> as a start.</p>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": true, "score": 0, "last_activity_date": 1492616038, "creation_date": 1492616038, "answer_id": 43500166, "question_id": 43497769, "link": "https://stackoverflow.com/questions/43497769/passing-string-as-a-case-condition/43500166#43500166", "title": "Passing string as a case condition", "body": "<blockquote>\n  <p>Is it possible to pass string as a case condition in switch case? </p>\n</blockquote>\n\n<p>No - the <code>switch</code> statement only operates on integer values; <code>case</code> labels <em>must</em> be constant integral expressions.  You'd have to map the string onto an integer value, either by using a hash function or a lookup table or something.</p>\n\n<pre><code>#define MAX_LEN 80 // or however long you need\n#define HELLO_STRING <em>some-integer-value</em>\n#define GOODBYE_STRING <em>some-other-integer-value</em>\n#define NO_MAPPING 0\n\nint mapToInteger( const char * str )\n{\n  int mapValue = NO_MAPPING;\n\n  /**\n   * logic to map string to integer\n   */\n  return mapValue;\n}\n\nint main( void )\n{\n  char inputString[MAX_LEN];\n  ...\n  while ( fgets( inputString, sizeof inputString, stdin ) )\n  {\n    switch( mapToInteger( inputString ) ) \n    {\n      case HELLO_STRING: \n        process_hello();\n        break;\n\n      case GOODBYE_STRING:\n        process_goodbye();\n        break;\n\n      default:\n      case NO_MAPPING:\n        i_dont_understand();\n        break;\n    }\n  }\n} \n</code></pre>\n\n<p>Will case or whitespace matter?  In other words, should <code>\"THIS IS A TEST\"</code> and <code>\"This is a test\"</code> and <code>\"tHiS     iS a     TeSt\"</code> all give the same result?  If so, then your <code>mapToInteger</code> function (or whatever you decide to call it) will have to take all that into account.  </p>\n\n<blockquote>\n  <p>If possible, can AI (Artificial Intelligence) be achieved?</p>\n</blockquote>\n\n<p>This is the programming equivalent of asking, \"if I can use a hammer to nail two pieces of wood together, can I build an apartment complex?\"  Yeah, sure, but you need to do a bunch of other stuff as well.  </p>\n"}], "owner": {"reputation": 3, "user_id": 7890125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vwSJn.jpg?s=128&g=1", "display_name": "Ranjith Madheswaran", "link": "https://stackoverflow.com/users/7890125/ranjith-madheswaran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "closed_date": 1492617652, "accepted_answer_id": 43500166, "answer_count": 2, "score": -1, "last_activity_date": 1587180774, "creation_date": 1492609990, "last_edit_date": 1587180774, "question_id": 43497769, "link": "https://stackoverflow.com/questions/43497769/passing-string-as-a-case-condition", "closed_reason": "Needs details or clarity", "title": "Passing string as a case condition", "body": "<p>In C language, is it possible to pass string as a case condition in switch case?\nIf possible, can AI (Artificial Intelligence) be achieved?</p>\n"}, {"tags": ["c", "unsigned-integer"], "comments": [{"owner": {"reputation": 1833, "user_id": 2249798, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/307a8136d4639a5110db1b821227fa9f?s=128&d=identicon&r=PG", "display_name": "m13r", "link": "https://stackoverflow.com/users/2249798/m13r"}, "edited": false, "score": 1, "creation_date": 1492610122, "post_id": 43497767, "comment_id": 74049801, "body": "What is the problem? Why did the solutions not work?"}, {"owner": {"reputation": 605, "user_id": 7179161, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-okC4oO7pOyk/AAAAAAAAAAI/AAAAAAAACVU/NjHIR2HSwCQ/photo.jpg?sz=128", "display_name": "Tom", "link": "https://stackoverflow.com/users/7179161/tom"}, "edited": false, "score": 0, "creation_date": 1492610246, "post_id": 43497767, "comment_id": 74049904, "body": "What do you mean by \u201cconvert\u201d? Convert the value to an ASCII string?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1492610276, "post_id": 43497767, "comment_id": 74049937, "body": "What do you mean by &#39;convert to <code>char *</code>&#39;?  Do you mean <code>char *cp = (char *)uint64_value;</code>, or do you want to convert the number to a string that contains the decimal (hex, octal?) digits for the value?  What&#39;s wrong with <code>snprintf()</code> and <code>PRIu64</code>?  You should show your best effort converted into an MCVE (<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>).  And ask about the problems you&#39;re facing with it."}, {"owner": {"reputation": 287, "user_id": 6766510, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/568206a59e9ebee8cd5f13de980fe5c6?s=128&d=identicon&r=PG&f=1", "display_name": "pier92", "link": "https://stackoverflow.com/users/6766510/pier92"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1492610844, "post_id": 43497767, "comment_id": 74050417, "body": "@JonathanLeffler i want, for example: guint64 value = &quot;12345&quot;; char * cp; //stuff;   printf(&quot;cp=%s,cp) ... with cp=&quot;12345&quot;."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1492610952, "post_id": 43497767, "comment_id": 74050512, "body": "I don&#39;t understand the double quotes in <code>guint64 value = &quot;12345&quot;;</code> \u2014 typo, or please explain.  You can edit a comment for 5 minutes."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1492611422, "post_id": 43497767, "comment_id": 74050887, "body": "The <code>guint64</code> type isn&#39;t strictly standard \u2014 so it isn&#39;t officially clear what <code>printf()</code> conversion specifiers apply.  Assuming it is equivalent to <code>uint64_t</code>, you could use: <code>#include &lt;inttypes.h&gt;</code> / <code>#include &lt;stdio.h&gt;</code> / <code>char poststr[400]; snprintf(poststr, sizeof(poststr), &quot;action=CheckFingerprint&amp;sessionid=%&quot; PRIu64, s_id);</code> to do the job all at once."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1492611509, "post_id": 43497767, "comment_id": 74050950, "body": "Your <code>char *buf; sprintf(buf, &quot;%&quot; PRIu64, s_id);</code> solution fails because you didn&#39;t allocate any space for <code>buf</code> to point at.  You need <code>char buf[20];</code> instead."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1492611575, "post_id": 43497767, "comment_id": 74050997, "body": "Using <code>SCNu64</code> in a context where you&#39;re not using <code>scanf()</code> or one of its relatives is perverse \u2014 a bug, in fact."}, {"owner": {"reputation": 287, "user_id": 6766510, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/568206a59e9ebee8cd5f13de980fe5c6?s=128&d=identicon&r=PG&f=1", "display_name": "pier92", "link": "https://stackoverflow.com/users/6766510/pier92"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1492613650, "post_id": 43497767, "comment_id": 74052738, "body": "Thanks @JonathanLeffler , it works with  #include &lt;inttypes.h&gt; / #include &lt;stdio.h&gt; / char poststr[400]; snprintf(poststr, sizeof(poststr), &quot;action=CheckFingerprint&amp;sessionid=%&quot; PRIu64, s_id);  !"}], "answers": [{"tags": [], "owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "is_accepted": false, "score": 4, "last_activity_date": 1492611797, "last_edit_date": 1492611797, "creation_date": 1492611325, "answer_id": 43498302, "question_id": 43497767, "link": "https://stackoverflow.com/questions/43497767/uint64-to-string-in-c/43498302#43498302", "title": "uint64 to string in C", "body": "<p><code>sprintf</code> is the right way to go with an unsigned 64 bit format specifier.</p>\n\n<p>You'll need to allocate enough space for 16 hex digits and the null byte. Here I've allocated 20 bytes to accommodate a leading <code>0x</code> as well and then I rounded it up to 20 for no good reason other than it feels better than 19.</p>\n\n<pre><code>char foo[20];\nsprintf(foo, \"0x%016\" PRIx64, (uint64_t)numberToConvert);\n</code></pre>\n\n<p>will print the number in hex with leading <code>0x</code> and leading zeros padded up to 16. You do not need the cast if <code>numberToConvert</code> is already a <code>uint64_t</code></p>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 1, "last_activity_date": 1492611726, "creation_date": 1492611726, "answer_id": 43498479, "question_id": 43497767, "link": "https://stackoverflow.com/questions/43497767/uint64-to-string-in-c/43498479#43498479", "title": "uint64 to string in C", "body": "<blockquote>\n  <p>i have a uint64 value that i want to convert into char* because of it have to be inserted as payload of an HTTP POST request.</p>\n</blockquote>\n\n<p>What you have is a fundamental misunderstanding.</p>\n\n<p>To insert a text representation of your value into a document, you need to convert it to a <em>sequence of characters</em>, which is quite a different thing from a pointer to a character (<code>char *</code>).  One of your options, which seems to be what you're really after, is to convert the value to a sequence of characters in the form of a C string -- that is, a null-terminated array of characters.  You would then have or be able to obtain a pointer to the first character in the sequence.</p>\n\n<p>That explains what's wrong with this attempted solution:</p>\n\n<blockquote>\n<pre><code>char *buf;\nsprintf(buf, \"%\" PRIu64, s_id);\n</code></pre>\n</blockquote>\n\n<p>You are trying to write the string representation of your number into the array pointed-to by <code>buf</code>, <em>but it doesn't point to one</em>.  Not having been initialized or assigned, its value is indeterminate.</p>\n\n<p>Even if you your <code>buf</code> pointed to an array, it is essential that the array be long enough to accommodate all the digits of the value's decimal representation, plus a terminator.  That's probably what's wrong with your other attempt:</p>\n\n<blockquote>\n<pre><code>char ses[8]; ltoa(s_id,ses,10)\n</code></pre>\n</blockquote>\n\n<p>An unsigned, 64-bit binary number may require up to 20 decimal digits, plus you need space for a terminator.  The array you're providing is not nearly large enough, unless you can be confident that the actual values you're going to write will not exceed 9,999,999 (which is well within the range of a 32-bit integer).</p>\n"}], "owner": {"reputation": 287, "user_id": 6766510, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/568206a59e9ebee8cd5f13de980fe5c6?s=128&d=identicon&r=PG&f=1", "display_name": "pier92", "link": "https://stackoverflow.com/users/6766510/pier92"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3280, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1492614566, "creation_date": 1492609982, "last_edit_date": 1495541378, "question_id": 43497767, "link": "https://stackoverflow.com/questions/43497767/uint64-to-string-in-c", "title": "uint64 to string in C", "body": "<p>I have a <code>uint64</code> value that I want to convert into a string because it has to be inserted as the payload of an HTTP POST request.</p>\n\n<p>I've already tried many solutions (<code>ltoa</code>, <a href=\"https://stackoverflow.com/questions/8323159/how-to-convert-uint64-t-value-in-const-char-string\">this</a> solution ) but my problem still remains.</p>\n\n<p>My function is the following:</p>\n\n<pre><code>void check2(char* fingerprint, guint64 s_id) {\n\n  //stuff\n  char poststr[400] = \"action=CheckFingerprint&amp;sessionid=\";\n\n  //convert s_id to, for example, char* myChar\n  strcat(poststr, myChar);\n}\n</code></pre>\n\n<p>I want to convert s_id to char*. I've tried:</p>\n\n<p>1)  <code>char ses[8]; ltoa(s_id,ses,10)</code>  but I have a segmentation fault;</p>\n\n<p>2)   <code>char *buf; sprintf(buf, \"%\" PRIu64, s_id);</code></p>\n\n<p>I'm working on a APIs, so I have seen that when this <code>guint64</code> variable is printed, it has the following form:</p>\n\n<pre><code>JANUS_LOG(LOG_INFO, \"Creating new session: %\"SCNu64\"\\n\", session_id);\n</code></pre>\n"}, {"tags": ["c", "arrays", "function"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1492609017, "post_id": 43497319, "comment_id": 74048914, "body": "And what is the problem with the code you show? Please take some time to read <a href=\"http://stackoverflow.com/help\">the help pages</a>, and <a href=\"http://stackoverflow.com/help/how-to-ask\">read about how to ask good questions</a>."}, {"owner": {"reputation": 8510, "user_id": 1292918, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/44cdb725bf1a393149554bae7f5f9d46?s=128&d=identicon&r=PG", "display_name": "Toby", "link": "https://stackoverflow.com/users/1292918/toby"}, "edited": false, "score": 0, "creation_date": 1492609287, "post_id": 43497319, "comment_id": 74049146, "body": "Additionally, StackOverflow allows you to add pictures to questions. You are more likely to get good answers if you add the picture here instead of just linking to it - you can do this by <b>editing</b> your question."}, {"owner": {"reputation": 11, "user_id": 7889893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63b37fc28f08f016b0077383496c16e0?s=128&d=identicon&r=PG&f=1", "display_name": "Anas Alsakkal", "link": "https://stackoverflow.com/users/7889893/anas-alsakkal"}, "edited": false, "score": 0, "creation_date": 1492609560, "post_id": 43497319, "comment_id": 74049361, "body": "unfortunately I cannot add pictures right now !"}, {"owner": {"reputation": 11, "user_id": 7889893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63b37fc28f08f016b0077383496c16e0?s=128&d=identicon&r=PG&f=1", "display_name": "Anas Alsakkal", "link": "https://stackoverflow.com/users/7889893/anas-alsakkal"}, "edited": false, "score": 0, "creation_date": 1492609678, "post_id": 43497319, "comment_id": 74049443, "body": "the problem with my code that its only for particular two arrays"}, {"owner": {"reputation": 8510, "user_id": 1292918, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/44cdb725bf1a393149554bae7f5f9d46?s=128&d=identicon&r=PG", "display_name": "Toby", "link": "https://stackoverflow.com/users/1292918/toby"}, "edited": false, "score": 0, "creation_date": 1492609795, "post_id": 43497319, "comment_id": 74049532, "body": "Also, the code you have included is missing a closing brace for the first <code>for</code>."}, {"owner": {"reputation": 11, "user_id": 7889893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63b37fc28f08f016b0077383496c16e0?s=128&d=identicon&r=PG&f=1", "display_name": "Anas Alsakkal", "link": "https://stackoverflow.com/users/7889893/anas-alsakkal"}, "reply_to_user": {"reputation": 8510, "user_id": 1292918, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/44cdb725bf1a393149554bae7f5f9d46?s=128&d=identicon&r=PG", "display_name": "Toby", "link": "https://stackoverflow.com/users/1292918/toby"}, "edited": false, "score": 0, "creation_date": 1492610058, "post_id": 43497319, "comment_id": 74049741, "body": "yeah I just noticed that , sorry for that @Toby"}], "owner": {"reputation": 11, "user_id": 7889893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63b37fc28f08f016b0077383496c16e0?s=128&d=identicon&r=PG&f=1", "display_name": "Anas Alsakkal", "link": "https://stackoverflow.com/users/7889893/anas-alsakkal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1492609973, "creation_date": 1492608860, "last_edit_date": 1492609973, "question_id": 43497319, "link": "https://stackoverflow.com/questions/43497319/alignment-offset-shifting-arrays-with-multiplication-and-addition", "title": "Alignment (offset - shifting) arrays with multiplication and addition", "body": "<p>I have two arrays and I want to multiply them and then add the results to form an output array. But I need to shift the first array to where its center overlaps with the top-left element of the second array and then multiply and add up the result and put it in the first element of the output array. And then repeat the process for all elements. \nThe picture in the link explains what I mean:</p>\n\n<p><a href=\"https://drive.google.com/open?id=0B21Hup_IhGDddmFJRDZZaWR3QUE\" rel=\"nofollow noreferrer\">https://drive.google.com/open?id=0B21Hup_IhGDddmFJRDZZaWR3QUE</a></p>\n\n<p>I tried a specific answer for specific elements for the arrays just to get the idea first, but I need to apply the idea for any two arrays! </p>\n\n<p>My code :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define XKERN 3\n#define YKERN 3\n#define XMAX 3\n#define YMAX 4\n\nint main(void) {\n    int input[XMAX][YMAX] = {{1,2,3,4}, {5,6,7,8}, {9, 10, 11, 12}};\n    int fkern[XKERN][YKERN] = {{3,2,1},{0,0,0},{-3,-2,-1}};\n    int output[XMAX][YMAX];\n    int ofsx,ofsy,total,fkx,fky,i,j,ix,jy;\n    for(i=0;i&lt; XMAX;i++)\n    {\n        for(j=0;j&lt; YMAX;j++,total=0)  \n        {\n            ofsx=i;\n            ofsy=j;\n            for(jy=0,fky=0;jy&lt; YMAX||fky&lt; YKERN;jy++,fky++ )\n            {\n                for(ix=0,fkx=0;ix&lt; XMAX||fkx&lt; XKERN;ix++,fkx++)\n                {\n                    if((ofsx-ix)&gt;=-1 &amp;&amp; (ofsx-ix)&lt;=1 &amp;&amp;  \\\n                        (ofsy-jy)&gt;=-1 &amp;&amp; (ofsy-jy)&lt;=1 &amp;&amp; \\\n                        ((ofsx+fkx)-1)&gt;=0 &amp;&amp; ((ofsx+fkx)-1)&lt;=XMAX &amp;&amp; \\\n                        ((ofsy+fky)-1)&gt;=0 &amp;&amp; ((ofsy+fky)-1)&lt;=YMAX)\n\n                    {\n                        total=total+(input[ix][jy]*fkern[fkx][fky]);\n                    }\n                 }\n                 output[i][j]=total;\n                 printf(\"[%d][%d]=%d\\n\",i,j,output[i][j]);\n             }\n         }\n\n     return 0;\n }\n</code></pre>\n\n<p>I would really appreciate it if you help me.</p>\n"}, {"tags": ["c", "eclipse", "makefile", "eclipse-cdt"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1492608651, "post_id": 43497170, "comment_id": 74048611, "body": "Is it CDT managed or a Makefile project? I don&#39;t think you can customize <code>clean</code> in the former."}, {"owner": {"reputation": 2479, "user_id": 1269997, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/dE3UU.jpg?s=128&g=1", "display_name": "sanchop22", "link": "https://stackoverflow.com/users/1269997/sanchop22"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1492608891, "post_id": 43497170, "comment_id": 74048813, "body": "It is CDT managed."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1492609230, "post_id": 43497170, "comment_id": 74049101, "body": "I think you can do some trick with the <code>Builders</code> tab in the <code>Project Properties</code>. You can <code>Edit</code> the CDT builder to not run on <code>clean</code> and configure some &quot;external tool&quot; instead, which can be you clean command... Never done this though. Or just convert to Makefile project and have your <code>clean</code> target written there."}], "answers": [{"tags": [], "owner": {"reputation": 1100, "user_id": 806501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63905e6c5ccb638b73025610d071d4dc?s=128&d=identicon&r=PG", "display_name": "Almir", "link": "https://stackoverflow.com/users/806501/almir"}, "is_accepted": false, "score": 0, "last_activity_date": 1552385131, "creation_date": 1552385131, "answer_id": 55118790, "question_id": 43497170, "link": "https://stackoverflow.com/questions/43497170/how-to-customize-eclipse-clean-project-function/55118790#55118790", "title": "How to customize eclipse clean project function?", "body": "<p>Open your .cproject in text editor. Search for <code>cleanCommand=</code>. Once found, edit the command in quotes.</p>\n"}], "owner": {"reputation": 2479, "user_id": 1269997, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/dE3UU.jpg?s=128&g=1", "display_name": "sanchop22", "link": "https://stackoverflow.com/users/1269997/sanchop22"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 556, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1552385131, "creation_date": 1492608492, "question_id": 43497170, "link": "https://stackoverflow.com/questions/43497170/how-to-customize-eclipse-clean-project-function", "title": "How to customize eclipse clean project function?", "body": "<p>I have a C project on Eclipse. After a successful build, I carry (cut and paste) the intermediary files (generated makefiles, object files and etc) to a specified folder by a post-build script.</p>\n\n<p>When I press clean project button, the compiler does nothing normally. This is ok but my problem is how can I clean the content of my specified folder? Is there anything to be modified in order to customize clean command? Can I trigger a script when I press this button? Any other solutions exist?</p>\n"}, {"tags": ["c", "linux"], "answers": [{"comments": [{"owner": {"reputation": 349, "user_id": 1724251, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/373e046cd58ed75aaab9284926b69038?s=128&d=identicon&r=PG", "display_name": "Jonis Maurin Cear&#225;", "link": "https://stackoverflow.com/users/1724251/jonis-maurin-cear%c3%a1"}, "edited": false, "score": 0, "creation_date": 1492608647, "post_id": 43497065, "comment_id": 74048605, "body": "doesn&#39;t changed anything :( <code>if (kill(p_dump, SIGKILL) == 0) {             waitpid(p_dump);             airnav_log_level(3,&quot;Succesfull kill dump!\\n&quot;);             sendStats();             return;         } else {             airnav_log_level(3,&quot;Error killing dump.\\n&quot;);             return;         }</code>"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 349, "user_id": 1724251, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/373e046cd58ed75aaab9284926b69038?s=128&d=identicon&r=PG", "display_name": "Jonis Maurin Cear&#225;", "link": "https://stackoverflow.com/users/1724251/jonis-maurin-cear%c3%a1"}, "edited": false, "score": 0, "creation_date": 1492608900, "post_id": 43497065, "comment_id": 74048817, "body": "@JonisMaurinCear&#225; Did you really add <code>waitpid(p_dump);</code>???  <a href=\"http://man7.org/linux/man-pages/man3/wait.3p.html\" rel=\"nofollow noreferrer\">RTFM</a> as it&#39;s <code>pid_t waitpid(pid_t pid, int *stat_loc, int options);</code>  The answer also needs to be fixed."}], "tags": [], "owner": {"reputation": 4516, "user_id": 1937198, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b97a3ec92aed1c16e35c1bf532465d6b?s=128&d=identicon&r=PG", "display_name": "user1937198", "link": "https://stackoverflow.com/users/1937198/user1937198"}, "is_accepted": false, "score": 3, "last_activity_date": 1492609031, "last_edit_date": 1492609031, "creation_date": 1492608235, "answer_id": 43497065, "question_id": 43496924, "link": "https://stackoverflow.com/questions/43496924/cant-kill-pid-started-with-spawn/43497065#43497065", "title": "Can&#39;t kill PID started with spawn", "body": "<p>Your kill is completing successfully, because the process is becoming a zombie, (The Z in the status column in HTOP). A zombie is a process that still has metadata in the kernel, but is not actually running. To get rid of the zombie, the parent has to wait on the process. As your process is the parent, adding a call to <code>waitpid(p_dump)</code> after the kill succeeds should handle this.</p>\n"}, {"tags": [], "owner": {"reputation": 349, "user_id": 1724251, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/373e046cd58ed75aaab9284926b69038?s=128&d=identicon&r=PG", "display_name": "Jonis Maurin Cear&#225;", "link": "https://stackoverflow.com/users/1724251/jonis-maurin-cear%c3%a1"}, "is_accepted": true, "score": 0, "last_activity_date": 1492609543, "creation_date": 1492609543, "answer_id": 43497592, "question_id": 43496924, "link": "https://stackoverflow.com/questions/43496924/cant-kill-pid-started-with-spawn/43497592#43497592", "title": "Can&#39;t kill PID started with spawn", "body": "<p>The answer by user1937198 worked fine, but I found another way that doesn't need to call any function, like 'waitpid'.</p>\n\n<pre><code>struct sigaction sigchld_action = {\n  .sa_handler = SIG_DFL,\n  .sa_flags = SA_NOCLDWAIT\n};\nsigaction(SIGCHLD, &amp;sigchld_action, NULL);\n</code></pre>\n\n<p>At least in my case, it's preventing zombie proccess after kill. It's works fine.</p>\n"}], "owner": {"reputation": 349, "user_id": 1724251, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/373e046cd58ed75aaab9284926b69038?s=128&d=identicon&r=PG", "display_name": "Jonis Maurin Cear&#225;", "link": "https://stackoverflow.com/users/1724251/jonis-maurin-cear%c3%a1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 709, "favorite_count": 0, "accepted_answer_id": 43497592, "answer_count": 2, "score": 1, "last_activity_date": 1492609789, "creation_date": 1492607870, "last_edit_date": 1495542377, "question_id": 43496924, "link": "https://stackoverflow.com/questions/43496924/cant-kill-pid-started-with-spawn", "title": "Can&#39;t kill PID started with spawn", "body": "<p>Some days ago, I asked <a href=\"https://stackoverflow.com/questions/43440183/c-start-external-programa-in-background-and-get-pid\">here</a> how to start a program using C without using fork(). This solution is working fine.....except that I can't kill this child process!\nMy program (in this case, 'rbfeeder') has some threads....and when I send kill signal, only threads are killed (I think). What am I doing wrong?</p>\n\n<p>This is the code used to 'start' rbfeeder:</p>\n\n<pre><code>/*\n * Start dump1090, if not running\n */\nvoid startDump(void) {\n\n    if (p_dump != 0) {\n        log_level(8, \"Looks like dump is already running.\\n\");\n        return;\n    }\n\n    pid_t ret = run_cmd(\"/home/jmaurin/dev/client/rbfeeder\");\n\n    if (ret != 0) {\n        log_level(8, \"Ok, started! Pid is: %i\\n\", ret);\n        p_dump = ret;\n        sendStats();\n    } else {\n        log_level(8, \"Error starting dump1090\\n\");\n        p_dump = 0;\n        sendStats();\n    }\n\n    return;\n}\n</code></pre>\n\n<p>And this is the code to 'stop':</p>\n\n<pre><code>void stopDump(void) {\n\n    if (checkDumpRunning()) {\n        log_level(3, \"Dump is running, let's try to kill.\\n\");\n\n        if (kill(p_dump, SIGKILL) == 0) {\n            log_level(3,\"Succesfull kill dump!\\n\");\n            sendStats();\n            return;\n        } else {\n            log_level(3,\"Error killing dump.\\n\");\n            return;\n        }\n\n\n    } else {\n        log_level(3, \"Dump is not running.\\n\");\n    }\n\n    return;\n}\n</code></pre>\n\n<p>and run_cmd function:</p>\n\n<pre><code>pid_t run_cmd(char *cmd) {\n    pid_t pid, ret;\n    char *argv[] = {\"sh\", \"-c\", cmd, NULL};\n    int status, s;\n    posix_spawn_file_actions_t file_actions;\n    posix_spawn_file_actions_t *file_actionsp;\n\n    s = posix_spawn_file_actions_init(&amp;file_actions);\n    if (s != 0)\n        return 0;\n\n    //STDERR_FILENO\n    s = posix_spawn_file_actions_addclose(&amp;file_actions,STDERR_FILENO);\n    if (s != 0)\n        return 0;\n\n    file_actionsp = &amp;file_actions;\n\n\n    //printf(\"Run command: %s\\n\", cmd);\n    status = posix_spawn(&amp;pid, \"/bin/sh\", file_actionsp, NULL, argv, environ);\n    if (status == 0) {\n        log_level(8, \"Child pid: %i\\n\", pid);\n        ret = pid;\n        /*        \n        if (waitpid(pid, &amp;status, 0) != -1) {\n            printf(\"Child exited with status %i\\n\", status);\n        } else {\n            perror(\"waitpid\");\n        }\n         */\n    } else {\n        //  printf(\"posix_spawn: %s\\n\", strerror(status));        \n        ret = 0;\n    }\n\n    return ret;\n    //printf(\"End of run\\n\");\n}\n</code></pre>\n\n<p>p_dump is a global variable to hold PID.</p>\n\n<p>This image is when my 'client' receive the command (over ethernet) to start external program:</p>\n\n<p><a href=\"https://i.stack.imgur.com/IRcNk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IRcNk.png\" alt=\"enter image description here\"></a></p>\n\n<p>Then, an HTOP on the same machine....see that PID are the same, which means that my variable is correct:</p>\n\n<p><a href=\"https://i.stack.imgur.com/qVS36.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qVS36.png\" alt=\"enter image description here\"></a></p>\n\n<p>Then, I've sent an 'stop' command and my client executed 'stopDump', but one process still running (the other threads from same program are 'killed'):</p>\n\n<p><a href=\"https://i.stack.imgur.com/c8zKp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/c8zKp.png\" alt=\"enter image description here\"></a></p>\n\n<p>The external program doesn't 'spawn/fork' itself, but it does have threads.</p>\n"}, {"tags": ["c", "multithreading", "openmp"], "comments": [{"owner": {"reputation": 1807, "user_id": 1900441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa3540494c1cb556bf1f517992b172fe?s=128&d=identicon&r=PG", "display_name": "Jim Cownie", "link": "https://stackoverflow.com/users/1900441/jim-cownie"}, "edited": false, "score": 0, "creation_date": 1492681196, "post_id": 43496870, "comment_id": 74084726, "body": "&quot;But when I use exit() in the handler it leaves un-freed memory obviously.&quot; Umm, this makes no sense at all. Once the process exits all of its memory is freed by the OS. (Unless there are shared memory segments here that you failed to mention, of course)."}, {"owner": {"reputation": 27, "user_id": 6205779, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/067f1ee812b61068e7847c102b67e799?s=128&d=identicon&r=PG&f=1", "display_name": "krakra", "link": "https://stackoverflow.com/users/6205779/krakra"}, "reply_to_user": {"reputation": 1807, "user_id": 1900441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa3540494c1cb556bf1f517992b172fe?s=128&d=identicon&r=PG", "display_name": "Jim Cownie", "link": "https://stackoverflow.com/users/1900441/jim-cownie"}, "edited": false, "score": 0, "creation_date": 1492688476, "post_id": 43496870, "comment_id": 74090101, "body": "I know but that is bad practise to leave memory leak handling to OS and for my purpose its really bad because i am running this program on really limited machine"}, {"owner": {"reputation": 1807, "user_id": 1900441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa3540494c1cb556bf1f517992b172fe?s=128&d=identicon&r=PG", "display_name": "Jim Cownie", "link": "https://stackoverflow.com/users/1900441/jim-cownie"}, "edited": false, "score": 0, "creation_date": 1493025882, "post_id": 43496870, "comment_id": 74217637, "body": "@kakra &quot;it is bad practise to leave memory leak handling to OS&quot;. I disagree. It is a waste of your effort and CPU time  to use &quot;free&quot; to return allocated store to the heap when the whole address space is about to be torn down. It makes no difference at all to the OS whether the heap has data on its free list or not when the OS unmaps the pages, so you are simply wasting CPU time by calling free."}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 6205779, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/067f1ee812b61068e7847c102b67e799?s=128&d=identicon&r=PG&f=1", "display_name": "krakra", "link": "https://stackoverflow.com/users/6205779/krakra"}, "edited": false, "score": 0, "creation_date": 1492688514, "post_id": 43507500, "comment_id": 74090139, "body": "Thank you a lot it helped me :)"}, {"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "reply_to_user": {"reputation": 27, "user_id": 6205779, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/067f1ee812b61068e7847c102b67e799?s=128&d=identicon&r=PG&f=1", "display_name": "krakra", "link": "https://stackoverflow.com/users/6205779/krakra"}, "edited": false, "score": 0, "creation_date": 1492689188, "post_id": 43507500, "comment_id": 74090651, "body": "@krakra very glad to hear that :-), I was afraid that my long text would discourage you from trying to solve this properly. Feel free to post any further progress you made based on this answer as a separate answer or accept mine if it essentially solved your issue."}, {"owner": {"reputation": 27, "user_id": 6205779, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/067f1ee812b61068e7847c102b67e799?s=128&d=identicon&r=PG&f=1", "display_name": "krakra", "link": "https://stackoverflow.com/users/6205779/krakra"}, "edited": false, "score": 0, "creation_date": 1492690834, "post_id": 43507500, "comment_id": 74091807, "body": "i did what you told me i got rid of handlers in threads and other bad stuff you told me i have in my code. i really didn&#39;t know what to do so i am very glad  for your ansfer and i will use select() function with that blocking operations to hadle signal adn exit threads"}, {"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "reply_to_user": {"reputation": 27, "user_id": 6205779, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/067f1ee812b61068e7847c102b67e799?s=128&d=identicon&r=PG&f=1", "display_name": "krakra", "link": "https://stackoverflow.com/users/6205779/krakra"}, "edited": false, "score": 0, "creation_date": 1492691082, "post_id": 43507500, "comment_id": 74092001, "body": "I would recommend to use <code>poll</code> instead of <code>select</code>. It basically does the same thing, but has a better interface and is less dangerous."}, {"owner": {"reputation": 27, "user_id": 6205779, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/067f1ee812b61068e7847c102b67e799?s=128&d=identicon&r=PG&f=1", "display_name": "krakra", "link": "https://stackoverflow.com/users/6205779/krakra"}, "edited": false, "score": 0, "creation_date": 1492692511, "post_id": 43507500, "comment_id": 74093131, "body": "Just one last question do i have to make some correction with sections ? if i want to secure it from data race or other problems that could parralel programing possibly have ? or it hadle this proble openMP its self"}], "tags": [], "owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "is_accepted": false, "score": 1, "last_activity_date": 1492643507, "last_edit_date": 1495541868, "creation_date": 1492643047, "answer_id": 43507500, "question_id": 43496870, "link": "https://stackoverflow.com/questions/43496870/openmp-cancel-section/43507500#43507500", "title": "OpenMP cancel section", "body": "<p>This is actually super complicated, but let's just start simple.</p>\n\n<ul>\n<li><p>It's <code>#pragma omp cancellation point sections</code> / <code>#pragma omp cancel sections</code> (mind the s).</p></li>\n<li><p>You cannot use <code>#pragma omp cancel</code> across function boundaries.<sup>1</sup></p></li>\n</ul>\n\n<p>Let's say you could use cancel this way, cancellation is only checked for at specific cancellation points. So during a blocking <code>read</code> or <code>getc</code>, your threads will not be interrupted by a cancellation.</p>\n\n<h1>Signal handling</h1>\n\n<p>Signal handlers are setup per process, it is not deterministic at what thread a signal ends at. You should not try to call <code>signal</code> concurrently from multiple threads. Some implementations of <code>signal</code> even like multi-threaded programs at all. Instead, you should use <a href=\"https://stackoverflow.com/a/232711/620382\"><code>sigaction</code></a>, but still setup a global signal handler once before even spawning the worker threads.</p>\n\n<p>There are certain restrictions on what you are allowed to do in a signal handler. Basically you must not access any global variables that are not of type <code>volatile sig_atomic_t</code> and call only <a href=\"http://man7.org/linux/man-pages/man7/signal-safety.7.html\" rel=\"nofollow noreferrer\">async-signal-safe functions</a>. You violate that in every single line of your signal handler.</p>\n\n<p>In particular, you call <code>send(client_socket)</code> while either the same thread might just be interrupted while calling <code>read(client_socket)</code><sup>2</sup> or another thread calling <code>read(client_socket)</code> concurrently. Not sure what is worse, but even if <code>send</code> itself is <em>async-signal-safe</em>, I'd wager a wild guess, it's not safe in the suggested manner.</p>\n\n<p>You see, having some reachable memory at the end of the process is absolutely the very least of your problems. You're not even allowed to call <code>exit</code> (you can call <code>_exit</code> though).</p>\n\n<p>The usual way out, is to set make a global cancel flag of type <code>volatile sig_atomic_t</code> and set that within the signal handler as well as check for it in the worker loops. This should also work with OpenMP section/threads, but I would advise to add a <code>#pragma omp atomic read/write seq_cst</code> for any read/write to the flag. That may seem redundant, but I'm fairly sure that <code>volatile sig_atomic_t</code> only guarantees atomicity regarding interruption for signals, and not multithreading and in particular storage visibility. Unfortunately, you still have the issue that <code>read</code> and <code>getc</code> are blocking...</p>\n\n<h1>A sketch of a solution</h1>\n\n<p>So you would have to use some mechanism to make <code>getc</code> non-blocking or add a timeout to give your thread a chance to check for the cancel flag.</p>\n\n<p><code>poll</code> can give you a more elegant way out. You can replace the blocking part of both <code>read</code> and <code>getc</code> with <code>poll</code> - keep in mind however that this forces you to use stdin exclusively as a file descriptor, never as a <code>FILE*</code>. In preparation you make a pipe for each section whose output you include in the respective <code>poll</code>. Within the signal handler, that you setup only after the pipes is generated, you write to those pipes, indicating that the threads should shut down. If poll shows activity for those particular stop-pipe-fds, you exit the loop, and do your cleanup in the appropriate thread or after the parallel region. Apply synchronization as necessary.</p>\n\n<p>Sorry to bring you the bad news. It's complicated and there is no simple, correct, copy-pasteable, solution. In any case, OpenMP cancellation is not the right thing to use here.</p>\n\n<p><sup>1</sup>: The standard is not quite explicit about that, it mandates that:</p>\n\n<blockquote>\n  <p>During execution of a construct that may be subject to cancellation, a thread must not encounter an orphaned cancellation point. That is, a cancellation point must only be encountered within that construct and must not be encountered elsewhere in its region.</p>\n</blockquote>\n\n<p>However, since cancel regions are itself implicit cancellation points, I suppose one might imply that cancel constructs must always be within the lexical scoped of a explicit parallel region. Anyway, <code>gcc</code> won't let you compile a function like your signal handler with a cancel construct.</p>\n\n<p><sup>2</sup>: This is actually fine, but you have to at least manually restore <code>errno</code> because the <code>write</code> in your signal handler overwrites it. The <code>read</code> should conveniently return with <code>EINTR</code>.</p>\n"}], "owner": {"reputation": 27, "user_id": 6205779, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/067f1ee812b61068e7847c102b67e799?s=128&d=identicon&r=PG&f=1", "display_name": "krakra", "link": "https://stackoverflow.com/users/6205779/krakra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1340, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1492643507, "creation_date": 1492607721, "last_edit_date": 1492608749, "question_id": 43496870, "link": "https://stackoverflow.com/questions/43496870/openmp-cancel-section", "title": "OpenMP cancel section", "body": "<p>I have a problem with terminating sections in a C program. After catching a <code>SIGINT</code> signal in one thread I wanted to exit all threads and I don't really know how because I have infinite loops in these loops. The program waits for input from server or stdin. So I used signal handler.</p>\n\n<p>I don't really know if I am doing this right way and I don't really understand how cancel in OpenMP works. I didn't find a proper tutorial or lecture for this. </p>\n\n<p>My task is after catching <code>SIGINT</code> signal, terminate the program. But when I use <code>exit()</code> in the handler it leaves un-freed memory obviously. I will be glad for any advise, thank you.</p>\n\n<pre><code>#pragma omp parallel num_threads(2)\n{\n    #pragma omp sections\n    {\n        #pragma omp section\n        {\n            void intHandler(int dummy) \n            {\n                char * welcome1 = calloc(strlen(username)+14,sizeof(char));\n                strcat(welcome1,username);\n                strcat(welcome1,\" logged out\\r\\n\");\n                if(send(client_socket,welcome1,strlen(welcome1),0) &lt; 0)\n                {\n                    callError(\"ERROR: cannot send socked\");\n                }\n                free(welcome1);\n                #pragma omp cancel section\n            }\n            signal(SIGINT, intHandler);\n            int i = 0, j = 1;\n            while(1)\n            {\n                str = (char*)malloc(sizeof(char));\n                while((c = getc(stdin)) != '\\n')\n                {\n\n                    str = (char*)realloc(str, j * sizeof(char));\n                    str[i] = c;\n                    i++;\n                    j++;\n                }\n                str = (char*)realloc(str, j * sizeof(char));\n                str[i] = '\\0';\n                if(strlen(str)!=0)\n                {\n                    bufferIn = message(username,str);\n                    if(send(client_socket,bufferIn,strlen(bufferIn),0) &lt; 0)\n                    {\n                        callError(\"ERROR: cannot send socked\");\n                    }\n                    free(bufferIn);\n                }\n                free(str); i = 0; j = 1; \n            }\n        #pragma omp cancellation point section\n        }\n        #pragma omp section\n        {\n            void intHandler(int dummy) \n            {\n                char * welcome1 = calloc(strlen(username)+14,sizeof(char));\n                strcat(welcome1,username);\n                strcat(welcome1,\" logged out\\r\\n\");\n                if(send(client_socket,welcome1,strlen(welcome1),0) &lt; 0)\n                {\n                    callError(\"ERROR: cannot send socked\");\n                }\n                free(welcome1);\n                #pragma omp cancel section\n            }\n            signal(SIGINT, intHandler);\n            char buffer[4096];\n            ssize_t length;\n            int received = 0;\n            int data_cap = 4096;\n            while(1)\n            {\n                data = calloc(BUFFER_LEN,sizeof(char));\n                while ((length = read(client_socket, buffer, BUFFER_LEN-1)) &gt; 0)\n                {\n                    received += length;\n                    buffer[length] = '\\0';\n                    if (received &gt; data_cap)\n                    {\n                         data = realloc(data,sizeof(char) * data_cap * 2);\n                         data_cap = data_cap * 2;\n                    }\n                    strcat(data, buffer); \n                    if(!isEnough(data))\n                    {\n                        break;\n                    }\n                }\n                printf(\"%s\", data);\n                free(data); bzero(buffer,BUFFER_LEN); data_cap = 4096; received = 0; length = 0;\n            }\n        #pragma omp cancellation point section\n        }\n    }\n\n} \n</code></pre>\n"}, {"tags": ["c++", "c", "sdl-2"], "comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1492607653, "post_id": 43496748, "comment_id": 74047773, "body": "surely if you think you&#39;re going outside the draw space, you should put some checks at the beginning of the function to make sure you&#39;re within the right area?"}, {"owner": {"reputation": 3783, "user_id": 2428235, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sj48p.jpg?s=128&g=1", "display_name": "Roman Hocke", "link": "https://stackoverflow.com/users/2428235/roman-hocke"}, "edited": false, "score": 0, "creation_date": 1492607659, "post_id": 43496748, "comment_id": 74047778, "body": "What is the last printed line of output?"}, {"owner": {"reputation": 6013, "user_id": 3310281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9b8b4ec03e2c7a424fdc428eb55f2e8?s=128&d=identicon&r=PG&f=1", "display_name": "Malcolm McLean", "link": "https://stackoverflow.com/users/3310281/malcolm-mclean"}, "edited": false, "score": 2, "creation_date": 1492607749, "post_id": 43496748, "comment_id": 74047845, "body": "The condition if(x &lt;= 0 || x &lt;= SCREEN_WIDTH) doesn&#39;t make any sense."}, {"owner": {"reputation": 61, "user_id": 7885925, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e11b6c1028bd3194f588048eb2c6c0ea?s=128&d=identicon&r=PG&f=1", "display_name": "Kari Noriy", "link": "https://stackoverflow.com/users/7885925/kari-noriy"}, "edited": false, "score": 0, "creation_date": 1492609171, "post_id": 43496748, "comment_id": 74049042, "body": "Hi Roman, it runs printf outside of the function and the i get the segmentation fault"}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1492613436, "post_id": 43496748, "comment_id": 74052568, "body": "What Malcolm said. You have some backwards comparison operators, so you will go off screen, leading to infinite recursion, which could be the actual source of the crash.  And as Chris said, that check should happen before you do stuff with the off-screen coords. Fix the check, and do it first. (Also, you are doing weird stuff with the bounding color which will make this probably not work correctly, but that won&#39;t make it crash.)"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 7723741, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51658c9780057edfc4369c1c183a33fa?s=128&d=identicon&r=PG&f=1", "display_name": "DigiGen", "link": "https://stackoverflow.com/users/7723741/digigen"}, "is_accepted": false, "score": 1, "last_activity_date": 1492614230, "last_edit_date": 1492614230, "creation_date": 1492613656, "answer_id": 43499252, "question_id": 43496748, "link": "https://stackoverflow.com/questions/43496748/how-to-fix-a-recursive-flood-fill-segmentation-error/43499252#43499252", "title": "How to fix a recursive Flood Fill segmentation error?", "body": "<p>I'm not familiar with SDL, however at the very least your boundary checking does not look correct. A generic C/C++ flood test algorithm implementation using recursion could look like:</p>\n\n<pre><code>// Dimentions for screen to paint, in this case 10x10 matrix\n#define SCREEN_HEIGHT 10\n#define SCREEN_WIDTH  10\n\nvoid floodFillTest(int x, int y, int old_color, int new_color, int matrix[][SCREEN_HEIGHT])\n{\n    // Check boundaries\n    if (x &lt; 0 || x &gt;= SCREEN_WIDTH || y &lt; 0 || y &gt;= SCREEN_HEIGHT)\n        return;\n\n    // Check color to fill boundaries\n    if (matrix[x][y] != old_color)\n        return;\n\n    // Replace old color at (x, y)\n    matrix[x][y] = new_color;\n\n    floodFillTest(x+1, y, old_color, new_color, matrix);  // Recur east\n    floodFillTest(x-1, y, old_color, new_color, matrix);  // Recur west\n    floodFillTest(x, y+1, old_color, new_color, matrix);  // Recur south\n    floodFillTest(x, y-1, old_color, new_color, matrix);  // Recur north\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "is_accepted": true, "score": 0, "last_activity_date": 1492614623, "creation_date": 1492614623, "answer_id": 43499620, "question_id": 43496748, "link": "https://stackoverflow.com/questions/43496748/how-to-fix-a-recursive-flood-fill-segmentation-error/43499620#43499620", "title": "How to fix a recursive Flood Fill segmentation error?", "body": "<p>Any recursively implemented flood-fill will crash with a segfault on sufficiently large input:</p>\n\n<p>It traverses the pixels in a depth-first manner, meaning that the amount of recursive calls grows linear with the size of the area that is flood-filled. As pixels are small, stack frames large by comparison, and stack space limited (typically around single digit amounts of mebibytes), even small images will result in the stack space to be exhausted, and the process to crash with a segfault.</p>\n\n<p>As such, the only way you can safely avoid this is to reimplement your algorithm so that it uses a loop instead of recursive calls.\nThere are two variants of this:</p>\n\n<ol>\n<li><p>Iterative implementation of depth-first algorithm with an explicit stack. This allows for much deeper \"recursion\" as the buffer for the explicit stack may be larger than the call stack, and as you will typically push less data onto the stack for each level of recursion.</p></li>\n<li><p>Use a breadth-first algorithm. This may be more space efficient as the front that is moved across the image will tend to be smaller.</p></li>\n</ol>\n"}], "owner": {"reputation": 61, "user_id": 7885925, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e11b6c1028bd3194f588048eb2c6c0ea?s=128&d=identicon&r=PG&f=1", "display_name": "Kari Noriy", "link": "https://stackoverflow.com/users/7885925/kari-noriy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 834, "favorite_count": 0, "closed_date": 1492641300, "accepted_answer_id": 43499620, "answer_count": 2, "score": 2, "last_activity_date": 1492614623, "creation_date": 1492607455, "last_edit_date": 1492610396, "question_id": 43496748, "link": "https://stackoverflow.com/questions/43496748/how-to-fix-a-recursive-flood-fill-segmentation-error", "closed_reason": "Not suitable for this site", "title": "How to fix a recursive Flood Fill segmentation error?", "body": "<p>Hi i'm making a simple paint program to learn sdl and C, i'm getting a segmentation error when i run my code, i think it's because it's trying to fill a pixel that's outside of the window, but i'm not sure how to stop this from happening.\nIs there a way to stop the recursion from accessing outside of the window?\nhere's the code: sorry about how messy it is.</p>\n\n<pre><code>void floodfill(SDL_Surface *canvas,int SCREEN_WIDTH, int SCREEN_HEIGHT, int x, int y, int boundingX, int boundingY, Uint32 src, Uint32 fillcolour)\n{\n\nUint32 clickedColour = getPixel(canvas, x, y);\nUint32 boundingColour = getPixel(canvas, boundingX, boundingY); //make sure you are not exceeding the limits of the window.\n\nprintf(\"floodfill Inside\\n\");\nprintf(\"X&amp;Y co-ords %d,%d\\n\",x,y);\n\nif (src==fillcolour)\n    return;\n\nif (x &lt;= 0 || x &lt;= SCREEN_WIDTH || y &lt;= 0  || y &lt;= SCREEN_HEIGHT)\n{\n    printf(\"saying things!\\n\");\n    return;\n}\n\nprintf(\"%d,%d\\n\",x,y);\n\nif (fillcolour != clickedColour)\n    putPixel(canvas, x, y, fillcolour);\n\nif (clickedColour !=boundingColour)\n    return;\n\nif ((x&gt;=0 &amp;&amp; x&lt;SCREEN_WIDTH) &amp;&amp; (y&gt;=0 &amp;&amp; y&lt;SCREEN_HEIGHT))\n{\n    putPixel(canvas, x, y, fillcolour);\n    printf(\"put Pixel x=%d and y=%d\\n\", x, y);\n}\n\nfloodfill(canvas,SCREEN_WIDTH, SCREEN_HEIGHT, x, y+1, x, y+2, src, fillcolour);\nfloodfill(canvas,SCREEN_WIDTH, SCREEN_HEIGHT, x, y, x+2, y, src, fillcolour);\nfloodfill(canvas,SCREEN_WIDTH, SCREEN_HEIGHT, x, y, x, y+2, src, fillcolour);\nfloodfill(canvas,SCREEN_WIDTH, SCREEN_HEIGHT, x+1, y, x+2, y, src, fillcolour);\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["c", "linux", "x86", "stack", "buffer-overflow"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1492607980, "post_id": 43496679, "comment_id": 74048038, "body": "Perhaps your hack is (partially) successful in case 2, and the EIP value you observe in that case results from &quot;returning&quot; to function <code>secret()</code> and the action of that function."}, {"owner": {"reputation": 33092, "user_id": 5801661, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D8ENZ.jpg?s=128&g=1", "display_name": "Margaret Bloom", "link": "https://stackoverflow.com/users/5801661/margaret-bloom"}, "edited": false, "score": 1, "creation_date": 1492611680, "post_id": 43496679, "comment_id": 74051089, "body": "The compiler will typically allocate the <code>buffer</code> at an aligned address. See <a href=\"https://godbolt.org/g/7jILbk\" rel=\"nofollow noreferrer\">the disassembly</a>. The fixed length 22 may not work across code changes. Furthermore <a href=\"https://wiki.ubuntu.com/Security/Features#Address_Space_Layout_Randomisation_.28ASLR.29\" rel=\"nofollow noreferrer\">Ubuntu uses ASLR</a>."}, {"owner": {"reputation": 3, "user_id": 5458657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52335a7759e5ad2fc3a2c94697c9ace5?s=128&d=identicon&r=PG&f=1", "display_name": "JulianPitney", "link": "https://stackoverflow.com/users/5458657/julianpitney"}, "edited": false, "score": 0, "creation_date": 1492615398, "post_id": 43496679, "comment_id": 74053981, "body": "Regarding what&#39;s been said about ASLR, I had considered that, but that doesn&#39;t explain how the supplied address is being successfully written into EIP in cases where the supplied address does not belong to that of a function in the running executable. Regarding what John Bollinger said, that&#39;s something I had not considered, but if that were the case I&#39;d expect the printf function from secret() to be executed, but it isn&#39;t."}, {"owner": {"reputation": 3, "user_id": 5458657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52335a7759e5ad2fc3a2c94697c9ace5?s=128&d=identicon&r=PG&f=1", "display_name": "JulianPitney", "link": "https://stackoverflow.com/users/5458657/julianpitney"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1492694649, "post_id": 43496679, "comment_id": 74094972, "body": "I went over everything again today and @JohnBollinger you were mostly correct. The secret function was indeed running and the 0xffffd200 value found in EIP was the result of secret attempting to return, causing a segfault. Thanks for pointing me in the right direction!"}], "owner": {"reputation": 3, "user_id": 5458657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52335a7759e5ad2fc3a2c94697c9ace5?s=128&d=identicon&r=PG&f=1", "display_name": "JulianPitney", "link": "https://stackoverflow.com/users/5458657/julianpitney"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 164, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1492607253, "creation_date": 1492607253, "question_id": 43496679, "link": "https://stackoverflow.com/questions/43496679/what-mechanism-overwrites-the-return-address-of-a-stack-frame-preventing-certai", "title": "What mechanism overwrites the return address of a stack frame, preventing certain buffer overflow exploits?", "body": "<p><strong>Context:</strong>    The source code shown below is compiled using the first command shown below. The resulting executable is then loaded into gdb and run using the second command shown below. A segfault is then produced (as expected) and the contents of the EIP register are examined using gdb. Two cases are observed.</p>\n\n<p><em>Case 1:</em> The hex address supplied in the second command shown below is <strong>NOT</strong> the address of some function in the currently loaded executable. After running this command, EIP is examined and contains the address supplied by the command (as expected).</p>\n\n<p><em>Case 2:</em> The hex address supplied in the second command shown below <strong>IS</strong> the address of some function in the currently loaded executable (secret() in this case). After running this command, EIP is examined and contains the address 0xffffd200. In this case, several code variations have been tried and the resulting value in EIP is always 0xffffd200.</p>\n\n<p><strong>Question:</strong>\n What mechanism would overwrite the stack frame return address after a buffer overflow were used to set this address to the address of some function in the running executable?</p>\n\n<p><strong>Notes:</strong> </p>\n\n<p>OS = Ubuntu 16.04.2 LTS (Xenial Xerus)</p>\n\n<p>GCC Version = 5.4.0</p>\n\n<p>Architecture = x86</p>\n\n<p><strong>Source:</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nvoid secret() {\n\n    printf(\"success\\n\");\n}\n\nvoid vuln(char *input) {\n\n    char buffer[10];\n    strcpy(buffer, input);\n}\n\nint main(int argc, char* argv[]) {\n\n    vuln(argv[1]);\n    return 0;\n}\n</code></pre>\n\n<p><strong>First Command:</strong></p>\n\n<pre><code>gcc -m32 -fno-stack-protector test.c\n</code></pre>\n\n<p><strong>Second Command (in gdb):</strong></p>\n\n<pre><code>run `python -c 'print \"a\"*22 + \"\\x56\\x84\\x04\\x08\"'`\n</code></pre>\n"}, {"tags": ["c", "embedded", "global-variables", "encapsulation"], "comments": [{"owner": {"reputation": 19688, "user_id": 3149020, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100001905387968/picture?type=large", "display_name": "Spencer Wieczorek", "link": "https://stackoverflow.com/users/3149020/spencer-wieczorek"}, "edited": false, "score": 0, "creation_date": 1492607428, "post_id": 43496618, "comment_id": 74047594, "body": "You could also make a <code>struct</code> to capture your necessary globals. I&#39;d say the approach itself is better solely because you can have control of the input given (<i>such as not allowing certain values</i>). You may want to re-think the program itself though, see if for some of the gobals if they really need to be global or not."}, {"owner": {"reputation": 1220, "user_id": 5878272, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/14e96159153b67fab5222b7c5fa18c71?s=128&d=identicon&r=PG&f=1", "display_name": "Fredrik", "link": "https://stackoverflow.com/users/5878272/fredrik"}, "edited": false, "score": 0, "creation_date": 1492607661, "post_id": 43496618, "comment_id": 74047779, "body": "Why are you afraid of globals?"}, {"owner": {"reputation": 6024, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "edited": false, "score": 3, "creation_date": 1492607729, "post_id": 43496618, "comment_id": 74047827, "body": "Globals are like <code>goto</code> - it is better to avoid but they are not 100% evil."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 2, "creation_date": 1492608278, "post_id": 43496618, "comment_id": 74048291, "body": "Using functions instead of variables directly is better, but consider how you name those functions. If <code>module1_variable</code> is simply an implementation detail, maybe function shouldn&#39;t be called <code>setModule1Var</code>."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 1, "creation_date": 1492608610, "post_id": 43496618, "comment_id": 74048574, "body": "Also, don&#39;t feel too bad if have to use globals. In embedded you just sometimes have to do so. And remember that <code>const</code> globals are not nearly as bad as regular global variables."}, {"owner": {"reputation": 163, "user_id": 2300838, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/E28F9.gif?s=128&g=1", "display_name": "zakkos", "link": "https://stackoverflow.com/users/2300838/zakkos"}, "reply_to_user": {"reputation": 1220, "user_id": 5878272, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/14e96159153b67fab5222b7c5fa18c71?s=128&d=identicon&r=PG&f=1", "display_name": "Fredrik", "link": "https://stackoverflow.com/users/5878272/fredrik"}, "edited": false, "score": 0, "creation_date": 1492611689, "post_id": 43496618, "comment_id": 74051098, "body": "@Fredrik I&#39;m not afraid of globals, in fact I&#39;m ready to implement an all globals or a mixed way, but they&#39;re there for everyone to modify without notice. I modify it, you modify it, everyone modifies it! Said that if I have a couple globals and it works I wouldn&#39;t bother, especially for a personal project, but I&#39;m asking here for generic understanding and broad application"}, {"owner": {"reputation": 163, "user_id": 2300838, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/E28F9.gif?s=128&g=1", "display_name": "zakkos", "link": "https://stackoverflow.com/users/2300838/zakkos"}, "reply_to_user": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1492612331, "post_id": 43496618, "comment_id": 74051676, "body": "@user694733 true (and +1)! In my actual program variables and functions are (hopefully) properly named. I generalized in this question to get a, well...general answer that can be applied not only to my special little program but to get a more general understanding of how people solve this problem (also how much is perceived as a problem!) and a generic use case. Incidentally I also like to see how professionals write their code, best practices etc and compare to how I&#39;d do it."}, {"owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "edited": false, "score": 0, "creation_date": 1492615813, "post_id": 43496618, "comment_id": 74054271, "body": "I like this question but probably <a href=\"https://softwareengineering.stackexchange.com\">softwareengineering.stackexchange.com</a> is more appropriate site to ask it."}, {"owner": {"reputation": 6198, "user_id": 839601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6db99aa846a8217f7e2aba6fa198e7c?s=128&d=identicon&r=PG", "display_name": "gnat", "link": "https://stackoverflow.com/users/839601/gnat"}, "reply_to_user": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "edited": false, "score": 0, "creation_date": 1492617235, "post_id": 43496618, "comment_id": 74055303, "body": "@AlexLop. when referring other sites, it is often helpful to point that <a href=\"https://meta.stackexchange.com/tags/cross-posting/info\">cross-posting is frowned upon</a>"}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1492622585, "post_id": 43496618, "comment_id": 74058916, "body": "Avoiding globals at all cost...is primarily opinion based...When to use them or not, primarily opinion based, alternatives, primarily opinion based.  Not that there isnt any room to discuss them, but perhaps the question should have been done a bit differently or asked as several questions with each one of the alternatives.  This is one of those problem things on SO, you ask it wrong start a flame war and it gets closed, you ask again slightly differently you get closed as a duplicate..."}, {"owner": {"reputation": 163, "user_id": 2300838, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/E28F9.gif?s=128&g=1", "display_name": "zakkos", "link": "https://stackoverflow.com/users/2300838/zakkos"}, "edited": false, "score": 0, "creation_date": 1492623309, "post_id": 43496618, "comment_id": 74059300, "body": "Just to be clear I&#39;m not asking whether my &quot;opinion&quot; on globals is shared among the users or not. That is my problem and I don&#39;t need any preaching about it.  I&#39;m asking a technical advice if my solution is ok or not. That is if it would work, if there would be some problems in doing so (for example undefined behaviour would be a problem) and if there is a better solution with the same outcome. I&#39;m not asking to be convinced on changing idea. :)"}, {"owner": {"reputation": 163, "user_id": 2300838, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/E28F9.gif?s=128&g=1", "display_name": "zakkos", "link": "https://stackoverflow.com/users/2300838/zakkos"}, "edited": false, "score": 0, "creation_date": 1492642538, "post_id": 43496618, "comment_id": 74069421, "body": "I really can&#39;t think of this question as &quot;primarily opinion based&quot;.      As I stated in my previous comment I&#39;m not asking to judge if I should or not use global variables. I don&#39;t want to and I&#39;m asking HOW to achieve that.   It would be like asking how to make a dish and being told that the recipe is an opinion, only because someone doesn&#39;t like that dish and asks why would I do it in the first place.      I don&#39;t have the time nor the reputation to oppose closing this question so this is everything I can do. I&#39;d really love, tho, that an honest explanation be given."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1492687245, "post_id": 43496618, "comment_id": 74089176, "body": "This kind of boils down to what you mean with &quot;globals&quot;, which is not a formal term. If by globals you mean &quot;variable at file scope with external linkage&quot; then they are 100% bad and there exists no reason to use them ever, there&#39;s nothing opinion-based about that. If by &quot;globals&quot; you mean &quot;variable at file scope with internal linkage&quot; (static), then it may turn a bit opinion-based - these can be considered good practice in some cases and bad practice in other cases."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1492687311, "post_id": 43496618, "comment_id": 74089234, "body": "That being said, if you are calling printf from inside an ISR, globals is the least of your problems."}, {"owner": {"reputation": 163, "user_id": 2300838, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/E28F9.gif?s=128&g=1", "display_name": "zakkos", "link": "https://stackoverflow.com/users/2300838/zakkos"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1492688592, "post_id": 43496618, "comment_id": 74090205, "body": "@Lundin I should really change that <code>printf()</code>. The whole program Is a Mock-up, I put the <code>printf()</code> in there just to have something inside the isr. \ud83d\ude09"}], "answers": [{"comments": [{"owner": {"reputation": 163, "user_id": 2300838, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/E28F9.gif?s=128&g=1", "display_name": "zakkos", "link": "https://stackoverflow.com/users/2300838/zakkos"}, "edited": false, "score": 0, "creation_date": 1492643219, "post_id": 43501722, "comment_id": 74069641, "body": "I edited my question a tiny bit, hoping it wont get closed. It&#39;s not that it makes your answer invalid but since you&#39;re quoting I thought you would know."}, {"owner": {"reputation": 163, "user_id": 2300838, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/E28F9.gif?s=128&g=1", "display_name": "zakkos", "link": "https://stackoverflow.com/users/2300838/zakkos"}, "edited": false, "score": 0, "creation_date": 1492643686, "post_id": 43501722, "comment_id": 74069773, "body": "As a side note the <code>printf()</code> function is there just to have something easily recognizable! About the answer I&#39;d like a bit of clarification on this: &quot;[place] the ISR in the data module&quot;."}], "tags": [], "owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "is_accepted": true, "score": 3, "last_activity_date": 1492622138, "last_edit_date": 1492622138, "creation_date": 1492620803, "answer_id": 43501722, "question_id": 43496618, "link": "https://stackoverflow.com/questions/43496618/is-this-strategy-to-avoid-global-variables-in-c-right/43501722#43501722", "title": "Is this strategy, to avoid global variables in C, right?", "body": "<p>There are several questions in there:</p>\n\n<blockquote>\n  <p>is this a good approach? </p>\n</blockquote>\n\n<p>Yes.  There is perhaps an argument for placing the ISR in the same module as the access functions and data it shares, treating it as an access function itself allowing it to read the data directly without the access wrapper overhead.</p>\n\n<hr>\n\n<blockquote>\n  <p>Is it better/worse/equal to simply have a bunch of globals? </p>\n</blockquote>\n\n<p>Much worse.  With a global where are you going to place your access mutex, data validation or breakpoints?  It increases module coupling, and that should always be minimised.</p>\n\n<hr>\n\n<blockquote>\n  <p>Any major drawbacks?</p>\n</blockquote>\n\n<p>Not really. There is a function call overhead which may be critical in an ISR; but if that were an issue you would not be calling <code>printf()</code> in an ISR!  You can mitigate any possible performance penalty applying my earlier suggestion about placing the ISR in the data module, or by in-lining the code - but your compiler is free to ignore that, and may do so if debugging is enabled, and may also inline regardless if optimisation is enabled.  Some compilers have a \"forced\" inline extension that the compiler is not allowed to ignore; but it is not portable.</p>\n\n<p>One significant benefit is that if the variable is non-atomic, you need some access protection mechanism to ensure consistent access - and that is most easily and safely performed by having access functions.  In this case you might have get / set functions that disable and re-enable the interrupt around the access for example, or use a spin-lock (suitable for where the ISR writes and the normal context reads - not the other way around as you have here - don't lock the ISR indefinitely!) .</p>\n\n<hr>\n\n<blockquote>\n  <p>I also thought I could use some sort of mix like still having the global variables to allow direct manipulation by the ISR (since function calls from the ISR are sometimes frown upon) and the functions in every other case. Would this be better?</p>\n</blockquote>\n\n<p>Not really - see my point above about function call overhead and placement of the ISR with the data.  The problem with calling functions in an ISR is seldom a time-overhead issue, but rather that the implementer of the function may not have designed it to be called safely and efficiently from an ISR and it may use excessive stack, non-deterministic execution time, busy-wait or not be re-entrant or thread-safe.  Calling third-party or standard library functions for example may be ill-advised; calling functions you have specifically written and designed for the purpose and conforming to your specific constraints is not necessarily a problem.</p>\n\n<hr>\n\n<p>All you need to know about why globals are a bad idea and appropriate ways to avoid them can be found in Jack Ganssle's article <a href=\"http://www.embedded.com/electronics-blogs/break-points/4025723/A-pox-on-globals\" rel=\"nofollow noreferrer\">\"A Pox on Globals\"</a> - it is also an entertaining read.</p>\n"}], "owner": {"reputation": 163, "user_id": 2300838, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/E28F9.gif?s=128&g=1", "display_name": "zakkos", "link": "https://stackoverflow.com/users/2300838/zakkos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1059, "favorite_count": 2, "closed_date": 1492638822, "accepted_answer_id": 43501722, "answer_count": 1, "score": 8, "last_activity_date": 1492704638, "creation_date": 1492607079, "last_edit_date": 1492704638, "question_id": 43496618, "link": "https://stackoverflow.com/questions/43496618/is-this-strategy-to-avoid-global-variables-in-c-right", "closed_reason": "Opinion-based", "title": "Is this strategy, to avoid global variables in C, right?", "body": "<p>in my (personal) embedded project global variables are piling up. I need those variables to be acessible from the ISR (interrupt service routine) and/or from a menu system (so that they can be modified by the user) but at the same time I'd like to avoid having too many globals.  </p>\n\n<p>Since they can be grouped for modules I thought that I can encapsulate them in their own .c file, declared as <code>static</code> or <code>static volatile</code> , and expose to the outside world some functions to handle them. </p>\n\n<p>Something along the line of:</p>\n\n<p><strong>in module1.c</strong> </p>\n\n<pre><code>#include module1.h\n\nstatic volatile int module1_variable;\n\nint getModule1Var(void){\n    return module1_variable;\n}\n\nvoid setModule1Var(int i){\n    //some code to disable interrupts for atomic operations\n    module1_variable = i;\n    //some other code to re-enable interrupts\n    return;\n}\n</code></pre>\n\n<p>module1.h would contain the function prototypes, structs and all the other elements for making the module work except for the static variable definition of course</p>\n\n<p><strong>in main.c</strong></p>\n\n<pre><code>#include module1.h\n\nvoid main(){\n    //setting the variable value, could be done from a menu \n    setModule1Var(15);\n    //remaining application code\n}\n\nvoid generic_ISR(){\n    //trivial usage example\n    doSomething(getModule1Var());\n    return;\n}\n</code></pre>\n\n<p>This scheme would naturally be extended to the other modules.</p>\n\n<p>Now my questions are:<br>\n<strong>is this a good approach? Is it the same to simply have a bunch of globals? Any major drawbacks?</strong></p>\n\n<p>I also thought I could use some sort of mix like still having the global variables to allow direct manipulation by the ISR (since function calls from the ISR are sometimes frown upon) and the functions in every other case. Would this be better?</p>\n"}, {"tags": ["c", "macros", "c-preprocessor"], "comments": [{"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 5, "creation_date": 1492606252, "post_id": 43496222, "comment_id": 74046744, "body": "Preprocessor directives do not run at runtime, they run before the compilation. You cannot do things like this."}, {"owner": {"reputation": 852, "user_id": 2712889, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/59e3c635f7cf064f14bbdcf6ecb550fb?s=128&d=identicon&r=PG&f=1", "display_name": "Mohammad Farahi", "link": "https://stackoverflow.com/users/2712889/mohammad-farahi"}, "reply_to_user": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1492606304, "post_id": 43496222, "comment_id": 74046777, "body": "so what&#39;s the solution?"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1492606310, "post_id": 43496222, "comment_id": 74046781, "body": "Preprocessor only sees included files. What is in a different .c file is completely invisible for Prepro."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1492606320, "post_id": 43496222, "comment_id": 74046792, "body": "Macro definitions are not executable code.  They apply (only) at compile time, in the portion of the translation unit from their definition to any un- or redefinition."}, {"owner": {"reputation": 690, "user_id": 4187370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/240cfc5c0fab089cfe9035e9bc85f421?s=128&d=identicon&r=PG&f=1", "display_name": "Rogus", "link": "https://stackoverflow.com/users/4187370/rogus"}, "edited": false, "score": 0, "creation_date": 1492606345, "post_id": 43496222, "comment_id": 74046817, "body": "After preprocessor runs, the compiler has such code to compile: <code>void REDEFINE() {}</code>."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1492606422, "post_id": 43496222, "comment_id": 74046859, "body": "If you want a solution tell us what you want to achieve. Using (&quot;printing&quot;) the last defined value is what you already get; just only within the &quot;visible universe&quot;."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1492606510, "post_id": 43496222, "comment_id": 74046922, "body": "Macros are not functions, functions are not macros."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1492606543, "post_id": 43496222, "comment_id": 74046952, "body": "@MohammadFarahi, there is no &quot;solution&quot; to the problem as you have posed it.  It&#39;s unclear what the real problem is that you were trying to solve with this approach; it may be that you can solve it by <i>returning</i> the wanted value from a function or by having the function set the value of a visible variable."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 2, "creation_date": 1492606580, "post_id": 43496222, "comment_id": 74046977, "body": "I think we might be looking at a XY problem."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1492625411, "post_id": 43496222, "comment_id": 74060643, "body": "Pretty sure now that it is X (I need to override many macros and want to do that in one file) Y (I try to change macros inside a function in a code file and that fails). Can you confirm Mohammad?"}], "answers": [{"comments": [{"owner": {"reputation": 852, "user_id": 2712889, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/59e3c635f7cf064f14bbdcf6ecb550fb?s=128&d=identicon&r=PG&f=1", "display_name": "Mohammad Farahi", "link": "https://stackoverflow.com/users/2712889/mohammad-farahi"}, "edited": false, "score": 0, "creation_date": 1492607356, "post_id": 43496373, "comment_id": 74047545, "body": "because of hundred macro defines in original code, I have to redefine all in a single lib and not able to define them as a static int variable"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1492624923, "post_id": 43496373, "comment_id": 74060328, "body": "Now that is a reason I understand and it also sheds light on what you actually need. See my answer. And please consider editing this vital information into your question. As a comment here, it might get lost, for example if Story Teller decides to delete his answer. Then anybody else trying to help you would be doomed..."}], "tags": [], "owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1492606459, "creation_date": 1492606459, "answer_id": 43496373, "question_id": 43496222, "link": "https://stackoverflow.com/questions/43496222/c-preprocessor-macros-priority-of-define/43496373#43496373", "title": "C Preprocessor Macros priority of define", "body": "<p>The preprocessor is a one pass translation phase that does no more than preform token substitution before your code is compiled.</p>\n\n<p><code>define</code> and <code>undef</code> are not executable statements, they are done and gone long before your program is finished compiling.</p>\n\n<p>If you want a modifiable value, you need to define a variable (with static storage duration) to hold it. So a different <code>variable.c</code>:</p>\n\n<pre><code>static int value = 1234;\n\nint set_value(int new) {\n  int prev = value;\n  value = new;\n  return prev;\n}\n\nint get_value() {\n  return value;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": false, "score": 0, "last_activity_date": 1492606529, "creation_date": 1492606529, "answer_id": 43496405, "question_id": 43496222, "link": "https://stackoverflow.com/questions/43496222/c-preprocessor-macros-priority-of-define/43496405#43496405", "title": "C Preprocessor Macros priority of define", "body": "<p>This is not how preprocessor works. By the time the compiler runs, the preprocessor's run is over. It's all done before your program's execution time - even before your program turns into something that can be executed.</p>\n\n<p><code>VAR</code> gets replaced with <code>1234</code> or <code>1111</code>, whichever one is in effect at the time the preprocessor reaches the line with <code>VAR</code> in it, so the compiler does not see <code>VAR</code> at all: instead, it sees the number that the preprocessor uses for its replacement.</p>\n\n<p>The call  to <code>REDEFINE()</code> has no effect:</p>\n\n<pre><code>void REDEFINE(){\n#undef VAR\n#define VAR 1111\n}\n</code></pre>\n\n<p>preprocessor directives change <code>VAR</code> to <code>1111</code> in the space of the translation unit that you are compiling, at the time the preprocessor reaches the new <code>#define</code> line.</p>\n"}, {"tags": [], "owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "is_accepted": false, "score": 0, "last_activity_date": 1492625049, "last_edit_date": 1492625049, "creation_date": 1492624670, "answer_id": 43502931, "question_id": 43496222, "link": "https://stackoverflow.com/questions/43496222/c-preprocessor-macros-priority-of-define/43502931#43502931", "title": "C Preprocessor Macros priority of define", "body": "<p>I provide an answer for the situation that you really have to redefine many macros and want to do that in one file. But please double check.<br>\nThis is going to become a <strong>maintenance hell</strong>.\nI have a superstition that using <code>undef</code> is evil, or at least very unlucky. </p>\n\n<p>Do not try to undef-redefine in a .c file.<br>\nDo so in a new header.  </p>\n\n<p>REDEFINE.H:</p>\n\n<pre><code>#undef VAR\n#define VAR 1111\n</code></pre>\n\n<p>main.c:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include \"variable.h\"\n#include \"REDEFINE.H\"\n\nint main(){\n    //REDEFINE(); // not needed\n    printf(\"%d\",VAR);\n    while(1); // This is of course not in your actual code,\n    // make sure that there is a return statement instead.\n}\n</code></pre>\n"}], "owner": {"reputation": 852, "user_id": 2712889, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/59e3c635f7cf064f14bbdcf6ecb550fb?s=128&d=identicon&r=PG&f=1", "display_name": "Mohammad Farahi", "link": "https://stackoverflow.com/users/2712889/mohammad-farahi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 654, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1492648077, "creation_date": 1492606112, "last_edit_date": 1492648077, "question_id": 43496222, "link": "https://stackoverflow.com/questions/43496222/c-preprocessor-macros-priority-of-define", "title": "C Preprocessor Macros priority of define", "body": "<p>I want to print last defined macros in my code:</p>\n\n<pre><code>#define VAR   1234\n\n#undef  VAR\n#define VAR   1111\nint main(){\n\nprintf(\"%d\",VAR);\nwhile(1);\n}\n</code></pre>\n\n<p>The output is <code>1111</code></p>\n\n<p><strong>If I want to define in another library.</strong></p>\n\n<p>But when I redefine <code>VAR</code> in an external library output is the first defined value. This is it:</p>\n\n<p>iIn main code:</p>\n\n<pre><code>#include \"variable.h\"\n\nint main(){\n   REDEFINE();\n   printf(\"%d\",VAR);\n   while(1);\n}\n</code></pre>\n\n<p>variable.h</p>\n\n<pre><code>#define VAR 1234\nvoid REDEFINE(void);\n</code></pre>\n\n<p>variable.c</p>\n\n<pre><code>void REDEFINE(){\n    #undef VAR\n    #define VAR 1111\n}\n</code></pre>\n\n<p>In this case, output is <code>1234</code> and the <code>REDEFINE()</code> function didn't change the <code>VAR</code> value. How can I change my macro variables in <code>variable.c</code> without having to redefine in top of my main code?</p>\n"}, {"tags": ["c", "dynamic-memory-allocation"], "comments": [{"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 2, "creation_date": 1492605217, "post_id": 43495829, "comment_id": 74045958, "body": "I have seen this question before (few days ago). The answer was then: you can&#39;t."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1492605218, "post_id": 43495829, "comment_id": 74045959, "body": "From an applications point, you <i>can&#39;t</i> &quot;merge&quot; blocks, since you have no control over the allocator. If you want that capability you have to create your own allocator."}, {"owner": {"reputation": 48, "user_id": 7889700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20f0fe41c1976b6f6c90c9250e22edd8?s=128&d=identicon&r=PG&f=1", "display_name": "praneeth", "link": "https://stackoverflow.com/users/7889700/praneeth"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1492605380, "post_id": 43495829, "comment_id": 74046092, "body": "@Someprogrammerdude   how can we create our own memory allocater?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1492663394, "post_id": 43495829, "comment_id": 74074857, "body": "@praneeth write some code to allocate and free memory"}], "answers": [{"comments": [{"owner": {"reputation": 48, "user_id": 7889700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20f0fe41c1976b6f6c90c9250e22edd8?s=128&d=identicon&r=PG&f=1", "display_name": "praneeth", "link": "https://stackoverflow.com/users/7889700/praneeth"}, "edited": false, "score": 0, "creation_date": 1492605553, "post_id": 43495932, "comment_id": 74046238, "body": "my friend asks that how can we mearge freed blocks all together to own block"}, {"owner": {"reputation": 48, "user_id": 7889700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20f0fe41c1976b6f6c90c9250e22edd8?s=128&d=identicon&r=PG&f=1", "display_name": "praneeth", "link": "https://stackoverflow.com/users/7889700/praneeth"}, "edited": false, "score": 0, "creation_date": 1492605748, "post_id": 43495932, "comment_id": 74046394, "body": "tell me what are the special type of allocators for de-fragmention"}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "reply_to_user": {"reputation": 48, "user_id": 7889700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20f0fe41c1976b6f6c90c9250e22edd8?s=128&d=identicon&r=PG&f=1", "display_name": "praneeth", "link": "https://stackoverflow.com/users/7889700/praneeth"}, "edited": false, "score": 0, "creation_date": 1492605949, "post_id": 43495932, "comment_id": 74046544, "body": "@praneeth That can only be done in general if the blocks are adjacent, of course, and I guess most shipping standard libraries do this. Recommending software is off-topic for this site, you need to do some searching on your own."}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 0, "last_activity_date": 1492605290, "creation_date": 1492605290, "answer_id": 43495932, "question_id": 43495829, "link": "https://stackoverflow.com/questions/43495829/how-to-allocate-dynamic-memory-and-reallocate-after-reallocate-how-we-bring-midd/43495932#43495932", "title": "How to allocate dynamic memory and reallocate after reallocate how we bring middle freed memory to one block memory", "body": "<p>I don't think this can be answered in general, except with \"you can't\" since there really is no way using the standard library's heap API to do this.</p>\n\n<p>There are special-purpose allocators you can use instead of the standard library's, which might expose more functionality to support de-fragmentation of the heap.</p>\n"}, {"tags": [], "owner": {"reputation": 158, "user_id": 7850338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ebc675bf6a75a15a73dbcc367625bd5?s=128&d=identicon&r=PG&f=1", "display_name": "Galeeb Basha", "link": "https://stackoverflow.com/users/7850338/galeeb-basha"}, "is_accepted": true, "score": 1, "last_activity_date": 1492684017, "creation_date": 1492684017, "answer_id": 43516909, "question_id": 43495829, "link": "https://stackoverflow.com/questions/43495829/how-to-allocate-dynamic-memory-and-reallocate-after-reallocate-how-we-bring-midd/43516909#43516909", "title": "How to allocate dynamic memory and reallocate after reallocate how we bring middle freed memory to one block memory", "body": "<p>You can't defragment the memory, In case if you wanna do it, you cab call me.</p>\n\n<p>I have already experience this kind of situation, but I don't have the code now yet I am still confident that you cant do this as it is impossible</p>\n"}], "owner": {"reputation": 48, "user_id": 7889700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20f0fe41c1976b6f6c90c9250e22edd8?s=128&d=identicon&r=PG&f=1", "display_name": "praneeth", "link": "https://stackoverflow.com/users/7889700/praneeth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 43516909, "answer_count": 2, "score": 1, "last_activity_date": 1492684017, "creation_date": 1492605014, "last_edit_date": 1492662377, "question_id": 43495829, "link": "https://stackoverflow.com/questions/43495829/how-to-allocate-dynamic-memory-and-reallocate-after-reallocate-how-we-bring-midd", "title": "How to allocate dynamic memory and reallocate after reallocate how we bring middle freed memory to one block memory", "body": "<p>Assume 10k heap</p>\n\n<pre><code>int *p1;\np1 = malloc(3*K); \n</code></pre>\n\n<p>Then, a further 4K is requested:</p>\n\n<pre><code>p2 = malloc(4*K);\n</code></pre>\n\n<p>3K of memory is now free.</p>\n\n<p>Some time later, the first memory allocation, pointed to by p1, is de-allocated:</p>\n\n<pre><code>free(p1);\n</code></pre>\n\n<p>This leaves 6K of memory free in two 3K chunks. A further request for a 4K allocation is issued:</p>\n\n<pre><code>p1 = malloc(4*K);\n</code></pre>\n\n<p>This results in a failure \u2013 NULL is returned into p1 \u2013 because, even though 6K of memory is available, there is not a 4K contiguous block available</p>\n\n<p>How can I merge the two 3K blocks to make a single one of 6K?</p>\n\n<p>the following code giving segmentation error.</p>\n\n<p>if I free 2 and 4 row that freed memory two blocks marge as one block how it possible</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\nint** allocate2D(int rows,int cols)\n{\nint **arr2D;\nint i;\narr2D = (int**)malloc(rows*sizeof(int*));\nfor(i=0;i&lt;rows;i++)\n{\n    arr2D[i] = (int*)malloc(cols*sizeof(int));\n}\n}\nvoid deallocate2D(int** arr2D,int rows)\n{\nint i,a,b;\nprintf(\"Enter from which row you want to delete\");\nscanf(\"%d\",&amp;a);\nprintf(\"Enter till which row you want to delete\");\nscanf(\"%d\",&amp;b);\nfor(i=a;i&lt;b;i++)\n{\n    free(arr2D[i]);\n}\n\n}\nmain( )\n{\nint i,j,k;\nint **arr2D;\narr2D=allocate2D(5,5);\nfor(i=0;i&lt;5;i++)\n{\n   for(j=0;j&lt;5;j++)\n      {\n        scanf(\"%d\" ,arr2D[i][j]);\n      }\n}\ndeallocate2D(arr2D,k);\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1492604121, "post_id": 43495462, "comment_id": 74045117, "body": "Please take some time to read <a href=\"http://stackoverflow.com/help\">the help pages</a>, especially the sections named <a href=\"http://stackoverflow.com/help/on-topic\">&quot;What topics can I ask about here?&quot;</a> and <a href=\"http://stackoverflow.com/help/dont-ask\">&quot;What types of questions should I avoid asking?&quot;</a>. Also please <a href=\"http://stackoverflow.com/help/how-to-ask\">read about how to ask good questions</a>, and learn how to create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a>."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1492604370, "post_id": 43495462, "comment_id": 74045293, "body": "I also suggest you listen to your compiler and the warnings it gives you. And if it doesn&#39;t give you warnings then you need to enable more warnings. There are a few problems with the code you show, all detecable by the compiler."}, {"owner": {"reputation": 2462, "user_id": 5293112, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JGyvU.png?s=128&g=1", "display_name": "kuro", "link": "https://stackoverflow.com/users/5293112/kuro"}, "edited": false, "score": 0, "creation_date": 1492604512, "post_id": 43495462, "comment_id": 74045392, "body": "May be you are trying to do <code>b=pow(10, i)</code>. But this is not a good idea. See the answers for better implementation"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1492614151, "post_id": 43495462, "comment_id": 74053123, "body": "Notice that &quot;number of digits in integer&quot; and &quot;length of entered number is&quot; is potentially different when considering zero and negative numbers."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7886239"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1493384086, "post_id": 43495462, "comment_id": 74407579, "body": "That&#39;s some food for thought.I will keep that  in mind. @chux"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7886239"}, "edited": false, "score": 0, "creation_date": 1492605660, "post_id": 43495566, "comment_id": 74046340, "body": "actualy correct method was to calculate pow(10,i) instead of 10*i. now the code is working fine."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1492608571, "post_id": 43495566, "comment_id": 74048545, "body": "Don&#39;t use pow for this: i) it&#39;s expensive, ii) you risk overflowing an <code>int</code>, iii) can go off due to floating point. <code>pow(x, y)</code> is typically implemented as <code>exp (y log x)</code> in C. Repeated division by 10 is better in every respect."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1492613562, "post_id": 43495566, "comment_id": 74052667, "body": "<code>for (; num &#47;= 10; ++digits);</code> fails for <code>num==0</code> as zero is usually considered a one digit number..  Consider <code>do { ++digits; } while (num &#47;= 10);</code>"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1492613621, "post_id": 43495566, "comment_id": 74052719, "body": "@chux: I probably should have mentioned zero as a special case. To me, defining the number of digits necessary to hold 0 is down to personal choice (I like to think of 0 as requiring 0 digits to store, but then I guess mathematicians are strange folk!)"}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 3, "last_activity_date": 1492604360, "creation_date": 1492604360, "answer_id": 43495566, "question_id": 43495462, "link": "https://stackoverflow.com/questions/43495462/c-code-to-find-number-of-digits-in-integer-is-not-working-as-per-suggest-modific/43495566#43495566", "title": "C code to find number of digits in integer is not working as per.suggest modifications", "body": "<p>Computing <code>b=10*i;</code> makes no logical sense. Did you want to raise 10 to a given <em>power</em>?</p>\n\n<p>The normal way of solving this problem is to repeatedly divide by 10 until 0 is reached (using integer arithmetic), and count the number of divisions made. That is the number of digits in the original number. This method is also not vulnerable to integer overflow:</p>\n\n<pre><code>unsigned digits = 0;\nfor (; num /= 10; ++digits);\nreturn digits;\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7886239"}, "edited": false, "score": 0, "creation_date": 1492606308, "post_id": 43495603, "comment_id": 74046780, "body": "thanks for the help.but my code is now working when i replaced 10*i with pow(10,i)."}, {"owner": {"reputation": 375, "user_id": 5683152, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/d7Iy3.png?s=128&g=1", "display_name": "sstefan", "link": "https://stackoverflow.com/users/5683152/sstefan"}, "edited": false, "score": 0, "creation_date": 1492606683, "post_id": 43495603, "comment_id": 74047069, "body": "@frontMatter Ok its working, but consider changing it. Your for loop only goes 50 times, it works but its not right. You should set something else as end condition. Also, int c...i didn&#39;t see where you used it"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7886239"}, "edited": false, "score": 0, "creation_date": 1492607236, "post_id": 43495603, "comment_id": 74047465, "body": "i used 50 since it was a constraint for the problem i was working on. and int c, thanks for ponting out."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1492613872, "post_id": 43495603, "comment_id": 74052915, "body": "Note that <code>len(-123)</code> returns 1. I&#39;d expect 3."}, {"owner": {"reputation": 375, "user_id": 5683152, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/d7Iy3.png?s=128&g=1", "display_name": "sstefan", "link": "https://stackoverflow.com/users/5683152/sstefan"}, "edited": false, "score": 0, "creation_date": 1492614861, "post_id": 43495603, "comment_id": 74053619, "body": "my bad..changed it"}], "tags": [], "owner": {"reputation": 375, "user_id": 5683152, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/d7Iy3.png?s=128&g=1", "display_name": "sstefan", "link": "https://stackoverflow.com/users/5683152/sstefan"}, "is_accepted": false, "score": 1, "last_activity_date": 1492614886, "last_edit_date": 1492614886, "creation_date": 1492604450, "answer_id": 43495603, "question_id": 43495462, "link": "https://stackoverflow.com/questions/43495462/c-code-to-find-number-of-digits-in-integer-is-not-working-as-per-suggest-modific/43495603#43495603", "title": "C code to find number of digits in integer is not working as per.suggest modifications", "body": "<pre><code>int len(int num){\n    int i = 0;\n\n    if(num == 0)\n        return 1;\n\n    while(num!=0){\n        num = num / 10;\n        i++;\n    }\n    return i;\n}\n</code></pre>\n\n<p>here we divide num by 10 until it reaches 0, and each time loop executes we increment the count <code>i++</code></p>\n"}, {"comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1492605177, "post_id": 43495861, "comment_id": 74045925, "body": "<code>fflush(stdin);</code> = one cat potentially eaten due to undefined behaviour. See <a href=\"http://stackoverflow.com/questions/2979209/using-fflushstdin\">stackoverflow.com/questions/2979209/using-fflushstdin</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7886239"}, "edited": false, "score": 0, "creation_date": 1492606282, "post_id": 43495861, "comment_id": 74046763, "body": "thanks for the help.but my code is now working when i replaced 10*i with pow(10,i)"}], "tags": [], "owner": {"reputation": 35, "user_id": 5483716, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QLNnrtzPNYo/AAAAAAAAAAI/AAAAAAAAABQ/p-Zk5naL_cQ/photo.jpg?sz=128", "display_name": "Team Work", "link": "https://stackoverflow.com/users/5483716/team-work"}, "is_accepted": false, "score": -1, "last_activity_date": 1492605089, "creation_date": 1492605089, "answer_id": 43495861, "question_id": 43495462, "link": "https://stackoverflow.com/questions/43495462/c-code-to-find-number-of-digits-in-integer-is-not-working-as-per-suggest-modific/43495861#43495861", "title": "C code to find number of digits in integer is not working as per.suggest modifications", "body": "<p>frontmatter i am not able to recognize your answer but i think this following code is helpful as per your title.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;conio.h&gt;\nvoid main()\n{\n    char a[50000];\n    int i,c=0;\n    printf(\"enter number:\");\n    fflush(stdin);\n    gets(a);\n    for(i=0;a[i]!='\\0';i++)\n    {\n        if(a[i]&gt;=0 || a[i]&lt;=9)\n        {\n            c++;\n        }\n    }\n    printf(\"\\n %d digit number\",c);\n    getch();\n}                        \n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7886239"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1492614886, "creation_date": 1492604071, "last_edit_date": 1492604196, "question_id": 43495462, "link": "https://stackoverflow.com/questions/43495462/c-code-to-find-number-of-digits-in-integer-is-not-working-as-per-suggest-modific", "title": "C code to find number of digits in integer is not working as per.suggest modifications", "body": "<p>here is the link to the file(google docs link) containing my code - </p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint len(int);\nvoid main()\n{\n    int n,p;\n    printf(\"enter number\");\n    scanf(\"%d\",&amp;n);\n    p=len(n);\n    printf(\"length of entered number is %d\",p);\n}\nint len(int num)\n{\n    int i,c,b;\n    for(i=1;i&lt;=50;i++){\n        b=10*i;\n        if(num&lt;b) {\n            return(i);\n            break;\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1492602950, "post_id": 43495023, "comment_id": 74044278, "body": "It says so right at the error message <code>fp = 0x0</code>, the passed file pointer is NULL."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 2, "creation_date": 1492607803, "post_id": 43495023, "comment_id": 74047886, "body": "See <a href=\"http://stackoverflow.com/questions/5431941/why-is-while-feof-file-always-wrong\">Why is \u201cwhile ( !feof (file) )\u201d always wrong?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 6316675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HcVYN.jpg?s=128&g=1", "display_name": "yrekik", "link": "https://stackoverflow.com/users/6316675/yrekik"}, "edited": false, "score": 0, "creation_date": 1492603131, "post_id": 43495060, "comment_id": 74044398, "body": "I know this is strange part because I have the same args on eclipse debugger and the fopen function returns the correct pointer to the file when I step through the code"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "reply_to_user": {"reputation": 45, "user_id": 6316675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HcVYN.jpg?s=128&g=1", "display_name": "yrekik", "link": "https://stackoverflow.com/users/6316675/yrekik"}, "edited": false, "score": 0, "creation_date": 1537539586, "post_id": 43495060, "comment_id": 91834174, "body": "@yrekik I would bet you pass a relative file path and not a full absolute path. In that case it depends on your working directory which might be different in your debugger and your command line."}], "tags": [], "owner": {"reputation": 1329, "user_id": 1280414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ab3fd0499936f30bceb77e053520dd6?s=128&d=identicon&r=PG", "display_name": "Sergej Christoforov", "link": "https://stackoverflow.com/users/1280414/sergej-christoforov"}, "is_accepted": false, "score": 1, "last_activity_date": 1492602966, "creation_date": 1492602966, "answer_id": 43495060, "question_id": 43495023, "link": "https://stackoverflow.com/questions/43495023/segmentation-fault-io-feof-fp-0x0-at-feof-c35/43495060#43495060", "title": "Segmentation fault : _IO_feof (fp=0x0) at feof.c:35", "body": "<p>You should check <code>fopen</code> return value.</p>\n"}, {"comments": [{"owner": {"reputation": 45, "user_id": 6316675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HcVYN.jpg?s=128&g=1", "display_name": "yrekik", "link": "https://stackoverflow.com/users/6316675/yrekik"}, "edited": false, "score": 0, "creation_date": 1492603621, "post_id": 43495113, "comment_id": 74044747, "body": "Surprisingly simple this worked like a charm ! and thanks for the advice"}], "tags": [], "owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "is_accepted": true, "score": 3, "last_activity_date": 1537539247, "last_edit_date": 1537539247, "creation_date": 1492603129, "answer_id": 43495113, "question_id": 43495023, "link": "https://stackoverflow.com/questions/43495023/segmentation-fault-io-feof-fp-0x0-at-feof-c35/43495113#43495113", "title": "Segmentation fault : _IO_feof (fp=0x0) at feof.c:35", "body": "<p>Note that <code>while (!feof(f))</code> is always a bug because in C the end-of-file condition is only detected <strong>after</strong> an attempt to read, never <strong>before</strong>.</p>\n\n<p>And then, you violated two of the <a href=\"https://www.lysator.liu.se/c/ten-commandments.html\" rel=\"nofollow noreferrer\">ten commandments</a> (2 and 6), by not checking the return value from <code>fopen</code>, which can be NULL and cause segmentation faults when you use the file pointer.</p>\n\n<p>Yes, no matter what you tell us about your IDE and debugging, you got a NULL pointer from <code>fopen()</code> and passed it to <code>feof()</code>, which is literally in the error message you got and the question title: <code>fp=0x0</code>.</p>\n"}], "owner": {"reputation": 45, "user_id": 6316675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HcVYN.jpg?s=128&g=1", "display_name": "yrekik", "link": "https://stackoverflow.com/users/6316675/yrekik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1726, "favorite_count": 0, "accepted_answer_id": 43495113, "answer_count": 2, "score": 1, "last_activity_date": 1592716470, "creation_date": 1492602834, "last_edit_date": 1537539339, "question_id": 43495023, "link": "https://stackoverflow.com/questions/43495023/segmentation-fault-io-feof-fp-0x0-at-feof-c35", "title": "Segmentation fault : _IO_feof (fp=0x0) at feof.c:35", "body": "<p>When I run the output program using gdb from the terminal it always ends with a segmentation fault at this function.\nBut running this with eclipse debugger works fine.</p>\n\n<pre><code>ssize_t\nread_from_file(char *arg, unsigned char *buf, size_t max_buf_len) {\n  ssize_t result = 0;\n  FILE *f = fopen(arg, \"r\");\n  int c;\n  while (!feof(f)) {\n    size_t bytes_read;\n    bytes_read = fread(buf, 1, max_buf_len, f);\n    if (ferror(f)) {\n      result = -1;\n      break;\n    }\n\n    buf += bytes_read;\n    result += bytes_read;\n    max_buf_len -= bytes_read;\n  }\n\n  fclose(f);\n  return result;\n}\n</code></pre>\n\n<p>Error message from gdb </p>\n\n<pre><code>[Thread debugging using libthread_db enabled]\nUsing host libthread_db library \"/lib/x86_64-linux-gnu/libthread_db.so.1\".\n\nProgram received signal SIGSEGV, Segmentation fault.\n_IO_feof (fp=0x0) at feof.c:35\n35      feof.c: No such file or directory.\n</code></pre>\n\n<p>I tried using alternatives to <code>feof()</code> Like</p>\n\n<pre><code>while((c = fgetc(file)) != EOF)\n</code></pre>\n\n<p>But I get the same results</p>\n\n<pre><code>[Thread debugging using libthread_db enabled]\nUsing host libthread_db library \"/lib/x86_64-linux-gnu/libthread_db.so.1\".\n\nProgram received signal SIGSEGV, Segmentation fault.\n_IO_getc (fp=0x0) at getc.c:37\n37      getc.c: No such file or directory.\n</code></pre>\n\n<p>Does anyone know where this error is originating from?</p>\n"}, {"tags": ["c", "sockets", "udp", "bind", "winsock"], "comments": [{"owner": {"reputation": 8169, "user_id": 759558, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/kz2la.jpg?s=128&g=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/759558/neil"}, "edited": false, "score": 0, "creation_date": 1492603781, "post_id": 43494920, "comment_id": 74044862, "body": "Is SO_REUSEADDR available in WinSock?  Are you checking the return value from setsockopt? <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms740476(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/&hellip;</a>"}, {"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1492610979, "post_id": 43494920, "comment_id": 74050534, "body": "Why do you use the same port - <a href=\"http://xyproblem.info/\" rel=\"nofollow noreferrer\">xyproblem.info</a> ?"}, {"owner": {"reputation": 11, "user_id": 7881514, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-zUF5uQN7qJU/AAAAAAAAAAI/AAAAAAAAAUA/UpjVsqzji6g/photo.jpg?sz=128", "display_name": "mehrdad fallahpour", "link": "https://stackoverflow.com/users/7881514/mehrdad-fallahpour"}, "edited": false, "score": 0, "creation_date": 1492656644, "post_id": 43494920, "comment_id": 74073047, "body": "Yes, It&#39;s possible to bind same port to two different sockets with SO_REUSEADDR option."}, {"owner": {"reputation": 11, "user_id": 7881514, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-zUF5uQN7qJU/AAAAAAAAAAI/AAAAAAAAAUA/UpjVsqzji6g/photo.jpg?sz=128", "display_name": "mehrdad fallahpour", "link": "https://stackoverflow.com/users/7881514/mehrdad-fallahpour"}, "edited": false, "score": 0, "creation_date": 1492656670, "post_id": 43494920, "comment_id": 74073056, "body": "The reason why I need to use same port is, I have a Voip software that has a UDP listener to receive audio packets. This application is closed and I can&#39;t change it. I need to send audio packets to this software from somewhere behind a different NAT. To handle P2P connection for those peers, I need to bind a UDP socket same as the voip software on the same host and send UDP packets to the originate of audio packets. Then NAT without port-forwarding and STUN/TURN and ... will route packets to Voip software."}, {"owner": {"reputation": 326, "user_id": 7576082, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/55dd92fa2efa971a901d11598532c76e?s=128&d=identicon&r=PG&f=1", "display_name": "rinn2883", "link": "https://stackoverflow.com/users/7576082/rinn2883"}, "edited": false, "score": 0, "creation_date": 1492762230, "post_id": 43494920, "comment_id": 74126637, "body": "Idk sorry, but I can&#39;t picture what you are trying to do with the explanation provided"}], "answers": [{"comments": [{"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 1, "creation_date": 1492611771, "post_id": 43498061, "comment_id": 74051188, "body": "When two UDP sockets are bound to the same port and an incoming unicast packet is received on that port, it will be handed to one of the two sockets (chosen arbitrarily).  If the incoming packet is a multicast UDP packet, OTOH, it will be handed to every socket bound to the port.  (The latter behavior is necessary in order to allow multiple programs on the same host to listen to the same multicast group simultaneously)"}, {"owner": {"reputation": 326, "user_id": 7576082, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/55dd92fa2efa971a901d11598532c76e?s=128&d=identicon&r=PG&f=1", "display_name": "rinn2883", "link": "https://stackoverflow.com/users/7576082/rinn2883"}, "reply_to_user": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1492612491, "post_id": 43498061, "comment_id": 74051792, "body": "good point. I did not include it because op did not mention using multicast."}, {"owner": {"reputation": 11, "user_id": 7881514, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-zUF5uQN7qJU/AAAAAAAAAAI/AAAAAAAAAUA/UpjVsqzji6g/photo.jpg?sz=128", "display_name": "mehrdad fallahpour", "link": "https://stackoverflow.com/users/7881514/mehrdad-fallahpour"}, "edited": false, "score": 0, "creation_date": 1492656542, "post_id": 43498061, "comment_id": 74073019, "body": "Thanks guys, So how can I deal with this problem? Since I am sending packets through the internet, can I send them in multicast mode?"}, {"owner": {"reputation": 326, "user_id": 7576082, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/55dd92fa2efa971a901d11598532c76e?s=128&d=identicon&r=PG&f=1", "display_name": "rinn2883", "link": "https://stackoverflow.com/users/7576082/rinn2883"}, "edited": false, "score": 0, "creation_date": 1492762135, "post_id": 43498061, "comment_id": 74126571, "body": "that depends since the VoIP is closed software there will have to be support for listening to a multicast address. For sending you don&#39;t need to join a multicast group but for receiving it needs to join a group."}], "tags": [], "owner": {"reputation": 326, "user_id": 7576082, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/55dd92fa2efa971a901d11598532c76e?s=128&d=identicon&r=PG&f=1", "display_name": "rinn2883", "link": "https://stackoverflow.com/users/7576082/rinn2883"}, "is_accepted": false, "score": 0, "last_activity_date": 1492610723, "last_edit_date": 1495535467, "creation_date": 1492610723, "answer_id": 43498061, "question_id": 43494920, "link": "https://stackoverflow.com/questions/43494920/identical-bound-port-udp-sockets-and-receiving-data-on-all-of-them/43498061#43498061", "title": "Identical bound port UDP sockets and receiving data on all of them", "body": "<p>This is normal behavior. I think this can't be done with 2 sockets listening on the same port.</p>\n\n<p>Why are you binding 2 sockets to the same port?</p>\n\n<p>Read <a href=\"https://stackoverflow.com/questions/14388706/socket-options-so-reuseaddr-and-so-reuseport-how-do-they-differ-do-they-mean-t\">Socket options SO_REUSEADDR and SO_REUSEPORT, how do they differ? Do they mean the same across all major operating systems?</a></p>\n\n<p>In linux it will even try to distribute the datagrams evenly between the 2 sockets, so its random. You will need to change how you send/receive packets.</p>\n"}], "owner": {"reputation": 11, "user_id": 7881514, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-zUF5uQN7qJU/AAAAAAAAAAI/AAAAAAAAAUA/UpjVsqzji6g/photo.jpg?sz=128", "display_name": "mehrdad fallahpour", "link": "https://stackoverflow.com/users/7881514/mehrdad-fallahpour"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 538, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1492610723, "creation_date": 1492602532, "question_id": 43494920, "link": "https://stackoverflow.com/questions/43494920/identical-bound-port-udp-sockets-and-receiving-data-on-all-of-them", "title": "Identical bound port UDP sockets and receiving data on all of them", "body": "<p>I need to do an important test. The test's condition is as bellow.</p>\n\n<p>I am using winsock and I have 2 UDP sockets (Sock-A and Sock-B) which with SO_REUSEADDR option both of them have been bound to port 1000 on one PC.\nBoth of them transmit UDP packets out to another socket (Sock-C) and Sock-C which is located in different LAN receives their messages. </p>\n\n<p>Sock-C responds them with some messages, but unfortunately I can see just Sock-A (which has been opened sooner) just gets the messages, and Sock-B doesn't get anything. When I close Sock-A I can see that Sock-B starts to receiving the messages.</p>\n\n<p>Any of you know what should I do to let both of Sock-A and Sock-B can receive messages from Sock-C?</p>\n\n<p>Thanks~ </p>\n"}, {"tags": ["c++", "c", "cmd", "windows-10"], "comments": [{"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1492602470, "post_id": 43494858, "comment_id": 74043955, "body": "Download a 64 bit version?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 10, "creation_date": 1492602512, "post_id": 43494858, "comment_id": 74043986, "body": "AFIAK you have to run turbo C++ in dosbox.  In case you did not know, turbo C++ is over 20 years old and should not be used anymore unless it is part of some legacy system.  If you are being taught with it, find a better teacher/place of learning."}, {"owner": {"reputation": 96886, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1492602762, "post_id": 43494858, "comment_id": 74044151, "body": "Why not use a modern C++ compiler? Turbo C++ 3 is going to be <i>wildly</i> out of date in terms of C++ standards, it is essentially useless in learning modern C++."}, {"owner": {"reputation": 10781, "user_id": 447901, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/11ea5dd4ad290e75422e32e1e340772e?s=128&d=identicon&r=PG", "display_name": "lit", "link": "https://stackoverflow.com/users/447901/lit"}, "edited": false, "score": 0, "creation_date": 1492613088, "post_id": 43494858, "comment_id": 74052291, "body": "You can download Microsoft Visual Studio 2017 Community Edition for free. Another good choice would be installing Cygwin or MinGW and use the open source gcc tools."}], "answers": [{"tags": [], "owner": {"reputation": 24288, "user_id": 1466046, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/Fa7gP.png?s=128&g=1", "display_name": "magicandre1981", "link": "https://stackoverflow.com/users/1466046/magicandre1981"}, "is_accepted": true, "score": 1, "last_activity_date": 1492608102, "creation_date": 1492608102, "answer_id": 43497018, "question_id": 43494858, "link": "https://stackoverflow.com/questions/43494858/this-version-of-c-turboc3-bin-tcc-exe-is-not-compatible-with-the-version-of-wi/43497018#43497018", "title": "&quot;This version of C:\\TURBOC3\\BIN\\TCC.EXE is not compatible with the version of Windows you&#39;re running.", "body": "<p>64Bit Windows no longer supports old 16Bit DOS applications. You <a href=\"http://blog.bestsoftware4download.com/2010/02/how-to-install-turbo-c-on-windows-7-64bit/\" rel=\"nofollow noreferrer\">need to use doxbox to get the tool running</a> or use this <a href=\"https://turboc.codeplex.com/\" rel=\"nofollow noreferrer\">updated TurboC++ version</a>, which includes DOSBox and does magic for you.</p>\n"}], "owner": {"reputation": 1, "user_id": 7889487, "user_type": "registered", "profile_image": "https://graph.facebook.com/1007304782738281/picture?type=large", "display_name": "Ashlesha Mishra", "link": "https://stackoverflow.com/users/7889487/ashlesha-mishra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1050, "favorite_count": 0, "closed_date": 1531828308, "accepted_answer_id": 43497018, "answer_count": 1, "score": -4, "last_activity_date": 1492608102, "creation_date": 1492602401, "question_id": 43494858, "link": "https://stackoverflow.com/questions/43494858/this-version-of-c-turboc3-bin-tcc-exe-is-not-compatible-with-the-version-of-wi", "closed_reason": "Needs more focus", "title": "&quot;This version of C:\\TURBOC3\\BIN\\TCC.EXE is not compatible with the version of Windows you&#39;re running.", "body": "<p>I have downloaded zip file of Turbo C++ 3.2 for my windows 10 64-bit. I can not run it in cmd because it gives mentioned error. But it perfectly runs in turbo c++. I have set environment variables. what should i do?</p>\n"}, {"tags": ["c++", "c", "openscenegraph", "tessellation"], "comments": [{"owner": {"reputation": 31, "user_id": 7889409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30523d5c705f5c5da7ca3397d02dad98?s=128&d=identicon&r=PG", "display_name": "Kanpachi", "link": "https://stackoverflow.com/users/7889409/kanpachi"}, "reply_to_user": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1492602683, "post_id": 43494786, "comment_id": 74044093, "body": "Edited for clarity."}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 7889409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30523d5c705f5c5da7ca3397d02dad98?s=128&d=identicon&r=PG", "display_name": "Kanpachi", "link": "https://stackoverflow.com/users/7889409/kanpachi"}, "is_accepted": true, "score": 0, "last_activity_date": 1492710400, "creation_date": 1492710400, "answer_id": 43526453, "question_id": 43494786, "link": "https://stackoverflow.com/questions/43494786/near-uniform-tessellation-of-a-concave-polygon-for-heightmaps/43526453#43526453", "title": "Near-uniform tessellation of a concave polygon for heightmaps", "body": "<p>This question didn't attract a great deal of interest, but I achieved fairly good results using the difficult-to-Google <a href=\"https://www.cs.cmu.edu/~quake/triangle.html\" rel=\"nofollow noreferrer\">Triangle</a> library.</p>\n\n<p><a href=\"https://i.stack.imgur.com/oVOac.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oVOac.png\" alt=\"A quick preview of some results.\"></a></p>\n\n<p>If I decided I wanted the triangulation to be strictly uniform on the interior of the polygon, I could probably provide Triangle with a set of vertices to further constrain the tessellation.</p>\n"}, {"tags": [], "owner": {"reputation": 1299, "user_id": 5704347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3bc37b9e462bbc6755257f8621686442?s=128&d=identicon&r=PG&f=1", "display_name": "Goodies", "link": "https://stackoverflow.com/users/5704347/goodies"}, "is_accepted": false, "score": 1, "last_activity_date": 1496436878, "last_edit_date": 1496436878, "creation_date": 1496436315, "answer_id": 44337177, "question_id": 43494786, "link": "https://stackoverflow.com/questions/43494786/near-uniform-tessellation-of-a-concave-polygon-for-heightmaps/44337177#44337177", "title": "Near-uniform tessellation of a concave polygon for heightmaps", "body": "<p>Very nice ! have you ever considered using a geometry shader for this ? DirectX 11 and OpenGL allow for \"on the fly\" tesselation using the GPU. It's 20-40 times faster, depending on your hardware.</p>\n\n<p>My favorite starting point for VS2015/C# tesselated animation is</p>\n\n<p><a href=\"https://github.com/RobyDX/SharpDX_Demo/tree/master/SharpDXTutorial/Tutorial11\" rel=\"nofollow noreferrer\">https://github.com/RobyDX/SharpDX_Demo/tree/master/SharpDXTutorial/Tutorial11</a></p>\n\n<p>If you prefer C/C++ and OpenGL there are many examples too..</p>\n\n<p><a href=\"http://prideout.net/blog/?p=48\" rel=\"nofollow noreferrer\">http://prideout.net/blog/?p=48</a></p>\n\n<p>Some of mine, I sample a texture bitmap for the height. On the right, you see some artifacts caused by my small normal errors in my little triangles.. gotta work on that one :)</p>\n\n<p><a href=\"https://i.stack.imgur.com/8MmPE.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8MmPE.jpg\" alt=\"some of mine\"></a></p>\n\n<p>Above mesh is 32x32 squares and has tesselation depth 7. Here you see the flattened mesh, showing depth 1 tesselation:</p>\n\n<p><a href=\"https://i.stack.imgur.com/DCjAx.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DCjAx.jpg\" alt=\"flattened mesh showing tesselation\"></a></p>\n"}], "owner": {"reputation": 31, "user_id": 7889409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30523d5c705f5c5da7ca3397d02dad98?s=128&d=identicon&r=PG", "display_name": "Kanpachi", "link": "https://stackoverflow.com/users/7889409/kanpachi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 571, "favorite_count": 1, "accepted_answer_id": 43526453, "answer_count": 2, "score": 3, "last_activity_date": 1496436878, "creation_date": 1492602200, "last_edit_date": 1492614529, "question_id": 43494786, "link": "https://stackoverflow.com/questions/43494786/near-uniform-tessellation-of-a-concave-polygon-for-heightmaps", "title": "Near-uniform tessellation of a concave polygon for heightmaps", "body": "<p>I am given the contour/boundary of a concave polygon which cannot have holes, and I need to apply a heightmap to it. To this end, I need to perform a near-uniform tessellation of the polygon like so:</p>\n\n<p><img src=\"https://i.imgur.com/Y3HQZMQ.png\" alt=\"\">. </p>\n\n<p>How can I perform this tessellation? Ideally, the solution could parameterize the 'resolution' of the internal vertices to adjust the detail of the tessellation.</p>\n\n<p>I'm using OpenSceneGraph, so if this is somehow possible using its built-in tessellation library that would be ideal, but I'm open to introducing an additional (hopefully lightweight) dependency if necessary.</p>\n"}, {"tags": ["c", "linux", "sockets", "unix", "select"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1492600838, "post_id": 43494161, "comment_id": 74042812, "body": "I think you need to <a href=\"http://man7.org/linux/man-pages/man2/select.2.html\" rel=\"nofollow noreferrer\">read more about <code>select</code></a>."}, {"owner": {"reputation": 1, "user_id": 7887578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b0e1608a6a4cf2951ae97ffc3b13824?s=128&d=identicon&r=PG&f=1", "display_name": "Narayanababu Raju", "link": "https://stackoverflow.com/users/7887578/narayanababu-raju"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1492671992, "post_id": 43494161, "comment_id": 74078769, "body": "I understand that select() monitors multiple file descriptors (read/write/exception) and waits until at least one file descriptor (in the fd_set) is ready for some I/O operation (read/write).  If the timeout value is ZERO, select() returns immediately. I wonder whether it SHOULD return 0 or 1. If I don&#39;t want to monitor any file-descriptor (mentioning NULL for all 3 types of FD), what is the behavior of select()?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1492672461, "post_id": 43494161, "comment_id": 74079089, "body": "Your use of <code>poll</code> is not equal to your use of <code>select</code>. With your <code>poll</code> call you check if a single descriptor can be written to, you don&#39;t do that check with <code>select</code> (since the &quot;write&quot; <code>fd_set</code> is a null pointer)."}, {"owner": {"reputation": 1, "user_id": 7887578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b0e1608a6a4cf2951ae97ffc3b13824?s=128&d=identicon&r=PG&f=1", "display_name": "Narayanababu Raju", "link": "https://stackoverflow.com/users/7887578/narayanababu-raju"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1492756539, "post_id": 43494161, "comment_id": 74123143, "body": "I tried monitoring my write-file-descriptor using <code>select()</code> with zero timeout. <code>int sock_id = pfd[0].fd; struct timeval timeout; timeout.tv_sec = 0; timeout.tv_usec = 0; select(sock_id+1, (fd_set *)NULL, &amp;pollFd, (fd_set *)NULL, &amp;timeout);</code>  The <code>select</code> call TIMEDOUT immediately and returned 0. Once the socket is connected successfully, monitoring the FD for an activity is NOT possible with ZERO timeout?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1492756810, "post_id": 43494161, "comment_id": 74123314, "body": "And <i>thats</i> why you should read the manual page, and learn about the <code>FD_*</code> macros and the <code>fd_set</code>  type and how it is used. You can&#39;t use the same structures as you use for <code>poll</code>."}], "owner": {"reputation": 1, "user_id": 7887578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b0e1608a6a4cf2951ae97ffc3b13824?s=128&d=identicon&r=PG&f=1", "display_name": "Narayanababu Raju", "link": "https://stackoverflow.com/users/7887578/narayanababu-raju"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 483, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1492600723, "creation_date": 1492600502, "last_edit_date": 1492600723, "question_id": 43494161, "link": "https://stackoverflow.com/questions/43494161/implementing-poll-using-select-system-call", "title": "Implementing poll() using select() system call", "body": "<pre><code>static int send_dg(...)\n{\n    ...\n      const u_char buf;\n      int buflen;\n      struct pollFd pfd[1];\n\n      /* Create NON-Blocking UDP socket */\n      pfd[0].fd = socket(PF_INET, SOCK_DGRAM|SOCK_NONBLOCK, 0);\n\n      /* Connect to the server */\n      connect(pfd[0].fd, serverAddress, serverLength);\n\n      /* Make socket as NON-BLOCKING */\n      int flag = __fcntl(pfd[0].fd, F_GETFL);\n      __fcntl(pfd[0].fd, F_SETFL, flag|O_NONBLOCK);\n\n      pfd[0].events = POLLOUT;\n\n      /* GLIBC: Below poll() system call returns 1 */\n      /* Unlike uClibc, ZERO timeout poll returns \n      immediately even if there is NO event on FD */\n      poll(pfd, 1, 0);\n\n      /* Send the UDP datagram to the server */\n      send(pfd[0].fd, buf, buflen, MSG_NOSIGNAL);\n    ...\n}\n</code></pre>\n\n<p>In the above logic, I should implement my own poll() using select() system call. Can I replace <code>poll(fd, 1, 0);</code> with below piece of code? Will select return 1?</p>\n\n<pre><code>int sock_id = pfd[0].fd;\nstruct timeval timeout;\ntimeout.tv_sec = 0;\ntimeout.tv_usec = 0;\nselect(sock_id+1, (fd_set *)NULL, (fd_set *)NULL, (fd_set *)NULL, &amp;timeout);\n</code></pre>\n"}, {"tags": ["c", "struct"], "comments": [{"owner": {"reputation": 2462, "user_id": 2705907, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/e2UTS.jpg?s=128&g=1", "display_name": "Vagish", "link": "https://stackoverflow.com/users/2705907/vagish"}, "edited": false, "score": 1, "creation_date": 1492600366, "post_id": 43494008, "comment_id": 74042462, "body": "<code>unsigned char vstring</code>  should be  <code>unsigned char *vstring</code> and you need to assign memory first to copy string."}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1492600423, "post_id": 43494008, "comment_id": 74042503, "body": "If it can be only one type at a time, you could use a <a href=\"http://en.cppreference.com/w/c/language/union\" rel=\"nofollow noreferrer\"><code>union</code></a>."}, {"owner": {"reputation": 1, "user_id": 7874787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d3a5b531ca6d98ab255c47be7a8d0a7?s=128&d=identicon&r=PG&f=1", "display_name": "GoWorkCode", "link": "https://stackoverflow.com/users/7874787/goworkcode"}, "edited": false, "score": 0, "creation_date": 1492601054, "post_id": 43494008, "comment_id": 74042953, "body": "changed, but also again have errors."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1492601485, "post_id": 43494008, "comment_id": 74043255, "body": "what is <code>delete()</code>??? And how do you &quot;delete&quot; an int or a float?"}, {"owner": {"reputation": 1, "user_id": 7874787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d3a5b531ca6d98ab255c47be7a8d0a7?s=128&d=identicon&r=PG&f=1", "display_name": "GoWorkCode", "link": "https://stackoverflow.com/users/7874787/goworkcode"}, "edited": false, "score": 0, "creation_date": 1492601641, "post_id": 43494008, "comment_id": 74043372, "body": "delete() mean clear and delete from memory , i think can use <code>memset(&lt;variable_name&gt;, 0, MEMORY_BLOCK);</code> yes?   or <code>#define CLEAR(x) memset(x,&#39;\\0&#39;,1000); CLEAR(&lt;variable_name&gt;);</code>?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1492613947, "post_id": 43494008, "comment_id": 74052967, "body": "this line: <code>void clear(Value vall){</code> will not compile with a message about an &#39;incomplete type&#39;.  The line should be: <code>void clear( struct Value vall ){</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1492614142, "post_id": 43494008, "comment_id": 74053118, "body": "this line: <code>strcpy( v.vstring,&quot;C Programming&#47;may this a very big utf-8 string!&quot;);</code> is undefined behavior and can lead to a seg fault event because the pointer <code>v.vstring</code> has not been set to point to any specific memory so will copy the string to what every place in memory is indicated by the uninitialized trash is on the stack where the struct is located."}, {"owner": {"reputation": 1, "user_id": 7874787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d3a5b531ca6d98ab255c47be7a8d0a7?s=128&d=identicon&r=PG&f=1", "display_name": "GoWorkCode", "link": "https://stackoverflow.com/users/7874787/goworkcode"}, "edited": false, "score": 0, "creation_date": 1492614398, "post_id": 43494008, "comment_id": 74053297, "body": "please check my code : <a href=\"http://ideone.com/dF7c6T\" rel=\"nofollow noreferrer\">ideone.com/dF7c6T</a> , line 39 have problem."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1492614565, "post_id": 43494008, "comment_id": 74053409, "body": "Suggest insert a code block similar to <code>v.vstring = malloc( 100 );  if( !v.vstring ) { perror( &quot;malloc failed&quot;); exit( EXIT_FAILURE ); }</code> before the call to <code>strcpy()</code>  However, since the string is a literal, might just use a pointer, similar to: <code>v.vstring = &quot;C Programming&#47;may this a very big utf-8 string!&quot;;</code> rather than a call to <code>strcpy()</code>"}, {"owner": {"reputation": 1, "user_id": 7874787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d3a5b531ca6d98ab255c47be7a8d0a7?s=128&d=identicon&r=PG&f=1", "display_name": "GoWorkCode", "link": "https://stackoverflow.com/users/7874787/goworkcode"}, "edited": false, "score": 0, "creation_date": 1492614720, "post_id": 43494008, "comment_id": 74053509, "body": "you say strcpy in old code, may check new source file ? <a href=\"http://ideone.com/dF7c6T\" rel=\"nofollow noreferrer\">ideone.com/dF7c6T</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7874787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d3a5b531ca6d98ab255c47be7a8d0a7?s=128&d=identicon&r=PG&f=1", "display_name": "GoWorkCode", "link": "https://stackoverflow.com/users/7874787/goworkcode"}, "edited": false, "score": 0, "creation_date": 1492602420, "post_id": 43494754, "comment_id": 74043923, "body": "tank you, but also have error in gcc. <a href=\"http://paste.ubuntu.com/24413365/\" rel=\"nofollow noreferrer\">paste.ubuntu.com/24413365</a>"}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "reply_to_user": {"reputation": 1, "user_id": 7874787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d3a5b531ca6d98ab255c47be7a8d0a7?s=128&d=identicon&r=PG&f=1", "display_name": "GoWorkCode", "link": "https://stackoverflow.com/users/7874787/goworkcode"}, "edited": false, "score": 0, "creation_date": 1492602596, "post_id": 43494754, "comment_id": 74044041, "body": "<code>#include &lt;stdlib.h&gt;</code> and add the keyword <code>struct</code> before <code>Value</code> (it is a <code>struct Value</code>). I&#39;ll update the solution with the latter."}], "tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": false, "score": 0, "last_activity_date": 1492602662, "last_edit_date": 1492602662, "creation_date": 1492602091, "answer_id": 43494754, "question_id": 43494008, "link": "https://stackoverflow.com/questions/43494008/how-can-store-multidata-value-in-a-struct-and-work-with-them/43494754#43494754", "title": "How can Store MultiData Value in a Struct and work with Them?", "body": "<p>A proper version of your code (but note the comments!) is:</p>\n\n<pre><code>struct Value {\n   int typ;\n   /*\n   type=1  ==&gt; get vstring\n   type=2  ==&gt; get int\n   type=3  ==&gt; get float\n   */\n   union{\n     unsigned char *vstring;\n     int   vint;\n     float  vfloat;\n   } u;\n};\n\nvoid clear(struct Value *vall){\n   if(vall-&gt;typ == 1){\n      {free(vall-&gt;u.vstring); vall-&gt;u.vstring= 0;}\n   }else if(vall-&gt;typ == 2){\n      vall-&gt;u.vint=0;\n   }else{\n      vall-&gt;u.vfloat=0.0;\n   }\n}\nint main()\n{\n   struct Value v;\n   /////////////////////////////////////////////\n   v.typ=1;\n   v.u.vstring= malloc(strlen(\"C Programming/may this a very big utf-8 string!\")+1);\n   strcpy( v.u.vstring,\"C Programming/may this a very big utf-8 string!\");\n   /////////////////////////////////////////////\n   printf( \"ValueType : %d\\n\", v.typ);\n   printf( \"ValueString : %s\\n\", v.u.vstring);\n   printf( \"ValueInt : %d\\n\", v.u.vint);        // &lt;== there is no int in u\n   printf( \"ValueFloat : %f\\n\", v.u.vfloat);    // &lt;== there is no float in u\n   return 0;\n   struct Value copy=v; // &lt;== you cannot do this as you now use the memory of the vstring\n   clear(&amp;copy);    // &lt;== this now releases the memory of vstring in both 'copy' and 'v'\n   copy.typ=2;\n   copy.u.vint=5;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 7874787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d3a5b531ca6d98ab255c47be7a8d0a7?s=128&d=identicon&r=PG&f=1", "display_name": "GoWorkCode", "link": "https://stackoverflow.com/users/7874787/goworkcode"}, "edited": false, "score": 0, "creation_date": 1492602820, "post_id": 43494821, "comment_id": 74044196, "body": "Perfect, Tank you. :like:"}, {"owner": {"reputation": 1, "user_id": 7874787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d3a5b531ca6d98ab255c47be7a8d0a7?s=128&d=identicon&r=PG&f=1", "display_name": "GoWorkCode", "link": "https://stackoverflow.com/users/7874787/goworkcode"}, "edited": false, "score": 0, "creation_date": 1492603245, "post_id": 43494821, "comment_id": 74044468, "body": "tank you @johnny-mopp , also may add a copy of <code>v</code>? <a href=\"http://paste.ubuntu.com/24413409/\" rel=\"nofollow noreferrer\">paste.ubuntu.com/24413409</a> , after clear <code>v</code>, also copy deleted! this bad."}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1492603779, "post_id": 43494821, "comment_id": 74044860, "body": "You have to be careful when copying. If the type is <code>VSTRING</code> you need to make a duplicate of the string. Updated answer with copy function."}, {"owner": {"reputation": 1, "user_id": 7874787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d3a5b531ca6d98ab255c47be7a8d0a7?s=128&d=identicon&r=PG&f=1", "display_name": "GoWorkCode", "link": "https://stackoverflow.com/users/7874787/goworkcode"}, "edited": false, "score": 0, "creation_date": 1492604132, "post_id": 43494821, "comment_id": 74045123, "body": "i make <code>struct Value coppy()</code> in <a href=\"http://paste.ubuntu.com/24413473/\" rel=\"nofollow noreferrer\">paste.ubuntu.com/24413473</a> ,  please check this."}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1492604379, "post_id": 43494821, "comment_id": 74045299, "body": "You are not duplicating the string here: <code>v_r.vstring=v-&gt;vstring;</code> With that you will have 2 different objects pointing to the same string.  So when you <code>clear(&amp;v)</code>, <code>copy</code> will have an invalid pointer."}, {"owner": {"reputation": 1, "user_id": 7874787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d3a5b531ca6d98ab255c47be7a8d0a7?s=128&d=identicon&r=PG&f=1", "display_name": "GoWorkCode", "link": "https://stackoverflow.com/users/7874787/goworkcode"}, "edited": false, "score": 0, "creation_date": 1492604641, "post_id": 43494821, "comment_id": 74045493, "body": "Done, tank you. :like:"}, {"owner": {"reputation": 1, "user_id": 7874787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d3a5b531ca6d98ab255c47be7a8d0a7?s=128&d=identicon&r=PG&f=1", "display_name": "GoWorkCode", "link": "https://stackoverflow.com/users/7874787/goworkcode"}, "edited": false, "score": 0, "creation_date": 1492604676, "post_id": 43494821, "comment_id": 74045521, "body": "Please if you have free time, answer another my question : <a href=\"http://stackoverflow.com/questions/43483396/how-substring-limit-using-c\" title=\"how substring limit using c\">stackoverflow.com/questions/43483396/&hellip;</a> , tank you. good bye."}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "reply_to_user": {"reputation": 1, "user_id": 7874787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d3a5b531ca6d98ab255c47be7a8d0a7?s=128&d=identicon&r=PG&f=1", "display_name": "GoWorkCode", "link": "https://stackoverflow.com/users/7874787/goworkcode"}, "edited": false, "score": 0, "creation_date": 1492610582, "post_id": 43494821, "comment_id": 74050187, "body": "@GoWorkCode that q is closed so no answers can be added. But the posted answer notes, UTF-8 chars can be more than one byte. Maybe using <a href=\"https://en.wikipedia.org/wiki/Wide_character\" rel=\"nofollow noreferrer\"><code>wchar_t</code> strings</a> will help you."}, {"owner": {"reputation": 1, "user_id": 7874787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d3a5b531ca6d98ab255c47be7a8d0a7?s=128&d=identicon&r=PG&f=1", "display_name": "GoWorkCode", "link": "https://stackoverflow.com/users/7874787/goworkcode"}, "edited": false, "score": 0, "creation_date": 1492611774, "post_id": 43494821, "comment_id": 74051191, "body": "tank you, i need <code>strlen()==&gt;wcslen()</code> , <code>strcpy()==&gt;??</code> for <code>w_char</code>. what name of funcs?"}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "reply_to_user": {"reputation": 1, "user_id": 7874787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d3a5b531ca6d98ab255c47be7a8d0a7?s=128&d=identicon&r=PG&f=1", "display_name": "GoWorkCode", "link": "https://stackoverflow.com/users/7874787/goworkcode"}, "edited": false, "score": 0, "creation_date": 1492611854, "post_id": 43494821, "comment_id": 74051257, "body": "@GoWorkCode <a href=\"http://www.java2s.com/Tutorial/C/0300__Wide-Character-String/WideCharacterFunctions.htm\" rel=\"nofollow noreferrer\">java2s.com/Tutorial/C/0300__Wide-Character-String/&hellip;</a>"}, {"owner": {"reputation": 1, "user_id": 7874787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d3a5b531ca6d98ab255c47be7a8d0a7?s=128&d=identicon&r=PG&f=1", "display_name": "GoWorkCode", "link": "https://stackoverflow.com/users/7874787/goworkcode"}, "edited": false, "score": 0, "creation_date": 1492613234, "post_id": 43494821, "comment_id": 74052407, "body": "<code>wchar_t *msg_n = L&quot;C Programming&#47;may this a very big utf-8 string!DONE!\u0633\u0644\u0627\u0645&quot;; wprintf(L&quot;%ls&quot;,msg_n); </code> how fix this code?"}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "reply_to_user": {"reputation": 1, "user_id": 7874787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d3a5b531ca6d98ab255c47be7a8d0a7?s=128&d=identicon&r=PG&f=1", "display_name": "GoWorkCode", "link": "https://stackoverflow.com/users/7874787/goworkcode"}, "edited": false, "score": 0, "creation_date": 1492614800, "post_id": 43494821, "comment_id": 74053574, "body": "First, you have ideone setup for Java. Change the language to C. Next, because <code>wchar_t</code> is bigger, change <code>malloc</code>s to: <code>malloc((wcslen(msg) + 1) * sizeof(wchar_t));</code>  And when you use <code>wprintf</code> put an <code>L</code> in front of format string: <code>wprintf(L&quot;ValueString : %s(%d)\\n&quot;, v-&gt;vstring, v-&gt;size);</code>"}, {"owner": {"reputation": 1, "user_id": 7874787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d3a5b531ca6d98ab255c47be7a8d0a7?s=128&d=identicon&r=PG&f=1", "display_name": "GoWorkCode", "link": "https://stackoverflow.com/users/7874787/goworkcode"}, "edited": false, "score": 0, "creation_date": 1492615253, "post_id": 43494821, "comment_id": 74053890, "body": "<code>printf(&quot;%ls\\n&quot;,v-&gt;vstring);</code> this is work in my source. but <code>wprintf</code> not work."}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "reply_to_user": {"reputation": 1, "user_id": 7874787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d3a5b531ca6d98ab255c47be7a8d0a7?s=128&d=identicon&r=PG&f=1", "display_name": "GoWorkCode", "link": "https://stackoverflow.com/users/7874787/goworkcode"}, "edited": false, "score": 0, "creation_date": 1492615471, "post_id": 43494821, "comment_id": 74054027, "body": "Yes, it&#39;s confusing. Try it on your pc. Also, reading this might help: <a href=\"http://stackoverflow.com/questions/26816547/whats-the-difference-between-printfs-printfls-wprintfs-and-wp\" title=\"whats the difference between printfs printfls wprintfs and wp\">stackoverflow.com/questions/26816547/&hellip;</a>"}], "tags": [], "owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "is_accepted": true, "score": 0, "last_activity_date": 1492603776, "last_edit_date": 1492603776, "creation_date": 1492602296, "answer_id": 43494821, "question_id": 43494008, "link": "https://stackoverflow.com/questions/43494008/how-can-store-multidata-value-in-a-struct-and-work-with-them/43494821#43494821", "title": "How can Store MultiData Value in a Struct and work with Them?", "body": "<p>First, you might consider using a <code>union</code>. It's not required, but will save a few bytes:</p>\n\n<pre><code>struct Value {\n   int typ;\n   /*\n   type=1  ==&gt; get vstring\n   type=2  ==&gt; get int\n   type=3  ==&gt; get float\n   */\n   union {\n    unsigned char *vstring;  // Changed to char pointer!!\n    int   vint;\n    float  vfloat;\n   };\n};\n</code></pre>\n\n<p>Next, when you copy the string, you need to allocate space:</p>\n\n<pre><code>const char *msg = \"C Programming/may this a very big utf-8 string!\";\nstruct Value v;\nv.typ = 1;\nv.vstring = malloc(strlen(msg) + 1);\nstrcpy(v.vstring, msg);\n// strdup() does the same thing\n</code></pre>\n\n<p>And when you clear, you need to <code>free</code> that memory:</p>\n\n<pre><code>void clear(struct Value* vall){\n   if (vall-&gt;typ == 1) {\n      free(vall-&gt;vstring);\n   }\n   memset(vall, 0, sizeof(*vall));\n}\n</code></pre>\n\n<p>Last, you can use an enum for the type, instead of \"magic numbers\":</p>\n\n<pre><code>enum VTYPE {VSTRING, VINT, VFLOAT};\ntypedef enum VTYPE vtype;\n</code></pre>\n\n<p>Also, here's a helper function to print:</p>\n\n<pre><code>void print_value(struct Value *v)\n{\n    static const char *types[] = {\"VSTRING\", \"VINT\", \"VFLOAT\"};\n    printf( \"ValueType : %s\\n\", v-&gt;typ &gt;= 0 &amp;&amp; v-&gt;typ &lt; 3 ? types[v-&gt;typ] : \"ERROR\");\n    if (VSTRING == v-&gt;typ) {\n        printf( \"ValueString : %s\\n\", v-&gt;vstring);\n    }\n    else if (VINT == v-&gt;typ) {\n        printf( \"ValueInt : %d\\n\", v-&gt;vint);\n    }\n    else if (VFLOAT == v-&gt;typ) {\n        printf( \"ValueFloat : %f\\n\", v-&gt;vfloat);\n    }\n}\n</code></pre>\n\n<p>Here's a link to the whole thing put together: <a href=\"http://ideone.com/ecy3qa\" rel=\"nofollow noreferrer\">http://ideone.com/ecy3qa</a></p>\n\n<p>When you copy, be sure to duplicate the string:</p>\n\n<pre><code>void copy_value(struct Value *source, struct Value *dest) {\n    if (VSTRING == source-&gt;typ) {\n        dest-&gt;vstring = malloc(strlen(source-&gt;vstring) + 1);\n        strcpy(dest-&gt;vstring, source-&gt;vstring);\n    }\n    else if (VINT == source-&gt;typ) {\n        dest-&gt;vint = source-&gt;vint;\n    }\n    else if (VFLOAT == source-&gt;typ) {\n        dest-&gt;vfloat = source-&gt;vfloat;\n    }\n    dest-&gt;typ = source-&gt;typ;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7874787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d3a5b531ca6d98ab255c47be7a8d0a7?s=128&d=identicon&r=PG&f=1", "display_name": "GoWorkCode", "link": "https://stackoverflow.com/users/7874787/goworkcode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 43494821, "answer_count": 2, "score": 0, "last_activity_date": 1492603776, "creation_date": 1492600045, "last_edit_date": 1492601030, "question_id": 43494008, "link": "https://stackoverflow.com/questions/43494008/how-can-store-multidata-value-in-a-struct-and-work-with-them", "title": "How can Store MultiData Value in a Struct and work with Them?", "body": "<p>my current code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n/*\n    struct Value {\n       int typ;\n       unsigned char vstring;\n       int   vint;\n       float  vfloat;\n    };\n*/\nstruct Value {\n   int typ;\n   /*\n   type=1  ==&gt; get vstring\n   type=2  ==&gt; get int\n   type=3  ==&gt; get float\n   */\n   union{\n      struct{\n         unsigned char *vstring;\n      };\n      struct{\n         int   vint;\n      };\n      struct{\n         float  vfloat;\n      };\n   }\n};\n\nvoid clear(Value vall){\n   if(vall.typ == 1){\n      delete(vall.vstring);\n   }else if(vall.typ == 2){\n      delete(vall.vint);\n   }else{\n      delete(vall.vfloat);\n   }\n}\nint main()\n{\n   struct Value v;\n   /////////////////////////////////////////////\n   v.typ=1;\n   strcpy( v.vstring,\"C Programming/may this a very big utf-8 string!\");\n   /*\n   strcpy( v.vint,4); \n   strcpy( v.vfloat,4.5);\n   */\n   /////////////////////////////////////////////\n   printf( \"ValueType : %d\\n\", v.typ);\n   printf( \"ValueString : %s\\n\", v.vstring);\n   printf( \"ValueInt : %d\\n\", v.vint);\n   printf( \"ValueFloat : %f\\n\", v.vfloat);\n   return 0;\n   Value copy=v;\n   clear(copy);\n   copy.typ=2;\n   copy.vint=5;\n}\n</code></pre>\n\n<p>but this have bug , and i not know how can fix this.</p>\n\n<p>this have a <code>Value</code> struct. in this have (vstring,vint,vfloat) , and type of value store in <code>typ</code> for fast speed.</p>\n\n<p><em>please help me to fix this code.</em></p>\n\n<p>i will want store this struct in array/map/hashmap....\ntank you.</p>\n"}, {"tags": ["c", "linked-list"], "comments": [{"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1492599820, "post_id": 43493684, "comment_id": 74042065, "body": "Please format your code properly. It is hardly readable and doesn&#39;t invite help."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 1, "creation_date": 1492600210, "post_id": 43493684, "comment_id": 74042332, "body": "You need to initialize <code>head1</code> and <code>head2</code> to <code>NULL</code>."}, {"owner": {"reputation": 444, "user_id": 7198727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab1ce7b0af8c099350746969caee0860?s=128&d=identicon&r=PG&f=1", "display_name": "ziselos", "link": "https://stackoverflow.com/users/7198727/ziselos"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1492600833, "post_id": 43493684, "comment_id": 74042807, "body": "Thanks @IanAbbott, now works as i want. I knew that something simple i was missing. Thanks again!"}], "owner": {"reputation": 444, "user_id": 7198727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab1ce7b0af8c099350746969caee0860?s=128&d=identicon&r=PG&f=1", "display_name": "ziselos", "link": "https://stackoverflow.com/users/7198727/ziselos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1492612709, "creation_date": 1492599246, "last_edit_date": 1492600463, "question_id": 43493684, "link": "https://stackoverflow.com/questions/43493684/new-linked-list-contains-the-previous-one", "title": "New Linked list contains the previous one", "body": "<p>I have linked lists that represents integers (each node is a digit from the integer). After making a second or a third linked list when i try to print them, in the second one prints the 2nd and the 1st, in the 3nd, prints 3nd,2nd and 1st together etc. What am i missing? Any help is welcome....\nThe struct of each node that i use is:</p>\n\n<pre><code>typedef struct node {\nint digit;\nstruct node *next;\n} listnode_t;\n</code></pre>\n\n<p>For example this is my main</p>\n\n<p>main</p>\n\n<pre><code>listnode_t *number1 = create_list(2);//create list of two digits\nlistnode_t *number2 = create_list(2);//create list of two digits\nlistnode_t *number3 = int_to_list(1024);//create list for integer 1024\nprint_number(number1);\nprintf(\"\\n\");\nprint_number(number2);\nprintf(\"\\n\");\nprint_number(number3);\n</code></pre>\n\n<p>and my output is </p>\n\n<pre><code>Give a digit: 1\nGive a digit: 7\nGive a digit: 9\nGive a digit: 5\n17\nEnd of printing number\n9517\nEnd of printing number\n10249517\nEnd of printing nunmber\n</code></pre>\n\n<p>The three methods i use are:\nprint_number(listnode_t *head) \nTakes a pointer on head of a list and print the elements</p>\n\n<pre><code>void print_number(listnode_t *head){\n\nlistnode_t *anode = head;\n\nif (anode == NULL){\n\n    printf(\"The list is empty\\n\");\n}\n\nelse {\n\n\n        while(anode != NULL){\n        printf(\"%d\",anode-&gt;digit);\n        anode = anode-&gt;next;\n\n            }\n        printf(\"\\n\");\n        printf(\"End of printing the number\\n\");\n\n    }\n}\n</code></pre>\n\n<p>the listnode_t *create_list(int numdigits)</p>\n\n<pre><code>listnode_t *create_list(int numdigits){\n\n\nlistnode_t *ptr2;\nlistnode_t *head2;\n\nint i;\nint num[numdigits];\nfor(i=0;i&lt;numdigits;i++){\n    do{\n    printf(\"Give a digit: \");\n    scanf(\"%d\",&amp;num[i]);\n    } while (num[i]&gt;9 || num[i]&lt;0);\n}\n\n    for(i=numdigits-1;i&gt;=0;i--){\n    ptr2 = (listnode_t*)malloc(sizeof(listnode_t));\n    if (ptr2 == NULL){\n\n    printf(\"\\n Node creation failed \\n\");\n    return NULL;\n}\n\n\nptr2-&gt;digit = num[i];\nptr2-&gt;next = NULL;\n\nptr2-&gt;next = head2;\nhead2 = ptr2;\n\n}\n\nreturn ptr2;    \n\n}\n</code></pre>\n\n<p>and the listnode_t *int_to_list(int num)\nthat takes an integer and represent it as a linked list from LSB to MSB</p>\n\n<pre><code>listnode_t *int_to_list(int num) {\n\nlistnode_t *ptr1;\nlistnode_t *head1;\n\n\nint numOfdigits = countdigits(num);//counts the number of digits of integer \n                                   //num\nint k = numOfdigits;\nint digits[numOfdigits];\nwhile (numOfdigits--) {\ndigits[numOfdigits]=num%10;\nnum/=10;\n\n}\n\n\nint i;\nfor(i=k-1;i&gt;=0;i--){\n    ptr1 = (listnode_t*)malloc(sizeof(listnode_t));\n        if (ptr1 == NULL){\n\n            printf(\"\\n Node creation failed \\n\");\n            return NULL;\n}\n\nptr1-&gt;digit = digits[i];\nptr1-&gt;next = NULL;\nptr1-&gt;next = head1;\nhead1 = ptr1;\n\n\n}\n\n    return ptr1;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "video", "framebuffer", "yuv"], "comments": [{"owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 2, "creation_date": 1492599134, "post_id": 43493546, "comment_id": 74041559, "body": "Search for the definition of YUV420P format and you should understand why the storage is as it is."}, {"owner": {"reputation": 1, "user_id": 7415616, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ba5c691b8b15dab464b5908d87c8da9?s=128&d=identicon&r=PG&f=1", "display_name": "MBT", "link": "https://stackoverflow.com/users/7415616/mbt"}, "reply_to_user": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 0, "creation_date": 1492599553, "post_id": 43493546, "comment_id": 74041870, "body": "Yup, I searched for it and found bit different computation. Which is what I am confused about. One example I have provided the link that mentions YUV."}], "answers": [{"tags": [], "owner": {"reputation": 32078, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "is_accepted": false, "score": 0, "last_activity_date": 1492600369, "creation_date": 1492600369, "answer_id": 43494116, "question_id": 43493546, "link": "https://stackoverflow.com/questions/43493546/yuv-frame-layer-computation-conceptual-understanding-needed/43494116#43494116", "title": "YUV frame layer computation - Conceptual Understanding Needed", "body": "<p>In this case you seem to deal with planar YCbCr. Planar means that each colour component is stored in the separate array (aka plane). This is opposite of packed format where colour components are all stored in one array (Y Y Y Y Cb Cr or similar patters). \nSo <code>inBuffer.p1</code> will contain a pointer to array containing <code>width x height</code> of Y values. <code>inBuffer.p2</code> and <code>inBuffer.p3</code> will contain a pointer to array containing <code>width x height / 4</code> Cb and Cr values respectively. <code>/ 4</code> is because one Cb and Cr value is used per 4 Y values.</p>\n"}], "owner": {"reputation": 1, "user_id": 7415616, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ba5c691b8b15dab464b5908d87c8da9?s=128&d=identicon&r=PG&f=1", "display_name": "MBT", "link": "https://stackoverflow.com/users/7415616/mbt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 114, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1492600369, "creation_date": 1492598900, "last_edit_date": 1495540932, "question_id": 43493546, "link": "https://stackoverflow.com/questions/43493546/yuv-frame-layer-computation-conceptual-understanding-needed", "title": "YUV frame layer computation - Conceptual Understanding Needed", "body": "<p>I am using an independent hardware development board to perform computer vision operations. This was one example, in order to store and YUV frame in to the DDR memory. But I was bit confused with YUV frame buffer code which is declared as below :</p>\n\n<pre><code>extern U8 inputFrame\nvoid InitTestBuffers(int width, int height)\n{\n    testFrameSpec.width = width;\n    testFrameSpec.height = height;\n    testFrameSpec.stride = width;\n    testFrameSpec.type = YUV420p;\n    testFrameSpec.bytesPP = 1;\n\n    inBuffer.spec = testFrameSpec;\n   //******************NEED TO KNOW THE BELOW PART***************\n    inBuffer.p1 = (u8*)(&amp;inputFrame);\n    inBuffer.p2 = (u8*)((u32)(&amp;inputFrame) + width * height);\n    inBuffer.p3 = (u8*)((u32)(&amp;inputFrame) + width * height + width * height / 4);\n    //p1,p2,p3 are pointers to 1,2 and 3 image plane\n   //*************************************************************\n    return;\n}\n</code></pre>\n\n<p>And even in some places it states the below for a buffer frame</p>\n\n<pre><code>static u8 FRAMES outputFrame[FRAME_WIDTH * FRAME_HEIGHT * 3 / 2];\n</code></pre>\n\n<p>Below is one example where they use these concepts but in different way :</p>\n\n<p><a href=\"https://stackoverflow.com/questions/19677747/how-to-find-out-resolution-and-count-of-frames-in-yuv-420-file\">YUV</a></p>\n\n<p>My question is not about the code understanding but I did not understand why is this computation needed(conceptually).</p>\n"}, {"tags": ["c", "windows", "timer", "watchdog"], "comments": [{"owner": {"reputation": 158803, "user_id": 246342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8ba0aea3f521082f18dd7c186e7d4c3?s=128&d=identicon&r=PG", "display_name": "Alex K.", "link": "https://stackoverflow.com/users/246342/alex-k"}, "edited": false, "score": 1, "creation_date": 1492599237, "post_id": 43493530, "comment_id": 74041643, "body": "Update the timer periodicity via ChangeTimerQueueTimer rather than deleting &amp; recreating?"}, {"owner": {"reputation": 3792, "user_id": 1488067, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/8JllV.jpg?s=128&g=1", "display_name": "Lou", "link": "https://stackoverflow.com/users/1488067/lou"}, "reply_to_user": {"reputation": 158803, "user_id": 246342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8ba0aea3f521082f18dd7c186e7d4c3?s=128&d=identicon&r=PG", "display_name": "Alex K.", "link": "https://stackoverflow.com/users/246342/alex-k"}, "edited": false, "score": 0, "creation_date": 1492599336, "post_id": 43493530, "comment_id": 74041725, "body": "@AlexK.: Crap I can&#39;t believe I didn&#39;t see that one. Perhaps i misread &quot;Change&quot; as &quot;Create&quot;. Please post this as the answer."}, {"owner": {"reputation": 158803, "user_id": 246342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8ba0aea3f521082f18dd7c186e7d4c3?s=128&d=identicon&r=PG", "display_name": "Alex K.", "link": "https://stackoverflow.com/users/246342/alex-k"}, "edited": false, "score": 0, "creation_date": 1492599773, "post_id": 43493530, "comment_id": 74042033, "body": "I didn&#39;t realise it was a one shot, you can&#39;t update an expired non-periodic q timer."}, {"owner": {"reputation": 3792, "user_id": 1488067, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/8JllV.jpg?s=128&g=1", "display_name": "Lou", "link": "https://stackoverflow.com/users/1488067/lou"}, "reply_to_user": {"reputation": 158803, "user_id": 246342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8ba0aea3f521082f18dd7c186e7d4c3?s=128&d=identicon&r=PG", "display_name": "Alex K.", "link": "https://stackoverflow.com/users/246342/alex-k"}, "edited": false, "score": 0, "creation_date": 1492600477, "post_id": 43493530, "comment_id": 74042552, "body": "I don&#39;t need to update it after it has expired, I need to reset it periodically from my code, to <i>prevent</i> it from firing."}], "owner": {"reputation": 3792, "user_id": 1488067, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/8JllV.jpg?s=128&g=1", "display_name": "Lou", "link": "https://stackoverflow.com/users/1488067/lou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 453, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1492598857, "creation_date": 1492598857, "question_id": 43493530, "link": "https://stackoverflow.com/questions/43493530/software-watchdog-timer-in-windows", "title": "Software watchdog timer in Windows", "body": "<p>I'd like to create a simple watchdog timer in Windows, which will invoke a callback if certain time elapses since the last timer reset.</p>\n\n<p>I thought of using a <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms687003(v=vs.85).aspx\" rel=\"nofollow noreferrer\">timer queue timer</a>, but it seems that I need to call <code>DeleteTimerQueueTimer</code> each time I want to \"postpone\" the timer:</p>\n\n<pre><code>// This is called whenever data is received from a device.\n// If not called within a certain period, timerCallbackFn will\n// be invoked on a separate thread.\nvoid resetWatchdog(void)\n{\n    if (_timer-&gt;handle != NULL)\n    {\n        // cancel previous timer\n        DeleteTimerQueueTimer(NULL, (HANDLE)_timer-&gt;handle, NULL);\n        _timer-&gt;handle = NULL;\n    }\n\n    // create new \"one shot\" timer\n    CreateTimerQueueTimer(&amp;_timer-&gt;handle,\n        NULL,\n        timerCallbackFn,\n        _timer,\n        _timer-&gt;intervalMs,   // fire once, after the specified interval\n        0,                    // not periodic\n        0);\n}\n</code></pre>\n\n<p>Is this the correct approach? Do I need to use delete/create each time? Or is this the wrong timer for the job altogether?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1492598453, "post_id": 43493140, "comment_id": 74041056, "body": "You need the proper <code>#include</code>s."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 2, "creation_date": 1492598734, "post_id": 43493140, "comment_id": 74041243, "body": "&quot;<i>I am getting the error at <code>fp=fopen(&quot;task.txt&quot;,&quot;r&quot;)</code></i>&quot; -- Your code has no such line."}, {"owner": {"reputation": 158, "user_id": 7850338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ebc675bf6a75a15a73dbcc367625bd5?s=128&d=identicon&r=PG&f=1", "display_name": "Galeeb Basha", "link": "https://stackoverflow.com/users/7850338/galeeb-basha"}, "edited": false, "score": 0, "creation_date": 1492667051, "post_id": 43493140, "comment_id": 74076077, "body": "fp=(&quot;task.txt&quot;,&quot;iiiiia&quot;); mistakenly printed."}], "answers": [{"tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 1, "last_activity_date": 1492598859, "last_edit_date": 1492598859, "creation_date": 1492598534, "answer_id": 43493408, "question_id": 43493140, "link": "https://stackoverflow.com/questions/43493140/getting-warningassignment-from-incompatible-pointer-type/43493408#43493408", "title": "Getting &quot;warning:assignment from incompatible pointer type&quot;", "body": "<p>This:</p>\n\n<pre><code>fp=(\"task.txt\",\"iiiiia\");\n</code></pre>\n\n<p>does not contain a call to <code>fopen()</code>. This assigns a string literal (<code>\"iiiiia\"</code>, the left one is ignored due to the comma operator separating them) to a <code>FILE *</code> which is clearly not sensical.</p>\n\n<p>You should change it to:</p>\n\n<pre><code>fp = fopen(\"task.txt\", \"rt\");\n</code></pre>\n\n<p>to make sense. The second argument to <code>fopen()</code> does not define a use for the letter <code>i</code> as far as I know and <code>\"rt\"</code> is more in line with the rest of your text.</p>\n"}, {"tags": [], "owner": {"reputation": 48, "user_id": 7889700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20f0fe41c1976b6f6c90c9250e22edd8?s=128&d=identicon&r=PG&f=1", "display_name": "praneeth", "link": "https://stackoverflow.com/users/7889700/praneeth"}, "is_accepted": true, "score": 1, "last_activity_date": 1492686289, "last_edit_date": 1492686289, "creation_date": 1492684214, "answer_id": 43516988, "question_id": 43493140, "link": "https://stackoverflow.com/questions/43493140/getting-warningassignment-from-incompatible-pointer-type/43516988#43516988", "title": "Getting &quot;warning:assignment from incompatible pointer type&quot;", "body": "<p>Your code has no such line. Check your code again.</p>\n\n<p>You wrote without fopen</p>\n\n<pre><code>fp=(\"task.txt\",\"r\");\n</code></pre>\n\n<p>write this </p>\n\n<pre><code>fp=fopen(\"task.txt\",\"r\");\n</code></pre>\n\n<p>you will get it</p>\n"}], "owner": {"reputation": 158, "user_id": 7850338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ebc675bf6a75a15a73dbcc367625bd5?s=128&d=identicon&r=PG&f=1", "display_name": "Galeeb Basha", "link": "https://stackoverflow.com/users/7850338/galeeb-basha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 231, "favorite_count": 1, "accepted_answer_id": 43516988, "answer_count": 2, "score": -3, "last_activity_date": 1492686289, "creation_date": 1492597875, "last_edit_date": 1492667078, "question_id": 43493140, "link": "https://stackoverflow.com/questions/43493140/getting-warningassignment-from-incompatible-pointer-type", "title": "Getting &quot;warning:assignment from incompatible pointer type&quot;", "body": "<p>I am getting the error at <code>fp=fopen(\"task.txt\",\"r\")</code> please could anybody help me out?<br>\nI am trying to open file with <code>fp(File pointer)</code></p>\n\n<pre><code>main()\n{\n    int l=0,pr[100];\n    FILE *fp;\n    fp=(\"task.txt\",\"r\");\n    if(fp==NULL)\n    printf(\"No file found\");\n    char arr[100][20];\n    const char *str;int i;\n    while(fscanf(fp,\"%s\",str)!=EOF)\n    {\n        strcpy(arr[l],str);\n        l++;\n    }\n    for(i=0;i&lt;l;i++)\n    {\n        system(arr[i]);\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "c", "java-native-interface", "android-mediacodec", "yuv"], "answers": [{"tags": [], "owner": {"reputation": 11902, "user_id": 3115956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8eb57ac8f519e5655e4f436e5dd276fb?s=128&d=identicon&r=PG&f=1", "display_name": "mstorsjo", "link": "https://stackoverflow.com/users/3115956/mstorsjo"}, "is_accepted": false, "score": 1, "last_activity_date": 1492602315, "creation_date": 1492602315, "answer_id": 43494832, "question_id": 43493035, "link": "https://stackoverflow.com/questions/43493035/android-mediacodec-interpreting-yuv420sp-buffer-via-jni/43494832#43494832", "title": "Android MediaCodec - Interpreting YUV420SP buffer via JNI", "body": "<p>The general description of what you're trying to do sounds correct.</p>\n\n<p>I wouldn't worry so much about the size of the buffer; this might be some overallocated buffer.</p>\n\n<p>What android device is this, have you tried another one? Any Android device on 4.3 or newer should behave correctly with respect to this (older ones are notoriously broken with color format values basically being plain wrong, or requiring quirks in interpreting the YUV data), since there's a CTS test that enforces correct behaviour. This test is also linked from <a href=\"http://bigflake.com/mediacodec/\" rel=\"nofollow noreferrer\">http://bigflake.com/mediacodec/</a>; <a href=\"https://android.googlesource.com/platform/cts/+/jb-mr2-release/tests/tests/media/src/android/media/cts/EncodeDecodeTest.java\" rel=\"nofollow noreferrer\">EncodeDecodeTest.java</a> is the relevant one.</p>\n\n<p>If you get that code hooked up so you can run it standalone, you can see whether the test succeeds on your device and use that as reference to find out what's wrong in your code, or conclude that the device isn't to be trusted (and you can either ignore it and require 4.3 as minimum, or add a device specific workaround for it).</p>\n"}], "owner": {"reputation": 472, "user_id": 1336336, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/87630e8a479df607835310e9aed3dbec?s=128&d=identicon&r=PG", "display_name": "Force Gaia", "link": "https://stackoverflow.com/users/1336336/force-gaia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 320, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1492606162, "creation_date": 1492597628, "last_edit_date": 1492606162, "question_id": 43493035, "link": "https://stackoverflow.com/questions/43493035/android-mediacodec-interpreting-yuv420sp-buffer-via-jni", "title": "Android MediaCodec - Interpreting YUV420SP buffer via JNI", "body": "<p>I am decoding an MP4 h.264 video using Android's <code>MediaCodec</code> class, extracting each <code>ByteBuffer</code> and attempting to convert to RGB so we can use it elsewhere.</p>\n\n<p>After recieving a valid buffer index from <code>dequeueOutputBuffer()</code> and grabbing that <code>ByteBuffer</code>, we're using <code>GetDirectBufferAddress()</code> from the JNI to grab that buffer in the C code so we can do the conversion on that side. But for some reason the buffers were looking at don't seem to make sense when we look at the size values and byte layout we're getting back.</p>\n\n<p>The MediaFormat I'm being given is apparently <code>COLOR_FormatYUV420SemiPlanar</code> according to the last time <code>dequeueOutputBuffer()</code> returned <code>MediaCodec.INFO_OUTPUT_FORMAT_CHANGED</code> - the full MediaFormat string follows.</p>\n\n<pre><code>VideoDecoder: decoder output format changed: {image-data=java.nio.ByteArrayBuffer[position=0,limit=80,capacity=80], mime=video/raw, crop-top=0, crop-right=1279, slice-height=720, color-format=21, height=720, width=1280, what=1869968451, crop-bottom=719, crop-left=0, stride=1280}\n</code></pre>\n\n<p>The video's dimensions are 1280*720, and in YUV420SP we'd be expecting 12 bits-per-pixel - from which we calculate an expected buffer size as being 1382400 bytes. However when we retrieve the buffer from <code>GetDirectBufferAddress()</code> the size as returned from <code>GetDirectBufferCapacity()</code> is 1433600.</p>\n\n<p>The other thing that looks odd is the byte placement within that buffer. When we're (supposedly) looking at a frame of a single colour, we see three distinct blocks of Y, U and V values - rather than the distinct block of Y, then a block of alternating values for U and V. From what MediaFormat is telling us, this doesn't make sense.</p>\n\n<p>Can anyone tell us where our maths is going wrong? or is it the way we're retrieving the values? Or is there something about the buffer or colour format we're overlooking?</p>\n\n<p>EDIT: We are targetting API Level 19. The Device used when debugging our code is an Google Nexus 7 by Asus, running Android 6.0.1.</p>\n"}, {"tags": ["c", "bit", "extend", "signed"], "comments": [{"owner": {"reputation": 19034, "user_id": 780717, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eead3a6ab011b880ca6ec354ca00f0b3?s=128&d=identicon&r=PG", "display_name": "njuffa", "link": "https://stackoverflow.com/users/780717/njuffa"}, "edited": false, "score": 0, "creation_date": 1492597162, "post_id": 43492779, "comment_id": 74040193, "body": "Does <code>size</code> specify the size of the source data in bytes or in bits? There have been multiple sign-extensions questions here before, this question may be a duplicate."}, {"owner": {"reputation": 1, "user_id": 7852031, "user_type": "registered", "profile_image": "https://graph.facebook.com/1094442943930702/picture?type=large", "display_name": "Ivan Rosa", "link": "https://stackoverflow.com/users/7852031/ivan-rosa"}, "reply_to_user": {"reputation": 19034, "user_id": 780717, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eead3a6ab011b880ca6ec354ca00f0b3?s=128&d=identicon&r=PG", "display_name": "njuffa", "link": "https://stackoverflow.com/users/780717/njuffa"}, "edited": false, "score": 0, "creation_date": 1492599820, "post_id": 43492779, "comment_id": 74042069, "body": "@njuffa size specifies the number of bits in value for example I receive 1011 so size = 4, and I want to select the bit that is in left side, in this case 1. And extend it (int size = 32-size (4 in this case) ) times to the left So it goes like 11111....111111011"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1492601273, "post_id": 43492779, "comment_id": 74043123, "body": "Does the binary string 1011 of length 4 represent the decimal number -5 (2&#39;s complement representation), -4 (1&#39;s complement representation), or -3 (sign and magnitude representation)?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7852031, "user_type": "registered", "profile_image": "https://graph.facebook.com/1094442943930702/picture?type=large", "display_name": "Ivan Rosa", "link": "https://stackoverflow.com/users/7852031/ivan-rosa"}, "edited": false, "score": 0, "creation_date": 1492598799, "post_id": 43492931, "comment_id": 74041297, "body": "Thank you for your help, I will try it out ^^"}, {"owner": {"reputation": 1, "user_id": 7852031, "user_type": "registered", "profile_image": "https://graph.facebook.com/1094442943930702/picture?type=large", "display_name": "Ivan Rosa", "link": "https://stackoverflow.com/users/7852031/ivan-rosa"}, "edited": false, "score": 0, "creation_date": 1493390471, "post_id": 43492931, "comment_id": 74411762, "body": "It has to be signed if the most significant bit is 1 the number should be extended with 1&#39;s. If it is 0 the number should be extended with 0&#39;s. It is signed and the difference of extension is there"}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 0, "last_activity_date": 1492597339, "creation_date": 1492597339, "answer_id": 43492931, "question_id": 43492779, "link": "https://stackoverflow.com/questions/43492779/how-do-i-expand-a-binary-signed-number-in-char-size-to-signed-int-size/43492931#43492931", "title": "How do i expand a binary signed number in char size to signed int size", "body": "<p>Something like this should work. These numbers are called sign-magnitude, by the way:</p>\n\n<pre><code>int signextend(unsigned int value, unsigned int size)\n{\n  const unsigned int topmask = 1u &lt;&lt; (size - 1);\n  if((value &amp; topmask) != 0)\n  {\n    return -(value &amp; ~topmask);\n  }\n  return (int) value;\n}\n</code></pre>\n\n<p>This makes the arguments <code>unsigned</code> since having them signed makes no sense to me.</p>\n\n<p>If called like so: <code>signextend(0xc, 4);</code> it will return -4 (<code>0xc</code> is <code>1100</code> in binary).</p>\n\n<p>Note that this format can express <code>-0</code> (consider e.g. <code>signextend(0x80, 8);</code>) which of course is not representable as an <code>int</code> and will be mapped to 0.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 7852031, "user_type": "registered", "profile_image": "https://graph.facebook.com/1094442943930702/picture?type=large", "display_name": "Ivan Rosa", "link": "https://stackoverflow.com/users/7852031/ivan-rosa"}, "edited": false, "score": 1, "creation_date": 1492598768, "post_id": 43493018, "comment_id": 74041274, "body": "Thank you very much. That&#39;s the stuff i needed"}], "tags": [], "owner": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "is_accepted": false, "score": 0, "last_activity_date": 1492597567, "creation_date": 1492597567, "answer_id": 43493018, "question_id": 43492779, "link": "https://stackoverflow.com/questions/43492779/how-do-i-expand-a-binary-signed-number-in-char-size-to-signed-int-size/43493018#43493018", "title": "How do i expand a binary signed number in char size to signed int size", "body": "<blockquote>\n  <p>size of this binary value</p>\n</blockquote>\n\n<p>if by this you mean that this is the length of the binary string (for example the int 10 represented by <code>1010</code>, would give size = 4) then just do this</p>\n\n<pre><code>int b = 8;\nint size = 4;\nprintf(\"this is the most significant bit %d\", b &gt;&gt; size-1);\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7852031, "user_type": "registered", "profile_image": "https://graph.facebook.com/1094442943930702/picture?type=large", "display_name": "Ivan Rosa", "link": "https://stackoverflow.com/users/7852031/ivan-rosa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 203, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1492611064, "creation_date": 1492596959, "last_edit_date": 1492611064, "question_id": 43492779, "link": "https://stackoverflow.com/questions/43492779/how-do-i-expand-a-binary-signed-number-in-char-size-to-signed-int-size", "title": "How do i expand a binary signed number in char size to signed int size", "body": "<p>This function: <code>int signextend( int value, int size )</code>\nReceives a value in signed binary (most significant bit says the signal <code>+</code> if it is 0 or <code>-</code> if it is 1) and it receives the size of this binary value.\nThe goal is to extend the value to a int size signed too. How do I do this?</p>\n\n<p>I know I need 2 if's one if the most significant bit is 1 or 0 to extend it with 1's or 0's but I don't know how to select the most significant bit from the value</p>\n"}, {"tags": ["c", "ssl", "chromecast"], "comments": [{"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 1, "creation_date": 1492596743, "post_id": 43492500, "comment_id": 74039914, "body": "Don&#39;t link code, questions should be self-contained. Also read about <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "edited": false, "score": 0, "creation_date": 1492605413, "post_id": 43492500, "comment_id": 74046120, "body": "Are you sure that <code>offset += pack_I( buffer , 0 , offset );</code> is correct? Try to write the query before sending it."}, {"owner": {"reputation": 1, "user_id": 7831625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea6e5cbeba8db3542d972a4696c7bcf?s=128&d=identicon&r=PG&f=1", "display_name": "AntonyCoc", "link": "https://stackoverflow.com/users/7831625/antonycoc"}, "edited": false, "score": 0, "creation_date": 1492613887, "post_id": 43492500, "comment_id": 74052930, "body": "Yes, i think... I need put 3 part (len buffer / len buffer and buffer)"}, {"owner": {"reputation": 12076, "user_id": 5832311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t6jqn.jpg?s=128&g=1", "display_name": "abielita", "link": "https://stackoverflow.com/users/5832311/abielita"}, "edited": false, "score": 0, "creation_date": 1492704977, "post_id": 43492500, "comment_id": 74102952, "body": "Can you provide the error logs?"}], "owner": {"reputation": 1, "user_id": 7831625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea6e5cbeba8db3542d972a4696c7bcf?s=128&d=identicon&r=PG&f=1", "display_name": "AntonyCoc", "link": "https://stackoverflow.com/users/7831625/antonycoc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1492596569, "creation_date": 1492596212, "last_edit_date": 1492596569, "question_id": 43492500, "link": "https://stackoverflow.com/questions/43492500/connection-ssl-chromecast", "title": "Connection SSL - Chromecast", "body": "<p>I make a simple app for send request to chromecast.\nBut, my app doens't recv any data.</p>\n\n<p>Here my program :</p>\n\n<p><a href=\"https://code.empreintesduweb.com/11582.html\" rel=\"nofollow noreferrer\">main.c</a></p>\n\n<p><a href=\"https://code.empreintesduweb.com/11583.html\" rel=\"nofollow noreferrer\">ssl.c</a></p>\n"}, {"tags": ["c", "matlab", "mex"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1492596141, "post_id": 43492379, "comment_id": 74039493, "body": "Check the value of <code>timestamp_low</code> before you convert it to <code>double</code> - it looks like you have some UB in the expression where you convert <code>inBytes</code> to an <code>unsigned int</code>."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7888725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8589b49e500a19a3e9a8c16a67d8531?s=128&d=identicon&r=PG&f=1", "display_name": "marcusagren", "link": "https://stackoverflow.com/users/7888725/marcusagren"}, "edited": false, "score": 0, "creation_date": 1492599893, "post_id": 43492518, "comment_id": 74042129, "body": "Turns out if i updated xcode and recompiled the file, it worked. Still don&#39;t know why, but it works. Thanks for the quick answer though @Paul R !"}], "tags": [], "owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "is_accepted": false, "score": 1, "last_activity_date": 1492596261, "creation_date": 1492596261, "answer_id": 43492518, "question_id": 43492379, "link": "https://stackoverflow.com/questions/43492379/mex-c-matlab-converting-to-int-double-different-on-mac-linux-and-windows/43492518#43492518", "title": "MEX (C -&gt; Matlab) converting to int -&gt; double different on mac/linux and windows", "body": "<p>I suspect you have some Undefined Behaviour here:</p>\n\n<pre><code>unsigned int timestamp_low = inBytes[0] + (inBytes[1] &lt;&lt; 8) +\n                            (inBytes[2] &lt;&lt; 16) + (inBytes[3] &lt;&lt; 24);\n</code></pre>\n\n<p>(although it's not clear as you haven't told us the type of <code>inBytes</code>).</p>\n\n<p>Try:</p>\n\n<pre><code>unsigned int timestamp_low = (unsigned int)inBytes[0] + ((unsigned int)inBytes[1] &lt;&lt; 8) + \n                            ((unsigned int)inBytes[2] &lt;&lt; 16) + ((unsigned int)inBytes[3] &lt;&lt; 24);\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7888725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8589b49e500a19a3e9a8c16a67d8531?s=128&d=identicon&r=PG&f=1", "display_name": "marcusagren", "link": "https://stackoverflow.com/users/7888725/marcusagren"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1492596261, "creation_date": 1492595931, "question_id": 43492379, "link": "https://stackoverflow.com/questions/43492379/mex-c-matlab-converting-to-int-double-different-on-mac-linux-and-windows", "title": "MEX (C -&gt; Matlab) converting to int -&gt; double different on mac/linux and windows", "body": "<p>I have a Matlab script that calls a C code which reads my dat file consisting of all my data which of one is the timestamp_low. Running my script on windows I get the correct time value of 4.1472*10^9 but of linux/mac I get the value 1.8447*10^19. Essentially I'm only reading from the file and saving it.</p>\n\n<pre><code>unsigned int timestamp_low = inBytes[0] + (inBytes[1] &lt;&lt; 8) +\n    (inBytes[2] &lt;&lt; 16) + (inBytes[3] &lt;&lt; 24);\nmxSetField(outCell, 0, \"timestamp_low\", mxCreateDoubleScalar((double)timestamp_low));\n</code></pre>\n\n<p>Does anyone know if the mex-compiler works differently on different OS for this kind of stuff? I haven't written this code myself, so I'm not super familiar with details. I use it to gather CSI from a WiFi device. I've tried on different Matlab versions and on Mac/Linux and they produce the same (wrong) value. </p>\n"}, {"tags": ["c", "nginx", "module"], "answers": [{"comments": [{"owner": {"reputation": 8220, "user_id": 3305546, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/G2mbe.png?s=128&g=1", "display_name": "Yves", "link": "https://stackoverflow.com/users/3305546/yves"}, "edited": false, "score": 0, "creation_date": 1492596859, "post_id": 43492662, "comment_id": 74040000, "body": "I think I&#39;ve found the reason: <code>&#47;usr&#47;local&#47;nginx&#47;conf</code> can&#39;t be updated when I reedit <code>pathOfNginx&#47;nginx&#47;conf&#47;nginx.conf</code>. I&#39;m not sure what I should do for this issue. For now, what I could do is to <code>rm -rf &#47;usr&#47;local&#47;nginx</code> and reconfigure and remake the whole nginx."}], "tags": [], "owner": {"reputation": 5623, "user_id": 1347519, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a9e1eb6e25803528d25f57f3df79e115?s=128&d=identicon&r=PG", "display_name": "Attie", "link": "https://stackoverflow.com/users/1347519/attie"}, "is_accepted": true, "score": 0, "last_activity_date": 1492597097, "last_edit_date": 1492597097, "creation_date": 1492596651, "answer_id": 43492662, "question_id": 43492339, "link": "https://stackoverflow.com/questions/43492339/nginx-c-module-hello-world-doesnt-work/43492662#43492662", "title": "nginx c module hello world doesn&#39;t work", "body": "<p>It works for me!</p>\n\n<p>Gives a file that contains <code>hello world\\0</code>...</p>\n\n<p>Remember that the second time you run <code>./configure</code> you need to give all of the options again (it's replacing the config, not updating it).</p>\n\n<p>Also you'll need to follow this with a <code>make install</code>, otherwise the installed binary won't be updated.</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code># get everything\nwget http://nginx.org/download/nginx-1.12.0.tar.gz\ntar -xvf nginx-1.12.0.tar.gz\ngit clone https://github.com/perusio/nginx-hello-world-module\n\n# configure\n(\n  cd nginx-1.12.0\n  ./configure --prefix=../nginx --add-module=../nginx-hello-world-module/\n)\n\n# build &amp; install\nmake -C ./nginx-1.12.0 -j8\nmake -C ./nginx-1.12.0 install\n\n# update config\ncat &lt;&lt;EOF &gt;./nginx/conf/nginx.conf\nworker_processes  1;\nevents {\n    worker_connections  1024;\n}\nhttp {\n    include       mime.types;\n    default_type  application/octet-stream;\n    sendfile        on;\n    keepalive_timeout  65;\n    server {\n        listen       80;\n        server_name  localhost;\n        location / {\n            root   html;\n            index  index.html index.htm;\n        }\n        ############ this is what I add\n        location /test {\n            hello_world;\n        }\n        ############ done\n        error_page   500 502 503 504  /50x.html;\n        location = /50x.html {\n            root   html;\n        }\n    }\n}\nEOF\n\n# run\n(\n    cd nginx\n    ./sbin/nginx\n)\n\n# test\ncurl http://localhost:80/test\n</code></pre>\n"}], "owner": {"reputation": 8220, "user_id": 3305546, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/G2mbe.png?s=128&g=1", "display_name": "Yves", "link": "https://stackoverflow.com/users/3305546/yves"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 431, "favorite_count": 0, "accepted_answer_id": 43492662, "answer_count": 1, "score": 0, "last_activity_date": 1492597097, "creation_date": 1492595823, "question_id": 43492339, "link": "https://stackoverflow.com/questions/43492339/nginx-c-module-hello-world-doesnt-work", "title": "nginx c module hello world doesn&#39;t work", "body": "<p>I just download <a href=\"http://nginx.org/download/\" rel=\"nofollow noreferrer\">nginx</a>. Then I go to the directory of nginx and do the three commands one by one as below:<br></p>\n\n<pre><code>./configure\nmake\nmake install\n</code></pre>\n\n<p>Then I can visit <code>http://localhost</code>, everything goes fine.<br></p>\n\n<p>Now I'm trying to add a c module. Here is a <a href=\"https://github.com/perusio/nginx-hello-world-module\" rel=\"nofollow noreferrer\">hello world example</a>.</p>\n\n<p>What I've done is to download the example from Github and edit the config file of nginx (<code>/pathOfNginx/conf/nginx.conf</code>) as below:<br></p>\n\n<pre><code>worker_processes  1;\nevents {\n    worker_connections  1024;\n}\nhttp {\n    include       mime.types;\n    default_type  application/octet-stream;\n    sendfile        on;\n    keepalive_timeout  65;\n    server {\n        listen       80;\n        server_name  localhost;\n        location / {\n            root   html;\n            index  index.html index.htm;\n        }\n        ############ this is what I add\n        location /test {\n            hello_world;\n        }\n        ############ done\n        error_page   500 502 503 504  /50x.html;\n        location = /50x.html {\n            root   html;\n        }\n    }\n}\n</code></pre>\n\n<p>After that, I do <code>./configure --add-module=/path/to/nginx-hello-world-module</code> and <code>make</code>. Everything looks like good.<br>\nThen I reload the server: <code>nginx -s reload</code></p>\n\n<p>However, I can't get the right reply. Meaning that when I do <code>curl -i http://localhost/test</code>, what I get is an 404 Not Found, instead of a hello world string.</p>\n"}, {"tags": ["c", "makefile"], "comments": [{"owner": {"reputation": 817, "user_id": 4612127, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/77e5b33fd361733419766d29957eb203?s=128&d=identicon&r=PG&f=1", "display_name": "kaldoran", "link": "https://stackoverflow.com/users/4612127/kaldoran"}, "edited": false, "score": 0, "creation_date": 1492595261, "post_id": 43492000, "comment_id": 74038817, "body": "Does <code>SRCDIR</code> contains the <code>&#47;</code> ? Since <code>OBJDIR</code> don&#39;t seems like it got it, since you add it at the end."}, {"owner": {"reputation": 400, "user_id": 3933263, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/478a5e32605c69508b63fc1177353bcc?s=128&d=identicon&r=PG&f=1", "display_name": "ninja.stop", "link": "https://stackoverflow.com/users/3933263/ninja-stop"}, "reply_to_user": {"reputation": 817, "user_id": 4612127, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/77e5b33fd361733419766d29957eb203?s=128&d=identicon&r=PG&f=1", "display_name": "kaldoran", "link": "https://stackoverflow.com/users/4612127/kaldoran"}, "edited": false, "score": 0, "creation_date": 1492595548, "post_id": 43492000, "comment_id": 74039044, "body": "@kaldoran yes  SRCDIR:=src/"}, {"owner": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "edited": false, "score": 1, "creation_date": 1492596113, "post_id": 43492000, "comment_id": 74039468, "body": "You need to post your makefile, not just bits."}, {"owner": {"reputation": 400, "user_id": 3933263, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/478a5e32605c69508b63fc1177353bcc?s=128&d=identicon&r=PG&f=1", "display_name": "ninja.stop", "link": "https://stackoverflow.com/users/3933263/ninja-stop"}, "reply_to_user": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "edited": false, "score": 0, "creation_date": 1492596376, "post_id": 43492000, "comment_id": 74039645, "body": "@MikeKinghan Thanks for your concern. Solved it. and written the solution here in Answer"}], "answers": [{"comments": [{"owner": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "edited": false, "score": 0, "creation_date": 1492596957, "post_id": 43492537, "comment_id": 74040060, "body": "That is a recipe that will never create its target. It is the wrong solution. It solves the problem you know about by creating others you have yet to discover."}, {"owner": {"reputation": 400, "user_id": 3933263, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/478a5e32605c69508b63fc1177353bcc?s=128&d=identicon&r=PG&f=1", "display_name": "ninja.stop", "link": "https://stackoverflow.com/users/3933263/ninja-stop"}, "reply_to_user": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "edited": false, "score": 0, "creation_date": 1492598718, "post_id": 43492537, "comment_id": 74041230, "body": "@MikeKinghan can you please elaborate ? I needed to create .o files only. I had created the target later on. linking all the .o files which is not given in the snippet of my Makefile."}, {"owner": {"reputation": 400, "user_id": 3933263, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/478a5e32605c69508b63fc1177353bcc?s=128&d=identicon&r=PG&f=1", "display_name": "ninja.stop", "link": "https://stackoverflow.com/users/3933263/ninja-stop"}, "reply_to_user": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "edited": false, "score": 0, "creation_date": 1492598829, "post_id": 43492537, "comment_id": 74041321, "body": "@MikeKinghan ie.  executable:\t$(patsubst %,$(OBJDIR)/%,$(OBJ)) \t$(CC) $(CFLAGS) $(INCLUDEDIR) -o $@ $^ Hope this clarifies"}, {"owner": {"reputation": 400, "user_id": 3933263, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/478a5e32605c69508b63fc1177353bcc?s=128&d=identicon&r=PG&f=1", "display_name": "ninja.stop", "link": "https://stackoverflow.com/users/3933263/ninja-stop"}, "reply_to_user": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "edited": false, "score": 0, "creation_date": 1492599159, "post_id": 43492537, "comment_id": 74041576, "body": "@MikeKinghan also the heading is &quot;Create object files in specific directory through Makefile&quot; So the problem I faced was to build .o files into a specific directory only. As per SO guidelines I needed to be specific to problem. Hence thought of posting only the problem area. However as you suggested, I will think about it for more elaborate problem."}], "tags": [], "owner": {"reputation": 400, "user_id": 3933263, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/478a5e32605c69508b63fc1177353bcc?s=128&d=identicon&r=PG&f=1", "display_name": "ninja.stop", "link": "https://stackoverflow.com/users/3933263/ninja-stop"}, "is_accepted": true, "score": 0, "last_activity_date": 1492596321, "creation_date": 1492596321, "answer_id": 43492537, "question_id": 43492000, "link": "https://stackoverflow.com/questions/43492000/create-object-files-in-specific-directory-through-makefile/43492537#43492537", "title": "Create object files in specific directory through Makefile", "body": "<p>Solved it.</p>\n\n<pre><code>object.o:   $(SRCDIR)object.c\n    $(CC) -c -o $(OBJDIR)/object.o $(CFLAGS) $(INCLUDEDIR) $^\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1582, "user_id": 3185943, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/TJBWJ.png?s=128&g=1", "display_name": "blackghost", "link": "https://stackoverflow.com/users/3185943/blackghost"}, "edited": false, "score": 0, "creation_date": 1492607910, "post_id": 43496825, "comment_id": 74047980, "body": "Also, you may want to look up order only dependencies for creating <code>$(OBJDIR)</code> as well"}, {"owner": {"reputation": 400, "user_id": 3933263, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/478a5e32605c69508b63fc1177353bcc?s=128&d=identicon&r=PG&f=1", "display_name": "ninja.stop", "link": "https://stackoverflow.com/users/3933263/ninja-stop"}, "edited": false, "score": 0, "creation_date": 1492719087, "post_id": 43496825, "comment_id": 74110964, "body": "yup, I had moved out / and also used static pattern rule later on. Thanks for the concern though."}], "tags": [], "owner": {"reputation": 1582, "user_id": 3185943, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/TJBWJ.png?s=128&g=1", "display_name": "blackghost", "link": "https://stackoverflow.com/users/3185943/blackghost"}, "is_accepted": false, "score": 1, "last_activity_date": 1492607609, "creation_date": 1492607609, "answer_id": 43496825, "question_id": 43492000, "link": "https://stackoverflow.com/questions/43492000/create-object-files-in-specific-directory-through-makefile/43496825#43496825", "title": "Create object files in specific directory through Makefile", "body": "<p>I think you're looking for something like this:</p>\n\n<pre><code>$(OBJS) = $(patsubst $(SRCS),$(SRCDIR)/%.c,$(OBJDIR)/%.o)\n\n$(OBJS) : $(SRCDIR)/%.o : $(OBJDIR)/%.c\n    @echo \"$&lt; =&gt; $@\"\n    @$(CC) -c -o $@ $(CFLAGS) $(INCLUDEDIR) $&lt;\n</code></pre>\n\n<p>This is a <a href=\"https://www.gnu.org/software/make/manual/html_node/Static-Usage.html#Static-Usage\" rel=\"nofollow noreferrer\">static pattern rule</a> which says to build your objects using a specific pattern.   Notice that I assume you moved the trailing <code>/</code> out of <code>$(SRCDIR)</code> (as it's cleaner that way).   </p>\n"}], "owner": {"reputation": 400, "user_id": 3933263, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/478a5e32605c69508b63fc1177353bcc?s=128&d=identicon&r=PG&f=1", "display_name": "ninja.stop", "link": "https://stackoverflow.com/users/3933263/ninja-stop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 43492537, "answer_count": 2, "score": 0, "last_activity_date": 1492607609, "creation_date": 1492594988, "question_id": 43492000, "link": "https://stackoverflow.com/questions/43492000/create-object-files-in-specific-directory-through-makefile", "title": "Create object files in specific directory through Makefile", "body": "<p>While this works perfectly :</p>\n\n<pre><code>object.o:   $(SRCDIR)object.c\n    $(CC) -c $(CFLAGS) $(INCLUDEDIR) $&lt;\n    mv object.o $(OBJDIR)\n</code></pre>\n\n<p>The goal is to create .o file inside a directory automatically while creating it. ie. not like first create and then move.</p>\n\n<p>I did this :</p>\n\n<pre><code>$(OBJDIR)/object.o: $(SRCDIR)object.c\n    $(CC) -c $(CFLAGS) $(INCLUDEDIR) $&lt;\n</code></pre>\n\n<p>This one outputs : <code>make: *** No rule to make target 'object.o', needed by 'all'.  Stop.</code></p>\n\n<p>Any direction, how to achieve that?</p>\n"}, {"tags": ["java", "c", "arrays"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1492609394, "post_id": 43491757, "comment_id": 74049234, "body": "In C, if <code>rows</code> is an array as the comment says, <code>return rows;</code> only returns a pointer, not an array, to an now invalid object.  A complete, minimal code sample to replicate the problem here is advised,"}], "answers": [{"tags": [], "owner": {"reputation": 15, "user_id": 7884705, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/167928158174ccaf53f1a685097be52e?s=128&d=identicon&r=PG&f=1", "display_name": "edwardam", "link": "https://stackoverflow.com/users/7884705/edwardam"}, "is_accepted": false, "score": 0, "last_activity_date": 1493038658, "creation_date": 1493038658, "answer_id": 43588710, "question_id": 43491757, "link": "https://stackoverflow.com/questions/43491757/returning-2d-char-array-from-c-function-to-java-jni/43588710#43588710", "title": "Returning 2D char array from C function to java JNI", "body": "<p>The solution I have adopted creates an array of characters and then merges each array together to create a 2D jobjectArray of character arrays. Each row of the object array is an array of characters.</p>\n\n<pre><code>JNIEXPORT jobjectArray JNICALL Java_MyClass_get2DArray(JNIEnv *env, jobject jObject){\n\njchar singleArrayRow[10]; //Change 10 to the width of the 2D array\njcharArray arrayRows[10]; //Change 10 to the height of the 2D array\n\n//Looping through the array and adding the relevant characters to an array \nint i, j, k, l;\nfor(i = 0; i &lt; 10; i++){\n    for(j = 0; j &lt; 10; j++){\n        //Using another array in order to passes the row of characters to createArrayRow function\n        singleArrayRow[j] = arrayOfChars[i][j]; //arrayOfChars is just the previously specified char **arrayOfChars  \n    }\n    arrayRows[i] = createArrayRow(env, 10, singleArrayRow);\n}\n//Creating the object\njobjectArray rows = (*env)-&gt;NewObjectArray(env, 10, (*env)-&gt;GetObjectClass(env, arrayRows[0]), 0); //You can use any element of arrayRows[]\n\n//Looping through the jobjectArray and aligning it each row object\nfor(i = 0; i &lt; 10; i++){\n    (*env)-&gt;SetObjectArrayElement(env, rows, i, arrayRows[i]);\n}\nreturn rows}\n</code></pre>\n\n<p>The createArrayRow(JNIEnv *env, int length, jchar rowChar[]) function accepts the java working environment, followed by the array length and the actual array of characters that you want to convert into jobjectArray</p>\n\n<pre><code>static jcharArray createArrayRow(JNIEnv *env, int length, jchar rowChar[]){\n\n//Creating an array of type jcharArray\njcharArray rowOfChars = (*env)-&gt;NewCharArray(env, length);\n\n//Setting the region for the array\n(*env)-&gt;SetCharArrayRegion(env, rowOfChars, 0, length, rowChar);\n\nreturn rowOfChars;}\n</code></pre>\n\n<p>The last for loop in the get2DArray() function sets each element of the newly created jobjectArray, rows, with each jobjectArray created via the createArrayRow() function. Strictly speaking, the get2DArray() function returns a pointer to a jobjectArray, but java unwraps that pointer for you. </p>\n"}], "owner": {"reputation": 15, "user_id": 7884705, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/167928158174ccaf53f1a685097be52e?s=128&d=identicon&r=PG&f=1", "display_name": "edwardam", "link": "https://stackoverflow.com/users/7884705/edwardam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 487, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1493768883, "creation_date": 1492594432, "last_edit_date": 1493039956, "question_id": 43491757, "link": "https://stackoverflow.com/questions/43491757/returning-2d-char-array-from-c-function-to-java-jni", "title": "Returning 2D char array from C function to java JNI", "body": "<p>I am trying to display a 5x5 grid of characters from a 2D char array from a C function, in java. The code I am using at the moment returns a correct 5x5 grid, however all the characters within the grid are displayed as either null or random symbols. The code I am using to construct are return the array is the following:</p>\n\n<pre><code>JNIEXPORT jobjectArray JNICALL Java_MapJNI_look(JNIEnv *env, jobject jObject, jint x, jint y){\n\ninitializeMap();\n\njobjectArray lookRow[5];\nchar lookChars[5][5];\nchar *arrayPointer;\n\nint i, j, k, l;\nfor(i = 0; i &lt; 5; i++){\n    for(j = 0; j &lt; 5; j++){\n\n        int posX = x + j - 5/2;\n        int posY = y + i - 5/2;\n\n        if(posX &gt;= 0 &amp;&amp; posX &lt; getMapWidth() &amp;&amp; posY &gt;= 0 &amp;&amp; posY &lt; getMapHeight()){\n            lookChars[i][j] = map[posY][posX]; //todo check this is correct\n        }else{\n            lookChars[i][j] = 'X';\n        }\n    }\n    arrayPointer = &amp;lookChars[i][j];\n\n    //Setting an element of the row array object to a particular sequence of map characters\n    //5 represents the 5x5 look window\n    lookRow[i] = createArrayRow(env, 5, arrayPointer);\n}\n//Creating an array that contains all the rows for the look window\n//Any element of lookRow[] is valid when obtaining the class through GetObjectClass\njobjectArray rows = (*env)-&gt;NewObjectArray(env, 5, (*env)-&gt;GetObjectClass(env, lookRow[0]), 0);\n\nfor(k = 0; k &lt; 5; k++){\n    (*env)-&gt;SetObjectArrayElement(env,rows,k, lookRow[k]);\n}\n\nreturn rows; }\n</code></pre>\n\n<p>The initializeMap() function simply fills the 2D char array with '.' characters. The createArrayRow() function is below:</p>\n\n<pre><code>static jobjectArray createArrayRow(JNIEnv *env, jsize count, char* elements){\n\n  //Storing the class type for the object passed\n  jclass stringClass = (*env)-&gt;FindClass(env, \"java/lang/String\");\n  //Creating a jobjectArray out of the supplied information\n  //This creates an array that can be passed back to java\n  jobjectArray row = (*env)-&gt;NewObjectArray(env, count, stringClass, 0);\n  jsize i;\n\n  //Assigning each element of the newly created array object to a specific   string\n  (*env)-&gt;SetObjectArrayElement(env, row, i, (*env)-&gt;NewStringUTF(env, elements));\n\nreturn row; }\n</code></pre>\n\n<p>If you have any suggestions, they would be greatly appreciated, thanks.</p>\n"}, {"tags": ["c", "linux"], "comments": [{"owner": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 0, "creation_date": 1492591727, "post_id": 43490641, "comment_id": 74036325, "body": "The very first line of main() has a type declaration that is not defined: &#39;uci_context *&#39;.  Second line has an undefined function &#39;uci_init()&#39;.  So far, it&#39;s not looking good for your question:("}, {"owner": {"reputation": 63, "user_id": 7152653, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-2JQJFL_c4So/AAAAAAAAAAI/AAAAAAAAAaE/Q8KOSYzF5wA/photo.jpg?sz=128", "display_name": "johnleonard onwuzuruigbo", "link": "https://stackoverflow.com/users/7152653/johnleonard-onwuzuruigbo"}, "reply_to_user": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 0, "creation_date": 1492591903, "post_id": 43490641, "comment_id": 74036443, "body": "uci_init() works just fine :D. i need it to get some data"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1492592300, "post_id": 43490641, "comment_id": 74036702, "body": "Hello and welcome to StackOverflow. Please take some time to read the help page, especially the sections named <a href=\"http://stackoverflow.com/help/on-topic\">&quot;What topics can I ask about here?&quot;</a> and <a href=\"http://stackoverflow.com/help/dont-ask\">&quot;What types of questions should I avoid asking?&quot;</a>. And more importantly, please read <a href=\"http://meta.stackexchange.com/q/156810/204922\">the Stack Overflow question checklist</a>. You might also want to learn about <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Examples</a>."}, {"owner": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 0, "creation_date": 1492592678, "post_id": 43490641, "comment_id": 74036990, "body": "Both &#39;uci_init()&#39; and  &#39;ucix_get_option()&#39; return pointers to data that is not freed in main().  While this is not necessarily a disaster, it is worrying - the lifetime of the data pointed to is in question.  You need to provide more code or, more likely do some more of your own debugging.  With what you provided, I cannot get past &#39;uci = uci_init();&#39; looking potentially bad, (ie may return pointer to data local to the called function, and therefore UB)."}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 7152653, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-2JQJFL_c4So/AAAAAAAAAAI/AAAAAAAAAaE/Q8KOSYzF5wA/photo.jpg?sz=128", "display_name": "johnleonard onwuzuruigbo", "link": "https://stackoverflow.com/users/7152653/johnleonard-onwuzuruigbo"}, "edited": false, "score": 0, "creation_date": 1492598573, "post_id": 43492836, "comment_id": 74041130, "body": "OMG this is brilliant. Thanks Alooooooot"}], "tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": true, "score": 1, "last_activity_date": 1492597772, "last_edit_date": 1492597772, "creation_date": 1492597112, "answer_id": 43492836, "question_id": 43490641, "link": "https://stackoverflow.com/questions/43490641/check-if-a-string-word-exist-in-a-file-before-writing-to-it/43492836#43492836", "title": "Check if a string/word exist in a file before writing to it", "body": "<p>The reason that it still writes to the file is that you check the file in a line-by-line manner.</p>\n\n<p>Assume your file has:</p>\n\n<pre><code>193.2.2.1:22\n193.2.2.1:80\n</code></pre>\n\n<p>and you want to check for <code>193.2.2.1:22</code> and <code>193.2.2.1:80</code></p>\n\n<p>First you read the line <code>193.2.2.1:22</code> and do</p>\n\n<pre><code>strstr(\"193.2.2.1:22\", \"193.2.2.1:22\")\n</code></pre>\n\n<p>This is matched so it <strong>will not</strong> write to the file.</p>\n\n<p>But then you do</p>\n\n<pre><code>strstr(\"193.2.2.1:22\", \"193.2.2.1:80\")\n</code></pre>\n\n<p>This is <strong>not</strong> matched so it <strong>will</strong> write to the file.</p>\n\n<p>Then you read the next line from the file which is <code>193.2.2.1:80</code> and do</p>\n\n<pre><code>strstr(\"193.2.2.1:80\", \"193.2.2.1:22\")\n</code></pre>\n\n<p>This is <strong>not</strong> matched so it <strong>will</strong> write to the file.</p>\n\n<p>Then you do</p>\n\n<pre><code>strstr(\"193.2.2.1:80\", \"193.2.2.1:80\")\n</code></pre>\n\n<p>This is matched so it <strong>will not</strong> write to the file.</p>\n\n<p>So now your file is:</p>\n\n<pre><code>193.2.2.1:22\n193.2.2.1:80\n193.2.2.1:80\n193.2.2.1:22\n</code></pre>\n\n<p><strong>Conclusion:</strong></p>\n\n<p>Don't do the check line-by-line. You need to check <strong>all</strong> lines in the file before you decide to write to the file.</p>\n\n<p>A simple fix could be something like:</p>\n\n<pre><code>int save_ssh = 1;\nint save_http = 1;\nif ( fin ) {\n    while ( line = read_line(fin) ) {\n        if (strstr(line, sshbuffer)){\n            printf(\"Already exist %s\\n\",line);\n            save_ssh = 0;\n        }\n        if(strstr(line, httpbuffer)){\n            printf(\"Already exist %s\\n\",line);\n            save_http = 0;\n        }\n        free(line);\n    }\n\n    fclose(fin);\n\n    if (save_ssh) right_line(1,s,ssh,http);\n    if (save_http) right_line(2,s,ssh,http);\n}\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 7152653, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-2JQJFL_c4So/AAAAAAAAAAI/AAAAAAAAAaE/Q8KOSYzF5wA/photo.jpg?sz=128", "display_name": "johnleonard onwuzuruigbo", "link": "https://stackoverflow.com/users/7152653/johnleonard-onwuzuruigbo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 540, "favorite_count": 1, "accepted_answer_id": 43492836, "answer_count": 1, "score": 2, "last_activity_date": 1492597772, "creation_date": 1492591276, "last_edit_date": 1492595632, "question_id": 43490641, "link": "https://stackoverflow.com/questions/43490641/check-if-a-string-word-exist-in-a-file-before-writing-to-it", "title": "Check if a string/word exist in a file before writing to it", "body": "<p>Am having a little bit of a problem. I want to write to a file only if the same string/word am trying to write doesn't already exist. In my case its an IP address and port separated with \":\". If I write manually to the file for example 193.<em>.</em>.<em>:80 and 193.</em>.<em>.</em>:22, it dictates them but still write to the file. Where is my mistake here : </p>\n\n<pre><code>#ifdef DEBUG\n#define INITIAL_ALLOC 2\n#else\n#define INITIAL_ALLOC 512\n#endif\n\n\nvoid BlockIP(char * s);\nchar *read_line(FILE *fin);\nvoid *right_line(int p,char * s,int ssh,int http);\n\n\n\nint main(int argc, char const *argv[])\n{\n    //struct uci_context *uci;\n    //uci = uci_init();\n\n    char *ip = \"193.2.2.1 193.2.6.6 193.168.1.1 193.5.5.5\"\n    //int uci_port = atoi(ucix_get_option(uci, \"pack_mon\", \"manual_blocking\", \"port\"));\n\n    const char s[2] = \" \";\n    char *token;\n\n\n    token = strtok(ip, s);\n\n    while( token != NULL ) \n    {\n        BlockIP(token);\n        token = strtok(NULL, s);\n    }\n\n    return(0);\n}\n\n\nvoid BlockIP(char * s){\n    int ssh = 22;\n    int http = 80;\n    char sshbuffer[2000]= \"\\0\";\n    char httpbuffer[2000]= \"\\0\";\n\n    char cmd2[2000] = \"\\0\";\n    char cmd[2000] = \"\\0\";\n\n    snprintf(cmd, sizeof(cmd),\"iptables -I INPUT 1 -p tcp -s %s --dport 80 -j REJECT\",s);\n    snprintf(cmd2, sizeof(cmd2),\"iptables -I INPUT 1 -p tcp -s %s --dport 22 -j REJECT\",s);\n\n    snprintf(sshbuffer, sizeof(sshbuffer),\"%s:%d\", s,ssh);\n    snprintf(httpbuffer, sizeof(httpbuffer),\"%s:%d\", s,http);\n\n\n    FILE *fp ,*ft;\n    fp = popen(cmd, \"r\");\n\n    pclose(fp);\n\n    ft = popen(cmd2, \"r\");\n\n    pclose(ft);\n\n    FILE *fin;\n    char *line;\n\n\n    fin = fopen(\"/tmp/mymonlog\", \"r\");\n\n    if ( fin ) {\n        while ( line = read_line(fin) ) {\n            if (strstr(line, sshbuffer)){\n                printf(\"Already exist %s\\n\",line);\n            }else{\n                right_line(1,s,ssh,http);\n\n            }\n            if(strstr(line, httpbuffer)){\n                printf(\"Already exist %s\\n\",line);\n            }else{\n                right_line(2,s,ssh,http);\n            }\n            free(line);\n        }\n    }\n\n    fclose(fin);\n}\n\nchar *read_line(FILE *fin) {\n    char *buffer;\n    char *tmp;\n    int read_chars = 0;\n    int bufsize = INITIAL_ALLOC;\n    char *line = malloc(bufsize);\n\n    if ( !line ) {\n        return NULL;\n    }\n\n    buffer = line;\n\n    while ( fgets(buffer, bufsize - read_chars, fin) ) {\n        read_chars = strlen(line);\n\n        if ( line[read_chars - 1] == '\\n' ) {\n            line[read_chars - 1] = '\\0';\n            return line;\n        }\n\n        else {\n            bufsize = 2 * bufsize;\n            tmp = realloc(line, bufsize);\n            if ( tmp ) {\n                line = tmp;\n                buffer = line + read_chars;\n            }\n            else {\n                free(line);\n                return NULL;\n            }\n        }\n    }\n    return NULL;\n}\n\n\nvoid *right_line(int p,char * s,int ssh,int http){\n\n    FILE *pFile,*tFile;\n\n    if(p == 1){\n        pFile=fopen(\"/tmp/mymonlog\", \"a\");\n\n\n        if(pFile==NULL) {\n            perror(\"Error opening file.\");\n        }else {\n            fprintf(pFile, \"%s:%d\\n\", s,ssh);\n        }\n\n        fclose(pFile);\n    }else if(p == 2){\n        tFile=fopen(\"/tmp/mymonlog\", \"a\");\n\n        if(tFile==NULL) {\n            perror(\"Error opening file.\");\n        }\n        else {\n            fprintf(tFile, \"%s:%d\\n\", s,http);\n        }\n\n        fclose(tFile);\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1492604306, "post_id": 43490530, "comment_id": 74045247, "body": "BTW, you may return <code>A*</code> instead of <code>void*</code> for <code>newA</code>."}], "answers": [{"comments": [{"owner": {"reputation": 2102, "user_id": 3280022, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/2d8a213aec89c1883c261a278baf9aee?s=128&d=identicon&r=PG&f=1", "display_name": "Emerald Weapon", "link": "https://stackoverflow.com/users/3280022/emerald-weapon"}, "edited": false, "score": 0, "creation_date": 1492592515, "post_id": 43490981, "comment_id": 74036874, "body": "How does &#39;main.c&#39; even compile?"}, {"owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "reply_to_user": {"reputation": 620, "user_id": 3856355, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d98c91290f61527628086a60948745a3?s=128&d=identicon&r=PG&f=1", "display_name": "Tchinmai", "link": "https://stackoverflow.com/users/3856355/tchinmai"}, "edited": false, "score": 0, "creation_date": 1492592868, "post_id": 43490981, "comment_id": 74037115, "body": "@Tchinmai : updated my answer to include a solution."}, {"owner": {"reputation": 620, "user_id": 3856355, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d98c91290f61527628086a60948745a3?s=128&d=identicon&r=PG&f=1", "display_name": "Tchinmai", "link": "https://stackoverflow.com/users/3856355/tchinmai"}, "edited": false, "score": 0, "creation_date": 1492593002, "post_id": 43490981, "comment_id": 74037206, "body": "@SanderDeDycker Thank you!. you made my day!"}], "tags": [], "owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "is_accepted": true, "score": 5, "last_activity_date": 1492592650, "last_edit_date": 1492592650, "creation_date": 1492592223, "answer_id": 43490981, "question_id": 43490530, "link": "https://stackoverflow.com/questions/43490530/c-wrapper-for-c-class-returns-incorrect-address/43490981#43490981", "title": "C wrapper for C++ class returns incorrect address", "body": "<p>When you compile <em>main.c</em> with a C compiler, it won't have the declarations for the <code>newA</code>, <code>deleteA</code> or <code>update</code> functions (they're surrounded with <code>#ifdef __cplusplus</code>).</p>\n\n<p>So, it will assume the default signature <code>int newA()</code> (similar for the other two).</p>\n\n<p>This means that in this line :</p>\n\n<pre><code>A* a = (A*) newA();\n</code></pre>\n\n<p>the value returned by <code>newA()</code> is treated as an <code>int</code>, then cast to <code>A*</code>. The result of casting an <code>int</code> to a pointer type is implementation defined. On your platform, it appears that the behavior is what you observed.</p>\n\n<p>Most likely, on your platform, <code>sizeof(int)</code> is <code>4</code>, while <code>sizeof(void*)</code> is <code>8</code>. In that case, <code>0x7fff980097a0</code> is truncated to <code>0x980097a0</code> when treated as an <code>int</code>, and then extended to <code>0xffffffff980097a0</code> when cast to <code>A*</code>. And this is exactly what you observe.</p>\n\n<p>Instead, try this to make the declarations visible to a C compiler :</p>\n\n<pre><code>#ifdef __cplusplus\nextern \"C\" {\n#endif\n    void* newA(void);\n    void deleteA(A* a);\n    void update(A*a,uint32_t b);\n#ifdef __cplusplus\n}\n#endif\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1786, "user_id": 422005, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/12c2e55edb5c5fa6905829dab6dca8fb?s=128&d=identicon&r=PG", "display_name": "user422005", "link": "https://stackoverflow.com/users/422005/user422005"}, "is_accepted": false, "score": 1, "last_activity_date": 1492592833, "creation_date": 1492592833, "answer_id": 43491190, "question_id": 43490530, "link": "https://stackoverflow.com/questions/43490530/c-wrapper-for-c-class-returns-incorrect-address/43491190#43491190", "title": "C wrapper for C++ class returns incorrect address", "body": "<p>In header:</p>\n\n<pre><code>#ifdef __cplusplus\nextern \"C\" {\n#endif \n\n// The header declaration is included both by the the C and the C++ \n// compiler.\n\nvoid* newA(void);\nvoid deleteA(A* a);\nvoid update(A*a,uint32_t b);\n\n#ifdef __cplusplus\n} \n#endif\n</code></pre>\n"}], "owner": {"reputation": 620, "user_id": 3856355, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d98c91290f61527628086a60948745a3?s=128&d=identicon&r=PG&f=1", "display_name": "Tchinmai", "link": "https://stackoverflow.com/users/3856355/tchinmai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 43490981, "answer_count": 2, "score": 2, "last_activity_date": 1492592833, "creation_date": 1492590936, "last_edit_date": 1492592826, "question_id": 43490530, "link": "https://stackoverflow.com/questions/43490530/c-wrapper-for-c-class-returns-incorrect-address", "title": "C wrapper for C++ class returns incorrect address", "body": "<p>My C++ header is</p>\n\n<p><strong>header.hh</strong></p>\n\n<pre><code>#include &lt;stdint.h&gt;\n#include &lt;stdio.h&gt;\n#ifdef __cplusplus\n#include &lt;string&gt;\nclass A\n{\n    uint32_t a;\n    public: \n        A(){\n           a = 0;\n        }\n        void update(uint32_t b) {\n           a = b;\n        }\n};\n#else\ntypedef struct A A;\n#endif //__cplusplus\n#ifdef __cplusplus\nextern \"C\" {\n    void* newA(void);\n    void deleteA(A* a);\n    void update(A*a,uint32_t b);\n}\n#endif\n</code></pre>\n\n<p>And my c++ file is </p>\n\n<p><strong>class.cc</strong></p>\n\n<pre><code>#include \"header.hh\"\n#include &lt;iostream&gt;\nextern \"C\" {\n    void* newA(void) {\n        A* a = new A();\n        return (reinterpret_cast &lt;void*&gt; (a));\n    }\n    void deleteA(A* a) {\n         delete a;\n    }\n    void update(A* a,uint32_t b){\n        a-&gt;update(b);\n    }\n}\n</code></pre>\n\n<p><strong>main.c</strong></p>\n\n<pre><code>#include \"header.hh\"\n#include &lt;stdio.h&gt;\nint main()\n{\n    A* a = (A*) newA();\n    deleteA(a);\n}\n</code></pre>\n\n<p><strong>Makefile</strong></p>\n\n<pre><code>CFLAGS=-Wall -g -ansi -pedantic -std=c99\nCCFLAGS=-Wall -g\nLDFLAGS=-g -Wall -lstdc++\n\nOBJS=class.o main.o\nPROG=test\n\nall:$(PROG)\ndefault: all\n\n%.o: %.cc\n    $(CC) $(CCFLAGS) -c $&lt;\n\n%.o: %.c\n    $(CC) $(CFLAGS) -c $&lt;\n\n$(PROG): $(OBJS)\n    $(CC) $(OBJS) $(LDFLAGS) -o $@\n\nclean:\n    rm -rf $(OBJS)\n    rm -rf $(PROF)\n</code></pre>\n\n<p>When I compile and run this program, I see a segfault when I try to call the destructor in Main.</p>\n\n<p>I went into gdb and found that the address of \"a\" in class.cc is <strong>0x7fff980097a0</strong> and in main is <strong>0xffffffff980097a0</strong>.</p>\n\n<p>What is causing the addresses to be changed? </p>\n\n<p>I'm using 4.8.4 version of gcc on ubuntu 14.04.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 17022, "user_id": 549471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6734d794c7d7415105eac1af49068f71?s=128&d=identicon&r=PG", "display_name": "Anders Marzi Tornblad", "link": "https://stackoverflow.com/users/549471/anders-marzi-tornblad"}, "edited": false, "score": 0, "creation_date": 1492590236, "post_id": 43490097, "comment_id": 74035341, "body": "Why all the downvotes for all the correct answers?"}, {"owner": {"reputation": 690, "user_id": 4187370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/240cfc5c0fab089cfe9035e9bc85f421?s=128&d=identicon&r=PG&f=1", "display_name": "Rogus", "link": "https://stackoverflow.com/users/4187370/rogus"}, "edited": false, "score": 2, "creation_date": 1492590318, "post_id": 43490097, "comment_id": 74035395, "body": "I was in the middle of answering this question when I noticed all the answers appearing and that someone is giving -1s to every answer... Some people just do it for fun I guess..."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "reply_to_user": {"reputation": 17022, "user_id": 549471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6734d794c7d7415105eac1af49068f71?s=128&d=identicon&r=PG", "display_name": "Anders Marzi Tornblad", "link": "https://stackoverflow.com/users/549471/anders-marzi-tornblad"}, "edited": false, "score": 0, "creation_date": 1492591969, "post_id": 43490097, "comment_id": 74036476, "body": "@Anders - Someone might believe that the answers are all wrong, and vote accordingly.  :-)"}], "answers": [{"tags": [], "owner": {"reputation": 109, "user_id": 3927228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7aaad852f5928b3ac47c2bf7abd0434d?s=128&d=identicon&r=PG&f=1", "display_name": "eega", "link": "https://stackoverflow.com/users/3927228/eega"}, "is_accepted": false, "score": 2, "last_activity_date": 1492589970, "creation_date": 1492589970, "answer_id": 43490207, "question_id": 43490097, "link": "https://stackoverflow.com/questions/43490097/about-c-file-and-h-file-in-c-programing/43490207#43490207", "title": "About .c file and .h file in C programing?", "body": "<ol>\n<li>no, you can name the header file whatever you like</li>\n<li>no, you can place the header file wherever you like</li>\n<li>if the header file isn't placed in the same location as the source file you have to hand over the location of the header file to the compiler. How to do this for gcc is described in the answer to this question: <a href=\"https://stackoverflow.com/questions/973146/how-to-include-header-files-in-gcc-search-path\">How to include header files in GCC search path?</a></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 17022, "user_id": 549471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6734d794c7d7415105eac1af49068f71?s=128&d=identicon&r=PG", "display_name": "Anders Marzi Tornblad", "link": "https://stackoverflow.com/users/549471/anders-marzi-tornblad"}, "is_accepted": false, "score": 2, "last_activity_date": 1492589997, "creation_date": 1492589997, "answer_id": 43490213, "question_id": 43490097, "link": "https://stackoverflow.com/questions/43490097/about-c-file-and-h-file-in-c-programing/43490213#43490213", "title": "About .c file and .h file in C programing?", "body": "<p>You can name your files anything you want. You can put your files almost anywhere you like, as long as you correctly tell the compiler and linker where those files are. You don't even have to have the filenames end with <code>.c</code> and <code>.h</code> - those are mostly just conventions, but good ones. <strong>I really recommend that you go with <code>.c</code> and <code>.h</code> filename endings!</strong></p>\n\n<p>Say you call one file <code>foo.c</code> and put it in the <code>~/my-sources</code> directory. Also say you call the other file <code>bar.header</code> and put it in the <code>~/my-headers</code> directory. Then your <code>#include</code> directive would have to look something like this:</p>\n\n<pre><code>#include \"../my-headers/bar.header\"\n</code></pre>\n\n<p>This assuming that you are on a UNIX-like system. You would have to apply your knowledge of the operating system you are using to make the <code>#include</code> directive work properly.</p>\n\n<p>Because the header file is <strong>included</strong> in the source file when compiling, it is actually almost exactly like having the entire contents if the header file inside the source file. So as long as you tell the compiler where to find your files <em>(by the command line when compiling, and by having correct paths in your #include directives)</em>, you can put your files anywhere.</p>\n"}, {"comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 1641, "user_id": 5723609, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/zsoe5.jpg?s=128&g=1", "display_name": "Guo", "link": "https://stackoverflow.com/users/5723609/guo"}, "edited": false, "score": 0, "creation_date": 1492592024, "post_id": 43490228, "comment_id": 74036517, "body": "@Guo - Can you please not add more questions to an already answered post? It invalidates existing answers and is very poor SO netiquette. Plus, everything you asked there is answered by my last paragraph."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 1641, "user_id": 5723609, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/zsoe5.jpg?s=128&g=1", "display_name": "Guo", "link": "https://stackoverflow.com/users/5723609/guo"}, "edited": false, "score": 0, "creation_date": 1492592351, "post_id": 43490228, "comment_id": 74036746, "body": "@Guo - Updating a question means adding information to clarify the existing question. If you want to ask for questions than post another separate question (and link back to indicate it&#39;s a followup)."}, {"owner": {"reputation": 1641, "user_id": 5723609, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/zsoe5.jpg?s=128&g=1", "display_name": "Guo", "link": "https://stackoverflow.com/users/5723609/guo"}, "edited": false, "score": 0, "creation_date": 1492592572, "post_id": 43490228, "comment_id": 74036918, "body": "Sorry! I don&#39;t know before. now, I got it!"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 1641, "user_id": 5723609, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/zsoe5.jpg?s=128&g=1", "display_name": "Guo", "link": "https://stackoverflow.com/users/5723609/guo"}, "edited": false, "score": 0, "creation_date": 1492592705, "post_id": 43490228, "comment_id": 74037006, "body": "@Guo - No problem. Just bear it in mind for future questions"}], "tags": [], "owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": false, "score": 6, "last_activity_date": 1492592286, "last_edit_date": 1492592286, "creation_date": 1492590041, "answer_id": 43490228, "question_id": 43490097, "link": "https://stackoverflow.com/questions/43490097/about-c-file-and-h-file-in-c-programing/43490228#43490228", "title": "About .c file and .h file in C programing?", "body": "<blockquote>\n  <p>does header file must named foo.h?</p>\n</blockquote>\n\n<p>No, but using names that tie relevant parts of the program together (even if it's a structural tie, and not a logical tie) is a very sound thing to do. Remember that code/source trees are for humans, not machines.</p>\n\n<blockquote>\n  <p>does foo.c and foo.h must be in the same directory</p>\n</blockquote>\n\n<p>No. But the include paths must be setup properly so <code>foo.c</code> could be built.</p>\n\n<blockquote>\n  <p>but how the compiler or linker find foo.c and call f from foo.c?</p>\n</blockquote>\n\n<p>You have to specify these things for the compiler/linker. Consult their documentation. Since doing it for large projects can be a bit daunting, there are even tools that manage builds for you, based on rules you specify. One classic example is the <a href=\"https://www.gnu.org/software/make/\" rel=\"nofollow noreferrer\"><code>make</code></a> program.</p>\n\n<hr>\n\n<p>As for your added code samples. Simply including headers is not enough information to build a program. The header only includes declarations. You must direct you linker to take the relevant object files and link them into a single executable.</p>\n\n<p>Think of if as jigsaw puzzle. Each declaration is dent in an object file, with a particular shape. Each function definition is bump in the object file with a particular shape. It's the linker's job to fit bump to dents like you would when putting the puzzle together.</p>\n"}, {"tags": [], "owner": {"reputation": 184, "user_id": 713450, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XKtcX.png?s=128&g=1", "display_name": "EmbedWise", "link": "https://stackoverflow.com/users/713450/embedwise"}, "is_accepted": true, "score": 3, "last_activity_date": 1492592340, "last_edit_date": 1495541376, "creation_date": 1492590063, "answer_id": 43490236, "question_id": 43490097, "link": "https://stackoverflow.com/questions/43490097/about-c-file-and-h-file-in-c-programing/43490236#43490236", "title": "About .c file and .h file in C programing?", "body": "<p><strong>1. does header file must named foo.h?</strong></p>\n\n<p>That is not necessary however it can be convenient and most of the time an unwritten rule.</p>\n\n<p><strong>2. does foo.c and foo.h must be in the same directory ?</strong> </p>\n\n<p>This is not necessary. You can give the c compiler include directories. Or you can include relative to a directory e.g.</p>\n\n<pre><code>#include \"inc/foo.h\"\n</code></pre>\n\n<p><strong>3. If the answer to both questions is no, that is to say, a header file can named f.h, foo.c and  f.h can be in different directory. Then, when I call f function, it can find f.h file by #include directive, but how the compiler or linker find foo.c and call f from foo.c?</strong></p>\n\n<p>See answer 2. For example see gcc manual with the -I option (<a href=\"https://gcc.gnu.org/onlinedocs/gcc/Directory-Options.html\" rel=\"nofollow noreferrer\">https://gcc.gnu.org/onlinedocs/gcc/Directory-Options.html</a>)</p>\n\n<p>Update:\nSince the question was extended, maybe you can also look at an older post <a href=\"https://stackoverflow.com/questions/9224537/c-c-header-and-implementation-files-how-do-they-work\">C/C++ header and implementation files: How do they work?</a>. </p>\n"}, {"tags": [], "owner": {"reputation": 2311, "user_id": 6032010, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-cCbzrdp-8HI/AAAAAAAAAAI/AAAAAAAAAAA/g1GQeurueXA/photo.jpg?sz=128", "display_name": "SHG", "link": "https://stackoverflow.com/users/6032010/shg"}, "is_accepted": false, "score": 2, "last_activity_date": 1492590097, "creation_date": 1492590097, "answer_id": 43490246, "question_id": 43490097, "link": "https://stackoverflow.com/questions/43490097/about-c-file-and-h-file-in-c-programing/43490246#43490246", "title": "About .c file and .h file in C programing?", "body": "<ol>\n<li>No</li>\n<li>No</li>\n<li>When you want to compile the output (can be a process or a static/dynamic library) you give the compiler the source files (in your case <code>foo.c</code>) and then it will search all these source files for the function's definition.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 30168, "user_id": 5612562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gzBQY.jpg?s=128&g=1", "display_name": "msc", "link": "https://stackoverflow.com/users/5612562/msc"}, "is_accepted": false, "score": 2, "last_activity_date": 1492590936, "last_edit_date": 1492590936, "creation_date": 1492590572, "answer_id": 43490405, "question_id": 43490097, "link": "https://stackoverflow.com/questions/43490097/about-c-file-and-h-file-in-c-programing/43490405#43490405", "title": "About .c file and .h file in C programing?", "body": "<blockquote>\n  <ol>\n  <li>does header file must named foo.h?</li>\n  </ol>\n</blockquote>\n\n<p><strong>NO.</strong></p>\n\n<blockquote>\n  <ol start=\"2\">\n  <li>does foo.c and foo.h must be in the same directory ?</li>\n  </ol>\n</blockquote>\n\n<p><strong>NO.</strong></p>\n\n<blockquote>\n  <ol start=\"3\">\n  <li>If the answer to both questions is no, that is to say, a header file\n  can named f.h, foo.c and f.h can be in different directory. Then, when\n  I call f function, it can find f.h file by #include directive, but how\n  the compiler or linker find foo.c and call f from foo.c?</li>\n  </ol>\n</blockquote>\n\n<p>It's depend on you. If you put header <code>f.h</code> and source file <code>foo.c</code> in the <strong>same directory</strong>, then simply add a header file into <code>foo.c</code> file, like:</p>\n\n<pre><code>#include \"f.h\"\n</code></pre>\n\n<p>But, If you put header <code>f.h</code> and source file <code>foo.c</code> in the <strong>different directory</strong>, then add a path of header file into <code>foo.c</code>, like:</p>\n\n<pre><code>#include \"Your_header_file_Path/f.h\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 823, "user_id": 1850429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9aeac2c1534ffc9cd94072b3196838b9?s=128&d=identicon&r=PG", "display_name": "Jeroen3", "link": "https://stackoverflow.com/users/1850429/jeroen3"}, "is_accepted": false, "score": 1, "last_activity_date": 1492591166, "creation_date": 1492591166, "answer_id": 43490604, "question_id": 43490097, "link": "https://stackoverflow.com/questions/43490097/about-c-file-and-h-file-in-c-programing/43490604#43490604", "title": "About .c file and .h file in C programing?", "body": "<p><code>#include</code> <a href=\"https://gcc.gnu.org/onlinedocs/gcc-2.95.3/cpp_1.html#SEC7\" rel=\"nofollow noreferrer\">literally inserts</a> the referenced file where it's used.</p>\n\n<p>View the <a href=\"https://gcc.gnu.org/onlinedocs/gcc-2.95.3/cpp_1.html\" rel=\"nofollow noreferrer\">preprocessor</a> intermediate if you want to know what eventually is given to the compiler.</p>\n\n<p>The linker works differently, it just has a list of all objects. If the object is there, it can find it.<br>\nIf you didn't reference it properly, it will warn your with <code>implicit declaration</code> of some kind.</p>\n"}], "owner": {"reputation": 1641, "user_id": 5723609, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/zsoe5.jpg?s=128&g=1", "display_name": "Guo", "link": "https://stackoverflow.com/users/5723609/guo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1415, "favorite_count": 0, "accepted_answer_id": 43490236, "answer_count": 7, "score": 3, "last_activity_date": 1492592340, "creation_date": 1492589604, "last_edit_date": 1492591575, "question_id": 43490097, "link": "https://stackoverflow.com/questions/43490097/about-c-file-and-h-file-in-c-programing", "title": "About .c file and .h file in C programing?", "body": "<p>there is a function <code>f</code> in <code>foo.c</code>, I put <code>f Prototypes</code> into a <strong>header file</strong>.</p>\n\n<p>and then, there are 3 question:</p>\n\n<ol>\n<li>does <strong>header file</strong> must named <code>foo.h</code>?</li>\n<li>does <code>foo.c</code> and <code>foo.h</code> must be in the same <strong>directory</strong>   ?</li>\n<li>If the answer to both questions is <strong>no</strong>, that is to say, a header file can named <code>f.h</code>, <code>foo.c</code> and <code>f.h</code> can be in different directory. look a example:</li>\n</ol>\n\n<p><strong>~/cfile/foo.c</strong></p>\n\n<pre><code>#include \"~/hfile/f.h\"\nint f(void){\n     ...\n}\n</code></pre>\n\n<p><strong>~/hfile/f.h</strong></p>\n\n<pre><code>int f(void);\n</code></pre>\n\n<p><strong>~/main/cmain.c</strong></p>\n\n<pre><code>#include \"~/hfile/f.h\"\nint main(void){\n    f(); \n    ...  \n}\n</code></pre>\n\n<p>Then, when I call <code>f</code> function in <strong>cmain.c</strong>, <strong>cmain.c</strong> can find <strong>f.h</strong>  by <code>#include</code> directive, but how <strong>cmain.c</strong> find <strong>foo.c</strong> by <strong>f.h</strong>, because <strong>cmain.c</strong> only include <strong>f.h</strong>  not include <strong>foo.c</strong>?  or how the compiler or linker find <strong>foo.c</strong> by <strong>f.h</strong>?</p>\n"}, {"tags": ["c", "c-preprocessor", "cortex-m"], "comments": [{"owner": {"reputation": 3000, "user_id": 7611028, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/070114bcdaeea4fc70434718b584f0e0?s=128&d=identicon&r=PG&f=1", "display_name": "thibsc", "link": "https://stackoverflow.com/users/7611028/thibsc"}, "edited": false, "score": 0, "creation_date": 1492589196, "post_id": 43489902, "comment_id": 74034675, "body": "According to the compiler used, it rewrite the first like the second for optimisation so I think it is the same."}, {"owner": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "edited": false, "score": 2, "creation_date": 1492589198, "post_id": 43489902, "comment_id": 74034676, "body": "(Almost?) all compilers will evaluate the constant at compile-time and just stick <code>4095</code> into the code."}, {"owner": {"reputation": 33, "user_id": 7888293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f0d25124250aad5e6fe3b5192f4888b?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew C", "link": "https://stackoverflow.com/users/7888293/andrew-c"}, "edited": false, "score": 0, "creation_date": 1492589401, "post_id": 43489902, "comment_id": 74034801, "body": "Brilliant! Thank you both for your speedy and helpful responses!"}, {"owner": {"reputation": 14588, "user_id": 6870253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7ce91530d2dddae7b9fc2bd828ed78?s=128&d=identicon&r=PG&f=1", "display_name": "chtz", "link": "https://stackoverflow.com/users/6870253/chtz"}, "edited": false, "score": 3, "creation_date": 1492589452, "post_id": 43489902, "comment_id": 74034834, "body": "The only way to be sure is to look at the assembly code your compiler generates. But integer optimization is what compilers have been good at for very long, so you&#39;d have to have a weird compiler if it is not able to optimize that."}, {"owner": {"reputation": 14588, "user_id": 6870253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7ce91530d2dddae7b9fc2bd828ed78?s=128&d=identicon&r=PG&f=1", "display_name": "chtz", "link": "https://stackoverflow.com/users/6870253/chtz"}, "edited": false, "score": 2, "creation_date": 1492589668, "post_id": 43489902, "comment_id": 74034973, "body": "Also, to be safe, you should add an extra set of parentheses around your constant. Althogh, in your case you&#39;d have to do use your macro very weirdly, to get unintended behavior."}, {"owner": {"reputation": 14588, "user_id": 6870253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7ce91530d2dddae7b9fc2bd828ed78?s=128&d=identicon&r=PG&f=1", "display_name": "chtz", "link": "https://stackoverflow.com/users/6870253/chtz"}, "edited": false, "score": 0, "creation_date": 1492590152, "post_id": 43489902, "comment_id": 74035280, "body": "Here is an example of uninteded behavior, because of missing parentheses: <a href=\"http://ideone.com/XGom74\" rel=\"nofollow noreferrer\">ideone.com/XGom74</a>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 14588, "user_id": 6870253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7ce91530d2dddae7b9fc2bd828ed78?s=128&d=identicon&r=PG&f=1", "display_name": "chtz", "link": "https://stackoverflow.com/users/6870253/chtz"}, "edited": false, "score": 0, "creation_date": 1492590470, "post_id": 43489902, "comment_id": 74035484, "body": "@chtz Anyone writing code like that deserve all the bugs they can get :) But generally it is indeed wise to cover macros with parenthesis."}, {"owner": {"reputation": 33, "user_id": 7888293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f0d25124250aad5e6fe3b5192f4888b?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew C", "link": "https://stackoverflow.com/users/7888293/andrew-c"}, "edited": false, "score": 0, "creation_date": 1492591355, "post_id": 43489902, "comment_id": 74036059, "body": "Thank you all for the great help!"}, {"owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "edited": false, "score": 0, "creation_date": 1492594214, "post_id": 43489902, "comment_id": 74038045, "body": "Note that the choice of <code>(1&lt;&lt;12)-1</code> over <code>4095</code> is very likely for human readability. It&#39;s easier to see that the value is 12 bits wide and all 1&#39;s from the former than from the latter."}, {"owner": {"reputation": 33, "user_id": 7888293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f0d25124250aad5e6fe3b5192f4888b?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew C", "link": "https://stackoverflow.com/users/7888293/andrew-c"}, "edited": false, "score": 0, "creation_date": 1493015606, "post_id": 43489902, "comment_id": 74211689, "body": "Thanks Sander, I assumed that might be the reason. I can see the logic in that, and if it doesn&#39;t impact the execution time, it makes perfect sense!"}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 7888293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f0d25124250aad5e6fe3b5192f4888b?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew C", "link": "https://stackoverflow.com/users/7888293/andrew-c"}, "edited": false, "score": 0, "creation_date": 1492591581, "post_id": 43490307, "comment_id": 74036230, "body": "Thank you very much for the detailed answer!"}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": true, "score": 4, "last_activity_date": 1492590779, "last_edit_date": 1592644375, "creation_date": 1492590265, "answer_id": 43490307, "question_id": 43489902, "link": "https://stackoverflow.com/questions/43489902/if-i-use-a-fixed-formula-in-a-define-is-it-less-efficient-than-using-a-number/43490307#43490307", "title": "If I use a fixed formula in a #define, is it less efficient than using a number?", "body": "<p>No, it does not take any run-time processing time. The whole macro is an <em>integer constant expression</em>, meaning it will get calculated at compile-time.</p>\n<p>If you look at the generated assembly, you'll see that the expression is replaced by the constant 4095.</p>\n<hr />\n<p>A constant expression is defined by C like this, C11 6.6:</p>\n<blockquote>\n<p>A constant expression can be evaluated during translation rather than\nruntime, and accordingly may be used in any place that a constant may\nbe.</p>\n<p>Constraints</p>\n<p>Constant expressions shall not contain assignment, increment, decrement, function-call, or comma operators, except when they are contained within a subexpression that is not evaluated.</p>\n<p>Each constant expression shall evaluate to a constant that is in the range of representable\nvalues for its type.</p>\n</blockquote>\n<p>/--/</p>\n<blockquote>\n<p>An <em>integer constant expression</em> shall have integer type and shall\nonly have operands that are integer constants, enumeration constants,\ncharacter constants, sizeof expressions whose results are integer\nconstants, _Alignof expressions, and floating constants that are the\nimmediate operands of casts. Cast operators in an integer constant\nexpression shall only convert arithmetic types to integer types,\nexcept as part of an operand to the sizeof or _Alignof operator.</p>\n</blockquote>\n"}], "owner": {"reputation": 33, "user_id": 7888293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f0d25124250aad5e6fe3b5192f4888b?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew C", "link": "https://stackoverflow.com/users/7888293/andrew-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "accepted_answer_id": 43490307, "answer_count": 1, "score": 3, "last_activity_date": 1546913585, "creation_date": 1492589010, "last_edit_date": 1546913585, "question_id": 43489902, "link": "https://stackoverflow.com/questions/43489902/if-i-use-a-fixed-formula-in-a-define-is-it-less-efficient-than-using-a-number", "title": "If I use a fixed formula in a #define, is it less efficient than using a number?", "body": "<p>I am working my way through some legacy code at work for a Cortex-M3, written in C on Keil \u00b5Vision. </p>\n\n<p>In a function to record values from an ADC, a scaling factor is used to convert from bits back to volts. </p>\n\n<p>My question revolves around the scaling factor, which is defined in the header file:</p>\n\n<p><code>#define INPUT_VALUE_MAX    (uint16_t)((1&lt;&lt;12)-1)</code></p>\n\n<p>So this equals 4095, which makes sense, because it is a 12-bit ADC. The question I have is whether defining the value \"INPUT_VALUE_MAX\" as a formula means that every time it is used, the microcontroller has to re-calculate the value.</p>\n\n<p>Simply, does:</p>\n\n<p><code>#define INPUT_VALUE_MAX    (uint16_t)((1&lt;&lt;12)-1)</code></p>\n\n<p>take more processing time than:</p>\n\n<p><code>#define INPUT_VALUE_MAX    (uint16_t)4095</code>?</p>\n\n<p>Thanks in advance for any help anyone can offer!</p>\n"}, {"tags": ["c", "pointers", "alignment", "language-lawyer"], "comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1492595260, "post_id": 43489713, "comment_id": 74038815, "body": "First, you have to explain how an incomplete structure can even have an alignment requirement - an incomplete structure can&#39;t be created.  It can only be created by code that has access to the complete definition of the structure, and then an address of a complete structure can be passed to other code where the definition is incomplete."}, {"owner": {"reputation": 12521, "user_id": 4498329, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/b1bf128245aa5bcb1b740e8154296900?s=128&d=identicon&r=PG&f=1", "display_name": "skyking", "link": "https://stackoverflow.com/users/4498329/skyking"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1492596402, "post_id": 43489713, "comment_id": 74039672, "body": "@AndrewHenle Oddly enough the standard requires the resulting pointer to be correctly aligned for the pointed-to type even if that type is incomplete. So there seem to be some kind of alignment requirement even for incomplete type."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1492596799, "post_id": 43489713, "comment_id": 74039959, "body": "&quot;Oddly enough the standard requires the resulting <b><i>pointer</i></b> to be correctly aligned ...&quot;  Alignment restrictions on the pointer are not alignment restrictions on any structure it might point to."}, {"owner": {"reputation": 12521, "user_id": 4498329, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/b1bf128245aa5bcb1b740e8154296900?s=128&d=identicon&r=PG&f=1", "display_name": "skyking", "link": "https://stackoverflow.com/users/4498329/skyking"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1492598455, "post_id": 43489713, "comment_id": 74041061, "body": "@AndrewHenle I interpret it as it&#39;s the value of the pointer that must be correctly aligned not the storage. Requiring that the storage of the pointer to be aligned with what it points to doesn&#39;t make much sense."}, {"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1492599460, "post_id": 43489713, "comment_id": 74041805, "body": "This is not a problem.  There is very little you can do with an incomplete type, just <i>declare</i> a pointer to it.  The <i>assignment</i> to the pointer is where the pedal hits the metal and alignment starts to play a role, a C compiler won&#39;t let you do this without it knowing the complete type."}, {"owner": {"reputation": 12521, "user_id": 4498329, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/b1bf128245aa5bcb1b740e8154296900?s=128&d=identicon&r=PG&f=1", "display_name": "skyking", "link": "https://stackoverflow.com/users/4498329/skyking"}, "reply_to_user": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1492599974, "post_id": 43489713, "comment_id": 74042183, "body": "@HansPassant Check the answer to the other question and the standard says that the alignment is important nevertheless. It states that the very conversion has undefined behavior should the resulting pointer be incorrectly aligned for the pointed-to type. That there&#39;s little I can do with the incomplete type doesn&#39;t help much when UB already has occured..."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1492636422, "post_id": 43489713, "comment_id": 74067059, "body": "@HansPassant: Neither conversion of a <code>void*</code> to a pointer-to-structure type, nor storage of such a pointer in an object of pointer-to-structure type, requires that a complete structure definition be visible, nor even exist anywhere.  A system where <code>int*</code> is smaller than <code>char*</code> or <code>void*</code> may opt to either have structure pointers be large enough to accommodate arbitrary alignment, or may require that all structures be word-aligned even if all members are of type <code>char</code>, but all structure pointer types must have the same representation.  All union pointers must likewise have the..."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1492636628, "post_id": 43489713, "comment_id": 74067182, "body": "...same representation as each other, though it is not required to be compatible with the representation for structure types.  Commonplace systems, of course, use the same representation for both, but that is not required."}], "answers": [{"comments": [{"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1492636943, "post_id": 43501171, "comment_id": 74067335, "body": "What does the bold-face word &quot;referenced&quot; mean in the above quote?  Does it mean &quot;resulting&quot;?  Is this a place (one of many) where the Standard uses a term without really defining it?"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1492639260, "post_id": 43501171, "comment_id": 74068296, "body": "@supercat: 6.2.5 para 20: &quot;A pointer type may be derived from a function type or an object type, called the referenced type....&quot;"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1492639444, "post_id": 43501171, "comment_id": 74068375, "body": "@supercat: I put it in bold because it is a change in wording from C99, in which the word was &quot;pointed-to&quot;. &quot;Referenced&quot;, which is precisely defined, is much clearer, IMHO."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1492640800, "post_id": 43501171, "comment_id": 74068861, "body": "Fair enough; I tend to use the term &quot;target type&quot;, since the past-participle &quot;referenced&quot; is often used to refer to something referenced <i>in text</i>.  Does the Standard define specify that a pointer&#39;s &quot;referenced&quot; type is the type of object to which the pointer points?"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1492640905, "post_id": 43501171, "comment_id": 74068905, "body": "@supercat: I just quoted the definition in my comment! It&#39;s the type from which the pointer type is derived. IOW, if you have a pointer type X*, its referenced type is X. &quot;Pointed-to&quot; is unsatisfactory, since the type doesn&#39;t point at anything, and the value might not point at an object (since it might be NULL)."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1492641286, "post_id": 43501171, "comment_id": 74069030, "body": "Also, while it would certainly be helpful to be able to say that the alignment requirement for a pointer to a union will be the coarsest alignment among <i>the members that are accessed via that pointer</i>, nothing in the Standard specifies that nor provides any means by which code could refuse to compile on an implementation that couldn&#39;t guarantee such behavior.  If such behavior were guaranteed, then it might be sensible to say that code which wants to use a <code>uint16_t*</code> to access what <i>might</i> be part of a <code>uint32_t</code> could avoid aliasing issues by converting the pointer..."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1492641493, "post_id": 43501171, "comment_id": 74069099, "body": "... to a union containing both types and then using the union to perform the access.  Code shouldn&#39;t need to know or care about whether the <code>uint16_t*</code> was 32-bit aligned if only the <code>uint16_t</code> member was used for access.  I don&#39;t know to what extent compilers with multiple pointer representations have tried to support such a design, but today I wouldn&#39;t count on gcc to support such a thing even on platforms where all pointers use the same representation."}, {"owner": {"reputation": 12521, "user_id": 4498329, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/b1bf128245aa5bcb1b740e8154296900?s=128&d=identicon&r=PG&f=1", "display_name": "skyking", "link": "https://stackoverflow.com/users/4498329/skyking"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1492671168, "post_id": 43501171, "comment_id": 74078270, "body": "@supercat The &quot;target type&quot; is a bad choice since the target type is the pointer and it&#39;s the alignment requirement of the &quot;pointed-to&quot; type that is the culprit."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 12521, "user_id": 4498329, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/b1bf128245aa5bcb1b740e8154296900?s=128&d=identicon&r=PG&f=1", "display_name": "skyking", "link": "https://stackoverflow.com/users/4498329/skyking"}, "edited": false, "score": 0, "creation_date": 1492699143, "post_id": 43501171, "comment_id": 74098703, "body": "@skyking: In this context, it doesn&#39;t matter whether the alignment is correct for something to <i>be</i> a pointer to an object of type targeted <i>by</i> the destination pointer, or whether it&#39;s correct to be a pointer stored <i>in</i> the destination pointer--the two meanings would be equivalent.  There are, however, two types &quot;referenced&quot; <i>by the text</i>."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1534438409, "post_id": 43501171, "comment_id": 90715435, "body": "I just noticed the paragraph about &quot;So the only way a pointer to an incomplete type can be legitimately assigned a non-null value...&quot; but I don&#39;t see what would be &quot;illegitimate&quot; about a program which knows the size of a couple of incomplete types (perhaps stored in an imported symbols) from doing something like <code>struct tag1 *p1 = malloc(structSize1 + structSize2); struct tag *p2 = (struct tag p2*)(p1+1);</code> if the size of the first structure is known to be compatible with the alignment of the second."}], "tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": true, "score": 5, "last_activity_date": 1492641513, "last_edit_date": 1592644375, "creation_date": 1492619023, "answer_id": 43501171, "question_id": 43489713, "link": "https://stackoverflow.com/questions/43489713/is-the-alignment-requirement-for-incomplete-struct-x-and-struct-y-the-same/43501171#43501171", "title": "Is the alignment requirement for incomplete `struct X` and `struct Y` the same?", "body": "<p>To start with, I don't think you can talk about the alignment requirement of an incomplete type, because alignment requirements are only defined for complete types:</p>\n<blockquote>\n<p>Complete object types have alignment requirements which place restrictions on the addresses at which objects of that type may be allocated. (\u00a76.2.8/1; all standard citations are taken from n1570.pdf, which is effectively C11)</p>\n</blockquote>\n<p>But in a valid program, a pointer must point to an object of complete type (or NULL). So even if the referenced type of a pointer is incomplete in some translation unit, the object referred to by that pointer (if there is one) must have a complete type and thus an alignment requirement. However, in the translation unit in which the referred type is incomplete, there is no way to know what that alignment requirement is, neither for the compiler nor for the person writing the code.</p>\n<p>So the only way a pointer to an incomplete type can be legitimately assigned a non-NULL value is by means of a copy of a pointer to the same type from somewhere where the type is complete (perhaps in another translation unit). This is not a conversion, since the two types are compatible, and it is guaranteed to work. Similarly, one of the few legitimate uses for a value of a  pointer to an incomplete type is to pass it to a pointer to the same type in a context where the type is complete. (Other uses include comparing it for equality with another pointer value or converting it to an integer and printing it out, but these don't involve converting to a different pointer type.)</p>\n<p>So, in summary, pointers to incomplete types are useful and usable precisely in the expected use case -- where the referenced type is opaque -- but cannot be portably converted to pointers of any other type except for possibly qualified <code>char*</code> and <code>void*</code>.</p>\n<p>The standard does not guarantee the possibility of converting a pointer to a pointer to a type whose alignment might be more stringent. If the alignment of the referred type is unknown, the only pointers whose target alignment cannot be more stringent are <code>char*</code> and <code>void*</code>. So any conversion of a pointer to an incomplete type to a type other than <code>char*</code> or <code>void*</code> must be regarded as unportable.</p>\n<p>Really, the fact that the referred type is incomplete is not hugely relevant. The standard does not specify the alignment of a composite type. Such an alignment must be sufficient to allow the compiler to correctly align members, but it could be arbitrarily large. In other words, there is no guarantee that the types:</p>\n<pre><code>typedef char oneChar; \nstruct oneChar_s { char x; };\nunion  oneChar_u { char x; };\n</code></pre>\n<p>have the same alignment. It is quite possible for the two composite types to have larger alignments than 1. So there is no guarantee that it is possible to convert a <code>oneChar*</code> to a <code>oneChar_s*</code> (unless, of course, the <code>oneChar*</code> were the result of a previous conversion in the opposite direction), and a portable program would not try. In this sense, it makes no difference whether the definition of <code>struct oneChar_s</code> is visible or not.</p>\n<p>Not coincidentally, the standard does not guarantee that all object pointers have the same size. The underlying theory is that on some architectures, ordinary pointers are not sufficiently precise to refer to single bytes, but there is the possibility of augmenting the pointer with the addition of, for example, a bit offset. Indeed, it might be the case that there are other small objects which can be packed into words, which also require augmented pointer representations but with less precision than a bit offset.</p>\n<p>In such an architecture, it is not possible to take advantage of different pointer precisions for small composite objects, because the standard insists that there be at most two representation of pointers to composites, one for <code>struct</code>s and one for <code>union</code>s:</p>\n<blockquote>\n<p>All pointers to structure types shall have the same representation and alignment requirements as each other. All pointers to union types shall have the same representation and alignment requirements as each other. (\u00a76.2.5/27) [Note 2]</p>\n</blockquote>\n<p>In particular, this means that pointers to objects of a given type have the same representation, regardless of whether the type is complete.</p>\n<p>Difference in pointer representations is not the only reason that a conversion to a more constrained alignment might fail. For example, an implementation might insert code to verify alignment after a conversion (perhaps in response to a sanitizing compiler option). In the case of an incomplete type, the compiler would not be able to insert static code to do the check (although some kind of runtime check might be possible), but the fact that the compiler might omit the validation code would not alter the undefinedness of the result.</p>\n<hr />\n<p>For what its worth, the standard citation in the OP was for C99; in C11, it has been modified slightly (emphasis added to indicate changed wording):</p>\n<blockquote>\n<p>A pointer to an <strong>object type</strong> may be converted to a pointer to a <strong>different object type</strong>. If the resulting pointer is not correctly aligned for the <strong>referenced</strong> type, the behavior is undefined. Otherwise, when converted back again, the result shall compare equal to the original pointer. When a pointer to an object is converted to a pointer to a character type, the result points to the lowest addressed byte of the object. Successive increments of the result, up to the size of the object, yield pointers to the remaining bytes of the object. (\u00a76.3.2.3/7)</p>\n</blockquote>\n<p>In my opinion, this change is purely editorial. It derives from the decision to change the definition of &quot;object type&quot; in \u00a76.2.5/1. In C99, there were three kinds of type: object types, function types, and incomplete types. In C11, there are only two kinds -- object types and function types -- with the comment that &quot;At various points within a translation unit an object type may be incomplete\u2026 or complete\u2026&quot;, which is a more accurate description.</p>\n<h3>Notes</h3>\n<ol>\n<li><p>As a completely hypothetical example, consider a machine conceptually similar to the PDP-6/10 architecture. This is a word-addressed machine with a large word size; a word is large enough to contain two addresses (a fact which a hypothetical LISP implementation could take advantage of in order to store a cons node consisting of <code>car</code> and <code>cdr</code> fields into a single word). Because it is desired to represent vectors of small objects efficiently, the machine also has instructions which can extract or overwrite a bitfield within a word, where the bitfield pointer consists of a word pointer accompanied by an offset and length information. (Hence, a word can contain only one bitfield pointer.) (The hardward has an instruction which can increment bitfield pointers by adding the length to the offset and moving to bitfield starting at 0 of the next word if necessary.)</p>\n<p>So there could be three different pointer types:</p>\n<ul>\n<li>a fullword character pointer consisting of an address and a bitfield offset/length.</li>\n<li>an ordinary halfword pointer to any word-aligned object type.</li>\n<li>an augmented halfword-plus-one-bit pointer to a pointer to a word aligned object, consisting of an address and an indication of whether the address is in the first or second half of the word. (This representation also probably requires a fullword, but the encoding is simpler. But there might also be some other place for the extra bit. It's a <em>hypothetical</em> example, remember.)</li>\n</ul>\n<p>In this hypothetical architecture, the conversion rules become quite complicated. For example, you can convert an <code>char**</code> to an <code>int*</code> because the alignment of <code>int</code> is the same as the alignment of <code>char*</code>. But you cannot convert an <code>int**</code> to an <code>int*</code> because the alignment of <code>int</code> is greater than the alignment of <code>int*</code>.</p>\n<p>Rather than memorizing these complex rules, a programmer would probably choose to simply forbear from performing pointer conversions other than those guaranteed to be portable, which is round-tripping through <code>char*</code> or <code>void*</code>.</p>\n</li>\n<li><p>It would be possible for pointers to all composites to use the larger, more precise pointer type, even if unnecessarily. It seems to me much more likely that an implementation would simply choose to impose a minimum alignment on <code>struct</code>s, if not all composite objects. The wording of the standard would allow an implementation to use a minimum alignment for <code>struct</code>s and an augmented pointer representation for all <code>union</code>s.</p>\n</li>\n</ol>\n"}], "owner": {"reputation": 12521, "user_id": 4498329, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/b1bf128245aa5bcb1b740e8154296900?s=128&d=identicon&r=PG&f=1", "display_name": "skyking", "link": "https://stackoverflow.com/users/4498329/skyking"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 284, "favorite_count": 1, "accepted_answer_id": 43501171, "answer_count": 1, "score": 3, "last_activity_date": 1492641513, "creation_date": 1492588430, "last_edit_date": 1495541394, "question_id": 43489713, "link": "https://stackoverflow.com/questions/43489713/is-the-alignment-requirement-for-incomplete-struct-x-and-struct-y-the-same", "title": "Is the alignment requirement for incomplete `struct X` and `struct Y` the same?", "body": "<p>An answer to <a href=\"https://stackoverflow.com/a/4810460/4498329\">\"C: When is casting between pointer types not undefined behavior?\"</a> indicates that casting forth and back via a pointer with no stricter alignment requirement is safe.</p>\n\n<p>The alignment is important here even if the types are incomplete as the standard states:</p>\n\n<blockquote>\n  <p>A  pointer  to  an  object  or  incomplete  type  may  be  converted  to  a  pointer  to  a  different\n  object  or  incomplete  type.   If  the  resulting  pointer  is  not  correctly  aligned\n  for  the\n  pointed-to  type,  the  behavior  is  undefined.   Otherwise,  when  converted  back  again,  the\n  result  shall  compare  equal  to  the  original  pointer.   When  a  pointer  to  an  object  is\n  converted to a pointer to a character type, the result points to the lowest addressed byte of\n  the object.  Successive increments of the result, up to the size of the object, yield pointers\n  to the remaining bytes of the object.</p>\n</blockquote>\n\n<p>Now the question is what correct alignment requirement of <code>struct X</code> is. Of course it would depend on it's contents if it is complete, but what if it's an incomplete (that it is only declared as <code>struct X;</code>)? Or put another way, can we cast from <code>struct X*</code> to <code>struct Y*</code> and back and get the same pointer again?</p>\n\n<p>If the alignment requirement of a complete <code>struct X</code> and incomplete differs would that be a complication? I can't come up with an actual conversion between them, but it could be that you pass a <code>struct X*</code> between translation between context where the <code>struct X</code> is complete respectively incomplete. Or is this a special case that's always allowed anyway?</p>\n"}, {"tags": ["c", "macos", "nginx"], "comments": [{"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 2, "creation_date": 1492588708, "post_id": 43489665, "comment_id": 74034378, "body": "C or C++? Or C and C++ separately. There is no such language as C/C++"}, {"owner": {"reputation": 1714, "user_id": 7404323, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/jYEFn.png?s=128&g=1", "display_name": "sailfish009", "link": "https://stackoverflow.com/users/7404323/sailfish009"}, "edited": false, "score": 1, "creation_date": 1492588735, "post_id": 43489665, "comment_id": 74034399, "body": "<a href=\"http://www.evanmiller.org/nginx-modules-guide.html\" rel=\"nofollow noreferrer\">evanmiller.org/nginx-modules-guide.html</a>"}, {"owner": {"reputation": 8220, "user_id": 3305546, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/G2mbe.png?s=128&g=1", "display_name": "Yves", "link": "https://stackoverflow.com/users/3305546/yves"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1492588790, "post_id": 43489665, "comment_id": 74034429, "body": "@AjayBrahmakshatriya  For now I&#39;m not sure if it works for C++."}], "answers": [{"tags": [], "owner": {"reputation": 1332, "user_id": 3664021, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f3a9f339c82088c5bfe6be353fbae64?s=128&d=identicon&r=PG", "display_name": "leninhasda", "link": "https://stackoverflow.com/users/3664021/leninhasda"}, "is_accepted": true, "score": 0, "last_activity_date": 1502914683, "creation_date": 1502914683, "answer_id": 45722297, "question_id": 43489665, "link": "https://stackoverflow.com/questions/43489665/how-to-use-c-c-module-with-nginx/45722297#45722297", "title": "how to use c/c++ module with nginx", "body": "<p>These two seems like very good starting point to me:</p>\n\n<p><a href=\"http://www.evanmiller.org/nginx-modules-guide.html\" rel=\"nofollow noreferrer\">http://www.evanmiller.org/nginx-modules-guide.html</a><br>\n<a href=\"http://nutrun.com/weblog/2009/08/15/hello-world-nginx-module.html\" rel=\"nofollow noreferrer\">http://nutrun.com/weblog/2009/08/15/hello-world-nginx-module.html</a></p>\n\n<p>I haven't made any modules myself, but when I searched for one of my own problem solution I found the above links and these looks promising to me.</p>\n\n<p>I will update you any progress I made during my experiment. And if you have already made any progress, please do share.</p>\n"}], "owner": {"reputation": 8220, "user_id": 3305546, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/G2mbe.png?s=128&g=1", "display_name": "Yves", "link": "https://stackoverflow.com/users/3305546/yves"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 991, "favorite_count": 1, "accepted_answer_id": 45722297, "answer_count": 1, "score": 0, "last_activity_date": 1502914683, "creation_date": 1492588275, "last_edit_date": 1492592994, "question_id": 43489665, "link": "https://stackoverflow.com/questions/43489665/how-to-use-c-c-module-with-nginx", "title": "how to use c/c++ module with nginx", "body": "<p>I'm trying to build a web server with <a href=\"http://nginx.org/\" rel=\"nofollow noreferrer\">nginx</a>.<br></p>\n\n<p>My PC is a Mac OS so I just <code>brew install nginx</code>. It works well. I can execute <code>nginx</code> which is located at <code>/usr/local/bin/</code> to start the server. Also, when I visit <code>http://localhost</code>, I can get the main page, which is located at <code>/usr/local/var/www/index.html</code>.</p>\n\n<p>However, I can't find any source code of nginx.<br></p>\n\n<p>So I download its source code from <a href=\"http://nginx.org/download/\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>Now I'm confused. I don't know how to organize my project.<br></p>\n\n<p>For example, for this <a href=\"https://github.com/perusio/nginx-hello-world-module/blob/master/ngx_http_hello_world_module.c\" rel=\"nofollow noreferrer\">hello world</a>, it just need <code>#include &lt;ngx_config.h&gt; #include &lt;ngx_core.h&gt; #include &lt;ngx_http.h&gt;</code>. It seems that it could use the source code of nginx as a c standard library.<br></p>\n\n<p>How can I do the same thing?<br>\nWhere should I put my developed module?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1492587022, "post_id": 43488975, "comment_id": 74033342, "body": "What is &quot;temporary&quot;? did you read about scopes and lifetimes? Which part was confusing? See, sharing your research will help others, too."}], "answers": [{"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 13, "last_activity_date": 1492586246, "creation_date": 1492586246, "answer_id": 43489014, "question_id": 43488975, "link": "https://stackoverflow.com/questions/43488975/returning-a-temporary-const-char-will-it-work/43489014#43489014", "title": "Returning a temporary const char* - will it work", "body": "<p>String literals are stored as arrays that have a lifetime of the full program. Pointers to them never become invalid.</p>\n\n<p>So it's safe to do the second alternative, and there are not \"temporaries\" involved.</p>\n"}], "owner": {"reputation": 3110, "user_id": 5470144, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/VVhju.jpg?s=128&g=1", "display_name": "Elad Weiss", "link": "https://stackoverflow.com/users/5470144/elad-weiss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "closed_date": 1492630394, "accepted_answer_id": 43489014, "answer_count": 1, "score": 3, "last_activity_date": 1492586246, "creation_date": 1492586137, "question_id": 43488975, "link": "https://stackoverflow.com/questions/43488975/returning-a-temporary-const-char-will-it-work", "closed_reason": "Duplicate", "title": "Returning a temporary const char* - will it work", "body": "<p>I want to create a method get_name(...) which returns the name for an enum_value. The enum values are few, but can be up to 1^32 - 1 (so I don't think I can use an array mapping). </p>\n\n<p>I did the following:</p>\n\n<pre><code>const char* get_name(type_t x) {\n   static const char* name_1 = \"NAME_FOR_TYPE_1\";\n   static const char* name_2 = \"NAME_FOR_TYPE_2\";\n   ...\n   static const char* invalid = \"INVALID\";\n\n   switch (x) {\n      case type_1: return name_1;\n      case type_2: return name_2;\n      ...\n   }\n   return invalid;\n}\n</code></pre>\n\n<p>Then, I was told the following will also work:</p>\n\n<pre><code>const char* get_name(type_t x) {\n   switch (x) {\n      case type_1: return \"NAME_FOR_TYPE_1\";\n      case type_2: return \"NAME_FOR_TYPE_2\";\n      ...\n   }\n   return \"INVALID\";\n}\n</code></pre>\n\n<p>Is that true? Will it always work?</p>\n\n<p>Am I not returning a pointer to temporary?</p>\n"}, {"tags": ["c", "extern"], "comments": [{"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1492585518, "post_id": 43488730, "comment_id": 74032347, "body": "Did you included <code>test.h</code> in <code>test.c</code> file?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1492585541, "post_id": 43488730, "comment_id": 74032364, "body": "The <code>extern</code> keyword makes it a <i>declaration</i>. You still need a <i>definition</i> somewhere."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1492585586, "post_id": 43488730, "comment_id": 74032388, "body": "Also, why are you using <code>volatile</code>?"}, {"owner": {"reputation": 1, "user_id": 7888026, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-MTnBPIq12Iw/AAAAAAAAAAI/AAAAAAAAXzw/Vq-znpyEMzM/photo.jpg?sz=128", "display_name": "Jignesh Panchal", "link": "https://stackoverflow.com/users/7888026/jignesh-panchal"}, "edited": false, "score": 0, "creation_date": 1492585738, "post_id": 43488730, "comment_id": 74032493, "body": "Yes. included test.h"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7888026, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-MTnBPIq12Iw/AAAAAAAAAAI/AAAAAAAAXzw/Vq-znpyEMzM/photo.jpg?sz=128", "display_name": "Jignesh Panchal", "link": "https://stackoverflow.com/users/7888026/jignesh-panchal"}, "edited": false, "score": 0, "creation_date": 1492585779, "post_id": 43488768, "comment_id": 74032526, "body": "Yeah. if I remove extern, then its working... but just a question.. if I want to use outside of class then I need to make it extern.. right ?"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 1, "user_id": 7888026, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-MTnBPIq12Iw/AAAAAAAAAAI/AAAAAAAAXzw/Vq-znpyEMzM/photo.jpg?sz=128", "display_name": "Jignesh Panchal", "link": "https://stackoverflow.com/users/7888026/jignesh-panchal"}, "edited": false, "score": 0, "creation_date": 1492585815, "post_id": 43488768, "comment_id": 74032557, "body": "@JigneshPanchal - I did not say to remove <code>extern</code> from the h file. I said to add a completely independent line to the c file."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "reply_to_user": {"reputation": 1, "user_id": 7888026, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-MTnBPIq12Iw/AAAAAAAAAAI/AAAAAAAAXzw/Vq-znpyEMzM/photo.jpg?sz=128", "display_name": "Jignesh Panchal", "link": "https://stackoverflow.com/users/7888026/jignesh-panchal"}, "edited": false, "score": 1, "creation_date": 1492586037, "post_id": 43488768, "comment_id": 74032719, "body": "@JigneshPanchal there is no such thing as a class in C."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "reply_to_user": {"reputation": 1, "user_id": 7888026, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-MTnBPIq12Iw/AAAAAAAAAAI/AAAAAAAAXzw/Vq-znpyEMzM/photo.jpg?sz=128", "display_name": "Jignesh Panchal", "link": "https://stackoverflow.com/users/7888026/jignesh-panchal"}, "edited": false, "score": 1, "creation_date": 1492592867, "post_id": 43488768, "comment_id": 74037113, "body": "@JigneshPanchal - If you remove <code>extern</code> and include the header <i>only</i> in test.c, it works. If you include that version in several .c files, you will get duplicate arrays."}], "tags": [], "owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1492585585, "creation_date": 1492585585, "answer_id": 43488768, "question_id": 43488730, "link": "https://stackoverflow.com/questions/43488730/using-extern-for-creating-array-in-c/43488768#43488768", "title": "Using &#39;extern&#39; for creating array in C", "body": "<p>An <code>extern</code> declaration doesn't create the array anywhere. It's merely an instruction to the compiler/linker to look for the variable somewhere.</p>\n\n<p>You must <em>define</em> it, without <code>extern</code>, in some translation unit you will be linking your program with.</p>\n\n<p>A good candidate would seem to be <code>test.c</code>, like this:</p>\n\n<pre><code>volatile callback_task callback[10];\n\nvoid test_task(void) {\n  callback[1].count = 1;\n  callback[1].total = 2;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 0, "last_activity_date": 1492587449, "last_edit_date": 1492587449, "creation_date": 1492585640, "answer_id": 43488784, "question_id": 43488730, "link": "https://stackoverflow.com/questions/43488730/using-extern-for-creating-array-in-c/43488784#43488784", "title": "Using &#39;extern&#39; for creating array in C", "body": "<p><strong>TL;DR</strong> It's not the compiler, it's the linker complaining about the <code>callback</code> variable M.I.A. status.</p>\n\n<hr>\n\n<p>To elaborate, a statement like</p>\n\n<pre><code> extern volatile callback_task callback[10];\n</code></pre>\n\n<p>tells the compiler that \"somewhere there exists\" a variable <code>callback</code> with type <code>callback_task [10]</code>. It's a <strong>\"declaration\"</strong>, It does not \"define\" a variable on it's own. So, the existence is \"known\", not \"proven\". </p>\n\n<p>Later, while linker is searching for the \"actual\" variable, it does not get one, and hence the error.</p>\n"}], "owner": {"reputation": 1, "user_id": 7888026, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-MTnBPIq12Iw/AAAAAAAAAAI/AAAAAAAAXzw/Vq-znpyEMzM/photo.jpg?sz=128", "display_name": "Jignesh Panchal", "link": "https://stackoverflow.com/users/7888026/jignesh-panchal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 660, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1492593352, "creation_date": 1492585464, "last_edit_date": 1492593352, "question_id": 43488730, "link": "https://stackoverflow.com/questions/43488730/using-extern-for-creating-array-in-c", "title": "Using &#39;extern&#39; for creating array in C", "body": "<p>I have used <code>extern</code> for creating an array but seems it's giving me an error </p>\n\n<blockquote>\n  <p>\"undefined reference to `callback_Task'\"</p>\n</blockquote>\n\n<pre><code>// test.h\ntypedef struct {\n  uint32_t count;\n  uint32_t total;\n} callback_task;\n\nextern volatile callback_task callback[10];\n</code></pre>\n\n<p>Now in C source file</p>\n\n<pre><code>// test.c\nvoid test_task(void) {\n  callback[1].count = 1;\n  callback[1].total = 2;\n}\n</code></pre>\n\n<p>While compiling its giving an error:</p>\n\n<blockquote>\n  <p>undefined reference to `callback' at 'test_task'</p>\n</blockquote>\n"}, {"tags": ["c", "data-structures"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1492585339, "post_id": 43488676, "comment_id": 74032223, "body": "Copy the exact error into the question. No paraphrasing."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1492585359, "post_id": 43488676, "comment_id": 74032237, "body": "And is this the last function in the file?"}, {"owner": {"reputation": 57, "user_id": 6157345, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2706f915510f1968d64f20dd19130d89?s=128&d=identicon&r=PG&f=1", "display_name": "harsher", "link": "https://stackoverflow.com/users/6157345/harsher"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1492585410, "post_id": 43488676, "comment_id": 74032271, "body": "yeah, last function. Error says: &quot;Expected declaration or statement at end of input.&quot;"}, {"owner": {"reputation": 681, "user_id": 6683985, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SJocR.jpg?s=128&g=1", "display_name": "Remy J", "link": "https://stackoverflow.com/users/6683985/remy-j"}, "edited": false, "score": 0, "creation_date": 1492585418, "post_id": 43488676, "comment_id": 74032276, "body": "Hi! Can you be a little more specific on the error that you are getting?"}, {"owner": {"reputation": 639, "user_id": 6834990, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Uaxy3XKnAjs/AAAAAAAAAAI/AAAAAAAAABI/52ROGOYFmTw/photo.jpg?sz=128", "display_name": "Rajeshkumar", "link": "https://stackoverflow.com/users/6834990/rajeshkumar"}, "edited": false, "score": 0, "creation_date": 1492585440, "post_id": 43488676, "comment_id": 74032291, "body": "Can you paste your full program here"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1492585469, "post_id": 43488676, "comment_id": 74032309, "body": "Add a newline after the function"}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 3, "creation_date": 1492585564, "post_id": 43488676, "comment_id": 74032378, "body": "At first glance there is nothing wrong with this code. However, compilers can get confused from errors earlier on. Most likely a closing brace <code>}</code> is missing earlier in the source file or in an included header file."}, {"owner": {"reputation": 365, "user_id": 226142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7370130f3aac70e1f208af938e0b6af3?s=128&d=identicon&r=PG", "display_name": "FernandoZ", "link": "https://stackoverflow.com/users/226142/fernandoz"}, "edited": false, "score": 0, "creation_date": 1492585685, "post_id": 43488676, "comment_id": 74032454, "body": "Is that the actual code or autocorrect putting an uppercase on Search?"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1492586286, "post_id": 43488676, "comment_id": 74032862, "body": "You have <code>2</code> open <code>{</code> at <code>insert</code> function top."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1492587843, "post_id": 43488676, "comment_id": 74033893, "body": "If you indented your code properly you would probably not have this problem..."}], "answers": [{"tags": [], "owner": {"reputation": 4293, "user_id": 7035151, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ce9aa200c854d26a2cd263f6fc8c24eb?s=128&d=identicon&r=PG&f=1", "display_name": "Jayesh", "link": "https://stackoverflow.com/users/7035151/jayesh"}, "is_accepted": true, "score": 1, "last_activity_date": 1492587040, "last_edit_date": 1492587040, "creation_date": 1492586123, "answer_id": 43488970, "question_id": 43488676, "link": "https://stackoverflow.com/questions/43488676/c-error-expected-declaration-or-statement-at-end-of-input-in-c/43488970#43488970", "title": "C Error: Expected declaration or statement at end of input in c", "body": "<p>I have solved your syntactical errors in your code. You have added <code>{</code> twice top of <code>insert()</code> function. Also, typo mistake on <code>search()</code> and <code>insert()</code> function. </p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;stdbool.h&gt;\n#define BOOL bool\n\nstruct bstnode\n{\n    int data;\n    struct bstnode* left;\n    struct bstnode* right;\n};\nstruct bstnode* insert(struct bstnode* root,int data);\n//struct bstnode* root=NULL;\nbool search(struct bstnode* root,int data);\n\nint main()\n{\n    struct bstnode* root = NULL;\n    root = insert(root,15);\n    root = insert(root,10);\n    root = insert(root,20);\n    root = insert(root,25);\n    root = insert(root,8);\n    root = insert(root,12);\n\n    int number;\n    printf(\"Enter number be searched\\n\");\n    scanf(\"%d\",&amp;number);\n    //If number is found, print \"FOUND\"\n    search(root,number);\n    if(search(root,number) == true) printf(\"Found\\n\");\n    else printf(\"Not Found\\n\");\n}\n\nstruct bstnode* getnewnode(int data)\n{\n    struct bstnode* newnode=(struct bstnode*)malloc(sizeof(struct bstnode*));\n    newnode=(struct bstnode*)malloc(sizeof(struct bstnode*));\n    newnode-&gt;data=data;\n    newnode-&gt;left=NULL;//Initially Null, not pointing at anything\n    newnode-&gt;right=NULL;//Initially NULL, not pointing at anything\n    return newnode; //Return address of New Node\n}\n\nstruct bstnode* insert(struct bstnode* root,int data) {\n\n    if(root==NULL)//condition 1, tree is empty.\n    {\n        root=getnewnode(data);//get address of newNode in root\n    }\n\n    else if(data&lt;= root-&gt;data)\n    {\n        root-&gt;left=insert(root-&gt;left,data);\n\n    }\n    else\n    {\n        root-&gt;right=insert(root-&gt;right,data);\n    }\n    return root;\n}\n\nbool search(struct bstnode* root,int data) {\n\n    if(root == NULL) {\n        return false;\n    }\n    else if(root-&gt;data == data) {\n        return true;\n    }\n    else if(data &lt;= root-&gt;data) {\n        return search(root-&gt;left,data);\n    }\n    else\n    {\n        return search(root-&gt;right,data);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 6157345, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2706f915510f1968d64f20dd19130d89?s=128&d=identicon&r=PG&f=1", "display_name": "harsher", "link": "https://stackoverflow.com/users/6157345/harsher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 270, "favorite_count": 0, "accepted_answer_id": 43488970, "answer_count": 1, "score": -1, "last_activity_date": 1492587040, "creation_date": 1492585273, "last_edit_date": 1492586187, "question_id": 43488676, "link": "https://stackoverflow.com/questions/43488676/c-error-expected-declaration-or-statement-at-end-of-input-in-c", "title": "C Error: Expected declaration or statement at end of input in c", "body": "<p>I am not missing any } or ; then why am i getting this error?\nThe actual error says\" Expected declaration or statement at the end of input\".</p>\n\n<pre><code>bool search(struct bstnode* root,int data) {\n    if(root == NULL) {\n        return false;\n    }\n    else if(root-&gt;data == data) {\n        return true;\n    }\n    else if(data &lt;= root-&gt;data) {\n        return Search(root-&gt;left,data);\n    }\n    else { \n        return Search(root-&gt;right,data);\n    }\n}//getting error at this point\n</code></pre>\n\n<p>Full Code of the question...for Binary Search Tree, getting error in search function(below). Thanks in Advance.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;stdbool.h&gt;\n#define BOOL bool\n\nstruct bstnode{\nint data;\nstruct bstnode* left;\nstruct bstnode* right;\n};\nstruct bstnode* insert(struct bstnode* root,int data);\n//struct bstnode* root=NULL;\nbool Search(struct bstnode* root,int data);\n\nint main()\n{\nstruct bstnode* root = NULL;\nroot = Insert(root,15);\nroot = Insert(root,10);\nroot = Insert(root,20);\nroot = Insert(root,25);\nroot = Insert(root,8);\nroot = Insert(root,12);\n\nint number;\nprintf(\"Enter number be searched\\n\");\nscanf(\"%d\",&amp;number);\n//If number is found, print \"FOUND\"\nsearch(root,number);\nif(search(root,number) == true) printf(\"Found\\n\");\nelse printf(\"Not Found\\n\");\n }\n\nstruct bstnode* getnewnode(int data)\n{\nstruct bstnode* newnode=(struct bstnode*)malloc(sizeof(struct bstnode*));\nnewnode=(struct bstnode*)malloc(sizeof(struct bstnode*));\nnewnode-&gt;data=data;\nnewnode-&gt;left=NULL;//Initially Null, not pointing at anything\nnewnode-&gt;right=NULL;//Initially NULL, not pointing at anything\nreturn newnode; //Return address of New Node\n}\n\nstruct bstnode* insert(struct bstnode* root,int data) {\n{\nif(root==NULL)//condition 1, tree is empty.\n{\nroot=getnewnode(data);//get address of newNode in root\n}\n\nelse if(data&lt;= root-&gt;data)\n{\nroot-&gt;left=insert(root-&gt;left,data);\n\n}\nelse\n{\nroot-&gt;right=insert(root-&gt;right,data);\n}\nreturn root;\n}\n\nbool search(struct bstnode* root,int data) {\n\nif(root == NULL) {\nreturn false;\n}\nelse if(root-&gt;data == data) {\nreturn true;\n}\nelse if(data &lt;= root-&gt;data) {\nreturn Search(root-&gt;left,data);\n}\nelse\n{\nreturn Search(root-&gt;right,data);\n}\n}//getting error here.\n</code></pre>\n"}, {"tags": ["c", "makefile"], "answers": [{"comments": [{"owner": {"reputation": 400, "user_id": 3933263, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/478a5e32605c69508b63fc1177353bcc?s=128&d=identicon&r=PG&f=1", "display_name": "ninja.stop", "link": "https://stackoverflow.com/users/3933263/ninja-stop"}, "edited": false, "score": 0, "creation_date": 1492585240, "post_id": 43488466, "comment_id": 74032165, "body": "precise. Thanks a lot."}], "tags": [], "owner": {"reputation": 179940, "user_id": 20713, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/09b9758a4a83cc25547eb93891f19df7?s=128&d=identicon&r=PG", "display_name": "ephemient", "link": "https://stackoverflow.com/users/20713/ephemient"}, "is_accepted": true, "score": 3, "last_activity_date": 1492584697, "creation_date": 1492584697, "answer_id": 43488466, "question_id": 43488121, "link": "https://stackoverflow.com/questions/43488121/recursively-take-obj-file-for-linking/43488466#43488466", "title": "Recursively take obj file for linking", "body": "<p>Assuming you're using <a href=\"https://www.gnu.org/software/make/\" rel=\"nofollow noreferrer\">GNU make</a>,</p>\n\n<pre><code>A: $(addprefix $(OBJDIR)/,$(OBJ))\nA: $(patsubst %,$(OBJDIR)/%,$(OBJ))\nA: $(foreach obj,$(OBJ),$(OBJDIR)/$(obj))\n</code></pre>\n\n<p>will all do the same thing.</p>\n"}], "owner": {"reputation": 400, "user_id": 3933263, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/478a5e32605c69508b63fc1177353bcc?s=128&d=identicon&r=PG&f=1", "display_name": "ninja.stop", "link": "https://stackoverflow.com/users/3933263/ninja-stop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 26, "favorite_count": 0, "accepted_answer_id": 43488466, "answer_count": 1, "score": 1, "last_activity_date": 1492584697, "creation_date": 1492583588, "question_id": 43488121, "link": "https://stackoverflow.com/questions/43488121/recursively-take-obj-file-for-linking", "title": "Recursively take obj file for linking", "body": "<p>There is a small problem in Makefile. Whenever I write this, it works well</p>\n\n<pre><code>OBJDIR:=.obj\nOBJ := A.o B.o\n</code></pre>\n\n<p>.\n.\n.</p>\n\n<pre><code>A:  $(OBJDIR)/A.o $(OBJDIR)/B.o\n    $(CC) $(CFLAGS) $(INCLUDEDIR) -o $@ $^\n</code></pre>\n\n<p>The compilation goes like this ....</p>\n\n<p>.... <code>-g -O0 -DWITH_POSIX -Iinclude/ -o A .obj/A.o .obj/B.o</code></p>\n\n<p>But instead, if I write this, it wnly takes first object file</p>\n\n<pre><code>A:  $(OBJDIR)/$(OBJ)\n</code></pre>\n\n<p>The compilation then ....\n.... <code>-g -O0 -DWITH_POSIX -Iinclude/ -o A .obj/A.o B.o</code></p>\n\n<p>It should take recursively from directory. probably I am missing the correct way to handle this. Anyone have a sugestion, please let me know.</p>\n"}, {"tags": ["c", "signals"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1492583486, "post_id": 43487950, "comment_id": 74031106, "body": "Lose the <code>WNOHANG</code> and the <code>sleep()</code>.  Let the <code>waitpid()</code> block until the child dies or you get the signal.  <code>while (waitpid(cpid, &amp;status, 0) &gt; 0 || errno == EINTR) { if (g_signal_number); break; }</code> perhaps."}, {"owner": {"reputation": 775, "user_id": 4650806, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/797558543615184/picture?type=large", "display_name": "BEPP", "link": "https://stackoverflow.com/users/4650806/bepp"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1492583872, "post_id": 43487950, "comment_id": 74031337, "body": "@JonathanLeffler . I edited the quesiton.modified the signal SIGINT to SIGHUP. If parent process received SIGHUP, waidpid will set errno as EINTR ?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1492584094, "post_id": 43487950, "comment_id": 74031466, "body": "<code>EINTR</code> means a signal (any signal) was received, not that <code>SIGINT</code> specifically was received."}, {"owner": {"reputation": 4245, "user_id": 3613657, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/16dbb100614d9c85c0a1689ef29f5f43?s=128&d=identicon&r=PG&f=1", "display_name": "Mathieu Border&#233;", "link": "https://stackoverflow.com/users/3613657/mathieu-border%c3%a9"}, "edited": false, "score": 0, "creation_date": 1492586362, "post_id": 43487950, "comment_id": 74032927, "body": "<code>waitpid</code> can be restarted if you specify <code>SA_RESTART</code> when registering your signal handler."}, {"owner": {"reputation": 775, "user_id": 4650806, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/797558543615184/picture?type=large", "display_name": "BEPP", "link": "https://stackoverflow.com/users/4650806/bepp"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1492586924, "post_id": 43487950, "comment_id": 74033292, "body": "@JonathanLeffler. No , SIGHUP is not interrupting the waipid system call."}, {"owner": {"reputation": 775, "user_id": 4650806, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/797558543615184/picture?type=large", "display_name": "BEPP", "link": "https://stackoverflow.com/users/4650806/bepp"}, "reply_to_user": {"reputation": 4245, "user_id": 3613657, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/16dbb100614d9c85c0a1689ef29f5f43?s=128&d=identicon&r=PG&f=1", "display_name": "Mathieu Border&#233;", "link": "https://stackoverflow.com/users/3613657/mathieu-border%c3%a9"}, "edited": false, "score": 0, "creation_date": 1492587314, "post_id": 43487950, "comment_id": 74033530, "body": "@MathieuBorder&#233; will try SA_RESTART and update."}, {"owner": {"reputation": 775, "user_id": 4650806, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/797558543615184/picture?type=large", "display_name": "BEPP", "link": "https://stackoverflow.com/users/4650806/bepp"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1492685062, "post_id": 43487950, "comment_id": 74087540, "body": "@JonathanLeffler please refer the updated link in the question. SA_RESTART NOT SUPPORTED in all flavors of Linux."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1492714243, "post_id": 43487950, "comment_id": 74108320, "body": "From what I can see, the link mostly says &quot;the behaviour of <code>signal()</code> may have changed&quot;, and the change is to use SA_RESTART rather than not.  If you want control over signal handling, use <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/sigaction.html\" rel=\"nofollow noreferrer\"><code>sigaction()</code></a>. Other than that, I&#39;m not sure how to help you. I don&#39;t want to spend the time converting your code snippets into an MCVE (<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>) \u2014 you should provide something that serves the turn, explaining how to use it (what the user should type; what should be seen; what is seen). Add a comment to me if you update the question."}, {"owner": {"reputation": 775, "user_id": 4650806, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/797558543615184/picture?type=large", "display_name": "BEPP", "link": "https://stackoverflow.com/users/4650806/bepp"}, "edited": false, "score": 0, "creation_date": 1492739550, "post_id": 43487950, "comment_id": 74117614, "body": "Sure. I will add the working version of code."}, {"owner": {"reputation": 775, "user_id": 4650806, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/797558543615184/picture?type=large", "display_name": "BEPP", "link": "https://stackoverflow.com/users/4650806/bepp"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1492771168, "post_id": 43487950, "comment_id": 74132807, "body": "@JonathanLeffler .I added the working version of code as answer."}], "answers": [{"tags": [], "owner": {"reputation": 775, "user_id": 4650806, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/797558543615184/picture?type=large", "display_name": "BEPP", "link": "https://stackoverflow.com/users/4650806/bepp"}, "is_accepted": true, "score": 0, "last_activity_date": 1492770810, "creation_date": 1492770810, "answer_id": 43540451, "question_id": 43487950, "link": "https://stackoverflow.com/questions/43487950/how-to-handle-signals-when-process-is-waiting-in-waitpid/43540451#43540451", "title": "How to handle signals when process is waiting in waitpid?", "body": "<p>The way SA_RESTART handled is a bit implementation defined. My Linux flavor(RedHat-like distro, 2.6.39 kernel) doesn't obey SA_RESTART for waitpid system call. </p>\n\n<p>but i am able to solve this issue by setting sigaction inside signal handler.</p>\n\n<pre><code>/*\n *test_signal.c\n */\n#include &lt;signal.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/wait.h&gt;\nstatic struct sigaction sa;\n/****Set this variable when SIGHUP received****/\nvolatile sig_atomic_t g_signum = 0;\n\n/****SIGHUP HANDLER****/\nvoid sig_hup(int signum) {\n    /****Set the signal number****/\n    g_signum = signum;\n    /****Time to intrupt the system call****/\n    sigaction(SIGHUP, &amp;sa, 0);\n\n}\nint main() {\n    int status,ret;\n    pid_t child_pid;\n    sa.sa_handler = sig_hup;\n    sigemptyset(&amp;sa.sa_mask);\n    sigaction(SIGHUP, &amp;sa, 0);\n    child_pid = fork();\n    if(child_pid == 0) {\n        sleep(1);//Let the parent print the msg first\n        printf(\"pid:%d:child going to sleep in a loop\\n\",getpid());\n        while(1) {\n            sleep(10);\n        }\n    }\n    else{\n        printf(\"parent pid: %d child pid: %d\\n\",getpid(),child_pid);\n        while(1) {\n            ret=waitpid(child_pid, &amp;status, 0);\n            /*\n             *if waitpid returns -1 and errno is set to\n             *EINTR and g_signum is set,\n             *break the loop.\n             */\n            if(ret == -1 &amp;&amp; errno == EINTR &amp;&amp; g_signum) {\n                 printf(\"signal is set, so break the loop\\n\");\n                 break;\n            }\n            printf(\"waitpid restart...\\n\");\n       }\n    }\nreturn 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>-bash-4.1$ ./test_signal\nparent pid: 11122 child pid: 11123\npid:11123:child going to sleep in a loop\nsignal is set, so break the loop\n-bash-4.1$\n</code></pre>\n\n<p>Send the SIGHUP to parent:</p>\n\n<pre><code>-bash-4.1$ kill -s SIGHUP 11122\n</code></pre>\n\n<p>Strace Output:</p>\n\n<pre><code>-bash-4.1$ strace -p 11122\nProcess 11122 attached\nwait4(11123, 0x7ffca4b72c24, 0, NULL)   = ? ERESTARTSYS (To be restarted if SA_RESTART is set)\n--- SIGHUP {si_signo=SIGHUP, si_code=SI_USER, si_pid=26521, si_uid=332691} ---\nrt_sigaction(SIGHUP, {0x400714, [], SA_RESTORER, 0x33c6432660}, NULL, 8) = 0\nrt_sigreturn()                          = -1 EINTR (Interrupted system call)\nwrite(1, \"signal is set, so break the loop\"..., 33) = 33\nexit_group(0)                           = ?\n+++ exited with 0 +++\n-bash-4.1$\n</code></pre>\n"}], "owner": {"reputation": 775, "user_id": 4650806, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/797558543615184/picture?type=large", "display_name": "BEPP", "link": "https://stackoverflow.com/users/4650806/bepp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2114, "favorite_count": 1, "accepted_answer_id": 43540451, "answer_count": 1, "score": 0, "last_activity_date": 1492771537, "creation_date": 1492583059, "last_edit_date": 1495541862, "question_id": 43487950, "link": "https://stackoverflow.com/questions/43487950/how-to-handle-signals-when-process-is-waiting-in-waitpid", "title": "How to handle signals when process is waiting in waitpid?", "body": "<p>I have a parent process with a user-defined signal handler. Whenever a signal received, I set a global variable and in my main loop i am checking whether the signal is received or not before each input processing.</p>\n\n<p>I spawning a process to process the user input and use waitpid to collect the child wait status. Meanwhile if the parent process received the user-defined signal, how to handle it efficiently ? </p>\n\n<p><strong>Minimized code snip from my application</strong> </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;signal.h&gt;\n\nvolatile sig_atomic_t g_signal_number =0;\n\nvoid sig_hup_handler()\n{       \n g_signal_number = SIGHUP;\n}\n\nvoid do_process_cleanup() {\n\n  //Execute \n\n}\n\nint execute_user_input(char *str)\n{\n\n    pid_t cpid,w;\n    cpid = fork();\n    if (cpid == -1) {\n        perror(\"fork\");\n        exit(EXIT_FAILURE);\n    }\n    if (cpid == 0) { //Child may take 10-20 second to process the string.\n      execute_command(str); \n      _exit(0);\n    } else {\n       w = waitpid(cpid, &amp;status, 0); \n    }\n}\n\nmain()\n{\n  char str[1024];\n  signal(SIGHUP, sig_int_handler);\n\n  while(1) {\n\n      if(g_signal_number)\n      {\n          do_process_cleanup();\n          break;\n      }\n      get_user_input(str);\n      if(!strcmp(str,\"end\"))\n          break;\n      execute_user_input(str);\n\n  }\n      exit(0;)\n}\n</code></pre>\n\n<p>I tried the below code to fix this issue. Could someone suggest a better way to handle this problem ?</p>\n\n<pre><code>while (1) {\n\n   int ret = waitpid(cpid, &amp;status, WNOHANG);\n\n   if(ret &gt; 0)\n         break;\n   if(ret &lt; 0)\n         if(errno == EINTR)\n             continue;\n   if(g_signal_number)  // break the loop if signal recieved\n       break\n    sleep(1);\n}\n</code></pre>\n\n<p>Also tried with SA_RESTART flag, But it didn't worked in my Linux flavor for waitpid system call.</p>\n\n<pre><code>   int main() {\n   :\n   sa.sa_handler = sig_hup;\n   sigemptyset(&amp;sa.sa_mask);\n   sa.sa_flags = SA_RESTART;\n   :\n   while(1) {\n        ret=waitpid(child_pid, &amp;status, 0);\n        /*\n         *if waipid returns -1 and errno is set to\n         *EINTR and g_signum is set,\n         *break the loop.\n         */\n        if(ret == -1 &amp;&amp; errno == EINTR &amp;&amp; g_signum) {\n             printf(\"signal is set, so break the loop\\n\");\n             break;\n        }\n        printf(\"waitpid restart...\\n\");\n   }\n</code></pre>\n\n<p>From the strace output i could see, After sending SIGHUP to PID 17618 also waitpid is not interrupted.</p>\n\n<pre><code>-bash-4.1$ strace -p 17618\nProcess 17618 attached\nwait4(17619, 0x7ffc4a2e2c34, 0, NULL)   = ? ERESTARTSYS (To be restarted if SA_RESTART is set)\n--- SIGHUP {si_signo=SIGHUP, si_code=SI_USER, si_pid=26521, si_uid=332691} ---\nrt_sigreturn()                          = 61\nwait4(17619,\n</code></pre>\n\n<p><strong><em>Environment: a RedHat-like distro, 2.6.39 kernel</em></strong></p>\n\n<p><strong><em>Update</em></strong></p>\n\n<p>If someone hit this issue in future please refer the answer for <a href=\"https://stackoverflow.com/questions/23685816/why-doesnt-linux-accept-return-eintr\">Why doesn&#39;t Linux accept() return EINTR?</a>   </p>\n"}, {"tags": ["c", "arrays", "initialization"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1492581747, "post_id": 43487567, "comment_id": 74030201, "body": "What do you mean by &quot;empty&quot; array?"}, {"owner": {"reputation": 18722, "user_id": 1702943, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/nqRAA.png?s=128&g=1", "display_name": "Rao", "link": "https://stackoverflow.com/users/1702943/rao"}, "edited": false, "score": 0, "creation_date": 1492581748, "post_id": 43487567, "comment_id": 74030202, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/1559487/how-to-empty-a-char-array\">How to empty a char array?</a>"}, {"owner": {"reputation": 930, "user_id": 7800665, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cidmm.jpg?s=128&g=1", "display_name": "MrJLP", "link": "https://stackoverflow.com/users/7800665/mrjlp"}, "edited": false, "score": 0, "creation_date": 1492581760, "post_id": 43487567, "comment_id": 74030214, "body": "What do you mean by &quot;empty&quot; array? In C arrays have a defined size unlike scripting languages. It looks like you need to figure out the fundamentals"}, {"owner": {"reputation": 181, "user_id": 7830758, "user_type": "registered", "accept_rate": 14, "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCx7o0zHXX5gAfIDW7HKmVpwBPkKfd_7W5U1f1VqA=k-s128", "display_name": "banana", "link": "https://stackoverflow.com/users/7830758/banana"}, "reply_to_user": {"reputation": 930, "user_id": 7800665, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cidmm.jpg?s=128&g=1", "display_name": "MrJLP", "link": "https://stackoverflow.com/users/7800665/mrjlp"}, "edited": false, "score": 0, "creation_date": 1492581891, "post_id": 43487567, "comment_id": 74030276, "body": "@MrJLP As per my instructor: Should you be given the input 0 or 1, return an empty list (i.e., a list with length zero)."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1492581968, "post_id": 43487567, "comment_id": 74030328, "body": "Your comment indicates this is an <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY question</a>. Why not ask and provide details about what you are trying to accomplish, instead of what you think is the way to do it?"}, {"owner": {"reputation": 930, "user_id": 7800665, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cidmm.jpg?s=128&g=1", "display_name": "MrJLP", "link": "https://stackoverflow.com/users/7800665/mrjlp"}, "edited": false, "score": 0, "creation_date": 1492582009, "post_id": 43487567, "comment_id": 74030348, "body": "Return an &quot;empty list&quot; or an &quot;empty array&quot;? Yes, describe the problem you have first"}, {"owner": {"reputation": 181, "user_id": 7830758, "user_type": "registered", "accept_rate": 14, "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCx7o0zHXX5gAfIDW7HKmVpwBPkKfd_7W5U1f1VqA=k-s128", "display_name": "banana", "link": "https://stackoverflow.com/users/7830758/banana"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1492582021, "post_id": 43487567, "comment_id": 74030358, "body": "@StoryTeller Well, my instructor said Should you be given the input 0 or 1, return an empty list (i.e., a list with length zero)."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1492582101, "post_id": 43487567, "comment_id": 74030389, "body": "@JerseyFonseca - I have no idea what you should return from where. Provide details in the post, not in comments. And if you need to implement a certain behavior, give the skeleton of this behavior. It&#39;s up to you to explain yourself well, not to us to divine what you mean from obscure comments about what you instructor said."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 1, "creation_date": 1492582535, "post_id": 43487567, "comment_id": 74030602, "body": "@JerseyFonseca - You said: <code>my instructor said Should you be given the input 0 or 1, return an empty list</code>. Notice that <code>list</code> and <code>array</code> are typically different things. <code>list</code> normally refers to some sort of <code>linked list</code>. A list can be empty (aka <code>head == NULL</code>). An array can not. So maybe you misunderstood your assignment by using <code>array</code>."}, {"owner": {"reputation": 4031, "user_id": 7640269, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/szGUJ.png?s=128&g=1", "display_name": "danglingpointer", "link": "https://stackoverflow.com/users/7640269/danglingpointer"}, "edited": false, "score": 0, "creation_date": 1492584038, "post_id": 43487567, "comment_id": 74031425, "body": "You want to initialize the array with zero?"}], "answers": [{"comments": [{"owner": {"reputation": 21195, "user_id": 125507, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2a59853d36056b7a088f33c96e3a1619?s=128&d=identicon&r=PG", "display_name": "endolith", "link": "https://stackoverflow.com/users/125507/endolith"}, "edited": false, "score": 0, "creation_date": 1596123287, "post_id": 43487630, "comment_id": 111716875, "body": "Why can&#39;t you make an array with a fixed size of 0?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 21195, "user_id": 125507, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2a59853d36056b7a088f33c96e3a1619?s=128&d=identicon&r=PG", "display_name": "endolith", "link": "https://stackoverflow.com/users/125507/endolith"}, "edited": false, "score": 1, "creation_date": 1596184776, "post_id": 43487630, "comment_id": 111736907, "body": "@endolith No, C doesn&#39;t allow it. An array much have a non-zero positive size (with the only exception being <a href=\"https://en.wikipedia.org/wiki/Flexible_array_member\" rel=\"nofollow noreferrer\">a flexible array member</a>)."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 1, "last_activity_date": 1492581803, "creation_date": 1492581803, "answer_id": 43487630, "question_id": 43487567, "link": "https://stackoverflow.com/questions/43487567/how-do-i-make-an-array-empty-in-c/43487630#43487630", "title": "How do I make an array empty in C?", "body": "<p>Technically you <em>can't</em> make an array empty. An array will have a fixed size that you can not change.</p>\n\n<p>If you want to <em>reset</em> the <em>values</em> in the array, either copy from another array with default values, or loop over the array and reset each value.</p>\n"}, {"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 3, "last_activity_date": 1492583251, "last_edit_date": 1492583251, "creation_date": 1492581943, "answer_id": 43487656, "question_id": 43487567, "link": "https://stackoverflow.com/questions/43487567/how-do-i-make-an-array-empty-in-c/43487656#43487656", "title": "How do I make an array empty in C?", "body": "<p><strong>TL;DR</strong> You cannot because the requirement is invalid from C point of view. Array sizes are fixed and cannot grow or shrink whatever be the <em>usage requirement</em>.</p>\n\n<p>Quoting <code>C11</code>, chapter \u00a76.7.6.2, <em>Array declarators</em> (<em>emphasis mine</em>)</p>\n\n<blockquote>\n  <p>In addition to optional type qualifiers and the keyword static, the <code>[</code> and <code>]</code> may delimit\n  <strong>an expression or <code>*</code></strong>. If they delimit an expression (which specifies the size of an array), the\n  expression shall have an integer type. If the expression is a constant expression, it shall\n  have a value greater than zero. [...]</p>\n</blockquote>\n\n<p>Also, as per the Initialization syntax, C11, chapter \u00a76.7.9, the brace closed initializer list should have at minimum one initializer element (object). An initializer in form of <code>{ };</code> is invalid C.</p>\n\n<hr>\n\n<p>Note: </p>\n\n<p>If you meant <em>\"How do I make the contents of an array empty in C?\"</em>, well, in that case, assuming \"empty\" translates to a value of <code>0</code>, we can use <code>memset()</code> or a loop-and-assignment to get that done. This, however, makes the array contents empty, not the size of the array.</p>\n"}, {"tags": [], "owner": {"reputation": 639, "user_id": 6834990, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Uaxy3XKnAjs/AAAAAAAAAAI/AAAAAAAAABI/52ROGOYFmTw/photo.jpg?sz=128", "display_name": "Rajeshkumar", "link": "https://stackoverflow.com/users/6834990/rajeshkumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1492583052, "last_edit_date": 1492583052, "creation_date": 1492582392, "answer_id": 43487763, "question_id": 43487567, "link": "https://stackoverflow.com/questions/43487567/how-do-i-make-an-array-empty-in-c/43487763#43487763", "title": "How do I make an array empty in C?", "body": "<p>You can't free the memory of array, because it is fixed. you can set some default values like '0' using memset function.</p>\n\n<p>void *memset(void *arrptr, int value, size_t n);</p>\n\n<p>The expressions [] &amp; {} can be used at the time of declaration of array</p>\n"}, {"comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1492583304, "post_id": 43488022, "comment_id": 74031018, "body": "Do you know <code>int arr[]={};</code> is actually invalid in ISO C?"}, {"owner": {"reputation": 319, "user_id": 4318581, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-6mSOnP6l-bo/AAAAAAAAAAI/AAAAAAAAAC8/dUaIDgYAC8s/photo.jpg?sz=128", "display_name": "surendra nath", "link": "https://stackoverflow.com/users/4318581/surendra-nath"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1492583386, "post_id": 43488022, "comment_id": 74031058, "body": "According to the standards, <code>int arr[]={};</code> is invalid (only in theory). But practically, this is valid and possible. If you have executed the two cases I&#39;ve mentioned in the answer, you will understand this clearly."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1492583448, "post_id": 43488022, "comment_id": 74031086, "body": "the validity depends on your compiler, there&#39;s nothing that guarantees the correctness of the code."}, {"owner": {"reputation": 319, "user_id": 4318581, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-6mSOnP6l-bo/AAAAAAAAAAI/AAAAAAAAAC8/dUaIDgYAC8s/photo.jpg?sz=128", "display_name": "surendra nath", "link": "https://stackoverflow.com/users/4318581/surendra-nath"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1492583562, "post_id": 43488022, "comment_id": 74031147, "body": "Of course! As far as gcc 6.3.0 and earlier versions are concerned, this construct works smoothly. I have no idea about other compilers like TCC etc."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1492583806, "post_id": 43488022, "comment_id": 74031310, "body": "Thanks much for the valuable insights!! However, <a href=\"https://godbolt.org/g/3Wkw3G\" rel=\"nofollow noreferrer\">my compilation failed</a>, so I cannot run the code snippet you provided and thus failing to understand anything. Halp?"}, {"owner": {"reputation": 319, "user_id": 4318581, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-6mSOnP6l-bo/AAAAAAAAAAI/AAAAAAAAAC8/dUaIDgYAC8s/photo.jpg?sz=128", "display_name": "surendra nath", "link": "https://stackoverflow.com/users/4318581/surendra-nath"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1492584500, "post_id": 43488022, "comment_id": 74031728, "body": "In the link that you have provided, please remove all the switches <code>--pedantic -Wextra -Werror -Wall</code> in compiler options section. These switches helps performing tight compilation i.e., all the warnings are considered as errors and complete platform independent code."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1492584532, "post_id": 43488022, "comment_id": 74031750, "body": "Thanks, I&#39;ll let that advice pass. :)"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1492587631, "post_id": 43488022, "comment_id": 74033748, "body": "This doesn&#39;t compile at all with GCC configured to be a C compiler. If you configure GCC to be a something-else compiler, then any random crap might of course compile. This question is tagged C and it is not tagged GCC. Nothing in the question indicates that GCC is used."}, {"owner": {"reputation": 319, "user_id": 4318581, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-6mSOnP6l-bo/AAAAAAAAAAI/AAAAAAAAAC8/dUaIDgYAC8s/photo.jpg?sz=128", "display_name": "surendra nath", "link": "https://stackoverflow.com/users/4318581/surendra-nath"}, "edited": false, "score": 0, "creation_date": 1492589777, "post_id": 43488022, "comment_id": 74035046, "body": "May be, you need some intro to compiling a C program. You can find lot of reference on the internet. Practice them first and then try executing this, so that you don&#39;t land into your own crap anymore! :)"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1492620241, "post_id": 43488022, "comment_id": 74057346, "body": "@Lundin It&#39;s both funny and surprising how some people intentionally ignore good suggestions. :)"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1492671360, "post_id": 43488022, "comment_id": 74078379, "body": "@surendranath It is quite easy. GCC is per default set to compile either against the non-standard &quot;gnu90&quot; or against the non-standard &quot;gnu11&quot;, depending on if it is older or newer than GCC version 5.0. If you want it to be a comforming C compiler, you must compile the code as <code>gcc -std=c11 -pedantic-errors</code>, where -std=c11 is the current C standard and pedantic-errors means &quot;actually compile according to the requirements of the standard&quot;. If you do not set these, you are not using GCC as a standard C compiler, period."}], "tags": [], "owner": {"reputation": 319, "user_id": 4318581, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-6mSOnP6l-bo/AAAAAAAAAAI/AAAAAAAAAC8/dUaIDgYAC8s/photo.jpg?sz=128", "display_name": "surendra nath", "link": "https://stackoverflow.com/users/4318581/surendra-nath"}, "is_accepted": false, "score": 1, "last_activity_date": 1492583314, "last_edit_date": 1492583314, "creation_date": 1492583261, "answer_id": 43488022, "question_id": 43487567, "link": "https://stackoverflow.com/questions/43487567/how-do-i-make-an-array-empty-in-c/43488022#43488022", "title": "How do I make an array empty in C?", "body": "<p>Try executing these two cases, so that you can understand what's actually going on with gcc.</p>\n\n<p>CASE 1:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint main()\n{\n int arr[]={};\n printf(\"size:%d\\n\",sizeof(arr));\n}\n</code></pre>\n\n<p>CASE 2:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint main()\n{\n int arr[]={};\n arr[0]=100;\n printf(\"size:%d\\n%d\\n\",sizeof(arr),arr[0]);\n}\n</code></pre>\n\n<p>This is because name of an array represents the address of base element. Also, if you declare an array with particular size, you cannot define the boundaries and you can access memory even out of boundaries till the segment in which the array is declared exhausts out of memory.</p>\n\n<p>Coming to your code <code>factors[] = {};</code>, you cannot do this because this is not declaration of the array factors, though you are trying to assign no values using the {} construct. You can leave the [] empty only when you are initializing the array.</p>\n"}], "owner": {"reputation": 181, "user_id": 7830758, "user_type": "registered", "accept_rate": 14, "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCx7o0zHXX5gAfIDW7HKmVpwBPkKfd_7W5U1f1VqA=k-s128", "display_name": "banana", "link": "https://stackoverflow.com/users/7830758/banana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29131, "favorite_count": 0, "closed_date": 1492587922, "answer_count": 4, "score": 2, "last_activity_date": 1492583314, "creation_date": 1492581578, "last_edit_date": 1492582615, "question_id": 43487567, "link": "https://stackoverflow.com/questions/43487567/how-do-i-make-an-array-empty-in-c", "closed_reason": "Needs details or clarity", "title": "How do I make an array empty in C?", "body": "<p>I am trying to make an empty array. Here is my code:</p>\n\n<pre><code>if(n == 0 || n == 1)\n{\n    factors[] = {};\n}\n</code></pre>\n\n<p>However, it says that it expects an expression inside of [] and {}. What is the correct syntax to do such a thing?</p>\n"}, {"tags": ["c", "makefile", "arm", "linker-errors"], "answers": [{"comments": [{"owner": {"reputation": 1180, "user_id": 4233968, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/34a8a28a578ed988cb3b7800cc79a867?s=128&d=identicon&r=PG&f=1", "display_name": "achoora", "link": "https://stackoverflow.com/users/4233968/achoora"}, "edited": false, "score": 0, "creation_date": 1492600388, "post_id": 43489788, "comment_id": 74042477, "body": "I added new .c source files in my application I didn&#39;t add any new  library files  , in that case I don&#39;t have to build them as position independent binaries isn&#39;t it, since it was previously not there"}], "tags": [], "owner": {"reputation": 114, "user_id": 5439068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d43a19c8ed1a2c61f6698097dbde505?s=128&d=identicon&r=PG&f=1", "display_name": "Zhifei", "link": "https://stackoverflow.com/users/5439068/zhifei"}, "is_accepted": false, "score": 2, "last_activity_date": 1492588639, "creation_date": 1492588639, "answer_id": 43489788, "question_id": 43487520, "link": "https://stackoverflow.com/questions/43487520/how-to-fix-a-local-symbol-can-not-be-used-when-making-a-shared-object-error/43489788#43489788", "title": "how to fix a local symbol&#39; can not be used when making a shared object error?", "body": "<p>It depends on which kind of files are added by you into the source folder.\nFor example, if you add a new library file and that new library file is built against -fPIC build option, you may meet similar case.</p>\n\n<p>Actually, the error message gives the enough information to you how to fix it.\nIt will be OK to recompile it via \"-fPIC\" build option.</p>\n\n<ul>\n<li>If you are building via command line, appendix \"-fPIC\" in the command\nline.</li>\n<li><p>If you are building via Makefiles,  modify the makefiles as below:</p>\n\n<p>CFLAGS  +=  -fPIC</p></li>\n<li><p>For ARM Compiler, please refer to</p></li>\n</ul>\n\n<p><a href=\"http://infocenter.arm.com/help/topic/com.arm.doc.dui0804b/CHDECFHF.html?resultof=%22%2d%66%70%69%63%22%20\" rel=\"nofollow noreferrer\">http://infocenter.arm.com/help/topic/com.arm.doc.dui0804b/CHDECFHF.html?resultof=%22%2d%66%70%69%63%22%20</a></p>\n\n<ul>\n<li>For GCC Compiler, please refer to</li>\n</ul>\n\n<p><a href=\"https://gcc.gnu.org/onlinedocs/gcc/ARM-Options.html\" rel=\"nofollow noreferrer\">https://gcc.gnu.org/onlinedocs/gcc/ARM-Options.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 2875, "user_id": 1934800, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dd418bfddb2f7d81dc1d9ba06c203cc7?s=128&d=identicon&r=PG", "display_name": "TrentP", "link": "https://stackoverflow.com/users/1934800/trentp"}, "is_accepted": true, "score": 1, "last_activity_date": 1492603854, "last_edit_date": 1495539194, "creation_date": 1492603854, "answer_id": 43495369, "question_id": 43487520, "link": "https://stackoverflow.com/questions/43487520/how-to-fix-a-local-symbol-can-not-be-used-when-making-a-shared-object-error/43495369#43495369", "title": "how to fix a local symbol&#39; can not be used when making a shared object error?", "body": "<p>You should compile with -fPIC.  See <a href=\"https://stackoverflow.com/questions/13812185/how-to-recompile-with-fpic\">how to recompile with -fPIC</a></p>\n\n<p>Non-PIC code needs to be modified when it's relocated to another address.  These modifications of the binary code and data are called relocations.  There are many different types of relocations.  They might involve putting the absolute address of a symbol into a data word, or modifying some of the bits of a MOVW or MOVT instruction to place part of a constant into the instruction itself.  That latter one is your problem.</p>\n\n<p>The static linker will do all of these relocations when you link your executable.  If you use a shared library, then the dynamic linker must do them when the executable is run and dynamically linked to shared library.</p>\n\n<p>Some types of relocations, called text relocations or TEXTRELS, might not be supported by the dynamic linker.  These involve modifying the text segment, with the actual code, and putting values inside instructions.  Since it modifies the code, that part of the shared library won't be shared anymore between processes.  You're supposed to make the library position independent via -fPIC, so the dynamic linker doesn't need to do text relocations.</p>\n\n<p>It's possible that your previous code didn't cause the compiler to emit anything that needed an unsupported relocation.  And then the file you added had something in it that did.  For instance, accessing a global variable can trigger this on ARM.</p>\n\n<pre><code>int x = 1;\nvoid foo(void) { x=42; }\n</code></pre>\n\n<p>Compiles to:</p>\n\n<pre><code>    movw    r3, #:lower16:x\n    mov     r2, #42\n    movt    r3, #:upper16:x\n    str     r2, [r3]\n    bx      lr\n</code></pre>\n\n<p>The lower and upper half of the address of x need to be placed into the movw and movt instructions.  The dynamic linker doesn't support this.  If the code had been compiled with -fPIC (or -mword-relocations), the compiler would produce different output that would not need these relocations.</p>\n\n<p>\"protocol.o\" has unsupported relocations and before your change it wasn't there, or wasn't used, or didn't have them.  If libservice.a was already there, keep in mind that code from a static library is only included if it's used.  Maybe \"protocol.o\" wasn't used by anything, but whatever you added did use it.</p>\n"}], "owner": {"reputation": 1180, "user_id": 4233968, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/34a8a28a578ed988cb3b7800cc79a867?s=128&d=identicon&r=PG&f=1", "display_name": "achoora", "link": "https://stackoverflow.com/users/4233968/achoora"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9347, "favorite_count": 1, "accepted_answer_id": 43495369, "answer_count": 2, "score": 3, "last_activity_date": 1492603854, "creation_date": 1492581367, "last_edit_date": 1492581606, "question_id": 43487520, "link": "https://stackoverflow.com/questions/43487520/how-to-fix-a-local-symbol-can-not-be-used-when-making-a-shared-object-error", "title": "how to fix a local symbol&#39; can not be used when making a shared object error?", "body": "<p>My compilation of c source files  failed with the following error:</p>\n\n<blockquote>\n  <p>libservices.a(protocol.o): relocation R_ARM_MOVW_ABS_NC against `a local symbol' can not be used when making a shared object; recompile with -fPIC<br>\n  libservices.a: error adding symbols: Bad value collect2.exe:<br>\n  error: ld returned 1 exit status  </p>\n</blockquote>\n\n<p>I didn't do any changes other than adding an extra file to the source directory and things went for a toss. It was working fine without these warnings even though I have not used <code>-fPIC</code> option. Since I didn't make any make file changes I am curious to know why this error and what's the meaning of this, and how to get out of this issue. Help is appreciated.</p>\n"}, {"tags": ["c++", "c", "linux", "embedded-linux"], "comments": [{"owner": {"reputation": 1283, "user_id": 3897333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51d784367ca82572dea0a2c43217770b?s=128&d=identicon&r=PG", "display_name": "Paul Stelian", "link": "https://stackoverflow.com/users/3897333/paul-stelian"}, "edited": false, "score": 1, "creation_date": 1492578802, "post_id": 43486892, "comment_id": 74028986, "body": "Segmentation fault is SIGSEGV. SIGINT is triggered when you press Ctrl-C."}, {"owner": {"reputation": 1283, "user_id": 3897333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51d784367ca82572dea0a2c43217770b?s=128&d=identicon&r=PG", "display_name": "Paul Stelian", "link": "https://stackoverflow.com/users/3897333/paul-stelian"}, "edited": false, "score": 0, "creation_date": 1492578868, "post_id": 43486892, "comment_id": 74029012, "body": "And btw, there is the raise() system call, using kill may just be nondeterministic if kernel is buggy?"}, {"owner": {"reputation": 25, "user_id": 3505770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/364e1eabe1cc88e1adb567e705b0e343?s=128&d=identicon&r=PG&f=1", "display_name": "Bhavith C", "link": "https://stackoverflow.com/users/3505770/bhavith-c"}, "reply_to_user": {"reputation": 1283, "user_id": 3897333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51d784367ca82572dea0a2c43217770b?s=128&d=identicon&r=PG", "display_name": "Paul Stelian", "link": "https://stackoverflow.com/users/3897333/paul-stelian"}, "edited": false, "score": 0, "creation_date": 1492579040, "post_id": 43486892, "comment_id": 74029087, "body": "@PaulStelian. I have tried removing the thing you mentioned even then I am getting same result. If you want I will paste the updated code"}, {"owner": {"reputation": 1283, "user_id": 3897333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51d784367ca82572dea0a2c43217770b?s=128&d=identicon&r=PG", "display_name": "Paul Stelian", "link": "https://stackoverflow.com/users/3897333/paul-stelian"}, "edited": false, "score": 0, "creation_date": 1492579112, "post_id": 43486892, "comment_id": 74029117, "body": "It&#39;s just you are replacing the handler for the wrong signal. You should replace SIGSEGV and perhaps SIGABRT too."}, {"owner": {"reputation": 1283, "user_id": 3897333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51d784367ca82572dea0a2c43217770b?s=128&d=identicon&r=PG", "display_name": "Paul Stelian", "link": "https://stackoverflow.com/users/3897333/paul-stelian"}, "edited": false, "score": 0, "creation_date": 1492579157, "post_id": 43486892, "comment_id": 74029146, "body": "Oh I see... Then I wonder how one can ask the shell itself for the signal"}, {"owner": {"reputation": 1700, "user_id": 3517823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6ead39c453c59e5666b801a3a17919d?s=128&d=identicon&r=PG&f=1", "display_name": "Arash", "link": "https://stackoverflow.com/users/3517823/arash"}, "edited": false, "score": 0, "creation_date": 1492579221, "post_id": 43486892, "comment_id": 74029169, "body": "Why do you do this <code>kill(getpid(), signum);</code> in a signal handler? IMO, this creates an infinite loop..."}, {"owner": {"reputation": 25, "user_id": 3505770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/364e1eabe1cc88e1adb567e705b0e343?s=128&d=identicon&r=PG&f=1", "display_name": "Bhavith C", "link": "https://stackoverflow.com/users/3505770/bhavith-c"}, "reply_to_user": {"reputation": 1283, "user_id": 3897333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51d784367ca82572dea0a2c43217770b?s=128&d=identicon&r=PG", "display_name": "Paul Stelian", "link": "https://stackoverflow.com/users/3897333/paul-stelian"}, "edited": false, "score": 0, "creation_date": 1492579262, "post_id": 43486892, "comment_id": 74029184, "body": "@PaulStelian, Sorry I did not get you. I have updated the source and tested again but still same thing happening. Where do I need to replace SIGDEGV and SIGABRT"}, {"owner": {"reputation": 1283, "user_id": 3897333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51d784367ca82572dea0a2c43217770b?s=128&d=identicon&r=PG", "display_name": "Paul Stelian", "link": "https://stackoverflow.com/users/3897333/paul-stelian"}, "edited": false, "score": 1, "creation_date": 1492579290, "post_id": 43486892, "comment_id": 74029203, "body": "Beware of printf buffering behavior; you should not use printf when code is crashing. Or if you do, please also call fflush(stdout)."}, {"owner": {"reputation": 25, "user_id": 3505770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/364e1eabe1cc88e1adb567e705b0e343?s=128&d=identicon&r=PG&f=1", "display_name": "Bhavith C", "link": "https://stackoverflow.com/users/3505770/bhavith-c"}, "reply_to_user": {"reputation": 1700, "user_id": 3517823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6ead39c453c59e5666b801a3a17919d?s=128&d=identicon&r=PG&f=1", "display_name": "Arash", "link": "https://stackoverflow.com/users/3517823/arash"}, "edited": false, "score": 0, "creation_date": 1492579340, "post_id": 43486892, "comment_id": 74029224, "body": "@Arash. Now I updated the source . I was using Kill because to handle signal and to generate the coredump"}, {"owner": {"reputation": 1283, "user_id": 3897333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51d784367ca82572dea0a2c43217770b?s=128&d=identicon&r=PG", "display_name": "Paul Stelian", "link": "https://stackoverflow.com/users/3897333/paul-stelian"}, "edited": false, "score": 0, "creation_date": 1492579419, "post_id": 43486892, "comment_id": 74029250, "body": "The signal handler should cause the code to stop somehow. Perhaps _exit(1)? Or <code>raise(SIGKILL)</code>?"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "reply_to_user": {"reputation": 1283, "user_id": 3897333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51d784367ca82572dea0a2c43217770b?s=128&d=identicon&r=PG", "display_name": "Paul Stelian", "link": "https://stackoverflow.com/users/3897333/paul-stelian"}, "edited": false, "score": 3, "creation_date": 1492579474, "post_id": 43486892, "comment_id": 74029265, "body": "@PaulStelian printf/fflush all are not <a href=\"http://man7.org/linux/man-pages/man7/signal-safety.7.html\" rel=\"nofollow noreferrer\">async safe functions</a> and should not be used at all in signal handlers!"}, {"owner": {"reputation": 1283, "user_id": 3897333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51d784367ca82572dea0a2c43217770b?s=128&d=identicon&r=PG", "display_name": "Paul Stelian", "link": "https://stackoverflow.com/users/3897333/paul-stelian"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1492579539, "post_id": 43486892, "comment_id": 74029285, "body": "@Aconcagua Indeed, I just said what would be semi-ok in his case (if he does this he at least should flush). Maybe using raw blockwrites would be nicer."}, {"owner": {"reputation": 1700, "user_id": 3517823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6ead39c453c59e5666b801a3a17919d?s=128&d=identicon&r=PG&f=1", "display_name": "Arash", "link": "https://stackoverflow.com/users/3517823/arash"}, "edited": false, "score": 1, "creation_date": 1492579715, "post_id": 43486892, "comment_id": 74029350, "body": "<a href=\"http://stackoverflow.com/questions/2663456/how-to-write-a-signal-handler-to-catch-sigsegv\">How to write a signal handler to catch SIGSEGV?</a>"}, {"owner": {"reputation": 25, "user_id": 3505770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/364e1eabe1cc88e1adb567e705b0e343?s=128&d=identicon&r=PG&f=1", "display_name": "Bhavith C", "link": "https://stackoverflow.com/users/3505770/bhavith-c"}, "edited": false, "score": 0, "creation_date": 1492580029, "post_id": 43486892, "comment_id": 74029450, "body": "Hi Guys I have updated the source with simple handler and removed unnecessary code. Please review it now. Still I am getting same errors"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1492580829, "post_id": 43486892, "comment_id": 74029801, "body": "@BhavithC Have you tried to create the seg fault by simpler means? Such as <code>int* n = NULL; printf(&quot;%d&quot;, *n);</code>"}, {"owner": {"reputation": 25, "user_id": 3505770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/364e1eabe1cc88e1adb567e705b0e343?s=128&d=identicon&r=PG&f=1", "display_name": "Bhavith C", "link": "https://stackoverflow.com/users/3505770/bhavith-c"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1492583162, "post_id": 43486892, "comment_id": 74030936, "body": "@Aconcagua. I tried its working fine"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 1, "creation_date": 1492584314, "post_id": 43486892, "comment_id": 74031604, "body": "Strange is the second run. The segmentation fault seems to appear within your own code - but that could be a buffering problem. I recommend to add <code>&lt;&lt; std::flush</code> to every output at the end to exclude this possibility. And then I would attach a debugger to at least see <i>where</i> the segmentation fault occurs. That might give additional hints. I personally tried to produce kind of endless loop re-creating the seg fault <i>within the signal handler</i> - but I apparently did not get a second signal then."}, {"owner": {"reputation": 25, "user_id": 3505770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/364e1eabe1cc88e1adb567e705b0e343?s=128&d=identicon&r=PG&f=1", "display_name": "Bhavith C", "link": "https://stackoverflow.com/users/3505770/bhavith-c"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 1, "creation_date": 1492592766, "post_id": 43486892, "comment_id": 74037050, "body": "@Aconcagua Thank you very much for your hint. As you said if I run the same code for my own library then there is no issue, It is only happening with some library. My expectation is what ever the wrong code exist in library. my dlopen and dlclose should open and close with out seg fault. I will try what you said thanks for response"}], "answers": [{"tags": [], "owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "is_accepted": true, "score": 2, "last_activity_date": 1492596458, "last_edit_date": 1495541392, "creation_date": 1492596458, "answer_id": 43492584, "question_id": 43486892, "link": "https://stackoverflow.com/questions/43486892/signal-handler-not-called-for-dlopen-or-dlclose/43492584#43492584", "title": "signal handler not called for dlopen or dlclose", "body": "<blockquote>\n  <p>Problem is signal handler is not called to analyze the problem</p>\n</blockquote>\n\n<p>Your signal handler likely <strong>is</strong> called. But it likely deadlocks as it's not async-signal-safe.  <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/V2_chap02.html#tag_15_04_03\" rel=\"nofollow noreferrer\">Per POSIX</a>:</p>\n\n<blockquote>\n  <p>the behavior is undefined ... if the signal handler calls any function\n  defined in this standard other than one of the functions listed in the\n  following table.</p>\n</blockquote>\n\n<p>This code calls async-signal <strong><em>unsafe</em></strong> functions, <a href=\"https://stackoverflow.com/questions/367633/what-are-all-the-common-undefined-behaviours-that-a-c-programmer-should-know-a\">and therefore invokes undefined behavior</a>:</p>\n\n<pre><code>void  Handler(int sig)\n{\n     cout &lt;&lt; \"handler called \" &lt;&lt; strsignal(sig) &lt;&lt; endl;\n     exit(1);\n}\n</code></pre>\n\n<p><em>Only</em> async-signal-safe functions can be called from within a signal handler.</p>\n\n<p>Neither <code>exit()</code> nor <em>any</em> use of C++ streams of any type are async-signal-safe.</p>\n\n<p><a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/V2_chap02.html#tag_15_04_03\" rel=\"nofollow noreferrer\">Per POSIX, the list of async-signal-safe functions are</a>:</p>\n\n<pre><code>_Exit()\n_exit()\nabort()\naccept()\naccess()\naio_error()\naio_return()\naio_suspend()\nalarm()\nbind()\ncfgetispeed()\ncfgetospeed()\ncfsetispeed()\ncfsetospeed()\nchdir()\nchmod()\nchown()\nclock_gettime()\nclose()\nconnect()\ncreat()\ndup()\ndup2()\nexecl()\nexecle()\nexecv()\nexecve()\nfaccessat()\nfchdir()\nfchmod()\nfchmodat()\nfchown()\nfchownat()\nfcntl()\nfdatasync()\nfexecve()\nffs()\nfork()\nfstat()\nfstatat()\nfsync()\nftruncate()\nfutimens()\ngetegid()\ngeteuid()\ngetgid()\ngetgroups()\ngetpeername()\ngetpgrp()\ngetpid()\ngetppid()\ngetsockname()\ngetsockopt()\ngetuid()\nhtonl()\nhtons()\nkill()\nlink()\nlinkat()\nlisten()\nlongjmp()\nlseek()\nlstat()\nmemccpy()\nmemchr()\nmemcmp()\nmemcpy()\nmemmove()\nmemset()\nmkdir()\nmkdirat()\nmkfifo()\nmkfifoat()\nmknod()\nmknodat()\nntohl()\nntohs()\nopen()\nopenat()\npause()\npipe()\npoll()\nposix_trace_event()\npselect()\npthread_kill()\npthread_self()\npthread_sigmask()\nraise()\nread()\nreadlink()\nreadlinkat()\nrecv()\nrecvfrom()\nrecvmsg()\nrename()\nrenameat()\nrmdir()\nselect()\nsem_post()\nsend()\nsendmsg()\nsendto()\nsetgid()\nsetpgid()\nsetsid()\nsetsockopt()\nsetuid()\nshutdown()\nsigaction()\nsigaddset()\nsigdelset()\nsigemptyset()\nsigfillset()\nsigismember()\nsiglongjmp()\nsignal()\nsigpause()\nsigpending()\nsigprocmask()\nsigqueue()\nsigset()\nsigsuspend()\nsleep()\nsockatmark()\nsocket()\nsocketpair()\nstat()\nstpcpy()\nstpncpy()\nstrcat()\nstrchr()\nstrcmp()\nstrcpy()\nstrcspn()\nstrlen()\nstrncat()\nstrncmp()\nstrncpy()\nstrnlen()\nstrpbrk()\nstrrchr()\nstrspn()\nstrstr()\nstrtok_r()\nsymlink()\nsymlinkat()\ntcdrain()\ntcflow()\ntcflush()\ntcgetattr()\ntcgetpgrp()\ntcsendbreak()\ntcsetattr()\ntcsetpgrp()\ntime()\ntimer_getoverrun()\ntimer_gettime()\ntimer_settime()\ntimes()\numask()\nuname()\nunlink()\nunlinkat()\nutime()\nutimensat()\nutimes()\nwait()\nwaitpid()\nwcpcpy()\nwcpncpy()\nwcscat()\nwcschr()\nwcscmp()\nwcscpy()\nwcscspn()\nwcslen()\nwcsncat()\nwcsncmp()\nwcsncpy()\nwcsnlen()\nwcspbrk()\nwcsrchr()\nwcsspn()\nwcsstr()\nwcstok()\nwmemchr()\nwmemcmp()\nwmemcpy()\nwmemmove()\nwmemset()\nwrite()\n</code></pre>\n\n<p>Note that Linux is not POSIX-compliant here.  <a href=\"https://sourceware.org/bugzilla/show_bug.cgi?id=4737\" rel=\"nofollow noreferrer\">On Linux, <code>fork()</code> is broken and is <em>not</em> async-signal-safe.</a></p>\n"}], "owner": {"reputation": 25, "user_id": 3505770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/364e1eabe1cc88e1adb567e705b0e343?s=128&d=identicon&r=PG&f=1", "display_name": "Bhavith C", "link": "https://stackoverflow.com/users/3505770/bhavith-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 621, "favorite_count": 0, "accepted_answer_id": 43492584, "answer_count": 1, "score": 2, "last_activity_date": 1492596458, "creation_date": 1492578699, "last_edit_date": 1492580314, "question_id": 43486892, "link": "https://stackoverflow.com/questions/43486892/signal-handler-not-called-for-dlopen-or-dlclose", "title": "signal handler not called for dlopen or dlclose", "body": "<p>I am receiving segmentation fault in random time.<br>\nI registered the signal but signal handler not called when segmentation fault occurred    </p>\n\n<pre><code>#include &lt;unistd.h&gt;\n#include &lt;dlfcn.h&gt;\n#include &lt;iostream&gt;\n#include &lt;signal.h&gt;\n#include &lt;execinfo.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n\nusing namespace std;\n\nvoid  Handler(int sig)\n{\n     cout &lt;&lt; \"handler called \" &lt;&lt; strsignal(sig) &lt;&lt; endl;\n     exit(1);\n}\n\n\nint main()\n{\n    cout &lt;&lt; \"Testing crash !\" &lt;&lt; endl;\n\n    signal(SIGSEGV, Handler);\n    signal(SIGINT, Handler);\n    signal(SIGABRT, Handler);\n    for (int i = 0; i &lt; 10; i++)\n    {\n        cout &lt;&lt; i &lt;&lt; \" Before open\" &lt;&lt; endl;\n        void *handler = dlopen(\"/home/user/Test.so\", RTLD_LAZY);\n        if (handler)\n        {\n            cout &lt;&lt; i &lt;&lt; \" Before close\" &lt;&lt; endl;\n            dlclose(handler);\n            cout &lt;&lt; i &lt;&lt; \" After close\" &lt;&lt; endl;\n        }\n        else\n        {\n            cout &lt;&lt; \"Error \" &lt;&lt; dlerror() &lt;&lt; endl;\n        }\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Output:<br>\nRun1</p>\n\n<pre><code>Testing crash !\n0 Before open\n0 Before close\n0 After close\n1 Before open\n1 Before close\nSegmentation fault (core dumped)\n</code></pre>\n\n<p>Run2 </p>\n\n<pre><code>0 Before open\n0 Before close\n0 After close\n1 Before open\n1 Before close\n1 After close\nSegmentation fault (core dumped)\n</code></pre>\n\n<p>Problem is signal handler is not called to analyze the problem </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1492578854, "post_id": 43486865, "comment_id": 74029001, "body": "<i>// Retrieve up to 16 characters (plus the null terminator) getString(arr, 16 + 1);</i> But <code>arr</code> size is <b>16</b>."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1492578908, "post_id": 43486865, "comment_id": 74029033, "body": "where is <code>getString()</code>?"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1492579119, "post_id": 43486865, "comment_id": 74029121, "body": "@SouravGhosh maybe a part of <i>#include &lt;learncs.h&gt;</i> I can&#39;t find any documentation on it."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 5, "creation_date": 1492579120, "post_id": 43486865, "comment_id": 74029122, "body": "<code>if(arr[i] == &#39;a&#39; || &#39;e&#39; || &#39;i&#39; || &#39;o&#39; || &#39;u&#39;)</code> This will not work as expected."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1492579388, "post_id": 43486865, "comment_id": 74029237, "body": "<code>arr[i] = i + 1;</code> is wrong. Also It is necessary to decrease <code>len</code> according to the removed character."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1492579504, "post_id": 43486865, "comment_id": 74029277, "body": "Instead of shifting back everytime why don&#39;t you create a copy and fill it with non vowels? Will save so much time."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1492579944, "post_id": 43486865, "comment_id": 74029425, "body": "<code>char    arr[16];</code> and <code>getString(arr, 16 + 1);</code> looks suspicious. <code>arr</code> will only hold <code>15-char</code> + <code>nul-byte</code>. If you write <code>16+nul-byte</code> (<code>17-chars</code>) to <code>arr</code>, you have written beyond the bounds of <code>arr</code> and have invoked <b>Undefined Behavior</b>."}], "answers": [{"tags": [], "owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "is_accepted": false, "score": 0, "last_activity_date": 1492581570, "last_edit_date": 1492581570, "creation_date": 1492579718, "answer_id": 43487100, "question_id": 43486865, "link": "https://stackoverflow.com/questions/43486865/exercise-magic-number-removing-vowels/43487100#43487100", "title": "Exercise Magic number / removing vowels", "body": "<p>You can write your removeVowels function this way -</p>\n\n<pre><code>int removeVowels(char arr[]) {\n    char *temp = malloc(strlen(arr) + 1);\n    int i;\n    int total = 0;\n    int pos = 0;\n    for ( i = 0; arr[i] != '\\0'; i++) {\n        if (arr[i] == 'a' || arr[i] == 'e' || arr[i] == 'o' || arr[i] == 'i' || arr[i] == 'u')\n             total++;\n        else\n             temp[pos++] = arr[i]; \n    }\n    temp[pos] = '\\0';\n    strcpy(arr, temp);\n    free(temp);\n    return total;\n}\n</code></pre>\n\n<p>Here instead of looking for the vowels and shifting back when we see a new one, we create another array. And copy only the non vowels characters into it. Finally we copy the temporary string back to the original string.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7860218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/442600f44e2134193f68b0a73b86e1ee?s=128&d=identicon&r=PG&f=1", "display_name": "devarshi.patel", "link": "https://stackoverflow.com/users/7860218/devarshi-patel"}, "is_accepted": false, "score": 0, "last_activity_date": 1492580563, "last_edit_date": 1492580563, "creation_date": 1492580027, "answer_id": 43487171, "question_id": 43486865, "link": "https://stackoverflow.com/questions/43486865/exercise-magic-number-removing-vowels/43487171#43487171", "title": "Exercise Magic number / removing vowels", "body": "<p>Try to print address of both <code>arr</code> and <code>magic</code>, may be <code>NULL</code> is overlapped on the <code>magic</code> variable.</p>\n"}], "owner": {"reputation": 37, "user_id": 7578282, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/0210ac3521cff4de49dd1283f82dada7?s=128&d=identicon&r=PG&f=1", "display_name": "Bill", "link": "https://stackoverflow.com/users/7578282/bill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 143, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1492581570, "creation_date": 1492578548, "question_id": 43486865, "link": "https://stackoverflow.com/questions/43486865/exercise-magic-number-removing-vowels", "title": "Exercise Magic number / removing vowels", "body": "<p>I'm trying to complete two exercises and I'm currently facing issues with exercise 2 and 4. </p>\n\n<p>In exercise 2 the issue is when magic is printed the first time its value is 42, once a character string is entered that is 16 in length then magic changes to 0, but if less than 16 length then magic stays 42. Why?</p>\n\n<p>In exercise 4 I'm trying to add a feature to this program that deletes all vowels and then outputs the amount deleted and the new string. However I am not sure If I am on the right track.</p>\n\n<p>Code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;learncs.h&gt;\n\n// FORWARD DECLARATIONS\nvoid exercise2(void);\nvoid exercise3(void);\nvoid exercise4(void);\nint stringLength(char arr[]);\nint countSpaces(char arr[]);\nvoid removeVowels(char arr[]);\n\n\n// main()\n// Do not change this function at all.\nint main(int argc, char * argv[])\n{\nexercise2();\nexercise3();\nexercise4();\nprintf(\"\\n\");\nreturn 0;\n}\n\n\nvoid exercise2(void)\n{\nchar    arr[16];\nint     magic = 42;\n\nprintf(\"\\n--------------------\\n\");\nprintf(\"EXERCISE 2\\n\");\nprintf(\"--------------------\\n\\n\");\n\n// Print out the magic value\nprintf(\"magic = %d\\n\", magic);\n\n// Prompt for string input\nprintf(\"Enter a character string: \");\n\n// Retrieve up to 16 characters (plus the null terminator)\ngetString(arr, 16 + 1);\nprintf(\"The length of string [%s] is %d\\n\", arr, stringLength(arr));\n\n// Print out the magic value again\nprintf(\"magic = %d\\n\", magic);\n\n/*\n    Provide the Exercise 2a explanation here, in this comment:\n\n    When the string is equal to 16 characters magic becomes 0. When the string is not equal to 16 characters\n    magic stays as 42. Im not sure why...\n*/\n\n}\n\n\nvoid exercise3(void)\n{\nint         spaces;\nchar        string[] =\n  \"This is a test of the emergency broadcasting system. This is only a test.\";\n\nprintf(\"\\n--------------------\\n\");\nprintf(\"EXERCISE 3\\n\");\nprintf(\"--------------------\\n\\n\");\n\n// Count the number of spaces in the string.\nspaces = countSpaces(string);\n\n// The original countSpaces() function you are given simply returns -1.\n// If it still does that, it just means that you haven't yet implemented\n// the countSpaces() function according to the Exercise 2 instructions.\nif (spaces == -1)\n{\n    printf(\"This exercise has not been completed yet.\\n\");\n}\nelse\n{\n    printf(\"The number of spaces in [%s] is %d\\n\", string, spaces);\n}\n}\n\n\nvoid exercise4(void)\n{\nint         removed;\nchar        string[] =\n  \"This is a test of the emergency broadcasting system. This is only a test.\";\n\nprintf(\"\\n--------------------\\n\");\nprintf(\"EXERCISE 4\\n\");\nprintf(\"--------------------\\n\\n\");\n\n// Count the number of spaces in the string.\nremoved = removeVowels(string);\n\n// The original removeVowels() function you are given simply returns -1.\n// If it still does that, it just means that you haven't yet implemented\n// the countSpaces() function according to the Exercise 2 instructions.\nif (removed == -1)\n{\n    printf(\"This exercise has not been completed yet.\\n\");\n}\nelse\n{\n    printf(\"%d vowels were removed, yielding [%s]\\n\", removed, string);\n}\n}\n\n\n /**\n * Calculate the length of a character string\n *\n * @param arr\n *   The address of the first element of an array of characters containing\n *   the string.\n *\n * @return\n *   The number of characters in the string, not including the string's\n *   null terminator.\n */\n int stringLength(char arr[])\n {\nint     len;\n\n// Assume initially that the array is length 0.\nlen = 0;\n\n// Look at each element of the array. If we find something other than\n// the null terminator, count this character by incrementing the length\n// variable.\nwhile (arr[len] != '\\0')\n{\n    // This character wasn't the null terminator, so increment the length\n    ++len;\n}\n\n// Give 'em the calculated string length\nreturn len;\n}\n\n\n/**\n* Count the number of space characters in a string.\n*\n* @param arr\n*   The address of the first element of an array of characters containing\n*   the string.\n*\n* @return\n*   The number of space characters in the string.\n*/\nint countSpaces(char arr[])\n{\nint i, len;\nint num = 0;\n\nlen = 0;\nwhile (arr[len] != '\\0')\n{\n    ++len;\n}\n\nfor(i = 0; i &lt; len; i++)\n{\n    if(arr[i] == ' ')\n    {\n        (num)++;\n    }\n}\nreturn num;\n}\n\n\n/**\n* \"Remove\" each vowel from the provided character array, moving all\n* subsequent characters forward in the array to take up the space of the\n* removed vowel. Only the following characters are considered to be vowels:\n* 'a', 'e', 'i', 'o', and 'u'\n*\n* @param arr\n*   The address of the first element of an array of characters containing\n*   the string whose vowels are to be removed.\n*\n* @return\n*   The number of vowels removed from the provided string.\n*/\nint removeVowels(char arr[])\n{\nint i, len = 0, removed = 0;\n\nwhile (arr[len] != '\\0')\n{\n    ++len;\n}\n\nfor(i = 0; i &lt; len; i++)\n{\n if(arr[i] == 'a' || 'e' || 'i' || 'o' || 'u')\n {\n    removed++;\n    for(i = 0; i &lt; len; i++)\n    {\n        arr[i] = i + 1;\n    }\n }\n}\nreturn removed;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 3, "creation_date": 1492577432, "post_id": 43486612, "comment_id": 74028473, "body": "Use <code>_Generic()</code>"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 3, "creation_date": 1492578029, "post_id": 43486612, "comment_id": 74028714, "body": "<code>a</code> is a 2D array, <code>b</code> is an <i>array of pointers to char</i> <code>[4]</code>, <code>c</code> is a <i>pointer-to-pointer-to-char</i> all are distinct and different as you note. However, there is no <i>&quot;test&quot;</i> to determine between the three. You keep track of what you have and you properly pass and return the type needed. With C11, you can take chux correct advice, otherwise, it&#39;s up to you."}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1492580724, "post_id": 43486612, "comment_id": 74029755, "body": "@chux-- <code>_Generic()</code> wouldn&#39;t distinguish between <code>char *b[4]</code> and <code>char **c</code>, since <code>b</code> decays to <code>char **</code> in the expression passed to <code>_Generic()</code>; or am I missing something?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1492616269, "post_id": 43486612, "comment_id": 74054621, "body": "@DavidBowling Solution posted below. It uses the type of the address of the object, avoiding the conversion."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1492617847, "post_id": 43486612, "comment_id": 74055738, "body": "Look at the declaration. The type is there."}, {"owner": {"reputation": 842, "user_id": 6572460, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3c0888e8617ae4a4c18fc6b3cba6d517?s=128&d=identicon&r=PG&f=1", "display_name": "Nguai al", "link": "https://stackoverflow.com/users/6572460/nguai-al"}, "edited": false, "score": 0, "creation_date": 1492618014, "post_id": 43486612, "comment_id": 74055853, "body": "@n..m. - Yes!  Absolutely..  But I was just curious to find out if there is a way without looking at the declaration."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1492643895, "post_id": 43486612, "comment_id": 74069844, "body": "You may find the ideas on this thread useful: <a href=\"http://stackoverflow.com/questions/16794900/validate-an-argument-is-array-type-in-c-c-macro-on-compile-time\" title=\"validate an argument is array type in c c macro on compile time\">stackoverflow.com/questions/16794900/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 5219, "user_id": 1166774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2186f597c73ae03edf7912fa5ec93cc7?s=128&d=identicon&r=PG&f=1", "display_name": "LoztInSpace", "link": "https://stackoverflow.com/users/1166774/loztinspace"}, "is_accepted": false, "score": 0, "last_activity_date": 1492577744, "creation_date": 1492577744, "answer_id": 43486716, "question_id": 43486612, "link": "https://stackoverflow.com/questions/43486612/how-can-you-tell-whether-a-variable-is-a-2d-array-array-of-pointers-or-double-p/43486716#43486716", "title": "How can you tell whether a variable is a 2D array, array of pointers or double pointers of char?", "body": "<p>I don't think there is reliably.  If you know quite a lot about your compiler you might be able to infer</p>\n\n<p><code>&amp;a[0][0]</code> will be 16 , 16*2 or maybe 16*4 bytes away from <code>&amp;a[3][3]</code></p>\n\n<p><code>&amp;b[0][0]</code> will be 4, 4*2 or 4*4 bytes away from <code>b[0][3]</code></p>\n\n<p>leaving anything else to be <code>c</code></p>\n\n<p>But the complier would have to know to make them usable anyway so you most likely could not use them interchangeably without ignoring compile time warnings.</p>\n"}, {"comments": [{"owner": {"reputation": 15921, "user_id": 676558, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/PbWyu.png?s=128&g=1", "display_name": "Amin Negm-Awad", "link": "https://stackoverflow.com/users/676558/amin-negm-awad"}, "edited": false, "score": 0, "creation_date": 1492578242, "post_id": 43486769, "comment_id": 74028789, "body": "This does not work, if the size of an array of &quot;values&quot; equals the size of an array of pointers, because the value type has the same size pointers have (I. e. on most platforms <code>long</code> and <code>whatevertype*</code>)."}], "tags": [], "owner": {"reputation": 1, "user_id": 7860218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/442600f44e2134193f68b0a73b86e1ee?s=128&d=identicon&r=PG&f=1", "display_name": "devarshi.patel", "link": "https://stackoverflow.com/users/7860218/devarshi-patel"}, "is_accepted": false, "score": -2, "last_activity_date": 1492641779, "last_edit_date": 1492641779, "creation_date": 1492578008, "answer_id": 43486769, "question_id": 43486612, "link": "https://stackoverflow.com/questions/43486612/how-can-you-tell-whether-a-variable-is-a-2d-array-array-of-pointers-or-double-p/43486769#43486769", "title": "How can you tell whether a variable is a 2D array, array of pointers or double pointers of char?", "body": "<p>By using <code>sizeof()</code> you can differentiate this variables, because  <code>sizeof()</code> will give different size for different variables. Hope this helps you.</p>\n"}, {"tags": [], "owner": {"reputation": 15921, "user_id": 676558, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/PbWyu.png?s=128&g=1", "display_name": "Amin Negm-Awad", "link": "https://stackoverflow.com/users/676558/amin-negm-awad"}, "is_accepted": false, "score": 1, "last_activity_date": 1492578062, "creation_date": 1492578062, "answer_id": 43486777, "question_id": 43486612, "link": "https://stackoverflow.com/questions/43486612/how-can-you-tell-whether-a-variable-is-a-2d-array-array-of-pointers-or-double-p/43486777#43486777", "title": "How can you tell whether a variable is a 2D array, array of pointers or double pointers of char?", "body": "<p>Yes, it is dangerous the way you do it, because you should not make assumptions about allocations. Likely if the array of pointers has pointers pointing to local variable \u2013 what is completely legal \u2013 you might have a layout equal to the layout of an array of ints.</p>\n\n<p>You have to differ between two situations:</p>\n\n<p>A. Dynamic evaluation</p>\n\n<p>The C runtime is very small. Especially there is no runtime type information. Therefore it is not possible solely with the capabilities of the language, to get the type of an object that is referred at runtime. </p>\n\n<p>B. Static evaluation</p>\n\n<p>But your example looks like you want to determine the type of an object at compile time. C11 supports <code>_Generic</code> for that. It is like a <code>switch</code>, but not evaluating an ordinary expression having value <code>case</code>s, but working over types.</p>\n\n<p><a href=\"http://www.open-std.org/JTC1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">C11 Draft, 6.5.1.1</a></p>\n"}, {"comments": [{"owner": {"reputation": 3805, "user_id": 247643, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8e9927c1955a6b0497cf6c13d9a7b403?s=128&d=identicon&r=PG", "display_name": "doynax", "link": "https://stackoverflow.com/users/247643/doynax"}, "edited": false, "score": 0, "creation_date": 1492619027, "post_id": 43500229, "comment_id": 74056555, "body": "Useful? Perhaps. I gather the rationale was to support function overloads. Fair enough, but if so then pick then a straightforward and unambiguous language feature <i>of that</i>. Because if the idea was introduce additional meta-programming facilities to a language like C then you had better be sure to at least have all of the kinks worked out prior to inclusion. &lt;/rant&gt;"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 3805, "user_id": 247643, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8e9927c1955a6b0497cf6c13d9a7b403?s=128&d=identicon&r=PG", "display_name": "doynax", "link": "https://stackoverflow.com/users/247643/doynax"}, "edited": false, "score": 0, "creation_date": 1492619681, "post_id": 43500229, "comment_id": 74056994, "body": "@doynax My experience with various compilers is that there are some subtle implementation differences.  Not so much due to the compiler getting it wrong as much as the C spec lacking precision.  Typically a future version will sort of these nuanced details.  It is hard to get all the kinks worked out prior to introduction.  OTOH, C is rarely the language that is evolving fast given is huge legacy code base."}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 1, "creation_date": 1492621102, "post_id": 43500229, "comment_id": 74057936, "body": "@chux-- (smack self on forehead) nice trick. Perhaps this should be the accepted answer."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 3805, "user_id": 247643, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8e9927c1955a6b0497cf6c13d9a7b403?s=128&d=identicon&r=PG", "display_name": "doynax", "link": "https://stackoverflow.com/users/247643/doynax"}, "edited": false, "score": 2, "creation_date": 1492644409, "post_id": 43500229, "comment_id": 74069987, "body": "@doynax unfortunately _Generic does have some kinks... there have been commitee clarifications on it post-C11, e.g. whether array-pointer decay is applied to the argument, whether qualifiers are dropped from rvalue arguments"}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 4, "last_activity_date": 1492617537, "last_edit_date": 1492617537, "creation_date": 1492616205, "answer_id": 43500229, "question_id": 43486612, "link": "https://stackoverflow.com/questions/43486612/how-can-you-tell-whether-a-variable-is-a-2d-array-array-of-pointers-or-double-p/43500229#43500229", "title": "How can you tell whether a variable is a 2D array, array of pointers or double pointers of char?", "body": "<blockquote>\n  <p>How can you tell whether a variable is a 2D array, array of pointers or double pointers of char?</p>\n</blockquote>\n\n<p>There <em>is</em> a way to distinguish <em>type</em>.<br>\nNote that \"2D array\" is not a type - more like a classification of types.<br>\n\"double pointers of char\" can be consider to be the type <code>char **</code></p>\n\n<p>Pass the address of the object to <code>_Generic()</code>.</p>\n\n<pre><code>#define xtype(X) _Generic((&amp;X), \\\n    char (*)[4][4]: \"char [4][4]\", \\\n    char *(*)[4]  : \"char *[4]\", \\\n    char ***      : \"char **\", \\\n    char (*)[4]   : \"char [4]\", \\\n    char **       : \"char *\", \\\n    char *        : \"char\", \\\n    default       : \"?\" \\\n)\n\nint main(void) {\n  char a[4][4];\n  char *b[4];\n  char **c;\n  puts(xtype(a));\n  puts(xtype(b));\n  puts(xtype(c));\n  puts(xtype(a[0]));\n  puts(xtype(b[0]));\n  puts(xtype(c[0]));\n  puts(xtype(a[0][0]));\n  puts(xtype(b[0][0]));\n  puts(xtype(c[0][0]));\n}\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>char [4][4]\nchar *[4]\nchar **\nchar [4]\nchar *\nchar *\nchar\nchar\nchar\n</code></pre>\n\n<hr>\n\n<p><code>_Generic()</code> is a useful addition to C and some of its details and proper application are still challenging.  I hope the above allows at least a partial ability for OP to distinguish objects.</p>\n\n<p>Interestingly, I was able  to use a more generic <code>_Generic</code> as below with equal distinguishably amongst <code>a,b,c</code>.  I am wary of some aspects of <code>_Generic</code> as I suspect implementation defined behavior.</p>\n\n<pre><code>#define xtype(X) _Generic((&amp;X), \\\n    char (*)[][4] : \"char [][4]\", \\\n    char *(*)[]   : \"char *[]\", \\\n    char ***      : \"char **\", \\\n    char (*)[]    : \"char []\", \\\n    char **       : \"char *\", \\\n    char *        : \"char\", \\\n    default       : \"?\" \\\n)\n</code></pre>\n"}], "owner": {"reputation": 842, "user_id": 6572460, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3c0888e8617ae4a4c18fc6b3cba6d517?s=128&d=identicon&r=PG&f=1", "display_name": "Nguai al", "link": "https://stackoverflow.com/users/6572460/nguai-al"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "accepted_answer_id": 43500229, "answer_count": 4, "score": 4, "last_activity_date": 1492641779, "creation_date": 1492577235, "question_id": 43486612, "link": "https://stackoverflow.com/questions/43486612/how-can-you-tell-whether-a-variable-is-a-2d-array-array-of-pointers-or-double-p", "title": "How can you tell whether a variable is a 2D array, array of pointers or double pointers of char?", "body": "<p>Lets say we have 3 variables:</p>\n\n<pre><code> char a[4][4];\n char *b[4];\n char **c;\n</code></pre>\n\n<p>Lets say all of the above variables have correctly assigned values.\nThere is no code errors. </p>\n\n<p>All of these variables can print their values using [] operator like below:</p>\n\n<pre><code>for( i=0; i&lt;4; i++){\n    printf( \"%s\\n\", a[i] );\n}\nfor( i=0; i&lt;4; i++){\n    printf( \"%s\\n\", b[i] );\n}\nfor( i=0; i&lt;4; i++){\n    printf( \"%s\\n\", c[i] );\n</code></pre>\n\n<p>Just looking at these print statements there is no way to identify its true datatypes.\nHow to  identify its variable datatypes?</p>\n\n<p>One idea I had was to print out the memory addresses of each index.\nWith  2-D array, the memory address should be separated with equal distance from each other.  But with pointer of array, I expected the memory addresses to be not uniformly spatially distant from each other.\nIs there a better way to find out datatypes of these variables? </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 3, "creation_date": 1492576363, "post_id": 43486397, "comment_id": 74028119, "body": "Show the exact input and output that you supply  , the code looks OK from here. Maybe you are mistaken about what the output actually is"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 2, "creation_date": 1492576378, "post_id": 43486397, "comment_id": 74028130, "body": "You will replace each <code>&#39;\\t&#39;</code> with <code>4-spaces</code>, but you may have existing <code>spaces</code> next to your <code>&#39;\\t&#39;</code> that makes it look like your replacement <code>space</code> count is off. It&#39;s either <code>&#39;\\t&#39;</code> which is replaced, or it&#39;s not, so your code looks right in that sense."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1492576511, "post_id": 43486397, "comment_id": 74028161, "body": "Your program works for me exactly as it seems it should.  The input is echoed to the output, with each tab character converted to four space characters.  Including when multiple tabs are adjacent to each other in the input."}, {"owner": {"reputation": 639, "user_id": 6834990, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Uaxy3XKnAjs/AAAAAAAAAAI/AAAAAAAAABI/52ROGOYFmTw/photo.jpg?sz=128", "display_name": "Rajeshkumar", "link": "https://stackoverflow.com/users/6834990/rajeshkumar"}, "edited": false, "score": 0, "creation_date": 1492577024, "post_id": 43486397, "comment_id": 74028326, "body": "Yes, Your code is works fine for me."}], "answers": [{"tags": [], "owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "is_accepted": false, "score": 0, "last_activity_date": 1492576935, "creation_date": 1492576935, "answer_id": 43486553, "question_id": 43486397, "link": "https://stackoverflow.com/questions/43486397/why-is-my-c-program-to-replaces-tabs-with-the-right-amount-of-spaces-not-working/43486553#43486553", "title": "Why is my C program to replaces tabs with the right amount of spaces not working when I enter 2 or more consecutive tabs", "body": "<p>Your program works fine.</p>\n\n<p>Most likely (like on my system), tabs are represented larger than 4 spaces on your console (on mine, tabs are 8 spaces large). In such a case, your output can appear shorter than your input:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>-&gt;      leading tab, as large as 8 spaces\n....converted to four spaces\n</code></pre>\n\n<p>Sure, this will not apply always, as tabs have fixed positions (first line shows where a tab will place the subsequent characters):</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>********++++++++********+++++++\nhello-&gt; world\nhello....world (not shortened this time)\n\n********++++++++********+++++++\nhello-&gt; -&gt;      world (consecutive tabs again)\nhello........world\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 755, "user_id": 6139796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70e8ec623799f48125b0aa020475091d?s=128&d=identicon&r=PG", "display_name": "Holger", "link": "https://stackoverflow.com/users/6139796/holger"}, "is_accepted": true, "score": 0, "last_activity_date": 1492586484, "creation_date": 1492586484, "answer_id": 43489088, "question_id": 43486397, "link": "https://stackoverflow.com/questions/43486397/why-is-my-c-program-to-replaces-tabs-with-the-right-amount-of-spaces-not-working/43489088#43489088", "title": "Why is my C program to replaces tabs with the right amount of spaces not working when I enter 2 or more consecutive tabs", "body": "<p>If you expand with spaces to the next tab stop, it would be better.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\nint main(void)\n{\n    int ch;\n    int i=0,col=0;\n\n    while((ch=getchar()) !=EOF) {\n        if(ch=='\\t') {\n            for(i=0;i&lt;4;i++) {\n                putchar(' ');\n                col++;\n                if((col%4)==0) break;\n            }\n        }\n        else {\n            putchar(ch);\n            if(ch=='\\n' || ch=='\\r') col=0;\n            else col++;\n        }\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 343, "user_id": 7808417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05019c604ed3f7a6be7ac0d73c519cd8?s=128&d=identicon&r=PG&f=1", "display_name": "Simple ", "link": "https://stackoverflow.com/users/7808417/simple"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "closed_date": 1492594591, "accepted_answer_id": 43489088, "answer_count": 2, "score": 0, "last_activity_date": 1492586484, "creation_date": 1492576129, "last_edit_date": 1492577142, "question_id": 43486397, "link": "https://stackoverflow.com/questions/43486397/why-is-my-c-program-to-replaces-tabs-with-the-right-amount-of-spaces-not-working", "closed_reason": "Not suitable for this site", "title": "Why is my C program to replaces tabs with the right amount of spaces not working when I enter 2 or more consecutive tabs", "body": "<p>If I enter one tab the spacing is correct so why is it giving less spaces when I enter consecutive tabs between text?</p>\n\n<pre><code>/**********************************************************\n * Replaces TABs with an appropriate number of spaces *\n *                                                                                                  *\n **********************************************************/\n\n#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\nint main(void)\n{\n        int ch;\n    int i=0;\n    while((ch=getchar()) !=EOF)\n    {\n        if(ch=='\\t')\n        {\n            for(i=0;i&lt;4;i++)\n                putchar(' ');\n        }\n        else\n                putchar(ch);\n    }\n    return 0;\n}\n ![enter image description here](https://i.stack.imgur.com/hyA10.jpg)\n</code></pre>\n"}, {"tags": ["c", "linked-list"], "comments": [{"owner": {"reputation": 594, "user_id": 1433217, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/66e10c2f8d076a31f54bd694cf3e8fa9?s=128&d=identicon&r=PG", "display_name": "Akash K.", "link": "https://stackoverflow.com/users/1433217/akash-k"}, "edited": false, "score": 1, "creation_date": 1492573483, "post_id": 43485929, "comment_id": 74027237, "body": "Go through this, <a href=\"http://www.learn-c.org/en/Linked_lists\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 122, "user_id": 4301050, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gCWle.jpg?s=128&g=1", "display_name": "Dimuth Tharaka Menikgama", "link": "https://stackoverflow.com/users/4301050/dimuth-tharaka-menikgama"}, "edited": false, "score": 0, "creation_date": 1492573704, "post_id": 43485929, "comment_id": 74027292, "body": "You should have a pointer to head node. If not the linkedlist will be useless. Use that head node to get first element. From the first node, store customer value and next value in variables and set that next value pointed by the header as first value. Then print customer value and you are good to go."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1492577644, "post_id": 43485929, "comment_id": 74028550, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/19077036/deleting-first-node-in-linked-list-has-problems\">Deleting first node in linked list has problems</a>"}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 7096357, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2f5c5f59820a3f627254a980e8fa3071?s=128&d=identicon&r=PG&f=1", "display_name": "tmp657", "link": "https://stackoverflow.com/users/7096357/tmp657"}, "edited": false, "score": 0, "creation_date": 1492616754, "post_id": 43491896, "comment_id": 74054963, "body": "This makes much more sense. Thank you!"}], "tags": [], "owner": {"reputation": 375, "user_id": 5683152, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/d7Iy3.png?s=128&g=1", "display_name": "sstefan", "link": "https://stackoverflow.com/users/5683152/sstefan"}, "is_accepted": true, "score": 4, "last_activity_date": 1492597543, "last_edit_date": 1492597543, "creation_date": 1492594736, "answer_id": 43491896, "question_id": 43485929, "link": "https://stackoverflow.com/questions/43485929/how-to-delete-first-node-from-linked-list-c/43491896#43491896", "title": "How to delete first node from linked list? (C)", "body": "<p>You should not pass the tail of the list when adding new element. The only thing you need to know about the list is its head. Inserting should look like this: </p>\n\n<pre><code>void insert(node **head, char *customer)\n{\n    node *new_node = malloc(sizeof(node));\n\n    if(!new_node)\n    {\n        printf(\"Memory allocation failed!\\n\");\n        exit(1);\n    }\n    new_node-&gt;data = customer;\n    new_node-&gt;next = NULL;\n\n    node *temp = *head;\n\n    if(!temp)\n        *head = new_node;\n    else\n    {\n        while (temp-&gt;next != NULL)\n        {\n            temp = temp-&gt;next;\n        }\n        temp-&gt;next = new_node;\n    }\n    return ;\n}\n</code></pre>\n\n<p>When you insert it this way, delete could look something like this:</p>\n\n<pre><code>void deleteHead(node **head)\n{\n    node *temp = *head;\n    temp = temp-&gt;next;\n    free(head);\n    *head = temp;\n}\n</code></pre>\n\n<p>You create temp so you can store the address of element next to head, which is about to become head. Then you delete whats in head, and declare head to be <code>temp-&gt;next</code>. Now head points to what used to be second element in the list.</p>\n"}], "owner": {"reputation": 25, "user_id": 7096357, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2f5c5f59820a3f627254a980e8fa3071?s=128&d=identicon&r=PG&f=1", "display_name": "tmp657", "link": "https://stackoverflow.com/users/7096357/tmp657"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8287, "favorite_count": 0, "closed_date": 1492627342, "accepted_answer_id": 43491896, "answer_count": 1, "score": 0, "last_activity_date": 1492597543, "creation_date": 1492573214, "question_id": 43485929, "link": "https://stackoverflow.com/questions/43485929/how-to-delete-first-node-from-linked-list-c", "closed_reason": "Needs more focus", "title": "How to delete first node from linked list? (C)", "body": "<p>I have a function below that adds a node to the end of a linked list. </p>\n\n<pre><code>struct node {\nchar customer[100];\nstruct node *next;\n}node;\n\nstruct node *add_name(struct node *tail, struct node *new_node) \n{\n    struct node *temp;\n    if(tail==NULL) {\n        tail=new_node;\n    }\n    else {\n        temp=tail;\n        while (temp-&gt;next!=NULL) {\n            temp=temp-&gt;next;\n        }\n        temp-&gt;next=new_node; //tail points to new node\n    }\nreturn tail;\n}\n</code></pre>\n\n<p>I'm now trying to write a function that will print and then delete the first node of the linked list. However, my problem is I don't know how to do that considering I'm only looking at the end so far, not the beginning. I know I need to declare a pointer <code>*head</code> to point to the first node, but how would I do that and how do I know that it's going to point to the first node? This is my first time working with linked lists, so I'm still a bit confused by them.</p>\n"}, {"tags": ["c", "embedded", "firmware"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1492572549, "post_id": 43485778, "comment_id": 74026979, "body": "Pointer to pointer."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1492572874, "post_id": 43485778, "comment_id": 74027072, "body": "This is corrrect syntax, but it still looks like a bad idea. Can you provide context?"}, {"owner": {"reputation": 29473, "user_id": 52256, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/a65e01a757d285d68888a3388d44c33c?s=128&d=identicon&r=PG", "display_name": "T.T.T.", "link": "https://stackoverflow.com/users/52256/t-t-t"}, "edited": false, "score": 0, "creation_date": 1492575435, "post_id": 43485778, "comment_id": 74027830, "body": "@dandi-kain: do a printf() on REG_ADD and it&#39;s address, then printf() pREG, DE-refferenced pREG and the address of pREG, this should help you see what is going on..."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1492576984, "post_id": 43485778, "comment_id": 74028311, "body": "You can&#39;t &quot;printf&quot; the address of a constant (REG_ADD) since it is not defined. Same goes for pREG. The address of pREG is not defined."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1492577035, "post_id": 43485778, "comment_id": 74028331, "body": "Cast to <a href=\"https://cdecl.org/?q=void+%2A+volatile+%2AREG_ADD\" rel=\"nofollow noreferrer\">pointer to volatile pointer to void</a>"}], "answers": [{"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": true, "score": 5, "last_activity_date": 1492589703, "last_edit_date": 1492589703, "creation_date": 1492588524, "answer_id": 43489742, "question_id": 43485778, "link": "https://stackoverflow.com/questions/43485778/double-stars-in-pointer-definition/43489742#43489742", "title": "double stars in pointer definition", "body": "<p><code>void**</code> is a pointer to pointer-to-void.</p>\n\n<p><code>void * volatile *</code> is a pointer to volatile-qualified-pointer-to-void. (Read the declaration right-to-left, pretty much. <a href=\"http://c-faq.com/decl/spiral.anderson.html\" rel=\"nofollow noreferrer\">See this</a>.)</p>\n\n<p>What this means in plain English is that <code>pREG</code> is likely a pointer to some sort of hardware index register, which in turn contains an address. To tell the compiler that this index register can get updated at any moment, the register itself should be treated as <code>volatile</code>.</p>\n\n<p>A somewhat more readable way to write the same would be:</p>\n\n<pre><code>typedef void* volatile reg_add_t;\nreg_add_t* pREG = (reg_add_t)0x20081004u;\n</code></pre>\n\n<hr>\n\n<p>Please note that the use of <code>void*</code> for this purpose is questionable. This register will have a defined use, possibly it should have been a <code>uint32_t * volatile</code> or <code>uint8_t * volatile</code> instead.</p>\n"}], "owner": {"reputation": 795, "user_id": 3169603, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/518919978cd17830cb8c105193a9615a?s=128&d=identicon&r=PG&f=1", "display_name": "doubleE", "link": "https://stackoverflow.com/users/3169603/doublee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 1, "accepted_answer_id": 43489742, "answer_count": 1, "score": -1, "last_activity_date": 1492589703, "creation_date": 1492572270, "question_id": 43485778, "link": "https://stackoverflow.com/questions/43485778/double-stars-in-pointer-definition", "title": "double stars in pointer definition", "body": "<p>I have a come across following definition in an embedded code:</p>\n\n<pre><code>#define REG_ADD 0x20081004\n#define pREG ((void * volatile *)REG_ADD)\n</code></pre>\n\n<p>Why there are 2 <code>*</code> in <code>pREG</code> definition? What does it mean?</p>\n"}, {"tags": ["c", "arrays", "printf", "return-value"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1492572141, "post_id": 43485706, "comment_id": 74026860, "body": "What will <code>maxArray</code> do?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1492572959, "post_id": 43485706, "comment_id": 74027106, "body": "This is invalid code. The function has to be declared before usage."}, {"owner": {"reputation": 70, "user_id": 6907380, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/31f33090406e100c561dd39c8781af82?s=128&d=identicon&r=PG&f=1", "display_name": "CodeFreak", "link": "https://stackoverflow.com/users/6907380/codefreak"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1492580489, "post_id": 43485706, "comment_id": 74029656, "body": "Max array will print the contents of the sum of the subsequence. @BLUEPIXY"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1492580774, "post_id": 43485706, "comment_id": 74029777, "body": "Why is not <code>array[0]</code> included? Also, Why is it reset when it is <code>max_end &lt; 0</code>?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1492581125, "post_id": 43485706, "comment_id": 74029933, "body": "Probably the logic is incorrect."}, {"owner": {"reputation": 70, "user_id": 6907380, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/31f33090406e100c561dd39c8781af82?s=128&d=identicon&r=PG&f=1", "display_name": "CodeFreak", "link": "https://stackoverflow.com/users/6907380/codefreak"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1492582667, "post_id": 43485706, "comment_id": 74030663, "body": "@BLUEPIXY for some reason, that typo explained most of my problems of why I was off by one. The print statements also worked so thank you!"}], "answers": [{"tags": [], "owner": {"reputation": 1413, "user_id": 6914992, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/72764fe1f567d5a210402d12b0fc03b8?s=128&d=identicon&r=PG&f=1", "display_name": "jace", "link": "https://stackoverflow.com/users/6914992/jace"}, "is_accepted": false, "score": 0, "last_activity_date": 1492572533, "last_edit_date": 1492572533, "creation_date": 1492572176, "answer_id": 43485756, "question_id": 43485706, "link": "https://stackoverflow.com/questions/43485706/how-to-print-out-a-functions-return-statement-in-main-in-c/43485756#43485756", "title": "How to print out a functions return statement in main in C?", "body": "<pre><code>for (i = 0; i &lt; num; i++)\n{\n    printf(\"%d\",maxArray(arrayYouWantToPass, sizeYouWantToPass));\n    /// just call the function with right parameter and print it//////\n}\n</code></pre>\n\n<p>just like </p>\n\n<pre><code>for (i = 0; i &lt; num; i++)\n{\n    printf(\"%d\",maxArray(array, 2));\n    //printf(\"%d\",maxArray(array, size)); or this if size already have a value \n    /// just call the function with right parameter and print it//////\n}\n</code></pre>\n\n<p>but i think there is a problem with your code in maxArray function. you passed an array , and want to return value after. but you put array in a loop. This will only run once because it will return after first loop</p>\n"}, {"comments": [{"owner": {"reputation": 111, "user_id": 7088790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71082e1631dfcbb9db94831c0676b0f4?s=128&d=identicon&r=PG&f=1", "display_name": "CHillingInTheWooods", "link": "https://stackoverflow.com/users/7088790/chillinginthewooods"}, "edited": false, "score": 1, "creation_date": 1492572460, "post_id": 43485791, "comment_id": 74026961, "body": "you are not puting anything on the variable size. Take care of that before using it."}], "tags": [], "owner": {"reputation": 111, "user_id": 7088790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71082e1631dfcbb9db94831c0676b0f4?s=128&d=identicon&r=PG&f=1", "display_name": "CHillingInTheWooods", "link": "https://stackoverflow.com/users/7088790/chillinginthewooods"}, "is_accepted": false, "score": 0, "last_activity_date": 1492572373, "creation_date": 1492572373, "answer_id": 43485791, "question_id": 43485706, "link": "https://stackoverflow.com/questions/43485706/how-to-print-out-a-functions-return-statement-in-main-in-c/43485791#43485791", "title": "How to print out a functions return statement in main in C?", "body": "<p>The problem is on the print.</p>\n\n<pre><code>printf(\"%d\",maxArray(array, size));\n</code></pre>\n\n<p>you needed to include the size, like your fucntion is asking you to, and\nput the array on the first parameter.</p>\n"}, {"tags": [], "owner": {"reputation": 70, "user_id": 6907380, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/31f33090406e100c561dd39c8781af82?s=128&d=identicon&r=PG&f=1", "display_name": "CodeFreak", "link": "https://stackoverflow.com/users/6907380/codefreak"}, "is_accepted": false, "score": 0, "last_activity_date": 1492669877, "creation_date": 1492669877, "answer_id": 43511871, "question_id": 43485706, "link": "https://stackoverflow.com/questions/43485706/how-to-print-out-a-functions-return-statement-in-main-in-c/43511871#43511871", "title": "How to print out a functions return statement in main in C?", "body": "<p>To answer my own question from the above help, to print out the return statement and call it in main, I had to do so like:</p>\n\n<pre><code>printf(\"\\nSubsequence: \");\n for (i = 0; i &lt; num; i++)\n {\n  printf(\"%d\",maxArray(array,num));   //this is the way to print out what I wanted\n }\n  printf(\"\\n\");\n</code></pre>\n"}], "owner": {"reputation": 70, "user_id": 6907380, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/31f33090406e100c561dd39c8781af82?s=128&d=identicon&r=PG&f=1", "display_name": "CodeFreak", "link": "https://stackoverflow.com/users/6907380/codefreak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1635, "favorite_count": 0, "answer_count": 3, "score": -3, "last_activity_date": 1492669877, "creation_date": 1492571912, "question_id": 43485706, "link": "https://stackoverflow.com/questions/43485706/how-to-print-out-a-functions-return-statement-in-main-in-c", "title": "How to print out a functions return statement in main in C?", "body": "<p>So I completely forget how to print out a return statement from a different function and display it in my main function. I commented out of my attempt to print the functions return statement. My following code is as follows:</p>\n\n<pre><code>include &lt;stdio.h&gt;\n\nint main()\n{\n  int array[1024];\n  int i;\n  int num;\n  int size;\n  printf(\"How large is the Array: \");\n  scanf(\"%d\", &amp;num);\n\n  for( i = 0; i &lt; num; i++)\n  {\n  scanf(\"%d\",&amp;array[i]);\n  }\n\n printf(\"\\nArray contains: \");\n\n for (i = 0; i &lt; num; i++)\n {\n  printf(\"%d\",array[i]);\n }\n printf(\"\\nSubsequence: \");\n for (i = 0; i &lt; num; i++)\n {\n  //printf(\"%d\",maxArray(max_so_far));\n /// //I want to print max_so_far right here//////\n }\n  printf(\"\\n\");\n return 0;\n</code></pre>\n\n<p>}</p>\n\n<pre><code>int maxArray(int array[], int size)\n{\n int max_so_far = 0;\n int max_end = 0;\n for (int i = 1; i &lt; size; i++)\n{\n max_end = max_end + array[i];\n if (max_end &lt; 0)\n    max_end = 0;\n if(max_so_far &lt; max_end)\n   max_so_far = max_end;\n   }\n   return max_so_far;\n}\n</code></pre>\n"}, {"tags": ["c", "caching", "cpu-architecture"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1492571366, "post_id": 43485541, "comment_id": 74026675, "body": "We are no code-review site. <b>Read the FAQ</b> of code review, <b>iff</b> your code is correct, it might be a candidate for them. But you should provide definitively more information, there are a lot of very different CPUs on the market."}, {"owner": {"reputation": 123, "user_id": 4969529, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/672770642854597/picture?type=large", "display_name": "Aneesh Dandime", "link": "https://stackoverflow.com/users/4969529/aneesh-dandime"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1492571662, "post_id": 43485541, "comment_id": 74026755, "body": "@Olaf will /proc/cpuinfo help? Also I&#39;m not expecting cpu specific answers. Just general guidelines on how to improve cache-performance of such loops."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1492571811, "post_id": 43485541, "comment_id": 74026794, "body": "Not here and not enough. Sorry, still too broad. Please understand."}, {"owner": {"reputation": 123, "user_id": 4969529, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/672770642854597/picture?type=large", "display_name": "Aneesh Dandime", "link": "https://stackoverflow.com/users/4969529/aneesh-dandime"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1492571999, "post_id": 43485541, "comment_id": 74026832, "body": "Okay. Will repost on codereview."}, {"owner": {"reputation": 27492, "user_id": 3773011, "user_type": "moderator", "profile_image": "https://i.stack.imgur.com/Hmfxy.jpg?s=128&g=1", "display_name": "Makyen", "link": "https://stackoverflow.com/users/3773011/makyen"}, "edited": false, "score": 0, "creation_date": 1492572317, "post_id": 43485541, "comment_id": 74026912, "body": "I&#39;m voting to close this question as off-topic because review of functional code is off-topic for Stack Overflow. Your question may be on-topic for <a href=\"https://codereview.stackexchange.com\">Code Review</a>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1492572377, "post_id": 43485541, "comment_id": 74026934, "body": "@AneeshDandime: To emphasise: <b>check their FAQ before posting</b>!"}, {"owner": {"reputation": 17597, "user_id": 2016408, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/TVba8.jpg?s=128&g=1", "display_name": "Leeor", "link": "https://stackoverflow.com/users/2016408/leeor"}, "edited": false, "score": 0, "creation_date": 1492590760, "post_id": 43485541, "comment_id": 74035698, "body": "You can try playing with builtin_perfetch, but the HW prefetcher is probably taking care of that already. Still, you can manually check various distances ahead."}], "answers": [{"tags": [], "owner": {"reputation": 25733, "user_id": 559737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5de249db6565b87a2699e131974268a?s=128&d=identicon&r=PG", "display_name": "Brendan", "link": "https://stackoverflow.com/users/559737/brendan"}, "is_accepted": false, "score": 1, "last_activity_date": 1492573021, "creation_date": 1492573021, "answer_id": 43485894, "question_id": 43485541, "link": "https://stackoverflow.com/questions/43485541/improving-cache-hit-rate/43485894#43485894", "title": "Improving cache hit rate", "body": "<p>For the code posted; the CPU would read cache lines in ascending order and write cache lines in ascending order. There is no better (more cache friendly) access pattern than that (partially due to CPU's \"hardware prefetcher\").</p>\n\n<p>The only other things you can do is to reduce the size of the data (but I can't see how).</p>\n\n<p>There's also ways of improving the code (<code>clflush</code>, SIMD) that won't make any difference to cache miss rate.</p>\n"}], "owner": {"reputation": 123, "user_id": 4969529, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/672770642854597/picture?type=large", "display_name": "Aneesh Dandime", "link": "https://stackoverflow.com/users/4969529/aneesh-dandime"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 719, "favorite_count": 0, "closed_date": 1492581630, "answer_count": 1, "score": 0, "last_activity_date": 1492573021, "creation_date": 1492570601, "question_id": 43485541, "link": "https://stackoverflow.com/questions/43485541/improving-cache-hit-rate", "closed_reason": "Needs more focus", "title": "Improving cache hit rate", "body": "<p>Hey so I have a function written in <code>c</code> whose cache performance I have to improve. The statistics are being provided by <code>cachegrind</code>. But I'm completely stuck and cannot get more than 10% improvement in the performance. I really need help with this.</p>\n\n<p>Here is the function:</p>\n\n<pre><code>#define LARGER  50000\n\ntypedef struct { \n    char c1;\n    double f1;\n    int n1; \n    char c2;\n    int n2;\n    double f2; \n} data; \n\nchar* func()\n{\n    data* B = (data*) calloc(LARGER, sizeof(data));\n    if (!B) return 0;\n\n    double sum_f = 0.0;\n    double sum_n = 0;\n    char* sum_c = (char*) malloc(( 2 * LARGER + 1) * sizeof(char));\n\n    sum_c[2 * LARGER] = '\\0';\n\n    int i;\n    for(i = 0; i &lt; LARGER; i++)\n    {\n        sum_f += B[i].f1 + B[i].f2;\n        sum_n += B[i].n1 + B[i].n2;\n        sum_c[2 * i] = B[i].c1;\n        sum_c[2 * i + 1] = B[i].c2;\n    }\n\n    free(B);\n    return sum_c;\n}\n</code></pre>\n\n<p>The first thing that I noticed is that the definition of the <code>struct data</code> is not very cache-friendly because it has a ton of padding.</p>\n\n<p>So, I changed the definition according to allignment requiirements to this -</p>\n\n<pre><code>typedef struct {\n    int n1;\n    int n2;\n    double f1;\n    double f2;\n    char c1;\n    char c2;\n} data_new;\n</code></pre>\n\n<p>But this gives me only around 10% increase in cache-performance. I have no ideas on how to modify the for loop to improve the spatial locality further.</p>\n\n<p>Can anyone guide me on how to be able to write better loops that are cache-friendly.</p>\n\n<p>P.S. I am doing these questions as a part of my self study of a computer architecture book and I have no instructor to seek help.</p>\n"}, {"tags": ["c", "fork", "exec", "execv"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1492571220, "post_id": 43485476, "comment_id": 74026636, "body": "You need a null pointer at the end of <code>array</code>: <code>char *array[] = { &quot;&#47;bin&#47;time&quot;, &quot;&#47;bin&#47;echo&quot;, &quot;Hello World&quot;, 0 };</code>.  Otherwise, <code>execv()</code> doesn&#39;t know when the argument list finishes \u2014 or it finishes when it comes across a null pointer, which may not be for a while and goodness only knows what garbage you get echoed."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1492571353, "post_id": 43485476, "comment_id": 74026672, "body": "However, that&#39;s not necessarily your immediate problem.  Are you sure you have a <code>&#47;bin&#47;time</code> as opposed to perhaps <code>&#47;usr&#47;bin&#47;time</code>?  There&#39;s no merit in capturing the return value from <code>execv()</code>; if it returns, it failed.  The value to be passed to <code>strerror()</code> should be <code>errno</code>; it is not the return status from <code>execv()</code> since all error numbers are positive.  It&#39;s also a good idea to exit with a non-zero (failure) status if <code>execv()</code> fails.  And error messages should be printed to <code>stderr</code>, not <code>stdout</code>."}, {"owner": {"reputation": 1470, "user_id": 4917411, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/10153260426563544/picture?type=large", "display_name": "Polo D. Vargas", "link": "https://stackoverflow.com/users/4917411/polo-d-vargas"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1492571916, "post_id": 43485476, "comment_id": 74026814, "body": "Thanks, @JonathanLeffler I tried finishing with null but it didn&#39;t work, as i said i already tried using <code>&#47;bin&#47;echo</code> and it worked so i thought it should work. I also tried changing the path to <code>&#47;usr&#47;bin&#47;time</code> but it didnt work either"}, {"owner": {"reputation": 1470, "user_id": 4917411, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/10153260426563544/picture?type=large", "display_name": "Polo D. Vargas", "link": "https://stackoverflow.com/users/4917411/polo-d-vargas"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1492572876, "post_id": 43485476, "comment_id": 74027074, "body": "Thanks, @JonathanLeffler I managed to make it work but i don&#39;t know why I have to specify the dir of time like this <code>&#47;usr&#47;bin&#47;time&#47;</code> and the one for echo only works if i write it like this <code>&#47;bin&#47;echo</code>, if i do <code>&#47;usr&#47;bin&#47;echo</code> i get an error. And it is strange because i went to the dir /bin/ and executed echo and it worked, but after that i did <code>ls</code>  and  I couldnt find echo in the dir list, is that an issue of my OS?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1492573233, "post_id": 43485476, "comment_id": 74027176, "body": "I have no ready explanation for the trailing slash on <code>time</code>.  If you have <code>&#47;bin&#47;echo</code>, you probably don&#39;t have <code>&#47;usr&#47;bin&#47;echo</code> (though since one of <code>&#47;bin</code> and <code>&#47;usr&#47;bin</code> is a symlink to the other on Solaris, you probably aren&#39;t running there, but if you are, you don&#39;t have that problem).  The <code>echo</code> command is a shell built-in but also a separate executable. Which platform are you on?  On macOS Sierra, there&#39;s <code>&#47;usr&#47;bin&#47;time</code> but not <code>&#47;bin&#47;time</code>.  Linux (Ubuntu 16.04 LTS) seems to be the same way.  Try dropping that trailing slash."}, {"owner": {"reputation": 1470, "user_id": 4917411, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/10153260426563544/picture?type=large", "display_name": "Polo D. Vargas", "link": "https://stackoverflow.com/users/4917411/polo-d-vargas"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1492573371, "post_id": 43485476, "comment_id": 74027214, "body": "I am using ubuntu 16.04"}], "answers": [{"tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": true, "score": 1, "last_activity_date": 1492574115, "creation_date": 1492574115, "answer_id": 43486065, "question_id": 43485476, "link": "https://stackoverflow.com/questions/43485476/execv-not-working-when-using-bin-time/43486065#43486065", "title": "Execv not working when using bin/time", "body": "<p>This code ran OK for me on an Ubuntu 16.04 LTS VM hosted on a Mac running macOS Sierra 10.12.4 (and also ran OK on macOS, too).</p>\n\n<pre><code>#define _XOPEN_SOURCE 700\n#include &lt;errno.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;unistd.h&gt;\n\nint main(void)\n{\n    char *array[] = { \"/usr/bin/time\", \"/bin/echo\", \"Hello World\", 0 };\n    pid_t childPIorZero = fork();\n\n    if (childPIorZero &lt; 0)\n    {\n        perror(\"fork() error\");\n        exit(-1);\n    }\n    if (childPIorZero != 0)\n    {\n        printf(\"I'm the parent %d, my child %d\\n\", getpid(), childPIorZero);\n        int status;\n        int corpse;\n        while ((corpse = wait(&amp;status)) != -1)\n            printf(\"PID %d exited with status 0x%.4X\\n\", corpse, status);\n    }\n    else\n    {\n        printf(\"I'm the child %d, my parent %d\\n\", getpid(), getppid());\n        execv(array[0], array);\n        int errnum = errno;\n        fprintf(stderr, \"(%d) %s\\n\", errnum, strerror(errnum));\n        exit(1);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Key changes from the code in the question include:</p>\n\n<ul>\n<li>Changing location of <code>time</code> executable.</li>\n<li>Adding null pointer to the end of the <code>array</code>.</li>\n<li>Reporting errors on <code>stderr</code>, not <code>stdout</code>, after the <code>execv()</code> fails.</li>\n<li>Reporting the error from <code>errno</code>, not the return value from <code>execv()</code>, which is always <code>-1</code> if it returns at all.</li>\n<li>Exiting with an error status if the <code>execv()</code> fails.</li>\n<li>Looping until there are no children left (under funny circumstances, a process can inherit children that a previous incarnation of the same process forked off \u2014 mostly, you don't have to worry about it, but I always use a loop for waiting).</li>\n<li>Report the exit status for the child.</li>\n</ul>\n\n<p>On Ubuntu, I compiled with:</p>\n\n<pre><code>$ gcc -O3 -g -std=c11 -Wall -Wextra -Werror -Wmissing-prototypes \\\n&gt;     -Wstrict-prototypes -Wold-style-definition ev11.c -o ev11\n$ ./ev11\nI'm the parent 25129, my child 25130\nI'm the child 25130, my parent 25129\nHello World\n0.00user 0.00system 0:00.00elapsed 0%CPU (0avgtext+0avgdata 1620maxresident)k\n8inputs+0outputs (1major+66minor)pagefaults 0swaps\nPID 25130 exited with status 0x0000\n$\n</code></pre>\n\n<p>I used the same compiling command line (but a different compiler, of course) on macOS and got:</p>\n\n<pre><code>$ ./ev11\nI'm the parent 3220, my child 3221\nI'm the child 3221, my parent 3220\nHello World\n        0.00 real         0.00 user         0.00 sys\nPID 3221 exited with status 0x0000\n$\n</code></pre>\n"}], "owner": {"reputation": 1470, "user_id": 4917411, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/10153260426563544/picture?type=large", "display_name": "Polo D. Vargas", "link": "https://stackoverflow.com/users/4917411/polo-d-vargas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 644, "favorite_count": 0, "accepted_answer_id": 43486065, "answer_count": 1, "score": 0, "last_activity_date": 1492574115, "creation_date": 1492570129, "last_edit_date": 1492570447, "question_id": 43485476, "link": "https://stackoverflow.com/questions/43485476/execv-not-working-when-using-bin-time", "title": "Execv not working when using bin/time", "body": "<p>I have a problem in my program when i try to execute the <code>/bin/time /bin/echo Hello world</code>, I get no output. I know that this sample code works\nfor example with /bin/date or /bin/echo and i think it should also work with time but its not</p>\n\n<pre><code>int main(int argc, char * argv []) {    \n    int err = 1;\n    char *array[3] = {\"/bin/time\", \"/bin/echo\", \"Hello World\"};\n    pid_t childPIorZero = fork();\n\n    if (childPIorZero &lt; 0){\n        perror(\"fork() error\");\n        exit(-1);                        \n    }\n    if (childPIorZero != 0){\n        printf(\"I'm the parent %d, my child %d\\n\",getpid(),childPIorZero);\n        wait(NULL); \n    }           \n    else{\n         printf(\"I'm the child %d, my parent %d\\n\",getpid(), getppid());\n         err = execv(array[0], array);\n         printf(\"error = %d\\n\", err);\n         printf(\"%s\\n\", strerror(err));\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>I though the problem was that i was passing in a wrong way the params to the execv, but it worked for the echo bin and the date bin so I don't knwo what is wrong. The output is the following:</p>\n\n<pre><code>I'm the parent 28001, my child 28011\nI'm the child 28011, my parent 28001\nerror = -1\nUnknown error -1\n</code></pre>\n"}, {"tags": ["c", "arrays", "pointers", "struct"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 2, "creation_date": 1492567705, "post_id": 43485066, "comment_id": 74025747, "body": "<code>wordsptr[current]-&gt;word = (char *)malloc(20*sizeof(char)); (*wordsptr[current]).word = temp;</code>. That is not the way to copy a string. All that does is malloc some memory, throw it away and set <code>word</code> to point to the <i>same</i> <code>temp</code> buffer for <i>every</i> struct. Either use <code>strcpy</code> to copy from <code>temp</code> into the allocated <code>word</code>. Or use <code>strdup</code> to do the alloc and copy in one go."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1492567760, "post_id": 43485066, "comment_id": 74025773, "body": "<code>(*wordsptr[current]).word = temp;</code> --&gt; <code>strcpy(wordsptr[current]-&gt;word,  temp);</code>"}], "answers": [{"comments": [{"owner": {"reputation": 99, "user_id": 7595280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6bbd8ed1165b246dbb96eb5eb43fb725?s=128&d=identicon&r=PG", "display_name": "Hunter", "link": "https://stackoverflow.com/users/7595280/hunter"}, "edited": false, "score": 0, "creation_date": 1492568279, "post_id": 43485108, "comment_id": 74025917, "body": "Wow, thank you. I can&#39;t believe I made such a stupid mistake, CS student life. Thank you so much."}, {"owner": {"reputation": 3193, "user_id": 2694511, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/2e9aw.png?s=128&g=1", "display_name": "Spencer D", "link": "https://stackoverflow.com/users/2694511/spencer-d"}, "reply_to_user": {"reputation": 99, "user_id": 7595280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6bbd8ed1165b246dbb96eb5eb43fb725?s=128&d=identicon&r=PG", "display_name": "Hunter", "link": "https://stackoverflow.com/users/7595280/hunter"}, "edited": false, "score": 1, "creation_date": 1492568506, "post_id": 43485108, "comment_id": 74025986, "body": "@Hunter, no problem. Just as a further suggestion, you should always check the returns of <code>malloc(...)</code> and <code>calloc(...)</code>. Not sure if your instructor has covered that, but they can return NULL if allocation failed, so it is best practice to check them and handle those situations gracefully to avoid getting a segmentation fault from trying to dereference a NULL pointer."}], "tags": [], "owner": {"reputation": 3193, "user_id": 2694511, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/2e9aw.png?s=128&g=1", "display_name": "Spencer D", "link": "https://stackoverflow.com/users/2694511/spencer-d"}, "is_accepted": true, "score": 1, "last_activity_date": 1492567816, "creation_date": 1492567816, "answer_id": 43485108, "question_id": 43485066, "link": "https://stackoverflow.com/questions/43485066/structures-not-taking-values/43485108#43485108", "title": "Structures not taking values", "body": "<p>You are assigning the address of temp, which is constantly updated with new values at every iteration, hence why you get the string of the last iteration in all structures here. This is caused by the following lines:</p>\n\n<pre><code>wordsptr[current]-&gt;word = (char *)malloc(20*sizeof(char));\n(*wordsptr[current]).word = temp;\n</code></pre>\n\n<p>(<em>Which it is worth mentioning that this is also a memory leak because you lose the pointer to the heap memory.</em>)</p>\n\n<p>You should instead use <code>strcpy()</code> or a similar method to copy the characters from <code>temp</code> to <code>wordsptr[current]-&gt;word</code>.</p>\n"}], "owner": {"reputation": 99, "user_id": 7595280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6bbd8ed1165b246dbb96eb5eb43fb725?s=128&d=identicon&r=PG", "display_name": "Hunter", "link": "https://stackoverflow.com/users/7595280/hunter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 43485108, "answer_count": 1, "score": 1, "last_activity_date": 1492567816, "creation_date": 1492567471, "question_id": 43485066, "link": "https://stackoverflow.com/questions/43485066/structures-not-taking-values", "title": "Structures not taking values", "body": "<p>I'm having an issue with an assignment. The task is to read a string from a txt file and compare it to an array of pointers to structures. If the string already appears then increase the count of that struct by 1, if not found, insert the string into the array with count 1. <br /> The struct is defined:</p>\n\n<pre><code>struct wordfreq {\n    int count;\n    char *word;\n}\n</code></pre>\n\n<p>Here is the code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nstruct wordfreq {\n    int count;\n    char *word;\n};\n\ntypedef struct wordfreq wordfreq;\n\nint mystrcmp(char *str1, char *str2);\n\n\nint main(int argc, char *argv[])\n{\n    int i, j, flag, current, spot;\n    char *temp, *temp2;\n    FILE *infile, *outfile;\n    wordfreq *wordsptr[1000];\n    if (argc != 3)\n    {\n        printf(\"Invalid number of arguments, exiting\\n\");\n        return 1;\n    }\n    else \n    {\n        infile = fopen(argv[1], \"r\");\n        outfile = fopen(argv[2], \"w\");\n        if (infile == NULL)\n        {\n            printf(\"Error opening input file, exiting\\n\");\n            return 2;\n        }\n        if (outfile == NULL)\n        {\n            printf(\"Error opening output file, exiting\\n\");\n            return 3;\n        }\n    }\n    current = 0;\n    flag = 0;\n    for (i = 0; i &lt; 1000; i++)\n        wordsptr[i] = NULL;\n    temp = (char *)calloc(20,sizeof(char));\n    while (fgets(temp, 20, infile) != NULL)\n    {\n        flag = 0;\n        for (i = 0; i &lt; 20; i++)\n            if (temp[i] == '\\n')\n                temp[i] = '\\0';\n        printf(\"%s %d\\n\", temp, current);\n        wordsptr[current] = (wordfreq *)malloc(sizeof(wordfreq));\n        wordsptr[current]-&gt;word = (char *)malloc(20*sizeof(char));\n        (*wordsptr[current]).word = temp;\n        (*wordsptr[current]).count = 1;\n        current++;\n    }\n    for (i = 0; i &lt; current; i++)\n        printf(\"%d %s\\n\", (*wordsptr[i]).count, (*wordsptr[i]).word);\n\n\n\n\n    free(temp);\n    for (i = 0; i &lt; 1000; i++)\n    {\n        wordsptr[i] = NULL;\n        free(wordsptr[i]);\n    }\n    if (infile != NULL)\n        fclose(infile);\n    if (outfile != NULL)\n        fclose(outfile);\n    return 0;\n}\n\n\nint mystrcmp(char *str1, char *str2)\n{\n    int i;\n    for (i = 0; str1[i] != '\\0' || str2[i] != '\\0';i++)\n        if (str1[i] != str2[i])\n            return 1;\n    return 0;\n}\n</code></pre>\n\n<p>A couple of stipulations: <br />\n1) Have to initialize all pointers to null <br />\n2) Have to use an array of pointers to structures <br /></p>\n\n<p>run:\n./assign6 words.txt freq.txt</p>\n\n<p>words.txt:</p>\n\n<pre><code>apple\norange\napple\norange\nbanana\nbanana\n</code></pre>\n\n<p>The output I'm receiving:\n    1 banana\n    1 banana\n    1 banana\n    1 banana\n    1 banana\n    1 banana</p>\n\n<p>It's supposed to output the count of the string in the txt file and the string itself to the file specified by argv[2]. Please help!</p>\n"}, {"tags": ["c", "matrix", "mpi", "eigenvalue"], "owner": {"reputation": 159, "user_id": 5766688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cmzOI.png?s=128&g=1", "display_name": "Bholu Bhaiya", "link": "https://stackoverflow.com/users/5766688/bholu-bhaiya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 91, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1492567342, "creation_date": 1492567342, "question_id": 43485047, "link": "https://stackoverflow.com/questions/43485047/calculate-eigen-value-and-eigen-vector-in-parallel-processor", "title": "Calculate Eigen value and Eigen vector in parallel processor", "body": "<p>I want to do a small program that calculates eigen value and eigen vector in parallel processors using MPI with C.</p>\n\n<p>I have written a code that works correctly but its for uni processor.\nPlease help me with some code for parallel processor.</p>\n\n<p>I want to compare the processing time for different number of processors with different size of matrix.</p>\n\n<p>Please help me.</p>\n\n<p>I have written this code and its working well for single processor.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;math.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;mpi.h&gt;\n#include&lt;time.h&gt;\n\nint main(int argc, char* argv[])\n{\nfloat a[1000][1000],x[1000],c[1000],d=0,temp;\nint n,i,j;\ndouble startTime;\nint rank, size;\n\nMPI_Init(&amp;argc, &amp;argv);\n\nMPI_Comm_rank(MPI_COMM_WORLD, &amp;rank);\nMPI_Comm_size(MPI_COMM_WORLD, &amp;size);\n\nif(rank==0)\n{\n    printf(\"Enter the order of matrix ? \");\n    scanf(\"%d\",&amp;n);\n\n    for(i=0;i&lt;n;i++)\n    {\n    for(j=0;j&lt;n;j++)\n       a[i][j] = rand()%9;\n    }\n\n    for(i=0;i&lt;n;i++)\n    x[i] = rand()%5;\n}\n\ndo\n{\n    for(i=0;i&lt;n;i++)\n    {\n        c[i]=0;\n        for(j=0;j&lt;n;j++)\n            c[i]+=a[i][j]*x[j];\n    }\n    for(i=0;i&lt;n;i++)\n        x[i]=c[i];\n\n    temp=d;\n    d=0;\n\n    for(i=0;i&lt;n;i++)\n    {\n        if(fabs(x[i])&gt;fabs(d))\n            d=x[i];\n    }\n    for(i=0;i&lt;n;i++)\n        x[i]/=d;\n\n}while(fabs(d-temp)&gt;0.00001);\n\n\n\n\nif(rank==0)\n{\n    printf(\"\\nThe required eigen value is %f\",d);\n    printf(\"\\nThe required eigen vector is :\\n\");\n    for(i=0; i&lt;n; i++)\n    {\n    printf(\"%f\\n\",x[i]);\n    }\n\n   printf(\"Time taken %f sec\\n\",(clock()-startTime)/CLOCKS_PER_SEC);\n}\n\n MPI_Finalize(); \n}\n</code></pre>\n"}, {"tags": ["c", "gcc"], "comments": [{"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 1, "creation_date": 1492566614, "post_id": 43484898, "comment_id": 74025460, "body": "To first order, either you should be letting the compiler do this for you, or you should be writing assembly language by hand.  The GNU assembler has a macro language that is actually <i>more powerful</i> than the C preprocessor; in particular, IIRC it <i>can</i> iterate, which CPP can&#39;t."}, {"owner": {"reputation": 2109, "user_id": 7030791, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/pIsKF.jpg?s=128&g=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/7030791/martin"}, "reply_to_user": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1492567064, "post_id": 43484898, "comment_id": 74025583, "body": "I use <code>O3</code> so the compiler will do it but I want to tell the compiler and use my unroll factor"}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1492567469, "post_id": 43484898, "comment_id": 74025675, "body": "I believe GCC has some <code>-f</code> options to the purpose, which you may be able to apply to a single function using pragmas."}, {"owner": {"reputation": 2109, "user_id": 7030791, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/pIsKF.jpg?s=128&g=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/7030791/martin"}, "reply_to_user": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1492567754, "post_id": 43484898, "comment_id": 74025767, "body": "@zwol, actually I could not find. You mean it is possible to use <code>#pragma -funroll-loops</code> before the loop? GCC has the following <code>-f</code> option for unrolling:  <code>-fsplit-ivs-in-unroller     \t\t[enabled]</code>  <code>-funroll-all-loops          \t\t[disabled]</code>  <code>-funroll-loops              \t\t[disabled]</code>  <code>-fvariable-expansion-in-unroller \t[disabled]</code> I find them with this command: <code>gcc -c -Q -O3 --help=optimizers | grep unrol </code>"}, {"owner": {"reputation": 2109, "user_id": 7030791, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/pIsKF.jpg?s=128&g=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/7030791/martin"}, "reply_to_user": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1492568461, "post_id": 43484898, "comment_id": 74025973, "body": "So you mean I have to implement an assembly macro and use it in my code?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1492569045, "post_id": 43484898, "comment_id": 74026123, "body": "The point is, why do you insist on unrolling by hand in the first place? Why not just let the compiler decide? It most likely knows much better that you (or me) about cache-lines, internal bus-widths, register utilisation, etc. Did you profile your code against the compiler generated? Are you sure <b>this</b> is your bottleneck? Did you layout/align your datastructure properly? With modern superscalar multi-issue CPUs even a simple loop with proper data layout could be much faster than a hand-optimised partially unrolled loop with inappropriate datastructures."}, {"owner": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 0, "creation_date": 1492582972, "post_id": 43484898, "comment_id": 74030830, "body": "If you have some idea of the maximum that UF will be, you can use <a href=\"https://en.m.wikipedia.org/wiki/Duff%27s_device\" rel=\"nofollow noreferrer\">Duff&#39;s device</a>."}, {"owner": {"reputation": 2109, "user_id": 7030791, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/pIsKF.jpg?s=128&g=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/7030791/martin"}, "reply_to_user": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 0, "creation_date": 1492617786, "post_id": 43484898, "comment_id": 74055702, "body": "@MarkPlotnick, Thanks, Duff&#39;s device could help. I should test."}, {"owner": {"reputation": 2109, "user_id": 7030791, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/pIsKF.jpg?s=128&g=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/7030791/martin"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1492618087, "post_id": 43484898, "comment_id": 74055904, "body": "@Olaf. The point is compilers are smarter than me to unroll when just unrolling is the goal. But, I&#39;m looking for other optimization which compiler is not smart enough. this method will help me to help the optimizer. Yes every this is OK with my code such as alignment, etc."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1492618353, "post_id": 43484898, "comment_id": 74056079, "body": "@FackedDeveloper Until now, you did not give any evidence of your claim.  Just reading the machine code is often not sufficient. For instance: nserting <code>nop</code>s at the right place can make your code faster! As I said, you should profile. And try different compilers. gcc for isntance is know to make great leaps even from one minor version to the next."}, {"owner": {"reputation": 2109, "user_id": 7030791, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/pIsKF.jpg?s=128&g=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/7030791/martin"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1492653573, "post_id": 43484898, "comment_id": 74072290, "body": "@Olaf, Because I am not sure about my claim, I need to prove it by hand written codes and need a faster method to test my ideas. But, Compilers are not smart enough! I am sure about it. For profiling, yes I ordinally use perf. For compiling, I use Clang and GCC and hope to be able to install ICC on my Linux. I can not understand it&#39;s installation process! I hate to install these kinds of stuff on my Linux."}], "owner": {"reputation": 2109, "user_id": 7030791, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/pIsKF.jpg?s=128&g=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/7030791/martin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 2, "answer_count": 0, "score": 1, "last_activity_date": 1492566292, "creation_date": 1492566292, "question_id": 43484898, "link": "https://stackoverflow.com/questions/43484898/how-to-generate-code-before-compiling-in-c", "title": "How to generate code before compiling in C?", "body": "<p>Let assume I have a loop like this:\n</p>\n\n<pre><code>#define UF 1 // Unroll Factor\nfor(i=0; i&lt;N-UF+1; i+=UF)\n  a[i] = b[i] + c[i];\n</code></pre>\n\n<p>I want to unroll the loop with <code>UF = 4</code>. For this purpose, I should change the code like this:</p>\n\n<pre><code>for(i=0; i&lt;N-UF+1; i+=UF){\n  a[i+0] = b[i+0] + c[i+0];\n  a[i+1] = b[i+1] + c[i+1];\n  a[i+2] = b[i+2] + c[i+2];\n  a[i+3] = b[i+3] + c[i+3];\n}\n</code></pre>\n\n<p>Well, I want it to apply another <code>UF</code>, and I have to change the code!\nIf I could do some thing like this my problem is solved:\n</p>\n\n<pre><code> for(i=0; i&lt;N-UF+1; i+=UF){\n   //The following loop should generate code somthing like it prints the body \n   /for(j=0; j&lt;UF;j++){\n      a[i+j] = b[i+j] + c[i+j];\n   }/\n}\n</code></pre>\n\n<p>I can use <code>fprintf</code> and generate another file but it takes too much time I want a faster way. Is there any way to implement it in a single function and use it before compiling? I want to see the compiler's behavior So I need to change them in my code. If there are any solution I appreciate it.\nI use <code>C</code> so <code>C++</code> and Templates are not useful for this question.\nUsing <code>GCC 6.2.0</code>-<code>Linux</code></p>\n"}, {"tags": ["c", "algorithm", "audio", "wav"], "comments": [{"owner": {"reputation": 10914, "user_id": 4907604, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/qowl9.png?s=128&g=1", "display_name": "m69 &#39;&#39;snarky and unwelcoming&#39;&#39;", "link": "https://stackoverflow.com/users/4907604/m69-snarky-and-unwelcoming"}, "edited": false, "score": 1, "creation_date": 1492568254, "post_id": 43484857, "comment_id": 74025907, "body": "The &quot;fmt &quot; chunk identifier is supposed to be 4 bytes long, padded with a space, but you write only 3 characters, so maybe you get a junk byte and the chunk is not recognised."}, {"owner": {"reputation": 1, "user_id": 6879543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/900be574bbd209ebe239b112052c7939?s=128&d=identicon&r=PG&f=1", "display_name": "Equis", "link": "https://stackoverflow.com/users/6879543/equis"}, "reply_to_user": {"reputation": 10914, "user_id": 4907604, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/qowl9.png?s=128&g=1", "display_name": "m69 &#39;&#39;snarky and unwelcoming&#39;&#39;", "link": "https://stackoverflow.com/users/4907604/m69-snarky-and-unwelcoming"}, "edited": false, "score": 0, "creation_date": 1492572163, "post_id": 43484857, "comment_id": 74026867, "body": "Wow you are absolutely correct. Thanks for the help."}, {"owner": {"reputation": 78, "user_id": 6744189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qFucL.png?s=128&g=1", "display_name": "Ayan Shafqat", "link": "https://stackoverflow.com/users/6744189/ayan-shafqat"}, "edited": false, "score": 0, "creation_date": 1495193022, "post_id": 43484857, "comment_id": 75161370, "body": "There are a few things wrong with this code. Using <code>strcpy</code> to copy <code>&quot;RIFF&quot;</code> will also copy a null character (<code>&#39;\\0&#39;</code>) at the end (out-of-bound). Same with <code>&quot;WAVE&quot;</code>. But you&#39;re not seeing the effects since you&#39;re sequentially writing them, so null bytes are overwritten. However, that&#39;s a bug lurking around the corner. I would set the bytes one-by-one. I would also use a well tested library to handle <code>.wav</code> files, since you mentioned your project is more involved. Consider using <a href=\"http://www.mega-nerd.com/libsndfile/\" rel=\"nofollow noreferrer\">libsndfile</a> to remove unneeded complexity from your project."}], "owner": {"reputation": 1, "user_id": 6879543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/900be574bbd209ebe239b112052c7939?s=128&d=identicon&r=PG&f=1", "display_name": "Equis", "link": "https://stackoverflow.com/users/6879543/equis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1492565998, "creation_date": 1492565998, "question_id": 43484857, "link": "https://stackoverflow.com/questions/43484857/wav-file-containing-only-silence-not-playing-made-through-c", "title": "Wav file containing only silence not playing (made through C)", "body": "<p>My actual project is more involved, but I believe if I can troubleshoot this simpler code, I will be able to get my project fully working. The header info and the number of bytes that I have written, my expectaions, and information printed to the screen make sense, but upon opening the wav file, an error is met and shown. From the 45th byte only short int zeroes are written, meaning the entire wav file is only silence.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;math.h&gt;\nint main()\n{   int i;\n   typedef struct h{\n   char ChunkID[4];             /*RIFF*/\n   unsigned int ChunkSize;\n   char format[4];         /*WAVE*/\n   char SubChunk1ID[4];              /*fmt*/\n   unsigned int SubChunk1Size;\n   unsigned short int AudioFormat;\n   unsigned short int NumChannels;\n   unsigned int SampleRate;\n   unsigned int ByteRate;\n   short int BlockAlign;\n   short int BitsPerSample;\n   char SubChunk2ID[4];\n   unsigned int SubChunk2Size;\n   }rtz;\n   /*start of filling out the information we know*/\n        rtz HeaderOut;\n            HeaderOut.SampleRate = 44100;\n            HeaderOut.NumChannels = 1;\n            HeaderOut.BitsPerSample = 16;\n            strcpy(HeaderOut.ChunkID,\"RIFF\");\n            strcpy(HeaderOut.format,\"WAVE\");\n            strcpy(HeaderOut.SubChunk1ID,\"fmt\");\n            strcpy(HeaderOut.SubChunk2ID,\"data\");\n            HeaderOut.AudioFormat = 1;\n            HeaderOut.ChunkSize = 1411236;\n            HeaderOut.SubChunk2Size = 1411200;\nHeaderOut.SubChunk1Size = 16;\nHeaderOut.ByteRate = HeaderOut.SampleRate*HeaderOut.NumChannels*HeaderOut.BitsPerSample/8;\nHeaderOut.BlockAlign = HeaderOut.NumChannels*HeaderOut.BitsPerSample/8;\nprintf(\"ChunkID       = RIFF        %d bytes\\n\", sizeof(HeaderOut.ChunkID));\nprintf(\"Chunksize     = %d     %d bytes\\n\",HeaderOut.ChunkSize,sizeof(HeaderOut.ChunkSize));\nprintf(\"format        = WAVE        %d bytes\\n\",sizeof(HeaderOut.format));\nprintf(\"SubChunk1ID   = %s         %d bytes\\n\",HeaderOut.SubChunk1ID,sizeof(HeaderOut.SubChunk1ID));\nprintf(\"SubChunkSize  = %d          %d bytes\\n\",HeaderOut.SubChunk1Size,sizeof(HeaderOut.SubChunk1Size));\nprintf(\"AudioFormat   = %d           %d bytes\\n\",HeaderOut.AudioFormat,sizeof(HeaderOut.AudioFormat)); /* AUDIOFORMAT CHANGES*/\nprintf(\"NumChannels   = %d           %d bytes\\n\",HeaderOut.NumChannels,sizeof(HeaderOut.NumChannels));\nprintf(\"SampleRate    = %d       %d bytes\\n\",HeaderOut.SampleRate,sizeof(HeaderOut.SampleRate));\nprintf(\"ByteRate      = %d       %d bytes\\n\",HeaderOut.ByteRate,sizeof(HeaderOut.ByteRate));\nprintf(\"BlockAlign    = %d           %d bytes\\n\",HeaderOut.BlockAlign,sizeof(HeaderOut.BlockAlign));\nprintf(\"BitsPerSample = %d          %d bytes\\n\", HeaderOut.BitsPerSample,sizeof(HeaderOut.BitsPerSample));\nprintf(\"SubChunk2ID   = data        %d bytes\\n\",sizeof(HeaderOut.SubChunk2ID));\nprintf(\"SubChunk2Size = %d     %d bytes\\n\\n\",HeaderOut.SubChunk2Size,sizeof(HeaderOut.SubChunk2Size));\nprintf(\"Size of HeaderOut = %d bytes\\n\", sizeof(HeaderOut));\nprintf(\"\\n\");\nFILE *fp;\nfp = fopen(\"experiment.wav\",\"wb\");\nif(fp == NULL){printf(\"File did not open successfully.\\n\");\n}else{\n            fwrite(&amp;HeaderOut,44,1,fp);\nprintf(\"File successfully opened.\\n\");\nshort int silence[14700];\n    for (i = 0; i&lt;14700 ; i++){\n        silence[i] = 0;\n    }\nfor (i = 0 ; i&lt;48; i++){\n         fwrite(silence, sizeof( short int), 14700,fp);\n}\nfclose(fp);\n}/*end of else statement*/\n}/*end of MAIN */\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 1221, "user_id": 6610379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/869458e7097eb3f538a64ab550a0aa4b?s=128&d=identicon&r=PG&f=1", "display_name": "Phil Brubaker", "link": "https://stackoverflow.com/users/6610379/phil-brubaker"}, "edited": false, "score": 0, "creation_date": 1492564376, "post_id": 43484600, "comment_id": 74024935, "body": "&quot;<i>The idea is to be able to add a name to the end of the linked list...</i>&quot; - where is the variable that keeps track of the end of the linked list?"}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 1, "creation_date": 1492564649, "post_id": 43484600, "comment_id": 74024995, "body": "If you set <code>temp-&gt;next</code> to null and then add it after head you&#39;ve just lost the rest of the list."}, {"owner": {"reputation": 7393, "user_id": 247843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efb28219278d4fb05b46c7806fad2c76?s=128&d=identicon&r=PG", "display_name": "gp.", "link": "https://stackoverflow.com/users/247843/gp"}, "edited": false, "score": 0, "creation_date": 1492564651, "post_id": 43484600, "comment_id": 74024996, "body": "i think the problem is same head variable is used for head and tail both. so adding name adds node at head-&gt;next which should be tail-&gt;next"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1492565364, "post_id": 43484600, "comment_id": 74025182, "body": "Don&#39;t <code>#define bool</code> and the constants yourself! C has a boolean type, use it! See <code>stdbool.h</code>."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1492565401, "post_id": 43484600, "comment_id": 74025191, "body": "You may want to look at the <a href=\"https://pastebin.com/BirWtkvb\" rel=\"nofollow noreferrer\"><b>insert_node</b></a> function contained within that circular linked list example (in a circular list <code>last-&gt;next</code> points to <code>head</code> allowing traversal of the list from any node to any node without starting at <code>head</code> each time, otherwise all list operations are generic to a linked-list)"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 7886912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f3a2f5da94724f57ab9637423733b81?s=128&d=identicon&r=PG&f=1", "display_name": "James Dean", "link": "https://stackoverflow.com/users/7886912/james-dean"}, "edited": false, "score": 0, "creation_date": 1492579466, "post_id": 43485942, "comment_id": 74029263, "body": "God bless you sir!"}], "tags": [], "owner": {"reputation": 111, "user_id": 7088790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71082e1631dfcbb9db94831c0676b0f4?s=128&d=identicon&r=PG&f=1", "display_name": "CHillingInTheWooods", "link": "https://stackoverflow.com/users/7088790/chillinginthewooods"}, "is_accepted": false, "score": 0, "last_activity_date": 1492573299, "creation_date": 1492573299, "answer_id": 43485942, "question_id": 43484600, "link": "https://stackoverflow.com/questions/43484600/cant-find-error-in-my-code-c/43485942#43485942", "title": "Cant find error in my Code? C", "body": "<p>First MISTAKE:</p>\n\n<pre><code>void call(){\n\nif(head == NULL){\n        printf(\"List is empty.\\n\");\n    }\n    else{\n        Node *temp;\n        printf(\"Calling %s\\n\", head-&gt;name);\n        if(head-&gt;next!=NULL){\n            temp = head-&gt;next;\n            free(head);\n            head = temp;\n        }\n        else{\n           free(head); //you don't free the memory if it's just one in the list\n            head = NULL;\n        }\n    }\n }\n</code></pre>\n\n<p>Second mistake:</p>\n\n<pre><code>void add(char input[]){\n    Node *AuxHead; //create an aux to the head so you can move threw the list\n    Node *temp;\n    temp = (Node*)malloc(sizeof(Node));\nif(temp!=NULL) //verify if it got allocated\n{\n    strcpy(temp-&gt;name, input);\n    temp-&gt;next = NULL;\n    if(head == NULL){\n        head = temp;\n    }\n    else{\n       AuxHead=head; //pass the address of the head\n       while(AuxHead-&gt;next!=NULL) //catch the lest node of the list\n          AuxHead=AuxHead-&gt;next;\n        AuxHead-&gt;next = temp; //make the temp, the last of the list\n    }\n}\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7886912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f3a2f5da94724f57ab9637423733b81?s=128&d=identicon&r=PG&f=1", "display_name": "James Dean", "link": "https://stackoverflow.com/users/7886912/james-dean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1492573299, "creation_date": 1492564140, "question_id": 43484600, "link": "https://stackoverflow.com/questions/43484600/cant-find-error-in-my-code-c", "title": "Cant find error in my Code? C", "body": "<p>The idea is to be able to add a name to the end of the linked list when the user enters \"1\" and print and delete the first name in the linked list when the user enters \"0\". This is working if there is only 2 names in the linked list but anymore than 2 it only does the first name and last name, yet I cannot see my error.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;conio.h&gt;\n#define bool int\n#define TRUE 1d\n#define FALSE 0\n\ntypedef struct node{\n     char name[100];\n     struct node *next;\n} Node;\n\nNode *head;\n\nvoid call(){\n    if(head == NULL){\n            printf(\"List is empty.\\n\");\n        }\n        else{\n            Node *temp;\n            printf(\"Calling %s\\n\", head-&gt;name);\n            if(head-&gt;next!=NULL){\n                temp = head-&gt;next;\n                free(head);\n                head = temp;\n            }\n            else{\n                head = NULL;\n            }\n        }\n}\n\nvoid add(char input[]){\n        Node *temp;\n        temp = (Node*)malloc(sizeof(Node));\n        strcpy(temp-&gt;name, input);\n        temp-&gt;next = NULL;\n        if(head == NULL){\n            head = temp;\n        }\n        else{\n            head-&gt;next = temp;\n        }\n}\n\nint main(){\n\n    start:;\n    int user_menu_answer;\n    char waste;\n\n    printf(\"-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=\\n\");\n    printf(\"0) Call a customer\\n\");\n    printf(\"1) Add a customer\\n\");\n    printf(\"2) Quit\\n\");\n    printf(\"Please input your command \\n\");\n    printf(\"-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=\\n\");\n    scanf(\"%d%c\", &amp;user_menu_answer, &amp;waste);\n\n    //main menu options\n    if(user_menu_answer == 0){\n        call();\n        goto start;\n    }\n    else if (user_menu_answer == 1){\n        char input[23];\n        printf(\"Please give me the customers name: \\n\");\n        scanf(\"%[^\\n]\", input);\n        add(input);\n        goto start;\n    }\n    else if (user_menu_answer == 2){\n        printf(\"Quitting...\");\n        return 0;\n    }\n    else{\n        printf(\"You did not enter a valid option, Please try again. \\n\");\n        goto start;\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 2, "creation_date": 1492563152, "post_id": 43484409, "comment_id": 74024665, "body": "You should not use <code>gets()</code> ever under any circumstances. It was deprecated in C99, and completely removed from the language with C11."}], "answers": [{"tags": [], "owner": {"reputation": 26014, "user_id": 123695, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c1e4202cb329b1e3343a571dff94c68c?s=128&d=identicon&r=PG", "display_name": "Michael Mior", "link": "https://stackoverflow.com/users/123695/michael-mior"}, "is_accepted": true, "score": 5, "last_activity_date": 1492563774, "last_edit_date": 1492563774, "creation_date": 1492563127, "answer_id": 43484454, "question_id": 43484409, "link": "https://stackoverflow.com/questions/43484409/printing-element-of-array-prints-name-of-array-instead/43484454#43484454", "title": "Printing element of array prints name of array instead", "body": "<p>You are storing a pointer to the string passed into the <code>addToHistory</code> function in every element of the array. Since you overwrite this string when a new command is entered, when you display the history, every entry will show the last command, which in this case is <code>history</code>.</p>\n\n<p>You need to make a copy of the string to store into the history array. The easiest way to do so is to make a copy of the string.</p>\n\n<p>Instead of just storing the string in the array</p>\n\n<pre><code>history[0] = line;\n</code></pre>\n\n<p>use the <a href=\"http://man7.org/linux/man-pages/man3/strdup.3.html\" rel=\"nofollow noreferrer\"><code>strdup</code></a> function</p>\n\n<pre><code>history[0] = strdup(line);\n</code></pre>\n\n<p>Note that <code>strdup</code> dynamically allocates memory for the new string, so you'll have to make sure that you call <code>free</code> on any entries of the array that are removed or you'll have a memory leak. You will also need to free any entries which have been allocated before your program exits.</p>\n"}], "owner": {"reputation": 15, "user_id": 3564783, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/77f255569ec2ee5daf354014a563770e?s=128&d=identicon&r=PG&f=1", "display_name": "user3564783", "link": "https://stackoverflow.com/users/3564783/user3564783"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 43484454, "answer_count": 1, "score": 0, "last_activity_date": 1492563774, "creation_date": 1492562731, "question_id": 43484409, "link": "https://stackoverflow.com/questions/43484409/printing-element-of-array-prints-name-of-array-instead", "title": "Printing element of array prints name of array instead", "body": "<p>I am trying to write a simulated shell program, with a history command that prints the 10 most recent entries in the shell. The problem is that when the history command is used, instead of printing the line typed, the name of addToHistory's internal array argument, \"history\" is printed for every entry.</p>\n\n<p>Here is the code.</p>\n\n<pre><code>void addToHistory(char *line, char **history, int num) {\n    // insert line into first element of history\n    // move elements backward to make room\n    if(num == 0) {\n        history[0] = line;\n    }\n    else if (num &gt; 1 &amp;&amp; num &lt; HISTORY_BUFFER) {\n        printf(\"%d\", num);\n        printf(\"\\n\");\n        for(int i = num-1;i &gt; 0;i--) {\n            history[i] = history[i-1];\n        }\n        history[0] = line;\n    }\n    else if (num &gt; HISTORY_BUFFER) {\n        printf(\"%d\", num);\n        printf(\"\\n\");\n        for(int i = HISTORY_BUFFER-1;i &gt; 0;i--) {\n            history[i] = history[i-1];\n    }\n        history[0] = line;\n    }\n}\n\n\nint main(void)\n{\n    char *args[MAX_LINE/2 + 1];              /* command line arguments                 */\n    char *history[HISTORY_BUFFER];\n    char line[64];\n    int  should_run = 1;                     /* flag to determine when to exit program */\n    int  num = 0;\n    while (should_run) {\n        printf(\"osh&gt; \");\n        fflush(stdout);\n        gets(line);                          /*   read in the command line             */\n        printf(\"\\n\");\n        parse(line, args);                   // function for splitting input into seperate strings; works fine\n        if (strcmp(args[0], \"exit\") == 0)  { /* is it an \"exit\"?                       */\n            should_run = 0;                  /*   exit if it is                        */\n        }\n        else if (strcmp(args[0], \"history\") == 0) {\n            if (num == 0) {\n                printf(\"No commands in history. Please enter a command and try again\\n\");\n            }\n            else if (num &lt; 10) {\n                for(int i = 0;i &lt; num;i++) {\n                    printf(\"%d \", i);\n                    printf(history[i]);\n                    printf(\"\\n\");\n                }\n            }\n            else {\n                for(int i = 0;i &lt; 10;i++) {\n                    printf(\"%d \", i);\n                    printf(history[i]);\n                    printf(\"\\n\");\n                }\n            }\n        }\n        /* snip */\n        else {\n            addToHistory(line, history, num);\n            num++;\n            // executeProcess(args);\n        }\n    }\n}\n</code></pre>\n\n<p>The output produced after 10 entries is something like</p>\n\n<pre><code>osh&gt; history\n0 history\n1 history\n2 history\n3 history\n4 history\n5 history\n6 history\n7 history\n8 history\n9 history\n</code></pre>\n\n<p>where \"history\" should instead be whatever was typed into the shell at the time. After one entry the output is simply <code>0 history', so the behavior is present in all iterations of</code>addToProcess`.</p>\n"}, {"tags": ["c"], "answers": [{"comments": [{"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1492703179, "post_id": 43484375, "comment_id": 74101768, "body": "@Moderators: You should not have removed the lengthy discussion that was here."}], "tags": [], "owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "is_accepted": true, "score": 0, "last_activity_date": 1492562470, "creation_date": 1492562470, "answer_id": 43484375, "question_id": 43484359, "link": "https://stackoverflow.com/questions/43484359/is-extern-needed-for-function-defined-in-another-file/43484375#43484375", "title": "Is extern needed for function defined in another file?", "body": "<p><code>extern</code> is needed on <code>extern int randomNum;</code> to keep the declaration from being a definition.  If you have a definition of a variable in your header file, you will get multiple definition errors at link time.</p>\n\n<p>Functions are <code>extern</code> by default, so you don't need it there.</p>\n"}], "owner": {"reputation": 3, "user_id": 7150456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbba72dc0589f4773c1ade6d6fd45a3c?s=128&d=identicon&r=PG&f=1", "display_name": "Iam Su", "link": "https://stackoverflow.com/users/7150456/iam-su"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 43484375, "answer_count": 1, "score": -1, "last_activity_date": 1492562470, "creation_date": 1492562323, "question_id": 43484359, "link": "https://stackoverflow.com/questions/43484359/is-extern-needed-for-function-defined-in-another-file", "title": "Is extern needed for function defined in another file?", "body": "<p>Say I have the following header and .c file declared within my project. Imagine Type is a data type that I declared.</p>\n\n<pre><code>//header1.h\ntypedef struct Typing {\n   int size;\n} Type;\nType foo(int);\nint randomNum;\n</code></pre>\n\n<p>And here is the .c file</p>\n\n<pre><code>//header1.c\n#include \"header1.h\"\nType foo(int size) {\n   Type type;\n   type.size = 100;\n   return type;\n}\n</code></pre>\n\n<p>Let's say there is some other file called example.h that needed to call this function foo from header. Does it matter if I add the work extern for the function or variable? From what I hear, it is needed for variables. </p>\n\n<pre><code>//example.h\n#include \"header1.h\"\nextern int randomNum;\nextern Type foo(int);\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1492562073, "post_id": 43484260, "comment_id": 74024401, "body": "You don&#39;t free the <b>pointer</b>! And you never free an address."}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1492562838, "post_id": 43484260, "comment_id": 74024581, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/43456215/using-free-on-a-copy-of-the-actual-pointer-is-acceptable-correct\">Using free() on a copy of the actual pointer is acceptable / correct?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 7835412, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-tJ396Y3c4SQ/AAAAAAAAAAI/AAAAAAAAABo/AqbZbh69gqI/photo.jpg?sz=128", "display_name": "Ali Kurabiyeci", "link": "https://stackoverflow.com/users/7835412/ali-kurabiyeci"}, "edited": false, "score": 0, "creation_date": 1492561811, "post_id": 43484290, "comment_id": 74024354, "body": "so in this example it frees the malloced memory? right?"}, {"owner": {"reputation": 11, "user_id": 7876594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37f43f21f835cfcf8052f8eee50b0e45?s=128&d=identicon&r=PG&f=1", "display_name": "Yajie Niu", "link": "https://stackoverflow.com/users/7876594/yajie-niu"}, "reply_to_user": {"reputation": 77, "user_id": 7835412, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-tJ396Y3c4SQ/AAAAAAAAAAI/AAAAAAAAABo/AqbZbh69gqI/photo.jpg?sz=128", "display_name": "Ali Kurabiyeci", "link": "https://stackoverflow.com/users/7835412/ali-kurabiyeci"}, "edited": false, "score": 0, "creation_date": 1492562006, "post_id": 43484290, "comment_id": 74024390, "body": "@Ali Kurabiyeci   Yes. The pointer is a local variable. The only way it could be &#39;discarded&#39; is after you left the function where you defined it."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1492562131, "post_id": 43484290, "comment_id": 74024421, "body": "you never free an address. And using the value of the pointer after freeing the object invokes undefined behaviour. <b>This is not just &quot;dangerous&quot;, but simply illegal</b>."}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1492562208, "post_id": 43484290, "comment_id": 74024444, "body": "@Olaf, Indeed. It frees the memory addressed by <code>c</code> (the memory to which <code>c</code> points)."}, {"owner": {"reputation": 77, "user_id": 7835412, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-tJ396Y3c4SQ/AAAAAAAAAAI/AAAAAAAAABo/AqbZbh69gqI/photo.jpg?sz=128", "display_name": "Ali Kurabiyeci", "link": "https://stackoverflow.com/users/7835412/ali-kurabiyeci"}, "edited": false, "score": 0, "creation_date": 1492562984, "post_id": 43484290, "comment_id": 74024623, "body": "can i use the c pointer if i assign a new address to it by with malloc?"}, {"owner": {"reputation": 11, "user_id": 7876594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37f43f21f835cfcf8052f8eee50b0e45?s=128&d=identicon&r=PG&f=1", "display_name": "Yajie Niu", "link": "https://stackoverflow.com/users/7876594/yajie-niu"}, "reply_to_user": {"reputation": 77, "user_id": 7835412, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-tJ396Y3c4SQ/AAAAAAAAAAI/AAAAAAAAABo/AqbZbh69gqI/photo.jpg?sz=128", "display_name": "Ali Kurabiyeci", "link": "https://stackoverflow.com/users/7835412/ali-kurabiyeci"}, "edited": false, "score": 0, "creation_date": 1492563127, "post_id": 43484290, "comment_id": 74024659, "body": "@AliKurabiyeci Sure. You can. The safest way to handle it is to immediately  set it to NULL after you freed the memory."}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 77, "user_id": 7835412, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-tJ396Y3c4SQ/AAAAAAAAAAI/AAAAAAAAABo/AqbZbh69gqI/photo.jpg?sz=128", "display_name": "Ali Kurabiyeci", "link": "https://stackoverflow.com/users/7835412/ali-kurabiyeci"}, "edited": false, "score": 0, "creation_date": 1492578337, "post_id": 43484290, "comment_id": 74028820, "body": "@Ali Kurabiyeci, Yes. It&#39;s not using the variable itself that&#39;s bad, it&#39;s dereferencing its value."}], "tags": [], "owner": {"reputation": 11, "user_id": 7876594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37f43f21f835cfcf8052f8eee50b0e45?s=128&d=identicon&r=PG&f=1", "display_name": "Yajie Niu", "link": "https://stackoverflow.com/users/7876594/yajie-niu"}, "is_accepted": false, "score": -2, "last_activity_date": 1492562640, "last_edit_date": 1492562640, "creation_date": 1492561686, "answer_id": 43484290, "question_id": 43484260, "link": "https://stackoverflow.com/questions/43484260/confused-about-c-pointer-freeing/43484290#43484290", "title": "Confused about C pointer freeing", "body": "<p>It frees the address c is pointing to. You could still use the pointer 'c', but that is dangerous and you should never do it. </p>\n"}, {"comments": [{"owner": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 0, "creation_date": 1492561980, "post_id": 43484304, "comment_id": 74024383, "body": "You can free a pointer if you have malloced its own location, (but I guess I&#39;m feeling annoyingly pedantic tonight:)."}, {"owner": {"reputation": 77, "user_id": 7835412, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-tJ396Y3c4SQ/AAAAAAAAAAI/AAAAAAAAABo/AqbZbh69gqI/photo.jpg?sz=128", "display_name": "Ali Kurabiyeci", "link": "https://stackoverflow.com/users/7835412/ali-kurabiyeci"}, "reply_to_user": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 0, "creation_date": 1492562096, "post_id": 43484304, "comment_id": 74024410, "body": "@ThingyWotsit you are not helping :D at least I get the point thanks guys"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 0, "creation_date": 1492562256, "post_id": 43484304, "comment_id": 74024457, "body": "@ThingyWotsit: The job of the annoying nit-picker is already taken. But you are right :-)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 77, "user_id": 7835412, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-tJ396Y3c4SQ/AAAAAAAAAAI/AAAAAAAAABo/AqbZbh69gqI/photo.jpg?sz=128", "display_name": "Ali Kurabiyeci", "link": "https://stackoverflow.com/users/7835412/ali-kurabiyeci"}, "edited": false, "score": 0, "creation_date": 1492562515, "post_id": 43484304, "comment_id": 74024518, "body": "@AliKurabiyeci: To do my job: You pass <b>the value</b> of a pointer (to a local pointer of the function). C is <b>strictly</b> pass-by-value; you should do some research about it, a good C book should explain this fundamental concept, it actually answers your question completely (at a general level)."}], "tags": [], "owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "is_accepted": false, "score": 4, "last_activity_date": 1492561797, "creation_date": 1492561797, "answer_id": 43484304, "question_id": 43484260, "link": "https://stackoverflow.com/questions/43484260/confused-about-c-pointer-freeing/43484304#43484304", "title": "Confused about C pointer freeing", "body": "<p>You never \"free a pointer\". That's just a very sloppy shorthand that new users pick up all to easily from other sloppy former new users and never really question.</p>\n\n<p>You allocate memory and you free memory. The way you talk about that memory is via a pointer to it, but the memory is the resource, not any pointer that describes the memory.</p>\n\n<p>Since you talk about the memory via pointers, pointers are what <code>malloc</code> returns and what <code>free</code> takes, and because the deallocation function is called like the verb \"free\", and the deallocation function takes a pointer, it's an easy misstep down the slippery slope to start talking about \"freeing a pointer\". It's a similar misstep to speak \"owning a pointer\"; what is really owned is the responsibility for the resource.</p>\n"}], "owner": {"reputation": 77, "user_id": 7835412, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-tJ396Y3c4SQ/AAAAAAAAAAI/AAAAAAAAABo/AqbZbh69gqI/photo.jpg?sz=128", "display_name": "Ali Kurabiyeci", "link": "https://stackoverflow.com/users/7835412/ali-kurabiyeci"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1492562640, "creation_date": 1492561480, "question_id": 43484260, "link": "https://stackoverflow.com/questions/43484260/confused-about-c-pointer-freeing", "title": "Confused about C pointer freeing", "body": "<p>I am confused about following code, can someone clear it up for me?</p>\n\n<p>when i do:</p>\n\n<pre><code>char *a = malloc(10);\nchar *c = a;\nfree(c);\n</code></pre>\n\n<p>does it free the c pointer itself or the address which it is pointing to? (which is a which is malloced address).</p>\n\n<p>Or does it free the a pointer and leave the malloced address alone?</p>\n"}, {"tags": ["c", "arrays", "mips", "subsequence"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1492560886, "post_id": 43484170, "comment_id": 74024123, "body": "We are not a &quot;explain my homework&quot; site. Ask your tutor. It is his job to teach you and explain if you have questions."}, {"owner": {"reputation": 70, "user_id": 6907380, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/31f33090406e100c561dd39c8781af82?s=128&d=identicon&r=PG&f=1", "display_name": "CodeFreak", "link": "https://stackoverflow.com/users/6907380/codefreak"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1492561487, "post_id": 43484170, "comment_id": 74024270, "body": "@olaf if you could explain a concept, I could do my homework. I don&#39;t understand what is going on here because to me, the answer should be 7 because as soon as it reaches a lower number, shouldn&#39;t the code stop. I wasn&#39;t asking you to do it but thank you for your comment"}], "answers": [{"comments": [{"owner": {"reputation": 70, "user_id": 6907380, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/31f33090406e100c561dd39c8781af82?s=128&d=identicon&r=PG&f=1", "display_name": "CodeFreak", "link": "https://stackoverflow.com/users/6907380/codefreak"}, "edited": false, "score": 0, "creation_date": 1492561569, "post_id": 43484222, "comment_id": 74024289, "body": "that kind of makes sense but how would someone go about that. Is there a specific algorithm to follow? I don&#39;t get how it would keep checking because once it reaches a negative number, I assume that the it should stop. Not sure if that comment is clear but I understand what you said"}], "tags": [], "owner": {"reputation": 1537, "user_id": 968000, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/tU8sw.jpg?s=128&g=1", "display_name": "user968000", "link": "https://stackoverflow.com/users/968000/user968000"}, "is_accepted": false, "score": -1, "last_activity_date": 1492561423, "last_edit_date": 1492561423, "creation_date": 1492561103, "answer_id": 43484222, "question_id": 43484170, "link": "https://stackoverflow.com/questions/43484170/how-to-find-the-subsequence-of-the-largest-sums-in-c-mips/43484222#43484222", "title": "How to find the subsequence of the largest sums in C/MIPS?", "body": "<p>Your title answers your question: largest sum of subsequence</p>\n\n<p>So you have to find elements in the array whose sum is maximum. In this case : 7+2+5-3+3+6 = 20</p>\n"}, {"tags": [], "owner": {"reputation": 111, "user_id": 7088790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71082e1631dfcbb9db94831c0676b0f4?s=128&d=identicon&r=PG&f=1", "display_name": "CHillingInTheWooods", "link": "https://stackoverflow.com/users/7088790/chillinginthewooods"}, "is_accepted": false, "score": 1, "last_activity_date": 1492575752, "last_edit_date": 1492575752, "creation_date": 1492575268, "answer_id": 43486240, "question_id": 43484170, "link": "https://stackoverflow.com/questions/43484170/how-to-find-the-subsequence-of-the-largest-sums-in-c-mips/43486240#43486240", "title": "How to find the subsequence of the largest sums in C/MIPS?", "body": "<p>What he is really finding is a sum of a lot of values together so he can get the maximum number possible.\n    Stop at 7 it just give the total o 7.</p>\n\n<pre><code>7 2 = 9\n\n7 2 5 = 14\n\n7 2 5 - 3 = 11\n\n7 2 5 - 3 3 = 14\n\n7 2 5 -3 3 6 = 20\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 70, "user_id": 6907380, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/31f33090406e100c561dd39c8781af82?s=128&d=identicon&r=PG&f=1", "display_name": "CodeFreak", "link": "https://stackoverflow.com/users/6907380/codefreak"}, "is_accepted": false, "score": 0, "last_activity_date": 1492670348, "creation_date": 1492670348, "answer_id": 43512002, "question_id": 43484170, "link": "https://stackoverflow.com/questions/43484170/how-to-find-the-subsequence-of-the-largest-sums-in-c-mips/43512002#43512002", "title": "How to find the subsequence of the largest sums in C/MIPS?", "body": "<p>After the above help, the reason for my confusion was being unsure of exactly what a subsequence is doing. However, I now understand that it is taking the largest grouping of numbers and adding them together. In my example of numbers:</p>\n\n<pre><code> Array: {7,2,5,-3,3,6,-4,1}\n</code></pre>\n\n<p>It takes the digits:</p>\n\n<pre><code> Answer: {7,2,5,-3,3,6}              //adds to = 20\n</code></pre>\n\n<p>This is the largest sum of a continuous sequence of numbers. </p>\n\n<p>Another example of a simple subsequence would be:</p>\n\n<pre><code> Array: {-5 -10 5 5 -5 -10}\n Answer:{5, 5}   //it adds 5 and 5 because that is the largest continuous sequence (10)\n</code></pre>\n"}], "owner": {"reputation": 70, "user_id": 6907380, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/31f33090406e100c561dd39c8781af82?s=128&d=identicon&r=PG&f=1", "display_name": "CodeFreak", "link": "https://stackoverflow.com/users/6907380/codefreak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "answer_count": 3, "score": -3, "last_activity_date": 1492670348, "creation_date": 1492560704, "question_id": 43484170, "link": "https://stackoverflow.com/questions/43484170/how-to-find-the-subsequence-of-the-largest-sums-in-c-mips", "title": "How to find the subsequence of the largest sums in C/MIPS?", "body": "<p>So the following input in an array would be something like</p>\n\n<pre><code>  Array: {7 2 5 -3 3 6 -4 1}\n</code></pre>\n\n<p>and the subsequence would be</p>\n\n<pre><code> Subseq: : 7 2 5 -3 3 6\n</code></pre>\n\n<p>and the answer to the largest sum would be 20. So, what exactly is going on here. I am not understanding the concept of a subsequence. After reading, I thought the subsequence started at array[0] and went through to array[n] and picked the largest numbers but that does not seem to be the case because the numbers should have stopped after the number 7 then. I am confused on what exactly a subsequence is doing with this user entered array.</p>\n"}, {"tags": ["c", "dynamic-linking"], "comments": [{"owner": {"reputation": 5746, "user_id": 583570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17472ad659a41e48c4574e01d2312807?s=128&d=identicon&r=PG", "display_name": "markgz", "link": "https://stackoverflow.com/users/583570/markgz"}, "edited": false, "score": 1, "creation_date": 1492560822, "post_id": 43484056, "comment_id": 74024109, "body": "Are you specifying the <code>something_common</code> library in your linker arguments?"}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 0, "creation_date": 1492560969, "post_id": 43484056, "comment_id": 74024139, "body": "Perhaps you&#39;re compiling with <code>-fvisibility=hidden</code>. I&#39;d try slapping a visibility attribute on the symbol: <code>int CUSTOM_LOG_LEVEL __attribute__((visibility(&quot;default&quot;))) = DEFAULT_CUSTOM_LOG_LEVEL;</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7859067"}, "reply_to_user": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 0, "creation_date": 1492563761, "post_id": 43484056, "comment_id": 74024786, "body": "@PSkocik is right, also keep an eye over <code>#pragma GCC visibility push(&lt;&lt;val&gt;&gt;)</code> too if it&#39;s GCC"}, {"owner": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "edited": false, "score": 0, "creation_date": 1492570125, "post_id": 43484056, "comment_id": 74026369, "body": "You can to tell the linker where the runtime library path is <code>-Wl-,rpath</code>, or set the <code>LD_LIBRARY_PATH</code> prior to execution, or on Linux, add a config in <code>&#47;etc&#47;ld.so.conf.d&#47;</code> followed with <code>ldconfig</code>."}, {"owner": {"reputation": 1, "user_id": 7886699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e495a09e247317eca32f459a085a40a1?s=128&d=identicon&r=PG", "display_name": "M Lifshin", "link": "https://stackoverflow.com/users/7886699/m-lifshin"}, "reply_to_user": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 0, "creation_date": 1492637324, "post_id": 43484056, "comment_id": 74067508, "body": "Yes @PSkocik you got it, thank you.  I was indeed compiling with <code>fvisibility=hidden</code>.  Setting the visibility attribute on the symbol fixes the runtime error. The library path was being passed to the linker, so that was not the problem. And thank you @user7859067 for informing me of another mechanism of setting visibility."}], "owner": {"reputation": 1, "user_id": 7886699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e495a09e247317eca32f459a085a40a1?s=128&d=identicon&r=PG", "display_name": "M Lifshin", "link": "https://stackoverflow.com/users/7886699/m-lifshin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 681, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1492633897, "creation_date": 1492559736, "last_edit_date": 1492633897, "question_id": 43484056, "link": "https://stackoverflow.com/questions/43484056/c-undefined-symbol-at-runtime", "title": "C undefined symbol at runtime", "body": "<p>I have inherited a codebase that I am attempting to build and run.  I have been able to do so before, but now on a different system I am getting some runtime errors, even though compilation goes fine.  I am quite new to C and would appreciate any suggestions to move forward.</p>\n\n<p>Specifically, I have a directory, <code>common</code>, of common utilities, which gets built into a shared library, and when the main program tries to use symbols from the shared library, I get errors like this:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>some_file.so: undefined symbol: CUSTOM_LOG_LEVEL\n</code></pre>\n\n<p>The symbol is declared within a header file, <code>custom_log.h</code>, like so: </p>\n\n<pre><code>extern int CUSTOM_LOG_LEVEL;\n</code></pre>\n\n<p>The symbol is defined within the <code>custom_log.c</code> file, like so:</p>\n\n<pre><code>int CUSTOM_LOG_LEVEL = DEFAULT_CUSTOM_LOG_LEVEL;\n</code></pre>\n\n<p>These logger files are contained in a directory of other common utilities, which are all brought together in a file <code>common.h</code>.  Here is how the logger is included in the common library:</p>\n\n<pre><code>#include \"custom_log.h\"\n</code></pre>\n\n<p>After I have run configure, make, and make install, the relevant contents of the lib directory look like this:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>libsomething_common.so -&gt; libsomething_common.so.0.0.0\nlibsomething_common.so.0 -&gt; libsomething_common.so.0.0.0\nlibsomething_common.so.0.0.0\n</code></pre>\n\n<p>So there are a few symlinked .so files, and the one they end up pointing to is <code>libsomething_common.so.0.0.0</code>.  Analyzing the file with the <code>objdump</code> command yields the following results:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ objdump -t libsomething_common.so.0.0.0 | grep CUSTOM_LOG_LEVEL\n0000000000209a20 l     O .data  0000000000000004              CUSTOM_LOG_LEVEL\n</code></pre>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ objdump -T libsomething_common.so.0.0.0 | grep CUSTOM_LOG_LEVEL\n</code></pre>\n\n<p>So we can see that the symbol is not dynamic, and I believe it should be.  But how to make that happen?</p>\n\n<p>Again, I am very new to this build process and appreciate any suggestions you might have.</p>\n"}, {"tags": ["c", "embedded", "stm32", "microcontroller"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1492561225, "post_id": 43483762, "comment_id": 74024205, "body": "The best way is to get rid of the ST &quot;HAL&quot; bloatware and directly program the registers. This saves half the code at actually less effort."}, {"owner": {"reputation": 73, "user_id": 4932689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83fde0087ac712ebf6d2e12bef263cd1?s=128&d=identicon&r=PG&f=1", "display_name": "Nadim", "link": "https://stackoverflow.com/users/4932689/nadim"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1492566899, "post_id": 43483762, "comment_id": 74025532, "body": "@Olaf directly program the registers? can you elaborate for someone who is more hardware oriented?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1492568635, "post_id": 43483762, "comment_id": 74026013, "body": "Read the reference manual (you have to anyway), only include the CMSIS and register definition headers from ST and directly write/read the registers of the peripheral modules. As a hardware-oriented person, this also should suit you much better. This way you don&#39;t have to fiddle with this bloatware <b>and</b> the hardware, but only the hardware."}, {"owner": {"reputation": 3123, "user_id": 2097041, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8L21m.jpg?s=128&g=1", "display_name": "Colin", "link": "https://stackoverflow.com/users/2097041/colin"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1492587526, "post_id": 43483762, "comment_id": 74033683, "body": "I couldn&#39;t agree more with @Olaf &#39;s statement about dropping the library code. It is at best a mess, and at worst a liability. Working from the datasheet and setting the peripherals up your self, you know exactly what&#39;s going on. If it&#39;s a platform you&#39;re going to be working with lots you will eventually end up with your own HAL library anyway."}, {"owner": {"reputation": 5703, "user_id": 1401213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccb697eb985c37893ed06f3c3324c7c8?s=128&d=identicon&r=PG&f=1", "display_name": "kkrambo", "link": "https://stackoverflow.com/users/1401213/kkrambo"}, "edited": false, "score": 0, "creation_date": 1492611935, "post_id": 43483762, "comment_id": 74051326, "body": "Instead of calling MX_TIM1_Init() repeatedly, have you tried calling HAL_TIM_PWM_ConfigChannel() with the new <code>pulse_width</code> value?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 3123, "user_id": 2097041, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8L21m.jpg?s=128&g=1", "display_name": "Colin", "link": "https://stackoverflow.com/users/2097041/colin"}, "edited": false, "score": 0, "creation_date": 1492618533, "post_id": 43483762, "comment_id": 74056211, "body": "@Colin__s: That ting you will end up with is commonly called &quot;drivers&quot; :-) And it is a habit I strongly recommend to use. No hardware-access at higher abstraction layers, of course. But the drivers should be tailored for the actual use-case. Something the STlib defies."}, {"owner": {"reputation": 1060, "user_id": 2684464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aP8T6.png?s=128&g=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/2684464/paul"}, "edited": false, "score": 0, "creation_date": 1538887541, "post_id": 43483762, "comment_id": 92298581, "body": "&quot;HAL&quot; or no &quot;HAL&quot; goes either ways. Better to master both. LOL"}], "answers": [{"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1492618690, "post_id": 43492749, "comment_id": 74056323, "body": "While the M4F and M7 support floating point, they are a burden for embedded code nevertheless. Don&#39;t use them, at least not in such code. Typically only the top-level application code should deal with floats and only <b>iff</b> necessary.."}, {"owner": {"reputation": 686, "user_id": 4449225, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/5c26490e60a636f998bfd589d9555d2d?s=128&d=identicon&r=PG&f=1", "display_name": "Flip", "link": "https://stackoverflow.com/users/4449225/flip"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1492678728, "post_id": 43492749, "comment_id": 74082951, "body": "@Olaf There are cases where floating points are hazardous and ought to be avoided. Though they are much simpler to understand and serve their purpose well in this piece of illustrative code. If soft float is an issue, then the [0;100] DC can be mapped to [0;0xFFFFU] or fixed point etc. This though will be slower than hardware floating point the latter also preserving more precision."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1492709724, "post_id": 43492749, "comment_id": 74105773, "body": "Speed of float processing is not the only issue and I did not talk about hazard (which are two issues). This is not the place for tutoring, but an experienced embedded programmer will avoid floats where reasonable, which is very ofteen the problem."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1492709809, "post_id": 43492749, "comment_id": 74105819, "body": "One other problem is RAM/stack space. For CM4F, FPU registers e.g. need 64 additional bytes of stack space. This memory can be a major problem for highly parallelised MT code on small devices (which are prefered for cost reasons). But also a time-problem for the extra clocks. As I wrote: most usages of gloats in embedded are by unexperienced or lazy programmers. With all due respect, but how much experience do you have on such platforms? The STM32F7 is definitively not one of them (although here the FPU-registers take 128 bytes (<code>double</code>). F4 is borderline."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1492709965, "post_id": 43492749, "comment_id": 74105906, "body": "Btw: the precision of fixed-point is constant, the one of float is relative, so problematic to compare. 32 bit fixed-point has higher precision than IEEE754 <code>single</code> around <code>+&#47;-1E0</code>. Typical ADCs and DACs use integer or fixed-point anyway."}, {"owner": {"reputation": 686, "user_id": 4449225, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/5c26490e60a636f998bfd589d9555d2d?s=128&d=identicon&r=PG&f=1", "display_name": "Flip", "link": "https://stackoverflow.com/users/4449225/flip"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1492760829, "post_id": 43492749, "comment_id": 74125828, "body": "@Olaf Unfortunately I have to work with mostly inexperienced programmers, thus using floats tends to be less error prone, faster (even without hard float support at times) simpler and more portable. Granted for the reasons you mentioned the processors are over specified (F7s)."}], "tags": [], "owner": {"reputation": 686, "user_id": 4449225, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/5c26490e60a636f998bfd589d9555d2d?s=128&d=identicon&r=PG&f=1", "display_name": "Flip", "link": "https://stackoverflow.com/users/4449225/flip"}, "is_accepted": false, "score": 1, "last_activity_date": 1492678906, "last_edit_date": 1492678906, "creation_date": 1492596890, "answer_id": 43492749, "question_id": 43483762, "link": "https://stackoverflow.com/questions/43483762/using-stm32-hal-timer-and-adjusting-the-duty-cycle-of-a-pwm-signal/43492749#43492749", "title": "Using STM32 HAL Timer and Adjusting the Duty Cycle of a PWM signal", "body": "<p>Write your own function to update the register that governs the duty cycle. You will have to manually update the appropriate CCRx register (x is the PWM channel you're using, which is CCR1 in your case).</p>\n\n<p>The ARR register is the the register you will reference when calculating the new value for the CCR register based upon the desired duty cycle.</p>\n\n<pre><code>void adjust_PWM_DC(TIM_HandleTypeDef* const pwmHandle, const float DC)\n{\n    assert(pwmHandle != NULL);\n    assert((DC &gt;= 0.0F) &amp;&amp; (DC &lt;= 100.0F));\n\n    /* The duty cycle value is a percentage of the reload register value (ARR). Rounding is used.*/\n    uint32_t newRegVal = (uint32_t)roundf((float32_t)(pwmHandle-&gt;Instance-&gt;ARR) * (DC * 0.01F));\n\n    /*In case of the DC being calculated as higher than the reload register, cap it to the reload register*/\n    if(newRegVal &gt; pwmHandle-&gt;Instance-&gt;ARR){\n        newRegVal = pwmHandle-&gt;Instance-&gt;ARR);\n    }\n\n    /*Assign the new DC count to the capture compare register.*/\n    pwmHandle-&gt;Instance-&gt;CCR1 = (uint32_t)(roundf(newRegVal));  /*Change CCR1 to appropriate channel, or pass it in with function.*/ \n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6260, "user_id": 3820025, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/zXOn4.png?s=128&g=1", "display_name": "Bence Kaulics", "link": "https://stackoverflow.com/users/3820025/bence-kaulics"}, "is_accepted": true, "score": 21, "last_activity_date": 1496603170, "last_edit_date": 1496603170, "creation_date": 1492757791, "answer_id": 43535895, "question_id": 43483762, "link": "https://stackoverflow.com/questions/43483762/using-stm32-hal-timer-and-adjusting-the-duty-cycle-of-a-pwm-signal/43535895#43535895", "title": "Using STM32 HAL Timer and Adjusting the Duty Cycle of a PWM signal", "body": "<p>Do not reinit the timer when you want to change a setting, HAL has a dedicated macro for that purpose called:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>/**\n  * @brief  Sets the TIM Capture Compare Register value on runtime without\n  *         calling another time ConfigChannel function.\n  * @param  __HANDLE__: TIM handle.\n  * @param  __CHANNEL__ : TIM Channels to be configured.\n  *          This parameter can be one of the following values:\n  *            @arg TIM_CHANNEL_1: TIM Channel 1 selected\n  *            @arg TIM_CHANNEL_2: TIM Channel 2 selected\n  *            @arg TIM_CHANNEL_3: TIM Channel 3 selected\n  *            @arg TIM_CHANNEL_4: TIM Channel 4 selected\n  * @param  __COMPARE__: specifies the Capture Compare register new value.\n  * @retval None\n  */\n#define __HAL_TIM_SET_COMPARE(__HANDLE__, __CHANNEL__, __COMPARE__) \\\n(*(__IO uint32_t *)(&amp;((__HANDLE__)-&gt;Instance-&gt;CCR1) + ((__CHANNEL__) &gt;&gt; 2)) = (__COMPARE__))\n</code></pre>\n\n<p>For Timer 1 - Channel 1 and Timer 1 - Channel 2 it should look like:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>Data_Update();\nadjust_PWM();\n\n__HAL_TIM_SET_COMPARE(&amp;htim1, TIM_CHANNEL_1, pulse_width);\n__HAL_TIM_SET_COMPARE(&amp;htim1, TIM_CHANNEL_2, pulse_width);\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 4932689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83fde0087ac712ebf6d2e12bef263cd1?s=128&d=identicon&r=PG&f=1", "display_name": "Nadim", "link": "https://stackoverflow.com/users/4932689/nadim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36648, "favorite_count": 5, "accepted_answer_id": 43535895, "answer_count": 2, "score": 6, "last_activity_date": 1605980394, "creation_date": 1492557609, "last_edit_date": 1605980394, "question_id": 43483762, "link": "https://stackoverflow.com/questions/43483762/using-stm32-hal-timer-and-adjusting-the-duty-cycle-of-a-pwm-signal", "title": "Using STM32 HAL Timer and Adjusting the Duty Cycle of a PWM signal", "body": "<p>I used the STM32Cube initialization code generator to generate an initialized Timer function. To generate a fixed duty cycle PWM signal I added <code>HAL_TIM_Base_Start(&amp;htim1); //Starts the TIM Base generation</code> and <code>HAL_TIM_PWM_Start(&amp;htim1, TIM_CHANNEL_1)//Starts the PWM signal generation</code> to the Timer initialization function as shown below. </p>\n\n<pre class=\"lang-c prettyprint-override\"><code>/* Private variables ---------------------------------------------------------*/\nint pulse_width=0;\n\n/* TIM1 init function */\nstatic void MX_TIM1_Init(void)\n{\n\n  TIM_ClockConfigTypeDef sClockSourceConfig;\n  TIM_MasterConfigTypeDef sMasterConfig;\n  TIM_OC_InitTypeDef sConfigOC;\n  TIM_BreakDeadTimeConfigTypeDef sBreakDeadTimeConfig;\n\n  htim1.Instance = TIM1;\n  htim1.Init.Prescaler = 0;//we want a max frequency for timer, so we set prescaller to 0         \n  //And our timer will have tick frequency\n  htim1.Init.CounterMode = TIM_COUNTERMODE_UP;\n  htim1.Init.Period = 1066;//max value for timer is 16bit = 65535, TIM_Period = timer_tick_frequency / PWM_frequency - 1  \n  //In our case, for 15Khz PWM_frequency, set Period to TIM_Period = 16MHz / 15KHz - 1 = 1066\n  htim1.Init.ClockDivision = TIM_CLOCKDIVISION_DIV1;\n  htim1.Init.RepetitionCounter = 0;\n  if (HAL_TIM_Base_Init(&amp;htim1) != HAL_OK)/* to use the Timer to generate a simple time base for TIM1 */\n  {\n    Error_Handler();\n  }\n\n  sClockSourceConfig.ClockSource = TIM_CLOCKSOURCE_INTERNAL;//the default clock is the internal clock from the APBx, using this function\n  if (HAL_TIM_ConfigClockSource(&amp;htim1, &amp;sClockSourceConfig) != HAL_OK)//Initializes the TIM PWM Time Base according to the specified\n//parameters in the TIM_HandleTypeDef and create the associated handle.\n  {\n    Error_Handler();\n  }\n\n  if (HAL_TIM_PWM_Init(&amp;htim1) != HAL_OK)\n  {\n    Error_Handler();\n  }\n\n  sMasterConfig.MasterOutputTrigger = TIM_TRGO_RESET;\n  sMasterConfig.MasterSlaveMode = TIM_MASTERSLAVEMODE_DISABLE;\n  if (HAL_TIMEx_MasterConfigSynchronization(&amp;htim1, &amp;sMasterConfig) != HAL_OK)\n  {\n    Error_Handler();\n  }\n\n  //sConfig: TIM PWM configuration structure\n  //set duty cycle: pulse_length = ((1066 + 1) * duty_cycle) / (100 - 1)\n    sConfigOC.OCMode = TIM_OCMODE_PWM1;\n  sConfigOC.Pulse = pulse_width;/* 50% duty cycle is 538, set to 0 initially*///\n  sConfigOC.OCPolarity = TIM_OCPOLARITY_HIGH;\n  sConfigOC.OCNPolarity = TIM_OCNPOLARITY_HIGH;\n  sConfigOC.OCFastMode = TIM_OCFAST_DISABLE;\n  sConfigOC.OCIdleState = TIM_OCIDLESTATE_RESET;\n  sConfigOC.OCNIdleState = TIM_OCNIDLESTATE_RESET;\n  if (HAL_TIM_PWM_ConfigChannel(&amp;htim1, &amp;sConfigOC, TIM_CHANNEL_1) != HAL_OK)\n  {\n    Error_Handler();\n  }\n\n  if (HAL_TIM_PWM_ConfigChannel(&amp;htim1, &amp;sConfigOC, TIM_CHANNEL_2) != HAL_OK)\n  {\n    Error_Handler();\n  }\n\n  sBreakDeadTimeConfig.OffStateRunMode = TIM_OSSR_ENABLE;\n  sBreakDeadTimeConfig.OffStateIDLEMode = TIM_OSSI_ENABLE;\n  sBreakDeadTimeConfig.LockLevel = TIM_LOCKLEVEL_1;\n  sBreakDeadTimeConfig.DeadTime = 0;\n  sBreakDeadTimeConfig.BreakState = TIM_BREAK_ENABLE;\n  sBreakDeadTimeConfig.BreakPolarity = TIM_BREAKPOLARITY_HIGH;\n  sBreakDeadTimeConfig.AutomaticOutput = TIM_AUTOMATICOUTPUT_ENABLE;\n  if (HAL_TIMEx_ConfigBreakDeadTime(&amp;htim1, &amp;sBreakDeadTimeConfig) != HAL_OK)\n  {\n    Error_Handler();\n  }\n\n  HAL_TIM_MspPostInit(&amp;htim1);//output pin assignment\n    HAL_TIM_Base_Start(&amp;htim1); //Starts the TIM Base generation\n  if (HAL_TIM_PWM_Start(&amp;htim1, TIM_CHANNEL_1) != HAL_OK)//Starts the PWM signal generation\n  {\n    /* PWM Generation Error */\n    Error_Handler();\n  }\n\n  /* Start channel 2 */\n  if (HAL_TIM_PWM_Start(&amp;htim1, TIM_CHANNEL_2) != HAL_OK)\n  {\n    /* PWM Generation Error */\n    Error_Handler();\n  }\n\n}\n</code></pre>\n\n<p>This is enough to run the PWM at a fixed duty cycle specified in the comments above when I hard code the right value to replace <code>pulse_width</code> value in<code>sConfigOC.Pulse = pulse_width</code>.\nIn another function, I have an algorithm that would update the <code>pulse_width</code> global variable. The function is called: <code>adjust_PWM();</code>. The algorithm calculate values measured from the ADC and stored as global variables. That function is called: <code>Data_Update();</code>. In <code>main()</code>, after all functions are initialized. I call these three functions endlessly </p>\n\n<pre><code>Data_Update();\nadjust_PWM();   \nMX_TIM1_Init(); \n</code></pre>\n\n<p>I tried that and obtained weird waveforms on the oscilloscope, but that might be because The ADC pins where floating, causing floating measurements to interfere with the duty cycle by the algorithm. Also recalling the initialization of the timer continuously would interrupt the PWM signal. Is there a better way to change the duty cycle while running the code without using global variables, or without initializing the timer every time I want to update the duty cycle. Any link would be appreciated.   </p>\n"}, {"tags": ["c", "struct", "compiler-errors", "incomplete-type"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1492556468, "post_id": 43483564, "comment_id": 74022952, "body": "Use a type that actually exists. There is no <code>struct IntVec</code> in your code."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 2, "creation_date": 1492556579, "post_id": 43483564, "comment_id": 74022983, "body": "Also, you should be including the <code>.h</code> file instead of the <code>.c</code> file. It is extremely rare for including a <code>.c</code> file to be the right thing to do."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1492556745, "post_id": 43483564, "comment_id": 74023027, "body": "Change main to <code>IntVec v = intMakeEmptyVec();  intVecPush(v, 0);</code>.  Although I would recommend not using pointer typedefs as they are confusing (it looks like your code is copying an intvec by value when in fact it is not)"}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1492559285, "post_id": 43483564, "comment_id": 74023725, "body": "Code using this library will leak! (There&#39;s no way to free the vec)"}], "answers": [{"comments": [{"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 51, "user_id": 7566579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e3caa891f66541bbc597c6bad427171?s=128&d=identicon&r=PG&f=1", "display_name": "Jamie Nguyen", "link": "https://stackoverflow.com/users/7566579/jamie-nguyen"}, "edited": false, "score": 0, "creation_date": 1492557387, "post_id": 43483598, "comment_id": 74023220, "body": "@JamieNguyen As I have pointed in my answer you have to write at least IntVec v; instead of struct IntVec v;"}, {"owner": {"reputation": 51, "user_id": 7566579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e3caa891f66541bbc597c6bad427171?s=128&d=identicon&r=PG&f=1", "display_name": "Jamie Nguyen", "link": "https://stackoverflow.com/users/7566579/jamie-nguyen"}, "edited": false, "score": 0, "creation_date": 1492557721, "post_id": 43483598, "comment_id": 74023332, "body": "Changing struct IntVec; to IntVec; i get:  test.c:8:3: error: member reference type &#39;IntVec&#39; (aka &#39;struct IntVecNode <i>&#39;) is a pointer; did       you mean to use &#39;-&gt;&#39;?         v.intVecPush(v,0);         ~^          -&gt; test.c:8:3: error: incomplete definition of type &#39;struct IntVecNode&#39;         v.intVecPush(v,0);         ~^ ./intVec.h:11:16: note: forward declaration of &#39;struct IntVecNode&#39; typedef struct IntVecNode</i> IntVec;                ^ 2 errors generated.  Changing the v.IntVecPush(v,0) to v-&gt;IntVecPush(v,0) brings me back to the incomplete type error again."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 51, "user_id": 7566579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e3caa891f66541bbc597c6bad427171?s=128&d=identicon&r=PG&f=1", "display_name": "Jamie Nguyen", "link": "https://stackoverflow.com/users/7566579/jamie-nguyen"}, "edited": false, "score": 0, "creation_date": 1492558204, "post_id": 43483598, "comment_id": 74023475, "body": "@JamieNguyen See my updated post. It seems you do not understood what you are doing."}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 2, "last_activity_date": 1492558172, "last_edit_date": 1492558172, "creation_date": 1492556533, "answer_id": 43483598, "question_id": 43483564, "link": "https://stackoverflow.com/questions/43483564/why-do-i-keep-getting-error-variable-has-incomplete-type-struct-intvec/43483598#43483598", "title": "Why do I keep getting &quot;error: variable has incomplete type &#39;struct intVec&#39;?", "body": "<p>There is no structure definition <code>struct IntVec</code>.</p>\n\n<p>So the compiler is unable to define the object <code>v</code></p>\n\n<pre><code>struct IntVec v;\n</code></pre>\n\n<p>I think you mean </p>\n\n<pre><code>IntVec v;\n</code></pre>\n\n<p>And this call</p>\n\n<pre><code>v.intVecPush(v,0);\n</code></pre>\n\n<p>is invalid and does not make sense. I think there should be something like</p>\n\n<pre><code>IntVec v = intMakeEmptyVec();\nintVecPush(v,0);\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>struct IntVec v;\nv.intVecPush(v,0);\n</code></pre>\n\n<p>Also it is a bad idea to include the whole module in another module. You should place the structure definition in the header and include this header in the compilation unit with main.</p>\n\n<p>That is move these definitions</p>\n\n<pre><code>typedef struct IntVecNode {\n    int* data;\n    int sz;         // Number of elements that contain data\n    int capacity;   // How much is allocated to the array\n} IntVecNode;\n\ntypedef struct IntVecNode* IntVec;\n</code></pre>\n\n<p>in the header.</p>\n"}], "owner": {"reputation": 51, "user_id": 7566579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e3caa891f66541bbc597c6bad427171?s=128&d=identicon&r=PG&f=1", "display_name": "Jamie Nguyen", "link": "https://stackoverflow.com/users/7566579/jamie-nguyen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 22022, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1604868501, "creation_date": 1492556349, "last_edit_date": 1604868501, "question_id": 43483564, "link": "https://stackoverflow.com/questions/43483564/why-do-i-keep-getting-error-variable-has-incomplete-type-struct-intvec", "title": "Why do I keep getting &quot;error: variable has incomplete type &#39;struct intVec&#39;?", "body": "<p>I'm doing an assignment for my data structures class and I have very little experience with C structures and C in general. \nThis is the .h file that I was given to do the assignment:</p>\n\n<pre><code>#ifndef C101IntVec\n#define C101IntVec\n\ntypedef struct IntVecNode* IntVec;\n\nstatic const int intInitCap = 4;\n\nint intTop(IntVec myVec);\n\nint intData(IntVec myVec, int i);\n\nint intSize(IntVec myVec);\n\nint intCapacity(IntVec myVec);\n\nIntVec intMakeEmptyVec(void);\n\nvoid intVecPush(IntVec myVec, int newE);\n\nvoid intVecPop(IntVec myVec);\n\n#endif\n</code></pre>\n\n<p>This is the .c implementation that I've made:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include \"intVec.h\"\n\ntypedef struct IntVecNode {\n    int* data;\n    int sz;         // Number of elements that contain data\n    int capacity;   // How much is allocated to the array\n} IntVecNode;\n\ntypedef struct IntVecNode* IntVec;\n\n//static const int intInitCap = 4;\n\nint intTop(IntVec myVec) {\n    return *myVec-&gt;data;\n}\n\nint intData(IntVec myVec, int i) {\n    return *(myVec-&gt;data + i);\n}\n\nint intSize(IntVec myVec) {\n    return myVec-&gt;sz;\n}\n\nint intCapacity(IntVec myVec) {\n    return myVec-&gt;capacity;\n}\n\nIntVec intMakeEmptyVec(void) {\n    IntVec newVec = malloc(sizeof(struct IntVecNode));\n    newVec-&gt;data = malloc(intInitCap * sizeof(int));\n    newVec-&gt;sz = 0;\n    newVec-&gt;capacity = intInitCap;\n    return newVec;\n}\n\nvoid intVecPush(IntVec myVec, int newE) {\n    if (myVec-&gt;sz &gt;= myVec-&gt;capacity) {\n        int newCap = myVec-&gt;capacity * 2;\n        myVec-&gt;data = realloc(myVec-&gt;data, newCap * sizeof(int));\n    } else {\n        for (int i = 0; i &lt; myVec-&gt;capacity; i++) {\n            *(myVec-&gt;data + i) = *(myVec-&gt;data + i + 1);\n        }\n        myVec-&gt;data = &amp;newE;\n    }\n    myVec-&gt;sz++;\n}\n\nvoid intVecPop(IntVec myVec) {\n    for (int i = 0; i &lt; myVec-&gt;capacity; i++) {\n        *(myVec-&gt;data - i) = *(myVec-&gt;data - i + 1);\n    }\n    myVec-&gt;sz--;\n}\n</code></pre>\n\n<p>This is the test file:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include \"intVec.c\"\n\nint main() {\n    struct IntVec v;\n    v.intVecPush(v,0);\n\n    return 0;\n}\n</code></pre>\n\n<p>Every time I run the test file, I get the error:</p>\n\n<pre><code>test.c:7:16: error: variable has incomplete type 'struct IntVec'\n        struct IntVec v;\n                      ^\ntest.c:7:9: note: forward declaration of 'struct IntVec'\n        struct IntVec v;\n               ^\n1 error generated.\n</code></pre>\n\n<p>I've tried changing the <code>#include \"intVec.c\"</code> to <code>\"intVec.h\"</code> in the test file, however that produces the same error. What would I need to change in order to not get this error?</p>\n"}, {"tags": ["c", "string", "unicode", "utf-8", "substring"], "comments": [{"owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 1, "creation_date": 1492555572, "post_id": 43483396, "comment_id": 74022697, "body": "#1 That doesn&#39;t look like an ASCII char. #2 You need to try something yourself. SO is not a code writing service."}, {"owner": {"reputation": 1, "user_id": 7874787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d3a5b531ca6d98ab255c47be7a8d0a7?s=128&d=identicon&r=PG&f=1", "display_name": "GoWorkCode", "link": "https://stackoverflow.com/users/7874787/goworkcode"}, "reply_to_user": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 0, "creation_date": 1492556594, "post_id": 43483396, "comment_id": 74022986, "body": "in #1, how can get a utf-8 char string as index?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1492558155, "post_id": 43483396, "comment_id": 74023466, "body": "1) One question per question! 2) Unclear. 3) We are not a coding/tutoring/consulting service."}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1492559474, "post_id": 43483396, "comment_id": 74023775, "body": "Since your input is encoded using UTF-8 (I presume), your code will need to be UTF-8-aware. Alternative, you can start by &quot;decoding&quot; the UTF-8 bytes into an array of Unicode Code Points (stored in <code>int32_t</code> or <code>uint32_t</code>), and work with the array. (This requires more memory, but simplifies the problem.)"}, {"owner": {"reputation": 1, "user_id": 7874787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d3a5b531ca6d98ab255c47be7a8d0a7?s=128&d=identicon&r=PG&f=1", "display_name": "GoWorkCode", "link": "https://stackoverflow.com/users/7874787/goworkcode"}, "edited": false, "score": 0, "creation_date": 1492601615, "post_id": 43483396, "comment_id": 74043349, "body": "my Problem &amp; my question is #1."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7874787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d3a5b531ca6d98ab255c47be7a8d0a7?s=128&d=identicon&r=PG&f=1", "display_name": "GoWorkCode", "link": "https://stackoverflow.com/users/7874787/goworkcode"}, "edited": false, "score": 0, "creation_date": 1492601530, "post_id": 43484207, "comment_id": 74043279, "body": "Good,I want make Section2, but My Question is Section1, please help me to fix #1."}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1, "user_id": 7874787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d3a5b531ca6d98ab255c47be7a8d0a7?s=128&d=identicon&r=PG&f=1", "display_name": "GoWorkCode", "link": "https://stackoverflow.com/users/7874787/goworkcode"}, "edited": false, "score": 0, "creation_date": 1492612205, "post_id": 43484207, "comment_id": 74051561, "body": "I already did. I showed you how to find the start of a Code Point. That means you also know how to find the start of the next Code Point. With that, you have the starting indexes of the Code Point and the length of the Code Point. So all you have to do is print those bytes."}, {"owner": {"reputation": 1, "user_id": 7874787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d3a5b531ca6d98ab255c47be7a8d0a7?s=128&d=identicon&r=PG&f=1", "display_name": "GoWorkCode", "link": "https://stackoverflow.com/users/7874787/goworkcode"}, "edited": false, "score": 0, "creation_date": 1492612306, "post_id": 43484207, "comment_id": 74051653, "body": "tank you, i should use <code>wchar_t</code> type for string?"}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1, "user_id": 7874787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d3a5b531ca6d98ab255c47be7a8d0a7?s=128&d=identicon&r=PG&f=1", "display_name": "GoWorkCode", "link": "https://stackoverflow.com/users/7874787/goworkcode"}, "edited": false, "score": 0, "creation_date": 1492612421, "post_id": 43484207, "comment_id": 74051743, "body": "If you want, you can deal with an array of Code Points instead of dealing with UTF-8 by decoding the UTF-8 bytes (stored in <code>char</code>) into Code Points (<code>wchar_t</code>) and vice-versa on output."}, {"owner": {"reputation": 1, "user_id": 7874787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d3a5b531ca6d98ab255c47be7a8d0a7?s=128&d=identicon&r=PG&f=1", "display_name": "GoWorkCode", "link": "https://stackoverflow.com/users/7874787/goworkcode"}, "edited": false, "score": 0, "creation_date": 1492612690, "post_id": 43484207, "comment_id": 74051955, "body": "speed for me is important."}], "tags": [], "owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1492628101, "last_edit_date": 1492628101, "creation_date": 1492560991, "answer_id": 43484207, "question_id": 43483396, "link": "https://stackoverflow.com/questions/43483396/how-substring-limit-using-c/43484207#43484207", "title": "How SubString,Limit Using C?", "body": "<p>The <a href=\"https://en.wikipedia.org/wiki/Unicode\" rel=\"nofollow noreferrer\">Unicode</a> character set currently includes more than 128,000 characters (which I shall henceforth call Code Points to avoid confusion) with space reserved for far, far more. As such, a <code>char</code> which is only 8 bits in size on modern general-computing machines can't be used to contain a Code Point.</p>\n\n<p><a href=\"https://en.wikipedia.org/wiki/UTF-8\" rel=\"nofollow noreferrer\">UTF-8</a> is a way of encoding these Code Points into bytes. The following are the bytes you placed in <code>text[]</code> (assuming UTF-8 was used to encode the Code Points) and what they represent:</p>\n\n<pre><code>i:             0  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15\ntext[i]:    0x30 30 30 C3 9F 68 31 32 33 34 35 36 37 38 39 00\n              -- -- -- ----- -- -- -- -- -- -- -- -- -- -- --\nCode Point: U+30 30 30    DF 68 31 32 33 34 35 36 37 38 39  0\nGraph:         0  0  0     \u00df  h  1  2  3  4  5  6  7  8  9\n</code></pre>\n\n<p>As you can see, UTF-8 is a variable-width encoding. A single Code Points encodes to a variable number of bytes. This means you can't translate indexes-into-text into indexes-into-array-of-bytes without scanning the array.</p>\n\n<p>A Code Point encoded using UTF-8 starts with</p>\n\n<pre><code>0b0xxxxxxx    Represents an entire Code Point\n0b110xxxxx    The start of a 2-byte sequence\n0b1110xxxx    The start of a 3-byte sequence\n0b11110xxx    The start of a 4-byte sequence\n</code></pre>\n\n<p>The only other form of bytes you will encounter in UTF-8 is</p>\n\n<pre><code>0b10xxxxxx    A continuation byte (the 2nd, 3rd or 4th byte of sequence)\n</code></pre>\n\n<p>A simple way to find the <em>n</em><sup>th</sup> Code Point in a string (if you assume the input is valid UTF-8) is to search for the <em>n</em><sup>th</sup> <code>char</code> for which <code>(ch &amp; 0xC0) != 0xC0</code> is true. You can use the same approach to count the number of Code Points in a string.</p>\n"}], "owner": {"reputation": 1, "user_id": 7874787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d3a5b531ca6d98ab255c47be7a8d0a7?s=128&d=identicon&r=PG&f=1", "display_name": "GoWorkCode", "link": "https://stackoverflow.com/users/7874787/goworkcode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "closed_date": 1492563916, "answer_count": 1, "score": -2, "last_activity_date": 1492628101, "creation_date": 1492555383, "last_edit_date": 1592644375, "question_id": 43483396, "link": "https://stackoverflow.com/questions/43483396/how-substring-limit-using-c", "closed_reason": "Needs more focus", "title": "How SubString,Limit Using C?", "body": "<h1>Section#1</h1>\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdint.h&gt;\n\nint main(int argc, char **argv)\n{\n    static const unsigned char text[] = &quot;000\u00dfh123456789&quot;;\n    int32_t current=1;\n    int32_t text_len = strlen(text)-1;\n    /////////////////////////////////\n    printf(&quot;Result : %s\\n&quot;,text);\n    /////////////////////////////////\n    printf(&quot;Lenght : %d\\n&quot;,text_len);\n    /////////////////////////////////\n    printf(&quot;Index0 : %c\\n&quot;,text[0]);\n    printf(&quot;Index1 : %c\\n&quot;,text[1]);\n    printf(&quot;Index2 : %c\\n&quot;,text[2]);\n    printf(&quot;Index3 : %c\\n&quot;,text[3]);//==&gt; why show this `\ufffd`?\n    printf(&quot;Index4 : %c\\n&quot;,text[4]);//==&gt; why show this `\ufffd`?\n    printf(&quot;Index0 : %c\\n&quot;,text[5]);\n    /////////////////////////////////\n    return 0;\n}\n</code></pre>\n<p>why <code>text[3]</code> and <code>text[4]</code> show <code>\ufffd</code>?</p>\n<p>how can also support utf-8 character in <code>Index</code>?</p>\n<hr />\n<h1>Section#2</h1>\n<p>I want write a function like <code>mb_substr</code> in php.</p>\n<p><code>(verybigstring or string)</code> mb_substr ( <code>(verybigstring or string)</code> input , <code>(verybigint or int)</code> start [, <code>(verybigint or int)</code> $length = NULL ] )</p>\n<p>Some Example:</p>\n<ul>\n<li><p>mb_substr(&quot;hello world&quot;,0);</p>\n<p>==&gt;<code>hello world</code></p>\n</li>\n<li><p>mb_substr(&quot;hello world&quot;,1);</p>\n<p>==&gt;<code>ello world</code></p>\n</li>\n<li><p>mb_substr_two(&quot;hello world&quot;,1,3);</p>\n<p>==&gt;<code>el</code></p>\n</li>\n<li><p>mb_substr(&quot;hello world&quot;,-3);</p>\n<p>==&gt;<code>rld</code></p>\n</li>\n<li><p>mb_substr_two(&quot;hello world&quot;,-3,2);</p>\n<p>==&gt;<code>rldhe</code></p>\n</li>\n</ul>\n<h2>My Question is Section#1</h2>\n<p>Can anyone help me?(please)</p>\n"}, {"tags": ["c", "matrix", "openmp", "matrix-multiplication"], "answers": [{"comments": [{"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1493121501, "post_id": 43490501, "comment_id": 74268807, "body": "I was not aware that I could get MKL for free. That&#39;s great news. I can use it to compare to my own GEMM code. MKL gets about 90% of the peak FLOPS and I get 60% without much effort. The next 30% is the hard part!"}, {"owner": {"reputation": 1807, "user_id": 1900441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa3540494c1cb556bf1f517992b172fe?s=128&d=identicon&r=PG", "display_name": "Jim Cownie", "link": "https://stackoverflow.com/users/1900441/jim-cownie"}, "reply_to_user": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 1, "creation_date": 1493124036, "post_id": 43490501, "comment_id": 74270687, "body": "@Z Boson: Depending on the sizes of your matrices, you may also want to investigate libxsmm <a href=\"https://github.com/hfp/libxsmm\" rel=\"nofollow noreferrer\">github.com/hfp/libxsmm</a> which generates functions specifically for the matrix sizes you are using..."}], "tags": [], "owner": {"reputation": 1807, "user_id": 1900441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa3540494c1cb556bf1f517992b172fe?s=128&d=identicon&r=PG", "display_name": "Jim Cownie", "link": "https://stackoverflow.com/users/1900441/jim-cownie"}, "is_accepted": false, "score": 2, "last_activity_date": 1492591314, "last_edit_date": 1492591314, "creation_date": 1492590847, "answer_id": 43490501, "question_id": 43483324, "link": "https://stackoverflow.com/questions/43483324/openmp-parallelization-block-matrix-mult/43490501#43490501", "title": "OpenMP parallelization (Block Matrix Mult)", "body": "<p>Getting good performance from matrix multiplication is a big job. Since \"The best code is the code I don't have to write\", a much better use of your time would be to understand how to use a BLAS library.</p>\n\n<p>If you are using X86 processors, the Intel Math Kernel Library (MKL) is available free, and includes optimized, parallelized, matrix multiplication operations.\n<a href=\"https://software.intel.com/en-us/articles/free-mkl\" rel=\"nofollow noreferrer\">https://software.intel.com/en-us/articles/free-mkl</a> </p>\n\n<p>(FWIW, I work for Intel, but not on MKL :-))</p>\n"}, {"tags": [], "owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "is_accepted": false, "score": 0, "last_activity_date": 1492781931, "creation_date": 1492781931, "answer_id": 43544233, "question_id": 43483324, "link": "https://stackoverflow.com/questions/43483324/openmp-parallelization-block-matrix-mult/43544233#43544233", "title": "OpenMP parallelization (Block Matrix Mult)", "body": "<p>I recently started looking into dense matrix multiplication (GEMM)again. It turns out the Clang compiler is really good at optimization GEMM without needing any intrinsics (GCC still needs intrinsics).  The following code gets 60% of the peak FLOPS of my four core/eight hardware thread Skylake system. It uses block matrix multiplication.</p>\n\n<p>Hyper-threading gives worse performance so you make sure you only use threads equal to the number of cores and bind threads to prevent thread migration.</p>\n\n<pre><code>export OMP_PROC_BIND=true\nexport OMP_NUM_THREADS=4\n</code></pre>\n\n<p>Then compile like this</p>\n\n<pre><code>clang -Ofast -march=native -fopenmp -Wall gemm_so.c\n</code></pre>\n\n<p>The code</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;omp.h&gt;\n#include &lt;x86intrin.h&gt;\n\n#define SM 80\n\ntypedef __attribute((aligned(64))) float * restrict fast_float;\n\nstatic void reorder2(fast_float a, fast_float b, int n) {\n  for(int i=0; i&lt;SM; i++) memcpy(&amp;b[i*SM], &amp;a[i*n], sizeof(float)*SM);\n}\n\nstatic void kernel(fast_float a, fast_float b, fast_float c, int n) {\n  for(int i=0; i&lt;SM; i++) {\n    for(int k=0; k&lt;SM; k++) {\n      for(int j=0; j&lt;SM; j++) {\n        c[i*n + j] += a[i*n + k]*b[k*SM + j];\n      }\n    }\n  }\n}\n\nvoid gemm(fast_float a, fast_float b, fast_float c, int n) {\n  int bk = n/SM;\n\n  #pragma omp parallel\n  {\n    float *b2 = _mm_malloc(sizeof(float)*SM*SM, 64);\n    #pragma omp for collapse(3)\n    for(int i=0; i&lt;bk; i++) {\n      for(int j=0; j&lt;bk; j++) {\n        for(int k=0; k&lt;bk; k++) {\n          reorder2(&amp;b[SM*(k*n + j)], b2, n);\n          kernel(&amp;a[SM*(i*n+k)], b2, &amp;c[SM*(i*n+j)], n);\n        }\n      }\n    }\n    _mm_free(b2);\n  }\n}\n\nstatic int doublecmp(const void *x, const void *y) { return *(double*)x &lt; *(double*)y ? -1 : *(double*)x &gt; *(double*)y; }\n\ndouble median(double *x, int n) {\n  qsort(x, n, sizeof(double), doublecmp);\n  return 0.5f*(x[n/2] + x[(n-1)/2]);\n}\n\nint main(void) {\n  int cores = 4;\n  double frequency = 3.1; // i7-6700HQ turbo 4 cores\n  double peak = 32*cores*frequency;\n\n  int n = SM*10*2;\n\n  int mem = sizeof(float) * n * n;\n  float *a = _mm_malloc(mem, 64);\n  float *b = _mm_malloc(mem, 64);\n  float *c = _mm_malloc(mem, 64);\n\n  memset(a, 1, mem), memset(b, 1, mem);\n\n  printf(\"%dx%d matrix\\n\", n, n);\n  printf(\"memory of matrices: %.2f MB\\n\", 3.0*mem*1E-6);\n  printf(\"peak SP GFLOPS %.2f\\n\", peak);\n  puts(\"\");\n\n  while(1) {\n    int r = 10;\n    double times[r];\n    for(int j=0; j&lt;r; j++) {\n      times[j] = -omp_get_wtime();\n      gemm(a, b, c, n);\n      times[j] += omp_get_wtime();\n    }\n\n    double flop = 2.0*1E-9*n*n*n;  //GFLOP\n    double time_mid = median(times, r);\n    double flops_low  = flop/times[r-1], flops_mid  = flop/time_mid, flops_high = flop/times[0];\n    printf(\"%.2f %.2f %.2f %.2f\\n\", 100*flops_low/peak, 100*flops_mid/peak, 100*flops_high/peak, flops_high);\n  }\n}\n</code></pre>\n\n<p>This does GEMM 10 times per iteration of an infinite loop and prints the low, median, and high ratio of FLOPS to peak_FLOPS and finally the median FLOPS.</p>\n\n<p>You will need to adjust the following lines</p>\n\n<pre><code>int cores = 4;  \ndouble frequency = 3.1;  // i7-6700HQ turbo 4 cores \ndouble peak = 32*cores*frequency;\n</code></pre>\n\n<p>to the number of physical cores, frequency for all cores (with turbo if enabled), and the number of floating pointer operations per core which is <code>16</code> for Core2-Ivy Bridge, <code>32</code> for Haswell-Kaby Lake, and <code>64</code> for the Xeon Phi Knights Landing.</p>\n\n<p>This code may be less efficient with NUMA systems. It does not do nearly as well with Knight Landing (I just started looking into this).</p>\n"}], "owner": {"reputation": 1042, "user_id": 2582622, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/23daa027e63c563326078a9f1974252a?s=128&d=identicon&r=PG", "display_name": "halapgos1", "link": "https://stackoverflow.com/users/2582622/halapgos1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1401, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1492781931, "creation_date": 1492554906, "question_id": 43483324, "link": "https://stackoverflow.com/questions/43483324/openmp-parallelization-block-matrix-mult", "title": "OpenMP parallelization (Block Matrix Mult)", "body": "<p>I'm attempting to implement block matrix multiplication and making it more parallelized. </p>\n\n<p>This is my code : </p>\n\n<pre><code>int i,j,jj,k,kk;\nfloat sum;\nint en = 4 * (2048/4);\n    #pragma omp parallel for collapse(2) \nfor(i=0;i&lt;2048;i++) {\n    for(j=0;j&lt;2048;j++) {\n        C[i][j]=0;\n    }\n}\nfor (kk=0;kk&lt;en;kk+=4) {\n    for(jj=0;jj&lt;en;jj+=4) {\n        for(i=0;i&lt;2048;i++) {\n            for(j=jj;j&lt;jj+4;j++) {\n                sum = C[i][j];\n                for(k=kk;k&lt;kk+4;k++) {\n                    sum+=A[i][k]*B[k][j];\n                }\n                C[i][j] = sum;\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>I've been playing around with OpenMP but still have had no luck in figuring what the best way to have this done in the least amount of time. </p>\n"}]