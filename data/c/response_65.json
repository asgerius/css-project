[{"tags": ["c", "ncurses"], "comments": [{"owner": {"reputation": 45920, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "edited": false, "score": 0, "creation_date": 1459987232, "post_id": 36464360, "comment_id": 60540401, "body": "I would also utter a lot of curses if I were tasked with printing the ASCII table for no apparent purpose."}, {"owner": {"reputation": 98775, "user_id": 421195, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9a9793fdeb3b94e185c8c99c0238372f?s=128&d=identicon&r=PG", "display_name": "paulsm4", "link": "https://stackoverflow.com/users/421195/paulsm4"}, "edited": false, "score": 1, "creation_date": 1459987298, "post_id": 36464360, "comment_id": 60540416, "body": "Also note that you have to make provisions for non-printable characters, like &quot;M (carriage return, ascii 13).  SUGGESTION: Please 1)  clarify exactly what you&#39;re trying to do (in more detail), 2) show some sample code (where you&#39;re having problems)."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 45920, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "edited": false, "score": 0, "creation_date": 1459987333, "post_id": 36464360, "comment_id": 60540428, "body": "@JohnColeman: I wonder how his teacher would react if OP would take the assignment literal \u2026"}, {"owner": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "edited": false, "score": 0, "creation_date": 1459988900, "post_id": 36464360, "comment_id": 60540822, "body": "<code>ncurse</code> has nothing to do with printing control characters. <code>ncurse</code> is for generating escape sequence for terminal capabilities. I think what you wanted to know is which or what type of terminal can display control characters. In the old <code>DOS</code> world, such terminals exist where <code>^D</code> is displayed as a spade. Again this is what the terminal represents such non printing characters."}], "answers": [{"comments": [{"owner": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "reply_to_user": {"reputation": 377, "user_id": 5730960, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/HlKkG.jpg?s=128&g=1", "display_name": "altarbza", "link": "https://stackoverflow.com/users/5730960/altarbza"}, "edited": false, "score": 0, "creation_date": 1460016348, "post_id": 36464926, "comment_id": 60551135, "body": "I pointed that out in my answer.  However, doing it this way allows you to print <code>^H</code> (backspace), <code>^I</code> (tab), <code>^J</code> (line-feed), <code>^M</code> (carriage return).  There <i>is</i> no portable way to print a single character for all 256 codes."}, {"owner": {"reputation": 377, "user_id": 5730960, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/HlKkG.jpg?s=128&g=1", "display_name": "altarbza", "link": "https://stackoverflow.com/users/5730960/altarbza"}, "edited": false, "score": 0, "creation_date": 1460034319, "post_id": 36464926, "comment_id": 60564201, "body": "So, how can i print ?"}], "tags": [], "owner": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "is_accepted": false, "score": 1, "last_activity_date": 1460072327, "last_edit_date": 1460072327, "creation_date": 1459991039, "answer_id": 36464926, "question_id": 36464360, "link": "https://stackoverflow.com/questions/36464360/how-to-print-ascii-table-with-curses/36464926#36464926", "title": "How to print ASCII table with curses", "body": "<p>(n)curses will display <em>printable</em> information.  It handles certain control characters specially, such as tab, newline, carriage return, backspace (see the <a href=\"http://invisible-island.net/ncurses/man/curs_addch.3x.html\" rel=\"nofollow\">addch</a> manual page).  Every character has a printable form.  You can use <code>keyname</code> for this &mdash; and it will show control characters as <code>^A</code>, etc.  However, using <a href=\"http://invisible-island.net/ncurses/man/curs_util.3x.html#h3-keyname_key_name\" rel=\"nofollow\"><code>keyname</code></a>, you can ensure that the special characters which <code>addch</code> could use for positioning are in printable form.</p>\n\n<p>Your example might look like this:</p>\n\n<pre><code>for (i = 0; i &lt; 256; i++){\n         wprintw(tiles_window, \"%4s \", keyname(i));\n    }\n</code></pre>\n\n<p>to produce something like this:</p>\n\n<pre><code>  ^@   ^A   ^B   ^C   ^D   ^E   ^F   ^G   ^H   ^I   ^J   ^K   ^L   ^M   ^N   ^O\n  ^P   ^Q   ^R   ^S   ^T   ^U   ^V   ^W   ^X   ^Y   ^Z   ^[   ^\\   ^]   ^^   ^_\n        !    \"    #    $    %    &amp;    '    (    )    *    +    ,    -    .    /\n   0    1    2    3    4    5    6    7    8    9    :    ;    &lt;    =    &gt;    ?\n   @    A    B    C    D    E    F    G    H    I    J    K    L    M    N    O\n   P    Q    R    S    T    U    V    W    X    Y    Z    [    \\    ]    ^    _\n   `    a    b    c    d    e    f    g    h    i    j    k    l    m    n    o\n   p    q    r    s    t    u    v    w    x    y    z    {    |    }    ~   ^?\nM-^@ M-^A M-^B M-^C M-^D M-^E M-^F M-^G M-^H M-^I M-^J M-^K M-^L M-^M M-^N M-^O\nM-^P M-^Q M-^R M-^S M-^T M-^U M-^V M-^W M-^X M-^Y M-^Z M-^[ M-^\\ M-^] M-^^ M-^_\n M-   M-!  M-\"  M-#  M-$  M-%  M-&amp;  M-'  M-(  M-)  M-*  M-+  M-,  M--  M-.  M-/\n M-0  M-1  M-2  M-3  M-4  M-5  M-6  M-7  M-8  M-9  M-:  M-;  M-&lt;  M-=  M-&gt;  M-?\n M-@  M-A  M-B  M-C  M-D  M-E  M-F  M-G  M-H  M-I  M-J  M-K  M-L  M-M  M-N  M-O\n M-P  M-Q  M-R  M-S  M-T  M-U  M-V  M-W  M-X  M-Y  M-Z  M-[  M-\\  M-]  M-^  M-_\n M-`  M-a  M-b  M-c  M-d  M-e  M-f  M-g  M-h  M-i  M-j  M-k  M-l  M-m  M-n  M-o\n M-p  M-q  M-r  M-s  M-t  M-u  M-v  M-w  M-x  M-y  M-z  M-{  M-|  M-}  M-~ M-^?\n</code></pre>\n"}], "owner": {"reputation": 377, "user_id": 5730960, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/HlKkG.jpg?s=128&g=1", "display_name": "altarbza", "link": "https://stackoverflow.com/users/5730960/altarbza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 957, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1460072327, "creation_date": 1459987050, "last_edit_date": 1460040195, "question_id": 36464360, "link": "https://stackoverflow.com/questions/36464360/how-to-print-ascii-table-with-curses", "title": "How to print ASCII table with curses", "body": "<p>I'm trying to print an ASCII table, but the characters that appear are <code>^N^O^P^Q^R^S</code>, etc.</p>\n\n<p>To make an RPG engine I need to put the ASCII table on the screen for the user select the tile</p>\n\n<pre><code>for (i = 0; i &lt; 256; i++){\n     wprintw(tiles_window, \"%c\", i);\n}\n</code></pre>\n\n<p>However as I said, this just shows <code>^A^L^C</code> ...</p>\n"}, {"tags": ["c", "gcc", "compilation", "c-preprocessor", "avx"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1459985054, "post_id": 36463958, "comment_id": 60539794, "body": "Older versions of gcc certainly used to abort compilation on <code>#error</code>, so it&#39;s unclear if this is a feature or a regression"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1459985259, "post_id": 36463958, "comment_id": 60539845, "body": "I&#39;m saying that IDK whether the gcc devs did this on purpose for some reason, or if it is a compiler bug"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1459985722, "post_id": 36463958, "comment_id": 60539985, "body": "It&#39;s generally considered more useful for a compiler to report <b>all</b> errors, not just the first one, so you can fix all the problems before compiling again."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1459985813, "post_id": 36463958, "comment_id": 60540013, "body": "Unfortunately, when there are errors due to a dependency, the first error can cause a cascade of other errors, which can be annoying. But you can&#39;t have it both ways."}, {"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 2, "creation_date": 1459986116, "post_id": 36463958, "comment_id": 60540099, "body": "There is a 5yo <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=48839\" rel=\"nofollow noreferrer\">feature request</a> to change the behavior."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1459986753, "post_id": 36463958, "comment_id": 60540264, "body": "@Barmar <code>#error</code> indicates that the coder intentionally wanted compilation to stop because something went wrong with the compiler configuration . Like a compile-time assert. Any subsequent messages are useless."}, {"owner": {"reputation": 425, "user_id": 1261963, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/bc50adcb2c3a34b7c7b414d4ec70b56a?s=128&d=identicon&r=PG", "display_name": "chadjoan", "link": "https://stackoverflow.com/users/1261963/chadjoan"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1605286625, "post_id": 36463958, "comment_id": 114613069, "body": "@M.M That&#39;s not necessarily true. The C99/C11 standards do not provide a <code>#warning</code> directive, and things like <code>#pragma message</code> are compiler-specific extensions. So for &quot;ideal&quot; portability, <code>#error</code> has to do double-duty. Furthermore, it is possible to abort preprocessing by wrapping the code following the error in an <code>#ifndef MY_ERROR_HAPPENED ... #endif</code> block. The converse, forcing continuation of preprocessing after a directive (ex: <code>#error</code>) halts, is simply not possible. Thus, I prefer the &quot;don&#39;t halt&quot; behavior: it provides the greatest number of possibilities."}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1459985437, "post_id": 36464043, "comment_id": 60539895, "body": "This is a quality of implementation issue... it would also be conforming if the compiler responded to any error with the message &quot;ha ha your program is bad&quot;"}, {"owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1459985516, "post_id": 36464043, "comment_id": 60539917, "body": "@M.M I could imagine a reasonable compiler author choosing to continue compilation to report any other errors it encounters in case there are other problems with the source file, though you&#39;re right that it&#39;s probably not the best call."}], "tags": [], "owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "is_accepted": true, "score": 5, "last_activity_date": 1459984938, "creation_date": 1459984938, "answer_id": 36464043, "question_id": 36463958, "link": "https://stackoverflow.com/questions/36463958/c-preprocessing-fails-to-stop-immediately-after-an-error/36464043#36464043", "title": "C preprocessing fails to stop immediately after an #error", "body": "<p>I have a draft copy of the C ISO spec, and in &sect;4/4 - it states</p>\n\n<blockquote>\n  <p>The implementation shall not successfully translate a preprocessing translation unit containing a #error preprocessing directive unless it is part of a group skipped by conditional inclusion.</p>\n</blockquote>\n\n<p>Later on, in &sect;6.10.5, where <code>#error</code> is formally defined, it says</p>\n\n<blockquote>\n  <p>A preprocessing directive of the form\n  <code># error pp-tokens opt new-line</code>\n  causes the implementation to produce a diagnostic message that includes the specified\n  sequence of preprocessing tokens.</p>\n</blockquote>\n\n<p>In other words, the spec only requires that any code that has an <code>#error</code> just needs to fail to compile and report an error message along the way, not that the compilation immediately needs to terminate as soon as <code>#error</code> is reached.</p>\n\n<p>Given that it's considered good practice to always check the top-level errors reported by a compiler before later ones, I'd imagine a competent programmer who saw a string of errors beginning with an <code>#error</code> directive would likely know what was going on.</p>\n"}], "owner": {"reputation": 58770, "user_id": 4891738, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kE2lh.jpg?s=128&g=1", "display_name": "\u674e\u54f2\u6e90", "link": "https://stackoverflow.com/users/4891738/%e6%9d%8e%e5%93%b2%e6%ba%90"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4080, "favorite_count": 0, "accepted_answer_id": 36464043, "answer_count": 1, "score": 6, "last_activity_date": 1459985774, "creation_date": 1459984441, "last_edit_date": 1459985774, "question_id": 36463958, "link": "https://stackoverflow.com/questions/36463958/c-preprocessing-fails-to-stop-immediately-after-an-error", "title": "C preprocessing fails to stop immediately after an #error", "body": "<p>My question today should not be very much complicated, but I simply can't find a reason/solution. As a small, reproducible example, consider the following toy C code</p>\n\n<pre><code>#define _state_ 0\n\n#if _state_ == 1\nint foo(void) {return 1;}\n#else\n\n/* check GCC flags first\n   note that -mfma will automatically turn on -mavx, as shown by [gcc -mfma -dM -E - &lt; /dev/null | egrep \"SSE|AVX|FMA\"]\n   so it is sufficient to check for -mfma only */\n\n#ifndef __FMA__\n#error \"Please turn on GCC flag: -mfma\"\n#endif\n\n#include &lt;immintrin.h&gt;  /* All OK, compile C code */\nvoid foo (double *A, double *B) {\n  __m256d A1_vec = _mm256_load_pd(A);\n  __m256d B_vec = _mm256_broadcast_sd(B);\n  __m256d C1_vec = A1_vec * B_vec;\n  }\n#endif\n</code></pre>\n\n<p>I am going to compile this <code>test.c</code> file by</p>\n\n<pre><code>gcc -fpic -O2 -c test.c\n</code></pre>\n\n<p>Note I did not turn on GCC flag <code>-mfma</code>, so the <code>#error</code> will be triggered. What I would expect, is that compilation will <strong>stop immediately</strong> after GCC sees this <code>#error</code>, but this is what I got with GCC 5.3:</p>\n\n<pre><code>test.c:14:2: error: #error \"Please turn on GCC flag: -mfma\"\n #error \"Please turn on GCC flag: -mfma\"\n  ^\ntest.c: In function \u2018foo\u2019:\ntest.c:22:11: warning: AVX vector return without AVX enabled changes the ABI [-Wpsabi]\n   __m256d A1_vec = _mm256_load_pd(A);\n           ^\n</code></pre>\n\n<p>GCC does stops, but why does it also pick up a line after <code>#error</code>? Any explanation? Thanks.</p>\n\n<hr>\n\n<p>For people who want to try, there are some hardware requirement. You need an x86-64 with <code>AVX</code> <strong>and</strong> <code>FMA</code> instruction sets.</p>\n"}, {"tags": ["c", "linux", "ubuntu", "fork", "exec"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1459982741, "post_id": 36463571, "comment_id": 60539091, "body": "Program arguments must be strings. <code>max_lives</code> is an <code>int</code>."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1459982795, "post_id": 36463571, "comment_id": 60539106, "body": "And <code>file_name</code> is a pointer to a string, but <code>&amp;file_name</code> is a pointer to the pointer. You need to pass the string."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1459982953, "post_id": 36463571, "comment_id": 60539142, "body": "You shouldn&#39;t have functions inside functions. I think that&#39;s a GCC extension, not standard C."}, {"owner": {"reputation": 69, "user_id": 6101301, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f9d8a514e695f3f39b652e58786f32c7?s=128&d=identicon&r=PG&f=1", "display_name": "Karos papermoon", "link": "https://stackoverflow.com/users/6101301/karos-papermoon"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1460017127, "post_id": 36463571, "comment_id": 60551661, "body": "thanks a lot , now i want to check if my <b>file_name</b> is passing correctly in <b><i>player.c</i></b> ,is there a function to do it ?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1460017253, "post_id": 36463571, "comment_id": 60551742, "body": "The file name will be in <code>argv[1]</code>. I don&#39;t know what you mean by &quot;passing correctly&quot;. You should just try to open the file."}], "answers": [{"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 1, "last_activity_date": 1459983121, "creation_date": 1459983121, "answer_id": 36463699, "question_id": 36463571, "link": "https://stackoverflow.com/questions/36463571/c-linux-how-you-passing-argument-to-another-program/36463699#36463699", "title": "C Linux How you passing Argument to another program?", "body": "<p>You need to convert the integer <code>max_lives</code> to a string so you can pass it as a function argument. And when you're passing the file name, just pass the string itself, not the address of the pointer.</p>\n\n<pre><code>void start_game (const char* file_name,int N,int max_lives)\n{\n    pid_t pid;\n    int child_status;\n    pid = fork();\n\n\n    if(pid!=0){\n        wait(&amp;child_status);\n    }\n    else{\n        char max_lives_str[20];\n        sprintf(max_lives_str, \"%d\", max_lives);\n        if(-1 == execl(\"./player\",\"player\", file_name, max_lives_str, (char *)NULL))\n        {\n           perror(\"execlp() failed\");\n           return 1;\n        }\n    }\n    int r = 1+rand()%max_lives;\n}\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 6101301, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f9d8a514e695f3f39b652e58786f32c7?s=128&d=identicon&r=PG&f=1", "display_name": "Karos papermoon", "link": "https://stackoverflow.com/users/6101301/karos-papermoon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 548, "favorite_count": 0, "accepted_answer_id": 36463699, "answer_count": 1, "score": -1, "last_activity_date": 1459983121, "creation_date": 1459982447, "question_id": 36463571, "link": "https://stackoverflow.com/questions/36463571/c-linux-how-you-passing-argument-to-another-program", "title": "C Linux How you passing Argument to another program?", "body": "<p>I want to create another process in C.\nBut i cant figure out how to pass the argument to the other one,\nUsing <strong>fork()</strong> , <strong>exec()</strong>\nhere's my code </p>\n\n<p><strong>sls.c</strong></p>\n\n<pre><code>   int main() {\n    void start_game (const char* file_name,int N,int max_lives)\n{\n    pid_t pid;\n    int child_status;\n    pid = fork();\n\n    if(pid!=0){\n        wait(&amp;child_status);\n    }\n    else{\n       if(-1 == execl(\"./player\",\"player\",&amp;file_name,&amp;max_lives,(char *)NULL))\n       {\n       perror(\"execlp() failed\");\n       return 1;\n       }\n    }\n  int r = 1+rand()%max_lives;\n}\n    return(0);\n}\n</code></pre>\n\n<p>I need to pass <strong>file_name</strong> and <strong>max_live</strong> to <strong><em>player.c</em></strong>\nso <strong><em>player.c</em></strong> can read the same file </p>\n\n<p><strong>player.c</strong></p>\n\n<pre><code>int main(int argc,char *argv[]) {\n\npid_t child_pid = fork();\nint child_status;\nint sidekick_amount = (int)getpid%5;\n\nvoid read_ints (const char* file_name)\n{\n // Normal read file stuff here \n}\n\n\nif (child_pid!=0)\n{\n    wait(&amp;child_status);\n}\nelse\n{\n    execlp(\"\",\"-l\",NULL);\n    printf(\"Exec error\\n\");\n    exit(-1);\n}\n\n   int lives = argv[2];\n   printf(\"\\nAt pos 0: Player %d has %d lives , %d sidekicks and \n   \\n is ready to start \",(int)getppid(),lives,sidekick_amount);\n\n    read_ints(file_name);\n    return (0);\n}\n</code></pre>\n\n<p>after reading the file and set thr amount of <strong>sidekicks</strong>. \n<strong><em>player.c</em></strong> need to spawn the <strong><em>sidekick.c</em></strong> process for <strong>sidekick_amount</strong>\nas <strong><em>player.c</em></strong> child . but i cant get the <strong>file_name</strong> and <strong>lives</strong> form the <strong><em>player.c</em></strong> </p>\n\n<p><strong><em>sidekicks.c</em></strong></p>\n\n<pre><code>enter code here\n</code></pre>\n\n<p><strong>out put</strong> </p>\n\n<pre><code>At pos 0: Player 25477 has -5703328 lives , 1 sidekicks and is ready to start \n</code></pre>\n\n<p>thanks for all helps and all the answer are really appreciated </p>\n"}, {"tags": ["c", "openmp", "fibonacci"], "comments": [{"owner": {"reputation": 14761, "user_id": 290072, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/ITEsv.png?s=128&g=1", "display_name": "Almo", "link": "https://stackoverflow.com/users/290072/almo"}, "edited": false, "score": 0, "creation_date": 1459981037, "post_id": 36463275, "comment_id": 60538490, "body": "Use the eigenvalue/eigenvector computation for it. Way faster. ;)"}, {"owner": {"reputation": 682, "user_id": 1930862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f9145e0abe5952b4570803bdd3f87bee?s=128&d=identicon&r=PG", "display_name": "XHotSniperX", "link": "https://stackoverflow.com/users/1930862/xhotsniperx"}, "reply_to_user": {"reputation": 14761, "user_id": 290072, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/ITEsv.png?s=128&g=1", "display_name": "Almo", "link": "https://stackoverflow.com/users/290072/almo"}, "edited": false, "score": 0, "creation_date": 1459981164, "post_id": 36463275, "comment_id": 60538536, "body": "What do you mean? I wrote this code on purpose. I don&#39;t want to calculate fibonacci fast. I just want to know why my code has bad scalability when I am increasing the thread count for OpenMP."}, {"owner": {"reputation": 14761, "user_id": 290072, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/ITEsv.png?s=128&g=1", "display_name": "Almo", "link": "https://stackoverflow.com/users/290072/almo"}, "edited": false, "score": 0, "creation_date": 1459981268, "post_id": 36463275, "comment_id": 60538577, "body": "Hence the &quot;;)&quot; I was just making a little joke. &quot;Very little, ensign.&quot;"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1459981561, "post_id": 36463275, "comment_id": 60538703, "body": "How could it be quicker using threads? As each term is derived from the previous, it&#39;s not the kind of task that can be distributed to good effect."}, {"owner": {"reputation": 682, "user_id": 1930862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f9145e0abe5952b4570803bdd3f87bee?s=128&d=identicon&r=PG", "display_name": "XHotSniperX", "link": "https://stackoverflow.com/users/1930862/xhotsniperx"}, "edited": false, "score": 0, "creation_date": 1459981875, "post_id": 36463275, "comment_id": 60538795, "body": "Yes, I know that. But in case of the recursive implementation where I create many OpenMP tasks it should get faster with more threads. Because the recursive implementation calculates many numbers multiple times."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1459982132, "post_id": 36463275, "comment_id": 60538884, "body": "In the first place a recursive solution will be slower than the iterative one anyway, and you have answered your own question &quot;why does it get slower&quot; with your opening statement &quot;fibonacci is fundamentally sequential.&quot; It is like asking &quot;I know my feet are chained together but how can I run?&quot;"}, {"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 0, "creation_date": 1459982689, "post_id": 36463275, "comment_id": 60539068, "body": "But if you have more chains and more feet, you&#39;ll go faster because it&#39;ll take up more ground to hold them....."}, {"owner": {"reputation": 682, "user_id": 1930862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f9145e0abe5952b4570803bdd3f87bee?s=128&d=identicon&r=PG", "display_name": "XHotSniperX", "link": "https://stackoverflow.com/users/1930862/xhotsniperx"}, "edited": false, "score": 0, "creation_date": 1459982767, "post_id": 36463275, "comment_id": 60539096, "body": "You don&#39;t understand my question. I am asking why this implementation of recursive fibonacci with multiple tasks is faster when executed only on one thread and gets slower with every additional thread. I don&#39;t want to change the code above or improve it. I just want to understand OpenMP tasking."}, {"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "edited": false, "score": 1, "creation_date": 1459983110, "post_id": 36463275, "comment_id": 60539189, "body": "I think there is a flaw here, and that you have several nodes calculating in parrallel the same terms.   By the way,   calloc (N+1, ...) as you&#39;ll use a[N]..."}, {"owner": {"reputation": 682, "user_id": 1930862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f9145e0abe5952b4570803bdd3f87bee?s=128&d=identicon&r=PG", "display_name": "XHotSniperX", "link": "https://stackoverflow.com/users/1930862/xhotsniperx"}, "edited": false, "score": 0, "creation_date": 1459983113, "post_id": 36463275, "comment_id": 60539192, "body": "The last slides are telling exactly what I want to test. But I don&#39;t see the same scalability as in that pdf.  <a href=\"https://www.google.ch/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=6&amp;cad=rja&amp;uact=8&amp;ved=0ahUKEwjSmaXQjPvLAhVIchQKHYlyAAIQFghNMAU&amp;url=https%3A%2F%2Fdoc.itc.rwth-aachen.de%2Fdownload%2Fattachments%2F3475434%2FOpenMP_Overview.pdf%3Fversion%3D1%26modificationDate%3D1389011156000%26api%3Dv2&amp;usg=AFQjCNFyNXdQLoNmJoDqVv8oU7xmKyVHgg&amp;sig2=ROdphcTWyWj5bO0luU-Rtw\" rel=\"nofollow noreferrer\">google.ch/&hellip;</a>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1459983183, "post_id": 36463275, "comment_id": 60539207, "body": "I would have thought the <code>taskwait</code> would account for it. Otherwise, are you even even getting the right  answers, since the threads cannot run independently?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1459983391, "post_id": 36463275, "comment_id": 60539288, "body": "If you want to understand scalable tasking, I suggest you pick another topic to model, such as prime number calculation, which can be done independently, but even then, performs better when based on previous results (primes)."}, {"owner": {"reputation": 682, "user_id": 1930862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f9145e0abe5952b4570803bdd3f87bee?s=128&d=identicon&r=PG", "display_name": "XHotSniperX", "link": "https://stackoverflow.com/users/1930862/xhotsniperx"}, "edited": false, "score": 0, "creation_date": 1459983472, "post_id": 36463275, "comment_id": 60539314, "body": "Yes, the answers are correct. Ah and true, forgot the N+1 xD"}, {"owner": {"reputation": 682, "user_id": 1930862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f9145e0abe5952b4570803bdd3f87bee?s=128&d=identicon&r=PG", "display_name": "XHotSniperX", "link": "https://stackoverflow.com/users/1930862/xhotsniperx"}, "edited": false, "score": 0, "creation_date": 1459984055, "post_id": 36463275, "comment_id": 60539491, "body": "The taskwait is not avoidable I think because otherwise the x and y values are lost.  I just want to figure out how the guys in the link (I posted it 5 comments above) have managed to reach the scalability they showed in their slides. I want to verify and reproducy it on my own computer. That&#39;s all. I mean, I wrote pretty much the same code but it doesn&#39;t scale well xD"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1459984704, "post_id": 36463275, "comment_id": 60539702, "body": "They haven&#39;t really reached scalability. In their slides they say &quot;Don\u2018t create yet another task once a certain ( small enough )  n is reached&quot;. I think the example is to demonstrate the use of threads, not to achieve a practical way of calculating a Fibonacci sequence. In their graphs, the threaded solutions perform worse than the &quot;optimal&quot; trace, degrading rapidly the more threads are used. Which is what you say anyway."}, {"owner": {"reputation": 682, "user_id": 1930862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f9145e0abe5952b4570803bdd3f87bee?s=128&d=identicon&r=PG", "display_name": "XHotSniperX", "link": "https://stackoverflow.com/users/1930862/xhotsniperx"}, "edited": false, "score": 0, "creation_date": 1459984909, "post_id": 36463275, "comment_id": 60539759, "body": "Yes, but why is the code slower then when setting higher OpenMP thread count? According to their slides, it should get faster with each thread (up to 8)."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1459984985, "post_id": 36463275, "comment_id": 60539777, "body": "Because the more threads you have, the more waiting is required. And the author has a different execution environment from you anyway."}, {"owner": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "edited": false, "score": 1, "creation_date": 1460015197, "post_id": 36463275, "comment_id": 60550441, "body": "This is a terrible implementation of Fibonacci. It contains both a data race and also false sharing, both resulting from the fact that values are being written to <code>a[]</code> all the way along the recursion tree and in the serial part. It will not scale and will get progressively worse performance with increasing number of threads."}, {"owner": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1460015803, "post_id": 36463275, "comment_id": 60550798, "body": "@WeatherVane, the optimal solution on the slides corresponds exactly to the solution presented here and it really scales as expected, but the OP has destroyed the scalability by introducing the writes to <code>a[n]</code> at each step of the computation."}, {"owner": {"reputation": 682, "user_id": 1930862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f9145e0abe5952b4570803bdd3f87bee?s=128&d=identicon&r=PG", "display_name": "XHotSniperX", "link": "https://stackoverflow.com/users/1930862/xhotsniperx"}, "edited": false, "score": 0, "creation_date": 1460022685, "post_id": 36463275, "comment_id": 60555511, "body": "Ahhhh this makes sense! Will try out as soon as I can :) thanks"}, {"owner": {"reputation": 682, "user_id": 1930862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f9145e0abe5952b4570803bdd3f87bee?s=128&d=identicon&r=PG", "display_name": "XHotSniperX", "link": "https://stackoverflow.com/users/1930862/xhotsniperx"}, "reply_to_user": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "edited": false, "score": 0, "creation_date": 1460028952, "post_id": 36463275, "comment_id": 60560097, "body": "@HristoIliev Yep this is what I was looking for. It was really because of the writes to a[]. Without it, it scales very well! Thank you very much!  Do you have an idea how to fill the array a but without destroying the scalability?"}, {"owner": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "edited": false, "score": 1, "creation_date": 1460039807, "post_id": 36463275, "comment_id": 60568905, "body": "Simply call <code>fib()</code> with <code>n</code> in the range from <code>1</code> to <code>N</code> and store the return values, although it makes little sense and will result in duplicate work."}], "owner": {"reputation": 682, "user_id": 1930862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f9145e0abe5952b4570803bdd3f87bee?s=128&d=identicon&r=PG", "display_name": "XHotSniperX", "link": "https://stackoverflow.com/users/1930862/xhotsniperx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 774, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1459980823, "creation_date": 1459980823, "question_id": 36463275, "link": "https://stackoverflow.com/questions/36463275/multithreaded-recursive-fibonacci-with-openmp-tasks", "title": "Multithreaded recursive fibonacci with OpenMP Tasks", "body": "<p>I know fibonacci is fundamentally sequential. But I just want to test OpenMP Tasks for the recursive implementation of fibonacci series. The following code in C works fine but my Problem is, instead of getting faster results with more threads, it gets worse. Why? You can try it on your self. I want best scalability.</p>\n\n<p>Compile this code with \"gcc -O3 -fopenmp -o fib fib.c\" and run it.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;omp.h&gt;\n\ndouble serialFib(int n, double* a) {\n        if (n &lt; 2) {\n                a[n] = n;\n                return n;\n        }\n        double x = serialFib(n - 1, a);\n        double y = serialFib(n - 2, a);\n        a[n] = x + y;\n        return x + y;\n}\n\ndouble fib(int n, double* a) {\n        if (n &lt; 2) {\n                a[n] = n;\n                return n;\n        }\n        if (n &lt;= 30) { // avoid task creation overhead\n                return serialFib(n, a);\n        }\n        double x, y;\n#pragma omp task shared(x, a) firstprivate(n)\n        {\n                x = fib(n - 1, a);\n        }\n#pragma omp task shared(y, a) firstprivate(n)\n        {\n                y = fib(n - 2, a);\n        }\n#pragma omp taskwait\n        a[n] = x + y;\n        return x + y;\n}\n\nint main(int argc, char *argv[]) {\n        double t0, t1;\n        // To test scalability of recursive approach\n        // we take N = 40. Otherwise it will take too long.\n        int N = 40, i, nthreads;\n\n        printf(\"Starting benchmark...\\n\");\n        nthreads = atoi(argv[1]);\n        omp_set_num_threads(nthreads);\n        double* a = (double *) calloc(N, sizeof(double));\n        t0 = omp_get_wtime();\n\n#pragma omp parallel\n        {\n#pragma omp single\n                {\n                        fib(N, a);\n                }\n        }\n\n        t1 = omp_get_wtime();\n        for (i = 0; i &lt; N; ++i) {\n                printf(\"a[%d] = %.2f\\n\", i, a[i]);\n        }\n        printf(\"Execution time: %f\\n\", t1 - t0);\n        free(a);\n        return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "c-preprocessor", "doxygen"], "answers": [{"tags": [], "owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "is_accepted": false, "score": 0, "last_activity_date": 1460019065, "creation_date": 1460019065, "answer_id": 36471144, "question_id": 36463211, "link": "https://stackoverflow.com/questions/36463211/doxygen-preprocessing-c-file/36471144#36471144", "title": "doxygen preprocessing C file", "body": "<p>Did you tell doxygen about the macro values? If not, use</p>\n\n<pre><code>PREDEFINED=CALL_ENABLE=1\nPREDEFINED+=REPORT_ERROR_TEST=0\nMACRO_EXPANSION=YES\n</code></pre>\n\n<p>in the doxygen configuration file.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 6625712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5102e6d0ae82127569b19bba8716b2a?s=128&d=identicon&r=PG&f=1", "display_name": "SebTm", "link": "https://stackoverflow.com/users/6625712/sebtm"}, "is_accepted": false, "score": 0, "last_activity_date": 1474036241, "creation_date": 1474036241, "answer_id": 39534023, "question_id": 36463211, "link": "https://stackoverflow.com/questions/36463211/doxygen-preprocessing-c-file/39534023#39534023", "title": "doxygen preprocessing C file", "body": "<p>Depending on your needs, you could disable the pre-processing done by doxygen:</p>\n\n<pre><code># If the ENABLE_PREPROCESSING tag is set to YES, doxygen will evaluate all\n# C-preprocessor directives found in the sources and include files.\n# The default value is: YES.\n\nENABLE_PREPROCESSING   = YES\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5483492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8ace9f0ec95ce1f0af7774bdccfd84e?s=128&d=identicon&r=PG&f=1", "display_name": "Laurent", "link": "https://stackoverflow.com/users/5483492/laurent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 201, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1474036241, "creation_date": 1459980509, "last_edit_date": 1460018517, "question_id": 36463211, "link": "https://stackoverflow.com/questions/36463211/doxygen-preprocessing-c-file", "title": "doxygen preprocessing C file", "body": "<p>I have the following <strong>C</strong> code, I want to preprocess with doxygen and generate a call graph (I set ENABLE_PREPROCESSING = TRUE):</p>\n\n<pre><code>#define CALL_ENABLE 1\n#define REPORT_ERROR_TEST 0\n\n#if (CALL_ENABLE == 1)\nvoid FuncLogError()\n{\n   #if (REPORT_ERROR_TEST == 1)\n   FuncReportStatus();\n   #endif\n}\n#endif\n</code></pre>\n\n<p>In the call graph I obtain <code>FuncLogError</code> calls <code>FuncReportStatus</code>, despite the const <code>REPORT_ERROR_TEST</code> is equal 0.It seems like preprocessing is ignored for condition  <code>#if (REPORT_ERROR_TEST == 1)</code>.</p>\n"}, {"tags": ["c", "listview", "winapi"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1459980796, "post_id": 36463145, "comment_id": 60538401, "body": "Custom-draw the ListView by subclassing it to handle the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb774865.aspx\" rel=\"nofollow noreferrer\"><code>NM_CUSTOMDRAW</code></a> notification message."}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1459980832, "post_id": 36463145, "comment_id": 60538417, "body": "<a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ff919569(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/&hellip;</a>"}, {"owner": {"reputation": 894, "user_id": 5758312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15560486f98d522b0e9a43cc60c82144?s=128&d=identicon&r=PG&f=1", "display_name": "bunglehead", "link": "https://stackoverflow.com/users/5758312/bunglehead"}, "edited": false, "score": 0, "creation_date": 1460016098, "post_id": 36463145, "comment_id": 60550983, "body": "You don&#39;t need to subclass anything to use custom draw notifications, parent will receive them in a form of WM_NOTIFY."}], "owner": {"reputation": 179, "user_id": 6088487, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2b75f8c5b300360b7e1362fb2e8c84ac?s=128&d=identicon&r=PG&f=1", "display_name": "user6088487", "link": "https://stackoverflow.com/users/6088487/user6088487"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 86, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1459980173, "creation_date": 1459980173, "question_id": 36463145, "link": "https://stackoverflow.com/questions/36463145/how-to-remove-the-default-highlight-effect-when-clicking-on-a-listview-item-and", "title": "How to remove the default highlight effect when clicking on a ListView item and replace it with a custom highlight effect (Icon mode)?", "body": "<p>When you click on a ListView item, the selected item is highlighted. What I want to do is to remove this default highlight effect and replace it with a custom highlight effect.</p>\n\n<p>First I want all the items to have a border of a certain color:</p>\n\n<p><a href=\"https://i.stack.imgur.com/X1Q0U.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/X1Q0U.png\" alt=\"enter image description here\"></a></p>\n\n<p>And then when I click on an item, its color changes:</p>\n\n<p><a href=\"https://i.stack.imgur.com/EEMqc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EEMqc.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c", "gtk", "cairo", "gdkpixbuf"], "comments": [{"owner": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "edited": false, "score": 2, "creation_date": 1460003550, "post_id": 36463127, "comment_id": 60544701, "body": "<a href=\"https://developer.gnome.org/cairo/stable/cairo-cairo-t.html#cairo-paint\" rel=\"nofollow noreferrer\"><code>cairo_paint()</code> fills the clip region, not the current path</a>; you will need to convert the path you created with <code>cairo_rectangle()</code> into a clip region with <code>cairo_clip()</code>. (Remember that the clip region is preserved over time, so you will also need <code>cairo_save()</code> and <code>cairo_restore()</code> in your for loop.)"}, {"owner": {"reputation": 1444, "user_id": 6062567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e87060f0ce67ed68a097ac5186027c5?s=128&d=identicon&r=PG&f=1", "display_name": "oldtechaa", "link": "https://stackoverflow.com/users/6062567/oldtechaa"}, "edited": false, "score": 1, "creation_date": 1460034533, "post_id": 36463127, "comment_id": 60564381, "body": "I don&#39;t know how <code>cairo_fill</code> handles image sources; you could try that. I&#39;ve only ever used it with solid colors."}, {"owner": {"reputation": 698, "user_id": 1734132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63175198ead3acfc3e870fdf215e0116?s=128&d=identicon&r=PG", "display_name": "Per L&#246;wgren", "link": "https://stackoverflow.com/users/1734132/per-l%c3%b6wgren"}, "edited": false, "score": 0, "creation_date": 1460036408, "post_id": 36463127, "comment_id": 60565958, "body": "Nope, same result. The problem is that the entire source image is used as the pattern, even when I only want to use a section of it. I need to fix src_x, src_y, which isn&#39;t happening in Cairo - src_x, src_y is simply the starting point in the source image, then it adjusts in the source image by x, y accordingly."}, {"owner": {"reputation": 698, "user_id": 1734132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63175198ead3acfc3e870fdf215e0116?s=128&d=identicon&r=PG", "display_name": "Per L&#246;wgren", "link": "https://stackoverflow.com/users/1734132/per-l%c3%b6wgren"}, "edited": false, "score": 0, "creation_date": 1460036624, "post_id": 36463127, "comment_id": 60566117, "body": "I&#39;ve also tried combinations of <code>cairo_translate()</code>, but it seems trial and error amounts to infinity in this case, that&#39;s why I ask."}], "answers": [{"tags": [], "owner": {"reputation": 7642, "user_id": 436275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a72a51d31e40d541a9786e0243678029?s=128&d=identicon&r=PG", "display_name": "Uli Schlachter", "link": "https://stackoverflow.com/users/436275/uli-schlachter"}, "is_accepted": true, "score": 2, "last_activity_date": 1460051437, "creation_date": 1460051437, "answer_id": 36483677, "question_id": 36463127, "link": "https://stackoverflow.com/questions/36463127/gtk-replace-gdk-draw-pixbuf-with-cairo/36483677#36483677", "title": "GTK+ Replace gdk_draw_pixbuf with Cairo", "body": "<p>Untested, but might work. If not, then report back and I'll try again:</p>\n\n<pre><code>static void _cairo_gdk_draw_pixbuf(cairo_t *cr, cairo_surface_t *source,\n        int src_x, int src_y,\n        int dest_x, int dest_y,\n        int width, int height)\n{\n    cairo_save(cr);\n\n    /* Move (0, 0) to the destination position */\n    cairo_translate(cr, dest_x, dest_y);\n\n    /* Set up the source surface in such a way that (src_x, src_y) maps to\n     * (0, 0) in user coordinates. */\n    cairo_set_source_surface(cr, source, -src_x, -src_y);\n\n    /* Do the drawing */\n    cairo_rectangle(cr, 0, 0, width, height);\n    cairo_fill(cr);\n\n    /* Undo all of our modifications to the drawing state */\n    cairo_restore(cr);\n}\n</code></pre>\n\n<p>The above function should work like <code>gdk_draw_pixbuf</code> (well, similar to it).</p>\n"}], "owner": {"reputation": 698, "user_id": 1734132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63175198ead3acfc3e870fdf215e0116?s=128&d=identicon&r=PG", "display_name": "Per L&#246;wgren", "link": "https://stackoverflow.com/users/1734132/per-l%c3%b6wgren"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 862, "favorite_count": 3, "accepted_answer_id": 36483677, "answer_count": 1, "score": 1, "last_activity_date": 1460051437, "creation_date": 1459980070, "last_edit_date": 1459980378, "question_id": 36463127, "link": "https://stackoverflow.com/questions/36463127/gtk-replace-gdk-draw-pixbuf-with-cairo", "title": "GTK+ Replace gdk_draw_pixbuf with Cairo", "body": "<p>I'm working on a GtkDrawingArea which, in the expose event, is drawing a section of a pixbuf in a tiled manner. The tiling type varies - depending on the source image; it can be orthogonal, isometric or hexagonal. Drawing this with gdk_draw_pixmap is simple enough; here is an example on how it looks for isometric tiling:</p>\n\n<pre><code>for(y=0,row=0; y+tile_height&lt;height; y+=tile_half_height,++row)\n  for(x=((row&amp;1)? tile_half_width : 0); x+tile_width&lt;width; x+=tile_width)\n    gdk_draw_pixbuf(widget-&gt;window,NULL,\n                    pixbuf,src_x,src_y,\n                    x,y,tile_width,tile_height,\n                    GDK_RGB_DITHER_NONE,0,0);\n</code></pre>\n\n<p>Result:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Vrbtu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Vrbtu.png\" alt=\"Isometric tiling with gdk_draw_pixbuf\"></a></p>\n\n<p>However, drawing the same with Cairo proved to be quite not the same. This is what I have so far, which isn't working:</p>\n\n<pre><code>cairo_t *cr = gdk_cairo_create(widget-&gt;window);\ngdk_cairo_set_source_pixbuf(cr,pixbuf,src_x,src_y);\nfor(y=0,row=0; y+tile_height&lt;height; y+=tile_half_height,++row)\n  for(x=((row&amp;1)? tile_half_width : 0); x+tile_width&lt;width; x+=tile_width) {\n    cairo_rectangle(cr,x,y,tile_width,tile_height);\n    cairo_paint(cr);\n  }\n}\ncairo_destroy(cr);\n</code></pre>\n\n<p>Result:</p>\n\n<p><a href=\"https://i.stack.imgur.com/ghLXG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ghLXG.png\" alt=\"Isometric tiling with Cairo\"></a></p>\n\n<p>Cairo simply refuses to draw the image as a normal raster image would be drawn. What am I doing wrong, how is this solved?</p>\n"}, {"tags": ["c", "compilation", "compiler-errors", "makefile"], "comments": [{"owner": {"reputation": 1964, "user_id": 1320881, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b69670b7cc6bce132f443eee557c9448?s=128&d=identicon&r=PG", "display_name": "Unimportant", "link": "https://stackoverflow.com/users/1320881/unimportant"}, "edited": false, "score": 1, "creation_date": 1459979284, "post_id": 36462907, "comment_id": 60537811, "body": "<code>#include &lt;sys\\types.h&gt;</code>  error could be caused because of ` \\ ` in code in stead of ` / `"}, {"owner": {"reputation": 98775, "user_id": 421195, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9a9793fdeb3b94e185c8c99c0238372f?s=128&d=identicon&r=PG", "display_name": "paulsm4", "link": "https://stackoverflow.com/users/421195/paulsm4"}, "edited": false, "score": 1, "creation_date": 1459979761, "post_id": 36462907, "comment_id": 60537993, "body": "There <i>IS</i> no &quot;sys\\types.h&quot;.  That&#39;s the equivalent of &quot;<code>sys&lt;tab&gt;ypes.h</code>&quot;!  You need <code>#include &lt;sys&#47;types.h&gt;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 525, "user_id": 2747961, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/2f020f3f1b168067b0b1c06fb1094081?s=128&d=identicon&r=PG&f=1", "display_name": "ddz", "link": "https://stackoverflow.com/users/2747961/ddz"}, "edited": false, "score": 1, "creation_date": 1459980110, "post_id": 36462980, "comment_id": 60538136, "body": "funny thing he wrote <code>$echo &quot;#include &lt;sys&#47;types.h&gt;&quot; | gcc -E -x c - | grep types</code>"}, {"owner": {"reputation": 194, "user_id": 4955118, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FSFY-mD9PLU/AAAAAAAAAAI/AAAAAAAAALs/ZyLLxe1hayM/photo.jpg?sz=128", "display_name": "Shahe Ansar", "link": "https://stackoverflow.com/users/4955118/shahe-ansar"}, "reply_to_user": {"reputation": 525, "user_id": 2747961, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/2f020f3f1b168067b0b1c06fb1094081?s=128&d=identicon&r=PG&f=1", "display_name": "ddz", "link": "https://stackoverflow.com/users/2747961/ddz"}, "edited": false, "score": 1, "creation_date": 1459980234, "post_id": 36462980, "comment_id": 60538174, "body": "@LuizEduardoF. I know! But then again, we all make stupid mistakes from time to time so yeah.."}, {"owner": {"reputation": 1341, "user_id": 1509512, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a55c6ff0a5c32cfe02cdf39d1cd27a4d?s=128&d=identicon&r=PG", "display_name": "torrho", "link": "https://stackoverflow.com/users/1509512/torrho"}, "edited": false, "score": 1, "creation_date": 1459982932, "post_id": 36462980, "comment_id": 60539138, "body": ":(  This was such a painful observation to miss"}, {"owner": {"reputation": 194, "user_id": 4955118, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FSFY-mD9PLU/AAAAAAAAAAI/AAAAAAAAALs/ZyLLxe1hayM/photo.jpg?sz=128", "display_name": "Shahe Ansar", "link": "https://stackoverflow.com/users/4955118/shahe-ansar"}, "reply_to_user": {"reputation": 1341, "user_id": 1509512, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a55c6ff0a5c32cfe02cdf39d1cd27a4d?s=128&d=identicon&r=PG", "display_name": "torrho", "link": "https://stackoverflow.com/users/1509512/torrho"}, "edited": false, "score": 1, "creation_date": 1460022696, "post_id": 36462980, "comment_id": 60555517, "body": "@torrho Everyone goes through that sometime or another, so don&#39;t worry ;-)"}], "tags": [], "owner": {"reputation": 194, "user_id": 4955118, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FSFY-mD9PLU/AAAAAAAAAAI/AAAAAAAAALs/ZyLLxe1hayM/photo.jpg?sz=128", "display_name": "Shahe Ansar", "link": "https://stackoverflow.com/users/4955118/shahe-ansar"}, "is_accepted": true, "score": 5, "last_activity_date": 1459979295, "creation_date": 1459979295, "answer_id": 36462980, "question_id": 36462907, "link": "https://stackoverflow.com/questions/36462907/compilation-error-fatal-error-sys-types-h-no-such-file-or-directory-include/36462980#36462980", "title": "compilation error fatal error: sys\\types.h: No such file or directory #include &lt;sys\\types.h&gt;", "body": "<p>You mean\n<code>#include &lt;sys/types.h&gt;</code> not <code>#include &lt;sys\\types.h&gt;</code></p>\n"}], "owner": {"reputation": 1341, "user_id": 1509512, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a55c6ff0a5c32cfe02cdf39d1cd27a4d?s=128&d=identicon&r=PG", "display_name": "torrho", "link": "https://stackoverflow.com/users/1509512/torrho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10882, "favorite_count": 0, "closed_date": 1460015608, "accepted_answer_id": 36462980, "answer_count": 1, "score": 1, "last_activity_date": 1459979295, "creation_date": 1459979010, "last_edit_date": 1495540350, "question_id": 36462907, "link": "https://stackoverflow.com/questions/36462907/compilation-error-fatal-error-sys-types-h-no-such-file-or-directory-include", "closed_reason": "Not suitable for this site", "title": "compilation error fatal error: sys\\types.h: No such file or directory #include &lt;sys\\types.h&gt;", "body": "<p>I've looked and looked for a solution to this.  Sure there are these links that suggest one thing or another:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/33819808/error-sys-types-h-no-such-directory-found\">Error :sys/types.h No such directory found</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/16496635/fatal-error-sys-socket-h-no-such-file-or-directory-on-32bit\">fatal error: sys/socket.h: No such file or directory on 32bit</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/33819808/error-sys-types-h-no-such-directory-found\">Error :sys/types.h No such directory found</a></p>\n\n<p>and other similar links too.  </p>\n\n<p>Let me give you the error, the relevant Makefile statements and show you my directory structure for include.</p>\n\n<p><strong>The Error</strong></p>\n\n<pre><code>gcc -o obj/nmlflpth.o -std=c99 -Ilarc/include -Ilarc/modules/include -Ilarc/milesup -Ilarc/pftk -Ilarc/npsol -Ilarc/src -Ilarc/uih -Ilarc/util -Ilarc/uopt -Ilarc/pgm -Ilarc/navlrc -Ilarc/modules/production/common -Ilarc/src_test -Ilarc/gtest/include -c -O2 larc/uih/nmlflpth.c\nlarc/uih/nmlflpth.c:48:23: fatal error: sys\\types.h: No such file or directory\n#include &lt;sys\\types.h&gt;\n</code></pre>\n\n<p><strong>The Relevant Makefile Statements</strong></p>\n\n<pre><code># list of all dirs with compilable C, C++ and F77 code\ndirs    :=  larc/milesup \\\n            larc/pftk \\\n            larc/npsol \\\n            larc/src \\\n            larc/uih \\\n            larc/util \\\n            larc/uopt \\\n            larc/pgm \\\n            larc/navlrc \\\n            larc/modules/production/common\n\n# list of dirs with include/header files\nidirs   := larc/include larc/modules/include\nidirs   += $(dirs)\nidirs   += larc/gtest/include\nipaths  := $(addprefix -I, $(idirs))\ncflags  := -std=c99 $(ipaths)\noptflag := -O2\n\ncdefines:= -DVERSION_BUILD_DATE=\"\\\"$(shell date)\\\"\" \\\n       -DVERSION_VENDOR=\"\\\"$(VENDOR)\\\"\" \\\n       -DVERSION_OSTYPE=\"\\\"$(OSTYPE)\\\"\" \\\n       -DVERSION_HOST=\"\\\"$(HOST)\\\"\" \\\n       -DVERSION_USER_NAME=\"\\\"$(USER)\\\"\" \\\n       -DVERSION_VIEW_NAME=\"\\\"NONCLEARCASE\\\"\"   \n\n$(cobjs): obj/%.o: %.c\n    # $(CC) -o $@ $(cflags) -c $(optflag) $&lt;\n    @ -mkdir -p obj/\n    @ $(CC) -o $@ $(cflags) $(cdefines) $(ipaths) -c $(optflag) $&lt;\n</code></pre>\n\n<p>note that:\n    @ $(CC) -o $@ $(cflags) $(cdefines) $(ipaths) -c $(optflag) $&lt;\nReally only seems to output the following \n    @ $(CC) -o $@ $(cflags) -c $(optflag) $&lt;</p>\n\n<p>why?  I have no clue. </p>\n\n<p><strong>Include folders for sys/types.h</strong></p>\n\n<p>So this is what gcc is looking for:</p>\n\n<pre><code>$echo \"#include &lt;sys/types.h&gt;\" | gcc -E -x c - | grep types\n# 1 \"/usr/include/x86_64-linux-gnu/sys/types.h\" 1 3 4\n# 25 \"/usr/include/x86_64-linux-gnu/sys/types.h\" 3 4\n# 26 \"/usr/include/x86_64-linux-gnu/sys/types.h\" 2 3 4\n# 1 \"/usr/include/x86_64-linux-gnu/bits/types.h\" 1 3 4\n# 27 \"/usr/include/x86_64-linux-gnu/bits/types.h\" 3 4\n# 28 \"/usr/include/x86_64-linux-gnu/bits/types.h\" 2 3 4\n# 121 \"/usr/include/x86_64-linux-gnu/bits/types.h\" 3 4\n# 1 \"/usr/include/x86_64-linux-gnu/bits/typesizes.h\" 1 3 4\n# 122 \"/usr/include/x86_64-linux-gnu/bits/types.h\" 2 3 4\n# 30 \"/usr/include/x86_64-linux-gnu/sys/types.h\" 2 3 4\n# 60 \"/usr/include/x86_64-linux-gnu/sys/types.h\" 3 4\n# 98 \"/usr/include/x86_64-linux-gnu/sys/types.h\" 3 4\n# 132 \"/usr/include/x86_64-linux-gnu/sys/types.h\" 3 4\n# 133 \"/usr/include/x86_64-linux-gnu/sys/types.h\" 2 3 4\n# 146 \"/usr/include/x86_64-linux-gnu/sys/types.h\" 3 4\n# 147 \"/usr/include/x86_64-linux-gnu/sys/types.h\" 2 3 4\n# 194 \"/usr/include/x86_64-linux-gnu/sys/types.h\" 3 4\n# 216 \"/usr/include/x86_64-linux-gnu/sys/types.h\" 3 4\n# 217 \"/usr/include/x86_64-linux-gnu/sys/types.h\" 2 3 4\n# 220 \"/usr/include/x86_64-linux-gnu/sys/types.h\" 2 3 4\n# 223 \"/usr/include/x86_64-linux-gnu/sys/types.h\" 2 3 4\n# 270 \"/usr/include/x86_64-linux-gnu/sys/types.h\" 3 4\n# 1 \"/usr/include/x86_64-linux-gnu/bits/pthreadtypes.h\" 1 3 4\n# 21 \"/usr/include/x86_64-linux-gnu/bits/pthreadtypes.h\" 3 4\n# 22 \"/usr/include/x86_64-linux-gnu/bits/pthreadtypes.h\" 2 3 4\n# 60 \"/usr/include/x86_64-linux-gnu/bits/pthreadtypes.h\" 3 4\n# 90 \"/usr/include/x86_64-linux-gnu/bits/pthreadtypes.h\" 3 4\n# 124 \"/usr/include/x86_64-linux-gnu/bits/pthreadtypes.h\" 3 4\n# 211 \"/usr/include/x86_64-linux-gnu/bits/pthreadtypes.h\" 3 4\n# 271 \"/usr/include/x86_64-linux-gnu/sys/types.h\" 2 3 4\n</code></pre>\n\n<p>I have the following folder content for types.h:</p>\n\n<pre><code>$ls /usr/include/x86_64-linux-gnu/sys |grep types.h\nbitypes.h\ntypes.h\n</code></pre>\n\n<p>and </p>\n\n<pre><code>ls /usr/include/sys |grep types.h\nbitypes.h\ntypes.h\n</code></pre>\n\n<p>from debian package:</p>\n\n<pre><code>$ dpkg -S /usr/include/sys/types.h \nlibc6-dev-amd64: /usr/include/sys/types.h\n$ dpkg -S /usr/include/x86_64-linux-gnu/sys/types.h \nlibc6-dev:amd64: /usr/include/x86_64-linux-gnu/sys/types.h\n</code></pre>\n\n<p>Any help on this is greatly appreciated.  Thanks!</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1459978074, "post_id": 36462670, "comment_id": 60537269, "body": "ok, so what&#39;s the question?"}, {"owner": {"reputation": 54, "user_id": 4754994, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-2LonMYsOLjs/AAAAAAAAAAI/AAAAAAAAABo/pXKtf8nb-oE/photo.jpg?sz=128", "display_name": "Amir Khasru", "link": "https://stackoverflow.com/users/4754994/amir-khasru"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1459978379, "post_id": 36462670, "comment_id": 60537422, "body": "What&#39;s the problem with the declaration?"}, {"owner": {"reputation": 1964, "user_id": 1320881, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b69670b7cc6bce132f443eee557c9448?s=128&d=identicon&r=PG", "display_name": "Unimportant", "link": "https://stackoverflow.com/users/1320881/unimportant"}, "edited": false, "score": 1, "creation_date": 1459978888, "post_id": 36462670, "comment_id": 60537650, "body": "<a href=\"http://stackoverflow.com/questions/9446707/correct-way-of-passing-2-dimensional-array-into-a-function\" title=\"correct way of passing 2 dimensional array into a function\">stackoverflow.com/questions/9446707/&hellip;</a>"}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 2, "creation_date": 1459979091, "post_id": 36462670, "comment_id": 60537737, "body": "<code>int **</code> and <code>int [][]</code> are incompatible data types.  Instead of <code>int **</code>, you need to use <code>int (*)[]</code> with the appropriate value for the array dimension (in this case, it&#39;s 5).  So <code>int (*a)[5]</code>.  If you want to allow a variable dimension, then you can pass that as an argument that precedes the array argument."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1459979797, "post_id": 36462670, "comment_id": 60538008, "body": "What happened to <code>#include &lt;stdio.h&gt;</code> A fragmented <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a> is one card short of a full house."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1459980216, "post_id": 36462670, "comment_id": 60538169, "body": "@MichaelPetch lovely to see you on a C thread. Is the wind from the Northbridge today?"}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1459980290, "post_id": 36462670, "comment_id": 60538193, "body": "@WeatherVane : lol, it is a slow day on the assembler related tags. Was bored of editing questions lol."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1459980406, "post_id": 36462670, "comment_id": 60538254, "body": "@MichaelPetch so... I should have said &quot;Southbridge&quot; perhaps. Sorry I deleted the earlier comment."}], "answers": [{"tags": [], "owner": {"reputation": 1804, "user_id": 4313775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kpFpj.jpg?s=128&g=1", "display_name": "David van rijn", "link": "https://stackoverflow.com/users/4313775/david-van-rijn"}, "is_accepted": false, "score": 1, "last_activity_date": 1459979770, "creation_date": 1459979770, "answer_id": 36463063, "question_id": 36462670, "link": "https://stackoverflow.com/questions/36462670/passing-address-of-array/36463063#36463063", "title": "Passing address of array", "body": "<p>The confusion is in the fact that <code>int x[5]</code> is not a pointer. It can be used as a pointer, but it is actually a block of 5 <code>int</code>s. And by this logic, <code>int y[5][5]</code> is also not a double pointer. This however cannot be used as a double pointer. Simply because there is no actual pointer pointing to each row. It is just a bunch (25) of integers, of which you( and the compiler) know how big each row is. So that you know that element [0,4] are the first row [5,9] the second, etc.\nThis means that you have to tell the function how log the rows are. There are two ways to do this. One is to explicitly make add accept blocks of 5x5</p>\n\n<pre><code>void add(int a[5][5],int b[5][5],int c[5][5],int row,int col){\n   ...\n}\n</code></pre>\n\n<p>The other is to pass it as a single pointer (eg. <code>int* a</code>), and to pass the width as another argument. </p>\n"}, {"comments": [{"owner": {"reputation": 1804, "user_id": 4313775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kpFpj.jpg?s=128&g=1", "display_name": "David van rijn", "link": "https://stackoverflow.com/users/4313775/david-van-rijn"}, "edited": false, "score": 0, "creation_date": 1460023804, "post_id": 36463149, "comment_id": 60556351, "body": "It is a nice way, but personally i think the notation <code>c[ rowsize*i + j]</code> more clear, but both is good."}, {"owner": {"reputation": 194, "user_id": 4955118, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FSFY-mD9PLU/AAAAAAAAAAI/AAAAAAAAALs/ZyLLxe1hayM/photo.jpg?sz=128", "display_name": "Shahe Ansar", "link": "https://stackoverflow.com/users/4955118/shahe-ansar"}, "reply_to_user": {"reputation": 1804, "user_id": 4313775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kpFpj.jpg?s=128&g=1", "display_name": "David van rijn", "link": "https://stackoverflow.com/users/4313775/david-van-rijn"}, "edited": false, "score": 0, "creation_date": 1460025099, "post_id": 36463149, "comment_id": 60557247, "body": "@Davidvanrijn It&#39;s a personal preference, since it makes it easy for me to imagine it as a table or cuboid in my head when written like that."}, {"owner": {"reputation": 1804, "user_id": 4313775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kpFpj.jpg?s=128&g=1", "display_name": "David van rijn", "link": "https://stackoverflow.com/users/4313775/david-van-rijn"}, "edited": false, "score": 0, "creation_date": 1460029170, "post_id": 36463149, "comment_id": 60560285, "body": "Yea, whatever works for you :) I just wanted both ways on record. ( I wasn&#39;t critisizing)"}, {"owner": {"reputation": 194, "user_id": 4955118, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FSFY-mD9PLU/AAAAAAAAAAI/AAAAAAAAALs/ZyLLxe1hayM/photo.jpg?sz=128", "display_name": "Shahe Ansar", "link": "https://stackoverflow.com/users/4955118/shahe-ansar"}, "reply_to_user": {"reputation": 1804, "user_id": 4313775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kpFpj.jpg?s=128&g=1", "display_name": "David van rijn", "link": "https://stackoverflow.com/users/4313775/david-van-rijn"}, "edited": false, "score": 0, "creation_date": 1460059270, "post_id": 36463149, "comment_id": 60581448, "body": "@Davidvanrijn I know, I just wanted to explain"}], "tags": [], "owner": {"reputation": 194, "user_id": 4955118, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FSFY-mD9PLU/AAAAAAAAAAI/AAAAAAAAALs/ZyLLxe1hayM/photo.jpg?sz=128", "display_name": "Shahe Ansar", "link": "https://stackoverflow.com/users/4955118/shahe-ansar"}, "is_accepted": false, "score": 1, "last_activity_date": 1460025023, "last_edit_date": 1460025023, "creation_date": 1459980180, "answer_id": 36463149, "question_id": 36462670, "link": "https://stackoverflow.com/questions/36462670/passing-address-of-array/36463149#36463149", "title": "Passing address of array", "body": "<p>In your add function, <code>int**</code> is NOT <code>int[][]</code>\nBoth are extremely different datatypes, one is an array of arrays, and the other is a pointer to a pointer. You should declare it as a <code>int (*name)[size]</code>\nor alternatively (this happens to be my favorite way), typecast it to a pointer and then use simple pointer arithmetic - </p>\n\n<pre><code>int add(int *a, int *b, int *c, int rows, int columns, int rowsize){\n    for(int i = 0; i &lt; rows; i++){\n        for(int j = 0; j &lt; columns; j++){\n            *(c + rowsize*i + j) = (*(a + rowsize*i + j))*(*(b + rowsize*i + j));\n        }\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11698, "user_id": 5399734, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2162d669508364bb0c03aba1a2473aa8?s=128&d=identicon&r=PG&f=1", "display_name": "nalzok", "link": "https://stackoverflow.com/users/5399734/nalzok"}, "is_accepted": false, "score": 3, "last_activity_date": 1459983194, "creation_date": 1459983194, "answer_id": 36463712, "question_id": 36462670, "link": "https://stackoverflow.com/questions/36462670/passing-address-of-array/36463712#36463712", "title": "Passing address of array", "body": "<p>When passed, <code>a</code>, <code>b</code> and <code>c</code> decay to <code>int (*)[5]</code>, rather than <code>int **</code>.</p>\n\n<p>So you should rewrite your function as:</p>\n\n<pre><code>void add(int a[][5], int b[][5], int c[][5], size_t row, size_t col)\n{\n    size_t i, j;\n    for(i = 0; i &lt; row; i++)\n    {\n        for(j = 0; j &lt; col; j++)\n        {\n            c[i][j] = a[i][j] * b[i][j];\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 54, "user_id": 4754994, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-2LonMYsOLjs/AAAAAAAAAAI/AAAAAAAAABo/pXKtf8nb-oE/photo.jpg?sz=128", "display_name": "Amir Khasru", "link": "https://stackoverflow.com/users/4754994/amir-khasru"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 267, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1460025023, "creation_date": 1459978004, "last_edit_date": 1459979415, "question_id": 36462670, "link": "https://stackoverflow.com/questions/36462670/passing-address-of-array", "title": "Passing address of array", "body": "<p>In my main I call this function <code>add</code> like this:</p>\n\n<pre><code>add(a,b,c,row,col);\n</code></pre>\n\n<p>Its definition is given below:</p>\n\n<pre><code>void add(int **a,int **b,int **c,int row,int col)\n{\n\n    int i,j;\n    for(i=0;i&lt;row;i++)\n    {\n        for(j=0;j&lt;col;j++)\n        {\n            c[i][j]=a[i][j]*b[i][j];\n        }\n    }\n}\n</code></pre>\n\n<p>The main function:.......</p>\n\n<pre><code>int main()\n{\n    int c[5][5],i,j;\n    int **f; \n    int a[5][5],b[5][5],row,col; \n    printf(\"Enter row : \");\n    scanf(\"%d\",&amp;row); \n    printf(\"Enter column : \");\n    scanf(\"%d\",&amp;col);\n    printf(\"Enter matrix A :\\n\");\n    for(i=0;i&lt;row;i++)\n    {\n        for(j=0;j&lt;col;j++)\n        {\n            scanf(\"%d\",&amp;a[i][j]);\n        }\n    }\n    printf(\"Enter matrix B :\\n\");\n    for(i=0;i&lt;row;i++)\n    {\n        for(j=0;j&lt;col;j++)\n        {\n            scanf(\"%d\",&amp;b[i][j]);\n        }\n    }\n\n\n    add(a,b,c,row,col);  \n\n    printf(\"Addition :\\n\");\n\n    for(i=0;i&lt;row;i++)\n    {\n        for(j=0;j&lt;col;j++)\n        {\n            printf(\"%d\\t\",c[i][j]);\n        }\n        printf(\"\\n\");\n    }\n    getch();\n    return 0;\n}\n</code></pre>\n\n<p>The errors given by compilers:</p>\n\n<pre>\n||warning: command line option '-Wzero-as-null-pointer-constant' is valid for C++/ObjC++ but not for C [enabled by default]|\nC:\\Users\\Amir Khasru\\Desktop\\matrix_add.c|5|warning: no previous declaration for 'add' [-Wmissing-declarations]|\nC:\\Users\\Amir Khasru\\Desktop\\matrix_add.c||In function 'main':|\nC:\\Users\\Amir Khasru\\Desktop\\matrix_add.c|45|error: passing argument 1 of 'add' from incompatible pointer type|\n||=== Build failed: 1 error(s), 2 warning(s) (0 minute(s), 0 second(s)) ===|\n</pre>\n"}, {"tags": ["c", "arrays", "pointers", "struct", "malloc"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1459976372, "post_id": 36462187, "comment_id": 60536315, "body": "Why your type and variable have same name? What will you achieve?"}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 6169036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78c2b062f776163c25808100a36847f3?s=128&d=identicon&r=PG&f=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/6169036/antonio"}, "edited": false, "score": 0, "creation_date": 1459976900, "post_id": 36462266, "comment_id": 60536645, "body": "Ok, I changed the name and remove this, but the error is still happening... also I update in the first comment."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 55, "user_id": 6169036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78c2b062f776163c25808100a36847f3?s=128&d=identicon&r=PG&f=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/6169036/antonio"}, "edited": false, "score": 0, "creation_date": 1459977080, "post_id": 36462266, "comment_id": 60536754, "body": "@Antonio, <i>please</i> check my updated answer, is that better? :)"}], "tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": false, "score": 2, "last_activity_date": 1459977014, "last_edit_date": 1459977014, "creation_date": 1459976479, "answer_id": 36462266, "question_id": 36462187, "link": "https://stackoverflow.com/questions/36462187/error-on-add-element-of-struct-into-array-of-the-same-struct/36462266#36462266", "title": "Error on add element of struct into array of the same struct", "body": "<p>You give your variable the same name with the type, change this to that:</p>\n\n<pre><code>hash_table *my_hash_table = (hash_table*) malloc(sizeof (hash_table));\n\nmy_hash_table-&gt;table = malloc (sizeof (hash_entry) * 10);\nmy_hash_table-&gt;table = NULL;\n\nmy_hash_table-&gt;table[0] =  e;\n</code></pre>\n\n<p>and then notice that this:</p>\n\n<pre><code>my_hash_table-&gt;table = NULL;\n</code></pre>\n\n<p>actually is wrong, since you want to use <code>table</code>, so remove it.</p>\n\n<hr>\n\n<p>Putting all together (and personally checking mystruct.c):</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\ntypedef struct hash_entry{\n        int value;\n} hash_entry;\n\ntypedef struct hash_table{\n        struct hash_entry * table; \n} hash_table;\n\nint main(void) {\n        hash_entry e;\n        e.value =  10;\n\n        hash_table *my_hash_table = (hash_table*) malloc(sizeof (hash_table));\n        my_hash_table-&gt;table = malloc (sizeof (hash_entry) * 10);\n\n        my_hash_table-&gt;table[0] =  e;\n        printf(\"Value = %d\\n\", my_hash_table-&gt;table[0].value);\n        return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>gsamaras@gsamaras:~$ gcc -Wall px.c \ngsamaras@gsamaras:~$ ./a.out \nValue = 10\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 6169036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78c2b062f776163c25808100a36847f3?s=128&d=identicon&r=PG&f=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/6169036/antonio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1459977114, "creation_date": 1459976222, "last_edit_date": 1459977114, "question_id": 36462187, "link": "https://stackoverflow.com/questions/36462187/error-on-add-element-of-struct-into-array-of-the-same-struct", "title": "Error on add element of struct into array of the same struct", "body": "<p>Hello I am triyng to add a struct called hash_entry to an array of hash_entry inside of another struct(hash_table), but I am receive this error: </p>\n\n<pre><code>hash.c:67:5: error: invalid use of undefined type \u2018struct hash_entry\u2019\n my_table-&gt;table[0] =  e;\n ^\nhash.c:67:30: error: dereferencing pointer to incomplete type\n my_table-&gt;table[0] =  e;\n</code></pre>\n\n<p>My structs:</p>\n\n<pre><code>typedef struct hash_entry{\n  int value;\n} Hash_entry;\n\ntypedef struct hash_table{\n  struct hash_entry * table; \n\n} Hash_table;\n</code></pre>\n\n<p>My code to alloc the memory to the array and to add:</p>\n\n<pre><code>Hash_entry e;\ne.value =  10;\n\nHash_table *my_table = (Hash_table *) malloc(sizeof (Hash_table));\n\nmy_table-&gt;table = malloc (sizeof (Hash_entry) * 10);\n\nmy_table-&gt;table[0] =  e;\n</code></pre>\n"}, {"tags": ["c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 499, "user_id": 5339899, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/ebf68221eb3e8ff1037314f300217549?s=128&d=identicon&r=PG&f=1", "display_name": "TheQAGuy", "link": "https://stackoverflow.com/users/5339899/theqaguy"}, "edited": false, "score": 1, "creation_date": 1459976027, "post_id": 36462081, "comment_id": 60536120, "body": "Look into the <code>malloc()</code> function located in <code>stdlib.h</code> you can declare <code>int *height</code> and then read in a value for <code>n</code> and do something similar to <code>malloc(sizeof(int) * n);</code>. Read up on the function though so you understand it."}, {"owner": {"reputation": 41440, "user_id": 3887516, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/62e0310897139a10f3293022b6eb7054?s=128&d=identicon&r=PG&f=1", "display_name": "Amit", "link": "https://stackoverflow.com/users/3887516/amit"}, "edited": false, "score": 0, "creation_date": 1459976093, "post_id": 36462081, "comment_id": 60536152, "body": "Why are you asking this here? There are endless resources that will teach you programming or specifically C, one of them is your textbook. If you want to study, do it."}, {"owner": {"reputation": 734, "user_id": 4854929, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6wiFm.jpg?s=128&g=1", "display_name": "Darko Djuric", "link": "https://stackoverflow.com/users/4854929/darko-djuric"}, "edited": false, "score": 1, "creation_date": 1459976122, "post_id": 36462081, "comment_id": 60536172, "body": "And don&#39;t forget to call <code>free()</code> once you call <code>malloc()</code>"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 3, "creation_date": 1459976147, "post_id": 36462081, "comment_id": 60536180, "body": "Nothing wrong with asking basic questions. But it&#39;s good form to at least do some research on your own first. A minute or two of searching should find you lots of existing help like <a href=\"http://stackoverflow.com/questions/8481188/dynamic-memory-allocation-and-dynamic-array\">dynamic memory allocation and dynamic array</a>"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1459976216, "post_id": 36462081, "comment_id": 60536222, "body": "Note that your code does not need the array at all.."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1459976333, "post_id": 36462081, "comment_id": 60536286, "body": "..and even if you did need to keep a record of the individual student heights, there is a simpler solution than using dynamic array element allocation:  &#39;int height[500000]&#39;.  Try and blow that one with manual entry:)"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1459976369, "post_id": 36462081, "comment_id": 60536312, "body": "It is an unusual question because the student wants to achieve more than Prof asked. But if OP thirsts for knowledge... you&#39;ll need to sharpen your problem solving skills too!"}, {"owner": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "edited": false, "score": 2, "creation_date": 1459976468, "post_id": 36462081, "comment_id": 60536376, "body": "You could also completely forget about memory and arrays and just add the height of the new student to the sum..."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1459976495, "post_id": 36462081, "comment_id": 60536392, "body": "Yeah.. it&#39;s a difficult one.  The prof. will want the student to learn about dynamic allocation, but most of the experienced engineers in here would just declare a massive array and be done with it:)"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1459976680, "post_id": 36462081, "comment_id": 60536510, "body": "Given some of the questions posted on SO from our esteemed centres of academic excellence, another solution would be to chainsaw all the students to the same height, so you would only need to know how many there are :)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6106197"}, "edited": false, "score": 0, "creation_date": 1459976804, "post_id": 36462081, "comment_id": 60536583, "body": "I apologize for not searching a bit more before posting, I will remember that for my future posts. Thanks to everyone who replied."}, {"owner": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "edited": false, "score": 0, "creation_date": 1459976809, "post_id": 36462081, "comment_id": 60536585, "body": ":-) and define <code>const double student_height_meters = 1.50</code> globally."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1460133005, "post_id": 36462081, "comment_id": 60616450, "body": "it is a very bad idea to #include header files that are not used.  It is also a bad idea to #include header files that are a)not used and b) are not portable.   I.E. the header file: <code>conio.h</code> is not portable and none of its&#39; contents are being used by the posted code, so it should not be #include&#39;d"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1460133078, "post_id": 36462081, "comment_id": 60616494, "body": "the <code>average</code> variable is not used.  so this is a poor example of a class room coding project."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6106197"}, "edited": false, "score": 0, "creation_date": 1459976716, "post_id": 36462141, "comment_id": 60536529, "body": "This helped, thank you. I will now try to study malloc function more and try it out in some other examples. Thank you once again."}], "tags": [], "owner": {"reputation": 13369, "user_id": 1579327, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2672419fe5e9e6d5ce4d03c2e7aae7a2?s=128&d=identicon&r=PG", "display_name": "Paolo", "link": "https://stackoverflow.com/users/1579327/paolo"}, "is_accepted": true, "score": 1, "last_activity_date": 1459976962, "last_edit_date": 1459976962, "creation_date": 1459976083, "answer_id": 36462141, "question_id": 36462081, "link": "https://stackoverflow.com/questions/36462081/dynamic-memory-allocation-for-arrays-c/36462141#36462141", "title": "Dynamic memory allocation for arrays C", "body": "<p>Just define <code>height</code> as a pointer</p>\n\n<p><code>int *height;</code></p>\n\n<p>Then allocate dinamically memory to store the array elements</p>\n\n<p><code>height = malloc( sizeof(int) * numOfStudents );</code></p>\n\n<p>Note that the appropriate size (in bytes) is calculated as the product of the size of an <code>int</code> by the number of array items.</p>\n\n<p>This approach implies that the size of the array is known beforehand.</p>\n\n<p>As memory is allocated dinamically it's your duty to free it with</p>\n\n<p><code>free(height);</code></p>\n\n<p>as you don't need the array anymore.</p>\n\n<hr>\n\n<p>The whole thing becomes</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n{\n    int *height, sum=0, i;\n    int numOfStudents=5;\n\n    height = malloc( sizeof(int) * numOfStudents );\n\n    for(i=0; i&lt;numOfStudents; i++)\n    {\n        printf(\"Type in the height of the %d. student: \", i+1);\n        scanf(\"%d\", &amp;height[i]);\n\n        sum+=height[i];\n    }\n\n    printf(\"\\n Sum of all heights is: %d. There were %d students\", sum, numOfStudents);\n\n    free( height );\n\n    return 0;   \n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 194, "user_id": 4955118, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FSFY-mD9PLU/AAAAAAAAAAI/AAAAAAAAALs/ZyLLxe1hayM/photo.jpg?sz=128", "display_name": "Shahe Ansar", "link": "https://stackoverflow.com/users/4955118/shahe-ansar"}, "edited": false, "score": 0, "creation_date": 1459981358, "post_id": 36462461, "comment_id": 60538627, "body": "Why the necessity to do something like this when it&#39;s possible to use a dynamically allocated array?"}, {"owner": {"reputation": 376, "user_id": 2157214, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/luXFH.jpg?s=128&g=1", "display_name": "TangKe", "link": "https://stackoverflow.com/users/2157214/tangke"}, "reply_to_user": {"reputation": 194, "user_id": 4955118, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FSFY-mD9PLU/AAAAAAAAAAI/AAAAAAAAALs/ZyLLxe1hayM/photo.jpg?sz=128", "display_name": "Shahe Ansar", "link": "https://stackoverflow.com/users/4955118/shahe-ansar"}, "edited": false, "score": 0, "creation_date": 1460034251, "post_id": 36462461, "comment_id": 60564146, "body": "Because professor told Bayaz that &quot;You have to use lists and dynamic array element allocation.&quot;, and my code is the most common way to implement &#39;list&#39; in c language."}, {"owner": {"reputation": 194, "user_id": 4955118, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FSFY-mD9PLU/AAAAAAAAAAI/AAAAAAAAALs/ZyLLxe1hayM/photo.jpg?sz=128", "display_name": "Shahe Ansar", "link": "https://stackoverflow.com/users/4955118/shahe-ansar"}, "edited": false, "score": 0, "creation_date": 1460059382, "post_id": 36462461, "comment_id": 60581512, "body": "Still, this method is real overkill for what the OP is trying to do"}, {"owner": {"reputation": 376, "user_id": 2157214, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/luXFH.jpg?s=128&g=1", "display_name": "TangKe", "link": "https://stackoverflow.com/users/2157214/tangke"}, "reply_to_user": {"reputation": 194, "user_id": 4955118, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FSFY-mD9PLU/AAAAAAAAAAI/AAAAAAAAALs/ZyLLxe1hayM/photo.jpg?sz=128", "display_name": "Shahe Ansar", "link": "https://stackoverflow.com/users/4955118/shahe-ansar"}, "edited": false, "score": 0, "creation_date": 1460128056, "post_id": 36462461, "comment_id": 60613244, "body": "If you think it&#39;s just an &quot;overkill&quot;, would you please revoke you down vote?"}, {"owner": {"reputation": 194, "user_id": 4955118, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FSFY-mD9PLU/AAAAAAAAAAI/AAAAAAAAALs/ZyLLxe1hayM/photo.jpg?sz=128", "display_name": "Shahe Ansar", "link": "https://stackoverflow.com/users/4955118/shahe-ansar"}, "edited": false, "score": 0, "creation_date": 1460131005, "post_id": 36462461, "comment_id": 60615221, "body": "I&#39;m not  the one who downvoted you..."}, {"owner": {"reputation": 376, "user_id": 2157214, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/luXFH.jpg?s=128&g=1", "display_name": "TangKe", "link": "https://stackoverflow.com/users/2157214/tangke"}, "reply_to_user": {"reputation": 194, "user_id": 4955118, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FSFY-mD9PLU/AAAAAAAAAAI/AAAAAAAAALs/ZyLLxe1hayM/photo.jpg?sz=128", "display_name": "Shahe Ansar", "link": "https://stackoverflow.com/users/4955118/shahe-ansar"}, "edited": false, "score": 0, "creation_date": 1460131045, "post_id": 36462461, "comment_id": 60615246, "body": "Hmm, that&#39;s weird. Nevermind."}], "tags": [], "owner": {"reputation": 376, "user_id": 2157214, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/luXFH.jpg?s=128&g=1", "display_name": "TangKe", "link": "https://stackoverflow.com/users/2157214/tangke"}, "is_accepted": false, "score": 1, "last_activity_date": 1459977885, "last_edit_date": 1459977885, "creation_date": 1459977213, "answer_id": 36462461, "question_id": 36462081, "link": "https://stackoverflow.com/questions/36462081/dynamic-memory-allocation-for-arrays-c/36462461#36462461", "title": "Dynamic memory allocation for arrays C", "body": "<p>First you need to understand that 'list' is an abstract data type, which looks like this:\n<a href=\"https://upload.wikimedia.org/wikipedia/commons/thumb/3/37/Singly_linked_list.png/220px-Singly_linked_list.png\" rel=\"nofollow\">https://upload.wikimedia.org/wikipedia/commons/thumb/3/37/Singly_linked_list.png/220px-Singly_linked_list.png</a></p>\n\n<p>It consists of a number of nodes connecting to each other like a chain, and each node maintains its own value.</p>\n\n<p>An easy way to implement this data structure in c language is as follows:</p>\n\n<pre><code>struct Node {\n    int val;\n    struct Node* next;\n};\n</code></pre>\n\n<p>Where 'val' stores the value, and 'next' stores the address to next node. Treat 'struct Node*' as a whole, and you will learn that represents 'struct Node pointer' which literately points to the address of a node.</p>\n\n<p>And now you can create a list of 2 elements like this:</p>\n\n<pre><code>struct Node* n1 = malloc(sizeof(struct Node));\nn1-&gt;val = 200;\nstruct Node* n2 = malloc(sizeof(struct Node));\nn2-&gt;val = 300;\nn1-&gt;next = n2;\n</code></pre>\n\n<p>Keep appending elements and you can create a list 'Node's of whatever length you want.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6106197"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1269, "favorite_count": 0, "closed_date": 1460243640, "accepted_answer_id": 36462141, "answer_count": 2, "score": 2, "last_activity_date": 1459977885, "creation_date": 1459975843, "question_id": 36462081, "link": "https://stackoverflow.com/questions/36462081/dynamic-memory-allocation-for-arrays-c", "closed_reason": "Duplicate", "title": "Dynamic memory allocation for arrays C", "body": "<p>So today at the university we had this simple program where we had to input the heights of n number of students and then print out the sum of the heights. The heights were stored in an array. Now that was simple enough - however, we started the problem with a fixed number of students, 5 in my example. Then I asked the professor how would I solve the problem if the number of students wasn't already defined and she told me that I'd have to use lists and dynamic array element allocation. We did not reach that yet so I came here to ask for help since I'm interested in solving it like that.</p>\n\n<p>Could someone show/explain or give me some guidelines on how I should approach the problem. Here is how the problem was solved in class.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;conio.h&gt;\n\nint main(){\n\n\n    int height[5], sum=0, i;\n    int numOfStudents=5;\n    float average;\n\n    for(i=0; i&lt;numOfStudents; i++){  \n        printf(\"Type in the height of the %d. student: \", i+1);\n        scanf(\"%d\", &amp;height[i]);\n\n        sum+=height[i];\n    }\n    printf(\"\\n Sum of all heights is: %d. There were %d students\", sum, numOfStudents);\n\nreturn 0;   \n}\n</code></pre>\n"}, {"tags": ["c", "winapi", "serial-port"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1459975114, "post_id": 36461715, "comment_id": 60535532, "body": "I have not seen that problem on any of my, or my customers, boxes."}, {"owner": {"reputation": 6192, "user_id": 2041317, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/58b0m.png?s=128&g=1", "display_name": "cup", "link": "https://stackoverflow.com/users/2041317/cup"}, "edited": false, "score": 0, "creation_date": 1459975271, "post_id": 36461715, "comment_id": 60535638, "body": "Do you have 4-5 crossover (CTS-RTS) connected?  If you only have 2, 3 and 7, you will need to use the xon/xoff protocol"}, {"owner": {"reputation": 89, "user_id": 2321690, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nxN49.png?s=128&g=1", "display_name": "Art Solano", "link": "https://stackoverflow.com/users/2321690/art-solano"}, "edited": false, "score": 0, "creation_date": 1459976169, "post_id": 36461715, "comment_id": 60536200, "body": "I have no problems using a device connected to a  RS232 serial port with the above code.  The ReadFile blocks as expected until I have bytes going through the port.  When I connect a USB device, even though no bytes are going through the emulated port, ReadFile will not block.  I am puzzled."}, {"owner": {"reputation": 734, "user_id": 4854929, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6wiFm.jpg?s=128&g=1", "display_name": "Darko Djuric", "link": "https://stackoverflow.com/users/4854929/darko-djuric"}, "reply_to_user": {"reputation": 6192, "user_id": 2041317, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/58b0m.png?s=128&g=1", "display_name": "cup", "link": "https://stackoverflow.com/users/2041317/cup"}, "edited": false, "score": 0, "creation_date": 1459976295, "post_id": 36461715, "comment_id": 60536268, "body": "@cup actually it is 2,3 and 5(GND) if there is no flow control..."}, {"owner": {"reputation": 89, "user_id": 2321690, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nxN49.png?s=128&g=1", "display_name": "Art Solano", "link": "https://stackoverflow.com/users/2321690/art-solano"}, "edited": false, "score": 0, "creation_date": 1459977316, "post_id": 36461715, "comment_id": 60536885, "body": "Not sure what additional research is needed to pose a question.  I have a short sample of code I have tested with various devices, I have described the problem and described the return value.  Thanks for all that have responded."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1459977590, "post_id": 36461715, "comment_id": 60537027, "body": "@ArtSolano Sorry, I have no clue.  I use Win serial ports in much the same way as yourself and, no matter whether &#39;real&#39; ports, or USB dongles, the read calls block until data arrives, no problem :("}, {"owner": {"reputation": 89, "user_id": 2321690, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nxN49.png?s=128&g=1", "display_name": "Art Solano", "link": "https://stackoverflow.com/users/2321690/art-solano"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1459977922, "post_id": 36461715, "comment_id": 60537195, "body": "@MartinJames Thanks for your input - I was responding to the down vote ... still new to this, ill keep plugging away, look for any subtle differences between emulated and real ports.  I&#39;m using Windows 7 64 bit."}, {"owner": {"reputation": 6192, "user_id": 2041317, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/58b0m.png?s=128&g=1", "display_name": "cup", "link": "https://stackoverflow.com/users/2041317/cup"}, "edited": false, "score": 0, "creation_date": 1459978930, "post_id": 36461715, "comment_id": 60537670, "body": "Sorry - I was thinking of a 25 way, not a 9 way..  It is 7-8 on a 9 way."}], "answers": [{"tags": [], "owner": {"reputation": 89, "user_id": 2321690, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nxN49.png?s=128&g=1", "display_name": "Art Solano", "link": "https://stackoverflow.com/users/2321690/art-solano"}, "is_accepted": true, "score": -2, "last_activity_date": 1607252621, "last_edit_date": 1607252621, "creation_date": 1460487837, "answer_id": 36581897, "question_id": 36461715, "link": "https://stackoverflow.com/questions/36461715/serial-communications-not-blocking-on-an-emulated-port/36581897#36581897", "title": "Serial Communications not blocking on an emulated port", "body": "<p>The problem was that I was not getting or setting the comm timeouts.  WinAPI for ReadFile states that this should be set and that the behavior was unpredictable if it was not set.  Now the code below works consistently across several serial devices.</p>\n<pre><code>// W32SerialLibrary.cpp : Defines the entry point for the console application.\n//\n\n#include &quot;stdafx.h&quot;\n#include&lt;windows.h&gt;\n#include&lt;stdio.h&gt;\n\n#define SEL     4   // marks the end of the message. it should only appear after a NAK/ACK and never by itself.\n#define ACK     6   // the last character before the end of the message\n#define NAK     21  // the last character before the end of the message\n#define GS      29  // indicates the start of a message.\n\n#define MAX_BUFFER 512\n\nvoid convertCharToWchar(const char *fromCharBuffer, wchar_t *toWcharBuffer, size_t toWcharBufferSize)\n{\n    int i;\n\n    for (i = 0; fromCharBuffer[i] != '\\0' &amp;&amp; i &lt; toWcharBufferSize; i++)\n    {\n        toWcharBuffer[i] = fromCharBuffer[i];\n    }\n\n    toWcharBuffer[i] = '\\0';\n}\n\nint readMRZ(const char *portPath, char *mrzBuffer, const size_t mrzBuffer_size)\n{\n    HANDLE hComm;\n    DCB dcbSerialParams;\n    BOOL isGood;\n    COMMTIMEOUTS commTimeOuts;\n    char mrzChar; //Temporary character used for reading\n    DWORD bytesRead;\n    int mrzIndex;\n    DWORD maskUsed;\n    char errorChar = '_';\n    wchar_t wportPath[MAX_PATH];\n\n    convertCharToWchar(portPath, wportPath, sizeof(wportPath));\n\n    hComm = CreateFile(wportPath,                //port name\n        GENERIC_READ | GENERIC_WRITE,                 //Read/Write\n        0,                                            // No Sharing\n        NULL,                                         // No Security\n        OPEN_EXISTING,                                // Open existing port only\n        0,                                            // Non Overlapped I/O\n        NULL);                                        // Null for Comm Devices\n\n    if (hComm == INVALID_HANDLE_VALUE)\n    {\n        printf(&quot;Error in opening serial port\\n&quot;);\n        return -1;\n    }\n\n    // setup connection\n\n    dcbSerialParams = { 0 }; // Initializing DCB structure\n    dcbSerialParams.DCBlength = sizeof(dcbSerialParams);\n\n    isGood = GetCommState(hComm, &amp;dcbSerialParams);\n\n    dcbSerialParams.BaudRate = CBR_9600;  // Setting BaudRate = 9600\n    dcbSerialParams.ByteSize = 8;         // Setting ByteSize = 8\n    dcbSerialParams.StopBits = ONESTOPBIT;// Setting StopBits = 1\n    dcbSerialParams.Parity = NOPARITY;  // Setting Parity = None\n\n                                        // setup listener\n\n    isGood = SetCommState(hComm, &amp;dcbSerialParams);\n    if (isGood == false)\n    {\n        printf(&quot;Error %d\\n&quot;, GetLastError());\n        return -1;\n    }\n\n    GetCommTimeouts(hComm, &amp;commTimeOuts);\n\n    isGood = SetCommMask(hComm, EV_RXCHAR);\n    if (isGood == false)\n    {\n        printf(&quot;Error %d\\n&quot;, GetLastError());\n        return -1;\n    }\n\n    mrzIndex = 0;\n\n    commTimeOuts.ReadTotalTimeoutConstant = 0;\n    commTimeOuts.ReadTotalTimeoutMultiplier = 0;\n    commTimeOuts.WriteTotalTimeoutConstant = 0;\n    commTimeOuts.WriteTotalTimeoutMultiplier = 0;\n    commTimeOuts.ReadIntervalTimeout = 500;\n\n    SetCommTimeouts(hComm, &amp;commTimeOuts);\n    maskUsed = 0;\n    WaitCommEvent(hComm, &amp;maskUsed, NULL);\n    commTimeOuts.ReadIntervalTimeout = 0;\n\n    do\n    {\n        isGood = ReadFile(hComm,        //Handle of the Serial port\n            &amp;mrzChar,                   //Temporary character\n            sizeof(mrzChar),            //Size of TempChar\n            &amp;bytesRead,                 //Number of bytes read\n            NULL);\n\n//      printf(&quot;isGood %d ch=%c dec=%d oct=%#o hex=%#08X maskUsed=%x bytesRead=%d\\n&quot;, isGood, mrzChar, mrzChar, mrzChar, mrzChar, maskUsed, bytesRead);\n\n        if (mrzChar == GS)\n        {\n            mrzIndex = 0;\n            continue;\n        }\n\n        if (mrzChar == ACK)\n        {\n            mrzBuffer[mrzIndex] = '\\0';\n            break;\n        }\n\n        // fill buffer\n        if ((mrzChar &gt;= 48 &amp;&amp; mrzChar &lt;= 90) || mrzChar == '&lt;' || mrzChar == errorChar || mrzChar == '\\r')\n        {\n            if (mrzIndex == MAX_BUFFER)\n            {\n                exit(-1);\n            }\n\n            if (mrzChar == '\\r')\n            {\n                mrzBuffer[mrzIndex++] = '\\n';\n            }\n\n            mrzBuffer[mrzIndex++] = mrzChar;\n        }\n    }\n\n    while (bytesRead &gt; 0);\n\n    CloseHandle(hComm);//Closing the Serial Port\n\n    return 0;\n}\n\nint main()\n{\n    char mrzBuffer[512];\n    int rVal;\n\n    rVal = readMRZ(&quot;\\\\\\\\.\\\\COM1&quot;, mrzBuffer, sizeof(mrzBuffer));\n\n    printf(&quot;\\nrVal=%d mrzBuffer length=%d\\n&quot;, rVal, strlen(mrzBuffer));\n    printf(&quot;mrzBuffer=\\n\\&quot;%s\\&quot;\\n&quot;, mrzBuffer);\n \n    return rVal;\n}\n</code></pre>\n"}], "owner": {"reputation": 89, "user_id": 2321690, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nxN49.png?s=128&g=1", "display_name": "Art Solano", "link": "https://stackoverflow.com/users/2321690/art-solano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 0, "accepted_answer_id": 36581897, "answer_count": 1, "score": -1, "last_activity_date": 1607252621, "creation_date": 1459974563, "last_edit_date": 1459977195, "question_id": 36461715, "link": "https://stackoverflow.com/questions/36461715/serial-communications-not-blocking-on-an-emulated-port", "title": "Serial Communications not blocking on an emulated port", "body": "<p>The below code works as expected when the communication is going through a real serial port.  The process blocks on ReadFile and waits for the serial buffer to get populated before processing continues.</p>\n\n<p>However, when I connect a USB device which emulates a serial port, ReadFile will not block even when no data is going through the buffer.</p>\n\n<p>Every second from a USB connected device I get the following output...</p>\n\n<p>rVal=1 ch=-52 bytesRead=0</p>\n\n<p>So no error is returned and bytes read is always 0 until I send bytes through the usb port.</p>\n\n<pre><code>DWORD rVal;\nHANDLE handle;\nBOOL isGood;\nchar Ch; //Temporary character used for reading\nDWORD bytesRead;\n\nhandle = CreateFile(L \"\\\\\\\\.\\\\COM4\",          //port name\n    GENERIC_READ | GENERIC_WRITE,                 //Read/Write\n    0,                                            // No Sharing\n    NULL,                                         // No Security\n    OPEN_EXISTING,                                // Open existing port only\n    0,                                            // Non Overlapped I/O\n    NULL);                                        // Null for Comm Devices\n\n if (handle == INVALID_HANDLE_VALUE)\n {\n     return INVALID_HANDLE_VALUE;\n }\n\n isGood = SetCommMask(handle, EV_RXCHAR);\n if (isGood == false)\n {\n     return USV_ERR_READER_COM;\n }\n\n rVal = ReadFile(handle,           //Handle of the Serial port\n      &amp;ch,       //Temporary character\n      sizeof(ch),//Size of TempChar\n      &amp;bytesRead,    //Number of bytes read\n      NULL);\n ...\n</code></pre>\n"}, {"tags": ["c", "ncurses"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1459974732, "post_id": 36461474, "comment_id": 60535308, "body": "There is no standard &quot;Extended ASCII&quot;. Just a bunch of various encodings. It is not clear which one your terminal uses, possibly UTF-8 which is a varable-length code. Thus, you have to read multiple <code>char</code>s to compose a character. You should verify and check if ncurses provides functions to handle this, e.g. using wide <code>char</code>s."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1459974795, "post_id": 36461474, "comment_id": 60535346, "body": "I don&#39;t know about ncurses, but the Windows <code>conio.h</code> function <code>getch()</code> returns 2 values on successive calls when some keys, like the function keys are pressed. Write a simple program to display the (numeric) result of successive key presses."}], "answers": [{"comments": [{"owner": {"reputation": 131, "user_id": 5874676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/642d3cdf9507508283c4184132ea8c6e?s=128&d=identicon&r=PG&f=1", "display_name": "Andres Martinelli", "link": "https://stackoverflow.com/users/5874676/andres-martinelli"}, "edited": false, "score": 0, "creation_date": 1460032791, "post_id": 36463593, "comment_id": 60562961, "body": "I am linking against ncursesw..I did add setlocale(LC_ALL, &quot;&quot;); before initscr(), but now I get..                      &quot; etter:  M-!&quot;, without the quotes.."}, {"owner": {"reputation": 131, "user_id": 5874676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/642d3cdf9507508283c4184132ea8c6e?s=128&d=identicon&r=PG&f=1", "display_name": "Andres Martinelli", "link": "https://stackoverflow.com/users/5874676/andres-martinelli"}, "edited": false, "score": 0, "creation_date": 1460378445, "post_id": 36463593, "comment_id": 60698609, "body": "I made it work in another computer just like you showed it!! Does exist a &quot;mvwprintw&quot; like function but for Wide Chars???"}], "tags": [], "owner": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "is_accepted": true, "score": 1, "last_activity_date": 1460413865, "last_edit_date": 1460413865, "creation_date": 1459982531, "answer_id": 36463593, "question_id": 36461474, "link": "https://stackoverflow.com/questions/36461474/cannot-read-from-stdin-extended-ascii-character-in-ncurses/36463593#36463593", "title": "Cannot read from stdin extended ASCII character in NCURSES", "body": "<p>The characters that you want to type require the program to setup the <em>locale</em>.  As described in the <a href=\"http://invisible-island.net/ncurses/man/ncurses.3x.html#h3-Initialization\" rel=\"nofollow\">manual</a>:</p>\n\n<pre><code>Initialization\n\n   The  library uses the locale which the calling program has\n   initialized.  That is normally done with setlocale:\n\n         setlocale(LC_ALL, \"\");\n\n   If the locale is not initialized, the library assumes that\n   characters  are  printable  as in ISO-8859-1, to work with\n   certain legacy programs.  You should initialize the locale\n   and  not  rely on specific details of the library when the\n   locale has not been setup.\n</code></pre>\n\n<p>Past that, it is likely that your locale uses UTF-8.  To work with UTF-8, you should compile and link against the <em>ncursesw</em> library.</p>\n\n<p>Further, the <code>getch</code> function only returns values for single-byte encodings, such as ISO-8859-1, which some people confuse with <a href=\"http://www.i18nqa.com/debug/table-iso8859-1-vs-windows-1252.html\" rel=\"nofollow\">Windows cp1252</a>, and thence to \"Extended ASCII\" (which says something about two fallacies not cancelling out).  UTF-8 is a multibyte encoding.  If you use <code>getch</code> to read <em>that</em>, you will get the first byte of the character.</p>\n\n<p>Instead, to read <em>UTF-8</em>, you should use <a href=\"http://invisible-island.net/ncurses/man/curs_get_wch.3x.html\" rel=\"nofollow\"><code>get_wch</code></a> (unless you want to decode the UTF-8 yourself).  Here is a revised program which does that:</p>\n\n<pre><code>#include &lt;ncurses.h&gt;\n#include &lt;locale.h&gt;\n#include &lt;wchar.h&gt;\nint\nmain(void)\n{   \n    wint_t value;\n    setlocale(LC_ALL, \"\");\n    initscr();\n    get_wch(&amp;value);\n    mvprintw(0, 0, \"letter: %#x.\", value);\n    refresh();\n    getch();\n    endwin();\n    return 0;\n}\n</code></pre>\n\n<p>I printed the result as a number, because <a href=\"http://invisible-island.net/ncurses/man/curs_printw.3x.html\" rel=\"nofollow\"><code>printw</code></a> does not know about Unicode values.  <code>printw</code> uses the same C runtime support as <code>printf</code>, so you may be able to print the value directly.  For instance, I see that <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/printf.html\" rel=\"nofollow\">POSIX <code>printf</code></a> has a formatting option for handling <code>wint_t</code>:</p>\n\n<blockquote>\n  <p><strong><code>c</code></strong><br>\n  The <code>int</code> argument shall be converted to an <code>unsigned char</code>, and the resulting byte shall be written.\n  <br>\n  If an <strong><code>l</code></strong> (<em>ell</em>) qualifier is present, the <code>wint_t</code> argument shall be converted as if by an <strong><code>ls</code></strong> conversion specification with no precision and an argument that points to a two-element array of type <code>wchar_t</code>, the first element of which contains the <code>wint_t</code> argument to the <strong><code>ls</code></strong> conversion specification and the second element contains a null wide character.</p>\n</blockquote>\n\n<p>Since ncurses works on many platforms, not all of those actually <em>support</em> the feature.  But you can probably assume it works with the GNU C library: most distributions routinely provide workable locale configurations.</p>\n\n<p>Doing that, the example is more interesting:</p>\n\n<pre><code>#include &lt;ncurses.h&gt;\n#include &lt;locale.h&gt;\n#include &lt;wchar.h&gt;\nint\nmain(void)\n{   \n    wint_t value;\n    setlocale(LC_ALL, \"\");\n    initscr();\n    get_wch(&amp;value);\n    mvprintw(0, 0, \"letter: %#x (%lc).\", value, value);\n    refresh();\n    getch();\n    endwin();\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 131, "user_id": 5874676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/642d3cdf9507508283c4184132ea8c6e?s=128&d=identicon&r=PG&f=1", "display_name": "Andres Martinelli", "link": "https://stackoverflow.com/users/5874676/andres-martinelli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 389, "favorite_count": 0, "accepted_answer_id": 36463593, "answer_count": 1, "score": 1, "last_activity_date": 1460413865, "creation_date": 1459973811, "question_id": 36461474, "link": "https://stackoverflow.com/questions/36461474/cannot-read-from-stdin-extended-ascii-character-in-ncurses", "title": "Cannot read from stdin extended ASCII character in NCURSES", "body": "<p>I have a problem trying to read extended ASCII chars in NCURSES.</p>\n\n<p>I have this program:</p>\n\n<pre><code>#include &lt;ncurses.h&gt;\nint main () {\n    initscr();\n    int d = getch();\n    mvprintw(0, 0, \"letter: %c.\", d);\n    refresh();\n    getch();\n    endwin();\n    return 0;\n}\n</code></pre>\n\n<p>I build it with: gcc -lncursesw a.c</p>\n\n<p>If I type a character in the 7bit ascii, like the 'e' char, I get:</p>\n\n<pre><code>letter: e.\n</code></pre>\n\n<p>And then I have to type another for the program to end.</p>\n\n<p>If I type a character in the extended ascii, like the '\u00e1' char, I get:</p>\n\n<pre><code>letter:  .\n</code></pre>\n\n<p>and the program ends.</p>\n\n<p>Its like the second byte is read as another character.</p>\n\n<p>How can I get the correct char '\u00e1' ???</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c", "sorting", "systems-programming"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1459973865, "post_id": 36461396, "comment_id": 60534832, "body": "Since the declaration is <code>int scandir(const char *dir, struct dirent ***namelist,        int (*sel)(const struct dirent *),        int (*compar)(const struct dirent **, const struct dirent **));</code>, you can write a comparator function that uses <code>stat</code> on each of the two pointed at directory entries and compares the sizes in any way you see fit.  The difficulty is caching the stat data; there isn&#39;t an obvious way to do that, but if you have thousands of files, you probably don&#39;t want to be running two stat system calls each time you make a comparison."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1459973893, "post_id": 36461396, "comment_id": 60534863, "body": "what&#39;s your question? You already know the answer.. <code>scandir</code> takes a comparator function, so yes you can pass the proper comparator."}, {"owner": {"reputation": 586, "user_id": 4285386, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/100000002501518/picture?type=large", "display_name": "Daniel Soutar", "link": "https://stackoverflow.com/users/4285386/daniel-soutar"}, "edited": false, "score": 0, "creation_date": 1459976524, "post_id": 36461396, "comment_id": 60536414, "body": "Eugene, perhaps I should clarify - the point is that the comparator function accepts two dirent structs. The dirent struct doesn&#39;t contain the size of the thing in bytes as far as I am aware."}, {"owner": {"reputation": 586, "user_id": 4285386, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/100000002501518/picture?type=large", "display_name": "Daniel Soutar", "link": "https://stackoverflow.com/users/4285386/daniel-soutar"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1459976592, "post_id": 36461396, "comment_id": 60536448, "body": "@JonathanLeffler I was thinking of that, but then I thought that a lot of work would be done for even a few hundred files. Any suggestions?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1459976732, "post_id": 36461396, "comment_id": 60536537, "body": "I&#39;d probably go with a a simple comparator (<code>alphasort()</code> perhaps), and then when the data&#39;s returned by <code>scandir()</code>, create a data structure that can cache the file sizes (and any other data that you want for your comparisons), and then use <code>qsort()</code> on the augmented data."}, {"owner": {"reputation": 586, "user_id": 4285386, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/100000002501518/picture?type=large", "display_name": "Daniel Soutar", "link": "https://stackoverflow.com/users/4285386/daniel-soutar"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1459976815, "post_id": 36461396, "comment_id": 60536589, "body": "@JonathanLeffler I thought that might be the best way to go. Thanks again for your help."}], "answers": [{"tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": true, "score": 1, "last_activity_date": 1459980782, "creation_date": 1459980782, "answer_id": 36463265, "question_id": 36461396, "link": "https://stackoverflow.com/questions/36461396/using-scandir-and-sorting-by-size/36463265#36463265", "title": "Using scandir and sorting by size", "body": "<p><sup><em>Converting comments to an answer.</em></sup></p>\n\n<p>Since the POSIX declaration of <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/scandir.html\" rel=\"nofollow\"><code>scandir()</code></a> is</p>\n\n<pre><code>int scandir(const char *dir, struct dirent ***namelist,\n            int (*sel)(const struct dirent *),\n            int (*compar)(const struct dirent **, const struct dirent **));\n</code></pre>\n\n<p>you <em>can</em> write a comparator function that uses <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/stat.html\" rel=\"nofollow\"><code>stat()</code></a> on each of the two pointed at directory entries and compares the sizes in any way you see fit. The difficulty is caching the <code>stat</code> data; there isn't an obvious way to do that, but if you have thousands of files, you probably don't want to be running two <code>stat()</code> system calls each time you make a comparison \u2014 that would be pretty much the ultimate in 'slow compare vs fast swap'.</p>\n\n<blockquote>\n  <p>I was thinking of that, but then I thought that a lot of work would be done for even a few hundred files. Any suggestions?</p>\n</blockquote>\n\n<p>I'd probably go with a a simple comparator (<code>alphasort()</code> perhaps), and then when the data's returned by <code>scandir()</code>, create an array of a data structure that can cache the file names and sizes (and any other data that you want for your comparisons), and then use <code>qsort()</code> on the array of the data structure.</p>\n"}], "owner": {"reputation": 586, "user_id": 4285386, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/100000002501518/picture?type=large", "display_name": "Daniel Soutar", "link": "https://stackoverflow.com/users/4285386/daniel-soutar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 878, "favorite_count": 0, "closed_date": 1460015670, "accepted_answer_id": 36463265, "answer_count": 1, "score": -1, "last_activity_date": 1459980782, "creation_date": 1459973539, "question_id": 36461396, "link": "https://stackoverflow.com/questions/36461396/using-scandir-and-sorting-by-size", "closed_reason": "Needs details or clarity", "title": "Using scandir and sorting by size", "body": "<p>Writing a program in C that is similar to ls. My program needs to implement the -S flag, meaning it sorts whatever directory is specified (or the current one if not) by the size of its contents in bytes. </p>\n\n<p>Obviously you can easily do an alphabetical sorting with scandir and alphasort (see <a href=\"https://www.cs.cf.ac.uk/Dave/C/node20.html\" rel=\"nofollow\">https://www.cs.cf.ac.uk/Dave/C/node20.html</a>). My question is whether you can use scandir with a comparator function that compares two entries on the size of their contents.</p>\n\n<p>Alternatively, I could just specify NULL for the comparator function, have the unsorted array, and then sort it myself with the qsort() function.</p>\n\n<p>Any advice much appreciated. Any clarifications needed, just say in the comments. </p>\n"}, {"tags": ["c", "linked-list", "segmentation-fault", "malloc"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1459973637, "post_id": 36461379, "comment_id": 60534678, "body": "OK - run it under your debugger and step through."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1459973796, "post_id": 36461379, "comment_id": 60534788, "body": "Also, no data declarations/definitions shown, and indentation is less-than-optimal:("}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1459973818, "post_id": 36461379, "comment_id": 60534807, "body": "At the very least, you should post the definitions of <code>ListType</code> and <code>SongType</code> and <code>NodeType</code> but preferably a <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1459973933, "post_id": 36461379, "comment_id": 60534880, "body": "When you insert debugging cues, you must always include a <code>newline</code> to flush the output buffer before the segfault cripples it. <code>printf(&quot;Starting Add\\n&quot;);</code>"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1459973949, "post_id": 36461379, "comment_id": 60534885, "body": "Please indent your code."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1459974037, "post_id": 36461379, "comment_id": 60534935, "body": "Your debugger will tell you <i>where exactly</i> the segfault happens.  And please read <a href=\"http://stackoverflow.com/help/mcve\">this</a>"}, {"owner": {"reputation": 83, "user_id": 4081843, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/fd45c36cae8aef60100d874517a22d0b?s=128&d=identicon&r=PG&f=1", "display_name": "WTL", "link": "https://stackoverflow.com/users/4081843/wtl"}, "edited": false, "score": 0, "creation_date": 1459974044, "post_id": 36461379, "comment_id": 60534938, "body": "EDIT: Added the definitions, and it shows they&#39;re indented."}], "answers": [{"comments": [{"owner": {"reputation": 1510, "user_id": 1319819, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/49cee2918420827e36c2490b5caa9a11?s=128&d=identicon&r=PG&f=1", "display_name": "SandBag_1996", "link": "https://stackoverflow.com/users/1319819/sandbag-1996"}, "edited": false, "score": 0, "creation_date": 1459974205, "post_id": 36461556, "comment_id": 60535036, "body": "He hasnt posted his main function. How do you know he is not allocating space for it?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1459974256, "post_id": 36461556, "comment_id": 60535064, "body": "Dereferencing <code>list</code> was not fine, because it was passed as <code>NULL</code>."}, {"owner": {"reputation": 83, "user_id": 4081843, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/fd45c36cae8aef60100d874517a22d0b?s=128&d=identicon&r=PG&f=1", "display_name": "WTL", "link": "https://stackoverflow.com/users/4081843/wtl"}, "edited": false, "score": 0, "creation_date": 1459974284, "post_id": 36461556, "comment_id": 60535078, "body": "My main function has some other, completely unrelated, stuff in it, but for the list that&#39;s all it has. I tried changing it to allocate memory using      ListType *list = malloc(sizeof(ListType));     but that still doesn&#39;t seem to help the seg fault."}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "reply_to_user": {"reputation": 1510, "user_id": 1319819, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/49cee2918420827e36c2490b5caa9a11?s=128&d=identicon&r=PG&f=1", "display_name": "SandBag_1996", "link": "https://stackoverflow.com/users/1319819/sandbag-1996"}, "edited": false, "score": 0, "creation_date": 1459974349, "post_id": 36461556, "comment_id": 60535106, "body": "@UnderDog I don&#39;t, but he specifically mentioned that he&#39;s got <code>ListType* list = NULL</code> in <code>main</code> and then calls <code>addNodeToList</code> with it, so I answered based on what&#39;s in the post"}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1459974621, "post_id": 36461556, "comment_id": 60535258, "body": "@JonathanLeffler This is not meant to be snarky.. you sure? He has <code>ListType* list = NULL</code> and passes the address of that to his function. He should be able to do <code>(*list)</code> in his function no problem. But <code>(*list)</code> is a <code>NULL</code> value so <code>-&gt;head</code> is going to seg fault. If I&#39;m wrong I need to pull out my junk code and get this straightened out."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1459975184, "post_id": 36461556, "comment_id": 60535576, "body": "@yano: I think I misspoke.  I&#39;ll delete.  I should be concentrating on work, not SO."}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1459975519, "post_id": 36461556, "comment_id": 60535775, "body": "@JonathanLeffler haha that makes 2 of us... Damn SO gets addicting."}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "reply_to_user": {"reputation": 83, "user_id": 4081843, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/fd45c36cae8aef60100d874517a22d0b?s=128&d=identicon&r=PG&f=1", "display_name": "WTL", "link": "https://stackoverflow.com/users/4081843/wtl"}, "edited": false, "score": 0, "creation_date": 1459976230, "post_id": 36461556, "comment_id": 60536234, "body": "@WTL Nothing else is jumping out at me based on your edits. Could be a totally different seg fault. I think I need to see some more code at this point."}], "tags": [], "owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "is_accepted": false, "score": 3, "last_activity_date": 1459974070, "creation_date": 1459974070, "answer_id": 36461556, "question_id": 36461379, "link": "https://stackoverflow.com/questions/36461379/segmentation-fault-in-c-linked-list/36461556#36461556", "title": "Segmentation-Fault in C--Linked List", "body": "<p>in <code>main</code> if you're declaring</p>\n\n<pre><code> ListType* list = NULL;\n</code></pre>\n\n<p>then in your function you're calling</p>\n\n<pre><code> (*list)-&gt;head\n</code></pre>\n\n<p>dereferencing <code>(*list)</code> is fine, but as soon as you do <code>-&gt;head</code> it's trying to dereference that original <code>NULL</code> assignment.  You need to allocate some space for <code>list</code> first.</p>\n"}, {"tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": true, "score": 1, "last_activity_date": 1459975890, "last_edit_date": 1459975890, "creation_date": 1459974204, "answer_id": 36461589, "question_id": 36461379, "link": "https://stackoverflow.com/questions/36461379/segmentation-fault-in-c-linked-list/36461589#36461589", "title": "Segmentation-Fault in C--Linked List", "body": "<p>It appears that your calling code contains:</p>\n\n<pre><code>ListType *list = NULL;\n</code></pre>\n\n<p>and you call your function like this:</p>\n\n<pre><code>addNodeToList(&amp;list, song);\n</code></pre>\n\n<p>and in your <code>addNodeToList()</code> function you have:</p>\n\n<pre><code>NodeType *currNode;\ncurrNode = (*list)-&gt;head;\n</code></pre>\n\n<p>which means you are dereferencing a null pointer <code>(*list)</code>, which crashes your code.  At minimum, check whether <code>*list == NULL</code> before setting <code>currNode</code>, but you'll need rethink the code to handle the case where <code>list</code> is a null pointer.</p>\n\n<p>This code compiles, and runs.  It avoids the problem by allocating the list when necessary:</p>\n\n<pre><code>#include &lt;assert.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nenum { MAX_STR = 64 };\n\ntypedef struct Song\n{\n    char title[MAX_STR];\n    char artist[MAX_STR];\n    char album[MAX_STR];\n    char duration[MAX_STR];\n} SongType;\n\ntypedef struct Node\n{\n    struct Node *next;\n    SongType *data;\n} NodeType;\n\ntypedef struct List\n{\n    NodeType *head;\n    NodeType *tail;\n} ListType;\n\nvoid addNodeToList(ListType **list, SongType *song);\n\nvoid addNodeToList(ListType **list, SongType *song)\n{\n    printf(\"Starting Add\\n\");\n    assert(list != NULL);\n\n    if (*list == NULL)\n    {\n        *list = malloc(sizeof(**list));\n        assert(*list != 0);  // Too lazy for production\n        (*list)-&gt;head = 0;\n        (*list)-&gt;tail = 0;\n        printf(\"List created\\n\");\n    }\n    NodeType *newNode = malloc(sizeof(NodeType));\n    newNode-&gt;data = song;\n    newNode-&gt;next = NULL;\n    printf(\"Node created\\n\");\n\n    NodeType *currNode = (*list)-&gt;head;\n    if (currNode == NULL)\n    {\n        printf(\"List is Empty\\n\");\n        (*list)-&gt;tail = newNode;\n        (*list)-&gt;head = newNode;\n    }\n    else\n    {\n        (*list)-&gt;tail-&gt;next = newNode;\n        (*list)-&gt;tail = newNode;\n    }\n    printf(\"Node added - all done\\n\");\n}\n\n\nint main(void)\n{\n    ListType *list = NULL;\n    SongType  data = { \"Title\", \"Artist\", \"Album\", \"2m 30s\" };\n    SongType *song = &amp;data;\n\n    printf(\"Add song once\\n\");\n    addNodeToList(&amp;list, song);\n    printf(\"Add song again\\n\");\n    addNodeToList(&amp;list, song);\n    return 0;\n}\n</code></pre>\n\n<p>Example run:</p>\n\n<pre><code>Add song once\nStarting Add\nList created\nNode created\nList is Empty\nNode added - all done\nAdd song again\nStarting Add\nNode created\nNode added - all done\n</code></pre>\n\n<p>The code leaks like a sieve; no memory is freed.</p>\n"}, {"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1459974490, "post_id": 36461606, "comment_id": 60535180, "body": "That&#39;s an overstatement at best (&quot;You may not call <code>addNodeToList</code> for such a list&quot;).  You can call it, and it is legitimate to do so, but the called function has to handle things differently from the way it does."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1459975163, "post_id": 36461606, "comment_id": 60535564, "body": "@JonathanLeffler I think it is a valid statement that you may not call a function if the call results in undefined behaviour.:)"}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1459975287, "last_edit_date": 1459975287, "creation_date": 1459974245, "answer_id": 36461606, "question_id": 36461379, "link": "https://stackoverflow.com/questions/36461379/segmentation-fault-in-c-linked-list/36461606#36461606", "title": "Segmentation-Fault in C--Linked List", "body": "<p>The problem deals with this statement</p>\n\n<pre><code>ListType *list = NULL;\n</code></pre>\n\n<p>You may not call <code>addNodeToList</code> for a list initialized such a way. Otherwise there will be undefined behaviour.</p>\n\n<p>You should declare the list the following way</p>\n\n<pre><code>ListType list = { NULL, NULL };\n</code></pre>\n\n<p>Also the function <code>addNodeToList</code> can be declared simpler</p>\n\n<pre><code>void addNodeToList(ListType *list, SongType *song);\n                   ^^^^^^^^^^^^^^ \n</code></pre>\n\n<p>You can call it like</p>\n\n<pre><code>addNodeToList( &amp;list, song );\n</code></pre>\n\n<p>For example</p>\n\n<pre><code>void addNodeToList( ListType *list, SongType *song )\n{\n    printf(\"Starting Add\");\n\n    NodeType *newNode = malloc( sizeof( NodeType ) );\n\n    if ( newNode != NULL )\n    {\n        newNode-&gt;data = song;\n        newNode-&gt;next = NULL;\n\n        if ( list-&gt;tail == NULL )\n        {\n            printf( \"List is Empty\\n\" );\n            list-&gt;head = list-&gt;tail = newNode;\n        }\n        else\n        {\n            list-&gt;tail-&gt;next = newNode;\n            list-&gt;tail = newNode;\n        }\n    }\n}\n</code></pre>\n\n<p>Or if you want to have a pointer to list then you should write</p>\n\n<pre><code>ListType *list = malloc( sizeof( ListType ) );\nlist-&gt;head = list-tail = NULL;;\n</code></pre>\n\n<p>and then call the function the definition of which I showed the following way</p>\n\n<pre><code>addNodeToList( list, song );\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 4081843, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/fd45c36cae8aef60100d874517a22d0b?s=128&d=identicon&r=PG&f=1", "display_name": "WTL", "link": "https://stackoverflow.com/users/4081843/wtl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 1, "accepted_answer_id": 36461589, "answer_count": 3, "score": 0, "last_activity_date": 1459975890, "creation_date": 1459973476, "last_edit_date": 1459973977, "question_id": 36461379, "link": "https://stackoverflow.com/questions/36461379/segmentation-fault-in-c-linked-list", "title": "Segmentation-Fault in C--Linked List", "body": "<p>I understand that a set fault happens when you try to access memory out of the scope of your program, but I can't figure out where mine is happening, or why. I have a list defined: \n     *ListType <em>list = NULL;</em> ,\nand then I add data to the List calling the add function in main:\n      addNodeToList(&amp;list, song);</p>\n\n<pre><code>void addNodeToList(ListType **list, SongType *song)\n{\n    printf(\"Starting Add\");\n\n    NodeType *newNode = malloc(sizeof(NodeType));\n    NodeType *currNode;\n    currNode = (*list)-&gt;head;\n    newNode-&gt;data = song;\n    newNode-&gt;next = NULL;\n\n    if(currNode == NULL) {\n        printf(\"List is Empty\");\n        (*list)-&gt;tail = newNode;\n        (*list)-&gt;head = newNode;\n    }\n    else {\n        (*list)-&gt;tail-&gt;next = newNode;\n        (*list)-&gt;tail = newNode;\n    }\n\n}\n</code></pre>\n\n<p>The song I'm passing is properly initialized, and I can access it's elements, so I know that isn't causing the seg fault. Any help would be very appreciated!  </p>\n\n<pre><code>typedef struct Song {\n  char title[MAX_STR];\n  char artist[MAX_STR];\n  char album[MAX_STR];\n  char duration[MAX_STR];\n} SongType;\n\ntypedef struct Node {\n  struct Node *next;\n  SongType *data;\n} NodeType;\n\ntypedef struct List {\n  NodeType *head;\n  NodeType *tail;\n} ListType;\n</code></pre>\n"}, {"tags": ["c", "compiler-warnings", "gcc-warning"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1459972609, "post_id": 36461085, "comment_id": 60534089, "body": "Note: C does not support <i>methods</i>. Only <i>functions</i>. And the error message does not match the shown code. See <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1459974474, "post_id": 36461085, "comment_id": 60535171, "body": "Also, note that there are two flavours of &#39;freeze&#39; - 0% CPU, (blocked), and 100% CPU, (looping).  It&#39;s very useful to know which you have!"}, {"owner": {"reputation": 2879, "user_id": 1405720, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/732cc3ab1a92b652670d8220f421c58b?s=128&d=identicon&r=PG", "display_name": "mjohnsonengr", "link": "https://stackoverflow.com/users/1405720/mjohnsonengr"}, "edited": false, "score": 0, "creation_date": 1459979427, "post_id": 36461085, "comment_id": 60537853, "body": "Not to sound mean, but did you double check your code when your compiler gave you a warning?  It&#39;s sort of an obvious mistake."}], "answers": [{"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1459972746, "post_id": 36461166, "comment_id": 60534179, "body": "The code in the message is not the same as the one shown. Notice the semicolon!"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1459972889, "post_id": 36461166, "comment_id": 60534258, "body": "@Olaf the <code>;</code> might be part of the error message, I&#39;m not familiar with gcc."}, {"owner": {"reputation": 31, "user_id": 6168801, "user_type": "registered", "profile_image": "https://graph.facebook.com/1188759651136952/picture?type=large", "display_name": "Miko\u0142aj Klimas", "link": "https://stackoverflow.com/users/6168801/miko%c5%82aj-klimas"}, "edited": false, "score": 0, "creation_date": 1459973077, "post_id": 36461166, "comment_id": 60534366, "body": "Yeah, the message output was from a slightly different code (I tried with <code>i+step;</code> at the end. Sorry for that. But Michael was right i missed <code>=</code>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1459973104, "post_id": 36461166, "comment_id": 60534374, "body": "It would be strange adding syntax elements for the output line. I can assure you, gcc does not add something to the output line."}, {"owner": {"reputation": 31, "user_id": 6168801, "user_type": "registered", "profile_image": "https://graph.facebook.com/1188759651136952/picture?type=large", "display_name": "Miko\u0142aj Klimas", "link": "https://stackoverflow.com/users/6168801/miko%c5%82aj-klimas"}, "edited": false, "score": 0, "creation_date": 1459973278, "post_id": 36461166, "comment_id": 60534471, "body": "But still with <code>for (i = 0; i &lt; size; i += step)</code> it gives me some weird numbers from array..."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 31, "user_id": 6168801, "user_type": "registered", "profile_image": "https://graph.facebook.com/1188759651136952/picture?type=large", "display_name": "Miko\u0142aj Klimas", "link": "https://stackoverflow.com/users/6168801/miko%c5%82aj-klimas"}, "edited": false, "score": 0, "creation_date": 1459973355, "post_id": 36461166, "comment_id": 60534503, "body": "@Miko\u0142ajKlimas in that case you must post another question, giving the <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a> which shows what you have tried."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 31, "user_id": 6168801, "user_type": "registered", "profile_image": "https://graph.facebook.com/1188759651136952/picture?type=large", "display_name": "Miko\u0142aj Klimas", "link": "https://stackoverflow.com/users/6168801/miko%c5%82aj-klimas"}, "edited": false, "score": 0, "creation_date": 1459973366, "post_id": 36461166, "comment_id": 60534509, "body": "@Miko\u0142ajKlimas please ask another question and provide an <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a>."}], "tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": true, "score": 3, "last_activity_date": 1459972824, "last_edit_date": 1459972824, "creation_date": 1459972683, "answer_id": 36461166, "question_id": 36461085, "link": "https://stackoverflow.com/questions/36461085/c-method-gives-warning-expression-result-unused-and-freezes/36461166#36461166", "title": "C method gives warning: expression result unused and freezes", "body": "<p>In following <code>for</code> statement the third expression <code>i+step</code> does nothing.</p>\n\n<pre><code>for (i = 0; i &lt; size; i + step)\n</code></pre>\n\n<p>You probably want <code>i</code> to be incremented by <code>step</code> after each iteration so you should write this:</p>\n\n<pre><code>for (i = 0; i &lt; size; i += step)\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 6168801, "user_type": "registered", "profile_image": "https://graph.facebook.com/1188759651136952/picture?type=large", "display_name": "Miko\u0142aj Klimas", "link": "https://stackoverflow.com/users/6168801/miko%c5%82aj-klimas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 312, "favorite_count": 0, "closed_date": 1460019150, "accepted_answer_id": 36461166, "answer_count": 1, "score": -2, "last_activity_date": 1459972824, "creation_date": 1459972359, "question_id": 36461085, "link": "https://stackoverflow.com/questions/36461085/c-method-gives-warning-expression-result-unused-and-freezes", "closed_reason": "Needs details or clarity", "title": "C method gives warning: expression result unused and freezes", "body": "<p>I have small problem with my home task. I have to create a method that sums an array, but with specific, given step. I did something like this: </p>\n\n<pre><code>int sum_step(int t[], int size, int step)\n{\n   int i;\n   int sum = 0;\n\n   for(i=0; i &lt; size; i+step)\n   {\n      sum += t[i];\n   }\n\n   return sum;\n}\n</code></pre>\n\n<p>and console returns warning:</p>\n\n<pre><code>warning: expression result unused\n  [-Wunused-value]\n  i + step;\n  ~ ^ ~~~~\n</code></pre>\n\n<p>Someone knows what is wrong? Thank in advance!</p>\n"}, {"tags": ["c", "pthreads"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 6168532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a92f811f241e93926301ff965bb2e070?s=128&d=identicon&r=PG&f=1", "display_name": "Sgt McPass", "link": "https://stackoverflow.com/users/6168532/sgt-mcpass"}, "edited": false, "score": 0, "creation_date": 1459976443, "post_id": 36461703, "comment_id": 60536359, "body": "Thanks a million! I have been beating my head against the keyboard for quite a while today trying to figure it out. You have saved me countless hours of frustration, I&#39;m sure."}], "tags": [], "owner": {"reputation": 1198, "user_id": 6155818, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/aadb928db1f5bb9bd08e0a19ac800d8f?s=128&d=identicon&r=PG&f=1", "display_name": "Ram", "link": "https://stackoverflow.com/users/6155818/ram"}, "is_accepted": true, "score": 0, "last_activity_date": 1459974527, "creation_date": 1459974527, "answer_id": 36461703, "question_id": 36461052, "link": "https://stackoverflow.com/questions/36461052/segmentation-fault-in-pthread-loop/36461703#36461703", "title": "Segmentation Fault in Pthread Loop", "body": "<p>Are you sure that the size of the matrix of struct WORKER is just NUM_THREADS ?</p>\n\n<p>You are accessing beyond the size limitation of the array you have declared at 2 places.</p>\n\n<p>one is<br>\nhere in main function\nNUM_THREADS (that is just 2 )is actually too low compared to MAT_DIM (50)</p>\n\n<pre><code>for(i = 0; i &lt; MAT_DIM; i++)\n                mat_work_t[t].matrix[i] = &amp;matrix_thread[i][0];\n</code></pre>\n\n<p>Here in the work function</p>\n\n<pre><code> for( i = this_worker-&gt; column; i &lt; stop; i++)\n    {\n        /* Prints the column that matrix is working on */\n        printf(\"Worker %d working on column %d\\n\", this_worker-&gt;id, i);\n\n        for( j = 0; j &lt; MAT_DIM; j++)\n        {\n            this_worker-&gt; matrix[i][j] = rand() % 10;\n        }\n    }\n</code></pre>\n\n<p>the loop goes well till you access the matrix[1][j] , when you try to access matrix[2][j]  you are getting the segmentation fault because you have declared the array size as 2 and you are trying to access the 3rd one (ie matrix[2][j])</p>\n"}], "owner": {"reputation": 13, "user_id": 6168532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a92f811f241e93926301ff965bb2e070?s=128&d=identicon&r=PG&f=1", "display_name": "Sgt McPass", "link": "https://stackoverflow.com/users/6168532/sgt-mcpass"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 410, "favorite_count": 0, "accepted_answer_id": 36461703, "answer_count": 1, "score": 1, "last_activity_date": 1459974527, "creation_date": 1459972264, "question_id": 36461052, "link": "https://stackoverflow.com/questions/36461052/segmentation-fault-in-pthread-loop", "title": "Segmentation Fault in Pthread Loop", "body": "<p>Recently I have been doing a bunch of numerical analysis for work. Mostly for small amounts of data on relatively simple concepts. In anticipation for a project that is coming up, I began working on more complex systems with exponentially more calculations. My run times went from being tens of seconds to tens of minutes. I decided, in an attempt to speed up run times, to learn how to write code using pthreads.</p>\n\n<p>Because of this, I have been working on a program that uses a serial method and pthreads to populate matrices. I have written this program to do each of these n times and take the average time of each run. When I run this program only utilizing a single pthread_t it works as intended. When I add an additional thread, I receive a \"Segmentation fault\" error.</p>\n\n<p>My code follows:</p>\n\n<p>fill.h</p>\n\n<pre><code>#ifndef FILL_H_\n#define FILL_H_\n\n#include &lt;pthread.h&gt;//Allows access to pthreads                                  \n#include &lt;sys/time.h&gt;//Allows the ability to pull the system time                \n#include &lt;stdio.h&gt;//Allows input and output                                      \n#include &lt;stdlib.h&gt;//Allows for several fundamental calls                        \n\n#define NUM_THREADS 2                                                            \n#define MAT_DIM 50                                                             \n#define RUNS 1      \n\npthread_t threads[NUM_THREADS];                                              \npthread_mutex_t mutexmat;  \n\ntypedef struct{                                                                  \n   int id;                                                                      \n   int column;                                                                     \n   int* matrix[NUM_THREADS];                                                                  \n}WORKER;  \n#endif\n</code></pre>\n\n<p>fill.c</p>\n\n<pre><code>/*This routine will fill an array both in serial and parallel with random\n *numbers. It will also display the real time it took to accomplish each task*/\n\n/* C includes */\n#include \"fill.h\"\n/* Fills a matrix */\nvoid fill(int start, int stop, int** matrix)\n{\n    int i, j;\n    for(i = start; i &lt; stop; i++)\n    {\n        for(j = 0; j &lt; MAT_DIM; j++)\n            matrix[i][j] = rand() % 10;\n    }\n}\n\nvoid* work(void* threadarg)\n{\n    /* Creates a pointer to a worker type variable*/\n    WORKER *this_worker;\n    /* Points this_worker at what thread arg is pointing to*/\n    this_worker = (WORKER*) threadarg;\n    /* Calculates my stopping point for this thread*/\n    int stop = this_worker-&gt; column + (MAT_DIM / NUM_THREADS);\n    /* Used to drive matrix */\n    int i,j;\n    /* Fills portion of Matrix */\n    for( i = this_worker-&gt; column; i &lt; stop; i++)\n    {\n        /* Prints the column that matrix is working on */\n        printf(\"Worker %d working on column %d\\n\", this_worker-&gt;id, i);\n\n        for( j = 0; j &lt; MAT_DIM; j++)\n        {\n            this_worker-&gt; matrix[i][j] = rand() % 10;\n        }\n    }\n    /* Signals thread is done */\n    printf(\"Thread %d done.\\n\", this_worker-&gt; id);\n    /* Terminates thread */\n    pthread_exit(NULL);\n}\n\nint main()\n{\n/* Seeding rand */\n    srand (time(NULL)); \n/* These will be used for loops */\n    int i, j, r, t; \n/* Creating my matrices */\n    int* matrix_serial[MAT_DIM];\n    int* matrix_thread[MAT_DIM];\n/* creating timeval variables */\n    struct timeval t0, t1;\n\n/* Beginning serial solution */\n    /* Creating timer for serial solution */\n    gettimeofday(&amp;t0, 0);\n    /* Creating serial matrix */\n    for(i = 0; i &lt; MAT_DIM; i++)\n        matrix_serial[i] = (int*)malloc( MAT_DIM * sizeof(int));\n\n    /* Filling the matrix */    \n    for(r = 0; r &lt; RUNS; r++)\n        fill(0, MAT_DIM, matrix_serial);\n    /* Calculating how long it took to run */\n    gettimeofday(&amp;t1, 0);\n    unsigned long long int delta_t = (t1.tv_sec * 1000000 + t1.tv_usec)\n                                   - (t0.tv_sec * 1000000 + t0.tv_usec);\n    double t_dbl = (double)delta_t/1000000.0;\n    double dt_avg = t_dbl / (double)r;\n    printf(\"\\nSerial Run Time for %d runs: %f\\t Average:%f\\n\",r, t_dbl, dt_avg);\n\n/* Begin multithread solution */\n    /* Creating the offset where each matrix will start */\n    int offset = MAT_DIM / NUM_THREADS;\n    /* Creating a variable to store a return code */\n    int rc;\n    /* Creates a WORKER type variable named mat_work_t */\n    WORKER mat_work_t[NUM_THREADS];\n\n    /* Allocating a chunk of memory for my matrix */\n    for( i = 0; i &lt; MAT_DIM; i++)\n        matrix_thread[i] = (int*)malloc( MAT_DIM * sizeof(int));\n\n    /* Begin main loop */\n    for(r = 0; r &lt; RUNS; r++)\n    {\n    /* Begin multithread population of matrix */    \n        for(t = 0; t &lt; NUM_THREADS; t++)\n        {\n    /* Sets the values for mat_work_t[t] */\n            mat_work_t[t].id = t;\n            mat_work_t[t].column = t * offset;\n            /* Points the mat_work_t[t].matrix at the matrix_thread */\n            for(i = 0; i &lt; MAT_DIM; i++)\n                mat_work_t[t].matrix[i] = &amp;matrix_thread[i][0];\n\n    /* Creates thread placing its return value into rc */\n            rc = pthread_create(&amp;threads[t],\n                                NULL,\n                                work,\n                                (void*) &amp;mat_work_t[t]);\n    /* Prints that a thread was successfully created */ \n            printf(\"Thread %d created.\\n\", mat_work_t[t].id);\n    /* Checks to see if a return code was sent. If it was it will print it. */\n            if (rc) \n                {\n                printf(\"ERROR: return code from pthread_create() is %d\\n\", rc);\n                return(-1);\n                }\n        }\n    /* Makes sure all threads are done doing work before progressing */\n        printf(\"Waiting for workers to finish.\\n\");\n        for(i = 0; i &lt; NUM_THREADS; i++)\n            pthread_join(threads[i], NULL);\n\n        printf(\"Work complete!\\n\");\n\n    }\n\n    /* Prints out the last matrix that was created by the loop */\n    for(i = 0; i &lt; MAT_DIM; i++)\n        {\n            for(j = 0; j &lt; MAT_DIM; j++)\n                printf(\"%d \",matrix_thread[i][j]);\n            printf(\"\\n\");\n        }\n    /* Terminates thread */\n    pthread_exit(NULL);\n}\n</code></pre>\n\n<p>When I run gdb I get:</p>\n\n<pre><code>[New Thread 0x7ffff7fd3700 (LWP 27907)]\nThread 0 created.\nWorker 0 working on column 0\nWorker 0 working on column 1\nWorker 0 working on column 2\n\nProgram received signal SIGSEGV, Segmentation fault.\n[Switching to Thread 0x7ffff7fd3700 (LWP 27907)]\n0x0000000000400924 in work (threadarg=0x7fffffffd9c0) at fill.c:35\n35              this_worker-&gt; matrix[i][j] = rand() % 10;\n</code></pre>\n\n<p>My understanding of segmentation faults is fairly textbook: A segmentation fault occurs when you try to access memory that isn't \"yours\" to access. From this I know that the code is having an issue accessing the memory where this matrix is stored.</p>\n\n<p>My questions:</p>\n\n<ol>\n<li>Is my logic right on the nature of the issue? </li>\n<li>Why does adding a thread cause this program to break down?</li>\n<li>How do I go about troubleshooting this kind of thing in the future (any tips would be greatly appreciated)?</li>\n<li>Lastly, how do I fix it (clues or a solution would be greatly appreciated)?</li>\n</ol>\n"}, {"tags": ["c", "include", "c-preprocessor"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1459972828, "post_id": 36460705, "comment_id": 60534224, "body": "&quot;where one of the functions declare if DEBUG&quot; - No, the function is defined if <code>DEBUG</code> is defined. And you should pass this macro from the command-line, not define it in your code. And in general it is a bad idea to exclude the whole function, as that will make your code not compiler without it."}, {"owner": {"reputation": 11698, "user_id": 5399734, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2162d669508364bb0c03aba1a2473aa8?s=128&d=identicon&r=PG&f=1", "display_name": "nalzok", "link": "https://stackoverflow.com/users/5399734/nalzok"}, "edited": false, "score": 0, "creation_date": 1459986622, "post_id": 36460705, "comment_id": 60540224, "body": "Run <code>gcc -E main.c</code>, and check the result"}], "answers": [{"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1459972912, "post_id": 36460806, "comment_id": 60534279, "body": "IIRC, it was the <code>NDEBUG</code> macro. Nost sure if <code>DEBUG</code> is actually supported."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1459973136, "post_id": 36460806, "comment_id": 60534394, "body": "@Olaf, the standard talks about <code>NDEBUG</code> in relation to <code>assert</code>. I think of the OP is wondering about <code>DEBUG</code> that has no relation to <code>NDEBUG</code>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1459973250, "post_id": 36460806, "comment_id": 60534460, "body": "Hmm, I suspect he actually thinks about somethink like <code>NDEBUG</code> though, but either confused the name or just follows hearsay."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 4, "last_activity_date": 1459971434, "creation_date": 1459971434, "answer_id": 36460806, "question_id": 36460705, "link": "https://stackoverflow.com/questions/36460705/include-is-required-sooner-than-it-appears-in-the-program/36460806#36460806", "title": "#include is required sooner than it appears in the program", "body": "<blockquote>\n  <p>But I will know if DEBUG is defined only into main() after arguments checking.</p>\n  \n  <p>...</p>\n  \n  <p>Is it right?</p>\n</blockquote>\n\n<p>No, that is not right.</p>\n\n<p><code>DEBUG</code> is a preprocessor macro that is defined, or not, at compile time when compiling each source file. It is possible that <code>DEBUG</code> is defined when compiling <code>main.c</code> but not when compiling the source file that defines <code>printStack</code>.</p>\n\n<p>If you use <code>make</code> or an IDE, it is most likely that <code>DEBUG</code> is defined, or not, for compiling every source file but there is nothing in the language that guarantees that.</p>\n"}, {"tags": [], "owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "is_accepted": true, "score": 4, "last_activity_date": 1459971465, "creation_date": 1459971465, "answer_id": 36460823, "question_id": 36460705, "link": "https://stackoverflow.com/questions/36460705/include-is-required-sooner-than-it-appears-in-the-program/36460823#36460823", "title": "#include is required sooner than it appears in the program", "body": "<p>You're confusing C and preprocessor macros:</p>\n\n<p>Everything starting with a <code>#</code> is replaced by the preprocessor, before the source code gets compiled, and only at runtime there's <code>main</code> executing.</p>\n\n<p>So, no, you're not doing it right.</p>\n\n<p>You can't <code>#define</code> or <code>#if</code> at runtime; it's a pre-compile-time thing. Simply use C's normal variables and <code>if</code> control mechanisms.</p>\n\n<p>Your mistakes strongly point to you not going through a coherent tutorial or C book to learn the language. Maybe you want to pick up new literature; any C tutorial I could possibly imagine will teach you how to do this pretty quickly.</p>\n"}, {"tags": [], "owner": {"reputation": 11698, "user_id": 5399734, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2162d669508364bb0c03aba1a2473aa8?s=128&d=identicon&r=PG&f=1", "display_name": "nalzok", "link": "https://stackoverflow.com/users/5399734/nalzok"}, "is_accepted": false, "score": 0, "last_activity_date": 1459987362, "creation_date": 1459987362, "answer_id": 36464394, "question_id": 36460705, "link": "https://stackoverflow.com/questions/36460705/include-is-required-sooner-than-it-appears-in-the-program/36464394#36464394", "title": "#include is required sooner than it appears in the program", "body": "<p>No, that's wrong. you're trying to determine the result of preprocess according to the arguments passed. Here is the simplified version of your code:</p>\n\n<pre><code>#define EXPR_LENGTH 1000\n\nint main(int argc, char* argv[])\n{\n    int argflag = 0;\n    if (argc &gt;= 2)\n        argflag = !strcmp(argv[1], \"-debug\");\n\n#if (argflag)\n#define DEBUG\n    printf(\"! DEBUG !\\n\\n\\n\")\n#endif\n}\n</code></pre>\n\n<p>Preprocessed with <code>clang -E main.c</code>:</p>\n\n<pre><code>int main(int argc, char* argv[])\n{\n int argflag = 0;\n if (argc &gt;= 2)\n  argflag = !strcmp(argv[1], \"-debug\");\n\n\n\n\n\n}\n</code></pre>\n\n<p><em>Pre</em>process is finished before compilation, which is before execution, starts. So it's impossible to determine the result of preprocess at run-time.</p>\n"}], "owner": {"reputation": 245, "user_id": 6035628, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/34a07faa48dc790ad6c50fb9a8e58201?s=128&d=identicon&r=PG&f=1", "display_name": "luckystrrrike", "link": "https://stackoverflow.com/users/6035628/luckystrrrike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 36460823, "answer_count": 3, "score": 2, "last_activity_date": 1460018557, "creation_date": 1459971157, "last_edit_date": 1460018557, "question_id": 36460705, "link": "https://stackoverflow.com/questions/36460705/include-is-required-sooner-than-it-appears-in-the-program", "title": "#include is required sooner than it appears in the program", "body": "<p>I have a header where one of the functions declare if <code>DEBUG</code> is defined.</p>\n\n<p>Also I have a definition of this function which works the same principle. But I will know if <code>DEBUG</code> is defined only in <code>main()</code> after arguments checking. </p>\n\n<p>I've placed the <code>#include</code> in <code>main()</code>:</p>\n\n<p><strong>header:</strong></p>\n\n<pre><code>#ifdef DEBUG\nvoid printStack(Stack* st);\n#endif\n</code></pre>\n\n<p><strong>file where function definition is</strong></p>\n\n<pre><code>#ifdef DEBUG\nvoid printStack(Stack* st)\n{\n    int i;\n    for (i = 0; i &lt; st-&gt;size; i++)\n        printf(ValType_IOSPECIF \" \",st-&gt;data[i]);\n    printf(\"\\n\");\n}\n#endif\n</code></pre>\n\n<p><strong>file where main() is</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;string.h&gt;\n#include \"calculating.h\"\n\n#define EXPR_LENGTH 1000\n\nint main(int argc, char* argv[])\n{\n    int argflag = 0;\n    if (argc &gt;= 2)\n        argflag = !strcmp(argv[1], \"-debug\");\n\n#if (argflag)\n#define DEBUG\n    printf(\"! DEBUG !\\n\\n\\n\")\n#endif\n\n#include \"stack.h\" // there is a that function here\n...\n}\n</code></pre>\n\n<p>Is it right?</p>\n"}, {"tags": ["c", "network-programming"], "comments": [{"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 1, "creation_date": 1459969961, "post_id": 36460291, "comment_id": 60532560, "body": "That&#39;s because <code>inet_ntoa</code> returns a pointer to the same <code>char</code> array both times. Save the results in <code>std::string</code>."}, {"owner": {"reputation": 594, "user_id": 2123079, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/a8a94c20ffd4bd50f6c15628fc975219?s=128&d=identicon&r=PG", "display_name": "user2123079", "link": "https://stackoverflow.com/users/2123079/user2123079"}, "reply_to_user": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1459970149, "post_id": 36460291, "comment_id": 60532665, "body": "Damn it, such a dump mistake and so many wasted time. Please, write your comment as answer, I&#39;ll mark it as correct answer.."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1459970205, "post_id": 36460291, "comment_id": 60532694, "body": "<a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms738564%28v=vs.85%29.aspx\" rel=\"nofollow noreferrer\">RTM</a>. &quot;The string returned is guaranteed to be valid only until the next Windows Sockets function call is made within the same thread. Therefore, the data should be copied before another Windows Sockets call is made.&quot;"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1459970507, "post_id": 36460291, "comment_id": 60532881, "body": "C and C++ are different languages. Please remove the inappropriate tag!"}], "answers": [{"tags": [], "owner": {"reputation": 86, "user_id": 2482902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd009f6544a3ca082afdf9e9e6269ab2?s=128&d=identicon&r=PG", "display_name": "Jos&#233; Rios", "link": "https://stackoverflow.com/users/2482902/jos%c3%a9-rios"}, "is_accepted": true, "score": 0, "last_activity_date": 1460038959, "creation_date": 1460038959, "answer_id": 36479094, "question_id": 36460291, "link": "https://stackoverflow.com/questions/36460291/same-source-and-destination-address-of-captured-ip-packet/36479094#36479094", "title": "Same source and destination address of captured IP-packet", "body": "<p>As Captain Obvlious commented, <code>inet_ntoa</code> returns a statically allocated buffer. From <a href=\"http://linux.die.net/man/3/inet_ntoa\" rel=\"nofollow\">inet_ntoa(3)</a>:</p>\n\n<blockquote>\n  <p>The inet_ntoa() function converts the Internet host address in, given in network byte order, to a string in IPv4 dotted-decimal notation. The string is returned in a statically allocated buffer, which subsequent calls will overwrite.</p>\n</blockquote>\n\n<p>Copy the returned value or use <code>inet_ntop</code> which uses a user allocated buffer.</p>\n"}], "owner": {"reputation": 594, "user_id": 2123079, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/a8a94c20ffd4bd50f6c15628fc975219?s=128&d=identicon&r=PG", "display_name": "user2123079", "link": "https://stackoverflow.com/users/2123079/user2123079"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 223, "favorite_count": 0, "accepted_answer_id": 36479094, "answer_count": 1, "score": 0, "last_activity_date": 1460038959, "creation_date": 1459969785, "last_edit_date": 1459970721, "question_id": 36460291, "link": "https://stackoverflow.com/questions/36460291/same-source-and-destination-address-of-captured-ip-packet", "title": "Same source and destination address of captured IP-packet", "body": "<p>I have a user-space program in which I process packets. I send them there with help of iptables.</p>\n\n<p>But I have a problem to get properly source and destination of the packet. The destination should be <strong>192.168.1.66</strong> and the source <strong>192.168.0.102</strong>. But the strange thing is if I write:</p>\n\n<pre><code>char *dstIpAddress = inet_ntoa(((struct ip*)full_packet)-&gt;ip_dst);    \nchar *srcIpAddress = inet_ntoa(((struct ip*)full_packet)-&gt;ip_src);\n</code></pre>\n\n<p>I get both destination and source <strong>192.168.1.66</strong>.<br>\nBut if I write:</p>\n\n<pre><code>char *srcIpAddress = inet_ntoa(((struct ip*)full_packet)-&gt;ip_src);\nchar *dstIpAddress = inet_ntoa(((struct ip*)full_packet)-&gt;ip_dst);    \n</code></pre>\n\n<p>I get both destination and source <strong>192.168.0.102</strong>. </p>\n\n<p>Where is the problem?</p>\n"}, {"tags": ["c", "arrays", "struct"], "comments": [{"owner": {"reputation": 154, "user_id": 2100156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d76ddf28a36238ac5f4d3508d8082ce4?s=128&d=identicon&r=PG&f=1", "display_name": "hello_hell", "link": "https://stackoverflow.com/users/2100156/hello-hell"}, "edited": false, "score": 2, "creation_date": 1459969857, "post_id": 36460215, "comment_id": 60532478, "body": "Arguments are passed by value. The assignment within initArray() does not have effect outside the function."}, {"owner": {"reputation": 661, "user_id": 5510623, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Yyk7K.png?s=128&g=1", "display_name": "RigidBody", "link": "https://stackoverflow.com/users/5510623/rigidbody"}, "reply_to_user": {"reputation": 154, "user_id": 2100156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d76ddf28a36238ac5f4d3508d8082ce4?s=128&d=identicon&r=PG&f=1", "display_name": "hello_hell", "link": "https://stackoverflow.com/users/2100156/hello-hell"}, "edited": false, "score": 0, "creation_date": 1459969971, "post_id": 36460215, "comment_id": 60532565, "body": "@def1: But aren&#39;t I passing a pointer?"}, {"owner": {"reputation": 1964, "user_id": 1320881, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b69670b7cc6bce132f443eee557c9448?s=128&d=identicon&r=PG", "display_name": "Unimportant", "link": "https://stackoverflow.com/users/1320881/unimportant"}, "edited": false, "score": 0, "creation_date": 1459970236, "post_id": 36460215, "comment_id": 60532716, "body": "@ Chris: Yes, and you can change the data the pointer points to, but you assign a new value to the pointer itself which will not carry over outside the function, use a pointer to the pointer."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1459970301, "post_id": 36460215, "comment_id": 60532755, "body": "Standard note: Don&#39;t cast <code>void *</code> to other pointers in C."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1459970369, "post_id": 36460215, "comment_id": 60532795, "body": "A syntax error will not cause a segfault, simply because it will not compile. And your code would be wrong in C++, too."}], "answers": [{"tags": [], "owner": {"reputation": 1964, "user_id": 1320881, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b69670b7cc6bce132f443eee557c9448?s=128&d=identicon&r=PG", "display_name": "Unimportant", "link": "https://stackoverflow.com/users/1320881/unimportant"}, "is_accepted": false, "score": 1, "last_activity_date": 1459970700, "creation_date": 1459970700, "answer_id": 36460575, "question_id": 36460215, "link": "https://stackoverflow.com/questions/36460215/adding-an-array-element-to-an-array-in-a-struct/36460575#36460575", "title": "Adding an array element to an array in a struct", "body": "<pre><code>void initArray(struct arrayHolder * b) \n</code></pre>\n\n<p>Here you pass a pointer to a struct arrayHolder to the function. The pointer is passed by value which means it is a copy. You can change the data the pointer is pointing to but when you assign the result of malloc to b you are modifying the copy of the pointer itself, which will not influence the pointer in main.</p>\n\n<p>Possible solution is to use a pointer to a pointer.</p>\n\n<pre><code>void initArray(struct arrayHolder ** b) {\n    *b = (struct arrayHolder *)malloc(sizeof(struct arrayHolder));\n    (*b)-&gt;count = 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 661, "user_id": 5510623, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Yyk7K.png?s=128&g=1", "display_name": "RigidBody", "link": "https://stackoverflow.com/users/5510623/rigidbody"}, "edited": false, "score": 0, "creation_date": 1459971345, "post_id": 36460583, "comment_id": 60533391, "body": "@Chris, I&#39;m glad to help.  As Olaf observed, however, your code was not correct in C++, either.  All of my comments apply there as well, except about removing the cast of <code>malloc()</code>&#39;s return value.  C++ requires that cast."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 661, "user_id": 5510623, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Yyk7K.png?s=128&g=1", "display_name": "RigidBody", "link": "https://stackoverflow.com/users/5510623/rigidbody"}, "edited": false, "score": 0, "creation_date": 1459971771, "post_id": 36460583, "comment_id": 60533629, "body": "@Chris: It is not different from passing pointers in C++. You just have the option to use a reference to the pointer, but that is a different type and has a distinct syntax."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 2, "last_activity_date": 1459970727, "creation_date": 1459970727, "answer_id": 36460583, "question_id": 36460215, "link": "https://stackoverflow.com/questions/36460215/adding-an-array-element-to-an-array-in-a-struct/36460583#36460583", "title": "Adding an array element to an array in a struct", "body": "<p>As @def1 observed, you are passing pointers by value.  That's not an issue for <code>addArray()</code> -- the problem is with <code>initArray()</code>.  That function's parameter is local to the function, so when you assign the <code>malloc()</code>ed pointer to it, the result is not visible in <code>main()</code>.  Ultimately, you end up passing a <code>NULL</code> pointer to <code>addArray()</code>.</p>\n\n<p>There are at least two possible solutions.</p>\n\n<ol>\n<li><p>In the code presented, it's not clear to me why the <code>struct arrayholder</code> needs to be dynamically allocated at all.  If in <code>main()</code> you declare instead <code>struct arrayholder myStruct;</code> and remove the <code>malloc()</code> call from <code>initArray()</code>, then everything else should work as-is.</p></li>\n<li><p>Alternatively, if you do need to perform dynamic allocation then either you should return a pointer to the allocated memory from <code>initArray()</code> (in which case that function does not require a parameter) or else you need to pass a double pointer to the function, so that <code>main()</code>'s pointer can be updated thereby.</p></li>\n</ol>\n\n<p>The only one of those alternatives that should be at all tricky is the double pointer variant, which would look like this:</p>\n\n<pre><code>int main() {\n    struct arrayHolder * myStruct = NULL;\n    initArray(&amp;myStruct);                 /* difference here */\n    addArray(myStruct, 123);\n}\n\n/* Allocate memory for struct arrayHolder */\nvoid initArray(struct arrayHolder ** b) {\n    /* no cast is required here in C, and many account one poor style: */:\n    *b = malloc(sizeof(struct arrayHolder));\n    (*b)-&gt;count = 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 661, "user_id": 5510623, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Yyk7K.png?s=128&g=1", "display_name": "RigidBody", "link": "https://stackoverflow.com/users/5510623/rigidbody"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 36460583, "answer_count": 2, "score": 0, "last_activity_date": 1459970727, "creation_date": 1459969571, "last_edit_date": 1459969913, "question_id": 36460215, "link": "https://stackoverflow.com/questions/36460215/adding-an-array-element-to-an-array-in-a-struct", "title": "Adding an array element to an array in a struct", "body": "<p>(Proficient at C++, newbie at C) getting a segfault error from the addArray() call in main().  I've checked many posts and several texts, it compiles, but no luck running it. I'm coding it on VS2015 and all the usual handy cues are there with pointers, etc. Cleary something I'm not aware of or a syntax error.  This is the distilled code that reproduces the error.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#define TYPE int\n\nstruct arrayHolder {\n    TYPE data[100];\n    int count;\n};\n\n//prototypes.\nvoid initArray(struct arrayHolder * );\nvoid addArray(struct arrayHolder *, TYPE);\n\n\nint main() {\n    struct arrayHolder * myStruct = NULL;\n    initArray(myStruct);\n    addArray(myStruct, 123);\n}\n\n/* Allocate memory for struct arrayHolder */\nvoid initArray(struct arrayHolder * b) {\n    b = (struct arrayHolder *)malloc(sizeof(struct arrayHolder));\n    b-&gt;count = 0;\n}\n\n\n/* Add an element to data[] */\nvoid addArray(struct arrayHolder * b, TYPE v) {\n    int count = b-&gt;count;\n    b-&gt;data[count] = v;\n    (b-&gt;count)++;\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "shell", "process", "pipeline"], "comments": [{"owner": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 0, "creation_date": 1459976782, "post_id": 36460062, "comment_id": 60536567, "body": "What output do you see when you run the command <code>echo first command | echo second command</code> ?"}, {"owner": {"reputation": 1, "user_id": 5785708, "user_type": "registered", "profile_image": "https://graph.facebook.com/1266175890065368/picture?type=large", "display_name": "Justin Chang", "link": "https://stackoverflow.com/users/5785708/justin-chang"}, "reply_to_user": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 0, "creation_date": 1460004597, "post_id": 36460062, "comment_id": 60545048, "body": "Input  $echo a | echo b   Output:   b\\n b\\n   $$"}, {"owner": {"reputation": 1, "user_id": 5785708, "user_type": "registered", "profile_image": "https://graph.facebook.com/1266175890065368/picture?type=large", "display_name": "Justin Chang", "link": "https://stackoverflow.com/users/5785708/justin-chang"}, "reply_to_user": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 0, "creation_date": 1460004779, "post_id": 36460062, "comment_id": 60545103, "body": "Why is there two &#39;b&#39; ? And now i can type in command.. But &quot;cat a.txt | grep abc&quot; still doesn&#39;t work"}, {"owner": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 0, "creation_date": 1460012811, "post_id": 36460062, "comment_id": 60548877, "body": "When the user types a pipe command to your shell, after it is executed,  the <code>lsh_launch</code> function is being called again to run the second command again. The reason it looks like the shell has stopped reacting after you type <code>cat a.txt | grep abc</code> is that another <code>grep abc</code> command is running, and it is reading from the terminal."}, {"owner": {"reputation": 1, "user_id": 5785708, "user_type": "registered", "profile_image": "https://graph.facebook.com/1266175890065368/picture?type=large", "display_name": "Justin Chang", "link": "https://stackoverflow.com/users/5785708/justin-chang"}, "reply_to_user": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 0, "creation_date": 1460025353, "post_id": 36460062, "comment_id": 60557435, "body": "I found where&#39;s the problem. I keep reading input untill there is a &#39; | &#39;,then i stop reading and return the char buffer,and the second command(haven&#39;t read yet)was read in the main function,so it execute the second command two time."}, {"owner": {"reputation": 1, "user_id": 5785708, "user_type": "registered", "profile_image": "https://graph.facebook.com/1266175890065368/picture?type=large", "display_name": "Justin Chang", "link": "https://stackoverflow.com/users/5785708/justin-chang"}, "reply_to_user": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 0, "creation_date": 1460025457, "post_id": 36460062, "comment_id": 60557500, "body": "Now i use fgets instead of getchar,and it work just fine. Thank you very much!"}], "owner": {"reputation": 1, "user_id": 5785708, "user_type": "registered", "profile_image": "https://graph.facebook.com/1266175890065368/picture?type=large", "display_name": "Justin Chang", "link": "https://stackoverflow.com/users/5785708/justin-chang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 98, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1459969199, "creation_date": 1459969199, "question_id": 36460062, "link": "https://stackoverflow.com/questions/36460062/having-trouble-using-pipeline-in-shell", "title": "Having trouble using pipeline in shell", "body": "<p>I'm writing a basic shell in c .<br>\nNow it can execute single-process commands , handling input and output redirection and execute command in background.<br>\nThe problem is that , when I tried to use pipeline,it can execute command correctly ,but after that the shell stop typing prompt and stop receiving command.</p>\n\n<p>Such as: cat a.txt | grep abc  </p>\n\n<p>Result:<br>\n$abc<br>\n(empty line and stop reacting)</p>\n\n<p>And whatever I type in the shell won't react to it.<br>\nI guess there's something wrong with std_input redirection or there's a process that didn't end. </p>\n\n<p>Here's the code to launch command.</p>\n\n<pre><code>void lsh_launch(char **args)\n{\nint pid=fork();\nif (pid== 0)  //children\n{\n    if(pipe_bool==0)\n    {\n\n        if(redir_in_bool==1 &amp;&amp; redir_out_bool==1) //redirect input and output\n        {\n            close(STD_INPUT); \n            int re_input=open(redir_in_adr,O_RDONLY); //open file\n            dup(re_input); //redirect std input\n            close(STD_OUTPUT);\n            int re_output=open(redir_out_adr,O_WRONLY | O_TRUNC | O_CREAT, S_IRWXU | S_IRWXG | S_IRWXO);\n            dup(re_output);//redirect std output\n            execvp(args[0],args);\n\n        }\n        else if(redir_in_bool==1 &amp;&amp; redir_out_bool==0) //redirect input\n        {\n            close(STD_INPUT);\n            int re_input=open(redir_in_adr,O_RDONLY);\n            dup(re_input);\n            execvp(args[0],args);\n        }\n        else if(redir_out_bool==1 &amp;&amp; redir_in_bool==0) //redirect output\n        {\n            close(STD_OUTPUT);\n            int re_output=open(redir_out_adr,O_WRONLY | O_TRUNC | O_CREAT, S_IRWXU | S_IRWXG | S_IRWXO);\n            dup(re_output);\n            execvp(args[0],args);\n        }\n        else   //normal command\n        {\n            execvp(args[0],args);\n        }\n    }\n    else  //pipeline\n    {\n        char* line2 = lsh_read_line();\n        char** args2 = lsh_split_line(line2);\n        pipeCommand(args,args2);\n        free(line2);\n        free(args2);\n    }\n\n} \nelse  //parent\n{\n        if(background_bool!=1 )\n        {\n            waitpid(pid, NULL, 0); \n        }\n}\nreturn ;\n}\n</code></pre>\n\n<p>Pipeline code:  </p>\n\n<pre><code>#define STD_INPUT  0\n#define STD_OUTPUT 1\nvoid pipeCommand(char **parameter1,char **parameter2)\n{\nint pipefd[2];\npipe(pipefd);\n\nif(fork())                      //parent process execute second command \n{\n    close(pipefd[1]);\n    dup2(pipefd[0],STDIN_FILENO);\n    close(pipefd[0]);\n    execvp(parameter2[0],parameter2);\n}\nelse                            //child process execute first command\n{\n    close(pipefd[0]);\n    dup2(pipefd[1],STDOUT_FILENO);\n    close(pipefd[1]);\n    execvp(parameter1[0],parameter1);\n}\n}\n</code></pre>\n\n<p>And the other code\n<a href=\"http://ideone.com/XEuBVA\" rel=\"nofollow\">http://ideone.com/XEuBVA</a></p>\n"}, {"tags": ["c", "embedded", "microchip", "mplab"], "comments": [{"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 2, "creation_date": 1459968961, "post_id": 36459934, "comment_id": 60531893, "body": "If <code>TRUE</code> is zero, then yes! Otherwise, not really. It might sound nice to have operations independent of the actual values of booleans, but in practice it\u2019s just messy, as you say."}, {"owner": {"reputation": 2628, "user_id": 1508243, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c55ab140c6839baef28a70686f4b8bda?s=128&d=identicon&r=PG", "display_name": "Pete Baughman", "link": "https://stackoverflow.com/users/1508243/pete-baughman"}, "reply_to_user": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1459969004, "post_id": 36459934, "comment_id": 60531921, "body": "@RyanO&#39;Hara I love it!  Technically correct, but I can confirm that TRUE is not defined as 0 in this case.  Man, that would be even weirder. . ."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1459969005, "post_id": 36459934, "comment_id": 60531923, "body": "[opinion based] not, it is complete nonsense, but it can be used to please java-hipsters ;-)"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1459969171, "post_id": 36459934, "comment_id": 60532042, "body": "For some reason, in my organization the coding convention enforcing to spell out the values.. Well, people are just not following though :)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1459969244, "post_id": 36459934, "comment_id": 60532081, "body": "<code>if(SomeFunction() == TRUE)</code> has limited value, like <code>int SomeFunction()</code> returns 3 or more values and codes need to test if the return value was <code>TRUE</code>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1459969309, "post_id": 36459934, "comment_id": 60532119, "body": "IMO: no. I have never seen any need to use formal boolean definitions, unless you want a language proof way to <i>assign</i> <code>true</code> (not always <code>1</code>). In C <code>0</code> is false and anything else is true. <code>int apples = 3; if(apples) {...}</code>"}, {"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 0, "creation_date": 1459969491, "post_id": 36459934, "comment_id": 60532226, "body": "<code>and the weird way that they made &#39;return&#39; look like a function invocation</code>  What do you mean? Also, it s/b <code>return (3 == value) ? 0 : 1;</code>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 3, "creation_date": 1459969603, "post_id": 36459934, "comment_id": 60532304, "body": "@KevinDTimm even simpler is <code>return 3 != value;</code>"}, {"owner": {"reputation": 2628, "user_id": 1508243, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c55ab140c6839baef28a70686f4b8bda?s=128&d=identicon&r=PG", "display_name": "Pete Baughman", "link": "https://stackoverflow.com/users/1508243/pete-baughman"}, "reply_to_user": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 2, "creation_date": 1459969629, "post_id": 36459934, "comment_id": 60532322, "body": "@KevinDTimm this thing is full of lines like &#39;return(42)&#39; instead of &#39;return 42&#39;  The parenthesis seem unnecessary.  To me it reads like someone is trying to call a function named return and pass a value of 42"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 2, "creation_date": 1459969739, "post_id": 36459934, "comment_id": 60532387, "body": "@KevinDTimm: A <code>return</code> statement does not require parentheses around the expression. The parentheses are not incorrect (it&#39;s just a parenthesized expression), but they&#39;re unnecessary and potentially obfuscating. <code>return(42);</code> looks very similar to a function call; <code>return 42;</code> clearly is a return statement. And a pre-C99 compiler will flag <code>retrun 42;</code> but is likely to compile <code>retrun(42);</code> without complaint, resulting in a link-time error."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1459969752, "post_id": 36459934, "comment_id": 60532399, "body": "@RyanO&#39;Hara has a point however; a less perverse and very likely scenario is where <code>SomeFunction()</code> returns some non-zero value other then whatever TRUE is defined as; in which case it will also fail."}, {"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1459969782, "post_id": 36459934, "comment_id": 60532422, "body": "@KeithThompson - For sure it does not, but for those of us who&#39;ve used C for 30+ years there is nothing at all unusual about that syntax.  Additionally, since it compiles but doesn&#39;t link the coder gets to learn about syntax errors :)"}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1459970033, "post_id": 36459934, "comment_id": 60532599, "body": "The first line of your question <code>true</code> rather then <code>TRUE</code>, while elsewhere your refer to TRUE.  If stdbool.h is included, <code>true</code> is defined and has type <code>_Bool</code> (with a typedef alias <code>bool</code>) and is a genuine boolean type.  You may even get a warning if you attempt to compare it to an int or enum or whatever <code>BOOLEAN</code> is defined as."}, {"owner": {"reputation": 2628, "user_id": 1508243, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c55ab140c6839baef28a70686f4b8bda?s=128&d=identicon&r=PG", "display_name": "Pete Baughman", "link": "https://stackoverflow.com/users/1508243/pete-baughman"}, "reply_to_user": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1459970104, "post_id": 36459934, "comment_id": 60532641, "body": "@Clifford - fixed.  Thanks.  It&#39;s TRUE everywhere."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1459970614, "post_id": 36459934, "comment_id": 60532939, "body": "Good, unfortunately @KeithThompson&#39;s excellent answer refers to your original text.  It would be better perhaps to make it <code>bool</code> and <code>true</code> throughout.  The problem with defining a boolean alias is that everyone does it perhaps slightly differently using different base types such as int, char or an enum for example, declared using macros or typedef, but often using the same or similar symbol names which makes using code from multiple sources a real pain when every vendor thought it was a good idea to define a boolean type.  Not only is the idiom in question a bad idea, defining BOOLEAN is too"}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1459970643, "post_id": 36459934, "comment_id": 60532958, "body": "In the end this is a question of style, and stylistic issues are full of opinions, and everyone&#39;s entitled to their own opinion.  Nevertheless, the opinion that <code>if(SomeFunction() == TRUE)</code> is good style is simply wrong.  Some people will tell you that the explicit <code>== TRUE</code> is important for some reason or other.  You can&#39;t convince them otherwise, so just ignore them."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1459970650, "post_id": 36459934, "comment_id": 60532961, "body": "@Clifford: If <code>&lt;stdbool.h&gt;</code> is not included, <code>true</code> could be anything. (Not relevant here, since the code uses <code>TRUE</code>.)"}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1459970730, "post_id": 36459934, "comment_id": 60533019, "body": "@KeithThompson : Yes; that was rather my point; not only that but it would cause further problems when mixing with code that does use stdbool.h."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1459970783, "post_id": 36459934, "comment_id": 60533046, "body": "@SteveSummit: Seeing your name reminded me to cite the <a href=\"http://www.c-faq.com/\" rel=\"nofollow noreferrer\">comp.lang.c FAQ</a> in my answer. Thanks."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1459970806, "post_id": 36459934, "comment_id": 60533059, "body": "@SteveSummit : No it is not just a matter of style, it is potentially the cause of some insidious bugs and maintenance issues.  You should read the answers and other comments."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "reply_to_user": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1459973429, "post_id": 36459934, "comment_id": 60534545, "body": "@Clifford Don&#39;t worry, I read them all.  (But are you sure you read all of mine? :-) )"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1459975779, "post_id": 36459934, "comment_id": 60535937, "body": "Even worse, defining <code>_BOOLEAN</code> causes undefined behavior. Identifiers starting with two underscores, or with an underscore and an uppercase letter, are reserved to the implementation. Rather than <code>typedef enum _BOOLEAN { FALSE = 0, TRUE } BOOLEAN;</code>, it could be just <code>typedef enum { FALSE, TRUE } BOOLEAN;</code>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1459977447, "post_id": 36459934, "comment_id": 60536952, "body": "@SteveSummit:, re: &quot;You can&#39;t convince them otherwise, so just ignore them.&quot; That is true, <code>true</code>, so very <code>TRUE</code>. :-)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1459978464, "post_id": 36459934, "comment_id": 60537466, "body": "Since it appears not much reason to code this way, I am wondering if your <i>next</i> question is &quot;Any reason for <i>leaving code as-in</i> like: <code>if(function() == TRUE)</code>?&quot; which will have pros and cons.  The reasons for the &quot;con&quot; apply to why this style of code should not have been used in the first place."}, {"owner": {"reputation": 2628, "user_id": 1508243, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c55ab140c6839baef28a70686f4b8bda?s=128&d=identicon&r=PG", "display_name": "Pete Baughman", "link": "https://stackoverflow.com/users/1508243/pete-baughman"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1459979101, "post_id": 36459934, "comment_id": 60537744, "body": "@chux I&#39;ll probably go in and very carefully make sure that everything that returns a BOOLEAN returns either TRUE or FALSE and not a 3rd value, then change the call sites to if(function()) so that the next poor sap who has to work on this doesn&#39;t have to wonder WTF.  It&#39;ll be easy to know it&#39;s right because of all of the unit tests that we . . . . hahaha just kidding!  Of course there are no unit tests of any kind!"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1459980526, "post_id": 36459934, "comment_id": 60538297, "body": "@Pete Baughman Agree: The trick is that if <i>any</i> function <code>BOOLEAN f()</code> returns something other than <code>FALSE</code>, <code>TRUE</code> (After all its only an enumerated type) you are <a href=\"http://www.urbandictionary.com/define.php?term=SOL\" rel=\"nofollow noreferrer\">S.O.L.</a>.  If <code>sizeof(_Bool) != sizeof(BOOLEAN)</code>, or <code>alignof(_Bool) != alignof(BOOLEAN)</code> you get to lose even more sleep.  I do not <i>think</i> the <i>rank</i> will be a concern, but you might want to check if both promote to <code>int</code>.  And I hope no code uses <code>BOOLEAN</code> as a bit field."}, {"owner": {"reputation": 194, "user_id": 4955118, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FSFY-mD9PLU/AAAAAAAAAAI/AAAAAAAAALs/ZyLLxe1hayM/photo.jpg?sz=128", "display_name": "Shahe Ansar", "link": "https://stackoverflow.com/users/4955118/shahe-ansar"}, "edited": false, "score": 0, "creation_date": 1459981928, "post_id": 36459934, "comment_id": 60538816, "body": "Most use that form because they like it. It&#39;s kinda like asking if you like tabbed indentation or spaced indentation, preference (Also, I don&#39;t need to look up return values)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1459986646, "post_id": 36459934, "comment_id": 60540229, "body": "I&#39;d first search for all occurences of <code>BOOLEAN</code>, <code>TRUE</code> and <code>FALSE</code>, vrify they are identically use like the standard type/macros and replace them if they are. This might be done by a simple search/replace or refactoring tool. Next phase is to modify the useless comparisons with <code>TRUE</code>/<code>FALSE</code>. Then simplify where the values are generated. All presuming you have the time and your bosses won&#39;t cancel the rework mid-term (all seen)."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 194, "user_id": 4955118, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FSFY-mD9PLU/AAAAAAAAAAI/AAAAAAAAALs/ZyLLxe1hayM/photo.jpg?sz=128", "display_name": "Shahe Ansar", "link": "https://stackoverflow.com/users/4955118/shahe-ansar"}, "edited": false, "score": 0, "creation_date": 1460011161, "post_id": 36459934, "comment_id": 60547929, "body": "@ShaheAnsar : It is not as trivial as whitespace preferences; it has semantic implications from the definition of BOOLEAN, TRUE and FALSE which can cause bugs, maintenance, portability and interoperability issues."}, {"owner": {"reputation": 194, "user_id": 4955118, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FSFY-mD9PLU/AAAAAAAAAAI/AAAAAAAAALs/ZyLLxe1hayM/photo.jpg?sz=128", "display_name": "Shahe Ansar", "link": "https://stackoverflow.com/users/4955118/shahe-ansar"}, "reply_to_user": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1460022628, "post_id": 36459934, "comment_id": 60555477, "body": "@Clifford I myself use it that way because I prefer it. A lot of people I know do it that way too, although yes, I do agree with you."}, {"owner": {"reputation": 21195, "user_id": 125507, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2a59853d36056b7a088f33c96e3a1619?s=128&d=identicon&r=PG", "display_name": "endolith", "link": "https://stackoverflow.com/users/125507/endolith"}, "edited": false, "score": 1, "creation_date": 1517586896, "post_id": 36459934, "comment_id": 84169600, "body": "I&#39;m seeing the exact same pattern throughout example embedded code <b><i>written by the chip manufacturer</i></b>, and I really want to remove all of it in case it helps optimization, but I&#39;m scared it does something non-obvious.  <a href=\"https://github.com/yourskp/PioneerKit_P5LP_USB_Audio/blob/master/PioneerKit_P5LP_USB_Audio.cydsn/main.c\" rel=\"nofollow noreferrer\"><code>if (IsUSBConfigured() != FALSE)</code>??</a>"}], "answers": [{"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1459969511, "post_id": 36460103, "comment_id": 60532241, "body": "I&#39;d add that the <code>(SomeFunction() == TRUE)</code> style imposes an additional maintenance burden going forward, because every function incorporated into the system is required to provide return values adhering to the convention.  There is great potential for insidious bugs to creep in here, <i>especially</i> if this convention later falls out of favor, but the old code continues to hang around in places."}, {"owner": {"reputation": 2628, "user_id": 1508243, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c55ab140c6839baef28a70686f4b8bda?s=128&d=identicon&r=PG", "display_name": "Pete Baughman", "link": "https://stackoverflow.com/users/1508243/pete-baughman"}, "edited": false, "score": 2, "creation_date": 1459969532, "post_id": 36460103, "comment_id": 60532256, "body": "Keith, John - This is the answer that I believed when I wrote the question, and I still believe this is right.  I&#39;m going to keep this open for a little while though in case some highly experienced embedded systems developer comes along and says &quot;actually on the pic32 when using compiler version whatever . . . you need to watch out for . . .&quot;"}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 2628, "user_id": 1508243, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c55ab140c6839baef28a70686f4b8bda?s=128&d=identicon&r=PG", "display_name": "Pete Baughman", "link": "https://stackoverflow.com/users/1508243/pete-baughman"}, "edited": false, "score": 2, "creation_date": 1459971282, "post_id": 36460103, "comment_id": 60533350, "body": "@PeteBaughman : I would suggest that the best answer is the one that works identically on any compiler and with any reasonable definition of BOOLEAN, TRUE and FALSE.  An argument for doing this because it somehow works better in some specific compiler is a bad argument in any case.  That said, I am an advocate of leaving at least 24 hours before accepting an answer to give all timezones a change to chip in.  There really is no hurry. and Keith does not look like he&#39;s hungry for rep!"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1459975308, "post_id": 36460103, "comment_id": 60535665, "body": "The use of <code>BOOLEAN</code> instead of <code>_Bool</code> or <code>bool</code> does throw in unnecessary complications.  Good that you acknowledged implications if they are not synonyms. OP used them interchangeably - regrettably without a <code>BOOLEAN, TRUE, FALSE</code> definition.  Still does not counter the conclusion of this fine answer."}, {"owner": {"reputation": 2628, "user_id": 1508243, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c55ab140c6839baef28a70686f4b8bda?s=128&d=identicon&r=PG", "display_name": "Pete Baughman", "link": "https://stackoverflow.com/users/1508243/pete-baughman"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1459975626, "post_id": 36460103, "comment_id": 60535836, "body": "@chux Can you point out the mistake so I can fix it?  It should all be BOOLEAN, TRUE, and FALSE.  The definition that this project is using for BOOLEAN is given at the end of the question under &quot;Additional Information.&quot;  I&#39;m open to suggestions to improve this.  I fixed a true-&gt;TRUE typo about an hour ago.  I don&#39;t see where I used BOOLEAN _Bool or bool interchangeably."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1459975822, "post_id": 36460103, "comment_id": 60535971, "body": "@chux: Thanks. I think you may have been looking at an earlier version of the question. It seems to be consistent now (unless I&#39;ve missed something)."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1459977287, "post_id": 36460103, "comment_id": 60536870, "body": "@OP  Comment referenced earlier version of post <code>if(SomeFunction() == true)</code>.  I do see the update with improved consistency:  you might want to make consistent &quot;SomeFunction returns true or false&quot; --&gt;   &quot;<code>SomeFunction()</code> returns <code>TRUE</code> or <code>FALSE</code>&quot;"}, {"owner": {"reputation": 7797, "user_id": 942746, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/34cf9eae5d595c0b480a7cb42f3722b1?s=128&d=identicon&r=PG", "display_name": "Brian McFarland", "link": "https://stackoverflow.com/users/942746/brian-mcfarland"}, "edited": false, "score": 0, "creation_date": 1459996720, "post_id": 36460103, "comment_id": 60542866, "body": "Personally, I prefer the form: <code>switch (SomeFunction()){ case TRUE: &#47;* do stuff then *&#47; break; default: break;}</code>.  Or sometimes <code>res = SomeFunction(); while(res--){ &#47;* do stuff *&#47;}</code>, but the second form requires that TRUE == 1."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 7797, "user_id": 942746, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/34cf9eae5d595c0b480a7cb42f3722b1?s=128&d=identicon&r=PG", "display_name": "Brian McFarland", "link": "https://stackoverflow.com/users/942746/brian-mcfarland"}, "edited": false, "score": 0, "creation_date": 1550194425, "post_id": 36460103, "comment_id": 96189553, "body": "@BrianMcFarland: (Yes, I&#39;m replying to a comment from 2&#189; years ago.) Why? Do you always prefer <code>switch</code> to <code>if</code>?"}], "tags": [], "owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "is_accepted": true, "score": 17, "last_activity_date": 1550194863, "last_edit_date": 1550194863, "creation_date": 1459969292, "answer_id": 36460103, "question_id": 36459934, "link": "https://stackoverflow.com/questions/36459934/any-reason-for-iffunction-true-in-c/36460103#36460103", "title": "Any reason for if(function() == TRUE) in C", "body": "<blockquote>\n  <p>Is there a good reason for doing <code>if(SomeFunction() == true)</code> instead of doing <code>if(SomeFunction())</code></p>\n</blockquote>\n\n<p>No.</p>\n\n<p>If <code>SomeFunction()</code> returns a result of type <code>_Bool</code>, then the equality comparison should be reliable (assuming that the evaluation of the result did not involve undefined behavior). But the use of <code>TRUE</code> rather than <code>true</code>, and the type name <code>BOOLEAN</code> rather than <code>_Bool</code> or <code>bool</code>, suggest that the result is not an actual <code>_Bool</code> (available only in C99 or later), but some ad-hoc Boolean-like type -- perhaps an alias for <code>int</code>.</p>\n\n<p>A value of any scalar type can be used as a condition in an <code>if</code> statement. If the value is equal to zero, the condition is false; otherwise, the condition is true. If <code>TRUE</code> is defined as <code>1</code>, and <code>SomeFunction()</code> returns, say, <code>3</code>, then the test will fail.</p>\n\n<p>Writing</p>\n\n<pre><code>if (SomeFunction()) { /* ... */ }\n</code></pre>\n\n<p>is simpler, clearer, and more likely to behave correctly.</p>\n\n<p>Note, for example, that the <code>isdigit()</code> et al functions declared in <code>&lt;ctype.h&gt;</code> do not just return <code>0</code> or <code>1</code>; if the argument is a digit, <code>isdigit()</code> can (and does) return any non-zero value. Code that uses it is expected to handle it correctly -- by <em>not</em> comparing it for equality to <code>1</code>, to <code>true</code>, or to <code>TRUE</code>.</p>\n\n<p>Having said that, there <em>might</em> be a valid reason to compare something for equality to <code>TRUE</code> -- if it matters whether the result is equal to <code>TRUE</code> or has some other non-zero value. But in that case, using the names <code>BOOLEAN</code> and <code>TRUE</code> is misleading. The whole point of a Boolean type is that values are either true or false; there's no \"maybe\", and if there happen to be different representations of truth, you shouldn't care which one you have.</p>\n\n<p>The guideline I try to follow is:</p>\n\n<p><strong>Never</strong> compare a logically Boolean value for equality or inequality to <code>true</code> or <code>false</code> (or <code>0</code>, <code>1</code>, <code>FALSE</code>, <code>TRUE</code>).  Just test the value directly, with a <code>!</code> operator if you want to invert the test.  (A \"logically Boolean\" value either is of type <code>_Bool</code>, or is intended to distinguish between truth and falsehood with no additional information. The latter can be necessary if <code>_Bool</code> is not available.) Comparison to <code>false</code> can be safe, but there's no reason to do it; comparing the value directly is still clearer.</p>\n\n<p>And if someone tells you that</p>\n\n<pre><code>if (SomeFunction() == true)\n</code></pre>\n\n<p>is better than</p>\n\n<pre><code>if (SomeFunction())\n</code></pre>\n\n<p>just ask them why</p>\n\n<pre><code>if ((SomeFunction() == true) == true)\n</code></pre>\n\n<p>isn't even better.</p>\n\n<p>See also section 9 of the <a href=\"http://www.c-faq.com/\" rel=\"nofollow noreferrer\">comp.lang.c FAQ</a>. Its emphasis on pre-C99 solutions is perhaps a bit dated, but it's still valid.</p>\n\n<p>UPDATE: The question asks about a function that returns the value <code>TRUE</code> of type <code>BOOLEAN</code>, defined something like this:</p>\n\n<pre><code>typedef enum { FALSE, TRUE } BOOLEAN;\n</code></pre>\n\n<p>Such definitions were useful in pre-1999 C, but C99 added the predefined Boolean type <code>_Bool</code> and the header <code>&lt;stdbool.h&gt;</code>, which defines macros <code>bool</code>, <code>false</code>, and <code>true</code>. My current advice: Use <code>&lt;stdbool.h&gt;</code> unless there's a serious concern that your code might need to be used with an implementation that doesn't support it. If that's a concern, you can use</p>\n\n<pre><code>typedef enum { false, true } bool;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>typedef int bool;\n#define false 0\n#define true 1\n</code></pre>\n\n<p>(I prefer the first.) This isn't 100% compatible with the C99 definitions, but it will work correctly if you use it sensibly.</p>\n"}, {"tags": [], "owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "is_accepted": false, "score": 3, "last_activity_date": 1460013010, "last_edit_date": 1460013010, "creation_date": 1460012379, "answer_id": 36468868, "question_id": 36459934, "link": "https://stackoverflow.com/questions/36459934/any-reason-for-iffunction-true-in-c/36468868#36468868", "title": "Any reason for if(function() == TRUE) in C", "body": "<p>Since in C any non-zero value is considered true and only zero false you should never compare to one specific <code>TRUE</code> macro definition in any event.  It is unnecessarily specific.  The form:</p>\n\n<pre><code>if( fn() )\n</code></pre>\n\n<p>is the simplest form, but if you do prefer to compare to a specific value, then <em>only</em> compare to <code>FALSE</code> thus:</p>\n\n<pre><code>if( fn() != FALSE )  // Safer than '== TRUE', but entirely unnecessary\n</code></pre>\n\n<p>which will work for all reasonable definitions of <code>FALSE</code> and also if <code>fn()</code> is not <code>BOOLEAN</code>.  But it remains totally unnecessary.</p>\n\n<p>Personally for easier debugging I'd prefer:</p>\n\n<pre><code> BOOLEAN x = fn() ;\n if( x )\n</code></pre>\n\n<p>As well as being able to observe the return value in your debugger <em>before</em> entering or skipping the conditional block, you have the opportunity to name <code>x</code> something self documenting and specific to the context, which the function name might not reflect.  In maintenance you are more likely to maintain a variable name than correct a comment (or many comments). In addition <code>x</code> is then available to use elsewhere rather then calling <code>fn()</code> multiple times (which if it has side effects or state may not return the same value). </p>\n\n<p>Another problem with user defined boolean types and values is that the definitions may not be consistent throughout - especially if you use third-party code whose authors also thought it a good idea to define their own using the same symbol names as yours.  If the names differ (such as BOOL, BOOLEAN or OS_BOOL for example), when your code interfaces to this third-party code, you then have to decide whose boolean type should be used in any particular circumstance, and the names of TRUE and FALSE are likely to clash with redefinition warnings or errors.</p>\n\n<p>A better approach would be to update the code to use stdbool.h and the <em>real</em> boolean type <code>bool</code> (an alias for the built in <code>_Bool</code> in C99) which can have only two values <code>true</code> and <code>false</code>.  This will still not protect you from the case where <code>fn()</code> is not a <code>bool</code> function and returns an integer other then zero or one, but there is then the chance that the compiler will issue a type mismatch warning.  One of the best things you can do to refactor legacy code in and case is to set the warning level high and investigate and fix <em>all</em> the warnings (and not just by liberal casting!).</p>\n"}, {"tags": [], "owner": {"reputation": 137, "user_id": 2312842, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eb95efa00ecf64c417829840145672f2?s=128&d=identicon&r=PG", "display_name": "Ali", "link": "https://stackoverflow.com/users/2312842/ali"}, "is_accepted": false, "score": 1, "last_activity_date": 1496363335, "creation_date": 1496363335, "answer_id": 44319061, "question_id": 36459934, "link": "https://stackoverflow.com/questions/36459934/any-reason-for-iffunction-true-in-c/44319061#44319061", "title": "Any reason for if(function() == TRUE) in C", "body": "<p>It is probably very late and I am not 100% sure about PICs, but in AVRs some registers are available for application use and they offer very fast read and write speed. </p>\n\n<p>The compiler place the Boolean variables there first and then use the SRAM. In order to stop the compiler from doing so, usually a 8-bit variable is used instead of Boolean so that the compiler use the available register for variables used the most in the application. By doing so the application run faster but you should not use Booleans or only when they are used a lot. The only option is to use uint8_t/int8_t or you may use a self made type to act as a Boolean while being a uint8_t/int_t.</p>\n\n<p>For the return section, I have always done this in embedded systems. You return one value from the function and that value can represent successful operation. Other values are used to show errors or for debugging. This way one variable is used for everything and since you would want to avoid using Boolean, you can use the 8-bit variable with full potential.</p>\n\n<p>Overall I would like to emphasize something here, the embedded folks care about speed and memory a lot more than software engineers. I have worked with both folks, embedded system engineers generate a garbage looking code but it runs fast and consume very little memory. One of the reason that the code looks bad/ugly is because the compilers are not as smart as the typical compilers used by software engineers and sometimes special tweaks (which may look stupid) results in a more efficient assembly code. On the other hand, software engineers spend more time on readability and may not care about the efficiency of the code as much because the compiler will do most of the job.</p>\n\n<p>If the old embedded engineers were experienced and/or smart, they have probably done all of these for a good reason. Specially if they know the hardware very well.</p>\n\n<p>I hope this help for the rest of the code you are going through.</p>\n"}], "owner": {"reputation": 2628, "user_id": 1508243, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c55ab140c6839baef28a70686f4b8bda?s=128&d=identicon&r=PG", "display_name": "Pete Baughman", "link": "https://stackoverflow.com/users/1508243/pete-baughman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6321, "favorite_count": 3, "accepted_answer_id": 36460103, "answer_count": 3, "score": 9, "last_activity_date": 1550194863, "creation_date": 1459968797, "last_edit_date": 1459977633, "question_id": 36459934, "link": "https://stackoverflow.com/questions/36459934/any-reason-for-iffunction-true-in-c", "title": "Any reason for if(function() == TRUE) in C", "body": "<p><strong>The Question:</strong>\nDoes doing <code>if(SomeFunction() == TRUE)</code> instead of doing <code>if(SomeFunction())</code> protect against some type of coding error?  I'm trying to understand if this is protecting from some hidden land-mine, or if it's the result of someone writing code who didn't quite understand how expressions are evaluated.  I understand that if done right, both of these things evaluate the same.  Just like <code>if(value == 42)</code> and <code>if(42 == value)</code> evaluate the same - still, some prefer the 2nd version because it produces a compiler error if someone typo's the == and writes = instead.</p>\n\n<p><strong>Background:</strong>\nI've inherited some embedded software that was written 4 or 5 years ago by people who don't work here anymore.  I'm in the middle of some refactoring to get rid of multi-hundred line functions and global variables and all that jazz, so this thing is readable and we can maintain it going forward.  The code is c for a pic microprocessor.  This may or may not be relevant.  The code has all sorts of weird stuff in it that screams \"didn't know what they were doing\" but there's a particular pattern (anti-pattern?) in here that I'm trying to understand whether or not there's a good reason for</p>\n\n<p><strong>The Pattern:</strong>\nThere are a lot of if statements in here that take the form</p>\n\n<pre><code>if(SomeFunction() == TRUE){\n  . . .\n}\n</code></pre>\n\n<p>Where SomeFunction() is defined as</p>\n\n<pre><code>BOOLEAN SomeFunction(void){\n  . . .\n  if(value == 3)\n    return(FALSE);\n  else\n    return(TRUE);\n}\n</code></pre>\n\n<p>Let's ignore the weird way that SomeFunction returns TRUE or FALSE from the body of an if statement, and the weird way that they made 'return' look like a function invocation.</p>\n\n<p>It seems like this breaks the normal values that c considers 'true' and 'false'  Like, they really want to make sure the value returned is equal to whatever is defined as TRUE.  It's almost like they're making three states - TRUE, FALSE, and 'something else'  And they don't want the 'if' statement to be taken if 'something else' is returned.</p>\n\n<p>My gut feeling is that this is a weird anti-pattern but I want to give these guys the benefit of the doubt.  For example I recognize that <code>if(31 == variable)</code> looks a little strange but it's written that way so if you typo the == you don't accidently assign 31 to variable.  Were the guys that wrote this protecting against a similar problem, or is this just nonsense.</p>\n\n<p><strong>Additional Info</strong></p>\n\n<ul>\n<li>When I wrote this question, I was under the impression that stdbool was not available, but I see now that it's provided by the IDE, just not used in this project.  This tilts me more towards \"No good reason for doing this.\"</li>\n<li>It looks like BOOLEAN is defined as <code>typedef enum _BOOLEAN { FALSE = 0, TRUE } BOOLEAN;</code></li>\n<li>The development environment in question here is MPLAB 8.6</li>\n</ul>\n"}, {"tags": ["c", "file", "data-structures"], "comments": [{"owner": {"reputation": 1964, "user_id": 1320881, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b69670b7cc6bce132f443eee557c9448?s=128&d=identicon&r=PG", "display_name": "Unimportant", "link": "https://stackoverflow.com/users/1320881/unimportant"}, "edited": false, "score": 2, "creation_date": 1459969047, "post_id": 36459907, "comment_id": 60531945, "body": "<code>New Zealand</code>, among others,  is not a single string. Your format specifiers go out of sync due to that."}, {"owner": {"reputation": 37, "user_id": 6161337, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6866f50516ed2d7f2dc4b5d446f6919a?s=128&d=identicon&r=PG&f=1", "display_name": "conk", "link": "https://stackoverflow.com/users/6161337/conk"}, "reply_to_user": {"reputation": 1964, "user_id": 1320881, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b69670b7cc6bce132f443eee557c9448?s=128&d=identicon&r=PG", "display_name": "Unimportant", "link": "https://stackoverflow.com/users/1320881/unimportant"}, "edited": false, "score": 0, "creation_date": 1459969111, "post_id": 36459907, "comment_id": 60531996, "body": "Oh I see that, thanks :D"}, {"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 0, "creation_date": 1459969624, "post_id": 36459907, "comment_id": 60532315, "body": "Just a note, &#39;the program just crashes&#39; is useless. When, with what message, etc., etc. would be helpful.  Also, the answer to this question would be readily apparent if you single stepped it in a debugger"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1459969658, "post_id": 36459907, "comment_id": 60532349, "body": "What do you think what will happen if the file<code>&quot;olympics.txt&quot;</code> cannot be opened?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1459969751, "post_id": 36459907, "comment_id": 60532398, "body": "And did you use a debugger ?"}, {"owner": {"reputation": 37, "user_id": 6161337, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6866f50516ed2d7f2dc4b5d446f6919a?s=128&d=identicon&r=PG&f=1", "display_name": "conk", "link": "https://stackoverflow.com/users/6161337/conk"}, "edited": false, "score": 0, "creation_date": 1459969904, "post_id": 36459907, "comment_id": 60532511, "body": "well I&#39;m pretty new to this and am not really sure how to use the debugger to find the specific answer to this"}, {"owner": {"reputation": 8727, "user_id": 2999346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dQ1wB.png?s=128&g=1", "display_name": "francis", "link": "https://stackoverflow.com/users/2999346/francis"}, "edited": false, "score": 0, "creation_date": 1459972137, "post_id": 36459907, "comment_id": 60533812, "body": "User input is very error-prone, even if the programmer is the only user... Testing the return vaue of <code>fopen()</code> is good. The return value of <code>fscanf()</code> can be tested as well (it is equal to he number of items successfully read). Lastly <code>char st[42];fscanf(fp,&quot;%s&quot;,st);</code> can lead to a segmentation fault (or even worse...that&#39;s undefined behavior) if the string in the file is too long. Use  <code>char st[42];fscanf(fp,&quot;%41s&quot;,st);</code> instead."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1459975992, "post_id": 36459907, "comment_id": 60536099, "body": "Also, <code>while (!feof(fptr)) {...}</code> won&#39;t do what you think.  See <a href=\"http://stackoverflow.com/questions/5431941/why-is-while-feof-file-always-wrong\">Why is \u201cwhile ( !feof (file) )\u201d always wrong?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 6161337, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6866f50516ed2d7f2dc4b5d446f6919a?s=128&d=identicon&r=PG&f=1", "display_name": "conk", "link": "https://stackoverflow.com/users/6161337/conk"}, "edited": false, "score": 0, "creation_date": 1460020991, "post_id": 36464739, "comment_id": 60554252, "body": "Thanks. What does [^0-9] do?"}, {"owner": {"reputation": 11698, "user_id": 5399734, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2162d669508364bb0c03aba1a2473aa8?s=128&d=identicon&r=PG&f=1", "display_name": "nalzok", "link": "https://stackoverflow.com/users/5399734/nalzok"}, "reply_to_user": {"reputation": 37, "user_id": 6161337, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6866f50516ed2d7f2dc4b5d446f6919a?s=128&d=identicon&r=PG&f=1", "display_name": "conk", "link": "https://stackoverflow.com/users/6161337/conk"}, "edited": false, "score": 0, "creation_date": 1460022777, "post_id": 36464739, "comment_id": 60555580, "body": "@C.Red This matches all characters other than &#39;0&#39;, &#39;1&#39;, &#39;2&#39;, ... , &#39;9&#39;"}], "tags": [], "owner": {"reputation": 11698, "user_id": 5399734, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2162d669508364bb0c03aba1a2473aa8?s=128&d=identicon&r=PG&f=1", "display_name": "nalzok", "link": "https://stackoverflow.com/users/5399734/nalzok"}, "is_accepted": true, "score": 0, "last_activity_date": 1459989556, "creation_date": 1459989556, "answer_id": 36464739, "question_id": 36459907, "link": "https://stackoverflow.com/questions/36459907/file-contents-wont-read-into-structure/36464739#36464739", "title": "File contents wont read into structure", "body": "<p><code>\"Trinidad and Tobago\"</code> and <code>\"New Zealand\"</code> contain spaces, which prevents <code>%s</code> from scanning them correctly. Also, it's not a good idea to use <code>while(!feof(fptr))</code>.</p>\n\n<p>You can use the following loop to input data:</p>\n\n<pre><code>while (fscanf(fptr,\" %s %s %d %[^0-9] %d %[^0-9] %d %d %d %d\", athletes[i].firstName, athletes[i].lastName, &amp;athletes[i].age, athletes[i].country, &amp;athletes[i].year, athletes[i].sport, &amp;athletes[i].gold, &amp;athletes[i].silver, &amp;athletes[i].bronze, &amp;athletes[i].total) == 10)\n{\n    i++;\n}\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 6161337, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6866f50516ed2d7f2dc4b5d446f6919a?s=128&d=identicon&r=PG&f=1", "display_name": "conk", "link": "https://stackoverflow.com/users/6161337/conk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 36464739, "answer_count": 1, "score": 0, "last_activity_date": 1459989556, "creation_date": 1459968714, "last_edit_date": 1459988691, "question_id": 36459907, "link": "https://stackoverflow.com/questions/36459907/file-contents-wont-read-into-structure", "title": "File contents wont read into structure", "body": "<pre><code>struct athlete{\n    char firstName[50];\n    char lastName[70];\n    int age, total, bronze, gold, silver, year;\n    char country[70];\n    char sport[100];\n};\n</code></pre>\n\n<p>I have a structure to store olympic athletes name medals country age etc. from a give file.\n    A. J. Mleczko      26   United States   2002    Ice Hockey  0   1   0   1</p>\n\n<pre><code>Aaron Armstrong 30  Trinidad and Tobago 2008    Athletics   0   1   0   1\nAaron Egbele    25  Nigeria 2004    Athletics   0   0   1   1\nAaron Gate  21  New Zealand 2012    Cycling 0   0   1   1\n</code></pre>\n\n<p>so what I was doing was this:</p>\n\n<pre><code>void readFile(){\n    FILE *fptr;\n    int i;\n    fptr = fopen(\"olympics.txt\", \"r\");\n    if (fptr == NULL)\n    {\n        printf (\"Error\");\n    }\n    i = 0;\n    while (!feof(fptr))\n    {\n        fscanf(fptr,\"%s %s %d %s %d %s %d %d %d %d \", athletes[i].firstName,athletes[i].lastName, &amp;athletes[i].age, athletes[i].country, &amp;athletes[i].year, athletes[i].sport, &amp;athletes[i].gold, &amp;athletes[i].silver, &amp;athletes[i].bronze, &amp;athletes[i].total);\n        i++;\n    }\n}\n</code></pre>\n\n<p>Everytime I run it the program just crashes.I'm trying to run a simple search also so that might be a problem.</p>\n\n<pre><code>void compareString(char first[], char second[]) {\n    int i = 0;\n    struct athlete athletes[2000];\n    for(i = 0; i &lt; 2000; i++)\n    {\n        if(strcmp(athletes[i].firstName, first) == 0 &amp;&amp; strcmp(athletes[i].lastName, second) == 0 )\n        {\n            printf(\"%s%s\", athletes[i].firstName, athletes[i].lastName);\n        }\n        else\n        {\n            printf(\"error\");\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "buffer-overflow"], "comments": [{"owner": {"reputation": 5563, "user_id": 5808727, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a8de86a7bb2dbb67425971abc1e1cef8?s=128&d=identicon&r=PG&f=1", "display_name": "Pooya", "link": "https://stackoverflow.com/users/5808727/pooya"}, "edited": false, "score": 0, "creation_date": 1459968655, "post_id": 36459823, "comment_id": 60531695, "body": "I don&#39;t think compiler allocate stack based on the order of variables and also if optimization is enabled, the compiler probably throws the variable &quot;i&quot; away"}, {"owner": {"reputation": 5563, "user_id": 5808727, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a8de86a7bb2dbb67425971abc1e1cef8?s=128&d=identicon&r=PG&f=1", "display_name": "Pooya", "link": "https://stackoverflow.com/users/5808727/pooya"}, "edited": false, "score": 0, "creation_date": 1459968886, "post_id": 36459823, "comment_id": 60531838, "body": "also note that &quot;AAAAA&quot; is actually 6 character, you should count for &#39;\\0&#39; at the end"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1459969809, "post_id": 36459823, "comment_id": 60532441, "body": "It&#39;s undefined behaviour. If you want to know what happens step through the assembly code with a debugger."}, {"owner": {"reputation": 41, "user_id": 4135918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af80f5f3aa19c06210d6d0fec780a6c8?s=128&d=identicon&r=PG&f=1", "display_name": "Andy Woerpel", "link": "https://stackoverflow.com/users/4135918/andy-woerpel"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1459970244, "post_id": 36459823, "comment_id": 60532721, "body": "@MichaelWalz I have done a great deal of that but didn&#39;t think it would be helpful to have a bunch of assembly in this post.  In both situations, the assembly instructions and locations of the local variables on the stack are the same relative to one another, which is puzzling to me.  I am wondering if it is something that GCC is doing?"}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 4135918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af80f5f3aa19c06210d6d0fec780a6c8?s=128&d=identicon&r=PG&f=1", "display_name": "Andy Woerpel", "link": "https://stackoverflow.com/users/4135918/andy-woerpel"}, "edited": false, "score": 0, "creation_date": 1459970784, "post_id": 36460355, "comment_id": 60533047, "body": "Interesting! I was thinking it had something to do with GCC. I was able to reproduce the same results as the ones that you posted above.  Thank you for your thorough investigation into this."}], "tags": [], "owner": {"reputation": 965, "user_id": 3783565, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Yhgn8.png?s=128&g=1", "display_name": "Kevin W.", "link": "https://stackoverflow.com/users/3783565/kevin-w"}, "is_accepted": true, "score": 3, "last_activity_date": 1459970015, "creation_date": 1459970015, "answer_id": 36460355, "question_id": 36459823, "link": "https://stackoverflow.com/questions/36459823/local-variable-position-on-stack-not-changing/36460355#36460355", "title": "Local variable position on stack not changing", "body": "<p>So, I found some interesting information while exploring this problem.</p>\n\n<p>One, this problem is not reproduced with clang.  When I compile the second program, I don't see the print statement as shown here:</p>\n\n<pre><code>$ clang so.c -o so.out\nso.c:4:1: warning: return type of 'main' is not 'int' [-Wmain-return-type]\nvoid main(int arg, char* argv[])\n^\nso.c:4:1: note: change return type to 'int'\nvoid main(int arg, char* argv[])\n^~~~\nint\n1 warning generated.\n\n$ clang so2.c -o so2.out\nso2.c:4:1: warning: return type of 'main' is not 'int' [-Wmain-return-type]\nvoid main(int arg, char* argv[])\n^\nso2.c:4:1: note: change return type to 'int'\nvoid main(int arg, char* argv[])\n^~~~\nint\n1 warning generated.\n\n$ ./so.out AAAAAAAAAAAAAAAAAAA\noverwrote i\n\n$ ./so2.out AAAAAAAAAAAAAAAAAAA\n\n$\n</code></pre>\n\n<p>However, if we do the same with gcc, we see that they both fail.</p>\n\n<pre><code>$ gcc so.c -o so.exe\n\n$ gcc so2.c -o so2.exe\n\n$ ./so.exe AAAAAAAAAAAAAAAA\noverwrote i\n\n$ ./so2.exe AAAAAAAAAAAAAAAA\noverwrote i\n\n$\n</code></pre>\n\n<p>Looking a bit further, let's look at the assembly for these</p>\n\n<pre><code>$ gcc so.c -S -masm=intel\n\n$ gcc so2.c -S -masm=intel\n\n$ diff so.s so2.s\n1c1\n&lt;       .file   \"so.c\"\n---\n&gt;       .file   \"so2.c\"\n\n$\n</code></pre>\n\n<p>As you can see, the only difference here is the filename (I also tested with all optimizations off, with the same result).</p>\n\n<p>Now, let's try with clang.</p>\n\n<pre><code>$ clang -S -mllvm --x86-asm-syntax=intel so.c\nso.c:4:1: warning: return type of 'main' is not 'int' [-Wmain-return-type]\nvoid main(int arg, char* argv[])\n^\nso.c:4:1: note: change return type to 'int'\nvoid main(int arg, char* argv[])\n^~~~\nint\n1 warning generated.\n\n$ clang -S -mllvm --x86-asm-syntax=intel so2.c\nso2.c:4:1: warning: return type of 'main' is not 'int' [-Wmain-return-type]\nvoid main(int arg, char* argv[])\n^\nso2.c:4:1: note: change return type to 'int'\nvoid main(int arg, char* argv[])\n^~~~\nint\n1 warning generated.\n\n$ diff so.s so2.s\n26c26\n&lt;       lea     rax, qword ptr [rbp - 24]\n---\n&gt;       lea     rax, qword ptr [rbp - 20]\n29c29\n&lt;       mov     dword ptr [rbp - 20], 0\n---\n&gt;       mov     dword ptr [rbp - 24], 0\n34c34\n&lt;       cmp     dword ptr [rbp - 20], 0\n---\n&gt;       cmp     dword ptr [rbp - 24], 0\n\n$\n</code></pre>\n\n<p>It looks like clang compiles the two files to different versions; this prevents i from being overwritten.</p>\n\n<p>In conclusion, the reason why these two files produce different output is because the code produces undefined behaviour - the compiler is not bound by any standards and can produce whatever is easiest.</p>\n"}], "owner": {"reputation": 41, "user_id": 4135918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af80f5f3aa19c06210d6d0fec780a6c8?s=128&d=identicon&r=PG&f=1", "display_name": "Andy Woerpel", "link": "https://stackoverflow.com/users/4135918/andy-woerpel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 36460355, "answer_count": 1, "score": 3, "last_activity_date": 1459970015, "creation_date": 1459968425, "question_id": 36459823, "link": "https://stackoverflow.com/questions/36459823/local-variable-position-on-stack-not-changing", "title": "Local variable position on stack not changing", "body": "<p>I am currently reading a book security vulnerabilities and have come to the section on stack-based buffer overflows. It gives an example similar to the one that follows.</p>\n\n<pre><code>//overFlowTest.c\n#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\nvoid main(int argv, char* argv[])\n{\n    int i = 0;\n    char buffer[4];\n    strcpy(buffer, argv[1]);\n    if(i)\n    {\n        printf(\"overwrote i\\n\");\n    }\n}\n</code></pre>\n\n<p>When I compile and run the program with an input argument that is longer than the available space allocated for that variable \"AAAAA\", I get the following as expected (because I overwrote the i variable since it has a numerically larger address (lower in the stack) on the stack than \"buffer\").</p>\n\n<pre><code># gcc overFlowTest.c\n# ./a.out AAAAA\noverwrote buffer\n#\n</code></pre>\n\n<p>But then when I change the order of how the local variables are created, I would think they would get pushed to the stack in the opposite order and the buffer overflow would not work.</p>\n\n<pre><code>//overFlowTest.c\n#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\nvoid main(int argv, char* argv[])\n{\n    char buffer[4];\n    int i = 0;\n    strcpy(buffer, argv[1]);\n    if(i)\n    {\n        printf(\"overwrote i\\n\");\n    }\n}\n</code></pre>\n\n<p>But this does not seem to be the case, as I get the same result.</p>\n\n<pre><code># gcc overFlowTest.c\n# ./a.out AAAAA\noverwrote buffer\n#\n</code></pre>\n\n<p>Any ideas on why this is happening?</p>\n"}, {"tags": ["c++", "c", "caching", "gcc", "ternary-operator"], "comments": [{"owner": {"reputation": 4121, "user_id": 2098932, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/BBJGp.jpg?s=128&g=1", "display_name": "Logicrat", "link": "https://stackoverflow.com/users/2098932/logicrat"}, "edited": false, "score": 2, "creation_date": 1459967814, "post_id": 36459487, "comment_id": 60531195, "body": "I would think that the answer to that would be entirely dependent on which compiler you use, and possibly the optimization level you are using with it."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 3, "creation_date": 1459968158, "post_id": 36459487, "comment_id": 60531393, "body": "What is <code>then</code>?  Since when does an <code>if</code> statement produce a value as if it were an expression?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1459968216, "post_id": 36459487, "comment_id": 60531420, "body": "my version of gcc (as expected) produces exactly the same code for both versions - assuming my intuitive reading of correct <code>if</code> version."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1459968223, "post_id": 36459487, "comment_id": 60531425, "body": "At <code>-O3</code>, GCC produces <a href=\"https://godbolt.org/g/ndj4Pi\" rel=\"nofollow noreferrer\">similar code</a> for both constructions on x86."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1459968236, "post_id": 36459487, "comment_id": 60531432, "body": "Surely only 2 memory accesses are required when cached / optimised? <code>x</code> and <code>y</code> are both needed for the comparison..."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1459968252, "post_id": 36459487, "comment_id": 60531446, "body": "suggest posting the true code for &quot;min is defined as <code>if (a &lt; b) then a else b</code>&quot;"}, {"owner": {"reputation": 115, "user_id": 1842151, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3042c37c18bf0c18ec3235803e239405?s=128&d=identicon&r=PG", "display_name": "localized", "link": "https://stackoverflow.com/users/1842151/localized"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1459968320, "post_id": 36459487, "comment_id": 60531486, "body": "@John Bollinger. If is just the simplified min function: if (a&lt;b) return a; else return b;"}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 1, "creation_date": 1459968395, "post_id": 36459487, "comment_id": 60531545, "body": "Please pick one of C and C++ for this question. C and C++ are different languages and differ in their semantic!"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1459968597, "post_id": 36459487, "comment_id": 60531652, "body": "@PavleDjordjevic, <code>if (a&lt;b) return a; else return b;</code> is not a good substitute for <code>(((a) &lt; (b)) ? (a) : (b))</code>."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 2, "creation_date": 1459968609, "post_id": 36459487, "comment_id": 60531664, "body": "Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. If you have a full example that illustrates a difference, that would be helpful. As such, the answers provided just basically dispute your premise."}, {"owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1459969058, "post_id": 36459487, "comment_id": 60531954, "body": "@PavleDjordjevic You should mention which cache simulator so that someone familiar with it could give you a definitive answer rather than speculative."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1459968728, "post_id": 36459753, "comment_id": 60531749, "body": "Upvoted for actually checking the generated code with a few major compilers."}], "tags": [], "owner": {"reputation": 38854, "user_id": 2352671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kd1xb.jpg?s=128&g=1", "display_name": "101010", "link": "https://stackoverflow.com/users/2352671/101010"}, "is_accepted": false, "score": 4, "last_activity_date": 1459968227, "creation_date": 1459968227, "answer_id": 36459753, "question_id": 36459487, "link": "https://stackoverflow.com/questions/36459487/is-the-ternary-operator-cache-unfriendly/36459753#36459753", "title": "Is the ternary operator cache unfriendly?", "body": "<p>It really depends on the compiler vendor. However, considering the following two versions of <code>min(int, int)</code>:</p>\n\n<pre><code>int min(int a, int b) {\n  return (a &lt; b)? a : b;\n}\n\nint min(int a, int b) {\n  if(a &lt; b)\n    return a;\n  else\n    return b;\n}\n</code></pre>\n\n<p>The assembly code produced for them by GCC version 5.3 and Clang version 3.8 with -O3 is the same:</p>\n\n<pre><code>min(int, int):\n        cmpl    %esi, %edi\n        movl    %esi, %eax\n        cmovle  %edi, %eax\n        ret\n</code></pre>\n\n<p><a href=\"https://godbolt.org/g/cbXsgR\" rel=\"nofollow\"><strong>GCC Live Demo</strong></a></p>\n\n<p><a href=\"https://godbolt.org/g/xYJl91\" rel=\"nofollow\"><strong>CLANG Live Demo</strong></a></p>\n\n<p>Consequently, at least for the two main vendors the two versions (i.e., ternary operator and if-else) are equivalent.</p>\n"}, {"tags": [], "owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "is_accepted": false, "score": 0, "last_activity_date": 1459968367, "creation_date": 1459968367, "answer_id": 36459800, "question_id": 36459487, "link": "https://stackoverflow.com/questions/36459487/is-the-ternary-operator-cache-unfriendly/36459800#36459800", "title": "Is the ternary operator cache unfriendly?", "body": "<p>Typically, uses of the ternary operator and if-then-else statements result in the same intermediate representation in the compiler. Both do the same thing, both are equally cache-friendly.</p>\n\n<p>I suspect that the difference comes from other things you changed between the two implementations, but without seeing them I can't tell you what the problem is.</p>\n"}], "owner": {"reputation": 115, "user_id": 1842151, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3042c37c18bf0c18ec3235803e239405?s=128&d=identicon&r=PG", "display_name": "localized", "link": "https://stackoverflow.com/users/1842151/localized"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 0, "closed_date": 1459969853, "answer_count": 2, "score": 2, "last_activity_date": 1459968367, "creation_date": 1459967395, "question_id": 36459487, "link": "https://stackoverflow.com/questions/36459487/is-the-ternary-operator-cache-unfriendly", "closed_reason": "Not suitable for this site", "title": "Is the ternary operator cache unfriendly?", "body": "<p>While playing around with a cache simulator (which compiles code with gcc and -O3 before creating a memory trace) an interesting thing happened.</p>\n\n<p>Following code: <code>a[i] = min(a[i], b[j])</code> results in 4 memory accesses if <code>min</code> is defined as a ternary operator macro: <code>min(x, y) (((x) &lt; (y)) ? (x) : (y))</code> and in 3 memory accesses if <code>min</code> is defined as <code>if (a &lt; b) then a else b</code>.</p>\n\n<p>Apparently, the simulator fetches all variables in the macro (even the one in the branch not taken) while <code>if-else</code> doesn't do this. Is this just a simulator intrinsic thing/bug, or a real issue with ternary operators?</p>\n"}, {"tags": ["c", "string", "while-loop", "fifo", "fgetc"], "comments": [{"owner": {"reputation": 846, "user_id": 3874053, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xr2Gk.jpg?s=128&g=1", "display_name": "Jacobr365", "link": "https://stackoverflow.com/users/3874053/jacobr365"}, "edited": false, "score": 0, "creation_date": 1459967430, "post_id": 36459462, "comment_id": 60530972, "body": "just to make sure, you are pressing shift+q to try to quit right?"}, {"owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "edited": false, "score": 3, "creation_date": 1459967546, "post_id": 36459462, "comment_id": 60531033, "body": "Note that fgetc() returns <code>int</code>, not <code>char</code>. Also, this shouldn&#39;t even compile, <code>printf(&quot;ch===%c&quot;ch);</code> is missing a comma. Please be more diligent when posting code."}, {"owner": {"reputation": 125, "user_id": 4104945, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-U7aIxsn7Dz0/AAAAAAAAAAI/AAAAAAAABVI/9ifa-ONsLTI/photo.jpg?sz=128", "display_name": "Rahul Padalkar", "link": "https://stackoverflow.com/users/4104945/rahul-padalkar"}, "reply_to_user": {"reputation": 846, "user_id": 3874053, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xr2Gk.jpg?s=128&g=1", "display_name": "Jacobr365", "link": "https://stackoverflow.com/users/3874053/jacobr365"}, "edited": false, "score": 0, "creation_date": 1459967714, "post_id": 36459462, "comment_id": 60531135, "body": "@Jacobr365 yep i a \\m using shift+q."}, {"owner": {"reputation": 8677, "user_id": 2378910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51c5516f058929cbdca03b0319e61bf8?s=128&d=identicon&r=PG", "display_name": "Kenney", "link": "https://stackoverflow.com/users/2378910/kenney"}, "edited": false, "score": 0, "creation_date": 1459967841, "post_id": 36459462, "comment_id": 60531211, "body": "After making it compile (by including <code>stdio.h</code>, <code>stdlib.h</code>, <code>fcntl.h</code> and <code>string.h</code> and adding the comma) it does exit the loop after entering <code>Q</code> (and enter). It is hanging on the <code>open</code>, waiting for some other process to open the fifo for reading."}, {"owner": {"reputation": 125, "user_id": 4104945, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-U7aIxsn7Dz0/AAAAAAAAAAI/AAAAAAAABVI/9ifa-ONsLTI/photo.jpg?sz=128", "display_name": "Rahul Padalkar", "link": "https://stackoverflow.com/users/4104945/rahul-padalkar"}, "reply_to_user": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "edited": false, "score": 0, "creation_date": 1459967911, "post_id": 36459462, "comment_id": 60531256, "body": "@Jens yeah. Sorry about that. Correct me if i am wrong, if <code>fgetc</code> returns <code>int</code> then how do i get a character in the <code>ch</code> variable? I am still learning C. So sorry for noobish questions."}, {"owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "edited": false, "score": 0, "creation_date": 1459968005, "post_id": 36459462, "comment_id": 60531314, "body": "@RahulPadalkar You don&#39;t. You declare <code>ch</code> as an <code>int</code> and when you fgetc() something you <i>must</i> test the result for <code>EOF</code> or you will run into a non-terminating loop if the user types the end-of-file character."}, {"owner": {"reputation": 125, "user_id": 4104945, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-U7aIxsn7Dz0/AAAAAAAAAAI/AAAAAAAABVI/9ifa-ONsLTI/photo.jpg?sz=128", "display_name": "Rahul Padalkar", "link": "https://stackoverflow.com/users/4104945/rahul-padalkar"}, "reply_to_user": {"reputation": 8677, "user_id": 2378910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51c5516f058929cbdca03b0319e61bf8?s=128&d=identicon&r=PG", "display_name": "Kenney", "link": "https://stackoverflow.com/users/2378910/kenney"}, "edited": false, "score": 0, "creation_date": 1459968170, "post_id": 36459462, "comment_id": 60531397, "body": "@Kenney If i put <code>printf(&quot;Out of while loop&quot;);</code> above <code>open</code> call, i don&#39;t get the printf statement in my terminal.Is it supposed to run or not?"}, {"owner": {"reputation": 8677, "user_id": 2378910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51c5516f058929cbdca03b0319e61bf8?s=128&d=identicon&r=PG", "display_name": "Kenney", "link": "https://stackoverflow.com/users/2378910/kenney"}, "edited": false, "score": 0, "creation_date": 1459968268, "post_id": 36459462, "comment_id": 60531453, "body": "I did the same thing, and it did print.. Remember you have to press 3 keys: <code>shift</code>+<code>Q</code> followed by the <code>enter</code> key, since the input is line-buffered.."}, {"owner": {"reputation": 125, "user_id": 4104945, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-U7aIxsn7Dz0/AAAAAAAAAAI/AAAAAAAABVI/9ifa-ONsLTI/photo.jpg?sz=128", "display_name": "Rahul Padalkar", "link": "https://stackoverflow.com/users/4104945/rahul-padalkar"}, "reply_to_user": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "edited": false, "score": 0, "creation_date": 1459968555, "post_id": 36459462, "comment_id": 60531631, "body": "@Jens I don&#39;t get it.I have declared ch as a char varaible not an int. When i run the program it actually prints the value of ch as a char.Can you post please post corrected code?"}, {"owner": {"reputation": 125, "user_id": 4104945, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-U7aIxsn7Dz0/AAAAAAAAAAI/AAAAAAAABVI/9ifa-ONsLTI/photo.jpg?sz=128", "display_name": "Rahul Padalkar", "link": "https://stackoverflow.com/users/4104945/rahul-padalkar"}, "reply_to_user": {"reputation": 8677, "user_id": 2378910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51c5516f058929cbdca03b0319e61bf8?s=128&d=identicon&r=PG", "display_name": "Kenney", "link": "https://stackoverflow.com/users/2378910/kenney"}, "edited": false, "score": 0, "creation_date": 1459968638, "post_id": 36459462, "comment_id": 60531684, "body": "@Kenney i tried using Caps.Didn&#39;t work!"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1459968648, "post_id": 36459462, "comment_id": 60531690, "body": "Maybe &quot;it works&quot;, but both <code>fgetc</code> and <code>&#39;Q&#39;</code> have the <code>int</code> type. Remember that <code>printf</code> promotes a <code>char</code> type to <code>int</code>, so that&#39;s no proof that <code>char</code> is correct."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1459968814, "post_id": 36459462, "comment_id": 60531799, "body": "<code>fgetc()</code> returns value in the <code>unsigned char</code> range or <code>EOF</code>, a negative number.  This is typically 256 + 1 different values.  Saving that result in a <code>char ch</code> (typically 256 different values) loses distinctiveness.  Save <code>fgets()</code> rersults as an <code>int</code>, test if <code>EOF</code>. It not, then treating it as a character value  is OK."}, {"owner": {"reputation": 8677, "user_id": 2378910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51c5516f058929cbdca03b0319e61bf8?s=128&d=identicon&r=PG", "display_name": "Kenney", "link": "https://stackoverflow.com/users/2378910/kenney"}, "edited": false, "score": 0, "creation_date": 1459968998, "post_id": 36459462, "comment_id": 60531920, "body": "@Rahul: you&#39;re still missing the <code>,</code> after the <code>&quot;ch===%c&quot;</code> in your snippet. I tested it on Linux and it works fine: <code>gcc fifo.c; &#47;bin&#47;echo -e &quot;Foo\\nQ\\n&quot; | .&#47;a.out</code>, and in another terminal <code>cat myfifo</code>."}, {"owner": {"reputation": 125, "user_id": 4104945, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-U7aIxsn7Dz0/AAAAAAAAAAI/AAAAAAAABVI/9ifa-ONsLTI/photo.jpg?sz=128", "display_name": "Rahul Padalkar", "link": "https://stackoverflow.com/users/4104945/rahul-padalkar"}, "reply_to_user": {"reputation": 8677, "user_id": 2378910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51c5516f058929cbdca03b0319e61bf8?s=128&d=identicon&r=PG", "display_name": "Kenney", "link": "https://stackoverflow.com/users/2378910/kenney"}, "edited": false, "score": 0, "creation_date": 1459970276, "post_id": 36459462, "comment_id": 60532739, "body": "@Kenney  It works now! Thanks a lot!"}, {"owner": {"reputation": 125, "user_id": 4104945, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-U7aIxsn7Dz0/AAAAAAAAAAI/AAAAAAAABVI/9ifa-ONsLTI/photo.jpg?sz=128", "display_name": "Rahul Padalkar", "link": "https://stackoverflow.com/users/4104945/rahul-padalkar"}, "reply_to_user": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "edited": false, "score": 0, "creation_date": 1459970295, "post_id": 36459462, "comment_id": 60532754, "body": "@Jens Thanks! It works now!"}, {"owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "edited": false, "score": 0, "creation_date": 1459970596, "post_id": 36459462, "comment_id": 60532933, "body": "@RahulPadalkar Great! The next step on Stackoverflow is to upvote and accept the answer that was most helpful."}, {"owner": {"reputation": 125, "user_id": 4104945, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-U7aIxsn7Dz0/AAAAAAAAAAI/AAAAAAAABVI/9ifa-ONsLTI/photo.jpg?sz=128", "display_name": "Rahul Padalkar", "link": "https://stackoverflow.com/users/4104945/rahul-padalkar"}, "reply_to_user": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "edited": false, "score": 0, "creation_date": 1459970640, "post_id": 36459462, "comment_id": 60532957, "body": "@Jens Already did that!"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1460131847, "post_id": 36459462, "comment_id": 60615752, "body": "Please consistently indent the code.  Indent after every opening brace &#39;{&#39;.  unindent before every closing brace &#39;}&#39;.  never use tabs for indenting.  Suggest using 4 spaces for each indent level as that is wide enough to be visible, even with variable width fonts."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1460131933, "post_id": 36459462, "comment_id": 60615813, "body": "for ease of understanding and readability and documentation, follow the axiom: <i>only one statement per line and (at most) one variable declaration per statement.</i>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1460132019, "post_id": 36459462, "comment_id": 60615870, "body": "the posted code has a logic problem.  Specifically, if the file fails to open, then do not call <code>close()</code> on that file descriptor.  Doing so can lead to a seg fault event."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1460132235, "post_id": 36459462, "comment_id": 60616005, "body": "rather than this line: <code>printf(&quot;Cannot open fifo&quot;);</code>, it is much better to include that system message about the error AND to output the message to stderr rather than stdout.  Suggest: <code>perror( &quot;open for fifo failed&quot; );</code> followed by: <code>unlink(myfifo);</code> and <code>exit( EXIT_FAILURE );</code>"}], "answers": [{"tags": [], "owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "is_accepted": true, "score": 0, "last_activity_date": 1459969244, "creation_date": 1459969244, "answer_id": 36460081, "question_id": 36459462, "link": "https://stackoverflow.com/questions/36459462/while-loop-not-working-with-fgetc/36460081#36460081", "title": "While loop not working with fgetc", "body": "<p>Ignoring the possibility that something with mkfifo is going on, this is how you should read stdin:</p>\n\n<pre><code>int ch;\n\nprintf(\"Enter the sentences:\");\nfflush(stdout);\n\nwhile ((ch = fgetc(stdin)) != EOF)\n{\n    if (ch == 'Q')\n        break;\n    printf(\"ch=%c\\n\", ch);\n    str[i++]=ch;\n}\nstr[i]='\\0';\n</code></pre>\n"}], "owner": {"reputation": 125, "user_id": 4104945, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-U7aIxsn7Dz0/AAAAAAAAAAI/AAAAAAAABVI/9ifa-ONsLTI/photo.jpg?sz=128", "display_name": "Rahul Padalkar", "link": "https://stackoverflow.com/users/4104945/rahul-padalkar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 456, "favorite_count": 0, "accepted_answer_id": 36460081, "answer_count": 1, "score": 0, "last_activity_date": 1459969244, "creation_date": 1459967313, "last_edit_date": 1459969089, "question_id": 36459462, "link": "https://stackoverflow.com/questions/36459462/while-loop-not-working-with-fgetc", "title": "While loop not working with fgetc", "body": "<p>So here's what is am trying to do:</p>\n\n<ol>\n<li><p>I am asking the user to input a number of sentences</p></li>\n<li><p>Whenever he wants to stop he will press Q (captial letter)</p></li>\n<li>And then the next processing should start.</li>\n</ol>\n\n<p>What i am getting right now:</p>\n\n<ol>\n<li>The user is prompted to enter as many sentences as he wants</li>\n<li>But when he presses Q the control doesn't shift from the while loop to the next instruction.</li>\n</ol>\n\n<p>It is a FIFO program.If you see any other errors do report them.Thanks!</p>\n\n<p>Here's the Code:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;fcntl.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;string.h&gt;\n#include&lt;unistd.h&gt;\n#include&lt;sys/stat.h&gt;\nvoid main()\n{\n\nint i=0,fd;\nchar str[500]=\"\",ch;\n\nchar *myfifo=\"/home/rahulp/Desktop/myfifo\";\n\nmkfifo(myfifo,0666);    \n\nprintf(\"Enter the sentences:\");\n\nwhile((ch=fgetc(stdin))!='Q')\n{\n    printf(\"ch===%c\",ch);\n    str[i++]=ch;\n\n}\nstr[i]='\\0';\n\nfd=open(myfifo,O_WRONLY);\n\nif(fd&lt;0)\n{\n    printf(\"Cannot open fifo\");\n}\nelse\n{\n    write(fd,str,strlen(str));\n}\n\nclose(fd);\nunlink(myfifo); \n}\n</code></pre>\n"}, {"tags": ["c", "segmentation-fault", "bison", "flex-lexer", "ansi-c"], "comments": [{"owner": {"reputation": 8677, "user_id": 2378910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51c5516f058929cbdca03b0319e61bf8?s=128&d=identicon&r=PG", "display_name": "Kenney", "link": "https://stackoverflow.com/users/2378910/kenney"}, "edited": false, "score": 1, "creation_date": 1459967429, "post_id": 36459388, "comment_id": 60530971, "body": "You should allocate 1 more byte in <code>sourcefile</code> to hold the terminating <code>\\0</code>: <a href=\"http://man7.org/linux/man-pages/man3/strlen.3.html\" rel=\"nofollow noreferrer\">strlen</a> doesn&#39;t count it, but <a href=\"http://man7.org/linux/man-pages/man3/strncpy.3.html\" rel=\"nofollow noreferrer\">strcpy</a> does. It&#39;s bugs like these that cause segmentation faults."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 2, "creation_date": 1459970177, "post_id": 36459388, "comment_id": 60532677, "body": "Or, more simply, don&#39;t bother copying <code>argv[1]</code>. There is no need to make a copy just to provide the string to <code>fopen</code>. But more importantly, you must check the return value of <code>fopen</code>; if it returns NULL, then any attempt to use <code>yyin</code> will definitely result in a segfault."}, {"owner": {"reputation": 97, "user_id": 5798489, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/7mjsQ.png?s=128&g=1", "display_name": "nsc", "link": "https://stackoverflow.com/users/5798489/nsc"}, "edited": false, "score": 0, "creation_date": 1459970502, "post_id": 36459388, "comment_id": 60532878, "body": "Kenney: How about that: &quot;(char *) calloc(strlen(argv[1])+1, sizeof(char));&quot; ? rici: fopen returns something, not NULL in this case."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1459972840, "post_id": 36459388, "comment_id": 60534228, "body": "@niesuch: If the problem is not the return value of <code>fopen</code>, then I think you&#39;ll need to reveal something of what is going on in your lexer and parser. (Unfortunately, my crystal ball is in the shop for repairs so I can&#39;t quite make out what is going on in your code.) You might want to start by using a debugger and trying to figure out the problem yourself. Enabling flex and bison tracing may help you find out where the problem is happening."}, {"owner": {"reputation": 97, "user_id": 5798489, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/7mjsQ.png?s=128&g=1", "display_name": "nsc", "link": "https://stackoverflow.com/users/5798489/nsc"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1459975625, "post_id": 36459388, "comment_id": 60535835, "body": "@rici: I edited my topic. Can you help me?"}], "owner": {"reputation": 97, "user_id": 5798489, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/7mjsQ.png?s=128&g=1", "display_name": "nsc", "link": "https://stackoverflow.com/users/5798489/nsc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 336, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1459975367, "creation_date": 1459967126, "last_edit_date": 1459975367, "question_id": 36459388, "link": "https://stackoverflow.com/questions/36459388/c-segmentation-fault-with-flex-yacc-and-yyparse", "title": "c - Segmentation fault with flex yacc and yyparse", "body": "<p>I was trying to implement a compiler using flex and yacc. When I use yyparse() console return \"segmentation fault whith core dumped\". How to fix this?</p>\n\n<pre><code>int main(int argc, char *argv[])\n{\n    char *sourcefile = (char *) calloc(strlen(argv[1]), sizeof(char));\n    strcpy(sourcefile, argv[1]);\n\n    yyin = fopen(sourcefile, \"r\");\n\n    listing = stdout; /* send listing to screen */\n    yyrestart(yyin);\n    yyparse();\n\n    fclose(yyin);\n\n    return 0;\n}\n</code></pre>\n\n<p>Warnings in compile:</p>\n\n<pre><code>parse.y: In function \u2018yyparse\u2019:\nparse.y:103:19: warning: assignment makes pointer from integer without a cast [enabled by default]\n  | OP_SREDNIK {$$ = OP_SREDNIK;}\n                   ^\nparse.y:104:19: warning: assignment makes pointer from integer without a cast [enabled by default]\n  | READ ID OP_SREDNIK {$$ = READ;}\n                   ^\nparse.y:107:19: warning: assignment makes pointer from integer without a cast [enabled by default]\n  | ZWROC OP_SREDNIK {$$ = ZWROC;}\n                   ^\nparse.y:114:19: warning: assignment makes pointer from integer without a cast [enabled by default]\n  | THIS {$$ = THIS;}\n                   ^\nparse.y:115:19: warning: assignment makes pointer from integer without a cast [enabled by default]\n  | SUPER {$$ = SUPER;}\n                   ^\nparse.y:121:19: warning: assignment from incompatible pointer type [enabled by default]\n  | WyrazeniePostfiksowe OP_KROPKA ID {$$ = $3;}\n</code></pre>\n\n<p>parse.y (yacc)</p>\n\n<pre><code>Instrukcja : Wyrazenie OP_SREDNIK {$$ = $1;}\n    | ZlozonaInstrukcja OP_SREDNIK {$$ = $1;}\n    | WyrazeniePostfiksowe OP_PRZYPISANIA Wyrazenie OP_SREDNIK {$$ = $3;}\n    | Blok {$$ = $1;}\n    | DELETE Wyrazenie OP_SREDNIK {$$ = $2;}\n    | OP_SREDNIK {$$ = OP_SREDNIK;}\n    | READ ID OP_SREDNIK {$$ = READ;}\n    | WRITE Wyrazenie OP_SREDNIK {$$ = $2;}\n    | ZWROC Wyrazenie OP_SREDNIK {$$ = $2;}\n    | ZWROC OP_SREDNIK {$$ = ZWROC;}\n;\n</code></pre>\n"}, {"tags": ["c", "debugging", "if-statement", "segmentation-fault"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1459967200, "post_id": 36459275, "comment_id": 60530853, "body": "You have UB somewhere.  Good luck..."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1459967943, "post_id": 36459275, "comment_id": 60531278, "body": "Show an <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a>. The problem is somewhere in the code you didn&#39;t show."}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1459968601, "post_id": 36459275, "comment_id": 60531657, "body": "@Jacko <code>destIndex</code> is becomming &gt;= <code>destLen</code> and/or <code>srcIndex</code> is becomming &gt;= <code>srcLen</code> somewhere, somehow... (assuming <code>destLen</code> and <code>srcLen</code> in fact correspond to the number of elements in <code>dest[]</code> and <code>src[]</code>)"}, {"owner": {"reputation": 11279, "user_id": 244005, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/aec4e0f43a28c641ef701e2252dfbfa4?s=128&d=identicon&r=PG", "display_name": "Jacko", "link": "https://stackoverflow.com/users/244005/jacko"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1459968934, "post_id": 36459275, "comment_id": 60531875, "body": "@MartinJames Bingo!!!  destIndex is going negative.  Move your comment to an answer so I can give you full marks :)"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1459969811, "post_id": 36459275, "comment_id": 60532443, "body": "I don&#39;t think I deserve full marks for that but, OK;)"}, {"owner": {"reputation": 11279, "user_id": 244005, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/aec4e0f43a28c641ef701e2252dfbfa4?s=128&d=identicon&r=PG", "display_name": "Jacko", "link": "https://stackoverflow.com/users/244005/jacko"}, "edited": false, "score": 0, "creation_date": 1459969853, "post_id": 36459275, "comment_id": 60532475, "body": "Actually, that was a false alarm. Still broken"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1459969969, "post_id": 36459275, "comment_id": 60532564, "body": "Dreck:( ..................................."}, {"owner": {"reputation": 11279, "user_id": 244005, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/aec4e0f43a28c641ef701e2252dfbfa4?s=128&d=identicon&r=PG", "display_name": "Jacko", "link": "https://stackoverflow.com/users/244005/jacko"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1460034848, "post_id": 36459275, "comment_id": 60564636, "body": "@MartinJames if I use memcpy instead of pointer arithmetic, then the crash goes away. Would this still be explained by UB ?"}], "answers": [{"tags": [], "owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "is_accepted": true, "score": 0, "last_activity_date": 1459969929, "creation_date": 1459969929, "answer_id": 36460327, "question_id": 36459275, "link": "https://stackoverflow.com/questions/36459275/debugging-seg-fault-caused-by-buffer-over-run/36460327#36460327", "title": "Debugging seg fault caused by buffer over run", "body": "<p>You have UB somewhere.  'Works in debug, but not release', or the other way round, is a massive undefined behaviour flag.</p>\n\n<p>Check all your parameters with your debugger:)</p>\n"}], "owner": {"reputation": 11279, "user_id": 244005, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/aec4e0f43a28c641ef701e2252dfbfa4?s=128&d=identicon&r=PG", "display_name": "Jacko", "link": "https://stackoverflow.com/users/244005/jacko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 36460327, "answer_count": 1, "score": 0, "last_activity_date": 1459969929, "creation_date": 1459966803, "question_id": 36459275, "link": "https://stackoverflow.com/questions/36459275/debugging-seg-fault-caused-by-buffer-over-run", "title": "Debugging seg fault caused by buffer over run", "body": "<p>I have the following code:</p>\n\n<pre><code>if (destIndex &lt; destLen &amp;&amp; srcIndex &lt; srcLen)\n    dest[destIndex++] = src[srcIndex++];\n</code></pre>\n\n<p>This code runs fine.</p>\n\n<p>If I remove the  if, then the code crashes.</p>\n\n<p>If I then run the following code</p>\n\n<pre><code>if (destIndex &lt; destLen &amp;&amp; srcIndex &lt; srcLen)\n    dest[destIndex++] = src[srcIndex++];\nelse\n   fprintf(stderr, \"Buffer Overrun\\n\");\n</code></pre>\n\n<p>Then I never get the print out \"Buffer Overrun\"</p>\n\n<p>SO, how to debug this? </p>\n\n<p>The seg fault only happens with optimizations turned on (no debug mode)</p>\n"}, {"tags": ["c", "scanf", "stdio", "format-specifiers"], "comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1459965520, "post_id": 36458753, "comment_id": 60529813, "body": "did you compile with warnings; what is the type of <code>number</code>?"}, {"owner": {"reputation": 53, "user_id": 6164664, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1f5a8a523a029160f5a38cc5baac8597?s=128&d=identicon&r=PG&f=1", "display_name": "Rrmm", "link": "https://stackoverflow.com/users/6164664/rrmm"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1459965560, "post_id": 36458753, "comment_id": 60529845, "body": "I did compile with warnings. Number is an integer."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1459965574, "post_id": 36458753, "comment_id": 60529853, "body": "See <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 4, "creation_date": 1459965601, "post_id": 36458753, "comment_id": 60529869, "body": "remove the <code>s</code> from the format. It does not belong to <code>%[]</code>"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1459965631, "post_id": 36458753, "comment_id": 60529891, "body": "I would proably just have written a bit of code to do it."}, {"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1459966211, "post_id": 36458753, "comment_id": 60530238, "body": "To expand on @AnttiHaapala&#39;s comment, the &#39;s&#39; character will not match the input stream at that point (the input stream will be a &#39;,&#39; character or EOF), so the <code>sscanf()</code> call will return at that point.  It should return 1 to  indicate that only one input item was assigned to. <code>number</code> should be left unchanged."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1459966319, "post_id": 36458753, "comment_id": 60530289, "body": "And of course the <code>s</code> is there just because you thought you&#39;re reading a <b>s</b>tring. But <code>%[^,]</code> reads a string already."}], "answers": [{"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 1, "last_activity_date": 1459966457, "creation_date": 1459966457, "answer_id": 36459147, "question_id": 36458753, "link": "https://stackoverflow.com/questions/36458753/format-specifier-n-not-returning-the-count-of-characters/36459147#36459147", "title": "Format specifier %n not returning the count of characters", "body": "<blockquote>\n  <p>I want to read characters from a string until a ',' is found and store them in another string. I also want to know how many characters have been read.</p>\n</blockquote>\n\n<p>The <code>s</code> is not needed.  It is not part of the <code>\"%[^,]\"</code> specifier.  Also the trailing <code>\" \"</code> serves no purpose.  Should limit input length too.  Do not use <code>newstr</code> unless code knows it was filled.</p>\n\n<pre><code>char str[100];\nint number = 0;\n\n// sscanf(str, \"%[^,]s %n \", newstr, &amp;number);\nsscanf(str, \"%99[^,], %n\", newstr, &amp;number);\n\nif (number) Success();\nelse Fail();  // do not use newstr\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 6164664, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1f5a8a523a029160f5a38cc5baac8597?s=128&d=identicon&r=PG&f=1", "display_name": "Rrmm", "link": "https://stackoverflow.com/users/6164664/rrmm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "closed_date": 1460243645, "accepted_answer_id": 36459147, "answer_count": 1, "score": 2, "last_activity_date": 1459968894, "creation_date": 1459965258, "last_edit_date": 1459968894, "question_id": 36458753, "link": "https://stackoverflow.com/questions/36458753/format-specifier-n-not-returning-the-count-of-characters", "closed_reason": "Not suitable for this site", "title": "Format specifier %n not returning the count of characters", "body": "<p>First, I want to make clear that I'm a beginner and this might be a silly question and that I'm probably doing something wrong.</p>\n\n<p>I want to read characters from a string until a <code>,</code> is found and store them in another string. I also want to know how many characters have been read. This is what I'm doing with <code>sscanf</code>:</p>\n\n<pre><code>sscanf(str, \"%[^,]s %n \", newstr, &amp;number);\n</code></pre>\n\n<p>When I try to print number it prints <code>0</code> regardless of my input, even when several characters were stored in <code>newstr</code>.</p>\n\n<p>The problem seems to be in the <code>[^,]</code> sub-specifier as <code>%n</code> works as it should without it.</p>\n"}, {"tags": ["c", "string", "input", "gets"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 2, "creation_date": 1459965005, "post_id": 36458559, "comment_id": 60529441, "body": "You have posted only part of your program. That&#39;s not very helpful to diagnose the problem. Please post a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>."}, {"owner": {"reputation": 486140, "user_id": 1187415, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/LpTRB.png?s=128&g=1", "display_name": "Martin R", "link": "https://stackoverflow.com/users/1187415/martin-r"}, "edited": false, "score": 3, "creation_date": 1459965078, "post_id": 36458559, "comment_id": 60529488, "body": "You should not use <code>gets</code>: <a href=\"http://stackoverflow.com/questions/1694036/why-is-the-gets-function-so-dangerous-that-it-should-not-be-used\" title=\"why is the gets function so dangerous that it should not be used\">stackoverflow.com/questions/1694036/&hellip;</a>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1459965145, "post_id": 36458559, "comment_id": 60529544, "body": "The problem is the interaction of <code>gets()</code> with previous, unposted code."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1459965265, "post_id": 36458559, "comment_id": 60529637, "body": "C programming language does not have <code>gets</code>"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1459965409, "post_id": 36458559, "comment_id": 60529746, "body": "also your problem could probably be fixed by adding <code>fflush(stdout)</code> before reading the input."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1459965614, "post_id": 36458559, "comment_id": 60529877, "body": "<code>gets</code> is not part of the C standard (anymore) and should <b>never</b> be used. And you are supposed to enable warnings and check for relevant errors from functions before asking. Your code does not."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1459965721, "post_id": 36458559, "comment_id": 60529944, "body": "<code>fflush(stdin)</code> is undefined behaviour. And <code>getchar</code> returns an <code>int</code>, not a <code>char</code> on purpose."}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1459965819, "post_id": 36458559, "comment_id": 60529998, "body": "Which compiler (and version) are you using? It might be useful to add a tag for this, to stop all these &quot;today C means strict standard C11&quot; comments (which <i>are</i> kinda valid, even if a bit nitpicky)."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1459965997, "post_id": 36458559, "comment_id": 60530102, "body": "Its that <code>getchar();</code>, it is messing up things."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1459965814, "post_id": 36458779, "comment_id": 60529996, "body": "<code>scanf(&quot;%19[^\\n]&quot;, aRecord.surname);</code> reads nothing into <code>aRecord.surname</code> if the first character is <code>&#39;\\n&#39;</code>, leaving it uninitialized and the offending <code>&#39;\\n&#39;</code> in <code>stdin</code>.  This would certainly happen as a previous <code>scanf(&quot;%19[^\\n]&quot;, aRecord.name);</code> does not consume the <code>&#39;\\n&#39;</code>.  Best to use <code>fgets()</code>."}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1459966435, "post_id": 36458779, "comment_id": 60530353, "body": "@chux My only reservation about <code>fgets</code> is its keeping the <code>\\n</code> in my string. Of course it&#39;s easy to get rid of that string, but it&#39;s better to not have it there in the first place."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1459966767, "post_id": 36458779, "comment_id": 60530575, "body": "I disagree is is <i>easier</i> using <code>scanf()</code> and not get the <code>&#39;\\n&#39;</code> than <code>fgets()</code>.  YMMV."}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 1, "creation_date": 1459966824, "post_id": 36458779, "comment_id": 60530618, "body": "Basically the only way to do sensible line-based input in C is to write your own function for it, which does it the way you want (using <code>fgets</code> or <code>scanf</code> or <code>getchar</code> or whatever internally). If you use <code>scanf</code> or <code>fgets</code> directly, your code gets cluttered with error, long line and buffer size handling (or, more commonly, these aren&#39;t really handled, and things go haywire on unexpected input). Or just use <a href=\"http://linux.die.net/man/3/getline\" rel=\"nofollow noreferrer\"><code>getline</code></a> if you are programming for recent POSIX or GNU OS..."}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1459967131, "post_id": 36458779, "comment_id": 60530817, "body": "@chux You are right, this would mess up the prompts. I agree with hyde, by the way, that if one wants to do it right, he needs to do it himself, i.e. use <code>fgets</code> to read line-by-line, and then parse the data manually."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1459967473, "post_id": 36458779, "comment_id": 60530998, "body": "Agree with you and @hyde.  User input is <i>evil</i> and needs handling better than direct use of C standard input functions."}, {"owner": {"reputation": 3817, "user_id": 5473170, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-TqTWy9pKa2g/AAAAAAAAAAI/AAAAAAAAASw/aJ0ynw2sjqM/photo.jpg?sz=128", "display_name": "Suraj Jain", "link": "https://stackoverflow.com/users/5473170/suraj-jain"}, "edited": false, "score": 0, "creation_date": 1487920872, "post_id": 36458779, "comment_id": 72010488, "body": "@dasblinkenlight Why Did You Left a space before &quot;  %19[^\\n]&quot;"}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 1, "last_activity_date": 1459967037, "last_edit_date": 1459967037, "creation_date": 1459965330, "answer_id": 36458779, "question_id": 36458559, "link": "https://stackoverflow.com/questions/36458559/c-gets-skips-the-first-input/36458779#36458779", "title": "C: gets() skips the first input", "body": "<p>First, do not use <code>gets</code>, it's unsafe. Use <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/fgets.html\" rel=\"nofollow\"><code>fgets</code></a> instead.</p>\n\n<p>The reason why the first call to <code>gets</code> skips a line is that there is a <code>'\\n'</code> in the buffer at the time that you are making a call to <code>enterRecordDetails()</code>. Typically, the <code>'\\n'</code> is a leftover from an earlier input operation, for example, from reading an <code>int</code> with <code>scanf</code>.</p>\n\n<p>One way to fix this problem is to read the string to the end when reading the <code>int</code>, so that the consecutive call of <code>fgets</code> would get the actual data. You can do it in your <code>enterRecordDetails()</code> function:</p>\n\n<pre><code>Record enterRecordDetails()\n{\n    Record aRecord;\n    printf(\"ENTER THE FOLLOWING RECORD DETAILS:\\n\");\n    printf(\"   NAME      : \");\n    fscanf(stdin, \" \"); // Skip whitespace, if any\n    fgets(aRecord.name, 20, stdin);\n    printf(\"   SURNAME   : \");\n    fgets(aRecord.surname, 20, stdin);  \n}\n</code></pre>\n\n<p>Note, however, that <code>fgets</code> keeps <code>'\\n'</code> in the string, as long as it fits in the buffer. A better approach would be using <code>scanf</code>, and passing a format specifier that limits the length of input and stops at <code>'\\n'</code>:</p>\n\n<pre><code>scanf(\" %19[^\\n]\", aRecord.name);\n//     ^\n</code></pre>\n"}], "owner": {"reputation": 193, "user_id": 5595149, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/01284f1a2f1ef96da03074bf299b2c58?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Sultana", "link": "https://stackoverflow.com/users/5595149/simon-sultana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1203, "favorite_count": 0, "closed_date": 1460243680, "accepted_answer_id": 36458779, "answer_count": 1, "score": 0, "last_activity_date": 1459967037, "creation_date": 1459964744, "last_edit_date": 1459965428, "question_id": 36458559, "link": "https://stackoverflow.com/questions/36458559/c-gets-skips-the-first-input", "closed_reason": "Not suitable for this site", "title": "C: gets() skips the first input", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ctype.h&gt;\n\n\ntypedef struct record\n{   \n    char name[20];\n    char surname[20];\n    char telephone[20];\n\n}Record;\n\ntypedef struct node\n{\n    Record data;\n    struct node *next;\n}Node;\n\nNode *head = NULL;\n\nvoid addRecord(Record s)\n{\n    Node *newNode;\n    Node *n;\n\n    newNode = (Node*)malloc(sizeof(Node));\n    newNode-&gt;data = s;\n    newNode-&gt;next = NULL;\n\n    if (head == NULL)\n    {\n        // The linked list is empty\n        head = newNode;\n    }\n    else\n    {\n        // Traverse the whole list until we arrive at the last node\n        n = head;\n        while (n-&gt;next != NULL)\n        {\n            n = n-&gt;next;\n    }\n        n-&gt;next = newNode;\n    }\n}\n\nRecord enterRecordDetails()\n{\n    Record aRecord;\n    int len;\n    int valid = 0;\n    int valid2 = 0;\n    printf(\"ENTER THE FOLLOWING RECORD DETAILS:\\n\");\n\n    printf(\"   NAME      : \");\n    gets(aRecord.name);\n    printf(\"   SURNAME   : \");\n    gets(aRecord.surname);  \n    do {\n        valid = 0;\n        valid2 = 0;\n        printf(\"  TELEPHONE NO. (8 digits): \");\n        gets(aRecord.telephone);\n        len = strlen(aRecord.telephone);\n        for (int i = 0; i &lt; len; i++)\n        {\n            if (!isdigit(aRecord.telephone[i])) {\n                printf(\"You enterred an invalid number\\n\");\n                valid = 1; break;\n            }\n        }\n        Node *p = head;         \n            while (p != NULL)\n            {\n                Node *next = p-&gt;next;\n                for (; next; p = next, next = next-&gt;next) {\n                    if (strcmp(p-&gt;data.telephone, aRecord.telephone) == 0)\n                    {\n                        valid2 = 1; break;\n                    }\n                }\n                if(p = NULL)break;\n            }\n\n    } while((valid == 1) || (len != 8) || (valid2 == 1));\n    getchar();\n    fflush(stdin);\n    return aRecord;\n}\n\n\nint main(void)\n{\n    char menuOption;\n\n    do\n    {\n        system(\"cls\");\n        printf(\"~~~ MAIN MENU ~~~\\n\");\n        printf(\"1. Add Telephone Record\\n\");\n        printf(\"2. Delete Telephone Record\\n\");\n        printf(\"3. Search\\n\");\n        printf(\"4. Display All Records\\n\");\n        printf(\"5. Exit\\n\\n\");\n        menuOption = getchar();\n        fflush(stdin);\n        switch (menuOption)\n     {\n    case '1':\n        addRecordToList();\n        break;\n    case '4':\n        displayList();\n        break;\n    }\n\n} while (menuOption != '5');\n\ngetchar();\nreturn 0;\n</code></pre>\n\n<p>}</p>\n\n<p>When adding a student, the computer asks the user to enter the surname rather than the name. Why is the program skipping 'Name' ?  'Name' is displayed, however the user is expected to write the surname instead.</p>\n"}, {"tags": ["c", "loops"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 3, "creation_date": 1459965140, "post_id": 36458494, "comment_id": 60529539, "body": "Please benchmark properly and provide the information with a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Have a look at the Assembler code. The code might even be the same. Anyway, the <code>printf</code> takes much more time than any of the calculations."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1459966172, "post_id": 36458494, "comment_id": 60530208, "body": "Who says which one is faster? Did you even compile your code optimized?"}, {"owner": {"reputation": 384, "user_id": 5075851, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I6w7J.jpg?s=128&g=1", "display_name": "d4rwel", "link": "https://stackoverflow.com/users/5075851/d4rwel"}, "edited": false, "score": 0, "creation_date": 1459969236, "post_id": 36458494, "comment_id": 60532076, "body": "On my computer I compile without optimization flags. But I don&#39;t know if <code>gcc</code> on spoj.com uses them."}], "owner": {"reputation": 384, "user_id": 5075851, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I6w7J.jpg?s=128&g=1", "display_name": "d4rwel", "link": "https://stackoverflow.com/users/5075851/d4rwel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1459969301, "creation_date": 1459964580, "last_edit_date": 1459969301, "question_id": 36458494, "link": "https://stackoverflow.com/questions/36458494/for-loops-with-same-output-and-number-of-iterations-differ-in-execution-time", "title": "For-loops with same output and number of iterations differ in execution time", "body": "<p>Why is the first loop faster than the second loop?</p>\n\n<p>For me the second loop seems less expensive, because there is no mathematical expression in the body to compute. But still I get a time limit exceed on spoi.com (<a href=\"http://www.spoj.com/problems/AP2/\" rel=\"nofollow\">AP2</a>) for that second loop. The first loop does get accepted however.</p>\n\n<p>Both for-loops print the same finite arithmetic progression. For example:</p>\n\n<pre><code>1 3 5 7 9 11 13 15\n</code></pre>\n\n<p>Given:</p>\n\n<pre><code>long long n; // number of members in series ( 8 in above example )\nlong long d; // constant distance between the members ( 2 in example )\nlong long start; // first member in series ( 1 )\nlong long end; // last member in series ( 15 )\n</code></pre>\n\n<p>First loop:</p>\n\n<pre><code>for(long long i = 0; i &lt; n; i++)\n        printf(\"%lld \", start+(i*d));\n</code></pre>\n\n<p>Second loop:</p>\n\n<pre><code>for(long long i = start; i &lt;= end; i+=d) \n        printf(\"%lld \", i);\n</code></pre>\n\n<p>My thoughts on that:</p>\n\n<p>It seems to me that the incrementation by 1 and the multiplication in the first loop is less expensive than the incrementation by <code>d</code> in the second loop, because GCC does some optimization on the expressions?</p>\n\n<hr>\n\n<p>So, I did a \"benchmark\" on my computer with the following code, and I can not say which loop is faster. It's rather random.</p>\n\n<p>So now my conclusion is, that the code review on spoj.com for <a href=\"http://www.spoj.com/problems/AP2/\" rel=\"nofollow\">AP2</a> is somehow arbitrary. </p>\n\n<pre><code>#define NUM_MEMBERS 2000000LL\n#define DISTANCE 3LL\n#define START 1000000LL\n\nint main(int argc, char *argv[])\n{\n    clock_t begin, finish;\n    double time1, time2;\n\n    long long n = NUM_MEMBERS;\n    long long d = DISTANCE;\n    long long start = START;\n    long long end = START+((NUM_MEMBERS-1)*DISTANCE);\n\n    begin = clock();\n    for(long long i = 0; i &lt; n; i++)\n        printf(\"%lld \", start+(i*d));\n    finish = clock();\n    time1 = (double)(finish-begin) / CLOCKS_PER_SEC;\n\n    begin = clock();\n    for(long long i = start; i &lt;= end; i+=d)\n        printf(\"%lld \", i);\n    finish = clock();\n    time2 = (double)(finish-begin) / CLOCKS_PER_SEC;\n\n    printf(\"\\ntime1: %g\\ntime2: %g\\n\", time1, time2);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "command-line", "parameter-passing"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1459965512, "post_id": 36458468, "comment_id": 60529809, "body": "It is not clear if this is a question about shell-uage or programming. Did you read the man-page of your shell (presumably bash)?"}], "answers": [{"tags": [], "owner": {"reputation": 9718, "user_id": 3294441, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/UwdVL.png?s=128&g=1", "display_name": "QuestionC", "link": "https://stackoverflow.com/users/3294441/questionc"}, "is_accepted": false, "score": 2, "last_activity_date": 1459965179, "last_edit_date": 1459965179, "creation_date": 1459964781, "answer_id": 36458575, "question_id": 36458468, "link": "https://stackoverflow.com/questions/36458468/c-on-linux-parse-arguments-from-and/36458575#36458575", "title": "C on Linux: Parse arguments from &#39;&lt;&#39; and &#39;|&#39;", "body": "<p><code>|</code> and <code>&lt;</code> use <code>stdin</code>.</p>\n\n<p>So if the user does not pass any filenames, then use <code>stdin</code> as your file.\nSomething like this perhaps.</p>\n\n<pre><code>int main (int argc, char ** argv)\n{\n    int did_process_file = 0;\n    int reverse = 0;\n    char * arg;\n\n    // Read arguments\n    for (arg = argv[1]; arg != NULL; ++arg) {\n        if (strcmp(arg, \"-r\") == 0) {\n            reverse = 1;\n        }\n        else\n        {\n            FILE * f = fopen(arg, \"r\");\n            load_file(f);\n            did_process_file = 1;\n        }\n    }\n\n    if (!did_process_file)\n    {\n        load_file(stdin);\n    }\n\n    // ...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 0, "last_activity_date": 1459965098, "creation_date": 1459965098, "answer_id": 36458684, "question_id": 36458468, "link": "https://stackoverflow.com/questions/36458468/c-on-linux-parse-arguments-from-and/36458684#36458684", "title": "C on Linux: Parse arguments from &#39;&lt;&#39; and &#39;|&#39;", "body": "<p>The command <code>cat t1 | ./mysort</code> <em>pipes</em> the output of <code>cat t1</code> to the standard input stream of <code>./mysort</code>; similarly, <code>./mysort &lt; t1</code> <em>redirects</em> the standard input stream of <code>./mysort</code> to the file <code>t1</code>.  In either case, you would read the file contents from <code>stdin</code>.  </p>\n\n<p>Basically, you'd handle it like so:</p>\n\n<pre><code>FILE *input = stdin; // initially assume input will come through stdin;\nif ( argv_contains_a_file_name )\n{\n  input = fopen( argv[i], \"r\" );\n}\n</code></pre>\n"}], "owner": {"reputation": 1031, "user_id": 3134549, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/CANRR.jpg?s=128&g=1", "display_name": "nitowa", "link": "https://stackoverflow.com/users/3134549/nitowa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1459965179, "creation_date": 1459964528, "question_id": 36458468, "link": "https://stackoverflow.com/questions/36458468/c-on-linux-parse-arguments-from-and", "title": "C on Linux: Parse arguments from &#39;&lt;&#39; and &#39;|&#39;", "body": "<p>For an uni assignment The following program has to be implemented:</p>\n\n<pre><code>mysort [-r] [file1, ...]\n</code></pre>\n\n<p>mysort then takes the content of each passed file, gets the content line-by-line and prints them alphabetically sorted. -r reverses the output order.</p>\n\n<p>Example file t1:</p>\n\n<pre><code>Priority9 cat\nPriority2 ls\nPriority7 cat mysort.h\n</code></pre>\n\n<p>When mysort is called:</p>\n\n<pre><code>$ ./mysort -r t1 t1\nPriority9 cat\nPriority9 cat\nPriority7 cat mysort.h\nPriority7 cat mysort.h\nPriority2 ls\nPriority2 ls\n</code></pre>\n\n<p>This works perfectly fine so far using argc/argv, but here comes the tricky part. The following calls must also work:</p>\n\n<pre><code>$ cat t1 | ./mysort\nPriority2 ls\nPriority7 cat mysort.h\nPriority9 cat\n\n$ ./mysort &lt; t1\nPriority2 ls\nPriority7 cat mysort.h\nPriority9 cat\n</code></pre>\n\n<p>These do not show up in argc and argv, and presumably have to be handled somehow else. Even after a good bit of googling, I am unable to find ressources on this.(I assume this technique has a particular name?) </p>\n"}, {"tags": ["c", "assembly", "x86"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1459964400, "post_id": 36458390, "comment_id": 60529070, "body": "Where did you get that idea from?"}, {"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 0, "creation_date": 1459964550, "post_id": 36458390, "comment_id": 60529147, "body": "There&#39;s no direct translation of %esp into C. You&#39;ll have to explain more about what the code is using %esp for."}, {"owner": {"reputation": 631, "user_id": 1701799, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/277F9.jpg?s=128&g=1", "display_name": "RastaJedi", "link": "https://stackoverflow.com/users/1701799/rastajedi"}, "edited": false, "score": 0, "creation_date": 1459965016, "post_id": 36458390, "comment_id": 60529447, "body": "You could try to write something in C and use GDB and some other tool I forget the name of right now to see the assembly and I think check registers? I don&#39;t remember 100%. Not sure if this even helps."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1459966456, "post_id": 36458390, "comment_id": 60530364, "body": "No. Not only is this not correct, this is not even wrong."}, {"owner": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "edited": false, "score": 0, "creation_date": 1459971131, "post_id": 36458390, "comment_id": 60533253, "body": "Do you actually need to know the value of %rsp (the stack pointer), or is that something you just think you need? In other words, are you actually asking the right question? What is the real problem? Show some of the assembler and how you ported it to C. Then ask about the problem you have. Perhaps you don&#39;t need to know the stack pointer in your C code at all. Often, in assembler, local variables are addressed relative to the stack pointer (or the base pointer, %rbp) and perhaps you only need to know which local variables you must declare and how they are used in C."}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1460168661, "post_id": 36458390, "comment_id": 60630442, "body": "For a better chance of getting a specific answer, I suggest showing us the assembler code you are trying to convert to <i>C</i>."}], "answers": [{"tags": [], "owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "is_accepted": false, "score": 2, "last_activity_date": 1459964591, "creation_date": 1459964591, "answer_id": 36458500, "question_id": 36458390, "link": "https://stackoverflow.com/questions/36458390/im-trying-to-translate-x86-64-assembly-code-into-equivalent-c-code-how-can-i-g/36458500#36458500", "title": "I&#39;m trying to translate x86-64 assembly code into equivalent C code. How can I get the value contained in %rsp?", "body": "<p>C doesn't have a concept of registers (the nearly obsolete <code>register</code> keyword notwithstanding). There is no portable way to read a specific register in C.</p>\n\n<p>The closest you could get is to use some compiler-specific mechanism for inline assembly code, but then you might as well just use assembly language.</p>\n\n<p>A particular compiler will use the <code>%rsp</code> register for whatever it chooses (possibly affected by an ABI). And of course a compiler for a different CPU won't use <code>%rsp</code> at all.</p>\n\n<p>I suggest you take a step back and decide what you're actually trying to accomplish.</p>\n"}, {"tags": [], "owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": false, "score": 0, "last_activity_date": 1459974356, "creation_date": 1459974356, "answer_id": 36461644, "question_id": 36458390, "link": "https://stackoverflow.com/questions/36458390/im-trying-to-translate-x86-64-assembly-code-into-equivalent-c-code-how-can-i-g/36461644#36461644", "title": "I&#39;m trying to translate x86-64 assembly code into equivalent C code. How can I get the value contained in %rsp?", "body": "<p>If your \"decompiled\" C version of a function still does anything with the stack pointer directly, you did it wrong.  Make up a name for the C variable that the asm is accessing through the stack pointer.</p>\n\n<p>If your C still looks like the asm, you're writing an x86 simulator.</p>\n"}], "owner": {"reputation": 275, "user_id": 5936575, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/4472535098bd9e500ba4e06a42bd813f?s=128&d=identicon&r=PG&f=1", "display_name": "Vik78", "link": "https://stackoverflow.com/users/5936575/vik78"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1460138413, "creation_date": 1459964297, "last_edit_date": 1460138413, "question_id": 36458390, "link": "https://stackoverflow.com/questions/36458390/im-trying-to-translate-x86-64-assembly-code-into-equivalent-c-code-how-can-i-g", "title": "I&#39;m trying to translate x86-64 assembly code into equivalent C code. How can I get the value contained in %rsp?", "body": "<p>My idea was that a pointer to the most recently initialized local variable would contain the current value of %rsp. Is this correct?</p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1459964116, "post_id": 36458288, "comment_id": 60528903, "body": "<code>&amp;myintarr</code> is the same as <code>myintarr</code>, in that case the <code>&amp;</code> is simple superfluous."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1459964205, "post_id": 36458288, "comment_id": 60528952, "body": "C is intriniscally unable to handle arrays, and pointers to them, in a sane manner, consistent with the way other var types are handled."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1459964344, "post_id": 36458288, "comment_id": 60529040, "body": "<code>&amp;myintarr</code> is not the same as <code>myintarr</code>, but it pretty much usually has the same representation since they both point to the beginning of the array. <code>&amp;myintattr</code> has type of <code>pointer to array of 5 ints</code>, whereas <code>myintarr</code> is <code>pointer to int</code>"}, {"owner": {"reputation": 9, "user_id": 6168200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91d21c99486e79a0756a399c48b52507?s=128&d=identicon&r=PG&f=1", "display_name": "vin", "link": "https://stackoverflow.com/users/6168200/vin"}, "edited": false, "score": 0, "creation_date": 1459964444, "post_id": 36458288, "comment_id": 60529088, "body": "Hi Walz,  if myintarr were to be a simple integer variable rather than an array, then &amp;myintarr and myintarr would be different, isn&#39;t it."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1459964531, "post_id": 36458288, "comment_id": 60529135, "body": "@vin correct: the first would produce the address of the integer variable, and the second just the value of that variable."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1459964710, "post_id": 36458288, "comment_id": 60529259, "body": "@Michael Walz <code>&amp;myintarr</code> is <i>not</i> the same as <code>myintarr</code>.  <code>&amp;myintarr</code> has type <i>pointer to array 5 of int</i> and <code>myintarr</code> has type <i>array 5 of int</i>.  They also have different sizes."}, {"owner": {"reputation": 9, "user_id": 6168200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91d21c99486e79a0756a399c48b52507?s=128&d=identicon&r=PG&f=1", "display_name": "vin", "link": "https://stackoverflow.com/users/6168200/vin"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1459964760, "post_id": 36458288, "comment_id": 60529290, "body": "@AnttiHaapala, in that case i am not able to visualize the memory for &amp;myintarr, in case when myintarr is an array of integers, as i have given in my example. I was expecting &quot;Suspicious Pointer Error&quot; for my above code, but it went through even with -ansi enabled."}, {"owner": {"reputation": 9, "user_id": 6168200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91d21c99486e79a0756a399c48b52507?s=128&d=identicon&r=PG&f=1", "display_name": "vin", "link": "https://stackoverflow.com/users/6168200/vin"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1459964965, "post_id": 36458288, "comment_id": 60529410, "body": "@JohnBollinger, Yes.  Thanks for the Link and the information."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1459964977, "post_id": 36458288, "comment_id": 60529417, "body": "Summary: When an array-valued expression appears in most C contexts, it &quot;decays&quot; to a pointer to the first element.  This is why <code>&amp;myintarr[0]</code> and <code>myintarr</code> have the same value (and type).  But the first element of an array appears at the very beginning of the array.  It has the same (start) address as the whole array.  That&#39;s why <code>myintarr</code> and <code>&amp;myintarr</code> have the same value (in an approximate sense that ignores that they have different types)."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1459965112, "post_id": 36458288, "comment_id": 60529515, "body": "Note that C standard definitely does not require that <code>myintarray</code> and <code>&amp;myintarray</code> should print the same value - on the contrary, they could print different values. (furthermore you&#39;d have to cast them to <code>(void*)</code> for printing.) It is just true of the common implementations."}], "owner": {"reputation": 9, "user_id": 6168200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91d21c99486e79a0756a399c48b52507?s=128&d=identicon&r=PG&f=1", "display_name": "vin", "link": "https://stackoverflow.com/users/6168200/vin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "closed_date": 1459965098, "answer_count": 0, "score": 0, "last_activity_date": 1528966933, "creation_date": 1459963924, "last_edit_date": 1528966933, "question_id": 36458288, "link": "https://stackoverflow.com/questions/36458288/specific-c-pointer-format", "closed_reason": "Duplicate", "title": "specific C pointer format", "body": "<p>In the below C Program, all the below 4 printf give me the same address value.\n  I understand the first 3 quite well. I am not able to comprehend why &amp;myintarr should be same as myintarr or &amp;myintarr[0].</p>\n\n<p>I request explanation on this aspect. Thanks.</p>\n\n<pre><code>int main()\n{\n    int myintarr[] = {2,4,6,8,10};\n    int *iptr = myintarr;\n\n    printf(\"Addrss of myintarr variable: %p\\n\", &amp;myintarr[0]);\n    printf(\"Addrss of myintarr variable: %p\\n\", myintarr);\n    printf(\"Addrss of myintarr variable: %p\\n\", iptr);\n    printf(\"Addrss of myintarr variable: %p\\n\", &amp;myintarr); // help here\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 11698, "user_id": 5399734, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2162d669508364bb0c03aba1a2473aa8?s=128&d=identicon&r=PG&f=1", "display_name": "nalzok", "link": "https://stackoverflow.com/users/5399734/nalzok"}, "edited": false, "score": 2, "creation_date": 1459963911, "post_id": 36458261, "comment_id": 60528779, "body": "\u201cMy output is not as desired\u201d, how?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1459963938, "post_id": 36458261, "comment_id": 60528790, "body": "It sounds like you may need to learn how to use a debugger to step through your code. With a good debugger, you can execute your program line by line and see where it is deviating from what you expect. This is an essential tool if you are going to do any programming.  Further reading: <b><a href=\"http://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a></b>"}, {"owner": {"reputation": 5, "user_id": 5559550, "user_type": "registered", "profile_image": "https://graph.facebook.com/126067347756156/picture?type=large", "display_name": "Roger John", "link": "https://stackoverflow.com/users/5559550/roger-john"}, "edited": false, "score": 0, "creation_date": 1459964307, "post_id": 36458261, "comment_id": 60529013, "body": "Output should be {4,2,1,3} the above program gives output : {4,3,2,1,0,0,0,0,0,0,0,0........,0}"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1459966600, "post_id": 36458261, "comment_id": 60530467, "body": "Your code is either [c] or it is [c++]? Which compiler did you use to compile it?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1459967081, "post_id": 36458261, "comment_id": 60530787, "body": "Why do you include <code>string.h</code> when you don&#39;t use it."}], "answers": [{"tags": [], "owner": {"reputation": 121, "user_id": 6100911, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Oeu4rr6LcqI/AAAAAAAAAAI/AAAAAAAAACA/5mzpHwjhHfE/photo.jpg?sz=128", "display_name": "Carafini", "link": "https://stackoverflow.com/users/6100911/carafini"}, "is_accepted": false, "score": 0, "last_activity_date": 1459973990, "creation_date": 1459973990, "answer_id": 36461530, "question_id": 36458261, "link": "https://stackoverflow.com/questions/36458261/return-the-array-containing-the-heights-of-the-students-from-left-to-right-in-th/36461530#36461530", "title": "Return the array containing the heights of the students from left to right in the line", "body": "<p>I tried to come up with my own solution for the problem, since I couldn't have a quick understanding of yours. I hope it helps. I tested it against your case scenario and another one I made up, and it worked for both.</p>\n\n<pre><code> #include &lt;iostream&gt;\n\n using namespace std;\n\n int* get_line_order(int in1, int *in2);\n\n int main()\n {\n     int in[] = {7,0,1,4,3,1,0,1,1,0};\n     int *out;\n     int N = 10;\n\n     out = get_oringinal(N, in);\n\n     for(int i = 0; i&lt;N; i++)\n         cout &lt;&lt; out[i] &lt;&lt; endl;\n\n     return 0;\n }\n\n int* get_line_order(int in1, int *in2)\n {\n     int *out = new int[in1];\n     int i,j,k, count;\n\n     //initializes out array\n     for(i=0; i&lt;in1; i++)\n         out[i] = in1;\n\n     //loops through in2\n     for(i=0; i&lt; (in1-1); i++)\n     {\n         count = 0;\n         //loops through out\n         for(j=0; j&lt; (in1-1); j++)\n         {\n             if(out[j] &gt; (i+1))\n                 count++;\n             if(count == in2[i])\n             {\n                 for(k = j+1; k&lt;in1; k++)\n                     if(out[k] == in1)\n                     {\n                         out[k] = i+1;\n                         break;\n                     }\n                 break;\n             }\n             else if(count &gt; in2[i])\n             {\n                 for(k = j; k&lt;in1; k++)\n                     if(out[k] == in1)\n                     {\n                         out[k] = i+1;\n                         break;\n                     }\n                 break;\n             }\n         }\n     }\n\n     return out;\n }\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 5559550, "user_type": "registered", "profile_image": "https://graph.facebook.com/126067347756156/picture?type=large", "display_name": "Roger John", "link": "https://stackoverflow.com/users/5559550/roger-john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 259, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1460042721, "creation_date": 1459963825, "last_edit_date": 1460042721, "question_id": 36458261, "link": "https://stackoverflow.com/questions/36458261/return-the-array-containing-the-heights-of-the-students-from-left-to-right-in-th", "title": "Return the array containing the heights of the students from left to right in the line", "body": "<p>In a school students are ordered to seat according to their height in a line they always choose their positions randomly to displeasure their teacher,one morning the teacher noticed their seating positions, and that he will be checking their positions in the next morning to make sure they are exactly the same. </p>\n\n<p>Each student only remember one thing from that morning: the number of student to his left that were taller then him there are N students, each with a different height between 1 to n using this information you must reconstruct the seating arrangement from that morning. </p>\n\n<p>You are given a int[], the ith element of which represents the number of taller student to the left of the student with height i (where i is a 1-based index). Return a int[] containing the heights of the students from left to right in the line. </p>\n\n<p>Note: The input is guaranteed to produce a valid and unique output. </p>\n\n<p>Inputs Specifications: \nyour function should accept the fallowing inputs: \nInput 1: N \nInput 2: An array(left[]) of n integers </p>\n\n<p>Output Specifications: \nyou need to return the int [] containing the heights of the students from left to right in the line. </p>\n\n<p>Example : </p>\n\n<p>Input: </p>\n\n<p>input 1: 4 </p>\n\n<p>input 2: {2,1,1,0} </p>\n\n<p>Output: {4,2,1,3} </p>\n\n<p>Explanation: \nStudent of height 1 remembered there were 2 Students taller than him to his left. \nStudent of height 2 remembered there were 1 Students taller than him to his left. \nStudent of height 3 remembered there were 1 Students taller than him to his left. \nStudent of height 4 remembered there were no Students taller than him to his left. </p>\n\n<p>Below is my code:</p>\n\n<pre><code>  #include&lt;stdio.h&gt;\n  #include&lt;string.h&gt;\n\n  int* uniqueValue(int input1,int input2[])\n  {\n    int left, current;\n    static int arr[4] = {0};\n    int i      = 0;\n\n      for(i=0;i&lt;input1;i++)\n       {\n          current = input2[i];\n          left    = 0;\n\n          if(current &gt; 0)\n          left    = arr[(current-1)];\n\n       if(left == 0 &amp;&amp; arr[current] == 0)\n        {\n        arr[current] = input1-current;\n        }\n        else\n    {\n        for(int j=(i+1);j&lt;input1;j++)\n        {\n            if(arr[j] == 0)\n            {\n                left = arr[(j-1)];\n                arr[j] = left - 1;\n            }\n        }\n    }\n}\n\n\nreturn arr;\n }\n</code></pre>\n\n<p>My output is not as desired how can I improve my code for the same.</p>\n"}, {"tags": ["c", "gcc"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1459963711, "post_id": 36458204, "comment_id": 60528660, "body": "If you call gcc like that, it is compiled as C code (which it appears to be), not C++. Don&#39;t add tags for unrelated languages."}, {"owner": {"reputation": 3752, "user_id": 327096, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/cMHTm.jpg?s=128&g=1", "display_name": "kumar_m_kiran", "link": "https://stackoverflow.com/users/327096/kumar-m-kiran"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1459963875, "post_id": 36458204, "comment_id": 60528754, "body": "@Olaf: Ok. I will update the question. It occurs for both gcc and g++ compiler. So it is not specific to c/c++. Thanks!"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1459963991, "post_id": 36458204, "comment_id": 60528815, "body": "1) Don&#39;t make this a C++ question! C and C++ are <b>different</b> languages. 1a) You should use different code in C++ with iostreams and C++ cast operators. 2) You use the wrong type-specifier in the format string. Use <code>inttypes.h</code> macros to print a fixed width integer."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 3, "creation_date": 1459964155, "post_id": 36458204, "comment_id": 60528924, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/588004/is-floating-point-math-broken\">Is floating point math broken?</a>"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1459964242, "post_id": 36458204, "comment_id": 60528971, "body": "@Olaf, close, but not a duplicate - it doesn&#39;t address the question of m32 and m64 affecting result. For example, I have no idea why it is happening."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1459964248, "post_id": 36458204, "comment_id": 60528978, "body": "Hint: Pick a paper and write down the <b>exact</b> binary representation of <code>210.01</code>."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1459964291, "post_id": 36458204, "comment_id": 60529007, "body": "@Olaf, see above - while it certainly related to floating point representation, it does not answer the question as asked. And this question should not be downvoted, it is interesting why m* has this effect."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1459964339, "post_id": 36458204, "comment_id": 60529036, "body": "@SergeyA: It very well does. The value depends on the implementation. x64 and x86 (assuming these are used by OP, but the same applies for ARM) can be seen as different CPUs, so there might very well be differences how the FPU works. Keeping the CV, but removed the DV (still not ambivalent about this)."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1459964456, "post_id": 36458204, "comment_id": 60529093, "body": "The lesson is: if you want the nearest <code>int</code>, add (for positive values) 0.5 before truncating with a type conversion. <code>printf</code> rounds, but type conversion does not."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1459964465, "post_id": 36458204, "comment_id": 60529098, "body": "@Olaf, sorry, it is not an answer, just a specualtion. <i>Different switches produce different code.</i>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1459964552, "post_id": 36458204, "comment_id": 60529149, "body": "@SergeyA: That&#39;s why I made that a comment. And of course, they generate different code."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1459964604, "post_id": 36458204, "comment_id": 60529183, "body": "But this question is not answered in the duplicate either! So it is not a duplicate."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1459964665, "post_id": 36458204, "comment_id": 60529225, "body": "@SergeyA: The dup very well does. Just because its conclusion is that float is imprecise per se and you always have to handle minor variations in the result."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1459964796, "post_id": 36458204, "comment_id": 60529306, "body": "@Olaf, I personally would still be very interested in the real answer - why architecture switch affects floating point arithmetics."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1459964993, "post_id": 36458204, "comment_id": 60529430, "body": "@SergeyA: Why does compiling for a different CPU architecture which uses a different FPU change the behaviour slightly? I think this is very clear."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1459965200, "post_id": 36458204, "comment_id": 60529589, "body": "It should not be related to FPU. Since double representation remains the same (I do not think compiler changes representation based on this), size of double remains the same, the only thing which is likely to change is rounding to the next representable double - up or down. I wonder why it changes."}, {"owner": {"reputation": 879, "user_id": 5693785, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/mfKhd.jpg?s=128&g=1", "display_name": "ron", "link": "https://stackoverflow.com/users/5693785/ron"}, "edited": false, "score": 1, "creation_date": 1459965434, "post_id": 36458204, "comment_id": 60529766, "body": "I tried your code on my linux system,  gcc -m32 test.c  results in 210009.  if i use -O0 optimization with -m32, it results in 210009.If i use -O1, -O2, or -O3 with -m32 it results in 210010.  gcc (SUSE Linux x86-64) 4.3.4 [gcc-4_3-branch revision 152973].  Intel xeon cpu."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1459965582, "post_id": 36458204, "comment_id": 60529859, "body": "What is <code>sizeof(double)</code> on each system? Isn&#39;t <code>double</code> <i>at least</i> 64 bits?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1459965927, "post_id": 36458204, "comment_id": 60530061, "body": "<a href=\"https://msdn.microsoft.com/en-us/library/cc953fe1.aspx\" rel=\"nofollow noreferrer\">This page</a> says <i>&quot;Type double is a floating point type that is larger than or equal to type float, but shorter than or equal to the size of type long double.&quot;</i>"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1459973811, "post_id": 36458204, "comment_id": 60534800, "body": "There is no reason to downvote or CV this question; it is not even a duplicate of the &quot;floating point math is broken&quot; - actually the rounding from 32-bit code does <b>not</b> conform to C99, C11 standards, and in this case the correct result from a conforming C implementation with 64-bit IEEE 754 double <b>is</b> 210010, period."}], "answers": [{"tags": [], "owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "is_accepted": true, "score": 11, "last_activity_date": 1460006345, "last_edit_date": 1460006345, "creation_date": 1459967368, "answer_id": 36459476, "question_id": 36458204, "link": "https://stackoverflow.com/questions/36458204/m32-and-m64-compiler-options-provides-different-output/36459476#36459476", "title": "m32 and m64 compiler options provides different output", "body": "<p>I can confirm the results on my gcc (Ubuntu 5.2.1-22ubuntu2). What seems to happen is that the 32-bit <em>unoptimized</em> code uses 387 FPU with <code>FMUL</code> opcode, whereas 64-bit uses the SSE <code>MULS</code> opcode. (just execute <code>gcc -S test.c</code> with different parameters and see the assembler output). And as is well known, the 387 FPU that executes the <code>FMUL</code> has <em>more</em> than 64 bits of precision (80!) so it seems that it rounds differently here. The reason of course is that that the exact value of 64-bit IEEE double <code>210.01</code> is not that, but</p>\n\n<pre><code> 210.009999999999990905052982270717620849609375\n</code></pre>\n\n<p>and when you multiply by 1000, you're not actually just shifting the decimal point - after all there is no decimal point but <em>binary point</em> in the floating point value; so the value must be rounded. And on 64-bit doubles it is rounded up. On 80-bit 387 FPU registers, the calculation is more precise, and it ends up being rounded <em>down</em>.</p>\n\n<p>After reading about this a bit more, I believe the result generated by gcc on 32-bit arch is not standard conforming. Thus if you force the standard to C99 or C11 with <code>-std=c99</code>, <code>-std=c11</code>, you will get the correct result</p>\n\n<pre><code>% gcc -m32 -std=c11 test.c; ./a.out\n210010\n</code></pre>\n\n<p>If you do not want to force C99 or C11 standard, you could also use the  <code>-fexcess-precision=standard</code> switch.</p>\n\n<hr>\n\n<p>However fun does not stop here.</p>\n\n<pre><code>% gcc -m32 test.c; ./a.out\n210009\n% gcc -m32 -O3 test.c; ./a.out\n210010\n</code></pre>\n\n<p>So you get the \"correct\" result if you compile with <code>-O3</code>; this is of course because the 64-bit <em>compiler</em> uses the 64-bit SSE math to constant-fold the calculation.</p>\n\n<hr>\n\n<p>To confirm that extra precision affects it, you can use a <code>long double</code>:</p>\n\n<pre><code>#include \"stdio.h\"\n#include &lt;stdint.h&gt;\n\nint main()\n{\n    long double d1 = 210.01;  // double constant to long double!\n    uint32_t m = 1000;\n    uint32_t v1 = (uint32_t) (d1 * m);\n\n    printf(\"%d\",v1);\n    return 0;\n}\n</code></pre>\n\n<p>Now even <code>-m64</code> rounds it to 210009.</p>\n\n<pre><code>% gcc -m64 test.c; ./a.out\n210009\n</code></pre>\n"}], "owner": {"reputation": 3752, "user_id": 327096, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/cMHTm.jpg?s=128&g=1", "display_name": "kumar_m_kiran", "link": "https://stackoverflow.com/users/327096/kumar-m-kiran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1049, "favorite_count": 1, "accepted_answer_id": 36459476, "answer_count": 1, "score": 10, "last_activity_date": 1460006345, "creation_date": 1459963645, "last_edit_date": 1459969979, "question_id": 36458204, "link": "https://stackoverflow.com/questions/36458204/m32-and-m64-compiler-options-provides-different-output", "title": "m32 and m64 compiler options provides different output", "body": "<p>Sample Code  </p>\n\n<pre><code>#include \"stdio.h\"\n#include &lt;stdint.h&gt;\n\nint main()\n{\n    double d1 = 210.01;\n    uint32_t m = 1000;\n    uint32_t v1 = (uint32_t) (d1 * m);\n\n    printf(\"%d\",v1);\n    return 0;\n}\n</code></pre>\n\n<p>Output<br>\n1. When compiling with -m32 option (i.e gcc -g3 -m32 test.c)</p>\n\n<pre><code>/test 174 # ./a.out\n210009\n</code></pre>\n\n<p>2. When compiling with -m64 option (i.e gcc -g3 -m64 test.c) </p>\n\n<pre><code>test 176 # ./a.out\n210010\n</code></pre>\n\n<p>Why do I get a difference?<br>\nMy understanding \"was\",  <code>m</code> would be promoted to double and multiplication would be cast downward to <code>unit32_t</code>. Moreover, since we are using stdint type integer, we would be further removing ambiguity related to architecture etc etc.</p>\n\n<p>I know something is fishy here, but not able to pin it down.</p>\n\n<p>Update:<br>\nJust to clarify (for one of the comment), the above behavior is seen for both gcc and g++. </p>\n"}, {"tags": ["c", "string", "buffer", "stdio"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1459963501, "post_id": 36458064, "comment_id": 60528527, "body": "The code shouldn&#39;t compile <code>if (line[0]==&quot;:&quot;){</code> (or, at minimum, should generate warnings).  You can&#39;t compare a character with a string; use <code>&#39;:&#39;</code> instead.  Heed compiler warnings \u2014 the compiler knows a lot more about C than you do, and if it warns, you should assume it is right and should fix your code so it doesn&#39;t warn you about it.  (You should also check that the <code>fopen()</code> succeeds before using <code>file</code>; your program is likely to crash if it fails to open the file. \u2026 added while user1320881 was adding the same comment.)"}, {"owner": {"reputation": 1964, "user_id": 1320881, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b69670b7cc6bce132f443eee557c9448?s=128&d=identicon&r=PG", "display_name": "Unimportant", "link": "https://stackoverflow.com/users/1320881/unimportant"}, "edited": false, "score": 2, "creation_date": 1459963669, "post_id": 36458064, "comment_id": 60528635, "body": "Also always test if opening the file succeeded."}, {"owner": {"reputation": 75, "user_id": 4954059, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/08660cc89fd714a80ea63a31b573c08f?s=128&d=identicon&r=PG&f=1", "display_name": "Alfonso Mateos", "link": "https://stackoverflow.com/users/4954059/alfonso-mateos"}, "edited": false, "score": 0, "creation_date": 1460027994, "post_id": 36458064, "comment_id": 60559457, "body": "Thank you very much. I just wanted to post the code the most simplified as I could but thanks for the tip on that too"}], "answers": [{"comments": [{"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 1, "creation_date": 1459963816, "post_id": 36458156, "comment_id": 60528723, "body": "<code>&#39;:&#39;</code> is of type <code>int</code>, not <code>char</code>."}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "reply_to_user": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1459964272, "post_id": 36458156, "comment_id": 60528995, "body": "@CoolGuy Correct its a character literal, my bad."}], "tags": [], "owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "is_accepted": false, "score": 3, "last_activity_date": 1459964448, "last_edit_date": 1459964448, "creation_date": 1459963507, "answer_id": 36458156, "question_id": 36458064, "link": "https://stackoverflow.com/questions/36458064/read-and-jump-lines-from-a-file-c/36458156#36458156", "title": "read and jump lines from a file C", "body": "<p>Instead of this -</p>\n\n<pre><code>if (line[0]==\":\"){\n</code></pre>\n\n<p>use this -</p>\n\n<pre><code>if (line[0]==':'){   // note the single quotes\n</code></pre>\n\n<p><strong>Note</strong> - <code>';'</code> is of type <code>int</code> (as pointed out by  Cool Guy) unlike <code>\":\"</code> which is a string literal . </p>\n"}, {"tags": [], "owner": {"reputation": 75, "user_id": 4954059, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/08660cc89fd714a80ea63a31b573c08f?s=128&d=identicon&r=PG&f=1", "display_name": "Alfonso Mateos", "link": "https://stackoverflow.com/users/4954059/alfonso-mateos"}, "is_accepted": true, "score": 0, "last_activity_date": 1460028726, "creation_date": 1460028726, "answer_id": 36474927, "question_id": 36458064, "link": "https://stackoverflow.com/questions/36458064/read-and-jump-lines-from-a-file-c/36474927#36474927", "title": "read and jump lines from a file C", "body": "<pre><code>    #include &lt;stdio.h&gt;\n    #include &lt;string.h&gt;\n\n\n    int main(int argc, char* argv[])\n    {\n\n\n        FILE* file = fopen(\"questions-words.txt\", \"r\"); /* should check the result */\n        if (file==NULL){\n            return-1;\n        }\n        char line[256];\n        char first[20],second[20],third[20],fourth[20],temp[20];\n\n\n        while (! feof(file)) {\n            fscanf(file,\"%s \\t\", first);\n            if (!strcmp(first,\":\")){\n                fscanf(file,\"%s \\t\",temp);\n            continue;\n                }\n\n                fscanf(file,\"%s \\t\", second);\n                fscanf(file,\"%s \\t\", third);\n                fscanf(file,\"%s \\t\", fourth);\n                printf(\"%s %s %s %s \\n\", first, second, third, fourth);\n\n\n\n        }\n                fclose(file);\n\n                return 0;\n    }\n</code></pre>\n\n<p>@ameyCu 's answer is better but since I knew each line had 4 words I also find this solution (just in case is helpful for somene)</p>\n"}], "owner": {"reputation": 75, "user_id": 4954059, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/08660cc89fd714a80ea63a31b573c08f?s=128&d=identicon&r=PG&f=1", "display_name": "Alfonso Mateos", "link": "https://stackoverflow.com/users/4954059/alfonso-mateos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 699, "favorite_count": 0, "closed_date": 1460243673, "accepted_answer_id": 36474927, "answer_count": 2, "score": 0, "last_activity_date": 1460028726, "creation_date": 1459963250, "last_edit_date": 1459967002, "question_id": 36458064, "link": "https://stackoverflow.com/questions/36458064/read-and-jump-lines-from-a-file-c", "closed_reason": "Not suitable for this site", "title": "read and jump lines from a file C", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main(int argc, char* argv[]) {\n  FILE* file = fopen(\"questions-words.txt\", \"r\"); \n  char line[256];\n\n  while (fgets(line, sizeof(line), file) != NULL) {                \n    if (line[0]==\":\") {\n      continue;\n    }\n    printf(\"%s\", line);   \n  }\n  fclose(file);\n  return 0;\n}\n</code></pre>\n\n<p>Hi I trying to print the lines of a file and jump the ones that start with  a \":\" but it doesnt seem to work.\nAlso I can't print line[0] it gives a warning because \"line is type int\"</p>\n"}, {"tags": ["c", "database", "postgresql"], "comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1459961995, "post_id": 36457394, "comment_id": 60527551, "body": "I am not sure if this is related, but <code>strtok</code> is not re-entrant and you&#39;d probably not want to use it."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1459962175, "post_id": 36457394, "comment_id": 60527650, "body": "Ah just noticed. You&#39;re just storing pointers I guess, so this is not correct at all. It just looks like it works in the second example because you never freed the memory that you malloced for the components. And in the first one you&#39;re invoking undefined behaviour."}, {"owner": {"reputation": 205, "user_id": 959024, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a274cfd77065c2314f47ee842f51cd24?s=128&d=identicon&r=PG", "display_name": "Thang Do", "link": "https://stackoverflow.com/users/959024/thang-do"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1459962294, "post_id": 36457394, "comment_id": 60527739, "body": "the only place where I free memory is pfree(pStr) which is just a temporary string pointer."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1459962336, "post_id": 36457394, "comment_id": 60527757, "body": "Your type is only 16 bytes, how do you suppose postgresql is going to save the actual email addresses in 16 bytes?!"}, {"owner": {"reputation": 205, "user_id": 959024, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a274cfd77065c2314f47ee842f51cd24?s=128&d=identicon&r=PG", "display_name": "Thang Do", "link": "https://stackoverflow.com/users/959024/thang-do"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1459962336, "post_id": 36457394, "comment_id": 60527758, "body": "&quot;this is not correct at all&quot; ? as in my approach is not correct at all?"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1459962370, "post_id": 36457394, "comment_id": 60527775, "body": "exactly, your approach is not correct at all, your type must be a <b>varlena</b> type to accommodate for a varying length of an email address."}, {"owner": {"reputation": 205, "user_id": 959024, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a274cfd77065c2314f47ee842f51cd24?s=128&d=identicon&r=PG", "display_name": "Thang Do", "link": "https://stackoverflow.com/users/959024/thang-do"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1459962531, "post_id": 36457394, "comment_id": 60527876, "body": "does that mean I should also change the structure EmailAddress as well? also how do I declare varlena type?"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1459962802, "post_id": 36457394, "comment_id": 60528048, "body": "I&#39;ve never done a varlena type myself; you can look for the variable length types at the end of <a href=\"http://www.postgresql.org/docs/9.5/static/xtypes.html\" rel=\"nofollow noreferrer\">postgresql.org/docs/9.5/static/xtypes.html</a> (it is quite terse)"}, {"owner": {"reputation": 205, "user_id": 959024, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a274cfd77065c2314f47ee842f51cd24?s=128&d=identicon&r=PG", "display_name": "Thang Do", "link": "https://stackoverflow.com/users/959024/thang-do"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1459963111, "post_id": 36457394, "comment_id": 60528263, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/108431/discussion-between-thangdo-and-antti-haapala\">continue this discussion in chat</a>."}], "answers": [{"tags": [], "owner": {"reputation": 205, "user_id": 959024, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a274cfd77065c2314f47ee842f51cd24?s=128&d=identicon&r=PG", "display_name": "Thang Do", "link": "https://stackoverflow.com/users/959024/thang-do"}, "is_accepted": true, "score": 0, "last_activity_date": 1460028482, "creation_date": 1460028482, "answer_id": 36474839, "question_id": 36457394, "link": "https://stackoverflow.com/questions/36457394/postgresql-c-input-output-function-strange-behaviour/36474839#36474839", "title": "postgresql C input/output function strange behaviour", "body": "<p>Ok. \nWith lots of help and support from wonderful people such as @Antti and my professor, </p>\n\n<p>This is the solution and reason behind this behaviour (in summary): </p>\n\n<p>The problem is here:</p>\n\n<pre><code>typedef struct EmailAdress {\n    char* domain;\n    char* local;\n} EmailAddress;\n</code></pre>\n\n<p>The buffers I was allocating for local and domain only exist in the memory context of the original sql process.</p>\n\n<p>What I actually store in the database are pointers to these buffers, and these will work ok while the original sql process is running. When I start a new sql process, I still have the same buffer addresses in the tuple, but the buffers do not exist in the new memory context.</p>\n\n<p>There are two possible solutions: </p>\n\n<ul>\n<li>one easy but space-inefficient, the other more difficult but also wastes less space.</li>\n<li>one more complicated one but space-efficient (using varlena data type - I couldn't figure out how to implement this approach, so I let it go) </li>\n</ul>\n\n<p>The easy one (which most people have used) is to define the struct as</p>\n\n<pre><code>typedef struct EmailAdress {\n    char domain[MAX];\n    char local[MAX];\n} EmailAddress;\n</code></pre>\n\n<p>I then no longer use malloc() for local and domain under this strategy. \nThe buffer space for them is created when you do the palloc()</p>\n\n<p>This works because all of the string data is included in the chunk of memory which is created by the palloc(), and thus is written to the disk when PostgreSQL inserts the tuple.</p>\n\n<p>In term of changing email.source accordingly, the only change needed is this:</p>\n\n<pre><code>CREATE TYPE EmailAddress (\n    internallength   = 258,\n    input            = email_in,\n    output           = email_out,\n    alignment        = int4,\n    storage          = plain\n);\n</code></pre>\n\n<p>Note the internal length = 258 (129 * 2) because in my case I can assume all local/domain part are 128 bits max + 1 bit for null terminator. </p>\n"}], "owner": {"reputation": 205, "user_id": 959024, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a274cfd77065c2314f47ee842f51cd24?s=128&d=identicon&r=PG", "display_name": "Thang Do", "link": "https://stackoverflow.com/users/959024/thang-do"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 178, "favorite_count": 0, "accepted_answer_id": 36474839, "answer_count": 1, "score": 0, "last_activity_date": 1460028482, "creation_date": 1459961243, "question_id": 36457394, "link": "https://stackoverflow.com/questions/36457394/postgresql-c-input-output-function-strange-behaviour", "title": "postgresql C input/output function strange behaviour", "body": "<p>Recently I have been working with postgresql and its custom user-define type in C. </p>\n\n<p>Before I get to the implementation of input/output function of my user-define type EmailAddress, here's the strange behaviour</p>\n\n<p>If I insert data from file using <strong>psql -f</strong> option, the email addresses in username column are all messed up.</p>\n\n<p><a href=\"https://i.stack.imgur.com/tBcnO.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tBcnO.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>but if I insert data from file using <strong>\\i data.sql</strong> option within psql [dbname], I'd get this result. all emails are displayed correctly\n<a href=\"https://i.stack.imgur.com/I657J.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/I657J.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>---email.c------</p>\n\n<pre><code>PG_MODULE_MAGIC;\ntypedef struct EmailAdress {\n    char* domain;\n    char* local;\n} EmailAddress;\n\nPG_FUNCTION_INFO_V1(email_in);\nDatum email_in(PG_FUNCTION_ARGS) {\n    // Get arg c string\n    char* pStr = palloc(strlen(PG_GETARG_CSTRING(0)));\n    strcpy(pStr, PG_GETARG_CSTRING(0));\n\n    // Convert to connical form\n    int i;\n    for (i = 0; pStr[i]; i++) {\n        pStr[i] = tolower(pStr[i]);\n    }\n\n    EmailAddress* pEmail = (EmailAddress*) palloc(sizeof(EmailAddress));\n\n    char* pToken;\n    pToken = strtok(pStr, AT);\n    pEmail-&gt;local = malloc(strlen(pToken) + 1);\n    strcpy(pEmail-&gt;local, pToken);\n\n    pToken = strtok(NULL, AT);\n    pEmail-&gt;domain = malloc(strlen(pToken) + 1);\n    strcpy(pEmail-&gt;domain, pToken);\n\n    pfree(pStr);\n\n    if (!valid(pEmail)) {\n        ereport(ERROR, (errcode(ERRCODE_INVALID_TEXT_REPRESENTATION), errmsg(\"invalid EmailAddress: \\\"%s@%s\\\" - pointer: %p\", pEmail-&gt;local, pEmail-&gt;domain, pEmail)));\n    }\n\n    PG_RETURN_POINTER(pEmail);\n}\n\n\nPG_FUNCTION_INFO_V1(email_out);\nDatum email_out(PG_FUNCTION_ARGS) {\n    EmailAddress* pEmail = (EmailAddress *) PG_GETARG_POINTER(0);\n    char* pResult = psprintf(\"%s@%s\", pEmail-&gt;local, pEmail-&gt;domain);\n\n    PG_RETURN_CSTRING(pResult);\n}\n</code></pre>\n\n<p>----email.source----</p>\n\n<pre><code>CREATE FUNCTION email_in(cstring)\n    RETURNS EmailAddress\n    AS '_OBJWD_/email'\n    LANGUAGE C IMMUTABLE STRICT;\n\nCREATE FUNCTION email_out(EmailAddress)\n    RETURNS cstring\n    AS '_OBJWD_/email'\n    LANGUAGE C IMMUTABLE STRICT;\n\nCREATE TYPE EmailAddress (\n    internallength   = 16,\n    input            = email_in,\n    output           = email_out,\n    alignment        = double\n);\n\n\nCREATE FUNCTION email_eq(EmailAddress, EmailAddress) RETURNS bool\n    AS '_OBJWD_/email' LANGUAGE C IMMUTABLE STRICT;\n\nCREATE FUNCTION email_neq(EmailAddress, EmailAddress) RETURNS bool\n    AS '_OBJWD_/email' LANGUAGE C IMMUTABLE STRICT;\n\nCREATE FUNCTION email_gt(EmailAddress, EmailAddress) RETURNS bool\n    AS '_OBJWD_/email' LANGUAGE C IMMUTABLE STRICT;\n\nCREATE FUNCTION email_ge(EmailAddress, EmailAddress) RETURNS bool\n    AS '_OBJWD_/email' LANGUAGE C IMMUTABLE STRICT;\n\nCREATE FUNCTION email_lt(EmailAddress, EmailAddress) RETURNS bool\n    AS '_OBJWD_/email' LANGUAGE C IMMUTABLE STRICT;\n\nCREATE FUNCTION email_le(EmailAddress, EmailAddress) RETURNS bool\n    AS '_OBJWD_/email' LANGUAGE C IMMUTABLE STRICT;\n\nCREATE FUNCTION email_deq(EmailAddress, EmailAddress) RETURNS bool\n    AS '_OBJWD_/email' LANGUAGE C IMMUTABLE STRICT;\n\nCREATE FUNCTION email_ndeq(EmailAddress, EmailAddress) RETURNS bool\n    AS '_OBJWD_/email' LANGUAGE C IMMUTABLE STRICT;\n\nCREATE OPERATOR &lt; (\n    leftarg = EmailAddress, rightarg = EmailAddress, procedure = email_lt,\n    commutator = &gt; , negator = &gt;=\n);\n\nCREATE OPERATOR &lt;= (\n    leftarg = EmailAddress, rightarg = EmailAddress, procedure = email_le,\n    commutator = &gt;= , negator = &gt;\n);\n\nCREATE OPERATOR = (\n    leftarg = EmailAddress, rightarg = EmailAddress, procedure = email_eq,\n    commutator = = , negator = &lt;&gt;\n);\n\nCREATE OPERATOR &lt;&gt; (\n    leftarg = EmailAddress, rightarg = EmailAddress, procedure = email_neq,\n    commutator = &lt;&gt; , negator = =\n);\n\nCREATE OPERATOR &gt;= (\n    leftarg = EmailAddress, rightarg = EmailAddress, procedure = email_ge,\n    commutator = &lt;= , negator = &lt;\n);\n\nCREATE OPERATOR &gt; (\n    leftarg = EmailAddress, rightarg = EmailAddress, procedure = email_gt,\n    commutator = &lt; , negator = &lt;=\n);\n\nCREATE OPERATOR ~ (\n    leftarg = EmailAddress, rightarg = EmailAddress, procedure = email_deq,\n    commutator = ~ , negator = !~\n);\n\nCREATE OPERATOR !~ (\n    leftarg = EmailAddress, rightarg = EmailAddress, procedure = email_ndeq,\n    commutator = !~ , negator = ~\n);\n\nCREATE FUNCTION email_cmp(EmailAddress, EmailAddress) RETURNS int4\n    AS '_OBJWD_/email' LANGUAGE C IMMUTABLE STRICT;\n\nCREATE FUNCTION email_hash(EmailAddress) RETURNS int4\n    AS '_OBJWD_/email' LANGUAGE C IMMUTABLE STRICT;\n\n-- now we can make the operator class\nCREATE OPERATOR CLASS email_btree_ops\n    DEFAULT FOR TYPE EmailAddress USING btree AS\n        OPERATOR        1       &lt;   ,\n        OPERATOR        2       &lt;=  ,\n        OPERATOR        3       =   ,\n        OPERATOR        4       &gt;=  ,\n        OPERATOR        5       &gt;   ,\n        FUNCTION        1       email_cmp(EmailAddress, EmailAddress);\n\nCREATE OPERATOR CLASS email_hash_ops\n    DEFAULT FOR TYPE EmailAddress USING hash AS\n        OPERATOR        1       =   ,\n        FUNCTION        1       email_hash(EmailAddress);\n</code></pre>\n"}, {"tags": ["c", "include", "header-files"], "comments": [{"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 1, "creation_date": 1459962072, "post_id": 36457390, "comment_id": 60527586, "body": "Perhaps if that&#39;s the case you should rethink your coding structure? At least for <code>c</code>, I only put interface prototype functions (the visible functions that other files/code intend to call) in the <code>.h</code> header file. Any other internal functions meant to be hidden from the outside I declare (as <code>static</code>) and define all in the <code>.c</code> file. But of course I don&#39;t know the details of your situation or if that is even relevant."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1459962545, "post_id": 36457390, "comment_id": 60527884, "body": "On which basis will you restrict it? I mean, what is the reason for such a requirement?"}, {"owner": {"reputation": 61, "user_id": 3098286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bdadcab8b58718f484a9519239e5af8?s=128&d=identicon&r=PG&f=1", "display_name": "user194341", "link": "https://stackoverflow.com/users/3098286/user194341"}, "edited": false, "score": 0, "creation_date": 1460020113, "post_id": 36457390, "comment_id": 60553630, "body": "It&#39;s related to unit testing. I need to expose a class in a header so that it can be mocked in a test, but I don&#39;t want anyone else (apart from my implementation) to implement/subclass it."}], "answers": [{"tags": [], "owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "is_accepted": false, "score": 6, "last_activity_date": 1459961478, "creation_date": 1459961478, "answer_id": 36457474, "question_id": 36457390, "link": "https://stackoverflow.com/questions/36457390/in-c-or-c-can-i-impose-restrictions-as-to-which-files-can-include-my-header-fi/36457474#36457474", "title": "In C or C++ can I impose restrictions as to which files can include my header file", "body": "<p>Of course there is no proper security feature for this (that'd be plain silly), but what you could do is to produce an error in your header file if a certain macro is not present when including the file, so that your <code>header.h</code> starts with</p>\n\n<pre><code>#ifndef AUTHORIZED_TO_INCLUDE_THE_HEADER\n#error \"You're not authorized to include this file\"\n#endif\n</code></pre>\n\n<p>then in the files that include this, do</p>\n\n<pre><code>#define AUTHORIZED_TO_INCLUDE_THE_HEADER\n#include \"header.h\"\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 3098286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bdadcab8b58718f484a9519239e5af8?s=128&d=identicon&r=PG&f=1", "display_name": "user194341", "link": "https://stackoverflow.com/users/3098286/user194341"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 2, "answer_count": 1, "score": 5, "last_activity_date": 1471962341, "creation_date": 1459961222, "last_edit_date": 1471962341, "question_id": 36457390, "link": "https://stackoverflow.com/questions/36457390/in-c-or-c-can-i-impose-restrictions-as-to-which-files-can-include-my-header-fi", "title": "In C or C++ can I impose restrictions as to which files can include my header file", "body": "<p>In C/C++ I have written a header file which is available to all, however I want to restrict the files that include it. Is there any way I can generate compiler error if my header files is included by an \"unauthorized\" c/cxx file?</p>\n"}, {"tags": ["c", "client-server", "mkfifo", "mknod"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1459962466, "post_id": 36457127, "comment_id": 60527836, "body": "Pipes, named or anonymous, are unstructured byte streams.  If you want the data passing through to be organized into some higher structure, such as a sequence of separate messages, then you have to implement that via some kind of application protocol.  At its simplest, you might send messages in the form of a binary message size followed by the specified number of bytes of message.  Naturally, the processes on the two ends of the pipe must agree on the interpretation for communication to be successful."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1459963129, "post_id": 36457127, "comment_id": 60528275, "body": "Perhaps you wanted to use a Unix domain socket instead!"}, {"owner": {"reputation": 35, "user_id": 5332115, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/4c3b67d49ae8cff35357e4f3a172d1ea?s=128&d=identicon&r=PG&f=1", "display_name": "Kunal", "link": "https://stackoverflow.com/users/5332115/kunal"}, "edited": false, "score": 0, "creation_date": 1459966360, "post_id": 36457127, "comment_id": 60530304, "body": "I know using socket will make the implementation easier but right now I need to implement through named pipe."}, {"owner": {"reputation": 35, "user_id": 5332115, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/4c3b67d49ae8cff35357e4f3a172d1ea?s=128&d=identicon&r=PG&f=1", "display_name": "Kunal", "link": "https://stackoverflow.com/users/5332115/kunal"}, "edited": false, "score": 0, "creation_date": 1459967574, "post_id": 36457127, "comment_id": 60531048, "body": "I have tried to make change server code to:                                                while(1)  {   /*fp=fopen(FIFO_FILE, &quot;r&quot;);*/   /*fgets(readbuf,5, fp);*/   num=read(fd,readbuf,10);   fprintf(stderr,&quot;Received string: %s\\n&quot;, readbuf);   /*fclose(fp);*/   fprintf(stderr,&quot;Finished iteration\\n&quot;);   sleep(20);  } I thought this will make the server to block when the reading of all the contents of pipe is over . This does not block the server instead it goes into infinite loop."}], "answers": [{"tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1459962726, "creation_date": 1459962726, "answer_id": 36457902, "question_id": 36457127, "link": "https://stackoverflow.com/questions/36457127/named-pipes-for-client-server-implementation-how-will-server-distinguish-between/36457902#36457902", "title": "Named pipes for client server implementation-How will server distinguish between two request from the same client", "body": "<p>There is no knowledge at pipe/stream level about what constitutes an application protocol message. There are, however, two most common ways to delimit messages in a stream:</p>\n\n<ul>\n<li>prefix messages with their size and read that many bytes, or</li>\n<li>read till a certain sequence of bytes is found (often <code>\\n</code> (new-line symbol) for text-based protocols).</li>\n</ul>\n\n<p>Use one of these methods to delimit messages in your stream.</p>\n"}], "owner": {"reputation": 35, "user_id": 5332115, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/4c3b67d49ae8cff35357e4f3a172d1ea?s=128&d=identicon&r=PG&f=1", "display_name": "Kunal", "link": "https://stackoverflow.com/users/5332115/kunal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 498, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1459966239, "creation_date": 1459960479, "last_edit_date": 1459966239, "question_id": 36457127, "link": "https://stackoverflow.com/questions/36457127/named-pipes-for-client-server-implementation-how-will-server-distinguish-between", "title": "Named pipes for client server implementation-How will server distinguish between two request from the same client", "body": "<p>I have tried to implement client server model using named pipe. Now when client sends only one message to server the server is able to identify what was the message sent and prints it out. Now if client sends multiple message to same server, the server is not able to distinguish between the messages and prints out the both the client messages together instead of separately printing out both message. This is the code I am using:</p>\n\n<pre><code>  Server.c:\n    int main(void)\n    {\n         FILE *fp;\n        char readbuf[80];\n\n  /*Create the FIFO if it does not exist */\n  umask(0);\n  mknod(FIFO_FILE, S_IFIFO|0777, 0);\n  while(1)\n  {\n   fp=fopen(FIFO_FILE, \"r\");\n   fgets(readbuf,80, fp);\n   fprintf(stderr,\"Received string: %s\\n\", readbuf);\n   fclose(fp);\n   fprintf(stderr,\"Finished iteration\\n\");\n  }\n\n return(0);\n }\n\n   Client.c:\n     int main()\n     {\n       FILE *fp;\n        char * message1=\"message1\";\n        char * message2=\"message2\";\n         if((fp = fopen(FIFO_FILE, \"w+\")) == NULL) {\n                perror(\"fopen\");\n                     exit(1);\n      }\n\n  fprintf(stderr,\"Trying to transfer the first message\\n\");\n  fputs(message1, fp);\n  fprintf(stderr,\"Transferred the first message\\n\");\n  fprintf(stderr,\"Trying to transfer the second message\\n\");\n  fputs(message2, fp);\n  fprintf(stderr,\"Trying to transfer the second message\\n\");\n  fclose(fp);\n  return(0);\n   }\n</code></pre>\n\n<p>Now, I know in the server end I am trying to read 80 bytes at a time which makes it to read all the characters together but whenever I am trying to read 5 bytes at a time in the server end it goes into infinite loop. There must be something wrong in my concept. \nI have one doubt can when I am modifying the server side to read 5 bytes at a time.It goes into infinite loop why does not it block after it has read all the messages that has been sent by client.</p>\n"}, {"tags": ["c", "multithreading", "segmentation-fault"], "comments": [{"owner": {"reputation": 15569, "user_id": 2302862, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e264db339bb96e343770fa38018e00f1?s=128&d=identicon&r=PG", "display_name": "Siguza", "link": "https://stackoverflow.com/users/2302862/siguza"}, "edited": false, "score": 1, "creation_date": 1459960716, "post_id": 36457002, "comment_id": 60526783, "body": "You don&#39;t allocate <code>p</code> and <code>s</code> (the integers) anywhere, so they will be pointers with random contents, meaning they&#39;ll pointing to a random location in memory and (extremely likely) trigger a segfault on access. You should also declare <code>ret1</code> and <code>ret2</code> as int pointers, if you pass their address to <code>pthread_join</code>, and accordingly dereference them in <code>printf</code> then."}], "answers": [{"tags": [], "owner": {"reputation": 175, "user_id": 6158383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/894a52419735dbf898e7551359ca7b2a?s=128&d=identicon&r=PG&f=1", "display_name": "G. Emadi", "link": "https://stackoverflow.com/users/6158383/g-emadi"}, "is_accepted": false, "score": 3, "last_activity_date": 1459962544, "last_edit_date": 1459962544, "creation_date": 1459961003, "answer_id": 36457317, "question_id": 36457002, "link": "https://stackoverflow.com/questions/36457002/thread-management-in-c/36457317#36457317", "title": "thread management in C", "body": "<p>You have not allocated memory for the s and p pointer variables. So the segmentation fault happened.\nYou should allocate memory or use the address only.</p>\n"}, {"tags": [], "owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "is_accepted": false, "score": 1, "last_activity_date": 1459962114, "last_edit_date": 1459962114, "creation_date": 1459961425, "answer_id": 36457458, "question_id": 36457002, "link": "https://stackoverflow.com/questions/36457002/thread-management-in-c/36457458#36457458", "title": "thread management in C", "body": "<p>Your method of returning and printing the return values from the threads is not correct. I will show the step by step solution for one thread. The other has the same solution.</p>\n\n<p>In the thread function <code>sum</code>, allocate some memory for an int variable, then store the result in the memory pointer to by <code>s</code>.</p>\n\n<pre><code>int *s = malloc( sizeof(int) );\n*s=i+j\n</code></pre>\n\n<p>Then return the pointer to that memory.</p>\n\n<pre><code>return s;\n</code></pre>\n\n<p>Now you need to collect the pointer returned from the thread correctly.</p>\n\n<p>The function pthread_join requires a pointer to a pointer to void as the second argument. You are passing a pointer to an int. This is incorrect even though the cast suppresses the error. Instead use a pointer to void and pass its address to the function:</p>\n\n<pre><code>void* ret1 = NULL;\npthread_join(tid1, &amp;ret1);\n</code></pre>\n\n<p>The pointer <code>ret1</code> now points to the same memory, pointer <code>s</code> pointed to in the thread. That memory holds the result of the calculation. Declare a pointer to int and store pointer to that memory in it:</p>\n\n<pre><code>int* sm = ret1;\n</code></pre>\n\n<p>Then print the value:</p>\n\n<pre><code>printf( \"%d\\n\" , *sm );\n</code></pre>\n\n<p>After it is not needed anymore the memory allocated in the function <code>sum</code>(Look at the malloc call above) should be freed:</p>\n\n<pre><code>free( sm );\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 6167638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a590fa059d9803e4aa1c0ca3f197609?s=128&d=identicon&r=PG&f=1", "display_name": "shank", "link": "https://stackoverflow.com/users/6167638/shank"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1459962548, "creation_date": 1459960165, "last_edit_date": 1459962548, "question_id": 36457002, "link": "https://stackoverflow.com/questions/36457002/thread-management-in-c", "title": "thread management in C", "body": "<p><em>defining the struct</em></p>\n\n<pre><code>typedef struct {\n    int a,b;\n}targ;\n</code></pre>\n\n<p>1st thread function:</p>\n\n<pre><code>void* sum(void *arg) {\n    int *s;\n    targ *p = (targ*)arg;\n\n    int i=p-&gt;a;\n    int j=p-&gt;b;\n    *s=i+j;\n    pthread_exit((void*)s);\n}\n</code></pre>\n\n<p>2nd thread function:</p>\n\n<pre><code>void* pdt(void *arg) {\n    int *p;\n    targ *s= (targ*)arg;\n\n    int i=s-&gt;a;\n    int j=s-&gt;b;\n    *p=i*j;\n     pthread_exit((void*)p);\n }\n</code></pre>\n\n<p>Main thread function:</p>\n\n<pre><code> int main(void) {\n     int ret1,ret2;\n     pthread_t tid1,tid2;\n     targ *x;\n\n     x=(targ*)malloc(sizeof(targ));\n\n     printf(\"enter the 2 numbers\\n\");\n     scanf(\"%d%d\",&amp;x-&gt;a,&amp;x-&gt;b);\n\n     printf(\"%d%d\",x-&gt;a,x-&gt;b);\n\n     pthread_create(&amp;tid1,NULL,sum,(void*)x);\n     pthread_create(&amp;tid2,NULL,pdt,(void*)x);\n\n     pthread_join(tid1,(void**)&amp;ret1);\n     pthread_join(tid2,(void**)&amp;ret2);\n\n     printf(\"the sum and product of the 2 numbers is %d and %d\\n\",(int)ret1,    (int)ret2);\n\n     return 0;\n }\n</code></pre>\n\n<p>I'm not able to understand why there's a <em>segfault</em> even though I have followed the <em>man</em> pages for each API.</p>\n\n<p>The program is to understand how thread functions work with one another. The main function passes the values to each thread function and they return back a value to the main function.</p>\n"}, {"tags": ["c", "io", "scanf"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 5, "creation_date": 1459960323, "post_id": 36456959, "comment_id": 60526521, "body": "<code>int max[m][n], allo[m][n], need[n][m];</code> ... <code>m</code> and <code>n</code> have not been initialised, so it is <i>undefined behaviour</i>. Apart fom that, VLAs do not resize themselves when you change the variable you defined them with. I also notice the <code>m</code> and <code>n</code> are transposed in <code>need[n][m]</code>."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1459960834, "post_id": 36456959, "comment_id": 60526871, "body": "please do not change the question to try and cure the problems. Do that on your own desk, or it will make the dialog look irrelevant."}], "answers": [{"tags": [], "owner": {"reputation": 16587, "user_id": 177053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6c516626d381a1ea383cedd1799486?s=128&d=identicon&r=PG", "display_name": "Vasfed", "link": "https://stackoverflow.com/users/177053/vasfed"}, "is_accepted": false, "score": 0, "last_activity_date": 1459960528, "creation_date": 1459960528, "answer_id": 36457149, "question_id": 36456959, "link": "https://stackoverflow.com/questions/36456959/c-segmentation-fault-with-fscanf/36457149#36457149", "title": "C Segmentation fault with fscanf", "body": "<p>You declare <code>int max[m][n], allo[m][n], need[n][m]</code> while <code>m</code> and <code>n</code> are not set yet, so they are of unknown size. They will not resize themselves after the sizes are set. So writing to these will give you \"undefined behaviour\"</p>\n"}, {"comments": [{"owner": {"reputation": 59, "user_id": 5438244, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/DENx0.jpg?s=128&g=1", "display_name": "CrimsonMoth", "link": "https://stackoverflow.com/users/5438244/crimsonmoth"}, "edited": false, "score": 0, "creation_date": 1459960642, "post_id": 36457169, "comment_id": 60526735, "body": "but still got seg fault with using fscanf"}, {"owner": {"reputation": 59, "user_id": 5438244, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/DENx0.jpg?s=128&g=1", "display_name": "CrimsonMoth", "link": "https://stackoverflow.com/users/5438244/crimsonmoth"}, "edited": false, "score": 0, "creation_date": 1459961347, "post_id": 36457169, "comment_id": 60527163, "body": "Can I initialize n &amp; m to 0 first, and then fscanf will return some value from the input back to n &amp; m. Then now n &amp; m is not undefined. Anyway, I edit it with your change, but still got seg fault. I think the problem is the fscanf when it reachs to the end file &quot;line terminated&quot;."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 59, "user_id": 5438244, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/DENx0.jpg?s=128&g=1", "display_name": "CrimsonMoth", "link": "https://stackoverflow.com/users/5438244/crimsonmoth"}, "edited": false, "score": 0, "creation_date": 1459970054, "post_id": 36457169, "comment_id": 60532608, "body": "Are you sure your arrays are created correctly? Maybe update your post @fruitlancer122 with the latest attempt?"}], "tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": false, "score": 1, "last_activity_date": 1459960677, "last_edit_date": 1459960677, "creation_date": 1459960582, "answer_id": 36457169, "question_id": 36456959, "link": "https://stackoverflow.com/questions/36456959/c-segmentation-fault-with-fscanf/36457169#36457169", "title": "C Segmentation fault with fscanf", "body": "<p>The problem is here:</p>\n\n<pre><code>int n;  // # resources\nint m;  // # processes\nint avail[n];\nint max[m][n], allo[m][n], need[n][m];\n</code></pre>\n\n<p><code>n</code> and <code>m</code> are <em>not</em> initialized when you declare the 2D array <code>max</code>. Try printing <code>n</code> and <code>m</code> before <code>int max[m][n];</code>, etc. and you will see that they contain garbage values.</p>\n\n<p>As a result, <strong>Undefined Behavior</strong> is what you are experiencing, since you can't really tell what the size of your array is.</p>\n\n<p>Change it to this:</p>\n\n<pre><code>int n;  // # resources\nint m;  // # processes\n\nfscanf(fp, \"%d %d\", &amp;n, &amp;m);\nprintf(\"%d %d\", n, m);\n\nint avail[n];\nint max[m][n], allo[m][n], need[n][m];\n</code></pre>\n\n<p>Now when you create your arrays, <code>n</code> and <code>m</code> will be initialized with the values read from the file.</p>\n\n<hr>\n\n<p>If you want to declare your arrays before reading <code>n</code> and <code>m</code>, then you should use pointers, read <code>n</code> and <code>m</code> and then <a href=\"https://gsamaras.wordpress.com/code/2d-dynamic-array-c/\" rel=\"nofollow\">dynamically allocate the arrays</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 5563, "user_id": 5808727, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a8de86a7bb2dbb67425971abc1e1cef8?s=128&d=identicon&r=PG&f=1", "display_name": "Pooya", "link": "https://stackoverflow.com/users/5808727/pooya"}, "is_accepted": false, "score": 0, "last_activity_date": 1459961045, "last_edit_date": 1459961045, "creation_date": 1459960636, "answer_id": 36457183, "question_id": 36456959, "link": "https://stackoverflow.com/questions/36456959/c-segmentation-fault-with-fscanf/36457183#36457183", "title": "C Segmentation fault with fscanf", "body": "<p>Since m,n is not initialized when you declared your arrays at the top of your file:</p>\n\n<pre><code>int avail[n];\nint max[m][n], allo[m][n], need[n][m];\n</code></pre>\n\n<p>as @WeatherVane stated in the comments, you will get undefined behavior. Maybe you are overwriting some other part of the programs memory (who knows it is undefined!).</p>\n\n<p>If you need dynamic array creation you should do something like the following:</p>\n\n<pre><code>int* avail;\n...\nfscanf(fp, \"%d %d\", &amp;n, &amp;m);\navail = (int*)malloc(n*sizeof(int));\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 1, "creation_date": 1459961190, "post_id": 36457275, "comment_id": 60527086, "body": "You forgot to <code>return arr;</code>."}, {"owner": {"reputation": 1401, "user_id": 5167809, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/11119c2f395ad6c150a5bb781b5ee23e?s=128&d=identicon&r=PG&f=1", "display_name": "Sendhilkumar Alalasundaram", "link": "https://stackoverflow.com/users/5167809/sendhilkumar-alalasundaram"}, "reply_to_user": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1459961535, "post_id": 36457275, "comment_id": 60527283, "body": "Thanks for the heads up! You could have directly edited it too!"}], "tags": [], "owner": {"reputation": 1401, "user_id": 5167809, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/11119c2f395ad6c150a5bb781b5ee23e?s=128&d=identicon&r=PG&f=1", "display_name": "Sendhilkumar Alalasundaram", "link": "https://stackoverflow.com/users/5167809/sendhilkumar-alalasundaram"}, "is_accepted": false, "score": 0, "last_activity_date": 1459961491, "last_edit_date": 1459961491, "creation_date": 1459960873, "answer_id": 36457275, "question_id": 36456959, "link": "https://stackoverflow.com/questions/36456959/c-segmentation-fault-with-fscanf/36457275#36457275", "title": "C Segmentation fault with fscanf", "body": "<p>When you initialize max,allo and need. the value of n and m is not defined.</p>\n\n<p>You can define <code>max</code>, <code>allo</code> and <code>need</code> as <code>int**</code>.</p>\n\n<p>After you have scanned the value of n and m, you can invoke the below function to allocate memory for above 2D arrays.</p>\n\n<pre><code>int ** get2DintArray(int r, int c){\n    int **arr = (int **)malloc(r * sizeof(int *));\n    for (i=0; i&lt;r; i++)\n         arr[i] = (int *)malloc(c * sizeof(int));\n    return arr;\n}\n</code></pre>\n\n<p>For. e.g:- </p>\n\n<pre><code>allo = get2DintArray(m,n);\nneed = get2DintArray(n,m);\n</code></pre>\n\n<p>This approach will be handy for higher values of n and m, where the stack memory may not be sufficient, because you are using heap memory in this case.</p>\n"}], "owner": {"reputation": 59, "user_id": 5438244, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/DENx0.jpg?s=128&g=1", "display_name": "CrimsonMoth", "link": "https://stackoverflow.com/users/5438244/crimsonmoth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 441, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1459977415, "creation_date": 1459960050, "last_edit_date": 1459977415, "question_id": 36456959, "link": "https://stackoverflow.com/questions/36456959/c-segmentation-fault-with-fscanf", "title": "C Segmentation fault with fscanf", "body": "<p>Trying to read an input .txt file with using fscanf, and store the line content to the int variable, array, and 2D array, so I can use the value to do computation later. I think the problem over here is because I did not handle the \"EOF\" with using fscanf? </p>\n\n<p>Here is my code:</p>\n\n<pre><code>int main(){\nFILE *fp;\n\nint n;  // # resources\nint m;  // # processes\nint avail[n];\nint max[m][n], allo[m][n];\nchar temp1[10];\n\nfp = fopen(\"test.txt\", \"r\");\nif (fp == NULL){\n    exit(EXIT_FAILURE);\n}\n\n\nfscanf(fp, \"%d %d\", &amp;n, &amp;m);\nprintf(\"%d %d\", n, m);\nprintf(\"\\n\");\n\n// Store the second line content to allo[]\nfor(int i = 0; i &lt; n; i++){\n    fscanf(fp, \"%s\", temp1);\n    avail[i] = atoi(temp1);\n    printf(\"%d \", avail[i]);\n}\nprintf(\"\\n\");\n\n// Store the line3-7 content to 2D max[][]\nfor(int i = 0; i &lt; m; i++){\n    for(int j = 0; j &lt; n; j++){\n        fscanf(fp, \"%s\", temp1);\n        max[i][j] = atoi(temp1);\n        printf(\"%d \", max[i][j]);\n    }\n    printf(\"\\n\");\n}\n\n// Store the line8-12 content to 2D allo\nfor(int i = 0; i &lt; m; i++){\n        for(int j = 0; i &lt; n; j++){\n            fscanf(fp, \"%s\", temp1);\n            allo[i][j] = atoi(temp1);\n            printf(\"%d \", allo[i][j]);\n        }\n        printf(\"\\n\");\n}\n\n\nfclose(fp);\nreturn 0;\n}\n</code></pre>\n\n<p>Here is the .txt input file:</p>\n\n<pre><code>3 5\n9 6 3\n5 5 2\n4 1 3\n8 3 4\n5 4 2\n4 4 3\n0 1 0\n1 1 0\n1 0 2\n0 0 1\n1 2 2\n</code></pre>\n\n<p>And here is the output:</p>\n\n<pre><code>3 5\n9 6 3\n5 5 2\n4 1 3\n8 3 4\n5 4 2\n4 4 3\nSegmentation fault: 11\n</code></pre>\n"}, {"tags": ["c", "pointers", "duplicates", "singly-linked-list"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1459960061, "post_id": 36456836, "comment_id": 60526344, "body": "One thing wrong is that you are leaking memory."}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1459960241, "post_id": 36456836, "comment_id": 60526478, "body": "It looks like you&#39;re only checking for adjacent duplicates."}, {"owner": {"reputation": 538, "user_id": 1665886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17e1ddc9e7284c08982437f63fcf0e2d?s=128&d=identicon&r=PG", "display_name": "CarlH", "link": "https://stackoverflow.com/users/1665886/carlh"}, "edited": false, "score": 0, "creation_date": 1459960243, "post_id": 36456836, "comment_id": 60526479, "body": "you&#39;re only skipping consecutive dupes"}, {"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1459960436, "post_id": 36456836, "comment_id": 60526600, "body": "Code is <i>not</i> comparing adjacent nodes; it is comparing each node to the first (<code>t</code> doesn&#39;t change until <i>after</i> the <code>while</code> loop)."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1459960683, "post_id": 36456836, "comment_id": 60526755, "body": "@Pranav Saxena  Is it a singly-linked list?"}, {"owner": {"reputation": 538, "user_id": 1665886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17e1ddc9e7284c08982437f63fcf0e2d?s=128&d=identicon&r=PG", "display_name": "CarlH", "link": "https://stackoverflow.com/users/1665886/carlh"}, "reply_to_user": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1459960845, "post_id": 36456836, "comment_id": 60526878, "body": "@ScottHunter the while condition compares adjacent nodes, moves to the next if the same, loop ends when different, outer loop moves on."}, {"owner": {"reputation": 538, "user_id": 1665886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17e1ddc9e7284c08982437f63fcf0e2d?s=128&d=identicon&r=PG", "display_name": "CarlH", "link": "https://stackoverflow.com/users/1665886/carlh"}, "edited": false, "score": 0, "creation_date": 1459961062, "post_id": 36456836, "comment_id": 60527013, "body": "Granted, not the most elegant logic ... suggest what so many others suggest to newbie coders - draw the picture first!"}, {"owner": {"reputation": 13, "user_id": 5355411, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/4b0ac7b4b39eb154f9e6fe9cf33b9fd5?s=128&d=identicon&r=PG&f=1", "display_name": "Pranav Saxena", "link": "https://stackoverflow.com/users/5355411/pranav-saxena"}, "reply_to_user": {"reputation": 538, "user_id": 1665886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17e1ddc9e7284c08982437f63fcf0e2d?s=128&d=identicon&r=PG", "display_name": "CarlH", "link": "https://stackoverflow.com/users/1665886/carlh"}, "edited": false, "score": 0, "creation_date": 1459961954, "post_id": 36456836, "comment_id": 60527527, "body": "@CarlH sir how to draw the picture. I mean i am not able to understand meaning of drawing picture"}, {"owner": {"reputation": 538, "user_id": 1665886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17e1ddc9e7284c08982437f63fcf0e2d?s=128&d=identicon&r=PG", "display_name": "CarlH", "link": "https://stackoverflow.com/users/1665886/carlh"}, "edited": false, "score": 0, "creation_date": 1459962203, "post_id": 36456836, "comment_id": 60527672, "body": "@PranavSaxena - I&#39;m not talking about writing code - what I mean is get a whiteboard or pencil and paper, draw the linked list, and work through your logic visually.  Your code will be an embodiment of how you do it on paper."}, {"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "reply_to_user": {"reputation": 538, "user_id": 1665886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17e1ddc9e7284c08982437f63fcf0e2d?s=128&d=identicon&r=PG", "display_name": "CarlH", "link": "https://stackoverflow.com/users/1665886/carlh"}, "edited": false, "score": 0, "creation_date": 1459962854, "post_id": 36456836, "comment_id": 60528089, "body": "@CarlH: That might be the code&#39;s intent, but that is not what it is doing, for reasons I explained in my original comment: it is comparing the <code>data</code> for <code>p</code> and <code>t</code>, but <code>t</code> never changes within the main <code>while</code> loop."}, {"owner": {"reputation": 538, "user_id": 1665886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17e1ddc9e7284c08982437f63fcf0e2d?s=128&d=identicon&r=PG", "display_name": "CarlH", "link": "https://stackoverflow.com/users/1665886/carlh"}, "reply_to_user": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1459963440, "post_id": 36456836, "comment_id": 60528485, "body": "@ScottHunter: t=t-&gt;next before the recursive call, then the new t in the new stack frame is set to the t that was passed in as head."}, {"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "reply_to_user": {"reputation": 538, "user_id": 1665886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17e1ddc9e7284c08982437f63fcf0e2d?s=128&d=identicon&r=PG", "display_name": "CarlH", "link": "https://stackoverflow.com/users/1665886/carlh"}, "edited": false, "score": 0, "creation_date": 1459963610, "post_id": 36456836, "comment_id": 60528600, "body": "@CarlH: True but irrelevant: in every call, <code>p</code> starts as <code>t-&gt;next</code>, and <code>p</code> changes while <code>t</code> does not, so the code is <i>not</i> only comparing adjacent nodes."}, {"owner": {"reputation": 538, "user_id": 1665886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17e1ddc9e7284c08982437f63fcf0e2d?s=128&d=identicon&r=PG", "display_name": "CarlH", "link": "https://stackoverflow.com/users/1665886/carlh"}, "reply_to_user": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1459965932, "post_id": 36456836, "comment_id": 60530063, "body": "@ScottHunter: that&#39;s right, I was a little sloppy in my description - it is only removing adjacent duplicates.  It compares nodes only as long as their data matches, then stops, so duplicates further down the line don&#39;t get compared.  I was considering that as adjacent, since as each adjacent node is removed the next one becomes adjacent.  Fine detail but you are correct."}, {"owner": {"reputation": 538, "user_id": 1665886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17e1ddc9e7284c08982437f63fcf0e2d?s=128&d=identicon&r=PG", "display_name": "CarlH", "link": "https://stackoverflow.com/users/1665886/carlh"}, "edited": false, "score": 0, "creation_date": 1459966046, "post_id": 36456836, "comment_id": 60530127, "body": "And while we&#39;re thrashing through spaghetti logic someone else just writes the code ..."}, {"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "reply_to_user": {"reputation": 538, "user_id": 1665886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17e1ddc9e7284c08982437f63fcf0e2d?s=128&d=identicon&r=PG", "display_name": "CarlH", "link": "https://stackoverflow.com/users/1665886/carlh"}, "edited": false, "score": 0, "creation_date": 1460013881, "post_id": 36456836, "comment_id": 60549623, "body": "@CarlH: Once p changes in the outer loop when the data do not match, then comparisons are no longer being made between adjacent nodes, even by your weirdly expanded definition of &quot;adjacent&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": false, "score": 0, "last_activity_date": 1459961399, "creation_date": 1459961399, "answer_id": 36457446, "question_id": 36456836, "link": "https://stackoverflow.com/questions/36456836/delete-duplicate-elements-in-linked-list/36457446#36457446", "title": "delete duplicate elements in linked list", "body": "<p>You should have a nested while:</p>\n\n<pre><code>p= head;\nwhile(p)\n{\n    q=p-&gt;next;\n    while(q)\n    {\n        if (p-&gt;data==q-&gt;data)\n            ...  //remove\n        q= q-&gt;next;\n    }\n    p= p-&gt;next;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 1, "last_activity_date": 1459962201, "last_edit_date": 1459962201, "creation_date": 1459961429, "answer_id": 36457460, "question_id": 36456836, "link": "https://stackoverflow.com/questions/36456836/delete-duplicate-elements-in-linked-list/36457460#36457460", "title": "delete duplicate elements in linked list", "body": "<p>Try the following function (without testing)</p>\n\n<pre><code>void don( struct node *head )\n{\n    for ( struct node *first = head; first != NULL; first = first-&gt;next )\n    {\n        for ( struct node *current = first; current-&gt;next != NULL; )\n        {\n            if ( current-&gt;next-&gt;data == first-&gt;data )\n            {\n                struct node *tmp = current-&gt;next;\n                current-&gt;next = current-&gt;next-&gt;next;\n                free( tmp );\n            }\n            else\n            {\n                current = current-&gt;next;\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>As for your function then even the beginning of the function is wrong</p>\n\n<pre><code>void don(struct node *head)\n{\nstruct node *t,*p,*q;\nt=head;\np=t-&gt;next;//p is to check each node!\n//...\n</code></pre>\n\n<p>In general <code>head</code> can be equal to <code>NULL</code> In this case this statement <code>p=t-&gt;next;</code> results in undefined behaviour.</p>\n\n<p>EDIT: If the function must be recursive then it can look the following way</p>\n\n<pre><code>void don( struct node *head )\n{\n    if ( head )\n    {\n        for ( struct node *current = head; current-&gt;next != NULL; )\n        {\n            if ( current-&gt;next-&gt;data == head-&gt;data )\n            {\n                struct node *tmp = current-&gt;next;\n                current-&gt;next = current-&gt;next-&gt;next;\n                free( tmp );\n            }\n            else\n            {\n                current = current-&gt;next;\n            }\n        }\n\n        don( head-&gt;next );\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 5355411, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/4b0ac7b4b39eb154f9e6fe9cf33b9fd5?s=128&d=identicon&r=PG&f=1", "display_name": "Pranav Saxena", "link": "https://stackoverflow.com/users/5355411/pranav-saxena"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 427, "favorite_count": 0, "accepted_answer_id": 36457460, "answer_count": 2, "score": 1, "last_activity_date": 1459962436, "creation_date": 1459959707, "last_edit_date": 1459962436, "question_id": 36456836, "link": "https://stackoverflow.com/questions/36456836/delete-duplicate-elements-in-linked-list", "title": "delete duplicate elements in linked list", "body": "<p>I have a list:\n  <br>1-2-3-3-4-5-6-6-2-7-8-6-9-10-9-NULL //Before<br>I wnt to make it as following:<br>\n      1-2-3-4-5-6-7-8-9-10-NULL //After<br>\nI have written following code:<br><br></p>\n\n<pre><code>void don(struct node *head)\n{\nstruct node *t,*p,*q;\nt=head;\np=t-&gt;next;//p is to check each node!\nq=t;//q is used to take care of previous node!\nwhile(p!=NULL)\n{\n    if(p-&gt;data==t-&gt;data)\n    {\n        while(p-&gt;data==t-&gt;data)\n        {\n            p=p-&gt;next;\n        }\n        q-&gt;next=p;\n        q=q-&gt;next;\n\n    }\n    else\n    {\n        p=p-&gt;next;\n        q=q-&gt;next;\n    }\n}\nt=t-&gt;next;\nif(t!=NULL)\n    don(t);\n}\n</code></pre>\n\n<p>But the output is :<br>\n1-2-3-4-5-6-7-8-6-9-10\n<br>Please tell me what is wrong in the code and please correct it :).</p>\n"}, {"tags": ["c", "arrays", "string", "file"], "comments": [{"owner": {"reputation": 5563, "user_id": 5808727, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a8de86a7bb2dbb67425971abc1e1cef8?s=128&d=identicon&r=PG&f=1", "display_name": "Pooya", "link": "https://stackoverflow.com/users/5808727/pooya"}, "edited": false, "score": 0, "creation_date": 1459957574, "post_id": 36455977, "comment_id": 60524518, "body": "for &quot;lines[lineNum] = line;&quot; you should use strcpy instead"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1459958075, "post_id": 36455977, "comment_id": 60524932, "body": "<code>lines[lineNum] = malloc(...);</code> lines[] is still uninitialised at this point."}, {"owner": {"reputation": 5563, "user_id": 5808727, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a8de86a7bb2dbb67425971abc1e1cef8?s=128&d=identicon&r=PG&f=1", "display_name": "Pooya", "link": "https://stackoverflow.com/users/5808727/pooya"}, "edited": false, "score": 0, "creation_date": 1459958117, "post_id": 36455977, "comment_id": 60524958, "body": "your data structure would be a better idea but quicker solution is to read the files two times, first time to discover the number of lines and the second one for filling the variables"}, {"owner": {"reputation": 4125, "user_id": 3426025, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yxLev.png?s=128&g=1", "display_name": "BeyelerStudios", "link": "https://stackoverflow.com/users/3426025/beyelerstudios"}, "edited": false, "score": 0, "creation_date": 1459958266, "post_id": 36455977, "comment_id": 60525057, "body": "lines is just an array of pointers, start at some size and reallocate/grow it when you reach capacity"}, {"owner": {"reputation": 1031, "user_id": 3134549, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/CANRR.jpg?s=128&g=1", "display_name": "nitowa", "link": "https://stackoverflow.com/users/3134549/nitowa"}, "reply_to_user": {"reputation": 4125, "user_id": 3426025, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yxLev.png?s=128&g=1", "display_name": "BeyelerStudios", "link": "https://stackoverflow.com/users/3426025/beyelerstudios"}, "edited": false, "score": 0, "creation_date": 1459958454, "post_id": 36455977, "comment_id": 60525202, "body": "@BeyelerStudios That&#39;s effectively implementing an ArrayList. I was just wondering if C offers some convenient way of doing what I&#39;m trying to do."}, {"owner": {"reputation": 4125, "user_id": 3426025, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yxLev.png?s=128&g=1", "display_name": "BeyelerStudios", "link": "https://stackoverflow.com/users/3426025/beyelerstudios"}, "edited": false, "score": 0, "creation_date": 1459958488, "post_id": 36455977, "comment_id": 60525231, "body": "check <code>realloc</code>, and no, it&#39;s no ArrayList - that would be a linked list of arrays"}, {"owner": {"reputation": 1031, "user_id": 3134549, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/CANRR.jpg?s=128&g=1", "display_name": "nitowa", "link": "https://stackoverflow.com/users/3134549/nitowa"}, "edited": false, "score": 0, "creation_date": 1459958608, "post_id": 36455977, "comment_id": 60525335, "body": "Thanks, that one seems extremely helpful indeed."}], "answers": [{"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 1, "last_activity_date": 1459988793, "last_edit_date": 1459988793, "creation_date": 1459959271, "answer_id": 36456664, "question_id": 36455977, "link": "https://stackoverflow.com/questions/36455977/c-read-files-line-by-line-into-array-of-strings-and-sort/36456664#36456664", "title": "C read file(s) line-by-line into array of Strings and sort", "body": "<blockquote>\n<pre><code>//How do I initialize an array of 1024byte-Strings with an unknown amount of fields?\n</code></pre>\n</blockquote>\n\n<p>Obviously, you don't.  If you initialize something, then at that point you know all the details of that thing.</p>\n\n<p>I suppose you're asking how to reserve memory for an unknown number of string pointers, but again, you don't.  Moreover, note that the 1024-byte restriction is unnecessary for an array of <code>char *</code> such as you propose; it would be relevant only if you intended to structure the data as a 2D array of <code>char</code>.  After you have read a string, you <em>know</em> how much space it requires, so for example, I observe that this code ...</p>\n\n<blockquote>\n<pre><code>    //the lines may be assumed to be a max of 1024 bytes\n    lines[lineNum] = malloc(1024 * sizeof(char)); \n    //lines[lineNum] = line;\n    strcpy(lines[lineNum], line);\n</code></pre>\n</blockquote>\n\n<p>... would be both simpler and without inherent size limit if it were written as:</p>\n\n<pre><code>    lines[linenum] = strdup(line);\n</code></pre>\n\n<p>In fact, that would use less space, too, in the event that your lines average fewer than 1023 characters.</p>\n\n<p>With respect to space for the overall array, what you <em>can</em> do is reserve memory in increments as you go.  That could mean initially <code>malloc()</code>ing space for several strings, and <code>realloc()</code>ing to get more space when needed.  It could also mean initially reading the strings into a linked list of either individual strings or fixed-size arrays of strings, and then building your monolithic array after you know how many strings there are.</p>\n\n<p>The linked list alternative transiently requires twice as much storage for the string pointers, but that's not too bad because the string contents do not need to be duplicated.  This has the advantage of relatively low memory allocation cost relative to some naive implementations of the <code>malloc()</code> / <code>realloc()</code> approach.</p>\n\n<p>Because reallocation usually requires copying all the data (in this case, the pointers) from the one block to a new, larger one, you generally want to limit the number of reallocations.  The usual strategy for this in a case such as yours is to step up the allocation sizes geometrically instead of linearly.  That is, each time you find you need more space, you allocate new space sufficient for, say, twice as many strings as you already have.  The total cost for that scales linearly in the number of data.  Although it may seem wasteful in the event that it turns out you needed only a <em>little</em> more space, it still doesn't require any more space than a linked list + transformation to dynamic array would require.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1459962718, "post_id": 36457152, "comment_id": 60527993, "body": "&quot;counting the number of new line characters&quot; to determine the number of lines in a file results in an off-by-1 error when the last character in a file is not <code>&#39;\\n&#39;</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1459962825, "post_id": 36457152, "comment_id": 60528063, "body": "<code>getline()</code> is a very useful function.  Unfortunately it is not in the standard C library."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1459976279, "post_id": 36457152, "comment_id": 60536260, "body": "Also, <code>getline()</code> can reuse its buffer, so <code>lines[lineNum] = line;</code> isn&#39;t safe - the pointer stored may be the same for multiple lines, and <code>getline()</code> can <code>realloc()</code> it so it may also be invalid.  If you&#39;re going to use non-standard functions, better to use <code>lines[lineNum] = strdup( line );</code>"}, {"owner": {"reputation": 83, "user_id": 4462118, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vWUPy.jpg?s=128&g=1", "display_name": "Rorsch", "link": "https://stackoverflow.com/users/4462118/rorsch"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1459980530, "post_id": 36457152, "comment_id": 60538298, "body": "@chux  Good noticing, totally forgot about that obob. Andrew Henle Didn&#39;t know that getline() uses same buffer, couldn&#39;t find it in man pages, i will edit the post to include obob and this but first one thing. I just read that getline() also doesn&#39;t stop at null characters that are part of line, so after the &#39;getline(&amp;line, &amp;len, fp)&#39; call, line might have more than one &#39;\\0&#39; character. Shouldn&#39;t this make string functions from &lt;string.h&gt; useless, since they expect only one &#39;\\0&#39;, and that it must be last character. <a href=\"https://www.gnu.org/software/libc/manual/html_node/Line-Input.html\" rel=\"nofollow noreferrer\">gnu.org/software/libc/manual/html_node/Line-Input.html</a>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1459980979, "post_id": 36457152, "comment_id": 60538469, "body": "@Rorsch In C, reading characters from a file and encounter a null character is a problem, be it the &quot;last&quot; or not.  BTW: <code>fgets()</code> does the same, does not stop after reading a null character."}, {"owner": {"reputation": 83, "user_id": 4462118, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vWUPy.jpg?s=128&g=1", "display_name": "Rorsch", "link": "https://stackoverflow.com/users/4462118/rorsch"}, "edited": false, "score": 0, "creation_date": 1459984815, "post_id": 36457152, "comment_id": 60539736, "body": "I mixed some things up, thought input functions stop at first &#39;\\0&#39;."}], "tags": [], "owner": {"reputation": 83, "user_id": 4462118, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vWUPy.jpg?s=128&g=1", "display_name": "Rorsch", "link": "https://stackoverflow.com/users/4462118/rorsch"}, "is_accepted": false, "score": 2, "last_activity_date": 1459985136, "last_edit_date": 1459985136, "creation_date": 1459960530, "answer_id": 36457152, "question_id": 36455977, "link": "https://stackoverflow.com/questions/36455977/c-read-files-line-by-line-into-array-of-strings-and-sort/36457152#36457152", "title": "C read file(s) line-by-line into array of Strings and sort", "body": "<p>Two ways i see of solving the problem:</p>\n\n<p>1)\nGo through the file, counting the number of new line characters(and saving it into <strong>nl_count</strong>), then you can allocate lines like this.</p>\n\n<pre><code>int nl_count = 0;\nint c;\n\nwhile ((c = fgetc(fp)) != EOF)\n   if (c == '\\n')\n      nl_count++;\n...\nlines = malloc(nl_count * sizeof(char *));\n</code></pre>\n\n<p><br> This way you will have to cover some special cases in your <strong>cmpstringp</strong> function, cause u may get some lines which only contain '\\n'.\n<br>(<strong>edit</strong>1. Actually in either case you will have to check for this special case.)\n<br>(<strong>edit</strong>2. You can get off by one bug, cause last line doesn't have to end with '\\n'.)</p>\n\n<p>2) \nSet some base size for lines and reallocate for more space when the actual number of lines read reaches this base size.</p>\n\n<pre><code>#define BASE_SIZE 32\n#define GROW_STEP 2\n\nint size;\n\nsize = BASE_SIZE\nlines = malloc(size * sizeof(char *));\n\nlines_read = 0;\nwhile ((read = getline(&amp;line, &amp;len, fp)) != -1) { \n   lines_read++;\n   if (lines_read &gt; size) {\n       size *= GROW_STEP;\n       lines = realloc (lines, size * sizeof (char *));\n   }\n   lines[lineNum] = strdup(line);\n   lineNum++;\n}\n</code></pre>\n\n<p>Notice that in worst case you will allocate twice as much space than it is really needed.\n<br>Also, you should free memory allocated if u use strdup().</p>\n\n<pre><code>...\nfor (i = 0; i &lt; lines_read; i++)\n    free(lines[i]);\n</code></pre>\n"}], "owner": {"reputation": 1031, "user_id": 3134549, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/CANRR.jpg?s=128&g=1", "display_name": "nitowa", "link": "https://stackoverflow.com/users/3134549/nitowa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1870, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1459988793, "creation_date": 1459957385, "last_edit_date": 1459958117, "question_id": 36455977, "link": "https://stackoverflow.com/questions/36455977/c-read-files-line-by-line-into-array-of-strings-and-sort", "title": "C read file(s) line-by-line into array of Strings and sort", "body": "<p>So I want to create a basic C application <code>mysort</code> that takes a list of files, reads each of them line by line into a buffer and sorts the lines alphabetically. The code looks something likes this (plus parameter parsing, etc):</p>\n\n<pre><code>//How do I initialize an array of 1024byte-Strings with an unknown amount of fields?\nchar** lines; \nint lineNum = 0;\n\nfor(int num_files = j; num_files &lt; argc; num_files++){ //iterate through all files\n  FILE * filepointer ;\n  char * line = NULL;\n  size_t len = 0;\n  ssize_t read;\n\n  filepointer = fopen(argv[num_files], \"r\");    \n  if (filepointer == NULL)\n    exit(EXIT_FAILURE);\n\n  //TODO: write each line into a new spot of the array, this try doesn't work!\n\n  while ((read = getline(&amp;line, &amp;len, filepointer)) != -1) { \n    //the lines may be assumed to be a max of 1024 bytes\n    lines[lineNum] = malloc(1024 * sizeof(char)); \n    //lines[lineNum] = line;\n    strcpy(lines[lineNum], line);\n    lineNum++;\n  }\n\n  fclose(fp);\n  if (line)\n    free(line);\n\n  //These values might be wrong, but that isn't the issue I'm adressing\n  //just for illustration\n  qsort(lines , argc - 1, sizeof(char *), cmpstringp) \n\n  //do something with the sorted lines\n}\n</code></pre>\n\n<p>Since I have to use <code>qsort(3)</code>, I need to produce a <code>char**</code> holding all the lines at some point. </p>\n\n<p>What's a good way to accomplish such a task? Do I need my own data structure in order to dynamically store several identical objects?</p>\n\n<p>The <code>lines</code> char** Array isn't initialized here, so the program doesn't work. But since the number of lines is completely unknown at the start of the program it may not be explicitly defined (Unless you know a clever function to figure this out)</p>\n\n<p>The only ways I figured out so far is defining my own dynamic datastructure (e.g. LinkedList) or to parse all files twice in order to determine the number of lines that will be produced.</p>\n\n<p>Both seem very un-elegant to me, but maybe I'm just not accustomed to C code.</p>\n"}, {"tags": ["c", "errno"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1459974917, "post_id": 36455593, "comment_id": 60535414, "body": "First hit on google with &quot;ENOENT c&quot;: <a href=\"http://www.gnu.org/software/libc/manual/html_node/Error-Codes.html\" rel=\"nofollow noreferrer\">gnu.org/software/libc/manual/html_node/Error-Codes.html</a>"}], "answers": [{"tags": [], "owner": {"reputation": 149903, "user_id": 14637, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1904e7096278a10f1dfb3fdc0ceb53cc?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/14637/thomas"}, "is_accepted": false, "score": 4, "last_activity_date": 1459956778, "creation_date": 1459956778, "answer_id": 36455742, "question_id": 36455593, "link": "https://stackoverflow.com/questions/36455593/how-to-import-enoent-so-i-can-return-it/36455742#36455742", "title": "How to import ENOENT so I can return it?", "body": "<pre><code>#include &lt;errno.h&gt;\n</code></pre>\n\n<p>See <a href=\"http://man7.org/linux/man-pages/man3/errno.3.html\" rel=\"nofollow\"><code>errno(3)</code></a>.</p>\n"}, {"tags": [], "owner": {"reputation": 1554, "user_id": 4499919, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/n2u5L.jpg?s=128&g=1", "display_name": "udit043", "link": "https://stackoverflow.com/users/4499919/udit043"}, "is_accepted": false, "score": 1, "last_activity_date": 1464346727, "creation_date": 1464346727, "answer_id": 37481734, "question_id": 36455593, "link": "https://stackoverflow.com/questions/36455593/how-to-import-enoent-so-i-can-return-it/37481734#37481734", "title": "How to import ENOENT so I can return it?", "body": "<p>There are many errors that can occur anytime. You can use <code>#include &lt;errno.h&gt;</code> or you can copy <a href=\"http://paste.debian.net/708151/\" rel=\"nofollow\">this</a> function to your code, it contain all the network errors that may occur anytime.\nYou can also use <code>strerror()</code> and <code>perror()</code> to get description of the error by it's error number.</p>\n"}], "owner": {"reputation": 20382, "user_id": 2199852, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/609a8dbb58ae54662d89367894520a5e?s=128&d=identicon&r=PG&f=1", "display_name": "User", "link": "https://stackoverflow.com/users/2199852/user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1120, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1464346727, "creation_date": 1459956408, "last_edit_date": 1459956959, "question_id": 36455593, "link": "https://stackoverflow.com/questions/36455593/how-to-import-enoent-so-i-can-return-it", "title": "How to import ENOENT so I can return it?", "body": "<p>If an error occurs, I need to return <code>ENOENT</code> but I'm not sure which library this is from and surprisingly nothing came up on a Google search.</p>\n"}, {"tags": ["c", "linux", "process", "fork"], "answers": [{"comments": [{"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 3, "creation_date": 1459956389, "post_id": 36455496, "comment_id": 60523611, "body": "Also consider using <code>processIDs[i]</code>, it&#39;s way easier to read than the pointer-based variant."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 5, "last_activity_date": 1459956159, "creation_date": 1459956159, "answer_id": 36455496, "question_id": 36455313, "link": "https://stackoverflow.com/questions/36455313/multiple-child-processes-from-one-parent-process/36455496#36455496", "title": "Multiple Child Processes from one Parent Process", "body": "<p>The problem is here:</p>\n\n<pre><code>  for(i = 0; i &lt; sizeof(processIDS); i++) {\n    printf(\"%ld\\n\", *(processIDS + i));\n  }\n</code></pre>\n\n<p>Because <code>processIDS</code> is a pointer, it's size is the size of a <code>long *</code>, probably 4 or 8, which is not what you want.  If the value of <code>nProcess</code> is less than this, you'll be reading off the end of the dynamically allocated array, invoking undefined behavior.</p>\n\n<p>You know there are <code>nProcess</code> processes created, so use that for your loop test:</p>\n\n<pre><code>  for(i = 0; i &lt; nProcess; i++) {\n    printf(\"%ld\\n\", *(processIDS + i));\n  }\n</code></pre>\n"}], "owner": {"reputation": 335, "user_id": 3709339, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b38525e811ad102d2f7d6a919ef5c756?s=128&d=identicon&r=PG&f=1", "display_name": "Silvestrini", "link": "https://stackoverflow.com/users/3709339/silvestrini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1923, "favorite_count": 0, "accepted_answer_id": 36455496, "answer_count": 1, "score": 1, "last_activity_date": 1459960468, "creation_date": 1459955673, "last_edit_date": 1459960468, "question_id": 36455313, "link": "https://stackoverflow.com/questions/36455313/multiple-child-processes-from-one-parent-process", "title": "Multiple Child Processes from one Parent Process", "body": "<p>I'm implementing a simple parent/child process program using fork. My goal is to create a user input number of child processes from a single parent and store their PIDs in a dynamic array. I manage to create the child processes (I think) using fork and store their PIDS. However, when I store the PIDs, I also store the 0 PID and what I believe another PID related to the processes yet this number is quite bigger than the child and parent. </p>\n\n<p>How come this happens when clearly this is only done inside the parent process? </p>\n\n<pre><code>void createProcesses(int nProcess) {\n  int i;\n  int PID;\n  processIDS = calloc(nProcess, sizeof(long));\n\n  printf(\"*****Creating Processes*****\\n\");\n\n  printf(\"Parent Process: PID %d\\n\", getpid());\n  for (i = 0; i &lt; nProcess; i++) {\n    PID = fork();\n    if (PID == 0) {\n      printf(\"Child Process: PID %d\\n\", getpid());\n      while(1){}\n    }\n    else if(PID != 0) {\n      // sleep(3);\n      // printf(\"Number of child processes created: %d\\n\", nProcess);\n      // updateProcessList();\n      *(processIDS + i) = PID;\n      printf(\"%d\\n\", PID);\n    }\n  }\n  for(i = 0; i &lt; sizeof(processIDS); i++) {\n    printf(\"%ld\\n\", *(processIDS + i));\n  }\n  while(1) {\n    sleep(5);\n    updateProcessList();\n  }\n}\n\nprocessIDS is a long * global variable.\n</code></pre>\n"}, {"tags": ["c", "postgresql", "dll", "libpq"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1459954809, "post_id": 36454855, "comment_id": 60522374, "body": "The DLL files needs to be in the same directory as the executable file, or in a system directory where Windows searches by default."}, {"owner": {"reputation": 19, "user_id": 4725422, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kAS1J.jpg?s=128&g=1", "display_name": "Cristian", "link": "https://stackoverflow.com/users/4725422/cristian"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1459955423, "post_id": 36454855, "comment_id": 60522853, "body": "4 more missing after copy paste dlls to the same exe folder  comerr32.dll gssapi32.dll libiconv-2.dll"}, {"owner": {"reputation": 19, "user_id": 4725422, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kAS1J.jpg?s=128&g=1", "display_name": "Cristian", "link": "https://stackoverflow.com/users/4725422/cristian"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1459955711, "post_id": 36454855, "comment_id": 60523093, "body": "unfortunately krb5_32.dll is not in postgres folder nor commer32 ,gssapi32, only the libiconv is.         but we are getting closer ."}], "owner": {"reputation": 19, "user_id": 4725422, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kAS1J.jpg?s=128&g=1", "display_name": "Cristian", "link": "https://stackoverflow.com/users/4725422/cristian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 275, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1459960891, "creation_date": 1459954567, "last_edit_date": 1459960891, "question_id": 36454855, "link": "https://stackoverflow.com/questions/36454855/libpq-c-postgres-interface-crash", "title": "libpq c postgres interface crash", "body": "<p>I'm a IT student doing some <strong>C postgres</strong> interface.\nUsing codelite  I'm doing the following on a <strong>win10</strong> machine:</p>\n\n<ul>\n<li>compile settings .include path : \".../postgresql/../include\"  and\nI've changed the backslashes from \\ to /</li>\n<li>link settings .library search path : \"../postgresql/../lib\"</li>\n<li>linker options \"-lpq\"</li>\n</ul>\n\n<p>Running a standard following code :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;libpq-fe.h&gt;\n#include &lt;string&gt;\n\nint     main() {\nPGconn          *conn;\nPGresult        *res;\nint             rec_count;\nint             row;\nint             col;\n\n\n\n    conn = PQconnectdb(\"dbname=ljdata host=localhost ser=dataman                        password=postgre\");\n\n    if (PQstatus(conn) == CONNECTION_BAD) {\n            puts(\"We were unable to connect to the database\");\n            exit(0);\n    }\n\n   res = PQexec(conn,\n            \"update people set phonenumber=\\'5055559999\\' where id=3\");\n\n     res = PQexec(conn,\n             \"select lastname,firstname,phonenumber from people order by id\");\n\n     if (PQresultStatus(res) != PGRES_TUPLES_OK) {\n             puts(\"We did not get any data!\");\n             exit(0);\n     }\n\n     rec_count = PQntuples(res);\n\n    printf(\"We received %d records.\\n\", rec_count);\n     puts(\"==========================\");\n\n     for (row=0; row&lt;rec_count; row++) {\n             for (col=0; col&lt;3; col++) {\n                     printf(\"%s\\t\", PQgetvalue(res, row, col));\n             }\n             puts(\"\");\n     }\n\n     puts(\"==========================\");\n\n     PQclear(res);\n\n     PQfinish(conn);\n\n     return 0;\n     }\n</code></pre>\n\n<p>It should tell me that is connected or not on a simple console output.</p>\n\n<p>But the console window of the exe file crashed <strong>libpq.dll not found</strong>,\nafter copying the <strong>.dll</strong> from <strong>bin (postgres)</strong> to include,</p>\n\n<p>4 more dll are missing:  </p>\n\n<ol>\n<li>libintl-8.dll</li>\n<li>libeay32.dll</li>\n<li>ssleay32.dll</li>\n<li>krb5_32.dll</li>\n</ol>\n\n<p>What should I do? Copy all of the dll from postgres directory to some windows directory?</p>\n\n<p>If anyone can point me how to configure codeblocks so that it links <strong>libpq-fe.h</strong>, I would apreciate alot. </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1459955577, "post_id": 36454692, "comment_id": 60522977, "body": "<code>strptr-&gt;str-&gt;&quot;hello&quot; or strptr-&gt;&quot;hello&quot;&lt;-str</code> - none of these is valid. What is your problem? How to copy one variable to another? Please read a C book. Asking particular questions here will not give you the whole picture."}], "answers": [{"comments": [{"owner": {"reputation": 3524, "user_id": 4085019, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/NAJQz.jpg?s=128&g=1", "display_name": "PseudoAj", "link": "https://stackoverflow.com/users/4085019/pseudoaj"}, "edited": false, "score": 0, "creation_date": 1459954538, "post_id": 36454741, "comment_id": 60523018, "body": "Daisy chaining like @DevSolar suggested works but for more elaborate answers check this link: <a href=\"http://stackoverflow.com/questions/3815400/c-pointers-point-to-the-same-address\" title=\"c pointers point to the same address\">stackoverflow.com/questions/3815400/&hellip;</a>"}], "tags": [], "owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "is_accepted": false, "score": 1, "last_activity_date": 1459955370, "last_edit_date": 1459955370, "creation_date": 1459954330, "answer_id": 36454741, "question_id": 36454692, "link": "https://stackoverflow.com/questions/36454692/can-there-be-two-pointers-pointing-the-same-string/36454741#36454741", "title": "can there be two pointers pointing the same string?", "body": "<pre><code>char * str = \"hello\";\n</code></pre>\n\n<p>You now want a second pointer just like the first. So declare it just like the first, <code>char * strptr</code>.</p>\n\n<p>Now it should point at the same thing as well. Now how would you do that? How do you make some thing B, which has the same type as A, hold the same information as A?</p>\n\n<p>You assign it.</p>\n\n<pre><code>char * strptr = str;\n</code></pre>\n\n<p>Take note that both <code>str</code> and <code>strptr</code> are currently pointing at read-only memory, and should <em>probably</em> be <code>const</code> for that reason. (Unless you really know what you're doing and want to use the pointers for pointing at something else later on.)</p>\n"}, {"tags": [], "owner": {"reputation": 62673, "user_id": 492336, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/UjW5c.png?s=128&g=1", "display_name": "sashoalm", "link": "https://stackoverflow.com/users/492336/sashoalm"}, "is_accepted": false, "score": 3, "last_activity_date": 1459954372, "creation_date": 1459954372, "answer_id": 36454764, "question_id": 36454692, "link": "https://stackoverflow.com/questions/36454692/can-there-be-two-pointers-pointing-the-same-string/36454764#36454764", "title": "can there be two pointers pointing the same string?", "body": "<p>Yes, 2 pointers can indeed point to the same number.</p>\n\n<pre><code>const char *a = \"str\";\nconst char *b = a;\n</code></pre>\n\n<p>They now point to the same string.</p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 4894523, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/btFLg.jpg?s=128&g=1", "display_name": "WoW", "link": "https://stackoverflow.com/users/4894523/wow"}, "edited": false, "score": 0, "creation_date": 1459956397, "post_id": 36454774, "comment_id": 60523615, "body": "only this code shows exactly what I want! Thank you so much"}], "tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": false, "score": 1, "last_activity_date": 1459954387, "creation_date": 1459954387, "answer_id": 36454774, "question_id": 36454692, "link": "https://stackoverflow.com/questions/36454692/can-there-be-two-pointers-pointing-the-same-string/36454774#36454774", "title": "can there be two pointers pointing the same string?", "body": "<p>And the other part of the question:</p>\n\n<pre><code>char * str = \"hello\";\nchar ** strptr = &amp;str;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 408, "user_id": 6144798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5dec51215a7d82b761592c55cf2e49da?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/6144798/stefan"}, "is_accepted": false, "score": 1, "last_activity_date": 1459954556, "creation_date": 1459954556, "answer_id": 36454843, "question_id": 36454692, "link": "https://stackoverflow.com/questions/36454692/can-there-be-two-pointers-pointing-the-same-string/36454843#36454843", "title": "can there be two pointers pointing the same string?", "body": "<p>You can do</p>\n\n<pre><code>char *strptr = str;\n</code></pre>\n\n<p>So you will get strptr -> \"hello\" &lt;- str</p>\n"}, {"comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1459957044, "post_id": 36455485, "comment_id": 60524106, "body": "since when <code>cout</code> hsa been C?"}, {"owner": {"reputation": 11, "user_id": 4894523, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/btFLg.jpg?s=128&g=1", "display_name": "WoW", "link": "https://stackoverflow.com/users/4894523/wow"}, "edited": false, "score": 0, "creation_date": 1459957884, "post_id": 36455485, "comment_id": 60524781, "body": "Thank you~!! great help! if you don&#39;t mind, can I ask little more?"}, {"owner": {"reputation": 11, "user_id": 4894523, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/btFLg.jpg?s=128&g=1", "display_name": "WoW", "link": "https://stackoverflow.com/users/4894523/wow"}, "edited": false, "score": 0, "creation_date": 1459958234, "post_id": 36455485, "comment_id": 60525035, "body": "if you don&#39;t mind, can I ask little more? <code>char *str = &quot;str&quot;; \tchar **strptr = &amp;str; \tchar a[] = &quot;abc&quot;; \t*strptr = a; \tprintf(&quot;%s&quot;, *strptr); \tstr = &quot;no&quot;; \tprintf(&quot;%s&quot;, *strptr); </code>"}, {"owner": {"reputation": 11, "user_id": 4894523, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/btFLg.jpg?s=128&g=1", "display_name": "WoW", "link": "https://stackoverflow.com/users/4894523/wow"}, "edited": false, "score": 0, "creation_date": 1459958304, "post_id": 36455485, "comment_id": 60525093, "body": "why the result of this code is abcno? (i want abcabc..)"}, {"owner": {"reputation": 1, "user_id": 6163566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c19ea298e7e8822bd606a5b32070afc?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Bonilla", "link": "https://stackoverflow.com/users/6163566/christian-bonilla"}, "edited": false, "score": 0, "creation_date": 1459959365, "post_id": 36455485, "comment_id": 60525870, "body": "You&#39;re changing the value of the variable itself here <code>*strptr = a;</code> and here <code>str =&quot;no&quot;</code>. Pointers don&#39;t contain the value of the variable itself, they only point to the memory address where the value is stored. You might want to take a read about how pointers work, <a href=\"http://www.tutorialspoint.com/cprogramming/c_pointers.htm\" rel=\"nofollow noreferrer\">here</a> and <a href=\"http://beginnersbook.com/2014/01/c-pointer-to-pointer/\" rel=\"nofollow noreferrer\">here</a> are some resources."}], "tags": [], "owner": {"reputation": 1, "user_id": 6163566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c19ea298e7e8822bd606a5b32070afc?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Bonilla", "link": "https://stackoverflow.com/users/6163566/christian-bonilla"}, "is_accepted": false, "score": 0, "last_activity_date": 1459959036, "last_edit_date": 1459959036, "creation_date": 1459956118, "answer_id": 36455485, "question_id": 36454692, "link": "https://stackoverflow.com/questions/36454692/can-there-be-two-pointers-pointing-the-same-string/36455485#36455485", "title": "can there be two pointers pointing the same string?", "body": "<p>Pointers reference a memory address. You can obtain the memory address itself by using the <code>&amp;</code> operator, double pointers point to a memory address that points to another memory address so you would have what you described as <code>strcpr-&gt;str-&gt;\"hello\"</code> which is a pointer that points to another pointer. Here's an example:</p>\n\n<pre><code>char *str = \"Hello!\";\nchar **strp = &amp;str;\n// The memory address for the string\nprintf(\"%p\\n\", &amp;str);\n// This would print the same address as the previous command as\n// they both reference the same string\nprintf(\"%p\\n\", strp);\n// This prints the value of your string\nprintf(\"%s\\n\", *strp);\n</code></pre>\n\n<p>Notice how the double pointer points to the memory address of the first string. The output should be <code>Hello!</code>.</p>\n\n<p>Edit: C syntax</p>\n"}], "owner": {"reputation": 11, "user_id": 4894523, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/btFLg.jpg?s=128&g=1", "display_name": "WoW", "link": "https://stackoverflow.com/users/4894523/wow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 742, "favorite_count": 0, "closed_date": 1459959323, "answer_count": 5, "score": -7, "last_activity_date": 1459959036, "creation_date": 1459954248, "question_id": 36454692, "link": "https://stackoverflow.com/questions/36454692/can-there-be-two-pointers-pointing-the-same-string", "closed_reason": "Needs details or clarity", "title": "can there be two pointers pointing the same string?", "body": "<pre><code>char *str = \"hello\";\n</code></pre>\n\n<p>In a code like this, can I make another pointer\n(for example, </p>\n\n<pre><code>char *strptr = NULL;\n</code></pre>\n\n<p>and make this to point String str, \"hello\"? (like this:  <strong>strptr->str->\"hello\"</strong> or <strong>strptr->\"hello\"&lt;-str</strong>)</p>\n\n<p>I tried double pointer, or changing the pointer type.. but all failed</p>\n"}, {"tags": ["c", "xcode", "fgets"], "comments": [{"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 3, "creation_date": 1459954323, "post_id": 36454527, "comment_id": 60521994, "body": "By the way, those calls to <code>fflush(stdin)</code> don&#39;t help.  I would take them out."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1459954466, "post_id": 36454527, "comment_id": 60522104, "body": "Perhaps you wanted to <code>fflush</code> <b><code>stdout</code></b> instead!"}, {"owner": {"reputation": 80, "user_id": 6167164, "user_type": "registered", "profile_image": "https://graph.facebook.com/562785363890917/picture?type=large", "display_name": "Ivan Suprynovich", "link": "https://stackoverflow.com/users/6167164/ivan-suprynovich"}, "edited": false, "score": 0, "creation_date": 1459958507, "post_id": 36454527, "comment_id": 60525247, "body": "user3121023, thank You very much)"}], "owner": {"reputation": 80, "user_id": 6167164, "user_type": "registered", "profile_image": "https://graph.facebook.com/562785363890917/picture?type=large", "display_name": "Ivan Suprynovich", "link": "https://stackoverflow.com/users/6167164/ivan-suprynovich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "closed_date": 1459969058, "answer_count": 0, "score": 0, "last_activity_date": 1459953876, "creation_date": 1459953876, "question_id": 36454527, "link": "https://stackoverflow.com/questions/36454527/c-fgets-skips-the-first-input", "closed_reason": "Duplicate", "title": "C: fgets skips the first input", "body": "<p>I use Xcode 7.3 to program on C. I have a problem in my code: </p>\n\n<pre><code> printf(\"Enter first name: \");\n fflush(stdin);      //here I use getchar() instead of fflush(stdin)\n fgets(temp-&gt;firstName, KOL, stdin);\n (temp-&gt;firstName)[strlen(temp-&gt;firstName)-1]='\\0'; \n fflush(stdin);\n printf(\"Enter last name: \");\n fflush(stdin);\n fgets(temp-&gt;lastName, KOL, stdin);\n (temp-&gt;lastName)[strlen(temp-&gt;lastName)-1]='\\0';\n</code></pre>\n\n<p>Compiler skips input of the first name (fflush(stdin) doesn't help). I found one solution, but it's not the best one: I use getchar() before input of the first name. If you now the reason of this problem and know, how to solve, please help me.</p>\n"}, {"tags": ["c", "int", "boolean"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1459952454, "post_id": 36453910, "comment_id": 60520440, "body": "Maybe it&#39;s just me, but it seems kinda...  pointless?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1459952524, "post_id": 36453910, "comment_id": 60520495, "body": "Yes, you can assign an integer value to an integer variable. Just make sure the value fits into the variable."}], "answers": [{"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1459952591, "post_id": 36453997, "comment_id": 60520555, "body": "C very well <b>does</b> have a boolean type! And the <code>enum</code> is a strict don&#39;t. Use <code>stdbool.h</code>."}, {"owner": {"reputation": 16091, "user_id": 4975822, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c04e8c4c984d36bea8a6239574980fbd?s=128&d=identicon&r=PG&f=1", "display_name": "artm", "link": "https://stackoverflow.com/users/4975822/artm"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1459952750, "post_id": 36453997, "comment_id": 60520685, "body": "@Olaf it&#39;s not before C99, editted"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1459952941, "post_id": 36453997, "comment_id": 60520862, "body": "If not mentioned otherwise, a question is about standard C. Which is currently C11. Read the info-page. And <code>bool</code> is a macro for the actual name of the type."}, {"owner": {"reputation": 1093, "user_id": 1571801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b739aed4dad18fc8844f52352fd554a2?s=128&d=identicon&r=PG", "display_name": "atturri", "link": "https://stackoverflow.com/users/1571801/atturri"}, "edited": false, "score": 0, "creation_date": 1459953039, "post_id": 36453997, "comment_id": 60520953, "body": "C99 has no <b>bool</b>, just <b>_Bool</b>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1459953103, "post_id": 36453997, "comment_id": 60521013, "body": "&quot;but needed check for C99 or C11&quot; - Please update your language knowledge before writing an answer. C has evolved in the past 27 years. K&amp;R is not even C89."}, {"owner": {"reputation": 16091, "user_id": 4975822, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c04e8c4c984d36bea8a6239574980fbd?s=128&d=identicon&r=PG&f=1", "display_name": "artm", "link": "https://stackoverflow.com/users/4975822/artm"}, "reply_to_user": {"reputation": 1093, "user_id": 1571801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b739aed4dad18fc8844f52352fd554a2?s=128&d=identicon&r=PG", "display_name": "atturri", "link": "https://stackoverflow.com/users/1571801/atturri"}, "edited": false, "score": 0, "creation_date": 1459953202, "post_id": 36453997, "comment_id": 60521088, "body": "@atturri - <code>bool</code> is ok, it&#39;s macro resolved to <code>_Bool</code>. I don&#39;t really see people use <code>_Bool</code> directly - can be wrong though"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 1093, "user_id": 1571801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b739aed4dad18fc8844f52352fd554a2?s=128&d=identicon&r=PG", "display_name": "atturri", "link": "https://stackoverflow.com/users/1571801/atturri"}, "edited": false, "score": 0, "creation_date": 1459953328, "post_id": 36453997, "comment_id": 60521195, "body": "@atturri: 1) address a comment properly. As I suspect you mean me: I did not state it has a <code>bool</code>, but a <b>boolean type</b>. <code>stdbool.h</code> provides <code>bool</code> as a macro for <code>_Bool</code>, though. Note the standard made redefinition of this and the <code>true</code>/<code>false</code> macros obsolesecence, which might very well be an indicator a future standard might make them keywords."}, {"owner": {"reputation": 1093, "user_id": 1571801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b739aed4dad18fc8844f52352fd554a2?s=128&d=identicon&r=PG", "display_name": "atturri", "link": "https://stackoverflow.com/users/1571801/atturri"}, "edited": false, "score": 0, "creation_date": 1459953333, "post_id": 36453997, "comment_id": 60521198, "body": "true, sorry for the confusion"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1459956315, "post_id": 36453997, "comment_id": 60523559, "body": "@Olaf: &quot;<i>K&amp;R is not even C89.</i>&quot; That depends on what you mean by K&amp;R.  &quot;K*R C&quot; usually refers to the language described by the first edition of Kernighan &amp; Ritchie (K&amp;R1), published in 1978. The second edition, K&amp;R2, described the language defined by the 1989 ANSI and 1990 ISO C standards."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1459956612, "post_id": 36453997, "comment_id": 60523777, "body": "@KeithThompson: Common understanding of &quot;K&amp;R-C&quot; is the pre-standard version. Later versions are typically called &quot;ANSI-C&quot; (C89 == C90), or &quot;ISO-C&quot; (ambivalent, as C is an ISO standard since C90). But no way is K&amp;R standard C, as no edition of the book covers C99, even less the only valid standard version C11."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 2, "creation_date": 1459956930, "post_id": 36453997, "comment_id": 60524009, "body": "Are you disagreeing with anything I wrote? The older standard are <i>officially</i> obsolete; each standard &quot;cancels and replaces&quot; the previous edition. But the older standards still exist, and it&#39;s absurd IMHO to say that they&#39;re not &quot;standards&quot;. They are standards, just not current ones. It&#39;s reasonable to say that a compiler conforms to the 1990 ISO C standard, for example; how would you say that?"}], "tags": [], "owner": {"reputation": 16091, "user_id": 4975822, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c04e8c4c984d36bea8a6239574980fbd?s=128&d=identicon&r=PG&f=1", "display_name": "artm", "link": "https://stackoverflow.com/users/4975822/artm"}, "is_accepted": false, "score": 1, "last_activity_date": 1459952667, "last_edit_date": 1459952667, "creation_date": 1459952541, "answer_id": 36453997, "question_id": 36453910, "link": "https://stackoverflow.com/questions/36453910/c-program-assign-an-int-to-a-bool/36453997#36453997", "title": "c program assign an int to a bool?", "body": "<p>Original <code>C</code> doesn't really have a <code>bool</code> type. However, it's usually defined as:</p>\n\n<p><code>typedef enum { false = 0, true = 1 } bool;</code></p>\n\n<blockquote>\n  <p>Can I assign this to an int ack? and test if ack is a 0 or 1?</p>\n</blockquote>\n\n<p>So for your Q - yes.</p>\n\n<hr>\n\n<p>In C99 <code>bool</code> type exists, using <code>&lt;stdbool.h&gt;</code></p>\n"}, {"tags": [], "owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "is_accepted": false, "score": 2, "last_activity_date": 1459956090, "creation_date": 1459956090, "answer_id": 36455473, "question_id": 36453910, "link": "https://stackoverflow.com/questions/36453910/c-program-assign-an-int-to-a-bool/36455473#36455473", "title": "c program assign an int to a bool?", "body": "<p>Yes, you can assign an <code>int</code> value to a <code>bool</code> object. Both are integer types, and the value is implicitly converted.</p>\n\n<p>Old versions of C, prior to 1999, did not have a built-in Boolean type. It was common to use workarounds such as;</p>\n\n<pre><code>typedef enum { false, true } bool;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>#define false 0\n#define true 1\ntypedef int bool;\n</code></pre>\n\n<p>For such a type, the behavior of the conversion depends on just how the Boolean type is defined. If <code>bool</code> is an alias for <code>int</code>, the conversion is trivial. If the value being converted is exactly <code>0</code> or <code>1</code>, the result is <code>false</code> or <code>true</code>, respectively. If the value is anything else, you can get a value that is neither <code>false</code> nor <code>true</code>, but that will be treated as true when used as a condition (but <em>not</em> when compared for equality to <code>true</code> -- so don't do that). You can even get an unspecified value that might be <code>0</code> for a non-zero <code>int</code> value (for example if <code>bool</code> is defined as <code>char</code> and the high-order bits are discarded).</p>\n\n<p>If you're not able to use modern C, either because you have a pre-C99 compiler or because you're working on legacy code, you can normalize the value:</p>\n\n<pre><code>int n = 42;\nbool b = (n == 0 ? false : true);\n</code></pre>\n\n<p>or</p>\n\n<pre><code>bool b = n != 0\n</code></pre>\n\n<p>or</p>\n\n<pre><code>bool b = !!n;\n</code></pre>\n\n<p>C99 added a built-in type <code>_Bool</code>, which can be written as <code>bool</code> if you have <code>#include &lt;stdbool.h&gt;</code>. Conversion to <code>_Bool</code> automatically normalizes the value. Conversion of an <code>int</code> to type <code>_Bool</code> yields <code>0</code> (<code>false</code>) if the value is equal to zero, <code>1</code> (<code>true</code>) otherwise.</p>\n"}], "owner": {"reputation": 79, "user_id": 6151781, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/7cbe667d58e649ce7702ba7e67d361cf?s=128&d=identicon&r=PG&f=1", "display_name": "pelican", "link": "https://stackoverflow.com/users/6151781/pelican"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1812, "favorite_count": 0, "closed_date": 1460004047, "answer_count": 2, "score": 0, "last_activity_date": 1459956090, "creation_date": 1459952332, "question_id": 36453910, "link": "https://stackoverflow.com/questions/36453910/c-program-assign-an-int-to-a-bool", "closed_reason": "Needs details or clarity", "title": "c program assign an int to a bool?", "body": "<p>I'm programming a mcu. This is the description of the <code>gpio_read_pin()</code> function. It returns a bool.</p>\n\n<p>Can I assign this to an <code>int ack</code>? and test if ack is a 0 or 1?</p>\n\n<p>Thanks</p>\n\n<pre><code>/**\n * Read the current value of a single pin on a given GPIO port.\n *\n * @param[in] gpio GPIO port index.\n * @param[in] pin Pin of GPIO port to read.\n * @return bool Value of the pin specified on GPIO port.\n */\nbool gpio_read_pin(const gpio_t gpio, const uint8_t pin);\n\n\n\nvoid sendCommandSHT(int command)\n{\n\n  ...\n\n  int ack;\n\n  ack = gpio_read_pin(QM_GPIO_0, DATA_PIN);\n\n  if (ack != 0) {\n      TI_PUTS(\"Ack Error 0\");\n  }\n}\n</code></pre>\n"}, {"tags": ["c", "types", "language-lawyer", "c11"], "comments": [{"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1459952144, "post_id": 36453786, "comment_id": 60520207, "body": "Type domain is integer, float, structure, or union?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1459952185, "post_id": 36453786, "comment_id": 60520236, "body": "RTFineM: 6.2.5p18. A simple text search \u2026"}, {"owner": {"reputation": 11698, "user_id": 5399734, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2162d669508364bb0c03aba1a2473aa8?s=128&d=identicon&r=PG&f=1", "display_name": "nalzok", "link": "https://stackoverflow.com/users/5399734/nalzok"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1459952320, "post_id": 36453786, "comment_id": 60520329, "body": "@Olaf <code>18 Integer and floating types are collectively called arithmetic types. Each arithmetic type belongs to one type domain: the real type domain comprises the real types, the complex type domain comprises the complex types.</code>, but this doesn&#39;t define &quot;type domain&quot; explicitly."}, {"owner": {"reputation": 11698, "user_id": 5399734, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2162d669508364bb0c03aba1a2473aa8?s=128&d=identicon&r=PG&f=1", "display_name": "nalzok", "link": "https://stackoverflow.com/users/5399734/nalzok"}, "reply_to_user": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1459952378, "post_id": 36453786, "comment_id": 60520376, "body": "@FiddlingBits Can you provide a reference?"}, {"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 0, "creation_date": 1459952435, "post_id": 36453786, "comment_id": 60520426, "body": "And <code>real types</code> is explained in the previous paragraph. The standard has an index at the end btw."}, {"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 6, "creation_date": 1459952528, "post_id": 36453786, "comment_id": 60520498, "body": "Also <a href=\"http://port70.net/~nsz/c/c11/ctypes.pdf\" rel=\"nofollow noreferrer\">here</a> is a nice graph about C11 types."}, {"owner": {"reputation": 11698, "user_id": 5399734, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2162d669508364bb0c03aba1a2473aa8?s=128&d=identicon&r=PG&f=1", "display_name": "nalzok", "link": "https://stackoverflow.com/users/5399734/nalzok"}, "reply_to_user": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 0, "creation_date": 1459952610, "post_id": 36453786, "comment_id": 60520583, "body": "@cremno OK I got it: real type = type char + the signed and unsigned integer types + float + double + long double."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 2, "creation_date": 1459952928, "post_id": 36453786, "comment_id": 60520852, "body": "The term &quot;real&quot; is used in its mathematical sense.  Among the arithmetic types, the &quot;real&quot; types are the alternative to the &quot;complex&quot; types.  Saying it that way is not intended to suggest that the complex types are in any way more standard or conventional than the real types, however.  They are equally defined by the language standard, and the real types are far, <i>far</i> more used."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1459953654, "post_id": 36453786, "comment_id": 60521450, "body": "Read the paragraph I referenced in context of your question. This is about &quot;Real&quot; vs. &quot;Complex&quot; numbers and how to convert between them, including from one domain (real or complex) to the other."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1460028164, "post_id": 36453786, "comment_id": 60559569, "body": "Speaking of C11, it is no longer mandatory for a compiler to support the complex type library."}], "answers": [{"tags": [], "owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "is_accepted": true, "score": 4, "last_activity_date": 1459958650, "last_edit_date": 1459958650, "creation_date": 1459958176, "answer_id": 36456263, "question_id": 36453786, "link": "https://stackoverflow.com/questions/36453786/what-does-type-domain-and-real-type-mean/36456263#36456263", "title": "What does &quot;type domain&quot; and &quot;real type&quot; mean?", "body": "<p>6.2.5 Types of N1570 says the following:</p>\n\n<blockquote>\n  <p>Integer and floating types are collectively called arithmetic types. Each arithmetic type belongs to one <strong>type domain</strong>: the <strong>real type domain</strong> comprises the <strong>real types</strong>, the <strong>complex type domain</strong> comprises the <strong>complex\n  types</strong>.</p>\n</blockquote>\n\n<p>Then further:</p>\n\n<blockquote>\n  <p>There   are   three\n  <strong>real</strong>   floating   <strong>types</strong>\n  ,   designated   as\n  <code>float</code>\n  ,\n  <code>double</code>\n  ,   and\n  <code>long\n  double</code>.\n  42)\n  The  set  of  values  of  the  type\n  <code>float</code>\n  is  a  subset  of  the  set  of  values  of  the\n  type\n  double\n  ; the set of values of the type\n  double\n  is a subset of the set of values of the\n  type\n  long double</p>\n</blockquote>\n\n<p>and</p>\n\n<blockquote>\n  <p>There   are   three\n  complex   types,   designated   as\n  <code>float  _Complex</code>\n  ,\n  <code>double _Complex</code>,  and\n  <code>long  double  _Complex</code>.</p>\n</blockquote>\n\n<p>(do note that the standard does not say anything about complex integer types, so all integer types defined in the standard belong to the real type domain).</p>\n\n<p>Thus it is clear that the domain refers to the mathematical concepts of <a href=\"https://en.wikipedia.org/wiki/Real_number\" rel=\"nofollow\"><strong>real</strong> numbers \u211d</a> and <a href=\"https://en.wikipedia.org/wiki/Complex_number\" rel=\"nofollow\">complex numbers \u2102</a>.</p>\n\n<hr>\n\n<p>Basically what the excerpt in your question says is that if you for example add a real number with imaginary number or a complex number, the result is also a complex number; and also that the operands are promoted to the width of the largest operand before the operation.</p>\n"}], "owner": {"reputation": 11698, "user_id": 5399734, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2162d669508364bb0c03aba1a2473aa8?s=128&d=identicon&r=PG&f=1", "display_name": "nalzok", "link": "https://stackoverflow.com/users/5399734/nalzok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 335, "favorite_count": 1, "accepted_answer_id": 36456263, "answer_count": 1, "score": 7, "last_activity_date": 1459958650, "creation_date": 1459952072, "question_id": 36453786, "link": "https://stackoverflow.com/questions/36453786/what-does-type-domain-and-real-type-mean", "title": "What does &quot;type domain&quot; and &quot;real type&quot; mean?", "body": "<p>Quoted from N1570:</p>\n\n<blockquote>\n  <p>6.3.1.8 Usual arithmetic conversions</p>\n  \n  <p>1 Many operators that expect operands of arithmetic type cause\n  conversions and yield result types in a similar way. The purpose is to\n  determine a common <strong>real type</strong> for the operands and result. For the\n  specified operands, each operand is converted, without change of\n  <strong>type domain</strong>, to a type whose corresponding <strong>real type</strong> is the common real type. Unless explicitly stated otherwise, the common\n  <strong>real type</strong> is also the corresponding <strong>real type</strong> of the result, whose <strong>type domain</strong> is the <strong>type domain</strong> of the operands if they\n  are the same, and complex otherwise. This pattern is called the usual\n  arithmetic conversions:</p>\n  \n  <ul>\n  <li>First, if the corresponding real type of either operand is long double, the other operand is converted, without change of <strong>type\n  domain</strong>, to a type whose corresponding <strong>real type</strong> is long double.</li>\n  <li>Otherwise, ......</li>\n  </ul>\n</blockquote>\n\n<p>What is \"type domain\" and \"real type\"? I've search the document, but no definition is found.</p>\n"}, {"tags": ["c++", "c", "windows", "winapi", "driver"], "comments": [{"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1459995461, "post_id": 36453602, "comment_id": 60542529, "body": "Sometimes the device class for a particular device changes between Windows version.  Might be worth checking.  (I think you can look this up in Device Manager.)"}, {"owner": {"reputation": 113, "user_id": 6166963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9db897402cef7053b457b7a8e27a4e9e?s=128&d=identicon&r=PG&f=1", "display_name": "giorgio-b", "link": "https://stackoverflow.com/users/6166963/giorgio-b"}, "reply_to_user": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1460026986, "post_id": 36453602, "comment_id": 60558659, "body": "@HarryJohnston: Thanks for the hint. I have checked the device class under Windows 10 and it reports <code>{50dd5230-ba8a-11d1-bf5g-0000f805f530}</code>, which is the same I use in my code."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1460064546, "post_id": 36453602, "comment_id": 60584228, "body": "The code <i>seems</i> OK, and it works for me on Windows 10 if I change the GUID to to the mouse driver class.  (I don&#39;t have any machines with smartcard devices to test it on.)  Perhaps Windows doesn&#39;t think the drivers that you&#39;ve installed are sufficiently compatible with the device?"}, {"owner": {"reputation": 113, "user_id": 6166963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9db897402cef7053b457b7a8e27a4e9e?s=128&d=identicon&r=PG&f=1", "display_name": "giorgio-b", "link": "https://stackoverflow.com/users/6166963/giorgio-b"}, "reply_to_user": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1460097321, "post_id": 36453602, "comment_id": 60594065, "body": "@HarryJohnston: I would expect that the device class is indicated by the driver itself, but I really have no idea how it actually works internally. Anyway, Windows 7 does think these drivers are sufficiently compatible with the corresponding card readers. Windows 8 and 10 don&#39;t."}, {"owner": {"reputation": 113, "user_id": 6166963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9db897402cef7053b457b7a8e27a4e9e?s=128&d=identicon&r=PG&f=1", "display_name": "giorgio-b", "link": "https://stackoverflow.com/users/6166963/giorgio-b"}, "reply_to_user": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1460447184, "post_id": 36453602, "comment_id": 60733012, "body": "@HarryJohnston: &quot;I would expect that the device class is indicated by the driver itself&quot;: What I mean is that you do not need to have a smartcard reader attached to your computer, you only need to install a driver, e.g. SCL01xG_INST_WIN_EN_V1.13.zip (<a href=\"http://support.identive-group.com/downloads.php?lang=de&amp;open=driver\" rel=\"nofollow noreferrer\">support.identive-group.com/&hellip;</a>). This driver gets detected by Windows 7 (even without an attached device) but is not detected by Windows 8."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1460502944, "post_id": 36453602, "comment_id": 60770317, "body": "As far as I can see, that code shouldn&#39;t return anything if there is no corresponding device attached to the system, since in that case there&#39;s nothing for <code>SetupDiEnumDeviceInfo</code> to return.  Some drivers install virtual devices though, so perhaps that&#39;s the reason.  You might want to see what information you can get about the device that&#39;s being found, there might be a clue there."}, {"owner": {"reputation": 113, "user_id": 6166963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9db897402cef7053b457b7a8e27a4e9e?s=128&d=identicon&r=PG&f=1", "display_name": "giorgio-b", "link": "https://stackoverflow.com/users/6166963/giorgio-b"}, "reply_to_user": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1460532413, "post_id": 36453602, "comment_id": 60780188, "body": "@HarryJohnston: Do you mean these drivers might install virtual devices on Windows 7 but not on Windows 8?"}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1460534551, "post_id": 36453602, "comment_id": 60781586, "body": "If you&#39;re getting as far as calling SetupDiEnumDriverInfo, then there must be a device (physical or otherwise) for you to query.  So it probably isn&#39;t that simple.  But if there is no physical device present, that&#39;s an oddity that is worth investigating.  It might not turn out to be relevant, but &quot;all knowledge is worth having&quot;."}, {"owner": {"reputation": 113, "user_id": 6166963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9db897402cef7053b457b7a8e27a4e9e?s=128&d=identicon&r=PG&f=1", "display_name": "giorgio-b", "link": "https://stackoverflow.com/users/6166963/giorgio-b"}, "reply_to_user": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1460720129, "post_id": 36453602, "comment_id": 60885330, "body": "@HarryJohnston: Could you reproduce the problem with the driver I have indicated above?"}], "owner": {"reputation": 113, "user_id": 6166963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9db897402cef7053b457b7a8e27a4e9e?s=128&d=identicon&r=PG&f=1", "display_name": "giorgio-b", "link": "https://stackoverflow.com/users/6166963/giorgio-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 299, "favorite_count": 2, "answer_count": 0, "score": 3, "last_activity_date": 1459951618, "creation_date": 1459951618, "question_id": 36453602, "link": "https://stackoverflow.com/questions/36453602/setupdienumdriverinfo-returns-different-results-on-windows-7-and-windows-8-10", "title": "SetupDiEnumDriverInfo returns different results on Windows 7 and Windows 8 / 10", "body": "<p>I am debugging an application that should retrieve information about all smart card reader drivers installed on a Windows system.</p>\n\n<p>The code below works on Windows 7 (64 bit):</p>\n\n<pre><code>QSet&lt;QString&gt; getSmartCardDriverModuleNames()\n{\n    QSet&lt;QString&gt; moduleNames;\n\n    // the GUID for the smart card reader device setup class\n    wchar_t deviceClassGuidString[] = L\"{50dd5230-ba8a-11d1-bf5d-0000f805f530}\";\n    GUID deviceClass;\n    CLSIDFromString(deviceClassGuidString, &amp;deviceClass);\n\n    HDEVINFO deviceInfoSet = SetupDiGetClassDevs(&amp;deviceClass, NULL, NULL, 0);\n    if (deviceInfoSet == INVALID_HANDLE_VALUE)\n    {\n        return moduleNames;\n    }\n\n    SP_DEVINFO_DATA deviceInfoData;\n    deviceInfoData.cbSize = sizeof(deviceInfoData);\n\n    for (DWORD deviceIndex = 0;\n         SetupDiEnumDeviceInfo(deviceInfoSet, deviceIndex,\n                               &amp;deviceInfoData);\n         deviceIndex++)\n    {\n        if (SetupDiBuildDriverInfoList(deviceInfoSet, &amp;deviceInfoData,\n                                       SPDIT_COMPATDRIVER))\n        {\n            SP_DRVINFO_DATA_W driverInfoData;\n            driverInfoData.cbSize = sizeof(driverInfoData);\n            for (DWORD driverIndex = 0;\n                 SetupDiEnumDriverInfo(deviceInfoSet, &amp;deviceInfoData,\n                                       SPDIT_COMPATDRIVER, driverIndex,\n                                       &amp;driverInfoData);\n                 driverIndex++)\n            {\n                // Omitted: get service name and add to moduleNames.\n            }\n\n            SetupDiDestroyDriverInfoList(deviceInfoSet, &amp;deviceInfoData,\n                                         SPDIT_COMPATDRIVER);\n        }\n    }\n\n    SetupDiDestroyDeviceInfoList(deviceInfoSet);\n    return moduleNames;\n}\n</code></pre>\n\n<p>This code correctly finds the installed drivers when run on Windows 7, but finds no driver at all on Windows 8 or Windows 10 (both 64 bit), even though some drivers are installed.</p>\n\n<p>It turns out (by adding extra logging and debug code) that under Windows 8 and 10 the first call to <code>SetupDiEnumDriverInfo</code> fails. In this case, by adding a call to <code>GetLastError()</code> I get <code>ERROR_NO_MORE_ITEMS</code>, which is the normal behaviour expected when the end of the list is reached (see <a href=\"https://msdn.microsoft.com/en-us/library/windows/hardware/ff551018%28v=vs.85%29.aspx\" rel=\"nofollow\">the documentation</a>).</p>\n\n<p>So, no errors are detected, but the result is empty.</p>\n\n<p>In the documentation of the Windows API I have found no changes from Windows 7 to Windows 8, 10, so no adaptation to the above code should be needed.</p>\n\n<p>Have I overlooked something? Do you have any hint as to what I should check next?</p>\n"}, {"tags": ["c", "pointers", "struct"], "comments": [{"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 3, "creation_date": 1459951273, "post_id": 36453176, "comment_id": 60519492, "body": "I&#39;ll let you in on a little secret... When the compiler says &quot;error&quot;, all the rest of the message will actually tell you what the error is!!!  Please don&#39;t come here and treat humans as if they are compilers.  If you don&#39;t <i>understand</i> the error message, then at the very least indicate to us that you have read it."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1459951686, "post_id": 36453176, "comment_id": 60519832, "body": "The term &quot;self-referenced&quot; is missleading. C does not have references and a <code>struct</code> cannot reference itself. You just have a pointer in your <code>struct</code> which can <b>point</b> to an object of the same type. That is not different from a pointer to any other type."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1459951869, "post_id": 36453176, "comment_id": 60519990, "body": "No idea.  If only compilers issued error messages that hinted at the problem and on which line it was found...."}, {"owner": {"reputation": 7, "user_id": 5577780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34c4b128a0ce43e5356607328682aa5b?s=128&d=identicon&r=PG&f=1", "display_name": "Resmi", "link": "https://stackoverflow.com/users/5577780/resmi"}, "reply_to_user": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 0, "creation_date": 1460021007, "post_id": 36453176, "comment_id": 60554265, "body": "@paddy,  Thank you for the comment.  I am a real beginner and had no clue that it was a simple syntax error. Next time I ask a question like this, I will remember to add any error message as well."}], "answers": [{"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 2, "creation_date": 1459951118, "post_id": 36453245, "comment_id": 60519365, "body": "Which, for clarity, is equivalent to <code>(*data.ptr_dat).grade</code>.  In practice, everybody would use the <code>-&gt;</code> operator."}, {"owner": {"reputation": 446, "user_id": 5288574, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gLwVaWJ0hJE/AAAAAAAAAAI/AAAAAAAAAak/UWPvKqKxelI/photo.jpg?sz=128", "display_name": "RAJ KUMAR MISHRA", "link": "https://stackoverflow.com/users/5288574/raj-kumar-mishra"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1507021553, "post_id": 36453245, "comment_id": 80035882, "body": "@JohnBollinger I didn&#39;t get your answer. Can you please explain how it is equivalent?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 446, "user_id": 5288574, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gLwVaWJ0hJE/AAAAAAAAAAI/AAAAAAAAAak/UWPvKqKxelI/photo.jpg?sz=128", "display_name": "RAJ KUMAR MISHRA", "link": "https://stackoverflow.com/users/5288574/raj-kumar-mishra"}, "edited": false, "score": 0, "creation_date": 1507035221, "post_id": 36453245, "comment_id": 80044160, "body": "@RAJKUMARMISHRA, it follows directly from the definitions of the operators involved, including their relative precedence."}], "tags": [], "owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "is_accepted": false, "score": 6, "last_activity_date": 1459950789, "creation_date": 1459950789, "answer_id": 36453245, "question_id": 36453176, "link": "https://stackoverflow.com/questions/36453176/how-to-use-self-referencing-structures-in-c/36453245#36453245", "title": "How to use self referencing structures in C?", "body": "<p>Simple syntax error : you can access <code>data1</code>'s grade with <code>data.ptr_dat-&gt;grade</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 0, "last_activity_date": 1459956693, "last_edit_date": 1459956693, "creation_date": 1459954835, "answer_id": 36454970, "question_id": 36453176, "link": "https://stackoverflow.com/questions/36453176/how-to-use-self-referencing-structures-in-c/36454970#36454970", "title": "How to use self referencing structures in C?", "body": "<p>Expanding on Quentin's answer a bit...</p>\n\n<p>In order to access the member of a struct instance, you must use an expression like </p>\n\n<p><em><code>struct-expression</code></em><code>.</code><em><code>member-name</code></em></p>\n\n<p>where <em><code>struct-expression</code></em> is an expression of <code>struct</code> type (such as the struct names <code>data</code> or <code>data1</code>).  The type of the expression is the type of the member; thus, the type of the expression <code>data.grade</code> is <code>char</code>, and the type of <code>data.ptr_dat</code> is <code>struct student *</code> (pointer to <code>struct student</code>).</p>\n\n<p>So, if you want to dereference <code>data.ptr_dat</code>, you must write <code>*data.ptr_dat</code>; IOW, you are dereferencing the <em>expression</em> <code>data.ptr_dat</code>.  The expression is parsed as <code>*(data.ptr_dat)</code>, since the <code>.</code> member selection operator has higher precedence than the unary <code>*</code> operator.  </p>\n\n<p>If you want to access a member of the <em>pointed-to</em> <code>struct</code> instance, you would dereference <code>data.ptr_dat</code> and use the <code>.</code> operator:</p>\n\n<pre><code>printf( \"%c\\n\", (*data.ptr_dat).grade );\n</code></pre>\n\n<p>Remember that <code>.</code> has higher precendence than unary <code>*</code>, so we have to use parentheses to make sure that we are dereferencing <code>data.ptr_dat</code>, not <code>data.ptr_dat.grade</code>.  </p>\n\n<p>That's a little eye-stabby, so C introduced an alternate member selection operator, <code>-&gt;</code>.  Where <code>.</code> expects its left-hand operand to have a <code>struct</code> type, the <code>-&gt;</code> operator expects its left operand to have a <em>pointer</em> to <code>struct</code> type, so you can write the expression above as</p>\n\n<pre><code>printf( \"%c\\n\", data.ptr_dat-&gt;grade );\n</code></pre>\n\n<p>The <code>-&gt;</code> operator implicitly dereferences <code>data.ptr_dat</code> before accessing <code>grade</code>. </p>\n\n<p>This will make life easier if you chain a bunch of <code>struct</code>s together through pointers.  Given the following code:</p>\n\n<pre><code>struct student data1, data2, data3, *datap;\ndata2.ptr_dat = &amp;data3;\ndata1.ptr_dat = &amp;data2;\ndatap = &amp;data1;\n</code></pre>\n\n<p>then all of the following expressions evaluate to the same thing:</p>\n\n<pre><code>data3.grade \n\ndata2.ptr_dat-&gt;grade\n(*data2.ptr_dat).grade\n\ndata1.ptr_dat-&gt;ptr_dat-&gt;grade\n(*data1.ptr_dat).ptr_dat-&gt;grade\n(*(*data1.ptr_dat).ptr_dat).grade \n\ndatap-&gt;ptr_dat-&gt;ptr_dat-&gt;grade \n(*datap).ptr_dat-&gt;ptr_dat-&gt;grade\n(*(*datap).ptr_dat).ptr_dat-&gt;grade\n(*(*(*datap).ptr_dat).ptr_dat).grade\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 5577780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34c4b128a0ce43e5356607328682aa5b?s=128&d=identicon&r=PG&f=1", "display_name": "Resmi", "link": "https://stackoverflow.com/users/5577780/resmi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "closed_date": 1459956814, "answer_count": 2, "score": -2, "last_activity_date": 1459956693, "creation_date": 1459950649, "last_edit_date": 1459951184, "question_id": 36453176, "link": "https://stackoverflow.com/questions/36453176/how-to-use-self-referencing-structures-in-c", "closed_reason": "Not suitable for this site", "title": "How to use self referencing structures in C?", "body": "<p>I am learning self-referenced structures in C. What is the error in the following code? How do I make it work ?</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nstruct student\n{\n  char grade;\n  struct student *ptr_dat;  //we have a pointer of datatype struct student.\n};\n\nint main()\n{\n  struct student data;\n  struct student data1;\n  data.grade = 'C';\n  data1.grade = 'B';\n\n  data.ptr_dat = &amp;data1;  //the address of another structure is assigned. \n\n  /*\n   print the element grade in both structures directly.\n  */\n  printf(\"%c\\n\",data.grade);\n  printf(\"%c\\n\",data1.grade);\n  /*\n   how to print the element grade in data1 using pointer\n  */\n  printf(\"%c\\n\",data.(*ptr_dat)); //This is error.\n\n  return 0;\n\n} \n</code></pre>\n\n<p>Thanks in advance. </p>\n"}, {"tags": ["c", "string", "hex", "printf", "ascii"], "comments": [{"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 2, "creation_date": 1459951349, "post_id": 36452970, "comment_id": 60519560, "body": "<code>sprintf()</code> certainly doesn&#39;t need a pointer for the <code>%c</code> conversion. But if you have the character that&#39;s all you need, just store it."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1459953565, "post_id": 36452970, "comment_id": 60521376, "body": "When converting a &quot; Hex string&quot; to an &quot;ASCII string&quot;, the design depends on things not defined here: 1) Will the  hex string always be well-formed and if not what should the result be? 2) Handle A-F and a-f? 3) What allocates the buffer for the resultant string? 4) How to handle &quot;00&quot;?  5) Portable to non-ASCII?"}], "answers": [{"tags": [], "owner": {"reputation": 1444, "user_id": 2255632, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/a892fc84e03cf61a429a907990ec15a6?s=128&d=identicon&r=PG", "display_name": "Kukula Mula", "link": "https://stackoverflow.com/users/2255632/kukula-mula"}, "is_accepted": false, "score": 0, "last_activity_date": 1459951590, "last_edit_date": 1495541751, "creation_date": 1459951590, "answer_id": 36453586, "question_id": 36452970, "link": "https://stackoverflow.com/questions/36452970/how-to-convert-a-hex-char-buffer-to-an-ascii-string-c/36453586#36453586", "title": "How to convert a Hex char buffer to an ASCII-string [C]", "body": "<p>as you probably know each <a href=\"http://www.asciitable.com/\" rel=\"nofollow noreferrer\">character is represented by an int</a> --> ...'a' = 97, 'b'=98... so once you convert an hex to int there is no need to create another function converting it to ascii - just by storing the integer into a character will do the trick (unless I'm missing something understanding the exercise).</p>\n\n<p>as for storing it back to memory: there are many options:\n1. remove the <code>const</code> before <code>const char st[12] = \"48656C6C6F3B\";</code> and\n assign the return value from the function to the desired cell  or using sscanf</p>\n\n<p>take a look <a href=\"https://stackoverflow.com/questions/10156409/convert-hex-string-char-to-int\">here</a></p>\n"}, {"tags": [], "owner": {"reputation": 4113, "user_id": 2126582, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tVrzW.png?s=128&g=1", "display_name": "AnatolyS", "link": "https://stackoverflow.com/users/2126582/anatolys"}, "is_accepted": false, "score": 0, "last_activity_date": 1459952479, "creation_date": 1459952479, "answer_id": 36453970, "question_id": 36452970, "link": "https://stackoverflow.com/questions/36452970/how-to-convert-a-hex-char-buffer-to-an-ascii-string-c/36453970#36453970", "title": "How to convert a Hex char buffer to an ASCII-string [C]", "body": "<p>You did everything well but there are some issues. Compare with the following:</p>\n\n<pre><code>const char* st = \"48656C6C6F3B\"; // I don't want to calculate storage size\nchar r[12] = { 0 }; // Here is I want to store the result\nchar* h = r; // pointer to write position in the result\nint length = strlen(st); \nfor (int i = 0; i &lt; length; i+=2) {\n  assert((h - r) &lt; sizeof(r)); // check that there is not problem with out of range\n  *h++ = hex_to_ascii(st[i], st[i + 1]);\n}\nprintf(\"%s\", r); // now the r contains \"ansi string\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1459953789, "post_id": 36454030, "comment_id": 60521571, "body": "@chux Sure, why not. Refactoring is life, after all. Done, thanks."}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": true, "score": 3, "last_activity_date": 1459954536, "last_edit_date": 1459954536, "creation_date": 1459952614, "answer_id": 36454030, "question_id": 36452970, "link": "https://stackoverflow.com/questions/36452970/how-to-convert-a-hex-char-buffer-to-an-ascii-string-c/36454030#36454030", "title": "How to convert a Hex char buffer to an ASCII-string [C]", "body": "<p>Okay, let's have a shot:</p>\n\n<pre><code>#include &lt;ctype.h&gt;\n#include &lt;stdio.h&gt;\n\nstatic unsigned char hexdigit2int(unsigned char xd)\n{\n  if (xd &lt;= '9')\n    return xd - '0';\n  xd = tolower(xd);\n  if (xd == 'a')\n    return 10;\n  if (xd == 'b')\n    return 11;\n  if (xd == 'c')\n    return 12;\n  if (xd == 'd')\n    return 13;\n  if (xd == 'e')\n    return 14;\n  if (xd == 'f')\n    return 15;\n  return 0;\n}\n\nint main(void)\n{\n  const char st[] = \"48656C6C6F3B\", *src = st;\n  char text[sizeof st + 1], *dst = text;\n\n  while (*src != '\\0')\n  {\n    const unsigned char high = hexdigit2int(*src++);\n    const unsigned char low  = hexdigit2int(*src++);\n    *dst++ = (high &lt;&lt; 4) | low;\n  }\n  *dst = '\\0';\n  printf(\"Converted '%s', got '%s'\\n\", st, text);\n  return 0;\n}\n</code></pre>\n\n<p>The very verbose-looking <code>digit2int()</code> function is trying to not be ASCII-dependent, which is always nice. Note that the loop in <code>main()</code> assumes proper input, it only checks for termination every two characters and won't handle non-hex data.</p>\n\n<p>Oh, and this prints:</p>\n\n<pre><code>Converted '48656C6C6F3B', got 'Hello;'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1459961646, "creation_date": 1459961646, "answer_id": 36457522, "question_id": 36452970, "link": "https://stackoverflow.com/questions/36452970/how-to-convert-a-hex-char-buffer-to-an-ascii-string-c/36457522#36457522", "title": "How to convert a Hex char buffer to an ASCII-string [C]", "body": "<p>To \"save\" the result, simple add a buffer, <code>dest</code>, to store the result.</p>\n\n<p>Additional suggestions included in code.</p>\n\n<pre><code>// add void to signature\nint main(void) {\n  const char st[12] = \"48656C6C6F3B\";\n  int length = strlen(st);\n  int i;\n  char buf = 0;\n\n  // add destination buffer\n  char dest[10];\n\n  // Add test\n  // for (i = 0; i &lt; length; i++) {\n  for (i = 0; i &lt; length &amp;&amp; (i/2 + 1) &lt; sizeof(dest); i++) {\n    if (i % 2 != 0) {\n\n      // printf(\"%c\", hex_to_ascii(buf, st[i]));\n      dest[i/2] = hex_to_ascii(buf, st[i]);\n\n    } else {\n      buf = st[i];\n    }\n  }\n\n  // Add termination\n  dest[i/2] = '\\0';\n  // Do someting with dest\n  puts(dest);\n  return 0;\n}\n</code></pre>\n\n<hr>\n\n<p>Alternatively, some code that handles various possible issues: lower/upper case hex digits, invalid characters, odd count, small buffer, embedded null character.</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n// There are _many_ ways to do this step.\nunsigned char2digit(int ch) {\n  static const char Hex[] = \"0123456789ABCDEF0123456789abcdef\";\n  char *p = memchr(Hex, ch, 32);\n  if (p) {\n    return (unsigned) (p - Hex) % 16;\n  }\n  return (unsigned) -1;  // error value\n}\n\n// Return NULL with ill-formed string\nchar *HexStringToString(char *dest, size_t size, const char *src) {\n  char *p = dest;\n  if (size &lt;= 0) {\n    return NULL;\n  }\n  size--;\n  while (*src) {\n    if (size == 0) return NULL;\n    size--;\n\n    unsigned msb = char2digit(*src++);\n    if (msb &gt; 15) return NULL;\n    unsigned lsb = char2digit(*src++);\n    if (lsb &gt; 15) return NULL;\n    char ch = (char) (msb * 16 + lsb);\n\n    // Optionally test for embedded null character\n    if (ch == 0) return NULL;\n\n    *p++ = ch;\n  }\n  *p = '\\0';\n  return dest;\n}\n\nvoid testHex(const char *s) {\n  char buf[10];\n  char *dest = HexStringToString(buf, sizeof buf, s);\n  printf(\"%-24s --&gt; '%s'\\n\", s, dest ? dest : \"NULL\");\n}\n\n#include &lt;stdio.h&gt;\nint main(void) {\n  testHex(\"48656C6C6F3B\");        // upper case\n  testHex(\"48656c6c6f3b\");        // lower case\n  testHex(\"\");\n  testHex(\"48656C6C6F3B48656C\");\n  // fails\n  testHex(\"48656C6C6F3B48656C6C\"); // Too long\n  testHex(\"48656C6C6F3B0\");        // Odd character count\n  testHex(\"48656C6C6F3Bxx\");       // Non-hex character\n  testHex(\"48006C6C6F3B\");         // null character\n  return 0;\n}        \n</code></pre>\n\n<p>Output</p>\n\n<pre><code>48656C6C6F3B             --&gt; 'Hello;'\n48656c6c6f3b             --&gt; 'Hello;'\n                         --&gt; ''\n48656C6C6F3B48656C       --&gt; 'Hello;Hel'\n48656C6C6F3B48656C6C     --&gt; 'NULL'\n48656C6C6F3B0            --&gt; 'NULL'\n48656C6C6F3Bxx           --&gt; 'NULL'\n48006C6C6F3B             --&gt; 'NULL'\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 6167030, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207971284871879/picture?type=large", "display_name": "Federico Pagano", "link": "https://stackoverflow.com/users/6167030/federico-pagano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5467, "favorite_count": 0, "accepted_answer_id": 36454030, "answer_count": 4, "score": 2, "last_activity_date": 1459961646, "creation_date": 1459950149, "last_edit_date": 1459951962, "question_id": 36452970, "link": "https://stackoverflow.com/questions/36452970/how-to-convert-a-hex-char-buffer-to-an-ascii-string-c", "title": "How to convert a Hex char buffer to an ASCII-string [C]", "body": "<p>I need to convert an Hex string to an Ascii string. Not only display it with a <code>printf</code> but also to save it in memory.\nI use this code to display it but I would like to save it. How can I do?:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint hex_to_int(char c){\n        int first = c / 16 - 3;\n        int second = c % 16;\n        int result = first*10 + second;\n        if(result &gt; 9) result--;\n        return result;\n}\n\nint hex_to_ascii(char c, char d){\n        int high = hex_to_int(c) * 16;\n        int low = hex_to_int(d);\n        return high+low;\n}\n\nint main(){\n        const char st[12] = \"48656C6C6F3B\";\n        int length = strlen(st);\n        int i;\n        char buf = 0;\n        for(i = 0; i &lt; length; i++){\n                if(i % 2 != 0){\n                        printf(\"%c\", hex_to_ascii(buf, st[i]));\n                }else{\n                        buf = st[i];\n                }\n        }\n}\n</code></pre>\n\n<p>My first solution was to use <code>sprintf(buf,\"%c\",hex_to_ascii(buf,st[i])</code> int the for loop, but this solution doesn't work because <code>sprintf</code> need a pointer of <code>char</code>.</p>\n"}, {"tags": ["c", "openssl", "ecdsa"], "comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1471244934, "post_id": 36452829, "comment_id": 65255856, "body": "I believe the short answer to your question is &quot;No&quot;, if you just created the signature, then there is no need to validate that the signature generate by libssl/libcrypto is a valid signature. The link (check your link, it isn&#39;t valid) to the <code>man page</code> with the example you site (e.g. <a href=\"https://www.openssl.org/docs/manmaster/crypto/ECDSA_verify.html\" rel=\"nofollow noreferrer\"><b>ECDSA_verify</b></a> is a generic example of how you would use each of the ecdsa functions, not particularly intended to mean you must use each of them, in order, every time any one of them is used."}], "answers": [{"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1471244472, "post_id": 38950433, "comment_id": 65255705, "body": "Old great hunter, please expand on how the NIST standard is applicable to the OP&#39;s question regarding the behavior of <code>libssl</code> and <code>libcrypto</code>?"}, {"owner": {"reputation": 805, "user_id": 6087248, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-2JVm7NK3kHs/AAAAAAAAAAI/AAAAAAAALJ0/e0Oh9JhnITQ/photo.jpg?sz=128", "display_name": "Nimrod Morag", "link": "https://stackoverflow.com/users/6087248/nimrod-morag"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1471245723, "post_id": 38950433, "comment_id": 65256132, "body": "OP asked if he needed to verify every signature he created (because he saw this pattern in the <code>OpenSSL</code> documentation). I referred him/her to the standard which <code>OpenSSL</code> must implement which states that you <b>may</b> verify your own signature after creating it."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1471246204, "post_id": 38950433, "comment_id": 65256280, "body": "What is posted as the question is the example from the openssl <i>man page</i>, e.g. <a href=\"https://www.openssl.org/docs/manmaster/crypto/ECDSA_verify.html\" rel=\"nofollow noreferrer\"><b>ECDSA_verify</b></a>.  The NIST standard isn&#39;t applicable to the question asked. I didn&#39;t downvote, because it looked like you were trying to help. I was just pointing out that the answer and the question -- don&#39;t match."}], "tags": [], "owner": {"reputation": 805, "user_id": 6087248, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-2JVm7NK3kHs/AAAAAAAAAAI/AAAAAAAALJ0/e0Oh9JhnITQ/photo.jpg?sz=128", "display_name": "Nimrod Morag", "link": "https://stackoverflow.com/users/6087248/nimrod-morag"}, "is_accepted": false, "score": 0, "last_activity_date": 1471243424, "creation_date": 1471243424, "answer_id": 38950433, "question_id": 36452829, "link": "https://stackoverflow.com/questions/36452829/openssl-ecdsa-signature-validity/38950433#38950433", "title": "OpenSSL ECDSA signature validity", "body": "<p>From <a href=\"http://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.186-4.pdf\" rel=\"nofollow\">NIST PUB 186-4 - Digital Signature Standard</a> section 4.7:</p>\n\n<blockquote>\n  <p>Signature verification may be performed by any party (i.e., the signatory, the intended recipient or any other party) using the signatory\u2019s public key. A signatory may wish to verify that the computed signature is correct, perhaps before sending the signed message to the intended recipient. The intended recipient (or any other party) verifies the signature to determine its\n  authenticity.</p>\n</blockquote>\n\n<p>(where the signatory is the signature creator)</p>\n"}], "owner": {"reputation": 2654, "user_id": 1594394, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/40fdd46c526873d9334cc8c5e1b677e8?s=128&d=identicon&r=PG", "display_name": "user14416", "link": "https://stackoverflow.com/users/1594394/user14416"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 942, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1471243424, "creation_date": 1459949847, "question_id": 36452829, "link": "https://stackoverflow.com/questions/36452829/openssl-ecdsa-signature-validity", "title": "OpenSSL ECDSA signature validity", "body": "<p>From <a href=\"https://www.openssl.org/docs/manmaster/crypto/ecdsa.html\" rel=\"nofollow\">OpenSSL documentation</a></p>\n\n<p>Creating an ECDSA signature of a given SHA-256 hash value using the named curve prime256v1 (aka P-256).</p>\n\n<p>Second step: compute the ECDSA signature of a SHA-256 hash value using ECDSA_do_sign():</p>\n\n<pre><code>sig = ECDSA_do_sign(digest, 32, eckey);\nif (sig == NULL) {\n   /* error */\n}\n</code></pre>\n\n<p>or using ECDSA_sign():</p>\n\n<pre><code>unsigned char *buffer, *pp;\nint            buf_len;\nbuf_len = ECDSA_size(eckey);\nbuffer  = OPENSSL_malloc(buf_len);\npp = buffer;\nif (ECDSA_sign(0, dgst, dgstlen, pp, &amp;buf_len, eckey) == 0) {\n   /* error */\n}\n</code></pre>\n\n<p>Third step: verify the created ECDSA signature using ECDSA_do_verify():</p>\n\n<pre><code>ret = ECDSA_do_verify(digest, 32, sig, eckey);\n</code></pre>\n\n<p>or using ECDSA_verify():</p>\n\n<pre><code>ret = ECDSA_verify(0, digest, 32, buffer, buf_len, eckey);\n</code></pre>\n\n<p>and finally evaluate the return value:</p>\n\n<pre><code>if (ret == 1) {\n   /* signature ok */\n} else if (ret == 0) {\n   /* incorrect signature */\n} else {\n   /* error */\n}\n</code></pre>\n\n<p>EOF</p>\n\n<p>This brings me to an understanding that I need to verify every signature I create with <code>ECDSA_do_sign</code> or <code>ECDSA_sign</code>, do I? Can it happen that a created signature is not valid?</p>\n"}, {"tags": ["c", "struct", "libpcap"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1459949688, "post_id": 36452602, "comment_id": 60518177, "body": "Read about opaque pointers in C. The <code>struct</code> definition is likely hidden as you are not supposed to access it."}, {"owner": {"reputation": 13, "user_id": 6166956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08b07707b8a253fbf729b88e7bd57309?s=128&d=identicon&r=PG&f=1", "display_name": "snowfox", "link": "https://stackoverflow.com/users/6166956/snowfox"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1459950440, "post_id": 36452602, "comment_id": 60518796, "body": "Yep, it looks like it..."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 6166956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08b07707b8a253fbf729b88e7bd57309?s=128&d=identicon&r=PG&f=1", "display_name": "snowfox", "link": "https://stackoverflow.com/users/6166956/snowfox"}, "edited": false, "score": 0, "creation_date": 1459950378, "post_id": 36452764, "comment_id": 60518745, "body": "Just got a       fatal error: pcap/pcap-int.h: No such file or directory  Did it work for you ?"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 13, "user_id": 6166956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08b07707b8a253fbf729b88e7bd57309?s=128&d=identicon&r=PG&f=1", "display_name": "snowfox", "link": "https://stackoverflow.com/users/6166956/snowfox"}, "edited": false, "score": 0, "creation_date": 1459950562, "post_id": 36452764, "comment_id": 60518886, "body": "hmm sorry my network was lagging, I thought I posted an update, but it had failed."}], "tags": [], "owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "is_accepted": true, "score": 1, "last_activity_date": 1459950591, "last_edit_date": 1459950591, "creation_date": 1459949673, "answer_id": 36452764, "question_id": 36452602, "link": "https://stackoverflow.com/questions/36452602/dereferencing-pointer-to-incomplete-type-for-pcap-t-structure/36452764#36452764", "title": "dereferencing pointer to incomplete type for pcap_t structure", "body": "<p>the <strong>-int</strong> in <a href=\"http://www.opensource.apple.com/source/libpcap/libpcap-9/libpcap/pcap-int.h\" rel=\"nofollow\"><code>pcap-int.h</code></a> stands for <a href=\"http://www.opensource.apple.com/source/libpcap/libpcap-9/libpcap/FILES\" rel=\"nofollow\"><strong>internal</strong></a>. However you're not including this header in your code.</p>\n\n<p>Notice that <a href=\"http://www.opensource.apple.com/source/libpcap/libpcap-9/libpcap/pcap.h\" rel=\"nofollow\"><code>pcap.h</code></a> itself does not include this header, neither does it contain a full declaration of <code>struct pcap</code>; instead just using the forward declaration in typedef:</p>\n\n<pre><code>typedef struct pcap pcap_t;\n</code></pre>\n\n<p>Just try:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;pcap/pcap-int.h&gt;\n#include &lt;pcap/pcap.h&gt;\n\nint main()\n{\n    char errbuf[PCAP_ERRBUF_SIZE];\n    pcap_t *handle;\n    handle=pcap_open_live(\"eth0\", 65535, 1, 1, errbuf);\n\n    printf(\"Handle%d\\n\", handle-&gt;fd);\n\n    pcap_close(handle);\n}\n</code></pre>\n\n<hr>\n\n<p>Alas it seems that this internal header is not installed in Linux nor on Mac. For an extra-ugly hack you can try copying the <code>pcap-int.h</code> from the link.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user862787"}, "is_accepted": false, "score": 0, "last_activity_date": 1459962364, "creation_date": 1459962364, "answer_id": 36457778, "question_id": 36452602, "link": "https://stackoverflow.com/questions/36452602/dereferencing-pointer-to-incomplete-type-for-pcap-t-structure/36457778#36457778", "title": "dereferencing pointer to incomplete type for pcap_t structure", "body": "<p>Well, you can do, instead, either</p>\n\n<pre><code>printf(\"Handle%d\\n\", pcap_fileno(handle));\n</code></pre>\n\n<p>if you're <em>not</em> going to use <code>select()</code>/<code>poll()</code>/<code>epoll()</code>/kqueues/etc. on the descriptor in question, or</p>\n\n<pre><code>if (pcap_get_selectable_fd(handle) != -1)\n    printf(\"Handle%d\\n\", pcap_get_selectable_fd(handle));\n</code></pre>\n\n<p>if you <em>are</em> going to use <code>select()</code>/<code>poll()</code>/<code>epoll()</code>/kqueues/etc. on the descriptor in question.</p>\n\n<p>The difference is that, at least currently, there will always be a file descriptor for a <code>pcap_t</code> on UN*Xes, but there is no guarantee that you will be able to use <code>select()</code>/<code>poll()</code>/<code>epoll()</code>/kqueues/etc. on that descriptor.  On newer versions of BSD-flavored OSes (including OS X), you <em>can</em> do so on descriptors for normal network interfaces, but you can't do so on some older versions of BSD-flavored OSes, and you have to work around an issue on other older versions of BSD-flavored OSes (see <a href=\"http://www.tcpdump.org/manpages/pcap_get_selectable_fd.3pcap.html\" rel=\"nofollow\">the man page for <code>pcap_get_selectable_fd()</code></a> for details), and you also can't do so on some specialized devices such as Endace DAG cards.</p>\n\n<p>So, in some cases, <code>pcap_get_selectable_fd()</code> returns -1, which means \"there <em>is</em> no FD on which you can do <code>select()</code>, etc., for this <code>pcap_t</code>\".</p>\n\n<p>(And, yes, it is intentional that <code>pcap-int.h</code> is not installed and that <code>pcap.h</code> doesn't declare the members of a <code>struct pcap_t</code>; the contents of that structure are subject to change from release to release, and newer libpcap releases have removed a <em>lot</em> of platform-dependent and device-dependent fields from that structure.)</p>\n"}], "owner": {"reputation": 13, "user_id": 6166956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08b07707b8a253fbf729b88e7bd57309?s=128&d=identicon&r=PG&f=1", "display_name": "snowfox", "link": "https://stackoverflow.com/users/6166956/snowfox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 499, "favorite_count": 0, "accepted_answer_id": 36452764, "answer_count": 2, "score": 1, "last_activity_date": 1531381166, "creation_date": 1459949287, "last_edit_date": 1531381166, "question_id": 36452602, "link": "https://stackoverflow.com/questions/36452602/dereferencing-pointer-to-incomplete-type-for-pcap-t-structure", "title": "dereferencing pointer to incomplete type for pcap_t structure", "body": "<p>I am coding in C and using libpcap library.\nI want to see the fields of a pcap_t structure, but always have the error :</p>\n\n<pre><code>error: dereferencing pointer to incomplete type\n</code></pre>\n\n<p>Minimal code is the following :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;pcap/pcap.h&gt;\n\nint main()\n{\n    char errbuf[PCAP_ERRBUF_SIZE];\n    pcap_t *handle;\n    handle=pcap_open_live(\"eth0\", 65535, 1, 1, errbuf);\n\n    printf(\"Handle%d\\n\", handle-&gt;fd);\n\n    pcap_close(handle);\n}\n</code></pre>\n\n<p>Compilation done by :</p>\n\n<pre><code>gcc test.c -lpcap\n</code></pre>\n\n<p>According to <a href=\"http://www.opensource.apple.com/source/libpcap/libpcap-9/libpcap/pcap-int.h\" rel=\"nofollow noreferrer\">http://www.opensource.apple.com/source/libpcap/libpcap-9/libpcap/pcap-int.h</a>, the pcap_t structure does have this field.\nThe libpcap is normally included, so I do not understand at all.</p>\n\n<p>Thanks!</p>\n\n<p><strong>Conclusion:</strong> Olaf seems to be right : I have this error because I am not able to access the pcap_t structure.\nAs Antti Haapala said, pcap_t struct is not defined in pcap/pcap.h but in another file.</p>\n\n<p>I did manage to do what I wanted to do anyway, even without access to the fields of the structure.</p>\n\n<p>Problem solved, thanks for your help !</p>\n"}, {"tags": ["c", "algorithm", "sorting", "function-pointers", "void-pointers"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1459949213, "post_id": 36452485, "comment_id": 60517830, "body": "<code>**pom[k++]**</code> is certainly not correct C grammar."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 1, "creation_date": 1459949420, "post_id": 36452485, "comment_id": 60517989, "body": "You&#39;ll probably want to use <code>memcpy()</code>, which can copy to/from objects of arbitrary type."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1459950080, "post_id": 36452485, "comment_id": 60518501, "body": "Hint: start by sorting an array of string pointers. Step 2: change it to an array of void pointers. step 3) change them to void pointers, pointing to non-strings (eg: structs). Step 4) change it to an array of arbitrary objects, eg structs."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1459950471, "post_id": 36452485, "comment_id": 60518812, "body": "&quot; I created it as a void * array&quot; No you didn&#39;t, you created it as a byte array of <code>len*size</code> bytes. You could use this as an <code>uint8_t</code> array."}], "answers": [{"tags": [], "owner": {"reputation": 11225, "user_id": 241013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0825ba5ec12464a2b8176642830e6a7?s=128&d=identicon&r=PG", "display_name": "Sorin", "link": "https://stackoverflow.com/users/241013/sorin"}, "is_accepted": true, "score": 2, "last_activity_date": 1459949730, "creation_date": 1459949730, "answer_id": 36452792, "question_id": 36452485, "link": "https://stackoverflow.com/questions/36452485/writing-generic-mergesort-in-c-cant-assign-value-to-void/36452792#36452792", "title": "Writing generic mergeSort in C, can&#39;t assign value to void*", "body": "<p>Yes, you need to copy <code>size</code> bytes.</p>\n\n<p>So <code>**pom[k++]** = arr[i++];</code> becomes <code>memcpy(pom + size*(k++), arr+size*(i++), size);</code> and similar for all the others.</p>\n"}], "owner": {"reputation": 205, "user_id": 2947605, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5090e45a6a464e2da7fb81cc0b727ae8?s=128&d=identicon&r=PG&f=1", "display_name": "AleksXPO", "link": "https://stackoverflow.com/users/2947605/aleksxpo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 240, "favorite_count": 0, "accepted_answer_id": 36452792, "answer_count": 1, "score": 0, "last_activity_date": 1459949730, "creation_date": 1459948972, "question_id": 36452485, "link": "https://stackoverflow.com/questions/36452485/writing-generic-mergesort-in-c-cant-assign-value-to-void", "title": "Writing generic mergeSort in C, can&#39;t assign value to void*", "body": "<p>I am trying to code up a \"generic\" mergeSort in C:</p>\n\n<pre><code>void mergeSort(void *arr, int begin, int end,int size,\n    int (*comp)(void *, void *));\n</code></pre>\n\n<p>But since you need a holder/temp array, it becomes a bit tricky.\nI am not sure how to assign values to that array, since I created it as a void * array:</p>\n\n<pre><code>int mid = (begin + end) / 2;\nint len = end - begin + 1;\nvoid *pom = malloc(len*size);\n</code></pre>\n\n<p>But I can't assign values to that array, is there a way around it?</p>\n\n<pre><code>i = begin, j = mid + 1, k = 0;\nwhile (i &lt;= mid &amp;&amp; j &lt;= end)\n    **pom[k++]** = ((*comp)((char*)arr + i*size, (char *)arr + j*size) &lt;= 0) ? arr[i] : arr[j];\nwhile (i &lt;= mid)\n    **pom[k++]** = arr[i++];\nwhile (j &lt;= end)\n    **pom[k++]** = arr[j++];\n</code></pre>\n\n<p>the bold lines give off an error.</p>\n"}, {"tags": ["c", "file"], "comments": [{"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 3, "creation_date": 1459948668, "post_id": 36452351, "comment_id": 60517409, "body": "Is there any online debugger also?"}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1459948918, "post_id": 36452351, "comment_id": 60517613, "body": "You will probably find it easier to debug this program if you <b>don&#39;t</b> use <code>scanf</code>.  Not kidding.  (There are a bunch of other reasons not to use <code>scanf</code> but for right now the important one is the debugging.)  (To convert text to machine numbers, use <code>strtol</code> for integers and <code>strtod</code> for floats.)"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 2, "creation_date": 1459949022, "post_id": 36452351, "comment_id": 60517684, "body": "Just look at the <code>faceTable</code> and ask yourself whether the dimensions are a) of correct size, b) correctly declared, c) in correct order..."}], "answers": [{"tags": [], "owner": {"reputation": 16587, "user_id": 177053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6c516626d381a1ea383cedd1799486?s=128&d=identicon&r=PG", "display_name": "Vasfed", "link": "https://stackoverflow.com/users/177053/vasfed"}, "is_accepted": false, "score": 2, "last_activity_date": 1459949035, "creation_date": 1459949035, "answer_id": 36452512, "question_id": 36452351, "link": "https://stackoverflow.com/questions/36452351/fail-to-read-a-file-with-fscanf/36452512#36452512", "title": "fail to read a file with fscanf", "body": "<p>Both <code>vertexTable</code> and <code>faceTable</code> are of size 1 by 2000, so you're writing to unallocated memory, which leads to \"undefined behavior\"</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 6166921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2236782c54c1966f1ab44d5897afe71d?s=128&d=identicon&r=PG&f=1", "display_name": "J.Doe", "link": "https://stackoverflow.com/users/6166921/j-doe"}, "edited": false, "score": 0, "creation_date": 1459950072, "post_id": 36452616, "comment_id": 60518491, "body": "is a malloc really the only solution when I exceed the rage?"}], "tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": false, "score": 1, "last_activity_date": 1459949324, "creation_date": 1459949324, "answer_id": 36452616, "question_id": 36452351, "link": "https://stackoverflow.com/questions/36452351/fail-to-read-a-file-with-fscanf/36452616#36452616", "title": "fail to read a file with fscanf", "body": "<p>These declarations are wrong:</p>\n\n<pre><code>float vertexTable[][2000]={0};\nint faceTable[][2000]={0};\n</code></pre>\n\n<p>Instead you need this:</p>\n\n<pre><code>float vertexTable[2000][3]={0};\nint faceTable[2000][8]={0};\n</code></pre>\n\n<p>I hope you are aware that you'll still run into problems if the number of vertexes or the number of faces exceeds 2000.</p>\n"}], "owner": {"reputation": 1, "user_id": 6166921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2236782c54c1966f1ab44d5897afe71d?s=128&d=identicon&r=PG&f=1", "display_name": "J.Doe", "link": "https://stackoverflow.com/users/6166921/j-doe"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "closed_date": 1459952432, "answer_count": 2, "score": -6, "last_activity_date": 1459949324, "creation_date": 1459948599, "last_edit_date": 1459948892, "question_id": 36452351, "link": "https://stackoverflow.com/questions/36452351/fail-to-read-a-file-with-fscanf", "closed_reason": "Not suitable for this site", "title": "fail to read a file with fscanf", "body": "<p>I ve written the following code, without any compilation errors nor warnings. But my program just crashes every time? Why and how could I fix that issue?</p>\n\n<p><strong>the code</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main ()\n{\n  FILE *fp;\n\n  int vertexIndex=0;\n  float vertexTable[][2000]={0};\n  int faceIndex = 0;\n  int faceTable[][2000]={0};\n  char lineHeader[128]={0};\n\n  fp = fopen(\"C://Users//matt//Desktop//mannekeCoord.txt\",\"r\");\n\n  if(fp == NULL) \n  {\n     perror(\"Error in opening file\");\n     return(-1);\n  }\n\n  do\n  {\n    int res = fscanf(fp, \"%s\", lineHeader);\n    if(res ==EOF)\n      {break;}\n\n    //vertex\n    if ( strcmp( lineHeader, \"v\" ) == 0 ){\n      fscanf(fp, \"%f %f %f\\n\", &amp;vertexTable[vertexIndex][0], &amp;vertexTable[vertexIndex][1], &amp;vertexTable[vertexIndex][2]);\n      vertexIndex++;\n    }\n\n    //face \n    if ( strcmp( lineHeader, \"f\" ) == 0 ){\n      fscanf(fp, \"%d//%d %d//%d %d//%d %d//%d\\n\", &amp;faceTable[faceIndex][0], &amp;faceTable[faceIndex][1], &amp;faceTable[faceIndex][2], &amp;faceTable[faceIndex][3], &amp;faceTable[faceIndex][4],  &amp;faceTable[faceIndex][5], &amp;faceTable[faceIndex][6],  &amp;faceTable[faceIndex][7] );\n      faceIndex++;\n    }\n\n  } while(1);\n\n  fclose(fp);\n  return 0;\n}\n</code></pre>\n\n<p>this is the short version of the content of the file it has to read:</p>\n\n<pre><code>  v -0.999718 -1.004708 0.999546\n\n  v -0.932863 -2.122097 -1.108066\n\n  v -1.000000 1.000000 1.000000\n\n  v -0.980325 0.671164 -1.031669\n\n  v 0.094571 -2.805363 -1.376969\n\n  v -0.437903 -2.617016 -1.306834\n\n  f 728//48 782//48 785//48 751//48\n\n  f 758//48 788//48 789//48 759//48\n\n  f 727//48 783//48 782//48 728//48\n\n  f 793//402 797//402 796//402 792//402\n\n  f 790//48 794//48 797//48 793//48\n\n  f 791//403 795//403 794//403 790//403\n\n  f 783//404 791//404 790//404 782//404\n\n  f 784//405 792//405 796//405 788//405\n\n  f 789//48 797//48 794//48 786//48\n\n  f 786//406 794//406 795//406 787//406\n</code></pre>\n\n<p>I compile it using this website: <a href=\"http://www.onlinecompiler.net/\" rel=\"nofollow\">http://www.onlinecompiler.net/</a></p>\n"}, {"tags": ["c", "gtk", "gtk2"], "comments": [{"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1459949934, "post_id": 36452200, "comment_id": 60518384, "body": "See my comment to @el.pescado&#39;s answer. You have some errors."}, {"owner": {"reputation": 13900, "user_id": 2020827, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/e6c7105ef9148e931ad05a6692155046?s=128&d=identicon&r=PG&f=1", "display_name": "sergej", "link": "https://stackoverflow.com/users/2020827/sergej"}, "reply_to_user": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1459950274, "post_id": 36452200, "comment_id": 60518652, "body": "@unwind You are right, thanks!"}, {"owner": {"reputation": 1560, "user_id": 2030219, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6314bf166040bf1eb9deb3a6c03d6864?s=128&d=identicon&r=PG", "display_name": "Joel", "link": "https://stackoverflow.com/users/2030219/joel"}, "edited": false, "score": 0, "creation_date": 1459953195, "post_id": 36452200, "comment_id": 60521082, "body": "Why not gtkmm instead since you are mixing gtk (c) with C++?"}, {"owner": {"reputation": 13900, "user_id": 2020827, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/e6c7105ef9148e931ad05a6692155046?s=128&d=identicon&r=PG&f=1", "display_name": "sergej", "link": "https://stackoverflow.com/users/2020827/sergej"}, "reply_to_user": {"reputation": 1560, "user_id": 2030219, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6314bf166040bf1eb9deb3a6c03d6864?s=128&d=identicon&r=PG", "display_name": "Joel", "link": "https://stackoverflow.com/users/2030219/joel"}, "edited": false, "score": 0, "creation_date": 1459953814, "post_id": 36452200, "comment_id": 60521588, "body": "@Joel I can not use gtkmm, because I am using a c compiler. Where am I mixing C with C++?"}, {"owner": {"reputation": 1560, "user_id": 2030219, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6314bf166040bf1eb9deb3a6c03d6864?s=128&d=identicon&r=PG", "display_name": "Joel", "link": "https://stackoverflow.com/users/2030219/joel"}, "edited": false, "score": 0, "creation_date": 1459962643, "post_id": 36452200, "comment_id": 60527941, "body": "There&#39;s nothing wrong mixing C libraries with C++, but there&#39;s a reason that there are GTK ports. I only commented as an alternative and get the advantage of C++ with gtkmm. My $0.02."}], "answers": [{"comments": [{"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1459949450, "post_id": 36452349, "comment_id": 60518021, "body": "The second argument to the callback is just <code>gpointer</code>, not <code>gpointer *</code>. And since that&#39;s just a <code>void *</code>, the cast is not necessary."}, {"owner": {"reputation": 17713, "user_id": 226648, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3196df423fd95dc4fce7dfadb8ec9953?s=128&d=identicon&r=PG", "display_name": "el.pescado", "link": "https://stackoverflow.com/users/226648/el-pescado"}, "reply_to_user": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1459949760, "post_id": 36452349, "comment_id": 60518230, "body": "You&#39;re right. I didn&#39;t notice it when copying code from question."}, {"owner": {"reputation": 13900, "user_id": 2020827, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/e6c7105ef9148e931ad05a6692155046?s=128&d=identicon&r=PG&f=1", "display_name": "sergej", "link": "https://stackoverflow.com/users/2020827/sergej"}, "edited": false, "score": 0, "creation_date": 1459958764, "post_id": 36452349, "comment_id": 60525447, "body": "Many thanks, I like this solution, works like a charm."}], "tags": [], "owner": {"reputation": 17713, "user_id": 226648, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3196df423fd95dc4fce7dfadb8ec9953?s=128&d=identicon&r=PG", "display_name": "el.pescado", "link": "https://stackoverflow.com/users/226648/el-pescado"}, "is_accepted": true, "score": 7, "last_activity_date": 1459949738, "last_edit_date": 1459949738, "creation_date": 1459948597, "answer_id": 36452349, "question_id": 36452200, "link": "https://stackoverflow.com/questions/36452200/is-it-possible-to-add-private-data-to-a-gtkwidget/36452349#36452349", "title": "Is it possible to add private data to a GtkWidget?", "body": "<blockquote>\n  <p>Is it possible to add private data to a GtkWidget?</p>\n</blockquote>\n\n<p>You can use functions <a href=\"https://developer.gnome.org/gobject/unstable/gobject-The-Base-Object-Type.html#g-object-set-data\" rel=\"noreferrer\"><code>g_object_set_data</code></a> and <a href=\"https://developer.gnome.org/gobject/unstable/gobject-The-Base-Object-Type.html#g-object-get-data\" rel=\"noreferrer\"><code>g_object_get_data</code></a> to add arbitrary data to any <code>GObject</code>.</p>\n\n<pre><code>MyPrivateData *priv = ...\ng_object_set_data(G_OBJECT(widget), \"my private data\", priv);\n\n// ...\n\nvoid on_checkbox1_toggled(GtkWidget* widget, gpointer data) {\n    MyClass* me = data;\n    MyPrivateData* priv = (MyPrivateData*) g_object_get_data(G_OBJECT(widget), \"my private data\");\n\n    MyClass_foo(me, priv);\n}\n</code></pre>\n"}], "owner": {"reputation": 13900, "user_id": 2020827, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/e6c7105ef9148e931ad05a6692155046?s=128&d=identicon&r=PG&f=1", "display_name": "sergej", "link": "https://stackoverflow.com/users/2020827/sergej"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 652, "favorite_count": 1, "accepted_answer_id": 36452349, "answer_count": 1, "score": 4, "last_activity_date": 1459961584, "creation_date": 1459948248, "last_edit_date": 1459961584, "question_id": 36452200, "link": "https://stackoverflow.com/questions/36452200/is-it-possible-to-add-private-data-to-a-gtkwidget", "title": "Is it possible to add private data to a GtkWidget?", "body": "<p>Is it possible to add <em>private data</em> to a <code>GtkWidget</code>?</p>\n\n<p><strong>Background:</strong></p>\n\n<p>I have many <code>GtkCheckBotton</code>s, all these widgets are connected to the same callback. In the callback, I would like to handle the widgets private data (or at least distinguish between the widgets).</p>\n\n<p><strong>Example:</strong></p>\n\n<pre><code>// checkbox signal callback\nvoid on_checkbox_tcoggled(GtkWidget* widget, gpointer data) {\n    MyClass* me = data;\n    MyPrivateData* priv = widget-&gt;priv;  // ???\n\n    MyClass_foo(me, priv);\n}\n</code></pre>\n"}, {"tags": ["c", "cmake", "sdl", "clion"], "comments": [{"owner": {"reputation": 16953, "user_id": 2799037, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/2uPVa.png?s=128&g=1", "display_name": "usr1234567", "link": "https://stackoverflow.com/users/2799037/usr1234567"}, "edited": false, "score": 0, "creation_date": 1459948296, "post_id": 36451978, "comment_id": 60517110, "body": "Why not the included FindSDL.cmake? Does it not support SDL2? <a href=\"https://cmake.org/cmake/help/v3.5/module/FindSDL.html\" rel=\"nofollow noreferrer\">cmake.org/cmake/help/v3.5/module/FindSDL.html</a>"}], "answers": [{"tags": [], "owner": {"reputation": 3, "user_id": 5775931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5f26dc7be18bce72666f1f633d0365b?s=128&d=identicon&r=PG&f=1", "display_name": "InzaneNova", "link": "https://stackoverflow.com/users/5775931/inzanenova"}, "is_accepted": false, "score": 0, "last_activity_date": 1483042640, "creation_date": 1483042640, "answer_id": 41386602, "question_id": 36451978, "link": "https://stackoverflow.com/questions/36451978/linking-sdl-library-in-clion-on-windows-10/41386602#41386602", "title": "Linking SDL library in CLion on Windows 10", "body": "<p>This is for anyone with a similar problem.</p>\n\n<p>I managed to fix this by basically deleting everything I had tried.</p>\n\n<p>I downloaded the MinGW compiler, and chose these packages:</p>\n\n<ul>\n<li><p>mingw-developer-toolkit</p></li>\n<li><p>mingw32-base</p></li>\n<li><p>mingw32-gcc-g++</p></li>\n<li><p>msys-base</p></li>\n</ul>\n\n<p>After that I downloaded the \"OpenGL-tutorial_v0015_33\" from <a href=\"http://www.opengl-tutorial.org/download/\" rel=\"nofollow noreferrer\" title=\"http://www.opengl-tutorial.org/download/\">opengl-tutorial.org</a>. And that worked (I really don't know what to do if that doesn't work). And afterwards simply salvaged the small parts of the code I needed, if you know a little bit about CMake files you'll figure out what you'll need, and it is slightly commented.</p>\n\n<p>Good luck to anyone else wanting to traverse this treacherous path.</p>\n"}], "owner": {"reputation": 848, "user_id": 3087555, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/fe453dd9d1b38e7fcc19dc5f71e3cc4a?s=128&d=identicon&r=PG&f=1", "display_name": "ZeppRock", "link": "https://stackoverflow.com/users/3087555/zepprock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 563, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1483042640, "creation_date": 1459947724, "question_id": 36451978, "link": "https://stackoverflow.com/questions/36451978/linking-sdl-library-in-clion-on-windows-10", "title": "Linking SDL library in CLion on Windows 10", "body": "<p>I am currently having trouble when i am trying to link the \"SDL\" library to clion. I am running a windows 10 computer. Here is my CmakeLists.txt file:</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.5)\nproject(testing2)\n\n#includes cmake/FindSDL2.cmake\nset(CMAKE_MODULE_PATH ${CMAKE_MODULE_PATH} \"${PROJECT_SOURCE_DIR}/cmake\")\n\nfind_package(SDL2 REQUIRED)\ninclude_directories(${SDL2_INCLUDE_DIR})\n\nset(SOURCE_FILES src/main.c)\n\nadd_executable(testing2 ${SOURCE_FILES})\ntarget_link_libraries(testing2 ${SDL2_LIBRARY})\n</code></pre>\n\n<p>I am using these \"FindSDL2.cmake\": <a href=\"https://github.com/tcbrindle/sdl2-cmake-scripts\" rel=\"nofollow\">https://github.com/tcbrindle/sdl2-cmake-scripts</a>.</p>\n\n<p>When i reload the CMakeLists.txt it says that the SDL2 cannot be found. I have made a directory on my desktop where I have stored the SDL files.</p>\n"}, {"tags": ["c", "linux", "timing"], "comments": [{"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 2, "creation_date": 1459948097, "post_id": 36451754, "comment_id": 60516955, "body": "You can use a timer to schedule the output, and reverse the process: do the output immediately timer triggers, then do processing for the next triggering after that."}, {"owner": {"reputation": 101, "user_id": 4233412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/952b943fe8aebaa7d9b72976f83fc5a3?s=128&d=identicon&r=PG", "display_name": "Pentium100", "link": "https://stackoverflow.com/users/4233412/pentium100"}, "reply_to_user": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1459949301, "post_id": 36451754, "comment_id": 60517895, "body": "@user3528438, I&#39;ll try this, thanks. I&#39;ll need to set the timer to a different value sometimes, but hopefully I can do that immediately after sending the packet."}], "owner": {"reputation": 101, "user_id": 4233412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/952b943fe8aebaa7d9b72976f83fc5a3?s=128&d=identicon&r=PG", "display_name": "Pentium100", "link": "https://stackoverflow.com/users/4233412/pentium100"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1459947125, "creation_date": 1459947125, "question_id": 36451754, "link": "https://stackoverflow.com/questions/36451754/getting-more-precise-timing-control-in-linux", "title": "Getting more precise timing control in Linux", "body": "<p>I am trying to create a low-jitter multicast source for digital TV. The program in question should buffer the input, calculate the intended times from the PCR values in the stream and then send the packets at relatively precise intervals. However, this is not running on a RTOS, so some timing variance is expected.</p>\n\n<p>This is the basic code (the relevant variables are initialized, I just omitted the code here):</p>\n\n<pre><code>while (!sendstop) { \n    //snip\n    //put 7 MPEG packets in one UDP packet buffer \"outpkt\"\n    //snip\n      waittime = //calculate from PCR values - value is in microseconds\n    //waittime is in the order of 2000 -&gt; 2ms\n              sleeptime=curtime;\n              sleeptime.tv_nsec += waittime * 1000L;\n                    sleeptime.tv_sec += sleeptime.tv_nsec / 1000000000;\n                    sleeptime.tv_nsec %= 1000000000;\n              while (clock_nanosleep(CLOCK_MONOTONIC, TIMER_ABSTIME, &amp;sleeptime, NULL) &amp;&amp; errno == EINTR) {\n                    printf(\"I\");\n              }       \n              sendto(sck,outpkt,1316,0,res-&gt;ai_addr,res-&gt;ai_addrlen);    //send the packet       \n              clock_gettime(CLOCK_MONOTONIC,&amp;curtime);                            \n}\n</code></pre>\n\n<p>However, this results in the sending being too slow (since there is some processing that also takes time), so the buffer fills up. So, I thought that I should get the difference between \"sleeptime\" (the time that should have been) and \"curtime\" (the actual time) and the subtract it from the future \"waittime\". This almost works, but now is a bit too fast and now I get an empty buffer.</p>\n\n<p>My next idea was to multiply the difference by some value before subtracting it, like this (just above \"while...\"):</p>\n\n<pre><code>difn=curtime.tv_nsec-ostime.tv_nsec;\nif (difn&lt;0) difn+=1000000000; \n  sleeptime.tv_nsec = sleeptime.tv_nsec-(difn*difnc)/1000;  //difnc - adjustment\n   if (sleeptime.tv_nsec&lt;0) {\n        sleeptime.tv_nsec+=1000000000;\n        sleeptime.tv_sec--;\n   }\n</code></pre>\n\n<p>However, different values of difnc work at different times of day, servers and so on. There needs to be some kind of automatic adjustment based on the operation of the program. The best I could figure out was to increment/decrement it every time the buffer is full or empty, however, this leads to slow cycles of \"too fast\" - \"too slow\". I tried to adjust the \"difnc\" value based on how full/empty the buffer is but that too just leads of \"slow\"-\"fast\" cycles.</p>\n\n<p>How can I properly automatically derive the \"difnc\" value or is there some other method of getting a more precise timing than with just the \"clock_nanosleep\" function but without busy waits (the server has other things to do)?</p>\n"}, {"tags": ["c", "gdb"], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 6165702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d245d994a4ccc6ff2828496241364a17?s=128&d=identicon&r=PG&f=1", "display_name": "severine", "link": "https://stackoverflow.com/users/6165702/severine"}, "edited": false, "score": 0, "creation_date": 1460036558, "post_id": 36452679, "comment_id": 60566059, "body": "Thanks, I&#39;m currently trying the python approach and it seems to work fine!! Just wondering how to know that the function boundary is reached. Is <code>block.function != None</code> the correct way to stop recursion ?"}, {"owner": {"reputation": 18871, "user_id": 1442050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e975c669f2ce0f2be4613f1e123864b3?s=128&d=identicon&r=PG", "display_name": "Tom Tromey", "link": "https://stackoverflow.com/users/1442050/tom-tromey"}, "reply_to_user": {"reputation": 41, "user_id": 6165702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d245d994a4ccc6ff2828496241364a17?s=128&d=identicon&r=PG&f=1", "display_name": "severine", "link": "https://stackoverflow.com/users/6165702/severine"}, "edited": false, "score": 0, "creation_date": 1460037826, "post_id": 36452679, "comment_id": 60567176, "body": "Yep, that&#39;s the way; though there&#39;s one wrinkle, which is that you might see a non-<code>None</code> function if the function was inlined.  So sometimes you might want to extend the walk until the first non-inlined function."}], "tags": [], "owner": {"reputation": 18871, "user_id": 1442050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e975c669f2ce0f2be4613f1e123864b3?s=128&d=identicon&r=PG", "display_name": "Tom Tromey", "link": "https://stackoverflow.com/users/1442050/tom-tromey"}, "is_accepted": false, "score": 4, "last_activity_date": 1459949467, "creation_date": 1459949467, "answer_id": 36452679, "question_id": 36451265, "link": "https://stackoverflow.com/questions/36451265/gdb-how-can-i-get-the-name-of-all-local-variables/36452679#36452679", "title": "GDB : how can I get the name of all local variables?", "body": "<p>It sounds like you really want a way to compare some locals at two points in time.  There are a couple of ways to do this.</p>\n\n<p>One low-tech way is to dump the variables with <code>info locals</code>.  You can dump them to a file using the <code>set logging</code> facility, and you can completely automate this by setting a breakpoint whose <code>commands</code> do the logging, the dumping, disable the logging, and finally end with <code>continue</code>.</p>\n\n<p>In this approach you would write a separate script to compare the results.</p>\n\n<p>Another approach is to use gdb's Python scripting facility.  It's easy to get the local variables here: get the selected frame with <code>gdb.selected_frame()</code>; then get the frame's block (<code>frame.block()</code>); then iterate over the locals of the block to get that block's variables, and walk up the blocks (see <code>gdb.Block.superblock</code>) until you reach the function boundary.</p>\n\n<p>You can either evaluate or ignore symbols you find (if, say, you only want to compare some subset).  And, you can decide how you want to compare the values you collect.</p>\n\n<p>In this approach all the work is done in gdb, without any separate comparison script.</p>\n"}], "owner": {"reputation": 41, "user_id": 6165702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d245d994a4ccc6ff2828496241364a17?s=128&d=identicon&r=PG&f=1", "display_name": "severine", "link": "https://stackoverflow.com/users/6165702/severine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 930, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1459949467, "creation_date": 1459945863, "question_id": 36451265, "link": "https://stackoverflow.com/questions/36451265/gdb-how-can-i-get-the-name-of-all-local-variables", "title": "GDB : how can I get the name of all local variables?", "body": "<p>Is there a way in gdb to get the name of all local variables ? I know that </p>\n\n<p><strong>info local</strong></p>\n\n<p>prints names and values of local variables, but I would like to automatically compare the value of all the locals at several points of execution of a function (and there is a huge number of local variables in this function, so doing it manually one by one would be tedious ...)</p>\n\n<p>Thanks !</p>\n"}, {"tags": ["c", "pointers", "struct", "malloc", "dynamic-memory-allocation"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1459944571, "post_id": 36450706, "comment_id": 60514023, "body": "<a href=\"http://stackoverflow.com/q/605845/2173917\">Please see this discussion on why not to cast the return value of <code>malloc()</code> and family in <code>C</code>.</a>."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1459947443, "post_id": 36450706, "comment_id": 60516394, "body": "just when you think it can&#39;t get any worse, then <code>strncpy</code> kicks you in the gut"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1459948005, "post_id": 36450706, "comment_id": 60516870, "body": "Indeed. Google &quot;why is strncpy unsafe&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "is_accepted": true, "score": 3, "last_activity_date": 1459945194, "last_edit_date": 1459945194, "creation_date": 1459944883, "answer_id": 36450863, "question_id": 36450706, "link": "https://stackoverflow.com/questions/36450706/structures-using-pointers-get-wrong/36450863#36450863", "title": "Structures using pointers get wrong", "body": "<p>In <code>initBob</code> you have:</p>\n\n<pre><code>char* str = (char*)calloc(LENGTH_OF_BOB, sizeof(char));\nchar string[] = \"bob\";\nstr = string;\ncurrBob-&gt;name = str;\n</code></pre>\n\n<p>That sets <code>currBob-&gt;name</code> to point to a <em>local automatic variable</em>. Not to the dynamcically allocated buffer. The automatic variable goes out of scope when the function exits and hence is no longer valid. And of course it cannot be freed as it is not dynamically allocated memory.</p>\n\n<p>I'm not really sure what you are trying to do there. Besides incorrectly setting <code>str</code> to point to a local variable you also have an unnecessary <code>strcat</code>. I'm guessing you are trying to NUL terminate the buffer. But that is unnecessary as initialising an unsized char array with a string literal already guarantees NUL termination.</p>\n\n<p>With these issues in mind, the <code>initBob</code> function should be more like:</p>\n\n<pre><code>void initBob(bob *currBob)\n{\n    currBob-&gt;name = calloc(LENGTH_OF_BOB, sizeof(char));\n    if (currBob-&gt;name)\n    {\n        strcpy(currBob-&gt;name, \"bob\");  \n        currBob-&gt;fixed = 0;\n        currBob-&gt;maxFix = 3;\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 569, "user_id": 4181430, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1488320649/picture?type=large", "display_name": "jurhas", "link": "https://stackoverflow.com/users/4181430/jurhas"}, "is_accepted": false, "score": 0, "last_activity_date": 1459946136, "creation_date": 1459946136, "answer_id": 36451356, "question_id": 36450706, "link": "https://stackoverflow.com/questions/36450706/structures-using-pointers-get-wrong/36451356#36451356", "title": "Structures using pointers get wrong", "body": "<p>I do not know if it is just a simple example to learn how do it or if it is really your scope, but if you need to do this use :strdup()</p>\n\n<pre><code>void initBob(bob *currBob)\n{ \nif (currBob-&gt;name)\n{\n    currBob-&gt;name=strdup(\"bob\");  \n    currBob-&gt;fixed = 0;\n    currBob-&gt;maxFix = 3;\n}\n}\n</code></pre>\n\n<p>than you have to free() it somewhere, because malloc() the string... it is ANSI standard</p>\n"}], "owner": {"reputation": 63, "user_id": 5761512, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/a88a70fbc39b2190569d11806fc3f628?s=128&d=identicon&r=PG&f=1", "display_name": "DR J", "link": "https://stackoverflow.com/users/5761512/dr-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "closed_date": 1460243627, "accepted_answer_id": 36450863, "answer_count": 2, "score": -1, "last_activity_date": 1459947340, "creation_date": 1459944538, "last_edit_date": 1459947340, "question_id": 36450706, "link": "https://stackoverflow.com/questions/36450706/structures-using-pointers-get-wrong", "closed_reason": "Not suitable for this site", "title": "Structures using pointers get wrong", "body": "<p>I made code of bob the builder, it's a structure, every bob the builder has name and two more integers (doesn't really matter). there are three functions </p>\n\n<ol>\n<li><p>initialize the struct(with \"bob\" and 0 and 3)</p></li>\n<li><p>the second function get two structures  and it's needs to copy between those structures</p></li>\n<li><p>the third function is to free the names(char*) of every bob.</p></li>\n</ol>\n\n<p>Firstly, the second function(copy) went wrong in the debugging because it didn't copy the name(Need your help in analyzing why it happened) and secondly, the code crashed in the free function. Can someone tell me how to free names(char*) of structures?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#define LENGTH_OF_BOB 4\n\ntypedef struct bobTheBuilder\n{\n    char* name;\n    int fixed;\n    int maxFix;\n}bob;\n\n//typedef struct bobTHeBuilder bob;\n\nvoid deleteBob(bob currBob);\nvoid initBob(bob *currBob);\nvoid copyStruct(bob* dst, bob src);\nint main(void)\n{\n    bob currBob = {0,0,0};\n    bob secondBob;\n    initBob(&amp;currBob);\n    copyStruct(&amp;secondBob, currBob);\n    deleteBob(currBob);\n    deleteBob(secondBob);\n    system(\"PAUSE\");    \n    return 0;\n}\n/*\n*/\nvoid initBob(bob *currBob)\n{\n    char* str = (char*)calloc(LENGTH_OF_BOB, sizeof(char));\n    char string[] = \"bob\";\n    if (str)\n    {\n        strcat(string, \"\\0\");\n        str = string;\n\n        currBob-&gt;name = str;\n        currBob-&gt;fixed = 0;\n        currBob-&gt;maxFix = 3;\n    }\n}\n/*\n*/\nvoid deleteBob(bob currBob)\n{\n    free(currBob.name);\n}\nvoid copyStruct(bob* dest, bob src)\n{\n    dest-&gt;fixed = src.fixed;\n    dest-&gt;maxFix = src.maxFix;\n    dest-&gt;name = (char*)malloc(sizeof(char) *LENGTH_OF_BOB);\n    strncpy(dest-&gt;name, src.name, LENGTH_OF_BOB);\n}\n</code></pre>\n"}, {"tags": ["c", "fft", "fftw", "libsndfile"], "comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1459943463, "post_id": 36450196, "comment_id": 60513195, "body": "and what does the <code>castToDouble</code> do?"}, {"owner": {"reputation": 67, "user_id": 5651975, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bd8caf6f8a8baa8315bf88c25869218b?s=128&d=identicon&r=PG&f=1", "display_name": "Kokos34", "link": "https://stackoverflow.com/users/5651975/kokos34"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1459944107, "post_id": 36450196, "comment_id": 60513692, "body": "Since sndfile library saves samples as floats and fftw requires double type samples, it simply casts every sample to double."}, {"owner": {"reputation": 8727, "user_id": 2999346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dQ1wB.png?s=128&g=1", "display_name": "francis", "link": "https://stackoverflow.com/users/2999346/francis"}, "edited": false, "score": 0, "creation_date": 1459965148, "post_id": 36450196, "comment_id": 60529547, "body": "the fft of fftw is not normalized. See <a href=\"http://www.fftw.org/doc/The-1d-Discrete-Fourier-Transform-_0028DFT_0029.html#The-1d-Discrete-Fourier-Transform-_0028DFT_0029\" rel=\"nofollow noreferrer\">fftw.org/doc/&hellip;</a> : if the buffer is 53000 long, then out[0][0] (&quot;zero frequency&quot;) is 53000 times the average of the buffer, that is the sum of all the items of the buffer."}], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 5651975, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bd8caf6f8a8baa8315bf88c25869218b?s=128&d=identicon&r=PG&f=1", "display_name": "Kokos34", "link": "https://stackoverflow.com/users/5651975/kokos34"}, "edited": false, "score": 1, "creation_date": 1459946703, "post_id": 36451396, "comment_id": 60515767, "body": "In such situation each real component in out array (out[i][0]) is equal to 0"}, {"owner": {"reputation": 12989, "user_id": 2994596, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YU9Zw.png?s=128&g=1", "display_name": "SleuthEye", "link": "https://stackoverflow.com/users/2994596/sleutheye"}, "edited": false, "score": 1, "creation_date": 1459951081, "post_id": 36451396, "comment_id": 60519340, "body": "Hanning window is missing <code>i</code> factor in <code>cos</code> argument, so it should be <code>0.5 * (1.0 - cos(2.0 * i * M_PI &#47; (bufferLen - 1)))</code>"}, {"owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "reply_to_user": {"reputation": 12989, "user_id": 2994596, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YU9Zw.png?s=128&g=1", "display_name": "SleuthEye", "link": "https://stackoverflow.com/users/2994596/sleutheye"}, "edited": false, "score": 0, "creation_date": 1459951638, "post_id": 36451396, "comment_id": 60519795, "body": "@SleuthEye Thanks for spotting that"}, {"owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "reply_to_user": {"reputation": 67, "user_id": 5651975, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bd8caf6f8a8baa8315bf88c25869218b?s=128&d=identicon&r=PG&f=1", "display_name": "Kokos34", "link": "https://stackoverflow.com/users/5651975/kokos34"}, "edited": false, "score": 0, "creation_date": 1459951744, "post_id": 36451396, "comment_id": 60519876, "body": "@Kokos34 I missed out a factor in the Hanning window formula. Try it again now."}, {"owner": {"reputation": 67, "user_id": 5651975, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bd8caf6f8a8baa8315bf88c25869218b?s=128&d=identicon&r=PG&f=1", "display_name": "Kokos34", "link": "https://stackoverflow.com/users/5651975/kokos34"}, "edited": false, "score": 0, "creation_date": 1459952328, "post_id": 36451396, "comment_id": 60520335, "body": "@squeamishossifrage It still does not give me the answer I am expecting. Isn&#39;t out[0][0] a fundamental frequency of the signal? The answer is -1.87 and after I calculate magnitude as sqrt(re^2 + im^2), it gives the result of 1.87. What else do i have to do to get the result of fundamental frequency of the signal?"}, {"owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "reply_to_user": {"reputation": 67, "user_id": 5651975, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bd8caf6f8a8baa8315bf88c25869218b?s=128&d=identicon&r=PG&f=1", "display_name": "Kokos34", "link": "https://stackoverflow.com/users/5651975/kokos34"}, "edited": false, "score": 0, "creation_date": 1459953228, "post_id": 36451396, "comment_id": 60521115, "body": "@Kokos34 No, <code>out[0]</code> is the DC component You need to find the value of <code>i</code> that gives you the largest <code>out[i]</code>. This will correspond to a frequency of <code>i * samplesPerSecond &#47; bufferLen</code>."}, {"owner": {"reputation": 67, "user_id": 5651975, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bd8caf6f8a8baa8315bf88c25869218b?s=128&d=identicon&r=PG&f=1", "display_name": "Kokos34", "link": "https://stackoverflow.com/users/5651975/kokos34"}, "edited": false, "score": 0, "creation_date": 1459954480, "post_id": 36451396, "comment_id": 60522118, "body": "@squeamishossifrage Ok, just the summary now: samplesPerSecond is 44,1kHz, so 44100, bufferLen is about 55k and max i according to function seeking for index of max value of buffer was 639. I calculated fundamental frequency of the signal as 639*44100/55000), which was 522samples/second. Is that correct?"}, {"owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "reply_to_user": {"reputation": 67, "user_id": 5651975, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bd8caf6f8a8baa8315bf88c25869218b?s=128&d=identicon&r=PG&f=1", "display_name": "Kokos34", "link": "https://stackoverflow.com/users/5651975/kokos34"}, "edited": false, "score": 0, "creation_date": 1459954768, "post_id": 36451396, "comment_id": 60522341, "body": "@Kokos34 Almost. The result is a frequency (in Hz), and I get a value of 512."}, {"owner": {"reputation": 67, "user_id": 5651975, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bd8caf6f8a8baa8315bf88c25869218b?s=128&d=identicon&r=PG&f=1", "display_name": "Kokos34", "link": "https://stackoverflow.com/users/5651975/kokos34"}, "edited": false, "score": 0, "creation_date": 1459955766, "post_id": 36451396, "comment_id": 60523139, "body": "@squeamishossifrage Where did that value come from? What input values did you use? The methodology is correct, right?"}, {"owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 0, "creation_date": 1459957207, "post_id": 36451396, "comment_id": 60524242, "body": "I used your input values: 639*44100/55000=512.36. With complex waveforms, this method will sometimes discover harmonics of the fundamental frequency instead of the fundamental frequency itself. To find the fundamental frequency more reliably, you should probably use a technique such as <a href=\"http://cnx.org/contents/i5AAkZCP@2/Pitch-Detection-Algorithms\" rel=\"nofollow noreferrer\">autocorrelation or harmonic product spectrum analysis</a>"}, {"owner": {"reputation": 67, "user_id": 5651975, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bd8caf6f8a8baa8315bf88c25869218b?s=128&d=identicon&r=PG&f=1", "display_name": "Kokos34", "link": "https://stackoverflow.com/users/5651975/kokos34"}, "edited": false, "score": 0, "creation_date": 1459959678, "post_id": 36451396, "comment_id": 60526088, "body": "@squeamishossifrage This is exactly my task! I have to: 1. Check fundamental frequency using FFT 2. Check my result using autocorrelation function.  May I ask you few questions concerning autocorrelation in private messages? I also implemented it however few things also fail and I have no wonder why."}], "tags": [], "owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "is_accepted": true, "score": 1, "last_activity_date": 1459951667, "last_edit_date": 1459951667, "creation_date": 1459946237, "answer_id": 36451396, "question_id": 36450196, "link": "https://stackoverflow.com/questions/36450196/fftw-of-double-samples-saved-in-file/36451396#36451396", "title": "FFTW of double samples saved in file", "body": "<p>I think the problem is that you haven't applied a <a href=\"https://en.wikipedia.org/wiki/Window_function\" rel=\"nofollow\">window function</a> to your raw data. As a result, the Fourier transform has a strong frequency component that corresponds to the length of your sample buffer.</p>\n\n<p>Try applying a Hanning window by replacing this line:</p>\n\n<pre><code>in[i][0] = doubleBuffer[i];\n</code></pre>\n\n<p>with this:</p>\n\n<pre><code>in[i][0] = doubleBuffer[i] * 0.5 * (1.0 - cos(2.0 * M_PI * i / (bufferLen - 1)));\n</code></pre>\n\n<p>(Obviously this window function can be cached if you need to use it repeatedly.)</p>\n"}, {"comments": [{"owner": {"reputation": 67, "user_id": 5651975, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bd8caf6f8a8baa8315bf88c25869218b?s=128&d=identicon&r=PG&f=1", "display_name": "Kokos34", "link": "https://stackoverflow.com/users/5651975/kokos34"}, "edited": false, "score": 0, "creation_date": 1459948052, "post_id": 36451776, "comment_id": 60516914, "body": "But my castToDouble allocates memory for proper size, i guess: double* doubleBuffer = (double*)malloc( sizeof(double) * bufferLen);"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 67, "user_id": 5651975, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bd8caf6f8a8baa8315bf88c25869218b?s=128&d=identicon&r=PG&f=1", "display_name": "Kokos34", "link": "https://stackoverflow.com/users/5651975/kokos34"}, "edited": false, "score": 0, "creation_date": 1459948534, "post_id": 36451776, "comment_id": 60517311, "body": "It&#39;s hard to <i>guess</i> at what it is doing without seeing the code, but even if you allocate memory, if you are not then doing an element-by-element cast and assignment of each <code>buffer[i]</code> value into new <code>double</code> storage then the same problem will exist. You must take care in how you convert an array of 4-byte floats into an array of 8-byte doubles. Remember <code>array</code> implies <i>sequentially stored in memory</i>."}, {"owner": {"reputation": 67, "user_id": 5651975, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bd8caf6f8a8baa8315bf88c25869218b?s=128&d=identicon&r=PG&f=1", "display_name": "Kokos34", "link": "https://stackoverflow.com/users/5651975/kokos34"}, "edited": false, "score": 0, "creation_date": 1459949044, "post_id": 36451776, "comment_id": 60517707, "body": "I edited the post to contain the castToDouble function implementation . Is it correct? Woudl you like me to post some additional code?"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 67, "user_id": 5651975, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bd8caf6f8a8baa8315bf88c25869218b?s=128&d=identicon&r=PG&f=1", "display_name": "Kokos34", "link": "https://stackoverflow.com/users/5651975/kokos34"}, "edited": false, "score": 0, "creation_date": 1459949433, "post_id": 36451776, "comment_id": 60518003, "body": "Yes, that should work. I&#39;ll drop another way of using a static array as an edit to my answer."}], "tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 0, "last_activity_date": 1459949695, "last_edit_date": 1459949695, "creation_date": 1459947214, "answer_id": 36451776, "question_id": 36450196, "link": "https://stackoverflow.com/questions/36450196/fftw-of-double-samples-saved-in-file/36451776#36451776", "title": "FFTW of double samples saved in file", "body": "<p>Take a good long look at what is wrong with the following code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid prn (float *a, int n);\n\nint main (void)\n{\n    float floatarray[] = { 0.0, 5.0, 10.0, 15.0, 20.0, 25.0 };\n\n    prn (floatarray, sizeof floatarray/sizeof *floatarray);\n\n    return 0;\n}\n\nvoid prn (float *a, int n)\n{\n    int i;\n    double *d = (double *)a;\n\n    for (i = 0; i &lt; n; i++)\n        printf (\" a[%d] : %01.0lf\\n\", i, d[i]);\n}\n</code></pre>\n\n<p>Run it, what happens? Why?</p>\n\n<p>What is the <code>sizeof</code> a <code>float</code>? What is the <code>sizeof</code> a <code>double</code>? What happens when the cast <code>double *d = (double *)a;</code> takes place? How many bytes are expected in each element of <code>d</code>? How many are there? Your </p>\n\n<pre><code>double* doubleBuffer = castToDouble(buffer, bufferLen);\n</code></pre>\n\n<p>causes the exact same problem.</p>\n\n<p><strong>Element-by-Element Cast/Assignment Required</strong></p>\n\n<p>Whether you use a new <code>double</code> array allocated with <code>malloc</code> (or <code>calloc</code>), you must do an <em>element-by-element</em> cast/assignment to complete the cast of the array. Here is the same code with a few additions using a variable length array to avoid allocating memory dynamically:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid castfloatdouble (double *d, float *f, int n);\nvoid prn (float *a, int n);\nvoid prndouble (double *d, int n);\n\nint main (void)\n{\n    float floatarray[] = { 0.0, 5.0, 10.0, 15.0, 20.0, 25.0 };\n    int n = (int)(sizeof floatarray/sizeof *floatarray);\n    double doublearray[n];  /* memset is a good idea to zero a VLA */\n\n    prn (floatarray, n);  /* incorrect results due to typesize mismatch */\n    putchar ('\\n');\n\n    castfloatdouble (doublearray, floatarray, n);\n\n    prndouble (doublearray, n);  /* correct results after deep cast/assign */\n    putchar ('\\n');\n\n    return 0;\n}\n\nvoid castfloatdouble (double *d, float *f, int n)\n{\n    int i;\n\n    for (i = 0; i &lt; n; i++)\n        d[i] = (double)f[i];\n}\n\nvoid prn (float *a, int n)\n{\n    int i;\n    double *d = (double *)a;\n\n    for (i = 0; i &lt; n; i++)\n        printf (\" a[%d] : %01.0lf\\n\", i, d[i]);\n}\n\nvoid prndouble (double *d, int n)\n{\n    int i;\n\n    for (i = 0; i &lt; n; i++)\n        printf (\" a[%d] : %01.0lf\\n\", i, d[i]);\n}\n</code></pre>\n\n<p><strong>Output Showing Incorrect &amp; Correct Results</strong></p>\n\n<pre><code>$ ./bin/castfloatdouble2\n a[0] : 2048\n a[1] : 16777220\n a[2] : 805306499\n a[3] : 0\n a[4] : 0\n a[5] : 0\n\n a[0] : 0\n a[1] : 5\n a[2] : 10\n a[3] : 15\n a[4] : 20\n a[5] : 25\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 5651975, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bd8caf6f8a8baa8315bf88c25869218b?s=128&d=identicon&r=PG&f=1", "display_name": "Kokos34", "link": "https://stackoverflow.com/users/5651975/kokos34"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 268, "favorite_count": 0, "accepted_answer_id": 36451396, "answer_count": 2, "score": 1, "last_activity_date": 1459951667, "creation_date": 1459943131, "last_edit_date": 1459948990, "question_id": 36450196, "link": "https://stackoverflow.com/questions/36450196/fftw-of-double-samples-saved-in-file", "title": "FFTW of double samples saved in file", "body": "<p>I am trying to calculate FFT on 53k double samples using FFTW library and on it's basis guess what's the fundamental frequency of the signal. Samples are generated by sndfile library on the basis of wav input file (program loads in wav file, generates samples of double data and saves them to a text file). Each sample's order of magnitude is ranging from -0.0009 to +0.0009. After calculating FFT using function presented below, I receive in[0][0] = -2.142. Either this is an incorrect method of retrieving data or the input file is incorrect. What am I doing wrong? Is it the wrong data passing to FFTW function, is the data stored in file incorrect or the function I have written is incorrect? Buffer is a float array containing samples.  </p>\n\n<pre><code>static fftw_complex* calculateFourier(float* buffer, const unsigned int bufferLen)\n{\n\n    unsigned int i;\n    //const unsigned short windowSize = 1024;\n    fftw_plan result;\n    fftw_complex *out, *in;\n\n    in = (fftw_complex*) fftw_malloc(sizeof(fftw_complex) * bufferLen);\n    out = (fftw_complex*) fftw_malloc( sizeof(fftw_complex) * bufferLen);\n\n    double* doubleBuffer = castToDouble(buffer, bufferLen);\n\n    for(i = 0; i &lt; bufferLen; i++)\n    {\n        in[i][0] = doubleBuffer[i];\n        in[i][1] = 0.000000000000;\n    }\n\n    result = fftw_plan_dft_1d(bufferLen, in, out, FFTW_FORWARD, FFTW_ESTIMATE);\n    //result = fftw_plan_dft_r2c_1d(fileSize, castToDouble(buffer, bufferLen), out, FFTW_MEASURE);\n\n    fftw_execute(result);\n\n    fftw_destroy_plan(result);\n\n    return out;\n}\nstatic double* castToDouble(float* buffer, const unsigned int bufferLen)\n{\n    unsigned int i;\n    double* doubleBuffer = (double*)malloc( sizeof(double) * bufferLen); \n\n    for(i = 0; i &lt; bufferLen; i++)\n        doubleBuffer[i] = (double)buffer[i];\n\n    return doubleBuffer;\n\n}\n</code></pre>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1459942906, "post_id": 36450009, "comment_id": 60512778, "body": "Why don&#39;t you declare the correct function return type?"}, {"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "reply_to_user": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1459943204, "post_id": 36450009, "comment_id": 60513003, "body": "@PeterA.Schneider Maybe because he doesn&#39;t know how to put it in the prototype ;) The correct prototype for your function should be <code>int (*get_values())[2] { ... }</code>."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1459943548, "post_id": 36450009, "comment_id": 60513260, "body": "I wasn&#39;t quite sure either and wanted to check first. But &quot;how do I declare...&quot; was not what the OP asked ;-)."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1459943791, "post_id": 36450009, "comment_id": 60513455, "body": "Btw, I think it&#39;s fine to simply cast the pointers around as needed."}], "answers": [{"tags": [], "owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "is_accepted": true, "score": 6, "last_activity_date": 1459943731, "last_edit_date": 1459943731, "creation_date": 1459942937, "answer_id": 36450124, "question_id": 36450009, "link": "https://stackoverflow.com/questions/36450009/returning-array-pointer-of-2d-array-in-c/36450124#36450124", "title": "Returning array (pointer) of 2D array in C", "body": "<p>Rather than keep repeating the same clunky syntax it can be helpful to define a typedef in cases like this. This makes it easier to declare the correct return type for <code>get_values</code>:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\ntypedef int I2[2];\n\nI2 * get_values(void)\n{\n    I2 * x = malloc(sizeof(I2) * 3);\n\n    x[0][0] = 1;\n    x[0][1] = 2;\n\n    x[1][0] = 11;\n    x[1][1] = 12;\n\n    x[2][0] = 21;\n    x[2][1] = 22;\n\n    return x;   \n}\n\nint main()\n{\n    I2 * x = get_values();\n\n    int i;\n    for (i=0; i!=3; i++)\n        printf(\"x[%d] = { %d, %d }\\n\", i, x[i][0], x[i][1]);\n\n    free(x);\n}\n</code></pre>\n\n<p><kbd><a href=\"http://ideone.com/BwmDhv\" rel=\"nofollow\">LIVE DEMO</a></kbd></p>\n\n<p>Recommended reading: <a href=\"https://en.wikipedia.org/wiki/Don%27t_repeat_yourself\" rel=\"nofollow\">Don't repeat yourself (DRY)</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1459943639, "post_id": 36450247, "comment_id": 60513334, "body": "Now declare a function taking an array pointer as parameter, returning an array pointer :)"}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1459943791, "post_id": 36450247, "comment_id": 60513456, "body": "@Lundin That is too easy, just replace void with the array pointer, the rest is the same."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1459943812, "post_id": 36450247, "comment_id": 60513476, "body": "The <code>2</code> isn&#39;t required, is it?"}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "reply_to_user": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1459943853, "post_id": 36450247, "comment_id": 60513511, "body": "@CoolGuy 2 is required."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 1, "creation_date": 1459943940, "post_id": 36450247, "comment_id": 60513575, "body": "@2501 But it compiles for me without any warnings when omitting the <code>2</code> (GCC)."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "reply_to_user": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 1, "creation_date": 1459946523, "post_id": 36450247, "comment_id": 60515623, "body": "@CoolGuy Apparently in this case you can omit the 2, however if the returned type doesn&#39;t match with the assigned type, the behavior is undefined. Omitting the size also removes warnings that will warn you about the type discrepancy. In any case, there is no good reason to omit it, even you if are allowed to."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1459947259, "post_id": 36450247, "comment_id": 60516249, "body": "@2501 Yeah <code>int(*get_values((int*)[2]))[2]</code> is totally trivial reading :)"}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "reply_to_user": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 1, "creation_date": 1460014507, "post_id": 36450247, "comment_id": 60550026, "body": "@CoolGuy I&#39;m wondering what meaning gcc bestows on <code>int (*get_values(void))[]</code>. In particular, what value it thinks <code>get_values()+1</code> should have then."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "reply_to_user": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1460014645, "post_id": 36450247, "comment_id": 60550114, "body": "@PeterA.Schneider It is a pointer to an incomplete type. It can&#39;t be dereferenced. I&#39;m not sure if <code>int(*)[]</code> is compatible with <code>int(*)[2]</code>, but gcc thinks it is."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "reply_to_user": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1460014850, "post_id": 36450247, "comment_id": 60550242, "body": "@PeterA.Schneider Apparently this <code>int(*)[]</code> is a composite type, see: ISO/IEC 9899:201x 6.2.7."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1460018518, "post_id": 36450247, "comment_id": 60552530, "body": "@2501 Looks to me as if it&#39;s just an incomplete type (as you said first) which is compatible with the (complete) type of <code>x</code>. (A &quot;composite type&quot; by contrast is, as I read it, the result of <i>two declarations for the same entity</i>, as in the example 6.2.7/f in n1570.) In order to determine compatibility we read 6.7.6.2/6: &quot;For two array types to be compatible, [..]  if both size specifiers are present, [...] then both size specifiers shall have the same constant value.&quot; This appears to implicate that one size specifier can be missing for compatible arrays. (ctd.)"}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1460018744, "post_id": 36450247, "comment_id": 60552665, "body": "(... ctd.) The issue is slightly more complex because actually we are dealing with a function declaration, but I think in this context the rules for compatibility of array types apply to declarations of function return types (and thus are part of a function declaration). Ah, and last not least we are concerned with pointers to array, not arrays proper, but I&#39;m sure that the standard says somewhere that pointer types are compatible if the types pointed to are compatible... (I&#39;m glad I don&#39;t have to write documents that are scrutinized this way...)."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1460019038, "post_id": 36450247, "comment_id": 60552854, "body": "(...ctd.) And as a <i>post scriptum</i>, gcc correctly balks if I try to write <code>int (*get_values())[]; get_values()+1;</code>: &quot;invalid use of array with unspecified bounds&quot;."}], "tags": [], "owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "is_accepted": false, "score": 3, "last_activity_date": 1459943270, "creation_date": 1459943270, "answer_id": 36450247, "question_id": 36450009, "link": "https://stackoverflow.com/questions/36450009/returning-array-pointer-of-2d-array-in-c/36450247#36450247", "title": "Returning array (pointer) of 2D array in C", "body": "<p>And this is how it looks without a typedef:</p>\n\n<pre><code>int (*get_values(void))[2]\n{  \n    return NULL;   \n}\n</code></pre>\n\n<p>Pretty unreadable. </p>\n\n<p>Notice in that function definition, if you replace <code>get_values(void)</code> with x you get: <code>int (*x)[2]</code>, which is exactly what the pointer definition looks like.</p>\n"}], "owner": {"reputation": 343, "user_id": 4646773, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4810297e2018a13f7ff3fe7031b66fa9?s=128&d=identicon&r=PG&f=1", "display_name": "Sanfer", "link": "https://stackoverflow.com/users/4646773/sanfer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 36450124, "answer_count": 2, "score": 0, "last_activity_date": 1459943731, "creation_date": 1459942659, "question_id": 36450009, "link": "https://stackoverflow.com/questions/36450009/returning-array-pointer-of-2d-array-in-c", "title": "Returning array (pointer) of 2D array in C", "body": "<p>A function dynamically creates an <code>int</code> array whose elements are predetermined to be <code>int[2]</code>. Is there any way to have a function assign values to that array and then return it to the caller.</p>\n\n<p>The below code accomplishes this task but throws warning: <code>initialization from incompatible pointer type [enabled by default]</code></p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\nint *get_values()\n{\n    int (*x)[2] = malloc(sizeof(int[2])*3);\n\n    x[0][0] = 1;\n    x[0][1] = 2;\n\n    x[1][0] = 11;\n    x[1][1] = 12;\n\n    x[2][0] = 21;\n    x[2][1] = 22;\n\n    return x;   \n}\n\nint main()\n{\n    int (*x)[2] = get_values();\n\n    int i;\n    for (i=0; i!=3; i++)\n        printf(\"x[%d] = { %d, %d }\\n\", i, x[i][0], x[i][1]);\n}\n</code></pre>\n\n<p>I'm aware of the alternative where you dynamically allocate both dimensions, but this is something that I am curious about.</p>\n"}, {"tags": ["c", "system-calls"], "comments": [{"owner": {"reputation": 819, "user_id": 6086833, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/060138486ddeff3186d29262a5852c76?s=128&d=identicon&r=PG&f=1", "display_name": "T Johnson", "link": "https://stackoverflow.com/users/6086833/t-johnson"}, "edited": false, "score": 6, "creation_date": 1459947211, "post_id": 36449844, "comment_id": 60516208, "body": "See <a href=\"http://stackoverflow.com/questions/12285969/what-are-the-reasons-to-use-syscall-instead-of-calling-the-function-directly\">this post to stack overflow</a>"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1459947330, "post_id": 36449844, "comment_id": 60516296, "body": "notice that that library <i>defines</i> the <code>epoll_ctl</code> symbol that is has the same name as in <code>glibc</code>; it is probably guarded by something like <code>#if LIBC_DOES_NOT_PROVIDE_EPOLL_CTL</code>"}, {"owner": {"reputation": 29, "user_id": 4549438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7bbb6a564197b2393a5bbf0dc633bc9?s=128&d=identicon&r=PG&f=1", "display_name": "zhang will", "link": "https://stackoverflow.com/users/4549438/zhang-will"}, "edited": false, "score": 0, "creation_date": 1459997905, "post_id": 36449844, "comment_id": 60543211, "body": "thank you very much, understand it."}], "owner": {"reputation": 29, "user_id": 4549438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7bbb6a564197b2393a5bbf0dc633bc9?s=128&d=identicon&r=PG&f=1", "display_name": "zhang will", "link": "https://stackoverflow.com/users/4549438/zhang-will"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "closed_date": 1460243613, "answer_count": 0, "score": 0, "last_activity_date": 1459944414, "creation_date": 1459942252, "last_edit_date": 1459944414, "question_id": 36449844, "link": "https://stackoverflow.com/questions/36449844/when-to-use-syscall-function-instead-of-c-lib-wrapper", "closed_reason": "Duplicate", "title": "when to use syscall function instead of c lib wrapper", "body": "<p>I was looking at the <code>libevent</code> code, and saw some code like this:</p>\n\n<pre><code> int epoll_ctl(int epfd, int op, int fd, struct epoll_event *event) {\n        return (syscall(__NR_epoll_ctl, epfd, op, fd, event));\n }\n</code></pre>\n\n<p>What are the reasons to use it? Why would this be better than a direct call to the function?</p>\n\n<pre><code> int epoll_ctl(int epfd, int op, int fd, struct epoll_event *event);\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 283736, "user_id": 298479, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc66db28aa7c3fa8e4ce4238b696dee9?s=128&d=identicon&r=PG", "display_name": "ThiefMaster", "link": "https://stackoverflow.com/users/298479/thiefmaster"}, "edited": false, "score": 2, "creation_date": 1459942362, "post_id": 36449837, "comment_id": 60512376, "body": "Having code in the same line after <code>{</code> is pretty awful and not very readable. Please don&#39;t do that. Also, fix the indentation of the rest of the code - often this is enough to spot issues related to control structures."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1459942371, "post_id": 36449837, "comment_id": 60512380, "body": "Fix your indentation to make the flow of control non-obfuscated."}, {"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 1, "creation_date": 1459942452, "post_id": 36449837, "comment_id": 60512441, "body": "The last <code>else</code> will only be reached if both <code>a&gt;b</code> and <code>b&gt;a</code> are false (i.e. only if <code>a==b</code>)."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "reply_to_user": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 0, "creation_date": 1459942522, "post_id": 36449837, "comment_id": 60512495, "body": "@Michael that&#39;s what I thought, but the code appears to be deliberately obfuscated to hide that fact, almost like a homework problem."}, {"owner": {"reputation": 7, "user_id": 6166325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d1409d36138f9018e50f75066c6c67a?s=128&d=identicon&r=PG&f=1", "display_name": "knight", "link": "https://stackoverflow.com/users/6166325/knight"}, "edited": false, "score": 0, "creation_date": 1459942667, "post_id": 36449837, "comment_id": 60512618, "body": "I fixed the indentation part in the original code and have tried entering numbers like 2,3,5. But still there is no output."}, {"owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "edited": false, "score": 2, "creation_date": 1459942708, "post_id": 36449837, "comment_id": 60512642, "body": "Please unlearn <code>void main</code> because in C it is <code>int main</code> and never #include conio.h again (use stdio.h and getchar() instead). This way you will learn to program C, as opposed to a language Bill Gates has mutilated :-)"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1459943058, "post_id": 36449837, "comment_id": 60512889, "body": "Try <i>ending</i> all the <code>printf</code>s with <code>\\n</code>, not starting them"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1459943417, "post_id": 36449837, "comment_id": 60513150, "body": "BTW, remove <code>if(b&gt;a)  {</code>"}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1459944240, "post_id": 36449837, "comment_id": 60513779, "body": "What importance does &quot;using F7&quot; have here?"}, {"owner": {"reputation": 7, "user_id": 6166325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d1409d36138f9018e50f75066c6c67a?s=128&d=identicon&r=PG&f=1", "display_name": "knight", "link": "https://stackoverflow.com/users/6166325/knight"}, "edited": false, "score": 0, "creation_date": 1459960085, "post_id": 36449837, "comment_id": 60526364, "body": "I think that F7 reads the code line by line and goes on displaying appropriate output."}, {"owner": {"reputation": 7, "user_id": 6166325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d1409d36138f9018e50f75066c6c67a?s=128&d=identicon&r=PG&f=1", "display_name": "knight", "link": "https://stackoverflow.com/users/6166325/knight"}, "reply_to_user": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1459960237, "post_id": 36449837, "comment_id": 60526475, "body": "Actually I&#39;ve just started learning programming. I&#39;m learning C. My teacher uses Turbo C and always the conio.h header file. What all things like using int main instead of void main can be learnt and from where? @CoolGuy and Jens"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 1, "creation_date": 1459960895, "post_id": 36449837, "comment_id": 60526911, "body": "@knight There are several tutorials about C on the web that teaches how to write good C code. Your code is OK if you are forced to use the ancient 25+ year old TurboC. Seriously, I recommend to ditch TurboC and install a modern compiler and IDE, say, GCC(compiler) and Code::Blocks(IDE)."}, {"owner": {"reputation": 111, "user_id": 3271476, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2ac153e64f52395f9ffc0f6fdfb4c3be?s=128&d=identicon&r=PG&f=1", "display_name": "Lor", "link": "https://stackoverflow.com/users/3271476/lor"}, "edited": false, "score": 0, "creation_date": 1459971938, "post_id": 36449837, "comment_id": 60533703, "body": "It seems perfectly obvious that the OP wanted to know how to fix his logic, i.e., what is wrong with it. Appropriate comments were given. Hence the putting on hold seems rather mean spirited, not helpful. Even the world class expert was once a humble beginner. That humility should not be lost in the ascent."}], "answers": [{"tags": [], "owner": {"reputation": 743, "user_id": 4281766, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0c4fd2d68099720521e1ae5df4296730?s=128&d=identicon&r=PG", "display_name": "HenriC", "link": "https://stackoverflow.com/users/4281766/henric"}, "is_accepted": true, "score": 1, "last_activity_date": 1459942497, "creation_date": 1459942497, "answer_id": 36449938, "question_id": 36449837, "link": "https://stackoverflow.com/questions/36449837/why-isnt-the-line-with-the-else-command-in-c-language-in-the-following-code-not/36449938#36449938", "title": "Why isn&#39;t the line with the else command in C language in the following code not being read?", "body": "<p>Nothing abnormal here: your else statement corresponds to the case a==b ;)</p>\n"}, {"tags": [], "owner": {"reputation": 111, "user_id": 3271476, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2ac153e64f52395f9ffc0f6fdfb4c3be?s=128&d=identicon&r=PG&f=1", "display_name": "Lor", "link": "https://stackoverflow.com/users/3271476/lor"}, "is_accepted": false, "score": 0, "last_activity_date": 1459947046, "creation_date": 1459947046, "answer_id": 36451725, "question_id": 36449837, "link": "https://stackoverflow.com/questions/36449837/why-isnt-the-line-with-the-else-command-in-c-language-in-the-following-code-not/36451725#36451725", "title": "Why isn&#39;t the line with the else command in C language in the following code not being read?", "body": "<p>Minus other advice already given:</p>\n\n<pre><code>        if ((a &gt; b) &amp;&amp; (a &gt; c)) {\n            printf(\"\\n The greatest number is =%d\",a);\n        }\n        else {\n            if ((b &gt; a) &amp;&amp; (b &gt; c)) {\n                printf(\"\\n The greatest number is =%d\",b);\n            }\n            else {\n                printf(\"\\nThe greatest number=%d\",c);\n            }\n        }\n</code></pre>\n\n<p>C is one of those languages designed to minimize the keystrokes needed to express something, as though that were some kind of efficiency. However it causes the language to be relatively difficult to understand if the reader is not already familiar with the algorithm expressed. Thus the importance of proper and consistent formatting, which eliminates a level of analysis otherwise required.</p>\n\n<p>(Actually, the human mind welcomes some redundancy in written expressions so it can verify its projections of meaning as it reads along. A few more keystrokes, as in Pascal for instance, enables the unfamiliar reader to more quickly comprehend the coder's intent.)</p>\n"}], "owner": {"reputation": 7, "user_id": 6166325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d1409d36138f9018e50f75066c6c67a?s=128&d=identicon&r=PG&f=1", "display_name": "knight", "link": "https://stackoverflow.com/users/6166325/knight"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "closed_date": 1459949971, "accepted_answer_id": 36449938, "answer_count": 2, "score": -3, "last_activity_date": 1459947046, "creation_date": 1459942230, "last_edit_date": 1459943399, "question_id": 36449837, "link": "https://stackoverflow.com/questions/36449837/why-isnt-the-line-with-the-else-command-in-c-language-in-the-following-code-not", "closed_reason": "Needs details or clarity", "title": "Why isn&#39;t the line with the else command in C language in the following code not being read?", "body": "<pre><code>#include&lt;stdio.h&gt;\n#include&lt;conio.h&gt;\nvoid main()\n{ \nint a,b,c;\nprintf(\"\\n Enter any three numbers\");\nscanf(\"%d%d%d\", &amp;a,&amp;b,&amp;c);\n\nif(a &gt; b){\n  if(a &gt; c){\n    printf(\"\\n The greatest number is =%d\",a);\n  }\n} else\n    if(b &gt; a) {\n      if(b &gt; c) { \n        printf(\"\\n The greatest number is =%d\",b);\n      }\n    } else {\n      printf(\"\\nThe greatest number=%d\",c);\n    }\ngetch();\n}\n</code></pre>\n\n<p>When the third number is greatest, there is no output on the screen. I tried using F7 and got to know that the line with 'else' statement is being skipped. What to do since I need to use nested if only.</p>\n"}, {"tags": ["c", "sdl-2"], "comments": [{"owner": {"reputation": 1215, "user_id": 3021786, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aCk4s.jpg?s=128&g=1", "display_name": "Henningsson", "link": "https://stackoverflow.com/users/3021786/henningsson"}, "edited": false, "score": 1, "creation_date": 1459941897, "post_id": 36449616, "comment_id": 60511995, "body": "I dont think SDL has that functionality built in, you would have to implement it yourself"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5069935"}, "edited": false, "score": 0, "creation_date": 1459945451, "post_id": 36449764, "comment_id": 60514728, "body": "I think that a custom Bresenham algorithm is more appropriate than a trig approach because trig requires floating point math where Bresenham doesn&#39;t.  Add a counter to the Bresenham algo just at the point where it sets the pixel colour.  For each new coordinate on the path increment the counter, If the counter is (say) 5 then toggle a boolean flag and reset the counter.  Only draw the pixels when the flag is true."}, {"owner": {"reputation": 2244, "user_id": 5520680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C1jQH.png?s=128&g=1", "display_name": "Tom&#39;s", "link": "https://stackoverflow.com/users/5520680/toms"}, "edited": false, "score": 0, "creation_date": 1459945784, "post_id": 36449764, "comment_id": 60514979, "body": "If you want an optimised function, yes, a custom Bresenham is the way, if you just want a doted line, one &quot;cos&quot;, one &quot;sin&quot; and the function is nearly finished."}], "tags": [], "owner": {"reputation": 2244, "user_id": 5520680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C1jQH.png?s=128&g=1", "display_name": "Tom&#39;s", "link": "https://stackoverflow.com/users/5520680/toms"}, "is_accepted": true, "score": -1, "last_activity_date": 1459943001, "last_edit_date": 1459943001, "creation_date": 1459942072, "answer_id": 36449764, "question_id": 36449616, "link": "https://stackoverflow.com/questions/36449616/sdl2-how-to-draw-dotted-line/36449764#36449764", "title": "SDL2 How to draw dotted line", "body": "<p>You can simply implement it yourself ...\nCheck the \"Bresenham algorithm\" for draw a line.</p>\n\n<p>For a doted line, it's just many full line, so a pencil and paper with trigonometry should work out :)</p>\n\n<p>Edit : For a dotted line, you even don't have the use to the \"Bresenham algorithm\", you just need trigonometry.</p>\n\n<p>And by the way, for those who have downvoted, explain yourself ?</p>\n"}, {"comments": [{"owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 0, "creation_date": 1566829847, "post_id": 57646376, "comment_id": 101769150, "body": "Well, you could buffer the points up &amp; draw them all in one go via <code>SDL_RenderDrawPoints()</code>, should be less slow :)"}], "tags": [], "owner": {"reputation": 11, "user_id": 11974481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b3eb08b726126a93b797dbd20ca6990?s=128&d=identicon&r=PG&f=1", "display_name": "Kunibert", "link": "https://stackoverflow.com/users/11974481/kunibert"}, "is_accepted": false, "score": 1, "last_activity_date": 1566739187, "creation_date": 1566739187, "answer_id": 57646376, "question_id": 36449616, "link": "https://stackoverflow.com/questions/36449616/sdl2-how-to-draw-dotted-line/57646376#57646376", "title": "SDL2 How to draw dotted line", "body": "<p>Here is a working function, that uses the Bresenham algorithm:</p>\n\n<pre><code>void DrawDottedLine(SDL_Renderer* renderer, int x0, int y0, int x1, int y1) {\n    int dx =  abs(x1-x0), sx = x0&lt;x1 ? 1 : -1;\n    int dy = -abs(y1-y0), sy = y0&lt;y1 ? 1 : -1;\n    int err = dx+dy, e2;\n    int count = 0;\n    while (1) {\n        if (count &lt; 10) {SDL_RenderDrawPoint(renderer,x0,y0);}\n        if (x0==x1 &amp;&amp; y0==y1) break;\n        e2 = 2*err;\n        if (e2 &gt; dy) { err += dy; x0 += sx; }\n        if (e2 &lt; dx) { err += dx; y0 += sy; }\n        count = (count + 1) % 20;\n    }\n}\n</code></pre>\n\n<p>You must consider that this function has terrible performance, because every point of the dashed line will call <code>SDL_RenderDrawPoint()</code> in order to get rendered.</p>\n"}], "owner": {"reputation": 51, "user_id": 5870090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/354df9cfe9e50a0b95e967ddae453fd7?s=128&d=identicon&r=PG&f=1", "display_name": "CharlesR", "link": "https://stackoverflow.com/users/5870090/charlesr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 947, "favorite_count": 2, "accepted_answer_id": 36449764, "answer_count": 2, "score": 2, "last_activity_date": 1566739187, "creation_date": 1459941627, "question_id": 36449616, "link": "https://stackoverflow.com/questions/36449616/sdl2-how-to-draw-dotted-line", "title": "SDL2 How to draw dotted line", "body": "<p>Is is just possible to draw a simple dotted line using SDL2 (or with gfx) like </p>\n\n<pre><code>int drawDottedLine(SDL_Renderer *renderer,Sint16 x1,Sint16 y1, Sint16 x2, Sint16 y2, int r, int g, int b, int a);\n</code></pre>\n\n<p>found absolutely nothing on the web wtf is it so hard ?</p>\n"}, {"tags": ["c", "timer", "stm32", "real-time-clock"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1459941978, "post_id": 36449521, "comment_id": 60512049, "body": "This seems to me to be more about the electronics side than on the programming side, and might be a better fit on <a href=\"http://electronics.stackexchange.com/\">electronics.stackexchange.com</a>"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1459942127, "post_id": 36449521, "comment_id": 60512173, "body": "Note: your usage of casts and parentheses is not very consistent."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1459945326, "post_id": 36449521, "comment_id": 60514632, "body": "Are you sure the board has not leakage? Like pull-ups and so on."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 6166249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7c86b1fc382af2d7bf5e62ef561cb28?s=128&d=identicon&r=PG&f=1", "display_name": "MartijnJonkers", "link": "https://stackoverflow.com/users/6166249/martijnjonkers"}, "edited": false, "score": 0, "creation_date": 1459959623, "post_id": 36451137, "comment_id": 60526050, "body": "ah, that must be it then. will try again when I get the finished PCB."}], "tags": [], "owner": {"reputation": 905, "user_id": 2638371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uZefP.png?s=128&g=1", "display_name": "imbearr", "link": "https://stackoverflow.com/users/2638371/imbearr"}, "is_accepted": true, "score": 1, "last_activity_date": 1459945581, "creation_date": 1459945581, "answer_id": 36451137, "question_id": 36449521, "link": "https://stackoverflow.com/questions/36449521/stm32l1x-stop-mode-rtc-too-much-current/36451137#36451137", "title": "STM32L1x Stop mode + RTC too much current", "body": "<p>If you use discovery board your measurement may be not clear because a lot of other components consumpt some energy. It's may be protection diode, driver of 3.3V line or second MCU with ST-LINK/V2 embedded debug tool.</p>\n"}, {"comments": [{"owner": {"reputation": 33, "user_id": 6166249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7c86b1fc382af2d7bf5e62ef561cb28?s=128&d=identicon&r=PG&f=1", "display_name": "MartijnJonkers", "link": "https://stackoverflow.com/users/6166249/martijnjonkers"}, "edited": false, "score": 0, "creation_date": 1460279711, "post_id": 36478407, "comment_id": 60659998, "body": "I did exactly that, except I also disabled RCC_APB1ENR_PWREN .. why do I need to keep that running?"}], "tags": [], "owner": {"reputation": 6873, "user_id": 5131711, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z5oP7.png?s=128&g=1", "display_name": "followed Monica to Codidact", "link": "https://stackoverflow.com/users/5131711/followed-monica-to-codidact"}, "is_accepted": false, "score": 1, "last_activity_date": 1460037419, "creation_date": 1460037419, "answer_id": 36478407, "question_id": 36449521, "link": "https://stackoverflow.com/questions/36449521/stm32l1x-stop-mode-rtc-too-much-current/36478407#36478407", "title": "STM32L1x Stop mode + RTC too much current", "body": "<p>Where did you measure the power consumption? You should do it betwen JP1 pins 1 &amp; 2 (Pin 2 is connected directly to Vdd). That should show the power drawn by the MCU, and of course anything that is powered by the output pins.</p>\n\n<p>The trick is to properly disconnect and shut down all pins (except the wakeup source) as well as all clocks that are not needed.</p>\n\n<ul>\n<li>Set <code>FLASH-&gt;ACR |= SLEEP_PD</code> </li>\n<li>Enable all GPIO clocks</li>\n<li>Put all unneded pins to analog mode</li>\n<li>Disable ALL clocks except <code>RCC_APB1ENR_PWREN</code> and wakeup GPIOs in <code>RCC-&gt;xxxLPENR</code></li>\n<li>Then start the thing without the debugger, ST-Link (CN3) jumpers removed.</li>\n</ul>\n\n<p>... and there might be other issues. It's hard to get it right.</p>\n"}], "owner": {"reputation": 33, "user_id": 6166249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7c86b1fc382af2d7bf5e62ef561cb28?s=128&d=identicon&r=PG&f=1", "display_name": "MartijnJonkers", "link": "https://stackoverflow.com/users/6166249/martijnjonkers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1723, "favorite_count": 1, "accepted_answer_id": 36451137, "answer_count": 2, "score": 1, "last_activity_date": 1497288886, "creation_date": 1459941334, "last_edit_date": 1497288886, "question_id": 36449521, "link": "https://stackoverflow.com/questions/36449521/stm32l1x-stop-mode-rtc-too-much-current", "title": "STM32L1x Stop mode + RTC too much current", "body": "<p>I am able to put my stm32L1xDiscovery board in STOP mode with RTC running.\naccording to the datasheet this should draw about 1.3 \u00b5A. But my application draws 3.3 \u00b5A.</p>\n\n<p>I noticed I did not put the FLASH in a low power mode during sleep. But when I did this, nothing changed. </p>\n\n<p>This is what I use to go into STOP mode:</p>\n\n<pre><code>SCB-&gt;SCR |= ((uint32_t)SCB_SCR_SLEEPDEEP);\n\nRCC-&gt;APB1ENR |= RCC_APB1Periph_PWR;\nPWR-&gt;CR |= ((uint32_t)(PWR_CR_LPSDSR|PWR_CR_ULP)); // ULP seems to have no effect on power consumption\nRCC-&gt;APB1ENR &amp;= ~RCC_APB1Periph_PWR;\n\nFLASH-&gt;ACR |= SLEEP_PD; // seems to have no effect at all on power consumption\n\n__WFI();\n</code></pre>\n\n<p>Any idea what I am missing here?</p>\n"}, {"tags": ["c", "c-preprocessor", "obfuscation"], "comments": [{"owner": {"reputation": 7162, "user_id": 3800782, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d6d5273f12d5fd7a7cc4c31769558918?s=128&d=identicon&r=PG&f=1", "display_name": "rghome", "link": "https://stackoverflow.com/users/3800782/rghome"}, "edited": false, "score": 146, "creation_date": 1459941579, "post_id": 36449358, "comment_id": 60511768, "body": "The macros defined expand begin to say &quot;main&quot;. It is just a trick. Nothing interesting."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1531971"}, "edited": false, "score": 10, "creation_date": 1459954109, "post_id": 36449358, "comment_id": 60521818, "body": "Your toolchain should have an option to leave the preprocessed code around in a file -- the actual file that is compiled -- where you will see it, indeed, has a main()"}, {"owner": {"reputation": 18697, "user_id": 923847, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/d36f174888868d824d06274fb5c42a2a?s=128&d=identicon&r=PG", "display_name": "Matsemann", "link": "https://stackoverflow.com/users/923847/matsemann"}, "reply_to_user": {"reputation": 7162, "user_id": 3800782, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d6d5273f12d5fd7a7cc4c31769558918?s=128&d=identicon&r=PG&f=1", "display_name": "rghome", "link": "https://stackoverflow.com/users/3800782/rghome"}, "edited": false, "score": 0, "creation_date": 1460280657, "post_id": 36449358, "comment_id": 60660267, "body": "@rghome Why not post as an answer? And it&#39;s clearly interesting, given the number of upvotes."}, {"owner": {"reputation": 7162, "user_id": 3800782, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d6d5273f12d5fd7a7cc4c31769558918?s=128&d=identicon&r=PG&f=1", "display_name": "rghome", "link": "https://stackoverflow.com/users/3800782/rghome"}, "reply_to_user": {"reputation": 18697, "user_id": 923847, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/d36f174888868d824d06274fb5c42a2a?s=128&d=identicon&r=PG", "display_name": "Matsemann", "link": "https://stackoverflow.com/users/923847/matsemann"}, "edited": false, "score": 3, "creation_date": 1460281021, "post_id": 36449358, "comment_id": 60660385, "body": "@Matsemann Wow! I didn&#39;t notice the up-votes. I could change it to an answer, and if the comment up-votes were answer up-votes, it would be by far my best score, but there is already a detailed response. I think the point of my comment is that it is not really interesting and therefore it acts as an alternative for people not wanting to up-vote the answer. Thanks for pointing it out though."}, {"owner": {"reputation": 997, "user_id": 2316442, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/79835deee85102915684418bc897191a?s=128&d=identicon&r=PG", "display_name": "Ho1", "link": "https://stackoverflow.com/users/2316442/ho1"}, "edited": false, "score": 0, "creation_date": 1460985401, "post_id": 36449358, "comment_id": 60978329, "body": "Guys, It&#39;s up to the linker as an operating system tool to set the entry point, and not the language itself. You can even set our own entry point, and you can make a library that is also executable! <a href=\"http://unix.stackexchange.com/a/223415/37799\">unix.stackexchange.com/a/223415/37799</a>"}, {"owner": {"reputation": 6013, "user_id": 3310281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9b8b4ec03e2c7a424fdc428eb55f2e8?s=128&d=identicon&r=PG&f=1", "display_name": "Malcolm McLean", "link": "https://stackoverflow.com/users/3310281/malcolm-mclean"}, "edited": false, "score": 0, "creation_date": 1493647839, "post_id": 36449358, "comment_id": 74484380, "body": "It wouldn&#39;t be accepted as an international obfuscated C competition entry, as they don&#39;t allow entries obfuscate solely by the preprocessor. However it could be part of one."}], "answers": [{"comments": [{"owner": {"reputation": 52680, "user_id": 1673391, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d0fdf8fc4fd7daa19b20cd3f76d2a1e0?s=128&d=identicon&r=PG", "display_name": "Grijesh Chauhan", "link": "https://stackoverflow.com/users/1673391/grijesh-chauhan"}, "edited": false, "score": 0, "creation_date": 1459941790, "post_id": 36449421, "comment_id": 60511916, "body": "Is it GCC specific? what is use of it?"}, {"owner": {"reputation": 2887, "user_id": 5845470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/606531753afd42de16d82a1199fc4d45?s=128&d=identicon&r=PG&f=1", "display_name": "jdarthenay", "link": "https://stackoverflow.com/users/5845470/jdarthenay"}, "reply_to_user": {"reputation": 52680, "user_id": 1673391, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d0fdf8fc4fd7daa19b20cd3f76d2a1e0?s=128&d=identicon&r=PG", "display_name": "Grijesh Chauhan", "link": "https://stackoverflow.com/users/1673391/grijesh-chauhan"}, "edited": false, "score": 11, "creation_date": 1459942066, "post_id": 36449421, "comment_id": 60512129, "body": "@GrijeshChauhan all C compilers process the macros, it is required by all C standards since C89."}, {"owner": {"reputation": 613, "user_id": 4453524, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/sBZea.jpg?s=128&g=1", "display_name": "ljrk", "link": "https://stackoverflow.com/users/4453524/ljrk"}, "edited": false, "score": 17, "creation_date": 1459944044, "post_id": 36449421, "comment_id": 60513648, "body": "That&#39;s plainly wrong. On Linux I can use <code>_start()</code>. Or even more low-level I can try to just align the start of my program with the address to which the IP is set after boot. <code>main()</code> is C Standard <i>library</i>. C itself does not impose restrictions on this."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 613, "user_id": 4453524, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/sBZea.jpg?s=128&g=1", "display_name": "ljrk", "link": "https://stackoverflow.com/users/4453524/ljrk"}, "edited": false, "score": 0, "creation_date": 1459946288, "post_id": 36449421, "comment_id": 60515404, "body": "@larkey; Is that confirmed by standard?"}, {"owner": {"reputation": 613, "user_id": 4453524, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/sBZea.jpg?s=128&g=1", "display_name": "ljrk", "link": "https://stackoverflow.com/users/4453524/ljrk"}, "edited": false, "score": 1, "creation_date": 1459946340, "post_id": 36449421, "comment_id": 60515453, "body": "@haccks The standard <i>library</i> does define an entry point. The language itself doesn&#39;t care"}, {"owner": {"reputation": 9006, "user_id": 2257664, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d9f0c8cfc4646b1ad1e7030785967ea7?s=128&d=identicon&r=PG", "display_name": "A.L", "link": "https://stackoverflow.com/users/2257664/a-l"}, "edited": false, "score": 3, "creation_date": 1459954744, "post_id": 36449421, "comment_id": 60522329, "body": "Can you please explain how <code>decode(a,n,i,m,a,t,e)</code> become <code>m##a##i##n</code>? Does it replace characters? Can you provide a link to the documentation of the <code>decode</code> function? Thanks."}, {"owner": {"reputation": 613, "user_id": 4453524, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/sBZea.jpg?s=128&g=1", "display_name": "ljrk", "link": "https://stackoverflow.com/users/4453524/ljrk"}, "reply_to_user": {"reputation": 9006, "user_id": 2257664, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d9f0c8cfc4646b1ad1e7030785967ea7?s=128&d=identicon&r=PG", "display_name": "A.L", "link": "https://stackoverflow.com/users/2257664/a-l"}, "edited": false, "score": 1, "creation_date": 1459955707, "post_id": 36449421, "comment_id": 60523090, "body": "@A.L First <code>begin</code> is defined to be replaced by <code>decode(a,n,i,m,a,t,e)</code> which is defined before. This function takes the arguments <code>s,t,u,m,p,e,d</code> and concatenates them in this form <code>m##s##u##t</code> (<code>##</code> means concatenate). Ie, it ignores the values of p,e and d. As you &quot;call&quot; <code>decode</code> with s=a, t=n, u=i, m=m it effectively replaces <code>begin</code> with <code>main</code>."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 9006, "user_id": 2257664, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d9f0c8cfc4646b1ad1e7030785967ea7?s=128&d=identicon&r=PG", "display_name": "A.L", "link": "https://stackoverflow.com/users/2257664/a-l"}, "edited": false, "score": 1, "creation_date": 1459956657, "post_id": 36449421, "comment_id": 60523814, "body": "@A.L; Added an explanation to the answer."}, {"owner": {"reputation": 557, "user_id": 632227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e283ad9bba4d0ffeb95c0b9be4ae8a64?s=128&d=identicon&r=PG", "display_name": "bigeast", "link": "https://stackoverflow.com/users/632227/bigeast"}, "edited": false, "score": 1, "creation_date": 1460783771, "post_id": 36449421, "comment_id": 60913451, "body": "Just FYI, &quot;The \u2018##\u2019 preprocessing operator performs token pasting.&quot; see <a href=\"https://gcc.gnu.org/onlinedocs/cpp/Concatenation.html\" rel=\"nofollow noreferrer\">gcc.gnu.org/onlinedocs/cpp/Concatenation.html</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user719662"}, "edited": false, "score": 0, "creation_date": 1460987436, "post_id": 36449421, "comment_id": 60979866, "body": "I&#39;ve rewritten the entry paragraph so that it (IMO) has a) the very same <i>intended</i> meaning, b) a better phrasing (so that there&#39;s no need for further discussion here), c) overall more short and concise. Please improve on it further if you will, but be ware of the consequences of <i>ambiguous wording</i> - it usually triggers needless discussions where both sides are right yet no consensus is achieved."}, {"owner": {"reputation": 3678, "user_id": 1091644, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9783f1f2526f4e2a0f31b0a37bf71879?s=128&d=identicon&r=PG", "display_name": "Vad", "link": "https://stackoverflow.com/users/1091644/vad"}, "edited": false, "score": 0, "creation_date": 1472249764, "post_id": 36449421, "comment_id": 65692883, "body": "<code>main()</code> is not the only starting point for C programs, <code>main()</code> is the default one, C spec says different environments can have different entry points."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 3678, "user_id": 1091644, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9783f1f2526f4e2a0f31b0a37bf71879?s=128&d=identicon&r=PG", "display_name": "Vad", "link": "https://stackoverflow.com/users/1091644/vad"}, "edited": false, "score": 0, "creation_date": 1472263094, "post_id": 36449421, "comment_id": 65695544, "body": "@vad; That statement was controversial from the first day of the answer. I reworded it."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 613, "user_id": 4453524, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/sBZea.jpg?s=128&g=1", "display_name": "ljrk", "link": "https://stackoverflow.com/users/4453524/ljrk"}, "edited": false, "score": 1, "creation_date": 1472263257, "post_id": 36449421, "comment_id": 65695564, "body": "@larkey; Now agreed by your <a href=\"http://stackoverflow.com/questions/36449358/this-obfuscated-c-code-claims-to-run-without-a-main-but-what-does-it-really-d/36449421?noredirect=1#comment60513648_36449421\">comment</a>. C standard does says that a freestanding environment can have implementation defined starting point."}], "tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": true, "score": 194, "last_activity_date": 1493644958, "last_edit_date": 1493644958, "creation_date": 1459941078, "answer_id": 36449421, "question_id": 36449358, "link": "https://stackoverflow.com/questions/36449358/this-obfuscated-c-code-claims-to-run-without-a-main-but-what-does-it-really-d/36449421#36449421", "title": "This obfuscated C code claims to run without a main(), but what does it really do?", "body": "<p>C language define execution environment in two categories: <strong><em>freestanding</em></strong> and <strong><em>hosted</em></strong>. In both execution environment a function is called by the environment for program startup.<br>\nIn a <em>freestanding</em> environment program startup function can be implementation defined while in <em>hosted</em> environment it should be <code>main</code>. No program in C can run without program startup function on the defined environments. </p>\n\n<p>In your case, <code>main</code> is hidden by the preprocessor definitions. <code>begin()</code> will expand to  <code>decode(a,n,i,m,a,t,e)</code> which further will be expanded to <code>main</code>.  </p>\n\n<pre><code>int begin() -&gt; int decode(a,n,i,m,a,t,e)() -&gt; int m##a##i##n() -&gt; int main() \n</code></pre>\n\n<hr>\n\n<p><code>decode(s,t,u,m,p,e,d)</code> is a parameterized macro with 7 parameters. Replacement list for this macro is <code>m##s##u##t</code>. <code>m, s, u</code> and <code>t</code> are 4<sup>th</sup>, 1<sup>st</sup>, 3<sup>rd</sup> and 2<sup>nd</sup> parameter used in the replacement list.  </p>\n\n<pre><code>s, t, u, m, p, e, d\n1  2  3  4  5  6  7\n</code></pre>\n\n<p>Rest are of no use (<em>just to obfuscate</em>). Argument passed to <code>decode</code> is \"<strong>a</strong>,<strong>n</strong>,<strong>i</strong>,<strong>m</strong>,a,t,e\" so, the identifiers <code>m, s, u</code> and <code>t</code> are replaced with arguments <code>m, a, i</code> and <code>n</code>, respectively.</p>\n\n<pre><code> m --&gt; m  \n s --&gt; a \n u --&gt; i \n t --&gt; n\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2887, "user_id": 5845470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/606531753afd42de16d82a1199fc4d45?s=128&d=identicon&r=PG&f=1", "display_name": "jdarthenay", "link": "https://stackoverflow.com/users/5845470/jdarthenay"}, "is_accepted": false, "score": 71, "last_activity_date": 1460986810, "last_edit_date": 1460986810, "creation_date": 1459941205, "answer_id": 36449462, "question_id": 36449358, "link": "https://stackoverflow.com/questions/36449358/this-obfuscated-c-code-claims-to-run-without-a-main-but-what-does-it-really-d/36449462#36449462", "title": "This obfuscated C code claims to run without a main(), but what does it really do?", "body": "<p>Try using <code>gcc -E source.c</code>, output ends with:</p>\n\n<pre><code>int main()\n{\n    printf(\"Ha HA see how it is?? \");\n}\n</code></pre>\n\n<p>So a <code>main()</code> function is actually generated by preprocessor.</p>\n"}, {"tags": [], "owner": {"reputation": 29810, "user_id": 423170, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/H9kNQ.png?s=128&g=1", "display_name": "Frxstrem", "link": "https://stackoverflow.com/users/423170/frxstrem"}, "is_accepted": false, "score": 11, "last_activity_date": 1459941301, "creation_date": 1459941301, "answer_id": 36449510, "question_id": 36449358, "link": "https://stackoverflow.com/questions/36449358/this-obfuscated-c-code-claims-to-run-without-a-main-but-what-does-it-really-d/36449510#36449510", "title": "This obfuscated C code claims to run without a main(), but what does it really do?", "body": "<p><code>decode(a,b,c,d,[...])</code> shuffles the first four arguments and joins them to get a new identifier, in the order <code>dacb</code>. (The remaining three arguments are ignored.) For instance, <code>decode(a,n,i,m,[...])</code> gives the identifier <code>main</code>. Note that this is what the <code>begin</code> macro is defined as.</p>\n\n<p>Therefore, the <code>begin</code> macro is simply defined as <code>main</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 7405, "user_id": 5735010, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/znAEN.jpg?s=128&g=1", "display_name": "abhiarora", "link": "https://stackoverflow.com/users/5735010/abhiarora"}, "is_accepted": false, "score": 30, "last_activity_date": 1459949829, "creation_date": 1459949829, "answer_id": 36452822, "question_id": 36449358, "link": "https://stackoverflow.com/questions/36449358/this-obfuscated-c-code-claims-to-run-without-a-main-but-what-does-it-really-d/36452822#36452822", "title": "This obfuscated C code claims to run without a main(), but what does it really do?", "body": "<p>Someone is trying to act like Magician.\nHe thinks he can trick us. But we all know, c program execution begins with <code>main()</code>. </p>\n\n<p>The <code>int begin()</code> will be replaced with <code>decode(a,n,i,m,a,t,e)</code> by one pass of preprocessor stage. Then again, <code>decode(a,n,i,m,a,t,e)</code> will be replaced with m##a##i##n. As by positional association of macro call,  <code>s</code> will has a value of character <code>a</code>. Likewise, <code>u</code> will be replaced by 'i' and <code>t</code> will be replaced by 'n'. And, that's how, <code>m##s##u##t</code> will become <code>main</code></p>\n\n<p>Regarding, <code>##</code> symbol in macro expansion, it is the preprocessing operator and it performs token pasting. When a macro is expanded, the two tokens on either side of each \u2018##\u2019 operator are combined into a single token, which then replaces the \u2018##\u2019 and the two original tokens in the macro expansion.</p>\n\n<p>If you don't believe me, you can compile your code with <code>-E</code> flag. It will stop compilation process after preprocessing and you can see the result of token pasting.</p>\n\n<pre><code>gcc -E FILENAME.c\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 36985, "user_id": 749284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9939c97c2ccc2f1f6b829e9afbc32e5b?s=128&d=identicon&r=PG", "display_name": "mah", "link": "https://stackoverflow.com/users/749284/mah"}, "edited": false, "score": 1, "creation_date": 1460060491, "post_id": 36476439, "comment_id": 60582130, "body": "Is the name of <code>_start</code> part of a defined standard, or is that just implementation-specific? Certainly your &quot;main as an array&quot; is architecture-specific. Also important, it would not be unreasonable for your &quot;main as an array&quot; trick to fail at run time due to security restrictions (though that would be more likely if you did not use the <code>const</code> qualifier, and still many systems would permit it)."}, {"owner": {"reputation": 39406, "user_id": 371250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WKvHm.png?s=128&g=1", "display_name": "ninjalj", "link": "https://stackoverflow.com/users/371250/ninjalj"}, "reply_to_user": {"reputation": 36985, "user_id": 749284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9939c97c2ccc2f1f6b829e9afbc32e5b?s=128&d=identicon&r=PG", "display_name": "mah", "link": "https://stackoverflow.com/users/749284/mah"}, "edited": false, "score": 1, "creation_date": 1460062730, "post_id": 36476439, "comment_id": 60583398, "body": "@mah: <code>_start</code> is not in the ELF standard, though the AMD64 psABI contains a reference to <code>_start</code> at <i>3.4 Process Initialization</i>. Officially, ELF only knows about the address at <code>e_entry</code>in the ELF header, <code>_start</code> is just a name the implementation chose."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 36985, "user_id": 749284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9939c97c2ccc2f1f6b829e9afbc32e5b?s=128&d=identicon&r=PG", "display_name": "mah", "link": "https://stackoverflow.com/users/749284/mah"}, "edited": false, "score": 1, "creation_date": 1460077306, "post_id": 36476439, "comment_id": 60588288, "body": "@mah <i>Also important, it would not be unreasonable for your &quot;main as an array&quot; trick to fail at run time due to security restrictions (though that would be more likely if you did not use the const qualifier, and still many systems would permit it).</i>  Only if the final executable is in some way distinguishable as something insecure - a binary executable is a binary executable no matter how it got there.  And <code>const</code> won&#39;t matter one bit - the symbol name in that binary executable file is <code>main</code>.  No more, no less.  <code>const</code> is a C construct that means nothing at execution time."}, {"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "reply_to_user": {"reputation": 17049, "user_id": 167745, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/wBebv.jpg?s=128&g=1", "display_name": "Stewart", "link": "https://stackoverflow.com/users/167745/stewart"}, "edited": false, "score": 1, "creation_date": 1460126201, "post_id": 36476439, "comment_id": 60611951, "body": "@Stewart: it certainly fails on ARMv6l (segmentation fault). But it should work on any x86-64 architecture."}, {"owner": {"reputation": 36985, "user_id": 749284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9939c97c2ccc2f1f6b829e9afbc32e5b?s=128&d=identicon&r=PG", "display_name": "mah", "link": "https://stackoverflow.com/users/749284/mah"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1460159052, "post_id": 36476439, "comment_id": 60628667, "body": "@AndrewHenle <i>a binary executable is a binary executable no matter how it got there</i> - not exactly true. A binary executable is not a single blob of executable instructions, it&#39;s a carefully mapped blob of partitions, some of which are instructions, some of which are read-only data, and some of which are data to be initialized into read-write data. (Some) security hardware MMUs can prevent execution from pages not marked as such, and this is a good feature to prevent, for example, stack overflows leading to executing code on the stack but sadly that&#39;s sometimes legitimate or often not enabled."}, {"owner": {"reputation": 36985, "user_id": 749284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9939c97c2ccc2f1f6b829e9afbc32e5b?s=128&d=identicon&r=PG", "display_name": "mah", "link": "https://stackoverflow.com/users/749284/mah"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1460159300, "post_id": 36476439, "comment_id": 60628715, "body": "@AndrewHenle <i>And const won&#39;t matter one bit</i> - actually <code>const</code> can make the difference between placing the data in read-only memory (where it might be part of the executable pages) and read-write memory (where on a secure system, it would not be executable). I&#39;m not saying you&#39;re going to find this to be the case on your system as typical general purpose computers are not going to use this measure of security (if the MMU even supports it), but there&#39;s far more in the world than general purpose computers."}, {"owner": {"reputation": 36985, "user_id": 749284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9939c97c2ccc2f1f6b829e9afbc32e5b?s=128&d=identicon&r=PG", "display_name": "mah", "link": "https://stackoverflow.com/users/749284/mah"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1460159410, "post_id": 36476439, "comment_id": 60628744, "body": "@AndrewHenle <i>the symbol name in that binary executable file is main. No more, no less.</i> Executables do not have symbols, except as possible metadata for debuggers only. They&#39;re important for the linker to serve as placeholders for addressing. <i>const is a C construct that means nothing at execution time.</i> - except it can have significance towards where the compiler placed things. There are quite a few low level details which you&#39;ve either not thought of here, or not had reason to learn about in the past."}, {"owner": {"reputation": 36985, "user_id": 749284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9939c97c2ccc2f1f6b829e9afbc32e5b?s=128&d=identicon&r=PG", "display_name": "mah", "link": "https://stackoverflow.com/users/749284/mah"}, "reply_to_user": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 0, "creation_date": 1460390701, "post_id": 36476439, "comment_id": 60707923, "body": "@leftaroundabout perhaps any <i>Windows</i> x86-64 architecture (or whatever OS was provided for in the example)... but not <i>any</i> x86-64 architecture. Since the bits are precompiled code for an I/O call, it&#39;s highly unlikely that it would ever work for an operating system other than the one it was built for. It gives a segmentation fault when run on an x86-64 Mac (running OS X), for example."}], "tags": [], "owner": {"reputation": 8781, "user_id": 1426969, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IMidj.jpg?s=128&g=1", "display_name": "NlightNFotis", "link": "https://stackoverflow.com/users/1426969/nlightnfotis"}, "is_accepted": false, "score": 37, "last_activity_date": 1460986658, "last_edit_date": 1460986658, "creation_date": 1460032649, "answer_id": 36476439, "question_id": 36449358, "link": "https://stackoverflow.com/questions/36449358/this-obfuscated-c-code-claims-to-run-without-a-main-but-what-does-it-really-d/36476439#36476439", "title": "This obfuscated C code claims to run without a main(), but what does it really do?", "body": "<p>The program in question <em>does</em> call <code>main()</code> due to macro expansion, but your assumption is flawed - it <em>doesn't</em> have to call <code>main()</code> at all! </p>\n\n<p>Strictly speaking, you can have a C program and be able to compile it without having a <code>main</code> symbol. <code>main</code> is something that the <code>c library</code> expects to jump in to, after it has finished its own initialization. Usually you jump into <code>main</code> from the libc symbol known as <code>_start</code>. It is always possible to have a very valid program, that simply executes assembly, without having a main. Take a look at this:</p>\n\n<pre><code>/* This must be compiled with the flag -nostdlib because otherwise the\n * linker will complain about multiple definitions of the symbol _start\n * (one here and one in glibc) and a missing reference to symbol main\n * (that the libc expects to be linked against).\n */\n\nvoid\n_start ()\n{\n    /* calling the write system call, with the arguments in this order:\n     * 1. the stdout file descriptor\n     * 2. the buffer we want to print (Here it's just a string literal).\n     * 3. the amount of bytes we want to write.\n     */\n    asm (\"int $0x80\"::\"a\"(4), \"b\"(1), \"c\"(\"Hello world!\\n\"), \"d\"(13));\n    asm (\"int $0x80\"::\"a\"(1), \"b\"(0)); /* calling exit syscall, with the argument to be 0 */\n}\n</code></pre>\n\n<p>Compile the above with <code>gcc -nostdlib without_main.c</code>, and see it printing <code>Hello World!</code> on the screen just by issuing system calls (interrupts) in inline assembly.</p>\n\n<p>For more information about this particular issue, check out the <a href=\"https://blogs.oracle.com/ksplice/entry/hello_from_a_libc_free\">ksplice blog</a></p>\n\n<p>Another interesting issue, is that you can also have a program that compiles without having the <code>main</code> symbol correspond to a C function. For instance you can have the following as a very valid C program, that only makes the compiler whine when you up the Warnings level.</p>\n\n<pre><code>/* These values are extracted from the decimal representation of the instructions\n * of a hello world program written in asm, that gdb provides.\n */\nconst int main[] = {\n    -443987883, 440, 113408, -1922629632,\n    4149, 899584, 84869120, 15544,\n    266023168, 1818576901, 1461743468, 1684828783,\n    -1017312735\n};\n</code></pre>\n\n<p>The values in the array are bytes that correspond to the instructions needed to print Hello World on the screen. For a more detailed account of how this specific program works, take a look at this <a href=\"https://jroweboy.github.io/c/asm/2015/01/26/when-is-main-not-a-function.html\">blog post</a>, which is where I also read it first.</p>\n\n<p>I want to make one final notice about these programs. I do not know if they register as valid C programs according to the C language specification, but compiling these and running them is certainly very possible, even if they violate the specification itself.</p>\n"}, {"comments": [{"owner": {"reputation": 997, "user_id": 2316442, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/79835deee85102915684418bc897191a?s=128&d=identicon&r=PG", "display_name": "Ho1", "link": "https://stackoverflow.com/users/2316442/ho1"}, "edited": false, "score": 0, "creation_date": 1460987309, "post_id": 36695058, "comment_id": 60979773, "body": "@vaxquis You&#39;re right, but this is a partial answer I wrote to compliment/correct the first answer which binds <code>main()</code> function to the C programming language, which is not correct."}, {"owner": {"reputation": 997, "user_id": 2316442, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/79835deee85102915684418bc897191a?s=128&d=identicon&r=PG", "display_name": "Ho1", "link": "https://stackoverflow.com/users/2316442/ho1"}, "edited": false, "score": 0, "creation_date": 1460989983, "post_id": 36695058, "comment_id": 60981856, "body": "@vaxquis I assumed that explaining &quot;main() function is not essential in C programs&quot; would be a partial answer. I have added a paragraph to make the answer complete. \u2013 Ho1 16 mins ago"}], "tags": [], "owner": {"reputation": 997, "user_id": 2316442, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/79835deee85102915684418bc897191a?s=128&d=identicon&r=PG", "display_name": "Ho1", "link": "https://stackoverflow.com/users/2316442/ho1"}, "is_accepted": false, "score": 2, "last_activity_date": 1461054513, "last_edit_date": 1495542865, "creation_date": 1460985252, "answer_id": 36695058, "question_id": 36449358, "link": "https://stackoverflow.com/questions/36449358/this-obfuscated-c-code-claims-to-run-without-a-main-but-what-does-it-really-d/36695058#36695058", "title": "This obfuscated C code claims to run without a main(), but what does it really do?", "body": "<p>In your example, <code>main()</code> function is actually present, because <code>begin</code> is a macro which the compiler replaces with <code>decode</code> macro which in turn replaced by the expression m##s##u##t. Using macro expansion <code>##</code>, you will reach the word <code>main</code> from <code>decode</code>. This is a trace:</p>\n\n<pre><code>begin --&gt; decode(a,n,i,m,a,t,e) --&gt; m##parameter1##parameter3##parameter2 ---&gt; main\n</code></pre>\n\n<p>It's just a trick to have <code>main()</code>, but using the name <code>main()</code> for the program's entry function is not necessary in C programming language. It depends on your operating systems and the linker as one of its tools.</p>\n\n<p>In Windows, you don't always use <code>main()</code>, but <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ff381406%28v=vs.85%29.aspx\" rel=\"nofollow noreferrer\">rather <code>WinMain</code> or <code>wWinMain</code></a>, although <a href=\"https://stackoverflow.com/a/13872211/2316442\">you can use <code>main()</code>, even with Microsoft's toolchain</a>. In Linux, one can use <code>_start</code>.</p>\n\n<p>It's up to the linker as an operating system tool to set the entry point, and not the language itself. You can even <a href=\"https://unix.stackexchange.com/questions/223385\">set our own entry point, and you can make a library that is also executable</a>!</p>\n"}], "owner": {"reputation": 3197, "user_id": 5853530, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/3b9567983f2e1d6c2315fa26202accb6?s=128&d=identicon&r=PG&f=1", "display_name": "Rajeev Singh", "link": "https://stackoverflow.com/users/5853530/rajeev-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13436, "favorite_count": 30, "accepted_answer_id": 36449421, "answer_count": 6, "score": 84, "last_activity_date": 1493644958, "creation_date": 1459940927, "last_edit_date": 1493562562, "question_id": 36449358, "link": "https://stackoverflow.com/questions/36449358/this-obfuscated-c-code-claims-to-run-without-a-main-but-what-does-it-really-d", "title": "This obfuscated C code claims to run without a main(), but what does it really do?", "body": "<pre><code>#include &lt;stdio.h&gt;\n#define decode(s,t,u,m,p,e,d) m##s##u##t\n#define begin decode(a,n,i,m,a,t,e)\n\nint begin()\n{\n    printf(\"Ha HA see how it is?? \");\n}\n</code></pre>\n\n<p>Does this indirectly call <code>main</code>? how?</p>\n"}, {"tags": ["c++", "c", "assembly", "computer-science", "computation"], "comments": [{"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1459941264, "post_id": 36449291, "comment_id": 60511527, "body": "I think your gut feeling is right. I have followed a few optimization questions here on SO about surprising results from eliminating branches."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1459941908, "post_id": 36449291, "comment_id": 60512003, "body": "<a href=\"https://en.wikipedia.org/wiki/Branch_predictor\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Branch_predictor</a> and the articles it links to will provide a start.   The relative gains depend on complexity of the function and versus possible branches but, with modern processors, pipelining and branch predictors are often relevant."}, {"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 2, "creation_date": 1459941910, "post_id": 36449291, "comment_id": 60512005, "body": "Maybe you ought to check first that your compiler <a href=\"http://stackoverflow.com/questions/26124620/why-does-msvc-emit-a-useless-movsx-before-performing-this-bit-test\">cannot already do this</a> before you fubar your program.  And of course <i>always</i> verify first that it is actually <i>can</i> make a difference, use a profiler.  Programmer&#39;s dictum is to measure three times, cut once."}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 4828329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/634fb720925d880616cebdbd31829461?s=128&d=identicon&r=PG&f=1", "display_name": "Maxyone", "link": "https://stackoverflow.com/users/4828329/maxyone"}, "edited": false, "score": 0, "creation_date": 1460154885, "post_id": 36449474, "comment_id": 60627387, "body": "Think you for your answer I will check it out!"}], "tags": [], "owner": {"reputation": 7242, "user_id": 109019, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/266408e128b44b980a953eda085d38a2?s=128&d=identicon&r=PG", "display_name": "Salgar", "link": "https://stackoverflow.com/users/109019/salgar"}, "is_accepted": false, "score": 4, "last_activity_date": 1459941238, "creation_date": 1459941238, "answer_id": 36449474, "question_id": 36449291, "link": "https://stackoverflow.com/questions/36449291/execution-speed-of-conditional-instructions-compared-to-mathematical-functions/36449474#36449474", "title": "Execution speed of conditional instructions compared to mathematical functions", "body": "<p>Your gut feeling is correct.</p>\n\n<p>The problem is that modern processors have a pipeline, and in the pipeline the next <em>x</em> instructions are loaded sequentially ready for execution. If you have a branch, an if statement, then the processor doesn't know which code path you're going to be taking next, and so it guesses using the <em>branch predictor</em>, but if it gets it wrong it has to throw out all of the pipeline and start again down the correct branch.</p>\n\n<p>Branch predictors in modern processors are quite good, but if you have something that has a 50/50 chances of going one way or the other, you are going to have a lot of pipeline stalls.</p>\n\n<p>This is why eliminating if statements are good, especially in tight loops.</p>\n\n<p>This seems to have some good explanation: <a href=\"http://igoro.com/archive/fast-and-slow-if-statements-branch-prediction-in-modern-processors/\" rel=\"nofollow\">http://igoro.com/archive/fast-and-slow-if-statements-branch-prediction-in-modern-processors/</a></p>\n"}], "owner": {"reputation": 45, "user_id": 4828329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/634fb720925d880616cebdbd31829461?s=128&d=identicon&r=PG&f=1", "display_name": "Maxyone", "link": "https://stackoverflow.com/users/4828329/maxyone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 2, "closed_date": 1460243743, "answer_count": 1, "score": 5, "last_activity_date": 1459942414, "creation_date": 1459940773, "last_edit_date": 1459942414, "question_id": 36449291, "link": "https://stackoverflow.com/questions/36449291/execution-speed-of-conditional-instructions-compared-to-mathematical-functions", "closed_reason": "Opinion-based", "title": "Execution speed of conditional instructions compared to mathematical functions", "body": "<p>I will try to be as clear as I can with my question (not easy...it's not that clear for me as well).\nSuppose you have a set of IF...THEN instructions with multiple operands, for example </p>\n\n<pre><code>IF ((a==0) &amp;&amp; (b==1) &amp;&amp; (c==1)) THEN x=1\nELSE IF ((a==0) &amp;&amp; (b==0) &amp;&amp; (c==1)) THEN x=2-\n</code></pre>\n\n<p>and so on</p>\n\n<p>Suppose I could replace all those IFs with a single mathematical function like\n<code>x = a * n1 + b * n2 + c * n3</code> (this is just to give you an idea, in real it's more complex, but also the IFs and operands are many more)</p>\n\n<p>The function comes from a previously trained artificial neural network.</p>\n\n<p>My gut feeling is that when it comes to execution, the function should take lots less time than the IFs, but it's just a gut feeling that comes from my old background in assembly where they taught us that a conditional instruction takes way more time than an arithmetical one.</p>\n\n<p>Can you confirm this? maybe even provide me some link where I could find an explanation?</p>\n\n<p>Thank you in advance guys!</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 115642, "user_id": 299924, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/71fc84230717311db1410d7106273128?s=128&d=identicon&r=PG", "display_name": "trojanfoe", "link": "https://stackoverflow.com/users/299924/trojanfoe"}, "edited": false, "score": 3, "creation_date": 1459940388, "post_id": 36449101, "comment_id": 60510902, "body": "<code>scanf(argv[2],&quot;%c&quot;,&amp;op1);</code>?  You should be checking all calls to <code>sscanf()</code> return <code>1</code>."}, {"owner": {"reputation": 89, "user_id": 5213345, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/x5bEv.jpg?s=128&g=1", "display_name": "Alex M", "link": "https://stackoverflow.com/users/5213345/alex-m"}, "reply_to_user": {"reputation": 115642, "user_id": 299924, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/71fc84230717311db1410d7106273128?s=128&d=identicon&r=PG", "display_name": "trojanfoe", "link": "https://stackoverflow.com/users/299924/trojanfoe"}, "edited": false, "score": 0, "creation_date": 1459940500, "post_id": 36449101, "comment_id": 60510977, "body": "In fact, I also tried sscanf(argv[2],&quot;%c&quot;,&amp;op1); but none of them works"}, {"owner": {"reputation": 5171, "user_id": 2718186, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/ca44ca18bf615e74f930d28a89d01508?s=128&d=identicon&r=PG", "display_name": "MicroVirus", "link": "https://stackoverflow.com/users/2718186/microvirus"}, "edited": false, "score": 1, "creation_date": 1459940501, "post_id": 36449101, "comment_id": 60510978, "body": "Use the debugger to step through the code and find out why the code behaves the way it does."}, {"owner": {"reputation": 89, "user_id": 5213345, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/x5bEv.jpg?s=128&g=1", "display_name": "Alex M", "link": "https://stackoverflow.com/users/5213345/alex-m"}, "edited": false, "score": 0, "creation_date": 1459940640, "post_id": 36449101, "comment_id": 60511056, "body": "So the logic of this code is correct? is that right?"}], "answers": [{"comments": [{"owner": {"reputation": 89, "user_id": 5213345, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/x5bEv.jpg?s=128&g=1", "display_name": "Alex M", "link": "https://stackoverflow.com/users/5213345/alex-m"}, "edited": false, "score": 0, "creation_date": 1459940900, "post_id": 36449215, "comment_id": 60511270, "body": "In order to use atoi, I need to  #include &lt;iostream&gt;. I use Xcode to write this code. For some reason, it says can&#39;t find iostream."}, {"owner": {"reputation": 2470, "user_id": 4262157, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/DIi0C.jpg?s=128&g=1", "display_name": "Erik W", "link": "https://stackoverflow.com/users/4262157/erik-w"}, "reply_to_user": {"reputation": 89, "user_id": 5213345, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/x5bEv.jpg?s=128&g=1", "display_name": "Alex M", "link": "https://stackoverflow.com/users/5213345/alex-m"}, "edited": false, "score": 1, "creation_date": 1459941256, "post_id": 36449215, "comment_id": 60511519, "body": "@AlexM iostream is c++, not c. Include stdlib.h instead"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 1, "creation_date": 1459943268, "post_id": 36449215, "comment_id": 60513047, "body": "@trojanfoe Because your code does (almost) the same thing as the OP&#39;s. And judging by the <code>Input Error!!!</code> as the output <a href=\"http://stackoverflow.com/questions/36449101/command-line-calculator-in-c-what-is-wrong/36450045#comment60510977_36449101\">even after the OP changed the second <code>scanf</code> to <code>sscanf</code></a> suggests that the problem is elsewhere."}, {"owner": {"reputation": 115642, "user_id": 299924, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/71fc84230717311db1410d7106273128?s=128&d=identicon&r=PG", "display_name": "trojanfoe", "link": "https://stackoverflow.com/users/299924/trojanfoe"}, "reply_to_user": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1459943466, "post_id": 36449215, "comment_id": 60513197, "body": "@CoolGuy Well until you can tell me where the error is you cannot state that my answer doesn&#39;t solve the OPs problem.  You are relying on the statements of the OP, rather than the code itself."}, {"owner": {"reputation": 5585, "user_id": 219229, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ef02adcd72fe84ea6c4bdc8ea4cccf17?s=128&d=identicon&r=PG", "display_name": "syockit", "link": "https://stackoverflow.com/users/219229/syockit"}, "edited": false, "score": 0, "creation_date": 1527562765, "post_id": 36449215, "comment_id": 88160541, "body": "It&#39;s because the second sscanf uses <code>%c</code>, and string pointer was passed instead. @trojanfoe correctly passes in the first character."}], "tags": [], "owner": {"reputation": 115642, "user_id": 299924, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/71fc84230717311db1410d7106273128?s=128&d=identicon&r=PG", "display_name": "trojanfoe", "link": "https://stackoverflow.com/users/299924/trojanfoe"}, "is_accepted": false, "score": 1, "last_activity_date": 1459940587, "creation_date": 1459940587, "answer_id": 36449215, "question_id": 36449101, "link": "https://stackoverflow.com/questions/36449101/command-line-calculator-in-c-what-is-wrong/36449215#36449215", "title": "Command line calculator in C. What is wrong?", "body": "<p>There is no need to <code>sscanf()</code> given every part of the expression is in a separate string already:</p>\n\n<pre><code>if (argc == 4){\n    num1 = atoi(argv[1]);\n    op1 = argv[2][0];\n    num2 = atoi(argv[3]);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "is_accepted": true, "score": 2, "last_activity_date": 1459942747, "creation_date": 1459942747, "answer_id": 36450045, "question_id": 36449101, "link": "https://stackoverflow.com/questions/36449101/command-line-calculator-in-c-what-is-wrong/36450045#36450045", "title": "Command line calculator in C. What is wrong?", "body": "<p>Some problems:</p>\n\n<ol>\n<li>You used <code>scanf</code> instead of <code>sscanf</code> for parsing a character.</li>\n<li>You don't check the return value of those <code>sscanf</code>s.</li>\n<li>The <code>switch</code> and the final <code>printf</code> should be <em>inside</em> the <code>if</code>, not outside it.</li>\n<li>You don't check for division by zero issues.</li>\n</ol>\n\n<p>Here is the corrected code with some more minor modifications <em>(untested)</em>:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n/* #include &lt;math.h&gt; Unused header */\n\nint main(int argc, char* argv[])\n{\n    int num1, num2, result;\n    char op1;\n\n    if (argc != 4)\n    {\n        fprintf(stderr, \"Program requires exactly 3 arguments (excluding program name), Too %s given; Exiting...\\n\", argc &lt; 4 ? \"few\" : \"many\");\n        return -1;\n    }\n\n    if(sscanf(argv[1], \"%d\", &amp;num1) == 1 &amp;&amp;\n       sscanf(argv[2], \"%c\", &amp;op1 ) == 1 &amp;&amp;\n       sscanf(argv[3], \"%d\", &amp;num2) == 1)\n    {\n        switch (op1)\n        {\n            case '+':\n                result = num1 + num2;\n                break;\n\n            case '-':\n                result = num1 - num2;\n                break;\n\n            case 'x':\n                result = num1 * num2;\n                break;\n\n            case '/':\n                if(num2 == 0)\n                {\n                    fputs(\"Division by zero is not possible; Exiting...\", stderr);\n                    return -2;\n                }\n                result = num1 / num2;\n                break;\n\n            case '%':\n                if(num2 == 0)\n                {\n                    fputs(\"Division by zero is not possible; Exiting...\", stderr);\n                    return -3;\n                }\n                result = num1 % num2;\n                break;\n\n            default:\n                fprintf(stderr, \"Invalid operator '%c'; Exiting...\\n\", op1);\n                return -4;\n        }\n\n        printf(\"Result = %d\\n\", result);\n    }\n    else\n    {\n        fputs(\"Failed to parse arguments successfully; Exiting...\", stderr);\n        return -5;\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Oh, and the shell has some special characters that do stuff. To avoid issues, wrap each argument with <code>\"</code> like:</p>\n\n<pre><code>./main \"1\" \"+\" \"2\"\n</code></pre>\n"}], "owner": {"reputation": 89, "user_id": 5213345, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/x5bEv.jpg?s=128&g=1", "display_name": "Alex M", "link": "https://stackoverflow.com/users/5213345/alex-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2404, "favorite_count": 0, "accepted_answer_id": 36450045, "answer_count": 2, "score": 1, "last_activity_date": 1459942747, "creation_date": 1459940325, "last_edit_date": 1459940430, "question_id": 36449101, "link": "https://stackoverflow.com/questions/36449101/command-line-calculator-in-c-what-is-wrong", "title": "Command line calculator in C. What is wrong?", "body": "<p>I have this code as a simple command line calculator in C.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\nint main(int argc, char* argv[]){\n\nint num1, num2, result;\nchar op1;\n\n/* convert 1st and 3st of the arguments into int */\n/* assign the argv[1] to num1, assign the argv[2] to op1,\n assign the argv[3] to num2 */\n\nif (argc == 4){\n    sscanf(argv[1],\"%d\",&amp;num1);\n    scanf(argv[2],\"%c\",&amp;op1);\n    sscanf(argv[3],\"%d\",&amp;num2);\n}\n\nelse{   // if the input is wrong\n    printf(\"Input Error\\n\");\n}\n\nswitch (op1){\n\n    case'+':\n        result = num1 + num2;\n        break;\n    case'-':\n        result = num1 - num2;\n        break;\n    case'x':\n        result = num1 * num2;\n        break;\n    case'/':\n        result = num1 / num2;\n        break;\n    case'%':\n        result = num1 % num2;\n        break;\n    default: printf(\"Input Error!!!\\n\");\n}\nprintf(\"%d\\n\", result);\n}\n</code></pre>\n\n<p>After I complied the code and ran it. Some error happens.</p>\n\n<p>For example, I use command: ./main 1 + 2 (Which should be 3)</p>\n\n<p>The output is: \nInput Error!!!\n0</p>\n\n<p>And if I use command: ./main</p>\n\n<p>The output is:\nInput Error\nInput Error!!!\n0</p>\n\n<p>I don't where is wrong. Please help!! Thank you so much!! I'm a completely beginner to C. </p>\n"}, {"tags": ["c", "multidimensional-array", "casting", "c89", "ansi-c"], "comments": [{"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 1, "creation_date": 1459940038, "post_id": 36448619, "comment_id": 60510648, "body": "&quot;I can&#39;t declare <code>longByteTable</code> with latter type because then it would not work properly with different endianness&quot; This sounds a lot like an X/Y problem. If you need to make <code>reinterpretedTable</code> to ensure some specific handling of endianness, you should be able to do it in a more portable way - say, with <code>hton</code>/<code>ntoh</code> functions."}, {"owner": {"reputation": 340, "user_id": 6166067, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/yvwo4.jpg?s=128&g=1", "display_name": "aprelev", "link": "https://stackoverflow.com/users/6166067/aprelev"}, "reply_to_user": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 0, "creation_date": 1459940567, "post_id": 36448619, "comment_id": 60511010, "body": "No, I do not need the conversions and byte rotating. All transformations are endianness-independent, such as xor&#39;s and assignments. But xoring values of type <code>uint64_t</code> is in my case much faster than xoring 4 pairs of values of type <code>uint8_t</code> because it is performed with single instruction rather than 4 separate instructions. Yes, sometimes compiler sees this through and replaces bytes xor with full-register xors, but not all the time."}], "answers": [{"comments": [{"owner": {"reputation": 340, "user_id": 6166067, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/yvwo4.jpg?s=128&g=1", "display_name": "aprelev", "link": "https://stackoverflow.com/users/6166067/aprelev"}, "edited": false, "score": 0, "creation_date": 1459941045, "post_id": 36449111, "comment_id": 60511371, "body": "Thank you, this actually works. Shame I did not think of unions before."}, {"owner": {"reputation": 340, "user_id": 6166067, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/yvwo4.jpg?s=128&g=1", "display_name": "aprelev", "link": "https://stackoverflow.com/users/6166067/aprelev"}, "edited": false, "score": 0, "creation_date": 1460094843, "post_id": 36449111, "comment_id": 60593003, "body": "Finally solved with union of pointers:  <code>union longTable_t {     const uint8_t (*asBytes)[256][16];     const uint64_t (*asQWords)[256][2]; };</code>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 340, "user_id": 6166067, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/yvwo4.jpg?s=128&g=1", "display_name": "aprelev", "link": "https://stackoverflow.com/users/6166067/aprelev"}, "edited": false, "score": 0, "creation_date": 1460098578, "post_id": 36449111, "comment_id": 60594625, "body": "@ArsenyAprelev No, you should have a struct like above then declare a pointer to that struct. The problem with pointer aliasing is that a compiler may assume that a certain chunk of data might only get accessed through a pointer to that specific type. If it is referenced through some other type, the compiler is still allowed assume that there have been no changes to the data and therefore optimize the code accordingly. So a union of pointers solves nothing. <a href=\"http://stackoverflow.com/questions/98650/what-is-the-strict-aliasing-rule\">See this</a> for details."}, {"owner": {"reputation": 340, "user_id": 6166067, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/yvwo4.jpg?s=128&g=1", "display_name": "aprelev", "link": "https://stackoverflow.com/users/6166067/aprelev"}, "edited": false, "score": 0, "creation_date": 1460532758, "post_id": 36449111, "comment_id": 60780440, "body": "Okay, what about: <code>union qword_t {     uint8_t asBytes[8];     uint64_t asQWord; };</code> and <code>const union qword_t longTable[16][256][2] = ...</code>? Technically, reading from <code>asQWord</code> when initialised as <code>asBytes</code> is undefined behavior?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 340, "user_id": 6166067, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/yvwo4.jpg?s=128&g=1", "display_name": "aprelev", "link": "https://stackoverflow.com/users/6166067/aprelev"}, "edited": false, "score": 0, "creation_date": 1460533074, "post_id": 36449111, "comment_id": 60780675, "body": "@ArsenyAprelev No that is fine, C allows &quot;type punning&quot; for unions, given that the variable representations match and that you mind any potential padding bytes."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": true, "score": 2, "last_activity_date": 1459940347, "creation_date": 1459940347, "answer_id": 36449111, "question_id": 36448619, "link": "https://stackoverflow.com/questions/36448619/cast-multidimensional-array-to-multidimensional-array-of-another-type/36449111#36449111", "title": "Cast multidimensional array to multidimensional array of another type", "body": "<p>Because of the pointer aliasing rules of C, you cannot make such casts. The only safe way is to use a union:</p>\n\n<pre><code>typedef union\n{\n  uint8_t longByteTable[16][256][16]\n  uint64_t reinterpretedTable[16][256][2];\n} table_t;\n\nconst table_t table;\n</code></pre>\n\n<p>Though note that this will still make your code depend on endianess. The only way to make the code endianess-indepentent, is to assign values to/from larger integer types by using bit shifts.</p>\n"}], "owner": {"reputation": 340, "user_id": 6166067, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/yvwo4.jpg?s=128&g=1", "display_name": "aprelev", "link": "https://stackoverflow.com/users/6166067/aprelev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "accepted_answer_id": 36449111, "answer_count": 1, "score": 2, "last_activity_date": 1459940872, "creation_date": 1459939137, "last_edit_date": 1459939545, "question_id": 36448619, "link": "https://stackoverflow.com/questions/36448619/cast-multidimensional-array-to-multidimensional-array-of-another-type", "title": "Cast multidimensional array to multidimensional array of another type", "body": "<p>I have</p>\n\n<pre><code>const uint8_t longByteTable[16][256][16] = { { { 0x00, ... } } };\n</code></pre>\n\n<p>declared as a three-dimensional 16x256x16 array of hardcoded octet values.</p>\n\n<p>For optimisation purposes and various other reasons I need this array to be interpreted as a three-dimensional 16x256x2 array of uint64_t values:</p>\n\n<pre><code>const uint64_t reinterpretedTable[16][256][2];\n</code></pre>\n\n<p>What I need is <strong>a valid way to cast</strong> <code>longByteTable</code> <strong>to</strong> <code>reinterpretedTable</code> <strong>within strict ISO/ANSI C</strong>. Is this:</p>\n\n<pre><code>const uint64_t (*reinterpretedTable)[256][2] = \n    (const uint64_t(*)[256][2])longByteTable;\n</code></pre>\n\n<p>a proper way to do that?</p>\n\n<p>P.S. I can't declare <code>longByteTable</code> with latter type because then it would not work properly with different endianness, and I would either need to declare different tables for diffent endianness, or perform some runtime checks and rotations. And yes, all further transformations of reinterpreted array are endianness-invariant.</p>\n"}, {"tags": ["c", "fread"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1459938914, "post_id": 36448480, "comment_id": 60509857, "body": "You need to determine the size of the file (see duplicate question) and then use <code>malloc</code> to allocate a buffer of that size."}, {"owner": {"reputation": 1201, "user_id": 1616329, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/5a660ddaee099d2d3021c01ad5b4c729?s=128&d=identicon&r=PG", "display_name": "lockdoc", "link": "https://stackoverflow.com/users/1616329/lockdoc"}, "edited": false, "score": 1, "creation_date": 1459938927, "post_id": 36448480, "comment_id": 60509867, "body": "Not a duplicate: fread could also contain the output of a command itself instead of simply a file <code>fp = popen(&quot;ls &#47;&quot;, &quot;r&quot;);</code>"}, {"owner": {"reputation": 62673, "user_id": 492336, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/UjW5c.png?s=128&g=1", "display_name": "sashoalm", "link": "https://stackoverflow.com/users/492336/sashoalm"}, "edited": false, "score": 0, "creation_date": 1459939027, "post_id": 36448480, "comment_id": 60509927, "body": "@lockdoc In that case, you can&#39;t know it. Non-seekable buffers have an unknown size."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1459939074, "post_id": 36448480, "comment_id": 60509967, "body": "@lockdoc You can&#39;t do that. But you can read the file line by line with <code>fgets</code> and store the lines dynamically or some other similar method."}, {"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 0, "creation_date": 1459939114, "post_id": 36448480, "comment_id": 60510003, "body": "Please don&#39;t use the tags (C++ in this case) randomly."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1459939140, "post_id": 36448480, "comment_id": 60510021, "body": "Why all those downvotes and close requests ? The question as it stands now is OK."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1459939206, "post_id": 36448480, "comment_id": 60510069, "body": "I have no idea why this is being downvoted."}, {"owner": {"reputation": 1201, "user_id": 1616329, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/5a660ddaee099d2d3021c01ad5b4c729?s=128&d=identicon&r=PG", "display_name": "lockdoc", "link": "https://stackoverflow.com/users/1616329/lockdoc"}, "edited": false, "score": 0, "creation_date": 1459939231, "post_id": 36448480, "comment_id": 60510089, "body": "I removed the c++ tag. I simply added it as it was suggested, my bad"}], "answers": [{"comments": [{"owner": {"reputation": 1201, "user_id": 1616329, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/5a660ddaee099d2d3021c01ad5b4c729?s=128&d=identicon&r=PG", "display_name": "lockdoc", "link": "https://stackoverflow.com/users/1616329/lockdoc"}, "edited": false, "score": 0, "creation_date": 1459940183, "post_id": 36448594, "comment_id": 60510747, "body": "Thanks for <code>malloc</code> and <code>realloc</code>. Just looked it up and will have a read about it. However in my case it is read entirely without a loop"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 1201, "user_id": 1616329, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/5a660ddaee099d2d3021c01ad5b4c729?s=128&d=identicon&r=PG", "display_name": "lockdoc", "link": "https://stackoverflow.com/users/1616329/lockdoc"}, "edited": false, "score": 1, "creation_date": 1459940317, "post_id": 36448594, "comment_id": 60510855, "body": "@lockdoc - If you don&#39;t know how much data you&#39;re going to get, you can&#39;t be guaranteed to be able to read it entirely without a loop."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 1201, "user_id": 1616329, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/5a660ddaee099d2d3021c01ad5b4c729?s=128&d=identicon&r=PG", "display_name": "lockdoc", "link": "https://stackoverflow.com/users/1616329/lockdoc"}, "edited": false, "score": 1, "creation_date": 1459942208, "post_id": 36448594, "comment_id": 60512248, "body": "@lockdoc: It can&#39;t be, for the very reason you are asking about. What length argument would you provide to <code>fread</code>? Although this is not the case for block devices (which is why there are usually ways to accomplish this if your input is definitely a file), speaking generally you cannot know how much data is going to arrive via a stream. That&#39;s why it&#39;s a stream, not a container. When working with stream data, it&#39;s best to imagine that it&#39;s <i>always</i> incrementally available such that you have to handle chunks of data as they come."}, {"owner": {"reputation": 9006, "user_id": 2805376, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/gTE7F.jpg?s=128&g=1", "display_name": "Shafizadeh", "link": "https://stackoverflow.com/users/2805376/shafizadeh"}, "edited": false, "score": 0, "creation_date": 1459971797, "post_id": 36448594, "comment_id": 60533639, "body": "Have you any blog about yourself? Not <a href=\"http://lightnesspyramid.com/\" rel=\"nofollow noreferrer\">this</a>, I mean a personal website. Something to be containing your biography, Is there any?"}, {"owner": {"reputation": 9006, "user_id": 2805376, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/gTE7F.jpg?s=128&g=1", "display_name": "Shafizadeh", "link": "https://stackoverflow.com/users/2805376/shafizadeh"}, "edited": false, "score": 0, "creation_date": 1460036091, "post_id": 36448594, "comment_id": 60565702, "body": "@LightnessRacesinOrbit . . . Ok, But as a professional programmer you should create a personal website. <i>(if you would do it let me know)</i>"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 9006, "user_id": 2805376, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/gTE7F.jpg?s=128&g=1", "display_name": "Shafizadeh", "link": "https://stackoverflow.com/users/2805376/shafizadeh"}, "edited": false, "score": 0, "creation_date": 1460041772, "post_id": 36448594, "comment_id": 60570431, "body": "@Shafizadeh: Everything I do is proprietary, confidential and/or classified secret, so I would have nothing to put on it."}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 4, "last_activity_date": 1459939408, "last_edit_date": 1459939408, "creation_date": 1459939086, "answer_id": 36448594, "question_id": 36448480, "link": "https://stackoverflow.com/questions/36448480/fread-how-to-know-the-size-of-the-buffer/36448594#36448594", "title": "fread: How to know the size of the buffer?", "body": "<p>No, there's no general rule, because it depends entirely on what you plan to do with the data. Do you just need to parse it as it comes? That would be ideal. If you know that your input has useful data \"samples\" in chunks of X bytes, then simply read X bytes at a time and handle them as you go.</p>\n\n<p>If you do need to copy the entire input into a buffer, then you'll have to take an initial guess, and allocate more memory if your guess is insufficient.</p>\n\n<ul>\n<li>In C++ you can just use <code>std::vector</code> (or <code>std::deque</code> if the data need not be contiguous in memory) to automatically expand the buffer as needed.</li>\n<li><p>In C you'll have to <code>malloc</code> first, then <code>realloc</code> inside your read loop when you run out of space in what you've already allocated.</p>\n\n<p>I suggest mimicking the behaviour of <code>std::vector</code> by making your buffer expand exponentially (multiplying by a factor of something like 1.5 or 2 each time), to help reduce the number of times you need to do this. So, say you first allocate 1,024 bytes. When that runs out, allocate 2,048. When that runs out, allocate 4,096. And so forth.</p>\n\n<p>Only you can decide what a good starting size is, based on your use case and expected nominal inputs.</p></li>\n</ul>\n"}], "owner": {"reputation": 1201, "user_id": 1616329, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/5a660ddaee099d2d3021c01ad5b4c729?s=128&d=identicon&r=PG", "display_name": "lockdoc", "link": "https://stackoverflow.com/users/1616329/lockdoc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1532, "favorite_count": 0, "accepted_answer_id": 36448594, "answer_count": 1, "score": 0, "last_activity_date": 1503324938, "creation_date": 1459938751, "last_edit_date": 1459939246, "question_id": 36448480, "link": "https://stackoverflow.com/questions/36448480/fread-how-to-know-the-size-of-the-buffer", "title": "fread: How to know the size of the buffer?", "body": "<p>In C, when I am reading a file, or some other input, all at once with <code>fread</code> how would I know what size to declare the buffer with?</p>\n\n<pre><code>char buffer[1024];\nfp = popen(\"ls /\", \"r\");\nfread(buffer, 1, sizeof(buffer), fp);\n</code></pre>\n\n<p>The input data could have 1000 lines or 1 line, or even 100000 lines or more.</p>\n\n<p>Is there any general rule for it?</p>\n"}, {"tags": ["c", "struct"], "comments": [{"owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "edited": false, "score": 2, "creation_date": 1459938626, "post_id": 36448408, "comment_id": 60509649, "body": "There is this padding associated with the structs and there are many answers on SO . Please find the right one :) <a href=\"http://stackoverflow.com/questions/1841863/size-of-a-structure-in-c\">sizeof struct</a>"}, {"owner": {"reputation": 13369, "user_id": 1579327, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2672419fe5e9e6d5ce4d03c2e7aae7a2?s=128&d=identicon&r=PG", "display_name": "Paolo", "link": "https://stackoverflow.com/users/1579327/paolo"}, "edited": false, "score": 1, "creation_date": 1459938796, "post_id": 36448408, "comment_id": 60509787, "body": "<a href=\"http://www.catb.org/esr/structure-packing/\" rel=\"nofollow noreferrer\">catb.org/esr/structure-packing</a>"}, {"owner": {"reputation": 2244, "user_id": 5520680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C1jQH.png?s=128&g=1", "display_name": "Tom&#39;s", "link": "https://stackoverflow.com/users/5520680/toms"}, "edited": false, "score": 0, "creation_date": 1459941842, "post_id": 36448408, "comment_id": 60511956, "body": "you can force the number of bit for a designated field in a structure by adding :number after the declaration of the field. (like uint16_t name:16;). Be warry that broke any optimisation made by the padding ... I can&#39;t really explain what I want because english is not my motherlanguage, so feel free to correct me."}, {"owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "edited": false, "score": 1, "creation_date": 1459942820, "post_id": 36448408, "comment_id": 60512718, "body": "Move the <code>uint32_t ttl</code> to be the first field and there will be no padding."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1459944658, "post_id": 36448408, "comment_id": 60514103, "body": "<code>uint32_t</code> requires 4-byte alignment on your platform; and 2 bytes need to be added at the end of the structure to ensure that successive elements in an array have the <code>uint32_t</code> member aligned at 4 bytes as well."}], "owner": {"reputation": 311, "user_id": 2030998, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/84080a7f0e855ba320bae612ac2bf907?s=128&d=identicon&r=PG", "display_name": "mazkopolo", "link": "https://stackoverflow.com/users/2030998/mazkopolo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 184, "favorite_count": 0, "closed_date": 1459938730, "answer_count": 0, "score": 0, "last_activity_date": 1459938581, "creation_date": 1459938581, "question_id": 36448408, "link": "https://stackoverflow.com/questions/36448408/wrong-sizeof-structure", "closed_reason": "Duplicate", "title": "Wrong sizeof structure", "body": "<p>I am trying to understand why I am getting wrong sizeof for the below structure. My desired answer should be 12 but I am getting 16. Can you please explain what I am doing wrong?</p>\n\n<pre><code>struct dns_answer_section\n{\n    uint16_t name;\n    uint16_t type;\n    uint16_t class;\n    uint32_t ttl;\n    uint16_t data_len;\n};\n</code></pre>\n"}, {"tags": ["c", "arrays", "algorithm", "data-structures"], "comments": [{"owner": {"reputation": 117, "user_id": 3600483, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ca4756df9fca1eb7af8e2bfe086b7109?s=128&d=identicon&r=PG&f=1", "display_name": "user3600483", "link": "https://stackoverflow.com/users/3600483/user3600483"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1459939478, "post_id": 36448293, "comment_id": 60510260, "body": "Distinct in the sense that they are unique,  for example A[8 3 2 4 12] and B[6 11 1 5 9]. All elements are integers less than 10000000 and the elements need not be consecutive."}, {"owner": {"reputation": 117, "user_id": 3600483, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ca4756df9fca1eb7af8e2bfe086b7109?s=128&d=identicon&r=PG&f=1", "display_name": "user3600483", "link": "https://stackoverflow.com/users/3600483/user3600483"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1459939858, "post_id": 36448293, "comment_id": 60510520, "body": "It was just an example. We need to solve for a general case of unsorted arrays. I have updated the comment to avoid any confusion."}], "answers": [{"comments": [{"owner": {"reputation": 117, "user_id": 3600483, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ca4756df9fca1eb7af8e2bfe086b7109?s=128&d=identicon&r=PG&f=1", "display_name": "user3600483", "link": "https://stackoverflow.com/users/3600483/user3600483"}, "edited": false, "score": 0, "creation_date": 1459939962, "post_id": 36448812, "comment_id": 60510602, "body": "I know this method but I need a better complexity"}, {"owner": {"reputation": 861, "user_id": 4964549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a367b7c2d563504d7287ee0acddcbc4?s=128&d=identicon&r=PG&f=1", "display_name": "gen-y-s", "link": "https://stackoverflow.com/users/4964549/gen-y-s"}, "reply_to_user": {"reputation": 117, "user_id": 3600483, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ca4756df9fca1eb7af8e2bfe086b7109?s=128&d=identicon&r=PG&f=1", "display_name": "user3600483", "link": "https://stackoverflow.com/users/3600483/user3600483"}, "edited": false, "score": 2, "creation_date": 1459940140, "post_id": 36448812, "comment_id": 60510714, "body": "There is no better complexity than O(N) for finding the Kth item in unsorted list."}], "tags": [], "owner": {"reputation": 861, "user_id": 4964549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a367b7c2d563504d7287ee0acddcbc4?s=128&d=identicon&r=PG&f=1", "display_name": "gen-y-s", "link": "https://stackoverflow.com/users/4964549/gen-y-s"}, "is_accepted": true, "score": 2, "last_activity_date": 1459939627, "creation_date": 1459939627, "answer_id": 36448812, "question_id": 36448293, "link": "https://stackoverflow.com/questions/36448293/kth-ranked-element-among-2-unsorted-arrays/36448812#36448812", "title": "Kth Ranked Element Among 2 Unsorted Arrays", "body": "<p>You can use the <a href=\"https://en.wikipedia.org/wiki/Selection_algorithm\" rel=\"nofollow\">selection algorithm</a> to find the Kth item, in O(N) time, where N is the sum of the sizes of the arrays. Obviously, you treat the two arrays as a single large array.</p>\n"}, {"tags": [], "owner": {"reputation": 3717, "user_id": 1215996, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/7ff628cd135c5f60ce0dfda4b40ac06e?s=128&d=identicon&r=PG", "display_name": "Sumit Trehan", "link": "https://stackoverflow.com/users/1215996/sumit-trehan"}, "is_accepted": false, "score": 2, "last_activity_date": 1459945017, "last_edit_date": 1459945017, "creation_date": 1459944352, "answer_id": 36450635, "question_id": 36448293, "link": "https://stackoverflow.com/questions/36448293/kth-ranked-element-among-2-unsorted-arrays/36450635#36450635", "title": "Kth Ranked Element Among 2 Unsorted Arrays", "body": "<p>Union of arrays can be done in linear time. I am skipping that part.</p>\n\n<p>You can use the <code>partition</code>() algorithm which is used in the <code>quick sort</code>. In quick sort, the function will have to recurse two branches. However here we will just conditionally invoke the recursive call and thus only 1-branched recursion.</p>\n\n<p><strong>Main concept</strong>: <code>partition</code>() will place the chosen <code>PIVOT</code> element at its appropriate sorted position. Hence we can use this property to select that half of the array in which we are interested and just recurse on that half. This will prevent us from sorting the entire array.</p>\n\n<p>I have written the below code based on the above concept. Assumption rank = 0 implies the smallest element in the array.</p>\n\n<pre><code>void swap (int *a, int *b)\n{\n    int tmp = *a;\n    *a = *b;\n    *b = tmp;\n}\n\nint partition (int a[], int start, int end)\n{\n    /* choose a fixed pivot for now */\n    int pivot = a[end];\n    int i = start, j;\n\n    for (j = start; j &lt;= end-1; j++) {\n        if (a[j] &lt; pivot) {\n            swap (&amp;a[i], &amp;a[j]);\n            i++;\n        }\n    } \n    /* Now swap the ith element with the pivot */\n    swap (&amp;a[i], &amp;a[end]);\n    return i;\n}\n\nint find_k_rank (int a[], int start, int end, int k)\n{\n    int x = partition (a, start, end);\n    if (x == k) {\n        return a[x];\n    } else if (k &lt; x) {\n        return  find_k_rank (a, start, x-1, k);\n    } else {\n        return find_k_rank (a, x+1, end, k);\n    }\n}\n\nint main()\n{\n    int a[] = {10,2,7,4,8,3,1,5,9,6};\n    int N = 10;\n    int rank = 3;\n    printf (\"%d\\n\", find_k_rank (a, 0, N-1, rank));\n}\n</code></pre>\n"}], "owner": {"reputation": 117, "user_id": 3600483, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ca4756df9fca1eb7af8e2bfe086b7109?s=128&d=identicon&r=PG&f=1", "display_name": "user3600483", "link": "https://stackoverflow.com/users/3600483/user3600483"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 153, "favorite_count": 2, "accepted_answer_id": 36448812, "answer_count": 2, "score": 2, "last_activity_date": 1459945017, "creation_date": 1459938292, "last_edit_date": 1459938733, "question_id": 36448293, "link": "https://stackoverflow.com/questions/36448293/kth-ranked-element-among-2-unsorted-arrays", "title": "Kth Ranked Element Among 2 Unsorted Arrays", "body": "<p>Let us suppose we have two arrays A[] and B[]. Each array contains n distinct integers which are not sorted. We need to find kth ranked element in the union of the 2 arrays in the most efficient way possible.\n(Please dont post answers about merging the arrays and then sorting them to return kth index in the merged array)</p>\n"}, {"tags": ["c", "while-loop"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1459937976, "post_id": 36448149, "comment_id": 60509225, "body": "<code>%</code> is the modulus (remainder) operator."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 2, "creation_date": 1459938488, "post_id": 36448149, "comment_id": 60509534, "body": "Me neither, since your code snippet has no context,"}], "answers": [{"tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 3, "last_activity_date": 1459938086, "creation_date": 1459938086, "answer_id": 36448207, "question_id": 36448149, "link": "https://stackoverflow.com/questions/36448149/while-in-c-with-log-not/36448207#36448207", "title": "While in C (with log Not)", "body": "<p><code>while (!(a % b))</code> is equivalent to  </p>\n\n<pre><code>while ((a % b) == 0)    \n</code></pre>\n\n<p>Which means <em>if <code>a</code> is a multiple of <code>b</code> then execute the body else come out of the loop</em>. </p>\n"}, {"tags": [], "owner": {"reputation": 1824, "user_id": 4792869, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ybD0C.png?s=128&g=1", "display_name": "Breeze", "link": "https://stackoverflow.com/users/4792869/breeze"}, "is_accepted": true, "score": 0, "last_activity_date": 1459939192, "last_edit_date": 1459939192, "creation_date": 1459938717, "answer_id": 36448467, "question_id": 36448149, "link": "https://stackoverflow.com/questions/36448149/while-in-c-with-log-not/36448467#36448467", "title": "While in C (with log Not)", "body": "<p><code>a % b</code> returns the remainder of <code>a</code> divided by <code>b</code> (e.g. 5 % 2 returns 1, 4 % 2 returns 0)<br>\nIntegers are converted to true if not equal to 0<br>\n--> (!(a % b)) is true while <code>a</code> is not a multiple of <code>b</code>.</p>\n"}], "owner": {"reputation": 23, "user_id": 6166048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fd2d9f3481b586036cacc65c450c75e?s=128&d=identicon&r=PG&f=1", "display_name": "Peter M.", "link": "https://stackoverflow.com/users/6166048/peter-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "closed_date": 1459952418, "accepted_answer_id": 36448467, "answer_count": 2, "score": 0, "last_activity_date": 1459939192, "creation_date": 1459937932, "question_id": 36448149, "link": "https://stackoverflow.com/questions/36448149/while-in-c-with-log-not", "closed_reason": "Needs details or clarity", "title": "While in C (with log Not)", "body": "<p>can you please help me to understand this while loop:</p>\n\n<pre><code>while (!(a % b))        \n  {\n   a = a / b;               \n   higher = b; \n  }\n</code></pre>\n\n<p>I dont get the point with the (!(a % b)</p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1459939664, "post_id": 36447868, "comment_id": 60510387, "body": "&quot;Generic pointer&quot; is no formal term."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1459949219, "post_id": 36447868, "comment_id": 60517836, "body": "What is the difference between an automobile and a car?"}], "answers": [{"tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 7, "last_activity_date": 1459937190, "creation_date": 1459937190, "answer_id": 36447898, "question_id": 36447868, "link": "https://stackoverflow.com/questions/36447868/whats-the-difference-between-generic-pointer-and-void-pointer/36447898#36447898", "title": "What&#39;s the difference between generic pointer and void pointer?", "body": "<p>No difference. <code>void</code> pointer is itself called <em>generic pointer</em>.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 4566187, "user_type": "registered", "profile_image": "https://graph.facebook.com/749409511839630/picture?type=large", "display_name": "M Aoun", "link": "https://stackoverflow.com/users/4566187/m-aoun"}, "is_accepted": false, "score": 0, "last_activity_date": 1459940248, "creation_date": 1459940248, "answer_id": 36449068, "question_id": 36447868, "link": "https://stackoverflow.com/questions/36447868/whats-the-difference-between-generic-pointer-and-void-pointer/36449068#36449068", "title": "What&#39;s the difference between generic pointer and void pointer?", "body": "<p>If you declare a pointer to void it's called Generic Pointer since you have to cast it to another kind of pointer first. Check the dictionary definition of generic. Both are the same, but this is just a 'description' of 'void pointer'.</p>\n\n<p>This might seem useless but it has a very important use: you can use it multiple times to point at data of different types (int char etc..)</p>\n"}], "owner": {"reputation": 45, "user_id": 6028295, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-jzqBGDrgjEs/AAAAAAAAAAI/AAAAAAAAEY0/A7dduIoBlIg/photo.jpg?sz=128", "display_name": "harshit batra", "link": "https://stackoverflow.com/users/6028295/harshit-batra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1082, "favorite_count": 0, "closed_date": 1459943399, "answer_count": 2, "score": -5, "last_activity_date": 1459940248, "creation_date": 1459937111, "last_edit_date": 1459937374, "question_id": 36447868, "link": "https://stackoverflow.com/questions/36447868/whats-the-difference-between-generic-pointer-and-void-pointer", "closed_reason": "Needs details or clarity", "title": "What&#39;s the difference between generic pointer and void pointer?", "body": "<p>What's the difference between generic pointer and <code>void</code> pointer?  </p>\n\n<pre><code>void* gp;   \n</code></pre>\n"}, {"tags": ["python", "c", "numpy", "cython"], "answers": [{"comments": [{"owner": {"reputation": 291, "user_id": 4810809, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6bf18f316c8dc647fe5d7caf865da67e?s=128&d=identicon&r=PG&f=1", "display_name": "Alvin", "link": "https://stackoverflow.com/users/4810809/alvin"}, "edited": false, "score": 0, "creation_date": 1459945988, "post_id": 36449335, "comment_id": 60515148, "body": "Thanks for the note! The first point is pretty cool, and I agree with it. For the signal.fftconvolve, I try it in my cython or python codes, and it hardly can speed up (for some reason it slow down) and the inner product seems to be the simplest solution as we are doing many times inner product operations on a rolling window. Do you think is there any better way speed up inner product in cython? Thanks"}, {"owner": {"reputation": 83262, "user_id": 772649, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/03ad01df45fef92e267641197ad00e36?s=128&d=identicon&r=PG", "display_name": "HYRY", "link": "https://stackoverflow.com/users/772649/hyry"}, "reply_to_user": {"reputation": 291, "user_id": 4810809, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6bf18f316c8dc647fe5d7caf865da67e?s=128&d=identicon&r=PG&f=1", "display_name": "Alvin", "link": "https://stackoverflow.com/users/4810809/alvin"}, "edited": false, "score": 0, "creation_date": 1459946292, "post_id": 36449335, "comment_id": 60515407, "body": "my sample code for <code>signal.fftconvolve()</code> returns the same result as the <code>cython_sample()</code> function. You don&#39;t need to call it in Cython. There is no inner loop if you use fft method."}, {"owner": {"reputation": 291, "user_id": 4810809, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6bf18f316c8dc647fe5d7caf865da67e?s=128&d=identicon&r=PG&f=1", "display_name": "Alvin", "link": "https://stackoverflow.com/users/4810809/alvin"}, "edited": false, "score": 0, "creation_date": 1459948003, "post_id": 36449335, "comment_id": 60516868, "body": "Yea, I got it! Brilliant solution, it is really fast, even 17 times faster than using <b><i>cdef extern from &quot;cblas.h&quot;:  double ddot &quot;cblas_ddot&quot;(int, double *, int, double *, int)</i></b> as indicated in <a href=\"http://maldun.lima-city.de/introduction_to_python/Cython.html\" rel=\"nofollow noreferrer\">maldun.lima-city.de/introduction_to_python/Cython.html</a>. Your way is a pretty cool idea!"}], "tags": [], "owner": {"reputation": 83262, "user_id": 772649, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/03ad01df45fef92e267641197ad00e36?s=128&d=identicon&r=PG", "display_name": "HYRY", "link": "https://stackoverflow.com/users/772649/hyry"}, "is_accepted": true, "score": 3, "last_activity_date": 1459942255, "last_edit_date": 1459942255, "creation_date": 1459940865, "answer_id": 36449335, "question_id": 36447822, "link": "https://stackoverflow.com/questions/36447822/why-assign-values-to-c-contiguous-array-is-slow-in-my-case-using-cython/36449335#36449335", "title": "Why assign values to C-contiguous array is slow in my case using Cython", "body": "<p>If you do't use the value of <code>dot_result</code>, the compiler will remove the loop:</p>\n\n<pre><code>dot_result = 0.0\nfor jj in range(sample_size):\n    dot_result += tmp_sample[jj]*weight_array[jj]\n</code></pre>\n\n<p>The inner loop costs most of the time.</p>\n\n<p>You cython code seem like <code>correlate()</code>, you can speed it up by using fft:</p>\n\n<pre><code>from scipy import signal\nres = signal.fftconvolve(c_contig_store_array, c_contig_weigh_array[::-1], mode=\"valid\")\n</code></pre>\n"}], "owner": {"reputation": 291, "user_id": 4810809, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6bf18f316c8dc647fe5d7caf865da67e?s=128&d=identicon&r=PG&f=1", "display_name": "Alvin", "link": "https://stackoverflow.com/users/4810809/alvin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 330, "favorite_count": 2, "accepted_answer_id": 36449335, "answer_count": 1, "score": 1, "last_activity_date": 1459942255, "creation_date": 1459936996, "last_edit_date": 1459940090, "question_id": 36447822, "link": "https://stackoverflow.com/questions/36447822/why-assign-values-to-c-contiguous-array-is-slow-in-my-case-using-cython", "title": "Why assign values to C-contiguous array is slow in my case using Cython", "body": "<p>I got a problem of assigning temporary results to an array using Cython. Here I declare a <code>test_array</code>, <code>sample-size</code> and <code>weight_array</code>, and by using <code>for</code> loop, I save each weighted result into a <code>res_array</code>. Both <code>test_array</code> and <code>weight_array</code> are defined as C-contiguous arrays in Cython. The test.pyx and setup.py files are listed as follows:</p>\n\n<pre><code># test.pyx\nimport numpy as np\ncimport numpy as np\nimport random\ncimport cython\nfrom cython cimport boundscheck, wraparound\n\n\n@cython.boundscheck(False)\n@cython.wraparound(False)\n@cython.nonecheck(False)\n@cython.cdivision(True)\n@cython.profile(True)\ndef cython_sample(int res_size, int sample_size, double[::1] all_data, double[::1] weight_array):\n    # using c-contiguous array can speed up a little bit\n    cdef int ii, jj\n    cdef double tmp_res, dot_result\n    cdef double[::1] tmp_sample = np.ones(sample_size, dtype=np.double)\n    cdef double[::1] res_array = np.ones(res_size, dtype=np.double)\n\n    ran = random.normalvariate   # generate random value as a test\n    for ii in range(res_size):\n        tmp_sample = all_data[ii:(ii + sample_size)]\n\n        # inner product operation\n        dot_result = 0.0\n        for jj in range(sample_size):\n            dot_result += tmp_sample[jj]*weight_array[jj]\n\n        # save inner product result into array \n        res_array[ii] = dot_result\n        #res_array[ii] = ran(10000,20000)\n\n     return res_array\n\n# setup.py\nfrom setuptools import setup,find_packages\nfrom distutils.extension import Extension\nfrom Cython.Build import cythonize\nimport numpy as np\n\next = Extension(\"mycython.test\", sources=[\"mycython/test.pyx\"])\nsetup(ext_modules=cythonize(ext),\n      include_dirs=[np.get_include()],\n      name=\"mycython\",     \n      version=\"0.1\",\n      packages=find_packages(),\n      author=\"me\",\n      author_email=\"me@example.com\",\n      url=\"http://example.com/\")   \n</code></pre>\n\n<p>And the python test.py is: </p>\n\n<pre><code>import time\nimport random\nimport numpy as np\nfrom strategy1 import __cyn__\n\nsample_size = 3000\ntest_array = [random.random() for _ in range(300000)]\nres_size = len(test_array) - sample_size + 1\nweight_array = [random.random() for _ in range(sample_size)]\nc_contig_store_array = np.ascontiguousarray(test_array, dtype=np.double)\nc_contig_weigh_array = np.ascontiguousarray(weight_array, dtype=np.double)\n\n\nreplay = 100\nstart_time = time.time()\nfor ii in range(int(replay)):\n    __cyn__.cython_sample(res_size, sample_size, c_contig_store_array, c_contig_weigh_array)\nper_elapsed_time = (time.time() - start_time) / replay\nprint('Elapse time :: %g sec' % (per_elapsed_time))\n</code></pre>\n\n<p>So I test two scenarios: </p>\n\n<pre><code># 1. when saving dot_result into 'res_array':\n     res_array[ii] = dot_result\n</code></pre>\n\n<p>speed test shows: <code>Elapse time :: 0.821084 sec</code></p>\n\n<pre><code># 2. when saving a random value ran(10000,20000) into 'res_array':\n     res_array[ii] = ran(10000,20000)\n</code></pre>\n\n<p>speed test shows: <code>Elapse time :: 0.214591 sec</code>. </p>\n\n<p>The reason that I use  <code>ran(*,*)</code> to test the codes is that I found if I comment out both <code>res_array[ii] = dot_result</code> and <code>res_array[ii] = ran(10000,20000)</code> in the original codes, the speed will almost increase 30-100 times (<code>Elapse time :: 0.00633394 sec</code>). Then I thought the issue could lie in assigning <code>dot_result</code> value to <code>res_array</code>, which turn to be true as the speed of assigning a random generated double value <code>ran(10000,20000)</code> to <code>res_array</code> is pretty fast (almost 4 times faster as shown above). </p>\n\n<p>Is there any way to solve this problem? Thanks</p>\n"}, {"tags": ["c", "static", "global-variables", "global"], "comments": [{"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 2, "creation_date": 1459935828, "post_id": 36447170, "comment_id": 60507518, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/572547/what-does-static-mean-in-a-c-program\">What does &quot;static&quot; mean in a C program?</a>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 0, "creation_date": 1459935942, "post_id": 36447170, "comment_id": 60507608, "body": "@ameyCU That&#39;s not what this question is about."}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1459936126, "post_id": 36447170, "comment_id": 60507750, "body": "@Lundin I think answer for that question answer these ."}, {"owner": {"reputation": 191, "user_id": 5703503, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/b023efc85baa1716b81233447654df72?s=128&d=identicon&r=PG&f=1", "display_name": "xy36", "link": "https://stackoverflow.com/users/5703503/xy36"}, "edited": false, "score": 0, "creation_date": 1459936144, "post_id": 36447170, "comment_id": 60507768, "body": "Iam just interested when I should use method(1) and when (2) and why ;)?"}, {"owner": {"reputation": 734, "user_id": 4854929, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6wiFm.jpg?s=128&g=1", "display_name": "Darko Djuric", "link": "https://stackoverflow.com/users/4854929/darko-djuric"}, "edited": false, "score": 0, "creation_date": 1459936160, "post_id": 36447170, "comment_id": 60507773, "body": "If you declare it in function it will available in function scope, otherwise it will available in file scope... sometimes you don&#39;t need or want it in file scope..."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1459936200, "post_id": 36447170, "comment_id": 60507811, "body": "The only difference is that with method (1) <code>testVar</code>can only be accessed from within <code>func</code>, whereas with method (2) it can be accessed from within  the whole compilation unit."}, {"owner": {"reputation": 191, "user_id": 5703503, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/b023efc85baa1716b81233447654df72?s=128&d=identicon&r=PG&f=1", "display_name": "xy36", "link": "https://stackoverflow.com/users/5703503/xy36"}, "edited": false, "score": 0, "creation_date": 1459936296, "post_id": 36447170, "comment_id": 60507877, "body": "So if the variable is only used in <code>func()</code> I should use (1)?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1459936704, "post_id": 36447170, "comment_id": 60508216, "body": "@xy36 yes, definitely"}, {"owner": {"reputation": 12178, "user_id": 1388292, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/mfJ7p.jpg?s=128&g=1", "display_name": "Jacques Gaudin", "link": "https://stackoverflow.com/users/1388292/jacques-gaudin"}, "edited": false, "score": 0, "creation_date": 1459938463, "post_id": 36447170, "comment_id": 60509522, "body": "See : <a href=\"http://stackoverflow.com/questions/30581675/what-actually-compiler-does-when-we-declare-static-variables\">enter link description here</a>"}], "answers": [{"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1459936428, "post_id": 36447530, "comment_id": 60507990, "body": "The proper definition of a global variable is a variable which is globally visible to the whole program. Thus a <code>static</code> variable can never be global. Don&#39;t mix up &quot;global&quot; with &quot;file scope&quot;, they are different terms."}, {"owner": {"reputation": 191, "user_id": 5703503, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/b023efc85baa1716b81233447654df72?s=128&d=identicon&r=PG&f=1", "display_name": "xy36", "link": "https://stackoverflow.com/users/5703503/xy36"}, "edited": false, "score": 0, "creation_date": 1459939666, "post_id": 36447530, "comment_id": 60510388, "body": "Thanks for the update, but this is not what I am asking for. The question was for a scenario, when i use the var in one function."}], "tags": [], "owner": {"reputation": 2947, "user_id": 6044312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ba69e6befe938aa251519363279b4da?s=128&d=identicon&r=PG&f=1", "display_name": "Grant Shannon", "link": "https://stackoverflow.com/users/6044312/grant-shannon"}, "is_accepted": false, "score": 2, "last_activity_date": 1459938231, "last_edit_date": 1495541753, "creation_date": 1459936270, "answer_id": 36447530, "question_id": 36447170, "link": "https://stackoverflow.com/questions/36447170/difference-between-static-global-variable-and-static-variable-inside-a-function/36447530#36447530", "title": "Difference between static global variable and static variable inside a function", "body": "<p>here is some adjusted code to show the differences between <em>where</em> the variables are defined:\n(from : <a href=\"https://stackoverflow.com/questions/572547/what-does-static-mean-in-a-c-program\">What does &quot;static&quot; mean?</a>)</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n//static int sa = 10;\n\nvoid func1()\n{\n    int a = 10;\n    static int sa = 10;\n\n    a += 5;\n    sa += 5;\n\n    printf(\"func 1: a = %d, sa = %d\\n\", a, sa);\n}\n\nvoid func2()\n{\n    int a = 10;\n    static int sa = 10;\n\n    a += 5;\n    sa += 5;\n\n    printf(\" func2 : a = %d, sa = %d\\n\", a, sa);\n}\n\n\nint main()\n{\n    int i,j;\n\n    for (i = 0; i &lt; 10; ++i){\n        func1();\n    }\n\n    for (j = 0; j &lt; 10; j++)\n    {\n        func2();\n    }\n}\n</code></pre>\n\n<blockquote>\n  <p>produces:</p>\n</blockquote>\n\n<pre><code>func 1: a = 15, sa = 15\nfunc 1: a = 15, sa = 20\nfunc 1: a = 15, sa = 25\nfunc 1: a = 15, sa = 30\nfunc 1: a = 15, sa = 35\nfunc 1: a = 15, sa = 40\nfunc 1: a = 15, sa = 45\nfunc 1: a = 15, sa = 50\nfunc 1: a = 15, sa = 55\nfunc 1: a = 15, sa = 60\n func2 : a = 15, sa = 15\n func2 : a = 15, sa = 20\n func2 : a = 15, sa = 25\n func2 : a = 15, sa = 30\n func2 : a = 15, sa = 35\n func2 : a = 15, sa = 40\n func2 : a = 15, sa = 45\n func2 : a = 15, sa = 50\n func2 : a = 15, sa = 55\n func2 : a = 15, sa = 60\n</code></pre>\n\n<blockquote>\n  <p>while</p>\n</blockquote>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nstatic int sa = 10;\n\nvoid func1()\n{\n    int a = 10;\n//  static int sa = 10;\n\n    a += 5;\n    sa += 5;\n\n    printf(\"func 1: a = %d, sa = %d\\n\", a, sa);\n}\n\nvoid func2()\n{\n    int a = 10;\n    //static int sa = 10;\n\n    a += 5;\n    sa += 5;\n\n    printf(\" func2 : a = %d, sa = %d\\n\", a, sa);\n}\n</code></pre>\n\n<blockquote>\n  <p>produces</p>\n</blockquote>\n\n<pre><code>func 1: a = 15, sa = 15\nfunc 1: a = 15, sa = 20\nfunc 1: a = 15, sa = 25\nfunc 1: a = 15, sa = 30\nfunc 1: a = 15, sa = 35\nfunc 1: a = 15, sa = 40\nfunc 1: a = 15, sa = 45\nfunc 1: a = 15, sa = 50\nfunc 1: a = 15, sa = 55\nfunc 1: a = 15, sa = 60\n func2 : a = 15, sa = 65\n func2 : a = 15, sa = 70\n func2 : a = 15, sa = 75\n func2 : a = 15, sa = 80\n func2 : a = 15, sa = 85\n func2 : a = 15, sa = 90\n func2 : a = 15, sa = 95\n func2 : a = 15, sa = 100\n func2 : a = 15, sa = 105\n func2 : a = 15, sa = 110\n</code></pre>\n\n<p>summary comments (from the original reference):\n<a href=\"https://stackoverflow.com/questions/572547/what-does-static-mean-in-a-c-program\">What does &quot;static&quot; mean?</a></p>\n\n<ul>\n<li><p>Static defined local variables do not lose their value between\nfunction calls. In other words they are global variables, but scoped\nto the local function they are defined in.</p></li>\n<li><p>Static global variables are not visible outside of the C file they<br>\nare defined in.</p></li>\n<li><p>Static functions are not visible outside of the C file they are<br>\ndefined in.</p></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 4, "last_activity_date": 1459936287, "creation_date": 1459936287, "answer_id": 36447538, "question_id": 36447170, "link": "https://stackoverflow.com/questions/36447170/difference-between-static-global-variable-and-static-variable-inside-a-function/36447538#36447538", "title": "Difference between static global variable and static variable inside a function", "body": "<p>The only difference is that when the variable is declared inside the function, it has local scope only to that function. To reduce the scope of a variable as much as possible is always good practice, so if this is possible, you should do so.</p>\n\n<p>Though sometimes when implementing <a href=\"https://en.wikipedia.org/wiki/Abstract_data_type\" rel=\"nofollow\">ADTs</a> and similar modules, you want a local variable to be accessible by several functions. In that case you declare it at file scope.</p>\n\n<p>In some cases, placing variables at file scope is bad programming practice, since it makes the code harder to read and maintain. It is the same problem as why global variables are considered bad, even though a static file scope variable is not global (it is not visible by the whole program).</p>\n\n<p>In other cases, most notably embedded systems, where there is only one instance of the \"class\" you are writing (singleton), then using file scope static variables is common practice, as a poor man's way to do private encapsulation.</p>\n"}], "owner": {"reputation": 191, "user_id": 5703503, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/b023efc85baa1716b81233447654df72?s=128&d=identicon&r=PG&f=1", "display_name": "xy36", "link": "https://stackoverflow.com/users/5703503/xy36"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 731, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1536216024, "creation_date": 1459935445, "last_edit_date": 1536216024, "question_id": 36447170, "link": "https://stackoverflow.com/questions/36447170/difference-between-static-global-variable-and-static-variable-inside-a-function", "title": "Difference between static global variable and static variable inside a function", "body": "<p>Lets say I have a function <code>void func()</code> and I use the variable <code>testVar</code> inside of this function. Additionally I need that the variable persists after leaving the function. Usually I would do it by using a static variable inside of the function(1). But what are the differences, when I would use a global variable instead(2)?</p>\n\n<pre><code>static int testVar = 0; //global variable instead(2)\n\nvoid func()\n{\n    static int testVar = 0; //static variable inside of the function(1)\n\n    if(testVar++){\n        //do something\n    }   \n}\n</code></pre>\n\n<p>What does the compiler do in both cases in detail? Is there a scenario where I should use method(2) provided the variable is only needed in <code>func()</code>?</p>\n"}, {"tags": ["c", "linux", "gcc", "gdb"], "comments": [{"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1459936524, "post_id": 36447086, "comment_id": 60508065, "body": "It&#39;s not very clear why you consider this to be a problem, you&#39;re asking the debugger to single-step and somehow expecting it not to? Also, <code>printf()</code> is not a &quot;system call&quot;, it&#39;s a call into the standard library."}, {"owner": {"reputation": 21, "user_id": 6159551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7b8f22d052f13c6397bfcd75c93ce7d?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/6159551/michael"}, "reply_to_user": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1459937018, "post_id": 36447086, "comment_id": 60508488, "body": "yes that&#39;s what i mean,I don&#39;t want it to step into standard library functions.What to do\uff1fthanks~"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1459938700, "post_id": 36447086, "comment_id": 60509713, "body": "WOW!  It seems that gdb cannot step over function calls?  That would be incredibly lame:("}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1459939248, "post_id": 36447086, "comment_id": 60510108, "body": "Someone tell me it&#39;s not true:("}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "reply_to_user": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1459939471, "post_id": 36447086, "comment_id": 60510254, "body": "@unwind &#39;It&#39;s not very clear why you consider this to be a problem&#39; - you joketh, surely?  Step in and step over are core functonalities for a debugger!"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1459940295, "post_id": 36447086, "comment_id": 60510838, "body": "OK &#39;next&#39; does it,  Relief...."}, {"owner": {"reputation": 21, "user_id": 6159551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7b8f22d052f13c6397bfcd75c93ce7d?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/6159551/michael"}, "edited": false, "score": 0, "creation_date": 1459942218, "post_id": 36447086, "comment_id": 60512254, "body": "before I update the OS,in GDB input &#39;s&#39; means step into,but won&#39;t step into the standard library.In the new GDB,input &#39;s&#39; can step into standard library functions which I don&#39;t want to,I just want to step into the user defined functions.So now when encounter standard library functions I must change &#39;s&#39; to &#39;n&#39; and then change back to &#39;s&#39;,which bothers me."}, {"owner": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 0, "creation_date": 1459967809, "post_id": 36447086, "comment_id": 60531193, "body": "What version of Ubuntu?"}], "owner": {"reputation": 21, "user_id": 6159551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7b8f22d052f13c6397bfcd75c93ce7d?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/6159551/michael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "closed_date": 1459937760, "answer_count": 0, "score": 0, "last_activity_date": 1459936486, "creation_date": 1459935212, "last_edit_date": 1459936486, "question_id": 36447086, "link": "https://stackoverflow.com/questions/36447086/how-to-stop-gdb-stepping-in-to-system-calls", "closed_reason": "Duplicate", "title": "How to stop GDB stepping in to system calls?", "body": "<p>I've updated Ubuntu to newest version. But when I use GDB to debug program found that when input <kbd>s</kbd> all the way, GDB will step into the implementation of system calls, <code>printf()</code>, for example. So what to do to prevent GDB stepping into system calls when I input <kbd>s</kbd>?</p>\n"}, {"tags": ["c", "pthreads"], "comments": [{"owner": {"reputation": 861, "user_id": 3347983, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/8243b37287e4b3ba0643c419e847acc2?s=128&d=identicon&r=PG&f=1", "display_name": "\u4eca\u5929\u6625\u5929", "link": "https://stackoverflow.com/users/3347983/%e4%bb%8a%e5%a4%a9%e6%98%a5%e5%a4%a9"}, "edited": false, "score": 4, "creation_date": 1459935080, "post_id": 36446928, "comment_id": 60506951, "body": "This is not possible. Every function which can be used in a thread must have the signature: void* thread_func (void* arg). I suggest you use a struct instead which contains your two arguments payload and the callback."}], "answers": [{"comments": [{"owner": {"reputation": 406, "user_id": 4029250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4a1142f185334c43f0b8821ddd38c7a?s=128&d=identicon&r=PG&f=1", "display_name": "klog", "link": "https://stackoverflow.com/users/4029250/klog"}, "edited": false, "score": 1, "creation_date": 1459946297, "post_id": 36451227, "comment_id": 60515409, "body": "If for some reason you can&#39;t modify the sender function&#39;s signature, create a wrapper function that receives this struct as void* and cast to use with sender"}], "tags": [], "owner": {"reputation": 1036, "user_id": 1608932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mm5VC.jpg?s=128&g=1", "display_name": "Florin Petriuc", "link": "https://stackoverflow.com/users/1608932/florin-petriuc"}, "is_accepted": false, "score": 0, "last_activity_date": 1459946255, "last_edit_date": 1459946255, "creation_date": 1459945767, "answer_id": 36451227, "question_id": 36446928, "link": "https://stackoverflow.com/questions/36446928/c-pthread-arguments/36451227#36451227", "title": "C - pthread arguments", "body": "<p>You can just create a structure lets say:</p>\n\n<pre><code>struct thread_prm\n{\nchar *payload;\nvoid (*Callback)(char*) cb;\n}\n</code></pre>\n\n<p>And you just allocate a structure that looks like this and pass it to pthread_create as the last argument. Like this:</p>\n\n<pre><code>struct thread_prm *arg;\narg = malloc(sizeof(struct thread_prm));\n(assign arg members to something)\npthread_create(&amp;sender_id, NULL, &amp;sender, arg);\n</code></pre>\n\n<p>And you modify sender:</p>\n\n<pre><code>void* sender (void *arg)\n{\nstruct thread_prm *_arg = arg;\nchar* payload;\nvoid (*Callback)(char*) cb;\n\npayload = _arg-&gt;payload;\ncb = _arg-&gt;cb;\n...\n}\n</code></pre>\n"}], "owner": {"reputation": 147, "user_id": 5546535, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/fd407cf2e32cd102bccb492099b37e06?s=128&d=identicon&r=PG&f=1", "display_name": "picador", "link": "https://stackoverflow.com/users/5546535/picador"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 86, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1459946255, "creation_date": 1459934811, "question_id": 36446928, "link": "https://stackoverflow.com/questions/36446928/c-pthread-arguments", "title": "C - pthread arguments", "body": "<p>It is the first time that I am working with threads in C and I am getting problems passing function arguments. For some reasons I need to create this thread. \nI have a function that sends a messages to a server. The header of my function is:</p>\n\n<pre><code>void* sender (char* payload, void (*Callback)(char*))\n</code></pre>\n\n<p>Then on my main (simplified), I create the following thread: </p>\n\n<pre><code>main ()\n{\n    pthread_t sender_id;\n    int err_s;  \n\n    err_s = pthread_create (&amp;sender_id, NULL, &amp;sender, NULL);\n}\n</code></pre>\n\n<p>The problem is that my function sender has many arguments so I am getting this error:</p>\n\n<pre><code>note: expected 'void * (*)(void *)' but argument is of type 'void * (*)(char *, void (*)(char *))'\n</code></pre>\n\n<p>I would be gratefull if sombody could help me. </p>\n"}, {"tags": ["c", "switch-statement", "printf", "conditional", "strcmp"], "comments": [{"owner": {"reputation": 17910, "user_id": 3963067, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1e536542e9baa5c52499d61fb64f51d3?s=128&d=identicon&r=PG&f=1", "display_name": "gmoniava", "link": "https://stackoverflow.com/users/3963067/gmoniava"}, "edited": false, "score": 4, "creation_date": 1459935063, "post_id": 36446916, "comment_id": 60506937, "body": "I guess you need to show <a href=\"http://stackoverflow.com/help/mcve\">mcve</a>"}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 3, "creation_date": 1459935097, "post_id": 36446916, "comment_id": 60506962, "body": "First of all why using array of 1 pointer, just use the pointer . Basically they will do same task ."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1459935877, "post_id": 36446916, "comment_id": 60507550, "body": "Use <code>else-if</code> to improve performance. And add some error handling, what if the strings are not what you expect?"}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 1, "creation_date": 1459935894, "post_id": 36446916, "comment_id": 60507562, "body": "I had to add a lot of code around this to make it work but cannot replicate the problem you report. Make it a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1459936351, "post_id": 36446916, "comment_id": 60507927, "body": "Your debugger will gladly tell you <i>where</i> exactly the segfault happens."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1459936487, "post_id": 36446916, "comment_id": 60508036, "body": "I don&#39;t see anything really wrong in your code, the problem must be elsewhere in some code you didn&#39;t show. Are you sure the content of <code>playerChose[0]</code> is correct?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1459936653, "post_id": 36446916, "comment_id": 60508177, "body": "<i>&quot; (I have tested this to be the case)&quot;</i> : how did you test this ?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1459950609, "post_id": 36446916, "comment_id": 60518918, "body": "&quot;Assuming buf will be either WIN LOSE or DRAW&quot;` is wrong.   <code>printf(&quot;passed declarer comp\\n&quot;);</code> --&gt; <code>printf(&quot;passed declarer comp &#39;%s&#39; %d\\n&quot;, buf, choice); opp[1] = &quot;?&quot;;</code>"}], "owner": {"reputation": 1, "user_id": 5357524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db8583de1450ef92b6c460ecb7300b1e?s=128&d=identicon&r=PG&f=1", "display_name": "Tzheng", "link": "https://stackoverflow.com/users/5357524/tzheng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 246, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1459934785, "creation_date": 1459934785, "question_id": 36446916, "link": "https://stackoverflow.com/questions/36446916/strcmp-with-conditional-statement", "title": "strcmp with conditional statement", "body": "<p>Assuming buf will be either WIN LOSE or DRAW, (I have tested this to be the case), some of the if statements are not running at all. Only the first statement where buf is equal to WIN, the switch inside of the if statement will be reached. For the other two cases, where buf equals LOSE, or DRAW, the program does not enter the if statements, nor run the switch cases, and a segmentation fault happens. I can't seem to find the error. I am not good at comparing strings in C, if someone could please correct my mistake that would be great. Thank you.</p>\n\n<p><strong>A chunk of code from the program</strong></p>\n\n<pre><code>const char* opp[1];\n        printf(\"passed declarer comp\\n\");\n        if(strcmp(buf, \"WIN\")==0) {\n                printf(\"Entered win statement\\n\");\n                switch(choice) {\n                        case 1: opp[0]=\"Rock\"; break;\n                        case 2: opp[0]=\"Paper\"; break;\n                        case 3: opp[0]=\"Scissors\"; break;\n                }\n        }\n\n        if(strcmp(buf, \"LOSE\")==0) {\n                printf(\"Entered lose statement\\n\");\n                switch(choice) {\n                        case 1: opp[0]=\"Scissors\"; break;\n                        case 2: opp[0]=\"Rock\"; break;\n                        case 3: opp[0]=\"Paper\"; break;\n                }\n        }\n\n        if(strcmp(buf, \"DRAW\")==0) {\n                printf(\"Entered draw statement\\n\");\n                opp[0] = playerChose[0];\n        }\n\n        printf(\"passed logic\\n\");\n        printf(\"%s\\n\", buf);\n        printf(\"%s\\n\",opp[0]);\n        printf(\"The other player chose %s, you %s\\n\", opp[0], buf);\n</code></pre>\n"}, {"tags": ["c", "pointers", "memory"], "comments": [{"owner": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "edited": false, "score": 3, "creation_date": 1459934809, "post_id": 36446900, "comment_id": 60506752, "body": "To do this you need to send the size explicitly to the function. Do, <code>writeSomething(output, sizeof(output))</code>"}, {"owner": {"reputation": 189, "user_id": 4374228, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-zfPXtRPNgfg/AAAAAAAAAAI/AAAAAAAAABk/mmK2w_fFfIE/photo.jpg?sz=128", "display_name": "GShaik", "link": "https://stackoverflow.com/users/4374228/gshaik"}, "edited": false, "score": 0, "creation_date": 1459934843, "post_id": 36446900, "comment_id": 60506779, "body": "use <code>strlen(o)-1</code> instead of <code>sizeof(o)</code>"}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "reply_to_user": {"reputation": 189, "user_id": 4374228, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-zfPXtRPNgfg/AAAAAAAAAAI/AAAAAAAAABk/mmK2w_fFfIE/photo.jpg?sz=128", "display_name": "GShaik", "link": "https://stackoverflow.com/users/4374228/gshaik"}, "edited": false, "score": 2, "creation_date": 1459935223, "post_id": 36446900, "comment_id": 60507069, "body": "@AbdulGafoor I dont think that its necessary that it is a string. Maybe it wont be nul terminated ."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 1, "creation_date": 1459937326, "post_id": 36446900, "comment_id": 60508701, "body": "Global variables are auto-initialized to zero"}, {"owner": {"reputation": 4085, "user_id": 4185106, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/er5li.png?s=128&g=1", "display_name": "moffeltje", "link": "https://stackoverflow.com/users/4185106/moffeltje"}, "reply_to_user": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1459938022, "post_id": 36446900, "comment_id": 60509256, "body": "@CoolGuy you&#39;re right, but this is a minimal example of my problem. In my real code, <code>output</code> is first filled and then it sometimes has to be &#39;emptied&#39;."}], "answers": [{"comments": [{"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 2, "creation_date": 1459935351, "post_id": 36447095, "comment_id": 60507178, "body": "This is good, but <code>sizeof (char)</code> is always 1 so that part is pointless and just adds noise. Also the proper way to print values of type <code>size_t</code> is using <code>%zu</code>."}, {"owner": {"reputation": 4352, "user_id": 2483038, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/cdaf35803110c235e3122cb85c113131?s=128&d=identicon&r=PG&f=1", "display_name": "blazs", "link": "https://stackoverflow.com/users/2483038/blazs"}, "reply_to_user": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1459935409, "post_id": 36447095, "comment_id": 60507222, "body": "I know that <code>sizeof(char)==1</code> by the C99 standard, but I find it more &quot;correct&quot; to see that sizeof(char) there. It tells me that the programmer knows he&#39;s allocating the memory for <code>char</code>&#39;s."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1459938181, "post_id": 36447095, "comment_id": 60509339, "body": "Its not just C99 where <code>sizeof(char)</code> is one. In all the C standards, it is one."}, {"owner": {"reputation": 4352, "user_id": 2483038, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/cdaf35803110c235e3122cb85c113131?s=128&d=identicon&r=PG&f=1", "display_name": "blazs", "link": "https://stackoverflow.com/users/2483038/blazs"}, "edited": false, "score": 0, "creation_date": 1459938241, "post_id": 36447095, "comment_id": 60509372, "body": "I don&#39;t about pre-C99; I know that as of C99 it is 1. Thanks for noting."}], "tags": [], "owner": {"reputation": 4352, "user_id": 2483038, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/cdaf35803110c235e3122cb85c113131?s=128&d=identicon&r=PG&f=1", "display_name": "blazs", "link": "https://stackoverflow.com/users/2483038/blazs"}, "is_accepted": true, "score": 1, "last_activity_date": 1459935544, "last_edit_date": 1459935544, "creation_date": 1459935230, "answer_id": 36447095, "question_id": 36446900, "link": "https://stackoverflow.com/questions/36446900/how-to-use-sizeof-in-other-function-from-pointer/36447095#36447095", "title": "How to use sizeof in other function (from pointer)?", "body": "<p>The problem is that when passed as the argument to the function, the array decays into a pointer and information about its size gets lost.</p>\n\n<p>Redefine the function to</p>\n\n<pre><code>void writeSomething(char *o, size_t sz){\n    printf(\"sizeof(o)=%d\", sizeof(char) * sz);\n    //code\n    memset(o, 0, sizeof(char) * sz);\n    // code\n}\n</code></pre>\n\n<p>so that the call to it looks like <code>writeSomething(output, 1024*10);</code>.</p>\n\n<p>As pointed out in the comments, the C99 standard requires that <code>sizeof(char)</code> be <code>1</code>, so it's fine to omit the <code>sizeof(char)</code> in the code I provided. However, I prefer to leave it there for stylistic reasons.</p>\n"}], "owner": {"reputation": 4085, "user_id": 4185106, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/er5li.png?s=128&g=1", "display_name": "moffeltje", "link": "https://stackoverflow.com/users/4185106/moffeltje"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 449, "favorite_count": 0, "closed_date": 1459935428, "accepted_answer_id": 36447095, "answer_count": 1, "score": 0, "last_activity_date": 1459935544, "creation_date": 1459934752, "question_id": 36446900, "link": "https://stackoverflow.com/questions/36446900/how-to-use-sizeof-in-other-function-from-pointer", "closed_reason": "Duplicate", "title": "How to use sizeof in other function (from pointer)?", "body": "<p>Let's provide an example. I have one main file:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include \"otherfile.h\"\n\nchar output[1024*10];\n\nint main(){\n\n    writeSomething(output);\n\n    return 0;\n}\n</code></pre>\n\n<p>and another file with the function:</p>\n\n<pre><code>void writeSomething(char *o){\n    printf(\"sizeof(o)=%d\", sizeof(o));\n    //code\n    memset(o,0,sizeof(o));\n    // code\n}\n</code></pre>\n\n<p>While compiling this, I got the warning:</p>\n\n<blockquote>\n  <p>argument to 'sizeof' in 'memset' call is the same expression as the\n  destination; did you mean to provide an explicit length?</p>\n</blockquote>\n\n<p>What I want is to set the whole <code>output</code> array to <code>0</code> in my function, so all 1024*10 bytes. But because I pass it as a pointer, it will only set the first 8 characters to <code>0</code> (because <code>sizeof(o)=8</code>).</p>\n\n<p>How can I memset the whole array trough a pointer? Is that even possible?</p>\n"}, {"tags": ["c", "linked-list"], "comments": [{"owner": {"reputation": 5563, "user_id": 5808727, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a8de86a7bb2dbb67425971abc1e1cef8?s=128&d=identicon&r=PG&f=1", "display_name": "Pooya", "link": "https://stackoverflow.com/users/5808727/pooya"}, "edited": false, "score": 3, "creation_date": 1459934276, "post_id": 36446654, "comment_id": 60506289, "body": "you&#39;ll get the same result from both of them"}, {"owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "edited": false, "score": 0, "creation_date": 1459934281, "post_id": 36446654, "comment_id": 60506296, "body": "a matter of style. the first is more clear to the reader."}, {"owner": {"reputation": 101, "user_id": 6147394, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d26a3cabb93c3d8369c36f00e1c10ef5?s=128&d=identicon&r=PG&f=1", "display_name": "Synlar", "link": "https://stackoverflow.com/users/6147394/synlar"}, "reply_to_user": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1459934396, "post_id": 36446654, "comment_id": 60506382, "body": "@nos my program seems to always crash when I attempt <code>!NULL</code>. It is a valid list where each node contains a void pointer to a piece of data and a pointer to the next node."}, {"owner": {"reputation": 101, "user_id": 6147394, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d26a3cabb93c3d8369c36f00e1c10ef5?s=128&d=identicon&r=PG&f=1", "display_name": "Synlar", "link": "https://stackoverflow.com/users/6147394/synlar"}, "reply_to_user": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1459934762, "post_id": 36446654, "comment_id": 60506712, "body": "@nos All I&#39;m doing is traversing the linked list. Each time doing <code>list = list -&gt; next</code>. I&#39;m so out of ideas then... especially because it works with one but not the other."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 1, "creation_date": 1459934848, "post_id": 36446654, "comment_id": 60506785, "body": "<a href=\"http://stackoverflow.com/q/2597142/995714\">NULL is <b>not</b> zero</a>. <code>!NULL</code> is 1 so you are almost always receive segfault because 1 is not a valid address on most systems"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 5563, "user_id": 5808727, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a8de86a7bb2dbb67425971abc1e1cef8?s=128&d=identicon&r=PG&f=1", "display_name": "Pooya", "link": "https://stackoverflow.com/users/5808727/pooya"}, "edited": false, "score": 0, "creation_date": 1459950976, "post_id": 36446654, "comment_id": 60519246, "body": "@Pooya Disagree with &quot;you&#39;ll get the same result from both of them&quot;  <code>list != NULL</code> is not the same as <code>!list</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "edited": false, "score": 0, "creation_date": 1459951105, "post_id": 36446654, "comment_id": 60519356, "body": "@David Haim &quot;...&quot;a matter of style.&quot; --&gt; <code>while (list != NULL)</code> and <code>while (!list)</code> has a different style and more importantly a different functionality."}], "answers": [{"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1459935080, "post_id": 36446839, "comment_id": 60506952, "body": "This is not correct. You are mixing up the NULL macro with null pointers. NULL is <i>always</i> <code>0</code> or <code>(void*)0</code>. <a href=\"http://stackoverflow.com/questions/32136092/how-to-write-c-c-code-correctly-when-null-pointer-is-not-all-bits-zero/32136460#32136460\">Read this</a>."}, {"owner": {"reputation": 3853, "user_id": 1833960, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/92d42253747f8ee3a83465dc04126f93?s=128&d=identicon&r=PG", "display_name": "George Sovetov", "link": "https://stackoverflow.com/users/1833960/george-sovetov"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1459936138, "post_id": 36446839, "comment_id": 60507760, "body": "@Lundin I did some googling. Yes, that was a gap in my knowledge. I&#39;ll remove this part."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1459951770, "post_id": 36446839, "comment_id": 60519905, "body": "@Lundin Certainty <code>NULL</code> macro could be <code>0</code> or <code>(void*)0</code>.  Yet the C spec does not defined it as only those two.  Others are possible including <code>((void*)0)</code>, <code>(-0)</code>, <code>((intptr_t) 0)</code>."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1460035010, "post_id": 36446839, "comment_id": 60564808, "body": "@chux My bad, for some reason I thought you had written <code>(intptr_t*)</code>. You are right, I&#39;ll delete the comment."}], "tags": [], "owner": {"reputation": 3853, "user_id": 1833960, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/92d42253747f8ee3a83465dc04126f93?s=128&d=identicon&r=PG", "display_name": "George Sovetov", "link": "https://stackoverflow.com/users/1833960/george-sovetov"}, "is_accepted": false, "score": 1, "last_activity_date": 1459936155, "last_edit_date": 1459936155, "creation_date": 1459934591, "answer_id": 36446839, "question_id": 36446654, "link": "https://stackoverflow.com/questions/36446654/c-why-must-null-be-compared-to/36446839#36446839", "title": "C - Why must NULL be compared to?", "body": "<p>In most cases, it's matter of style. Comparison to <code>NULL</code> is more explicit.</p>\n\n<p>As mentioned above, <code>if(ptr != NULL)</code> is equivalent to <code>if(ptr)</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 101, "user_id": 6147394, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d26a3cabb93c3d8369c36f00e1c10ef5?s=128&d=identicon&r=PG&f=1", "display_name": "Synlar", "link": "https://stackoverflow.com/users/6147394/synlar"}, "edited": false, "score": 2, "creation_date": 1459935225, "post_id": 36446892, "comment_id": 60507072, "body": "When you spend days in a dungeon trying to get the same function working you start to forget basic things. I hope this helps future comrades undertaking the same course I am. Thanks."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1459952393, "post_id": 36446892, "comment_id": 60520393, "body": "Impressed that OP, 2 commenters and 3 up-votes to those comments all missed that the 2 code fragments had opposite functionality.  (Maybe would have missed it myself had I not read this answer first.) Suggest that it was brought on by the confusion of comparing two  statements with <code>!</code> in them.  IMHO using <code>while (list)</code> is best.  Or using <code>while (list == NULL)</code> when code needs to do the opposite.  Both do not use <code>!</code>."}], "tags": [], "owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "is_accepted": true, "score": 5, "last_activity_date": 1459934724, "creation_date": 1459934724, "answer_id": 36446892, "question_id": 36446654, "link": "https://stackoverflow.com/questions/36446654/c-why-must-null-be-compared-to/36446892#36446892", "title": "C - Why must NULL be compared to?", "body": "<p><code>while (list != NULL)</code> is not the same as <code>while (!list)</code>. They are opposites! Of course your program crashes, it tries to de-reference a <code>NULL</code> pointer.</p>\n\n<p><code>while (list != NULL)</code> is the same as <code>while (list)</code>.</p>\n"}], "owner": {"reputation": 101, "user_id": 6147394, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d26a3cabb93c3d8369c36f00e1c10ef5?s=128&d=identicon&r=PG&f=1", "display_name": "Synlar", "link": "https://stackoverflow.com/users/6147394/synlar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 1, "accepted_answer_id": 36446892, "answer_count": 2, "score": 0, "last_activity_date": 1459936155, "creation_date": 1459934176, "last_edit_date": 1459934556, "question_id": 36446654, "link": "https://stackoverflow.com/questions/36446654/c-why-must-null-be-compared-to", "title": "C - Why must NULL be compared to?", "body": "<p>I'm curious as to why when say I traverse a linked list iteratively I must do <code>while (list != NULL)</code> instead of <code>while (!list)</code>. I thought NULL equated to zero or false.</p>\n\n<p>From comments: My program seems to always crash when I attempt a <code>while (!list)</code> but never the former. Each node contains a void pointer to a piece of data and a pointer to the next node.</p>\n"}, {"tags": ["c", "linux", "unix", "ipc"], "answers": [{"comments": [{"owner": {"reputation": 297, "user_id": 3651370, "user_type": "registered", "accept_rate": 27, "profile_image": "https://graph.facebook.com/100001475058179/picture?type=large", "display_name": "Bhavith C Acharya", "link": "https://stackoverflow.com/users/3651370/bhavith-c-acharya"}, "edited": false, "score": 0, "creation_date": 1459936340, "post_id": 36447075, "comment_id": 60507917, "body": "Thank you very much @sat. How can I generate the unique     &#39;key_t&#39; for my message queue because if some one is using     &#39;key_t=10&#39; then there will be conflict occurs right?"}, {"owner": {"reputation": 13433, "user_id": 874178, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/AdjGb.jpg?s=128&g=1", "display_name": "sat", "link": "https://stackoverflow.com/users/874178/sat"}, "reply_to_user": {"reputation": 297, "user_id": 3651370, "user_type": "registered", "accept_rate": 27, "profile_image": "https://graph.facebook.com/100001475058179/picture?type=large", "display_name": "Bhavith C Acharya", "link": "https://stackoverflow.com/users/3651370/bhavith-c-acharya"}, "edited": false, "score": 0, "creation_date": 1459936554, "post_id": 36447075, "comment_id": 60508095, "body": "@BhavithCAcharya, You can use <code>ftok</code> to generate a unique <code>System V IPC key</code>."}, {"owner": {"reputation": 297, "user_id": 3651370, "user_type": "registered", "accept_rate": 27, "profile_image": "https://graph.facebook.com/100001475058179/picture?type=large", "display_name": "Bhavith C Acharya", "link": "https://stackoverflow.com/users/3651370/bhavith-c-acharya"}, "edited": false, "score": 0, "creation_date": 1459937615, "post_id": 36447075, "comment_id": 60508949, "body": "Thanks @sat. I have other question but it seems like silly please help me out. if I use key_t ftok(&quot;tmp/mykey&quot;, &#39;b&#39;); after key is generated I am killing my process so that message queue exist still in my kernel . So I am opening /tmp/mykey using vi /tmp/mykey but key is not visible but it is visible in ipcs -q command"}, {"owner": {"reputation": 13433, "user_id": 874178, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/AdjGb.jpg?s=128&g=1", "display_name": "sat", "link": "https://stackoverflow.com/users/874178/sat"}, "reply_to_user": {"reputation": 297, "user_id": 3651370, "user_type": "registered", "accept_rate": 27, "profile_image": "https://graph.facebook.com/100001475058179/picture?type=large", "display_name": "Bhavith C Acharya", "link": "https://stackoverflow.com/users/3651370/bhavith-c-acharya"}, "edited": false, "score": 0, "creation_date": 1459939141, "post_id": 36447075, "comment_id": 60510023, "body": "@BhavithCAcharya, I think you have misunderstood the usage of <code>ftok</code>.  <code>ftok</code> won&#39;t store any <code>key</code> into the given filepath. But, It will use those information to generate a unique message queue key. More info read about <code>ftok</code> and usage. If you need <code>key</code>, you have to store by yourself."}, {"owner": {"reputation": 13433, "user_id": 874178, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/AdjGb.jpg?s=128&g=1", "display_name": "sat", "link": "https://stackoverflow.com/users/874178/sat"}, "reply_to_user": {"reputation": 297, "user_id": 3651370, "user_type": "registered", "accept_rate": 27, "profile_image": "https://graph.facebook.com/100001475058179/picture?type=large", "display_name": "Bhavith C Acharya", "link": "https://stackoverflow.com/users/3651370/bhavith-c-acharya"}, "edited": false, "score": 0, "creation_date": 1459943605, "post_id": 36447075, "comment_id": 60513310, "body": "Glad it worked for you. Click the tick (check mark) on left under the vote arrows to accept the answer (<a href=\"http://meta.stackoverflow.com/questions/251078/how-to-update-and-accept-answers\" title=\"how to update and accept answers\">meta.stackoverflow.com/questions/251078/&hellip;</a>)"}, {"owner": {"reputation": 297, "user_id": 3651370, "user_type": "registered", "accept_rate": 27, "profile_image": "https://graph.facebook.com/100001475058179/picture?type=large", "display_name": "Bhavith C Acharya", "link": "https://stackoverflow.com/users/3651370/bhavith-c-acharya"}, "edited": false, "score": 0, "creation_date": 1459951562, "post_id": 36447075, "comment_id": 60519724, "body": "I already clicked when you response first time but my points are still 6 so it wont be visible to public"}], "tags": [], "owner": {"reputation": 13433, "user_id": 874178, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/AdjGb.jpg?s=128&g=1", "display_name": "sat", "link": "https://stackoverflow.com/users/874178/sat"}, "is_accepted": false, "score": 1, "last_activity_date": 1459936605, "last_edit_date": 1459936605, "creation_date": 1459935178, "answer_id": 36447075, "question_id": 36446509, "link": "https://stackoverflow.com/questions/36446509/get-message-queue-id-from-key-provided/36447075#36447075", "title": "Get message queue ID from Key provided", "body": "<p>You can use <code>msgget</code> without using <code>IPC_EXCL</code> flag to get existing message queue identifier.</p>\n\n<pre><code>mid = msgget((key_t)10, 0);\n</code></pre>\n\n<p>Then, using that identifier you can use remove the message queue by using <code>msgctl</code> with <code>IPC_RMID</code> flag.</p>\n\n<p>EDIT:</p>\n\n<pre><code>key_t ftok(char *pathname, char proj_id);\n</code></pre>\n"}], "owner": {"reputation": 297, "user_id": 3651370, "user_type": "registered", "accept_rate": 27, "profile_image": "https://graph.facebook.com/100001475058179/picture?type=large", "display_name": "Bhavith C Acharya", "link": "https://stackoverflow.com/users/3651370/bhavith-c-acharya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1153, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1459936605, "creation_date": 1459933855, "last_edit_date": 1459934073, "question_id": 36446509, "link": "https://stackoverflow.com/questions/36446509/get-message-queue-id-from-key-provided", "title": "Get message queue ID from Key provided", "body": "<p>I have a key for message queue inter process communication, say <code>key_t = 10</code>.\nI want to get the queue ID if message queue already exist with key value 10.\nCurrently I am using below code to find the queue is exist or not using return error </p>\n\n<pre><code>msgget((key_t)10,IPC_EXCL|IPC_CREAT|0777)\n</code></pre>\n\n<p>but I want to get queue ID and need to close it.</p>\n"}, {"tags": ["c", "sockets", "waitpid"], "comments": [{"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1459936183, "post_id": 36446281, "comment_id": 60507790, "body": "Use threads. The <code>fork()</code> model is basically obsolete."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1459949733, "post_id": 36446281, "comment_id": 60518207, "body": "@EJP, by no means <code>fork()</code> is obsolete. See answers below - they actually provide for a solution <b>unavailable</b> natively with threads."}], "answers": [{"comments": [{"owner": {"reputation": 314, "user_id": 4767942, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/06fdb0a141f5b96dc7d872793800d5b0?s=128&d=identicon&r=PG&f=1", "display_name": "Aeldred", "link": "https://stackoverflow.com/users/4767942/aeldred"}, "edited": false, "score": 0, "creation_date": 1459934250, "post_id": 36446571, "comment_id": 60506268, "body": "You can use signals to tell the parent that a client has been disconnected from child."}, {"owner": {"reputation": 1201, "user_id": 1616329, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/5a660ddaee099d2d3021c01ad5b4c729?s=128&d=identicon&r=PG", "display_name": "lockdoc", "link": "https://stackoverflow.com/users/1616329/lockdoc"}, "edited": false, "score": 0, "creation_date": 1459935592, "post_id": 36446571, "comment_id": 60507348, "body": "@Jean-Baptiste Yun&#232;s could you give an example for the SIGCHLD usage."}], "tags": [], "owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "is_accepted": false, "score": 0, "last_activity_date": 1459950667, "last_edit_date": 1459950667, "creation_date": 1459934023, "answer_id": 36446571, "question_id": 36446281, "link": "https://stackoverflow.com/questions/36446281/c-fork-inform-parent-when-child-process-disconnects/36446571#36446571", "title": "C: fork() inform parent when child process disconnects", "body": "<p>Your waitpid usage is not correct. You have a non-blocking call so if the child is not finished then then the call gets 0:</p>\n\n<blockquote>\n  <p><strong>waitpid()</strong>: on success, returns the process ID of the child whose state\n  has changed; if <code>WNOHANG</code> was specified and one or more child(ren)\n  specified by pid exist, but have not yet changed state, then 0 is\n  returned. On error, -1 is returned.</p>\n</blockquote>\n\n<p>So your are going immediately out of the while loop. Of course this can be catched later when the first children terminates and a second one lets you process the <code>waitpid</code> again.</p>\n\n<p>As you need to have a non-blocking call to wait I can suggest you not to manage termination directly but through <code>SIGCHLD</code> signal that will let you catch termination of any children and then appropriately call <code>waitpid</code> in the handler:</p>\n\n<pre><code>void handler(int signal) {\n  while (waitpid(...)) { // find an adequate condition and paramters for your needs\n}\n\n...\nstruct sigaction act;\nact.sa_flag = 0;\nsigemptyset(&amp;(act.sa_mask));\nact.sa_handler = handler;\nsigaction(SIGCHLD,&amp;act,NULL);\n... // now ready to receive SIGCHLD when at least a children changes its state\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "is_accepted": false, "score": 0, "last_activity_date": 1459952260, "last_edit_date": 1459952260, "creation_date": 1459935697, "answer_id": 36447267, "question_id": 36446281, "link": "https://stackoverflow.com/questions/36446281/c-fork-inform-parent-when-child-process-disconnects/36447267#36447267", "title": "C: fork() inform parent when child process disconnects", "body": "<p>If I understand correctly, you want to be able to servicve multiple clients at once, and therefore your <code>waitpid</code> call is correct in that it does not block if no child has terminated.</p>\n\n<p>However, the problem you then have is that you need to be able to process asynchronous child termination while waiting for new clients via <code>accept</code>. \nAssuming that you're dealing with a POSIXy system, merely having a <code>SIGCHLD</code> handler established and having the signal unmasked (via <code>sigprocmask</code>, though IIRC it is unmasked by default), should be enough to cause <code>accept</code> to fail with <code>EINTR</code> if a child terminates while you are waiting for a new client to connect - and you can then handle <code>EINTR</code> appropriately.</p>\n\n<p>The reason for this is that a SIGCHLD signal will be automatically sent to the parent process when a child process terminates. In general, system calls such as <code>accept</code> will return an error of <code>EINTR</code> (\"interrupted\") if a signal is received while they are waiting.</p>\n\n<p>However, there would still be a race condition, where a child terminates just <em>before</em> you call <code>accept</code> (i.e. in between where already have <code>waitpid</code> and <code>accept</code>). There are two main possibilities to overcome this:</p>\n\n<ol>\n<li><p>Do all the child termination processing in your <code>SIGCHLD</code> handler, instead of the main loop. This may not be feasible, however, since there are significant limits to what you are allowed to do within a signal handler. You may not call <code>printf</code> for example (though you may use <code>write</code>).</p>\n\n<p>I do not suggest you go down this path, although it may seem simpler at first it is the least flexible option and may prove unworkable later.</p></li>\n<li><p>Write to one end of a non-blocking pipe in your <code>SIGCHLD</code> signal handler. Within the main loop, instead of calling <code>accept</code> directly, use <code>poll</code> (or <code>select</code>) to look for readiness on both the socket and the read end of the pipe, and handle each appropriately.</p>\n\n<p>On Linux (and OpenBSD, I'm not sure about others) you can use <code>ppoll</code> (<a href=\"http://linux.die.net/man/2/ppoll\" rel=\"nofollow\">man page</a>) to avoid the need to create a pipe (and in this case you should leave the signal masked, and have it unmasked during the poll operation; if <code>ppoll</code> fails with <code>EINTR</code>, you know that a signal was received, and you should call <code>waitpid</code>). You still need to set a signal handler for SIGCHLD, but it doesn't need to do anything.</p>\n\n<p>Another option on Linux is to use <code>signalfd</code> (<a href=\"http://linux.die.net/man/2/signalfd\" rel=\"nofollow\">man page</a>) to avoid both the need to create a pipe and set up a signal handler (I think). You should mask the SIGCHLD signal (using <code>sigprocmask</code>) if you use this. When <code>poll</code> (or equivalent) indicates that the signalfd is active, read the signal data from it (which clears the signal) and then call <code>waitpid</code> to reap the child.</p>\n\n<p>On various BSD systems you can use <code>kqueue</code> (<a href=\"http://man.openbsd.org/OpenBSD-current/man2/EV_SET.2\" rel=\"nofollow\">OpenBSD man page</a>) instead of <code>poll</code> and watch for signals without needing to establish a signal handler.</p>\n\n<p>On other POSIX systems you may be able to use <code>pselect</code> (<a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/pselect.html\" rel=\"nofollow\">documentation</a>) in a similar way to <code>ppoll</code> as described above.</p>\n\n<p>There is also the option of using a library such as <a href=\"http://libevent.org/\" rel=\"nofollow\">libevent</a> to abstract away the OS-specifics.</p></li>\n</ol>\n\n<p>The Glibc manual has <a href=\"https://www.gnu.org/software/libc/manual/html_node/Waiting-for-I_002fO.html\" rel=\"nofollow\">an example</a> of using <code>select</code>. Consult the manual pages for <code>poll</code>, <code>ppoll</code>, <code>pselect</code> for more information about those functions. There is an <a href=\"http://www.wangafu.net/~nickm/libevent-book/\" rel=\"nofollow\">online book</a> on using Libevent.</p>\n\n<p>Rough example for using <code>select</code>, borrowed from Glibc documentation (and modified):</p>\n\n<pre><code>/* Set up a pipe and set signal handler for SIGCHLD */\n\nint pipefd[2]; /* must be a global variable */\npipe(pipefd); /* TODO check for error return */\nfcntl(pipefd[1], F_SETFL, O_NONBLOCK); /* set write end non-blocking */\n\n/* signal handler */\nvoid sigchld_handler(int signum)\n{\n    char a = 0; /* write anything, doesn't matter what */\n    write(pipefd[1], &amp;a, 1);\n}\n\n/* set up signal handler */\nsignal(SIGCHLD, sigchld_handler);\n</code></pre>\n\n<p>Where you currently have <code>accept</code>, you need to check status of the server socket and the read end of the pipe:</p>\n\n<pre><code>fd_set set, outset;\nstruct timeval timeout;\n\n/* Initialize the file descriptor set. */\nFD_ZERO (&amp;set);\nFD_SET (fdlisten[server], &amp;set);\nFD_SET (pipefds[0], &amp;set);\nFD_ZERO(&amp;outset);\n\nfor (;;) {\n    select (FD_SETSIZE, &amp;set, NULL, &amp;outset, NULL /* no timeout */));\n    /* TODO check for error return.\n       EINTR should just continue the loop. */\n\n    if (FD_ISSET(fdlisten[server], &amp;outset)) {\n        /* now do accept() etc */\n    }\n\n    if (FD_ISSET(pipefds[0], &amp;outset)) {\n        /* now do waitpid(), and read a byte from the pipe */\n    }\n}\n</code></pre>\n\n<p>Using other mechanisms is generally simpler, so I leave those as an exercise :)</p>\n"}], "owner": {"reputation": 1201, "user_id": 1616329, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/5a660ddaee099d2d3021c01ad5b4c729?s=128&d=identicon&r=PG", "display_name": "lockdoc", "link": "https://stackoverflow.com/users/1616329/lockdoc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1330, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1459952260, "creation_date": 1459933307, "last_edit_date": 1459936024, "question_id": 36446281, "link": "https://stackoverflow.com/questions/36446281/c-fork-inform-parent-when-child-process-disconnects", "title": "C: fork() inform parent when child process disconnects", "body": "<p>I am doing a simple server/client program in C which listens on a network interface and accepts clients. Each client is handled in a forked process.</p>\n\n<p>The goal I have is to let the parent process know, once a client has disconnected from the child process.</p>\n\n<p>Currently my main loop looks like this:</p>\n\n<pre><code>for (;;) {\n\n    /* 1. [network] Wait for new connection... (BLOCKING CALL) */\n    fd_listen[client] = accept(fd_listen[server], (struct sockaddr *)&amp;cli_addr, &amp;clilen);\n\n    if (fd_listen[client] &lt; 0) {\n        perror(\"ERROR on accept\");\n        exit(1);\n    }\n\n\n    /* 2. [process] Call socketpair */\n    if ( socketpair(AF_LOCAL, SOCK_STREAM, 0, fd_comm) != 0 ) {\n        perror(\"ERROR on socketpair\");\n        exit(1);\n    }\n\n\n    /* 3. [process] Call fork */\n    pid = fork();\n\n    if (pid &lt; 0) {\n        perror(\"ERROR on fork\");\n        exit(1);\n    }\n\n    /* 3.1 [process] Inside the Child */\n    if (pid == 0) {\n\n        printf(\"[child] num of clients: %d\\n\", num_client+1);\n        printf(\"[child] pid: %ld\\n\", (long) getpid());\n\n        close(fd_comm[parent]);     // Close the parent socket file descriptor\n        close(fd_listen[server]);   // Close the server socket file descriptor\n\n        // Tasks that the child process should be doing for the connected client\n        child_processing(fd_listen[client]);\n\n        exit(0);\n    }\n    /* 3.2 [process] Inside the Parent */\n    else {\n\n        num_client++;\n        close(fd_comm[child]);      // Close the child socket file descriptor\n        close(fd_listen[client]);   // Close the client socket file descriptor\n\n        printf(\"[parent] num of clients: %d\\n\", num_client);\n\n        while ( (w = waitpid(-1, &amp;status, WNOHANG)) &gt; 0) {\n            printf(\"[EXIT] child %d terminated\\n\", w);\n            num_client--;\n        }\n    }\n\n}/* end of while */ \n</code></pre>\n\n<p>It all works well, the only problem I have is (probably) due to the blocking <code>accept</code> call.</p>\n\n<p>When I connect to the above server, a new child process is created and <code>child_processing</code> is called.</p>\n\n<p>However when I disconnect with that client, the main parent process does not know about it and does NOT output <code>printf(\"[EXIT] child %d terminated\\n\", w);</code></p>\n\n<p>But, when I connect with a second client <strong>after</strong> the first client has disconnected, the main loop is able to finally process the <code>while ( (w = waitpid(-1, &amp;status, WNOHANG)) &gt; 0)</code> part and tell me that the <strong>first client</strong> has disconnected.</p>\n\n<p>If there will be only ever one client connecting and disconnecting afterwards, my main parent process will never be able to tell if it has disconnected or not.</p>\n\n<p>Is there any way to tell the parent process that my client already left?</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>As I am a real beginner with c, it would be nice if you provide some short snippets to your answer so I can actually understand it :-)</p>\n"}, {"tags": ["c", "string", "char"], "answers": [{"comments": [{"owner": {"reputation": 1201, "user_id": 1616329, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/5a660ddaee099d2d3021c01ad5b4c729?s=128&d=identicon&r=PG", "display_name": "lockdoc", "link": "https://stackoverflow.com/users/1616329/lockdoc"}, "edited": false, "score": 0, "creation_date": 1459935666, "post_id": 36446506, "comment_id": 60507408, "body": "When I try <code>fread</code> it does not work at all: <code>fread(*result, 1, sizeof(char*), fp);</code>"}, {"owner": {"reputation": 1093, "user_id": 1571801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b739aed4dad18fc8844f52352fd554a2?s=128&d=identicon&r=PG", "display_name": "atturri", "link": "https://stackoverflow.com/users/1571801/atturri"}, "reply_to_user": {"reputation": 1201, "user_id": 1616329, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/5a660ddaee099d2d3021c01ad5b4c729?s=128&d=identicon&r=PG", "display_name": "lockdoc", "link": "https://stackoverflow.com/users/1616329/lockdoc"}, "edited": false, "score": 0, "creation_date": 1459936362, "post_id": 36446506, "comment_id": 60507936, "body": "Read the <code>fread</code> documentation to know what to pass as parameters. The first one will be <code>path</code>, as before. In <code>count</code> pass the size of your buffer, <code>sizeof(path)</code>; it will not read past the end-of-line. Actually you won&#39;t need the <code>while</code> loop as if it doesn&#39;t read all data, your buffer will be full anyways."}, {"owner": {"reputation": 1201, "user_id": 1616329, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/5a660ddaee099d2d3021c01ad5b4c729?s=128&d=identicon&r=PG", "display_name": "lockdoc", "link": "https://stackoverflow.com/users/1616329/lockdoc"}, "edited": false, "score": 0, "creation_date": 1459936870, "post_id": 36446506, "comment_id": 60508366, "body": "How would I know which array size I have to declare to path before reading?"}, {"owner": {"reputation": 1093, "user_id": 1571801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b739aed4dad18fc8844f52352fd554a2?s=128&d=identicon&r=PG", "display_name": "atturri", "link": "https://stackoverflow.com/users/1571801/atturri"}, "reply_to_user": {"reputation": 1201, "user_id": 1616329, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/5a660ddaee099d2d3021c01ad5b4c729?s=128&d=identicon&r=PG", "display_name": "lockdoc", "link": "https://stackoverflow.com/users/1616329/lockdoc"}, "edited": false, "score": 0, "creation_date": 1459937034, "post_id": 36446506, "comment_id": 60508500, "body": "You don&#39;t. Set a size that you expect will be able to hold all output text of the program. Else you would have to deal with dynamic memory, allocating it each time you see you&#39;ll be needing more."}, {"owner": {"reputation": 1093, "user_id": 1571801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b739aed4dad18fc8844f52352fd554a2?s=128&d=identicon&r=PG", "display_name": "atturri", "link": "https://stackoverflow.com/users/1571801/atturri"}, "reply_to_user": {"reputation": 1201, "user_id": 1616329, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/5a660ddaee099d2d3021c01ad5b4c729?s=128&d=identicon&r=PG", "display_name": "lockdoc", "link": "https://stackoverflow.com/users/1616329/lockdoc"}, "edited": false, "score": 0, "creation_date": 1459937440, "post_id": 36446506, "comment_id": 60508795, "body": "You could also leave the closing of the file descriptor for later, and use &#180;fprintf&#180; instead of &#180;printf&#180; at the calling part of your program so that it directly prints the outputs of the executed command (with the file descriptor as parameter). The file descriptor could be closed later."}], "tags": [], "owner": {"reputation": 1093, "user_id": 1571801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b739aed4dad18fc8844f52352fd554a2?s=128&d=identicon&r=PG", "display_name": "atturri", "link": "https://stackoverflow.com/users/1571801/atturri"}, "is_accepted": true, "score": 2, "last_activity_date": 1459934410, "last_edit_date": 1459934410, "creation_date": 1459933841, "answer_id": 36446506, "question_id": 36446078, "link": "https://stackoverflow.com/questions/36446078/return-exec-output-from-program-via-parameter-reference/36446506#36446506", "title": "Return exec output from program via parameter reference", "body": "<p>Use <code>fread</code> instead of <code>fgets</code>. <code>fgets</code> stops reading with each newline character, but you are saving all lines in the first positions of your <code>path</code> buffer. Also, you would need to keep track of the number of bytes already present at <code>path</code>, and save the data into the first unused position in <code>path</code> each time you call the reading function.</p>\n"}], "owner": {"reputation": 1201, "user_id": 1616329, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/5a660ddaee099d2d3021c01ad5b4c729?s=128&d=identicon&r=PG", "display_name": "lockdoc", "link": "https://stackoverflow.com/users/1616329/lockdoc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 36446506, "answer_count": 1, "score": 0, "last_activity_date": 1459934410, "creation_date": 1459932749, "question_id": 36446078, "link": "https://stackoverflow.com/questions/36446078/return-exec-output-from-program-via-parameter-reference", "title": "Return exec output from program via parameter reference", "body": "<p>I am trying to execute a shell command from within a C program.</p>\n\n<p>For that I have built a wrapper function that will return the exit code of the command itself and use a parameter reference variable to give back the actual output of the program.</p>\n\n<p>The exec function wrapper looks like this:</p>\n\n<pre><code>int _exec(const void *command, char **result) {\n    FILE *fp;\n    char path[1035];\n    char *eof;\n\n    /* Open the command for reading. */\n    fp = popen(command, \"r\");\n    if (fp == NULL) {\n        return -1;\n    }\n\n    while((eof = fgets(path, sizeof(path), fp)) != NULL);\n\n    /* Fill the parameter reference */\n    *result = strdup(path);\n\n    /* close */\n    pclose(fp);\n    return 0;\n}\n</code></pre>\n\n<p>The calling part looks like this:</p>\n\n<pre><code>int result = 0;\nchar *tmp;\n\nresult =_exec(\"ls /\", &amp;tmp);\nprintf(\"%s\", tmp);\n</code></pre>\n\n<p>Unfortunately in the calling part, when I <code>printf</code> <code>tmp</code>, it only contains the last line of the command output.</p>\n\n<p>Any idea what I am doing wrong? How can I get all lines int <code>*result</code> and therefore into <code>tmp</code>?</p>\n"}, {"tags": ["c", "gcc", "macros"], "comments": [{"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1459932648, "post_id": 36446016, "comment_id": 60505143, "body": "<code>typeof</code> is not standard C, it&#39;s a <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Typeof.html\" rel=\"nofollow noreferrer\">GNU extension</a> in GCC. What compiler are you using?"}, {"owner": {"reputation": 3883, "user_id": 530424, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/Xv2CA.jpg?s=128&g=1", "display_name": "elhadi dp \u0131p\u0250\u0265\u05df\u01dd", "link": "https://stackoverflow.com/users/530424/elhadi-dp-%c4%b1p%c9%90%c9%a5%d7%9f%c7%9d"}, "reply_to_user": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1459932697, "post_id": 36446016, "comment_id": 60505187, "body": "i&#39;m using gcc compiler"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1459932708, "post_id": 36446016, "comment_id": 60505193, "body": "Code must take a SWAG at what <code>e</code> is. It has no way of knowing and neither does <code>typeof</code>."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 2, "creation_date": 1459933572, "post_id": 36446016, "comment_id": 60505774, "body": "<code>typeof</code> does not produce a value, it produces a type. You cannot compare types. For example <code>if (int == int)</code> is an invalid comparison."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1459933590, "post_id": 36446016, "comment_id": 60505791, "body": "@DavidC.Rankin <a href=\"https://en.wikipedia.org/wiki/Scientific_wild-ass_guess\" rel=\"nofollow noreferrer\">SWAG?</a> English, please."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1459946237, "post_id": 36446016, "comment_id": 60515361, "body": "Swinging Wild Ass Guess...."}], "answers": [{"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 4, "last_activity_date": 1459933569, "creation_date": 1459933569, "answer_id": 36446394, "question_id": 36446016, "link": "https://stackoverflow.com/questions/36446016/expected-expression-before-typeof-or-expected-primary-expression-before-typeo/36446394#36446394", "title": "Expected expression before &#39;typeof&#39; OR expected primary-expression before &#39;typeof&#39;", "body": "<p>This is not standard C, so it will only compile with GCC setup to be a non-standard compiler. Meaning you probably shouldn't use options like <code>-std=c11</code> or <code>-pedantic</code> to make this compile. I would not recommend that though.</p>\n\n<p>I would instead recommend to get rid of all non-standard GCC crap and write pure standard C instead:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define m_test_type(e)                     \\\n  printf(_Generic((e),                     \\\n           char*:   \"type is char*\\n\",     \\\n           int:     \"type is int\\n\",       \\\n           default: \"type is unknown\\n\"    \\\n         ));\n\nint main() {\n    char s[] = \"hello\";\n\n    m_test_type(s);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3276, "user_id": 746547, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/6iL90.jpg?s=128&g=1", "display_name": "Louen", "link": "https://stackoverflow.com/users/746547/louen"}, "is_accepted": false, "score": 8, "last_activity_date": 1459934521, "last_edit_date": 1459934521, "creation_date": 1459933578, "answer_id": 36446399, "question_id": 36446016, "link": "https://stackoverflow.com/questions/36446016/expected-expression-before-typeof-or-expected-primary-expression-before-typeo/36446399#36446399", "title": "Expected expression before &#39;typeof&#39; OR expected primary-expression before &#39;typeof&#39;", "body": "<p>I don't think you can use <strong>typeof</strong> to test for type equality. If you look at the <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Typeof.html\" rel=\"noreferrer\">gcc manual</a>, <code>typeof (expr)</code> is statically replaced by the type of the expression, which allows you to declare variables :</p>\n\n<pre><code>int i;\ntypeof(&amp;i) p; \n</code></pre>\n\n<p>In that case the last instruction will be equivalent to <code>int* p;</code></p>\n\n<p>However if you use <code>typeof</code> in an if statement like yours would be an error since it would be equivalent to write something like </p>\n\n<pre><code>if ( char* == char *)\n</code></pre>\n\n<p>which is causing the error.</p>\n"}, {"comments": [{"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 3, "creation_date": 1459934652, "post_id": 36446580, "comment_id": 60506626, "body": "But you are printing <code>&quot;type is char *\\n&quot;</code> when the type is actually <code>char []</code>. For example, <code>m_test_type(char *);</code> and <code>m_test_type(&amp;s[0]);</code> both print <code>&quot;type is unknown\\n&quot;</code>. Like <code>sizeof(x)</code>, <code>typeof(x)</code> is one of those places where an array <code>x</code> does not decay to a pointer <code>&amp;(x)[0]</code>."}, {"owner": {"reputation": 3883, "user_id": 530424, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/Xv2CA.jpg?s=128&g=1", "display_name": "elhadi dp \u0131p\u0250\u0265\u05df\u01dd", "link": "https://stackoverflow.com/users/530424/elhadi-dp-%c4%b1p%c9%90%c9%a5%d7%9f%c7%9d"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1459935484, "post_id": 36446580, "comment_id": 60507282, "body": "thank you for the comment, it was juste a copy/paste error, i ve fixed it now"}], "tags": [], "owner": {"reputation": 3883, "user_id": 530424, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/Xv2CA.jpg?s=128&g=1", "display_name": "elhadi dp \u0131p\u0250\u0265\u05df\u01dd", "link": "https://stackoverflow.com/users/530424/elhadi-dp-%c4%b1p%c9%90%c9%a5%d7%9f%c7%9d"}, "is_accepted": false, "score": 2, "last_activity_date": 1459935809, "last_edit_date": 1459935809, "creation_date": 1459934040, "answer_id": 36446580, "question_id": 36446016, "link": "https://stackoverflow.com/questions/36446016/expected-expression-before-typeof-or-expected-primary-expression-before-typeo/36446580#36446580", "title": "Expected expression before &#39;typeof&#39; OR expected primary-expression before &#39;typeof&#39;", "body": "<p>i can run this code now by using <a href=\"https://gcc.gnu.org/onlinedocs/gcc-3.3.5/gcc/Other-Builtins.html\" rel=\"nofollow\">builtin functions</a>:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define m_test_type(e)                                                   \\\n    do {                                                                 \\\n         if (__builtin_types_compatible_p(typeof(e), typeof(char []))) { \\\n            printf(\"type is char []\\n\");                                 \\\n         } else                                                          \\\n         if (__builtin_types_compatible_p(typeof(e), typeof(int))) {     \\\n            printf(\"type is int\\n\");                                     \\\n         } else {                                                        \\\n            printf(\"type is unknown\\n\");                                 \\\n         }                                                               \\\n     } while (0)\n\nint main() {\n    const char s[] = \"hello\";\n\n    m_test_type(s);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 3883, "user_id": 530424, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/Xv2CA.jpg?s=128&g=1", "display_name": "elhadi dp \u0131p\u0250\u0265\u05df\u01dd", "link": "https://stackoverflow.com/users/530424/elhadi-dp-%c4%b1p%c9%90%c9%a5%d7%9f%c7%9d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6491, "favorite_count": 2, "answer_count": 3, "score": 3, "last_activity_date": 1459935809, "creation_date": 1459932577, "last_edit_date": 1459935403, "question_id": 36446016, "link": "https://stackoverflow.com/questions/36446016/expected-expression-before-typeof-or-expected-primary-expression-before-typeo", "title": "Expected expression before &#39;typeof&#39; OR expected primary-expression before &#39;typeof&#39;", "body": "<p>I have a macro like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stddef.h&gt;\n\n#define m_test_type(e)                              \\\n    do {                                            \\\n         if (typeof(e) == typeof(char [])) {        \\\n            printf(\"type is char []\\n\");            \\\n         } else                                     \\\n         if (typeof(e) == typeof(int)) {            \\\n            printf(\"type is int\\n\");                \\\n         } else {                                   \\\n            printf(\"type is unknown\\n\");            \\\n         }                                          \\\n     } while (0)\n\nint main() {\n    char s[] = \"hello\";\n\n    m_test_type(s);\n\n    return 0;\n}\n</code></pre>\n\n<p>During compilation with gcc I get following error:</p>\n\n<pre><code>prog.cpp: In function 'int main()':\nprog.cpp:6:14: error: expected primary-expression before 'typeof'\n          if (typeof(e) == typeof(char *)) {         \\\n              ^\nprog.cpp:19:2: note: in expansion of macro 'm_test_type'\n  m_test_type(s);\n  ^\nprog.cpp:6:14: error: expected ')' before 'typeof'\n          if (typeof(e) == typeof(char *)) {         \\\n              ^\nprog.cpp:19:2: note: in expansion of macro 'm_test_type'\n  m_test_type(s);\n  ^\nprog.cpp:9:14: error: expected primary-expression before 'typeof'\n          if (typeof(e) == typeof(int)) {            \\\n              ^\nprog.cpp:19:2: note: in expansion of macro 'm_test_type'\n  m_test_type(s);\n  ^\nprog.cpp:9:14: error: expected ')' before 'typeof'\n          if (typeof(e) == typeof(int)) {            \\\n              ^\nprog.cpp:19:2: note: in expansion of macro 'm_test_type'\n  m_test_type(s);\n  ^\n</code></pre>\n"}, {"tags": ["c", "parallel-processing", "openmp"], "comments": [{"owner": {"reputation": 4940, "user_id": 1673574, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/ubyAU.png?s=128&g=1", "display_name": "Chiel", "link": "https://stackoverflow.com/users/1673574/chiel"}, "edited": false, "score": 0, "creation_date": 1459933505, "post_id": 36445842, "comment_id": 60505735, "body": "First of all, I do not think that making the initialization phase parallel is going to bring you any gain, as with these type of codes nearly all time is spent in the solvers. Second, just using a parallel region without giving OpenMP any information what to does not bring anything. You need to distribute tasks."}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 1, "creation_date": 1459933934, "post_id": 36445842, "comment_id": 60506049, "body": "What does <code>Q(k, j, n)</code> mean? <code>Q</code> is a pointer to double, i.e., it can be treated as a one-dimensional array."}, {"owner": {"reputation": 4037, "user_id": 4056099, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xF37X.jpg?s=128&g=1", "display_name": "NoseKnowsAll", "link": "https://stackoverflow.com/users/4056099/noseknowsall"}, "reply_to_user": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1459961826, "post_id": 36445842, "comment_id": 60527461, "body": "@DanielLangr I think he has some nasty <code>#define</code>s written above that allow him to access Q with 3D-like notation..."}, {"owner": {"reputation": 31, "user_id": 3439792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/291661167c5adad070f244f369135d09?s=128&d=identicon&r=PG&f=1", "display_name": "freedomwave", "link": "https://stackoverflow.com/users/3439792/freedomwave"}, "edited": false, "score": 0, "creation_date": 1459971971, "post_id": 36445842, "comment_id": 60533722, "body": "There is this #define Q(i, j, k) Q[((k) + n * ((j) + m * (i)))]"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 3439792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/291661167c5adad070f244f369135d09?s=128&d=identicon&r=PG&f=1", "display_name": "freedomwave", "link": "https://stackoverflow.com/users/3439792/freedomwave"}, "edited": false, "score": 0, "creation_date": 1459972328, "post_id": 36446393, "comment_id": 60533932, "body": "I&#39;m very rusty with programming. For understanding the data races in the <code>laxf_scheme_2d</code> function, wich is the heaviest (I putted it on a comment), seeing the allocations in the main I have to take Q (that has that nasty  <code>#define Q(i, j, k) Q[((k) + n * ((j) + m * (i)))]</code> above) has a 3D array accessed by pointers right? and <code>ffx</code> as a one dimensional array?"}], "tags": [], "owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "is_accepted": false, "score": 0, "last_activity_date": 1459933557, "creation_date": 1459933557, "answer_id": 36446393, "question_id": 36445842, "link": "https://stackoverflow.com/questions/36445842/initializing-data-with-openmp-shallow-water-algorithm/36446393#36446393", "title": "Initializing data with Openmp [shallow water algorithm]", "body": "<p>There are multiple problems with your code. First of all, you have data races there, since you write to shared variables, such as <code>Q</code>, <code>x</code>, and <code>y</code>, by <strong>all threads</strong>. Either do the allocations outside of a parallel region or perform them by a single thread only (<code>#pragma omp master</code> or <code>#pragma omp single</code>).</p>\n\n<p>Then, you don't parallelize the <code>for</code> loops in the initialization section. In fact, all these loops are executed by all threads within whole ranges (again with data races and likely a lot of cache contention). You should add <code>#pragma omp parallel</code> to these loops. For nested loops, the <code>collapse</code> directive might be useful.</p>\n\n<p>Also, be sure that there are no data races in <code>solver()</code> and <code>laxf_scheme_2d()</code> functions. Seemingly, the most time of the calculation is spend within <code>laxf_scheme_2d()</code>, however, this function is not at all run in parallel. Does it use OpenMP internally?</p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 3439792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/291661167c5adad070f244f369135d09?s=128&d=identicon&r=PG&f=1", "display_name": "freedomwave", "link": "https://stackoverflow.com/users/3439792/freedomwave"}, "is_accepted": false, "score": 0, "last_activity_date": 1459971931, "creation_date": 1459971931, "answer_id": 36460964, "question_id": 36445842, "link": "https://stackoverflow.com/questions/36445842/initializing-data-with-openmp-shallow-water-algorithm/36460964#36460964", "title": "Initializing data with Openmp [shallow water algorithm]", "body": "<p>Thank you for the answers. I've seen many problems in my implementation, first of all the heaviest function where all the job is done is <code>laxf_scheme_2d</code>. \nAbout the <code>Q</code> variable i have this <code>#define Q(i, j, k) Q[((k) + n * ((j) + m * (i)))]</code></p>\n\n<p>This is <code>laxf_scheme_2d</code></p>\n\n<pre><code>void laxf_scheme_2d(double *Q, double **ffx, double **ffy, double **nFx, double **nFy,\n            int m, int n, double dx, double dy, double dt) {\n  int i, j, k;\n\n  /* Calculate and update fluxes in the x-direction */\n  #pragma omp for\n  for (i = 1; i &lt; n; i++) {\n    fx(Q, ffx, m, n, i);\n    for (j = 1; j &lt; m; j++) \n      for (k = 0; k &lt; cell_size;  k++) \n    nFx[k][j] = 0.5 * ((ffx[k][j-1] + ffx[k][j]) -\n               dx/dt * (Q(k, j, i) - Q(k, j-1, i)));\n    for (j = 1; j &lt; m-1; j++)\n      for (k = 0; k &lt; cell_size;  k++) \n    Q(k, j, i) = Q(k, j, i)  - dt/dx * ((nFx[k][j+1] - nFx[k][j]));\n\n  }\n\n  /* Calculate and update fluxes in the y-direction */\n  #pragma omp for\n  for (i = 1; i &lt; m; i++) {\n    fy(Q, ffy, m, n, i);\n    for (j = 1; j &lt; n; j++)\n      for (k = 0; k &lt; cell_size; k++)\n    nFy[k][j] = 0.5 * ((ffy[k][j-1] + ffy[k][j]) - \n               dy/dt * (Q(k, i, j) - Q(k, i, j -1)));\n    for (j = 1; j &lt;  n-1; j++) \n      for (k = 0; k &lt; cell_size; k++)\n    Q(k,i,j) = Q(k,i,j) -  dt/dy * ((nFy[k][j+1]  -  nFy[k][j]));\n  }\n\n}\n</code></pre>\n\n<p>Functions <code>fx</code> and <code>fy</code> are very simple and with no data dependencies. I can't put de <code>#pragma omp parallel for</code> above the first <code>for</code> loop because there are data races but for now I can't see how to change this code to overcome them.</p>\n\n<pre><code>long int i, j, m, n, M, N;\n  char *ptr;\n  long int s;\n  int flag, verbose;\n  double *Q;\n  double *x, *y;\n  double **ffx, **nFx, **ffy, **nFy;\n  double dx, dt, epsi, delta, dy, tend, tmp, stime;\n  M = 1000;\n  N = 1000;\n\n/* Add two ghost volumes at each side of the domain */\n  m = M + 2;\n  n = N + 2;\n\n  /* Allocate memory for the domain */\n  Q = (double *) malloc(m * n * cell_size *  sizeof(double));\n\n  x = (double *) malloc(m * sizeof(double));\n  y = (double *) malloc(n * sizeof(double));    \n\n  /* Allocate memory for fluxes */\n  ffx = (double **) malloc(cell_size * sizeof(double *));\n  ffy = (double **) malloc(cell_size * sizeof(double *));\n  nFx = (double **) malloc(cell_size * sizeof(double *));\n  nFy = (double **) malloc(cell_size * sizeof(double *));\n\n  ffx[0] = (double *) malloc(cell_size * m * sizeof(double));\n  nFx[0] = (double *) malloc(cell_size * m * sizeof(double));\n  ffy[0] = (double *) malloc(cell_size * n * sizeof(double));\n  nFy[0] = (double *) malloc(cell_size * n * sizeof(double));\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 3439792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/291661167c5adad070f244f369135d09?s=128&d=identicon&r=PG&f=1", "display_name": "freedomwave", "link": "https://stackoverflow.com/users/3439792/freedomwave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1459971931, "creation_date": 1459932098, "question_id": 36445842, "link": "https://stackoverflow.com/questions/36445842/initializing-data-with-openmp-shallow-water-algorithm", "title": "Initializing data with Openmp [shallow water algorithm]", "body": "<p>First of all, my Englishg level sucks, so sorry if something isn't well written...</p>\n\n<p>I'm learning how to parallelize C code using OpenMP, the algorith I'm trying to parallelize is the shallow water equations algorithm, and although with a simple <code>#pragma omp parallel for</code> in the most critical loop I've gained nearly 40% more performance I know that my implementation is very poor and I'm not milking the cores as I should. The structure of the code is simple: a 'main' that allocates memory and initializes some matrixes and arrays and calls a function called solver that does all the work, where I putted the <code>#pragma omp parallel for</code>. </p>\n\n<p>I was thinking that I could boost the performance using a parallel section where the memory is allocated and initialized so every thread has all the data, but when i run the program I don't have any boost, and since I'm a rookie with this I don't know if my thinking was bad or the bad thing was my implementation. I'll apreciate some help or a hint that could boost the performance of the algorithm. This is my homework and I don't want someone to do it for me, just a little help that can make me go forward...</p>\n\n<hr>\n\n<p>I'll paste the code for better understanding:</p>\n\n<p>MAIN FUNCTION (Allocations and initializations)</p>\n\n<pre><code>int main(int argc, char **argv) {\n\n  long int i, j, m, n, M, N;\n  char *ptr;\n  long int s;\n  int flag, verbose;\n  double *Q;\n  double *x, *y;\n  double **ffx, **nFx, **ffy, **nFy;\n  double dx, dt, epsi, delta, dy, tend, tmp, stime;\n\n /* Default values to use: m volumes in the x-direction and n volumes in the y-direction    \n  M = 1000;\n  N = 1000;\n\n  /* create file and verbose flags */\n  .......\n  .......\n\n  /* Parse command line options */\n  .......\n  .......\n\n\n  epsi = 2.0;\n  delta = 0.5;\n  dx = (xend - xstart) / (double) M;\n  dy = (yend - ystart) / (double) N;\n  dt = dx / sqrt( 9.81 * 5.0);\n  tend = 0.1;\n\n  /* Add two ghost volumes at each side of the domain */\n  m = M + 2;\n  n = N + 2;\n\n  /* Allocate memory for the domain */\n\n  /*HERE IS WHRE I PUT THE PRAGMA FOR PARALLEL INITIALIZATION AND    ALLOCATIONS*/\n  #pragma omp parallel\n  {\n  Q = (double *) malloc(m * n * cell_size *  sizeof(double));\n\n  x = (double *) malloc(m * sizeof(double));\n  y = (double *) malloc(n * sizeof(double));    \n\n  /* Allocate memory for fluxes */\n  ffx = (double **) malloc(cell_size * sizeof(double *));\n  ffy = (double **) malloc(cell_size * sizeof(double *));\n  nFx = (double **) malloc(cell_size * sizeof(double *));\n  nFy = (double **) malloc(cell_size * sizeof(double *));\n\n  ffx[0] = (double *) malloc(cell_size * m * sizeof(double));\n  nFx[0] = (double *) malloc(cell_size * m * sizeof(double));\n  ffy[0] = (double *) malloc(cell_size * n * sizeof(double));\n  nFy[0] = (double *) malloc(cell_size * n * sizeof(double));\n\n  for (i = 0; i &lt; cell_size; i++) {\n    ffx[i] =  ffx[0] + i * m;\n    nFx[i] =  nFx[0] + i * m;\n    ffy[i] =  ffy[0] + i * n;\n    nFy[i] =  nFy[0] + i * n;\n  }\n\n  for (i = 0,tmp= -dx/2 + xstart; i &lt; m; i++, tmp += dx)\n    x[i] = tmp;\n\n  for (i = 0,tmp= -dy/2 + ystart; i &lt; n; i++, tmp += dy)\n    y[i] = tmp;\n\n  /* Set initial Gauss hump */\n  for (i = 0; i &lt; m; i++) {\n    for (j = 0; j &lt; n; j++) {\n      Q(0, i, j) = 4.0;\n      Q(1, i, j) = 0.0;\n      Q(2, i, j) = 0.0;\n    }\n  }\n\n  for (i = 1; i &lt; m-1; i++) {\n    for (j = 1; j &lt; n-1; j++) {\n      Q(0, i, j) = 4.0 + epsi * exp(-(pow(x[i] - xend / 4.0, 2) + pow(y[j] - yend / 4.0, 2)) /\n                      (pow(delta, 2)));\n    }\n  }\n  }\n\n  //  Record start time\n  stime = gettime();\n  /*THIS IS THE FUNCTION WHERE THE 'WORK' IS DONE*/\n  solver(Q, ffx, ffy, nFx, nFy, m, n, tend, dx, dy, dt);`\n}\n</code></pre>\n\n<p>SOLVER FUNCTION (Critical Section)</p>\n\n<pre><code>/*\n  This is the main solver routine. \n*/\nvoid solver(double *Q, double **ffx, double **ffy, double **nFx, double **nFy,\n        int m, int n, double tend, double dx, double dy, double dt) {\n  double bc_mask[3] = {1.0, -1.0, -1.0};\n  double time;\n  int i, j, k, steps;\n\n  steps = ceil(tend / dt);  \n  for (i = 0, time = 0.0; i &lt; steps; i++, time += dt) { \n\n    /* Apply boundary condition */ \n    #pragma omp parallel for private(j) num_threads (NTHR)\n    for (k = 0; k &lt; cell_size; k++)    \n    {\n      for (j = 1; j &lt; n - 1 ; j++)  \n      {\n    Q(k, 0, j) = bc_mask[k] *  Q(k, 1, j);\n    Q(k, m-1, j) = bc_mask[k] *  Q(k, m-2, j);\n      }\n    }\n    #pragma omp parallel for private(j) num_threads (NTHR)\n    for (k = 0; k &lt; cell_size; k++)  \n    {\n      for (j = 0; j &lt; m; j++) \n      {\n    Q(k, j, 0) = bc_mask[k] * Q(k, j, 1);\n    Q(k, j, n-1) = bc_mask[k] * Q(k, j, n-2);\n      }\n    }\n\n    /* Update all volumes with the Lax-Friedrich's scheme */     \n    laxf_scheme_2d(Q, ffx, ffy, nFx, nFy, m, n, dx, dy, dt);  \n\n  }\n}\n\n/*\n  This is the Lax-Friedrich's scheme for updating volumes\n*/\nvoid laxf_scheme_2d(double *Q, double **ffx, double **ffy, double **nFx, double **nFy,\n            int m, int n, double dx, double dy, double dt) {\n  int i, j, k;\n\n  /* Calculate and update fluxes in the x-direction */\n  #pragma omp parallel for private(k,j) num_threads (NTHR)\n  for (i = 1; i &lt; n; i++) {\n    fx(Q, ffx, m, n, i);\n    for (k = 0; k &lt; cell_size;  k++) \n      for (j = 1; j &lt; m; j++)\n    nFx[k][j] = 0.5 * ((ffx[k][j-1] + ffx[k][j]) - dx/dt * (Q(k, j, i) - Q(k, j-1, i)));\n    for (k = 0; k &lt; cell_size;  k++) \n      for (j = 1; j &lt; m-1; j++)\n    Q(k, j, i) = Q(k, j, i)  - dt/dx * ((nFx[k][j+1] - nFx[k][j]));\n\n  }\n\n  /* Calculate and update fluxes in the y-direction */\n  #pragma omp parallel for private(k,j) num_threads (NTHR)\n  for (i = 1; i &lt; m; i++) {\n    fy(Q, ffy, m, n, i);\n    for (k = 0; k &lt; cell_size; k++)\n      for (j = 1; j &lt; n; j++)\n    nFy[k][j] = 0.5 * ((ffy[k][j-1] + ffy[k][j]) - dy/dt * (Q(k, i, j) - Q(k, i, j -1)));\n    for (k = 0; k &lt; cell_size; k++)\n      for (j = 1; j &lt;  n-1; j++) \n    Q(k,i,j) = Q(k,i,j) -  dt/dy * ((nFy[k][j+1]  -  nFy[k][j]));\n  }\n\n}\n</code></pre>\n\n<p>As I understand there is no data dependency in the loops of the solver function and it's sub-functions, and since putting a parallel region in the allocation and data initialization did nothing, I don't know how to continue.</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["android", "c", "scalability", "hole-punching", "nat-traversal"], "answers": [{"tags": [], "owner": {"reputation": 6873, "user_id": 5131711, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z5oP7.png?s=128&g=1", "display_name": "followed Monica to Codidact", "link": "https://stackoverflow.com/users/5131711/followed-monica-to-codidact"}, "is_accepted": false, "score": 0, "last_activity_date": 1459930109, "creation_date": 1459930109, "answer_id": 36445104, "question_id": 36444522, "link": "https://stackoverflow.com/questions/36444522/working-behind-the-nats-a-scheme-for-device-communication/36445104#36445104", "title": "Working behind the NATs - a scheme for device communication", "body": "<p>As long as both endpoints are behind different NATs you don't control, it won't work reliably. No way. You need a relay.</p>\n"}, {"comments": [{"owner": {"reputation": 201, "user_id": 5400116, "user_type": "registered", "profile_image": "https://graph.facebook.com/912458155501271/picture?type=large", "display_name": "rojarand", "link": "https://stackoverflow.com/users/5400116/rojarand"}, "edited": false, "score": 0, "creation_date": 1459948416, "post_id": 36445363, "comment_id": 60517223, "body": "One device communicates with max 10 smartphones. Lets call it system. There may be up to 500k such systems, and solution must be able to handle it."}], "tags": [], "owner": {"reputation": 10563, "user_id": 1104328, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/df0790774838286ad0d93567ae1fcf56?s=128&d=identicon&r=PG&f=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/1104328/harry"}, "is_accepted": true, "score": 0, "last_activity_date": 1459931298, "last_edit_date": 1459931298, "creation_date": 1459930823, "answer_id": 36445363, "question_id": 36444522, "link": "https://stackoverflow.com/questions/36444522/working-behind-the-nats-a-scheme-for-device-communication/36445363#36445363", "title": "Working behind the NATs - a scheme for device communication", "body": "<p>What you're describing is effectively peer to peer or a subset thereof and to get that working reliably is a lot of work. Where peer to peer fails you normally fall back to a relay server. It can be done but the amount work to do it is quite large. Your list of requirements is also quite steep...</p>\n\n<blockquote>\n  <p>100% reliable</p>\n</blockquote>\n\n<p>There's no such thing as a reliable connection. You need to build in fault tolerance to the app to make it reliable.</p>\n\n<blockquote>\n  <p>relatively low-latency (3 seconds absolute max)</p>\n</blockquote>\n\n<p>Quite often you will be limited by physics ie speed of light. Low latency is hard.</p>\n\n<blockquote>\n  <p>scalable (say up to 500k devices in the future)</p>\n</blockquote>\n\n<p>I don't know what this means ie is this concurrent connections?</p>\n\n<p>From wikipedia on NAT Traversal</p>\n\n<blockquote>\n  <p>Many techniques exist, but no single method works in every situation\n  since NAT behavior is not standardized. Many NAT traversal techniques\n  require assistance from a server at a publicly routable IP address.\n  Some methods use the server only when establishing the connection,\n  while others are based on relaying all data through it, which adds\n  bandwidth costs and increases latency, detrimental to real-time voice\n  and video communications.</p>\n</blockquote>\n\n<p>ie it will work sometimes ie it will be unreliable so you need to user several methods to make it reliable.</p>\n"}], "owner": {"reputation": 201, "user_id": 5400116, "user_type": "registered", "profile_image": "https://graph.facebook.com/912458155501271/picture?type=large", "display_name": "rojarand", "link": "https://stackoverflow.com/users/5400116/rojarand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "accepted_answer_id": 36445363, "answer_count": 2, "score": 0, "last_activity_date": 1459931298, "creation_date": 1459928460, "question_id": 36444522, "link": "https://stackoverflow.com/questions/36444522/working-behind-the-nats-a-scheme-for-device-communication", "title": "Working behind the NATs - a scheme for device communication", "body": "<p>I'm trying to come up with a solution enabling data exchange between an embedded device (xMega128(C) based) and an Android apps. The catch is the data exchange must be conducted via the Internet and both the embedded device and the mobile device running the app can be behind different NATs, connecting using different ISPs, 3G, LTE, etc.</p>\n\n<p>I tried UDP hole punching, but it does not work with symmetric NATs. Multi hole punching with prediction also does not guarantee 100% reliabilty. I also considered using ICE, but ICE C libraries (pjnath, libnice) are incompatible with the hardware chosen (libs require os). Right now I'm considering implementing or use (if exists) traffic relay server, but that just seems like a hack to me.</p>\n\n<p>Are there any other options I hadn't considered? Any help will be appreciated.</p>\n\n<p>Ideally, the communication scheme would be:</p>\n\n<ul>\n<li><p>100% reliable</p></li>\n<li><p>relatively low-latency (3 seconds absolute max)</p></li>\n<li><p>scalable (say up to 500k devices in the future)</p></li>\n<li><p>initializable by both the app and the device</p></li>\n<li><p>multi-user \u2013 one device would connect to many android apps</p></li>\n</ul>\n\n<p>Also, if this helps, the data exchange between the device and the app is not very high-intensity \u2013 roughly 1 session per hour, ~50 messages per session with 10-20 seconds between them, each message weighing around 100 bytes.</p>\n"}, {"tags": ["c", "bzip2"], "comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1530259536, "post_id": 36444263, "comment_id": 89181725, "body": "Also see the Bzip manual and <a href=\"http://www.bzip.org/1.0.3/html/util-fns.html\" rel=\"nofollow noreferrer\">Utility functions | BZ2_bzBuffToBuffDecompress</a>: <i>&quot;Because the compression ratio of the compressed data cannot be known in advance, there is no easy way to guarantee that the output buffer will be big enough. You may of course make arrangements in your code to record the size of the uncompressed data, but such a mechanism is beyond the scope of this library...&quot;</i>"}], "answers": [{"tags": [], "owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "is_accepted": false, "score": 0, "last_activity_date": 1459928910, "creation_date": 1459928910, "answer_id": 36444686, "question_id": 36444263, "link": "https://stackoverflow.com/questions/36444263/how-can-we-learn-the-size-of-uncompressed-data-of-a-bzip2-block/36444686#36444686", "title": "How can we learn the size of uncompressed data of a bzip2 block?", "body": "<p>There is only information about the block size that is used in the encoding after the initial run length encoding has been done. So, as the article mentions, in the worst case you may get 46MB of decompressed data from one block and all you know is that the output before RLE reversal is 900kB.</p>\n\n<p>So, in effect, the only way to do this is to decompress the file at least to the RLE stage and calculate the size based on that.</p>\n"}, {"comments": [{"owner": {"reputation": 469, "user_id": 5349543, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/zVJMH.jpg?s=128&g=1", "display_name": "Zeeshan Mahmood", "link": "https://stackoverflow.com/users/5349543/zeeshan-mahmood"}, "edited": false, "score": 0, "creation_date": 1459932908, "post_id": 36444694, "comment_id": 60505335, "body": "Perhaps can we change the source code of bzip2 to make this information available? If you know the area in code which should be manipulated?"}, {"owner": {"reputation": 10563, "user_id": 1104328, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/df0790774838286ad0d93567ae1fcf56?s=128&d=identicon&r=PG&f=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/1104328/harry"}, "reply_to_user": {"reputation": 469, "user_id": 5349543, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/zVJMH.jpg?s=128&g=1", "display_name": "Zeeshan Mahmood", "link": "https://stackoverflow.com/users/5349543/zeeshan-mahmood"}, "edited": false, "score": 0, "creation_date": 1459960635, "post_id": 36444694, "comment_id": 60526729, "body": "Yes you could change it. You should get an example of what you&#39;ve tried to do already and post it in your question."}, {"owner": {"reputation": 469, "user_id": 5349543, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/zVJMH.jpg?s=128&g=1", "display_name": "Zeeshan Mahmood", "link": "https://stackoverflow.com/users/5349543/zeeshan-mahmood"}, "edited": false, "score": 0, "creation_date": 1460007228, "post_id": 36444694, "comment_id": 60546021, "body": "I looked into code but could not find a way, thats why asked if someone would know a way."}, {"owner": {"reputation": 10563, "user_id": 1104328, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/df0790774838286ad0d93567ae1fcf56?s=128&d=identicon&r=PG&f=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/1104328/harry"}, "reply_to_user": {"reputation": 469, "user_id": 5349543, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/zVJMH.jpg?s=128&g=1", "display_name": "Zeeshan Mahmood", "link": "https://stackoverflow.com/users/5349543/zeeshan-mahmood"}, "edited": false, "score": 0, "creation_date": 1460007553, "post_id": 36444694, "comment_id": 60546176, "body": "Are you prepared to fork bzip2? Anything you create will not work with any other bzip2 that expects the standard header."}, {"owner": {"reputation": 469, "user_id": 5349543, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/zVJMH.jpg?s=128&g=1", "display_name": "Zeeshan Mahmood", "link": "https://stackoverflow.com/users/5349543/zeeshan-mahmood"}, "edited": false, "score": 0, "creation_date": 1460007777, "post_id": 36444694, "comment_id": 60546280, "body": "I don&#39;t want to change bzip2 header, but get this information and send it in some other way to the decompressor tool."}], "tags": [], "owner": {"reputation": 10563, "user_id": 1104328, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/df0790774838286ad0d93567ae1fcf56?s=128&d=identicon&r=PG&f=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/1104328/harry"}, "is_accepted": true, "score": 1, "last_activity_date": 1459928930, "creation_date": 1459928930, "answer_id": 36444694, "question_id": 36444263, "link": "https://stackoverflow.com/questions/36444263/how-can-we-learn-the-size-of-uncompressed-data-of-a-bzip2-block/36444694#36444694", "title": "How can we learn the size of uncompressed data of a bzip2 block?", "body": "<blockquote>\n  <p>bzip2 header format for a block also does not contain any information\n  about what will be the size of decompressed block. See wikipedia page\n  for the bzip2 file format.</p>\n</blockquote>\n\n<p>The above statement answers your own question. You can't because it's not available before decompression. It does not encode the block size before compression anywhere in the header, comfirmed here...</p>\n\n<p><a href=\"http://www.forensicswiki.org/wiki/Bzip2\" rel=\"nofollow\">http://www.forensicswiki.org/wiki/Bzip2</a></p>\n\n<p>You must decompress each bloc in order to know it's size.</p>\n"}], "owner": {"reputation": 469, "user_id": 5349543, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/zVJMH.jpg?s=128&g=1", "display_name": "Zeeshan Mahmood", "link": "https://stackoverflow.com/users/5349543/zeeshan-mahmood"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 390, "favorite_count": 0, "accepted_answer_id": 36444694, "answer_count": 2, "score": 4, "last_activity_date": 1459928930, "creation_date": 1459927679, "last_edit_date": 1495541697, "question_id": 36444263, "link": "https://stackoverflow.com/questions/36444263/how-can-we-learn-the-size-of-uncompressed-data-of-a-bzip2-block", "title": "How can we learn the size of uncompressed data of a bzip2 block?", "body": "<p>bzip2 compresses the data in blocks, where each block starts with a magic number <a href=\"https://stackoverflow.com/questions/18262703/bzip2-block-header-1aysy\">1AY&amp;SY</a>.</p>\n\n<p>Can we determine the size of uncompressed data behind each block??</p>\n\n<p>One way to do is to decompress the bzip2 file <a href=\"https://stackoverflow.com/questions/1497319/only-decompress-a-specific-bzip2-block?lq=1\">block-by-block</a> and then find the size of each decompressed block. <strong>BUT</strong> I am trying to find a way which does not involve decompression and I can learn the size of uncompressed block during compression time.</p>\n\n<p>The use case of it is that we need to tell the decompressing tool what would be the maximum size of decompressed block, so that it allocates sufficient memory. The decompression will be done in an embedded platform, so we have limited resources.</p>\n\n<p>bzip2 header format for a block also does not contain any information about what will be the size of decompressed block. See wikipedia <a href=\"https://en.wikipedia.org/wiki/Bzip2#File_format\" rel=\"nofollow noreferrer\">page</a> for the bzip2 file format.</p>\n\n<p>Note: I need a solution in terms of code in C, as I am using bzip2 in my console app developed in C and it runs on Linux and Windows both.</p>\n"}, {"tags": ["c", "codeblocks", "standard-library"], "comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1459929237, "post_id": 36444091, "comment_id": 60503082, "body": "Your IDE settings are really wrong (or Code::Blocks is a bad IDE), since <code>private</code> and <code>priority_queue</code> are not even C-related, but C++ words."}, {"owner": {"reputation": 135, "user_id": 2736299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d063e14c9534018588a43183fd977e34?s=128&d=identicon&r=PG&f=1", "display_name": "RandomUser762", "link": "https://stackoverflow.com/users/2736299/randomuser762"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1459967423, "post_id": 36444091, "comment_id": 60530965, "body": "Right exactly. I made sure I selected &quot;C&quot; when creating the new file in the project and not even &quot;C++&quot;. But even if I had selected C++, the inclusion of the &lt;stdio.h&gt; header file in a C++ context should still read the header and make an appropriate popup, shouldn&#39;t it?"}], "answers": [{"comments": [{"owner": {"reputation": 135, "user_id": 2736299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d063e14c9534018588a43183fd977e34?s=128&d=identicon&r=PG&f=1", "display_name": "RandomUser762", "link": "https://stackoverflow.com/users/2736299/randomuser762"}, "edited": false, "score": 0, "creation_date": 1459967513, "post_id": 36445300, "comment_id": 60531020, "body": "Hrm. Thanks for the headsup. I initially did have 13.12 (The default install from the usual apt-get repo) and it didn&#39;t work there either...very frustrating. Seems like a neat IDE. I may try eclipse though I hear eclipse CDT calltips and popups are also wonky."}], "tags": [], "owner": {"reputation": 27, "user_id": 6165265, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-BEmfFkEj4i0/AAAAAAAAAAI/AAAAAAAAE8M/Ph4bKNF7pRI/photo.jpg?sz=128", "display_name": "wifi110", "link": "https://stackoverflow.com/users/6165265/wifi110"}, "is_accepted": false, "score": 0, "last_activity_date": 1459930638, "creation_date": 1459930638, "answer_id": 36445300, "question_id": 36444091, "link": "https://stackoverflow.com/questions/36444091/codeblocks-autocomplete-calltips-not-working-for-c-standard-library-functions/36445300#36445300", "title": "codeblocks autocomplete / calltips not working for C standard library functions", "body": "<p>The new Code::Blocks IDE is not so polished on Ubuntu yet. You can try reinstalling it. And if it didn't work try reverting to 13.12.</p>\n"}], "owner": {"reputation": 135, "user_id": 2736299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d063e14c9534018588a43183fd977e34?s=128&d=identicon&r=PG&f=1", "display_name": "RandomUser762", "link": "https://stackoverflow.com/users/2736299/randomuser762"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 529, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1459930638, "creation_date": 1459927150, "question_id": 36444091, "link": "https://stackoverflow.com/questions/36444091/codeblocks-autocomplete-calltips-not-working-for-c-standard-library-functions", "title": "codeblocks autocomplete / calltips not working for C standard library functions", "body": "<p>I'm trying to start using code::blocks to do some C programming in just to learn. I was hoping to use the codecompletion / calltips feature (e.g. when typing say \"printf\" it popsup a handy dropdown box that shows the parameters.</p>\n\n<p>I've made a new project and a new file in that project called \"hello.c\"</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main(){\n  int test=0;\n  printf(\"%d\",test);\n  return 0;\n}\n</code></pre>\n\n<p>but midway through typing prin---only \"priority_queue and private\" show up, no printf functions, and nothing happens when pressing ctrl-j, ctrl-space, alt-shift-space, ctrl-n or p nothing works. I've tried reparsing the project. I initially had 13.12 version installed because that's what Ubuntu (14.04.4LTS) had but then I installed version 16.01 by mucking with the apt-get ppas. That version also doesn't work. I've tried disabling and reenabling the code completion plugin and I've made sure under settings->editor-> that code completion box is checked.</p>\n\n<p>What am I doing wrong here? Any help would be very appreciated. Thanks so much!</p>\n"}, {"tags": ["c", "linux", "gcc"], "comments": [{"owner": {"reputation": 1141, "user_id": 515212, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/th8Br.png?s=128&g=1", "display_name": "martinkunev", "link": "https://stackoverflow.com/users/515212/martinkunev"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1459926651, "post_id": 36443842, "comment_id": 60501485, "body": "@SouravGhosh That way the specified rpath will be encoded in the binary and later, in production the binary will look for the library at the same place."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1459926719, "post_id": 36443842, "comment_id": 60501521, "body": "I think I misread the question. Comment removed."}, {"owner": {"reputation": 9307, "user_id": 705086, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/fbeee3d76a35f9de8847f36ee51c28a2?s=128&d=identicon&r=PG", "display_name": "Dima Tisnek", "link": "https://stackoverflow.com/users/705086/dima-tisnek"}, "edited": false, "score": 0, "creation_date": 1459927021, "post_id": 36443842, "comment_id": 60501715, "body": "&quot;link path&quot; and &quot;run path&quot; are different; The earlier is specified <code>-L&#47;somewhere</code> and the latter <code>-Wl,rpath,&#47;somwhere</code>"}], "answers": [{"comments": [{"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 1, "creation_date": 1459929278, "post_id": 36444019, "comment_id": 60503116, "body": "This is close but, IMHO, not quite it, as it still does search and relies on the name of the library starting with lib. I&#39;d rather just hardcode an arbitrary path to a *.so file."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 3, "last_activity_date": 1459926933, "creation_date": 1459926933, "answer_id": 36444019, "question_id": 36443842, "link": "https://stackoverflow.com/questions/36443842/linking-a-shared-library-from-a-different-place-than-its-intended-final-location/36444019#36444019", "title": "Linking a shared library from a different place than its intended final location", "body": "<p>You need <em>two</em> options to make it work:</p>\n\n<p>First you need to use the <code>-L</code> option to tell the linker where the library is actually located at the moment.</p>\n\n<p>Then you need to use the <code>-rpath</code> <em>linker</em> option to tell where the final location will be. Unfortunately this is a <a href=\"https://sourceware.org/binutils/docs/ld/Options.html#Options\" rel=\"nofollow\">linker-specific option</a> which means you need to use the <code>-Wl</code> option to the GCC frontend program.</p>\n\n<p>So the command should look something like</p>\n\n<pre><code>$ gcc object.o files.o -o target \\\n    -L/current/path/to/library -Wl,-rpath,/final/path/to/library -llibrary\n</code></pre>\n\n<p>Note that the two paths can of course be the same.</p>\n"}], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1459929470, "creation_date": 1459926417, "last_edit_date": 1459929470, "question_id": 36443842, "link": "https://stackoverflow.com/questions/36443842/linking-a-shared-library-from-a-different-place-than-its-intended-final-location", "title": "Linking a shared library from a different place than its intended final location", "body": "<p>Suppose I have a <code>main.lo</code> which I'd like to link against library  <code>foo.so</code>. The linker should always look for <code>foo.so</code> at <code>/foo/bar/lib.so</code> (fixed path, no search), but I only have <code>lib.so</code> in my home directory and not in <code>/foo/bar/</code>, which is a protected directory I can't write to myself.</p>\n\n<p>Is it possible to link the lib like this?</p>\n\n<p><strong>Edit</strong>:\nBelow is a simple example using <code>/tmp</code> instead of <code>/foo/bar</code>. Can you make it work by modifying the build script?</p>\n\n<p><strong>main.c</strong></p>\n\n<pre><code>void foo();\nint main(){\n  foo();\n  return 0;\n}\n</code></pre>\n\n<p><strong>foo.c</strong> (multiple-file libraries are overrated)</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid foo(){\n  puts(\"foo\");\n}\n</code></pre>\n\n<p><strong>build.sh</strong></p>\n\n<pre><code>#!/bin/sh\nset -x\ngcc -c -fPIC main.c -o main.lo\ngcc -c -fPIC foo.c -o foo.lo\ngcc -shared -o foo.so foo.lo\n\ngcc -o pwd main.lo \"$PWD/foo.so\"\nrm -f /tmp/foo.so\n\n#? Link into dest, against /tmp/foo.so but use \"$PWD/foo.so\"\n\n\ncp -a foo.so /tmp/foo.so\n\necho pwd:\n./pwd   #this works\necho dest:\n./dest\n</code></pre>\n"}, {"tags": ["c", "class", "oop"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1459926574, "post_id": 36443821, "comment_id": 60501446, "body": "There are none. Class-like functionality can be <i>emulated</i> through different means, but there are no equivalents."}, {"owner": {"reputation": 186, "user_id": 3938720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jYyg2.jpg?s=128&g=1", "display_name": "mvidovic", "link": "https://stackoverflow.com/users/3938720/mvidovic"}, "edited": false, "score": 0, "creation_date": 1459926628, "post_id": 36443821, "comment_id": 60501472, "body": "I can only think of structs ..."}, {"owner": {"reputation": 469, "user_id": 6012315, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d7f2484ba51df08ea30569f351afe958?s=128&d=identicon&r=PG&f=1", "display_name": "Schafwolle", "link": "https://stackoverflow.com/users/6012315/schafwolle"}, "edited": false, "score": 2, "creation_date": 1459929433, "post_id": 36443821, "comment_id": 60503206, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/1403890/how-do-you-implement-a-class-in-c\">How do you implement a class in C?</a>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1459932928, "post_id": 36443821, "comment_id": 60505352, "body": "The OO definition of a class is something like: an autonomous object which doesn&#39;t depend on the outside world, but is only concerned with it&#39;s own designated task. The class hides part of the implementation that aren&#39;t relevant to the caller through private encapsulation of data and functions. A class can get inherited. Given this definition, C has classes and can be used for OO programming. It does not have a class keyword, however. Note that there is no such thing as &quot;object-oriented languages&quot;. There are only languages with or without built-in support for object-oriented features."}], "answers": [{"tags": [], "owner": {"reputation": 1389, "user_id": 5907817, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/yHpaX.jpg?s=128&g=1", "display_name": "SamGhatak", "link": "https://stackoverflow.com/users/5907817/samghatak"}, "is_accepted": false, "score": 6, "last_activity_date": 1459926639, "creation_date": 1459926639, "answer_id": 36443925, "question_id": 36443821, "link": "https://stackoverflow.com/questions/36443821/what-is-the-equivalent-of-class-in-pure-c/36443925#36443925", "title": "What is the equivalent of class in pure C", "body": "<p>There is nothing equivalent to <code>classes</code>. Its a totally different paradigm. You can use <code>structures</code> in C. Have to code accordingly to make structures do the job.</p>\n"}, {"comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1459927855, "post_id": 36443947, "comment_id": 60502224, "body": "Somebody seems to have just switched their upvote to a downvote. Any particular reason? Some issue with the lengthy Python example, perhaps?"}], "tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": true, "score": 13, "last_activity_date": 1459927408, "last_edit_date": 1459927408, "creation_date": 1459926701, "answer_id": 36443947, "question_id": 36443821, "link": "https://stackoverflow.com/questions/36443821/what-is-the-equivalent-of-class-in-pure-c/36443947#36443947", "title": "What is the equivalent of class in pure C", "body": "<p>There is none. This fact was the original motivation for the development of C++, back when C++ was called \"C with Classes\". The closest thing you can get is a <code>struct</code>.</p>\n\n<hr>\n\n<p>There is a feature in C intended to facilitate a sort of pseudo-inheritance, but it doesn't come close to an actual object-oriented class system. A pointer to a struct can legally be cast to and from a pointer to the struct's first member, so you can sort of \"extend\" a struct type A by having another struct type B start with a member of type A.</p>\n\n<p>For example, you can have a <code>PyObject</code> struct type and a bunch of struct types that all start with a <code>PyObject</code> member, say <code>PyIntObject</code>, <code>PyDictObject</code>, etc:</p>\n\n<pre><code>typedef struct {\n    ...\n} PyObject;\n\ntypedef struct {\n    PyObject ob_base;\n    // more members...\n} PyIntObject;\n\ntypedef struct {\n    PyObject ob_base;\n    // more members...\n} PyDictObject;\n</code></pre>\n\n<p>You could then pass <code>PyIntObject</code>s and <code>PyDictObject</code>s around with <code>PyObject</code> pointers and use the data in the <code>PyObject</code> part to tell what the type of the enclosing struct is.</p>\n\n<p>As you may have guessed from the names, I've taken this example from Python, where this mechanism is used to implement Python's object-oriented type system on top of C.</p>\n"}, {"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1459932541, "post_id": 36444450, "comment_id": 60505067, "body": "Nice example. For better type safety you could replace the <code>void   * obj;</code> with a pointer to incomplete type. That is, in the header add <code>typedef struct cat_obj cat_obj;</code>, and change the struct <code>struct Cat {   cat_obj * obj;</code>, The <code>cat_obj</code> will still have full private encapsulation.   CatOps * ops; };`."}, {"owner": {"reputation": 10563, "user_id": 1104328, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/df0790774838286ad0d93567ae1fcf56?s=128&d=identicon&r=PG&f=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/1104328/harry"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1459960537, "post_id": 36444450, "comment_id": 60526661, "body": "That would mean I wouldn&#39;t be able to change the object in the <code>.c</code> file without aliasing it or <code>cat_obj</code> would need to be a union of types."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1460011943, "post_id": 36444450, "comment_id": 60548369, "body": "You shouldn&#39;t change the object type, it always points to a <code>cat_obj</code>. So if <code>Cat</code> is inherited by <code>FluffyCat</code>, then the constructor in <code>FluffyCat</code> would use a completely new definition of the private data. Usually I solve such things by creating a second header file. <code>cat.h</code> remains the user interface with the incomplete type declaration of <code>cat_obj</code>, and <code>cat_inherit.h</code> is a private header not available to the caller, containing the type definition. Then <code>fluffy_cat.c</code> can include <code>cat_inherit.h</code> and create its own typedef, containing one <code>cat_obj</code> and one <code>fluff_obj</code>."}, {"owner": {"reputation": 10563, "user_id": 1104328, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/df0790774838286ad0d93567ae1fcf56?s=128&d=identicon&r=PG&f=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/1104328/harry"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1460012471, "post_id": 36444450, "comment_id": 60548666, "body": "@Lundin I&#39;d like to see an example of what you&#39;re doing. I&#39;m probably misunderstanding something but it looks like you&#39;re aliasing things, if not then an example would help, these comments suck for anything remotely complicated."}], "tags": [], "owner": {"reputation": 10563, "user_id": 1104328, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/df0790774838286ad0d93567ae1fcf56?s=128&d=identicon&r=PG&f=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/1104328/harry"}, "is_accepted": false, "score": 6, "last_activity_date": 1589696718, "last_edit_date": 1589696718, "creation_date": 1459928252, "answer_id": 36444450, "question_id": 36443821, "link": "https://stackoverflow.com/questions/36443821/what-is-the-equivalent-of-class-in-pure-c/36444450#36444450", "title": "What is the equivalent of class in pure C", "body": "<p>You can swap \"Class\" in C++ for \"struct\". </p>\n\n<p>I'm not saying you should but one mans object is another mans struct with some functions that operate on that struct and where the first parameter to the function is the struct itself. Obviously C++ adds <b><i>some extra bits</i></b>. C and opaque pointers are also <code>Objects</code> and very useful ones at that. </p>\n\n<pre><code>#include &lt;iostream&gt;          \n\nstruct Cat {\npublic:\n    Cat(int initialAge);     // constructor\n    ~Cat();                  // destructor\n\n    int GetAge();                \n private:                   // begin private section\n    int itsAge;              // member variable\n};\n\nCat::Cat(int initialAge) {\n  itsAge = initialAge;\n} \n\nint Cat::GetAge() {\n  return itsAge;             \n}\n\nint main(void) {            \n  Cat *cat = new Cat(1);     \n  std::cout &lt;&lt; \"This cat declared as a struct is \" &lt;&lt; cat-&gt;GetAge() &lt;&lt; \" years old\" &lt;&lt;std::endl;\n  return 1;\n}\n</code></pre>\n\n<p>You can achieve a similar thing in C with a bit more work... Header file is</p>\n\n<pre><code>#ifndef CAT_H\n#define CAT_H\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\ntypedef struct Cat Cat;\n\ntypedef struct CatOps {\n  int (* GetAge )();\n} CatOps;\n\nstruct Cat {\n  void   * obj;\n  CatOps * ops;\n};\n\nCat * new_cat(int age);\nvoid  delete_cat(Cat * cat);\n\n#endif /* CAT_H */\n</code></pre>\n\n<p>.c file is</p>\n\n<pre><code>#include \"cat.h\"\n#include &lt;assert.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\ntypedef struct cat_obj {\n  int age;\n} cat_obj;\n\nint get_age();\n\nstatic CatOps CAT_OPS = { \n  .GetAge = get_age,\n};\n\nCat * new_cat(int age) {\n  Cat     * imp;\n  cat_obj * obj;\n  imp = malloc(sizeof(*imp));\n  obj = malloc(sizeof(*obj));\n  imp-&gt;obj = obj;\n  imp-&gt;ops = &amp;CAT_OPS;\n  return (Cat*)imp;\n}\n\nvoid delete_cat(Cat *cat) {\n  free(cat-&gt;obj);\n  free(cat);\n}\n\nstatic void get_age(Cat *cat) {\n  cat_obj *c = (cat_obj*)cat-&gt;obj;\n}\n</code></pre>\n\n<p>Note, I've not tested it but if you know C/C++ you should recognize the idiom.</p>\n"}], "owner": {"reputation": 89, "user_id": 4444977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b51bf3dadac1527aea52ebac078445b?s=128&d=identicon&r=PG&f=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/4444977/ruslan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6434, "favorite_count": 3, "closed_date": 1459957037, "accepted_answer_id": 36443947, "answer_count": 3, "score": 6, "last_activity_date": 1589696718, "creation_date": 1459926343, "last_edit_date": 1459927535, "question_id": 36443821, "link": "https://stackoverflow.com/questions/36443821/what-is-the-equivalent-of-class-in-pure-c", "closed_reason": "Needs more focus", "title": "What is the equivalent of class in pure C", "body": "<p>In OOP languages, we have classes. Is there an equivalent to class in pure C? </p>\n"}, {"tags": ["c", "floating-point", "language-lawyer"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1459925566, "post_id": 36443556, "comment_id": 60500887, "body": "Please define <i>converted</i>."}, {"owner": {"reputation": 104340, "user_id": 23649, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7e9f543f0ffdb7c9a899e628fe76e7f3?s=128&d=identicon&r=PG", "display_name": "jtbandes", "link": "https://stackoverflow.com/users/23649/jtbandes"}, "edited": false, "score": 3, "creation_date": 1459925825, "post_id": 36443556, "comment_id": 60501025, "body": "Did you <b>try it</b>? What problems are you having?"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 104340, "user_id": 23649, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7e9f543f0ffdb7c9a899e628fe76e7f3?s=128&d=identicon&r=PG", "display_name": "jtbandes", "link": "https://stackoverflow.com/users/23649/jtbandes"}, "edited": false, "score": 8, "creation_date": 1459925844, "post_id": 36443556, "comment_id": 60501036, "body": "@jtbandes: this is a deep question. It will be, at best, implementation defined."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1459925852, "post_id": 36443556, "comment_id": 60501040, "body": "@SouravGhosh I would assume the C standard definition of conversion, as explained in chapter 6.3."}, {"owner": {"reputation": 104340, "user_id": 23649, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7e9f543f0ffdb7c9a899e628fe76e7f3?s=128&d=identicon&r=PG", "display_name": "jtbandes", "link": "https://stackoverflow.com/users/23649/jtbandes"}, "edited": false, "score": 0, "creation_date": 1459925876, "post_id": 36443556, "comment_id": 60501050, "body": "That&#39;s fine, but this question is still unclear."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 104340, "user_id": 23649, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7e9f543f0ffdb7c9a899e628fe76e7f3?s=128&d=identicon&r=PG", "display_name": "jtbandes", "link": "https://stackoverflow.com/users/23649/jtbandes"}, "edited": false, "score": 24, "creation_date": 1459928989, "post_id": 36443556, "comment_id": 60502931, "body": "@jtbandes trying is the worst way to approach it."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1459929167, "post_id": 36443556, "comment_id": 60503039, "body": "The code in example is not C :/ is this supposed to be a C or C++ or which question?"}, {"owner": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "edited": false, "score": 0, "creation_date": 1459943048, "post_id": 36443556, "comment_id": 60512881, "body": "It&#39;s easy: there is only one line of code in the question and that line is nonsensical if interpreted at C. This is not a C question."}, {"owner": {"reputation": 12625, "user_id": 1095108, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f26c5fe39742b7be7d859c2ddc11b55b?s=128&d=identicon&r=PG", "display_name": "user1095108", "link": "https://stackoverflow.com/users/1095108/user1095108"}, "edited": false, "score": 0, "creation_date": 1459944238, "post_id": 36443556, "comment_id": 60513778, "body": "OMG people, so I&#39;ll change the code, but one could argue, that it is java code now."}, {"owner": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "edited": false, "score": 1, "creation_date": 1459944537, "post_id": 36443556, "comment_id": 60513988, "body": "@user1095108 It&#39;s fine as long as you don&#39;t tag your question java."}, {"owner": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1459944900, "post_id": 36443556, "comment_id": 60514281, "body": "@Bathsheba Why should <code>unsigned i = -.1;</code> (yes it&#39;s a new example in the current version of the question) be implementation-defined? The conversion of <code>-0.1</code> to <code>unsigned</code> is perfectly well defined: <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.3.1.4p1\" rel=\"nofollow noreferrer\">port70.net/~nsz/c/c11/n1570.html#6.3.1.4p1</a> Unless you are saying that <code>0.1</code> could represent a value that&#39;s not between -1 exclusive and 0 inclusive"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1459945044, "post_id": 36443556, "comment_id": 60514388, "body": "My understanding (and I&#39;m not an expert on this, I learned the answer &quot;parrot fashion&quot; when I was at university), that anything on and above -1.0 is fine (so long as you don&#39;t exceed the unsigned size), but all values below -1.0 are UB. I think the little negative portion is to allow for boolean representations."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1460011989, "post_id": 36443556, "comment_id": 60548399, "body": "@Bathsheba how about looking it up instead of guessing"}], "answers": [{"comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 2, "creation_date": 1459925823, "post_id": 36443650, "comment_id": 60501023, "body": "Is that the C standard? Actually I&#39;ve noticed the question is multi-tagged. Have an upvote."}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1459925877, "post_id": 36443650, "comment_id": 60501051, "body": "@Bathsheba the question is labeled both C and C++ so either standard would be relevant. But it&#39;s a good question."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 7, "creation_date": 1459929065, "post_id": 36443650, "comment_id": 60502970, "body": "@Lundin but the question explicitly does -.1, which, truncated would be representable."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 9, "creation_date": 1459938276, "post_id": 36443650, "comment_id": 60509397, "body": "As Antti points out <code>(unsigned)-.1</code> is within the range (\u22121, Utype_MAX+1), so this particular case is not undefined behaviour.  We could re-write the answer pedantically, <b><i>With the execption of negative values above -1.0</b>, it invokes undefined behaviour</i>."}, {"owner": {"reputation": 11698, "user_id": 5399734, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2162d669508364bb0c03aba1a2473aa8?s=128&d=identicon&r=PG&f=1", "display_name": "nalzok", "link": "https://stackoverflow.com/users/5399734/nalzok"}, "reply_to_user": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 3, "creation_date": 1459960632, "post_id": 36443650, "comment_id": 60526723, "body": "@TobySpeight Perhaps you mean &quot;With the execption of negative values <b>below/less than</b> -1.0&quot;"}, {"owner": {"reputation": 12687, "user_id": 2809095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/705cfb2d48f12159ebae7d0275355a3f?s=128&d=identicon&r=PG&f=1", "display_name": "Iwillnotexist Idonotexist", "link": "https://stackoverflow.com/users/2809095/iwillnotexist-idonotexist"}, "reply_to_user": {"reputation": 11698, "user_id": 5399734, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2162d669508364bb0c03aba1a2473aa8?s=128&d=identicon&r=PG&f=1", "display_name": "nalzok", "link": "https://stackoverflow.com/users/5399734/nalzok"}, "edited": false, "score": 1, "creation_date": 1459961383, "post_id": 36443650, "comment_id": 60527186, "body": "@sunqingyao The range (-1, Utype_MAX+1) is exclusive at both ends (inclusive would have been notated with square brackets [,]), so the inequality is in fact <code>&lt;= 1.0</code>."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "reply_to_user": {"reputation": 11698, "user_id": 5399734, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2162d669508364bb0c03aba1a2473aa8?s=128&d=identicon&r=PG&f=1", "display_name": "nalzok", "link": "https://stackoverflow.com/users/5399734/nalzok"}, "edited": false, "score": 1, "creation_date": 1459961987, "post_id": 36443650, "comment_id": 60527548, "body": "@sun, of course not - values of -1.0 and less produce undefined behaviour.  Values strictly between -1.0 and UINT_MAX+1 have specified behaviour.  <a href=\"/a/36443699/4850040\">atturri&#39;s answer</a> phrases it better..."}, {"owner": {"reputation": 11698, "user_id": 5399734, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2162d669508364bb0c03aba1a2473aa8?s=128&d=identicon&r=PG&f=1", "display_name": "nalzok", "link": "https://stackoverflow.com/users/5399734/nalzok"}, "reply_to_user": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1459963828, "post_id": 36443650, "comment_id": 60528729, "body": "@TobySpeight I mean -0.5 is above -1.0, because it&#39;s <b>greater</b> than the later."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "reply_to_user": {"reputation": 11698, "user_id": 5399734, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2162d669508364bb0c03aba1a2473aa8?s=128&d=identicon&r=PG&f=1", "display_name": "nalzok", "link": "https://stackoverflow.com/users/5399734/nalzok"}, "edited": false, "score": 0, "creation_date": 1459964200, "post_id": 36443650, "comment_id": 60528949, "body": "@sun - Yes, -0.5 is a value above -1.0, so <i>it&#39;s an exception</i> to the statement, &quot;it invokes undefined behaviour&quot;.  As I said, atturri&#39;s wording is better than mine (&quot;it is undefined ... if the [number] is less than or equal to -1.0&quot;)"}, {"owner": {"reputation": 3521, "user_id": 658087, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/hvS4q.png?s=128&g=1", "display_name": "JD\u0142ugosz", "link": "https://stackoverflow.com/users/658087/jd%c5%82ugosz"}, "edited": false, "score": 1, "creation_date": 1459998530, "post_id": 36443650, "comment_id": 60543354, "body": "A later answer sites the same standard paragraphs and points out that it is well defined.  Your opening sentence contradicts the evidence you give!"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1460011096, "post_id": 36443650, "comment_id": 60547884, "body": "I changed the wording of this answer."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": true, "score": 41, "last_activity_date": 1460011065, "last_edit_date": 1460011065, "creation_date": 1459925787, "answer_id": 36443650, "question_id": 36443556, "link": "https://stackoverflow.com/questions/36443556/what-is-the-behaviour-on-converting-a-negative-floating-point-value-into-an-unsi/36443650#36443650", "title": "What is the behaviour on converting a negative floating point value into an unsigned int?", "body": "<p>In case the negative value is -1.0 or lower, it invokes undefined behavior since the integral part then cannot be represented by an unsigned number. Otherwise, (as in the case of -0.1), if it can be represented by an integer type, it is well-defined behavior. See the C11 standard, ISO 9899:2011:</p>\n\n<blockquote>\n  <p>6.3.1.4</p>\n  \n  <p>When a finite value of real floating type is converted to an integer\n  type other than _Bool, the fractional part is discarded (i.e., the\n  value is truncated toward zero). If the value of the integral part\n  cannot be represented by the integer type, the behavior is undefined. 61)</p>\n</blockquote>\n\n<p>And then there is a non-normative foot note explaining the above text:</p>\n\n<blockquote>\n  <p>61) The remaindering operation performed when a value of integer type\n  is converted to unsigned type need not be performed when a value of\n  real floating type is converted to unsigned type. Thus, the range of\n  portable real floating values is (\u22121, Utype_MAX+1).</p>\n</blockquote>\n\n<p>ISO/IEC 9899:1999 (C99) contains exactly the same text.</p>\n"}, {"tags": [], "owner": {"reputation": 1093, "user_id": 1571801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b739aed4dad18fc8844f52352fd554a2?s=128&d=identicon&r=PG", "display_name": "atturri", "link": "https://stackoverflow.com/users/1571801/atturri"}, "is_accepted": false, "score": 28, "last_activity_date": 1459926572, "last_edit_date": 1459926572, "creation_date": 1459925983, "answer_id": 36443699, "question_id": 36443556, "link": "https://stackoverflow.com/questions/36443556/what-is-the-behaviour-on-converting-a-negative-floating-point-value-into-an-unsi/36443699#36443699", "title": "What is the behaviour on converting a negative floating point value into an unsigned int?", "body": "<p>It is undefined behaviour in C99 if the floating point number is less than or equal to -1.0. If it's in the range (-1.0, 0.0), the resulting value will be 0.</p>\n\n<p>From C99, \u00a76.3.1.4, paragraph 1</p>\n\n<blockquote>\n  <p>When a finite value of real floating type is converted to an integer type other than _Bool, the fractional part is discarded (i.e., the value is truncated toward zero). If the value of the integral part cannot be represented by the integer type, the behavior is undefined</p>\n</blockquote>\n\n<p>Footnote 50 clarifies the behaviour for the (-1.0, 0.0) range.</p>\n"}, {"tags": [], "owner": {"reputation": 11698, "user_id": 5399734, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2162d669508364bb0c03aba1a2473aa8?s=128&d=identicon&r=PG&f=1", "display_name": "nalzok", "link": "https://stackoverflow.com/users/5399734/nalzok"}, "is_accepted": false, "score": 5, "last_activity_date": 1459962210, "last_edit_date": 1459962210, "creation_date": 1459961436, "answer_id": 36457462, "question_id": 36443556, "link": "https://stackoverflow.com/questions/36443556/what-is-the-behaviour-on-converting-a-negative-floating-point-value-into-an-unsi/36457462#36457462", "title": "What is the behaviour on converting a negative floating point value into an unsigned int?", "body": "<p>Your example, <code>unsigned i = -.1;</code> is <strong>well-defined</strong> by both C11 and C99, and the result is <code>i == 0</code>.</p>\n\n<p>Quoted from <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.3.1.4\" rel=\"nofollow\">N1570</a>, 6.3.1.4 Real floating and integer:</p>\n\n<blockquote>\n  <ol>\n  <li>When a finite value of real floating type is converted to an integer type other than _Bool, the fractional part is discarded (i.e.,\n  the value is truncated toward zero). If the value of the integral part\n  cannot be represented by the integer type, the behavior is\n  undefined.61)</li>\n  </ol>\n  \n  <p><sub>61) The remaindering operation performed when a value of integer\n  type is converted to unsigned type need not be performed when a value\n  of real floating type is converted to unsigned type. Thus, the range\n  of portable real floating values is (-1, Utype_MAX+1).</sub></p>\n</blockquote>\n\n<p>Quoted from <a href=\"https://busybox.net/~landley/c99-draft.html#6.3.1.4\" rel=\"nofollow\">N869</a>, 6.3.1.4 Real floating and integer:</p>\n\n<blockquote>\n  <p>#1</p>\n  \n  <p>When a finite value of real floating type is converted to an integer\n  type other than _Bool, the fractional part is discarded (i.e., the\n  value is truncated toward zero). If the value of the integral part\n  cannot be represented by the integer type, the behavior is\n  undefined.43)</p>\n  \n  <p><sub>43)The remaindering operation performed when a value of integer\n  type is converted to unsigned type need not be performed when a value\n  of real floating type is converted to unsigned type. Thus, the range\n  of portable real floating values is (-1, Utype_MAX+1).</sub></p>\n</blockquote>\n\n<p>However, as you can see from the quotations, trying to convert floating-point constants outside the range (-1, Utype_MAX+1) invokes undefined behaviour.</p>\n"}], "owner": {"reputation": 12625, "user_id": 1095108, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f26c5fe39742b7be7d859c2ddc11b55b?s=128&d=identicon&r=PG", "display_name": "user1095108", "link": "https://stackoverflow.com/users/1095108/user1095108"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2624, "favorite_count": 6, "closed_date": 1585558973, "accepted_answer_id": 36443650, "answer_count": 3, "score": 36, "last_activity_date": 1460011065, "creation_date": 1459925444, "last_edit_date": 1460009408, "question_id": 36443556, "link": "https://stackoverflow.com/questions/36443556/what-is-the-behaviour-on-converting-a-negative-floating-point-value-into-an-unsi", "closed_reason": "Duplicate", "title": "What is the behaviour on converting a negative floating point value into an unsigned int?", "body": "<p>What happens if a negative floating point value is converted into a value of unsigned integral type? Standard quotes would be appreciated. The problem I'm facing is conversion into values of unsigned integral types from a variant class, that contains an object of floating-point type.</p>\n\n<p>EXAMPLE:</p>\n\n<pre><code>unsigned i = -.1;\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 2, "creation_date": 1459925031, "post_id": 36443191, "comment_id": 60500563, "body": "You cannot write outside the <code>lenght</code> of string. <code>word[length + 1]</code> and <code>word[length + 2]</code> are wrong. You should use a new larger string to store the plural."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1459925514, "post_id": 36443191, "comment_id": 60500847, "body": "Indeed. While C standard says that the argv strings are modifiable, they still have a fixed length of memory allocated - <code>strlen(argv[n]) + 1</code> bytes, so you&#39;re not to write past this. Same applies to <code>strcat</code>."}], "answers": [{"comments": [{"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1459925375, "post_id": 36443298, "comment_id": 60500756, "body": "Good to say that program will crash for <code>word[length - 2]</code> if <code>length</code> &lt; 2"}, {"owner": {"reputation": 189, "user_id": 4374228, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-zfPXtRPNgfg/AAAAAAAAAAI/AAAAAAAAABk/mmK2w_fFfIE/photo.jpg?sz=128", "display_name": "GShaik", "link": "https://stackoverflow.com/users/4374228/gshaik"}, "edited": false, "score": 0, "creation_date": 1459925412, "post_id": 36443298, "comment_id": 60500775, "body": "@Cool Guy, you used  <code>char* plural(char word[])</code> declaration but forgot to return <code>char *</code>"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "reply_to_user": {"reputation": 189, "user_id": 4374228, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-zfPXtRPNgfg/AAAAAAAAAAI/AAAAAAAAABk/mmK2w_fFfIE/photo.jpg?sz=128", "display_name": "GShaik", "link": "https://stackoverflow.com/users/4374228/gshaik"}, "edited": false, "score": 1, "creation_date": 1459925520, "post_id": 36443298, "comment_id": 60500851, "body": "@AbdulGafoor Whoops. Fixed. Thanks"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "reply_to_user": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1459925533, "post_id": 36443298, "comment_id": 60500859, "body": "@AlterMann Good catch. Thanks. Edited."}, {"owner": {"reputation": 31, "user_id": 6164918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d28ae7c910b3a105267a58cb878e3c72?s=128&d=identicon&r=PG&f=1", "display_name": "TAG", "link": "https://stackoverflow.com/users/6164918/tag"}, "edited": false, "score": 0, "creation_date": 1459926023, "post_id": 36443298, "comment_id": 60501119, "body": "@Cool Guy, missing semicolon in last else statement after strcpy. other than that the code works well except for words that have a y the y never gets removed and it just adds ies. i.e. fly turns into flyies"}, {"owner": {"reputation": 31, "user_id": 6164918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d28ae7c910b3a105267a58cb878e3c72?s=128&d=identicon&r=PG&f=1", "display_name": "TAG", "link": "https://stackoverflow.com/users/6164918/tag"}, "edited": false, "score": 0, "creation_date": 1459926943, "post_id": 36443298, "comment_id": 60501666, "body": "@Cool Guy, Thank you for your help tonight with my code"}], "tags": [], "owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "is_accepted": false, "score": 3, "last_activity_date": 1459926530, "last_edit_date": 1459926530, "creation_date": 1459924549, "answer_id": 36443298, "question_id": 36443191, "link": "https://stackoverflow.com/questions/36443191/pluralize-string-from-command-line-in-c/36443298#36443298", "title": "Pluralize String from command line in C", "body": "<p>Each <code>argv[i]</code> has <code>strlen(argv[i]) + 1</code> memory allocated to it. You write more characters, which goes into invalid memory locations invoking Undefined Behavior.</p>\n\n<p>The fix is to create a pointer from the function, and <code>malloc</code> memory as required, returning the pointer and <code>free</code>ing it from <code>main</code>.</p>\n\n<p>See this code <em>(untested)</em>:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n#define SIZE 20\n/* Note: SIZE is unused */\n\nchar* plural(char word[]);\n\nint main(int argc, char *argv[])\n{\n    if(argc &gt;= 2)\n    {\n        int i;\n        for(i = 1; i &lt; argc; i++)\n        {\n            printf(\"noun: %s\\n\", argv[i]);\n            char* str = plural(argv[i]);\n            printf(\"plural: %s\\n\\n\", str);\n\n            free(str);\n        }   \n    }\n    else\n    {\n        printf(\"ERROR: You must pass the nouns to be pluralized as program arguements\\n\");\n    }\n\n    return 0;\n}\n\nchar* plural(char word[])\n{\n    /* declarations */  \n    int length;\n    char* str;\n\n    /* find length of word */\n    length = strlen(word);\n\n    /* check first rule:  if word ends in \"y\" then change to \"ies\" */\n    if (word[length - 1] == 'y') {\n        str = malloc(length + 3);\n        strcpy(str, word);\n        strcpy(str + length - 1, \"ies\");\n    }\n\n    /* check second rule:  if word ends in \"s\" \"ch\" or \"sh\" add \"es\" */\n    else if (word[length - 1] == 's' ||\n        (length &gt; 1 &amp;&amp; word[length - 2] == 'c' &amp;&amp; word[length - 1] == 'h') ||\n        (length &gt; 1 &amp;&amp; word[length - 2] == 's' &amp;&amp; word[length - 1] == 'h'))\n    {\n        str = malloc(length + 3);\n        strcpy(str, word);\n        /* concatenate \"es\" to word */\n        strcat(str, \"es\");\n    }\n\n    /* otherwise, just add \"s\" to the end of word */\n    else \n    {\n        str = malloc(length + 2);\n        strcpy(str, word);\n        strcat(str, \"s\");\n    } \n\n    return str;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 31, "user_id": 6164918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d28ae7c910b3a105267a58cb878e3c72?s=128&d=identicon&r=PG&f=1", "display_name": "TAG", "link": "https://stackoverflow.com/users/6164918/tag"}, "edited": false, "score": 0, "creation_date": 1459924920, "post_id": 36443314, "comment_id": 60500508, "body": "Are you saying to essentially make a new array of the values that were entered and work with that array?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 31, "user_id": 6164918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d28ae7c910b3a105267a58cb878e3c72?s=128&d=identicon&r=PG&f=1", "display_name": "TAG", "link": "https://stackoverflow.com/users/6164918/tag"}, "edited": false, "score": 0, "creation_date": 1459925315, "post_id": 36443314, "comment_id": 60500717, "body": "@TAG If you need to modify the values, then yes. An array of pointers where each pointer points to a string is probably the best choice for that, since your program can&#39;t know the string lengths at compile-time."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 2, "last_activity_date": 1459924587, "creation_date": 1459924587, "answer_id": 36443314, "question_id": 36443191, "link": "https://stackoverflow.com/questions/36443191/pluralize-string-from-command-line-in-c/36443314#36443314", "title": "Pluralize String from command line in C", "body": "<p>You should not use the <code>argv</code> parameter list as if they were modifiable strings. Most importantly, you don't know how much memory that was allocated for them beyond their length, so you can't use things like <code>strcat</code>, it will create array out of bounds bugs.</p>\n\n<p>Instead, make a hard copy of each such parameter before modifying it.</p>\n"}, {"comments": [{"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1459925716, "post_id": 36443530, "comment_id": 60500967, "body": "I&#39;m wondering: Will <code>word[length - 1]</code> be out of bounds? I mean, <code>length</code> will always be &gt;= 1 since we are dealing with <code>argv[i]</code>, right?"}, {"owner": {"reputation": 31, "user_id": 6164918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d28ae7c910b3a105267a58cb878e3c72?s=128&d=identicon&r=PG&f=1", "display_name": "TAG", "link": "https://stackoverflow.com/users/6164918/tag"}, "edited": false, "score": 0, "creation_date": 1459926772, "post_id": 36443530, "comment_id": 60501556, "body": "@LPs thank you for the help and keeping most of my code the same. If i put a if statement outside the if else statements in plural() that checked if(length&gt;2) should that take care of the out of bounds? and was there a reasoning on choosing 128 as the define for SIZE?"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "reply_to_user": {"reputation": 31, "user_id": 6164918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d28ae7c910b3a105267a58cb878e3c72?s=128&d=identicon&r=PG&f=1", "display_name": "TAG", "link": "https://stackoverflow.com/users/6164918/tag"}, "edited": false, "score": 0, "creation_date": 1459927218, "post_id": 36443530, "comment_id": 60501834, "body": "@TAG <code>128</code> is big enough to store the biggest word. <code>35</code> should be fine also to store Supercalifragilisticexpialidocious. ;). <code>if (length&gt;2)</code> should be fine to check the passed string."}, {"owner": {"reputation": 31, "user_id": 6164918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d28ae7c910b3a105267a58cb878e3c72?s=128&d=identicon&r=PG&f=1", "display_name": "TAG", "link": "https://stackoverflow.com/users/6164918/tag"}, "edited": false, "score": 1, "creation_date": 1459927566, "post_id": 36443530, "comment_id": 60502038, "body": "@LPs thank you again for the help tonight, the code now works properly thanks to your input!"}], "tags": [], "owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "is_accepted": true, "score": 2, "last_activity_date": 1459927410, "last_edit_date": 1459927410, "creation_date": 1459925358, "answer_id": 36443530, "question_id": 36443191, "link": "https://stackoverflow.com/questions/36443191/pluralize-string-from-command-line-in-c/36443530#36443530", "title": "Pluralize String from command line in C", "body": "<p>You cannot write outside the <code>length</code> of string. <code>word[length + 1]</code> and <code>word[length + 2]</code> are wrong. You should use a new larger string to store the plural.</p>\n\n<p>You could simply copy argv into a new larger string:</p>\n\n<pre><code>#define SIZE 128\n\nvoid plural(char word[]);\n\nint main(int argc, char *argv[])\n{\n    char plural_string[SIZE] = {0};\n\n    if(argc &gt;= 2)\n    {\n        int i;\n\n        for(i=1; i&lt;argc; i++)\n        {\n            printf(\"noun: %s\\n\",argv[i]);\n            strncpy(plural_string, argv[i], SIZE);\n            plural(plural_string);\n            printf(\"plural: %s\\n\\n\", plural_string);\n        }   \n    }\n    else\n    {\n        printf(\"ERROR: You must pass the nouns to be pluralized as program arguements\\n\");\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Take also note that plural function has to take care of minimum allowed length of string.<code>word[length - 2]</code> could index your array out of bounds.</p>\n"}], "owner": {"reputation": 31, "user_id": 6164918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d28ae7c910b3a105267a58cb878e3c72?s=128&d=identicon&r=PG&f=1", "display_name": "TAG", "link": "https://stackoverflow.com/users/6164918/tag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 454, "favorite_count": 0, "accepted_answer_id": 36443530, "answer_count": 3, "score": 2, "last_activity_date": 1459927410, "creation_date": 1459924152, "question_id": 36443191, "link": "https://stackoverflow.com/questions/36443191/pluralize-string-from-command-line-in-c", "title": "Pluralize String from command line in C", "body": "<p>This file compiles and runs but with error. This is a homework assignment that I have mostly completed but it doesn't output properly. I'm not asking for a reworked design of my program rather a helpful hint on what I am doing wrong. The error is in the output every other word gets messed up and I cant figure out why. Thank you for any help.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n#define SIZE 20\n\nvoid plural(char word[]);\n\nint main(int argc, char *argv[])\n{\n    if(argc &gt;= 2)\n    {\n    int i;\n        for(i=1; i&lt;argc; i++)\n        {\n            printf(\"noun: %s\\n\",argv[i]);\n            plural(argv[i]);\n            printf(\"plural: %s\\n\\n\", argv[i]);\n        }   \n    }\n    else\n    {\n        printf(\"ERROR: You must pass the nouns to be pluralized as program arguements\\n\");\n    }\n\n    return 0;\n}\n\nvoid plural(char word[])\n{\n    /* declarations */  \n    int length;\n\n    /* find length of word */\n    length = strlen(word);\n\n    /* check first rule:  if word ends in \"y\" then change to \"ies\" */\n    if (word[length - 1] == 'y') {\n        word[length - 1] = 'i';\n        word[length] = 'e';\n        word[length + 1] = 's';\n        word[length + 2] = '\\0';   /* put '\\0' at end of string */\n    }\n\n    /* check second rule:  if word ends in \"s\" \"ch\" or \"sh\" add \"es\" */\n    else if (word[length - 1] == 's' ||\n        (word[length - 2] == 'c' &amp;&amp; word[length - 1] == 'h') ||\n        (word[length - 2] == 's' &amp;&amp; word[length - 1] == 'h'))\n    {\n        /* concatenate \"es\" to word */\n        strcat(word, \"es\");\n    }\n\n    /* otherwise, just add \"s\" to the end of word */\n    else \n    {\n        strcat(word, \"s\");\n    } \n\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "static"], "answers": [{"tags": [], "owner": {"reputation": 1606, "user_id": 6060256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FTSYI.jpg?s=128&g=1", "display_name": "informaticienzero", "link": "https://stackoverflow.com/users/6060256/informaticienzero"}, "is_accepted": false, "score": 2, "last_activity_date": 1459926212, "last_edit_date": 1459926212, "creation_date": 1459924153, "answer_id": 36443193, "question_id": 36443111, "link": "https://stackoverflow.com/questions/36443111/whats-the-purpose-of-static-here/36443193#36443193", "title": "What&#39;s the purpose of static here?", "body": "<p>If <code>static</code> is used for a variable in a file scope, it means that it's local to that file. Without that keyword, you could be able to use it in another file with <code>extern</code> keyword.</p>\n\n<p>The same applies for functions. If a function in C is static in a file, it can be used only in that file and not in other files.</p>\n\n<p>So yes, I guess it's to prevent using it in other files.</p>\n"}, {"comments": [{"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 1, "creation_date": 1459924601, "post_id": 36443216, "comment_id": 60500328, "body": "It would be better to talk about translation units than files. Translation unit is basically what is left after preprocessor, so it has all the code from all the .h files too. And <code>static</code> declaration in a .h file creates an independent copy of the thing in every translation unit where that .h file got included. So it&#39;s inaccurate/misleading to say &quot;cannot be access by other file&quot;."}, {"owner": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "reply_to_user": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 1, "creation_date": 1459925647, "post_id": 36443216, "comment_id": 60500927, "body": "@hyde Why don&#39;t you write your own answer? Sure, suggesting improvements is fine, but comments don&#39;t really help the discussion itself."}], "tags": [], "owner": {"reputation": 1, "user_id": 5891208, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I8BF0.jpg?s=128&g=1", "display_name": "PointerFLY", "link": "https://stackoverflow.com/users/5891208/pointerfly"}, "is_accepted": false, "score": 0, "last_activity_date": 1459924232, "creation_date": 1459924232, "answer_id": 36443216, "question_id": 36443111, "link": "https://stackoverflow.com/questions/36443111/whats-the-purpose-of-static-here/36443216#36443216", "title": "What&#39;s the purpose of static here?", "body": "<p>Well, when static appears out of any block of code in a C/C++ file, it's a declaration modifier indicates that this variable cannot be access by other file; when static appears in a block of code, it's saying that this variable is \"static\". verbose_flag fits in the former while long_options fits in another.</p>\n"}, {"comments": [{"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 1, "creation_date": 1459924891, "post_id": 36443251, "comment_id": 60500492, "body": "<code>verbose_flag</code> is in the file scope, so it would not lose it&#39;s value between iterations even without <code>static</code>. It&#39;s made <code>static</code> for a different reason..."}, {"owner": {"reputation": 6641, "user_id": 3163618, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/bfab3078ba21206c78750d088cae76cf?s=128&d=identicon&r=PG&f=1", "display_name": "qwr", "link": "https://stackoverflow.com/users/3163618/qwr"}, "reply_to_user": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1459924916, "post_id": 36443251, "comment_id": 60500503, "body": "@hyde I was about to comment the same thing"}, {"owner": {"reputation": 1733, "user_id": 1013504, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/afa2d53388f97248d1120c657c6bb719?s=128&d=identicon&r=PG", "display_name": "dkg", "link": "https://stackoverflow.com/users/1013504/dkg"}, "reply_to_user": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1459925372, "post_id": 36443251, "comment_id": 60500754, "body": "@hyde yes you are right, then it is made for the variable to be completly local to this file, ensuring there is no use from other files."}], "tags": [], "owner": {"reputation": 1733, "user_id": 1013504, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/afa2d53388f97248d1120c657c6bb719?s=128&d=identicon&r=PG", "display_name": "dkg", "link": "https://stackoverflow.com/users/1013504/dkg"}, "is_accepted": false, "score": 0, "last_activity_date": 1459925696, "last_edit_date": 1459925696, "creation_date": 1459924363, "answer_id": 36443251, "question_id": 36443111, "link": "https://stackoverflow.com/questions/36443111/whats-the-purpose-of-static-here/36443251#36443251", "title": "What&#39;s the purpose of static here?", "body": "<p>I will do it in the reverse order : </p>\n\n<pre><code>static struct option long_options[]\n</code></pre>\n\n<p>is used for the variable option to be declared once and for all independently how many time the <code>while</code> loop will be executed.</p>\n\n<p>But you should see it as a whole (extracted from your link) :</p>\n\n<pre><code>...\nwhile (1)\n{\n...\n static struct option long_options[] =\n    {\n      /* These options set a flag. */\n      {\"verbose\", no_argument,       &amp;verbose_flag, 1},  // &lt;-- IMPORTANT HERE !\n      {\"brief\",   no_argument,       &amp;verbose_flag, 0},  // &lt;-- IMPORTANT HERE !\n      /* These options don\u2019t set a flag.\n         We distinguish them by their indices. */\n      {\"add\",     no_argument,       0, 'a'},\n      {\"append\",  no_argument,       0, 'b'},\n      {\"delete\",  required_argument, 0, 'd'},\n      {\"create\",  required_argument, 0, 'c'},\n      {\"file\",    required_argument, 0, 'f'},\n      {0, 0, 0, 0}\n    };\n...\n}\n...\n</code></pre>\n\n<p>And, as your declaration reference a variable, in this case <code>verbose_flag</code>, it should be available over the iterations, otherwise you will loose the variable over the next iteration and then reference something that doesn't exists anymore, that would be undefined behaviour. That is why <code>verbose_flag</code> is global to the file. It is made static to ensure the variable is only usable from this file and not from another.</p>\n"}], "owner": {"reputation": 6641, "user_id": 3163618, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/bfab3078ba21206c78750d088cae76cf?s=128&d=identicon&r=PG&f=1", "display_name": "qwr", "link": "https://stackoverflow.com/users/3163618/qwr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1460089030, "creation_date": 1459923847, "last_edit_date": 1460089030, "question_id": 36443111, "link": "https://stackoverflow.com/questions/36443111/whats-the-purpose-of-static-here", "title": "What&#39;s the purpose of static here?", "body": "<p>In <a href=\"http://www.gnu.org/software/libc/manual/html_node/Getopt-Long-Option-Example.html\" rel=\"nofollow\">GNU's <code>getopt_long</code> example</a>, <code>static</code> is used in a flag defined in file scope:</p>\n\n<pre><code>/* Flag set by \u2018--verbose\u2019. */\nstatic int verbose_flag;\n</code></pre>\n\n<p>and in the <code>long_options</code> struct defined in a <code>while</code> loop block scope:</p>\n\n<pre><code>static struct option long_options[]\n</code></pre>\n\n<p>Is <code>static</code> used here so that other files cannot access the variables? Is <code>static</code> being used the same way in both cases, and is it more efficient in the struct because it is kept in the same place of memory and not reinitialized? </p>\n"}, {"tags": ["java", "c", "ubuntu", "out-of-memory", "contiki"], "comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1459925787, "post_id": 36443110, "comment_id": 60501003, "body": "Is <code>prf_data_t</code> really compatible with <code>hmac_data_t</code>?"}, {"owner": {"reputation": 1, "user_id": 4324400, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbf932831c0c7f5688ec2548639ea5ed?s=128&d=identicon&r=PG&f=1", "display_name": "haytham husni", "link": "https://stackoverflow.com/users/4324400/haytham-husni"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1460050380, "post_id": 36443110, "comment_id": 60576091, "body": "I edit my question to add the type of pointer that you mention, yes it the same I think .... what you think? and thanks for your comment"}], "owner": {"reputation": 1, "user_id": 4324400, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbf932831c0c7f5688ec2548639ea5ed?s=128&d=identicon&r=PG&f=1", "display_name": "haytham husni", "link": "https://stackoverflow.com/users/4324400/haytham-husni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 149, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1460050255, "creation_date": 1459923842, "last_edit_date": 1460050255, "question_id": 36443110, "link": "https://stackoverflow.com/questions/36443110/error-reading-outside-memory-in-hmac-sha1prf-data", "title": "error &quot;Reading outside memory&quot; in hmac_sha1(prf_data)\u200f", "body": "<p>I am trying to test some methods (mainly session resumption) to IKEv.2 inside the Ipsec protocol, using Contiki OS as implemented by the Cooja simulation environment. </p>\n\n<p>I need your help to assist me incorporate the session resumption protocol code in C, so that I can resume my simulation.</p>\n\n<p>I tried my best to develop the code, but every time I try to run it, it always gives me the same error \" reading out of memory\"</p>\n\n<p>I trace the error in IPsec and IKEv.2 protocol code that I download it from this like <a href=\"https://github.com/vjutvik/Contiki-IPsec\" rel=\"nofollow\">https://github.com/vjutvik/Contiki-IPsec</a> </p>\n\n<p>and found the error appear when call <strong>hmac_sha1(prf_data);</strong> function. the error message is  \"Reading outside memory: 0xfa8b6\".</p>\n\n<p>the file path of this function is: contiki-ipsec\\core\\net\\ipsec\\ike\\prf.c</p>\n\n<pre><code>/**    \n  * PRF as defined in the RFC    \n  */    \nvoid prf(sa_prf_transform_type_t prf_type, prf_data_t *prf_data)    \n{    \n  switch (prf_type) {\n    case SA_PRF_HMAC_SHA1:         // MUST    \n    hmac_sha1(prf_data);    \n    break;\n\n    case SA_PRF_AES128_CBC:      // SHOULD+    \n    PRINTF(IPSEC \"Error: Not implemented\\n\");    \n    break;\n\n    default:    \n    PRINTF(IPSEC \"Error: Unknown PRF request\\n\");    \n  }      \n}\n</code></pre>\n\n<hr>\n\n<p>the code function  hmac_sha1(prf_data); </p>\n\n<p>the file path of this function is: contiki-ipsec\\core\\lib\\hmac-sha1\\hmac-sha1.c</p>\n\n<pre><code>/**    \n * Performs HMAC-SHA1-96. Call this function from your program.    \n *    \n * @param out     Output from HMAC-SHA1-96 (must be at least 96/8=12 bytes)    \n * @param key     The key to use    \n * @param keylen  The length of the key    \n * @param data    The data to hash    \n * @param datalen The length of the data    \n */    \n//void hmac_sha1_96( uint16_t datalen, uint8_t * out, uint8_t * key, uint8_t keylen, uint8_t * data )    \nvoid hmac_sha1( hmac_data_t *hmac_data )    \n{    \n  uint8_t * out=hmac_data-&gt;out;    \n  uint8_t * key= (uint8_t *) hmac_data-&gt;key;    \n  uint8_t keylen=hmac_data-&gt;keylen;    \n  uint8_t * data=hmac_data-&gt;data;    \n  uint16_t datalen=hmac_data-&gt;datalen;           \n  dy_printf( \"Data after %d %d %d %d %d\\n\", (int)out, (int)key,(int)keylen,(int)data, (int)datalen );    \n    // Variables    \n    uint8_t padded_key[ SHA1_B ];    \n    uint8_t padded_key_xor_ipad[ SHA1_B ];    \n    uint8_t sentence_a[ SHA1_B + datalen ];    \n    uint8_t hash_output_a[ SHA1_L ];   \n    uint8_t padded_key_xor_opad[ SHA1_B ];    \n    uint8_t sentence_b[ SHA1_B + SHA1_L ];    \n    uint8_t hash_output_b[ SHA1_L ];            \n    init();            \n    // Hash overlength keys    \n    if( keylen &gt; SHA1_B ){    \n        hash_sha1( padded_key, key, keylen ); // Assumes SHA1_L &lt;= SHA_B    \n        create_padded_key( padded_key, padded_key, SHA1_L ); // Adds the zeros    \n    }    \n    else{    \n        create_padded_key( padded_key, key, keylen );    \n    }            \n    dy_printf(\"datelen:%d\\n\",(int)datalen);    \n    PRINT_BUF(\"padded_key\",padded_key,SHA1_B);            \n    xor_array( padded_key_xor_ipad, padded_key, ipad, SHA1_B );    \n    PRINT_BUF(\"padded_key_xor_ipad\",padded_key_xor_ipad,SHA1_B);            \n    merge_arrays( sentence_a, padded_key_xor_ipad, SHA1_B, data, datalen );    \n    PRINT_BUF(\"sentence_a\",sentence_a,SHA1_B+datalen);            \n    hash_sha1( hash_output_a, sentence_a, SHA1_B + datalen );    \n    PRINT_BUF(\"hash_output_a\",hash_output_a,SHA1_L);            \n    xor_array( padded_key_xor_opad, padded_key, opad, SHA1_B );    \n    PRINT_BUF(\"padded_key_xor_opad\",padded_key_xor_opad,SHA1_B);           \n    merge_arrays( sentence_b, padded_key_xor_opad, SHA1_B, hash_output_a, SHA1_L );         \n  hash_sha1(hmac_data-&gt;out, sentence_b, SHA1_B + SHA1_L );    \n    // Old truncate code    \n    //hash_sha1( hash_output_b, sentence_b, SHA1_B + SHA1_L );    \n    //truncate( out, hash_output_b, 96/8 );    \n}\n</code></pre>\n\n<hr>\n\n<p><strong>I use Ubuntu 14.04 LTS 32-bit</strong></p>\n\n<p><strong>gcc (Ubuntu 4.8.4-2ubuntu1~14.04) 4.8.4</strong></p>\n\n<p>Copyright (C) 2013 Free Software Foundation, Inc.</p>\n\n<p><strong>msp430-gcc (GCC) 4.7.2 20120920 (mspgcc dev 20120911)</strong></p>\n\n<p>Copyright (C) 2012 Free Software Foundation, Inc.</p>\n\n<p>I using Contiki-IPsec 2.7 OS, also I\u2019m using Wismote in Cooja simulation</p>\n\n<p><strong>Edit</strong>:</p>\n\n<p>the type defined of the pointers in the functions above is </p>\n\n<pre><code>typedef struct {\n  uint8_t *out; \n  const uint8_t *key; \n  uint8_t keylen;\n  uint8_t *data; \n  uint16_t datalen;\n} hmac_data_t;\n</code></pre>\n\n<p>and the other type defined </p>\n\n<pre><code>typedef hmac_data_t prf_data_t;\n</code></pre>\n\n<p>Any idea to overcome this issue is highly appreciated. </p>\n\n<p>Thanking you in advanced.</p>\n"}, {"tags": ["c", "listview", "winapi", "ownerdrawn"], "answers": [{"tags": [], "owner": {"reputation": 894, "user_id": 5758312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15560486f98d522b0e9a43cc60c82144?s=128&d=identicon&r=PG&f=1", "display_name": "bunglehead", "link": "https://stackoverflow.com/users/5758312/bunglehead"}, "is_accepted": true, "score": 5, "last_activity_date": 1459943100, "last_edit_date": 1459943100, "creation_date": 1459924878, "answer_id": 36443401, "question_id": 36442894, "link": "https://stackoverflow.com/questions/36442894/does-owner-draw-only-work-in-report-mode-for-listview/36443401#36443401", "title": "Does owner draw only work in report mode for ListView?", "body": "<p>Yes, <code>LVS_OWNERDRAWFIXED</code> style is only meaningful for <code>LVS_REPORT</code> case. But  there's another way - you can process <code>NM_CUSTOMDRAW</code> notifications that listview sends you. Those are sent for all control modes, and depending on what you want to do you can handle <code>CDDS_ITEMPOSTPAINT</code> notification, use <code>dwItemSpec</code> field as item index, send LVM_GETITEMRECT from within your WM_NOTIFY handler, and do whatever you want with it.</p>\n"}], "owner": {"reputation": 179, "user_id": 6088487, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2b75f8c5b300360b7e1362fb2e8c84ac?s=128&d=identicon&r=PG&f=1", "display_name": "user6088487", "link": "https://stackoverflow.com/users/6088487/user6088487"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 198, "favorite_count": 0, "accepted_answer_id": 36443401, "answer_count": 1, "score": 3, "last_activity_date": 1459943100, "creation_date": 1459923051, "last_edit_date": 1459926463, "question_id": 36442894, "link": "https://stackoverflow.com/questions/36442894/does-owner-draw-only-work-in-report-mode-for-listview", "title": "Does owner draw only work in report mode for ListView?", "body": "<p>I want to draw a rectangle around a ListView item when the ListView is in Icon mode, so I started reading about owner draw which I thought that it will solve my problem.</p>\n\n<p>However, I have also read that owner draw only works in Report mode! Is this still the case under newer versions of Windows (Windows XP and later)?</p>\n\n<p>And if this is still the case, then is there another way to draw a rectangle around a ListView item?</p>\n"}]