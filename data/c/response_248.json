[{"tags": ["c", "macros", "header"], "comments": [{"owner": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "edited": false, "score": 0, "creation_date": 1570688802, "post_id": 58313662, "comment_id": 102993364, "body": "Concerning your comment at the macros: The preprocessor is a quite simple search-and-replace engine that knows nothing about C. If you don&#39;t have <code>DD(anything)</code> in your source the macro will not be used. Since I don&#39;t use VS I don&#39;t know how to do this, but GCC can be called with <code>-E</code> to produce the C source <b>after</b> the preprocessor ran. This output is quite enlighting to find macro and other problems."}, {"owner": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "edited": false, "score": 0, "creation_date": 1570688828, "post_id": 58313662, "comment_id": 102993370, "body": "What error messages do you get?"}], "owner": {"reputation": 13, "user_id": 7174809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76f56c4eeeb8b040d3722e63a92af29a?s=128&d=identicon&r=PG&f=1", "display_name": "Puzzling Programmer", "link": "https://stackoverflow.com/users/7174809/puzzling-programmer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 212, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1570793879, "creation_date": 1570665392, "last_edit_date": 1570793879, "question_id": 58313662, "link": "https://stackoverflow.com/questions/58313662/c-dont-include-header-file-cant-find-macro", "title": "C Don&#39;t include header file/Can&#39;t find macro?", "body": "<p>I'm working on updating a DLL written C and some hours ago I ran into a problem.</p>\n\n<p>Among other things the project use macros for generating common functions for the DLL's modules (structs, \"inherited\" from Module).</p>\n\n<p>These macros works for all the modules except one macro (GE_module) for one module (Hub).</p>\n\n<p>After have been trying misc. solutions, it is my impression that a header file (macros.h) not is included in another header file (hub.h).</p>\n\n<p>I would not be surprised if the problem, is caused by some magic-visual-studio-behind-the-scene-stuff.\nBecause hub.h and hub.c is copied from template files and then included in the project, though most of the other module are copies too.</p>\n\n<p>Hope someone here is able to solve this problem, for I ran out of ideas a while back,</p>\n\n<p>Instead of longer description of the problem, I show the relevant code with comments about the problem.</p>\n\n<p>And sorry for not being able to find better tags and title for this problem, but I'm rather clueless wherein the problem lies.</p>\n\n<hr>\n\n<p>Edit/Update:</p>\n\n<p>How I (sort of) figured out, why the 2 hub functions, not are visible in module.h.\nhub.h is included in module.h and project.h. If project.h don't include hub, module.h can see the functions. Downside of course is that project.c no longer work.</p>\n\n<p>Spend some time moving #includes up and down in misc. files, but unable to find an include order that works.</p>\n\n<p>So for being able to continue work t my part of the project, I decided using the copy of the troublesome macro i hub.h and let a more experienced c programmer at the project, solve this issue.</p>\n\n<p>I look forward to hear the explanation/solution for this, for I'm quite puzzled.</p>\n\n<p><strong>stdafx.h</strong></p>\n\n<pre><code>#include \"dll/macros.h\"\n</code></pre>\n\n<p><strong>macros.h</strong></p>\n\n<pre><code>#define GE_module_init(Istruct) BOOL module_ ## Istruct ## _init(Module* IImodule)\n#define GE_module_delete(Istruct) BOOL module_ ## Istruct ## _delete(Module* IImodule)\n#define GE_module(Istruct)         \\\n    GE_module_init(Istruct);       \\\n    GE_module_delete(Istruct);\n</code></pre>\n\n<p><strong>hub.h</strong></p>\n\n<pre><code>// Tried:\n//    Restarted Visual Studio\n//    Deleted build folders/files\n//    Deleted .sou\n//    Checking for tyops, again and again.\n\n#include &lt;dll/macros.h&gt; // Don't help\n#include \"dll/macros.h\" // Don't help\n#include \"../../../macros.h\" // Don't help\n\n// Copied from /macros.h. No warning about it's overridden\n#define GE_module_init(Istruct) BOOL module_ ## Istruct ## _init(Module* IImodule)\n// Copied from /macros.h. No warning about it's overridden\n#define GE_module_delete(Istruct) BOOL module_ ## Istruct ## _delete(Module* IImodule)\n// If renaming DD() to GE_module():\n//    init and delete functions is visible in module.c\n//    The functions is called according to trace.log\n//    No warning about it's overridden\n#define DD(Istruct)         \\\n    GE_module_init(Istruct);       \\\n    GE_module_delete(Istruct);\n\n// Hub is written in black, eg. not highlighted by Visual Studio as other modules is.\nGE_module(Hub); // Compiler don't complain though\n</code></pre>\n\n<p><strong>module.c</strong></p>\n\n<pre><code>#include \"dll/module/h/hub/hub.h\"\n\n#define FRIEND_DLL_module_init_delete_list(Istruct)                                            \\\n    f_delete_list    [Istruct ## _Module_Type] = &amp;module_ ## Istruct ## _delete;\\\n\nBOOL FRIEND_DLL_module_init()\n{\n    // Error C2065 'module_Hub_delete': undeclared identifier\n    // And not C2065 as init()\n    FRIEND_DLL_module_init_delete_list(Hub);\n}\n\n#define module_create_init_sub_case(Istruct)         \\\n    case Istruct ## _Module_Type:                    \\\n        return module_ ## Istruct ## _init(Imodule);\n\nBOOL module_create_init_sub(Module* Imodule)\n{\n    switch (Imodule-&gt;type)\n    {\n        // Warning C4013 'module_Hub_init' undefined; assuming\n        // And not C2065 as init()\n        module_create_init_sub_case(Hub)\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "string", "char"], "comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1570668000, "post_id": 58313521, "comment_id": 102988593, "body": "Going forward, please post text of input/output instead of pictures of input/output. That allows others to verify your results and where you have 200-300 characters of storage, your second image alone <code>aOXPB.png</code> requires <code>13534</code> bytes to store <code>:)</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9984206"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1570668583, "post_id": 58313521, "comment_id": 102988680, "body": "Will do. I did not realize that. Thanks"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9984206"}, "edited": false, "score": 0, "creation_date": 1570714895, "post_id": 58313723, "comment_id": 103007252, "body": "Is there a way to store the actual letters as a whole? Right now the printf before the null prints the previous letters, etc. before nulling it. But it gets a little tricky in formatting when there isn&#39;t letters.  For simplicity sake I didn&#39;t add the number(ch), operators(ch), etc to the code above when I asked. It seems its assumed that the letter chars will always before the others? Starts getting funny with space(ch) and neli(ch) aka  &#39;\\n&#39;. I tried using a strcmp function to compare the letters to another array with inialized keywords which worked but was duplicated."}, {"owner": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "edited": false, "score": 0, "creation_date": 1570725884, "post_id": 58313723, "comment_id": 103013493, "body": "@Lordravenblack You can ask another question and provide a link to this one to provide context."}], "tags": [], "owner": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "is_accepted": true, "score": 1, "last_activity_date": 1570726015, "last_edit_date": 1570726015, "creation_date": 1570665925, "answer_id": 58313723, "question_id": 58313521, "link": "https://stackoverflow.com/questions/58313521/how-to-append-a-char-into-array-and-tokenize-it-c/58313723#58313723", "title": "How to append a char into array and tokenize it C", "body": "<p>Print <code>line</code> when you enter <code>if(space(ch))</code> or <code>if(separator(ch))</code> instead of after finding each character of a line. After that, set the first byte to <code>0</code> so the string is \"empty\" again:</p>\n\n<pre><code>        if(space(ch))\n        {\n            printf(\" %03d: %s\\n\", line_num++, line);\n            line[0] = '\\0';\n            printf(\" %03d: %c\\n\", line_num++, ch);\n        }\n        if(letter(ch))\n        {\n            append(line, ch);\n        }\n        if(separator(ch))\n        {\n            printf(\" %03d: %s\\n\", line_num++, line);\n            line[0] = '\\0';\n            printf(\" %03d: %c\\n\", line_num++, ch);\n        }\n</code></pre>\n\n<p>You should probably also prepend <code>else</code> to both <code>if(letter(ch))</code> and <code>if(separator(ch))</code>. This might improve performance a little since none of these conditions overlap.</p>\n\n<p>Note that this is assuming that separators and spaces don't go together, but that shouldn't necessarily matter.</p>\n\n<p>Here is a simplified version of this that doesn't require duplicated code:</p>\n\n<pre><code>        if(letter(ch))\n        {\n            append(line, ch);\n        }\n        else\n        {\n            printf(\" %03d: %s\\n\", line_num++, line);\n            line[0] = '\\0';\n        }\n        if(space(ch) || separator(ch))\n        {\n            printf(\" %03d: %c\\n\", line_num++, ch);\n        }\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9984206"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "accepted_answer_id": 58313723, "answer_count": 1, "score": 2, "last_activity_date": 1570726015, "creation_date": 1570663991, "last_edit_date": 1570706224, "question_id": 58313521, "link": "https://stackoverflow.com/questions/58313521/how-to-append-a-char-into-array-and-tokenize-it-c", "title": "How to append a char into array and tokenize it C", "body": "<p>In my main function I am using <code>letter(ch)</code>. I am trying to get some letter characters to become a string or token. Before using the <code>append</code> function it would just print all the characters out.</p>\n\n<pre><code>//output  \n000: u  \n001: s  \n002: e  \n003: .  \n004: s  \n005: y  \n006: s  \n007: t  \n008: e  \n009: m  \n010: .  \n011: i  \n012: o  \n013: ;  \n</code></pre>\n\n<p>I found an appending function that gets the letter characters into the array, but it prints out like a pyramid. How do I get the last result when it's done appending, and use the <code>'\\0'</code> to split it? Shouldn't it have already split it by the initial <code>'\\0'</code> in the <code>append</code> function? Am I approaching this in the right direction? Is there something I'm missing in order for the split after the null?</p>\n\n<pre><code>//output   \n000: u  \n001: us  \n002: use  \n003: .  \n004: uses  \n005: usesy  \n006: usesys  \n007: usesyst  \n008: usesyste  \n009: usesystem  \n010: .  \n011: usesystemi  \n012: usesystemio  \n013: ;  \n</code></pre>\n\n<p></p>\n\n<pre><code>//main.c\n#define _CRT_SECURE_NO_WARNINGS\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include \"ch_type.h\"\n\n\nFILE *file;\nchar line[400];\nint line_num;\nchar  ch;\n\nvoid append(char* line, char ch)\n{\n    int length = strlen(line);\n    line[length] = ch;\n    line[length + 1] = '\\0';\n}\n\nint main()\n{\n    file = fopen(\"source.txt\", \"r\");\n\n    while((ch = fgetc(file)) != EOF)\n    {\n        if(space(ch))\n        {\n            printf(\" %03d: %c\\n\", line_num++, ch);\n        }\n        if(letter(ch))\n        {\n            append(line, ch);\n            printf(\" %03d: %s\\n\", line_num++, line);\n        }\n        if(separator(ch))\n        {\n            printf(\" %03d: %c\\n\", line_num++, ch);\n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<p></p>\n\n<pre><code>//ch_type.h\n\nint space(int ch)\n{\n    return ((ch == ' '));\n}\n\nint letter(int ch)\n{\n    return (((ch &gt;= 'a') &amp;&amp; (ch &lt;= 'z')) || (ch &gt;= 'A') &amp;&amp; (ch &lt;= 'Z'));\n}\n\n\nint separator(int ch)\n{\n    return ((ch == '#') || (ch == '(') || (ch == ')') || (ch == '{') || (ch == '}') || (ch == '[') || (ch == ']')\n        || (ch == '&lt;') || (ch == '&gt;') || (ch == '.') || (ch == ',') || (ch == ':') || (ch == ';'));\n}\n</code></pre>\n"}, {"tags": ["c", "gcc", "twos-complement"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 7, "creation_date": 1570663919, "post_id": 58313509, "comment_id": 102987839, "body": "You&#39;re overflowing, so it causes undefined behavior. Use <code>unsigned int</code>."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1570663957, "post_id": 58313509, "comment_id": 102987844, "body": "You&#39;re missing a <code>)</code> on the second <code>printf</code> line."}, {"owner": {"reputation": 1202, "user_id": 9937273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xJAip.png?s=128&g=1", "display_name": "Don Thousand", "link": "https://stackoverflow.com/users/9937273/don-thousand"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1570664043, "post_id": 58313509, "comment_id": 102987858, "body": "@MooingDuck I&#39;m aware of overflow, I&#39;m just confused because the output of the first printf seems to suggest that tmin + tmin is 0, but apparently it is not?"}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "edited": false, "score": 4, "creation_date": 1570664433, "post_id": 58313509, "comment_id": 102987927, "body": "@DonThousand: The program has undefined behavior, so anything can happen."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 1, "creation_date": 1570675945, "post_id": 58313509, "comment_id": 102990082, "body": "The C standard does not say there is one specific result of an overflow in the <code>int</code> type. It says, anytime there is an <code>int</code> overflow, the C implementation can do anything it wants, and it can be different each time. As others have indicated but not explained, this is called undefined behavior, meaning the C standard does not impose any requirements at all. In the cases you ask about, the C compiler may simply be doing what is \u201ceasiest\u201d for it. For example, the compiler could take an entire expression containing overflow and reduce it to 0, regardless of what else it contains."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1570676085, "post_id": 58313509, "comment_id": 102990112, "body": "Or it could remove the expression evaluation completely and let whatever happens to be in a processor register at that point be the result."}], "answers": [{"comments": [{"owner": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "edited": false, "score": 2, "creation_date": 1570665327, "post_id": 58313571, "comment_id": 102988094, "body": "This doesn&#39;t explain the second case."}, {"owner": {"reputation": 1202, "user_id": 9937273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xJAip.png?s=128&g=1", "display_name": "Don Thousand", "link": "https://stackoverflow.com/users/9937273/don-thousand"}, "edited": false, "score": 0, "creation_date": 1570665594, "post_id": 58313571, "comment_id": 102988140, "body": "I think I figured out my point of confusion now. If I cast the sum of tmin + tmin to an int, and then call !sum, then it will return 1 as expected."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 1202, "user_id": 9937273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xJAip.png?s=128&g=1", "display_name": "Don Thousand", "link": "https://stackoverflow.com/users/9937273/don-thousand"}, "edited": false, "score": 2, "creation_date": 1570671441, "post_id": 58313571, "comment_id": 102989166, "body": "@DonThousand &quot;If I cast the sum of tmin + tmin to an int, and then call !sum, then it will return 1 as expected.&quot; --&gt; You are still missing the point. The result is not <i>expected</i>, but <i>undefined behavior</i>."}, {"owner": {"reputation": 11698, "user_id": 5399734, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2162d669508364bb0c03aba1a2473aa8?s=128&d=identicon&r=PG&f=1", "display_name": "nalzok", "link": "https://stackoverflow.com/users/5399734/nalzok"}, "reply_to_user": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "edited": false, "score": 0, "creation_date": 1570676236, "post_id": 58313571, "comment_id": 102990146, "body": "@JL2210 It does, as undefined behavior can explain anything. Edited to clarify."}, {"owner": {"reputation": 64564, "user_id": 302139, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1ea13e6d50c94ba30296c4e5326e1634?s=128&d=identicon&r=PG", "display_name": "Edwin Buck", "link": "https://stackoverflow.com/users/302139/edwin-buck"}, "reply_to_user": {"reputation": 1202, "user_id": 9937273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xJAip.png?s=128&g=1", "display_name": "Don Thousand", "link": "https://stackoverflow.com/users/9937273/don-thousand"}, "edited": false, "score": 0, "creation_date": 1570680641, "post_id": 58313571, "comment_id": 102991118, "body": "@DonThousand In case you don&#39;t know what is being hinted at by &quot;undefined behavior&quot; it&#39;s basically that corner of the specification where they didn&#39;t demand a particular outcome.  So, if you have an operation that falls into undefined behavior; even if the answer <i>should</i> be zero according to the laws of mathematics, the answer you get <i>might</i> be zero, or one, or a million, random, or any other number you can think of, as it&#39;s subject to the computer it&#39;s running on, and whatever implementation is taking hold at the moment.  &quot;Undefined behavior&quot; == &quot;all bets are off, logic does not apply&quot;."}, {"owner": {"reputation": 1202, "user_id": 9937273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xJAip.png?s=128&g=1", "display_name": "Don Thousand", "link": "https://stackoverflow.com/users/9937273/don-thousand"}, "reply_to_user": {"reputation": 64564, "user_id": 302139, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1ea13e6d50c94ba30296c4e5326e1634?s=128&d=identicon&r=PG", "display_name": "Edwin Buck", "link": "https://stackoverflow.com/users/302139/edwin-buck"}, "edited": false, "score": 0, "creation_date": 1570682438, "post_id": 58313571, "comment_id": 102991462, "body": "@EdwinBuck Yes I understand. It was just an observation."}, {"owner": {"reputation": 64564, "user_id": 302139, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1ea13e6d50c94ba30296c4e5326e1634?s=128&d=identicon&r=PG", "display_name": "Edwin Buck", "link": "https://stackoverflow.com/users/302139/edwin-buck"}, "reply_to_user": {"reputation": 1202, "user_id": 9937273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xJAip.png?s=128&g=1", "display_name": "Don Thousand", "link": "https://stackoverflow.com/users/9937273/don-thousand"}, "edited": false, "score": 0, "creation_date": 1570683022, "post_id": 58313571, "comment_id": 102991579, "body": "@DonThousand I&#39;m glad you do.  Sorry if I explained it unnecessarily."}], "tags": [], "owner": {"reputation": 11698, "user_id": 5399734, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2162d669508364bb0c03aba1a2473aa8?s=128&d=identicon&r=PG&f=1", "display_name": "nalzok", "link": "https://stackoverflow.com/users/5399734/nalzok"}, "is_accepted": true, "score": 2, "last_activity_date": 1570676390, "last_edit_date": 1570676390, "creation_date": 1570664514, "answer_id": 58313571, "question_id": 58313509, "link": "https://stackoverflow.com/questions/58313509/why-does-gcc-not-add-tmin-tmin-correctly/58313571#58313571", "title": "Why does gcc not add tmin + tmin correctly?", "body": "<p><code>0x80000000</code> in binary is</p>\n\n<pre><code>0b10000000000000000000000000000000\n</code></pre>\n\n<p>When you add two <code>0x80000000</code>s together,</p>\n\n<pre><code>    |&lt;-          32bits          -&gt;|\n  0b10000000000000000000000000000000\n+ 0b10000000000000000000000000000000\n------------------------------------\n 0b100000000000000000000000000000000\n    |&lt;-          32bits          -&gt;|\n</code></pre>\n\n<p>However, <code>int</code> on your machine seem to have 32 bits, so only the lower 32 bits are preserved, which means the <code>1</code> in your result is silently discarded. This is called an <a href=\"https://en.wikipedia.org/wiki/Integer_overflow\" rel=\"nofollow noreferrer\">Integer Overflow</a>.</p>\n\n<p>Also note that in C, signed (as opposed to unsigned, i.e. <code>unsigned int</code>) integer overflow is actually <a href=\"https://stackoverflow.com/questions/18195715/why-is-unsigned-integer-overflow-defined-behavior-but-signed-integer-overflow-is\">undefined behavior</a>, which is why <code>!(tmin + tmin)</code> gives <code>0x0</code> instead of <code>0x1</code>. See <a href=\"https://markshroyer.com/2012/06/c-both-true-and-false/\" rel=\"nofollow noreferrer\">this blog post</a> for an example where a variable is both true and false due to another undefined behavior, i.e. uninitialized variable.</p>\n"}], "owner": {"reputation": 1202, "user_id": 9937273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xJAip.png?s=128&g=1", "display_name": "Don Thousand", "link": "https://stackoverflow.com/users/9937273/don-thousand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 352, "favorite_count": 0, "closed_date": 1570710115, "accepted_answer_id": 58313571, "answer_count": 1, "score": -2, "last_activity_date": 1570676390, "creation_date": 1570663798, "last_edit_date": 1570663971, "question_id": 58313509, "link": "https://stackoverflow.com/questions/58313509/why-does-gcc-not-add-tmin-tmin-correctly", "closed_reason": "Duplicate", "title": "Why does gcc not add tmin + tmin correctly?", "body": "<p>I've been playing around with bitwise operations and two's complement, when I discovered this oddity.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main ()\n{\n    int tmin = 0x80000000;\n    printf(\"tmin + tmin: 0x%x\\n\", tmin + tmin);\n    printf(\"!(tmin + tmin): 0x%x\\n\", !(tmin + tmin));\n}\n</code></pre>\n\n<p>The code above results in the following output</p>\n\n<pre><code>tmin + tmin: 0x0\n!(tmin + tmin): 0x0\n</code></pre>\n\n<p>Why does this happen?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 0, "creation_date": 1570667447, "post_id": 58313439, "comment_id": 102988497, "body": "Please read up on operator syntax in C.  The <code>^</code> operator does <i>not</i> perform exponentiation."}, {"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 0, "creation_date": 1570667506, "post_id": 58313439, "comment_id": 102988508, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/4843304/why-is-my-power-operator-not-working\">Why is my power operator (^) not working?</a>"}, {"owner": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "edited": false, "score": 0, "creation_date": 1570687605, "post_id": 58313439, "comment_id": 102992853, "body": "Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that we can use. The currently shown code has far too many syntax errors."}], "owner": {"reputation": 1, "user_id": 10055895, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-e2naGfRKpME/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7olwNNrq8KjqqjJ44ya2DscthF1Gg/mo/photo.jpg?sz=128", "display_name": "Samantha Lammers", "link": "https://stackoverflow.com/users/10055895/samantha-lammers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1570663067, "creation_date": 1570663067, "question_id": 58313439, "link": "https://stackoverflow.com/questions/58313439/how-would-i-implement-an-fir-filter-using-single-precision-floating-point-in-c-c", "title": "How would I implement an FIR filter using single precision floating point in C code?", "body": "<p>The filter I need to implement is H(z)=(0.875+0.322z^-1 + 0.283z^-2)/(1+0.334z^-1+0.654z^-2). For H(z)=0.333/(1+0.333z^-1) 32bit Q24 I used this code:</p>\n\n<pre><code>Int32 filter(int32 x) {\nQ=24;\nxn = floor(x*2^(Q-31));\nint32;\nint32 y1;\ng = floor(0.333*2^(Q-31));\ny=g*xn \u2013 xn - g*y1;\ny1=y;\n\nreturn(y);\n}\n</code></pre>\n\n<p>but, I'm not sure how to do this in single precision floating point.</p>\n"}, {"tags": ["c", "performance-testing"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1570661337, "post_id": 58313237, "comment_id": 102987368, "body": "That URL is completely mangled, it is <code>http:\\&#47;https:&#47;&#47;www.youtube.com...</code>. That code shown doesn&#39;t seem to relate to it."}, {"owner": {"reputation": 37, "user_id": 2329418, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/bce0af3507f506e907d84b6d921a2900?s=128&d=identicon&r=PG", "display_name": "Maddy", "link": "https://stackoverflow.com/users/2329418/maddy"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1570720590, "post_id": 58313237, "comment_id": 103010773, "body": "Yes, that&#39;s what i am also thinking. I checked manually the network calls using F12 developer tool and didn&#39;t see any calls to youtube. is there a way in HP performance center settings where I can ignore the youtube calls?"}, {"owner": {"reputation": 37, "user_id": 2329418, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/bce0af3507f506e907d84b6d921a2900?s=128&d=identicon&r=PG", "display_name": "Maddy", "link": "https://stackoverflow.com/users/2329418/maddy"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1570806874, "post_id": 58313237, "comment_id": 103043384, "body": "or maybe instead of using http, i have to force HP to use https rather than http when it comes to youtube calls. can i do that in the code or in any settings?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1570810056, "post_id": 58313237, "comment_id": 103044901, "body": "No idea. You&#39;d have to check the source or documentation."}, {"owner": {"reputation": 37, "user_id": 2329418, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/bce0af3507f506e907d84b6d921a2900?s=128&d=identicon&r=PG", "display_name": "Maddy", "link": "https://stackoverflow.com/users/2329418/maddy"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1571068423, "post_id": 58313237, "comment_id": 103108877, "body": "is there a way to capture youtube link and redirect it to https?"}, {"owner": {"reputation": 37, "user_id": 2329418, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/bce0af3507f506e907d84b6d921a2900?s=128&d=identicon&r=PG", "display_name": "Maddy", "link": "https://stackoverflow.com/users/2329418/maddy"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1574352835, "post_id": 58313237, "comment_id": 104211523, "body": "I was able to add youtube call in network traffic filtering in recording options and was able to bypass youtube call."}], "answers": [{"comments": [{"owner": {"reputation": 2629, "user_id": 339623, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c948197f3e40bfcbe8a2d960d26728db?s=128&d=identicon&r=PG", "display_name": "EtherDragon", "link": "https://stackoverflow.com/users/339623/etherdragon"}, "edited": false, "score": 0, "creation_date": 1574355459, "post_id": 58979275, "comment_id": 104213059, "body": "Can you post more details about the solution you found? Other users will certainly find this question if they have the same issue."}], "tags": [], "owner": {"reputation": 37, "user_id": 2329418, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/bce0af3507f506e907d84b6d921a2900?s=128&d=identicon&r=PG", "display_name": "Maddy", "link": "https://stackoverflow.com/users/2329418/maddy"}, "is_accepted": false, "score": 1, "last_activity_date": 1574418629, "last_edit_date": 1574418629, "creation_date": 1574352924, "answer_id": 58979275, "question_id": 58313237, "link": "https://stackoverflow.com/questions/58313237/invalid-hostname-in-url-hp-performance-center/58979275#58979275", "title": "Invalid hostname in URL HP Performance center", "body": "<p>I was able to add youtube call in Network > Mapping and Filtering > traffic filtering in recording options and was able to bypass you-tube call.</p>\n"}], "owner": {"reputation": 37, "user_id": 2329418, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/bce0af3507f506e907d84b6d921a2900?s=128&d=identicon&r=PG", "display_name": "Maddy", "link": "https://stackoverflow.com/users/2329418/maddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1574418629, "creation_date": 1570661210, "question_id": 58313237, "link": "https://stackoverflow.com/questions/58313237/invalid-hostname-in-url-hp-performance-center", "title": "Invalid hostname in URL HP Performance center", "body": "<p>I am new to HP Performance center and recording a script. Recording is done successfully but when I try to run the recorded script</p>\n\n<pre><code>Error   797 Action.c(797): Error -32998: Invalid host name in URL=\"http:\\\\/\"https://www.youtube.com/embed/3IqJIzJPrbw///\"\"   [MsgId: MERR-32998]    Action.c    C:\\Workspace_HP\\CreateQuoteAndConfigure_KW_CERT_Updated CreateQuoteAndConfigure_KW_CERT_Updated\n</code></pre>\n\n<p>And i don't see anywhere mention of youtube link in the call</p>\n\n<p>this is the call which is failing with the above error:</p>\n\n<pre><code>web_custom_request(\"ClientUI.ashx_3\",\n    \"URL=http://{host_kwsalestoolportal-cert_na_paccar_com}/experlogix/configurator/handlers/ClientUI.ashx\",\n    \"Method=GET\",\n    \"Resource=0\",\n    \"RecContentType=text/html\",\n    \"Referer=http://{host_kwsalestoolportal-cert_na_paccar_com}/experlogix/site/pages/ConfigureItem.ashx?target=config&amp;oType=1084&amp;oTypeName=quote&amp;orgName=SalesToolYARCert&amp;id={QuoteId}&amp;PortalUserId=fb1b42fb-a315-e811-816a-005056a20489&amp;PortalWebsiteId={GlobalId}&amp;uiLang=1033&amp;mode=default\",\n    \"Snapshot=t30.inf\",\n    \"Mode=HTML\",\n    EXTRARES,\n    \"URL=/experlogix/site/styles/MSCRM60-Borders_PACCAR/catHdrTreeMinus.png\", \"Referer=http://{host_kwsalestoolportal-cert_na_paccar_com}/experlogix/site/resources/styles/custom-2.css?20190926050952\", ENDITEM,\n    \"URL=../images/tbAdd04.png\", \"Referer=http://{host_kwsalestoolportal-cert_na_paccar_com}/experlogix/site/pages/ConfigureItem.ashx?target=config&amp;oType=1084&amp;oTypeName=quote&amp;orgName=SalesToolYARCert&amp;id={QuoteId}&amp;PortalUserId=fb1b42fb-a315-e811-816a-005056a20489&amp;PortalWebsiteId={GlobalId}&amp;uiLang=1033&amp;mode=default\", ENDITEM,\n    \"URL=../images/tbInfo01.png\", \"Referer=http://{host_kwsalestoolportal-cert_na_paccar_com}/experlogix/site/pages/ConfigureItem.ashx?target=config&amp;oType=1084&amp;oTypeName=quote&amp;orgName=SalesToolYARCert&amp;id={QuoteId}&amp;PortalUserId=fb1b42fb-a315-e811-816a-005056a20489&amp;PortalWebsiteId={GlobalId}&amp;uiLang=1033&amp;mode=default\", ENDITEM,\n    \"URL=/experlogix/site/images/30c67911-796a-425d-89cd-6f622a79d355_printer-32x32.png\", \"Referer=http://{host_kwsalestoolportal-cert_na_paccar_com}/experlogix/site/pages/ConfigureItem.ashx?target=config&amp;oType=1084&amp;oTypeName=quote&amp;orgName=SalesToolYARCert&amp;id={QuoteId}&amp;PortalUserId=fb1b42fb-a315-e811-816a-005056a20489&amp;PortalWebsiteId={GlobalId}&amp;uiLang=1033&amp;mode=default\", ENDITEM,\n    \"URL=/experlogix/site/resources/images/icon_caution_25px1.png\", \"Referer=http://{host_kwsalestoolportal-cert_na_paccar_com}/experlogix/site/pages/ConfigureItem.ashx?target=config&amp;oType=1084&amp;oTypeName=quote&amp;orgName=SalesToolYARCert&amp;id={QuoteId}&amp;PortalUserId=fb1b42fb-a315-e811-816a-005056a20489&amp;PortalWebsiteId={GlobalId}&amp;uiLang=1033&amp;mode=default\", ENDITEM,\n    \"URL=/experlogix/site/resources/images/icon_pass_25px1.png\", \"Referer=http://{host_kwsalestoolportal-cert_na_paccar_com}/experlogix/site/pages/ConfigureItem.ashx?target=config&amp;oType=1084&amp;oTypeName=quote&amp;orgName=SalesToolYARCert&amp;id={QuoteId}&amp;PortalUserId=fb1b42fb-a315-e811-816a-005056a20489&amp;PortalWebsiteId={GlobalId}&amp;uiLang=1033&amp;mode=default\", ENDITEM,\n    LAST);\n</code></pre>\n\n<p>can some one help me how to debug and investigate to fix this error? Very new to HP and C so very naive in this. </p>\n"}, {"tags": ["c", "pipe"], "comments": [{"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 3, "creation_date": 1570659677, "post_id": 58313001, "comment_id": 102986968, "body": "How would you know if you were getting an error? The code doesn\u2019t check for errors. See the return value of <code>read</code> (and <code>write</code>). Also, please try to provide enough code for a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}], "answers": [{"tags": [], "owner": {"reputation": 11893, "user_id": 12098405, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C7IUyuZ5qqE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rehqQyGdh463Xz2DY8S4TYPhnDvzA/photo.jpg?sz=128", "display_name": "dash-o", "link": "https://stackoverflow.com/users/12098405/dash-o"}, "is_accepted": true, "score": 0, "last_activity_date": 1570717378, "creation_date": 1570717378, "answer_id": 58325173, "question_id": 58313001, "link": "https://stackoverflow.com/questions/58313001/sending-randomly-generated-value-from-child-process-to-parent-process/58325173#58325173", "title": "Sending Randomly generated Value from child process to parent process", "body": "<p>The code should setup the pipe before forking the children. Otherwise, the parent and the children will use different pipes, and will not be able to talk to each other.</p>\n\n<pre><code>int main ()\n{\n\n    pid_t Cpid;\n    int fd[2];  \n\n    // Create the pipe BEFORE forking.\n    pipe(fd);       \n\n    //pid will store the value of fork()\n    Cpid = fork();\n\n    if( Cpid == 0) \n        .. REST OF CODE ~~~\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12191673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a78f451f42f6b0930e37b8aa22670dee?s=128&d=identicon&r=PG&f=1", "display_name": "Bhandeystruck", "link": "https://stackoverflow.com/users/12191673/bhandeystruck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 58325173, "answer_count": 1, "score": 0, "last_activity_date": 1570717378, "creation_date": 1570659413, "last_edit_date": 1570716674, "question_id": 58313001, "link": "https://stackoverflow.com/questions/58313001/sending-randomly-generated-value-from-child-process-to-parent-process", "title": "Sending Randomly generated Value from child process to parent process", "body": "<p>I have written a code that generates a random number in the child process using rand()... I need to send this random value to the parent process using pipe(). when I use read() and write () the values received by the parent is 0 instead of the random number.</p>\n\n<p>I am getting no error just the output is Value received is : 0.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;unistd.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;pthread.h&gt;\n#include&lt;fcntl.h&gt;\n\n\nint main ()\n{\n\n    pid_t Cpid;\n    int fd[2];  \n\n    int rVal;\n\n\n\n    //pid will store the value of fork()\n    Cpid = fork();\n    pipe(fd);       \n\n    if( Cpid == 0) \n    {\n\n        //CHILD\n        rVal = rand()%100;\n    ;\n//this is in child process\n    close (fd[0]);\n    rVal = rand()%100;\n    write(fd[1], &amp;rVal,sizeof (rVal));\n    close (fd[1]);\n\n        printf(\" Child Pid : %d sending random value : %d to parent : %d\\n\", \n    getpid(), rVal, getppid());\n\n\n    }\n\n\n    else if(Cpid != 0 )\n    {\n\n        printf (\" Parent PID : %d\\n\", getpid());\n        //this is the parent process\n        close(fd[1]);\n        read(fd[0], &amp;rVal, sizeof(rVal));\n        printf(\" value recieved is : %d\\n\", rVal);\n        close(fd[0]);\n        printf(\" value recieved by parent : %d\\n\", rVal);\n\n    }\n\n\n\n    return 0;\n\n\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "gcc", "compilation", "g++"], "answers": [{"comments": [{"owner": {"reputation": 11238, "user_id": 7594711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7872c871b0431b72df6350dd0394bea?s=128&d=identicon&r=PG&f=1", "display_name": "SoronelHaetir", "link": "https://stackoverflow.com/users/7594711/soronelhaetir"}, "edited": false, "score": 0, "creation_date": 1570659718, "post_id": 58312987, "comment_id": 102986983, "body": "And there is nothing preventing use of C run-time library functions (like the named strcpy_s) in C++. It may run afoul of local coding guidelines but it is certainly legal within the language."}], "tags": [], "owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "is_accepted": true, "score": 2, "last_activity_date": 1570659331, "creation_date": 1570659331, "answer_id": 58312987, "question_id": 58312861, "link": "https://stackoverflow.com/questions/58312861/compile-c-shared-object-with-c-files/58312987#58312987", "title": "Compile C shared object with C++ files", "body": "<p>Sure, you can <strong>link</strong> your C++ program with your shared C library. Just make sure that you tell the C++ compiler that the functions in that library have C linkage by adding <code>extern \"C\" { ... }</code> around the functions in your C library's header file:</p>\n\n<p><em>shared_c_lib.h</em></p>\n\n<pre><code>#ifdef __cplusplus\nextern \"C\" {\n#endif\n\n// all your C functions declarations/prototypes\n\n#ifdef __cplusplus\n} // extern \"C\"\n#endif\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 8473360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff2f5495d4748c47a9882e51f2d08df0?s=128&d=identicon&r=PG&f=1", "display_name": "Shirakawa42", "link": "https://stackoverflow.com/users/8473360/shirakawa42"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 58312987, "answer_count": 1, "score": 1, "last_activity_date": 1570659331, "creation_date": 1570658488, "question_id": 58312861, "link": "https://stackoverflow.com/questions/58312861/compile-c-shared-object-with-c-files", "title": "Compile C shared object with C++ files", "body": "<p>I have a C shared object (.so file) and i can only compile it using gcc because it uses C only functions like strcpy_s.</p>\n\n<p>And i have a C++ code that contain some C++ only libraries.</p>\n\n<p>Is that possible to compile the shared object with gcc and my code with g++ together ?</p>\n"}, {"tags": ["c", "sockets", "bluetooth", "lego", "ev3"], "answers": [{"tags": [], "owner": {"reputation": 29, "user_id": 5309130, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zxs4gKOxkq8/AAAAAAAAAAI/AAAAAAAAAFU/iwEo7SjXl0Q/photo.jpg?sz=128", "display_name": "Elias Nodland", "link": "https://stackoverflow.com/users/5309130/elias-nodland"}, "is_accepted": true, "score": 0, "last_activity_date": 1570716648, "creation_date": 1570716648, "answer_id": 58324939, "question_id": 58312564, "link": "https://stackoverflow.com/questions/58312564/bluetooth-on-the-ev3/58324939#58324939", "title": "Bluetooth on the EV3", "body": "<p>I figured it out.\nOn my raspberry PI, the accept call worked as expected with no quirks. On the EV3 however, the accept call is non-blocking even if it has not been told to act like so.\nThe solution was to place the accept call in a loop until an incoming connection was in the queue.</p>\n\n<pre><code>while (errno == EAGAIN &amp;&amp; ButtonIsUp(BTNEXIT) &amp;&amp; client &lt; 0)\n    client = accept(sock, (struct sockaddr*)&amp;rem_addr, sizeof(rem_addr));\n</code></pre>\n\n<p>I'll upload the code to github. Contact me if you'd like to do something similar with the EV3.</p>\n"}], "owner": {"reputation": 29, "user_id": 5309130, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zxs4gKOxkq8/AAAAAAAAAAI/AAAAAAAAAFU/iwEo7SjXl0Q/photo.jpg?sz=128", "display_name": "Elias Nodland", "link": "https://stackoverflow.com/users/5309130/elias-nodland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 58324939, "answer_count": 1, "score": 2, "last_activity_date": 1570716648, "creation_date": 1570656477, "question_id": 58312564, "link": "https://stackoverflow.com/questions/58312564/bluetooth-on-the-ev3", "title": "Bluetooth on the EV3", "body": "<p>Before I get started. Yes, I could use leJOS, ev3dev, or some others, but I'd like to do it this way because that is how I learn.</p>\n\n<p>I am using the CodeSourcery arm-2009q1 arm toolchain. I fetched the required libraries (bluetooth) from here: <a href=\"https://github.com/mindboards/ev3sources\" rel=\"nofollow noreferrer\">https://github.com/mindboards/ev3sources</a>.\nI am uploading the programs to the brick by using this tool: <a href=\"https://github.com/c4ev3/ev3duder\" rel=\"nofollow noreferrer\">https://github.com/c4ev3/ev3duder</a></p>\n\n<p>I have also fetched the brick's shared libraries, but I can not get them to work properly and there is 0 documentation on how to write a c program for the ev3 using the shared libraries. If I could get that working I might be able to use the c_com module to handle bluetooth, but right now bluez and rfcomm in conjunction with: <a href=\"https://github.com/c4ev3/EV3-API\" rel=\"nofollow noreferrer\">https://github.com/c4ev3/EV3-API</a> for motor and sensor control seems to be my best bet.</p>\n\n<p>Now, with that out of the way:\nI'd like to run the EV3 as a bluetooth \"server\" meaning that I start a program on it and the program opens a socket, binds it, listens for a connection, and then accepts a single connection.\nI am able to do open a socket, bind it to anything but channel 1 (I believe this might be the crux of my issue), I am able to listen. These all return 0 (OK) and everything is fine.</p>\n\n<p>Then I try to accept a connection. That instantly returns -1 and sets the remote to address 00:00:00:00:00:00.</p>\n\n<p>My code is pretty much the same as can be found here: <a href=\"https://people.csail.mit.edu/albert/bluez-intro/x502.html\" rel=\"nofollow noreferrer\">https://people.csail.mit.edu/albert/bluez-intro/x502.html</a></p>\n\n<p>Here it is:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;bluetooth/bluetooth.h&gt;\n#include &lt;bluetooth/rfcomm.h&gt;\n#include &lt;ev3.h&gt;\n\nint main(int argc, char **argv)\n{\n    InitEV3();\n    struct sockaddr_rc loc_addr = { 0 }, rem_addr = { 0 };\n    char buf[1024] = { 0 };\n    int sock, client, bytes_read;\n    socklen_t opt = sizeof(rem_addr);\n\n    sock = socket(AF_BLUETOOTH, SOCK_STREAM, BTPROTO_RFCOMM);\n\n    loc_addr.rc_family = AF_BLUETOOTH;\n    loc_addr.rc_bdaddr = *BDADDR_ANY;\n    loc_addr.rc_channel = 2; // &lt;-- Anything but 1. 1 seems to be taken\n    bind(sock, (struct sockaddr *)&amp;loc_addr, sizeof(loc_addr));\n\n    listen(sock, 1);\n\n    // accept one connection &lt;-- PROGRAM FAILS HERE AS accept() returns -1\n    client = accept(sock, (struct sockaddr *)&amp;rem_addr, &amp;opt);\n\n    // ---- All following code is irrelevant because accept fails ----\n\n    ba2str( &amp;rem_addr.rc_bdaddr, buf );\n    fprintf(stderr, \"accepted connection from %s\\n\", buf);\n    memset(buf, 0, sizeof(buf));\n\n    bytes_read = read(client, buf, sizeof(buf));\n    if( bytes_read &gt; 0 )\n        printf(\"received [%s]\\n\", buf);\n\n    close(client);\n    close(sock);\n\n    FreeEV3();\n    return 0;\n}\n</code></pre>\n\n<p>I am able to get the same code working on my pi. Even communication back and forth when the ev3api-specific functions are commented out. I just can't fathom why it won't work on the EV3.</p>\n"}, {"tags": ["c++", "c", "timer"], "comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1570655405, "post_id": 58312194, "comment_id": 102985755, "body": "sleep does not consume &quot;process time&quot;. There is no correct function for your use case."}, {"owner": {"reputation": 1795, "user_id": 168235, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/10dacc51aadd2f2eef6ad5f3bd377f6e?s=128&d=identicon&r=PG", "display_name": "James", "link": "https://stackoverflow.com/users/168235/james"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1570655539, "post_id": 58312194, "comment_id": 102985802, "body": "expected output is 1 second -- even when ive sat at a breakpoint all day -- the sleep call is really just to give the program a real expected timing"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1570657342, "post_id": 58312194, "comment_id": 102986376, "body": "BTW, there is no language C/C++.  Your post is C++ because <code>std::chrono</code> is not in the C language (the C language doesn&#39;t have the <code>::</code> operator). You should update your tags accordingly."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1570657464, "post_id": 58312194, "comment_id": 102986409, "body": "Yup, debugging real-time code is tough, because time doesn&#39;t stand still when you hit a breakpoint. Too bad. Deal with it."}, {"owner": {"reputation": 1795, "user_id": 168235, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/10dacc51aadd2f2eef6ad5f3bd377f6e?s=128&d=identicon&r=PG", "display_name": "James", "link": "https://stackoverflow.com/users/168235/james"}, "edited": false, "score": 0, "creation_date": 1570668086, "post_id": 58312194, "comment_id": 102988604, "body": "Removing all references to sleep, it was a distraction from my intended question. Also mentioning that I will accept any platform-specific example (though ideally windows) way of accomplishing this."}, {"owner": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "edited": false, "score": 0, "creation_date": 1570669733, "post_id": 58312194, "comment_id": 102988871, "body": "Since you are targeting Windows, why do you request a POSIX way?"}], "answers": [{"tags": [], "owner": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "is_accepted": false, "score": 1, "last_activity_date": 1570669618, "last_edit_date": 1570669618, "creation_date": 1570668223, "answer_id": 58313965, "question_id": 58312194, "link": "https://stackoverflow.com/questions/58312194/c-c-elapsed-process-cycles-not-including-at-breakpoints/58313965#58313965", "title": "C/C++ elapsed process cycles, not including at breakpoints", "body": "<p>Yes, trying to measure the CPU time of your process would be dependent on support from your operating system. Rather than look up what support is available from various operating systems, though, I would propose that your approach is flawed.</p>\n\n<p>Debugging typically uses a debug build that has most optimizations turned off (to make it easier to do things like set breakpoints accurately). Timings on a non-optimized build lack practical value. Hence any timings of your program should usually be ignored when you are using breakpoints&ndash;even if the breakpoint is outside the timed section.</p>\n\n<p>To combine using breakpoints with timings, I would do the debugging in two phases. In one phase, you set breakpoints and look at what is happening in the debug build. In the other phase, you use identical input (redirect a file into <code>std::cin</code> if it helps) and time the process in the release build. There may be some back-and-forth between the stages as you work out what is going on. That's fine; the point is not to have exactly two phases, but to keep breakpoints and timings separate.</p>\n"}, {"tags": [], "owner": {"reputation": 218, "user_id": 9005776, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-X7XkgjzojQ0/AAAAAAAAAAI/AAAAAAAABQk/5IrfXRyNwt4/photo.jpg?sz=128", "display_name": "Phles", "link": "https://stackoverflow.com/users/9005776/phles"}, "is_accepted": false, "score": 0, "last_activity_date": 1570669119, "last_edit_date": 1570669119, "creation_date": 1570668804, "answer_id": 58314009, "question_id": 58312194, "link": "https://stackoverflow.com/questions/58312194/c-c-elapsed-process-cycles-not-including-at-breakpoints/58314009#58314009", "title": "C/C++ elapsed process cycles, not including at breakpoints", "body": "<p>Although JaMit gives a better answer (<a href=\"https://stackoverflow.com/a/58313965/9005776\">here</a>), it is possible but it depends entirely on your compiler and the amount of overhead this creates will probably slow down your program too much to get an accurate result. You can use whatever time recording function you please but either way you would have to:</p>\n\n<ul>\n<li>Record the start of the loop</li>\n<li>Record the start of the breakpoint</li>\n<li>Programmatically cause a breakpoint</li>\n<li>Record the end of the breakpoint</li>\n<li>Record the end of the loop.</li>\n</ul>\n\n<p>If you're looking for speed though, you really need to be testing in an optimized release mode without breakpoints and writing the output to the console or a file. Nonetheless, it is possible to do what you're trying to do, and here's a sample solution.</p>\n\n<pre><code>#include &lt;chrono&gt;\n#include &lt;intrin.h&gt; //include for visual studio break\n#include &lt;iostream&gt;\nint main(void) {\n\n    for (int c = 0; c &lt; 100; c++) {\n        //Start of loop\n        auto start = std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;(std::chrono::high_resolution_clock::now().time_since_epoch()).count();\n        /*Do stuff here*/\n        auto startBreak = std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;(std::chrono::high_resolution_clock::now().time_since_epoch()).count();\n        //visual studio only\n        __debugbreak();\n        auto endBreak = std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;(std::chrono::high_resolution_clock::now().time_since_epoch()).count();\n        /*Do more stuff here*/\n        auto end = std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;(std::chrono::high_resolution_clock::now().time_since_epoch()).count();\n        /*Time for 1 pass of the loop, including all the records of getting the time*/\n        std::cout &lt;&lt; end - start - (endBreak - startBreak) &lt;&lt; \"\\n\";\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1570769844, "creation_date": 1570769844, "answer_id": 58334461, "question_id": 58312194, "link": "https://stackoverflow.com/questions/58312194/c-c-elapsed-process-cycles-not-including-at-breakpoints/58334461#58334461", "title": "C/C++ elapsed process cycles, not including at breakpoints", "body": "<p>given your objective: <em>which is my attempt to print the time elapsed between loops.</em></p>\n\n<p>in the C language:</p>\n\n<p>Note that <code>clock()</code> returns the number of clock tics since the program started.</p>\n\n<p>This code measures the elapsed time for each loop by showing the start/end time for each loop</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;time.h&gt;\n\nint main( void )\n{\n    clock_t loopStart = clock();\n    clock_t loopEnd;\n\n\n    for( int i=0; i&lt; 10000; i++ )\n    {\n        loopEnd = clock();\n        // something here to be timed\n        printf(\"[%lf : %lf ms].\\n\", (double)loopStart/CLOCKS_PER_SEC, (double)loopEnd/CLOCKS_PER_SEC );\n        loopStart = loopEnd;\n    }\n}\n</code></pre>\n\n<p>Of course, if you want to display the actual number of clock ticks per loop, then remove the division by <code>CLOCKS_PER_SEC</code> and calculate the difference and only display the difference</p>\n"}], "owner": {"reputation": 1795, "user_id": 168235, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/10dacc51aadd2f2eef6ad5f3bd377f6e?s=128&d=identicon&r=PG", "display_name": "James", "link": "https://stackoverflow.com/users/168235/james"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1570769844, "creation_date": 1570654695, "last_edit_date": 1570668405, "question_id": 58312194, "link": "https://stackoverflow.com/questions/58312194/c-c-elapsed-process-cycles-not-including-at-breakpoints", "title": "C/C++ elapsed process cycles, not including at breakpoints", "body": "<p>See the following code, which is my attempt to print the time elapsed between loops.</p>\n\n<pre><code>void main()\n{\n    while (true)\n    {\n        static clock_t timer;\n\n        clock_t t = clock();\n        clock_t elapsed = t - timer;\n        float elapsed_sec = (float)elapsed / (float)CLOCKS_PER_SEC;\n        timer = t;\n\n        printf(\"[dt:%d ms].\\n\", (int)(elapsed_sec*1000));\n    }\n}\n</code></pre>\n\n<p>However, if I set a breakpoint and sit there for 10 seconds, when i continue execution the elapsed time includes that 5 seconds -- and I don't want it to, for my intended usage.</p>\n\n<p>I assume <code>clock()</code> is the wrong function, but what is the correct one?\nNote that if there IS no standard C or C++ single call for this -- well, how do you compute it? Is there a posix way? </p>\n\n<p>I suspect that this is actually information only knowable with platform-specific calls. If that is the case, i'd like to at least know how to do so on windows (msvc).</p>\n"}, {"tags": ["c"], "owner": {"reputation": 13, "user_id": 12191280, "user_type": "registered", "profile_image": "https://graph.facebook.com/1635189629945309/picture?type=large", "display_name": "Ally Humad", "link": "https://stackoverflow.com/users/12191280/ally-humad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1570654686, "creation_date": 1570654686, "question_id": 58312191, "link": "https://stackoverflow.com/questions/58312191/problem-on-declaring-winner-in-a-m-x-n-tic-tac-toe-game-c-programming", "title": "problem on declaring winner in a M X N tic tac toe game( c programming)", "body": "<p>I made a tic tac toe game and I was having problem about how to win a game of tic tac toe where the number of row, columns and consecutive grids to win the game is entered by the user.\nBut sometimes after putting 2 consecutive grids to win the game(n), the winner is declared and sometime it does not declare the winners(that's where my problem is)</p>\n\n<p>n is the number of consecutive grids to win the game(entered by user)\nr is the number of rows entered by the user\nc is the number of columns entered by the user</p>\n\n<p>I have noticed that when you for example if n = 3, and the user enter 3 consecutive x OR o in a row(xxx OR ooo) it will only declare the winner if the first x or o was started at the corner (ex :coordinate (0,0) (0,1) (0,2) will win the game but coordinate (0,1) (0,2) (0,3) will not) same applies if user won by column or diagonal.</p>\n\n<p>If you want to see the full code to try it on your pc please ask me in the comment section.</p>\n\n<p>This is the code I have tried(but the winner is not always declared)</p>\n\n<pre><code>int player_won(char letter, int n) \n\n{\n    int r, c;\n    int won = 0;\n\n    // Check rows for a win\n    for (r = 0 ; r &lt; n ; ++r) \n    {\n        for (c = 0 ; c &lt; n ; ++c) \n        {\n            if (grid[r][c] != letter) \n            {\n                break;\n            }\n\n        if (grid[r][c] == grid[r][c + 1]) \n            {\n            if (c + 1 == n - 1) \n                {\n                    return 1;\n                }\n        } \n            else break;\n    }\n    }\n\n    // Checks columns for a win\n    for (r = 0 ; r &lt; n ; ++r) \n    {\n\n        for(c = 0 ; c &lt; n ; ++c) \n        {\n        if (grid[c][r] != letter) \n            {\n                break;\n            }\n        if (grid[c][r] == grid[c + 1][r]) \n            {\n            if (c + 1 == n - 1) \n                {\n                    return 1;\n                }\n        } \n            else break;\n    }\n    }\n\n    // Checks first diagonal for a win\n    for (r = 0 ; r &lt; n ; ++r) \n    {\n\n    if(grid[r][r] != letter) \n        {\n            break; \n        }\n\n        if (grid[r][r] == grid[r + 1][r + 1]) \n        {\n            if (r + 1 == n - 1)\n            {\n                return 1;\n            }\n        } \n        else break;\n    }\n\n    // Checks second diagonal for a win\n    c = 0;\n\n    for(r = n - 1 ; r &gt;= 0 ; --r) \n    {\n\n        if(grid[r][c] == letter) \n        {\n\n            won += 1;\n            c += 1;\n        }\n        if (won == n) \n        {\n            return 1;\n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>I expect that (if user enter n = 3), wherever I get 3 consecutive x or o the winner must be declared</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1570654679, "post_id": 58312160, "comment_id": 102985473, "body": "<code>sizeof(join) - 1</code> is the size of a <i>pointer</i> less-one. That clearly isn&#39;t what you had in mind. <code>sizeof</code> doesn&#39;t do what you think it does there. Nearly every time you find yourself providing a <i>pointer</i> to <code>sizeof</code> as its argument, you&#39;re doing something time from inception."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1570654741, "post_id": 58312160, "comment_id": 102985495, "body": "That should be <code>strlen(join)</code>"}, {"owner": {"reputation": 131, "user_id": 12100635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b44a749f3fe873f87d45c449ee2099d0?s=128&d=identicon&r=PG&f=1", "display_name": "S&#252;mer Kol&#231;ak", "link": "https://stackoverflow.com/users/12100635/s%c3%bcmer-kol%c3%a7ak"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1570655333, "post_id": 58312160, "comment_id": 102985729, "body": "@Barmar, I followed your advice and it is working much better now. The only problem is it is lacking it&#39;s own new line. <code>You are visitor number : 8root@s1:&#47;# </code>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1570655430, "post_id": 58312160, "comment_id": 102985764, "body": "You&#39;re subtracting 1 from <code>strlen</code>, so you&#39;re not sending the last character, which is the newline."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1570655473, "post_id": 58312160, "comment_id": 102985784, "body": "<code>strlen()</code> doesn&#39;t count the null terminator, so you don&#39;t need to subtract."}, {"owner": {"reputation": 131, "user_id": 12100635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b44a749f3fe873f87d45c449ee2099d0?s=128&d=identicon&r=PG&f=1", "display_name": "S&#252;mer Kol&#231;ak", "link": "https://stackoverflow.com/users/12100635/s%c3%bcmer-kol%c3%a7ak"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1570655597, "post_id": 58312160, "comment_id": 102985816, "body": "@Barmar, I removed the <code>-1</code> and it works perfectly now. <code>-1</code> was there to remove the <code>\\0</code>. I suppose it was a flaw idea.  If you post the answers from your comments as an answer, I can select it as the <code>chosen answer</code>."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1570655656, "post_id": 58312160, "comment_id": 102985840, "body": "Can&#39;t post an answer to closed questions."}, {"owner": {"reputation": 131, "user_id": 12100635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b44a749f3fe873f87d45c449ee2099d0?s=128&d=identicon&r=PG&f=1", "display_name": "S&#252;mer Kol&#231;ak", "link": "https://stackoverflow.com/users/12100635/s%c3%bcmer-kol%c3%a7ak"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1570655802, "post_id": 58312160, "comment_id": 102985885, "body": "@Barmar, I see, <code>-1</code> perhaps was not a flaw idea. Perhaps it was the correct code incase of <code>sizeof()</code> being used. I am not sure why <code>sizeof()</code> was being used instead of <code>strlen()</code>."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1570655831, "post_id": 58312160, "comment_id": 102985897, "body": "Maybe an earlier version was using a literal string, e.g. <code>sizeof(&quot;foobar&quot;) - 1</code> is the correct thing."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1570655873, "post_id": 58312160, "comment_id": 102985912, "body": "Also <code>sizeof response - 1</code> will work, since <code>response</code> is an array, not a pointer."}], "owner": {"reputation": 131, "user_id": 12100635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b44a749f3fe873f87d45c449ee2099d0?s=128&d=identicon&r=PG&f=1", "display_name": "S&#252;mer Kol&#231;ak", "link": "https://stackoverflow.com/users/12100635/s%c3%bcmer-kol%c3%a7ak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 22, "favorite_count": 0, "closed_date": 1570654796, "answer_count": 0, "score": 0, "last_activity_date": 1570654552, "creation_date": 1570654552, "question_id": 58312160, "link": "https://stackoverflow.com/questions/58312160/maybe-a-malloc-issue-server-to-visitor-message-is-flaw", "closed_reason": "Duplicate", "title": "Maybe a &quot;malloc()&quot; issue : Server to Visitor message is flaw", "body": "<p>Issue : Towards the end of the codes, <code>fputs( join, stdout );</code> prints the string <code>join</code> correctly. However on the visitor side the same string is not printing correctly. </p>\n\n<p>Server Side : ( everything is normal )</p>\n\n<pre><code>root@s1:/test# gcc server_2.c &amp;&amp; ./a.out\nYou are visitor number : 1\nTheir Address : [127.0.0.1]\nYou are visitor number : 2\nTheir Address : [127.0.0.1]\nYou are visitor number : 3\n</code></pre>\n\n<p>Visitor side : ( Only \"<code>You</code>\" is printed and it is also lacking it's own new line )</p>\n\n<pre><code>root@s1:/# echo \"a\" | nc localhost 91\nYouroot@s1:/# ^C\nroot@s1:/# echo \"a\" | nc localhost 91\nroot@s1:/# echo \"a\" | nc localhost 91\nYouroot@s1:/# \n</code></pre>\n\n<p>Code : ( Problem is closer to the end )</p>\n\n<pre><code>int main() {\n\n    int one = 1;\n    struct sockaddr_in My_Address, Their_Address;\n    socklen_t sin_len = sizeof(Their_Address);\n\n    int Path_to_Me = socket(AF_INET, SOCK_STREAM, 0);\n\n    setsockopt(Path_to_Me, SOL_SOCKET, SO_REUSEADDR, &amp;one, sizeof(int));\n\n    int Door = 91;\n\n    My_Address.sin_family = AF_INET;\n    My_Address.sin_addr.s_addr = INADDR_ANY;\n    My_Address.sin_port = htons(Door);\n\n    bind(Path_to_Me, (struct sockaddr *) &amp;My_Address, sizeof(My_Address));\n\n    listen(Path_to_Me, 5);\n\n    int Me_and_Them;\n\n    char response[] = \"You are visitor number :\";\n\n    int count;\n    count = 0;\n\n    for (;;) {\n\n    count = count + 1;\n\n    char str_count[10];\n    sprintf(str_count, \" %d\\n\", count);\n\n    char* join;\n    join = ( malloc( strlen(response) + strlen(str_count) + 1 ) );\n    strcpy(join, response);\n    strcat(join, str_count);\n\n    fputs( join, stdout);\n\n    Me_and_Them = accept(Path_to_Me, (struct sockaddr *) &amp;Their_Address, &amp;sin_len);\n    printf(\"Their Address : [%s]\\n\", inet_ntoa(Their_Address.sin_addr));\n\n    write(Me_and_Them, join, sizeof(join) - 1); \n\n    close(Me_and_Them);\n\n    }\n\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "function", "pointers"], "comments": [{"owner": {"reputation": 393, "user_id": 10572727, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bnMJo.jpg?s=128&g=1", "display_name": "Adan Vivero", "link": "https://stackoverflow.com/users/10572727/adan-vivero"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1570655150, "post_id": 58311976, "comment_id": 102985651, "body": "@WhozCraig how would I fix that i &lt; length. I have trouble understanding with pointers and int. I want to have that be the size which is declared from the main. Could you provide a short explanation."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1570655289, "post_id": 58311976, "comment_id": 102985708, "body": "I was specifically referring to <code>void removeDups(int *array, int *length)</code> where you use <code>length</code> within as if it is <code>int</code> rather than the <code>int *</code> it is declared to be. Whatever tutorial or book you&#39;re using should have ample instruction on using pointers."}, {"owner": {"reputation": 393, "user_id": 10572727, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bnMJo.jpg?s=128&g=1", "display_name": "Adan Vivero", "link": "https://stackoverflow.com/users/10572727/adan-vivero"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1570655757, "post_id": 58311976, "comment_id": 102985871, "body": "@WhozCraig thank you! I fixed it up! I will be posting the updated code."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1570656062, "post_id": 58311976, "comment_id": 102985963, "body": "<i>YIKES!</i> Please Do NOT change the code in your original question. You are free to <i>ADD</i> new code as an edit at the end of your question, but don&#39;t remove the original code. Why? Because all comments and answers referring to the original are rendered meaningless if the code they refer to no longer exists in your question..."}, {"owner": {"reputation": 393, "user_id": 10572727, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bnMJo.jpg?s=128&g=1", "display_name": "Adan Vivero", "link": "https://stackoverflow.com/users/10572727/adan-vivero"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1570656131, "post_id": 58311976, "comment_id": 102985980, "body": "@DavidC.Rankin I apologize, however I do believe if you click edit, you can see the original question and all of the changes that have been made."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1570659689, "post_id": 58311976, "comment_id": 102986972, "body": "Yes, you can, and you should use that feature to copy the edit you made, then click &quot;Revert Changes&quot; and restore the original question and then paste the new additions at the end. No harm the first time, but the &quot;Why?&quot; above is there reason for not doing it again going forward <code>:)</code>"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1570699343, "post_id": 58311976, "comment_id": 102998399, "body": "@Adan Vivero I do not understand why the output should be 10 6 8 when 6 is a duplicated value. Non-duplicated values in the array are 8, 3, 10, 2."}], "answers": [{"comments": [{"owner": {"reputation": 393, "user_id": 10572727, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bnMJo.jpg?s=128&g=1", "display_name": "Adan Vivero", "link": "https://stackoverflow.com/users/10572727/adan-vivero"}, "edited": false, "score": 0, "creation_date": 1570654582, "post_id": 58312047, "comment_id": 102985437, "body": "Oh thank you! I didn&#39;t notice that, and I had an end variable in there but I got rid of it. It&#39;s suppose to be length, but I edited again and cleaned it up. I will run it now."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 393, "user_id": 10572727, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bnMJo.jpg?s=128&g=1", "display_name": "Adan Vivero", "link": "https://stackoverflow.com/users/10572727/adan-vivero"}, "edited": false, "score": 0, "creation_date": 1570655619, "post_id": 58312047, "comment_id": 102985827, "body": "@AdanVivero I think that if I were you posting this question I would like an answer from a simple solution to a bit more complicated one, and that&#39;s how my answer looks like now I believe, hope it helps!"}, {"owner": {"reputation": 393, "user_id": 10572727, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bnMJo.jpg?s=128&g=1", "display_name": "Adan Vivero", "link": "https://stackoverflow.com/users/10572727/adan-vivero"}, "edited": false, "score": 0, "creation_date": 1570656063, "post_id": 58312047, "comment_id": 102985965, "body": "it took place in that if statement in the loops, but I haven&#39;t tried what you recommended just yet. I will be soon!"}, {"owner": {"reputation": 393, "user_id": 10572727, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bnMJo.jpg?s=128&g=1", "display_name": "Adan Vivero", "link": "https://stackoverflow.com/users/10572727/adan-vivero"}, "edited": false, "score": 0, "creation_date": 1570656729, "post_id": 58312047, "comment_id": 102986180, "body": "I tried this, all I get is 0 elements. I&#39;m not sure if it&#39;s because of length or the j in the loop."}, {"owner": {"reputation": 393, "user_id": 10572727, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bnMJo.jpg?s=128&g=1", "display_name": "Adan Vivero", "link": "https://stackoverflow.com/users/10572727/adan-vivero"}, "edited": false, "score": 0, "creation_date": 1570656790, "post_id": 58312047, "comment_id": 102986203, "body": "I tried this, all I get is 0 elements. I&#39;m not sure if it&#39;s because of length or the j in the loop."}], "tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": false, "score": 1, "last_activity_date": 1570655567, "last_edit_date": 1570655567, "creation_date": 1570653993, "answer_id": 58312047, "question_id": 58311976, "link": "https://stackoverflow.com/questions/58311976/error-in-removing-duplicate-in-c-using-pointers/58312047#58312047", "title": "Error in removing duplicate in C using pointers", "body": "<p>Please fix all the warnings in your code - you can enable the <code>Wall</code> and <code>Wextra</code> flags in GCC for example.</p>\n\n<p>Then one logical error I see is here:</p>\n\n<pre><code>array[j] == array[i]\n</code></pre>\n\n<p>where you would like to assign, not compare, so change it to:</p>\n\n<pre><code>array[j] = array[i]\n</code></pre>\n\n<p>Moreover, when you print the array with the duplicate values removed, you iterate until <code>end</code>, but this variable is undeclared.</p>\n\n<hr>\n\n<p>I think that you need to take a step back and do the operation with using an extra array, which will be the old array with duplicate elements removed. In that case you could modify your code to something like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nvoid removeDups(int *array, int length)\n{\n  int array_no_dups[length];\n  int unique_n = 0;\n  for(int i = 0; i &lt; length; ++i)\n  {\n    int found = 0; // flag\n    //check if element already in the array without duplicates\n    for(int j = 0; j &lt; unique_n; j++)\n    {\n      if(array[i] == array_no_dups[j])\n        found = 1;\n    }\n    // If not found\n    if(!found)\n      // then append it to the array without duplicates\n      array_no_dups[unique_n++] = array[i];\n  }\n  printf(\"Number of new elements: %d,\", unique_n);\n  printf(\" new elements: \");\n  for(int i = 0; i &lt; unique_n; i++)\n  {\n    printf(\"%d \", array_no_dups[i]);\n  }\n}\nvoid print_array(int *array, int length)\n{\n    printf(\"Number of elements: %d,\", length);\n    printf(\" Orginal elements: \");\n    for(int i = 0; i &lt; length; i++)\n    {\n            printf(\"%d \" , array[i]);\n    }\n}\nint main()\n{\n    int array[10];\n    int size = 10;\n    for(int i = 0; i &lt; size; i++)\n      array[i] = rand() % 10 + 1;\n    print_array(array, size);\n    printf(\"\\n\");\n    removeDups(array, size);\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Number of elements: 10, Orginal elements: 4 7 8 6 4 6 7 3 10 2 \nNumber of new elements: 7, new elements: 4 7 8 6 3 10 2 \n</code></pre>\n\n<hr>\n\n<p>Now, if you really want to remove duplicates in-place, then every time you'd find a duplicate value, you would need to swap the 2nd occurrence of it with the last element of your array (that would be indexed by the counter you would maintain). Of course you would need to be careful with your indices now.</p>\n\n<p>For example you could it <strong>in-place</strong> like that (call the method like this: <code>removeDups(array, &amp;size);</code>):</p>\n\n<pre><code>void removeDups(int *array, int *length)\n{\n  int original_len = *length;\n  for(int i = 0; i &lt; original_len - 1; ++i)\n  {\n    for(int j = i + 1; j &lt; *length; ++j)\n    {\n      if(array[i] == array[j])\n      {\n        array[j] = array[*length - 1];\n        (*length)--;\n        j--;  // since the new `array[j]` element might be also a duplicate of `array[i]`\n      }\n    }\n  }\n  printf(\"Number of new elements: %d,\", *length);\n  printf(\" new elements: \");\n  for(int i = 0; i &lt; *length; i++)\n  {\n    printf(\"%d \", array[i]);\n  }\n}\n</code></pre>\n\n<p>Now the output would be:</p>\n\n<blockquote>\n  <p>Number of new elements: 7, new elements: 4 7 8 6 2 3 10 </p>\n</blockquote>\n\n<p>where the original order of the elements is not preserved.</p>\n\n<p>If you want to do it in-place and preserve the original order, then instead of swapping every time you find a duplicate, you should shift all the subarray from the (j+1)-th element one position to the left. </p>\n\n<p>This is a much more expensive operation in terms of Time Complexity, but that's the trade-off, you are slower, but you preserve order. You should do what your application requires you to do, i.e. if order matters, do the shift-approach, if order does not matter, use the swap-approach.</p>\n"}, {"comments": [{"owner": {"reputation": 393, "user_id": 10572727, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bnMJo.jpg?s=128&g=1", "display_name": "Adan Vivero", "link": "https://stackoverflow.com/users/10572727/adan-vivero"}, "edited": false, "score": 0, "creation_date": 1570655019, "post_id": 58312133, "comment_id": 102985600, "body": "I receive an error that &quot;length&quot; inside the array is not a subscript. How would I fix that. Also I was confused by your in order one. Where would be the most appropriate place to decrement the length?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9658871"}, "reply_to_user": {"reputation": 393, "user_id": 10572727, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bnMJo.jpg?s=128&g=1", "display_name": "Adan Vivero", "link": "https://stackoverflow.com/users/10572727/adan-vivero"}, "edited": false, "score": 1, "creation_date": 1570657382, "post_id": 58312133, "comment_id": 102986390, "body": "@AdanVivero In cases where the span of values is much lower than the amount (like a giant array of values between 1 and 4), then using a secondary array will be much more efficient. You should work with gsamaras&#39; answer."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user9658871"}, "is_accepted": true, "score": 1, "last_activity_date": 1570657709, "last_edit_date": 1570657709, "creation_date": 1570654432, "answer_id": 58312133, "question_id": 58311976, "link": "https://stackoverflow.com/questions/58311976/error-in-removing-duplicate-in-c-using-pointers/58312133#58312133", "title": "Error in removing duplicate in C using pointers", "body": "<p>This part</p>\n\n<pre><code> if(array[i] == array[j])\n {\n   array[j] == array[i];\n   length++;\n }\n</code></pre>\n\n<p>does not make sense.\nThe</p>\n\n<pre><code>array[j] == array[i];\n</code></pre>\n\n<p>expression is a comparison. I suppose you wanted to affect <code>array[i]</code> to <code>array[j]</code> with</p>\n\n<pre><code>array[j] = array[i];\n</code></pre>\n\n<p>but you <em>just</em> confirmed they were the same.<br>\nThen you increment the <code>length</code>, which is dangerous, and meaningless in this context.  </p>\n\n<p>If order is not important, replace <code>array[j]</code> with <code>array[length - 1]</code> then decrement <code>length</code>.<br>\nIf order is important move every value from <code>array[j + 1]</code> to <code>array[length - 1]</code> into <code>array[j]</code> to <code>array[length - 2]</code>, then decrement <code>length</code>.</p>\n\n<p>Also remove the</p>\n\n<pre><code>length = 10;\n</code></pre>\n\n<p>line. Here <code>length</code> is already 10 when you call <code>removeDups</code>, and if you call it with a smaller array you will read outside of your array. You also only need to compare a value with the values after it; when <code>array[i]</code> is being compared, it has already been compared to all values between <code>array[0]</code> and <code>array[i - 1]</code>.</p>\n\n<pre><code>for(i = 0; i &lt; *length; i++)\n{\n        for(j = i + 1; j &lt; *length; j++)\n        {\n                if(array[i] == array[j])\n                {\n                        array[j] = array[*length - 1];\n                        (*length)--;\n                }       \n        }\n}\n</code></pre>\n\n<p>Edited: Riiight, length is int*!</p>\n\n<p>Ordered version:</p>\n\n<pre><code>for(i = 0; i &lt; *length; i++)\n{\n        for(j = i + 1; j &lt; *length; j++)\n        {\n                if(array[i] == array[j])\n                {\n                        for (int k = j; k &lt; *length - 1; ++k)\n                        {\n                                array[k] = array[k + 1];\n                        }\n                        (*length)--;\n                        j--; //I forgot this, but once you moved all values array[j] will have been updated and you must compare it again.\n                }       \n        }\n}\n</code></pre>\n\n<p>Or use a secondary array, as gsamaras suggests.</p>\n"}], "owner": {"reputation": 393, "user_id": 10572727, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bnMJo.jpg?s=128&g=1", "display_name": "Adan Vivero", "link": "https://stackoverflow.com/users/10572727/adan-vivero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 233, "favorite_count": 0, "accepted_answer_id": 58312133, "answer_count": 2, "score": 0, "last_activity_date": 1570657709, "creation_date": 1570653614, "last_edit_date": 1570655877, "question_id": 58311976, "link": "https://stackoverflow.com/questions/58311976/error-in-removing-duplicate-in-c-using-pointers", "title": "Error in removing duplicate in C using pointers", "body": "<p>I have an error with my code where I am trying to get the duplicates and remove them. </p>\n\n<p>however when I try this it doesn't remove anything and still gives me the same values in the output as the original. </p>\n\n<p>Down below I displayed the two methods. </p>\n\n<p>void print_array just prints out the array. </p>\n\n<p>void removeDups I want is to get the duplicates and remove them and print the new array.</p>\n\n<p>Let me know where the error occurs. </p>\n\n<p>Also pointer notation would be recommended. Thank you! </p>\n\n<pre><code>void removeDups(int *array, int *length)\n{\n        *length = 10;\n        int i, j;\n        for(i = 0; i &lt; *length; i++)\n        {\n           for(j = 0; j &lt; *length; j++)\n           {\n             if(array[i] == array[j])\n             {\n                array[j] = array[*length-2];\n                length++;\n              }\n            }\n        }\n        printf(\"Number of new elements: %d,\", *length);\n        printf(\" new elements: \");\n        for(i = 0; i &lt; *length; i++)\n        {\n                printf(\"%d \" , array[i]);\n        }\n}\n\nvoid print_array(int *array, int length)\n{\n    printf(\"Number of elements: %d,\", length);\n    int i;\n    printf(\" Orginal elements: \");\n    for(i = 0; i &lt; length; i++)\n    {\n            printf(\"%d \" , array[i]);\n    }\n}\nint main()\n{\n    int array [10];\n    int i, number;\n    int size = 10;\n    int *length;\n    length = &amp;size;\n    for(i = 0; i &lt; size; i++)\n    {\n            number = rand() % 10 + 1;\n            array[i] = number;\n    }\n    print_array(array, size);\n    printf(\"\\n\");\n    removeDups(array, length);\n    return 0;\n}\n</code></pre>\n\n<p>output:</p>\n\n<p>Number of elements: 10, Orginal elements: 4 7 8 6 4 6 7 3 10 2</p>\n\n<p>Number of new elements: 3, new elements: 10 6 8</p>\n"}, {"tags": ["c", "arm", "microcontroller", "stm32", "cortex-m"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1570652972, "post_id": 58311794, "comment_id": 102984796, "body": "And what is happening with this program? What is the problem you have? Do you get build errors? Unexpected results when running? Crashes when running? Please read or refresh <a href=\"http://stackoverflow.com/help/how-to-ask\">how to ask good questions</a>, as well as <a href=\"https://codeblog.jonskeet.uk/2012/11/24/stack-overflow-question-checklist/\" rel=\"nofollow noreferrer\">this question checklist</a>."}, {"owner": {"reputation": 75, "user_id": 11858777, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Q8f9GDSSIA0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcw4ubmTvBX2yWm2dhCkxSyj77hEg/photo.jpg?sz=128", "display_name": "g.mezzina23", "link": "https://stackoverflow.com/users/11858777/g-mezzina23"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1570653567, "post_id": 58311794, "comment_id": 102985017, "body": "The question has been edited. GM"}, {"owner": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "edited": false, "score": 0, "creation_date": 1570689197, "post_id": 58311794, "comment_id": 102993529, "body": "I&#39;m afraid that you have to read the target&#39;s documentation and to learn how to set and reset port pins. BTW, there should be some example with your Keil IDE, at least this was true when I tried &#181;Vision some years ago. IIRC it is called &quot;blinky&quot; which does pretty much what you are trying."}], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 11858777, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Q8f9GDSSIA0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcw4ubmTvBX2yWm2dhCkxSyj77hEg/photo.jpg?sz=128", "display_name": "g.mezzina23", "link": "https://stackoverflow.com/users/11858777/g-mezzina23"}, "edited": false, "score": 0, "creation_date": 1570719037, "post_id": 58321636, "comment_id": 103009868, "body": "I solved reading the registers. The GPIOA_MODER has a reset value of 0xABFFFFFF, so I cannot use a bitwise operator as in the code. I need to put 0xABFFF7FF, to set the PA5 direction."}, {"owner": {"reputation": 1081, "user_id": 5868088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6978642b0acdb8a6ecce743132ecc050?s=128&d=identicon&r=PG", "display_name": "Tagli", "link": "https://stackoverflow.com/users/5868088/tagli"}, "reply_to_user": {"reputation": 75, "user_id": 11858777, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Q8f9GDSSIA0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcw4ubmTvBX2yWm2dhCkxSyj77hEg/photo.jpg?sz=128", "display_name": "g.mezzina23", "link": "https://stackoverflow.com/users/11858777/g-mezzina23"}, "edited": false, "score": 0, "creation_date": 1570724571, "post_id": 58321636, "comment_id": 103012844, "body": "Ah, I missed that one. It seems L series are different from F series when it comes to reset values of MODER registers."}], "tags": [], "owner": {"reputation": 1081, "user_id": 5868088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6978642b0acdb8a6ecce743132ecc050?s=128&d=identicon&r=PG", "display_name": "Tagli", "link": "https://stackoverflow.com/users/5868088/tagli"}, "is_accepted": true, "score": 0, "last_activity_date": 1570706173, "creation_date": 1570706173, "answer_id": 58321636, "question_id": 58311794, "link": "https://stackoverflow.com/questions/58311794/blinking-led-in-bare-metal-c-programming-stm32l476rg-nucleo-board/58321636#58321636", "title": "Blinking Led in Bare-Metal C programming: STM32L476RG Nucleo Board", "body": "<p>I may be wrong, but according to the reference manual (RM0351) section 6.2.19, you should wait 2 clock cycles after enabling the peripheral clock, before accessing its registers. Try introducing a short delay after RCC->AHB2ENR |= 1; line. In your case, I think MODER register is not getting the correct value.</p>\n\n<p>I also suggest checking the actual values of registers with a debugger.</p>\n"}], "owner": {"reputation": 75, "user_id": 11858777, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Q8f9GDSSIA0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcw4ubmTvBX2yWm2dhCkxSyj77hEg/photo.jpg?sz=128", "display_name": "g.mezzina23", "link": "https://stackoverflow.com/users/11858777/g-mezzina23"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 405, "favorite_count": 0, "accepted_answer_id": 58321636, "answer_count": 1, "score": -3, "last_activity_date": 1570706173, "creation_date": 1570652792, "last_edit_date": 1570653525, "question_id": 58311794, "link": "https://stackoverflow.com/questions/58311794/blinking-led-in-bare-metal-c-programming-stm32l476rg-nucleo-board", "title": "Blinking Led in Bare-Metal C programming: STM32L476RG Nucleo Board", "body": "<p>I tried to implement a classic blink example on an STM32L476RG Nucleo board.</p>\n\n<p>According to the STM32L4x datasheet: the LD2 is connected to the GPIOA PORT 5 (PA5).\nThe PA5 uses the AHB2 bus.</p>\n\n<p><strong>Note:</strong> I used Keil uVision 5; I created a New uVision Project with STM32L476RGTx target.\nIn the \"Manage Run-Time Environment\" dialog box I selected:</p>\n\n<ol>\n<li>CMSIS >> Core (flag)</li>\n<li>Device >> Startup  (flag)</li>\n</ol>\n\n<p>Here the code:</p>\n\n<pre><code>#include \"stm32l4xx.h\"                  // Device header\n//#include &lt;stdint.h&gt;\n\n//#define MASK(x) ((uint32_t) (1&lt;&lt;(x))) // bitmasking \n\nvoid delayMs(int delay);\n\nint main(void){\n    // RCC-&gt;AHB2RSTR |=1; \n    // RCC-&gt;AHB2RSTR &amp;=~1; \n    // RCC-&gt;AHB2ENR |= MASK(0); //bitwise OR. Enable GPIOA clock\n     RCC-&gt;AHB2ENR |= 1;\n     //GPIOA-&gt;MODER |= MASK(10);\n    GPIOA-&gt;MODER |= 0x400; \n\n    while(1){\n\n\n        //GPIOA-&gt;ODR |= MASK(4);\n         GPIOA-&gt;ODR |= 0x20;\n        delayMs(500);\n        //GPIOA-&gt;ODR &amp;= ~MASK(4);\n        GPIOA-&gt;ODR &amp;= ~0x20;\n        delayMs(500);\n    }\n}\n\nvoid delayMs(int delay){\nint i;\n    for(;delay&gt;0; delay --){\n        for (i=0; i&lt;3195;i++);\n    }\n}\n</code></pre>\n\n<p>The Build output returns:</p>\n\n<pre><code>Build started: Project: blinknew\n*** Using Compiler 'V5.06 update 6 (build 750)', folder: 'C:\\Keil_v5\\ARM\\ARMCC\\Bin'\nBuild target 'Target 1'\ncompiling main.c...\nlinking...\nProgram Size: Code=520 RO-data=408 RW-data=0 ZI-data=1632  \n\".\\Objects\\blinknew.axf\" - 0 Error(s), 0 Warning(s).\nBuild Time Elapsed:  00:00:09\n</code></pre>\n\n<p>and when I download it, Keil uV 5 returns:</p>\n\n<pre><code> Load \"C:\\\\Users\\\\gmezz\\\\OneDrive\\\\Documenti\\\\Bare_Metal\\\\Blinknew\\\\Objects\\\\blinknew.axf\" \nErase Done.\nProgramming Done.\nVerify OK.\nFlash Load finished at 22:37:52\n</code></pre>\n\n<p>The LED should blink with a period of 1 s, but in reality, nothing happens.</p>\n\n<p>Honestly, I don't understand what is going wrong.</p>\n\n<p>Someone can help me?</p>\n\n<p>GM</p>\n"}, {"tags": ["c", "scanf"], "answers": [{"tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": 1, "last_activity_date": 1570652473, "creation_date": 1570652473, "answer_id": 58311720, "question_id": 58311683, "link": "https://stackoverflow.com/questions/58311683/fscanf-not-reading-in-random-values-right/58311720#58311720", "title": "fscanf not reading in random values right?", "body": "<pre><code>     fprintf(answer_file,\"%5.2f %5.2f %5.2f %5.2f \\n\",&amp;radius,&amp;nsides,&amp;area,&amp;perimeter);\n</code></pre>\n\n<p>You're printing the addresses of <code>radius</code>, <code>nsides</code>, <code>area</code>, and <code>perimeter</code>. The <code>&amp;</code> operator takes the address of a variable. You want to print their <em>values</em>.</p>\n"}, {"tags": [], "owner": {"reputation": 109324, "user_id": 21926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6e61d47f9a6ec0a7a286835e51f3332?s=128&d=identicon&r=PG", "display_name": "Sean Bright", "link": "https://stackoverflow.com/users/21926/sean-bright"}, "is_accepted": true, "score": 1, "last_activity_date": 1570652492, "creation_date": 1570652492, "answer_id": 58311725, "question_id": 58311683, "link": "https://stackoverflow.com/questions/58311683/fscanf-not-reading-in-random-values-right/58311725#58311725", "title": "fscanf not reading in random values right?", "body": "<p>You're trying to print a pointer as a floating point number (your compiler should be complaining). Change:</p>\n\n<pre><code>fprintf(answer_file,\"%5.2f %5.2f %5.2f %5.2f \\n\",&amp;radius,&amp;nsides,&amp;area,&amp;perimeter);\n</code></pre>\n\n<p>To:</p>\n\n<pre><code>fprintf(answer_file,\"%5.2f %5.2f %5.2f %5.2f \\n\", radius, nsides, area, perimeter);\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 5187665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbec6ad8ba8189ab93970ea44afeec39?s=128&d=identicon&r=PG&f=1", "display_name": "2000rs25", "link": "https://stackoverflow.com/users/5187665/2000rs25"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 58311725, "answer_count": 2, "score": -1, "last_activity_date": 1570652492, "creation_date": 1570652323, "question_id": 58311683, "link": "https://stackoverflow.com/questions/58311683/fscanf-not-reading-in-random-values-right", "title": "fscanf not reading in random values right?", "body": "<p>Im trying to read in some numbers from a file and output the results into another file. Every time I try to do this though I just get random values even for values that I am not modifying. I know it probably has something to do with the way I am reading info but I am not sure.\ncontents of lab4sample.dat</p>\n\n<pre><code>12.4   24.0\n 5.6    8.0\n7.85   12.0\n</code></pre>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n//#define FILE_IN \u201clab4.dat\u201d\n#define FILE_IN \"lab4sample.dat\"\n\ndouble areaPolygon(double radius, double nsides);\ndouble perimeterPolygon(double radius, double nsides);\n\nint main(void)\n{\n     FILE * infile;\n     FILE * answer_file;\n\n     double radius;\n     double nsides;\n     double area;\n     double perimeter;\n\n     infile = fopen(FILE_IN,\"r\");\n     if(infile == NULL)\n     {\n         printf(\"Error on opening the data file\\n\");\n         exit(EXIT_FAILURE);\n     }\n\n     answer_file = fopen(\"lab4.out\",\"w\");\n     if(answer_file == NULL)\n     {\n         printf(\"Error on opening the output file\\n\");\n         exit(EXIT_FAILURE);\n     }\n\n     fprintf(answer_file, \"\\n  Lab 4.\\n\\n\");\n     fprintf(answer_file, \"            Number      Perimeter      Area Of  \\n\");\n     fprintf(answer_file, \" Radius    Of Sides    Of Polygon      Polygon  \\n\");\n     fprintf(answer_file, \"--------   --------   ------------   ----------- \\n\");\n\n     while((fscanf(infile, \"%lf %lf\\n\",&amp;radius, &amp;nsides))== 2)\n     {\n         area = areaPolygon(radius,nsides);\n         perimeter = perimeterPolygon(radius,nsides);\n         fprintf(answer_file,\"%5.2f %5.2f %5.2f %5.2f \\n\",&amp;radius,&amp;nsides,&amp;area,&amp;perimeter);\n     }\n\n }\n</code></pre>\n"}, {"tags": ["python", "c", "readfile"], "comments": [{"owner": {"reputation": 11, "user_id": 6590543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35ab1b92e8b2f3328ed4b1408a972b98?s=128&d=identicon&r=PG&f=1", "display_name": "Macadamia Brazowy", "link": "https://stackoverflow.com/users/6590543/macadamia-brazowy"}, "edited": false, "score": 0, "creation_date": 1570650925, "post_id": 58311371, "comment_id": 102984047, "body": "The data set is 4 numbers and after jumps to the next line."}], "answers": [{"tags": [], "owner": {"reputation": 1083, "user_id": 4739755, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-xGt648wZsco/AAAAAAAAAAI/AAAAAAAAAGo/EfA-KvgfzKo/photo.jpg?sz=128", "display_name": "b_c", "link": "https://stackoverflow.com/users/4739755/b-c"}, "is_accepted": false, "score": 0, "last_activity_date": 1570651533, "creation_date": 1570651533, "answer_id": 58311517, "question_id": 58311371, "link": "https://stackoverflow.com/questions/58311371/problem-saving-data-from-file-dat-to-an-array/58311517#58311517", "title": "Problem saving data from file .dat to an array", "body": "<p>Your delimiter (<code>delimiter=\" \"</code>) is what's causing the failure.</p>\n\n<p>The default delimiter in <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.loadtxt.html\" rel=\"nofollow noreferrer\"><code>numpy.loadtxt</code></a> is \"Any whitespace\". Since you're specifying a single space, it's using that as the delimiter, but then including <em>all other spaces</em> as part of the value.</p>\n\n<p>If you leave off the <code>delimiter</code> parameter, you'll get the values as expected (where \"test.dat\" is your data as posted):</p>\n\n<pre><code>&gt;&gt;&gt; import numpy\n&gt;&gt;&gt; numpy.loadtxt('test.dat', comments='#', unpack=False)\narray([[0.001     , 0.0018    , 0.09979995, 0.2000999 ],\n       [0.0028    , 0.00324   , 0.09943961, 0.20027922],\n       [0.00604   , 0.005832  , 0.09879018, 0.20060035]])\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6590543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35ab1b92e8b2f3328ed4b1408a972b98?s=128&d=identicon&r=PG&f=1", "display_name": "Macadamia Brazowy", "link": "https://stackoverflow.com/users/6590543/macadamia-brazowy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570651533, "creation_date": 1570650858, "last_edit_date": 1570651163, "question_id": 58311371, "link": "https://stackoverflow.com/questions/58311371/problem-saving-data-from-file-dat-to-an-array", "title": "Problem saving data from file .dat to an array", "body": "<p>I have a program in C which makes a output file calles orbits_toy_model.dat as follows:</p>\n\n<pre><code>1.00000e-003     1.80000e-003   0.099799950033337   0.200099899983342\n2.80000e-003     3.24000e-003   0.099439608731989   0.200279215634646\n6.04000e-003     5.83200e-003   0.098790183270494   0.200600348178616\n</code></pre>\n\n<p>So I have done an easy program in python to read the data an save in an array:</p>\n\n<pre><code>from numpy import loadtxt\nlines = loadtxt(\"C:/Users/Marta/OneDrive/Documents/Master/TFM/Code/EjemploIntegracion/prueba.dat\", comments=\"#\", delimiter=\" \", unpack=False)\n</code></pre>\n\n<p>This is working for a simple data file:</p>\n\n<pre><code>1 2 3\n4 5 6\n</code></pre>\n\n<p>But when I run the actual data file does not work it says:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:/Users/Marta/.PyCharmCE2018.2/config/scratches/scratch_7.py\", line 10, in &lt;module&gt;\n    lines = loadtxt(\"C:/Users/Marta/OneDrive/Documents/Master/TFM/Code/EjemploIntegracion/orbits_toy_model.dat\", comments=\"#\", delimiter=\" \", unpack=False)\n  File \"C:\\Users\\Marta\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\numpy\\lib\\npyio.py\", line 1101, in loadtxt\n    for x in read_data(_loadtxt_chunksize):\n  File \"C:\\Users\\Marta\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\numpy\\lib\\npyio.py\", line 1028, in read_data\n    items = [conv(val) for (conv, val) in zip(converters, vals)]\n  File \"C:\\Users\\Marta\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\numpy\\lib\\npyio.py\", line 1028, in &lt;listcomp&gt;\n    items = [conv(val) for (conv, val) in zip(converters, vals)]\n  File \"C:\\Users\\Marta\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\numpy\\lib\\npyio.py\", line 746, in floatconv\n    return float(x)\nValueError: could not convert string to float: \n</code></pre>\n\n<p>It seems that the format of my file is not in a proper way, there is any way to do it with this format in python?.</p>\n"}, {"tags": ["c", "arrays", "pointers"], "answers": [{"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 2, "last_activity_date": 1570650499, "creation_date": 1570650499, "answer_id": 58311296, "question_id": 58311219, "link": "https://stackoverflow.com/questions/58311219/how-to-define-an-array-of-pointers-to-array-of-pointers-in-c/58311296#58311296", "title": "How to define an array of pointers to array of pointers in C?", "body": "<p>Remember that arrays naturally decays to pointers to their first element. For an array of pointers, that becomes a pointer to a pointer, i.e. <code>const char **</code> for your arrays <code>m1</code> to <code>m4</code>.</p>\n\n<p>So you need an array of pointer to pointers:</p>\n\n<pre><code>const char **exm[] = { m1, m2, m3, m4 };\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 12184539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fff45bf8aec56a941b5c9a274651ed1f?s=128&d=identicon&r=PG&f=1", "display_name": "merdoc", "link": "https://stackoverflow.com/users/12184539/merdoc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 1, "accepted_answer_id": 58311296, "answer_count": 1, "score": 1, "last_activity_date": 1570650499, "creation_date": 1570650181, "question_id": 58311219, "link": "https://stackoverflow.com/questions/58311219/how-to-define-an-array-of-pointers-to-array-of-pointers-in-c", "title": "How to define an array of pointers to array of pointers in C?", "body": "<p>Lets say I have the following pointer arrays:</p>\n\n<pre><code>const char* m1[5] = { \"bla\", \"asdada\", \"sadasde\", \"wrskm\", \"adjsad\" };\nconst char* m2[5] = { \"xxx\", \"yyy\", \"zzz\", \"uuu\", \"vvv\" };\nconst char* m3[5] = { \"lkkl\", \"kkk\", \"lkkl\", \"skl\", \"jkljkl\" };\nconst char *m4[5] = { \"one\", \"two\", \"three\", \"four\", \"five\" };\n</code></pre>\n\n<p>I just want to represent the data above in a single array where each element represents one of the array above. like array of array of pointers to cons char structure(corrected me please if this saying wrong) I try to do the following but it doesn't work</p>\n\n<pre><code>char *(const char* exm[5])[4] = { &amp;m1, &amp;m2, &amp;m3, &amp;m4};\n</code></pre>\n\n<p>Help?</p>\n"}, {"tags": ["c", "arrays", "function"], "comments": [{"owner": {"reputation": 1340, "user_id": 7218062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0e0d5a2d3c49c93f1aafd67adaaca59?s=128&d=identicon&r=PG&f=1", "display_name": "jmq", "link": "https://stackoverflow.com/users/7218062/jmq"}, "edited": false, "score": 1, "creation_date": 1570650014, "post_id": 58311111, "comment_id": 102983696, "body": "my_function() just gets a pointer to an integer which is 8 bytes on your system.  It has no way of knowing the size of the structure it is pointing to."}, {"owner": {"reputation": 3, "user_id": 11812823, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sx5KiD_SOl8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd9GJdLnkNmvphOljYFctITlyB4fA/photo.jpg?sz=128", "display_name": "Ali", "link": "https://stackoverflow.com/users/11812823/ali"}, "reply_to_user": {"reputation": 1340, "user_id": 7218062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0e0d5a2d3c49c93f1aafd67adaaca59?s=128&d=identicon&r=PG&f=1", "display_name": "jmq", "link": "https://stackoverflow.com/users/7218062/jmq"}, "edited": false, "score": 0, "creation_date": 1570650288, "post_id": 58311111, "comment_id": 102983803, "body": "@jmq - What is that integer ? the address of array ?"}, {"owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 0, "creation_date": 1570650316, "post_id": 58311111, "comment_id": 102983812, "body": "<code>sizeof</code> shows the size of the <i>type</i>, not the data sent in. The type doesn\u2019t have size of the array so it is just a pointer and there\u2019s no size information available. You always need to give the size to the function separately"}, {"owner": {"reputation": 3, "user_id": 11812823, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sx5KiD_SOl8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd9GJdLnkNmvphOljYFctITlyB4fA/photo.jpg?sz=128", "display_name": "Ali", "link": "https://stackoverflow.com/users/11812823/ali"}, "reply_to_user": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 0, "creation_date": 1570650438, "post_id": 58311111, "comment_id": 102983864, "body": "@SamiKuhmonen Thanks"}], "answers": [{"tags": [], "owner": {"reputation": 9367, "user_id": 4454124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c094d8979fb41b789a7c7f21d9329359?s=128&d=identicon&r=PG&f=1", "display_name": "mnistic", "link": "https://stackoverflow.com/users/4454124/mnistic"}, "is_accepted": true, "score": 0, "last_activity_date": 1570650291, "creation_date": 1570650291, "answer_id": 58311238, "question_id": 58311111, "link": "https://stackoverflow.com/questions/58311111/difference-between-sizeofarray-before-and-after-passing-to-function-in-c/58311238#58311238", "title": "difference between sizeof(array) before and after passing to function in C", "body": "<p>Arrays decay to pointers when passed as function parameters, so in <code>my_function</code> the statement <code>printf(\"%d\\n\", sizeof(x)/sizeof(x[0]));</code> is equivalent to <code>printf(\"%d\\n\", sizeof(int*)/sizeof(int));</code>. On your machine and with your compiler, the size of the pointer is equal to twice the size of an int.</p>\n"}], "owner": {"reputation": 3, "user_id": 11812823, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sx5KiD_SOl8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd9GJdLnkNmvphOljYFctITlyB4fA/photo.jpg?sz=128", "display_name": "Ali", "link": "https://stackoverflow.com/users/11812823/ali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "closed_date": 1570653291, "accepted_answer_id": 58311238, "answer_count": 1, "score": 0, "last_activity_date": 1570650291, "creation_date": 1570649687, "question_id": 58311111, "link": "https://stackoverflow.com/questions/58311111/difference-between-sizeofarray-before-and-after-passing-to-function-in-c", "closed_reason": "Duplicate", "title": "difference between sizeof(array) before and after passing to function in C", "body": "<p><code>y</code> is an array of integers with 10 members (size=40 Bytes) but when I pass it to <code>my_function()</code> as <code>x</code> , <code>x</code> has 10 members but if I try to get it's size (<code>sizeof(x)</code>) I will get 8 Bytes as result.</p>\n\n<p>Could you please explain why this happens ?</p>\n\n<pre><code>void my_function(int x[]) {\n  printf(\"%d\\n\", sizeof(x)/sizeof(x[0]));\n}\n\nint main() {\n\n  int y[] = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10};\n  printf(\"%d\\n\", sizeof(y)/sizeof(y[0]));  // Output : 10\n  my_function(y);  // Output : 2\n\n  return 0;\n}\n\n</code></pre>\n"}, {"tags": ["c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 0, "creation_date": 1570648707, "post_id": 58310846, "comment_id": 102983148, "body": "You&#39;re doing more work than plan array access needs..."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 0, "creation_date": 1570648762, "post_id": 58310846, "comment_id": 102983174, "body": "At the end of the day, you will need to scan this part of the array either way. Moreover, I am afraid that you are doing extra work too! Remember: PREMATURE OPTIMIZATION IS THE ROOT OF ALL EVIL! All caps for emphasis. :P"}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 1, "creation_date": 1570648765, "post_id": 58310846, "comment_id": 102983179, "body": "<code>memset(paddedmsg + 65, 0, 60);</code> should work just fine."}, {"owner": {"reputation": 153, "user_id": 8032968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/501e9d8f692ae8b233aafb18b0107571?s=128&d=identicon&r=PG&f=1", "display_name": "CS2020", "link": "https://stackoverflow.com/users/8032968/cs2020"}, "reply_to_user": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 0, "creation_date": 1570648791, "post_id": 58310846, "comment_id": 102983196, "body": "@Mat I&#39;ve iterated over the array and set the indexes, however this is taking too long, is there a better way to speed up run time performance?"}, {"owner": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 2, "creation_date": 1570648924, "post_id": 58310846, "comment_id": 102983246, "body": "@CS2020: yes, stop using these pointers. <code>a[i]</code> is already defined by the standard as <code>*(a+i)</code>, i.e. it is doing what you&#39;re trying to emulate without the extra obfuscation you&#39;ve added. (Try <code>memset</code>, might have magic inside.)"}, {"owner": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "edited": false, "score": 1, "creation_date": 1570651070, "post_id": 58310846, "comment_id": 102984110, "body": "You can try <code>for (paddPtr = paddedmsg + 65; paddPtr &lt; paddedmsg + 125; paddPtr++) { *paddPtr = 0; }</code>. First, you don&#39;t need the counter; second, did you note that I didn&#39;t use <code>*paddPtr=...</code>? This might be the problem your professor found. ALWAYS raise the warning level of your compiler to the max and get your code clean! If you like <code>&amp;paddedmsg[x]</code> better than <code>paddedmsg + x</code> just use it. I find it more complex."}], "answers": [{"tags": [], "owner": {"reputation": 1544, "user_id": 6475652, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/8d783a89da27c7d36c0935fc2af7b38e?s=128&d=identicon&r=PG&f=1", "display_name": "Fryz", "link": "https://stackoverflow.com/users/6475652/fryz"}, "is_accepted": true, "score": 1, "last_activity_date": 1570649991, "creation_date": 1570649991, "answer_id": 58311176, "question_id": 58310846, "link": "https://stackoverflow.com/questions/58310846/modifying-an-arrays-contents-starting-at-an-index-using-c/58311176#58311176", "title": "Modifying an arrays contents starting at an index using C", "body": "<p>You can use <code>memset(&amp;paddedmsg[65], 0x0, 60)</code> ( see <a href=\"https://linux.die.net/man/3/memset\" rel=\"nofollow noreferrer\">https://linux.die.net/man/3/memset</a> )</p>\n"}], "owner": {"reputation": 153, "user_id": 8032968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/501e9d8f692ae8b233aafb18b0107571?s=128&d=identicon&r=PG&f=1", "display_name": "CS2020", "link": "https://stackoverflow.com/users/8032968/cs2020"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 58311176, "answer_count": 1, "score": 1, "last_activity_date": 1570649991, "creation_date": 1570648562, "question_id": 58310846, "link": "https://stackoverflow.com/questions/58310846/modifying-an-arrays-contents-starting-at-an-index-using-c", "title": "Modifying an arrays contents starting at an index using C", "body": "<p>I am trying to modify a char array in C using pointers for optimization. I am simply trying to set a section of the array to <code>0x00</code> faster than iterating over the array directly.</p>\n\n<p>This is my current code that I'm trying. I'm trying to set indexes 65-124 to <code>0x00</code>.</p>\n\n<pre><code>char *paddPtr = paddedmsg; //This is needed for work earlier.\n*paddPtr=&amp;paddedmsg[65];\nfor (i=65; i &lt; 125; i++, paddPtr++) {\n    *paddPtr = 0x00;\n}\n</code></pre>\n\n<p>There are no error messages, but the code that my professor is using to check the output is coming back as incorrect so I'm assuming there are issues, though I'm not sure exactly what the issue is.</p>\n"}, {"tags": ["c", "binary"], "comments": [{"owner": {"reputation": 11893, "user_id": 12098405, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C7IUyuZ5qqE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rehqQyGdh463Xz2DY8S4TYPhnDvzA/photo.jpg?sz=128", "display_name": "dash-o", "link": "https://stackoverflow.com/users/12098405/dash-o"}, "edited": false, "score": 0, "creation_date": 1570646233, "post_id": 58310149, "comment_id": 102982123, "body": "The &#39;itoa&#39; is C++"}, {"owner": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "reply_to_user": {"reputation": 11893, "user_id": 12098405, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C7IUyuZ5qqE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rehqQyGdh463Xz2DY8S4TYPhnDvzA/photo.jpg?sz=128", "display_name": "dash-o", "link": "https://stackoverflow.com/users/12098405/dash-o"}, "edited": false, "score": 0, "creation_date": 1570646369, "post_id": 58310149, "comment_id": 102982179, "body": "@dash-o I think the user defined their own <code>itoa</code>."}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 11893, "user_id": 12098405, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C7IUyuZ5qqE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rehqQyGdh463Xz2DY8S4TYPhnDvzA/photo.jpg?sz=128", "display_name": "dash-o", "link": "https://stackoverflow.com/users/12098405/dash-o"}, "edited": false, "score": 1, "creation_date": 1570646594, "post_id": 58310149, "comment_id": 102982261, "body": "@dash-o, it&#39;s also &quot;a widespread non-standard extension to the standard C programming language.&quot;"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1570646699, "post_id": 58310149, "comment_id": 102982305, "body": "<i>&quot;0s to the right?&quot;</i> - or in this case to the <i>left</i> (ie. the &quot;other&quot; right)."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1570647084, "post_id": 58310149, "comment_id": 102982440, "body": "<code>strcat(result, string);</code> is asking for trouble when the destination is no longer than the source."}], "answers": [{"comments": [{"owner": {"reputation": 1619, "user_id": 3342206, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/92d5672ff3c806eb71d84d7298d5be43?s=128&d=identicon&r=PG&f=1", "display_name": "8bittree", "link": "https://stackoverflow.com/users/3342206/8bittree"}, "edited": false, "score": 0, "creation_date": 1570649359, "post_id": 58310439, "comment_id": 102983418, "body": "According to Clang 11.0.0, in the <code>printf</code> format string, combining the flag <code>0</code> with the conversion specifier <code>s</code> is undefined behavior in both C11 and C17. The resulting executable appears to zero-pad, at least in the very small number of test runs I&#39;ve performed."}, {"owner": {"reputation": 4299, "user_id": 798346, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d7e5d155178f095778086f1cf84142ce?s=128&d=identicon&r=PG", "display_name": "Jim Rhodes", "link": "https://stackoverflow.com/users/798346/jim-rhodes"}, "edited": false, "score": 0, "creation_date": 1570656616, "post_id": 58310439, "comment_id": 102986143, "body": "Instead of <code>strcpy</code> and <code>strcat</code> you could do  <code>printf(&quot;%d in binary is: %s%s\\n&quot;, i, zeroes+strlen(string)-1, string);</code>"}, {"owner": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "edited": false, "score": 0, "creation_date": 1570657091, "post_id": 58310439, "comment_id": 102986303, "body": "Yeah, I get that there&#39;s multiple solutions to this. I&#39;ve chosen the most suggested fix and the solution closest to the OP&#39;s."}], "tags": [], "owner": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "is_accepted": false, "score": 1, "last_activity_date": 1570649802, "last_edit_date": 1570649802, "creation_date": 1570646931, "answer_id": 58310439, "question_id": 58310149, "link": "https://stackoverflow.com/questions/58310149/how-to-fill-my-binary-with-0s-to-the-left-in-c-programming/58310439#58310439", "title": "How to fill my binary with 0s to the left in C Programming?", "body": "<p>No, there's not really any way to do this unless you define your own <code>itoa</code> function.<br>\nHowever, there <em>is</em> a portable way to simplify your function:</p>\n\n<pre><code>void PrintBinaryUpTo(int n)\n{\n    int i;\n    char string[11];\n    char result[11];\n    char *zeroes = \"000000000\";\n    for(i = 1; i &lt;= n; i++)\n    {\n        itoa(i, string, 2);\n        /* Buffer the number to 10 digits */\n        strcpy(result, zeroes+strlen(string)-1);\n        strcat(result, string);\n        printf(\"%d in binary is: %s\\n\", i, result);\n    }\n}\n</code></pre>\n\n<p>This doesn't require the whole <code>switch</code> <code>case</code> thing that you have.</p>\n\n<p>An alternative that's not portable (it requires MSVC) is to use the <code>%010s</code> format specifier, which pads with zeroes:</p>\n\n<pre><code>void PrintBinaryUpTo(int n)\n{\n    int i;\n    char string[11];\n    for(i = 1; i &lt;= n; i++)\n    {\n        itoa(i, string, 2);\n        /* Buffer the number to 10 digits with %010s */\n        printf(\"%d in binary is: %010s\\n\", i, string);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 9386617, "user_type": "registered", "profile_image": "https://graph.facebook.com/2047581421925950/picture?type=large", "display_name": "Patricia Cortezzi", "link": "https://stackoverflow.com/users/9386617/patricia-cortezzi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 1, "answer_count": 1, "score": -2, "last_activity_date": 1570649802, "creation_date": 1570645521, "last_edit_date": 1570646985, "question_id": 58310149, "link": "https://stackoverflow.com/questions/58310149/how-to-fill-my-binary-with-0s-to-the-left-in-c-programming", "title": "How to fill my binary with 0s to the left in C Programming?", "body": "<p>Do you guys know how to fill my binary with 0s to the left? My function is:</p>\n\n<pre><code>void PrintBinaryUpTo(int n)\n{\n    int i;\n    char string [11];\n    for(i = 1; i &lt;= n; i++)\n    {\n        itoa(i, string, 2);\n\n        printf(\"%d in binary is: %s\\n\", i, string);\n    }\n}\n</code></pre>\n\n<p>It returns this:</p>\n\n<pre><code>1 in binary is: 1\n2 in binary is: 10\n3 in binary is: 11\n</code></pre>\n\n<p>But I would like it to be like this:</p>\n\n<pre><code>1 in binary is: 0000000001\n2 in binary is: 0000000010\n3 in binary is: 0000000011\n</code></pre>\n\n<p>EDIT: I made it like this, but I'm pretty sure there are smarter ways to do it.</p>\n\n<pre><code>void PrintBinaryUpTo(int n)\n{\n    int i;\n    char string [11];\n    char result[11];\n    for(i = 1; i &lt;= n; i++)\n    {\n        itoa(i, string, 2);\n\n        switch(strlen(string))\n        {\n            case 1:\n            strcpy(result, \"000000000\");\n            strcat(result, string);\n            break;\n\n            case 2:\n            strcpy(result, \"00000000\");\n            strcat(result, string);\n            break;\n\n            case 3:\n            strcpy(result, \"0000000\");\n            strcat(result, string);\n            break;\n\n            case 4:\n            strcpy(result, \"000000\");\n            strcat(result, string);\n            break;\n\n            case 5:\n            strcpy(result, \"00000\");\n            strcat(result, string);\n            break;\n\n            case 6:\n            strcpy(result, \"0000\");\n            strcat(result, string);\n            break;\n\n            case 7:\n            strcpy(result, \"000\");\n            strcat(result, string);\n            break;\n\n            case 8:\n            strcpy(result, \"00\");\n            strcat(result, string);\n            break;\n\n            case 9:\n            strcpy(result, \"0\");\n            strcat(result, string);\n            break;\n\n            default:\n            strcpy(result, string);\n            break;\n        }\n        printf(\"%d in binary is: %s\\n\", i, result);\n    }\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>1 in binary is: 0000000001\n2 in binary is: 0000000010\n3 in binary is: 0000000011\n4 in binary is: 0000000100\n5 in binary is: 0000000101\n6 in binary is: 0000000110\n7 in binary is: 0000000111\n8 in binary is: 0000001000\n9 in binary is: 0000001001\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 1, "creation_date": 1570646010, "post_id": 58310089, "comment_id": 102982012, "body": "What is the definition of <code>response</code>?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1570646261, "post_id": 58310089, "comment_id": 102982141, "body": "You <i>must</i> check <code>if(ptr)</code> <b>before</b> <code>ptr+=16;</code>, not after. Also, <code>atoi(strtok(ptr, &quot;\\r\\n&quot;));</code> begs perfectly expected input."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1570646454, "post_id": 58310089, "comment_id": 102982211, "body": "It&#39;s all very well saying the code is for &quot;insight&quot;, but when you set <code>bytes_received=-1</code> and blithely continue, we have to ask for the <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">Minimal Reproducible Example</a> that shows the problem."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1570646923, "post_id": 58310089, "comment_id": 102982379, "body": "Welcome! As a new user you might benefit by reading the <a href=\"https://stackoverflow.com/tour\">tour</a> and <a href=\"https://stackoverflow.com/help/how-to-ask\">How do I ask a good question?</a>"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1570648359, "post_id": 58310089, "comment_id": 102982981, "body": "&quot;When executing this&quot; Impossible, it does not even compile. Please provide an MRE."}, {"owner": {"reputation": 11893, "user_id": 12098405, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C7IUyuZ5qqE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rehqQyGdh463Xz2DY8S4TYPhnDvzA/photo.jpg?sz=128", "display_name": "dash-o", "link": "https://stackoverflow.com/users/12098405/dash-o"}, "edited": false, "score": 0, "creation_date": 1570649581, "post_id": 58310089, "comment_id": 102983503, "body": "The code should ALWAYS check the value of fopen calls. The code will crash  if fp is NULL. Also, consider changing the write loop to contentLength&gt;0."}], "owner": {"reputation": 1, "user_id": 12172423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a901a4926f00d30c1dfd70edf13edfe?s=128&d=identicon&r=PG&f=1", "display_name": "DeltaTwoForce", "link": "https://stackoverflow.com/users/12172423/deltatwoforce"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1570645209, "creation_date": 1570645209, "question_id": 58310089, "link": "https://stackoverflow.com/questions/58310089/c-program-crashing-when-integer-is-modified", "title": "C Program crashing when integer is modified", "body": "<p>I'm attempting to get the content-length from an http header before receiving the data using sockets. No I cannot use libcurl.</p>\n\n<p>Whatever I do causes the program to crash. This is running on a Wii as homebrew,  that might be the cause. I have no idea what causes this.</p>\n\n<p>This code is not compilable, it's just to give insight. 'ptr' is the buffer which contains the http header.</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>int bytes_received;\n\nptr=strstr(ptr,\"Content-Length: \");\nptr+=16;\nif(ptr){\n    bytes_received = atoi(strtok(ptr, \"\\r\\n\"));\n}else{\n    bytes_received=-1; //unknown size\n}\n\nint contentLength = bytes_received;\n\nFILE* fp;\nfp = fopen(\"tex.jpg\", \"wb\");\n\nint n;\nwhile(contentLength &gt; 1){\n    n = recv(sockfd, response, 1024,0);\n    if(n==-1){\n        return;\n    }\n    fwrite(response,sizeof(char),n,fp);\n\n    contentLength-=n; //This line is causing the crash\n}\n\nfclose(fp);\n</code></pre>\n\n<p>When executing this using the Wii, I get the \"Exception occurred\" screen with the code dump leading to the line which I have marked. I have no idea what's causing this issue. Please help.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1570645649, "post_id": 58310045, "comment_id": 102981838, "body": "It&#39;s not clear on what information you expect this index calculation to be made. What constitutes a &quot;part&quot; of your array?"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 3, "creation_date": 1570645685, "post_id": 58310045, "comment_id": 102981864, "body": "Do you need this for C or for C++? Can&#39;t you make the three parts separate arrays?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1570646035, "post_id": 58310045, "comment_id": 102982021, "body": "Is the compiler obligated to provide compile-time access to this information?"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 1, "creation_date": 1570646092, "post_id": 58310045, "comment_id": 102982051, "body": "Can you give an example of what you want the code to look like with a smaller number of elements, say 5 -10?"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1570647385, "post_id": 58310045, "comment_id": 102982568, "body": "@Fran&#231;oisAndrieux: The basis for the calculations will be some thing marked or recorded by lines inserted in the list of initializers, like <code>MarkerMacro(Part2)</code>. E.g., using slashes to mark the lines, the array might be initialized with <code>{ &#47; MarkerMacro(Part1) &#47; 3, 4, 5, &#47; MarkerMacro(Part2) &#47; 6, 7, 8, 9, &#47; MarkerMacro(Part3) &#47; 10, 11, }</code>."}, {"owner": {"reputation": 13, "user_id": 12190396, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ekPDlvvkVNo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reNUFgHr6kp5A-1Mi1nW8JRWmrO6A/photo.jpg?sz=128", "display_name": "Robert", "link": "https://stackoverflow.com/users/12190396/robert"}, "edited": false, "score": 0, "creation_date": 1570647570, "post_id": 58310045, "comment_id": 102982661, "body": "What constitutes a part? That&#39;s where I have the comment <code>&#47;&#47; hundreds or thousands of values</code> you could replace that with something like <code>0x57, 0xf3, 0x4a, 0x77, ...</code>. The idea is for the compiler to count them and tell me where the next part starts."}, {"owner": {"reputation": 13, "user_id": 12190396, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ekPDlvvkVNo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reNUFgHr6kp5A-1Mi1nW8JRWmrO6A/photo.jpg?sz=128", "display_name": "Robert", "link": "https://stackoverflow.com/users/12190396/robert"}, "edited": false, "score": 0, "creation_date": 1570647692, "post_id": 58310045, "comment_id": 102982712, "body": "I want the parts to be in the same array as the same code will be processing the parts. Won&#39;t necessarily be just three parts, may be many parts. Would also like to add or remove parts and have the compiler do all the calculations."}, {"owner": {"reputation": 13, "user_id": 12190396, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ekPDlvvkVNo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reNUFgHr6kp5A-1Mi1nW8JRWmrO6A/photo.jpg?sz=128", "display_name": "Robert", "link": "https://stackoverflow.com/users/12190396/robert"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1570648190, "post_id": 58310045, "comment_id": 102982904, "body": "@EricPostpischil: looks kinda like what I want to do. How do I get values from MarkerMacro to use in PART_IDX?"}], "answers": [{"comments": [{"owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 0, "creation_date": 1570652306, "post_id": 58310660, "comment_id": 102984531, "body": "Interesting technique. Didn&#39;t realize you could use <code>sizeof</code> that way. Works with using <code>#define</code> to specify array portions that then get combined into a single array as well. Instead of include files that you then <code>#include</code> you can use <code>#define</code> to create defined constants with the parts and then use the defined constants in places where you are doing the <code>#include</code>. Not that I&#39;m suggesting defined constants as there is a limit on the length of those but for smaller data sets it could work well."}, {"owner": {"reputation": 13, "user_id": 12190396, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ekPDlvvkVNo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reNUFgHr6kp5A-1Mi1nW8JRWmrO6A/photo.jpg?sz=128", "display_name": "Robert", "link": "https://stackoverflow.com/users/12190396/robert"}, "edited": false, "score": 0, "creation_date": 1570653769, "post_id": 58310660, "comment_id": 102985116, "body": "That worked great! An added benefit is that each part is contained in its own file. I can reorder them, or add and delete them much easier. Thanks!"}], "tags": [], "owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": true, "score": 3, "last_activity_date": 1570647866, "creation_date": 1570647866, "answer_id": 58310660, "question_id": 58310045, "link": "https://stackoverflow.com/questions/58310045/determine-positions-in-array-at-compile-time-in-c/58310660#58310660", "title": "Determine positions in array at compile-time in c", "body": "<p>Rather than trying to kludge C to do something it was not meant to do, a better and common method is to prepare data for a C program by writing a program that prepares the data. That is, write some other program that counts the data in the parts and writes the C code necessary to initialize both <code>DATA</code> and <code>PART_IDX</code>.</p>\n\n<p>Another option is:</p>\n\n<ul>\n<li>Put all the data each part in a separate \u201c.h\u201d file, such as files \u201cpart1.h\u201d, \u201cpart2.h\u201d, \u201cpart3.h\u201d.</li>\n<li>To initialize <code>DATA</code>, include all of those header files in its initializer list.</li>\n<li>To calculate the indices for the parts, use <code>sizeof</code> to calculate the numbers of elements in proxy arrays containing the preceding parts.</li>\n</ul>\n\n<p>Example:</p>\n\n<p>\u201cpart1.h\u201d contains <code>10, 11, 12,</code>.</p>\n\n<p>\u201cpart2.h\u201c contains <code>20, 21,</code>.</p>\n\n<p>\u201cpart3.h\u201d contains <code>30, 31, 32, 33,</code>.</p>\n\n<p>The C file is:</p>\n\n<pre><code>const unsigned char DATA[] =\n{\n    #include \"part1.h\"\n    #include \"part2.h\"\n    #include \"part3.h\"\n};\n\n\nconst unsigned int PART_IDX [] =\n{\n    0,\n\n    sizeof (const unsigned char []) {\n        #include \"part1.h\"\n    } / sizeof (const unsigned char),\n\n    sizeof (const unsigned char []) {\n        #include \"part1.h\"\n        #include \"part2.h\"\n    } / sizeof (const unsigned char),\n};\n\n\n#include &lt;stdio.h&gt;\n\n\nint main(void)\n{\n    for (int i = 0; i &lt; 3; ++i)\n        printf(\"Part %d begins at index %d with value %d.\\n\",\n            i, PART_IDX[i], DATA[PART_IDX[i]]);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 1, "last_activity_date": 1570649266, "last_edit_date": 1570649266, "creation_date": 1570648128, "answer_id": 58310720, "question_id": 58310045, "link": "https://stackoverflow.com/questions/58310045/determine-positions-in-array-at-compile-time-in-c/58310720#58310720", "title": "Determine positions in array at compile-time in c", "body": "<blockquote>\n  <p>Is there a way to determine a position within a const array at compile-time in c?</p>\n</blockquote>\n\n<p>Yes. Remember that <strong><em>C</em> source files can be generated</strong>, and improve your <a href=\"https://en.wikipedia.org/wiki/Build_automation\" rel=\"nofollow noreferrer\">build automation</a> accordingly (e.g. edit your <a href=\"https://en.wikipedia.org/wiki/Makefile\" rel=\"nofollow noreferrer\"><code>Makefile</code></a>).</p>\n\n<p>So just generate the second part (e.g. with some <code>awk</code> or <a href=\"https://www.gnu.org/software/guile/\" rel=\"nofollow noreferrer\">Guile</a> script on Linux, or your own simple <a href=\"https://en.wikipedia.org/wiki/Metaprogramming\" rel=\"nofollow noreferrer\">meta-program</a> coded in C -or some scripting language- that output portions of generated C code). Play with <a href=\"https://gcc.gnu.org/onlinedocs/cpp/\" rel=\"nofollow noreferrer\">preprocessor tricks</a>. See <a href=\"https://stackoverflow.com/a/26843374/841108\">this</a> answer for inspiration.</p>\n\n<p>You could, assuming you use <a href=\"https://gcc.gnu.org/\" rel=\"nofollow noreferrer\">GCC</a> as your C compiler, also consider writing your ad-hoc <a href=\"https://gcc.gnu.org/onlinedocs/gccint/Plugins.html\" rel=\"nofollow noreferrer\">GCC plugin</a>, but in your particular case it is not worth the effort.</p>\n\n<p>BTW, my <a href=\"https://github.com/bstarynk/bismon/\" rel=\"nofollow noreferrer\">Bismon</a> program uses such meta-programming tricks. And GCC itself has dozens of ad-hoc code generators.</p>\n\n<p>If you generate some complex enough C code, I recommend keeping internally some kind of <a href=\"https://en.wikipedia.org/wiki/Abstract_syntax_tree\" rel=\"nofollow noreferrer\">AST</a> of it.</p>\n"}], "owner": {"reputation": 13, "user_id": 12190396, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ekPDlvvkVNo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reNUFgHr6kp5A-1Mi1nW8JRWmrO6A/photo.jpg?sz=128", "display_name": "Robert", "link": "https://stackoverflow.com/users/12190396/robert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 1, "accepted_answer_id": 58310660, "answer_count": 2, "score": 1, "last_activity_date": 1570649266, "creation_date": 1570645058, "last_edit_date": 1570648939, "question_id": 58310045, "link": "https://stackoverflow.com/questions/58310045/determine-positions-in-array-at-compile-time-in-c", "title": "Determine positions in array at compile-time in c", "body": "<p>Is there a way to determine a position within a const array at compile-time in c? Here's an example of what I'm trying to do:</p>\n\n<pre><code>const unsigned char DATA[] = {\n// Part 1 \n// hundreds or thousands of values\n\n// Part 2  \n// compiler records this position in the array in PART2\n// hundreds or thousands of values\n\n// Part 3  \n// compiler records this position in the array in PART3\n// hundreds or thousands of values\n\n// ...\n};\n\nconst unsigned int PART_IDX [] = {\n// index to Part 1\n0,\n\n// index to Part 2\nPART2,\n\n// index to Part 3\nPART3,\n\n// ...\n};\n</code></pre>\n\n<p>I could calculate the indexes at run-time, but would rather have them already done, since the array is constant. I could make a program that analyzes the source code, counts the number of elements in each part, and inserts the data in PART_IDX, but I would really like to have the compiler do this at compile-time. That way if data gets inserted or deleted, or parts get added or removed, the compiler still generates correct code. Does someone know how I could do this? Thanks!</p>\n\n<p><strong>Edit</strong>:\nTo clarify, using a example with actual data:</p>\n\n<pre><code>const unsigned char DATA[] = {\n// Part 1 \n0, 1, 2, 3, 4,\n\n// Part 2  \n// compiler records this position in the array in PART2 (should be 5)\n10, 11, 12, 13, 14, 15, 16,\n\n// Part 3  \n// compiler records this position in the array in PART3 (should be 12)\n20, 21, 22\n};\n\nconst unsigned int PART_IDX [] = {\n// index to Part 1\n0,\n\n// index to Part 2\nPART2,   // should be 5, points to 10 in the array\n\n// index to Part 3\nPART3,   // should be 12, points to 20 in the array\n};\n</code></pre>\n\n<p>Question is, what can I put in place of the lines that start with <code>// compiler records this position ...</code> to get the compiler to record the appropriate values in <code>PART2</code> and <code>PART3</code>?</p>\n"}, {"tags": ["java", "c"], "comments": [{"owner": {"reputation": 35849, "user_id": 1424875, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/HFA9w.png?s=128&g=1", "display_name": "nanofarad", "link": "https://stackoverflow.com/users/1424875/nanofarad"}, "reply_to_user": {"reputation": 4091, "user_id": 5674223, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f059211e7c3ee8ebb957ab8c29331e71?s=128&d=identicon&r=PG&f=1", "display_name": "UmFraWJ1bCBJc2xhbQ", "link": "https://stackoverflow.com/users/5674223/umfrawj1bcbjc2xhbq"}, "edited": false, "score": 0, "creation_date": 1570646072, "post_id": 58309950, "comment_id": 102982037, "body": "@RakibulIslam JSON is not a great choice for an embedded device. To OP: look at DataInputStream (no time to write a full answer right now)"}, {"owner": {"reputation": 962, "user_id": 1267275, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/5b5c4b4c39e940eba5f898d0a59eee4d?s=128&d=identicon&r=PG", "display_name": "Martin Dusek", "link": "https://stackoverflow.com/users/1267275/martin-dusek"}, "edited": false, "score": 1, "creation_date": 1570647025, "post_id": 58309950, "comment_id": 102982419, "body": "JSON is not an option. DataInputStream is the best option I know at the moment. Anything better?"}, {"owner": {"reputation": 36166, "user_id": 393701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/250889c646cd2a916920d9252f7c6f42?s=128&d=identicon&r=PG", "display_name": "SirDarius", "link": "https://stackoverflow.com/users/393701/sirdarius"}, "edited": false, "score": 0, "creation_date": 1570648933, "post_id": 58309950, "comment_id": 102983249, "body": "Seems closely related to <a href=\"https://stackoverflow.com/questions/1287903/using-c-struct-in-java\" title=\"using c struct in java\">stackoverflow.com/questions/1287903/using-c-struct-in-java</a>"}], "owner": {"reputation": 962, "user_id": 1267275, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/5b5c4b4c39e940eba5f898d0a59eee4d?s=128&d=identicon&r=PG", "display_name": "Martin Dusek", "link": "https://stackoverflow.com/users/1267275/martin-dusek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1570644673, "creation_date": 1570644673, "question_id": 58309950, "link": "https://stackoverflow.com/questions/58309950/c-struct-to-java", "title": "C struct to Java", "body": "<p>I have an USB device with firmware written in C language. This device will exchange data structures with Android app written in Java. Now the structures are declared in C. What is the best way to handle them in Java.</p>\n\n<p>Currently, I have this in C:</p>\n\n<pre><code>// In report - data from USB device to Java\ntypedef struct {\n   uint8 Cmd;\n   union {\n      TSomeStruct Something;\n      uint32 Value;\n   };\n} __packed TInReport;\n\n// Out report - data from Java to USB device\ntypedef struct {\n   uint8 Cmd;\n   union {\n      int32 Status;\n      uint16 Id;\n   };\n} __packed TOutReport;\n</code></pre>\n\n<p>I can rewrite these declaration in Java. Then, is there a simple way Java can decode received bytes to its native object and encode its native object to bytes (with correctly aligned members)?</p>\n"}, {"tags": ["c", "bit-manipulation", "bitwise-operators"], "comments": [{"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 3, "creation_date": 1570644475, "post_id": 58309866, "comment_id": 102981275, "body": "&#39;Num32Bit = (Num8Bit &lt;&lt; 0) | (Num8Bit &lt;&lt; 8) | (Num8Bit &lt;&lt; 16) | (Num8Bit &lt;&lt; 24)`?"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1570644698, "post_id": 58309866, "comment_id": 102981404, "body": "<code>01010101</code> is an easy <code>0x55</code> or decimal <code>85</code>, so you have that part too."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1570646207, "post_id": 58309866, "comment_id": 102982111, "body": "<i>I&#39;ve thought about declaring 01010101 and then pushing it using &lt;&lt; to the left.</i> That sounds like a great idea.  I&#39;d pursue it.  I don&#39;t see why it wouldn&#39;t work (as long as you use a type that&#39;s big enough, so the <code>&lt;&lt;</code> won&#39;t overflow)."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1570705962, "post_id": 58309866, "comment_id": 103001931, "body": "For extra credit, try 6148914691236517205. (For <i>extra</i> extra credit, try 98382635059784275285.)"}], "answers": [{"tags": [], "owner": {"reputation": 43, "user_id": 2969212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23188d83056a5fd9d42ab6c7d2ea6c81?s=128&d=identicon&r=PG&f=1", "display_name": "yldm", "link": "https://stackoverflow.com/users/2969212/yldm"}, "is_accepted": false, "score": 0, "last_activity_date": 1571023489, "creation_date": 1571023489, "answer_id": 58369725, "question_id": 58309866, "link": "https://stackoverflow.com/questions/58309866/bitwise-operations-need-to-create-a-large-integer-but-can-only-declare-an-8bit/58369725#58369725", "title": "Bitwise operations: Need to create a large integer, but can only declare an 8bit integer", "body": "<p>If you have numbers a, b, c, d of 8 bits each, and they should form 32-bit number n = abcd let's say, you can do:</p>\n\n<pre><code>n = a;\nn = (n &lt;&lt; 8) | b;\nn = (n &lt;&lt; 8) | c;\nn = (n &lt;&lt; 8) | d;\n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 11206094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5dc40b1bc4a362da0f37f14b6ecea403?s=128&d=identicon&r=PG&f=1", "display_name": "programmer12", "link": "https://stackoverflow.com/users/11206094/programmer12"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1571023489, "creation_date": 1570644228, "question_id": 58309866, "link": "https://stackoverflow.com/questions/58309866/bitwise-operations-need-to-create-a-large-integer-but-can-only-declare-an-8bit", "title": "Bitwise operations: Need to create a large integer, but can only declare an 8bit integer", "body": "<p>I need to create a large integer: (1431655765), which is 01010101, for 4 bytes overall. However, there is the restriction that I'm only allowed to declare a number between 0 to 255. I've thought about declaring 01010101 and then pushing it using &lt;&lt; to the left, and then trying to add more of the 01s along the way. However,  this would only get the first byte to be the way I want it, and not the remaining 3 bytes, and I'm not sure how to change the values of the 0's in the other bytes. I also thought about using two's complement, somehow doing some kind of negative, using ~x+1 or something similar. I wasn't sure how to get there from just a one byte integer though. I'm pretty stuck and some help would be appreciated! For context, this is for bitwise operations, I can use, ! ~ &amp; ^ | + &lt;&lt; >></p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 109324, "user_id": 21926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6e61d47f9a6ec0a7a286835e51f3332?s=128&d=identicon&r=PG", "display_name": "Sean Bright", "link": "https://stackoverflow.com/users/21926/sean-bright"}, "edited": false, "score": 0, "creation_date": 1570649343, "post_id": 58309637, "comment_id": 102983405, "body": "The replacement needs to happen in-place?"}], "answers": [{"tags": [], "owner": {"reputation": 109324, "user_id": 21926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6e61d47f9a6ec0a7a286835e51f3332?s=128&d=identicon&r=PG", "display_name": "Sean Bright", "link": "https://stackoverflow.com/users/21926/sean-bright"}, "is_accepted": false, "score": 2, "last_activity_date": 1570653711, "last_edit_date": 1570653711, "creation_date": 1570650410, "answer_id": 58311279, "question_id": 58309637, "link": "https://stackoverflow.com/questions/58309637/how-to-reverse-the-words-in-string-with-dot-delimiter-in-c-maintaining-the-dot-i/58311279#58311279", "title": "how to reverse the words in string with dot delimiter in c maintaining the dot in output", "body": "<p>This is how I would do it (omitting error checking):</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main(int argc, char *argv[])\n{\n    char str[100];\n    char *c;\n\n    scanf(\"%s\", str);\n\n    while ((c = strrchr(str, '.'))) {\n        *c = 0;\n        printf(\"%s.\", c + 1);  \n    }\n    printf(\"%s\\n\", str);\n\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ ./a.out\nthis.is.a.test.for.stackoverflow\nstackoverflow.for.test.a.is.this\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 35543, "user_id": 149530, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b6c8b04130af49735de5be666d67c00?s=128&d=identicon&r=PG", "display_name": "Michael Foukarakis", "link": "https://stackoverflow.com/users/149530/michael-foukarakis"}, "is_accepted": false, "score": 1, "last_activity_date": 1570654926, "creation_date": 1570654926, "answer_id": 58312254, "question_id": 58309637, "link": "https://stackoverflow.com/questions/58309637/how-to-reverse-the-words-in-string-with-dot-delimiter-in-c-maintaining-the-dot-i/58312254#58312254", "title": "how to reverse the words in string with dot delimiter in c maintaining the dot in output", "body": "<p>Well, there's two glaring errors:</p>\n\n<ol>\n<li>You never actually NUL-terminate (not NULL) the string you're going to pass to <code>printf</code>. I suspect you copied that part from somewhere or somebody.</li>\n</ol>\n\n<pre><code>// putting the NULL character at the  \n// position of space characters for \n// next iteration.          \nstr[i] = '.'; \n</code></pre>\n\n<ol start=\"2\">\n<li>Actually printing spaces instead of whatever delimiter:</li>\n</ol>\n\n<pre><code>printf(\"%s \", &amp;(str[i]) + 1);\n/*        ^ */\n</code></pre>\n\n<p>What I'd do instead:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;assert.h&gt;\n#include &lt;stdlib.h&gt;\n\nstruct {\n  char input[100];\n  char result[100];\n}testcases[] = {\n  {.input = \"i.love.you\",\n  .result = \"you.love.i\"},\n  {.input = \".hi.you\",\n  .result = \"you.hi.\"},\n  {.input = \"there.is.no spoon\",\n  .result = \"no spoon.is.there\"},\n  {.input = \"..\",\n  .result = \"..\"},\n  {.input = \"oh.no.\",\n  .result = \".no.oh\"},\n  {.input = \"\",\n  .result = \"\"}\n};\n\nchar *function(char * s) {\n  size_t max_length = strlen(s) + 1;\n  /* Choosing to allocate and return a new string,\n     but you can do whatever you like: */\n  char * scratch = malloc(max_length);\n  /* Keeping an offset to where we concatenate substrings in the output: */\n  size_t offset = 0;\n\n  for (char * delimiter = NULL; (delimiter = strrchr(s, '.')) != NULL;) {\n    /* NUL-terminate where delimiter was found, without modifying the input argument,\n       we'll need it later: */\n    *delimiter = 0;\n    /* Copy the substring after the delimiter: */\n    int nwritten = snprintf(scratch + offset, max_length - offset, \"%s.\", delimiter + 1);\n    /* Adjust offset: */\n    offset += nwritten;\n  }\n  /* Now copy what's left over (if anything) at the beginning of the input string: */\n  snprintf(scratch + offset, max_length - offset, \"%s\", s);\n  return scratch;\n}\n\nint main(void) {\n  for (size_t idx = 0; idx &lt; sizeof testcases / sizeof *testcases; ++idx) {\n    char * reversed = function(testcases[idx].input);\n    assert(!strcmp(reversed, testcases[idx].result));\n    printf(\"Testcase #%lu passed\\n\", idx);\n    free (reversed);\n  }\n  return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>Hope you have time to understand how it works before your homework's deadline is up. :)</p>\n"}], "owner": {"reputation": 7, "user_id": 7534953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32abed296fbad14a5f9609c1f449e72b?s=128&d=identicon&r=PG&f=1", "display_name": "Pranjalakg", "link": "https://stackoverflow.com/users/7534953/pranjalakg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1178, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1570654926, "creation_date": 1570643379, "last_edit_date": 1570645071, "question_id": 58309637, "link": "https://stackoverflow.com/questions/58309637/how-to-reverse-the-words-in-string-with-dot-delimiter-in-c-maintaining-the-dot-i", "title": "how to reverse the words in string with dot delimiter in c maintaining the dot in output", "body": "<p>i want to reverse the words of string with dots in between them in c.</p>\n\n<p>i tried using for loops in c.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main()\n{\n    char str[100];\n    scanf(\"%s\",str);\n    printf(\"%s\",str);\n    int length = strlen(str); \n\n    // Traverse string from end \n    int i; \n    for (i = length - 1; i &gt;= 0; i--) { \n        if (str[i] == '.') { \n\n            // putting the NULL character at the  \n            // position of space characters for \n            // next iteration.          \n            str[i] = '.'; \n\n            // Start from next charatcer      \n            printf(\"%s \", &amp;(str[i]) + 1); \n        } \n    } \n\n    // printing the last word \n    printf(\"%s\", str); \n\n    return 0;\n} \n</code></pre>\n\n<p>Example input</p>\n\n<pre><code>i.love.you\n</code></pre>\n\n<p>Example output</p>\n\n<pre><code>you.love.i\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 2, "creation_date": 1570643174, "post_id": 58309549, "comment_id": 102980668, "body": "You&#39;ve got the bits laid out wrong.  But it&#39;s nearly impossible to lay them out properly in this case; using a union is not a good way of picking apart the three pieces of a floating-point quantity like <code>long double</code>.  I suggest you try using one of the <code>frexp</code> functions (specifically, <a href=\"https://linux.die.net/man/3/frexp\" rel=\"nofollow noreferrer\"><code>frexpl</code></a>): that&#39;s their job.  (Otherwise, you can use shifting and masking techniques.)"}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 2, "creation_date": 1570643295, "post_id": 58309549, "comment_id": 102980731, "body": "Also, <code>long double</code> isn&#39;t &quot;arbitrary precision&quot;, it&#39;s merely &quot;extended precision&quot;.  If you want arbitrary precision, that&#39;s a different animal."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 1, "creation_date": 1570643575, "post_id": 58309549, "comment_id": 102980857, "body": "If you pick the parts apart &quot;by hand&quot;, you&#39;re also going to have to deal with (a) the implicit leading 1 bit and (b) the exponent bias.  See <a href=\"https://en.wikipedia.org/wiki/IEEE_754\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/IEEE_754</a> for more information."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1570644477, "post_id": 58309549, "comment_id": 102981277, "body": "Did you even check whether the size of your type matches that of long double?"}, {"owner": {"reputation": 14968, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "reply_to_user": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1570647697, "post_id": 58309549, "comment_id": 102982718, "body": "@SteveSummit there&#39;s no hidden leading bit in x87 80-bit format (which is likely the format being tried here). But exponent bias is present, that&#39;s true."}], "answers": [{"comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1570649315, "post_id": 58310767, "comment_id": 102983398, "body": "Thank you for catching the problems with the original use of signed bit-fields.  The original code is full of subtle nightmares with its use of bit-fields. Nevermind the fundamental non-portability of bit-fields to begin with..."}, {"owner": {"reputation": 14968, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1570649588, "post_id": 58310767, "comment_id": 102983507, "body": "@AndrewHenle the nonportability of bitfields is augmented by non-portability of x87 format, support for it as <code>long\u00a0double</code> by the compilers (MS ones don&#39;t support it), endianness concerns etc.. Anyway, if you are trying to manipulate representations of numbers, you should already be assuming some extent of non-portability."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1570662888, "post_id": 58310767, "comment_id": 102987654, "body": "Re: <code>uint64_t        mant:64;</code> relies on the implementation.  May/may not be available with various compilers.  &quot;A bit-field shall have a type that is a ... _Bool, signed int, unsigned int, or some other implementation-defined type&quot;  C17 6.7.2.1 6"}, {"owner": {"reputation": 14968, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1570685946, "post_id": 58310767, "comment_id": 102992321, "body": "@chux well, this being a bitfield is actually a useless complication (which I&#39;ve now removed). More problems with this chapter would be in the other fields, which are <code>uint16_t</code> and <code>uint8_t</code> (although the latter could be <code>_Bool</code>). But anyway, if your compiler doesn&#39;t support this, first concern should be whether it even supports the 80-bit floating-point format."}], "tags": [], "owner": {"reputation": 14968, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "is_accepted": false, "score": 1, "last_activity_date": 1570685840, "last_edit_date": 1570685840, "creation_date": 1570648277, "answer_id": 58310767, "question_id": 58309549, "link": "https://stackoverflow.com/questions/58309549/arbitrary-precision-arithmetics-for-double/58310767#58310767", "title": "Arbitrary Precision Arithmetics for Double", "body": "<p>There are multiple problems with your question:</p>\n\n<ol>\n<li><blockquote>\n  <p>So I try to use Arbitrary Precision Arithmetics</p>\n</blockquote></li>\n</ol>\n\n<p><code>long double</code> is not arbitrary precision, it's simply <em>extended</em> precision. Arbitrary precision is a mechanism to get arbitrarily many significant digits (up to memory available), while here you only have 64.</p>\n\n<ol start=\"2\">\n<li><blockquote>\n  <p><code>long            mant:64;</code></p>\n</blockquote></li>\n</ol>\n\n<p>On a 32-bit system this won't compile, because <code>long</code> will likely be 32-bit. You should use <code>unsigned\u00a0long\u00a0long</code> or <code>uint64_t</code> (note the unsignedness: signed bit fields can lead to surprises). And actually, this doesn't have to be a bit field if you use <code>uint64_t</code>: the type itself is exactly 64 bit wide.</p>\n\n<ol start=\"3\">\n<li>In the x87 80-bit format, as in all IEEE 754 binary formats, exponent is biased. In particular, in the 80-bit extended precision x87 format the biased exponent to represent <code>1.0</code> is <code>0x3fff</code>. So you can't simply put a <code>0</code> in this field and expect the number to be r\u00d72\u2070.</li>\n</ol>\n\n<p>With this in mind we can write an example with your definitions amended:</p>\n\n<pre><code>#include &lt;stdint.h&gt;\n#include &lt;math.h&gt;\n\ntypedef struct  s_arith\n{\n    uint64_t        mant;\n    uint16_t        exp:15;\n    uint8_t         sign:1;\n\n}               t_arith;\n\nunion u_dbl\n{\n    t_arith         arith;\n    long double     ldbl;\n};\n\n#include &lt;stdio.h&gt;\n\nint main()\n{\n    const uint64_t mant=0xc000000000000000;\n    const int expo=5;\n    const union u_dbl d={mant,0x3fff+expo,0};\n    printf(\"%Lg\\n\", d.ldbl);\n}\n\n</code></pre>\n\n<p>This outputs <code>48</code> on my system (32-bit x86 Linux with gcc), as expected\u00a0\u2014 because highest two bits of the significand are set, and others cleared, and the value is 1.5\u00d72\u2075.</p>\n\n<p>But actually, to portably load a floating-point number from an integer significand and an exponent, you should use the already existing function from <code>&lt;math.h&gt;</code> header: <code>ldexp</code>. Here's how you could do this:</p>\n\n<pre><code>#include &lt;stdint.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\nint main()\n{\n    const uint64_t mant=0xc000000000000000;\n    const int expo=5;\n    const long double x=ldexp(mant, expo-63);\n    printf(\"%Lg\\n\", x);\n}\n</code></pre>\n\n<p>The <code>-63</code> shift here compensates for the fact that the first argument of <code>ldexp</code> is taken as the value to be multiplied by <code>2^(second_argument)</code>, instead of simply being put into the significand field of the resulting number representation.</p>\n\n<p>Note also that even on x86 architecture, not all compilers have 80-bit <code>long\u00a0double</code>: e.g. Microsoft ones have 64-bit <code>long\u00a0double</code>\u00a0\u2014 same as simply <code>double</code>.</p>\n"}], "owner": {"reputation": 21, "user_id": 11544956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06ddda34792a5fac8145d295cf751d80?s=128&d=identicon&r=PG&f=1", "display_name": "vlpsk", "link": "https://stackoverflow.com/users/11544956/vlpsk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570685840, "creation_date": 1570642976, "question_id": 58309549, "link": "https://stackoverflow.com/questions/58309549/arbitrary-precision-arithmetics-for-double", "title": "Arbitrary Precision Arithmetics for Double", "body": "<p>So I try to use Arbitrary Precision Arithmetics to represent double via exponent and mantissa and afterwards get the same double.</p>\n\n<p>I try to get mantissa and exponent using union:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>typedef struct  s_arith\n{\n    long            mant:64;\n    short           exp:15;\n    char            sign:1;\n\n}               t_arith;\n\nunion u_dbl\n{\n    t_arith         arith;\n    long double     ldbl;\n};\n</code></pre>\n\n<p>Afterwards I try to get initial double using the following formula: (-1)^S * M * 2 ^ E. But it doesn't work for me. What am I doing wrong?</p>\n"}, {"tags": ["c", "scanf", "undefined-behavior", "c-strings"], "comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 2, "creation_date": 1570640279, "post_id": 58308927, "comment_id": 102979346, "body": "Would help if you checked the return value of <code>scanf</code>. Should be 1 in all your cases."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1570640373, "post_id": 58308927, "comment_id": 102979385, "body": "Shouldn&#39;t the newline character be specified and consumed? People lean on <code>scanf</code> way too heavily. Reading a raw buffer and parsing, even with <code>strtok</code>, can be a better approach."}, {"owner": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1570640443, "post_id": 58308927, "comment_id": 102979407, "body": "@tadman scanf skips whitespace, so newline shouldn&#39;t be the problem"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1570640534, "post_id": 58308927, "comment_id": 102979448, "body": "If this is <code>C</code>, you need to <code>#include</code> the appropriate headers.  The behavior of a program can change if the headers are not included."}, {"owner": {"reputation": 6223, "user_id": 2726892, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/DE8Dn.png?s=128&g=1", "display_name": "MooseBoys", "link": "https://stackoverflow.com/users/2726892/mooseboys"}, "edited": false, "score": 0, "creation_date": 1570641127, "post_id": 58308927, "comment_id": 102979721, "body": "does it still happen if you add a <code>return 0</code> to the end of <code>main</code>?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 6223, "user_id": 2726892, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/DE8Dn.png?s=128&g=1", "display_name": "MooseBoys", "link": "https://stackoverflow.com/users/2726892/mooseboys"}, "edited": false, "score": 0, "creation_date": 1570641231, "post_id": 58308927, "comment_id": 102979769, "body": "@MooseBoys that is not necessary. In any case, the results have already been output."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1570641278, "post_id": 58308927, "comment_id": 102979790, "body": "@hydra-bslash-0 those inputs do not cause the behaviour you stated. What were the <i>actual</i> inputs?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1570641364, "post_id": 58308927, "comment_id": 102979830, "body": "To be more exact, you should be including <code>&lt;stdio.h&gt;</code>.  Otherwise I do not know how the program will behave, since the prototype for <code>scanf</code> and <code>printf</code> will be missing."}, {"owner": {"reputation": 6223, "user_id": 2726892, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/DE8Dn.png?s=128&g=1", "display_name": "MooseBoys", "link": "https://stackoverflow.com/users/2726892/mooseboys"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1570641427, "post_id": 58308927, "comment_id": 102979858, "body": "@WeatherVane depending on the version of <a href=\"https://stackoverflow.com/questions/tagged/c\">c</a>, it may not be optional."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 6223, "user_id": 2726892, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/DE8Dn.png?s=128&g=1", "display_name": "MooseBoys", "link": "https://stackoverflow.com/users/2726892/mooseboys"}, "edited": false, "score": 0, "creation_date": 1570641723, "post_id": 58308927, "comment_id": 102980009, "body": "@MooseBoys <code>int main()</code> is the one function that defaults to <code>return 0;</code> if no return statement is provided. Please see <a href=\"https://stackoverflow.com/questions/18402853/must-the-int-main-function-return-a-value-in-all-compilers\">this</a> since C99."}, {"owner": {"reputation": 6223, "user_id": 2726892, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/DE8Dn.png?s=128&g=1", "display_name": "MooseBoys", "link": "https://stackoverflow.com/users/2726892/mooseboys"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1570643487, "post_id": 58308927, "comment_id": 102980821, "body": "@WeatherVane yes, <i>&quot;since C99&quot;</i> e.g. not linux (C89)"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 6223, "user_id": 2726892, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/DE8Dn.png?s=128&g=1", "display_name": "MooseBoys", "link": "https://stackoverflow.com/users/2726892/mooseboys"}, "edited": false, "score": 0, "creation_date": 1570643711, "post_id": 58308927, "comment_id": 102980917, "body": "@MooseBoys if it was missing, the compiler would have reported it. And Linux is not C, it is an OS. The issue is certianly not relevant to this question."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1570650271, "post_id": 58308927, "comment_id": 102983795, "body": "Umm... some of us do not believe that you used &#39;Hello&#39; and &#39;Goodbye&#39; as test strings:("}, {"owner": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "edited": false, "score": 0, "creation_date": 1570661697, "post_id": 58308927, "comment_id": 102987433, "body": "Initialize all the variables; e.g,. <code>int num = 999; int changes = 999;</code>. Print the return values of <code>scanf</code> calls: <code>printf(&quot;%d\\n&quot;, scanf(&quot;%d&quot;, &amp;num))</code>. We want to know whether <code>scanf</code> put a zero into <code>changes</code> or whether it it did nothing to <code>changes</code>, and the zero is just the uninitialized value."}, {"owner": {"reputation": 2783, "user_id": 782570, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cbbf87d7ce9ed596faa7e64231114991?s=128&d=identicon&r=PG&f=1", "display_name": "giusti", "link": "https://stackoverflow.com/users/782570/giusti"}, "edited": false, "score": 0, "creation_date": 1570668870, "post_id": 58308927, "comment_id": 102988722, "body": "This question is very confusing. Instead of editting it with the solution, edit it to include the proper test case. You did great by adding a small reproducible example, but you forgot to make sure the test cases would trigger the error you were seeing."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 12120561, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KenHP.png?s=128&g=1", "display_name": "hydra-bslash-0", "link": "https://stackoverflow.com/users/12120561/hydra-bslash-0"}, "edited": false, "score": 0, "creation_date": 1570641200, "post_id": 58309007, "comment_id": 102979754, "body": "This is the answer. I completely forgot to take into account the terminating character. Thank you."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "reply_to_user": {"reputation": 21, "user_id": 12120561, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KenHP.png?s=128&g=1", "display_name": "hydra-bslash-0", "link": "https://stackoverflow.com/users/12120561/hydra-bslash-0"}, "edited": false, "score": 1, "creation_date": 1570641619, "post_id": 58309007, "comment_id": 102979950, "body": "@hydra-bslash-0 -- The advice given is correct, but I still don&#39;t see how you could have gotten an error given the input you stated in your question.  Something isn&#39;t adding up..."}, {"owner": {"reputation": 3761, "user_id": 3982001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Fabio says Reinstate Monica", "link": "https://stackoverflow.com/users/3982001/fabio-says-reinstate-monica"}, "reply_to_user": {"reputation": 21, "user_id": 12120561, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KenHP.png?s=128&g=1", "display_name": "hydra-bslash-0", "link": "https://stackoverflow.com/users/12120561/hydra-bslash-0"}, "edited": false, "score": 1, "creation_date": 1570641625, "post_id": 58309007, "comment_id": 102979955, "body": "@hydra-bslash-0 But your example shows &quot;hello&quot; and &quot;goodbye&quot; as input, which are both short enough that the terminating character shouldn&#39;t be a problem."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1570650157, "post_id": 58309007, "comment_id": 102983755, "body": "Yeah...I immediately suspected buffer overflow, but was put off by the undersize strings that were, supposedly, used in testing:("}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 0, "last_activity_date": 1570640848, "last_edit_date": 1570640848, "creation_date": 1570640505, "answer_id": 58309007, "question_id": 58308927, "link": "https://stackoverflow.com/questions/58308927/why-is-my-variable-being-assigned-to-0-to-despite-the-user-input/58309007#58309007", "title": "Why is my variable being assigned to 0 to despite the user input?", "body": "<p>I can not reproduce the behavior of the program for the input data you showed.</p>\n\n<p>However such a call of scanf</p>\n\n<pre><code>scanf(\"%s\", string);\n</code></pre>\n\n<p>is unsafe.</p>\n\n<p>So it is possible that when you are entering the variable <code>string</code> you are overwritting the variable <code>changes</code>.</p>\n\n<p>Using such a call of scanf</p>\n\n<pre><code>scanf(\"%s\", string);\n</code></pre>\n\n<p>you have to enter less than 10 characters (or more generally less than sizeof( string )), because the function appends the terminating zero to the entered sequence of characters stored in the argument.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 12083846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7d79ccee9932b7b5800dc959d6f6f23?s=128&d=identicon&r=PG&f=1", "display_name": "Jyoti Mishra", "link": "https://stackoverflow.com/users/12083846/jyoti-mishra"}, "is_accepted": false, "score": 1, "last_activity_date": 1570642740, "creation_date": 1570642740, "answer_id": 58309483, "question_id": 58308927, "link": "https://stackoverflow.com/questions/58308927/why-is-my-variable-being-assigned-to-0-to-despite-the-user-input/58309483#58309483", "title": "Why is my variable being assigned to 0 to despite the user input?", "body": "<p>taking two consecutive scanf() is the problem here. the variable is overridden once it sees </p>\n"}], "owner": {"reputation": 21, "user_id": 12120561, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KenHP.png?s=128&g=1", "display_name": "hydra-bslash-0", "link": "https://stackoverflow.com/users/12120561/hydra-bslash-0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 58309007, "answer_count": 2, "score": 0, "last_activity_date": 1570669162, "creation_date": 1570640208, "last_edit_date": 1570669162, "question_id": 58308927, "link": "https://stackoverflow.com/questions/58308927/why-is-my-variable-being-assigned-to-0-to-despite-the-user-input", "title": "Why is my variable being assigned to 0 to despite the user input?", "body": "<p>I'm setting up a program in C that manipulates strings where a user enters the number of transitions and cells, along with a string they wanted to manipulate and a starting a string and an \"initial string\"</p>\n\n<p>The user will input the information line by line, so I decided to use \"scanf\", however, all my variables seem to work except for the integer of transitions, in which it's constantly being assigned 0 despite the user input.</p>\n\n<pre><code>int main()\n{\n    int num;\n    int changes;\n    char string[10];\n    char startingString[25];\n\n    scanf(\"%d\", &amp;num);\n    scanf(\"%d\", &amp;changes);\n    scanf(\"%s\", string);\n    scanf(\"%s\", startingString);\n\n    printf(\"number: %d\\n\",num);\n    printf(\"Changes: %d\\n\",changes);\n    printf(\"String: %s\\n\",string);\n    printf(\"String Before: %s\\n\", startingString);\n}\n</code></pre>\n\n<pre><code>input:\n20\n10\nteststring\ngoodbye\n\noutput:\n20\n0 &lt;----\nhello\ngoodbye\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 2820, "user_id": 2562283, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ef4e835ba48416df3d5607ae1a89bbf?s=128&d=identicon&r=PG", "display_name": "E. Moffat", "link": "https://stackoverflow.com/users/2562283/e-moffat"}, "edited": false, "score": 1, "creation_date": 1570640028, "post_id": 58308793, "comment_id": 102979240, "body": "The door is still open. When you call <code>accept</code> on <code>Path_to_Me</code>, <a href=\"http://man7.org/linux/man-pages/man2/accept.2.html\" rel=\"nofollow noreferrer\">the original socket is unaffected</a>. Calling <code>accept</code> again as you have called it will create a client socket for the next client waiting to communicate with your listening server."}, {"owner": {"reputation": 46142, "user_id": 773113, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/FKKLW.jpg?s=128&g=1", "display_name": "Mike Nakis", "link": "https://stackoverflow.com/users/773113/mike-nakis"}, "edited": false, "score": 0, "creation_date": 1570640813, "post_id": 58308793, "comment_id": 102979597, "body": "Please note that this question is not about ports remaining open, it is about connections remaining open.  The port is specified as part of <code>My_Address</code> in the call to <code>bind()</code>, which does <b><i>not</i></b> need to be repeated in order to handle multiple remote parties."}], "answers": [{"tags": [], "owner": {"reputation": 46142, "user_id": 773113, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/FKKLW.jpg?s=128&g=1", "display_name": "Mike Nakis", "link": "https://stackoverflow.com/users/773113/mike-nakis"}, "is_accepted": false, "score": 1, "last_activity_date": 1570640409, "creation_date": 1570640409, "answer_id": 58308981, "question_id": 58308793, "link": "https://stackoverflow.com/questions/58308793/why-cant-a-port-remain-open/58308981#58308981", "title": "Why can&#39;t a port remain open?", "body": "<p>Analogies between real life and the inner workings of software, or anything technological for that matter, are generally avoided for good reason: they might seem enticing when you look at them superficially, but they break down in all sorts of horrible ways as soon as you dive in a bit deeper than the surface.  Also, they are so treacherous that even at the superficial level they do not help at all: the amount of mental housekeeping that you have to do in order to maintain the analogy is like adding one more dimension to the complexity of the problem at hand.  So, my advice is: forget the real life analogies, think technically and only technically.</p>\n\n<p>The concept of a \"connection\" exists because the underlying system (the Internet Protocol stack) needs it for housekeeping purposes. In the \"connection\" the system keeps various things like the IP address of the remote party, a buffer in which it is receiving data from the remote party until an entire packet has been completed so that the packet can then be delivered to you as one piece, error-correcting information such as a packet id so that the stack knows whether it has missed a packet or is receiving a duplicate packet, etc.  </p>\n\n<p>All this information is crucial, and it pertains to communication with only that one specific remote party.  When another party comes in, they will have a different IP address, you don't want their data mixed with the previous guy's data, and you want a new packet sequence for error correction.  In other words, you need a new connection.  That's what connections are all about, and that's why a different connection must be established with each individual remote party.</p>\n"}], "owner": {"reputation": 131, "user_id": 12100635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b44a749f3fe873f87d45c449ee2099d0?s=128&d=identicon&r=PG&f=1", "display_name": "S&#252;mer Kol&#231;ak", "link": "https://stackoverflow.com/users/12100635/s%c3%bcmer-kol%c3%a7ak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570641392, "creation_date": 1570639656, "last_edit_date": 1570641392, "question_id": 58308793, "link": "https://stackoverflow.com/questions/58308793/why-cant-a-port-remain-open", "title": "Why can&#39;t a port remain open?", "body": "<p>Story : I open a business and there is the <code>Door 91</code> which will allow customers to come in : <code>listen(Path_to_Me, 5);</code>. If a customer comes in, I accept them in : <code>Me_and_Them = accept(Path_to_Me, (struct sockaddr *) &amp;Their_Address, &amp;sin_len);</code> and I print their Address : <code>printf(\"Their Address : [%s]\\n\", inet_ntoa(Their_Address.sin_addr));</code> Then I write a message to the customer : <code>write(Me_and_Them, response, sizeof(response) - 1);</code> and then I close the door of my business : <code>close(Me_and_Them);</code> so that the connection between me and the customer is closed.</p>\n\n<p>Question : Why does the door of my business have to be closed in order to close a connection between me and my customer ? Why can't the customer simply leave from the door and leave the door open for other possible costumers to continue coming in ?</p>\n\n<pre><code>int main() {\n\n    int one = 1;\n    struct sockaddr_in My_Address, Their_Address;\n    socklen_t sin_len = sizeof(Their_Address);\n\n    int Path_to_Me = socket(AF_INET, SOCK_STREAM, 0);\n\n    setsockopt(Path_to_Me, SOL_SOCKET, SO_REUSEADDR, &amp;one, sizeof(int));\n\n    int Door = 91;\n\n    My_Address.sin_family = AF_INET;\n    My_Address.sin_addr.s_addr = INADDR_ANY;\n    My_Address.sin_port = htons(Door);\n\n    bind(Path_to_Me, (struct sockaddr *) &amp;My_Address, sizeof(My_Address));\n\n    listen(Path_to_Me, 5);\n\n    int Me_and_Them;\n\n    Me_and_Them = accept(Path_to_Me, (struct sockaddr *) &amp;Their_Address, &amp;sin_len);\n    printf(\"Their Address : [%s]\\n\", inet_ntoa(Their_Address.sin_addr));\n\n    char response[] = \"test\\n\";\n    write(Me_and_Them, response, sizeof(response) - 1);\n    close(Me_and_Them);\n\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["python", "c", "arduino", "bluetooth-lowenergy"], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 8877859, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TmsrQ.jpg?s=128&g=1", "display_name": "Agnes Cameron", "link": "https://stackoverflow.com/users/8877859/agnes-cameron"}, "edited": false, "score": 0, "creation_date": 1570894443, "post_id": 58352815, "comment_id": 103064629, "body": "Ah, I&#39;m glad it&#39;s not just a simple bug! In the end, I only needed the first 4sf, so just multiplied by 1000 and sent as an int, but I&#39;ll look at protocol buffers for this project further down the line. Thanks!"}], "tags": [], "owner": {"reputation": 8530, "user_id": 499721, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c64c440f94298a42949b9d8c3cdd00e6?s=128&d=identicon&r=PG", "display_name": "bavaza", "link": "https://stackoverflow.com/users/499721/bavaza"}, "is_accepted": true, "score": 1, "last_activity_date": 1570873064, "creation_date": 1570873064, "answer_id": 58352815, "question_id": 58308581, "link": "https://stackoverflow.com/questions/58308581/sending-floats-from-arduino-to-python-using-a-struct/58352815#58352815", "title": "Sending floats from Arduino to Python using a struct", "body": "<p>The problem you present is actually a broader one, regarding how objects are serialized and de-serialized under different operating systems, machine architectures, different compilers, etc.</p>\n\n<p>Specifically you should pay attention to:</p>\n\n<ul>\n<li>how structures are mapped to physical memory - it is not guaranteed that your struct occupies the minimal possible space in memory. In fact, it is likely the compiler introduces gaps between fields, to optimize memory access speed (see <a href=\"https://stackoverflow.com/questions/16543519/serialization-of-struct\">this SO question</a>).</li>\n<li>machine <a href=\"https://en.wikipedia.org/wiki/Endianness\" rel=\"nofollow noreferrer\">Endianess</a>, which is the order in which multi-byte primitives (such as floats), are stored in memory</li>\n</ul>\n\n<p>To solve your issue, you could either devise your own scheme (e.g. configure the the compiler to tightly pack the structures in-memory - see gcc's <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Common-Type-Attributes.html\" rel=\"nofollow noreferrer\"><code>packed</code></a> attribute), and always encode floats as big-endian. Better yet, you can use a framework such as Google's <a href=\"https://developers.google.com/protocol-buffers/\" rel=\"nofollow noreferrer\">protocol buffers</a> which is cross-language, cross-platform, cross-whatever to handle serialization for you. </p>\n\n<p>Personally, I would go with option II, even though it introduces some overhead.</p>\n"}], "owner": {"reputation": 75, "user_id": 8877859, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TmsrQ.jpg?s=128&g=1", "display_name": "Agnes Cameron", "link": "https://stackoverflow.com/users/8877859/agnes-cameron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "accepted_answer_id": 58352815, "answer_count": 1, "score": 0, "last_activity_date": 1570873064, "creation_date": 1570638771, "last_edit_date": 1570639440, "question_id": 58308581, "link": "https://stackoverflow.com/questions/58308581/sending-floats-from-arduino-to-python-using-a-struct", "title": "Sending floats from Arduino to Python using a struct", "body": "<p>I'm using a Bluefruit Feather to send information from a temperature sensor to a Python script on my computer, over BLEUART.</p>\n\n<p>I have a working version of this code for an accelerometer, the only difference being that the information sent is 4 ints (for the accelerometer: x, y, z, id), vs 2 floats for the temperature sensor (temp, float id). I have checked the values that the sensor sends over the Serial monitor and they are correct. The problem occurs when the floats are unpacked in Python: they are a factor of approximately <code>1.36*e-45</code> off.</p>\n\n<p>In both cases, I store the variables in a struct and send this struct over BLE. The feather code looks like:</p>\n\n<pre><code>void sendData(){\n  int numVals = 2;\n  int vals[numVals];\n  vals[0] = temp; \n  vals[1] = id; //1.0\n  Serial.println(temp);\n  Serial.println(id);  \n  int cnt = numVals * sizeof(float) ;\n  uint8_t buf[cnt];\n  for (int _i=0; _i&lt;numVals; _i++)\n    memcpy(&amp;buf[_i*sizeof(float)], &amp;vals[_i], sizeof(float));\n  bleuart.write( buf, cnt );\n}\n</code></pre>\n\n<p>And on the Python end it looks like:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def received(data):\n    floats = struct.unpack('ff', data)\n    print('Received:', floats)\n</code></pre>\n\n<p>This is really mysterious! I have a feeling it's something to do with how floats are represented between C and Python, but have tried changing the values to doubles / unsigned longs and it's either crashed, or had similar issues.</p>\n"}, {"tags": ["c", "mpi", "openmpi"], "comments": [{"owner": {"reputation": 22777, "user_id": 133203, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Fp3hB.jpg?s=128&g=1", "display_name": "Federico klez Culloca", "link": "https://stackoverflow.com/users/133203/federico-klez-culloca"}, "edited": false, "score": 3, "creation_date": 1570635391, "post_id": 58307290, "comment_id": 102977030, "body": "<code>MPI_Wtime</code> is not the current time, it&#39;s the time elapsed since an arbitrary &quot;start time&quot;, which could very well be the time of the first call. The only guarantee you have is that if you call it multiple times, the various calls will use the same base time. So it doesn&#39;t make much sense to call it only once."}, {"owner": {"reputation": 311, "user_id": 5587518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b51dcc3106fab02b2a56bd227d050bae?s=128&d=identicon&r=PG&f=1", "display_name": "Gregory", "link": "https://stackoverflow.com/users/5587518/gregory"}, "reply_to_user": {"reputation": 22777, "user_id": 133203, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Fp3hB.jpg?s=128&g=1", "display_name": "Federico klez Culloca", "link": "https://stackoverflow.com/users/133203/federico-klez-culloca"}, "edited": false, "score": 0, "creation_date": 1570637513, "post_id": 58307290, "comment_id": 102978127, "body": "But is the arbitrary start time always the same?"}, {"owner": {"reputation": 311, "user_id": 5587518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b51dcc3106fab02b2a56bd227d050bae?s=128&d=identicon&r=PG&f=1", "display_name": "Gregory", "link": "https://stackoverflow.com/users/5587518/gregory"}, "reply_to_user": {"reputation": 22777, "user_id": 133203, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Fp3hB.jpg?s=128&g=1", "display_name": "Federico klez Culloca", "link": "https://stackoverflow.com/users/133203/federico-klez-culloca"}, "edited": false, "score": 0, "creation_date": 1570637644, "post_id": 58307290, "comment_id": 102978201, "body": "I was told it was a &quot;decent&quot; way to generate an initial seed for stochastic simulations."}, {"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 0, "creation_date": 1570643420, "post_id": 58307290, "comment_id": 102980787, "body": "Well, <code>int i = 42;</code> is a decent initial seed for a simulation. It really depends what kind of randomness you expect."}, {"owner": {"reputation": 311, "user_id": 5587518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b51dcc3106fab02b2a56bd227d050bae?s=128&d=identicon&r=PG&f=1", "display_name": "Gregory", "link": "https://stackoverflow.com/users/5587518/gregory"}, "reply_to_user": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 0, "creation_date": 1570659297, "post_id": 58307290, "comment_id": 102986882, "body": "@Zulan I disagree. I would be supplying that myself, by using something like time/clock, the randomness is done in the program without me having to prescribe the initial seed."}, {"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 0, "creation_date": 1570692629, "post_id": 58307290, "comment_id": 102994992, "body": "What&#39;s the difference between a simulation run where the &quot;external randomness&quot; yields <code>42</code> as a seed and you supply <code>42</code> as a seed? Is one of the results valid while the other is not?"}, {"owner": {"reputation": 311, "user_id": 5587518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b51dcc3106fab02b2a56bd227d050bae?s=128&d=identicon&r=PG&f=1", "display_name": "Gregory", "link": "https://stackoverflow.com/users/5587518/gregory"}, "edited": false, "score": 0, "creation_date": 1570725596, "post_id": 58307290, "comment_id": 103013358, "body": "No not at all. But having the user feed a different random integer everytime seems silly."}], "owner": {"reputation": 311, "user_id": 5587518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b51dcc3106fab02b2a56bd227d050bae?s=128&d=identicon&r=PG&f=1", "display_name": "Gregory", "link": "https://stackoverflow.com/users/5587518/gregory"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 201, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1570634103, "creation_date": 1570634103, "question_id": 58307290, "link": "https://stackoverflow.com/questions/58307290/mpi-wtime-is-returning-0", "title": "MPI_Wtime() is returning 0", "body": "<p>I am compiling the following code using openMPI version 4.0.1 on linux and <code>MPI_Wtime()</code> is returning 0. I am compiling using mpicc -o testCode myfile.c</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;time.h&gt;\n#include &lt;mpi.h&gt;\n\nint main(int argc, char* argv[])\n{\n\n    // Initialize MPI\n    MPI_Init(&amp;argc, &amp;argv);\n\n    // printf(\"%d\\n\",MPI_UNIVERSE_SIZE);\n\n    // Get the clock precision and start the clock.\n    double precision = MPI_Wtick();\n    double starttime = MPI_Wtime();\n\n    // Get this processor's rank and the size of the world.\n    int rank, size;\n    MPI_Comm_rank(MPI_COMM_WORLD, &amp;rank);\n    MPI_Comm_size(MPI_COMM_WORLD, &amp;size);\n\n    if (rank ==0)\n        printf(\"start time = %g\\n\", starttime);\n\n    MPI_Finalize();\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "macos", "dyld", "mach-o", "nm"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 12117652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f19be695c8726cffa61e689bcc017ca?s=128&d=identicon&r=PG&f=1", "display_name": "dgameiro", "link": "https://stackoverflow.com/users/12117652/dgameiro"}, "is_accepted": false, "score": 0, "last_activity_date": 1570709788, "creation_date": 1570709788, "answer_id": 58322705, "question_id": 58307098, "link": "https://stackoverflow.com/questions/58307098/nm-output-symbols-not-referenced-by-lc-symtab/58322705#58322705", "title": "`nm` output symbols not referenced by `LC_SYMTAB`", "body": "<p>I also reproduced the <code>nm</code> command and I also did not handle this case. Thank you for sharing.</p>\n\n<p>Looking at the <a href=\"https://gitlab.kitware.com/third-party/llvm/blob/6a7f25d30d648d81dc5b5942788ead68617e0cb4/tools/llvm-nm/llvm-nm.cpp\" rel=\"nofollow noreferrer\">LLVM source code</a>, it seems that:</p>\n\n<p>if <code>nm</code> encounters a <code>LC_FUNCTION_STARTS</code> (function starts segment), then it will get different (function?) addresses.</p>\n\n<p>It checks that each of theses addresses is already in the <code>symbol table</code>.</p>\n\n<p>If it is not, then comes the case that we do not handle:</p>\n\n<p>See the comment at line 1672: \"See this address is not already in the table symbol fake up an nlist for it.\"</p>\n\n<pre><code>        // See this address is not already in the symbol table fake up an\n        // nlist for it.\n        if (!found) {\n          NMSymbol F = {};\n          F.Name = \"&lt;redacted function X&gt;\";\n          F.Address = FoundFns[f] + BaseSegmentAddress;\n          F.Size = 0;\n          // There is no symbol in the nlist symbol table for this so we set\n          // Sym effectivly to null and the rest of code in here must test for\n          // it and not do things like Sym.getFlags() for it.\n          F.Sym = BasicSymbolRef();\n          F.SymFlags = 0;\n          F.NType = MachO::N_SECT;\n          F.NSect = 0;\n          StringRef SegmentName = StringRef();\n          StringRef SectionName = StringRef();\n          for (const SectionRef &amp;Section : MachO-&gt;sections()) {\n            Section.getName(SectionName);\n            SegmentName = MachO-&gt;getSectionFinalSegmentName(\n                                                Section.getRawDataRefImpl());\n            F.NSect++;\n            if (F.Address &gt;= Section.getAddress() &amp;&amp;\n                F.Address &lt; Section.getAddress() + Section.getSize()) {\n              F.Section = Section;\n              break;\n            }\n          }\n          if (SegmentName == \"__TEXT\" &amp;&amp; SectionName == \"__text\")\n            F.TypeChar = 't';\n          else if (SegmentName == \"__DATA\" &amp;&amp; SectionName == \"__data\")\n            F.TypeChar = 'd';\n          else if (SegmentName == \"__DATA\" &amp;&amp; SectionName == \"__bss\")\n            F.TypeChar = 'b';\n          else\n            F.TypeChar = 's';\n          F.NDesc = 0;\n          F.IndirectName = StringRef();\n          SymbolList.push_back(F);\n          if (FoundFns[f] == lc_main_offset)\n            FOS &lt;&lt; \"&lt;redacted LC_MAIN&gt;\";\n          else\n            FOS &lt;&lt; \"&lt;redacted function \" &lt;&lt; f &lt;&lt; \"&gt;\";\n          FOS &lt;&lt; '\\0';\n          FunctionStartsAdded++;\n        }\n</code></pre>\n\n<p>And that's how these symbols seem to appear.</p>\n"}], "owner": {"reputation": 53, "user_id": 12107894, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-GNULByy3K9o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcqci91CRfufeXwpmxDczVjISPFJg/photo.jpg?sz=128", "display_name": "GrandChaman", "link": "https://stackoverflow.com/users/12107894/grandchaman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 115, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1570709788, "creation_date": 1570633427, "question_id": 58307098, "link": "https://stackoverflow.com/questions/58307098/nm-output-symbols-not-referenced-by-lc-symtab", "title": "`nm` output symbols not referenced by `LC_SYMTAB`", "body": "<h1>Why ?</h1>\n\n<p>I am trying to reproduce the behavior of <code>nm</code>.</p>\n\n<h1>Problem</h1>\n\n<p>The command <code>nm /usr/libexec/sharingd</code> output some stranges symbols like :</p>\n\n<pre><code>[..]\n00000001001d7570 t -[_TtC8sharingd19SDAirDropHandlerIPA canHandleTransfer]\n00000001001d8070 t -[_TtC8sharingd19SDAirDropHandlerIPA initWithTransfer:bundleIdentifier:]\n00000001001d7ed0 t -[_TtC8sharingd19SDAirDropHandlerIPA singleItemActionTitle]\n00000001001d75f0 t -[_TtC8sharingd19SDAirDropHandlerIPA suitableContentsDescription]\n00000001001d7580 t -[_TtC8sharingd19SDAirDropHandlerIPA transferTypes]\n00000001001e45a0 t -[_TtC8sharingd27SDAirDropContactHashManager .cxx_destruct]\n00000001001daf60 t -[_TtC8sharingd27SDAirDropContactHashManager acquireTokenForIdentifier:]\n00000001001dcf70 t -[_TtC8sharingd27SDAirDropContactHashManager init]\n00000001001be700 t &lt;redacted function 7904&gt;\n00000001001beb50 t &lt;redacted function 7905&gt;\n00000001001bebf0 t &lt;redacted function 7906&gt;\n00000001001bf050 t &lt;redacted function 7907&gt;\n00000001001bf100 t &lt;redacted function 7908&gt;\n00000001001bf3a0 t &lt;redacted function 7909&gt;\n00000001001bf490 t &lt;redacted function 7910&gt;\n00000001001bf4d0 t &lt;redacted function 7911&gt;\n00000001001bf540 t &lt;redacted function 7912&gt;\n00000001001bf580 t &lt;redacted function 7913&gt;\n00000001001bf590 t &lt;redacted function 7914&gt;\n00000001001bf5b0 t &lt;redacted function 7915&gt;\n00000001001bf5d0 t &lt;redacted function 7916&gt;\n00000001001bf5e0 t &lt;redacted function 7917&gt;\n00000001001bf5f0 t &lt;redacted function 7918&gt;\n[..]\n\n</code></pre>\n\n<p>My version of <code>nm</code> doesn't output these symbols.</p>\n\n<p>Where do they come from ?</p>\n\n<h1>Ascertainments</h1>\n\n<h2>1.</h2>\n\n<p>Part of those symbols name (i.e. <code>_TtC8sharingd19SDAirDropHandlerIPA</code> or <code>canHandleTransfer</code>) are present in the string table of the mach-o file.</p>\n\n<p>However, they're present as different strings.</p>\n\n<h2>2.</h2>\n\n<p>The symbol <code>&lt;redacted function xxx&gt;</code> is not present anywhere in the mach-o file.</p>\n\n<h2>3.</h2>\n\n<p>Theses symbols are not references by the <code>LC_SYMTABS</code> load command.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 4, "creation_date": 1570632952, "post_id": 58306938, "comment_id": 102975705, "body": "Wouldn&#39;t <code>&amp;pU</code> be a <code>double***</code> (3 stars)?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1570632965, "post_id": 58306938, "comment_id": 102975717, "body": "<code>double **U</code> does not tell the function anything about the matrix dimensions."}, {"owner": {"reputation": 133, "user_id": 10070726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b052063232a85dd0835f519872b1a89e?s=128&d=identicon&r=PG&f=1", "display_name": "A. A. Pedersen", "link": "https://stackoverflow.com/users/10070726/a-a-pedersen"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1570633125, "post_id": 58306938, "comment_id": 102975809, "body": "@WeatherVane What can I do instead? :/"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1570633190, "post_id": 58306938, "comment_id": 102975845, "body": "Define <code>int myfunction(double U[][4])</code> and call it with <code>myfunction(U);</code>"}], "owner": {"reputation": 133, "user_id": 10070726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b052063232a85dd0835f519872b1a89e?s=128&d=identicon&r=PG&f=1", "display_name": "A. A. Pedersen", "link": "https://stackoverflow.com/users/10070726/a-a-pedersen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 1, "closed_date": 1570633580, "answer_count": 0, "score": 0, "last_activity_date": 1570632898, "creation_date": 1570632877, "last_edit_date": 1570632898, "question_id": 58306938, "link": "https://stackoverflow.com/questions/58306938/segmentation-fault-by-using-pointer-to-pointer", "closed_reason": "Duplicate", "title": "Segmentation fault by using pointer to pointer", "body": "<p>I have the following program which uses a pointer to pointer to print the different elements of a 2D array <code>U</code>. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint myfunction(double **U) {\n    printf(\"%f\\n\", U[0][0]); //correctly prints U[0][0]\n    printf(\"%f\\n\", U[0][1]); //correctly prints U[0][1]\n    printf(\"%f\\n\", U[1][0]); //\"Segmentation fault (core dumped)\"\n    return 0;\n}\n\nint main(void){    \n    double U[3][4] = {{10, 1, 0, 0}, {2, 6, 0, 0}, {4, 3, 5, 0}};\n    double **pU = U;\n\n    myfunction(&amp;pU);\n    return 0;\n}\n</code></pre>\n\n<p>Running the code gives the following output: </p>\n\n<pre><code>10.00000\n1.00000\nSegmentation fault (core dumped)\n</code></pre>\n\n<p>Why is it that <code>**U</code> seemingly can only access the first row of the matrix? What should I do differently so that <code>printf(\"%f\\n\", U[1][0]);</code> prints the correct value? </p>\n"}, {"tags": ["c", "encryption", "parallel-processing", "openmp", "xor"], "comments": [{"owner": {"reputation": 1807, "user_id": 1900441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa3540494c1cb556bf1f517992b172fe?s=128&d=identicon&r=PG", "display_name": "Jim Cownie", "link": "https://stackoverflow.com/users/1900441/jim-cownie"}, "edited": false, "score": 1, "creation_date": 1570696291, "post_id": 58306875, "comment_id": 102996788, "body": "Note that it is very unlikely that you will achieve any speedup unless the strings are &quot;bigly yuge&quot;,  because entering and leaving a parallel region takes time, and there is very little work inside the parallel region. (Of course, you may be doing this for educational reasons, rather than to attain performance :-))."}], "answers": [{"tags": [], "owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "is_accepted": true, "score": 3, "last_activity_date": 1570632895, "creation_date": 1570632895, "answer_id": 58306947, "question_id": 58306875, "link": "https://stackoverflow.com/questions/58306875/scrambled-output-when-using-openmp-for-xor-cipher/58306947#58306947", "title": "Scrambled output when using OpenMP for XOR cipher", "body": "<p>OpenMP threads don't run in any specific order unless you explicitly ask them to do so.</p>\n\n<p>You should perhaps remove the <code>printf</code> from the loop and put it outside after the loop has executed (all threads have executed) and then print the string for deterministic output.</p>\n\n<p>Interestingly your string contains the correct encrypted and decrypted value. Just the printing order is incorrect.</p>\n\n<pre><code>[..]\n\n#pragma omp parallel for \nfor (int i = 0; i &lt; len; i++) \n{ \n    inpString[i] = inpString[i] ^ xorKey; \n    // printf(\"%c\",inpString[i]);  Remove this\n}\n\n[..]\n\n// Encrypt the string \nprintf(\"Encrypted String: \"); \nencryptDecrypt(sampleString); \nprintf(\"%s\\n\", sampleString);  // Add print here\n\n[..]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 3666197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79fc6c23061326c7e6a6f82a1663634b?s=128&d=identicon&r=PG", "display_name": "user3666197", "link": "https://stackoverflow.com/users/3666197/user3666197"}, "is_accepted": false, "score": 0, "last_activity_date": 1570988815, "last_edit_date": 1570988815, "creation_date": 1570988498, "answer_id": 58366165, "question_id": 58306875, "link": "https://stackoverflow.com/questions/58306875/scrambled-output-when-using-openmp-for-xor-cipher/58366165#58366165", "title": "Scrambled output when using OpenMP for XOR cipher", "body": "<h2>\"Geeks\" let you <em>Grab a speck</em><sub> ( actually there are --2-- specks prepared there ... )</sub></h2>\n\n<p>The <code>#pragma omp parallel for</code>-block was an obvious trick to confuse <code>omp</code>-freshmen, yet there was another surprise, that  Mohit has expressed in these words:</p>\n\n<blockquote>\n  <p><strong><em>Interestingly your string contains the correct encrypted and decrypted value.</em></strong></p>\n</blockquote>\n\n<hr>\n\n<p><a href=\"https://i.stack.imgur.com/rsif2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rsif2.png\" alt=\"enter image description here\"></a></p>\n\n<p>yet,<br>the part of modifying the string was clean and sound, there was actually <strong>nothing indeed \"interesting\" there</strong> ( awfully inefficient, yes, yet fully legal ). It is an ordered, mutually non-interacting, plain <code>[i]</code>-aligned, straight modification of the <strong><code>sampleString[]</code></strong> disjunct <code>char</code> values, but the attempt to get all those <code>printf()</code>-s produced individual <code>(char)</code>-s put \"back\" on a single row, in a clean and human-readable sequence was the speck number one ( that was obvious ).</p>\n\n<p><a href=\"https://godbolt.org/z/ZVnO6R\" rel=\"nofollow noreferrer\">The <strong>program</strong><sub> ( inside the live-analyser-debugger-IDE )</sub></a> <code>stdout</code> however reads, as if the first ( properly ordered ) <code>(char)</code>-s must have been identical in \"<strong>Ge</strong>...for<strong>Ge</strong>...\" ( so as to produce an equally <strong><code>XOR</code></strong>-ed output <code>(char)</code>-s \"<strong>55</strong>...<strong>55</strong>...\" in the <code>XOR</code>-modded strings, don't they have to?</p>\n\n<pre><code>[13]: --&gt;GeeksforGeeks&lt;--\nNEXT: will encrypt the original String:\n[13]: --&gt;55;#6?\"55;#&lt;--\n[13]: --&gt;55;#6?\"55;#&lt;--\nNEXT: will decrypt the (now) encrypted String:\n[13]: --&gt;GeeksforGeeks&lt;--\n[13]: --&gt;55;#6?\"55;#&lt;--\n</code></pre>\n\n<p>And the <strong><code>XOR</code></strong>-ed prints also look somehow \"shorter\", don't they?<br><strong>Heck they do</strong> and for a reason :o) . . . . . . . . . . . . . . . . . . . . . . . . to confuse you</p>\n\n<pre><code>[37]: --&gt;GagarinGonnaGroomGreetingsGospelGoers&lt;--\nNEXT: will encrypt the original String:\n[37]: --&gt;171\"9&gt;?&gt;&gt;1\"??=\"55$9&gt;7#?# 5&lt;?5\"#&lt;--\nNEXT: will encrypt the original String:\n[37]: --&gt;171\"9&gt;?&gt;&gt;1\"??=\"55$9&gt;7#?# 5&lt;?5\"#&lt;--\n[37]: --&gt;171\"9&gt;?&gt;&gt;1\"??=\"55$9&gt;7#?# 5&lt;?5\"#&lt;--\nNEXT: will decrypt the (now) encrypted String:\n[37]: --&gt;GagarinGonnaGroomGreetingsGospelGoers&lt;--\n[37]: --&gt;171\"9&gt;?&gt;&gt;1\"??=\"55$9&gt;7#?# 5&lt;?5\"#&lt;--\n\nPlatform's sizeof(char) was 1\n</code></pre>\n\n<p>Feel free to read the <strong><code>line 49</code></strong> in the live-IDE above and may experiment further with this <strong>Double-Speck</strong></p>\n"}], "owner": {"reputation": 414, "user_id": 10910772, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iM9-bu8vqyg/AAAAAAAAAAI/AAAAAAAAAPE/ZItYhUKrCxQ/photo.jpg?sz=128", "display_name": "HemOdd", "link": "https://stackoverflow.com/users/10910772/hemodd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 329, "favorite_count": 0, "accepted_answer_id": 58306947, "answer_count": 2, "score": 0, "last_activity_date": 1570988815, "creation_date": 1570632638, "last_edit_date": 1592644375, "question_id": 58306875, "link": "https://stackoverflow.com/questions/58306875/scrambled-output-when-using-openmp-for-xor-cipher", "title": "Scrambled output when using OpenMP for XOR cipher", "body": "<p>I have the code below in C which is a simple XOR cipher and I am trying to parallelize it using OpenMP. I have added a simple 'for' directive and it causes scrambled output. I would appreciate it if someone can help me understand why this is happening.</p>\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &quot;omp.h&quot;\n\nvoid encryptDecrypt(char inpString[]) \n{ \n    // Define XOR key \n    // Any character value will work \n    char xorKey = 'P'; \n  \n    // calculate length of input string \n    int len = strlen(inpString); \n  \n    // perform XOR operation of key \n    // with every caracter in string\n    #pragma omp parallel for \n    for (int i = 0; i &lt; len; i++) \n    { \n        inpString[i] = inpString[i] ^ xorKey; \n        printf(&quot;%c&quot;,inpString[i]); \n    } \n} \n  \n// Driver program to test above function \nint main() \n{ \n    char sampleString[] = &quot;GeeksforGeeks&quot;; \n  \n    // Encrypt the string \n    printf(&quot;Encrypted String: &quot;); \n    encryptDecrypt(sampleString); \n    printf(&quot;\\n&quot;); \n  \n    // Decrypt the string \n    printf(&quot;Decrypted String: &quot;); \n    encryptDecrypt(sampleString);\n    printf(&quot;\\n&quot;); \n  \n    return 0; \n}\n</code></pre>\n<p>Sample output without OpenMP:</p>\n<blockquote>\n<p>Encrypted String: 55;#6?&quot;55;#</p>\n<p>Decrypted String: GeeksforGeeks</p>\n</blockquote>\n<p>Sample output with OpenMP:</p>\n<blockquote>\n<p>Encrypted String: 5##6?&quot;55;;5</p>\n<p>Decrypted String: GesfoGeresekk</p>\n</blockquote>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1570633425, "post_id": 58306775, "comment_id": 102975972, "body": "About that comment: String literals in <i>double quotes</i> in C have NUL char at end, so <code>&quot;128\\0&quot;</code> would have 2 NUL chars."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 12189474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ca5893af16344ddaef7fa9d326d5cbd?s=128&d=identicon&r=PG&f=1", "display_name": "s-i-c-o", "link": "https://stackoverflow.com/users/12189474/s-i-c-o"}, "is_accepted": false, "score": -1, "last_activity_date": 1570633070, "creation_date": 1570633070, "answer_id": 58307005, "question_id": 58306775, "link": "https://stackoverflow.com/questions/58306775/how-to-convert-integer-to-char-array/58307005#58307005", "title": "How to convert integer to char array[]?", "body": "<p>itoa() automatically adds a null terminator.\nSee: <a href=\"http://www.cplusplus.com/reference/cstdlib/itoa/\" rel=\"nofollow noreferrer\">http://www.cplusplus.com/reference/cstdlib/itoa/</a></p>\n"}], "owner": {"reputation": 11, "user_id": 12189410, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDFxjyYaae7fiNEQ_37poYRTyV0oCaQdZbyITWt=k-s128", "display_name": "Heapoverflow", "link": "https://stackoverflow.com/users/12189410/heapoverflow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "closed_date": 1570633444, "answer_count": 1, "score": 0, "last_activity_date": 1570691316, "creation_date": 1570632362, "last_edit_date": 1570691316, "question_id": 58306775, "link": "https://stackoverflow.com/questions/58306775/how-to-convert-integer-to-char-array", "closed_reason": "Duplicate", "title": "How to convert integer to char array[]?", "body": "<p>Please read till the end.</p>\n\n<p>I have a function that loops through a character array until it finds the '\\0' end character in a character array.</p>\n\n<p>I want to convert the integer</p>\n\n<pre><code>int number = 128;\n</code></pre>\n\n<p>To a character array</p>\n\n<pre><code>char data[] = \"\"; // data[] = \"128\"  , contains '\\0'\n</code></pre>\n\n<p>I have found several ways suggested (memcpy, itoa) but I want a conversion that adds the '\\0' automatically at the end.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 1956, "user_id": 4429015, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqxqf.png?s=128&g=1", "display_name": "B001\u16e6", "link": "https://stackoverflow.com/users/4429015/b001%e1%9b%a6"}, "edited": false, "score": 2, "creation_date": 1570631235, "post_id": 58306405, "comment_id": 102974665, "body": "Where are you checking if something is returned?"}, {"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 3, "creation_date": 1570631247, "post_id": 58306405, "comment_id": 102974681, "body": "There&#39;s no output because you don&#39;t call any function that causes output. On top of that, you don&#39;t do anything with the value returned by <code>cb(10,1);</code>."}, {"owner": {"reputation": 1894, "user_id": 8473031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4878bfc9d6a80397a8446111fffa4dd?s=128&d=identicon&r=PG&f=1", "display_name": "RoQuOTriX", "link": "https://stackoverflow.com/users/8473031/roquotrix"}, "edited": false, "score": 2, "creation_date": 1570631249, "post_id": 58306405, "comment_id": 102974683, "body": "To output something on the console, you have to say that to your program. Do you know how return values and functions are working?"}, {"owner": {"reputation": 23, "user_id": 12188155, "user_type": "registered", "profile_image": "https://graph.facebook.com/2183957711903969/picture?type=large", "display_name": "riya", "link": "https://stackoverflow.com/users/12188155/riya"}, "edited": false, "score": 0, "creation_date": 1570631647, "post_id": 58306405, "comment_id": 102974931, "body": "but cb function has a return statement."}, {"owner": {"reputation": 1894, "user_id": 8473031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4878bfc9d6a80397a8446111fffa4dd?s=128&d=identicon&r=PG&f=1", "display_name": "RoQuOTriX", "link": "https://stackoverflow.com/users/8473031/roquotrix"}, "edited": false, "score": 1, "creation_date": 1570631825, "post_id": 58306405, "comment_id": 102975038, "body": "Do you know what is the meaning of return in c? <a href=\"https://en.cppreference.com/w/c/language/return\" rel=\"nofollow noreferrer\">en.cppreference.com/w/c/language/return</a>"}, {"owner": {"reputation": 23, "user_id": 12188155, "user_type": "registered", "profile_image": "https://graph.facebook.com/2183957711903969/picture?type=large", "display_name": "riya", "link": "https://stackoverflow.com/users/12188155/riya"}, "edited": false, "score": 0, "creation_date": 1570632248, "post_id": 58306405, "comment_id": 102975298, "body": "okay.i got it,i&#39;ve put the ((N&gt;&gt;i)&amp;1)==1 statement in printf"}, {"owner": {"reputation": 1451, "user_id": 6552776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UiuKq.jpg?s=128&g=1", "display_name": "csabinho", "link": "https://stackoverflow.com/users/6552776/csabinho"}, "edited": false, "score": 0, "creation_date": 1570632250, "post_id": 58306405, "comment_id": 102975300, "body": "By the way your function will return the same value without the comparison. A bitwise <code>&amp;</code> with 1 will be 1 if the first bit is 1 and 0 if it is 0."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1570634862, "post_id": 58306405, "comment_id": 102976734, "body": "You ask about &quot;returning a value&quot; but you mean &quot;output a value&quot;. Theses are different things and should not be mixed. In your code <code>main</code> does <i>return</i> a value but does not <i>print</i> anything."}], "answers": [{"tags": [], "owner": {"reputation": 1391, "user_id": 5178801, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/exq4J.jpg?s=128&g=1", "display_name": "J. Murray", "link": "https://stackoverflow.com/users/5178801/j-murray"}, "is_accepted": false, "score": 0, "last_activity_date": 1570632444, "creation_date": 1570632444, "answer_id": 58306805, "question_id": 58306405, "link": "https://stackoverflow.com/questions/58306405/why-isnt-main-returning-any-value/58306805#58306805", "title": "Why isn&#39;t main() returning any value?", "body": "<p>So Here's your program:</p>\n\n<pre><code>#include&lt;stdbool.h&gt;\n\n//`called function`\nbool cb(int N,int i)\n{ \n     return ((N &gt;&gt; i) &amp; 1) ==1;\n}\n\n//`main function` \nint main(void) \n{                 \n    cb(10,1);    \n    return 0;\n}\n</code></pre>\n\n<p>Your program is executing - which means that the main() function is returning successfully (a Value of 0).  You also invoke <code>cb(10,1);</code> which calls your function declaration above (and returns a boolean: True/False).  But you don't store the value of that function call, nor display the value with a <code>printf()</code> or <code>cout</code> statement.</p>\n\n<p>You'll need to add more for your program to give you more noticable output.</p>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 12188155, "user_type": "registered", "profile_image": "https://graph.facebook.com/2183957711903969/picture?type=large", "display_name": "riya", "link": "https://stackoverflow.com/users/12188155/riya"}, "edited": false, "score": 0, "creation_date": 1570633725, "post_id": 58306913, "comment_id": 102976122, "body": "i have stored the answer and then used printf statement it worked . But  return cb(10,1);   gave runtime error."}], "tags": [], "owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "is_accepted": true, "score": 1, "last_activity_date": 1570687267, "last_edit_date": 1570687267, "creation_date": 1570632785, "answer_id": 58306913, "question_id": 58306405, "link": "https://stackoverflow.com/questions/58306405/why-isnt-main-returning-any-value/58306913#58306913", "title": "Why isn&#39;t main() returning any value?", "body": "<p><code>main</code> doesn't magically return the result of another function, you need to return the value also from <code>main</code></p>\n\n<pre><code>int main(void)\n{\n    return cb(10, 1);\n}\n</code></pre>\n\n<p>or you can exit the program from your function with a value:</p>\n\n<pre><code>bool cb(int N,int i){ //`called function`\n    exit(((N&gt;&gt;i)&amp;1)==1 ? EXIT_FAILURE : EXIT_SUCCESS);\n}\n</code></pre>\n\n<p>and check the return in the console:</p>\n\n<pre><code>./yourprogram\necho $?\n</code></pre>\n\n<p>But notice that this is considered bad practice, we usualy return <code>EXIT_FAILURE</code> only when something went wrong, instead, you can print the result:</p>\n\n<pre><code>int main(void)\n{\n    printf(\"%d\\n\", cb(10, 1));\n    return 0;\n}\n</code></pre>\n\n<p>Finaly, you can use a debugger</p>\n\n<p>Change your code to</p>\n\n<pre><code>Line 6   int res = cb(10, 1);\nLine 7   return 0;\n</code></pre>\n\n<p>and start the debugger</p>\n\n<pre><code>gdb yourprogram\nbreakpoint 7 (after the line you want to inspect)\nrun\nprint res\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 12188155, "user_type": "registered", "profile_image": "https://graph.facebook.com/2183957711903969/picture?type=large", "display_name": "riya", "link": "https://stackoverflow.com/users/12188155/riya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 58306913, "answer_count": 2, "score": -2, "last_activity_date": 1570687267, "creation_date": 1570631135, "last_edit_date": 1570634683, "question_id": 58306405, "link": "https://stackoverflow.com/questions/58306405/why-isnt-main-returning-any-value", "title": "Why isn&#39;t main() returning any value?", "body": "<p>/<em>I am trying to return the 1st bit of boolean value of 10 using right shift in the cb function.</em>/</p>\n\n<pre><code>#include&lt;stdbool.h&gt;\nbool cb(int N,int i){ //`called function`\nreturn ((N&gt;&gt;i)&amp;1)==1;\n}\nint main(void) { //`main function`                 \ncb(10,1);    \nreturn 0;\n}\n</code></pre>\n\n<p>//Status:successfully Executed,but no output. </p>\n"}, {"tags": ["c", "ip", "libpcap"], "answers": [{"tags": [], "owner": {"reputation": 4680, "user_id": 1334967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6319a586f055b709158acaedb8c76add?s=128&d=identicon&r=PG", "display_name": "ottomeister", "link": "https://stackoverflow.com/users/1334967/ottomeister"}, "is_accepted": true, "score": 1, "last_activity_date": 1570674027, "creation_date": 1570674027, "answer_id": 58314557, "question_id": 58306371, "link": "https://stackoverflow.com/questions/58306371/comparing-ipv4-address-of-interface-and-source-address-of-packet-libpcap/58314557#58314557", "title": "Comparing ipv4 address of interface and source address of packet (libpcap)", "body": "<p><code>inet_ntoa</code> returns a pointer to a string that has been constructed in static memory that is internal to <code>inet_ntoa</code>.  It re-uses that same static memory every time it is called.  When you do this:</p>\n\n<pre><code>    dev_ip = inet_ntoa(...);\n</code></pre>\n\n<p><code>dev_ip</code> is set to point to that internal static buffer.  At that point the static buffer contains a string that represents the interface address, so your:</p>\n\n<pre><code>    printf(\"IPv4 address: %s\\n\", dev_ip);\n</code></pre>\n\n<p>shows the expected result.  But then you do this:</p>\n\n<pre><code>    printf(\"inet_ntoa: %s\\n\",inet_ntoa(ip-&gt;ip_src));\n</code></pre>\n\n<p>and that <strong>overwrites</strong> <code>inet_ntoa</code>'s internal buffer with a string representing the packet's address.</p>\n\n<p>But remember that <code>dev_ip</code> is still pointing to that internal buffer.  So when you do this:</p>\n\n<pre><code>    if (strcmp(dev_ip,inet_ntoa(ip-&gt;ip_src)) == 0)\n</code></pre>\n\n<p>(which BTW unnecessarily overwrites the internal buffer again with the packet's address, which was already there) the two arguments that are passed to <code>strcmp</code> are both pointers to <code>inet_nota</code>'s internal buffer, and therefore <code>strcmp</code> will always find that the target strings match -- because both arguments are pointing to the same string.</p>\n\n<p>To fix, either make a local copy of the string generated by <code>inet_ntoa</code> immediately after you call it, by copying into a local buffer or by doing something like:</p>\n\n<pre><code>    dev_ip = strdup(inet_ntoa(...));\n</code></pre>\n\n<p>(and remember to <code>free(dev_ip)</code> when you no longer need that string) or, even better, use the thread-safe variant of <code>inet_ntoa</code> called <code>inet_ntoa_r</code> if your platform has that function.  <code>inet_ntoa_r</code> does not use (and re-use) an internal buffer.  It requires its caller to provide the buffer where the string will be placed.</p>\n"}], "owner": {"reputation": 191, "user_id": 9146521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99e915524d19ab17975308d2a3893610?s=128&d=identicon&r=PG&f=1", "display_name": "imll", "link": "https://stackoverflow.com/users/9146521/imll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 58314557, "answer_count": 1, "score": 0, "last_activity_date": 1570674027, "creation_date": 1570631022, "question_id": 58306371, "link": "https://stackoverflow.com/questions/58306371/comparing-ipv4-address-of-interface-and-source-address-of-packet-libpcap", "title": "Comparing ipv4 address of interface and source address of packet (libpcap)", "body": "<p>I'm using a modification of the C code in <a href=\"https://www.tcpdump.org/sniffex.c\" rel=\"nofollow noreferrer\">https://www.tcpdump.org/sniffex.c</a> to print information on TCP packets passing through an interface, using libpcap.</p>\n\n<p>This is a sample of the callback code I'm trying to use to check if the received packet has the source field equal to the IP address of the current interface (so to only analyse outgoing packets). It is a rather extensive program, so I decided to just include the problematic part:</p>\n\n<pre><code>// retrieve IP address of interface    \nchar * dev_name = \"eth0\";\nstruct ifreq ifr;\nint fd;\nchar *dev_ip;\n\nfd = socket(AF_INET, SOCK_DGRAM, 0);\n\n// type of address to retrieve (IPv4)\nifr.ifr_addr.sa_family = AF_INET;\n\n// copy the interface name in the ifreq structure\nstrncpy(ifr.ifr_name , dev_name , IFNAMSIZ-1);\n\nioctl(fd, SIOCGIFADDR, &amp;ifr);\nclose(fd);\n\ndev_ip = inet_ntoa(( (struct sockaddr_in *)&amp;ifr.ifr_addr )-&gt;sin_addr);\n\nprintf(\"IPv4 address: %s\\n\", dev_ip);\nprintf(\"inet_ntoa: %s\\n\",inet_ntoa(ip-&gt;ip_src));\n\nif (strcmp(dev_ip,inet_ntoa(ip-&gt;ip_src)) == 0)\n    printf(\"EQUAL!\\n\");\n</code></pre>\n\n<p>However, as you can see in the following screenshot, even if the source IP (<code>inet_ntoa</code>) and the IP address of the interface (<code>IPv4 address</code>) are different, their values are always equal according to the program.</p>\n\n<p><a href=\"https://i.stack.imgur.com/yD5A8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yD5A8.png\" alt=\"Output of program\"></a></p>\n\n<p>What could the problem be?</p>\n"}, {"tags": ["c", "atomic", "volatile", "c11"], "comments": [{"owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "edited": false, "score": 2, "creation_date": 1570632424, "post_id": 58306359, "comment_id": 102975397, "body": "Isn&#39;t it guaranteed by the definition of <code>_Atomic</code> in the C11?"}, {"owner": {"reputation": 37702, "user_id": 129805, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/F1gxS.png?s=128&g=1", "display_name": "fadedbee", "link": "https://stackoverflow.com/users/129805/fadedbee"}, "reply_to_user": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "edited": false, "score": 0, "creation_date": 1570633022, "post_id": 58306359, "comment_id": 102975747, "body": "@AlexLop. I&#39;m not sure.  If so, why do <code>atomic_compare_exchange()</code> and friends exist?"}, {"owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "edited": false, "score": 1, "creation_date": 1570644586, "post_id": 58306359, "comment_id": 102981348, "body": "<code>atomic_compare_exchange()</code> can be applied on two different variables, for example if you want to compare and exchange atomically values of <code>packets</code> and <code>bytes</code>"}], "owner": {"reputation": 37702, "user_id": 129805, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/F1gxS.png?s=128&g=1", "display_name": "fadedbee", "link": "https://stackoverflow.com/users/129805/fadedbee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1570631514, "creation_date": 1570630985, "last_edit_date": 1570631514, "question_id": 58306359, "link": "https://stackoverflow.com/questions/58306359/read-modify-write-an-atomic-volatile-uint64-on-a-32-bit-platform", "title": "Read-modify-write an _Atomic volatile uint64 on a 32-bit platform", "body": "<p>I have an instance of a struct, which lives in mmap'd shared memory, accessible by several child processes.</p>\n\n<pre><code>struct counter_stats {\n    _Atomic volatile uint64_t packets;\n    _Atomic volatile uint64_t bytes;\n};\n</code></pre>\n\n<p>The modifying code is:</p>\n\n<pre><code>counter-&gt;packets++; \ncounter-&gt;bytes += rxnum; \n</code></pre>\n\n<p>Are <code>_Atomic</code> and <code>volatile</code> sufficient to ensure that the <code>++</code> and <code>+=</code> operations occur atomically, on 32 bit (and 64 bit) ARM and x86 platforms?</p>\n\n<p>(There will be multiple child processes writing to the same counter, at the same time, in shared memory.) </p>\n"}, {"tags": ["c", "winapi", "hook"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1570630977, "post_id": 58306290, "comment_id": 102974520, "body": "Your program returns instantly, so what did you expect? Hooks only work while the program is running."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 2, "creation_date": 1570631230, "post_id": 58306290, "comment_id": 102974661, "body": "Your process terminates once it reaches the end of <code>WinMain</code>. You need to do something. Usually that would involve a message loop. I suggest that you read an introductory text on Win32 development."}, {"owner": {"reputation": 21, "user_id": 12168880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89f48cc042de694bd311440488ecea2c?s=128&d=identicon&r=PG&f=1", "display_name": "ohno", "link": "https://stackoverflow.com/users/12168880/ohno"}, "edited": false, "score": 0, "creation_date": 1570631267, "post_id": 58306290, "comment_id": 102974699, "body": "I was hoping that when the program ran it would hook the mouse until it quits and left click to bring up a message window.  (I actually didn&#39;t understand your writing a bit, so it may be  irrelevant answe.)"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1570631341, "post_id": 58306290, "comment_id": 102974745, "body": "&quot;I was hoping that when the program ran it would hook the mouse until it quits&quot; It does. But your program quits instantly. So you are kind of asking why <code>int main() { return 0; printf(&quot;hello&quot;); }</code> doesn&#39;t print anything."}, {"owner": {"reputation": 21, "user_id": 12168880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89f48cc042de694bd311440488ecea2c?s=128&d=identicon&r=PG&f=1", "display_name": "ohno", "link": "https://stackoverflow.com/users/12168880/ohno"}, "edited": false, "score": 0, "creation_date": 1570631578, "post_id": 58306290, "comment_id": 102974892, "body": "Thank you all. I will try it."}, {"owner": {"reputation": 82917, "user_id": 3501, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/1fd5f5cc203c393634379a3b3b7e7a87?s=128&d=identicon&r=PG", "display_name": "Anders", "link": "https://stackoverflow.com/users/3501/anders"}, "edited": false, "score": 0, "creation_date": 1570632612, "post_id": 58306290, "comment_id": 102975503, "body": "I linked to a topic about message loops in your previous question related to this."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1570638298, "post_id": 58306290, "comment_id": 102978502, "body": "A message loop is mandatory for most <code>SetWindowsHookEx()</code> hooks. Read the documentation"}], "answers": [{"tags": [], "owner": {"reputation": 7055, "user_id": 1374704, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/VNVyl.png?s=128&g=1", "display_name": "manuell", "link": "https://stackoverflow.com/users/1374704/manuell"}, "is_accepted": true, "score": 0, "last_activity_date": 1570714202, "creation_date": 1570714202, "answer_id": 58324145, "question_id": 58306290, "link": "https://stackoverflow.com/questions/58306290/when-i-run-code-written-using-the-windows-api-it-turns-off-as-soon-as-it-is-tur/58324145#58324145", "title": "When I run code written using the Windows api, it turns off as soon as it is turned on (in Visual Studio)", "body": "<p>You need:</p>\n\n<ol>\n<li>a program that doesn't exit immediately because its main function returns</li>\n<li>a message loop</li>\n</ol>\n\n<p>The two condition are easily met by adding below code just after the <code>SetWindowsHookEx</code> call:</p>\n\n<pre><code>MSG msg;\nwhile ( GetMessage( &amp;msg, NULL, 0, 0 ) );\n</code></pre>\n\n<p>Have fun with the multiple Dialog Boxes you'll get! </p>\n"}], "owner": {"reputation": 21, "user_id": 12168880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89f48cc042de694bd311440488ecea2c?s=128&d=identicon&r=PG&f=1", "display_name": "ohno", "link": "https://stackoverflow.com/users/12168880/ohno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 58324145, "answer_count": 1, "score": -1, "last_activity_date": 1570714202, "creation_date": 1570630799, "last_edit_date": 1570631183, "question_id": 58306290, "link": "https://stackoverflow.com/questions/58306290/when-i-run-code-written-using-the-windows-api-it-turns-off-as-soon-as-it-is-tur", "title": "When I run code written using the Windows api, it turns off as soon as it is turned on (in Visual Studio)", "body": "<p>I wrote this code using a windows api (a program that pops up a messagebox when I left-click) and when I run it, it seems to turn off as soon as it's turned on. )</p>\n\n<p>(run with f5)</p>\n\n<p>I think it's end, but I don't know what's wrong. Is it a code problem?</p>\n\n<p>I use visual studio.</p>\n\n<pre><code>LRESULT CALLBACK MouseHookProc(_In_ int    nCode,\n_In_ WPARAM wParam,\n_In_ LPARAM lParam)\n{\n\n    switch (wParam) {\n    case WM_LBUTTONDOWN:\n        MessageBoxA(0, \"hi\", \"hanu\", 0);\n    }\n    return CallNextHookEx(g_Hook, nCode, wParam, lParam);\n}\n\nint APIENTRY WinMain(_In_ HINSTANCE hInstance,\n    _In_opt_ HINSTANCE hPrevInstance,\n    _In_ LPSTR lpCmdLine,\n    _In_ int nShowCmd)\n{\n    HHOOK mouseHook = SetWindowsHookEx(WH_MOUSE_LL,MouseHookProc, hInstance, NULL);\n}\n</code></pre>\n\n<p>Please point out if the question lacks information</p>\n"}, {"tags": ["c", "floating-point", "floating-accuracy"], "comments": [{"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 1, "creation_date": 1570631042, "post_id": 58306289, "comment_id": 102974556, "body": "I guess you mean, &quot;How does a string like <code>&quot;123.456&quot;</code> or <code>&quot;-7.8e-9&quot;</code> get converted to binary floating point for storage?&quot; Me, I&#39;d say that the interal representation, the binary floating point, <i>is</i> scientific notation, except that the base is 2 instead of 10."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1570631973, "post_id": 58306289, "comment_id": 102975134, "body": "Not really an algorithm, but: If it&#39;s your job to write <code>atof</code>, and if your machine can do floating-point arithmetic, it&#39;s disarmingly easy, because if you arrange things right, you can let the machine&#39;s floating-point arithmetic do all the &quot;heavy lifting&quot;.  I assume you know how to convert a string of digits into an integer.  And your machine knows how to convert an integer into the corresponding floating-point number.  So if you&#39;ve got, say, <code>&quot;123.456&quot;</code>, you can convert the digits, and count how many are after the decimal point, and do the division <code>123456 &#47; 1000.</code>, and that&#39;s your answer."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1570632044, "post_id": 58306289, "comment_id": 102975181, "body": "Similarly, <code>&quot;-7.8e-9&quot;</code> is something like <code>-78 &#47; pow(10, 1+9)</code>."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1570633148, "post_id": 58306289, "comment_id": 102975823, "body": "I&#39;m chagrined not to be able to answer this question, because I&#39;ve <i>written</i> this stuff, but I still don&#39;t have a good answer to the question, &quot;What is the algorithm?&quot;.  I wrote my own floating-point addition code, and my own floating-point multiplication code, and my own floating-point raise-to-a-power code, and with that in place, and as long as I know how to create an initial floating point value of 0.0, everything else falls out, using techniques such as I described in the preceding comments.  Perhaps someone else can give a more satisfying answer."}, {"owner": {"reputation": 239, "user_id": 3078473, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bc2dd96901ab360c6d8e635aca45c24a?s=128&d=identicon&r=PG", "display_name": "JackOfAll", "link": "https://stackoverflow.com/users/3078473/jackofall"}, "reply_to_user": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1570654601, "post_id": 58306289, "comment_id": 102985446, "body": "I&#39;m missing soething very basic.    How does 9 get converted to 1.001 * 2 ^ 3 ?    It&#39;s base 2, not base 10.  It&#39;s not like 9 becomes .9 to 10^(1)"}, {"owner": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "reply_to_user": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1570711712, "post_id": 58306289, "comment_id": 103005252, "body": "@SteveSummit Floating-point arithmetic can only do the heavy lifting correctly for the easiest decimal-to-floating-point conversions, say when the decimal exponent is between -22 and 22 (10^22 happens to be the largest power of ten that can be represented exactly as a <code>double</code>). Using the na&#239;ve floating-point-does-the-heavy-lifting approach for a decimal representation outside this range is likely to produce a result that is wrong by several ULPs: <a href=\"https://gcc.godbolt.org/z/exsOvf\" rel=\"nofollow noreferrer\">gcc.godbolt.org/z/exsOvf</a>"}], "answers": [{"comments": [{"owner": {"reputation": 239, "user_id": 3078473, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bc2dd96901ab360c6d8e635aca45c24a?s=128&d=identicon&r=PG", "display_name": "JackOfAll", "link": "https://stackoverflow.com/users/3078473/jackofall"}, "edited": false, "score": 0, "creation_date": 1570654570, "post_id": 58309048, "comment_id": 102985432, "body": "That&#39;s too complicated for my hobbyist level.  LOL"}], "tags": [], "owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": false, "score": 2, "last_activity_date": 1570640687, "creation_date": 1570640687, "answer_id": 58309048, "question_id": 58306289, "link": "https://stackoverflow.com/questions/58306289/how-does-a-float-get-converted-to-scientific-notation-for-storage/58309048#58309048", "title": "How does a float get converted to scientific notation for storage?", "body": "<p>Here is C++ code to convert a decimal string to a binary floating-point value. Although the question is tagged C, I presume the question is more about the algorithm and calculations than the programming language.</p>\n\n<p>The <code>DecimalToFloat</code> class is constructed with a string that contains solely decimal digits and a decimal point (a period, most one). In its constructor, it shows how to use elementary school multiplication and long division to convert the number from decimal to binary. This demonstrates the fundamental concepts using elementary arithmetic. Real implementations of decimal-to-floating-point conversion in commercial software using algorithms that are faster and more complicated. They involve prepared tables, analysis, and proofs and are the subjects of academic papers. A significant problem of quality implementations of decimal-to-binary-floating-point conversion is getting the rounding correct. The disparate nature of powers of ten to powers of two (both positive and negative powers) makes it tricky to correctly determine when some values are above or below a point where rounding changes. Normally, when we are parsing something like <code>123e300</code>, we want to figure out the binary floating-point result without actually calculating 10<sup>300</sup>. That is a much more extensive subject.</p>\n\n<p>The <code>GetValue</code> routine finishes the preparation fo the number, taking the information prepared by the constructor and rounding it to the final floating-point form.</p>\n\n<p>Negative numbers and exponential (scientific) notation are not handled. Handling negative numbers is of course easy. Exponential notation could be accommodated by shifting the input\u2014moving the decimal point right for positive exponents or left for negative exponents. Again, this is not the fastest way to perform the conversion, but it demonstrates fundamental ideas.</p>\n\n<pre><code>/*  This code demonstrates conversion of decimal numerals to binary\n    floating-point values using the round-to-nearest-ties-to-even rule.\n\n    Infinities and subnormal values are supported and assumed.\n\n    The basic idea is to convert the decimal numeral to binary using methods\n    taught in elementary school.  The integer digits are repeatedly divided by\n    two to extract a string of bits in low-to-high position-value order.  Then\n    sub-integer digits are repeatedly multiplied by two to continue extracting\n    a string of bits in high-to-low position-value order.  Once we have enough\n    bits to determine the rounding direction or the processing exhausts the\n    input, the final value is computed.\n\n    This code is not (and will not be) designed to be efficient.  It\n    demonstrates the fundamental mathematics and rounding decisions.\n*/\n\n\n#include &lt;algorithm&gt;\n#include &lt;limits&gt;\n#include &lt;cmath&gt;\n#include &lt;cstring&gt;\n\n\ntemplate&lt;typename Float&gt; class DecimalToFloat\n{\nprivate:\n\n    static_assert(std::numeric_limits&lt;Float&gt;::radix == 2,\n        \"This code requires the floatng-point radix to be two.\");\n\n    //  Abbreviations for parameters describing the floating-point format.\n    static const int Digits          = std::numeric_limits&lt;Float&gt;::digits;\n    static const int MaximumExponent = std::numeric_limits&lt;Float&gt;::max_exponent;\n    static const int MinimumExponent = std::numeric_limits&lt;Float&gt;::min_exponent;\n\n    /*  For any rounding rule supported by IEEE 754 for binary floating-point,\n        the direction in which a floating-point result should be rounded is\n        completely determined by the bit in the position of the least\n        significant bit (LSB) of the significand and whether the value of the\n        trailing bits are zero, between zero and 1/2 the value of the LSB,\n        exactly 1/2 the LSB, or between 1/2 the LSB and 1.\n\n        In particular, for round-to-nearest, ties-to-even, the decision is:\n\n            LSB     Trailing Bits   Direction\n            0       0               Down\n            0       In (0, 1/2)     Down\n            0       1/2             Down\n            0       In (1/2, 1)     Up\n            1       0               Down\n            1       In (0, 1/2)     Down\n            1       1/2             Up\n            1       In (1/2, 1)     Up\n\n        To determine whether the value of the trailing bits is 0, in (0, 1/2),\n        1/2, or in (1/2, 1), it suffices to know the first of the trailing bits\n        and whether the remaining bits are zeros or not:\n\n            First   Remaining       Value of Trailing Bits\n            0       All zeros       0\n            0       Not all zeros   In (0, 1/2)\n            1       All zeros       1/2\n            1       Not all zeros   In (1/2, 1)\n\n        To capture that information, we maintain two bits in addition to the\n        bits in the significand.  The first is called the Round bit.  It is the\n        first bit after the position of the least significand bit in the\n        significand.  The second is called the Sticky bit.  It is set if any\n        trailing bit after the first is set.\n\n        The bits for the significand are kept in an array along with the Round\n        bit and the Sticky bit.  The constants below provide array indices for\n        locating the LSB, the Round Bit, and the Sticky bit in that array.\n    */\n    static const int LowBit = Digits-1; //  Array index for LSB in significand.\n    static const int Round  = Digits;   //  Array index for rounding bit.\n    static const int Sticky = Digits+1; //  Array index for sticky bit.\n\n    char *Decimal;          //  Work space for the incoming decimal numeral.\n\n    int  N;                 //  Number of bits incorporated so far.\n    char Bits[Digits+2];    //  Bits for significand plus two for rounding.\n    int  Exponent;          //  Exponent adjustment needed.\n\n\n    /*  PushBitHigh inserts a new bit into the high end of the bits we are\n        accumulating for the significand of a floating-point number.\n\n        First, the Round bit shifted down by incorporating it into the Sticky\n        bit, using an OR so that the Sticky bit is set iff any bit pushed below\n        the Round bit is set.\n\n        Then all bits from the significand are shifted down one position,\n        which moves the least significant bit into the Round position and\n        frees up the most significant bit.\n\n        Then the new bit is put into the most significant bit.\n    */\n    void PushBitHigh(char Bit)\n    {\n        Bits[Sticky] |= Bits[Round];\n        std::memmove(Bits+1, Bits, Digits * sizeof *Bits);\n        Bits[0] = Bit;\n\n        ++N;        //  Count the number of bits we have put in the significand.\n        ++Exponent; //  Track the absolute position of the leading bit.\n    }\n\n\n    /*  PushBitLow inserts a new bit into the low end of the bits we are\n        accumulating for the significand of a floating-point number.\n\n        If we have no previous bits and the new bit is zero, we are just\n        processing leading zeros in a number less than 1.  These zeros are not\n        significant.  They tell us the magnitude of the number.  We use them\n        only to track the exponent that records the position of the leading\n        significant bit.  (However, exponent is only allowed to get as small as\n        MinimumExponent, after which we must put further bits into the\n        significand, forming a subnormal value.)\n\n        If the bit is significant, we record it.  If we have not yet filled the\n        regular significand and the Round bit, the new bit is recorded in the\n        next space.  Otherwise, the new bit is incorporated into the Sticky bit\n        using an OR so that the Sticky bit is set iff any bit below the Round\n        bit is set.\n    */\n    void PushBitLow(char Bit)\n    {\n        if (N == 0 &amp;&amp; Bit == 0 &amp;&amp; MinimumExponent &lt; Exponent)\n            --Exponent;\n        else\n            if (N &lt; Sticky)\n                Bits[N++] = Bit;\n            else\n                Bits[Sticky] |= Bit;\n    }\n\n\n    /*  Determined tells us whether the final value to be produced can be\n        determined without any more low bits.  This is true if and only if:\n\n            we have all the bits to fill the significand, and\n\n            we have at least one more bit to help determine the rounding, and\n\n            either we know we will round down because the Round bit is 0 or we\n            know we will round up because the Round bit is 1 and at least one\n            further bit is 1 or the least significant bit is 1.\n    */\n    bool Determined() const\n    {\n        if (Digits &lt; N)\n            if (Bits[Round])\n                return Bits[LowBit] || Bits[Sticky];\n            else\n                return 1;\n        else\n            return 0;\n    }\n\n\n    //  Get the floating-point value that was parsed from the source numeral.\n    Float GetValue() const\n    {\n        //  Decide whether to round up or not.\n        bool RoundUp = Bits[Round] &amp;&amp; (Bits[LowBit] || Bits[Sticky]);\n\n        /*  Now we prepare a floating-point number that contains a significand\n            with the bits we received plus, if we are rounding up, one added to\n            the least significant bit.\n        */\n\n        //  Start with the adjustment to the LSB for rounding.\n        Float x = RoundUp;\n\n        //  Add the significand bits we received.\n        for (int i = Digits-1; 0 &lt;= i; --i)\n            x = (x + Bits[i]) / 2;\n\n        /*  If we rounded up, the addition may have carried out of the\n            initial significand.  In this case, adjust the scale.\n        */\n        int e = Exponent;\n        if (1 &lt;= x)\n        {\n            x /= 2;\n            ++e;\n        }\n\n        //  Apply the exponent and return the value.\n        return MaximumExponent &lt; e ? INFINITY : std::scalbn(x, e);\n    }\n\n\npublic:\n\n    /*  Constructor.\n\n        Note that this constructor allocates work space.  It is bad form to\n        allocate in a constructor, but this code is just to demonstrate the\n        mathematics, not to provide a conversion for use in production\n        software.\n    */\n    DecimalToFloat(const char *Source) : N(), Bits(), Exponent()\n    {\n        //  Skip leading sources.\n        while (*Source == '0')\n            ++Source;\n\n        size_t s = std::strlen(Source);\n\n        /*  Count the number of integer digits (digits before the decimal\n            point if it is present or before the end of the string otherwise)\n            and calculate the number of digits after the decimal point, if any.\n        */\n        size_t DigitsBefore = 0;\n        while (Source[DigitsBefore] != '.' &amp;&amp; Source[DigitsBefore] != 0)\n            ++DigitsBefore;\n\n        size_t DigitsAfter = Source[DigitsBefore] == '.' ? s-DigitsBefore-1 : 0;\n\n        /*  Allocate space for the integer digits or the sub-integer digits,\n            whichever is more numerous.\n        */\n        Decimal = new char[std::max(DigitsBefore, DigitsAfter)];\n\n        /*  Copy the integer digits into our work space, converting them from\n            digit characters ('0' to '9') to numbers (0 to 9).\n        */\n        for (size_t i = 0; i &lt; DigitsBefore; ++i)\n            Decimal[i] = Source[i] - '0';\n\n        /*  Convert the integer portion of the numeral to binary by repeatedly\n            dividing it by two.  The remainders form a bit string representing\n            a binary numeral for the integer part of the number.  They arrive\n            in order from low position value to high position value.\n\n            This conversion continues until the numeral is exhausted (High &lt;\n            Low is false) or we see it is so large the result overflows\n            (Exponent &lt;= MaximumExponent is false).\n\n            Note that Exponent may exceed MaximumExponent while we have only\n            produced 0 bits during the conversion.  However, because we skipped\n            leading zeros above, we know there is a 1 bit coming.  That,\n            combined with the excessive Exponent, guarantees the result will\n            overflow.\n        */\n\n        for (char *High = Decimal, *Low = Decimal + DigitsBefore;\n            High &lt; Low &amp;&amp; Exponent &lt;= MaximumExponent;)\n        {\n            //  Divide by two.\n            char Remainder = 0;\n            for (char *p = High; p &lt; Low; ++p)\n            {\n                /*  This is elementary school division:  We bring in the\n                    remainder from the higher digit position and divide by the\n                    divisor.  The remainder is kept for the next position, and\n                    the quotient becomes the new digit in this position.\n                */\n                char n = *p + 10*Remainder;\n                Remainder = n % 2;\n                n /= 2;\n\n                /*  As the number becomes smaller, we discard leading zeros:\n                    If the new digit is zero and is in the highest position,\n                    we discard it and shorten the number we are working with.\n                    Otherwise, we record the new digit.\n                */\n                if (n == 0 &amp;&amp; p == High)\n                    ++High;\n                else\n                    *p = n;\n            }\n\n            //  Push remainder into high end of the bits we are accumulating.\n            PushBitHigh(Remainder);\n        }\n\n        /*  Copy the sub-integer digits into our work space, converting them\n            from digit characters ('0' to '9') to numbers (0 to 9).\n\n            The convert the sub-integer portion of the numeral to binary by\n            repeatedly multiplying it by two.  The carry-outs continue the bit\n            string.  They arrive in order from high position value to low\n            position value.\n        */\n\n        for (size_t i = 0; i &lt; DigitsAfter; ++i)\n            Decimal[i] = Source[DigitsBefore + 1 + i] - '0';\n\n        for (char *High = Decimal, *Low = Decimal + DigitsAfter;\n            High &lt; Low &amp;&amp; !Determined();)\n        {\n            //  Multiply by two.\n            char Carry = 0;\n            for (char *p = Low; High &lt; p--;)\n            {\n                /*  This is elementary school multiplication:  We multiply\n                    the digit by the multiplicand and add the carry.  The\n                    result is separated into a single digit (n % 10) and a\n                    carry (n / 10).\n                */\n                char n = *p * 2 + Carry;\n                Carry = n / 10;\n                n %= 10;\n\n                /*  Here we discard trailing zeros:  If the new digit is zero\n                    and is in the lowest position, we discard it and shorten\n                    the numeral we are working with.  Otherwise, we record the\n                    new digit.\n                */\n                if (n == 0 &amp;&amp; p == Low-1)\n                    --Low;\n                else\n                    *p = n;\n            }\n\n            //  Push carry into low end of the bits we are accumulating.\n            PushBitLow(Carry);\n        }\n\n        delete [] Decimal;\n    }\n\n    //  Conversion operator.  Returns a Float converted from this object.\n    operator Float() const { return GetValue(); }\n};\n\n\n#include &lt;iostream&gt;\n#include &lt;cstdio&gt;\n#include &lt;cstdlib&gt;\n\n\nstatic void Test(const char *Source)\n{\n    std::cout &lt;&lt; \"Testing \" &lt;&lt; Source &lt;&lt; \":\\n\";\n\n    DecimalToFloat&lt;float&gt; x(Source);\n\n    char *end;\n    float e = std::strtof(Source, &amp;end);\n    float o = x;\n\n    /*  Note:  The C printf is used here for the %a conversion, which shows the\n        bits of floating-point values clearly.  If your C++ implementation does\n        not support this, this may be replaced by any display of floating-point\n        values you desire, such as printing them with all the decimal digits\n        needed to distinguish the values.\n    */\n    std::printf(\"\\t%a, %a.\\n\", e, o);\n\n    if (e != o)\n    {\n        std::cout &lt;&lt; \"\\tError, results do not match.\\n\";\n        std::exit(EXIT_FAILURE);\n    }\n}\n\n\nint main(void)\n{\n    Test(\"0\");\n    Test(\"1\");\n    Test(\"2\");\n    Test(\"3\");\n    Test(\".25\");\n    Test(\".0625\");\n    Test(\".1\");\n    Test(\".2\");\n    Test(\".3\");\n    Test(\"3.14\");\n    Test(\".00000001\");\n    Test(\"9841234012398123\");\n    Test(\"340282346638528859811704183484516925440\");\n    Test(\"340282356779733661637539395458142568447\");\n    Test(\"340282356779733661637539395458142568448\");\n    Test(\".00000000000000000000000000000000000000000000140129846432481707092372958328991613128026194187651577175706828388979108268586060148663818836212158203125\");\n\n    //  This should round to the minimum positive (subnormal), as it is just above mid-way.\n    Test(\".000000000000000000000000000000000000000000000700649232162408535461864791644958065640130970938257885878534141944895541342930300743319094181060791015626\");\n\n    //  This should round to zero, as it is mid-way, and the even rule applies.\n    Test(\".000000000000000000000000000000000000000000000700649232162408535461864791644958065640130970938257885878534141944895541342930300743319094181060791015625\");\n\n    //  This should round to zero, as it is just below mid-way.\n    Test(\".000000000000000000000000000000000000000000000700649232162408535461864791644958065640130970938257885878534141944895541342930300743319094181060791015624\");\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 239, "user_id": 3078473, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bc2dd96901ab360c6d8e635aca45c24a?s=128&d=identicon&r=PG", "display_name": "JackOfAll", "link": "https://stackoverflow.com/users/3078473/jackofall"}, "edited": false, "score": 0, "creation_date": 1570715643, "post_id": 58315145, "comment_id": 103007751, "body": "Wow, thanks for taking the time to make such a thorough answer.  I will print this out and read it when I can focus."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "reply_to_user": {"reputation": 239, "user_id": 3078473, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bc2dd96901ab360c6d8e635aca45c24a?s=128&d=identicon&r=PG", "display_name": "JackOfAll", "link": "https://stackoverflow.com/users/3078473/jackofall"}, "edited": false, "score": 0, "creation_date": 1570718755, "post_id": 58315145, "comment_id": 103009712, "body": "@JackOfAll You&#39;re welcome!  Be very aware, though, that my answer is, in floating-point terms, pretty much a &quot;hobbyist&quot; answer.  I&#39;ve made it look &quot;easy&quot; by ignoring <i>all</i> the hard problems.  High-quality code written by someone who <i>really</i> understands floating point would bear almost no relationship to mine."}, {"owner": {"reputation": 239, "user_id": 3078473, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bc2dd96901ab360c6d8e635aca45c24a?s=128&d=identicon&r=PG", "display_name": "JackOfAll", "link": "https://stackoverflow.com/users/3078473/jackofall"}, "edited": false, "score": 0, "creation_date": 1571155246, "post_id": 58315145, "comment_id": 103142678, "body": "I tried to read what you wrote and my eyes glazed over.  Just a tidal wave of information to what I thought was a basic question.  Skipped over all of it.  Sadly.  How does 9 get converted to 1.001 * 2^3 ?    Is there a way to do the math on a piece of paper and scan it?  I am not interested in coding it, I just want to understand the basic math."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "reply_to_user": {"reputation": 239, "user_id": 3078473, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bc2dd96901ab360c6d8e635aca45c24a?s=128&d=identicon&r=PG", "display_name": "JackOfAll", "link": "https://stackoverflow.com/users/3078473/jackofall"}, "edited": false, "score": 0, "creation_date": 1571229575, "post_id": 58315145, "comment_id": 103169971, "body": "@JackOfAll I posted a <a href=\"https://stackoverflow.com/questions/58306289/how-does-a-float-get-converted-to-scientific-notation-for-storage/58413490#58413490\">completely different answer</a>.  Still somewhat long, I&#39;m afraid, but perhaps it will give you more of what you&#39;re looking for."}], "tags": [], "owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "is_accepted": false, "score": 1, "last_activity_date": 1570759485, "last_edit_date": 1570759485, "creation_date": 1570678933, "answer_id": 58315145, "question_id": 58306289, "link": "https://stackoverflow.com/questions/58306289/how-does-a-float-get-converted-to-scientific-notation-for-storage/58315145#58315145", "title": "How does a float get converted to scientific notation for storage?", "body": "<p>One of the surprising things about a real, practical computer -- surprising to beginning programmers who have been tasked with writing artificial little binary-to-decimal conversion programs, anyway -- is how thoroughly ingrained the binary number system is in an actual computer, and how few and how diffuse any actual binary/decimal conversion routines actually are.  In the C world, for example (and if we confine our attention to integers for the moment), there is basically one binary-to-decimal conversion routine, and it's buried inside <code>printf</code>, where the <code>%d</code> directive is processed.  There are perhaps three decimal-to-binary converters: <code>atof()</code>, <code>strtol()</code>, and the <code>%d</code> conversion inside <code>scanf</code>.  (There might be another one inside the C compiler, where it converts your decimal constants into binary, although the compiler might just call <code>strtol()</code> directly for those, too.)</p>\n\n<p>I bring this all up for background.  The question of \"what's the actual algorithm for constructing floating-point numbers internally?\" is a fair one, and I'd like to think I know the answer, but as I mentioned in the comments, I'm chagrined to discover that I don't, really: I can't describe a clear, crisp \"algorithm\".  I can and will show you some <em>code</em> that gets the job done, but you'll probably find it unsatisfying, as if I'm cheating somehow -- because a number of the interesting details happen more or less automatically, as we'll see.</p>\n\n<p>Basically, I'm going to write a version of the standard library function <code>atof()</code>.  Here are my ground rules:</p>\n\n<ol>\n<li>I'm going to assume that the input is a string of characters.  (This isn't really an assumption at all; it's a restatement of the original problem, which is to write a version of <code>atof</code>.)</li>\n<li>I'm going to assume that we can construct the floating-point number \"0.0\".  (In IEEE 754 and most other formats, it's all-bits-0, so that's not too hard.)</li>\n<li>I'm going to assume that we can convert the integers 0-9 to their corresponding floating-point equivalents.</li>\n<li>I'm going to assume that we can add and multiply any floating-point numbers we want to.  (This is the biggie, although I'll describe those algorithms later.)  But on any modern computer, there's almost certainly a floating-point unit, that has built-in instructions for the basic floating-point operations like addition and multiplication, so this isn't an unreasonable assumption, either.  (But it does end up hiding some of the interesting aspects of the algorithm, passing the buck to the hardware designer to have implemented the instructions correctly.)</li>\n<li>I'm going to initially assume that we have access to the standard library functions <code>atoi</code> and <code>pow</code>.  This is a pretty big assumption, but again, I'll describe later how we could write those from scratch if we wanted to.  I'm also going to assume the existence of the character classification functions in <code>&lt;ctype.h&gt;</code>, especially <code>isdigit()</code>.</li>\n</ol>\n\n<p>But that's about it.  With those prerequisites, it turns out we can write a fully-functional version of <code>atof()</code> all by ourselves.  It might not be fast, and it almost certainly won't have all the right rounding behaviors out at the edges, but it will work pretty well. (I'm even going to handle negative numbers, and exponents.) Here's how it works:</p>\n\n<ul>\n<li>skip leading whitespace</li>\n<li>look for <code>'-'</code></li>\n<li>scan digit characters, converting each one to the corresponding digit by subtracting <code>'0'</code> (aka ASCII 48)</li>\n<li>accumulate a floating-point number (with no fractional part yet) representing the integer implied by the digits -- the <em>significand</em> -- and this is the real math, multiplying the running accumulation by 10 and adding the next digit</li>\n<li>if we see a decimal point, count the number of digits after it</li>\n<li>when we're done scanning digits, see if there's an <code>e</code>/<code>E</code> and some more digits indicating an exponent</li>\n<li>if necessary, multiply or divide our accumulated number by a power of 10, to take care of digits past the decimal, and/or the explicit exponent.</li>\n</ul>\n\n<p>Here's the code:</p>\n\n<pre><code>#include &lt;ctype.h&gt;\n#include &lt;stdlib.h&gt;      /* just for atoi() */\n#include &lt;math.h&gt;        /* just for pow() */\n\n#define TRUE 1\n#define FALSE 0\n\ndouble my_atof(const char *str)\n{\n    const char *p;\n    double ret;\n    int negflag = FALSE;\n    int exp;\n    int expflag;\n\n    p = str;\n\n    while(isspace(*p))\n        p++;\n\n    if(*p == '-')\n        {\n        negflag = TRUE;\n        p++;\n        }\n\n    ret = 0.0;              /* assumption 2 */\n    exp = 0;\n    expflag = FALSE;\n\n    while(TRUE)\n        {\n        if(*p == '.')\n            expflag = TRUE;\n        else if(isdigit(*p))\n            {\n            int idig = *p - '0';     /* assumption 1 */\n            double fdig = idig;      /* assumption 3 */\n            ret = 10. * ret + fdig;  /* assumption 4 */\n            if(expflag)\n                exp--;\n            }\n        else    break;\n\n        p++;\n        }\n\n    if(*p == 'e' || *p == 'E')\n        exp += atoi(p+1);   /* assumption 5a */\n\n    if(exp != 0)\n        ret *= pow(10., exp);   /* assumption 5b */\n\n    if(negflag)\n        ret = -ret;\n\n    return ret;\n}\n</code></pre>\n\n<p>Before we go further, I encourage you to copy-and-paste this code into a nearby C compiler, and compile it, to convince yourself that I haven't cheated <em>too</em> badly.  Here's a little <code>main()</code> to invoke it with:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(int argc, char *argv[])\n{\n    double d = my_atof(argv[1]);\n    printf(\"%s -&gt; %g\\n\", argv[1], d);\n}\n</code></pre>\n\n<p>(If you or your IDE aren't comfortable with command-line invocations, you can use <code>fgets</code> or <code>scanf</code> to read the string to hand to <code>my_atof</code>, instead.)</p>\n\n<p>But, I know, your question was \"How does 9 get converted to 1.001 * 2^3 ?\", and I still haven't really answered that, have I?  So let's see if we can find where that happens.</p>\n\n<p>First of all, that bit pattern 1001<sub>2</sub> for 9 came from... nowhere, or everywhere, or it was there all along, or something.  The character <code>9</code> came in, probably with a bit pattern of 111001<sub>2</sub> (in ASCII).  We subtracted 48 = 110000<sub>2</sub>, and out popped 1001<sub>2</sub>. (Even before doing the subtraction, you can see it hiding there at the end of 111001.)</p>\n\n<p>But then what turned 1001 into 1.001E3?  That was basically my \"assumption 3\", as embodied in the line</p>\n\n<pre><code>double fdig = idig;\n</code></pre>\n\n<p>It's easy to write that line in C, so we don't really have to know how it's done, and the compiler probably turns it into a 'convert integer to float' instruction, so the compiler writer doesn't have to know how to do it, either.</p>\n\n<p>But, if we <em>did</em> have to implement that ourselves, at the lowest level, we could.  We know we have a single-digit (decimal) number, occupying at most 4 bits.  We could stuff those bits into the significand field of our floating-point format, with a fixed exponent (perhaps -3).  We might have to deal with the peculiarities of an \"implicit 1\" bit, and if we didn't want to inadvertently create a denormalized number, we might have to some more tinkering, but it would be straightforward enough, and relatively easy to get right, because there are only 10 cases to test. (Heck, if we found writing code to do the bit manipulations troublesome, we could even use a 10-entry lookup table.)</p>\n\n<p>Since 9 is a single-digit number, we're done.  But for a multiple-digit number, our next concern is the arithmetic we have to do: multiplying the running sum by 10, and adding in the next digit.  How does that work, exactly?</p>\n\n<p>Again, if we're writing a C (or even an assembly language) program, we don't really need to know, because our machine's floating-point 'add' and 'multiply' instructions will do everything for us.  But, also again, if we had to do it ourselves, we could. (This answer's getting way too long, so I'm not going to discuss floating-point addition and multiplication algorithms just yet. Maybe farther down.)</p>\n\n<p>Finally, the code as presented so far \"cheated\" by calling the library functions <code>atoi</code> and <code>pow</code>.  I won't have any trouble convincing you that we could have implemented <code>atoi</code> ourselves if we wanted/had to: it's basically just the same digit-accumulation code we already wrote.  And <code>pow</code> isn't too hard, either, because in our case we don't need to implement it in full generality: we're always raising to integer powers, so it's straightforward repeated multiplication, and we've already assumed we know how to do multiplication.</p>\n\n<p>(With that said, computing a large power of 10 as part of our decimal-to-binary algorithm is problematic.  As @Eric Postpischil noted in his answer, \"Normally we want to figure out the binary floating-point result without actually calculating 10<sup>N</sup>.\"  Me, since I don't know any better, I'll compute it anyway, but if I wrote my own <code>pow()</code> I'd use the <a href=\"https://en.wikipedia.org/wiki/Binary_exponentiation\" rel=\"nofollow noreferrer\">binary exponentiation</a> algorithm, since it's super easy to implement and quite nicely efficient.)</p>\n\n<p>I said I'd discuss floating-point addition and multiplication routines.  Suppose you want to add two floating-point numbers.  If they happen to have the same exponent, it's easy: add the two significands (and keep the exponent the same), and that's your answer.  (How do you add the significands?  Well, I assume you have a way to add integers.)  If the exponents are different, but relatively close to each other, you can pick the smaller one and add N to it to make it the same as the larger one, while simultaneously shifting the significand to the right by N bits.  (You've just created a denormalized number.)  Once the exponents are the same, you can add the significands, as before.  After the addition, it may be important to <em>renormalize</em> the numbers, that is, to detect if one or more leading bits ended up as 0 and, if so, shift the significand left and decrement the exponent.  Finally, if the exponents are too different, such that shifting one significand to the right by N bits would shift it all away, this means that one number is so much smaller than the other that all of it gets lost in the roundoff when adding them.</p>\n\n<p>Multiplication: Floating-point multiplication is actually somewhat easier than addition.  You don't have to worry about matching up the exponents: the final product is basically a new number whose significand is the product of the two significands, and whose exponent is the sum of the two exponents.  The only trick is that the product of the two M-bit significands is nominally 2M bits, and you may not have a multiplier that can do that.  If the only multiplier you have available maxes out at an M-bit product, you can take your two M-bit significands and literally split them in half by bits:</p>\n\n<blockquote>\n  <p><em>signif1</em> = <em>a</em> * 2<sup>M/2</sup> + <em>b</em><br>\n  <em>signif2</em> = <em>c</em> * 2<sup>M/2</sup> + <em>d</em></p>\n</blockquote>\n\n<p>So by ordinary algebra we have</p>\n\n<blockquote>\n  <p><em>signif1</em> &times; <em>signif2</em> = <em>ac</em> &times; 2<sup>M</sup> + <em>ad</em> &times; 2<sup>M/2</sup> + <em>bc</em> &times; 2<sup>M/2</sup> + <em>bd</em></p>\n</blockquote>\n\n<p>Each of those partial products <code>ac</code>, <code>ad</code>, etc. is an M-bit product.  Multiplying by 2<sup>M/2</sup> or 2<sup>M</sup> is easy, because it's just a left shift.  And adding the terms up is something we already know how to do.  We actually only care about the upper M bits of the product, so since we're going to throw away the rest, I imagine we could cheat and skip the <em>bd</em> term, since it contributes nothing (although it might end up slightly influencing a properly-rounded result).</p>\n\n<p>But anyway, the details of the addition and multiplication algorithms, and the knowledge they contain about the floating-point representation we're using, end up forming the other half of the answer to the question of the decimal-to-binary \"algorithm\" you're looking for.  If you convert, say, the number 5.703125 using the code I've shown, out will pop the binary floating-point number 1.01101101<sub>2</sub> &times; 2<sup>2</sup>, but nowhere did we explicitly compute that significand 1.01101101 or that exponent 2 -- they both just fell out of all the digitwise multiplications and additions we did.</p>\n\n<p>Finally, if you're still with me, here's a quick and easy integer-power-only <code>pow</code> function using binary exponentiation:</p>\n\n<pre><code>double my_pow(double a, unsigned int b)\n{\n    double ret = 1;\n    double fac = a;\n\n    while(1) {\n        if(b &amp; 1) ret *= fac;\n        b &gt;&gt;= 1;\n        if(b == 0) break;\n        fac *= fac;\n    }\n    return ret;\n}\n</code></pre>\n\n<p>This is a nifty little algorithm.  If we ask it to compute, say, 10<sup>21</sup>, it does <em>not</em> multiply 10 by itself 21 times.  Instead, it repeatedly <em>squares</em> 10, leading to the exponential sequence 10<sup>1</sup>, 10<sup>2</sup>, 10<sup>4</sup>, 10<sup>8</sup>, or rather, 10, 100, 10000, 100000000...  Then it looks at the binary representation of 21, namely 10101, and selects only the intermediate results 10<sup>1</sup>, 10<sup>4</sup>, and 10<sup>16</sup> to multiply into its final return value, yielding 10<sup>1+4+16</sup>, or 10<sup>21</sup>, as desired.  It therefore runs in time O(log<sub>2</sub>(N)), not O(N).</p>\n\n<hr>\n\n<p>And, tune in tomorrow for our next exciting episode when we'll go in the opposite direction, writing a binary-to-decimal converter which will require us to do... (ominous chord)<br>\n<strong><em>floating point long division</em></strong>!</p>\n"}, {"tags": [], "owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "is_accepted": false, "score": 0, "last_activity_date": 1571235230, "last_edit_date": 1571235230, "creation_date": 1571229382, "answer_id": 58413490, "question_id": 58306289, "link": "https://stackoverflow.com/questions/58306289/how-does-a-float-get-converted-to-scientific-notation-for-storage/58413490#58413490", "title": "How does a float get converted to scientific notation for storage?", "body": "<p>Here's a completely different answer, that tries to focus on the \"algorithm\" part of the question.  I'll start with the example you asked about, converting the decimal integer <strong>9</strong> to the binary scientific notation number <strong>1.001<sub>2</sub>&times;2<sup>3</sup></strong>.  The algorithm is in two parts: (1) convert the decimal integer <strong>9</strong> to the binary integer <strong>1001<sub>2</sub></strong>, and (2) convert that binary integer into binary scientific notation.</p>\n\n<p><strong>Step 1.</strong> Convert a decimal integer to a binary integer.  (You can skip over this part if you already know it.  Also, although this part of the algorithm is going to look perfectly fine, it turns out it's not the sort of thing that's actually used anywhere on a practical binary computer.)</p>\n\n<p>The algorithm is built around a number we're working on, <strong>n</strong>, and a binary number we're building up, <strong>b</strong>.</p>\n\n<ol>\n<li>Set <strong>n</strong> initially to the number we're converting, <strong>9</strong>.</li>\n<li>Set <strong>b</strong> to 0.</li>\n<li>Compute the remainder when dividing <strong>n</strong> by 2.  In our example, the remainder of 9 &divide; 2 is 1.</li>\n<li>The remainder is one bit of our binary number.  Tack it on to <strong>b</strong>.  In our example, <strong>b</strong> is now <strong>1</strong>. Also, here we're going to be tacking bits on to <strong>b</strong> on the <em>left</em>.</li>\n<li>Divide <strong>n</strong> by 2 (discarding the remainder).  In our example, <strong>n</strong> is now 4.</li>\n<li>If n is now 0, we're done.</li>\n<li>Go back to step 3.</li>\n</ol>\n\n<p>At the end of the first trip through the algorithm, <strong>n</strong> is 4 and <strong>b</strong> is 1.</p>\n\n<p>The next trip through the loop will extract the bit 0 (because 4 divided by 2 is 2, remainder 0).  So <strong>b</strong> goes to 01, and <strong>n</strong> goes to 2.</p>\n\n<p>The next trip through the loop will extract the bit 0 (because 2 divided by 2 is 1, remainder 0).  So <strong>b</strong> goes to 001, and <strong>n</strong> goes to 1.</p>\n\n<p>The next trip through the loop will extract the bit 1 (because 1 divided by 2 is 0, remainder 1).  So <strong>b</strong> goes to 1001, and <strong>n</strong> goes to 0.</p>\n\n<p>And since <strong>n</strong> is now 0, we're done.  Meanwhile, we've built up the binary number <strong>1001</strong> in <strong>b</strong>, as desired.</p>\n\n<p>Here's that example again, in tabular form.  At each step, we compute <strong>n</strong> divided by two (or in C, <code>n/2</code>), and the remainder when dividing <strong>n</strong> by 2, which in C is <code>n%2</code>.  At the next step, <strong>n</strong> gets replaced by <code>n/2</code>, and the next bit (which is <code>n%2</code>) gets tacked on at the left of <strong>b</strong>.</p>\n\n<pre><code>step       n       b     n/2     n%2\n   0       9       0       4       1\n   1       4       1       2       0\n   2       2      01       1       0\n   3       1     001       0       1\n   4       0    1001\n</code></pre>\n\n<p>Let's run through that again, for the number 25:</p>\n\n<pre><code>step       n       b     n/2     n%2\n   0      25       0      12       1\n   1      12       1       6       0\n   2       6      01       3       0\n   3       3     001       1       1\n   4       1    1001       0       1\n   5       0   11001\n</code></pre>\n\n<p>You can clearly see that the <strong>n</strong> column is driven by the <code>n/2</code> column, because in step 5 of the algorithm as stated we divided <strong>n</strong> by 2.  (In C this would be <code>n = n / 2</code>, or <code>n /= 2</code>.)  You can clearly see the binary result appearing (in right-to-left order) in the <code>n%2</code> column.</p>\n\n<p>So that's one way to convert decimal integers to binary.  (As I mentioned, though, it's likely not the way your computer does it.  Among other things, the act of tacking a bit on to the <em>left</em> end of <strong>b</strong> turns out to be rather unorthodox.)</p>\n\n<p><strong>Step 2.</strong> Convert a binary integer to a binary number in scientific notation.</p>\n\n<p>Before we begin with this half of the algorithm, it's important to realize that scientific (or \"exponential\") representations are typically not unique.  Returning to decimal for a moment, let's think about the number \"one thousand\".  Most often we'll represent that as 1 &times; 10<sup>3</sup>.  But we could also represent it as 10 &times; 10<sup>2</sup>, or 100 &times; 10<sup>1</sup>, or even crazier representations like 10000 &times; 10<sup>-1</sup>, or 0.01 &times; 10<sup>5</sup>.</p>\n\n<p>So, in practice, when we're working in scientific notation, we'll usually set up an additional rule or guideline, stating that we'll try to keep the mantissa (also called the \"significand\") within a certain range.  For base 10, usually the goal is either to keep it in the range 0 &le; mantissa &lt; 10, or 0 &le; mantissa &lt; 1.  That is, we like numbers like 1 &times; 10<sup>3</sup> or 0.1 &times; 10<sup>4</sup>, but we don't like numbers like 100 &times; 10<sup>1</sup> or 0.01 &times; 10<sup>5</sup>.</p>\n\n<p>How do we keep our representations in the range we like?  What if we've got a number (perhaps the intermediate result of a calculation) that's in a form we don't like?  The answer is simple, and it depends on a pattern you've probably already noticed: If you multiply the mantissa by 10, and if you simultaneously subtract 1 from the exponent, you haven't changed the value of the number.  Similarly, you can divide the mantissa by 10 and increment the exponent, again without changing anything.</p>\n\n<p>When we convert a scientific-notation number into the form we like, we say we're <em>normalizing</em> the number.</p>\n\n<p>One more thing: since 10<sup>0</sup> is 1, we can preliminarily convert <em>any</em> integer to scientific notation by simply multiplying it by 10<sup>0</sup>.  That is, 9 is 9&times;10<sup>0</sup>, and 25 is 25&times;10<sup>0</sup>.  If we do it that way we'll usually get a number that's in a form we \"don't like\" (that is \"nonnormalized\"), but now we have an idea of how to fix that.</p>\n\n<p>So let's return to base 2, and the rest of this second half of our algorithm.  Everything we've said so far about decimal scientific notation is also true about binary scientific notation, as long as we make the obvious changes of \"10\" to \"2\".</p>\n\n<p>To convert the binary integer 1001<sub>2</sub> to binary scientific notation, we first multiply it by 2<sup>0</sup>, resulting in: 1001<sub>2</sub>&times;2<sup>0</sup>.  So actually we're almost done, except that this number is nonnormalized.</p>\n\n<p>What's our definition of a normalized base-two scientific notation number?  We haven't said, but the requirement is usually that the mantissa is between 0 and 10<sub>2</sub> (that is, between 0 and 2<sub>10</sub>), or stated another way, that the high-order bit of the mantissa is always 1 (unless the whole number is 0).  That is, these mantissas are normalized: 1.001<sub>2</sub>, 1.1<sub>2</sub>, 1.0<sub>2</sub>, 0.0<sub>2</sub>.   These mantissas are nonnormalized: 10.01<sub>2</sub>, 0.001<sub>2</sub>.</p>\n\n<p>So to normalize a number, we may need to multiply or divide the mantissa by 2, while incrementing or decrementing the exponent.</p>\n\n<p>Putting this all together in step-by-step form: to convert a binary integer to a binary scientific number:</p>\n\n<ol>\n<li>Multiply the integer by 2<sup>0</sup>: set the mantissa to the number we're converting, and the exponent to 0.</li>\n<li>If the number is normalized (if the mantissa is 0, or if its leading bit is 1), we're done.</li>\n<li>If the mantissa has more than one bit to the left of the decimal point (really the \"radix point\" or \"binary point\"), divide the mantissa by 2, and increment the exponent by 1.  Return to step 2.</li>\n<li>(This step will never be necessary if the number we started with was an integer.) If the mantissa is nonzero but the bit to the left of the radix point is 0, multiply the mantissa by 2, and decrement the exponent by 1.  Return to step 2.</li>\n</ol>\n\n<p>Running this algorithm in tabular form for our number 9, we have:</p>\n\n<pre><code>step  mantissa  exponent\n   0     1001.         0\n   1     100.1         1\n   2     10.01         2\n   3     1.001         3\n</code></pre>\n\n<p>So, if you're still with me, that's how we can convert the decimal integer <strong>9</strong> to the binary scientific notation (or floating-point) number <strong>1.001<sub>2</sub>&times;2<sup>3</sup></strong>.</p>\n\n<p>And, with all of that said, the algorithm as stated so far only works for decimal <em>integers</em>.  What if we wanted to convert, say, the decimal number 1.25 to the binary number 1.01<sub>2</sub>&times;2<sup>0</sup>, or 34.125 to 1.00010001<sub>2</sub>&times;2<sup>5</sup>?  That's a discussion that will have to wait for another day (or for <a href=\"https://stackoverflow.com/questions/58306289/how-does-a-float-get-converted-to-scientific-notation-for-storage/58315145#58315145\">this other answer</a>), I guess.</p>\n"}], "owner": {"reputation": 239, "user_id": 3078473, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bc2dd96901ab360c6d8e635aca45c24a?s=128&d=identicon&r=PG", "display_name": "JackOfAll", "link": "https://stackoverflow.com/users/3078473/jackofall"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 985, "favorite_count": 1, "answer_count": 3, "score": 1, "last_activity_date": 1571235230, "creation_date": 1570630798, "question_id": 58306289, "link": "https://stackoverflow.com/questions/58306289/how-does-a-float-get-converted-to-scientific-notation-for-storage", "title": "How does a float get converted to scientific notation for storage?", "body": "<p><a href=\"http://www.cs.yale.edu/homes/aspnes/pinewiki/C(2f)FloatingPoint.html\" rel=\"nofollow noreferrer\">http://www.cs.yale.edu/homes/aspnes/pinewiki/C(2f)FloatingPoint.html</a></p>\n\n<p>I was looking into why there are sometimes rounding issues when storing a float.   I read the above link, and see that floats are converted to scientific notation.  </p>\n\n<p><a href=\"https://babbage.cs.qc.cuny.edu/IEEE-754/index.xhtml\" rel=\"nofollow noreferrer\">https://babbage.cs.qc.cuny.edu/IEEE-754/index.xhtml</a></p>\n\n<p>Base is always 2.    So, 8 is stored as 1 * 2^3.    9 is stored as 1.001 * 2^3.   </p>\n\n<p>What is the math algorithm to determine the mantissa/significand and exponent?</p>\n"}, {"tags": ["c", "recursion"], "comments": [{"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 2, "creation_date": 1570630009, "post_id": 58306014, "comment_id": 102973983, "body": "Where does <code>deletestrong</code> return?"}, {"owner": {"reputation": 21800, "user_id": 1586924, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/gyN84.jpg?s=128&g=1", "display_name": "hasan", "link": "https://stackoverflow.com/users/1586924/hasan"}, "edited": false, "score": 1, "creation_date": 1570630143, "post_id": 58306014, "comment_id": 102974053, "body": "my guess something wrong here: <code>if(checkstrong(arr[current]==1))</code>. did you mean <code>if (checkstrong(arr[current])==1)</code>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1570630321, "post_id": 58306014, "comment_id": 102974161, "body": "Enable compiler warnings, then pay attention to them. Start by getting this code to compile cleanly."}, {"owner": {"reputation": 21800, "user_id": 1586924, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/gyN84.jpg?s=128&g=1", "display_name": "hasan", "link": "https://stackoverflow.com/users/1586924/hasan"}, "edited": false, "score": 0, "creation_date": 1570630831, "post_id": 58306014, "comment_id": 102974437, "body": "your code is fine. your only problem is the one I pointed out"}, {"owner": {"reputation": 43, "user_id": 11875593, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PTsZMfN759U/AAAAAAAAAAI/AAAAAAAABNI/WtFU5LhGHZA/photo.jpg?sz=128", "display_name": "Abhishek Aditya", "link": "https://stackoverflow.com/users/11875593/abhishek-aditya"}, "edited": false, "score": 0, "creation_date": 1570631327, "post_id": 58306014, "comment_id": 102974736, "body": "YES!. Thankyou for pointing that out."}, {"owner": {"reputation": 43, "user_id": 11875593, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PTsZMfN759U/AAAAAAAAAAI/AAAAAAAABNI/WtFU5LhGHZA/photo.jpg?sz=128", "display_name": "Abhishek Aditya", "link": "https://stackoverflow.com/users/11875593/abhishek-aditya"}, "edited": false, "score": 0, "creation_date": 1570631356, "post_id": 58306014, "comment_id": 102974751, "body": "I corrected it. The code works now!"}, {"owner": {"reputation": 43, "user_id": 11875593, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PTsZMfN759U/AAAAAAAAAAI/AAAAAAAABNI/WtFU5LhGHZA/photo.jpg?sz=128", "display_name": "Abhishek Aditya", "link": "https://stackoverflow.com/users/11875593/abhishek-aditya"}, "reply_to_user": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1570642917, "post_id": 58306014, "comment_id": 102980556, "body": "@KamilCuk The number of elements in the array after deleting the strong numbers."}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1570644965, "post_id": 58306014, "comment_id": 102981539, "body": "No it doesn&#39;t return the count. When <code>current &gt;= n</code> is false, there is no return statement."}, {"owner": {"reputation": 43, "user_id": 11875593, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PTsZMfN759U/AAAAAAAAAAI/AAAAAAAABNI/WtFU5LhGHZA/photo.jpg?sz=128", "display_name": "Abhishek Aditya", "link": "https://stackoverflow.com/users/11875593/abhishek-aditya"}, "reply_to_user": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1570713390, "post_id": 58306014, "comment_id": 103006284, "body": "@KamilCuk if  current&gt;= n is false then what it means is that there are still a few elements left in the array which have not been checked whether they are strong numbers or not."}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1570714513, "post_id": 58306014, "comment_id": 103007005, "body": "But there is no <code>return</code> statement, when <code>current &lt; n</code>, the  function does not return anything. The function only <code>return n</code> when <code>curent &gt;= n</code>. But if it isn&#39;t, the function doesn&#39;t return."}], "answers": [{"comments": [{"owner": {"reputation": 427, "user_id": 7941330, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/u7jCJ.jpg?s=128&g=1", "display_name": "F&#225;bio Roberto Teodoro", "link": "https://stackoverflow.com/users/7941330/f%c3%a1bio-roberto-teodoro"}, "edited": false, "score": 0, "creation_date": 1570631095, "post_id": 58306162, "comment_id": 102974584, "body": "No, the <code>arr[current]</code> comes from the <code>stdin</code>, it can be any value."}, {"owner": {"reputation": 43, "user_id": 11875593, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PTsZMfN759U/AAAAAAAAAAI/AAAAAAAABNI/WtFU5LhGHZA/photo.jpg?sz=128", "display_name": "Abhishek Aditya", "link": "https://stackoverflow.com/users/11875593/abhishek-aditya"}, "edited": false, "score": 0, "creation_date": 1570631453, "post_id": 58306162, "comment_id": 102974825, "body": "Yes.  i changed the content of if statement. the code works now."}, {"owner": {"reputation": 21800, "user_id": 1586924, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/gyN84.jpg?s=128&g=1", "display_name": "hasan", "link": "https://stackoverflow.com/users/1586924/hasan"}, "reply_to_user": {"reputation": 427, "user_id": 7941330, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/u7jCJ.jpg?s=128&g=1", "display_name": "F&#225;bio Roberto Teodoro", "link": "https://stackoverflow.com/users/7941330/f%c3%a1bio-roberto-teodoro"}, "edited": false, "score": 1, "creation_date": 1570639433, "post_id": 58306162, "comment_id": 102978981, "body": "@F&#225;bioRobertoTeodoro true. updated my answer. which means it could be also 0 or false"}], "tags": [], "owner": {"reputation": 21800, "user_id": 1586924, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/gyN84.jpg?s=128&g=1", "display_name": "hasan", "link": "https://stackoverflow.com/users/1586924/hasan"}, "is_accepted": false, "score": 0, "last_activity_date": 1570639379, "last_edit_date": 1570639379, "creation_date": 1570630429, "answer_id": 58306162, "question_id": 58306014, "link": "https://stackoverflow.com/questions/58306014/what-is-the-error-in-this-function-that-deletes-all-the-strong-numbers-in-a-give/58306162#58306162", "title": "What is the error in this function that deletes all the strong numbers in a given array using RECURSION?", "body": "<p>Your code shows that you always send 1 or true or 0 or false to <code>checkstrong</code> method.</p>\n\n<pre><code>if (  checkstrong(arr[current]==1)  )\n</code></pre>\n\n<p>The value of <code>arr[current]==1</code> is always 1 or true</p>\n\n<p><strong>Correct code:</strong></p>\n\n<pre><code>if ( checkstrong(arr[current]) == 1 )\n</code></pre>\n\n<p><strong>Or:</strong></p>\n\n<pre><code>if ( checkstrong(arr[current]) )\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 427, "user_id": 7941330, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/u7jCJ.jpg?s=128&g=1", "display_name": "F&#225;bio Roberto Teodoro", "link": "https://stackoverflow.com/users/7941330/f%c3%a1bio-roberto-teodoro"}, "is_accepted": false, "score": 0, "last_activity_date": 1570649667, "last_edit_date": 1570649667, "creation_date": 1570631389, "answer_id": 58306493, "question_id": 58306014, "link": "https://stackoverflow.com/questions/58306014/what-is-the-error-in-this-function-that-deletes-all-the-strong-numbers-in-a-give/58306493#58306493", "title": "What is the error in this function that deletes all the strong numbers in a given array using RECURSION?", "body": "<p>I think the error is in this line: <code>if (checkstrong(arr[current] == 1)) {</code></p>\n\n<p>I changed it to: <code>if (checkstrong(arr[current]) == 1) {</code></p>\n\n<p>I couldn't test, but think this will work:</p>\n\n<pre><code>int deletestrong(int arr[],int n,int current){\n    if(current &gt;= n){\n        return n;\n    }\n    if (checkstrong(arr[current]) == 1) {\n        if (current != n-1) {\n            for(int i=current; i&lt; n-1 ;i++){\n                arr[i]=arr[i+1];\n            }\n        }\n        n--;\n    }\n\n    else{\n        current++;\n    }\n    return deletestrong(arr,n,current);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13228, "user_id": 8398549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8tzrl.jpg?s=128&g=1", "display_name": "Cid", "link": "https://stackoverflow.com/users/8398549/cid"}, "edited": false, "score": 0, "creation_date": 1570691876, "post_id": 58306760, "comment_id": 102994682, "body": "Your answser seems good and pretty explicit to me, you don&#39;t deserve a -1"}, {"owner": {"reputation": 13228, "user_id": 8398549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8tzrl.jpg?s=128&g=1", "display_name": "Cid", "link": "https://stackoverflow.com/users/8398549/cid"}, "edited": false, "score": 0, "creation_date": 1570691980, "post_id": 58306760, "comment_id": 102994726, "body": "There is a last flaw in that code, however, if user enters something greater than 20 -&gt; Boom !. I would dynamically allocate memory to <code>arr</code> using <code>n</code>"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 13228, "user_id": 8398549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8tzrl.jpg?s=128&g=1", "display_name": "Cid", "link": "https://stackoverflow.com/users/8398549/cid"}, "edited": false, "score": 0, "creation_date": 1570694581, "post_id": 58306760, "comment_id": 102995941, "body": "@Cid What you have said has nothing common with my answer."}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1570632303, "creation_date": 1570632303, "answer_id": 58306760, "question_id": 58306014, "link": "https://stackoverflow.com/questions/58306014/what-is-the-error-in-this-function-that-deletes-all-the-strong-numbers-in-a-give/58306760#58306760", "title": "What is the error in this function that deletes all the strong numbers in a given array using RECURSION?", "body": "<p>For starters the third parameter is redundant. The function can be written in different ways. One of approaches is when the function returns the number of elements in the array that are not strong numbers.</p>\n\n<p>Your implementation of the function at least has undefined behavior because the function returns nothing when the control is passed to this statement</p>\n\n<pre><code>    //...\n    deletestrong(arr,n,current);\n}\n</code></pre>\n\n<p>This if statement</p>\n\n<pre><code> if( checkstrong( arr[current] == 1 ) ){\n</code></pre>\n\n<p>has a logicak error. You mean instead</p>\n\n<pre><code>if( checkstrong( arr[current] ) == 1 ){\n</code></pre>\n\n<p>The function can be written the following way</p>\n\n<pre><code>size_t deletestrong( int a[], size_t n )\n{\n    size_t non_strong_numbers = 0;\n\n    if ( n )\n    {\n        if ( checkstrong( *a ) )\n        {\n            for ( size_t i = 1; i != n; i++ ) a[i-1] = a[i];\n        }\n        else\n        {\n            non_strong_numbers = 1;\n            ++a;\n        }\n\n        non_strong_numbers += deletestrong( a, n - 1 ); \n    }\n\n    return non_strong_numbers;\n}\n</code></pre>\n\n<p>And called like</p>\n\n<pre><code>size_t n;\nint arr[20];\nprintf(\"Enter number of elements.\\n\");\nscanf( \"%zu\",&amp;n );\n//...\nn = deletestrong( arr, n );\n//...\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 11875593, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PTsZMfN759U/AAAAAAAAAAI/AAAAAAAABNI/WtFU5LhGHZA/photo.jpg?sz=128", "display_name": "Abhishek Aditya", "link": "https://stackoverflow.com/users/11875593/abhishek-aditya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1570649667, "creation_date": 1570629928, "question_id": 58306014, "link": "https://stackoverflow.com/questions/58306014/what-is-the-error-in-this-function-that-deletes-all-the-strong-numbers-in-a-give", "title": "What is the error in this function that deletes all the strong numbers in a given array using RECURSION?", "body": "<p>All other functions that are being used here(checkstrong and factorial) work perfectly fine.\nThis deletestrong function ends up deleting all the elements in the array.</p>\n\n<pre><code>int deletestrong(int arr[],int n,int current){\n    if(current &gt;= n){\n        return n;\n    }\n    if(checkstrong(arr[current]==1)){\n        if(current== n-1){\n            n--;\n        }\n\n        else {\n            for(int i=current; i&lt; n-1 ;i++){\n                arr[i]=arr[i+1];\n            }\n            n--;\n        }\n    }\n\n    else{\n        current++;\n    }\n    deletestrong(arr,n,current);\n}\n</code></pre>\n\n<p><strong>DRIVER FUNCTION</strong></p>\n\n<pre><code>int main(){\n    int n;\n    int arr[20];\n    printf(\"Enter number of elements.\\n\");\n    scanf(\"%d\",&amp;n);\n\n    printf(\"Enter the array.\\n\");\n    for(int i=0;i&lt;n;i++){\n        scanf(\"%d\",&amp;arr[i]);\n    }\n    printarray(arr,n);\n    n=deletestrong(arr,n,0);\n    printf(\"After deleting all the strong numbers.\\n\");\n    printarray(arr,n);\n}\n</code></pre>\n"}, {"tags": ["c", "avr", "spi"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1570630162, "post_id": 58305820, "comment_id": 102974066, "body": "You need to study the specific MCU in detail. Start by reading all relevant application notes published by Atmel for the specific part. Not sure why anyone would voluntarily want to use Eclipse, but otherwise Atmel Studio should come with example code for basic startup and simple things like flashing LEDs. Same with commercial toolchains like Crossworks or IAR. Not sure what you mean with &quot;to have any drivers&quot;, do you mean in the MCU or in the PC? You&#39;ll want some in circuit debugger to connect to the MCU."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1570630208, "post_id": 58305820, "comment_id": 102974101, "body": "Anyway, &quot;how do I do my whole project&quot; questions aren&#39;t the best fit for SO since they are very broad."}], "answers": [{"tags": [], "owner": {"reputation": 3648, "user_id": 4931630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4290ddd0630dd0091e3b9713a23c3434?s=128&d=identicon&r=PG&f=1", "display_name": "AterLux", "link": "https://stackoverflow.com/users/4931630/aterlux"}, "is_accepted": false, "score": 0, "last_activity_date": 1570632449, "creation_date": 1570632449, "answer_id": 58306808, "question_id": 58305820, "link": "https://stackoverflow.com/questions/58305820/creating-new-epaper-library-for-atmega32-without-arduino/58306808#58306808", "title": "Creating new epaper library for atmega32 without arduino", "body": "<p>Your question a little bit strange, because \"driver\" is usually piece of code, written by a third person. So, answer is yes - it is always possible to do it from scratch, without using third-side software.</p>\n\n<p>First what you need to know is what type of controller being used in that display, to get technical documentation (datasheet). Unfortunately, there is no such information, but there is a link to the specification document: <a href=\"https://www.waveshare.com/w/upload/9/9e/1.54inch-e-paper-b-specification.pdf\" rel=\"nofollow noreferrer\">https://www.waveshare.com/w/upload/9/9e/1.54inch-e-paper-b-specification.pdf</a></p>\n\n<p>Read it carefully. For example at page 8 you can find the list of commands, which are used to control the display, and below the detailed description of the commands.</p>\n\n<p>At pages 24, 25 you can find initialization sequence, and reference flowchart.</p>\n\n<p>If any doubts, you can download and investigate how third-party libraries are done. For example here: <a href=\"https://github.com/waveshare/e-Paper\" rel=\"nofollow noreferrer\">https://github.com/waveshare/e-Paper</a></p>\n"}], "owner": {"reputation": 13, "user_id": 11619438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17b814223813e967e4990c3fbd9950e5?s=128&d=identicon&r=PG&f=1", "display_name": "weissvhdl", "link": "https://stackoverflow.com/users/11619438/weissvhdl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1570632449, "creation_date": 1570629315, "question_id": 58305820, "link": "https://stackoverflow.com/questions/58305820/creating-new-epaper-library-for-atmega32-without-arduino", "title": "Creating new epaper library for atmega32 without arduino", "body": "<p>i want to create new library for my e-paper using atmega32 and eclipse enviroment. What do i have to know about it moreover how it works. I dont want to use arduino libraries, want to write it on my own. How to best start making it? I know how to use SPI, what commands do i have to send to display, but do i have to have any drivers which are necessarily? Is any possibilty to program it using only this module:\n<a href=\"https://www.waveshare.com/1.54inch-e-paper-module-b.htm\" rel=\"nofollow noreferrer\">https://www.waveshare.com/1.54inch-e-paper-module-b.htm</a>\nand SPI? Or it is necessary to have some drivers to do it?</p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 2, "creation_date": 1570628994, "post_id": 58305642, "comment_id": 102973387, "body": "@Andr&#233;s &#193;lvarez Show the definition of Passenger."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1570629202, "post_id": 58305642, "comment_id": 102973516, "body": "<code>a</code> is not a double-pointer, and <code>**r</code> is a <code>Passenger</code>, not a pointer. If you want to change where <code>r</code> is pointing, assign a new value to <code>r</code>. Don&#39;t insert ampersands and asterisks willy-nilly trying to stumble across the correct code (it most likely won&#39;t be, even if it compiles)."}, {"owner": {"reputation": 11, "user_id": 12124811, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAilkt9XQO-q0ln8NTfrW-32louuFwmnEV-TUceKg=k-s128", "display_name": "Andr&#233;s &#193;lvarez", "link": "https://stackoverflow.com/users/12124811/andr%c3%a9s-%c3%81lvarez"}, "edited": false, "score": 0, "creation_date": 1570629251, "post_id": 58305642, "comment_id": 102973545, "body": "It is C language:"}, {"owner": {"reputation": 11, "user_id": 12124811, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAilkt9XQO-q0ln8NTfrW-32louuFwmnEV-TUceKg=k-s128", "display_name": "Andr&#233;s &#193;lvarez", "link": "https://stackoverflow.com/users/12124811/andr%c3%a9s-%c3%81lvarez"}, "edited": false, "score": 0, "creation_date": 1570629380, "post_id": 58305642, "comment_id": 102973624, "body": "Edit: the struct passenger is already in the code"}, {"owner": {"reputation": 171, "user_id": 12078619, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2R9LJ.jpg?s=128&g=1", "display_name": "Sergey Aleksandrovich", "link": "https://stackoverflow.com/users/12078619/sergey-aleksandrovich"}, "edited": false, "score": 0, "creation_date": 1570629605, "post_id": 58305642, "comment_id": 102973766, "body": "struct boardingQueue should contain &quot;next&quot; for initializing of q (Passenger **q = &amp;(qPtr-&gt;next);)"}], "answers": [{"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1570630052, "last_edit_date": 1570630052, "creation_date": 1570629722, "answer_id": 58305935, "question_id": 58305642, "link": "https://stackoverflow.com/questions/58305642/how-can-i-use-double-pointers-correctly-in-this-case/58305935#58305935", "title": "How can I use double pointers correctly in this case?", "body": "<p>If the pointer <code>r</code> is declared and initialized like this</p>\n\n<pre><code>Passenger **r = &amp;(qPtr-&gt;head);\n</code></pre>\n\n<p>then in this statement</p>\n\n<pre><code>**r = &amp;(r-&gt;next);\n</code></pre>\n\n<p><code>**r</code> has the type <code>Passenger</code>. Moreover r is pointing to a pointer. S this expression <code>r-&gt;next</code> is incorrect because pointers do not have the data member next (pointers are not structures).</p>\n\n<p>So all three expressions</p>\n\n<pre><code>**r = &amp;(r-&gt;next),\n\n**r = &amp;(*r-&gt;next),\n\n**r = &amp;(**r-&gt;next)\n</code></pre>\n\n<p>are incorrect. For example the expression</p>\n\n<pre><code>&amp;(**r-&gt;next)\n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>&amp;(** ( r-&gt;next ) )\n</code></pre>\n\n<p>It seems what you mean is the following</p>\n\n<pre><code>r = &amp;( *r )-&gt;next;\n</code></pre>\n\n<p>Take into account that this declaration</p>\n\n<pre><code>Passenger **q = &amp;(qPtr-&gt;next);\n</code></pre>\n\n<p>is also invalid because the structure <code>BoardingQueue</code> does not have the data member <code>next</code>.</p>\n\n<p>also the condition in the for loop</p>\n\n<pre><code>for (int i = size-1; i &lt;=0; i--)\n</code></pre>\n\n<p>is invalid. It will be valid only in the case when <code>size</code> is less than or equal to 1.:)</p>\n\n<p>You have to rewrite the function <code>sortBoardingQueue</code> anew at least using valid C expressions. After that you can ask a question: why does not my sort function work.:)</p>\n"}, {"tags": [], "owner": {"reputation": 741, "user_id": 6542361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e76817f81febd8c7a6059cbb70c8c3a?s=128&d=identicon&r=PG&f=1", "display_name": "GandhiGandhi", "link": "https://stackoverflow.com/users/6542361/gandhigandhi"}, "is_accepted": false, "score": 0, "last_activity_date": 1570630691, "creation_date": 1570630691, "answer_id": 58306250, "question_id": 58305642, "link": "https://stackoverflow.com/questions/58305642/how-can-i-use-double-pointers-correctly-in-this-case/58306250#58306250", "title": "How can I use double pointers correctly in this case?", "body": "<p>-- next time it will be easier to get an answer if the posted code snippet is exactly what you're feeding into the compiler, and if you include your compiler errors <em>exactly as they appear</em> with your question.</p>\n\n<p>I restructured your example code + added a main function to show some of the compiler errors to show what I mean:</p>\n\n<hr>\n\n<h1>Code example</h1>\n\n<pre><code>#define NULL 0\n//the declarations of the structs I am using in my header file\ntypedef struct passenger {\nchar name[30];          // the passenger's name\ndouble passportNumber;  // their passport number\nint seatNumber;         // their seat number on the plane\nstruct passenger* next; // a pointer to the next passenger in the queue after this one\n} Passenger;\n\ntypedef struct boardingQueue {\n    Passenger* head; // points to the Passenger at the front/head of the queue\n    Passenger* tail; // points to the Passenger at the end/tail of the queue\n} BoardingQueue;\n\nint sortBoardingQueue(BoardingQueue *qPtr){\n    int size = 3; // func undefined?? calculateSize(qPtr);\n\n    Passenger *t = qPtr-&gt;head;\n    Passenger *a = qPtr-&gt;head-&gt;next;\n    Passenger **r = &amp;(qPtr-&gt;head);\n    Passenger **q = &amp;(qPtr-&gt;next);\n    for (int i = size-1; i &lt;=0; i--)\n    {   \n        while(t != NULL){\n            if (t-&gt;seatNumber&gt;a-&gt;seatNumber)\n            {\n                **r = *a; \n                **q = *t; \n            }\n            t = t-&gt;next;\n            a = a-&gt;next;\n            **r = &amp;(r-&gt;next);\n            **a = &amp;(a-&gt;next);\n        }\n    }   \n\n}\n\nint main(){\n    // make passengers\n    Passenger a = {\"p1\", 111.0, 1, NULL};\n    Passenger b = {\"p2\", 222.0, 2, NULL};\n    Passenger c = {\"p2\", 222.0, 3, NULL};\n\n    // make boarding queue a-&gt;c-&gt;b\n    a.next = &amp;c; \n    c.next = &amp;b; \n    BoardingQueue q = {&amp;a, &amp;b};\n\n    sortBoardingQueue(&amp;q);\n}\n</code></pre>\n\n<hr>\n\n<h1>Compiler errors</h1>\n\n<p>dp.c: In function \u2018sortBoardingQueue\u2019: dp.c:22:27: error:\n \u2018BoardingQueue {aka struct boardingQueue}\u2019 has no member named \u2018next\u2019\n      <code>Passenger **q = &amp;(qPtr-&gt;next);</code></p>\n\n<p>From this one, its because boardingQueue has no member <code>next</code>, only <code>head</code> and <code>tail</code>. (Maybe you wanted that to point to a passenger? I can't tell what you intended from context)</p>\n\n<pre><code>dp.c:33:22: error: request for member \u2018next\u2019 in something not a structure or union\n              `**r = &amp;(r-&gt;next);`\n</code></pre>\n\n<p>For this one, r is of type <code>Passenger **</code>, so it points to a passenger struct. If you really want to access that struct's next field, you'll have to use <code>(*r)-&gt;next</code></p>\n\n<pre><code>  dp.c:34:13: error: invalid type argument of unary \u2018*\u2019 (have\n \u2018Passenger {aka struct passenger}\u2019)\n              **a = &amp;(a-&gt;next);\n</code></pre>\n\n<p>For this one, <code>a</code> is a single pointer. You can only dereference it once.</p>\n\n<hr>\n\n<p>So, I hope that helps you plenty for this assignment! And next time, if you post a minimum, reproducible example <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">https://stackoverflow.com/help/minimal-reproducible-example</a> you're bound to get better answers faster.</p>\n"}], "owner": {"reputation": 11, "user_id": 12124811, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAilkt9XQO-q0ln8NTfrW-32louuFwmnEV-TUceKg=k-s128", "display_name": "Andr&#233;s &#193;lvarez", "link": "https://stackoverflow.com/users/12124811/andr%c3%a9s-%c3%81lvarez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1570630691, "creation_date": 1570628759, "last_edit_date": 1570629306, "question_id": 58305642, "link": "https://stackoverflow.com/questions/58305642/how-can-i-use-double-pointers-correctly-in-this-case", "title": "How can I use double pointers correctly in this case?", "body": "<p>I am doing a boarding queue and I am using a simple bubble sort algorithm to sort the queue I have, I am using 2 pointers to store the values I am comparing and 2 double pointer to modify the value inside each node that I want to swap. My problem is when I want to change where my double pointers are pointing in order to iterate through all the queue, it never compiles, I have tried:  </p>\n\n<p>this:<code>**r = &amp;(r-&gt;next)</code>,</p>\n\n<p>this: <code>**r = &amp;(*r-&gt;next)</code>,</p>\n\n<p>or this: <code>**r = &amp;(**r-&gt;next)</code></p>\n\n<p>Same happens when I try to change where my double pointer \"a\" is pointing. This is the full method just in case you need to see it,</p>\n\n<pre><code>int sortBoardingQueue(BoardingQueue *qPtr){\n    int size = calculateSize(qPtr);\n\n    Passenger *t = qPtr-&gt;head;\n    Passenger *a = qPtr-&gt;head-&gt;next;\n    Passenger **r = &amp;(qPtr-&gt;head);\n    Passenger **q = &amp;(qPtr-&gt;next);\n    for (int i = size-1; i &lt;=0; i--)\n    {\n        while(t != NULL){\n            if (t-&gt;seatNumber&gt;a-&gt;seatNumber)\n            {\n                **r = *a;\n                **q = *t;\n            }\n            t = t-&gt;next;\n            a = a-&gt;next;\n            **r = &amp;(r-&gt;next);\n            **a = &amp;(a-&gt;next);\n        }\n    }\n\n}\n\n//the declarations of the structs I am using in my header file\ntypedef struct boardingQueue {\n    Passenger* head; // points to the Passenger at the front/head of the queue\n    Passenger* tail; // points to the Passenger at the end/tail of the queue\n} BoardingQueue;\n\ntypedef struct passenger {\nchar name[30];          // the passenger's name\ndouble passportNumber;  // their passport number\nint seatNumber;         // their seat number on the plane\nstruct passenger* next; // a pointer to the next passenger in the queue after this one\n} Passenger;\n</code></pre>\n"}, {"tags": ["c++", "c", "jenkins", "abi"], "comments": [{"owner": {"reputation": 1894, "user_id": 8473031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4878bfc9d6a80397a8446111fffa4dd?s=128&d=identicon&r=PG&f=1", "display_name": "RoQuOTriX", "link": "https://stackoverflow.com/users/8473031/roquotrix"}, "edited": false, "score": 0, "creation_date": 1570628624, "post_id": 58305510, "comment_id": 102973173, "body": "1. Why is this tagged C/C++?"}, {"owner": {"reputation": 603, "user_id": 2721809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd7c55a4a4bb4dab34e02e6cc96bc146?s=128&d=identicon&r=PG", "display_name": "Tim Angus", "link": "https://stackoverflow.com/users/2721809/tim-angus"}, "reply_to_user": {"reputation": 1894, "user_id": 8473031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4878bfc9d6a80397a8446111fffa4dd?s=128&d=identicon&r=PG&f=1", "display_name": "RoQuOTriX", "link": "https://stackoverflow.com/users/8473031/roquotrix"}, "edited": false, "score": 0, "creation_date": 1570628708, "post_id": 58305510, "comment_id": 102973220, "body": "abidiff is a tool for C and/or C++"}, {"owner": {"reputation": 999, "user_id": 7859598, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-B2rVv02QIdo/AAAAAAAAAAI/AAAAAAAACew/FUFwHEbNSVo/photo.jpg?sz=128", "display_name": "Rietty", "link": "https://stackoverflow.com/users/7859598/rietty"}, "edited": false, "score": 0, "creation_date": 1570629434, "post_id": 58305510, "comment_id": 102973663, "body": "That shouldn&#39;t really matter. The act of running a diff is different from the file types it&#39;s being run on."}], "answers": [{"comments": [{"owner": {"reputation": 603, "user_id": 2721809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd7c55a4a4bb4dab34e02e6cc96bc146?s=128&d=identicon&r=PG", "display_name": "Tim Angus", "link": "https://stackoverflow.com/users/2721809/tim-angus"}, "edited": false, "score": 0, "creation_date": 1570629834, "post_id": 58305920, "comment_id": 102973889, "body": "Mmm, I had come across stuff like that, but we&#39;re not using pipelines unfortunately."}, {"owner": {"reputation": 916, "user_id": 11458415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b7c30fb5fc0fd5e46a80dd7c71333b8?s=128&d=identicon&r=PG&f=1", "display_name": "smelm", "link": "https://stackoverflow.com/users/11458415/smelm"}, "reply_to_user": {"reputation": 603, "user_id": 2721809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd7c55a4a4bb4dab34e02e6cc96bc146?s=128&d=identicon&r=PG", "display_name": "Tim Angus", "link": "https://stackoverflow.com/users/2721809/tim-angus"}, "edited": false, "score": 0, "creation_date": 1570630097, "post_id": 58305920, "comment_id": 102974029, "body": "Have a look at the other stackoverflow link then. It uses only the shell."}], "tags": [], "owner": {"reputation": 916, "user_id": 11458415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b7c30fb5fc0fd5e46a80dd7c71333b8?s=128&d=identicon&r=PG&f=1", "display_name": "smelm", "link": "https://stackoverflow.com/users/11458415/smelm"}, "is_accepted": false, "score": 0, "last_activity_date": 1570629666, "creation_date": 1570629666, "answer_id": 58305920, "question_id": 58305510, "link": "https://stackoverflow.com/questions/58305510/running-a-specific-diff-command-between-files-in-two-jenkins-builds/58305920#58305920", "title": "Running a specific diff command between files in two Jenkins builds", "body": "<p>You can find the last successfull build like this (if you are using a pipeline)</p>\n\n<pre><code>import jenkins.model.*\n\ndef job = jenkins.model.Jenkins.instance.getItemByFullName('&lt;jobname&gt;')\ndef buildNumber = job.getLastSuccessfulBuild().getNumber()\nsh \"abidiff &lt;my-file&gt; ../builds/$buildNumber\"\n</code></pre>\n\n<p>You might also want to take a look at: <a href=\"https://stackoverflow.com/questions/31508603/how-to-retrieve-build-id-of-latest-successful-build-in-jenkins\">How to retrieve build_id of latest successful build in Jenkins?</a></p>\n\n<p>Or you might think about <a href=\"https://jenkins.io/doc/pipeline/steps/core/#archiveartifacts-archive-the-artifacts\" rel=\"nofollow noreferrer\">archiveArtifacts</a></p>\n"}], "owner": {"reputation": 603, "user_id": 2721809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd7c55a4a4bb4dab34e02e6cc96bc146?s=128&d=identicon&r=PG", "display_name": "Tim Angus", "link": "https://stackoverflow.com/users/2721809/tim-angus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 352, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570629666, "creation_date": 1570628377, "question_id": 58305510, "link": "https://stackoverflow.com/questions/58305510/running-a-specific-diff-command-between-files-in-two-jenkins-builds", "title": "Running a specific diff command between files in two Jenkins builds", "body": "<p>I recently discovered <code>abidiff</code>; a tool that takes two binaries as input, and describes differences in ABI. This could prove useful to detect when ABI version numbers need to change.</p>\n\n<p>Ideally we would integrate this into our Jenkins based CI, but I can't immediately see a straightforward way to run a command on a file in the current build and the corresponding file in the last successful build (ideally on the same branch).</p>\n\n<p>I did play around with an <code>Exceute Shell</code> build step, but couldn't see an obvious way to get at the previous successful build number, from which I would eventually be able to get a path to the files I want to compare. Any suggestions/pointers on how to get this? There is the <code>GIT_PREVIOUS_SUCCESSFUL_COMMIT</code> environment variable, but this isn't much use as far as I can tell, as resolving the SHA to a file on disk would require resolving the SHA to the build number.</p>\n"}, {"tags": ["c++", "c", "mosquitto"], "comments": [{"owner": {"reputation": 646, "user_id": 7251286, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0e021813332cd736c36621f3a549487f?s=128&d=identicon&r=PG&f=1", "display_name": "florgeng", "link": "https://stackoverflow.com/users/7251286/florgeng"}, "edited": false, "score": 0, "creation_date": 1570632242, "post_id": 58305376, "comment_id": 102975293, "body": "could you try to replace <code>mosquitto_connect</code> with <code>mosquitto_connect_async</code> -- so that the loop is already running when the connect is executed"}, {"owner": {"reputation": 81, "user_id": 1676751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b474f2066b334a43a9433b6560f2225b?s=128&d=identicon&r=PG&f=1", "display_name": "chinmaya", "link": "https://stackoverflow.com/users/1676751/chinmaya"}, "reply_to_user": {"reputation": 646, "user_id": 7251286, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0e021813332cd736c36621f3a549487f?s=128&d=identicon&r=PG&f=1", "display_name": "florgeng", "link": "https://stackoverflow.com/users/7251286/florgeng"}, "edited": false, "score": 0, "creation_date": 1570636857, "post_id": 58305376, "comment_id": 102977810, "body": "I have already done that but  ... no luck ! BTW thanks for response @florgeng"}], "owner": {"reputation": 81, "user_id": 1676751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b474f2066b334a43a9433b6560f2225b?s=128&d=identicon&r=PG&f=1", "display_name": "chinmaya", "link": "https://stackoverflow.com/users/1676751/chinmaya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 189, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1570627938, "creation_date": 1570627938, "question_id": 58305376, "link": "https://stackoverflow.com/questions/58305376/onconnect-callback-is-not-getting-called-using-mosquitto-c", "title": "OnConnect() Callback is not getting called using mosquitto C", "body": "<p>Using mosquitto, I am trying to push data into AWS. mosquitto_connect() function is executing successfully but onConnect() function is not getting called for some unknown reason. onDisconnect() returns an error code 7 which means MOSQ_ERR_CONN_LOST. I am clueless how to deal with this.</p>\n\n<p>Note : Same program used to work previously but now throwing error.</p>\n\n<pre><code>\nstatic void onDisconnect(struct mosquitto *mosq, void *obj, int rc){\n  std::cout&lt;&lt;__FUNCTION__&lt;&lt;\" : \"&lt;&lt;__LINE__&lt;&lt;\" : \"&lt;&lt;mosquitto_strerror(rc)&lt;&lt;std::endl;\n  cout &lt;&lt; \"disconnect status...\" &lt;&lt; rc &lt;&lt; endl; \n  // mosquitto_loop_stop(mosq, false);  (void)obj, (void)mosq;\n}\n\n\nstatic void onConnect(struct mosquitto *mosq, void *userdata, int result){\n std::cout&lt;&lt;__FUNCTION__&lt;&lt;\" : \"&lt;&lt;__LINE__&lt;&lt;\" : mosquitto connect callback succeed. \\n \"&lt;&lt;std::endl;  \n} \n\n\nstatic void onCallback(struct mosquitto *mosq, void *userdata, int level, const char *str){\n// Pring all log messages regardless of level.       (void)mosq, (void)userdata, (void)level;   std::cout&lt;&lt;__FUNCTION__&lt;&lt;\" : \"&lt;&lt;str&lt;&lt;std::endl; \n} \n\nmosquitto_lib_init();\nstruct mosquitto * mosq = NULL;\nconst char *clientId = \"ClientId\";        \nmosq = mosquitto_new(clientId, true, NULL);\n\nif (!mosq) { \n    std::cout&lt;&lt;__FUNCTION__&lt;&lt;\" : \"&lt;&lt;__LINE__&lt;&lt;\" mosquitto_new failed. \\n \"&lt;&lt;std::endl;  \n    return;\n}else\n    std::cout&lt;&lt;__FUNCTION__&lt;&lt;\" : \"&lt;&lt;__LINE__&lt;&lt;\" mosquitto_new succeed. \\n \"&lt;&lt;std::endl;    \n\nmosquitto_tls_opts_set(mosq, 1, NULL, NULL);       \nmosquitto_tls_set(mosq, \"/etc/ssl/certs/ca-certificates.crt\", NULL,                            \n                        \"/opt/usr_data/tests/LoaderPoc/certs/cert.pem\",                            \n                        \"/opt/usr_data/tests/LoaderPoc/certs/privkey.pem\", NULL);                                  \n\nmosquitto_connect_callback_set(mosq, onConnect);\nmosquitto_disconnect_callback_set(mosq, onDisconnect);    \nmosquitto_log_callback_set(mosq, onCallback);    \n//mosquitto_publish_callback_set(mosq, onPublish);    \n\nconst char *host = \"a2eg3przjv23yh.iot.us-east-1.amazonaws.com\";     \nauto ret = mosquitto_connect(mosq, host, 8883, 60);\n    cout &lt;&lt; \"connection status..\" &lt;&lt; ret &lt;&lt;endl;        \n\nauto loop_ret = mosquitto_loop_start(mosq);\n    cout &lt;&lt; \"Loop status...\" &lt;&lt; loop_ret &lt;&lt; endl; \n</code></pre>\n\n<pre><code>Output\nMachineAppOnBoardManager::onCallback : Client ClientId sending CONNECT\nMachineAppOnBoardManager::onDisconnect : 160 : The connection was lost.\ndisconnect status...7 \n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1570627999, "post_id": 58305170, "comment_id": 102972819, "body": "What&#39;s the problem? What part is it that you don&#39;t understand? Write this program without any recursion first, get it working, then take it from there."}, {"owner": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "edited": false, "score": 0, "creation_date": 1570628158, "post_id": 58305170, "comment_id": 102972894, "body": "Maybe clean up your question title? Much of it can either go into the body text or just be deleted."}, {"owner": {"reputation": 2236, "user_id": 11384392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j5bfH.jpg?s=128&g=1", "display_name": "Das_Geek", "link": "https://stackoverflow.com/users/11384392/das-geek"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1570628182, "post_id": 58305170, "comment_id": 102972912, "body": "@Lundin I imagine the recursive <code>sum</code> function was part of the code given to OP, and thus can&#39;t be modified."}], "answers": [{"comments": [{"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "reply_to_user": {"reputation": 1, "user_id": 12183298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ee2be75c190e865a452ffb7a937dbb8?s=128&d=identicon&r=PG&f=1", "display_name": "ImDumb", "link": "https://stackoverflow.com/users/12183298/imdumb"}, "edited": false, "score": 0, "creation_date": 1570652286, "post_id": 58305506, "comment_id": 102984523, "body": "@ImDumb When you use <code>scanf</code> you must always check that you the correct number of scanned values. If not you need some error handling. In this example I just return a negative value to tell that the program failed."}], "tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": true, "score": 0, "last_activity_date": 1570630702, "last_edit_date": 1570630702, "creation_date": 1570628370, "answer_id": 58305506, "question_id": 58305170, "link": "https://stackoverflow.com/questions/58305170/doubling-a-number/58305506#58305506", "title": "Doubling a number", "body": "<p>Well, in your description you say that you need to take <strong>one</strong> input. However, your program reads <strong>two</strong> inputs.</p>\n\n<p>Maybe this is what you need:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint sum(int x, int y)\n{\n return y == 0 ? x : sum(x+1, y-1);\n}\nint main(void)\n{\n int x;\n if (scanf(\"%d\", &amp;x) != 1)  // Only 1 input\n {\n    // Input error\n    return -1;\n }\n int z = sum(x, x);    // Use x for both arguments\n printf(\"%d\\n\", z);\n return 0;\n} \n</code></pre>\n\n<p>This works because the <code>sum</code> functions increments one argument and decrements the other in the recursive call and continues doing that until one of the arguments reach zero. In this way the end result will be <code>2 * x</code></p>\n\n<p>Let's say the input is 3. Then you'll have these calls:</p>\n\n<pre><code>sum(3, 3)\nsum(4, 2)\nsum(5, 1)\nsum(6, 0) // Which will end the recursion and return 6 all the way up\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12183298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ee2be75c190e865a452ffb7a937dbb8?s=128&d=identicon&r=PG&f=1", "display_name": "ImDumb", "link": "https://stackoverflow.com/users/12183298/imdumb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 58305506, "answer_count": 1, "score": -6, "last_activity_date": 1570630702, "creation_date": 1570627303, "last_edit_date": 1570628745, "question_id": 58305170, "link": "https://stackoverflow.com/questions/58305170/doubling-a-number", "title": "Doubling a number", "body": "<p>I have to make a program that calculates the double of a number. For example, if I insert <code>2</code> in <code>cmd</code>, the program should return <code>4</code>. I was already given a starter program with a <code>sum</code> function included, and I have to complete it.</p>\n\n<p>I tried many things, like clean all <code>y</code>'s and insert twice instead of summing, but like I said I'm a noob.</p>\n\n<p>This is the program without any changes :</p>\n\n<pre><code>// Sum, recursive, using only elementary operations\n#include &lt;stdio.h&gt;\nint sum(int x, int y)\n{\n return y == 0 ? x : sum(x+1, y-1);\n}\nint main(void)\n{\n int x;\n int y;\n scanf(\"%d%d\", &amp;x, &amp;y);\n int z = sum(x, y);\n printf(\"%d\\n\", z);\n return 0;\n} \n</code></pre>\n"}, {"tags": ["c", "arrays"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 10625310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66e40b50a2c20b553991c47f79c9e0aa?s=128&d=identicon&r=PG&f=1", "display_name": "Codingishard", "link": "https://stackoverflow.com/users/10625310/codingishard"}, "edited": false, "score": 1, "creation_date": 1570630328, "post_id": 58305726, "comment_id": 102974165, "body": "Wow, I couldn&#39;t see that all this time... Thank you so much"}], "tags": [], "owner": {"reputation": 36, "user_id": 12188749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66e7c223b958778ceec2bf01e1a805c7?s=128&d=identicon&r=PG&f=1", "display_name": "Calvin Mozola", "link": "https://stackoverflow.com/users/12188749/calvin-mozola"}, "is_accepted": true, "score": 2, "last_activity_date": 1570629380, "last_edit_date": 1570629380, "creation_date": 1570628996, "answer_id": 58305726, "question_id": 58304879, "link": "https://stackoverflow.com/questions/58304879/counting-holes-in-2d-array/58305726#58305726", "title": "counting holes in 2d array", "body": "<p>In your if statement, <code>if(wall[R-2][i]-=2&amp;&amp;wall[R-2][i+1]==2)  hole--;</code>, </p>\n\n<p>you have <code>-=</code> not <code>==</code>, I changed that and it was giving me -4 as you expected. </p>\n"}], "owner": {"reputation": 23, "user_id": 10625310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66e40b50a2c20b553991c47f79c9e0aa?s=128&d=identicon&r=PG&f=1", "display_name": "Codingishard", "link": "https://stackoverflow.com/users/10625310/codingishard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 533, "favorite_count": 0, "accepted_answer_id": 58305726, "answer_count": 1, "score": 2, "last_activity_date": 1570629380, "creation_date": 1570626412, "question_id": 58304879, "link": "https://stackoverflow.com/questions/58304879/counting-holes-in-2d-array", "title": "counting holes in 2d array", "body": "<p>So I have an 2d array named wall[R][C].</p>\n\n<p>What I'm trying to do here is that I'll subtract 1 from integer named hole whenever I see 2's that are next to each other in the array.</p>\n\n<p>Specifically in wall[R-2][0]~wall[R-2][C-3](in the row), wall[0][C-2]~wall[R-3][C-2](in the column), I'll check for a 2 coming next to another 2.</p>\n\n<p>I know it is hard to understand what I'm saying, so I'll show you an example.</p>\n\n<p>1  1  1  1  1  1  2  2</p>\n\n<p>1  2  2  2  1  1  2  2</p>\n\n<p>1  2  2  2  1  1  1  1</p>\n\n<p>1  2  2  2  1  2  2  1</p>\n\n<p>1  1  1  1  2  2  2  1</p>\n\n<p>1  0  0  0  1  1  2  1</p>\n\n<p>1  0  1  0  1  1  2  1</p>\n\n<p>1  0  0  0  1  1  2  1</p>\n\n<p>In this array, I'd check for the elements in the * box and @ box.</p>\n\n<p>In *box, I'll check if the element is 2, and if it is, I'll check if the element right below that 2 is also 2.</p>\n\n<p>In @ box, I'll check for the element next to it.</p>\n\n<p>Everytime I find that, I'll subtract one from integer hole.</p>\n\n<p>At wall[R-2][C-2], it might get subtracted 2 times if both the upper element and left element is 2. </p>\n\n<p>I wouldn't want that so I add 1 to hole if that happens.</p>\n\n<p>1 1 1 1 1 1*2*2</p>\n\n<p>1 2 2 2 1 1*2*2</p>\n\n<p>1 2 2 2 1 1*1*1</p>\n\n<p>1 2 2 2 1 2*2*1</p>\n\n<p>1 1 1 1 2 2*2*1</p>\n\n<p>1 0 0 0 1 1*2*1</p>\n\n<p>@ @ @ @ @ </p>\n\n<p>1 0 1 0 1 1@ 2 1</p>\n\n<p>@ @ @ @ @ </p>\n\n<p>1 0 0 0 1 1 2 1</p>\n\n<p>So I wrote the code, but it give me the wrong result.</p>\n\n<p>I expected it would subract 4 from hole.</p>\n\n<p>But it subtracts 7.</p>\n\n<p>I've been working too long, so it's really hard for me to see what is wrong with this code.</p>\n\n<p>please help me find what is wrong.</p>\n\n<pre><code>for(int i=0;i&lt;R-2;i++){\n\n    if(wall[i][C-2]==2&amp;&amp;wall[i+1][C-2]==2)  hole--;\n\n}\n\nfor(int i=0;i&lt;C-2;i++){\n\n    if(wall[R-2][i]-=2&amp;&amp;wall[R-2][i+1]==2)  hole--;\n\n}\n\nif(wall[R-2][C-2]==2&amp;&amp;wall[R-2][C-3]==2&amp;&amp;wall[R-3][C-2]==2)   hole++; //this is for preventing double subtraction.\n</code></pre>\n"}, {"tags": ["c", "sockets"], "comments": [{"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 1, "creation_date": 1570625304, "post_id": 58304455, "comment_id": 102971154, "body": "<code>asm&#47;socket.h</code> is a header from the api exposed by linux kernel. What kernel are you running?"}, {"owner": {"reputation": 131, "user_id": 12100635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b44a749f3fe873f87d45c449ee2099d0?s=128&d=identicon&r=PG&f=1", "display_name": "S&#252;mer Kol&#231;ak", "link": "https://stackoverflow.com/users/12100635/s%c3%bcmer-kol%c3%a7ak"}, "reply_to_user": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1570625458, "post_id": 58304455, "comment_id": 102971234, "body": "@Kamil Cuk,  The output for : <code>uname -srm</code> is : <code>Linux 3.16.55-slitaz i686</code>. So, I believe it is using Linux Kernel 3.16."}, {"owner": {"reputation": 131, "user_id": 12100635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b44a749f3fe873f87d45c449ee2099d0?s=128&d=identicon&r=PG&f=1", "display_name": "S&#252;mer Kol&#231;ak", "link": "https://stackoverflow.com/users/12100635/s%c3%bcmer-kol%c3%a7ak"}, "reply_to_user": {"reputation": 31408, "user_id": 243245, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/aed5c13647d581ae231f019a886e05a8?s=128&d=identicon&r=PG", "display_name": "Rup", "link": "https://stackoverflow.com/users/243245/rup"}, "edited": false, "score": 0, "creation_date": 1570625605, "post_id": 58304455, "comment_id": 102971323, "body": "@Rup,  I searched the repo for &quot;<code>headers</code>&quot;, Perhaps I should test this one ? <code>linux-api-headers\t3.16.55\tKernel headers sanitized for use in userspace.</code>"}, {"owner": {"reputation": 31408, "user_id": 243245, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/aed5c13647d581ae231f019a886e05a8?s=128&d=identicon&r=PG", "display_name": "Rup", "link": "https://stackoverflow.com/users/243245/rup"}, "edited": false, "score": 0, "creation_date": 1570625626, "post_id": 58304455, "comment_id": 102971342, "body": "Yes, that&#39;s the one."}, {"owner": {"reputation": 131, "user_id": 12100635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b44a749f3fe873f87d45c449ee2099d0?s=128&d=identicon&r=PG&f=1", "display_name": "S&#252;mer Kol&#231;ak", "link": "https://stackoverflow.com/users/12100635/s%c3%bcmer-kol%c3%a7ak"}, "reply_to_user": {"reputation": 31408, "user_id": 243245, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/aed5c13647d581ae231f019a886e05a8?s=128&d=identicon&r=PG", "display_name": "Rup", "link": "https://stackoverflow.com/users/243245/rup"}, "edited": false, "score": 0, "creation_date": 1570625750, "post_id": 58304455, "comment_id": 102971423, "body": "@Rup, I installed it and the error is no longer present. Now there is a different error but it is not related to the same issue.  If you would like you can post it as an answer and I will select your answer as the <code>chosen answer</code>."}, {"owner": {"reputation": 131, "user_id": 12100635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b44a749f3fe873f87d45c449ee2099d0?s=128&d=identicon&r=PG&f=1", "display_name": "S&#252;mer Kol&#231;ak", "link": "https://stackoverflow.com/users/12100635/s%c3%bcmer-kol%c3%a7ak"}, "edited": false, "score": 0, "creation_date": 1570628347, "post_id": 58304455, "comment_id": 102973001, "body": "Comments are allowed to be edited within 5 minutes after they are posted. In the comment above I had not seen &quot;<code>linux-api-headers</code>&quot; . Perhaps the comment was edited and it was added after I posted a comment about having found an item named &quot;<code>linux-api-headers</code>&quot; in the repo."}], "answers": [{"tags": [], "owner": {"reputation": 31408, "user_id": 243245, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/aed5c13647d581ae231f019a886e05a8?s=128&d=identicon&r=PG", "display_name": "Rup", "link": "https://stackoverflow.com/users/243245/rup"}, "is_accepted": true, "score": 2, "last_activity_date": 1570626045, "creation_date": 1570626045, "answer_id": 58304745, "question_id": 58304455, "link": "https://stackoverflow.com/questions/58304455/how-to-fix-gcc-error-asm-socket-h-no-such-file-on-sli-taz-linux/58304745#58304745", "title": "How to fix GCC error : &quot;asm/socket.h: No such file&quot; on Sli-Taz Linux?", "body": "<p>You need to install the <a href=\"http://pkgs.slitaz.org/?filelist=linux-api-headers\" rel=\"nofollow noreferrer\">linux-api-headers</a> package.</p>\n\n<p>/usr/include/asm/* are APIs exposed by the kernel and so are generally taken from the kernel source and updated as you upgrade the installed kernel. In SliTaz this is the linux-api-headers package; in Red Hat-derived systems this is the kernel-headers package, or Ubuntu it's linux-headers or linux-headers-generic, etc.</p>\n"}], "owner": {"reputation": 131, "user_id": 12100635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b44a749f3fe873f87d45c449ee2099d0?s=128&d=identicon&r=PG&f=1", "display_name": "S&#252;mer Kol&#231;ak", "link": "https://stackoverflow.com/users/12100635/s%c3%bcmer-kol%c3%a7ak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 441, "favorite_count": 1, "accepted_answer_id": 58304745, "answer_count": 1, "score": 0, "last_activity_date": 1570626045, "creation_date": 1570625163, "last_edit_date": 1570625980, "question_id": 58304455, "link": "https://stackoverflow.com/questions/58304455/how-to-fix-gcc-error-asm-socket-h-no-such-file-on-sli-taz-linux", "title": "How to fix GCC error : &quot;asm/socket.h: No such file&quot; on Sli-Taz Linux?", "body": "<p>Story : I tried compiling the code below on <code>Sli-Taz</code> Linux <code>32 bit</code>, as well as on <code>64 bit</code>. In both cases I get the same <code>gcc error</code>. I searched for <code>libc</code> packages in the <code>repo</code> and could not find anything named <code>libc-dev</code>. If I can not find a solution, I may also try it with <code>Alpine Linux</code>.</p>\n\n<p>Compile error for : <code>gcc server.c</code></p>\n\n<pre><code>In file included from /usr/include/sys/socket.h:40:0,\n                 from server.c:5:\n/usr/include/bits/socket.h:381:24: fatal error: asm/socket.h: No such file or directory\ncompilation terminated.\n</code></pre>\n\n<p>Code for : <code>server.c</code></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;netdb.h&gt;\n#include &lt;arpa/inet.h&gt;\n#include &lt;err.h&gt;\n\nchar response[] = \"test\";\n\nint main()\n{\n  int one = 1, client_fd;\n  struct sockaddr_in svr_addr, cli_addr;\n  socklen_t sin_len = sizeof(cli_addr);\n\n  int sock = socket(AF_INET, SOCK_STREAM, 0);\n  if (sock &lt; 0)\n    err(1, \"can't open socket\");\n\n  setsockopt(sock, SOL_SOCKET, SO_REUSEADDR, &amp;one, sizeof(int));\n\n  int port = 90;\n  svr_addr.sin_family = AF_INET;\n  svr_addr.sin_addr.s_addr = INADDR_ANY;\n  svr_addr.sin_port = htons(port);\n\n  if (bind(sock, (struct sockaddr *) &amp;svr_addr, sizeof(svr_addr)) == -1) {\n    close(sock);\n    err(1, \"Can't bind\");\n  }\n\n  listen(sock, 5);\n  while (1) {\n    client_fd = accept(sock, (struct sockaddr *) &amp;cli_addr, &amp;sin_len);\n    printf(\"Client IP : [%s]\\n\", inet_ntoa(cli_addr.sin_addr));\n\n    if (client_fd == -1) {\n      perror(\"Can't accept\");\n      continue;\n    }\n\n    write(client_fd, response, sizeof(response) - 1); /*-1:'\\0'*/\n    close(client_fd);\n  }\n</code></pre>\n\n<p>Description of the <code>server.c</code> : It is a program that will listen to <code>port 90</code> and if a client tries to connect to <code>port 90</code>, it will respond to them with the message : <code>test</code>.</p>\n"}, {"tags": ["c++", "c", "libmongoc"], "comments": [{"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1570625145, "post_id": 58304175, "comment_id": 102971070, "body": "If you have the source, (.c and .h files) then include them in the make file just like any other source files.  <i><a href=\"https://gcc.gnu.org/onlinedocs/gcc-4.8.0/gcc/Spec-Files.html\" rel=\"nofollow noreferrer\">Read this.</a></i>, and <i><a href=\"http://www.cs.colby.edu/maxwell/courses/tutorials/maketutor/\" rel=\"nofollow noreferrer\">this</a></i>."}, {"owner": {"reputation": 3204, "user_id": 2228338, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-b3jn9hCpWYU/AAAAAAAAAAI/AAAAAAAAAAs/-1U-aoxnBOc/photo.jpg?sz=128", "display_name": "Yuki", "link": "https://stackoverflow.com/users/2228338/yuki"}, "edited": false, "score": 0, "creation_date": 1577559046, "post_id": 58304175, "comment_id": 105199530, "body": "(1) install it locally using usual cmake installation procedure; (2) configure CMAKE_MODULE_PATH to include newly installed location; (3) use <code>find_package(libmongoc-1.0 1.15 REQUIRED)</code>;"}], "owner": {"reputation": 21, "user_id": 4003636, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kmSg3.jpg?s=128&g=1", "display_name": "mohammad-nazari", "link": "https://stackoverflow.com/users/4003636/mohammad-nazari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1570624213, "creation_date": 1570624213, "question_id": 58304175, "link": "https://stackoverflow.com/questions/58304175/how-can-i-add-and-compile-mongoc-source-code-in-projects-and-using-locally-cmak", "title": "How can I add and compile mongoc source code in projects and using locally (CMakeList config)", "body": "<p>I want to add mongoc source code to My project then compile, build and use it locally without installing libmongoc on the system(Ubuntu). I want My project source code to be portable without having to install any library dependencies like mongoc in the target development system and be a cross platform project.</p>\n\n<p>How to configure the CMakeList file (or any other)?</p>\n\n<p>Thanks for your help in advance!</p>\n"}, {"tags": ["c", "variables", "while-loop"], "comments": [{"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1570623480, "post_id": 58303919, "comment_id": 102970146, "body": "You need a data structure that can hold <i>any</i> number of prices. Or does your homework mention a maximum? If not then you can <code>malloc</code> an array of prices, remember how large it is and how many elements are in use, and if it is full, <code>realloc</code> it to a larger size."}], "answers": [{"tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1570643707, "creation_date": 1570643707, "answer_id": 58309713, "question_id": 58303919, "link": "https://stackoverflow.com/questions/58303919/i-want-to-be-able-to-add-variables-to-themselves-so-they-match-the-value-i-assig/58309713#58309713", "title": "I want to be able to add variables to themselves so they match the value I assigned them", "body": "<ul>\n<li><p>The loop should execute while the <code>price</code> non-negative, and the check should be done at the end of the loop. At the beginning of the loop, the price is not yet known.</p></li>\n<li><p>The <code>price</code> is only valid when <code>scanf</code> had returned 1, so you need to check that.</p></li>\n</ul>\n\n<pre><code>#include &lt;assert.h&gt;\n#include &lt;stdio.h&gt;\n\ndouble getPriceSum() {\n    double sum = 0.0;\n    double price;\n    do {\n        printf(\"Give price (finish with &lt;0) :\\n\");\n        int num = scanf(\"%lf\", &amp;price);\n        if (num != 1)\n            price = 0.0; // set a \"safe\" value for price\n        else if (price &gt; 0.0) {\n            assert(num == 1); // asserts are like comments that the compiler understands:)\n            sum += price;\n        }\n    } while (price &gt;= 0);\n\n    assert(price &lt; 0); // otherwise the loop wouldn't terminate\n\n    return sum;\n}\n\nint main() {\n    // ...\n    double sum = getPriceSum();\n    printf(\"Sum in foreign currency: %lf\\n\", sum);\n}\n</code></pre>\n\n<p>It'd be much nicer to have the <code>price</code> variable declared inside the loop, since it's not needed outside, and then we don't need gymnastics with its initial value set so that the loop won't terminate inadvertently:</p>\n\n<pre><code>double getPriceSum() {\n    double sum = 0.0;\n    for (;;) { // repeat \"forever\" unless otherwise exited\n        double price;\n        printf(\"Give price (finish with &lt;0) :\\n\");\n        int num = scanf(\"%lf\", &amp;price);\n        if (num == 1) {\n            if (price &gt;= 0.0)\n                sum += price;\n            else \n                return sum;\n        }\n    }\n}\n</code></pre>\n\n<p>Note that <code>printf</code> with <code>\\n</code> will move the cursor to another line <em>and</em> flush the output to screen. You likely don't want the cursor move (per the example output). Instead, remove <code>\\n</code> and issue an explicit flush:</p>\n\n<pre><code>printf(\"Give price (finish wih &lt;0) : \");\nfflush(stdout);\n</code></pre>\n\n<p>It's also possible to be less awkward and accept a word instead of a number as the \"exit\" command:</p>\n\n<pre><code>double getPriceSum() {\n    double sum = 0.0;\n    char *line = NULL;\n    size_t lineSize = 0;\n    for (;;) {\n        printf(\"Give price, or DONE to finish : \");\n        fflush(stdout);\n        int result = getline(&amp;line, &amp;lineSize, stdin);\n        if (result &lt; 0)\n            break;\n        if (!line || !lineSize)\n            continue; // read again\n        if (strcmp(line, \"DONE\") == 0 || strcmp(line, \"done\") == 0)\n            break;\n        double price;\n        result = sscanf(line, \"%lf\", &amp;price);\n        if (result == 1 &amp;&amp; price &gt; 0)\n            sum += price;\n        else\n            fprintf(stderr, \"  - Invalid price. Try again.\\n\");\n    }\n    return sum;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12188221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1c51bfa113f0bd3458ee5dfa45e9d82?s=128&d=identicon&r=PG&f=1", "display_name": "Rassal", "link": "https://stackoverflow.com/users/12188221/rassal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570643707, "creation_date": 1570623288, "last_edit_date": 1592644375, "question_id": 58303919, "link": "https://stackoverflow.com/questions/58303919/i-want-to-be-able-to-add-variables-to-themselves-so-they-match-the-value-i-assig", "title": "I want to be able to add variables to themselves so they match the value I assigned them", "body": "<p>I want to be able to give as many prices as I want and when I end the loop it will write the sum of all the prices, so I later can convert the sum to SEK currency. In the assigment I should be able to add a new price as long as it is over 0.</p>\n<pre><code>while (price &lt; 0) {\n   printf(&quot;Give price (finish with &lt;0) :\\n&quot;);\n   scanf(&quot;%lf&quot;, &amp;price );\n\n   if (price &lt; 0) {\n     printf(&quot;Sum in foreign currency: %lf\\n&quot;, sum);\n   }\n}\n</code></pre>\n<p>This is how my code should work:</p>\n<pre><code>Your shopping assistant\n\n1. Set exchange rate in SEK (current rate: 1.00)\n2. Read prices in the foreign currency\n3. End\n\nGive your choice (1 - 3): 1\n\nGive exchange rate: 9.71\n\n1. Set exchange rate in SEK (current rate: 9.71)\n2. Read prices in the foreign currency\n3. End\n\nGive your choice (1 - 3): 4\n\nNot a valid choice!!\n\n1. Set exchange rate in SEK (current rate: 9.71)\n2. Read prices in the foreign currency\n3. End\n\nGive your choice (1 - 3): 2\n\nGive price (finish with &lt;0): 2.75\nGive price (finish with &lt;0): 3.50\nGive price (finish with &lt;0): -23\n\nSum in foreign currency: 6.25\nSum in SEK: 60.69\n\n1. Set exchange rate in SEK (current rate: 9.71)\n2. Read prices in the foreign currency\n3. End\n\nGive your choice (1 - 3): 3\n\nEnd of program!\n</code></pre>\n\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1570622980, "post_id": 58303649, "comment_id": 102969860, "body": "<code>if (front = rear + 1 || ...)</code>: The assignment <code>=</code> should be a comparison for equality, <code>==</code>."}], "answers": [{"tags": [], "owner": {"reputation": 34, "user_id": 12188378, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCkqcYLQT2B_diD_2g_Ni-Crtk4regiBgh6IYNtzA=k-s128", "display_name": "Mladen Stupar", "link": "https://stackoverflow.com/users/12188378/mladen-stupar"}, "is_accepted": true, "score": 0, "last_activity_date": 1570623048, "creation_date": 1570623048, "answer_id": 58303859, "question_id": 58303649, "link": "https://stackoverflow.com/questions/58303649/circular-queue-inserting-element-problem-when-i-try-to-insert-2nd-element-it-is/58303859#58303859", "title": "circular queue inserting element problem when i try to insert 2nd element it is showing queue is full", "body": "<p>In <em>insert</em> function you have\n<code>if(front=rear+1 || SIZE==rear+1)</code>. Change it to <code>if(front == rear + 1 ...</code>. So you are basically assigning <code>rear + 1</code> to <code>front</code> variable every time <code>insert</code> is called.</p>\n"}], "owner": {"reputation": 17, "user_id": 11674558, "user_type": "registered", "profile_image": "https://graph.facebook.com/2404125679834151/picture?type=large", "display_name": "Tushar Sharma", "link": "https://stackoverflow.com/users/11674558/tushar-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 23, "favorite_count": 0, "accepted_answer_id": 58303859, "answer_count": 1, "score": 0, "last_activity_date": 1570623048, "creation_date": 1570622325, "question_id": 58303649, "link": "https://stackoverflow.com/questions/58303649/circular-queue-inserting-element-problem-when-i-try-to-insert-2nd-element-it-is", "title": "circular queue inserting element problem when i try to insert 2nd element it is showing queue is full", "body": "<p>In my circular queue when i enter 1st element it perfectly entered in the circular queue but when i enter 2nd element in the queue it show queue is full while the size of array is 5 even i debug it i found  after entering 1st element it is giving queue  is full statment\n'''</p>\n\n<pre><code> #include&lt;stdio.h&gt;\n    #include&lt;stdlib.h&gt;\n    # define SIZE 5\n    int cqueue[SIZE];\n    int front = -1;\n    int rear = -1;\n    void insert(int);\n    void main()\n    {\n        int ch,item;\n        while(1)\n        {\n            printf(\"\\n select choice from given below operations of circular queue : \");\n            printf(\"\\n 1.insert element\");\n            printf(\"\\n 2. delete element\");\n            printf(\"\\n 3. display elements\");\n            printf(\"\\n 4. exit\");\n\n            printf(\"\\n enter choice : \");\n            scanf(\"%d\",&amp;ch);\n\n            switch(ch)\n            {\n                case 1 : printf(\"enter element : \");\n                         scanf(\"%d\",&amp;item);\n                         insert(item);\n                         break;\n                case 4 : exit(0);\n\n                default: printf(\"\\ninvalid choice! enter again\\n\");\n            }\n        }\n    }\n\n    void insert(int ele)\n    {\n        if(front=rear+1 || SIZE==rear+1)\n        {\n            printf(\"\\n circular queue is full \");\n        }\n        else if((rear==-1)&amp;&amp;(front==-1))\n        {\n            front=rear=0;\n            cqueue[rear]=ele;\n        }\n        else if(rear==SIZE-1)\n        {\n            rear=0;\n            cqueue[rear]=ele;\n        }\n        else\n        {\n            rear++;\n            cqueue[rear]=ele;\n        }\n    }\n</code></pre>\n\n<p>'''</p>\n"}, {"tags": ["c", "gcc"], "comments": [{"owner": {"reputation": 6534, "user_id": 1202172, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8587094fc4666bee5d5852f163e6f86b?s=128&d=identicon&r=PG", "display_name": "Danijel", "link": "https://stackoverflow.com/users/1202172/danijel"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1570622347, "post_id": 58303597, "comment_id": 102969514, "body": "No, <code>-Wall</code>doesn&#39;t do it... added this info to question, thanks."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1570622555, "post_id": 58303597, "comment_id": 102969616, "body": "I don&#39;t think there is a compiler option to save the programmer from using wild nonsense casts."}, {"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 1, "creation_date": 1570622579, "post_id": 58303597, "comment_id": 102969626, "body": "Why should you get a warning for doing an explicit cast? With the explicit cast, you tell the compiler that you <i>want</i> your type to change. There&#39;s no need to issue a warning when the user makes it clear that this is his intent. Leave the cast away and you will get a warning (<code>Wincompatible-pointer-types</code>)."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1570622669, "post_id": 58303597, "comment_id": 102969667, "body": "Part of the purpose of an explicit type conversion (aka a &quot;cast&quot;) is to force the compiler to permit a conversion that would not normally be permitted, and not issue a diagnostic.   Practically, few compilers even have an option to issue a warning in such a case, since programmers often use the cast to stop the compiler complaining.    If you want a problem to be reported, continue using your static analysis tool as well as the compiler."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 2, "creation_date": 1570622693, "post_id": 58303597, "comment_id": 102969682, "body": "Related, if not an actual dupe:  <a href=\"https://stackoverflow.com/questions/21214875/gcc-accuracy-of-strict-aliasing-warnings\" title=\"gcc accuracy of strict aliasing warnings\">stackoverflow.com/questions/21214875/&hellip;</a>"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 2, "creation_date": 1570622797, "post_id": 58303597, "comment_id": 102969739, "body": "@Blaze Can I get an explicit cast from the automated ATM machine, if I put in my personal PIN number? ;)"}, {"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1570622914, "post_id": 58303597, "comment_id": 102969812, "body": "@LightnessRacesinOrbit I&#39;m not sure, I hope there&#39;s a public PSA announcement on this topic soon!"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 0, "creation_date": 1570623002, "post_id": 58303597, "comment_id": 102969871, "body": "@Blaze I look forward to it! Ideally we&#39;ll get an estimated ETA in short order"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1570623016, "post_id": 58303597, "comment_id": 102969877, "body": "There does not seem to be an option rto enable such a warning. There is an option to warn about casting a pointer to type1 to a pointer to type2 where type2 has greater required alignment than type1 (<code>-Wcast-align</code>) but that probably doesn&#39;t apply in this case since <code>uint32_t</code> and <code>float</code> usually have identical required alignment."}], "answers": [{"comments": [{"owner": {"reputation": 6534, "user_id": 1202172, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8587094fc4666bee5d5852f163e6f86b?s=128&d=identicon&r=PG", "display_name": "Danijel", "link": "https://stackoverflow.com/users/1202172/danijel"}, "edited": false, "score": 0, "creation_date": 1570623186, "post_id": 58303756, "comment_id": 102969971, "body": "Thanks. I don&#39;t have this static analysis tool on my machine, it&#39;s a repository-wide nightly test. Not sure how to go about fixing this. <code>-Wstrict-aliasing=1</code>doesn&#39;t help."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 6534, "user_id": 1202172, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8587094fc4666bee5d5852f163e6f86b?s=128&d=identicon&r=PG", "display_name": "Danijel", "link": "https://stackoverflow.com/users/1202172/danijel"}, "edited": false, "score": 1, "creation_date": 1570623377, "post_id": 58303756, "comment_id": 102970079, "body": "I&#39;m not sure I understand the problem. Your nightly static analysis run has identified the problem. Now you can fix the problem by rewriting the code. What sort of &quot;help&quot; are you after?"}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "reply_to_user": {"reputation": 6534, "user_id": 1202172, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8587094fc4666bee5d5852f163e6f86b?s=128&d=identicon&r=PG", "display_name": "Danijel", "link": "https://stackoverflow.com/users/1202172/danijel"}, "edited": false, "score": 0, "creation_date": 1570625391, "post_id": 58303756, "comment_id": 102971193, "body": "@Danijel Note that <code>-Wstrict-aliasing</code> alone won&#39;t do anything, it requires that <code>-fstrict-aliasing</code> is enabled too. But this may break any code that uses non-standard aliasing tricks."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1570625517, "post_id": 58303756, "comment_id": 102971264, "body": "The strict aliasing options of gcc aren&#39;t very reliable and are prone to give incorrect diagnostics."}, {"owner": {"reputation": 6534, "user_id": 1202172, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8587094fc4666bee5d5852f163e6f86b?s=128&d=identicon&r=PG", "display_name": "Danijel", "link": "https://stackoverflow.com/users/1202172/danijel"}, "reply_to_user": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1570626816, "post_id": 58303756, "comment_id": 102972050, "body": "@user694733 Thanks, I&#39;ve used <code>-fstrict-aliasing</code>."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 6534, "user_id": 1202172, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8587094fc4666bee5d5852f163e6f86b?s=128&d=identicon&r=PG", "display_name": "Danijel", "link": "https://stackoverflow.com/users/1202172/danijel"}, "edited": false, "score": 1, "creation_date": 1570628372, "post_id": 58303756, "comment_id": 102973018, "body": "@Danijel Note that this doesn&#39;t just turn warnings on. You should make yourself fully aware of the ramifications of turning on this mode. In particular, I&#39;d say that <i>any</i> example of casts like you&#39;ve used in the question should now be replaced with <code>memcpy</code> or similar; there may be more subtle examples too."}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 4, "last_activity_date": 1570622692, "creation_date": 1570622692, "answer_id": 58303756, "question_id": 58303597, "link": "https://stackoverflow.com/questions/58303597/force-gcc-to-report-a-warning-when-casting-a-float-pointer-to-int-pointer/58303756#58303756", "title": "Force GCC to report a warning when casting a float pointer to int pointer?", "body": "<p>By using an explicit conversion (a \"cast\"), you have told the compiler: <em>\"I definitely want to do this\"</em>. That's what a cast means. It makes little sense for the compiler to then warn about it.</p>\n\n<p>Instead, rely on implicit conversions, and if you try to use one that is not valid, the compilation of your program will fail until you fix it.</p>\n\n<p>Now, that only helps you <em>while you're writing your program</em>. It doesn't help you statically analyse poorly-written code that already exists, for the purpose of improving the code. Well, that's okay! That's what your, er, static analyser is for, as you've already discovered. \ud83e\udd2a</p>\n\n<p>All that being said, if you have strict aliasing enabled, the compiler <em>will</em> perform a little static analysis of its own and may kick out a warning here, if there's a risk that your program won't work as you wanted. But strict aliasing is often disabled in GCC builds and, even when it's not, detecting aliasing violations is complicated and cannot be guaranteed.</p>\n"}, {"tags": [], "owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "is_accepted": false, "score": 0, "last_activity_date": 1570625032, "creation_date": 1570625032, "answer_id": 58304409, "question_id": 58303597, "link": "https://stackoverflow.com/questions/58303597/force-gcc-to-report-a-warning-when-casting-a-float-pointer-to-int-pointer/58304409#58304409", "title": "Force GCC to report a warning when casting a float pointer to int pointer?", "body": "<p>I doubt you will find the compiler option you're looking for.  (In my opinion, the compiler option you're looking for should not exist.)</p>\n\n<p>The usual question is:</p>\n\n<blockquote>\n  <p>I'm doing something weird.  I know it's okay, but the compiler keeps warning about it.  How do I disable the warning?\"</p>\n</blockquote>\n\n<p>Now, if the \"something weird\" you're doing is mixing and matching incompatible pointers in potentially unsafe ways, the way to disable the warning is often: <em>use an explicit cast</em>.</p>\n\n<p>So what you're asking, in effect, is a way to re-enable a warning which you (or someone) has already disabled by using an explicit cast, a cast which you now believe is wrong, after all.</p>\n\n<p>We're on the cusp of an infinite regress here.  If there <em>were</em> a way to warn about questionable conversions requested by explicit casts, next week we'd be getting this question:</p>\n\n<blockquote>\n  <p>I'm using a special conversion between nominally-incompatible pointers.  I know it's okay, but the compiler keeps warning about it, even though I'm using an explicit cast.  How do I disable the warning?  Do I need to use two casts?\"</p>\n</blockquote>\n\n<p>It's kind of like warning messages.  Suppose you try to delete a vital system file.  Suppose your computer pops up a warning dialog saying \"About to delete vital file. Confirm?\"  Suppose you decide you don't want to delete it, but you accidentally click the \"OK\" button, and the file goes away.  Do you find yourself wishing that the warning dialog had been followed by a <em>second</em> dialog asking, \"Are you <em>really</em> sure?\"  You might, but most people will probably agree that having to click \"OK\" twice whenever they delete a file would be an unacceptable nuisance...</p>\n"}], "owner": {"reputation": 6534, "user_id": 1202172, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8587094fc4666bee5d5852f163e6f86b?s=128&d=identicon&r=PG", "display_name": "Danijel", "link": "https://stackoverflow.com/users/1202172/danijel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1570625032, "creation_date": 1570622174, "last_edit_date": 1570622398, "question_id": 58303597, "link": "https://stackoverflow.com/questions/58303597/force-gcc-to-report-a-warning-when-casting-a-float-pointer-to-int-pointer", "title": "Force GCC to report a warning when casting a float pointer to int pointer?", "body": "<pre><code>void foo(uint32_t* p);\n\n...\nfloat32_t* x;\nfoo( (uint32_t*)x );\n</code></pre>\n\n<p>A static code analysis tool reports a <code>\u201ccasting from float* to integer*\"</code> problem. </p>\n\n<p>How do I force GCC compiler to report the same warning? </p>\n\n<p>Compiler optins are: \n<code>-pedantic -Wall -Wextra -Wconversion</code></p>\n"}, {"tags": ["c", "linux", "audio", "alsa"], "answers": [{"tags": [], "owner": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "is_accepted": true, "score": 3, "last_activity_date": 1570624843, "creation_date": 1570624843, "answer_id": 58304351, "question_id": 58303274, "link": "https://stackoverflow.com/questions/58303274/what-is-difference-between-snd-pcm-hw-params-alloca-and-snd-pcm-hw-params-mall/58304351#58304351", "title": "What is difference between snd_pcm_hw_params_alloca() and snd_pcm_hw_params_malloc()?", "body": "<p><code>snd_pcm_hw_params_alloca()</code> uses <code>alloca()</code> to allocate the structure on the stack. This means that it is automatically freed when your function returns.</p>\n\n<p><code>snd_pcm_hw_params_malloc()</code> uses <code>malloc()</code>. You are responsible to call <code>snd_pcm_hw_params_free()</code> when it is no longer needed.</p>\n"}], "owner": {"reputation": 142, "user_id": 11598587, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-UCe7kxPMrvw/AAAAAAAAAAI/AAAAAAAAAFY/TvsrqyL2zlw/photo.jpg?sz=128", "display_name": "Kamal Pancholi", "link": "https://stackoverflow.com/users/11598587/kamal-pancholi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 236, "favorite_count": 1, "accepted_answer_id": 58304351, "answer_count": 1, "score": 1, "last_activity_date": 1570624843, "creation_date": 1570621104, "question_id": 58303274, "link": "https://stackoverflow.com/questions/58303274/what-is-difference-between-snd-pcm-hw-params-alloca-and-snd-pcm-hw-params-mall", "title": "What is difference between snd_pcm_hw_params_alloca() and snd_pcm_hw_params_malloc()?", "body": "<p>I have seen some codes for capture/playback using alsa api. Some of them are using <code>snd_pcm_hw_params_malloc()</code> while some are using <code>snd_pcm_hw_params_alloca()</code>.</p>\n\n<p>What is the difference between them other than one is function and one is macro.\nIs snd_pcm_hw_params_alloca() macro replaced by snd_pcm_hw_params_malloc() ?</p>\n"}, {"tags": ["c", "linux", "linux-kernel", "linux-device-driver", "tuio"], "comments": [{"owner": {"reputation": 35543, "user_id": 149530, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b6c8b04130af49735de5be666d67c00?s=128&d=identicon&r=PG", "display_name": "Michael Foukarakis", "link": "https://stackoverflow.com/users/149530/michael-foukarakis"}, "edited": false, "score": 0, "creation_date": 1570625953, "post_id": 58302957, "comment_id": 102971542, "body": "Your question is too broad. Have you read <a href=\"https://www.kernel.org/doc/html/latest/driver-api/uio-howto.html\" rel=\"nofollow noreferrer\">kernel.org/doc/html/latest/driver-api/uio-howto.html</a> ? Can you make your question more specific?"}, {"owner": {"reputation": 51, "user_id": 6378365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/723028204024096c3626792445630b51?s=128&d=identicon&r=PG&f=1", "display_name": "Khilav", "link": "https://stackoverflow.com/users/6378365/khilav"}, "reply_to_user": {"reputation": 35543, "user_id": 149530, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b6c8b04130af49735de5be666d67c00?s=128&d=identicon&r=PG", "display_name": "Michael Foukarakis", "link": "https://stackoverflow.com/users/149530/michael-foukarakis"}, "edited": false, "score": 0, "creation_date": 1570689872, "post_id": 58302957, "comment_id": 102993829, "body": "Yes, I went through the doc but it does not help me. I want to create a &quot;/dev/uio*&quot; entry and perform a &#39;read&quot; operation on it. The &#39;read&#39; blocks until there is not rising edge interrupt on my GPIO. When an interrupt occurs on the specified GPIO pin, the read unblocks and allows me to perform relevant operation. How do I do this ?"}, {"owner": {"reputation": 1787, "user_id": 1822033, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/53b51a609d2156118fcd08e2a7caebd3?s=128&d=identicon&r=PG", "display_name": "Pascal", "link": "https://stackoverflow.com/users/1822033/pascal"}, "edited": false, "score": 0, "creation_date": 1595241776, "post_id": 58302957, "comment_id": 111396405, "body": "same situation here ... my kernel modules looks exactly like yours and the uio-howto does not help me out ... did you find a solution?"}], "owner": {"reputation": 51, "user_id": 6378365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/723028204024096c3626792445630b51?s=128&d=identicon&r=PG&f=1", "display_name": "Khilav", "link": "https://stackoverflow.com/users/6378365/khilav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 219, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1570619894, "creation_date": 1570619894, "question_id": 58302957, "link": "https://stackoverflow.com/questions/58302957/exposing-a-dev-uio-file-from-gpio-input-driver", "title": "Exposing a /dev/uio* file from GPIO input driver", "body": "<p>I have made a custom kernel module to handle rising edge triggered interrupts on a GPIO. I want to make a \"uio\" file for the same in /dev directory. What must I do? Do I need to declare some structures and fill it out ? It would be good if someone could share relevant examples.</p>\n\n<p>Below is the code snippet for the cutom GPIO driver that triggers interrupts.</p>\n\n<pre><code>#include &lt;linux/init.h&gt;\n#include &lt;linux/module.h&gt;\n#include &lt;linux/kernel.h&gt;\n#include &lt;linux/gpio.h&gt;                 // Required for the GPIO functions\n#include &lt;linux/interrupt.h&gt;            // Required for the IRQ code\n\nMODULE_LICENSE(\"GPL\");\nMODULE_AUTHOR(\"Khilav Soni\");\nMODULE_DESCRIPTION(\"A Switch test driver\");\n\nstatic unsigned int gpio_switch = 65;   ///&lt; hard coding the button gpio for this example to P9_27 (GPIO65)\nstatic unsigned int irq_number;          ///&lt; Used to share the IRQ number within this file\n\n/// Function prototype for the custom IRQ handler function -- see below for the implementation\nstatic irq_handler_t ebbgpio_irq_handler(unsigned int irq, void *dev_id, struct pt_regs *regs);\n\n/** @brief The LKM initialization function\n *  The static keyword restricts the visibility of the function to within this C file. The __init\n *  macro means that for a built-in driver (not a LKM) the function is only used at initialization\n *  time and that it can be discarded and its memory freed up after that point. In this example this\n *  function sets up the GPIOs and the IRQ\n *  @return returns 0 if successful\n */\nstatic int __init ebbgpio_init(void){\n   int result = 0;\n   printk(KERN_INFO \"GPIO_TEST: Initializing the GPIO_TEST LKM\\n\");\n   gpio_request(gpio_switch, \"sysfs\");       // Set up the gpioButton\n   gpio_direction_input(gpio_switch);        // Set the button GPIO to be an input\n   gpio_set_debounce(gpio_switch, 100);      // Debounce the button with a delay of 200ms\n   //gpio_export(gpio_switch, false);          // Causes gpio115 to appear in /sys/class/gpio\n                                // the bool argument prevents the direction from being changed\n   // Perform a quick test to see that the button is working as expected on LKM load\n   printk(KERN_INFO \"GPIO_TEST: The button state is currently: %d\\n\", gpio_get_value(gpio_switch));\n\n   // GPIO numbers and IRQ numbers are not the same! This function performs the mapping for us\n   irq_number = gpio_to_irq(gpio_switch);\n   printk(KERN_INFO \"GPIO_TEST: The button is mapped to IRQ: %d\\n\", irq_number);\n\n   // This next call requests an interrupt line\n   result = request_irq(irq_number,             // The interrupt number requested\n                        (irq_handler_t) ebbgpio_irq_handler, // The pointer to the handler function below\n                        IRQF_TRIGGER_RISING,   // Interrupt on rising edge (button press, not release)\n                        \"switch-event\",    // Used in /proc/interrupts to identify the owner\n                        NULL);                 // The *dev_id for shared interrupt lines, NULL is okay\n\n   printk(KERN_INFO \"GPIO_TEST: The interrupt request result is: %d\\n\", result);\n   return result;\n}\n\n/** @brief The LKM cleanup function\n *  Similar to the initialization function, it is static. The __exit macro notifies that if this\n *  code is used for a built-in driver (not a LKM) that this function is not required. Used to release the\n *  GPIOs and display cleanup messages.\n */\nstatic void __exit ebbgpio_exit(void){\n   free_irq(irq_number, NULL);               // Free the IRQ number, no *dev_id required in this case\n   gpio_unexport(gpio_switch);               // Unexport the Button GPIO\n   gpio_free(gpio_switch);                   // Free the Button GPIO\n}\n\n/** @brief The GPIO IRQ Handler function\n *  This function is a custom interrupt handler that is attached to the GPIO above. The same interrupt\n *  handler cannot be invoked concurrently as the interrupt line is masked out until the function is complete.\n *  This function is static as it should not be invoked directly from outside of this file.\n *  @param irq    the IRQ number that is associated with the GPIO -- useful for logging.\n *  @param dev_id the *dev_id that is provided -- can be used to identify which device caused the interrupt\n *  Not used in this example as NULL is passed.\n *  @param regs   h/w specific register values -- only really ever used for debugging.\n *  return returns IRQ_HANDLED if successful -- should return IRQ_NONE otherwise.\n */\nstatic irq_handler_t ebbgpio_irq_handler(unsigned int irq, void *dev_id, struct pt_regs *regs){\n   static unsigned int numberPresses = 0;  ///&lt; For information, store the number of button presses\n   printk(KERN_INFO \"GPIO_TEST: Interrupt! (button state is %d)\\n\", gpio_get_value(gpio_switch));\n   printk(KERN_INFO \"GPIO_TEST: The button was pressed %d times\\n\", numberPresses);\n   numberPresses++;                         // Global counter, will be outputted when the module is unloaded\n   return (irq_handler_t) IRQ_HANDLED;      // Announce that the IRQ has been handled correctly\n}\n\n/// This next calls are  mandatory -- they identify the initialization function\n/// and the cleanup function (as above).\nmodule_init(ebbgpio_init);\nmodule_exit(ebbgpio_exit);\n</code></pre>\n"}, {"tags": ["c", "xcode", "stdio"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1570620010, "post_id": 58302949, "comment_id": 102968206, "body": "This question is probably a duplicate of this one: <a href=\"https://stackoverflow.com/questions/58300191/xcode-11-c-programing-generates-this-warning-implicitly-declaring-library-functi\" title=\"xcode 11 c programing generates this warning implicitly declaring library functi\">stackoverflow.com/questions/58300191/&hellip;</a>. But your code is correct. There must be a problem with your toolset/compiler/IDE/setup."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 1, "creation_date": 1570622044, "post_id": 58302949, "comment_id": 102969354, "body": "I think there are specific issues with header files under the latest MacOS &#39;Catalina&#39;.  Apple seems to have changed/rearranged some things. There have been several similar questions over the past couple of days.  See also <a href=\"https://stackoverflow.com/questions/58278260/cant-compile-a-c-program-on-a-mac-after-upgrading-to-catalina-10-15\">this question</a>."}, {"owner": {"reputation": 113, "user_id": 11914840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/16dEX.jpg?s=128&g=1", "display_name": "0xAlon", "link": "https://stackoverflow.com/users/11914840/0xalon"}, "reply_to_user": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1570623481, "post_id": 58302949, "comment_id": 102970147, "body": "@SteveSummit So we&#39;ll have to wait until they fix it ..."}], "owner": {"reputation": 113, "user_id": 11914840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/16dEX.jpg?s=128&g=1", "display_name": "0xAlon", "link": "https://stackoverflow.com/users/11914840/0xalon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1130, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1571479367, "creation_date": 1570619866, "last_edit_date": 1570621469, "question_id": 58302949, "link": "https://stackoverflow.com/questions/58302949/semantic-issue-implicitly-declaring-library-function-printf-with-type-int", "title": "Semantic issue - Implicitly declaring library function &#39;printf&#39; with type &#39;int (const char *, ...)&#39;", "body": "<p>I can't figure out why I'm getting the warning \u26a0\ufe0f</p>\n\n<p>Using Xcode 11.1 the default Xcode compiler MacOS Catalina.</p>\n\n<blockquote>\n  <p>Implicitly declaring library function 'printf' with type 'int (const char *, ...)'</p>\n  \n  <p>Include the header  or explicitly provide a declaration for 'printf'</p>\n</blockquote>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main( int argc, const char* argv[] ){\n    printf(\"Hello World\\n\");\n}\n</code></pre>\n\n<p>The <strong>header</strong>  was included.</p>\n\n<p><a href=\"https://i.stack.imgur.com/94CDN.png\" rel=\"nofollow noreferrer\">Error Screenshot</a></p>\n\n<p>Something is wrong with the Xcode on the new MacOS Catalina? I'm missing something?</p>\n\n<p>Thanks in advance \ud83d\ude0a</p>\n"}, {"tags": ["c", "shell", "process", "fork"], "comments": [{"owner": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "edited": false, "score": 1, "creation_date": 1570619611, "post_id": 58302723, "comment_id": 102967991, "body": "Yous should replace the <code>1</code> in <code>waitpid</code> with <code>WNOHANG</code> -- it&#39;s more portable and understandable."}, {"owner": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "edited": false, "score": 1, "creation_date": 1570619853, "post_id": 58302723, "comment_id": 102968126, "body": "<code>if (pid = &#47;*...*&#47;) else if (!pid) &#47;*...*&#47; else &#47;*...*&#47;</code> has a redundant second <code>if</code> and the third branch is never taken. Please raise the warning level of your compiler to the max and clear all errors and warnings. And, please, provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 353, "user_id": 12114444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73c48534ac3fc31b1985899c6a11a50a?s=128&d=identicon&r=PG&f=1", "display_name": "SaltyPleb", "link": "https://stackoverflow.com/users/12114444/saltypleb"}, "edited": false, "score": 0, "creation_date": 1570624745, "post_id": 58302723, "comment_id": 102970818, "body": "Does your parent program get killed or just hangs, <code>crash</code> isn&#39;t very helpful"}], "owner": {"reputation": 197, "user_id": 11094853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c26974b35c81e0675ca4416101ebf045?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/11094853/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1570620572, "creation_date": 1570619032, "last_edit_date": 1570620572, "question_id": 58302723, "link": "https://stackoverflow.com/questions/58302723/why-does-emacs-cause-my-program-to-crash-c", "title": "Why does &#39;emacs &amp;&#39; cause my program to crash - C?", "body": "<p>last thing before I've finished finished my shell, can someone explain to me why when I run <code>emacs &amp;</code> it causes my shell program to crash and mis-read the inputs for some reason. Below is my code for forking a new process to be run in the background, note, that the <code>&amp;</code> in <code>emacs &amp;</code> is removed from the command and tells my shell to run the command in the background. Many thanks in advance for any help or advice given.</p>\n\n<pre><code>int execBgCmd(char **cmds, Command cmd) {\n\n  pid_t pid1, pid2;\n  int status;\n\n  if (pid1 = fork()) {\n    waitpid(pid1, &amp;status, 1);\n  } else if (!pid1) {\n    if (pid2 = fork()) {\n      exit(0);\n    } else if (!pid2) {\n      if (cmd.rstdin != NULL) {\n        int fd0 = open(cmd.rstdin, O_RDONLY);\n        dup2(fd0, STDIN_FILENO);\n        close(fd0);\n      }\n      if (cmd.rstdout != NULL) {\n        int fd1 = open(cmd.rstdout , O_CREAT | O_WRONLY | O_TRUNC, 0644) ;\n        dup2(fd1, STDOUT_FILENO);\n        close(fd1);\n      }\n      if (execvp(cmds[0], cmds) &lt; 0) { \n        printf(\"\\nCould not execute command, try again.\\n\"); \n      }\n\n    } else {\n      fprintf(stderr, \"Fork Failure\");\n    }\n  } else {\n    fprintf(stderr, \"Fork Failure\");\n  }\n  wait(NULL);\n}\n</code></pre>\n"}, {"tags": ["c", "ssl", "openssl", "rsa", "sign"], "comments": [{"owner": {"reputation": 23625, "user_id": 2868801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ec5567811049b7ce8192be0bc0246d1?s=128&d=identicon&r=PG&f=1", "display_name": "dave_thompson_085", "link": "https://stackoverflow.com/users/2868801/dave-thompson-085"}, "edited": false, "score": 0, "creation_date": 1570635589, "post_id": 58302636, "comment_id": 102977154, "body": "The only thing I can think of immediately is, does <code>sig</code> point to a sufficiently large chunk of available memory, i.e. the same size as the key&#39;s modulus?"}, {"owner": {"reputation": 33, "user_id": 9308555, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fcv2E.jpg?s=128&g=1", "display_name": "Anisyanka", "link": "https://stackoverflow.com/users/9308555/anisyanka"}, "reply_to_user": {"reputation": 23625, "user_id": 2868801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ec5567811049b7ce8192be0bc0246d1?s=128&d=identicon&r=PG&f=1", "display_name": "dave_thompson_085", "link": "https://stackoverflow.com/users/2868801/dave-thompson-085"}, "edited": false, "score": 0, "creation_date": 1570636908, "post_id": 58302636, "comment_id": 102977836, "body": "@dave_thompson_085, hmm...for <code>sig</code> buffer I allocate <code>RSA_size()</code> bytes. This function returns 256 bytes (2048 bits key). It seems to me rigth."}, {"owner": {"reputation": 33, "user_id": 9308555, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fcv2E.jpg?s=128&g=1", "display_name": "Anisyanka", "link": "https://stackoverflow.com/users/9308555/anisyanka"}, "reply_to_user": {"reputation": 23625, "user_id": 2868801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ec5567811049b7ce8192be0bc0246d1?s=128&d=identicon&r=PG&f=1", "display_name": "dave_thompson_085", "link": "https://stackoverflow.com/users/2868801/dave-thompson-085"}, "edited": false, "score": 0, "creation_date": 1570637008, "post_id": 58302636, "comment_id": 102977885, "body": "May be do I need to search mistake in EGD (Entropy Gathering Daemon) ?"}, {"owner": {"reputation": 33, "user_id": 9308555, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fcv2E.jpg?s=128&g=1", "display_name": "Anisyanka", "link": "https://stackoverflow.com/users/9308555/anisyanka"}, "reply_to_user": {"reputation": 23625, "user_id": 2868801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ec5567811049b7ce8192be0bc0246d1?s=128&d=identicon&r=PG&f=1", "display_name": "dave_thompson_085", "link": "https://stackoverflow.com/users/2868801/dave-thompson-085"}, "edited": false, "score": 0, "creation_date": 1570637348, "post_id": 58302636, "comment_id": 102978041, "body": "I have disabled it with help some defines for my target, because it uses file i/o. <code>RAND_egd()</code> don&#39;t return true data now. May be is it important?"}, {"owner": {"reputation": 33, "user_id": 9308555, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fcv2E.jpg?s=128&g=1", "display_name": "Anisyanka", "link": "https://stackoverflow.com/users/9308555/anisyanka"}, "reply_to_user": {"reputation": 23625, "user_id": 2868801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ec5567811049b7ce8192be0bc0246d1?s=128&d=identicon&r=PG&f=1", "display_name": "dave_thompson_085", "link": "https://stackoverflow.com/users/2868801/dave-thompson-085"}, "edited": false, "score": 0, "creation_date": 1570638057, "post_id": 58302636, "comment_id": 102978378, "body": "And <code>RAND_poll()</code> always returns zero in my system."}, {"owner": {"reputation": 23625, "user_id": 2868801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ec5567811049b7ce8192be0bc0246d1?s=128&d=identicon&r=PG&f=1", "display_name": "dave_thompson_085", "link": "https://stackoverflow.com/users/2868801/dave-thompson-085"}, "edited": false, "score": 0, "creation_date": 1570790846, "post_id": 58302636, "comment_id": 103034657, "body": "Blinding for private operations (including sign) does use randomness, so lack of it might cause failure -- but AFAICS <i>should</i> give a meaningful error not 0. You might try <code>RSA_blinding_off(prv_key)</code> and see if it helps. Of course there are other things for which randomness is vital, so you may need or want to work on that part anyway."}, {"owner": {"reputation": 33, "user_id": 9308555, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fcv2E.jpg?s=128&g=1", "display_name": "Anisyanka", "link": "https://stackoverflow.com/users/9308555/anisyanka"}, "reply_to_user": {"reputation": 23625, "user_id": 2868801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ec5567811049b7ce8192be0bc0246d1?s=128&d=identicon&r=PG&f=1", "display_name": "dave_thompson_085", "link": "https://stackoverflow.com/users/2868801/dave-thompson-085"}, "edited": false, "score": 0, "creation_date": 1571154387, "post_id": 58302636, "comment_id": 103142225, "body": "@dave_thompson_085. I have tried to use <code>RSA_blinding_off()</code> for <code>pub_key</code> and for <code>prv_key</code> and it is works. <code>RSA_sign</code> and <code>RSA_verify</code> works true, but  I till have trouble with zero code for <code>RSA_public_encrypt</code> and <code>RSA_private_decrypt</code> functions."}, {"owner": {"reputation": 23625, "user_id": 2868801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ec5567811049b7ce8192be0bc0246d1?s=128&d=identicon&r=PG&f=1", "display_name": "dave_thompson_085", "link": "https://stackoverflow.com/users/2868801/dave-thompson-085"}, "edited": false, "score": 0, "creation_date": 1571195408, "post_id": 58302636, "comment_id": 103155024, "body": "What padding are you specifying for public_encrypt? Anything other than &#39;NO&#39; requires randomness -- and encryption with &#39;NO&#39; padding is insecure for nearly all applications (it wasn&#39;t even in PKCS1v1, whereas &#39;type 0&#39; signatures with no padding were). If you need RSA encryption on this device, you should probably work on fixing the RAND module somehow."}, {"owner": {"reputation": 33, "user_id": 9308555, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fcv2E.jpg?s=128&g=1", "display_name": "Anisyanka", "link": "https://stackoverflow.com/users/9308555/anisyanka"}, "reply_to_user": {"reputation": 23625, "user_id": 2868801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ec5567811049b7ce8192be0bc0246d1?s=128&d=identicon&r=PG&f=1", "display_name": "dave_thompson_085", "link": "https://stackoverflow.com/users/2868801/dave-thompson-085"}, "edited": false, "score": 0, "creation_date": 1571208179, "post_id": 58302636, "comment_id": 103158468, "body": "@dave_thompson_085, Yes,  i need RSA encryption.  I used pkcs1v5 padding, but for encryption/decryption in my case I have switched it to <code>no-padding</code>. But It still doesn&#39;t work. It returns zero only. I will try to code my own random module,  thank for your advice:)"}], "answers": [{"tags": [], "owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "is_accepted": true, "score": 1, "last_activity_date": 1573889110, "creation_date": 1573889110, "answer_id": 58888516, "question_id": 58302636, "link": "https://stackoverflow.com/questions/58302636/openssl-rsa-sign-returns-zero-error-code/58888516#58888516", "title": "OpenSSL RSA_sign() returns zero error code", "body": "<blockquote>\n  <p>But, I got \"RSA signature FAILED with\n  error:00000000:lib(0):func(0):reason(0)\" this string into my error\n  output.</p>\n  \n  <p>Could anyone explain me the mistakes, please?</p>\n</blockquote>\n\n<p>I don't see a <code>main</code> function, so this is just speculation...</p>\n\n<p>Add a call to <code>SSL_library_init</code> and <code>ERR_load_crypto_strings</code> in <code>main</code>. You may also need a call to <code>OpenSSL_add_all_ciphers</code>.</p>\n\n<p>Since you are not getting a good error string, you might try printing the result of <code>ERR_get_error()</code>. Once you get the result of <code>ERR_get_error()</code>, you can run it through the <code>openssl errstr</code> command:</p>\n\n<pre><code>$ openssl errstr 0406506C\nerror:0406506C:rsa routines:RSA_EAY_PRIVATE_DECRYPT:data greater than mod len\n</code></pre>\n\n<p>Also see <a href=\"https://wiki.openssl.org/index.php/Library_Initialization\" rel=\"nofollow noreferrer\">Library Initialization</a> on the OpenSSL wiki.</p>\n"}], "owner": {"reputation": 33, "user_id": 9308555, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fcv2E.jpg?s=128&g=1", "display_name": "Anisyanka", "link": "https://stackoverflow.com/users/9308555/anisyanka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 331, "favorite_count": 0, "accepted_answer_id": 58888516, "answer_count": 1, "score": 1, "last_activity_date": 1573889110, "creation_date": 1570618719, "last_edit_date": 1570636248, "question_id": 58302636, "link": "https://stackoverflow.com/questions/58302636/openssl-rsa-sign-returns-zero-error-code", "title": "OpenSSL RSA_sign() returns zero error code", "body": "<p>I am playing with OpenSSL 1.0.2o version. I compiled from OpenSSL only static libcrypto. I used this configuration flags:</p>\n\n<pre><code>no-demos, no-bugs, no-apps, no-ssl, no-test, no-shared, no-zlib, no-zlib-dynamic, no-ssl-trace, no-unit-test, no-ec_nistp_64_gcc_128, no-libunbound, no-ssl1, no-ssl2, no-ssl3, no-asm, no-dtls, no-dtls1, no-threads, no-npn, no-weak-ssl-ciphers, no-rfc3779, no-sctp, no-ui, no-async, no-dgram, no-posix-io, no-sock, no-des, no-dso, no-srp, no-store, no-ts, no-txt_db, no-hw, no-ec, no-gmp, -DOPENSSL_NO_STDIO, -DOPENSSL_NO_FP_API, -DOPENSSL_NO_DYNAMIC_ENGINE,-UOPENSSL_FIPS.\n</code></pre>\n\n<p>I use OpenSSL into small embedded device. (without file operations, without operating system and without libc).</p>\n\n<p>I import RSA public and private keys from memory from PEM-strings and then I want to use it for sign/verify, but RSA_sign() function returns zero. May be am I do that wrong?</p>\n\n<p>Import keys:</p>\n\n<pre><code>#include &lt;openssl/pem.h&gt;\n#include &lt;openssl/rsa.h&gt;\n#include &lt;openssl/evp.h&gt;\n#include &lt;openssl/bio.h&gt;\n#include &lt;openssl/err.h&gt;\n#include &lt;openssl/bn.h&gt;\n\ntypedef RSA *(*read_bio2rsa_f)(BIO *, RSA **, pem_password_cb *, void *);\n\nstatic BIO *pub_bio;\nstatic RSA *pub_key;\n\nstatic BIO *prv_bio;\nstatic RSA *prv_key;\n\nstatic RSA *openssl_read_key_rsa(int rsa_type, BIO **bio)\n{\n    RSA *rsa;\n    char *pem_str;\n    int pem_str_len;\n    read_bio2rsa_f read_bio2rsa;\n\n    if (rsa_type == PUB_KEY_TYPE) {\n        pem_str = (char *)pem_pub_key;\n        pem_str_len = (int)sizeof(pem_pub_key);\n        read_bio2rsa = PEM_read_bio_RSA_PUBKEY;\n    } else {\n        pem_str = (char *)pem_prv_key;\n        pem_str_len = (int)sizeof(pem_prv_key);\n        read_bio2rsa = PEM_read_bio_RSAPrivateKey;\n    }\n\n    if ((*bio = BIO_new_mem_buf((const void *)pem_str,\n            pem_str_len)) == NULL) {\n        EMSG(\"BIO_new_mem_buf() FAILED read PEM key\");\n\n        return NULL;\n    }\n\n    if ((rsa = RSA_new()) == NULL) {\n        EMSG(\"RSA_new() FAILED\");\n\n        return NULL;\n    }\n\n    read_bio2rsa(*bio, &amp;rsa, NULL, NULL);\n\n    return rsa;\n}\n\nstatic int check_rsa_key_pair(RSA *pub, RSA *priv)\n{\n    if (BN_cmp(pub-&gt;n, priv-&gt;n) != 0)\n        return CRYPTO_ERR;\n\n    return CRYPTO_OK;\n}\n\n/* extrnal function for import RSA-keys */\nint openssl_rsa_init_key(void)\n{\n    ERR_load_crypto_strings();\n    OPENSSL_add_all_algorithms_noconf();\n\n    if ((prv_key = openssl_read_key_rsa(PRV_KEY_TYPE, &amp;prv_bio)) == NULL) {\n        EMSG(\"Importing the private key FAILED!\");\n\n        return CRYPTO_ERR;\n    }\n\n    if ((pub_key = openssl_read_key_rsa(PUB_KEY_TYPE, &amp;pub_bio)) == NULL) {\n        EMSG(\"Importing the public key FAILED!\");\n\n        return CRYPTO_ERR;\n    }\n\n    if (!check_rsa_key_pair(pub_key, prv_key)) {\n        EMSG(\"Key pair don't match\");\n\n        return CRYPTO_ERR;\n    }\n\n    EMSG(\"Import KEYs is successful!\");\n\n    return CRYPTO_OK;\n}\n</code></pre>\n\n<p>All code above is executed successfully. After this, in theory, I can free use the rsa keys into any OpenSSL functions that expected RSA-type.</p>\n\n<p>I tried to do signature like this:</p>\n\n<pre><code>int openssl_rsa_sign_hash(uint8_t *hash, unsigned int hash_len,\n        uint8_t *sig, int *sig_len)\n{\n    if (!RSA_sign(NID_sha256, (const unsigned char *)hash, hash_len,\n            (unsigned char *)sig, (unsigned int *)sig_len,\n            prv_key)) {\n        EMSG(\"RSA signature FAILED with %s\",\n            ERR_error_string(ERR_get_error(), NULL));\n\n        return CRYPTO_ERR;\n    }\n\n    EMSG(\"RSA signature success!\");\n\n    return CRYPTO_OK;\n}\n</code></pre>\n\n<p>But, I got \"RSA signature FAILED with error:00000000:lib(0):func(0):reason(0)\" this string into my error output. </p>\n\n<p>Could anyone explain me the mistakes, please?</p>\n"}, {"tags": ["c", "linux", "sockets", "ncurses"], "comments": [{"owner": {"reputation": 353, "user_id": 12114444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73c48534ac3fc31b1985899c6a11a50a?s=128&d=identicon&r=PG&f=1", "display_name": "SaltyPleb", "link": "https://stackoverflow.com/users/12114444/saltypleb"}, "edited": false, "score": 0, "creation_date": 1570619872, "post_id": 58302532, "comment_id": 102968137, "body": "This is not a problem with sockets, but with your strings that is not null terminated"}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 2, "creation_date": 1570628178, "post_id": 58302532, "comment_id": 102972908, "body": "This code contains the same mistake everybody makes when using TCP for the first time \u2014 it assumes that recv() will write a certain number of bytes into the local array, and doesn\u2019t check recv\u2019s return value to see how many bytes it <i>actually</i> wrote.  Reality is that recv() may write any number of bytes between 1 and (the value you specified in your size argument), and its up to you to do the right thing regardless of how many bytes you received on any given call."}, {"owner": {"reputation": 11, "user_id": 11824384, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NBKebFARD5M/AAAAAAAAAAI/AAAAAAAAASs/k0R6DmmCQ_Y/photo.jpg?sz=128", "display_name": "Andrew Wilbik", "link": "https://stackoverflow.com/users/11824384/andrew-wilbik"}, "edited": false, "score": 1, "creation_date": 1570642970, "post_id": 58302532, "comment_id": 102980586, "body": "I&#39;ve tested this application on another machine and it worked normally. Anyway,  thanks for your answers. Importance of checking recv() return value is something I wasn&#39;t aware of before."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1570643061, "post_id": 58302532, "comment_id": 102980622, "body": "@AndrewWilbik just because the code &quot;works&quot; on one machine does not mean the code is <i>correct</i>."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1570649409, "post_id": 58302532, "comment_id": 102983439, "body": "Design/write your code so that it will work correctly if every call to read/recv returns an negative error, zero, (stream closed),  or one, (ie one byte only loaded into the buffer).  Assuming anything else is wrong, and it WILL bite you eventually:("}], "owner": {"reputation": 11, "user_id": 11824384, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NBKebFARD5M/AAAAAAAAAAI/AAAAAAAAASs/k0R6DmmCQ_Y/photo.jpg?sz=128", "display_name": "Andrew Wilbik", "link": "https://stackoverflow.com/users/11824384/andrew-wilbik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1570643021, "creation_date": 1570618375, "last_edit_date": 1570643021, "question_id": 58302532, "link": "https://stackoverflow.com/questions/58302532/problems-while-sending-receiving-data-via-sockets", "title": "Problems while sending/receiving data via sockets", "body": "<p>I'm working on a simple chat program with ncurses UI in C, and have encountered this strange issue.  </p>\n\n<p><strong>It goes as follows:</strong>  </p>\n\n<ol>\n<li><p>Server waits for clients to connect.  </p></li>\n<li><p>When a client is connected, server prompts for username.  </p></li>\n<li><p>After receiving the username, server starts listening for messages from client.  </p></li>\n<li><p>Each time server receives a message, it concatenates it with the username, and broadcasts it to all the clients, so the message clients are receiving should look like this: </p></li>\n</ol>\n\n<pre><code>username: text \n</code></pre>\n\n<p>Here is where something goes wrong.</p>\n\n<p><strong>Client output:</strong>  </p>\n\n<pre><code>test^U^D: hello waddup\n</code></pre>\n\n<p>So, basically, first six indexes of received array are always filled with these escape characters, which are printed on the client side, if username is shorter than 6 letters.  </p>\n\n<p>Like this:  </p>\n\n<pre><code>USERNAME: a //user input                             \nYOU: test message                                    a^C^\\^?^U^D: test message\n</code></pre>\n\n<p>While investigating this problem, I've added debug messages on server side.  </p>\n\n<p><strong>Server output:</strong></p>\n\n<pre><code>USERNAME RECEIVED:\n: message\n//tested one-letter username - q\nUSERNAME RECEIVED: q\nq: asd\n//two-letter - qw\nUSERNAME RECEIVED: as\nas: sdf\n//three-letter - asd. Still doesn't print the last letter, eventhough on client side it is printed, probably some stupid mistake I've made and didn't notice yet\nUSERNAME RECEIVED: test\ntest: hello\n//Finally prints full u-name. No escape characters like on client side.\n//If u-name &gt;= 4 let. it is displayed normally on server side. If uname &gt;= 6 -- on client side\n</code></pre>\n\n<p>My guess is that problem appears on the socket layer, but I'm not \nknowledgeable enough in socket programming to be confident in my suggestions.</p>\n\n<p>Alternatively, the problem may be linked to ncurses UI, since it is visible on client side (which uses ncurses), and isn't visible on server side (which prints debug messages to sdout).</p>\n\n<p>I know it probably is really messy and inefficient, but this project is my first relatively serious C project, and I surely will refactor and optimize this code later.  </p>\n\n<p>Code of problematic function on server side: </p>\n\n<pre class=\"lang-c prettyprint-override\"><code>void transmitt(int socket, int index){\n        printf(\"CONNECTION TO THREAD %x\\n\", pthread_self());\n        char tmp[MAX];\n        char bye[MAX];\n        char uname[MAX_UNAME];\n        char buffer[MAX+MAX_UNAME];\n        sprintf(bye, \"%d\", BYE_MESSAGE);\n        recv_uname(socket, uname);\n        while(1){\n                bzero(tmp, sizeof(tmp));\n                bzero(buffer, sizeof(buffer));\n                recv(socket, tmp, sizeof(tmp), 0);\n                if(strncmp(bye, tmp, MAX) == 0){\n                        printf(\"THREAD: %x DISCONNECTED\\n\", pthread_self());\n                        snprintf(buffer, sizeof(buffer), \"SERVER MESSAGE: %s HAS DISCONNECTED\", uname);\n                        for(int i =0;i&lt;MAX_CLIENTS;i++){\n                                if(clients[i] != NULL){\n                                        send(clients[i], buffer, sizeof(buffer), 0);\n                                }\n                        }\n                        clients[index] = NULL;\n                        return;\n                }\n                snprintf(buffer, sizeof(buffer), \"%s: %s\", uname, tmp);\n                for(int i =0;i&lt;MAX_CLIENTS;i++){\n                        if(clients[i] != NULL){\n                                send(clients[i], buffer, sizeof(buffer), 0);\n                        }\n                }\n                printf(\"%s\\n\", buffer);\n        }\n}\n\nvoid recv_uname(int socket, char* uname){\n        char prompt[MAX_UNAME];\n        snprintf(prompt, sizeof(prompt), \"USERNAME: \");\n        send(socket, prompt, sizeof(prompt), 0);\n        recv(socket, uname, MAX_UNAME, 0);\n        printf(\"USERNAME RECEIVED: %s\\n\", uname);\n}\n</code></pre>\n\n<p>Client side:  </p>\n\n<pre class=\"lang-c prettyprint-override\"><code>void chat_loop(int socket){\n        char buff[MAX], sbuff[MAX+MAX_UNAME];\n        char tmp;\n        int n, y=0, x=0, maxcol, maxrow, recy, recx;\n        getmaxyx(stdscr, maxrow, maxcol);\n        recy = 0;\n        recx = maxcol/2;\n        timeout(1);\n        bzero(buff, sizeof(buff));\n        printw(\"YOU: \");\n        n=0;\n        while(1){\n                tmp = getch();\n                getyx(stdscr, y, x);\n                if(tmp == '`'){\n                        sprintf(buff, \"%d\", BYE_MESSAGE);\n                        send(socket, buff, sizeof(buff), 0);\n                        return;\n                }\n                else if(tmp == '\\n'){\n                        send(socket, buff, sizeof(buff), 0);\n                        bzero(buff, sizeof(buff));\n        //              printw(\"YOU: \");\n                        move(++y, 0);\n                        n=0;\n                }\n                else if(tmp == ALT_BACKSPACE){\n                        if(x &gt; 0){\n                                mvdelch(y, x-1);\n                                buff[--n] = NULL;\n                        }\n                }\n                else if(tmp != ERR){\n                        printw(\"%c\", tmp);\n                        buff[n++] = tmp;\n                }\n\n                bzero(sbuff, sizeof(sbuff));\n                recv(socket, sbuff, sizeof(sbuff), MSG_DONTWAIT);\n                if(check_buff(sbuff, sizeof(sbuff)) == 0){\n                        getyx(stdscr, y, x);\n                        move(recy++, recx);\n                        printw(\"%s\", sbuff);\n                        move(y, x);\n                }\n                refresh();\n        }\n}\n\nvoid send_uname(int socket){\n        char buff[MAX], unbuff[MAX_UNAME];\n        char tmp;\n        int n=0, y=0, x=0, init_x;\n        bzero(buff, sizeof(buff));\n        recv(socket, buff, sizeof(buff), 0);\n        printw(\"%s\", buff);\n        getyx(stdscr, y, init_x);\n        while((tmp = getch())!='\\n'){\n                getyx(stdscr, y, x);\n                if(tmp == ALT_BACKSPACE){\n                        if(x &gt; init_x){\n                                mvdelch(y, x-1);\n                                unbuff[--n] = NULL;\n                        }\n                }\n                else if(tmp != ERR){\n                        if(n &lt; MAX_UNAME){\n                                printw(\"%c\", tmp);\n                                unbuff[n++] = tmp;\n                        }\n                }\n                refresh();\n        }\n        printw(\"\\n\");\n        send(socket, unbuff, sizeof(unbuff), 0);\n}\n\nint check_buff(char* buffer, size_t n){\n        for(int i=0;i&lt;n;i++){\n                if(buffer[i]!=NULL)\n                        return 0;\n        }\n        return -1;\n}\n</code></pre>\n\n<p>Constants and includes:  </p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include &lt;netdb.h&gt;\n#include&lt;sys/socket.h&gt;\n#include&lt;netinet/in.h&gt;\n#include &lt;arpa/inet.h&gt;\n#include&lt;unistd.h&gt;\n#include&lt;string.h&gt;\n#include&lt;pthread.h&gt;\n#include&lt;ncurses.h&gt;\n\n//common\n#define ALT_BACKSPACE 127\n#define MAX 128 //common buffer size\n#define MAX_UNAME 24\n#define BYE_MESSAGE 10101010\n\n//server-specific\n#define MAX_THREADS 4\n#define MAX_CLIENTS 4\n\n</code></pre>\n\n<p><a href=\"https://github.com/Jokey82/chad-chat\" rel=\"nofollow noreferrer\">GitHub link with full code</a></p>\n\n<p>That is all I've got.</p>\n"}, {"tags": ["c", "linux", "centos"], "answers": [{"tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1570619420, "last_edit_date": 1570619420, "creation_date": 1570618409, "answer_id": 58302548, "question_id": 58302298, "link": "https://stackoverflow.com/questions/58302298/how-to-set-linux-application-as-global-avaliable-in-os/58302548#58302548", "title": "How to set linux application as &quot;global&quot; avaliable in OS?", "body": "<p>System directories such as <code>/usr</code> and <code>/lib</code> are normally managed by the system package manager, so that modifying the contents of these directories manually may interfere with the system package manager operations. This is why it is not a good practice. People normally install 3rd-party software into <a href=\"https://refspecs.linuxfoundation.org/FHS_3.0/fhs/ch04s09.html\" rel=\"nofollow noreferrer\"><code>/usr/local</code></a> or <a href=\"https://refspecs.linuxfoundation.org/FHS_3.0/fhs/ch03s13.html\" rel=\"nofollow noreferrer\"><code>/opt</code></a>, see <a href=\"https://refspecs.linuxfoundation.org/FHS_3.0/fhs/index.html\" rel=\"nofollow noreferrer\">Filesystem Hierarchy Standard</a> for more details.</p>\n\n<p>To make the application \"global\" add the path to the directory with its executable into <code>PATH</code> environment variable. You can do that by adding the following line into user's <code>~/.bash_profile</code> or <code>~/.bashrc</code> (or whatever startup file your shell uses):</p>\n\n<pre><code>export PATH=\"&lt;dir&gt;\":\"$PATH\"\n</code></pre>\n\n<p><code>~/.bash_profile</code> is evaluated on login, <code>~/.bashrc</code> on opening a new terminal (see <a href=\"http://www.linuxfromscratch.org/blfs/view/6.3/postlfs/profile.html\" rel=\"nofollow noreferrer\">The Bash Shell Startup Files</a> for more details). Alternatively, you can manually do <code>source ~/.bash_profile</code> or <code>source ~/.bashrc</code> to make that setting come into effect into your current shell.</p>\n\n<p>To avoid having to set <code>LD_LIBRARY_PATH=&lt;dir&gt;</code> link your application with <code>-L&lt;dir&gt; -Wl,-rpath=&lt;dir&gt;</code>. Setting <code>LD_LIBRARY_PATH</code> may break other applications, see <a href=\"https://gms.tf/ld_library_path-considered-harmful.html\" rel=\"nofollow noreferrer\">LD_LIBRARY_PATH considered harmful</a>.</p>\n"}], "owner": {"reputation": 11, "user_id": 11360546, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-m8nez0qkLv0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfghbUjOGpYiHxk9U0sCPmdkiJdFg/mo/photo.jpg?sz=128", "display_name": "LazyAdmin", "link": "https://stackoverflow.com/users/11360546/lazyadmin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1570619420, "creation_date": 1570617587, "question_id": 58302298, "link": "https://stackoverflow.com/questions/58302298/how-to-set-linux-application-as-global-avaliable-in-os", "title": "How to set linux application as &quot;global&quot; avaliable in OS?", "body": "<p>I have C application running under CentOS</p>\n\n<p>I need set is as global. I write a function to \"set global\". It is working but i need another solution for it.</p>\n\n<p>Compiler is <code>gcc</code></p>\n\n<pre><code>void set_global(void) {\n    /*Function to set program_name as global application.*/\n    puts(ANSI_COLOR_RED\"WARINING! ROOT PERMISSION OR ADMINISTRATOR NEED!\"ANSI_COLOR_RESET);\n    puts(\"Set \"ANSI_COLOR_GREEN\"program_name \"ANSI_COLOR_RESET\" as global application.\");\n    system(\"sudo rm -rf /usr/bin/program_name \");\n    system(\"sudo cp -r program_name /usr/bin\");\n    system(\"export PATH=\\\"/usr/bin:$PATH\\\"\");\n    system(\"sudo chmod 755 /usr/bin/program_name \");\n    system(\"sudo rm -rf /usr/bin/geo.txt\");\n    system(\"sudo rm -rf /usr/bin/points.txt\");\n    system(\"sudo cp -r geo.txt /usr/bin\");\n    system(\"sudo cp -r points.txt /usr/bin\");\n    system(\"sudo chmod 755 /usr/bin/geo.txt\");\n    system(\"sudo chmod 755 /usr/bin/points.txt\");\n}\n</code></pre>\n\n<p>Before running application I must paste:\n<code>export LD_LIBRARY_PATH=/usr/local/lib:$LD_LIBRARY_PATH</code> in terminal.</p>\n\n<p>It works, but I think I'm doing it wrong.\nCopy application to <code>/usr/bin</code> it is good solution?</p>\n"}, {"tags": ["c", "opencl", "opencl-c"], "comments": [{"owner": {"reputation": 63, "user_id": 12187477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a7d510d1d5c70e7d3fc7fb0e4cf5fb4?s=128&d=identicon&r=PG&f=1", "display_name": "foodius", "link": "https://stackoverflow.com/users/12187477/foodius"}, "edited": false, "score": 0, "creation_date": 1570623246, "post_id": 58302009, "comment_id": 102970007, "body": "So I actually found the solution shortly after posting this. It was too long for a comment though, so I updated the original post."}, {"owner": {"reputation": 14968, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "edited": false, "score": 0, "creation_date": 1570623411, "post_id": 58302009, "comment_id": 102970095, "body": "Answers should go into <i>Your Answer</i> field, not into the <i>Question</i>."}, {"owner": {"reputation": 63, "user_id": 12187477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a7d510d1d5c70e7d3fc7fb0e4cf5fb4?s=128&d=identicon&r=PG&f=1", "display_name": "foodius", "link": "https://stackoverflow.com/users/12187477/foodius"}, "reply_to_user": {"reputation": 14968, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "edited": false, "score": 0, "creation_date": 1570623598, "post_id": 58302009, "comment_id": 102970207, "body": "Cheers for the heads up, I oversaw the answer field and was already wondering why I couldn&#180;t mark the question as resolved. I didn&#180;t think answers and comments were different so thanks for clarifying."}], "answers": [{"comments": [{"owner": {"reputation": 953, "user_id": 5767725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3ddaa139d48d3453eec52417ef76500?s=128&d=identicon&r=PG&f=1", "display_name": "mogu", "link": "https://stackoverflow.com/users/5767725/mogu"}, "edited": false, "score": 0, "creation_date": 1570790570, "post_id": 58303993, "comment_id": 103034525, "body": "My wild guess is, that it is allowed and does work; the problem isn&#39;t the OpenCL language, the problem is that your OpenCL <i>implementation</i> is buggy. Have you tried with multiple implementations ?"}, {"owner": {"reputation": 953, "user_id": 5767725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3ddaa139d48d3453eec52417ef76500?s=128&d=identicon&r=PG&f=1", "display_name": "mogu", "link": "https://stackoverflow.com/users/5767725/mogu"}, "edited": false, "score": 1, "creation_date": 1570790761, "post_id": 58303993, "comment_id": 103034618, "body": "BTW you can get rid of the <code>if(edgeIndex == -1)</code> in CalculateEdgePos by prepending (-1,-1,-1) to the EdgePositions array, and changing last line to <code>return EdgePositions[edgeIndex+1]</code> - it&#39;s always a good idea to minimize code divergence in GPU code."}, {"owner": {"reputation": 63, "user_id": 12187477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a7d510d1d5c70e7d3fc7fb0e4cf5fb4?s=128&d=identicon&r=PG&f=1", "display_name": "foodius", "link": "https://stackoverflow.com/users/12187477/foodius"}, "reply_to_user": {"reputation": 953, "user_id": 5767725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3ddaa139d48d3453eec52417ef76500?s=128&d=identicon&r=PG&f=1", "display_name": "mogu", "link": "https://stackoverflow.com/users/5767725/mogu"}, "edited": false, "score": 0, "creation_date": 1571167641, "post_id": 58303993, "comment_id": 103147987, "body": "@mogu Hey, I tried multiple implementations but it never quite worked. I haven&#180;t really went back into it though after I got it to work just because it was such a simple fix. But thanks the for the heads up, I will see if I get it to work next time I code something in Open CL.  Also thanks a lot for the tip regarding the &quot;if&quot; statement. That&#180;s a cool idea and I will change it right now. :)"}], "tags": [], "owner": {"reputation": 63, "user_id": 12187477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a7d510d1d5c70e7d3fc7fb0e4cf5fb4?s=128&d=identicon&r=PG&f=1", "display_name": "foodius", "link": "https://stackoverflow.com/users/12187477/foodius"}, "is_accepted": true, "score": 1, "last_activity_date": 1570623530, "creation_date": 1570623530, "answer_id": 58303993, "question_id": 58302009, "link": "https://stackoverflow.com/questions/58302009/opencl-kernel-returns-strangely-huge-numbers/58303993#58303993", "title": "OpenCl kernel returns strangely huge numbers", "body": "<p>Of course, right after I post this problem I\u00b4ve been sitting on for so long, I find the solution...</p>\n\n<p>So if anyone has a similar problem:</p>\n\n<p>It seems like OpenCL really doesn\u00b4t like it if you declare array elements right in the declaration of the array itself.\nSo instead of writing:</p>\n\n<pre><code> float3 EdgePositions[12] = {(float3)(0, 0.5, 0), (float3)(0.5, 1, 0), (float3)(1, 0.5, 0), (float3)(0.5, 0, 0), (float3)(0, 0.5, 1), (float3)(0.5, 1, 1), (float3)(1, 0.5, 1), (float3)(0.5, 0, 1), (float3)(0, 0, 0.5), (float3)(0, 1, 0.5), (float3)(1, 1, 0.5), (float3)(1, 0, 0.5)};\n</code></pre>\n\n<p>I now wrote:</p>\n\n<pre><code>float3 pos0 = (float3)(0.f, 0.5f, 0.f);\n    float3 pos1 = (float3)(0.5f, 1.f, 0.f);\n    float3 pos2 = (float3)(1.f, 0.5f, 0.f);\n    float3 pos3 = (float3)(0.5f, 0.f, 0.f);\n    float3 pos4 = (float3)(0.f, 0.5f, 1.f);\n    float3 pos5 = (float3)(0.5f, 1.f, 1.f);\n    float3 pos6 = (float3)(1.f, 0.5f, 1.f);\n    float3 pos7 = (float3)(0.5f, 0.f, 1.f);\n    float3 pos8 = (float3)(0.f, 0.f, 0.5f);\n    float3 pos9 = (float3)(0.f, 1.f, 0.5f);\n    float3 pos10 = (float3)(1.f, 1.f, 0.5f);\n    float3 pos11 = (float3)(1.f, 0.f, 0.5f);\n\n    float3 EdgePositions[12] = {pos0, pos1, pos2, pos3, pos4, pos5, pos6, pos7, pos8, pos9, pos10, pos11};\n</code></pre>\n\n<p>and it works like a charm now.</p>\n\n<p>I still don\u00b4t really get why this isn\u00b4t allowed or returns false values, so if anyone knows and likes to elaborate, I would very much apprecitate it.</p>\n"}], "owner": {"reputation": 63, "user_id": 12187477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a7d510d1d5c70e7d3fc7fb0e4cf5fb4?s=128&d=identicon&r=PG&f=1", "display_name": "foodius", "link": "https://stackoverflow.com/users/12187477/foodius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 58303993, "answer_count": 1, "score": 2, "last_activity_date": 1570623530, "creation_date": 1570616510, "last_edit_date": 1570623518, "question_id": 58302009, "link": "https://stackoverflow.com/questions/58302009/opencl-kernel-returns-strangely-huge-numbers", "title": "OpenCl kernel returns strangely huge numbers", "body": "<p>I have been trying to move my Marching Cubes algorithm from the CPU to the GPU with an OpenCL kernel for a while now.</p>\n\n<p>The problem I\u00b4m getting is that a function in my kernel returns strange values, so I wrote a test case where I specify the possible return values in an array of 12 float3s with the float3 components being 0, 0.5 and 1 (see code below)</p>\n\n<p>For some reason I get weirdly large numbers though, e.g. an edgeIndex of \"11\" returns the float3: (-145085952., 6.600e-43#DEN, 0) while it should be (1, 0, 0.5). The y coordinate basically is 0 though as far as I\u00b4m aware so that\u00b4s not the problem, but the x coordinate is what\u00b4s giving me headaches. </p>\n\n<p>At first I thought OpenCL might have a problem with converting the given values to float3s so I specified them with \".f\" (e.g. (float3)(0.f, 0.5f, 0.f)). This only resulted in even more strange and different results which makes me think that I have to make a mistake somewhere.\nI\u00b4m fairly new to OpenCL (this is my first real project using it) and I haven\u00b4t been programming in general that long either so I hope I\u00b4m not making some newbie mistake here but I tried to tackle this and related problems for days now and I can\u00b4t find a solution.</p>\n\n<p>I narrowed down the problem as far as I could and tested whether the code is doing what it should for each step that it takes. Up to the function call of \"CalculateEdgePos\" everything seems to be going fine and I get the expected results. I stripped the function of all the unnecessary code (therefore you can ignore the \"values\" parameter as it\u00b4s not being used right now) but now I\u00b4m at my wits end. </p>\n\n<p>the function returning the strange results:</p>\n\n<pre><code>float3 CalculateEdgePos(int edgeIndex, __global int* values) \n{ \n    if(edgeIndex == -1) \n    { \n        return (float3)(-1,-1,-1); \n    } \n\n        float3 EdgePositions[12] = {(float3)(0, 0.5, 0), (float3)(0.5, 1, 0), (float3)(1, 0.5, 0), (float3)(0.5, 0, 0), (float3)(0, 0.5, 1), (float3)(0.5, 1, 1), (float3)(1, 0.5, 1), (float3)(0.5, 0, 1), (float3)(0, 0, 0.5), (float3)(0, 1, 0.5), (float3)(1, 1, 0.5), (float3)(1, 0, 0.5)};\n\n        return EdgePositions[edgeIndex];\n} \n\n\nand the part of the kernel with the function call and the result getting send back to the CPU \n(edgeIndex is calculated fine beforehand):\n\n__kernel void MarchCubes(__global float* outVertices, __global int* values, __global int* edges) \n{ \n.\n.\n.\n    float3 vertexPos = CalculateEdgePos(edgeIndex, values); \n    float coords[3] = {vertexPos.x, vertexPos.y, vertexPos.z}; \n\n    outVertices[get_global_id(0)] = coords[coordIndex]; \n}\n\n</code></pre>\n\n<p>If anyone of you has any tips or help to offer, I\u00b4d greatly appreciate it.\nIf you need any more code snippets let me know but I think this should be sufficient as it\u00b4s only the specified function that acts weirdly.</p>\n\n<p>Kind regards,\nfoodius</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "edited": false, "score": 2, "creation_date": 1570615357, "post_id": 58301462, "comment_id": 102965848, "body": "Please show the input data <b>as text</b>  formatted as a code block. Please add enough code and remove unnecessary parts to allow compiling and running your program. (Add a <code>main</code> function or make a <code>main</code> from <code>passFile</code>, remove all calls to uninteresting functions like <code>waitExit</code>, <code>appendRow</code> etc.)"}, {"owner": {"reputation": 11, "user_id": 12182029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/203aeb80ab02417f37293fe258262a03?s=128&d=identicon&r=PG&f=1", "display_name": "wak.igo", "link": "https://stackoverflow.com/users/12182029/wak-igo"}, "reply_to_user": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "edited": false, "score": 0, "creation_date": 1570615416, "post_id": 58301462, "comment_id": 102965876, "body": "give me a second"}, {"owner": {"reputation": 11, "user_id": 12182029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/203aeb80ab02417f37293fe258262a03?s=128&d=identicon&r=PG&f=1", "display_name": "wak.igo", "link": "https://stackoverflow.com/users/12182029/wak-igo"}, "edited": false, "score": 0, "creation_date": 1570616515, "post_id": 58301462, "comment_id": 102966439, "body": "Okay getting better progress with this. I&#39;ll update the post just now"}, {"owner": {"reputation": 11, "user_id": 12182029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/203aeb80ab02417f37293fe258262a03?s=128&d=identicon&r=PG&f=1", "display_name": "wak.igo", "link": "https://stackoverflow.com/users/12182029/wak-igo"}, "reply_to_user": {"reputation": 6975, "user_id": 3121023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52448806175b9aa66c86d40cf0829f1?s=128&d=identicon&r=PG&f=1", "display_name": "user3121023", "link": "https://stackoverflow.com/users/3121023/user3121023"}, "edited": false, "score": 0, "creation_date": 1570617362, "post_id": 58301462, "comment_id": 102966882, "body": "@user3121023 i&#39;ve posted changes and new output"}, {"owner": {"reputation": 35543, "user_id": 149530, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b6c8b04130af49735de5be666d67c00?s=128&d=identicon&r=PG", "display_name": "Michael Foukarakis", "link": "https://stackoverflow.com/users/149530/michael-foukarakis"}, "edited": false, "score": 2, "creation_date": 1570618280, "post_id": 58301462, "comment_id": 102967313, "body": "Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal, reproducible example</a>. There is no way to debug your code without making assumptions as to what parts which aren&#39;t included here do - which will most likely be false."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1570618945, "post_id": 58301462, "comment_id": 102967670, "body": "For a general treatment of the topic of splitting a line into &quot;words&quot;, see <a href=\"https://www.eskimo.com/~scs/cclass/notes/sx10h.html\" rel=\"nofollow noreferrer\">these class notes</a>."}], "answers": [{"tags": [], "owner": {"reputation": 6975, "user_id": 3121023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52448806175b9aa66c86d40cf0829f1?s=128&d=identicon&r=PG&f=1", "display_name": "user3121023", "link": "https://stackoverflow.com/users/3121023/user3121023"}, "is_accepted": true, "score": 0, "last_activity_date": 1570924904, "last_edit_date": 1570924904, "creation_date": 1570618531, "answer_id": 58302581, "question_id": 58301462, "link": "https://stackoverflow.com/questions/58301462/how-do-i-split-a-string-into-words/58302581#58302581", "title": "How do I split a string into words?", "body": "<p>Consider reading a single line.<br>\nParse that line with <code>sscanf</code>. The return from <code>sscanf</code> will be the number of items scanned. If three items are scanned, process them.<br>\n<code>fgets</code> will return NULL at the end of the file and terminate the loop.</p>\n\n<p>Here is code that does this:</p>\n\n<pre><code>void passFile(char *arr){\n    char line[LSIZ];\n    char fname[20];\n    char str[18];\n    int arrivalTime;\n    int serviceTime;\n    int i = 0;\n    FILE *fptr = NULL;\n    if ( NULL != ( fptr = fopen(arr, \"r\"))) {\n        while ( fgets ( line, LSIZ, fptr)){\n            if ( 3 == sscanf ( line, \"%17s %d %d\", str1, &amp;arrivalTime, &amp;serviceTime)) {\n                appendRow ( str1);\n                appendBar ( i + 1, serviceTime, \"black\", \" \", 0);\n                i++;\n            }\n        }\n        sleep(100);\n        waitExit();\n        fclose(fptr);\n    }\n    printf(\"\\n\");\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 12182029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/203aeb80ab02417f37293fe258262a03?s=128&d=identicon&r=PG&f=1", "display_name": "wak.igo", "link": "https://stackoverflow.com/users/12182029/wak-igo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 58302581, "answer_count": 1, "score": -2, "last_activity_date": 1570924904, "creation_date": 1570614619, "last_edit_date": 1570924845, "question_id": 58301462, "link": "https://stackoverflow.com/questions/58301462/how-do-i-split-a-string-into-words", "title": "How do I split a string into words?", "body": "<p>I have a file that has 3 columns and data in it. I have no column headings, just the data.<br>\nMy file is something like this:</p>\n\n<p><img src=\"https://i.stack.imgur.com/A5p1d.png\" alt=\"Data\"></p>\n\n<p>Now I want to read the data in the file, and draw a bar chart with it. But I'm having trouble reading from the data. My logic was store the file contents in an array, split the array with <code>\\n</code> so that you store each line into another array. Then split the new array with <code></code> to signal a different column.</p>\n\n<p>This is my function which takes the data file as a parameter: </p>\n\n<pre><code>#include \"visualiser.h\"\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include&lt;string.h&gt;\n#include  &lt;unistd.h&gt;\n#define LSIZ 128\n#define RSIZ 10\nvoid passFile(char *arr);\n\nint main(int argc, char **argv){\n    initInterface(\"silver\",\"blue\");\n    if(argc &lt;2){\n        passFile(\"data-file.txt\");\n    }\n    if(argc == 2){\n        passFile(argv[1]);\n    } else {\n        printf(\"Invalid arguments\");\n        exit(0);\n    }\n    return 0;\n}\n\nvoid passFile(char *arr){\n    char line[RSIZ][LSIZ];\n    char fname[20];\n    int i = 0;\n    int tot = 0;\n    int waitingTime = 0;\n    int finishTime = 0;\n    FILE *fptr = NULL;\n    fptr = fopen(arr, \"r\");\n    while(fgets(line[i], LSIZ, fptr)){\n        line[i][strlen(line[i]) - 1] = '\\0';\n        i++;\n    }\n    tot = i;\n    printf(\"\\n The content of the file %s  are : \\n\",arr);\n    for(i = 0; i &lt; tot; ++i){\n        char str[18];\n        strncpy(str,line[i],18);\n        const char s[2] = \"\\n\";\n        char *token;\n        /* get the first token */\n        token = strtok(str, s);\n        for(int j=0;j&lt;3;j++){\n            char str1[18];\n            int arrivalTime;\n            int serviceTime;\n            strncpy(str1,token,18);\n            const char s1[2] = \" \";\n            char * pch;\n            // printf (\"Splitting string \\\"%s\\\" into tokens:\\n\",str1);\n            pch = strtok (str1,s1);\n            sscanf (line[i], \"%17s %d %d\", str1, &amp;arrivalTime, &amp;serviceTime);\n            appendRow(str1); //get the first column name\n            appendBar(i+1,serviceTime,\"black\",\" \",0);\n        }\n\n\n\n        /* walk through other tokens */\n        while(token != NULL ) {\n            // printf( \" %s\\n\", token);\n            token = strtok(NULL, s);\n        }\n\n    }\n    printf(\"\\n\");\n    // printf(\"The file has %d lines\", processCount);   \n    sleep(100);\n    waitExit();\n    fclose(fptr);\n}\n</code></pre>\n\n<p>Now I get bars drawn to the graph. However, they are duplicated and the values are all wrong. For example, first bar should have a length of 3 but this is the output:</p>\n\n<p><img src=\"https://i.stack.imgur.com/MiIjn.png\" alt=\"Graph output\"></p>\n"}, {"tags": ["java", "android", "c++", "c", "qualcomm"], "answers": [{"tags": [], "owner": {"reputation": 9869, "user_id": 1147688, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/c76a3f29c105a73c4060b3d1934ccd9a?s=128&d=identicon&r=PG", "display_name": "not2qubit", "link": "https://stackoverflow.com/users/1147688/not2qubit"}, "is_accepted": false, "score": 1, "last_activity_date": 1618108915, "last_edit_date": 1618108915, "creation_date": 1618108047, "answer_id": 67040925, "question_id": 58300969, "link": "https://stackoverflow.com/questions/58300969/how-to-get-rf-nv-items-from-android-qualcomm-devices/67040925#67040925", "title": "How to get RF/NV items from Android, Qualcomm devices?", "body": "<p>Yes, of course, but you can't use the AT command interpreter for that because the Layer 1/2/3 data feed is enormous. Qualcomm devices uses anther format to connect and send commands to modem. What you find as AT is just a very limited wrapper around that. What you need are the <em>Qualcomm</em> proprietary tools known as <code>QXDM</code> and <code>QCAT</code>, these also have a Python API and tons of other features. (A third tool called <code>QPST</code> is used to connect the device to these tools.) The list of Qualcomm's NV items are included in those tools and the upper range of those are slightly different for every modem, and which is for OEM customization. <a href=\"https://github.com/dl12345/qcn/blob/master/nv.txt\" rel=\"nofollow noreferrer\">HERE</a> is a very old list with some of those.</p>\n<p>And <a href=\"https://github.com/fgsect/scat\" rel=\"nofollow noreferrer\">here</a> is a more convenient tool to get diagnostic data from QC modems.</p>\n"}], "owner": {"reputation": 829, "user_id": 6581776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b8huO.jpg?s=128&g=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/6581776/tony"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 789, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1618108915, "creation_date": 1570613040, "question_id": 58300969, "link": "https://stackoverflow.com/questions/58300969/how-to-get-rf-nv-items-from-android-qualcomm-devices", "title": "How to get RF/NV items from Android, Qualcomm devices?", "body": "<p>Is there any way to capture Layer 1/3 RF related information\u2019s or to get NV items from Android, Qualcomm devices?</p>\n\n<p>I found some parameters from android <a href=\"https://developer.android.com/reference/android/telephony\" rel=\"nofollow noreferrer\">documentation</a> and also i tried Qualcomm NV Tool but didn\u2019t worked. </p>\n\n<p>Then I used busybox and run <strong>AT</strong> commands to get some information\u2019s, <a href=\"https://i.stack.imgur.com/ZhAB8.png\" rel=\"nofollow noreferrer\">echo \"AT+COPS=?\\r\" | busybox microcom -t 5000 /dev/smd11</a>.</p>\n\n<p>Please advice..</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c", "linux-kernel", "scheduling", "spinlock", "preemption"], "answers": [{"comments": [{"owner": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "edited": false, "score": 0, "creation_date": 1570688702, "post_id": 58305457, "comment_id": 102993322, "body": "oh yes.. The scheduling for <code>__raw_spin_unlock_bh()</code> is done is <code>local_bh_enable_ip()</code>. Thanks =, I missed that."}, {"owner": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "edited": false, "score": 0, "creation_date": 1570688758, "post_id": 58305457, "comment_id": 102993350, "body": "Mind taking a look at my other question, and suggesting a solution? <a href=\"https://stackoverflow.com/questions/58262330/linux-kernel-module-not-able-to-find-nvme-ns-struct\" title=\"linux kernel module not able to find nvme ns struct\">stackoverflow.com/questions/58262330/&hellip;</a>"}], "tags": [], "owner": {"reputation": 4173, "user_id": 4450651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l6IMB.jpg?s=128&g=1", "display_name": "red0ct", "link": "https://stackoverflow.com/users/4450651/red0ct"}, "is_accepted": true, "score": 2, "last_activity_date": 1570628180, "creation_date": 1570628180, "answer_id": 58305457, "question_id": 58300824, "link": "https://stackoverflow.com/questions/58300824/why-does-spin-unlock-bh-function-enables-preemption-without-calling-the-schedule/58305457#58305457", "title": "Why does spin_unlock_bh function enables preemption without calling the scheduler", "body": "<p><code>local_bh_disable()</code> increments <code>preempt_count</code> counter by a specific value, also <code>preempt_disable()</code> increments it by <code>1</code>. That's what <code>__raw_spin_lock_bh()</code> does.</p>\n\n<p><code>preempt_enable()</code> function <em>(which is invoked from <code>__raw_spin_unlock()</code> and <code>__raw_spin_unlock_irq()</code>)</em> invokes <code>preempt_check_resched()</code>. But there is no need to try to schedule when preemption is still disabled. It will be done inside <code>_local_bh_enable_ip()</code> on function exit.</p>\n\n<p>Looking at <a href=\"https://elixir.bootlin.com/linux/v3.10.108/source/include/linux/preempt.h#L73\" rel=\"nofollow noreferrer\">source code</a> you can see that the real <a href=\"https://elixir.bootlin.com/linux/v3.10.108/source/include/linux/spinlock_api_smp.h#L173\" rel=\"nofollow noreferrer\"><strong>\"BH\" spinlock</strong></a> call sequence is:</p>\n\n<pre><code>spin_release(&amp;lock-&gt;dep_map, 1, _RET_IP_);\ndo_raw_spin_unlock(lock);\npreempt_enable_no_resched();\n    \\____barrier();\n    \\____dec_preempt_count(); // &lt;--- decrease counter, but we can't schedule here\nlocal_bh_enable_ip();\n    \\____sub_preempt_count() // &lt;--- real disabling preemption\n    \\____preempt_check_resched(); // &lt;--- schedule\n</code></pre>\n\n<p>But f.e. <a href=\"https://elixir.bootlin.com/linux/v3.10.108/source/include/linux/spinlock_api_smp.h#L165\" rel=\"nofollow noreferrer\"><strong>\"IRQ\" spinlock</strong></a> call sequence:</p>\n\n<pre><code>spin_release(&amp;lock-&gt;dep_map, 1, _RET_IP_);\ndo_raw_spin_unlock(lock);\nlocal_irq_enable();\npreempt_enable();\n    \\____barrier();\n    \\____dec_preempt_count(); // &lt;--- real disabling preemption\n    \\____barrier();\n    \\____preempt_check_resched(); // &lt;--- schedule\n</code></pre>\n\n<p>To sum up: in case of BH-spinlock it just bypasses <code>preempt_check_resched()</code> because it's not needed.</p>\n"}], "owner": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 184, "favorite_count": 1, "accepted_answer_id": 58305457, "answer_count": 1, "score": 0, "last_activity_date": 1570628204, "creation_date": 1570612560, "last_edit_date": 1570628204, "question_id": 58300824, "link": "https://stackoverflow.com/questions/58300824/why-does-spin-unlock-bh-function-enables-preemption-without-calling-the-schedule", "title": "Why does spin_unlock_bh function enables preemption without calling the scheduler", "body": "<p>I was looking into the spinlock code of kernel code (version 3.10.1), and didnt understand one thing.</p>\n\n<p>When acquiring the spinlock through the function <code>spin_lock_bh()</code>, it goes ahead and calls <code>preempt_disable()</code>. This is the same as other spinlock functions which is used to acquire, for example <code>spin_lock()</code> and <code>spin_lock_irq()</code>.</p>\n\n<p>But when releasing the lock through <code>spin_unlock_bh()</code>, it calls <code>preempt_enable_no_resched()</code>, which skips calling the scheduler to preempt.\nThat is not the case for the other corresponding release functions (like <code>spin_unlock()</code> and <code>spin_unlock_irq()</code>). They call the regular <code>preempt_enable()</code> function which calls <code>__schedule()</code>.</p>\n"}, {"tags": ["c", "sizeof", "unions"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1570611035, "post_id": 58300331, "comment_id": 102963412, "body": "What output did you get and what output did you expect? Please read this: <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>"}, {"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 1, "creation_date": 1570611048, "post_id": 58300331, "comment_id": 102963425, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/891471/union-element-alignment\">Union element alignment</a>"}, {"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "reply_to_user": {"reputation": 1220, "user_id": 5878272, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/14e96159153b67fab5222b7c5fa18c71?s=128&d=identicon&r=PG&f=1", "display_name": "Fredrik", "link": "https://stackoverflow.com/users/5878272/fredrik"}, "edited": false, "score": 1, "creation_date": 1570611139, "post_id": 58300331, "comment_id": 102963464, "body": "@Fredrik he probably gets 20 as output because int and float likely have size of 4 and it&#39;s aligning it to be a multiple of that."}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 0, "last_activity_date": 1570807308, "creation_date": 1570807308, "answer_id": 58344281, "question_id": 58300331, "link": "https://stackoverflow.com/questions/58300331/giving-unexpected-sizeof-union-output-in-c-program/58344281#58344281", "title": "Giving unexpected sizeof union output in c program", "body": "<p>This is because of padding and alignment.</p>\n\n<p>A <code>union</code> may have padding at the end to ensure proper alignment of its fields when the union is part of an array.</p>\n\n<p>In this case, there is a field with type array of <code>int</code> and another of type array of <code>float</code>.  These types are most likely 4 bytes in size, so the union\u2019s size needs to be a multiple of 4.  So instead of 18 the size will be 20 to satisfy that alignment.</p>\n"}], "owner": {"reputation": 19, "user_id": 11950141, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-iRAPu-eIGC0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reT6EF-44tnID_BRv0dUgeb_8A3YQ/photo.jpg?sz=128", "display_name": "deepak jha", "link": "https://stackoverflow.com/users/11950141/deepak-jha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 1, "answer_count": 1, "score": -6, "last_activity_date": 1573918698, "creation_date": 1570610946, "last_edit_date": 1573918698, "question_id": 58300331, "link": "https://stackoverflow.com/questions/58300331/giving-unexpected-sizeof-union-output-in-c-program", "title": "Giving unexpected sizeof union output in c program", "body": "<p>Code:</p>\n\n<pre><code>#include &lt;stdio.h&gt; \n\nint main()\n{\n    union sample\n    {\n        int   m[2];\n        float n[3];\n        char ch[18];\n    }u;\n\n    printf(\"The size of union = %d\\n\", sizeof(u));\n\n    return 0;\n}\n</code></pre>\n\n<p>I was expecting 18 as output \nHere it is providing unexpected output.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 115642, "user_id": 299924, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/71fc84230717311db1410d7106273128?s=128&d=identicon&r=PG", "display_name": "trojanfoe", "link": "https://stackoverflow.com/users/299924/trojanfoe"}, "edited": false, "score": 2, "creation_date": 1570609474, "post_id": 58299867, "comment_id": 102962584, "body": "When you say &quot;data inside the file is {1, 2, 3, 4, 5, 6, 7, 8, 9, 10}&quot; you don&#39;t mean the <b>text</b> <code>&quot;{1, 2, 3, 4, 5, 6, 7, 8, 9, 10}&quot;</code> do you?  You mean it contains binary, right?"}, {"owner": {"reputation": 6053, "user_id": 11336762, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hGPr6.jpg?s=128&g=1", "display_name": "Roberto Caboni", "link": "https://stackoverflow.com/users/11336762/roberto-caboni"}, "reply_to_user": {"reputation": 115642, "user_id": 299924, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/71fc84230717311db1410d7106273128?s=128&d=identicon&r=PG", "display_name": "trojanfoe", "link": "https://stackoverflow.com/users/299924/trojanfoe"}, "edited": false, "score": 0, "creation_date": 1570610231, "post_id": 58299867, "comment_id": 102962955, "body": "How can you be sure you have found 5? What is the value of &#39;pos&#39; after the while loop? Please, fill your code with temporary debug prints (for example, also <code>y</code> value after each iteration can help to understand what actually makes the execution exit the loop). Answer also @trojanfoe &#39;s question, because if the file contains text you will have to do a lot of changes in your code."}, {"owner": {"reputation": 3, "user_id": 12186856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67402227b1b208816d487bc003ab040e?s=128&d=identicon&r=PG&f=1", "display_name": "biggie123", "link": "https://stackoverflow.com/users/12186856/biggie123"}, "edited": false, "score": 0, "creation_date": 1570616312, "post_id": 58299867, "comment_id": 102966327, "body": "I apologize for the terrible question guys. I am still new to this website and I&#39;ll do better next time. Also, thanks for the help , I found the fix now thanks to @Jonathan Leffler"}], "answers": [{"tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": true, "score": 7, "last_activity_date": 1570610310, "creation_date": 1570610310, "answer_id": 58300155, "question_id": 58299867, "link": "https://stackoverflow.com/questions/58299867/fread-returns-0-even-though-the-data-inside-is-found/58300155#58300155", "title": "fread returns 0 even though the data inside is found", "body": "<p>Surely, what you have:</p>\n\n<pre><code>while(checker = fread(&amp;y, sizeof(int), 1, fp) != 0 &amp;&amp; y != num){\n</code></pre>\n\n<p>should be:</p>\n\n<pre><code>while ((checker = fread(&amp;y, sizeof(int), 1, fp)) != 0 &amp;&amp; y != num){\n</code></pre>\n\n<p>As it stands, you're evaluating <code>fread(&amp;y, sizeof(int), 1, fp) != 0 &amp;&amp; y != num</code> and assigning that boolean (0, 1) value to <code>checker</code>, and then testing whether it was 0 or 1.</p>\n"}, {"tags": [], "owner": {"reputation": 3364, "user_id": 693294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d5935d56f077497b60c12cf86b9d2e1?s=128&d=identicon&r=PG", "display_name": "Gilbert", "link": "https://stackoverflow.com/users/693294/gilbert"}, "is_accepted": false, "score": 0, "last_activity_date": 1570611677, "creation_date": 1570611677, "answer_id": 58300552, "question_id": 58299867, "link": "https://stackoverflow.com/questions/58299867/fread-returns-0-even-though-the-data-inside-is-found/58300552#58300552", "title": "fread returns 0 even though the data inside is found", "body": "<p>Without more information on incoming data all I can do is guess at a few things. Also assuming the while loop runs to completion finding nothing. T</p>\n\n<ul>\n<li><a href=\"https://en.wikipedia.org/wiki/Endianness\" rel=\"nofollow noreferrer\">Endianness</a> problems. If the information in your file was not written by a C program writing an <code>int</code> the binary bytes in the file may be in a different order than you expect. </li>\n<li>Assuming you are reading a binary file with integer values, despite the .txt suffix, you should want to add a \"b\" option to your open. Else the very low values you are using can be treated as control characters, which can be filtered by libc.  In particular the \\n and \\r can be deleted or generated, depending on the OS you are running on.  \"b\" assures this does not happen. On Linux you should be safe as is.</li>\n<li>Assuming you are reading a true text file if you are passing in a binary value then things just will not work as true .txt values do not use 50 for '2' rather than \\002. </li>\n</ul>\n"}], "owner": {"reputation": 3, "user_id": 12186856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67402227b1b208816d487bc003ab040e?s=128&d=identicon&r=PG&f=1", "display_name": "biggie123", "link": "https://stackoverflow.com/users/12186856/biggie123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 58300155, "answer_count": 2, "score": 0, "last_activity_date": 1570611677, "creation_date": 1570609300, "question_id": 58299867, "link": "https://stackoverflow.com/questions/58299867/fread-returns-0-even-though-the-data-inside-is-found", "title": "fread returns 0 even though the data inside is found", "body": "<p>I need help in this chunk of code, I'm trying to update my file and my fread returns 0 even though the data im trying to update is found inside the file.</p>\n\n<pre><code>void updateFile(char filename[], int num, int update){\n    int pos, checker, y;\n    FILE *fp;\n\n\n    if((fp = fopen(\"yes.txt\", \"r+\")) != NULL){\n        pos = 0;\n        while(checker = fread(&amp;y, sizeof(int), 1, fp) != 0 &amp;&amp; y != num){\n            pos++;\n        }\n        if(checker != 0){\n            fseek(fp, sizeof(int) * pos, SEEK_SET);\n            fwrite(&amp;update, sizeof(int), 1, fp);\n        }\n        fclose(fp); \n    }\n}\n</code></pre>\n\n<p>data inside the file is {1, 2, 3, 4, 5, 6, 7, 8, 9, 10}\nNow im trying to find 5(num) inside the file and change it to another number(update). What I know is fread is supposed to return 1 after a successful read of data but in my case, after I found 5 using y != num, fread returns 0 to checker and I don't know why. I expect it was going to be 1 and not 0 and because of that, I can't update my file. Please help.</p>\n"}, {"tags": ["c", "integer", "printf"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1570610773, "post_id": 58299831, "comment_id": 102963274, "body": "<b>Q:</b> <i>How should I print those d,h,m in the snprintf?</i> A: <i>the same way as with <code>printf</code></i>."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1570616456, "post_id": 58299831, "comment_id": 102966404, "body": "&quot;but it didn&#39;t work&quot; is not a very useful statement unless the problem is as simple as in this case. How does it not work. Does your compile shout warnings about type mismatch at you? I hope so. Does it print garbage? Probably yes. You need to tell us what exactly is your problem"}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1570619458, "post_id": 58299831, "comment_id": 102967917, "body": "The nice thing about <code>snprintf</code> is that you can tell it how big the destination buffer is.  So when you call <code>snprintf(temp_str, LONGEST, ...)</code>, normally that constant <code>LONGEST</code> is the size of the buffer <code>temp_str</code>, either the size of the array if it&#39;s an array, or the size you asked for with <code>malloc()</code> if it&#39;s a pointer.  So: where&#39;s the other place in your program where you used <code>LONGEST</code> to set the size of the buffer?"}], "answers": [{"tags": [], "owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "is_accepted": false, "score": 2, "last_activity_date": 1570609735, "creation_date": 1570609735, "answer_id": 58299988, "question_id": 58299831, "link": "https://stackoverflow.com/questions/58299831/use-snprintf-in-printing-integer-values/58299988#58299988", "title": "use snprintf in printing integer values", "body": "<p>Why the different format string for the <code>snprintf</code> attempt? Just do it like you did in the <code>printf</code> call:</p>\n\n<pre><code>snprintf(temp_str, LONGEST, \"DD:HH:MM:%d:%d:%d\", d, h, m);\n</code></pre>\n\n<p>The <code>%02s</code> specifier doesn't work for integers. You also haven't declared <code>temp_str</code>, so you need to do that beforehand:</p>\n\n<pre><code>char temp_str[LONGEST];\n</code></pre>\n\n<p>After calling <code>snprintf</code>, the string <code>\"DD:HH:MM:32:19:40\"</code> is stored in <code>temp_str</code> and you can verify that with <code>puts(temp_str);</code>, for instance.</p>\n"}, {"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 0, "last_activity_date": 1570616705, "creation_date": 1570616705, "answer_id": 58302072, "question_id": 58299831, "link": "https://stackoverflow.com/questions/58299831/use-snprintf-in-printing-integer-values/58302072#58302072", "title": "use snprintf in printing integer values", "body": "<p>You must define <code>temp_str</code> as an array of <code>char</code> with at least <code>LONGEST</code> elements, andd you can use the same format string as for <code>printf</code>.</p>\n\n<p>Note however that your format string should be <code>\"%02d:%02d:%02d\"</code> to produce 2 digits for each field even for values below <code>10</code>.</p>\n\n<p>Here is a modified version:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdio.h&gt;\n\n#define LONGEST 60\n\nint main() {\n    int sec, h, m, s, d, temp; \n    char temp_str[LONGEST];\n    int test = 2835656;\n\n    d = test / 86400; //divide the number of seconds by the number of seconds in a day\n    if (d &lt; 100) {\n        temp = test % 86400; \n        temp /= 60;    // discard the seconds\n        h = temp / 60; // to get \"hour\" \n        m = temp % 60; // to get \"minute\"\n    } else {\n        d = 99;\n        h = 23;\n        m = 59;\n    }\n\n    snprintf(temp_str, LONGEST, \"DD:HH:MM:%02d:%02d:%02d\\n\", d, h, m); //output is DD:HH:MM:32:19:40\n    fputs(temp_str, stdout);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 9653834, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc315fc964a2a1cfcfde77716513a565?s=128&d=identicon&r=PG&f=1", "display_name": "SKmay", "link": "https://stackoverflow.com/users/9653834/skmay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 253, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1570616705, "creation_date": 1570609180, "last_edit_date": 1570614023, "question_id": 58299831, "link": "https://stackoverflow.com/questions/58299831/use-snprintf-in-printing-integer-values", "title": "use snprintf in printing integer values", "body": "<p>The code below is converting a number of seconds to the <code>DD:HH:MM</code> format. Instead of using <code>printf</code>, I would like to use <code>snprintf</code>. How should I print those d,h,m in the <code>snprintf</code>?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define LONGEST 60\n\nint main() {\n    int sec, h, m, s, d, temp; \n    char *temp_str;\n    int test= 2835656; \n    d = test / 86400; //divide the number of seconds by the number of seconds in a day\n    if (d &lt; 100) {\n        temp = test % 86400; \n        temp /= 60;  // \n        h = temp / 60; //to get \"minute\" \n        m = temp % 60; //to get \"second\"\n    } else {\n        d = 99;\n        h = 23;\n        m = 59;\n    }\n\n    printf(\"DD:HH:MM:%d:%d:%d\\n\", d, h, m); //output is DD:HH:MM:32:19:40\n\n    return 0;\n}\n</code></pre>\n\n<p>I tried <code>snprintf(temp_str, LONGEST, \"%02s:%02s:%02s\", d, h, m);</code> but it didn't work </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 305, "user_id": 10120717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ab999de4cfcdc4f8934bd77e92eab02?s=128&d=identicon&r=PG&f=1", "display_name": "tscheppe", "link": "https://stackoverflow.com/users/10120717/tscheppe"}, "edited": false, "score": 1, "creation_date": 1570608533, "post_id": 58299651, "comment_id": 102962111, "body": "what is your expected result?"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1570609150, "post_id": 58299651, "comment_id": 102962423, "body": "Your value of <code>pai</code> will give you a short circumference."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 1, "creation_date": 1570609375, "post_id": 58299651, "comment_id": 102962538, "body": "Without your given input and printed result besides the expected result we cannot tell much."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 1, "creation_date": 1570609444, "post_id": 58299651, "comment_id": 102962572, "body": "You do not verify that you got correct return value from <code>scanf</code>. How would you know if your data was read properly?"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1570613195, "post_id": 58299651, "comment_id": 102964609, "body": "Please do not add screenshots of plain text. You can easily copy&amp;paste the text into your question body."}, {"owner": {"reputation": 1, "user_id": 12186756, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tp7dP5VvWIg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdl22CtBdmeXA8rJItTSViECFz7RQ/photo.jpg?sz=128", "display_name": "yax qin", "link": "https://stackoverflow.com/users/12186756/yax-qin"}, "reply_to_user": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1570623901, "post_id": 58299651, "comment_id": 102970364, "body": "@Gerhardh I got it.Thank you!"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 12186756, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tp7dP5VvWIg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdl22CtBdmeXA8rJItTSViECFz7RQ/photo.jpg?sz=128", "display_name": "yax qin", "link": "https://stackoverflow.com/users/12186756/yax-qin"}, "edited": false, "score": 0, "creation_date": 1570612360, "post_id": 58300451, "comment_id": 102964149, "body": "I just started learning programming. I will try to learn how to use &quot;&amp;&quot;.You&#39;re my hero for the day. Thank you!"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "reply_to_user": {"reputation": 1, "user_id": 12186756, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tp7dP5VvWIg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdl22CtBdmeXA8rJItTSViECFz7RQ/photo.jpg?sz=128", "display_name": "yax qin", "link": "https://stackoverflow.com/users/12186756/yax-qin"}, "edited": false, "score": 2, "creation_date": 1570613113, "post_id": 58300451, "comment_id": 102964561, "body": "@yax First lesson: Enable all compiler warnings. Normally your compiler should tell you that you have a mismatch in format specifier and provided types."}, {"owner": {"reputation": 1, "user_id": 12186756, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tp7dP5VvWIg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdl22CtBdmeXA8rJItTSViECFz7RQ/photo.jpg?sz=128", "display_name": "yax qin", "link": "https://stackoverflow.com/users/12186756/yax-qin"}, "edited": false, "score": 0, "creation_date": 1570623422, "post_id": 58300451, "comment_id": 102970104, "body": "I think I have enabled it. When I make other mistakes,it can remind me."}], "tags": [], "owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "is_accepted": false, "score": 0, "last_activity_date": 1570611329, "creation_date": 1570611329, "answer_id": 58300451, "question_id": 58299651, "link": "https://stackoverflow.com/questions/58299651/how-to-make-my-code-do-the-round-a-correct-calculation/58300451#58300451", "title": "How to make my code do the round a correct calculation?", "body": "<p>Besides other things, here</p>\n\n<pre><code>printf(\"c=%6.2f\\ns1=%6.2f\",&amp;c,&amp;s1);\n//                         ^  ^ \n</code></pre>\n\n<p>The code is trying to print the <strong>addresses</strong> of the two <code>float</code> variables (the result beeing undefined behavior, due to the wrong format specifier), not the variables themselves.</p>\n\n<p>Just remove remove the <code>&amp;</code>.</p>\n\n<pre><code>printf(\"c=%6.2f\\ns1=%6.2f\", c, s1);\n</code></pre>\n\n<p>It would also be better to check the return value of <code>scanf</code>, to be sure that the extraction of those values actually succeeded.</p>\n"}], "owner": {"reputation": 1, "user_id": 12186756, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tp7dP5VvWIg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdl22CtBdmeXA8rJItTSViECFz7RQ/photo.jpg?sz=128", "display_name": "yax qin", "link": "https://stackoverflow.com/users/12186756/yax-qin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 1, "answer_count": 1, "score": -1, "last_activity_date": 1570611329, "creation_date": 1570608392, "last_edit_date": 1570611012, "question_id": 58299651, "link": "https://stackoverflow.com/questions/58299651/how-to-make-my-code-do-the-round-a-correct-calculation", "title": "How to make my code do the round a correct calculation?", "body": "<p>I use the DEV C++.\"c\" can not correctly calculate</p>\n\n<p>I type r=1.5h=3,but the results are 0.00</p>\n\n<pre><code>float r,h,c,s1,pai;\n    pai=3.14;\n    scanf(\"r=%fh=%f\",&amp;r,&amp;h);\n    c=2.0*pai*r;\n    s1=pai*r*r;\n    printf(\"c=%6.2f\\ns1=%6.2f\",&amp;c,&amp;s1);\n    return 0;\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/qYx7S.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"}, {"tags": ["c++", "c", "memory-management"], "comments": [{"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 5, "creation_date": 1570607236, "post_id": 58299305, "comment_id": 102961465, "body": "<i>&quot;What I hope to gain by this, is that the runtime might spend less memory on bookkeeping&quot;</i> And instead your program would spend the memory keeping track of the size?"}, {"owner": {"reputation": 953, "user_id": 312632, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ff265721698489afeb7ceb7d3afde6e?s=128&d=identicon&r=PG", "display_name": "B_old", "link": "https://stackoverflow.com/users/312632/b-old"}, "reply_to_user": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 1, "creation_date": 1570607387, "post_id": 58299305, "comment_id": 102961549, "body": "Exactly, often that information is already needed/available."}, {"owner": {"reputation": 32078, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "reply_to_user": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 3, "creation_date": 1570607413, "post_id": 58299305, "comment_id": 102961561, "body": "@Blaze This is actually a valid question because programs typically track sizes of object regardless."}, {"owner": {"reputation": 32078, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 3, "creation_date": 1570607495, "post_id": 58299305, "comment_id": 102961606, "body": "As for question itself, there is no such APIs, you&#39;ll need to write a custom allocator."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1570607639, "post_id": 58299305, "comment_id": 102961684, "body": "<code>mmap()</code>/<code>munmap()</code> maybe?"}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1570608972, "post_id": 58299305, "comment_id": 102962332, "body": "I think that you need to widen the search. There are a lot of custom, 3rd party allocators (not just OS API), which can be used. And even, if there is no such allocator, maybe you can modify one. I know, this would be a &quot;library search&quot; question, which is not allowed here."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "reply_to_user": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 3, "creation_date": 1570609220, "post_id": 58299305, "comment_id": 102962461, "body": "@Blaze: in an average C++ program, the allocation size almost always known. <code>std::vector</code>? Known. Any polymorphic object? Known. Any object array with non-trivial destructor? Known. It&#39;s a shame, that we store size information duplicated most of the time (and/or we don&#39;t provide this information to the allocator, so it can be faster)."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 1, "creation_date": 1570613236, "post_id": 58299305, "comment_id": 102964632, "body": "Wait, <i>who</i> knows the allocated size of a polymorphic object? It&#39;s not stored in the object, so if you <code>delete</code> via base-class pointer, where is it tracked other than by the allocator?"}, {"owner": {"reputation": 337, "user_id": 4091452, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/100002156861277/picture?type=large", "display_name": "Andrei Damian", "link": "https://stackoverflow.com/users/4091452/andrei-damian"}, "reply_to_user": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1570613492, "post_id": 58299305, "comment_id": 102964782, "body": "Well, if it&#39;s polymorphic, it should have a virtual destructor, and the actual class will know its sizeof. @Useless"}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1570613604, "post_id": 58299305, "comment_id": 102964848, "body": "Sure, but that means the most-derived destructor has to handle deallocation <i>after</i> its object has been fully destroyed. It&#39;s a bit hairy, and not at all the way delete expressions work now."}, {"owner": {"reputation": 337, "user_id": 4091452, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/100002156861277/picture?type=large", "display_name": "Andrei Damian", "link": "https://stackoverflow.com/users/4091452/andrei-damian"}, "edited": false, "score": 0, "creation_date": 1570613839, "post_id": 58299305, "comment_id": 102964988, "body": "Also, C++14 actually defines an overload of operator delete which takes a pointer and a size, and it looks like jemalloc actually doesn&#39;t ignore the size. Still, it&#39;ll probably create more problems than it tries to solve, so I don&#39;t see an actual benefit of trying to use that."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1570615312, "post_id": 58299305, "comment_id": 102965826, "body": "<i>What I hope to gain by this, is that the runtime might spend less memory on bookkeeping, when the allocated size is already available in the program.</i>  One major problem: you&#39;d be adding a path for creating really nasty bugs. Right now, heap management is done by dedicated, extremely well-tested OS-supplied library code. That code doesn&#39;t need to be retested every time you change your application code. Once you move heap management into your application, you will <b>NOT</b> test it as well as the OS-supplied heap management code gets tested, but will have to retest it for all app code changes."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "reply_to_user": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1570616936, "post_id": 58299305, "comment_id": 102966662, "body": "@Useless: actually, this is a common thing to do for compilers to merge the destructor call with delete: <a href=\"https://godbolt.org/z/JC_bT-\" rel=\"nofollow noreferrer\">godbolt.org/z/JC_bT-</a> . But even, if they didn&#39;t do it, it is not hard to put sizeof into the vtable."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 1, "creation_date": 1570617841, "post_id": 58299305, "comment_id": 102967100, "body": "It&#39;s known <i>somewhere</i> yes. But not at the site of the delete expression as currently specified."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 1, "creation_date": 1570625820, "post_id": 58299305, "comment_id": 102971470, "body": "@geza -- re: &quot;the allocation size is almost always known&quot; -- no. The <b>requested</b> size is almost always known. The memory manager can (and does) allocate <b>more</b> memory than was requested. And it&#39;s not always the same amount for the same requested size."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1570625918, "post_id": 58299305, "comment_id": 102971521, "body": "@AndrewHenle -- minor technical point: memory management is usually done in the standard library; the granularity of OS-supplied memory blocks is generally too large for efficient memory allocation. The standard library code calls the OS to get large blocks, which it subdivides as needed."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1570635015, "post_id": 58299305, "comment_id": 102976818, "body": "@PeteBecker: And why does this matter?"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1570635176, "post_id": 58299305, "comment_id": 102976912, "body": "@geza -- because the memory manager still has to store the actual size of the block."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1570635875, "post_id": 58299305, "comment_id": 102977299, "body": "@PeteBecker: If the chunk is much bigger, than it makes sense to split it (so it would has exact size). If it is just slightly larger, this information can be stored into the header of the block. Furthermore, where OP&#39;s case is mostly interesting (small block size), it doesn&#39;t matter, because block size will be always exact. Currently, memory allocators need to do some tricks to determine the area of the block (small/large). If they provided the size, these tricks are unneeded."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "reply_to_user": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1570636906, "post_id": 58299305, "comment_id": 102977834, "body": "@Useless: why does it needed at the site of delete expression? It should be needed when <code>free()</code> is called."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1570650071, "post_id": 58299305, "comment_id": 102983722, "body": "@geza -- re:&quot;this information can be stored into the header of the block&quot;. Yes, that&#39;s what I said: the memory manager still has to store the actual size of the block. Your suggestions for how this can be avoided would mean that memory managers would be severely constrained in order to meet those requirements, and it&#39;s not at all clear that such a constrained memory manager would be optimal."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1570652804, "post_id": 58299305, "comment_id": 102984731, "body": "@PeteBecker: it is different, that the allocator needs to store 1-2 bits (this is the case for the slightly larger case), or it needs to store a full 4/8-byte size field. And again, this is not the only issue. Allocators needs to identify the block, whether it is small/large. Why would this memory manager constrained in any way? It could work exactly as other allocators, it could ignore the size information at <code>free</code>. But, it could use it for benefit. I&#39;ve designed several memory allocators in the past, and size information at <code>free</code> definitely helps in a lot of cases."}], "answers": [{"comments": [{"owner": {"reputation": 953, "user_id": 312632, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ff265721698489afeb7ceb7d3afde6e?s=128&d=identicon&r=PG", "display_name": "B_old", "link": "https://stackoverflow.com/users/312632/b-old"}, "edited": false, "score": 0, "creation_date": 1570614903, "post_id": 58301408, "comment_id": 102965602, "body": "The reference you are quoting also says &quot;A memory allocator can use the given size to be more efficient. The standard library implementations are identical to (1-2)&quot;. So it still is necessary to write a custom allocator?"}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 953, "user_id": 312632, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ff265721698489afeb7ceb7d3afde6e?s=128&d=identicon&r=PG", "display_name": "B_old", "link": "https://stackoverflow.com/users/312632/b-old"}, "edited": false, "score": 0, "creation_date": 1570615099, "post_id": 58301408, "comment_id": 102965714, "body": "@B_old You would need to replace the global <code>new</code> and these versions of <code>delete</code> to use your custom allocator that accepts the size on deallocation."}], "tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1570614436, "creation_date": 1570614436, "answer_id": 58301408, "question_id": 58299305, "link": "https://stackoverflow.com/questions/58299305/free-memory-with-explicit-size/58301408#58301408", "title": "Free memory with explicit size", "body": "<p><code>operator delete</code> family does accept the size. See <a href=\"https://en.cppreference.com/w/cpp/memory/new/operator_delete\" rel=\"nofollow noreferrer\"><code>operator delete</code>, <code>operator delete[]</code></a>:</p>\n\n<blockquote>\n<pre><code>void operator delete  (void* ptr, std::size_t sz) noexcept;\nvoid operator delete[](void* ptr, std::size_t sz) noexcept;\nvoid operator delete  (void* ptr, std::size_t sz, std::align_val_t al) noexcept;\nvoid operator delete[](void* ptr, std::size_t sz, std::align_val_t al) noexcept;\n</code></pre>\n  \n  <p>Called instead of <code>void operator delete(void* ptr) noexcept</code> and <code>void operator delete[](void* ptr) noexcept;</code> if a user-defined replacement is provided.</p>\n</blockquote>\n\n<p>With the benefit of the compiler providing the size for you.</p>\n"}, {"tags": [], "owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "is_accepted": true, "score": 3, "last_activity_date": 1570615525, "last_edit_date": 1570615525, "creation_date": 1570615198, "answer_id": 58301638, "question_id": 58299305, "link": "https://stackoverflow.com/questions/58299305/free-memory-with-explicit-size/58301638#58301638", "title": "Free memory with explicit size", "body": "<blockquote>\n  <p>I'm looking for malloc/free-like APIs in mainstream OSs that allow me to specify an explicit size during both allocation and de-allocation.</p>\n</blockquote>\n\n<p>I'm not aware of any.</p>\n\n<blockquote>\n  <p>What I hope to gain by this, is that the runtime might spend less memory on bookkeeping, when the allocated size is already available in the program.</p>\n</blockquote>\n\n<p>This idea certainly can work, but there are a couple of drawbacks:</p>\n\n<ol>\n<li><p>you have to partition allocation regions between objects whose allocated size is tracked by the caller, and objects where the allocator still needs to record that itself.</p>\n\n<p>This increases complexity and potentially memory fragmentation.</p></li>\n<li><p>you have to allocate <em>exactly</em> the size the program requests.</p>\n\n<p>That is, a normal allocator could decide to return a 96-byte chunk for a 64-byte request, because it's just been freed, is hot on cache, and splitting and re-coalescing chunks smaller than 64 bytes is not deemed worthwhile.</p>\n\n<p>Your allocator can't do that, in general (it is limited to rounding up to the next aligned chunk size).</p></li>\n</ol>\n\n<hr>\n\n<p>Of course, there are plenty of specialized allocators that manage these tradeoffs explicitly.</p>\n\n<p>Using or writing these is a perfectly normal thing to do when the general-purpose allocator isn't a good fit for your allocation patterns. But, they're generally not provided by the language or OS, because they're <em>not</em> general-purpose. They're provided by libraries (or by yourself).</p>\n\n<p>Examples:</p>\n\n<ol>\n<li><p>You allocate and free a lot of objects with a previously-known fixed size.</p>\n\n<p>Write an object pool allocator for them. It doesn't need to track the allocation size, because it's always the same (often a template parameter). You don't need to explicitly track it in your code either, because it's implied by the type.</p></li>\n<li><p>Variable-sized allocations of trivial objects all with the same lifetime (eg, lots of char buffers).</p>\n\n<p>Write an arena allocator. It doesn't need to track <em>individual</em> allocation sizes, because you reset the entire allocator instead of freeing and re-allocating individual objects. You never explicitly delete the allocate objects, because they're trivial anyway.</p></li>\n</ol>\n\n<p>NB. If you choose to integrate your allocator using <code>new</code>/<code>delete</code> overloads (and think it will benefit from the explicit size parameter) you absolutely can use the ones Maxim points out, with the following caveat:</p>\n\n<blockquote>\n  <p>... [explicit size overloads will be] Called instead of [the default overloads] if a user-defined replacement is provided, except that it's unspecified [which] is called when deleting objects of incomplete type and arrays of non-class and trivially-destructible class types.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 4138848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/591a1646b3ef70fc4454aa7a28c1212f?s=128&d=identicon&r=PG&f=1", "display_name": "Wayne Taylor", "link": "https://stackoverflow.com/users/4138848/wayne-taylor"}, "is_accepted": false, "score": 0, "last_activity_date": 1570633721, "creation_date": 1570633721, "answer_id": 58307182, "question_id": 58299305, "link": "https://stackoverflow.com/questions/58299305/free-memory-with-explicit-size/58307182#58307182", "title": "Free memory with explicit size", "body": "<p>If you are looking for faster malloc &amp; free, there is a new (13 Feb 2019) drop-in replacement for systems that already support a hardware memory manager unit, MMU. Most computers do, most micro-controllers don't.</p>\n\n<p>There is a paper and a study that shows it reduces Firefox's memory by 16% and Redis by 39%.</p>\n\n<p>It is called Mesh.  <a href=\"https://arxiv.org/abs/1902.04738\" rel=\"nofollow noreferrer\">Mesh dynamic memory allocation</a></p>\n"}], "owner": {"reputation": 953, "user_id": 312632, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ff265721698489afeb7ceb7d3afde6e?s=128&d=identicon&r=PG", "display_name": "B_old", "link": "https://stackoverflow.com/users/312632/b-old"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 222, "favorite_count": 0, "accepted_answer_id": 58301638, "answer_count": 3, "score": 6, "last_activity_date": 1570633721, "creation_date": 1570607065, "last_edit_date": 1570621775, "question_id": 58299305, "link": "https://stackoverflow.com/questions/58299305/free-memory-with-explicit-size", "title": "Free memory with explicit size", "body": "<p>I'm looking for <code>malloc</code>/<code>free</code>-like APIs in mainstream OSs that allow me to specify an explicit size during both allocation and de-allocation. What I hope to gain by this is that the runtime might spend less memory on bookkeeping when the allocated size is already available in the program.</p>\n\n<p>On e.g. windows I only found <code>free()</code>, <code>_aligned_free()</code>, and <code>_freea()</code>, none of which take a second argument for size.</p>\n"}, {"tags": ["c++", "c", "winapi"], "comments": [{"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 6, "creation_date": 1570606164, "post_id": 58299053, "comment_id": 102960890, "body": "Most Win Api is C. There are couple exceptions (dor example COM IFAIR)."}, {"owner": {"reputation": 91, "user_id": 9841845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6b120be5bf3d5b37d3426ca5e1b95c5?s=128&d=identicon&r=PG&f=1", "display_name": "G&#252;nel Resulova", "link": "https://stackoverflow.com/users/9841845/g%c3%bcnel-resulova"}, "reply_to_user": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1570606275, "post_id": 58299053, "comment_id": 102960950, "body": "But almost every code in MSDN says C++.."}, {"owner": {"reputation": 32078, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "reply_to_user": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 4, "creation_date": 1570606417, "post_id": 58299053, "comment_id": 102961033, "body": "@MarekR All the COM APIs are C compatible."}, {"owner": {"reputation": 32078, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 1, "creation_date": 1570606606, "post_id": 58299053, "comment_id": 102961155, "body": "C/C++ are not almost separate, C can be treated as a subset of C++ while existing differences are result of standardization committees doing poor job. <i>&quot;don&#39;t want to waste again time for studying it&quot;</i> - but switching to C++ is a must after C."}, {"owner": {"reputation": 993, "user_id": 1079347, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CWTfN.png?s=128&g=1", "display_name": "gast128", "link": "https://stackoverflow.com/users/1079347/gast128"}, "edited": false, "score": 0, "creation_date": 1570606873, "post_id": 58299053, "comment_id": 102961295, "body": "Win32 API is primarily C as other people stated. A good book is the old Petzold&#39;s Programming Windows 95 book which is about GDI and GUI topics and Richter&#39;s &#39;Advanced Windows&#39; which is more about kernel32.dll stuff. Pretty rare that you hear these days that someone wants to learn Win32"}, {"owner": {"reputation": 91, "user_id": 9841845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6b120be5bf3d5b37d3426ca5e1b95c5?s=128&d=identicon&r=PG&f=1", "display_name": "G&#252;nel Resulova", "link": "https://stackoverflow.com/users/9841845/g%c3%bcnel-resulova"}, "edited": false, "score": 0, "creation_date": 1570606902, "post_id": 58299053, "comment_id": 102961307, "body": "Thanks for help.I will do it .first glance scared maybe.I dont know"}, {"owner": {"reputation": 32078, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1570606938, "post_id": 58299053, "comment_id": 102961317, "body": "You should check out <a href=\"https://www.youtube.com/watch?v=D7Sd8A6_fYU\" rel=\"nofollow noreferrer\">CppCon 2016: Dan Saks \u201cextern c: Talking to C Programmers about C++\u201d</a>"}, {"owner": {"reputation": 91, "user_id": 9841845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6b120be5bf3d5b37d3426ca5e1b95c5?s=128&d=identicon&r=PG&f=1", "display_name": "G&#252;nel Resulova", "link": "https://stackoverflow.com/users/9841845/g%c3%bcnel-resulova"}, "reply_to_user": {"reputation": 993, "user_id": 1079347, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CWTfN.png?s=128&g=1", "display_name": "gast128", "link": "https://stackoverflow.com/users/1079347/gast128"}, "edited": false, "score": 0, "creation_date": 1570607097, "post_id": 58299053, "comment_id": 102961379, "body": "@gast128    It&#39;s even surprise for me why Win32 api should i learn for security company.And why for i will use it ,  i don&#39;t know."}, {"owner": {"reputation": 993, "user_id": 1079347, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CWTfN.png?s=128&g=1", "display_name": "gast128", "link": "https://stackoverflow.com/users/1079347/gast128"}, "edited": false, "score": 0, "creation_date": 1570608787, "post_id": 58299053, "comment_id": 102962239, "body": "@G&#252;nel Resulova: perhaps good to ask since Win32 API also contains cryptography and account management. That&#39;s only a small portion of the Win32 API and the books I mentioned don&#39;t cover that."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1570610923, "post_id": 58299053, "comment_id": 102963359, "body": "You&#39;ll need to study C++ regardless if you intend to use it or not. In particular, you need to study object-oriented design. All well-written C programs use many OO aspects. And using C++ specific terminology such as constructors, function overloading etc is helpful for C programmers as well."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 32078, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1570612913, "post_id": 58299053, "comment_id": 102964445, "body": "@VTT C/C++ polyglots are <i>possible</i> to write, but it&#39;s a challenge and the result will just look like crappy C."}, {"owner": {"reputation": 32078, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1570615444, "post_id": 58299053, "comment_id": 102965886, "body": "@Fredrik While I somewhat agree that C++ is a bloated mess (actually I consider C quite bloated as well) it offers so many improvements over C that I can not imagine someone working on at least medium sized C codebase not wanting to take advantage of at least some of them."}, {"owner": {"reputation": 32078, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1570615911, "post_id": 58299053, "comment_id": 102966144, "body": "@Quentin I&#39;m not sure what are these &quot;C/C++ polyglots&quot; you are referring to. Perhaps you should check out the video I posted above."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 32078, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1570616129, "post_id": 58299053, "comment_id": 102966247, "body": "@VTT a program that compiles and does the same thing in C and C++, written in the common subset of the two languages."}, {"owner": {"reputation": 32078, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1570618190, "post_id": 58299053, "comment_id": 102967274, "body": "@Quentin I&#39;d say that a program that compiles and does the same thing in C and C++, written in the common subset of the two languages would be just a normal C program. And writing it won&#39;t be that challenging, though definitely time consuming. What is your point anyway?"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 32078, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 2, "creation_date": 1570625562, "post_id": 58299053, "comment_id": 102971292, "body": "@VTT that half the features of C don&#39;t exist in C++ or work differently, so C is definitely not a subset of C++."}], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 9841845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6b120be5bf3d5b37d3426ca5e1b95c5?s=128&d=identicon&r=PG&f=1", "display_name": "G&#252;nel Resulova", "link": "https://stackoverflow.com/users/9841845/g%c3%bcnel-resulova"}, "edited": false, "score": 0, "creation_date": 1570606503, "post_id": 58299112, "comment_id": 102961082, "body": "It&#39;s not problem links ,I think i get  main question that i can learn it with C.And Codes in MSDN which says C++ can compile with C compiler?"}, {"owner": {"reputation": 97299, "user_id": 41360, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/7bd2e50770e937761cfc3811a332bccc?s=128&d=identicon&r=PG", "display_name": "Vilx-", "link": "https://stackoverflow.com/users/41360/vilx"}, "reply_to_user": {"reputation": 91, "user_id": 9841845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6b120be5bf3d5b37d3426ca5e1b95c5?s=128&d=identicon&r=PG&f=1", "display_name": "G&#252;nel Resulova", "link": "https://stackoverflow.com/users/9841845/g%c3%bcnel-resulova"}, "edited": false, "score": 3, "creation_date": 1570606627, "post_id": 58299112, "comment_id": 102961170, "body": "C and C++ are closely related. Most C programs can be compiled as C++ with little to no changes."}], "tags": [], "owner": {"reputation": 97299, "user_id": 41360, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/7bd2e50770e937761cfc3811a332bccc?s=128&d=identicon&r=PG", "display_name": "Vilx-", "link": "https://stackoverflow.com/users/41360/vilx"}, "is_accepted": false, "score": 2, "last_activity_date": 1570606580, "last_edit_date": 1570606580, "creation_date": 1570606287, "answer_id": 58299112, "question_id": 58299053, "link": "https://stackoverflow.com/questions/58299053/can-i-learn-the-win32-api-without-c-with-only-c/58299112#58299112", "title": "Can I learn the Win32 API without C++ (with only C)?", "body": "<p>As far as I know - yes, it should be possible. The older Windows APIs were in fact C based and that's what I learned myself 20 years ago. They're quite straightforward. The newer ones are based on COM which is a bit more of a hassle to do in C, but by no means impossible. I remember reading some good tuorials on doing just that (COM in C), although I don't have any handy links to give out I'm afraid.</p>\n\n<p>That said, C and C++ are quite close. In fact, C++ was originally intended to be a superset of C - every valid C program was supposed to be a valid C++ program. Now, they didn't quite make that happen, but the differences are subtle and for the most part shouldn't bother you much. So you might as well continue writing code in C, using just a bit of C++ for interfacing with COM. The C++ compiler should accept this just fine.</p>\n"}], "owner": {"reputation": 91, "user_id": 9841845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6b120be5bf3d5b37d3426ca5e1b95c5?s=128&d=identicon&r=PG&f=1", "display_name": "G&#252;nel Resulova", "link": "https://stackoverflow.com/users/9841845/g%c3%bcnel-resulova"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 592, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1570627486, "creation_date": 1570606032, "last_edit_date": 1570627486, "question_id": 58299053, "link": "https://stackoverflow.com/questions/58299053/can-i-learn-the-win32-api-without-c-with-only-c", "title": "Can I learn the Win32 API without C++ (with only C)?", "body": "<p>I'm sorry about asking a weird question about this. I googled and looked up to here for a solution, but none of the answers satisfy what actually I want.</p>\n\n<p>I am really confused about this question. It's been almost 2 years that I have been studying for security based work. So, I have good knowledge about Python and C.</p>\n\n<p>The company that I referred gave me advise to learn about Win32. But when I begin  to learn about it, I encountered that <a href=\"https://docs.microsoft.com/en-us/windows/win32/learnwin32/introduction-to-windows-programming-in-c--\" rel=\"nofollow noreferrer\">Win32</a> is C++ based. But I don't want to waste time again to study it. Some blogs talk about Windows Programming in C/C++, and this makes more confusion for me as C and C++ are essentially separate from each other, I think.</p>\n\n<p>My questions are:</p>\n\n<ol>\n<li><p>Can I learn Win32 with only C?</p></li>\n<li><p>If no, then can I learn it over C?</p></li>\n<li><p>If yes, how deep do I have to go (so, all context of it or specific)?</p></li>\n</ol>\n\n<p>So again sorry. I'm really very confused at the moment that I don't know what I have to do.</p>\n"}, {"tags": ["c", "stack", "embedded", "codewarrior", "68hc08"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 3, "creation_date": 1570605209, "post_id": 58298660, "comment_id": 102960408, "body": "What is your platform? <code>log()</code> doesn&#39;t alter anything. Please <a href=\"https://stackoverflow.com/posts/58298660/edit\">edit</a> your question and show where <b>excatly</b> <code>x</code> is changed. Also post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and read this: <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>"}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 2, "creation_date": 1570605389, "post_id": 58298660, "comment_id": 102960525, "body": "While shortening your code is a good thing, it still needs to be a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 31255, "user_id": 28494, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/c14ME.gif?s=128&g=1", "display_name": "qrdl", "link": "https://stackoverflow.com/users/28494/qrdl"}, "edited": false, "score": 0, "creation_date": 1570606938, "post_id": 58298660, "comment_id": 102961318, "body": "Change <code>Temp</code> to <code>double</code>, because that&#39;s what <code>log()</code> returns"}, {"owner": {"reputation": 1, "user_id": 7834613, "user_type": "registered", "profile_image": "https://graph.facebook.com/10213139144973459/picture?type=large", "display_name": "Kotito Otitok", "link": "https://stackoverflow.com/users/7834613/kotito-otitok"}, "edited": false, "score": 1, "creation_date": 1570607926, "post_id": 58298660, "comment_id": 102961829, "body": "double is not a solution =("}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1570609715, "post_id": 58298660, "comment_id": 102962708, "body": "What happens if you remove <code>volatile</code>? And what is your platform?"}, {"owner": {"reputation": 1, "user_id": 7834613, "user_type": "registered", "profile_image": "https://graph.facebook.com/10213139144973459/picture?type=large", "display_name": "Kotito Otitok", "link": "https://stackoverflow.com/users/7834613/kotito-otitok"}, "edited": false, "score": 0, "creation_date": 1570611204, "post_id": 58298660, "comment_id": 102963510, "body": "nothing interesting. MCUinit doesn&#39;t take <code>x</code> correctly.  I&#39;m editing the previous code simplier"}, {"owner": {"reputation": 1, "user_id": 7834613, "user_type": "registered", "profile_image": "https://graph.facebook.com/10213139144973459/picture?type=large", "display_name": "Kotito Otitok", "link": "https://stackoverflow.com/users/7834613/kotito-otitok"}, "edited": false, "score": 1, "creation_date": 1570611668, "post_id": 58298660, "comment_id": 102963768, "body": "platform?  I&#39;m using codeWarrior Development Studio. The uController i&#39;m working on is MC9S08QE32"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7834613, "user_type": "registered", "profile_image": "https://graph.facebook.com/10213139144973459/picture?type=large", "display_name": "Kotito Otitok", "link": "https://stackoverflow.com/users/7834613/kotito-otitok"}, "edited": false, "score": 1, "creation_date": 1570622304, "post_id": 58302606, "comment_id": 102969497, "body": "maybe you are right, but I think this IDE does wierd thing =S.  If i calculate Temp = log(20); in which Temp is in location 0x102, How&#39;s possible that a variable in the location 0x0100 is also change? even a variable in location 0x04f7. =S"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 1, "user_id": 7834613, "user_type": "registered", "profile_image": "https://graph.facebook.com/10213139144973459/picture?type=large", "display_name": "Kotito Otitok", "link": "https://stackoverflow.com/users/7834613/kotito-otitok"}, "edited": false, "score": 1, "creation_date": 1570622693, "post_id": 58302606, "comment_id": 102969681, "body": "@KotitoOtitok Just observe the stack in the debugger. What&#39;s the stack start address?"}, {"owner": {"reputation": 96, "user_id": 8713143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b515663f5d70775ad31c7b8b426e932a?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/8713143/david"}, "edited": false, "score": 0, "creation_date": 1572873036, "post_id": 58302606, "comment_id": 103685027, "body": "Of course weird things happen when the stack overflows.  It is your responsibility as the programmer to understand your target, and its limitations, and to avoid going outside these limitations.  If you are using a tiny brain-dead microcontroller like the S08, avoid floating point as much as possible.  And if you can&#39;t avoid it completely, at least avoid doubles and transcendental functions like &quot;log&quot;."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 96, "user_id": 8713143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b515663f5d70775ad31c7b8b426e932a?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/8713143/david"}, "edited": false, "score": 0, "creation_date": 1572876394, "post_id": 58302606, "comment_id": 103686723, "body": "@David No, trust me on this: you cannot use floating point <i>at all</i> on S08QE32. It&#39;s simply too limited. It&#39;s bad enough to have Codewarrior link the floating point libs instead of the fixed point ones to kill off significant parts of the available RAM through .bss bloat. I know every little dirty detail of this tool chain since I have worked with S08 parts since they were new some 10 years ago and before that 68HC08."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 2, "last_activity_date": 1570620936, "last_edit_date": 1570620936, "creation_date": 1570618608, "answer_id": 58302606, "question_id": 58298660, "link": "https://stackoverflow.com/questions/58298660/global-variable-is-smashed/58302606#58302606", "title": "Global variable is smashed", "body": "<p>This is an obvious stack overflow. S08 is an incredibly resource-constrained 8 bit MCU. It is not a PC. It does not have a FPU. This means that you <em>cannot and should not use floating point arithmetic, ever</em>. Period. And avoid using 32 bit arithemtic in general.</p>\n\n<p>What happens when you roll up math.h is that Codewarrior injects a bombastic software floating point lib, completely slaughtering all the available memory and CPU resources in the whole MCU, turning your program into a useless mess. One single <code>log</code> call was apparently enough to kill the stack. I'm not surprised, you have some 100-200 bytes of stack per default. And when that happens, the stack overflows into the <code>.data</code>/<code>.bss</code> memory areas where the variables <code>x</code> and <code>Temp</code> are stored, destroying it while writing gibberish in those areas.</p>\n\n<p>If you actually <em>need</em> to use floating point calculations, then tough luck, you picked the wrong MCU. Should have picked a Cortex M4.</p>\n\n<p>In addition, you should always place the stack so that it grows (it's a down-counting SP) into harmless memory areas, not into the <code>.data</code>/<code>.bss</code> sections. Why Codewarrior doesn't do this as default is very strange. Having the stack grow into the register map isn't ideal either, but in case you aren't using all the timer peripherals around 0x70 then it's at least a less bad scenario than corrupting all variables in the program.</p>\n"}, {"comments": [{"owner": {"reputation": 96, "user_id": 8713143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b515663f5d70775ad31c7b8b426e932a?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/8713143/david"}, "edited": false, "score": 1, "creation_date": 1572872911, "post_id": 58316951, "comment_id": 103684971, "body": "When your stack overflows, you can no longer rely on your code doing anything sensible - <i>anything</i> can happen.  If you think making an array to &quot;catch the trash&quot; is helpful, it is purely a matter of luck combined with a lack of proper testing to see what else has gone wrong.  Do <i>not</i> treat it as a solution or workaround."}], "tags": [], "owner": {"reputation": 1, "user_id": 7834613, "user_type": "registered", "profile_image": "https://graph.facebook.com/10213139144973459/picture?type=large", "display_name": "Kotito Otitok", "link": "https://stackoverflow.com/users/7834613/kotito-otitok"}, "is_accepted": false, "score": -2, "last_activity_date": 1570689842, "creation_date": 1570689842, "answer_id": 58316951, "question_id": 58298660, "link": "https://stackoverflow.com/questions/58298660/global-variable-is-smashed/58316951#58316951", "title": "Global variable is smashed", "body": "<p>Somehow I came up with a possible solution. I guess it isn't the best solution due to my programming level but it works.</p>\n\n<p>As my program executed line <code>Temp=log(20)</code> its outcome was a bit mess because it was changing too many valours in the RAM with some kind of variables inside, and then log() was giving me its own valour and trash, smashing from its position 0x0100 and further. So what I did was to change 'float Temp'  in ' float Temp[10] and I gathered the real valour and trash in that array. So I just had to take the interested valour.</p>\n\n<p>Thanks for eveyone.\nI'm still here to heard new suggestion, anyway.</p>\n"}], "owner": {"reputation": 1, "user_id": 7834613, "user_type": "registered", "profile_image": "https://graph.facebook.com/10213139144973459/picture?type=large", "display_name": "Kotito Otitok", "link": "https://stackoverflow.com/users/7834613/kotito-otitok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "answer_count": 2, "score": -4, "last_activity_date": 1570689842, "creation_date": 1570604388, "last_edit_date": 1570617639, "question_id": 58298660, "link": "https://stackoverflow.com/questions/58298660/global-variable-is-smashed", "title": "Global variable is smashed", "body": "<p>I have the next code:</p>\n\n<pre><code>#include &lt;math.h&gt;\n\nint x;\nfloat Temp = 0;\n\nvoid main(){\n\nx = 2;\n\nfor(;;){\n   Temp=log(20);\n}\n}\n</code></pre>\n\n<p>I shortened my code to the important line. The problem I have is once x is declared as 2 and then I do log() function, this calculation alter to x variable and change it to a huge valour.</p>\n\n<p>Codewarrior (the IDE I'm using to), says that Temp variable is in the location 0x0102 and x variable is in 0x0108.</p>\n\n<p>I need x for a function in \"MCUinit.h\" so it's important that x variable isn't greater than 5, and codewarrior give like 5000 or even greater after doing log(whatever)</p>\n\n<p>How could I do so that log() don't alter others variables?</p>\n\n<p>thanks</p>\n\n<p>Before doing log() function.\n<a href=\"https://ibb.co/6ZHh6D0\" rel=\"nofollow noreferrer\">https://ibb.co/6ZHh6D0</a></p>\n\n<p>After doing log() function.\n<a href=\"https://ibb.co/Np99Sz4\" rel=\"nofollow noreferrer\">https://ibb.co/Np99Sz4</a></p>\n"}, {"tags": ["c", "memory", "scope", "shadowing"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1570604411, "post_id": 58298020, "comment_id": 102960010, "body": "Because it isn&#39;t the same variable. It is two different variables with the same name. Internally, it will use some manner of &quot;name mangling&quot; to keep them apart."}, {"owner": {"reputation": 74, "user_id": 12118994, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-YsfqmOfpJnw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdZrUTFcV7z_x8ZDm3hfsk_PCB1Og/photo.jpg?sz=128", "display_name": "Francisco Basadre", "link": "https://stackoverflow.com/users/12118994/francisco-basadre"}, "edited": false, "score": 0, "creation_date": 1570623959, "post_id": 58298020, "comment_id": 102970391, "body": "Take a look at: <a href=\"https://stackoverflow.com/questions/4151203/why-is-this-c-working-variables-with-the-same-name\" title=\"why is this c working variables with the same name\">stackoverflow.com/questions/4151203/&hellip;</a> Its duplicated."}, {"owner": {"reputation": 74, "user_id": 12118994, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-YsfqmOfpJnw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdZrUTFcV7z_x8ZDm3hfsk_PCB1Og/photo.jpg?sz=128", "display_name": "Francisco Basadre", "link": "https://stackoverflow.com/users/12118994/francisco-basadre"}, "edited": false, "score": 0, "creation_date": 1570624108, "post_id": 58298020, "comment_id": 102970465, "body": "Take a look at: <a href=\"https://stackoverflow.com/questions/4151203/why-is-this-c-working-variables-with-the-same-name\">https://stackoverflow.com/questions/4151203/why-is-this-c-wo&zwnj;&#8203;rking-variables-with&zwnj;&#8203;-the-same-name</a> It&#39;s duplicated."}], "answers": [{"tags": [], "owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "is_accepted": true, "score": 3, "last_activity_date": 1570601950, "creation_date": 1570601950, "answer_id": 58298060, "question_id": 58298020, "link": "https://stackoverflow.com/questions/58298020/why-did-the-compiler-assign-different-memory-address-to-the-same-variable-after/58298060#58298060", "title": "Why did the compiler assign different memory address to the same variable, after re-defining the variable?", "body": "<blockquote>\n  <p>Why is the compiler considering the initial defined variable i while\n  executing i&lt;5;i++ instruction and, not the re-defined variable i?\n  (after first iteration).</p>\n</blockquote>\n\n<p>Because the re-defined (shadowing) variable isn't in scope yet. If you remove the first definition, you get an \"identifier undeclared\" error. This also doesn't change after the first iteration of the loop as it is determined at compile time.</p>\n\n<blockquote>\n  <p>2) Why did compiler assign different memory address to same variable\n  identifier i?</p>\n</blockquote>\n\n<p>Even though you can't access the outer <code>int i</code> inside the loop as the second one shadows it, it still exists and therefore needs its own memory. It's not overwritten by the other <code>int i</code>. You can see that by putting a <code>printf(\"%d\\n\", i);</code> after the loop - it will print <code>5</code>, because that's the value of that <code>i</code> after loop.</p>\n\n<hr>\n\n<p>On another note, the <code>i++;</code> at the end of the loop has no effect because it affects the <code>i</code> inside the loop, which goes out of scope right after the <code>i++;</code>. This is unlike the <code>i++;</code> in the <code>for (i = 0; i &lt; 5; i++)</code>, which increases the outer <code>i</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "is_accepted": false, "score": 0, "last_activity_date": 1570621882, "last_edit_date": 1570621882, "creation_date": 1570621535, "answer_id": 58303406, "question_id": 58298020, "link": "https://stackoverflow.com/questions/58298020/why-did-the-compiler-assign-different-memory-address-to-the-same-variable-after/58303406#58303406", "title": "Why did the compiler assign different memory address to the same variable, after re-defining the variable?", "body": "<p>You've got two different variables both named <code>i</code>, so obviously the situation is going to be confusing!  For every <code>i</code> in the program, we have to ask: is this the \"outer\" <code>i</code>, or the \"inner\" <code>i</code>?</p>\n\n<p>Here's your program again, with the variables renamed for clarity:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main()\n{\n    int i1;\n    printf(\"%p\\n\",&amp;i1);\n    for (i1 = 0; i1 &lt; 5; i1++)\n    {\n        int i2 = 10;\n        printf(\"%d %p\\n\", i2,&amp;i2);\n        i2++;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>To your specific question, the reason the loop runs 5 times is that the loop control <code>for (i = 0; i &lt; 5; i++)</code> is unquestionably using the <em>outer</em> <code>i</code>.</p>\n"}], "owner": {"reputation": 2352, "user_id": 6284221, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HCIGJ.jpg?s=128&g=1", "display_name": "Krishna Kanth Yenumula", "link": "https://stackoverflow.com/users/6284221/krishna-kanth-yenumula"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 58298060, "answer_count": 2, "score": 1, "last_activity_date": 1570621882, "creation_date": 1570601689, "last_edit_date": 1570601980, "question_id": 58298020, "link": "https://stackoverflow.com/questions/58298020/why-did-the-compiler-assign-different-memory-address-to-the-same-variable-after", "title": "Why did the compiler assign different memory address to the same variable, after re-defining the variable?", "body": "<p>The code is as follows:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main()\n{\n    int i;\n    printf(\"%p\\n\",&amp;i);\n    for (i = 0; i &lt; 5; i++)\n    {\n        int i = 10;\n        printf(\"%d %p\\n\", i,&amp;i);\n        i++;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>First we defined a variable  <code>i</code> (just after main). Then at the start of <code>for</code> loop we defined the same variable <code>i</code> again. So, inside <code>for</code> loop, value of <code>i</code> is 10. The <code>for</code> loop must iterate only once, since <code>i&gt;5</code> after first iteration. But to my surprise the output is as follows:</p>\n\n<pre><code>0x7ffe8b799da0\n10 0x7ffe8b799da4\n10 0x7ffe8b799da4\n10 0x7ffe8b799da4\n10 0x7ffe8b799da4\n10 0x7ffe8b799da4\n</code></pre>\n\n<p>My questions are:<br>\n1) Why is the compiler considering the initial defined variable <code>i</code> while executing <code>i&lt;5;i++</code> instruction and, not the re-defined variable <code>i</code>? (after first iteration).</p>\n\n<p>2) Why did compiler assign different memory address to same variable identifier <code>i</code>?</p>\n"}, {"tags": ["c", "variables"], "comments": [{"owner": {"reputation": 2424, "user_id": 1075332, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6e5b529fc88265e99cdd38765dc49913?s=128&d=identicon&r=PG", "display_name": "Igor F.", "link": "https://stackoverflow.com/users/1075332/igor-f"}, "edited": false, "score": 0, "creation_date": 1570602053, "post_id": 58297991, "comment_id": 102958916, "body": "It&#39;s hard to tell for sure without any code and data provided, but, generally speaking, <code>fwrite()</code> is not writing immediately. Instead, for performance reasons, it is buffering your input and writing a whole batch at once. Have you considered that possibility?"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1570612429, "post_id": 58297991, "comment_id": 102964179, "body": "Files are data storage.  You&#39;re trying to use a file as a messaging channel.  That won&#39;t ever work well."}], "answers": [{"tags": [], "owner": {"reputation": 1115, "user_id": 10856970, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Q3mai-ypFws/AAAAAAAAAAI/AAAAAAAAAIg/GUzS4DSGL-o/photo.jpg?sz=128", "display_name": "Shivendra Pratap Kushwaha", "link": "https://stackoverflow.com/users/10856970/shivendra-pratap-kushwaha"}, "is_accepted": false, "score": 0, "last_activity_date": 1570602760, "creation_date": 1570602760, "answer_id": 58298272, "question_id": 58297991, "link": "https://stackoverflow.com/questions/58297991/how-to-restrict-access-on-a-file-from-being-used-write-read-by-another-process/58298272#58298272", "title": "How to restrict access on a FILE from being used (write/read) by another process or function in C?", "body": "<p>It may happen if you are using the same file descriptor for opening and closing the file. You can overcome the problem by putting a 'MUTEX' lock on the file descriptor while reading or writing on the file. </p>\n\n<p>Hence, if you are reading the file there will be a lock which will not allow to write in the file simultaneously and vice versa. </p>\n\n<blockquote>\n  <p>NOTE : Please note that you may have to compromise with the performance of the program. </p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 2352, "user_id": 6284221, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HCIGJ.jpg?s=128&g=1", "display_name": "Krishna Kanth Yenumula", "link": "https://stackoverflow.com/users/6284221/krishna-kanth-yenumula"}, "is_accepted": false, "score": 0, "last_activity_date": 1570606765, "last_edit_date": 1570606765, "creation_date": 1570606294, "answer_id": 58299113, "question_id": 58297991, "link": "https://stackoverflow.com/questions/58297991/how-to-restrict-access-on-a-file-from-being-used-write-read-by-another-process/58299113#58299113", "title": "How to restrict access on a FILE from being used (write/read) by another process or function in C?", "body": "<p>In order to restrict access to a file, we need to lock the file. Locking a file can be done using two ways:<br>\n1) <code>flock</code><br>\n2) <code>fcntl</code></p>\n\n<p>Refer this link:<a href=\"https://gavv.github.io/articles/file-locks/\" rel=\"nofollow noreferrer\">https://gavv.github.io/articles/file-locks/</a></p>\n"}], "owner": {"reputation": 35, "user_id": 11800705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36acc53ad4ed270f35a916fc6dc7cd9b?s=128&d=identicon&r=PG&f=1", "display_name": "diegz25", "link": "https://stackoverflow.com/users/11800705/diegz25"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1570606765, "creation_date": 1570601540, "question_id": 58297991, "link": "https://stackoverflow.com/questions/58297991/how-to-restrict-access-on-a-file-from-being-used-write-read-by-another-process", "title": "How to restrict access on a FILE from being used (write/read) by another process or function in C?", "body": "<p>I'm currently having a problem updating the data written on a file in C. I created a function called <strong>preview_data()</strong> in loop that previews all the files written on <strong>INFOS.DAT</strong> constantly. I also created a function called <strong>update_data()</strong> that modifies <strong>INFOS.DAT</strong> if there's a new data available. I'm using <strong>fwrite()</strong> and <strong>fread()</strong> to modify the file.</p>\n\n<p>However, I noticed that the changes made by <strong>update_data()</strong> is not taking effect. I suspect that this is because <strong>INFOS.DAT</strong> is being accessed every second by <strong>preview_data()</strong>.</p>\n\n<p>Now with my question, how to restrict a file from being opened if it is being accessed by another process? Are there any way to know it so that I can create a break condition on my program? Thank you.</p>\n"}, {"tags": ["c", "realloc"], "comments": [{"owner": {"reputation": 4073, "user_id": 11498773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79d317da8c76af3f45f63986e9783740?s=128&d=identicon&r=PG&f=1", "display_name": "Mihir", "link": "https://stackoverflow.com/users/11498773/mihir"}, "edited": false, "score": 0, "creation_date": 1570595726, "post_id": 58297107, "comment_id": 102957195, "body": "I hope you are not passing an actual array, because realloc is not meant to be used on arrays. Its for dynamic memory allocation while trying to retain the same base address."}, {"owner": {"reputation": 2682, "user_id": 4848801, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/700003af13fc16520eeff211d66e2c84?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Schaefer", "link": "https://stackoverflow.com/users/4848801/ryan-schaefer"}, "reply_to_user": {"reputation": 4073, "user_id": 11498773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79d317da8c76af3f45f63986e9783740?s=128&d=identicon&r=PG&f=1", "display_name": "Mihir", "link": "https://stackoverflow.com/users/11498773/mihir"}, "edited": false, "score": 0, "creation_date": 1570595971, "post_id": 58297107, "comment_id": 102957241, "body": "It\u2019s a \u201cmalloc\u201ded array pointer @Mihir"}, {"owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "edited": false, "score": 2, "creation_date": 1570596061, "post_id": 58297107, "comment_id": 102957258, "body": "Please create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> which reproduces the issue that you have."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 1, "creation_date": 1570596549, "post_id": 58297107, "comment_id": 102957364, "body": "You&#39;re making changes locally to <code>arr</code> which don&#39;t get reflected in the calling function."}, {"owner": {"reputation": 2682, "user_id": 4848801, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/700003af13fc16520eeff211d66e2c84?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Schaefer", "link": "https://stackoverflow.com/users/4848801/ryan-schaefer"}, "reply_to_user": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1570597378, "post_id": 58297107, "comment_id": 102957559, "body": "@dbush I pass in a pointer to arr not an arr. Therefore the changes get reflected when I realloc the pointer."}, {"owner": {"reputation": 2682, "user_id": 4848801, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/700003af13fc16520eeff211d66e2c84?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Schaefer", "link": "https://stackoverflow.com/users/4848801/ryan-schaefer"}, "reply_to_user": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "edited": false, "score": 0, "creation_date": 1570597409, "post_id": 58297107, "comment_id": 102957570, "body": "@RishikeshRaje I figured you could use it in a main you made, but I provided one for you."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1570601112, "post_id": 58297107, "comment_id": 102958589, "body": "&quot;<i>I have an array which is NULL terminated.</i>&quot; initially you have not."}], "answers": [{"comments": [{"owner": {"reputation": 2682, "user_id": 4848801, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/700003af13fc16520eeff211d66e2c84?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Schaefer", "link": "https://stackoverflow.com/users/4848801/ryan-schaefer"}, "edited": false, "score": 0, "creation_date": 1570597537, "post_id": 58297283, "comment_id": 102957599, "body": "its an array of pointers... would it make sense for it to be 1? Am I doing something wrong?"}], "tags": [], "owner": {"reputation": 119, "user_id": 7458049, "user_type": "registered", "profile_image": "https://graph.facebook.com/1588840764489336/picture?type=large", "display_name": "0x6261627564", "link": "https://stackoverflow.com/users/7458049/0x6261627564"}, "is_accepted": false, "score": 0, "last_activity_date": 1570596863, "creation_date": 1570596863, "answer_id": 58297283, "question_id": 58297107, "link": "https://stackoverflow.com/questions/58297107/realloc-only-works-twice/58297283#58297283", "title": "Realloc only works twice", "body": "<p>I think you should dereference the arr before you use in realloc. Another observation; the sizeof(char*) is usually 4 in 32 bit architecture and 8 in 64 bit instead of 1.</p>\n"}, {"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1570598476, "post_id": 58297425, "comment_id": 102957815, "body": "The <code>strlen(&quot;string&quot;) + 1</code> part is correct.  I&#39;m not sure I follow the rest, but the key point is that the <code>strcpy()</code> operations write outside the bounds of the allocated arrays."}], "tags": [], "owner": {"reputation": 1031, "user_id": 1044434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e08b02af95e4fdb59a3c814c5164f668?s=128&d=identicon&r=PG", "display_name": "Miguel Garcia", "link": "https://stackoverflow.com/users/1044434/miguel-garcia"}, "is_accepted": false, "score": 0, "last_activity_date": 1570598422, "last_edit_date": 1570598422, "creation_date": 1570597912, "answer_id": 58297425, "question_id": 58297107, "link": "https://stackoverflow.com/questions/58297107/realloc-only-works-twice/58297425#58297425", "title": "Realloc only works twice", "body": "<p>For the general case I think you only need to  call realloc with length +1</p>\n\n<pre><code>arr = realloc(arr, sizeof(char*) * (length+1));\n</code></pre>\n\n<p>This is because you already had space for the NULL terminating pointer from the prior state. With the code you are proposing what's happening is something like this</p>\n\n<p>// state prior to realloc</p>\n\n<p>String String NULL</p>\n\n<p>// apparr() call</p>\n\n<p>String String NULL undefined undefined // realloc</p>\n\n<p>String String String undefined undefined // arr[length] = line;</p>\n\n<p>String String String NULL undefined // arr[length+1] = NULL;</p>\n\n<p>The first time it will work (leaving a dangling allocated node at the end) but the second time it can crash in multiple ways due to the extra allocation.</p>\n"}, {"comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1570601296, "post_id": 58297581, "comment_id": 102958651, "body": "This <code>char** hist = malloc(sizeof(char**));</code> has to be <code>char** hist = malloc(sizeof (char*));</code> or even nicer <code>char** hist = malloc(sizeof *hist);</code>."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1570601605, "post_id": 58297581, "comment_id": 102958761, "body": "Also those to assignments <code>arr[length] = line;     arr[length+1] = NULL;</code> refer to invalid memory, as the relocation already happend."}, {"owner": {"reputation": 2682, "user_id": 4848801, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/700003af13fc16520eeff211d66e2c84?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Schaefer", "link": "https://stackoverflow.com/users/4848801/ryan-schaefer"}, "edited": false, "score": 0, "creation_date": 1570623197, "post_id": 58297581, "comment_id": 102969978, "body": "\u201cThe function apphist only changes the value of arr locally.\u201d This is proved wrong by the behavior of main."}, {"owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "reply_to_user": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "edited": false, "score": 1, "creation_date": 1570626757, "post_id": 58297581, "comment_id": 102972022, "body": "@thebusybee <code>char ** arr</code> is a local variable in the function. Changing the value <code>arr</code> itself will not reflect in the main function"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1570683079, "post_id": 58297581, "comment_id": 102991596, "body": "The code in 4 is still broken for the same reason as mention in my 2nd comment (where &quot;<i>relocation</i> should read &quot;reallocation&quot;)."}], "tags": [], "owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "is_accepted": true, "score": 2, "last_activity_date": 1570683223, "last_edit_date": 1570683223, "creation_date": 1570598820, "answer_id": 58297581, "question_id": 58297107, "link": "https://stackoverflow.com/questions/58297107/realloc-only-works-twice/58297581#58297581", "title": "Realloc only works twice", "body": "<ol>\n<li><p>In the main function you need to set the first element of <code>hist</code> as <code>NULL</code> as you are checking it in the function <code>apphist</code></p>\n\n<pre><code>char** hist = malloc(sizeof(char*));\n*hist = NULL;\n</code></pre></li>\n<li><p>The function <code>apphist</code> only changes the value of <code>arr</code> locally. To reflect the changes in the main function, you need to pass a pointer to a <code>arr</code> i.e. a 3D pointer <code>char ***arr</code></p></li>\n<li><p>You should always check the result of <code>realloc</code> and perform actions on failure.</p></li>\n</ol>\n\n<p>Code for the function is below.</p>\n\n<pre><code>void apparr(char*** arr2, char* line) {\n    int length = 0;\n    char **arr = *arr2;\n    while(arr[length] != NULL) {\n        length++;\n    }\n    arr = realloc(arr, sizeof(char*) * (length+2));\n    if (arr == NULL) {\n        exit(1); // handle error \n    }        \n    *arr2 = arr;   \n    arr[length] = line;\n    arr[length+1] = NULL;\n}\n</code></pre>\n\n<ol start=\"4\">\n<li>Alternatively, you can return a pointer to a pointer to char and update the value in main.</li>\n</ol>\n\n<pre><code>char** apparr(char** arr, char* line) {\n    int length = 0;\n    char **temp;\n    while(arr[length] != NULL) {\n        length++;\n    }\n    temp = realloc(arr, sizeof(char*) * (length+2));\n    if (temp == NULL) {\n        exit(1); // handle error \n    }\n    arr = temp;\n    arr[length] = line;\n    arr[length+1] = NULL;\n    return (arr);\n}    \n\n//in main\nhist = apphist(hist, linep1);\nhist = apphist(hist, linep2);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2682, "user_id": 4848801, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/700003af13fc16520eeff211d66e2c84?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Schaefer", "link": "https://stackoverflow.com/users/4848801/ryan-schaefer"}, "edited": false, "score": 0, "creation_date": 1570622973, "post_id": 58297994, "comment_id": 102969856, "body": "This is taken from a larger peice of code. I added the mcve because people were upset and couldn\u2019t think of how to use the original code themselves. I use argc and argv in that larger price of code. I cast for clarity. Just please think about how the program I am using this in could be larger than what is shown to you. What I show to you is for clarity not completeness."}, {"owner": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "reply_to_user": {"reputation": 2682, "user_id": 4848801, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/700003af13fc16520eeff211d66e2c84?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Schaefer", "link": "https://stackoverflow.com/users/4848801/ryan-schaefer"}, "edited": false, "score": 0, "creation_date": 1570626337, "post_id": 58297994, "comment_id": 102971765, "body": "Most sources shown here are just excerpts. No offend, but it&#39;s you who needs help, not us. ;-) So, please, take the time to prepare a clear example, instead of letting everyone have to find out what is missing and add that. It&#39;s much more efficient if the one expert on the code (that&#39;s you) invest a little time than multiple others each more time."}, {"owner": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "reply_to_user": {"reputation": 2682, "user_id": 4848801, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/700003af13fc16520eeff211d66e2c84?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Schaefer", "link": "https://stackoverflow.com/users/4848801/ryan-schaefer"}, "edited": false, "score": 0, "creation_date": 1570626508, "post_id": 58297994, "comment_id": 102971862, "body": "About the &quot;cast for clarity&quot;: What is needed to be clarified? A variable of type <code>char *</code> receives a pointer to memory that is allocated as some number of <code>char</code>. No need for an extra cast."}], "tags": [], "owner": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "is_accepted": false, "score": 0, "last_activity_date": 1570630311, "last_edit_date": 1570630311, "creation_date": 1570601557, "answer_id": 58297994, "question_id": 58297107, "link": "https://stackoverflow.com/questions/58297107/realloc-only-works-twice/58297994#58297994", "title": "Realloc only works twice", "body": "<p>You have several errors in your code:</p>\n\n<ol>\n<li><p><strong>This is your main error.</strong> You don't replace the value in the given pointer. It's correct to use a pointer to the pointer, but you need to dereference it. For this you need to pass the pointer to <code>hist</code> and dereference it at the re-allocation:</p>\n\n<pre><code>*arr = realloc(*arr, sizeof(char*) * (length + 2));\n</code></pre></li>\n<li><p>The list of pointers is not initialized, after the first allocation you need to set the first pointer:</p>\n\n<pre><code>hist[0] = NULL;\n</code></pre></li>\n<li><p>The allocations for your test strings are 1 off:</p>\n\n<pre><code>linep1 = malloc((strlen(\"test\") + 1) * sizeof(char));\nlinep2 = malloc((strlen(\"test2\") + 1) * sizeof(char));\nlinep3 = malloc((strlen(\"test3\") + 1) * sizeof(char));\nlinep4 = malloc((strlen(\"test4\") + 1) * sizeof(char));\n</code></pre></li>\n</ol>\n\n<p>Additional notes:</p>\n\n<ul>\n<li>The includes are missing for a complete <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducable example</a>.</li>\n<li>The name <code>apparr()</code> is wrong, you call <code>apphist()</code> in <code>main()</code>.</li>\n<li>Check the return values of any allocation for NULL, meaning that the allocation failed.</li>\n<li>You don't use <code>argc</code> and <code>argv</code>, so write <code>int main(void)</code></li>\n<li>The first allocation has the \"wrong\" type, but both are pointers, so it's the same size: <code>char** hist = malloc(sizeof(char*));</code></li>\n<li>There is no need to cast pointers returned by <code>malloc()</code> as it returns a pointer to <code>void</code>. Pointers to <code>void</code> and other pointers can be assigned back and forth without casts.</li>\n<li>You can replace the <code>malloc()</code>/<code>strcpy()</code> pairs with <code>strdup()</code>.</li>\n<li>You can even call <code>apphist()</code> with the string as \"immediate\" value like this: <code>apphist(hist, \"test\");</code></li>\n<li><code>main()</code> should return an <code>int</code>, <code>EXIT_SUCCESS</code> is the right value.</li>\n<li>You can put some <code>const</code> at the parameters and declarations to make things safer. But think about <em>what</em> is constant.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "is_accepted": false, "score": 0, "last_activity_date": 1570603905, "creation_date": 1570603905, "answer_id": 58298541, "question_id": 58297107, "link": "https://stackoverflow.com/questions/58297107/realloc-only-works-twice/58298541#58298541", "title": "Realloc only works twice", "body": "<p>All errors and may pitfalls have been mentioned by others already.</p>\n\n<p>Below find a more general implementation of the append-element-to-array function:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;errno.h&gt; /* for EINVAL */\n\nint apparr(char *** parr, char * line) {\n  size_t length = 0;\n\n  if (NULL == *parr) {\n    if (NULL != line) {\n      errno = EINVAL;\n      return -1;\n    }\n  } else {\n    // find the length of the array\n    while (NULL != (*parr)[length]) {\n      ++length;\n    }\n  }\n\n  {\n    // realloc with 2 extra spaces (1 for line, 1 for NULL)\n    void * pv = realloc(*parr, (length+1) * sizeof **parr);\n    if (NULL == pv) {\n      return -1; /* By convention -1 indicates failure. */\n    }\n\n    *parr = pv;\n  }\n\n  (*parr)[length] = line;\n  if (0 &lt; length) {\n    (*parr)[length + 1] = NULL;\n  }\n\n  return 0; /* By convention 0 indicates success. */\n}\n</code></pre>\n\n<p>And use it like this:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\nint apparr(char *** parr, char * line) {\n\nint main(int argc, char** argv) {\n  char ** hist = NULL;\n  char * linep1;\n  char * linep2;\n  char * linep3;\n  char * linep4;\n\n  if (-1 == apparr(&amp;hist, NULL)) {\n    perror(\"apphist() failed initially\\n\");\n    exit(EXIT_FAILURE);\n  }\n\n  linep1 = malloc(strlen(\"test\") + 1);\n  linep2 = malloc(strlen(\"test2\") + 1); /* +1 for the c-string's 0-termination; sizeof (char) is 1 by definition */\n  linep3 = malloc(strlen(\"test3\") + 1);\n  linep4 = malloc(strlen(\"test4\") + 1);\n\n  strcpy(linep1, \"test\");\n  strcpy(linep2, \"test2\");\n  strcpy(linep3, \"test3\");\n  strcpy(linep4, \"test4\");\n\n  if (-1 == apphist(&amp;hist, linep1)) {\n    perror(\"apphist() failed for line 1\\n\");\n    exit(EXIT_FAILURE);\n  }\n\n  if (-1 == apphist(&amp;hist, linep2) {\n    perror(\"apphist() failed for line 2\\n\");\n    exit(EXIT_FAILURE);\n  }\n\n  if (-1 == apphist(&amp;hist, linep3) {\n    perror(\"apphist() failed for line 3\\n\");\n    exit(EXIT_FAILURE);\n  }\n\n  if (-1 == apphist(&amp;hist, linep4)  {\n    perror(\"apphist() failed for line 4\\n\");\n    exit(EXIT_FAILURE);\n  }\n\n  {\n    size_t x = 0;\n    while (hist[x] != NULL) {\n      printf(\"%s\\n\", hist[x]);\n      ++x;\n    }\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 2682, "user_id": 4848801, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/700003af13fc16520eeff211d66e2c84?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Schaefer", "link": "https://stackoverflow.com/users/4848801/ryan-schaefer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 250, "favorite_count": 0, "accepted_answer_id": 58297581, "answer_count": 5, "score": 0, "last_activity_date": 1570683223, "creation_date": 1570595501, "last_edit_date": 1570597330, "question_id": 58297107, "link": "https://stackoverflow.com/questions/58297107/realloc-only-works-twice", "title": "Realloc only works twice", "body": "<p>For some reason, when I realloc an array to append an item to the array, it only works twice before segfaulting. The segfault occurs when I try to print the strings inside of the array. I currently have an array which is <code>NULL</code> terminated. </p>\n\n<pre><code>void apparr(char** arr, char* line) {\n    int length = 0;\n    // find the length of the array\n    while(arr[length] != NULL) {\n        length++;\n    }\n    // realloc with 2 extra spaces (1 for line, 1 for NULL)\n    arr = realloc(arr, sizeof(char*) * (length+2));\n    // set last element (which was NULL) to line\n    arr[length] = line;\n    // set the NULL terminator\n    arr[length+1] = NULL;\n}\n</code></pre>\n\n<p>I have no clue where I could be going wrong here, my only guess would be with how I am calling realloc. However, I would understand that not working for 1 resize, but I have no clue why this works for two resizes then segfaults when I am printing back the array.</p>\n\n<p>How it could be used in main:</p>\n\n<pre><code>int main(int argc, char** argv){\nchar** hist = malloc(sizeof(char**));\nchar* linep1;\nchar* linep2;\nchar* linep3;\nchar* linep4;\nlinep1 = (char*)malloc(strlen(\"test\")*sizeof(char));\nlinep2 = (char*)malloc(strlen(\"test2\")*sizeof(char));\nlinep3 = (char*)malloc(strlen(\"test3\")*sizeof(char));\nlinep4 = (char*)malloc(strlen(\"test4\")*sizeof(char));   \nstrcpy(linep1, \"test\");\nstrcpy(linep2, \"test2\");\nstrcpy(linep3, \"test3\");\nstrcpy(linep4, \"test4\");\napphist(hist, linep1);\napphist(hist, linep2);\n//apphist(hist, linep3); //uncommenting this line causes nothing to be printed\n//apphist(hist, linep4); //uncommenting this line causes only test4 to be printed\nint x = 0;\nwhile (hist[x] != NULL) {\n    printf(\"%s\\n\", hist[x]);\n    x++;\n}\n}\n</code></pre>\n"}, {"tags": ["c", "shell", "signals", "sigint", "sigaction"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1570599284, "post_id": 58297089, "comment_id": 102958029, "body": "There are more arguments to <code>sigaction()</code> than you show. You can&#39;t call functions in C outside of another function \u2014 so it isn&#39;t clear how you&#39;d call it &#39;globally&#39;. If you make the call in <code>main()</code>, it will be in effect until you execute a different setting, or exit the program. You might be better off putting the call to <code>sigaction()</code> in its own function. You&#39;d have to decide what that function does, though, and you might be able to use it to re-enable interrupts for the programs that are run, though if you&#39;ve set a handler function, when you <code>execvp()</code> a new program, the default takes over."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 3, "creation_date": 1570599618, "post_id": 58297089, "comment_id": 102958135, "body": "The <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/kill.html\" rel=\"nofollow noreferrer\"><code>kill()</code></a> function can take a positive PID (in which case it sends the signal to that one child), or a 0 PID (in which case it sends the signal to all processes in the current process&#39;s process group), or a PID of -1 (in which case it sends the signal to all processes the user/process has permission to send the signal to) or a negative PID (in which case it sends the signal to all process in the process group with the absolute value of the PID).  Does your shell set process groups for its children?"}], "owner": {"reputation": 197, "user_id": 11094853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c26974b35c81e0675ca4416101ebf045?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/11094853/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1570600200, "creation_date": 1570595371, "last_edit_date": 1570600200, "question_id": 58297089, "link": "https://stackoverflow.com/questions/58297089/what-should-i-put-in-a-signal-handler-to-make-it-terminate-all-processes-except", "title": "What should I put in a signal handler to make it terminate all processes except the parent?", "body": "<p>I'm making a basic shell in C and I want to catch Ctrl+C so that it doesn't kill my program, but instead kills all processes running under my program. I don't know what code to set put in my signal handler to get this effect.</p>\n\n<p>Furthermore, once I have the code to catch SIGINT and get it to not kill my process, would I put it globally in my program, or would I put it in it's own function which I run in main at some point, or would I put it where the processes are created and executed function <code>int execCmd(char **cmds){...}</code> for example?</p>\n\n<p>Many thanks in advance for any help and advice.</p>\n"}, {"tags": ["c++", "c", "linux", "segmentation-fault", "openmpi"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 4, "creation_date": 1570594740, "post_id": 58296806, "comment_id": 102957005, "body": "When you have a bug and the code is too long to find it, back up the code and start removing pieces until all that is left is the bug. Usually you con&#39;t have to remove everything, just enough to bring the noise down to a level where you can spot the bug through it."}, {"owner": {"reputation": 21, "user_id": 8719396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/719185b320dc375b1fe9981f6f97c272?s=128&d=identicon&r=PG&f=1", "display_name": "MeSure", "link": "https://stackoverflow.com/users/8719396/mesure"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1570598902, "post_id": 58296806, "comment_id": 102957926, "body": "Thanks! it is a good idea. I will do it."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 8719396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/719185b320dc375b1fe9981f6f97c272?s=128&d=identicon&r=PG&f=1", "display_name": "MeSure", "link": "https://stackoverflow.com/users/8719396/mesure"}, "edited": false, "score": 0, "creation_date": 1570689244, "post_id": 58305373, "comment_id": 102993549, "body": "Thanks a lot! But if I use <code>disp[i] -= disp[0]</code>, segmentation fault still occurred. If I still use <code>long int base</code> as an intermediate variable, it can work."}, {"owner": {"reputation": 2485, "user_id": 11282404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1e3829cb91cc6be3541a37381b5ff21?s=128&d=identicon&r=PG&f=1", "display_name": "jpmarinier", "link": "https://stackoverflow.com/users/11282404/jpmarinier"}, "reply_to_user": {"reputation": 21, "user_id": 8719396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/719185b320dc375b1fe9981f6f97c272?s=128&d=identicon&r=PG&f=1", "display_name": "MeSure", "link": "https://stackoverflow.com/users/8719396/mesure"}, "edited": false, "score": 0, "creation_date": 1570697841, "post_id": 58305373, "comment_id": 102997593, "body": "@MeSure - happy that it helped. And yes you&#39;re right, my version of the loop has a logic error, because disp[0] is immediately set to zero and so the remaining offsets remain uncorrected. I wrote that bit of code at the wrong hour :-) I will have to correct the answer accordingly."}, {"owner": {"reputation": 21, "user_id": 8719396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/719185b320dc375b1fe9981f6f97c272?s=128&d=identicon&r=PG&f=1", "display_name": "MeSure", "link": "https://stackoverflow.com/users/8719396/mesure"}, "edited": false, "score": 0, "creation_date": 1570701574, "post_id": 58305373, "comment_id": 102999684, "body": "Thanks. And in fact, I tested it, <code>blocklen[]</code> should be set as <code>long int</code>, too. And though this error is fixed, another problem occurred, that seems not to belong to MPI problems. Thanks."}], "tags": [], "owner": {"reputation": 2485, "user_id": 11282404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1e3829cb91cc6be3541a37381b5ff21?s=128&d=identicon&r=PG&f=1", "display_name": "jpmarinier", "link": "https://stackoverflow.com/users/11282404/jpmarinier"}, "is_accepted": false, "score": 1, "last_activity_date": 1570698033, "last_edit_date": 1570698033, "creation_date": 1570627919, "answer_id": 58305373, "question_id": 58296806, "link": "https://stackoverflow.com/questions/58296806/signal-segmentation-fault-11-when-using-openmpi/58305373#58305373", "title": "Signal: Segmentation fault (11) when using Openmpi", "body": "<p>Assuming that, like most MPI users, you are running your code on a 64 bits machine: </p>\n\n<p>MPI_AInt must be able to contain a pointer, hence have a size of 64 bits. In function <code>make_fnames_type()</code>, to substract the base address of the struct from the addresses of its various fields, you are storing the base address into an <code>int</code> variable, appropriately named <code>base</code>. But that int variable is a 32 bits quantity. You might be mutilating the pointer value.</p>\n\n<p>The base address of your struct is a 64 bits quantity. You should store it only into another 64 bits type such as unsigned long int or uint64_t. The statement <code>base = disp[0];</code> is likely to be a <strong>narrowing</strong> conversion and is any case not portable. You should check the sizeof values involved.</p>\n\n<p><strong>Side note:</strong>  In C++, unlike in C you don't need to declare all function variables beforehand. You can declare variables as you need them. So for example there is no reason to <em>declare</em> int variable <code>base</code> 10 source lines before <em>defining</em> its value. So you can have <code>int base = disp[0];</code> all in one place, and then the narrowing mishap is much easier to detect. Even better, you can just write: <code>auto base = disp[0];</code> and then no narrowing can take place.</p>\n\n<p>A possibility would be to change the loop like this:</p>\n\n<pre><code>    long int base = disp[0];\n    for (i = 0; i &lt; 8; i++) {\n        type[i] = MPI_CHAR;\n        blocklen[i] = MAXSTR;\n        disp[i] -= base;\n        /* changed %d into %ld below */\n        printf(\"disp[i] = %ld  blocklen[i] = %d\\n\",\n            (long int)disp[i], blocklen[i]);\n    }\n</code></pre>\n\n<p>You can also check whether the memory size of the MPI custom type is what you expect thru the <code>MPI_Type_Size()</code> function.</p>\n\n<p><strong>General remark</strong>: all MPI functions in C/C++ return an integer error code. You skip checking these error codes at your peril. It is quite possible that some MPI function has returned an error code well before the call to MPI_Bcast().</p>\n"}], "owner": {"reputation": 21, "user_id": 8719396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/719185b320dc375b1fe9981f6f97c272?s=128&d=identicon&r=PG&f=1", "display_name": "MeSure", "link": "https://stackoverflow.com/users/8719396/mesure"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 908, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1570698033, "creation_date": 1570593002, "last_edit_date": 1570599915, "question_id": 58296806, "link": "https://stackoverflow.com/questions/58296806/signal-segmentation-fault-11-when-using-openmpi", "title": "Signal: Segmentation fault (11) when using Openmpi", "body": "<p>I am using a CFD code, it is based on Opnempi. When I use only one core to run it, there are no problems. But when I use more cores to run it, I got errors like this:</p>\n\n<blockquote>\n  <p>[DESKTOP-7D2F3AN:03839]  Process received signal</p>\n  \n  <p>[DESKTOP-7D2F3AN:03839] Signal: Segmentation fault (11)</p>\n  \n  <p>[DESKTOP-7D2F3AN:03839] Signal code:  (128)</p>\n  \n  <p>[DESKTOP-7D2F3AN:03839] Failing at address: (nil)</p>\n  \n  <p>[DESKTOP-7D2F3AN:03839] [ 0]\n  /lib/x86_64-linux-gnu/libpthread.so.0(+0x12890) [0x7f405efe2890]</p>\n  \n  <p>[DESKTOP-7D2F3AN:03839] [ 1]\n  /lib/x86_64-linux-gnu/libc.so.6(+0x18ec3c) [0x7f405ed5ec3c]</p>\n  \n  <p>[DESKTOP-7D2F3AN:03839] [ 2]\n  /usr/local/lib/libmpi.so.0(ompi_convertor_pack+0x196) [0x7f405f462176]</p>\n  \n  <p>[DESKTOP-7D2F3AN:03839] [ 3]\n  /usr/local/lib/openmpi/mca_pml_ob1.so(+0x10851) [0x7f405b780851]</p>\n  \n  <p>[DESKTOP-7D2F3AN:03839] [ 4]\n  /usr/local/lib/openmpi/mca_pml_ob1.so(+0x53ee) [0x7f405b7753ee]</p>\n  \n  <p>[DESKTOP-7D2F3AN:03839] [ 5]\n  /usr/local/lib/openmpi/mca_coll_tuned.so(+0xb2ff) [0x7f4059e2b2ff]</p>\n  \n  <p>[DESKTOP-7D2F3AN:03839] [ 6]\n  /usr/local/lib/openmpi/mca_coll_tuned.so(+0xbaf1) [0x7f4059e2baf1]</p>\n  \n  <p>[DESKTOP-7D2F3AN:03839] [ 7]\n  /usr/local/lib/openmpi/mca_coll_tuned.so(+0x20ab) [0x7f4059e220ab]</p>\n  \n  <p>[DESKTOP-7D2F3AN:03839] [ 8]\n  /usr/local/lib/openmpi/mca_coll_sync.so(+0x1377) [0x7f405a041377]</p>\n  \n  <p>[DESKTOP-7D2F3AN:03839] [ 9]\n  /usr/local/lib/libmpi.so.0(MPI_Bcast+0x11d) [0x7f405f46974d]</p>\n  \n  <p>[DESKTOP-7D2F3AN:03839] [10] ./cgles(com_dist_param+0x4b)\n  [0x7f4060236972]</p>\n  \n  <p>[DESKTOP-7D2F3AN:03839] [11] ./cgles(main+0x377) [0x7f4060233377]</p>\n  \n  <p>[DESKTOP-7D2F3AN:03839] [12]\n  /lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xe7)\n  [0x7f405ebf1b97]</p>\n  \n  <p>[DESKTOP-7D2F3AN:03839] [13] ./cgles(_start+0x2a) [0x7f406022254a]</p>\n  \n  <p>[DESKTOP-7D2F3AN:03839]  End of error message </p>\n  \n  <p>mpirun noticed that process rank 0 with PID 3839 on node\n  DESKTOP-7D2F3AN exited on signal 11 (Segmentation fault).</p>\n</blockquote>\n\n<p>I don't know why. The code is too long. The main part is like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;string.h&gt;\n#include &lt;signal.h&gt;\n\n#include \"param.h\"\n#include \"block.h\"\n#include \"q.h\"\n#include \"map.h\"\n#include \"comms.h\"\n#include \"util.h\"\n#include \"dat.h\"\n#include \"timing.h\"\n#include \"sgm.h\"\n#include \"error.h\"\n#include \"init.h\"\n#include \"mom.h\"\n#include \"inst.h\"\n#include \"pcg.h\"\n#include \"bicgstab.h\"\n#include \"ibm.h\"\n#include \"hist.h\"\n#include \"pcg_ext.h\"\n#include \"dibm.h\"\n/* using BLAS library for better performance */\n#ifdef BLAS \n#include &lt;essl.h&gt;\n#endif\n\n/* local prototypes */\nvoid cmdopts(int *, char ***);\nvoid mybasename(char *, char *);\nvoid glob_output(void);\nvoid glob_tstep(void);\nvoid getstep(char *fname, double *Prtime, int *Pitime);\nvoid putstep(char *fname, double *Prtime, int *Pitime);\n\n\n/* external prototypes */\nvoid slice_probe(void);\nvoid print_solution(char* , int);\nvoid print_vert(char*, int);\nvoid print_wave(char*, int);\nvoid print_moments(char*, int);\n\nextern void InitializeIBPoint();\n/*void glob_snapshot(char*);*/\nextern void dibm_interploate_shear_velocity(void);\n\n\n/* global, used by mgp.c, pcg.c and map.c */\n/* global, used by mgp.c, pcg.c and map.c */\nint mypid = -1;     /* my process id number */\nint npid = 1;       /* total process number */\nint halt_flg = 0;       /* halt t-steps, 1=stop, 0=cont */\ndouble wck_t_start, wck_t_end;  /* wall clock timing */\ndouble cpu_t_start, cpu_t_end;  /* cpu clock timing */\nint time_limit = 999999999; /* wall clock limit (seconds) */\ndouble Y_pro_mu=0; //Mu in Y-code;\ndouble Y_pro_Laimuda=0;//Laimuda in Y-code\n//char Y_y3dfile[256];  //*.y3d filename in Y-code\ndouble Y_adheforcefactor=1.0;//force factor applied to ib points on Y solid, used in Yw.c-F2y()\ndouble Y_shear_force_factor =1.0;\ndouble Y_shear_vel = 0.0;\nint Y_init_entity_num; //cell number at initilization of Y\n//#Additional Misc by XuDong\nint stat_y_save_dn; //  1000         #y solid saving interval\nint stat_plane_save_dn;//   1000    #plane saving interval\nint stat_glob_fluid_save_dn;//  10000000  #global fluid saving interval\nint stat_restart_save_dn; //  1000   #Restart file saving interval\nint stat_gtk_draw_dn; //  1          #gtkdraw interval when GTK defined\nint stat_gtk_save_dn; //  100        #gtkdraw picture saving interval when GTK defined\nint stat_y_typic_save_dn;\ndouble case_parameter_1;//undefined reserved case parameter\ndouble case_parameter_2;\ndouble case_parameter_3;\ndouble case_parameter_4;\n\n/* main: driver routine */\nint main(int argc, char **argv)\n{\n  int bid, ibid;\n  /* switches */\n  int add_seed_flg = 0, probe_flg = 0, putxd_2x_flg = 0, reset_stats_flg = 0;   \n\n  /* Start up any other nodes. The cmd line options relating to the\n   * parallel interface are parsed and pruned here. */\n  mypid = com_start(&amp;argc, &amp;argv, 1);\n  npid  = com_nnodes();\n  wck_t_start = WCKseconds();\n  cpu_t_start = CPUseconds();\n\n  /* Parse the remaining options [first node only] */\n  if (mypid == 0)\n    cmdopts(&amp;argc, &amp;argv);\n\n  /* Buffering mode for stdout; needed on T3D */\n  fflush(stdout);\n  setvbuf(stdout, (char *) 0, _IOLBF, 0); /* line buffering */\n\n  /* Read configuration data on ONE node */\n  if (mypid == 0) \n  {\n    /* get the map data and mesh points */\n    map_getfn(fnames.map, fnames.msh);\n    map_print(BID_NULL);\n    if (map_checkt() || map_checku())\n      exit(2);\n\n    /* debugging */\n    /* map_putfn(\"temp.map\"); */\n    /* msh_putfn(\"temp.msh\"); */\n\n    /* read the local data file and build lookup table */\n    dat_read(fnames.dat);\n    dat_print();\n\n    /* Modify parameters using info from *.dat file */\n    dat_getdouble(&amp;viscm, \"viscm\");\n    dat_getdouble(&amp;fbody_x, \"fbody_x\");\n    dat_getdouble(&amp;fbody_y, \"fbody_y\");\n    dat_getdouble(&amp;fbody_z, \"fbody_z\");\n    dat_getint(&amp;time_limit, \"time_limit\");\n\n    //#Additional Misc by XuDong\n    dat_getdouble(&amp;crk_beta,\"crk_beta\");// #=0--explicit, ==1 fully implicit ==1/2 crank-nicolson\n    dat_getdouble(&amp;ibm_relax,\"ibm_relax\");// #=0.5---normal for direct forcing\n\n    dat_getint(&amp;stat_y_save_dn,\"stat_y_save_dn\");//  1000         #y solid saving interval\n    dat_getint(&amp;stat_plane_save_dn,\"stat_plane_save_dn\");//   1000    #plane saving interval\n    dat_getint(&amp;stat_glob_fluid_save_dn,\"stat_glob_fluid_save_dn\");//  10000000  #global fluid saving interval\n    dat_getint(&amp;stat_restart_save_dn,\"stat_restart_save_dn\");//  1000   #Restart file saving interval\n    dat_getint(&amp;stat_gtk_draw_dn,\"stat_gtk_draw_dn\");//  1          #gtkdraw interval when GTK defined\n    dat_getint(&amp;stat_gtk_save_dn,\"stat_gtk_save_dn\");//  100        #gtkdraw picture saving interval when GTK defined\n    dat_getint(&amp;stat_y_typic_save_dn,\"stat_y_typic_save_dn\");//  100        #gtkdraw picture saving interval when GTK defined\n\n\n    dat_getdouble(&amp;Y_adheforcefactor,\"Y_adheforcefactor\");//  1          #gtkdraw interval when GTK defined\n    dat_getdouble(&amp;Y_shear_force_factor,\"Y_shear_force_factor\");//  100        #gtkdraw picture saving interval when GTK defined\n    dat_getdouble(&amp;Y_shear_vel,\"Y_shear_vel\");//  100        #gtkdraw picture saving interval when GTK defined\n    dat_getint(&amp;Y_init_entity_num,\"Y_init_entity_num\");//  //cell number at initilization of Y\n\n    dat_getdouble(&amp;case_parameter_1,\"case_parameter_1\"); //undefined reserved case parameter\n    dat_getdouble(&amp;case_parameter_2,\"case_parameter_2\"); //undefined reserved case parameter\n    dat_getdouble(&amp;case_parameter_3,\"case_parameter_3\"); //undefined reserved case parameter\n    dat_getdouble(&amp;case_parameter_4,\"case_parameter_4\"); //undefined reserved case parameter \n    /* set current time step parameters */\n    dat_getint(&amp;ntime, \"ntime\");\n    dat_getdouble(&amp;dt, \"dt\");\n    if (!flg_init)\n      getstep(fnames.xdi, &amp;rtime_current, &amp;itime);\n    itime_first = itime;\n    itime_last = itime_first + ntime;\n    rtime_first = rtime_current;\n    rtime_last = rtime_current + dt * ntime;\n\n    /* print fluid parameters */\n    prparam();\n  }\n\n\n    /* Distibute to other nodes */\n    com_dist_param();   /* distribute file names */\n    com_dist_map();   /* distribute map */\n    com_dist_data();    /* distribute table */\n</code></pre>\n\n<p>I located where the error occured, it is in com_dist_param().</p>\n\n<pre><code>        void com_dist_param(void)\n        {\n            /* This is all there is to it, curtesy of derived datatypes */\n            MPI_Bcast(&amp;fnames, 1, fnames_type, 0, MPI_COMM_WORLD);\n            /* params starts with address of fbody_x */\n            MPI_Bcast(&amp;fbody_x, 1, params_type, 0, MPI_COMM_WORLD);\n        }\n</code></pre>\n\n<p>Errors occured when it came into MPI_Bcast. Fnames:</p>\n\n<pre><code>typedef struct\n  {\n    char xdi[MAXSTR];       /* xd in */\n    char xdo[MAXSTR];       /* xd out */\n    char dat[MAXSTR];       /* data */\n    char map[MAXSTR];       /* domain map */\n    char msh[MAXSTR];       /* mesh points */\n    char y3d[MAXSTR];       /* Y3D input */\n    char log[MAXSTR];       /* logging */\n    char mom[MAXSTR];       /* stats moments */\n  }\nFnames;\n</code></pre>\n\n<p>and it defined the fnames_type as MPI_Datatype:</p>\n\n<pre><code>MPI_Datatype\nmake_fnames_type(void)\n{\n    MPI_Datatype fnames_type;\n    MPI_Datatype type[8];\n    int blocklen[8];\n    MPI_Aint disp[8];\n    int base, i;\n    /* define it */\n    MPI_Address(&amp;fnames.xdi, disp);\n    MPI_Address(&amp;fnames.xdo, disp + 1);\n    MPI_Address(&amp;fnames.dat, disp + 2);\n    MPI_Address(&amp;fnames.map, disp + 3);\n    MPI_Address(&amp;fnames.msh, disp + 4);\n    MPI_Address(&amp;fnames.y3d, disp + 5);\n    MPI_Address(&amp;fnames.log, disp + 6);\n    MPI_Address(&amp;fnames.mom, disp + 7);\n    base = disp[0];\n    for (i = 0; i &lt; 8; i++) {\n    type[i] = MPI_CHAR;\n    blocklen[i] = MAXSTR;\n    disp[i] -= base;\n/*\n   printf(\"disp[i] = %d blocklen[i] = %d\\n\", disp[i], blocklen[i]);\n */\n    }\n\n    /* create it */\n    MPI_Type_struct(8, blocklen, disp, type, &amp;fnames_type);\n    MPI_Type_commit(&amp;fnames_type);\n    return (fnames_type);\n}\n</code></pre>\n\n<p>Could anyone help me? Thanks a lot!</p>\n"}, {"tags": ["c", "assembly", "arm", "bootloader", "mo+"], "comments": [{"owner": {"reputation": 1469, "user_id": 2105592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e0660c06174e5479ed2c6dcda818d0f?s=128&d=identicon&r=PG", "display_name": "Sean Houlihane", "link": "https://stackoverflow.com/users/2105592/sean-houlihane"}, "edited": false, "score": 0, "creation_date": 1570608707, "post_id": 58296733, "comment_id": 102962212, "body": "What does this assemble to? It should only be a handful of instructions, and that should be much easier to debug."}, {"owner": {"reputation": 7207, "user_id": 410847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a354e99dd64adf823aa72c4ee22a1fc?s=128&d=identicon&r=PG", "display_name": "Turbo J", "link": "https://stackoverflow.com/users/410847/turbo-j"}, "edited": false, "score": 0, "creation_date": 1570615451, "post_id": 58296733, "comment_id": 102965890, "body": "Code is simply br0ken. The PSP value requires <code>userStartup</code> to be dividable by 8, but callig it as a function requires it to be an <i>odd</i> value (thumb bit set). These 2 requirements cannot be fulfilled at the same time."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1570623388, "post_id": 58296733, "comment_id": 102970084, "body": "psp being set to the entry point?   difficult to try to do this with thumb as depending on the tools and the instruction used you either must have the lsbit set or not.  much easier to do with real assembly. call a function with the values, and have real assembly do the rest."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1570623449, "post_id": 58296733, "comment_id": 102970124, "body": "actually not just easier, the only way to insure the code will work."}, {"owner": {"reputation": 1, "user_id": 12185710, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDjSCy_t6_CyHgnLNqbUCBUVp2IiYTzHrxMttnM=k-s128", "display_name": "Mitchell Jones", "link": "https://stackoverflow.com/users/12185710/mitchell-jones"}, "reply_to_user": {"reputation": 7207, "user_id": 410847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a354e99dd64adf823aa72c4ee22a1fc?s=128&d=identicon&r=PG", "display_name": "Turbo J", "link": "https://stackoverflow.com/users/410847/turbo-j"}, "edited": false, "score": 0, "creation_date": 1570632069, "post_id": 58296733, "comment_id": 102975196, "body": "thanks guys, i&#39;m pretty sure the main issue was in fact the values as indicated by @TurboJ using this array method works well."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 12185710, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDjSCy_t6_CyHgnLNqbUCBUVp2IiYTzHrxMttnM=k-s128", "display_name": "Mitchell Jones", "link": "https://stackoverflow.com/users/12185710/mitchell-jones"}, "is_accepted": false, "score": 0, "last_activity_date": 1570631103, "creation_date": 1570631103, "answer_id": 58306399, "question_id": 58296733, "link": "https://stackoverflow.com/questions/58296733/cortex-m0-jump-to-user-application-failing/58306399#58306399", "title": "Cortex M0+ Jump to user application failing", "body": "<p>This method works:</p>\n\n<pre><code>#define PROGRAM_VECTOR_TABLE ((uint32_t *) PROGRAM_ADDRESS)\n\nvoid jump_to_app(void)\n{\n    static void (*go_to_app)(void) = 0;\n    go_to_app = (void (*)(void))(PROGRAM_VECTOR_TABLE[1]);\n    SCB-&gt;VTOR = (uint32_t)PROGRAM_VECTOR_TABLE;\n    __set_MSP(PROGRAM_VECTOR_TABLE[0]);\n    __set_PSP(PROGRAM_VECTOR_TABLE[0]);\n    go_to_app();\n}\n</code></pre>\n\n<p>A few changes, however I noticed the vector address to go to app resolved to a different value than I was attempting.</p>\n"}], "owner": {"reputation": 1, "user_id": 12185710, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDjSCy_t6_CyHgnLNqbUCBUVp2IiYTzHrxMttnM=k-s128", "display_name": "Mitchell Jones", "link": "https://stackoverflow.com/users/12185710/mitchell-jones"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 270, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570631103, "creation_date": 1570592302, "question_id": 58296733, "link": "https://stackoverflow.com/questions/58296733/cortex-m0-jump-to-user-application-failing", "title": "Cortex M0+ Jump to user application failing", "body": "<p>I've got a KL17, I'm attempting to write a bootloader to allow for OTA updating. I'm having trouble jumping to user app, this is what I'm attempting.</p>\n\n<pre><code>void JumpToUserApplication(uint32_t userSP, uint32_t userStartup)\n{\nprintf(\"MSP BEFORE: %x \\n\", __get_MSP());\nprintf(\"PSP BEFORE: %x \\n\", __get_PSP());\n\nSCB-&gt;VTOR = userSP; // SET UP INTERUPT VECTOR TABLE FOR APP\n// set up stack pointer\n__set_MSP(userSP);\n__set_PSP(userStartup);\nvoid (*user_app)(void) = userStartup;\nuser_app();\n\nprintf(\"BAD MSP AFTER: %x \\n\", __get_MSP());\nprintf(\"BAD PSP AFTER: %x \\n\", __get_PSP());\n\n}\n</code></pre>\n\n<p>I call it as such:</p>\n\n<pre><code>JumpToUserApplication(PROGRAM_ADDRESS, (PROGRAM_ADDRESS+0x4));\n</code></pre>\n\n<p>I expect it to jump to the app, however what happens instead is the boot loader actually restarts as if it goes back to the bootloader reset...</p>\n\n<pre><code>WELCOME TO THE BOOTLOADER! \nMSP BEFORE: 20005fc0 \nPSP BEFORE: 20006000 \nWELCOME TO THE BOOTLOADER! \nMSP BEFORE: 20005fc0 \nPSP BEFORE: 20006000\n... and so on. \n</code></pre>\n\n<p>Any input is appreciated, thank you!</p>\n"}, {"tags": ["c", "file", "io", "linux-kernel", "block-device"], "comments": [{"owner": {"reputation": 35543, "user_id": 149530, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b6c8b04130af49735de5be666d67c00?s=128&d=identicon&r=PG", "display_name": "Michael Foukarakis", "link": "https://stackoverflow.com/users/149530/michael-foukarakis"}, "edited": false, "score": 0, "creation_date": 1570614589, "post_id": 58296710, "comment_id": 102965417, "body": "You&#39;re looking at pretty old code - what exact release?"}, {"owner": {"reputation": 667, "user_id": 2762678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee48142c79e0272fef5875126ebe6912?s=128&d=identicon&r=PG&f=1", "display_name": "QnA", "link": "https://stackoverflow.com/users/2762678/qna"}, "reply_to_user": {"reputation": 35543, "user_id": 149530, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b6c8b04130af49735de5be666d67c00?s=128&d=identicon&r=PG", "display_name": "Michael Foukarakis", "link": "https://stackoverflow.com/users/149530/michael-foukarakis"}, "edited": false, "score": 0, "creation_date": 1570638169, "post_id": 58296710, "comment_id": 102978427, "body": "thanks, @michael. Original code was taken from kernel 2.6.11, I added the latest kernel 5.3.5 snippet. The logic look the same, unless I missed something in the call chain, which is quite possible."}, {"owner": {"reputation": 25733, "user_id": 559737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5de249db6565b87a2699e131974268a?s=128&d=identicon&r=PG", "display_name": "Brendan", "link": "https://stackoverflow.com/users/559737/brendan"}, "edited": false, "score": 0, "creation_date": 1570640548, "post_id": 58296710, "comment_id": 102979453, "body": "I&#39;d assume you&#39;re looking in the wrong place entirely. E.g. process requests to read data from file; VFS/page cache determines if that data is cached, being fetched or needs fetching (and requests the data from file system if it needs fetching); file system does some stuff and asks storage device for blocks; storage device uses elevator algorithm (without caring about &quot;merge-able&quot; requests that were already avoided several layers higher up)."}, {"owner": {"reputation": 667, "user_id": 2762678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee48142c79e0272fef5875126ebe6912?s=128&d=identicon&r=PG&f=1", "display_name": "QnA", "link": "https://stackoverflow.com/users/2762678/qna"}, "reply_to_user": {"reputation": 25733, "user_id": 559737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5de249db6565b87a2699e131974268a?s=128&d=identicon&r=PG", "display_name": "Brendan", "link": "https://stackoverflow.com/users/559737/brendan"}, "edited": false, "score": 0, "creation_date": 1570642324, "post_id": 58296710, "comment_id": 102980303, "body": "thanks, @Brendan. I had the same thought, but wasn&#39;t able to find in which &#39;upper&#39; layer this overlapping requests are merged/handled. Chasing down <code>def_blk_fops.read_iter()</code>, I only found logic that skips a page I/O when <code>PG_uptodate</code> is set, but that bit is only set <i>after</i> I/O request is done, and it does not scan the <code>request_queue</code> for existing overlapping request waiting in line. Therefore I started looking for the answer in <code>request_queue</code> related code."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 1, "creation_date": 1570645405, "post_id": 58296710, "comment_id": 102981741, "body": "Try to follow the code in <code>generic_file_buffered_read()</code> in &quot;mm/filemap.c&quot;. Pages are only read from the block device when the page has been exclusively locked by the current task. Other tasks reading the same page will end up waiting on the page&#39;s wait queue (if blocking),  or return <code>-EAGAIN</code> (if non-blocking). The readahead stuff complicates things a bit (OK, a lot...)."}, {"owner": {"reputation": 667, "user_id": 2762678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee48142c79e0272fef5875126ebe6912?s=128&d=identicon&r=PG&f=1", "display_name": "QnA", "link": "https://stackoverflow.com/users/2762678/qna"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1570718088, "post_id": 58296710, "comment_id": 103009292, "body": "thanks, @IanAbbott. <code>lock_page()</code> does solve the problem, if readahead does not complicate the picture. But I can settle for this:)"}], "owner": {"reputation": 667, "user_id": 2762678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee48142c79e0272fef5875126ebe6912?s=128&d=identicon&r=PG&f=1", "display_name": "QnA", "link": "https://stackoverflow.com/users/2762678/qna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 208, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1570640592, "creation_date": 1570592133, "last_edit_date": 1570640592, "question_id": 58296710, "link": "https://stackoverflow.com/questions/58296710/when-two-processes-read-the-same-file-simultaneously-will-linux-kernel-save-one", "title": "When two processes read the same file simultaneously, will Linux kernel save one device I/O?", "body": "<p>I have a generic question about Linux kernel's handling of file I/O. So far my understanding is that, in an ideal case, after process A reads a file, data is loaded into page cache, and if process B reads the same page before it is reclaimed, it does not need to hit the disk again.</p>\n\n<p>My question is related to how the block device I/O works. Process A's read request will eventually be queued before the I/O actually happens. Now if device B's request (a <code>bio</code> struct) is to be inserted into the <code>request_queue</code>, <em>before</em> A's request is executed, elevator will consider whether to merge B's <code>bio</code> into any existing <code>request</code>. Now, if A and B try to read the same file offset, i.e. same device block, they are literally the same I/O, (or A and B's requests are not exactly the same but they overlap for some blocks), but so far I have not seen this case being considered in kernel code. (The only relevant thing I saw is a test on whether <code>bio</code> can be glued to an existing <code>request</code> contiguously.)</p>\n\n<p><em>kernel 2.6.11</em></p>\n\n<pre><code>inline int elv_try_merge(struct request *__rq, struct bio *bio)\n{\n    int ret = ELEVATOR_NO_MERGE;\n\n    /*\n     * we can merge and sequence is ok, check if it's possible\n     */\n    if (elv_rq_merge_ok(__rq, bio)) {\n        if (__rq-&gt;sector + __rq-&gt;nr_sectors == bio-&gt;bi_sector)\n            ret = ELEVATOR_BACK_MERGE;\n        else if (__rq-&gt;sector - bio_sectors(bio) == bio-&gt;bi_sector)\n            ret = ELEVATOR_FRONT_MERGE;\n    }\n\n    return ret;\n}\n</code></pre>\n\n<p><em>kernel 5.3.5</em></p>\n\n<pre><code>enum elv_merge elv_merge(struct request_queue *q, struct request **req,\n        struct bio *bio)\n{\n    struct elevator_queue *e = q-&gt;elevator;\n    struct request *__rq;\n    ...\n    /*\n     * See if our hash lookup can find a potential backmerge.\n     */\n    __rq = elv_rqhash_find(q, bio-&gt;bi_iter.bi_sector);\n    ...\n}\n\nstruct request *elv_rqhash_find(struct request_queue *q, sector_t offset)\n{\n    struct elevator_queue *e = q-&gt;elevator;\n    struct hlist_node *next;\n    struct request *rq;\n\n    hash_for_each_possible_safe(e-&gt;hash, rq, next, hash, offset) {\n        ...\n        if (rq_hash_key(rq) == offset)\n            return rq;\n    }\n\n    return NULL;\n}\n\n#define rq_hash_key(rq)     (blk_rq_pos(rq) + blk_rq_sectors(rq))\n</code></pre>\n\n<p>Does that mean kernel will just do two I/Os? Or (very likely) I missed something?</p>\n\n<p>thanks!</p>\n"}, {"tags": ["c", "image"], "comments": [{"owner": {"reputation": 4286, "user_id": 1440105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/QxCty.jpg?s=128&g=1", "display_name": "Dweeberly", "link": "https://stackoverflow.com/users/1440105/dweeberly"}, "edited": false, "score": 0, "creation_date": 1570591455, "post_id": 58296470, "comment_id": 102956439, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/3011274/antialiasing-algorithm\">Antialiasing algorithm?</a>"}, {"owner": {"reputation": 10217, "user_id": 471930, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tds8p.png?s=128&g=1", "display_name": "Jasen", "link": "https://stackoverflow.com/users/471930/jasen"}, "edited": false, "score": 0, "creation_date": 1570592060, "post_id": 58296470, "comment_id": 102956552, "body": "you need to choose what to do when the pixels are not surrounded.  you could sample fewer pixels or you could re-sample the nearest pixel to the missing pixel"}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 1, "creation_date": 1570592163, "post_id": 58296470, "comment_id": 102956571, "body": "You don&#39;t need to copy the pixels to the temporary image. Read from the source and just assign them to the temporary as you go. For now, skip the hard part and just do everything but the borders. Use a loop and a lookup table of the offsets from the current pixel. Once you have that you can special case the edges and corners.."}], "answers": [{"comments": [{"owner": {"reputation": 700, "user_id": 12915588, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FBSKT.jpg?s=128&g=1", "display_name": "Damjan Ostrelic", "link": "https://stackoverflow.com/users/12915588/damjan-ostrelic"}, "edited": false, "score": 0, "creation_date": 1592046722, "post_id": 58298505, "comment_id": 110287313, "body": "could you explain your code a bit to me? Shouldn&#39;t the if statements associated with all of <code>A | B | L | R</code> reset the <code>A | B | L | R</code> values instead of <code>i</code> and <code>j</code>?    I don&#39;t see how either i or j could go out of the set boundaries.    And also, in the end it is still calculating the averages of 9 pixels - I think the idea is to discard the out of bounds pixels and only calculate for 6 pixels (edge case) or 4 pixels (corner case)?"}, {"owner": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "reply_to_user": {"reputation": 700, "user_id": 12915588, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FBSKT.jpg?s=128&g=1", "display_name": "Damjan Ostrelic", "link": "https://stackoverflow.com/users/12915588/damjan-ostrelic"}, "edited": false, "score": 0, "creation_date": 1592047872, "post_id": 58298505, "comment_id": 110287668, "body": "@DamjanOstrelic On your first point - well spotted (now edited to correct)! On your second point, the solution I offered is one option that does, indeed, always use 9 pixels (but always <i>valid</i> pixels); ignoring out-of-bounds pixels and reducing the divisor (to 6 or 4) is another (but *different) solution. Which is better depends on circumstance and user preference -  but &#39;your&#39; method requires more code."}, {"owner": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "reply_to_user": {"reputation": 700, "user_id": 12915588, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FBSKT.jpg?s=128&g=1", "display_name": "Damjan Ostrelic", "link": "https://stackoverflow.com/users/12915588/damjan-ostrelic"}, "edited": false, "score": 0, "creation_date": 1592048044, "post_id": 58298505, "comment_id": 110287726, "body": "The &#39;always use 9 pixels&#39; approach works on the assumption that the pixels beyond the edge would have the same colours as the corresponding edge pixel; that is, it effectively extends the image all round by one pixel, using the edges as the source colour."}, {"owner": {"reputation": 700, "user_id": 12915588, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FBSKT.jpg?s=128&g=1", "display_name": "Damjan Ostrelic", "link": "https://stackoverflow.com/users/12915588/damjan-ostrelic"}, "edited": false, "score": 0, "creation_date": 1592048307, "post_id": 58298505, "comment_id": 110287825, "body": "Thanks for clarifying, I understand now. Using 9 pixels on the edge is probably the simplest way to do it - I&#39;ll try to think of something for the &quot;discard&quot; method. :)"}, {"owner": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "reply_to_user": {"reputation": 700, "user_id": 12915588, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FBSKT.jpg?s=128&g=1", "display_name": "Damjan Ostrelic", "link": "https://stackoverflow.com/users/12915588/damjan-ostrelic"}, "edited": false, "score": 0, "creation_date": 1592048594, "post_id": 58298505, "comment_id": 110287908, "body": "@DamjanOstrelic Also note that, typically, the edges are: (a) only a <i>very</i> small portion of the entire image; and (b) more often than not, the actual &quot;region of interest&quot; in an image does not include the edges. With these in mind, you have to ask: &quot;Is it worth the extra coding (and execution) time?&quot;"}, {"owner": {"reputation": 700, "user_id": 12915588, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FBSKT.jpg?s=128&g=1", "display_name": "Damjan Ostrelic", "link": "https://stackoverflow.com/users/12915588/damjan-ostrelic"}, "edited": false, "score": 0, "creation_date": 1592056293, "post_id": 58298505, "comment_id": 110290489, "body": "That&#39;s a very good point. I think your solution is best of both worlds, but the assignment I have specifically requires implementation of the &quot;discard&quot; method so I&#39;m going for that one."}], "tags": [], "owner": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "is_accepted": true, "score": 0, "last_activity_date": 1592048157, "last_edit_date": 1592048157, "creation_date": 1570603686, "answer_id": 58298505, "question_id": 58296470, "link": "https://stackoverflow.com/questions/58296470/blurring-an-image-in-c-pixel-by-pixel-special-cases/58298505#58298505", "title": "Blurring an Image in c pixel by pixel - special cases", "body": "<p>There are various ways of handling 'edge' cases in an algorithm like yours. The code below uses the current 'row' or 'column' (instead of that above/below or left/right of it) if it's on the relevant edge:</p>\n\n<pre><code>for ( int i = 0; i &lt; height; i++)\n{\n    // Edge check (A for 'above' index and B for 'below'):\n    int A = i - 1; if (A &lt; 0) A = 0;\n    int B = i + 1; if (B &gt; height - 1) B = height - 1;\n    for (int j = 0; j &lt; width; j++)\n    {\n        // Edge check (L = 'left of', R = 'right of'):\n        int L = j - 1; if (L &lt; 0) L = 0;\n        int R = j + 1; if (R &gt; width - 1) R = width - 1;\n        // Then change all your 'i-1'|'i+i'|'j-i'|j+1' indexes to A|B|L|R:\n        avgRed = round(((float)(image[i][j].rgbtRed\n        + image[i][L].rgbtRed + image[i][R].rgbtRed\n        + image[A][j].rgbtRed + image[A][L].rgbtRed\n        + image[A][R].rgbtRed + image[B][j].rgbtRed\n        + image[B][L].rgbtRed + image[B][R].rgbtRed)) / 9);\n        // ... and similarly for green and blue ...\n</code></pre>\n\n<p>Incidentally, I notice you have your pixel indexes as image[column][row] (= <em>column-major</em> order). Conventionally, <code>C</code> and <code>C++</code> 2D arrays are defined the other way round, as image[row][column] (= <em>row-major</em> order); however, as long as you're sure that's what you have, then no problem!</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 6708631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/283db36d090adeadd12e1c7e50ff27d6?s=128&d=identicon&r=PG&f=1", "display_name": "abarna baskar", "link": "https://stackoverflow.com/users/6708631/abarna-baskar"}, "is_accepted": false, "score": 0, "last_activity_date": 1589234949, "last_edit_date": 1589234949, "creation_date": 1589232201, "answer_id": 61739612, "question_id": 58296470, "link": "https://stackoverflow.com/questions/58296470/blurring-an-image-in-c-pixel-by-pixel-special-cases/61739612#61739612", "title": "Blurring an Image in c pixel by pixel - special cases", "body": "<p>This code in C works well when you consider blurring an image or n*n matxix using box blur. It considers top, bottom and middle rows and calculates the pixels RGB respectively.</p>\n\n<pre><code>// Blur image\nvoid blur(int height, int width, RGBTRIPLE image[height][width])\n{\n\n    int sumBlue;\n    int sumGreen;\n    int sumRed;\n    //create a temporary table\n    RGBTRIPLE temp[height][width];\n\n    for (int i = 0; i &lt; width; i++)\n    {\n        for (int j = 0; j &lt; height; j++)\n        {\n            sumBlue = 0;\n            sumGreen = 0;\n            sumRed = 0;\n            //Top row\n            if (i == 0)\n            {\n                if (j == 0) //top row left corner\n                {\n                    sumBlue = round(ceil(image[i][j].rgbtBlue\n                                         + image[i][j + 1].rgbtBlue\n                                         + image[i + 1][j].rgbtBlue\n                                         + image[i + 1][j + 1].rgbtBlue) / 4);\n                    sumGreen = round(ceil(image[i][j].rgbtGreen\n                                          + image[i][j + 1].rgbtGreen\n                                          +  image[i + 1][j].rgbtGreen\n                                          +  image[i + 1][j + 1].rgbtGreen) / 4);\n                    sumRed = round(ceil(image[i][j].rgbtRed\n                                        + image[i][j + 1].rgbtRed\n                                        + image[i + 1][j].rgbtRed\n                                        + image[i + 1][j + 1].rgbtRed) / 4);\n\n                }\n\n                else if (j == width - 1) //top row right corner\n                {\n                    sumBlue = round(ceil(image[i][j].rgbtBlue\n                                         + image[i][j - 1].rgbtBlue\n                                         + image[i + 1][j].rgbtBlue\n                                         + image[i + 1][j - 1].rgbtBlue) / 4);\n                    sumGreen = round(ceil(image[i][j].rgbtGreen\n                                          + image[i][j - 1].rgbtGreen\n                                          + image[i + 1][j].rgbtGreen\n                                          + image[i + 1][j - 1].rgbtGreen) / 4);\n                    sumRed = round(ceil(image[i][j].rgbtRed\n                                        + image[i][j - 1].rgbtRed\n                                        + image[i + 1][j].rgbtRed\n                                        + image[i + 1][j - 1].rgbtRed) / 4);\n                }\n\n                else //top row middle pixel\n                {\n                    sumBlue = round(ceil(image[i][j].rgbtBlue\n                                         + image[i][j - 1].rgbtBlue\n                                         + image[i][j + 1].rgbtBlue\n                                         + image[i + 1][j].rgbtBlue\n                                         + image[i + 1][j - 1].rgbtBlue\n                                         + image[i + 1][j + 1].rgbtBlue) / 6);\n                    sumGreen = round(ceil(image[i][j].rgbtGreen\n                                          + image[i][j - 1].rgbtGreen\n                                          + image[i][j + 1].rgbtGreen\n                                          + image[i + 1][j].rgbtGreen\n                                          + image[i + 1][j - 1].rgbtGreen\n                                          + image[i + 1][j + 1].rgbtGreen) / 6);\n                    sumRed = round(ceil(image[i][j].rgbtRed\n                                        + image[i][j - 1].rgbtRed\n                                        + image[i][j + 1].rgbtRed\n                                        + image[i + 1][j].rgbtRed\n                                        + image[i + 1][j - 1].rgbtRed\n                                        + image[i + 1][j + 1].rgbtRed) / 6);\n                }\n\n            }\n            //Bottom row of image\n            else if (i == height - 1)\n            {\n                if (j == 0) //left side pixel of bottom row\n                {\n                    sumBlue = round(ceil(image[i][j].rgbtBlue\n                                         + image[i][j + 1].rgbtBlue\n                                         + image[i - 1][j].rgbtBlue\n                                         + image[i - 1][j + 1].rgbtBlue) / 4);\n                    sumGreen = round(ceil(image[i][j].rgbtGreen\n                                          + image[i][j + 1].rgbtGreen\n                                          + image[i - 1][j].rgbtGreen\n                                          + image[i - 1][j + 1].rgbtGreen) / 4);\n                    sumRed = round(ceil(image[i][j].rgbtRed\n                                        + image[i][j + 1].rgbtRed\n                                        + image[i - 1][j].rgbtRed\n                                        + image[i - 1][j + 1].rgbtRed) / 4);\n                }\n\n                else if (j == width - 1) //right side pixel of last row\n                {\n                    sumBlue = round(ceil(image[i][j].rgbtBlue\n                                         + image[i][j - 1].rgbtBlue\n                                         + image[i - 1][j].rgbtBlue\n                                         + image[i - 1][j - 1].rgbtBlue) / 4);\n                    sumGreen = round(ceil(image[i][j].rgbtGreen\n                                          + image[i][j - 1].rgbtGreen\n                                          + image[i - 1][j].rgbtGreen\n                                          + image[i - 1][j - 1].rgbtGreen) / 4);\n                    sumRed = round(ceil(image[i][j].rgbtRed\n                                        + image[i][j - 1].rgbtRed\n                                        + image[i - 1][j].rgbtRed\n                                        + image[i - 1][j - 1].rgbtRed) / 4);\n                }\n\n                else //middle pixels of last row\n                {\n                    sumBlue = round(ceil(image[i][j].rgbtBlue\n                                         + image[i][j - 1].rgbtBlue\n                                         + image[i][j + 1].rgbtBlue\n                                         + image[i - 1][j].rgbtBlue\n                                         + image[i - 1][j - 1].rgbtBlue\n                                         + image[i - 1][j + 1].rgbtBlue) / 6);\n                    sumGreen = round(ceil(image[i][j].rgbtGreen\n                                          + image[i][j - 1].rgbtGreen\n                                          + image[i][j + 1].rgbtGreen\n                                          + image[i - 1][j].rgbtGreen\n                                          + image[i - 1][j - 1].rgbtGreen\n                                          + image[i - 1][j + 1].rgbtGreen) / 6);\n                    sumRed = round(ceil(image[i][j].rgbtRed\n                                        + image[i][j - 1].rgbtRed\n                                        + image[i][j + 1].rgbtRed\n                                        + image[i - 1][j].rgbtRed\n                                        + image[i - 1][j - 1].rgbtRed\n                                        + image[i - 1][j + 1].rgbtRed) / 6);\n                }\n\n            }\n\n            else\n            {\n                if (j == 0) //left side of image\n                {\n                    sumBlue = round(ceil(image[i][j].rgbtBlue\n                                         + image[i - 1][j].rgbtBlue\n                                         + image[i + 1][j].rgbtBlue\n                                         + image[i][j + 1].rgbtBlue\n                                         + image[i - 1][j + 1].rgbtBlue\n                                         + image[i + 1][j + 1].rgbtBlue) / 6); //6 pixels surrounding the left side of the image\n                    sumGreen = round(ceil(image[i][j].rgbtGreen\n                                          +  image[i - 1][j].rgbtGreen\n                                          +  image[i + 1][j].rgbtGreen\n                                          +  image[i][j + 1].rgbtGreen\n                                          +  image[i - 1][j + 1].rgbtGreen\n                                          +  image[i + 1][j + 1].rgbtGreen) / 6);\n                    sumRed = round(ceil(image[i][j].rgbtRed\n                                        +  image[i - 1][j].rgbtRed\n                                        +  image[i + 1][j].rgbtRed\n                                        +  image[i][j + 1].rgbtRed\n                                        +  image[i - 1][j + 1].rgbtRed\n                                        +  image[i + 1][j + 1].rgbtRed) / 6);\n                }\n\n                //Right side of image\n                else if (j == width - 1)\n                {\n                    sumBlue = round(ceil(image[i][j].rgbtBlue\n                                         + image[i - 1][j].rgbtBlue\n                                         + image[i + 1][j].rgbtBlue\n                                         + image[i][j - 1].rgbtBlue\n                                         + image[i - 1][j - 1].rgbtBlue\n                                         + image[i + 1][j - 1].rgbtBlue) / 6);\n                    sumGreen = round(ceil(image[i][j].rgbtGreen\n                                          +  image[i - 1][j].rgbtGreen\n                                          +  image[i + 1][j].rgbtGreen\n                                          +  image[i][j - 1].rgbtGreen\n                                          +  image[i - 1][j - 1].rgbtGreen\n                                          +  image[i + 1][j - 1].rgbtGreen) / 6);\n                    sumRed = round(ceil(image[i][j].rgbtRed\n                                        +  image[i - 1][j].rgbtRed\n                                        +  image[i + 1][j].rgbtRed\n                                        +  image[i][j - 1].rgbtRed\n                                        +  image[i - 1][j - 1].rgbtRed\n                                        +  image[i + 1][j - 1].rgbtRed) / 6);\n                }\n\n                else //middle pixels of middle rows\n                {\n                    //calculate for blue pixels\n                    sumBlue = round(ceil(image[i - 1][j - 1].rgbtBlue\n                                         + image[i - 1][j].rgbtBlue\n                                         + image[i - 1][j + 1].rgbtBlue\n                                         + image[i][j - 1].rgbtBlue\n                                         + image[i][j].rgbtBlue\n                                         + image[i][j + 1].rgbtBlue\n                                         + image[i + 1][j - 1].rgbtBlue\n                                         + image[i + 1][j].rgbtBlue\n                                         + image[i + 1][j + 1].rgbtBlue) / 9);\n                    //calculate for green pixels\n                    sumGreen = round(ceil(image[i - 1][j - 1].rgbtGreen\n                                          + image[i - 1][j].rgbtGreen\n                                          + image[i - 1][j + 1].rgbtGreen\n                                          + image[i][j - 1].rgbtGreen\n                                          + image[i][j].rgbtGreen\n                                          + image[i][j + 1].rgbtGreen\n                                          + image[i + 1][j - 1].rgbtGreen\n                                          + image[i + 1][j].rgbtGreen\n                                          + image[i + 1][j + 1].rgbtGreen) / 9); // 9 pixels surrounding the middle one\n                    //calculate for red pixels\n                    sumRed = round(ceil(image[i - 1][j - 1].rgbtRed\n                                        + image[i - 1][j].rgbtRed\n                                        + image[i - 1][j + 1].rgbtRed\n                                        + image[i][j - 1].rgbtRed\n                                        + image[i][j].rgbtRed\n                                        + image[i][j + 1].rgbtRed\n                                        + image[i + 1][j - 1].rgbtRed\n                                        + image[i + 1][j].rgbtRed\n                                        + image[i + 1][j + 1].rgbtRed) / 9);\n                }\n            }\n\n            //assign temp values with the calculated values\n            temp[i][j].rgbtBlue = round((sumBlue));\n            temp[i][j].rgbtGreen = round((sumGreen));\n            temp[i][j].rgbtRed = round((sumRed));\n\n        }\n    }\n\n    //copies values from temporary table and assigns to original image\n    for (int i = 0; i &lt; width; i++)\n    {\n        for (int j = 0; j &lt; height; j++)\n        {\n            //assiging temp value to original image\n            image[j][i].rgbtBlue = temp[j][i].rgbtBlue;\n            image[j][i].rgbtGreen = temp[j][i].rgbtGreen;\n            image[j][i].rgbtRed = temp[j][i].rgbtRed;\n        }\n    }\n\n\n\n\n}\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 11770884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d86fecbc0cd1d77eec0c439dffec4c5?s=128&d=identicon&r=PG&f=1", "display_name": "iraza-n", "link": "https://stackoverflow.com/users/11770884/iraza-n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 504, "favorite_count": 0, "accepted_answer_id": 58298505, "answer_count": 2, "score": 2, "last_activity_date": 1592048157, "creation_date": 1570590058, "last_edit_date": 1570592284, "question_id": 58296470, "link": "https://stackoverflow.com/questions/58296470/blurring-an-image-in-c-pixel-by-pixel-special-cases", "title": "Blurring an Image in c pixel by pixel - special cases", "body": "<p>I'm working on a program that will slightly blur an image in c. </p>\n\n<p>Knowing that I need the average and rgb values of the 8 surrounding pixels and the selected pixel to change the color of that pixel, I've added them together and taken the average. </p>\n\n<p>I know that the way I'm implementing this is not the most efficient way this can be done, so if there are any suggestions on how to simplify this, please let me know. </p>\n\n<p>I plan on copy <code>tempimage</code> back to <code>image</code> in a third for-loop at the end. </p>\n\n<p>The struct <code>RGBTRIPLE</code> contain the rgb values for a pixel.</p>\n\n<pre><code>    BYTE  rgbtBlue;\n    BYTE  rgbtGreen;\n    BYTE  rgbtRed;\n</code></pre>\n\n<p>My issue now is dealing with special cases, such as the edges of the image or the pixels on the side.</p>\n\n<p><strong>How can I get the values of the surrounding pixels when the selected pixel is not surrounded by 9 pixels?</strong></p>\n\n<p>Here is my code so far: </p>\n\n<pre><code>void blur(int height, int width, RGBTRIPLE image[height][width])\n{\n    // copy all values to temporary image\n    RGBTRIPLE tempimage[height][width];\n    int avgRed = 0;\n    int avgGreen = 0;\n    int avgBlue = 0;\n    //copy pixels to temp image\n    for ( int x = 0; x &lt; height; x++)\n    {\n        for (int y = 0; y &lt; width; y++)\n        {\n            tempimage[x][y] = image[x][y];\n        }\n    }\n    //get average of surrounding pixels\n    for ( int i = 0; i &lt; height; i++)\n    {\n        for (int j = 0; j &lt; width; j++)\n        {\n            //TODO: edge check\n            //surrounding pixels\n            avgRed = round(((float)(image[i][j].rgbtRed\n            + image[i][j - 1].rgbtRed + image[i][j + 1].rgbtRed\n            + image[i - 1][j].rgbtRed + image[i - 1][j - 1].rgbtRed\n            + image[i - 1][j + 1].rgbtRed + image[i + 1][j].rgbtRed\n            + image[i + 1][j - 1].rgbtRed + image[i + 1][j + 1].rgbtRed)) / 9);\n\n            avgGreen = round(((float)(image[i][j].rgbtGreen\n            + image[i][j - 1].rgbtGreen + image[i][j + 1].rgbtGreen\n            + image[i - 1][j].rgbtGreen + image[i - 1][j - 1].rgbtGreen\n            + image[i - 1][j + 1].rgbtGreen + image[i + 1][j].rgbtGreen\n            + image[i + 1][j - 1].rgbtGreen + image[i + 1][j + 1].rgbtGreen)) / 9);\n\n            avgBlue = round(((float)(image[i][j].rgbtBlue\n            + image[i][j - 1].rgbtBlue + image[i][j + 1].rgbtBlue\n            + image[i - 1][j].rgbtBlue + image[i - 1][j - 1].rgbtBlue\n            + image[i - 1][j + 1].rgbtBlue + image[i + 1][j].rgbtBlue\n            + image[i + 1][j - 1].rgbtBlue + image[i + 1][j + 1].rgbtBlue)) / 9);\n\n\n            tempimage[i][j].rgbtRed = avgRed;\n            tempimage[i][j].rgbtGreen = avgGreen;\n            tempimage[i][j].rgbtBlue = avgBlue;\n\n        }\n    }\n\n    //TODO: for loop to copy tempimage back to image here\n    return;\n}\n</code></pre>\n"}, {"tags": ["c", "stm32", "interrupt-handling", "iar", "usart"], "comments": [{"owner": {"reputation": 76, "user_id": 4950336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d42c34a0849a1d4a5237638f92001f6?s=128&d=identicon&r=PG&f=1", "display_name": "Stephen Plyaskin", "link": "https://stackoverflow.com/users/4950336/stephen-plyaskin"}, "edited": false, "score": 0, "creation_date": 1570611132, "post_id": 58296304, "comment_id": 102963461, "body": "You mess with StdPeriph API. You can&#39;t use <code>USART_ReceiveData</code> and <code>USART_SendData</code> within interrupt handler. UART data receiving is not trivial operation. There are amount of examples in Internet. Also read source of StdPeriph: developers wrote whole instrucion in commnts how to use this."}, {"owner": {"reputation": 1, "user_id": 11906659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d710e36d97b934b51e82e7c273c89de?s=128&d=identicon&r=PG&f=1", "display_name": "Gama", "link": "https://stackoverflow.com/users/11906659/gama"}, "reply_to_user": {"reputation": 76, "user_id": 4950336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d42c34a0849a1d4a5237638f92001f6?s=128&d=identicon&r=PG&f=1", "display_name": "Stephen Plyaskin", "link": "https://stackoverflow.com/users/4950336/stephen-plyaskin"}, "edited": false, "score": 0, "creation_date": 1570670507, "post_id": 58296304, "comment_id": 102988999, "body": "Thanks for your answer sir , i have solve the problem here <a href=\"https://stackoverflow.com/questions/32679035/receiving-number-as-string-uart\" title=\"receiving number as string uart\">stackoverflow.com/questions/32679035/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11906659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d710e36d97b934b51e82e7c273c89de?s=128&d=identicon&r=PG&f=1", "display_name": "Gama", "link": "https://stackoverflow.com/users/11906659/gama"}, "edited": false, "score": 0, "creation_date": 1570670540, "post_id": 58300326, "comment_id": 102989004, "body": "Thanks for your answer sir , i have solve the problem here <a href=\"https://stackoverflow.com/questions/32679035/receiving-number-as-string-uart\" title=\"receiving number as string uart\">stackoverflow.com/questions/32679035/&hellip;</a>"}], "tags": [], "owner": {"reputation": 2568, "user_id": 8548828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C4qkl.png?s=128&g=1", "display_name": "Tarick Welling", "link": "https://stackoverflow.com/users/8548828/tarick-welling"}, "is_accepted": false, "score": 0, "last_activity_date": 1570610937, "creation_date": 1570610937, "answer_id": 58300326, "question_id": 58296304, "link": "https://stackoverflow.com/questions/58296304/usart1-interrupt-irqhandler-how-to-receive-string/58300326#58300326", "title": "USART1 Interrupt IRQHandler how to receive string", "body": "<p>You need to clear the <code>RXNE</code> interrupt bit in the interrupt handler for the USART.</p>\n\n<pre><code>if(USART_GetITStatus(USART1, USART_IT_RXNE) )\n{\n  __HAL_USART_CLEAR_IT(USART1, USART_IT_RXNE);\n\u2026\n}\n</code></pre>\n\n<p>Please remove <code>USART_SendData(USART1, buffer);</code> as this is a blocking function which takes the same time to transmit data as it takes to receive data. As such it won't work. Please create a transmit in your main loop which transmits the buffer when something was received.</p>\n\n<p>Also <code>USART_ReceiveData</code> isn't HAL standard so I'm assuming but: it just needs to read the <code>RDR</code> register and not wait for incomming data as you are using interrupts.</p>\n"}], "owner": {"reputation": 1, "user_id": 11906659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d710e36d97b934b51e82e7c273c89de?s=128&d=identicon&r=PG&f=1", "display_name": "Gama", "link": "https://stackoverflow.com/users/11906659/gama"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 815, "favorite_count": 0, "closed_date": 1570780231, "answer_count": 1, "score": 0, "last_activity_date": 1570610937, "creation_date": 1570588646, "last_edit_date": 1570589999, "question_id": 58296304, "link": "https://stackoverflow.com/questions/58296304/usart1-interrupt-irqhandler-how-to-receive-string", "closed_reason": "Duplicate", "title": "USART1 Interrupt IRQHandler how to receive string", "body": "<p>I am able to receive bytes of incoming data via serial from the pc to STM32051 board but any time that i type in 2 or more characters to send at a time the interrupt stops until i reset the board to repeat same process... How can i change the IRQHandler code to receive payload of 23 bytes or string? can anyone help me with a sample code or modify my current code so i can receive this payload? thanks,</p>\n\n<p>Here's the IRQHandler function that can receive only one byte.</p>\n\n<pre><code>void USART1_IRQHandler(void)\n{\n  unsigned char getbuffer [200], finalbuffer, targetdata[];\n  if(USART_GetITStatus(USART1, USART_IT_RXNE) )\n  {\n    getbuffer [i] = USART_ReceiveData(USART1);\n    buffer = (getbuffer [i]); \n    USART_SendData(USART1, buffer);//Feedback \n    i++;          \n  }\n}\n</code></pre>\n"}, {"tags": ["c", "gdb"], "comments": [{"owner": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 1, "creation_date": 1570650779, "post_id": 58296279, "comment_id": 102983990, "body": "It&#39;s possible that Richard Stallman, having been a developer on <a href=\"https://en.wikipedia.org/wiki/Incompatible_Timesharing_System\" rel=\"nofollow noreferrer\">ITS</a>, where the top-level process in a user session was a debugger and the process tree was described in terms of superior and inferior processes, carried the terminology over when he wrote gdb.."}], "answers": [{"tags": [], "owner": {"reputation": 162629, "user_id": 50617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFykQ.png?s=128&g=1", "display_name": "Employed Russian", "link": "https://stackoverflow.com/users/50617/employed-russian"}, "is_accepted": true, "score": 1, "last_activity_date": 1570589907, "creation_date": 1570589907, "answer_id": 58296441, "question_id": 58296279, "link": "https://stackoverflow.com/questions/58296279/getting-statuses-after-gdb-finishes/58296441#58296441", "title": "Getting statuses after gdb finishes", "body": "<blockquote>\n  <p>Is there a way to capture the exit code in the prompt, 5, after gdb has finished?</p>\n</blockquote>\n\n<p>In GDB, you could use <code>$_exitcode</code> <a href=\"https://sourceware.org/gdb/onlinedocs/gdb/Convenience-Vars.html\" rel=\"nofollow noreferrer\">convenience variable</a>.</p>\n\n<blockquote>\n  <p>Does 18473 refer to the thread ID, the (unix) process ID, or something else?</p>\n</blockquote>\n\n<p>The UNIX process ID.</p>\n\n<blockquote>\n  <p>Finally, why it is called an \"inferior\" process?</p>\n</blockquote>\n\n<p>That's just what GDB developers call it. It the same as \"the process GDB is debugging\" (as opposed to the GDB process itself), and is much shorter. It's also \"inferior\" to GDB in the sense that GDB is controlling it (making it stop, single-step, or run as GDB desires).</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user12050586"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 58296441, "answer_count": 1, "score": 2, "last_activity_date": 1570589907, "creation_date": 1570588417, "question_id": 58296279, "link": "https://stackoverflow.com/questions/58296279/getting-statuses-after-gdb-finishes", "title": "Getting statuses after gdb finishes", "body": "<p>When GDB finishes, I get the following output:</p>\n\n<pre><code>\u2500\u2500\u2500 Output/messages \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n[Inferior 1 (process 18473) exited with code 05]\n</code></pre>\n\n<ul>\n<li>Is there a way to capture the exit code in the prompt, <code>5</code>, after gdb has finished?</li>\n<li>Does <code>18473</code> refer to the thread ID, the (unix) process ID, or something else?</li>\n<li>Finally, why it is called an \"inferior\" process? </li>\n</ul>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 42504, "user_id": 1161878, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0157ddd785dc01e95342e3661d34b42a?s=128&d=identicon&r=PG", "display_name": "Gene", "link": "https://stackoverflow.com/users/1161878/gene"}, "edited": false, "score": 3, "creation_date": 1570586555, "post_id": 58296062, "comment_id": 102955661, "body": "<code>for(int i=1; i &lt; argc; i++) {</code>  You have one too many iterations. And <code>argv[0]</code> is the path of the running program. Also, command line args have nothing to do with <code>stdin</code>."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1570586786, "post_id": 58296062, "comment_id": 102955695, "body": "If your question is &quot;how do you debug a seg fault&quot;, you should tell us more about your platform and what debugger you like to use. Getting an explanation for the bug in your code won&#39;t help you nearly as much as learning how to debug problems of this type."}], "answers": [{"tags": [], "owner": {"reputation": 21663, "user_id": 9305398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqJvE.png?s=128&g=1", "display_name": "Acorn", "link": "https://stackoverflow.com/users/9305398/acorn"}, "is_accepted": false, "score": 4, "last_activity_date": 1570586517, "creation_date": 1570586517, "answer_id": 58296081, "question_id": 58296062, "link": "https://stackoverflow.com/questions/58296062/seg-fault-after-for-loop-completes/58296081#58296081", "title": "Seg fault after for loop completes", "body": "<p><code>argv</code> goes from <code>0</code> to <code>argc - 1</code>.</p>\n\n<p>Therefore, your loop condition:</p>\n\n<pre><code>i&lt;=argc\n</code></pre>\n\n<p>is wrong by one. It will access invalid memory which will trigger a segfault.</p>\n"}], "owner": {"reputation": 11, "user_id": 12185410, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gjAGj.jpg?s=128&g=1", "display_name": "cryingfish", "link": "https://stackoverflow.com/users/12185410/cryingfish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1570709359, "creation_date": 1570586290, "question_id": 58296062, "link": "https://stackoverflow.com/questions/58296062/seg-fault-after-for-loop-completes", "title": "Seg fault after for loop completes", "body": "<p>Trying to check stdin args for illegal characters (colon, fullstop and comma). \nUsing strchr. If it finds an illegal char in the args it exits as I'd expect. If all the input is okay then it throws back a seg fault (after checking all the args). Doesn't leave the for loop</p>\n\n<pre><code>int main(int argc, char** argv) {\n    for(int i=0; i&lt;=argc; i++) {\n        const char colon = ':';\n        const char stop = '.';\n        const char comma = ',';\n        char *a, *b, *c;\n        a = strchr(argv[i], colon);\n        b = strchr(argv[i], stop);\n        c = strchr(argv[i], comma);\n\n        if (a != NULL || b != NULL || c != NULL) {\n            printf(\"found invalid char\\n\");\n            return 1;\n        }\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1570586020, "post_id": 58295981, "comment_id": 102955582, "body": "&quot;makes the &quot;reset&quot;&quot; --&gt; things get a little amiss if <code>(character - &#39;a&#39; + n) &lt; 0</code>"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1570594368, "post_id": 58295981, "comment_id": 102956954, "body": "Note that <code>&#39;a&#39;</code> is normally 97; <code>&#39;A&#39;</code> is normally <code>65</code>.  That&#39;s another good reason for using the symbolic version \u2014 you don&#39;t have to remember the values."}], "answers": [{"tags": [], "owner": {"reputation": 21663, "user_id": 9305398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqJvE.png?s=128&g=1", "display_name": "Acorn", "link": "https://stackoverflow.com/users/9305398/acorn"}, "is_accepted": true, "score": 4, "last_activity_date": 1570586271, "last_edit_date": 1570586271, "creation_date": 1570585934, "answer_id": 58296018, "question_id": 58295981, "link": "https://stackoverflow.com/questions/58295981/can-someone-explain-how-the-modulus-work/58296018#58296018", "title": "Can someone explain how the modulus work?", "body": "<p>The <code>%</code> C operator yields the remainder of the integer division.</p>\n\n<p>For instance:</p>\n\n<pre><code>24 % 26 == 24\n25 % 26 == 25\n26 % 26 == 0\n27 % 26 == 1\n</code></pre>\n\n<p>And so on.</p>\n\n<p>Therefore, your example:</p>\n\n<pre><code>65 + (66 - 65 + 5) % 26 == 65 + 6 % 26 == 65 + 6 == 71\n</code></pre>\n\n<p>The remainder is there in case you have lowercase letters, which have a higher code point.</p>\n"}, {"tags": [], "owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "is_accepted": false, "score": 1, "last_activity_date": 1570705152, "last_edit_date": 1570705152, "creation_date": 1570590340, "answer_id": 58296499, "question_id": 58295981, "link": "https://stackoverflow.com/questions/58295981/can-someone-explain-how-the-modulus-work/58296499#58296499", "title": "Can someone explain how the modulus work?", "body": "<p>It's a hallmark of the modulus operator that it \"wraps around\".  One way of thinking about it involves what's sometimes called \"<a href=\"https://en.wikipedia.org/wiki/Clock_arithmetic\" rel=\"nofollow noreferrer\">clock arithmetic</a>\".</p>\n\n<p>Let's look at some integers (first row) and their remainders modulo three (second row).  You can clearly see that although the numbers keep getting bigger and bigger, the remainders never get bigger than 2, they keep wrapping around 0, 1, 2, 0, 1, 2.</p>\n\n<pre><code>1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25\n1  2  0  1  2  0  1  2  0  1  2  0  1  2  0  1  2  0  1  2  0  1  2  0  1\n</code></pre>\n\n<p>And obviously this works the same for numbers modulo 26.</p>\n\n<p>But in the basic recipe, you get modulus numbers (\"remainders\") that go from 0 up to N-1.  So how can you use this to do \"modular addition\" on letters in the range <code>[A..Z]</code>?  It's pretty easy to see how, say, <code>M</code> + 5 goes to <code>R</code>, but how do you arrange for <code>Y</code> + 5 to wrap around to <code>D</code>?</p>\n\n<p>Well, if you want to map the character codes for the letters <code>A..Z</code> to and from the integers <code>[0..25]</code>, one simple way is to subtract or add the character code for the letter <code>A</code>, which is 65 in ASCII.  (Actually we don't even need to do things in terms of that \"magic number\", as we'll see in a minute.)</p>\n\n<p>In detail: take your letter value, subtract 65 to map it to the range <code>[0..25]</code>, add your Caesar cipher offset (5), which might take you outside the range <code>[0..25]</code>, take it modulo 26 to wrap it back into the range <code>[0..25]</code> again if necessary, then finally add 65 to map it back to the range <code>[A..Z]</code> again.  In C that's</p>\n\n<pre><code>(((c - 65) + 5) % 26) + 65\n</code></pre>\n\n<p>Or, graphically:</p>\n\n<pre><code>  -65    +5   %26   +65\nA     0     5     5     F\n.     .     .     .     .\n.     .     .     25    Z\n.     .     .     0     A\n.     .     .     .     .\nZ     25   30     4     E\n</code></pre>\n\n<p>This works because, in ASCII at least, the character codes for all the uppercase letters are contiguous.  (But don't try this with <a href=\"https://en.wikipedia.org/wiki/EBCDIC\" rel=\"nofollow noreferrer\">EBCDIC</a>, kids!)</p>\n\n<p>If you wanted it to work for lowercase letters, you'd have to use 97, not 65.</p>\n\n<p>But as I mentioned, using magic numbers like 65 and 97 is (a) a nuisance, because you have to know or look up those numbers, and (b) a sign that you don't know C as well as you could, because there's a nifty shortcut.  Be lazy, let the computer do the dirty work: Since characters in C are represented by their values in the machine's character set, the value of the character \"capital A\" is, literally, the character constant <code>'A'</code>.</p>\n\n<p>So instead of writing</p>\n\n<pre><code>(((c - 65) + 5) % 26) + 65\n</code></pre>\n\n<p>you can just write</p>\n\n<pre><code>(((c - 'A') + 5) % 26) + 'A'\n</code></pre>\n\n<p>Or, for lower case:</p>\n\n<pre><code>(((c - 'a') + 5) % 26) + 'a'\n</code></pre>\n\n<p>Now you don't have to worry about figuring out the magic numbers, and anyone reading the code doesn't have to try to figure them out, either.</p>\n"}], "owner": {"reputation": 61, "user_id": 11524115, "user_type": "registered", "profile_image": "https://graph.facebook.com/1361042054027942/picture?type=large", "display_name": "Henrik Maaland", "link": "https://stackoverflow.com/users/11524115/henrik-maaland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "accepted_answer_id": 58296018, "answer_count": 2, "score": 2, "last_activity_date": 1570705152, "creation_date": 1570585558, "last_edit_date": 1570586382, "question_id": 58295981, "link": "https://stackoverflow.com/questions/58295981/can-someone-explain-how-the-modulus-work", "title": "Can someone explain how the modulus work?", "body": "<p>I have understood everything I think.\nI have not included the rest of the code, but the problem to solve is basically checking all letters and then swap the letters by <code>n</code> places.\nFor example <code>'B'</code> becomes <code>'G'</code> if <code>n</code> is 5.</p>\n\n<p>As I understand it uses ASCII table values so the code below becomes: <code>(65 + ((66 - 65 + 5)) % 26)</code></p>\n\n<pre><code>character = (char)('a' + ((character - 'a' + n)) % 26);\n</code></pre>\n\n<p>What I don't understand is how the modulus <code>% 26</code> makes the \"reset\" to start the alphabet over again. If someone were able to explain this in some easy way I would be grateful.</p>\n"}, {"tags": ["c", "assembly", "gdb"], "comments": [{"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1570585918, "post_id": 58295967, "comment_id": 102955561, "body": "It&#39;s stored on the stack. Do you understand how the stack works on your platform/CPU?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user12050586"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1570585973, "post_id": 58295967, "comment_id": 102955575, "body": "@DavidSchwartz no, not really. When would an item be saved into a register (I thought that was used for arithmetic?) and when would it be on the stack? If you want to answer that in an &quot;answer&quot; I can accept that."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user12050586"}, "edited": false, "score": 0, "creation_date": 1570586491, "post_id": 58296055, "comment_id": 102955649, "body": "Cool, thanks for this response. A few comments: I use <code>info locals</code> but it&#39;s also shown in the bottom-most section automatically so I don&#39;t need to. What does <code>stepi</code> do? I&#39;ve heard of <code>c</code>, <code>n</code>, and <code>s</code>, but never <code>stepi</code>. What/were is <code>$rbp-8</code>? Could you please explain a bit more about what that is and how it works?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user12050586"}, "edited": false, "score": 0, "creation_date": 1570588495, "post_id": 58296055, "comment_id": 102955978, "body": "Thanks, how can you tell it&#39;s at <code>-8</code>? Is it because we have two four-byte integers, and K comes after I ?"}, {"owner": {"reputation": 162629, "user_id": 50617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFykQ.png?s=128&g=1", "display_name": "Employed Russian", "link": "https://stackoverflow.com/users/50617/employed-russian"}, "edited": false, "score": 0, "creation_date": 1570588647, "post_id": 58296055, "comment_id": 102956006, "body": "@TagC198 I can tell it&#39;s at -8 because the current instruction is <code>mov -8(%rbp),%eax</code>, which means: take the 32-bit value stored at frame pointer - 8 and load that value into the <code>$RAX</code> register, clearing high 32-bits of it."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1570610451, "post_id": 58296055, "comment_id": 102963075, "body": "<i>but the program will be much harder to debug</i> This program would be easier to debug <i>in asm</i> with optimization enabled.  Especially if you just use <code>-O1</code> or <code>-Og</code>.  Then the compiler won&#39;t need 2 or 3 instructions to do what should only take 1 if it had values in regs.  Although actually this loop does so little that I only see a load into EAX then <code>mov %eax,%esi</code> as the only wasted instruction so far."}], "tags": [], "owner": {"reputation": 162629, "user_id": 50617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFykQ.png?s=128&g=1", "display_name": "Employed Russian", "link": "https://stackoverflow.com/users/50617/employed-russian"}, "is_accepted": true, "score": 0, "last_activity_date": 1570588236, "last_edit_date": 1570588236, "creation_date": 1570586248, "answer_id": 58296055, "question_id": 58295967, "link": "https://stackoverflow.com/questions/58295967/where-are-local-stack-variables-stored-in-c/58296055#58296055", "title": "Where are local stack variables stored in C?", "body": "<blockquote>\n  <p>I know k=4, but I don't see that value in any of the registers. Where would this number be stored then?</p>\n</blockquote>\n\n<p>If you optimized the program, the value would indeed likely be stored in a register (but the program will be much harder to debug).</p>\n\n<p>Without optimization, the value is stored on stack (to be precise, given the disassembly, it is stored at location <code>$rbp-8</code>), and is loaded into a register by the very next instruction (the one <em>before</em> which you have stopped).</p>\n\n<p>If you do <code>stepi</code> and look at the value of <code>$rax</code>, you will find it right there.</p>\n\n<p>P.S. <code>info locals</code> will give you info about local variables.</p>\n\n<p><strong>Update:</strong></p>\n\n<blockquote>\n  <p>What does stepi do?</p>\n</blockquote>\n\n<p>It executes a single machine instruction, then stops. You can find this out by reading the manual, or by using <code>help stepi</code> GDB command.</p>\n\n<blockquote>\n  <p>What/were is $rbp-8? Could you please explain a bit more about what that is and how it works?</p>\n</blockquote>\n\n<p>That is something that would be covered in every introductory x86 programming book or tutorial.</p>\n\n<p>Briefly, current state of the program execution can be described as a series of linked activation records or \"frames\". On x86 without optimization, the <code>$RBP</code> register is usually used as a frame pointer register (i.e. it points to the current frame). Locals are stored at negative offsets from the frame pointer (here, <code>k</code> is stored at offset -8).</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user12050586"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 58296055, "answer_count": 1, "score": -2, "last_activity_date": 1570588236, "creation_date": 1570585415, "last_edit_date": 1570585800, "question_id": 58295967, "link": "https://stackoverflow.com/questions/58295967/where-are-local-stack-variables-stored-in-c", "title": "Where are local stack variables stored in C?", "body": "<p>I have the following program in C:</p>\n\n<pre><code>1  #include&lt;stdio.h&gt;\n2  \n3  int main(void) {\n4      int i=0;\n5      for (int k=0; k&lt;10; k++)\n6          printf(\"Number: %d\", k);\n7      printf(\"Hello\\n\");\n8      return 0;\n9  }\n</code></pre>\n\n<p>When I run it in <code>gdb</code> it gives me a listing of all the registers, but I don't see the variable <code>k</code> in any of those reigsters. For example, in the below screenshot, I know <code>k=4</code>, but I don't see that value in any of the registers. Where would this number be stored then?</p>\n\n<p><a href=\"https://i.stack.imgur.com/5mKvR.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5mKvR.jpg\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c", "operating-system", "mutex", "semaphore"], "answers": [{"comments": [{"owner": {"reputation": 117, "user_id": 12185282, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lwQMLnUZAeI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcBevbtLYaqdkjGOANpFz1mBnX3KQ/photo.jpg?sz=128", "display_name": "Daniel Decker", "link": "https://stackoverflow.com/users/12185282/daniel-decker"}, "edited": false, "score": 1, "creation_date": 1570587197, "post_id": 58296140, "comment_id": 102955757, "body": "That is super helpful!! Thanks so much for the help!"}], "tags": [], "owner": {"reputation": 404, "user_id": 11505980, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vjvLl.jpg?s=128&g=1", "display_name": "datasplice", "link": "https://stackoverflow.com/users/11505980/datasplice"}, "is_accepted": true, "score": 4, "last_activity_date": 1570588076, "last_edit_date": 1570588076, "creation_date": 1570587074, "answer_id": 58296140, "question_id": 58295917, "link": "https://stackoverflow.com/questions/58295917/modern-system-architecture/58296140#58296140", "title": "Modern System Architecture?", "body": "<p>Hey interesting question! So basically in order to understand what you're asking you have to ensure that you know what it is you're asking. The <strong>critical section</strong> is just the part of a program that should not be concurrently executed by any more than one of that program's processes or threads at a time. Multiple concurrent accesses are not allowed, so all that means is that only one process is interacting with the system at a time. Typically this \"<em>critical section</em>\" accesses a resource like a data structure, or network connection.</p>\n\n<p><strong>Mutual Exclusion</strong> or <strong>mutex</strong> just describes the requirement that only one concurrent process is in the critical section at a time, so concurrent access to shared data must ensure this \"mutual exclusion\".</p>\n\n<p>So this introduces the problem! How do we assure that processes run completely independently of other processes, in other words, how do we ensure \"<em>atomic access</em>\" to the various critical sections by the threads?</p>\n\n<p>There are a few solutions to the \"critical-section problem\" but the one you mention is <em>Peterson's solution</em> so we will discuss that.</p>\n\n<p>Peterson's algorithm is designed for mutual exclusion and allows two tasks to share a single-use resource. They use shared memory for communicating.</p>\n\n<p>In the algorithm, two tasks will compete for the critical section; you'll have to look into mutex, bound waiting and other properties a bit more for a full understanding, but the just of it is that in peterson's method, a process waits 1 turn and 1 turn only to get entrance into the critical section, if it gives priority to the other task or process, then that process will run to completion and hereby allowing the other process to enter the critical section.</p>\n\n<p>That is the original solution proposed.</p>\n\n<p>However this has no guarantee of working on today's multiprocessing modern architectures and it only works for two concurrent tasks. It is kind of messy on modern computers when it comes to reading and writing because it has an out-of-order type of execution, so sometimes sequential operations happen in an incorrect order and thus there are limitations. I suggest you also take a look at <em>locks</em>. Hope that helps :)</p>\n\n<p>Can anyone else think of anything to add that I might have missed?</p>\n"}, {"comments": [{"owner": {"reputation": 117, "user_id": 12185282, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lwQMLnUZAeI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcBevbtLYaqdkjGOANpFz1mBnX3KQ/photo.jpg?sz=128", "display_name": "Daniel Decker", "link": "https://stackoverflow.com/users/12185282/daniel-decker"}, "edited": false, "score": 1, "creation_date": 1570591908, "post_id": 58296404, "comment_id": 102956528, "body": "Thank you for the clarity! I&#39;m better able to wrap my  head around the concepts now!"}], "tags": [], "owner": {"reputation": 25733, "user_id": 559737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5de249db6565b87a2699e131974268a?s=128&d=identicon&r=PG", "display_name": "Brendan", "link": "https://stackoverflow.com/users/559737/brendan"}, "is_accepted": false, "score": 3, "last_activity_date": 1570589578, "creation_date": 1570589578, "answer_id": 58296404, "question_id": 58295917, "link": "https://stackoverflow.com/questions/58295917/modern-system-architecture/58296404#58296404", "title": "Modern System Architecture?", "body": "<blockquote>\n  <p>It is my understanding that systems with multiple CPUs can run into difficulty because of the ordering of memory reads and writes with respect to other reads and writes in memory, but is this the problem with most modern systems?</p>\n</blockquote>\n\n<p>No. Any modern systems with \"less strict\" memory ordering will have ways to make the memory ordering more strict where it matters (e.g. fences).</p>\n\n<blockquote>\n  <p>Are there any advantages to using semaphores VS mutex locks?</p>\n</blockquote>\n\n<p>Mutexes are typically simpler and faster (in the same way that a boolean is simpler than a counter); but ignoring overhead a mutex is equivalent to a semaphore with \"resource count = 1\".</p>\n\n<blockquote>\n  <p>What could happen if we used Peterson's solution to the critical section problem on a modern computer?</p>\n</blockquote>\n\n<p>The big problem here is that most modern operating systems support some kind of multi-tasking (e.g. multiple processes, where each process can have multiple threads), there's usually 100 other processes (just for the OS alone), and modern hardware has power management (where you try to avoid power consumption by putting CPUs to sleep when they can't do useful work). This means that (unbounded) spinning/busy waiting is a horrible idea (e.g. you can have N CPUs being wasted spinning/trying to acquire a lock while the task that currently holds the lock isn't running on any CPU because the scheduler decided that 1234 other tasks should get 10 ms of CPU time each).</p>\n\n<p>Instead; to avoid (excessive) spinning you want to ask the scheduler to block your task until/unless the lock actually can be acquired; and (especially for heavily contended locks) you probably want \"fairness\" (to avoid the risk of timing problems that lead to some tasks being repeatedly lucky while other tasks starve and make no progress).</p>\n\n<p>This ends up being \"no spinning\", or \"brief spinning\" (to avoid scheduler overhead in cases where the task holding the lock actually can/does release it quickly); followed by the task being put on a FIFO queue and the scheduler giving the CPU to a different task or putting the CPU to sleep; where if the lock is released the scheduler wakes up the first task on the FIFO queue. Of course it's never that simple (e.g. for performance you want to do as much as you can in user-space; and you need special care and cooperating between user-space and kernel to avoid race conditions - the lock being released before a task is put on the wait queue).</p>\n\n<p>Fortunately modern systems also provide simpler ways to implement locks (e.g. \"atomic compare and swap\"), so there's no need to resort to Peterson's algorithm (even if its just for insertion/removal of tasks from the real lock's FIFO queue).</p>\n"}], "owner": {"reputation": 117, "user_id": 12185282, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lwQMLnUZAeI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcBevbtLYaqdkjGOANpFz1mBnX3KQ/photo.jpg?sz=128", "display_name": "Daniel Decker", "link": "https://stackoverflow.com/users/12185282/daniel-decker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 58296140, "answer_count": 2, "score": 2, "last_activity_date": 1570589578, "creation_date": 1570584794, "last_edit_date": 1570587854, "question_id": 58295917, "link": "https://stackoverflow.com/questions/58295917/modern-system-architecture", "title": "Modern System Architecture?", "body": "<p>What could happen if we used Peterson's solution to the critical section problem on a modern computer? It is my understanding that systems with multiple CPUs can run into difficulty because of the ordering of memory reads and writes with respect to other reads and writes in memory, but is this the problem with most modern systems? Are there any advantages to using semaphores VS mutex locks?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 1300, "user_id": 5310914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/356226ff4e2533cea7927fb6229854c5?s=128&d=identicon&r=PG&f=1", "display_name": "jknotek", "link": "https://stackoverflow.com/users/5310914/jknotek"}, "edited": false, "score": 0, "creation_date": 1570591193, "post_id": 58295907, "comment_id": 102956397, "body": "Please post the error you&#39;re receiving."}, {"owner": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "edited": false, "score": 0, "creation_date": 1570601857, "post_id": 58295907, "comment_id": 102958851, "body": "Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, and please raise the warning level of your compiler to the max - and change your code until all warnings and errors are gone."}], "answers": [{"tags": [], "owner": {"reputation": 353, "user_id": 12114444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73c48534ac3fc31b1985899c6a11a50a?s=128&d=identicon&r=PG&f=1", "display_name": "SaltyPleb", "link": "https://stackoverflow.com/users/12114444/saltypleb"}, "is_accepted": false, "score": 0, "last_activity_date": 1570585073, "creation_date": 1570585073, "answer_id": 58295944, "question_id": 58295907, "link": "https://stackoverflow.com/questions/58295907/passing-structures-to-functions-on-a-recursive-program-how-to-fix-compile-error/58295944#58295944", "title": "Passing structures to functions on a recursive program. How to fix compile error C2664?", "body": "<p>Your function helper has been prototyped as <code>void helper(CardDeck *leftDeck, CardDeck *rightDeck, CardDeck  *currentDeck)</code> that means it takes as first argument a <code>CardDeck *</code>, as second argument <code>CardDeck *</code> and lastly another <code>CardDeck *</code></p>\n\n<p>and the prototype definition as <code>void helper(CardDeck leftDeck, CardDeck rightDeck, CardDeck * currentDeck)</code> which does not match the previous prototype. To fix your problem, try adding <code>*</code> to both <code>leftDec</code> and <code>rightDeck</code> so it matches the prototype.</p>\n"}], "owner": {"reputation": 21, "user_id": 12122816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/831c236d33dff69e43e5ba272307e86b?s=128&d=identicon&r=PG&f=1", "display_name": "USCCT", "link": "https://stackoverflow.com/users/12122816/uscct"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 22, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570594383, "creation_date": 1570584639, "last_edit_date": 1570594383, "question_id": 58295907, "link": "https://stackoverflow.com/questions/58295907/passing-structures-to-functions-on-a-recursive-program-how-to-fix-compile-error", "title": "Passing structures to functions on a recursive program. How to fix compile error C2664?", "body": "<p>I am trying to pass structures to functions in recursive program. I'm not sure if the structures are passing to the functions.</p>\n\n<pre><code>// poker calls interleave\n// interleave calls helper\n\nvoid interleave(CardDeck *leftDeck, CardDeck *rightDeck);\n\nvoid poker(CardDeck origDeck);\n\nvoid helper(CardDeck *leftDeck, CardDeck *rightDeck, CardDeck *currentDeck);\n\nvoid poker(CardDeck origDeck)\n{\n    CardDeck leftDeck =     \n    {\n        leftDeck.cards[MAX_SIZE] = {0}, \n        leftDeck.size = MAX_SIZE\n    };\n\n    CardDeck rightDeck =        \n    {\n        rightDeck.cards[MAX_SIZE] = {0},    \n        rightDeck.size = MAX_SIZE\n    };\n}\nvoid interleave(CardDeck  *leftDeck, CardDeck  *rightDeck)\n{\n    int leftloop = leftDeck-&gt;size;\n    int rightloop = rightDeck-&gt;size;\n    //ger error when I try to call helper\n    helper(*leftDeck, *rightDeck, &amp;currentDeck);\n}\n\nvoid helper(CardDeck leftDeck, CardDeck rightDeck, CardDeck *currentDeck)\n{\n    int leftFlag;\n    int rightFlag;\n    leftFlag = 20;\n    rightFlag =30;\n}\n</code></pre>\n\n<p>Keep getting error with the call helper function. Added some more code to clarify. Thanks.</p>\n"}, {"tags": ["c", "algorithm", "binary-tree"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1570584576, "post_id": 58295863, "comment_id": 102955334, "body": "I would use a depth-first search. That way, when you find the desired node, the stack contains all of the ancestors of that node."}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1570584798, "post_id": 58295863, "comment_id": 102955373, "body": "Do children have pointers to their parent?"}], "answers": [{"comments": [{"owner": {"reputation": 2026, "user_id": 3789665, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/38983281a7926f50843153d9e0788cdf?s=128&d=identicon&r=PG&f=1", "display_name": "greybeard", "link": "https://stackoverflow.com/users/3789665/greybeard"}, "edited": false, "score": 1, "creation_date": 1570605364, "post_id": 58296008, "comment_id": 102960511, "body": "<code>If you reach a leaf, return INTMAX</code> good plan. <code>if (node == NULL)       return min;</code> dubious implementation."}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2026, "user_id": 3789665, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/38983281a7926f50843153d9e0788cdf?s=128&d=identicon&r=PG&f=1", "display_name": "greybeard", "link": "https://stackoverflow.com/users/3789665/greybeard"}, "edited": false, "score": 0, "creation_date": 1570641280, "post_id": 58296008, "comment_id": 102979793, "body": "@graybeard, Fixed. (This is just one of the reasons why we expect question to include a minimum, runnable demonstration of the problem. Without that, we can&#39;t correctly test.)"}], "tags": [], "owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1570641271, "last_edit_date": 1570641271, "creation_date": 1570585837, "answer_id": 58296008, "question_id": 58295863, "link": "https://stackoverflow.com/questions/58295863/how-to-get-the-minimum-ancestor-of-a-node-in-a-binary-tree/58296008#58296008", "title": "How to get the minimum ancestor of a node in a binary tree", "body": "<p>As you traverse the tree, keep track of the minimum you've found on that path. This can easily be done by adding a third argument, the minimum found so far.</p>\n\n<p>If you find the target, return the minimum.</p>\n\n<p>If you reach a leaf, return <code>INTMAX</code>.</p>\n\n<pre><code>int MinParent_(struct Node *node, int target, int min) {\n   if (node == NULL)\n      return INTMAX;\n\n   if (node-&gt;data == target)\n      return min;\n\n   if (node-&gt;data &lt; min)\n      min = node-&gt;data;\n\n   int rv = MinParent_(node-&gt;left, target, min);\n   if (rv != INTMAX)\n      return rv;\n\n   return MinParent_(node-&gt;right, target, min);\n}\n\nint MinParent(struct Node *root, int target) {\n   return MinParent_(root, target, INTMAX);\n}\n</code></pre>\n\n<p>This uses a sentinel value. This means that the data can't contain <code>INTMAX</code>. We could use a pointer to node with the minimum value instead of the minimum value itself to remove that restriction.</p>\n\n<pre><code>struct Node *MinParent_(struct Node *node, int target, struct Node *min_node) {\n   if (node == NULL)\n      return NULL;\n\n   if (node-&gt;data == target)\n      return min_node;\n\n   if (!min_node || node-&gt;data &lt; min_node-&gt;data)\n      min_node = node;\n\n   struct Node *rv = MinParent_(node-&gt;left, target, min_node);\n   if (rv)\n      return rv;\n\n   return MinParent_(node-&gt;right, target, min_node);\n}\n\nstruct Node *MinParent(struct Node *root, int target) {\n   return MinParent_(root, target, NULL);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1570589542, "post_id": 58296245, "comment_id": 102956132, "body": "It should be noted that this approach adds O(N) memory cost on top of the O(N) traversal cost to map the entire tree - but that may be amortized, yet we don&#39;t know how many lookups there are compared to N. And at that point one might as well store parent pointers at the same O(N) memory cost, but the traversal from <code>target</code> to <code>root</code> becomes O(log N). Given the flexibility this affords, it may be a more general approach. The access and modification patterns matter now since cache stalls are in the real picture. In a trivial implementation, <code>log N</code> extra stalls would be incurred per lookup."}], "tags": [], "owner": {"reputation": 5719, "user_id": 5348875, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e050e66d97a3f54b0453533428088e6c?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/5348875/daniel"}, "is_accepted": false, "score": 1, "last_activity_date": 1570600563, "last_edit_date": 1570600563, "creation_date": 1570588082, "answer_id": 58296245, "question_id": 58295863, "link": "https://stackoverflow.com/questions/58295863/how-to-get-the-minimum-ancestor-of-a-node-in-a-binary-tree/58296245#58296245", "title": "How to get the minimum ancestor of a node in a binary tree", "body": "<p>You can solve it by performing a BFSs (or DFSs, doesn't really matter), and each node should carry the minimum value of all ancestors. For example:</p>\n\n<pre><code>               3(3)\n           5(3)    6(3)\n        2(3)\n     1(2)  4(2)\n</code></pre>\n\n<p>In order to store the answers for all nodes, let's create a map <code>minimumAncestor</code>.</p>\n\n<p>Given a node <code>u</code>, the algorithm to evaluate all the minimum ancestors of all the nodes in the subtrees rooted in <code>u</code> is:</p>\n\n<pre><code>DFS(u, minimumInAncestors){\n    minimumAncestor[u] = minimumInAncestors;\n    foreach child v of u:\n        DFS(v, min(u, minimumInAncestors));\n}\n</code></pre>\n\n<p>To fill the map, you call <code>DFS(root, root)</code>.</p>\n\n<p>By doing this, the map <code>minimumAncestor[u]</code> should return the right minimum ancestor of any node <code>u</code> by the end of the DFSs (with exception of the root, whose minimum ancestor is itself).</p>\n"}], "owner": {"reputation": 25, "user_id": 10558882, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-xFw09rXJYSM/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBqqzJwfzTvkGeO98xKyldatCbz_Q/mo/photo.jpg?sz=128", "display_name": "Dinho", "link": "https://stackoverflow.com/users/10558882/dinho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 58296008, "answer_count": 2, "score": 0, "last_activity_date": 1570641271, "creation_date": 1570584076, "last_edit_date": 1570604339, "question_id": 58295863, "link": "https://stackoverflow.com/questions/58295863/how-to-get-the-minimum-ancestor-of-a-node-in-a-binary-tree", "title": "How to get the minimum ancestor of a node in a binary tree", "body": "<p>Let T be the tree</p>\n\n<pre><code>           12\n       6        3\n   13\n1     14   \n</code></pre>\n\n<p>For the node (1), the minimum ancestor would be 6. For node (3), the minimum ancestor would be 12. I am trying to write a recursive solution that returns the minimum ancestor of a node. </p>\n\n<pre><code>int MinParent(struct Node *root, struct Node *target) {\n    if (root == NULL) {\n        return INT_MAX;\n    }\n\n    if (root-&gt;data == target-&gt;data) {\n        return INT_MAX;\n    }\n\n    int res = root-&gt;data;\n\n    if ((MinParent(root-&gt;left, target) == INT_MAX) || (MinParent(root-&gt;right, target) == INT_MAX)) {\n        int res = min(??);\n\n        return ??;\n    }\n\n    return res;\n}\n</code></pre>\n\n<p>I am able to get to each ancestor node for a given target node, but I can't figure out how to get the minimum for these nodes.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 307, "user_id": 2426775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1b853e4e2468db3f23ca4ed43529f10?s=128&d=identicon&r=PG", "display_name": "Luc", "link": "https://stackoverflow.com/users/2426775/luc"}, "edited": false, "score": 0, "creation_date": 1570583101, "post_id": 58295729, "comment_id": 102955073, "body": "Please reformat your code so that it&#39;s inside a code sample section. Also, please include the actual data printed. Thanks!"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1570586192, "post_id": 58295729, "comment_id": 102955611, "body": "<code>double magnitude, ...   *magnitude = sqrt(...</code>  and <code>atan(z1imag&#47;z1real)180&#47;3.1415</code> implies true code not posted.  Best to post real code that compiled."}], "answers": [{"tags": [], "owner": {"reputation": 307, "user_id": 2426775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1b853e4e2468db3f23ca4ed43529f10?s=128&d=identicon&r=PG", "display_name": "Luc", "link": "https://stackoverflow.com/users/2426775/luc"}, "is_accepted": false, "score": 1, "last_activity_date": 1570584012, "creation_date": 1570584012, "answer_id": 58295857, "question_id": 58295729, "link": "https://stackoverflow.com/questions/58295729/pointers-not-returning-correct-value-in-print-statement/58295857#58295857", "title": "Pointers not returning correct value in print statement", "body": "<p>Not sure if this is the idea (I didn't check on the math aspect of this, and the \"180/3.1415\" after the atan() call is missing an operand), but I think this is your code with the pointers adjusted:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\nvoid cal_mag_phase(double z1real, double z1imag, double* magnitude, double* phase)\n{\n  //magnitude is square root of components squared\n  *magnitude = sqrt(pow(z1real,2)+pow(z1imag,2));\n  //phase is calculated then converted to degrees\n  *phase = atan(z1imag/z1real);// what's this?--&gt;180/3.1415;\n}\n\nint main(void) {\n  double magnitude, phase;\n  double z1real, z1imag;\n\n  z1real = 1;\n  z1imag = 1;\n\n  cal_mag_phase(z1real, z1imag, &amp;magnitude, &amp;phase);\n  printf(\"magnitude and phase (in degrees) of (%.2lf + %.2lfi) are %lf and %lf\\n\", z1real, z1imag, magnitude, phase);\n}\n</code></pre>\n\n<p>I also added the variables and values for the complex Z1.</p>\n\n<p>A note on your use of pointers, you were missing an '*' before one the parameters.</p>\n\n<p>Other than that, I just reformatted your code. I know you're new here, but always try to clearly format code so that it's easier to read, and also test (in this case, including the declaration for Z1, which was needed to run the code).</p>\n"}], "owner": {"reputation": 1, "user_id": 12179494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fc923c4adeb93bf61772319007c82b4?s=128&d=identicon&r=PG&f=1", "display_name": "evan007", "link": "https://stackoverflow.com/users/12179494/evan007"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570586300, "creation_date": 1570582818, "last_edit_date": 1570586300, "question_id": 58295729, "link": "https://stackoverflow.com/questions/58295729/pointers-not-returning-correct-value-in-print-statement", "title": "Pointers not returning correct value in print statement", "body": "<p>I can't get this code to work. when i ran the debugger, magnitude and phase are calculated correctly but when they are printed, 180 and 0 are always printed. Here's the relevant code: function call in main: </p>\n\n<pre><code>double *magnitude, *phase;\n\ncal_mag_phase(z1real, z1imag, &amp;magnitude, &amp;phase); \nprintf(\"magnitude and phase (in degrees) of (%.2lf + %.2lfi) are %lf and %lf\\n\", \n    z1real, z1imag, &amp;magnitude, &amp;phase);\n</code></pre>\n\n<p>calculation function:</p>\n\n<pre><code>void cal_mag_phase(double z1real, double z1imag, double magnitude, double *phase)\n{ \n    //magnitude is square root of components squared \n    *magnitude = sqrt(pow(z1real,2)+pow(z1imag,2)); \n    //phase is calculated then converted to degrees \n    *phase = atan(z1imag/z1real)180/3.1415;\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 2, "creation_date": 1570582750, "post_id": 58295706, "comment_id": 102955009, "body": "<code>%s</code> into one char is risky (i.e. wrong). It&#39;ll try to write a terminator out of bounds."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1570582807, "post_id": 58295706, "comment_id": 102955029, "body": "... which is quite possibly why it&#39;s broken. Please use the answer section for answers, @Ry-, not the comments section."}, {"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1570582891, "post_id": 58295706, "comment_id": 102955044, "body": "@LightnessRacesinOrbit I didn&#39;t think that was why it was broken, so, comment."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1570583122, "post_id": 58295706, "comment_id": 102955075, "body": "@Ry- That&#39;s exactly why we have a peer review system on answers. As a mod you should know how Q&amp;A works please! Use the comments section for requesting clarification."}, {"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1570583192, "post_id": 58295706, "comment_id": 102955086, "body": "@LightnessRacesinOrbit Post advice I think doesn&#39;t answer the question in the answer section in the hopes that peer review will delete it? Questionable."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1570583316, "post_id": 58295706, "comment_id": 102955105, "body": "Sad to see a mod not comprehending the basic principles of the Q&amp;A site. Obviously this won&#39;t go anywhere useful, so let&#39;s move on."}, {"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1570583427, "post_id": 58295706, "comment_id": 102955125, "body": "@LightnessRacesinOrbit &quot;use comments to request clarification <b>or suggest improvements</b>&quot; (e.g. pointing out UB so it can be removed to make the question more focused). I think that fits?"}, {"owner": {"reputation": 1, "user_id": 12086234, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6-scB6jqAYQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfPqLjQiypRic_eKZk0WZRq792K8g/photo.jpg?sz=128", "display_name": "Anubhav Kundu", "link": "https://stackoverflow.com/users/12086234/anubhav-kundu"}, "edited": false, "score": 0, "creation_date": 1570583935, "post_id": 58295706, "comment_id": 102955221, "body": "I changed it to %c still doesn&#39;t fix anything."}], "answers": [{"tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": -1, "last_activity_date": 1570583842, "creation_date": 1570583842, "answer_id": 58295840, "question_id": 58295706, "link": "https://stackoverflow.com/questions/58295706/why-is-this-creating-two-inputs-instead-of-one/58295840#58295840", "title": "Why is this creating two inputs instead of one", "body": "<pre><code> scanf(\"%s\\n\", &amp;answer);\n</code></pre>\n\n<p>Here you used the <code>%s</code> flag in the format string, which tells <code>scanf</code> to read as many characters as possible into a pre-allocated array of <code>char</code>s, then a null terminator to make it a C-string.</p>\n\n<p>However, <code>answer</code> is a single <code>char</code>. Just writing the terminator is enough to go out of bounds, causing <em>undefined behaviour</em> and strange mishaps.</p>\n\n<p>Instead, you should have used <code>%c</code>. This reads a single character into a <code>char</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "is_accepted": false, "score": 0, "last_activity_date": 1570585114, "last_edit_date": 1570585114, "creation_date": 1570584746, "answer_id": 58295913, "question_id": 58295706, "link": "https://stackoverflow.com/questions/58295706/why-is-this-creating-two-inputs-instead-of-one/58295913#58295913", "title": "Why is this creating two inputs instead of one", "body": "<p>Whitespace in <code>scanf</code> format strings, like the <code>\\n</code> in <code>\"%c\\n\"</code>, tries to match any amount of whitespace, and <code>scanf</code> doesn\u2019t know that there\u2019s no whitespace left to skip until it encounters something that isn\u2019t whitespace (like the second character you type) or the end of input. You provide it with <code>=\\n</code>, which fills in the <code>%c</code> and waits until the whitespace is over. Then you provide it with another <code>=</code> and <code>scanf</code> returns. The second time around, the character could be anything and it\u2019d still work.</p>\n\n<p>Skip <em>leading</em> whitespace instead (and use the correct specifier for one character, <code>%c</code>, as has been mentioned):</p>\n\n<pre><code>scanf(\" %c\", &amp;answer);\n</code></pre>\n\n<p>Also, it\u2019s good practice to make sure you actually succeeded in reading something, especially when failing to read something means leaving it uninitialized and trying to read it later (another example of undefined behaviour). So check <code>scanf</code>\u2019s return value, which should match the number of conversion specifiers you provided:</p>\n\n<pre><code>if (scanf(\" %c\", &amp;answer) != 1) {\n    return EXIT_FAILURE;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 12086234, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6-scB6jqAYQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfPqLjQiypRic_eKZk0WZRq792K8g/photo.jpg?sz=128", "display_name": "Anubhav Kundu", "link": "https://stackoverflow.com/users/12086234/anubhav-kundu"}, "edited": false, "score": 0, "creation_date": 1570592998, "post_id": 58296104, "comment_id": 102956710, "body": "Than you so much for the response, can you further clarify why the randomGen is not right?"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 1, "user_id": 12086234, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6-scB6jqAYQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfPqLjQiypRic_eKZk0WZRq792K8g/photo.jpg?sz=128", "display_name": "Anubhav Kundu", "link": "https://stackoverflow.com/users/12086234/anubhav-kundu"}, "edited": false, "score": 0, "creation_date": 1570593214, "post_id": 58296104, "comment_id": 102956743, "body": "@anubhav: Suppose upper is 2 and lower is 4, so you want a random number between 2 and 4. But you get a random number between 0 and 5, because that&#39;s what <code>rand()%6</code> gives you. What you want is <code>lower + rand()%(upper + 1 - lower)</code> assuming that <code>lower</code> and <code>upper</code> defines an <i>inclusive</i> range. (If you meant from <code>lower</code> to <code>upper</code> not including <code>upper</code>, then ditch the <code>+ 1</code>.)"}], "tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": false, "score": 0, "last_activity_date": 1570586717, "last_edit_date": 1592644375, "creation_date": 1570586717, "answer_id": 58296104, "question_id": 58295706, "link": "https://stackoverflow.com/questions/58295706/why-is-this-creating-two-inputs-instead-of-one/58296104#58296104", "title": "Why is this creating two inputs instead of one", "body": "<p>As has been commented, you should not use the scanf format <code>%s</code> if you want to read a single character. Indeed, you should never use the scanf format <code>%s</code> for any purpose, because it will read an arbitrary number of characters into the buffer you supply, so you have no way to ensure that your buffer is large enough. So you should <em>always</em> supply a maximum character count. For example, <code>%1s</code> will read only one character. But note: that will still not work with a <code>char</code> variable, since it reads a <em>string</em> and in C, strings are arrays of <code>char</code> <em>terminated with a <code>NUL</code></em>. (<code>NUL</code> is the character whose value is 0, also sometimes spelled <code>\\0</code>. You could just write it as 0, but don't confuse that with the character <code>'0'</code> (whose value is 48, in most modern systems).</p>\n<p>So a string containing a single character actually occupies two bytes: the character itself, and a <code>NUL</code>.</p>\n<p>If you just want to read a single character, you could use the format <code>%c</code>. <code>%c</code> has a few differences from <code>%s</code>, and you need to be aware of all of them:</p>\n<ol>\n<li><p>The default maximum length read by <code>%s</code> is &quot;unlimited&quot;. The default for <code>%c</code> is 1, so <code>%c</code> is identical to <code>%1c</code>.</p>\n</li>\n<li><p><code>%s</code> will put a <code>NUL</code> at the end of the characters read (which you need to leave space for), so the result is a C string. <code>%c</code> does not add the <code>NUL</code>, so you only need to leave enough space for the characters themselves.</p>\n</li>\n<li><p><code>%s</code> skips whitespace before storing any characters. <code>%c</code> does not ignore whitespace. Note: a newline character (at the end of each line) is considered whitespace.</p>\n</li>\n</ol>\n<p>So, based on the first two rules, you could use either of the following:</p>\n<pre><code>char theShortString[2];\nscanf(&quot;%1s&quot;, theShortString);\nchar theChar = theShortString[0];\n</code></pre>\n<p>or</p>\n<pre><code>char theChar;\nscanf(&quot;%c&quot;, &amp;theChar);\n</code></pre>\n<p>Now, when you used</p>\n<pre><code>scanf(&quot;%s&quot;, &amp;theChar);\n</code></pre>\n<p>you will cause <code>scanf</code> to write a <code>NUL</code> (that is, a zero) in the byte <em>following <code>theChar</code></em>, which quite possibly is part of a different variable. That's really bad. Don't do that. Ever. Even if you get away with it today, it will get you into serious trouble some time soon.</p>\n<p>But that's not the problem here. The problem here is with what comes after the <code>%s</code> format code.</p>\n<p>Let's take a minute (ok, maybe half an hour) to read the documentation of <code>scanf</code>, by typing <code>man scanf</code>. What we'll see, quite near the beginning, is: (emphasis added)</p>\n<blockquote>\n<p>A directive is one of the following:</p>\n<ul>\n<li>A sequence of white-space characters (space, tab, newline, etc.; see <code>isspace(3)</code>). This directive matches <strong>any amount of white space</strong>, including none, in the input.</li>\n</ul>\n</blockquote>\n<p>So when you use <code>&quot;%s\\n&quot;</code>, <code>scanf</code> will do the following:</p>\n<ol>\n<li>skip over any white-space characters in the input buffer.</li>\n<li>read the following word up to but not including the next white-space character, and store it in the corresponding argument, followed by a <code>NUL</code>.</li>\n<li>skip over any white-space following the word which it just read.</li>\n</ol>\n<p>It does the last step because <code>\\n</code> \u2014 a newline \u2014 is itself white-space, as noted in the quote from the manpage.</p>\n<p>Now, what you actually typed was <code>&lt;</code> followed by a newline, so the word read at step 2 will be just he character <code>&lt;</code>. The newline you typed afterwards is white-space, so it will be ignored by step 3. But that doesn't satisfy step 3, because <code>scanf</code> (as documented) will ignore &quot;any amount of white space&quot;. It doesn't know that there isn't more white space coming. You might, for example, be intending to type a blank line (that is, just a newline), in which case <code>scanf</code> must skip over that newline as well. So <code>scanf</code> keeps on reading.</p>\n<p>Since the input buffer is now empty, the I/O library must now read the next line, which it does. And now you type another <code>&lt;</code> followed by a newline. Clearly, the <code>&lt;</code> is not white-space, so <code>scanf</code> leaves it in the input buffer and returns, knowing that it has done its duty.</p>\n<p>Your program then checks the word read by <code>scanf</code> and realises that it is not an <code>=</code>. So it loops again, and the <code>scanf</code> executes again. Now there is already data in the input buffer (the second <code>&lt;</code> which you typed), so <code>scanf</code> can immediately store that word. But it will again try to skip &quot;any amount of white space&quot; afterwards, which by the same logic as above will cause it to read a third line of input, which it leaves in the input buffer.</p>\n<p>The end result is that you always need to type the next line before the previous line is passed back to your program. Obviously that's not what you want.</p>\n<p>So what's the solution? Simple. <strong>Don't put a <code>\\n</code> at the end of your format string.</strong></p>\n<p>Of course, you do want to skip that newline character. But you don't need to skip it until the next call to <code>scanf</code>. If you used a <code>%1s</code> format code, <code>scanf</code> would automatically skip white-space before returning input, but as we've seen above, <code>%c</code> is far simpler if you only want to read a single character. Since <code>%c</code> does not skip white-space before returning input, you need to insert an explicit directive to do so:  a white-space character. It's usual to use an actual space rather than a newline for this purpose, so we would normally write this loop as:</p>\n<pre><code>char answer;\nsrand(time(0)); /* Only call srand once, at the beginning of the program */\ndo {\n   randomGen = rand()%(upper + lower);  /* This is not right */\n   printf(&quot;%d\\n&quot;, randomGen);\n   scanf(&quot; %c&quot;, &amp;answer);\n} while (answer != '=');\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12086234, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6-scB6jqAYQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfPqLjQiypRic_eKZk0WZRq792K8g/photo.jpg?sz=128", "display_name": "Anubhav Kundu", "link": "https://stackoverflow.com/users/12086234/anubhav-kundu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1570586717, "creation_date": 1570582581, "question_id": 58295706, "link": "https://stackoverflow.com/questions/58295706/why-is-this-creating-two-inputs-instead-of-one", "title": "Why is this creating two inputs instead of one", "body": "<p><a href=\"https://i.imgur.com/FLxF9sP.png\" rel=\"nofollow noreferrer\">https://i.imgur.com/FLxF9sP.png</a></p>\n\n<p>As shown in the link above I have to input '&lt;' twice instead of once, why is that? Also it seems that the first input is ignored but the second '&lt;' is the one the program recognizes.</p>\n\n<p>The same thing occurs even without a loop too.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\nint main(){\n\n  int randomGen, upper, lower, end, newRandomGen;\n  char answer;\n\n  upper = 100;\n  lower = 1;\n  end = 1;\n\n  do {\n\n   srand(time(0));\n   randomGen = rand()%(upper + lower);\n   printf(\"%d\\n\", randomGen);\n   scanf(\"%s\\n\", &amp;answer);\n\n  }while(answer != '=');\n\n\n\n\n\n}\n</code></pre>\n"}, {"tags": ["c", "avr", "spi"], "comments": [{"owner": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "edited": false, "score": 0, "creation_date": 1570602695, "post_id": 58295693, "comment_id": 102959198, "body": "1. You can look into the sources of the Arduino libraries to see how they do it. You need to understand what&#39;s in there, and then strip off all stuff you don&#39;t need."}, {"owner": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "edited": false, "score": 0, "creation_date": 1570602846, "post_id": 58295693, "comment_id": 102959279, "body": "2. You take your oscilloscope and record the signals. There are quite affordable devices, and if you lower the SPI clock they can show decend results. Then look at the traces and compare them to the expected signals."}, {"owner": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "edited": false, "score": 0, "creation_date": 1570602924, "post_id": 58295693, "comment_id": 102959305, "body": "3. To find working examples for SPI on ATmega32 you can use your beloved search engine for the web. There should be lots of them."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 11619438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17b814223813e967e4990c3fbd9950e5?s=128&d=identicon&r=PG&f=1", "display_name": "weissvhdl", "link": "https://stackoverflow.com/users/11619438/weissvhdl"}, "edited": false, "score": 0, "creation_date": 1570623839, "post_id": 58299954, "comment_id": 102970334, "body": "Yes, i have TXB0108 voltage level translator connected into my display and uC. This is schematic:   <a href=\"https://www.waveshare.com/w/upload/5/5b/1.54inch_e-Paper_Schematic.pdf\" rel=\"nofollow noreferrer\">waveshare.com/w/upload/5/5b/1.54inch_e-Paper_Schematic.pdf</a>  On Vccb i connected 5v from uC, on VccA i connected 3,3V from dc/dc. X&#39;(pins 1-10) are connected into PFC24, X(pins 11-20) are connected into uC SPI."}, {"owner": {"reputation": 7801, "user_id": 102238, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0650f481b609a9de7f93ea4dc676fdf5?s=128&d=identicon&r=PG", "display_name": "ChrisBD", "link": "https://stackoverflow.com/users/102238/chrisbd"}, "reply_to_user": {"reputation": 13, "user_id": 11619438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17b814223813e967e4990c3fbd9950e5?s=128&d=identicon&r=PG&f=1", "display_name": "weissvhdl", "link": "https://stackoverflow.com/users/11619438/weissvhdl"}, "edited": false, "score": 0, "creation_date": 1570692937, "post_id": 58299954, "comment_id": 102995142, "body": "Thanks for that. I&#39;m a bit busy today, but I&#39;ll have  look at it when I get the chance. I&#39;m assuming that its a version 2 display."}], "tags": [], "owner": {"reputation": 7801, "user_id": 102238, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0650f481b609a9de7f93ea4dc676fdf5?s=128&d=identicon&r=PG", "display_name": "ChrisBD", "link": "https://stackoverflow.com/users/102238/chrisbd"}, "is_accepted": false, "score": 0, "last_activity_date": 1570693805, "last_edit_date": 1570693805, "creation_date": 1570609613, "answer_id": 58299954, "question_id": 58295693, "link": "https://stackoverflow.com/questions/58295693/programming-e-ink-display-on-atmega32-without-arduino/58299954#58299954", "title": "Programming e-ink display on atmega32 without arduino", "body": "<p>I'd start with the display manufacturers documentation first. </p>\n\n<p>Typically these devices need specific drivers and the manufacturer supplies these along with some example code. </p>\n\n<p>The displays themselves normally require some driver hardware, is this included in or with your display module?</p>\n\n<p>I'm sorry but as you don't give any information regarding the display other than where you bought it from and its size I can't be more specific.</p>\n\n<p><strong>edit</strong>\nJust had a very quick scan through and see that there's a link to a library written to drive these using SPI  - <a href=\"https://github.com/ZinggJM/GxEPD\" rel=\"nofollow noreferrer\">Library source on GIT hub</a>\nYou may be able to adapt it, or glean something useful from the source code.</p>\n"}], "owner": {"reputation": 13, "user_id": 11619438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17b814223813e967e4990c3fbd9950e5?s=128&d=identicon&r=PG&f=1", "display_name": "weissvhdl", "link": "https://stackoverflow.com/users/11619438/weissvhdl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 169, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570693805, "creation_date": 1570582413, "last_edit_date": 1570602084, "question_id": 58295693, "link": "https://stackoverflow.com/questions/58295693/programming-e-ink-display-on-atmega32-without-arduino", "title": "Programming e-ink display on atmega32 without arduino", "body": "<p>i've bought eink 1,54 display module from waveshare, i want to program atmega32 and design a gui with keys on this eink. I wrote a simple code using spi in eclipse:</p>\n\n<pre><code>  #include &lt;avr/io.h&gt;\n  #include &lt;util/delay.h&gt;\n\n  void Inicjacja_spi()\n  {\n      DDRB = ( 1 &lt;&lt; PB5 ) | ( 1 &lt;&lt; PB7 ) | ( 1 &lt;&lt; PB4 );                                      \n\n      SPCR = ( 1 &lt;&lt; SPE ) | ( 1 &lt;&lt; MSTR ) | (1&lt;&lt;SPI2X) |( 1 &lt;&lt; SPR1 ) | ( 1 &lt;&lt; SPR0 );   \n  }                            \n\n\n  void Wyslij_spi(unsigned char bajt)\n  {\n      SPDR = bajt;                        \n\n      while( ! bit_is_set( SPSR, SPIF ) );\n  }\n\n\n  int main()\n  {\n      unsigned char bajt[] = {0x04,0x20,0x21,0x22,0x25,0x26,0x27};\n\n      Inicjacja_spi();\n\n      for(int i=0; i&lt;8; i++)\n          Wyslij_spi(bajt[i]);\n\n       while(1)\n       {\n       }\n   }\n</code></pre>\n\n<p>I have read about how to send commands through spi to this eink but it didnt work. Do i have to write complicated libraries to send some data into display? I guess it should work using simple commands, but maybe i'am doing somethin wrong. If someone can tell me how can i write simple commands into this thing because i dont understand those documentations. Simple working example should help me.</p>\n"}, {"tags": ["c", "math"], "comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1570581674, "post_id": 58295600, "comment_id": 102954821, "body": "Don&#39;t use <code>double n</code>, use <code>int n</code> otherwise risk problems with <code>n &lt;= 0</code>. <a href=\"http://stackoverflow.com/questions/588004/is-floating-point-math-broken\">Is floating point math broken?</a> and <a href=\"https://stackoverflow.com/questions/21895756/why-are-floating-point-numbers-inaccurate\">Why Are Floating Point Numbers Inaccurate?</a>"}, {"owner": {"reputation": 197, "user_id": 5983050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/333234567d7a296851388bf6c6d8669f?s=128&d=identicon&r=PG", "display_name": "pjaj", "link": "https://stackoverflow.com/users/5983050/pjaj"}, "edited": false, "score": 0, "creation_date": 1570581782, "post_id": 58295600, "comment_id": 102954834, "body": "Does your professor insist the code must be recursive?"}, {"owner": {"reputation": 179, "user_id": 8322690, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U7OHT.jpg?s=128&g=1", "display_name": "SilenceOnTheWire", "link": "https://stackoverflow.com/users/8322690/silenceonthewire"}, "reply_to_user": {"reputation": 197, "user_id": 5983050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/333234567d7a296851388bf6c6d8669f?s=128&d=identicon&r=PG", "display_name": "pjaj", "link": "https://stackoverflow.com/users/5983050/pjaj"}, "edited": false, "score": 0, "creation_date": 1570581827, "post_id": 58295600, "comment_id": 102954841, "body": "@pjaj Yes. He says it&#39;s &quot;good coding practice&quot;"}, {"owner": {"reputation": 197, "user_id": 5983050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/333234567d7a296851388bf6c6d8669f?s=128&d=identicon&r=PG", "display_name": "pjaj", "link": "https://stackoverflow.com/users/5983050/pjaj"}, "edited": false, "score": 0, "creation_date": 1570581898, "post_id": 58295600, "comment_id": 102954858, "body": "I think recursive call should be <code>sum_squares_from((x+n-1),n-1)</code> or even just <code>sum_squares_from(x+1,n-1)</code>"}, {"owner": {"reputation": 1233, "user_id": 5366130, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce3d4bd07d1115070e7727de382560ba?s=128&d=identicon&r=PG&f=1", "display_name": "Omid CompSCI", "link": "https://stackoverflow.com/users/5366130/omid-compsci"}, "edited": false, "score": 0, "creation_date": 1570582018, "post_id": 58295600, "comment_id": 102954882, "body": "Why can&#39;t you just call it with different values and test it out?"}, {"owner": {"reputation": 179, "user_id": 8322690, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U7OHT.jpg?s=128&g=1", "display_name": "SilenceOnTheWire", "link": "https://stackoverflow.com/users/8322690/silenceonthewire"}, "reply_to_user": {"reputation": 1233, "user_id": 5366130, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce3d4bd07d1115070e7727de382560ba?s=128&d=identicon&r=PG&f=1", "display_name": "Omid CompSCI", "link": "https://stackoverflow.com/users/5366130/omid-compsci"}, "edited": false, "score": 0, "creation_date": 1570582183, "post_id": 58295600, "comment_id": 102954901, "body": "@OmidCompSCI Because if it was wrong ti would be hard to tell where it went wrong."}, {"owner": {"reputation": 197, "user_id": 5983050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/333234567d7a296851388bf6c6d8669f?s=128&d=identicon&r=PG", "display_name": "pjaj", "link": "https://stackoverflow.com/users/5983050/pjaj"}, "edited": false, "score": 0, "creation_date": 1570582204, "post_id": 58295600, "comment_id": 102954907, "body": "As for recursion being &quot;good coding practice&quot; I would debate that with your prof! In 40 years of programming I never used it once. But that discussion is off topic."}, {"owner": {"reputation": 1233, "user_id": 5366130, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce3d4bd07d1115070e7727de382560ba?s=128&d=identicon&r=PG&f=1", "display_name": "Omid CompSCI", "link": "https://stackoverflow.com/users/5366130/omid-compsci"}, "edited": false, "score": 0, "creation_date": 1570582261, "post_id": 58295600, "comment_id": 102954920, "body": "I Agree with pjaj, recursion is rarely used and hard to debug/understand for the very reason you mentioned."}, {"owner": {"reputation": 5632, "user_id": 923846, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/09e0e62acac2bdbd44edb763d8566df4?s=128&d=identicon&r=PG", "display_name": "obe", "link": "https://stackoverflow.com/users/923846/obe"}, "reply_to_user": {"reputation": 197, "user_id": 5983050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/333234567d7a296851388bf6c6d8669f?s=128&d=identicon&r=PG", "display_name": "pjaj", "link": "https://stackoverflow.com/users/5983050/pjaj"}, "edited": false, "score": 2, "creation_date": 1570582433, "post_id": 58295600, "comment_id": 102954948, "body": "@pjaj Recursion is common when dealing with recursive problems... not every domain has those, but it&#39;s a good tool to have."}, {"owner": {"reputation": 197, "user_id": 5983050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/333234567d7a296851388bf6c6d8669f?s=128&d=identicon&r=PG", "display_name": "pjaj", "link": "https://stackoverflow.com/users/5983050/pjaj"}, "reply_to_user": {"reputation": 1233, "user_id": 5366130, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce3d4bd07d1115070e7727de382560ba?s=128&d=identicon&r=PG&f=1", "display_name": "Omid CompSCI", "link": "https://stackoverflow.com/users/5366130/omid-compsci"}, "edited": false, "score": 0, "creation_date": 1570582794, "post_id": 58295600, "comment_id": 102955024, "body": "@OmidCompSCI The other problem is that each recursive pass has to be pushed onto the stack (or similar mechanism) then the whole lot unravelled back to the top when the exit condition is reached. this can be slow and use a lot of memory. OK, maybe, if you have a large, fast CPU, but in a microcontroller (Arduino or similar) problematic."}, {"owner": {"reputation": 3365, "user_id": 2564696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bfecfacff3f61943083d01444ade243?s=128&d=identicon&r=PG", "display_name": "dmuir", "link": "https://stackoverflow.com/users/2564696/dmuir"}, "edited": false, "score": 1, "creation_date": 1570611489, "post_id": 58295600, "comment_id": 102963662, "body": "Another problem with double n is that if n was so large that n-1 == n then you get infinite regress."}], "answers": [{"comments": [{"owner": {"reputation": 179, "user_id": 8322690, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U7OHT.jpg?s=128&g=1", "display_name": "SilenceOnTheWire", "link": "https://stackoverflow.com/users/8322690/silenceonthewire"}, "edited": false, "score": 0, "creation_date": 1570582164, "post_id": 58295668, "comment_id": 102954900, "body": "Aren&#39;t they equivalent?"}, {"owner": {"reputation": 5632, "user_id": 923846, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/09e0e62acac2bdbd44edb763d8566df4?s=128&d=identicon&r=PG", "display_name": "obe", "link": "https://stackoverflow.com/users/923846/obe"}, "reply_to_user": {"reputation": 179, "user_id": 8322690, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U7OHT.jpg?s=128&g=1", "display_name": "SilenceOnTheWire", "link": "https://stackoverflow.com/users/8322690/silenceonthewire"}, "edited": false, "score": 0, "creation_date": 1570582215, "post_id": 58295668, "comment_id": 102954910, "body": "Aren&#39;t what equivalent..?"}, {"owner": {"reputation": 197, "user_id": 5983050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/333234567d7a296851388bf6c6d8669f?s=128&d=identicon&r=PG", "display_name": "pjaj", "link": "https://stackoverflow.com/users/5983050/pjaj"}, "edited": false, "score": 1, "creation_date": 1570582448, "post_id": 58295668, "comment_id": 102954951, "body": "Isn&#39;t <code>return n&lt;=0 ? 0 : x*x + sum_squares_from(x+1,n-1);</code> even simpler?"}, {"owner": {"reputation": 5632, "user_id": 923846, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/09e0e62acac2bdbd44edb763d8566df4?s=128&d=identicon&r=PG", "display_name": "obe", "link": "https://stackoverflow.com/users/923846/obe"}, "reply_to_user": {"reputation": 197, "user_id": 5983050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/333234567d7a296851388bf6c6d8669f?s=128&d=identicon&r=PG", "display_name": "pjaj", "link": "https://stackoverflow.com/users/5983050/pjaj"}, "edited": false, "score": 2, "creation_date": 1570582585, "post_id": 58295668, "comment_id": 102954978, "body": "@pjaj your first recursion in 40 years and you&#39;re acing it :)"}, {"owner": {"reputation": 5632, "user_id": 923846, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/09e0e62acac2bdbd44edb763d8566df4?s=128&d=identicon&r=PG", "display_name": "obe", "link": "https://stackoverflow.com/users/923846/obe"}, "reply_to_user": {"reputation": 179, "user_id": 8322690, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U7OHT.jpg?s=128&g=1", "display_name": "SilenceOnTheWire", "link": "https://stackoverflow.com/users/8322690/silenceonthewire"}, "edited": false, "score": 0, "creation_date": 1570582659, "post_id": 58295668, "comment_id": 102954993, "body": "@SilenceOnTheWire they are not equivalent.. you are passing the result of a multiplication as &quot;x&quot; in the recursive call..."}, {"owner": {"reputation": 179, "user_id": 8322690, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U7OHT.jpg?s=128&g=1", "display_name": "SilenceOnTheWire", "link": "https://stackoverflow.com/users/8322690/silenceonthewire"}, "edited": false, "score": 0, "creation_date": 1570582772, "post_id": 58295668, "comment_id": 102955017, "body": "@obe Right I just realized I mixed up this problem with another one and forgot to edit later... thanks"}, {"owner": {"reputation": 179, "user_id": 8322690, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U7OHT.jpg?s=128&g=1", "display_name": "SilenceOnTheWire", "link": "https://stackoverflow.com/users/8322690/silenceonthewire"}, "reply_to_user": {"reputation": 197, "user_id": 5983050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/333234567d7a296851388bf6c6d8669f?s=128&d=identicon&r=PG", "display_name": "pjaj", "link": "https://stackoverflow.com/users/5983050/pjaj"}, "edited": false, "score": 0, "creation_date": 1570583761, "post_id": 58295668, "comment_id": 102955191, "body": "@pjaj  Would it be wrong if I used x+n-1 instead of x+1? It would make the sums be made the other way around (from the smallest to the greatest value) but it would still be correct I think?"}, {"owner": {"reputation": 197, "user_id": 5983050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/333234567d7a296851388bf6c6d8669f?s=128&d=identicon&r=PG", "display_name": "pjaj", "link": "https://stackoverflow.com/users/5983050/pjaj"}, "reply_to_user": {"reputation": 179, "user_id": 8322690, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U7OHT.jpg?s=128&g=1", "display_name": "SilenceOnTheWire", "link": "https://stackoverflow.com/users/8322690/silenceonthewire"}, "edited": false, "score": 0, "creation_date": 1570584366, "post_id": 58295668, "comment_id": 102955291, "body": "@SilenceOnTheWire Yes it would still give the same answer. As you say it would just sum the squares in a different order. However, as Henry ford is supposed to have said &quot;Add lightness and simplicate&quot; In other words the simplest code that does the job is also the easiest to read and understand and requires less calculation. Doing it your way requires an addition and a subtraction at each step. my way only needs an addition."}], "tags": [], "owner": {"reputation": 5632, "user_id": 923846, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/09e0e62acac2bdbd44edb763d8566df4?s=128&d=identicon&r=PG", "display_name": "obe", "link": "https://stackoverflow.com/users/923846/obe"}, "is_accepted": true, "score": 0, "last_activity_date": 1570582123, "creation_date": 1570582123, "answer_id": 58295668, "question_id": 58295600, "link": "https://stackoverflow.com/questions/58295600/writing-a-function-that-calculates-the-sum-of-squares-within-a-range-in-one-line/58295668#58295668", "title": "Writing a function that calculates the sum of squares within a range in one line in C", "body": "<p>Maybe this?</p>\n\n<pre><code>double sum_squares_from(double x, double n) {\n    return n &lt;= 0 ? 0 : (x + n - 1) * (x + n - 1) + sum_squares_from(x, n - 1);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1570585111, "post_id": 58295720, "comment_id": 102955427, "body": "The reason I did it my way was to allow for non-integer <code>x</code>. I think yours also works for non-integer <code>x</code>, but you will have to explain the math. UV for you none-the-less."}], "tags": [], "owner": {"reputation": 2865, "user_id": 12155142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4be55648d441d1e9de6e0937d5702694?s=128&d=identicon&r=PG&f=1", "display_name": "chash", "link": "https://stackoverflow.com/users/12155142/chash"}, "is_accepted": false, "score": 3, "last_activity_date": 1570631800, "last_edit_date": 1570631800, "creation_date": 1570582726, "answer_id": 58295720, "question_id": 58295600, "link": "https://stackoverflow.com/questions/58295600/writing-a-function-that-calculates-the-sum-of-squares-within-a-range-in-one-line/58295720#58295720", "title": "Writing a function that calculates the sum of squares within a range in one line in C", "body": "<p>It's not recursive, but it's one line:</p>\n\n<pre><code>int \nsum_squares(int x, int n) {\n  return ((x + n - 1) * (x + n) * (2 * (x + n - 1) + 1) / 6) - ((x - 1) * x * (2 * (x - 1) + 1) / 6);\n}\n</code></pre>\n\n<p>Sum of squares (of integers) has a <a href=\"https://proofwiki.org/wiki/Sum_of_Sequence_of_Squares\" rel=\"nofollow noreferrer\">closed-form solution</a> for <code>1 .. n</code>. This code calculates the sum of squares from <code>1 .. (x+n)</code> and then subtracts the sum of squares from <code>1 .. (x-1)</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 197, "user_id": 5983050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/333234567d7a296851388bf6c6d8669f?s=128&d=identicon&r=PG", "display_name": "pjaj", "link": "https://stackoverflow.com/users/5983050/pjaj"}, "edited": false, "score": 0, "creation_date": 1570584604, "post_id": 58295768, "comment_id": 102955335, "body": "Yes that&#39;s exactly the code I commented 30 minutes ago. I agree with you about the <code>int n</code>"}], "tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 1, "last_activity_date": 1570583099, "creation_date": 1570583099, "answer_id": 58295768, "question_id": 58295600, "link": "https://stackoverflow.com/questions/58295600/writing-a-function-that-calculates-the-sum-of-squares-within-a-range-in-one-line/58295768#58295768", "title": "Writing a function that calculates the sum of squares within a range in one line in C", "body": "<p>As mentioned in my original comment, <code>n</code> should not be type <code>double</code>, but instead be type <code>int</code> to avoid floating point comparison problems with <code>n &lt;= 0</code>. Making the change and simplifying the multiplication and recursive call, you do:</p>\n\n<pre><code>double sum_squares_from(double x, int n)\n{\n    return n &lt;= 0 ? 0 : x * x + sum_squares_from (x + 1, n - 1);\n}\n</code></pre>\n\n<p>If you think about starting with <code>x * x</code> and increasing <code>x</code> by <code>1</code>, <code>n</code> times, then the simple <code>x * x + sum_squares_from (x + 1, n - 1)</code> is quite easy to understand.</p>\n"}, {"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1570583515, "post_id": 58295791, "comment_id": 102955139, "body": "The ASCII-art alone is worth the UV. Like the closed form solution."}, {"owner": {"reputation": 2865, "user_id": 12155142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4be55648d441d1e9de6e0937d5702694?s=128&d=identicon&r=PG&f=1", "display_name": "chash", "link": "https://stackoverflow.com/users/12155142/chash"}, "edited": false, "score": 0, "creation_date": 1570583809, "post_id": 58295791, "comment_id": 102955199, "body": "Nice ASCII art, but does this work? I&#39;m getting <code>86</code> for <code>sum_squares_from(2, 4)</code>."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1570585008, "post_id": 58295791, "comment_id": 102955408, "body": "@DavidC.Rankin: Thanks, UV for yours as well."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1570587094, "post_id": 58295791, "comment_id": 102955742, "body": "Instead of <code>... + n * (n + 1) * (2 * n + 1) &#47; 6             : 0);</code>, perhaps <code>... + n * (n + 1) * (2 * n + 1) &#47; 6 + sum_squares_from(0.0, 0)             : 0);</code>?   Now the function meets the <a href=\"https://stackoverflow.com/questions/58295600/writing-a-function-that-calculates-the-sum-of-squares-within-a-range-in-one-line#comment102954834_58295600\">must be recursive</a> <a href=\"https://en.wiktionary.org/wiki/dunsel\" rel=\"nofollow noreferrer\">dunsel</a> requirement."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1570639239, "post_id": 58295791, "comment_id": 102978900, "body": "@chux: I didn&#39;t read any requirement for recursive, although there was an ask for a single line. I relaxed that requirement into a single expression..."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1570660836, "post_id": 58295791, "comment_id": 102987240, "body": "Hidden recursion requirement <a href=\"https://stackoverflow.com/questions/58295600/writing-a-function-that-calculates-the-sum-of-squares-within-a-range-in-one-line/58295791?noredirect=1#comment102954834_58295600\">here</a> and <a href=\"https://stackoverflow.com/questions/58295600/writing-a-function-that-calculates-the-sum-of-squares-within-a-range-in-one-line/58295791?noredirect=1#comment102954841_58295600\">here</a>."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1570664663, "post_id": 58295791, "comment_id": 102987974, "body": "@chux: I will assume recursion is a requirement only if there is a need for iteration."}], "tags": [], "owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "is_accepted": false, "score": 2, "last_activity_date": 1570734019, "last_edit_date": 1570734019, "creation_date": 1570583331, "answer_id": 58295791, "question_id": 58295600, "link": "https://stackoverflow.com/questions/58295600/writing-a-function-that-calculates-the-sum-of-squares-within-a-range-in-one-line/58295791#58295791", "title": "Writing a function that calculates the sum of squares within a range in one line in C", "body": "<blockquote>\n  <p><sup>The <a href=\"https://stackoverflow.com/revisions/58295791/2\">original</a> version of this answer used ASCII art.</sup></p>\n</blockquote>\n\n<p>So,</p>\n\n<ul>\n<li>&Sum;<sub>i:0..n</sub> i = n(n+1)(&half;)</li>\n<li>&Sum;<sub>i:0..n</sub> i<sup>2</sup> = n(n+1)(2n+1)(&frac16;)</li>\n</ul>\n\n<p>We note that,</p>\n\n<ul>\n<li>&Sum;<sub>i:0..n</sub> (x+i)<sup>2</sup><br>\n&equals; &Sum;<sub>i:0...n</sub> x<sup>2</sup> + 2xi + i<sup>2</sup><br>\n&equals; (n+1)x<sup>2</sup> + (2x)&Sum;<sub>i:0..n</sub> i + &Sum;<sub>i:0..n</sub> i<sup>2</sup><br>\n&equals; (n+1)x<sup>2</sup> + n(n+1)x + n(n+1)(2n+1)(&frac16;)</li>\n</ul>\n\n<p>Thus, your sum has the closed form:</p>\n\n<pre><code>double sum_squares_from(double x, int n) {\n    return ((n-- &gt; 0)\n            ? (n + 1) * x * x\n              + x * n * (n + 1)\n              + n * (n + 1) * (2 * n + 1) / 6.\n            : 0);\n}\n</code></pre>\n\n<p>If I apply some obfuscation, the one-line version becomes:</p>\n\n<pre><code>double sum_squares_from(double x, int n) {\n    return (n--&gt;0)?(n+1)*(x*x+x*n+n*(2*n+1)/6.):0;\n}\n</code></pre>\n\n<p>If the task is to implement the summation in a loop, use tail recursion. Tail recursion can be mechanically replaced with a loop, and many compilers implement this optimization.</p>\n\n<pre><code>static double sum_squares_from_loop(double x, int n, double s) {\n    return (n &lt;= 0) ? s : sum_squares_from_loop(x+1, n-1, s+x*x);\n}\n\ndouble sum_squares_from(double x, int n) {\n    return sum_squares_from_loop(x, n, 0);\n}\n</code></pre>\n\n<p>As an illustration, if you observe the generated assembly in GCC at a sufficient optimization level (<code>-Os</code>, <code>-O2</code>, or <code>-O3</code>), you will notice that the recursive call is eliminated (and <code>sum_squares_from_loop</code> is inlined to boot).</p>\n\n<p><a href=\"https://tio.run/##dY7BCsIwEETv@Yo5NjYp9aoVP8GDH1DSWLXQJppNIKB@e4wiHgpdmGVglnnbKbqmpJVH01R44qI1ZMyCPBBkNkdIC8nIKz9onGzoxh4UppbuQbme2rOzUztaeyt@YRQYjIcR/2uOB0Me1/vgDAqDZoeaYw/CZqEslmsBI/OiMq4i37IXYwv4OXnGWwCIz4v1t7hK6Q0\" rel=\"nofollow noreferrer\" title=\"Bash \u2013 Try It Online\">Try it online!</a></p>\n"}], "owner": {"reputation": 179, "user_id": 8322690, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U7OHT.jpg?s=128&g=1", "display_name": "SilenceOnTheWire", "link": "https://stackoverflow.com/users/8322690/silenceonthewire"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "accepted_answer_id": 58295668, "answer_count": 4, "score": 0, "last_activity_date": 1570734019, "creation_date": 1570581259, "question_id": 58295600, "link": "https://stackoverflow.com/questions/58295600/writing-a-function-that-calculates-the-sum-of-squares-within-a-range-in-one-line", "title": "Writing a function that calculates the sum of squares within a range in one line in C", "body": "<p>My try</p>\n\n<pre><code>double sum_squares_from(double x, double n){\n\n    return n&lt;=0 ? 0 : x*x + sum_squares_from((x+n-1)*(x+n-1),n-1);\n\n}\n</code></pre>\n\n<p>Instead of using loops my professor wants us to write functions like this...\nWhat the exercise asks for is a function sum_squares_from() with double x being the starting number and n is the number of number. For example if you do x = 2 and n = 4 you get 2*2+3*3+4*4+5*5. It returns zero if n == 0.</p>\n\n<p>My thinking was that in my example what I have is basically x*x+(x+1)(x+1)+(x+1+1)(x+1+1)+(x+1+1+1)(x+1+1+1) = (x+0)(x+0)+(x+1)(x+1)+(x+2)(x+2)+(x+3)(x+3) = (x+n-1)^2 repeated n times where n gets decremented every time by one until it becomes zero and then you sum everything.</p>\n\n<p>Did I do it right?</p>\n\n<p>(if my professor seems a bit demanding... he somehow does this sort of thing all in his head without auxiliary calculations. Scary guy)</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 2, "creation_date": 1570582380, "post_id": 58295572, "comment_id": 102954936, "body": "The option string &quot;:cdu:fs&quot; says that <code>-f</code> is an option that takes no arguments, and <code>-u</code> is an option that <i>does</i> take an argument. Perhaps you meant &quot;:cduf:s:&quot;"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1570593812, "post_id": 58295572, "comment_id": 102956844, "body": "Note that the arguments are all strings, and <code>optarg</code> is a <code>char *</code>, so you get a string pointing to the value associated with an option such as <code>-u xyz</code> or <code>-u 329</code> (you can&#39;t directly control what the user types; you have to validate it and reject that which is not valid). So, if you expect a number, you have to convert the string pointed at by <code>optarg</code> to an integer, and then you can print it with <code>%d</code>. If you expect the user to type <code>-u &#39;12 34&#39;</code> to get two numbers for one option, so be it; you&#39;ll have to make the correct usage clear \u2014 and parse the string value appropriately (<code>strtol()</code>?)."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1570594124, "post_id": 58295572, "comment_id": 102956907, "body": "And if you want <code>--uniq</code> to be a single &#39;long&#39; option, you&#39;ll probably need to use GNU <a href=\"https://www.gnu.org/software/libc/manual/html_node/Getopt.html#Getopt\" rel=\"nofollow noreferrer\"><code>getopt_long()</code></a>, or some similar argument parser."}, {"owner": {"reputation": 83, "user_id": 12100701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0c7ac360e6f1df11b79c1e167f707f3?s=128&d=identicon&r=PG&f=1", "display_name": "MATT_BOOTY", "link": "https://stackoverflow.com/users/12100701/matt-booty"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1570666147, "post_id": 58295572, "comment_id": 102988254, "body": "@JonathanLeffler I don&#39;t need uniq to be a single long option, I just need it to parse the string value and convert it to decimal. The problem is that when I do, I get a segmentation fault and my program closes."}], "owner": {"reputation": 83, "user_id": 12100701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0c7ac360e6f1df11b79c1e167f707f3?s=128&d=identicon&r=PG&f=1", "display_name": "MATT_BOOTY", "link": "https://stackoverflow.com/users/12100701/matt-booty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1570643713, "creation_date": 1570580962, "last_edit_date": 1570643713, "question_id": 58295572, "link": "https://stackoverflow.com/questions/58295572/trying-to-use-getopt-in-c-to-write-a-program-that-pseudo-simulates-uniq-of-bash", "title": "Trying to use getopt in C to write a program that pseudo-simulates -uniq of bash, need to represent input and output for filenames", "body": "<p>The idea is for the code to print out certain options onto the screen as if it is reading -uniq from Bash's abilities on the command line.</p>\n\n<p>Let's say I want to represent [input file] and [output file] for uniq, I set a default that would automatically set the opt on the command line to represent input and output along with the next argument on the command line.\nHowever, my program effectively ignores its existence.</p>\n\n<p>Also, I'm trying to represent fields properly with -f, if -f followed by a number was entered, I would get the number field ignored. However, the ascii to decimal value gets represented. </p>\n\n<p>I tried to use atoi to turn the char into the number instead of letting the compiler auto translate.</p>\n\n<p>For my efforts I was rewarded a segmentation fault. </p>\n\n<p>Here is what I have so far.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main(int argc, char * argv[])\n{\nint opt;\nchar CASE_CODE = '0';\nwhile((opt=getopt(argc, argv, \":'default'cduf:fs\"))!= -1)\n{\n  switch(opt)\n  {\n    case 'c':\n        CASE_CODE = 'c';\n        break;\n    case 'd':\n        CASE_CODE = 'd';\n        break;\n    case 'u':\n      printf(\"option : %c\\n\", opt);\n        CASE_CODE = 'u';\n        break;\n    case 'f':\n        int keyCODE = 0;\n        for(int i = 0; i &lt; argc; i++)\n                if(i == optind)\n                 keyCODE = argv[i][0];\n                 printf(\"ignoring field: %d\\n\", atoi(keyCODE));\n                  CASE_CODE = 'f';\n        break;\n    case 's':\n        for(int i = 0; i &lt; argc; i++)\n                if(i == optind)\n                        printf(\"the char to be ignored is %c \", argv[i][0]);\n        CASE_CODE = 's';\n        break;\n    case ':':\n      printf(\"Option %c needs a value \\n\", optopt);\n        CASE_CODE = ':';\n        break;\n    case '?':\n      printf(\"Unknown input detected %c\\n\", optopt);\n        CASE_CODE = '?';\n        break;\n    default:\n        if(strncmp(CASE_CODE, '0', 1));\n                for(int i =0; i &lt; argc; i++)\n                if(i == optind)\n                        printf(\"Input file : [%s], output file : [%s]\", argv[i][0], argv[i+1][0]);\n                break;\n\n }\n}\n printf(\"\\nCase code %c\\n\", CASE_CODE);\nfor(; optind &lt; argc; optind++)\n  printf(\"argument : %s\\n\", argv[optind]);\n  exit(0);\n\n</code></pre>\n\n<pre><code>\nAny advice? \n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 4, "creation_date": 1570579192, "post_id": 58295368, "comment_id": 102954355, "body": "Why? It&#39;s much more clear written the first way. Just trying to jam it all into one line (which surely is possible a number of ways) reduces the clarity IMHO. The two statements aren&#39;t related enough to warrant combining them."}, {"owner": {"reputation": 5417, "user_id": 7607970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3K8Ke.png?s=128&g=1", "display_name": "Psi", "link": "https://stackoverflow.com/users/7607970/psi"}, "edited": false, "score": 0, "creation_date": 1570579214, "post_id": 58295368, "comment_id": 102954361, "body": "Well, I think everything that shortens the code above WILL sacrifice clarity"}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1570579307, "post_id": 58295368, "comment_id": 102954379, "body": "This is very much opinion based. It&#39;s a review or golf problem."}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 2, "creation_date": 1570579521, "post_id": 58295368, "comment_id": 102954435, "body": "I&#39;m voting to close this question as off-topic because it belongs on another site such as <a href=\"https://codereview.stackexchange.com/\">codereview.stackexchange.com</a> and is opinion based."}], "answers": [{"comments": [{"owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 0, "creation_date": 1615758824, "post_id": 58295428, "comment_id": 117784617, "body": "Not that it is useful for this answer, but check this out: <a href=\"https://gist.github.com/rampion/91594\" rel=\"nofollow noreferrer\">gist.github.com/rampion/91594</a>"}], "tags": [], "owner": {"reputation": 36931, "user_id": 225757, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/e7140b12949e4652885f6bb02b435f42?s=128&d=identicon&r=PG", "display_name": "Roland Illig", "link": "https://stackoverflow.com/users/225757/roland-illig"}, "is_accepted": true, "score": 2, "last_activity_date": 1570579548, "creation_date": 1570579548, "answer_id": 58295428, "question_id": 58295368, "link": "https://stackoverflow.com/questions/58295368/c-evaluate-2-expressions-in-order-and-then-return-the-first/58295428#58295428", "title": "C: evaluate 2 expressions in order and then return the first", "body": "<p>In C, what you wrote is the idiomatic code for solving the task.</p>\n\n<p>In languages with try-finally you could use that, and it may or may not be clearer. But C doesn't have this feature.</p>\n"}, {"comments": [{"owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 0, "creation_date": 1615758811, "post_id": 66629792, "comment_id": 117784610, "body": "if you wanted a macro solution, I am surprised that you didn&#39;t just write it yourself instead of searching for it..."}, {"owner": {"reputation": 1127, "user_id": 11993121, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d6d838d88ef60caa2eefd94e172026c?s=128&d=identicon&r=PG&f=1", "display_name": "nielsen", "link": "https://stackoverflow.com/users/11993121/nielsen"}, "edited": false, "score": 0, "creation_date": 1615760086, "post_id": 66629792, "comment_id": 117784912, "body": "I think this may be a good answer to some question, but not the original one. Yes, it can be used to implement the function <code>pop_int()</code> but not without sacrificing clarity. If you want to avoid the overhead of the function call, inlining the function would be clearer."}, {"owner": {"reputation": 2726, "user_id": 5896591, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/71a43ee15bbb5a512cf554b430416e33?s=128&d=identicon&r=PG&f=1", "display_name": "personal_cloud", "link": "https://stackoverflow.com/users/5896591/personal-cloud"}, "reply_to_user": {"reputation": 1127, "user_id": 11993121, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d6d838d88ef60caa2eefd94e172026c?s=128&d=identicon&r=PG&f=1", "display_name": "nielsen", "link": "https://stackoverflow.com/users/11993121/nielsen"}, "edited": false, "score": 0, "creation_date": 1615846091, "post_id": 66629792, "comment_id": 117814020, "body": "@nielsen Good point about clarity. I got a little too excited about the <code>({... ; expr})</code> syntax... maybe it&#39;s only useful in macros."}], "tags": [], "owner": {"reputation": 2726, "user_id": 5896591, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/71a43ee15bbb5a512cf554b430416e33?s=128&d=identicon&r=PG&f=1", "display_name": "personal_cloud", "link": "https://stackoverflow.com/users/5896591/personal-cloud"}, "is_accepted": false, "score": 0, "last_activity_date": 1615757887, "last_edit_date": 1615757887, "creation_date": 1615757577, "answer_id": 66629792, "question_id": 58295368, "link": "https://stackoverflow.com/questions/58295368/c-evaluate-2-expressions-in-order-and-then-return-the-first/66629792#66629792", "title": "C: evaluate 2 expressions in order and then return the first", "body": "<p>Finally found it... the syntax I needed was <code>({... ; expr})</code> (which is used in the CIRC_SPACE_TO_END macro in the linux kernel).\nFor my example, what I needed was:</p>\n<pre><code>#define POST_INC(type, a, b) ({type* tmp = a; a += b; tmp;})\n</code></pre>\n<p>Example usage:</p>\n<pre><code>int main()\n{\n  char const* str = &quot;hello, world&quot;;\n  printf(&quot;%s\\n&quot;, POST_INC(char const, str, 5));\n  printf(&quot;%s\\n&quot;, POST_INC(char const, str, 2));\n  printf(&quot;%s\\n&quot;, POST_INC(char const, str, 5));\n}\n</code></pre>\n<p>Result:</p>\n<pre><code>hello, world\n, world\nworld\n</code></pre>\n<p>I'm glad I didn't give up!</p>\n"}], "owner": {"reputation": 2726, "user_id": 5896591, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/71a43ee15bbb5a512cf554b430416e33?s=128&d=identicon&r=PG&f=1", "display_name": "personal_cloud", "link": "https://stackoverflow.com/users/5896591/personal-cloud"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 58295428, "answer_count": 2, "score": 0, "last_activity_date": 1615757887, "creation_date": 1570579019, "last_edit_date": 1570579209, "question_id": 58295368, "link": "https://stackoverflow.com/questions/58295368/c-evaluate-2-expressions-in-order-and-then-return-the-first", "title": "C: evaluate 2 expressions in order and then return the first", "body": "<p>Is there a more concise way to rewrite the following function without sacrificing clarity?</p>\n\n<pre><code>function uint64_t pop_int(uint8_t** p, int num_bytes)\n{\n   uint64_t res = decode_int(*p, num_bytes);\n   *p += num_bytes;\n   return res;\n}\n</code></pre>\n\n<p>All I can think of is something like</p>\n\n<pre><code>return decode_int((*p += num_bytes) - num_bytes, num_bytes);\n</code></pre>\n\n<p>but it would be clearer if the language had something like a <code>FIRST</code> function that you could use like this:</p>\n\n<pre><code>return FIRST(decode_int(*p, num_bytes), *p += num_bytes);\n</code></pre>\n\n<p>but it would have to be clear that the arguments are evaluated in order.</p>\n"}, {"tags": ["c"], "answers": [{"comments": [{"owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "edited": false, "score": 0, "creation_date": 1570601423, "post_id": 58297885, "comment_id": 102958692, "body": "<i><code>calloc()</code> is &quot;recently&quot; more recommended</i>? -- It is the recommended way to allocate arrays since 30 years ago. This is what <a href=\"https://en.cppreference.com/w/c/memory/calloc\" rel=\"nofollow noreferrer\"><code>calloc()</code></a> does, in the first place."}, {"owner": {"reputation": 1780, "user_id": 10988580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9885afb3fe782ac4c8e89a3b5904b8f6?s=128&d=identicon&r=PG&f=1", "display_name": "virolino", "link": "https://stackoverflow.com/users/10988580/virolino"}, "reply_to_user": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "edited": false, "score": 0, "creation_date": 1570601669, "post_id": 58297885, "comment_id": 102958787, "body": "Well, experience tells us that pretty much &quot;nobody&quot; teaches <i>calloc()</i>, and people would be scared to hear that the only allocation function they know (<i>malloc()</i>) was already not-recommended at the time they learned about dynamic allocation."}], "tags": [], "owner": {"reputation": 1780, "user_id": 10988580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9885afb3fe782ac4c8e89a3b5904b8f6?s=128&d=identicon&r=PG&f=1", "display_name": "virolino", "link": "https://stackoverflow.com/users/10988580/virolino"}, "is_accepted": false, "score": 0, "last_activity_date": 1570600872, "creation_date": 1570600872, "answer_id": 58297885, "question_id": 58295277, "link": "https://stackoverflow.com/questions/58295277/how-to-populate-double-pointer-of-size-n-y/58297885#58297885", "title": "How to populate double pointer of size [n,y]", "body": "<p>If you want the double pointer to behave like an array, you must allocate at once</p>\n\n<p><code>cols * rows * sizeof(int)</code></p>\n\n<p>Otherwise you will have a good chance to have non-array areas in the middle of the \"array\".</p>\n\n<p>This line:</p>\n\n<pre><code>(*matrix)[i1][i2] = rand() % 10;\n</code></pre>\n\n<p>has a very good chance to try to access such an empty area and crash your program.</p>\n\n<hr>\n\n<p>Additionally, <code>calloc()</code> is \"recently\" more recommended to be used instead of <code>malloc()</code>, if available.</p>\n"}, {"tags": [], "owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "is_accepted": true, "score": 0, "last_activity_date": 1570605745, "creation_date": 1570605745, "answer_id": 58298985, "question_id": 58295277, "link": "https://stackoverflow.com/questions/58295277/how-to-populate-double-pointer-of-size-n-y/58298985#58298985", "title": "How to populate double pointer of size [n,y]", "body": "<p>There are several problems in this line:</p>\n\n<pre><code>int **Matrix1 = malloc(cols1 * sizeof(int));\n</code></pre>\n\n<p>First, the argument of <code>malloc()</code> tells the reader you intend to store in it <code>cols1</code> integer values (<code>int</code>). But later on you store <code>int *</code> in the elements of <code>Matrix</code>.</p>\n\n<p>You allocate memory for <code>int</code> and store <code>int *</code> instead. These two types can have different sizes in memory and definitely have different types. The code has undefined behaviour.</p>\n\n<p>You should allocate memory to store <code>cols1</code> pointers to integer (<code>int *</code>). The argument of <code>malloc()</code> should be <code>cols1 * sizeof(int *)</code>.</p>\n\n<p><strong>But wait. There is more!</strong></p>\n\n<p><a href=\"https://en.cppreference.com/w/c/memory/malloc\" rel=\"nofollow noreferrer\"><code>malloc()</code></a> allocates a block of memory of the size it receives as argument. Passing it <code>n * s</code> does not guarantee that the memory block it allocates can accommodate <code>n</code> objects of size <code>s</code><sup>1</sup>.<br>Because of <a href=\"https://en.cppreference.com/w/c/language/object#Alignment\" rel=\"nofollow noreferrer\">memory alignment</a> requirements, an object may occupy in memory more space than the sum of the sizes of its members and there may be gaps between consecutive objects of the same type.</p>\n\n<p><strong>What's the solution?</strong></p>\n\n<p>The C standard library provides the <a href=\"https://en.cppreference.com/w/c/memory/calloc\" rel=\"nofollow noreferrer\"><code>calloc()</code></a> function to be used to allocate memory for arrays. It receives two arguments (the number of elements and the size of one element) and takes the alignment into account when it computes the amount of memory to allocate.</p>\n\n<p>The code above must be:</p>\n\n<pre><code>int **Matrix1 = calloc(cols1, sizeof(int *));\n</code></pre>\n\n<p>The other calls to <code>malloc()</code> must be rewritten the same way using <code>calloc()</code> and the size of the objects that are to be stored in the memory returned by it (<code>int *</code> for <code>Matrix2</code>, <code>int</code> for <code>Matrix1[i1]</code> and <code>Matrix2[i1]</code>.</p>\n\n<hr>\n\n<p><sup>1</sup> The value computed by the <a href=\"https://en.cppreference.com/w/c/language/sizeof\" rel=\"nofollow noreferrer\"><code>sizeof</code></a> operator includes the internal and external paddings. Using <code>malloc(cols1 * sizeof(T))</code> to allocate memory for <code>cols1</code> objects of type <code>T</code> is as safe as using <code>calloc(cols1, sizeof(T))</code>.<br>\n<code>calloc()</code> is preferred though because it tells the reader you allocate memory for an array, not for a single object. As a bonus, it fills the allocated memory with zero, which is a good default value for integral types (and integral types only).</p>\n"}], "owner": {"reputation": 3, "user_id": 12184961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f04bedaf9c9913a7068ed029d899f38e?s=128&d=identicon&r=PG&f=1", "display_name": "Ewan Mostert", "link": "https://stackoverflow.com/users/12184961/ewan-mostert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 58298985, "answer_count": 2, "score": 0, "last_activity_date": 1570605745, "creation_date": 1570578300, "question_id": 58295277, "link": "https://stackoverflow.com/questions/58295277/how-to-populate-double-pointer-of-size-n-y", "title": "How to populate double pointer of size [n,y]", "body": "<p>I'm trying to write a C function that allows me to populate a double pointer, but populating a double pointer of dimension [n,y > n] crashes the program.</p>\n\n<p>The program I'm writing needs to multiply two matrices (in the form of double pointers),  which contain random values between 0 and 9 (inclusive). The function responsible for populating the matrices is able to populate, for example, a matrix of 2 rows of 3 elements, but crashes when trying to populate a matrix of 3 rows of 2 element each. I've tried to swap dimension values around in the function, but beyond that, I'm stumped.</p>\n\n<p>In main function:</p>\n\n<pre><code>int **Matrix1 = malloc(cols1 * sizeof(int));  //Declare double pointer as matrix to be multiplied [2D]\nfor (i1=0; i1 &lt; rows1; i1++)\n{\n    Matrix1[i1] = malloc(rows1 * sizeof(int));\n}\n\nint **Matrix2 = malloc(cols2 * sizeof(int));  //Declare double pointer as matrix to be multiplied [2D]\nfor (i1=0; i1 &lt; rows2; i1++)\n{\n    Matrix2[i1] = malloc(rows2 * sizeof(int));\n}\n\nFillMatrix(&amp;Matrix1, rows1, cols1);     //Function to populate matrices\nDisplayMatrix(&amp;Matrix1, rows1, cols1);  //Function to display matrices\n\nFillMatrix(&amp;Matrix2, rows2, cols2);\nDisplayMatrix(&amp;Matrix2, rows2, cols2);  //This calling of the function causes the crash\n</code></pre>\n\n<p>Function to populate matrices:</p>\n\n<pre><code>void FillMatrix(int ***matrix, int sizeRow, int sizeCol)\n{\n    int i1, i2;\n\n    for (i1=0; i1 &lt; sizeCol; i1++)  //Loop to step through each row\n    {\n        for (i2=0; i2 &lt; sizeRow; i2++)  //Loop to step through each element in  a row\n        {\n            (*matrix)[i1][i2] = rand() % 10;    //Assigns random value to matrix element\n        }\n    }\n}\n</code></pre>\n\n<p>I expect (As an example):</p>\n\n<pre><code>Please enter the number of elements in each row of the first matrix: 3\nPlease enter the number of elements in each column of the first matrix: 2\nPlease enter the number of elements in each row of the second matrix: 2\nPlease enter the number of elements in each column of the second matrix: 3\n</code></pre>\n\n<p>to give:</p>\n\n<pre><code>1 2 5\n9 0 6\n\n3 7\n8 5\n0 1\n</code></pre>\n\n<p>But it only prints:</p>\n\n<pre><code>1 2 5\n9 0 6\n</code></pre>\n\n<p>and then crashes.</p>\n\n<p>I'd appreciate any help with this.\nThanks!</p>\n"}, {"tags": ["c", "string", "char", "segmentation-fault"], "comments": [{"owner": {"reputation": 6192, "user_id": 2041317, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/58b0m.png?s=128&g=1", "display_name": "cup", "link": "https://stackoverflow.com/users/2041317/cup"}, "edited": false, "score": 0, "creation_date": 1570579202, "post_id": 58295267, "comment_id": 102954357, "body": "Surprised that you don&#39;t get a compilation error with &#39;Aa&#39;..  There may be less painful ways of doing this - what do you wish to achieve?"}, {"owner": {"reputation": 464, "user_id": 1699328, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/9225b78aebcfa548c9e133dcae2c4dc7?s=128&d=identicon&r=PG", "display_name": "Dom", "link": "https://stackoverflow.com/users/1699328/dom"}, "edited": false, "score": 0, "creation_date": 1570579301, "post_id": 58295267, "comment_id": 102954377, "body": "Be aware, &#39;Aa&#39; is int, not char. One char is just &#39;A&#39;, or &#39;a&#39;, etc."}], "answers": [{"tags": [], "owner": {"reputation": 353, "user_id": 12114444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73c48534ac3fc31b1985899c6a11a50a?s=128&d=identicon&r=PG&f=1", "display_name": "SaltyPleb", "link": "https://stackoverflow.com/users/12114444/saltypleb"}, "is_accepted": true, "score": 1, "last_activity_date": 1570579358, "creation_date": 1570579358, "answer_id": 58295402, "question_id": 58295267, "link": "https://stackoverflow.com/questions/58295267/segmentation-fault-char-after-malloc/58295402#58295402", "title": "Segmentation Fault char** after malloc", "body": "<p>You allocated memory for your <code>char*</code> , but did not allocate memory for your <code>char</code> to be stored.</p>\n\n<p>Here's a thumb rule for pointer, each * should have a malloc that means for <code>char **</code> you should have one malloc for <code>char *</code> and another one for <code>char</code>.</p>\n\n<p>also playing with pointer is a bit misleading sometimes and bracket should be used instead for readability</p>\n\n<pre><code>char ** nextStringAddress = finalString + stringAddressCounter;\nnextStringAddress[stringAddressCounter] = malloc(sizeof **nextStringAddress * 3)\nnextStringAddress[stringAddressCounter][0] = 'A';\nnextStringAddress[stringAddressCounter][1] = 'a';\nnextStringAddress[stringAddressCounter][2] = '\\0';\nstringAddressCounter++;\n</code></pre>\n\n<p>Doing with a single malloc is also possible like so</p>\n\n<pre><code>char ** nextStringAddress = finalString + stringAddressCounter;\nnextStringAddress[stringAddressCounter] = \"Aa\";\nstringAddressCounter++;\n</code></pre>\n\n<p>Notice the double quote here around the <code>Aa</code> and the missing second bracket.\nIt should be noted that by doing this, you are essentially assigning a memory zone that is read only, and by trying to assign on this memory, it will result in a segmentation fault.</p>\n"}], "owner": {"reputation": 119, "user_id": 11319588, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zdA3SbBLx60/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3red9Xc-ZvownSepcZgCFmq_MOy5XQ/mo/photo.jpg?sz=128", "display_name": "steve", "link": "https://stackoverflow.com/users/11319588/steve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 58295402, "answer_count": 1, "score": 0, "last_activity_date": 1570579364, "creation_date": 1570578222, "last_edit_date": 1570579364, "question_id": 58295267, "link": "https://stackoverflow.com/questions/58295267/segmentation-fault-char-after-malloc", "title": "Segmentation Fault char** after malloc", "body": "<p>I want <code>** char finalString</code>, i.e. a list of <code>*char</code>. After my function runs, each <code>*char</code> pointer contains a <code>char</code> 'A', 'B', 'C', which can then be passed to a function expecting a parameter of type <code>char**</code>. Each string has to be separate, but in the same array, hence the <code>**</code>. </p>\n\n<p>Creating this <code>**char</code>, I wrote the following:</p>\n\n<pre><code>char ** finalString;\nfinalString = malloc(sizeof(char*)*3);\nint stringAddressCounter = 0;\n</code></pre>\n\n<p>Then, to add a char to this, I tried the following:</p>\n\n<pre><code>char ** nextStringAddress = finalString + stringAddressCounter;\n** nextStringAddress = 'A';\nstringAddressCounter++;\n</code></pre>\n\n<p>However, I'm getting a segmentation fault on the second line of this block.</p>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1570572953, "post_id": 58294687, "comment_id": 102953193, "body": "I&#39;m not sure what the question is here. Are you asking generally about type casting? This follows the general pattern of <code>X y = (X) z</code> where <code>X</code> is some C type. If you&#39;re not sure if the syntax is correct, <i>try compiling it</i> with all warnings turned on (<code>-Wall</code> in many compilers) to find out."}, {"owner": {"reputation": 636, "user_id": 12184817, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eMaKO.png?s=128&g=1", "display_name": "Duarte Arribas", "link": "https://stackoverflow.com/users/12184817/duarte-arribas"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1570573022, "post_id": 58294687, "comment_id": 102953202, "body": "Yes, didn&#39;t know the specific term."}, {"owner": {"reputation": 636, "user_id": 12184817, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eMaKO.png?s=128&g=1", "display_name": "Duarte Arribas", "link": "https://stackoverflow.com/users/12184817/duarte-arribas"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1570573062, "post_id": 58294687, "comment_id": 102953208, "body": "my question was if types as long type which have two words could go in the parentheses?"}, {"owner": {"reputation": 36166, "user_id": 393701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/250889c646cd2a916920d9252f7c6f42?s=128&d=identicon&r=PG", "display_name": "SirDarius", "link": "https://stackoverflow.com/users/393701/sirdarius"}, "edited": false, "score": 1, "creation_date": 1570573139, "post_id": 58294687, "comment_id": 102953228, "body": "This: <a href=\"https://www.oreilly.com/library/view/c-in-a/0596006977/ch04.html\" rel=\"nofollow noreferrer\">oreilly.com/library/view/c-in-a/0596006977/ch04.html</a> contains information you might find interesting."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1570573289, "post_id": 58294687, "comment_id": 102953257, "body": "Anything can go in there <i>if</i> it a valid C type, so <code>long*</code> or <code>unsigned long long</code> are all fine."}, {"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1570573349, "post_id": 58294687, "comment_id": 102953268, "body": "&quot;I&#39;m not sure if it is syntactically correct.&quot; The compiler will complain very loudly if your code is not perfectly syntactically correct. Like a petulant child, it will refuse to run your code at all."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 1, "creation_date": 1570573379, "post_id": 58294687, "comment_id": 102953279, "body": "@Code-Apprentice It&#39;s more like a governmental agency that refuses to accept your form because you filled it out in the wrong colour of ink."}, {"owner": {"reputation": 636, "user_id": 12184817, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eMaKO.png?s=128&g=1", "display_name": "Duarte Arribas", "link": "https://stackoverflow.com/users/12184817/duarte-arribas"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1570573513, "post_id": 58294687, "comment_id": 102953307, "body": "@tadman your answer was quite useful and informative, however what answered my question specifically was in your comment in   &quot;Anything can go in there if it a valid C type, so long* or unsigned long long are all fine&quot;  so if you update your answer I can accept it"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1570573591, "post_id": 58294687, "comment_id": 102953328, "body": "Added a note to the answer focusing on that aspect."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1570574577, "post_id": 58294687, "comment_id": 102953516, "body": "In general you should avoid casting types. There are valid cases, but you must ensure the type you are casting too is capable of holding the data you want to reference as that type to prevent truncation, or just flat undefined behavior. Each type has a max/min for example <a href=\"https://www.gnu.org/software/libc/manual/html_node/Range-of-Type.html\" rel=\"nofollow noreferrer\">Range of an Integer Type</a>. Cast with care."}], "answers": [{"comments": [{"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1570573903, "post_id": 58294731, "comment_id": 102953390, "body": "It is not formally called &quot;type casting&quot;. That phrase appears nowhere in the C standard. Note that for numeric types no cast is generally necessary; <code>int x = 42; double y = x;</code> is perfectly valid, and performs an implicit conversion."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1570574032, "post_id": 58294731, "comment_id": 102953414, "body": "@KeithThompson What&#39;s a more appropriate term here?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1570574324, "post_id": 58294731, "comment_id": 102953464, "body": "@KeithThompson The <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1548.pdf\" rel=\"nofollow noreferrer\">C11 standard</a> (&#167;6.5.4) speaks only to the &quot;cast operator&quot; which is what this is specifically."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1570579041, "post_id": 58294731, "comment_id": 102954322, "body": "The parenthesized type name is a &quot;cast operator&quot;. The expression that includes a cast operator is a <i>cast-expression</i> (though for technical reasons that grammatical term applies to expressions that do not include a cast operator). The operation can be called &quot;casting&quot;, &quot;conversion&quot;, or &quot;explicit conversion&quot;. I personally tend to avoid the term &quot;type casting&quot;; that&#39;s something that happens to actors, and the word &quot;type&quot; doesn&#39;t add any meaning."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 2, "last_activity_date": 1570574391, "last_edit_date": 1570574391, "creation_date": 1570573133, "answer_id": 58294731, "question_id": 58294687, "link": "https://stackoverflow.com/questions/58294687/what-should-i-write-in-between-parentheses-to-define-the-data-type-i-want-a-vari/58294731#58294731", "title": "What should I write in between parentheses to define the data type I want a variable to change to?", "body": "<p>This is the C cast operator, but the operation is more generally \"type casting\", \"casting\", or \"recasting\". This is a directive to the compiler to request a specific conversion.</p>\n\n<p>When casting any valid C type can be specified, so:</p>\n\n<pre><code>int x = 10;\nunsigned long long y = (unsigned long long) x;\n</code></pre>\n\n<p>In many cases this conversion can be done implicitly, automatically, so it's not always necessary but in others you must force it. For example:</p>\n\n<pre><code>int x = 10;\nfloat y = x; // Valid, int -&gt; float happens automatically.\n</code></pre>\n\n<p>You can get caught by surprise though:</p>\n\n<pre><code>int x = 10;\nfloat y = x / 3; // y = 3.0, not 3.333, since it does integer division before casting\n</code></pre>\n\n<p>Where you need to cast to get the right result:</p>\n\n<pre><code>int x = 10;\nfloat y = (float) x / 3; // 3.33333...\n</code></pre>\n\n<p>Note that when using pointers this is a whole different game:</p>\n\n<pre><code>int x = 10;\nint* px = &amp;x;\nfloat* y = (float*) px; // Invalid conversion, treats int as a float\n</code></pre>\n\n<p>Generally C trusts you to know what you're doing, so you can easily shoot yourself in the foot. What \"compiles\" is syntactically valid by definition, but executing properly without crashing is a whole other concern. Anything not specified by the C \"rule book\" (C standard) is termed <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\"><em>undefined behaviour</em></a>, so you'll need to be aware of when you're breaking the rules, like in that last example.</p>\n\n<p>Sometimes breaking the rules is necessary, like the <a href=\"https://en.wikipedia.org/wiki/Fast_inverse_square_root\" rel=\"nofollow noreferrer\">Fast Inverse Square Root</a> which relies on the ability of C to arbitrarily recast values.</p>\n"}], "owner": {"reputation": 636, "user_id": 12184817, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eMaKO.png?s=128&g=1", "display_name": "Duarte Arribas", "link": "https://stackoverflow.com/users/12184817/duarte-arribas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 58294731, "answer_count": 1, "score": 2, "last_activity_date": 1570574391, "creation_date": 1570572849, "question_id": 58294687, "link": "https://stackoverflow.com/questions/58294687/what-should-i-write-in-between-parentheses-to-define-the-data-type-i-want-a-vari", "title": "What should I write in between parentheses to define the data type I want a variable to change to?", "body": "<p>If I have a variable as <code>float var1 = 157.1;</code> and want to transform it in int I would do <code>int var2 = (int)var1;</code></p>\n\n<p>I want to know about the other types of data, such as <code>long int</code>, <code>short int</code>, <code>unsigned short int</code>, <code>long double</code> and so on.</p>\n\n<p>I tried <code>long int var2 = (long int)var1;</code> and it seemed to work, but I'm not sure if it is syntactically correct. If it is, I assume it'd be the same for all the other types, i.e., just the data type and its attributes separated by a space. If it isn't I'd like to know if there's a list of them of some sort.</p>\n"}, {"tags": ["c++", "c", "big-o"], "answers": [{"comments": [{"owner": {"reputation": 4150, "user_id": 7412986, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xOv4e.png?s=128&g=1", "display_name": "AlexP", "link": "https://stackoverflow.com/users/7412986/alexp"}, "edited": false, "score": 1, "creation_date": 1570571336, "post_id": 58294398, "comment_id": 102952805, "body": "The third loop is run O(n) times each time the second loop runs, because there are only <i>i</i> multiples of <i>i</i> from 0 to <i>i&#178;</i>. Since the second loop is entered O(n) times, the third loop is entered O(n^2) times."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 3, "last_activity_date": 1570571519, "last_edit_date": 1570571519, "creation_date": 1570570632, "answer_id": 58294398, "question_id": 58294341, "link": "https://stackoverflow.com/questions/58294341/time-complexity-of-nested-for-loops-with-if-statements/58294398#58294398", "title": "Time Complexity of Nested for Loops with if Statements", "body": "<blockquote>\n  <p>The complexity is not simply O(n^6) because the if-statement is not true n times right?</p>\n</blockquote>\n\n<p>No, it is not.</p>\n\n<p>At worst, it is going to be <code>O(n^5)</code>. It is less than that since <code>j % i</code> is equal to <code>0</code> only <code>i</code> times.</p>\n\n<p>The first loop is run <code>n</code> times.<br>\nThe second loop is run <code>O(n^2)</code> times.<br>\nThe third loop is run at most <code>O(n)</code> times.</p>\n\n<p>The worst combined complexity of the loop is going to be <code>O(n) x O(n^2) x O(n)</code>, which is <code>O(n^4)</code>. </p>\n"}, {"comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1570571266, "post_id": 58294442, "comment_id": 102952780, "body": "<i>this happens <code>i</code> times as j goes from <code>0</code> to <code>i * i</code>, so the third for loop runs only <code>i</code> times.</i> does not sound right. Shouldn&#39;t it be <code>i*i - i</code> times?"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1570571415, "post_id": 58294442, "comment_id": 102952825, "body": "@RSahu You&#39;re reading it backwards. The <code>k</code> loop runs when <code>j</code> is a multiple of <code>i</code>."}, {"owner": {"reputation": 4150, "user_id": 7412986, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xOv4e.png?s=128&g=1", "display_name": "AlexP", "link": "https://stackoverflow.com/users/7412986/alexp"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1570571443, "post_id": 58294442, "comment_id": 102952837, "body": "@RSahu: How many multiples of 9 are there from 0 to 9&#178; - 1 = 80? Let&#39;s count them: 0, 9, 18, 27, 36, 45, 54, 63, 72: total 9."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1570571636, "post_id": 58294442, "comment_id": 102952890, "body": "@AlexP, I see your logic. Thanks for the clarification."}, {"owner": {"reputation": 76, "user_id": 14728079, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jFhBC.jpg?s=128&g=1", "display_name": "Ashwathama", "link": "https://stackoverflow.com/users/14728079/ashwathama"}, "edited": false, "score": 0, "creation_date": 1616060348, "post_id": 58294442, "comment_id": 117886640, "body": "@AlexP could you please explain why the time complexity is O(n^4) instead of O(n^5). The third loop is dependent on the second inner loop and second inner loop has O(n^2) time complexity. Correct me if i am wrong."}, {"owner": {"reputation": 4150, "user_id": 7412986, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xOv4e.png?s=128&g=1", "display_name": "AlexP", "link": "https://stackoverflow.com/users/7412986/alexp"}, "reply_to_user": {"reputation": 76, "user_id": 14728079, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jFhBC.jpg?s=128&g=1", "display_name": "Ashwathama", "link": "https://stackoverflow.com/users/14728079/ashwathama"}, "edited": false, "score": 1, "creation_date": 1616064284, "post_id": 58294442, "comment_id": 117888459, "body": "@Ashwathama: The second loop runs O(n^2) times for each iteration of the outer loop, yes. But the <b>if</b> condition which governs the third loop if <b>true</b> only O(n) times for each iteration of the outer loop."}], "tags": [], "owner": {"reputation": 4150, "user_id": 7412986, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xOv4e.png?s=128&g=1", "display_name": "AlexP", "link": "https://stackoverflow.com/users/7412986/alexp"}, "is_accepted": true, "score": 5, "last_activity_date": 1570571520, "last_edit_date": 1570571520, "creation_date": 1570570946, "answer_id": 58294442, "question_id": 58294341, "link": "https://stackoverflow.com/questions/58294341/time-complexity-of-nested-for-loops-with-if-statements/58294442#58294442", "title": "Time Complexity of Nested for Loops with if Statements", "body": "<p>The <code>if</code> condition will be true when <code>j</code> is a multiple of <code>i</code>; this happens <code>i</code> times as <code>j</code> goes from 0 to <code>i * i</code>, so the third <code>for</code> loop runs only <code>i</code> times. The overall complexity is O(n^4).</p>\n\n<pre><code>for (int i = 1; i &lt; n; i++)\n{\n  for (int j = 0; j &lt; i*i; j++)       // Runs O(n) times\n    {\n      if (j % i == 0)                 // Runs O(n) \u00d7 O(n^2) = O(n^3) times\n        {\n          for (int k = 0; k &lt; j; k++) // Runs O(n) \u00d7 O(n) = O(n^2) times\n            {\n              sum++;                  // Runs O(n^2) \u00d7 O(n^2) = O(n^4) times\n            }\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 12184630, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-CdJK_SKNAcs/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfhRnZ2XO9r5BfattBMNX7SkJBUpw/photo.jpg?sz=128", "display_name": "Bladerunner", "link": "https://stackoverflow.com/users/12184630/bladerunner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1270, "favorite_count": 0, "accepted_answer_id": 58294442, "answer_count": 2, "score": 2, "last_activity_date": 1570571520, "creation_date": 1570570244, "last_edit_date": 1570570721, "question_id": 58294341, "link": "https://stackoverflow.com/questions/58294341/time-complexity-of-nested-for-loops-with-if-statements", "title": "Time Complexity of Nested for Loops with if Statements", "body": "<p>How does the if-statement of this code affect the time complexity of this code?</p>\n\n<p>Based off of this question: <a href=\"https://stackoverflow.com/questions/18656270/runtime-analysis\">Runtime analysis</a>, the for loop in the if statement would run n*n times. But in this code, <em>j</em> outpaces <em>i</em> so that once the second loop is run <code>j = i^2</code>. What does this make the time complexity of the third for loop then? I understand that the first for loop runs n times, the second runs <code>n^2</code> times, and the third runs <code>n^2</code> times for a certain amount of times when triggered. So the complexity would be given by <code>n*n^2(xn^2)</code> for which <code>n</code> is the number of times the if statement is true. The complexity is not simply <code>O(n^6)</code> because the if-statement is not true n times right? </p>\n\n<pre><code>int n;\nint sum;\nfor (int i = 1; i &lt; n; i++)\n{\n  for (int j = 0; j &lt; i*i; j++)\n    {\n      if (j % i == 0)\n        {\n          for (int k = 0; k &lt; j; k++)\n            {\n              sum++;\n            }           \n        }       \n    }   \n}\n</code></pre>\n"}, {"tags": ["c", "format", "scanf", "whitespace", "format-specifiers"], "comments": [{"owner": {"reputation": 1523, "user_id": 371686, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DmulE.jpg?s=128&g=1", "display_name": "Armin Taghavizad", "link": "https://stackoverflow.com/users/371686/armin-taghavizad"}, "edited": false, "score": 2, "creation_date": 1570568713, "post_id": 58294019, "comment_id": 102952060, "body": "You are a new contributor and welcome, but this not how you ask a question. You should work on your code and put what have you done so far, here. Read the Help Center topics to learn more about what questions you can ask and what type of questions you have to avoid. <a href=\"https://stackoverflow.com/help\">Help Center</a>, <a href=\"https://stackoverflow.com/help/dont-ask\">What types of questions should I avoid asking?</a>, <a href=\"https://stackoverflow.com/help/on-topic\">What topics can I ask about here?</a>. Community will definitely be glad to help you for right questions."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 4, "creation_date": 1570568881, "post_id": 58294019, "comment_id": 102952108, "body": "The space character in <code>&quot; %c&quot;</code> matches zero or more whitespace characters. The key word there is &quot;zero&quot;. So it will work just fine with your example."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1570569909, "post_id": 58294019, "comment_id": 102952395, "body": "It&#39;s not so much that there may be &quot;whitespace at the beginning of the input stream&quot; but whitespace remaining in the input buffer after scanning a previous input (a newline for example). Although the filter doesn&#39;t care why its there, it just filters it."}, {"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 0, "creation_date": 1570570556, "post_id": 58294019, "comment_id": 102952590, "body": "Relevant: <a href=\"https://stackoverflow.com/a/36504282/7508077\">stackoverflow.com/a/36504282/7508077</a>"}, {"owner": {"reputation": 21, "user_id": 12165912, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-b5cEBnZ9vPU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcnkSMVc7HiNoCxXIQ_cKrGYsPN_w/photo.jpg?sz=128", "display_name": "Asirino", "link": "https://stackoverflow.com/users/12165912/asirino"}, "reply_to_user": {"reputation": 1523, "user_id": 371686, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DmulE.jpg?s=128&g=1", "display_name": "Armin Taghavizad", "link": "https://stackoverflow.com/users/371686/armin-taghavizad"}, "edited": false, "score": 0, "creation_date": 1570575679, "post_id": 58294019, "comment_id": 102953731, "body": "@Armin is there anywhere I can just ask general questions like this?"}], "answers": [{"tags": [], "owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "is_accepted": true, "score": 3, "last_activity_date": 1570573438, "last_edit_date": 1570573438, "creation_date": 1570572501, "answer_id": 58294646, "question_id": 58294019, "link": "https://stackoverflow.com/questions/58294019/leading-whitespace-when-using-scanf-with-c/58294646#58294646", "title": "Leading whitespace when using scanf() with &quot; %c&quot;", "body": "<p>When you say <code>scanf(\"%d\", &amp;...)</code> to read an integer, it actually skips leading whitespace, then reads an integer.</p>\n\n<p>When you say <code>scanf(\"%f\", &amp;...)</code> to read a floating-point number, it actually skips leading whitespace, then reads a floating-point number.</p>\n\n<p>When you say <code>scanf(\"%s\", ...)</code> to read a string, it actually skips leading whitespace, then reads a string.</p>\n\n<p>Are you beginning to see a pattern?  Well, don't get your hopes up, because:</p>\n\n<p>When you say <code>scanf(\"%c\", &amp;...)</code> to read a character, it does <em>not</em> skip leading whitespace.  If there's leading whitespace, the first of the whitespace characters is the character that <code>%c</code> reads.</p>\n\n<p>This strange exception for <code>%c</code> made perfect sense for the people who first designed <code>scanf</code>, but it has been confusing the heck out of everyone else ever since.</p>\n\n<p>This is why, if what you actually want to read is a non-whitespace character, you must use the format specifier <code>\" %c\"</code>, with a space before the <code>%</code>.  That space matches zero or more whitespace characters, thus skipping any leading whitespace, and ensuring that <code>%c</code> will try to read a non whitespace character for you.</p>\n\n<p>And since this is all so confusing and counterintuitive and difficult to explain, sometimes you'll see the more simple explanation of \"Just use a leading space before <code>%c</code> always\", because all anybody* ever wants to read is a non-whitespace character, anyway.</p>\n\n<p>[* By \"anybody\" I mean, any beginner writing a beginning C program.  Theoretically there might be an expert somewhere who wants to use <code>%c</code> to read whitespace characters.  But experts generally don't use <code>scanf</code> for anything.]</p>\n"}], "owner": {"reputation": 21, "user_id": 12165912, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-b5cEBnZ9vPU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcnkSMVc7HiNoCxXIQ_cKrGYsPN_w/photo.jpg?sz=128", "display_name": "Asirino", "link": "https://stackoverflow.com/users/12165912/asirino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "accepted_answer_id": 58294646, "answer_count": 1, "score": 0, "last_activity_date": 1570573438, "creation_date": 1570568455, "last_edit_date": 1570571842, "question_id": 58294019, "link": "https://stackoverflow.com/questions/58294019/leading-whitespace-when-using-scanf-with-c", "title": "Leading whitespace when using scanf() with &quot; %c&quot;", "body": "<p>I've read around and everyone says to use <code>\" %c\"</code> when you're scanning in a single character because there may be white space at the beginning of the input stream.</p>\n\n<p>Okay, fair. But does this ONLY work for the very first character in said input stream? What if I'm now scanning a single character in a string of many contiguous characters? (ex: abcdef)</p>\n\n<p>Wouldn't using <code>\" %c\"</code> as a format specifier now mess that up?</p>\n"}, {"tags": ["c", "sorting", "malloc", "mergesort"], "comments": [{"owner": {"reputation": 1499, "user_id": 1424395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f8befc450a018be95239aa7d3e7feaf?s=128&d=identicon&r=PG", "display_name": "myradio", "link": "https://stackoverflow.com/users/1424395/myradio"}, "edited": false, "score": 1, "creation_date": 1570571135, "post_id": 58293827, "comment_id": 102952751, "body": "What is your question? why there must be something wrong? Are you getting an error when uncommenting those lines? If so, can you post the compiling command, and the error?"}, {"owner": {"reputation": 2237, "user_id": 8347081, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C2gg5Z3zU2w/AAAAAAAAAAI/AAAAAAAABXE/M2GK2Eixhms/photo.jpg?sz=128", "display_name": "mypetlion", "link": "https://stackoverflow.com/users/8347081/mypetlion"}, "edited": false, "score": 0, "creation_date": 1570574183, "post_id": 58293827, "comment_id": 102953437, "body": "They are not &quot;essentially the same&quot;. The logic in the commented out <code>if</code> statement is different from what you&#39;ve left uncommented."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 12184516, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jpqm_aB_Qk4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re-hZvzGOlDuVVUmkyaqz_sc2ry_A/photo.jpg?sz=128", "display_name": "Abhishek Saurabh", "link": "https://stackoverflow.com/users/12184516/abhishek-saurabh"}, "edited": false, "score": 0, "creation_date": 1570612008, "post_id": 58296479, "comment_id": 102963946, "body": "thanks bro....it worked, though after some digging i found that my code was also correct and running and it was a stupid &quot;j=l2&quot; used in the if cndition that brought the code down....m sorry for the showcase of my naivety\ud83d\ude05"}], "tags": [], "owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "is_accepted": true, "score": 0, "last_activity_date": 1570591014, "last_edit_date": 1570591014, "creation_date": 1570590119, "answer_id": 58296479, "question_id": 58293827, "link": "https://stackoverflow.com/questions/58293827/why-are-the-commented-lines-not-working-in-place-of-the-non-commented-lines-in-t/58296479#58296479", "title": "Why are the commented lines not working in place of the non commented lines in the for loop of the merge function of this mergesort program", "body": "<p>For the commented out code, if j &lt; l2, then it copies from sub1, even if i >= l1 or sub1[i] > sub2[j]. The code below will work, but it's 3 conditionals for every move.</p>\n\n<pre><code>    for(k=0;k&lt;l;k++)\n    {\n        if (i &lt; l1 &amp;&amp; (j &gt;= l2 || *(sub1+i)&lt;*(sub2+j)))\n            *(ar+p+k)=*(sub1+i++);\n        else\n            *(ar+p+k)=*(sub2+j++);\n    }\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 12184516, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jpqm_aB_Qk4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re-hZvzGOlDuVVUmkyaqz_sc2ry_A/photo.jpg?sz=128", "display_name": "Abhishek Saurabh", "link": "https://stackoverflow.com/users/12184516/abhishek-saurabh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 58296479, "answer_count": 1, "score": 0, "last_activity_date": 1570591014, "creation_date": 1570567340, "last_edit_date": 1570583164, "question_id": 58293827, "link": "https://stackoverflow.com/questions/58293827/why-are-the-commented-lines-not-working-in-place-of-the-non-commented-lines-in-t", "title": "Why are the commented lines not working in place of the non commented lines in the for loop of the merge function of this mergesort program", "body": "<p>This is my merge sort code in c language.</p>\n\n<p>As you can see the commented lines in the for loop of the merge function of the code are essentially the same as the non-commented lines which successfully accomplish the task of merging the two sub-arrays.</p>\n\n<p>My question is - what is wrong with the commented lines?</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\nvoid merge(int *ar,int p,int q,int r)\n{\n    int l=r-p+1,*sub1,*sub2,l1=q-p+1,l2=r-q,i,j,k;\n    sub1=(int*)malloc(l1*sizeof(int));\n    sub2=(int*)malloc(l2*sizeof(int));\n    for(i=0;i&lt;l1;i++)\n        *(sub1+i)=*(ar+p+i);\n    for(i=0;i&lt;l2;i++)\n        *(sub2+i)=*(ar+q+i+1);\n    i=j=0;\n    for(k=0;k&lt;l;k++)\n    {\n        //if(j=l2||(i!=l1&amp;&amp;(*(sub1+i)&lt;*(sub2+j))))\n        //    *(ar+p+k)=*(sub1+i++);\n        //else\n        //    *(ar+p+k)=*(sub2+j++);\n        if(i&lt;l1&amp;&amp;j&lt;l2)\n        {\n            if(sub1[i]&lt;sub2[j])\n             ar[p+k]=sub1[i++];\n            else\n             ar[p+k]=sub2[j++];\n        }\n        else if(j&lt;l2)\n           ar[p+k]=sub2[j++];\n        else\n           ar[p+k]=sub1[i++];\n    }\n}\n\nvoid mergesort(int *ar,int p,int q)\n{\n    if(p&lt;q)\n    {\n        int m=(p+q)/2;\n        mergesort(ar,p,m);\n        mergesort(ar,m+1,q);\n        merge(ar,p,m,q);\n        //for(int i=p;i&lt;=q;i++)\n        //    printf(\"%d\\t\",*(ar+i));\n        printf(\"\\n\");\n    }\n}\n\n\nvoid main()\n{\n    int n,i,*ar;\n    printf(\"Enter size of array\\n\");\n    scanf(\"%d\",&amp;n);\n    ar=(int*)malloc(n*sizeof(int));\n    printf(\"Enter the elements of the array\\n\");\n    for(i=0;i&lt;n;i++)\n        scanf(\"%d\",(ar+i));\n    mergesort(ar,0,n-1);\n    printf(\"Sorted array is:\\n\");\n    for(i=0;i&lt;n;i++)\n        printf(\"%d \",*(ar+i));\n}\n\n</code></pre>\n"}, {"tags": ["c", "shell", "pipe", "stdout", "stdin"], "comments": [{"owner": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "edited": false, "score": 3, "creation_date": 1570567503, "post_id": 58293804, "comment_id": 102951686, "body": "Where did you get the idea that a single call to <code>wait</code> waits for multiple children? Maybe you&#39;re confusing the <code>wait</code> system call with the <code>wait</code> shell command, which does wait for all children if no argument is given."}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 1, "creation_date": 1570569410, "post_id": 58293804, "comment_id": 102952270, "body": "Since I stopped using <code>wait</code> so long ago and haven&#39;t thought about its semantics, I don&#39;t really know what happens if you call <code>wait</code> twice.  Perhaps it immediately returns the second time with info about about the same child.  Get with the times (ie, the mid 90&#39;s) and use waitpid."}], "answers": [{"comments": [{"owner": {"reputation": 197, "user_id": 11094853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c26974b35c81e0675ca4416101ebf045?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/11094853/alex"}, "edited": false, "score": 0, "creation_date": 1570571815, "post_id": 58294393, "comment_id": 102952931, "body": "They are both closed aren&#39;t they, or do you mean that I should close them before being <code>dup2()</code>&#39;d?"}, {"owner": {"reputation": 353, "user_id": 12114444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73c48534ac3fc31b1985899c6a11a50a?s=128&d=identicon&r=PG&f=1", "display_name": "SaltyPleb", "link": "https://stackoverflow.com/users/12114444/saltypleb"}, "reply_to_user": {"reputation": 197, "user_id": 11094853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c26974b35c81e0675ca4416101ebf045?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/11094853/alex"}, "edited": false, "score": 1, "creation_date": 1570571988, "post_id": 58294393, "comment_id": 102952978, "body": "you did close them in the child process but did not do the same for the parent. as said in the answer try closing both before waiting."}, {"owner": {"reputation": 197, "user_id": 11094853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c26974b35c81e0675ca4416101ebf045?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/11094853/alex"}, "edited": false, "score": 0, "creation_date": 1570572500, "post_id": 58294393, "comment_id": 102953102, "body": "Oh! Sorry, total rookie mistake <i>sweat intensifies</i>, this completely solved the issue, thank you very much :D"}], "tags": [], "owner": {"reputation": 353, "user_id": 12114444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73c48534ac3fc31b1985899c6a11a50a?s=128&d=identicon&r=PG&f=1", "display_name": "SaltyPleb", "link": "https://stackoverflow.com/users/12114444/saltypleb"}, "is_accepted": true, "score": 1, "last_activity_date": 1570570617, "creation_date": 1570570617, "answer_id": 58294393, "question_id": 58293804, "link": "https://stackoverflow.com/questions/58293804/execution-of-unix-command-is-being-outputted-after-i-exit-the-program/58294393#58294393", "title": "Execution of UNIX command is being outputted after I exit the program", "body": "<p>The reason would be your parent process file descriptors are not closed yet. When you wait for the second command to terminate, it hangs because the writing end is not closed so it wait until either the writing end is closed, or new data is available to read.  </p>\n\n<p>Try closing both <code>pipefd[0]</code> and <code>pipefd[1]</code> before waiting for process to terminate.</p>\n\n<p>Also note that <code>wait(NULL);</code> will immediately return when one process has terminated, you would need a second one as to not generate zombies if your process still runs after that.</p>\n"}], "owner": {"reputation": 197, "user_id": 11094853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c26974b35c81e0675ca4416101ebf045?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/11094853/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 58294393, "answer_count": 1, "score": 1, "last_activity_date": 1570570617, "creation_date": 1570567243, "question_id": 58293804, "link": "https://stackoverflow.com/questions/58293804/execution-of-unix-command-is-being-outputted-after-i-exit-the-program", "title": "Execution of UNIX command is being outputted after I exit the program", "body": "<p>For some unknown reason, when I'm executing piped commands in my shell program, they're only outputting once I exit the program, anyone see why?</p>\n\n<p>Code:</p>\n\n<pre><code>int execCmdsPiped(char **cmds, char **pipedCmds){\n\n  // 0 is read end, 1 is write end \n  int pipefd[2]; \n\n  pid_t pid1, pid2; \n\n  if (pipe(pipefd) == -1) {\n    fprintf(stderr,\"Pipe failed\");\n    return 1;\n  } \n  pid1 = fork(); \n  if (pid1 &lt; 0) { \n    fprintf(stderr, \"Fork Failure\");\n  } \n\n  if (pid1 == 0) { \n  // Child 1 executing.. \n  // It only needs to write at the write end \n    close(pipefd[0]); \n    dup2(pipefd[1], STDOUT_FILENO); \n    close(pipefd[1]); \n\n    if (execvp(pipedCmds[0], pipedCmds) &lt; 0) { \n      printf(\"\\nCouldn't execute command 1: %s\\n\", *pipedCmds); \n      exit(0); \n    }\n  } else { \n    // Parent executing \n    pid2 = fork(); \n\n    if (pid2 &lt; 0) { \n      fprintf(stderr, \"Fork Failure\");\n      exit(0);\n    }\n\n    // Child 2 executing.. \n    // It only needs to read at the read end \n    if (pid2 == 0) { \n      close(pipefd[1]); \n      dup2(pipefd[0], STDIN_FILENO); \n      close(pipefd[0]); \n      if (execvp(cmds[0], cmds) &lt; 0) { \n        //printf(\"\\nCouldn't execute command 2...\");\n        printf(\"\\nCouldn't execute command 2: %s\\n\", *cmds);\n        exit(0);\n      }\n    } else {\n      // parent executing, waiting for two children\n      wait(NULL);\n    } \n  }\n}\n</code></pre>\n\n<p>Output:</p>\n\n<p><a href=\"https://i.stack.imgur.com/2aAN3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2aAN3.png\" alt=\"Output of program when I enter &quot;ls | sort -r&quot; for example\"></a></p>\n\n<p>In this example of the output, I have used \"ls | sort -r\" as the example, another important note is that my program is designed to only handle one pipe, I'm not supporting multi-piped commands. But with all that in mind, where am I going wrong, and what should I do to fix it so that it's outputting within the shell, not outside it. Many thanks in advance for any and all advice and help given.</p>\n"}, {"tags": ["c", "malloc"], "comments": [{"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 2, "creation_date": 1570567111, "post_id": 58293765, "comment_id": 102951566, "body": "Undefined behavior: Anything can happen."}, {"owner": {"reputation": 4522, "user_id": 5157478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bBcym.png?s=128&g=1", "display_name": "Frankie_C", "link": "https://stackoverflow.com/users/5157478/frankie-c"}, "edited": false, "score": 0, "creation_date": 1570567352, "post_id": 58293765, "comment_id": 102951637, "body": "C language doesn&#39;t enforce any bound checking. It&#39;s all up to you to assure that no memory violations happens."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1570567897, "post_id": 58293765, "comment_id": 102951823, "body": "<code>&#47;&#47; I assume this should fail ?</code> is the correct comment. It <i>might not</i> fail, but always assume that it will."}], "answers": [{"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 2, "last_activity_date": 1570567945, "creation_date": 1570567945, "answer_id": 58293928, "question_id": 58293765, "link": "https://stackoverflow.com/questions/58293765/what-happen-the-data-is-bigger-than-malloc-declares/58293928#58293928", "title": "What happen the data is bigger than malloc declares?", "body": "<p>C doesn't mandate any bounds checking - the behavior on writing past the end of the array is <em>undefined</em>.  Depending on what you overwrite, your code may crash immediately, or it may corrupt other data, or it may work as expected.  </p>\n\n<p>Neither the compiler nor the runtime environment are required to issue any warning or throw any exception on writing past the end of the array.  You are expected to simply Not Do That.  </p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1570577430, "post_id": 58294169, "comment_id": 102954035, "body": "Note: <i>heap</i> and <i>stack</i> are a common model of memory - but one not required by C."}], "tags": [], "owner": {"reputation": 1, "user_id": 11939181, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0u42L.jpg?s=128&g=1", "display_name": "Ori Lazar", "link": "https://stackoverflow.com/users/11939181/ori-lazar"}, "is_accepted": false, "score": 0, "last_activity_date": 1570570913, "last_edit_date": 1570570913, "creation_date": 1570569256, "answer_id": 58294169, "question_id": 58293765, "link": "https://stackoverflow.com/questions/58293765/what-happen-the-data-is-bigger-than-malloc-declares/58294169#58294169", "title": "What happen the data is bigger than malloc declares?", "body": "<p>In this context of memory manipulation, it is important for you to understand what it is you're actually doing when you are declaring this dynamic memory allocation.</p>\n\n<p>Your \"array\" pointer is located on the stack and points to the first item (the first 4 bytes) of a continuous block of memory (12 bytes (3xsizeof(int)) which is located ON THE HEAP.</p>\n\n<p>When you try to access this heap space memory, through the [N] operator, you're asking the compiler to perform some pointer arithmetic to allow you to access the data contained in memory at the location (array + (N)*sizeof(int)) ON THE HEAP. </p>\n\n<p>So when you try to access array[3], you are attempting to access a 4 byte memory location that is located directly after the last memory space you allocated for your array, this could be many things, including your own data from a previous allocation!</p>\n\n<p>As the other responses to this post have stated, this is undefined behaviour, and should be avoided, as you cannot control what data you manipulate when you access \"out of bounds\" data.</p>\n"}], "owner": {"reputation": 4483, "user_id": 2801947, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/88a27d87ce6a8c5e02bc7322ca651910?s=128&d=identicon&r=PG&f=1", "display_name": "Xiaohe Dong", "link": "https://stackoverflow.com/users/2801947/xiaohe-dong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1570570913, "creation_date": 1570567041, "question_id": 58293765, "link": "https://stackoverflow.com/questions/58293765/what-happen-the-data-is-bigger-than-malloc-declares", "title": "What happen the data is bigger than malloc declares?", "body": "<p>I am new to C and I have a question about <code>malloc</code>. Here is the code:</p>\n\n<pre><code>  int *array = malloc(3 * sizeof(int));\n  if (array != NULL) {\n     printf(\"success \\n\");\n  }\n\n  array[0] = 1;\n  array[1] = 1;\n  array[2] = 1;\n  array[3] = 2; // I assume this should fail ?\n  array[4] = 1; // I assume this should fail ?\n\n  printf(\" %d \\n\", array[3]);\n</code></pre>\n\n<p>Does it mean the <code>malloc</code> is only a memory allocation hint but not upper limit ? If yes, how do I enforce the upper limit in C ?</p>\n"}, {"tags": ["c", "visual-studio", "function", "call", "return-value"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1570566276, "post_id": 58293580, "comment_id": 102951211, "body": "<code>while (y &lt;= 0);</code> is either an infinite loop or no loop at all... your function prints doesn&#39;t return anything, and should not loop <i>at all</i>"}, {"owner": {"reputation": 27, "user_id": 12081951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfd45ee59d5db5370f552952c5ab5663?s=128&d=identicon&r=PG&f=1", "display_name": "Eysaak", "link": "https://stackoverflow.com/users/12081951/eysaak"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1570566332, "post_id": 58293580, "comment_id": 102951236, "body": "I understand, the function is not complete. I&#39;m just listing what I have and my thoughts for clarification."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1570566354, "post_id": 58293580, "comment_id": 102951243, "body": "I&#39;d do <code>return y&lt;=0 ? -1.0 : y;</code>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1570566605, "post_id": 58293580, "comment_id": 102951360, "body": "<i>&quot;When called, your function will return the first argument divided by the second argument.&quot;</i> So start with the basic functionality, and then modify the function to deal with the edge cases. But the job of reporting an error to the user does not belong in that function. It informs the <i>caller</i>, with <code>return -1.0;</code> It&#39;s a poorly devised task though: there does not seem to be a restriction on providing negative arguments, for example <code>1.0</code> and <code>-1.0</code>."}, {"owner": {"reputation": 27, "user_id": 12081951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfd45ee59d5db5370f552952c5ab5663?s=128&d=identicon&r=PG&f=1", "display_name": "Eysaak", "link": "https://stackoverflow.com/users/12081951/eysaak"}, "edited": false, "score": 0, "creation_date": 1570567069, "post_id": 58293580, "comment_id": 102951549, "body": "I need the function to divide the users input and return a value of -1.0 if the caller attempts to divide by 0."}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 12081951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfd45ee59d5db5370f552952c5ab5663?s=128&d=identicon&r=PG&f=1", "display_name": "Eysaak", "link": "https://stackoverflow.com/users/12081951/eysaak"}, "edited": false, "score": 0, "creation_date": 1570570573, "post_id": 58294110, "comment_id": 102952594, "body": "Thank you for your response. However I can&#39;t use if else statements as we have not covered them in the course yet."}, {"owner": {"reputation": 27, "user_id": 12081951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfd45ee59d5db5370f552952c5ab5663?s=128&d=identicon&r=PG&f=1", "display_name": "Eysaak", "link": "https://stackoverflow.com/users/12081951/eysaak"}, "edited": false, "score": 0, "creation_date": 1570571027, "post_id": 58294110, "comment_id": 102952713, "body": "Thank you very much for your time, I would up vote but I am not at the level to do so currently."}], "tags": [], "owner": {"reputation": 353, "user_id": 12114444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73c48534ac3fc31b1985899c6a11a50a?s=128&d=identicon&r=PG&f=1", "display_name": "SaltyPleb", "link": "https://stackoverflow.com/users/12114444/saltypleb"}, "is_accepted": true, "score": 0, "last_activity_date": 1570570821, "last_edit_date": 1570570821, "creation_date": 1570568901, "answer_id": 58294110, "question_id": 58293580, "link": "https://stackoverflow.com/questions/58293580/what-should-my-function-include-to-return-the-value-of-1-0-if-the-wrong-input-i/58294110#58294110", "title": "What should my function include to return the value of -1.0 if the wrong input is given?", "body": "<p>Your code has few major problems:</p>\n\n<ol>\n<li>String format of <code>scanf</code> and <code>printf</code> is wrong, <code>%d</code> format takes an int, and you put a double as argument, the right format for double is <code>%lf</code></li>\n<li>You should be using a separator between each formats.</li>\n<li>Your function divmaster is missing a <code>return</code> statement.</li>\n</ol>\n\n<p>Here's what your code should look like after fixing it.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\ndouble divmaster(double x, double y);\n\nint main(void)\n{\n    double i, j, value;\n\n    printf(\"Please enter two numbers \");\n    printf(\"the first number will be divded by the second. The value \");\n    printf(\"will then be returned. Enter q to quit\\n\");\n\n    while (scanf(\"%lf %lf\", &amp;i, &amp;j) == 2)\n    {\n        value = divmaster(i, j);\n        printf(\"%lf divded by %lf is %.6lf\\n\", i, j, value);\n        printf(\"Please enter the next pair of numbers or q to quit.\\n\");\n    }\n\n    return 0;\n}\n\ndouble divmaster(double x, double y)\n{\n\n    if (0.0f == y)\n        return -1.0f;\n    else\n        return x / y;\n}\n</code></pre>\n\n<p>If you can't use if else statement, using while statement is also possible</p>\n\n<pre><code>while (0.0f == y)\n    return -1.0f;\n\nreturn x/y;\n</code></pre>\n\n<p>The correct format for each type are defined in the manual for each of these functions<br>\n<a href=\"http://man7.org/linux/man-pages/man3/printf.3.html\" rel=\"nofollow noreferrer\">http://man7.org/linux/man-pages/man3/printf.3.html</a><br>\n<a href=\"http://man7.org/linux/man-pages/man3/scanf.3.html\" rel=\"nofollow noreferrer\">http://man7.org/linux/man-pages/man3/scanf.3.html</a></p>\n"}], "owner": {"reputation": 27, "user_id": 12081951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfd45ee59d5db5370f552952c5ab5663?s=128&d=identicon&r=PG&f=1", "display_name": "Eysaak", "link": "https://stackoverflow.com/users/12081951/eysaak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 58294110, "answer_count": 1, "score": -1, "last_activity_date": 1570570821, "creation_date": 1570566133, "last_edit_date": 1570566245, "question_id": 58293580, "link": "https://stackoverflow.com/questions/58293580/what-should-my-function-include-to-return-the-value-of-1-0-if-the-wrong-input-i", "title": "What should my function include to return the value of -1.0 if the wrong input is given?", "body": "<p>Here is the project instructions:</p>\n\n<blockquote>\n  <p>\"Write a C program that includes a function of type double called divmaster accepts two double arguments (you must write the divmaster function). When called, your function will return the first argument divided by the second argument. Make sure your function includes a decision statement so that it can't divide by 0--if the caller attempts to divide by 0 the function should return a value of -1.0. Your program should call divmaster then display the value returned by the function. Test your function thoroughly then submit output using the arguments 22 and 3. Remember that a structured function should have only one return statement. \"</p>\n</blockquote>\n\n<p>I think I have most of the program correct, except im having difficulties with the function portion. We have not learned if else statements so I can't use those. My thoughts were a conditional while statement to return a value of -1.0 if 0 is entered. Any thoughts would be appreciated.</p>\n\n<p>Here is the code I have so far. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\ndouble divmaster(double x, double y);\n\nint main(void)\n{\n    double i, j, value;\n\n    printf(\"Please enter two numbers \");\n    printf(\"the first number will be divded by the second. The value \");\n    printf(\"will then be returned. Enter q to quit\\n\");\n\n    while (scanf(\"%d%d\", &amp;i, &amp;j) == 2)\n    {\n        value = divmaster(i, j);\n        printf(\"%d divded by %d is %.6f\\n\", i, j, value);\n        printf(\"Please enter the next paid of numbers or q to quit.\\n\");\n    }\n\n    return 0;\n}\n\n    double divmaster(double x, double y)\n    {\n\n        while (y &lt;= 0);\n        printf(\"-1.0\");\n\n\n    }\n\n}\n</code></pre>\n"}, {"tags": ["c", "rsa", "mbedtls"], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 12184080, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FzgBtZ08i7g/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd5jyalIDyf93M0Txxzi4BAqj82tg/photo.jpg?sz=128", "display_name": "Chad E", "link": "https://stackoverflow.com/users/12184080/chad-e"}, "is_accepted": true, "score": 1, "last_activity_date": 1571139650, "creation_date": 1571139650, "answer_id": 58393847, "question_id": 58293486, "link": "https://stackoverflow.com/questions/58293486/why-is-mbedtls-ecdsa-from-keypair-returning-an-error/58393847#58393847", "title": "Why is mbedtls_ecdsa_from_keypair returning an error?", "body": "<p>Calling <code>mbedtls_ecdsa_from_keypair()</code> doesn't seem to work with an RSA key.  I switched to an EC private key (<code>secp256r1</code> to be exact) and it began working properly.</p>\n"}], "owner": {"reputation": 21, "user_id": 12184080, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FzgBtZ08i7g/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd5jyalIDyf93M0Txxzi4BAqj82tg/photo.jpg?sz=128", "display_name": "Chad E", "link": "https://stackoverflow.com/users/12184080/chad-e"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 58393847, "answer_count": 1, "score": 1, "last_activity_date": 1571139650, "creation_date": 1570565772, "last_edit_date": 1570582489, "question_id": 58293486, "link": "https://stackoverflow.com/questions/58293486/why-is-mbedtls-ecdsa-from-keypair-returning-an-error", "title": "Why is mbedtls_ecdsa_from_keypair returning an error?", "body": "<p>I'm parsing an RSA private key from a buffer with <code>mbedtls_pk_parse_key()</code>, which returns 0.  I then call <code>mbedtls_ecdsa_from_keypair()</code> and it returns -20096 (which I believe corresponds to <code>MBEDTLS_ERR_ECP_FEATURE_UNAVAILABLE)</code>.</p>\n\n<p>I'm building something similar to the following code using the XDK Workbench:</p>\n\n<pre><code>  mbedtls_mpi r, s;\n  mbedtls_pk_context pk;\n  mbedtls_ecdsa_context ecdsa_sign;\n\n  mbedtls_mpi_init(&amp;r);\n  mbedtls_mpi_init(&amp;s);\n  mbedtls_pk_init(&amp;pk);\n  mbedtls_ecdsa_init(&amp;ecdsa_sign);\n\n  int ret = mbedtls_pk_parse_key(&amp;pk,  priv_key, strlen(priv_key) + 1, NULL, 0);\n  /* Returns 0 */\n\n  ret = mbedtls_ecdsa_from_keypair(&amp;ecdsa_sign, pk.pk_ctx);\n  /* Returns -20096 */\n</code></pre>\n\n<p>When I look at the implementation of <code>mbedtls_ecdsa_from_keypair()</code>, I see that <code>pk.pk_ctx</code> is treated as an <code>mbedtls_ecp_keypair</code>.  The <code>grp</code> member of the <code>mbedtls_ecp_keypair</code> has an <code>id</code> member of zero, which corresponds to <code>MBEDTLS_ECP_DP_NONE</code>. Am I passing the wrong thing to <code>mbedtls_ecdsa_from_keypair</code>?</p>\n"}]