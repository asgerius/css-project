[{"tags": ["c", "linux", "windows", "cmake", "gtk"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1446079493, "post_id": 33403657, "comment_id": 54599656, "body": "It&#39;s a lot of work, a lot. You surely don&#39;t want to do that. GTK has many dependencies, compiling each dependency in turn will require more software to be compiled, the list can become really large very quickly."}], "answers": [{"comments": [{"owner": {"reputation": 145, "user_id": 4059853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56d44f64516741eb48c4ec3da7f5060c?s=128&d=identicon&r=PG&f=1", "display_name": "DMSilva", "link": "https://stackoverflow.com/users/4059853/dmsilva"}, "edited": false, "score": 0, "creation_date": 1446088275, "post_id": 33404200, "comment_id": 54601957, "body": "You&#39;re right, I was thinking about doing something way too overkill. All I want to do actually is present a message box and be able to do it whether my code is compiled on linux or windows. I&#39;ll probably just have two function and load the correct one depending on the OS. Thanks for the answer, it really helped me realize what I really need!"}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": true, "score": 1, "last_activity_date": 1446864964, "last_edit_date": 1592644375, "creation_date": 1446080057, "answer_id": 33404200, "question_id": 33403657, "link": "https://stackoverflow.com/questions/33403657/portable-gtk-cmake-project/33404200#33404200", "title": "Portable GTK cmake project", "body": "<p>In theory it can be done, in practice it's so complicated that it will take a very long time to setup the build system correctly, and then it will take a lot of time to compile.</p>\n<p>Also,</p>\n<ul>\n<li><p>On Linux, you don't really need to because if you link dynamically to GTK and all the other required libraries then you could build dependency aware packages like <em>rpm</em>s or <em>deb</em>s or even more peculiar ones like <em>Arch Linux</em> or <em>Slackware</em> packages.</p>\n<p>You could even create a <em>gentoo</em>/<em>protage</em> package since, distributing GTK with your software will force your software to be GPL so the source code will have to be available if someone asks for it anyway.</p>\n</li>\n<li><p>On Windows, there are binary distributions for GTK that can be redistributed with your software, see <a href=\"http://www.geany.org/Download/Releases\" rel=\"nofollow noreferrer\">this for example</a>.</p>\n</li>\n</ul>\n<p>Compiling GTK is a very huge task and requires a lot of knowledge about all the dependencies and how to compile them properly, not to mention it takes a lot of time.</p>\n<p>You have to go with something else because this is not only difficult, it's also unnecessary since there are many ways to distribute software that uses GTK.</p>\n"}], "owner": {"reputation": 145, "user_id": 4059853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56d44f64516741eb48c4ec3da7f5060c?s=128&d=identicon&r=PG&f=1", "display_name": "DMSilva", "link": "https://stackoverflow.com/users/4059853/dmsilva"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 194, "favorite_count": 0, "closed_date": 1446111951, "accepted_answer_id": 33404200, "answer_count": 1, "score": -1, "last_activity_date": 1446864964, "creation_date": 1446076656, "question_id": 33403657, "link": "https://stackoverflow.com/questions/33403657/portable-gtk-cmake-project", "closed_reason": "Needs more focus", "title": "Portable GTK cmake project", "body": "<p>I want to know how I can setup a CMake project that compiles its own GTK in C.I want to be able to compile this project on Linux and Windows. I'm basically wondering how I can include GTK in my project and configure my CMakeList.txt accordingly. Can it be done?</p>\n"}, {"tags": ["c", "for-loop"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1446075741, "post_id": 33403482, "comment_id": 54598493, "body": "The compiler is telling you why - you need an lvalue.  What you seem to be asking for makes no sense whatsoever:("}, {"owner": {"reputation": 14673, "user_id": 296460, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/FGDo8.jpg?s=128&g=1", "display_name": "shuttle87", "link": "https://stackoverflow.com/users/296460/shuttle87"}, "edited": false, "score": 0, "creation_date": 1446132095, "post_id": 33403482, "comment_id": 54625929, "body": "Compile errors and undefined behavior aside the bigger issue I see here is that this is a way of writing horrendously unclear code. Don&#39;t use a <code>++</code> here, it destroys the readability of your code and readability matters a lot."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 5094666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/719f55e09eba863864c85a9133661320?s=128&d=identicon&r=PG&f=1", "display_name": "Denil Vira", "link": "https://stackoverflow.com/users/5094666/denil-vira"}, "edited": false, "score": 0, "creation_date": 1446076327, "post_id": 33403502, "comment_id": 54598701, "body": "Okay, this code does nothing productive, It prints squares of first 11 whole numbers. I am still learning C and I came across this problems as part of programming  exercise where in it was asked to do it with using just 1 variable and 1 for loop. I apologize for my ignorance."}, {"owner": {"reputation": 25, "user_id": 5094666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/719f55e09eba863864c85a9133661320?s=128&d=identicon&r=PG&f=1", "display_name": "Denil Vira", "link": "https://stackoverflow.com/users/5094666/denil-vira"}, "edited": false, "score": 0, "creation_date": 1446077154, "post_id": 33403502, "comment_id": 54598955, "body": "Also, I wasn&#39;t aware until now that double modification is not a good idea. I still don&#39;t know why this is bad. I shall read up on that on my own. Thanks though for the productive reply."}, {"owner": {"reputation": 35013, "user_id": 626853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ILPj4.jpg?s=128&g=1", "display_name": "Aasmund Eldhuset", "link": "https://stackoverflow.com/users/626853/aasmund-eldhuset"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1446077643, "post_id": 33403502, "comment_id": 54599104, "body": "No need to apologize; we were all starters once. @MartinJames: Please take that into account before making such comments; I know my first lines of code weren&#39;t pretty - care to show yours?"}, {"owner": {"reputation": 35013, "user_id": 626853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ILPj4.jpg?s=128&g=1", "display_name": "Aasmund Eldhuset", "link": "https://stackoverflow.com/users/626853/aasmund-eldhuset"}, "edited": false, "score": 0, "creation_date": 1446077837, "post_id": 33403502, "comment_id": 54599153, "body": "It&#39;s just one of the rules of the language (which is there for good, but quite technical reasons) - for an explanation, see the link I added."}, {"owner": {"reputation": 35013, "user_id": 626853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ILPj4.jpg?s=128&g=1", "display_name": "Aasmund Eldhuset", "link": "https://stackoverflow.com/users/626853/aasmund-eldhuset"}, "edited": false, "score": 0, "creation_date": 1446077978, "post_id": 33403502, "comment_id": 54599193, "body": "A much cleaner way to achieve what you want to do is to simply loop over the first 11 whole numbers and compute the square inside the loop (rather than using the square to find the original number again)."}, {"owner": {"reputation": 25, "user_id": 5094666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/719f55e09eba863864c85a9133661320?s=128&d=identicon&r=PG&f=1", "display_name": "Denil Vira", "link": "https://stackoverflow.com/users/5094666/denil-vira"}, "edited": false, "score": 0, "creation_date": 1446084039, "post_id": 33403502, "comment_id": 54600883, "body": "I forgot to mention earlier, the problem specification did not allow any modifications of i in the body of loop, just 1 variable and 1 for loop. I could of course just print i*i while going from 0 to 10, but the aim here was to master the for loop and not rely on the body of it."}, {"owner": {"reputation": 35013, "user_id": 626853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ILPj4.jpg?s=128&g=1", "display_name": "Aasmund Eldhuset", "link": "https://stackoverflow.com/users/626853/aasmund-eldhuset"}, "edited": false, "score": 0, "creation_date": 1446084884, "post_id": 33403502, "comment_id": 54601098, "body": "<code>i * i</code> does not modify <code>i</code>, so I&#39;m pretty sure that this is within the rules of the task. If the task wants you to make an extremely convoluted loop header for the sake of demonstrating that it is possible, sure, but for later use: keeping code simple is much better than keeping it compact and/or clever. I would also argue that &quot;mastering&quot; for loops would consist of the ability to figure out the simplest way to make the loop header and loop body work together to achieve your desired result."}], "tags": [], "owner": {"reputation": 35013, "user_id": 626853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ILPj4.jpg?s=128&g=1", "display_name": "Aasmund Eldhuset", "link": "https://stackoverflow.com/users/626853/aasmund-eldhuset"}, "is_accepted": true, "score": 3, "last_activity_date": 1446077697, "last_edit_date": 1495539891, "creation_date": 1446075713, "answer_id": 33403502, "question_id": 33403482, "link": "https://stackoverflow.com/questions/33403482/error-while-using-operator-in-c/33403502#33403502", "title": "error while using ++ operator in C", "body": "<p>Indeed; <code>++</code> requires a variable or something else that is legal to modify (you're trying to modify a return value of primitive type, which is not legal) - a so-called <em>lvalue</em>. Why not simply use <code>sqrt((double)i) + 1</code>?</p>\n\n<p>However, there's another problem in your code, even with this correction: <code>i *= (i = sqrt((double)i) + 1)</code> invokes <a href=\"https://stackoverflow.com/questions/4176328/undefined-behavior-and-sequence-points\"><em>undefined behavior</em></a> because it modifies <code>i</code> twice. Hence, your code might potentially do anything from giving you the result you want, to giving random results, to erasing your hard drive. What exactly are you trying to achieve by your calculation?</p>\n"}], "owner": {"reputation": 25, "user_id": 5094666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/719f55e09eba863864c85a9133661320?s=128&d=identicon&r=PG&f=1", "display_name": "Denil Vira", "link": "https://stackoverflow.com/users/5094666/denil-vira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 33403502, "answer_count": 1, "score": -4, "last_activity_date": 1446077697, "creation_date": 1446075624, "question_id": 33403482, "link": "https://stackoverflow.com/questions/33403482/error-while-using-operator-in-c", "title": "error while using ++ operator in C", "body": "<p>I am trying this peice of code : </p>\n\n<pre><code>for (i = 0; i &lt;= 100; i *= (i = ++sqrt((double)i)))\n  printf (\"%d \", i);\n</code></pre>\n\n<p>and I get the following error : </p>\n\n<pre><code>tp.c:10:33: error: lvalue required as increment operand\nfor (i = 0; i &lt;= 100; i *= (i = ++sqrt((double)i)))\n</code></pre>\n\n<p>It works fine with this : </p>\n\n<pre><code>for (i = 0; i &lt;= 100; i *= (i = sqrt((double)i) + 1))\n      printf (\"%d \", i);\n</code></pre>\n\n<p>I am not sure why is this so? My guess is that ++ operator needs a variable to operate upon, it cannot operate on a result returned by a function. Is there a way to make the code work using ++ operator? </p>\n"}, {"tags": ["c", "linux", "ncurses"], "comments": [{"owner": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "edited": false, "score": 0, "creation_date": 1446168248, "post_id": 33403376, "comment_id": 54643782, "body": "That&#39;s a separate question: the keys do not echo because you turned echo off during initialization using <code>noecho();</code>"}, {"owner": {"reputation": 1, "user_id": 5500605, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/givUJ.png?s=128&g=1", "display_name": "GiovaniAbel", "link": "https://stackoverflow.com/users/5500605/giovaniabel"}, "reply_to_user": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "edited": false, "score": 0, "creation_date": 1446173188, "post_id": 33403376, "comment_id": 54644508, "body": "Yeah, I finally fixed most of the error. First I changed the fgets to getnstr, I don&#39;t know yet but ncurses has some problems with stdin. And I simply activated echo in the beginning of my function and turned it off again at the end of it.  My real problem wasn&#39;t with the echoing but with the fact that the fgets and scanf wasn&#39;t working as intended to."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5500605, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/givUJ.png?s=128&g=1", "display_name": "GiovaniAbel", "link": "https://stackoverflow.com/users/5500605/giovaniabel"}, "edited": false, "score": 0, "creation_date": 1446118280, "post_id": 33403774, "comment_id": 54615842, "body": "Thanks, it really helped with my problem but now I&#39;m having another problem that I don&#39;t if it&#39;s related or not with the first. I think it&#39;s something with the ncurses screen. I&#39;ll update the first topic so you can see if it&#39;s related."}], "tags": [], "owner": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "is_accepted": true, "score": 0, "last_activity_date": 1492872896, "last_edit_date": 1492872896, "creation_date": 1446077304, "answer_id": 33403774, "question_id": 33403376, "link": "https://stackoverflow.com/questions/33403376/mvprintw-only-printing-partially/33403774#33403774", "title": "mvprintw() only printing partially", "body": "<p>The problem is that the program runs a shell process \"clear\" without doing <a href=\"http://invisible-island.net/ncurses/man/curs_initscr.3x.html#h3-endwin\" rel=\"nofollow noreferrer\"><code>endwin</code></a> to tell ncurses that it is leaving screen mode temporarily.  Use the <a href=\"http://invisible-island.net/ncurses/man/curs_clear.3x.html\" rel=\"nofollow noreferrer\">erase()</a> function.</p>\n\n<p>If you replace <code>system(\"clear\")</code> with <code>erase()</code>, it will behave as you intended.</p>\n"}], "owner": {"reputation": 1, "user_id": 5500605, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/givUJ.png?s=128&g=1", "display_name": "GiovaniAbel", "link": "https://stackoverflow.com/users/5500605/giovaniabel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 588, "favorite_count": 0, "accepted_answer_id": 33403774, "answer_count": 1, "score": 0, "last_activity_date": 1492872896, "creation_date": 1446075007, "last_edit_date": 1446129598, "question_id": 33403376, "link": "https://stackoverflow.com/questions/33403376/mvprintw-only-printing-partially", "title": "mvprintw() only printing partially", "body": "<p>I've just migrated to Ubuntu and I'm trying to get adapted to curses and ncurses. I'm trying to build a simple that use the arrows to navigate, uses Q to exit and a help with F2. The problem is, after showing the help text, when it go backs to the initial menu it only prints the initial parts of the mvprintw. Here's my code:</p>\n\n<p><strong><em>CODE UPDATED</em></strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;time.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;locale.h&gt;\n#include &lt;ncurses.h&gt;\n\n#define MIN 1\n#define MAX 6\n\n//STRUCT PARA ARMEZAR DADOS PARA CADASTRO\ntypedef struct{\n    char nome[50];\n    long int rg;\n    char cpf[11];\n    unsigned short idade;\n    float alt;\n}REGISTRO;\n\nREGISTRO dados;\n\n//Inicializa\u00e7\u00e3o da fun\u00e7\u00e3o cadastro\nvoid cadastro(REGISTRO *dados);\n\nint main(){\n    short c, opc, x, y;\n\n    char path[] = \"data/\";\n    char pathA[] = \"data/dados.bin\";\n\n    setlocale(LC_ALL, \"\");\n    initscr();\n    raw();\n    noecho();\n    keypad(stdscr, TRUE);\n\n    FILE *data;\n\n    if(!mkdir(path, 0777)){\n        printf(\"Pasta \\\"data\\\" nao encontrada.\\nCriando diret\u00f3rio...\\n\");\n    }\n\n    if((data = fopen(pathA, \"r+\"))==NULL){\n        printf(\"N\u00e3o foi possivel encontrar o arquivo dados.bin!\\nUm novo arquivo ser\u00e1 criado...\\n\");\n        if((data = fopen(pathA, \"w+\"))==NULL){\n            printf(\"N\u00e3o foi possivel criar o arquivo.\\nO programa ser\u00e1 finalizado em breve!\\n\");\n            exit(1);\n        }\n    }\n\n    do{\n        erase();\n        mvprintw(0,0,\"-----DATABASE EVIL CORP-----\\n\");\n        printw(\"1. Cadastro\\n2. Whatever\\n3. Whatever\\n4. Whatever\\n5. Whatever\\n6. Whatever\\n\");\n        x = 0; y = 1; opc = 1;\n        refresh();\n        do{\n            mvprintw(7,0,\"OPC: %hd\", opc);\n            mvprintw(8,0,\"C: %hd\", c);\n            move(y,x);\n            c = getch();\n\n            if(c == 'Q' || c == 'q'){\n                opc=0;\n                c=0;\n            }\n\n            if(c == KEY_F(2)){\n                erase();\n                mvprintw(0, 0, \"MENU DE AJUDA\");\n                x = 0, y = 1, opc = 0;\n                refresh();\n                getch();\n            }\n\n            if(c == '\\n'){\n                switch(opc){\n                    case 1:\n                        erase();\n                        cadastro(&amp;dados);\n                        getch();\n                        opc=0;\n                    break;\n\n                    case 2:\n                        erase();\n                        printw(\"TESTE\");\n                        getch();\n                        opc=0;\n                    break;\n\n                    default:\n                        erase();\n                        mvprintw(0,0, \"Opcao invalida ou ainda em construcao.\");\n                        getch();\n                        opc=0;\n                    break;\n                }\n            }\n\n            switch(c){\n                case KEY_UP:\n                    if(opc&gt;1){\n                        opc--;\n                        y--;\n                    }\n\n                    else{\n                        opc=MAX;\n                        y=MAX;\n                    }\n                break;\n\n                case KEY_DOWN:\n                    if(opc&lt;6){\n                        opc++;\n                        y++;\n                    }\n                    else{\n                        opc=MIN;\n                        y=MIN;\n                    }\n            }\n\n        }while(opc);\n    }while(c);\n\n    endwin();\n    return 0;\n}\n\nvoid cadastro(REGISTRO *dados){\n    erase();\n    mvprintw(0, 0, \"-----REGISTRO DE DADOS-----\\nNome: \");\n    refresh();\n    fgets(dados-&gt;nome, sizeof(dados-&gt;nome), stdin);\n    printw(\"RG: \");\n    scanf(\"%ld\", &amp;dados-&gt;rg);\n    fflush(stdin);\n    printw(\"CPF: \");\n    fgets(dados-&gt;cpf, sizeof(dados-&gt;cpf), stdin);\n    printw(\"Altura: \");\n    scanf(\"%f\", &amp;dados-&gt;alt);\n    printw(\"Idade: \");\n    scanf(\"%hd\", &amp;dados-&gt;idade);\n}\n</code></pre>\n\n<p>Edited: New problem, when I go in the cadastro() function, I can't see what I'm doing as input but somehow I know something is happening can after pressing random keys I can get back to the first menu and everything goes back to normal. I think it's related to the ncurses screen, but I'm not sure about it.</p>\n"}, {"tags": ["c", "random", "cryptography"], "comments": [{"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1446073164, "post_id": 33402981, "comment_id": 54597549, "body": "Could you show what you&#39;ve tried and what errors you&#39;re getting?"}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1446073506, "post_id": 33402981, "comment_id": 54597700, "body": "Do you specifically want to use ISAAC or do you just want a <a href=\"https://en.wikipedia.org/wiki/Cryptographically_secure_pseudorandom_number_generator#Special_designs\" rel=\"nofollow noreferrer\">cryptographically secure random number generator</a>? <a href=\"https://en.wikipedia.org/wiki//dev/random\" rel=\"nofollow noreferrer\"><code>&#47;dev&#47;random</code></a> is usually fine."}, {"owner": {"reputation": 69, "user_id": 3126139, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8a7b5f59c380ebd8a63d7e521497169d?s=128&d=identicon&r=PG&f=1", "display_name": "Bartek", "link": "https://stackoverflow.com/users/3126139/bartek"}, "reply_to_user": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1446076026, "post_id": 33402981, "comment_id": 54598592, "body": "@Schwern i want to use ISAAC"}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1446076062, "post_id": 33402981, "comment_id": 54598604, "body": "@Bartek The code in main works for me. What have you tried?"}, {"owner": {"reputation": 69, "user_id": 3126139, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8a7b5f59c380ebd8a63d7e521497169d?s=128&d=identicon&r=PG&f=1", "display_name": "Bartek", "link": "https://stackoverflow.com/users/3126139/bartek"}, "reply_to_user": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1446076420, "post_id": 33402981, "comment_id": 54598726, "body": "@Schwern but you will ever get the same result and it&#39;s don&#39;t use rand() function."}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1446076533, "post_id": 33402981, "comment_id": 54598757, "body": "@Bartek Isn&#39;t that the point of a random number generator, to not get the same result? And it&#39;s not going to use rand() because ISAAC is its own random number generator. Would you please show us what you&#39;ve tried?"}, {"owner": {"reputation": 69, "user_id": 3126139, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8a7b5f59c380ebd8a63d7e521497169d?s=128&d=identicon&r=PG&f=1", "display_name": "Bartek", "link": "https://stackoverflow.com/users/3126139/bartek"}, "reply_to_user": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1446076867, "post_id": 33402981, "comment_id": 54598856, "body": "@Schwern i posted my code snippet. &quot;Isn&#39;t that the point of a random number generator, to not get the same result?&quot; - and this is the problem, that each time I get the same result. Each time i run macro rand() from isaac64.h i get the same values. i can&#39;t set seed."}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 1, "creation_date": 1446077051, "post_id": 33402981, "comment_id": 54598921, "body": "@Bartek You&#39;re going to get the same numbers because you&#39;re always supplying the same seed. Psudo-random number generators require a random seed. See <a href=\"https://metacpan.org/pod/Math::Random::ISAAC#USAGE-WARNING\" rel=\"nofollow noreferrer\">this discussion</a> and consider whether you truly need to use ISAAC. It&#39;s not fully baked."}, {"owner": {"reputation": 69, "user_id": 3126139, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8a7b5f59c380ebd8a63d7e521497169d?s=128&d=identicon&r=PG&f=1", "display_name": "Bartek", "link": "https://stackoverflow.com/users/3126139/bartek"}, "reply_to_user": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1446078531, "post_id": 33402981, "comment_id": 54599393, "body": "@Schwern so I have to add method initialising mm in siaac64.c ? Than you very much :)"}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1446078768, "post_id": 33402981, "comment_id": 54599449, "body": "@Bartek I was working from the 32 bit version. The 64 bit version looks basically the same but it&#39;s even less complete and uses global variables. Good luck."}], "answers": [{"tags": [], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 3, "last_activity_date": 1446078431, "last_edit_date": 1446078431, "creation_date": 1446078049, "answer_id": 33403903, "question_id": 33402981, "link": "https://stackoverflow.com/questions/33402981/how-to-use-isaac-in-c/33403903#33403903", "title": "How to use ISAAC in C", "body": "<p>This version of ISAAC is a \"reference implementation\" meaning it's intended to be referred to but isn't particularly user friendly or ready for production. There are any number of <a href=\"https://en.wikipedia.org/wiki/Cryptographically_secure_pseudorandom_number_generator#Special_designs\" rel=\"nofollow\">cryptographically secure random number generators</a> in C that are easier to use. In particular, simply reading bytes from <a href=\"https://en.wikipedia.org/wiki//dev/random\" rel=\"nofollow\">/dev/random</a> is good enough on most operating systems.</p>\n\n<hr>\n\n<p>The <code>main</code> function demonstrates how to use the library. It's already commented out with <code>#ifdef</code>s.  I've found <a href=\"https://metacpan.org/source/JAWNSY/Math-Random-ISAAC-XS-1.004/src/ISAAC.xs\" rel=\"nofollow\">using the Perl wrapper around ISAAC as a guide</a> also helps.</p>\n\n<pre><code>int main()\n{\n    /* Initialize the structure to 0 */\n    randctx ctx;\n    ctx.randa = ctx.randb = ctx.randc = (ub4)0;\n\n    /* Initialize the seed */\n    for (ub4 i=0; i&lt;256; ++i) {\n        ctx.randrsl[i] = i;\n    }\n\n    /* Initialize the random numbers from the seed */\n    randinit(&amp;ctx, TRUE);\n\n    /* Print 10 pseudo random numbers */\n    for(int i=0; i&lt;10; i++) {\n        printf(\"%.8lx\\n\", rand(&amp;ctx));\n    }\n}\n</code></pre>\n\n<p><strong>You must supply the <code>seed</code></strong>, or <a href=\"https://en.wikipedia.org/wiki/Entropy_%28computing%29\" rel=\"nofollow\">\"entropy\"</a>. If you supply the same seed you will get the same result. This is why ISAAC is a <em>psuedo</em> random number generator, it can only make more random-seeming numbers out of existing randomness. There is <a href=\"https://metacpan.org/pod/Math::Random::ISAAC#USAGE-WARNING\" rel=\"nofollow\">a discussion of where to get your seed from in Math::Random::ISAAC</a>.</p>\n\n<p>If these are new concepts to you, and if this for production code, I would <strong>strongly recommend you simply read from <code>/dev/random</code></strong>. This ISAAC implementation is very rough and cryptography is <em>very easy</em> to get wrong. <code>/dev/random</code> has already taken care of all of this for you.</p>\n\n<p>If you must use your own pseudo-random library, use a well-implemented and documented library like <a href=\"http://openssl.org/docs/manmaster/crypto/rand.html\" rel=\"nofollow\">OpenSSL</a>.</p>\n\n<p>If you're going to go through with this, I would recommend adapting <a href=\"https://metacpan.org/source/JAWNSY/Math-Random-ISAAC-XS-1.004/src\" rel=\"nofollow\">the version of the code from the Perl wrapper</a> because at least the author has cleaned it up to be release worthy.</p>\n"}], "owner": {"reputation": 69, "user_id": 3126139, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8a7b5f59c380ebd8a63d7e521497169d?s=128&d=identicon&r=PG&f=1", "display_name": "Bartek", "link": "https://stackoverflow.com/users/3126139/bartek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 442, "favorite_count": 0, "accepted_answer_id": 33403903, "answer_count": 1, "score": 1, "last_activity_date": 1446078431, "creation_date": 1446072853, "last_edit_date": 1446075964, "question_id": 33402981, "link": "https://stackoverflow.com/questions/33402981/how-to-use-isaac-in-c", "title": "How to use ISAAC in C", "body": "<p>I downloaded isaac64 from <a href=\"http://burtleburtle.net/bob/rand/isaacafa.html\" rel=\"nofollow\">here</a> and I have some problem with usage.\nI had to comment a part of code in isaac64.c becouse it contained main function. But I can't use it... I can't properly initialize it and get random number, can you help me? I couldn'y found any example.    <pre>    randinit(TRUE); \n    for(i=0;i&lt;10;i++){\n    printf(\"%lx\\n\",rand());\n    }</pre>\neach time I run this code I get the same values. I don't know how to set seed.</p>\n"}, {"tags": ["c++", "c", "file"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 5, "creation_date": 1446073069, "post_id": 33402972, "comment_id": 54597498, "body": "For the include method, just access that variable, <code>xd_data</code>, in your example. For the binary link option, the second reference has a paragraph starting with: &quot;This data-section can be referenced from the C code simply by using: ...&quot;. Is that somehow not working or not suitable for you for some reason?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1446073371, "post_id": 33402972, "comment_id": 54597640, "body": "Are you asking about how a program inspecting the compiled binary would extract this data? It looks like the other commenters here are talking about how the code that was compiled to produce the binary would access the data."}, {"owner": {"reputation": 1307, "user_id": 3199553, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/100000455527913/picture?type=large", "display_name": "stanleyli", "link": "https://stackoverflow.com/users/3199553/stanleyli"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1446073494, "post_id": 33402972, "comment_id": 54597693, "body": "@user2357112 Right... I am also a little bit confused. Maybe my expression is not clear in the original question. My question is: how can I know where the const variable <code>xd_data</code> is stored in the compiled binary?"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 2, "creation_date": 1446074162, "post_id": 33402972, "comment_id": 54597972, "body": "You can use tools from Binutils. Such as readelf to list the sections, symbols etc - to get the symbol addresses. And objdump or objcopy to extract binary dumps of sections you are interested in. It may be good to clarify your question to say whether you want to do this programmatically (e.g. with C) or whether using existing command line tools is acceptable"}, {"owner": {"reputation": 1307, "user_id": 3199553, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/100000455527913/picture?type=large", "display_name": "stanleyli", "link": "https://stackoverflow.com/users/3199553/stanleyli"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1446074508, "post_id": 33402972, "comment_id": 54598082, "body": "@kaylum Thanks. Just realized as you&#39;ve mentioned, the best way is to let the compiled binary to generate these files when it starts execution than using any external tools."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1446074716, "post_id": 33402972, "comment_id": 54598166, "body": "@stanleyli It&#39;s still a little unclear what you are really asking - whether you just want to use that binary data within the application itself or whether you want to examine the compiled program externally. The first comment is relevant to the former and the Binutils comment is relevant for the latter. In any case, if you have the info you need then good. Otherwise please update your question to clarify more what you want to do."}, {"owner": {"reputation": 1307, "user_id": 3199553, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/100000455527913/picture?type=large", "display_name": "stanleyli", "link": "https://stackoverflow.com/users/3199553/stanleyli"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1446074921, "post_id": 33402972, "comment_id": 54598238, "body": "@kaylum When I was asking the question, I forgot the compiled binary can generate these resource files just by itself so I thought we have to rely on some external tools or scripts to inspect the binary. But after I realize that, I think it&#39;s the most straightforward way to get these resource files. Anyway, thanks man!"}], "answers": [{"tags": [], "owner": {"reputation": 11872, "user_id": 1334399, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fnKun.jpg?s=128&g=1", "display_name": "fireant", "link": "https://stackoverflow.com/users/1334399/fireant"}, "is_accepted": false, "score": 1, "last_activity_date": 1446074388, "last_edit_date": 1446074388, "creation_date": 1446073751, "answer_id": 33403172, "question_id": 33402972, "link": "https://stackoverflow.com/questions/33402972/correct-way-to-extract-array-data-from-binary/33403172#33403172", "title": "Correct way to extract array data from binary?", "body": "<p>If you mean finding the byte address in the file where a data block starts just like <code>objdump</code> does but programmatically, then you can use the Binary File Descriptor library (BFD), see <a href=\"https://sourceware.org/binutils/docs-2.21/bfd/index.html\" rel=\"nofollow\">here</a> and <a href=\"https://sourceware.org/binutils/docs-2.21/bfd/How-It-Works.html#How-It-Works\" rel=\"nofollow\">here</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 326109, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1446079257, "post_id": 33403842, "comment_id": 54599574, "body": "I think OP wants to access resources colocated in the application binary, like is common on Windows"}, {"owner": {"reputation": 2000, "user_id": 4487286, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHZoO.jpg?s=128&g=1", "display_name": "milevyo", "link": "https://stackoverflow.com/users/4487286/milevyo"}, "reply_to_user": {"reputation": 326109, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1446079675, "post_id": 33403842, "comment_id": 54599716, "body": "@sehe, i don&#39;t think so, because implementing resources as do windows, needs an external program that knows how and where (typically a section reserved for that)  to save resouces at compile time as do rc of windows."}], "tags": [], "owner": {"reputation": 2000, "user_id": 4487286, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHZoO.jpg?s=128&g=1", "display_name": "milevyo", "link": "https://stackoverflow.com/users/4487286/milevyo"}, "is_accepted": false, "score": 0, "last_activity_date": 1446079375, "last_edit_date": 1446079375, "creation_date": 1446077688, "answer_id": 33403842, "question_id": 33402972, "link": "https://stackoverflow.com/questions/33402972/correct-way-to-extract-array-data-from-binary/33403842#33403842", "title": "Correct way to extract array data from binary?", "body": "<p>if you stored data for example an image and you want to load it (for printing or what ever you want) then if you have a function (library)  that load it from memory, as example <code>void loadResImage(void * mem);</code> just do <code>loadResImage(xd_data)</code>, if not but you have a function that load it from the file, in that case save it to a temp file eg:</p>\n\n<pre><code>int fd=open(\"tmpfile\");\nint ret=write(fd,xd_data, sizeof(xd_data));\nclose(fd);\nloadImageFile(\"tmpfile\");\n</code></pre>\n\n<p>but if you want to access the data outside the program itself (hex editor for example, or an other program), in that case you have to add a starting mark and optionally an ending mark or sizeof data. eg:</p>\n\n<pre><code>const unsigned char xd_data[]={\n  ...\n'M','A','G','I','C'};\n</code></pre>\n\n<p>in example above the end of the data is known, you just do a search to find it. same way, play around and find a suitable way to store the size of the data. but beware of the compiler optimizations.</p>\n"}], "owner": {"reputation": 1307, "user_id": 3199553, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/100000455527913/picture?type=large", "display_name": "stanleyli", "link": "https://stackoverflow.com/users/3199553/stanleyli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 1, "answer_count": 2, "score": 3, "last_activity_date": 1446079375, "creation_date": 1446072822, "last_edit_date": 1446073559, "question_id": 33402972, "link": "https://stackoverflow.com/questions/33402972/correct-way-to-extract-array-data-from-binary", "title": "Correct way to extract array data from binary?", "body": "<p>There is a classic way to embed resource files as a C language array into a binary file, so that we can store some external resource files such as <code>.jpeg</code> or <code>.txt</code> files into a binary.</p>\n\n<p>For example, in the header file we can define an array:</p>\n\n<pre><code>const unsigned char xd_data[] = {\n    77,90,144,0,3,0,0,0,4,0,0,0,255,255,0,0,184,0,0,0,0,0,0,0,64,0,0,0,0,\n    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,240,0,0,\n    0,14,31,186,14,0,180,9,205,33,184,1,76,205,33,84,104,105,115,32,112,114,\n    111,103,114,97,109,32,99,97,110,110,111,116,32,98,101,32,114,117,110,\n    32,105,110,32,68,79,83,32,109,111,100,101,46,13,13,10,36,0,0,0,0,0,0,\n    0,66,163,223,218,6,194,177,137,6,194,177,137,6,194,177,137,105,221,187,\n    137,13,194,177,137,133,222,191,137,3,194,177,137,105,221,181,137,4,194,\n    177,137,136,202,238,137,4,194,177,137,6,194,176,137,73,194,177,137,133,\n    202,236,137,13,194,177,137,48,228,187,137,11,194,177,137,193,196,183,\n    137,7,194,177,137,82,105,99,104,6,194,177,137,0,0,0,0,0,0,0,0,0,0,0,0,\n    0,0,0,0,0,0,0,0,0,0,0,0,80,69,0,0,76,1,4,0,65,162,32,86,0,0,0,0,0,0,0,\n    0,224,0,47,1,11,1,6,0,0,100,0,0,0,74,0,0,0,0,0,0,228,113,0,0,0,16,0,0,\n    0,128,0,0,0,0,64,0,0,16,0,0,0,2,0,0,4,0,0,0,0,0,0,0,4,0,0,0,0,0,0,0,0,\n    224,0,0,0,4,0,0,0,0,0,0,2,0,0,0,0,0,16,0,0,16,0,0,0,0,16,0,0,16,0,0,0,\n    0,0,0,16,0,0,0,0,0,0,0,0,0,0,0,124,140,0,0,140,0,0,0,0,208,0,0,0,16,0\n};\n</code></pre>\n\n<p>which contains the contents of the resource file, and it will be compile into the final binary.</p>\n\n<p>There are lots of tools and tutorials on the web about this old trick, such as: <a href=\"http://www.rowleydownload.co.uk/arm/documentation/index.htm?http://www.rowleydownload.co.uk/arm/documentation/embed.htm\" rel=\"nofollow\">http://www.rowleydownload.co.uk/arm/documentation/index.htm?http://www.rowleydownload.co.uk/arm/documentation/embed.htm</a>, <a href=\"https://www.fourmilab.ch/xd/\" rel=\"nofollow\">https://www.fourmilab.ch/xd/</a> and <a href=\"http://gareus.org/wiki/embedding_resources_in_executables#c_include_method\" rel=\"nofollow\">http://gareus.org/wiki/embedding_resources_in_executables#c_include_method</a>. </p>\n\n<p>However, looks like most of these pages are talking about how to <strong>embed</strong> the data into binary file using C style array. </p>\n\n<p>My question is, what is the correct way to find the start address of the resource files in the compiled binary in order to extract them? I.e., how can I find the start address of <code>xd_data</code> in the compiled binary?</p>\n"}, {"tags": ["c", "char", "malloc", "strcpy"], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 2879845, "user_type": "registered", "profile_image": "https://graph.facebook.com/1134623554/picture?type=large", "display_name": "Salvatore Castellano", "link": "https://stackoverflow.com/users/2879845/salvatore-castellano"}, "is_accepted": false, "score": 2, "last_activity_date": 1446073121, "creation_date": 1446073121, "answer_id": 33403046, "question_id": 33402906, "link": "https://stackoverflow.com/questions/33402906/why-the-second-strcpy-in-my-code-causes-stop-working/33403046#33403046", "title": "Why the second strcpy() in my code causes stop working?", "body": "<p>I would say you were <em>lucky</em> the first strcpy worked in the first place!\nYou basically declared a POINTER to a char, nothing else.\nWhat you need in order for strcpy to work correctly is make sure you have an array of char large enough to fit your copy in. In other words, allocate some memory first for your pointer, or use an array...</p>\n"}, {"comments": [{"owner": {"reputation": 7, "user_id": 5500432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db46a2fcdaf8ea5c562ed04d09c9fc15?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/5500432/steve"}, "edited": false, "score": 0, "creation_date": 1446087809, "post_id": 33403101, "comment_id": 54601796, "body": "Thanks for the reply. Just a question about free(). Is the memory still occupied without free() if the program is closed? I assume the memory all released when an application is quitted. If I stored a string to a struct member using strdup(), do I still need to release it before closing the app? Thanks!"}, {"owner": {"reputation": 1496, "user_id": 3013334, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f80883e570c1ca4c51e19309f7836c34?s=128&d=identicon&r=PG&f=1", "display_name": "Linus", "link": "https://stackoverflow.com/users/3013334/linus"}, "reply_to_user": {"reputation": 7, "user_id": 5500432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db46a2fcdaf8ea5c562ed04d09c9fc15?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/5500432/steve"}, "edited": false, "score": 0, "creation_date": 1446109421, "post_id": 33403101, "comment_id": 54610139, "body": "@Steve unless you&#39;re using a <i>very</i> old compiler the memory is always freed. However it is not good practise to rely on this fact. See <a href=\"http://stackoverflow.com/questions/654754/what-really-happens-when-you-dont-free-after-malloc\" title=\"what really happens when you dont free after malloc\">stackoverflow.com/questions/654754/&hellip;</a> for details."}], "tags": [], "owner": {"reputation": 1496, "user_id": 3013334, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f80883e570c1ca4c51e19309f7836c34?s=128&d=identicon&r=PG&f=1", "display_name": "Linus", "link": "https://stackoverflow.com/users/3013334/linus"}, "is_accepted": true, "score": 0, "last_activity_date": 1446073370, "creation_date": 1446073370, "answer_id": 33403101, "question_id": 33402906, "link": "https://stackoverflow.com/questions/33402906/why-the-second-strcpy-in-my-code-causes-stop-working/33403101#33403101", "title": "Why the second strcpy() in my code causes stop working?", "body": "<p>The problem is that <code>strcpy</code> won't allocate memory for your string hence it will most likely crash if you haven't done so. I'd say its by chance the first instance works.</p>\n\n<p>You're lucky the program only gives you a segmentation fault. You can either allocate memory using <code>malloc</code> or <code>calloc</code> or you use the function <code>strdup</code> to allocate memory for you.</p>\n\n<pre><code> char *i, *p, *p1=\"Hello\";\n p = strdup(p1);\n printf(\"%s\\n\", p); //show copy successful\n printf(\"Please hit a key to continue....\\n\");\n getchar();\n i = strdup(p);\n printf(\"%s\\n\", i);\n free(p);\n free(i);\n</code></pre>\n\n<p>Don't forget to free the memory afterwards!</p>\n"}, {"comments": [{"owner": {"reputation": 1496, "user_id": 3013334, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f80883e570c1ca4c51e19309f7836c34?s=128&d=identicon&r=PG&f=1", "display_name": "Linus", "link": "https://stackoverflow.com/users/3013334/linus"}, "edited": false, "score": 0, "creation_date": 1446073544, "post_id": 33403123, "comment_id": 54597723, "body": "Shouldn&#39;t <code>malloc(sizeof(char) * 4);</code> be <code>malloc(sizeof(char) * 6);</code>, because &quot;Hello&quot; is 5 bytes plus string terminator?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1446077431, "post_id": 33403123, "comment_id": 54599043, "body": "Since <code>sizeof(char)</code> is always 1, suggest simplifying to <code>char* i  = malloc(strlen(p1) + 1);</code>"}], "tags": [], "owner": {"reputation": 5466, "user_id": 154011, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/G3UkG.png?s=128&g=1", "display_name": "Kai", "link": "https://stackoverflow.com/users/154011/kai"}, "is_accepted": false, "score": 1, "last_activity_date": 1446075090, "last_edit_date": 1446075090, "creation_date": 1446073452, "answer_id": 33403123, "question_id": 33402906, "link": "https://stackoverflow.com/questions/33402906/why-the-second-strcpy-in-my-code-causes-stop-working/33403123#33403123", "title": "Why the second strcpy() in my code causes stop working?", "body": "<p>you need to allocate memory for the chars. you could e.g. do it like this:</p>\n\n<pre><code>char* p1 = \"Hello\";\nchar* i  = (char*)malloc(sizeof(char) * 6);   \nchar* p  = (char*)malloc(sizeof(char) * 6);     \n</code></pre>\n\n<p>please don't miss a <code>free</code> afterwards (before return):</p>\n\n<pre><code>free(p);\nfree(i);\n</code></pre>\n\n<p>Moreover an additional include is needed to use <code>malloc</code> and <code>free</code>:</p>\n\n<pre><code>#include&lt;stdlib.h&gt;\n</code></pre>\n\n<p>Your complete sample should be looking like this:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n#include&lt;stdlib.h&gt;    \n\nint main()\n{ \n  char* p1 = \"Hello\";\n  char* i  = (char*)malloc(sizeof(char) * 6);   \n  char* p  = (char*)malloc(sizeof(char) * 6);   \n\n  // 1st copy\n  strcpy(p,p1);\n  printf(\"1st copy: %s\\n\", p);\n\n  // 2nd copy\n  strcpy(i,p);\n  printf(\"2nd copy: %s\\n\", i);\n\n  getchar();\n\n  // free prior allocated memory\n  free(p);\n  free(i);\n\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 5500432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db46a2fcdaf8ea5c562ed04d09c9fc15?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/5500432/steve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 418, "favorite_count": 0, "accepted_answer_id": 33403101, "answer_count": 3, "score": -2, "last_activity_date": 1446075090, "creation_date": 1446072491, "last_edit_date": 1446074946, "question_id": 33402906, "link": "https://stackoverflow.com/questions/33402906/why-the-second-strcpy-in-my-code-causes-stop-working", "title": "Why the second strcpy() in my code causes stop working?", "body": "<p>I wrote this C code:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n\nint main()\n{\n  char *i, *p, *p1=\"Hello\";\n  strcpy(p,p1);  //The first strcpy works.\n  printf(\"%s\\n\", p); //show copy successful\n  printf(\"Please hit a key to continue....\\n\");\n  getchar();\n  strcpy(i,p); //The second strcpy causes stop working problem. Why?\n  printf(\"%s\\n\", i);\n  return 0;\n}\n</code></pre>\n\n<p>Can anyone tell me why the second <code>strcpy</code> doesn't work?</p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446072269, "post_id": 33402846, "comment_id": 54597188, "body": "Format/indent your question properly."}, {"owner": {"reputation": 53754, "user_id": 198536, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9edaf4c1c1b89b5d39c40528d0017509?s=128&d=identicon&r=PG", "display_name": "wallyk", "link": "https://stackoverflow.com/users/198536/wallyk"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1446072445, "post_id": 33402846, "comment_id": 54597250, "body": "@Olaf:  It is usually pretty easy to fix for them.  I did it in about 15 seconds.  That would be better to do than biting them."}, {"owner": {"reputation": 53754, "user_id": 198536, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9edaf4c1c1b89b5d39c40528d0017509?s=128&d=identicon&r=PG", "display_name": "wallyk", "link": "https://stackoverflow.com/users/198536/wallyk"}, "edited": false, "score": 0, "creation_date": 1446072530, "post_id": 33402846, "comment_id": 54597273, "body": "To indent text (which causes it to format as code), select the lines and press Ctrl-K."}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1446072769, "post_id": 33402846, "comment_id": 54597370, "body": "I would use <code>malloc(sizeof(struct Node));</code>. Also, you should initialize all the pointers to NULL;"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 53754, "user_id": 198536, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9edaf4c1c1b89b5d39c40528d0017509?s=128&d=identicon&r=PG", "display_name": "wallyk", "link": "https://stackoverflow.com/users/198536/wallyk"}, "edited": false, "score": 0, "creation_date": 1446075089, "post_id": 33402846, "comment_id": 54598291, "body": "@wallyk: If you clean the kid&#39;s room instead of getting it to clean itselfselves, it will never learn."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446075240, "post_id": 33402846, "comment_id": 54598330, "body": "Don&#39;t have variable or function definitions in your header file (except for <code>inline</code> functions)."}, {"owner": {"reputation": 1247, "user_id": 4349429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/747aac0b54af7691075ba3758a66ca4a?s=128&d=identicon&r=PG&f=1", "display_name": "Pawan", "link": "https://stackoverflow.com/users/4349429/pawan"}, "edited": false, "score": 0, "creation_date": 1446128993, "post_id": 33402846, "comment_id": 54623633, "body": "even inline function in .h creates issues."}], "owner": {"reputation": 11, "user_id": 5500254, "user_type": "registered", "profile_image": "https://graph.facebook.com/165149267167549/picture?type=large", "display_name": "coding_is_art", "link": "https://stackoverflow.com/users/5500254/coding-is-art"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 97, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1446130281, "creation_date": 1446072167, "last_edit_date": 1446130281, "question_id": 33402846, "link": "https://stackoverflow.com/questions/33402846/dereferencing-a-pointer-to-struct-inside-function-in-c", "title": "dereferencing a pointer to struct inside function in c", "body": "<p>I have a .h file like this:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>struct Node{\n    struct Node *previous;\n    struct Node *next;\n    char *data;\n};\n\nstruct Queue{\n    struct Node *head;\n    struct Node *tail;\n};\n\nint Queue_init(struct Queue *queue, struct Node *node){\n\n    queue-&gt;head = node;\n    queue-&gt;tail = node;\n    return 0;\n}\n\nint Queue_push(struct Queue *queue, struct Node *node){\n\n    node-&gt;next = NULL;\n    if(queue-&gt;tail == NULL){\n        queue-&gt;head = node;\n        node-&gt;previous = NULL;\n    } else {\n        node-&gt;previous = queue-&gt;tail;\n        queue-&gt;tail-&gt;next = node;\n    }\n    queue-&gt;tail = node;    \n    return 0;\n}\n\nint Queue_pop(struct Queue *queue, struct Node *node){\n\n    fprintf(stderr,\"%s\\n\",node-&gt;data);\n    if(queue-&gt;head == NULL){\n        node-&gt;data = NULL;    \n    } else{\n        node = queue-&gt;head;\n        if(queue-&gt;head-&gt;next == NULL){\n            queue-&gt;head = NULL;\n            queue-&gt;tail = NULL;\n        } else {\n            queue-&gt;head = queue-&gt;head-&gt;next;\n            queue-&gt;head-&gt;previous = NULL;\n        }\n    }    \n    node-&gt;previous = NULL;\n    node-&gt;next = NULL;\n    fprintf(stderr,\"%s\\n\",node-&gt;data);    \n    return 0;\n}\n</code></pre>\n\n<p>My .c file is like this:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>int main(){\n    struct Node *node_0 = malloc(3*sizeof(void*));\n    node_0-&gt;data = malloc(1000*sizeof(char));\n    strcpy(node_0-&gt;data, \"Hello\");\n    struct Queue *queue_0 = malloc(2*sizeof(void*));\n    Queue_init(queue_0, node_0);\n    struct Node *node_1 = malloc(3*sizeof(void*));\n    node_1-&gt;data = malloc(1000*sizeof(char));\n    strcpy(node_1-&gt;data, \"World\");\n    Queue_push(queue_0, node_1);\n    fprintf(stderr, \"%s %s\\n\", queue_0-&gt;head-&gt;data, queue_0-&gt;head-&gt;next-&gt;data);\n    Queue_pop(queue_0, node_1);\n    fprintf(stderr, \"%s %s\\n\", node_1-&gt;data, queue_0-&gt;head-&gt;data);\n    free(queue_0);\n    free(node_0-&gt;data);\n    free(node_0);\n    free(node_1);\n    free(node_1-&gt;data);\n    return 0;\n}\n</code></pre>\n\n<p>I am not getting the results that I want with the queue_pop function.\nThe results I get are:</p>\n\n<pre><code>Hello World\nWorld\nHello\nWorld World\n</code></pre>\n\n<p>Basically, when I pop something out of the queue, I want to save it into the second parameter of the function, which is node_1, but it is not. I believe this might have something with dereferencing pointers in functions.</p>\n\n<p>I get WHY my code is not working. But HOW do I get it to work? (That node_1->data should be equal to \"Hello\" after exiting the function).</p>\n\n<p>Thanks. By the way, my first time posting, if anyone can tell me how to post the code without messing it up, that'll be helpful too.</p>\n"}, {"tags": ["c", "user-input"], "comments": [{"owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "edited": false, "score": 2, "creation_date": 1446071449, "post_id": 33402686, "comment_id": 54596830, "body": "Your last <code>printf</code> call is wrong."}, {"owner": {"reputation": 7560, "user_id": 1034749, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2022f0caae119ed6232cf370bb9d9d3a?s=128&d=identicon&r=PG", "display_name": "fghj", "link": "https://stackoverflow.com/users/1034749/fghj"}, "edited": false, "score": 1, "creation_date": 1446072213, "post_id": 33402686, "comment_id": 54597160, "body": "you scanf one variable course1_score, but use another variable score1, typo?"}], "answers": [{"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446072035, "post_id": 33402756, "comment_id": 54597075, "body": "Actually, <code>%lf</code> requires C99 or newer. <code>%f</code> is sufficient."}, {"owner": {"reputation": 15224, "user_id": 2397327, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b1b4bb1ed29f123c55b9c916212f47ed?s=128&d=identicon&r=PG", "display_name": "Jonathan Lam", "link": "https://stackoverflow.com/users/2397327/jonathan-lam"}, "edited": false, "score": 0, "creation_date": 1446072182, "post_id": 33402756, "comment_id": 54597144, "body": "This is a problem, but it doesn&#39;t answer the question."}, {"owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446073074, "post_id": 33402756, "comment_id": 54597500, "body": "@Olaf <code>%lf</code> requires C99 for <code>printf</code> only. To read a <code>double</code> you have to use <code>%lf</code>."}, {"owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "edited": false, "score": 0, "creation_date": 1446074899, "post_id": 33402756, "comment_id": 54598230, "body": "Why the variables now declared at file scope, why adding the <code>5.2</code> not part of the question, why all these extra wasted whitespaces, why the <code>getchar</code> call, why the parens after <code>return</code>? Why?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "edited": false, "score": 0, "creation_date": 1446075538, "post_id": 33402756, "comment_id": 54598419, "body": "@ouah: The initial answer did not include <code>scanf</code> (strange enough this is not in the history anymore)."}], "tags": [], "owner": {"reputation": 748, "user_id": 5381184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da66272a60130c5f545312f67e16d9a3?s=128&d=identicon&r=PG&f=1", "display_name": "BobRun", "link": "https://stackoverflow.com/users/5381184/bobrun"}, "is_accepted": false, "score": 0, "last_activity_date": 1446077818, "last_edit_date": 1446077818, "creation_date": 1446071684, "answer_id": 33402756, "question_id": 33402686, "link": "https://stackoverflow.com/questions/33402686/calculating-average-of-user-inputted-numbers/33402756#33402756", "title": "Calculating average of user inputted-numbers", "body": "<p>Please try this, it works.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n\n\nint main(  )\n{\n  double score1 = 0;\n  double score2 = 0;\n  double averageScore = 0;\n  double total = 0;\n  printf( \"Please enter your score in course 1.\\n\" );\n  scanf( \" %lf\", &amp;score1 );\n\n  printf( \"Please enter your score in course 2.\\n\" );\n  scanf( \" %lf\", &amp;score2 );\n\n  total = score1 + score2;\n  printf( \" Total score = %5.2lf \\n\", total );\n  averageScore = ( score1 + score2 ) / 2;\n\n  printf( \"Your average score is %5.2lf\", averageScore );\n\n  getchar(  );\n  return ( 0 );\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 1, "last_activity_date": 1446081042, "last_edit_date": 1446081042, "creation_date": 1446079197, "answer_id": 33404069, "question_id": 33402686, "link": "https://stackoverflow.com/questions/33402686/calculating-average-of-user-inputted-numbers/33404069#33404069", "title": "Calculating average of user inputted-numbers", "body": "<p>The main problem is here:</p>\n\n<pre><code>printf(\"Your average score is %d%%\", &amp;averageScore );\n</code></pre>\n\n<p>You're using the <code>%d</code> format specifier which expects an <code>int</code>.  The value you're printing is a <code>double</code>, so you need the <code>%f</code> format specifier.  Also, you should be passing in <code>averageScore</code>, not <code>&amp;averageScore</code>.</p>\n\n<p>The value you were getting was the address of the <code>averageScore</code> variable, interpreted as an <code>int</code>.  Since this address tends to be the same on each run (but not necessarily), you keep seeing the same value.</p>\n\n<p>So this line should instead be:</p>\n\n<pre><code>printf(\"Your average score is %f%%\", averageScore );\n</code></pre>\n\n<p>Also, there seems to be a typo:</p>\n\n<pre><code>printf(\"Please enter your score in course1.\");\nscanf(\"%lf\", &amp;course1_score);\n\nprintf(\"Please enter your score in course2.\");\nscanf(\"%lf\", &amp;course1_score);\n</code></pre>\n\n<p>Perhaps you meant <code>score1</code> and <code>score2</code>?  </p>\n"}], "owner": {"reputation": 3, "user_id": 5500484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02bd472ded322d4c50939f507bb60122?s=128&d=identicon&r=PG&f=1", "display_name": "bigman458", "link": "https://stackoverflow.com/users/5500484/bigman458"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "closed_date": 1446175546, "answer_count": 2, "score": -3, "last_activity_date": 1446081042, "creation_date": 1446071376, "last_edit_date": 1446072461, "question_id": 33402686, "link": "https://stackoverflow.com/questions/33402686/calculating-average-of-user-inputted-numbers", "closed_reason": "Not suitable for this site", "title": "Calculating average of user inputted-numbers", "body": "<p>With this code in C:</p>\n\n<pre><code>int main() {\n\n    double score1;\n    double score2;\n    double averageScore;\n\n    printf(\"Please enter your score in course1.\");\n    scanf(\"%lf\", &amp;course1_score);\n\n    printf(\"Please enter your score in course2.\");\n    scanf(\"%lf\", &amp;course1_score);\n\n    averageScore = (score1 + score2)/2;\n\n    printf(\"Your average score is %d%%\", &amp;averageScore );\n    return 0;\n\n}\n</code></pre>\n\n<p>No matter what numbers I enter, the output keeps giving me: \"Your average score is 1606416176%\".</p>\n\n<p>Why does this happen?</p>\n"}, {"tags": ["c", "compiler-errors"], "comments": [{"owner": {"reputation": 1, "user_id": 5499585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43407031a75cf4487c788f189c2087ee?s=128&d=identicon&r=PG&f=1", "display_name": "semiprostudent", "link": "https://stackoverflow.com/users/5499585/semiprostudent"}, "edited": false, "score": 0, "creation_date": 1446069796, "post_id": 33402327, "comment_id": 54596174, "body": "I feel stupid.... that was all it was.. Thank you.."}, {"owner": {"reputation": 657, "user_id": 5440452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/609964d12cea609c4df487ccd4ae1f73?s=128&d=identicon&r=PG&f=1", "display_name": "hexasoft", "link": "https://stackoverflow.com/users/5440452/hexasoft"}, "edited": false, "score": 0, "creation_date": 1446069851, "post_id": 33402327, "comment_id": 54596202, "body": "<code>int x[]</code> is an <code>int *</code> (a pointer, or an array in this context). You call it with <code>sort[10]</code> which is probably an <code>int</code>, so the warning is logical: you make a pointer (the <code>int*</code> needed) from an integer value (the <code>sort[10]</code> you give)."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1446145753, "post_id": 33402327, "comment_id": 54634621, "body": "the &#39;location in memory&#39;&#39; in your question/printf() statement seems to indicate a memory address, however, <code>%d</code> is for printing integers.  For printing an address, use: <code>%p</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5499585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43407031a75cf4487c788f189c2087ee?s=128&d=identicon&r=PG&f=1", "display_name": "semiprostudent", "link": "https://stackoverflow.com/users/5499585/semiprostudent"}, "edited": false, "score": 0, "creation_date": 1446072015, "post_id": 33402416, "comment_id": 54597063, "body": "Alright. Seems to be functioning aside from not ever finding the number in the array that was passed. I think that is probably a whole other questions by itself though."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 2, "last_activity_date": 1446070187, "last_edit_date": 1446070187, "creation_date": 1446069872, "answer_id": 33402416, "question_id": 33402327, "link": "https://stackoverflow.com/questions/33402327/warning-passing-argument-2-of-finder-makes-pointer-from-integer-without-a-cast/33402416#33402416", "title": "Warning passing argument 2 of &#39;finder&#39; makes pointer from integer without a cast", "body": "<pre><code>num_loc = finder(find, sort_num[10]);\n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>int num = sort_num[10];       // Problem. Accessing array out of bounds.\nnum_loc = finder(find, num);  // Problem. Using an `int` when an `int*` is expected.\n                              // That's what the compiler is complaining about.\n</code></pre>\n\n<p>You need to use just <code>sort_num</code> in the call to <code>finder</code>.</p>\n\n<pre><code>num_loc = finder(find, sort_num);\n</code></pre>\n\n<p>The real solution involves changing <code>finder</code> to accept another argument that indicates the number of elements in <code>sort_num</code>. Otherwise, you run the risk of accessing the array out of bounds. It can also be simplified quite a bit.</p>\n\n<pre><code>int finder(int f, int x[], int arraySize)\n{\n   for ( int i = 0; i &lt; arraySize; ++i )\n   {\n      if (x[i] == f)\n      {\n         return i;\n      }\n   }\n\n   // Not found\n   return -1;\n}\n</code></pre>\n\n<p>and then call it with:</p>\n\n<pre><code>num_loc = finder(find, sort_num, 10);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 5499585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43407031a75cf4487c788f189c2087ee?s=128&d=identicon&r=PG&f=1", "display_name": "semiprostudent", "link": "https://stackoverflow.com/users/5499585/semiprostudent"}, "edited": false, "score": 0, "creation_date": 1446072995, "post_id": 33402487, "comment_id": 54597467, "body": "Appreciate your help! Everyone was very helpful."}], "tags": [], "owner": {"reputation": 69, "user_id": 5081556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92336405686c52cdc97c7fa8e0e947f4?s=128&d=identicon&r=PG", "display_name": "jas", "link": "https://stackoverflow.com/users/5081556/jas"}, "is_accepted": false, "score": 1, "last_activity_date": 1446070259, "creation_date": 1446070259, "answer_id": 33402487, "question_id": 33402327, "link": "https://stackoverflow.com/questions/33402327/warning-passing-argument-2-of-finder-makes-pointer-from-integer-without-a-cast/33402487#33402487", "title": "Warning passing argument 2 of &#39;finder&#39; makes pointer from integer without a cast", "body": "<p>This is the first part of your function definition:</p>\n\n<p><code>int finder(int f, int x[])</code></p>\n\n<p>Your second argument is an int pointer, which the compiler is telling you by saying :</p>\n\n<p><code>expected 'int *'</code></p>\n\n<p>You called your function with this:</p>\n\n<p><code>num_loc = finder(find, sort_num[10]);</code></p>\n\n<p>If sort_num is an integer array, then sort_num[10] evaluates to the integer at the 11th place in that array. So you're passing your finder function that integer, instead of an int pointer. If sort_num is an integer array, re-write your call as:</p>\n\n<p><code>num_loc = finder(find, sort_num);</code></p>\n\n<p>This way you will be passing an int pointer that holds the address of the first element in the sort_num array.</p>\n"}], "owner": {"reputation": 1, "user_id": 5499585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43407031a75cf4487c788f189c2087ee?s=128&d=identicon&r=PG&f=1", "display_name": "semiprostudent", "link": "https://stackoverflow.com/users/5499585/semiprostudent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 420, "favorite_count": 0, "accepted_answer_id": 33402416, "answer_count": 2, "score": 0, "last_activity_date": 1446073026, "creation_date": 1446069456, "last_edit_date": 1446073026, "question_id": 33402327, "link": "https://stackoverflow.com/questions/33402327/warning-passing-argument-2-of-finder-makes-pointer-from-integer-without-a-cast", "title": "Warning passing argument 2 of &#39;finder&#39; makes pointer from integer without a cast", "body": "<p>I am trying to pass a user entered variable \"find\" into this function and return the subscript location of the number (in an existing array)  that the user entered. I saw some other posts about this but couldn't understand really what was being explained. Sorry, beginner student.</p>\n\n<p>It isn't quite complete but I cannot compile due to a couple of errors that I am not sure about. </p>\n\n<ol>\n<li>Warning passing argument 2 of 'finder' makes pointer from integer without a cast. Its pointing at:</li>\n</ol>\n\n<p><code>num_loc = finder(find, sort_num[10]);</code></p>\n\n<p>Here I am setting \"num_loc\" to the return of \"where\" in the function\n    <code>\n     num_loc = finder(find, sort_num[10]);\n     printf( \"\\nYour number is located in memory location %d of the array\",num_loc );</code></p>\n\n<ol start=\"2\">\n<li><p>\"[Note] expected 'int *' but argument is of type 'int'\" which is pointing to my function prototype.</p>\n\n<p><code>//fprototype outside the main at the beginning of the file\nint finder(int f,int x[]);</code></p></li>\n</ol>\n\n<p>Here is my function:</p>\n\n<pre><code>//function located at the end of the file outside the main\nint finder(int f, int x[])\n{\n    int found = 0;\n    int where;\n    int i = 0;\n\n    while (found != 1){\n        if (x[i] == f){\n            found = 1;\n            where = i;\n            return where;\n        }\n        else{\n            ++i;\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1446068626, "post_id": 33402084, "comment_id": 54595531, "body": "Two dice (assuming 6 sided) the highest value can be 12"}, {"owner": {"reputation": 1135, "user_id": 5063263, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b9dadb72e3e03e28dc7f64b43353f1e5?s=128&d=identicon&r=PG&f=1", "display_name": "ivan", "link": "https://stackoverflow.com/users/5063263/ivan"}, "edited": false, "score": 1, "creation_date": 1446068639, "post_id": 33402084, "comment_id": 54595539, "body": "while j != 7 &lt;- inside that you never change j&#39;s value so j will never be 7 and will never stop looping"}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 3, "creation_date": 1446068654, "post_id": 33402084, "comment_id": 54595552, "body": "You haven&#39;t initialized <code>j</code> before you used it."}, {"owner": {"reputation": 4119, "user_id": 4447998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be2b81fe09ceb2ec13da299127f242f3?s=128&d=identicon&r=PG", "display_name": "roeland", "link": "https://stackoverflow.com/users/4447998/roeland"}, "edited": false, "score": 1, "creation_date": 1446068722, "post_id": 33402084, "comment_id": 54595582, "body": "You&#39;ll have to learn the basics of programming in c first. Look up how to use <code>printf</code> properly. Look up how to write a basic loop. Look up how to figure out if <code>scanf</code> succeeded or not. What if the user gives 2 invalid inputs? And so on"}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 1, "creation_date": 1446068732, "post_id": 33402084, "comment_id": 54595591, "body": "int j = 0;, and you should update j in that while (j++)."}, {"owner": {"reputation": 37, "user_id": 5499177, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cee5cbb3de4dfd50b30da8f0dfb0f489?s=128&d=identicon&r=PG&f=1", "display_name": "user5499177", "link": "https://stackoverflow.com/users/5499177/user5499177"}, "reply_to_user": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1446068757, "post_id": 33402084, "comment_id": 54595607, "body": "@EdHeal yes you are right I missed that!"}, {"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 1, "creation_date": 1446068838, "post_id": 33402084, "comment_id": 54595654, "body": "<code>rand() % 6</code> will result in a number between 0 and 5, not between 1 and 6."}, {"owner": {"reputation": 37, "user_id": 5499177, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cee5cbb3de4dfd50b30da8f0dfb0f489?s=128&d=identicon&r=PG&f=1", "display_name": "user5499177", "link": "https://stackoverflow.com/users/5499177/user5499177"}, "reply_to_user": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1446068991, "post_id": 33402084, "comment_id": 54595741, "body": "@mch so if I change rand() % 6 to rand() % 7 I will get a number between 0 and 6. Is there a way to get a number between 1 and 6 not 0."}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 1, "creation_date": 1446069025, "post_id": 33402084, "comment_id": 54595759, "body": "<code>1 + rand() % 6</code> perhaps"}, {"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 1, "creation_date": 1446069061, "post_id": 33402084, "comment_id": 54595777, "body": "adding 1 to a number between 0 and 5 will result in a number between 1 and 6."}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1446069520, "post_id": 33402130, "comment_id": 54596038, "body": "Technically, since <code>j</code> is indeterminate, <code>j != 7</code> might appear to be true at first and then change to appearing false, even if it is not updated in the loop."}], "tags": [], "owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "is_accepted": false, "score": 1, "last_activity_date": 1446068627, "creation_date": 1446068627, "answer_id": 33402130, "question_id": 33402084, "link": "https://stackoverflow.com/questions/33402084/infinte-while-loop-in-c-programming-language1/33402130#33402130", "title": "Infinte while loop in C programming language1", "body": "<p>You never change your loop terminator value:</p>\n\n<pre><code>while (j != 7) {\n\n        printf(\"Result of throw %d %d \\n\", rand() % 6, j);\n}\n</code></pre>\n\n<p>since <code>j</code> never changes, if it enters the loop being \"not-7\" it will <strong>STAY</strong> \"not-7\", and the loop will never terminate.</p>\n\n<p>Perhaps you meant to have something more like this:</p>\n\n<pre><code>while( j != 7) {\n   j= rand() % 6;\n   ...\n}\n</code></pre>\n\n<p>though that won't ever reach <code>j=7</code> either, since you're doing <code>%6</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1711, "user_id": 3171693, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/b3f51428576d48dd6bc1a5851faa717a?s=128&d=identicon&r=PG&f=1", "display_name": "Dilip Kumar", "link": "https://stackoverflow.com/users/3171693/dilip-kumar"}, "is_accepted": true, "score": 4, "last_activity_date": 1446068747, "creation_date": 1446068747, "answer_id": 33402161, "question_id": 33402084, "link": "https://stackoverflow.com/questions/33402084/infinte-while-loop-in-c-programming-language1/33402161#33402161", "title": "Infinte while loop in C programming language1", "body": "<ol>\n<li>J is not initialised</li>\n<li>you are not updating the variable J anywhere</li>\n</ol>\n"}], "owner": {"reputation": 37, "user_id": 5499177, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cee5cbb3de4dfd50b30da8f0dfb0f489?s=128&d=identicon&r=PG&f=1", "display_name": "user5499177", "link": "https://stackoverflow.com/users/5499177/user5499177"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 33402161, "answer_count": 2, "score": -3, "last_activity_date": 1446073317, "creation_date": 1446068439, "last_edit_date": 1446073317, "question_id": 33402084, "link": "https://stackoverflow.com/questions/33402084/infinte-while-loop-in-c-programming-language1", "title": "Infinte while loop in C programming language1", "body": "<p>I am creating a dice game using C programming language. I ask user to enter a number which must be less than 12 because 5+6=11. 11 is the highest number we get in a dice. After that I randomly generate 2 numbers which are between 1 and 6 because 1 is the smallest and 6 is the highest number on a dice. After that I add the two numbers and keep adding them until it equals to the number user has entered. For example: if user enter 9 we get either 5+4=9 or 6+3=9. The program ends when we get this number. Here is what I have done so far:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\nint main(void) {\n\n    int totalSought;\n    int i = 1;\n    int j;\n    int count;\n    int totalThrows = 2;\n    time_t totalTime;\n\n    printf(\"Game of Dice \\n\");\n    printf(\"============ \\n\");\n\n    printf(\"Enter total sought: \");\n    scanf(\"%d\", &amp;totalSought);\n\n    if (totalSought &gt; 11) {\n        printf(\"** Invalid Input! Try Again! **\\n\");\n        while (totalSought &gt; 11) {\n                printf(\"Enter total sought: \");\n                scanf(\"%d\", &amp;totalSought);\n        }\n    }\n\n    srand((unsigned) time(&amp;totalTime));\n\n    while (i &lt; totalThrows) {\n        while (j != 7) {\n            printf(\"Result of throw %d %d \\n\", rand() % 6, j);\n        }\n        i++;\n    }\n}\n</code></pre>\n\n<p>When I run this program I get an infinite loop which looks like this:</p>\n\n<pre><code>Result of throw 2 -1218106363\nResult of throw 3 -1218106363\nResult of throw 1 -1218106363\nResult of throw 5 -1218106363\nResult of throw 5 -1218106363\nResult of throw 2 -1218106363\nResult of throw 4 -1218106363\nResult of throw 0 -1218106363\nResult of throw 5 -1218106363\nResult of throw 4 -1218106363\nResult of throw 1 -1218106363\n</code></pre>\n\n<p>What I want is something like this:</p>\n\n<pre><code>Enter total sought: 5\nResult of throw 1: 3 + 1\nResult of throw 2: 2 + 6\nResult of throw 3: 3 + 2\nYou got your total in 3 throws!\n</code></pre>\n\n<p>Why am I get an infinite loop?</p>\n"}, {"tags": ["c", "scanf"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 3, "creation_date": 1446068142, "post_id": 33401977, "comment_id": 54595276, "body": "suggest <code>&quot; %23[^:]: %27[^:]: %10[^:]: %27[^:]: %d&quot;</code>  Add 4 <code>:</code>, Add lead space, drop trailing space - maybe (depends on code).  Still better off using <code>fgets()</code> and then parse the buffer."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1446068354, "post_id": 33401977, "comment_id": 54595383, "body": "...after <code>fgets</code> use <code>strtok</code> to extract parts of the string."}, {"owner": {"reputation": 1711, "user_id": 3171693, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/b3f51428576d48dd6bc1a5851faa717a?s=128&d=identicon&r=PG&f=1", "display_name": "Dilip Kumar", "link": "https://stackoverflow.com/users/3171693/dilip-kumar"}, "edited": false, "score": 0, "creation_date": 1446068545, "post_id": 33401977, "comment_id": 54595488, "body": "can anyone explain about %23[^:] what is the usage."}, {"owner": {"reputation": 1711, "user_id": 3171693, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/b3f51428576d48dd6bc1a5851faa717a?s=128&d=identicon&r=PG&f=1", "display_name": "Dilip Kumar", "link": "https://stackoverflow.com/users/3171693/dilip-kumar"}, "reply_to_user": {"reputation": 6975, "user_id": 3121023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52448806175b9aa66c86d40cf0829f1?s=128&d=identicon&r=PG&f=1", "display_name": "user3121023", "link": "https://stackoverflow.com/users/3121023/user3121023"}, "edited": false, "score": 0, "creation_date": 1446068929, "post_id": 33401977, "comment_id": 54595707, "body": "@user3121023 Thank you."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1446069458, "post_id": 33402174, "comment_id": 54596004, "body": "Something should consume the <code>&#39;\\n&#39;</code> else the next call of <code>fscanf(read, &quot;%23[^:]...</code>, <code>name</code> will likely begin with <code>&#39;\\n&#39;</code>."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1446070460, "post_id": 33402174, "comment_id": 54596448, "body": "@chux, I updated the format to consume the trailing <code>\\n</code>, where there is one.  This is more parallel to the OP&#39;s attempt.  It will suffer a matching failure on the last line of the file if that line is not newline-terminated, but that will not affect reading the desired data.  That case can be distinguished by the return value."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 1, "last_activity_date": 1446070428, "last_edit_date": 1446070428, "creation_date": 1446068798, "answer_id": 33402174, "question_id": 33401977, "link": "https://stackoverflow.com/questions/33401977/getting-particular-strings-in-scanf/33402174#33402174", "title": "Getting particular strings in scanf", "body": "<p>Your initial format string fails because it does not consume the <code>:</code> delimiters.</p>\n\n<p>If you want <code>scanf()</code> to read a portion of the input, but you don't care what is actually read, then you should use a field descriptor with the assignment-suppression flag (<code>*</code>):</p>\n\n<pre><code>char nl;\nfscanf(read, \"%23[^:]:%*[^:]:%10[^:]%*[^\\n]%c\", name, number, &amp;nl);\n</code></pre>\n\n<p>As a bonus, you don't need to worry about buffer overruns for fields with assignment suppressed.</p>\n\n<p>You should not attempt to match a single newline via a trailing newline character in the format, because a literal newline (or space or tab) in the format will match any run of whitespace.  In this particular case, it would consume not just the line terminator but also any leading whitespace on the next line.</p>\n\n<p>The last field is not suppressed, even though it will almost always receive a newline, because that way you can tell from the return value if you've scanned the last line of the file and it is not newline-terminated.</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1446126268, "last_edit_date": 1446126268, "creation_date": 1446071917, "answer_id": 33402797, "question_id": 33401977, "link": "https://stackoverflow.com/questions/33401977/getting-particular-strings-in-scanf/33402797#33402797", "title": "Getting particular strings in scanf", "body": "<p><strong>Check <code>fscanf()</code> return value.</strong></p>\n\n<p><code>fscanf(read, \"%23[^:] %27[^:] ...</code> is failing because after scanning the first field with <code>%23[^:]</code>, <code>fscanf()</code> encounters a <code>':'</code>.  Since that does not match the next part of the format, a white-space as in <code>' '</code>, scanning stops.  </p>\n\n<p>Had code checked the returned value of <code>fscanf()</code>, which was certainly 1, it may have been self-evident the source of the problem.  So the scanning needs to consume the <code>':'</code>, add it to the format: <code>\"%23[^:]: %27[^:]: ...</code></p>\n\n<p><strong>Better to use <code>fgets()</code></strong></p>\n\n<p>Using <code>fscanf()</code> to read data <strong>and</strong> detect properly and improperly formatted data is very challenging.  It can be done correctly to scan <em>expected</em> input.  Yet it rarely works to handle some incorrectly formated input.  </p>\n\n<p>Instead, simple read a <em>line</em> of data and <em>then</em> parse it.  Using <code>'%n'</code> is an easy way to detect complete conversion as it saves the <code>char</code> scan count - if scanning gets there.</p>\n\n<pre><code>char buffer[200];\nif (fgets(buffer, sizeof buffer, read) == NULL) {\n  return EOF;\n}\nint n = 0;\nsscanf(buffer, \" %23[^:]: %27[^:]: %10[^:]: %27[^:]:%d %n\", \n    name, var1, number, var2, &amp;var3, &amp;n);\nif (n == 0) {\n  return FAIL; // scan incomplete\n}\nif (buffer[n]) {\n  return FAIL; // Extra data on line\n}\n// Success!\n</code></pre>\n\n<p>Note: sample input ended with text, but original format used <code>\"%d\"</code>.  Unclear on OP's intent.</p>\n"}], "owner": {"reputation": 183, "user_id": 4171692, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/cd14ae2d93103b2f9b69c9460d7c4978?s=128&d=identicon&r=PG&f=1", "display_name": "Lenny", "link": "https://stackoverflow.com/users/4171692/lenny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 239, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1446126268, "creation_date": 1446067989, "question_id": 33401977, "link": "https://stackoverflow.com/questions/33401977/getting-particular-strings-in-scanf", "title": "Getting particular strings in scanf", "body": "<p>I was wondering if it is possible to only read in particular parts of a string using scanf.</p>\n\n<p>For example since I am reading from a file i use fscanf</p>\n\n<p>if I wanted to read <strong>name</strong> and <strong>number</strong> (where number is the 111-2222) when they are in a string such as:</p>\n\n<p>Bob Hardy:sometext:111-2222:sometext:sometext</p>\n\n<p>I use this but its not working:</p>\n\n<pre><code>(fscanf(read, \"%23[^:] %27[^:] %10[^:] %27[^:] %d\\n\", name,var1, number, var2, var3))\n</code></pre>\n"}, {"tags": ["c", "arrays", "file", "malloc"], "comments": [{"owner": {"reputation": 187, "user_id": 1261301, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8a952c99982a3d56fcdb0bfdeee27cb6?s=128&d=identicon&r=PG", "display_name": "Ingrid Morstrad", "link": "https://stackoverflow.com/users/1261301/ingrid-morstrad"}, "edited": false, "score": 0, "creation_date": 1446067139, "post_id": 33401727, "comment_id": 54594800, "body": "How many integers do you have when you get this error?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1446067189, "post_id": 33401727, "comment_id": 54594824, "body": "By checking the pointer returned by <code>malloc</code>? It&#39;s an essential basic test."}, {"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 1, "creation_date": 1446067234, "post_id": 33401727, "comment_id": 54594850, "body": "Bad UB. You always allocate memory for exactly 1 <code>int</code>, then you attempt to treat it as an array of <code>ints</code> and access the size-th element. On top of that you have a memory leak as you&#39;re not freeing <code>a</code>. Also, <code>while(!feof( ))</code> is always wrong: <a href=\"http://stackoverflow.com/questions/5431941/why-is-while-feof-file-always-wrong\" title=\"why is while feof file always wrong\">stackoverflow.com/questions/5431941/&hellip;</a>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1446067266, "post_id": 33401727, "comment_id": 54594860, "body": "Aside: your use of <code>feof</code> is bad, even though it&#39;s been used in answers below: see <a href=\"http://stackoverflow.com/questions/5431941/why-is-while-feof-file-always-wrong\" title=\"why is while feof file always wrong\">stackoverflow.com/questions/5431941/&hellip;</a>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 1, "creation_date": 1446068410, "post_id": 33401727, "comment_id": 54595408, "body": "@szczurcio: Is there any good UB?"}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 2, "last_activity_date": 1446067251, "last_edit_date": 1495540718, "creation_date": 1446067251, "answer_id": 33401803, "question_id": 33401727, "link": "https://stackoverflow.com/questions/33401727/how-to-keep-using-malloc/33401803#33401803", "title": "how to keep using malloc?", "body": "<ol>\n<li>Instead of using <code>malloc</code>, use <code>realloc</code>.</li>\n<li>Don't use <code>feof(in)</code> in a <code>while</code> loop. <a href=\"https://stackoverflow.com/questions/5431941/why-is-while-feof-file-always-wrong\">See why</a>.</li>\n</ol>\n\n\n\n<pre><code>int number;\nwhile( fscanf(in, \"%d\", &amp;number) == 1 ){\n    a = realloc(a, sizeof(int)*(size+1));\n    if ( a == NULL )\n    {\n       // Problem.\n       exit(0);\n    }\n    a[size] = number;\n    printf(\"a[i]=%d\\n\", a[size]);\n    size++;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": false, "score": 5, "last_activity_date": 1446068350, "last_edit_date": 1446068350, "creation_date": 1446067269, "answer_id": 33401806, "question_id": 33401727, "link": "https://stackoverflow.com/questions/33401727/how-to-keep-using-malloc/33401806#33401806", "title": "how to keep using malloc?", "body": "<p>Calling <code>malloc()</code> repeatedly like that doesn't do what you think it does. Each time <code>malloc(sizeof(int))</code> is called, it allocates a separate, new block of memory that's only large enough for one integer. Writing to <code>a[size]</code> ends up writing off the end of that array for every value past the first one.</p>\n\n<p>What you want here is the <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/realloc.html\" rel=\"nofollow\"><code>realloc()</code></a> function, e.g.</p>\n\n<pre><code>a = realloc(a, sizeof(int) * (size + 1));\nif (a == NULL) { ... handle error ... }\n</code></pre>\n\n<p>Reworking your code such that <code>size</code> is actually the <em>size</em> of the array, rather than its last index, would help simplify this code, but that's neither here nor there.</p>\n"}, {"tags": [], "owner": {"reputation": 13521, "user_id": 654953, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f6453f58b70e93dbfa8998b71a95bb09?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/654953/ryan"}, "is_accepted": false, "score": 0, "last_activity_date": 1446068472, "last_edit_date": 1446068472, "creation_date": 1446067294, "answer_id": 33401818, "question_id": 33401727, "link": "https://stackoverflow.com/questions/33401727/how-to-keep-using-malloc/33401818#33401818", "title": "how to keep using malloc?", "body": "<p>You haven't allocated an array of integers, you've allocated one integer here. So you'll need to allocate a default array size, then resize if you're about to over run. This will resize it by 2 each time it is full. Might not be in your best interest to resize it this way, but you could also reallocate each for each additional field.</p>\n\n<pre><code>size_t size = 0;\nsize_t current_size = 2;\n\na = (int *)malloc(sizeof(int) * current_size);\n    if(!a)\n        handle_error();\n\n\nwhile( ! feof(in) ){\n    if(size &gt;= current_size) {\n        current_size *= 2;\n        a = (int *)realloc(a, sizeof(int) * current_size);\n        if(!a)\n            handle_error();\n    }\n    fscanf(in,\"%d\", &amp;a[size] );;\n    printf(\"a[i]=%d\\n\",a[size]);\n    size++;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31962, "user_id": 478288, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a838e5ef0f378f35f9c7875ec37f647?s=128&d=identicon&r=PG", "display_name": "chrisaycock", "link": "https://stackoverflow.com/users/478288/chrisaycock"}, "is_accepted": false, "score": 2, "last_activity_date": 1446067441, "last_edit_date": 1446067441, "creation_date": 1446067320, "answer_id": 33401829, "question_id": 33401727, "link": "https://stackoverflow.com/questions/33401727/how-to-keep-using-malloc/33401829#33401829", "title": "how to keep using malloc?", "body": "<p>Your <code>malloc()</code> is overwriting your previous storage with just enough space for a single integer!</p>\n\n<pre><code>a = (int *)malloc(sizeof(int));\n ^^^ assignment overwrites what you have stored!\n</code></pre>\n\n<p>Instead, <code>realloc()</code> the array:</p>\n\n<pre><code>a = realloc(a, sizeof(int)*(size+1));\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13521, "user_id": 654953, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f6453f58b70e93dbfa8998b71a95bb09?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/654953/ryan"}, "edited": false, "score": 0, "creation_date": 1446068739, "post_id": 33402091, "comment_id": 54595596, "body": "Your code has undefined behavior -- <code>sizeof *a</code> without *a being declared in the call to <code>malloc</code>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 13521, "user_id": 654953, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f6453f58b70e93dbfa8998b71a95bb09?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/654953/ryan"}, "edited": false, "score": 0, "creation_date": 1446070811, "post_id": 33402091, "comment_id": 54596588, "body": "@self this usage is correct; <code>a</code> is in scope as soon as <code>int *a =</code> appears (objects name may be used in their initializer), and since the operand of <code>sizeof</code> is unevaluated, <code>sizeof *a</code> does not invoke UB. In fact this is a common idiom, we can be sure that <code>p = malloc(N * sizeof *p);</code> allocates the right number of bytes for N objects, and there&#39;s no reason to stop using this if it happens to be done as initialization instead of assignment."}], "tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 0, "last_activity_date": 1446068478, "creation_date": 1446068478, "answer_id": 33402091, "question_id": 33401727, "link": "https://stackoverflow.com/questions/33401727/how-to-keep-using-malloc/33402091#33402091", "title": "how to keep using malloc?", "body": "<p>The usual approach is to allocate some amount of space at first (large enough to cover most of your cases), then double it as necessary, using the <code>realloc</code> function.</p>\n\n<p>An example:</p>\n\n<pre><code>#define INITIAL_ALLOCATED 32 // or enough to cover most cases\n...\nsize_t allocated = INITIAL_ALLOCATED;\nsize_t size = 0;\n...\nint *a = malloc( sizeof *a * allocated );\nif ( !a )\n  // panic\n\nint val;\n\nwhile ( fscanf( in, \"%d\", &amp;val ) == 1 )\n{\n  if ( size == allocated )\n  {\n    int *tmp = realloc( a, sizeof *a * allocated * 2 ); // double the size of the buffer\n    if ( tmp )\n    {\n      a = tmp;\n      allocated *= 2;\n    }\n    else\n    {\n      // realloc failed - you can treat this as a fatal error, or you\n      // can give the user a choice to continue with the data that's \n      // been read so far.  \n    }\n    a[size++] = val;\n  }\n}\n</code></pre>\n\n<p>We start by allocating 32 elements to <code>a</code>.  Then we read a value from the file.  If we're not at the end of the array (<code>size</code> is not equal to <code>allocated</code>), we add that value to the end of the array.  If we are at the end of the array, we then double the size of it using <code>realloc</code>.  If the <code>realloc</code> call succeeds, we update the <code>allocated</code> variable to keep track of the new size and add the value to the array.  We keep going until we reach the end of the input file.</p>\n\n<p>Doubling the size of the array each time we reach the limit reduces the total number of <code>realloc</code> calls, which can save performance if you're loading a <em>lot</em> of values.</p>\n\n<p>Note that I assigned the result of <code>realloc</code> to a different variable <code>tmp</code>.  <code>realloc</code> will return <code>NULL</code> if it cannot extend the array for any reason.  If we assign that <code>NULL</code> value to <code>a</code>, we lose our reference to the memory that was allocated before, causing a memory leak.</p>\n\n<p>Note also that we check the result of <code>fscanf</code> instead of calling <code>feof</code>, since <code>feof</code> won't return <code>true</code> until after we've already tried to read past the end of the file.  </p>\n"}], "owner": {"reputation": 207, "user_id": 5455373, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/56da1e8d4f95ee9ad852bef07588b5c3?s=128&d=identicon&r=PG&f=1", "display_name": "NUO", "link": "https://stackoverflow.com/users/5455373/nuo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 197, "favorite_count": 1, "accepted_answer_id": 33401803, "answer_count": 5, "score": 0, "last_activity_date": 1446068478, "creation_date": 1446067004, "question_id": 33401727, "link": "https://stackoverflow.com/questions/33401727/how-to-keep-using-malloc", "title": "how to keep using malloc?", "body": "<p>I have a file which stored a sequence of integers. The number of total integers is unknown, so I keep using malloc() to apply new memory if i read an integer from the file. \nI don't know if i could keep asking for memory and add them at the end of the array. The Xcode keeps warning me that 'EXC_BAD_EXCESS' in the line of malloc().\nHow could i do this if i keep reading integers from a file?</p>\n\n<pre><code>int main()\n{\n    //1.read from file\n    int *a = NULL;\n    int size=0;\n    //char ch;\n    FILE *in;\n\n    //open file\n    if ( (in=fopen(\"/Users/NUO/Desktop/in.text\",\"r\")) == NULL){\n        printf(\"cannot open input file\\n\");\n        exit(0);    //if file open fail, stop the program\n    }\n\n    while( ! feof(in) ){\n        a = (int *)malloc(sizeof(int));\n        fscanf(in,\"%d\", &amp;a[size] );;\n        printf(\"a[i]=%d\\n\",a[size]);\n        size++;\n    }\nfclose(in);\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c", "function", "pointers", "reference"], "comments": [{"owner": {"reputation": 3703, "user_id": 1370847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1fbf2d89991ff2e9b36e53236a90d502?s=128&d=identicon&r=PG", "display_name": "amdixon", "link": "https://stackoverflow.com/users/1370847/amdixon"}, "edited": false, "score": 0, "creation_date": 1446066478, "post_id": 33401549, "comment_id": 54594497, "body": "because of the inequality of function pointers with different type+number of arguments, this may not be possible. however you can easily wrap this up in a macro ( part of the macro containing the call to the function as specified by user )"}, {"owner": {"reputation": 714, "user_id": 5317317, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/WKH81.jpg?s=128&g=1", "display_name": "LastSecondsToLive", "link": "https://stackoverflow.com/users/5317317/lastsecondstolive"}, "reply_to_user": {"reputation": 3703, "user_id": 1370847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1fbf2d89991ff2e9b36e53236a90d502?s=128&d=identicon&r=PG", "display_name": "amdixon", "link": "https://stackoverflow.com/users/1370847/amdixon"}, "edited": false, "score": 0, "creation_date": 1446066605, "post_id": 33401549, "comment_id": 54594558, "body": "Could you give with me a rough idea for the macro please?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1446066858, "post_id": 33401549, "comment_id": 54594673, "body": "You could explore passing a function to a function by looking at how <code>qsort</code> takes it. And you could explore variable other arguments by looking up <code>va_start</code> and so forth."}], "answers": [{"comments": [{"owner": {"reputation": 714, "user_id": 5317317, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/WKH81.jpg?s=128&g=1", "display_name": "LastSecondsToLive", "link": "https://stackoverflow.com/users/5317317/lastsecondstolive"}, "edited": false, "score": 0, "creation_date": 1446068284, "post_id": 33401939, "comment_id": 54595347, "body": "This is great and probably what I&#39;ll use. Thank you really much!"}, {"owner": {"reputation": 714, "user_id": 5317317, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/WKH81.jpg?s=128&g=1", "display_name": "LastSecondsToLive", "link": "https://stackoverflow.com/users/5317317/lastsecondstolive"}, "edited": false, "score": 0, "creation_date": 1446068688, "post_id": 33401939, "comment_id": 54595567, "body": "The only thing that bothers me a little is that I have to rewrite a lot of functions which I want to test to only take one argument. That is correct, isn&#39;t it? It&#39;s still something I&#39;ll probably go with!"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 714, "user_id": 5317317, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/WKH81.jpg?s=128&g=1", "display_name": "LastSecondsToLive", "link": "https://stackoverflow.com/users/5317317/lastsecondstolive"}, "edited": false, "score": 0, "creation_date": 1446070514, "post_id": 33401939, "comment_id": 54596477, "body": "More likely, you&#39;d write wrappers: <code>void real_file_copier(FILE *fin, FILE *fout){ \u2026original code\u2026 }</code> and then <code>void timed_file_copier(void *context) { struct TwoFiles *f2 = context; real_file_copier(f2-&gt;f_in,f2-&gt;f_out); }</code>.  So, yes, you get to write a number of functions; but they&#39;re individually tiny and simply wrap the code you really want to time."}], "tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": true, "score": 2, "last_activity_date": 1446067846, "creation_date": 1446067846, "answer_id": 33401939, "question_id": 33401549, "link": "https://stackoverflow.com/questions/33401549/general-function-for-executing-time-measurement/33401939#33401939", "title": "General function for executing time measurement", "body": "<p>The general scheme should be:</p>\n\n<pre><code>void general_timer(void (*function)(void *context), void *context, int loops);\n</code></pre>\n\n<p>This takes a function that returns no value and takes a single <code>void *</code> argument for context, and passes the context.  Depending on what you need to pass as context, that might be the address of a structure, or something as simple as a <code>FILE *</code>.</p>\n\n<p>Inside the implementation:</p>\n\n<pre><code>void general_timer(void (*function)(void *context), void *context, int loops)\n{\n    Clock clk;\n    clk_init(&amp;clk);\n    clk_start(&amp;clk);\n    for (int i = 0; i &lt; loops; i++\n        (*function)(context);\n    clk_stop(&amp;clk);\n    char buffer[32];\n    printf(\"%s seconds for %d iterations\\n\",\n           clk_elapsed_microsecs(&amp;clk, buffer, sizeof(buffer)), loops);\n}\n</code></pre>\n\n<p>Where the type <code>Clock</code> and the functions starting <code>clk_</code> are parts of a high-resolution timing package, using whatever is convenient.</p>\n\n<p>You could write the function call as:</p>\n\n<pre><code>function(context);\n</code></pre>\n\n<p>It would work exactly the same.  This is the more modern style; I prefer the old-fashioned <code>(*function)(context)</code> call as it makes it clear that <code>function</code> is a function pointer, not the name of a function.  YMMV.</p>\n\n<p>Yes, I do have a specific implementation of such a package.  However, the concept applies readily regardless of how you implement it.</p>\n\n<p>You might have a function to be timed.  It might use the structure:</p>\n\n<pre><code>struct TwoFiles\n{\n    FILE *f_in;\n    FILE *f_out;\n};\n</code></pre>\n\n<p>and the function might be:</p>\n\n<pre><code>void file_copier(void *ctxt)\n{\n    struct TwoFiles *info = ctxt;\n    char buffer[4096];\n    size_t bytes;\n    rewind(info-&gt;f_in);\n    rewind(info-&gt;f_out);\n    while ((bytes = fread(buffer, sizeof(buffer), sizeof(char), info-&gt;f_in)) &gt; 0)\n    {\n        if (frwite(buffer, bytes, sizeof(char), info-&gt;f_out) != bytes)\n        {\n            \u2026report error\u2026abandon loop\u2026\n        }\n    }\n}\n</code></pre>\n\n<p>and the call might be:</p>\n\n<pre><code>struct TwoFiles ctxt;\nctxt.f_in = fopen(some_file_name, \"r\");\nctxt.f_out = fopen(another_name, \"w\");\n\ngeneral_timer(file_copier, &amp;ctxt, 100);\n</code></pre>\n\n<p>Note that to be useful, the file copier function needed to rewind the input and output file streams so that it would do work each time the general timer function calls it.  That is, however, a detail for the specific task on hand.</p>\n"}], "owner": {"reputation": 714, "user_id": 5317317, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/WKH81.jpg?s=128&g=1", "display_name": "LastSecondsToLive", "link": "https://stackoverflow.com/users/5317317/lastsecondstolive"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 33401939, "answer_count": 1, "score": 0, "last_activity_date": 1446068404, "creation_date": 1446066170, "question_id": 33401549, "link": "https://stackoverflow.com/questions/33401549/general-function-for-executing-time-measurement", "title": "General function for executing time measurement", "body": "<p>I'm currently trying to write a general function to measure the time another function <code>func</code> needs for execution. I'm able to calculate the time with <code>&lt;time.h&gt;</code> and so on.</p>\n\n<p>My approach looks something like this:<br></p>\n\n<pre><code> void measure_time(void *(func)(), unsigned loops);\n</code></pre>\n\n<p>For now it is enough if the result is just printed within <code>measure_time</code> (later I could let <code>measure_time</code> return some information). </p>\n\n<p>I'm able to calculate the execution time and so on (with <code>&lt;time.h&gt;</code>) but at the moment my problem is that I want this to be a <em>general</em> function and it should be able to take all sort of functions 'func' with different return types and different argument sizes/types. </p>\n\n<p>Currently I have no clue how I could manage to give <code>measure_time</code> the function 'func' and let it execute it with arguments I am able to specify. </p>\n\n<p>For example:</p>\n\n<pre><code>int a[1000] = {15, 53, ..., 42};\nvoid sort_something(int *a, int n_elements) { ... };\nvoid measure_time(sort_somthing(a, 1000), 100);\n</code></pre>\n\n<p>This should call <code>sort_something</code> 100 times with the arguments \"a and 1000\" and measure the time needed for the execution.</p>\n\n<p>I'm more than happy to give some more information if you need them.</p>\n\n<p>Cheers!</p>\n\n<p>LastSeconds</p>\n"}, {"tags": ["c", "matrix"], "comments": [{"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 5, "creation_date": 1446065556, "post_id": 33401351, "comment_id": 54593993, "body": "<code>scanf(&quot;%d&quot;,&amp;A[i][i]);</code> looks like a typo; you probably mean <code>scanf(&quot;%d&quot;,&amp;A[i][j]);</code>"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1446065915, "post_id": 33401351, "comment_id": 54594200, "body": "^^ I had to look at that four times to see what your were on about:)"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1446065973, "post_id": 33401351, "comment_id": 54594233, "body": "Then again, just looking at that question code is enough to make one char-blind:("}, {"owner": {"user_type": "does_not_exist", "display_name": "user4644286"}, "edited": false, "score": 0, "creation_date": 1446066033, "post_id": 33401351, "comment_id": 54594274, "body": "Thanks. How do I close the question now?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4644286"}, "edited": false, "score": 0, "creation_date": 1446066077, "post_id": 33401351, "comment_id": 54594303, "body": "It&#39;s not the prettiest you&#39;ve ever seen??"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1446066375, "post_id": 33401351, "comment_id": 54594452, "body": "@Desperado please don&#39;t close the question just because you have an answer. It&#39;s very frustrating for people following, commenting, or answering it. Leave it to the community to delete if they feel it&#39;s not worth keeping."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4644286"}, "edited": false, "score": 0, "creation_date": 1446067115, "post_id": 33401351, "comment_id": 54594788, "body": "Didn&#39;t mean that. Some kind of answered mark, I thought."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1446068949, "post_id": 33401351, "comment_id": 54595719, "body": "the &#39;N&#39; input needs to be checked for the upper limit (20)  and the prompt needs to be modified to indicate the allowed range, similar to 1...20"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1446069041, "post_id": 33401351, "comment_id": 54595767, "body": "the &#39;K&#39; input needs to be checked for +/- N-1 range and the prompt needs to be modified to indicate that allowed range"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1446069412, "post_id": 33401351, "comment_id": 54595975, "body": "this for() loop <code>for(j=K,i=0;j&lt;N;j++,i++)</code> and the other for() loop have the incorrect terminating value, it should be similar to &#39;N- (abs(K)&#39;  Then it should be obvious that none of the if/elseif/else is needed, just one for() loop for the output"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1446069659, "post_id": 33401351, "comment_id": 54596106, "body": "the code would be massively more readable if prompt/input groups were separated by a blank line and if  code blocks were separated by a blank line.   Also, the use of meaningful variable names would make the code much easier to read.  Names like &#39;matrixSize&#39;  &#39;whichDiaginal&#39; &#39;row&#39; &#39;column&#39;"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "reply_to_user": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1446069813, "post_id": 33401351, "comment_id": 54596181, "body": "the comment by @MOehm is a good start on fixing the code, but it is not the only problem.  I.E. this question is not yet answered"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1446102308, "post_id": 33401351, "comment_id": 54606460, "body": "@user3629249: You make some good points about enforcing the hardcoded limit for <code>N</code> and adding whitespace for readability. The present code is well behaved for any <code>k</code>, though, and just won&#39;t print anything if it has a value out of range."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 1, "creation_date": 1446102575, "post_id": 33401351, "comment_id": 54606595, "body": "And I don&#39;t agree about your suggestions for variable names. In a small program like this, the (local) variable names are okay. <code>A</code> and <code>N</code> are good names for a matrix and its size, <code>i</code> and <code>j</code> are canonical names for the cols and rows of a matrix (although the OP has got them the wrong way round) and <code>K</code> is clear from the problem description. I think overlong variable names make the code harder to read. If you must be explicit about your data, write a comment for the variable definition instead of carrying around the overhead of a long name throughout the code."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "reply_to_user": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1446137064, "post_id": 33401351, "comment_id": 54629444, "body": "@MOehm,  on most any significant project, (or even a small project that YOU will be maintaining, that was written by someone else (or even your self after a year or two) You will want to be able to simply read the project and have the code, especially the variable names, tell you what is going on, without having to intimately know all the details of the project.   I.E. get the OP into programming for the future, rather than just getting some code on paper that works, now, but will be a major pain to maintain down the road.  So, meaningful names, coding style, etc are very significant details."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4644286"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1446142774, "post_id": 33401351, "comment_id": 54632995, "body": "@user3629249 feel free to edit the code to make it more readable. I would like to see it.(Without changing names of variables)"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1446143177, "post_id": 33401351, "comment_id": 54633225, "body": "@user3629249: Thanks for lecturing me. I still maintain that the <code>A</code>, <code>N</code>, <code>k</code>, <code>i</code> and <code>j</code>  are better names than the ones you proposed. We are talking about local variables of a <code>main</code> function that can be seen in its entirety in the editor, not about global or file-scope variables of a larger project, mind. (At least we seem to agree that the crammed, brace-less coding style is horrible.)"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1446167592, "post_id": 33401351, "comment_id": 54643620, "body": "I re-reviewed the if/elseif/else part of the code.  I must have missed a detail the other day, as those loops do work correctly (I tested them).  SO now, I think the &#39;K&#39; value should be tested, when input, to assure it is within the range -N &lt; K &lt; N and if not, a error message output to the user and program exited"}], "answers": [{"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1446170835, "creation_date": 1446170835, "answer_id": 33427646, "question_id": 33401351, "link": "https://stackoverflow.com/questions/33401351/displaying-a-diagonal-of-the-matrix-specified-by-the-inputed-number/33427646#33427646", "title": "Displaying a diagonal of the matrix specified by the inputed number", "body": "<p>Desperado,</p>\n\n<p>As requested, readable, with all comments incorporated except names unchanged to protect the guilty :-).</p>\n\n<p>Note: error checking added, except for the values within the matrix cells, however any call to <code>scanf()</code> should be error checked, even for the values in the matrix cells.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;  // exit(), EXIT_FAILURE\n\n#define MATRIX_MAX_SIZE (20)\n#define MATRIX_MIN_SIZE (2)\n\nint main( void )\n{\n    int A[MATRIX_MAX_SIZE][MATRIX_MAX_SIZE]; // max size of matrix\n    int N;  // size of square matrix along one edge\n    int K;  // which diagonal selected\n    int i;  // row index\n    int j;  // column index\n\n    while(1)\n    {\n        printf( \"Enter square matrix edge length: range %d...%d \",\n                MATRIX_MIN_SIZE,\n                MATRIX_MAX_SIZE );\n\n        if( 1 != scanf(\"%d\",&amp;N) )\n        {\n            perror( \"scanf for matrix edge length failed\" );\n            exit( EXIT_FAILURE );\n        }\n\n        // implied else scanf successful\n\n        if( N &lt; MATRIX_MIN_SIZE || N &gt; MATRIX_MAX_SIZE )\n        {\n            printf( \"Input value: %d is outside allowed range\\n\", N);\n        }\n\n        else\n        { // else, valid matrix size selector\n            break;\n        }\n    }\n\n    while(1)\n    {\n        printf( \"Enter which Diagonal to display: range is %d to %d: \",\n                -(N-1),\n                (N-1) );\n\n        if( 1 != scanf(\"%d\",&amp;K) )\n        {\n            perror( \"scanf for which diagonal to display failed\" );\n            exit( EXIT_FAILURE );\n        }\n\n        // implied else, scanf successful\n\n        if( K &lt; -(N-1) || K &gt; (N-1) )\n        {\n            printf( \"Diagonal Selector: %d is outside the available range\\n\", K );\n        }\n\n        else\n        { // else, valid diagonal selector\n            break;\n        } // endif\n    }\n\n    printf( \"Enter %d elements\\n\", (N*N) );\n\n    for(i=0;i&lt;N;i++)\n    {\n        for(j=0;j&lt;N;j++)\n        {\n            // note: call to scanf() needs to have error checking added\n            // note: mod to use proper column number 'j'\n            scanf(\"%d\",&amp;A[i][j]);  \n        } // end for\n    } // end for\n\n    if(0 == K) // always place literal value on left so compiler can catch syntax error\n    {\n        for( i=0,j=0; i&lt;N; i++,j++ )\n        {\n            printf( \"%d \", A[i][j] ); // insert space so output numbers separated\n        } // end for\n    }\n\n    else if (K&gt;0)\n    {\n        for( j=K,i=0; j&lt;N; j++,i++ )\n        {\n            printf(\"%d \",A[i][j]); // insert space so output numbers separated\n        } // end for\n    }\n\n    else\n    {\n        for( i=-K,j=0; i&lt;N; i++,j++ )\n        {\n            printf(\"%d \",A[i][j]); // insert space so output numbers separated\n        } // end for\n    } // end if\n\n    return 0;\n} // end function: main\n</code></pre>\n\n<p>Note: it would be better to not have a max matrix size but rather let the user input a value and then malloc the necessary size.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4644286"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1446170835, "creation_date": 1446065314, "last_edit_date": 1446065465, "question_id": 33401351, "link": "https://stackoverflow.com/questions/33401351/displaying-a-diagonal-of-the-matrix-specified-by-the-inputed-number", "title": "Displaying a diagonal of the matrix specified by the inputed number", "body": "<p>Create a program that creates a matrix, and depending on inputed number K it displays a specific matrix. <a href=\"http://i.stack.imgur.com/pvkFp.jpg\" rel=\"nofollow\">Here's how it looks</a></p>\n\n<p>I get weird numbers for K>0 and K&lt;0.</p>\n\n<pre><code>int main()\n{\n    int A[20][20],N,K,i,j;\n    printf(\"Dimension: \");\n    scanf(\"%d\",&amp;N);\n    printf(\"Enter K: \");\n    scanf(\"%d\",&amp;K);\n    printf(\"Enter elements\\n\");\n    for(i=0;i&lt;N;i++)\n        for(j=0;j&lt;N;j++)\n            scanf(\"%d\",&amp;A[i][i]);\n    if(K==0)\n        for(i=0,j=0;i&lt;N;i++,j++)\n            printf(\"%d\",A[i][j]);\n    else if (K&gt;0)\n        for(j=K,i=0;j&lt;N;j++,i++)\n            printf(\"%d\",A[i][j]);\n    else\n        for(i=-K,j=0;i&lt;N;i++,j++)\n            printf(\"%d\",A[i][j]);\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 2, "creation_date": 1446064896, "post_id": 33401156, "comment_id": 54593626, "body": "Looks like a <b>32bit</b> overflow..."}, {"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 2, "creation_date": 1446065170, "post_id": 33401156, "comment_id": 54593779, "body": "Can&#39;t reproduce <a href=\"http://ideone.com/YqRaOw\" rel=\"nofollow noreferrer\">ideone.com/YqRaOw</a>"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 4, "creation_date": 1446065681, "post_id": 33401156, "comment_id": 54594077, "body": "You are not using 16-bit Turbo-C++ or anything, are you?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1446068450, "post_id": 33401156, "comment_id": 54595437, "body": "Try <code>printf(&quot;%d\\n&quot;, (int) sizeof (unsigned long long int));</code> and see if you get 4 or 8 or ?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446068641, "post_id": 33401156, "comment_id": 54595542, "body": "Don&#39;t post images instead of text!"}, {"owner": {"reputation": 11, "user_id": 5344910, "user_type": "registered", "profile_image": "https://graph.facebook.com/839193251/picture?type=large", "display_name": "Hassan Abd El Fattah", "link": "https://stackoverflow.com/users/5344910/hassan-abd-el-fattah"}, "edited": false, "score": 0, "creation_date": 1446683628, "post_id": 33401156, "comment_id": 54850718, "body": "it is  <code>8 bytes</code> , and i am not using <code>16 bit turbo c++</code>"}], "answers": [{"comments": [{"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 1, "creation_date": 1446065023, "post_id": 33401232, "comment_id": 54593697, "body": "Isn&#39;t <code>unsigned long long int</code> guaranteed to hold at least 2^64-1? No reason for a 32bit problem."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1446065152, "post_id": 33401232, "comment_id": 54593765, "body": "@deviantfan It is only guaranteed that long long is wider or equal to long.:) But you can use specific types like uint_64 declared in header &lt;stdint.h&gt; in C or &lt;cstdint&gt; in C++."}, {"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 2, "creation_date": 1446065238, "post_id": 33401232, "comment_id": 54593829, "body": "deviantfan is correct in that <code>long long</code> is guaranteed to be at least 64-bits. You can google this if you are really unsure."}, {"owner": {"reputation": 3846, "user_id": 5420829, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4eePO.jpg?s=128&g=1", "display_name": "\u0410\u043d\u0434\u0440\u0435\u0439 \u0411\u0435\u043d\u044c\u043a\u043e\u0432\u0441\u043a\u0438\u0439", "link": "https://stackoverflow.com/users/5420829/%d0%90%d0%bd%d0%b4%d1%80%d0%b5%d0%b9-%d0%91%d0%b5%d0%bd%d1%8c%d0%ba%d0%be%d0%b2%d1%81%d0%ba%d0%b8%d0%b9"}, "edited": false, "score": 0, "creation_date": 1446065244, "post_id": 33401232, "comment_id": 54593831, "body": "@VladfromMoscow But <code>uint_64</code> is not guarantied to be defined. Is it?"}, {"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1446065273, "post_id": 33401232, "comment_id": 54593852, "body": "@Vlad Then whats about eg. <a href=\"http://stackoverflow.com/questions/589575/what-does-the-c-standard-state-the-size-of-int-long-type-to-be\" title=\"what does the c standard state the size of int long type to be\">stackoverflow.com/questions/589575/&hellip;</a> and it&#39;s references"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 0, "creation_date": 1446065497, "post_id": 33401232, "comment_id": 54593958, "body": "@NeilKirk You are write. The C STandard guarantees that long long is at least 64 bits."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1446066329, "post_id": 33401232, "comment_id": 54594428, "body": "@deviantfan It seems that your printf does not support %llu format specifier."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 3846, "user_id": 5420829, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4eePO.jpg?s=128&g=1", "display_name": "\u0410\u043d\u0434\u0440\u0435\u0439 \u0411\u0435\u043d\u044c\u043a\u043e\u0432\u0441\u043a\u0438\u0439", "link": "https://stackoverflow.com/users/5420829/%d0%90%d0%bd%d0%b4%d1%80%d0%b5%d0%b9-%d0%91%d0%b5%d0%bd%d1%8c%d0%ba%d0%be%d0%b2%d1%81%d0%ba%d0%b8%d0%b9"}, "edited": false, "score": 1, "creation_date": 1446067831, "post_id": 33401232, "comment_id": 54595131, "body": "@\u0410\u043d\u0434\u0440\u0435\u0439\u0411\u0435\u043d\u044c\u043a\u043e\u0432\u0441\u043a\u0438\u0439 Yes, these types are optional."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1446067971, "post_id": 33401232, "comment_id": 54595191, "body": "@chux Thanks. I never used these macros myself.:)"}, {"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1446068525, "post_id": 33401232, "comment_id": 54595478, "body": "@VladfromMoscow What does my printf have to do with anything? (I&#39;m not the OP, if you think that)"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1446068616, "post_id": 33401232, "comment_id": 54595526, "body": "@deviantfan I made a mistake.:) Nevertheless you can try your printf.:)"}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": -1, "last_activity_date": 1446067930, "last_edit_date": 1446067930, "creation_date": 1446064886, "answer_id": 33401232, "question_id": 33401156, "link": "https://stackoverflow.com/questions/33401156/long-long-int-trims-numbers-less-than-its-assumed-64bit-capacity/33401232#33401232", "title": "Long Long int trims numbers less than it`s assumed 64bit capacity?", "body": "<p>You can determine the maximum value of an object of type <code>unsigned long long int</code> the following way</p>\n\n<pre><code>#include &lt;limits&gt;\n\n//...\n\nstd::cout &lt;&lt; std::numeric_limits&lt;unsigned long long int&gt;::max() &lt;&lt; std::endl;\n</code></pre>\n\n<p>You can compare the value with the values of the Fibonacci numbers you get.</p>\n\n<p>Or in C you can use constant <code>ULLONG_MAX</code> declared in header <code>&lt;limits.h&gt;</code></p>\n\n<p>Maybe the reason is that the function <code>printf</code> of your compiler does not support format specifier <code>%llu</code></p>\n\n<p>You can also try to use macro <code>PRIu64</code> that might be declared in header <code>&lt;inttypes.h&gt;</code>.</p>\n\n<p>For example</p>\n\n<pre><code>#include &lt;inttypes.h&gt;\n\n//...\n\nprintf(\"%d. %\" PRIu64 \"\\n\",i+1,fib_numbers[i]);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 0, "creation_date": 1446065603, "post_id": 33401403, "comment_id": 54594026, "body": "If they don&#39;t support <code>long long</code> data types, why would it compile?"}, {"owner": {"reputation": 150, "user_id": 3023336, "user_type": "registered", "profile_image": "https://graph.facebook.com/1657380227/picture?type=large", "display_name": "Alderin", "link": "https://stackoverflow.com/users/3023336/alderin"}, "reply_to_user": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 1, "creation_date": 1446067120, "post_id": 33401403, "comment_id": 54594790, "body": "If you don&#39;t have your compiler set to strict, this probably only shows up as a warning."}], "tags": [], "owner": {"reputation": 150, "user_id": 3023336, "user_type": "registered", "profile_image": "https://graph.facebook.com/1657380227/picture?type=large", "display_name": "Alderin", "link": "https://stackoverflow.com/users/3023336/alderin"}, "is_accepted": false, "score": 2, "last_activity_date": 1446066683, "last_edit_date": 1446066683, "creation_date": 1446065538, "answer_id": 33401403, "question_id": 33401156, "link": "https://stackoverflow.com/questions/33401156/long-long-int-trims-numbers-less-than-its-assumed-64bit-capacity/33401403#33401403", "title": "Long Long int trims numbers less than it`s assumed 64bit capacity?", "body": "<p>This is definitely a problem with the underlying libraries not supporting a 64bit unsigned long long. Your code works perfectly on my 64bit Linux system.</p>\n\n<pre><code>48. 2971215073\n49. 4807526976\n50. 7778742049\n51. 12586269025\n52. 20365011074\n53. 32951280099\n54. 53316291173\n55. 86267571272\n56. 139583862445\n57. 225851433717\n58. 365435296162\n59. 591286729879\n60. 956722026041\n</code></pre>\n\n<p>As for a solution, that depends on your platform, compiler, etc. Not enough info to guide. However, you might want to look into a system that supports larger numbers, as 64bits only covers up to fib 94. <a href=\"http://gmplib.org/\" rel=\"nofollow\" title=\"The GNU Multiple Precision Arithmetic Library\">The GNU Multiple Precision Arithmetic Library</a> might do what you need for longer runs, and may automatically correct for the lack of precision in your libraries as well.</p>\n"}], "owner": {"reputation": 11, "user_id": 5344910, "user_type": "registered", "profile_image": "https://graph.facebook.com/839193251/picture?type=large", "display_name": "Hassan Abd El Fattah", "link": "https://stackoverflow.com/users/5344910/hassan-abd-el-fattah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1446068617, "creation_date": 1446064627, "last_edit_date": 1446068617, "question_id": 33401156, "link": "https://stackoverflow.com/questions/33401156/long-long-int-trims-numbers-less-than-its-assumed-64bit-capacity", "title": "Long Long int trims numbers less than it`s assumed 64bit capacity?", "body": "<p>I have a question about a program which generate Fibonacci numbers. The user enters the number of Fibonacci numbers he/she need , and the program generates it. The problem is <em>after 48 numbers the program start to give wrong numbers. It seems to do trimming to numbers giving out some random results</em>. I made an array of \"unsigned long long int\" that is 64 bits for each number. It should carry big numbers, but it didn`t. </p>\n\n<p>Here is my code :</p>\n\n<pre><code>\u202a#\u200einclude\u202c &lt;stdio.h&gt;\nint main (void)\n{\n int n , i ;\n printf(\"Enter number of Fibonacci numbers you need : \");\n scanf(\"%d\" , &amp;n);\n\n unsigned long long int fib_numbers[n];\n\n fib_numbers[0] = 0 ;\n printf(\"1. %llu\\n\",0);\n fib_numbers[1] = 1 ;\n printf(\"2. %llu\\n\",1);\n\n for(i=2;i&lt;n;i++)\n   {\n    fib_numbers[i]=fib_numbers[i-1]+fib_numbers[i-2];\n    printf(\"%d. %llu\\n\",i+1,fib_numbers[i]);\n   }\n return 0;\n}\n</code></pre>\n\n<p>Hers is a snap for output, notice number 49 </p>\n\n<p><img src=\"https://i.stack.imgur.com/6frLg.png\" alt=\"enter image description here\"></p>\n"}, {"tags": ["c", "linked-list", "nodes"], "comments": [{"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1446065374, "post_id": 33401017, "comment_id": 54593893, "body": "void main(void){} should be int main(void){} and I think you need <b>int mfnPtr = compareMajor();</b>. Also in your code you call <b>free</b>, but I don&#39;t see where you call <b>malloc</b>"}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1446065751, "post_id": 33401017, "comment_id": 54594120, "body": "FILE *fp, what exactly does fp here?. You should post the whole code. In your for, how does <b>i</b> get updated?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1446073583, "post_id": 33401017, "comment_id": 54597742, "body": "since the linked list already exists,  start at the &#39;head&#39; of the list and at each node, check if the studentID is the same as the studentID being searched for.  when it is the same, assign the new GPA to the GPA field and assign the new major to the major field.. all done, no need to malloc(), no need to free() no need to change any link-next pointers"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1446073865, "post_id": 33401017, "comment_id": 54597847, "body": "when compiling, always enable all the warnings, then fix those warnings.  (for gcc, at a minimum use: <code>-Wall -Wextra -pedantic</code> )"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1446074137, "post_id": 33401017, "comment_id": 54597959, "body": "At a minimum, please post the struct Node definition.  This statement: <code>struct Node  List[15];</code> says the array is pre-defined at 15 entries (and cannot change) so searching for a specific studentID should be very easy.  (always allow for the desired studentID is not in the array of 15 structs)"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1446074343, "post_id": 33401017, "comment_id": 54598023, "body": "regarding this line: <code>List[current].nodeLink = List[*NewData].nodeData;</code> why waste space with links when the array is statically allocated?  such links are only useful for two reasons.  1) when sorting the structs, inplace  2) when linking between different structs that are dynamically allocated by calling &#39;malloc()&#39;"}, {"owner": {"reputation": 31, "user_id": 5372942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11f0646428f826ade9d0793a17256231?s=128&d=identicon&r=PG&f=1", "display_name": "DarJude", "link": "https://stackoverflow.com/users/5372942/darjude"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1446080170, "post_id": 33401017, "comment_id": 54599869, "body": "@Michi as for the FILE *fp is something he added for a future project."}], "owner": {"reputation": 31, "user_id": 5372942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11f0646428f826ade9d0793a17256231?s=128&d=identicon&r=PG&f=1", "display_name": "DarJude", "link": "https://stackoverflow.com/users/5372942/darjude"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 448, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1446064152, "creation_date": 1446064152, "question_id": 33401017, "link": "https://stackoverflow.com/questions/33401017/adding-an-update-node-into-a-linked-list", "title": "Adding an update node into a linked list", "body": "<p>I'm having trouble figuring out how to do a update function in this current code. He does not want us to change the student ID, but wants us to change the GPA and the major associated with the current student. He wants us to\ncreate a prompt for the user to enter the student ID number to search for. Also to create a prompt to determine which field the user wished to update then accept new input for that field and change the contents of the appropriate student. I don't want the answer. I just need to be pointed in the right direction. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n#include \"stuff.h\"\n#include \"staticll.h\"\n\nint compareID(void*, void*);\nint compareGPA(void*, void*);\nint compareMajor(void*, void*);\n\nvoid main(void)\n{\n    FILE *fp;\nstruct Node  List[15];\nint Begin, current, newStuff, oldStuff;\ndouble oldData;\nint(*fnPtr)();\n\nfnPtr = compareMajor;\n\n\nBegin = 0;\n\nstruct Student *stu;\n\nfor (int x = 0; x &lt; 3; x++)\n{\n    newStuff = FindSpace(List);\n\n    List[newStuff].nodeData = readData(stdin);\n\n    addNode(Begin, List, newStuff);\n}\n\nfor (int i = Begin; i != -1; i = List[i].nodeLink)\n    fprintf(stdout,\"%.2f\\n\",((Stu*)List[i].nodeData));\n\nfor (int i = Begin; i != -1; i = List[i].nodeLink)\n    free(List[i].nodeData);\n}\n\n\nint  compareID(void *p1, void *p2)\n{\n    if (((Stu*)p1)-&gt;stuID == ((Stu*)p2)-&gt;stuID)\n        return 0;\n    else\n    if ((((Stu*)p1)-&gt;stuID &lt; ((Stu*)p2)-&gt;stuID))\n        return 1;\n    else\n        return -1;\n}\n\nint  compareGPA(void *p1, void *p2)\n{\n    if (((Stu*)p1)-&gt;stuGPA == ((Stu*)p2)-&gt;stuGPA)\n        return 0;\n    else\n    if ((((Stu*)p1)-&gt;stuGPA &lt; ((Stu*)p2)-&gt;stuGPA))\n        return 1;\n    else\n        return -1;\n}\n\nint  compareMajor(void *p1, void *p2)\n{\n    return strcmp(((Stu*)p1)-&gt;stuMajor, ((Stu*)p2)-&gt;stuMajor);\n}\n</code></pre>\n\n<p>This is the current code I've created for the update function needed.  </p>\n\n<pre><code> #include\"Stuff.h\"\n\nvoid updateNode(struct Node List[], int current, int *NewData)\n{\n\n        int temp1;\n\n    List[current].nodeLink = List[*NewData].nodeData;\n    List[*NewData].nodeLink = NewData;\n\n    printf(\"enter the student ID number \");\n\n\n\n\n\n}\n</code></pre>\n"}, {"tags": ["c", "server", "cpu", "polling", "usleep"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 1, "creation_date": 1446065295, "post_id": 33400982, "comment_id": 54593862, "body": "Just a guess: you are poll()ing on filedescriptors that are always writeble / readable, (such as write to stdout / stderr) This could be caused by setting unused fds to zero(stdin_fileno)    (memset?) , instead of -1. or by failing to remove fds from the set."}, {"owner": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1446066098, "post_id": 33400982, "comment_id": 54594315, "body": "You&#39;re using <code>poll</code> incorrectly, but we&#39;d have to see more code to know exactly what you&#39;re doing wrong. Likely you&#39;re polling some sockets for writability even if you don&#39;t want to write to them."}, {"owner": {"reputation": 2016, "user_id": 5141989, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/3dPUW.jpg?s=128&g=1", "display_name": "Mike -- No longer here", "link": "https://stackoverflow.com/users/5141989/mike-no-longer-here"}, "edited": false, "score": 0, "creation_date": 1446066383, "post_id": 33400982, "comment_id": 54594458, "body": "I&#39;m polling for any readability/writability on the socket and the function that happens after is based on whether the socket is readable or writeable."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1446075567, "post_id": 33400982, "comment_id": 54598428, "body": "the check of the returned value needs to include the value 0, otherwise the code will be trying to handle events that never happened.  Suggest reading the man page paragraph titled &#39;RETURNS&#39;"}, {"owner": {"reputation": 2016, "user_id": 5141989, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/3dPUW.jpg?s=128&g=1", "display_name": "Mike -- No longer here", "link": "https://stackoverflow.com/users/5141989/mike-no-longer-here"}, "edited": false, "score": 0, "creation_date": 1446091932, "post_id": 33400982, "comment_id": 54602970, "body": "The functionality between the poll call and the end of the endless loop requires at least one of the events to be set on any descriptor. that&#39;s why I used <code>continue;</code> if the poll value is less than 1."}], "answers": [{"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1446075076, "creation_date": 1446075076, "answer_id": 33403388, "question_id": 33400982, "link": "https://stackoverflow.com/questions/33400982/how-to-deal-with-poll-without-slowing-server-or-wasting-cpu/33403388#33403388", "title": "How to deal with poll() without slowing server or wasting cpu?", "body": "<p>reading the man page for <code>poll()</code> gives a completely different story about the parameters and the meaning of the parameters</p>\n\n<p>Here is a relevant excerpt from the man page:</p>\n\n<p>Description</p>\n\n<p>poll() performs a similar task to select(2): it waits for one of a set of file descriptors to become ready to perform I/O. </p>\n\n<p>The set of file descriptors to be monitored is specified in the fds argument, which is an array of structures of the following form: \nstruct pollfd {\n    int   fd;         /* file descriptor <em>/\n    short events;     /</em> requested events <em>/\n    short revents;    /</em> returned events */\n};\nThe caller should specify the number of items in the fds array in nfds. \nThe field fd contains a file descriptor for an open file. If this field is negative, then the corresponding events field is ignored and the revents field returns zero. (This provides an easy way of ignoring a file descriptor for a single poll() call: simply negate the fd field.) </p>\n\n<p>The field events is an input parameter, a bit mask specifying the events the application is interested in for the file descriptor fd. If this field is specified as zero, then all events are ignored for fd and revents returns zero. </p>\n\n<p>The field revents is an output parameter, filled by the kernel with the events that actually occurred. The bits returned in revents can include any of those specified in events, or one of the values POLLERR, POLLHUP, or POLLNVAL. (These three bits are meaningless in the events field, and will be set in the revents field whenever the corresponding condition is true.) </p>\n\n<p>If none of the events requested (and no error) has occurred for any of the file descriptors, then poll() blocks until one of the events occurs. </p>\n\n<p>The timeout argument specifies the minimum number of milliseconds that poll() will block. (This interval will be rounded up to the system clock granularity, and kernel scheduling delays mean that the blocking interval may overrun by a small amount.) Specifying a negative value in timeout means an infinite timeout. Specifying a timeout of zero causes poll() to return immediately, even if no file descriptors are ready. </p>\n\n<p>--end excerpt</p>\n\n<p>Somehow, I do not see a relation between how <code>poll()</code> should be called and what it does, compared to the posted code.</p>\n\n<p>Perhaps you could address this relationship in your question.</p>\n"}], "owner": {"reputation": 2016, "user_id": 5141989, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/3dPUW.jpg?s=128&g=1", "display_name": "Mike -- No longer here", "link": "https://stackoverflow.com/users/5141989/mike-no-longer-here"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1002, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1446075076, "creation_date": 1446064027, "question_id": 33400982, "link": "https://stackoverflow.com/questions/33400982/how-to-deal-with-poll-without-slowing-server-or-wasting-cpu", "title": "How to deal with poll() without slowing server or wasting cpu?", "body": "<p>I ran into an interesting problem with my homemade server in C.</p>\n\n<p>The mainline part is summed up as follows:</p>\n\n<pre><code>while(donotend==1){\n    if (somethingdetected==1){\n    //do critical code\n    }\n    if (poll(structs,numberoffields,x) &lt; 1){continue;}\n    //do functions based on poll fields that were filled in\n}\n</code></pre>\n\n<p>What I noticed greatly is that <code>poll()</code> determines the speed of output as well as CPU usage. </p>\n\n<p>If I set the last parameter x (the timeout value) to zero, then CPU usage for the program alone is above 95%, but each request to the server is processed instantly.</p>\n\n<p>If however, I set x to 500, then cpu usage is still above 95% but it takes 2 seconds for a request to be processed.</p>\n\n<p>If I use <code>usleep(500)</code> just before <code>poll()</code> then cpu usage goes down to almost nothing and it takes no time for a request to processed.</p>\n\n<p>This is what I don't understand:</p>\n\n<p>Why wouldn't poll have up to the number of milliseconds specified in the last parameter to catch an event and return when at least one is found instead of always waiting the full millisecond timeout?</p>\n\n<p>and What would be the effective usleep value? I feel specifying too high of a usleep value will cause the normal program execution to lock up while specifying too low of one won't have an effect.</p>\n"}, {"tags": ["c", "gcc", "linker", "declaration", "absolute"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1446064870, "post_id": 33400783, "comment_id": 54593613, "body": "So you&#39;re asking for C source code for a program such that, when <code>nm</code> is run on its compiled form, the output will include an address for a variable named &quot;A&quot;?"}, {"owner": {"reputation": 275, "user_id": 3428723, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/6c70ce70fd579eedd74176b55571e285?s=128&d=identicon&r=PG&f=1", "display_name": "question all the things", "link": "https://stackoverflow.com/users/3428723/question-all-the-things"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1446065026, "post_id": 33400783, "comment_id": 54593701, "body": "Yes, I want calling nm on the object file from the source code to output: 000000000000002a A A. The &quot;000000000000002a&quot; is not important however"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1446065397, "post_id": 33400783, "comment_id": 54593904, "body": "The C language does not in any way address the question of <i>which</i> address is assigned to any particular symbol, nor the question of symbol relocation.  Everything the <code>nm</code> utility does is quite outside its scope.  Specific compilers may recognize extensions that allow you to do what you want; what compiler are you using?"}], "answers": [{"comments": [{"owner": {"reputation": 275, "user_id": 3428723, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/6c70ce70fd579eedd74176b55571e285?s=128&d=identicon&r=PG&f=1", "display_name": "question all the things", "link": "https://stackoverflow.com/users/3428723/question-all-the-things"}, "edited": false, "score": 0, "creation_date": 1446066836, "post_id": 33401557, "comment_id": 54594665, "body": "Oh wow, didn&#39;t even know you could do that, guess that is why it was extra credit, thank you! Just noticed the hitchhiker reference, nice."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1446072975, "post_id": 33401557, "comment_id": 54597456, "body": "could also use &#39;A org 0x42&#39;  to place the &#39;A&#39; label at address 0x42"}], "tags": [], "owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "is_accepted": true, "score": 1, "last_activity_date": 1446066231, "creation_date": 1446066231, "answer_id": 33401557, "question_id": 33400783, "link": "https://stackoverflow.com/questions/33400783/how-can-i-declare-a-variable-at-an-absolute-address-with-gcc/33401557#33401557", "title": "How can I declare a variable at an absolute address with GCC?", "body": "<p>Defining absolute symbols in Standard C is a bit tricky. But you can use non-standard inline assembly:</p>\n\n<pre><code>$ cat x.c\nasm (\".globl A\");\nasm (\"A = 0x42\");\n$ clang -c x.c\n$ nm x.o\n0000000000000042 A A\n</code></pre>\n"}], "owner": {"reputation": 275, "user_id": 3428723, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/6c70ce70fd579eedd74176b55571e285?s=128&d=identicon&r=PG&f=1", "display_name": "question all the things", "link": "https://stackoverflow.com/users/3428723/question-all-the-things"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 630, "favorite_count": 0, "accepted_answer_id": 33401557, "answer_count": 1, "score": 1, "last_activity_date": 1446067300, "creation_date": 1446063313, "last_edit_date": 1446067300, "question_id": 33400783, "link": "https://stackoverflow.com/questions/33400783/how-can-i-declare-a-variable-at-an-absolute-address-with-gcc", "title": "How can I declare a variable at an absolute address with GCC?", "body": "<p>We are looking at how the linker works in one of my courses and one of the assignments is a little exercise involving the <code>nm</code> command. essentially we just want to match the type and the value printed by <code>nm</code> for each variable. for example:</p>\n\n<pre><code>char* B = NULL;\n</code></pre>\n\n<p>would give the address (irrelevant) then B B. I've done this successfully for all the labels we needed to except for A. I have read that this simply means the value is absolute and cannot be changed by the linker. I have experimented with many combinations involving <code>volatile</code>, <code>const</code>, <code>static</code>, define, and any thing else I could think to try, but I am presently out of ideas. I had read elsewhere that this could only be achieved by creating a linker script to do so, but that is not the case, as some of me peers have solved this with one line in C. Could any one come up with a way in C to output:</p>\n\n<pre><code>some address A A\n...\n</code></pre>\n\n<p>Whem <code>nm</code> is called on it's object file?</p>\n"}, {"tags": ["c++", "c", "code-generation"], "comments": [{"owner": {"reputation": 35069, "user_id": 1324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/883238a436c061eaf848af87b8fda561?s=128&d=identicon&r=PG", "display_name": "Paul Roub", "link": "https://stackoverflow.com/users/1324/paul-roub"}, "edited": false, "score": 3, "creation_date": 1446062640, "post_id": 33400557, "comment_id": 54592440, "body": "typo: <code>i = itemsList-&gt;count;</code> should be <code>i &lt; itemsList-&gt;count;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 2091, "user_id": 1906587, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/9f81eb80f65ad86bdf820621ff7c68f8?s=128&d=identicon&r=PG", "display_name": "ulak blade", "link": "https://stackoverflow.com/users/1906587/ulak-blade"}, "edited": false, "score": 0, "creation_date": 1446062796, "post_id": 33400588, "comment_id": 54592527, "body": "oh....how didn&#39;t I see this..."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 2091, "user_id": 1906587, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/9f81eb80f65ad86bdf820621ff7c68f8?s=128&d=identicon&r=PG", "display_name": "ulak blade", "link": "https://stackoverflow.com/users/1906587/ulak-blade"}, "edited": false, "score": 0, "creation_date": 1446063052, "post_id": 33400588, "comment_id": 54592677, "body": "4000 eyes are better than 2 - it&#39;s why we have code reviews and tests :)"}], "tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": true, "score": 2, "last_activity_date": 1446062630, "creation_date": 1446062630, "answer_id": 33400588, "question_id": 33400557, "link": "https://stackoverflow.com/questions/33400557/faulty-compiler-code-generation-or-some-memory-corruption/33400588#33400588", "title": "Faulty compiler code generation or some memory corruption?", "body": "<p>logic error. try this:</p>\n\n<pre><code>items_list* itemsList = get_item_list_lib(...);\n\nif(itemsList != NULL)\n{\n    qDebug()&lt;&lt;\"ItemCount: \"&lt;&lt;itemsList-&gt;count;\n    for(int i = 0; i &lt; itemsList-&gt;count; i++) // NOTE: less than, not equals\n    {\n        qDebug()&lt;&lt;itemsList-&gt;items[i];\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 2091, "user_id": 1906587, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/9f81eb80f65ad86bdf820621ff7c68f8?s=128&d=identicon&r=PG", "display_name": "ulak blade", "link": "https://stackoverflow.com/users/1906587/ulak-blade"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "closed_date": 1446062751, "accepted_answer_id": 33400588, "answer_count": 1, "score": -3, "last_activity_date": 1446062630, "creation_date": 1446062529, "question_id": 33400557, "link": "https://stackoverflow.com/questions/33400557/faulty-compiler-code-generation-or-some-memory-corruption", "closed_reason": "Not suitable for this site", "title": "Faulty compiler code generation or some memory corruption?", "body": "<p>I am using a <code>C</code> library in my C++ project. This is the first time I ever encounter such an issue. I have a <code>struct</code> like this in the <code>C</code> library:</p>\n\n<pre><code>typedef struct {\n  size_t count;\n  int items[];\n} items_list;\n</code></pre>\n\n<p>And then I do this:</p>\n\n<pre><code>   items_list* itemsList = get_item_list_lib(...);\n\n    if(itemsList != NULL)\n    {\n        qDebug()&lt;&lt;\"ItemCount: \"&lt;&lt;itemsList-&gt;count;\n        for(int i = 0; i = itemsList-&gt;count; i++)\n        {\n            qDebug()&lt;&lt;itemsList-&gt;items[i];\n        }\n    }\n</code></pre>\n\n<p>When I break at <code>if(itemsList != NULL)</code>, I can see that there are count is equal to <code>20</code>. The <code>qDebug()</code> also prints <code>ItemCount: 20</code>. Then once it enters the loop, no breakpoints hit anymore, no matter where I place them and it infinitely prints the value of <code>itemsList-&gt;items[i]</code>. I have never heard of such an issue before, does anyone have any idea? Happens in both debug and release modes.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 2877, "user_id": 2311633, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/VxBfs.jpg?s=128&g=1", "display_name": "Jonnus", "link": "https://stackoverflow.com/users/2311633/jonnus"}, "edited": false, "score": 0, "creation_date": 1446062871, "post_id": 33400540, "comment_id": 54592566, "body": "Have you referenced this which is performing a very similar operation? <a href=\"http://www.c4learn.com/c-programs/write-a-program-to-copy-the-contents-of-one-file-into-another-using-fputc.html\" rel=\"nofollow noreferrer\">c4learn.com/c-programs/&hellip;</a>"}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 1, "creation_date": 1446066344, "post_id": 33400540, "comment_id": 54594435, "body": "Change void main(){} to <b>int main(void){}</b>"}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 3, "last_activity_date": 1446068913, "last_edit_date": 1446068913, "creation_date": 1446062956, "answer_id": 33400683, "question_id": 33400540, "link": "https://stackoverflow.com/questions/33400540/how-to-copy-content-of-one-file-to-another-in-c/33400683#33400683", "title": "How to copy content of one file to another in C", "body": "<p>I suggest the following changes.</p>\n\n<p><strong>Suggestion 1</strong></p>\n\n<p>Use </p>\n\n<pre><code>int a;\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>char a;\n</code></pre>\n\n<p>Depending on whether type of <code>char</code> is signed or unsigned on your platform, </p>\n\n<pre><code>a = fgetc(fp1);\n</code></pre>\n\n<p>might be problem if <code>a</code> is of type <code>char</code> since <code>fgetc</code> returns an <code>int</code> .</p>\n\n<p><strong>Suggestion 2</strong></p>\n\n<p>The <code>do-while</code> loop is flawed. You will end up calling <code>fputc(a, fp2)</code> even for <code>a = EOF</code> with your current setup. Change it to:</p>\n\n<pre><code>while ( (a = fgetc(fp1)) != EOF )\n{\n   fputc(a, fp2);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1446068820, "post_id": 33401033, "comment_id": 54595642, "body": "How can he do it with <code>getc</code> and <code>putc</code>? They work with <code>stdin</code> and <code>stdout</code>, not files opened by the program."}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1446069392, "post_id": 33401033, "comment_id": 54595961, "body": "EOF is a (signed) integer and so it depends on the default signedness of <code>char</code> whether or not it can equal your variable <code>a</code>. Minor: if the &quot;text file&quot; contains a byte <code>0xFF</code> - perhaps as part of a Unicode BOM or an UTF8 sequence - copying will stop prematurely."}, {"owner": {"reputation": 3853, "user_id": 2474248, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BDsoE.jpg?s=128&g=1", "display_name": "machine_1", "link": "https://stackoverflow.com/users/2474248/machine-1"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1446107840, "post_id": 33401033, "comment_id": 54609199, "body": "@Barmar what are you talking about? <code>getc</code> takes <code>FILE* </code> and <code>putc</code> takes <code>int</code> and <code>FILE*</code>.I also tested the code with them,and it works.I agree that a should be declared as <code>int</code> but it still works!"}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1446127235, "post_id": 33401033, "comment_id": 54622260, "body": "&quot;It works&quot; because of (I already said so) the default signedness of <code>char</code> on your system. (Barmar may have confused <code>getc</code> and <code>fgetc</code> with <a href=\"http://en.cppreference.com/w/c/io/getchar\" rel=\"nofollow noreferrer\"><code>getchar</code></a>; I know I did, and still do, until corrected by my compiler.)"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1446132000, "post_id": 33401033, "comment_id": 54625867, "body": "@machine_1 Yes, I was confusing it with <code>getchar</code>."}], "tags": [], "owner": {"reputation": 3853, "user_id": 2474248, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BDsoE.jpg?s=128&g=1", "display_name": "machine_1", "link": "https://stackoverflow.com/users/2474248/machine-1"}, "is_accepted": false, "score": 1, "last_activity_date": 1446127921, "last_edit_date": 1446127921, "creation_date": 1446064213, "answer_id": 33401033, "question_id": 33400540, "link": "https://stackoverflow.com/questions/33400540/how-to-copy-content-of-one-file-to-another-in-c/33401033#33401033", "title": "How to copy content of one file to another in C", "body": "<p>I tried your code and it works,but it adds garbage value to output.txt.so you have to change the <code>do-while</code> loop to a <code>while</code> loop to resolve this.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;process.h&gt;\n\nvoid main() {\n    FILE *fp1, *fp2;\n    int a;\n\n    fp1 = fopen(\"input.txt\", \"r\");\n    if (fp1 == NULL) {\n      puts(\"cannot open this file\");\n      exit(0);\n    }\n\n    fp2 = fopen(\"output.txt\", \"w\");\n    if (fp2 == NULL) {\n      puts(\"Not able to open this file\");\n      fclose(fp1);\n      exit(0);\n    }\n    while( (a = fgetc(fp1)) != EOF )\n    {\n      fputc(a, fp2);\n    }\n\n    fclose(fp1);\n    fclose(fp2);\n}\n</code></pre>\n\n<p>you can also use <code>getc</code> and <code>putc</code> instead of <code>fgetc</code> and <code>fputc</code></p>\n"}, {"tags": [], "owner": {"reputation": 3231, "user_id": 6003870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bffcab50715a33f4fa8f924e24cf80b8?s=128&d=identicon&r=PG&f=1", "display_name": "PADYMKO", "link": "https://stackoverflow.com/users/6003870/padymko"}, "is_accepted": false, "score": 0, "last_activity_date": 1488649704, "creation_date": 1488649704, "answer_id": 42599235, "question_id": 33400540, "link": "https://stackoverflow.com/questions/33400540/how-to-copy-content-of-one-file-to-another-in-c/42599235#42599235", "title": "How to copy content of one file to another in C", "body": "<p>This function copy a content of a first file to a second file. If the second file exists - will to override it, otherwise - will to create it and to write the content of the first file to it. The key for this function is the function <strong>fputc()</strong> (<a href=\"http://www.cplusplus.com/reference/cstdio/fputc/\" rel=\"nofollow noreferrer\">http://www.cplusplus.com/reference/cstdio/fputc/</a>).</p>\n\n<hr>\n\n<p><strong>A solution</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n/**\n * Copy content from one file to other file.\n */\nint\ncopy_file(char path_to_read_file[], char path_to_write_file[])\n{\n    char chr;\n    FILE *stream_for_write, *stream_for_read;\n\n    if ((stream_for_write = fopen(path_to_write_file, \"w\")) == NULL) {\n        fprintf(stderr, \"%s: %s\\n\", \"Impossible to create a file\", path_to_write_file);\n        return -1;\n    }\n\n    if ((stream_for_read = fopen(path_to_read_file, \"r\")) == NULL) {\n        fprintf(stderr, \"%s: %s\\n\", \"Impossible to read a file\", path_to_read_file);\n        return -1;\n    }\n\n    while ((chr = fgetc(stream_for_read)) != EOF)\n        fputc(chr, stream_for_write);\n\n    fclose(stream_for_write);\n    fclose(stream_for_read);\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Usage:</strong></p>\n\n<pre><code>int\nmain(int argc, char *argv[])\n{\n    copy_file(\"file1\", \"file2\");\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 5461745, "user_type": "registered", "profile_image": "https://graph.facebook.com/933277283386870/picture?type=large", "display_name": "Jan Nutcha", "link": "https://stackoverflow.com/users/5461745/jan-nutcha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6687, "favorite_count": 1, "answer_count": 3, "score": 2, "last_activity_date": 1488649704, "creation_date": 1446062478, "last_edit_date": 1446062927, "question_id": 33400540, "link": "https://stackoverflow.com/questions/33400540/how-to-copy-content-of-one-file-to-another-in-c", "title": "How to copy content of one file to another in C", "body": "<pre><code>#include&lt;stdio.h&gt;\n#include&lt;process.h&gt;\n\nvoid main() {\nFILE *fp1, *fp2;\nchar a;\n\nfp1 = fopen(\"input.txt\", \"r\");\nif (fp1 == NULL) {\n  puts(\"cannot open this file\");\n  exit(0);\n}\n\nfp2 = fopen(\"output.txt\", \"w\");\nif (fp2 == NULL) {\n  puts(\"Not able to open this file\");\n  fclose(fp1);\n  exit(0);\n}\n\ndo {\n  a = fgetc(fp1);\n  fputc(a, fp2);\n} while (a != EOF);\n\nfclose(fp1);\nfclose(fp2);\ngetch();\n}\n</code></pre>\n\n<p>I create the file input.txt and output.txt and after I run program I didn't see that text was copied. (I create .txt file from cmd and directly from notepad also but both didn't work)</p>\n"}, {"tags": ["c", "segmentation-fault", "binary-tree"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 3, "creation_date": 1446062411, "post_id": 33400449, "comment_id": 54592306, "body": "<code>if (depth == 0)  {     leaf-&gt;left = 0;     leaf-&gt;right = 0;   } else {</code> --&gt;&gt; <code>if (depth == 0)  {     leaf-&gt;left = 0;     leaf-&gt;right = 0; return;   } else {</code>  BTW: and of course you don&#39;t need the else after the return."}, {"owner": {"reputation": 338, "user_id": 5439654, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7m1uW.png?s=128&g=1", "display_name": "Kotshi", "link": "https://stackoverflow.com/users/5439654/kotshi"}, "edited": false, "score": 0, "creation_date": 1446063394, "post_id": 33400449, "comment_id": 54592869, "body": "Be carefoul with ` (head.left)-&gt;key_value = 5;` , it could segfault if you create a tree of 0 depth, I advise to only nodes when creating them or after checking their existence. By the way <a href=\"http://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc/605858#605858\">Please don&#39;t cast the return of malloc</a>"}], "answers": [{"tags": [], "owner": {"reputation": 10774, "user_id": 4419802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d0f1bd19b8b8481b6b3e812691c1ccb?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/4419802/matt"}, "is_accepted": false, "score": 2, "last_activity_date": 1446062688, "creation_date": 1446062688, "answer_id": 33400609, "question_id": 33400449, "link": "https://stackoverflow.com/questions/33400449/segmentation-fault-when-setting-up-binary-tree-in-c/33400609#33400609", "title": "Segmentation fault when setting up binary tree in C", "body": "<p>You have infinite recursion, as you don't <code>return</code> on <code>depth == 0</code>, but recurse on <code>createTree</code> again.</p>\n\n<pre><code>void createTree(node * leaf, int depth) {\n    leaf-&gt;key_value = depth;\n    if (depth == 0)  {\n        leaf-&gt;left = 0;\n        leaf-&gt;right = 0;\n        return;\n    }\n    leaf-&gt;left = malloc(sizeof(node));\n    leaf-&gt;right = malloc(sizeof(node));\n    createTree(leaf-&gt;left, depth - 1);\n    createTree(leaf-&gt;right, depth - 1);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3062, "user_id": 5115872, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/8lyXg.jpg?s=128&g=1", "display_name": "wrangler", "link": "https://stackoverflow.com/users/5115872/wrangler"}, "is_accepted": true, "score": 2, "last_activity_date": 1446062728, "creation_date": 1446062728, "answer_id": 33400623, "question_id": 33400449, "link": "https://stackoverflow.com/questions/33400449/segmentation-fault-when-setting-up-binary-tree-in-c/33400623#33400623", "title": "Segmentation fault when setting up binary tree in C", "body": "<p>Its an infinite recursion, there must always be something to return at base condition to get out of recursive loop:</p>\n\n<pre><code>if (depth == 0)  {\n        leaf-&gt;left = 0;\n        leaf-&gt;right = 0;\n        return;   // edit\n    }\n</code></pre>\n"}], "owner": {"reputation": 528, "user_id": 3147102, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d5ba477b3828f1c18b0a32429e6e967f?s=128&d=identicon&r=PG", "display_name": "Slugger", "link": "https://stackoverflow.com/users/3147102/slugger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 33400623, "answer_count": 2, "score": -1, "last_activity_date": 1446062728, "creation_date": 1446062166, "question_id": 33400449, "link": "https://stackoverflow.com/questions/33400449/segmentation-fault-when-setting-up-binary-tree-in-c", "title": "Segmentation fault when setting up binary tree in C", "body": "<p>I picked up some ideas from this website: <a href=\"http://www.cprogramming.com/tutorial/c/lesson18.html\" rel=\"nofollow\">http://www.cprogramming.com/tutorial/c/lesson18.html</a></p>\n\n<p>Then I wrote some code to create a binary tree. It is as follows</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\ntypedef struct node\n{\n  int key_value;\n  struct node *left;\n  struct node *right;\n} node;\n\nvoid createTree(node * leaf, int depth) {\n  leaf-&gt;key_value = depth;\n  if (depth == 0)  {\n    leaf-&gt;left = 0;\n    leaf-&gt;right = 0;\n  } else {\n    leaf-&gt;left = (node *) malloc(sizeof(node));\n    leaf-&gt;right = (node *) malloc(sizeof(node));\n  }\n  createTree(leaf-&gt;left, depth - 1);\n  createTree(leaf-&gt;right, depth - 1);\n}\n\nint main() {\n  node head;\n  createTree(&amp;head, 3);\n  (head.left)-&gt;key_value = 5;\n  printf(\"%d\\n\", head.left-&gt;key_value);\n  return 0;\n}\n</code></pre>\n\n<p>It compiles just fine but when I run it I get a segmentation fault error. The idea is to start with a node called head, and then give that value 3, then give its two children value 2, etcetera and until we get to depth == 0, at which point we dont make any more leafs.</p>\n"}, {"tags": ["python", "c", "numpy", "ctypes", "python-c-extension"], "comments": [{"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 1, "creation_date": 1446126757, "post_id": 33400390, "comment_id": 54621859, "body": "The attribute is <code>restype</code>, not <code>restypes</code>."}, {"owner": {"reputation": 346, "user_id": 5414031, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/UJgdp.png?s=128&g=1", "display_name": "ironstein", "link": "https://stackoverflow.com/users/5414031/ironstein"}, "reply_to_user": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1446127481, "post_id": 33400390, "comment_id": 54622459, "body": "@eryksun thanks, didn&#39;t notice it"}], "answers": [{"comments": [{"owner": {"reputation": 346, "user_id": 5414031, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/UJgdp.png?s=128&g=1", "display_name": "ironstein", "link": "https://stackoverflow.com/users/5414031/ironstein"}, "edited": false, "score": 0, "creation_date": 1446084300, "post_id": 33400978, "comment_id": 54600943, "body": "Thank you for your reply. What I wanted to know that according to the documents for numpy, the numpy.ascontiguousarray function returns a  column major C contiguous array. How would that affect the execution of my program ?"}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1446126586, "post_id": 33400978, "comment_id": 54621708, "body": "<code>c_array.ctypes</code> has an <code>_as_parameter_</code> attribute that&#39;s a <code>c_void_p</code> instance, so just return <code>c_array.ctypes</code>."}, {"owner": {"reputation": 346, "user_id": 5414031, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/UJgdp.png?s=128&g=1", "display_name": "ironstein", "link": "https://stackoverflow.com/users/5414031/ironstein"}, "reply_to_user": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1446133563, "post_id": 33400978, "comment_id": 54627049, "body": "@eryksun could you please give me an example pertaining 2d numpy array with elements as integers, been trying it for a while now and getting nowhere. I tried ` c_array = numpy.ascontiguousarray([numpy.ascontiguousarray(element,dty&zwnj;&#8203;pe=int) for element in array]) but when I use this, python seems to crash`"}, {"owner": {"reputation": 346, "user_id": 5414031, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/UJgdp.png?s=128&g=1", "display_name": "ironstein", "link": "https://stackoverflow.com/users/5414031/ironstein"}, "edited": false, "score": 0, "creation_date": 1446133880, "post_id": 33400978, "comment_id": 54627293, "body": "@Daniel could you please give me an example pertaining 2d numpy array with elements as integers, been trying it for a while now and getting nowhere. I tried ` c_array = numpy.ascontiguousarray([numpy.ascontiguousarray(element,dty&zwnj;&#8203;pe=int) for element in array]) ` but when I use this, python seems to crash"}, {"owner": {"reputation": 38371, "user_id": 3555845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e06f616d9a53b1ca18287d1049a28ee?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3555845/daniel"}, "reply_to_user": {"reputation": 346, "user_id": 5414031, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/UJgdp.png?s=128&g=1", "display_name": "ironstein", "link": "https://stackoverflow.com/users/5414031/ironstein"}, "edited": false, "score": 0, "creation_date": 1446144935, "post_id": 33400978, "comment_id": 54634178, "body": "@ironstein: you create one 2d-numpy-array (<code>numpy.zeros(shape=(a,b), dtype=int)</code>), the <code>ascontiguousarray</code> is only necessary, if you like to use any array or subarray."}], "tags": [], "owner": {"reputation": 38371, "user_id": 3555845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e06f616d9a53b1ca18287d1049a28ee?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3555845/daniel"}, "is_accepted": true, "score": 2, "last_activity_date": 1446064008, "creation_date": 1446064008, "answer_id": 33400978, "question_id": 33400390, "link": "https://stackoverflow.com/questions/33400390/most-efficient-way-to-convert-a-multidimensional-numpy-array-to-ctypes-array/33400978#33400978", "title": "Most efficient way to convert a multidimensional numpy array to ctypes array", "body": "<p>The fastest way is, not the convert the array at all, if not necessary.\nThis code works also for lists and tuples:</p>\n\n<pre><code>c_array = numpy.ascontiguousarray(param, dtype=int)\npointer = c_array.ctypes.data_as(ctypes.c_void_p)\n</code></pre>\n"}], "owner": {"reputation": 346, "user_id": 5414031, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/UJgdp.png?s=128&g=1", "display_name": "ironstein", "link": "https://stackoverflow.com/users/5414031/ironstein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1319, "favorite_count": 0, "accepted_answer_id": 33400978, "answer_count": 1, "score": 0, "last_activity_date": 1446137408, "creation_date": 1446061993, "last_edit_date": 1446137408, "question_id": 33400390, "link": "https://stackoverflow.com/questions/33400390/most-efficient-way-to-convert-a-multidimensional-numpy-array-to-ctypes-array", "title": "Most efficient way to convert a multidimensional numpy array to ctypes array", "body": "<p>Hello, I am using ctypes module in python to run some image processing C code from python, for the purpose of optimisation of my code, and reducing the execution time.</p>\n\n<p>\nFor this purpose, I am reading an image into a numpy array and then applying 2D convolution to the image with a kernel, producing a filtered image. I want achieve the same in C, in order to save some execution time.</p>\n\n<p>So, the first part of the problem is converting the numpy image array, to ctype array, so that I can perform convolution in C. \nHere is my C code which does nothing right now, but I need it just to access the function definition :</p>\n\n<pre><code>#import &lt;math.h&gt;\n\nvoid convolution(int *array,int *kernel, int array_height, int array_width,\n                 int kernel_height, int kernel_width) {\n    int i=0;\n</code></pre>\n\n<p>here is my python code, that adds a wrapper function for this C function :</p>\n\n<pre><code>_convolution_ = ctypes.cdll.LoadLibrary(working_directory + 'libconvolution.so')\nclass two_dimensional_matrix_() : \n\n    def from_param(self,param) : \n        typename = type(param).__name__\n        if hasattr(self,'from_'+typename) : \n            return getattr(self,'from_'+typename)(param)\n        else : \n            raise TypeError('cant convert %s' %typename)\n\n    #for a list\n    def from_list(self,param) : \n\n        c_array = ((ctypes.c_int * len(param))*len(param[0]))()\n        for i in range(len(param)) : \n            for j in range(len(param[i])) :\n                c_array[i][j] = ctypes.c_int(param[i][j])\n        return c_array\n\n    #for a tuple\n    def from_tuple(self,param) : \n        return self.from_list(param)\n\n    #for a numpy array\n    def from_ndarray(self,param) : \n\n        c_array = ((ctypes.c_int * len(param))*len(param[0]))()\n        for i in range(len(param)) : \n            for j in range(len(param[i])) : \n                c_array[i][j] = ctypes.c_int(param[i][j])\n        return c_array\n\ntwo_dimensional_matrix = two_dimensional_matrix_()\n_convolution_.convolution.argtypes = [\n    two_dimensional_matrix, two_dimensional_matrix,\n    ctypes.c_int,ctypes.c_int,ctypes.c_int,ctypes.c_int\n]\n_convolution_.convolution.restypes = ctypes.c_void_p\n</code></pre>\n\n<p>Even though this code works perfectly, what I want to know is that is there a more efficient way to perform the conversion from a numpy array or a list to ctypes array? Because I am using C extensions in python to save execution time, I want this time to be as little as possible.</p>\n\n<p><b>EDIT</B> :\n<p>\nas suggested by Daniel, I used <a href=\"http://docs.scipy.org/doc/numpy/reference/generated/numpy.ascontiguousarray.html\" rel=\"nofollow\"><code>numpy.ascontiguousarray</code></a>, and it works well for 1D numpy array, here is what I did : </p>\n\n<pre><code>c_array = numpy.ascontiguousarray(array,dtype=numpy.uint32)\n</code></pre>\n\n<p>but when I try the similar method for 2D arrays, it does not work, here is what I tried :</p>\n\n<pre><code>c_array = numpy.ascontiguousarray(array,dtype=numpy.ndarray)\n</code></pre>\n\n<p>when I use this, python crashes. What am I doing wrong here?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1446058806, "post_id": 33399336, "comment_id": 54590238, "body": "You need a <code>for</code> loop. Here&#39;s a <a href=\"http://stackoverflow.com/a/562377/3386109\">list of books</a> to help you get started."}, {"owner": {"reputation": 2352, "user_id": 4823151, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Pwh6B.jpg?s=128&g=1", "display_name": "user23573", "link": "https://stackoverflow.com/users/4823151/user23573"}, "edited": false, "score": 0, "creation_date": 1446061924, "post_id": 33399336, "comment_id": 54592029, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/5054414/how-to-input-a-string-using-scanf-in-c-including-whitespaces\">How to input a string using scanf in c including whitespaces</a>"}], "answers": [{"comments": [{"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 0, "creation_date": 1446061460, "post_id": 33399423, "comment_id": 54591795, "body": "Are you sure about &quot;&lt; C11&quot;? I think C99 is enough."}], "tags": [], "owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "is_accepted": false, "score": 2, "last_activity_date": 1446062044, "last_edit_date": 1446062044, "creation_date": 1446058776, "answer_id": 33399423, "question_id": 33399336, "link": "https://stackoverflow.com/questions/33399336/using-an-input-string-and-printing-it-out-character-by-character/33399423#33399423", "title": "Using an input string and printing it out character by character", "body": "<p>Use a <code>for</code> loop!</p>\n\n<pre><code>for (size_t i = 0; i &lt; string_length; ++i) {\n     /* print ith character of the string */\n}\n</code></pre>\n\n<p>or, if you're still &lt; C99<sup>1</sup>, define <code>size_t i;</code> before the loop and initialize it with <code>i = 0</code>.</p>\n\n<p>Notes:</p>\n\n<ul>\n<li>use <code>scanf(\"%19s\", String)</code> instead to preempt buffer overflows. <code>19</code> to leave room for the terminating null byte</li>\n<li>in C, variabels commonly have lowercase identifiers like <code>string</code> or <code>charNo</code>. How to handle concatentation of multiple words in one identifier is up to you. Common choices are <code>first_second</code> and <code>firstSecond</code></li>\n</ul>\n\n<hr>\n\n<p><sub><sup>1</sup> as @szczurcio noted in the comments to this answer</sub></p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 5499805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcb2f2ef51c5616454ffbac4967e31ec?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5499805/tom"}, "edited": false, "score": 0, "creation_date": 1446065118, "post_id": 33399466, "comment_id": 54593750, "body": "Thank you for the quick response, I used your first approach and it does print characters on new lines but it only does the first 3 characters and im completely clueless as to why."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 1, "user_id": 5499805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcb2f2ef51c5616454ffbac4967e31ec?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5499805/tom"}, "edited": false, "score": 0, "creation_date": 1446065252, "post_id": 33399466, "comment_id": 54593837, "body": "@Tom, you can use <code>printf(&quot;The string: &#39;%s&#39;\\n&quot;, String);</code> to print the contents of the string and verify that the outputs match."}, {"owner": {"reputation": 1, "user_id": 5499805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcb2f2ef51c5616454ffbac4967e31ec?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5499805/tom"}, "edited": false, "score": 0, "creation_date": 1446068636, "post_id": 33399466, "comment_id": 54595536, "body": "I have just used that and I can confirm it will only show the first 3 characters"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 1, "user_id": 5499805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcb2f2ef51c5616454ffbac4967e31ec?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5499805/tom"}, "edited": false, "score": 0, "creation_date": 1446068852, "post_id": 33399466, "comment_id": 54595660, "body": "@Tom, When you use &#39;&quot;%s&quot;&#39; as the format specifier for <code>scanf</code>, it reads only non-whitespace characters. Could it be that your input consists of the three non-whitespace characters followed by a whitespace character?"}, {"owner": {"reputation": 1, "user_id": 5499805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcb2f2ef51c5616454ffbac4967e31ec?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5499805/tom"}, "edited": false, "score": 0, "creation_date": 1446069510, "post_id": 33399466, "comment_id": 54596032, "body": "Unfortunately not I&#39;m using a block of characters eg. egwharewh"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 1, "user_id": 5499805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcb2f2ef51c5616454ffbac4967e31ec?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5499805/tom"}, "edited": false, "score": 0, "creation_date": 1446069558, "post_id": 33399466, "comment_id": 54596052, "body": "@Tom, That is strange indeed."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1446058902, "creation_date": 1446058902, "answer_id": 33399466, "question_id": 33399336, "link": "https://stackoverflow.com/questions/33399336/using-an-input-string-and-printing-it-out-character-by-character/33399466#33399466", "title": "Using an input string and printing it out character by character", "body": "<p><strong>Approach 1</strong></p>\n\n<ol>\n<li>Get the length of the string</li>\n<li>Use a loop to iterate over the length of the string.</li>\n<li>In each iteration of the loop, print one character.</li>\n</ol>\n\n\n\n<pre><code>int len = strlen(String);\nfor (int i = 0; i &lt; len; ++i )\n{\n   printf(\"%c\\n\", String[i]);\n}\n</code></pre>\n\n<p><strong>Approach 2</strong></p>\n\n<ol>\n<li>Create a pointer that points to the string.</li>\n<li>Use a loop in which you increment the pointer until it points to the null character.</li>\n<li>In each iteration of the loop print the character that the pointer points to.</li>\n</ol>\n\n\n\n<pre><code>char* cp = String;\nfor ( ; *cp != '\\0'; ++cp )\n{\n   printf(\"%c\\n\", *cp);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1541, "user_id": 5374489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83871d811321a9729d2afa5cd7d17b8f?s=128&d=identicon&r=PG&f=1", "display_name": "V. Michel", "link": "https://stackoverflow.com/users/5374489/v-michel"}, "is_accepted": false, "score": 0, "last_activity_date": 1446064160, "last_edit_date": 1446064160, "creation_date": 1446059631, "answer_id": 33399656, "question_id": 33399336, "link": "https://stackoverflow.com/questions/33399336/using-an-input-string-and-printing-it-out-character-by-character/33399656#33399656", "title": "Using an input string and printing it out character by character", "body": "<pre><code>    #include &lt;stdio.h&gt;\n    #include &lt;stdlib.h&gt;\n\n    int main()\n    {\n        char String[20];\n        int CharNo = 0;\n        char *c;\n\n        printf(\"Enter a few characters please:\\n\");\n        scanf(\"%s\", String);\n\n        c=String;\n        while(*c) putchar(*c++);      \n\n        return 0;\n    }\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5499805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcb2f2ef51c5616454ffbac4967e31ec?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5499805/tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1446064160, "creation_date": 1446058500, "last_edit_date": 1446058942, "question_id": 33399336, "link": "https://stackoverflow.com/questions/33399336/using-an-input-string-and-printing-it-out-character-by-character", "title": "Using an input string and printing it out character by character", "body": "<p>I'm very new to programming and decided to start with C. This is my first real problem where I can't figure it out for myself.</p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n    #include &lt;stdlib.h&gt;\n\n    int main()\n    {\n        char String[20];\n        int CharNo = 0;\n\n        //Asking the User to input some characters to use in the program\n        printf(\"Enter a few characters please:\\n\");\n        scanf(\"%s\", String);\n\n        printf(\"%c\\n\", String[0]);\n\n        return 0;\n    }\n</code></pre>\n\n<p>I have asked the user to input a few random characters, then what I want to be able to do is print out the input string character by character on a new line. All I'm able to do by myself if print out one of the characters by itself.</p>\n\n<p>Any help about this problem and my coding overall would be greatly appreciated.</p>\n"}, {"tags": ["c", "r", "windows", "gcc"], "owner": {"reputation": 21, "user_id": 5498936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d3c194bfc5d62244bccf274a466244f?s=128&d=identicon&r=PG", "display_name": "Guillaume", "link": "https://stackoverflow.com/users/5498936/guillaume"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 223, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1483205916, "creation_date": 1446058402, "last_edit_date": 1495542830, "question_id": 33399313, "link": "https://stackoverflow.com/questions/33399313/rcatrogram-package-how-to-parameter-makevars-win-file", "title": "Rcatrogram package : how to parameter Makevars.win file?", "body": "<p>I am trying to build a cartogram and followed the process described <a href=\"https://stackoverflow.com/questions/31613119/installing-rcartogram-packages-error-message\">here</a>\n.\n<br>\nAt the last step when I want to install the package I have the following error:</p>\n\n<blockquote>\n  <p><br>  ***\n      arch - i386  <br> \n      gcc -m32 -shared -s -static-libgcc -o Rcartogram.dll tmp.def Rcart.o cart.o -LC:/msys/fftwtest/x64 -LC:/msys/fftwtest/i386 -lfftw3-3 -lm -Ld:/RCompile/r-compiling/local/local320/lib/i386 -Ld:/RCompile/r-compiling/local/local320/lib -LC:/dev/R-PORT~1/App/R-PORT~1/bin/i386 -lR\n  C:/msys/fftwtest/x64/libfftw3-3.dll: file not recognized: File format not recognized\n  collect2.exe: error: ld returned 1 exit status \n  no DLL was created <br> </p>\n</blockquote>\n\n<p>I tried to invert the path to load the library in the Makevars.win file ie <code>PKG_LIBS=-L\"C:/msys/fftwtest/i386\" -L\"C:/msys/fftwtest/x64\"</code>. Then the 32bit version is correctly installed but I got the following message:</p>\n\n<blockquote>\n  <p><br>  ***arch - x64<br> \n  gcc -m64 -I\"C:/dev/R-PORT~1/App/R-PORT~1/include\" -DNDEBUG -I\"C:/msys  /fftwtest/x64\"   -DNOPROGRESS     -I\"d:/RCompile/r-compiling/local/local320/include\"     -O2 -Wall  -std=gnu99 -mtune=core2 -c Rcart.c -o Rcart.o\n  Rcart.c:1:0: sorry, unimplemented: 64-bit mode not compiled in<br> </p>\n</blockquote>\n\n<p>It seems that the second option -L in the Makevars.win is not taken into account each time.<br>Does someone have an idea on how to solve this?<br> I am working on a windows machine.<br><br>\nHere are my session info:</p>\n\n<pre><code>R version 3.2.1 (2015-06-18)\nPlatform: x86_64-w64-mingw32/x64 (64-bit)\nRunning under: Windows 7 x64 (build 7601) Service Pack 1\n\nlocale:\n[1] LC_COLLATE=French_France.1252  LC_CTYPE=French_France.1252 &gt;LC_MONETARY=French_France.1252 LC_NUMERIC=C               \n[5] LC_TIME=French_France.1252\n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base\n\nother attached packages:\n[1] devtools_1.9.1\n\nloaded via a namespace (and not attached):\n[1] tools_3.2.1   memoise_0.2.1 git2r_0.11.0  digest_0.6.8 \n</code></pre>\n"}, {"tags": ["c", "arrays", "multidimensional-array"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1446058411, "post_id": 33399098, "comment_id": 54590003, "body": "The general structure of the program is wrong. It is 1) user input, 2) a combination of printing and initializing the array. It should be 1) initialize the array, 2) user input, 3) print the array."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1446058830, "post_id": 33399098, "comment_id": 54590253, "body": "I don&#39;t get what you are trying. The loop <code>while (!finished){...}</code> will repeat until you have entered <code>!!!</code> and then you don&#39;t change <code>color</code> before it&#39;s used in <code>boardgame2 [0][0] = color;</code> when it is still a <code>!</code>."}, {"owner": {"reputation": 1247, "user_id": 4349429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/747aac0b54af7691075ba3758a66ca4a?s=128&d=identicon&r=PG&f=1", "display_name": "Pawan", "link": "https://stackoverflow.com/users/4349429/pawan"}, "edited": false, "score": 0, "creation_date": 1446097742, "post_id": 33399098, "comment_id": 54604796, "body": "can you please explain, what you really want to do?"}], "owner": {"reputation": 1, "user_id": 5472482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/375480ffe6d852f78f4535a11334c0b4?s=128&d=identicon&r=PG&f=1", "display_name": "Rain74", "link": "https://stackoverflow.com/users/5472482/rain74"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1457703096, "creation_date": 1446057735, "last_edit_date": 1457703096, "question_id": 33399098, "link": "https://stackoverflow.com/questions/33399098/printing-out-a-2d-array-from-input", "title": "Printing out a 2D array from input", "body": "<p>I have a function to print a 2D array based off user input.</p>\n\n<pre><code>void inputSequence (char boardgame2 [26][26], int size) {\n\nbool finished = false;\nchar color, row, col;\n\nprintf(\"\\nEnter board configuration:\\n\");\n\nwhile (!finished)\n{\n    scanf(\" %c%c%c\", &amp;color, &amp;row, &amp;col);\n      if (color == '!' &amp;&amp; row == '!' &amp;&amp; col == '!')\n        finished = true;\n}\n\nprintf(\"  \");\nfor (int col = 0; col &lt; size; col++) \n    printf(\"%c\", 'a'+col);\n\nfor (int row = 0; row &lt; size; row++) \n{\n    printf(\"\\n%c\", 'a'+row);\n    printf(\" \");\n\n    for (int colU = 0; colU &lt; size; colU++)\n    {\n        boardgame2 [row][colU]= 'U';\n        boardgame2 [size/2][size/2]= 'W';\n        boardgame2 [size/2-1][size/2-1]= 'W';\n        boardgame2 [size/2-1][size/2] = 'B';\n        boardgame2 [size/2][size/2-1] = 'B';\n        boardgame2 [0][0] = color;\n\n        printf(\"%c\", boardgame2[row][colU]);\n    }\n}\n}\n</code></pre>\n\n<p>The only problem is that the statement <code>boardgame2 [0][0] = color</code> prints out the last thing I entered, which is ! but I want it to be something the user inputs. The !!! should typed by user once they are done configuring the board. </p>\n\n<p>Board configuration occurs by typing 3 letters, e.g Bab. where 1st letter represents the letter to be changed, a - row label, and b - column label. </p>\n\n<p>So if the user types: </p>\n\n<pre><code>Bab\n\n!!!\n</code></pre>\n\n<p>The configured will print out ! at the position (a,b) instead of B. How do I fix this?</p>\n"}, {"tags": ["c", "malloc", "strlen"], "comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 2, "creation_date": 1446058429, "post_id": 33399074, "comment_id": 54590017, "body": "You want to read on what C-&quot;strings&quot; really are, as there is no data type &quot;string&quot; in C."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1446059466, "post_id": 33399074, "comment_id": 54590631, "body": "If you initialize with <code>null-characters</code> (zero), you will see the difference. i.e. <code>L = calloc(mid, sizeof(char));</code> and  <code>R = calloc((n - mid), sizeof(char));</code> (<b>note:</b> for storage of a string of <code>mid</code>, you must allocate <code>mid + 1</code> to provide room for the null-terminating character)"}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 1, "creation_date": 1446060518, "post_id": 33399074, "comment_id": 54591251, "body": "You&#39;ve allocated memory but you&#39;ve put nothing into it. So its contents are random, and might have any string length."}], "answers": [{"comments": [{"owner": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "edited": false, "score": 2, "creation_date": 1446058882, "post_id": 33399101, "comment_id": 54590284, "body": "<code>sizeof(char)</code> is pointless but <code>sizeof(L)</code> is not since that will work correctly even if the type of <code>L</code> is changed to something else such as <code>wchar_t</code>. Type names should almost never be passed to <code>sizeof</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1446060189, "post_id": 33399101, "comment_id": 54591063, "body": "Suggested note to a fine answer: <code>printf(&quot;longueur de L: %d\\n&quot;,strlen(L));</code> is UB - should be <code>%zu</code>.  <code>strlen()</code> returns a <code>size_t</code>, just like the type <code>malloc(size_t n)</code> takes."}, {"owner": {"reputation": 59, "user_id": 5499743, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MuOEP.png?s=128&g=1", "display_name": "White", "link": "https://stackoverflow.com/users/5499743/white"}, "edited": false, "score": 0, "creation_date": 1446197537, "post_id": 33399101, "comment_id": 54653491, "body": "Thank you for the clarification. I don&#39;t think that the problem is caused but a non initialization. Even when I use the data, this problem happens. For example when I reserved 2 * sizeof(char), I have always a third character in the string. Or maybe, the right thing to do is to initialize it with NULL."}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "reply_to_user": {"reputation": 59, "user_id": 5499743, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MuOEP.png?s=128&g=1", "display_name": "White", "link": "https://stackoverflow.com/users/5499743/white"}, "edited": false, "score": 0, "creation_date": 1446197824, "post_id": 33399101, "comment_id": 54653649, "body": "@White Uhm, yes, the problem <b>is</b> caused by the access of uninitialized memory, just as I and the creator of the other answer mentioned. It&#39;s undefined behavior. Randomness at play (from the point of view of the C standard)."}], "tags": [], "owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "is_accepted": true, "score": 11, "last_activity_date": 1448551653, "last_edit_date": 1495540458, "creation_date": 1446057748, "answer_id": 33399101, "question_id": 33399074, "link": "https://stackoverflow.com/questions/33399074/why-does-strlen-not-work-on-mallocated-memory/33399101#33399101", "title": "Why does strlen not work on mallocated memory?", "body": "<p><a href=\"http://linux.die.net/man/3/strlen\" rel=\"nofollow noreferrer\"><code>strlen</code></a> iterates until a null byte is found. <code>malloc</code> leaves the allocated space uninitialized, so a null byte may occur randomly. After all, it's undefined behavior due to the access of uninitialized memory.</p>\n\n<p>Determining the size of a <code>malloc</code>ated block alone is not possible. Store the size in seperate variables like <code>Lsize</code> and <code>Rsize</code>.</p>\n\n<hr>\n\n<p>Notes:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">don't cast the result of <code>malloc</code></a></li>\n<li>multiplying by <code>sizeof(char)</code> is redundant as <code>sizeof(char) == 1</code></li>\n<li>use <code>free</code> after <code>malloc</code></li>\n<li>the corresponding format specifier for <code>size_t</code>, a.k.a. \"return type of <code>strlen</code> and the <code>sizeof</code> operator\" is <code>%zu</code>; <code>%d</code> is used on <code>int</code>s<sup>1</sup></li>\n</ul>\n\n<hr>\n\n<p><sub><sup>1</sup> as @chux noted in the comments to this answer</sub></p>\n"}, {"tags": [], "owner": {"reputation": 2016, "user_id": 5141989, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/3dPUW.jpg?s=128&g=1", "display_name": "Mike -- No longer here", "link": "https://stackoverflow.com/users/5141989/mike-no-longer-here"}, "is_accepted": false, "score": 2, "last_activity_date": 1446066313, "creation_date": 1446066313, "answer_id": 33401574, "question_id": 33399074, "link": "https://stackoverflow.com/questions/33399074/why-does-strlen-not-work-on-mallocated-memory/33401574#33401574", "title": "Why does strlen not work on mallocated memory?", "body": "<p>As someone partially mentioned, strlen() converts the input fed to it into the correct memory location then that location is incremented by 1 until the null character is found. The problem with trying to use strlen() on a pointer from a malloc() call is that the data returned at the returned pointer can be anything depending on how your OS handles memory.</p>\n\n<p>If you want your pointers to reference a guaranteed set of null characters when allocating memory, you can use this code:</p>\n\n<pre><code>L = calloc(1,mid+1); \nR = calloc(1,n - mid+1); \n</code></pre>\n\n<p>Then at least when you use strlen(), you'll get a zero.</p>\n\n<p>If you must use malloc(), then you can use this code:</p>\n\n<pre><code>L = malloc(1,mid+1); \nR = malloc(1,n - mid+1); \nmemset(L,0,mid);\nmemset(R,0,n - mid);\n</code></pre>\n\n<p>In both pieces of code, I assumed L and R are declared as <code>char*</code>.</p>\n\n<p>and definitely use <code>free()</code> on all memory allocated with calloc and malloc or you can expect a memory leak which could lead into you restarting your computer.</p>\n\n<p>If you want to put in a fixed number of bytes in memory in a quick way, use this after allocating memory:</p>\n\n<pre><code>memset(L,x,mid);\nmemset(R,x,n - mid);\n</code></pre>\n\n<p>but change x to any value other than zero or it will be null.</p>\n\n<p>Here's a sample program that does more like what you expect:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n\nint main(){\n  int size=10;\n  char* a=calloc(1,100); // allocate 100 null's and store pointer to them at 'a'\n  printf(\"%d \\n\",size); // print wanted size\n  printf(\"%d \\n\",strlen(a)); // print length of memory space which = 0\n  memset(a,'A',size); // put 10 A's at the beginning of allocated memory\n  printf(\"%d \\n\",strlen(a)); // print length again which now = 10\n  printf(\"%s \\n\",a); // print memory (which is 10 A's)\n  free(a); // free the memory\n  return 0; \n}\n</code></pre>\n\n<p>The above compiled fine in my compiler with no warnings even with the compiler options <code>-Wall</code> and <code>-Wextra</code> enabled.</p>\n"}], "owner": {"reputation": 59, "user_id": 5499743, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MuOEP.png?s=128&g=1", "display_name": "White", "link": "https://stackoverflow.com/users/5499743/white"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2007, "favorite_count": 2, "accepted_answer_id": 33399101, "answer_count": 2, "score": -2, "last_activity_date": 1448551653, "creation_date": 1446057647, "last_edit_date": 1446197140, "question_id": 33399074, "link": "https://stackoverflow.com/questions/33399074/why-does-strlen-not-work-on-mallocated-memory", "title": "Why does strlen not work on mallocated memory?", "body": "<p>I wrote the following code:</p>\n\n<pre><code>[all the required initialization]\n\nprintf(\"longueur de mid: %d\\n\",mid);\nprintf(\"longueur de n-mid: %d\\n\",n - mid);\n\nL = (char*) malloc((mid)*sizeof(char)); \nR = (char*) malloc((n - mid)*sizeof(char)); \n\nprintf(\"longueur de L: %d\\n\",strlen(L));\nprintf(\"longueur de R: %d\\n\",strlen(R));\n\n[data treatment and free()]\n</code></pre>\n\n<p>And with the <code>printf</code> I got this result:</p>\n\n<pre><code>longueur de mid: 2\nlongueur de n-mid: 2\nlongueur de L: 3\nlongueur de R: 3\n</code></pre>\n\n<p>Why do the outputs differ?</p>\n"}, {"tags": ["c", "makefile", "kernel-module", "ubuntu-15.04"], "comments": [{"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1446056886, "post_id": 33398815, "comment_id": 54589039, "body": "Read &quot;Linux Device Drivers 3rd Edition.&quot; Great book, also describing the building process in particular. 4th edition coming soon!"}, {"owner": {"reputation": 764, "user_id": 4791682, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lzGgn.png?s=128&g=1", "display_name": "ci7i2en4", "link": "https://stackoverflow.com/users/4791682/ci7i2en4"}, "reply_to_user": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1446057422, "post_id": 33398815, "comment_id": 54589373, "body": "I have read the first few sections but obtaining a mainline kernel (I tried 4.3) and installing it alongside the existing kernel, as the instructions suggest, didn&#39;t solve my problem either. After all the research I&#39;ve done today I believe the error is somehow related to the makefile ..."}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1446057658, "post_id": 33398815, "comment_id": 54589527, "body": "Runs fine for me except no <code>.ko</code> file being produced."}, {"owner": {"reputation": 764, "user_id": 4791682, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lzGgn.png?s=128&g=1", "display_name": "ci7i2en4", "link": "https://stackoverflow.com/users/4791682/ci7i2en4"}, "reply_to_user": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1446057758, "post_id": 33398815, "comment_id": 54589591, "body": "It is supposed to run fine as I copied the codes from the book you mentioned. If it&#39;s working for you, something on your system must be different ..."}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1446058001, "post_id": 33398815, "comment_id": 54589737, "body": "Is &quot;username&quot; really your username? Or did you substitute the real one for the sake of information (un-)disclosure?"}, {"owner": {"reputation": 764, "user_id": 4791682, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lzGgn.png?s=128&g=1", "display_name": "ci7i2en4", "link": "https://stackoverflow.com/users/4791682/ci7i2en4"}, "reply_to_user": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1446058499, "post_id": 33398815, "comment_id": 54590069, "body": "For the sake of trying I installed the mainline kernel 4.3rc7 again and now &quot;make&quot; gives me the following errors: make -C /lib/modules/4.3.0-040300rc7-generic/build M=/home/username/workspace/test/Module modules make[1]: Entering directory &#39;/usr/src/linux-headers-4.3.0-040300rc7-generic&#39; make[1]: Makefile: No such file or directory make[1]: *** No rule to make target &#39;Makefile&#39;.  Stop. make[1]: Leaving directory &#39;/usr/src/linux-headers-4.3.0-040300rc7-generic&#39; makefile:4: recipe for target &#39;all&#39; failed make: *** [all] Error 2"}], "answers": [{"comments": [{"owner": {"reputation": 2732, "user_id": 258065, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a5e0ab01b552291118d6ddd8b5332abb?s=128&d=identicon&r=PG", "display_name": "Theo Belaire", "link": "https://stackoverflow.com/users/258065/theo-belaire"}, "edited": false, "score": 1, "creation_date": 1458362076, "post_id": 33399848, "comment_id": 59839624, "body": "Makefiles require tab characters?"}], "tags": [], "owner": {"reputation": 764, "user_id": 4791682, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lzGgn.png?s=128&g=1", "display_name": "ci7i2en4", "link": "https://stackoverflow.com/users/4791682/ci7i2en4"}, "is_accepted": true, "score": 0, "last_activity_date": 1446061041, "last_edit_date": 1495541233, "creation_date": 1446060293, "answer_id": 33399848, "question_id": 33398815, "link": "https://stackoverflow.com/questions/33398815/ubuntu-15-10-kernel-4-2-hello-world-kernel-module-makefile-error/33399848#33399848", "title": "Ubuntu 15.10 (Kernel 4.2): Hello world kernel module makefile error", "body": "<p>I just changed the name \"makefile\" to \"Makefile\" (upper case M) and that seems to have done something. Now I'm getting:</p>\n\n<p>make -C /lib/modules/4.2.0-16-generic/build M=/home/username/workspace/test/Module modules\nmake[1]: Entering directory '/usr/src/linux-headers-4.2.0-16-generic'\n  Building modules, stage 2.\n  MODPOST 0 modules\nmake[1]: Leaving directory '/usr/src/linux-headers-4.2.0-16-generic'</p>\n\n<p>^^ I knew it from the beginning that somehow my makefile is causing this problem! Be that as it may, I still don't have a hello.ko file. </p>\n\n<h2>Any suggestions what I should try now?</h2>\n\n<p>OMG !!!</p>\n\n<p>Googled this new problem and found this answer from dsf: <a href=\"https://stackoverflow.com/questions/4715259/linux-modpost-does-not-build-anything\">Linux: modpost does not build anything</a> (last posting)</p>\n\n<p>Just as they suggest I typed the text in the Makefile manually and after that, as if by magic, it worked perfectly fine! Now I've got my hello.ko, but, unfortunately, no explanation. Maybe, if you just copy the Makefile text from a pdf/website, you do end up with unwanted characters, as dsf seems to believe?!</p>\n\n<p>Anyway, problem solved.</p>\n"}], "owner": {"reputation": 764, "user_id": 4791682, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lzGgn.png?s=128&g=1", "display_name": "ci7i2en4", "link": "https://stackoverflow.com/users/4791682/ci7i2en4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2717, "favorite_count": 1, "accepted_answer_id": 33399848, "answer_count": 1, "score": 4, "last_activity_date": 1464026735, "creation_date": 1446056784, "last_edit_date": 1446056994, "question_id": 33398815, "link": "https://stackoverflow.com/questions/33398815/ubuntu-15-10-kernel-4-2-hello-world-kernel-module-makefile-error", "title": "Ubuntu 15.10 (Kernel 4.2): Hello world kernel module makefile error", "body": "<p>I have been trying for hours to create my first Hello World Kernel module, alas unsuccessfully. My simple C code (hello.c) and makefile are located in /Downloads on my system, if that should be of any importance.</p>\n\n<p>hello.c</p>\n\n<pre><code>#include &lt;linux/init.h&gt;\n#include &lt;linux/module.h&gt;\n\nMODULE_LICENSE(\"Dual BSD/GPL\");\n\nstatic int hello_init(void) {\n    printk(KERN_ALERT \"Hello, world\\n\");\n    return 0;\n}\n\nstatic void hello_exit(void) {\n    printk(KERN_ALERT \"Goodbye, cruel world\\n\");\n}\n\nmodule_init(hello_init);\nmodule_exit(hello_exit);\n</code></pre>\n\n<p>makefile</p>\n\n<pre><code>obj\u2212m += hello.o\n\nall:\n    make -C /lib/modules/$(shell uname -r)/build M=$(PWD) modules\n\nclean:\n    make -C /lib/modules/$(shell uname -r)/build M=$(PWD) clean\n</code></pre>\n\n<p>And this is the error message I'm receiving when I try to build the kernel module by entering \"make\" (without quotation marks) in the terminal:</p>\n\n<pre><code>make -C /lib/modules/4.2.0-16-generic/build\nM=/home/username/workspace/test/Module modules make[1]:\nEntering directory '/usr/src/linux-headers-4.2.0-16-generic'\nscripts/Makefile.build:44:\n/home/username/workspace/test/Module/Makefile: No such file or\ndirectory make[2]: *** No rule to make target\n'/home/username/workspace/test/Module/Makefile'.  Stop.\nMakefile:1398: recipe for target\n'_module_/home/username/workspace/test/Module' failed make[1]:\n*** [_module_/home/username/workspace/test/Module] Error 2 make[1]: Leaving directory '/usr/src/linux-headers-4.2.0-16-generic'\nmakefile:4: recipe for target 'all' failed make: *** [all] Error 2\n</code></pre>\n\n<p>I have tried pretty much every single solution and have followed every suggestion regarding this problem that can be found on google. Nothing could solve my problem ...\nIf anybody knows anything I could try, I would be very grateful!</p>\n\n<ul>\n<li>Should I move my hello.c and makefile to /usr/src?</li>\n<li>Are there any syntax errors in my files?</li>\n<li>Should it say hello.c instead of hello.o in the makefile?</li>\n<li>Might my Ubuntu be missing something?</li>\n<li>...</li>\n</ul>\n"}, {"tags": ["c++", "c", "casting"], "comments": [{"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 5, "creation_date": 1446056142, "post_id": 33398579, "comment_id": 54588592, "body": "Read about &quot;big endian&quot; and &quot;little endian&quot;."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1446056215, "post_id": 33398579, "comment_id": 54588632, "body": "this code won&#39;t compile. it&#39;s difficult to accurately understand what you&#39;re asking unless you provide code that is syntactically correct. I could make assumptions, but it&#39;s likely i&#39;d be wrong about what you really want to know. It seems to me that you could be asking about either casting a byte to an int32 or reinterpreting a byte array as an integer. the results would be different."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 2, "creation_date": 1446056247, "post_id": 33398579, "comment_id": 54588652, "body": "Please replace the pseudo-code by compilable  code"}, {"owner": {"reputation": 3238, "user_id": 3042438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b930cad6b909cf6546dfe29bdeb8af88?s=128&d=identicon&r=PG&f=1", "display_name": "SunKnight0", "link": "https://stackoverflow.com/users/3042438/sunknight0"}, "edited": false, "score": 0, "creation_date": 1446056274, "post_id": 33398579, "comment_id": 54588670, "body": "I am not sure how much detail you are looking for but as far as bit by bit is concerned the least significant bit of the 4-Byte variable equals the 1-Byte variable while the 3 other bytes are all zero."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446056617, "post_id": 33398579, "comment_id": 54588874, "body": "Do not use homebrew types. <code>stdint.h</code> is exactly meant to provide types with fixed size! Neither <code>char</code> nor <code>int</code> are guaranteed to have a specific bit-width."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 5, "creation_date": 1446056656, "post_id": 33398579, "comment_id": 54588898, "body": "There is no magic here. If <code>uint1</code> has the value 158, the <code>uint4</code> will also have the value 158. And the cast isn&#39;t really needed."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446056766, "post_id": 33398579, "comment_id": 54588969, "body": "This is neither C nor C++. Either add code for one of the langauges, or remove the tags."}, {"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "reply_to_user": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1446060017, "post_id": 33398579, "comment_id": 54590960, "body": "@RichardHodges The title says &quot;casting&quot;, and there are no pointers in the pseudocode. It looks to me like the only &quot;pseudo&quot; part of the pseudocode is the indications of specific bit-values within bytes, which of course <i>can&#39;t</i> be represented directly in C/C++ code (er... sorry, yes, C++14 <i>does</i> support this, actually)."}, {"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 0, "creation_date": 1446060240, "post_id": 33398579, "comment_id": 54591092, "body": "@DieterL&#252;cking In C, AFAIK, there&#39;s no direct way to represent the bits in a primitive, and the <code>0b#####</code> comment added by Jarod42 is only supported as a literal int representation in C++14."}, {"owner": {"reputation": 135, "user_id": 4555796, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh5.googleusercontent.com/-5dYOyRrZkWY/AAAAAAAAAAI/AAAAAAAAAN4/Pwq1lUTEuhw/photo.jpg?sz=128", "display_name": "tbol", "link": "https://stackoverflow.com/users/4555796/tbol"}, "edited": false, "score": 0, "creation_date": 1446060610, "post_id": 33398579, "comment_id": 54591313, "body": "@all as you can see here: [link]<a href=\"http://www.zedwood.com/article/cpp-md5-function\" rel=\"nofollow noreferrer\">zedwood.com/article/cpp-md5-function</a> in the MD5 class method decode there is used a cast:"}, {"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 0, "creation_date": 1446140721, "post_id": 33398579, "comment_id": 54631837, "body": "@tbol ...why do you need to understand what happens at the <i>bit level</i> in order to re-implement that function? The point of a &quot;high level&quot; language such as C or C++ (with scare-quotes because these are pretty low-level languages) is to allow you to think and code at the <i>logical level</i> so that the compiler can take care of the bits."}], "answers": [{"tags": [], "owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "is_accepted": false, "score": 6, "last_activity_date": 1446056145, "creation_date": 1446056145, "answer_id": 33398611, "question_id": 33398579, "link": "https://stackoverflow.com/questions/33398579/what-happens-in-detail-when-casting-1byte-data-into-4byte/33398611#33398611", "title": "What happens in detail when casting 1Byte data into 4Byte", "body": "<p>The numeric value remains the same, so zeroes are added to the \"logical\" left. Where that happens in the underlying bytes that make up the 4-byte integer depends on the endianness of the platform. </p>\n"}, {"comments": [{"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 0, "creation_date": 1446060267, "post_id": 33398853, "comment_id": 54591111, "body": "I don&#39;t really see how this answers the question."}], "tags": [], "owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "is_accepted": false, "score": 0, "last_activity_date": 1446056910, "creation_date": 1446056910, "answer_id": 33398853, "question_id": 33398579, "link": "https://stackoverflow.com/questions/33398579/what-happens-in-detail-when-casting-1byte-data-into-4byte/33398853#33398853", "title": "What happens in detail when casting 1Byte data into 4Byte", "body": "<p>For completeness:</p>\n\n<blockquote>\n  <p>So what happens [...] when casting [..] a unsigned char into an unsigned int?</p>\n</blockquote>\n\n<p>C11 Standard (draft):</p>\n\n<blockquote>\n  <p><strong>6.5.4 Cast Operators</strong></p>\n  \n  <p>[...]</p>\n  \n  <p><strong>Semantics</strong></p>\n  \n  <p><strong>5</strong> Preceding an expression by a parenthesized type name converts the value of the expression to the named type. This construction is called a <em>cast</em>.</p>\n</blockquote>\n\n<p>and</p>\n\n<blockquote>\n  <p><strong>6.5.16.1 Simple assignment</strong></p>\n  \n  <p>[...]</p>\n  \n  <p><strong>Semantics</strong></p>\n  \n  <p><strong>2</strong> In <em>simple assignment</em> (=), the value of the right operand is converted to the type of the\n  assignment expression and replaces the value stored in the object designated by the left\n  operand.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 0, "creation_date": 1446136599, "post_id": 33411503, "comment_id": 54629156, "body": "Writing some code to figure out the <i>actual behavior</i> is an awesome thing to do; props. But note that as pointed out in Matteo Italia, the actual underlying byte-order will be different depending on whether your system (or your marshaling infrastructure, or whatever) is big-endian or little-endian. (Typically this won&#39;t matter within a program; it&#39;s mostly important to consider when transferring data between programs, since data is typically transmitted one byte at a time, so ints and other data must be re-assembled from individual bytes.)"}, {"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 0, "creation_date": 1446136683, "post_id": 33411503, "comment_id": 54629214, "body": "Also, note that if you&#39;re using a <i>signed</i> value, then, assuming your platform uses a 2&#39;s-complement representation, the padding values (the 3 bytes of 0&#39;s in your 32-bit value) will be 1&#39;s rather than 0&#39;s (to preserve the sign)."}], "tags": [], "owner": {"reputation": 135, "user_id": 4555796, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh5.googleusercontent.com/-5dYOyRrZkWY/AAAAAAAAAAI/AAAAAAAAAN4/Pwq1lUTEuhw/photo.jpg?sz=128", "display_name": "tbol", "link": "https://stackoverflow.com/users/4555796/tbol"}, "is_accepted": true, "score": 1, "last_activity_date": 1446113944, "creation_date": 1446113944, "answer_id": 33411503, "question_id": 33398579, "link": "https://stackoverflow.com/questions/33398579/what-happens-in-detail-when-casting-1byte-data-into-4byte/33411503#33411503", "title": "What happens in detail when casting 1Byte data into 4Byte", "body": "<p>Finally I got the answer. Look at this little snippet:</p>\n\n<pre><code>typedef unsigned char uint1;    // 1 Byte ( 8 Bit)\ntypedef unsigned int uint4;     // 4 Byte (32 Bit)\n\nuint1 test=10;\nuint4 test2=(uint4)test;\n\n\ncout &lt;&lt; sizeof(uint1)*8 &lt;&lt; \" Bit-\" &lt;&lt; \"Variable (test): \";\n\nfor (int i=0; i&lt;sizeof(test)*8; i++) {\n    if ((test &lt;&lt; i) &amp; 0x80)\n        cout &lt;&lt; 1;\n    else\n        cout &lt;&lt; 0;\n}\ncout &lt;&lt; endl;\ncout &lt;&lt; sizeof(uint4)*8 &lt;&lt; \" Bit-\" &lt;&lt; \"Variable (test2): \";\n\nfor (int i=0; i&lt;sizeof(test2)*8; i++) {\n    if ((test &lt;&lt; i) &amp; 0x80000000)\n        cout &lt;&lt; 1;\n    else\n        cout &lt;&lt; 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<p>8 Bit-Variable (test): 00001010</p>\n\n<p>32 Bit-Variable (test): 00000000 00000000 00000000 00001010</p>\n"}], "owner": {"reputation": 135, "user_id": 4555796, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh5.googleusercontent.com/-5dYOyRrZkWY/AAAAAAAAAAI/AAAAAAAAAN4/Pwq1lUTEuhw/photo.jpg?sz=128", "display_name": "tbol", "link": "https://stackoverflow.com/users/4555796/tbol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 1, "accepted_answer_id": 33411503, "answer_count": 3, "score": 2, "last_activity_date": 1446113944, "creation_date": 1446056019, "last_edit_date": 1446056747, "question_id": 33398579, "link": "https://stackoverflow.com/questions/33398579/what-happens-in-detail-when-casting-1byte-data-into-4byte", "title": "What happens in detail when casting 1Byte data into 4Byte", "body": "<p>I'm trying to implement MD5 Algorithm according to RFC1321 in C/C++ and have some trouble with type conversion.</p>\n\n<pre><code>typedef unsigned int uint4;  // 32 Bit (4 Byte)\ntypedef unsigned char uint1; //  8 Bit (1 Byte)\n\n// pseudocode\nuint1 byte = {1,0,0,1,1,1,1,0}; // 0b10011110\nuint4 t_uint4 = (uint4)byte;\n\nuint4 = { ??? }\n\n// maybe like this??\nuint4 = { {1,0,0,1,1,1,1,0},{???},{???},{???} }\nuint4 = { {???},{???},{???},{1,0,0,1,1,1,1,0} }\n</code></pre>\n\n<p>So what happens in detail when casting a 1Byte variable into a 4Byte variable, respectively a unsigned char into an unsigned int?</p>\n"}, {"tags": ["c", "windows", "mingw", "configure", "pgbouncer"], "comments": [{"owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 2, "creation_date": 1446109211, "post_id": 33398574, "comment_id": 54610011, "body": "Never copy random dll&#39;s to <code>C:\\Windows</code>. That&#39;s terrible in all ways possible."}, {"owner": {"reputation": 257364, "user_id": 398670, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/85f50c23bb5e9dfb061af5032bfe8e65?s=128&d=identicon&r=PG", "display_name": "Craig Ringer", "link": "https://stackoverflow.com/users/398670/craig-ringer"}, "edited": false, "score": 0, "creation_date": 1446109987, "post_id": 33398574, "comment_id": 54610502, "body": "For Windows, if at all possible find prebuilt binaries. For Linux, install pgbouncer from packages; see apt.postgresql.org and yum.postgresql.org"}], "answers": [{"comments": [{"owner": {"reputation": 1836, "user_id": 895477, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/5cff4b8acfbc9155157371cef9db4104?s=128&d=identicon&r=PG", "display_name": "brevleq", "link": "https://stackoverflow.com/users/895477/brevleq"}, "edited": false, "score": 0, "creation_date": 1446118694, "post_id": 33409761, "comment_id": 54616124, "body": "Thank you. I&#39;ve added prefix and reinstalled libevent in windows. Then used that in --with-libevent."}], "tags": [], "owner": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "is_accepted": true, "score": 4, "last_activity_date": 1446110366, "last_edit_date": 1446110366, "creation_date": 1446109133, "answer_id": 33409761, "question_id": 33398574, "link": "https://stackoverflow.com/questions/33398574/cant-compile-pgbouncer-neither-in-linux-nor-in-windows/33409761#33409761", "title": "Can&#39;t compile pgbouncer neither in linux nor in windows", "body": "<p><code>configure</code> is checking whether it will be possible for the package build\nto link <code>libevent</code>. For that it needs see that <code>libevent</code> <em>development</em>\ndependencies are satisfied. It checks not only that <code>libevent</code> itself can be found\nfor linkage but that the header <code>&lt;event.h&gt;</code> (exactly like that) can be\nfound for compilation.</p>\n\n<p>For <code>configure</code> to succeed you must make sure that:-</p>\n\n<ul>\n<li><p><code>event.h</code> from your <code>libevent</code> package will be found in the default or\nconfigured include-search paths of the compiler.</p></li>\n<li><p>The <code>libevent</code> binary will be found in the default or configured library-search\npaths of the linker.</p></li>\n</ul>\n\n<p>Near the top of the <a href=\"http://pgbouncer.github.io/install.html\" rel=\"nofollow\">HowTo</a> that you\nhave referred to you will see that <code>configure</code> accepts a parameter\n<code>--with-libevent=libevent-prefix</code> that can make this easy. <code>./configure --help</code>\nsays:</p>\n\n<pre><code>--with-libevent=prefix  Specify where libevent is installed\n</code></pre>\n\n<p>For your ubuntu system the short answer would be: install <code>libevent-dev</code> from\nthe package manager. In Ubuntu you could also install <code>pgbouncer</code> from\nthe package manager, but perhaps you want the latest version.</p>\n"}, {"comments": [{"owner": {"reputation": 1679, "user_id": 5536006, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-w_ThV1XwSRk/AAAAAAAAAAI/AAAAAAAAADA/UlccMsLP3uY/photo.jpg?sz=128", "display_name": "FranzHuber23", "link": "https://stackoverflow.com/users/5536006/franzhuber23"}, "edited": false, "score": 0, "creation_date": 1584612111, "post_id": 53435559, "comment_id": 107491439, "body": "Thanks. This saved my day \u23f3\ufe0f\ud83d\udc4d"}], "tags": [], "owner": {"reputation": 121, "user_id": 9074790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/680cf8e0003595e425ca2c6dbe51190c?s=128&d=identicon&r=PG&f=1", "display_name": "Rogerlr", "link": "https://stackoverflow.com/users/9074790/rogerlr"}, "is_accepted": false, "score": 2, "last_activity_date": 1542906240, "creation_date": 1542906240, "answer_id": 53435559, "question_id": 33398574, "link": "https://stackoverflow.com/questions/33398574/cant-compile-pgbouncer-neither-in-linux-nor-in-windows/53435559#53435559", "title": "Can&#39;t compile pgbouncer neither in linux nor in windows", "body": "<p>You need to install libevent-devel, that supplies 2 event.h files:</p>\n\n<pre><code># find / -name event.h 2&gt;/dev/null \n/usr/include/event.h\n/usr/include/event2/event.h\n</code></pre>\n\n<p>To install run:</p>\n\n<pre><code>yum install libevent-devel.x86_64\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1679, "user_id": 5536006, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-w_ThV1XwSRk/AAAAAAAAAAI/AAAAAAAAADA/UlccMsLP3uY/photo.jpg?sz=128", "display_name": "FranzHuber23", "link": "https://stackoverflow.com/users/5536006/franzhuber23"}, "is_accepted": false, "score": 0, "last_activity_date": 1584613213, "creation_date": 1584613213, "answer_id": 60755099, "question_id": 33398574, "link": "https://stackoverflow.com/questions/33398574/cant-compile-pgbouncer-neither-in-linux-nor-in-windows/60755099#60755099", "title": "Can&#39;t compile pgbouncer neither in linux nor in windows", "body": "<p>If you want to compile pgBouncer for Windows, follow my instructions under <a href=\"https://sepppenner.github.io/PgBouncerWinBinaries/\" rel=\"nofollow noreferrer\">https://sepppenner.github.io/PgBouncerWinBinaries/</a> or <a href=\"https://github.com/SeppPenner/PgBouncerWinBinaries\" rel=\"nofollow noreferrer\">https://github.com/SeppPenner/PgBouncerWinBinaries</a>.</p>\n"}], "owner": {"reputation": 1836, "user_id": 895477, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/5cff4b8acfbc9155157371cef9db4104?s=128&d=identicon&r=PG", "display_name": "brevleq", "link": "https://stackoverflow.com/users/895477/brevleq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1399, "favorite_count": 2, "accepted_answer_id": 33409761, "answer_count": 3, "score": 3, "last_activity_date": 1584613213, "creation_date": 1446056000, "last_edit_date": 1446105673, "question_id": 33398574, "link": "https://stackoverflow.com/questions/33398574/cant-compile-pgbouncer-neither-in-linux-nor-in-windows", "title": "Can&#39;t compile pgbouncer neither in linux nor in windows", "body": "<p>I'm trying compile pgbouncer to use in a PostgreSQL server running in windows server 2008. However I simply can't compile the dll, and the same error appears in linux (ubuntu) and in windows:</p>\n\n<blockquote>\n  <p>checking for libevent... configure: error: not found: cannot proceed</p>\n</blockquote>\n\n<p>I'm following <a href=\"http://pgbouncer.github.io/install.html\" rel=\"nofollow\">this howto</a>. I've compiled the <strong>libevent</strong> in windows using <strong>mingw</strong> and copied the dlls generated to System32, SysWOW64 and even in own pgbouncer directory. What am I doing wrong?</p>\n"}, {"tags": ["c", "pointers", "assembly", "segmentation-fault", "cpu-registers"], "comments": [{"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 2, "creation_date": 1446055602, "post_id": 33398404, "comment_id": 54588254, "body": "Storing an arbitrary value into <code>esp</code> seems bad. Segfault-ily bad."}, {"owner": {"reputation": 121, "user_id": 4820394, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/972493956103073/picture?type=large", "display_name": "Pedro Gon&#231;alves", "link": "https://stackoverflow.com/users/4820394/pedro-gon%c3%a7alves"}, "reply_to_user": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1446056285, "post_id": 33398404, "comment_id": 54588674, "body": "I changed it to ebx and now it works. I still get the Segmentation-fault error but it prints the correct values."}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1446056505, "post_id": 33398404, "comment_id": 54588811, "body": "Add a <code>pusha</code> and <code>popa</code> to the start and end of your function, respectively. This will store the GPRs&#39; values on the stack. If they aren&#39;t captured, the compiler will have no idea about the registers being modified and will produce bad code. Best would be to use <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Extended-Asm.html\" rel=\"nofollow noreferrer\">Extended Assembly</a> anyway. Still, <b>do not</b> change <code>esp</code>&#39;s value."}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1446056771, "post_id": 33398404, "comment_id": 54588977, "body": "You don&#39;t need to include <code>asm.h</code> into your linking process. Let the preprocessor do that."}, {"owner": {"reputation": 2405, "user_id": 2216129, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/U0xqx.jpg?s=128&g=1", "display_name": "Topological Sort", "link": "https://stackoverflow.com/users/2216129/topological-sort"}, "edited": false, "score": 0, "creation_date": 1446060875, "post_id": 33398404, "comment_id": 54591490, "body": "asm.h isn&#39;t included in the link, but it is listed as something that, if it changes, requires a rebuild of main.o."}], "owner": {"reputation": 121, "user_id": 4820394, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/972493956103073/picture?type=large", "display_name": "Pedro Gon&#231;alves", "link": "https://stackoverflow.com/users/4820394/pedro-gon%c3%a7alves"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1446060341, "creation_date": 1446055455, "last_edit_date": 1446060341, "question_id": 33398404, "link": "https://stackoverflow.com/questions/33398404/assembly-segmentation-fault", "title": "Assembly segmentation-fault", "body": "<p>So, I have this program that is meant to do the following: with 3 Arrays, copy the values of the first Array that are not present in the second one to the third.\nThe problem is that I keep getting the \"Segmentation Fault\" error when I try to compile it, and when I use gdb the program works fine. </p>\n\n<p>Main:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include \"asm.h\"\n\nshort int *ptrvec1;\nshort int *ptrvec2;\nint *ptrvec3;\nint numElem = 1;\n\nint\nmain(void)\n{\n\n    short int vec1[2] = { 1, 3 };\n    short int vec2[2] = { 1, 5 };\n    int vec3[5];\n\n    ptrvec1 = vec1;             //vetor1 apontado por ptrvec1\n    ptrvec2 = vec2;             //vetor2 apontado por ptrvec2\n    ptrvec3 = vec3;             //vetor3 apontado por ptrvec3\n\n    int numElementos;\n\n    numElementos = diferentes();\n\n    printf(\"\\nNumber of elements:  %i\\n\", numElementos);\n\n    int i = 0;\n    for (i = 0; i &lt; 5; i++) {\n        printf(\"%i\\n\", vec1[i]);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Asm.s</p>\n\n<pre><code>.global ptrvec1\n.global ptrvec2\n.global ptrvec3\n.global numElem\n.global diferentes\n\ndiferentes:\n    mov ptrvec1, %esi\n    mov ptrvec2, %edi\n    mov ptrvec3, %esp\n\n    movl $0, %ebp           #contador1 = 0\n    movl $0, %edx           #contador2 = 0\n    mov $0, %cx\n    #movl $0, %ebx\n    mov $0, %eax            #limpa registo de eax\n\nciclo1:\n    movw (%esi), %cx\n    cmp %cx, (%edi)\n    jne verificar1\n\n    mov $0, %cx\n    incl %ebp\n    add $2, %esi\n    movl $0, %edx           #contador2 = 0  \n    jmp ciclo1\n\nverificar1: \n    cmp numElem, %edx\n    je adicionar_vetor3\n\n    incl %edx\n    add $2, %edi\n    mov $0, %cx\n\n    jmp ciclo1\n\nadicionar_vetor3:\n    mov $0, %cx\n    movl $0, %edx           #contador2 = 0\n    mov (%esi), %cx\n    mov %cx, (%esp)\n    add $4, %esp\n\n    incl %eax\n    cmp numElem, %ebp\n    je fim\n\n    incl %ebp\n    jmp ciclo1\n\nfim:\n    ret\n</code></pre>\n\n<p>Make file (I think he's fine, but doesn't hurt to drop it here)</p>\n\n<pre><code>main: main.o asm.o\n    gcc -Wall -g main.o asm.o -o main\n\nmain.o: main.c asm.h\n    gcc -Wall -g -c main.c\n\nasm.o: asm.s\n    gcc -Wall -g -c asm.s\n\nrun: main\n    ./main\n\nclean:\n    rm *.o main\n</code></pre>\n"}, {"tags": ["c", "sse", "simd", "gaussian"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 1, "creation_date": 1446055116, "post_id": 33397972, "comment_id": 54587963, "body": "Lots of fundamental mistakes in your initial attempt - maybe try something simpler first, in order to learn the basics of SIMD coding?"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 2, "creation_date": 1446060117, "post_id": 33397972, "comment_id": 54591018, "body": "The x86 tag wiki (<a href=\"http://stackoverflow.com/tags/x86/info\">stackoverflow.com/tags/x86/info</a>) has links.  If you find a good intro/overview/getting-started guide, please edit the link into the wiki, or leave a comment here and I&#39;ll check it out.  Most of the links are to reference material that&#39;s useful when you know the basics, but have to look up which instruction does exactly what, and what&#39;s available."}, {"owner": {"reputation": 47, "user_id": 5499403, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7be07720ea969cdfff5adbf6d2d05826?s=128&d=identicon&r=PG", "display_name": "eager_coder", "link": "https://stackoverflow.com/users/5499403/eager-coder"}, "edited": false, "score": 0, "creation_date": 1446072669, "post_id": 33397972, "comment_id": 54597323, "body": "Yeah I see the mistake. Thanks for the links."}, {"owner": {"reputation": 47, "user_id": 5499403, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7be07720ea969cdfff5adbf6d2d05826?s=128&d=identicon&r=PG", "display_name": "eager_coder", "link": "https://stackoverflow.com/users/5499403/eager-coder"}, "edited": false, "score": 0, "creation_date": 1446074589, "post_id": 33397972, "comment_id": 54598118, "body": "Oh I&#39;m sorry. Yes the matrices are square of size num_elements. I am supposed to use it as a flattened 2D array and like Paul said, the objective is to learn SIMD. Thanks. I&#39;ll try to build on that"}, {"owner": {"reputation": 47, "user_id": 5499403, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7be07720ea969cdfff5adbf6d2d05826?s=128&d=identicon&r=PG", "display_name": "eager_coder", "link": "https://stackoverflow.com/users/5499403/eager-coder"}, "edited": false, "score": 0, "creation_date": 1446074739, "post_id": 33397972, "comment_id": 54598174, "body": "So I will have to use the 128 bit register just as a temporary variable while copying data instead of using them to store the matrices themselves?"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1446110608, "post_id": 33397972, "comment_id": 54610873, "body": "Try not to fixate on the XMM registers themselves - just think in terms of <code>__m128i</code> <i>variables</i>. This works much the same as with e.g. <code>int</code> variables and general purpose registers - the compiler takes care of which variables reside in registers at any given time - this relieves you, the programmer, from the task of thinking about low-level house-keeping details."}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 2, "creation_date": 1446121400, "post_id": 33397972, "comment_id": 54617941, "body": "@PeterCordes, the links and description for the x86 tag is awesome! That&#39;s a great resource."}, {"owner": {"reputation": 47, "user_id": 5499403, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7be07720ea969cdfff5adbf6d2d05826?s=128&d=identicon&r=PG", "display_name": "eager_coder", "link": "https://stackoverflow.com/users/5499403/eager-coder"}, "reply_to_user": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1446153517, "post_id": 33397972, "comment_id": 54638672, "body": "@PaulR I&#39;ve updated the code. Something is causing a segmentation fault. I commented out each line in the function to find out which line is causing the error but came up with nothing. None of the printf() statements I tried giving printed anything."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1446155961, "post_id": 33397972, "comment_id": 54639788, "body": "Change all your <code>_mm_load_ps</code> intrinsics to <code>_mm_loadu_ps</code> ."}, {"owner": {"reputation": 47, "user_id": 5499403, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7be07720ea969cdfff5adbf6d2d05826?s=128&d=identicon&r=PG", "display_name": "eager_coder", "link": "https://stackoverflow.com/users/5499403/eager-coder"}, "reply_to_user": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1446342149, "post_id": 33397972, "comment_id": 54703365, "body": "@PaulR I tried doing that. It still doesn&#39;t work."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1446364837, "post_id": 33397972, "comment_id": 54706636, "body": "Rather than keep editing fixes into the question, it would probably be better at this point to post a new question, with the latest version of your <i>actual code</i> (the above code doesn&#39;t even compile), preferably as a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, and explain what the remaining problems are (i.e. expected output versus actual output)."}], "answers": [{"comments": [{"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1446055445, "post_id": 33398353, "comment_id": 54588149, "body": "If he store the matrix in a single array, why the nested loop?"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "reply_to_user": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 1, "creation_date": 1446055552, "post_id": 33398353, "comment_id": 54588227, "body": "@Bob__: well why not ? ;-) It&#39;s probably a &quot;flattened&quot; 2D array, and of course he could just as well use <code>memcpy</code> in this instance, but since the objective is to learn SIMD coding for matrices it makes more sense to use two nested loops for this example."}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1446055661, "post_id": 33398353, "comment_id": 54588278, "body": "That&#39;s ok, but his original code is wrong too. Check the boundaries of the loop. Shouldn&#39;t be something like <code>for (i = 0; i &lt; num_elements; i ++)          U[i] = A[i];</code>"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "reply_to_user": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1446055778, "post_id": 33398353, "comment_id": 54588354, "body": "@Bob__: I&#39;m guessing the matrices are square, of size <code>num_elements</code> x <code>num_elements</code> (except they are flattened) - if the OP can clarify (and fix their scalar code if necessary) then I&#39;ll update my answer accordingly."}], "tags": [], "owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "is_accepted": false, "score": 2, "last_activity_date": 1446055808, "last_edit_date": 1446055808, "creation_date": 1446055287, "answer_id": 33398353, "question_id": 33397972, "link": "https://stackoverflow.com/questions/33397972/sse-memory-access/33398353#33398353", "title": "SSE memory access", "body": "<p>In order to get you started, your first loop should be more like this:</p>\n\n<pre><code>for (i = 0; i &lt; num_elements; i++)\n{\n    for (j = 0; j &lt; num_elements; j += 4)\n    {\n        int index = num_elements * i + j;\n        __m128i v = _mm_loadu_ps((__m128i *)&amp;A[index]); // load 4 x floats\n        _mm_storeu_ps((__m128i *)&amp;U[index], v);         // store 4 x floats\n    }\n}\n</code></pre>\n\n<p>This assumes that <code>num_elements</code> is a multiple of 4, and that neither <code>A</code> nor <code>U</code> is correctly aligned. </p>\n"}], "owner": {"reputation": 47, "user_id": 5499403, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7be07720ea969cdfff5adbf6d2d05826?s=128&d=identicon&r=PG", "display_name": "eager_coder", "link": "https://stackoverflow.com/users/5499403/eager-coder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 326, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1446228232, "creation_date": 1446054103, "last_edit_date": 1446228232, "question_id": 33397972, "link": "https://stackoverflow.com/questions/33397972/sse-memory-access", "title": "SSE memory access", "body": "<p>I need to perform Gaussian Elimination using SSE and I am not sure how to access each element(32 bits) from the 128 bit registers(each storing 4 elements). This is the original code(without using SSE):</p>\n\n<pre><code>unsigned int i, j, k;\n\nfor (i = 0; i &lt; num_elements; i ++)             /* Copy the contents of the A matrix into the U matrix. */\n    for(j = 0; j &lt; num_elements; j++)\n        U[num_elements * i + j] = A[num_elements*i + j];\n\n\nfor (k = 0; k &lt; num_elements; k++){             /* Perform Gaussian elimination in place on the U matrix. */\n    for (j = (k + 1); j &lt; num_elements; j++){   /* Reduce the current row. */\n\n        if (U[num_elements*k + k] == 0){\n            printf(\"Numerical instability detected. The principal diagonal element is zero. \\n\");\n            return 0;\n        }\n\n        /* Division step. */\n        U[num_elements * k + j] = (float)(U[num_elements * k + j] / U[num_elements * k + k]);\n    }\n\n    U[num_elements * k + k] = 1;             /* Set the principal diagonal entry in U to be 1. */\n\n    for (i = (k+1); i &lt; num_elements; i++){\n        for (j = (k+1); j &lt; num_elements; j++)\n            /* Elimnation step. */\n            U[num_elements * i + j] = U[num_elements * i + j] -\\\n                                      (U[num_elements * i + k] * U[num_elements * k + j]);\n\n        U[num_elements * i + k] = 0; \n    } \n}\n</code></pre>\n\n<p>Okay I'm getting segmentation fault[core dumped] with this code. I'm new to SSE. Can someone help? Thanks.</p>\n\n<pre><code> int i,j,k;\n __m128 a_i,b_i,c_i,d_i;\n\nfor (i = 0; i &lt; num_rows; i++)\n{\nfor (j = 0; j &lt; num_rows; j += 4)\n{\n    int index = num_rows * i + j;\n   __m128 v = _mm_loadu_ps(&amp;A[index]); // load 4 x floats\n   _mm_storeu_ps(&amp;U[index], v);         // store 4 x floats\n\n}\n}\nfor (k = 0; k &lt; num_rows; k++){  \n\n a_i= _mm_load_ss(&amp;U[num_rows*k+k]);         \n\n\n    for (j = (4*k + 1); j &lt; num_rows; j+=4){\n               b_i= _mm_loadu_ps(&amp;U[num_rows*k+j]);// Reduce the currentrow. \n\n    if (U[num_rows*k+k] == 0){\n    printf(\"Numerical instability detected.);\n\n        }\n\n        /* Division step. */\n        b_i =    _mm_div_ps(b_i, a_i);\n  }\n\n    a_i = _mm_set_ss(1);           \n\n    for (i = (k+1); i &lt; num_rows; i++){\n  d_i= _mm_load_ss(&amp;U[num_rows*i+k]);\n        for (j = (4*k+1); j &lt; num_rows; j+=4){\n           c_i= _mm_loadu_ps(&amp;U[num_rows*i+j]); /* Elimnation step. */\n        b_i= _mm_loadu_ps(&amp;U[num_rows*k+j]);    \n            c_i = _mm_sub_ps(c_i, _mm_mul_ss(b_i,d_i));\n        }\n       d_i= _mm_set_ss(0); \n    } \n  }\n</code></pre>\n"}, {"tags": ["c", "gcc"], "comments": [{"owner": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "edited": false, "score": 0, "creation_date": 1446054095, "post_id": 33397850, "comment_id": 54587294, "body": "I suspect that because since <code>phy_cb</code> and <code>frm_cb</code> are declared as weak in both <code>phy.c</code> and <code>frm.c</code>, the linker picks an arbitrary one. Make one of them strong (you might have to add a <code>#define</code> to control whether to add the weak symbol annotation depending on where the file is included from)."}, {"owner": {"reputation": 16571, "user_id": 2180189, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0de29e70b63441baf6a99393f7ff2027?s=128&d=identicon&r=PG", "display_name": "MightyPork", "link": "https://stackoverflow.com/users/2180189/mightypork"}, "reply_to_user": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "edited": false, "score": 0, "creation_date": 1446054368, "post_id": 33397850, "comment_id": 54587478, "body": "Ah. Well, that worked. Ugly code, but works fine."}], "answers": [{"comments": [{"owner": {"reputation": 16571, "user_id": 2180189, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0de29e70b63441baf6a99393f7ff2027?s=128&d=identicon&r=PG", "display_name": "MightyPork", "link": "https://stackoverflow.com/users/2180189/mightypork"}, "edited": false, "score": 0, "creation_date": 1458162603, "post_id": 36003276, "comment_id": 59742547, "body": "yes I know that now, you&#39;re only about a year late :PP but have the points if you want &#39;em, good answer"}, {"owner": {"reputation": 1768, "user_id": 525743, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/LvfmE.png?s=128&g=1", "display_name": "austinmarton", "link": "https://stackoverflow.com/users/525743/austinmarton"}, "reply_to_user": {"reputation": 16571, "user_id": 2180189, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0de29e70b63441baf6a99393f7ff2027?s=128&d=identicon&r=PG", "display_name": "MightyPork", "link": "https://stackoverflow.com/users/2180189/mightypork"}, "edited": false, "score": 0, "creation_date": 1458165884, "post_id": 36003276, "comment_id": 59744165, "body": "@MightyPork cheers, wish I had known this a few weeks ago when I had a similar problem!"}], "tags": [], "owner": {"reputation": 1768, "user_id": 525743, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/LvfmE.png?s=128&g=1", "display_name": "austinmarton", "link": "https://stackoverflow.com/users/525743/austinmarton"}, "is_accepted": true, "score": 1, "last_activity_date": 1458019924, "last_edit_date": 1458019924, "creation_date": 1458019540, "answer_id": 36003276, "question_id": 33397850, "link": "https://stackoverflow.com/questions/33397850/attribute-weak-not-working-with-multiple-object-files/36003276#36003276", "title": "__attribute__((weak)) not working with multiple object files", "body": "<p>You should be applying <code>__attribute__((weak))</code> to the implementations, not the prototypes:</p>\n\n<p><strong>phy.h</strong></p>\n\n<pre><code>#pragma once\n\nvoid phyStuff(void);\n\n// new callback for higher layer\nvoid phy_cb();\n</code></pre>\n\n<p><strong>phy.c</strong></p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include \"phy.h\"\n\n// Callback, weak\n__attribute__((weak)) void phy_cb() {\n    printf(\"phy_cb, default implementation. BAD!!!\\n\");\n}    \n\nvoid phyStuff(void) {\n    printf(\"PHY stuff. Running phy_cb.\\n\");\n    phy_cb();\n}\n</code></pre>\n\n<p><strong>frm.h</strong></p>\n\n<pre><code>#pragma once\n#include \"phy.h\"\n\nvoid frmStuff(void);\n\n// new callback for higher layer\nvoid frm_cb();\n</code></pre>\n\n<p><strong>frm.c</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;    \n#include \"phy.h\"\n#include \"frm.h\"\n\n// implement the callback\nvoid phy_cb() {\n    printf(\"phy_cb, FRM implementation. GOOD\\n\");\n}    \n\n// Callback, weak\n__attribute__((weak)) void frm_cb() {\n    printf(\"frm_cb, default implementation. BAD!!!\\n\");\n}    \n\nvoid frmStuff(void) {\n    printf(\"FRM stuff. Running frm_cb\\n\");\n    frm_cb();\n}\n</code></pre>\n\n<p><strong>main.c</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#include \"frm.h\"\n#include \"phy.h\"\n\nvoid frm_cb() {\n    printf(\"frm_cb, APP implementation. GOOD\\n\");\n}\n\nvoid main(void) {\n    printf(\"Main.\\n\");\n\n    phyStuff();\n    frmStuff();\n}\n</code></pre>\n\n<p>Now we get the desired result:</p>\n\n<pre><code>$ gcc main.c phy.c frm.c\n$ ./a.out \nMain.\nPHY stuff. Running phy_cb.\nphy_cb, FRM implementation. GOOD\nFRM stuff. Running frm_cb\nfrm_cb, APP implementation. GOOD\n</code></pre>\n\n<p>To better see what's happening, try compiling the source files separately and looking at the symbols in each object:</p>\n\n<pre><code>$ gcc phy.c -o phy.o -c\n$ gcc frm.c -o frm.o -c\n$ gcc main.c phy.o frm.o\n$ nm phy.o | grep _cb\n0000000000000000 W phy_cb\n$ nm frm.o | grep _cb\n0000000000000010 W frm_cb\n0000000000000000 T phy_cb\n$ nm a.out | grep _cb\n000000000040052d T frm_cb\n0000000000400581 T phy_cb\n</code></pre>\n\n<p>The 'W' from <code>nm</code> indicates it is a <em>weak</em> symbol.</p>\n"}], "owner": {"reputation": 16571, "user_id": 2180189, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0de29e70b63441baf6a99393f7ff2027?s=128&d=identicon&r=PG", "display_name": "MightyPork", "link": "https://stackoverflow.com/users/2180189/mightypork"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 274, "favorite_count": 0, "accepted_answer_id": 36003276, "answer_count": 1, "score": 1, "last_activity_date": 1458019924, "creation_date": 1446053818, "question_id": 33397850, "link": "https://stackoverflow.com/questions/33397850/attribute-weak-not-working-with-multiple-object-files", "title": "__attribute__((weak)) not working with multiple object files", "body": "<p>I probably understand something wrong about weak:</p>\n\n<p>My situation:</p>\n\n<ol>\n<li>\"Physical layer\" with some WEAK callbacks</li>\n<li>\"Framing layer\" that implements those callbacks, and provides new WEAK callbacks for the application layer</li>\n<li>Main - application layer.</li>\n</ol>\n\n<p><strong>phy.h</strong></p>\n\n<pre><code>#pragma once\n\nvoid phyStuff(void);\n\n// new callback for higher layer\nvoid __attribute__((weak)) phy_cb();\n</code></pre>\n\n<p><strong>phy.c</strong></p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include \"phy.h\"\n\n// Callback, weak\nvoid phy_cb() {\n    printf(\"phy_cb, default implementation. BAD!!!\\n\");\n}    \n\nvoid phyStuff(void) {\n    printf(\"PHY stuff. Running phy_cb.\\n\");\n    phy_cb();\n}\n</code></pre>\n\n<p><strong>frm.h</strong></p>\n\n<pre><code>#pragma once\n#include \"phy.h\"\n\nvoid frmStuff(void);\n\n// new callback for higher layer\nvoid __attribute__((weak)) frm_cb();\n</code></pre>\n\n<p><strong>frm.c</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;    \n#include \"phy.h\"\n#include \"frm.h\"\n\n// implement the callback\nvoid phy_cb() {\n    printf(\"phy_cb, FRM implementation. GOOD\\n\");\n}    \n\n// Callback, weak\nvoid frm_cb() {\n    printf(\"frm_cb, default implementation. BAD!!!\\n\");\n}    \n\nvoid frmStuff(void) {\n    printf(\"FRM stuff. Running frm_cb\\n\");\n    frm_cb();\n}\n</code></pre>\n\n<p><strong>main.c</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#include \"frm.h\"\n#include \"phy.h\"\n\nvoid frm_cb() {\n    printf(\"frm_cb, APP implementation. GOOD\\n\");\n}\n\nvoid main(void) {\n    printf(\"Main.\\n\");\n\n    phyStuff();\n    frmStuff();\n}\n</code></pre>\n\n<p>Now, if I compile it...</p>\n\n<pre><code>$ gcc main.c phy.c frm.c\n$ ./a.out \nMain.\nPHY stuff. Running phy_cb.\nphy_cb, default implementation. BAD!!! &lt;--- not expected!\nFRM stuff. Running frm_cb\nfrm_cb, APP implementation. GOOD\n</code></pre>\n\n<p>Why isn't the weak symbol overridden in this case? Is there any workaround?</p>\n"}, {"tags": ["c", "debugging", "pointers", "memory-management", "pointer-arithmetic"], "comments": [{"owner": {"reputation": 1911, "user_id": 5018771, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6dec254b17d75df0cfa8c42806cfca3f?s=128&d=identicon&r=PG&f=1", "display_name": "AdrienW", "link": "https://stackoverflow.com/users/5018771/adrienw"}, "reply_to_user": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 0, "creation_date": 1446053972, "post_id": 33397836, "comment_id": 54587207, "body": "Thanks ! Couldn&#39;t figure out how to do it nicely (I just forgot the 4 spaces at the beginning)"}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1446055256, "post_id": 33397836, "comment_id": 54588035, "body": "Faulty address (<code>0x00007ffff7bd7a69</code>) does not correspond to <code>temp</code>&#39;s (<code>0x7ffff7ff0a0c</code>) nor <code>startfree</code> (<code>0x7ffff7ef094c</code>)."}, {"owner": {"reputation": 1911, "user_id": 5018771, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6dec254b17d75df0cfa8c42806cfca3f?s=128&d=identicon&r=PG&f=1", "display_name": "AdrienW", "link": "https://stackoverflow.com/users/5018771/adrienw"}, "edited": false, "score": 0, "creation_date": 1446066572, "post_id": 33397836, "comment_id": 54594534, "body": "The faulty address is not even in my heap ! I think it&#39;s the address in the generated byte-code"}], "answers": [{"comments": [{"owner": {"reputation": 1911, "user_id": 5018771, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6dec254b17d75df0cfa8c42806cfca3f?s=128&d=identicon&r=PG&f=1", "display_name": "AdrienW", "link": "https://stackoverflow.com/users/5018771/adrienw"}, "edited": false, "score": 0, "creation_date": 1446066463, "post_id": 33398604, "comment_id": 54594492, "body": "I still get the segfault with this correction... but it could be a part of the problem."}], "tags": [], "owner": {"reputation": 4445, "user_id": 560903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d66cec4f7bd065097137c2001c96b866?s=128&d=identicon&r=PG", "display_name": "keithmo", "link": "https://stackoverflow.com/users/560903/keithmo"}, "is_accepted": false, "score": 0, "last_activity_date": 1446056119, "creation_date": 1446056119, "answer_id": 33398604, "question_id": 33397836, "link": "https://stackoverflow.com/questions/33397836/segfault-apparently-when-affecting-value-to-an-int/33398604#33398604", "title": "Segfault apparently when affecting value to an int", "body": "<p><code>node_t* temp = (node_t*) (startfree+size+sizeof(bheader_t));</code> is almost certainly wrong. If <code>startfree</code> is of type <code>node_t *</code>, then this will add <code>(size + sizeof(bheader_t)) * sizeof(node_t)</code> to the raw pointer. I suspect you really want <code>node_t* temp = (node_t*) ((char *)startfree+size+sizeof(bheader_t));</code>.</p>\n"}], "owner": {"reputation": 1911, "user_id": 5018771, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6dec254b17d75df0cfa8c42806cfca3f?s=128&d=identicon&r=PG&f=1", "display_name": "AdrienW", "link": "https://stackoverflow.com/users/5018771/adrienw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1446056119, "creation_date": 1446053781, "last_edit_date": 1446054186, "question_id": 33397836, "link": "https://stackoverflow.com/questions/33397836/segfault-apparently-when-affecting-value-to-an-int", "title": "Segfault apparently when affecting value to an int", "body": "<p>I'm working on a memory allocator in C (rewriting <em>malloc</em> and <em>free</em> from scratch). I use a heap created by <em>mmap</em>, and headers before each chunk of memory to get information concerning the chunk. I use the following structure to handle my free list (the \"list\" of all free chunks) :</p>\n\n<pre><code>typedef struct node_t {\n         long int        size;\n         struct node_t  *next;\n}node_t;\n</code></pre>\n\n<p>When allocating a new memory block, I use a temporary <code>node_t* temp</code>. We have also <code>node_t* startfree</code> a pointer to the head of my free list.<br>\nThe variable <code>int size</code> is a parameter of the function that contains that part of the code.<br>\n<code>bheader_t</code> is another structure that we'll use later.</p>\n\n<pre><code>node_t* temp = (node_t*) (startfree+size+sizeof(bheader_t));\nprintf(\"DEBUG : temp %p\\n\",temp );\nprintf(\"DEBUG : startfree %p, size = %ld, next = %p \\n\",startfree, startfree-&gt; size, startfree -&gt; next );`  \nprintf(\"DEBUG : future value of temp-&gt;size : %ld\\n\",startfree -&gt; size - size -sizeof(bheader_t));\nprintf(\"DEBUG : We want to do temp(%p)-&gt;size = startfree(%p)-&gt;size (=%ld) - size (=%d) - sizeof(bheader_t) (=%ld)\\n\", temp, startfree, startfree-&gt;size, size, sizeof(bheader_t));\ntemp -&gt; size = startfree-&gt;size - size -sizeof(bheader_t);\nprintf(\"DEBUG : temp %p, size : %ld\\n\",temp,temp-&gt;size );\ntemp -&gt; next = startfree -&gt; next;\nstartfree = temp;\n</code></pre>\n\n<p>In some cases it goes well, but in others this is what I get (in <em>gdb</em>) :</p>\n\n<pre><code>DEBUG : temp 0x7ffff7ff0a0c\nDEBUG : startfree 0x7ffff7ef094c, size = 996000, next = (nil)\nDEBUG : future value of temp-&gt;size : 930452 \nDEBUG : We want to do temp(0x7ffff7ff0a0c)-&gt;size = startfree(0x7ffff7ef094c)-&gt;size (=996000) - size (=65536) - sizeof(bheader_t) (=12)\n\nProgram received signal SIGSEGV, Segmentation fault.\n0x00007ffff7bd7a69 in Mem_Alloc_NF (size=65536) at src/nextfit.c:108\n108          `temp -&gt; size = startfree-&gt;size - size -sizeof(bheader_t);`\n</code></pre>\n\n<p>Segfault on a simple <code>int</code> affectation ! Any ideas what it could be ?</p>\n"}, {"tags": ["c", "sockets", "ftp", "client"], "comments": [{"owner": {"reputation": 4445, "user_id": 560903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d66cec4f7bd065097137c2001c96b866?s=128&d=identicon&r=PG", "display_name": "keithmo", "link": "https://stackoverflow.com/users/560903/keithmo"}, "edited": false, "score": 2, "creation_date": 1446057424, "post_id": 33397826, "comment_id": 54589376, "body": "The password should be sent as <code>PASS password</code> -- are you sending it this way?"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1446057599, "post_id": 33397826, "comment_id": 54589484, "body": "When reading from a socket never expect to read as may bytes as your as you told to read."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1446057629, "post_id": 33397826, "comment_id": 54589505, "body": "You did read this <a href=\"https://www.ietf.org/rfc/rfc959.txt\" rel=\"nofollow noreferrer\">ietf.org/rfc/rfc959.txt</a>, didn&#39;t you?-)"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1446063819, "post_id": 33397826, "comment_id": 54593063, "body": "Why would you expect a <code>select()</code> problem to cause FTP commands to fail on the server side?  Please show the actual commands you are sending."}, {"owner": {"reputation": 21, "user_id": 5499397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb634bab689575f9ceaf86f733c4bba9?s=128&d=identicon&r=PG&f=1", "display_name": "charle", "link": "https://stackoverflow.com/users/5499397/charle"}, "edited": false, "score": 0, "creation_date": 1446107899, "post_id": 33397826, "comment_id": 54609229, "body": "I send my user like this &quot;user login&quot; then the server answer : &quot;331 Password required for login&quot; and for the pass i enter &quot;pass paswd&quot; or &quot;PASS passwd&quot;. Then always the same error 500."}], "owner": {"reputation": 21, "user_id": 5499397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb634bab689575f9ceaf86f733c4bba9?s=128&d=identicon&r=PG&f=1", "display_name": "charle", "link": "https://stackoverflow.com/users/5499397/charle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1446053764, "creation_date": 1446053764, "question_id": 33397826, "link": "https://stackoverflow.com/questions/33397826/make-a-client-to-connect-to-a-ftp-server", "title": "Make a client to connect to a ftp server", "body": "<p>I'm trying to do a client in C witch connect to a FTP server, but there is some problems i can't solve, when i launch my client the connexion to the server works then i enter my login (\"USER login\"), I receive the answer from the server which ask to me my password and when i try to enter it i have this answer : \"500 Invalid command: try being more creative\". I don't know if I'm doing something wrong with select() function or something else.\nThanks for help.</p>\n\n<pre><code>void    receive_and_send(int sock)\n{\n   char buffer[1024];\n   char buffer2[1024];\n   fd_set rfds;\n   int retval;\n   int nb_recv;\n   int nb_read;\n   char *cpybuffer;\n\n   memset(buffer, '\\0', 1024);\n   memset(buffer2, '\\0', 1024);\n   while (42)\n    {\n      FD_ZERO(&amp;rfds);\n      FD_SET(0, &amp;rfds);\n      FD_SET(sock, &amp;rfds);                                                                              \n      if ((retval = select(sock + 1, &amp;rfds, NULL, NULL, NULL)) &lt; 0)\n        {\n          printf(\"Error with select\\n\");\n          exit(0);\n        }\n      if (FD_ISSET(sock, &amp;rfds))\n        {\n          if ((nb_recv = read(sock, buffer, 1024 - 1)) &lt; 0)\n            exit(0);\n          if (nb_recv &lt; 1024)\n            {\n              buffer[nb_recv] = '\\0';\n              fprintf(stderr, \"[%s]\", buffer);\n              memset(buffer, 0, 1024);\n            }\n        }\n     if (FD_ISSET(0, &amp;rfds))\n        {                                                                         \n          nb_read = read(0, buffer2, 1024);\n          buffer2[nb_read - 1] = '\\r';\n          buffer2[nb_read] = '\\n';\n          buffer2[nb_read + 1] = '\\0';\n          fprintf(stderr,\"buffer2 = %s\\n\", buffer2);\n          cpybuffer = strdup(buffer2);                                            \n          write(sock, cpybuffer, nb_read + 2);\n          memset(buffer2, '\\0', 1024);\n          free(cpybuffer);\n        }\n    }\n}`\n</code></pre>\n"}, {"tags": ["c", "arrays", "file-io", "user-defined-functions"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446053260, "post_id": 33397604, "comment_id": 54586702, "body": "Questions seeking debugging help (&quot;why isn&#39;t this code working?&quot;) must include the desired behavior, a specific problem or error and the shortest code necessary to reproduce it in the question itself. Questions without a clear problem statement are not useful to other readers. See: How to create a Minimal, Complete, and Verifiable example."}, {"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1446053357, "post_id": 33397604, "comment_id": 54586769, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/22187047/reading-from-a-file-to-an-array-c\">Reading from a File to an Array - C</a>"}, {"owner": {"reputation": 463, "user_id": 3518575, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/da1296b6f19040f49150a70b01aeca1a?s=128&d=identicon&r=PG&f=1", "display_name": "XOR-Manik", "link": "https://stackoverflow.com/users/3518575/xor-manik"}, "edited": false, "score": 0, "creation_date": 1446053383, "post_id": 33397604, "comment_id": 54586790, "body": "do you have a fixed pattern of number in every line? if yes then what is that? cos it is important."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 5460058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b99cc3f4396b0f9cb4918558a019a343?s=128&d=identicon&r=PG&f=1", "display_name": "mly128", "link": "https://stackoverflow.com/users/5460058/mly128"}, "edited": false, "score": 0, "creation_date": 1446054764, "post_id": 33397685, "comment_id": 54587730, "body": "How would you properly write it though?"}, {"owner": {"reputation": 1985, "user_id": 678095, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/72b34d84e4c0fec147d8f1c60be27210?s=128&d=identicon&r=PG", "display_name": "Aram Gevorgyan", "link": "https://stackoverflow.com/users/678095/aram-gevorgyan"}, "edited": false, "score": 0, "creation_date": 1446057703, "post_id": 33397685, "comment_id": 54589556, "body": "mly128 you can look my answer"}], "tags": [], "owner": {"reputation": 2619, "user_id": 589026, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/wVUyz.jpg?s=128&g=1", "display_name": "Raghu Srikanth Reddy", "link": "https://stackoverflow.com/users/589026/raghu-srikanth-reddy"}, "is_accepted": false, "score": 1, "last_activity_date": 1446053367, "creation_date": 1446053367, "answer_id": 33397685, "question_id": 33397604, "link": "https://stackoverflow.com/questions/33397604/reading-numbers-from-a-text-file-to-an-array-in-user-defined-function-in-c/33397685#33397685", "title": "Reading numbers from a text file to an array in user defined function in C", "body": "<p>One mistake in your code is that You are calling </p>\n\n<pre><code>for (i=0;i&lt;25;i++)\ntemp[i]= read_temps();\n</code></pre>\n\n<p>in your <code>main</code> function. And performing </p>\n\n<pre><code>for (i=0; i&lt;25; i++)\n    {\n    fscanf(file,\"%d\", &amp;fileArray[i]);\n    }\n</code></pre>\n\n<p>in your <code>read_temps</code> function which will iterate 25 times all the time and return you the garbage value after the last integer in the file always.</p>\n"}, {"tags": [], "owner": {"reputation": 1985, "user_id": 678095, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/72b34d84e4c0fec147d8f1c60be27210?s=128&d=identicon&r=PG", "display_name": "Aram Gevorgyan", "link": "https://stackoverflow.com/users/678095/aram-gevorgyan"}, "is_accepted": false, "score": 0, "last_activity_date": 1446056656, "last_edit_date": 1446056656, "creation_date": 1446053459, "answer_id": 33397721, "question_id": 33397604, "link": "https://stackoverflow.com/questions/33397604/reading-numbers-from-a-text-file-to-an-array-in-user-defined-function-in-c/33397721#33397721", "title": "Reading numbers from a text file to an array in user defined function in C", "body": "<p>It's because you return fileArray[i]; after for loop, when i = 25, and there is no such value in array</p>\n\n<p>write instead:</p>\n\n<pre><code>    int* read_temps(void)\n{\n    int i;\n    int num;\n    int fileArray[25];\n\n    FILE *file;\n    file=fopen(\"temperatures.txt\", \"r\");\n\n    if (file == NULL)\n    {\n        printf(\"Error Reading File\\n\");\n        exit(0);\n    }\n    for (i=0; i&lt;25; i++)\n    {\n    fscanf(file,\"%d\", &amp;fileArray[i]);\n    }\n\n    fclose(file);\n    return fileArray;\n\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>int* temp;\ntemp = read_temps();\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 5460058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b99cc3f4396b0f9cb4918558a019a343?s=128&d=identicon&r=PG&f=1", "display_name": "mly128", "link": "https://stackoverflow.com/users/5460058/mly128"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 275, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1446056656, "creation_date": 1446053142, "last_edit_date": 1446053939, "question_id": 33397604, "link": "https://stackoverflow.com/questions/33397604/reading-numbers-from-a-text-file-to-an-array-in-user-defined-function-in-c", "title": "Reading numbers from a text file to an array in user defined function in C", "body": "<p>I'm having trouble scanning values from a text file, I've never really used file i/o before and I'm still very shaky with user-defined functions so I'm almost positive that the error is in the first function, I don't know how to fix it however, I'm pretty new at programming so please bear with me.</p>\n\n<p>my code so far is</p>\n\n<pre><code>  #include &lt;stdio.h&gt;\n  #include &lt;stdlib.h&gt;\n\nint read_temps(void)\n{\n    int i;\n    int num;\n    int fileArray[25];\n\n    FILE *file;\n    file=fopen(\"temperatures.txt\", \"r\");\n\n    if (file == NULL)\n    {\n        printf(\"Error Reading File\\n\");\n        exit(0);\n    }\n    for (i=0; i&lt;25; i++)\n    {\n    fscanf(file,\"%d\", &amp;fileArray[i]);\n    }\n\n    fclose(file);\n    return fileArray[i];\n\n}\n\n\nint calc_results (int a[], int n)\n{\n    int i, j, maximum, minimum, average,sum;\n    float avg;\n\nprintf (\"Temperature conditions on October 26th, 2015:\\n\");\n printf(\"Time  Temperature in Degrees F \\n\");\n\n   for(i = 0; i&lt;25;i++)\n    {\n    printf(\"%d\\t%d\\n\", i, a[i]);\n\n        if(maximum &lt; a[i])\n            maximum = a[i];\n        if(minimum &gt; a[i])\n            minimum = a[i];\n\n            sum+=a[i];\n    }\n\n    printf(\"Maximum Temperature for the day: %d\\n\", maximum);\n    printf(\"Minimum Temperature for the day: %d\\n\", minimum);\n\n    avg=(float)sum/25;\n    printf(\"Average Temperature for the day: %f\\n\", avg);\n\n    return 0;\n}\n\n\nint main ()\n{\n    int average,i;\n\n    int temp[25];\n        for (i=0;i&lt;25;i++)\n        temp[i]= read_temps(); //calling user function for file input\n\ncalc_results(temp,i); //calling user function\n\nreturn 0;\n}\n</code></pre>\n\n<p>the program is supposed to read the values from the .txt file in read_temps, calculate the max, min, and average value in calc_results. It does all this and compiles, but it doesnt read the values correctly. The .txt file contains numbers like 87, 65, 92 and when I run my program the output is the same large number like 19863578 repeated for almost all the values, expect for max, min and avg. I don't know what to do :(</p>\n\n<p>these are the values on the textfil</p>\n\n<pre><code>    67\n    67\n    69\n    71\n    77\n    79\n    80\n    80\n    82\n    85\n    87\n    88\n    91\n    93\n    94\n    95\n    95\n    96\n    94\n    90\n    85\n    82\n    81\n    77\n    74\n</code></pre>\n\n<p>the output should be </p>\n\n<pre><code>    Temperature Conditions on October 9, 2015: \n    Time of Day     Temperature in degrees F \n    0               85\n    1               80\n    2               97\n    3               90\n    4               73\n    ........\n    25              68\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1446052853, "post_id": 33397463, "comment_id": 54586385, "body": "You didn&#39;t mention a platform: MSVC has the OS-specific <code>kbhit()</code> but there is no C standard function."}, {"owner": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "edited": false, "score": 0, "creation_date": 1446060091, "post_id": 33397463, "comment_id": 54591005, "body": "If you have POSIX, you could set non-canonical on your <code>termios</code>."}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 4659240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/699100431888962f66763e88e548ffb4?s=128&d=identicon&r=PG&f=1", "display_name": "snaperdak", "link": "https://stackoverflow.com/users/4659240/snaperdak"}, "edited": false, "score": 0, "creation_date": 1446057689, "post_id": 33398164, "comment_id": 54589547, "body": "I want to do something if a key is pressed it performs the task. It&#39;s just a reference to the fact I can handle it further."}], "tags": [], "owner": {"reputation": 31, "user_id": 5496328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08ea2ee7ed3ecb9879a4aa0c7a91eecd?s=128&d=identicon&r=PG&f=1", "display_name": "AqShvartz", "link": "https://stackoverflow.com/users/5496328/aqshvartz"}, "is_accepted": false, "score": 0, "last_activity_date": 1446054676, "creation_date": 1446054676, "answer_id": 33398164, "question_id": 33397463, "link": "https://stackoverflow.com/questions/33397463/service-keys-with-keyboard/33398164#33398164", "title": "Service keys with keyboard", "body": "<p>Can you give a little bit more information cause your question doesn't contain enough?\nIf you're talking about checking the condition: does (pressed_key) exists or not, it's possible to write <code>if (pressed_key) //code</code> if it exists and some code after there. if it exists pressed_key will be equal to any number (except 0), if it doesn't exist it will be equal 0.</p>\n\n<p>I don't know how to help you in other ways.(</p>\n"}], "owner": {"reputation": 37, "user_id": 4659240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/699100431888962f66763e88e548ffb4?s=128&d=identicon&r=PG&f=1", "display_name": "snaperdak", "link": "https://stackoverflow.com/users/4659240/snaperdak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 169, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1446054676, "creation_date": 1446052700, "question_id": 33397463, "link": "https://stackoverflow.com/questions/33397463/service-keys-with-keyboard", "title": "Service keys with keyboard", "body": "<p>I need help. I want using C to handle the keys. Unfortunately, I do not know how to do it. I care about formulating \"if (pressed key == true)\" something like that please help.</p>\n"}, {"tags": ["python", "c", "linux", "shell", "permissions"], "comments": [{"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 1, "creation_date": 1446052802, "post_id": 33397445, "comment_id": 54586351, "body": "What does &quot;unzip is not allowed&quot; mean? Does it output an error? Does it return an error code? Does it explode? Is the environment the same when run from C? Is the C program running from cron or something? Is the C program running it in the same directory?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446053056, "post_id": 33397445, "comment_id": 54586537, "body": "&quot;C calling shell-script calling Python program&quot; Sounds like an invitation to a security and maintenance nightmare. Why not using a single language?"}, {"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "edited": false, "score": 2, "creation_date": 1446053061, "post_id": 33397445, "comment_id": 54586544, "body": "How is the C program invoked? From the terminal command line? From cron? Is it setuid?"}, {"owner": {"reputation": 431, "user_id": 1295872, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/37f5322d197bb5c388ea3a9b26d477e7?s=128&d=identicon&r=PG", "display_name": "user1295872", "link": "https://stackoverflow.com/users/1295872/user1295872"}, "edited": false, "score": 0, "creation_date": 1446054740, "post_id": 33397445, "comment_id": 54587714, "body": "It returns an error code of 256 which maps permission being denied. The C program is one of the many processes that are started from a script when the system boots up. It keeps running continuously. No, we do not setuid. Cron is not involved."}], "answers": [{"tags": [], "owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "is_accepted": false, "score": 1, "last_activity_date": 1446053206, "creation_date": 1446053206, "answer_id": 33397631, "question_id": 33397445, "link": "https://stackoverflow.com/questions/33397445/linux-permissions-issue-from-program/33397631#33397631", "title": "Linux permissions issue from program", "body": "<p>I suppose you invoke the C program from some environment other than the command line. Perhaps you invoke it from cron or perhaps from a web server.</p>\n\n<p>In any event, I also suppose that the current working directory of your process tree is a directory that doesn't allow admin to write there.</p>\n\n<p>Add a call like one of these to ensure that your current working directory is useful to you.</p>\n\n<pre><code>chdir(\"/tmp\")      # C\ncd /tmp            # sh\nos.chdir(\"/tmp\")   # Python\n</code></pre>\n"}], "owner": {"reputation": 431, "user_id": 1295872, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/37f5322d197bb5c388ea3a9b26d477e7?s=128&d=identicon&r=PG", "display_name": "user1295872", "link": "https://stackoverflow.com/users/1295872/user1295872"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1446053206, "creation_date": 1446052626, "question_id": 33397445, "link": "https://stackoverflow.com/questions/33397445/linux-permissions-issue-from-program", "title": "Linux permissions issue from program", "body": "<p>There is a convoluted way we do things where we have a C program which calls a shell script and which in turn calls a python script. This python script in turn tries to unzip a file using the unzip utility on the linux machine. Now, here is the problem. The unzip works absolutely fine when I execute the shellscript directly from the terminal (logged in as admin) which calls the python script which does the unzipping, where as the unzip is not allowed when the C program calls the shell script which calls the python script to unzip the file. So I tried to unzip directly from the C program and that fails too. I printed the current user using the whoami command in the C program and it says the user is admin which is the same user I log into the terminal as. Any ideas? Sorry for the long winded explanation. But I am at the end of a 12 hour day trying to figure this problem. </p>\n"}, {"tags": ["c"], "answers": [{"comments": [{"owner": {"reputation": 15836, "user_id": 1675492, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/HsMph.jpg?s=128&g=1", "display_name": "Ingo B&#252;rk", "link": "https://stackoverflow.com/users/1675492/ingo-b%c3%bcrk"}, "edited": false, "score": 0, "creation_date": 1446055276, "post_id": 33398293, "comment_id": 54588051, "body": "That explains why it crashes (thanks!), but unfortunately doesn&#39;t help me understand what I&#39;m doing wrong / how to fix it. Any ideas?"}, {"owner": {"reputation": 15836, "user_id": 1675492, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/HsMph.jpg?s=128&g=1", "display_name": "Ingo B&#252;rk", "link": "https://stackoverflow.com/users/1675492/ingo-b%c3%bcrk"}, "edited": false, "score": 0, "creation_date": 1446055400, "post_id": 33398293, "comment_id": 54588118, "body": "If I <code>printf</code> the memory address of <code>attribute</code> inside the loop right after assigning it, I can see that it&#39;s the same both times. But I can&#39;t explain that."}], "tags": [], "owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "is_accepted": false, "score": 1, "last_activity_date": 1446055072, "creation_date": 1446055072, "answer_id": 33398293, "question_id": 33397351, "link": "https://stackoverflow.com/questions/33397351/nested-tailq-double-free-error/33398293#33398293", "title": "Nested TAILQ double free error", "body": "<p>I've inserted printfs after each allocation and free, this is the result:</p>\n\n<pre><code>strdup = 0x800e15000\nread_item_attribute: calloc = 0x800e20000\nread_item_attribute: calloc = 0x800e20020\nread_item_end: calloc = 0x800e21000\nstrdup = 0x800e15020\nread_item_attribute: calloc = 0x800e20060\nread_item_attribute: calloc = 0x800e20080\nread_item_end: calloc = 0x800e21030\nfree_items(name): 0x800e15000\nfree_items(attribute-&gt;name): 0x800e15010\nfree_items(attribute): 0x800e20000\nfree_items(attribute-&gt;name): 0x5a5a5a5a5a5a5a5a\n</code></pre>\n\n<p>Observe that <code>free_items(attribute-&gt;name): 0x800e15010</code> is already trying to free something that wasn't allocated. Apparently,</p>\n\n<pre><code>attribute = TAILQ_FIRST(&amp;(item-&gt;attributes));\n</code></pre>\n\n<p>doesn't give you a struct with an allocated <code>name</code> member.</p>\n"}, {"comments": [{"owner": {"reputation": 15836, "user_id": 1675492, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/HsMph.jpg?s=128&g=1", "display_name": "Ingo B&#252;rk", "link": "https://stackoverflow.com/users/1675492/ingo-b%c3%bcrk"}, "edited": false, "score": 0, "creation_date": 1446055980, "post_id": 33398441, "comment_id": 54588486, "body": "Yeah, that makes sense (we do the same for status blocks [code that I wrote {a long time ago}]). I&#39;ll accept the answer once I actually fixed it and can verify it."}], "tags": [], "owner": {"reputation": 646, "user_id": 712014, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/4InEp.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/712014/michael"}, "is_accepted": true, "score": 1, "last_activity_date": 1446055576, "creation_date": 1446055576, "answer_id": 33398441, "question_id": 33397351, "link": "https://stackoverflow.com/questions/33397351/nested-tailq-double-free-error/33398441#33398441", "title": "Nested TAILQ double free error", "body": "<p>I think the problem is that <code>TAILQ_INIT</code> initializes <code>tqh_last</code> to be a pointer to <code>tqh_first</code>:</p>\n\n<pre><code>#define TAILQ_INIT(head)                   \\\ndo {                                       \\\n    (head)-&gt;tqh_first = NULL;              \\\n    (head)-&gt;tqh_last = &amp;(head)-&gt;tqh_first; \\\n} while (0)\n</code></pre>\n\n<p>(<code>&amp;(head)-&gt;tqh_first</code> is equivalent to the slightly more clear <code>&amp;((head)-&gt;tqh_first)</code>).</p>\n\n<p>So, when you use <code>memcpy</code>, you violate the invariant that <code>tqh_last</code> points to the memory location of <code>tqh_first</code>.</p>\n\n<p>I think the clean solution would be to initialize a new TAILQ in the copied structure and move all elements from the old list into the new TAILQ.</p>\n\n<p>A slightly less clean but more efficient solution would be to fix the pointer directly.</p>\n"}], "owner": {"reputation": 15836, "user_id": 1675492, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/HsMph.jpg?s=128&g=1", "display_name": "Ingo B&#252;rk", "link": "https://stackoverflow.com/users/1675492/ingo-b%c3%bcrk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 0, "accepted_answer_id": 33398441, "answer_count": 2, "score": 0, "last_activity_date": 1446055576, "creation_date": 1446052288, "last_edit_date": 1446053281, "question_id": 33397351, "link": "https://stackoverflow.com/questions/33397351/nested-tailq-double-free-error", "title": "Nested TAILQ double free error", "body": "<p>The following code is a minimal example of a problem in a bigger codebase. It can be compiled via a simple <code>gcc -g main.c</code>.</p>\n\n<p>I have a list of items, each of which holds a list of attributes. The goal is to parse a list from some input and in order to only ever have completely parsed items in the list, it uses a temporary item that is added to the list once fully parsed.</p>\n\n<p>Since the parsing happens periodically, the list of items must be free'd at some point. The code, as it stands, at this point produces \"double free or corruption\" in line 49. My question, simply put, is: why does this happen / what am I doing wrong and how can I fix it? I can't seem to wrap my head around where memory is corrupted.</p>\n\n<h3>main.c</h3>\n\n<pre><code>#include &lt;sys/queue.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\ntypedef struct attribute_t {\n    char *name;\n    TAILQ_ENTRY(attribute_t) attributes;\n} attribute_t;\n\ntypedef struct item_t {\n    char *name;\n    TAILQ_HEAD(attributes_head, attribute_t) attributes;\n\n    TAILQ_ENTRY(item_t) items;\n} item_t;\n\nTAILQ_HEAD(items_head, item_t) items = TAILQ_HEAD_INITIALIZER(items);\nstatic item_t item_builder;\n\nstatic void read_item_start(const char *name) {\n    TAILQ_INIT(&amp;(item_builder.attributes));\n    item_builder.name = strdup(name);\n}\n\nstatic void read_item_end() {\n    item_t *new_item = calloc(1, sizeof(item_t));\n    memcpy(new_item, &amp;item_builder, sizeof(item_t));\n    TAILQ_INSERT_TAIL(&amp;items, new_item, items);\n\n    memset(&amp;item_builder, '\\0', sizeof(item_t));\n}\n\nstatic void read_item_attribute(const char *name) {\n    attribute_t *new = calloc(1, sizeof(attribute_t));\n    new-&gt;name = strdup(name);\n    TAILQ_INSERT_TAIL(&amp;(item_builder.attributes), new, attributes);\n}\n\nstatic void free_items() {\n    item_t *item;\n    while (!TAILQ_EMPTY(&amp;items)) {\n        item = TAILQ_FIRST(&amp;items);\n        free(item-&gt;name); // &lt;-- crash\n\n        attribute_t *attribute;\n        while (!TAILQ_EMPTY(&amp;(item-&gt;attributes))) {\n            attribute = TAILQ_FIRST(&amp;(item-&gt;attributes));\n            free(attribute-&gt;name);\n\n            TAILQ_REMOVE(&amp;(item-&gt;attributes), attribute, attributes);\n            free(attribute);\n        }\n\n        TAILQ_REMOVE(&amp;items, item, items);\n        free(item);\n    }\n}\n\nint main() {\n    read_item_start(\"first item\");\n    read_item_attribute(\"first attribute\");\n    read_item_attribute(\"second attribute\");\n    read_item_end();\n\n    read_item_start(\"second item\");\n    read_item_attribute(\"first attribute\");\n    read_item_attribute(\"second attribute\");\n    read_item_end();\n\n    free_items();\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "string", "switch-statement", "swap", "letters"], "comments": [{"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1446052050, "post_id": 33397208, "comment_id": 54585843, "body": "You are switching <code>c</code> with <code>d</code> and <code>d</code> with <code>c</code> too in your output."}, {"owner": {"reputation": 61, "user_id": 5255611, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/DU9ts.jpg?s=128&g=1", "display_name": "Hesham Saleh", "link": "https://stackoverflow.com/users/5255611/hesham-saleh"}, "reply_to_user": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1446052178, "post_id": 33397208, "comment_id": 54585931, "body": "This is just an example. The user is meant to switch whatever letter he enters to another letter and vice versa."}, {"owner": {"reputation": 6529, "user_id": 4252320, "user_type": "registered", "accept_rate": 59, "profile_image": "https://lh3.googleusercontent.com/-_DAs7Dtci9U/AAAAAAAAAAI/AAAAAAAAIf8/96ZNJAUF2Xk/photo.jpg?sz=128", "display_name": "ergonaut", "link": "https://stackoverflow.com/users/4252320/ergonaut"}, "edited": false, "score": 0, "creation_date": 1446052864, "post_id": 33397208, "comment_id": 54586395, "body": "Can you print stuff out each iteration and see what&#39;s there?"}, {"owner": {"reputation": 61, "user_id": 5255611, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/DU9ts.jpg?s=128&g=1", "display_name": "Hesham Saleh", "link": "https://stackoverflow.com/users/5255611/hesham-saleh"}, "reply_to_user": {"reputation": 6529, "user_id": 4252320, "user_type": "registered", "accept_rate": 59, "profile_image": "https://lh3.googleusercontent.com/-_DAs7Dtci9U/AAAAAAAAAAI/AAAAAAAAIf8/96ZNJAUF2Xk/photo.jpg?sz=128", "display_name": "ergonaut", "link": "https://stackoverflow.com/users/4252320/ergonaut"}, "edited": false, "score": 0, "creation_date": 1446053352, "post_id": 33397208, "comment_id": 54586766, "body": "@ergonaut sure. I tried it just now and apparently x[0] = nothing, but y[0] = a. Not sure why x[0] != a and y[0] != b....."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 4, "creation_date": 1446053461, "post_id": 33397208, "comment_id": 54586851, "body": "You need a space in this line <code>scanf(&quot;%c&quot;, &amp;x[i]);</code> before the <code>%c</code> so it reads <code>scanf(&quot; %c&quot;, &amp;x[i]);</code> and the same witht the following line. This is to remove the white-space left in the input buffer after the previous <code>scanf</code>."}, {"owner": {"reputation": 61, "user_id": 5255611, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/DU9ts.jpg?s=128&g=1", "display_name": "Hesham Saleh", "link": "https://stackoverflow.com/users/5255611/hesham-saleh"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1446053593, "post_id": 33397208, "comment_id": 54586955, "body": "@WeatherVane Okay give me a moment I&#39;ll try that."}, {"owner": {"reputation": 61, "user_id": 5255611, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/DU9ts.jpg?s=128&g=1", "display_name": "Hesham Saleh", "link": "https://stackoverflow.com/users/5255611/hesham-saleh"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1446053716, "post_id": 33397208, "comment_id": 54587049, "body": "@WeatherVane You&#39;re a genius. Thanks a lot for your help!"}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1446054028, "post_id": 33397208, "comment_id": 54587243, "body": "Finally we got another genius on SO. Let&#39;s celebrate! :) @WeatherVane"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1446054149, "post_id": 33397208, "comment_id": 54587333, "body": "@haccks is there some sarcasm there? I only RTM."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1446054402, "post_id": 33397208, "comment_id": 54587503, "body": "@WeatherVane; Haha. No. Its not a sarcasm. Just for fun. Hope you will not mind."}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 5255611, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/DU9ts.jpg?s=128&g=1", "display_name": "Hesham Saleh", "link": "https://stackoverflow.com/users/5255611/hesham-saleh"}, "edited": false, "score": 0, "creation_date": 1446055381, "post_id": 33397796, "comment_id": 54588112, "body": "How do I reduce the time limit of this program?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1446056197, "post_id": 33397796, "comment_id": 54588622, "body": "@haccks is there an execution time penalty for the redundant <code>else</code>?"}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1446056341, "post_id": 33397796, "comment_id": 54588714, "body": "@WeatherVane; <code>else</code> is not redundant but more comparisons will take more time assuming <code>m</code> has some big value."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1446056418, "post_id": 33397796, "comment_id": 54588772, "body": "@haccks the <code>else</code> is redundant because of the preceding <code>break</code> when the previous condition was true."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1446056658, "post_id": 33397796, "comment_id": 54588902, "body": "@WeatherVane; Ummm....... if previous is not true then <code>else</code> part will execute. But, you are right. <code>else</code> is redundant, but there is no execution time penalty. Modern compilers are smart enough to optimize it."}], "tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 1, "last_activity_date": 1446056674, "last_edit_date": 1446056674, "creation_date": 1446053678, "answer_id": 33397796, "question_id": 33397208, "link": "https://stackoverflow.com/questions/33397208/switching-letters-in-a-string-in-c/33397796#33397796", "title": "Switching letters in a string in C", "body": "<p>Your logic is correct. You just need to put a space before <code>%c</code> specifier in both of the <code>scanf</code>  </p>\n\n<pre><code>for(i=0; i&lt;m; i++)\n{\n    scanf(\" %c\", &amp;x[i]);\n    scanf(\" %c\", &amp;y[i]);\n}\n</code></pre>\n\n<p>and it will work. This is because the <code>\\n</code> leftover by the previous <code>scanf</code> is read by second <code>scanf</code> and same is happening for the space in between the the input characters <code>a b</code> and <code>c d</code>. A space before <code>%c</code> in <code>scanf</code> will consume all white-spaces.   </p>\n\n<p>You can change loop to replace characters in only one iteration  </p>\n\n<pre><code>for(i = 0; i &lt; n; i++)\n{\n    for(j = 0; j &lt; m; j++)\n    {\n        if(s[i] == x[j])\n        {\n            s[i] = y[j];\n            break;\n        }\n        if(s[i] == y[j])\n        {\n            s[i] = x[j];\n            break;\n        }\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 61, "user_id": 5255611, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/DU9ts.jpg?s=128&g=1", "display_name": "Hesham Saleh", "link": "https://stackoverflow.com/users/5255611/hesham-saleh"}, "edited": false, "score": 0, "creation_date": 1446055391, "post_id": 33397902, "comment_id": 54588115, "body": "How do I reduce the time limit of this program?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 61, "user_id": 5255611, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/DU9ts.jpg?s=128&g=1", "display_name": "Hesham Saleh", "link": "https://stackoverflow.com/users/5255611/hesham-saleh"}, "edited": false, "score": 1, "creation_date": 1446055891, "post_id": 33397902, "comment_id": 54588425, "body": "What time limit? Is this a different question?"}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": true, "score": 1, "last_activity_date": 1446053965, "creation_date": 1446053965, "answer_id": 33397902, "question_id": 33397208, "link": "https://stackoverflow.com/questions/33397208/switching-letters-in-a-string-in-c/33397902#33397902", "title": "Switching letters in a string in C", "body": "<p>As I commented you need a space before the <code>%c</code> in these lines</p>\n\n<pre><code>scanf(\"%c\", &amp;x[i]);\nscanf(\"%c\", &amp;y[i]);\n</code></pre>\n\n<p>to prevent the <code>%c</code> format type reading the white-space left in the input buffer by previous <code>scanf</code> calls. Change to</p>\n\n<pre><code>scanf(\" %c\", &amp;x[i]);\nscanf(\" %c\", &amp;y[i]);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1446056407, "last_edit_date": 1495541038, "creation_date": 1446056407, "answer_id": 33398696, "question_id": 33397208, "link": "https://stackoverflow.com/questions/33397208/switching-letters-in-a-string-in-c/33398696#33398696", "title": "Switching letters in a string in C", "body": "<p>In addition to <a href=\"https://stackoverflow.com/a/33397902/2410359\">https://stackoverflow.com/a/33397902/2410359</a></p>\n\n<p>Code does not insure that <code>s</code> is null character terminated at print time - leads to undefined behavior.  Should use <code>for(i = 0; s[i] &amp;&amp; i&lt;n; i++)</code> to prevent overwriting it.</p>\n\n<p>This may account for excessive time usage.</p>\n\n<hr>\n\n<p>OP posts below as input.  Certainly 2 numbers must precede that for <code>scanf(\"%d %d\", &amp;n, &amp;m);</code></p>\n\n<pre><code>abcd\na b\nc d\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 5255611, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/DU9ts.jpg?s=128&g=1", "display_name": "Hesham Saleh", "link": "https://stackoverflow.com/users/5255611/hesham-saleh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 433, "favorite_count": 0, "accepted_answer_id": 33397902, "answer_count": 3, "score": 1, "last_activity_date": 1446056674, "creation_date": 1446051904, "question_id": 33397208, "link": "https://stackoverflow.com/questions/33397208/switching-letters-in-a-string-in-c", "title": "Switching letters in a string in C", "body": "<p>I'm not sure why this code does not work.</p>\n\n<p>This code is supposed to, for example, switch all a's in the string to b's, and all b's to a's and print the result.</p>\n\n<p>input:</p>\n\n<pre><code>abcd\na b\nc d\n</code></pre>\n\n<p>Intended output:</p>\n\n<pre><code>badc\n</code></pre>\n\n<p>Code:</p>\n\n<pre><code>int main()\n{\n    int n, m, i, j;\n\n    scanf(\"%d %d\", &amp;n, &amp;m);\n\n    char s[n+1], x[m+1], y[m+1];\n\n    scanf(\"%s\", s);\n\n    for(i=0; i&lt;m; i++)\n    {\n        scanf(\"%c\", &amp;x[i]);\n        scanf(\"%c\", &amp;y[i]);\n    }\n\n    for(j = 0; j &lt; m; j++)\n    {\n        for(i = 0; i&lt;n; i++)\n        {\n            if(s[i] == x[j])\n                s[i] = y[j];\n            else if(s[i] == y[j])\n                s[i] = x[j];\n        }\n    }\n\n    printf(\"%s\", s);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "operating-system", "posix"], "answers": [{"tags": [], "owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "is_accepted": true, "score": 1, "last_activity_date": 1446054217, "creation_date": 1446054217, "answer_id": 33398006, "question_id": 33397199, "link": "https://stackoverflow.com/questions/33397199/parent-child-interprocess-comunication-is-keeeping-pipes-open-ok/33398006#33398006", "title": "Parent child interprocess comunication - is keeeping pipes open OK?", "body": "<p>Yes your solution is correct. But there is problems in your code:</p>\n\n<ul>\n<li>case 0 is the child, you will benefit in redirecting pipe ends onto standard input and output (use <code>dup</code> or <code>dup2</code>); passing descriptor ids to the child is weird.</li>\n<li>default is the parent, so you need to <code>write</code> before <code>read</code>ing.</li>\n</ul>\n\n<p>\"not closing unused pipes is an error\" : it is not an error but may cause problems (detecting the end of a communication would be difficult or impossible), but it seems that you correctly close all non useful pipe ends in your code, so ok. In general the number of open pipes is not really an issue, as open files...</p>\n"}], "owner": {"reputation": 4168, "user_id": 3552561, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e7d0994b2ce09612027ca2b69e6bddd5?s=128&d=identicon&r=PG&f=1", "display_name": "qiubit", "link": "https://stackoverflow.com/users/3552561/qiubit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 33398006, "answer_count": 1, "score": 0, "last_activity_date": 1446054217, "creation_date": 1446051873, "question_id": 33397199, "link": "https://stackoverflow.com/questions/33397199/parent-child-interprocess-comunication-is-keeeping-pipes-open-ok", "title": "Parent child interprocess comunication - is keeeping pipes open OK?", "body": "<p>I have to implement a program in which a process sends data it has received from parent process to its child process, waits until the child sends him  processed data back, and then return processed data to child process (so e.g. in case of 4 processes the data flow would look like this <code>P1-&gt;P2-&gt;P3-&gt;P4-&gt;P3-&gt;P2-&gt;P1</code>). For means of interprocess communication I need to use pipes. Here's an approach I planned to take:</p>\n\n<p><code>./child</code></p>\n\n<pre><code>// Assert argv contains 2 pipe descriptors - for reading\n// from parent and for writing to parent, both of type char[]\n\n// I'm not handling system errors currently\n\nint main(int argc, char *argv[]) {\n    int read_dsc, write_dsc;\n    read_dsc = atoi(argv[1]);\n    write_dsc = atoi(argv[2]);\n    char data[DATA_SIZE];\n    read (read_dsc, data, DATA_SIZE - 1);\n    close (read_dsc);\n    // Process data...\n    (...)\n    // Pass processed data further\n    int pipeRead[2]; // Child process will read from this pipe\n    int pipeWrite[2]; // Child process will write into this pipe\n    pipe(pipeRead);\n    pipe(pipeWrite);\n    switch(fork()) {\n        case 0:\n            close (pipeRead[1]);\n            close (pipeWrite[0]);\n            char pipeReadDsc[DSC_SIZE];\n            char pipeWriteDsc[DSC_SIZE];\n            printf (pipeReadDsc, \"%d\", pipeRead[0]);\n            printf (pipeWriteDsc, \"%d\", pipeWrite[1]);\n            execl (\"./child\", \"child\", pipeReadDsc, pipeWriteDsc, (char *) 0);\n        default:\n            close(pipeRead[0]);\n            close(pipeWrite[1]);\n            wait(0);\n            read (pipeWrite[0], data, DATA_SIZE - 1);\n            close (pipeWrite[0]);\n            // Pass data to parent process\n            write (write_dsc, data, DATA_SIZE - 1);\n            close (write_dsc);\n    }\n}\n</code></pre>\n\n<p>High level description of my solution is as follows: make 2 pipes, one for writing to child process, one for reading from child process. Wait until child process finishes and then read from read pipe and pass data to parent.</p>\n\n<p>The problem is I don't know whether this approach is correct. I've read somewhere that not closing unused pipes is an error as it clutters OS file descriptors and there shouldn't be many opened pipes at once. Here however we're keping unclosed pipe for reading from a child and potentially if there are <code>n</code> processes, there are <code>n</code> opened pipes when process number <code>n</code> processes it's data (all parent processes are waiting for data to come back). However I can't see any other way to solve this problem...</p>\n\n<p>So - is my solution correct? If it isn't, how should I approach this problem?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1446050655, "post_id": 33396765, "comment_id": 54584941, "body": "<i>but it doesn&#39;t work</i> Care to elaborate on that?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1446050830, "post_id": 33396765, "comment_id": 54585048, "body": "<a href=\"http://en.cppreference.com/w/c/string/byte/strstr\" rel=\"nofollow noreferrer\"><code>strstr()</code></a> takes two <code>char const *</code> pointer parameters that point each to a NUL terminated string."}, {"owner": {"reputation": 56995, "user_id": 174614, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ca9a84fecd3f2fea333e8a1ef16edf98?s=128&d=identicon&r=PG", "display_name": "Tony The Lion", "link": "https://stackoverflow.com/users/174614/tony-the-lion"}, "edited": false, "score": 0, "creation_date": 1446051087, "post_id": 33396765, "comment_id": 54585235, "body": "This is clearly C and not C++"}, {"owner": {"reputation": 1, "user_id": 5499266, "user_type": "registered", "profile_image": "https://graph.facebook.com/555006524664247/picture?type=large", "display_name": "Alex ", "link": "https://stackoverflow.com/users/5499266/alex"}, "edited": false, "score": 0, "creation_date": 1446051205, "post_id": 33396765, "comment_id": 54585323, "body": "well it says &quot;invalid conversion from char to char* &quot;"}, {"owner": {"reputation": 1738, "user_id": 5477536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14649f2805928d4ab23ab0dafa475553?s=128&d=identicon&r=PG&f=1", "display_name": "GreatAndPowerfulOz", "link": "https://stackoverflow.com/users/5477536/greatandpowerfuloz"}, "edited": false, "score": 0, "creation_date": 1446051359, "post_id": 33396765, "comment_id": 54585437, "body": "@Alex, the <code>strstr</code> function takes two <code>char const *</code> parameters but <code>sir2</code> is a <code>char</code>"}, {"owner": {"reputation": 1, "user_id": 5499266, "user_type": "registered", "profile_image": "https://graph.facebook.com/555006524664247/picture?type=large", "display_name": "Alex ", "link": "https://stackoverflow.com/users/5499266/alex"}, "edited": false, "score": 0, "creation_date": 1446051651, "post_id": 33396765, "comment_id": 54585615, "body": "so what should I do to convert sir2 into char const* and make the program work well?"}, {"owner": {"reputation": 1738, "user_id": 5477536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14649f2805928d4ab23ab0dafa475553?s=128&d=identicon&r=PG&f=1", "display_name": "GreatAndPowerfulOz", "link": "https://stackoverflow.com/users/5477536/greatandpowerfuloz"}, "edited": false, "score": 0, "creation_date": 1446051791, "post_id": 33396765, "comment_id": 54585692, "body": "@Alex, please see my answer below"}, {"owner": {"reputation": 1, "user_id": 5499266, "user_type": "registered", "profile_image": "https://graph.facebook.com/555006524664247/picture?type=large", "display_name": "Alex ", "link": "https://stackoverflow.com/users/5499266/alex"}, "edited": false, "score": 0, "creation_date": 1446052737, "post_id": 33396765, "comment_id": 54586307, "body": "Yea I&#39;ve seen your reply but I still don&#39;t know what should I replace in my code. I tried to make sir2 as char const* but still doesn&#39;t work."}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 0, "creation_date": 1446053008, "post_id": 33396765, "comment_id": 54586505, "body": "@Alex Clarify one thing <code>sir2</code> is a single character or a string ?"}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 0, "creation_date": 1446054178, "post_id": 33396765, "comment_id": 54587356, "body": "@Alex then why is it declared as <code>char</code> and not pointer or array ?"}, {"owner": {"reputation": 1, "user_id": 5499266, "user_type": "registered", "profile_image": "https://graph.facebook.com/555006524664247/picture?type=large", "display_name": "Alex ", "link": "https://stackoverflow.com/users/5499266/alex"}, "edited": false, "score": 0, "creation_date": 1446054303, "post_id": 33396765, "comment_id": 54587428, "body": "I just modified it now as char array and now it works but it doesn&#39;t return the right answer..."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "reply_to_user": {"reputation": 56995, "user_id": 174614, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ca9a84fecd3f2fea333e8a1ef16edf98?s=128&d=identicon&r=PG", "display_name": "Tony The Lion", "link": "https://stackoverflow.com/users/174614/tony-the-lion"}, "edited": false, "score": 0, "creation_date": 1446138444, "post_id": 33396765, "comment_id": 54630406, "body": "@TonyTheLion, Your comment is backwards.   <code>cin</code> <code>cout</code> and <code>iostream</code> are only in C++, not in C.  A look at the file names shows a <code>.cpp</code> extension, again showing that this is C++ code, not C."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1446138537, "post_id": 33396765, "comment_id": 54630464, "body": "This is C++ code, not C, they are not the same language.  Please replace the &#39;c&#39; tag with the &#39;c++&#39; tag."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1446138934, "post_id": 33396765, "comment_id": 54630745, "body": "one major problem:  the initial str1 is not NUL terminated  Another major problem: the variable &#39;k&#39; is not initialized"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5499266, "user_type": "registered", "profile_image": "https://graph.facebook.com/555006524664247/picture?type=large", "display_name": "Alex ", "link": "https://stackoverflow.com/users/5499266/alex"}, "edited": false, "score": 0, "creation_date": 1446053363, "post_id": 33397090, "comment_id": 54586776, "body": "it says the same thing... &quot;invalid conversion from char to char* &quot;"}, {"owner": {"reputation": 1738, "user_id": 5477536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14649f2805928d4ab23ab0dafa475553?s=128&d=identicon&r=PG&f=1", "display_name": "GreatAndPowerfulOz", "link": "https://stackoverflow.com/users/5477536/greatandpowerfuloz"}, "reply_to_user": {"reputation": 1, "user_id": 5499266, "user_type": "registered", "profile_image": "https://graph.facebook.com/555006524664247/picture?type=large", "display_name": "Alex ", "link": "https://stackoverflow.com/users/5499266/alex"}, "edited": false, "score": 0, "creation_date": 1446056548, "post_id": 33397090, "comment_id": 54588836, "body": "your <code>secventa</code> function needs to be rewritten as I&#39;ve written my &#39;countOfChars&#39; function. Good luck."}], "tags": [], "owner": {"reputation": 1738, "user_id": 5477536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14649f2805928d4ab23ab0dafa475553?s=128&d=identicon&r=PG&f=1", "display_name": "GreatAndPowerfulOz", "link": "https://stackoverflow.com/users/5477536/greatandpowerfuloz"}, "is_accepted": false, "score": 0, "last_activity_date": 1446051531, "creation_date": 1446051531, "answer_id": 33397090, "question_id": 33396765, "link": "https://stackoverflow.com/questions/33396765/counting-how-many-times-the-char-sir2-appears-in-sequence-sir1/33397090#33397090", "title": "Counting how many times the char sir2 appears in sequence sir1[]", "body": "<p>try this:</p>\n\n<pre><code>int countOfChars(char sir1[], char sir2)\n{\n   int count = 0;\n   char* p = sir1;\n   while (*p)\n   {\n       if (p == sir2)\n       {\n           ++count;\n       }\n       ++p;\n   }\n   return count;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1446142046, "last_edit_date": 1446142046, "creation_date": 1446141307, "answer_id": 33421373, "question_id": 33396765, "link": "https://stackoverflow.com/questions/33396765/counting-how-many-times-the-char-sir2-appears-in-sequence-sir1/33421373#33421373", "title": "Counting how many times the char sir2 appears in sequence sir1[]", "body": "<p>this code:</p>\n\n<pre><code>#include \"tipulbool.h\"\n\nint secventa (char sir1[], char sir2){\n    int contor;\n    char *p;\n    p = strstr(sir1[], sir2);\n    if(p)\n        contor++;\n    while(p){\n        p = strstr(p + 1, sir2);\n        if(p)\n            contor++;\n    }\n    return contor;\n}\n</code></pre>\n\n<p>gets lost in it self.</p>\n\n<p>suggest:</p>\n\n<pre><code>#include \"tipulbool.h\"\n\nint secventa (char sir1[], char sir2){\n    int contor = 0;\n    char *p = str1;\n\n    while(NULL != (p = strchr(p, str2) ) )\n    {\n            contor++;\n            p++;\n    }\n    return contor;\n}\n</code></pre>\n\n<p>However, note that </p>\n\n<pre><code>1) I used `strchr()` rather than `strstr()` \n   because `str2` is a single char, not a string\n2) I removed the repetitive code\n3) `str1` MUST be a NULL terminated string, which in the posted code is not the case.  \n</code></pre>\n\n<p>regarding this code:</p>\n\n<pre><code>#include \"tipulbool.h\"\nchar sir1[25], sir2;\nint n, i, k;\nint main (){\n    cin&gt;&gt;n;\n    for(i = 1; i &lt;= n; i++)\n        cin&gt;&gt;sir1[i];\n    cin&gt;&gt;sir2;\n    for(i = 1; i &lt;= n; i++)\n        k += secventa(sir1[i], sir2);\n    cout&lt;&lt;k;\n    return 0;\n}\n</code></pre>\n\n<p>in C++, an array offset starts with 0 and continues to (length of array -1)</p>\n\n<p>variables that are only used in a single function should (in general) be defined as local/auto variables within that function.</p>\n\n<p>suggest using code similar to the following:</p>\n\n<pre><code>#include \"tipulbool.h\"\n\nint main ( void )\n{\n    char sir2;\n\n    int n;      // will contain number of char in str1\n    int i;      // loop counter\n    int k = 0;  // will contain number of occurrence of str2 in str1\n\n    // get count of chars in first string\n    cin &gt;&gt; n;\n\n    // allocate room for first string (using C string)\n    // +1 to allow for NUL terminator byte\n    char *sir1 = new char[n+1];\n\n    // initialize first string\n    memset( sir1, 0x00, n+1 );\n\n    // input first string\n    for(i = 0; i &lt; n; i++)\n        cin &gt;&gt; sir1[i];\n\n    // input target char\n    cin &gt;&gt; sir2;\n\n    // get count of occurances of str2 in str1\n    k = secventa(sir1, sir2);\n\n    cout &lt;&lt; k &lt;&lt; endl;\n\n    delete [] str1;\n    return 0;\n}\n</code></pre>\n\n<p>Since this is C++, you might want to look at <code>vector</code> or <code>string</code>\nto simplify the written part of the code even further</p>\n"}], "owner": {"reputation": 1, "user_id": 5499266, "user_type": "registered", "profile_image": "https://graph.facebook.com/555006524664247/picture?type=large", "display_name": "Alex ", "link": "https://stackoverflow.com/users/5499266/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1446142046, "creation_date": 1446050594, "last_edit_date": 1446051076, "question_id": 33396765, "link": "https://stackoverflow.com/questions/33396765/counting-how-many-times-the-char-sir2-appears-in-sequence-sir1", "title": "Counting how many times the char sir2 appears in sequence sir1[]", "body": "<p>I've got a problem with some chars and i can't figure out how to solve it. It is given a sequence of strings and another string. And I have to count the number of appearances of the string in the sequence of strings. I did the program below but it doesn't work.</p>\n\n<p>main.cpp</p>\n\n<pre><code>#include \"tipulbool.h\"\nchar sir1[25], sir2;\nint n, i, k;\nint main (){\n    cin&gt;&gt;n;\n    for(i = 1; i &lt;= n; i++)\n        cin&gt;&gt;sir1[i];\n    cin&gt;&gt;sir2;\n    for(i = 1; i &lt;= n; i++)\n        k += secventa(sir1[i], sir2);\n    cout&lt;&lt;k;\n    return 0;\n}\n</code></pre>\n\n<p>tipulbool.h</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string.h&gt;\nusing namespace std;\n\n\nint secventa (char sir1[], char sir2);\n</code></pre>\n\n<p>tipulbool.cpp</p>\n\n<pre><code>#include \"tipulbool.h\"\n\nint secventa (char sir1[], char sir2){\n    int contor;\n    char *p;\n    p = strstr(sir1[], sir2);\n    if(p)\n        contor++;\n    while(p){\n        p = strstr(p + 1, sir2);\n        if(p)\n            contor++;\n    }\n    return contor;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 47447, "user_id": 1172428, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/240fe123035f1c6e184f59da2f1465d9?s=128&d=identicon&r=PG", "display_name": "FatalError", "link": "https://stackoverflow.com/users/1172428/fatalerror"}, "edited": false, "score": 0, "creation_date": 1446049696, "post_id": 33396380, "comment_id": 54584246, "body": "What if you put all your libraries <i>after</i> your <code>.c</code> source file on the command line."}, {"owner": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "edited": false, "score": 3, "creation_date": 1446049743, "post_id": 33396380, "comment_id": 54584279, "body": "I thinks it linker error, check here <a href=\"http://stackoverflow.com/questions/20483476/type-undefined-reference-to-cvfastfreevoid\" title=\"type undefined reference to cvfastfreevoid\">stackoverflow.com/questions/20483476/&hellip;</a>"}, {"owner": {"reputation": 109, "user_id": 5073861, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7a0e1464fc306c43d5c89cb0f70d7e00?s=128&d=identicon&r=PG&f=1", "display_name": "Saverio", "link": "https://stackoverflow.com/users/5073861/saverio"}, "edited": false, "score": 0, "creation_date": 1446050674, "post_id": 33396380, "comment_id": 54584960, "body": "Unfortunately none of the above comments help me to solve the problem."}, {"owner": {"reputation": 5101, "user_id": 700170, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gZ8hw.png?s=128&g=1", "display_name": "Morten Jensen", "link": "https://stackoverflow.com/users/700170/morten-jensen"}, "edited": false, "score": 0, "creation_date": 1446052529, "post_id": 33396380, "comment_id": 54586162, "body": "@Saverio According to this: <a href=\"http://stackoverflow.com/questions/20483476/type-undefined-reference-to-cvfastfreevoid\" title=\"type undefined reference to cvfastfreevoid\">stackoverflow.com/questions/20483476/&hellip;</a> , <code>The libraries have to be specified after the source file on the compiler&#47;linker command line. (The linker keeps track of unresolved symbols, and resolves them via later command-line arguments.)</code> -- Seems like you&#39;re doing it the other way around ?"}], "owner": {"reputation": 109, "user_id": 5073861, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7a0e1464fc306c43d5c89cb0f70d7e00?s=128&d=identicon&r=PG&f=1", "display_name": "Saverio", "link": "https://stackoverflow.com/users/5073861/saverio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "closed_date": 1446050466, "answer_count": 0, "score": 0, "last_activity_date": 1446049484, "creation_date": 1446049484, "question_id": 33396380, "link": "https://stackoverflow.com/questions/33396380/undefined-reference-to-in-c-with-gcc", "closed_reason": "Duplicate", "title": "undefined reference to in C with gcc", "body": "<p>I have the following program:</p>\n\n<pre><code>#include &lt;opencv/cv.h&gt;\n#include &lt;opencv/highgui.h&gt;\n#include &lt;opencv2/imgproc/imgproc_c.h&gt;\n\nint main(int argc, char** argv) {\n\n  return 0;\n\n}\n</code></pre>\n\n<p>I run the following gcc command:</p>\n\n<pre><code>gcc -std=c99 -I/shared/sav/opt/include -I/shared/sav/opt/include/opencv -I/shared/sav/opt/include/opencv2 -I/shared/sav/Downloads/openCV-2.3.1/include -L/shared/sav/opt/lib -L/shared/sav/Downloads/openCV-2.3.1/build/lib -lopencv_highgui -lopencv_imgproc -lopencv_core -lm my_program.c -o my_program\n</code></pre>\n\n<p>and I have the following error messages:</p>\n\n<pre><code>/tmp/cczX8weZ.o: In function `cvDecRefData':\nmy_program.c:(.text+0xa68): undefined reference to `cvFree_'\n/tmp/cczX8weZ.o: In function `cvGetRow':\nmy_program.c:(.text+0xbc0): undefined reference to `cvGetRows'\n...\n</code></pre>\n\n<p>and other things like those above.</p>\n\n<p>What is the cause of the problem and how can I solve it?</p>\n"}, {"tags": ["c", "dll", "loadrunner"], "answers": [{"tags": [], "owner": {"reputation": 5302, "user_id": 691105, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/giG6N.jpg?s=128&g=1", "display_name": "James Pulley", "link": "https://stackoverflow.com/users/691105/james-pulley"}, "is_accepted": false, "score": 0, "last_activity_date": 1446315807, "creation_date": 1446315807, "answer_id": 33455048, "question_id": 33396244, "link": "https://stackoverflow.com/questions/33396244/loadrunner-how-to-create-a-dll-to-use-web-reg-save-param-function-with/33455048#33455048", "title": "LoadRunner: how to create a DLL to use &quot;web_reg_save_param&quot; function with", "body": "<p>Nope.  But you have found your first performance defect, the incredibly large viewstates.  Your developers likely have tossed everything into state, without deciding what is critical and what is not.  This will make you network bound and will also cause problems on older browsers which do not allow for such large variables.   </p>\n\n<p>So, start there. Report a defect related to a high dependency on network due to the size of the state management variables.  Then have someone go through and trim them.</p>\n\n<p>Note:  I have used LoadRunner with vairables as large as 16 Megabytes, which was cited as a defect and trimmed down to a couple of 100K by the way. I have seen it work with variables ass large as 20 Megabytes.  This would mean that your solution set is in excess of 20 Megabytes.   Solve the large viewstates.</p>\n"}], "owner": {"reputation": 11, "user_id": 5499180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee539a62c374db06aed8a01f271c431a?s=128&d=identicon&r=PG&f=1", "display_name": "David Campbell", "link": "https://stackoverflow.com/users/5499180/david-campbell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 636, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1491738792, "creation_date": 1446049071, "last_edit_date": 1491738792, "question_id": 33396244, "link": "https://stackoverflow.com/questions/33396244/loadrunner-how-to-create-a-dll-to-use-web-reg-save-param-function-with", "title": "LoadRunner: how to create a DLL to use &quot;web_reg_save_param&quot; function with", "body": "<p>Trying to test an ASP system which returns some very large <code>viewstate</code> parameters, causing vugen to crash on playback.  </p>\n\n<p>I have read it's possible to create a DLL to do the correlation with, e.g. - I have created a function that uses <code>web_reg_save_param</code> and wish to put this in my DLL and then include it in my LR script and call the function.  I'm hoping this would resolve the memory crash issue with vugen.</p>\n\n<p>Does anyone have any experience of this?</p>\n\n<p>I'm encountering the following problem when trying to build the DLL:</p>\n\n<pre><code>1&gt;------ Build started: Project: FunviewDll, Configuration: Debug Win32 ------\n1&gt;  stdafx.cpp\n1&gt;  dllmain.cpp\n1&gt;  FunviewDll.cpp\n1&gt;FunviewDll.obj : error LNK2019: unresolved external symbol __imp__web_reg_save_param referenced in function \"void __cdecl Funviewcs::Funview(void)\" (?Funview@Funviewcs@@YAXXZ)\n1&gt;FunviewDll.obj : error LNK2019: unresolved external symbol __imp__web_reg_save_param_ex referenced in function \"void __cdecl Funviewcs::Funview(void)\" (?Funview@Funviewcs@@YAXXZ)\n1&gt;C:\\Users\\z185876\\documents\\visual studio 2013\\Projects\\DynamicLibrary\\Debug\\FunviewDll.dll : fatal error LNK1120: 2 unresolved externals\n========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ==========\n</code></pre>\n\n<p>I'm guessing it's trying to reference the source code for the \"web_reg_save_param\" function but I have no idea where to find this?</p>\n\n<p>Anyone know where this could be found?  A DLL part of the LR install perhaps?</p>\n\n<p>Really appreciate your help with this.</p>\n"}, {"tags": ["c", "postgresql", "libpq"], "comments": [{"owner": {"reputation": 119223, "user_id": 5070879, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/7534153a9cc70ad4e20680d6ca1b09ff?s=128&d=identicon&r=PG&f=1", "display_name": "Lukasz Szozda", "link": "https://stackoverflow.com/users/5070879/lukasz-szozda"}, "edited": false, "score": 0, "creation_date": 1446048976, "post_id": 33396205, "comment_id": 54583696, "body": "Use exact datatype <code>DECIMAL&#47;NUMERIC</code>"}, {"owner": {"reputation": 3005, "user_id": 295856, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/57f0f3c86c0798a0d8486ed962f1924c?s=128&d=identicon&r=PG", "display_name": "larryzhao", "link": "https://stackoverflow.com/users/295856/larryzhao"}, "reply_to_user": {"reputation": 119223, "user_id": 5070879, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/7534153a9cc70ad4e20680d6ca1b09ff?s=128&d=identicon&r=PG&f=1", "display_name": "Lukasz Szozda", "link": "https://stackoverflow.com/users/5070879/lukasz-szozda"}, "edited": false, "score": 0, "creation_date": 1446049024, "post_id": 33396205, "comment_id": 54583727, "body": "@lad2025 I tried <code>NUMERIC (15, 8)</code>, it&#39;s the same. I haven&#39;t try <code>DECIMAL</code> yet."}, {"owner": {"reputation": 48919, "user_id": 238814, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4f93d624a8c2c7792b56547b662435de?s=128&d=identicon&r=PG", "display_name": "Daniel V&#233;rit&#233;", "link": "https://stackoverflow.com/users/238814/daniel-v%c3%a9rit%c3%a9"}, "edited": false, "score": 0, "creation_date": 1446051420, "post_id": 33396205, "comment_id": 54585477, "body": "The result of <code>atof</code> followed by <code>printf</code> is independant of libpq or postgres. What you see is just an expected imprecision in a decimal representation of IEEE double. See for example <a href=\"http://stackoverflow.com/questions/9068434\">decimal number and exact representation</a>"}, {"owner": {"reputation": 3005, "user_id": 295856, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/57f0f3c86c0798a0d8486ed962f1924c?s=128&d=identicon&r=PG", "display_name": "larryzhao", "link": "https://stackoverflow.com/users/295856/larryzhao"}, "reply_to_user": {"reputation": 48919, "user_id": 238814, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4f93d624a8c2c7792b56547b662435de?s=128&d=identicon&r=PG", "display_name": "Daniel V&#233;rit&#233;", "link": "https://stackoverflow.com/users/238814/daniel-v%c3%a9rit%c3%a9"}, "edited": false, "score": 0, "creation_date": 1446225155, "post_id": 33396205, "comment_id": 54671003, "body": "@DanielV&#233;rit&#233; Yes, I understand it has nothing to do with libpq/postgres. What I&#39;d like to know is how to get an exact double value from postgres. What I could find is to use PQgetValue, but it gives me an ascii string of the double value ( which I thought it would be a binary value ). So I had to convert it with atof, from which I get a double value with a tiny difference. Is there a way I could get an exact double number out of Postgres directly?"}, {"owner": {"reputation": 48919, "user_id": 238814, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4f93d624a8c2c7792b56547b662435de?s=128&d=identicon&r=PG", "display_name": "Daniel V&#233;rit&#233;", "link": "https://stackoverflow.com/users/238814/daniel-v%c3%a9rit%c3%a9"}, "edited": false, "score": 0, "creation_date": 1446228939, "post_id": 33396205, "comment_id": 54673062, "body": "@larryzhao: there&#39;s no way because the imprecision comes from the <code>double</code> datatype itself, both in C/C++ and in SQL. If you requested a binary representation (it&#39;s possible, see <code>PQexecParams</code>) it wouldn&#39;t change that fact."}], "owner": {"reputation": 3005, "user_id": 295856, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/57f0f3c86c0798a0d8486ed962f1924c?s=128&d=identicon&r=PG", "display_name": "larryzhao", "link": "https://stackoverflow.com/users/295856/larryzhao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 845, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1446048934, "creation_date": 1446048934, "last_edit_date": 1495541273, "question_id": 33396205, "link": "https://stackoverflow.com/questions/33396205/how-to-get-double-value-using-libpq-from-postgres", "title": "How to get double value using libpq from Postgres", "body": "<p>I am using <code>libpq</code> to connect to Postgres on Windows 10 using Visual Studio 2015, PostgreSQL9.4</p>\n\n<p>I have a table like this:</p>\n\n<pre><code>CREATE TABLE real_data (\n  plane_id integer NOT NULL PRIMARY KEY,\n  timestamp integer NOT NULL,\n  data1 double precision\n);\n\nINSERT INTO real_data VALUES ('100001', '14987654', 635.28938)\n</code></pre>\n\n<p>And when I get it out <code>char* data1 = PQgetvalue(res, row,2);</code>,  <code>data1</code> is <code>\"635.28938\"</code> in the watch, and if I convert it to double with <code>atof</code>, <code>double d_value = atof(data1)</code>, <code>d_value</code> is <code>635.28938000000000005</code>. It's not exactly the same.</p>\n\n<p>I found this question on SO: <a href=\"https://stackoverflow.com/questions/20504043/how-to-get-the-double-value-using-libpq\">How to get the double value using libpq?</a> , but I don't think I can follow it since I have a ascii string representing the original double in <code>data1</code>.</p>\n\n<p>How can I get an accurate double number from Postgres?</p>\n\n<p>Thanks a lot.</p>\n"}, {"tags": ["c", "xcode", "lldb"], "answers": [{"tags": [], "owner": {"reputation": 3068, "user_id": 901230, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pHGeS.jpg?s=128&g=1", "display_name": "Enrico Granata", "link": "https://stackoverflow.com/users/901230/enrico-granata"}, "is_accepted": true, "score": 1, "last_activity_date": 1446146368, "creation_date": 1446146368, "answer_id": 33422841, "question_id": 33395661, "link": "https://stackoverflow.com/questions/33395661/view-variable-value-in-memory-during-xcode-debugging/33422841#33422841", "title": "View variable value in memory during Xcode debugging?", "body": "<p>Imagine being stopped here:</p>\n\n<pre><code>int foo(int* ptr) {\n  return *ptr; // HERE\n}\n</code></pre>\n\n<p>and you happen to know that ptr points to a 5 element int array</p>\n\n<pre><code>(lldb) memory read -t int -c 5 `ptr`\n</code></pre>\n\n<p>will produce the following output for you:</p>\n\n<pre><code>(int) 0x7fff5fbff920 = 1\n(int) 0x7fff5fbff924 = 2\n(int) 0x7fff5fbff928 = 3\n(int) 0x7fff5fbff92c = 4\n(int) 0x7fff5fbff930 = 5\n</code></pre>\n\n<p>\"memory read\" should be obvious</p>\n\n<p>-t int means \"print elements of type int\"</p>\n\n<p>-c 5 means \"print 5 elements\"</p>\n\n<p>`ptr` means \"evaluate the string ptr as an expression and replace the result in the command\" - this is a general LLDB trick where backticks introduce inline expressions in commands </p>\n"}], "owner": {"reputation": 16266, "user_id": 2106753, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/47ae1ebd6decf82459d4aefaaaf1daea?s=128&d=identicon&r=PG&f=1", "display_name": "Sibbs Gambling", "link": "https://stackoverflow.com/users/2106753/sibbs-gambling"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 570, "favorite_count": 0, "accepted_answer_id": 33422841, "answer_count": 1, "score": 0, "last_activity_date": 1446146368, "creation_date": 1446047491, "last_edit_date": 1446085106, "question_id": 33395661, "link": "https://stackoverflow.com/questions/33395661/view-variable-value-in-memory-during-xcode-debugging", "title": "View variable value in memory during Xcode debugging?", "body": "<p>I am debugging my C project in Xcode. Basically, I have many nested arrays, whose values I wish to inspect. They are present in the console (not sure if it is the right name) in the form of starting memory address, like</p>\n\n<pre><code>a (0x0000000100300010)\n|-- b (0x0000000100105750)\n    |-- c (0x0000000100108250)\n</code></pre>\n\n<p>I find it very hard to inspect the values of, say, array <code>c</code> in <code>lldb</code>. I've tried the <code>po</code> command in <code>lldb</code>, but no luck. So <strong>my first question</strong> is how do people usually do this inspection? I believe it is a common thing to do while debugging.</p>\n\n<p>Then I read somewhere that one can achieve this by inspecting the memory contents at, say, <code>0x0000000100108250</code>, which I did (screenshot as below).</p>\n\n<p><a href=\"https://i.stack.imgur.com/uYCJY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uYCJY.png\" alt=\"enter image description here\"></a></p>\n\n<p>It appears to me that the memory content is displayed as binary. I understand that this is physically more realistic, but to my goal (inspecting variable values), this is quite counterintuitive. <strong>My second question</strong>: is there a way of inspecting these memory contents as natural decimal numbers? If not, what sequence should I following in reading these binary numbers (specifically, what is <code>01 00 00 00</code>)? </p>\n"}, {"tags": ["c", "arrays", "for-loop", "mips"], "comments": [{"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 1, "creation_date": 1446048486, "post_id": 33395460, "comment_id": 54583325, "body": "Do you have a GCC compiler targeting MIPS? If so, use something like <code>gcc-mips-whatever -S foo.c</code> to generate a &quot;foo.s&quot; file. Use the generated assember output as a learning aid!"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1446048618, "post_id": 33395460, "comment_id": 54583430, "body": "You need another register. s0 has k, s1 has 100, s2 has first, so s3 seems like the logical choice for k-1. (Assuming that there is an s3.)"}, {"owner": {"reputation": 27, "user_id": 3529167, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb3f3cfd7643307f0c21b1c24471916c?s=128&d=identicon&r=PG&f=1", "display_name": "user3529167", "link": "https://stackoverflow.com/users/3529167/user3529167"}, "edited": false, "score": 0, "creation_date": 1446048774, "post_id": 33395460, "comment_id": 54583544, "body": "Ok so i set s3 as k-1, but then what? How do i connect it to the vek? Like vek[k-1]"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1446049318, "post_id": 33395460, "comment_id": 54583942, "body": "Use <code>sll t2,s3,2</code> followed by <code>add s4,t2,zero</code>. (Assuming that there is an s4.)"}, {"owner": {"reputation": 27, "user_id": 3529167, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb3f3cfd7643307f0c21b1c24471916c?s=128&d=identicon&r=PG&f=1", "display_name": "user3529167", "link": "https://stackoverflow.com/users/3529167/user3529167"}, "edited": false, "score": 0, "creation_date": 1446049790, "post_id": 33395460, "comment_id": 54584309, "body": "Ok, so when i do like i did above ill get <code>vek[k]</code>?  so what should i do to get <code>vek[k-1]=vek[k]</code>?"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1446050148, "post_id": 33395460, "comment_id": 54584591, "body": "Use the <code>sll</code> instruction to put addresses into the <code>t</code> registers. Then use a &quot;load&quot; instruction to read <code>ver[k]</code> into an <code>s</code> register, and a &quot;store&quot; instruction to write the contents of the <code>s</code> register to <code>ver[k-1]</code>. I&#39;m not familiar enough with the MIPS instruction set to know the mnemonics for the &quot;load&quot; and &quot;store&quot; instructions."}, {"owner": {"reputation": 27, "user_id": 3529167, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb3f3cfd7643307f0c21b1c24471916c?s=128&d=identicon&r=PG&f=1", "display_name": "user3529167", "link": "https://stackoverflow.com/users/3529167/user3529167"}, "edited": false, "score": 1, "creation_date": 1446050227, "post_id": 33395460, "comment_id": 54584652, "body": "Ok thanks, i will try this!"}, {"owner": {"reputation": 5421, "user_id": 648026, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0fc33d0c0d57d681cb9f623cf98d5328?s=128&d=identicon&r=PG", "display_name": "JavaSheriff", "link": "https://stackoverflow.com/users/648026/javasheriff"}, "edited": false, "score": 0, "creation_date": 1446050836, "post_id": 33395460, "comment_id": 54585055, "body": "why not using a tool like qemu.org    see here      <a href=\"http://stackoverflow.com/questions/4175450/is-there-a-way-to-use-gcc-to-convert-c-to-mips\" title=\"is there a way to use gcc to convert c to mips\">stackoverflow.com/questions/4175450/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 3402, "user_id": 3628863, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y1lHi.jpg?s=128&g=1", "display_name": "Joe Farrell", "link": "https://stackoverflow.com/users/3628863/joe-farrell"}, "is_accepted": false, "score": 0, "last_activity_date": 1446051592, "creation_date": 1446051592, "answer_id": 33397110, "question_id": 33395460, "link": "https://stackoverflow.com/questions/33395460/c-to-mips-conversion-for-loop-and-array/33397110#33397110", "title": "C to MIPS conversion for loop and array", "body": "<p>Here's a simple implementation that ought to work, with a line-by-line explanation of what's going on:</p>\n\n<pre><code>get_first:\nlw $s0, vek           # 1. Load the word stored at location 'vek' into $s0.\naddi $s1, $zero, 0    # 2. Load zero into $s1. This will store an offset into 'vek', in bytes.\n\nloop_1:\nla $s2, vek($s1)      # 3. Load the *address* of the $s1-th word of 'vek' into $s2. This is the location you want to write to.\naddi $s1, $s1, 4      # 4. Advance the $s1 pointer to the next word in 'vek'.\nlw $s3, vek($s1)      # 5. Load the *value* of the $s1-th word of 'vek' into $s3. This is the value you want to copy.\nsw $s3, ($s2)         # 6. Store the value obtained in line 5 into the location obtained in line 3.\nblt $s1, 400, loop_1  # 7. Repeat until we have iterated over all memory in 'vek'.\n\nset_last:\nsw $s0, vek + 396     # 8. Store the value obtained in line 1 into the end of 'vek'.\n</code></pre>\n\n<p>You can probably make this more concise, but I was trying to make this easy to understand, and it's been a <em>long</em> time since I've seen MIPS.</p>\n"}], "owner": {"reputation": 27, "user_id": 3529167, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb3f3cfd7643307f0c21b1c24471916c?s=128&d=identicon&r=PG&f=1", "display_name": "user3529167", "link": "https://stackoverflow.com/users/3529167/user3529167"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 352, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1446051592, "creation_date": 1446046986, "question_id": 33395460, "link": "https://stackoverflow.com/questions/33395460/c-to-mips-conversion-for-loop-and-array", "title": "C to MIPS conversion for loop and array", "body": "<p>Im trying to convert the following C code to MIPS but im having trouble understanding how you take the [k-1] in the array.</p>\n\n<pre><code>int vek[100];\nmain()\n{\nint k;\nint first = vek[0];\n\nfor (k = 1; k &lt; 100; k++)\n{ \n   vek[k - 1] = vek[k];\n}\nvek[k \u2013 1] = first;\n}\n</code></pre>\n\n<p>Here is what i got so far: </p>\n\n<pre><code>.data\nvek: .space 400\n\n.text\n main:\n addi s0,zero,1                #k = 1\n addi s1,zero.100              #value 100\n la t1,vek                     #t1 as index in vek\n add s2,t1,zero                #first = vek[0]\n\n L1:\n bgt s0,s1,end                 #if k is bigger then 100 jump to end label\n addi s0,zero,-1               #k-1\n sll t2,s0,2                   #t2 = 4*k next space in the array\n</code></pre>\n\n<p>here is where i lose myself, i don't understand how i am supposed to get the rest of the code translated. Since there is a lack of MIPS tutorials on the web you are my last chance. If some kind soul could help translate the last part of the code and give me an explanation that would be great. </p>\n\n<p>P.S this is not something i'm going to use its simply just an example of an question that will be on the exam. </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1446045729, "post_id": 33394923, "comment_id": 54581258, "body": "Variable loanAmt is declared as having type int but in the loop you are using format specifier %f. At least change it to %d.   while (loanAmt&lt;0) {     printf(&quot;Please enter valid loan value: \\n&quot;);     scanf(&quot;%f&quot;, &amp;loanAmt); }"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1446045968, "post_id": 33394923, "comment_id": 54581435, "body": "Please edit your post and include the <i>real</i> code which compiles (copy/paste it). And also indent it properly."}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 5498923, "user_type": "registered", "profile_image": "https://graph.facebook.com/991047017623489/picture?type=large", "display_name": "Xin Li", "link": "https://stackoverflow.com/users/5498923/xin-li"}, "edited": false, "score": 0, "creation_date": 1446046390, "post_id": 33395083, "comment_id": 54581718, "body": "Thanks a lot to fix it. After fixing this, when I compile it, it says &quot;syntax error before &quot;else&quot; &quot;. Do you know what is going on?"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 19, "user_id": 5498923, "user_type": "registered", "profile_image": "https://graph.facebook.com/991047017623489/picture?type=large", "display_name": "Xin Li", "link": "https://stackoverflow.com/users/5498923/xin-li"}, "edited": false, "score": 0, "creation_date": 1446046511, "post_id": 33395083, "comment_id": 54581807, "body": "@XinLi missing brace from the <code>if</code> block."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1446049125, "post_id": 33395083, "comment_id": 54583804, "body": "Suggest using the return value of <code>scanf()</code> to determine loop continuation rather than <code>val &lt; 0</code> - else how does <code>readInt()</code> return negative numbers?  Corner case fail: Unless <code>scanf(&quot;%d&quot;, &amp;val)</code> returns 1, do not trust the contents of <code>val</code>.  In theory, <code>scanf()</code> can return <code>EOF</code> to signify input error, in which case, <code>val</code> is undefined."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1446049625, "post_id": 33395083, "comment_id": 54584191, "body": "@chux, All valid points except the one about negative numbers. The OP&#39;s requirement seems to be that the number cannot be a negative number. Updated the answer."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1446054644, "post_id": 33395083, "comment_id": 54587660, "body": "Agree OP&#39;s requirement implies non-negative numbers.  Function name <code>readInt()</code> does not carry that same connotation.  IAC - a small matter."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1446054925, "post_id": 33395083, "comment_id": 54587837, "body": "@chux. IAC?? A new acronym for me."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1446055091, "post_id": 33395083, "comment_id": 54587949, "body": "IAC: In any case <i>or</i> should you agree or disagree, the following applies"}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 2, "last_activity_date": 1446049531, "last_edit_date": 1446049531, "creation_date": 1446045981, "answer_id": 33395083, "question_id": 33394923, "link": "https://stackoverflow.com/questions/33394923/program-that-does-not-return-anything/33395083#33395083", "title": "Program that does not return anything", "body": "<p>You are using the wrong format specifier to read <code>loanAmount</code> and <code>numberPay</code>. Instead of <code>\"%f\"</code>, use <code>\"%d\"</code>.</p>\n\n<pre><code>scanf(\"%d\", &amp;loanAmt);\n</code></pre>\n\n<p>and </p>\n\n<pre><code>scanf(\"%d\", &amp;numberPay);\n</code></pre>\n\n<p>Also, always check the return value of <code>scanf</code> to make sure that it was able to assign data to all the variables.</p>\n\n<p>Change the loop:</p>\n\n<pre><code>while (loanAmt&lt;0)\n{\n   printf(\"Please enter valid loan value: \\n\");\n   scanf(\"%d\", &amp;loanAmt);\n}\n</code></pre>\n\n<p>to</p>\n\n<pre><code>while (loanAmt&lt;0)\n{\n   printf(\"Please enter valid loan value: \\n\");\n   if ( scanf(\"%d\", &amp;loanAmt) != 1 )\n   {\n      // Discard the rest of the line.\n      int c;\n      while ( (c = fgetc(stdin)) = '\\n' &amp;&amp; c != EOF );\n   }\n}\n</code></pre>\n\n<p>It will be still better to put all the checks in a function and call the function from <code>main</code>.</p>\n\n<pre><code>int readInt(char const* prompt)\n{\n   int val = -1;\n\n   printf(\"%s\\n\", prompt);\n   while ( scanf(\"%f\", &amp;val) != 1 || val &lt; 0)\n   {\n      // Discard rest of the line.\n      int c;\n      while ( (c = fgetc(stdin)) = '\\n' &amp;&amp; c != EOF );\n\n      // If EOF is reached, we have a problem.\n      if ( c == EOF )\n      {\n         exit(0);\n      }\n      printf(\"%s\\n\", prompt);\n   }\n\n   return val;\n}\n</code></pre>\n\n<p>and then, use:</p>\n\n<pre><code>loanAmount = readInt(\"Please enter valid loan value: \");\n</code></pre>\n\n<p>Add a similar function to read <code>float</code>s and call it for reading the variables that are of type <code>float</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 19, "user_id": 5498923, "user_type": "registered", "profile_image": "https://graph.facebook.com/991047017623489/picture?type=large", "display_name": "Xin Li", "link": "https://stackoverflow.com/users/5498923/xin-li"}, "edited": false, "score": 0, "creation_date": 1446047011, "post_id": 33395151, "comment_id": 54582183, "body": "Thank you!  If I use %d can I still keep 2 decimal place?"}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "reply_to_user": {"reputation": 19, "user_id": 5498923, "user_type": "registered", "profile_image": "https://graph.facebook.com/991047017623489/picture?type=large", "display_name": "Xin Li", "link": "https://stackoverflow.com/users/5498923/xin-li"}, "edited": false, "score": 2, "creation_date": 1446047059, "post_id": 33395151, "comment_id": 54582218, "body": "@XinLi integers can&#39;t be( <i>more precisely they don&#39;t have</i>) represented with decimal place . If you want answer with decimals you should declare that variables as <code>float </code> or <code>double</code>."}], "tags": [], "owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "is_accepted": true, "score": 1, "last_activity_date": 1446046642, "last_edit_date": 1446046642, "creation_date": 1446046150, "answer_id": 33395151, "question_id": 33394923, "link": "https://stackoverflow.com/questions/33394923/program-that-does-not-return-anything/33395151#33395151", "title": "Program that does not return anything", "body": "<pre><code> scanf(\"%f\", &amp;loanAmt);         // loanAmt is int\n ... \n scanf(\"%f\", &amp;numberPay);       //numberPay is int \n</code></pre>\n\n<p>In both wrong argument is passed to <code>%f</code> , therefore , causes UB . Use <code>%d</code> specifier .</p>\n\n<p>And in this one <code>}</code> is missing -</p>\n\n<pre><code>if(loanAmt&gt;monthlyPay)\n{\n   while(count&lt;numberPay)\n   {\n     loanAmt = loanAmt*(1 + (yearInt/12)) - monthlyPay;\n     count += count+1;\n   }\n   printf(\"The amount of last payment is: %.2f\\n\", loanAmt);    //use %d \n     // ADD '}' here \nelse    // ADD '{' here \n   printf(\"The amount of last payment is: %.2f\\n\", loanAmt);    //use %d \n}\n</code></pre>\n\n<p>Put a <code>}</code> before <code>else {</code>.</p>\n"}], "owner": {"reputation": 19, "user_id": 5498923, "user_type": "registered", "profile_image": "https://graph.facebook.com/991047017623489/picture?type=large", "display_name": "Xin Li", "link": "https://stackoverflow.com/users/5498923/xin-li"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 33395151, "answer_count": 2, "score": -1, "last_activity_date": 1446049531, "creation_date": 1446045553, "last_edit_date": 1446046069, "question_id": 33394923, "link": "https://stackoverflow.com/questions/33394923/program-that-does-not-return-anything", "title": "Program that does not return anything", "body": "<p>I am working on a program in C that can return loan payment.\nyearInt is year interest\nloanAmt is total amount of loan\nmonthlyPay is monthly payment\nnumberPay is number of monthly payment</p>\n\n<p>For some reasons, when I run the program, there is nothing shows up, even I type in a negative number.</p>\n\n<p>Is there anyway to fix it?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main(void)\n{\nfloat yearInt = -1;\nint loanAmt = -1;\nfloat monthlyPay = -1;\nint numberPay = -1;\nint count = 0;\n\nwhile (loanAmt&lt;0)\n{\n    printf(\"Please enter valid loan value: \\n\");\n    scanf(\"%f\", &amp;loanAmt);\n}\n\nwhile (yearInt&lt;0)\n{\n    printf(\"Please enter valid yearly interest value: \\n\");\n    scanf(\"%f\", &amp;yearInt)\n}\n\nwhile (monthlyPay&lt;0)\n{\n    printf(\"Please enter valid monthly payment value: \\n\");\n    scanf(\"%f\", &amp;monthlyPay);\n}\n\nwhile (numberPay&lt;0)\n{\n    printf(\"Please enter valid number of monthly payments: \\n\");\n    scanf(\"%f\", &amp;numberPay);\n}\n\nif(loanAmt&gt;monthlyPay)\n{\n    while(count&lt;numberPay)\n    {\n        loanAmt = loanAmt*(1 + (yearInt/12)) - monthlyPay;\n        count += count+1;\n    }\n    printf(\"The amount of last payment is: %.2f\\n\", loanAmt);\nelse\n    printf(\"The amount of last payment is: %.2f\\n\", loanAmt);\n}\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "sockets", "udp"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 3, "creation_date": 1446046375, "post_id": 33394916, "comment_id": 54581702, "body": "You can never assume no packet loss for UDP, even on a local network."}, {"owner": {"reputation": 543, "user_id": 2041567, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/913269b778c227420e29a1a455b72d65?s=128&d=identicon&r=PG", "display_name": "Yun-Chih Chen", "link": "https://stackoverflow.com/users/2041567/yun-chih-chen"}, "edited": false, "score": 1, "creation_date": 1446046558, "post_id": 33394916, "comment_id": 54581851, "body": "What&#39;s the output of <code>cat &#47;proc&#47;sys&#47;fs&#47;file-max</code> ?  5000 threads and 5000 connections might use up memory?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1446046706, "post_id": 33394916, "comment_id": 54581964, "body": "what is the second parameter on the call to the system function: <code>listen()</code>?  In general( embedded Linux actually queues UDP packets) if the receiver is not ready to read a UDP packet before the next one arrives, the first one is lost/ overlayed by the next UDP packet.  Is the code actually creating a new connection for each packet?  If so, that will greatly reduce the available through put"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 2, "creation_date": 1446046841, "post_id": 33394916, "comment_id": 54582062, "body": "Please post actual code.  a modern computer should be able to keep up with a UDP connection that averages 100msec between packets"}, {"owner": {"reputation": 2317, "user_id": 1135245, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/5c183921b037a72e762d910fd012b835?s=128&d=identicon&r=PG", "display_name": "shantanu", "link": "https://stackoverflow.com/users/1135245/shantanu"}, "reply_to_user": {"reputation": 543, "user_id": 2041567, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/913269b778c227420e29a1a455b72d65?s=128&d=identicon&r=PG", "display_name": "Yun-Chih Chen", "link": "https://stackoverflow.com/users/2041567/yun-chih-chen"}, "edited": false, "score": 0, "creation_date": 1446057080, "post_id": 33394916, "comment_id": 54589162, "body": "@Yun-ChihChen I have only one thread. cat returns 780670."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 1, "creation_date": 1446248319, "post_id": 33394916, "comment_id": 54680983, "body": "There is no such thing as a UDP connection."}], "answers": [{"tags": [], "owner": {"reputation": 4485, "user_id": 2205033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a8d36e28c13c9214b2281af2d12916b?s=128&d=identicon&r=PG", "display_name": "Johannes Overmann", "link": "https://stackoverflow.com/users/2205033/johannes-overmann"}, "is_accepted": true, "score": 9, "last_activity_date": 1544088613, "last_edit_date": 1544088613, "creation_date": 1446247656, "answer_id": 33446292, "question_id": 33394916, "link": "https://stackoverflow.com/questions/33394916/concurrent-udp-connection-limit-in-c-c/33446292#33446292", "title": "Concurrent UDP connection limit in C/C++", "body": "<p>There is no 'connection' for UDP. All packets are just sent between peers, and the OS does some magic buffering to avoid packet loss to some degree. </p>\n\n<p>But when too many packets arrive, or if the receiving application is too slow reading the packets, some packets get dropped without notice. This is not an error.</p>\n\n<p>For example Linux has a UDP receive buffer which is about 128k by default (I think). You can probably change that, but it is unlikely to solve the systematic problem that UDP may expose packet loss.</p>\n\n<p>With UDP there is no congestion control like there is for TCP. The raw artifacts of the underlying transport (Ethernet, local network) are exposed. Your 5000 senders get probably more CPU time in total than your receiver, and so they can send more packets than the receiver can receive. With UDP senders do <em>not</em> get blocked (e.g. in sendto()) when the receiver cannot keep up receiving the packets. With UDP the sender always needs to control and limit the data rate explicitly. There is no back pressure from the network side (*).</p>\n\n<p>(*) Theoretically there is no back pressure in UDP. But on some operating systems (e.g. Linux) you can observe that there <em>is</em> back pressure (at least to some degree) when sending for example over a local Ethernet. The OS blocks in sendto() when the network driver of the physical network interface reports that it is busy (or that its buffer is full). But this back pressure stops working when the local network adapter cannot determine the network 'being busy' for the whole network path. See also \"Ethernet flow control (Pause Frames)\". Through this the sending side can block the sending application even when the receive-buffer on the receiving side is full. This explains why often there seems to be a UDP back-pressure like a TCP back pressure, although there is nothing in the UDP protocol to support back pressure.</p>\n"}], "owner": {"reputation": 2317, "user_id": 1135245, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/5c183921b037a72e762d910fd012b835?s=128&d=identicon&r=PG", "display_name": "shantanu", "link": "https://stackoverflow.com/users/1135245/shantanu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1802, "favorite_count": 0, "accepted_answer_id": 33446292, "answer_count": 1, "score": 2, "last_activity_date": 1544088613, "creation_date": 1446045527, "last_edit_date": 1446046028, "question_id": 33394916, "link": "https://stackoverflow.com/questions/33394916/concurrent-udp-connection-limit-in-c-c", "title": "Concurrent UDP connection limit in C/C++", "body": "<p>I wrote a <code>server in c</code> which receive <code>UDP</code> data from client in port <code>X</code>. I have used <code>Epoll(non block)</code> socket for <code>UDP</code> listening and has only one thread as worker. Pseudo code is following:</p>\n\n<pre><code>on_data_receive(socket){\n    process(); //take 2-4 millisecond\n    send_response(socket);\n} \n</code></pre>\n\n<p>But when I send <code>5000 concurrent</code> (using thread) request server miss <code>5-10%</code> request. on_data_receive() never called for 5-10% request. I am testing in local network so you can assume there is no packet loss. My question is why on_data_receive didn't call for some request? What is the connection limit for socket? With the increase of concurrent request loss ratio also increase. </p>\n\n<p><strong>Note: I used random sleep upto 200 millisecond before sending the request to server.</strong> </p>\n"}, {"tags": ["c", "algorithm", "do-while"], "comments": [{"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1446045302, "post_id": 33394729, "comment_id": 54580921, "body": "Are the files stored on disk? Then reading the files will likely be much slower than comparing them."}, {"owner": {"reputation": 640, "user_id": 2091953, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/c8b4d78e4fa4176bc42a38b326d0f6dc?s=128&d=identicon&r=PG", "display_name": "mjswartz", "link": "https://stackoverflow.com/users/2091953/mjswartz"}, "reply_to_user": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1446045452, "post_id": 33394729, "comment_id": 54581042, "body": "I&#39;m not really worried about the file comparison part, just the workload distribution. Specifically why the do-while loop is being executed when <code>append_count</code> = 0"}, {"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 2, "creation_date": 1446045638, "post_id": 33394729, "comment_id": 54581196, "body": "why not? the condition is at the end of the <code>do while</code> loop, not at the begin."}, {"owner": {"reputation": 640, "user_id": 2091953, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/c8b4d78e4fa4176bc42a38b326d0f6dc?s=128&d=identicon&r=PG", "display_name": "mjswartz", "link": "https://stackoverflow.com/users/2091953/mjswartz"}, "edited": false, "score": 0, "creation_date": 1446045773, "post_id": 33394729, "comment_id": 54581292, "body": "So then would I have to wrap the do-while in an if to check the value of <code>append_count</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 338, "user_id": 5439654, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7m1uW.png?s=128&g=1", "display_name": "Kotshi", "link": "https://stackoverflow.com/users/5439654/kotshi"}, "is_accepted": true, "score": 5, "last_activity_date": 1446045699, "creation_date": 1446045699, "answer_id": 33394988, "question_id": 33394729, "link": "https://stackoverflow.com/questions/33394729/work-distribution-algorithm-in-c-do-while-issue/33394988#33394988", "title": "Work distribution algorithm in C (do while issue)", "body": "<p>A 'do while' is always executed at least once. If you don't want it to behave that way, try using a regular 'while'.</p>\n"}, {"comments": [{"owner": {"reputation": 640, "user_id": 2091953, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/c8b4d78e4fa4176bc42a38b326d0f6dc?s=128&d=identicon&r=PG", "display_name": "mjswartz", "link": "https://stackoverflow.com/users/2091953/mjswartz"}, "edited": false, "score": 0, "creation_date": 1446045856, "post_id": 33395001, "comment_id": 54581352, "body": "Ugh. That&#39;s what I get for thinking C was as good as Fortran ;)"}, {"owner": {"reputation": 617, "user_id": 5435919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/309be11aae9fe4f6260eb76bac96f916?s=128&d=identicon&r=PG&f=1", "display_name": "hassan arafat", "link": "https://stackoverflow.com/users/5435919/hassan-arafat"}, "reply_to_user": {"reputation": 640, "user_id": 2091953, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/c8b4d78e4fa4176bc42a38b326d0f6dc?s=128&d=identicon&r=PG", "display_name": "mjswartz", "link": "https://stackoverflow.com/users/2091953/mjswartz"}, "edited": false, "score": 0, "creation_date": 1446046127, "post_id": 33395001, "comment_id": 54581547, "body": "I learned C as my first language ,so to me, languages that use the same convention as Fortran feel weird :)"}], "tags": [], "owner": {"reputation": 617, "user_id": 5435919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/309be11aae9fe4f6260eb76bac96f916?s=128&d=identicon&r=PG&f=1", "display_name": "hassan arafat", "link": "https://stackoverflow.com/users/5435919/hassan-arafat"}, "is_accepted": false, "score": 2, "last_activity_date": 1446045729, "creation_date": 1446045729, "answer_id": 33395001, "question_id": 33394729, "link": "https://stackoverflow.com/questions/33394729/work-distribution-algorithm-in-c-do-while-issue/33395001#33395001", "title": "Work distribution algorithm in C (do while issue)", "body": "<p>\"do while\" loops in C always execute at least once , what you want is \"while\" loops</p>\n"}, {"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 3, "last_activity_date": 1446045860, "creation_date": 1446045860, "answer_id": 33395043, "question_id": 33394729, "link": "https://stackoverflow.com/questions/33394729/work-distribution-algorithm-in-c-do-while-issue/33395043#33395043", "title": "Work distribution algorithm in C (do while issue)", "body": "<p>Rather that using <code>do</code>...<code>while</code>, you just want to use <code>while</code>.  This performs the check at the top of the loop instead of the bottom.</p>\n\n<pre><code>while (append_count &gt; 0)\n{\n    printf(\"im in the while...\\n\");\n    printf(\"append count is: %d\\n\", append_count);\n    printf(\"why am i here?\\n\");\n    append_index = append_index - 1;\n    file_chunks[append_index] = file_chunks[append_index] + 1;\n    append_count = append_count - 1;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": false, "score": 0, "last_activity_date": 1446048073, "creation_date": 1446048073, "answer_id": 33395900, "question_id": 33394729, "link": "https://stackoverflow.com/questions/33394729/work-distribution-algorithm-in-c-do-while-issue/33395900#33395900", "title": "Work distribution algorithm in C (do while issue)", "body": "<p>I gather from a comment that you're used to Fortran.  Here's how to write your code in more C-like C:</p>\n\n<pre><code>// Get first pass file chunks\nprintf(\"Split approximation: \");   // fputs(\"...\", stdout);  is a good choice for non-formatted output, but it's clunkier to write.\n// puts() confusingly tacks on a newline while fputs() doesn't, so puts(s) *isn't* just fputs(s, stdout).\n// Every time you use printf, remember that the first argument is being parsed as a format string, so you have to make sure you don't use a % in it, unless you write printf(\"%s\", \"...\")\n\n\nfor (int i = 0; i &lt; num_threads; i++)\n{\n// opening brace on a line by itself is a waste of space, IMO, except for the first line of a function.\n// but it's better to be consistent than to use your personal favourite style.\n\n    file_chunks[i] = num_file_compares / num_threads;   // what's wrong with integer division here?  I think this rounds the same as your old // (int)floor((double)num_file_compares / (double)num_threads);\n    printf(\"%d \", file_chunks[i]);\n}\nputchar('\\n');   // here we can use a lighter-weight i/o function\n\nint file_chunk_sum = 0;  // don't forget to initialize your variables.  And in C99 (or C++), many people prefer to declare them near where they're used instead of in a big block at the top of a function.\n// Adjust file chunks to contain all files\nfor (int i = 0; i &lt; num_threads; i++)  // don't use a loop to do this: see below\n{\n    file_chunk_sum += file_chunks[i];   // += saves human readers of your code from having to notice that it's the same variable on both sides of the =\n}\nappend_count = num_file_compares - file_chunk_sum;\n/* or you could have started with int append_count = num_f_c; and subtracted f_c[i] in the loop\n * or instead of summing, you could just take advantage of the fact that every f_c[i] has the same known value.\n * integer multiply FTW.\n * or even just make use of the remainder from your integer division and save the multiply.  (x86 at least computes remainders at the same time as dividend, so % is free if you're already doing /.)\n */\n// append_count = num_file_compares - (file_chunks[0] * num_threads);\n\n// append_count = num_file_compares % num_threads;  // or remainder\n\nprintf(\"Need to append last %d\\n\", append_count);\n\n// append_index = num_threads;  // make this a loop variable if you like.  Some people would consider packing too much stuff into a for loop to be less readable\n// actually, we can simplify the loop a *lot* by getting rid of unneeded variables.  Adjust if desired to still put the remainder counts on the later indices, rather than earlier.\n\nfor (int i=append_count ; i &gt; 0 ; i--)\n{\n    // count downwards to print a descending count, same as your old code\n    printf(\"I'm in the append loop...\\n\"  // nobody like \"im\" instead of I'm.\n           \"append count is: %d\\n\"\n           \"why am i here?\\n\", append_count);\n        /* string literals concatenate automatically.\n         * Writing multi-line string constants this way is generally preferred\n         * to having literal newlines inside double-quotes.  That can lead to problems with line endings (Unix lf vs. DOS cr/lf vs. Mac cr).\n         */\n    file_chunks[i]++;   // Much easier to read ++ when using long variable names.\n}\n\nprintf(\"Final split: \");\nfor (int i = 0; i &lt; num_threads; i++)\n{\n    printf(\"%d \", file_chunks[i]);\n}\nputchar('\\n');\n</code></pre>\n"}], "owner": {"reputation": 640, "user_id": 2091953, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/c8b4d78e4fa4176bc42a38b326d0f6dc?s=128&d=identicon&r=PG", "display_name": "mjswartz", "link": "https://stackoverflow.com/users/2091953/mjswartz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 33394988, "answer_count": 4, "score": 2, "last_activity_date": 1446048073, "creation_date": 1446045028, "question_id": 33394729, "link": "https://stackoverflow.com/questions/33394729/work-distribution-algorithm-in-c-do-while-issue", "title": "Work distribution algorithm in C (do while issue)", "body": "<p>So I'm playing with developing an algorithm to evenly distribute work among threads, but it's somewhat unique. The work being done is file comparisons where we have a list of files (let's say 10 files). We don't want to compare file 1 to file 1, so each file would skip comparing itself. File 1 would compare itself to files 2 through 10, file 2 would compare itself to files 3 through 10, etc. So as we move down the list of file compares, the number of file compares drops. Here is the little snippet I'm having issues with (specifically the do-while loop)</p>\n\n<pre><code>// Get first pass file chunks\nprintf(\"Split approximation: \");\nfor (int i = 0; i &lt; num_threads; i++)\n{\n    file_chunks[i] = (int)floor((double)num_file_compares / (double)num_threads);\n    printf(\"%d \", file_chunks[i]);\n}\nprintf(\"\\n\");\n\n// Adjust file chunks to contain all files\nfor (int i = 0; i &lt; num_threads; i++)\n{\n    file_chunk_sum = file_chunk_sum + file_chunks[i];\n}\nappend_count = num_file_compares - file_chunk_sum;\nprintf(\"Need to append last %d\\n\", append_count);\n\nappend_index = num_threads;\ndo\n{\n    printf(\"im in the do while...\\n\");\n    printf(\"append count is: %d\\n\", append_count);\n    printf(\"why am i here?\\n\");\n    append_index = append_index - 1;\n    file_chunks[append_index] = file_chunks[append_index] + 1;\n    append_count = append_count - 1;\n} while (append_count &gt; 0);\n\nprintf(\"Final split: \");\nfor (int i = 0; i &lt; num_threads; i++)\n{\n    printf(\"%d \", file_chunks[i]);\n}\nprintf(\"\\n\");\n</code></pre>\n\n<p>With the input of 20 files (190 file compares) and 5 threads, the split approximation would be an even split of 38 file compares per thread. The append count is 0, but it still jumps into the do-while loop. Any idea why?</p>\n\n<p>The output of those <code>printf</code>'s is</p>\n\n<pre><code>Number of files: 20\nNumber of threads: 5\nNumber of file compares: 190\nSplit approximation: 38 38 38 38 38\nNeed to append last 0\nim in the do while...\nappend count is: 0\nwhy am i here?\nFinal split: 38 38 38 38 39\n</code></pre>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 1738, "user_id": 5477536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14649f2805928d4ab23ab0dafa475553?s=128&d=identicon&r=PG&f=1", "display_name": "GreatAndPowerfulOz", "link": "https://stackoverflow.com/users/5477536/greatandpowerfuloz"}, "edited": false, "score": 0, "creation_date": 1446044704, "post_id": 33394551, "comment_id": 54580462, "body": "google is your friend: <a href=\"https://www.google.com/webhp?sourceid=chrome-instant&amp;ion=1&amp;espv=2&amp;ie=UTF-8#q=how%20to%20find%20intersection%20of%20two%20circles\" rel=\"nofollow noreferrer\">google.com/&hellip;</a>"}, {"owner": {"reputation": 33, "user_id": 5484743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c014e2dc8f12b305e17cc4f9ed5a76f?s=128&d=identicon&r=PG&f=1", "display_name": "hanna", "link": "https://stackoverflow.com/users/5484743/hanna"}, "reply_to_user": {"reputation": 1738, "user_id": 5477536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14649f2805928d4ab23ab0dafa475553?s=128&d=identicon&r=PG&f=1", "display_name": "GreatAndPowerfulOz", "link": "https://stackoverflow.com/users/5477536/greatandpowerfuloz"}, "edited": false, "score": 0, "creation_date": 1446044779, "post_id": 33394551, "comment_id": 54580515, "body": "That don&#39;t answer my question."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 3, "creation_date": 1446044822, "post_id": 33394551, "comment_id": 54580549, "body": "What did you try so far? How did it not work?"}, {"owner": {"reputation": 969, "user_id": 2406872, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0d4899e8a37c73408c105c4912393a04?s=128&d=identicon&r=PG", "display_name": "Matheus208", "link": "https://stackoverflow.com/users/2406872/matheus208"}, "reply_to_user": {"reputation": 1738, "user_id": 5477536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14649f2805928d4ab23ab0dafa475553?s=128&d=identicon&r=PG&f=1", "display_name": "GreatAndPowerfulOz", "link": "https://stackoverflow.com/users/5477536/greatandpowerfuloz"}, "edited": false, "score": 0, "creation_date": 1446044912, "post_id": 33394551, "comment_id": 54580621, "body": "The mathematical procedure to detect an intersection between two circles is easily discoverable on Google (as @Gread.And.Powerful.Oz pointed out). Can you use that to also detect where the colision is from? Maybe using the coordinates of the centre of the circle? Or any data about the previous movement of these circles?"}, {"owner": {"reputation": 1738, "user_id": 5477536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14649f2805928d4ab23ab0dafa475553?s=128&d=identicon&r=PG&f=1", "display_name": "GreatAndPowerfulOz", "link": "https://stackoverflow.com/users/5477536/greatandpowerfuloz"}, "edited": false, "score": 0, "creation_date": 1446044913, "post_id": 33394551, "comment_id": 54580625, "body": "maybe will help: <a href=\"http://stackoverflow.com/questions/8727065/intersection-points-of-two-circles-in-c\" title=\"intersection points of two circles in c\">stackoverflow.com/questions/8727065/&hellip;</a>"}, {"owner": {"reputation": 11754, "user_id": 5375403, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/20iV9.png?s=128&g=1", "display_name": "Jiri Tousek", "link": "https://stackoverflow.com/users/5375403/jiri-tousek"}, "edited": false, "score": 2, "creation_date": 1446046955, "post_id": 33394551, "comment_id": 54582138, "body": "What does &quot;intersection from left&quot; mean actually?"}], "answers": [{"comments": [{"owner": {"reputation": 4438, "user_id": 5427663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9f9c9fe9199349793db217d3a9e9596?s=128&d=identicon&r=PG&f=1", "display_name": "TheOperator", "link": "https://stackoverflow.com/users/5427663/theoperator"}, "reply_to_user": {"reputation": 33, "user_id": 5484743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c014e2dc8f12b305e17cc4f9ed5a76f?s=128&d=identicon&r=PG&f=1", "display_name": "hanna", "link": "https://stackoverflow.com/users/5484743/hanna"}, "edited": false, "score": 0, "creation_date": 1446045206, "post_id": 33394686, "comment_id": 54580849, "body": "width and height? Don&#39;t you use circles that have the same radius everywhere? :)"}, {"owner": {"reputation": 33, "user_id": 5484743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c014e2dc8f12b305e17cc4f9ed5a76f?s=128&d=identicon&r=PG&f=1", "display_name": "hanna", "link": "https://stackoverflow.com/users/5484743/hanna"}, "edited": false, "score": 0, "creation_date": 1446045296, "post_id": 33394686, "comment_id": 54580914, "body": "No. The circles size is not always the same :)"}, {"owner": {"reputation": 4438, "user_id": 5427663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9f9c9fe9199349793db217d3a9e9596?s=128&d=identicon&r=PG&f=1", "display_name": "TheOperator", "link": "https://stackoverflow.com/users/5427663/theoperator"}, "reply_to_user": {"reputation": 33, "user_id": 5484743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c014e2dc8f12b305e17cc4f9ed5a76f?s=128&d=identicon&r=PG&f=1", "display_name": "hanna", "link": "https://stackoverflow.com/users/5484743/hanna"}, "edited": false, "score": 1, "creation_date": 1446045357, "post_id": 33394686, "comment_id": 54580961, "body": "What I meant is: why width <i>and</i> height? That makes no sense for a circle which has <i>one</i> radius. Are we talking about an ellipsis?"}, {"owner": {"reputation": 33, "user_id": 5484743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c014e2dc8f12b305e17cc4f9ed5a76f?s=128&d=identicon&r=PG&f=1", "display_name": "hanna", "link": "https://stackoverflow.com/users/5484743/hanna"}, "edited": false, "score": 0, "creation_date": 1446045486, "post_id": 33394686, "comment_id": 54581072, "body": "True, i&#39;m sorry. Can you show me simple based on circles radius? what side makes the intersection please"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 3, "creation_date": 1446045576, "post_id": 33394686, "comment_id": 54581145, "body": "@TheOperator <i>Ellipsis</i> is &quot;...&quot;, not a geometric figure.  ;-)"}], "tags": [], "owner": {"reputation": 4438, "user_id": 5427663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9f9c9fe9199349793db217d3a9e9596?s=128&d=identicon&r=PG&f=1", "display_name": "TheOperator", "link": "https://stackoverflow.com/users/5427663/theoperator"}, "is_accepted": true, "score": 1, "last_activity_date": 1446044898, "creation_date": 1446044898, "answer_id": 33394686, "question_id": 33394551, "link": "https://stackoverflow.com/questions/33394551/circle-to-circle-intersection/33394686#33394686", "title": "Circle to circle intersection", "body": "<p>This is rather a mathematical than a C++ specific problem. You can determine the quadrant using the vector <code>v = c1 - c2</code> which is the difference between the two circle centers <code>c1</code> and <code>c2</code>. Then, depending on the signs of <code>v</code>'s X and Y coordinates, you can say in which direction a circle is relative to another.</p>\n\n<p>In C++, it can make sense to use existing vector classes depending on the amount of geometry-related code. What to suggest depends a bit on your project and its field...</p>\n"}], "owner": {"reputation": 33, "user_id": 5484743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c014e2dc8f12b305e17cc4f9ed5a76f?s=128&d=identicon&r=PG&f=1", "display_name": "hanna", "link": "https://stackoverflow.com/users/5484743/hanna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 316, "favorite_count": 0, "accepted_answer_id": 33394686, "answer_count": 1, "score": 1, "last_activity_date": 1446044924, "creation_date": 1446044528, "last_edit_date": 1446044924, "question_id": 33394551, "link": "https://stackoverflow.com/questions/33394551/circle-to-circle-intersection", "title": "Circle to circle intersection", "body": "<p>I have searched Google and could find circle to circle intersection, but I did not find any way to tell if the intersection is from left, right, top, or bottom.</p>\n\n<p>Can you please show me how is that done in C or C++?</p>\n\n<p>I did try this, but the sides it output is wrong..</p>\n\n<pre><code>if ( ((dx*dx) + (dy*dy)) &lt; radii * radii) {\n\n\n\n    if (Circle2Position.x &lt; Circle1Position.x) {\n       // code |= LEFT;\n\n\n\n    } else if (Circle2Position.x &gt; Circle1Position.x+Circle1.width) {\n       // code |= RIGHT;\n\n\n    }\n\n    if (Circle2Position.y &lt; Circle1Position.y) {\n       // code |= BOTTOM;\n\n\n    } else if (Circle2Position.y  &gt; Circle1Position.y  + Circle1.height) {\n\n       // code |= TOP;\n\n\n    }\n\n        }\n</code></pre>\n"}, {"tags": ["c", "memcached", "benchmarking", "microbenchmark"], "comments": [{"owner": {"reputation": 565, "user_id": 646733, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ec748bb46aace72908ff78afeb3b87d8?s=128&d=identicon&r=PG", "display_name": "Djvu", "link": "https://stackoverflow.com/users/646733/djvu"}, "edited": false, "score": 0, "creation_date": 1446043880, "post_id": 33394274, "comment_id": 54579844, "body": "I thought most cost will occurred in the kernel,  and kernel use the spin lock mostly, so the lock wait for cpu should be tiny?"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1446044700, "post_id": 33394274, "comment_id": 54580459, "body": "What is the max memory throughput? If you hit memory from 24 threads, they will likely have to wait for the data to arrive."}, {"owner": {"reputation": 565, "user_id": 646733, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ec748bb46aace72908ff78afeb3b87d8?s=128&d=identicon&r=PG", "display_name": "Djvu", "link": "https://stackoverflow.com/users/646733/djvu"}, "reply_to_user": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1446045626, "post_id": 33394274, "comment_id": 54581186, "body": "@BoPersson I do not know how to measure the memory throughout, this is  depend on cpu architecture, maybe linux perf can observe this? but I do not observe this yet.  I do not think the memory bandwidth can limit, because when I reduce the thread from 24 to the default 4 thread, the cpu usage is almost the same. btw: there is 128GB in every machine."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1446048094, "post_id": 33394274, "comment_id": 54583041, "body": "As I read the documentation for that utility, it is for accessing a database on a server (preferably a remote server).  I do not see any facility for benchmarking the cache operation on the local machine/CPU"}, {"owner": {"reputation": 565, "user_id": 646733, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ec748bb46aace72908ff78afeb3b87d8?s=128&d=identicon&r=PG", "display_name": "Djvu", "link": "https://stackoverflow.com/users/646733/djvu"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1446086706, "post_id": 33394274, "comment_id": 54601510, "body": "@user3629249 Yes, it just to benchmark the capacity of memcached/redis, but the TCP/IP stack will cost a lot of CPU under high requests."}], "owner": {"reputation": 565, "user_id": 646733, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ec748bb46aace72908ff78afeb3b87d8?s=128&d=identicon&r=PG", "display_name": "Djvu", "link": "https://stackoverflow.com/users/646733/djvu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 333, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1448144598, "creation_date": 1446043745, "last_edit_date": 1448144598, "question_id": 33394274, "link": "https://stackoverflow.com/questions/33394274/why-i-can-not-use-100cpu-in-the-memtier-benchmark-test", "title": "Why I can not use 100%cpu in the memtier_benchmark test", "body": "<p>I want to test the memcached using the memtier_benchmark. </p>\n\n<p>under my thought, if we use small bytes message under many concurrency requests, the cpu can be used almost close to 100%, but in fact the actual cpu usage is just about 10% in the kernel, and 4% in the user space, the iowait is almost 0. so I want to know why the cpu usage is so low?</p>\n\n<p>environment:</p>\n\n<p>CPU: 24 core, intel E5\nOS: CentoS6.5 kernel 2.6.32\nnetwork: 10Gb Ethernet</p>\n\n<p>I use one node as the memcached serve: </p>\n\n<blockquote>\n  <p>memcached -v -t 24 -c 4096</p>\n</blockquote>\n\n<p>and use 6 node as the client to visit in parallel, the command is</p>\n\n<blockquote>\n  <p>memtier_benchmark -s x.x.x.x -p 11211 -P memcache_binary -x 1 --out-file /tmp/memcached.ans -c 20 -d 16 -t 8</p>\n</blockquote>\n"}, {"tags": ["c", "stdout", "fflush"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1446043923, "post_id": 33394273, "comment_id": 54579879, "body": "1) Use standard C <code>__VA_ARGS__</code>, not the legacy gcc extension. 2) Use a function!"}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 1, "creation_date": 1446044124, "post_id": 33394273, "comment_id": 54580033, "body": "To add a <code>\\r</code>, just add another <code>fprintf(stdout,&quot;\\r&quot;);</code> or an <code>fputc(&#39;\\r&#39;,stdout);</code>"}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 2, "creation_date": 1446044207, "post_id": 33394273, "comment_id": 54580090, "body": "VT100 escape sequence <code>\\x1b[2K</code> (erase the line where the cursor is) might be useful, depending on your shell or terminal."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1446045434, "post_id": 33394273, "comment_id": 54581027, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/656504/how-to-overwrite-stdout-in-c\">How to overwrite stdout in C</a>"}, {"owner": {"reputation": 4148, "user_id": 781252, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ec72210a7b6a543152fa32b770d1eed0?s=128&d=identicon&r=PG&f=1", "display_name": "developer", "link": "https://stackoverflow.com/users/781252/developer"}, "reply_to_user": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1446046989, "post_id": 33394273, "comment_id": 54582166, "body": "@MikeCAT : thanks, I have resolved the problem with <code>\\x1b[2K</code>"}, {"owner": {"reputation": 3853, "user_id": 2474248, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BDsoE.jpg?s=128&g=1", "display_name": "machine_1", "link": "https://stackoverflow.com/users/2474248/machine-1"}, "reply_to_user": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1446048758, "post_id": 33394273, "comment_id": 54583535, "body": "@MikeCAT do you mind sharing the usage of <code>\\x1b[2K</code>.how do you erase a line with that?"}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "reply_to_user": {"reputation": 3853, "user_id": 2474248, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BDsoE.jpg?s=128&g=1", "display_name": "machine_1", "link": "https://stackoverflow.com/users/2474248/machine-1"}, "edited": false, "score": 0, "creation_date": 1446082037, "post_id": 33394273, "comment_id": 54600375, "body": "@machine_1 When you send the sequence to a VT100 compatible terminal, the characters on the line where the cursor is will be erased and become blank."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1446136328, "post_id": 33394273, "comment_id": 54628976, "body": "The simple way is to use an &#39;escape&#39; sequence to get back to the beginning of the text, then use an &#39;escape sequence to erase the text then use an escape sequence to get back to the beginning again, then use message() macro to display the new text"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1446136620, "post_id": 33394273, "comment_id": 54629170, "body": "from: &lt;<a href=\"http://man7.org/linux/man-pages/man4/console_codes.4.html\" rel=\"nofollow noreferrer\">man7.org/linux/man-pages/man4/console_codes.4.html</a>&gt;  here are the details for that escape sequence: &lt;&lt;&lt; K   EL        Erase line (default: from cursor to end of line).                      ESC [ 1 K: erase from start of line to cursor.                      ESC [ 2 K: erase whole line. &gt;&gt;&gt;"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 1, "creation_date": 1446048423, "post_id": 33395478, "comment_id": 54583281, "body": "How do you make sure <code>stdout</code> actually <i>is</i> a terminal understanding your control sequences? I&#39;d strongly advise to use something like e.g. <code>curses</code> if you want anything beyond a normal stream of text."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1446136218, "post_id": 33395478, "comment_id": 54628907, "body": "on some OSs (I think MAC is an example) the &#39;\\r&#39; will also cause the terminal to scroll to the next line"}], "tags": [], "owner": {"reputation": 4148, "user_id": 781252, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ec72210a7b6a543152fa32b770d1eed0?s=128&d=identicon&r=PG&f=1", "display_name": "developer", "link": "https://stackoverflow.com/users/781252/developer"}, "is_accepted": true, "score": 0, "last_activity_date": 1446047027, "creation_date": 1446047027, "answer_id": 33395478, "question_id": 33394273, "link": "https://stackoverflow.com/questions/33394273/how-remove-displayed-text-from-stdout/33395478#33395478", "title": "How remove displayed text from stdout?", "body": "<p>This is the solution:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n#define MESSAGE( fmt, args...) \\\n    do { fprintf(stdout, fmt, ## args); fprintf(stdout, \"\\r\"); fflush(stdout); sleep(1); fprintf(stdout, \"\\x1b[2K\"); } while (0)\n\nint main()\n{\n    MESSAGE( \"the application is started successfully\");\n    MESSAGE( \"the application will be stopped soon\");\n    MESSAGE( \"app stopped: ok\");\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 4148, "user_id": 781252, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ec72210a7b6a543152fa32b770d1eed0?s=128&d=identicon&r=PG&f=1", "display_name": "developer", "link": "https://stackoverflow.com/users/781252/developer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 2, "accepted_answer_id": 33395478, "answer_count": 1, "score": 2, "last_activity_date": 1446047401, "creation_date": 1446043742, "last_edit_date": 1446047401, "question_id": 33394273, "link": "https://stackoverflow.com/questions/33394273/how-remove-displayed-text-from-stdout", "title": "How remove displayed text from stdout?", "body": "<p>I have created a macro that display a text and after that it flush stdout. The problems is how to force to clear old printed text if the text is more longer than the newer.</p>\n\n<p>Example : If I try to print a string with 50 characters after that I need to overwrite all the text and rewrite text with 25 characters. All the time I have part of first text is always printed because the second is more shorter.</p>\n\n<p>Also I need to insert <code>\\r</code> at the end of each line, how to add in my macro?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n// I need to add \"\\r\" to macro instead of to add it for all string\n#define MESSAGE( fmt, args...) \\\n    do { setbuf(stdout, NULL); fprintf(stdout, fmt, ## args); fflush(stdout); sleep(5); } while (0)\n\nint main()\n{\n    MESSAGE( \"the application is started successfully\\r\");\n    MESSAGE( \"the application will be stopped soon\\r\");\n    MESSAGE( \"app stopped: ok\\n\\r\");\n    return 0;\n}\n</code></pre>\n\n<p><strong>Result:</strong></p>\n\n<pre><code>./test2\napp stopped: ok will be stopped soonlly\n</code></pre>\n\n<p><strong>The expected result:</strong></p>\n\n<pre><code>./test2\napp stopped: ok\n</code></pre>\n"}, {"tags": ["c", "x86", "operating-system", "virtual-memory"], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 4780865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b33b8704a348c3f80548786f09e481a?s=128&d=identicon&r=PG&f=1", "display_name": "R4N63RW4R", "link": "https://stackoverflow.com/users/4780865/r4n63rw4r"}, "is_accepted": false, "score": 1, "last_activity_date": 1446201891, "creation_date": 1446201891, "answer_id": 33434094, "question_id": 33394237, "link": "https://stackoverflow.com/questions/33394237/cannot-change-cr3-register-to-point-to-a-new-pml4-direction-using-pure64/33434094#33434094", "title": "Cannot change cr3 register to point to a new pml4 direction using pure64", "body": "<p>The problem was that I was trying to map 1GB of physical memory directly, and qemu 2.0.0.0 was not prepared for that.\nWhat I had to do was installing qemu 2.4.0.1 and run the VM with kvm disabled.</p>\n\n<p>I hope that no one else has this problem.</p>\n"}, {"tags": [], "owner": {"reputation": 115, "user_id": 6656684, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0j3I9.jpg?s=128&g=1", "display_name": "leesagacious", "link": "https://stackoverflow.com/users/6656684/leesagacious"}, "is_accepted": false, "score": 0, "last_activity_date": 1554821886, "creation_date": 1554821886, "answer_id": 55595755, "question_id": 33394237, "link": "https://stackoverflow.com/questions/33394237/cannot-change-cr3-register-to-point-to-a-new-pml4-direction-using-pure64/55595755#55595755", "title": "Cannot change cr3 register to point to a new pml4 direction using pure64", "body": "<pre><code>Is %rdi correct? \nBit[39~47] is the index of the pml4 table, \nand the bit [12~51] of cr3 stores the first address of the pml4 table.\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 4780865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b33b8704a348c3f80548786f09e481a?s=128&d=identicon&r=PG&f=1", "display_name": "R4N63RW4R", "link": "https://stackoverflow.com/users/4780865/r4n63rw4r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 210, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1554821886, "creation_date": 1446043643, "last_edit_date": 1446056698, "question_id": 33394237, "link": "https://stackoverflow.com/questions/33394237/cannot-change-cr3-register-to-point-to-a-new-pml4-direction-using-pure64", "title": "Cannot change cr3 register to point to a new pml4 direction using pure64", "body": "<p>I've been trying for hours to change the direction stored at the <code>CR3</code> register, replacing the one loaded by Pure64 with a new one loaded by me.</p>\n\n<p>What I'm doing is I'm taking a 4 KiB page from a direction above the 8 Mib of memory, in order to ensure I will not tread any kernel, userland, nor Pure64 module, and using it as a new direction for the PML4.<br>\nI load the new PML4 with the things I need, but when I execute the line </p>\n\n<pre><code>mov cr3,rdi\n</code></pre>\n\n<p>where <code>rdi</code> stores the new PML4 direction, then qemu keeps restarting itself infinitely. </p>\n\n<p>Now, if I hardcode the Pure64 PML4 direction (<code>0x2008</code>) and do the same operations than before, there is no problem when calling the instruction </p>\n\n<pre><code>mov cr3,rdi\n</code></pre>\n\n<p>and the operating system executes correctly.</p>\n\n<p>Could it be that this happens because Pure64 still needs to use the table loaded at the <code>CR3</code> register?</p>\n\n<p>Here I leave the code where I load my pml4 direction: <br>\n(Note that there are lines commented that  I've been using for debugging purpose.)</p>\n\n<pre><code>/* Ideas and Code extracted and modified from Wyrm OS.\nProject Repository: https://bitbucket.org/RowDaBoat/wyrm/wiki/Home */\n\n#include &lt;virtualMemoryManager.h&gt;\n#include &lt;mem.h&gt;\n#include &lt;libc.h&gt;\n#include &lt;terminal.h&gt;\n#include &lt;own_cpu.h&gt;\n\nstatic const uint32_t presentBit = 0;\nstatic const uint32_t writeBit = 1;\nstatic const uint32_t userBit = 2;\nstatic const uint32_t pageWriteThroughBit = 3;\nstatic const uint32_t pageCacheDisableBit = 4;\nstatic const uint32_t accessedBit = 5;\nstatic const uint32_t dirtyBit = 6;\nstatic const uint32_t pageSizeBit = 7;\nstatic const uint32_t globalBit = 8;\nstatic const uint32_t pageAttributeTableBit = 12;\nstatic const uint32_t addressBit = 30;\nstatic const uint64_t addressMask4KiB = 0x0000000FFFFFFFFF000;\nstatic const uint64_t addressMask2MiB = 0x0000000FFFFFFE00000;\nstatic const uint64_t addressMask1GiB = 0x0000000FFFFC0000000;\nstatic const uint32_t executeDisableBit = 63;\n// static const uint64_t pageSize = 4092; /* no entiendo xqq setea este tama\u00f1o de p\u00e1gina */\n\nstatic inline void setBit(uint64_t * bits, uint32_t n, bool value) {\n    if (value)\n        *bits |= (1 &lt;&lt; n);\n    else\n        *bits &amp;= ~(1 &lt;&lt; n);\n}\n\nstatic inline bool getBit(uint64_t bits, uint32_t n) {\n    return bits &amp; (1 &lt;&lt; n);\n}\n\nstatic PageTableEntry* createTable() {\n    PageTableEntry * table = (PageTableEntry*) mt_mem_alloc(1);\n    memset(table, 0, PAGESIZE); /* defined at libc.h */\n    return table;\n}\n\nstatic inline PageTableEntry * clear(PageTableEntry * page) {\n    for (uint64_t i = 0; i &lt; PAGESIZE / sizeof(PageTableEntry); i++)\n        page[i].contents = 0;\n\n    return page;\n}\n\nint initializeVirtualMemory()\n{\n\n    PageTableEntry * pml4 = createTable();\n\n    /* +++xdebug */\n    if (pml4 == NULL) {\n        print(\"\\nCANNOT SET PML4.\\n\");\n        return false;\n    }\n\n    PageTableEntry * pageDirectoryPointerTable = createTable();\n\n    /* +++xdebug */\n    if (pml4 == NULL) {\n        print(\"\\nCANNOT SET PML4.\\n\");\n        return false;\n    }\n\n    /* +++xdebug */\n//  pml4 = 0x00002000;\n//  pml4 = 0;\n    pml4 = 0x00804008;\n//  pml4 = (uint64_t pml4) &amp; 0x8;\n\n\n    //Set up the pml4, this table will be used by all mappings, kernel and user\n    PageTableEntry *currentEntry = &amp;(pml4[0]);\n\n    print(\"\\ncurrentEntry: \");\n    printHex(pml4);\n    println();\n\n    /* +++xdebug */\n    print(\"\\nAntes de setar Presente: \");\n    printHex(currentEntry-&gt;contents);\n    //printInt(PageTableEntry_getPresent(currentEntry));\n\n    PageTableEntry_setPresent(currentEntry, false);\n    PageTableEntry_setWritable(currentEntry, false);\n    PageTableEntry_setUser(currentEntry, false);\n    PageTableEntry_setPageWriteThrough(currentEntry, true);\n    PageTableEntry_setPageCacheDisable(currentEntry, false);\n    PageTableEntry_setAccessed(currentEntry, false);\n    PageTableEntry_setPageSize(currentEntry, false);\n    PageTableEntry_setExecuteDisable(currentEntry, false);\n    PageTableEntry_set4KiBPageAddress(currentEntry, pageDirectoryPointerTable);\n\n    print(\"\\nDespues de setar Presente: \");\n    printHex(currentEntry-&gt;contents);\n    //printInt(PageTableEntry_getPresent(currentEntry));\n\n\n    char * page1GiB = (char*)0x0;\n\n    //Identity map first 512 GiB (that should be all memory)\n    for (int i = 0; i &lt; 512; i++, page1GiB += oneGiB) {\n\n        currentEntry = &amp;(pageDirectoryPointerTable[i]);\n        PageTableEntry_setPresent(currentEntry, true);\n        PageTableEntry_setWritable(currentEntry, true);\n        PageTableEntry_setUser(currentEntry, true);\n        PageTableEntry_setPageWriteThrough(currentEntry, false);\n        PageTableEntry_setPageCacheDisable(currentEntry, false);\n        PageTableEntry_setAccessed(currentEntry, false);\n        PageTableEntry_setPageSize(currentEntry, true);\n        PageTableEntry_set1GiBPageAddress(currentEntry, page1GiB);\n\n        /* +++xdebug */\n        if (i &lt; 5) {\n            print(\"\\nPage Start at: \");\n            printHex(currentEntry-&gt;contents);\n            println();\n        }\n    }\n\n    //Update CR3 with the new mapping\n    _writeCR3((uint64_t)pml4);\n\n    return true;\n}\n\nPageTableEntry * PageTableEntry_setPresent(PageTableEntry * entry, bool value) {\n    setBit(&amp;(entry-&gt;contents), presentBit, value);\n    return entry;\n}\n\nPageTableEntry * PageTableEntry_setWritable(PageTableEntry * entry, bool value) {\n    setBit(&amp;(entry-&gt;contents), writeBit, value);\n    return entry;\n}\n\nPageTableEntry * PageTableEntry_setUser(PageTableEntry * entry, bool value) {\n    setBit(&amp;(entry-&gt;contents), userBit, value);\n    return entry;\n}\n\nPageTableEntry * PageTableEntry_setPageWriteThrough(PageTableEntry * entry, bool value) {\n    setBit(&amp;(entry-&gt;contents), pageWriteThroughBit, value);\n    return entry;\n}\n\nPageTableEntry * PageTableEntry_setPageCacheDisable(PageTableEntry * entry, bool value) {\n    setBit(&amp;(entry-&gt;contents), pageCacheDisableBit, value);\n    return entry;\n}\n\nPageTableEntry * PageTableEntry_setAccessed(PageTableEntry * entry, bool value) {\n    setBit(&amp;(entry-&gt;contents), accessedBit, value);\n    return entry;\n}\n\nPageTableEntry * PageTableEntry_setDirty(PageTableEntry * entry, bool value) {\n    setBit(&amp;(entry-&gt;contents), dirtyBit, value);\n    return entry;\n}\n\nPageTableEntry * PageTableEntry_setPageSize(PageTableEntry * entry, bool value) {\n    setBit(&amp;(entry-&gt;contents), pageSizeBit, value);\n    return entry;\n}\n\nPageTableEntry * PageTableEntry_setGlobal(PageTableEntry * entry, bool value) {\n    setBit(&amp;(entry-&gt;contents), globalBit, value);\n    return entry;\n}\n\nPageTableEntry * PageTableEntry_setPageAttribueTable(PageTableEntry * entry, bool value) {\n    setBit(&amp;(entry-&gt;contents), pageAttributeTableBit, value);\n    return entry;\n}\n\nPageTableEntry * PageTableEntry_set4KiBPageAddress(PageTableEntry * entry, void * address) {\n    entry-&gt;contents = ((uint64_t)address &amp; addressMask4KiB) | (entry-&gt;contents &amp; ~addressMask4KiB);\n    return entry;\n}\n\nPageTableEntry * PageTableEntry_set2MiBPageAddress(PageTableEntry * entry, void * address) {\n    entry-&gt;contents = ((uint64_t)address &amp; addressMask2MiB) | (entry-&gt;contents &amp; ~addressMask2MiB);\n    return entry;\n}\n\nPageTableEntry * PageTableEntry_set1GiBPageAddress(PageTableEntry * entry, void * address) {\n    entry-&gt;contents = ((uint64_t)address &amp; addressMask1GiB) | (entry-&gt;contents &amp; ~addressMask1GiB);\n    return entry;\n}\n\nPageTableEntry * PageTableEntry_setExecuteDisable(PageTableEntry * entry, bool value) {\n    setBit(&amp;(entry-&gt;contents), executeDisableBit, value);\n    return entry;\n}\n\nbool PageTableEntry_getPresent(PageTableEntry * entry) {\n    return getBit(entry-&gt;contents, presentBit);\n}\n\nbool PageTableEntry_getWritable(PageTableEntry * entry) {\n    return getBit(entry-&gt;contents, writeBit);\n}\n\nbool PageTableEntry_getUser(PageTableEntry * entry) {\n    return getBit(entry-&gt;contents, userBit);\n}\n\nbool PageTableEntry_getPageWriteThrough(PageTableEntry * entry) {\n    return getBit(entry-&gt;contents, pageWriteThroughBit);\n}\n\nbool PageTableEntry_getPageCacheDisable(PageTableEntry * entry) {\n    return getBit(entry-&gt;contents, pageCacheDisableBit);\n}\n\nbool PageTableEntry_getAccessed(PageTableEntry * entry) {\n    return getBit(entry-&gt;contents, accessedBit);\n}\n\nbool PageTableEntry_getDirty(PageTableEntry * entry) {\n    return getBit(entry-&gt;contents, dirtyBit);\n}\n\nbool PageTableEntry_getPageSize(PageTableEntry * entry) {\n    return getBit(entry-&gt;contents, pageSizeBit);\n}\n\nbool PageTableEntry_getGlobal(PageTableEntry * entry) {\n    return getBit(entry-&gt;contents, globalBit);\n}\n\nbool PageTableEntry_getPageAttribueTable(PageTableEntry * entry) {\n    return getBit(entry-&gt;contents, pageAttributeTableBit);\n}\n\nvoid * PageTableEntry_get4KiBPageAddress(PageTableEntry * entry) {\n    return (void*)(entry-&gt;contents &amp; addressMask4KiB);\n}\n\nvoid * PageTableEntry_get2MiBPageAddress(PageTableEntry * entry) {\n    return (void*)(entry-&gt;contents &amp; addressMask2MiB);\n}\n\nvoid * PageTableEntry_get1GiBPageAddress(PageTableEntry * entry) {\n    return (void*)(entry-&gt;contents &amp; addressMask1GiB);\n}\n\nbool PageTableEntry_getExecuteDisable(PageTableEntry * entry) {\n    return getBit(entry-&gt;contents, executeDisableBit);\n}\n</code></pre>\n"}, {"tags": ["c", "text-files", "filestream", "getc", "rewind"], "comments": [{"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 2, "creation_date": 1446043364, "post_id": 33394038, "comment_id": 54579423, "body": "You have opened the file for writing only."}, {"owner": {"reputation": 385, "user_id": 3126936, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/IvLVU.jpg?s=128&g=1", "display_name": "Meathead", "link": "https://stackoverflow.com/users/3126936/meathead"}, "reply_to_user": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1446044201, "post_id": 33394038, "comment_id": 54580082, "body": "@MOehm Can you also look at the comment I have left under Almo&#39;s answer in relation to the update to my code?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1446077762, "post_id": 33394038, "comment_id": 54599136, "body": "The edit  seems to be a answer to the problem, rather then an update to the question.   If indeed an answer, post the answer below and revert the question to a former state.  If is another question, post a new question."}], "answers": [{"comments": [{"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1446043499, "post_id": 33394139, "comment_id": 54579551, "body": "What does <code>-1</code> mean, <code>EOF</code>?"}, {"owner": {"reputation": 385, "user_id": 3126936, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/IvLVU.jpg?s=128&g=1", "display_name": "Meathead", "link": "https://stackoverflow.com/users/3126936/meathead"}, "edited": false, "score": 0, "creation_date": 1446044352, "post_id": 33394139, "comment_id": 54580198, "body": "@alk Can you explain why my updated code is printing an additional 6th number -1? (Rest 5 are working as expected: ASCII of E-I)"}, {"owner": {"reputation": 385, "user_id": 3126936, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/IvLVU.jpg?s=128&g=1", "display_name": "Meathead", "link": "https://stackoverflow.com/users/3126936/meathead"}, "edited": false, "score": 0, "creation_date": 1446044763, "post_id": 33394139, "comment_id": 54580505, "body": "@alk Please ignore my last comment. I got what&#39;s happening. Thanks for your answer."}], "tags": [], "owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "is_accepted": true, "score": 7, "last_activity_date": 1446055793, "last_edit_date": 1446055793, "creation_date": 1446043386, "answer_id": 33394139, "question_id": 33394038, "link": "https://stackoverflow.com/questions/33394038/why-is-rewind-not-working-as-expected-in-this-simple-program/33394139#33394139", "title": "Why is rewind() not working as expected in this simple program?", "body": "<p>File mode <code>\"w\"</code> opens the file for writing <em>only</em>.</p>\n\n<p>Use <code>\"w+\"</code> to open a file for writing <em>and</em> reading.</p>\n\n<p>(Please see <a href=\"http://man7.org/linux/man-pages/man3/fopen.3.html\" rel=\"nofollow\"><code>man fopen</code></a> for more file modes.)</p>\n\n<hr>\n\n<p>Regarding <code>getc()</code> returning <code>-1</code>, verbatim from <a href=\"http://man7.org/linux/man-pages/man3/fgets.3.html\" rel=\"nofollow\"><code>man getc</code></a>:</p>\n\n<blockquote>\n  <p>[...] <strong>getc()</strong> [...] return[s] the character read as an <code>unsigned char</code> cast to an <code>int</code> or <strong>EOF</strong> on end of file or error.</p>\n</blockquote>\n\n<p><code>EOF</code> typically equals <code>-1</code>. To test this do a <code>printf(\"EOF=%d\\n\", EOF);</code></p>\n"}, {"comments": [{"owner": {"reputation": 385, "user_id": 3126936, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/IvLVU.jpg?s=128&g=1", "display_name": "Meathead", "link": "https://stackoverflow.com/users/3126936/meathead"}, "edited": false, "score": 0, "creation_date": 1446044123, "post_id": 33394140, "comment_id": 54580032, "body": "I updated the code and it&#39;s working fine except that it&#39;s printing an unexpected 6th number &quot;-1&quot;. Can you explain why? Isn&#39;t the position pointer expected to encounter EOF after reading 5th character thereby causing the while loop to exit?"}, {"owner": {"reputation": 14761, "user_id": 290072, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/ITEsv.png?s=128&g=1", "display_name": "Almo", "link": "https://stackoverflow.com/users/290072/almo"}, "reply_to_user": {"reputation": 385, "user_id": 3126936, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/IvLVU.jpg?s=128&g=1", "display_name": "Meathead", "link": "https://stackoverflow.com/users/3126936/meathead"}, "edited": false, "score": 0, "creation_date": 1446044779, "post_id": 33394140, "comment_id": 54580514, "body": "My guess is that <code>while(!feof(fp))</code> checks the last character read. So when you hit EOF with <code>x=getc(fp);</code>, you print it first, then the while exits."}, {"owner": {"reputation": 385, "user_id": 3126936, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/IvLVU.jpg?s=128&g=1", "display_name": "Meathead", "link": "https://stackoverflow.com/users/3126936/meathead"}, "edited": false, "score": 0, "creation_date": 1446044784, "post_id": 33394140, "comment_id": 54580521, "body": "Please ignore my last comment. I got what&#39;s happening."}], "tags": [], "owner": {"reputation": 14761, "user_id": 290072, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/ITEsv.png?s=128&g=1", "display_name": "Almo", "link": "https://stackoverflow.com/users/290072/almo"}, "is_accepted": false, "score": 4, "last_activity_date": 1446043387, "creation_date": 1446043387, "answer_id": 33394140, "question_id": 33394038, "link": "https://stackoverflow.com/questions/33394038/why-is-rewind-not-working-as-expected-in-this-simple-program/33394140#33394140", "title": "Why is rewind() not working as expected in this simple program?", "body": "<p><code>fp=fopen(\"F:\\\\demo.txt\",\"w\");</code></p>\n\n<p>Opens the file for writing, then you try to read from it. That's not going to work.</p>\n\n<p>I'll also note that your program keeps trying to use <code>fp</code> even if it fails to be created since your <code>if</code> checking <code>fp</code> only prints an error, it doesn't stop the program.</p>\n"}], "owner": {"reputation": 385, "user_id": 3126936, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/IvLVU.jpg?s=128&g=1", "display_name": "Meathead", "link": "https://stackoverflow.com/users/3126936/meathead"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1617, "favorite_count": 0, "accepted_answer_id": 33394139, "answer_count": 2, "score": 4, "last_activity_date": 1446055793, "creation_date": 1446043158, "last_edit_date": 1446049162, "question_id": 33394038, "link": "https://stackoverflow.com/questions/33394038/why-is-rewind-not-working-as-expected-in-this-simple-program", "title": "Why is rewind() not working as expected in this simple program?", "body": "<p>Why is the below program not printing the first character of the newly created text file (<strong>\"E\"</strong>) as expected? It's a simple program and I tried to look at the issue from all aspects but couldn't find the reason. The text file is being created on my D drive with the content \"<strong>EFGHI</strong>\", but for some reason <strong>\"E\"</strong> is not being read even if I rewind and read using <code>getc()</code> and the output is <strong>-1</strong>.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\nint main()\n{\n    int x;\n    FILE *fp;\n    fp=fopen(\"F:\\\\demo.txt\",\"w\");\n    if(fp==NULL)\n        puts(\"Write error\");\n    fputs(\"EFGHI\",fp);\n    rewind(fp);\n\n    x=getc(fp);\n    printf(\"%d\",x);\n    fclose(fp);\n}\n</code></pre>\n\n<p><strong>UPDATED:</strong></p>\n\n<pre><code>    #include&lt;stdio.h&gt;\n    #include&lt;stdlib.h&gt;\n\n    int main()\n    {\n        int x;\n        FILE *fp;\n        fp=fopen(\"F:\\\\demo.txt\",\"w+\");\n        if(fp==NULL)\n        {\n            puts(\"Write error\");\n            exit(EXIT_SUCCESS);\n        }\n        fputs(\"EFGHI\",fp);\n        rewind(fp);\n\n        while(!feof(fp))\n        {\n            x=getc(fp);\n            printf(\"%d\\n\",x);\n        }\n        fclose(fp);\n     }\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 10, "creation_date": 1446042869, "post_id": 33393870, "comment_id": 54579038, "body": "OMG just print it with <code>printf( &quot;%X&quot;, number)</code>"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 2, "creation_date": 1446042977, "post_id": 33393870, "comment_id": 54579122, "body": "You definitely want to learn how to use a debugger, to trace your code step by step and while doing so inspect the values of all relevant variables."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446043099, "post_id": 33393870, "comment_id": 54579228, "body": "Use proper names and (re-)read a good C book. There are quite some things you do wrong."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1446043108, "post_id": 33393870, "comment_id": 54579235, "body": "The <code>k</code> function (what an intuitive name BTW) ist just horrible and can be rewritten in 2 lines."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1446043290, "post_id": 33393870, "comment_id": 54579366, "body": "@Slava he want&#39;s to to this as an exercice."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1446044217, "post_id": 33393870, "comment_id": 54580098, "body": "HInt: &#39;const char* hexlat=&quot;0123456789ABCDEF&quot;;&#39;, index it with nibbles.."}], "answers": [{"comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1446043387, "post_id": 33394050, "comment_id": 54579448, "body": "He want&#39;s to do this as an exercice."}, {"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1446043616, "post_id": 33394050, "comment_id": 54579649, "body": "@MichaelWalz his question specifies writing something as decimal and seeing it in hex. Thats exactly what this does."}], "tags": [], "owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "is_accepted": false, "score": 1, "last_activity_date": 1446043189, "creation_date": 1446043189, "answer_id": 33394050, "question_id": 33393870, "link": "https://stackoverflow.com/questions/33393870/how-can-i-do-decimal-to-hex/33394050#33394050", "title": "How can I do decimal to hex.?", "body": "<blockquote>\n  <p>How can I do decimal to hex.?</p>\n</blockquote>\n\n<p>Do</p>\n\n<pre><code>int a = 2000;\nprintf( \"%X\", a);\n</code></pre>\n\n<p>Output:</p>\n\n<blockquote>\n  <p>7D0</p>\n</blockquote>\n\n<p>In other words: 2000 in hex.</p>\n\n<p>Explaination: Decimal and Hex are just notations (like binary) of the same number. Which notation you want to print is yours to choose.</p>\n"}], "owner": {"reputation": 21, "user_id": 5498593, "user_type": "registered", "profile_image": "https://graph.facebook.com/1496070934022743/picture?type=large", "display_name": "Zuo Ksr", "link": "https://stackoverflow.com/users/5498593/zuo-ksr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "answer_count": 1, "score": -5, "last_activity_date": 1446043189, "creation_date": 1446042737, "last_edit_date": 1446042820, "question_id": 33393870, "link": "https://stackoverflow.com/questions/33393870/how-can-i-do-decimal-to-hex", "title": "How can I do decimal to hex.?", "body": "<p>I want to write a decimal and see hex.\nI wrote some codes but it didnt work.What is wrong?\nthanks.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint main()\n\n{\n    int l(int);\n    int k(int);\n    char cha;\n\n    int x, y = 0, z = 18, a = 0, b = 0, c = 0, d = 0;\n\n    scanf(\"%d %c\", &amp;x, &amp;cha); //x a decimal number//\n                              //I // \n\n    if (x&gt;0 &amp;&amp; x &lt;= 65535) // kals\u0131n //\n    {\n\n        if (cha == 'h' || cha == 'H')\n\n        {\n            y = x;\n\n\n            for (z = 18; z &gt;= 16; c++)\n            {\n                z = x / 16;\n                x = x / 16;\n\n            }\n            z = k(z); /* this is a function for finding that what is in hex.*/\n            d = c;\n            for (a = 0; a != c; a++)\n            {\n\n                c = d;\n                for (; c &gt;= a; c--)\n                {\n                    b = y % 16;\n                    y = y / 16;\n                }\n                b = k(b);    /* find what is */\n            }\n        }\n    }\n    return 0;\n}\n\n\n\n\nint k(int d)\n{\n    int e = d;\n    if (e == 10) printf(\"A\");\n    else if (e == 11) printf(\"B\");\n    else if (e == 12) printf(\"C\");\n    else if (e == 13) printf(\"D\");\n    else if (e == 14) printf(\"E\");\n    else if (e == 15) printf(\"F\");\n    else if (e&lt;10) printf(\"%d\", e);\n\n    return e;\n}\n</code></pre>\n\n<p>what is the problem in this code.write 162 h\nand I see 0000000...\nI can use only loops (control) and simple functions</p>\n"}, {"tags": ["c", "ssl", "logging", "openssl"], "comments": [{"owner": {"reputation": 14334, "user_id": 1380680, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/TRgwX.png?s=128&g=1", "display_name": "Reinier Torenbeek", "link": "https://stackoverflow.com/users/1380680/reinier-torenbeek"}, "edited": false, "score": 1, "creation_date": 1446258568, "post_id": 33393719, "comment_id": 54682912, "body": "Are you looking for something like <a href=\"https://www.openssl.org/docs/manmaster/crypto/ERR_print_errors.html\" rel=\"nofollow noreferrer\">ERR_print_errors()</a>?"}, {"owner": {"reputation": 75, "user_id": 2717002, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/4T5qu.jpg?s=128&g=1", "display_name": "Mohammed Raqeeb", "link": "https://stackoverflow.com/users/2717002/mohammed-raqeeb"}, "edited": false, "score": 0, "creation_date": 1556031628, "post_id": 33393719, "comment_id": 98294934, "body": "Guys, I am facing the same problem. Tried using ERR_print_errors() but it just prints all NULL values. Am I missing something ? I am building on Windows using Visual Studio. Appreciate your kind help!"}], "answers": [{"tags": [], "owner": {"reputation": 14334, "user_id": 1380680, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/TRgwX.png?s=128&g=1", "display_name": "Reinier Torenbeek", "link": "https://stackoverflow.com/users/1380680/reinier-torenbeek"}, "is_accepted": true, "score": 1, "last_activity_date": 1568864482, "last_edit_date": 1568864482, "creation_date": 1446518904, "answer_id": 33490563, "question_id": 33393719, "link": "https://stackoverflow.com/questions/33393719/enable-logging-internal-openssl-messages/33490563#33490563", "title": "Enable logging internal openssl messages", "body": "<p>The file <code>doc/ssleay.txt</code> in the OpenSSL source tree contains a big warning that it is obsolete. The section called <code>error.doc</code> still seems rather accurate though and gives a good overview of the different OpenSSL error mechanisms. You are not supposed to completely trust it.</p>\n\n<p>The real documentation contains everything you need, but more scattered. The main entry point is the <a href=\"https://www.openssl.org/docs/manmaster/crypto/err.html\" rel=\"nofollow noreferrer\">man page about <code>err</code></a> and the different links it points to.</p>\n\n<p>One of them that seems useful for you is <a href=\"https://www.openssl.org/docs/man1.0.2/man3/ERR_print_errors.html\" rel=\"nofollow noreferrer\"><code>ERR_print_errors()</code></a> for v1.0.2. Replace the version number with your version of interest.</p>\n"}], "owner": {"reputation": 451, "user_id": 1660121, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/559d96d22fbbf916f435cb4eb0d63dd7?s=128&d=identicon&r=PG", "display_name": "patraulea", "link": "https://stackoverflow.com/users/1660121/patraulea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6597, "favorite_count": 0, "accepted_answer_id": 33490563, "answer_count": 1, "score": 3, "last_activity_date": 1568864482, "creation_date": 1446042420, "question_id": 33393719, "link": "https://stackoverflow.com/questions/33393719/enable-logging-internal-openssl-messages", "title": "Enable logging internal openssl messages", "body": "<p>I'd like to get error messages during SSL handshakes to be printed or passed to my code from libssl/libcrypto. </p>\n\n<p>I don't think the messages in msg_cb() from apps/s_cb.c in the openssl sources are enough. I'd like to see more than the message contents, I can see those using wireshark. I'm looking for errors such as \"invalid HMAC\", \"unknown certificate\", \"certificate validation error\", etc. </p>\n\n<p>The calls to SSLErr is what I'm after. For example:</p>\n\n<pre><code>SSLerr(SSL_F_SSL23_GET_CLIENT_HELLO, SSL_R_UNSUPPORTED_PROTOCOL);\n</code></pre>\n"}, {"tags": ["c", "malloc", "access-violation"], "comments": [{"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 5, "creation_date": 1446042297, "post_id": 33393633, "comment_id": 54578604, "body": "Never cast the results of <code>malloc</code>"}, {"owner": {"reputation": 1096, "user_id": 1009377, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a99983e09363e61cd2e0f15616a06de2?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/1009377/chris"}, "edited": false, "score": 0, "creation_date": 1446042452, "post_id": 33393633, "comment_id": 54578734, "body": "Why would you not want to cast the void* returned by malloc in C?"}, {"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 0, "creation_date": 1446042466, "post_id": 33393633, "comment_id": 54578748, "body": "Also please post the rest of your code and the exact error output."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1446042475, "post_id": 33393633, "comment_id": 54578754, "body": "Most likely, somewhere in your program there is something that causes a heap corruption, which in turn destroys other parts of the program using the heap."}, {"owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "reply_to_user": {"reputation": 1096, "user_id": 1009377, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a99983e09363e61cd2e0f15616a06de2?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/1009377/chris"}, "edited": false, "score": 0, "creation_date": 1446042497, "post_id": 33393633, "comment_id": 54578765, "body": "@Chris: Because <code>void*</code> implicitly and safely casts to <i>any</i> pointer type."}, {"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "reply_to_user": {"reputation": 1096, "user_id": 1009377, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a99983e09363e61cd2e0f15616a06de2?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/1009377/chris"}, "edited": false, "score": 1, "creation_date": 1446042504, "post_id": 33393633, "comment_id": 54578771, "body": "@Chris Because in C any void* pointer is automaticly and safely promoted to the proper type on use, unlike in c++"}, {"owner": {"reputation": 12521, "user_id": 4498329, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/b1bf128245aa5bcb1b740e8154296900?s=128&d=identicon&r=PG&f=1", "display_name": "skyking", "link": "https://stackoverflow.com/users/4498329/skyking"}, "edited": false, "score": 1, "creation_date": 1446042520, "post_id": 33393633, "comment_id": 54578788, "body": "Which compiler and platform do you use? What&#39;s the value of <code>width</code>, <code>height</code>, <code>i</code> and <code>s</code> when it crashes?"}, {"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "reply_to_user": {"reputation": 1096, "user_id": 1009377, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a99983e09363e61cd2e0f15616a06de2?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/1009377/chris"}, "edited": false, "score": 0, "creation_date": 1446042526, "post_id": 33393633, "comment_id": 54578791, "body": "@Chris And casting to it can hide errors"}, {"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 4, "creation_date": 1446042563, "post_id": 33393633, "comment_id": 54578823, "body": "But FFS, please <i>stop complaining</i> about casting malloc. I&#39;m sure there are more important things to discuss in the comment section of every bloody C question."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1446042596, "post_id": 33393633, "comment_id": 54578848, "body": "All <code>int</code>s should be <code>size_t</code>s."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 1096, "user_id": 1009377, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a99983e09363e61cd2e0f15616a06de2?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/1009377/chris"}, "edited": false, "score": 3, "creation_date": 1446042607, "post_id": 33393633, "comment_id": 54578857, "body": "@Chris <a href=\"http://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc?rq=1\">Dead horse malloc cast debate can be found here</a>. Now, can everyone kindly stop spamming this question with these irrelevant, off-topic remarks."}, {"owner": {"reputation": 1280, "user_id": 4932403, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uLzID.jpg?s=128&g=1", "display_name": "KeylorSanchez", "link": "https://stackoverflow.com/users/4932403/keylorsanchez"}, "edited": false, "score": 0, "creation_date": 1446042910, "post_id": 33393633, "comment_id": 54579071, "body": "You have a strange way of copying your Color struct. Why don&#39;t you just try to do a memcpy of sizeof(Color) ?"}, {"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1446042927, "post_id": 33393633, "comment_id": 54579084, "body": "As @Lundin mentioned, the problem is somewhere else. Produce an MCVE. And for your own mental health use a memory santizier (valgrind, clang, gcc...)"}, {"owner": {"reputation": 338, "user_id": 5439654, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7m1uW.png?s=128&g=1", "display_name": "Kotshi", "link": "https://stackoverflow.com/users/5439654/kotshi"}, "edited": false, "score": 0, "creation_date": 1446043037, "post_id": 33393633, "comment_id": 54579179, "body": "We need to know more about <code>Color* source</code>."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 1280, "user_id": 4932403, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uLzID.jpg?s=128&g=1", "display_name": "KeylorSanchez", "link": "https://stackoverflow.com/users/4932403/keylorsanchez"}, "edited": false, "score": 2, "creation_date": 1446043056, "post_id": 33393633, "comment_id": 54579195, "body": "@KeylorSanchez What&#39;s strange about it? It is perfectly fine practice and equivalent to a memcpy. In fact it will most likely result in the same code as memcpy, after optimization."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 1, "creation_date": 1446044452, "post_id": 33393633, "comment_id": 54580270, "body": "@KarolyHorvath the hope is that this stupid dogma will die someday. A single one-line comment with a link to the canonical SO answer (kindly provided by Lundin above) would be sufficient though."}, {"owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "reply_to_user": {"reputation": 1280, "user_id": 4932403, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uLzID.jpg?s=128&g=1", "display_name": "KeylorSanchez", "link": "https://stackoverflow.com/users/4932403/keylorsanchez"}, "edited": false, "score": 4, "creation_date": 1446044644, "post_id": 33393633, "comment_id": 54580409, "body": "@KeylorSanchez: Actually if we go into full language C struct assignment is the proper way to do it. memcpy does a flat, void copy on the whole struct, but according to the C language standard in fact only accesses to actual struct elements are defined. Depending on how the compiler pads the struct a memcpy will also read/write &quot;between&quot; the elements, which is, if we&#39;re super-technical and totally OCD, illegal and undefined behavior."}, {"owner": {"reputation": 1280, "user_id": 4932403, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uLzID.jpg?s=128&g=1", "display_name": "KeylorSanchez", "link": "https://stackoverflow.com/users/4932403/keylorsanchez"}, "reply_to_user": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "edited": false, "score": 0, "creation_date": 1446046010, "post_id": 33393633, "comment_id": 54581471, "body": "@datenwolf thanks for the explanation"}, {"owner": {"reputation": 51, "user_id": 5234273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23404101ce3bf525736b13957a5ecf71?s=128&d=identicon&r=PG", "display_name": "JimDoddle", "link": "https://stackoverflow.com/users/5234273/jimdoddle"}, "edited": false, "score": 0, "creation_date": 1446057671, "post_id": 33393633, "comment_id": 54589539, "body": "Thanks for the comments and answers. I will change the points suggested and come back as soon as I can exclude some points or got the problem resolved."}], "answers": [{"comments": [{"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1446043172, "post_id": 33393985, "comment_id": 54579275, "body": "minusone. <i>Seriously</i>? Have many megapixels do you think this image has?"}, {"owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "reply_to_user": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1446043355, "post_id": 33393985, "comment_id": 54579412, "body": "@KarolyHorvath: <code>(4*1024*1024*1024&#47;(sizeof(float)*4))**0.5 = 16384</code> \u2013 that&#39;s not so much, truth to be told. I frequently work with images 4 times as wide and high. \u2013 Also maybe OP is passing a negative value into either width or height, which causes the same problem."}, {"owner": {"reputation": 12521, "user_id": 4498329, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/b1bf128245aa5bcb1b740e8154296900?s=128&d=identicon&r=PG&f=1", "display_name": "skyking", "link": "https://stackoverflow.com/users/4498329/skyking"}, "edited": false, "score": 1, "creation_date": 1446043446, "post_id": 33393985, "comment_id": 54579492, "body": "Actually, that problem shouldn&#39;t result in this error. First of all overflow is not undefined behavior, it&#39;s actually well defined behavior (IIRC). If you get wrong value for <code>s</code> you would still have that <code>i&lt;s</code> anyway. The only risky is <code>s*sizeof(Color)</code> that might allocate a too small buffer due to overflow (but then you have to have a situation where the array wouldn&#39;t fit in addressable memory anyway)"}, {"owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "reply_to_user": {"reputation": 12521, "user_id": 4498329, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/b1bf128245aa5bcb1b740e8154296900?s=128&d=identicon&r=PG&f=1", "display_name": "skyking", "link": "https://stackoverflow.com/users/4498329/skyking"}, "edited": false, "score": 0, "creation_date": 1446043478, "post_id": 33393985, "comment_id": 54579527, "body": "@skyking: Signed overflow is <b>undefined behavior</b> in C."}, {"owner": {"reputation": 9070, "user_id": 79591, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rFGtY.jpg?s=128&g=1", "display_name": "GrahamS", "link": "https://stackoverflow.com/users/79591/grahams"}, "reply_to_user": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1446043498, "post_id": 33393985, "comment_id": 54579550, "body": "It seems a reasonable point to me @KarolyHorvath. In C a signed <code>int</code> only needs to support up to +32767, so simple 640x480 image would be too big for <code>s</code>."}, {"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1446043516, "post_id": 33393985, "comment_id": 54579569, "body": "@datenwolf: Now you&#39;re pulling numbers out of thin air? Just delete this answer and leave a comment..."}, {"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "reply_to_user": {"reputation": 9070, "user_id": 79591, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rFGtY.jpg?s=128&g=1", "display_name": "GrahamS", "link": "https://stackoverflow.com/users/79591/grahams"}, "edited": false, "score": 0, "creation_date": 1446043606, "post_id": 33393985, "comment_id": 54579637, "body": "@GrahamS: <i>Reasonable</i>? No, it&#39;s just a very very very vey improbable scenario."}, {"owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "reply_to_user": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1446043628, "post_id": 33393985, "comment_id": 54579658, "body": "@KarolyHorvath: I&#39;m not pulling numbers out of thin air here. 32 bit is still a widely used size for integers (for example on Windows, even Windows 64 a int is 32 bits). This gives you 4GiB you can address and the struct up there required 16 bytes (if packed). 4 bytes a float, 4 floats. divide that and take the square root."}, {"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1446043699, "post_id": 33393985, "comment_id": 54579711, "body": "Ah. But that&#39;s width and height, not megapixels."}, {"owner": {"reputation": 12521, "user_id": 4498329, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/b1bf128245aa5bcb1b740e8154296900?s=128&d=identicon&r=PG&f=1", "display_name": "skyking", "link": "https://stackoverflow.com/users/4498329/skyking"}, "edited": false, "score": 1, "creation_date": 1446043741, "post_id": 33393985, "comment_id": 54579742, "body": "OK, so it&#39;s undefined, but in practice you use a multiplication instruction here and the result should in most cases result in either result being whatever the processor delivers or that the processor raises exception right there."}, {"owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "reply_to_user": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1446043821, "post_id": 33393985, "comment_id": 54579793, "body": "@KarolyHorvath: Yes. I&#39;d expect somebody actually follow a calculation thinking about what&#39;s going on. Of course the simple answer would have been 256 megapixels, but how wide and high would that be."}, {"owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "reply_to_user": {"reputation": 12521, "user_id": 4498329, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/b1bf128245aa5bcb1b740e8154296900?s=128&d=identicon&r=PG&f=1", "display_name": "skyking", "link": "https://stackoverflow.com/users/4498329/skyking"}, "edited": false, "score": 0, "creation_date": 1446043924, "post_id": 33393985, "comment_id": 54579880, "body": "@skyking: Nope. If a compiler detects that your calculation (like comparing results on such a signed multiplication) tests for a value that can only happen in the undefined case, then it legally any discard any code using the resulting values. It may and modern compilers <b>do that!</b>"}, {"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1446043993, "post_id": 33393985, "comment_id": 54579932, "body": "Which could be the case if width and height are <i>constants</i>. Well, another assumption."}, {"owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "reply_to_user": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1446044027, "post_id": 33393985, "comment_id": 54579956, "body": "@KarolyHorvath: Could have been a negative value for wither width or height either. Same outcome: Undefined behavior and very likely a value passed into malloc that&#39;s way outside a reasonable range so a buffer to small is returned. OP does test for malloc returning NULL and since that test passes the only explanation is, that somewhere some arithmetic overflows."}, {"owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "reply_to_user": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1446044100, "post_id": 33393985, "comment_id": 54580020, "body": "@KarolyHorvath: No, not an assumption. For example the DIB file format (you know, Windows <code>.bmp</code> permits the height header field to be negative to indicate that the scanlines are in bottom\u2013up order instead top\u2013down. If OP does read a DIB that&#39;s been written that way, this happens."}, {"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1446044135, "post_id": 33393985, "comment_id": 54580042, "body": "@datenwolf: oh no Sir, heap corruption is the likely culprit here. But let&#39;s stop this ridiculously silly discussion here. I&#39;m sure the OP has something to say on the matter."}, {"owner": {"reputation": 12521, "user_id": 4498329, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/b1bf128245aa5bcb1b740e8154296900?s=128&d=identicon&r=PG&f=1", "display_name": "skyking", "link": "https://stackoverflow.com/users/4498329/skyking"}, "edited": false, "score": 0, "creation_date": 1446044160, "post_id": 33393985, "comment_id": 54580056, "body": "@datenwolf Nope, GCC for example seem to emit just an <code>imul</code>, no test seem to be done for overflow. Besides why would a &quot;modern&quot; compiler waste time on checks for conditions that have undefined behavior anyway? The reasonable way would to be to just multiply and let whatever happens happen if it overflows. This means that you would end up with a value in <code>s</code> and the execution would continue after that."}, {"owner": {"reputation": 12521, "user_id": 4498329, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/b1bf128245aa5bcb1b740e8154296900?s=128&d=identicon&r=PG&f=1", "display_name": "skyking", "link": "https://stackoverflow.com/users/4498329/skyking"}, "edited": false, "score": 0, "creation_date": 1446044217, "post_id": 33393985, "comment_id": 54580099, "body": "Anyway if now overflow is so bad, you should not just multiply <code>sz_width</code> and <code>sz_height</code> without first checking so they can&#39;t overflow."}, {"owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "reply_to_user": {"reputation": 12521, "user_id": 4498329, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/b1bf128245aa5bcb1b740e8154296900?s=128&d=identicon&r=PG&f=1", "display_name": "skyking", "link": "https://stackoverflow.com/users/4498329/skyking"}, "edited": false, "score": 0, "creation_date": 1446044317, "post_id": 33393985, "comment_id": 54580175, "body": "@skyking: <b>signed</b> overflow is undefined. <b>unsigned</b> overflow <i>is well defined</i>. <code>size_t</code> is unsigned, so the overflow behavior for <code>sz_width * sz_height</code> is well defined, and by using the identity <code>sz = sz_width * sz_height</code> =&gt; <code>sz_height = sz &#47; sz_width</code> one can check if a overflow happened."}, {"owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "reply_to_user": {"reputation": 12521, "user_id": 4498329, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/b1bf128245aa5bcb1b740e8154296900?s=128&d=identicon&r=PG&f=1", "display_name": "skyking", "link": "https://stackoverflow.com/users/4498329/skyking"}, "edited": false, "score": 0, "creation_date": 1446044470, "post_id": 33393985, "comment_id": 54580279, "body": "@skyking: Please read those two articles on UB: <a href=\"http://blogs.msdn.com/b/oldnewthing/archive/2014/06/27/10537746.aspx\" rel=\"nofollow noreferrer\">blogs.msdn.com/b/oldnewthing/archive/2014/06/27/10537746.asp&zwnj;&#8203;x</a> and <a href=\"http://blog.llvm.org/2011/05/what-every-c-programmer-should-know.html\" rel=\"nofollow noreferrer\">blog.llvm.org/2011/05/what-every-c-programmer-should-know.ht&zwnj;&#8203;ml</a>"}, {"owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "reply_to_user": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 1, "creation_date": 1446044832, "post_id": 33393985, "comment_id": 54580556, "body": "@KarolyHorvath: Since OP now gave actual values for the variables, yes, heap corruption seems to be the culprit. Nevertheless my answer still holds significance (IMHO) so I see no point in altering or deleting it. OP likely does have heap corruption. Other people with a similar problem, that&#39;s due to invalid values however may search for this and then a discussion about overflow behavior and checks is necessary reading material."}, {"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1446044987, "post_id": 33393985, "comment_id": 54580681, "body": "@datenwolf: Sry, I was just following my instincts, based on likelihoods. Good old Bayes&#39; theorem."}, {"owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "reply_to_user": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1446045739, "post_id": 33393985, "comment_id": 54581268, "body": "@KarolyHorvath: And I was following mine. As already told, our group is working with <b>huge</b> images all the time and this kind of overflow error I frequently have to deal with in programs newbies in our group write. I always tell them &quot;use the libraries provided&quot;, but they often don&#39;t listen."}, {"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1446046009, "post_id": 33393985, "comment_id": 54581470, "body": "@datenwolf: and you&#39;ve extrapolated your group&#39;s tasks and tendencies to the rest of the world. I guess this is some kind of occupational hazard ;)"}, {"owner": {"reputation": 12521, "user_id": 4498329, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/b1bf128245aa5bcb1b740e8154296900?s=128&d=identicon&r=PG&f=1", "display_name": "skyking", "link": "https://stackoverflow.com/users/4498329/skyking"}, "edited": false, "score": 0, "creation_date": 1446099008, "post_id": 33393985, "comment_id": 54605234, "body": "@datenwolf I <b>know</b> what undefined behavior means, but still the fact is that I haven&#39;t seen a implementation that will do anything entirely unexpected in this situation. The odds is in favor of that the OP&#39;s compiler does not do that either."}], "tags": [], "owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "is_accepted": false, "score": 2, "last_activity_date": 1446057538, "last_edit_date": 1446057538, "creation_date": 1446043031, "answer_id": 33393985, "question_id": 33393633, "link": "https://stackoverflow.com/questions/33393633/access-violation-after-malloc/33393985#33393985", "title": "Access violation after malloc", "body": "<p>This</p>\n\n<pre><code>int s = width * height;\n</code></pre>\n\n<p>is prone to an multiplication integer overflow. If that happens you're invoking undefined behavior (since the overflow behavior of signed integers is not defined); usually malloc will allocate a buffer too short.</p>\n\n<p>EDIT: Such undefined overflow can also happen if either one of width or height is negative.</p>\n\n<p>To avoid this you have to check for an multiplication overflow. The only reliable way to do this, is by using unsigned arithmetic (for which overflow behavior is defined).</p>\n\n<pre><code>if( 0 &gt; width\n || 0 &gt; height\n){\n    return ERROR_INVALID_VALUE;\n}\nsize_t const sz_width  = width;\nsize_t const sz_height = height;\n/* ((size_t)x) != x makes use of arithmetic conversion\n * rules to check for truncation by the cast  */\nif( sz_width  != width\n || sz_height != height\n){\n    return ERROR_TRUNCATION;\n}\n\n/* now check if the multiplication overflows */\n/* size_t is unsigned, so overflow is well behaved */\nsize_t const sz = sz_width * sz_height;\nif( (sz / sz_width) != sz_height ) {\n    return ERROR_OVERFLOW;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 103812, "user_id": 320726, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/02041b18199678d1f02e6d5040dbb907?s=128&d=identicon&r=PG", "display_name": "6502", "link": "https://stackoverflow.com/users/320726/6502"}, "is_accepted": true, "score": 2, "last_activity_date": 1446043678, "creation_date": 1446043678, "answer_id": 33394248, "question_id": 33393633, "link": "https://stackoverflow.com/questions/33393633/access-violation-after-malloc/33394248#33394248", "title": "Access violation after malloc", "body": "<p>I can see nothing terribly wrong with this code. However <code>malloc</code> can indeed return garbage if the heap has been corrupted before. Actually quite often <code>malloc</code> is when one detects that something went wrong and you get an explicit \"heap corruption\" error message.</p>\n\n<p>My suggestion is, if possible, to run the program under valgrind in the hope to catch the real bad guy that corrupts heap data structures... something that happens BEFORE calling this cloning function.</p>\n"}, {"tags": [], "owner": {"reputation": 12521, "user_id": 4498329, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/b1bf128245aa5bcb1b740e8154296900?s=128&d=identicon&r=PG&f=1", "display_name": "skyking", "link": "https://stackoverflow.com/users/4498329/skyking"}, "is_accepted": false, "score": 1, "last_activity_date": 1446043906, "creation_date": 1446043906, "answer_id": 33394335, "question_id": 33393633, "link": "https://stackoverflow.com/questions/33393633/access-violation-after-malloc/33394335#33394335", "title": "Access violation after malloc", "body": "<p>I suppose that if you have range checked the <code>width</code> and <code>height</code> as being reasonable (so you won't overflow) the best course of action would be to try using valgrid. That way you will be able to see if you've had some memory error before this that might result in <code>malloc</code> misbehaving or if you've actually got a memory block that isn't large enough.</p>\n"}, {"comments": [{"owner": {"reputation": 9070, "user_id": 79591, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rFGtY.jpg?s=128&g=1", "display_name": "GrahamS", "link": "https://stackoverflow.com/users/79591/grahams"}, "reply_to_user": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1446045171, "post_id": 33394529, "comment_id": 54580830, "body": "More an attempt to clarify one aspect of the @datenwolf answer and explain why it is a bad idea. I think it is better to use more appropriate types from the start, rather than try to detect overflows."}, {"owner": {"reputation": 9070, "user_id": 79591, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rFGtY.jpg?s=128&g=1", "display_name": "GrahamS", "link": "https://stackoverflow.com/users/79591/grahams"}, "reply_to_user": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1446045335, "post_id": 33394529, "comment_id": 54580945, "body": "Note: The OP has added that the target platform is Win64, so <code>int</code> is probably sufficiently wide there that this won&#39;t cause an overflow. Still bad practise though and not cross-platform."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 1, "creation_date": 1446047549, "post_id": 33394529, "comment_id": 54582597, "body": "&quot;I think it is better to use more appropriate types from the start, rather than try to detect overflows.&quot; -- Good point, but you don&#39;t make the suggestion in the answer. ;-) If you do, <i>please</i> use standard types, not Windows-specific ones. There are children watching. ;-)"}, {"owner": {"reputation": 9070, "user_id": 79591, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rFGtY.jpg?s=128&g=1", "display_name": "GrahamS", "link": "https://stackoverflow.com/users/79591/grahams"}, "reply_to_user": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1446048032, "post_id": 33394529, "comment_id": 54582994, "body": "Okay thanks @DevSolar, I&#39;ve edited the answer to make that point clearer."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1446057921, "post_id": 33394529, "comment_id": 54589684, "body": "&quot;<i>should probably be</i>&quot; <code>size_t</code>."}, {"owner": {"reputation": 9070, "user_id": 79591, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rFGtY.jpg?s=128&g=1", "display_name": "GrahamS", "link": "https://stackoverflow.com/users/79591/grahams"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1446064909, "post_id": 33394529, "comment_id": 54593634, "body": "Personally I wouldn&#39;t use <code>size_t</code> here @alk. It would work but would be misleading as <code>size_t</code> is intended to be used for values that are sizes in bytes."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1446366692, "post_id": 33394529, "comment_id": 54707010, "body": "... and to index arrays. @GrahamS"}, {"owner": {"reputation": 9070, "user_id": 79591, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rFGtY.jpg?s=128&g=1", "display_name": "GrahamS", "link": "https://stackoverflow.com/users/79591/grahams"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1446369213, "post_id": 33394529, "comment_id": 54707479, "body": "@alk There is a nice summary of the reasons behind introducing the size_t type here: <a href=\"http://www.embedded.com/electronics-blogs/programming-pointers/4026076/1/Why-size-t-matters\" rel=\"nofollow noreferrer\">embedded.com/electronics-blogs/programming-pointers/4026076/&zwnj;&#8203;1/&hellip;</a>"}], "tags": [], "owner": {"reputation": 9070, "user_id": 79591, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rFGtY.jpg?s=128&g=1", "display_name": "GrahamS", "link": "https://stackoverflow.com/users/79591/grahams"}, "is_accepted": false, "score": 1, "last_activity_date": 1446047981, "last_edit_date": 1446047981, "creation_date": 1446044475, "answer_id": 33394529, "question_id": 33393633, "link": "https://stackoverflow.com/questions/33393633/access-violation-after-malloc/33394529#33394529", "title": "Access violation after malloc", "body": "<p>You don't say what your target platform is, but this:</p>\n\n<pre><code>int s = width * height;\n</code></pre>\n\n<p>will cause an overflow if <code>width * height</code> would produce a number greater than <code>MAX_INT</code>. The C standard only requires a signed <code>int</code> to store up to +32767.</p>\n\n<p>Your target platform <em>may</em> use larger ints, especially if it is a desktop OS, but it is still bad practise.</p>\n\n<p>Also your function signature allows for negative values to be passed as width or height, but your code doesn't handle that possibility. </p>\n\n<p>Edit: in summary, use more appropriate types. <code>width</code> and <code>height</code> should <em>probably</em> be <code>unsigned int</code>. If so then <code>s</code> and <code>i</code> should be <code>unsigned long</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 4046, "user_id": 4971422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4abf51a937ddda51cc6813445605c50?s=128&d=identicon&r=PG&f=1", "display_name": "FredK", "link": "https://stackoverflow.com/users/4971422/fredk"}, "is_accepted": false, "score": 0, "last_activity_date": 1446044925, "creation_date": 1446044925, "answer_id": 33394696, "question_id": 33393633, "link": "https://stackoverflow.com/questions/33393633/access-violation-after-malloc/33394696#33394696", "title": "Access violation after malloc", "body": "<p>The malloc call is probably not your problem (as @KarolyHorvath said, the size is not really very big). The most likely problem is that the incoming <code>source</code> is null or empty; you should check for that before trying to reference <code>source[i]</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 14387657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bb73fbace57eb0303ec3f93ad0af9a4?s=128&d=identicon&r=PG&f=1", "display_name": "Lance Larsen", "link": "https://stackoverflow.com/users/14387657/lance-larsen"}, "is_accepted": false, "score": 0, "last_activity_date": 1610983728, "creation_date": 1610983728, "answer_id": 65777445, "question_id": 33393633, "link": "https://stackoverflow.com/questions/33393633/access-violation-after-malloc/65777445#65777445", "title": "Access violation after malloc", "body": "<p>When you are compiling .c source in Visual Studio that doesn't include stdlib.h (where malloc defined as returning void*) and Visual Studio uses its own definition, where malloc returns int.</p>\n<p>Visual studio prints:</p>\n<blockquote>\n<p>warning C4013: 'malloc' undefined; assuming extern returning int</p>\n</blockquote>\n<p>So your pointer is truncated at 4 bytes rather than 8. It seems this problem appears only when compiling in x64 mode in .c files.</p>\n<p>So, solution is - just include stdlib.h.</p>\n"}], "owner": {"reputation": 51, "user_id": 5234273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23404101ce3bf525736b13957a5ecf71?s=128&d=identicon&r=PG", "display_name": "JimDoddle", "link": "https://stackoverflow.com/users/5234273/jimdoddle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1703, "favorite_count": 0, "accepted_answer_id": 33394248, "answer_count": 6, "score": 2, "last_activity_date": 1610983728, "creation_date": 1446042179, "last_edit_date": 1446043474, "question_id": 33393633, "link": "https://stackoverflow.com/questions/33393633/access-violation-after-malloc", "title": "Access violation after malloc", "body": "<p>Could someone please help me understand the following behaviour:</p>\n\n<p>I have a little piece of code for cloning a float image.\nThe method <code>Clone</code> takes a pointer to another image and its dimensions as arguments.</p>\n\n<p>Everything works as expected, but sometimes this line <code>clone[i] = color;</code> causes an Access Violation. The occurrence of the exception is not predictable neither periodic. Inspecting variables at crash time shows that <code>Color color = source[i];</code> is always set and valid.</p>\n\n<p>How is it possible that <code>malloc</code> returns a bad pointer?</p>\n\n<p>The code:</p>\n\n<pre><code>typedef struct\n{\n    float r;\n    float g;\n    float b;\n    float a;\n} Color;\n\nColor* Clone(Color* source, int width, int height)\n{\n    int s = width * height;\n\n    Color *clone;\n    clone = (Color *)malloc(s * sizeof(Color));\n\n    if (clone)\n    {\n        for (int i = 0; i &lt; s; i++)\n        {\n            Color color = source[i];\n\n            // Sometimes app crash here: Access violation\n            clone[i] = color;\n        }\n    }\n\n    return clone;\n}\n</code></pre>\n\n<p>Any help is much appreciated.</p>\n\n<p><strong>Update:</strong></p>\n\n<p>Platform: Windows 64bit</p>\n\n<p>Values of variables at crash time:</p>\n\n<pre><code>width = 256\nheight = 256\ns = 655536\ni = 0\n</code></pre>\n"}, {"tags": ["c", "language-lawyer", "undefined-behavior", "memcpy"], "comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 1, "creation_date": 1446043009, "post_id": 33393569, "comment_id": 54579160, "body": "The <i>behaviour</i> is not undefined. Note, however, that the compiler may remove the <code>memcpy</code> altogether, since the <i>value</i> of <code>*to</code> at the end of the function is undefined anyway."}, {"owner": {"reputation": 4050, "user_id": 746346, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/bd7e28f3d04b09ab4a503a992568f417?s=128&d=identicon&r=PG", "display_name": "Tor Klingberg", "link": "https://stackoverflow.com/users/746346/tor-klingberg"}, "edited": false, "score": 0, "creation_date": 1446043680, "post_id": 33393569, "comment_id": 54579696, "body": "I assume that using <code>*to</code> later is undefined behaviour, just like using <code>from</code> directly, but this question is about the <code>memcpy</code> itself. I think <code>*to = from</code> would be undefined behaviour, even though the value is not &quot;really&quot; used."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1446062607, "post_id": 33393569, "comment_id": 54592420, "body": "Related question, for C++: <a href=\"http://stackoverflow.com/q/32997185/103167\">stackoverflow.com/q/32997185/103167</a>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 2, "creation_date": 1446067963, "post_id": 33393569, "comment_id": 54595185, "body": "@Quentin that doesn&#39;t make any sense. There is no such thing as &quot;undefined values&quot;."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1531750356, "post_id": 33393569, "comment_id": 89699903, "body": "@Quentin So you are saying that the post condition of copying bytes is NOT that the copy is equal to the original, right?"}], "answers": [{"tags": [], "owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "is_accepted": false, "score": 3, "last_activity_date": 1446089325, "last_edit_date": 1446089325, "creation_date": 1446042152, "answer_id": 33393623, "question_id": 33393569, "link": "https://stackoverflow.com/questions/33393569/is-it-undefined-behaviour-to-memcpy-from-an-uninitialized-variable/33393623#33393623", "title": "Is it undefined behaviour to memcpy from an uninitialized variable?", "body": "<p>( Earlier -<em>Didn't notice address of</em> <code>from</code> <em>is passed</em>) . No , that won't cause undefined behaviour , just that <code>from</code> has indeterminate value. As far as you <em>don't</em> intend to <em>use the value of uninitialized variable</em> , program will have a well defined behaviour. </p>\n\n<p>(As allocating space and not initializing variables is not <em>UB</em> .)</p>\n"}, {"comments": [{"owner": {"reputation": 4050, "user_id": 746346, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/bd7e28f3d04b09ab4a503a992568f417?s=128&d=identicon&r=PG", "display_name": "Tor Klingberg", "link": "https://stackoverflow.com/users/746346/tor-klingberg"}, "edited": false, "score": 0, "creation_date": 1446043783, "post_id": 33393641, "comment_id": 54579768, "body": "I understand that the value in <code>*to</code> will be unspecified or uninitialised, but assuming *to is never actually used, is this code valid?"}, {"owner": {"reputation": 18827, "user_id": 1413133, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hqUmk.jpg?s=128&g=1", "display_name": "Manos Nikolaidis", "link": "https://stackoverflow.com/users/1413133/manos-nikolaidis"}, "reply_to_user": {"reputation": 4050, "user_id": 746346, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/bd7e28f3d04b09ab4a503a992568f417?s=128&d=identicon&r=PG", "display_name": "Tor Klingberg", "link": "https://stackoverflow.com/users/746346/tor-klingberg"}, "edited": false, "score": 0, "creation_date": 1446044085, "post_id": 33393641, "comment_id": 54580001, "body": "Yes the code is valid. Once you declare <code>int from</code> you can legally copy the (random) value in contains."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 2, "creation_date": 1446057187, "post_id": 33393641, "comment_id": 54589225, "body": "Please provide a source for that statement. An ideal how C should behave isn&#39;t sufficient. In particular, does copying the same uninitialized variable twice result in the same value twice? After all, if it&#39;s truly &quot;random data&quot; being copied, it might copy a random bit of the stack, the same stack which <code>memcpy</code> probably uses."}, {"owner": {"reputation": 18827, "user_id": 1413133, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hqUmk.jpg?s=128&g=1", "display_name": "Manos Nikolaidis", "link": "https://stackoverflow.com/users/1413133/manos-nikolaidis"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1446065006, "post_id": 33393641, "comment_id": 54593690, "body": "@MSalters Copying the same initialized variable twice is not guaranteed to copy the same value twice. While this variable is being copied another thread may be writing to it. I am perfectly clear in my answer that there are no guarantees regarding the value of the variable being copied. I don&#39;t understand your objection is to that. I will add a quote from the standard that wasn&#39;t mentioned in the other answers."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1446068123, "post_id": 33393641, "comment_id": 54595263, "body": "&quot;The contents of this int is whatever happened to be on that location in the stack at that moment. &quot; - this is an implementation detail. In general there might not be a stack (I have used one implementation that did not have a stack). In Standard C the int has indeterminate value; not some particular value that happened to be somewhere."}, {"owner": {"reputation": 18827, "user_id": 1413133, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hqUmk.jpg?s=128&g=1", "display_name": "Manos Nikolaidis", "link": "https://stackoverflow.com/users/1413133/manos-nikolaidis"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1446069147, "post_id": 33393641, "comment_id": 54595829, "body": "@M.M I agree that the stack is an implementation detail. Even if the implementation doesn&#39;t have a stack it still has some sort of memory and the uninitialised variable occupies some space at a specific address (somewhere) in there."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1446069306, "post_id": 33393641, "comment_id": 54595923, "body": "It still doesn&#39;t have a particular value. For example <code>int x; int y = x - x;</code> does not produce <code>y = 0</code> in general"}, {"owner": {"reputation": 18827, "user_id": 1413133, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hqUmk.jpg?s=128&g=1", "display_name": "Manos Nikolaidis", "link": "https://stackoverflow.com/users/1413133/manos-nikolaidis"}, "edited": false, "score": 0, "creation_date": 1446069399, "post_id": 33393641, "comment_id": 54595965, "body": "Correct. Since the address of <code>x</code> is never taken that is undefined behaviour  in C11 (6.3.2.1p2)"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1446237601, "post_id": 33393641, "comment_id": 54677334, "body": "@ManosNikolaidis: The issue isn&#39;t that another thread may be writing to it; the issue is that the Committee decided to give compilers room to make optimizations which would be unlikely to have any real value, at the expense of semantic sanity."}], "tags": [], "owner": {"reputation": 18827, "user_id": 1413133, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hqUmk.jpg?s=128&g=1", "display_name": "Manos Nikolaidis", "link": "https://stackoverflow.com/users/1413133/manos-nikolaidis"}, "is_accepted": false, "score": 5, "last_activity_date": 1446067891, "last_edit_date": 1446067891, "creation_date": 1446042224, "answer_id": 33393641, "question_id": 33393569, "link": "https://stackoverflow.com/questions/33393569/is-it-undefined-behaviour-to-memcpy-from-an-uninitialized-variable/33393641#33393641", "title": "Is it undefined behaviour to memcpy from an uninitialized variable?", "body": "<p>This is defined behaviour with respect to the action of copying, except if <code>int</code> has a trap representation in your system. Memory was allocated on the stack when <code>int from</code> was defined. The contents of this <code>int</code> is whatever happened to be on that location in the stack at that moment. Therefore the end result, the value of the <code>int</code> that is being copied to <code>to</code> is not defined (indeterminate).</p>\n\n<p>Other answers have quotes from the C standard that undefined behaviour occurs when the value of an uninitialised variable is \"used\". Which obviously doesn't apply if you don't use the value. There is another mention in the C11 standard undefined behaviour while copying/assigning uninitialised variables :</p>\n\n<p><em>6.3.2.1p2</em></p>\n\n<blockquote>\n  <p>If the lvalue designates an object of automatic storage duration that\n  could have been declared with the register storage class (never had\n  its address taken), and that object is uninitialized (not declared\n  with an initializer and no assignment to it has been performed prior\n  to use), the behavior is undefined.</p>\n</blockquote>\n\n<p>This also doesn't affect your code because the address of <code>from</code> is taken when you call <code>memcpy</code></p>\n\n<p>Another relevant part of the C11 standard is <em>6.2.6.1</em> </p>\n\n<blockquote>\n  <p>Certain object representations need not represent a value of the\n  object type. If the stored value of an object has such a\n  representation and is read by an lvalue expression that does not have\n  character type, the behavior is undefined. If such a representation is\n  produced by a side effect that modifies all or any part of the object\n  by an lvalue expression that does not have character type, the\n  behavior is undefined) Such a representation is called a trap\n  representation.</p>\n</blockquote>\n\n<p>Some very old processors could have a <em>trap representation</em> for an <code>int</code> either software-visible parity bits or \"negative zero\" in non-twos-complement architectures. x86 processors for example don't have trap representations for <code>int</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 4050, "user_id": 746346, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/bd7e28f3d04b09ab4a503a992568f417?s=128&d=identicon&r=PG", "display_name": "Tor Klingberg", "link": "https://stackoverflow.com/users/746346/tor-klingberg"}, "edited": false, "score": 2, "creation_date": 1446048083, "post_id": 33394724, "comment_id": 54583029, "body": "I think this is the best answer so far, but ultimately the committee never really answers whether having <code>memcpy </code> read from an uninitialized variable is undefined behaviour by itself."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "reply_to_user": {"reputation": 4050, "user_id": 746346, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/bd7e28f3d04b09ab4a503a992568f417?s=128&d=identicon&r=PG", "display_name": "Tor Klingberg", "link": "https://stackoverflow.com/users/746346/tor-klingberg"}, "edited": false, "score": 1, "creation_date": 1446051155, "post_id": 33394724, "comment_id": 54585286, "body": "@TorKlingberg no it does not directly address that, although since the main concern with memcpy is padding and there is a bullet that covers that concern it does address it indirectly."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1446175484, "post_id": 33394724, "comment_id": 54645069, "body": "IMHO the C11 description of indeterminate values should be viewed as a bugfix for what was poorly or badly specified in earlier revisions (although the Itanium exception is a new addition)."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1446175791, "post_id": 33394724, "comment_id": 54645140, "body": "@M.M it is kind of funny since you are quoting the same article in your answer."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1446175944, "post_id": 33394724, "comment_id": 54645183, "body": "@ShafikYaghmour yeah, I quoted it as reference for the rationale about the Itanium clause, not for the rest of it! I guess you are doing the same"}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1446176568, "post_id": 33394724, "comment_id": 54645341, "body": "@M.M we are kind of going off-topic here but I think the main point still stands, I don&#39;t personally have any issues with the post but then I like his work in general so perhaps I am biased."}, {"owner": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1446218924, "post_id": 33394724, "comment_id": 54667000, "body": "@M.M multiplying an unspecified value by 2 and taking the result modulo 2^32 produces an even result. Only undefined behavior explains an odd value appearing as result of that computation. What you describe as \u201cj *= 2 leaves the indeterminate value indeterminate\u201d is not how \u201cindeterminate\u201d is described to work in the published standards, although it is how a proposed separate notion of \u201cwobbly values\u201d would work."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "edited": false, "score": 0, "creation_date": 1446245676, "post_id": 33394724, "comment_id": 54680319, "body": "@PascalCuoq according to <a href=\"http://www.open-std.org/Jtc1/sc22/WG14/www/docs/dr_451.htm\" rel=\"nofollow noreferrer\">DR 451</a>&#39;s Proposed Committee Response, &quot;any operation performed on indeterminate values will have an indeterminate value as its result&quot;.  So the result of 2 * indeterminate is indeterminate.   In other words, indeterminate values are unstable and inspecting their contents may give different results from time to time.  For rationale see the bullet point &quot;Strong sentiment formed...&quot; near the bottom. Compilers already perform this optimization."}, {"owner": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1446246629, "post_id": 33394724, "comment_id": 54680592, "body": "@M.M First, if that moderates your \u201crubbish\u201d sentiment of the blog post, note that it predates DR 451 by several months. Second, in C99 the adjective \u201cindeterminate\u201d applies only to memory locations, not to the result of computations, so that a sentence like \u201cthe result of 2 * indeterminate is indeterminate\u201d is nonsensical and cannot be said to clarify the intent of the standard (not that it was written with respect to that version of the standard). I personally find it amazing how much the committee has managed to break in the standard in what was supposed to be a conservative update."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1446252883, "post_id": 33394724, "comment_id": 54681964, "body": "OK, removed that comment. &quot;indeterminate&quot; is short for &quot;indeterminate value&quot;, not just something that applies to memory locations. In fact the Itanium register issue reinforces that. I think DR451 shows that C11 was underspecified. You seem to be interpreting the definition of &quot;indeterminate value&quot; as &quot;either an unspecified value or a trap representation&quot; to mean that once a value is declared without initializer, it takes an unspecified value and is no longer indeterminate. However, checking use of the term &quot;indeterminate value&quot; throughout the rest of the standard, it&#39;s clear that [cont]"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1446252993, "post_id": 33394724, "comment_id": 54681984, "body": "uninitialized values continue to be indeterminate afterwards, until a non-indeterminate value is stored in them; so the result of reading such a value is unspecified each time (not just the first time).  I doubt it was the committee&#39;s intent that uninitialized values be stable, or that <code>int x;</code> requires that <code>x - x == 0</code> be true. (In C99 it was just undefined, C11 attempts to provide some definition, but not ideally so as evinced by the existence of DR451)"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1446324652, "post_id": 33394724, "comment_id": 54699366, "body": "@M.M: For unsigned types with no padding, I would suggest that while there is optimization value in allowing the lifetime of a variable to be deferred until the first time it is read or written, the value of any optimizations that could be achieved by allowing it to remain indeterminate even after it is observed is limited compared to the semantic value that could have been obtained by having the first read convert the value from &quot;Indeterminate&quot; to &quot;Unspecified&quot;.  Signed values are a different story, and it might be useful from both an optimization and semantic perspective to have..."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1446324859, "post_id": 33394724, "comment_id": 54699427, "body": "...cardinal-number types whose range would be the same as unsigned types, but whose behavior would be more like those of signed types [e.g. if an unsigned-int-sized cardinal-number variable held UINT_MAX, incrementing it would not be required to wrap].  I wonder if the people who are deciding to grant all these freedoms to compiler writers have any appreciation for the foregone value of the semantic guarantees they&#39;re tossing out the window."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1446340108, "post_id": 33394724, "comment_id": 54703060, "body": "@supercat I don&#39;t think there&#39;s any semantic value to be gained by making compilers emit code for working on uninitialized variables. Except possibly that sparse two-way array thing."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1446341330, "post_id": 33394724, "comment_id": 54703249, "body": "@M.M: There is IMHO significant semantic value in saying that things may either behave predictably or trap in implementation-defined fashion, at the compiler&#39;s discretion, but they must do one or the other; there is also in some cases some value in being able to specify that certain initial values are &quot;don&#39;t care&quot; but should behave consistently.  The two-way array thing is semantically useful, but it will be undermined if a compiler can take <code>unsigned int x=arr1[index]; if (x &lt; arr2_size &amp;&amp; arr2[x]==index) ...act on valid item</code> and decide that since <code>x</code> is indeterminate, it can be..."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1446341399, "post_id": 33394724, "comment_id": 54703260, "body": "...zero when compared against <code>size</code>, and a value larger than <code>arr2</code> when used as an array index.  Do you see any realistically-useful optimizations which are gained by breaking the two-way array trick? (I wouldn&#39;t mind requiring code to use an intrinsic before using an indeterminate value to prevent a trap, btw)."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1446341865, "post_id": 33394724, "comment_id": 54703321, "body": "The Itanium example comes to mind (the one that may trap even though there are no trap representations) . Are you suggesting something like <code>int x = __unspecified;</code> or something? Which means that <code>x</code> is not indeterminate, and an unspecified value is selected at that point and the variable is no longer &#39;wobbly&#39; or optimizable?"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1446343771, "post_id": 33394724, "comment_id": 54703574, "body": "@M.M: If an implementation defines the trapping behavior on the Itanium that would satisfy &quot;...or trap in implementation-defined fashion&quot;.  I would be suggesting something like <code>__unspecified</code> for individual values, or <code>__set_unspecified(ptr, size)</code> to do a bunch at once.  I wish the Standards Committee would be more pro-active about such things, because if different compilers implement different semantics on the meaning of __unspecified [as would be highly plausible] it may be hard for the Standards Committee to standardize a meaning which isn&#39;t inconsistent with any existing behaviors."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1446344036, "post_id": 33394724, "comment_id": 54703610, "body": "@M.M: More generally, I would suggest that adding optimization-focused directives but changing most forms of Undefined Behavior to Testably-Constrained behaviors (implementations must provide standard means of determining what is or is not guaranteed, but if they report that nothing is guaranteed they would be under no further obligation) would allow more optimizations than are presently possible with UB alone, while making code much more robust."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "reply_to_user": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "edited": false, "score": 0, "creation_date": 1446469263, "post_id": 33394724, "comment_id": 54741166, "body": "@PascalCuoq it is especially interesting to note the difference between how the C++ committee and the C committee choose to resolve this and it is noted in one of the WG21 defects. It makes me wonder what the compilers implementers will do with this. Will gcc and clang treat these forms of UB differently in C then in C++, that seems like an awful result."}], "tags": [], "owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "is_accepted": true, "score": 15, "last_activity_date": 1446212803, "last_edit_date": 1495535477, "creation_date": 1446045018, "answer_id": 33394724, "question_id": 33393569, "link": "https://stackoverflow.com/questions/33393569/is-it-undefined-behaviour-to-memcpy-from-an-uninitialized-variable/33394724#33394724", "title": "Is it undefined behaviour to memcpy from an uninitialized variable?", "body": "<p>The C committee proposed response to <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/dr_451.htm\" rel=\"nofollow noreferrer\">defect report 451: instability of uninitialized automatic variables</a> is:</p>\n\n<blockquote>\n  <p>The answer to question 3 is that library functions will exhibit\n  undefined behavior when used on indeterminate values.</p>\n</blockquote>\n\n<p>The question in the defect had sought an exemption for memcpy and fwrite if this was indeed the case saying:</p>\n\n<blockquote>\n  <p>[...] The fact that one wants to be able to copy uninitialized padding\n  bytes in structs using memcpy without undefined behavior is the reason\n  that using the value of an uninitialized object is not undefined\n  behavior. This seems to suggest that an fwrite of a struct with\n  uninitialized padding bytes should not exhibit undefined behavior.</p>\n</blockquote>\n\n<p>This part of the propose response seems to be aimed at that concern over uninitialized padding:</p>\n\n<blockquote>\n  <p>The committee also notes that padding bytes within structures are\n  possibly a distinct form of \"wobbly\" representation.</p>\n</blockquote>\n\n<p>We can see form <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/dr_338.htm\" rel=\"nofollow noreferrer\">defect report 338: C99 seems to exclude indeterminate value from being an uninitialized register</a> this is somewhat of a change from past expectations. It says amongst other things:</p>\n\n<blockquote>\n  <p>[...] I\n  believe the intent of excluding type unsigned char from having trap\n  representations was to allow it to be used to copy (via memcpy)\n  arbitrary memory, in the case that memory might contain trap\n  representations for some types.[...]</p>\n</blockquote>\n\n<p>The blog post <a href=\"http://blog.frama-c.com/index.php?post/2013/03/13/indeterminate-undefined\" rel=\"nofollow noreferrer\">Reading indeterminate contents might as well be undefined</a> covers the evolution of reading indeterminate values in C well and make some more sense of the changes I mention above.</p>\n\n<p>It is worth noting this differs from C++ where <a href=\"https://stackoverflow.com/a/23415662/1708801\">reading an indeterminate value from a narrow unsigned char is not undefined behavior</a> and <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2013/n3714.html#240\" rel=\"nofollow noreferrer\">defect report 240</a> notes this difference:</p>\n\n<blockquote>\n  <p>The C committee is dealing with a similar issue in their DR338. According to this analysis, they plan to take almost the opposite approach to the one described above by augmenting the description of their version of the lvalue-to-rvalue conversion. The CWG did not consider that access to an unsigned char might still trap if it is allocated in a register and needs to reevaluate the proposed resolution in that light. See also issue 129.</p>\n</blockquote>\n"}], "owner": {"reputation": 4050, "user_id": 746346, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/bd7e28f3d04b09ab4a503a992568f417?s=128&d=identicon&r=PG", "display_name": "Tor Klingberg", "link": "https://stackoverflow.com/users/746346/tor-klingberg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2345, "favorite_count": 0, "accepted_answer_id": 33394724, "answer_count": 3, "score": 22, "last_activity_date": 1446212803, "creation_date": 1446042025, "last_edit_date": 1446085958, "question_id": 33393569, "link": "https://stackoverflow.com/questions/33393569/is-it-undefined-behaviour-to-memcpy-from-an-uninitialized-variable", "title": "Is it undefined behaviour to memcpy from an uninitialized variable?", "body": "<p>Is using an uninitialized variable as the <code>src</code> for <code>memcpy</code> undefined behaviour in C?</p>\n\n<pre><code>void foo(int *to)\n{\n  int from;\n  memcpy(to, &amp;from, sizeof(from));\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "linux-kernel", "operating-system", "kernel"], "answers": [{"comments": [{"owner": {"reputation": 387, "user_id": 4591114, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/7483061b371d59ff820b3790e0a124ee?s=128&d=identicon&r=PG&f=1", "display_name": "Debesh Mohanty", "link": "https://stackoverflow.com/users/4591114/debesh-mohanty"}, "edited": false, "score": 0, "creation_date": 1446056390, "post_id": 33396564, "comment_id": 54588751, "body": "Thanks a lot for your fine explanation.....But I dont understand after I unregister the module who does the file operations. I have not written any user space code for this...Then who does the operations on the freed memory?"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "reply_to_user": {"reputation": 387, "user_id": 4591114, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/7483061b371d59ff820b3790e0a124ee?s=128&d=identicon&r=PG&f=1", "display_name": "Debesh Mohanty", "link": "https://stackoverflow.com/users/4591114/debesh-mohanty"}, "edited": false, "score": 0, "creation_date": 1446059830, "post_id": 33396564, "comment_id": 54590860, "body": "It can be, e.g., system deamon, which checks files periodically. In any case having file associated with freed operations structure is bad."}, {"owner": {"reputation": 387, "user_id": 4591114, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/7483061b371d59ff820b3790e0a124ee?s=128&d=identicon&r=PG&f=1", "display_name": "Debesh Mohanty", "link": "https://stackoverflow.com/users/4591114/debesh-mohanty"}, "edited": false, "score": 0, "creation_date": 1446139291, "post_id": 33396564, "comment_id": 54630979, "body": "When I try to unregister the module it gives me a message on the terminal &quot;killed&quot;...I cant figure out which process is killed here"}], "tags": [], "owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "is_accepted": true, "score": 1, "last_activity_date": 1446050015, "creation_date": 1446050015, "answer_id": 33396564, "question_id": 33393319, "link": "https://stackoverflow.com/questions/33393319/proc-file-system-hangs-my-system/33396564#33396564", "title": "/proc file system hangs my system", "body": "<p>When the file is accessed, <code>file_operations</code> structure is read, and futher actions depends on pointers, stored in this structure.</p>\n\n<p>If you do not delete file upon module exiting, <strong>file remains accessible</strong>. But <strong><code>file_operations</code> structure</strong>, associated with it, <strong>is freed</strong>. So, any access to the file after module unloading cause reading the data, which has been freed. This trigger error in accessing memory.</p>\n\n<p>That's why it is critical for kernel module to remove all objects it creates before.</p>\n"}], "owner": {"reputation": 387, "user_id": 4591114, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/7483061b371d59ff820b3790e0a124ee?s=128&d=identicon&r=PG&f=1", "display_name": "Debesh Mohanty", "link": "https://stackoverflow.com/users/4591114/debesh-mohanty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 175, "favorite_count": 0, "accepted_answer_id": 33396564, "answer_count": 1, "score": 0, "last_activity_date": 1446050015, "creation_date": 1446041405, "question_id": 33393319, "link": "https://stackoverflow.com/questions/33393319/proc-file-system-hangs-my-system", "title": "/proc file system hangs my system", "body": "<p>Hello I am new to kernel space programming and I came to learn about the proc file system.</p>\n\n<p>I have written a module which creates a proc file while registering</p>\n\n<p>And I remove that while unregistering the module.\nBut if I dont remove that file using the remove_proc_entry() and unregister my module then the system hangs after some time</p>\n\n<p>Why this is so?</p>\n\n<p>The code is</p>\n\n<pre><code>#include&lt;linux/init.h&gt;\n#include&lt;linux/kernel.h&gt;\n#include&lt;linux/proc_fs.h&gt;\n#include&lt;linux/module.h&gt;\n#include&lt;linux/fs.h&gt;\n\nint myopen(struct inode *, struct file *);\nssize_t myread(struct file *, char __user *, size_t, loff_t *);\n\nint myopen(struct inode *p, struct file *q)\n{\n        printk(KERN_ALERT \"I am in myopen\\n\");\n        return 0;\n}\n\nssize_t myread(struct file *p, char __user *q, size_t r, loff_t *s)\n{\n        printk(KERN_ALERT \"I am in myread\\n\");\n        return 0;\n}\n\nstatic const struct file_operations fs={\n        .open=myopen,\n        .read=myread\n};\n\nint start(void)\n{\n        proc_create(\"myprocfile\", 0, NULL, &amp;fs);\n        return 0;\n}\n\nvoid stop(void)\n{\n        //remove_proc_entry(\"myprocfile\", NULL);\n        /*\n          If I uncomment the above line\n          then everything works fine\n        */\n}\n\nmodule_init(start);\nmodule_exit(stop);\nMODULE_LICENSE(\"GPL\");\n</code></pre>\n"}, {"tags": ["c", "low-level"], "comments": [{"owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "edited": false, "score": 0, "creation_date": 1446040048, "post_id": 33392697, "comment_id": 54576889, "body": "If you&#39;re programing in C you should not mess with the registers. the whole Idea behind C is to hide away hardware implementation.."}, {"owner": {"reputation": 13798, "user_id": 280314, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7a184165662b7486396b8268c3c8fb72?s=128&d=identicon&r=PG", "display_name": "Peter G.", "link": "https://stackoverflow.com/users/280314/peter-g"}, "edited": false, "score": 0, "creation_date": 1446040066, "post_id": 33392697, "comment_id": 54576899, "body": "If you save all registers the code would be as general possible?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1446040192, "post_id": 33392697, "comment_id": 54576983, "body": "So your function does not conform to the platform ABI, and you want to call it without using assembly language? Something tells me this ain&#39;t gonna work."}, {"owner": {"reputation": 49, "user_id": 5498475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae8cb13b2216e6318db6c80d003330c1?s=128&d=identicon&r=PG&f=1", "display_name": "Bert Abrath", "link": "https://stackoverflow.com/users/5498475/bert-abrath"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1446040454, "post_id": 33392697, "comment_id": 54577164, "body": "@n.m. It conforms to the ABI, <i>except</i> for the callee actually saving callee-saved registers."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1446040474, "post_id": 33392697, "comment_id": 54577177, "body": "... though there is one possible route, setjmp, call the function, longjmp. It is not guaranteed to work but there are good chances you will be able to get away with it."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 3, "creation_date": 1446040565, "post_id": 33392697, "comment_id": 54577267, "body": "&quot;Conforms except ....&quot; is a longer, more confusing way to spell &quot;doesn&#39;t conform&quot;."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446040575, "post_id": 33392697, "comment_id": 54577278, "body": "&quot;... Anyone have a good suggestion? :-)&quot; Sure: Do not even think about registers, stack, etc. Why would you want to do this actually?"}, {"owner": {"reputation": 49, "user_id": 5498475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae8cb13b2216e6318db6c80d003330c1?s=128&d=identicon&r=PG&f=1", "display_name": "Bert Abrath", "link": "https://stackoverflow.com/users/5498475/bert-abrath"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1446040577, "post_id": 33392697, "comment_id": 54577279, "body": "@n.m. That&#39;s an interesting approach. I&#39;ll look into that, thanks."}, {"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 0, "creation_date": 1446041393, "post_id": 33392697, "comment_id": 54577943, "body": "@BertAbrath What possible use could there be for you in messing with the registers? And if there is, why are you programming in c and not assembler?"}, {"owner": {"reputation": 49, "user_id": 5498475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae8cb13b2216e6318db6c80d003330c1?s=128&d=identicon&r=PG&f=1", "display_name": "Bert Abrath", "link": "https://stackoverflow.com/users/5498475/bert-abrath"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446041432, "post_id": 33392697, "comment_id": 54577974, "body": "@Olaf It involves an application running in two different contexts that invoke each other through signals."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446042386, "post_id": 33392697, "comment_id": 54578676, "body": "@BertAbrath: Still no reason to fiddle yourself. Use threads!"}, {"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 1, "creation_date": 1446042881, "post_id": 33392697, "comment_id": 54579049, "body": "There is no standard way of calling a function that doesn&#39;t conform to the ABI. Whatever you do will necessarily be compiler-dependent."}, {"owner": {"reputation": 49, "user_id": 5498475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae8cb13b2216e6318db6c80d003330c1?s=128&d=identicon&r=PG&f=1", "display_name": "Bert Abrath", "link": "https://stackoverflow.com/users/5498475/bert-abrath"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1446044531, "post_id": 33392697, "comment_id": 54580323, "body": "@n.m. Unbelievably enough using setjmp actually works. I will use it as temporary measure. Ultimately it is probably best to ensure the functions called through the function pointer conform to the ABI, but that will take more work."}, {"owner": {"reputation": 13798, "user_id": 280314, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7a184165662b7486396b8268c3c8fb72?s=128&d=identicon&r=PG", "display_name": "Peter G.", "link": "https://stackoverflow.com/users/280314/peter-g"}, "edited": false, "score": 0, "creation_date": 1446046160, "post_id": 33392697, "comment_id": 54581561, "body": "Saving registers ist not enough to be async-safe (i.e. safe in presence of signals), probably you are lucky with setjmp. I understand the question now as an xy problem. <a href=\"http://meta.stackexchange.com/questions/66377/what-is-the-xy-problem/66378#66378\" title=\"what is the xy problem\">meta.stackexchange.com/questions/66377/what-is-the-xy-proble&zwnj;&#8203;m/&hellip;</a>"}, {"owner": {"reputation": 1217, "user_id": 2544218, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2d24277226f4c86d39c2b63c3ea590dc?s=128&d=identicon&r=PG", "display_name": "Speed8ump", "link": "https://stackoverflow.com/users/2544218/speed8ump"}, "edited": false, "score": 0, "creation_date": 1446151552, "post_id": 33392697, "comment_id": 54637722, "body": "It kind of sounds like you are trying to write a fibers (AKA co-routines) library (where you have multiple &quot;thread&quot; contexts but you explicitly select when to change context).  Perhaps look at using one of the existing ones?"}], "owner": {"reputation": 49, "user_id": 5498475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae8cb13b2216e6318db6c80d003330c1?s=128&d=identicon&r=PG&f=1", "display_name": "Bert Abrath", "link": "https://stackoverflow.com/users/5498475/bert-abrath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 264, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1446039800, "creation_date": 1446039800, "question_id": 33392697, "link": "https://stackoverflow.com/questions/33392697/how-do-i-also-save-the-callee-saved-registers-when-calling-a-function-pointer", "title": "How do I also save the callee-saved registers when calling a function pointer?", "body": "<p>Normally, when function A calls function B, function A will save all caller-saved registers (that are live) before doing the call to function B. In my (somewhat esoteric) usecase function B will be invoked through a function pointer and can also possibly overwrite callee-saved registers without saving them. That means A also has to save the callee-saved registers before invoking B. I looked up the possibility of using a custom calling convention for the function pointer but that solution didn't pan out. I'm using gcc (or clang) and compiling for ARM, but if at all possible I'd like to avoid inline assembly or compiler-specific constructs to make the code as general as possible. Anyone have a good suggestion? :-)</p>\n"}, {"tags": ["c", "macos", "memory-leaks", "valgrind", "suppression"], "comments": [{"owner": {"reputation": 41122, "user_id": 2101267, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/06383b51463f855d7cc0f07d4566bd42?s=128&d=identicon&r=PG", "display_name": "Dark Falcon", "link": "https://stackoverflow.com/users/2101267/dark-falcon"}, "edited": false, "score": 1, "creation_date": 1446039993, "post_id": 33392649, "comment_id": 54576860, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/29442597/user-leak-libc-leak-or-false-positive\">User Leak, libc++ leak or false positive</a>"}, {"owner": {"reputation": 115, "user_id": 1610834, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/51b0ad68b787ad16d4dda8ea0a257236?s=128&d=identicon&r=PG", "display_name": "user1610834", "link": "https://stackoverflow.com/users/1610834/user1610834"}, "edited": false, "score": 0, "creation_date": 1446040450, "post_id": 33392649, "comment_id": 54577160, "body": "Is this a false leak? I cannot seem to trace the problem at all in my code."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1446041513, "post_id": 33392649, "comment_id": 54578042, "body": "If you don&#39;t show us your code. ... is not that easy to understand everything from there. Use also <b>valgrind --leak-check=full --track-origins=yes ./program</b>. Any way <b>total heap usage: 20,531 allocs, 20,341 frees</b> you should start from here."}], "answers": [{"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1446046378, "post_id": 33395118, "comment_id": 54581704, "body": "I had some fun trying to chase down some memory abuse on Mac OS X (Yosemite or El Capitan, I forget which, but probably El Capitan), where I was finally forced to conclude that the problem was in the library, not in my code which was calling the library.  One of a number of factors in concluding that the problem was in  &#39;the system&#39; was that the same code worked cleanly under Linux.  I also spent considerable time trying to modify the code so that it couldn&#39;t be mine that was at fault.  &#39;Tis a nuisance."}, {"owner": {"reputation": 639, "user_id": 2344940, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/RHmPS.jpg?s=128&g=1", "display_name": "Mike Huebner", "link": "https://stackoverflow.com/users/2344940/mike-huebner"}, "edited": false, "score": 0, "creation_date": 1447497469, "post_id": 33395118, "comment_id": 55186830, "body": "Annoyingly enough I&#39;m coming across a similar issue with doubles and floats and printing them. I&#39;m going to test on a linux server soon and see what the real issue is. I can&#39;t seem to figure out what is going on."}], "tags": [], "owner": {"reputation": 115, "user_id": 1610834, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/51b0ad68b787ad16d4dda8ea0a257236?s=128&d=identicon&r=PG", "display_name": "user1610834", "link": "https://stackoverflow.com/users/1610834/user1610834"}, "is_accepted": true, "score": 0, "last_activity_date": 1446046079, "creation_date": 1446046079, "answer_id": 33395118, "question_id": 33392649, "link": "https://stackoverflow.com/questions/33392649/valgrind-memory-leak-what-error-is-this/33395118#33395118", "title": "Valgrind memory leak what error is this?", "body": "<p>Turns out it was a false leak, tested my code on a linux virtual machine and no errors. Thanks.</p>\n"}], "owner": {"reputation": 115, "user_id": 1610834, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/51b0ad68b787ad16d4dda8ea0a257236?s=128&d=identicon&r=PG", "display_name": "user1610834", "link": "https://stackoverflow.com/users/1610834/user1610834"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1046, "favorite_count": 0, "accepted_answer_id": 33395118, "answer_count": 1, "score": 1, "last_activity_date": 1446046079, "creation_date": 1446039682, "last_edit_date": 1446041077, "question_id": 33392649, "link": "https://stackoverflow.com/questions/33392649/valgrind-memory-leak-what-error-is-this", "title": "Valgrind memory leak what error is this?", "body": "<p>I've been getting this error whenever i run a full valgrind memory leak check and I really can't tell where the source of this error is. My code is running and appears to be correct but i've been getting this error since. Any advice would be much appreciated, thank you!</p>\n\n<pre><code>==2312== HEAP SUMMARY:\n==2312==     in use at exit: 26,325 bytes in 190 blocks\n==2312==   total heap usage: 20,531 allocs, 20,341 frees, 197,089 bytes allocated\n==2312== \n==2312== Searching for pointers to 190 not-freed blocks\n==2312== Checked 9,805,752 bytes\n==2312== \n==2312== 272 (80 direct, 192 indirect) bytes in 1 blocks are definitely lost in loss record 53 of 67\n==2312==    at 0x100009EBB: malloc (in /usr/local/Cellar/valgrind/3.11.0/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)\n==2312==    by 0x1001C44A2: __Balloc_D2A (in /usr/lib/system/libsystem_c.dylib)\n==2312==    by 0x1001C4DEB: __d2b_D2A (in /usr/lib/system/libsystem_c.dylib)\n==2312==    by 0x1001C1443: __dtoa (in /usr/lib/system/libsystem_c.dylib)\n==2312==    by 0x1001EA07A: __vfprintf (in /usr/lib/system/libsystem_c.dylib)\n==2312==    by 0x10021335C: __v2printf (in /usr/lib/system/libsystem_c.dylib)\n==2312==    by 0x1001E901D: vfprintf_l (in /usr/lib/system/libsystem_c.dylib)\n==2312==    by 0x1001E6EB7: printf (in /usr/lib/system/libsystem_c.dylib)\n==2312==    by 0x100001B02: main (in ./tldmonitor)\n==2312== \n==2312== LEAK SUMMARY:\n==2312==    definitely lost: 80 bytes in 1 blocks\n==2312==    indirectly lost: 192 bytes in 5 blocks\n==2312==      possibly lost: 0 bytes in 0 blocks\n==2312==    still reachable: 0 bytes in 0 blocks\n==2312==         suppressed: 26,053 bytes in 184 blocks\n==2312== \n==2312== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 16 from 16)\n--2312-- \n--2312-- used_suppression:      1 OSX1011:21-Leak /usr/local/Cellar/valgrind/3.11.0/lib/valgrind/default.supp:944 suppressed: 4,096 bytes in 1 blocks\n--2312-- used_suppression:      1 OSX1011:15-Leak /usr/local/Cellar/valgrind/3.11.0/lib/valgrind/default.supp:886 suppressed: 4,096 bytes in 1 blocks\n--2312-- used_suppression:     10 OSX1011:17-Leak /usr/local/Cellar/valgrind/3.11.0/lib/valgrind/default.supp:906 suppressed: 3,392 bytes in 55 blocks\n--2312-- used_suppression:      3 OSX1011:16-Leak /usr/local/Cellar/valgrind/3.11.0/lib/valgrind/default.supp:897 suppressed: 2,816 bytes in 44 blocks\n--2312-- used_suppression:      2 OSX1011:4-Leak /usr/local/Cellar/valgrind/3.11.0/lib/valgrind/default.supp:778 suppressed: 4,152 bytes in 2 blocks\n--2312-- used_suppression:      2 OSX1011:19-Leak /usr/local/Cellar/valgrind/3.11.0/lib/valgrind/default.supp:924 suppressed: 2,592 bytes in 2 blocks\n--2312-- used_suppression:      7 OSX1011:7-Leak /usr/local/Cellar/valgrind/3.11.0/lib/valgrind/default.supp:808 suppressed: 1,680 bytes in 22 blocks\n--2312-- used_suppression:     11 OSX1011:18-Leak /usr/local/Cellar/valgrind/3.11.0/lib/valgrind/default.supp:915 suppressed: 2,312 bytes in 11 blocks\n--2312-- used_suppression:     20 OSX1011:10-Leak /usr/local/Cellar/valgrind/3.11.0/lib/valgrind/default.supp:839 suppressed: 2,461 bytes in 39 blocks\n--2312-- used_suppression:      2 OSX1011:8-Leak /usr/local/Cellar/valgrind/3.11.0/lib/valgrind/default.supp:819 suppressed: 520 bytes in 2 blocks\n--2312-- used_suppression:      2 OSX1011:20-Leak /usr/local/Cellar/valgrind/3.11.0/lib/valgrind/default.supp:934 suppressed: 224 bytes in 5 blocks\n==2312== \n==2312== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 16 from 16)\n</code></pre>\n\n<p>After i generate a suppression block:</p>\n\n<pre><code>==2317== HEAP SUMMARY:\n==2317==     in use at exit: 26,325 bytes in 190 blocks\n==2317==   total heap usage: 20,531 allocs, 20,341 frees, 197,089 bytes allocated\n==2317== \n==2317== Searching for pointers to 190 not-freed blocks\n==2317== Checked 9,805,752 bytes\n==2317== \n==2317== 272 (80 direct, 192 indirect) bytes in 1 blocks are definitely lost in loss record 53 of 67\n==2317==    at 0x100009EBB: malloc (in /usr/local/Cellar/valgrind/3.11.0/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)\n==2317==    by 0x1001C44A2: __Balloc_D2A (in /usr/lib/system/libsystem_c.dylib)\n==2317==    by 0x1001C4DEB: __d2b_D2A (in /usr/lib/system/libsystem_c.dylib)\n==2317==    by 0x1001C1443: __dtoa (in /usr/lib/system/libsystem_c.dylib)\n==2317==    by 0x1001EA07A: __vfprintf (in /usr/lib/system/libsystem_c.dylib)\n==2317==    by 0x10021335C: __v2printf (in /usr/lib/system/libsystem_c.dylib)\n==2317==    by 0x1001E901D: vfprintf_l (in /usr/lib/system/libsystem_c.dylib)\n==2317==    by 0x1001E6EB7: printf (in /usr/lib/system/libsystem_c.dylib)\n==2317==    by 0x100001B02: main (in ./tldmonitor)\n==2317== \n==2317== \n</code></pre>\n"}, {"tags": ["c", "linux", "linux-kernel", "sysfs"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446038135, "post_id": 33391792, "comment_id": 54575478, "body": "So you are apping, not programming?"}, {"owner": {"reputation": 778, "user_id": 1694745, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/7e2aeae74ebf31d0b6cd21d50d5ef6eb?s=128&d=identicon&r=PG", "display_name": "Tiktac", "link": "https://stackoverflow.com/users/1694745/tiktac"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446045363, "post_id": 33391792, "comment_id": 54580971, "body": "I am writing a module for USB device so i need to do that."}], "answers": [{"comments": [{"owner": {"reputation": 778, "user_id": 1694745, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/7e2aeae74ebf31d0b6cd21d50d5ef6eb?s=128&d=identicon&r=PG", "display_name": "Tiktac", "link": "https://stackoverflow.com/users/1694745/tiktac"}, "edited": false, "score": 0, "creation_date": 1446045297, "post_id": 33391927, "comment_id": 54580915, "body": "I need to read many file inside /sys/bus/usb/devices/1-1 folder, if i use this way, should i have to to open all of files as i need? Is there any way to open only /sys/bus/usb/devices/1-1 folder but i can read all contents inside it?"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "reply_to_user": {"reputation": 778, "user_id": 1694745, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/7e2aeae74ebf31d0b6cd21d50d5ef6eb?s=128&d=identicon&r=PG", "display_name": "Tiktac", "link": "https://stackoverflow.com/users/1694745/tiktac"}, "edited": false, "score": 0, "creation_date": 1446050500, "post_id": 33391927, "comment_id": 54584842, "body": "@Gun: Any file under <code>&#47;sys</code> is semantically a regular file. For read it you should have it opened, no other way. Normally, it is not a problem to have ~30 files opened."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446051531, "post_id": 33391927, "comment_id": 54585534, "body": "After your comment to your question, it looks like an XY problem and you ran into the wrong direction. If you really want to write a device driver, this is definitively the wrong approach."}, {"owner": {"reputation": 778, "user_id": 1694745, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/7e2aeae74ebf31d0b6cd21d50d5ef6eb?s=128&d=identicon&r=PG", "display_name": "Tiktac", "link": "https://stackoverflow.com/users/1694745/tiktac"}, "edited": false, "score": 0, "creation_date": 1446083534, "post_id": 33391927, "comment_id": 54600753, "body": "@unwind: For my last question, is there any way to get these information from user app (maybe ioctl), except reading file by file?"}, {"owner": {"reputation": 778, "user_id": 1694745, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/7e2aeae74ebf31d0b6cd21d50d5ef6eb?s=128&d=identicon&r=PG", "display_name": "Tiktac", "link": "https://stackoverflow.com/users/1694745/tiktac"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446083643, "post_id": 33391927, "comment_id": 54600784, "body": "@Olaf: Yes, my program is user app, not device driver ~"}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": true, "score": 2, "last_activity_date": 1446037732, "creation_date": 1446037732, "answer_id": 33391927, "question_id": 33391792, "link": "https://stackoverflow.com/questions/33391792/how-can-i-read-sysfs-attributes/33391927#33391927", "title": "How can i read sysfs attributes", "body": "<p>Open the file using e.g. <code>fopen(\"//sys/bus/usb/devices/1-1/version\", \"rt\")</code> and read its contents like with any other file. Not sure about brightness, you don't mention which file its in and there's no file with that name.</p>\n"}], "owner": {"reputation": 778, "user_id": 1694745, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/7e2aeae74ebf31d0b6cd21d50d5ef6eb?s=128&d=identicon&r=PG", "display_name": "Tiktac", "link": "https://stackoverflow.com/users/1694745/tiktac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2388, "favorite_count": 0, "accepted_answer_id": 33391927, "answer_count": 1, "score": -3, "last_activity_date": 1446037732, "creation_date": 1446037326, "last_edit_date": 1446037385, "question_id": 33391792, "link": "https://stackoverflow.com/questions/33391792/how-can-i-read-sysfs-attributes", "title": "How can i read sysfs attributes", "body": "<p>How can i read sysfs attributes from user app. It is similar content from cat command. Such as I have a tag is brightness. How can i get the value of brightness tag? Because i need to read the USB infor from my app and i see they were exported to sysfs like below topology:</p>\n\n<pre><code>ls /sys/bus/usb/devices/1-1\n1-1:1.0              busnum               port\nauthorized           configuration        power\navoid_reset_quirk    descriptors          product\nbConfigurationValue  dev                  quirks\nbDeviceClass         devnum               removable\nbDeviceProtocol      devpath              remove\nbDeviceSubClass      driver               serial\nbMaxPacketSize0      ep_00                speed\nbMaxPower            idProduct            subsystem\nbNumConfigurations   idVendor             uevent\nbNumInterfaces       ltm_capable          urbnum\nbcdDevice            manufacturer         version\nbmAttributes         maxchild\n</code></pre>\n"}, {"tags": ["c", "floating-point", "bit-manipulation"], "comments": [{"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1446037032, "post_id": 33391561, "comment_id": 54574676, "body": "You should show some code, at least the relevant parts of the operations you&#39;re interested in. Does AVX have <i>any</i> relevant instructions? Also, asking for cycle counts without specifying a processor or exact code makes the question very hard to answer."}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 2, "creation_date": 1446037589, "post_id": 33391561, "comment_id": 54575094, "body": "There are bitwise operations on floats in the AVX instruction set so you don&#39;t even have to convert anything."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446038753, "post_id": 33391561, "comment_id": 54575926, "body": "That sound more than weird. A float is a structured datatype, while bitops operate on a bitfield. so  <code>1.5 &amp; 4e-7</code> just makes no sense."}, {"owner": {"reputation": 685, "user_id": 2868284, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/76f42be013abf833273224eb4eaef29c?s=128&d=identicon&r=PG", "display_name": "cenouro", "link": "https://stackoverflow.com/users/2868284/cenouro"}, "edited": false, "score": 0, "creation_date": 1446040116, "post_id": 33391561, "comment_id": 54576934, "body": "Why don&#39;t you use embedded assembly instead? That will be way easier to implement."}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1446054132, "post_id": 33391561, "comment_id": 54587324, "body": "Wait, you&#39;re going to emulate integers in doubles? That makes no sense. Just use SSE4 then."}], "answers": [{"comments": [{"owner": {"reputation": 117, "user_id": 4314817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a12f428f1b8b3752a20918f436baf7f?s=128&d=identicon&r=PG&f=1", "display_name": "BlindKungFuMaster", "link": "https://stackoverflow.com/users/4314817/blindkungfumaster"}, "edited": false, "score": 0, "creation_date": 1446107143, "post_id": 33404843, "comment_id": 54608850, "body": "Well. I guess I come up with ideas based on very limited knowledge. ;-) I will take a look into some assembler book or something. Thanks!"}], "tags": [], "owner": {"reputation": 97003, "user_id": 142434, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YGcat.jpg?s=128&g=1", "display_name": "Stephen Canon", "link": "https://stackoverflow.com/users/142434/stephen-canon"}, "is_accepted": false, "score": 1, "last_activity_date": 1446084981, "creation_date": 1446084981, "answer_id": 33404843, "question_id": 33391561, "link": "https://stackoverflow.com/questions/33391561/how-many-clock-cycles-does-casting-a-bit-vector-take/33404843#33404843", "title": "How many clock cycles does casting a bit vector take?", "body": "<p>Why don't you just use the VORPS, VANDPS, and VXORPS instructions, which are precisely bitwise or, and, and xor on AVX vectors?  There's no need to restrict to the 52 bit significand or play any other funny games; although these instructions are in the floating-point domain, they are just bitwise operations on 256b vectors.  You are <em>way</em> over-complicating this.</p>\n"}], "owner": {"reputation": 117, "user_id": 4314817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a12f428f1b8b3752a20918f436baf7f?s=128&d=identicon&r=PG&f=1", "display_name": "BlindKungFuMaster", "link": "https://stackoverflow.com/users/4314817/blindkungfumaster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1446084981, "creation_date": 1446036674, "last_edit_date": 1446043425, "question_id": 33391561, "link": "https://stackoverflow.com/questions/33391561/how-many-clock-cycles-does-casting-a-bit-vector-take", "title": "How many clock cycles does casting a bit vector take?", "body": "<p>I'm trying to rework a bit vector algorithm into using floats instead of integers. Sounds absurd, but the idea is to then use AVX optimisations, which for many current processors would allow four times the amount of data to be processed at the same time. </p>\n\n<p>Now floats are lacking |, &amp; and ^ operations, so I thought that possibly I had to interpret the bitvectors as integers to apply these operations. (And hopefully still get enough speed up from the rest of the algorithm.)</p>\n\n<p>Clarification: I basically want to apply |,^,&amp; to doubles. I know that those are a structured data type and that these operations don't have any meaning for floating point numbers. I know that the bit fiddling will probably have to be restricted to the significand. I know that it is difficult to control the shifts of the floating point (I'll probably need some leading zeroes.). I don't know anything about assembly language. The whole point is using the <a href=\"https://en.wikipedia.org/wiki/Advanced_Vector_Extensions#Applications\" rel=\"nofollow\">larger parallelism/throughput in floating point SIMD calculations</a>.</p>\n\n<p>My question is how to do this in the best way and whether it would be feasible in terms of speed. (After all I'm competing with the original integer based algorithm.)</p>\n\n<p>Given that I'm a relative noob in C programming, I'm also thankful for general advice concerning this endeavour. </p>\n\n<p>Edit: The code would probably run on Ivy or Sandy Bridge processors. </p>\n\n<p>Further explanation:\nLet's say the original algorithm has this step:</p>\n\n<p>X &lt;- A + B</p>\n\n<p>Now I recreate this step with doubles, by being careful that the exponent equals zero and that there is a leading zero after the implied first zero.</p>\n\n<p>X &lt;- A + B - 1.0</p>\n\n<p>In that case the last 51 bits of my doubles's mantissa undergo the same process as the 64 bits of the original integers. The difference being, that I can do it for four data points at the same time. I.e. 204 bits instead of 64 (Ok, it's two operations, so maybe just 102 bits). \nBut the next step demands X &lt;- A | B, or A &amp; B, or A ^ B \u2026\nWhat to do?</p>\n\n<p>Of course there could be any number of misconceptions and errors in this concept. After all it is a pretty complicated idea of a relative beginner.</p>\n"}, {"tags": ["c", "string", "file", "replace", "ip"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1446036364, "post_id": 33391349, "comment_id": 54574238, "body": "Create a new file, replacing the line from the original file and yopy the rest. An IP-address in dotted-quad notation has not always 3 digits per field."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1446041243, "post_id": 33391349, "comment_id": 54577821, "body": "Why C? Better go for a shell script probably calling <code>sed</code>. One example on how to do this is here: <a href=\"http://unix.stackexchange.com/q/66878/10947\">unix.stackexchange.com/q/66878/10947</a>"}], "answers": [{"tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 3, "last_activity_date": 1446036381, "creation_date": 1446036381, "answer_id": 33391449, "question_id": 33391349, "link": "https://stackoverflow.com/questions/33391349/c-replace-string-in-file-using-char-pointer/33391449#33391449", "title": "C - replace string in file using char pointer", "body": "<p>Files don't act like text editor buffers. You can't expect to do editor-type operations (replacing a line, editing a line) on files.</p>\n\n<p>The only exception is if your new line is <em>exactly</em> the same length as the old one, then you can operate in binary mode on the file and do a write over just the right number of bytes.</p>\n\n<p>In general you can't, and the right way is to load it all into memory, edit there, then write it all out, effectively overwriting the old file with a new one with the desired contents.</p>\n"}], "owner": {"reputation": 4320, "user_id": 1662033, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/6972829c0a0a1582ee9e7f14d30dfb22?s=128&d=identicon&r=PG", "display_name": "Ofek Agmon", "link": "https://stackoverflow.com/users/1662033/ofek-agmon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1446036381, "creation_date": 1446036040, "question_id": 33391349, "link": "https://stackoverflow.com/questions/33391349/c-replace-string-in-file-using-char-pointer", "title": "C - replace string in file using char pointer", "body": "<p>I realize there are tons of answers about this, but I didn't find any answer that does it like I want.</p>\n\n<p>I want to edit the IPADDR parameter in the linux <code>ifcfg-eth0</code> file in order to change the IP address.</p>\n\n<p>I have code which finds the line that starts with \"IPADDR\", and I have a pointer to the start of the line. </p>\n\n<p>I am not sure how to edit this line in the file.</p>\n\n<p><strong>Here is the code:</strong></p>\n\n<pre><code>FILE *fp;\nchar *line=NULL;\nsize_t len=0;\nssize_t read;\nchar subword[7];\n\n// path to file\nconst char filename[]=\"/etc/sysconfig/...\" \n\nfp=fopen(filename, \"w\");\n\nwhile((read = getline(&amp;line, &amp;len, fp)) != -1) {\n    memcpy(subword, &amp;line[0], 6);\n    subword[6]='\\0';\n    if(strcnp(\"IPADDR\", subword) == 0)\n    {\n        // here I have a pointer to the line (variable \"line\") I want to replace\n        // the line looks like this \"IPADDR=xxx.xxx.xxx.xxx\"\n        // what to do here??? how to replace the ip??\n\n    }\n}\n</code></pre>\n\n<p>thnaks!</p>\n"}, {"tags": ["c", "gstreamer", "freeze"], "answers": [{"tags": [], "owner": {"reputation": 2714, "user_id": 1496237, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/V12VS.jpg?s=128&g=1", "display_name": "mpr", "link": "https://stackoverflow.com/users/1496237/mpr"}, "is_accepted": true, "score": 2, "last_activity_date": 1446125953, "creation_date": 1446125953, "answer_id": 33415837, "question_id": 33391224, "link": "https://stackoverflow.com/questions/33391224/troubleshoot-gstreamer-pipeline-freezing/33415837#33415837", "title": "Troubleshoot GStreamer pipeline freezing", "body": "<p>The best tool you'll have is probably the <code>GST_DEBUG_BIN_TO_DOT_FILE</code> macro, in gstdebugutils.h.  It'll show your pipeline and the state of each element.  It does require you to set the <code>GST_DEBUG_DUMP_DOT_DIR</code> environment variable.</p>\n\n<p>Then you run a command like this to create a PNG or some other image file from the dot.</p>\n\n<p><code>dot -Tpng pipeline.dot -o pipeline.png</code></p>\n\n<p>On our desktop systems we usually package all this up into a command we can add to our programs.  I'm not sure what your best route is in Android.  Perhaps there are some additional APIs there that can help.</p>\n\n<p>After you identify your problem elements, use the <code>GST_DEBUG</code> environment variable to add additional logging.  For example if you have an <code>x264enc</code> error, use:</p>\n\n<p><code>GST_DEBUG=2,x264enc:5</code></p>\n\n<p>That'll set the logging level to error for everything except x264enc which will be debug level.</p>\n\n<p>Also if you run a debugger you can usually look through all the threads and find which element is hanging.</p>\n"}], "owner": {"reputation": 5001, "user_id": 902217, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w2DJ9.gif?s=128&g=1", "display_name": "CAMOBAP", "link": "https://stackoverflow.com/users/902217/camobap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1083, "favorite_count": 0, "accepted_answer_id": 33415837, "answer_count": 1, "score": 1, "last_activity_date": 1446125953, "creation_date": 1446035657, "question_id": 33391224, "link": "https://stackoverflow.com/questions/33391224/troubleshoot-gstreamer-pipeline-freezing", "title": "Troubleshoot GStreamer pipeline freezing", "body": "<p>Currently I working on android app which will play and record video form remote source</p>\n\n<p>My pipeline looks like this</p>\n\n<pre><code>videotestsrc do-timestamp=true ! videoscale add-borders=false ! capsfilter ! videoflip method=0 ! tee name=split \n    split. ! queue ! videoconvert ! glupload ! glshader ! autovideosink async=false !\n    split. ! queue ! identity drop-probability=0 ! videoconvert ! timeoverlay ! x264enc key-int-max=10 ! h264parse ! splitmuxsink location=/sdcard/test-%d.mp4\n</code></pre>\n\n<p>Only problem stat I see in logs</p>\n\n<pre><code>video_buffer_pool_set_config:&lt;videobufferpool1&gt; no caps in config\n</code></pre>\n\n<p>I'm not asking to fix my pipeline, I just wanna understand it there any common algorithm how to troubleshoot this kind of freeze?</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446035950, "post_id": 33391223, "comment_id": 54573981, "body": "<a href=\"http://port70.net/~nsz/c/c11/n1570.html#7.21.6.1\" rel=\"nofollow noreferrer\">port70.net/~nsz/c/c11/n1570.html#7.21.6.1</a>"}], "answers": [{"tags": [], "owner": {"reputation": 4186, "user_id": 2773311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/wIGqo.png?s=128&g=1", "display_name": "Arc676", "link": "https://stackoverflow.com/users/2773311/arc676"}, "is_accepted": false, "score": 2, "last_activity_date": 1446035719, "creation_date": 1446035719, "answer_id": 33391250, "question_id": 33391223, "link": "https://stackoverflow.com/questions/33391223/rewriting-a-file-using-function-fprint-and-an-int-array/33391250#33391250", "title": "rewriting a file using function fprint and an int array", "body": "<p>Remove the <code>&amp;</code> in front of the <code>aux</code> in the <code>fprintf</code> call.</p>\n\n<p>Simply use</p>\n\n<pre><code>fprintf(finformation, \"%d \", aux);\n</code></pre>\n\n<p>The <code>&amp;</code> is changing the type form <code>int</code> to <code>int*</code> (pointer to the integer).</p>\n"}, {"tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 2, "last_activity_date": 1446036549, "last_edit_date": 1446036549, "creation_date": 1446035734, "answer_id": 33391257, "question_id": 33391223, "link": "https://stackoverflow.com/questions/33391223/rewriting-a-file-using-function-fprint-and-an-int-array/33391257#33391257", "title": "rewriting a file using function fprint and an int array", "body": "<p>Remove <code>&amp;</code> from the statement  </p>\n\n<pre><code>fprintf(finformation,\"%d \", &amp;aux);  \n                  //        ^ Remove &amp; operator  \n</code></pre>\n\n<p>Otherwise program's behavior will be undefined.</p>\n"}], "owner": {"reputation": 11, "user_id": 4360376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af02ac48376920d1cc5532b2d43cf20e?s=128&d=identicon&r=PG", "display_name": "Jordi", "link": "https://stackoverflow.com/users/4360376/jordi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1446036549, "creation_date": 1446035653, "question_id": 33391223, "link": "https://stackoverflow.com/questions/33391223/rewriting-a-file-using-function-fprint-and-an-int-array", "title": "rewriting a file using function fprint and an int array", "body": "<p>I want to overwrite a file with the contents of an int array using fprintf. This should be a very simple program, however, I'm not getting the expected output. Please don't suggest using another function since this is a uni assignment and we must use arrays and fprintf. </p>\n\n<p>So while I'm expecting the file to contain:</p>\n\n<pre><code>3 3 3 3 3 3 3 3 3 3 3 3 \n</code></pre>\n\n<p>I'm getting:</p>\n\n<pre><code>1495894796 1495894796 1495894796 1495894796 1495894796 1495894796 \n1495894796 1495894796 1495894796 1495894796 1495894796 1495894796\n</code></pre>\n\n<p>And this compiler warning:</p>\n\n<pre><code>  format specifies type 'int' but the argument has type 'int *' [-Wformat]\n</code></pre>\n\n<p>I don't know what can be causing this error, since I have a very similar program that works well, but in which I use a char array instead, and the function fputc. </p>\n\n<p>Here is the relevant part of my code, feel free to ask for the complete code if necessary:</p>\n\n<pre><code>    #include&lt;stdio.h&gt;\n    #include&lt;stdlib.h&gt;\n\n    #define ARRAY_ELEMENTS 13\n    /* Defining the size of my int array */\n\n    int main(){\n      int i, aux;\n      FILE *finformation\n      int defined_array[ARRAY_ELEMENTS];\n\n      i = 0;\n\n      while (i &lt; (ARRAY ELEMENTS - 1))\n      {\n          defined_array[i] = 3;\n          i = i+1;\n      }\n      defined_array[i] = 999;\n      /* This should initialize my int array with all the numbers\n      being 3 but the last one being 999 */\n\n      finformation = fopen(\"/Users/(path here)/file.txt\", \"w\");\n      /* I'm pretty sure I didn't screw up here because the file does\n      get overwritten */\n\n      i = 0;\n      aux = defined_array[i];\n      /* I want to read the first number in the int array \n      and store it in an int variable: aux. Here is where I've\n      probably messed up things */\n\n      while (aux != 999)\n      {\n          fprintf(finformation,\"%d \", &amp;aux);\n          i = i+1;\n          aux = defined_array[i];\n      }\n      /* While I don't read the last number in my int array (999), I  \n      want to write the last read number into the file. Then, leave\n      an space and repeat */\n\n      fclose(finformation);\n      return 0;\n    }\n</code></pre>\n"}, {"tags": ["c", "arrays", "multidimensional-array"], "comments": [{"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1446035612, "post_id": 33391142, "comment_id": 54573785, "body": "<code>for (i &lt; b;)</code> is not valid C. <code>printf</code> does not start with a capital. What error you get on <code>if((pow...</code>?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1446036224, "post_id": 33391142, "comment_id": 54574144, "body": "This is such fundamental stuff that you really have to step back and read the first chapters of your C programming book one more time."}, {"owner": {"reputation": 11, "user_id": 2831007, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/vEGH5.jpg?s=128&g=1", "display_name": "Philip Dyson", "link": "https://stackoverflow.com/users/2831007/philip-dyson"}, "edited": false, "score": 0, "creation_date": 1446036488, "post_id": 33391142, "comment_id": 54574329, "body": "I sometimes fail to understand minor concepts and feel as though I am not making too much progress in my programming."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 2831007, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/vEGH5.jpg?s=128&g=1", "display_name": "Philip Dyson", "link": "https://stackoverflow.com/users/2831007/philip-dyson"}, "edited": false, "score": 0, "creation_date": 1446036345, "post_id": 33391182, "comment_id": 54574222, "body": "I set the pow to int like so <code>if(((int)pow(m,notPrime[p])-m)%notPrime[p]==0){</code> and the compiler accepted it but can you perform such calculations on and array and expect the elements in the array to change?"}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "reply_to_user": {"reputation": 11, "user_id": 2831007, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/vEGH5.jpg?s=128&g=1", "display_name": "Philip Dyson", "link": "https://stackoverflow.com/users/2831007/philip-dyson"}, "edited": false, "score": 0, "creation_date": 1446036692, "post_id": 33391182, "comment_id": 54574451, "body": "@PhilipDyson You are not performing calculatons on array but on its elements . <code>notPrime[p]</code> is an array element not array ."}, {"owner": {"reputation": 11, "user_id": 2831007, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/vEGH5.jpg?s=128&g=1", "display_name": "Philip Dyson", "link": "https://stackoverflow.com/users/2831007/philip-dyson"}, "edited": false, "score": 0, "creation_date": 1446036819, "post_id": 33391182, "comment_id": 54574536, "body": "Got an error when compiling in the linux terminal stating zero or negative array in <code>int nonPrime[] = {}</code>. that&#39;s what I was afraid of."}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "reply_to_user": {"reputation": 11, "user_id": 2831007, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/vEGH5.jpg?s=128&g=1", "display_name": "Philip Dyson", "link": "https://stackoverflow.com/users/2831007/philip-dyson"}, "edited": false, "score": 0, "creation_date": 1446036899, "post_id": 33391182, "comment_id": 54574589, "body": "@PhilipDyson  I was about to ask about that declaration . Change that . Mention size of array and inititalize it ."}, {"owner": {"reputation": 11, "user_id": 2831007, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/vEGH5.jpg?s=128&g=1", "display_name": "Philip Dyson", "link": "https://stackoverflow.com/users/2831007/philip-dyson"}, "edited": false, "score": 0, "creation_date": 1446037812, "post_id": 33391182, "comment_id": 54575238, "body": "To mention the size of the array I need to know the input of &quot;a&quot; and &quot;b&quot; should I then change it to a dynamic array?"}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "reply_to_user": {"reputation": 11, "user_id": 2831007, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/vEGH5.jpg?s=128&g=1", "display_name": "Philip Dyson", "link": "https://stackoverflow.com/users/2831007/philip-dyson"}, "edited": false, "score": 0, "creation_date": 1446038028, "post_id": 33391182, "comment_id": 54575405, "body": "@PhilipDyson  After taking input you can declare the array . no problem in that . VLAs are supported from C99 ."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1446038556, "post_id": 33391182, "comment_id": 54575786, "body": "If you can&#39;t use C99 variable length arrays, you can use the <code>calloc</code> function to allocate storage for a variable length on the stack. <code>calloc</code> returns a pointer, but if you store that in an <code>int *notPrime</code> variable, you can still use <code>notPrime[n]</code> to access the <code>n</code>th element, just like an array."}, {"owner": {"reputation": 11, "user_id": 2831007, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/vEGH5.jpg?s=128&g=1", "display_name": "Philip Dyson", "link": "https://stackoverflow.com/users/2831007/philip-dyson"}, "edited": false, "score": 0, "creation_date": 1446038739, "post_id": 33391182, "comment_id": 54575913, "body": "When giving the array size I am liable to give it a very large size for example 10000 be cause the first and second Carmichael numbers are 561 and 1105. If the user where to put in one and one million for example I would get an error for sure."}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "reply_to_user": {"reputation": 11, "user_id": 2831007, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/vEGH5.jpg?s=128&g=1", "display_name": "Philip Dyson", "link": "https://stackoverflow.com/users/2831007/philip-dyson"}, "edited": false, "score": 0, "creation_date": 1446038855, "post_id": 33391182, "comment_id": 54576002, "body": "@PhilipDyson <code>10000</code> may not cause problem , but if size may b e bigger than that , for sure use dynamic allocation for that ."}, {"owner": {"reputation": 11, "user_id": 2831007, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/vEGH5.jpg?s=128&g=1", "display_name": "Philip Dyson", "link": "https://stackoverflow.com/users/2831007/philip-dyson"}, "edited": false, "score": 0, "creation_date": 1446039141, "post_id": 33391182, "comment_id": 54576232, "body": "@ameyCU Will apply the dynamic allocation and if I encounter more problems with the code I will leave a comment."}], "tags": [], "owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "is_accepted": false, "score": 1, "last_activity_date": 1446037955, "last_edit_date": 1446037955, "creation_date": 1446035560, "answer_id": 33391182, "question_id": 33391142, "link": "https://stackoverflow.com/questions/33391142/how-to-create-an-empty-array-to-store-values-calculated-from-the-given-from-prog/33391182#33391182", "title": "How to create an Empty Array to store values calculated from the given from program in C", "body": "<pre><code>for (i &lt; b;){    \n</code></pre>\n\n<p>This is not a valid syntax for <code>for</code> loop . You can write like this instead -</p>\n\n<pre><code>for (;i &lt; b;){    \n</code></pre>\n\n<p>And this -</p>\n\n<pre><code>if((pow(m,notPrime[p])-m)%notPrime[p]==0){ //\n</code></pre>\n\n<p><code>pow</code> return <code>double</code> and <code>notPrime[p]</code> is <code>int</code> . <code>%</code> operator on <code>double</code> and <code>int</code> . </p>\n\n<p>Explicitly cast result of <code>pow</code> to <code>int</code>. </p>\n\n<p>Also this -</p>\n\n<pre><code> printf( \"%d \\n\", &amp;notPrime[p]) ;\n                  ^ this is not needed \n</code></pre>\n\n<p>don't pass address of <code>int</code>.</p>\n\n<h2>Edit -</h2>\n\n<p>You can declare your array as this after taking input <code>a</code> and <code>b</code> -</p>\n\n<pre><code> int notPrime[a] = {0};           // or size b as you desire \n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 2831007, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/vEGH5.jpg?s=128&g=1", "display_name": "Philip Dyson", "link": "https://stackoverflow.com/users/2831007/philip-dyson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1446037955, "creation_date": 1446035449, "last_edit_date": 1446036113, "question_id": 33391142, "link": "https://stackoverflow.com/questions/33391142/how-to-create-an-empty-array-to-store-values-calculated-from-the-given-from-prog", "title": "How to create an Empty Array to store values calculated from the given from program in C", "body": "<p>I am having difficulties initializing an array to how values given from a for loop, I want to discard the prime numbers calculated and then keep the non prime numbers in an array, which the size of the array must be unknown from the beginning. I must then call collect the numbers from the array and then apply the Carmichael equation to them to find Carmichael numbers.</p>\n\n<p>Applying the equation to the values in the array is what I am finding difficult as well.\nThis is my code:</p>\n\n<pre><code>int main(int argc, char **argv){\n    int a ,b;\n    int notPrime[] = {};\n    printf(\"Type in two non negative intergers: \\n\");\n    scanf(\"%d\" \"%d\", &amp;a , &amp;b);\n    int i=a , k=0 ,count=0, j, p, m;\n    for (i &lt; b;){    //from the integers given b must be the larger of the two \n        if (i==0 || i==1) {  //to calculte the prime numbers\n            notPrime[k]=i;\n        }else{\n            for( j=2;j&lt;i;j++){\n                if(i%j==0){\n                    break;\n                }else{\n                    notPrime[k]=i;\n                }\n            }\n        }\n        i++;\n        k++;\n    }\n    p=0;\n    if (p&lt;=k){\n        for (m=1;m&lt;notPrime[p];m++){\n            if((pow(m,notPrime[p])-m)%notPrime[p]==0){ //use of the values in the array and use of the carmichael equation\n                count=count+1;\n            }\n            if(count==notPrime[p]-1){\n                Printf( \"%d \\n\", &amp;notPrime[p]) ;\n            }\n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>i have errors on <code>for (i &lt; b;){</code>, <code>if((pow(m,notPrime[p])-m)%notPrime[p]==0){</code> and finally the print statment <code>Printf( \"%d \\n\", &amp;notPrime[p])</code></p>\n\n<p>Please could I get a little help, just set me in the right direction and I will try to correct.</p>\n\n<p>xRapture</p>\n"}, {"tags": ["c", "linux", "unix", "locking", "fcntl"], "comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1446138295, "post_id": 33391024, "comment_id": 54630295, "body": "the posted code does not cleanly compile.  suggest always enabling all the warnings when compiling then fix those warnings.  (for gcc, at a minimum use: <code>-Wall -Wextra -pedantic</code> )"}], "answers": [{"comments": [{"owner": {"reputation": 2593, "user_id": 2030040, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Dea0s.jpg?s=128&g=1", "display_name": "sujin", "link": "https://stackoverflow.com/users/2030040/sujin"}, "edited": false, "score": 0, "creation_date": 1446096200, "post_id": 33393237, "comment_id": 54604282, "body": "but i checked same code for F_WRLCK it also return same result as about, and not give pid."}, {"owner": {"reputation": 41, "user_id": 5498392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/165c16df50152e288a3c1d834e8d8371?s=128&d=identicon&r=PG&f=1", "display_name": "ffstar", "link": "https://stackoverflow.com/users/5498392/ffstar"}, "reply_to_user": {"reputation": 2593, "user_id": 2030040, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Dea0s.jpg?s=128&g=1", "display_name": "sujin", "link": "https://stackoverflow.com/users/2030040/sujin"}, "edited": false, "score": 0, "creation_date": 1446097463, "post_id": 33393237, "comment_id": 54604695, "body": "basically you wont get any error because you are running in the same process, so it will replace the current lock to the new lock, here is some reference about locking <a href=\"https://books.google.com.tw/books?id=kCTMFpEcIOwC&amp;pg=PA488&amp;lpg=PA488&amp;dq=read+lock+and+write+lock+in+same+process&amp;source=bl&amp;ots=zvHBRRZvpD&amp;sig=0dduWqgvuis6cqWBvAO5EQf-znM&amp;hl=en&amp;sa=X&amp;ved=0CDUQ6AEwBWoVChMI_7yLjfzmyAIVC4yUCh0iXATI#v=onepage&amp;q=read%20lock%20and%20write%20lock%20in%20same%20process&amp;f=false\" rel=\"nofollow noreferrer\">link</a> in page 487 has the detail, i am currently learning this so hopefully i didnt get it wrong :)"}, {"owner": {"reputation": 2593, "user_id": 2030040, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Dea0s.jpg?s=128&g=1", "display_name": "sujin", "link": "https://stackoverflow.com/users/2030040/sujin"}, "edited": false, "score": 0, "creation_date": 1446101255, "post_id": 33393237, "comment_id": 54606056, "body": "Thanks for your link. I took F_WRLCK then i am reading using F_GETLK then it has to return F_WRLCK  instead it returning F_UNLCK. So as per the book&#39;s author F_UNLCK will be set if no lock exist. But i took lock initially. Pls clarify this"}], "tags": [], "owner": {"reputation": 41, "user_id": 5498392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/165c16df50152e288a3c1d834e8d8371?s=128&d=identicon&r=PG&f=1", "display_name": "ffstar", "link": "https://stackoverflow.com/users/5498392/ffstar"}, "is_accepted": false, "score": 1, "last_activity_date": 1446041191, "creation_date": 1446041191, "answer_id": 33393237, "question_id": 33391024, "link": "https://stackoverflow.com/questions/33391024/fcntls-f-getlk-not-returning-lock-details/33393237#33393237", "title": "fcntl&#39;s F_GETLK not returning lock details", "body": "<p>F_GETLCK will change the fl.l_type to F_UNLCK if there is no lock that prevent others being created. Since your fl is F_RDLCK, then after called fcntl() F_GETLCK won't get any error and change the lock type to F_UNLCK</p>\n"}], "owner": {"reputation": 2593, "user_id": 2030040, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Dea0s.jpg?s=128&g=1", "display_name": "sujin", "link": "https://stackoverflow.com/users/2030040/sujin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 632, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1446101064, "creation_date": 1446035152, "last_edit_date": 1446101064, "question_id": 33391024, "link": "https://stackoverflow.com/questions/33391024/fcntls-f-getlk-not-returning-lock-details", "title": "fcntl&#39;s F_GETLK not returning lock details", "body": "<p>I am taking read lock using fcntl's F_SETLKW then trying read the same lock from same process using fcntl's F_GETLK. But result is not appropriate. Below is sample code</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;unistd.h&gt;\n\nint main(int argc, char **argv)\n{\n    int fd;\n    struct flock fl;\n\n    if ( (fd = open(\"lockfile\", O_RDWR)) == -1 ) {\n        perror(\"open\");\n        return 1;\n    }\n\n    memset(&amp;fl, 0, sizeof(struct flock));\n    fl.l_type   = F_RDLCK;  // Read lock\n    fl.l_start  = 10;       // lock on offset 2\n    fl.l_len    = 1;        // lock length\n    fl.l_whence = 0;        // lock value from start\n\n    if ( fcntl(fd, F_SETLKW, &amp;fl) == -1 )\n    {\n        perror(\"fcntl:SETLK\");\n        return 1;\n    }\n    printf(\"Read Lock successfull\\n\");\n\n    if ( fcntl(fd, F_GETLK, &amp;fl) == -1 )\n    {\n        perror(\"fcntl:GETLK\");\n        return 1;\n    }\n\n    printf(\"%d %d %d\\n\", F_RDLCK, F_WRLCK, F_UNLCK);\n    printf(\"Lock Type   : %d\\n\", fl.l_type);\n    printf(\"Lock pid    : %d\\n\", fl.l_pid);\n    printf(\"Lock offset : %d\\n\", fl.l_start);\n\n    close(fd);\n\n    return 0;\n}\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>Read Lock successfull\n0 1 2\nLock Type   : 2\nLock pid    : 0\nLock offset : 10\n</code></pre>\n\n<p>It returning lock type as 2 (F_UNLCK) and it not returning pid of the process which took the lock.</p>\n"}, {"tags": ["c++", "c", "linux", "unix", "pthreads"], "answers": [{"comments": [{"owner": {"reputation": 203, "user_id": 1254554, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5c57f6ef8d44e3ea86772d4e1a1f218e?s=128&d=identicon&r=PG", "display_name": "user1254554", "link": "https://stackoverflow.com/users/1254554/user1254554"}, "edited": false, "score": 0, "creation_date": 1446035851, "post_id": 33390953, "comment_id": 54573926, "body": "if the process A(pid-1234) starts pthread ptA[ptA runs infinite loop], and we issue sigkill to A(pid-1234), is ptA stopped/killed too?"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 203, "user_id": 1254554, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5c57f6ef8d44e3ea86772d4e1a1f218e?s=128&d=identicon&r=PG", "display_name": "user1254554", "link": "https://stackoverflow.com/users/1254554/user1254554"}, "edited": false, "score": 1, "creation_date": 1446035939, "post_id": 33390953, "comment_id": 54573972, "body": "@user1254554 Yes, if a process is killed, all threads in that process are killed.  A thread cannot exist without a process."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 1, "last_activity_date": 1446034951, "creation_date": 1446034951, "answer_id": 33390953, "question_id": 33390901, "link": "https://stackoverflow.com/questions/33390901/thread-behaviour-when-not-joined-and-main-process-killed/33390953#33390953", "title": "thread behaviour when not joined and main process killed", "body": "<p>The <code>SIGKILL</code> signal forcefully terminates the entire process, regardless of how many threads it has and what those thread are doing.  This signal cannot be caught or ignored.</p>\n\n<p>If the process's parent is still alive when this happens, the process will be in a zombie state until the parent process calls <code>wait</code> or its variants. </p>\n"}, {"comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1446041865, "post_id": 33391381, "comment_id": 54578299, "body": "&quot;<i>The same thing happens when you call exit from main thread.</i>&quot; in fact the process ends when calling <code>exit()</code> from <i>any</i> thread."}, {"owner": {"reputation": 1355, "user_id": 1163462, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/fb5426025e066629df319666ed5dd553?s=128&d=identicon&r=PG", "display_name": "basav", "link": "https://stackoverflow.com/users/1163462/basav"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1446045846, "post_id": 33391381, "comment_id": 54581344, "body": "changed accordingly :)"}], "tags": [], "owner": {"reputation": 1355, "user_id": 1163462, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/fb5426025e066629df319666ed5dd553?s=128&d=identicon&r=PG", "display_name": "basav", "link": "https://stackoverflow.com/users/1163462/basav"}, "is_accepted": false, "score": 0, "last_activity_date": 1446045769, "last_edit_date": 1446045769, "creation_date": 1446036151, "answer_id": 33391381, "question_id": 33390901, "link": "https://stackoverflow.com/questions/33390901/thread-behaviour-when-not-joined-and-main-process-killed/33391381#33391381", "title": "thread behaviour when not joined and main process killed", "body": "<p>SIGKILL cannot be ignored/handled by any process.\nWhen the main thread returns, it terminates the entire process. This includes all other threads within the process. The same thing happens when you call exit from any thread.</p>\n\n<p>To Linux, there is no such \"explicit\" difference between a process and a thread.\nEach of them is represented by a <code>task_struct</code> in Kernel and they are chained together.</p>\n\n<p>Each Process main thread has a pid and task group id(tgid).So, all the threads also have the same pid or tgid.</p>\n\n<p>When a process is cleaned, all it's <code>child processes,not threads are reparented</code>.</p>\n\n<p>It's more about semantics:</p>\n\n<p>A thread shares it's resources with it's parent, which basically means memory mappings,file descriptors etc.</p>\n\n<p>When the process itself does not exist, who are the threads going to share the resources with??</p>\n\n<p>You cannot reparent them to some other process since they would need to acess it's resources.</p>\n\n<blockquote>\n  <p>So, in short ,  A child process can be reparented since it does not\n  share any resources, where as a child thread cannot be reparented</p>\n</blockquote>\n\n<p>.</p>\n\n<p>If you want to dig deeper, you can start off here:\n<a href=\"http://www.makelinux.net/books/lkd2/ch03lev1sec3\" rel=\"nofollow\">makelinux</a></p>\n"}], "owner": {"reputation": 203, "user_id": 1254554, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5c57f6ef8d44e3ea86772d4e1a1f218e?s=128&d=identicon&r=PG", "display_name": "user1254554", "link": "https://stackoverflow.com/users/1254554/user1254554"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 964, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1446045769, "creation_date": 1446034776, "question_id": 33390901, "link": "https://stackoverflow.com/questions/33390901/thread-behaviour-when-not-joined-and-main-process-killed", "title": "thread behaviour when not joined and main process killed", "body": "<p>I have a process, it creates a pthread but this thread is not joined to main thread. This thread has an infinite loop. When the process starts this thread also starts, but if the process is killed using SIGKILL, will this thread be killed automatically or will it turn to zombie thread?</p>\n\n<p>Thanks,</p>\n\n<p>Rohit</p>\n"}, {"tags": ["c#", "android", "c", "visual-studio", "xamarin"], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 5287570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d758da33917dd05740054dffeb37f2?s=128&d=identicon&r=PG&f=1", "display_name": "evgen-baton", "link": "https://stackoverflow.com/users/5287570/evgen-baton"}, "edited": false, "score": 0, "creation_date": 1446037672, "post_id": 33391164, "comment_id": 54575149, "body": "It would be great if I could do it in this way. But I don&#39;t understand some things. First of all when I add reference from my Xamarin Android project to a new Dynamic Shared Library project I get a warning <code>The project &#39;DynamicSipProject&#39; cannot be referenced. An assembly must have a &#39;dll&#39; or &#39;exe&#39; extension in order to be referenced</code>.    The second is after compiling pjsip source-code I have a lot of static libs (.a). How can I use them in this dynamic shared library project?"}], "tags": [], "owner": {"reputation": 33220, "user_id": 2023316, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/YF7Rj.png?s=128&g=1", "display_name": "Wosi", "link": "https://stackoverflow.com/users/2023316/wosi"}, "is_accepted": false, "score": 2, "last_activity_date": 1446035510, "creation_date": 1446035510, "answer_id": 33391164, "question_id": 33390708, "link": "https://stackoverflow.com/questions/33390708/create-shared-library-from-c-source-code-for-xamarin-android/33391164#33391164", "title": "Create shared library from c-source code for Xamarin Android", "body": "<p>This is what you are looking for:</p>\n\n<p><a href=\"https://blog.xamarin.com/build-and-debug-c-libraries-in-xamarin-android-apps-with-visual-studio-2015/\" rel=\"nofollow\">Build and Debug C++ Libraries in Xamarin.Android Apps with Visual Studio 2015</a></p>\n\n<p><strong>Overview</strong></p>\n\n<ul>\n<li>Install Visual Studio 2015</li>\n<li>Create a new Visual C++ Dynamic Shared Library project </li>\n<li>Reference this project in you Xamarin project</li>\n<li><p>Use <code>DllImport</code> to access the C code. Example:</p>\n\n<pre><code>[DllImport (\"sanangeles\", \n             EntryPoint = \"Java_com_example_SanAngeles_DemoGLSurfaceView_nativePause\")]\nstatic extern void nativePause (IntPtr jnienv);\n</code></pre></li>\n<li><p>Browse <a href=\"https://github.com/xamarin/monodroid-samples/tree/master/SanAngeles_NDK/SanAngeles_NativeDebug/SanAngeles\" rel=\"nofollow\">this project</a> to get a deeper view</p></li>\n</ul>\n\n<p>When you do it like this you can even debug the C Code while running the Xamarin.Android app in Visual Studio 2015.</p>\n"}], "owner": {"reputation": 41, "user_id": 5287570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d758da33917dd05740054dffeb37f2?s=128&d=identicon&r=PG&f=1", "display_name": "evgen-baton", "link": "https://stackoverflow.com/users/5287570/evgen-baton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1261, "favorite_count": 2, "answer_count": 1, "score": 3, "last_activity_date": 1446035698, "creation_date": 1446034244, "last_edit_date": 1446035698, "question_id": 33390708, "link": "https://stackoverflow.com/questions/33390708/create-shared-library-from-c-source-code-for-xamarin-android", "title": "Create shared library from c-source code for Xamarin Android", "body": "<p>I'm trying to build a simple sip-application using Xamarin Forms. I use <a href=\"http://www.pjsip.org/\" rel=\"nofollow\">PjSip</a> as a tool to sip functionality. I have a source-file (.c) with some methods which I want to call from my Xamarin application.<br>\nI have already built a static library (.a) for Xamarin ios and created a wrapper using p/invoke to call methods from my c-file. And it works perfect. But now I'm stuck on building shared libs (.so) to use them in Xamarin android.<br>\nI'm looking for step-by-step guide building shared libraries for Xamarin android starting with c-source code and ending with linking libs to a real Xamarin Android application. But still I would very appreciate any help.</p>\n"}, {"tags": ["c", "gcc", "clang"], "comments": [{"owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "edited": false, "score": 0, "creation_date": 1446034121, "post_id": 33390550, "comment_id": 54572839, "body": "What do you mean by HW? HW interface is the assembly language... Can you provide a real example. I just can&#39;t understand what exactly you are trying to test."}, {"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 0, "creation_date": 1446035621, "post_id": 33390550, "comment_id": 54573789, "body": "Well, the &quot;library&quot; version of <code>sin</code>, for example, is most likely very complex and involves approximating the value using polynomials if there&#39;s no hardware support, but then it may decide to use CPU&#39;s hardwired algorithms instead, like <code>fsincos</code>. I don&#39;t think there&#39;s an easy way to ensure that the library functions are indeed &quot;pure software&quot; other than modifying <code>glibc</code> code on your own, which should be possible if you&#39;re running GCC on Linux."}, {"owner": {"reputation": 312, "user_id": 1633009, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dc73bf0e93c2b546c13fbded7776c34a?s=128&d=identicon&r=PG", "display_name": "Noxbru", "link": "https://stackoverflow.com/users/1633009/noxbru"}, "reply_to_user": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 0, "creation_date": 1446036824, "post_id": 33390550, "comment_id": 54574537, "body": "@szczurcio That&#39;s mostly what I was looking for: A way to ensure that the &#39;sofware&#39; version of the function was being called, instead of just to a hardware instruction. If you think that that would be too complex, maybe I am better by just &#39;extracting&#39; the code from <code>glibc</code> by myself."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1446039907, "post_id": 33390550, "comment_id": 54576791, "body": "If you examine the library source code, you may be able check which internal functions it calls for different processor variants. If you&#39;re very lucky, they might be externally linkable."}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1446105405, "post_id": 33390550, "comment_id": 54607969, "body": "This question makes more sense for builtin functions. Your compiler may insert builtin code rather than call a library. Sometimes you don&#39;t want to use the builtin code."}], "answers": [{"comments": [{"owner": {"reputation": 312, "user_id": 1633009, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dc73bf0e93c2b546c13fbded7776c34a?s=128&d=identicon&r=PG", "display_name": "Noxbru", "link": "https://stackoverflow.com/users/1633009/noxbru"}, "edited": false, "score": 0, "creation_date": 1446034933, "post_id": 33390671, "comment_id": 54573340, "body": "My main problem is getting the library version (I mean from glibc) that doesn&#39;t compile to a <code>sqrtsd</code> or <code>fsqrt</code>. For the hardware version I know that I can always use some inline assembly."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "reply_to_user": {"reputation": 312, "user_id": 1633009, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dc73bf0e93c2b546c13fbded7776c34a?s=128&d=identicon&r=PG", "display_name": "Noxbru", "link": "https://stackoverflow.com/users/1633009/noxbru"}, "edited": false, "score": 0, "creation_date": 1446035420, "post_id": 33390671, "comment_id": 54573643, "body": "Please clarify your question. It is not clear what you want. Note that a &quot;library version&quot; doesn&#39;t &quot;compile&quot;. It is already compiled and can only be linked."}, {"owner": {"reputation": 312, "user_id": 1633009, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dc73bf0e93c2b546c13fbded7776c34a?s=128&d=identicon&r=PG", "display_name": "Noxbru", "link": "https://stackoverflow.com/users/1633009/noxbru"}, "edited": false, "score": 0, "creation_date": 1446036324, "post_id": 33390671, "comment_id": 54574210, "body": "I have edited the question, if it is still unclear, please, ask anything else you want. And thanks."}], "tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": false, "score": 1, "last_activity_date": 1446043879, "last_edit_date": 1446043879, "creation_date": 1446034125, "answer_id": 33390671, "question_id": 33390550, "link": "https://stackoverflow.com/questions/33390550/force-the-compiler-to-use-a-function/33390671#33390671", "title": "Force the compiler to use a function", "body": "<p>By listing the libraries in a particular order, the linker will search these in order, using the first occurence of a symbol (function). Libraries are searched after your compiled source code was searched, so any symbol in your code is preferred over a version in the library.</p>\n\n<p>Note that there can be conflicts or incompatibilities, for example if a library function uses other functions from that library which were already found in an earlier listed library or object.</p>\n\n<p>This behavior may further depend on the tool chain you are using, but the behavior I described is what I generally see is happening.</p>\n\n<p>EDIT: as per your edit of your question: a compiler might check the hardware the compiler is running on to decide to use library functions or CPU instructions for certain math work. Then possibly the compile has switches to direct it to use/not use those instructions, for example if you are compiling for a different platform. VC2008 has:</p>\n\n<ul>\n<li><code>/arch:[SSE|SSE2]</code> to specify  the architecture for code generation using the Streaming SIMD Extensions (SSE) and Streaming SIMD Extensions 2 (SSE2) instructions.</li>\n<li><code>/fp:precise</code> disables intrinsic [floating point]; the standard run-time library routines are used instead.</li>\n</ul>\n"}], "owner": {"reputation": 312, "user_id": 1633009, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dc73bf0e93c2b546c13fbded7776c34a?s=128&d=identicon&r=PG", "display_name": "Noxbru", "link": "https://stackoverflow.com/users/1633009/noxbru"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1446043879, "creation_date": 1446033795, "last_edit_date": 1446036264, "question_id": 33390550, "link": "https://stackoverflow.com/questions/33390550/force-the-compiler-to-use-a-function", "title": "Force the compiler to use a function", "body": "<p>I am playing a bit with some functions to make aproximations to some common functions (sqrt, sin, cos and the like) and I was wondering if I could 'study' the performance and precision of the C library I am using and the hardware instruction (if available)</p>\n\n<p>So, my question is: Is there a way to tell the compiler that for some functions I want the 'library version' and for others the 'hardware version' ? (and if possible, giving the compiler freedom to optimize the library version, but without using the hardware instruction).</p>\n\n<p>Something like:</p>\n\n<pre><code>library_fun(x);  // &lt;-- compiled to the library version\nhardware_fun(x); // &lt;-- compiled to the hardware version (if available)\n</code></pre>\n\n<p><strong>EDITED:</strong></p>\n\n<p>Okay, my question wasn't very self-explicative, new trial:</p>\n\n<p>I am assuming that my C library has some kind of 'software-fallback' implementation for some mathematical functions in case the hardware doesn't have them. I was wondering if I could call that (that's what I was calling <code>library_fun</code>) to check it's precision/performance/just curiosity if I could.</p>\n\n<p>Also, I would be able to use the hardware instruction (if it exists and is available).</p>\n\n<p>As a more detailed 'example', in my code I have the function <code>sqrt</code>. If I check the assembly output I get a <code>sqrtsd</code> instruction. So, no call to sqrt whatsoever.</p>\n"}, {"tags": ["c++", "c", "opencv", "google-nativeclient"], "comments": [{"owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 0, "creation_date": 1446033952, "post_id": 33390425, "comment_id": 54572737, "body": "looks like an include path problem in which the C++ STL include file for list is not being located by the compiler."}, {"owner": {"reputation": 1, "user_id": 5498003, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a14d4ac75cb113508450551e7882de5?s=128&d=identicon&r=PG&f=1", "display_name": "poulette", "link": "https://stackoverflow.com/users/5498003/poulette"}, "reply_to_user": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 0, "creation_date": 1446035701, "post_id": 33390425, "comment_id": 54573832, "body": "yes, but I don&#39;t understand why I don&#39;t have this error when compiling the C++ code."}, {"owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 0, "creation_date": 1446049766, "post_id": 33390425, "comment_id": 54584298, "body": "From the error, it looks like the opencv2 is trying to pull in C++ STL components, specifically the <code>list</code> templates.  See this question and answer <a href=\"http://stackoverflow.com/questions/19177456/include-c-header-files-in-opencv\">#include C++ header files in opencv</a> as well as <a href=\"http://stackoverflow.com/questions/13686606/can-opencv-be-developed-using-c-and-c-together\">Can OpenCV be developed using C++ and C together</a>"}, {"owner": {"reputation": 1, "user_id": 5498003, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a14d4ac75cb113508450551e7882de5?s=128&d=identicon&r=PG&f=1", "display_name": "poulette", "link": "https://stackoverflow.com/users/5498003/poulette"}, "reply_to_user": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 0, "creation_date": 1446212413, "post_id": 33390425, "comment_id": 54662777, "body": "ok thank you very much"}], "owner": {"reputation": 1, "user_id": 5498003, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a14d4ac75cb113508450551e7882de5?s=128&d=identicon&r=PG&f=1", "display_name": "poulette", "link": "https://stackoverflow.com/users/5498003/poulette"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 301, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1446033428, "creation_date": 1446033428, "question_id": 33390425, "link": "https://stackoverflow.com/questions/33390425/how-to-build-my-own-c-library-with-chrome-native-client", "title": "How to build my own C Library with Chrome Native Client", "body": "<p>I'm new to Chrome Application development and the Native Client/PNaCL pipeline. \nI'm working on OS X Yosemite.\nI have installed naclports to use opencv. I have tried a C++ code that uses opencv and everything is ok.</p>\n\n<p>Now, I would like to call my own C Library in this C++ code. First, I have to build it for nacl, and here's my problem (my library also uses opencv).</p>\n\n<p>I have the following error when compiling:</p>\n\n<pre><code>    cc    -c -o mylib.o mylib.c\n    In file included from mylib.c:3:\n    In file included from /System/Library/Frameworks/opencv2.framework/Headers/opencv.hpp:52:\n    In file included from /System/Library/Frameworks/opencv2.framework/Headers/video/video.hpp:47:\n    /System/Library/Frameworks/opencv2.framework/Headers/video/background_segm.hpp:47:10: fatal error: \n  'list' file not found\n    #include &lt;list&gt;\n     ^\n    1 error generated.\n    make: *** [mylib.o] Error 1\n</code></pre>\n\n<p>Here is my Makefile:</p>\n\n<pre><code>    WARNING_FLAGS := -Wall -Wno-long-long -pedantic -Werror \n    CXXFLAGS := -lpthread $(WARNINGS) -I/opt/local/include/ -I/opt/local/include/opencv/ \n    LDFLAGS := -L/opt/local/lib/ -lopencv_objdetect -lopencv_imgproc -lopencv_core -lopencv_highgui -lopencv_contrib -lopencv_ml -lopencv_video -lz -lm -L/usr/X11R6/lib -lGLU -lGL -lXext -lX11\n\n    GETOS := python $(NACL_SDK_ROOT)/tools/getos.py\n    OSHELPERS = python $(NACL_SDK_ROOT)/tools/oshelpers.py\n    OSNAME := $(shell $(GETOS))\n\n    PNACL_TC_PATH:=$(abspath $(NACL_SDK_ROOT)/toolchain/$(OSNAME)_pnacl)\n    PNACL_CXX:=$(PNACL_TC_PATH)/bin/pnacl-clang++\n    PNACL_CC:=$(PNACL_TC_PATH)/bin/pnacl-clang\n    PNACL_AR:=$(PNACL_TC_PATH)/bin/pnacl-ar\n\n    PNACL_CXXFLAGS := -I$(NACL_SDK_ROOT)/include $(CXXFLAGS) \n    PNACL_LDFLAGS := -L$(NACL_SDK_ROOT)/lib/pnacl/Release -lppapi_cpp -lppapi -lpthread $(LDFLAGS)\n\n    SUFFIXES = .o .c .h .a .sl #.so \n\n    SRCS := mylib.c\n    OBJS = $(SRCS:%.c=%.o)\n\n    all:  mylib.a\n\n    mylib.a:    $(OBJS) $(PNACL_CXX) -o $@ $&lt; $(OBJS) -O2\n    $(PNACL_CXXFLAGS) $(PNACL_LDFLAGS)\n    @($(PNACL_AR) mylib.a $(OBJS))\n\n    clean:\n        $(RM) $(OBJS) mylib.a\n</code></pre>\n\n<p>I don't understand this opencv error.</p>\n"}, {"tags": ["c", "multithreading", "pthreads", "posix"], "comments": [{"owner": {"reputation": 1080, "user_id": 3796318, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/81dd46d5632e55d7c74690e2867111d8?s=128&d=identicon&r=PG&f=1", "display_name": "DrunkenMaster", "link": "https://stackoverflow.com/users/3796318/drunkenmaster"}, "edited": false, "score": 0, "creation_date": 1446033098, "post_id": 33390055, "comment_id": 54572162, "body": "It would be nice of you , if u let me know the reason for down voting. probably i can educate myself to post it in a better way in feature."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1446034138, "post_id": 33390055, "comment_id": 54572852, "body": "I have no idea who gave you Down Vote but if you do not show some working code you will keep getting down vote. Please show some work and do not post some question related to a code found somewhere on internet. Any way to understand something you should try yourself <b>something</b>"}, {"owner": {"reputation": 1080, "user_id": 3796318, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/81dd46d5632e55d7c74690e2867111d8?s=128&d=identicon&r=PG&f=1", "display_name": "DrunkenMaster", "link": "https://stackoverflow.com/users/3796318/drunkenmaster"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1446034669, "post_id": 33390055, "comment_id": 54573184, "body": "Thanks for the hint Michi, i never knew and will follow that."}], "answers": [{"tags": [], "owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "is_accepted": false, "score": 0, "last_activity_date": 1446037604, "creation_date": 1446037604, "answer_id": 33391877, "question_id": 33390055, "link": "https://stackoverflow.com/questions/33390055/thread-specific-data-confusion-in-the-given-example/33391877#33391877", "title": "Thread specific data confusion in the given example", "body": "<p>If I undestand this question correctly, you just don't realize intention of thread-specific data.</p>\n\n<p>Yes, you can implement this example without using <code>pthread_key</code> mechanism. Instead, you may pass file descriptor to function <code>write_to_thread_log</code> via parameter:</p>\n\n<pre><code>void write_to_thread_log (FILE* thread_log, const char* message)\n</code></pre>\n\n<p>But then you should pass this parameter to <em>every function</em>, which possibly call(even indirectly!) this one. Because logging usually cover almost whole program, you end up with adding additional parameter to <em>every function in the program</em>, which is not convenient.</p>\n\n<p><em>Single-threaded</em> program can use <em>global</em> variables for store values, which can be used in many places. Because all functions can use global variables, there is no needs to pass additional parameter to them.</p>\n\n<p>But in case of <em>multi-threaded</em> program, threads <em>share value</em> of the global variable, so this approach doesn't suite to thread-specific data.</p>\n\n<p><code>pthread_key</code> mechanism resolve this problem: while every thread sees same value of the global key, data corresponded to this key is thread-specific.</p>\n"}], "owner": {"reputation": 1080, "user_id": 3796318, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/81dd46d5632e55d7c74690e2867111d8?s=128&d=identicon&r=PG&f=1", "display_name": "DrunkenMaster", "link": "https://stackoverflow.com/users/3796318/drunkenmaster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 1, "answer_count": 1, "score": -3, "last_activity_date": 1446037604, "creation_date": 1446032313, "last_edit_date": 1446034577, "question_id": 33390055, "link": "https://stackoverflow.com/questions/33390055/thread-specific-data-confusion-in-the-given-example", "title": "Thread specific data confusion in the given example", "body": "<p>Hi i am reading <a href=\"http://www.makelinux.net/alp/030\" rel=\"nofollow\">this link</a> to understand thread specific data.</p>\n\n<p>After reading this, I got a question, </p>\n\n<blockquote>\n  <ol>\n  <li><p>The given example creates 5 threads.</p></li>\n  <li><p>Each thread runs thread_function, which has its own stack. And each of this function invokes, another function called write_to_thread_log</p></li>\n  <li><p><strong>Now, write_to_thread_log function also will be running on the context of each specific thread, in this case, why do we need thread specific data.</strong></p></li>\n  </ol>\n</blockquote>\n\n<p>There are plenty of explanation i found in the net, but somehow my brain is not understanding. Please help me to understand. </p>\n"}, {"tags": ["c", "user-interface", "iup"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1446031370, "post_id": 33389512, "comment_id": 54571112, "body": "Shouldn&#39;t it be <code>IupOpen(argc, &amp;argv);</code> instead of <code>IupOpen(argc, argv);</code> ?"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 5498194, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/541bc8ea25ade8fc2d055a8ae7764ac0?s=128&d=identicon&r=PG", "display_name": "Antonio Scuri", "link": "https://stackoverflow.com/users/5498194/antonio-scuri"}, "is_accepted": false, "score": 0, "last_activity_date": 1446034527, "creation_date": 1446034527, "answer_id": 33390814, "question_id": 33389512, "link": "https://stackoverflow.com/questions/33389512/iup-programs-crashes-in-iupopenargc-argv/33390814#33390814", "title": "iup programs Crashes in IupOpen(argc, argv);", "body": "<p>You should call IupOpen(&amp;argc, &amp;argv), that's what gcc is warning you.</p>\n"}], "owner": {"reputation": 41, "user_id": 5405418, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d8e4d20d31301e2ed648bee23c75a26c?s=128&d=identicon&r=PG&f=1", "display_name": "I will try", "link": "https://stackoverflow.com/users/5405418/i-will-try"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1446034527, "creation_date": 1446030773, "last_edit_date": 1446031228, "question_id": 33389512, "link": "https://stackoverflow.com/questions/33389512/iup-programs-crashes-in-iupopenargc-argv", "title": "iup programs Crashes in IupOpen(argc, argv);", "body": "<p>I try to use IUP in c</p>\n\n<p>I test this example</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;iup/iup.h&gt;\n\nint main(int argc, char **argv)\n{\n  Ihandle *dlg, *label;\n  IupOpen(argc, argv);\n  label =  IupLabel(\"Hello world from IUP.\");\n  dlg = IupDialog(IupVbox(label, NULL));\n  IupSetAttribute(dlg, \"TITLE\", \"Hello World 2\");\n  IupShowXY(dlg, IUP_CENTER, IUP_CENTER);\n  IupMainLoop();\n  IupClose();\n  return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>I Compile it Like this</p>\n\n<pre><code>gcc q.c -liup -o q\n</code></pre>\n\n<p>And gcc gives me this </p>\n\n<pre><code>q.c: In function \u00e2\u20ac\u06a9main\u00e2\u20ac\u2122:\nq.c:6:3: warning: passing argument 1 of \u00e2\u20ac\u06a9IupOpen\u00e2\u20ac\u2122 makes pointer from integer without a cast [enabled by default]\n   IupOpen(argc, argv);\n   ^\nIn file included from q.c:2:0:\n/usr/include/iup/iup.h:35:11: note: expected \u00e2\u20ac\u06a9int *\u00e2\u20ac\u2122 but argument is of type \u00e2\u20ac\u06a9int\u00e2\u20ac\u2122\n int       IupOpen          (int *argc, char ***argv);\n           ^\nq.c:6:3: warning: passing argument 2 of \u00e2\u20ac\u06a9IupOpen\u00e2\u20ac\u2122 from incompatible pointer type [enabled by default]\n   IupOpen(argc, argv);\n   ^\nIn file included from q.c:2:0:\n/usr/include/iup/iup.h:35:11: note: expected \u00e2\u20ac\u06a9char ***\u00e2\u20ac\u2122 but argument is of type \u00e2\u20ac\u06a9char **\u00e2\u20ac\u2122\n int       IupOpen          (int *argc, char ***argv);\n           ^\n</code></pre>\n\n<p>When I run  the program its crashes.\nThen I run it using gdb and gdb told me the program crashed it this line:</p>\n\n<pre><code>IupOpen(argc, argv);\n</code></pre>\n\n<p>I rtfm and stfw but I did not find the solution.</p>\n"}, {"tags": ["c", "embedded", "heap-corruption"], "comments": [{"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 1, "creation_date": 1446031407, "post_id": 33389510, "comment_id": 54571141, "body": "<a href=\"http://stackoverflow.com/a/605858/28169\">Please don&#39;t cast the return value of <code>malloc()</code> in C</a>."}, {"owner": {"reputation": 73538, "user_id": 43681, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/6c2dd6a39d3f38f1bb47a8c1fe8325e2?s=128&d=identicon&r=PG", "display_name": "sleske", "link": "https://stackoverflow.com/users/43681/sleske"}, "edited": false, "score": 2, "creation_date": 1446032566, "post_id": 33389510, "comment_id": 54571847, "body": "I cannot see how your change would make a difference - according to the C standards, the two variants must do the same. Can you provide a SSCCE ( <a href=\"http://sscce.org/\" rel=\"nofollow noreferrer\">sscce.org</a>  ) to demonstrate the problem?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446033176, "post_id": 33389510, "comment_id": 54572207, "body": "Provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Do you have an interrupt running, generating a race condition?"}, {"owner": {"reputation": 3, "user_id": 4428874, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-n3cpiiFOf8s/AAAAAAAAAAI/AAAAAAAABbM/yIkVuWNwBGg/photo.jpg?sz=128", "display_name": "Paul", "link": "https://stackoverflow.com/users/4428874/paul"}, "reply_to_user": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1446034577, "post_id": 33389510, "comment_id": 54573123, "body": "Thanks @unwind, I will remove that."}, {"owner": {"reputation": 3, "user_id": 4428874, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-n3cpiiFOf8s/AAAAAAAAAAI/AAAAAAAABbM/yIkVuWNwBGg/photo.jpg?sz=128", "display_name": "Paul", "link": "https://stackoverflow.com/users/4428874/paul"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446034647, "post_id": 33389510, "comment_id": 54573171, "body": "I will try to provide a SSCCE. I thought the whole code was too large to post it here, and reduced it to something manageable. I don&#39;t have any interrupts @Olaf."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1446034744, "post_id": 33389510, "comment_id": 54573221, "body": "Are you able to run this code outside of the embedded environment? If so, try running your code under valgrind. If you&#39;re stepping on memory you&#39;re not supposed to, it will tell you where."}, {"owner": {"reputation": 73538, "user_id": 43681, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/6c2dd6a39d3f38f1bb47a8c1fe8325e2?s=128&d=identicon&r=PG", "display_name": "sleske", "link": "https://stackoverflow.com/users/43681/sleske"}, "edited": false, "score": 0, "creation_date": 1446034958, "post_id": 33389510, "comment_id": 54573356, "body": "@Paul: The whole point of an SSCCE is to avoid posting &quot;the whole code&quot;. That&#39;s the &quot;short&quot; in &quot;SSCCE&quot; (or the &quot;minimal&quot; in &quot;Minimal, Complete, and Verifiable&quot;) :-)."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1446035129, "post_id": 33389510, "comment_id": 54573471, "body": "The behavior you describe is typical for any memory corruption bug. Somewhere in your program there is undefined behavior, and by shuffling around a few instructions, you somehow manage to temporarily suppress the bug. Most likely the memory corruption bug is inside the function where you do the malloc, but it is not necessarily related to malloc/heap. My guess is that the stack frame of the function gets corrupted by code which is writing to the wrong memory location somewhere."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1446035441, "post_id": 33389510, "comment_id": 54573664, "body": "What happens if you remove the &quot;__packed&quot; attribute from the struct and try the original code?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1446035657, "post_id": 33389510, "comment_id": 54573810, "body": "Also, what&#39;s the mysterious <code>uint8</code> that appears in your code? Is it defined? Why not use <code>uint8_t</code>?"}, {"owner": {"reputation": 2030, "user_id": 550235, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/934de7ad57af9a8f6a37e0c78017f942?s=128&d=identicon&r=PG", "display_name": "Russ Schultz", "link": "https://stackoverflow.com/users/550235/russ-schultz"}, "edited": false, "score": 0, "creation_date": 1446041077, "post_id": 33389510, "comment_id": 54577696, "body": "What is the definition of <code>typeEvent*</code>?  What is <code>lstField_NewList()</code> SUPPOSED to do?  Looking at the code, you&#39;re allocating 1 byte.   When you call <code>lst_Event_FirstNode()</code> using the same pointer, you&#39;re casting your 1 byte allocation to a <code>typeEvent*</code>, then setting some member of it to a value.   Unless that member is the first member and only a byte, you&#39;re overwriting something you shouldn&#39;t.  Of course, the <code>&#47;&#47;...</code> you&#39;ve got in your code might mean you&#39;re working on a different allocation and this is a red herring."}, {"owner": {"reputation": 3, "user_id": 4428874, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-n3cpiiFOf8s/AAAAAAAAAAI/AAAAAAAABbM/yIkVuWNwBGg/photo.jpg?sz=128", "display_name": "Paul", "link": "https://stackoverflow.com/users/4428874/paul"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1446043513, "post_id": 33389510, "comment_id": 54579566, "body": "Apologies to all for posting an inconcrete piece of code. @Lundin <code>uint8</code> is a type error, should be <code>uint8_t</code>; and thanks for the guess, I also believe something like that is happening. I`m working on a better example code, coming soon..."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1446043564, "post_id": 33389510, "comment_id": 54579605, "body": "@Paul Type as in typing? If so, please post a copy/paste of the actual code instead."}, {"owner": {"reputation": 3, "user_id": 4428874, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-n3cpiiFOf8s/AAAAAAAAAAI/AAAAAAAABbM/yIkVuWNwBGg/photo.jpg?sz=128", "display_name": "Paul", "link": "https://stackoverflow.com/users/4428874/paul"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1446046213, "post_id": 33389510, "comment_id": 54581596, "body": "While looking for a SSCCE I&#39;ve found the real problem. The memory taken by <code>p</code> was not being freed, equaling the pointer to zero in each loop instead. For some reason, as @Lundin suggested, when changing the code using <code>pEvent</code> auxiliar the problem ceased to show up. But the bug was still there."}, {"owner": {"reputation": 3, "user_id": 4428874, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-n3cpiiFOf8s/AAAAAAAAAAI/AAAAAAAABbM/yIkVuWNwBGg/photo.jpg?sz=128", "display_name": "Paul", "link": "https://stackoverflow.com/users/4428874/paul"}, "edited": false, "score": 0, "creation_date": 1446046300, "post_id": 33389510, "comment_id": 54581659, "body": "Apologies again for posting such a messy code. I will take greater care next time. Thanks all for your comments."}], "owner": {"reputation": 3, "user_id": 4428874, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-n3cpiiFOf8s/AAAAAAAAAAI/AAAAAAAABbM/yIkVuWNwBGg/photo.jpg?sz=128", "display_name": "Paul", "link": "https://stackoverflow.com/users/4428874/paul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 106, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1446046085, "creation_date": 1446030761, "last_edit_date": 1446046085, "question_id": 33389510, "link": "https://stackoverflow.com/questions/33389510/tricky-heap-corruption-bug", "title": "Tricky Heap corruption Bug?", "body": "<p>EDIT: What I thought was a bug-correction was nothing but a random fix. I was forgetting to free up heap memory correctly. See the actual code and explanation at the bottom (I'm not sure if I should have edited the whole question).</p>\n\n<p>I haved fixed a bug, but do not understand what it's causing it.</p>\n\n<p>If I use a helper pointer to access the element of a list in the heap, and modify its contents, everything's fine. However, if I directly modify the contents of the element using a function that returns that pointer, then this data gets corrupted at a later stage when allocating more memory.</p>\n\n<p>The error only appears when the code is run in a loop, on the 6th cycle.</p>\n\n<p>Code does not work</p>\n\n<pre><code>// numEvents gets corrupted after some cycles\nlstEvent_NewList(&amp;lstEvent, 1, &amp;err); // creates a list of typeEvent in heap\n//...\nlstEvent_FirstNode(&amp;lstEvent)-&gt;numEvents = events; // access first element of list directly\n//...\ntypeCommand * p = 0;\np = (typeCommand *) malloc(sizeof(typeCommand)); // do some more allocations\nlstField_NewList(&amp;p-&gt;lstFields, 5, &amp;err); // THIS LINE CAUSES CORRUPTION IN numEvents\n</code></pre>\n\n<p>Code does work</p>\n\n<pre><code>typeEvent * pEvent;   // use an auxiliar to iterate through the list\nlstEvent_NewList(&amp;lstEvent, 1, &amp;err);\n//...\npEvent = lstEvent_FirstNode(&amp;lstEvent);\npEvent-&gt;numEvents = events;\n//...\ntypeCommand * p = 0;\np = (typeCommand *) malloc(sizeof(typeCommand)); // do some more allocations\nlstField_NewList(&amp;p-&gt;lstFields, 5, &amp;err); // all is good\n</code></pre>\n\n<p>So, basically if I use an auxiliar to get the first element of the list nothing happens. However, if I use the function to directly access the first element, it breaks later on in the program.</p>\n\n<p>Structure and function definitions:</p>\n\n<pre><code>typeEvent * lstEvent_FirstNode (LSTEvent *lst)\n{\n    return lst-&gt;ls;\n}\n\nvoid lstEvent_NewList (LSTEvent * lst, uint16_t size, uint8_t * err)\n{\n    typeEvent* ret = 0;\n    ret = (typeEvent*)malloc(sizeof(typeEvent)*size);\n    if (ret == 0)\n    {\n        *err = E_RUN_OUT_OF_MEM;\n        lst-&gt;cn = 0;\n        return;\n    }\n    *err = 0;\n    lst-&gt;ls = ret;\n    lst-&gt;cn = size;\n}    \n\nvoid lstField_NewList (LSTField * lst, uint16_t size, uint8_t * err)\n{\n    typeField* ret = 0;\n    ret = (typeField*)malloc(sizeof(typeField)*size);\n    if (ret == 0)\n    {\n        *err = E_RUN_OUT_OF_MEM;\n        lst-&gt;cn = 0;\n        return;\n    }\n    *err = 0;\n    lst-&gt;ls = ret;\n    lst-&gt;cn = size;\n}\n\nvoid lstEvent_ClearList (LSTEvent * lst)\n{\n   free(lst-&gt;ls);\n   lst-&gt;ls = 0;\n   lst-&gt;cn = 0;\n}    \n\nvoid lstField_ClearList (LSTField * lst)\n{\n   free(lst-&gt;ls);\n   lst-&gt;ls = 0;\n   lst-&gt;cn = 0;\n}\n\nstruct DM_Field{\n    __packed uint8_t value;\n};\ntypedef struct DM_Field typeField;\n\ntypedef struct LSTField {\n    __packed uint16_t cn;   // Count, number of elements in array\n    uint8_t * ls;           // Array  \n} LSTField;\n\nstruct DM_Command{\n    // some data\n    LSTField lstFields;\n};\ntypedef struct DM_Command typeCommand;\n</code></pre>\n\n<p>Platform: STM32L1XX.</p>\n\n<p>EDIT: This code resembles closer the reality.</p>\n\n<p>Code does not work</p>\n\n<pre><code>typeCommand * p = 0;\nfor (uint16_t i=0; i&lt;1000; i++)\n{\n    // numEvents gets corrupted after some cycles\n    lstEvent_NewList(&amp;lstEvent, 1, &amp;err); // creates a list of typeEvent in heap\n    //...\n    lstEvent_FirstNode(&amp;lstEvent)-&gt;numEvents = events; // access first element of list directly\n    //...\n    p = (typeCommand *) malloc(sizeof(typeCommand)); // do some more allocations\n    lstField_NewList(&amp;p-&gt;lstFields, 5, &amp;err); // THIS LINE (was thought to be causing) CORRUPTION IN numEvents\n    //...\n    lstEvent_ClearList(&amp;lstEvent);\n    lstField_ClearList(&amp;p-&gt;lstFields);\n    p = 0;\n}\n</code></pre>\n\n<p>Code does work </p>\n\n<pre><code>typeCommand * p = 0;\ntypeEvent * pEvent;   // use an auxiliar to iterate through the list\nfor (uint16_t i=0; i&lt;1000; i++)\n{\n    lstEvent_NewList(&amp;lstEvent, 1, &amp;err);\n    //...\n    pEvent = lstEvent_FirstNode(&amp;lstEvent);\n    pEvent-&gt;numEvents = events;\n    //...\n    p = (typeCommand *) malloc(sizeof(typeCommand)); // do some more allocations\n    lstField_NewList(&amp;p-&gt;lstFields, 5, &amp;err); // all is good\n    //...\n    lstEvent_ClearList(&amp;lstEvent);\n    lstField_ClearList(&amp;p-&gt;lstFields);\n    free(p);  // freeing properly now\n    p = 0;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "sorting", "counting-sort"], "comments": [{"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1446029315, "post_id": 33388976, "comment_id": 54569852, "body": "What is it with the strange upper bounds? <code>num[n]</code> accesses <code>num</code> out of bounds when <code>n == k</code>, which your <code>for</code> loop will reach."}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 2, "creation_date": 1446029472, "post_id": 33388976, "comment_id": 54569954, "body": "<code>int a[]={8,2,3,...,93,42,6}, b, k=666;</code> is really <b>terrible</b> style; I was looking like a madman for where <code>b</code> was defined and then I had to think about what type something gets that is defined as <code>int a[]=..., b</code>."}, {"owner": {"reputation": 634, "user_id": 3735245, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/a92a967d5a1f2efe4fba36f81ef5b536?s=128&d=identicon&r=PG&f=1", "display_name": "Rorschach", "link": "https://stackoverflow.com/users/3735245/rorschach"}, "edited": false, "score": 0, "creation_date": 1446029672, "post_id": 33388976, "comment_id": 54570087, "body": "<code>for (n=0; n&lt;k+1; n++)</code> should be <code>for (n=0; n&lt;k; n++) </code>  And one other thing.. What do you mean by &quot;penultimate number&quot;? Number of elements in an array is not element of array itself!"}, {"owner": {"reputation": 5, "user_id": 5415104, "user_type": "registered", "profile_image": "https://graph.facebook.com/906058162807510/picture?type=large", "display_name": "Leandro Oliveira Rezende", "link": "https://stackoverflow.com/users/5415104/leandro-oliveira-rezende"}, "edited": false, "score": 0, "creation_date": 1446030372, "post_id": 33388976, "comment_id": 54570489, "body": "If I swap for (n=0; n&lt;k+1; n++) with for (n=0; n&lt;k; n++)  the code crashes. Also, by &quot;penultimate number&quot;, I mean the ordered array has the number &quot;128&quot; right before the &quot;666&quot;. &quot;128&quot; is not on the original array and is the number of elements of a[]."}], "answers": [{"tags": [], "owner": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "is_accepted": true, "score": 1, "last_activity_date": 1446029409, "creation_date": 1446029409, "answer_id": 33389061, "question_id": 33388976, "link": "https://stackoverflow.com/questions/33388976/counting-sort-c/33389061#33389061", "title": "Counting Sort - C", "body": "<p>You have defined <code>num</code> as</p>\n\n<pre><code>int num[k];\n</code></pre>\n\n<p>and later are accessing elements till <code>k</code></p>\n\n<pre><code>for (n=0; n&lt;k+1; n++) // 0 to k\n{\n    num[n] = 0;\n}\n</code></pre>\n\n<p>But, as the index of arrays starts from <code>0</code> , the array would have elements indexed from <code>0</code> to <code>k-1</code></p>\n\n<p>So, the above code would result in accessing elements out of bound. Which is Undefined Behavior in C</p>\n"}, {"tags": [], "owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "is_accepted": false, "score": 0, "last_activity_date": 1446029451, "creation_date": 1446029451, "answer_id": 33389080, "question_id": 33388976, "link": "https://stackoverflow.com/questions/33388976/counting-sort-c/33389080#33389080", "title": "Counting Sort - C", "body": "<pre><code>int num[k];                  //has valid index from 0 to k-1\n\nfor (n=0; n&lt;k+1; n++)        // this will access index k(out of bounds)\n{\n    num[n] = 0;             \n}\n</code></pre>\n\n<p>With <code>n=k</code> it goes out of bound , thus you tend to write at invalid address therefore ,causing UB. </p>\n\n<p>Change loop condition to <code>n&lt;k</code> .</p>\n\n<pre><code>for (n=0; n&lt;k; n++)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "is_accepted": false, "score": 0, "last_activity_date": 1446032355, "creation_date": 1446032355, "answer_id": 33390069, "question_id": 33388976, "link": "https://stackoverflow.com/questions/33388976/counting-sort-c/33390069#33390069", "title": "Counting Sort - C", "body": "<p>Think about the dimensions of your arrays:</p>\n\n<ul>\n<li><code>b</code> is the number of elements in <code>a</code>. You can access <code>a[0]</code> through a<code>[b - 1]</code> incusively; <code>a[b]</code> is one beyond the array.</li>\n<li><code>k</code> is the maximum value of the elements in <code>a</code>. You must be able to store all elements from 0 to <code>k</code> inclusively in <code>num</code>. That's <code>k + 1</code> elements, and that should also be your dimension for <code>num</code>:</li>\n</ul>\n\n<p>So your first <code>for</code> loop is good, but the array dimension is one too small. Your second and third loops iterate over <code>a</code> and should therefore have the condition <code>n &lt; b</code>. Both loops do one iteration too many in your code.</p>\n\n<pre><code>void ordenar(int vet[], int b, int k)\n{\n    int num[k + 1];\n    int n, frescura = 0;\n\n    for (n = 0; n &lt; k + 1; n++) {           // initialise num\n        num[n] = 0;\n    }\n\n    for (n = 0; n &lt; b; n++) {               // accumulate counts\n        num[vet[n]]++;\n    }\n\n    for (n = 0; n &lt; b;) {                   // reconstruct array\n        while (num[frescura] &gt; 0) {\n            vet[n] = frescura;\n            n++;\n            num[frescura]--;\n        }\n        frescura++;\n    }\n}\n</code></pre>\n\n<p>Further notes:</p>\n\n<ul>\n<li><p>The last <code>for</code> loop is awkward. The idea is to loop over all possible elements in increasing order and then fill the original array with the respective number of elements. So the outer loop should iterate over <code>num</code> and the inner loop should fill the array:</p>\n\n<pre><code>m = 0;\nfor (n = 0; n &lt; k + 1; n++) {\n    while (num[n]-- &gt; 0) vet[m++] = n;\n}\n</code></pre>\n\n<p>(Your version isn't wrong, but it is harder to understand, in my opinion. I've replaced the long name <code>frescura</code> with <code>m</code>)</p></li>\n<li><p>You should probably enforce that all array elements are between 0 and <code>k</code>. The value is used as index into <code>num</code> and accessing that array at indices out of bound leads to undefined behaviour.</p></li>\n<li>Printing shouldn't be part of the sorting function; it should be done in a separate function.</li>\n</ul>\n"}], "owner": {"reputation": 5, "user_id": 5415104, "user_type": "registered", "profile_image": "https://graph.facebook.com/906058162807510/picture?type=large", "display_name": "Leandro Oliveira Rezende", "link": "https://stackoverflow.com/users/5415104/leandro-oliveira-rezende"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 314, "favorite_count": 0, "accepted_answer_id": 33389061, "answer_count": 3, "score": -2, "last_activity_date": 1446032355, "creation_date": 1446029167, "question_id": 33388976, "link": "https://stackoverflow.com/questions/33388976/counting-sort-c", "title": "Counting Sort - C", "body": "<p>So I tried to implement Counting Sort as an exercise, but there is a mistake that I'm not able to fix.</p>\n\n<p>Here's the code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nvoid ordenar(int vet[], int b, int k)\n{\n    int num[k];\n    int c0=0,c1=0, n, frescura=0;\n\n    for (n=0; n&lt;k+1; n++)\n    {\n        num[n] = 0;\n    }\n\n    for(n=0;n&lt;b+1;n++)\n    {\n        num[vet[n]]++;\n    }\n\n    for(n=0;n&lt;=b;)\n        {\n        while(num[frescura]&gt;0)\n        {\n            vet[n] = frescura;\n            n++;\n            num[frescura]--;\n        }\n        frescura++;\n        }\n    int y;\n    for (y=0; y&lt;b+1; y++)\n    {\n        printf(\"%d, \", vet[y]);\n    }\n\n}\n\nmain ()\n{\n    int a[]={8,2,3,4,1,45,12,23,1,4,5,1,9,2,4,82,0,3,0,0,0,0,23,4,8,1,1,1,1,1,1,3,2,4,\n            1,3,3,3,3,4,21,4,2,4,1,4,12,4,1,4,2,4,2,95,32,32,23,41,14,0,0,1,4,24,24,2,\n            2,2,2,2,2,1,3,14,14,15,5,5,6,7,8,9,0,1,2,3,4,666,4,3,2,1,9,3,4,2,1,0,51,23,12,\n            23,23,14,15,16,18,81,28,18,19,20,3,1,9,9,9,2,4,1,65,2,13,13,29,93,42,6}, b, k=666;\n\n    b = sizeof(a)/sizeof(a[0]);\n    ordenar(a, b, 666);\n    return 0;\n}\n</code></pre>\n\n<p>The problem is: the code seems to put this array in order, except for the penultimate number, which is the number of elements of said array.</p>\n"}, {"tags": ["c", "memory", "valgrind"], "comments": [{"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1446028624, "post_id": 33388573, "comment_id": 54569419, "body": "What&#39;s up with all the pointless casting? You could remove all casts from that function and it would be all the better for it. Only cast if necessary, otherwise you can hide potential problems."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 1, "creation_date": 1446036699, "post_id": 33388573, "comment_id": 54574458, "body": "If you have a different question, please post it as a new question.  Don&#39;t completely change the existing question, which invalidates the existing answers."}], "answers": [{"comments": [{"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1446028355, "post_id": 33388658, "comment_id": 54569231, "body": "<code>sizeof(string)</code>? You mean <code>strlen(dot)</code>?"}], "tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": false, "score": 0, "last_activity_date": 1446028374, "last_edit_date": 1446028374, "creation_date": 1446028294, "answer_id": 33388658, "question_id": 33388573, "link": "https://stackoverflow.com/questions/33388573/valgrind-use-of-unitialized-value-of-size-8/33388658#33388658", "title": "Valgrind Use of unitialized value of size 8", "body": "<p><code>sizeof(dot)</code> gives size of pointer not sizeof string pointed to by pointer <code>dot</code> and <code>dot[i]</code> will lead to out of bound memory access.</p>\n"}, {"tags": [], "owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "is_accepted": false, "score": 0, "last_activity_date": 1446028650, "last_edit_date": 1495542217, "creation_date": 1446028650, "answer_id": 33388800, "question_id": 33388573, "link": "https://stackoverflow.com/questions/33388573/valgrind-use-of-unitialized-value-of-size-8/33388800#33388800", "title": "Valgrind Use of unitialized value of size 8", "body": "<ol>\n<li>You're using <a href=\"https://stackoverflow.com/q/9937181/3425536\"><code>sizeof</code> where you should use <code>strlen</code></a>.</li>\n<li>You're needlessly casting an <code>int</code> to <code>int</code>, twice.</li>\n<li>You're casting the result of <code>malloc</code>. <a href=\"https://stackoverflow.com/q/605845/3425536\">Don't</a>.</li>\n<li>You forgot to allocate enough memory for the null terminator.</li>\n</ol>\n"}], "owner": {"reputation": 115, "user_id": 1610834, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/51b0ad68b787ad16d4dda8ea0a257236?s=128&d=identicon&r=PG", "display_name": "user1610834", "link": "https://stackoverflow.com/users/1610834/user1610834"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2821, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1446036633, "creation_date": 1446028084, "last_edit_date": 1446036633, "question_id": 33388573, "link": "https://stackoverflow.com/questions/33388573/valgrind-use-of-unitialized-value-of-size-8", "title": "Valgrind Use of unitialized value of size 8", "body": "<p>I recently ran a full leak check with valgrind only to discover this error and \"Conditional jump or move depends on uninitialised value(s)\" it has been throwing. What am i doing wrong here? It keeps pointing to this function: </p>\n\n<pre><code>int tldlist_add(TLDList *tld, char *hostname, Date *d) {\n\n    if (date_compare(tld-&gt;begin, d) &gt; 0 || date_compare(tld-&gt;end, d) &lt; 0)\n        return 0;\n\n    char *dot = strrchr(hostname, '.') + 1;\n    int i = 0;\n    while (i &lt; sizeof(dot))\n    {\n        dot[i] = tolower(dot[i]);\n        i++;\n    }\n    char *temptld = (char *)malloc(sizeof(dot));\n    strcpy(temptld, dot);\n\n    tld-&gt;root = addnode(tld, temptld, tld-&gt;root);\n    tld-&gt;count++;\n    return 1;\n\n}\n</code></pre>\n\n<p>specifically at this line: <code>dot[i] = tolower(dot[i]);</code></p>\n\n<p>Any help would be greatly appreciated, thank you!</p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 969, "user_id": 2406872, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0d4899e8a37c73408c105c4912393a04?s=128&d=identicon&r=PG", "display_name": "Matheus208", "link": "https://stackoverflow.com/users/2406872/matheus208"}, "edited": false, "score": 0, "creation_date": 1446026966, "post_id": 33388018, "comment_id": 54568361, "body": "You got your types mixed up..."}], "answers": [{"comments": [{"owner": {"reputation": 484, "user_id": 2653926, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c9c6ea9309e11a1b41f5b86dababb3b7?s=128&d=identicon&r=PG", "display_name": "user2653926", "link": "https://stackoverflow.com/users/2653926/user2653926"}, "edited": false, "score": 0, "creation_date": 1446026965, "post_id": 33388085, "comment_id": 54568359, "body": "Why there was no type casting. I expected 10.000000"}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "reply_to_user": {"reputation": 484, "user_id": 2653926, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c9c6ea9309e11a1b41f5b86dababb3b7?s=128&d=identicon&r=PG", "display_name": "user2653926", "link": "https://stackoverflow.com/users/2653926/user2653926"}, "edited": false, "score": 3, "creation_date": 1446027026, "post_id": 33388085, "comment_id": 54568392, "body": "@user2653926 When would that happen? There is no way for <code>foo()</code> to know that you lied. You should be getting compiler warnings however, since you&#39;re calling <code>foo()</code> with an argument of the wrong type."}, {"owner": {"reputation": 484, "user_id": 2653926, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c9c6ea9309e11a1b41f5b86dababb3b7?s=128&d=identicon&r=PG", "display_name": "user2653926", "link": "https://stackoverflow.com/users/2653926/user2653926"}, "edited": false, "score": 0, "creation_date": 1446027247, "post_id": 33388085, "comment_id": 54568528, "body": "Sorry still dont get it."}, {"owner": {"reputation": 174, "user_id": 5413843, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lOVej.jpg?s=128&g=1", "display_name": "mattiash", "link": "https://stackoverflow.com/users/5413843/mattiash"}, "edited": false, "score": 0, "creation_date": 1446028123, "post_id": 33388085, "comment_id": 54569094, "body": "To start with you are sending an int into a function that takes a float. What compiler warnings/errors are you getting? Always try to hear what the compiler is saying about your code. So change the type of i to float and you are on your way to a better place..."}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 4, "last_activity_date": 1446027619, "last_edit_date": 1495540958, "creation_date": 1446026751, "answer_id": 33388085, "question_id": 33388018, "link": "https://stackoverflow.com/questions/33388018/output-of-pointer-code/33388085#33388085", "title": "Output of pointer code", "body": "<p>You are making <code>printf()</code> interpret the bits of an integer as if they were the bits of a float. This is <a href=\"https://stackoverflow.com/questions/14504148/what-can-happen-if-printf-is-called-with-a-wrong-format-string\">undefined behavior</a>.</p>\n\n<p>What result did you expect?</p>\n"}, {"tags": [], "owner": {"reputation": 634, "user_id": 3735245, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/a92a967d5a1f2efe4fba36f81ef5b536?s=128&d=identicon&r=PG&f=1", "display_name": "Rorschach", "link": "https://stackoverflow.com/users/3735245/rorschach"}, "is_accepted": false, "score": 1, "last_activity_date": 1446028010, "creation_date": 1446028010, "answer_id": 33388542, "question_id": 33388018, "link": "https://stackoverflow.com/questions/33388018/output-of-pointer-code/33388542#33388542", "title": "Output of pointer code", "body": "<p>First of all, when your code looks like it does in your question the line <code>*p = &amp;i;</code> doesn't do anything at all.</p>\n\n<p>Next - you are passing a pointer to your <code>int</code> variable to a function that expects <code>float</code>. Like @unwind mentioned in the comments there is no way for <code>foo()</code> to know that you lied.\nTypecasting is different thing from what you seem to consider it.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nvoid foo(float *);\nint main()\n{\n    int i = 10; //try this and see it fails, \n                //then switch this line with float i = 10; and try again\n    foo(&amp;i);\n}\nvoid foo(float *p)\n{\n    printf(\"%f\\n\", *p);\n}\n</code></pre>\n\n<p>EDIT> If you insist on having a typecast somewhere...</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nvoid foo(float *);\nint main()\n{\n    int i = 10;\n    float p = (float)i;\n    foo(&amp;p);\n    return 0;\n}\nvoid foo(float *p)\n{\n    printf(\"%f\\n\", *p);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1525070397, "post_id": 33388611, "comment_id": 87206399, "body": "The actual parameter has static type <code>float</code>.  Its runtime behavior is defined because of a strict aliasing rule violation.  But the problem is not with the variadic function call.  One could write <code>float x = *p;</code> and the problem would still be there."}], "tags": [], "owner": {"reputation": 51244, "user_id": 952747, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/86ebf3cf751f63acb38e763f7104a318?s=128&d=identicon&r=PG&f=1", "display_name": "masoud", "link": "https://stackoverflow.com/users/952747/masoud"}, "is_accepted": false, "score": 0, "last_activity_date": 1446028184, "creation_date": 1446028184, "answer_id": 33388611, "question_id": 33388018, "link": "https://stackoverflow.com/questions/33388018/output-of-pointer-code/33388611#33388611", "title": "Output of pointer code", "body": "<p><a href=\"http://en.cppreference.com/w/cpp/utility/variadic\" rel=\"nofollow\">Variadic functions</a> in C and C++ take variable number of arguments while they don't know type of entry arguments.</p>\n\n<p>In <a href=\"http://en.cppreference.com/w/cpp/io/c/fprintf\" rel=\"nofollow\"><code>printf</code></a> function, the first argument is a string which hopefully indicates the types of following arguments by <em>format specifiers</em>.</p>\n\n<p>In your code, your specifier indicates that the following argument is an float (<code>%f</code>), but you've passed an integer. Since all this type checking is happening in run-time and compiler knows nothing about it, there is no automatic casting.</p>\n\n<p>Your code invokes undefined behavior.</p>\n"}, {"tags": [], "owner": {"reputation": 147, "user_id": 5388419, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-9AP2x_r2rlg/AAAAAAAAAAI/AAAAAAAAACE/lImaY8j5u6c/photo.jpg?sz=128", "display_name": "Newaz Hossain", "link": "https://stackoverflow.com/users/5388419/newaz-hossain"}, "is_accepted": false, "score": 0, "last_activity_date": 1446028778, "creation_date": 1446028778, "answer_id": 33388843, "question_id": 33388018, "link": "https://stackoverflow.com/questions/33388018/output-of-pointer-code/33388843#33388843", "title": "Output of pointer code", "body": "<p>Try this one:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nvoid foo(int *);\nint main()\n{\n    int i = 10;\n    foo(&amp;i);\n}\nvoid foo(int *p)\n{\n    printf(\"%f\\n\",(float) *p);\n}\n</code></pre>\n"}], "owner": {"reputation": 484, "user_id": 2653926, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c9c6ea9309e11a1b41f5b86dababb3b7?s=128&d=identicon&r=PG", "display_name": "user2653926", "link": "https://stackoverflow.com/users/2653926/user2653926"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1966, "favorite_count": 0, "answer_count": 4, "score": -17, "last_activity_date": 1459534934, "creation_date": 1446026555, "last_edit_date": 1459534934, "question_id": 33388018, "link": "https://stackoverflow.com/questions/33388018/output-of-pointer-code", "title": "Output of pointer code", "body": "<p>Why is the output of the following C code 0.000000?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid foo(float *);\n\nint main()\n{\n    int i = 10, *p = &amp;i;\n    foo(&amp;i);\n}\n\nvoid foo(float *p)\n{\n    printf(\"%f\\n\", *p);\n}\n</code></pre>\n\n<p>Please explain your answer.</p>\n"}, {"tags": ["c", "pointers", "linked-list", "stack", "heap"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1446026936, "post_id": 33388005, "comment_id": 54568344, "body": "&quot; Is <code>current</code> accessing the linked list in heap memory?&quot;. Yes. That&#39;s how pointers work. A pointer stores the address of a memory location. In this case <code>current</code> is set to point to the same location as <code>head</code> is pointing to."}], "answers": [{"tags": [], "owner": {"reputation": 969, "user_id": 2406872, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0d4899e8a37c73408c105c4912393a04?s=128&d=identicon&r=PG", "display_name": "Matheus208", "link": "https://stackoverflow.com/users/2406872/matheus208"}, "is_accepted": false, "score": 0, "last_activity_date": 1446027090, "creation_date": 1446027090, "answer_id": 33388224, "question_id": 33388005, "link": "https://stackoverflow.com/questions/33388005/a-head-node-of-a-linked-list-is-passed-to-another-function-where-it-is-assigned/33388224#33388224", "title": "A head node of a linked list is passed to another function where it is assigned to a local node in the function. Why is there no error?", "body": "<p>A pointer is basically the address in memory that stores that variable's value.</p>\n\n<p>No matter what function you are using it from, if the variable is still in the heap, it can be accessed by that address.</p>\n\n<p>Since your node also refers to the other elements of the list using a pointer (i.e. an address), then you get the entire list, no matter where you accessing it from.</p>\n"}, {"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 1, "last_activity_date": 1446027167, "creation_date": 1446027167, "answer_id": 33388247, "question_id": 33388005, "link": "https://stackoverflow.com/questions/33388005/a-head-node-of-a-linked-list-is-passed-to-another-function-where-it-is-assigned/33388247#33388247", "title": "A head node of a linked list is passed to another function where it is assigned to a local node in the function. Why is there no error?", "body": "<p>The value of a pointer variable is the <em>address</em> of where it's pointing. This value can be copied and assigned to other variables, just like any other non-pointer variables.</p>\n\n<p>When you pass <code>a</code> to the <code>printlist</code> function, the pointer is copied to the local variable <code>head</code>, and in turn copied to the <code>current</code> variable. Now you have <em>three</em> pointers (<code>a</code> in the <code>main</code> function, and <code>head</code> and <code>current</code> in the <code>printlist</code> function), all pointing to the same location.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 4419360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4e247009bbe94bd7d62fb65761cc14b?s=128&d=identicon&r=PG&f=1", "display_name": "AdityaK", "link": "https://stackoverflow.com/users/4419360/adityak"}, "is_accepted": false, "score": 0, "last_activity_date": 1446027369, "creation_date": 1446027369, "answer_id": 33388307, "question_id": 33388005, "link": "https://stackoverflow.com/questions/33388005/a-head-node-of-a-linked-list-is-passed-to-another-function-where-it-is-assigned/33388307#33388307", "title": "A head node of a linked list is passed to another function where it is assigned to a local node in the function. Why is there no error?", "body": "<p>You are passing a pointer which is the address to the head of the link list. Inside the function you are assigning current node to the head pointer which is a location in heap. So you are able to traverse through it. </p>\n"}, {"tags": [], "owner": {"reputation": 3311, "user_id": 3405387, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VYA2r.png?s=128&g=1", "display_name": "Lukas", "link": "https://stackoverflow.com/users/3405387/lukas"}, "is_accepted": false, "score": 1, "last_activity_date": 1446028737, "creation_date": 1446028737, "answer_id": 33388834, "question_id": 33388005, "link": "https://stackoverflow.com/questions/33388005/a-head-node-of-a-linked-list-is-passed-to-another-function-where-it-is-assigned/33388834#33388834", "title": "A head node of a linked list is passed to another function where it is assigned to a local node in the function. Why is there no error?", "body": "<p>This is pretty straightforward, current is a pointer and you gave it whatever was stored in 'a' which is address of a head node. It doesn't matter that current is declared locally and of course you don't need to use malloc since you're not creating a new node. the variable current itself will be released you leave the function. To explain it in the code:</p>\n\n<pre><code>void printlist(struct node* head)\n{\n    printf(\"%p\\n\", head); //head has the memory address of first node\n    struct node* current = head; //you created a pointer (struct node pointer) \n    //and gave it the address of the first node (you didn't create a new node\n    //so there is no need for malloc)\n    //size of current is size of a pointer and not a struct node\n    printf(\"current: %p\\n\", current); //this will print that same address\n    // which is first node address \n    while (current != NULL)\n    {\n        printf(\"%d \",current-&gt;data);\n        //notice you're not using 'current.next' which would have been \n        //the case if current was local node. instead you're accessing head.\n        current = current-&gt;next; \n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 347, "user_id": 2311285, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/39c912448eda8a55661d0c81d898cb24?s=128&d=identicon&r=PG", "display_name": "user2311285", "link": "https://stackoverflow.com/users/2311285/user2311285"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 33388247, "answer_count": 4, "score": 0, "last_activity_date": 1446028737, "creation_date": 1446026514, "question_id": 33388005, "link": "https://stackoverflow.com/questions/33388005/a-head-node-of-a-linked-list-is-passed-to-another-function-where-it-is-assigned", "title": "A head node of a linked list is passed to another function where it is assigned to a local node in the function. Why is there no error?", "body": "<p>\"a\"is the head node of a linked list. The memory for all the nodes is allocated thru malloc. After building the list (10 20 30 40) I am passing it to another function where I am assigning it to a node \"current\" which is declared locally and no malloc is done. Yet I am able to traverse the entire list correctly. Is \"current\" accessing the linked list in heap memory?</p>\n\n<pre><code>void main()\n{\n    struct node* a = (struct node*) malloc (sizeof(struct node));\n    struct node* temp = (struct node*) malloc (sizeof(struct node));\n\n\n    a-&gt;data = 10;\n    temp-&gt;data = 20;\n    a-&gt;next = temp;\n\n    temp = (struct node*) malloc (sizeof(struct node));\n    temp-&gt;data =25;\n\n\n    temp = (struct node*) malloc (sizeof(struct node));\n    temp-&gt;data = 30;\n    a-&gt;next-&gt;next = temp;\n\n\n    temp = (struct node*) malloc (sizeof(struct node));\n    temp-&gt;data = 40;\n    a-&gt;next-&gt;next-&gt;next = temp;\n\n    a-&gt;next-&gt;next-&gt;next-&gt;next = NULL;\n\n    printlist(a);\n\n}\n\n\nvoid printlist(struct node* head)\n{\n    struct node* current = head;\n    while (current != NULL)\n    {\n        printf(\"%d \",current-&gt;data);\n        current = current-&gt;next;\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "stack", "opcode", "vm-implementation"], "answers": [{"comments": [{"owner": {"reputation": 3273, "user_id": 1539865, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/dre6U.png?s=128&g=1", "display_name": "Tarasov", "link": "https://stackoverflow.com/users/1539865/tarasov"}, "edited": false, "score": 0, "creation_date": 1446026764, "post_id": 33387902, "comment_id": 54568236, "body": "what is the value? i dont understand"}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "reply_to_user": {"reputation": 3273, "user_id": 1539865, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/dre6U.png?s=128&g=1", "display_name": "Tarasov", "link": "https://stackoverflow.com/users/1539865/tarasov"}, "edited": false, "score": 0, "creation_date": 1446026859, "post_id": 33387902, "comment_id": 54568292, "body": "@Tarasov Sorry, got fooled by your code. :) Now extracts both parts from <code>IR</code>."}, {"owner": {"reputation": 3273, "user_id": 1539865, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/dre6U.png?s=128&g=1", "display_name": "Tarasov", "link": "https://stackoverflow.com/users/1539865/tarasov"}, "edited": false, "score": 0, "creation_date": 1446027148, "post_id": 33387902, "comment_id": 54568474, "body": "thanks it work...you show me a better way...I want to make 2^24 and calculate them..but your way is better :D but you know what is with negative values how -2 or -3 ? :/"}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "reply_to_user": {"reputation": 3273, "user_id": 1539865, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/dre6U.png?s=128&g=1", "display_name": "Tarasov", "link": "https://stackoverflow.com/users/1539865/tarasov"}, "edited": false, "score": 0, "creation_date": 1446027252, "post_id": 33387902, "comment_id": 54568533, "body": "@Tarasov You&#39;re going to have to work a bit to get negative values to work, you need to decide if the immediate is signed or unsigned. If it&#39;s signed, you need to sign-extend the top bit (basically copy bit 23 into bits 24..31)."}, {"owner": {"reputation": 3273, "user_id": 1539865, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/dre6U.png?s=128&g=1", "display_name": "Tarasov", "link": "https://stackoverflow.com/users/1539865/tarasov"}, "edited": false, "score": 0, "creation_date": 1446032125, "post_id": 33387902, "comment_id": 54571579, "body": "look @ my update ..how i can push negative values... :("}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": true, "score": 3, "last_activity_date": 1446026842, "last_edit_date": 1446026842, "creation_date": 1446026232, "answer_id": 33387902, "question_id": 33387875, "link": "https://stackoverflow.com/questions/33387875/how-i-get-the-value-from-the-immediate-part-of-a-32-bit-sequence-in-c/33387902#33387902", "title": "How I get the value from the Immediate part of a 32 Bit sequence in C?", "body": "<p>Just use a bitwise <code>AND</code> to mask out the lower 24 bits, then use it in the <code>case</code>:</p>\n\n<pre><code>const uint8_t opcode = (IR &gt;&gt; 24) &amp; 0xff;\nconst uint32_t imm = (IR &amp; 0xffffff);\nswitch(opcode)\n{\n  case PUSHC:\n    stack[sp] = imm;\n    break;\n}\n</code></pre>\n\n<p>I shifted around the extraction of the opcode to make the <code>case</code> easier to read.</p>\n"}], "owner": {"reputation": 3273, "user_id": 1539865, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/dre6U.png?s=128&g=1", "display_name": "Tarasov", "link": "https://stackoverflow.com/users/1539865/tarasov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 482, "favorite_count": 0, "accepted_answer_id": 33387902, "answer_count": 1, "score": 1, "last_activity_date": 1529425888, "creation_date": 1446026166, "last_edit_date": 1529425888, "question_id": 33387875, "link": "https://stackoverflow.com/questions/33387875/how-i-get-the-value-from-the-immediate-part-of-a-32-bit-sequence-in-c", "title": "How I get the value from the Immediate part of a 32 Bit sequence in C?", "body": "<p>I built a virtual machine in C. And for this I have the Instruction </p>\n\n<pre><code>pushc &lt;const&gt;\n</code></pre>\n\n<p>I saved the command and the value in 32 Bit. The First 8 Bit are for the command and the rest for the value. </p>\n\n<p><strong>8 Bit -> Opcode</strong>\n<strong>24 Bit -> Immediate value</strong></p>\n\n<p>For this I make a macro </p>\n\n<pre><code>#define PUSHC 1 //1 is for the command value in the Opcode\n#define IMMEDIATE(x) ((x) &amp; 0x00FFFFFF)\n</code></pre>\n\n<p><strong>UPDATE:</strong> </p>\n\n<pre><code>**#define SIGN_EXTEND(i) ((i) &amp; 0x00800000 ? (i) | 0xFF000000 : (i))** \n</code></pre>\n\n<p>Then I load for testing this in a unsigned int array:</p>\n\n<p><strong>Update:</strong></p>\n\n<pre><code>unsigned int code[] = { (PUSHC &lt;&lt; 24 | IMMEDIATE(2)),\n                        (PUSHC &lt;&lt; 24 | SIGN_EXTEND(-2)),\n                         ...};\n</code></pre>\n\n<p>later in my code I want to get the Immediate value of the pushc command and push this value to a stack...</p>\n\n<p>I get every Instruction (IR) from the array and built my stack. </p>\n\n<p><strong>UPDATE:</strong></p>\n\n<pre><code> void exec(unsigned int IR){\n\n      unsigned int opcode = (IR &gt;&gt; 24) &amp; 0xff;\n      unsigned int imm = (IR &amp; 0xffffff);\n\n     switch(opcode){\n       case PUSHC: {\n         stack[sp] = imm;\n         sp = sp + 1;\n         break;\n}\n}\n\n    ...\n\n    }\n    }\n</code></pre>\n"}, {"tags": ["c#", "c++", "c", "parameter-passing"], "comments": [{"owner": {"reputation": 4622, "user_id": 996886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lSuAl.png?s=128&g=1", "display_name": "melak47", "link": "https://stackoverflow.com/users/996886/melak47"}, "edited": false, "score": 1, "creation_date": 1446026111, "post_id": 33387788, "comment_id": 54567811, "body": "<code>Bitmap^ in_image</code> looks like he&#39;s already using either C++/CLI or C++/CX"}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1446026622, "post_id": 33387788, "comment_id": 54568152, "body": "That&#39;s not C++, consider removing the tag."}], "owner": {"reputation": 33, "user_id": 5426414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d61c3b49c9319927c2dc6ef8c3eacc09?s=128&d=identicon&r=PG&f=1", "display_name": "Balint", "link": "https://stackoverflow.com/users/5426414/balint"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 122, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1446025903, "creation_date": 1446025903, "question_id": 33387788, "link": "https://stackoverflow.com/questions/33387788/parameter-passing-c-c-c", "title": "parameter passing c -&gt; c++ -&gt; c#", "body": "<p>I want to use an extern c function in a c# application through a c++ wrapper.\nMy code is wrong, and I don't know where is the problem.</p>\n\n<p>The extern c function:</p>\n\n<pre><code>extern \"C\" {\nint __cdecl get_minutiae(minutiae **, int **, int **, int **,\n                 int **, int **, int *, int *,\n                 unsigned char **, int *, int *, int *,\n                 unsigned char *, const int, const int,\n                 const int, const double, const lfsparms *);\n</code></pre>\n\n<p>The c++ function:</p>\n\n<pre><code>void DetectMinutiae::GetMaps(Bitmap ^in_image, int in_pixels_per_inch,\nint* quality_map,int map_height,int map_width){\n...\nget_minutiae(&amp;minutiae_out, &amp;quality_map, &amp;direction_map,\n    &amp;low_contrast_map, &amp;low_flow_map, &amp;high_curve_map,\n    &amp;map_width, &amp;map_height, &amp;bdata, &amp;bw, &amp;bh, &amp;bd,\n    image_data, image-&gt;Width, image-&gt;Height, image_depth, ippmm, &amp;actual_lfsparms);}\n</code></pre>\n\n<p>From this function I only need the quality_map, map_height, map_width parameters.</p>\n\n<p>The c# side:</p>\n\n<pre><code>IntPtr qualityMap_pointer;\nint mapp_Height;\nint map_Width;\n\nDetectMinutiae.GetMaps(FingerPrint, 500, qualityMap_pointer, mapp_Height,map_Width);\n</code></pre>\n\n<p><strong>Questions:</strong></p>\n\n<ol>\n<li>Can I forward the c++ function parameters directly to the c\nfunction parameters, like in the code above? </li>\n<li>How should I call the c++ function from the c# code?</li>\n</ol>\n"}, {"tags": ["c", "data-structures", "tree", "binary-tree"], "comments": [{"owner": {"reputation": 4400, "user_id": 681444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccf4662e1bc928723d74099d0b51df24?s=128&d=identicon&r=PG&f=1", "display_name": "racraman", "link": "https://stackoverflow.com/users/681444/racraman"}, "edited": false, "score": 0, "creation_date": 1446026294, "post_id": 33387710, "comment_id": 54567925, "body": "The code is great for traversing (i.e.. reading) the tree, but watch out when deleting - you have &quot;free(root)&quot; followed by &quot;delete_tree(root-&gt;right);&quot;, so you&#39;re accessing &quot;root-&gt;right&quot; AFTER deleting &quot;root&quot;."}, {"owner": {"reputation": 4993, "user_id": 885605, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c16c5ec313530f501f11c809ee6c8473?s=128&d=identicon&r=PG", "display_name": "Andreas Grapentin", "link": "https://stackoverflow.com/users/885605/andreas-grapentin"}, "edited": false, "score": 0, "creation_date": 1446026412, "post_id": 33387710, "comment_id": 54567998, "body": "what did you expect <code>delete_tree(root-&gt;right)</code> to do, if not delete the right subtree?"}, {"owner": {"reputation": 1559, "user_id": 4339943, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/cF512.jpg?s=128&g=1", "display_name": "Amanshu Kataria", "link": "https://stackoverflow.com/users/4339943/amanshu-kataria"}, "edited": false, "score": 0, "creation_date": 1446026623, "post_id": 33387710, "comment_id": 54568153, "body": "I agree with what you guys said but what I&#39;m trying to ask it that once <code>2</code> is freed, it should loose all its data, which ,means it should also loose pointer to right child as well which is <code>5</code>, but even after freeing <code>2</code> it is still able to access <code>5</code>, how?"}], "answers": [{"comments": [{"owner": {"reputation": 1559, "user_id": 4339943, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/cF512.jpg?s=128&g=1", "display_name": "Amanshu Kataria", "link": "https://stackoverflow.com/users/4339943/amanshu-kataria"}, "edited": false, "score": 0, "creation_date": 1446026146, "post_id": 33387811, "comment_id": 54567828, "body": "I understood what you answered but according the below algo first it should free(root) which is <code>2</code> and after that it should move towards 5 but once <code>2</code> is free how it can move towards 5 because the data of 2 is freed.     <code>delete_tree(root-&gt;left);      printf(&quot;Deleting %d node.\\n&quot;,root-&gt;data);      free(root);      delete_tree(root-&gt;right);</code>"}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "reply_to_user": {"reputation": 1559, "user_id": 4339943, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/cF512.jpg?s=128&g=1", "display_name": "Amanshu Kataria", "link": "https://stackoverflow.com/users/4339943/amanshu-kataria"}, "edited": false, "score": 0, "creation_date": 1446026356, "post_id": 33387811, "comment_id": 54567964, "body": "I think that <code>free(root)</code> is not placed correctly because it would free the root and loose track of right sub-tree. It should be <code>delete_tree(root-&gt;left);delete_tree(root-&gt;right);printf(&quot;Del&zwnj;&#8203;eting %d node.\\n&quot;,root-&gt;data); free(root); </code>"}, {"owner": {"reputation": 1559, "user_id": 4339943, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/cF512.jpg?s=128&g=1", "display_name": "Amanshu Kataria", "link": "https://stackoverflow.com/users/4339943/amanshu-kataria"}, "edited": false, "score": 0, "creation_date": 1446026737, "post_id": 33387811, "comment_id": 54568225, "body": "But if we use that then it would be Postorder traversal but here I&#39;m talking about Inorder traversal."}], "tags": [], "owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "is_accepted": false, "score": 1, "last_activity_date": 1446026174, "last_edit_date": 1446026174, "creation_date": 1446025985, "answer_id": 33387811, "question_id": 33387710, "link": "https://stackoverflow.com/questions/33387710/deleting-a-binary-tree-using-inorder-traversal/33387811#33387811", "title": "Deleting a binary tree using inorder traversal", "body": "<p>The output it shows is correct , because in inorder it first traverse <code>left sub-tree</code> then <code>root</code> and then <code>right sub-tree</code>.</p>\n\n<p>You won't get <code>4 2 1</code> because <code>4</code> is left sub-tree then it goes to <code>root</code> that is <code>2</code> and then to right sub-tree of <code>2</code>. </p>\n\n<p>When it goes too right sub-tree root becomes <code>5</code> and its left sub-tree is <code>6</code>.Then <code>5</code> and then to right sub-tree of <code>5</code> that is <code>7</code>.</p>\n\n<p><code>1</code> is the root so without traversing left sub-tree it won't go to <code>1</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 1559, "user_id": 4339943, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/cF512.jpg?s=128&g=1", "display_name": "Amanshu Kataria", "link": "https://stackoverflow.com/users/4339943/amanshu-kataria"}, "edited": false, "score": 0, "creation_date": 1446026545, "post_id": 33387822, "comment_id": 54568089, "body": "I agree with your answer but what I&#39;m trying to ask it that once <code>2</code> is freed, it should loose all its data, which ,means it should also loose pointer to right child which is <code>5</code>, but even after freeing <code>2</code> it is still able to access <code>5</code>, how?"}, {"owner": {"reputation": 1840, "user_id": 2952011, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/16d6c7bf2e0842791df8ec9b05758bfb?s=128&d=identicon&r=PG&f=1", "display_name": "Mukit09", "link": "https://stackoverflow.com/users/2952011/mukit09"}, "reply_to_user": {"reputation": 1559, "user_id": 4339943, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/cF512.jpg?s=128&g=1", "display_name": "Amanshu Kataria", "link": "https://stackoverflow.com/users/4339943/amanshu-kataria"}, "edited": false, "score": 0, "creation_date": 1446030459, "post_id": 33387822, "comment_id": 54570552, "body": "You can save address of right child of <b>2</b> before deleting <b>2</b>. It should be quite easy. :) @AmanshuKataria"}, {"owner": {"reputation": 1559, "user_id": 4339943, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/cF512.jpg?s=128&g=1", "display_name": "Amanshu Kataria", "link": "https://stackoverflow.com/users/4339943/amanshu-kataria"}, "edited": false, "score": 0, "creation_date": 1446031502, "post_id": 33387822, "comment_id": 54571191, "body": "Ok, that would also work the same way, but my question is how is this working? :D Too confusing. LOL"}, {"owner": {"reputation": 619, "user_id": 1666733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d588c62cff899e45a7d9fe926b1a0c63?s=128&d=identicon&r=PG", "display_name": "arduic", "link": "https://stackoverflow.com/users/1666733/arduic"}, "edited": false, "score": 0, "creation_date": 1446034965, "post_id": 33387822, "comment_id": 54573367, "body": "To answer his actual question of why does it work. &quot;The C library function void free(void *ptr) deallocates the memory previously allocated by a call to calloc, malloc, or realloc.&quot; Now I could be wrong in saying this but I believe that free does NOT actually clear the value of the pointer normally that is up to the user. As such it is common practice to set a pointer to 0 or VOID once freed. Your code doesn&#39;t do this which means you still have access to where root is pointing. Free has told the OS it can be used again but you still have access to it. This code is very dangerous."}, {"owner": {"reputation": 1559, "user_id": 4339943, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/cF512.jpg?s=128&g=1", "display_name": "Amanshu Kataria", "link": "https://stackoverflow.com/users/4339943/amanshu-kataria"}, "reply_to_user": {"reputation": 619, "user_id": 1666733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d588c62cff899e45a7d9fe926b1a0c63?s=128&d=identicon&r=PG", "display_name": "arduic", "link": "https://stackoverflow.com/users/1666733/arduic"}, "edited": false, "score": 0, "creation_date": 1446042638, "post_id": 33387822, "comment_id": 54578884, "body": "@arduic haha thank god! at least someone understood my question. I finally got answer to my question. You should post it as answer."}, {"owner": {"reputation": 619, "user_id": 1666733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d588c62cff899e45a7d9fe926b1a0c63?s=128&d=identicon&r=PG", "display_name": "arduic", "link": "https://stackoverflow.com/users/1666733/arduic"}, "edited": false, "score": 0, "creation_date": 1446043820, "post_id": 33387822, "comment_id": 54579792, "body": "Glad you liked it I posted the answer below accept if you are happy with it."}], "tags": [], "owner": {"reputation": 1840, "user_id": 2952011, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/16d6c7bf2e0842791df8ec9b05758bfb?s=128&d=identicon&r=PG&f=1", "display_name": "Mukit09", "link": "https://stackoverflow.com/users/2952011/mukit09"}, "is_accepted": false, "score": 1, "last_activity_date": 1446026012, "creation_date": 1446026012, "answer_id": 33387822, "question_id": 33387710, "link": "https://stackoverflow.com/questions/33387710/deleting-a-binary-tree-using-inorder-traversal/33387822#33387822", "title": "Deleting a binary tree using inorder traversal", "body": "<p>To traverse a binary tree in Inorder, following operations are carried-out </p>\n\n<pre><code>(i) Traverse the left most subtree starting at the left external node, \n(ii) Visit the root, and \n(iii) Traverse the right subtree starting at the left external node.\n</code></pre>\n\n<p>Now to delete the nodes, </p>\n\n<pre><code>(i) Traverse the left most subtree starting at the left external node,\n(ii) delete the root, and \n(iii) Traverse the right subtree starting at the left external node.\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 4419360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4e247009bbe94bd7d62fb65761cc14b?s=128&d=identicon&r=PG&f=1", "display_name": "AdityaK", "link": "https://stackoverflow.com/users/4419360/adityak"}, "is_accepted": false, "score": 1, "last_activity_date": 1446026659, "creation_date": 1446026659, "answer_id": 33388047, "question_id": 33387710, "link": "https://stackoverflow.com/questions/33387710/deleting-a-binary-tree-using-inorder-traversal/33388047#33388047", "title": "Deleting a binary tree using inorder traversal", "body": "<pre><code>void delete_tree(tree *root)\n{\n    if(root==NULL)\n        return;\n    delete_tree(root-&gt;left);\n    printf(\"Deleting %d node.\\n\",root-&gt;data);\n    free(root);\n    delete_tree(root-&gt;right);\n}\n</code></pre>\n\n<p>It is an inorder traversal where  pointer will first point to left most node, then root and then right most node. Since 4 is the left most node so it has been printed then it traverse to 2 . After which the right most node which is 5. Since 5 has two nodes attached to it. It will again iterate to left most node which is 6. So it printed as 4,2,6,5,7,3,9,8</p>\n"}, {"tags": [], "owner": {"reputation": 619, "user_id": 1666733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d588c62cff899e45a7d9fe926b1a0c63?s=128&d=identicon&r=PG", "display_name": "arduic", "link": "https://stackoverflow.com/users/1666733/arduic"}, "is_accepted": true, "score": 1, "last_activity_date": 1446043771, "creation_date": 1446043771, "answer_id": 33394283, "question_id": 33387710, "link": "https://stackoverflow.com/questions/33387710/deleting-a-binary-tree-using-inorder-traversal/33394283#33394283", "title": "Deleting a binary tree using inorder traversal", "body": "<p>I originally posted this as a comment but it seems the guy asking the question was happy with my answer so I will post it in a bit more detail here.</p>\n\n<p>When calling free it is important to note EXACTLY what free actually does otherwise things like this can happen.</p>\n\n<blockquote>\n  <p>The C library function void free(void *ptr) deallocates the memory previously allocated by a call to calloc, malloc, or realloc.</p>\n</blockquote>\n\n<p>Note that the free function does NOT change the value of the pointer it simply gives the memory back to OS so that it can be allocated to another program. As such it is typical for people to \"clear\" the pointer after calling free to avoid accessing memory that another program has changed.</p>\n\n<pre><code>root = VOID;\n</code></pre>\n\n<p>The code above does not clear the root node after freeing it as such the memory is still all there. As such the C code is able to go to that memory location (which the OS has already received) and modify it. This is EXTREMELY dangerous behaviour because the OS can give this memory to another program and then your program could change causing obviously unexpected behaviour. The simple fix for this would be to remove the right node before freeing the root node.</p>\n"}], "owner": {"reputation": 1559, "user_id": 4339943, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/cF512.jpg?s=128&g=1", "display_name": "Amanshu Kataria", "link": "https://stackoverflow.com/users/4339943/amanshu-kataria"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1170, "favorite_count": 0, "accepted_answer_id": 33394283, "answer_count": 4, "score": 0, "last_activity_date": 1446054382, "creation_date": 1446025664, "last_edit_date": 1446054382, "question_id": 33387710, "link": "https://stackoverflow.com/questions/33387710/deleting-a-binary-tree-using-inorder-traversal", "title": "Deleting a binary tree using inorder traversal", "body": "<p>I was learning how to delete a binary tree using Postorder traversal. I understand that to delete a node, first we need to delete its child node and then the node itself, so Postorder traversal is the best fit to delete a binary tree. I thought of doing the same using Inorder traversal, everything works fine but I don't understand how the below code works?<br></p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;malloc.h&gt;\n\nstruct b_tree{\n    int data;\n    struct b_tree *left,*right;\n};\n\ntypedef struct b_tree tree;\n\ntree* create_node(int data)\n{\n    struct b_tree* new_node=(tree*)malloc(sizeof(tree));\n    new_node-&gt;data=data;\n    new_node-&gt;left=NULL;\n    new_node-&gt;right=NULL;\n    return new_node;\n}\n\nvoid delete_tree(tree *root)\n{\n    if(root==NULL)\n        return;\n    delete_tree(root-&gt;left);\n    printf(\"Deleting %d node.\\n\",root-&gt;data);\n    free(root);\n    delete_tree(root-&gt;right);\n}\n\nint main()\n{\n    tree *root=NULL;\n    root=create_node(1);\n    root-&gt;left=create_node(2);\n    root-&gt;right=create_node(3);\n    root-&gt;left-&gt;left=create_node(4);\n    root-&gt;left-&gt;right=create_node(5);\n    root-&gt;left-&gt;right-&gt;left=create_node(6);\n    root-&gt;left-&gt;right-&gt;right=create_node(7);\n    root-&gt;right-&gt;right=create_node(8);\n    root-&gt;right-&gt;right-&gt;left=create_node(9);\n    delete_tree(root);\n    root=NULL;\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/MbHU2.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MbHU2.jpg\" alt=\"Tree\"></a><br>\n<strong>According to Inorder traversal first node to be deleted is <code>4</code> and after that <code>2</code>, but once we freed <code>2</code> it should loose all it's data, means it should not retain the pointer to right node as well which is <code>5</code>, but even after <code>2</code> is freed its left child <code>5</code> is still traversed but it should not happen because node <code>2</code> is already freed.<br> <br></strong>\nThe output of the above code is:<br>\n<a href=\"https://i.stack.imgur.com/pFIcD.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pFIcD.jpg\" alt=\"Output\"></a><br><br>\nI was expecting the output to be in the following order of nodes: <code>4 2 1</code>.<br><br>\nI don't understand how all this is working. Please correct me if I'm wrong.</p>\n"}, {"tags": ["c", "numerical-methods"], "comments": [{"owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 3, "creation_date": 1446022262, "post_id": 33386361, "comment_id": 54565357, "body": "What is wrong with sin(-180) being 0.000000000528? You are working with floats and pi is an irrational number, so you kinda can&#39;t get extreme precision with calculations. You already have 9 decimals precision there for that value."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1446022792, "post_id": 33386361, "comment_id": 54565659, "body": "You shouldn&#39;t have abandoned your previous attempt with loops for this tangle of variables. Instead you should have made it work and reused it."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1446038879, "post_id": 33386361, "comment_id": 54576023, "body": "Suggest reversing computation - start with smallest fraction.  E.g. <a href=\"http://stackoverflow.com/a/19958610/2410359\">stackoverflow.com/a/19958610/2410359</a>"}, {"owner": {"reputation": 11, "user_id": 5493616, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ovice.jpg?s=128&g=1", "display_name": "Cassandra Nocturne", "link": "https://stackoverflow.com/users/5493616/cassandra-nocturne"}, "edited": false, "score": 0, "creation_date": 1446114768, "post_id": 33386361, "comment_id": 54613658, "body": "Correction : sin x  up to ten terms : x - x^3/3! + x^5/5! - x^7/7! and so on and so forth (pattern: exponent number + 2 = next factorial [ex: x = x^1 then 1 + 2 = 3 then next one : x^3/3!])"}, {"owner": {"reputation": 21073, "user_id": 3088138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/114f33fdece969de35d41038fb0eeb46?s=128&d=identicon&r=PG&f=1", "display_name": "Lutz Lehmann", "link": "https://stackoverflow.com/users/3088138/lutz-lehmann"}, "edited": false, "score": 1, "creation_date": 1446123666, "post_id": 33386361, "comment_id": 54619494, "body": "Please add or link the exact task description, any latin based language should be sufficient to divine the goals and imposed descriptions. At the moment it is an enigma what is expected of the code."}, {"owner": {"reputation": 21073, "user_id": 3088138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/114f33fdece969de35d41038fb0eeb46?s=128&d=identicon&r=PG&f=1", "display_name": "Lutz Lehmann", "link": "https://stackoverflow.com/users/3088138/lutz-lehmann"}, "edited": false, "score": 0, "creation_date": 1446125016, "post_id": 33386361, "comment_id": 54620471, "body": "At least reduce the recursive computations to something like <code>p0=ang; p1=ang*ang*p0; p2=ang*ang*p1; p3=ang*ang*p2;... fac1=2*3; fac2 = 4*5*fac1; fac3=6*7*fac2;...</code>, this reduces the code length and could reduce the run time."}, {"owner": {"reputation": 21073, "user_id": 3088138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/114f33fdece969de35d41038fb0eeb46?s=128&d=identicon&r=PG&f=1", "display_name": "Lutz Lehmann", "link": "https://stackoverflow.com/users/3088138/lutz-lehmann"}, "edited": false, "score": 0, "creation_date": 1446125227, "post_id": 33386361, "comment_id": 54620618, "body": "In your task description I see no demand that powers and factorials be explicitly present in the computation. Is there more to the restrictions than stdio.h and main()?"}, {"owner": {"reputation": 11, "user_id": 5493616, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ovice.jpg?s=128&g=1", "display_name": "Cassandra Nocturne", "link": "https://stackoverflow.com/users/5493616/cassandra-nocturne"}, "edited": false, "score": 0, "creation_date": 1446125348, "post_id": 33386361, "comment_id": 54620719, "body": "Well, that could work. Thanks for the advice, sweetie. But in what manner of the code?"}, {"owner": {"reputation": 11, "user_id": 5493616, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ovice.jpg?s=128&g=1", "display_name": "Cassandra Nocturne", "link": "https://stackoverflow.com/users/5493616/cassandra-nocturne"}, "edited": false, "score": 0, "creation_date": 1446125757, "post_id": 33386361, "comment_id": 54621033, "body": "Well other restrictions include: * output of the program is a tabular list of values of the angles in both    degrees and radian units, and the corresponding cosine and sine of the angles * no input *mathematical expressions \uf0a7 conditional control structure \uf0a7 counters \uf0a7 accumulators, and \uf0a7 loop control structure"}, {"owner": {"reputation": 21073, "user_id": 3088138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/114f33fdece969de35d41038fb0eeb46?s=128&d=identicon&r=PG&f=1", "display_name": "Lutz Lehmann", "link": "https://stackoverflow.com/users/3088138/lutz-lehmann"}, "edited": false, "score": 1, "creation_date": 1446126010, "post_id": 33386361, "comment_id": 54621242, "body": "This still does not exclude any of the proposed solutions."}, {"owner": {"reputation": 11, "user_id": 5493616, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ovice.jpg?s=128&g=1", "display_name": "Cassandra Nocturne", "link": "https://stackoverflow.com/users/5493616/cassandra-nocturne"}, "edited": false, "score": 0, "creation_date": 1446126512, "post_id": 33386361, "comment_id": 54621649, "body": "Well, that&#39;s one way to say that. I just need this to be solved quickly as possible so I can do the cosine code."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1446126524, "post_id": 33386361, "comment_id": 54621658, "body": "Many answers consisting of minutes to hours go into answering the post.  Adding additional restrictions, fundamentally changing the question is poor form.  Better to review, learn and accept an answer. Then post another question with the additional restrictions."}, {"owner": {"reputation": 11, "user_id": 5493616, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ovice.jpg?s=128&g=1", "display_name": "Cassandra Nocturne", "link": "https://stackoverflow.com/users/5493616/cassandra-nocturne"}, "reply_to_user": {"reputation": 21073, "user_id": 3088138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/114f33fdece969de35d41038fb0eeb46?s=128&d=identicon&r=PG&f=1", "display_name": "Lutz Lehmann", "link": "https://stackoverflow.com/users/3088138/lutz-lehmann"}, "edited": false, "score": 0, "creation_date": 1446126849, "post_id": 33386361, "comment_id": 54621938, "body": "@LutzL                    <code>p0 = angle_radians</code> \t\t<code>p1 = angle_radians * angle_radians * p0; </code> \t\t<code>p2 = angle_radians* angle_radians * p1;</code> \t\t&#39;p3 = angle_radians* angle_radians * p2;` \t\t&#39;p4 = angle_radians* angle_radians * p3;` \t\t<code>p5 = angle_radians* angle_radians * p4; </code> \t\t<code>p6 = angle_radians* angle_radians * p5;</code> \t\t<code>p7 = angle_radians* angle_radians * p6; </code> \t\t<code>p8 = angle_radians* angle_radians * p7; </code> \t\t<code>p9 = angle_radians* angle_radians * p8;</code> `\t\t<code>p10 = angle_radians* angle_radians * p9;</code>"}, {"owner": {"reputation": 11, "user_id": 5493616, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ovice.jpg?s=128&g=1", "display_name": "Cassandra Nocturne", "link": "https://stackoverflow.com/users/5493616/cassandra-nocturne"}, "reply_to_user": {"reputation": 21073, "user_id": 3088138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/114f33fdece969de35d41038fb0eeb46?s=128&d=identicon&r=PG&f=1", "display_name": "Lutz Lehmann", "link": "https://stackoverflow.com/users/3088138/lutz-lehmann"}, "edited": false, "score": 0, "creation_date": 1446127117, "post_id": 33386361, "comment_id": 54622160, "body": "@LutzL Not the mention the other one worked quite well. Thanks."}, {"owner": {"reputation": 11, "user_id": 5493616, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ovice.jpg?s=128&g=1", "display_name": "Cassandra Nocturne", "link": "https://stackoverflow.com/users/5493616/cassandra-nocturne"}, "edited": false, "score": 0, "creation_date": 1446127880, "post_id": 33386361, "comment_id": 54622817, "body": "printf(&quot;x(degrees)\\t  x(radians)\\t\\t  sin x\\t\\t&quot;); Also need help regarding this one ---- the results can&#39;t line up against the words."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1446781157, "post_id": 33386361, "comment_id": 54897277, "body": "The most recent edit had nothing to do with the post - rolled back to most recent applicable post."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5493616, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ovice.jpg?s=128&g=1", "display_name": "Cassandra Nocturne", "link": "https://stackoverflow.com/users/5493616/cassandra-nocturne"}, "edited": false, "score": 0, "creation_date": 1446023603, "post_id": 33386523, "comment_id": 54566182, "body": "Thank you for pointing that out. Now it&#39;s : &#39; for(f1=1;f1==1;f1--){ &#39; \t\t\t&#39; fac1*=f1;&#39; \t\t} \t\tfor(f2=3;f2==1;f2--){ \t\t\tfac1*=f2; \t\t&#39;}&#39; \t\t&#39;for(f3=5;f3==1;f3--){&#39; \t\t\t&#39;fac1*=f3;&#39; \t\t&#39;}&#39; \t\tfor(f4=7;f4==1;f4--){ \t\t\tfac1*=f4; \t\t} \t\tfor(f5=9;f5==1;f5--){ \t\t\tfac1*=f5; \t\t} \t\tfor(f6=11;f6==1;f6--){ \t\t\tfac1*=f6; \t\t} \t\tfor(f7=13;f7==1;f7--){ \t\t\tfac1*=f7; \t\t} \t\tfor(f8=15;f8==1;f8--){ \t\t\tfac1*=f8; \t\t} \t\tfor(f9=17;f9==1;f9--){ \t\t\tfac1*=f9; \t\t} \t\tfor(f10=19;f10==1;f10--){ \t\t\tfac1*=f10; \t\t}&#39;"}, {"owner": {"reputation": 1840, "user_id": 2952011, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/16d6c7bf2e0842791df8ec9b05758bfb?s=128&d=identicon&r=PG&f=1", "display_name": "Mukit09", "link": "https://stackoverflow.com/users/2952011/mukit09"}, "edited": false, "score": 0, "creation_date": 1446023839, "post_id": 33386523, "comment_id": 54566317, "body": "Conditon portion of your <b><i>for</i></b> loop is wrong. Most probably, you wanted to write like this...f2&gt;=1, f3&gt;=1, .... , f10&gt;=1."}], "tags": [], "owner": {"reputation": 1840, "user_id": 2952011, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/16d6c7bf2e0842791df8ec9b05758bfb?s=128&d=identicon&r=PG&f=1", "display_name": "Mukit09", "link": "https://stackoverflow.com/users/2952011/mukit09"}, "is_accepted": false, "score": 0, "last_activity_date": 1446022412, "last_edit_date": 1446022412, "creation_date": 1446022269, "answer_id": 33386523, "question_id": 33386361, "link": "https://stackoverflow.com/questions/33386361/c-program-taylor-series-long-formula/33386523#33386523", "title": "C program - taylor series_long formula", "body": "<pre><code>for(f2=3;f2==1;f2--){\n    fac2*=f2;\n}\n</code></pre>\n\n<p>f2 is initialized with 3 and then in condition portion it is checked that <em>if f2 is equaled to 1</em> which returns false. </p>\n\n<p>This loop doesn't run for even a single time. Condition is false for the first time. So </p>\n\n<pre><code>fac2*=f2;\n</code></pre>\n\n<p>is never executed. </p>\n\n<p><strong><em>And you did same error for every next loop.</em></strong> </p>\n"}, {"tags": [], "owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "is_accepted": false, "score": 0, "last_activity_date": 1446022430, "creation_date": 1446022430, "answer_id": 33386586, "question_id": 33386361, "link": "https://stackoverflow.com/questions/33386361/c-program-taylor-series-long-formula/33386586#33386586", "title": "C program - taylor series_long formula", "body": "<p>Most of your for loops never run. Check the correct syntax for them. Example:</p>\n\n<pre><code>for(f2=3;f2==1;f2--)\n</code></pre>\n\n<p>Is never executed because f2 = 3 and 3 != 1</p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 5493616, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ovice.jpg?s=128&g=1", "display_name": "Cassandra Nocturne", "link": "https://stackoverflow.com/users/5493616/cassandra-nocturne"}, "edited": false, "score": 0, "creation_date": 1446036128, "post_id": 33388731, "comment_id": 54574090, "body": "What can I use for the factorial part instead?"}], "tags": [], "owner": {"reputation": 11, "user_id": 5493616, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ovice.jpg?s=128&g=1", "display_name": "Cassandra Nocturne", "link": "https://stackoverflow.com/users/5493616/cassandra-nocturne"}, "is_accepted": false, "score": 0, "last_activity_date": 1446028463, "creation_date": 1446028463, "answer_id": 33388731, "question_id": 33386361, "link": "https://stackoverflow.com/questions/33386361/c-program-taylor-series-long-formula/33388731#33388731", "title": "C program - taylor series_long formula", "body": "<pre><code>#include&lt;stdio.h&gt;\n#define PI 3.141592653589\n#define NUMBER_OF_TERMS 10\n\nint\nmain()\n{\n double angle_degrees, angle_radians;\n double sin, i, i2, i3, i4 , i5, i6, i7, i8, i9, i10;\n double fac1, fac2, fac3, fac4, fac5, fac6=1, fac7, fac8, fac9, fac10;\n double f1, f2, f3, f4, f5, f6, f7, f8, f9, f10;\n double p1, p2, p3, p4, p5, p6, p7, p8, p9, p10;\n for(angle_degrees = -180; angle_degrees &lt;= 180; angle_degrees += 5){\n    p1 = angle_radians;\n    p2 = angle_radians; \n    p3 = angle_radians;\n    p4 = angle_radians;\n    p5 = angle_radians;\n    p6 = angle_radians; \n    p7 = angle_radians;\n    p8 = angle_radians; \n    p9 = angle_radians;\n    p10 = angle_radians;\n\n    angle_radians = angle_degrees*PI/180;\n    for(f1=3;f1&gt;=1;f1--){\n        fac1*=f1;\n    }\n    for(f2=5;f2&gt;=1;f2--){\n        fac1*=f2;\n    }\n    for(f3=7;f3&gt;=1;f3--){\n        fac1*=f3;\n    }\n    for(f4=9;f4&gt;=1;f4--){\n        fac1*=f4;\n    }\n    for(f5=11;f5&gt;=1;f5--){\n        fac1*=f5;\n    }\n    for(f6=13;f6&gt;=1;f6--){\n        fac1*=f6;\n    }\n    for(f7=15;f7&gt;=1;f7--){\n        fac1*=f7;\n    }\n    for(f8=17;f8&gt;=1;f8--){\n        fac1*=f8;\n    }\n    for(f9=19;f9&gt;=1;f9--){\n        fac1*=f9;\n    }\n    for(f10=21;f10&gt;=1;f10--){\n        fac1*=f10;\n    }\n\n    sin = angle_radians - (pow(p1, 3)/fac1) + (pow(p2, 5)/fac2) - (pow(p3, 7)/fac3) + (pow(p4, 9)/fac4) - (pow(p5, 11)/fac5) + (pow(p6, 13)/fac6) - (pow(p7, 15)/fac7) + (pow(p8, 17)/fac8) -(pow(p9, 19)/fac9) - (pow(p10, 21)/fac10);\n    printf (\"%.2lf\\t\\t%.12lf\\t\\t%.12lf\\n\", \n        angle_degrees, angle_radians, sin);\n    }\n }\n</code></pre>\n\n<p>Here's a brand new one --- also I forgot these restrictions involved with it:\n1)NO other function aside from main().\n2)NO inputs involved.\n3) Angles = double data.\n4)Output = angles (both degrees and radians), cosine (will work on that once done solving for sine), and sine.</p>\n"}, {"comments": [{"owner": {"reputation": 21073, "user_id": 3088138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/114f33fdece969de35d41038fb0eeb46?s=128&d=identicon&r=PG&f=1", "display_name": "Lutz Lehmann", "link": "https://stackoverflow.com/users/3088138/lutz-lehmann"}, "edited": false, "score": 2, "creation_date": 1446039437, "post_id": 33390329, "comment_id": 54576450, "body": "Do not separate the factorial and power computation, then there will be no bound on <code>n</code>."}], "tags": [], "owner": {"reputation": 1564, "user_id": 5422980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3d70c303b95aa718a340b77e11628e3?s=128&d=identicon&r=PG&f=1", "display_name": "Ari Hietanen", "link": "https://stackoverflow.com/users/5422980/ari-hietanen"}, "is_accepted": false, "score": 0, "last_activity_date": 1446040817, "last_edit_date": 1446040817, "creation_date": 1446033158, "answer_id": 33390329, "question_id": 33386361, "link": "https://stackoverflow.com/questions/33386361/c-program-taylor-series-long-formula/33390329#33390329", "title": "C program - taylor series_long formula", "body": "<p>The Taylor series of sin(x) is x-x^3/3!+x^5/5!-... . In your code I assume that p1 should mean x^1=x, p2=x^3, .. and f1=1! f2=3!, .. . Now in the result line you write</p>\n\n<pre><code> sin = angle_radians - (p1/fac1) + (p2/fac2) + //...\n</code></pre>\n\n<p>which has the series with wrong sign + the first term again. </p>\n\n<pre><code> sin = (p1/fac1) - (p2/fac2) + //...\n</code></pre>\n\n<p>Also the code is overly complicated. You can collect the result in a single loop:</p>\n\n<pre><code>double p=x;\ndouble f=1;\ndouble res=0;\nint k=1;\nfor (int i=0;i&lt;n;i++){\n  res+=p/f;\n  p*=-x*x;\n  k+=2;\n  f*=(k-1)*k;\n}\n</code></pre>\n\n<p>Here x is the angle in radians p is the current power with right sign and f the factorial of the term.</p>\n\n<p>As commented by LutzL this would overflow at some point because of the factorial. This version is safer against overflows</p>\n\n<pre><code>double res=0;\ndouble term=x;\nint k=1;\nfor (int i=0;i&lt;n;i++){\n  res+=term;\n  k+=2;\n  term*=-x*x/k/(k-1);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 5493616, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ovice.jpg?s=128&g=1", "display_name": "Cassandra Nocturne", "link": "https://stackoverflow.com/users/5493616/cassandra-nocturne"}, "edited": false, "score": 0, "creation_date": 1446040400, "post_id": 33392679, "comment_id": 54577127, "body": "That one&#39;s a good one, but I need a factorial in arithmetic form because of this restriction to my homework: I can&#39;t use any other function aside from main().  Also: can someone please tell me of how to put increments of 5 degrees? Don&#39;t have a clue on where to put that."}, {"owner": {"reputation": 21073, "user_id": 3088138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/114f33fdece969de35d41038fb0eeb46?s=128&d=identicon&r=PG&f=1", "display_name": "Lutz Lehmann", "link": "https://stackoverflow.com/users/3088138/lutz-lehmann"}, "reply_to_user": {"reputation": 11, "user_id": 5493616, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ovice.jpg?s=128&g=1", "display_name": "Cassandra Nocturne", "link": "https://stackoverflow.com/users/5493616/cassandra-nocturne"}, "edited": false, "score": 0, "creation_date": 1446040746, "post_id": 33392679, "comment_id": 54577407, "body": "Then please edit your question and add the exact text of your task description or provide a link to it. And please use the recursive nature of power and factorial, preferentially in one loop and without producing numerical overflow. -- Please describe why your outer loop is not working, it looks correct."}, {"owner": {"reputation": 21073, "user_id": 3088138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/114f33fdece969de35d41038fb0eeb46?s=128&d=identicon&r=PG&f=1", "display_name": "Lutz Lehmann", "link": "https://stackoverflow.com/users/3088138/lutz-lehmann"}, "reply_to_user": {"reputation": 11, "user_id": 5493616, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ovice.jpg?s=128&g=1", "display_name": "Cassandra Nocturne", "link": "https://stackoverflow.com/users/5493616/cassandra-nocturne"}, "edited": false, "score": 0, "creation_date": 1446123363, "post_id": 33392679, "comment_id": 54619294, "body": "This one: <code>for(angle_degrees = -180; angle_degrees &lt;= 180; angle_degrees += 5)</code>, it has the correct formulation and is at the right place."}], "tags": [], "owner": {"reputation": 21073, "user_id": 3088138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/114f33fdece969de35d41038fb0eeb46?s=128&d=identicon&r=PG&f=1", "display_name": "Lutz Lehmann", "link": "https://stackoverflow.com/users/3088138/lutz-lehmann"}, "is_accepted": false, "score": 0, "last_activity_date": 1446124317, "last_edit_date": 1446124317, "creation_date": 1446039764, "answer_id": 33392679, "question_id": 33386361, "link": "https://stackoverflow.com/questions/33386361/c-program-taylor-series-long-formula/33392679#33392679", "title": "C program - taylor series_long formula", "body": "<h2>Code allowing for arbitrary number of terms</h2>\n\n<p>Copying myself from <a href=\"https://stackoverflow.com/a/28227419/3088138\">https://stackoverflow.com/a/28227419/3088138</a></p>\n\n<hr>\n\n<p>Avoiding the recomputation of recursive functions like powers of the same argument and factorials is always a good idea. Thus a reduction to (a minimal amount of) elementary arithmetic operations looks like this:</p>\n\n<pre><code>public static double sine(int terms, double x) {\n    double result = 1;\n    double mxx = -x*x;\n    double addens = 1;\n    double temp = 2;\n    for(int n = 2; n &lt;= terms; n++) {\n        addens *= mxx/temp++/temp++;\n        result += addens; \n    }\n    return x*result;\n\n}\n</code></pre>\n\n<hr>\n\n<p>To study a production quality implementation, you can visit the math library libmath of the basic calculator bc, the gnu version can be read at <a href=\"http://code.metager.de/source/xref/gnu/bc/1.06/bc/libmath.b\" rel=\"nofollow\">http://code.metager.de/source/xref/gnu/bc/1.06/bc/libmath.b</a></p>\n\n<p>It normalizes the argument wrt. pi and then uses the Taylor series of sin.</p>\n\n<hr>\n\n<h2>Horner-like schema for fixed number of terms</h2>\n\n<p>If you are restricted to a fixed number of terms in the power series, you can use a Horner like code for its evaluation. As example, take 4 terms, then</p>\n\n<pre><code>x-x^3/3!+x^5/5!-x^7/7! = x*(1-x\u00b2/6*(1-x\u00b2/20*(1-x\u00b2/42)))\n</code></pre>\n\n<p>This can be put into a loop</p>\n\n<pre><code>res = 1\nfor( k=num_terms; k--&gt;1;) {\n    res = 1-x*x*res/(2*k*(2*k+1))\n}\nres = res*x;\n</code></pre>\n\n<p>or you can unroll the loop</p>\n\n<pre><code>res = 1-x*x/42;\nres = 1-x*x/20*res;\nres = 1-x*x/6*res;\nres = x*res;\n</code></pre>\n\n<p>You are free to combine <code>x2=x*x</code> or to rename <code>x=angle_radians</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 5493616, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ovice.jpg?s=128&g=1", "display_name": "Cassandra Nocturne", "link": "https://stackoverflow.com/users/5493616/cassandra-nocturne"}, "edited": false, "score": 0, "creation_date": 1446113930, "post_id": 33405682, "comment_id": 54613102, "body": "That could work---thanks, but that&#39;s not the one I am looking for."}, {"owner": {"reputation": 21073, "user_id": 3088138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/114f33fdece969de35d41038fb0eeb46?s=128&d=identicon&r=PG&f=1", "display_name": "Lutz Lehmann", "link": "https://stackoverflow.com/users/3088138/lutz-lehmann"}, "edited": false, "score": 0, "creation_date": 1446124651, "post_id": 33405682, "comment_id": 54620204, "body": "You can reduce the work for the angle reduction slightly if you add after <code>angdeg=fmod(angdeg,360)</code> the additional reduction <code>angdeg=fmod(angdeg+360+180,360)-180</code>, after that the angle should be in the range <code>-180..180</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 21073, "user_id": 3088138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/114f33fdece969de35d41038fb0eeb46?s=128&d=identicon&r=PG&f=1", "display_name": "Lutz Lehmann", "link": "https://stackoverflow.com/users/3088138/lutz-lehmann"}, "edited": false, "score": 0, "creation_date": 1446125299, "post_id": 33405682, "comment_id": 54620684, "body": "@LutzL Calling <code>fmod(angdeg,360)</code> first has the advantage of not introducing <i>any</i> precision loss. (<a href=\"http://stackoverflow.com/q/20928253/2410359\">stackoverflow.com/q/20928253/2410359</a>) unlike <code>angdeg+360+180</code>.  The answer&#39;s angle reduction are crafted to not have <i>any</i> precision loss until <code>angle_reduced_radians = D2R(angle_reduced_degrees)</code>  It is steps like that that keep <code>sine(x) == sine(x+360.0*n)</code> unlike <code>sin(D2R(x+360.0*n))</code>."}, {"owner": {"reputation": 21073, "user_id": 3088138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/114f33fdece969de35d41038fb0eeb46?s=128&d=identicon&r=PG&f=1", "display_name": "Lutz Lehmann", "link": "https://stackoverflow.com/users/3088138/lutz-lehmann"}, "edited": false, "score": 0, "creation_date": 1446125553, "post_id": 33405682, "comment_id": 54620865, "body": "I did say to use both. That is needed since usually the quotient computation in all mod implementations rounds towards 0. Thus the first fmod leaves values between -360..360. Now there are multiple possibilities to reduce this to only one period."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 21073, "user_id": 3088138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/114f33fdece969de35d41038fb0eeb46?s=128&d=identicon&r=PG&f=1", "display_name": "Lutz Lehmann", "link": "https://stackoverflow.com/users/3088138/lutz-lehmann"}, "edited": false, "score": 0, "creation_date": 1446125992, "post_id": 33405682, "comment_id": 54621226, "body": "@LutzL (I now see the implied both) True that <code>angdeg=fmod(angdeg+360+180,360)-180</code> after <code>angdeg=fmod(angdeg,360)</code> reduces things to 1 period [-180...180) albeit with 1 bit precision loss.  This answer uses <code>if (angle_reduced_degrees &lt; 0)</code> after <code>angdeg=fmod(angdeg,360)</code> to reduce to 1 period. [0...360) without precision loss."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1446090914, "creation_date": 1446090914, "answer_id": 33405682, "question_id": 33386361, "link": "https://stackoverflow.com/questions/33386361/c-program-taylor-series-long-formula/33405682#33405682", "title": "C program - taylor series_long formula", "body": "<p>Code can do better than <code>sin(D2R(angle_degrees))</code></p>\n\n<p>Step 1: Reduce angle to the range 0 to 90 degrees before converting to radians.  Take advantage of the usual trig identities.  Then we get exact answers for 90*n degrees.  </p>\n\n<p>Step 2: Calculate power series from last term up to the first as summing small terms first is more accurate.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#define PI 3.1415926535897932384626433832795\n#define D2R(a) ((a)*PI/180)\n\n#define NUMBER_OF_TERMS 10\n\nint main(void) {\n  double angle_degrees;\n  for (angle_degrees = -360; angle_degrees &lt;= 360; angle_degrees += 30) {\n    double angle_radians = D2R(angle_degrees);\n    int sign = 1;\n    double angle_reduced_degrees = fmod(angle_degrees, 360.0);\n    if (angle_reduced_degrees &lt; 0) {\n      angle_reduced_degrees = -angle_reduced_degrees;\n      sign = -1;\n    }\n    int quadrant = (int) (angle_reduced_degrees / 90.0);\n    angle_reduced_degrees -= quadrant * 90;\n    switch (quadrant) {\n      case 0:\n        break;\n      case 1:\n        angle_reduced_degrees = 90 - angle_reduced_degrees;\n        break;\n      case 2:\n        angle_reduced_degrees = -angle_reduced_degrees;\n        sign = -sign;\n        break;\n      case 3:\n        angle_reduced_degrees = 90 - angle_reduced_degrees;\n        sign = -sign;\n        break;\n    }\n    double angle_reduced_radians = D2R(angle_reduced_degrees);\n\n    long long denom = 1;\n    for (int i = 1; i &lt; NUMBER_OF_TERMS; i++) {\n      denom *= -(2 * i + 0) * (2 * i + 1);\n    }\n    double aa = angle_reduced_radians * angle_reduced_radians;\n    double sum = 0;\n    for (int i = NUMBER_OF_TERMS; --i &gt;= 0;) {\n      double term = 1.0 / (double) denom;\n      sum = term + sum * aa;\n      if (i) denom /= (-(2 * i) * (2 * i + 1));\n    }\n\n    sum *= angle_reduced_radians * sign;\n    sum *= 1.0; // to get rid of -0.0\n    printf(\"sine(%+7.2f degrees %+9f radians) = %+20.17f sin()=%+20.17f\\n\",\n            angle_degrees, angle_radians, sum, sin(angle_radians));\n  }\n  return 0;\n}\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>sine(-360.00 degrees -6.283185 radians) = -0.00000000000000000 sin()=+0.00000000000000024\nsine(-330.00 degrees -5.759587 radians) = +0.50000000000000000 sin()=+0.49999999999999967\nsine(-300.00 degrees -5.235988 radians) = +0.86602540378443871 sin()=+0.86602540378443860\nsine(-270.00 degrees -4.712389 radians) = +0.99999999999999989 sin()=+1.00000000000000000\nsine(-240.00 degrees -4.188790 radians) = -0.86602540378443871 sin()=+0.86602540378443882\nsine(-210.00 degrees -3.665191 radians) = -0.50000000000000000 sin()=+0.50000000000000011\nsine(-180.00 degrees -3.141593 radians) = -0.00000000000000000 sin()=-0.00000000000000012\nsine(-150.00 degrees -2.617994 radians) = -0.50000000000000000 sin()=-0.49999999999999994\nsine(-120.00 degrees -2.094395 radians) = -0.86602540378443871 sin()=-0.86602540378443860\nsine( -90.00 degrees -1.570796 radians) = -0.99999999999999989 sin()=-1.00000000000000000\nsine( -60.00 degrees -1.047198 radians) = -0.86602540378443871 sin()=-0.86602540378443871\nsine( -30.00 degrees -0.523599 radians) = -0.50000000000000000 sin()=-0.50000000000000000\nsine(  +0.00 degrees +0.000000 radians) = +0.00000000000000000 sin()=+0.00000000000000000\nsine( +30.00 degrees +0.523599 radians) = +0.50000000000000000 sin()=+0.50000000000000000\nsine( +60.00 degrees +1.047198 radians) = +0.86602540378443871 sin()=+0.86602540378443871\nsine( +90.00 degrees +1.570796 radians) = +0.99999999999999989 sin()=+1.00000000000000000\nsine(+120.00 degrees +2.094395 radians) = +0.86602540378443871 sin()=+0.86602540378443860\nsine(+150.00 degrees +2.617994 radians) = +0.50000000000000000 sin()=+0.49999999999999994\nsine(+180.00 degrees +3.141593 radians) = +0.00000000000000000 sin()=+0.00000000000000012\nsine(+210.00 degrees +3.665191 radians) = +0.50000000000000000 sin()=-0.50000000000000011\nsine(+240.00 degrees +4.188790 radians) = +0.86602540378443871 sin()=-0.86602540378443882\nsine(+270.00 degrees +4.712389 radians) = -0.99999999999999989 sin()=-1.00000000000000000\nsine(+300.00 degrees +5.235988 radians) = -0.86602540378443871 sin()=-0.86602540378443860\nsine(+330.00 degrees +5.759587 radians) = -0.50000000000000000 sin()=-0.49999999999999967\nsine(+360.00 degrees +6.283185 radians) = +0.00000000000000000 sin()=-0.00000000000000024\n</code></pre>\n\n<p>Some minor improvements could be made. </p>\n"}], "owner": {"reputation": 11, "user_id": 5493616, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ovice.jpg?s=128&g=1", "display_name": "Cassandra Nocturne", "link": "https://stackoverflow.com/users/5493616/cassandra-nocturne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1392, "favorite_count": 0, "answer_count": 6, "score": 1, "last_activity_date": 1446960241, "creation_date": 1446021750, "last_edit_date": 1446960241, "question_id": 33386361, "link": "https://stackoverflow.com/questions/33386361/c-program-taylor-series-long-formula", "title": "C program - taylor series_long formula", "body": "<p>This formula is from a friend of mine --- and I fixed it up for him. But I can't seem to figure out of how to get the right sine calculations per angle. Can someone please help me in getting the right commands in the sin part?</p>\n\n<p>Code:</p>\n\n<pre><code> #include&lt;stdio.h&gt;\n#define PI 3.141592653589\n#define NUMBER_OF_TERMS 10\n\n\ndouble factorial(double x)\n {\n  double counter, total;\n  counter=x;\n  total=x;\n  while(counter&gt;1)\n  {\n     counter--;\n     total = total * counter;\n  }\n  return total;\n  }\n  double power(double x, double y)\n  {\n  double counter, j;\n  counter=0;\n  j = x;\n  while (counter&lt;(y-1))\n  {\n        counter++;\n        x = x * j;\n  }\n  return x;\n  }\n  double cosine_func(double radians)\n  {\n  int counter, x;\n  double cosine;\n  x=0;\n  counter=0;\n  cosine = 0;\n  while(counter&lt;NUMBER_OF_TERMS-1)\n  {\n             counter++;\n             x=x+2;\n             if(counter%2 == 0)\n              {\n                  cosine = cosine - (power(radians, x)/factorial(x));\n              }\n             else if(counter%2 != 0)\n             {\n                  cosine = cosine + (power(radians, x)/factorial(x));\n             }\n\n  }\n  return cosine;\n  }\n  double sine_func(double radians)\n  {\n  int counter, x;\n  double sin;\n  x=0;\n  counter=0;\n  sin = 0;\n  while(counter&lt;NUMBER_OF_TERMS-2)\n  {\n             counter++;\n             x=x+3;\n             if(counter%2 != 0)\n              {\n                  sin= sin -(power(radians, x)/factorial(x));\n              }\n             else if(counter%2 != 0)\n             {\n                sin= sin + (power(radians, x)/factorial(x));\n             }\n    }\n  return sin;\n\n    } \n   main()\n { \n  double counter;       \n  double x_angles;         \n  double x_radians;  \n  double cosine;   \n  double sin;      \n\n\n  printf(\"11526769\\n\\n\");\n  printf(\"x(degrees)\\t   x(radians)\\t\\t     cos x\\t\\t  sin x\\t\\t\");\n  counter = 0;\n  x_angles = -185;\n  while (x_angles&lt;180)\n  {\n        counter++;\n        x_angles+=5;\n        x_radians=x_angles*PI/180.0;\n        cosine=1-cosine_func(x_radians);\n        sin=x_radians-sine_func(x_radians);\n        printf(\"%.2lf\\t\\t%.12lf\\t\\t%.12lf\\t\\t%.12lf\\n\", x_angles, x_radians, cosine, sin);\n  }\n  return 0;\n  } \n</code></pre>\n"}, {"tags": ["c", "memory", "memory-management", "heap-memory"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1446018236, "post_id": 33385318, "comment_id": 54563450, "body": "Did you read relevant wikipages on <a href=\"https://en.wikipedia.org/wiki/Process_%28computing%29\" rel=\"nofollow noreferrer\">processes</a>, <a href=\"https://en.wikipedia.org/wiki/Virtual_memory\" rel=\"nofollow noreferrer\">virtual memory</a>, <a href=\"https://en.wikipedia.org/wiki/Virtual_address_space\" rel=\"nofollow noreferrer\">virtual address space</a> .... ?"}, {"owner": {"reputation": 9300, "user_id": 409102, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/060588f22d2a4c5e049156f23fcf1405?s=128&d=identicon&r=PG", "display_name": "kravemir", "link": "https://stackoverflow.com/users/409102/kravemir"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1446018662, "post_id": 33385318, "comment_id": 54563640, "body": "@BasileStarynkevitch Well, not all of them. However, I&#39;m not sure about whether I understood it correctly. Look at answers, both of them are saying opposite thing. And if someone answers question, then he/she claims he/she knows the topic. So we&#39;ve got two truths now :)"}], "answers": [{"comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1446018062, "post_id": 33385419, "comment_id": 54563368, "body": "Also, shared memory could get mapped to different addresses in different processes."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1446018135, "post_id": 33385419, "comment_id": 54563400, "body": "Sure, could, but doesn&#39;t have to. Mappings of shared libraries for example ... I&#39;ll improve the wording."}, {"owner": {"reputation": 9300, "user_id": 409102, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/060588f22d2a4c5e049156f23fcf1405?s=128&d=identicon&r=PG", "display_name": "kravemir", "link": "https://stackoverflow.com/users/409102/kravemir"}, "edited": false, "score": 0, "creation_date": 1446018243, "post_id": 33385419, "comment_id": 54563455, "body": "Thanks. So, little fix of statement would be: <b>may</b> get translated :)"}, {"owner": {"reputation": 9300, "user_id": 409102, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/060588f22d2a4c5e049156f23fcf1405?s=128&d=identicon&r=PG", "display_name": "kravemir", "link": "https://stackoverflow.com/users/409102/kravemir"}, "edited": false, "score": 0, "creation_date": 1446018360, "post_id": 33385419, "comment_id": 54563508, "body": "Still part of question left unanswered. Does it apply for each listed architecture?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 9300, "user_id": 409102, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/060588f22d2a4c5e049156f23fcf1405?s=128&d=identicon&r=PG", "display_name": "kravemir", "link": "https://stackoverflow.com/users/409102/kravemir"}, "edited": false, "score": 1, "creation_date": 1446018812, "post_id": 33385419, "comment_id": 54563703, "body": "@Miro they all have virtual memory management, so it&#39;s basically the same, yes. Implementation might differ, for example the depth of nested page tables ..."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": true, "score": 8, "last_activity_date": 1446018167, "last_edit_date": 1446018167, "creation_date": 1446018025, "answer_id": 33385419, "question_id": 33385318, "link": "https://stackoverflow.com/questions/33385318/is-virtual-address-process-specific/33385419#33385419", "title": "Is virtual address process-specific?", "body": "<p>Well except for:</p>\n\n<blockquote>\n  <p>different processes can have pointers with same addresses, but these pointers get translated to different physical addresses</p>\n</blockquote>\n\n<p>while this is the general case, of course different processes <em>could</em> share mapped pages (look into shared memory) and then the pointers <em>could</em> point to the same data, given the pages are mapped to the same locations in virtual address space.</p>\n\n<p>But yes, that's the correct understanding.</p>\n"}], "owner": {"reputation": 9300, "user_id": 409102, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/060588f22d2a4c5e049156f23fcf1405?s=128&d=identicon&r=PG", "display_name": "kravemir", "link": "https://stackoverflow.com/users/409102/kravemir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 159, "favorite_count": 1, "accepted_answer_id": 33385419, "answer_count": 1, "score": 5, "last_activity_date": 1446018492, "creation_date": 1446017659, "question_id": 33385318, "link": "https://stackoverflow.com/questions/33385318/is-virtual-address-process-specific", "title": "Is virtual address process-specific?", "body": "<p>I've been studying memory management related topics. I'm wondering, whether I've understood it correctly:</p>\n\n<ul>\n<li>pointer(virtual) address is process specific </li>\n<li>different processes can have pointers with same addresses, but these pointers get translated to different physical addresses</li>\n</ul>\n\n<p>Am I correct about these statements? If yes, do they apply for architectures x86, x86-64 and ARMv7, ARMv8?</p>\n"}, {"tags": ["c", "linux", "x11", "cairo"], "comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 2, "creation_date": 1446018735, "post_id": 33385243, "comment_id": 54563672, "body": "Your problem is in your choice of backend for cairo. You can choose png, pdf, svg, or you can write directly to a gtk window (which it appears you want to do). See the examples in <a href=\"http://zetcode.com/gfx/cairo/cairobackends/\" rel=\"nofollow noreferrer\"><b>Cairo Tutorial - zetcode</b></a> for examples of each."}, {"owner": {"reputation": 1426, "user_id": 4956813, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/pkYGf.jpg?s=128&g=1", "display_name": "John M", "link": "https://stackoverflow.com/users/4956813/john-m"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1446019155, "post_id": 33385243, "comment_id": 54563856, "body": "Sorry for my incompetence here; I&#39;m usually an embedded systems developer, I rarely write Linux code.  What&#39;s the difference between gtk and x11?  gtk sounds more complex from what I&#39;ve read.  Can&#39;t I write &quot;directly to an x11 window: instead of &quot;directly to a gtk window&quot;?"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1446019289, "post_id": 33385243, "comment_id": 54563913, "body": "No worries, just slow down a little bit and work through the tutorials and you will slowly begin to digest the different capabilities. No matter what you are trying to learn in C, remember it is not a race, and the details that you fly by when in a hurry -- really are important. So enjoy the ride. (not race)."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1446019651, "post_id": 33385243, "comment_id": 54564068, "body": "@DavidC.Rankin I don&#39;t know, in principle you can draw to a <code>GdkPixmap</code> which is a drawable just like a <code>GdkWindow</code> is, and then use the <code>GdkPixmap</code> as a <code>X11</code> pixmap to draw to a <code>X11</code> window. And when I&#39;ve compiled <i>cairo</i> from source I recall it has a <i>x11</i> backend but I am not sure."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1446020106, "post_id": 33385243, "comment_id": 54564277, "body": "That is a good point, I didn&#39;t climb down to the bottom of the cairo API and compare all the various backends. There may be some limitation on a direct write to X11, but the pixmap or window provided the direct write to screen and there are a number of direct X11 conversions at the bottom of that rabbit-hole to check."}, {"owner": {"reputation": 1426, "user_id": 4956813, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/pkYGf.jpg?s=128&g=1", "display_name": "John M", "link": "https://stackoverflow.com/users/4956813/john-m"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1446021483, "post_id": 33385243, "comment_id": 54564929, "body": "@DavidC.Rankin I wish I had time to slow down... I&#39;m on a time critical mission to make a debug utility for Verilog.  My hardware project is at a near-standstill until I get this figured out."}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 1, "creation_date": 1446022504, "post_id": 33385243, "comment_id": 54565497, "body": "@johnny_boy If you&#39;re in a hurry, why are you not targetting something higher-level and more complete? Like, of course, GTK+?"}, {"owner": {"reputation": 1426, "user_id": 4956813, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/pkYGf.jpg?s=128&g=1", "display_name": "John M", "link": "https://stackoverflow.com/users/4956813/john-m"}, "reply_to_user": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1446022590, "post_id": 33385243, "comment_id": 54565538, "body": "@unwind  Thanks for the suggestion.  Will a Gnome program run on a system that uses Cinnamon for its window manager though?"}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 1, "creation_date": 1446024485, "post_id": 33385243, "comment_id": 54566721, "body": "@johnny_boy What? You don&#39;t need to do a <i>GNOME</i> application, you can use GTK+ without GNOME. From my understanding, that is exactly what Cinnamon is in itself."}, {"owner": {"reputation": 1426, "user_id": 4956813, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/pkYGf.jpg?s=128&g=1", "display_name": "John M", "link": "https://stackoverflow.com/users/4956813/john-m"}, "reply_to_user": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1446090962, "post_id": 33385243, "comment_id": 54602676, "body": "@unwind Thanks a lot for the suggestion.  Gtk is definitely what I want.  I have no idea how I ended up trying to use cairo."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1446137609, "post_id": 33385243, "comment_id": 54629798, "body": "there is a significant logic error in the code.   After checking argc and finding that no command line parameter was passed, then displaying an error message,  the code continues execution, as if a parameter had been passed.  What the code should have done is cleanup and exit."}], "answers": [{"comments": [{"owner": {"reputation": 1426, "user_id": 4956813, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/pkYGf.jpg?s=128&g=1", "display_name": "John M", "link": "https://stackoverflow.com/users/4956813/john-m"}, "edited": false, "score": 0, "creation_date": 1446143540, "post_id": 33421942, "comment_id": 54633438, "body": "&quot;why exactly do you feel like cairo only gives you a woefully incomplete guide?&quot;  Maybe I was being a little harsh, but all of the links to cypherpunk.at are dead, so I wasn&#39;t able to view the example code (which would have been very helpful)"}, {"owner": {"reputation": 2765, "user_id": 206750, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/86J1B.jpg?s=128&g=1", "display_name": "JvO", "link": "https://stackoverflow.com/users/206750/jvo"}, "edited": false, "score": 0, "creation_date": 1446151081, "post_id": 33421942, "comment_id": 54637485, "body": "The links to cypherpunk.at are not dead, but its server uses a self-signed certificate (or something else that is not known) so Firefox warns you before continuing; Chrome is even more picky so it may appear to be broken, but it&#39;s only a security issue."}], "tags": [], "owner": {"reputation": 7642, "user_id": 436275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a72a51d31e40d541a9786e0243678029?s=128&d=identicon&r=PG", "display_name": "Uli Schlachter", "link": "https://stackoverflow.com/users/436275/uli-schlachter"}, "is_accepted": true, "score": 2, "last_activity_date": 1446143241, "creation_date": 1446143241, "answer_id": 33421942, "question_id": 33385243, "link": "https://stackoverflow.com/questions/33385243/cairo-c-program-wont-draw-to-x11-window/33421942#33421942", "title": "Cairo C program won&#39;t draw to x11 window", "body": "<p>Several issues:</p>\n\n<ul>\n<li>In X11, the X11 server doesn't save what you drew to a window, but instead sends an <code>ExposeEvent</code> to your window that tells it to redraw. This means you get a black window, because you do not handle this event.</li>\n<li><code>getchar</code> only gives you something after a line break, so just typing something won't help.</li>\n<li>libX11 buffers stuff and only sends it to the X11 server when you wait for an event (or the buffer fills up). Since you never wait for an event, it never flushes. Calling <code>XFlush</code> explicitly helps.</li>\n<li>The group that you push is useless. Just get rid of it.</li>\n<li>Your code to move the string one direction to the left easily goes beyond the end of the string. You apparently know this already, because you 'fixed' this with a <code>strnlen</code>.</li>\n</ul>\n\n<p>Here is a little better solution, but it still gives you an initially black window, because you draw to it before it is mapped:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;cairo-xlib.h&gt;\n#include &lt;X11/Xlib.h&gt;\n\n//This function should give us a new x11 surface to draw on.\ncairo_surface_t* create_x11_surface(Display *d, int x, int y)\n{\n    Drawable da;\n    int screen;\n    cairo_surface_t* sfc;\n\n    screen = DefaultScreen(d);\n    da = XCreateSimpleWindow(d, DefaultRootWindow(d), 0, 0, x, y, 0, 0, 0);\n    XSelectInput(d, da, ButtonPressMask | KeyPressMask);\n    XMapWindow(d, da);\n\n    sfc = cairo_xlib_surface_create(d, da, DefaultVisual(d, screen), x, y);\n\n    return sfc;\n}\n\nint main(int argc, char** argv)\n{\n    Display *d = XOpenDisplay(NULL);\n    if (d == NULL) {\n        fprintf(stderr, \"Failed to open display\\n\");\n        return 1;\n    }\n    //create a new cairo surface in an x11 window as well as a cairo_t* to draw\n    //on the x11 window with.\n    cairo_surface_t* surface = create_x11_surface(d, 300, 200);\n    cairo_t* cr = cairo_create(surface);\n    char *text = argv[1];\n    size_t text_len = 0;\n\n    if (argc != 2)\n        text = NULL;\n    else\n        text_len = strlen(text);\n\n    while(1)\n    {\n        // Clear the background\n        cairo_set_source_rgb(cr, 0, 0, 0);\n        cairo_paint(cr);\n\n        //draw some text\n        cairo_select_font_face(cr, \"serif\", CAIRO_FONT_SLANT_NORMAL, CAIRO_FONT_WEIGHT_BOLD);\n        cairo_set_font_size(cr, 32.0);\n        cairo_set_source_rgb(cr, 0, 0, 1.0);\n        cairo_move_to(cr, 10.0, 25.0);\n\n        if (text)\n            cairo_show_text(cr, text);\n        else\n            cairo_show_text(cr, \"usage: ./p1 &lt;string&gt;\");\n\n        cairo_surface_flush(surface);\n        XFlush(d);\n\n        //pause for a little bit.\n        int c = getchar();\n\n        //change the text around so we can see the screen update.\n        memmove(text, &amp;text[1], text_len);\n        if (text_len &gt; 0)\n            text_len--;\n\n        printf(\"got char %c\\n\", c);\n        if(c == 'q')\n        {\n            break;\n        }\n    }\n\n    // XXX: Lots of other stuff isn't properly destroyed here\n    cairo_surface_destroy(surface);\n    return 0;\n}\n</code></pre>\n\n<p>Edit: Also, why exactly do you feel like cairo only gives you a woefully incomplete guide? It tells you how to get the cairo parts working and it also explains you some parts about X11, even though you should already know those if you want to use cairo-x11. That's none of its business. The guide you linked to even provides a complete, <em>working</em> and self-contained example: <a href=\"https://www.cypherpunk.at/files/2014/11/cairo_xlib_simple.c\" rel=\"nofollow\">https://www.cypherpunk.at/files/2014/11/cairo_xlib_simple.c</a></p>\n"}, {"tags": [], "owner": {"reputation": 344, "user_id": 4618003, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5e8f098af732d64e92365592e685a3c?s=128&d=identicon&r=PG", "display_name": "Bernhard", "link": "https://stackoverflow.com/users/4618003/bernhard"}, "is_accepted": false, "score": 1, "last_activity_date": 1462774546, "creation_date": 1462774546, "answer_id": 37108869, "question_id": 33385243, "link": "https://stackoverflow.com/questions/33385243/cairo-c-program-wont-draw-to-x11-window/37108869#37108869", "title": "Cairo C program won&#39;t draw to x11 window", "body": "<p>I've you would have read the complete text of this \"imcomplete guide\" you would have seen that there is a link to the full sample: <a href=\"https://www.cypherpunk.at/files/2014/11/cairo_xlib_simple.c\" rel=\"nofollow\">https://www.cypherpunk.at/files/2014/11/cairo_xlib_simple.c</a> .</p>\n"}], "owner": {"reputation": 1426, "user_id": 4956813, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/pkYGf.jpg?s=128&g=1", "display_name": "John M", "link": "https://stackoverflow.com/users/4956813/john-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2197, "favorite_count": 0, "accepted_answer_id": 33421942, "answer_count": 2, "score": 2, "last_activity_date": 1462774546, "creation_date": 1446017404, "question_id": 33385243, "link": "https://stackoverflow.com/questions/33385243/cairo-c-program-wont-draw-to-x11-window", "title": "Cairo C program won&#39;t draw to x11 window", "body": "<p>I'm trying to use the <a href=\"http://cairographics.org/\" rel=\"nofollow\">Cairo</a> graphics library on Linux in C to make a pretty lightweight x11 GUI.</p>\n\n<p>After trying very hard to follow the <a href=\"http://cairographics.org/Xlib/\" rel=\"nofollow\">woefully incomplete guide</a> that cairo gives for x11, this is the best I've got:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\n#include &lt;cairo.h&gt;\n#include &lt;cairo-xlib.h&gt;\n#include &lt;X11/Xlib.h&gt;\n#include &lt;X11/extensions/Xrender.h&gt;\n#include &lt;X11/extensions/renderproto.h&gt;\n\n//This function should give us a new x11 surface to draw on.\ncairo_surface_t* create_x11_surface(int x, int y)\n{\n    Display* d;\n    Drawable da;\n    int screen;\n    cairo_surface_t* sfc;\n\n    if((d = XOpenDisplay(NULL)) == NULL)\n    {\n        printf(\"failed to open display\\n\");\n        exit(1);\n    }\n\n    screen = DefaultScreen(d);\n    da = XCreateSimpleWindow(d, DefaultRootWindow(d), 0, 0, x, y, 0, 0, 0);\n    XSelectInput(d, da, ButtonPressMask | KeyPressMask);\n    XMapWindow(d, da);\n\n    sfc = cairo_xlib_surface_create(d, da, DefaultVisual(d, screen), x, y);\n    cairo_xlib_surface_set_size(sfc, x, y);\n\n    return sfc;\n}\n\nint main(int argc, char** argv)\n{\n    //create a new cairo surface in an x11 window as well as a cairo_t* to draw\n    //on the x11 window with.\n    cairo_surface_t* surface = create_x11_surface(300, 200);\n    cairo_t* cr = cairo_create(surface);\n\n    while(1)\n    {\n        //save the empty drawing for the next time through the loop.\n        cairo_push_group(cr);\n\n        //draw some text\n        cairo_select_font_face(cr, \"serif\", CAIRO_FONT_SLANT_NORMAL, CAIRO_FONT_WEIGHT_BOLD);\n        cairo_set_font_size(cr, 32.0);\n        cairo_set_source_rgb(cr, 0, 0, 1.0);\n        cairo_move_to(cr, 10.0, 25.0);\n\n        if((argc == 2) &amp;&amp; (strnlen(argv[1], 100) &lt; 50))\n            cairo_show_text(cr, argv[1]);\n        else\n            cairo_show_text(cr, \"usage: ./p1 &lt;string&gt;\");\n\n        //put the drawn text onto the screen(?)\n        cairo_pop_group_to_source(cr);\n        cairo_paint(cr);\n        cairo_surface_flush(surface);\n\n        //pause for a little bit.\n        int c = getchar();\n\n        //change the text around so we can see the screen update.\n        for(int i = 0; i &lt; strnlen(argv[1], 100); i++)\n        {\n            argv[1][i] = argv[1][i + 1];\n        }\n\n        if(c == 'q')\n        {\n            break;\n        }\n    }\n\n    cairo_surface_destroy(surface);\n    return 0;\n}\n</code></pre>\n\n<p>On Linux systems that have Cairo installed, it can be compiled with</p>\n\n<pre><code>gcc -o myprog $(pkg-config --cflags --libs cairo x11) -std=gnu99 main.c\n</code></pre>\n\n<p>And it should be run with a single argument.</p>\n\n<p>For reasons I don't understand at all, inserting the line </p>\n\n<pre><code>cairo_pop_group_to_source(cr);\ncairo_paint(cr);\ncairo_surface_write_to_png (surface, \"hello.png\");    //&lt;--------- inserted\ncairo_surface_flush(surface);\n</code></pre>\n\n<p>Puts something on the screen, but there are 2 problems:</p>\n\n<ol>\n<li>Text that I draw with this method is persistent, creating a smearing effect.</li>\n<li>I don't want some .png file mediating between my program and an x11 window.  Data should be sent directly!</li>\n</ol>\n"}, {"tags": ["c++", "c", "printf"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 10, "creation_date": 1446017344, "post_id": 33385177, "comment_id": 54563038, "body": "Use <code>&quot;%d&quot;</code> and <a href=\"http://en.cppreference.com/w/c/numeric/math/abs\" rel=\"nofollow noreferrer\"><code>abs</code></a>?"}, {"owner": {"reputation": 5802, "user_id": 665507, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/06cc2c32ff31c62aa34917d2b046784d?s=128&d=identicon&r=PG", "display_name": "leesei", "link": "https://stackoverflow.com/users/665507/leesei"}, "edited": false, "score": 0, "creation_date": 1446022818, "post_id": 33385177, "comment_id": 54565676, "body": "<code>abs()</code> is a software (library) feature. <code>printf</code> formatting don&#39;t have syntax to omit the sign. Printing <code>-10</code> with <code>%u</code> will not be &quot;10&quot;."}, {"owner": {"reputation": 133, "user_id": 5496838, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-LLtQz7DHtfQ/AAAAAAAAAAI/AAAAAAAAAGU/S1phUom2x68/photo.jpg?sz=128", "display_name": "B P", "link": "https://stackoverflow.com/users/5496838/b-p"}, "edited": false, "score": 0, "creation_date": 1446023012, "post_id": 33385177, "comment_id": 54565804, "body": "I wanted to do it without using abs."}, {"owner": {"reputation": 133, "user_id": 5496838, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-LLtQz7DHtfQ/AAAAAAAAAAI/AAAAAAAAAGU/S1phUom2x68/photo.jpg?sz=128", "display_name": "B P", "link": "https://stackoverflow.com/users/5496838/b-p"}, "edited": false, "score": 0, "creation_date": 1446023075, "post_id": 33385177, "comment_id": 54565840, "body": "Thanks for the help guys"}, {"owner": {"reputation": 1828, "user_id": 134793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/851fc6f3a5bf348ee6067d57ac8a6824?s=128&d=identicon&r=PG", "display_name": "Fox", "link": "https://stackoverflow.com/users/134793/fox"}, "edited": false, "score": 1, "creation_date": 1446023442, "post_id": 33385177, "comment_id": 54566089, "body": "Not sure why you object to <code>abs()</code> - but if not using that is imperative, use the ternary <code>(p&lt;0?-p:p)</code> as an equivalent."}, {"owner": {"reputation": 1828, "user_id": 134793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/851fc6f3a5bf348ee6067d57ac8a6824?s=128&d=identicon&r=PG", "display_name": "Fox", "link": "https://stackoverflow.com/users/134793/fox"}, "reply_to_user": {"reputation": 6975, "user_id": 3121023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52448806175b9aa66c86d40cf0829f1?s=128&d=identicon&r=PG&f=1", "display_name": "user3121023", "link": "https://stackoverflow.com/users/3121023/user3121023"}, "edited": false, "score": 1, "creation_date": 1446025191, "post_id": 33385177, "comment_id": 54567196, "body": "@user3121023, done. I still think using abs is better - unless this is done in compatibility mode in an old compiler without full (read STL/template) C++ support."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1446038498, "post_id": 33385177, "comment_id": 54575749, "body": "<code>abs(INT_MIN)</code> will likely fail OP&#39;s goal."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1446038645, "post_id": 33385177, "comment_id": 54575849, "body": "Maybe <code>char buf[50]; printf(&quot;%s&quot;, (sprintf(buf, &quot;%+d&quot;, x), &amp;buf[1]));</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 674, "user_id": 5128663, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e4a8ce5144087e58e9c9d6024cc555cc?s=128&d=identicon&r=PG&f=1", "display_name": "Laschet Jain", "link": "https://stackoverflow.com/users/5128663/laschet-jain"}, "is_accepted": false, "score": 2, "last_activity_date": 1446017570, "creation_date": 1446017570, "answer_id": 33385299, "question_id": 33385177, "link": "https://stackoverflow.com/questions/33385177/prevent-sign-from-printing-in-printf-c-c/33385299#33385299", "title": "Prevent sign from printing in printf C C++", "body": "<p>Try </p>\n\n<p><code>printf(\"%d\",abs(number));</code></p>\n\n<p>where number is the number you want to print.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": false, "score": 7, "last_activity_date": 1446017616, "creation_date": 1446017616, "answer_id": 33385306, "question_id": 33385177, "link": "https://stackoverflow.com/questions/33385177/prevent-sign-from-printing-in-printf-c-c/33385306#33385306", "title": "Prevent sign from printing in printf C C++", "body": "<blockquote>\n  <p>I am looking to print a number without its sign.</p>\n</blockquote>\n\n<p>Nobody would want that as leaving the sign from a <em>negative</em> number makes it a <strong>different</strong> number.</p>\n\n<blockquote>\n  <p>PS: I don't like to operate on numbers</p>\n</blockquote>\n\n<p>Well, then do what you don't like ... <code>abs()</code> is the function you're looking for and expresses exactly what's going on.</p>\n"}, {"comments": [{"owner": {"reputation": 133, "user_id": 5496838, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-LLtQz7DHtfQ/AAAAAAAAAAI/AAAAAAAAAGU/S1phUom2x68/photo.jpg?sz=128", "display_name": "B P", "link": "https://stackoverflow.com/users/5496838/b-p"}, "edited": false, "score": 0, "creation_date": 1446094164, "post_id": 33385837, "comment_id": 54603600, "body": "I wasn&#39;t worried about modifying  the number instead I was looking for a feature that printf doesn&#39;t have(need). Thanks for clarifying."}, {"owner": {"reputation": 14968, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "edited": false, "score": 0, "creation_date": 1472242857, "post_id": 33385837, "comment_id": 65690464, "body": "This will have UB if <code>i==INT_MIN</code> and <code>int</code> represents negative numbers in two&#39;s complement (as is almost on all CPUs)."}], "tags": [], "owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "is_accepted": true, "score": 1, "last_activity_date": 1446020482, "last_edit_date": 1446020482, "creation_date": 1446019760, "answer_id": 33385837, "question_id": 33385177, "link": "https://stackoverflow.com/questions/33385177/prevent-sign-from-printing-in-printf-c-c/33385837#33385837", "title": "Prevent sign from printing in printf C C++", "body": "<p>There is no flag in printf to do what you want, you can however use the abs() function, like this</p>\n\n<pre><code>printf(\"%d\",abs(i));\n</code></pre>\n\n<p>where <code>i</code> is your variable.</p>\n\n<p>This is for integers. You could also do binary operations on the number to shift it to its positive representation, but <code>abs()</code> already does that for you, so that would be superficial.</p>\n\n<p>Take note that doing <code>abs(i)</code> does not modify <code>i</code> in any way, so its safe to use on your variables without copying them first.</p>\n"}, {"tags": [], "owner": {"reputation": 1828, "user_id": 134793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/851fc6f3a5bf348ee6067d57ac8a6824?s=128&d=identicon&r=PG", "display_name": "Fox", "link": "https://stackoverflow.com/users/134793/fox"}, "is_accepted": false, "score": 2, "last_activity_date": 1446025090, "creation_date": 1446025090, "answer_id": 33387518, "question_id": 33385177, "link": "https://stackoverflow.com/questions/33385177/prevent-sign-from-printing-in-printf-c-c/33387518#33387518", "title": "Prevent sign from printing in printf C C++", "body": "<p>Not sure why you object to <code>abs()</code> - but if not using that is imperative, use the ternary <code>(p&lt;0?-p:p)</code> as an equivalent.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1446038352, "post_id": 33388163, "comment_id": 54575641, "body": "Drop <code>buf[0] = &#39;\\&#39;&#39;;</code> and use <code>printf(&quot;%s&quot;, &amp;buf[1]);</code>.  Replacement not needed"}], "tags": [], "owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "is_accepted": false, "score": 0, "last_activity_date": 1446026945, "creation_date": 1446026945, "answer_id": 33388163, "question_id": 33385177, "link": "https://stackoverflow.com/questions/33385177/prevent-sign-from-printing-in-printf-c-c/33388163#33388163", "title": "Prevent sign from printing in printf C C++", "body": "<p>In your example you could get away with simple character replacement. First print with sign, and then replace with another character:</p>\n\n<pre><code>char buf[99];\nsnprintf(buf, 99, \"%+d'\", 10); // +10'\nbuf[0] = '\\'';  // '10'\nprintf(\"%s\", buf);\n</code></pre>\n\n<p>But this is special case, and in general you should consider using <code>abs()</code> function.</p>\n"}], "owner": {"reputation": 133, "user_id": 5496838, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-LLtQz7DHtfQ/AAAAAAAAAAI/AAAAAAAAAGU/S1phUom2x68/photo.jpg?sz=128", "display_name": "B P", "link": "https://stackoverflow.com/users/5496838/b-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 492, "favorite_count": 0, "accepted_answer_id": 33385837, "answer_count": 5, "score": 0, "last_activity_date": 1446026945, "creation_date": 1446017168, "last_edit_date": 1446018622, "question_id": 33385177, "link": "https://stackoverflow.com/questions/33385177/prevent-sign-from-printing-in-printf-c-c", "title": "Prevent sign from printing in printf C C++", "body": "<p><p>By Default negative number signs are printed and by adding + flag one can print the plus sign if required.<br>\nI am looking to print a number without its sign.<br>\nI believe there is a flag for that but that doesn't seem to work.<br></p>\n\n<pre><code>printf(\"'%d'\", 10); --&gt;    '10'\nprintf(\"'%d'\",-10); --&gt;    '-10'\nprintf(\"'%+d'\",10); --&gt;    '+10'\n</code></pre>\n\n<p>It would be great if some can suggest how to print x for the inputs x and -x,(x>0).<br>\n<em>PS</em>: I don't like to operate on numbers, I am looking for a software feature.</p>\n"}, {"tags": ["c", "path", "formatting", "environment-variables", "exploit"], "answers": [{"comments": [{"owner": {"reputation": 139, "user_id": 5488294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/938a8a2bc9093074d7fdc16a3f336ecd?s=128&d=identicon&r=PG&f=1", "display_name": "mik mik", "link": "https://stackoverflow.com/users/5488294/mik-mik"}, "edited": false, "score": 0, "creation_date": 1446029930, "post_id": 33385905, "comment_id": 54570239, "body": "The line you mention is actually the program getenvaddr, which can be found here: <a href=\"https://code.google.com/p/protostar-solutions/source/browse/Stack+6/getenvaddr.c?r=3d0a6873d44901d63caf9ad3764cfb9ab47f3332\" rel=\"nofollow noreferrer\">code.google.com/p/protostar-solutions/source/browse/Stack+6/&zwnj;&#8203;&hellip;</a>."}, {"owner": {"reputation": 139, "user_id": 5488294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/938a8a2bc9093074d7fdc16a3f336ecd?s=128&d=identicon&r=PG&f=1", "display_name": "mik mik", "link": "https://stackoverflow.com/users/5488294/mik-mik"}, "edited": false, "score": 0, "creation_date": 1446030109, "post_id": 33385905, "comment_id": 54570335, "body": "Secondly, do you have any idea why in the book they did the same and get the value of PATH? They looked for the address at the program from the last comment, and did exactly what I did (with the address they got, of course)."}, {"owner": {"reputation": 1426, "user_id": 4956813, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/pkYGf.jpg?s=128&g=1", "display_name": "John M", "link": "https://stackoverflow.com/users/4956813/john-m"}, "reply_to_user": {"reputation": 139, "user_id": 5488294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/938a8a2bc9093074d7fdc16a3f336ecd?s=128&d=identicon&r=PG&f=1", "display_name": "mik mik", "link": "https://stackoverflow.com/users/5488294/mik-mik"}, "edited": false, "score": 0, "creation_date": 1446062186, "post_id": 33385905, "comment_id": 54592178, "body": "This code is <b>highly system-dependent</b>.  I&#39;m not sure about your system, but on my system, if I run get_env several times, I get a different address each time."}, {"owner": {"reputation": 1426, "user_id": 4956813, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/pkYGf.jpg?s=128&g=1", "display_name": "John M", "link": "https://stackoverflow.com/users/4956813/john-m"}, "reply_to_user": {"reputation": 139, "user_id": 5488294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/938a8a2bc9093074d7fdc16a3f336ecd?s=128&d=identicon&r=PG&f=1", "display_name": "mik mik", "link": "https://stackoverflow.com/users/5488294/mik-mik"}, "edited": false, "score": 0, "creation_date": 1446062296, "post_id": 33385905, "comment_id": 54592247, "body": "this might sound like a cop-out answer, but I suspect that if you are using the first edition of the book (written back in 2003), the original system used to write the book might be different than yours."}, {"owner": {"reputation": 139, "user_id": 5488294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/938a8a2bc9093074d7fdc16a3f336ecd?s=128&d=identicon&r=PG&f=1", "display_name": "mik mik", "link": "https://stackoverflow.com/users/5488294/mik-mik"}, "edited": false, "score": 1, "creation_date": 1446104001, "post_id": 33385905, "comment_id": 54607268, "body": "Yeah, also on my computer I got different results on get_env every time. I think it&#39;s actually ststem-dependent, as you suggested. Anyway, thanks for the help and for the detailed explanation!"}], "tags": [], "owner": {"reputation": 1426, "user_id": 4956813, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/pkYGf.jpg?s=128&g=1", "display_name": "John M", "link": "https://stackoverflow.com/users/4956813/john-m"}, "is_accepted": true, "score": 6, "last_activity_date": 1446021927, "last_edit_date": 1446021927, "creation_date": 1446020087, "answer_id": 33385905, "question_id": 33385171, "link": "https://stackoverflow.com/questions/33385171/format-string-exploit-ends-in-segfault/33385905#33385905", "title": "Format string exploit ends in segfault", "body": "<p>Not all processes in a computer share the same <a href=\"https://en.wikipedia.org/wiki/Virtual_address_space\" rel=\"nofollow\">memory space</a> for security reasons.  What do I mean when I talk about different memory spaces?  Consider the following 2 programs:</p>\n\n<pre><code>//program 1\nint main(int argc, char** argv){\n    printf(\"%02x\", *((uint8_t*)0xf00fba11));\n    return 0;\n}\n\n//program 2\nint main(int argc, char** argv){\n    printf(\"%02x\", *((uint8_t*)0xf00fba11));\n    return 0;\n}\n</code></pre>\n\n<p>If these programs were to be run simultaneously (and assuming they don't segfault (which they almost certainly would)), they would print different values.  How can it be??  They both access memory location 0xf00fba11!... or do they?</p>\n\n<p>In order to understand what is happening here, we first need to understand what is happening when the cpu loads a value from memory.  To load a value from memory, the cpu sends a request to RAM, like this:</p>\n\n<pre><code> cpu\n|-------------|                                           |---------|\n| read        |-------address out to RAM (0xf00fba11)----&gt;|  RAM    |\n|             |                                           |         |\n| *0xf00fba11 |&lt;---------data coming back to CPU----------|         |\n|-------------|                                           |---------|\n</code></pre>\n\n<p>There is a special piece of hardware between the cpu and the ram that translates addresses from \"virtual addresses\" to \"physical addresses\", it is called the Memory Management Unit (<a href=\"https://en.wikipedia.org/wiki/Memory_management_unit\" rel=\"nofollow\">MMU</a> for short).  If a program asks for the value at address 0x1000, the MMU might \"remap\" 0x1000 to 0x8000.  If the address 0x1000 is always replaced with 0x8000 before it reaches the RAM for all reads and writes, this might seem like a pointless operation.  The program still operates the exact same way... so what's the big deal?</p>\n\n<p>The big deal is that now programs 1 and 2 cannot access each other's data.  The MMU can be configured so that there does NOT exist an address that program 1 can read from which contains one of program 2's variables.  This \"mapping\" is unique for each process (mostly) and is configured by the operating system.</p>\n\n<p>Here is an example of how an MMU might affect our toy \"f00fba11\" example.</p>\n\n<pre><code>Process 1\n cpu\n|-------------|                                           |---------|\n| read        |---0xf00fba11---| MMU |--0x1000ba11-------&gt;|  RAM    |\n|             |                                           |         |\n| *0xf00fba11 |&lt;---------data coming back to CPU----------|         |\n|-------------|                                           |---------|\n\n    Process 2\n cpu\n|-------------|                                           |---------|\n| read        |---0xf00fba11---| MMU |--0x7000ba11-------&gt;|  RAM    |\n|             |                                           |         |\n| *0xf00fba11 |&lt;---------data coming back to CPU----------|         |\n|-------------|                                           |---------|\n</code></pre>\n\n<p>Both process 1 and process 2 asked for the data stored at memory address 0xf00fba11, but they were given 2 completely different RAM cells!  This brillant invention is called \"virtual memory\".  We say that 2 processes have different \"address spaces\" if the MMU will map their memories differently.  The operating system decides on these mappings and configures the MMU to abide by them, thereby \"insulating\" processes from each other.  Consider 2 processes and the memory addresses they might want to access.</p>\n\n<pre><code>Process 1\nasks for          | gets physical address\n------------------------------------\n 0x0000 - 0x0fff  | ERROR SEGFAULT\n 0x1000 - 0x1fff  | 0x70000 - 0x70fff\n 0x2000 - 0x2fff  | 0x30000 - 0x30fff\n 0x3000 - 0x3fff  | 0xa7000 - 0xa7fff\n      etc....     | etc.....\n\n\nProcess 2\nasks for          | gets physical address\n------------------------------------\n 0x0000 - 0x0fff  | ERROR SEGFAULT\n 0x1000 - 0x1fff  | 0xb1000 - 0xb1fff\n 0x2000 - 0x2fff  | 0x40000 - 0x40fff\n 0x3000 - 0x3fff  | 0x1c000 - 0x1cfff\n      etc....     | etc.....\n</code></pre>\n\n<p>So if an envrionment variable is loaded at memory address 0x7ffe2a673d84 in process 1, it might translate to physical address 0x63002a673d84.  Moreover, when process 2 tries to access *0x7ff32a673d84, it will be mapped to a totally different address, or, <strong>in your case, it may be UNMAPPED</strong> for process 2, leading to a <strong><em>SEGFAULT.</em></strong></p>\n\n<p>So the bad news is, I don't think there is any way you can \"fix\" this issue with your code.  Doing what you are trying to do will either give you a segfault or random, useless data.  To get at the data you are interested in, you would need to peek in at the MMU configuration settings and alter them, which you aren't allowed to do unless you are running at an elevated privilege level.</p>\n\n<p>Before we part, it's worth noting there may be a few <strong>shared</strong> addresses between processes in order to pass data back and forth between the 2 processes or to access shared software libraries.  That is, 0x1000 will translate to 0x5000 for several different processes.</p>\n\n<p>Or maybe I have no idea what you're talking about.  I didn't really follow the line about <code>./getenv PATH ./fmt_vuln</code></p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5852858, "user_type": "registered", "profile_image": "https://graph.facebook.com/894380434002465/picture?type=large", "display_name": "\u0413\u043b\u0435\u0431 \u0416\u0435\u0433\u043b\u043e\u0432", "link": "https://stackoverflow.com/users/5852858/%d0%93%d0%bb%d0%b5%d0%b1-%d0%96%d0%b5%d0%b3%d0%bb%d0%be%d0%b2"}, "is_accepted": false, "score": 0, "last_activity_date": 1565279414, "last_edit_date": 1565279414, "creation_date": 1565272994, "answer_id": 57414463, "question_id": 33385171, "link": "https://stackoverflow.com/questions/33385171/format-string-exploit-ends-in-segfault/57414463#57414463", "title": "Format string exploit ends in segfault", "body": "<p>You use 64-bit system, so you addresses has 8 bytes. </p>\n\n<p>Look at that address <code>0x7ffe2a673d84</code>, it has only 6 bytes. This means that the higher two bytes are zero. But you can't simply provide zero byte as a hex string like <code>\\xff\\xaa\\xbb\\x00</code> because the program will interpret that zero byte as the end of the string. </p>\n\n<p>You need  to use 32-bit system to experiment with that, x64 architecture will not allow you do that exploit.</p>\n"}, {"tags": [], "owner": {"reputation": 20191, "user_id": 199649, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/894eaf7d342e28755670466829510b36?s=128&d=identicon&r=PG", "display_name": "charlax", "link": "https://stackoverflow.com/users/199649/charlax"}, "is_accepted": false, "score": 0, "last_activity_date": 1576144974, "creation_date": 1576144974, "answer_id": 59302030, "question_id": 33385171, "link": "https://stackoverflow.com/questions/33385171/format-string-exploit-ends-in-segfault/59302030#59302030", "title": "Format string exploit ends in segfault", "body": "<p>Stumbled upon the same thing (reading the same book).</p>\n\n<p><code>getenv_addr</code> is not super reliable. I cheated by displaying the exact address of <code>PATH</code> in <code>fmt_vuln.c</code> by adding:</p>\n\n<pre><code>printf(\"[*] %s is at %p\\n\", \"PATH\", getenv(\"PATH\"));\n</code></pre>\n\n<p>This will give you an address that should work and shouldn't be too far from the one given by <code>getenv_addr</code>.</p>\n\n<p>Also, make sure to disable ASLR (address space layout randomization - which basically randomizes address space positions):</p>\n\n<pre><code>echo 0 | sudo tee /proc/sys/kernel/randomize_va_space\n</code></pre>\n\n<p>And make sure to compile a 32-bit program (<code>gcc -m32</code>).</p>\n"}], "owner": {"reputation": 139, "user_id": 5488294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/938a8a2bc9093074d7fdc16a3f336ecd?s=128&d=identicon&r=PG&f=1", "display_name": "mik mik", "link": "https://stackoverflow.com/users/5488294/mik-mik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1706, "favorite_count": 2, "accepted_answer_id": 33385905, "answer_count": 3, "score": 6, "last_activity_date": 1576144974, "creation_date": 1446017140, "last_edit_date": 1446017168, "question_id": 33385171, "link": "https://stackoverflow.com/questions/33385171/format-string-exploit-ends-in-segfault", "title": "Format string exploit ends in segfault", "body": "<p>I'm reading now the \"Hacking - The Art of Exploitation\" book.</p>\n\n<p>This is my simplified version of a code for exploiting format-strings.</p>\n\n<pre><code>/* fmt_vuln.c */\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main (int argc, char *argv[]){\n  char text [1024];\n\n  if (argc &lt; 2){\n    printf (\"Usage: %s &lt;text to print&gt;\\n\", argv[0]);\n    exit (0);\n  }\n  strcpy (text, argv[1]);\n  printf (\"The wrong way to print user-controlled input:\\n\");\n  printf (text);\n  printf (\"\\n\");\n  return 0;\n}\n</code></pre>\n\n<p>I run this command:</p>\n\n<pre><code>./fmt_vuln AAAA%08x.%08x.%08x.%08x.%08x.%08x.%08x.%08x\n</code></pre>\n\n<p>I got:</p>\n\n<pre><code>The wrong way to print user-controlled input:\nAAAA59055000.58e347a0.58b68620.ffffffff.00000000.fba56ac8.58a9fc58.41414141\n</code></pre>\n\n<p>So, I saw that the 8th format parameter is reading from the beginning of the format string.</p>\n\n<p>Then, When I run the command:</p>\n\n<pre><code>./getenv PATH ./fmt_vuln\n</code></pre>\n\n<p>I got the address: </p>\n\n<pre><code>0x7ffe2a673d84\n</code></pre>\n\n<p>So I tried to run: (in order to print the PATH variable)</p>\n\n<pre><code>./fmt_vuln $(printf \"\\x84\\x3d\\x67\\x2a\\xfe\\x7f\")%08x.%08x.%08x.%08x.%08x.%08x.%08x.%s\n</code></pre>\n\n<p>I got:</p>\n\n<pre><code>The wrong way to print user-controlled input:\nSegmentation fault\n</code></pre>\n\n<p>Why I got the segfault? from the getenv program I got the address of PATH, but the program still crashes...</p>\n\n<p>Appreciate the help.</p>\n"}, {"tags": ["objective-c", "c", "clang"], "comments": [{"owner": {"reputation": 7866, "user_id": 531840, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/02a5c102e4b3adced1096222d2997e5a?s=128&d=identicon&r=PG", "display_name": "Constantin", "link": "https://stackoverflow.com/users/531840/constantin"}, "edited": false, "score": 0, "creation_date": 1446017415, "post_id": 33385155, "comment_id": 54563072, "body": "extern is not resolved at compile-time, but at linking-time"}, {"owner": {"reputation": 9765, "user_id": 923794, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/39295680c5745451291043469e408c18?s=128&d=identicon&r=PG", "display_name": "cfi", "link": "https://stackoverflow.com/users/923794/cfi"}, "reply_to_user": {"reputation": 115642, "user_id": 299924, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/71fc84230717311db1410d7106273128?s=128&d=identicon&r=PG", "display_name": "trojanfoe", "link": "https://stackoverflow.com/users/299924/trojanfoe"}, "edited": false, "score": 0, "creation_date": 1446025774, "post_id": 33385155, "comment_id": 54567564, "body": "@trojanfoe: Different question, and different answer than the proposed duplicate."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1446027875, "post_id": 33385155, "comment_id": 54568933, "body": "If objective-C is anything like C, then <code>const</code> is not a constant, but read-only variable, and thus cannot be used in constant expressions like in initializer."}], "owner": {"reputation": 9448, "user_id": 2923345, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MZsY1.png?s=128&g=1", "display_name": "nalexn", "link": "https://stackoverflow.com/users/2923345/nalexn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 323, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1446025786, "creation_date": 1446017084, "last_edit_date": 1495542176, "question_id": 33385155, "link": "https://stackoverflow.com/questions/33385155/extern-const-compiler-error-initialiser-element-is-not-a-compile-time-constant", "title": "extern const compiler error: Initialiser element is not a compile-time constant", "body": "<p>I have a custom struct defined in the following way</p>\n\n<pre><code>typedef struct {\n    CGFloat value;\n    CGAffineTransform transform;\n} MyStruct;\n</code></pre>\n\n<p>My intent is to define a constant representing the default content of this struct.</p>\n\n<p>I've tried doing this with <code>extern const</code>:</p>\n\n<p>*.h file</p>\n\n<pre><code>extern MyStruct const MyStructDefault;\n</code></pre>\n\n<p>*m file</p>\n\n<pre><code>MyStruct const MyStructDefault = { 0., CGAffineTransformIdentity };\n</code></pre>\n\n<p>But Xcode points an error next to the <code>CGAffineTransformIdentity</code></p>\n\n<blockquote>\n  <p>Initialiser element is not a compile-time constant</p>\n</blockquote>\n\n<p>I know I can use <code>#define</code> in the header file or make the <code>MyStructDefault()</code> a function, but I'm curious why the original approach doesn't work, since <code>CGAffineTransformIdentity</code> is also defined as extern const thereafter must be a compile-time constant.</p>\n\n<p><strong>Update</strong></p>\n\n<p>This question is not really a duplicate of <a href=\"https://stackoverflow.com/questions/6143107/compiler-error-initializer-element-is-not-a-compile-time-constant\">another question</a>, the fact that <code>extern const</code> is not really a compile-time resolved constant is not obvious.</p>\n"}, {"tags": ["c", "macros"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1446024013, "post_id": 33385152, "comment_id": 54566431, "body": "Please don&#39;t write macros like these; don&#39;t try to change the C language. You can assume that every other C programmer knows C. You can&#39;t assume that they know or care to learn about your home-brewed, secret macro language. This is very bad programming practice."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1446024047, "post_id": 33385152, "comment_id": 54566447, "body": "It doesn&#39;t look like a good idea to put a double-nested loop in a macro called <code>each</code>.  That logic is more complex than you can consider &quot;boilerplate&quot;.  Also, you should user UPPERCASE macro names when you&#39;re doing stuff that isn&#39;t function-like.  (e.g. a <code>max</code> macro might be ok if it uses GNU C features to avoid evaluating its args multiple times.)"}], "answers": [{"comments": [{"owner": {"reputation": 145, "user_id": 4725963, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2511faca24d010b720843890f5d86d87?s=128&d=identicon&r=PG&f=1", "display_name": "nwaicaethi", "link": "https://stackoverflow.com/users/4725963/nwaicaethi"}, "edited": false, "score": 0, "creation_date": 1446025083, "post_id": 33385359, "comment_id": 54567125, "body": "It&#39;s no reason, I do keep != keep twice"}], "tags": [], "owner": {"reputation": 2619, "user_id": 589026, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/wVUyz.jpg?s=128&g=1", "display_name": "Raghu Srikanth Reddy", "link": "https://stackoverflow.com/users/589026/raghu-srikanth-reddy"}, "is_accepted": false, "score": 0, "last_activity_date": 1446017796, "creation_date": 1446017796, "answer_id": 33385359, "question_id": 33385152, "link": "https://stackoverflow.com/questions/33385152/c-each-macro-doesnt-iterate-all-elements/33385359#33385359", "title": "c &quot;each&quot; macro doesn&#39;t iterate all elements", "body": "<p>Considering the below terminology</p>\n\n<pre><code>for(initialization statement; condition; update statement) {\n       code/s to be executed; \n}\n</code></pre>\n\n<p>Your <code>condition</code> has a statement <code>keep &amp;&amp; count != size;</code> which is checking for the <code>keep</code> value to be non-zero.</p>\n\n<p>And in the <code>update statement</code> you are doing <code>keep = !keep</code> which is making <code>keep</code> value to <code>0</code>.</p>\n\n<p>Hence your loop is exiting in single iteration. Modify your condition accordingly to loop multiple times.</p>\n"}, {"tags": [], "owner": {"reputation": 1761, "user_id": 2641959, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/4c6d8336fe8a675f9f20f519faec5fc0?s=128&d=identicon&r=PG&f=1", "display_name": "Mohan", "link": "https://stackoverflow.com/users/2641959/mohan"}, "is_accepted": false, "score": 0, "last_activity_date": 1446030678, "last_edit_date": 1446030678, "creation_date": 1446023556, "answer_id": 33386955, "question_id": 33385152, "link": "https://stackoverflow.com/questions/33385152/c-each-macro-doesnt-iterate-all-elements/33386955#33386955", "title": "c &quot;each&quot; macro doesn&#39;t iterate all elements", "body": "<p>Here macro not creating any problem macro just place code whenever you used,</p>\n\n<p>you need to check your <code>for</code> loops ,</p>\n\n<pre><code>size = sizeof(array) / sizeof *(array); \n</code></pre>\n\n<p>In above statement <code>sizeof(array)</code> and <code>sizeof *(array)</code> both are giving <code>sizeof</code> pointers. So the <code>size</code> is always 1 .</p>\n\n<p>Next is inside or 2nd <code>for</code> loop iterate only once because you did <code>keep = !keep</code> which change the <code>keep = 0</code> ;</p>\n\n<p>So now it's completed first iteration, it going to update <code>keep = !keep, count++)</code> , After that it check the condition <code>keep &amp;&amp; count != size</code> in this </p>\n\n<pre><code>keep = 1;\n</code></pre>\n\n<p><code>count= 1;</code> and </p>\n\n<pre><code>size = 1;\n</code></pre>\n\n<p>so it is terminating the loop , so check your for loop condition part.</p>\n\n<p>if you have intention to just iterate for all items in char array then there are number of solution do that , I just listing one of them change in your code </p>\n\n<p>In macro </p>\n\n<pre><code>for (int keep = 1, count = 0, size = sizeof(ss) / sizeof *(ss); ss[count] != \"\\0\"; keep = !keep, count++) \\\n</code></pre>\n\n<p>In main function </p>\n\n<pre><code>char const *ss[] = { \"s1\", \"s2\",\"\\0\" };\n</code></pre>\n\n<p>Now you will get as expected output.</p>\n"}, {"comments": [{"owner": {"reputation": 145, "user_id": 4725963, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2511faca24d010b720843890f5d86d87?s=128&d=identicon&r=PG&f=1", "display_name": "nwaicaethi", "link": "https://stackoverflow.com/users/4725963/nwaicaethi"}, "edited": false, "score": 0, "creation_date": 1446039466, "post_id": 33387171, "comment_id": 54576482, "body": "You&#39;re right, I use variable parameters to rewrite #join"}], "tags": [], "owner": {"reputation": 17713, "user_id": 226648, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3196df423fd95dc4fce7dfadb8ec9953?s=128&d=identicon&r=PG", "display_name": "el.pescado", "link": "https://stackoverflow.com/users/226648/el-pescado"}, "is_accepted": true, "score": 1, "last_activity_date": 1446024521, "last_edit_date": 1495542217, "creation_date": 1446024182, "answer_id": 33387171, "question_id": 33385152, "link": "https://stackoverflow.com/questions/33385152/c-each-macro-doesnt-iterate-all-elements/33387171#33387171", "title": "c &quot;each&quot; macro doesn&#39;t iterate all elements", "body": "<p>If you call <code>each</code> from <code>main</code>, i.e. place where <code>ss</code> is defined, your program works as expected:</p>\n\n<pre><code>int main(int argc, char **argv) {\n    char const *ss[] = {\"s1\", \"s2\"};\n\n    each(char *s, ss) {\n        puts(s);\n    }\n};\n</code></pre>\n\n<p>It works because <code>each</code> has access to <code>ss</code> declaration, so that <code>sizeof a / sizeof *a</code> is equal to number of elements in array.</p>\n\n<p>The problem is that if you pass <code>ss</code> array to another function (e.g. <code>join</code>), it <a href=\"http://c-faq.com/aryptr/aryptr2.html\" rel=\"nofollow noreferrer\">decays to pointer</a>. As <code>ss</code> in <code>join</code> is a pointer, <code>sizeof array</code> no longer refers to size of array, and expresssion <code>sizeof a / sizeof *a</code> yields <code>sizeof(char**)/sizeof(char*)</code> which is <code>1</code> on your platform.</p>\n\n<p><strong>See also</strong></p>\n\n<p><a href=\"https://stackoverflow.com/questions/1461432/what-is-array-decaying\">What is array decaying?</a></p>\n"}], "owner": {"reputation": 145, "user_id": 4725963, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2511faca24d010b720843890f5d86d87?s=128&d=identicon&r=PG&f=1", "display_name": "nwaicaethi", "link": "https://stackoverflow.com/users/4725963/nwaicaethi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 33387171, "answer_count": 3, "score": 2, "last_activity_date": 1446030678, "creation_date": 1446017078, "question_id": 33385152, "link": "https://stackoverflow.com/questions/33385152/c-each-macro-doesnt-iterate-all-elements", "title": "c &quot;each&quot; macro doesn&#39;t iterate all elements", "body": "<p>here is my code, I find \"each\" macro only iterate first element and output \"s1\", how to make it iterate all elements?</p>\n\n<pre><code>#include \"stdio.h\"\n\n#define each(item, array) \\\n    for (int keep = 1, count = 0, size = sizeof(array) / sizeof *(array); keep &amp;&amp; count != size; keep = !keep, count++) \\\n        for (item = array[count]; keep; keep = !keep)\n\nchar *join(char const *ss[]) {\n    char *r = \"\";\n    each(char *s, ss) {\n            puts(s);\n        }\n    return (r);\n}\n\nint main(int argc, char **argv) {\n    char const *ss[] = {\"s1\", \"s2\"};\n    join(ss);\n};\n</code></pre>\n"}, {"tags": ["c", "macos", "name-mangling", "dlsym", "symbol-table"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1446017076, "post_id": 33384985, "comment_id": 54562924, "body": "<code>system()</code>isn&#39;t a syscall. It will use one for creating a new process."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1446017396, "post_id": 33384985, "comment_id": 54563066, "body": "The library is probably just called <code>libc</code> as <code>system()</code> is part of the C standard. In any case, it is always linked as long as you don&#39;t instruct your compiler specifically not to. You should <b>always</b> include the header declaring the function you want to use."}, {"owner": {"reputation": 3214, "user_id": 4333809, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eb246fedefccc8b02a3efb989143d3b9?s=128&d=identicon&r=PG&f=1", "display_name": "Zohar81", "link": "https://stackoverflow.com/users/4333809/zohar81"}, "edited": false, "score": 0, "creation_date": 1446017713, "post_id": 33384985, "comment_id": 54563198, "body": "@FelixPalmen, thanks for your comments, I edited my question accordingly. The function I mentioned in my question is &#39;system&#39; but i referred for the more general case of obtaining symbol name from function during runtime. is there any way I can achieve this goal ?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1446017864, "post_id": 33384985, "comment_id": 54563268, "body": "Sounds a bit like an <i>xy-problem</i> to me. Symbols are used by the (dynamic) linker, so no, at runtime (that is, <i>after</i> linking was done), there&#39;s no way to access them. What problem are you trying to solve doing this?"}, {"owner": {"reputation": 3214, "user_id": 4333809, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eb246fedefccc8b02a3efb989143d3b9?s=128&d=identicon&r=PG&f=1", "display_name": "Zohar81", "link": "https://stackoverflow.com/users/4333809/zohar81"}, "edited": false, "score": 0, "creation_date": 1446018151, "post_id": 33384985, "comment_id": 54563410, "body": "@FelixPalmen, I need this for function hooking. First, i&#39;m trying to apply the method of _dyld_lookup_and_bind (from dylid.h) in order to get the pointer of this symbol. then, I use this pointer to override the function by my own implementation."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1446019087, "post_id": 33384985, "comment_id": 54563830, "body": "I didn&#39;t do this so far, but you will get the pointer of <code>system()</code> at runtime by just treating <code>system</code> as a pointer. Wouldn&#39;t that be enough? If not, suggest to ask specifically about function hooking, there might be someone knowing a good answer."}], "owner": {"reputation": 3214, "user_id": 4333809, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eb246fedefccc8b02a3efb989143d3b9?s=128&d=identicon&r=PG&f=1", "display_name": "Zohar81", "link": "https://stackoverflow.com/users/4333809/zohar81"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 112, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1446036738, "creation_date": 1446016334, "last_edit_date": 1446036738, "question_id": 33384985, "link": "https://stackoverflow.com/questions/33384985/symbol-mangled-with-suffix-unix2003-when-compiling-with-proper-header-includ", "title": "Symbol mangled with suffix &quot;$UNIX2003&quot;, when compiling with proper header included", "body": "<p>I'd like to find out which symbol is called when my code runs 'system' function. </p>\n\n<p>In my sample code, when the header stdlib.h is specifically included, the symbol is called _system$UNIX2003, and when the header isn't included, there (probably) default symbol named _system (without the suffix $UNIX2003) </p>\n\n<p>The following image shows my experiment results : \n<a href=\"https://i.stack.imgur.com/k3xrp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/k3xrp.png\" alt=\"enter image description here\"></a>\nWhy do we have different symbols for system ?\nIs there anyway to detect the correct symbol during runtime (I tried with dlsym, but i need handle for containing dynamic library, but couldn't figure out with library should i load with dlopen)  ?</p>\n\n<blockquote>\n  <p>EDIT : this strange symbol mangling occur to me only when compiling under 32bits arch. </p>\n  \n  <p>EDIT2: I was suggested to use implicit function pointer to acquire the address of the right symbol. but it won't work unless i specifically call that function in my code. otherwise, I get compilation error of using undeclared identifier 'system'</p>\n</blockquote>\n"}, {"tags": ["ios", "c", "block"], "comments": [{"owner": {"reputation": 1682, "user_id": 4405051, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh6.googleusercontent.com/-GQlLg2oSQQQ/AAAAAAAAAAI/AAAAAAAABQM/DNzSB7MCqPs/photo.jpg?sz=128", "display_name": "kientux", "link": "https://stackoverflow.com/users/4405051/kientux"}, "edited": false, "score": 0, "creation_date": 1446016208, "post_id": 33384828, "comment_id": 54562578, "body": "You do not need to implement, because C code <i>just</i> runs fine in Objective-C?"}, {"owner": {"reputation": 12144, "user_id": 72882, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9d17e71eae127205da470fffa2dba899?s=128&d=identicon&r=PG", "display_name": "dandan78", "link": "https://stackoverflow.com/users/72882/dandan78"}, "edited": false, "score": 1, "creation_date": 1446016481, "post_id": 33384828, "comment_id": 54562693, "body": "Do not post code as an image."}], "answers": [{"comments": [{"owner": {"reputation": 1929, "user_id": 1737752, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/DFrse.jpg?s=128&g=1", "display_name": "Allan  Macatingrao", "link": "https://stackoverflow.com/users/1737752/allan-macatingrao"}, "edited": false, "score": 0, "creation_date": 1446018124, "post_id": 33385067, "comment_id": 54563396, "body": "I will just use notificationcenter, all I need is the cstate value. Will it possible?"}, {"owner": {"reputation": 115642, "user_id": 299924, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/71fc84230717311db1410d7106273128?s=128&d=identicon&r=PG", "display_name": "trojanfoe", "link": "https://stackoverflow.com/users/299924/trojanfoe"}, "reply_to_user": {"reputation": 1929, "user_id": 1737752, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/DFrse.jpg?s=128&g=1", "display_name": "Allan  Macatingrao", "link": "https://stackoverflow.com/users/1737752/allan-macatingrao"}, "edited": false, "score": 0, "creation_date": 1446018222, "post_id": 33385067, "comment_id": 54563441, "body": "@Hokage Yeah I would say so."}], "tags": [], "owner": {"reputation": 115642, "user_id": 299924, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/71fc84230717311db1410d7106273128?s=128&d=identicon&r=PG", "display_name": "trojanfoe", "link": "https://stackoverflow.com/users/299924/trojanfoe"}, "is_accepted": true, "score": 2, "last_activity_date": 1446016953, "last_edit_date": 1446016953, "creation_date": 1446016639, "answer_id": 33385067, "question_id": 33384828, "link": "https://stackoverflow.com/questions/33384828/implement-c-callback-in-objective-c/33385067#33385067", "title": "Implement C Callback in Objective-C", "body": "<p>You are attempting to use a <em>block</em>, when all you need is a (possibly <code>static</code>) C-function, as follows:</p>\n\n<pre><code>static void _linphoneCallback(LinphoneCore *lc, LinphoneCall *call,\n                              LinphoneCallState cstate, const char *message)\n{\n    // do thing\n}\n\n...\n_vTable-&gt;call_state_changed = _linphoneCallback;\n</code></pre>\n\n<p>However I cannot see how you'd pass an Objective-C class instance to the callback, making the callback difficult to use in any language, including C.</p>\n"}, {"comments": [{"owner": {"reputation": 115642, "user_id": 299924, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/71fc84230717311db1410d7106273128?s=128&d=identicon&r=PG", "display_name": "trojanfoe", "link": "https://stackoverflow.com/users/299924/trojanfoe"}, "edited": false, "score": 0, "creation_date": 1446016846, "post_id": 33385092, "comment_id": 54562842, "body": "The callback is not a block."}, {"owner": {"reputation": 2721, "user_id": 483802, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/14bfdfd16c802913ae2cb17894335412?s=128&d=identicon&r=PG", "display_name": "sahara108", "link": "https://stackoverflow.com/users/483802/sahara108"}, "reply_to_user": {"reputation": 115642, "user_id": 299924, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/71fc84230717311db1410d7106273128?s=128&d=identicon&r=PG", "display_name": "trojanfoe", "link": "https://stackoverflow.com/users/299924/trojanfoe"}, "edited": false, "score": 0, "creation_date": 1446017214, "post_id": 33385092, "comment_id": 54562982, "body": "Ah you are right. I was thinking that he want to correct the block syntax."}], "tags": [], "owner": {"reputation": 2721, "user_id": 483802, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/14bfdfd16c802913ae2cb17894335412?s=128&d=identicon&r=PG", "display_name": "sahara108", "link": "https://stackoverflow.com/users/483802/sahara108"}, "is_accepted": false, "score": 0, "last_activity_date": 1446016752, "creation_date": 1446016752, "answer_id": 33385092, "question_id": 33384828, "link": "https://stackoverflow.com/questions/33384828/implement-c-callback-in-objective-c/33385092#33385092", "title": "Implement C Callback in Objective-C", "body": "<p>Define the callback like this \n<code>typedef void (^LinphoneCoreCallStateChangedCb)(LinphoneCore *lc, LinphoneCall *call, LinphoneCallState cstate, const char *message);</code></p>\n\n<p>And use it:\n<code>LinphoneCoreCallStateChangedCb callback = ^(LinphoneCore *lc, LinphoneCall *call, LinphoneCallState cstate, const char *message){};</code></p>\n"}], "owner": {"reputation": 1929, "user_id": 1737752, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/DFrse.jpg?s=128&g=1", "display_name": "Allan  Macatingrao", "link": "https://stackoverflow.com/users/1737752/allan-macatingrao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 169, "favorite_count": 0, "accepted_answer_id": 33385067, "answer_count": 2, "score": -1, "last_activity_date": 1446019075, "creation_date": 1446015729, "last_edit_date": 1446019075, "question_id": 33384828, "link": "https://stackoverflow.com/questions/33384828/implement-c-callback-in-objective-c", "title": "Implement C Callback in Objective-C", "body": "<p>Im using SDK (Linphone) written in C, and I need to implement call state change handler function declared in C file into objective-C or best in Swift environment.</p>\n\n<p>Here is the declaration in C:</p>\n\n<pre><code>// declaration\nvoid call_state_changed(LinphoneCore *lc, LinphoneCall *call, LinphoneCallState cstate, const char *msg);\n\n// typedef\ntypedef void (*LinphoneCoreCallStateChangedCb)(LinphoneCore *lc, LinphoneCall *call, LinphoneCallState cstate, const char *message);\n</code></pre>\n\n<p>Here the struct containing the property for LinphoneCoreCallStateChangedCb that is needed to implement</p>\n\n<pre><code>typedef struct _LinphoneCoreVTable{\n   LinphoneCoreCallStateChangedCb call_state_changed;/**&lt;Notifies call state changes*/\n} LinphoneCoreVTable;\n</code></pre>\n\n<p>Here is my attempt:</p>\n\n<pre><code>_vTable-&gt;call_state_changed = ^(LinphoneCore *lc, LinphoneCall *call, LinphoneCallState cstate, const char *message)\n{\n\n}\n</code></pre>\n\n<p>Here is the error:\n<a href=\"https://i.stack.imgur.com/zYA9m.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zYA9m.png\" alt=\"enter image description here\"></a></p>\n\n<p>What's the correct syntax for this? </p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1446015961, "post_id": 33384806, "comment_id": 54562467, "body": "You do know about structures? You do know about arrays? You do (obviously) know about loops. Explore those three concepts and experiment with them."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1446016236, "post_id": 33384806, "comment_id": 54562590, "body": "If you do not want <code>number</code>, then there i no need to fill it. <code>fscanf</code> will allow the use of the <code>assignment suppression operator &#39;*&#39;</code> (e.g. <code>fscanf(fp, &quot;%*d %f %f %f %f&quot;,  &amp;mark1, &amp;mark2, &amp;mark3, &amp;mark4 )</code> Using <code>&#39;*&#39;</code> will effectively read and discard the value without adding to the match count."}, {"owner": {"reputation": 41, "user_id": 5353155, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4a7a63671a33f21deb3c9454a835178a?s=128&d=identicon&r=PG&f=1", "display_name": "sandalwood", "link": "https://stackoverflow.com/users/5353155/sandalwood"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1446016425, "post_id": 33384806, "comment_id": 54562670, "body": "@JoachimPileborg I completely forgot about arrays, thank you.  @DavidC.Rankin Sorry but I think you misunderstood, it is not that I don&#39;t want <code>number</code> but I just wanted to be able to read values from each column and add those together rather than a row. Thank you."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1446146090, "post_id": 33384806, "comment_id": 54634784, "body": "this line: <code>printf(&quot;File cannot be opened&quot;);</code> fails to tell the user the root cause of the problem with opening the file.  Suggest: `perror(&quot;fopen failed for inpput of grades.txt&quot;);  Which tells the user what file failed.  The perror() function will also output the relevant system error message (selected by the value in errno) that says why the system thinks the call to fopen() failed"}], "answers": [{"tags": [], "owner": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "is_accepted": true, "score": 3, "last_activity_date": 1446015887, "creation_date": 1446015887, "answer_id": 33384870, "question_id": 33384806, "link": "https://stackoverflow.com/questions/33384806/read-values-from-a-column-in-a-file/33384870#33384870", "title": "Read values from a column in a file", "body": "<p>You can keep a variable <code>sum</code> to add all the values of a particular column, and later use that to get the average, something like</p>\n\n<pre><code>int sum=0, n=0;\n\nwhile(fscanf(fp, \"%d %f %f %f %f\", &amp;number, &amp;mark1, &amp;mark2, &amp;mark3, &amp;mark4 ) != EOF){\n    //code to calculate average and print output\n    //Below is the code I used to find the average of the line (not what I want to do)\n    average = (mark1 + mark2 + mark3+ mark4)/4;\n    printf(\"Average for %d : %.2f\\n\", number, average);\n\n    sum += mark2 //this can be any mark depending on your requirement\n    n++;         //this is to keep track of the number of lines\n\n}\n\nprintf(\"the average of column 2 is %d\", (sum/n) );\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8777, "user_id": 3102264, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/G69VV.jpg?s=128&g=1", "display_name": "mpromonet", "link": "https://stackoverflow.com/users/3102264/mpromonet"}, "edited": false, "score": 0, "creation_date": 1446017418, "post_id": 33385050, "comment_id": 54563073, "body": "Don&#39;t you think It could be easier to understand replacing <code>somme</code> with <code>sum</code> ?"}, {"owner": {"reputation": 41, "user_id": 5353155, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4a7a63671a33f21deb3c9454a835178a?s=128&d=identicon&r=PG&f=1", "display_name": "sandalwood", "link": "https://stackoverflow.com/users/5353155/sandalwood"}, "edited": false, "score": 0, "creation_date": 1446018273, "post_id": 33385050, "comment_id": 54563466, "body": "Yes it would but this was only an example of how I would approach it not something I would use one for one."}], "tags": [], "owner": {"reputation": 1541, "user_id": 5374489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83871d811321a9729d2afa5cd7d17b8f?s=128&d=identicon&r=PG&f=1", "display_name": "V. Michel", "link": "https://stackoverflow.com/users/5374489/v-michel"}, "is_accepted": false, "score": 2, "last_activity_date": 1446016981, "last_edit_date": 1446016981, "creation_date": 1446016568, "answer_id": 33385050, "question_id": 33384806, "link": "https://stackoverflow.com/questions/33384806/read-values-from-a-column-in-a-file/33385050#33385050", "title": "Read values from a column in a file", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(){\n\n    FILE *fp;\n    int id;\n    float mark1;\n    float mark2;\n    float mark3;\n    float mark4;\n    int number;\n    float somme[4];\n    int nbLg=0;\n    int i;\n    fp= fopen(\"grades.txt\", \"r\");\n\n    if(fp == NULL){\n        printf(\"File cannot be opened\");\n        exit(-1);\n    }\n\n    while(fscanf(fp, \"%d %f %f %f %f\", &amp;number, &amp;mark1, &amp;mark2, &amp;mark3, &amp;mark4 ) != EOF){\n        nbLg++;\n        somme[0]+= mark1;\n        somme[1]+= mark2;\n        somme[2]+= mark3;\n        somme[3]+= mark4;\n\n    }\n\n    for(i=0;i&lt;=3;i++) {\n        printf(\"Average for %d : %.2f\\n\", i+1, somme[i] / (float) nbLg);\n    }\n    fclose(fp);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1446147822, "post_id": 33423199, "comment_id": 54635754, "body": "it is better to check the returned value from <code>fscanf()</code> for successful input conversions because any other value is an error.   If you wanted to recover from mal-formed lines in the file, the read each line (via <code>fgets()</code>) into a buffer and use <code>sscanf()</code> to extract each field"}], "tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1446147555, "creation_date": 1446147555, "answer_id": 33423199, "question_id": 33384806, "link": "https://stackoverflow.com/questions/33384806/read-values-from-a-column-in-a-file/33423199#33423199", "title": "Read values from a column in a file", "body": "<p>the following code is:</p>\n\n<ul>\n<li>more complex than necessary to keep it simple, easy to follow.</li>\n<li>compiles cleanly</li>\n<li>performs the desired function</li>\n</ul>\n\n<p>A bit of thinking and paper//pencil work would have given you similar logic</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main( void )\n{\n\n    FILE *fp;\n\n    float mark1;\n    float mark1Average = 0.0f;\n    float mark2;\n    float mark2Average = 0.0f;\n    float mark3;\n    float mark3Average = 0.0f;\n    float mark4;\n    float mark4Average = 0.0f;\n    int   number;\n    int   numberAverage = 0;\n\n\n    fp= fopen(\"grades.txt\", \"r\");\n\n    if(fp == NULL){\n        printf(\"File cannot be opened\");\n        exit(-1);\n    }\n\n    // get first line to initialize average values\n    if  ( 5 != fscanf( fp, \"%d %f %f %f %f\",\n                &amp;numberAverage,\n                &amp;mark1Average,\n                &amp;mark2Average,\n                &amp;mark3Average,\n                &amp;mark4Average )\n        )\n    { // then fscanf failed\n        perror( \"fscanf for first line of grades.txt failed\" );\n        exit( EXIT_FAILURE );\n    }\n\n    // implied else, fscanf successful\n\n    while(5 == fscanf(fp, \"%d %f %f %f %f\", &amp;number, &amp;mark1, &amp;mark2, &amp;mark3, &amp;mark4 ))\n    {\n        numberAverage = (numberAverage+number)/2;\n        mark1Average  = (mark1Average+mark1)/2.0f;\n        mark2Average  = (mark2Average+mark2)/2.0f;\n        mark3Average  = (mark3Average+mark3)/2.0f;\n        mark4Average  = (mark4Average+mark4)/2.0f;\n    }\n\n    printf( \"numberAverage: %d\\n\", numberAverage);\n    printf( \"mark1Average:  %f\\n\", mark1Average);\n    printf( \"mark2Average:  %f\\n\", mark2Average);\n    printf( \"mark3Average:  %f\\n\", mark3Average);\n    printf( \"mark4Average:  %f\\n\", mark4Average);\n\n    fclose(fp);\n}\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 5353155, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4a7a63671a33f21deb3c9454a835178a?s=128&d=identicon&r=PG&f=1", "display_name": "sandalwood", "link": "https://stackoverflow.com/users/5353155/sandalwood"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 33384870, "answer_count": 3, "score": 1, "last_activity_date": 1446147555, "creation_date": 1446015660, "last_edit_date": 1446016297, "question_id": 33384806, "link": "https://stackoverflow.com/questions/33384806/read-values-from-a-column-in-a-file", "title": "Read values from a column in a file", "body": "<p>I am trying to read values from a file from a specific column (ignoring the first number) and then find the average of that column. So far I have this code which works for reading and finding the average of the line however not for the column. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(){\n\n    FILE *fp;\n    int id;\n    float mark1;\n    float mark2;\n    float mark3;\n    float mark4;\n    int number;\n    float average;\n\n    fp= fopen(\"grades.txt\", \"r\");\n\n    if(fp == NULL){\n        printf(\"File cannot be opened\");\n        exit(-1);\n    }\n\n    while(fscanf(fp, \"%d %f %f %f %f\", &amp;number, &amp;mark1, &amp;mark2, &amp;mark3, &amp;mark4 ) != EOF){\n        //code to calculate average and print output\n        //Below is the code I used to find the average of the line (not what I want to do)\n        average = (mark1 + mark2 + mark3+ mark4)/4;\n        printf(\"Average for %d : %.2f\\n\", number, average);\n\n    }\n\n    fclose(fp);\n}\n</code></pre>\n\n<p>So in the file there is a total of 5 columns, the first is the ID which is just and interger value (int number) and the others numbers are all floats.</p>\n\n<p>FILE CONTENTS:</p>\n\n<pre><code>12345 60 30 63.2 95\n54321 54.2 49 40.5 80\n15243 99.5 100 90 98 \n</code></pre>\n"}, {"tags": ["c", "sockets", "segmentation-fault", "qnx", "recvfrom"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1446015755, "post_id": 33384784, "comment_id": 54562383, "body": "What is <code>tmp_buf</code>? What does <code>SIZEOF</code> do?"}, {"owner": {"reputation": 417, "user_id": 3442163, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f0847cbd01b9d3361cc2d5cc3c243304?s=128&d=identicon&r=PG&f=1", "display_name": "agnel", "link": "https://stackoverflow.com/users/3442163/agnel"}, "edited": false, "score": 0, "creation_date": 1446015888, "post_id": 33384784, "comment_id": 54562442, "body": "char tmp_buf[PKTSIZE]; #define SIZEOF      sizeof"}, {"owner": {"reputation": 3975, "user_id": 3560981, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/8fa10e8d564dd93ece697b0aebe689dd?s=128&d=identicon&r=PG&f=1", "display_name": "Nidhoegger", "link": "https://stackoverflow.com/users/3560981/nidhoegger"}, "edited": false, "score": 0, "creation_date": 1446015956, "post_id": 33384784, "comment_id": 54562462, "body": "This is not enough code! Paste more! Whjat is <code>PKTSIZE</code> defined? where is the <code>fd</code> opened?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1446016061, "post_id": 33384784, "comment_id": 54562516, "body": "Oh, and you <i>do</i> initialize <code>tmp_fromlen</code> correctly?  And when you run in a debugger, it stops at the <code>recvfrom</code> call? What does <code>truncate_size_t_to_int</code> do? Please try to create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a> and show us."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1446016757, "post_id": 33384784, "comment_id": 54562809, "body": "I think you need to read <a href=\"http://man7.org/linux/man-pages/man2/recvfrom.2.html\" rel=\"nofollow noreferrer\">the <code>recvfrom</code> manual page</a>, where it says that the socket address length argument needs to be initialized to the length of the corresponding address structure. If you&#39;re not interested about the source address pass these arguments as <code>NULL</code>."}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1446016841, "post_id": 33384784, "comment_id": 54562840, "body": "define tmp_fromlen as <i>socklen_t tmp_fromlen</i> and remove the cast to it in the last argument.  that might help.  also, initializer on it may need to be sizeof(tmp_from).  Thirdly, don&#39;t cast the return from recvfrom immediately.  Check it for -1 [error], etc."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1446017225, "post_id": 33384784, "comment_id": 54562986, "body": "Finally a hint about style: If you want your code to be maintainable or readable by others (and with &quot;others&quot; I also include <i>you</i> a few months down the line), don&#39;t redefine common keywords using macros. <code>sizeof</code> is <code>sizeof</code>, there is simply no need to do anything else that would warrant a macro for it, or any other keyword or standard construct. Also, remember that <code>recvfrom</code> returns a <code>ssize_t</code> type, and will return the value <code>-1</code> on error, do your <code>truncate_size_t_to_int</code> handle that case properly?"}, {"owner": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1446018545, "post_id": 33384784, "comment_id": 54563583, "body": "If you use <code>connect</code>, why use <code>recvfrom</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "is_accepted": false, "score": 0, "last_activity_date": 1446018096, "creation_date": 1446018096, "answer_id": 33385441, "question_id": 33384784, "link": "https://stackoverflow.com/questions/33384784/segmentation-fault-on-recvfrom-call/33385441#33385441", "title": "Segmentation fault on recvfrom call", "body": "<p><code>recvfrom()</code> can return -1. You can't write correct networking code without storing the result of <code>recv()/recvfrom()/recvmsg()</code> into a variable, testing it for -1, testing it for zero in the case of TCP, and only if it is positive can you proceed to execute code that assumes it.</p>\n"}], "owner": {"reputation": 417, "user_id": 3442163, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f0847cbd01b9d3361cc2d5cc3c243304?s=128&d=identicon&r=PG&f=1", "display_name": "agnel", "link": "https://stackoverflow.com/users/3442163/agnel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 976, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1446018096, "creation_date": 1446015573, "last_edit_date": 1446016446, "question_id": 33384784, "link": "https://stackoverflow.com/questions/33384784/segmentation-fault-on-recvfrom-call", "title": "Segmentation fault on recvfrom call", "body": "<p>I have a UDP server implementation ,  Where i am getting Segmentation fault on <code>recvfrom</code> call.</p>\n\n<pre><code>#define SIZEOF      sizeof\n#define PKTSIZE    65535\n\nchar tmp_buf[PKTSIZE];\nstruct sockaddr_storage tmp_from;\nint tmp_fromlen = 0;\nint tmp_bytes;\ntmp_bytes = truncate_size_t_to_int(recvfrom(fd, tmp_buf,\n                      SIZEOF(tmp_buf), 0,\n                      (struct sockaddr *) &amp;tmp_from,\n                      (socklen_t *) &amp;tmp_fromlen));\n</code></pre>\n\n<p>Both bind and connect was successful before this.It's a single thread process.\nWhat is wrong with this <code>recvfrom</code> call.\nDo I need to do <code>SIGALRM</code> signal handling for <code>recvfrom</code>?\ntruncate_size_t_to_int is for size_t to int.</p>\n"}, {"tags": ["c", "linux", "reader"], "comments": [{"owner": {"reputation": 6033, "user_id": 5128464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/25BuB.png?s=128&g=1", "display_name": "vlp", "link": "https://stackoverflow.com/users/5128464/vlp"}, "edited": false, "score": 0, "creation_date": 1446325726, "post_id": 33384708, "comment_id": 54699661, "body": "Is this the same issue as <a href=\"http://stackoverflow.com/questions/33382659/handler-smart-card-reader\">this</a>?"}, {"owner": {"reputation": 6033, "user_id": 5128464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/25BuB.png?s=128&g=1", "display_name": "vlp", "link": "https://stackoverflow.com/users/5128464/vlp"}, "edited": false, "score": 0, "creation_date": 1446325789, "post_id": 33384708, "comment_id": 54699685, "body": "If you are connecting to two <i>different</i> readers, there should be no problem..."}], "answers": [{"tags": [], "owner": {"reputation": 1125, "user_id": 823071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ba869f6b223e03bb65d045361209087?s=128&d=identicon&r=PG", "display_name": "Djole", "link": "https://stackoverflow.com/users/823071/djole"}, "is_accepted": false, "score": 0, "last_activity_date": 1446026691, "creation_date": 1446026691, "answer_id": 33388063, "question_id": 33384708, "link": "https://stackoverflow.com/questions/33384708/how-to-connect-two-smart-card-reader-simultaneous-with-2-application/33388063#33388063", "title": "How to Connect two Smart Card Reader simultaneous with 2 Application", "body": "<p>A while ago I did something similar (lib with no instance handle), the solution was:\nSpawn a process for each reader. Use IPC to sync (shared memory, TCP/UDP loopback, pipes...)</p>\n"}], "owner": {"reputation": 1, "user_id": 4565609, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-LJn72YuyU_c/AAAAAAAAAAI/AAAAAAAAAJ8/P2-tsr4qkQI/photo.jpg?sz=128", "display_name": "Duong Ha", "link": "https://stackoverflow.com/users/4565609/duong-ha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 129, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1446026691, "creation_date": 1446015272, "last_edit_date": 1592644375, "question_id": 33384708, "link": "https://stackoverflow.com/questions/33384708/how-to-connect-two-smart-card-reader-simultaneous-with-2-application", "title": "How to Connect two Smart Card Reader simultaneous with 2 Application", "body": "<p>I'm writting app use function <a href=\"https://pcsclite.alioth.debian.org/api/group__API.html#ga4e515829752e0a8dbc4d630696a8d6a5\" rel=\"nofollow noreferrer\">SCardConnect()</a> in lib winscard.h\nIf run 2 app it only can Connect to one Reader 0 (Ex have 2 Reader 0 and Reader 1)\nHow do connect to 2 Readers simultaneous?</p>\n"}, {"tags": ["c++", "mysql", "c", "declaration", "definition"], "answers": [{"tags": [], "owner": {"reputation": 2675, "user_id": 1381196, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/qNvyC.png?s=128&g=1", "display_name": "Al2O3", "link": "https://stackoverflow.com/users/1381196/al2o3"}, "is_accepted": false, "score": 0, "last_activity_date": 1446024316, "creation_date": 1446024316, "answer_id": 33387233, "question_id": 33384624, "link": "https://stackoverflow.com/questions/33384624/cannot-find-definition-of-ib-lock-t-in-mysql-server-source-code/33387233#33387233", "title": "Cannot find definition of &#39;ib_lock_t&#39; in mysql server source code", "body": "<p><strong>Found:</strong> <a href=\"https://github.com/mysql/mysql-server/blob/a2757a60a7527407d08115e44e889a25f22c96c6/storage/innobase/include/lock0priv.h\" rel=\"nofollow\">https://github.com/mysql/mysql-server/blob/a2757a60a7527407d08115e44e889a25f22c96c6/storage/innobase/include/lock0priv.h</a></p>\n\n<p><strong>Line: 110</strong></p>\n\n<p>I am still confused with the preprocess:</p>\n\n<p><code>#define lock_t ib_lock_t</code>.</p>\n\n<p>Why to replace <code>lock_t</code></p>\n\n<p>without no definition of <code>ib_lock_t</code>? </p>\n"}], "owner": {"reputation": 2675, "user_id": 1381196, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/qNvyC.png?s=128&g=1", "display_name": "Al2O3", "link": "https://stackoverflow.com/users/1381196/al2o3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 24, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1446024316, "creation_date": 1446014919, "last_edit_date": 1446015632, "question_id": 33384624, "link": "https://stackoverflow.com/questions/33384624/cannot-find-definition-of-ib-lock-t-in-mysql-server-source-code", "title": "Cannot find definition of &#39;ib_lock_t&#39; in mysql server source code", "body": "<p>I read source code here: <a href=\"https://github.com/mysql/mysql-server/blob/a2757a60a7527407d08115e44e889a25f22c96c6/storage/innobase/include/lock0types.h\" rel=\"nofollow noreferrer\">link of mysql source code</a></p>\n\n<p>But after I searched the whole repository, I cannot find the defination of <code>ib_lock_t</code>.</p>\n\n<p>search link: <a href=\"https://github.com/mysql/mysql-server/search?utf8=%E2%9C%93&amp;q=ib_lock_t\" rel=\"nofollow noreferrer\">https://github.com/mysql/mysql-server/search?utf8=%E2%9C%93&amp;q=ib_lock_t</a></p>\n\n<p>search result:</p>\n\n<p><a href=\"https://i.stack.imgur.com/cbUQg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cbUQg.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Where is it defined?</strong></p>\n"}, {"tags": ["c++", "c", "windows", "winapi", "kernel32"], "comments": [{"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1446072585, "post_id": 33384413, "comment_id": 54597289, "body": "Have you tried using WinObj to see what the actual device names are on your system?  Might give you a useful hint."}, {"owner": {"reputation": 17964, "user_id": 843732, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8e7b3eb1f6bb311c47610a9d230485f0?s=128&d=identicon&r=PG", "display_name": "c00000fd", "link": "https://stackoverflow.com/users/843732/c00000fd"}, "reply_to_user": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1446083763, "post_id": 33384413, "comment_id": 54600820, "body": "@HarryJohnston: I wish WinObj had a search feature. I tried looking and even though I can find symlinks for (disk) devices, I don&#39;t see all partitions for them as I get from the snap-in like I showed above."}], "answers": [{"comments": [{"owner": {"reputation": 17964, "user_id": 843732, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8e7b3eb1f6bb311c47610a9d230485f0?s=128&d=identicon&r=PG", "display_name": "c00000fd", "link": "https://stackoverflow.com/users/843732/c00000fd"}, "edited": false, "score": 0, "creation_date": 1446054849, "post_id": 33396515, "comment_id": 54587780, "body": "Thanks. I found it too. Unfortunately that last statement about <code>IOCTL_DISK_GET_DRIVE_LAYOUT_EX</code> is incorrect. Or I should say, it applies to &quot;Basic disks&quot; only. In case of a dynamic disk, like Disk 2 in my screenshot, it would appear as just one full-disk-size partition for a &quot;Dynamic disk.&quot;"}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1446072745, "post_id": 33396515, "comment_id": 54597359, "body": "Yeah, the control code documentation confirms that: &quot;only supported on dynamic disks that are boot or system disks, or have retained entries in the partition table.&quot;  Basically, it is telling you about the actual, underlying partitions on the physical disk - not about the higher-level dynamic volumes."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1446072994, "post_id": 33396515, "comment_id": 54597465, "body": "I think to get information on dynamic disks you might have to use <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb986750(v=vs.85).aspx\" rel=\"nofollow noreferrer\">VDS or the Windows Storage Management API</a> as appropriate."}, {"owner": {"reputation": 17964, "user_id": 843732, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8e7b3eb1f6bb311c47610a9d230485f0?s=128&d=identicon&r=PG", "display_name": "c00000fd", "link": "https://stackoverflow.com/users/843732/c00000fd"}, "reply_to_user": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1446086811, "post_id": 33396515, "comment_id": 54601551, "body": "@HarryJohnston: I&#39;ve never used VDS. You don&#39;t have a sample C code, do you?"}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1446087938, "post_id": 33396515, "comment_id": 54601836, "body": "No, I&#39;ve never used it either."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 0, "last_activity_date": 1446049863, "creation_date": 1446049863, "answer_id": 33396515, "question_id": 33384413, "link": "https://stackoverflow.com/questions/33384413/how-to-open-a-partition-handle-to-get-its-information-on-a-dynamic-disk/33396515#33396515", "title": "How to open a partition handle to get its information on a dynamic disk?", "body": "<p>Read the documentation:</p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa363785.aspx\" rel=\"nofollow\">Basic and Dynamic Disks</a></p>\n\n<p>In particular, this section provides a hint:</p>\n\n<blockquote>\n  <p>Detecting the Type of Disk</p>\n  \n  <p>There is no specific function to programmatically detect the type of disk a particular file or directory is located on. There is an indirect method.</p>\n  \n  <p>First, call <code>GetVolumePathName</code>. Then, call <code>CreateFile</code> to open the volume using the path. Next, use <code>IOCTL_VOLUME_GET_VOLUME_DISK_EXTENTS</code> with the volume handle to obtain the disk number and <strong>use the disk number to construct the disk path, such as <code>\"\\\\?\\PhysicalDriveX\"</code>. Finally, use <code>IOCTL_DISK_GET_DRIVE_LAYOUT_EX</code> to obtain the partition list</strong>, and check the <code>PartitionType</code> for each entry in the partition list.</p>\n</blockquote>\n"}], "owner": {"reputation": 17964, "user_id": 843732, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8e7b3eb1f6bb311c47610a9d230485f0?s=128&d=identicon&r=PG", "display_name": "c00000fd", "link": "https://stackoverflow.com/users/843732/c00000fd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1365, "favorite_count": 3, "answer_count": 1, "score": 2, "last_activity_date": 1446049863, "creation_date": 1446014152, "question_id": 33384413, "link": "https://stackoverflow.com/questions/33384413/how-to-open-a-partition-handle-to-get-its-information-on-a-dynamic-disk", "title": "How to open a partition handle to get its information on a dynamic disk?", "body": "<p>For the purpose of logging in my application I need to get information about physical partitions on the disk, such as the info provided in <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa365448%28v=vs.85%29.aspx?f=255&amp;MSPPError=-2147217396\" rel=\"nofollow noreferrer\">PARTITION_INFORMATION_EX</a>. I have no problem doing it for \"Basic disks\" using the following method:</p>\n\n<p>First let's assume the following drive configuration:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Xxdiv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Xxdiv.png\" alt=\"enter image description here\"></a></p>\n\n<p>Then the following code works fine:</p>\n\n<pre><code>//Say, if I want to get info for partion 1 on disk 0 (or volume C:)\nHANDLE hPart = ::CreateFile(L\"\\\\\\\\?\\\\GLOBALROOT\\\\Device\\\\Harddisk0\\\\Partition1\", \n    GENERIC_READ, \n    FILE_SHARE_READ | FILE_SHARE_WRITE, NULL,\n    OPEN_EXISTING,  0, NULL);\nif(hPart != INVALID_HANDLE_VALUE)\n{\n    PARTITION_INFORMATION_EX pix = {0};\n    DWORD bytesReturned = 0;\n    if(::DeviceIoControl(hPart, IOCTL_DISK_GET_PARTITION_INFO_EX, NULL, 0, &amp;pix, sizeof(pix), &amp;bytesReturned, NULL))\n    {\n        //Got info OK\n    }\n\n    ::CloseHandle(hPart);\n}\n</code></pre>\n\n<p>But if I try to retrieve the info on a \"dynamic partition\", say, disk 2, partition 1 (or 2nd half of spanned volume F:) and I try to use <code>\"\\\\\\\\?\\\\GLOBALROOT\\\\Device\\\\Harddisk2\\\\Partition1\"</code> in a call to <code>CreateFile</code>, it fails with error code 2, or <code>ERROR_FILE_NOT_FOUND</code>.</p>\n\n<p>So the question is, how do I retrieve partition info on a dynamic disk?</p>\n"}, {"tags": ["c", "embedded", "memcpy", "strcpy"], "comments": [{"owner": {"reputation": 3095, "user_id": 117641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/229fc6c528362baf40c3ba65fab3b65c?s=128&d=identicon&r=PG", "display_name": "Habi", "link": "https://stackoverflow.com/users/117641/habi"}, "edited": false, "score": 0, "creation_date": 1446016385, "post_id": 33384408, "comment_id": 54562649, "body": "Regarding to your request for memory and speed optimization: Do you want to change the content of <code>info</code> at runtime? If not, you could define <code>info</code>as const. This saves RAM but costs flash. And const would need no initialization at runtime."}, {"owner": {"reputation": 6181, "user_id": 714831, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/e27204ed6e8383e2c084ab6eddfd673b?s=128&d=identicon&r=PG", "display_name": "Raulp", "link": "https://stackoverflow.com/users/714831/raulp"}, "reply_to_user": {"reputation": 3095, "user_id": 117641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/229fc6c528362baf40c3ba65fab3b65c?s=128&d=identicon&r=PG", "display_name": "Habi", "link": "https://stackoverflow.com/users/117641/habi"}, "edited": false, "score": 0, "creation_date": 1446017459, "post_id": 33384408, "comment_id": 54563089, "body": "I need it to be dynamically assigned."}], "answers": [{"tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": true, "score": 2, "last_activity_date": 1446019014, "last_edit_date": 1446019014, "creation_date": 1446014290, "answer_id": 33384458, "question_id": 33384408, "link": "https://stackoverflow.com/questions/33384408/way-to-copy-a-string-in-a-structure-having-character-element-in-c/33384458#33384458", "title": "way to copy a string in a structure having character element in c", "body": "<p>Try this:  </p>\n\n<pre><code>info info_data= {\n    {\"David Scholes\"},\n    {\"xyz Inc\"} \n};\n</code></pre>\n\n<p>You can initialise a character array with a string. </p>\n\n<p>If you want to use <code>strcpy</code> then proceed as follows:  </p>\n\n<pre><code>strcpy(info_data.employee_name, \"David Scholes\");\nstrcpy(info_data.organisation, \"xyz Inc\");\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2619, "user_id": 589026, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/wVUyz.jpg?s=128&g=1", "display_name": "Raghu Srikanth Reddy", "link": "https://stackoverflow.com/users/589026/raghu-srikanth-reddy"}, "is_accepted": false, "score": 1, "last_activity_date": 1446014369, "creation_date": 1446014369, "answer_id": 33384476, "question_id": 33384408, "link": "https://stackoverflow.com/questions/33384408/way-to-copy-a-string-in-a-structure-having-character-element-in-c/33384476#33384476", "title": "way to copy a string in a structure having character element in c", "body": "<p>How about</p>\n\n<pre><code>typedef struct \n {\n         char employee_name[32];\n         char organisation[32];\n\n }info;\n\n\n info info_data = {{\"david scholes\"}, {\"xyz Inc\"}};\n</code></pre>\n"}], "owner": {"reputation": 6181, "user_id": 714831, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/e27204ed6e8383e2c084ab6eddfd673b?s=128&d=identicon&r=PG", "display_name": "Raulp", "link": "https://stackoverflow.com/users/714831/raulp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 33384458, "answer_count": 2, "score": 0, "last_activity_date": 1446019014, "creation_date": 1446014142, "question_id": 33384408, "link": "https://stackoverflow.com/questions/33384408/way-to-copy-a-string-in-a-structure-having-character-element-in-c", "title": "way to copy a string in a structure having character element in c", "body": "<p>I have structure </p>\n\n<pre><code>typedef struct \n{\n    char employee_name[32];\n    char organisation[32];\n\n}info;\n</code></pre>\n\n<p>How can I Initialized a single or more elements of info .</p>\n\n<p>I am doing like this at the start of the code: </p>\n\n<pre><code>info info_data= {\n    {'d','a','v','i','d',' ','s','c','h','o','l','e','s','\\0'},\n    {'x','y','z',' ','I','n','c','\\0'} \n</code></pre>\n\n<p>};</p>\n\n<p>This works fine but I want to avoid putting all the names with each character enclosed in ' ' and adding '\\0' at the end.Is there a better way to implement this.Code has to run in an <code>embedded processor and needs to be memory and speed optimized.</code></p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 13521, "user_id": 654953, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f6453f58b70e93dbfa8998b71a95bb09?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/654953/ryan"}, "edited": false, "score": 0, "creation_date": 1446011343, "post_id": 33383751, "comment_id": 54560765, "body": "<code>&#47;* display it to the monitor*&#47;</code> is a rather weird comment because <code>putchar</code> write to standard output which isn&#39;t necessarily a monitor all the time."}, {"owner": {"reputation": 1858, "user_id": 4799193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a87fb12a6ad909323fb42a48e78b3f28?s=128&d=identicon&r=PG&f=1", "display_name": "ramana_k", "link": "https://stackoverflow.com/users/4799193/ramana-k"}, "edited": false, "score": 0, "creation_date": 1446011426, "post_id": 33383751, "comment_id": 54560794, "body": "file &quot;/tmp/j&quot; is opened for reading. Where is it written to ?"}, {"owner": {"reputation": 113, "user_id": 3743854, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/a3a7cd07661d67df22ae01fe43fd8cc3?s=128&d=identicon&r=PG&f=1", "display_name": "nandan", "link": "https://stackoverflow.com/users/3743854/nandan"}, "reply_to_user": {"reputation": 13521, "user_id": 654953, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f6453f58b70e93dbfa8998b71a95bb09?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/654953/ryan"}, "edited": false, "score": 0, "creation_date": 1446011651, "post_id": 33383751, "comment_id": 54560878, "body": "@self yeah I have put it just to understand myself, sorry about that."}, {"owner": {"reputation": 113, "user_id": 3743854, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/a3a7cd07661d67df22ae01fe43fd8cc3?s=128&d=identicon&r=PG&f=1", "display_name": "nandan", "link": "https://stackoverflow.com/users/3743854/nandan"}, "reply_to_user": {"reputation": 1858, "user_id": 4799193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a87fb12a6ad909323fb42a48e78b3f28?s=128&d=identicon&r=PG&f=1", "display_name": "ramana_k", "link": "https://stackoverflow.com/users/4799193/ramana-k"}, "edited": false, "score": 0, "creation_date": 1446011728, "post_id": 33383751, "comment_id": 54560917, "body": "@Ramana &quot; j&quot; is the name of the file and &quot;tmp&quot; is the folder name. It is written to the file with name &quot;j&quot;."}, {"owner": {"reputation": 1858, "user_id": 4799193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a87fb12a6ad909323fb42a48e78b3f28?s=128&d=identicon&r=PG&f=1", "display_name": "ramana_k", "link": "https://stackoverflow.com/users/4799193/ramana-k"}, "edited": false, "score": 0, "creation_date": 1446012025, "post_id": 33383751, "comment_id": 54561011, "body": "The code here seems to be reading from this file. But the question and the comment talk about writing to this file."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1446012301, "post_id": 33383751, "comment_id": 54561089, "body": "&quot;pushed to a file&quot;. Can you point out which line of the code does that?"}], "answers": [{"comments": [{"owner": {"reputation": 113, "user_id": 3743854, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/a3a7cd07661d67df22ae01fe43fd8cc3?s=128&d=identicon&r=PG&f=1", "display_name": "nandan", "link": "https://stackoverflow.com/users/3743854/nandan"}, "edited": false, "score": 0, "creation_date": 1446012805, "post_id": 33383998, "comment_id": 54561237, "body": "I am facing the problem before the program is reaching fopen stage in the system call the string <code>buff</code> which contains  <code>ps -f &gt; &#47;tmp&#47;j</code> should execute the <code>ps -f </code> and push the output to the <code>&#47;tmp&#47;j</code> but here file &#39;j&#39; is getting created but there is no data or output of the system call."}, {"owner": {"reputation": 2619, "user_id": 589026, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/wVUyz.jpg?s=128&g=1", "display_name": "Raghu Srikanth Reddy", "link": "https://stackoverflow.com/users/589026/raghu-srikanth-reddy"}, "reply_to_user": {"reputation": 113, "user_id": 3743854, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/a3a7cd07661d67df22ae01fe43fd8cc3?s=128&d=identicon&r=PG&f=1", "display_name": "nandan", "link": "https://stackoverflow.com/users/3743854/nandan"}, "edited": false, "score": 0, "creation_date": 1446013423, "post_id": 33383998, "comment_id": 54561451, "body": "@nandan Please check by making these changes. It compiled and gave me the output"}], "tags": [], "owner": {"reputation": 2619, "user_id": 589026, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/wVUyz.jpg?s=128&g=1", "display_name": "Raghu Srikanth Reddy", "link": "https://stackoverflow.com/users/589026/raghu-srikanth-reddy"}, "is_accepted": true, "score": 1, "last_activity_date": 1446013722, "last_edit_date": 1446013722, "creation_date": 1446012343, "answer_id": 33383998, "question_id": 33383751, "link": "https://stackoverflow.com/questions/33383751/file-is-getting-created-but-data-is-not-pushed-into-the-file/33383998#33383998", "title": "File is getting created but data is not pushed into the file", "body": "<p>There are a couple of errors in your code.</p>\n\n<p>1) Allocate some memory greater than 10 for your buff. 10 is not enough. Your string is exceeding the size of 10. I made it 20 in my machine and checked.</p>\n\n<p>2) <code>fgets(req, sizeof(req),stdin);</code> is reading a <code>\\n</code> at the end of the string. Delete the last character. <code>req[strlen(req) - 1] = '\\0';</code></p>\n\n<p>See <a href=\"http://linux.die.net/man/3/fgets\" rel=\"nofollow\">this</a> for man page of fgets</p>\n"}], "owner": {"reputation": 113, "user_id": 3743854, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/a3a7cd07661d67df22ae01fe43fd8cc3?s=128&d=identicon&r=PG&f=1", "display_name": "nandan", "link": "https://stackoverflow.com/users/3743854/nandan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 33383998, "answer_count": 1, "score": 2, "last_activity_date": 1446013722, "creation_date": 1446011154, "last_edit_date": 1446011778, "question_id": 33383751, "link": "https://stackoverflow.com/questions/33383751/file-is-getting-created-but-data-is-not-pushed-into-the-file", "title": "File is getting created but data is not pushed into the file", "body": "<p>I have written this C program, where it takes system calls as input like <code>ps -f or ls /tmp</code>, etc and output from the system call is pushed to a file and then from the file it reads and displays the output.</p>\n\n<p>Here output file is getting created <code>/tmp/j</code> but there is no data present inside it. Can some one please help me with this issue and Thanks in advance.</p>\n\n<p>My program.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;sys/syscall.h&gt;\n#include &lt;stdlib.h&gt;\n\nmain()\n{\n    enum msgtype {PROCESS_LIST_REQUEST=1, PROCESS_LIST_RESPONSE, DIRECTORY_LIST_REQUEST, DIRECTORY_LIST_RESPONSE, ERROR_REQUEST};\n    struct head{\n        int version;\n        int msg_length;\n        int header_length;\n        enum msgtype msg_type;\n        char data;\n        char *reqtype;\n    };\n\n    struct head *buf;\n    char buff[10];\n\n    buf = malloc((sizeof(struct head)));\n    buf-&gt;reqtype=malloc(40);\n\n    char req[10];\n    printf(\"type ps -f on the console \\n\");\n    fgets(req, sizeof(req),stdin);\n    buf-&gt;reqtype = req;\n    printf(\"%s\" , buf-&gt;reqtype);\n    snprintf(buff, sizeof(buff), \"%s&gt;/tmp/j\", buf-&gt;reqtype);\n    printf(\"%s \\n\",buff);\n    system(buff);\n    {\n        FILE *fp;\n        char c;\n        fp = fopen(\"/tmp/j\", \"r\");\n        if (fp == NULL)\n            printf(\"File doesn't exist\\n\"); \n        else\n        {\n            do {\n                c = getc(fp); /* get one character from the file*/\n                putchar(c); /* display it on the monitor*/\n            } while (c != EOF); /* repeat until EOF (end of file)  */\n        }\n        fclose(fp);\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "string", "kernel"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1446011346, "post_id": 33383712, "comment_id": 54560767, "body": "&quot;But this does not seem to be true&quot;. How are you coming to this conclusion?"}, {"owner": {"reputation": 157, "user_id": 3002076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26a98e444e9479416eb74109126c1b46?s=128&d=identicon&r=PG", "display_name": "laifs", "link": "https://stackoverflow.com/users/3002076/laifs"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1446011695, "post_id": 33383712, "comment_id": 54560899, "body": "Because it copies more than <code>len</code> characters."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 2, "creation_date": 1446011806, "post_id": 33383712, "comment_id": 54560944, "body": "But how are you coming to the conclusion? Did you check the return value of <code>strncpy_from_user</code>? Did you dump the contents of <code>tmp-&gt;msg</code>? And what is <code>len</code> set to?"}, {"owner": {"reputation": 157, "user_id": 3002076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26a98e444e9479416eb74109126c1b46?s=128&d=identicon&r=PG", "display_name": "laifs", "link": "https://stackoverflow.com/users/3002076/laifs"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1446012151, "post_id": 33383712, "comment_id": 54561052, "body": "I must admit that I&#39;m not sure. If I try to <code>printk</code> it, or <code>strlen</code> it, the lack of a trailing <code>NUL</code> would make it fail anyway.  Maybe it does copy exactly <code>len</code> characters, but <code>echo</code> doesn&#39;t produce a string with a trailing <code>NUL</code>."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1446012557, "post_id": 33383712, "comment_id": 54561147, "body": "How are you setting <code>len</code>?"}, {"owner": {"reputation": 157, "user_id": 3002076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26a98e444e9479416eb74109126c1b46?s=128&d=identicon&r=PG", "display_name": "laifs", "link": "https://stackoverflow.com/users/3002076/laifs"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1446012811, "post_id": 33383712, "comment_id": 54561238, "body": "it is set automatically by the read system call. Whenever someone attempts to access the character device file, it calls that function with the parameters. EDIT: I mean write."}, {"owner": {"reputation": 157, "user_id": 3002076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26a98e444e9479416eb74109126c1b46?s=128&d=identicon&r=PG", "display_name": "laifs", "link": "https://stackoverflow.com/users/3002076/laifs"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1446013127, "post_id": 33383712, "comment_id": 54561347, "body": "I suspect it&#39;s actually the <code>echo</code> call. Maybe instead of a <code>NUL</code>, it has a trailing <code>\\n</code>. I might have to allocate 1 more char in <code>tmp-&gt;msg</code> and set that to 0."}], "answers": [{"comments": [{"owner": {"reputation": 157, "user_id": 3002076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26a98e444e9479416eb74109126c1b46?s=128&d=identicon&r=PG", "display_name": "laifs", "link": "https://stackoverflow.com/users/3002076/laifs"}, "edited": false, "score": 0, "creation_date": 1446013363, "post_id": 33384173, "comment_id": 54561431, "body": "Indeed. I thought <code>len</code> already included the trailing <code>NUL</code>, since it is set automatically through a system call. It seems the extra char is in fact a <code>\\n</code>, maybe because I need to hit enter each time I run the <code>echo</code> command."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "reply_to_user": {"reputation": 157, "user_id": 3002076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26a98e444e9479416eb74109126c1b46?s=128&d=identicon&r=PG", "display_name": "laifs", "link": "https://stackoverflow.com/users/3002076/laifs"}, "edited": false, "score": 1, "creation_date": 1446013632, "post_id": 33384173, "comment_id": 54561532, "body": "@laifs: that string is not going to be terminated, it&#39;s a <i>counted</i> string, and it cannot be otherwise, since <code>read</code> and <code>write</code> work with arbitrary data, where NUL has no particular meaning (i.e. data written to file can have embedded NULs, a NUL after all is just a regular byte). The newline is written explicitly by <code>echo</code>, to avoid it you should use <code>echo -n</code>."}, {"owner": {"reputation": 157, "user_id": 3002076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26a98e444e9479416eb74109126c1b46?s=128&d=identicon&r=PG", "display_name": "laifs", "link": "https://stackoverflow.com/users/3002076/laifs"}, "edited": false, "score": 0, "creation_date": 1446013782, "post_id": 33384173, "comment_id": 54561579, "body": "ah, I see, thanks. I didn&#39;t know <code>echo</code> wrote new lines. It does make sense that <code>read</code> and <code>write</code> wouldn&#39;t care about <code>NUL</code>."}], "tags": [], "owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "is_accepted": true, "score": 1, "last_activity_date": 1446013373, "last_edit_date": 1446013373, "creation_date": 1446013058, "answer_id": 33384173, "question_id": 33383712, "link": "https://stackoverflow.com/questions/33383712/linux-kernel-strncpy-from-user-copying-too-many-bytes/33384173#33384173", "title": "Linux Kernel: strncpy_from_user() copying too many bytes", "body": "<p>As with the regular <code>strncpy</code>, the function you are using does not terminate the buffer if the string is as long as the maximum length you specified (or longer). If <code>len</code> counts the number of actual characters written to the device and you want to put them in a C string,  you have to remember to add 1 in the allocation size and set the last byte to 0, otherwise you are going to have a non-terminated string around.</p>\n\n<p>But <em>please</em>, if you are still struggling with C strings basics and NULL terminated vs counted strings stay away from kernel mode, if you want to play with virtual filesystems use FUSE. </p>\n"}], "owner": {"reputation": 157, "user_id": 3002076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26a98e444e9479416eb74109126c1b46?s=128&d=identicon&r=PG", "display_name": "laifs", "link": "https://stackoverflow.com/users/3002076/laifs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1816, "favorite_count": 1, "accepted_answer_id": 33384173, "answer_count": 1, "score": 0, "last_activity_date": 1446014206, "creation_date": 1446010961, "last_edit_date": 1446014206, "question_id": 33383712, "link": "https://stackoverflow.com/questions/33383712/linux-kernel-strncpy-from-user-copying-too-many-bytes", "title": "Linux Kernel: strncpy_from_user() copying too many bytes", "body": "<p>I'm trying to write a character device, and I'm copying from user to kernel space using <code>strncpy_from_user</code>. However, it almost always copies too much data. The way I'm doing it is:</p>\n\n<pre><code>//len is buffer length.\ntmp = (struct msg_list *)kmalloc(sizeof(struct msg_list),GFP_ATOMIC);\ntmp-&gt;msg = (char*)kmalloc(len,GFP_ATOMIC);\n\nstrncpy_from_user(tmp-&gt;msg,buff,len);\n</code></pre>\n\n<p>Buffer length generally outputs 1+characters seen, which I assume is because it is counting in the trailing NUL.</p>\n\n<p>e.g. The following has buffer length 4:</p>\n\n<pre><code>echo 123 &gt; /dev/my_chardev\n</code></pre>\n\n<p><code>strcnpy_from_user</code>, however, might copy way over 4 Bytes.\nAccording to the documentation, the last parameter is \"The maximum numbers of bytes to copy\". But this does not seem to be true.</p>\n\n<p>I tried manually setting <code>(temp-&gt;msg)[len-1] = 0</code>, but this seems to cause problems (infinite loops and segfaults). What is the best way to safely copy a string from user to kernel space?</p>\n\n<h3>EDIT:</h3>\n\n<p>As Matteo mentioned in the comments, <code>echo</code> writes a <code>\\n</code> by default, he also pointed out that a trailing <code>NUL</code> does indeed mean nothing to <code>read/write</code> syscalls. This is the solution that worked for me:</p>\n\n<pre><code>tmp = (struct msg_list *)kmalloc(sizeof(struct msg_list),GFP_ATOMIC);\ntmp-&gt;msg = (char*)kmalloc(len+1,GFP_ATOMIC);\n\nstrncpy_from_user(tmp-&gt;msg,buff,len);\n\n(tmp-&gt;msg)[len]=0;\n</code></pre>\n"}, {"tags": ["c", "arrays", "for-loop", "parallel-processing"], "comments": [{"owner": {"reputation": 3002, "user_id": 4228131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RyKUe.jpg?s=128&g=1", "display_name": "WedaPashi", "link": "https://stackoverflow.com/users/4228131/wedapashi"}, "edited": false, "score": 3, "creation_date": 1446011008, "post_id": 33383679, "comment_id": 54560652, "body": "Might want to change <code>for (int i; i&lt;n; i++)</code> to <code>for (int i = 0; i&lt;n; i++)</code> ?"}, {"owner": {"reputation": 3002, "user_id": 4228131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RyKUe.jpg?s=128&g=1", "display_name": "WedaPashi", "link": "https://stackoverflow.com/users/4228131/wedapashi"}, "edited": false, "score": 0, "creation_date": 1446011061, "post_id": 33383679, "comment_id": 54560667, "body": "You might want to use a Mutex or a Semaphore for this."}, {"owner": {"reputation": 1964, "user_id": 1320881, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b69670b7cc6bce132f443eee557c9448?s=128&d=identicon&r=PG", "display_name": "Unimportant", "link": "https://stackoverflow.com/users/1320881/unimportant"}, "edited": false, "score": 0, "creation_date": 1446011246, "post_id": 33383679, "comment_id": 54560726, "body": "If <code>n</code> is large enough to make it worthwhile you could also have each thread do <code>n &#47; number of threads</code> of the loop."}, {"owner": {"reputation": 131, "user_id": 5104391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8447640006302460b98ba7988027135c?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Shi", "link": "https://stackoverflow.com/users/5104391/jack-shi"}, "reply_to_user": {"reputation": 1964, "user_id": 1320881, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b69670b7cc6bce132f443eee557c9448?s=128&d=identicon&r=PG", "display_name": "Unimportant", "link": "https://stackoverflow.com/users/1320881/unimportant"}, "edited": false, "score": 0, "creation_date": 1446011956, "post_id": 33383679, "comment_id": 54560989, "body": "@user1320881 In this case I would like to assume each thread has to iterate n times."}], "owner": {"reputation": 131, "user_id": 5104391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8447640006302460b98ba7988027135c?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Shi", "link": "https://stackoverflow.com/users/5104391/jack-shi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1446011807, "creation_date": 1446010778, "last_edit_date": 1446011807, "question_id": 33383679, "link": "https://stackoverflow.com/questions/33383679/check-array-condition-in-parallel-setting", "title": "Check Array Condition in Parallel setting", "body": "<p>I have an array named <code>known[n]</code> where <code>known[i]</code> can only be 0 (false) or 1 (true), and every processor has a copy of this array. I have the following code:</p>\n\n<pre><code>int i;\nfor (i=0; i&lt;n; i++){\n    if (!known[i]){\n       if (condition satisfies){\n           do something;\n           known[i] = 1;\n       }\n   }\n}\n</code></pre>\n\n<p>The code above will be accessed by all processors, so some processors might be done (<code>known[i] = 1 for all i</code>) earlier than others. </p>\n\n<p>How could I let the finished processors stop executing the code above while let other processors finish the code?</p>\n"}]