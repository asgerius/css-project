[{"tags": ["c"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1510184669, "post_id": 47191606, "comment_id": 81332606, "body": "I think it&#39;s time you <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">learn how to debug your programs</a>. Most importantly, learn how to use a <i>debugger</i> to step through your code, line by line, while monitoring variables and their values."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1510185029, "post_id": 47191606, "comment_id": 81332694, "body": "The value of <code>prime</code> is changed only once, when <code>primes[i] == 1</code> and remains unchanged afterwards. How did you expect your cycle to stop then? How many <code>1</code>s do you have in your <code>primes</code> array?"}, {"owner": {"reputation": 1, "user_id": 8910246, "user_type": "registered", "profile_image": "https://graph.facebook.com/1943349825877465/picture?type=large", "display_name": "Michallv", "link": "https://stackoverflow.com/users/8910246/michallv"}, "edited": false, "score": 0, "creation_date": 1510187261, "post_id": 47191606, "comment_id": 81333312, "body": "Thanks, primes is a list of 0 and 1 (eratosthenes sieve) so that every prime is 1 and its number is the prime (this part is correct)"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1510193357, "post_id": 47191606, "comment_id": 81334758, "body": "Note that if you want output to appear, you have to make sure that you include a newline at the end of the printing \u2014 <code>printf(&quot;%d\\n&quot;, i)</code> for example.  You also need to create an MCVE (<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>).  We need to see how you&#39;ve declared and initialized variables such as the <code>primes</code> array."}, {"owner": {"reputation": 1, "user_id": 8910246, "user_type": "registered", "profile_image": "https://graph.facebook.com/1943349825877465/picture?type=large", "display_name": "Michallv", "link": "https://stackoverflow.com/users/8910246/michallv"}, "edited": false, "score": 0, "creation_date": 1510208507, "post_id": 47191606, "comment_id": 81339195, "body": "Well will do next time. I was almost sure the mistake was something primitive in this cycle"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8910246, "user_type": "registered", "profile_image": "https://graph.facebook.com/1943349825877465/picture?type=large", "display_name": "Michallv", "link": "https://stackoverflow.com/users/8910246/michallv"}, "edited": false, "score": 0, "creation_date": 1510187464, "post_id": 47191648, "comment_id": 81333359, "body": "Primes is a list full of 1 and 0 so the value should be changing during every cycle"}, {"owner": {"reputation": 121, "user_id": 8383592, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3803c7340420a6fd889f737a7ed119de?s=128&d=identicon&r=PG&f=1", "display_name": "Joel Banks", "link": "https://stackoverflow.com/users/8383592/joel-banks"}, "reply_to_user": {"reputation": 1, "user_id": 8910246, "user_type": "registered", "profile_image": "https://graph.facebook.com/1943349825877465/picture?type=large", "display_name": "Michallv", "link": "https://stackoverflow.com/users/8910246/michallv"}, "edited": false, "score": 0, "creation_date": 1510187557, "post_id": 47191648, "comment_id": 81333383, "body": "@Michallv Also, you need to change it from ++i to i++"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1510193285, "post_id": 47191648, "comment_id": 81334736, "body": "@JoelBanks: What&#39;s the reasoning behind your &quot;<code>++i</code> to <code>i++</code>&quot; comment?  Both work in the context of the increment clause of a <code>for</code> loop."}], "tags": [], "owner": {"reputation": 121, "user_id": 8383592, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3803c7340420a6fd889f737a7ed119de?s=128&d=identicon&r=PG&f=1", "display_name": "Joel Banks", "link": "https://stackoverflow.com/users/8383592/joel-banks"}, "is_accepted": false, "score": 0, "last_activity_date": 1510184780, "creation_date": 1510184780, "answer_id": 47191648, "question_id": 47191606, "link": "https://stackoverflow.com/questions/47191606/there-is-to-be-a-mistake-in-the-for-cycle/47191648#47191648", "title": "There is to be a mistake in the for cycle", "body": "<p>You aren't ever changing the value of prime, which is what your condition is set to stop because of, so if it never changes, it will never stop. Maybe what you meant was prime instead of i in the beginning of your for loop?</p>\n"}, {"tags": [], "owner": {"reputation": 5994, "user_id": 5698738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4tnZ9.jpg?s=128&g=1", "display_name": "Aganju", "link": "https://stackoverflow.com/users/5698738/aganju"}, "is_accepted": false, "score": 0, "last_activity_date": 1510193620, "creation_date": 1510193620, "answer_id": 47192797, "question_id": 47191606, "link": "https://stackoverflow.com/questions/47191606/there-is-to-be-a-mistake-in-the-for-cycle/47192797#47192797", "title": "There is to be a mistake in the for cycle", "body": "<p>Your code contains an endless while: <code>while (rest % prime == 0) {...}</code>.</p>\n\n<p>Once rest hit 0, this will always be true, and you keep dividing rest by prime, but <code>0/prime = 0</code>, so it keeps going forever.</p>\n\n<p>The same is true for <code>prime = 1</code>, which is your assigned value - <code>rest%1 = 0</code>, every single time, and <code>rest/1 = rest</code>, and so on, forever.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 8910246, "user_type": "registered", "profile_image": "https://graph.facebook.com/1943349825877465/picture?type=large", "display_name": "Michallv", "link": "https://stackoverflow.com/users/8910246/michallv"}, "is_accepted": false, "score": 0, "last_activity_date": 1510208155, "creation_date": 1510208155, "answer_id": 47195077, "question_id": 47191606, "link": "https://stackoverflow.com/questions/47191606/there-is-to-be-a-mistake-in-the-for-cycle/47195077#47195077", "title": "There is to be a mistake in the for cycle", "body": "<p>So the mistake I made was this: <strong>prime = primes[i];</strong>, if I use <strong>prime = i;</strong> instead everything works just as it should, I think I made it because I wasn't used to use a list like that where for value you use number of it. Thanks everyone for help</p>\n"}], "owner": {"reputation": 1, "user_id": 8910246, "user_type": "registered", "profile_image": "https://graph.facebook.com/1943349825877465/picture?type=large", "display_name": "Michallv", "link": "https://stackoverflow.com/users/8910246/michallv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1510208155, "creation_date": 1510184494, "last_edit_date": 1510193220, "question_id": 47191606, "link": "https://stackoverflow.com/questions/47191606/there-is-to-be-a-mistake-in-the-for-cycle", "title": "There is to be a mistake in the for cycle", "body": "<blockquote>\n  <p><em>For some reason this cycle doesn't stop, without the else it doesn't even print the first line and I dont't know how to fix it</em></p>\n</blockquote>\n\n<pre><code>    for(int i = 0; prime &lt;= sqrt(rest); ++i) {\n        printf(\"%d\", i);\n        if (primes[i] == 1) {\n            prime = primes[i];\n            printf(\"%d\", prime);\n            while (rest % prime == 0) {\n                rest = rest / prime;\n                rep++;\n            }\n            if (rep == 1) {\n                printf(\"%d\", i);\n                print++;\n            } else if (rep &gt; 1) {\n                printf(\"%d^%d\", prime, rep);\n                print++;\n            }\n            if (rest != 1 &amp;&amp; print != 0) {\n                printf(\" x \");\n            } else if (print != 0) {\n                printf(\"\\n\");\n            }\n            rep = 0;\n            print = 0;\n        }else{\n            printf(\"WTF\\n%d\\n\", i);\n            i++;\n        }\n    }\n    if (rest &gt; 1) {\n        printf(\"%lld\\n\", rest);\n    } else{\n        printf(\"WTF\\n\");\n        break;\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "struct", "linked-list", "nodes"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1510182741, "post_id": 47191204, "comment_id": 81332002, "body": "Try putting <code>return 0;</code> just before the last <code>}</code> of the file"}], "answers": [{"comments": [{"owner": {"reputation": 151, "user_id": 4625463, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7c692925d83f125f838d360e2e4e6d06?s=128&d=identicon&r=PG&f=1", "display_name": "adrotter", "link": "https://stackoverflow.com/users/4625463/adrotter"}, "edited": false, "score": 0, "creation_date": 1510184229, "post_id": 47191294, "comment_id": 81332478, "body": "No, you have to malloc card"}, {"owner": {"reputation": 15, "user_id": 4163899, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EE0En.jpg?s=128&g=1", "display_name": "blazek", "link": "https://stackoverflow.com/users/4163899/blazek"}, "edited": false, "score": 0, "creation_date": 1510185149, "post_id": 47191294, "comment_id": 81332735, "body": "I added  newNode-&gt;card = (Card*)malloc(sizeof(Card));            and it works now. Thanks!"}], "tags": [], "owner": {"reputation": 151, "user_id": 4625463, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7c692925d83f125f838d360e2e4e6d06?s=128&d=identicon&r=PG&f=1", "display_name": "adrotter", "link": "https://stackoverflow.com/users/4625463/adrotter"}, "is_accepted": false, "score": 1, "last_activity_date": 1510183275, "last_edit_date": 1510183275, "creation_date": 1510182679, "answer_id": 47191294, "question_id": 47191204, "link": "https://stackoverflow.com/questions/47191204/why-is-the-process-being-terminated-after-my-code-runs-process-returns-255/47191294#47191294", "title": "Why is the process being terminated after my code runs? Process returns 255", "body": "<p>My guess is that when you're doing</p>\n\n<pre><code>newNode-&gt;card-&gt;value\n</code></pre>\n\n<p>card is a null pointer, so assigning a null pointer's member a value is what is causing your program to crash</p>\n"}, {"tags": [], "owner": {"reputation": 4337, "user_id": 200399, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b6324731176d3e25cb2d4e3e184bdcb4?s=128&d=identicon&r=PG", "display_name": "Dr Deo", "link": "https://stackoverflow.com/users/200399/dr-deo"}, "is_accepted": true, "score": 1, "last_activity_date": 1510187064, "last_edit_date": 1510187064, "creation_date": 1510186552, "answer_id": 47191908, "question_id": 47191204, "link": "https://stackoverflow.com/questions/47191204/why-is-the-process-being-terminated-after-my-code-runs-process-returns-255/47191908#47191908", "title": "Why is the process being terminated after my code runs? Process returns 255", "body": "<p>C pointers are trouncing you my friend :) Your program is crashing because you are accessing a pointer that you have not initialized, so the object it is supposed to point at does not exist.</p>\n\n<p>Remember a pointer is just a reference to an object. In your case, you first tell us that card is a pointer to a Card object, here.</p>\n\n<pre><code>typedef struct BagNode {\n    Card* card;\n    struct BagNode* next;\n}BagNode;\n</code></pre>\n\n<p>But remember that <strong>you have not yet told us the location of the actual Card object</strong> Something like </p>\n\n<pre><code>Card mycard;\nnewNode-&gt;card=&amp;mycard;//pointer equals to address of mycard\n</code></pre>\n\n<p>or</p>\n\n<pre><code>newNode-&gt;card=(Card*)malloc(sizeof(Card));// works because now there is an actual memory location pointed at.\n</code></pre>\n\n<p>In short, the pointer is pointing at a non existent Card!!!</p>\n\n<p>The moment you try to access this non existent Card, the program crashes</p>\n\n<pre><code>newNode-&gt;card-&gt;value\n</code></pre>\n\n<p>The easiest solution is to change the definition of your struct such that card is the actual object not a pointer</p>\n\n<pre><code>typedef struct BagNode {\n    Card card;//actual object not the pointer to an object\n    struct BagNode* next;\n}BagNode;\n</code></pre>\n\n<p>Then use it like this</p>\n\n<pre><code>newNode-&gt;card.value\n</code></pre>\n\n<p>Or else you can initialise your card pointer with the address of a card object before trying to use it.</p>\n"}, {"tags": [], "owner": {"reputation": 11619, "user_id": 5346306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsACH.jpg?s=128&g=1", "display_name": "Achal", "link": "https://stackoverflow.com/users/5346306/achal"}, "is_accepted": false, "score": 0, "last_activity_date": 1510204813, "creation_date": 1510204813, "answer_id": 47194413, "question_id": 47191204, "link": "https://stackoverflow.com/questions/47191204/why-is-the-process-being-terminated-after-my-code-runs-process-returns-255/47194413#47194413", "title": "Why is the process being terminated after my code runs? Process returns 255", "body": "<p>OS is throwing Segmentation fault because you should allocate memory \"card\" because its a uninitialized pointer pointing to some invalid address.</p>\n\n<pre><code>  so for this add this line :\n              newNode-&gt;card=malloc(sizeof(Card));\n    before this line \n              newNode-&gt;card-&gt;value = value; \n</code></pre>\n\n<p>and after main() function completed successfully ,it return 0 or 1. As of my knowledge in your case its failing so its returning 1 i.e its returning 1 in 2nd byte which is nothing but 255. </p>\n"}], "owner": {"reputation": 15, "user_id": 4163899, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EE0En.jpg?s=128&g=1", "display_name": "blazek", "link": "https://stackoverflow.com/users/4163899/blazek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 47191908, "answer_count": 3, "score": 0, "last_activity_date": 1510204813, "creation_date": 1510182209, "last_edit_date": 1510182551, "question_id": 47191204, "link": "https://stackoverflow.com/questions/47191204/why-is-the-process-being-terminated-after-my-code-runs-process-returns-255", "title": "Why is the process being terminated after my code runs? Process returns 255", "body": "<p>I am new to pointers and creating linked lists. The code is only a part of the entire thing. I tried to make this part simpler for testing and debugging but I still can figure it out. Can someone help me figure out with the process is being terminated after it executes the given code?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n\n#define SPADE \"SPADE\"\n#define CLUB \"CLUB\"\n#define DIAMOND \"DIAMOND\"\n#define HEART \"HEART\"\n\ntypedef struct Card{\n    int value;\n    char suit[10];\n}Card;\n\ntypedef struct BagNode {\n    Card* card;\n    struct BagNode* next;\n}BagNode;\n\nint main() {\n\n    BagNode* head = NULL;\n    BagNode* tail = NULL;\n\n    const char* suit = SPADE;\n    int value = 6;\n\n\n    if(tail == NULL)\n    {\n        printf(\"add funct works\\n\");\n        BagNode* newNode = (BagNode*)malloc(sizeof(BagNode));   // allocate space\n        newNode-&gt;card-&gt;value = value;                                  // assign value\n        strcpy(newNode-&gt;card-&gt;suit, suit);                      // assign value\n        head = newNode;\n        tail = newNode;\n        printf(\"added cards\\n\");\n    }\n    else{\n        BagNode* newNode = (BagNode*)malloc(sizeof(BagNode));   // allocate space\n        newNode-&gt;card-&gt;value = value;                                  // assign value\n        strcpy(newNode-&gt;card-&gt;suit, suit);                      // assign suit\n        tail-&gt;next = newNode;\n        tail = newNode;\n    }\n}\n</code></pre>\n\n<p>This is what the output looks like:</p>\n\n<pre><code>add funct works\nadded cards\n\nProcess returned 255 (0xFF)   execution time : 6.898 s\n</code></pre>\n\n<p>Why is it returning 255? </p>\n\n<p>Any direction would be greatly appreciated!</p>\n\n<p>**note: I'm writing in C</p>\n"}, {"tags": ["c", "linker"], "comments": [{"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1510181024, "post_id": 47190834, "comment_id": 81331349, "body": "combine-objfile is <code>ar</code>"}, {"owner": {"reputation": 5900, "user_id": 931154, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/bTrZd.jpg?s=128&g=1", "display_name": "Gregory Nisbet", "link": "https://stackoverflow.com/users/931154/gregory-nisbet"}, "reply_to_user": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1510181250, "post_id": 47190834, "comment_id": 81331442, "body": "@user3528438 Does that create an archive containing individual object files (a <code>.a</code> file (?)) or a bona fide \u201ccombined object file\u201d that\u2019s indistinguishable from one produced by <code>gcc -c</code>? It might do both depending on the arguments, I just don\u2019t know."}], "answers": [{"comments": [{"owner": {"reputation": 5900, "user_id": 931154, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/bTrZd.jpg?s=128&g=1", "display_name": "Gregory Nisbet", "link": "https://stackoverflow.com/users/931154/gregory-nisbet"}, "edited": false, "score": 0, "creation_date": 1510181666, "post_id": 47190993, "comment_id": 81331619, "body": "<code>one does not generally combine multiple object files into a single, monolithic, non-executable object file</code> ... but is it possible? The main thing I&#39;m trying to figure out is &quot;how possible it is to parallelize linking&quot; ... since I can remember hearing that linking is a bottleneck on some large projects (and I&#39;m trying to figure out why &quot;doing the obvious thing&quot; and combining some object files together before finally producing an executable doesn&#39;t work)."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 5900, "user_id": 931154, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/bTrZd.jpg?s=128&g=1", "display_name": "Gregory Nisbet", "link": "https://stackoverflow.com/users/931154/gregory-nisbet"}, "edited": false, "score": 1, "creation_date": 1510182287, "post_id": 47190993, "comment_id": 81331852, "body": "Yes, it&#39;s possible, but it doesn&#39;t enable parallel linking.  Anyway, for a system large enough that the time spent linking matters, a better (and better-supported) approach would be to split out parts into separate shared libraries, which <i>can</i> be constructed independently."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1510182581, "post_id": 47190993, "comment_id": 81331944, "body": "@JohnBollinger: Partial linking does allow parallel linking. Unreolved references in inputs can be resolved using definitions available in the partial link, while others remain unresolved. This can be used, for example, to build most of a project and then link in small easier-to-build parts later, and repeatedly with different versions."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1510183178, "post_id": 47190993, "comment_id": 81332157, "body": "@EricPostpischil, that might enable (partial) linking in parallel with <i>compiling</i> other objects, but -- and perhaps I&#39;m just being difficult here -- that&#39;s not the same thing as parallel linking.  If you intend to link <code>a.o</code> with <code>b.o</code> to form <code>ab.o</code>, and then to link in<code>c.o</code> to form an executable <code>abc</code>, then the linking steps are inherently serial."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1510183266, "post_id": 47190993, "comment_id": 81332197, "body": "@JohnBollinger: You can link a and b to ab, and c and d to cd, and later ab and cd to abcd. The first two of those are completely independent and can be done in parallel."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 1, "last_activity_date": 1510181102, "creation_date": 1510181102, "answer_id": 47190993, "question_id": 47190834, "link": "https://stackoverflow.com/questions/47190834/is-it-possible-to-link-in-multiple-steps-is-linking-associative/47190993#47190993", "title": "Is it possible to link in multiple steps / is linking &quot;associative&quot;?", "body": "<p>\"Linking\" is the process of constructing <em>an executable</em> from one or more object files.  It is possible in principle to combine multiple object files in a way that leaves some symbols unresolved, but, to a first approximation, the result is not an executable, and therefore what you have done in that case is not linking.</p>\n\n<p>In practice, one does not generally combine multiple object files into a single, monolithic, non-executable object file.  Instead, one builds libraries.  It is indeed possible to add objects to a library incrementally, but build systems are not usually structured to do that, because it's not very useful.  Instead, if one wants a library, one generally builds all the objects that will go into it first, and then forms the library from them.  Occasionally, that involves adding the contents of one library to another, but rarely does it involve adding objects to an existing library.</p>\n"}, {"tags": [], "owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": true, "score": 1, "last_activity_date": 1510183327, "last_edit_date": 1510183327, "creation_date": 1510182244, "answer_id": 47191211, "question_id": 47190834, "link": "https://stackoverflow.com/questions/47190834/is-it-possible-to-link-in-multiple-steps-is-linking-associative/47191211#47191211", "title": "Is it possible to link in multiple steps / is linking &quot;associative&quot;?", "body": "<p>Yes, it is possible. It may not be associative in the mathematical sense, but you likely do not really need that.</p>\n\n<p>The macOS and Linux link command (<code>ld</code>) has a switch, <code>-r</code>, that says to link into a new object file instead of an executable.</p>\n"}], "owner": {"reputation": 5900, "user_id": 931154, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/bTrZd.jpg?s=128&g=1", "display_name": "Gregory Nisbet", "link": "https://stackoverflow.com/users/931154/gregory-nisbet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 47191211, "answer_count": 2, "score": 0, "last_activity_date": 1510183327, "creation_date": 1510180300, "question_id": 47190834, "link": "https://stackoverflow.com/questions/47190834/is-it-possible-to-link-in-multiple-steps-is-linking-associative", "title": "Is it possible to link in multiple steps / is linking &quot;associative&quot;?", "body": "<p>I'm trying to figure out whether it's possible to link object files together in multiple steps, provided that the \"order\" is preserved. (Alternatively, whether linking* is \"associative\" or not).</p>\n\n<p>*I'm vaguely aware that there are some subtleties to linking like linker scripts, weak symbols &amp;c. I'm mostly curious about what happens in the simplest case for an \"ordinary\" C project where every symbol is unique.</p>\n\n<p>I have a trivial project with the following structure:</p>\n\n<pre><code>.\n\u251c\u2500\u2500 build.sh\n\u251c\u2500\u2500 child.c\n\u251c\u2500\u2500 child.h\n\u251c\u2500\u2500 grandparent.c\n\u251c\u2500\u2500 grandparent.h\n\u251c\u2500\u2500 main.c\n\u251c\u2500\u2500 parent.c\n\u2514\u2500\u2500 parent.h\n</code></pre>\n\n<p>It's built using the following script:</p>\n\n<pre><code>#!/bin/bash\n\n# build objects\ngcc -c -o grandparent.o grandparent.c\ngcc -c -o parent.o parent.c\ngcc -c -o child.o child.c\ngcc -c -o main.o main.c\n\n# link all at once\ngcc -o main main.o grandparent.o parent.o child.o\n</code></pre>\n\n<p>Here's <code>child.h</code></p>\n\n<pre><code>int c_add();\n</code></pre>\n\n<p>And <code>child.c</code></p>\n\n<pre><code>#include \"child.h\"\nint c_add(int x, int y) { return x + y; }\n</code></pre>\n\n<p>Here's <code>parent.c</code></p>\n\n<pre><code>#include \"parent.h\"\nint p_add(int x, int y) { return c_add(x, y); }\n</code></pre>\n\n<p>and <code>grandparent.c</code></p>\n\n<pre><code>#include \"grandparent.h\"\nint gp_add(int x, int y) { return p_add(x, y); }\n</code></pre>\n\n<p>(<code>parent.h</code> and <code>grandparent.h</code> are trivial variations of <code>child.h</code>)</p>\n\n<p>I'm trying to figure out whether it's possible to link the four object files of the project together in three steps, like in the following (strawman syntax):</p>\n\n<pre><code>$ combine-objfile -o bar.o parent.o child.o\n$ combine-objfile -o foo.o main.o grandparent.o\n$ gcc -o main foo.o bar.o\n</code></pre>\n\n<p>Where <code>combine-objfile</code> is a hypothetical utility that combines two files of whatever-format-a-.o-is into another file of the same format, satisfying the same invariants (and allowing references to not-yet-defined symbols)</p>\n\n<p>In case the answer is platform-specific, I'm most curious about x86 Linux.</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 8, "creation_date": 1510179198, "post_id": 47190588, "comment_id": 81330584, "body": "<code>strlen</code> has no side effects.  If you&#39;re seeing it cause this kind of issue, it implies you&#39;re invoking <b>undefined behaviour</b> elsewhere in your code.  Can you construct a <a href=\"https://stackoverflow.com/help/mcve\">minimal test-case</a>?"}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 4, "creation_date": 1510179326, "post_id": 47190588, "comment_id": 81330638, "body": "is it possible one of those strings isn&#39;t null-terminated?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1510179388, "post_id": 47190588, "comment_id": 81330665, "body": "even if it was, it would crash right away, and wouldn&#39;t have a &quot;delayed effect&quot; like with undefined writes. your program bug is not because of strlen."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1510179714, "post_id": 47190588, "comment_id": 81330803, "body": "&quot;strlen is actually printing correct results&quot;  --&gt; yet the post lacks even that output of <code>printf()</code>.  Hmmm."}, {"owner": {"reputation": 47, "user_id": 8909928, "user_type": "registered", "profile_image": "https://graph.facebook.com/1622995087760985/picture?type=large", "display_name": "Martin Re\u0161ovsk&#253;", "link": "https://stackoverflow.com/users/8909928/martin-re%c5%a1ovsk%c3%bd"}, "edited": false, "score": 0, "creation_date": 1510180181, "post_id": 47190588, "comment_id": 81331029, "body": "Basically, in very minimal way, this is something Im doing:   char message_out[1024];  bzero(message_out, 1024); char objectNameValue[1024]; strcpy(objectNameValue,&quot;cn=&quot;); char PA_type_value[5] = {&#39;u&#39;, &#39;i&#39;, &#39;d&#39;}; strcat(Message_out, objectNameValue); strcat(Message_out, PA_type_value); But sometimes Im not putting the fixed characters into string, but another string f.e. and I need to find out how big that string is, because I need to count total lengths of the message_out. I always watch out for strings, to be big enough, to be inicialized with zeroes."}, {"owner": {"reputation": 47, "user_id": 8909928, "user_type": "registered", "profile_image": "https://graph.facebook.com/1622995087760985/picture?type=large", "display_name": "Martin Re\u0161ovsk&#253;", "link": "https://stackoverflow.com/users/8909928/martin-re%c5%a1ovsk%c3%bd"}, "edited": false, "score": 0, "creation_date": 1510180334, "post_id": 47190588, "comment_id": 81331091, "body": "It lacks output, because I thougth that you can believe me in this :D It really prints correct results."}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 1, "creation_date": 1510180389, "post_id": 47190588, "comment_id": 81331111, "body": "Please edit your question adding the relevant code instead of writing it in the comments section. Add the output too."}, {"owner": {"reputation": 47, "user_id": 8909928, "user_type": "registered", "profile_image": "https://graph.facebook.com/1622995087760985/picture?type=large", "display_name": "Martin Re\u0161ovsk&#253;", "link": "https://stackoverflow.com/users/8909928/martin-re%c5%a1ovsk%c3%bd"}, "edited": false, "score": 0, "creation_date": 1510180477, "post_id": 47190588, "comment_id": 81331144, "body": "When Im unvoking undefined behaviour elsewhere, why it is always okay and it pops up only when strlen is used?"}, {"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 1, "creation_date": 1510180637, "post_id": 47190588, "comment_id": 81331202, "body": "<a href=\"https://en.wikipedia.org/wiki/Heisenbug\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Heisenbug</a>"}, {"owner": {"reputation": 47, "user_id": 8909928, "user_type": "registered", "profile_image": "https://graph.facebook.com/1622995087760985/picture?type=large", "display_name": "Martin Re\u0161ovsk&#253;", "link": "https://stackoverflow.com/users/8909928/martin-re%c5%a1ovsk%c3%bd"}, "edited": false, "score": 0, "creation_date": 1510181193, "post_id": 47190588, "comment_id": 81331419, "body": "Never knew, this is actually a thing. But can I ask you, whats the best way to solve such a problem? How to locate it?"}, {"owner": {"reputation": 47, "user_id": 8909928, "user_type": "registered", "profile_image": "https://graph.facebook.com/1622995087760985/picture?type=large", "display_name": "Martin Re\u0161ovsk&#253;", "link": "https://stackoverflow.com/users/8909928/martin-re%c5%a1ovsk%c3%bd"}, "edited": false, "score": 0, "creation_date": 1510181524, "post_id": 47190588, "comment_id": 81331569, "body": "as long as I know, char PA_type_value[5] = {&#39;u&#39;, &#39;i&#39;, &#39;d&#39;} will fill fourth and fifth byte with /0."}, {"owner": {"reputation": 102935, "user_id": 35092, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/a0QNl.jpg?s=128&g=1", "display_name": "Charlie Martin", "link": "https://stackoverflow.com/users/35092/charlie-martin"}, "edited": false, "score": 1, "creation_date": 1510183244, "post_id": 47190588, "comment_id": 81332184, "body": "@martin, that&#39;s not correct. <code>PA_type_value[5] = {&#39;u&#39;, &#39;i&#39;, &#39;d&#39;}</code> leaves the fourth and fifth byte strictly alone.  Change your code to <code>PA_type_value[5] = {&#39;u&#39;, &#39;i&#39;, &#39;d&#39;,&#39;\\0&#39;}</code> and I bet it works."}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1510183273, "post_id": 47190588, "comment_id": 81332201, "body": "Adding and removing <code>strlen</code> changes the machine code which compiler produces.. If code has undefined behavior elsewhere, then the behavior can be, and often is, different for these different compiler outputs. For example, use of stack will be different, and contents of stack often affect what undefined behavior does."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 102935, "user_id": 35092, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/a0QNl.jpg?s=128&g=1", "display_name": "Charlie Martin", "link": "https://stackoverflow.com/users/35092/charlie-martin"}, "edited": false, "score": 3, "creation_date": 1510183332, "post_id": 47190588, "comment_id": 81332225, "body": "@Charlie Martin: That&#39;s false. <code>char PA_type_value[5] = {&#39;u&#39;, &#39;i&#39;, &#39;d&#39;}</code> is absolutely guaranteed to set the remaining array elements to zero. This is one of the cornerstones of C and C++ aggregate initialization philosophy: all-or-nothing."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1510183719, "post_id": 47190588, "comment_id": 81332343, "body": "There just isn\u2019t enough data here to answer. If you can create a minimal <i>complete</i> program which still fails, then we can help; otherwise, we can only offer general tips like \u201cuse a debugger\u201d and \u201crun it through Valgrind\u201d."}, {"owner": {"user_type": "does_not_exist", "display_name": "user539810"}, "edited": false, "score": 0, "creation_date": 1510189226, "post_id": 47190588, "comment_id": 81333832, "body": "<code>strcpy(objectNameValue,&quot;cn=&quot;);</code> ... <code>Length of objectNameValue: 12</code> ??? I&#39;m uncertain how a string of length 3 is &quot;correct&quot; when the length printed is 12. Please match the output you provide to the sample input/code you provide. As Daniel H. said, a minimal program demonstrating the issue would be helpful. See this: <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 6023, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "edited": false, "score": 0, "creation_date": 1510218775, "post_id": 47190588, "comment_id": 81344341, "body": "Do you have multiple threads in this app? If not - the reason is missing 0 at the end of string."}], "answers": [{"comments": [{"owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 1, "creation_date": 1510180460, "post_id": 47190628, "comment_id": 81331136, "body": "While the C standard does claim that calling a string function on an unterminated string can cause critical undefined behavior, I&#39;m having trouble imagining a <code>strlen()</code> implementation that would perform a write\u2026"}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "reply_to_user": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 1, "creation_date": 1510230956, "post_id": 47190628, "comment_id": 81352343, "body": "@duskwuff - <code>strlen()</code> is unlikely to specifically do a write.   However, if there is no terminating zero, it is possible that it attempts to access the value at a non-existent location in memory (in which case, the memory management unit - implemented as circuitry in quite a few modern CPUs - may generate illegal access errors)."}, {"owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "reply_to_user": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1510249611, "post_id": 47190628, "comment_id": 81365876, "body": "@Peter Right -- but that&#39;d simply cause a crash, not the unexpected behavior described by the OP."}], "tags": [], "owner": {"reputation": 879, "user_id": 372128, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rAwcJ.jpg?s=128&g=1", "display_name": "Valentin", "link": "https://stackoverflow.com/users/372128/valentin"}, "is_accepted": false, "score": 1, "last_activity_date": 1510179306, "creation_date": 1510179306, "answer_id": 47190628, "question_id": 47190588, "link": "https://stackoverflow.com/questions/47190588/does-strlen-have-any-side-effect/47190628#47190628", "title": "Does strlen have any side effect?", "body": "<p>The problem could be with how <code>strlen</code> finds the length. <code>strlen</code> iterates through all characters of an array of characters until it finds a terminal \\0 character. If the array does not have this terminal character, the implementation could proceed out of the memory bounds of the array of characters you gave it and cause undefined behavior.</p>\n"}], "owner": {"reputation": 47, "user_id": 8909928, "user_type": "registered", "profile_image": "https://graph.facebook.com/1622995087760985/picture?type=large", "display_name": "Martin Re\u0161ovsk&#253;", "link": "https://stackoverflow.com/users/8909928/martin-re%c5%a1ovsk%c3%bd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 273, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1510218553, "creation_date": 1510179146, "last_edit_date": 1510182935, "question_id": 47190588, "link": "https://stackoverflow.com/questions/47190588/does-strlen-have-any-side-effect", "title": "Does strlen have any side effect?", "body": "<p>I know, or better I suppose, that strlen() is fairly simple function, but for some reason, when I want to use it in one my function, it will corrupt the program. I have no idea why it's happening, because the results from strlen are correct, but the program as a whole doesn't work if strlen is included. To be specific, this part of code is causing trouble:</p>\n\n<pre><code>int random1 = strlen(objectNameValue);\nint random2 = strlen(PA_type_value);\nint random3 = strlen(attributeValue);\nprintf(\"length of objectNameValue: %d, PA_type_value: %d, attributeValue: %d\", random1, random2, random3);\n</code></pre>\n\n<p>My program is actually a simple LDAP server and I'm trying to send some data - those variables (attributeValue), for example, when I put this part of code to comments, it works perfectly. But if I leave it there, sent data are not correct, and I have really no idea how strlen can affect them. Funny is that strlen is actually printing correct results.</p>\n\n<p>To specify a bit more, those three variables in strlen are all of type char[] and all have /0 at the end. Can anyone help?</p>\n\n<p>So, after request in comments, here is a closer look:\nBasically, in very minimal way, this is something I'm doing:</p>\n\n<pre><code>char message_out[1024];\nbzero(message_out, 1024);\nchar objectNameValue[1024];\nstrcpy(objectNameValue,\"cn=\");\nchar PA_type_value[5] = {'u', 'i', 'd'};\nstrcat(Message_out, objectNameValue);\nstrcat(Message_out, PA_type_value);\n</code></pre>\n\n<p>But sometimes I'm not putting the fixed characters into string, but another string for example., and I need to find out how big that string is, because I need to count total lengths of the message_out. I always watch out for strings, to be big enough, to be initialized with zeroes.</p>\n\n<p>Output is this:</p>\n\n<p>Length of objectNameValue: 12, PA_type_value: 3, attributeValue: 8</p>\n"}, {"tags": ["c", "random", "concurrency"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1510175527, "post_id": 47189759, "comment_id": 81328880, "body": "Show the code you tried and which is not working. Not the comments."}, {"owner": {"reputation": 197, "user_id": 8727379, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh6.googleusercontent.com/-1CIQH1Odgd4/AAAAAAAAAAI/AAAAAAAAADs/rsewUiShkr0/photo.jpg?sz=128", "display_name": "Zeno Raiser", "link": "https://stackoverflow.com/users/8727379/zeno-raiser"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1510175703, "post_id": 47189759, "comment_id": 81328953, "body": "simply instead of the comment in the exit() functions i&#39;ve tried to use rand -M 6 as argv[1] but i don&#39;t figure out how to do it properly"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1510175751, "post_id": 47189759, "comment_id": 81328973, "body": "<code>exit</code> doesn&#39;t take anything like this."}, {"owner": {"reputation": 197, "user_id": 8727379, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh6.googleusercontent.com/-1CIQH1Odgd4/AAAAAAAAAAI/AAAAAAAAADs/rsewUiShkr0/photo.jpg?sz=128", "display_name": "Zeno Raiser", "link": "https://stackoverflow.com/users/8727379/zeno-raiser"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1510175817, "post_id": 47189759, "comment_id": 81329005, "body": "the point is that i&#39;m searching a way to use rand -M 6 in the code"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1510175987, "post_id": 47189759, "comment_id": 81329081, "body": "What&#39;s <code>rand -M 6</code> anyway? It&#39;s not a standard shell command, if it is implied.."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1510176063, "post_id": 47189759, "comment_id": 81329118, "body": "How about <code>getpid() % 6</code>?"}, {"owner": {"reputation": 197, "user_id": 8727379, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh6.googleusercontent.com/-1CIQH1Odgd4/AAAAAAAAAAI/AAAAAAAAADs/rsewUiShkr0/photo.jpg?sz=128", "display_name": "Zeno Raiser", "link": "https://stackoverflow.com/users/8727379/zeno-raiser"}, "reply_to_user": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1510176163, "post_id": 47189759, "comment_id": 81329165, "body": "@dbush nice one but it wouldn&#39;t be random, my pids are always an ordinated sequence of numbers so it would be like something like 2+3+4+5"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1510193522, "post_id": 47189759, "comment_id": 81334797, "body": "See <a href=\"https://stackoverflow.com/questions/7343833/\"><code>srand()</code> \u2014 why call it only once?</a>, noting that if you want different sequences, you <i>must</i> call it once, with a different value each time."}], "answers": [{"comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1510176062, "post_id": 47189856, "comment_id": 81329117, "body": "maybe a better idea would be to seed it with pid + time or something like that."}, {"owner": {"reputation": 197, "user_id": 8727379, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh6.googleusercontent.com/-1CIQH1Odgd4/AAAAAAAAAAI/AAAAAAAAADs/rsewUiShkr0/photo.jpg?sz=128", "display_name": "Zeno Raiser", "link": "https://stackoverflow.com/users/8727379/zeno-raiser"}, "edited": false, "score": 0, "creation_date": 1510176299, "post_id": 47189856, "comment_id": 81329218, "body": "so if i understood well i should do something like srand(rand(clock())) ??"}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1510176349, "post_id": 47189856, "comment_id": 81329238, "body": "I would consider making use of <code>&#47;dev&#47;random</code>."}, {"owner": {"reputation": 920, "user_id": 8108125, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d73c63113cdabd2357f32a9808bd0559?s=128&d=identicon&r=PG&f=1", "display_name": "Cpp plus 1", "link": "https://stackoverflow.com/users/8108125/cpp-plus-1"}, "reply_to_user": {"reputation": 197, "user_id": 8727379, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh6.googleusercontent.com/-1CIQH1Odgd4/AAAAAAAAAAI/AAAAAAAAADs/rsewUiShkr0/photo.jpg?sz=128", "display_name": "Zeno Raiser", "link": "https://stackoverflow.com/users/8727379/zeno-raiser"}, "edited": false, "score": 0, "creation_date": 1510176366, "post_id": 47189856, "comment_id": 81329245, "body": "@ZenoRaiser But clock() isn&#39;t as good as using the system time, in my opinion, since the time since the program started (which is what clock() returns) seems to fluctuate within certain values sometimes."}, {"owner": {"reputation": 197, "user_id": 8727379, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh6.googleusercontent.com/-1CIQH1Odgd4/AAAAAAAAAAI/AAAAAAAAADs/rsewUiShkr0/photo.jpg?sz=128", "display_name": "Zeno Raiser", "link": "https://stackoverflow.com/users/8727379/zeno-raiser"}, "edited": false, "score": 0, "creation_date": 1510176578, "post_id": 47189856, "comment_id": 81329345, "body": "@Cppplus1 idk if you told me on purpose to learn it but rand() has void arguments so i couldnt do rand(clock)"}, {"owner": {"reputation": 920, "user_id": 8108125, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d73c63113cdabd2357f32a9808bd0559?s=128&d=identicon&r=PG&f=1", "display_name": "Cpp plus 1", "link": "https://stackoverflow.com/users/8108125/cpp-plus-1"}, "reply_to_user": {"reputation": 197, "user_id": 8727379, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh6.googleusercontent.com/-1CIQH1Odgd4/AAAAAAAAAAI/AAAAAAAAADs/rsewUiShkr0/photo.jpg?sz=128", "display_name": "Zeno Raiser", "link": "https://stackoverflow.com/users/8727379/zeno-raiser"}, "edited": false, "score": 1, "creation_date": 1510176610, "post_id": 47189856, "comment_id": 81329367, "body": "@ZenoRaiser The seeding function is srand()."}, {"owner": {"reputation": 197, "user_id": 8727379, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh6.googleusercontent.com/-1CIQH1Odgd4/AAAAAAAAAAI/AAAAAAAAADs/rsewUiShkr0/photo.jpg?sz=128", "display_name": "Zeno Raiser", "link": "https://stackoverflow.com/users/8727379/zeno-raiser"}, "edited": false, "score": 0, "creation_date": 1510176623, "post_id": 47189856, "comment_id": 81329376, "body": "anyway i&#39;ve solved it with \t\t\tsrand(clock()); \t\t\texit(rand()%6);"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1510176744, "post_id": 47189856, "comment_id": 81329431, "body": "apparently <code>rand</code> is not thread-safe. So you are going to run into problems using it."}, {"owner": {"reputation": 920, "user_id": 8108125, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d73c63113cdabd2357f32a9808bd0559?s=128&d=identicon&r=PG&f=1", "display_name": "Cpp plus 1", "link": "https://stackoverflow.com/users/8108125/cpp-plus-1"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1510176833, "post_id": 47189856, "comment_id": 81329482, "body": "@EugeneSh. What about if the random values are pre-caclulated in one core, and sent to the other cores?"}, {"owner": {"reputation": 197, "user_id": 8727379, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh6.googleusercontent.com/-1CIQH1Odgd4/AAAAAAAAAAI/AAAAAAAAADs/rsewUiShkr0/photo.jpg?sz=128", "display_name": "Zeno Raiser", "link": "https://stackoverflow.com/users/8727379/zeno-raiser"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1510176961, "post_id": 47189856, "comment_id": 81329535, "body": "@EugeneSh. what would be like something thread-safe in this context?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1510177006, "post_id": 47189856, "comment_id": 81329550, "body": "@Cppplus1 As I said and as mentioned in <code>rand</code> <code>man</code> page, it is not thread-safe. So the whole approach is flawed. The man page is mentioning <code>rand_r</code> as a safe alternative. It can work with different seeds."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1510177510, "post_id": 47189856, "comment_id": 81329795, "body": "Seeding the simple PRNG has relevance only to producing a different start point (into the same sequence) on each run. Not seeding it is good when you are developing and debugging, because the data is repeatable."}], "tags": [], "owner": {"reputation": 920, "user_id": 8108125, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d73c63113cdabd2357f32a9808bd0559?s=128&d=identicon&r=PG&f=1", "display_name": "Cpp plus 1", "link": "https://stackoverflow.com/users/8108125/cpp-plus-1"}, "is_accepted": false, "score": 1, "last_activity_date": 1510175880, "creation_date": 1510175880, "answer_id": 47189856, "question_id": 47189759, "link": "https://stackoverflow.com/questions/47189759/rand-command-line-concurrency-programming/47189856#47189856", "title": "rand command line concurrency programming", "body": "<p>You need to seed the random-number generator with srand(unsigned int).</p>\n\n<p>The seed is just a number that initiates the random-number formula. With the same seed, the same sequence of numbers will always show up. I recommend seeding rand() with either clock() from time.h, or the time since January 1, 1970 in seconds (time in computers is often stored as the number of seconds since January 1, 1970).</p>\n"}, {"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 1, "last_activity_date": 1510176583, "creation_date": 1510176583, "answer_id": 47189997, "question_id": 47189759, "link": "https://stackoverflow.com/questions/47189759/rand-command-line-concurrency-programming/47189997#47189997", "title": "rand command line concurrency programming", "body": "<p>The problem with calling <code>rand()</code> from the child process is that it will always be the first call to <code>rand()</code> <strong>in that process</strong>, so the value will always be the same each time.</p>\n\n<p>What you can do instead is generate the return values in an array in the parent, then the children can grab the value they want from the array.</p>\n\n<pre><code>int main()\n{\n    pid_t child_pid;\n    int status;\n    int rvals[NUM_KIDS];\n\n    srand(time(NULL));\n    for (i=0; i&lt;NUM_KIDS; i++) {\n        rvals[i] = rand();\n    }\n\n    for (i=0; i&lt;NUM_KIDS; i++) {\n        ...\n        case 0:\n           printf(\"Hi, my PID is %d\\n\", getpid());\n           exit(rvals[i]);\n</code></pre>\n"}], "owner": {"reputation": 197, "user_id": 8727379, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh6.googleusercontent.com/-1CIQH1Odgd4/AAAAAAAAAAI/AAAAAAAAADs/rsewUiShkr0/photo.jpg?sz=128", "display_name": "Zeno Raiser", "link": "https://stackoverflow.com/users/8727379/zeno-raiser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1510176583, "creation_date": 1510175436, "question_id": 47189759, "link": "https://stackoverflow.com/questions/47189759/rand-command-line-concurrency-programming", "title": "rand command line concurrency programming", "body": "<p>Hi i've got some problems with generating random numbers  with concurrency programming, on <code>exit()</code> i would like ti use <code>rand -M 6</code> but i don't know how, i've tried to use <code>rand()</code> in some ways but the childrens always returns the same number. Thanks a lot.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/sysinfo.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;time.h&gt;\n#include &lt;string.h&gt;\n#define NUM_KIDS 5\n\nint i, sum;\n\nint main()\n{\n    pid_t child_pid;\n    int status;\n\n    for (i=0; i&lt;NUM_KIDS; i++) {\n        switch (child_pid = fork()) {\n        case -1:\n            /* Handle error */\n                fprintf(stderr,\"Error #%03d: %s\\n\", errno, strerror(errno));\n                break;\n\n        case 0:\n            /* Perform actions specific to child */\n\n        printf(\"Hi, my PID is %d\\n\", getpid());\n\n        exit(/*here i'd like to use rand -M 6*/);\n        printf(\"Hi, my PID is %d and you should never see this message\\n\", getpid());\n        break;\n\n        default:\n            /* Perform actions specific to parent */\n            printf(\"I'm the proud parent with PID %d of a child with PID %d\\n\", getpid(), child_pid);\n            break;\n        }\n    }\n\n    i = 0;\n\n    while ((child_pid = wait(&amp;status)) != -1) {\n        printf(\"PARENT: PID=%d. Got info of child with PID=%d, status=%d\\n\",\n               getpid(), child_pid, status/256);\n        sum += status/256;\n    }\n    if (errno == ECHILD) {\n        printf(\"In PID=%6d, no more child processes, sum: %d\\n\", getpid(), sum);\n        exit(EXIT_SUCCESS);\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "sockets", "network-programming"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8909678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba2098bb87d6271fd8add6ddda4f6681?s=128&d=identicon&r=PG&f=1", "display_name": "anonymous", "link": "https://stackoverflow.com/users/8909678/anonymous"}, "edited": false, "score": 0, "creation_date": 1510189215, "post_id": 47189731, "comment_id": 81333828, "body": "Thanks so much. However, i am calling the get_ifi_info function that returns a structure ifi_info with all the interfaces availible. Now, I have to take one of those interfaces and bind the udp socket to the ip address of that interface. I guess i ahve to pass the entire struct as an argument. No clue whether I am doing right or not. Any help?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1510191303, "post_id": 47189731, "comment_id": 81334291, "body": "If you read the documentation for <code>get_ifi_info()</code>, or even just look at the definition of <code>ifi_info</code>, you would see that it has <code>ifi_addr</code>, <code>ifi_brdaddr</code>, and <code>ifi_dstaddr</code> fields, all of which are <code>sockaddr*</code> pointers. Wow, just what <code>bind()</code> wants! Use the various fields of <code>ifi_info</code>, such as <code>ifi_flags</code>, to ignore the interfaces you are not interested in, and then when you pick an interface, pass its <code>ifi_addr</code> to <code>bind()</code>, using <code>ifi_addr-&gt;sa_family</code> to know what type of socket to create (<code>AF_INET</code> of <code>AF_INET6</code>). The IP address passed to <code>bind()</code> must match the socket&#39;s address family."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 2, "last_activity_date": 1510190871, "last_edit_date": 1510190871, "creation_date": 1510175328, "answer_id": 47189731, "question_id": 47189591, "link": "https://stackoverflow.com/questions/47189591/how-to-bind-a-udp-socket-to-a-single-unicast-address/47189731#47189731", "title": "how to bind a udp socket to a single unicast address", "body": "<p>You would do this with the <code>bind()</code> function:</p>\n\n<pre><code>int bind(int sockfd, const struct sockaddr *addr, socklen_t addrlen);\n</code></pre>\n\n<p>The first parameter is the file descriptor for the socket.  The second is a pointer to a socket address structure which contains (for IPv4 or IPv6) the IP address and port to bind to.  The third is the size of the structure pointed to by the second parameter.</p>\n\n<p>For example:</p>\n\n<pre><code>int s = socket(AF_INET, SOCK_DGRAM, 0); // AF_INET is for IPv4\nif (s == -1) {\n    perror(\"socket failed\");\n    exit(1);\n}\n\nstruct sockaddr_in sin;  // socket address structure specific to IPv4\nmemset(&amp;sin, 0, sizeof(sin));\nsin.sin_family = AF_INET;\nsin.sin_addr.s_addr = inet_addr(\"192.168.1.2\");    // binds to the local address 192.168.1.2\nsin.sin_port = 0;    // 0 means the OS picks the port\n\nif (bind(s, (struct sockaddr *)&amp;sin, sizeof(sin)) == -1) {\n    perror(\"bind failed\");\n    exit(1);\n}\nprintf(\"bind succeeded\\n\");\n</code></pre>\n\n<p>You can then use the <code>getsockname()</code> function if you need to learn which port was actually chosen:</p>\n\n<pre><code>struct sockaddr_in sin;  // socket address structure specific to IPv4\nsocklen_t sinlen = sizeof(sin);\nmemset(&amp;sin, 0, sizeof(sin));\n\nif (getsockname(s, (struct sockaddr *)&amp;sin, &amp;sinlen) == -1) {\n    perror(\"getsockname failed\");\n    exit(1);\n}\nprintf(\"bound to port %hu\\n\", ntohs(sin.sin_port));\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8909678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba2098bb87d6271fd8add6ddda4f6681?s=128&d=identicon&r=PG&f=1", "display_name": "anonymous", "link": "https://stackoverflow.com/users/8909678/anonymous"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1398, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1510190871, "creation_date": 1510174706, "last_edit_date": 1510175880, "question_id": 47189591, "link": "https://stackoverflow.com/questions/47189591/how-to-bind-a-udp-socket-to-a-single-unicast-address", "title": "how to bind a udp socket to a single unicast address", "body": "<p>I dont have any experience in c programming and I am kind of stuck with an assignment where I have to create a udp socket and bind it with a unicast ip address and an ephemeral port. I just know how to create a udp socket, I am not sure how to proceed. Any help, links will be greatly appreciated. Thank you!</p>\n\n<p>I searched the internet and found out we can use the get_ifi_info function to get interface list, but how do we find out which is the unicast ip?</p>\n"}, {"tags": ["c", "pointers", "struct"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1510173754, "post_id": 47189277, "comment_id": 81327890, "body": "if you want a copy of the strings assign to <code>strdup(str1)</code>. We would need to see how this function is called to emit an advice. with string literals your code is fine."}, {"owner": {"reputation": 713, "user_id": 4880288, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-OycAQxKvySg/AAAAAAAAAAI/AAAAAAAAEQ0/nM_F7pKQCgQ/photo.jpg?sz=128", "display_name": "mgarey", "link": "https://stackoverflow.com/users/4880288/mgarey"}, "edited": false, "score": 1, "creation_date": 1510173943, "post_id": 47189277, "comment_id": 81327994, "body": "See <a href=\"https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">this question</a> for more information about casting the result of malloc in c"}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1510174022, "post_id": 47189277, "comment_id": 81328039, "body": "It depends on your intent.  Do you want a copy of those strings or do you just want to point to strings that already exist?"}, {"owner": {"reputation": 73, "user_id": 8886883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c32fededf71d0ac48eb47a1e137c868?s=128&d=identicon&r=PG&f=1", "display_name": "Unlikely1879", "link": "https://stackoverflow.com/users/8886883/unlikely1879"}, "edited": false, "score": 0, "creation_date": 1510174148, "post_id": 47189277, "comment_id": 81328114, "body": "I want a copy of the strings, so I see what you mean yes, I would need a duplicate, otherwise s-&gt;str1 would point to garbage once the parameter &quot;str1&quot; is destoyed upon completion of the function?"}, {"owner": {"reputation": 677, "user_id": 3846218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cd6a0a530b5d557b791c6cd05ca2c87?s=128&d=identicon&r=PG&f=1", "display_name": "AlexPogue", "link": "https://stackoverflow.com/users/3846218/alexpogue"}, "edited": false, "score": 1, "creation_date": 1510174470, "post_id": 47189277, "comment_id": 81328294, "body": "@Unlikely1879 s-&gt;str1 would not point to garbage at the end of <code>mystruct_new(...)</code>. Instead, it would point to the exact same string as you passed in. So if you call <code>mystruct_new(inputStr1, inputStr2);</code>, and then change inputStr1, e.g. <code>inputStr1[0] = &#39;b&#39;</code>, it would also change your mystruct&#39;s  str1."}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 1, "creation_date": 1510174490, "post_id": 47189277, "comment_id": 81328304, "body": "<code>str1</code> isn&#39;t local to the function, so it would not be destroyed at the end of the function, but its scope is unknown.  If it was scoped in <code>main</code>, for example, it would would survive to the end of the program.  But depending on what exactly it is, maybe it would be changed and that change would affect your struct since <code>s-&gt;str1</code> would be pointing to it rather than having its own copy."}, {"owner": {"reputation": 73, "user_id": 8886883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c32fededf71d0ac48eb47a1e137c868?s=128&d=identicon&r=PG&f=1", "display_name": "Unlikely1879", "link": "https://stackoverflow.com/users/8886883/unlikely1879"}, "edited": false, "score": 0, "creation_date": 1510174602, "post_id": 47189277, "comment_id": 81328366, "body": "oh I see. What about if you literally called the function without initialising a char, like this: mystruct_new(&quot;abc&quot;, &quot;123&quot;);"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1510174644, "post_id": 47189277, "comment_id": 81328387, "body": "@ChristianGibbons <code>str1</code> is local to the function; the memory pointed to by <code>str1</code> is not local"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1510174654, "post_id": 47189277, "comment_id": 81328396, "body": "@Unlikely1879 that is OK since literals have global scope."}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1510174715, "post_id": 47189277, "comment_id": 81328442, "body": "@M.M You are technically correct.  The best kind of correct."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1510175158, "post_id": 47189277, "comment_id": 81328697, "body": "@ChristianGibbons your comment is spot on BTW (apart from this str1 detail, but I got it)"}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 8886883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c32fededf71d0ac48eb47a1e137c868?s=128&d=identicon&r=PG&f=1", "display_name": "Unlikely1879", "link": "https://stackoverflow.com/users/8886883/unlikely1879"}, "edited": false, "score": 0, "creation_date": 1510174323, "post_id": 47189385, "comment_id": 81328215, "body": "That&#39;s exactly what I was looking to do, well explained and thank you :)"}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1510174587, "post_id": 47189385, "comment_id": 81328354, "body": "Be aware that <code>strdup</code> is not a standard library function, and may not be supported everywhere.  You may have to use a combination of <code>malloc</code> and <code>strcpy</code> instead."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 3, "last_activity_date": 1510174328, "last_edit_date": 1510174328, "creation_date": 1510174017, "answer_id": 47189385, "question_id": 47189277, "link": "https://stackoverflow.com/questions/47189277/initialise-struct-pointers-in-a-function-in-c/47189385#47189385", "title": "Initialise struct pointers in a function in C", "body": "<p>If the strings being passed in to <code>str</code> and <code>str2</code> will <strong>always</strong> be string constants than yes you can get away with doing it this way.  My guess however is that this is not the case.  So you would be better off making a copy of each string with <code>strdup</code> and assigning those to the struct members:</p>\n\n<pre><code>mystruct* mystruct_new(const char* str1, const char* str2){\n    mystruct *s = malloc(sizeof(mystruct));\n    s-&gt;str1 = strdup(str1);\n    s-&gt;str2 = strdup(str2);\n    return s;\n}\n</code></pre>\n\n<p>Just make sure to free each of those fields before freeing the struct.</p>\n"}, {"tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": false, "score": 4, "last_activity_date": 1510174745, "last_edit_date": 1510174745, "creation_date": 1510174243, "answer_id": 47189450, "question_id": 47189277, "link": "https://stackoverflow.com/questions/47189277/initialise-struct-pointers-in-a-function-in-c/47189450#47189450", "title": "Initialise struct pointers in a function in C", "body": "<p>your function is legal and doesn't do anything bad. Nevertheless, you should document it to mention that the strings are not copied, only the pointers are.</p>\n\n<p>So if the passed data has a shorter life than the structure itself, you may meet undefined behaviour. Example:</p>\n\n<pre><code>mystruct*func()\n{\n   char a[]=\"foo\";\n   char b[]=\"bar\";\n\n   return mystruct_new(a,b);\n}\nmystruct*func2()\n{\n   char *a=\"foo\";\n   char *b=\"bar\";\n\n   return mystruct_new(a,b);\n}\n\nint main()\n{\n    mystruct *s = func();\n    printf(s-&gt;a); // wrong, memory could be trashed\n    mystruct *s2 = func2();\n    printf(s2-&gt;a); // correct\n    mystruct *s3 = mystruct_new(\"foo\",\"bar\");\n    printf(s3-&gt;a); // also correct, string literals have global scope\n}\n</code></pre>\n\n<p>the above code is undefined behaviour for the first print because <code>s-&gt;a</code> points to some memory that is no longer allocated (local to <code>func</code>).\nThe second print is OK because <code>s2-&gt;a</code> points to a string literal which has infinite life span.</p>\n\n<p>So maybe your function is more useful like this:</p>\n\n<pre><code>mystruct* mystruct_new(const char* str1, const char* str2){\n    mystruct *s = malloc(sizeof(mystruct));\n    s-&gt;str1 = strdup(str1);\n    s-&gt;str2 = strdup(str2);\n    return s;\n}\n</code></pre>\n\n<p>now the memory is allocated for the strings. Don't forget to <code>free</code> it when discarding the structure, better done in another utility function.</p>\n"}, {"tags": [], "owner": {"reputation": 1624, "user_id": 7159784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72be4c6fd2ba4ad48b276cb3627ace11?s=128&d=identicon&r=PG&f=1", "display_name": "Nik", "link": "https://stackoverflow.com/users/7159784/nik"}, "is_accepted": false, "score": 1, "last_activity_date": 1510176120, "last_edit_date": 1510176120, "creation_date": 1510174571, "answer_id": 47189537, "question_id": 47189277, "link": "https://stackoverflow.com/questions/47189277/initialise-struct-pointers-in-a-function-in-c/47189537#47189537", "title": "Initialise struct pointers in a function in C", "body": "<p>Think of it this way: when you allocate memory for the struct, you get the pointer member variables for free. So in essence, when you do this:</p>\n\n<pre><code>mystruct *s = malloc(sizeof(mystruct)); //don't cast result of malloc.\n</code></pre>\n\n<p>Then you can treat <code>s-&gt;str1</code> in the exact same way as you would any regular <code>char*</code> variable, say</p>\n\n<pre><code>char *str1 = NULL;\n</code></pre>\n\n<p>If you want it to point to something, then you have to allocate memory for the pointers. Consider this:</p>\n\n<pre><code>mystruct* mystruct_new(const char* str1, const char* str2){\n    mystruct *s = malloc(sizeof(mystruct);\n\n    char* someString = getMyString(); //gets some arbitrary string\n    char* str1 = NULL;//just for demonstration\n    int length = strlen(someString) + 1;\n\n   //for struct members\n    s-&gt;str1 = malloc(sizeof(char) * length);\n    strcpy(s-&gt;str1, someString);\n\n   //For regular pointers\n    str1 = malloc(sizeof(char) * length);\n    strcpy(str1, someString);\n\n    return s;\n}\n</code></pre>\n\n<p>Also note that if you just assign to a pointer by using the <code>=</code> operator instead of allocating memory, then it will only copy the address to the original value. This may or may not be what you want depending on the context. Generally, if you know the memory location will stay in scope and you don't need (or don't mind) to change the original string, then it is preferred to simply assign it. Otherwise, it is advisable to make a copy.</p>\n\n<pre><code>//Makes a copy of the string\ns-&gt;str1 = malloc(sizeof(char) * length);\nstrcpy(s-&gt;str1, someString);\n\n//copies the address of the original value only!\ns-&gt;str1 = someString;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 1, "creation_date": 1510175502, "post_id": 47189626, "comment_id": 81328864, "body": "I won&#39;t downvote since I see your reputation does not allow you to comment yet, but this kind of answer is better left to comments.  You should flesh it out more if you want it to stand as an answer.  OP never mentions <code>strcpy</code>, so advising the use of <code>strncpy</code> over it does not really get him anywhere."}, {"owner": {"reputation": 84, "user_id": 6529775, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XFCydMsiVt0/AAAAAAAAAAI/AAAAAAAAABs/kbB4mWpYI9M/photo.jpg?sz=128", "display_name": "alaniane", "link": "https://stackoverflow.com/users/6529775/alaniane"}, "reply_to_user": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1510176402, "post_id": 47189626, "comment_id": 81329260, "body": "I agree it should go in the comment section; however, since I can&#39;t comment yet and he is new to C, I felt it better to at least alert him to a common problem that we encounter in production code.  So, I added the code fragment with a comment on where he could use strncpy().  I hope this is sufficient."}], "tags": [], "owner": {"reputation": 84, "user_id": 6529775, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XFCydMsiVt0/AAAAAAAAAAI/AAAAAAAAABs/kbB4mWpYI9M/photo.jpg?sz=128", "display_name": "alaniane", "link": "https://stackoverflow.com/users/6529775/alaniane"}, "is_accepted": false, "score": 0, "last_activity_date": 1510176303, "last_edit_date": 1510176303, "creation_date": 1510174840, "answer_id": 47189626, "question_id": 47189277, "link": "https://stackoverflow.com/questions/47189277/initialise-struct-pointers-in-a-function-in-c/47189626#47189626", "title": "Initialise struct pointers in a function in C", "body": "<p>Use strncpy() instead of strcpy().  The latter is subject to buffer overruns. </p>\n\n<p>For example in this code snippet given by another user, use the strncpy() in place of strcpy()</p>\n\n<pre><code>mystruct* mystruct_new(const char* str1, const char* str2){\n    mystruct *s = malloc(sizeof(mystruct);\n\n    char* someString = getMyString(); //gets some arbitrary string\n    char* str1 = NULL;//just for demonstration\n    int length = strlen(someString) + 1;\n\n   //for struct members\n   s-&gt;str1 = malloc(sizeof(char) * length);\n   strcpy(s-&gt;str1, someString);\n\n  //For regular pointers\n  str1 = malloc(sizeof(char) * length);\n  strcpy(str1, someString);   // replace with strncpy(str1, someString, bufsize);  where bufsize is the maximum number of characters in your string + 1 for the terminator '\\0'.  \n\n  return s;\n</code></pre>\n\n<p>} </p>\n"}], "owner": {"reputation": 73, "user_id": 8886883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c32fededf71d0ac48eb47a1e137c868?s=128&d=identicon&r=PG&f=1", "display_name": "Unlikely1879", "link": "https://stackoverflow.com/users/8886883/unlikely1879"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "answer_count": 4, "score": 4, "last_activity_date": 1510176303, "creation_date": 1510173673, "last_edit_date": 1510174436, "question_id": 47189277, "link": "https://stackoverflow.com/questions/47189277/initialise-struct-pointers-in-a-function-in-c", "title": "Initialise struct pointers in a function in C", "body": "<p>I'm fairly new to C and I'm a little confused as to the correct way to initialise struct variables which are pointers, within a function. Is this style sufficient, or do I need to allocate memory before I assign s->str?\nThank you kindly for your replies, apologies if the question is unclear as I am very new to this language.</p>\n\n<pre><code>typedef struct Mystruct{\n    const char* str1;\n    const char* str2;\n}mystruct;\n\nmystruct* mystruct_new(const char* str1, const char* str2){\n    mystruct *s = (mystruct*)(malloc(sizeof(mystruct)));\n    s-&gt;str1 = str1;\n    s-&gt;str2 = str2;\n    return s;\n}\n</code></pre>\n"}, {"tags": ["c", "linux"], "comments": [{"owner": {"reputation": 695058, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 5, "creation_date": 1510173545, "post_id": 47189198, "comment_id": 81327770, "body": "How many ways do you need?"}, {"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "edited": false, "score": 1, "creation_date": 1510173695, "post_id": 47189198, "comment_id": 81327855, "body": "<code>fork()</code> is the only way to create a new process in Linux. If you call, for example, <code>system()</code>, it will call <code>fork()</code> on your behalf. Are you saying that don&#39;t want your code to call <code>fork()</code> directly, or are you saying that you don&#39;t want your code to call <code>fork()</code> at all, even indirectly, through library calls?"}, {"owner": {"reputation": 15569, "user_id": 2302862, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e264db339bb96e343770fa38018e00f1?s=128&d=identicon&r=PG", "display_name": "Siguza", "link": "https://stackoverflow.com/users/2302862/siguza"}, "edited": false, "score": 0, "creation_date": 1510173773, "post_id": 47189198, "comment_id": 81327900, "body": "Well, <code>clone()</code> is a separate syscall IIRC..."}, {"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "edited": false, "score": 1, "creation_date": 1510173888, "post_id": 47189198, "comment_id": 81327959, "body": "<i>sigh</i>. You are right, of course. Also, <code>vfork()</code> exists. I miss the simplicity of v7 UNIX."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1510173974, "post_id": 47189198, "comment_id": 81328013, "body": "If you want an API more like <code>CreateProcess</code>, there is <a href=\"https://linux.die.net/man/3/posix_spawn\" rel=\"nofollow noreferrer\"><code>posix_spawn</code></a>, but it, too, just calls fork and execve for you."}, {"owner": {"reputation": 15569, "user_id": 2302862, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e264db339bb96e343770fa38018e00f1?s=128&d=identicon&r=PG", "display_name": "Siguza", "link": "https://stackoverflow.com/users/2302862/siguza"}, "edited": false, "score": 3, "creation_date": 1510174459, "post_id": 47189198, "comment_id": 81328283, "body": "Bottom line: there are library functions like <code>posix_spawn</code> and <code>system</code> for your convenience, but at the syscall level the <code>fork</code>+<code>exec</code> paradigm remains."}, {"owner": {"reputation": 3693, "user_id": 5494721, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WHK5j.png?s=128&g=1", "display_name": "OznOg", "link": "https://stackoverflow.com/users/5494721/oznog"}, "edited": false, "score": 0, "creation_date": 1510176199, "post_id": 47189198, "comment_id": 81329187, "body": "also, system, popen,"}, {"owner": {"reputation": 98775, "user_id": 421195, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9a9793fdeb3b94e185c8c99c0238372f?s=128&d=identicon&r=PG", "display_name": "paulsm4", "link": "https://stackoverflow.com/users/421195/paulsm4"}, "edited": false, "score": 0, "creation_date": 1510180507, "post_id": 47189198, "comment_id": 81331160, "body": "The basic mechanism for creating a new &quot;thread of execution&quot; in Linux is <code>fork()&#47;exec()</code>.  There are many different APIs and library functions that let you do different things on top of this basic mechanism.  ALSO: please note that the differences between <code>process</code>, <code>thread</code> and <code>LWP</code> might be less than you might expect: <a href=\"https://stackoverflow.com/questions/200469/what-is-the-difference-between-a-process-and-a-thread\" title=\"what is the difference between a process and a thread\">stackoverflow.com/questions/200469/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1510192318, "post_id": 47190769, "comment_id": 81334519, "body": "I agree that <code>vfork()</code> is nasty, but it was once a part of the SUS \u2014 Single Unix Specification \u2014 which was &#39;POSIX + \u2026&#39;.  For example, see: POSIX 2004 <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/vfork.html\" rel=\"nofollow noreferrer\"><code>vfork()</code></a> where it is marked &#39;obsolescent&#39;.  It was removed from POSIX 2008, the current version.  Like <code>gets()</code> still exists even though it is no longer standard, <code>vfork()</code> still exists even though it is no longer standard."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 1, "creation_date": 1511633365, "post_id": 47190769, "comment_id": 81933113, "body": "<code>vfork</code> is still valuable for performance reasons, particularly when the program that needs to fork+exec has a lot of runtime-writable data. The cost of setting the entire address space copy-on-write for regular <code>fork</code>, and then reverting that again on <code>exec</code>, is substantial."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 2, "last_activity_date": 1510179999, "creation_date": 1510179999, "answer_id": 47190769, "question_id": 47189198, "link": "https://stackoverflow.com/questions/47189198/is-fork-exec-the-only-way-to-execute-a-process-in-linux/47190769#47190769", "title": "Is fork() + exec() the only way to execute a process in Linux?", "body": "<p>Linux provides both high-level and low-level interfaces for starting new processes.</p>\n\n<h2>Low-level interfaces</h2>\n\n<p>The primary low-level interface is the one you have already discovered: <code>fork()</code>.  This is often followed quickly by one of the several <code>exec()</code> functions, but an <code>exec()</code> is unneeded if it is satisfactory for the new process to execute the same code as the original.  That's more common than it may sound to someone more used to the Windows API.</p>\n\n<p>POSIX also defines <code>posix_spawn()</code> family, which serve as special-purpose alternatives to <code>fork()</code> + <code>exec()</code> for certain circumstances to which the latter are not well suited.  <code>posix_spawn()</code> is implemented on Linux via the <code>clone()</code> library function (see next).</p>\n\n<p>Although they are not in POSIX, Linux also provides <code>clone()</code> and <code>vfork()</code> as alternatives to <code>fork()</code>.  On modern Linux these use the same system system call that <code>fork()</code> does, but not the <code>fork()</code> library function itself.  There's not much reason to use <code>vfork()</code> any longer -- it is perhaps indicative that POSIX used to have it, but removed it nearly a decade ago.  Linux-specific <code>clone()</code>, on the other hand, has some interesting behaviors that are occasionally useful.  It provides a more general interface to the fork system call than any of the other functions discussed here do, but it is not portable.  Generally speaking, prefer <code>fork()</code> unless you need something it cannot provide.</p>\n\n<h1>High(er)-level interfaces</h1>\n\n<p>Linux provides some higher-level interfaces as well.  The primary two are <code>system()</code>, which executes a shell command and waits for it to complete, and <code>popen()</code>, which launches a shell command with either its standard input or standard output connected to a pipe, by which the concurrently-running parent process can communicate with it.  Both of these are specified by POSIX, and on POSIX systems they are specified to operate via <code>fork()</code> + <code>exec()</code>.  Of course Windows has <code>system()</code>, too, and <code>_popen()</code>, but not <code>fork()</code> or any direct analog.</p>\n\n<h1>Summary</h1>\n\n<p>Overall, then, a userspace Linux process can start a new process only by forking, but that is to be distinguished from calling the <code>fork()</code> library function, even indirectly.  There are at least six different C library functions in GNU / Linux that can serve as an interface for starting a new process.  Some of those interfaces furthermore permit the new process to execute the same code (a copy of the process image of the original) indefinitely, which is sometimes a useful thing to do.  It is the <code>fork()</code> part of <code>fork()</code> + <code>exec()</code> that starts a new process; the <code>exec()</code> part merely changes what code the new process runs.</p>\n"}], "owner": {"reputation": 1254, "user_id": 4566312, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f792d4cf0473ff830ff5a857ec41bf83?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/4566312/tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 662, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1510179999, "creation_date": 1510173449, "question_id": 47189198, "link": "https://stackoverflow.com/questions/47189198/is-fork-exec-the-only-way-to-execute-a-process-in-linux", "title": "Is fork() + exec() the only way to execute a process in Linux?", "body": "<p>In Windows, you can execute a process using <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms682425(v=vs.85).aspx\" rel=\"nofollow noreferrer\">CreateProcess()</a>.</p>\n\n<p>Now I want to know how to execute a process in Linux, so far I only found that you can do that by calling <code>fork()</code> and then calling <code>exec()</code>.</p>\n\n<p>Is this the only way to execute a process in Linux?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 3, "creation_date": 1510173481, "post_id": 47189161, "comment_id": 81327730, "body": "I suggest using <code>fgets</code> to read a whole line, and then use <code>sscanf</code> to convert the number, if any, at the beginning of the line."}, {"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 0, "creation_date": 1510173752, "post_id": 47189161, "comment_id": 81327888, "body": "If <code>scanf(&quot;%i%c&quot;...)</code> is successful it will return <code>2</code>, not <code>1</code>. <code>fgets</code> would make more sense here."}, {"owner": {"reputation": 11, "user_id": 8847671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/477b085aa77b2b3520fa8b1bb68e7992?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew_H", "link": "https://stackoverflow.com/users/8847671/matthew-h"}, "edited": false, "score": 0, "creation_date": 1510173778, "post_id": 47189161, "comment_id": 81327904, "body": "Well I only just started programming, so I&#39;m not familiar with fgets. How would I use it in this context? Could you post me the line?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1510191178, "post_id": 47189161, "comment_id": 81334254, "body": "If you added a line: <code>printf(&quot;%d [%c] = %d\\n&quot;, a, b, status);</code> after the <code>scanf()</code>, doing a debug print of what was given, and if you typed <code>31</code> as the number, then you&#39;d see <code>31 [</code> on one line, and <code>] = 2</code> on the next, because the <code>%c</code> would read the newline as the character, and because the <code>scanf()</code> as a whole would return 2 because it successfully converted two values.  If you used <code>&quot;%i%[a-z]&quot;</code> as the format string, then you&#39;d get 1 returned in <code>status</code> and 31 in <code>a</code> and garbage in <code>b</code>."}], "answers": [{"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1510191297, "post_id": 47190287, "comment_id": 81334288, "body": "Note that <code>_countof()</code> is a MS-specific feature.  It isn&#39;t entirely appropriate here; using <code>sizeof()</code> is both portable and correct.  The value returned by <code>_countof()</code> is the same as the value from <code>sizeof()</code> in this case because <code>sizeof(buffer[0]) == 1</code>."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1510191802, "post_id": 47190287, "comment_id": 81334395, "body": "Also note that your logic won&#39;t be upset by the user typing <code>31 ants</code>; it will happily treat the <code>s</code> as the &#39;one lower-case letter&#39; (because the buffer is only 10 characters long, if you entered <code>31 elephants</code>, you&#39;d leave the <code>t</code> and the <code>s</code> and the newline unread; if you typed <code>2000000000a</code>, you&#39;d leave the <code>a</code> unread).  You also need both <code>&lt;string.h&gt;</code> (for <code>strlen()</code>) and <code>&lt;stdlib.h&gt;</code> (for <code>atoi()</code>)."}, {"owner": {"reputation": 1624, "user_id": 7159784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72be4c6fd2ba4ad48b276cb3627ace11?s=128&d=identicon&r=PG&f=1", "display_name": "Nik", "link": "https://stackoverflow.com/users/7159784/nik"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1510193663, "post_id": 47190287, "comment_id": 81334831, "body": "@JonathanLeffler, thank you for your comments. I made edits to my answer accordingly. This feedback is very much appreciated, as I am still relatively new to SO and still learning how to give the best answers. People like you will help me get there quicker!"}], "tags": [], "owner": {"reputation": 1624, "user_id": 7159784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72be4c6fd2ba4ad48b276cb3627ace11?s=128&d=identicon&r=PG&f=1", "display_name": "Nik", "link": "https://stackoverflow.com/users/7159784/nik"}, "is_accepted": false, "score": 0, "last_activity_date": 1510193870, "last_edit_date": 1510193870, "creation_date": 1510177787, "answer_id": 47190287, "question_id": 47189161, "link": "https://stackoverflow.com/questions/47189161/scanf-read-variable-number-of-characters/47190287#47190287", "title": "scanf read variable number of characters", "body": "<p>As noted in the comments, your best course of action is to use <code>fgets</code> to just read in a string, then parse and validate it. <a href=\"https://stackoverflow.com/questions/3919009/how-to-read-from-stdin-with-fgets\">This Thread</a> will provide you with enough resources for you to educate yourself about the use of <code>fgets</code>.</p>\n\n<p>Here is one approach you can take. Please note that this code does not attempt to validate every possible input a user can provide, but rather give you a reasonable direction you can take to solve your problem if the input is assumed correct. I will leave the task of validation to you. The code below should provide enough tools to accomplish the rest of your task. Look at using a <code>for</code> loop to step through the <code>buffer</code> and ensure the input is correct. Use <code>isalpha()</code> and <code>isdigit()</code> to test each character. You can also implement your own functions to test each character as is done<br>\nin <a href=\"https://stackoverflow.com/a/21288988/7159784\">this answer</a>.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt; //for atoi() \n#include &lt;string.h&gt; //for strlen() \n#include &lt;ctype.h&gt; //for isalpha()\n#define MAX_INPUTLENGTH 500\nint main(void)\n{\n    //Always a good idea to initialize variables to avoid Undefined Behaviour!\n    char buffer[MAX_INPUTLENGTH] = { '\\0' };\n    int a = 0, status = 1, length = 0;\n    char b = '\\0';\n\n    printf(\"Please enter a positive number immediately\"\n        \"followed by at  most one lower-case letter:\\n\\n\");\n\n    //this gets you a string you can work with\n    fgets(buffer, sizeof(buffer), stdin);\n    length = strlen(buffer);\n    buffer[length - 1] = '\\0';//remove the trailing '\\n'\n    length--;\n\n    //now see if last character is a letter\n    if (isalpha(buffer[length - 1])) {\n        b = buffer[length - 1];//then assign and..\n        buffer[length - 1] = '\\0';//trim the letter\n    }\n\n    //this function converts the remaining string to an int\n    a = atoi(buffer);\n\n    //Use the debugger and observe how these functions work in order\n    //to validate the input. for now, status is always 1!\n    if (status == 1) {\n        printf(\"\\nThank you!\\n\");\n    }\n    return 0;\n}\n</code></pre>\n\n<p>As noted in the comments below by @Jonathan, to portably get the count of an array, one should use <code>sizeof(buffer) / sizeof(buffer[0])</code>. Since you are using a <code>char[]</code>, <code>sizeof(buffer[0])</code> evaluates to <code>1</code>, thus can be omitted when calling <code>fgets</code>.</p>\n"}], "owner": {"reputation": 11, "user_id": 8847671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/477b085aa77b2b3520fa8b1bb68e7992?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew_H", "link": "https://stackoverflow.com/users/8847671/matthew-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 896, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1510193870, "creation_date": 1510173333, "last_edit_date": 1510173882, "question_id": 47189161, "link": "https://stackoverflow.com/questions/47189161/scanf-read-variable-number-of-characters", "title": "scanf read variable number of characters", "body": "<p>I was wondering how I can get <code>scanf</code> to skip reading a character if I press enter... My code is the following:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n\n{\n    int a, status;\n    char b;\n    printf(\"Please enter a positive number immediately\"\n           \"followed by at  most one lower-case letter:\\n\\n\");\n    status = scanf(\"%i%c\", &amp;a, &amp;b);\n    if (status == 1 &amp;&amp; getchar() == '\\n') {\n        printf(\"\\nThank you!\\n\");\n    }\n    return 0;\n}\n</code></pre>\n\n<p>When I enter just a number and nothing else, I need to press enter again to trigger the <code>%c</code>, <code>&amp;b</code> in <code>scanf</code>. How do I avoid that and get the program to accept just 1 number to jump to the <code>printf</code>?<br>\nI tried:</p>\n\n<pre><code>if (status == 1 &amp;&amp; getchar() == '\\n')\n</code></pre>\n\n<p>but that won't work.</p>\n"}, {"tags": ["c", "linux", "unix", "fork", "pid"], "comments": [{"owner": {"reputation": 3693, "user_id": 5494721, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WHK5j.png?s=128&g=1", "display_name": "OznOg", "link": "https://stackoverflow.com/users/5494721/oznog"}, "edited": false, "score": 0, "creation_date": 1510171953, "post_id": 47188610, "comment_id": 81326920, "body": "try to split in functions, be careful, you overwrite the pid of child, how can the father wait for it to complete, then?"}], "answers": [{"tags": [], "owner": {"reputation": 8002, "user_id": 1143850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2927fac544c9960cd5433688fe4cae1d?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/1143850/serge"}, "is_accepted": false, "score": 1, "last_activity_date": 1510172320, "creation_date": 1510172320, "answer_id": 47188898, "question_id": 47188610, "link": "https://stackoverflow.com/questions/47188610/fork-tree-c-child-processes-pid/47188898#47188898", "title": "fork tree C, child processes PID", "body": "<p>Your program is not really readable. I think that you should start using structural programming. i.e.</p>\n\n<pre><code>void p2() {\n   exit(0);\n}\nvoid p3() {\n    if (fork() == 0) p6();\n    ...\n    exit(0);\n}\nvoid p1() {\n    if (fork() == 0) p2();\n    if (fork() == 0) p3();\n    ...\n    exit(0);\n}\n\nint main() {\n   if (fork() == 0) p1();\n   wait();\n   ...\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14317, "user_id": 182402, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/de96aa2f424a48b2510a7d29c65a8ace?s=128&d=identicon&r=PG", "display_name": "Wander Nauta", "link": "https://stackoverflow.com/users/182402/wander-nauta"}, "is_accepted": true, "score": 2, "last_activity_date": 1510173516, "last_edit_date": 1510173516, "creation_date": 1510172711, "answer_id": 47188988, "question_id": 47188610, "link": "https://stackoverflow.com/questions/47188610/fork-tree-c-child-processes-pid/47188988#47188988", "title": "fork tree C, child processes PID", "body": "<p>Seeing as how this is homework, I'll try to give you some pointers.</p>\n\n<p>Wow, that's a lot of code! There might be an opportunity here to take some of the code and put it into a function.</p>\n\n<p>The tree you've linked is a bit weird-looking (not symmetrical), and it starts counting at 1, which is annoying. Nonetheless, we could describe the tree with two arrays: the number of children for each process, and the first number of its leftmost child.</p>\n\n<pre><code>/* The number of children for P0, P1, P2, P3, ... */\nconst int num_children[] = { -1, 4, 0, 2, 0, 2, 0, 1, 0, 0, 0 };\n\n/* The P-number of the first child for P0, P1, P2, P3, ... */\nconst int first_child[] = { -1, 2, -1, 6, -1, 8, -1, 10, -1, -1, -1 };\n</code></pre>\n\n<p>You should be able to recreate the tree from your picture using only this information, and without actually looking at the picture. (Really, do it - I might have made a mistake.)</p>\n\n<p>Then you could write a function that takes a P number, and does the following:</p>\n\n<ul>\n<li>Look up the number of children we have to make in <code>num_children</code>.</li>\n<li>Look up the P number of the first child in <code>first_child</code>.</li>\n<li>Fork a few times, each time running our function in the child, with the right P number, and storing the child's pid in the parent somewhere.</li>\n<li>Output the line you're describing in your question. You've stored all the child pids already, so that should be easy.</li>\n<li>Wait for its own children to complete.</li>\n</ul>\n\n<p>Launch the whole thing with <code>yourfunction(1)</code>.</p>\n\n<p>The leaf functions do not have children, so they would wait forever. That means your program does not quit anymore. Ever. This is actually <em>good</em> news: it means you can use Linux tools like <code>ps</code>, <code>pstree</code>, and <code>htop</code> to make sure your tree has the right shape.</p>\n\n<p>(The lines of output will probably be output in a random order - I hope that's okay.)</p>\n\n<p>Good luck!</p>\n"}, {"tags": [], "owner": {"reputation": 11619, "user_id": 5346306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsACH.jpg?s=128&g=1", "display_name": "Achal", "link": "https://stackoverflow.com/users/5346306/achal"}, "is_accepted": false, "score": 0, "last_activity_date": 1510239525, "last_edit_date": 1510239525, "creation_date": 1510217635, "answer_id": 47197538, "question_id": 47188610, "link": "https://stackoverflow.com/questions/47188610/fork-tree-c-child-processes-pid/47197538#47197538", "title": "fork tree C, child processes PID", "body": "<p>if you wish to having common parent for all child then go for this code instead of writing fork() no of times :</p>\n\n<pre><code>int main()\n{\n    int i, j, k;\n    for (i=0; i&lt;10; i++) {\n        if (fork()==0) {\n            printf(\"child %d -&gt; pid : [%d] and ppid : [%d]\\n\",\n                   i+1, getpid(), getppid());\n            break;\n        } else {\n            if (i==0) {\n                printf(\"parent   pid : [%d] \\n\", getpid());\n            }\n            wait(0);    \n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>if you wish to having parent->child1->child2 i.e child2 parent is child1 like this sequence then go for this code :</p>\n\n<pre><code>int main()\n{\n    int i, j, k;\n    for (i=0; i&lt;10; i++) {\n        if (fork()==0) {\n            printf(\"child %d -&gt; pid : [%d] and ppid : [%d]\\n\",\n                   i+1, getpid(), getppid());\n        } else {\n            if (i==0) {\n                printf(\"parent   pid : [%d] \\n\", getpid());\n            }\n            break;\n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Or according to your requirement you can add some condition inside loop. Hope this will help</p>\n"}], "owner": {"reputation": 5, "user_id": 6367773, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4TNBQ.jpg?s=128&g=1", "display_name": "Hbr", "link": "https://stackoverflow.com/users/6367773/hbr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 729, "favorite_count": 1, "accepted_answer_id": 47188988, "answer_count": 3, "score": 0, "last_activity_date": 1510239525, "creation_date": 1510171127, "last_edit_date": 1510190791, "question_id": 47188610, "link": "https://stackoverflow.com/questions/47188610/fork-tree-c-child-processes-pid", "title": "fork tree C, child processes PID", "body": "<p>I have to implement fork tree <a href=\"https://i.stack.imgur.com/jcwW1.jpg\" rel=\"nofollow noreferrer\">as in this picture</a>.</p>\n\n<pre><code>               +----+\n      +--------| P1 |---------+\n     /         +----+          \\\n    /         /     \\           \\\n +----+   +----+     +----+   +----+\n | P2 |   | P3 |     | P4 |   | P5 |\n +----+   +----+     +----+   +----+\n           /  \\                /   \\\n      +----+ +----+        +----+ +----+\n      | P6 | | P7 |        | P8 | | P9 |\n      +----+ +----+        +----+ +----+\n               |\n             +-----+\n             | P10 |\n             +-----+\n</code></pre>\n\n<p>Output must return something like:</p>\n\n<pre><code>   P1: pid: 1337 ppid: 1336 child processes pids: 1338, 1339, 1340, 1341\n   P2: pid: 1338 ppid: 1337 child processes pids: 1342, 1342... etc.\n</code></pre>\n\n<p>where the child processes pids are pids of every child process of PX, and I don't know how to go about it. Can you give me some advie? My code so far is below, it creates the tree correctly imo, the child processes are a problem.</p>\n\n<pre><code>   #include &lt;stdio.h&gt;\n   #include &lt;stdlib.h&gt;\n   #include &lt;sys/types.h&gt; \n   #include &lt;sys/wait.h&gt;\n\n    int main(int argc, char *argv[])\n   {\n       int pidp1;\n      int pidp2;\n\n\n\nswitch (pidp1 = fork())\n{\n    case 0:\n        printf(\"P2: pid: %d ppid: %d\\n\", getpid(), getppid());\n        exit (0);\n        break;\n    case -1:\n        printf(\"Blad funkcji\\n\");\n        exit (1);\n    default:\n        printf(\"P1: pid: %d ppid: %d child processes pids: %d\\n\", getpid(), getppid(), pidp1);\n        wait(NULL);\n        switch (pidp1 = fork())\n        {\n            case 0:\n                printf(\"P3: pid: %d ppid: %d\\n\", getpid(), getppid());\n                switch (pidp1 = fork())\n                {\n                    case 0:\n                        printf(\"P6: pid: %d ppid: %d \\n\", getpid(), getppid());\n                        exit (0);\n                        break;\n                    case -1:\n                        printf(\"Blad funkcji\\n\");\n                        exit (1);\n                    default:\n                        wait(NULL);\n                        switch (pidp1 = fork())\n                        {\n                            case 0:\n                                printf(\"P7: pid: %d ppid: %d\\n\", getpid(), getppid());\n                                switch (pidp1 = fork())\n                                {\n                                    case 0:\n                                        printf(\"P10: pid: %d ppid: %d\\n\", getpid(), getppid());\n                                        exit (0);\n                                        break;\n                                    case -1:\n                                        printf(\"Blad funkcji\\n\");\n                                        exit (1);\n                                    default:\n                                        wait(NULL);\n                                        exit (0);\n                                }\n                                exit (0);\n                                break;\n                            case -1:\n                                printf(\"Blad funkcji\\n\");\n                                exit (1);\n                            default:\n                                wait(NULL);\n                                exit (0);\n                        }\n                        exit (0);\n                }\n                exit (0);\n                break;\n            case -1:\n                printf(\"Blad funkcji\\n\");\n                exit (1);\n            default:\n                wait(NULL);\n                switch (pidp1 = fork())\n                {\n                    case 0:\n                        printf(\"P4: pid: %d ppid: %d\\n\", getpid(), getppid());\n                        exit (0);\n                        break;\n                    case -1:\n                        printf(\"Blad funkcji\\n\");\n                        exit (1);\n                    default:\n                        wait(NULL);\n                        switch (pidp1 = fork())\n                        {\n                            case 0:\n                                printf(\"P5: pid: %d ppid: %d\\n\", getpid(), getppid());\n                                switch (pidp1 = fork())\n                                {\n                                    case 0:\n                                        printf(\"P8: pid: %d ppid: %d\\n\", getpid(), getppid());\n                                        exit (0);\n                                        break;\n                                    case -1:\n                                        printf(\"Blad funkcji\\n\");\n                                        exit (1);\n                                    default:\n                                        wait(NULL);\n                                        switch (pidp1 = fork())\n                                        {\n                                            case 0:\n                                                printf(\"P9: pid: %d ppid: %d\\n\", getpid(), getppid());\n                                                exit (0);\n                                                break;\n                                            case -1:\n                                                printf(\"Blad funkcji\\n\");\n                                                exit (1);\n                                            default:\n                                                wait(NULL);\n                                                exit (0);\n                                        }\n                                        exit (0);\n                                }\n                                exit (0);\n                                break;\n                            case -1:\n                                printf(\"Blad funkcji\\n\");\n                                exit (1);\n                            default:\n                                wait(NULL);\n                                exit (0);\n                        }\n                        exit (0);\n                }\n                exit (0);\n        }\n        exit (0);\n}\n}\n</code></pre>\n"}, {"tags": ["c", "if-statement", "random", "string-comparison", "fgets"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1510190085, "post_id": 47188582, "comment_id": 81334002, "body": "One simple step would be to add an <code>else { printf(&quot;Huh? Got [%s]\\n&quot;, input); }</code> at the end, which would show you what was happening.  Also, neither your <code>exit</code> nor <code>quit</code> comparisons is working; the program exits silently when they fail.  You could see that by adding <code>printf(&quot;Got quit [%s]\\n&quot;, input);</code> before the <code>exit(0)</code> for <code>quit</code>, and similarly for <code>exit</code>.  You could also see this if you ran the code with a debugger."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1510190176, "post_id": 47188582, "comment_id": 81334018, "body": "Welcome to Stack Overflow \u2014 even though you&#39;ve been around a while. Please note that the preferred way of saying &#39;thanks&#39; around here is by up-voting good questions and helpful answers (once you have enough reputation to do so), and by accepting the most helpful answer to any question you ask (which also gives you a small boost to your reputation). Please see the <a href=\"https://stackoverflow.com/tour\">About</a> page and also <a href=\"http://stackoverflow.com/help/how-to-ask\">How do I ask questions here?</a> and <a href=\"http://stackoverflow.com/help/someone-answers\">What do I do when someone answers my question?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 4, "last_activity_date": 1510171786, "last_edit_date": 1510171786, "creation_date": 1510171411, "answer_id": 47188683, "question_id": 47188582, "link": "https://stackoverflow.com/questions/47188582/if-statement-with-string-compare-in-c/47188683#47188683", "title": "if statement with string compare in C", "body": "<p>You need to remove the new line character <code>'\\n'</code> that can be appended to the string read by <code>fgets</code>.</p>\n\n<p>For example</p>\n\n<pre><code>char input[100];\ninput[0] = '\\0';\n\nif ( fgets (input, 100, stdin) )\n{\n    input[strcspn( input, \"\\n\" )] = '\\0';\n}\n</code></pre>\n\n<p>Take into account that the initializer in this declaration</p>\n\n<pre><code>int random_number = rand() %7;\n</code></pre>\n\n<p>generates numbers in the range <code>[0, 6]</code>. If you need the range <code>[1, 6]</code> then the initializer should look like</p>\n\n<pre><code>int random_number = rand() %6 + 1;\n</code></pre>\n\n<p>And according to the C Standard the function <code>main</code> without parameters shall be declared like</p>\n\n<pre><code>int main( void )\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 430, "user_id": 5228754, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/289d8a3cfbbba6407de075e054309315?s=128&d=identicon&r=PG&f=1", "display_name": "JangoCG", "link": "https://stackoverflow.com/users/5228754/jangocg"}, "edited": false, "score": 0, "creation_date": 1510178050, "post_id": 47188686, "comment_id": 81330051, "body": "Thank you my friend :) And kudos for noticing my mistake with random numbers I&#39;m indeed supposed to get random numbers between 1 - 6."}], "tags": [], "owner": {"reputation": 51553, "user_id": 557306, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OAmpG.jpg?s=128&g=1", "display_name": "sidyll", "link": "https://stackoverflow.com/users/557306/sidyll"}, "is_accepted": false, "score": 3, "last_activity_date": 1510171881, "last_edit_date": 1510171881, "creation_date": 1510171421, "answer_id": 47188686, "question_id": 47188582, "link": "https://stackoverflow.com/questions/47188582/if-statement-with-string-compare-in-c/47188686#47188686", "title": "if statement with string compare in C", "body": "<p>Your <code>fgets</code> call is reading the inserted command plus the newline at the end. So you should compare with the newline as well, or choose a different input reading method (such as using <code>scanf</code>, useful for dealing with any whitespace, or removing the newline yourself).</p>\n\n<pre><code>strcmp(input, \"quit\\n\") == 0\nstrcmp(input, \"exit\\n\") == 0\nstrcmp(input, \"random\\n\") == 0\n</code></pre>\n\n<p>You didn't notice with the first two commands, but they never passed the test as well.</p>\n\n<p>You could also add a final <code>else</code> to grab anything not matched. Only altering that (without dealing with newlines) would prove that the others are not matching as well:</p>\n\n<pre><code>/* ... */\n} else {\n    printf(\"unknown command\\n\");\n}\n</code></pre>\n\n<p>An example using <code>scanf</code>:</p>\n\n<pre><code>char input[101];\nscanf(\" %100s\", input); /* discards any leading whitespace and\n                         * places the next non-whitespace sequence\n                         * in `input` */\n</code></pre>\n"}], "owner": {"reputation": 430, "user_id": 5228754, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/289d8a3cfbbba6407de075e054309315?s=128&d=identicon&r=PG&f=1", "display_name": "JangoCG", "link": "https://stackoverflow.com/users/5228754/jangocg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 542, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1510189933, "creation_date": 1510171039, "last_edit_date": 1510189933, "question_id": 47188582, "link": "https://stackoverflow.com/questions/47188582/if-statement-with-string-compare-in-c", "title": "if statement with string compare in C", "body": "<p>I'm supposed to write a short C code where I generate a random number between 1 and 6 if I type \"random\". If I type in \"exit\" or \"quit\", the program must end. \"quit\" and \"exit\" work, but nothing happens when I enter \"random\".</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main() {\n    printf(\"enter your command\");\n    char input[100];\n    fgets(input, 100, stdin);\n\n    if (strcmp(input, \"quit\") == 0){\n       exit(0); \n    } else if (strcmp(input, \"exit\") == 0) {\n       exit(0);\n    } else if (strcmp(input, \"random\") == 0) {\n       srand(time(NULL));\n       int random_number = rand() %7;\n       printf(\"%d\\n\",random_number);     \n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 3, "creation_date": 1510171092, "post_id": 47188551, "comment_id": 81326428, "body": "Undefined behaviour != required to crash. It can do anything, including working &#39;properly&#39;."}, {"owner": {"reputation": 1499, "user_id": 1372577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4819b4e5fd753e26319b41b632182e0?s=128&d=identicon&r=PG", "display_name": "Constantine Georgiou", "link": "https://stackoverflow.com/users/1372577/constantine-georgiou"}, "edited": false, "score": 0, "creation_date": 1510171240, "post_id": 47188551, "comment_id": 81326512, "body": "Subtracting pointers results to an <code>int</code>. So <code>difference=(char *)(pointer_2-pointer_1);</code> does not make sense."}, {"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1510171298, "post_id": 47188551, "comment_id": 81326550, "body": "The difference between two addresses is not itself an address.  As clearly stated, it is the &quot;difference of the subscripts&quot;.  Using %p does not make it one either, printf is not obliged to make your program crash."}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "reply_to_user": {"reputation": 1499, "user_id": 1372577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4819b4e5fd753e26319b41b632182e0?s=128&d=identicon&r=PG", "display_name": "Constantine Georgiou", "link": "https://stackoverflow.com/users/1372577/constantine-georgiou"}, "edited": false, "score": 1, "creation_date": 1510171318, "post_id": 47188551, "comment_id": 81326562, "body": "@ConstantineGeorgiou Actually <code>ptrdiff_t</code>, which a signed type that&#39;s is not necessarily <code>int</code>."}, {"owner": {"reputation": 3805, "user_id": 247643, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8e9927c1955a6b0497cf6c13d9a7b403?s=128&d=identicon&r=PG", "display_name": "doynax", "link": "https://stackoverflow.com/users/247643/doynax"}, "edited": false, "score": 0, "creation_date": 1510172061, "post_id": 47188551, "comment_id": 81326978, "body": "The difference between two pointers outside of a common array is only an integer if the addresses are equal modulo the type size. Otherwise no integer result is sensible. In fact optimizing compilers usually take advantage of this requrement to compute the difference using a fast a modular inverse (read: multiplication) instead of division by the type size, potentially yielding something entirely different from the rounded integer result which might otherwise be expected."}], "answers": [{"tags": [], "owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "is_accepted": false, "score": 1, "last_activity_date": 1510173428, "creation_date": 1510173428, "answer_id": 47189190, "question_id": 47188551, "link": "https://stackoverflow.com/questions/47188551/pointer-subtraction-and-comparison-rule-confusion/47189190#47189190", "title": "Pointer Subtraction and Comparison Rule Confusion", "body": "<p>Subtracting two pointers does not result in a pointer (\"address\"), it results in integer which is the \"distance\" between those pointers. This only makes sense if the pointers both point into the same array. Likewise, comparing pointers only makes sense if they are in the same array.</p>\n\n<p>When it doesn't make sense, the result is undefined--that does NOT mean that the program will fail, or crash, or produce an error of any kind. It means ANYTHING may happen, and you have no right to complain.</p>\n"}, {"tags": [], "owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "is_accepted": false, "score": 0, "last_activity_date": 1510184633, "creation_date": 1510184633, "answer_id": 47191632, "question_id": 47188551, "link": "https://stackoverflow.com/questions/47188551/pointer-subtraction-and-comparison-rule-confusion/47191632#47191632", "title": "Pointer Subtraction and Comparison Rule Confusion", "body": "<p>You cannot test for undefined behavior, because the result is, eh, totally undefined.</p>\n\n<p>Possible outcomes include getting the expected result, crashing, getting an unexpected result, or <a href=\"https://stackoverflow.com/questions/24527401/undefined-behavior-causing-time-travel\">causing time travel</a>.</p>\n\n<p>In this case, and on common desktop computers, a possible outcome of comparing two unrelated pointers <code>pointer_1&gt;pointer_2</code> is that it compares the addresses stored in the two pointers. So it \"works\".</p>\n\n<p>On computers with a segmented memory, like a 286, a memory address is composed of a pair <code>segment:offset</code>. Comparing two segment values doesn't say anything about which one represents the highest memory address, as it is just an index into a segment descriptor table containing the <em>real</em> address.</p>\n\n<p>So if your arrays are in two different segments (very common, because the segments were small), comparing the pointers for order didn't make much sense and subtracting them didn't even work.</p>\n\n<p>So the language standard says that you cannot do that, because <em>sometimes</em> it doesn't work.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8753900"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1510184633, "creation_date": 1510170922, "question_id": 47188551, "link": "https://stackoverflow.com/questions/47188551/pointer-subtraction-and-comparison-rule-confusion", "title": "Pointer Subtraction and Comparison Rule Confusion", "body": "<p>I was playing around with pointer arithmetic and came across two rules in C Standard regarding pointer subtraction and comparison.</p>\n\n<p>Rule 1: When two pointers are subtracted, both must point to elements of the same array object or just one past the last element of the array object (C Standard, 6.5.6); the result is the difference of the subscripts of the two array elements. Otherwise, the operation is undefined behavior (48).</p>\n\n<p>Rule 2: Similarly, comparing pointers using the relational operators &lt;, &lt;=, >=, and > gives the positions of the pointers relative to each other. Pointers that do not point to the same aggregate or union (nor just beyond the same array object) are compared using relational operators (6.5.8). Otherwise, the operation is undefined behavior (53). </p>\n\n<p>Subtracting or comparing pointers that do not refer to the same array is undefined behavior.</p>\n\n<p>Question 1: As per rule 1 mentioned above, the behavior is undefined, but the program does print an address as output. The program crashes when I try to dereference the the variable containing the address. How come there is an address which exists but the value the address points to does not exist?</p>\n\n<p>Question 2: As per rule 2 mentioned above, using relational operator to compare two pointers which refer two different arrays is undefined behavior, the program should crash, but I end up with an output? How is that possible? </p>\n\n<p>Can someone please help me regarding this rule confusion? I have posted the code below:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n char *pointer_1;\n char *pointer_2;\n char *difference;\n int counter=0;\n\n char string[20]={\"Pointer Arithmetic\"};\n char str[30]={\"Substraction and Comparison\"};\n\n pointer_1=string;\n pointer_2=str; \n\n difference=(char *)(pointer_2-pointer_1);\n printf(\"%p\\n\",difference); Address exists\n\n/*printf(\"%c\\n\",difference);*/ Dereferencing leads to program crash    \n\n while(pointer_1&gt;pointer_2) Is one is allowed to use relational operators on \n                               pointers which point to two different arrays?\n  {                             \n    {\n      counter++;\n      pointer_2++;\n     }\n  }   \n\n  printf(\"%d\",counter);\n\n}\n</code></pre>\n"}, {"tags": ["c", "task", "openmp"], "comments": [{"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 2, "creation_date": 1510169183, "post_id": 47187989, "comment_id": 81325363, "body": "Welcome to SO, please clarify some things to make it possible to answer your question. 1) What is a <i>career condition</i>?, 2) how did you observe it? 3) please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>!"}, {"owner": {"reputation": 2955, "user_id": 3819007, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6hvpZ.png?s=128&g=1", "display_name": "visibleman", "link": "https://stackoverflow.com/users/3819007/visibleman"}, "edited": false, "score": 5, "creation_date": 1510195134, "post_id": 47187989, "comment_id": 81335215, "body": "I assume that career condition is a direct translation from &#39;condici&#243;n de carrera&#39;, actually meaning &#39;race condition&#39;"}, {"owner": {"reputation": 5231, "user_id": 1387346, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/CKtdC.png?s=128&g=1", "display_name": "Cimbali", "link": "https://stackoverflow.com/users/1387346/cimbali"}, "edited": false, "score": 0, "creation_date": 1514307274, "post_id": 47187989, "comment_id": 82931375, "body": "@RafaCarbonell There&#39;s a lot missing to this question. What is <code>results</code> ? And all those functions you call? Try to <a href=\"https://stackoverflow.com/help/mcve\">make your example smaller</a>."}], "owner": {"reputation": 1, "user_id": 8909234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34411cb856632f53c49e51b311e32624?s=128&d=identicon&r=PG&f=1", "display_name": "Rafa Carbonell", "link": "https://stackoverflow.com/users/8909234/rafa-carbonell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1514307208, "creation_date": 1510168911, "last_edit_date": 1514307208, "question_id": 47187989, "link": "https://stackoverflow.com/questions/47187989/openmp-with-tasks", "title": "Openmp with tasks", "body": "<p>I am trying to implement string matching with a Boyer-Moore algorithm in parallel, using C with OpenMP tasks. The problem is that I have a race condition but I can not detect it.</p>\n\n<p>This part of the code is to split the base text to chunk and get results:</p>\n\n<pre><code>int chunks = 8;\nint sizeText = (int) sizeB;\nint start = sizeText/(chunks + 1);\nint end = sizeText%(chunks + 1);\nint j;\n\n// inicio=cp_Wtime();\n#pragma omp parallel\n#pragma omp single\nfor (i=0;i&lt;(argc-2);i++) {\n    #pragma omp task firstprivate(i)\n    {\n        int patlen = (int) sizeS[i];\n        int delta1[ALPHABET_LEN];\n        int *delta2 = malloc(patlen * sizeof(int));\n\n        #pragma omp task\n        make_delta1(delta1, S[i], patlen);\n        #pragma omp task\n        make_delta2(delta2, S[i], patlen);\n        #pragma omp taskwait\n\n        results[i] = sizeText;\n        for(j = 0; j &lt; chunks; j++) {\n            #pragma omp task firstprivate(j)\n            {\n                int result = boyer_moore(delta1, delta2, B+(start*j), (2 * start) + end, S[i], patlen);\n                if(result &gt; -1 &amp;&amp; result &lt; results[i]) {\n                    //printf(\" %d %d %d \\n\", j, result, start);\n                    #pragma omp critical\n                    results[i] = result + start*j;\n                }\n            }\n        }\n        #pragma omp taskwait\n        if (results[i] == sizeText) results[i] = -1;\n        //results[i] = boyer_moore(delta1, delta2, B, (int) sizeB, S[i], patlen);   \n    }\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 4708, "user_id": 5901848, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qbaoZ.jpg?s=128&g=1", "display_name": "Sanchit Patiyal", "link": "https://stackoverflow.com/users/5901848/sanchit-patiyal"}, "edited": false, "score": 1, "creation_date": 1510168330, "post_id": 47187773, "comment_id": 81324833, "body": "and why we have javascript tag here??"}, {"owner": {"reputation": 364, "user_id": 8480078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc772f8d866f7319b1200eaf868d85af?s=128&d=identicon&r=PG&f=1", "display_name": "schylake", "link": "https://stackoverflow.com/users/8480078/schylake"}, "reply_to_user": {"reputation": 4708, "user_id": 5901848, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qbaoZ.jpg?s=128&g=1", "display_name": "Sanchit Patiyal", "link": "https://stackoverflow.com/users/5901848/sanchit-patiyal"}, "edited": false, "score": 0, "creation_date": 1510168479, "post_id": 47187773, "comment_id": 81324926, "body": "@Sanchit Patiyal I thought it was just me for a few seconds I thought I forgot everything about javascript."}, {"owner": {"reputation": 39, "user_id": 7479826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edac0c6da79d57ccc25c039b27ceda80?s=128&d=identicon&r=PG&f=1", "display_name": "David Pitts", "link": "https://stackoverflow.com/users/7479826/david-pitts"}, "edited": false, "score": 0, "creation_date": 1510168545, "post_id": 47187773, "comment_id": 81324963, "body": "weird it only show me that i tagged c"}, {"owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 0, "creation_date": 1510168690, "post_id": 47187773, "comment_id": 81325053, "body": "In <code>strtol ( &amp;c,NULL, 10 )</code> you are not passing strtol a string, but a pointer to a single char, which is undefined behavior and all bets are off. <code>*&quot;1&quot;</code> is a convoluted way of writing <code>&#39;1&#39;</code>."}, {"owner": {"reputation": 501, "user_id": 8608345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c11de40be6eb43ab765974668bf1a97?s=128&d=identicon&r=PG&f=1", "display_name": "NickJH", "link": "https://stackoverflow.com/users/8608345/nickjh"}, "edited": false, "score": 0, "creation_date": 1510169088, "post_id": 47187773, "comment_id": 81325292, "body": "If your system uses ASCII (it does), you can just say <code>c-&#39;0&#39;</code> to get the value of a single digit, no need for strtoul. Alternatively you can do the entire conversion using <code>strtoul(test, NULL, curBase)</code>"}, {"owner": {"reputation": 39, "user_id": 7479826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edac0c6da79d57ccc25c039b27ceda80?s=128&d=identicon&r=PG&f=1", "display_name": "David Pitts", "link": "https://stackoverflow.com/users/7479826/david-pitts"}, "edited": false, "score": 0, "creation_date": 1510169424, "post_id": 47187773, "comment_id": 81325512, "body": "Hi the c-&quot;0&quot; worked great! thanks."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "reply_to_user": {"reputation": 501, "user_id": 8608345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c11de40be6eb43ab765974668bf1a97?s=128&d=identicon&r=PG&f=1", "display_name": "NickJH", "link": "https://stackoverflow.com/users/8608345/nickjh"}, "edited": false, "score": 1, "creation_date": 1510169496, "post_id": 47187773, "comment_id": 81325559, "body": "@NickJH On any system, ASCII or not, you can just say <code>c-&#39;0&#39;</code>. The C11 standard guarantees that the digits from <code>0</code> to <code>9</code> use consecutive values. See section 5.2.1."}, {"owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "edited": false, "score": 0, "creation_date": 1510169579, "post_id": 47187773, "comment_id": 81325616, "body": "@David: probably just a typo, but note that <code>c-&#39;0&#39;</code> is very different from <code>c-&quot;0&quot;</code>."}, {"owner": {"reputation": 39, "user_id": 7479826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edac0c6da79d57ccc25c039b27ceda80?s=128&d=identicon&r=PG&f=1", "display_name": "David Pitts", "link": "https://stackoverflow.com/users/7479826/david-pitts"}, "reply_to_user": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "edited": false, "score": 0, "creation_date": 1510170206, "post_id": 47187773, "comment_id": 81325987, "body": "@Stephan Lechner Why is it very diffrent?"}, {"owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "edited": false, "score": 0, "creation_date": 1510170856, "post_id": 47187773, "comment_id": 81326313, "body": "<code>&quot;0&quot;</code> denotes a string literal, decaying to a pointer to a character. Hence, with <code>c-&quot;0&quot;</code> you substract a memory address from <code>c</code>, and this rarely makes sense. <code>&#39;0&#39;</code>, in contrast, is a character constant corresponding to ASCII code 48."}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 7479826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edac0c6da79d57ccc25c039b27ceda80?s=128&d=identicon&r=PG&f=1", "display_name": "David Pitts", "link": "https://stackoverflow.com/users/7479826/david-pitts"}, "edited": false, "score": 0, "creation_date": 1510170334, "post_id": 47188116, "comment_id": 81326051, "body": "Thanks man , good solution and good explanation for the problem."}], "tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": true, "score": 1, "last_activity_date": 1510169393, "creation_date": 1510169393, "answer_id": 47188116, "question_id": 47187773, "link": "https://stackoverflow.com/questions/47187773/strtol-is-returning-the-wrong-values/47188116#47188116", "title": "Strtol is returning the wrong values", "body": "<p>The problem is that with <code>&amp;c</code> in</p>\n\n<pre><code>long convenrtCharToInt(char c) {\n    long postConvertValue = strtol ( &amp;c,NULL, 10 );\n</code></pre>\n\n<p>you pass a pointer to a single character to a function that expects a string in the sense of a <code>\\0</code>-terminated sequence of characters. Hence, unless <code>c</code>'s value is <code>0</code>, function <code>strtol</code> will access memory out of the bounds of `c and thereby yield undefined behaviour.</p>\n\n<p>To overcome this, you could simply write</p>\n\n<pre><code>int v = c - '0'; // substract ASCII-Code of digit '0' (i.e. 48)\nreturn (v &gt;= 0 &amp;&amp; v &lt;= 9) ? v : -1;\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 7479826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edac0c6da79d57ccc25c039b27ceda80?s=128&d=identicon&r=PG&f=1", "display_name": "David Pitts", "link": "https://stackoverflow.com/users/7479826/david-pitts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 301, "favorite_count": 0, "accepted_answer_id": 47188116, "answer_count": 1, "score": -1, "last_activity_date": 1510169393, "creation_date": 1510168236, "last_edit_date": 1510168457, "question_id": 47187773, "link": "https://stackoverflow.com/questions/47187773/strtol-is-returning-the-wrong-values", "title": "Strtol is returning the wrong values", "body": "<p>i just started learning c this week.</p>\n\n<p>Im trying to convert single chars into long/int.<br>\nMy problem is that when i call the convenrtCharToInt through the main , it is returing the right value , but when i call this function through another function , and give it a char that is inside an array of chars , im getting 10 instead of 1. i ever tried to input only *\"1\" into the function , and it is still giving me the wrong values , it give me 10 instead of 1 as a long.</p>\n\n<pre><code>double base2ToBase10(char test[],int curBase){\n\ndouble totalSum;\nlong currentNumber;\nint arrayLength=countArray(test);\nfor(int i=0; i&lt;arrayLength ;i++) {\n    currentNumber=convenrtCharToInt(test[i]);\n    if ((test[i] &lt; *\"1\")) {\n        totalSum += 0;\n    } else {\n        totalSum += currentNumber*pow(curBase, arrayLength - 1 - i);\n\n    }\n\n}return totalSum;}\n\nlong convenrtCharToInt(char c)\n{\n    long postConvertValue = strtol ( &amp;c,NULL, 10 );\n    return postConvertValue;\n</code></pre>\n\n<p>so if i call it through the main it works , no matter how i do it , but if  i try to use it when i call base2ToBase10 it doesn't. </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "edited": false, "score": 0, "creation_date": 1510167790, "post_id": 47187604, "comment_id": 81324522, "body": "Do you know of a real-life situation where using <code>sizeof(double)</code> in the appropriate way would not be feasible?"}, {"owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "edited": false, "score": 0, "creation_date": 1510167834, "post_id": 47187604, "comment_id": 81324559, "body": "The code you have here doesn&#39;t actually care whether <code>double</code> and <code>void*</code> have the same size and should be extremely portable. Is there some specific case you&#39;re worried about where these sizes might matter?"}, {"owner": {"reputation": 2104, "user_id": 5129504, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/476994845791992/picture?type=large", "display_name": "Josh Weinstein", "link": "https://stackoverflow.com/users/5129504/josh-weinstein"}, "reply_to_user": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "edited": false, "score": 0, "creation_date": 1510167868, "post_id": 47187604, "comment_id": 81324575, "body": "@Jens yes, as stated where writing binary data to a file and reading it on another system or platform. Such as for making a binary language like BSON"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1510168039, "post_id": 47187604, "comment_id": 81324667, "body": "<code>double read_double(void* buf) {   return *(double*)buf; }</code> looks like a strict aliasing violation waiting to happen."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1510186336, "post_id": 47187604, "comment_id": 81333050, "body": "A better implementation of <code>write_double</code> would be <code>memcpy(buf, &amp;num, sizeof num);</code>. No casts."}], "answers": [{"comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 3, "creation_date": 1510168007, "post_id": 47187644, "comment_id": 81324652, "body": "Does the C standard require the use of IEEE 754?"}, {"owner": {"reputation": 9620, "user_id": 1783163, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/BfUwH.jpg?s=128&g=1", "display_name": "peterh", "link": "https://stackoverflow.com/users/1783163/peterh"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1510168328, "post_id": 47187644, "comment_id": 81324831, "body": "@user3386109 Very wise idea :-) I think you could have became a lawyer, too. :-) :-) :-)"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1510168701, "post_id": 47187644, "comment_id": 81325063, "body": "Annex F states <i>&quot;An implementation that defines <code>__STDC_IEC_559__</code> shall conform to the specifications in this annex.356)&quot;</i>. And note 356 specifically says, <i>&quot;Implementations that do not define <code>__STDC_IEC_559__</code> are not required to conform to these specifications.&quot;</i> So the standard does not require the use of IEEE 754. However, the OP <i>could</i> use an <code>#ifdef</code> on  <code>__STDC_IEC_559__</code> to verify that IEEE 754 <i>is</i> being used."}, {"owner": {"reputation": 5231, "user_id": 1387346, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/CKtdC.png?s=128&g=1", "display_name": "Cimbali", "link": "https://stackoverflow.com/users/1387346/cimbali"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1510169265, "post_id": 47187644, "comment_id": 81325411, "body": "@user3386109 fair point, I&#39;ve got some trouble finding the full text right now."}], "tags": [], "owner": {"reputation": 5231, "user_id": 1387346, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/CKtdC.png?s=128&g=1", "display_name": "Cimbali", "link": "https://stackoverflow.com/users/1387346/cimbali"}, "is_accepted": false, "score": 1, "last_activity_date": 1510169492, "last_edit_date": 1510169492, "creation_date": 1510167737, "answer_id": 47187644, "question_id": 47187604, "link": "https://stackoverflow.com/questions/47187604/how-to-guarantee-exact-size-of-double-in-c/47187644#47187644", "title": "How to guarantee exact size of double in C?", "body": "<p>Floating point values are defined in the The IEEE Standard for Floating-Point Arithmetic (<a href=\"https://standards.ieee.org/findstds/interps/754-1985.html\" rel=\"nofollow noreferrer\">IEEE 754</a>) and have standard sizes:</p>\n\n<ul>\n<li><code>float</code>, in full <a href=\"https://en.wikipedia.org/wiki/Single_precision\" rel=\"nofollow noreferrer\">\"single precision floating point number\"</a>: 32 bits</li>\n<li><code>double</code>, in full <a href=\"https://en.wikipedia.org/wiki/Single_precision\" rel=\"nofollow noreferrer\">\"double precision floating point number\"</a>: 64 bits</li>\n</ul>\n\n<p>The following also exist:</p>\n\n<ul>\n<li><a href=\"https://en.wikipedia.org/wiki/Half-precision_floating-point_format\" rel=\"nofollow noreferrer\">Half-precision floating-point format</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/Quadruple_precision\" rel=\"nofollow noreferrer\">Quadruple precision floating-point format</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/Extended_precision\" rel=\"nofollow noreferrer\">Extended precision floating-point format</a></li>\n</ul>\n\n<p>This format is reused in the C11 standard, Annex F \"IEC 60559 floating-point arithmetic\" of ISO/IEC 9899:2011(en).</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1510173682, "post_id": 47187696, "comment_id": 81327849, "body": "Josh, <a href=\"https://stackoverflow.com/questions/47187604/how-to-guarantee-exact-size-of-double-in-c/47187696#comment81325057_47187755\">@Christian Gibbons</a> has a beginning good idea.  Store the value as &quot;IEEE 754 double-precision binary&quot; as a 64-bit integer_with_ network endian_.  Oblige code to covert its local <code>double</code> to/from &quot;IEEE 754 double-precision binary&quot;.  With platforms that use &quot;IEEE 754 double-precision binary&quot;, this is a simple <i>copy</i>.  For others, it will be work."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 5, "last_activity_date": 1510168998, "last_edit_date": 1510168998, "creation_date": 1510167962, "answer_id": 47187696, "question_id": 47187604, "link": "https://stackoverflow.com/questions/47187604/how-to-guarantee-exact-size-of-double-in-c/47187696#47187696", "title": "How to guarantee exact size of double in C?", "body": "<blockquote>\n  <p>How to guarantee exact size of double in C?</p>\n</blockquote>\n\n<p>Use <code>_Static_assert()</code></p>\n\n<pre><code>#include &lt;limits.h&gt;\n\nint main(void) {\n  _Static_assert(sizeof (double)*CHAR_BIT == 64, \"Unexpected double size\");\n  return 0;\n}\n</code></pre>\n\n<hr>\n\n<p><code>_Static_assert</code> available since C11.  Otherwise code could use a run-time assert.</p>\n\n<pre><code>#include &lt;assert.h&gt;\n#include &lt;limits.h&gt;\n\nint main(void) {\n  assert(sizeof (double)*CHAR_BIT == 64);\n  return 0;\n}\n</code></pre>\n\n<hr>\n\n<p>Although this will insure the size of a <code>double</code> is 64, it does not insure <a href=\"https://en.wikipedia.org/wiki/Double-precision_floating-point_format\" rel=\"nofollow noreferrer\">IEEE 754 double-precision binary floating-point format</a> adherence.</p>\n\n<p>Code could use <code>__STDC_IEC_559__</code></p>\n\n<blockquote>\n  <p>An implementation that defines <code>__STDC_IEC_559__</code> shall conform to the specifications in this annex`  C11 Annex F IEC 60559 floating-point arithmetic</p>\n</blockquote>\n\n<p>Yet that may be too strict.  Many implementations adhere to most of that standard, yet still do no set the macro.</p>\n\n<hr>\n\n<blockquote>\n  <p>would there be some standard way to guarantee size of a floating point type or double?</p>\n</blockquote>\n\n<p>The best guaranteed is to write the FP value as its hex representation or as an exponential with sufficient decimal digits.  See <a href=\"https://stackoverflow.com/q/16839658/2410359\">Printf width specifier to maintain precision of floating-point value</a></p>\n"}, {"comments": [{"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1510168695, "post_id": 47187755, "comment_id": 81325057, "body": "Yeah.  You could have a custom floating point format that is 64 bits but with non-standard sizes for the mantissa et al..  I would think that the way to go would be to store it in the IEEE 754 standard format and then any target system that wanted to use it would have to either support that format or have a function to convert to its native format."}, {"owner": {"reputation": 97034, "user_id": 427332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e11b58e11decc7b4c352d3ac3b2d0b90?s=128&d=identicon&r=PG", "display_name": "Tommy", "link": "https://stackoverflow.com/users/427332/tommy"}, "edited": false, "score": 1, "creation_date": 1510169094, "post_id": 47187755, "comment_id": 81325299, "body": "For me, it&#39;s <code>frexp</code> and <code>ldexp</code> to the rescue, usually."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 3, "last_activity_date": 1510168477, "last_edit_date": 1510168477, "creation_date": 1510168154, "answer_id": 47187755, "question_id": 47187604, "link": "https://stackoverflow.com/questions/47187604/how-to-guarantee-exact-size-of-double-in-c/47187755#47187755", "title": "How to guarantee exact size of double in C?", "body": "<p>The problem with floating point type is that the C standard doesn't specify how they should be represented.  The use of IEEE 754 <strong>is not required</strong>.  </p>\n\n<p>If you're communicating between a system that uses IEEE 754 and one that doesn't, you won't be able to write on one and read on the other even if the sizes are the same.</p>\n\n<p>You need to serialize the data in a known format.  You can either use <code>sprintf</code>  to convert it to a text format, or you can do some math to determine the base and mantissa and store those.</p>\n"}, {"tags": [], "owner": {"reputation": 33990, "user_id": 14768, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/b6aMa.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/14768/joshua"}, "is_accepted": false, "score": 0, "last_activity_date": 1510196812, "last_edit_date": 1510196812, "creation_date": 1510168913, "answer_id": 47187992, "question_id": 47187604, "link": "https://stackoverflow.com/questions/47187604/how-to-guarantee-exact-size-of-double-in-c/47187992#47187992", "title": "How to guarantee exact size of double in C?", "body": "<p>Why use <code>CHAR_BIT</code> and assert at runtime? We can do this at compile time.</p>\n\n<pre><code>void write_double(void* buf, double num)\n{\n   char checkdoublesize[(sizeof(double) == 8)?1:-1];\n   *(double*)buf = num;\n}\n</code></pre>\n\n<p>Your code is still undefined as it doesn't gurantee IEEE or endianness but it will catch a bad double size. If your platform's new enough for htonq this will allow endianness to work</p>\n\n<pre><code>void write_double(void* buf, double num)\n{\n   char checkdoublesize[(sizeof(double) == 8)?1:-1];\n   *(int64_t*)buf = htonq(*(volatile int64_t*)&amp;num);\n}\n\n\ndouble read_double(void* buf)\n{\n   int64_t n = ntohq(*(int64_t*)buf);\n   return *(volatile double*)&amp;n;\n}\n</code></pre>\n\n<p>Where <code>volatile</code> is merely the shortest way to tell the compiler the pointer cast really is defined. Usually it does the right thing anyway but after <code>N</code> levels of inlining maybe it won't anymore.</p>\n"}], "owner": {"reputation": 2104, "user_id": 5129504, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/476994845791992/picture?type=large", "display_name": "Josh Weinstein", "link": "https://stackoverflow.com/users/5129504/josh-weinstein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 251, "favorite_count": 1, "accepted_answer_id": 47187696, "answer_count": 4, "score": 4, "last_activity_date": 1510196812, "creation_date": 1510167571, "question_id": 47187604, "link": "https://stackoverflow.com/questions/47187604/how-to-guarantee-exact-size-of-double-in-c", "title": "How to guarantee exact size of double in C?", "body": "<p>So, I am aware that types from the <code>stdint.h</code> header provide standardized width integer types, however I am wondering what type or method does one uses to guarantee the size of a <code>double</code> or other floating point type across platforms? Specifically, this would deal with packing data in a <code>void*</code></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nvoid write_double(void* buf, double num)\n{\n  *(double*)buf = num;\n}\n\ndouble read_double(void* buf)\n{\n  return *(double*)buf;\n}\n\n\nint main(void) {\n  void* buffer = malloc(sizeof(double));\n  write_double(buffer, 55);\n  printf(\"The double is %f\\n\", read_double(buffer));\n  return 0;\n}\n</code></pre>\n\n<p>Say like in the above program, if I wrote that <code>void*</code> to a file or if it was used on another system, would there be some standard way to guarantee size of a floating point type or double?</p>\n"}, {"tags": ["c", "function", "series"], "comments": [{"owner": {"reputation": 787, "user_id": 7714006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2bf23fe02b176b9ec4b72f65570e0b5?s=128&d=identicon&r=PG&f=1", "display_name": "Aditi Rawat", "link": "https://stackoverflow.com/users/7714006/aditi-rawat"}, "edited": false, "score": 4, "creation_date": 1510166873, "post_id": 47187392, "comment_id": 81323939, "body": "In an array of 20 elements last element has index <b>19</b>. <code>g[20]</code> is out of bounds!"}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 1, "creation_date": 1510166880, "post_id": 47187392, "comment_id": 81323945, "body": "Writing to <code>g[20]</code> is <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behaviour</a>. Similar problem with <code>s[20]</code>."}, {"owner": {"reputation": 2815, "user_id": 1462295, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/ts6jy.jpg?s=128&g=1", "display_name": "BurnsBA", "link": "https://stackoverflow.com/users/1462295/burnsba"}, "edited": false, "score": 1, "creation_date": 1510166928, "post_id": 47187392, "comment_id": 81323974, "body": "<code>s</code> is just going to contain random values, whatever was in those memory addresses. Except for index 0,1,2 which have been assigned something."}, {"owner": {"reputation": 787, "user_id": 7714006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2bf23fe02b176b9ec4b72f65570e0b5?s=128&d=identicon&r=PG&f=1", "display_name": "Aditi Rawat", "link": "https://stackoverflow.com/users/7714006/aditi-rawat"}, "edited": false, "score": 0, "creation_date": 1510167057, "post_id": 47187392, "comment_id": 81324045, "body": "Also <code>s[20]</code> is <i>local</i> to<code>function()</code>. Hence your <code>g[]</code> is bound to have garbage values owing to the fact that you have not initialized the elements of array <code>g[]</code>."}, {"owner": {"reputation": 1, "user_id": 5242771, "user_type": "registered", "profile_image": "https://graph.facebook.com/516859275156171/picture?type=large", "display_name": "Jack Internacional", "link": "https://stackoverflow.com/users/5242771/jack-internacional"}, "edited": false, "score": 0, "creation_date": 1510167061, "post_id": 47187392, "comment_id": 81324049, "body": "can you copy my code, make changes and send it back?"}, {"owner": {"reputation": 2912, "user_id": 3081206, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YaKOY.jpg?s=128&g=1", "display_name": "takendarkk", "link": "https://stackoverflow.com/users/3081206/takendarkk"}, "edited": false, "score": 0, "creation_date": 1510167136, "post_id": 47187392, "comment_id": 81324090, "body": "No, this is not a site where we do your work for you. Instead you need to take the time to read and understand the comments that are being given to you and then try to apply that in your code on your own."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1510167634, "post_id": 47187392, "comment_id": 81324406, "body": "like <a href=\"https://ideone.com/CvUm3H\" rel=\"nofollow noreferrer\">this</a> ?"}, {"owner": {"reputation": 787, "user_id": 7714006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2bf23fe02b176b9ec4b72f65570e0b5?s=128&d=identicon&r=PG&f=1", "display_name": "Aditi Rawat", "link": "https://stackoverflow.com/users/7714006/aditi-rawat"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1510168047, "post_id": 47187392, "comment_id": 81324676, "body": "@BLUEPIXY just out of curiosity..what is the need of sending <code>int N</code> as an argument in the function?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "reply_to_user": {"reputation": 787, "user_id": 7714006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2bf23fe02b176b9ec4b72f65570e0b5?s=128&d=identicon&r=PG&f=1", "display_name": "Aditi Rawat", "link": "https://stackoverflow.com/users/7714006/aditi-rawat"}, "edited": false, "score": 0, "creation_date": 1510168375, "post_id": 47187392, "comment_id": 81324861, "body": "@AditiRawat It has not been used in posted code either. I guess that it probably represents the length of the sequence. Perhaps, I think that it will be changed in the future."}, {"owner": {"reputation": 787, "user_id": 7714006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2bf23fe02b176b9ec4b72f65570e0b5?s=128&d=identicon&r=PG&f=1", "display_name": "Aditi Rawat", "link": "https://stackoverflow.com/users/7714006/aditi-rawat"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1510168787, "post_id": 47187392, "comment_id": 81325112, "body": "@BLUEPIXY alright"}], "answers": [{"comments": [{"owner": {"reputation": 787, "user_id": 7714006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2bf23fe02b176b9ec4b72f65570e0b5?s=128&d=identicon&r=PG&f=1", "display_name": "Aditi Rawat", "link": "https://stackoverflow.com/users/7714006/aditi-rawat"}, "edited": false, "score": 0, "creation_date": 1510167550, "post_id": 47187574, "comment_id": 81324353, "body": "In an array of 20 elements <b>last element has index 19</b>. <code>g[20]</code> and <code>s[20]</code>  is out of bounds!!"}, {"owner": {"reputation": 787, "user_id": 7714006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2bf23fe02b176b9ec4b72f65570e0b5?s=128&d=identicon&r=PG&f=1", "display_name": "Aditi Rawat", "link": "https://stackoverflow.com/users/7714006/aditi-rawat"}, "edited": false, "score": 0, "creation_date": 1510167767, "post_id": 47187574, "comment_id": 81324507, "body": "Frankly speaking you need to read about (A) variable scope and (B) how to return more than just one value from a function(hint: you would be requiring pointers in your case)."}], "tags": [], "owner": {"reputation": 155, "user_id": 2019649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb1568ba770020cf63e84bf6766e01de?s=128&d=identicon&r=PG", "display_name": "professor.jenkins", "link": "https://stackoverflow.com/users/2019649/professor-jenkins"}, "is_accepted": false, "score": -2, "last_activity_date": 1510167430, "creation_date": 1510167430, "answer_id": 47187574, "question_id": 47187392, "link": "https://stackoverflow.com/questions/47187392/why-i-cant-make-this-series-by-c-code/47187574#47187574", "title": "Why i cant make this series by C code?", "body": "<p>From your code, you seem to have some misunderstanding about arrays and scope. The two arrays you declare start with unknown values until you set them. see my comments to your original code:</p>\n\n<pre><code>int function(int);\n\nint main()\n{\n    int g[20],N;                  // array g local to main funciton\n    printf(\"Type N\");\n    scanf(\"%d\",&amp;N);\n    g[20]=function(N);            // invoke function with int typed in and return int\n    printf(\"s[0] is %d\\n\",g[0])   // the first three positions of the g array\n    printf(\"s[1] is %d\\n\",g[1]);  // have not been set by function\n    printf(\"s[2] is %d\\n\",g[2]);  // they are also all unknown values\n\n}\n\nint function(int N){ // you never use N in this function, why is it a parameter\n   int s[20];        // declare a int array local to function\ns[0]=1;              // you only set the first three items in array, rest are unknown values.\ns[1]=3;\ns[2]=5;\n\nreturn s[20]; // return the 20th int item of the array, (unknown memory contents)\n}  \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 787, "user_id": 7714006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2bf23fe02b176b9ec4b72f65570e0b5?s=128&d=identicon&r=PG&f=1", "display_name": "Aditi Rawat", "link": "https://stackoverflow.com/users/7714006/aditi-rawat"}, "is_accepted": true, "score": 0, "last_activity_date": 1510168500, "last_edit_date": 1510168500, "creation_date": 1510168320, "answer_id": 47187799, "question_id": 47187392, "link": "https://stackoverflow.com/questions/47187392/why-i-cant-make-this-series-by-c-code/47187799#47187799", "title": "Why i cant make this series by C code?", "body": "<p>You need to something like this.</p>\n\n<pre><code>void function(int *);\n\nint main()\n{\n    int g[20],N;                  // array g local to main funciton\n    printf(\"Type N\");\n    scanf(\"%d\",&amp;N);\n    function(g);            // invoke function by passing array base address as an argument\n    printf(\"s[0] is %d\\n\",g[0]);   // the first three positions of the g array\n    printf(\"s[1] is %d\\n\",g[1]);  // have not been set by function\n    printf(\"s[2] is %d\\n\",g[2]);  // they are also all unknown values\n\n}\n\nvoid function(int *s){ \n    s[0]=1;       //*(s+0)      \n    s[1]=3;     \n    s[2]=5;\n\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5242771, "user_type": "registered", "profile_image": "https://graph.facebook.com/516859275156171/picture?type=large", "display_name": "Jack Internacional", "link": "https://stackoverflow.com/users/5242771/jack-internacional"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 47187799, "answer_count": 2, "score": -4, "last_activity_date": 1510168500, "creation_date": 1510166783, "question_id": 47187392, "link": "https://stackoverflow.com/questions/47187392/why-i-cant-make-this-series-by-c-code", "title": "Why i cant make this series by C code?", "body": "<p>can you tell me why this doesn't work.</p>\n\n<pre><code>int function(int);\n\nint main()\n{\n    int g[20],N;\n    printf(\"Type N\");\n    scanf(\"%d\",&amp;N);\n    g[20]=function(N);\n    printf(\"s[0] is %d\\n\",g[0]);\n    printf(\"s[1] is %d\\n\",g[1]);\n    printf(\"s[2] is %d\\n\",g[2]);\n\n}\n\nint function(int N){\n   int s[20];\ns[0]=1;\ns[1]=3;\ns[2]=5;\n\nreturn s[20];\n}\n</code></pre>\n\n<p>I just want that my function return this numbers 1,3,5 but it returns some weird numbers, i thinks it's adresses or something. \nPS. I just began to learn C.</p>\n"}, {"tags": ["c++", "c", "gcc", "decompiling"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 11, "creation_date": 1510166837, "post_id": 47187371, "comment_id": 81323921, "body": "This is the mother of XY-problems."}, {"owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1510166876, "post_id": 47187371, "comment_id": 81323940, "body": "@EugeneSh. I was very clear what the original problem is."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1510166940, "post_id": 47187371, "comment_id": 81323982, "body": "C++ without pointers is no longer C++."}, {"owner": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "edited": false, "score": 2, "creation_date": 1510167059, "post_id": 47187371, "comment_id": 81324048, "body": "Using an array and running over the end will also run somewhere in the memory, also without explicit use of pointers. C/C++ without any memory access will help..."}, {"owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "reply_to_user": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "edited": false, "score": 0, "creation_date": 1510167111, "post_id": 47187371, "comment_id": 81324076, "body": "@Klaus an answer of &quot;it&#39;s not possible&quot; is perfectly acceptable."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1510167251, "post_id": 47187371, "comment_id": 81324165, "body": "If the specific OBJ can do some stuff, even if you forbid this stuff from a specific language, a malicious user will find a way to craft such an OBJ by other means. It means that your system architecture is just flawed in respect to it&#39;s requirements."}, {"owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1510167359, "post_id": 47187371, "comment_id": 81324244, "body": "@EugeneSh. Our average user is not going to <b>want</b> to break things. Even the array out of bounds access may be an acceptable risk give the speedups to be gained."}, {"owner": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "edited": false, "score": 0, "creation_date": 1510167371, "post_id": 47187371, "comment_id": 81324247, "body": "As others commented and voted up the comments, you can get a feeling of how realistic your solution is. If &quot;someone&quot; can access your hardware and setup new software or execute some other stuff and you have no protecting hardware and OS, you will not be able to make your device safe."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1510167675, "post_id": 47187371, "comment_id": 81324432, "body": "Anyway. You can&#39;t remove the use of pointers from C without defeating it&#39;s completeness. And of course you can&#39;t remove it from obj, because it looks like a regular memory access. You can think of some kind of static analysis tool to analyze the compiled program and warning about dangerous constructs. It won&#39;t be easy, though."}, {"owner": {"reputation": 8871, "user_id": 1132871, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/IO6V2.jpg?s=128&g=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/1132871/alex"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1510167800, "post_id": 47187371, "comment_id": 81324531, "body": "@JesperJuhl Without raw pointers it is modern C++"}, {"owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1510167801, "post_id": 47187371, "comment_id": 81324533, "body": "@EugeneSh. and that sounds like the answer I was looking for (honestly). I didn&#39;t know if this was even possible when I wrote the question."}, {"owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1510167905, "post_id": 47187371, "comment_id": 81324594, "body": "If you think static analysis is the only viable method to detecting pointer- and array-based memory accesses, vote up <b>original comment of @EugeneSh.</b>: <code>Anyway. You can&#39;t remove the use of pointers from C without defeating it&#39;s completeness. And of course you can&#39;t remove it from obj, because it looks like a regular memory access. You can think of some kind of static analysis tool to analyze the compiled program and warning about dangerous constructs. It won&#39;t be easy, though.</code>"}, {"owner": {"reputation": 4646, "user_id": 168683, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6c60cfdf4426b0067801bff11e836430?s=128&d=identicon&r=PG&f=1", "display_name": "Fozi", "link": "https://stackoverflow.com/users/168683/fozi"}, "edited": false, "score": 1, "creation_date": 1510168038, "post_id": 47187371, "comment_id": 81324665, "body": "Maybe you should check out Valgrind then. (I&#39;m not using it so I won&#39;t post it as an answer.)"}, {"owner": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "edited": false, "score": 0, "creation_date": 1510168151, "post_id": 47187371, "comment_id": 81324731, "body": "You can also use dynamic testing like valgrind, you can use emulators and simulators with &quot;simulated memory protection&quot; in debug mode. You can run your code on the target with a &quot;check and execute&quot; mechanism, decreasing the speed by 10 or more... maybe some other ideas?"}, {"owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "reply_to_user": {"reputation": 4646, "user_id": 168683, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6c60cfdf4426b0067801bff11e836430?s=128&d=identicon&r=PG&f=1", "display_name": "Fozi", "link": "https://stackoverflow.com/users/168683/fozi"}, "edited": false, "score": 0, "creation_date": 1510168164, "post_id": 47187371, "comment_id": 81324737, "body": "@Fozi thanks! That&#39;ll detect (at least) <code>write off the end of array</code>; I&#39;ll do some more reading."}, {"owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "reply_to_user": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "edited": false, "score": 0, "creation_date": 1510168294, "post_id": 47187371, "comment_id": 81324807, "body": "@Klaus at the level of embedded, even <b>reading</b> a memory-mapped register may have side-effects (like clearing it)."}, {"owner": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "edited": false, "score": 2, "creation_date": 1510168374, "post_id": 47187371, "comment_id": 81324860, "body": "Yes, and for all that situations you can use simulators, emulators, valgrind, software mmu ( check 6 execute ) and so on. So simply do it, if you really want to use C++... valgrind must be used on a different compilation of your code on another, non embedded target.  But it should be possible to find out of bounds problems and also manipulated pointers."}, {"owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "edited": false, "score": 0, "creation_date": 1510168431, "post_id": 47187371, "comment_id": 81324886, "body": "what&#39;s <code>check 6 execute</code>?"}, {"owner": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "edited": false, "score": 0, "creation_date": 1510168656, "post_id": 47187371, "comment_id": 81325035, "body": "a minimal proxy application, which checks each single assembler instruction before &quot;really&quot; execute it. This is sometimes called software mmu. But it is an exotic solution..."}, {"owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "reply_to_user": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "edited": false, "score": 0, "creation_date": 1510168782, "post_id": 47187371, "comment_id": 81325108, "body": "@Klaus and it\u2019d slow things down? I\u2019d rather have something that builds, runs and checks it on the PC and then if passes, builds it for the target architecture."}, {"owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "reply_to_user": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "edited": false, "score": 0, "creation_date": 1510170562, "post_id": 47187371, "comment_id": 81326176, "body": "@Klaus actually the sw mmu sounds interesting; are there any standard ones I can investigate?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1510173861, "post_id": 47187371, "comment_id": 81327946, "body": "If you want memory safety, C and C++ are wrong places to look for it."}, {"owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1510175286, "post_id": 47187371, "comment_id": 81328762, "body": "@n.m. What other languages can run on a micro controller?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1510175631, "post_id": 47187371, "comment_id": 81328916, "body": "The C Standard allows for &quot;fat pointers&quot;, i.e. pointers that also contain provenance information so that runtime checks can ensure they never go out of bounds. I heard someone tried to enable fat pointers in gcc once but there were problems (I guess, probably due to existing code that assumes non-fatness). Also there is AddressSanitizer"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1510181906, "post_id": 47187371, "comment_id": 81331711, "body": "Ada comes to mind."}, {"owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1510181954, "post_id": 47187371, "comment_id": 81331727, "body": "@n.m. Is it binary compatible with C? Does ADA require a runtime?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1510207991, "post_id": 47187371, "comment_id": 81338981, "body": "Never used it really, but it is designed for embedded systems."}], "answers": [{"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 0, "last_activity_date": 1510172554, "creation_date": 1510172554, "answer_id": 47188951, "question_id": 47187371, "link": "https://stackoverflow.com/questions/47187371/gcc-how-to-detect-pointer-based-memory-access/47188951#47188951", "title": "gcc - how to detect pointer-based memory access", "body": "<p>There could be a way of doing what you want - as long as you protect from honest mistakes, not deliberate attempts to break things.</p>\n\n<p>First, you embrace C++ Core Guidelines and use support from the tools: <a href=\"https://github.com/isocpp/CppCoreGuidelines/blob/master/CppCoreGuidelines.md#S-tools\" rel=\"nofollow noreferrer\">https://github.com/isocpp/CppCoreGuidelines/blob/master/CppCoreGuidelines.md#S-tools</a></p>\n\n<p>For your purposes, it will stop your code from using raw pointers and pointer arithmetic in non-library code. Period. Core guidelines do more than that, but this is what is related to your question.</p>\n\n<p>Than, you do a simple grep on the code to make sure it is not using pointers blessed by Guidelines - this would be a case of more or less simple <code>grep</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "edited": false, "score": 0, "creation_date": 1510183214, "post_id": 47189236, "comment_id": 81332172, "body": "What&#39;s <code>IRs</code>?  (more placeholder characters)"}], "tags": [], "owner": {"reputation": 26934, "user_id": 8316315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d833a8a46fea39d7bfca1540ea9c07?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Weimer", "link": "https://stackoverflow.com/users/8316315/florian-weimer"}, "is_accepted": false, "score": 1, "last_activity_date": 1510173574, "creation_date": 1510173574, "answer_id": 47189236, "question_id": 47187371, "link": "https://stackoverflow.com/questions/47187371/gcc-how-to-detect-pointer-based-memory-access/47189236#47189236", "title": "gcc - how to detect pointer-based memory access", "body": "<p>Your best chance is a GCC plugin which looks at the frontend-generated <a href=\"https://gcc.gnu.org/onlinedocs/gccint/GENERIC.html\" rel=\"nofollow noreferrer\">GENERIC</a> or <a href=\"https://gcc.gnu.org/onlinedocs/gccint/GIMPLE.html\" rel=\"nofollow noreferrer\">GIMPLE</a> IRs and implements the policies you want. Depending on the policies and the source code you want to accept, this could be a lot of work and very difficult.</p>\n\n<p>If you want a purely syntax-based or type-based approach (simply rejecting all pointer arithmetic), Clang with its ASTs is easier to work with than GCC.</p>\n"}, {"tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 0, "last_activity_date": 1510175744, "last_edit_date": 1510175744, "creation_date": 1510174066, "answer_id": 47189398, "question_id": 47187371, "link": "https://stackoverflow.com/questions/47187371/gcc-how-to-detect-pointer-based-memory-access/47189398#47189398", "title": "gcc - how to detect pointer-based memory access", "body": "<p>In practice, it is not reasonably possible.</p>\n\n<p>You might consider changing the compilation (e.g. with a GCC plugin, like mentioned in <a href=\"https://stackoverflow.com/a/47189236/841108\">Florian Weimer's answer</a>) to check every access to arrays, but that makes the generated code significantly slower. Your native hardware is slow enough, you don't want to make it even more slow.</p>\n\n<p>And Python is not exactly the right source language. Its dynamic typing would make its quite slow already.</p>\n\n<p>Perhaps you might consider a statically typed language, like Ocaml (combined with a JIT or AOT compilation library like <a href=\"https://gcc.gnu.org/onlinedocs/jit/\" rel=\"nofollow noreferrer\">GCCJIT</a>, etc). The type system (and its inference) increase the safety (and the speed) of the generated code, and with lot of hard work (several years, probably worth a PhD\nsince you'll need do new research) you might improve the type inference to even infer the occurrences where the array index is never out-of-bounds (and an index boundary check is not even needed).</p>\n\n<p>In most case, upgrading the hardware (to a Raspberry Pi style one, with an MMU, and probably the ability to have a real OS with some virtual memory) is probably the most pragmatic approach</p>\n\n<p>PS. Be aware of <a href=\"https://en.wikipedia.org/wiki/Rice&#39;s_theorem\" rel=\"nofollow noreferrer\">Rice's theorem</a>. Most static source analysis cannot work reliably and well (be sound and complete, in technical terms).</p>\n"}], "owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 573, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1510175744, "creation_date": 1510166738, "last_edit_date": 1510167609, "question_id": 47187371, "link": "https://stackoverflow.com/questions/47187371/gcc-how-to-detect-pointer-based-memory-access", "title": "gcc - how to detect pointer-based memory access", "body": "<p>I'm focusing on micropython, specifically the branch <a href=\"https://github.com/micropython/micropython/tree/dynamic-native-modules\" rel=\"nofollow noreferrer\">dynamic-native-modules</a>.</p>\n\n<p>This feature will, in the future, allow you to compile a C/C++ function into a native <code>.obj</code> and package it together with a <code>.py</code> interface for a huge speed boost.</p>\n\n<p>Awesome! But the issue is that if you're using a RTOS, which <a href=\"https://electronics.stackexchange.com/a/16980\">doesn't have virtual memory</a>, then any executing native code can access any part of the  address space including peripherals, the RTOS' state etc.</p>\n\n<p>You don't want the user to be able to do something like this:</p>\n\n<pre><code>void user_func()\n{\n/* point to arbitrary memory, potentially the reset registers, flash erase . . . you get the point */\n  int * a = (int*)0x1234;  \n  *a = 0x10110000; // DESTROY!!!\n}\n</code></pre>\n\n<p>Even the following should be disallowed:</p>\n\n<pre><code>void user_func()\n{\n  int a;\n  (int*)(&amp;a-1000) = 0x10010111;\n}\n</code></pre>\n\n<p><strong>SOLUTIONS?</strong></p>\n\n<ul>\n<li>Create own version of <code>gcc</code> (for each binary format)  </li>\n<li>Decompile <code>.obj</code> files and detect use of pointers (for each binary binary format)</li>\n</ul>\n\n<p><strong>FEEDBACK TO COMMENTS</strong></p>\n\n<p>I get that it may be impossible to stop a <strong>malicious</strong> user but that's not the #1 worry. We want to stop well-meaning but accidental code. If it's not possible to stop every, single case that's <em>ok</em>.</p>\n\n<p>If we can prohibit/detect explicit pointer accesses and simply provide warnings regarding array use, that is still very valuable.</p>\n\n<blockquote>\n  <p><strong>WARNING</strong>: YOU'RE USING AN ARRAY! MAKE SURE YOU DON'T GO OUT-OF-BOUNDS</p>\n</blockquote>\n"}, {"tags": ["c", "algorithm"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1510166769, "post_id": 47187314, "comment_id": 81323875, "body": "You have several loops that are suspicious on account of starting at index 1.  It&#39;s not clear to me yet whether these are wrong, but C arrays are indexed starting at 0."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1510166927, "post_id": 47187314, "comment_id": 81323973, "body": "For the same reason, the implementations of your <code>parent()</code>, <code>left()</code>, and <code>right()</code> functions are suspicious."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1510167006, "post_id": 47187314, "comment_id": 81324020, "body": "The first loop in <code>main</code> is definitely wrong since <code>i</code> reaches <code>N</code>, and is used as in index into <code>adj</code>. <code>adj</code> only has space for indexes <code>0</code> to <code>N-1</code>."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1510167775, "post_id": 47187314, "comment_id": 81324512, "body": "Your somewhat misnamed <code>heapify()</code> function does not serve the purpose to which you are trying to apply it.  At most, it moves the designated element down one level in the heap, but it needs to be prepared to move that element many levels down.  It will not be unusual to move it all the way to the bottom."}, {"owner": {"reputation": 1, "user_id": 8253889, "user_type": "registered", "profile_image": "https://graph.facebook.com/322698034823184/picture?type=large", "display_name": "Akash Bhardwaj", "link": "https://stackoverflow.com/users/8253889/akash-bhardwaj"}, "edited": false, "score": 0, "creation_date": 1510371403, "post_id": 47187314, "comment_id": 81418731, "body": "Made the necessary edits but it still calculates the distance wrong for only the last element to pop from the heap. Any more edit suggestions?"}], "owner": {"reputation": 1, "user_id": 8253889, "user_type": "registered", "profile_image": "https://graph.facebook.com/322698034823184/picture?type=large", "display_name": "Akash Bhardwaj", "link": "https://stackoverflow.com/users/8253889/akash-bhardwaj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 318, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1510166514, "creation_date": 1510166514, "question_id": 47187314, "link": "https://stackoverflow.com/questions/47187314/dijkstras-algorithm-on-a-graph-represented-by-adjacency-list", "title": "Dijkstra&#39;s algorithm on a graph represented by adjacency list", "body": "<p>I was implementing Dijkstra's algorithm on a weighted directed graph given by an adjacency list. While I get the distance being calculated correctly for nearly all vertices the very last vertex of the binary heap is causing some trouble. Another major issue is while I am making a node assign to an array of nodes the assignment isn't being executed, as when I printed the heap node values their distance were always INT_MAX. Please help me out!</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;limits.h&gt;\n\nlong long int m=0;\n\nlong long int parent(long long int i){\n    return i/2;\n} \nlong long int left(long long int i){\n    return (2*i);\n}\nlong long int right(long long int i){\n    return (2*i+1);\n}\n\ntypedef struct edge{\n    long long int src;\n    long long int dest;\n    long long int weight;\n}edge;\n\ntypedef struct vertex{\n    long long int id;\n    long long int d;\n    long long int pos;\n}node;\n\nvoid Decrease(node heap[],long long int i,node curr,node V[]){\n    if(curr.d&gt;heap[i].d) return;\n    heap[i]=curr;\n    while(i&gt;=1 &amp;&amp; heap[parent(i)].d&gt;heap[i].d){\n        V[i].pos=parent(i);\n        V[parent(i)].pos=i;\n        node temp=heap[parent(i)];\n        heap[parent(i)]=heap[i];\n        heap[i]=temp;\n        i=parent(i);\n    }\n}\n\nvoid heapify(node heap[],long long int i){\n    long long int l=left(i);\n    long long int r=right(i);\n    long long int lowest;\n    if(r&lt;=m &amp;&amp; heap[i].d&lt;heap[r].d){\n        lowest=r;\n    }\n    else lowest=i;\n    if(l&lt;=m &amp;&amp; heap[l].d&lt;heap[lowest].d){\n        lowest=l;\n    }\n\n    if(lowest!=i){\n        node temp=heap[lowest];\n        heap[lowest]=heap[i];\n        heap[i]=temp;\n    }\n}\n\nnode Extract(node heap[]){\n     node min=heap[1];\n     heap[1]=heap[m];\n     m=m-1;\n     heapify(heap,1);\n     return min;\n}\n\nvoid Insert(node heap[],node curr,node V[]){\n    m=m+1;  \n    heap[m].d=INT_MAX;\n    Decrease(heap,m,curr,V);\n}\n\nint main() {long long int N,S,D,C1,C2,D1,D2,W1,W2,W3,i,j;\n    scanf(\"%lld %lld %lld %lld %lld %lld %lld %lld %lld \n    %lld\",&amp;N,&amp;S,&amp;D,&amp;C1,&amp;C2,&amp;D1,&amp;D2,&amp;W1,&amp;W2,&amp;W3);\n    edge** adj;\n    adj=(edge**)malloc(sizeof(edge*)*N);\n\n    long long int* deg;\n    deg=(long long int*)malloc(sizeof(long long int)*(N+1));\n    deg[0]=0;\n\n    for(i=1;i&lt;=N;i++){\n        deg[i]=(i*C2+i*i*D2)%(D);\n        adj[i]=(edge*)malloc(sizeof(edge)*(deg[i]+1));\n        for(j=1;j&lt;=deg[i];j++){\n            edge temp;\n            temp.dest=(i*C1+j*D1)%(N);\n            temp.dest=temp.dest+1;\n            temp.weight=(i*W1+j*W2)%(W3);\n            temp.src=i;\n            adj[i][j]=temp;\n        }\n    }\n\n    node* V;\n    V=(node*)malloc(sizeof(node)*(N+1));\n    for(i=0;i&lt;=N;i++){\n        V[i].d=INT_MAX;\n        V[i].id=i;\n    }\n    V[S].d=0;\n\n    node* heap;\n    heap=(node*)malloc(sizeof(node)*(N));\n\n    for(i=1;i&lt;=N;i++){\n        Insert(heap,V[i],V);\n    }\n\n    while(m&gt;-1){\n        node temp=Extract(heap);\n        int i=temp.id;\n        for(j=1;j&lt;=deg[i];j++){\n            edge w=adj[i][j];\n            if(V[w.dest].d&gt;V[i].d+w.weight){\n                V[w.dest].d=V[i].d+w.weight;\n                Decrease(heap,V[w.dest].pos,V[w.dest],V);\n            }\n        }\n        /*for(long long int z=1;z&lt;=m;z++){\n           printf(\"%lld %lld   \",heap[z].id,heap[z].d);\n        }*/\n    }\n    /*for(i=1;i&lt;=N;i++){\n        printf(\"%lld %lld\\n\",V[i].id,V[i].d);\n    }*/\n    return 0;\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["c", "string"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 3, "creation_date": 1510166620, "post_id": 47187310, "comment_id": 81323808, "body": "The literal is allocated in <code>.rodata</code>. Or even not allocated at all as it is a short string and can fit into registers.But your code is invalid, anyway. Since <code>s</code> is not allocated at all."}], "answers": [{"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": true, "score": 3, "last_activity_date": 1510167419, "creation_date": 1510167419, "answer_id": 47187568, "question_id": 47187310, "link": "https://stackoverflow.com/questions/47187310/memory-allocation-of-string-literal-strcpy/47187568#47187568", "title": "memory allocation of string literal strcpy", "body": "<p>The exact location depends on the object file format (<a href=\"https://en.wikipedia.org/wiki/Portable_Executable\" rel=\"nofollow noreferrer\">PE</a> vs. <a href=\"https://en.wikipedia.org/wiki/Executable_and_Linkable_Format\" rel=\"nofollow noreferrer\">ELF</a> vs. <a href=\"https://en.wikipedia.org/wiki/COFF\" rel=\"nofollow noreferrer\">COFF</a>) and any command-line options (some may allow string literals to be stored to a writable memory segment).  ELF will store it in the <code>.rodata</code> segment, which, as the name implies, is read-only.</p>\n\n<p>Multiple instances of the same string literal <em>may</em> map to the same location, but it's not required AFAIK (I'm not aware of any compiler that creates multiple instances of the same literal, but my experience isn't that broad).  </p>\n\n<p>Things that are certain:</p>\n\n<ul>\n<li>Space for string literals is allocated at program startup (usually when the program is loaded into memory) and held until the program terminates;</li>\n<li>Attempting to modify the contents of a string literal invokes <em>undefined behavior</em> - your code <em>may</em> segfault, or it may work as intended, or it may reformat your hard drive, or it may trigger the zombie apocalypse.</li>\n</ul>\n\n<p>Note that your code has a bug - you never assign a meaningful address to <code>s</code>, so the <code>strcpy</code> is essentially trying to write the string <code>\"here\"</code> to a random location, which again is undefined behavior.  You may have intended to write</p>\n\n<pre><code>s = \"here\";\n</code></pre>\n\n<p>which sets <code>s</code> to point to the literal.  If not, then <code>s</code> will either have to be an array large enough to hold the string:</p>\n\n<pre><code>char s[sizeof \"here\"]; // sizeof evaluated at compile time\n</code></pre>\n\n<p>or you'll have to allocate that space dynamically:</p>\n\n<pre><code>char *s = malloc( strlen( \"here\" ) + 1 );\nif ( s )\n  strcpy( s, \"here\" );\n</code></pre>\n"}], "owner": {"reputation": 241, "user_id": 5731628, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VjD-gt13QCQ/AAAAAAAAAAI/AAAAAAAAAHs/fb3YMM5Ta_c/photo.jpg?sz=128", "display_name": "c_mnon", "link": "https://stackoverflow.com/users/5731628/c-mnon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 231, "favorite_count": 1, "accepted_answer_id": 47187568, "answer_count": 1, "score": 1, "last_activity_date": 1510168406, "creation_date": 1510166510, "last_edit_date": 1510168406, "question_id": 47187310, "link": "https://stackoverflow.com/questions/47187310/memory-allocation-of-string-literal-strcpy", "title": "memory allocation of string literal strcpy", "body": "<pre><code>int main()\n {\n  char *s;\n  strcpy(s,\"here\");\n  return 0;\n  }\n</code></pre>\n\n<p>In the code above I guess the memory for the string literal is assigned in a global space.Which section does it actually go to and when ? Does the compiler go through and assign it in the program space ?? Also if i initalise another string with same string literal i.e ( <code>char *k = \"here\";</code> ) will it be pointing to the same memory location.\nI am trying to think since I cannot free this location, do I run into any trouble if I have lot of string initialisations in my code. I guess the only thing I should be worried about is the compiler output being too big, since there is no run time memory allocation in this case?</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 91305, "user_id": 19410, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/175f1d55c73ce5cb1d071dc4d0f1a333?s=128&d=identicon&r=PG", "display_name": "Alex Reynolds", "link": "https://stackoverflow.com/users/19410/alex-reynolds"}, "edited": false, "score": 0, "creation_date": 1510166636, "post_id": 47187253, "comment_id": 81323816, "body": "If you first sort your array, you could do two things: 1) read the last element of the array to get the maximum value; and, 2) read through the elements of the array in order, and test if the value of the current element is equal to the previously seen element \u2014 if so, replace with maximum value + 1, + 2, and so on, as you walk through the array, which are guaranteed to not already be in the array."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1510166793, "post_id": 47187253, "comment_id": 81323887, "body": "Could you upgrade your code fragment to a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>?"}, {"owner": {"reputation": 319, "user_id": 8764412, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/40269045bb263d31ef71df3051c326b0?s=128&d=identicon&r=PG&f=1", "display_name": "Arduino", "link": "https://stackoverflow.com/users/8764412/arduino"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1510221923, "post_id": 47187253, "comment_id": 81346413, "body": "Just updated it @Yunnosch, thanks"}], "owner": {"reputation": 319, "user_id": 8764412, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/40269045bb263d31ef71df3051c326b0?s=128&d=identicon&r=PG&f=1", "display_name": "Arduino", "link": "https://stackoverflow.com/users/8764412/arduino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1510221909, "creation_date": 1510166318, "last_edit_date": 1510221909, "question_id": 47187253, "link": "https://stackoverflow.com/questions/47187253/replacing-repeated-values-in-an-array-in-c", "title": "Replacing repeated values in an array in C", "body": "<p>I'm coding a function in C to check if an array has any duplicate value, and if so replace it by any of the non-present ones. The array consists of numbers shuffled from 1 to Nmax:</p>\n\n<pre><code>unsigned char * NotRepeated (unsigned char *arr){\n\n    unsigned char i, j, count, k, notrepeated[Nmax];\n\n        k = 0;  \n        for (i = 0; i &lt; Nmax ; i++){ \n            count = 0;\n            for (j = 0; j &lt; Nmax; j++){ \n                if (arr[j] != i + 1){\n                    count++;\n                }\n                if (count == Nmax){\n                    notrepeated[k] = i + 1;\n                    k++;\n                }       \n            }                       \n        }   \n        k = 0;\n        for (i = 0; i &lt; Nmax - 1; i++){ \n            for (j = i + 1; j &lt; Nmax; j++){\n\n                if (arr[i] == arr[j]){\n                    arr[j] = notrepeated[k];\n                    k++;\n                }\n            }   \n        }   \nreturn arr\n}\n</code></pre>\n\n<p>If I print the array <code>notrepeated[k]</code> I get almost all the array filled when the original array <code>arr[j]</code> seldomly has more than 2 repeated figures. </p>\n\n<p>What am I doing wrong?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["java", "c", "arrays", "equality"], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 7025074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d8b9b34a1ac8b2a7ee90e89f2acb95b?s=128&d=identicon&r=PG&f=1", "display_name": "vasimmahmood", "link": "https://stackoverflow.com/users/7025074/vasimmahmood"}, "edited": false, "score": 0, "creation_date": 1510226688, "post_id": 47187106, "comment_id": 81349556, "body": "Ahhh.  I see.  I just have never seen a conditional check outside of the usual &#39;if statements / switch case / ternary operator.  Thank you."}, {"owner": {"reputation": 5199, "user_id": 6525140, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13e3dd379a546135c1fa2691178312b7?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Hoff", "link": "https://stackoverflow.com/users/6525140/michael-hoff"}, "edited": false, "score": 0, "creation_date": 1510227048, "post_id": 47187106, "comment_id": 81349758, "body": "Well, to be precise <code>!=</code> is no conditional check, but a boolean expression. You can use the resulting value to change the control flow based on this condition, but you can also use its raw value as a number."}], "tags": [], "owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "is_accepted": false, "score": 2, "last_activity_date": 1510165730, "creation_date": 1510165730, "answer_id": 47187106, "question_id": 47187077, "link": "https://stackoverflow.com/questions/47187077/converting-c-statement-in-to-java-array-0/47187106#47187106", "title": "Converting C statement in to Java (Array[][] != 0)", "body": "<p><code>grid[i][SIZE - 1 - i] != 0</code> is a boolean expression which (by the C standard) is evaluated to <code>1</code> if the expression is <code>true</code>, <code>0</code> otherwise.</p>\n\n<p>The same thing can be written as following:</p>\n\n<pre><code>for (unsigned int i = 0; i &lt; SIZE; i++)\n{\n    if ( grid[i][SIZE - 1 - i] != 0)\n    {\n        count[2 * SIZE + 1] += 1;\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "is_accepted": false, "score": 0, "last_activity_date": 1510165831, "creation_date": 1510165831, "answer_id": 47187136, "question_id": 47187077, "link": "https://stackoverflow.com/questions/47187077/converting-c-statement-in-to-java-array-0/47187136#47187136", "title": "Converting C statement in to Java (Array[][] != 0)", "body": "<p>Booleans can be implicitly converted to integers. </p>\n\n<p>It is equivalent to </p>\n\n<pre><code> (grid[i][SIZE - 1 - i] != 0) ? 1 : 0\n</code></pre>\n\n<p>that is, add 1 if the condition is true and zero otherwise. </p>\n"}, {"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1510166261, "post_id": 47187138, "comment_id": 81323588, "body": "On a modern CPU, this version probably is <i>not</i> faster than a version that uses a ternary expression to unconditionally add either 0 or 1 on every iteration.  In fact, it stands a good chance of being slower, especially if the elements of <code>grid</code> do not adhere to a regular pattern.  <code>javac</code> and <code>JIT</code> optimizations notwithstanding, CPUs tend to do better when they don&#39;t have to deal with branch mispredictions, and not branching in the first place is a great way to achieve that.  But of course, performance is hard to predict, and should be tested where it matters."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1510166440, "post_id": 47187138, "comment_id": 81323697, "body": "yeah, branch prediction is to be taken into account, and every optimization needs benching on a big scale to check if it&#39;s not counter productive."}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": false, "score": 1, "last_activity_date": 1510166618, "last_edit_date": 1510166618, "creation_date": 1510165838, "answer_id": 47187138, "question_id": 47187077, "link": "https://stackoverflow.com/questions/47187077/converting-c-statement-in-to-java-array-0/47187138#47187138", "title": "Converting C statement in to Java (Array[][] != 0)", "body": "<p>Unlike in C/C++, in Java, the result of this test is a boolean not an integer (0/1), and you cannot add a boolean so it counts for 0 for <code>false</code> or 1 for <code>true</code>.</p>\n\n<p>I suggest a simple test which avoids to add 0 to <code>count</code> uselessly. So probably faster (well, constant branching could make it slower, has to be benched) &amp; less cryptic (that's a fact), and valid in C, C++ or Java:</p>\n\n<pre><code>if (grid[i][SIZE - 1 - i] != 0)\n{\n    count[2 * SIZE + 1]++;\n}\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 7025074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d8b9b34a1ac8b2a7ee90e89f2acb95b?s=128&d=identicon&r=PG&f=1", "display_name": "vasimmahmood", "link": "https://stackoverflow.com/users/7025074/vasimmahmood"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1510166618, "creation_date": 1510165630, "last_edit_date": 1510165723, "question_id": 47187077, "link": "https://stackoverflow.com/questions/47187077/converting-c-statement-in-to-java-array-0", "title": "Converting C statement in to Java (Array[][] != 0)", "body": "<p>I'm changing some C code into Java, but I have come across a statement syntax that I have not seen before and I don't know what it means.</p>\n\n<pre><code>for (unsigned int i = 0; i &lt; SIZE; i++)\n{\n    count[2 * SIZE + 1] += grid[i][SIZE - 1 - i] != 0;\n}\n</code></pre>\n\n<p>When adding elements of two arrays, I've never seen '!= 0' come after it.  Do you know what this statement is doing?  I can't find any reference to this online.\nAny help is appreciated.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 2, "creation_date": 1510164793, "post_id": 47186771, "comment_id": 81322719, "body": "So do some basic debugging: what&#39;s the return value of scanf(), and what&#39;s the value of length? Also, two obvious bugs: &#39;if (length &gt; 0 || length &lt;= 100)&#39; is always true. You probably mean &amp;&amp;. Also, you&#39;re printing the address of area (&amp;area), when you really want its value. Drop the &amp;."}, {"owner": {"reputation": 1, "user_id": 8908741, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9a90d847b0644a21e6734b5ee5c9dbb?s=128&d=identicon&r=PG&f=1", "display_name": "HewadL", "link": "https://stackoverflow.com/users/8908741/hewadl"}, "reply_to_user": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1510165033, "post_id": 47186771, "comment_id": 81322893, "body": "Sorry, I got that part right after I posted but it still outputs as 0.0000, from what i&#39;ve looked up online, its usually a type specifier error, but I dont see what mine is doing it?"}], "answers": [{"tags": [], "owner": {"reputation": 748, "user_id": 7801892, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9f87eb8937bf17dd8dee0658a4695d2?s=128&d=identicon&r=PG&f=1", "display_name": "Phil Kiener", "link": "https://stackoverflow.com/users/7801892/phil-kiener"}, "is_accepted": false, "score": 1, "last_activity_date": 1510165159, "creation_date": 1510165159, "answer_id": 47186959, "question_id": 47186771, "link": "https://stackoverflow.com/questions/47186771/c-program-to-find-area-of-an-octagon/47186959#47186959", "title": "C Program to find area of an octagon?", "body": "<p>You're always getting an output of <code>0.000000</code> because your <code>scanf()</code> call is wrong; to read a double, you need to use <code>%lf</code> instead of just <code>%f</code> (see <a href=\"https://stackoverflow.com/questions/210590/why-does-scanf-need-lf-for-doubles-when-printf-is-okay-with-just-f%20this%20question\">this question</a> for more on that).</p>\n\n<p>Also, in <code>printf()</code>, you want to print the value of the area, not its address (which is retrieved by prefixing a variable with <code>&amp;</code>) - just use </p>\n\n<pre><code>printf(\"Area of the octagon is: %f\", area);\n</code></pre>\n\n<p>Also, regarding error catching, you have <code>(length &gt; 0 || length &lt;= 100)</code> as predicate. This will allow any value which is not negative, since <code>||</code> needs only one side to evaluate to true. You want to use</p>\n\n<pre><code>(length &gt; 0 &amp;&amp; length &lt;= 100)\n</code></pre>\n\n<p>to make sure the length is <em>both</em> larger than 0 and smaller than 100.</p>\n"}], "owner": {"reputation": 1, "user_id": 8908741, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9a90d847b0644a21e6734b5ee5c9dbb?s=128&d=identicon&r=PG&f=1", "display_name": "HewadL", "link": "https://stackoverflow.com/users/8908741/hewadl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1510166331, "creation_date": 1510164551, "last_edit_date": 1510166331, "question_id": 47186771, "link": "https://stackoverflow.com/questions/47186771/c-program-to-find-area-of-an-octagon", "title": "C Program to find area of an octagon?", "body": "<p>I need to find the area of the octagon using the current functions I have and with the same parameters, every time I input something it just outputs as \"0.000000,\" how do I fix this? It is also not error checking properly.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n\nint die(const char * msg);\ndouble areaFromSide(double length);\n\n\n\nint main()\n{\n    double length = 0;\n\n    printf(\"Enter length of one side of the octagon: \");\n    scanf(\"%f\", &amp;length);\n\n    if (length &gt; 0 &amp;&amp; length &lt;= 100)\n    {\n        double area = areaFromSide(length);\n        printf(\"Area of the octagon is: %f\\n\", area);\n    }\n    else\n    {\n        die(\"Input Failure!\");\n    }\n\n    return 0;\n}\n\n\ndouble areaFromSide(double length)\n{\n    double area = 0;\n\n    area = 2 * (1 + (sqrt(2)))*pow(length, 2);\n\n    return area;\n}\n\nint die(const char * msg)\n{\n    printf(\"Fatal error: %s\\n\", msg);\n    exit(EXIT_FAILURE);\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1510164086, "post_id": 47186606, "comment_id": 81322304, "body": "String literals are read only, search that in SO and/or google."}], "answers": [{"tags": [], "owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "is_accepted": true, "score": 0, "last_activity_date": 1510165183, "last_edit_date": 1510165183, "creation_date": 1510164983, "answer_id": 47186896, "question_id": 47186606, "link": "https://stackoverflow.com/questions/47186606/change-function-so-it-replace-space-in-a-string-with-a-middle-case/47186896#47186896", "title": "change function so it replace space in a string with a middle case &quot;-&quot;", "body": "<p>That's because string literals are defined as <code>const char *</code>, which means you are not allowed to modify it's content. I believe you got some compilation error like <em>\"cannot convert <code>const char *</code> to <code>char *</code>\"</em>. In such cases it is better not try to fool the compiler by casting to <code>(char *)</code> because it will lead to undefined behavior.</p>\n\n<p>Once you defined your string as <code>char str[]=\"this is a test\";</code>, you actually created an array of <code>char</code>s and initialized it to contain the letters of <em>\"this is a test\"</em> accordingly (with <code>\\0</code> at the end).</p>\n\n<p>The type of the pointer to any element in this array is <code>char *</code> so the compilation passed successfully. </p>\n"}], "owner": {"reputation": 3, "user_id": 8908652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ebea3ff597c4c73b003dcdbf3323ade?s=128&d=identicon&r=PG&f=1", "display_name": "CLearner", "link": "https://stackoverflow.com/users/8908652/clearner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 47186896, "answer_count": 1, "score": 0, "last_activity_date": 1510165183, "creation_date": 1510163982, "last_edit_date": 1510164039, "question_id": 47186606, "link": "https://stackoverflow.com/questions/47186606/change-function-so-it-replace-space-in-a-string-with-a-middle-case", "title": "change function so it replace space in a string with a middle case &quot;-&quot;", "body": "<p>i was given this program instead of printing \"-\" at places with space,to change the function so it replaces permnantly the space with \"-\":</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nvoid sp_to_dash(const char *s);\nint main(){\nsp_to_dash(\"this is a test\");//using the function\nreturn 0;\n}//end of main\nvoid sp_to_dash(const char *str){//start of the function\nwhile(*str){//start of while\n\n      if(*str==' ')printf(\"%c\",'-');\n      else printf(\"%c\",*str);\n      str++;\n    }//end of while\n}//end of function\n</code></pre>\n\n<p>and i actually did change it and it worked but in a smiliar way:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n  void sp_to_dash(char *s);\n  int main() {\n      char str[] = \"this is a test\";\n      sp_to_dash(str);\n      printf(\"%s\", str);\n      getchar();\n  return 0;\n}//end of main\nvoid sp_to_dash(char *str){\nwhile (*str) {\n    if (*str == ' ') *str= '-';\n    str++;\n    }//enf of while\n}//end of sp_to_dash\n</code></pre>\n\n<p>now i dont understand something,in the original code (unchanged one) i sent to the function an immediate string and it accepted it however in the second code(changed one)\ni had to create a new string for it to accept:</p>\n\n<pre><code>char str[]=\"this is a test\";\n</code></pre>\n\n<p>why i could not do something similar to this:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n void sp_to_dash(char *s);\n  int main() {\n    sp_to_dash(\"this is a string\");\n  return 0;\n }//end of main\n void sp_to_dash(char *str){\n while (*str) {\n     if (*str == ' ') *str= '-';\n    str++;\n  }//enf of while\n}//end of sp_to_dash\n</code></pre>\n"}, {"tags": ["c", "c99", "brute-force"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1510163353, "post_id": 47186359, "comment_id": 81321856, "body": "Since such &quot;parallelization&quot; is very platform-dependent and relatively new (compared to the age of C), C doesn&#39;t have any standard constructs or functionality to handle it. So if you only want to use standard C you simply can not do it. Either use a third-party library, or use compiler extensions such as <a href=\"https://en.wikipedia.org/wiki/Intrinsic_function\" rel=\"nofollow noreferrer\"><i>intrinsic functions</i></a> or <i>inline assembly</i>."}, {"owner": {"reputation": 57, "user_id": 1861612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fed4bad3626b748d260c0c5e5aa496d?s=128&d=identicon&r=PG", "display_name": "chenino", "link": "https://stackoverflow.com/users/1861612/chenino"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1510163480, "post_id": 47186359, "comment_id": 81321936, "body": "Well, my main problem is how do i efficiently design those loops to give me 4 inputs at once. This should be do-able without inline assembly, or am i wrong?"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1510222326, "post_id": 47186359, "comment_id": 81346692, "body": "This is a bit broad for SO; you want to read up on <code>#pragma omp simd</code> and the like.  Or just tell your compiler to target the SSE2 device, and ask it to optimize - that might be enough for your needs."}, {"owner": {"reputation": 57, "user_id": 1861612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fed4bad3626b748d260c0c5e5aa496d?s=128&d=identicon&r=PG", "display_name": "chenino", "link": "https://stackoverflow.com/users/1861612/chenino"}, "edited": false, "score": 0, "creation_date": 1511282758, "post_id": 47186359, "comment_id": 81790603, "body": "Unfortunately, that is not enough for my needs, as this is a optimization task. I decided now to precompute all inputs in two pairs and iterate through this, as 676 is dividable by 4"}], "owner": {"reputation": 57, "user_id": 1861612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fed4bad3626b748d260c0c5e5aa496d?s=128&d=identicon&r=PG", "display_name": "chenino", "link": "https://stackoverflow.com/users/1861612/chenino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1510163149, "creation_date": 1510163149, "question_id": 47186359, "link": "https://stackoverflow.com/questions/47186359/parallelize-iteration-through-alphabet", "title": "Parallelize iteration through alphabet", "body": "<p>I have to write a small code wich iterates from aaaa to zzzz.\nBy now i use 32 Bit integers and the naive approach with </p>\n\n<pre><code>static const char ASCII_A = 'a';\nstatic const char ASCII_Z = 'z';\nchar C0, C1, C2, C3;\n\nfor (C3 = ASCII_A; C3 &lt;= ASCII_Z; C3++) {\n    for (C2 = ASCII_A; C2 &lt;= ASCII_Z; C2++) {\n        for (C1 = ASCII_A; C1 &lt;= ASCII_Z; C1++) {\n            for (C0 = ASCII_A; C0 &lt;= ASCII_Z; C0++) {\n                // set in values\n                uint32_t w = (C0 &lt;&lt; 24) | (C1 &lt;&lt; 16) | (C2 &lt;&lt; 8) | C3;\n</code></pre>\n\n<p>I now want to step up and use 128 Bit Vectors and SSE2 to parallize 4 of those operations at once, so w0 carries aaaa, w1 carries aaab etc for one loop run.\nJust using steps by 4 would not work out efficiently, as 26/4 is not a whole number and so the vectors would not be filled at every time.\nI can not use any libraries for this and code has to be compiled in C99</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 2, "creation_date": 1510162992, "post_id": 47186290, "comment_id": 81321618, "body": "Just because code <i>can</i> crash doesn&#39;t mean it <i>will</i>."}, {"owner": {"reputation": 1, "user_id": 8908608, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acad6669478b9b1a964dc35c85b18f1e?s=128&d=identicon&r=PG&f=1", "display_name": "kantus jee", "link": "https://stackoverflow.com/users/8908608/kantus-jee"}, "reply_to_user": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1510163146, "post_id": 47186290, "comment_id": 81321726, "body": "sry i missed out putting &amp;in scanf"}, {"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 0, "creation_date": 1510163338, "post_id": 47186290, "comment_id": 81321848, "body": "<code>scanf(&quot;%d&quot;,&amp;size);</code> and <code>printf(&quot;%s\\n&quot;,&amp;name[i]);</code> both invoke ub, not necessarily cause a crash."}, {"owner": {"reputation": 1, "user_id": 8908608, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acad6669478b9b1a964dc35c85b18f1e?s=128&d=identicon&r=PG&f=1", "display_name": "kantus jee", "link": "https://stackoverflow.com/users/8908608/kantus-jee"}, "edited": false, "score": 0, "creation_date": 1510163490, "post_id": 47186290, "comment_id": 81321945, "body": "scanf(&quot;%s&quot;,&amp;name[i]);"}, {"owner": {"reputation": 1, "user_id": 8908608, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acad6669478b9b1a964dc35c85b18f1e?s=128&d=identicon&r=PG&f=1", "display_name": "kantus jee", "link": "https://stackoverflow.com/users/8908608/kantus-jee"}, "edited": false, "score": 0, "creation_date": 1510163600, "post_id": 47186290, "comment_id": 81322007, "body": "please elaborate"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 2, "creation_date": 1510175428, "post_id": 47186290, "comment_id": 81328828, "body": "There&#39;s no such thing as &quot;should give segmentation error&quot; in C."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1510178459, "post_id": 47186290, "comment_id": 81330250, "body": "What makes you think it should give a segmentation error?"}], "answers": [{"tags": [], "owner": {"reputation": 46, "user_id": 6129295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49397ef7c2f17f240bdbfecb0a8e3dd2?s=128&d=identicon&r=PG&f=1", "display_name": "yenWu", "link": "https://stackoverflow.com/users/6129295/yenwu"}, "is_accepted": false, "score": 0, "last_activity_date": 1510171992, "creation_date": 1510171992, "answer_id": 47188813, "question_id": 47186290, "link": "https://stackoverflow.com/questions/47186290/array-of-pointers-in-c-the-code-should-not-run/47188813#47188813", "title": "array of pointers in c the code should not run", "body": "<p>I'm not sure what's your test case (No enough reputation to post a comment). I just try to input it with <code>0</code> and <code>1\\n1\\n2\\n</code>.</p>\n\n<p>It's a little complex to explain the detail. However, Let's start it :-). There are two things you should know. First, <code>main()</code> is a function. Second, you use a C99 feature, variable-length array or gnu extension, zero-length array (supported by gcc), on <code>char *name[size];</code>.</p>\n\n<p><code>main()</code> is a function, so all the variable declared in this function is local variables. Local variables locate at stack section. You must know about it first.</p>\n\n<p>If you input <code>1\\n1\\n2\\n</code>, the variable-length array is used. The implementation of it is also to allocate it on stack. Notice that value of each element in array is not initialized as 0. That is the possible answer for you to execute without segmentation fault. You cannot make sure that it'll point to the address which isn't writable (At least failed on me).</p>\n\n<p>If the input is <code>0\\n</code>, you will use extension feature, zero-length array, supported by GNU. As you saw, it means no element in array. The value of <code>name</code> is equal to <code>&amp;size</code>, because <code>size</code> is the last local variable you declared before you declared <code>name[0]</code> (Consider stack pointer). The value of <code>name[0]</code> is equal to dereference to <code>&amp;size</code>, that's zero (='\\0') , so it will work fine.</p>\n"}, {"tags": [], "owner": {"reputation": 1118, "user_id": 5048973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53a77c528e39678f92d634a70a12193e?s=128&d=identicon&r=PG&f=1", "display_name": "P Burke", "link": "https://stackoverflow.com/users/5048973/p-burke"}, "is_accepted": false, "score": 0, "last_activity_date": 1510175787, "last_edit_date": 1510175787, "creation_date": 1510175294, "answer_id": 47189724, "question_id": 47186290, "link": "https://stackoverflow.com/questions/47186290/array-of-pointers-in-c-the-code-should-not-run/47189724#47189724", "title": "array of pointers in c the code should not run", "body": "<p>The simple answer to your question is that a segmentation fault is: </p>\n\n<blockquote>\n  <p>A segmentation fault (aka segfault) are caused by a program trying to read or write an illegal memory location. </p>\n</blockquote>\n\n<p>So it all depends upon what is classed as illegal. If the memory in question is a part of the valid address space, e.g. the stack, for the process the program is running, it may not cause a segfault.</p>\n\n<p>When I run this code in a debugger the line: </p>\n\n<pre><code>scanf(\"%s, name[i]); \n</code></pre>\n\n<p>over writes the content of the size variable, clearly not the intended behaviour, and the code essentially goes into an infinite loop. </p>\n\n<p>But that is just what happens on my 64 bit Intel linux machine using gcc 5.4. Another environment will probably do something different. </p>\n\n<p>If I put the missing &amp; in front of name[i] it works OK. Whether that is luck, or expertly exploiting the intended behaviour of C99 variable length arrays, as suggested. I'm afraid I don't know.</p>\n\n<p>So welcome to the world of subtle memory overwriting bugs.</p>\n"}, {"tags": [], "owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "is_accepted": false, "score": 2, "last_activity_date": 1510179018, "creation_date": 1510179018, "answer_id": 47190565, "question_id": 47186290, "link": "https://stackoverflow.com/questions/47186290/array-of-pointers-in-c-the-code-should-not-run/47190565#47190565", "title": "array of pointers in c the code should not run", "body": "<p>The problem in your code (which is incomplete, BTW; you need <code>#include &lt;stdio.h&gt;</code> at the top and a closing <code>}</code> at the bottom) can be illustrated in a much shorter chunk of code:</p>\n\n<pre><code>char *name[10];       // make the size an arbitrary constant\nscanf(\"%s\", name[0]); // Read into memory pointed to by an uninitialized pointer\n</code></pre>\n\n<p>(<code>name</code> could be a single pointer rather than an array, but I wanted to preserve your program's structure for clarity.)</p>\n\n<p>The pointer <code>name[0]</code> has not been initialized, so its value is garbage. You pass that garbage pointer value to <code>scanf</code>, which reads characters from <code>stdin</code> and stores them in whatever memory location that garbage pointer happens to point to.</p>\n\n<p>The behavior is undefined.</p>\n\n<p>That doesn't mean that the program <em>will</em> die with a segmentation fault. C does not require checking for invalid pointers (nor does it forbid it, but most implementations don't do that kind of checking). So the most likely behavior is that your program will take whatever input you provide and <em>attempt</em> to store it in some arbitrary memory location.</p>\n\n<p>If the garbage value of <code>name[0]</code> happens to point to a detectably invalid memory location, your program might die with a segmentation fault. That's if you're luck. If you're not, it might happen to point to some writable memory location that your program is able to modify. Storing data in that location might be harmless, or it might clobber some critical internal data structure that your program depends on.</p>\n\n<p>Again, your program's behavior is undefined. That means the C standard imposes no requirements on its behavior. It might appear to \"work\", it might blow up in your face, or it might do anything that it's physically possible for a program to do. Apparently to behave correctly is probably the worst consequence of undefined behavior, since it makes it difficult to diagnose the problem (which will probably appear during a critical demo).</p>\n\n<p>Incidentally, using <code>scanf</code> with a <code>%s</code> format specifier is inherently unsafe, since there's no way to limit the amount of data it will attempt to read. Even with a properly initialized pointer, there's no way to guarantee that it points to enough memory to hold whatever input it receives.</p>\n\n<p>You may be accustomed to languages that do run-time checking and can reliably detect (most) problems like this. C is not such a language.</p>\n"}], "owner": {"reputation": 1, "user_id": 8908608, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acad6669478b9b1a964dc35c85b18f1e?s=128&d=identicon&r=PG&f=1", "display_name": "kantus jee", "link": "https://stackoverflow.com/users/8908608/kantus-jee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1510179018, "creation_date": 1510162887, "last_edit_date": 1510163026, "question_id": 47186290, "link": "https://stackoverflow.com/questions/47186290/array-of-pointers-in-c-the-code-should-not-run", "title": "array of pointers in c the code should not run", "body": "<p>//this code should give segmentation error....but it works fine ....how is it possible.....i just got this code by hit and trail whle i was trying out some  code of topic ARRAY OF POINTERS....PLZ can anyone explain </p>\n\n<pre><code>int main()\n{\n\n    int i,size;\n    printf(\"enter the no of names to be entered\\n\");\n    scanf(\"%d\",&amp;size);\n\n    char *name[size];\n\n    for(i=0;i&lt;size;i++)\n    {\n        scanf(\"%s\",name[i]);\n            }\n    printf(\"the names in your array are\\n\");\n\n\n    for(i=0;i&lt;size;i++)\n    {\n        printf(\"%s\\n\",&amp;name[i]);\n\n\n    }\n\n    return 0\n</code></pre>\n"}, {"tags": ["c", "elf", "objdump"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1510162790, "post_id": 47186199, "comment_id": 81321513, "body": "Probably alignment. But why do you ask? Curiosity? Or is there another problem that lead to this question?"}, {"owner": {"reputation": 5896, "user_id": 5080995, "user_type": "registered", "accept_rate": 91, "profile_image": "https://graph.facebook.com/10153059476487462/picture?type=large", "display_name": "martianwars", "link": "https://stackoverflow.com/users/5080995/martianwars"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1510163298, "post_id": 47186199, "comment_id": 81321818, "body": "Trying to find out ways to identify the range of the <code>.text</code> segment in the virtual address space"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1510163671, "post_id": 47186199, "comment_id": 81322053, "body": "probably you will find in your linker script something like this: <code>. = ALIGN(4);</code>"}], "answers": [{"tags": [], "owner": {"reputation": 3984, "user_id": 164344, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c978ca7e1c3da231710b8c114009faa5?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/164344/tim"}, "is_accepted": true, "score": 2, "last_activity_date": 1510182001, "last_edit_date": 1510182001, "creation_date": 1510177375, "answer_id": 47190190, "question_id": 47186199, "link": "https://stackoverflow.com/questions/47186199/empty-space-between-text-and-fini-data-segments/47190190#47190190", "title": "Empty space between .text and .fini data segments?", "body": "<p>The last column of the output from <code>objdump -h file</code> is the alignment of the section. The alignment of <code>.fini</code> is <code>4</code> (<code>2**2</code> is 2 to the power of 2), which is why it starts at <code>0x400574</code> instead of <code>0x400572</code>.</p>\n\n<p>When linking against glibc for x86-64, the alignment of <code>4</code> for the <code>.fini</code> section is specified in <a href=\"https://sourceware.org/git/?p=glibc.git;a=blob_plain;f=sysdeps/x86_64/crti.S;hb=HEAD\" rel=\"nofollow noreferrer\"><code>crti.o</code></a>:</p>\n\n<pre><code>    .section .fini,\"ax\",@progbits\n    .p2align 2\n    .globl _fini\n    .type _fini, @function\n_fini:\n</code></pre>\n"}], "owner": {"reputation": 5896, "user_id": 5080995, "user_type": "registered", "accept_rate": 91, "profile_image": "https://graph.facebook.com/10153059476487462/picture?type=large", "display_name": "martianwars", "link": "https://stackoverflow.com/users/5080995/martianwars"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 206, "favorite_count": 0, "accepted_answer_id": 47190190, "answer_count": 1, "score": 1, "last_activity_date": 1510182001, "creation_date": 1510162664, "last_edit_date": 1510162880, "question_id": 47186199, "link": "https://stackoverflow.com/questions/47186199/empty-space-between-text-and-fini-data-segments", "title": "Empty space between .text and .fini data segments?", "body": "<p>I compiled a simple C program (<code>gcc -o file file.cpp</code>) and obtained the following output on running <code>objdump -h file</code>,</p>\n\n<pre><code> 12 .text         00000172  0000000000400400  0000000000400400  00000400  2**4\n                  CONTENTS, ALLOC, LOAD, READONLY, CODE\n 13 .fini         00000009  0000000000400574  0000000000400574  00000574  2**2\n                  CONTENTS, ALLOC, LOAD, READONLY, CODE\n</code></pre>\n\n<p>I have a quick question here.</p>\n\n<p>Why is there a gap of 2 bytes after the <code>.text</code> section? <code>0x400400 + 0x172 = 0x400572</code>, but the <code>.fini</code> section starts from <code>0x400574</code>? Has this got something to do with alignment?  I noticed similar gaps between some other sections as well.</p>\n"}, {"tags": ["c", "arrays", "pointers", "structure"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1510162599, "post_id": 47186155, "comment_id": 81321394, "body": "Can you show us <code>function1</code> etc.? Or at least their prototypes (declarations)? Though we would prefer a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, <b>Complete</b>, and Verifiable Example</a>."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 1, "creation_date": 1510162614, "post_id": 47186155, "comment_id": 81321407, "body": "What are the definitions of <code>function1</code>, <code>function2</code>, and <code>function3</code>?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1510162701, "post_id": 47186155, "comment_id": 81321456, "body": "Also, those errors looks like they come from GCC, which is usually very good with informational notes like what was expected and what was given. Did you copy-paste the <i>full</i> output, including such informational notes?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1510163077, "post_id": 47186155, "comment_id": 81321672, "body": "In the structure, the argument to <code>command</code> is a <code>my_type</code> <i>object</i>, but the declaration you show for <code>function1</code> shows the argument being a <i>pointer</i> to <code>my_type</code>. Different, and incompatible, types."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1510163890, "post_id": 47186155, "comment_id": 81322187, "body": "@Roulians do you read the code you paste? stars matter."}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 2, "last_activity_date": 1510164043, "creation_date": 1510164043, "answer_id": 47186633, "question_id": 47186155, "link": "https://stackoverflow.com/questions/47186155/array-of-structures-of-function-pointers-c/47186633#47186633", "title": "Array of structures of function pointers C", "body": "<p>In your struct, the <code>command</code> member:</p>\n\n<pre><code>void (*command)(my_type);\n</code></pre>\n\n<p>Has type \"pointer to function which take a parameter of type <code>my_type</code> and returns <code>void</code>.</p>\n\n<p>Your function:</p>\n\n<pre><code>void function1(my_type *var1);\n</code></pre>\n\n<p>Has type \"function which takes a parameter of  type <code>my_type *</code> and returns <code>void</code>.</p>\n\n<p>The parameters of the function pointer don't match the parameters of the functions you assign to them.  That makes the pointers incompatible.</p>\n\n<p>To fix this, change the type of the function pointer to match the functions that are assigned to it:</p>\n\n<pre><code>void (*command)(my_type *);\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 8908369, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e5283cd970c8a5c80d50de54e31f7f6?s=128&d=identicon&r=PG&f=1", "display_name": "Roulians", "link": "https://stackoverflow.com/users/8908369/roulians"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 47186633, "answer_count": 1, "score": 2, "last_activity_date": 1510164043, "creation_date": 1510162503, "last_edit_date": 1510163604, "question_id": 47186155, "link": "https://stackoverflow.com/questions/47186155/array-of-structures-of-function-pointers-c", "title": "Array of structures of function pointers C", "body": "<p>I'm trying to initialize an array of structures containing pointer on function :</p>\n\n<pre><code>typedef struct struct_actioncommand {\n    char *action;\n    void (*command)(my_type);\n} type_actioncommand;\n</code></pre>\n\n<p>To initialize each pointer with its function name I'm using this method :</p>\n\n<pre><code>static const type_actioncommand g_cmd_tab[] = {\n    {\"Action1\", function1},\n    {\"Action2\", function2},\n    {\"Action3\", function3},\n    {NULL, NULL}\n};\n</code></pre>\n\n<p>But it doesn't work. \nWhen I try to compile with \"gcc\", I have the following message:</p>\n\n<blockquote>\n  <p>myfile.c:16:3: error: initialization from incompatible pointer type [-Werror]<br>\n    {\"Action1\", function1},<br>\n    ^<br>\n  myfile.c:16:3: error: (near initialization for g_cmd_tab[0].command) [-Werror]<br>\n  myfile.c:17:3: error: initialization from incompatible pointer type [-Werror]<br>\n    {\"Action2\", function2},<br>\n    ^<br>\n  myfile.c:17:3: error: (near initialization for g_cmd_tab[1].command) [-Werror]<br>\n  myfile.c:18:3: error: initialization from incompatible pointer type [-Werror]<br>\n    {\"Action3\", function3},<br>\n    ^<br>\n  myfile.c:18:3: error: (near initialization for g_cmd_tab[2].command) [-Werror]<br>\n  cc1: all warnings being treated as errors  </p>\n</blockquote>\n\n<p>each function is defined according to this prototype :</p>\n\n<pre><code>void function1(my_type *var1);\n</code></pre>\n\n<p>I'm a little bit confuse now since I dont see how to fix my problem.\nAny ideas?</p>\n"}, {"tags": ["c", "process", "scope", "fork"], "comments": [{"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 0, "creation_date": 1510162617, "post_id": 47186139, "comment_id": 81321409, "body": "<code>myfun</code> is defined inside of <code>main</code>. I believe gcc has an extension to support this (it&#39;s not standard), but either way you are never calling that function."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 1, "creation_date": 1510162659, "post_id": 47186139, "comment_id": 81321429, "body": "You have defined <code>myfun</code> <i>inside</i> <code>main</code> - you can&#39;t do that in C.  Can you <a href=\"https://stackoverflow.com/posts/47186139/edit\">edit</a> the question to clarifiy please.  Does <code>main</code> call <code>myfun</code>?"}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 0, "creation_date": 1510162660, "post_id": 47186139, "comment_id": 81321432, "body": "C doesn&#39;t allow nested function definitions."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1510162676, "post_id": 47186139, "comment_id": 81321447, "body": "Your code is invalid.  C does not permit you to nest the definition of one function (i.e. <code>myfun()</code>) inside the definition of another (<code>main()</code>).  With that being the case, all we can really say is you are mistaken: none of the code you present will even compile, much less run, without relying on extensions."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1510162714, "post_id": 47186139, "comment_id": 81321465, "body": "Wow!  That&#39;s four of us, all made the same comment in about a minute."}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1510163046, "post_id": 47186139, "comment_id": 81321652, "body": "<code>fork()</code> clones the caller, then the child will execute part 3 if it is said so. The child exists in the middle of a run in the exact same state (at least roughly) of the caller (means with a given stack, variables, etc as if it had executed the code the caller did)."}], "answers": [{"tags": [], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "is_accepted": true, "score": 3, "last_activity_date": 1510164273, "last_edit_date": 1510164273, "creation_date": 1510163190, "answer_id": 47186372, "question_id": 47186139, "link": "https://stackoverflow.com/questions/47186139/c-processes-fork-scope/47186372#47186372", "title": "C processes: fork() scope", "body": "<p>A successful <code>fork</code> returns twice\u2013once in the parent with a <code>&gt;0</code> pid, and once in the child with <code>0</code>. Both then continue from that point forward.</p>\n\n<p>That's all there is to it, as far as control flow is concerned.</p>\n\n<p>If your code is:</p>\n\n<pre><code>int myfun()\n{\n    if(fork()&gt;0){\n        //Program code part 2\n    }\n    return 0;\n}\nint main()\n{\n    //Program code part 1\n    myfun();\n    //Program code part 3\n    return 0;\n\n}\n</code></pre>\n\n<p>then the parent will run part 2 and both the parent and the child will run part 3 (unless the <code>fork()</code> call failed with -1, in which case there's no child).</p>\n\n<p>If you want to limit the child, do <code>_exit(SomeExitCode)</code> where it should end.</p>\n\n<p>( <code>_exit</code> is generally preferable over <code>exit</code> in forked processes, as the latter <code>fflush</code>es <code>stdio</code> streams\nand calls <code>atexit</code> handlers and all this is likely to be undesirable in a child that has\nits filedescriptors and process image duplicated from the parent.)</p>\n"}], "owner": {"reputation": 129, "user_id": 7419652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7e1fa1bb27a5e810acb7030d2888711d?s=128&d=identicon&r=PG&f=1", "display_name": "Mikkel bruun", "link": "https://stackoverflow.com/users/7419652/mikkel-bruun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 489, "favorite_count": 0, "accepted_answer_id": 47186372, "answer_count": 1, "score": 1, "last_activity_date": 1510164273, "creation_date": 1510162446, "question_id": 47186139, "link": "https://stackoverflow.com/questions/47186139/c-processes-fork-scope", "title": "C processes: fork() scope", "body": "<p>I'm trying to understand exactly how to work with processes. More specifically what code is run, and what is not. I've written some example code to try and explain what i don't understand.</p>\n\n<pre><code>int main(){\n\n  //Program code part 1\n\n  int myfun(){\n    if(fork()&gt;0){\n\n      //Program code part 2\n\n    }\n    return 0;\n  }\n  //Program code part 3\n\n}\n</code></pre>\n\n<p>From what I understand, the parent process should execute code parts 1 and 3, and return 0 in myfun(). The child should execute part 2, definitely not 1. Will it then execute part 3? Since it's created in te scope of myfun() i would think not, but i'd really like to be sure before i make a mess of my program.</p>\n"}, {"tags": ["c", "interface", "io", "conventions"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1510160563, "post_id": 47185515, "comment_id": 81320110, "body": "What you show is not in any way a &quot;standard&quot; way of creating an API for file I/O. It is <i>one</i> possible way to do it, but it&#39;s not the only way. So to answer your question: No, there&#39;s no &quot;reference&quot; interface."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1510161798, "post_id": 47185515, "comment_id": 81320943, "body": "I&#39;d go so far as to say that what you present doesn&#39;t appear to provide anything like what I would want for an API focused on a particular file format, unless that format were merely a vehicle for raw byte streams.  Such formats exist, but what I usually think of when I hear &quot;file format&quot; is much more structured and application-specific."}, {"owner": {"reputation": 3805, "user_id": 247643, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8e9927c1955a6b0497cf6c13d9a7b403?s=128&d=identicon&r=PG", "display_name": "doynax", "link": "https://stackoverflow.com/users/247643/doynax"}, "edited": false, "score": 0, "creation_date": 1510169698, "post_id": 47185515, "comment_id": 81325686, "body": "Best practice? It all depends, this is certainly common and not unreasonable pattern. Generally a more convenient and flexible basic interface for the <i>caller</i> end is to invert the callbacks by having the application feed data into a progressive parser. Of course the trade-off between complexity at the caller and callee ends rather depends on how many of the latter you expect to have. A minor pet peeve of mine is the overuse of function pointers. Consider declaring a <code>my_read_cb</code> function and having to be implemented at the caller end, which may do further routing from there when if necessary."}], "answers": [{"tags": [], "owner": {"reputation": 5010, "user_id": 3150445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bfca2588483eadf6695a120cbcef1f8?s=128&d=identicon&r=PG&f=1", "display_name": "jwdonahue", "link": "https://stackoverflow.com/users/3150445/jwdonahue"}, "is_accepted": false, "score": 0, "last_activity_date": 1510161974, "creation_date": 1510161974, "answer_id": 47185999, "question_id": 47185515, "link": "https://stackoverflow.com/questions/47185515/interface-for-i-o-library/47185999#47185999", "title": "Interface for I/O library", "body": "<p>These are interface design questions. A good interface provides a useful abstraction and hides implementation details. In your example, <code>my_context_t</code> elides some of the implementation details from your user base, provided you don't fully define the type in a public header. This provides you with the freedom to make substantial changes to your implementation without forcing your entire user base to rewrite their code. It is a very good practice, provided the rest of your abstraction is a good fit to the problem space. Sometimes you just have to commit to exposing additional detail at the interface level.</p>\n"}], "owner": {"reputation": 11132, "user_id": 136285, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/98d92168760c5b402a315926e4700d5f?s=128&d=identicon&r=PG", "display_name": "malat", "link": "https://stackoverflow.com/users/136285/malat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1510161974, "creation_date": 1510160435, "last_edit_date": 1510160858, "question_id": 47185515, "link": "https://stackoverflow.com/questions/47185515/interface-for-i-o-library", "title": "Interface for I/O library", "body": "<p>When someone wants to build a C library for dealing with I/O (dealing with a specific file format), they pretty much have to provide the following:</p>\n\n<pre><code>/* usual opaque struct setup */\nstruct my_context;\ntypedef struct my_context my_context_t;\n\n/* Open context for reading from user specified callbacks */\nmy_context_t* my_open_callback(void* userdata,\n    size_t(*read_cb)(void* data, size_t size, size_t count, void* userdata),\n    int(*close_cb)(void* userdata),\n    void(*error_cb)(const char* error_msg)\n    );\n</code></pre>\n\n<p>And then later provide some common ones:</p>\n\n<pre><code>/* Open directly from file */\nmy_context_t* my_open_file(const char * filename);\n\n/* Open from an existing memory block */\nmy_context_t* my_open_memory(const char* buf, size_t len);\n</code></pre>\n\n<p>As far as as understand there are possibly others, but is this one considered to reduce inconsistencies, unsafe practices and inefficiencies in the design, or is there something else considered best practice ? Is there a name for this convention/best practice ?</p>\n"}, {"tags": ["c", "sockets", "http", "get", "recv"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1510160189, "post_id": 47185326, "comment_id": 81319856, "body": "fopen() the file, after the recv() success, fwrite() bytes_recv bytes from the recv_buf, fclose() when the recv() loop exits because 0 bytes received.  It&#39;s that simple."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1510160198, "post_id": 47185326, "comment_id": 81319864, "body": "where <code>write(1, recv_buf, bytes_recv);</code> is commented, using <code>fwrite(recv_buf, bytes_recv,1,fhandle)</code> should do the trick (open fhandle in binary mode)"}, {"owner": {"reputation": 37, "user_id": 7070974, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6047baeb1d3c8d7b79610d1a65b3fb78?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/7070974/dmitry"}, "edited": false, "score": 0, "creation_date": 1510161181, "post_id": 47185326, "comment_id": 81320560, "body": "Ok thx it worked but how can I save this binary data to single array?Because I want then separate the header and body content and save it to image.jpg?"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1510161962, "post_id": 47185326, "comment_id": 81321045, "body": "You don&#39;t want to use an array - you want to dynamically allocate memory to store the response and expand it as you receive more of it"}, {"owner": {"reputation": 37, "user_id": 7070974, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6047baeb1d3c8d7b79610d1a65b3fb78?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/7070974/dmitry"}, "edited": false, "score": 0, "creation_date": 1510162371, "post_id": 47185326, "comment_id": 81321251, "body": "Ok then lets say, I know the size of the body content and I&#39;ve allocated enough memory then how can store all the response there (all this packages in correct order)?"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1510173795, "post_id": 47185326, "comment_id": 81327916, "body": "Parsing an HTTP header would be another question, and I would be amazed if there are no duplicates."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1510173835, "post_id": 47185326, "comment_id": 81327933, "body": "@Dmitry: you are going about this all wrong.  You don&#39;t need to save the entire response to a single array at all. Your code is not even implementing the HTTP protocol correctly to begin with. Start by fixing that. Then you would be able to receive just the HTTP headers, and then parse the headers to know how to read the remaining body data so you can write it to file (or to stdout, in the case of your <code>&gt; image.jpg</code> example). Related: <a href=\"https://stackoverflow.com/a/7234357/65863\">stackoverflow.com/a/7234357/65863</a>"}], "answers": [{"tags": [], "owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "is_accepted": false, "score": 0, "last_activity_date": 1510172343, "last_edit_date": 1510172343, "creation_date": 1510171041, "answer_id": 47188584, "question_id": 47185326, "link": "https://stackoverflow.com/questions/47185326/how-to-write-binary-data-received-with-recv-to-file/47188584#47188584", "title": "How to write binary data received with recv() to file", "body": "<p>You can use <a href=\"http://en.cppreference.com/w/c/memory/realloc\" rel=\"nofollow noreferrer\">realloc</a> and <code>memcpy</code> as follows:</p>\n\n<pre><code>unsigned char* buf = 0;\nint bufsize = 0;\ndo {\n    bytes_recv = recv(sockfd, recv_buf, sizeof(recv_buf), 0);\n    if (bytes_recv &lt;= 0) \n    {\n        perror(\"connection closed or error\");\n        close(sockfd);\n        freeaddrinfo(results);\n        exit(0);\n    }\n\n    buf = realloc(buf, bufsize + bytes_recv);\n    memcpy(buf + bufsize, recv_buf, bytes_recv);\n    bufsize += bytes_recv;\n\n} while (bytes_recv &gt; 0);\n</code></pre>\n\n<p><code>buf</code> will not contain <code>bufsize</code> bytes which has been read. Or write to the file and use <code>malloc</code> and read that file again.</p>\n"}], "owner": {"reputation": 37, "user_id": 7070974, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6047baeb1d3c8d7b79610d1a65b3fb78?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/7070974/dmitry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1409, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1510173700, "creation_date": 1510159866, "last_edit_date": 1510173700, "question_id": 47185326, "link": "https://stackoverflow.com/questions/47185326/how-to-write-binary-data-received-with-recv-to-file", "title": "How to write binary data received with recv() to file", "body": "<p>I want to save everything received with GET request to file with this command:</p>\n\n<pre><code>./client http://example.com/1.jpg &gt; image.jpg\n</code></pre>\n\n<p>My <code>recv_buf</code> is 2000 bytes.</p>\n\n<pre><code>// Generate HTTP request\nsprintf(send_buf, \"%s %s %s%s %s%s\", \"GET\", path, \"HTTP/1.1\\r\\n\", \n                                \"HOST:\", hostname, \"\\r\\n\\r\\n\");\n\nsend_len = strlen(send_buf); //length of request to send\nbytes_send = send(sockfd, send_buf, send_len, 0);\n\nif (bytes_send &lt;= 0)\n{\n    perror(\"nothing sended\\n\");\n    exit(1);\n}\n\nprintf(\"Bytes send: %d\\nSended message: %s\\n\", bytes_send, send_buf);\n\n// receive data\n\ndo {\n    bytes_recv = recv(sockfd, recv_buf, sizeof(recv_buf), 0);\n\n    if (bytes_recv &lt;= 0) \n    {\n        perror(\"connection closed or error\");\n        close(sockfd);\n        freeaddrinfo(results);\n        exit(0);\n    }\n\n    printf(\"Bytes received: %d\\n\", bytes_recv);\n\n    //write(1, recv_buf, bytes_recv);\n\n} while (bytes_recv &gt; 0);\n</code></pre>\n\n<p>I am so far that I can receive data till the end, but I don't know how to combine all the \"packages\" to one buffer in correct order and then save it to file as binary data (image).</p>\n\n<p>Output is:</p>\n\n<pre><code>./client https://example.com/1.jpg\nBytes received: 2000\nBytes received: 1792\nBytes received: 2000\nBytes received: 1792\nBytes received: 639\nconnection closed or error: Success\n</code></pre>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 1, "creation_date": 1510160569, "post_id": 47185297, "comment_id": 81320113, "body": "Having so manny Malloc (and different too) calls inside one Function doesn\u2019t look good. You should split your Program in more functions."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1510161115, "post_id": 47185297, "comment_id": 81320505, "body": "Concerning &quot;huge&quot; lines: &quot;An implementation shall support text files with lines containing at least 254 characters,  .... The value of the macro <code>BUFSIZ</code> shall be at least 256.&quot;.  If your line is longer than <code>&lt;stdio.h&gt; BUFSIZ</code>, code, using a file in text mode, may not behave as expected."}, {"owner": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1510161369, "post_id": 47185297, "comment_id": 81320689, "body": "I think, you should take a good, long look at the <code>scanf()</code> manpage (<code>man scanf</code>). All you need to do, is to read the first number with <code>scanf()</code>, and then loop over another call to <code>scanf()</code> to read the array."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1510161625, "post_id": 47185297, "comment_id": 81320842, "body": "That\u2019s an awful lot of code unless you have to validate that the data is on two lines as stated.  Even then, it\u2019s still an awful lot of code. If you can assume (rather than being required to check) that the data is correctly formatted, then you can reduce the code to less than a dozen lines."}, {"owner": {"reputation": 45, "user_id": 8621789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e703d6336839ba18c8be16e890609a01?s=128&d=identicon&r=PG&f=1", "display_name": "ilyas.sadykov", "link": "https://stackoverflow.com/users/8621789/ilyas-sadykov"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1510162912, "post_id": 47185297, "comment_id": 81321584, "body": "@jonathan-leffler, i wasn&#39;t trying to validate the data. How can I do it in a simpler way?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1510166985, "post_id": 47185297, "comment_id": 81324004, "body": "From a <code>worst</code> cast POV, <code>long l2_width = (number_width(MAX_VALUE) + 1) * *size;</code> is at least 1 too small.  Little reason to be so tight.  Recommend 2x.  Not only does this handle space for the final \\n, \\0, it allows spaced for values like 00000000000000000001 as values are limited to 10^n - 1, not necessarily their textual representation."}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 8621789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e703d6336839ba18c8be16e890609a01?s=128&d=identicon&r=PG&f=1", "display_name": "ilyas.sadykov", "link": "https://stackoverflow.com/users/8621789/ilyas-sadykov"}, "edited": false, "score": 1, "creation_date": 1510167029, "post_id": 47186752, "comment_id": 81324035, "body": "Thank you a lot sir! I haven&#39;t even estimated this thorough explanation. You did it like a master. Thank you very much."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1510167289, "post_id": 47186752, "comment_id": 81324200, "body": "A short-coming to the <code>fscanf(fp, &quot;%d&quot;...</code> approach is the loss of <code>&#39;\\n&#39;</code> detection and other validation as said here with &quot;Unless you need to validate ....&quot;.  OP&#39;s original <code>fgets()</code> could lend itself to better error detection and localization.  Still this answer does work well with with formed file data."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1510177592, "post_id": 47186752, "comment_id": 81329822, "body": "@chux: Agreed, but the whole answer is predicated on &quot;unless you need to validate that the data meets the format specification&quot;. That said, it would not be hard to upgrade it to use POSIX <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/getline.html\" rel=\"nofollow noreferrer\"><code>getline()</code></a> to read the lines and then <a href=\"https://stackoverflow.com/questions/3975236/how-to-use-sscanf-in-loops\">use <code>sscanf()</code> in a loop</a> to process the data, remembering to check that there is no more data after the first number on the first line, that there is no more data after the last number on the second line, and no more lines."}], "tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": false, "score": 4, "last_activity_date": 1510164472, "creation_date": 1510164472, "answer_id": 47186752, "question_id": 47185297, "link": "https://stackoverflow.com/questions/47185297/c-parsing-a-huge-int-array-from-a-string/47186752#47186752", "title": "C parsing a huge int array from a string", "body": "<blockquote>\n  <p>There is an input file <code>equal.in</code>. It consists of two lines: first one contains the number N of numbers in next line. Second line contains N numbers separated by single space. N is not greater than 3 * 10^5, each number is not greater than 10^9.</p>\n</blockquote>\n\n<p>This makes life easy.  The values fit inside 32-bit <code>int</code>, and 300K numbers means that you will only need 1.2M of data.  You can allocate that on the stack, with a fixed size array or a variable length array.  If you insist, you can allocate it with <code>malloc()</code> and free it later.</p>\n\n<p>Unless you need to validate that the data meets the input specification, you can do the job quite simply:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(int argc, char **argv)\n{\n    const char *filename = \"equal.in\";\n    if (argc == 2)\n        filename = argv[1];\n\n    FILE *fp = fopen(filename, \"r\");\n    if (fp == 0)\n    {\n        fprintf(stderr, \"%s: failed to open file %s for reading\\n\", argv[0], filename);\n        return 1;\n    }\n\n    int num;\n    if (fscanf(fp, \"%d\", &amp;num) != 1)\n    {\n        fprintf(stderr, \"%s: first line of file %s does not start with a number\\n\", argv[0], filename);\n        return 1;\n    }\n\n    int data[num];\n    for (int i = 0; i &lt; num; i++)\n    {\n        if (fscanf(fp, \"%d\", &amp;data[i]) != 1)\n        {\n            fprintf(stderr, \"%s: failed to read entry number %d from file %s\\n\", argv[0], i+1, filename);\n            return 1;\n        }\n    }\n\n    int length = 0;\n    const char *pad = \"\";\n    for (int i = 0; i &lt; num; i++)\n    {\n        length += printf(\"%s%d\", pad, data[i]);\n        pad = \" \";\n        if (length &gt; 70)\n        {\n            putchar('\\n');\n            pad = \"\";\n            length = 0;\n        }\n    }\n    if (length &gt; 0)\n        putchar('\\n');\n    return 0;\n}\n</code></pre>\n\n<p>This uses a VLA.  If your compiler doesn't have support for VLAs, then you can either go with the pessimistic approach:</p>\n\n<pre><code>enum { MAX_ENTRIES = 300000 };\nint data[MAX_ENTRIES];\n</code></pre>\n\n<p>or the dynamic approach:</p>\n\n<pre><code>int *data = malloc(num * sizeof(*data));\nif (data == 0)\n{\n    fprintf(stderr, \"%s: failed to allocate %zu bytes of memory\\n\",\n            argv[0], num * sizeof(*data));\n    return 1;\n}\n\n\u2026\n\nfree(data);\n</code></pre>\n\n<p>I created a test file with 279295 entries using a home-grown random number generator:</p>\n\n<pre><code>$ random 10000 300000 | tee equal.in\n27295\n$ random -n $(&lt;equal.in) 0 999999999 | tr '\\n' ' ' &gt;&gt; equal.in\n$ echo &gt;&gt; equal.in\n$ wc equal.in\n       2  279296 2761868 equal.in\n$\n</code></pre>\n\n<p>The first line generates a number in the range 10000 to 300000 and writes it to both <code>equal.in</code> and the terminal.  The second line generates that many numbers (<code>-n $(&lt;equal.in)</code> \u2014 there's a Bash-ism there) in the range 0 to 999,999,999, writing one number per line.  The <code>tr</code> command maps the newlines to blanks; the final echo adds a newline to the end of the file.  The <code>wc</code> reports that there are two lines and 279296 'words', meaning numbers, in the file.</p>\n\n<p>I then ran the program, and got the output:</p>\n\n<pre><code>670206318 31176149 386272687 414856040 825173318 954016935 485458470 922293242\n795866483 253363938 844512159 323292038 103572404 373917916 142021104 264196634\n957800900 482861146 26824834 849885087 789023653 432837903 583262643 117607701\n397156307 281517645 721527177 397482085 226290913 94898730 493928208 935264986\n408834056 561990394 846038059 431925002 487972136 227567249 578463338 840243525\n\u2026\n974659784 53079688 549147388 154574314 804309064 164345737 378554521 729437495\n504219874 234692365 141938083 85093023 95609608 860865295 742893260 69909938\n48374552 461946331 407898852 575861228 335672877 983186286 679276932 946629117\n247591685 299343487 335924507 161837591 435945210 340851167 747313445 454000003\n837746407 249404999 860823559 923922564 150303869 762266074 739320218\n</code></pre>\n\n<p>The longest line in the output was 79 characters (excluding the newline).  With the output redirected to <code>/dev/null</code>, it took about 0.124 seconds to read and print that data.  With the output going to screen, it took about 0.214s.</p>\n\n<p>Note the error reporting, including the program name in the error reports, which are written to standard error.  I avoided using <code>exit()</code> but would normally need to do so.  In my own code, I would replace those 4-line blocks of error reporting code with single line calls to the functions from <code>stderr.c</code> and <code>stderr.h</code> available from <a href=\"https://github.com/jleffler/soq/tree/master/src/libsoq\" rel=\"nofollow noreferrer\">GitHub</a>.  I'd probably also validate the argument list, objecting to more than one argument rather than simply ignore all the arguments.  Like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include \"stderr.h\"\n\nint main(int argc, char **argv)\n{\n    err_setarg0(argv[0]);\n\n    const char *filename = \"equal.in\";\n    if (argc == 2)\n        filename = argv[1];\n    else if (argc &gt; 2)\n        err_usage(\"[file]\");\n\n    FILE *fp = fopen(filename, \"r\");\n    if (fp == 0)\n        err_error(\"failed to open file %s for reading\\n\", filename);\n\n    int num;\n    if (fscanf(fp, \"%d\", &amp;num) != 1)\n        err_error(\"first line of file %s does not start with a number\\n\", filename);\n\n    int data[num];\n    for (int i = 0; i &lt; num; i++)\n    {\n        if (fscanf(fp, \"%d\", &amp;data[i]) != 1)\n            err_error(\"failed to read entry number %d from file %s\\n\", i+1, filename);\n    }\n\n    int length = 0;\n    const char *pad = \"\";\n    for (int i = 0; i &lt; num; i++)\n    {\n        length += printf(\"%s%d\", pad, data[i]);\n        pad = \" \";\n        if (length &gt; 70)\n        {\n            putchar('\\n');\n            pad = \"\";\n            length = 0;\n        }\n    }\n    if (length &gt; 0)\n        putchar('\\n');\n    return 0;\n}\n</code></pre>\n\n<p>Note that reporting the file name can help the user identify which file to look at.  That means you should almost never use a string literal for the file name passed to <code>fopen()</code> because you would have to repeat it in the error reporting, which isn't good.</p>\n"}, {"comments": [{"owner": {"reputation": 45, "user_id": 8621789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e703d6336839ba18c8be16e890609a01?s=128&d=identicon&r=PG&f=1", "display_name": "ilyas.sadykov", "link": "https://stackoverflow.com/users/8621789/ilyas-sadykov"}, "edited": false, "score": 0, "creation_date": 1510171630, "post_id": 47187626, "comment_id": 81326742, "body": "Another superb comment. I really appreciate your answer, it helped a lot. Now i know where i was wrong. Thank you a lot."}], "tags": [], "owner": {"reputation": 9095, "user_id": 8542346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11b206b49cec657d28a5876f8330780e?s=128&d=identicon&r=PG&f=1", "display_name": "H.S.", "link": "https://stackoverflow.com/users/8542346/h-s"}, "is_accepted": true, "score": 4, "last_activity_date": 1510168597, "last_edit_date": 1592644375, "creation_date": 1510167644, "answer_id": 47187626, "question_id": 47185297, "link": "https://stackoverflow.com/questions/47185297/c-parsing-a-huge-int-array-from-a-string/47187626#47187626", "title": "C parsing a huge int array from a string", "body": "<p>The problem that you are observing is:</p>\n<blockquote>\n<p>The program runs smoothly while the number N is less than 10^4, when it's above that, the array is filled with zeroes except the first element.</p>\n</blockquote>\n<p>It is occurring because of this:</p>\n<pre><code>long l1_width = number_width(MAX_NUMBERS);\nchar* line1 = malloc(sizeof(char) * l1_width);\nfgets(line1, l1_width, in_file);\n</code></pre>\n<p>Here the <code>l1_width</code> will always be <code>6</code> because the MAX_NUMBERS is <code>300000</code>.</p>\n<blockquote>\n<p><strong>fgets:</strong></p>\n<p>Syntax : char * fgets ( char * str, int num, FILE * stream );</p>\n<p>Description : Reads characters from stream and stores them as a C string into str until (num-1) characters have been read or either a newline or the end-of-file is reached, whichever happens first.</p>\n</blockquote>\n<p>Now, consider the scenario when the first line of your file <code>equal.in</code> contains number less than 10^4 i.e. 1000 or less, the program works fine.</p>\n<p>So, assume the first line of file <code>equal.in</code> contains 1000.</p>\n<p>Total number of characters in the first line of file <code>equal.in</code> - 5 characters (1000 + newline).</p>\n<p>For this program works fine because the memory allocated to line1 is of 6 characters and <code>fgets</code> reads until <code>num - 1</code> (i.e. 5) characters.</p>\n<p>So, while reading 1000 as the first line, <code>fgets</code> hits newline character.</p>\n<p>But when the number is greater than or equal to 10^4, the <code>fgets</code> hits <code>num - 1</code> before hitting newline character as the <code>l1_width</code> is <code>6</code>.</p>\n<p>Now the point to note here is that the <code>rest of characters + newline character</code> of the first line of file <code>equal.in</code> is <strong>yet to be read</strong>.</p>\n<p>In next call to <code>fgets()</code>:</p>\n<pre><code>fgets(line2, l2_width, in_file);\n</code></pre>\n<p>It reads the rest of characters of the first line of file <code>equal.in</code> and as the <code>l2_width</code> is a big number, <code>fgets()</code> hits newline of the first line of <code>equal.in</code> file and <code>line2</code> contain remains of the first line only.</p>\n<p><strong>And it never happens to read the second line of file <code>equal.in</code></strong> when the number is greater than or equal to 10^4 in the first line of <code>equal.in</code> file.</p>\n<p>To fix this problem first, you need to return the width + 1 from  <code>number_width()</code> function.</p>\n<p>It should be:</p>\n<pre><code>int number_width(int n) {\n    if (n &lt; 0) n = (n == INT_MIN) ? INT_MAX : -n;\n    if (n &lt; 10) return 2;\n    if (n &lt; 100) return 3;\n    if (n &lt; 1000) return 4;\n    if (n &lt; 10000) return 5;\n    if (n &lt; 100000) return 6;\n    if (n &lt; 1000000) return 7;\n    if (n &lt; 10000000) return 8;\n    if (n &lt; 100000000) return 9;\n    if (n &lt; 1000000000) return 10;\n    return 11;\n}\n</code></pre>\n<p>Second, you need to allocate the buffer to <code>line1</code> of <code>l1_width+1</code>:</p>\n<pre><code>fgets(line1, l1_width+1, in_file);\n</code></pre>\n<p>As I can see that Jonathan has already given a better way to process <code>equal.in</code> file. This answer is just to let you know where the problem is occurring in your code so that in future you take care of such things.</p>\n"}], "owner": {"reputation": 45, "user_id": 8621789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e703d6336839ba18c8be16e890609a01?s=128&d=identicon&r=PG&f=1", "display_name": "ilyas.sadykov", "link": "https://stackoverflow.com/users/8621789/ilyas-sadykov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 273, "favorite_count": 0, "accepted_answer_id": 47187626, "answer_count": 2, "score": 3, "last_activity_date": 1510168597, "creation_date": 1510159772, "last_edit_date": 1510160509, "question_id": 47185297, "link": "https://stackoverflow.com/questions/47185297/c-parsing-a-huge-int-array-from-a-string", "title": "C parsing a huge int array from a string", "body": "<p>I'm trying to solve some simple problem.\nThere is an input file <code>equal.in</code>. It consists of two lines: first one contains the number N of numbers in next line. Second line contains N numbers separated by single space. N is not greater than 3 * 10^5, each number is not greater than 10^9.</p>\n\n<p>I'm trying to solve this program using C language. I've already made it in python like in 1 minute or so, however i struggle in C. I've made a function <code>read_file</code>, which should return a pointer to the array of <code>long</code> numbers and also change the value of <code>size</code> variable. The program runs smoothly while the number N is less than 10^4, when it's above that, the array is filled with zeroes except the first element. What am I doing wrong?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdbool.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;limits.h&gt;\n\n#define MAX_NUMBERS 300000\n#define MAX_VALUE 1000000000\n\nlong* read_file(char*, long*);\nint number_width(int);\n\nint main() {\n    long i, size;\n    long* numbers = read_file(\"equal.in\", &amp;size);\n    printf(\"Size: %d\\n\", size);\n    printf(\"Array: \");\n    for (i = 0; i &lt; size; i++) {\n        printf(\"%d \", numbers[i]);\n    }\n    printf(\"\\n\");\n    free(numbers);\n    return 0;\n}\n\nlong* read_file(char* filename, long* size) {\n    FILE* in_file = fopen(filename, \"r\");\n    long l1_width = number_width(MAX_NUMBERS);\n    char* line1 = malloc(sizeof(char) * l1_width);\n    fgets(line1, l1_width, in_file);\n    char *ptr;\n    *size = strtol(line1, &amp;ptr, 10);\n    free(line1);\n    long* numbers = malloc(sizeof(long) * *size);\n    long l2_width = (number_width(MAX_VALUE) + 1) * *size;\n    char* line2 = malloc(sizeof(char) * l2_width);\n    fgets(line2, l2_width, in_file);\n    char* token = strtok(line2, \" \");\n    int i = 0;\n    while (token != NULL) {\n        *(numbers+i) = strtol(token, &amp;ptr, 10);\n        token = strtok(NULL, \" \");\n        i++;\n    }\n    free(line2);\n    fclose(in_file);\n    return numbers;\n}\n\nint number_width(int n) {\n    if (n &lt; 0) n = (n == INT_MIN) ? INT_MAX : -n;\n    if (n &lt; 10) return 1;\n    if (n &lt; 100) return 2;\n    if (n &lt; 1000) return 3;\n    if (n &lt; 10000) return 4;\n    if (n &lt; 100000) return 5;\n    if (n &lt; 1000000) return 6;\n    if (n &lt; 10000000) return 7;\n    if (n &lt; 100000000) return 8;\n    if (n &lt; 1000000000) return 9;\n    return 10;\n}\n</code></pre>\n\n<p>I've deleted the (in my opinion) unnecessary code. Everything else seems to work fine. The problem only happens with the large number on the first line. If related, i made a simple script in python to make the file <code>equal.in</code> according to the rules, so the contents of the file are ok.</p>\n"}, {"tags": ["c", "arrays", "struct", "callback", "gtk"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 8906066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08dc6c79b393a5a5ffc31ebb6f47c105?s=128&d=identicon&r=PG&f=1", "display_name": "dustynine", "link": "https://stackoverflow.com/users/8906066/dustynine"}, "edited": false, "score": 0, "creation_date": 1510234284, "post_id": 47200523, "comment_id": 81354646, "body": "Did as you suggested and put all my gui into a struct, but I&#39;m not able to make this variant work at all. I&#39;ve added the details to the OP"}, {"owner": {"reputation": 10263, "user_id": 518853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IjKPw.png?s=128&g=1", "display_name": "liberforce", "link": "https://stackoverflow.com/users/518853/liberforce"}, "reply_to_user": {"reputation": 11, "user_id": 8906066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08dc6c79b393a5a5ffc31ebb6f47c105?s=128&d=identicon&r=PG&f=1", "display_name": "dustynine", "link": "https://stackoverflow.com/users/8906066/dustynine"}, "edited": false, "score": 0, "creation_date": 1510234874, "post_id": 47200523, "comment_id": 81355173, "body": "Those assertions happen because you pass pointers that are not valid. Either it&#39;s not a valid pointer or it&#39;s a valid widget, but not of the right type you&#39;re expecting. <code>pw-&gt;plainext</code> is expected to be a GtkEntry. I see nothing wrong with the way you use it, so the bug may be in the way you initialize the struct."}, {"owner": {"reputation": 10263, "user_id": 518853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IjKPw.png?s=128&g=1", "display_name": "liberforce", "link": "https://stackoverflow.com/users/518853/liberforce"}, "reply_to_user": {"reputation": 11, "user_id": 8906066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08dc6c79b393a5a5ffc31ebb6f47c105?s=128&d=identicon&r=PG&f=1", "display_name": "dustynine", "link": "https://stackoverflow.com/users/8906066/dustynine"}, "edited": false, "score": 0, "creation_date": 1510234955, "post_id": 47200523, "comment_id": 81355238, "body": "Also, just call <code>gtk_entry_get_text</code> to get the text inside a <code>GtkEntry</code>."}, {"owner": {"reputation": 11, "user_id": 8906066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08dc6c79b393a5a5ffc31ebb6f47c105?s=128&d=identicon&r=PG&f=1", "display_name": "dustynine", "link": "https://stackoverflow.com/users/8906066/dustynine"}, "edited": false, "score": 0, "creation_date": 1510235849, "post_id": 47200523, "comment_id": 81355821, "body": "I initialize the struct like this <code>struct template gui;</code> and then make a call: <code>gui.plaintext = gtk_entry_new();</code> and that&#39;s it."}, {"owner": {"reputation": 11, "user_id": 8906066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08dc6c79b393a5a5ffc31ebb6f47c105?s=128&d=identicon&r=PG&f=1", "display_name": "dustynine", "link": "https://stackoverflow.com/users/8906066/dustynine"}, "edited": false, "score": 0, "creation_date": 1510236345, "post_id": 47200523, "comment_id": 81356167, "body": "Also, you said that <code>pw-&gt;plaintext</code> is expected to be a <code>GtkEntry</code> but I thought that calling <code>GTK_ENTRY()</code> casts it from a Widget to an Entry"}, {"owner": {"reputation": 10263, "user_id": 518853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IjKPw.png?s=128&g=1", "display_name": "liberforce", "link": "https://stackoverflow.com/users/518853/liberforce"}, "reply_to_user": {"reputation": 11, "user_id": 8906066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08dc6c79b393a5a5ffc31ebb6f47c105?s=128&d=identicon&r=PG&f=1", "display_name": "dustynine", "link": "https://stackoverflow.com/users/8906066/dustynine"}, "edited": false, "score": 0, "creation_date": 1510240896, "post_id": 47200523, "comment_id": 81359679, "body": "First, try to debug and make sure the address of the widget you&#39;ve created is the addres of the widget you&#39;re accessing in the callback. a <code>printf(&quot;addres: %p&quot;, my_widget)</code> after creation and when you&#39;re accessing it will be enough."}, {"owner": {"reputation": 10263, "user_id": 518853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IjKPw.png?s=128&g=1", "display_name": "liberforce", "link": "https://stackoverflow.com/users/518853/liberforce"}, "reply_to_user": {"reputation": 11, "user_id": 8906066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08dc6c79b393a5a5ffc31ebb6f47c105?s=128&d=identicon&r=PG&f=1", "display_name": "dustynine", "link": "https://stackoverflow.com/users/8906066/dustynine"}, "edited": false, "score": 0, "creation_date": 1510240987, "post_id": 47200523, "comment_id": 81359746, "body": "Then post the code where you create and initialize the structure with the newly created widgets. Equivalent to what you were doing in <code>make_data</code>."}, {"owner": {"reputation": 11, "user_id": 8906066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08dc6c79b393a5a5ffc31ebb6f47c105?s=128&d=identicon&r=PG&f=1", "display_name": "dustynine", "link": "https://stackoverflow.com/users/8906066/dustynine"}, "edited": false, "score": 0, "creation_date": 1510255036, "post_id": 47200523, "comment_id": 81368825, "body": "Done. Instead of posting the code I&#39;ve added the link to the file on GitHub. The file is just 170 SLOC so I guess this is allowed"}, {"owner": {"reputation": 10263, "user_id": 518853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IjKPw.png?s=128&g=1", "display_name": "liberforce", "link": "https://stackoverflow.com/users/518853/liberforce"}, "reply_to_user": {"reputation": 11, "user_id": 8906066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08dc6c79b393a5a5ffc31ebb6f47c105?s=128&d=identicon&r=PG&f=1", "display_name": "dustynine", "link": "https://stackoverflow.com/users/8906066/dustynine"}, "edited": false, "score": 0, "creation_date": 1510306093, "post_id": 47200523, "comment_id": 81388352, "body": "I&#39;ve just built your code (the &quot;struct&quot; branch), there&#39;s no segfault. However, you seem confused about how pointers work. Please watch <a href=\"https://www.youtube.com/watch?v=6pmWojisM_E\" rel=\"nofollow noreferrer\">youtube.com/watch?v=6pmWojisM_E</a>"}, {"owner": {"reputation": 10263, "user_id": 518853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IjKPw.png?s=128&g=1", "display_name": "liberforce", "link": "https://stackoverflow.com/users/518853/liberforce"}, "reply_to_user": {"reputation": 11, "user_id": 8906066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08dc6c79b393a5a5ffc31ebb6f47c105?s=128&d=identicon&r=PG&f=1", "display_name": "dustynine", "link": "https://stackoverflow.com/users/8906066/dustynine"}, "edited": false, "score": 0, "creation_date": 1510306267, "post_id": 47200523, "comment_id": 81388479, "body": "Ok, just saw your answer."}], "tags": [], "owner": {"reputation": 10263, "user_id": 518853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IjKPw.png?s=128&g=1", "display_name": "liberforce", "link": "https://stackoverflow.com/users/518853/liberforce"}, "is_accepted": false, "score": 0, "last_activity_date": 1510226695, "last_edit_date": 1510226695, "creation_date": 1510226383, "answer_id": 47200523, "question_id": 47185272, "link": "https://stackoverflow.com/questions/47185272/how-to-modify-the-elements-of-an-array-of-gtkwidgets-with-a-callback/47200523#47200523", "title": "How to modify the elements of an array of GtkWidget&#39;s with a callback", "body": "<p>The prototype of encode is wrong. It should be <code>gpointer data</code>, not <code>gpointer *data</code>. <code>gpointer</code> is already a typedef to <code>void *</code>.</p>\n\n<p>Also, your <code>make_data</code> function should take a pointer to your struct argument, and just fill it. Don't use a static struct, as it makes code less reusable. </p>\n\n<p>Usually I just create a <code>struct</code> in my <code>main</code> representing my gui, fill it, then pass the address of that stack-allocated struct (or sub-element of it) as the last arg of <code>g_signal_connect</code>.</p>\n\n<p>One more thing is that there's no need to explicitely cast a pointer to <code>gpointer</code>, as every pointer can be implicitely cast to <code>gpointer</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 10263, "user_id": 518853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IjKPw.png?s=128&g=1", "display_name": "liberforce", "link": "https://stackoverflow.com/users/518853/liberforce"}, "edited": false, "score": 0, "creation_date": 1510306660, "post_id": 47217878, "comment_id": 81388732, "body": "Ok, I didn&#39;t know you were using GtkApplication. Allocating on the stack works in the main if you use pass your the adress of your struct as the <code>user_data</code> when connecting to the <code>activate</code> signal. Or you can declare it as static, but don&#39;t do that in a callback handler, do it at the top of the file, so one can see the objects that are global to the file. You can also create the struct on the heap with <code>g_new</code>. The important this is that your gui struct must have the same lifetime as your application."}, {"owner": {"reputation": 10263, "user_id": 518853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IjKPw.png?s=128&g=1", "display_name": "liberforce", "link": "https://stackoverflow.com/users/518853/liberforce"}, "edited": false, "score": 0, "creation_date": 1510306770, "post_id": 47217878, "comment_id": 81388799, "body": "This means that if you declare the struct on the stack in a callback, it is destroyed when you exit the callback: you&#39;re tracking a pointer to its location but once the stack is modified that space is overwritten."}, {"owner": {"reputation": 10263, "user_id": 518853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IjKPw.png?s=128&g=1", "display_name": "liberforce", "link": "https://stackoverflow.com/users/518853/liberforce"}, "edited": false, "score": 0, "creation_date": 1510307787, "post_id": 47217878, "comment_id": 81389477, "body": "BTW, you shoul also try to switch to a real build system. For example your build script didn&#39;t work for me, because I have <code>bash</code>, but not <code>sh</code>. The Meson build system is the recommended build system for GTK/GNOME projects: <a href=\"http://mesonbuild.com/\" rel=\"nofollow noreferrer\">mesonbuild.com</a> . For example Meson would have enabled <code>-Wall</code> for you to have a reasonnable set of warnings enabled (and you should ALWAYS use that as a minimum). You might want to give a look at my repo at <a href=\"https://github.com/liberforce/metrognome\" rel=\"nofollow noreferrer\">github.com/liberforce/metrognome</a> , where I&#39;m trying to keep up with best practice on writing a modern GTK+/C application."}, {"owner": {"reputation": 11, "user_id": 8906066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08dc6c79b393a5a5ffc31ebb6f47c105?s=128&d=identicon&r=PG&f=1", "display_name": "dustynine", "link": "https://stackoverflow.com/users/8906066/dustynine"}, "reply_to_user": {"reputation": 10263, "user_id": 518853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IjKPw.png?s=128&g=1", "display_name": "liberforce", "link": "https://stackoverflow.com/users/518853/liberforce"}, "edited": false, "score": 0, "creation_date": 1510308950, "post_id": 47217878, "comment_id": 81390228, "body": "Ok, I&#39;ll definitely check it out. I&#39;m still pretty new to C and GTK so your help is greatly appreciated."}], "tags": [], "owner": {"reputation": 11, "user_id": 8906066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08dc6c79b393a5a5ffc31ebb6f47c105?s=128&d=identicon&r=PG&f=1", "display_name": "dustynine", "link": "https://stackoverflow.com/users/8906066/dustynine"}, "is_accepted": true, "score": 0, "last_activity_date": 1510299653, "creation_date": 1510299653, "answer_id": 47217878, "question_id": 47185272, "link": "https://stackoverflow.com/questions/47185272/how-to-modify-the-elements-of-an-array-of-gtkwidgets-with-a-callback/47217878#47217878", "title": "How to modify the elements of an array of GtkWidget&#39;s with a callback", "body": "<p>I think I got it. I create the struct prototype outside the <code>main()</code></p>\n\n<pre><code>struct template {\n    GtkWidget *window;\n    ...\n    GtkWidget *plaintext;\n    GtkWidget *cells[CELLS];\n};\n</code></pre>\n\n<p>Then in the callback that is called on the \"activate\" signal of the app I do this:</p>\n\n<pre><code>static void activate(GtkApplication* app, gpointer user_data) {\n    static struct template gui;\n\n    gui.plaintext = gtk_entry_new();\n    printf(\"gui.plaintext address: %p\\n\", gui.plaintext);\n\n    g_signal_connect(\n        G_OBJECT(gui.button),\n        \"clicked\",\n        G_CALLBACK(encode),\n        &amp;gui\n    );\n</code></pre>\n\n<p>and in the encode callback I have this</p>\n\n<pre><code>static void encode(GtkButton *button, gpointer data) {\n    gchar *plaintext;\n    struct template *pw;\n\n    pw = (struct template *) data;\n\n    plaintext = gtk_entry_get_text(GTK_ENTRY(pw -&gt; plaintext));\n    printf(\"   plaintext contents: %s\\n\", plaintext);\n\n    GdkColor color;\n    gdk_color_parse(\"#ff0000\", &amp;color);\n    gtk_widget_modify_fg(GTK_WIDGET(pw -&gt; cells[0]), GTK_STATE_NORMAL, \n    &amp;color);\n}\n</code></pre>\n\n<p>Now everything works as intended. Basically I fixed my problem by adding <code>static</code> to <code>struct template gui</code> declaration in the <code>activate</code> callback. I'll leave the link to the working version of the file on github for future reference. Thanks liberforce for pointing me in the right direction. </p>\n"}], "owner": {"reputation": 11, "user_id": 8906066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08dc6c79b393a5a5ffc31ebb6f47c105?s=128&d=identicon&r=PG&f=1", "display_name": "dustynine", "link": "https://stackoverflow.com/users/8906066/dustynine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 266, "favorite_count": 0, "accepted_answer_id": 47217878, "answer_count": 2, "score": 1, "last_activity_date": 1510299653, "creation_date": 1510159707, "last_edit_date": 1510255243, "question_id": 47185272, "link": "https://stackoverflow.com/questions/47185272/how-to-modify-the-elements-of-an-array-of-gtkwidgets-with-a-callback", "title": "How to modify the elements of an array of GtkWidget&#39;s with a callback", "body": "<p>I need to write a callback that would change the font color of the labels stored in an array of GtkWidget's. </p>\n\n<p>Code in it's current state is here <a href=\"https://github.com/dustynine/colta-gtk/blob/struct/src/main.c\" rel=\"nofollow noreferrer\">https://github.com/dustynine/colta-gtk/blob/struct/src/main.c</a></p>\n\n<p>In the function that initializes the interface my array looks like this:</p>\n\n<pre><code>GtkWidget *cells[CELLS];\nfor (int i=0; i&lt;CELLS; i++) {\n    cells[i] = gtk_label_new(\"\u2588\u2588\");\n}\n</code></pre>\n\n<p>Connected callback to the button:</p>\n\n<pre><code>g_signal_connect(\n    G_OBJECT(button),\n    \"clicked\",\n    G_CALLBACK(encode),\n    make_data(plaintext, key, cells)\n);\n</code></pre>\n\n<p><code>make_data()</code> is a function that returns a struct with callback's arguments:</p>\n\n<pre><code>struct passed_widgets {\n    GtkWidget *plaintext;\n    GtkWidget *key;\n    GtkWidget **cls;\n};\n\ngpointer make_data(GtkWidget *text, GtkWidget *key, GtkWidget *cells[CELLS]) {\n    static struct passed_widgets pw;\n    pw.plaintext = text;\n    pw.key = key;\n    pw.cls = cells;\n    return (gpointer) &amp;pw;\n}\n</code></pre>\n\n<p>And inside the callback itself I have this:</p>\n\n<pre><code>static void encode(GtkButton *button, gpointer *data) {\n    struct passed_widgets *pw;\n    GdkColor color;\n    pw = (struct passed_widgets *) data;\n\n    gdk_color_parse(\"#07d9d9\", &amp;color);\n    gtk_widget_modify_fg(GTK_WIDGET(pw -&gt; cls[0]), GTK_STATE_NORMAL, &amp;color);\n}\n</code></pre>\n\n<p>Compiler doesn't complain (aside from the warnings that color related stuff is deprecated) but when I actually push the button Gtk reports this:</p>\n\n<pre><code>(colta-gtk:3993): GLib-GObject-WARNING **: invalid uninstantiatable type 'GInterface' in cast to 'GtkWidget'\n(colta-gtk:3993): Gtk-CRITICAL **: gtk_widget_modify_fg: assertion 'GTK_IS_WIDGET (widget)' failed\n</code></pre>\n\n<p>I picked around in gdb for a bit and according to <code>explore pw -> cls[0]</code>: </p>\n\n<pre><code>'pw -&gt; cls[0]' is a pointer to a value of type 'GtkWidget'\n</code></pre>\n\n<p>So, how do I make this work as intended? I have a suspicion that I'm either incorrectly assigning the array to the struct (but this is the only way the program worked) or incorrectly accessing it when trying to modify it at the end off the callback.</p>\n\n<hr>\n\n<p><strong>EDIT:</strong> I rewrote the program as liberforce suggested. Created a struct for my gui:</p>\n\n<pre><code>struct template {\n    GtkWidget *window;\n    ...\n    GtkWidget *plaintext;\n    GtkWidget *cells[CELLS];\n};\n</code></pre>\n\n<p>Now I just pass this struct that I instantiated as <code>gui</code> to callback:</p>\n\n<pre><code>g_signal_connect(\n    G_OBJECT(gui.button),\n    \"clicked\",\n    G_CALLBACK(encode),\n    &amp;gui\n);\n</code></pre>\n\n<p>But I can't get anything to work in the encode() function anymore:</p>\n\n<pre><code>static void encode(GtkButton *button, gpointer data) {\n    gchar *plaintext;\n    struct template *pw;\n\n    pw = (struct template *) data;\n\n    plaintext = gtk_entry_get_text(GTK_ENTRY(pw -&gt; plaintext));\n    printf(\"   plaintext contents: %s\\n\", plaintext);\n</code></pre>\n\n<p>Once again I just don't understand what is wrong. Compiler gives no warnings, according to gdb the types match, but when I run the program and use the callback it gives me that:</p>\n\n<pre><code>(colta-gtk:21589): Gtk-CRITICAL **: gtk_entry_get_buffer: assertion 'GTK_IS_ENTRY (entry)' failed\n\n(colta-gtk:21589): Gtk-CRITICAL **: gtk_entry_buffer_get_text: assertion 'GTK_IS_ENTRY_BUFFER (buffer)' failed\n</code></pre>\n\n<hr>\n\n<p>Addresses are as follows:</p>\n\n<pre><code>gui.plaintext address: 0x55babcfc6290\ngui address: 0x7ffd13fe8a88\n&amp;gui address: 0x7ffd13fe8910\ndata address: 0x7ffd13fe8910\npw address: 0x7ffd13fe8910\n*pw address: 0x7ffd13fe8a88\npw -&gt; plaintext address: (nil)\n</code></pre>\n\n<p><code>*pw -> plaintext</code> causes Segmentation fault</p>\n"}, {"tags": ["c++", "c", "double"], "comments": [{"owner": {"reputation": 1297, "user_id": 5042431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VZqF.jpg?s=128&g=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/5042431/charles"}, "edited": false, "score": 0, "creation_date": 1510159457, "post_id": 47185165, "comment_id": 81319373, "body": "<code>double</code>s are only so precise."}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 1, "creation_date": 1510159509, "post_id": 47185165, "comment_id": 81319407, "body": "By using an external library."}, {"owner": {"reputation": 317, "user_id": 5967672, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b7ebe06a44265a719b7a0594f259fe22?s=128&d=identicon&r=PG&f=1", "display_name": "Sv Sv", "link": "https://stackoverflow.com/users/5967672/sv-sv"}, "edited": false, "score": 0, "creation_date": 1510159512, "post_id": 47185165, "comment_id": 81319410, "body": "By writing a custom cpp compiler or adding some flags to the existing ones."}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1510159540, "post_id": 47185165, "comment_id": 81319428, "body": "you really need more accuracy than a long double ?"}, {"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 1, "creation_date": 1510159585, "post_id": 47185165, "comment_id": 81319464, "body": "You can&#39;t increase accuracy in <code>double</code>. Nor any other primitive type for that mater."}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 2, "creation_date": 1510159655, "post_id": 47185165, "comment_id": 81319514, "body": "Printing decimal digits of a fraction is a problem completely unrelated to <code>double</code>, if that&#39;s what you want to do I&#39;m sure there is an appropriate duplicate on this site"}, {"owner": {"reputation": 3483, "user_id": 3932569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bca364f93a9dfab17419b31a8a1a504?s=128&d=identicon&r=PG&f=1", "display_name": "Garf365", "link": "https://stackoverflow.com/users/3932569/garf365"}, "edited": false, "score": 0, "creation_date": 1510159912, "post_id": 47185165, "comment_id": 81319677, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/35651574/printf-big-double-value-with-high-precision-in-c\">Printf big double value with high precision in C</a>"}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1510163264, "post_id": 47185165, "comment_id": 81321794, "body": "Perhaps the more interesting question is why do you need better accuracy?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1510167578, "post_id": 47185165, "comment_id": 81324369, "body": "Step 1: Use correct print specifier  <code>printf(&quot;%.62LLF&quot;, a);</code> --&gt; <code>printf(&quot;%.62LF&quot;, a);</code>  (one L and enable all compiler warings).  2) Use exponential notation <code>&quot;%.62Le&quot;</code>.  3) Use <code>a</code> for complete hex output <code>printf(&quot;%La\\n&quot;, a);</code>"}], "answers": [{"tags": [], "owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "is_accepted": true, "score": 2, "last_activity_date": 1510159635, "creation_date": 1510159635, "answer_id": 47185250, "question_id": 47185165, "link": "https://stackoverflow.com/questions/47185165/increase-long-double-accuracy/47185250#47185250", "title": "increase long double accuracy", "body": "<p>Floating Point Numbers have a limited precision. <a href=\"https://stackoverflow.com/questions/588004/is-floating-point-math-broken\">Mandatory Reading Here</a>.</p>\n\n<p>The <a href=\"http://www.boost.org/doc/libs/1_65_1/libs/multiprecision/doc/html/index.html\" rel=\"nofollow noreferrer\">boost.multiprecision</a> library can give you access to higher precision floating point numbers, whether in the form of <code>quad</code> types which simply double the precision of <code>double</code>, or in the form of arbitrary precision <code>rational</code> numbers. If you're willing to take the time to learn how to install and use that library, you'll be able to improve the precision of your numbers.</p>\n"}], "owner": {"reputation": 115, "user_id": 8795358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CqJbI.jpg?s=128&g=1", "display_name": "Tanhaeirad", "link": "https://stackoverflow.com/users/8795358/tanhaeirad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 340, "favorite_count": 0, "closed_date": 1510874651, "accepted_answer_id": 47185250, "answer_count": 1, "score": -4, "last_activity_date": 1510159635, "creation_date": 1510159356, "question_id": 47185165, "link": "https://stackoverflow.com/questions/47185165/increase-long-double-accuracy", "closed_reason": "Needs details or clarity", "title": "increase long double accuracy", "body": "<p>how can I increase accuracy in double.</p>\n\n<p>for example in this code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n\nint main() {\n    long double a = (long double) 5 / 3;\n    printf(\"%.62LLF\", a);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "string", "char"], "comments": [{"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1510159004, "post_id": 47184986, "comment_id": 81319062, "body": "<a href=\"https://en.wikipedia.org/wiki/C_string_handling\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/C_string_handling</a>"}, {"owner": {"reputation": 732, "user_id": 3779533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb7ceb7c47ce798288bf7e7baaa7129c?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan Sheigets", "link": "https://stackoverflow.com/users/3779533/ivan-sheigets"}, "edited": false, "score": 1, "creation_date": 1510159027, "post_id": 47184986, "comment_id": 81319078, "body": "when you use strcat it adds <code>\\0</code> at the end of new string, you must create <code>char b[2]</code>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1510159159, "post_id": 47184986, "comment_id": 81319163, "body": "<code>char b[1] = &quot; &quot;;  strcat(b,a);</code> --&gt; <code>char b[3] = &quot; &quot;; strncat(b, &amp;a, 1);</code> or <code>char b[2] = &quot;&quot;; strncat(b, &amp;a, 1);</code>"}], "answers": [{"tags": [], "owner": {"reputation": 1717, "user_id": 8690361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3678a10e6bc70a207a4a458c76b04c08?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/8690361/steve"}, "is_accepted": true, "score": 3, "last_activity_date": 1510158963, "creation_date": 1510158963, "answer_id": 47185012, "question_id": 47184986, "link": "https://stackoverflow.com/questions/47184986/how-can-i-convert-a-single-character-into-a-char-with-strlen-1/47185012#47185012", "title": "How can I convert a single character into a char* with strlen = 1?", "body": "<pre><code>#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n\nint main(){\n    char a = 'a';\n    char b[2] = \" \";\n    b[0] = a;\n    printf (\"%s\",b);\n    return 0;\n}\n</code></pre>\n\n<p>A c string is just an array of characters - if you want to set individual characters in that string, you can do so exactly as you would any other array.</p>\n\n<p>One thing you missed though is that c strings have to be 1 longer than the number of characters you want to store - to store the terminating <code>\\0</code>.</p>\n"}], "owner": {"reputation": 105, "user_id": 7028615, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/ji4FV.jpg?s=128&g=1", "display_name": "Frank Ponte", "link": "https://stackoverflow.com/users/7028615/frank-ponte"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 47185012, "answer_count": 1, "score": 0, "last_activity_date": 1510164770, "creation_date": 1510158895, "last_edit_date": 1510160182, "question_id": 47184986, "link": "https://stackoverflow.com/questions/47184986/how-can-i-convert-a-single-character-into-a-char-with-strlen-1", "title": "How can I convert a single character into a char* with strlen = 1?", "body": "<p>I've trying to do this but I can't find the right way. I have this :</p>\n\n<pre><code>#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n\nint main(){\n  char a = 'a';\n  char b[1] = \" \";\n  strcat(b,a);\n  printf (\"%s\",b);\n  return 0;\n}\n</code></pre>\n\n<p>I know it's wrong. How can I fix this code in order to turn <code>'a'</code> into <code>\"a\"</code> ?</p>\n"}, {"tags": ["c", "casting"], "comments": [{"owner": {"reputation": 559, "user_id": 3807750, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/bipKg.jpg?s=128&g=1", "display_name": "Shreyas", "link": "https://stackoverflow.com/users/3807750/shreyas"}, "edited": false, "score": 2, "creation_date": 1510157826, "post_id": 47184465, "comment_id": 81318246, "body": "Moral of the story: <b>PARENTHESES!</b> <i>facepalm</i>"}, {"owner": {"reputation": 559, "user_id": 3807750, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/bipKg.jpg?s=128&g=1", "display_name": "Shreyas", "link": "https://stackoverflow.com/users/3807750/shreyas"}, "edited": false, "score": 2, "creation_date": 1510158538, "post_id": 47184465, "comment_id": 81318753, "body": "And coffee....."}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1510158723, "post_id": 47184465, "comment_id": 81318874, "body": "can&#39;t <code>uint8_t</code> legally alias other types, anyways?  I feel the bit-masking and bit-shifting can be avoided if all you want is to access a <code>uint16_t</code> array as a <code>uint8_t</code> array."}, {"owner": {"reputation": 559, "user_id": 3807750, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/bipKg.jpg?s=128&g=1", "display_name": "Shreyas", "link": "https://stackoverflow.com/users/3807750/shreyas"}, "reply_to_user": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1510159014, "post_id": 47184465, "comment_id": 81319070, "body": "@ChristianGibbons I&#39;m not exactly sure if this is what you mean, but you can access a <code>uint16_t</code> as <code>uint8_t</code> with an implicit cast. It will chop off the higher byte. But you cannot automatically have it generate a <code>uint8_t</code> array of this kind."}, {"owner": {"reputation": 559, "user_id": 3807750, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/bipKg.jpg?s=128&g=1", "display_name": "Shreyas", "link": "https://stackoverflow.com/users/3807750/shreyas"}, "reply_to_user": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1510159213, "post_id": 47184465, "comment_id": 81319198, "body": "@ChristianGibbons Which part is chopped off also is probably system-dependent. It is hard to tell. Perhaps on <i>big-endian</i> systems, the lower byte is chopped off. Don&#39;t quote me on that, but it&#39;s probably true."}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 1, "creation_date": 1510164281, "post_id": 47184465, "comment_id": 81322419, "body": "So assuming you created a <code>uint8_t *</code> that pointed to the <code>uint16_t</code> array, there would not be a problem with them being cut off, as you could index the whole set of data with byte indexes (there would be twice as many elements in the <code>uint8_t</code> array).  But as you mentioned endianness, that did remind me that the order of the bytes would, in fact, be system dependent."}, {"owner": {"reputation": 15118, "user_id": 7258538, "user_type": "registered", "profile_image": "https://graph.facebook.com/10102111546405895/picture?type=large", "display_name": "Charles Srstka", "link": "https://stackoverflow.com/users/7258538/charles-srstka"}, "edited": false, "score": 1, "creation_date": 1510166733, "post_id": 47184465, "comment_id": 81323860, "body": "@ShreyasVinod Nope, C is smarter than that. If you cast a <code>uint16_t</code> to <code>uint8_t</code> on a big-endian system, you&#39;ll still chop off the more-significant byte. However, it is true that if you cast a *pointer*\u2014i.e. <code>uint16_t *</code> to <code>uint8_t *</code> on big-endian, you will indeed lose the less-significant byte when you dereference it."}], "answers": [{"comments": [{"owner": {"reputation": 559, "user_id": 3807750, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/bipKg.jpg?s=128&g=1", "display_name": "Shreyas", "link": "https://stackoverflow.com/users/3807750/shreyas"}, "edited": false, "score": 1, "creation_date": 1510157676, "post_id": 47184531, "comment_id": 81318131, "body": "Darn the missing parentheses. I knew it. <i>facepalm</i>"}], "tags": [], "owner": {"reputation": 6891, "user_id": 2204581, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1e49d077f4d914cfc9d81299a453fcd2?s=128&d=identicon&r=PG", "display_name": "mrks", "link": "https://stackoverflow.com/users/2204581/mrks"}, "is_accepted": false, "score": 3, "last_activity_date": 1510157644, "creation_date": 1510157644, "answer_id": 47184531, "question_id": 47184465, "link": "https://stackoverflow.com/questions/47184465/casting-in-c-gotchas/47184531#47184531", "title": "Casting in C: gotchas", "body": "<p>This is a question of operator precedence. In the first example, you are first converting to <code>uint8_t</code> and are applying the <code>&amp;</code> and <code>&gt;&gt;</code> operators second. In the second example, those are applied before the implicit conversion takes place.</p>\n"}, {"tags": [], "owner": {"reputation": 15118, "user_id": 7258538, "user_type": "registered", "profile_image": "https://graph.facebook.com/10102111546405895/picture?type=large", "display_name": "Charles Srstka", "link": "https://stackoverflow.com/users/7258538/charles-srstka"}, "is_accepted": true, "score": 4, "last_activity_date": 1510157672, "creation_date": 1510157672, "answer_id": 47184550, "question_id": 47184465, "link": "https://stackoverflow.com/questions/47184465/casting-in-c-gotchas/47184550#47184550", "title": "Casting in C: gotchas", "body": "<pre><code>write_buffer[(i*2)+1] = (uint8_t) sample_sensbus1[i] &gt;&gt; 8;\n</code></pre>\n\n<p>This is equivalent to:</p>\n\n<pre><code>write_buffer[(i*2)+1] = ((uint8_t) sample_sensbus1[i]) &gt;&gt; 8;\n</code></pre>\n\n<p>As you see, it does the cast before it does the shift. Your most significant byte is now gone.</p>\n\n<p>This should work, though:</p>\n\n<pre><code>write_buffer[(i*2)+1] = (uint8_t) (sample_sensbus1[i] &gt;&gt; 8);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 3, "last_activity_date": 1510157676, "creation_date": 1510157676, "answer_id": 47184552, "question_id": 47184465, "link": "https://stackoverflow.com/questions/47184465/casting-in-c-gotchas/47184552#47184552", "title": "Casting in C: gotchas", "body": "<p>Casting is a unary prefix operator and as such has very high precedence.</p>\n\n<pre><code>(uint8_t) sample_sensbus1[i] &amp; 0xff\n</code></pre>\n\n<p>parses as</p>\n\n<pre><code>((uint8_t)sample_sensbus1[i]) &amp; 0xff\n</code></pre>\n\n<p>In this case <code>&amp; 0xff</code> is redundant. But:</p>\n\n<pre><code>(uint8_t) sample_sensbus1[i] &gt;&gt; 8\n</code></pre>\n\n<p>parses as</p>\n\n<pre><code>((uint8_t)sample_sensbus1[i]) &gt;&gt; 8\n</code></pre>\n\n<p>Here the cast truncates the number to 8 bits, then <code>&gt;&gt; 8</code> shifts everything out.</p>\n"}, {"tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": false, "score": 4, "last_activity_date": 1510158816, "last_edit_date": 1510158816, "creation_date": 1510157712, "answer_id": 47184568, "question_id": 47184465, "link": "https://stackoverflow.com/questions/47184465/casting-in-c-gotchas/47184568#47184568", "title": "Casting in C: gotchas", "body": "<p>Your cast converts the <code>uint16_t</code> to <code>uint8_t</code> before it does the shift or mask.  It is treated as though you wrote:</p>\n\n<pre><code>write_buffer[ (i*2) ] = ((uint8_t)sample_sensbus1[i]) &amp; 0xff;\nwrite_buffer[(i*2)+1] = ((uint8_t)sample_sensbus1[i]) &gt;&gt; 8;\n</code></pre>\n\n<p>You might need:</p>\n\n<pre><code>write_buffer[ (i*2) ] = (uint8_t)(sample_sensbus1[i] &amp; 0xff);\nwrite_buffer[(i*2)+1] = (uint8_t)(sample_sensbus1[i] &gt;&gt; 8);\n</code></pre>\n\n<p>In practice, the uncast version is OK too.  Remember, a cast tells the compiler \"I know more about this than you do; do as I say\".  That's dangerous if you don't know more than the compiler.  Avoid casts whenever you can.</p>\n\n<p>You might also note that shifting (left or right) by the size of the type in bits (or more) is undefined behaviour.  However, the <code>((uint8_t)sample_sensbus[i]) &gt;&gt; 8</code> is not undefined behaviour, because of the 'usual arithmetic conversions' which mean that the result of <code>(uint8_t)sample_sensbus[i]</code> is converted to <code>int</code> before the shift occurs, and the size of an <code>int</code> cannot be 8 bits (it must be at least 16 bits to satisfy the standard), so the shift is not too big.</p>\n"}, {"tags": [], "owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "is_accepted": false, "score": 3, "last_activity_date": 1510158767, "last_edit_date": 1510158767, "creation_date": 1510157829, "answer_id": 47184596, "question_id": 47184465, "link": "https://stackoverflow.com/questions/47184465/casting-in-c-gotchas/47184596#47184596", "title": "Casting in C: gotchas", "body": "<p>The problem is in this expression:  </p>\n\n<pre><code>(uint8_t) sample_sensbus1[i] &gt;&gt; 8; \n</code></pre>\n\n<p>It is doing the following sequence:</p>\n\n<ol>\n<li>Converting the <code>sample_sensbus1[i]</code> to <code>uint8_t</code>, effectively <em>truncating</em> it to the 8 least significant bits. This is where you are losing your data.   </li>\n<li>Converting the above to <code>int</code> as a part of <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.3.1.8\" rel=\"nofollow noreferrer\">usual arithmetic conversions</a>, making an int with only 8 lower bits set.  </li>\n<li>Shifting the above <code>int</code> right <code>8</code> bits, effectively making the whole expression zero.</li>\n</ol>\n"}], "owner": {"reputation": 559, "user_id": 3807750, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/bipKg.jpg?s=128&g=1", "display_name": "Shreyas", "link": "https://stackoverflow.com/users/3807750/shreyas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "accepted_answer_id": 47184550, "answer_count": 5, "score": 3, "last_activity_date": 1510158816, "creation_date": 1510157440, "question_id": 47184465, "link": "https://stackoverflow.com/questions/47184465/casting-in-c-gotchas", "title": "Casting in C: gotchas", "body": "<p>I am programming an Atmel SAMD20 in C. I came upon an error, that I have now fixed, but I'm not quite sure why it happened in the first place. Can someone point it out to me? (it's probably far too obvious, and I'm going to facepalm later.)</p>\n\n<p>An array of sensors is generating <code>uint16_t</code> data, which I converted to <code>uint8_t</code> to send over I2C. So, this is how I originally wrote it:</p>\n\n<pre><code>for (i = 0; i &lt; SENSBUS1_COUNT; ++i)\n{\n  write_buffer[ (i*2) ] = (uint8_t) sample_sensbus1[i] &amp; 0xff;\n  write_buffer[(i*2)+1] = (uint8_t) sample_sensbus1[i] &gt;&gt; 8;\n}\n</code></pre>\n\n<p>Here, <code>write_buffer</code> is <code>uint8_t</code> and <code>sample_sensbus1</code> is <code>uint16_t</code>.</p>\n\n<p>This, for some reason, ends up messing up the most significant byte (in most cases, the most significant byte is just 1 (i.e. 0x100)). This, on the other hand, works fine, and is exactly what it should be:</p>\n\n<pre><code>for (i = 0; i &lt; SENSBUS1_COUNT; ++i)\n{\n  write_buffer[ (i*2) ] = sample_sensbus1[i] &amp; 0xff;\n  write_buffer[(i*2)+1] = sample_sensbus1[i] &gt;&gt; 8;\n}\n</code></pre>\n\n<p>Clearly, the implicit cast is smarter than I am.</p>\n\n<p>What is going on?</p>\n"}, {"tags": ["c", "multiprocessing", "fork"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1510157564, "post_id": 47184441, "comment_id": 81318055, "body": "If you want a child process to create 50 images,why not make it loop 50 times?"}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 2, "creation_date": 1510157689, "post_id": 47184441, "comment_id": 81318138, "body": "You are forking in a nested loop.  So while your outer loop decrements by the value of x each time, the inner loop then forks x times, so you&#39;ll make all forks.  I suspect you would probably really want an initial loop to create your x forks and then have each of those forks loop through and do their thing."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1510159346, "post_id": 47184441, "comment_id": 81319294, "body": "How can you tell the child process after it is launched to create 50 images?  I don&#39;t think you can \u2014 the command line tells it how to create one image, and you need a new command line for each image, so you have to create as many child processes as you have images.  Or you have to rewrite (extend) the <code>mandel</code> program to read a series of specifications from a file (or standard input), creating one image for each specification, or something along those lines.  IOW, I think that what you&#39;ve got is close to what you need \u2013 what you want is not attainable with the information available to us."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1510325370, "post_id": 47184441, "comment_id": 81400716, "body": "Note: 0...50 would be 51 images."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1510325787, "post_id": 47184441, "comment_id": 81401025, "body": "the posted code is missing the needed <code>#include</code> statements for <code>stdio.h</code>, <code>stdlib.h</code> and <code>unistd.h</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1510326219, "post_id": 47184441, "comment_id": 81401322, "body": "immediately after a call to <code>fork()</code> there can be 3 different conditions.  1) the call failed (returned value is -1)  2) the returned value is 0 (in child process) 3) the returned value is &gt;0 (in parent process).   Your code is not checking for those three conditions,"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1510326294, "post_id": 47184441, "comment_id": 81401384, "body": "the nested <code>for()</code> statements are nonsense.  For instance, what happens of the user enters 0?  what happens if the user enters 1?  what happens if the user enters 2?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1510326408, "post_id": 47184441, "comment_id": 81401477, "body": "the posted code contains a &#39;magic&#39; number.  &#39;magic&#39; numbers are numbers with no basis.  I.E. 50.  &#39;magic&#39; numbers make the code much more difficult to understand, debug, etc.  Suggest using a <code>#define</code> statement to give that &#39;magic&#39; number a meaningful name.  Then using that meaningful names throughout the code"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1510326548, "post_id": 47184441, "comment_id": 81401571, "body": "variable names should indicate <code>content</code> or <code>usage</code> (or better, both).  Names like &#39;x&#39; are meaningless, even in the current context."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1510326902, "post_id": 47184441, "comment_id": 81401837, "body": "the array &#39;argarry[]&#39; is always in the same location in memory, and always contains the same values (other than the &#39;str[]&#39; entry) so 1) all the child processes will be using the same memory so will &#39;see&#39; what ever the latest values in the &#39;argarryp[]&#39; contains. AND due to timing, etc will not necessarily see what the values were when the child process was created."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1510327182, "post_id": 47184441, "comment_id": 81402029, "body": "when calling any of the <code>scanf()</code> family of functions: always check the returned value to assure the operation was successful.  In the posted code, the call to &#39;scanf()&#39; should be: <code>if( 1 != scanf( &quot;%d&quot;, &amp;num ) ) { perror( &quot;scanf failed&quot; );</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1510327289, "post_id": 47184441, "comment_id": 81402099, "body": "the posted code is failing to wait for all the child processes to be completed before the <code>main</code> process exits."}], "answers": [{"comments": [{"owner": {"reputation": 670, "user_id": 4476122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af45909e3fd6f5ae28eedb58206eeaaf?s=128&d=identicon&r=PG", "display_name": "JustMe", "link": "https://stackoverflow.com/users/4476122/justme"}, "edited": false, "score": 0, "creation_date": 1510359770, "post_id": 47227018, "comment_id": 81416815, "body": "Not each header, you left <code>&lt;sys&#47;types.h&gt;</code> feeling lonely without comment :)"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "reply_to_user": {"reputation": 670, "user_id": 4476122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af45909e3fd6f5ae28eedb58206eeaaf?s=128&d=identicon&r=PG", "display_name": "JustMe", "link": "https://stackoverflow.com/users/4476122/justme"}, "edited": false, "score": 0, "creation_date": 1510394778, "post_id": 47227018, "comment_id": 81423568, "body": "@JustMe  The MAN page says to include &lt;sys/types.h&gt;  I&#39;m not sure why."}], "tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": true, "score": 0, "last_activity_date": 1510330625, "creation_date": 1510330625, "answer_id": 47227018, "question_id": 47184441, "link": "https://stackoverflow.com/questions/47184441/how-to-execute-multiple-tasks-in-one-child-process-in-fork/47227018#47227018", "title": "How to execute multiple tasks in one child process in fork()", "body": "<p>the following proposed code:</p>\n\n<ol>\n<li>incorporates the comments to the OPs question</li>\n<li>cleanly compiles</li>\n<li>demonstrates how perform a counted loop</li>\n<li>demonstrates how to check for errors returned from system functions <code>malloc()</code> and <code>scanf()</code></li>\n<li>demonstrates how to handle the returned value from <code>fork()</code></li>\n<li>demonstrates how to avoid 'magic' numbers</li>\n<li>documents why each header file is included</li>\n</ol>\n\n<p>and now the proposed code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;    // printf(), scanf(), perror()\n#include &lt;stdlib.h&gt;   // exit(), EXIT_FAILURE\n#include &lt;unistd.h&gt;   // fork(), execvp()\n#include &lt;sys/types.h&gt;\n#include &lt;sys/wait.h&gt; // waitpid()\n\n\n// prototypes\nvoid mandelseries(int);\n\n\n#define MAX_STR_LEN  15\n#define ARRAY_SIZE   16\n\n\nvoid mandelseries(int numImages)\n{\n    pid_t child[ numImages ];\n\n    for( int i = 0; i &lt; numImages; i++ )\n    {\n        child[i] = fork();\n        switch( child[i] )\n        {\n            case -1:\n                perror( \"fork failed\" );;\n                break;\n\n            case 0:   // child\n                {\n                    char **argarry = malloc( ARRAY_SIZE * sizeof( char* ) );\n                    if( !argarry )\n                    {\n                        perror( \"malloc for arg array failed\" );\n                        exit( EXIT_FAILURE );\n                    }\n\n                    // implied else, malloc successful\n\n                    // ... fill in arguments here\n\n                    execvp( argarry[0], argarry);\n                    perror( \"execvp failed\" );\n                    exit( EXIT_FAILURE );\n                }\n                break;\n\n            default:   // parent\n                break;\n        } // end switch()\n    }\n\n    for( int i=0; i &lt; numImages; i++ )\n    {\n        int status;\n\n        if( -1 != child[i] )\n        {\n            waitpid(child[i], &amp;status, 0);\n        }\n    }\n}\n\n\nint main( void )\n{\n    int numImages;\n    printf(\"Enter number of times:\");\n\n    if( 1 != scanf(\"%d\", &amp;numImages) )\n    {\n        perror( \"scanf failed\" );\n        exit( EXIT_FAILURE );\n    }\n\n    // implied else, scanf successful\n\n    mandelseries(numImages);\n    exit(0);\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 4198001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/612ac31460cd95c66f56fa37e442b61b?s=128&d=identicon&r=PG&f=1", "display_name": "Hari ", "link": "https://stackoverflow.com/users/4198001/hari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "accepted_answer_id": 47227018, "answer_count": 1, "score": 0, "last_activity_date": 1510358913, "creation_date": 1510157366, "last_edit_date": 1510358913, "question_id": 47184441, "link": "https://stackoverflow.com/questions/47184441/how-to-execute-multiple-tasks-in-one-child-process-in-fork", "title": "How to execute multiple tasks in one child process in fork()", "body": "<p>how to do multi-threading for this function with dynamic no of threads specified by the user</p>\n"}, {"tags": ["c", "debugging", "valgrind"], "comments": [{"owner": {"reputation": 3079, "user_id": 3035584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d3f84eebae0cfccb50e3be86dad24f1?s=128&d=identicon&r=PG&f=1", "display_name": "phd", "link": "https://stackoverflow.com/users/3035584/phd"}, "edited": false, "score": 0, "creation_date": 1510404378, "post_id": 47183870, "comment_id": 81426050, "body": "If you start gdb using  &#39;gdb &lt;your_application&gt;, then it is loading the debuginfo of your program at gdb start. If you start gdb without giving an argument, you must have a recent gdb and a recent valgrind to have gdb loading &lt;your_application&gt; debug info automatically. The message &#39;close from_pid&#39; is an error report by vgdb. It looks like you use valgrind on freebsd, which is not upstream. You might try to see what is happening in vgdb using vgdb --pid=xxxxxx -d -d -d 2&gt;v.out   and examining the v.out tracing."}], "owner": {"reputation": 130, "user_id": 4891461, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e05d76c0ace9c08a40e0a08e5367cdea?s=128&d=identicon&r=PG&f=1", "display_name": "quickblueblur", "link": "https://stackoverflow.com/users/4891461/quickblueblur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 311, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1510155776, "creation_date": 1510155776, "question_id": 47183870, "link": "https://stackoverflow.com/questions/47183870/debugging-children-using-valgrind", "title": "Debugging children using valgrind", "body": "<p>In short, <code>valgrind</code> is not producing line numbers for new processes, but it does show line numbers on the main application. Note, the main application and all newly spawned processes are the same application.</p>\n\n<p>I am running <code>valgrind</code> with the following command:</p>\n\n<pre><code>valgrind --leak-check=full --track-origins=yes --trace-children=yes --vgdb=yes --vgdb-error=0 ./myapp\n</code></pre>\n\n<p>I then run <code>gdb</code> to start the application.</p>\n\n<pre><code>gdb ./myapp\n(gdb) target remote | vgdb\n</code></pre>\n\n<p>While my application is running valgrind will output the following message when a new process is spawned.</p>\n\n<pre><code>==19414== (action at startup) vgdb me ... \n==19414== \n==19414== TO DEBUG THIS PROCESS USING GDB: start GDB like this\n==19414==   /path/to/gdb ./myapp\n==19414== and then give GDB the following command\n==19414==   target remote | /usr/local/lib/valgrind/../../bin/vgdb --pid=19414\n==19414== --pid is optional if only one valgrind process is running\n==19414== \n</code></pre>\n\n<p>Here's where I run into the issue. I open up a new instance of <code>gdb</code> and running the command. However, I get an error.</p>\n\n<pre><code>(gdb) target remote | /usr/local/lib/valgrind/../../bin/vgdb --pid=18920\nRemote debugging using | /usr/local/lib/valgrind/../../bin/vgdb --pid=18920\nrelaying data between gdb and process 18920\nReading symbols from /usr/local/lib/valgrind/vgpreload_core-amd64-freebsd.so...(no debugging symbols found)...done.\nReading symbols from /usr/local/lib/valgrind/vgpreload_memcheck-amd64-freebsd.so...(no debugging symbols found)...done.\nReading symbols from /usr/local/lib/libcurl.so.4...(no debugging symbols found)...done.\nReading symbols from /usr/local/lib/libjson-c.so.2...(no debugging symbols found)...done.\nReading symbols from /lib/libm.so.5...(no debugging symbols found)...done.\nReading symbols from /usr/local/lib/libpq.so.5...(no debugging symbols found)...done.\nReading symbols from /lib/libthr.so.3...(no debugging symbols found)...done.\nReading symbols from /lib/libc.so.7...(no debugging symbols found)...done.\nReading symbols from /usr/lib/libssl.so.7...(no debugging symbols found)...done.\nReading symbols from /usr/lib/libheimntlm.so.11...(no debugging symbols found)...done.\nReading symbols from /usr/lib/libhx509.so.11...(no debugging symbols found)...done.\nReading symbols from /usr/lib/libcom_err.so.5...(no debugging symbols found)...done.\nReading symbols from /lib/libcrypto.so.7...(no debugging symbols found)...done.\nReading symbols from /usr/lib/libasn1.so.11...(no debugging symbols found)...done.\nReading symbols from /usr/lib/libwind.so.11...(no debugging symbols found)...done.\nReading symbols from /usr/lib/libheimbase.so.11...(no debugging symbols found)...done.\nReading symbols from /usr/lib/libroken.so.11...(no debugging symbols found)...done.\nReading symbols from /lib/libcrypt.so.5...(no debugging symbols found)...done.\nReading symbols from /lib/libz.so.6...(no debugging symbols found)...done.\nReading symbols from /usr/lib/libkrb5.so.11...(no debugging symbols found)...done.\nReading symbols from /usr/lib/libgssapi.so.10...(no debugging symbols found)...done.\nReading symbols from /usr/lib/libgssapi_krb5.so.10...(no debugging symbols found)...done.\nReading symbols from /usr/local/lib/libintl.so.8...(no debugging symbols found)...done.\nReading symbols from /usr/lib/private/libheimipcc.so.11...(no debugging symbols found)...done.\nReading symbols from /libexec/ld-elf.so.1...(no debugging symbols found)...done.\n0x00000000059aaa2a in syscall () from /lib/libc.so.7\n(gdb) c\nContinuing.\nsyscall failed: Bad file descriptor\nclose from_pid\nRemote connection closed\n</code></pre>\n\n<p>So that tells me it's not finding debug information. <code>valgrind</code> was installed using a package so it wasn't configured for debug. However, I'm not seeing my application listed. I am seeing libraries I am using such as <code>libcurl</code> and <code>libjson-c</code>, but not my application.</p>\n\n<p>My next test was running <code>valgrind</code> without <code>gdb</code>.</p>\n\n<pre><code>valgrind --leak-check=full --track-origins=yes --trace-children=yes ./myapp\n</code></pre>\n\n<p>This time <code>valgrind</code> will produce the errors for new processes, but I am unable to see my line numbers of the new processes. I can see the line numbers when I get an error on the main application. I have a feeling not being able to debug the new process in <code>gdb</code> is because of the issue of not seeing line numbers without <code>gdb</code>.</p>\n"}, {"tags": ["c", "linux", "multithreading", "gdb"], "answers": [{"tags": [], "owner": {"reputation": 18871, "user_id": 1442050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e975c669f2ce0f2be4613f1e123864b3?s=128&d=identicon&r=PG", "display_name": "Tom Tromey", "link": "https://stackoverflow.com/users/1442050/tom-tromey"}, "is_accepted": false, "score": 1, "last_activity_date": 1510613914, "creation_date": 1510613914, "answer_id": 47274964, "question_id": 47182577, "link": "https://stackoverflow.com/questions/47182577/silence-gdb-switching-to-thread-output-messages/47274964#47274964", "title": "Silence gdb &quot;switching to thread&quot; output messages", "body": "<blockquote>\n  <p>Does anyone know of a way that I can get gdb to stop showing these Switching thread messages?</p>\n</blockquote>\n\n<p>There is no good way at present.</p>\n\n<p>If you're desperate, one idea would be to write wrappers for commands like <code>continue</code> that work by redirecting output to <code>/dev/null</code> (and then undoing the redirection somewhere, like in a stop hook).  This will cause you to miss any other gdb output as well though.</p>\n\n<p>It's worth filing a gdb bug report about this.</p>\n"}, {"tags": [], "owner": {"reputation": 1250, "user_id": 5381510, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/812f61d29f98b03786dc327a1bd16530?s=128&d=identicon&r=PG", "display_name": "Candide Guevara Marino", "link": "https://stackoverflow.com/users/5381510/candide-guevara-marino"}, "is_accepted": false, "score": 0, "last_activity_date": 1599055789, "creation_date": 1599055789, "answer_id": 63707393, "question_id": 47182577, "link": "https://stackoverflow.com/questions/47182577/silence-gdb-switching-to-thread-output-messages/63707393#63707393", "title": "Silence gdb &quot;switching to thread&quot; output messages", "body": "<p>I use gdb version 10.</p>\n<p><code>set print thread-events off</code></p>\n<p>Works for me. Links to the <a href=\"https://sourceware.org/gdb/onlinedocs/gdb/Threads.html\" rel=\"nofollow noreferrer\">documentation</a>.</p>\n"}], "owner": {"reputation": 31, "user_id": 2734338, "user_type": "registered", "profile_image": "https://graph.facebook.com/1383352468/picture?type=large", "display_name": "Matt Freeman", "link": "https://stackoverflow.com/users/2734338/matt-freeman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 415, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1599055789, "creation_date": 1510152250, "question_id": 47182577, "link": "https://stackoverflow.com/questions/47182577/silence-gdb-switching-to-thread-output-messages", "title": "Silence gdb &quot;switching to thread&quot; output messages", "body": "<p>I am currently debugging a multi-threaded application in Linux using gdb.  I'm getting a lot of noise in the output and am wondering if there is anything I can do to silence it.<br>\nI'm getting a lot of these: \"[Switching to Thread ~~ (LWP ~~)]\"\nI have used the 'set print thread-events off', but that only seems to catch the start/stop of the thread.<br>\nDoes anyone know of a way that I can get gdb to stop showing these Switching thread messages?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1510152665, "post_id": 47182554, "comment_id": 81314265, "body": "Only one kind of number exists in computers and that is binary numbers. Everything else is <i>user presentations of binary numbers</i>.   Therefore it doesn&#39;t make sense to &quot;convert from octal to binary&quot; etc, because every variable in your C program is binary, always.   What you can do is to use another number base when you need to take a number from the user, or present a number to the user. For example you can read a number that the user prints in octal using <code>scanf(&quot;%o&quot;, &amp;octalNumber);</code> and you can display a number as octal using <code>printf(%o&quot;, octalNumber);</code>."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1510152780, "post_id": 47182554, "comment_id": 81314361, "body": "And this is the reason why we read/write &quot;plain&quot; integers with <code>%d</code>, which stands for decimal, base 10. Meaning that the input/output will be in decimal format."}, {"owner": {"reputation": 9, "user_id": 8907460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/babd0d449a2ac2bb68e15fb252caa15f?s=128&d=identicon&r=PG&f=1", "display_name": "Abhijit Reddy", "link": "https://stackoverflow.com/users/8907460/abhijit-reddy"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1510152852, "post_id": 47182554, "comment_id": 81314413, "body": "the problem is that given a octal number by a user, we need to show the highest hexadecimal digit in the octal"}, {"owner": {"reputation": 9, "user_id": 8907460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/babd0d449a2ac2bb68e15fb252caa15f?s=128&d=identicon&r=PG&f=1", "display_name": "Abhijit Reddy", "link": "https://stackoverflow.com/users/8907460/abhijit-reddy"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1510152904, "post_id": 47182554, "comment_id": 81314470, "body": "So i have a function that takes the given octal, converts to binary and displays it at hexa"}, {"owner": {"reputation": 9, "user_id": 8907460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/babd0d449a2ac2bb68e15fb252caa15f?s=128&d=identicon&r=PG&f=1", "display_name": "Abhijit Reddy", "link": "https://stackoverflow.com/users/8907460/abhijit-reddy"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1510152933, "post_id": 47182554, "comment_id": 81314488, "body": "Now could you tell me how to store this %lx and display the max of this?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1510152996, "post_id": 47182554, "comment_id": 81314539, "body": "What is &quot;the highest hex digit in the octal&quot; even supposed to mean? That can be interpreted in many different ways."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1510153063, "post_id": 47182554, "comment_id": 81314587, "body": "Your question makes little sense or it is very poorly worded. Maybe you should show us some examples of input and expected output."}, {"owner": {"reputation": 9, "user_id": 8907460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/babd0d449a2ac2bb68e15fb252caa15f?s=128&d=identicon&r=PG&f=1", "display_name": "Abhijit Reddy", "link": "https://stackoverflow.com/users/8907460/abhijit-reddy"}, "edited": false, "score": 0, "creation_date": 1510153887, "post_id": 47182554, "comment_id": 81315282, "body": "Okay say the user inputs a octal 543 which converts to 163 in hexadecimal. I need to be able to print 6 as the output. In the code, I run a function to convert 543 to binary and then to hexadecimal. The function to convert 543 to hexadecimal stores the value as 355 and to get the hex value I use %ld. Now when I run the largest function which picks the largest digit, I get the output to be 5. I need to be able to run this function on 163 instead"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1510154803, "post_id": 47182554, "comment_id": 81316021, "body": "@AbhijitReddy please <a href=\"https://stackoverflow.com/posts/47182554/edit\">edit</a> your question and put all relevant information <i>there</i>"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1510154833, "post_id": 47182554, "comment_id": 81316051, "body": "Your format specifiers for <code>printf</code> are wrong. <code>number</code> is <code>long long</code> while <code>large</code> ist not long at all. You might want to check your <code>l</code>prefixes."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1510154851, "post_id": 47182554, "comment_id": 81316063, "body": "You probably need to use <code>sprintf()</code> to format the hex value into a string.  You can then analyze the string to find the largest hex digit, and you can also print the string, of course."}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1510154853, "post_id": 47182554, "comment_id": 81316064, "body": "You&#39;re probably best of converting into strings."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1510155271, "post_id": 47182554, "comment_id": 81316405, "body": "@AbhijitReddy so your problem actually boils down to two questions: <b>1</b> : <i>How can I find the largest digit of the hexadecimal representation of a number?</i> <b>2</b> : <i>How can I read a number the user enters in octal ?</i> Please confirm."}, {"owner": {"reputation": 3310, "user_id": 1853605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ab8d886abc51e874c1ed067b912ddd?s=128&d=identicon&r=PG", "display_name": "Potato", "link": "https://stackoverflow.com/users/1853605/potato"}, "edited": false, "score": 0, "creation_date": 1510157571, "post_id": 47182554, "comment_id": 81318060, "body": "p=Hex; why is that for ?"}], "answers": [{"tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": false, "score": 1, "last_activity_date": 1510156056, "creation_date": 1510156056, "answer_id": 47183954, "question_id": 47182554, "link": "https://stackoverflow.com/questions/47182554/how-to-find-the-largest-digit-of-a-given-number/47183954#47183954", "title": "How to find the largest digit of a given number", "body": "<p>You probably want this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nchar largestdigit(const char *buffer)\n{\n  char largest = 0;       // largest digit (initially 0)\n\n  char c;\n  while (c = *buffer++)   // loop until we reach end of string\n  {\n    if (c &gt; largest)\n      largest = c;\n  }\n\n  return largest;\n}\n\nint main()\n{\n  int number;\n  printf(\"Enter an octal number: \");\n  scanf(\"%o\", &amp;number);                  // read number entered in octal\n\n  char hexbuffer[50];\n  sprintf(hexbuffer, \"%x\", number);      // output number in hexadecimal to hexbuffer\n\n  char large = largestdigit(hexbuffer);  // find largest digit in hexbuffer\n  printf(\"largest digit of hexadecimal representation (%x) of octal number %o : %c\\n\", number, number, largestdigit(hexbuffer));\n}\n</code></pre>\n\n<p>Sample run:</p>\n\n<pre><code>Enter an octal number: 543\nlargest digit of hexadecimal representation (163) of octal number 543 : 6\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1712, "user_id": 369446, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zO6tb.jpg?s=128&g=1", "display_name": "Michael Shopsin", "link": "https://stackoverflow.com/users/369446/michael-shopsin"}, "edited": false, "score": 0, "creation_date": 1510238883, "post_id": 47183998, "comment_id": 81358145, "body": "You can compare any numeric type in C, though you might have to coerce a <code>float</code> to compare to an <code>int</code>. Since <code>long</code> and <code>int</code> are both fixed types you can compare them directly."}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "reply_to_user": {"reputation": 1712, "user_id": 369446, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zO6tb.jpg?s=128&g=1", "display_name": "Michael Shopsin", "link": "https://stackoverflow.com/users/369446/michael-shopsin"}, "edited": false, "score": 0, "creation_date": 1510239676, "post_id": 47183998, "comment_id": 81358746, "body": "@MichaelShopsin True, but what is the point?"}], "tags": [], "owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "is_accepted": false, "score": 1, "last_activity_date": 1510158303, "last_edit_date": 1510158303, "creation_date": 1510156191, "answer_id": 47183998, "question_id": 47182554, "link": "https://stackoverflow.com/questions/47182554/how-to-find-the-largest-digit-of-a-given-number/47183998#47183998", "title": "How to find the largest digit of a given number", "body": "<p>I would say that you have completely wrong approach.</p>\n\n<p>First, storing representations in number types makes no sense, unless you really need high performance. It is likely to cause bugs though. <code>int</code> stores a <em>number</em> and not it's representation. You can however tell <code>scanf</code> to treat the input as an octal number. Just use <code>scanf(\"%o\", &amp;var)</code>.</p>\n\n<p>If the problem is to find the biggest digit, you're much better of converting it into a digit array, aka a string representation. Here is some code that converts an int to a string in an arbitrary base.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n/* Will work for base 2-36. Well, it works for higher bases too, but \n   it can be iffy to interpret the result. */\nvoid intToStr(int number, int base,  char * dest)\n{\n    int index = 0;\n    while (number != 0) {\n        int rem=number%base;\n        char digit = rem&gt;9 ? rem+'a'-10 : rem+'0';\n        dest[index++]=digit;\n        number/=base;\n    }\n    dest[index]='\\0';\n    for(int i=0; i&lt;index-1; i++) {\n        char tmp = dest[i];\n        dest[i]=dest[index-i-1];\n        dest[index-i-1]=tmp;\n    }\n}\n\nchar highestDigit(const char *str)\n{\n    char c=str[0];\n    int index=0;\n    while(str[index]) {\n        c=c&lt;str[index] ? str[index] : c;\n        index++;\n    }\n    return c;\n}\n\nint main()\n{\n    char str[100];\n    int n;\n    printf(\"Enter a octal number: \");\n    scanf(\"%o\", &amp;n);\n\n    printf(\"\\nBase Value Highest digit\\n\");        \n    for(int i=2; i&lt;17; i++) {\n        intToStr(n, i, str);\n        printf(\"%d: %s %c\\n\", i, str, highestDigit(str));\n    }\n}\n</code></pre>\n\n<p>Some output:</p>\n\n<pre><code>$ ./a.out \nEnter an octal number: 100\n\nBase Value Highest digit\n2: 1000000 1\n3: 2011 2\n4: 1000 1\n5: 224 4\n6: 144 4\n7: 121 2\n8: 100 1\n9: 71 7\n10: 64 6\n11: 59 9\n12: 54 5\n13: 4c c\n14: 48 8\n15: 44 4\n16: 40 4\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 8907460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/babd0d449a2ac2bb68e15fb252caa15f?s=128&d=identicon&r=PG&f=1", "display_name": "Abhijit Reddy", "link": "https://stackoverflow.com/users/8907460/abhijit-reddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 576, "favorite_count": 1, "closed_date": 1510179515, "answer_count": 2, "score": 0, "last_activity_date": 1510158303, "creation_date": 1510152172, "last_edit_date": 1510153159, "question_id": 47182554, "link": "https://stackoverflow.com/questions/47182554/how-to-find-the-largest-digit-of-a-given-number", "closed_reason": "Needs details or clarity", "title": "How to find the largest digit of a given number", "body": "<p>My problem is that I am converting a given octal number to binary and the binary to a hexadecimal. And to display the hexadecimal, I am using %lx. but I want to find the largest of this hexadecimal. Is there a way I can store the %lx value and then run the largest function?</p>\n\n<pre><code>long long convertOctalToBinary(int octalNumber);\nint convertBinarytoHex(long long binary);\nint largest(long int hex);\n\nint main()\n{\nint octalNumber;\nlong long number;\nlong int result;\nint temp;\nint large;\n\n\nprintf(\"Enter an octal number: \");\nscanf(\"%d\", &amp;octalNumber);\nnumber = convertOctalToBinary(octalNumber);\nprintf(\"number : %d\\n\", number);\nresult = convertBinarytoHex(number);\nprintf(\"result : %lX\\n\", result);\nlarge = largest(temp);\nprintf(\"large : %lX\\n\", large);\n}\n\n\n\nint convertBinarytoHex(long long number)\n{\n\nlong int hexvalue = 0;\nint i = 1;\nint r; //declare variables\n\nwhile (number != 0) //if binary number is not equal to 0 then following instructions will execute\n{\n    r = number % 10; //by performing modulo we get remainder\n    hexvalue = hexvalue + r * i; //for first digit i =1 as binavalue*2^0,binvalue*2^1\n    i = i * 2; //i value multiplied with 2 for next iteration,for next iterations it becmoes 2^1,2^2,2^3\n    number = number / 10; //now get reamaing binary value\n}\nreturn hexvalue;\n}\n\nint largest(long int hex)\n{\n int p,i=0,digit,large=0;//variables\n\n p=hex;//storing original value entered by user to variable p\n\n while(hex&gt;0)\n {\n    digit=hex%10;//finding digit\n\n    if(digit&gt;large)//checking condition for large\n    large=digit;\n\n hex = hex / 10;//dividing number by 10\n }\n\n return large;\n }\n</code></pre>\n"}, {"tags": ["c", "proc"], "comments": [{"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1510152942, "post_id": 47182227, "comment_id": 81314498, "body": "Please post your code, otherwise we can only guess at what the problem might be.  Are you not using a cursor to retrieve rows?"}, {"owner": {"reputation": 65, "user_id": 6025941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fo2Vv.jpg?s=128&g=1", "display_name": "python lover", "link": "https://stackoverflow.com/users/6025941/python-lover"}, "reply_to_user": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1510155205, "post_id": 47182227, "comment_id": 81316359, "body": "i have added my code ."}], "owner": {"reputation": 65, "user_id": 6025941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fo2Vv.jpg?s=128&g=1", "display_name": "python lover", "link": "https://stackoverflow.com/users/6025941/python-lover"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 273, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1510155126, "creation_date": 1510151154, "last_edit_date": 1510155126, "question_id": 47182227, "link": "https://stackoverflow.com/questions/47182227/how-to-do-batch-processing-in-proc", "title": "How to do batch processing in Pro*c", "body": "<p><code>enter code here</code>I want to do batch processing using host array in pro c. But when the records are not equal to array length*n (n is 1 ,2 ,3 ...) then my program is failed to fetched row.</p>\n\n<p>I dont know how to fetch remaining records.<code>\n int empid[20];\n my table contains 24 records.\nso after 1st fetch its showing error.</code><br>\n    void print_rows(n)\n    int n;\n    {\n        int i;</p>\n\n<pre><code>    printf(\"\\nNumber  Employee  Salary\");\n    printf(\"\\n------  --------  -------\\n\");\n\n    for (i = 0; i &lt; n; i++)\n    printf(\"%d    %s  %8.2f\\n\", emp_rec.emp_number[i],\n           emp_rec.emp_name[i], emp_rec.salary[i]);\n\n}  \n\nvoid  main()\n{\n    int  num_ret;               /* number of rows returned */\n\n\n    EXEC SQL WHENEVER SQLERROR DO sql_error(\"Oracle error:\");\n/* Declare a cursor for the FETCH. */\n    EXEC SQL DECLARE c1 CURSOR FOR\n        SELECT empno, ename, sal FROM emp;\n\n    EXEC SQL OPEN c1;\n\n/* Initialize the number of rows. */\nnum_ret = 0;\n\n/* Array fetch loop - ends when NOT FOUND becomes true. */\nEXEC SQL WHENEVER NOT FOUND DO break;\n\nfor (;;)\n{\n    EXEC SQL FETCH c1 INTO :emp_rec;\n\n/* Print however many rows were returned. */\n    print_rows(sqlca.sqlerrd[2] - num_ret);\n    num_ret = sqlca.sqlerrd[2];        /* Reset the number. */\n}\n\n/* Print remaining rows from last fetch, if any. */\nif ((sqlca.sqlerrd[2] - num_ret) &gt; 0)\n    print_rows(sqlca.sqlerrd[2] - num_ret);\n\nEXEC SQL CLOSE c1;\n\n/* Disconnect from the database. */\nEXEC SQL COMMIT WORK RELEASE;\nexit(EXIT_SUCCESS);\n}`\n</code></pre>\n\n<p>`</p>\n\n<p>Please help me how to fetch remaining records using pro c </p>\n"}, {"tags": ["c", "gcc"], "comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1510150767, "post_id": 47182011, "comment_id": 81312931, "body": "It is not allowed to write <code>print.exe</code> in the <i>current folder</i>. Presumably you should try to compile the code in a folder that would be writable..."}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1510150933, "post_id": 47182011, "comment_id": 81313039, "body": "Make sure your virus checker isn&#39;t blocking it."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1510151619, "post_id": 47182011, "comment_id": 81313552, "body": "One of many reasons to avoid recursion is that it tends to become an unreadable mess. Did you realize that your function could be written much more readable, as <code>void print(int x) { if(x!=1)   {     print(x-1);   }   printf(&quot;%d\\n&quot;,x); }</code>. Of course in either case, there won&#39;t be tail recursion so the only thing achieved was to write the equivalent to a plain loop, but in a horribly inefficient way."}], "answers": [{"comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1510150960, "post_id": 47182130, "comment_id": 81313056, "body": "Not sure it&#39;s that here - that code will run in the blink of an eye, even when compiled with turbo C !"}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1510151051, "post_id": 47182130, "comment_id": 81313109, "body": "@Bathsheba.: But I have got this error so many times for the same reason I posted....I did this and it wokred,"}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1510151368, "post_id": 47182130, "comment_id": 81313366, "body": "@Bathsheba.: What you have said is right...but for tha t it wont show...<code>open output file print.exe: Permission denied collect2.exe: error: ld returned 1 exit status</code>"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1510151441, "post_id": 47182130, "comment_id": 81313416, "body": "I&#39;ll upvote in good faith; nobody has demonstrated that this is not correct."}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1510151592, "post_id": 47182130, "comment_id": 81313525, "body": "@Bathsheba.: But really they ask the question then don&#39;t stay for even sometime to verify the answer. Most of the time this is the solution."}], "tags": [], "owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "is_accepted": true, "score": 1, "last_activity_date": 1510151102, "last_edit_date": 1510151102, "creation_date": 1510150861, "answer_id": 47182130, "question_id": 47182011, "link": "https://stackoverflow.com/questions/47182011/mingw-gcc-compiler-is-giving-an-error-which-i-m-unable-to-understand-when-i-m-t/47182130#47182130", "title": "mingw gcc compiler is giving an error which i m unable to understand, when i m trying to print 1- 10 numbers using recursion", "body": "<p>You have to kill the existing process that is running. kill the <code>print.exe</code> process an it will be accessible or simply close the <code>command prompt window</code> which opened the execution instance.</p>\n"}], "owner": {"reputation": 157, "user_id": 8485201, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nUKG3.jpg?s=128&g=1", "display_name": "Namrata Shukla", "link": "https://stackoverflow.com/users/8485201/namrata-shukla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 47182130, "answer_count": 1, "score": -2, "last_activity_date": 1510151102, "creation_date": 1510150581, "question_id": 47182011, "link": "https://stackoverflow.com/questions/47182011/mingw-gcc-compiler-is-giving-an-error-which-i-m-unable-to-understand-when-i-m-t", "title": "mingw gcc compiler is giving an error which i m unable to understand, when i m trying to print 1- 10 numbers using recursion", "body": "<p>the following error shows ,when i try to compile the source code</p>\n\n<pre><code>C:/Program Files (x86)/mingw-w64/i686-7.1.0-posix-dwarf-rt_v5-rev2/mingw32/bin/.\n./lib/gcc/i686-w64-mingw32/7.1.0/../../../../i686-w64-mingw32/bin/ld.exe: cannot\n open output file print.exe: Permission denied\ncollect2.exe: error: ld returned 1 exit status\n</code></pre>\n\n<p>the code of my program is given below </p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nvoid print(int x)\n {\n  if(x==1)\n  {\n   printf(\"%d\\n\", x);\n   return;\n  }\n else\n{\n print(x-1);\n printf(\"%d\\n\",x);\n}\n}\n void main()\n{\nprint(10);\n} \n</code></pre>\n\n<p>it is working fine in Turbo C.\nwhat kind of error it is ? how can I correct it?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 2375, "user_id": 3985859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34af6d164c53c629e625c11a3d11bbcc?s=128&d=identicon&r=PG&f=1", "display_name": "Karsten Koop", "link": "https://stackoverflow.com/users/3985859/karsten-koop"}, "edited": false, "score": 0, "creation_date": 1510150411, "post_id": 47181828, "comment_id": 81312664, "body": "the beginning of the line would be <code>b==0</code>, why don&#39;t you just test for that?"}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1510150425, "post_id": 47181828, "comment_id": 81312676, "body": "For width w and height h:  (1) print the first line, which is w <code>#</code>  (2) print the middle h-2 lines, which are (a) one <code>#</code>, (b) w-2 spaces, (c) one <code>#</code>  (3) print the last line, which is w <code>#</code>.  Done."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1510155546, "post_id": 47181828, "comment_id": 81316585, "body": "The use of <code>for (...) { {</code> with two statement blocks is unusual.  Not technically wrong, but no experienced C programmer would write that.  They would probably put the inner <code>{</code> and <code>}</code>  around the body of the inner <code>for</code> loop (though that too isn&#39;t technically necessary at the moment).  When fixing logic (as opposed to cosmetics), you&#39;ll need to think what happens if the user enters a height of 2, or 1, or indeed 0 or a negative number, or if the user types &#39;elephant&#39; instead of a number.  Similarly for the width."}], "answers": [{"tags": [], "owner": {"reputation": 96, "user_id": 1182907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b8c06ab9870e783d094d7b03737fa9e?s=128&d=identicon&r=PG", "display_name": "Loomchild", "link": "https://stackoverflow.com/users/1182907/loomchild"}, "is_accepted": false, "score": 0, "last_activity_date": 1510151749, "last_edit_date": 1510151749, "creation_date": 1510150539, "answer_id": 47181998, "question_id": 47181828, "link": "https://stackoverflow.com/questions/47181828/how-do-i-define-the-frame-of-my-rectangle-in-c/47181998#47181998", "title": "How do I define the frame of my rectangle in C", "body": "<p>Printing a '#' before and after the whitespaces is a special case and can be handled outside the loop.\nOne way to handle this would be something like the following pseudo-code :</p>\n\n<ul>\n<li>loop on lines\n\n<ul>\n<li>print a '#'</li>\n<li>loop on columns from 1 to N-2 (instead of 0 to N-1)\n\n<ul><li>print a '#' on first and last lines, print a '&emsp;' on all other lines</li></ul></li>\n<li>print a '#'</li>\n</ul></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "is_accepted": false, "score": 0, "last_activity_date": 1510151008, "creation_date": 1510151008, "answer_id": 47182191, "question_id": 47181828, "link": "https://stackoverflow.com/questions/47181828/how-do-i-define-the-frame-of-my-rectangle-in-c/47182191#47182191", "title": "How do I define the frame of my rectangle in C", "body": "<p>It boils down to two things:</p>\n\n<ol>\n<li><p>How to get the pattern?</p></li>\n<li><p>How to write the usable code to generate those pattern?</p></li>\n</ol>\n\n<p>You can try these to get the answer.</p>\n\n<p>For the pattern you will see the first and last row will always be same. Printing the w characters.</p>\n\n<p>Now what is the special thing about the other rows? Only prints two characters. Rest are spaces.</p>\n\n<ul>\n<li><p>How many characters there are in a row? <code>w</code>.</p></li>\n<li><p>If 2 of them are <code>*</code>..how many are spaces? <code>w-2</code>.</p></li>\n<li><p>How many lines are there? <code>h</code>.</p>\n\n<ol start=\"2\">\n<li>what is the main thing here? Printing characters.</li>\n</ol></li>\n</ul>\n\n<p>So write a method where you will print the character <code>c</code> n times. And reuse it to print <code>' '</code> or<code>*</code>. </p>\n\n<h3>Code</h3>\n\n<pre><code>void printer(int count,char c){\n    for(int i=0;i&lt;count;i++)\n        printf(\"%c\",c);\n}\nint main(){\n    int width,height;\n    scanf(\"%d%d\",&amp;width,&amp;height);\n    for(int i=0;i&lt;height;i++){\n        if(i == 0) printer(width,'*');\n        else if( i &lt; h-1)printer(1,'*'),printer(height-2,' '),printer(1,'*');\n        else  printer(width,'*');\n        puts(\"\");\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 8907199, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcf2654331230a49433c1f02842f7184?s=128&d=identicon&r=PG&f=1", "display_name": "Lukas Wegner", "link": "https://stackoverflow.com/users/8907199/lukas-wegner"}, "edited": false, "score": 0, "creation_date": 1510152616, "post_id": 47182363, "comment_id": 81314230, "body": "do i need to nest the second if else condition? cause i tried it without and get all the output in the first line. And if i need to nest it could you explain me why?"}, {"owner": {"reputation": 21, "user_id": 8907199, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcf2654331230a49433c1f02842f7184?s=128&d=identicon&r=PG&f=1", "display_name": "Lukas Wegner", "link": "https://stackoverflow.com/users/8907199/lukas-wegner"}, "edited": false, "score": 0, "creation_date": 1510152865, "post_id": 47182363, "comment_id": 81314422, "body": "oh yeah you&#39;re right the syntax was wrong but the program compiled even with the wrong syntax btw im using visual studio 2k15"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 21, "user_id": 8907199, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcf2654331230a49433c1f02842f7184?s=128&d=identicon&r=PG&f=1", "display_name": "Lukas Wegner", "link": "https://stackoverflow.com/users/8907199/lukas-wegner"}, "edited": false, "score": 0, "creation_date": 1510152956, "post_id": 47182363, "comment_id": 81314518, "body": "Not sure my last comment (deleted) captured the error correctly.  I am looking at it now...."}, {"owner": {"reputation": 21, "user_id": 8907199, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcf2654331230a49433c1f02842f7184?s=128&d=identicon&r=PG&f=1", "display_name": "Lukas Wegner", "link": "https://stackoverflow.com/users/8907199/lukas-wegner"}, "edited": false, "score": 0, "creation_date": 1510153040, "post_id": 47182363, "comment_id": 81314568, "body": "where do i have to add the \\n because if i write it in the first if-else condition like printf(&quot;#\\n&quot;); it would make a break after each &quot;#&quot; also in the first line or?"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 21, "user_id": 8907199, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcf2654331230a49433c1f02842f7184?s=128&d=identicon&r=PG&f=1", "display_name": "Lukas Wegner", "link": "https://stackoverflow.com/users/8907199/lukas-wegner"}, "edited": false, "score": 0, "creation_date": 1510155718, "post_id": 47182363, "comment_id": 81316709, "body": "@LukasWegner - I worked it out.  I was using <code>width</code> or <code>height</code> sometimes I should have been using the opposite.  The loop shown should get you there.  Replace that section in your code and test it out.  Note the &quot;\\n&quot; is outside the inner loop."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1510156006, "post_id": 47182363, "comment_id": 81316901, "body": "In the <code>else if ((b == 0)||(b == (width-1)))</code> section, you could avoid the inner condition since you print the same thing regardless, could you not?  Also, the inner condition in the <code>else</code> clause is unnecessary; the cases where a <code>#</code> would be printed have been captured by the outer <code>if</code> and <code>else if</code> statements, have they not?  Also, note that the odd bracing in the code is not wrong AFAICS; it is just very aconventional."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1510157666, "post_id": 47182363, "comment_id": 81318123, "body": "@JonathanLeffler - Yes, thank you!  I was actually looking at that as you were commenting, and noticed the redundancy.  Have edited out the middle section."}], "tags": [], "owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "is_accepted": false, "score": 2, "last_activity_date": 1510174696, "last_edit_date": 1510174696, "creation_date": 1510151636, "answer_id": 47182363, "question_id": 47181828, "link": "https://stackoverflow.com/questions/47181828/how-do-i-define-the-frame-of-my-rectangle-in-c/47182363#47182363", "title": "How do I define the frame of my rectangle in C", "body": "<p>Your algorithm looks fundamentally close. (although there are some syntax problems that may result in unexpected results) In your code snippet, you have two open curly brackets following each other.  The second should probably follow the <code>for</code> statement:  </p>\n\n<pre><code>   // { ///move this...\n        for (b = 0; b != width; b++)\n        {// ...here\n            if ((a == 0))\n            {\n                printf(\"#\");\n            }\n            else\n            {\n                printf(\"\");\n            }\n\n   /*-&gt;*/}  // aligned with its mate above\n</code></pre>\n\n<p>In the algorithm part, you just need to include the end points in each of the condition statements.  The following is a compileable example of how to implement:</p>\n\n<pre><code>int main()\n{\n    int height;\n    int width;\n    int a;\n    int b;\n    char q = 'a';\n\n    while (q != 'q')\n    {\n\n        printf(\"Height of rectangle? \");\n        scanf(\" %d\", &amp;height);\n\n        printf(\"Width of rectangle? \");\n        scanf(\" %d\", &amp;width);\n\n\n        for (a = 0;a &lt; height;a++)\n        {\n                for (b = 0; b &lt; width; b++)\n                {\n\n                    if((a==0)||(a==(height-1))) // top and bottom lines\n                    {\n                        printf(\"#\");\n                    }\n                    else //all other lines\n                    {\n                         if((b==0) || (b==(width-1))) printf(\"#\");\n                         else printf(\" \");\n                    }               \n                }\n                printf(\"\\n\"); // end of each line\n\n        }\n        printf(\"\\n\\nEnter q to quit, or any other key to Continue:\\n\");\n        scanf(\" %c\", &amp;q);\n    }\n    return 0; // should always include a return value for a non-void function, such as this one\n}\n</code></pre>\n\n<p>The syntax problem is with the curly braces.  <code>{for()...  }</code> for the inner loop are placed incorrectly.  Should be <code>for(){...}</code></p>\n"}, {"comments": [{"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1510174826, "post_id": 47184828, "comment_id": 81328503, "body": "It is refreshing to see there are apparently still people on this site who enjoy solving problems! (as opposed to complaining they are too elementary to bother with)"}, {"owner": {"reputation": 21, "user_id": 8907199, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcf2654331230a49433c1f02842f7184?s=128&d=identicon&r=PG&f=1", "display_name": "Lukas Wegner", "link": "https://stackoverflow.com/users/8907199/lukas-wegner"}, "edited": false, "score": 0, "creation_date": 1510225998, "post_id": 47184828, "comment_id": 81349144, "body": "thanks for your solution man but some of the code you used i havent had before in my lectures"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1510238884, "post_id": 47184828, "comment_id": 81358148, "body": "There\u2019s always that risk.  Using functions other than <code>main()</code> is important, but it isn\u2019t clear when you learn it. Making code parameter-driven is important.  Testing degenerate and near-degenerate cases is very important.  Doing it without unnecessary user interaction is important.  Think of it as a foretaste of things to come."}], "tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": false, "score": 1, "last_activity_date": 1510158457, "creation_date": 1510158457, "answer_id": 47184828, "question_id": 47181828, "link": "https://stackoverflow.com/questions/47181828/how-do-i-define-the-frame-of-my-rectangle-in-c/47184828#47184828", "title": "How do I define the frame of my rectangle in C", "body": "<p>I'll offer a solution that is perhaps more complex on the surface, but that has great flexibility:</p>\n\n<pre><code>#include &lt;assert.h&gt;\n#include &lt;stdio.h&gt;\n\nstatic void draw_line(int width, char end, char middle)\n{\n    assert(width &gt; 0);\n    int w = 0;\n    putchar(end);\n    for (w = 1; w &lt; width - 1; w++)\n        putchar(middle);\n    if (w &lt; width)\n        putchar(end);\n    putchar('\\n');\n}\n\nstatic void draw_rectangle(int height, int width, char border, char fill)\n{\n    assert(height &gt; 0);\n    for (int h = 0; h &lt; height; h++)\n        draw_line(width, border, (h == 0 || h == height - 1) ? border : fill);\n}\n\nstatic void test_drawing(int height, int width)\n{\n    printf(\"%dx%d:\\n\", height, width);\n    draw_rectangle(height, width, '#', ' ');\n    putchar('\\n');\n}\n\nint main(void)\n{\n    // Testing small sizes, including degenerate cases\n    for (int height = 1; height &lt; 6; height++)\n    {\n        for (int width = 1; width &lt; 6; width++)\n            test_drawing(height, width);\n    }\n\n    // Testing examples from question\n    test_drawing(10, 20);\n    test_drawing( 5, 30);\n    test_drawing(10, 40);\n    return 0;\n}\n</code></pre>\n\n<p>It uses functions \u2014 lots of functions.  But it also gives flexibility.  I was able to test the small-size degenerate and near-degenerate cases easily, and the 3 examples from the question text \u2014 all without having to type a thing while the program is running.  If I needed to be able to print 'indented boxes', it would be easy to do that.  If I needed two boxes on a line, that could almost be done \u2014 I'd have to remove the <code>putchar('\\n');</code> from inside <code>draw_line()</code>.  By allowing the border and fill characters to be specified, I can control the appearance more easily (and it was easier to count dots than blanks, so using <code>'.'</code> in place of <code>' '</code> was simple).</p>\n\n<p>Note too that the code deals with special cases; it attempts to come up with a reasonable answer for a width or height of 1.  And it uses <code>assert()</code> to head off the 'impossible' cases.</p>\n\n<p>Output:</p>\n\n<pre><code>1x1:\n#\n\n1x2:\n##\n\n1x3:\n###\n\n1x4:\n####\n\n1x5:\n#####\n\n2x1:\n#\n#\n\n2x2:\n##\n##\n\n2x3:\n###\n###\n\n2x4:\n####\n####\n\n2x5:\n#####\n#####\n\n3x1:\n#\n#\n#\n\n3x2:\n##\n##\n##\n\n3x3:\n###\n#.#\n###\n\n3x4:\n####\n#..#\n####\n\n3x5:\n#####\n#...#\n#####\n\n4x1:\n#\n#\n#\n#\n\n4x2:\n##\n##\n##\n##\n\n4x3:\n###\n#.#\n#.#\n###\n\n4x4:\n####\n#..#\n#..#\n####\n\n4x5:\n#####\n#...#\n#...#\n#####\n\n5x1:\n#\n#\n#\n#\n#\n\n5x2:\n##\n##\n##\n##\n##\n\n5x3:\n###\n#.#\n#.#\n#.#\n###\n\n5x4:\n####\n#..#\n#..#\n#..#\n####\n\n5x5:\n#####\n#...#\n#...#\n#...#\n#####\n\n10x20:\n####################\n#..................#\n#..................#\n#..................#\n#..................#\n#..................#\n#..................#\n#..................#\n#..................#\n####################\n\n5x30:\n##############################\n#............................#\n#............................#\n#............................#\n##############################\n\n10x40:\n########################################\n#......................................#\n#......................................#\n#......................................#\n#......................................#\n#......................................#\n#......................................#\n#......................................#\n#......................................#\n########################################\n</code></pre>\n\n<p>I think you'll find that a number of the proposed solutions do not handle the degenerate cases (where either width or height or both is smaller than 3).</p>\n"}], "owner": {"reputation": 21, "user_id": 8907199, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcf2654331230a49433c1f02842f7184?s=128&d=identicon&r=PG&f=1", "display_name": "Lukas Wegner", "link": "https://stackoverflow.com/users/8907199/lukas-wegner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 369, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1510228490, "creation_date": 1510150106, "last_edit_date": 1510228490, "question_id": 47181828, "link": "https://stackoverflow.com/questions/47181828/how-do-i-define-the-frame-of-my-rectangle-in-c", "title": "How do I define the frame of my rectangle in C", "body": "<p>I have a question about a task that was given to us by our professor. The task we got is L6 on this website: <a href=\"http://www.juergenbrauer.org/teaching/programming1/programming1.html#L6\" rel=\"nofollow noreferrer\">http://www.juergenbrauer.org/teaching/programming1/programming1.html#L6</a></p>\n\n<blockquote>\n  <h3>L6: Drawing a rectangle</h3>\n  \n  <p>Write a C program that asks the user to enter the height and width of an rectangle and then draws a corresponding rectangle:</p>\n\n<pre><code>Height of rectangle? 10\nWidth of rectangle? 20\n####################\n#                  #\n#                  #\n#                  #\n#                  #\n#                  #\n#                  #\n#                  #\n#                  #\n####################\n\nHeight of rectangle? 5\nWidth of rectangle? 30\n##############################\n#                            #\n#                            #\n#                            #\n##############################\n\nHeight of rectangle? 10\nWidth of rectangle? 40\n########################################\n#                                      #\n#                                      #\n#                                      #\n#                                      #\n#                                      #\n#                                      #\n#                                      #\n#                                      #\n########################################\n</code></pre>\n</blockquote>\n\n<p>Now I have written this code so far:   </p>\n\n<pre><code>int main()\n{\n    int height;\n    int width;\n    int a;\n    int b;\n\n    printf(\"Height of rectangle? \");\n    scanf_s(\"%d\", &amp;height);\n\n    printf(\"Width of rectangle? \");\n    scanf_s(\"%d\", &amp;width);\n\n    for (a = 0;a != height;a++)\n    {\n        {\n            for (b = 0; b != width; b++)\n                if ((a == 0))\n                {\n                    printf(\"#\");\n                }\n                else\n                {\n                    printf(\"\");\n                }\n        }\n    }\n\n    _getch();\n}\n</code></pre>\n\n<p>I know that in the output <code>a == 0</code> will be the first line, <code>a == 1</code> the second, and so one. But I can't imagine how to define the width that there is only one \"#\" at the beginning or the start of for example line 2. </p>\n\n<p>Can you help?</p>\n\n<p>So i found a solution with the help of a friend the algorithm was nearly complete. Thnak you for helping.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;conio.h&gt;\n\nint main()\n{\n    int height;\n    int width;\n\n\n\n    printf(\"Height of rectangle? \");\n    scanf_s(\"%d\", &amp;height);\n\n    printf(\"Width of rectangle? \");\n    scanf_s(\"%d\", &amp;width);\n\n\n    for (int a = 1;a &lt;= height;a++)\n    { \n            for (int b = 1; b &lt;= width; b++)\n            {\n\n\n                if ((a == 1) || (a == (width) || (b == 1) || (b == (height))))\n                {\n                    printf(\"#\");\n                }\n                else\n                    printf(\" \");\n\n        }\n            printf(\"\\n\");\n    }\n\n\n\n    _getch();\n}\n</code></pre>\n"}, {"tags": ["c", "pointers"], "answers": [{"comments": [{"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "reply_to_user": {"reputation": 3, "user_id": 8907208, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e12fa8b0a249adf4a63c2c533c2623be?s=128&d=identicon&r=PG&f=1", "display_name": "JC97", "link": "https://stackoverflow.com/users/8907208/jc97"}, "edited": false, "score": 0, "creation_date": 1510151755, "post_id": 47181715, "comment_id": 81313621, "body": "@JC97 Please mark the answer as accepted if you&#39;re satisfied. It is described <a href=\"https://stackoverflow.com/tour\">in the tour</a> how to do it."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 2, "last_activity_date": 1510149762, "creation_date": 1510149762, "answer_id": 47181715, "question_id": 47181639, "link": "https://stackoverflow.com/questions/47181639/why-is-my-pointer-disappearing/47181715#47181715", "title": "Why is my pointer disappearing?", "body": "<p>The problem is these three lines:</p>\n\n<pre><code>char characters[length+1];\nchar *sentence = characters;\nsentences[i] = sentence;\n</code></pre>\n\n<p>Here you save a pointer to a <em>local variable</em>. That variable <code>characters</code> will go out of scope every iteration of the loop, leaving you with an \"array\" of stray pointers.</p>\n\n<p>While not standard in C, almost all systems have a <code>strdup</code> function whichg duplicates a string by calling <code>malloc</code> and <code>strcpy</code>. I suggest you use it (or implement your own).</p>\n"}], "owner": {"reputation": 3, "user_id": 8907208, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e12fa8b0a249adf4a63c2c533c2623be?s=128&d=identicon&r=PG&f=1", "display_name": "JC97", "link": "https://stackoverflow.com/users/8907208/jc97"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 47181715, "answer_count": 1, "score": -1, "last_activity_date": 1510149762, "creation_date": 1510149559, "question_id": 47181639, "link": "https://stackoverflow.com/questions/47181639/why-is-my-pointer-disappearing", "title": "Why is my pointer disappearing?", "body": "<p>I have a class that is meant to return a char** by splitting one char* into sentences. I can allocate the memory and give it values at a certain point, but by the time I try to return it, it's completely missing.</p>\n\n<pre><code>char **makeSentences(char *chapter, int *nSentences){\nint num = *nSentences;\nchar* chap = chapter;\nchar **sentences;\nsentences = (char**) malloc(sizeof(char*) * num);\nint stops[num + 1];\nstops[0] = 0;\nint counter = 0;\nint stop = 1;\nwhile (chap[counter] != '\\0'){\n    if (chap[counter] == '.'){\n        stops[stop] = counter + 1;\n        printf(\"Place: %d\\nStop Number: %d\\n\\n\", counter, stop);\n        stop++;\n    }\n    counter++;\n}\nfor (int i = 0; i &lt; num; i++){\n    int length = stops[i+1] - stops[i];\n    char characters[length+1];\n    memcpy(characters, &amp;chap[stops[i]], length);\n    characters[length] = '\\0';\n    char *sentence = characters;\n    sentences[i] = sentence;\n    printf(\"%s\\n\",sentence);\n    printf(\"%s\\n\", sentences[i]);\n}\nchar* testChar = sentences[0];\nprintf(\"%s\\n\", sentences[0]);\nprintf(\"%s]n\", testChar);\nreturn sentences;\n}\n</code></pre>\n\n<p>The last two printing lines don't print anything but a newline, while the exact same lines (in the for loop) print as expected. What is going on here?</p>\n"}, {"tags": ["python", "c", "regex", "windows", "header"], "answers": [{"tags": [], "owner": {"reputation": 311, "user_id": 919499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55704b766845086f1f61c6d221dc9fbe?s=128&d=identicon&r=PG", "display_name": "MadeR", "link": "https://stackoverflow.com/users/919499/mader"}, "is_accepted": false, "score": 0, "last_activity_date": 1510157774, "creation_date": 1510157774, "answer_id": 47184582, "question_id": 47181635, "link": "https://stackoverflow.com/questions/47181635/parsing-winerror-h-ntstatus-h-statuses-definitions-with-regex/47184582#47184582", "title": "Parsing winerror.h &amp; ntstatus.h statuses/definitions with regex", "body": "<p>I think this is close enough:</p>\n\n<p><code>re.findall(r\"(?&lt;=// )(?:Message\\w{2,4}:)? ?(.+)?\\n\", text)</code> <strong>+</strong> <code>list(re.search(r\"(0x\\d+)\", text).groups())</code></p>\n\n<p><code>['NTE_BAD_PROV_TYPE',\n  '',\n  'Invalid provider type specified.',\n  'More data is avaiable on bla bla.',\n  '0x80090014']</code></p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 8907165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/710cd18781821e27e13eda9e6858dbb6?s=128&d=identicon&r=PG&f=1", "display_name": "JJ By", "link": "https://stackoverflow.com/users/8907165/jj-by"}, "is_accepted": true, "score": 0, "last_activity_date": 1510489824, "creation_date": 1510489824, "answer_id": 47248795, "question_id": 47181635, "link": "https://stackoverflow.com/questions/47181635/parsing-winerror-h-ntstatus-h-statuses-definitions-with-regex/47248795#47248795", "title": "Parsing winerror.h &amp; ntstatus.h statuses/definitions with regex", "body": "<p><strong>This is the regex I ended up figuring out and using:</strong></p>\n\n<p>To capture all Last Errors &amp; HRESULT definitions in <code>winerror.h</code>:</p>\n\n<pre><code>//\\sMessageText:[\\n\\r]+//\\s*[\\n\\r]+\n(?P&lt;message_text&gt;//.*?//\\n)*.*?\n#define\\s(?P&lt;status_name&gt;[A-Za-z0-9]+)\n\\s+(?:_HRESULT_TYPEDEF_\\(|NDIS_ERROR_TYPEDEF_\\()?\n(?P&lt;status_value&gt;(?:0[xX])?[A-Fa-f0-9]+)L\n</code></pre>\n\n<p>To capture all NTSTATUS definitions in <code>ntstatus.h</code>:</p>\n\n<pre><code>//\\sMessageText:[\\n\\r]+//\\s*[\\n\\r]+\n(?P&lt;message_text&gt;//.*?//\\n)*.*?\n#define\\s(?P&lt;status_name&gt;[A-Za-z0-9]+)\n\\s+\\(\\(NTSTATUS\\)(?P&lt;status_value&gt;0[xX]?[A-Fa-f0-9]+)L\\)\n</code></pre>\n\n<p>I also format the description (message text) afterwards by replacing the <code>//</code> with newlines.</p>\n"}], "owner": {"reputation": 21, "user_id": 8907165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/710cd18781821e27e13eda9e6858dbb6?s=128&d=identicon&r=PG&f=1", "display_name": "JJ By", "link": "https://stackoverflow.com/users/8907165/jj-by"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 167, "favorite_count": 0, "accepted_answer_id": 47248795, "answer_count": 2, "score": 2, "last_activity_date": 1510490077, "creation_date": 1510149547, "last_edit_date": 1510490077, "question_id": 47181635, "link": "https://stackoverflow.com/questions/47181635/parsing-winerror-h-ntstatus-h-statuses-definitions-with-regex", "title": "Parsing winerror.h &amp; ntstatus.h statuses/definitions with regex", "body": "<p>I'm trying to create a regex in Python to capture all the Last Errors, HRESULT and NTSTATUS defenitions from winerror.h &amp; ntstatus.h: </p>\n\n<ul>\n<li><a href=\"http://www.carrona.org/winerror.html\" rel=\"nofollow noreferrer\">http://www.carrona.org/winerror.html</a></li>\n<li><a href=\"http://www.codemachine.com/downloads/win71/ntstatus.h\" rel=\"nofollow noreferrer\">http://www.codemachine.com/downloads/win71/ntstatus.h</a></li>\n</ul>\n\n<p>For example, for this text:</p>\n\n<pre><code>//\n// MessageId: NTE_BAD_PROV_TYPE\n//\n// MessageText:\n//\n// Invalid provider type specified.\n// More data is avaiable on bla bla.\n//\n#define NTE_BAD_PROV_TYPE                _HRESULT_TYPEDEF_(0x80090014L)\n</code></pre>\n\n<p>I want to capture:</p>\n\n<p><code>('Invalid provider type specified. More data is avaiable on bla bla.', \n 'NTE_BAD_PROV_TYPE',\n  0x80090014)</code></p>\n\n<hr>\n\n<p>Same goes for <code>ntstatus.h</code>:</p>\n\n<pre><code>//\n// MessageId: STATUS_NOT_ALL_ASSIGNED\n//\n// MessageText:\n//\n// Indicates not all privileges or groups referenced are assigned to the caller.\n// This allows, for example, all privileges to be disabled without having to know exactly which privileges are assigned.\n//\n#define STATUS_NOT_ALL_ASSIGNED          ((NTSTATUS)0x00000106L)\n</code></pre>\n"}, {"tags": ["c++", "c", "cpputest", "stm8"], "comments": [{"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 2, "creation_date": 1510149212, "post_id": 47181446, "comment_id": 81311800, "body": "You just cannot have 2 <code>main</code> functions, so you <b>have</b> to remove one of them. Using another names seems like one option. Putting the <code>blink()</code> function is a separate .c file is another."}, {"owner": {"reputation": 101, "user_id": 8160896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f511f3d8be563ab744c388b00d91c90d?s=128&d=identicon&r=PG&f=1", "display_name": "K0ertis", "link": "https://stackoverflow.com/users/8160896/k0ertis"}, "reply_to_user": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1510149399, "post_id": 47181446, "comment_id": 81311936, "body": "But at least when I deploy it on my hardware I need to name it as main function, or do I get here something totally wrong?"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 1, "creation_date": 1510150074, "post_id": 47181446, "comment_id": 81312425, "body": "Yes, you have to have exactly one <code>main</code> function in each build. So you might have to organize your files in a different way. Like splitting <code>blinky.c</code> into two files and only use one of those in the test build."}, {"owner": {"reputation": 518, "user_id": 466186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3bff6bc8daec0d765e1d97a0096eac8b?s=128&d=identicon&r=PG", "display_name": "Lemtronix", "link": "https://stackoverflow.com/users/466186/lemtronix"}, "edited": false, "score": 2, "creation_date": 1543500708, "post_id": 47181446, "comment_id": 93948777, "body": "We put our firmware&#39;s main() src/main.c and our CppUTest&#39;s main() in test/AllTest.cpp. Then we have two build configurations, a &quot;release&quot; that builds the firmware and includes everything in src/ and another that&#39;s a &quot;test&quot; build configuration that excludes main.c but includes everything in test/ including AllTest.cpp"}], "answers": [{"tags": [], "owner": {"reputation": 101, "user_id": 8160896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f511f3d8be563ab744c388b00d91c90d?s=128&d=identicon&r=PG&f=1", "display_name": "K0ertis", "link": "https://stackoverflow.com/users/8160896/k0ertis"}, "is_accepted": true, "score": 1, "last_activity_date": 1510830065, "creation_date": 1510830065, "answer_id": 47327948, "question_id": 47181446, "link": "https://stackoverflow.com/questions/47181446/cpputest-on-stm8-failed-due-multiple-main/47327948#47327948", "title": "cpputest on STM8 failed due multiple &#39;main&#39;", "body": "<p>As suggested in the commends, there was no other way to create a file with the main loop for only the Controller and separate it from the unit tests.</p>\n\n<p>My structure looks like:\nmain.c:\n- contains the includes from the firmware (app.h) and the main() with the  run_app()\napp.c: \ncontains all the firmware and is tested with cpputest</p>\n"}], "owner": {"reputation": 101, "user_id": 8160896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f511f3d8be563ab744c388b00d91c90d?s=128&d=identicon&r=PG&f=1", "display_name": "K0ertis", "link": "https://stackoverflow.com/users/8160896/k0ertis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 248, "favorite_count": 0, "accepted_answer_id": 47327948, "answer_count": 1, "score": 1, "last_activity_date": 1564835025, "creation_date": 1510149047, "last_edit_date": 1564835025, "question_id": 47181446, "link": "https://stackoverflow.com/questions/47181446/cpputest-on-stm8-failed-due-multiple-main", "title": "cpputest on STM8 failed due multiple &#39;main&#39;", "body": "<p>I want to use cpputest on STM8 and installed all the required tools for it.\nI am able to run cpputest on my simplified code. \non my main file which belongs to the hardware I have of course the main function. But in the Test environment I have a main function under AllTests.cpp as well. When I compile it i get the error: </p>\n\n<pre><code>multiple definition of `main'\n</code></pre>\n\n<p>A further issue I run into is: I compile the code for a 8bit processor and i use the library <code>&lt;stdint.h&gt;</code>, so my main file has the line <code>uint8_t main(){</code> . The compiler of cpputest does not like that at all... </p>\n\n<p>Does anyone has an idea how to fix this?</p>\n\n<p>Files:</p>\n\n<p>blinky.h:</p>\n\n<pre><code>#ifndef BLINKY_H\n#define BLINKY_H\n\n#include \"stm8l.h\"\n#include &lt;stdint.h&gt;\n\nuint16_t blink(void);\n\n#endif\n</code></pre>\n\n<p>blinky.c</p>\n\n<pre><code>#include \"blinky.h\"\n\n\nuint16_t blink(){\n    PD_DDR = 0x1;\n    PD_CR1 = 0x1;\n    return 1;\n}\nuint8_t main() {\n    // Configure pins\n    while(1){\n    // Loop\n    blink();\n    }\n}\n</code></pre>\n\n<p>test.cpp:</p>\n\n<pre><code>#include \"CppUTest/TestHarness.h\"\n\nextern \"C\"\n{\n#include \"blinky.h\"\n}\n\nTEST_GROUP(FirstTestGroup)\n{\n    void setup()\n    {\n    }\n\n    void teardown()\n    {\n    }\n};\n\nTEST(FirstTestGroup, test1)\n{\n    LONGS_EQUAL(1, blink());\n}\n</code></pre>\n\n<p>AllTest.cpp:</p>\n\n<pre><code>#include \"CppUTest/CommandLineTestRunner.h\"\n\nint main(int ac, char** av)\n{\n    return CommandLineTestRunner::RunAllTests(ac, av);\n}\n</code></pre>\n\n<p>Makefile:</p>\n\n<pre><code>#Set this to @ to keep the makefile quiet\nSILENCE = @\n\n#---- Outputs ----#\nCOMPONENT_NAME = blinky\n\n#--- Inputs ----#\nPROJECT_HOME_DIR = .\nifeq \"$(CPPUTEST_HOME)\" \"\"\n    CPPUTEST_HOME = ~/tools/cpputest\nendif\n\n# --- SRC_FILES ---\n# Use SRC_FILES to specifiy individual production\n# code files.\n# These files are compiled and put into the\n# ProductionCode library and links with the test runner\nSRC_FILES = src/blinky.c\n\n# --- SRC_DIRS ---\n# Use SRC_DIRS to specifiy production directories\n# code files.\n# These files are compiled and put into a the\n# ProductionCode library and links with the test runner\nSRC_DIRS = \\\n    platform\n\n# --- TEST_SRC_FILES ---\n# TEST_SRC_FILES specifies individual test files to build.  Test\n# files are always included in the build and they\n# pull in production code from the library\nTEST_SRC_FILES = \\\n\n# --- TEST_SRC_DIRS ---\n# Like TEST_SRC_FILES, but biulds everyting in the directory\nTEST_SRC_DIRS = \\\n    tests \\\n    #tests/blinky \\\n    #tests/io-cppumock \\\n    #tests/exploding-fakes \\\n    #tests \\\n    #tests/example-fff \\\n    #tests/fff \\\n# --- MOCKS_SRC_DIRS ---\n# MOCKS_SRC_DIRS specifies a directories where you can put your\n# mocks, stubs and fakes.  You can also just put them\n# in TEST_SRC_DIRS\nMOCKS_SRC_DIRS = \\\n\n# Turn on CppUMock\nCPPUTEST_USE_EXTENSIONS = Y\n\nINCLUDE_DIRS =\\\n  .\\\n  $(CPPUTEST_HOME)/include/ \\\n  $(CPPUTEST_HOME)/include/Platforms/Gcc \\\n  platform \\\n  src \\\n  include \\\n  #example-fff \\\n  #test/exploding-fakes \\\n  #tests/fff\n\n\n#STM8DIR\n\n#SDCC_DIR :=$(CPPUTEST_HOME)/../sdcc/\n#CC       :=@$(SDCC_DIR)/bin/sdcc\n# --- CPPUTEST_OBJS_DIR ---\n# if you have to use \"../\" to get to your source path\n# the makefile will put the .o and .d files in surprising \n# places.\n# To make up for each level of \"../\", add place holder \n# sub directories in CPPUTEST_OBJS_DIR\n# each \"../\".  It is kind of a kludge, but it causes the\n# .o and .d files to be put under objs.\n# e.g. if you have \"../../src\", set to \"test-objs/1/2\"\n# This is set no \"../\" in the source path.\nCPPUTEST_OBJS_DIR = test-obj\n\nCPPUTEST_LIB_DIR = test-lib\nCPPUTEST_WARNINGFLAGS += -Wall\nCPPUTEST_WARNINGFLAGS += -Werror\nCPPUTEST_WARNINGFLAGS += -Wswitch-default\nCPPUTEST_WARNINGFLAGS += -Wfatal-errors\nCPPUTEST_CXXFLAGS = -Wno-c++14-compat\nCPPUTEST_CFLAGS = -std=c99\nCPPUTEST_CXXFLAGS += $(CPPUTEST_PLATFORM_CXXFLAGS)\nCPPUTEST_CFLAGS += -Wno-missing-prototypes \nCPPUTEST_CXXFLAGS += -Wno-missing-variable-declarations\n# --- LD_LIBRARIES -- Additional needed libraries can be added here.\n# commented out example specifies math library\n#LD_LIBRARIES += -lm\n\n# Look at $(CPPUTEST_HOME)/build/MakefileWorker.mk for more controls\n\ninclude $(CPPUTEST_HOME)/build/MakefileWorker.mk\n</code></pre>\n"}, {"tags": ["c", "arrays", "loops", "for-loop", "counter"], "comments": [{"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "edited": false, "score": 0, "creation_date": 1510149110, "post_id": 47181444, "comment_id": 81311729, "body": "- scanf(&quot;%c&quot;,&amp;letter);"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1510149401, "post_id": 47181444, "comment_id": 81311937, "body": "The double decrement is caused by the trailing line feed character in stdin. Please read <a href=\"https://stackoverflow.com/questions/35178520/how-to-read-parse-input-in-c-the-faq\" title=\"how to read parse input in c the faq\">stackoverflow.com/questions/35178520/&hellip;</a>"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1510149582, "post_id": 47181444, "comment_id": 81312070, "body": "It is not responsible for the problem you asked about, but to print array <code>array</code>, you must use a <code>%s</code> field descriptor (not <code>%c</code>, which is for a single character), and you must ensure that the array contains a string terminator."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1510149841, "post_id": 47181444, "comment_id": 81312253, "body": "Additionally, I suggest avoiding redundancy.  Why create and manage variable <code>counterSoFar</code> when the same information is already carried by <code>maxTries</code> and <code>guessCounter</code> (together).  That is, instead of <code>printf(&quot;You have %d tries left!\\n\\n&quot;, counterSoFar);</code>, I suggest dropping <code>counterSoFar</code> altogether and using <code>printf(&quot;You have %d tries left!\\n\\n&quot;, maxTries - guessCounter);</code>."}], "answers": [{"tags": [], "owner": {"reputation": 4751, "user_id": 5649326, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a82Se.jpg?s=128&g=1", "display_name": "Marievi", "link": "https://stackoverflow.com/users/5649326/marievi"}, "is_accepted": false, "score": 0, "last_activity_date": 1510149496, "last_edit_date": 1510149496, "creation_date": 1510149157, "answer_id": 47181485, "question_id": 47181444, "link": "https://stackoverflow.com/questions/47181444/why-does-my-for-loop-not-give-intended-output-in-c/47181485#47181485", "title": "Why does my for loop not give intended output in C?", "body": "<p>You need to change the statement:</p>\n\n<pre><code>scanf(\"%c\", letter);\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>scanf(\" %c\", &amp;letter);\n</code></pre>\n\n<p>as <code>scanf</code> needs to take a pointer as argument, so you should pass the variable's address. The space before <code>%c</code> specifier is needed to consume the <code>\\n</code> between the inputs.</p>\n"}, {"tags": [], "owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "is_accepted": true, "score": 3, "last_activity_date": 1510156008, "last_edit_date": 1510156008, "creation_date": 1510149212, "answer_id": 47181506, "question_id": 47181444, "link": "https://stackoverflow.com/questions/47181444/why-does-my-for-loop-not-give-intended-output-in-c/47181506#47181506", "title": "Why does my for loop not give intended output in C?", "body": "<ul>\n<li><p><code>scanf(\"%c\",&amp;letter);</code></p></li>\n<li><p>Also you are getting the <code>\\n</code> as another input. so use <code>scanf(\" %c\",&amp;letter);</code> to consume that <code>\\n</code>. </p></li>\n</ul>\n\n<p>Also if you consider few things:-</p>\n\n<ol>\n<li><p><code>maxTries</code> is something that you would like to keep outside the <code>for</code> loop. You may ask why? But the thing is it helps in keeping the things the program may need later and it improves readability.</p></li>\n<li><p>Second thing is if you are using <code>counterSoFar</code> then I guess it is initiated with something. which again backs my first point. That you don't need to reinitialize <code>maxTries</code> in a loop.</p></li>\n</ol>\n\n<hr>\n\n<p>As answer to your comment, there are many things you did wrong. I will try one by one.</p>\n\n<ul>\n<li><code>char word[13];</code> is for 12 character and a null terminating char <code>\\0</code>. </li>\n</ul>\n\n<p>scanf(\"%12s\",word);</p>\n\n<ul>\n<li><p>It should be <code>char letter</code> not <code>char letter[1]</code>. Why would you use a 1 size char array but not just one character?</p></li>\n<li><p><code>char array[13];</code> should be out of the <code>for</code> loop to retain the already guessed characters.</p></li>\n<li><p>You should initialize it something other than alphabetic characters to distinguish which are being filled which are not.</p></li>\n</ul>\n\n<p>This is a small example of combining the corrections:- (It would be better if you try incorporateother game logic in this..I have shown a bare minimum portion).</p>\n\n<hr>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;ctype.h&gt; \n#include  &lt;string.h&gt;\nvoid userInput(char[]);\nint main() {\n    printf(\"Player 1 please enter a word of up to 12 letters.\\n\");\n    char word[13];\n    scanf(\"%12s\", word);\n    userInput(word);\n}\nvoid userInput(char word[])\n{\n    int n = strlen(word);\n    for (int i = 0; i &lt; n; i++)\n        word[i] = tolower(word[i]);\n\n\n    char letter;\n    printf(\"The word to guess is as follows: \\n\");\n    for (int i = 0; i &lt; n; i++)\n        printf(\"_ \");\n\n    char array[13]={0};\n    for(int i=0;i&lt;=11;i++)\n        array[i]='_';\n    int maxTries = 16;\n    int matched = 0;\n    for (int guessCounter = 0; guessCounter &lt; maxTries; guessCounter++)\n    {\n        printf(\"\\n\");\n        printf(\"You have %d tries left!\\n\\n\", maxTries - guessCounter);\n\n        printf(\"Player 2 please enter only 1 letter!\\n\");\n        scanf(\" %c\", &amp;letter);\n\n        for (int c = 0; c &lt; n; c++)\n        {\n            if (letter == word[c] &amp;&amp; array[c]=='_')\n            {\n                matched++;\n                array[c] = letter;\n                break;\n            }\n\n        }\n        if( matched == n){\n            printf(\"You won!!!!\");\n            return;\n        }\n        printf(\"The current array is \");\n        for(int i=0;i&lt;n;i++)\n            printf(\"%c \",array[i]);\n\n    }\n    printf(\"You lose!!!!\");\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4194, "user_id": 8164333, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lCAZ3.jpg?s=128&g=1", "display_name": "iamsankalp89", "link": "https://stackoverflow.com/users/8164333/iamsankalp89"}, "is_accepted": false, "score": 0, "last_activity_date": 1510149409, "creation_date": 1510149409, "answer_id": 47181575, "question_id": 47181444, "link": "https://stackoverflow.com/questions/47181444/why-does-my-for-loop-not-give-intended-output-in-c/47181575#47181575", "title": "Why does my for loop not give intended output in C?", "body": "<p>Change it first correct one is </p>\n\n<pre><code>printf(\"Player 2 please enter only 1 letter!\\n\");\n        scanf(\"%c\", &amp;letter);\n</code></pre>\n"}], "owner": {"reputation": 205, "user_id": 4298924, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/zpZKC.jpg?s=128&g=1", "display_name": "Sarah Collins", "link": "https://stackoverflow.com/users/4298924/sarah-collins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "closed_date": 1510149408, "accepted_answer_id": 47181506, "answer_count": 3, "score": 1, "last_activity_date": 1510156008, "creation_date": 1510149039, "last_edit_date": 1510149768, "question_id": 47181444, "link": "https://stackoverflow.com/questions/47181444/why-does-my-for-loop-not-give-intended-output-in-c", "closed_reason": "Duplicate", "title": "Why does my for loop not give intended output in C?", "body": "<p>I am trying to add a letter to an array which I've defined in a for loop. For each time the user inputs something, I would like to decrease \"counterSoFar\" by 1, and display it. However, \"counterSoFar\" always decreases by 2 and skip an opportunity for the user to input anything, instead of decreasing \"counterSoFar\" by 1. I've tried looking through the code multiple times but I still can't figure out why. Please advise.</p>\n\n<pre><code># include &lt;stdio.h&gt;\n# include &lt;ctype.h&gt;\nvoid userInput(char[]);\n\nint main() {\n    printf(\"Player 1 please enter a word of up to 12 letters.\\n\");\n    char word[13];\n    scanf(\"%13s\", word);\n    userInput(word);\n}\nvoid userInput(char word[])\n{\n    int n = strlen(word);\n    for (int i = 0; i &lt; n; i++)\n    {\n        word[i] = tolower(word[i]);\n    }\n\n    int checker;\n    for (int i = 0; i &lt; n; i++)\n    {\n\n        if (isalpha(word[i]))\n        {\n            checker = 1;\n        }\n        else\n        {\n            checker = 0;\n            printf(\"Please enter a word without spaces and numbers!\\n\");\n            break;\n\n        }\n    }\n    if (checker == 1)\n    {\n        int counterSoFar = 8;\n        char letter[1];\n        printf(\"The word to guess is as follows: \\n\");\n        for (int i = 0; i &lt; n; i++)\n        {\n            printf(\"_\");\n        }\n        int maxTries = 7;\n        for (int guessCounter = 0; guessCounter &lt; maxTries; guessCounter++)\n        {\n            printf(\"\\n\");\n            counterSoFar = counterSoFar - 1;\n            printf(\"You have %d tries left!\\n\\n\", counterSoFar);\n\n            printf(\"Player 2 please enter only 1 letter!\\n\");\n            scanf(\"%c\", &amp;letter);\n            char array[13];\n            for (int c = 0; c &lt; n; c++)\n            {\n                if (letter == word[c])\n                {\n                    array[c] = word[c];\n                }\n                else\n                {\n                    array[c] = '_';\n                }\n            }\n            printf(\"The current array is %c\", array);\n\n        }\n\n\n        }\n\n\n}\n</code></pre>\n"}, {"tags": ["c", "openssl", "rsa"], "comments": [{"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 2, "creation_date": 1510148313, "post_id": 47181133, "comment_id": 81311154, "body": "From the manpage: <code>RSA_private_encrypt(int flen, unsigned char *from,     unsigned char *to, RSA *rsa, int padding) signs the flen bytes at from (usually a message digest with an algorithm identifier) using the private key rsa and stores the signature in to. to must point to RSA_size(rsa) bytes of memory. </code>. Anything unclear here?"}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1510148465, "post_id": 47181133, "comment_id": 81311260, "body": "I am not sure if you are aware, that this is not really an encryption operation, but merely a signature"}, {"owner": {"reputation": 71, "user_id": 8887077, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/96e6660eef7c3b3c2e97669032129139?s=128&d=identicon&r=PG&f=1", "display_name": "Vcvv", "link": "https://stackoverflow.com/users/8887077/vcvv"}, "reply_to_user": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1510149010, "post_id": 47181133, "comment_id": 81311653, "body": "hey, thanks for your answer, I understood this. But I still need to use exactly this function. Is the rest part of code was written correctly ?"}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1510149107, "post_id": 47181133, "comment_id": 81311724, "body": "You should not be using <code>RSA_private_encrypt</code> and friends. You should be using the EVP interfaces, instead. Also see <a href=\"https://wiki.openssl.org/index.php/EVP_Asymmetric_Encryption_and_Decryption_of_an_Envelope\" rel=\"nofollow noreferrer\">EVP Asymmetric Encryption and Decryption</a> on the OpenSSL wiki."}, {"owner": {"reputation": 5563, "user_id": 617801, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/wcJ7X.jpg?s=128&g=1", "display_name": "Nam Vu", "link": "https://stackoverflow.com/users/617801/nam-vu"}, "edited": false, "score": 0, "creation_date": 1531136513, "post_id": 47181133, "comment_id": 89467935, "body": "@Vcvv: any solution now?"}], "owner": {"reputation": 71, "user_id": 8887077, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/96e6660eef7c3b3c2e97669032129139?s=128&d=identicon&r=PG&f=1", "display_name": "Vcvv", "link": "https://stackoverflow.com/users/8887077/vcvv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 745, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1534595292, "creation_date": 1510148120, "last_edit_date": 1534595292, "question_id": 47181133, "link": "https://stackoverflow.com/questions/47181133/how-to-encrypt-string-using-private-key-with-openssl-library", "title": "How to encrypt string using private key with openssl library?", "body": "<p>I have a private key in file private_key.pm and I want to encrypt this with RSA algorithm with openssl. Key length = 2048. \nAlso I need to compute MD5 from encrypted result. \nI wrote this, but I am not sure if it works correctly</p>\n\n<pre><code>#include &lt;openssl/rsa.h&gt;\n#include &lt;openssl/pem.h&gt;\n#include &lt;openssl/md5.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n\nusing namespace std;\n\nint main(int argc, char* argv[])\n{\n    FILE*   f;\n    RSA* pRSAPRI = RSA_new();\n    f = fopen(argv[1], \"r\");\n\n    RSA *private_key  =  PEM_read_RSAPrivateKey(f, &amp;pRSAPRI, NULL, NULL);\n\n    unsigned char sourceText[100];\n    unsigned char cipher[2048];\n    strcpy((char*)sourceText, \"some_val\");\n    int ret = RSA_private_encrypt(25, sourceText, cipher, private_key, RSA_PKCS1_PADDING);\n\n    if (ret &lt; 0)\n    {\n        printf(\"RSA_private_encrypt failed\\n\");\n        exit (-1);\n    }\n    std::cout &lt;&lt; \" cipher = \" &lt;&lt; cipher &lt;&lt; std::endl;\n\n    unsigned char md5Result[MD5_DIGEST_LENGTH];\n\n    MD5((unsigned char*)&amp;cipher, 2048, (unsigned char*)&amp;md5Result);\n\n    char mdString[33];\n\n    for(int i = 0; i &lt; 16; i++)\n        sprintf(&amp;mdString[i*2], \"%02x\", (unsigned int)md5Result[i]);\n\n    printf(\"  md5 : %s\\n\", mdString);\n    return 0;\n}\n</code></pre>\n\n<p>What length of array with chars cipher has to be ? Is cipher[2048] correct ? Did I pass correctly the second argument in function PEM_read_RSAPrivateKey ? </p>\n"}, {"tags": ["c", "input", "output"], "comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1510146589, "post_id": 47180579, "comment_id": 81309923, "body": "And which one is line 18?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 2, "creation_date": 1510146712, "post_id": 47180579, "comment_id": 81310016, "body": "<code>%f</code> requests <code>double</code>. result of <code>5 &#47; 2</code> is <code>int</code> (<code>2</code>). If you give arguments of a different type from the requesting type, the result is undefined."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1510147262, "post_id": 47180579, "comment_id": 81310422, "body": "Maybe there&#39;s a matching duplicate, but it should be about the core issue (using the wrong printf format specifier)."}, {"owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "edited": false, "score": 0, "creation_date": 1510148546, "post_id": 47180579, "comment_id": 81311314, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/2976011/how-to-get-fractions-in-an-integer-division\">How to get fractions in an integer division?</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "edited": false, "score": 0, "creation_date": 1510151728, "post_id": 47180579, "comment_id": 81313614, "body": "@purplepsycho no, that&#39;s not a suitable duplicate -- the core issue here is not integer division but using a wrong printf format specifier."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1510146857, "post_id": 47180683, "comment_id": 81310103, "body": "... doing otherwise (as in the original code) is undefined behavior, btw, what will be printed depends on the concrete implementation."}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1510146996, "post_id": 47180683, "comment_id": 81310214, "body": "@FelixPalmen Right, you can&#39;t predict what it will do if an incompatible format is used."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1510147114, "post_id": 47180683, "comment_id": 81310306, "body": "This was just meant as a possible improvement of your correct (and uv&#39;d) answer, in case OP is interested in &quot;explaining&quot; his output of <code>0.0</code> :)"}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1510147261, "post_id": 47180683, "comment_id": 81310421, "body": "@FelixPalmen Ah ok, I added a comment about it."}], "tags": [], "owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "is_accepted": false, "score": 3, "last_activity_date": 1510147244, "last_edit_date": 1510147244, "creation_date": 1510146775, "answer_id": 47180683, "question_id": 47180579, "link": "https://stackoverflow.com/questions/47180579/why-dont-i-receive-the-wanted-output-of-2-50000/47180683#47180683", "title": "Why don&#39;t I receive the wanted output of 2.50000...?", "body": "<p>You can't use <code>%f</code> to format an integer.  Doing so invokes undefined behavior.  The expression <code>5 / 2</code> is equal to the integer <code>2</code>.  You must either use an integer format, such as <code>%d</code>, or else cast it to <code>double</code> to use <code>%f</code>.  So change:</p>\n\n<pre><code>printf(\"%f\\n\", 5 / 2);\n</code></pre>\n\n<p>to either:</p>\n\n<pre><code>printf(\"%d\\n\", 5 / 2);\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>printf(\"%f\\n\", (double) (5 / 2));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "is_accepted": false, "score": 0, "last_activity_date": 1510146804, "creation_date": 1510146804, "answer_id": 47180692, "question_id": 47180579, "link": "https://stackoverflow.com/questions/47180579/why-dont-i-receive-the-wanted-output-of-2-50000/47180692#47180692", "title": "Why don&#39;t I receive the wanted output of 2.50000...?", "body": "<p>The problem is, that the argument in the printf parameter list must match the type specified in the format string. Here</p>\n\n<pre><code>printf(\"%f\\n\", (float)a);       // output: 65.000000\n</code></pre>\n\n<p>you get the output you expect, but here:</p>\n\n<pre><code>printf(\"%f\\n\", 5 / 2);\n</code></pre>\n\n<p>you don't get <code>2</code> (the expected result of an integer division), but <em>also</em> <code>65.00000</code>, since <code>printf()</code> \"looks in the wrong place\" for the value (i.e. some floating point register, where the result of the integer division isn't located, but the old value from the printf before lingers around).</p>\n\n<p>So, you always have to make sure, that the types of format string and printf parameters match correctly, otherwise undefined behaviour will occur.</p>\n"}, {"comments": [{"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1510152548, "post_id": 47181509, "comment_id": 81314177, "body": "Maybe nitpicking but they aren&#39;t executed left to right, but they associate left to right."}], "tags": [], "owner": {"reputation": 9095, "user_id": 8542346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11b206b49cec657d28a5876f8330780e?s=128&d=identicon&r=PG&f=1", "display_name": "H.S.", "link": "https://stackoverflow.com/users/8542346/h-s"}, "is_accepted": false, "score": 1, "last_activity_date": 1510152725, "last_edit_date": 1510152725, "creation_date": 1510149220, "answer_id": 47181509, "question_id": 47180579, "link": "https://stackoverflow.com/questions/47180579/why-dont-i-receive-the-wanted-output-of-2-50000/47181509#47181509", "title": "Why don&#39;t I receive the wanted output of 2.50000...?", "body": "<p>From <a href=\"http://port70.net/~nsz/c/c11/n1570.html#7.21.6.1p9\" rel=\"nofollow noreferrer\">C Standard#7.21.6.1p9</a></p>\n\n<blockquote>\n  <p>If a conversion specification is invalid, the behavior is undefined.282) If any argument is not the correct type for the corresponding conversion specification, the behavior is undefined.</p>\n</blockquote>\n\n<p>The expression <code>5/2</code> give the result as integer <code>2</code> which is an incorrect type for the conversion specification <code>%f</code> you are using in <code>printf()</code> and is leading to <strong>undefined behavior</strong>.</p>\n\n<p>In order to get the desired output (i.e. 2.500000), you can typecast the expression with <code>float</code> in <code>printf()</code>:</p>\n\n<pre><code>printf(\"%f\\n\", (float)5 / 2); // Output: 2.500000\n</code></pre>\n\n<p>As an alternative, you can multiply <code>5/2</code> with <code>1.0</code> to get the desired result, like this:</p>\n\n<pre><code>printf(\"%f\\n\", 1.0 * 5 / 2); // Output: 2.500000\n</code></pre>\n\n<p><strong>Caution:</strong> Here, make sure that in the expression <code>multiplication</code> with <code>1.0</code> should come before <code>5 / 2</code>, as both <code>multiplication</code> and <code>division</code> have the same precedence and left to right associativity. The result would differ from the desired result for the <code>5 / 2 * 1.0</code> expression in <code>printf()</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 8867897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10f78c943c837556d0e751d901c81496?s=128&d=identicon&r=PG&f=1", "display_name": "Yael123", "link": "https://stackoverflow.com/users/8867897/yael123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "answer_count": 3, "score": -10, "last_activity_date": 1510152725, "creation_date": 1510146496, "last_edit_date": 1510146585, "question_id": 47180579, "link": "https://stackoverflow.com/questions/47180579/why-dont-i-receive-the-wanted-output-of-2-50000", "title": "Why don&#39;t I receive the wanted output of 2.50000...?", "body": "<p>When I enter the line \"printf(\"%f\\n\", 5 / 2);\" in lines 18 and 21 I don't get 2.5000... but 0.0000 and 65 and I don't understand why. </p>\n\n<pre><code>int main(void){int a = 65;\nchar c = (char)a;\nint m = 3.0/2;\nprintf(\"%f\\n\", 5 / 2);\nprintf(\"%c\\n\", c);              // output: A\nprintf(\"%f\\n\", (float)a);       // output: 65.000000\nprintf(\"%f\\n\", 5 / 2);\nprintf(\"%f\\n\", 5.0 / 2);        // output: 2.5000000\nprintf(\"%f\\n\", 5 / 2.0);        // output: 2.5000000\nprintf(\"%f\\n\", (float)5 / 2);   // output: 2.5000000\nprintf(\"%f\\n\", 5 / (float)2);   // output: 2.5000000\nprintf(\"%f\\n\", (float)(5 / 2)); // output: 2.0000000 - we cast only after division and result was 2\nprintf(\"%f\\n\", 5.0 / 2);        // output: 2.5000000\nprintf(\"%d\\n\", m);              // output: 1\nsystem(\"PAUSE\");\nreturn 0; }\n</code></pre>\n\n<p>the output is:</p>\n\n<pre><code>0.000000\nA\n65.000000                                                                   \n65.000000\n2.500000\n2.500000\n2.500000\n2.500000\n2.000000\n2.500000\n1\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1510147684, "post_id": 47180516, "comment_id": 81310734, "body": "What is your question?"}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1510147900, "post_id": 47180516, "comment_id": 81310877, "body": "You can only detect that the writing end was closed by reading all bytes still buffered in the pipe and then reading <code>0</code> bytes, denoting EOF. When you observe that, terminate the second child explicitly by calling exit()"}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 2, "creation_date": 1510147966, "post_id": 47180516, "comment_id": 81310925, "body": "Your second child <i>is</i> terminating &quot;automatically&quot; (i.e., by detecting a zero read), it&#39;s just that due to the <code>sleep(3)</code> line, it will keep reading from the pipe buffer for a little while after <code>f1</code> died, until it reaches the end of the pipe buffer.  (BTW, you can write the buffer out at once with <code>fwrite</code>, and you should be accounting for the possibility of partial <code>reads</code>/<code>writes</code> as well)"}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "is_accepted": false, "score": 1, "last_activity_date": 1510147998, "creation_date": 1510147998, "answer_id": 47181089, "question_id": 47180516, "link": "https://stackoverflow.com/questions/47180516/is-pipe-terminated-when-i-have-destroyed-its-writing-end/47181089#47181089", "title": "Is pipe terminated when i have destroyed its writing end?", "body": "<p>\"Terminated\" isn't the usual terminology for a pipe, and it might be causing a slight misunderstanding. The termination of the writing process isn't immediately \"felt\" by the reader if there is still data in the buffer.</p>\n\n<p>To summarize the program, you have one process that writes to a pipe at a rate of 1 line per second for 5 seconds, then dies. Another process reads from the pipe at a rate of 1 line every 3 seconds until EOF or error, then exits.</p>\n\n<p>The lines are small and fixed-size so there's no chance of reading an incomplete line.</p>\n\n<p>Nothing in the program should cause an error on the pipe, so the second child process will read until EOF.</p>\n\n<p>EOF on a pipe occurs when 2 conditions are met: there are no writers, and the buffer is empty. The death of the first child process accomplishes the first condition. The second condition is not immediately true, because at the 5 second mark, there have been 5 lines written to the pipe, and only 2 of them have been read (one at the start, and one after 3 seconds).</p>\n\n<p>The second child process keeps reading, pulling in the remaining lines, and eventually exits after about 5*3=15 seconds.</p>\n\n<p>(The timing isn't infinitely precise, so you aren't guaranteed to get exactly 5 lines written to the pipe. When I ran it I got 6.)</p>\n"}], "owner": {"reputation": 21, "user_id": 7727633, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a26b2c836ea13bcb234dbc379ca7f768?s=128&d=identicon&r=PG&f=1", "display_name": "AnorLondo", "link": "https://stackoverflow.com/users/7727633/anorlondo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1510154743, "creation_date": 1510146303, "last_edit_date": 1510154743, "question_id": 47180516, "link": "https://stackoverflow.com/questions/47180516/is-pipe-terminated-when-i-have-destroyed-its-writing-end", "title": "Is pipe terminated when i have destroyed its writing end?", "body": "<p>I have parent process that creates two child processes. First child will write to pipe and second child will read from the pipe. After 5 seconds parent will terminate first child.(so its write end should be automatically closed, isn't it?). I need second child to terminate automatically, because it uses pipe and after first child is terminated, the pipe should be terminated too. My problem: how can i force child 2 to die immediately when child 1 i killed?(i don't need child 2 to print something after child 1 is dead, even if he still has any information in the pipe buffer to read). Should i use pipe2 instead of simple pipe?</p>\n\n<pre><code>void do_close(int fd){\n    if(close(fd) != 0){\n        perror(\"close\");\n        exit(2);\n    }\n\n}\nvoid signalhandler(int signum){\n    fprintf(stderr, \"f1 terminated!\\n\");\n    exit(1);\n}\nint main(){\npid_t f1 = -1, f2 = -1;\nint pipefd[2];\nif(pipe(pipefd) == -1){\n    perror(\"pipe\");\n    exit(2);\n}\nf1 = fork();\nif(f1 &gt; 0){\n    f2 = fork();\n}\n\nif(f1 &gt; 0 &amp;&amp; f2 &gt; 0){\n    do_close(pipefd[0]);\n    do_close(pipefd[1]);\n    sleep(5);\n    kill(f1, SIGTERM);  \n    waitpid(f1, NULL, 0);\n    waitpid(f2, NULL, 0);\n}\nelse if(f1 == 0){\n    signal(SIGTERM, signalhandler);\n    do_close(pipefd[0]);\n    while(1){\n        fflush(stdout);\n        write(pipefd[1], \"Hello world!\\n\", 13);\n        sleep(1);\n    }\n}\nelse if(f2 == 0){\n    do_close(pipefd[1]);\n    char *buf = (char*)malloc(13);\n        while(read(pipefd[0], buf, 13) &gt; 0){\n            for(int i = 0; i &lt; 13; i++){\n                printf(\"%c\", buf[i]);\n            }\n            sleep(3);\n        }\n\n}\n\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c", "sockets"], "comments": [{"owner": {"reputation": 3693, "user_id": 5494721, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WHK5j.png?s=128&g=1", "display_name": "OznOg", "link": "https://stackoverflow.com/users/5494721/oznog"}, "edited": false, "score": 0, "creation_date": 1510153407, "post_id": 47179793, "comment_id": 81314851, "body": "are you sure this is really the problem? <a href=\"https://elixir.free-electrons.com/linux/latest/source/net/socket.c#L1548\" rel=\"nofollow noreferrer\">elixir.free-electrons.com/linux/latest/source/net/&hellip;</a> seems that the accept is done only once the allocation is done (and file limits checks) thus your probelm seems strange to me"}, {"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "reply_to_user": {"reputation": 3693, "user_id": 5494721, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WHK5j.png?s=128&g=1", "display_name": "OznOg", "link": "https://stackoverflow.com/users/5494721/oznog"}, "edited": false, "score": 0, "creation_date": 1510153614, "post_id": 47179793, "comment_id": 81315038, "body": "@OznOg he went so far as to provide a working example of the problem ... in the code you link, if the allocation fails then the <code>accept</code> syscall returns an error, does it not?"}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1510153780, "post_id": 47179793, "comment_id": 81315187, "body": "OznOg You confuse accept()ing a connection with completing the three-way-handshake. As I elaborated in my answer below, the client cannot tell, when the server accepted the connection (if at all), since the three-way-handshake is completed immediately by the OS (if the backlog still has space left)"}], "answers": [{"comments": [{"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "edited": false, "score": 1, "creation_date": 1510152952, "post_id": 47181734, "comment_id": 81314513, "body": "Note that the <code>sleep</code> solution requires that your program is multi-threaded, i.e. you are relying on another thread eventually freeing a file descriptor."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "reply_to_user": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "edited": false, "score": 0, "creation_date": 1510154308, "post_id": 47181734, "comment_id": 81315620, "body": "@davmac Yes, a call to sleep() is not necessarily the way to go, this was just meant to illustrate the concept... If the server is single threaded, you can keep the listening fd out of the select()/poll()-readfd-set for some time for example"}], "tags": [], "owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "is_accepted": false, "score": 2, "last_activity_date": 1510149827, "creation_date": 1510149827, "answer_id": 47181734, "question_id": 47179793, "link": "https://stackoverflow.com/questions/47179793/how-to-gracefully-handle-accept-giving-emfile-and-close-the-connection/47181734#47181734", "title": "How to gracefully handle accept() giving EMFILE and close the connection?", "body": "<p><strong>Problem</strong></p>\n\n<p>You cannot accept client connections, if the maximum number of file descriptors is reached. This can be a process limit (errno <code>EMFILE</code>) or a global system limit (errno <code>ENFILE</code>). The client does not immediately notice this situation and it looks to him like the connection was accepted by the server. If too many such connections pile up on the socket (when the backlog runs full), the server will stop sending syn-ack packets and the connection request will time out at the client (which can be quite an annoying delay)</p>\n\n<p><strong>Number of file descriptors</strong></p>\n\n<p>It is of course possible, to extend both limits when they are hit. For the process wide limit, use <code>setrlimit(RLIMIT_NOFILE, ...)</code>, for the system wide limit <code>sysctl()</code> is the command to call. Both may require root privileges, the first one only to rise the hard limit.</p>\n\n<p>However, there usually is a good reason for the file descriptor limit to prevent overusage of system resources, so this will not be a solution for all situations.</p>\n\n<p><strong>Recovering from EMFILE</strong></p>\n\n<p>One option is to implement a <code>sleep(n)</code> after <code>EMFILE</code> is received, one second should be enough to prevent additional system load by calling <code>accept()</code> too often. This may be useful to handle short bursts of connections.</p>\n\n<p>However, if the situation doesn't normalize soon, other measures should be taken (for example, if sleep() had to be called 5 times in a row or similar).</p>\n\n<p>In this case it is advisable to close the server socket. All pending client connections will be terminated immediately (by receiving a RST packet) and the clients can use another server if applicable. Furthermore, no new client connections are accepted, but <em>immediately</em> rejected (Connection Refused) instead of timing out as it might happen when the socket is held open.</p>\n\n<p>After the contention releases, the server socket can be opened again. For the <code>EMFILE</code> case it is only necessary to track the number of open client connections and re-open the server socket, when these fall below some threshold. In the system-wide case, there is not a general answer for that, maybe just try after some time or use the /proc filesystem or system tools like <code>lsof</code> to find out when the contention ceases.</p>\n"}, {"comments": [{"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1510153631, "post_id": 47182762, "comment_id": 81315050, "body": "Where exactly do you see the advantage to closing the listening socket?"}, {"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "reply_to_user": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1510153806, "post_id": 47182762, "comment_id": 81315207, "body": "@Ctx well, especially in a multi-threaded program, if you close the listening socket then you run the risk of not being able to open it again. It&#39;s tenuous though, I&#39;ll grant."}, {"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "reply_to_user": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1510153965, "post_id": 47182762, "comment_id": 81315338, "body": "(perhaps the advantage is that you can tell from the client end what is wrong. I.e. if the connection is refused then the server program may have crashed; if the connection is accepted but immediately closed you know that it&#39;s a response to high load)."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1510154184, "post_id": 47182762, "comment_id": 81315527, "body": "Or that the server keeps constantly segfaulting... ;)"}, {"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "reply_to_user": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1510159477, "post_id": 47182762, "comment_id": 81319384, "body": "@Ctx True. :)  Another case: you have a multi-process server with each process listening to the same socket. Closing it achieves nothing in that case and it would be particularly difficult to re-open."}, {"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "reply_to_user": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1510159745, "post_id": 47182762, "comment_id": 81319569, "body": "(I don&#39;t actually believe that multi-process servers are the right solution for any problem in the modern age, but some people do. It&#39;s true that they&#39;re often a little easier to write than multi-threaded servers)."}], "tags": [], "owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "is_accepted": false, "score": 2, "last_activity_date": 1510161788, "last_edit_date": 1510161788, "creation_date": 1510152813, "answer_id": 47182762, "question_id": 47179793, "link": "https://stackoverflow.com/questions/47179793/how-to-gracefully-handle-accept-giving-emfile-and-close-the-connection/47182762#47182762", "title": "How to gracefully handle accept() giving EMFILE and close the connection?", "body": "<p>One solution I've read about is to keep a \"spare\" file descriptor handy that you can use to accept and immediately close new connections when you're over fd capacity. For example:</p>\n\n<pre><code>int sparefd = open(\"/dev/null\", O_RDONLY);\n</code></pre>\n\n<p>Then, when <code>accept</code> returns with <code>EMFILE</code>, you can:</p>\n\n<pre><code>close(sparefd); // create an available file descriptor\nint newfd = accept(...);  // accept a new connection\nclose(newfd);   // immediately close the connection\nsparefd = open(\"/dev/null\", O_RDONLY);  // re-create spare\n</code></pre>\n\n<p>It's not exactly elegant, but it's probably a little better than closing the listening socket in some circumstances. Be wary that if your program is multi-threaded then another thread might \"claim\" the spare fd as soon as you release it; there's no easy way to solve that (the \"hard\" way is to put a mutex around every operation that might consume a file descriptor).</p>\n"}, {"tags": [], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "is_accepted": true, "score": 3, "last_activity_date": 1510162219, "last_edit_date": 1510162219, "creation_date": 1510152957, "answer_id": 47182816, "question_id": 47179793, "link": "https://stackoverflow.com/questions/47179793/how-to-gracefully-handle-accept-giving-emfile-and-close-the-connection/47182816#47182816", "title": "How to gracefully handle accept() giving EMFILE and close the connection?", "body": "<p>You can set aside an extra fd at the beginning of your program and keep  track of the EMFILE condition:</p>\n\n<pre><code>int reserve_fd;\n_Bool out_of_fd = 0;\n\nif(0&gt;(reserve_fd = dup(1)))\n    err(\"dup()\");\n</code></pre>\n\n<p>Then, if you hit the EMFILE condition, you can close the <code>reserve_fd</code> and use its slot to accept the new connection (which you'll then immediately close):</p>\n\n<pre><code>clientfd = accept(serversocket,(struct sockaddr*)&amp;client_addr,&amp;client_len);\nif (out_of_fd){\n    close(clientfd);\n    if(0&gt;(reserve_fd = dup(1)))\n        err(\"dup()\");\n    out_of_fd=0;\n\n    continue; /*doing other stuff that'll hopefully free the fd*/\n}\n\nif(clientfd &lt; 0)  {\n    close(reserve_fd);\n    out_of_fd=1;\n    continue;\n}\n</code></pre>\n\n<p>Complete example:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;arpa/inet.h&gt;\n\n\nstatic void err(const char *str)\n{\n    perror(str);\n    exit(1);\n}\n\n\nint main(int argc,char *argv[])\n{\n    int serversocket;\n    struct sockaddr_in serv_addr;\n    serversocket = socket(AF_INET,SOCK_STREAM,0);\n    if(serversocket &lt; 0)\n        err(\"socket()\");\n    int yes;\n    if ( -1 == setsockopt(serversocket, SOL_SOCKET, SO_REUSEADDR, &amp;yes, sizeof(int)) )\n        perror(\"setsockopt\");\n\n\n    memset(&amp;serv_addr,0,sizeof serv_addr);\n\n    serv_addr.sin_family = AF_INET;\n    serv_addr.sin_addr.s_addr= INADDR_ANY;\n    serv_addr.sin_port = htons(6543);\n    if(bind(serversocket,(struct sockaddr*)&amp;serv_addr,sizeof serv_addr) &lt; 0)\n        err(\"bind()\");\n\n    if(listen(serversocket,10) &lt; 0)\n        err(\"listen()\");\n\n    int reserve_fd;\n    int out_of_fd = 0;\n\n    if(0&gt;(reserve_fd = dup(1)))\n        err(\"dup()\");\n\n\n    for(;;) {\n        struct sockaddr_storage client_addr;\n        socklen_t client_len = sizeof client_addr;\n        int clientfd;\n\n\n        clientfd = accept(serversocket,(struct sockaddr*)&amp;client_addr,&amp;client_len);\n        if (out_of_fd){\n            close(clientfd);\n            if(0&gt;(reserve_fd = dup(1)))\n                err(\"dup()\");\n            out_of_fd=0;\n\n            continue; /*doing other stuff that'll hopefully free the fd*/\n        }\n\n        if(clientfd &lt; 0)  {\n            close(reserve_fd);\n            out_of_fd=1;\n            continue;\n        }\n\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>If you're multithreaded, then I imagine you'd need a lock around fd-producing functions and take it when you close the extra fd (while expecting to accept the final connection) in order to prevent having the spare slot filled by another thread.</p>\n\n<p>All this should only makes sense if 1) the listening socket isn't shared with other processes (which might not have hit their EMFILE limit yet) and 2) the server deals with persistent connections (because if it doesn't, then you're bound to close some existing connection very soon, freeing up a fd slot for your next attempt at <code>accept</code>). </p>\n"}], "owner": {"reputation": 1342, "user_id": 5508532, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/67f7923644113e4d8897b755a75b8272?s=128&d=identicon&r=PG&f=1", "display_name": "binary01", "link": "https://stackoverflow.com/users/5508532/binary01"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 811, "favorite_count": 2, "accepted_answer_id": 47182816, "answer_count": 3, "score": 7, "last_activity_date": 1510162219, "creation_date": 1510144151, "question_id": 47179793, "link": "https://stackoverflow.com/questions/47179793/how-to-gracefully-handle-accept-giving-emfile-and-close-the-connection", "title": "How to gracefully handle accept() giving EMFILE and close the connection?", "body": "<p>When a process runs out of file descriptors, accept() will fail and set <code>errno</code> to EMFILE.\nHowever the underlying connection that would have been accepted are not closed, so there appears to be no way to inform the client that the application code could not handle the connection.</p>\n\n<p>The question is what is the proper action to take regarding accepting TCP connections when running out of file descriptors.</p>\n\n<p>The following code demonstrates the issue that I want to learn how to best deal with(note this is just example code for demonstrating the issue/question, not production code)</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;arpa/inet.h&gt;\n\n\nstatic void err(const char *str)\n{\n    perror(str);\n    exit(1);\n}\n\n\nint main(int argc,char *argv[])\n{\n    int serversocket;\n    struct sockaddr_in serv_addr;\n    serversocket = socket(AF_INET,SOCK_STREAM,0);\n    if(serversocket &lt; 0)\n        err(\"socket()\");\n\n    memset(&amp;serv_addr,0,sizeof serv_addr);\n\n    serv_addr.sin_family = AF_INET;\n    serv_addr.sin_addr.s_addr= INADDR_ANY;\n    serv_addr.sin_port = htons(6543);\n    if(bind(serversocket,(struct sockaddr*)&amp;serv_addr,sizeof serv_addr) &lt; 0)\n        err(\"bind()\");\n\n    if(listen(serversocket,10) &lt; 0)\n        err(\"listen()\");\n\n    for(;;) {\n        struct sockaddr_storage client_addr;\n        socklen_t client_len = sizeof client_addr;\n        int clientfd;\n\n        clientfd = accept(serversocket,(struct sockaddr*)&amp;client_addr,&amp;client_len);\n        if(clientfd &lt; 0)  {\n            continue;\n        }\n\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Compile and run this code with a limited number of file descriptors available:</p>\n\n<pre><code>gcc srv.c\nulimit -n 10\nstrace -t ./a.out 2&gt;&amp;1 |less\n</code></pre>\n\n<p>And in another console, I run</p>\n\n<pre><code> telnet localhost 65432 &amp;\n</code></pre>\n\n<p>As many times as needed until accept() fails:</p>\n\n<p>The output from strace shows this to happen:</p>\n\n<pre><code>13:21:12 socket(AF_INET, SOCK_STREAM, IPPROTO_IP) = 3\n13:21:12 bind(3, {sa_family=AF_INET, sin_port=htons(6543), sin_addr=inet_addr(\"0.0.0.0\")}, 16) = 0\n13:21:12 listen(3, 10)                  = 0\n13:21:12 accept(3, {sa_family=AF_INET, sin_port=htons(43630), sin_addr=inet_addr(\"127.0.0.1\")}, [128-&gt;16]) = 4\n13:21:19 accept(3, {sa_family=AF_INET, sin_port=htons(43634), sin_addr=inet_addr(\"127.0.0.1\")}, [128-&gt;16]) = 5\n13:21:22 accept(3, {sa_family=AF_INET, sin_port=htons(43638), sin_addr=inet_addr(\"127.0.0.1\")}, [128-&gt;16]) = 6\n13:21:23 accept(3, {sa_family=AF_INET, sin_port=htons(43642), sin_addr=inet_addr(\"127.0.0.1\")}, [128-&gt;16]) = 7\n13:21:24 accept(3, {sa_family=AF_INET, sin_port=htons(43646), sin_addr=inet_addr(\"127.0.0.1\")}, [128-&gt;16]) = 8\n13:21:26 accept(3, {sa_family=AF_INET, sin_port=htons(43650), sin_addr=inet_addr(\"127.0.0.1\")}, [128-&gt;16]) = 9\n13:21:27 accept(3, 0xbfe718f4, [128])   = -1 EMFILE (Too many open files)\n13:21:27 accept(3, 0xbfe718f4, [128])   = -1 EMFILE (Too many open files)\n13:21:27 accept(3, 0xbfe718f4, [128])   = -1 EMFILE (Too many open files)\n13:21:27 accept(3, 0xbfe718f4, [128])   = -1 EMFILE (Too many open files)\n ... and thousands upon thousands of more accept() failures.\n</code></pre>\n\n<p>Basically at this point:</p>\n\n<ul>\n<li>the code will call accept() as fast as possible failing to accept the same TCP connection over and over again, churning CPU. </li>\n<li>the client will stay connected, (as the TCP handshake completes before the application accepts the connection) and the client gets no information that there is an issue.</li>\n</ul>\n\n<p>So,</p>\n\n<ol>\n<li><p>Is there a way to force the TCP connection that caused accept() to fail to be closed (so e.g. the client can be quickly informed and perhaps try another server )</p></li>\n<li><p>What is the est practice to prevent the server code to go into an infinite loop when this situation arises (or to prevent the situation altogether)</p></li>\n</ol>\n"}, {"tags": ["c", "embedded"], "comments": [{"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 5, "creation_date": 1510143768, "post_id": 47179619, "comment_id": 81308032, "body": "If the data you&#39;re reading is &quot;binary&quot;, then there&#39;s no reason to believe it&#39;s going to be a C string, i.e. 0-terminated. So the use of <code>strlen()</code> seems very suspicious."}, {"owner": {"reputation": 11, "user_id": 8732854, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/8018b11b3afb0fa059a52306d077a2b1?s=128&d=identicon&r=PG&f=1", "display_name": "Lomazo", "link": "https://stackoverflow.com/users/8732854/lomazo"}, "reply_to_user": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1510144624, "post_id": 47179619, "comment_id": 81308641, "body": "You are right. I was writting on the file like this <code>fwrite(buf,strlen(buf),1,fptr);</code>. I changed <code>strlen</code> for <code>n</code> and now it works"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1510223959, "post_id": 47179619, "comment_id": 81347809, "body": "Don&#39;t use <code>char</code> types for hardware-related programming, use <code>uint8_t</code>. Always."}], "answers": [{"tags": [], "owner": {"reputation": 6356, "user_id": 1109725, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ab7e17981e19525fe1bed0878d0d2cc9?s=128&d=identicon&r=PG", "display_name": "Joe", "link": "https://stackoverflow.com/users/1109725/joe"}, "is_accepted": false, "score": 1, "last_activity_date": 1510144290, "last_edit_date": 1510144290, "creation_date": 1510143967, "answer_id": 47179730, "question_id": 47179619, "link": "https://stackoverflow.com/questions/47179619/losing-data-on-serial-read/47179730#47179730", "title": "Losing data on serial read", "body": "<p>A couple of points. As unwind points out, if you're using binary data with strlen, your new code won't work.</p>\n\n<p>However your need to check the return value from read is correct. It is likely not to return the amount of data you expect (merely being task switched while reading will give you problems).</p>\n\n<p>So I suspect you're on the right track, checking that you've read what you expect and going back to get what's left if it is a short read. You just can't do that by using strlen on binary data.</p>\n\n<p>It's reasonably common for people to write a \"read_all\" function, that keeps reading until it's got all the data needed or drops out when there's an error, read on its own does not behave like this.</p>\n\n<p>I'd probably modify your check like so:</p>\n\n<pre><code>if((n = read(fd, &amp;buf, sizeof(buf)) != sizeof(buf)) {\n// Check for errors or short reads and handle appropriately.\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8732854, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/8018b11b3afb0fa059a52306d077a2b1?s=128&d=identicon&r=PG&f=1", "display_name": "Lomazo", "link": "https://stackoverflow.com/users/8732854/lomazo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1510144290, "creation_date": 1510143657, "question_id": 47179619, "link": "https://stackoverflow.com/questions/47179619/losing-data-on-serial-read", "title": "Losing data on serial read", "body": "<p>Im trying to writte a small app in C that reads data from serial port and stores it in a binary file. I'm using this instruction to read from serial but I loose data.</p>\n\n<pre><code>n = read(fd, &amp;buf, sizeof(buf));\n</code></pre>\n\n<p>So I added this code right after the previous one in order to see what happens.</p>\n\n<pre><code>    if(n!= strlen(buf)&amp;&amp;n!=-1){\n        printf(\"N= %d strlen = %d\\n\",n,strlen(buf));\n        printf(\"%s\",buf);\n    }\n</code></pre>\n\n<p>I saw that the value of <code>n</code> is correct but the <code>strlen(buf)</code> is not (should be the same as <code>n</code> ) and I dont know why....\nThe buffer variable <code>buf</code> is defined like this <code>char[1000] buf;</code> and <code>n</code> is a integer.</p>\n\n<p>The port is in raw mode on both sides, and this is how i set it on the side of my app.</p>\n\n<pre><code>tcgetattr(fd, &amp;options);\n\n    /*\n     * Set the baud rates to 38400...\n     */\n\n    cfsetispeed(&amp;options, B38400);\n    cfsetospeed(&amp;options, B38400);\n\n    /*\n     * Enable the receiver and set local mode...\n     */\n\n    options.c_cflag |= (CLOCAL | CREAD);\n\n    /*\n     * No parity (8N1):\n     */\n    options.c_cflag &amp;= ~PARENB;\n    options.c_cflag &amp;= ~CSTOPB;\n    options.c_cflag &amp;= ~CSIZE;\n    options.c_cflag |= CS8;\n\n    /* To disable software flow control simply mask those bits: */\n    options.c_iflag &amp;= ~(IXON | IXOFF | IXANY);\n    options.c_lflag &amp;= ~(ICANON|ECHO|ECHOE|ISIG);\n\n    /* Disable hardware flow control: */\n    /* unavailable to the gcc -&gt; options.c_cflag &amp;= ~CNEW_RTSCTS;*/\n\n    /*\n     * Set the new options for the port...\n     */\n\n    tcsetattr(fd, TCSANOW, &amp;options);\n</code></pre>\n\n<p>Any idea what could I be doing wrong?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c", "pointers", "casting"], "comments": [{"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1510143309, "post_id": 47179443, "comment_id": 81307708, "body": "if you want manipulated bit use bitwise operator"}, {"owner": {"reputation": 486140, "user_id": 1187415, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/LpTRB.png?s=128&g=1", "display_name": "Martin R", "link": "https://stackoverflow.com/users/1187415/martin-r"}, "edited": false, "score": 0, "creation_date": 1510144674, "post_id": 47179443, "comment_id": 81308679, "body": "Related: <a href=\"https://stackoverflow.com/q/35496014/1187415\">stackoverflow.com/q/35496014/1187415</a>."}], "answers": [{"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1510144391, "post_id": 47179732, "comment_id": 81308469, "body": "The C language does however allow lvalue access of the data that <code>ptr32orig</code> points as through an lvalue expression of character type (such as uint8_t). If you take <code>*cptr</code> then you must access the data pointed at by <code>ptr32orig</code>, in some implementation-defined manner. This <i>does</i> imply that <code>cptr</code> must point at the same location as <code>ptr32orig</code>."}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1510144471, "post_id": 47179732, "comment_id": 81308536, "body": "Note that none of the cast in this exemple are needed."}, {"owner": {"reputation": 486140, "user_id": 1187415, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/LpTRB.png?s=128&g=1", "display_name": "Martin R", "link": "https://stackoverflow.com/users/1187415/martin-r"}, "edited": false, "score": 1, "creation_date": 1510144498, "post_id": 47179732, "comment_id": 81308550, "body": "Doesn&#39;t your answer contradict your older answer here: <a href=\"https://stackoverflow.com/a/35496066/1187415\">stackoverflow.com/a/35496066/1187415</a> ? <i>&quot;Converting an <code>int*</code> to <code>char*</code>, therefore, is allowed, and it is also portable. The pointer would be pointing to the initial byte of your <code>int</code>&#39;s internal representation.&quot;</i>"}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "reply_to_user": {"reputation": 486140, "user_id": 1187415, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/LpTRB.png?s=128&g=1", "display_name": "Martin R", "link": "https://stackoverflow.com/users/1187415/martin-r"}, "edited": false, "score": 2, "creation_date": 1510145009, "post_id": 47179732, "comment_id": 81308900, "body": "@MartinR No, the <i>value</i> of a pointer is not mandatory to be the same after the cast, but it&#39;s must &quot;pointing to&quot; the same byte. So only when you dereference it."}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "reply_to_user": {"reputation": 486140, "user_id": 1187415, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/LpTRB.png?s=128&g=1", "display_name": "Martin R", "link": "https://stackoverflow.com/users/1187415/martin-r"}, "edited": false, "score": 1, "creation_date": 1510145892, "post_id": 47179732, "comment_id": 81309470, "body": "@MartinR There is no contradiction. Here is an example: let&#39;s say I have <code>uint32_t *ptr</code> that is equal to <code>0xC003</code>, with bytes of <code>uint32_t</code> pointed to by this pointer located in bytes <code>0xC000..0xC003</code>. The standard requires that when I cast <code>ptr</code> to <code>char*</code> I get back <code>0xC000</code>. It does not require the cast to be a no-op, so the compiler is allowed to do some &quot;pointer translation&quot;. In the interests of full disclosure, I&#39;ve never seen a platform with such crazy behavior, but I don&#39;t think the standard prohibits that."}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": false, "score": 4, "last_activity_date": 1510143971, "creation_date": 1510143971, "answer_id": 47179732, "question_id": 47179443, "link": "https://stackoverflow.com/questions/47179443/is-a-pointer-cast-platform-dependent/47179732#47179732", "title": "Is a pointer cast platform dependent?", "body": "<p>Your guess is not possible to prove or disprove, because the standard makes no requirement for the pointers to point to a certain numeric location.</p>\n\n<p>The standard requires your <code>uint32_t*</code> pointer to be convertible to <code>void*</code>, which has the same representation as <code>char*</code> (and by extension, <code>uint8_t*</code>) pointers. The compiler must be able to \"round-trip\" the pointer like this:</p>\n\n<pre><code>uint32_t *ptr32orig = ... // Assign some valid value\nvoid *tmp1 = (void*)ptr32orig;\nchar *cptr = (char*)tmp1;\n// cptr has the same representation as tmp1\nvoid *tmp2 = (void*)cptr;\n// At this point, tmp1 must be equal to tmp2\nuint32_t *ptr32back = (uint32_t*)tmp2;\n// At this point ptr32back must be equal to ptr32orig\n</code></pre>\n\n<p>This seems to imply that <code>cptr</code> must point to the same location as <code>ptr32orig</code>, but that's not right: the compiler is allowed to do whatever \"magic\" it wants on converting of <code>ptr32orig</code> to <code>tmp1</code>, and then undo its effects on converting <code>tmp2</code> back to <code>uint32_t*</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 0, "creation_date": 1510144315, "post_id": 47179782, "comment_id": 81308423, "body": "Are you sure about strict aliasing requiring pointer equality? Couldn&#39;t the compiler give you a numerically different pointer when you convert <code>uint32_t*</code> to <code>uint8_t*</code> to enable byte-by-byte access to proceed correctly?"}, {"owner": {"reputation": 2131, "user_id": 3726169, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ad0f33269912ab7a2fb9f30df6f2d392?s=128&d=identicon&r=PG&f=1", "display_name": "Jon Chesterfield", "link": "https://stackoverflow.com/users/3726169/jon-chesterfield"}, "edited": false, "score": 0, "creation_date": 1510144459, "post_id": 47179782, "comment_id": 81308526, "body": "uint8_t isn&#39;t required to be a typedef to a character type (6.2.5)"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 0, "creation_date": 1510144996, "post_id": 47179782, "comment_id": 81308886, "body": "@dasblinkenlight The requirement doesn&#39;t actually come from strict aliasing but from the rules of pointer conversions, C11 6.3.2.3: &quot;When a pointer to an object is converted to a pointer to a character type, the result points to the lowest addressed byte of the object.&quot;  Let me add this text to the answer."}, {"owner": {"reputation": 3565, "user_id": 878936, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/766faba0aa02b867b869615526c9192e?s=128&d=identicon&r=PG", "display_name": "Toby", "link": "https://stackoverflow.com/users/878936/toby"}, "edited": false, "score": 0, "creation_date": 1510145269, "post_id": 47179782, "comment_id": 81309084, "body": "Great answer and thanks for the reference to the C-Standard. Is it also defined somewhere, that a pointer (without conversion) points to the lowest address of an object?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 2131, "user_id": 3726169, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ad0f33269912ab7a2fb9f30df6f2d392?s=128&d=identicon&r=PG&f=1", "display_name": "Jon Chesterfield", "link": "https://stackoverflow.com/users/3726169/jon-chesterfield"}, "edited": false, "score": 0, "creation_date": 1510145344, "post_id": 47179782, "comment_id": 81309131, "body": "@JonChesterfield The stdint.h types map to the primitive data types. For <code>uint8_t</code> to be meaningful in real-world applications, it must always be a character type. A compiler treating it as something else would be useless and broken. Try it yourself on any real world compiler: <code>_Generic((uint8_t){0}, unsigned char: puts(&quot;I am a character type&quot;));</code>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1510145413, "post_id": 47179782, "comment_id": 81309177, "body": "@Stargateur No, but it must be a character type in order to make stdint.h usable in real-world applications, see comment above."}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1510145653, "post_id": 47179782, "comment_id": 81309336, "body": "@Lundin <code>uint8_t</code> is <i>generally</i> a <code>char</code>, but we are talking about strict C standard and it doesn&#39;t define <code>uint8_t</code> as character type (AFAIK), <code>char</code> size could be greater that 8 bit on some implementation. Your exemple with generic will just point out the implementation of <code>uint8_t</code> but this not prouve that standard say that <code>uint8_t</code> is a character type."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 2, "creation_date": 1510145952, "post_id": 47179782, "comment_id": 81309506, "body": "@Stargateur Such an implementation would not support <code>uint8_t</code>, so that specific case is irrelevant. In addition, the only real-world systems that actually have a <code>char</code> type wider than 8 bits are various dysfunctional, mostly obsolete DSPs, most of them from TI. Anyone designing for C source compatibility with those DSPs, are seriously wasting their time. Anyone writing programs for those DSPs in C and not in assembler is most likely confused. Instead, design your C programs for compatibility with real-world computers."}, {"owner": {"reputation": 2131, "user_id": 3726169, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ad0f33269912ab7a2fb9f30df6f2d392?s=128&d=identicon&r=PG&f=1", "display_name": "Jon Chesterfield", "link": "https://stackoverflow.com/users/3726169/jon-chesterfield"}, "edited": false, "score": 0, "creation_date": 1510146229, "post_id": 47179782, "comment_id": 81309682, "body": "@Lundin There&#39;s a fairly long track record of compilers doing inconvenient things in the name of optimisation. Some discussion from gcc <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=66110\" rel=\"nofollow noreferrer\">gcc.gnu.org/bugzilla/show_bug.cgi?id=66110</a> , llvm <a href=\"https://bugs.llvm.org/show_bug.cgi?id=31410\" rel=\"nofollow noreferrer\">bugs.llvm.org/show_bug.cgi?id=31410</a>. Both currently treat uint8_t as a character."}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1510146248, "post_id": 47179782, "comment_id": 81309694, "body": "@Lundin If you just use joker card &quot;real-world&quot;, I will stop try to explain you, but what you said is in conflict with the first spirit of C and the desire of the committee. C try to leave free implementation to be very portable. Maybe you don&#39;t care about these 1% of strange implementation but they exist."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1510148094, "post_id": 47179782, "comment_id": 81311012, "body": "@Stargateur The &quot;first spirit of C&quot; was unfortunately one of the dumber things in computer history. They assumed that machines that did not use 2&#39;s complement would exist. They assumed that machines would have mysterious representations of pointers that don&#39;t correspond to physical addresses. They assumed that one byte is not necessarily 8 bits. And so on. History has proven that all of this was pure and utter nonsense. All it is good for is endless language-lawyer discussions like this one, that have been going on since the 1970s. This isn&#39;t productive. Why we should focus on the real world."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1510150521, "post_id": 47179782, "comment_id": 81312743, "body": "They didn&#39;t need to assume. It was just a <b>plain fact</b>."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1510151216, "post_id": 47179782, "comment_id": 81313231, "body": "@AnttiHaapala Citation needed. Try to do research on how many one&#39;s complement computers that have existed in the real world. I once did this out of curiosity and only found one, some highly experimental supercomputer in the 1960s. So at the point when C was designed in the 1970s, only 1 or 2 such computers had ever existed. 20 years later when C was standardized, the amount of one&#39;s complement computers that had ever existed remained the same. None of them were in use. If any signed magnitude computers have ever existed, I do not know. Yet the C90 committee insisted on supporting them."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1510151878, "post_id": 47179782, "comment_id": 81313707, "body": "One&#39;s complement?! <a href=\"https://public.support.unisys.com/framework/publicterms.aspx?returnurl=%2f2200%2fdocs%2fcp14.0%2fpdf%2f78310422-011.pdf\" rel=\"nofollow noreferrer\">public.support.unisys.com/framework/&hellip;</a>"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1510151928, "post_id": 47179782, "comment_id": 81313735, "body": "&quot;UCS C represents an integer in 36-bit ones complement form (or 72-bit ones complement form, if the long long type attribute is specified). Unless the CONFORMANCE/ TWOSARITH keyword is used, there is no representation change when converting a signed int value to unsigned int or when converting an unsigned int value to signed int. For more information on the CONFORMANCE keyword, see the C Compiler Programming Reference Manual Volume 2.&quot;"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1510151992, "post_id": 47179782, "comment_id": 81313775, "body": "And that document is from <i>this</i> decade."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1510152145, "post_id": 47179782, "comment_id": 81313892, "body": "@AnttiHaapala Well that sounds like a lovely system to work with. I&#39;ll adjust all my existing C programs for compatibility right away."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1510152165, "post_id": 47179782, "comment_id": 81313907, "body": "Down voters care to explain what is incorrect in the answer?"}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1510158626, "post_id": 47179782, "comment_id": 81318810, "body": "@Lundin I already tell it, <code>uint8_t</code> <b>is not a character type</b>, the only character type are &quot;char, signed char and unsigned char&quot;."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": true, "score": 0, "last_activity_date": 1510145521, "last_edit_date": 1510145521, "creation_date": 1510144131, "answer_id": 47179782, "question_id": 47179443, "link": "https://stackoverflow.com/questions/47179443/is-a-pointer-cast-platform-dependent/47179782#47179782", "title": "Is a pointer cast platform dependent?", "body": "<blockquote>\n  <p>Is my guess correct? If not, whats right?</p>\n</blockquote>\n\n<p>Yes, the pointer will point at the first address no matter endianess. The content stored on that address will vary depending on endianess.</p>\n\n<hr>\n\n<blockquote>\n  <p>Is the address where the pointers point to platform/compiler/architecture dependent? </p>\n</blockquote>\n\n<p>No. </p>\n\n<p>(Except C does not place any restrictions on how a pointer is represented in practice)</p>\n\n<hr>\n\n<blockquote>\n  <p>Is the behaviour defined somewhere?</p>\n</blockquote>\n\n<p>Yes. The rules for pointer conversions (C11 6.3.2.3) state:</p>\n\n<blockquote>\n  <p>When a pointer to an object is converted to a pointer to a character type,\n  the result points to the lowest addressed byte of the object.</p>\n</blockquote>\n\n<p>Furthermore, the rules for <em>effective type</em> and <em>strict aliasing</em> (C11 6.5) allows you to access data of another type through a pointer to a character type such as <code>uint8_t</code>. </p>\n\n<p>You are not allowed to do the other way around though - if you have an array of <code>uint8_t</code>, you are not allowed to point at the first element of that array with a <code>uint32_t*</code> and then access the contents. Doing so would be a \"strict aliasing violation\".</p>\n"}], "owner": {"reputation": 3565, "user_id": 878936, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/766faba0aa02b867b869615526c9192e?s=128&d=identicon&r=PG", "display_name": "Toby", "link": "https://stackoverflow.com/users/878936/toby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "accepted_answer_id": 47179782, "answer_count": 2, "score": 2, "last_activity_date": 1510145521, "creation_date": 1510143169, "last_edit_date": 1510144205, "question_id": 47179443, "link": "https://stackoverflow.com/questions/47179443/is-a-pointer-cast-platform-dependent", "title": "Is a pointer cast platform dependent?", "body": "<p>Following example:</p>\n\n<pre><code>void foo(void)\n{\n    uint8* ptr_data8;        \n    uint32* ptr_data32;\n    uint32 data32 = 255;\n\n    ptr_data32 = &amp;data32;\n\n    ptr_data8 = (uint8*)ptr_data32;\n}\n</code></pre>\n\n<p>So depending on the Endianess the memory may look different:</p>\n\n<p>Little-Endian:</p>\n\n<pre><code>Address:   [  0|  1|   2|   3]\n           -------------------\nValue:     [255|  0|   0|   0]\n</code></pre>\n\n<p>Big-Endian:</p>\n\n<pre><code>Address:   [  0|  1|   2|   3]\n           -------------------\nValue:     [  0|  0|   0| 255]\n</code></pre>\n\n<p>So the question is, to which address do the pointers point to for each architecture? </p>\n\n<p><strong>Do the pointers point to the lowest address of the whole data element?</strong></p>\n\n<pre><code>[Little Endian]\nptr_data8  --&gt; 0\nptr_data32 --&gt; 0\n\n[Big Endian]\nptr_data8  --&gt; 0\nptr_data32 --&gt; 0\n</code></pre>\n\n<p><strong>Or do they point to the lowest value/byte of the data element?</strong></p>\n\n<pre><code>[Little Endian]\nptr_data8  --&gt; 0\nptr_data32 --&gt; 0\n\n[Big Endian]\nptr_data8  --&gt; 0\nptr_data32 --&gt; 3\n</code></pre>\n\n<p>Also, is the address where the pointers point to platform/compiler/architecture dependent and is there a definition for this behaviour somewhere?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1510142821, "post_id": 47179301, "comment_id": 81307417, "body": "Use <code>char word[8];</code> and  <code>scanf(&quot;%8s&quot;, word)</code> please."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 4, "creation_date": 1510142834, "post_id": 47179301, "comment_id": 81307427, "body": "Your ORs should be ANDs (<code>||</code> --&gt; <code>&amp;&amp;</code>)"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1510142923, "post_id": 47179301, "comment_id": 81307485, "body": "You need to consume newlines at the first input."}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1510143103, "post_id": 47179301, "comment_id": 81307575, "body": "Your condition <code>word[i]!=&#39;a&#39;||word[i]!=&#39;b&#39;|| ...</code> will always be true, since it has to be unequal to at least <i>one</i> of those characters.  The compiler might be recognizing this, and eliminating the test altogether, which results in an unconditional <code>return</code>.  To fix it, change <code>||</code> to <code>&amp;&amp;</code>.  That way you will execute the <code>if</code> body if <code>word[i]</code> isn&#39;t <i>any</i> of those characters."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8828221"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1510143222, "post_id": 47179301, "comment_id": 81307646, "body": "@IharobAlAsimi sorry I cannot use string at this moment since I can only include &lt;studio.h&gt;. And could I know why word[8] since I think 7 slots for the first 7 letters."}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1510143767, "post_id": 47179301, "comment_id": 81308028, "body": "@DannyC When dealing with strings, you always need to allow one character for the terminating null byte (assuming you want a null-terminated string).  If you never treat it as a string, but only as an array of individual characters, then you could skip the extra byte, but you have to be very careful if you do that."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1510144576, "post_id": 47179301, "comment_id": 81308605, "body": "@DannyC <code>scanf(&quot;%8s&quot;, word)</code>  is a mistake of <code>scanf(&quot;%7s&quot;, word)</code>. Also, since this does not force 7-character input, there is not much profit because it is necessary to check the number of input characters separately. Also, you can simply write <code>scanf(&quot;%1c%1c%1c%1c%1c&quot;,&amp;key[0],&amp;key[1],&amp;key[2],&amp;key[3],&amp;key&zwnj;&#8203;[4]);</code> like <code>scanf(&quot;%5c&quot;, key);</code> or (<code>scanf(&quot;%5c%*c&quot;, key);</code> This will consume the following newline.)."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8828221"}, "edited": false, "score": 0, "creation_date": 1510143464, "post_id": 47179397, "comment_id": 81307806, "body": "Thanks a lot man! I was so silly and made such mistakes lol. But could I know why the scanf() cannot capture the 7 letters? As I have tried to write printf(\u201c%c\u201d,word[0]) which just follows the scanf() statement and it seems to print nothing I entered but a new line.."}], "tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": true, "score": 0, "last_activity_date": 1510143024, "creation_date": 1510143024, "answer_id": 47179397, "question_id": 47179301, "link": "https://stackoverflow.com/questions/47179301/unreachable-code-and-fail-to-read-all-the-input-letter/47179397#47179397", "title": "Unreachable code and fail to read all the input letter", "body": "<p>The unreacability is that the compiler has analyzed that the <code>if</code> statement with the ORs will always be true and so will execute the return and so the rest is unreachable.</p>\n\n<pre><code>if(word[i]!='a'||word[i]!='b'||word[i]!='c'||word[i]!='d'||word[i]!='r'){ // is always true\n\nif(word[i]!='a'&amp;&amp;word[i]!='b'&amp;&amp;word[i]!='c'&amp;&amp;word[i]!='d'&amp;&amp;word[i]!='r'){  // is correct\n</code></pre>\n\n<p>(would you have used a debugger to step through the program, you have found this yourself)</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8828221"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 47179397, "answer_count": 1, "score": 0, "last_activity_date": 1510143024, "creation_date": 1510142691, "question_id": 47179301, "link": "https://stackoverflow.com/questions/47179301/unreachable-code-and-fail-to-read-all-the-input-letter", "title": "Unreachable code and fail to read all the input letter", "body": "<p>I am writing a short program in c language which basically asks users to enter a secret key will consist of the five characters a,b,c,d,r listed in some order, each appearing exactly once, with no spaces. And then the program asks the user to enter 7 letters which also consist of the five characters a,b,c,d,r in some order.\nSo there is a natural order a,b,c,d,r. So each letter entered in the \"7 letters\", will be changed to the encrypted one as the letter in the natural order will be changed to the letter in the corresponding place in the secret key. For example, if the secret key is r,b,c,d,a and the 7 letters are a,b,b,a,c,c,r. The encrypted one will be r,b,b,r,c,c,a. And the encrypted one will be printed out. If the user enters more than 7 letters, the program will only read the first 7 letters and if the user enters letters other than a,b,c,d,r in the 7 letters, the program will report an error and terminate. </p>\n\n<p>So now I wrote the program and tested it. However, while I have spent 3 hours debugging it, it still said there are some unreachable codes and the scanf() seems cannot capture all the 7 letters the user enter. Could anyone help me check my codes? Thanks a lot.</p>\n\n<pre><code>int main() {\nchar natural[5]={'a','b','c','d','r'};\nchar key[5];\nchar word[7];\nprintf(\"     Enter key: \");\nscanf(\"%1c%1c%1c%1c%1c\",&amp;key[0],&amp;key[1],&amp;key[2],&amp;key[3],&amp;key[4]);\nprintf(\"    Enter word: \");\nint LetterNum;\nLetterNum=scanf(\"%1c%1c%1c%1c%1c%1c%1c\",&amp;word[0],&amp;word[1],&amp;word[2],&amp;word[3],\n&amp;word[4],&amp;word[5],&amp;word[6]);\nfor(int i=0;i&lt;LetterNum;i++){\nif(word[i]!='a'||word[i]!='b'||word[i]!='c'||word[i]!='d'||word[i]!='r'){\n    printf(\"You did not speak in ABRACADABRA to me!\\n\");\n    return 0;\n    }\n}\n\n printf(\"Encrypted word: \");\n char encrypted[LetterNum]; \nfor(int i=0;i&lt;LetterNum;i++){\nfor(int x=0;x&lt;5;x++){\n    if(word[i]==natural[x])\n            encrypted[i]=key[x];\n    }\n}\n     for(i=0;i&lt;LetterNum;i++){\n   printf(\"%c\",encrypted[i]);\n  }\n   printf(\"\\n\");\n\n\n}\n</code></pre>\n\n<p>Thank you very much! I am new to C language, so probably there are some silly mistakes I did not realize...</p>\n"}, {"tags": ["c", "linux", "makefile"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1510142632, "post_id": 47179232, "comment_id": 81307299, "body": "Using <code>.&#47;</code> just makes the code more unreadable. By default if you don&#39;t specify a path, then current directory is assumed."}, {"owner": {"reputation": 19, "user_id": 8906412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db7541169f2d6f70d8e4e052d417fb15?s=128&d=identicon&r=PG&f=1", "display_name": "Bombozaur666", "link": "https://stackoverflow.com/users/8906412/bombozaur666"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1510142835, "post_id": 47179232, "comment_id": 81307428, "body": "i didn&#39;t  knew that, thanks."}, {"owner": {"reputation": 13458, "user_id": 1773798, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/4Ljqn.png?s=128&g=1", "display_name": "Renaud Pacalet", "link": "https://stackoverflow.com/users/1773798/renaud-pacalet"}, "edited": false, "score": 0, "creation_date": 1510144938, "post_id": 47179232, "comment_id": 81308839, "body": "I guess that your version of make uses make file <code>Makefile</code> by default, not <code>Makefile.win</code>. So, it could be that you are using the wrong make file. Try <code>make -f Makefile.win dodaj.tar.gz</code> to tell make that the make file to use is <code>Makefile.win</code>."}, {"owner": {"reputation": 19, "user_id": 8906412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db7541169f2d6f70d8e4e052d417fb15?s=128&d=identicon&r=PG&f=1", "display_name": "Bombozaur666", "link": "https://stackoverflow.com/users/8906412/bombozaur666"}, "edited": false, "score": 0, "creation_date": 1510147285, "post_id": 47179232, "comment_id": 81310434, "body": "thank you, that&#39;s working."}], "answers": [{"tags": [], "owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "is_accepted": true, "score": 0, "last_activity_date": 1510144824, "creation_date": 1510144824, "answer_id": 47179992, "question_id": 47179232, "link": "https://stackoverflow.com/questions/47179232/makefile-with-2-files/47179992#47179992", "title": "Makefile with 2 files", "body": "<p>Make will look for files named 'makefile' and 'Makefile'.  If you are using Gnu make, it will also look for 'GNUmakefile'.  It does not look for 'Makefile.win'.  To use that file, you must do <code>make -f Makefile.win dodaj.tar.gz</code></p>\n"}], "owner": {"reputation": 19, "user_id": 8906412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db7541169f2d6f70d8e4e052d417fb15?s=128&d=identicon&r=PG&f=1", "display_name": "Bombozaur666", "link": "https://stackoverflow.com/users/8906412/bombozaur666"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 47179992, "answer_count": 1, "score": 1, "last_activity_date": 1510144824, "creation_date": 1510142519, "last_edit_date": 1510144205, "question_id": 47179232, "link": "https://stackoverflow.com/questions/47179232/makefile-with-2-files", "title": "Makefile with 2 files", "body": "<p>Hello!</p>\n\n<p>I want to make Makefile.win which will make a tar.gz with 2 other  files(dodaj.c and another Makefile, both are in the same directory where i want use commend make ).My problem is </p>\n\n<pre><code>make dodaj.tar.gz\nmake: *** No rule to make target 'dodaj.tar.gz'.  Stop    \n</code></pre>\n\n<p>Here is my code:</p>\n\n<pre><code>dodaj.tar.gz: dodaj.c Makefile\n    mkdir dodaj-434686\n    cp ./dodaj.c ./dodaj-434686\n    cp ./Makefile ./dodaj-434686\n    tar -czvf dodaj.tar.gz ./dodaj-43468\n    rm -rf ./dodaj-434686\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1510141637, "post_id": 47178888, "comment_id": 81306718, "body": "To start with, <code>scanf (&quot;%c&quot;, &amp;message[i]);</code> --&gt; <code>scanf (&quot; %c&quot;, &amp;message[i]);</code>"}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 2, "creation_date": 1510141721, "post_id": 47178888, "comment_id": 81306750, "body": "Your program isn&#39;t going to do anything until you enter 100 characters.  Is that the intent?"}, {"owner": {"reputation": 30168, "user_id": 5612562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gzBQY.jpg?s=128&g=1", "display_name": "msc", "link": "https://stackoverflow.com/users/5612562/msc"}, "edited": false, "score": 0, "creation_date": 1510142044, "post_id": 47178888, "comment_id": 81306958, "body": "Try this : <a href=\"http://ide.geeksforgeeks.org/J0LvwM\" rel=\"nofollow noreferrer\">ide.geeksforgeeks.org/J0LvwM</a>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1510142586, "post_id": 47178888, "comment_id": 81307274, "body": "<code>if(message[i] == &#39;\\n&#39;) break;</code>"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1510157656, "post_id": 47178888, "comment_id": 81318115, "body": "Welcome to Stack Overflow! Please <a href=\"https://stackoverflow.com/posts/47178888/edit\">edit</a> your question to show us what kind of debugging you&#39;ve done.  I expect you to have run your <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> within Valgrind or a similar checker, and to have investigated with a debugger such as GDB, for example.  Ensure you&#39;ve enabled a full set of compiler warnings, too.  What did the tools tell you, and what information are they missing?  And read Eric Lippert&#39;s <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a>."}], "answers": [{"tags": [], "owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "is_accepted": false, "score": 1, "last_activity_date": 1510141839, "creation_date": 1510141839, "answer_id": 47178986, "question_id": 47178888, "link": "https://stackoverflow.com/questions/47178888/problems-array-and-char/47178986#47178986", "title": "Problems array and char", "body": "<p>You can simply read the whole message by using <code>scanf(\"%s\",message);</code></p>\n\n<p>That way you don't have to wait for all the 100 characters to be entered and you can check with whatever input (maybe less than 100 characters) you have given. Same way you can print it using <code>printf</code></p>\n\n<pre><code>printf(\"%s\",message);\n</code></pre>\n\n<p>Use <code>switch</code> for doing the characters change based on different cases.</p>\n\n<pre><code>switch(message[i]){\n   case 'a': message[i]='4';break;\n   ...\n}\n</code></pre>\n\n<p>Instead of looping for all <code>N</code> characters loop till <code>strlen(message)</code> or <code>message[i]!='\\0'</code></p>\n"}, {"tags": [], "owner": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "is_accepted": false, "score": 0, "last_activity_date": 1510142198, "creation_date": 1510142198, "answer_id": 47179113, "question_id": 47178888, "link": "https://stackoverflow.com/questions/47178888/problems-array-and-char/47179113#47179113", "title": "Problems array and char", "body": "<pre><code>for (i=0; i&lt;N; i++){\n    scanf (\"%c\", &amp;message[i]);\n}\n</code></pre>\n\n<p>should be </p>\n\n<pre><code>scanf (\"%s\", message);\n</code></pre>\n\n<p>and you should replace this loop</p>\n\n<pre><code>for (i=0; i&lt;N; i++){\n    if (message[i]=='a')\n        message[i]='4';\n    if (message[i]=='b')\n        message[i]='8';\n    if (message[i]=='e')\n        message[i]='3';\n    if (message[i]=='i')\n        message[i]='1';\n    if (message[i]=='o')\n        message[i]='0';\n    if (message[i]=='s')\n        message[i]='5';\n}\n</code></pre>\n\n<p>with this one:</p>\n\n<pre><code>char*m;\nfor (m=message; *m; m++){\nswitch (*m)\n{\n  case 'a': *m=4; break;\n  case 'b': *m=8; break;\n  and so on...\n}\n</code></pre>\n\n<p>and finally</p>\n\n<pre><code>printf (\"%s\\n\", message);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1050, "user_id": 7193619, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-eQW46dcS8qU/AAAAAAAAAAI/AAAAAAAAAEI/MJM4YBF8sQI/photo.jpg?sz=128", "display_name": "Quan VO", "link": "https://stackoverflow.com/users/7193619/quan-vo"}, "is_accepted": false, "score": 0, "last_activity_date": 1510152818, "creation_date": 1510152818, "answer_id": 47182765, "question_id": 47178888, "link": "https://stackoverflow.com/questions/47178888/problems-array-and-char/47182765#47182765", "title": "Problems array and char", "body": "<p>What compiler do you use? Your code works well in <a href=\"https://www.jdoodle.com/c-online-compiler\" rel=\"nofollow noreferrer\">https://www.jdoodle.com/c-online-compiler</a>. \nFor this case, if I understand exactly, you can better get a complete message, use:</p>\n\n<pre><code>scanf(\"%s\", message);\n</code></pre>\n\n<p>instead of:</p>\n\n<pre><code>for (i=0; i&lt;N; i++){\nscanf (\"%c\", &amp;message[i]);\n}\n</code></pre>\n"}], "owner": {"reputation": 103, "user_id": 8906400, "user_type": "registered", "accept_rate": 29, "profile_image": "https://lh3.googleusercontent.com/-y3pVb4GDSR8/AAAAAAAAAAI/AAAAAAAAP54/4rYmWcPk1CM/photo.jpg?sz=128", "display_name": "Walter", "link": "https://stackoverflow.com/users/8906400/walter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1510152818, "creation_date": 1510141524, "last_edit_date": 1510145134, "question_id": 47178888, "link": "https://stackoverflow.com/questions/47178888/problems-array-and-char", "title": "Problems array and char", "body": "<p>I'm new to programming. I can't find errors in this code.\nI'm trying to translate some characters to numbers. </p>\n\n<p>The program ask to enter a message, but after I entered the characters nothing show up.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define N 100\n\nint main (void)\n{\n    char message[N];\n    int i;\n    printf (\"Enter a message: \");\n\n    for (i=0; i&lt;N; i++){\n        scanf (\"%c\", &amp;message[i]);\n    }\n    // characters are in the array\n\n    for (i=0; i&lt;N; i++){\n        if (message[i]=='a')\n            message[i]='4';\n        if (message[i]=='b')\n            message[i]='8';\n        if (message[i]=='e')\n            message[i]='3';\n        if (message[i]=='i')\n            message[i]='1';\n        if (message[i]=='o')\n            message[i]='0';\n        if (message[i]=='s')\n            message[i]='5';\n    }\n    // characters are translated\n\n    for (i=0; i&lt;N; i++)\n        printf (\"%c \", message[i]);\n    // characters are printed\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "linked-list"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1510141941, "post_id": 47178328, "comment_id": 81306901, "body": "<code>strncpy(dest, val, 4);</code> dest will not be null-terminated (it is uninialized, so<code>dest[4]</code>need <b>not</b> be zero."}], "answers": [{"comments": [{"owner": {"reputation": 3002, "user_id": 4228131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RyKUe.jpg?s=128&g=1", "display_name": "WedaPashi", "link": "https://stackoverflow.com/users/4228131/wedapashi"}, "edited": false, "score": 0, "creation_date": 1510141183, "post_id": 47178354, "comment_id": 81306430, "body": "Plus 1 (Because it wouldn&#39;t allow me a plus symbol, someone please flag it for being chatty, but let unwind read it once), specifically at <i>Choices, choices :)</i>."}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 3, "last_activity_date": 1510139864, "creation_date": 1510139864, "answer_id": 47178354, "question_id": 47178328, "link": "https://stackoverflow.com/questions/47178328/c-why-the-list-change/47178354#47178354", "title": "C/ why the List change", "body": "<p>The list element doesn't store a copy of the string, it just stores a pointer to <code>dest</code>. When you change the contents of <code>dest</code>, that change is of course seen when you print it through the list element; it's the same buffer.</p>\n\n<p>The fix is to create a copy in the list element, for instance by changing this:</p>\n\n<pre><code>element-&gt;value = x;\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>element-&gt;value = strdup(x);\n</code></pre>\n\n<p>If you have <code>strdup()</code> (it's not standard, but common). Of course this opens you up to allocation failure. You can also make the list element contain a proper buffer, but that limits the size of the string you can support. Choices, choices. :)</p>\n"}], "owner": {"reputation": 9, "user_id": 6843541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23bafb5ffd4a38f4891adbc6cd0bd1ed?s=128&d=identicon&r=PG&f=1", "display_name": "omar lazar", "link": "https://stackoverflow.com/users/6843541/omar-lazar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1510142020, "creation_date": 1510139790, "last_edit_date": 1510142020, "question_id": 47178328, "link": "https://stackoverflow.com/questions/47178328/c-why-the-list-change", "title": "C/ why the List change", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n//struct definition\ntypedef struct ListElement\n    {\n        char *value;\n        struct ListElement *next;\n    }ListElement, *List;\n\nList push_back_list(List li, char *x);\n\nint main(int argc, char **argv)\n{\n    char val[]= \"12345678987456321069\";      \n    char dest[5];\n\n    //here the list is empty\n    List liste=new_list();\n    strncpy(dest, val, 4);\n\n    //push method\n    liste=push_back_list(liste,dest);\n\n    //modification of dest\n    strncpy(dest, val+4, 4);\n\n    //when i print list, the result were change without push method why??\n    print_list(liste);  \n    return 0;\n}\n\n//push method description\nList push_back_list(List li, char *x)\n{\n    ListElement *element;\n\n    element = malloc(sizeof(*element));\n    element-&gt;value= x;\n    element-&gt;next = NULL\n    if(is_empty_list(li))\n        return element;\n    ListElement *temp;\n    temp = li;\n    while(temp-&gt;next != NULL)\n        temp = temp-&gt;next;\n\n    temp-&gt;next = element;\n    return li;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "replace"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1510138020, "post_id": 47177643, "comment_id": 81304251, "body": "Welcome to Stack Overflow! <i>Questions seeking debugging help (why isn&#39;t this code working?) must include the desired behavior, a specific problem or error and the shortest code necessary to reproduce it in the question itself. Questions without a clear problem statement are not useful to other readers. See: How to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>.</i>"}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 3, "creation_date": 1510138121, "post_id": 47177643, "comment_id": 81304302, "body": "Note: <code>isCompleted</code> is not initialized. It could be 10 at the first iteration."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1510138391, "post_id": 47177643, "comment_id": 81304480, "body": "Your code does not compile. Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 1, "user_id": 8906065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38b071643f9b32cc2b03d3ec4fd489c7?s=128&d=identicon&r=PG&f=1", "display_name": "Falborian", "link": "https://stackoverflow.com/users/8906065/falborian"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1510138398, "post_id": 47177643, "comment_id": 81304484, "body": "@PaulOgilvie Where exactly? I am setting its value to 0 after each while loop. I see no way of it getting to 10 at the first iteration."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1510138539, "post_id": 47177643, "comment_id": 81304584, "body": "What about before the first while loop?"}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 2, "creation_date": 1510138600, "post_id": 47177643, "comment_id": 81304638, "body": "Your program is too complex, you should restart from scratch with clear algorithm in mind, you have too many loop, too many variable... use function ! Rework your conception."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1510140669, "post_id": 47177643, "comment_id": 81306063, "body": "You must initialize <code>isCompleted</code> <i>before</i> the while loop too. it is an automatic variable that is not initialized unless you do so. So at the first iteration of the while loop it will have any value and can already be 10."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1510157999, "post_id": 47177643, "comment_id": 81318373, "body": "Welcome to Stack Overflow! Please <a href=\"https://stackoverflow.com/posts/47177643/edit\">edit</a> your code to reduce it to a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of your problem.  Your current code includes much that is peripheral to your problem - a minimal sample normally looks similar to a good unit test: only performing one task, with input values specified for reproducibility."}], "answers": [{"tags": [], "owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "is_accepted": false, "score": 1, "last_activity_date": 1510141222, "last_edit_date": 1510141222, "creation_date": 1510139523, "answer_id": 47178226, "question_id": 47177643, "link": "https://stackoverflow.com/questions/47177643/c-language-operation-replaces-mutiple-array-elements-instead-of-one/47178226#47178226", "title": "C language - operation replaces mutiple array elements instead of one", "body": "<p>The problem is that you're storing <code>letterGuess</code>, rather than individual characters.  So each time <code>letterGuess</code> is updated with a new guess, all references to it change.  Also, <code>letterGuess</code> is too short, leaving no room for the terminating null character.</p>\n\n<p>The best solution is to make <code>letterGuess</code> a <code>char</code> (or an <code>int</code>), not an array, and to make <code>guessedWord</code> a <code>char []</code> rather than a <code>char *[]</code>.  There is no reason to use strings for single characters.  That will solve the string-sharing problem.</p>\n"}], "owner": {"reputation": 1, "user_id": 8906065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38b071643f9b32cc2b03d3ec4fd489c7?s=128&d=identicon&r=PG&f=1", "display_name": "Falborian", "link": "https://stackoverflow.com/users/8906065/falborian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1510141222, "creation_date": 1510137952, "last_edit_date": 1510138394, "question_id": 47177643, "link": "https://stackoverflow.com/questions/47177643/c-language-operation-replaces-mutiple-array-elements-instead-of-one", "title": "C language - operation replaces mutiple array elements instead of one", "body": "<p>I am in the process of creating hangman in C language, but there is one problem that I cannot quite grasp. When a user correctly guesses one of the letters that the word that is being guessed has, the program replaces all of previously guessed letters to the one user just put. What is the source of this problem? </p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n{\n  srand(time(NULL));\n  int x = 0, isCompleted, matchFound, numberOfTries = 7;\n  char letterGuess[1];\n  int randomIndex = rand()%14; \n  const char *wordArray[14];\n  const char *guessedWord[10];\n  const char *usedLetters[17];\n  for (int k = 0; k &lt; 10; k++) {\n    guessedWord[k] = \"_\";\n  }\n  wordArray[0] = \"butonierka\";\n  wordArray[1] = \"centyfolia\";\n  wordArray[2] = \"chiroplast\";\n  wordArray[3] = \"cmentarzyk\";\n  wordArray[4] = \"chrustniak\";\n  wordArray[5] = \"budowniczy\";\n  wordArray[6] = \"cholewkarz\";\n  wordArray[7] = \"cornflakes\";\n  wordArray[8] = \"brzydactwo\";\n  wordArray[9] = \"germanofil\";\n  wordArray[10] = \"lichtarzyk\";\n  wordArray[11] = \"lutowniczy\";\n  wordArray[12] = \"mikrocysta\";\n  wordArray[13] = \"tryskawiec\";\n\n  const char *wordToGuess = wordArray[randomIndex];\n\n  for(int i = 0; i &lt; 10; i++) {\n    printf(\" %s \", guessedWord[i]);\n  }\n\n  printf(\"\\n\");\n\n  while(numberOfTries != 0 &amp;&amp; isCompleted != 10) {\n    matchFound = 0;\n    isCompleted = 0;\n    printf(\"Please give a lowercase letter\\n\");\n    printf(\"Left tries: %d\\n\", numberOfTries);\n    scanf(\"%s\", &amp;letterGuess);\n    for (int z = 0; z &lt; 17; z++) {\n      if (usedLetters[z] == letterGuess[0]) {\n        matchFound = 1;\n      }\n    }\n    if (letterGuess[0] &gt;= 'a' &amp;&amp; letterGuess[0] &lt;= 'z' &amp;&amp; matchFound == 0) {\n      usedLetters[x] = letterGuess[0];\n      x++;\n      for (int j = 0; j &lt; 10; j++) {\n        if (letterGuess[0] == wordArray[randomIndex][j])\n          guessedWord[j] = letterGuess;\n          matchFound = 1;\n        }\n      }\n      if (matchFound == 0) {\n        numberOfTries--;\n      }\n      for(int z = 0; z &lt; 10; z++) {\n         printf(\" %s \", guessedWord[z]);\n      }\n      printf(\"\\n\");\n    } else {\n      if (matchFound == 1) {\n        printf(\"You've already given such letter!!\\n\");\n      } else {\n        printf(\"Wrong input, please try again!\\n\"); \n      }\n    }\n    for (int k = 0; k &lt; 10; k++) { \n      if (guessedWord[k] != \"_\") {\n       isCompleted++;\n      }\n    }\n    if (isCompleted == 10) {\n      printf(\"You have correctly guessed a word! Congrats!!\\n\");\n    }\n    printf(\"\\n\\n\");\n  }\n\n  printf(\"The word was: %s\\n\", wordArray[randomIndex]);\n  printf(\"Game over!!\\n\");\n}\n</code></pre>\n"}, {"tags": ["c", "kernighan-and-ritchie"], "comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 11, "creation_date": 1510137946, "post_id": 47177595, "comment_id": 81304200, "body": "You&#39;re calling <code>getchar</code> twice per iteration. Are you sure that&#39;s what you want?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 8, "creation_date": 1510138007, "post_id": 47177595, "comment_id": 81304236, "body": "Why <code>double</code>????"}, {"owner": {"reputation": 1094, "user_id": 7629560, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eEnZy.jpg?s=128&g=1", "display_name": "samthegolden", "link": "https://stackoverflow.com/users/7629560/samthegolden"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1510138214, "post_id": 47177595, "comment_id": 81304368, "body": "As @Quentin said, you call <code>getchar</code> twice. If you want it to stop when you press Ctrl+D, remove the body of the cycle."}, {"owner": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "edited": false, "score": 0, "creation_date": 1510139685, "post_id": 47177595, "comment_id": 81305369, "body": "I propose to close this thread, it makes no sense, too broad."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 1924, "user_id": 2669042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c66a47707c3d1748c9977727ddfa4d50?s=128&d=identicon&r=PG", "display_name": "xing", "link": "https://stackoverflow.com/users/2669042/xing"}, "edited": false, "score": 0, "creation_date": 1510142273, "post_id": 47177595, "comment_id": 81307099, "body": "@xing oh. The formatting of the question was broken so I didn&#39;t see the newlines."}, {"owner": {"reputation": 3, "user_id": 4780884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/372ce0b7e16c2553bc3f4e3fbdb626e7?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/4780884/andrew"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1510173011, "post_id": 47177595, "comment_id": 81327483, "body": "@Quentin I added that second getchar to eat up a newline because without it the counter goes up by 2 instead of 1. I can&#39;t seem to make my counter go up by one properly."}, {"owner": {"reputation": 3, "user_id": 4780884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/372ce0b7e16c2553bc3f4e3fbdb626e7?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/4780884/andrew"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1510173811, "post_id": 47177595, "comment_id": 81327921, "body": "@SouravGhosh The double was for practice from the code exercise. I left it thinking it won&#39;t change much."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 4780884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/372ce0b7e16c2553bc3f4e3fbdb626e7?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/4780884/andrew"}, "edited": false, "score": 0, "creation_date": 1510172855, "post_id": 47186862, "comment_id": 81327401, "body": "Hmmm, I think I understand that. What gets me is when I get rid of the second getchar(), the counter goes up by 2 instead of one so I added that second getchar() to stop the second iteration. Is there an alternative way to make the counter go up by one? Oddly enough, the counter works fine if I don&#39;t use eof as the conditional for the for loop."}, {"owner": {"reputation": 46, "user_id": 6129295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49397ef7c2f17f240bdbfecb0a8e3dd2?s=128&d=identicon&r=PG&f=1", "display_name": "yenWu", "link": "https://stackoverflow.com/users/6129295/yenwu"}, "reply_to_user": {"reputation": 3, "user_id": 4780884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/372ce0b7e16c2553bc3f4e3fbdb626e7?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/4780884/andrew"}, "edited": false, "score": 0, "creation_date": 1510194648, "post_id": 47186862, "comment_id": 81335097, "body": "I don&#39;t sure you want to count <b>num of string</b> or <b>num of char except for newline</b>. With counting num of char except for newline, you can do it by <code>while (1) switch (getchar()) {case &#39;\\n&#39;: continue; case EOF: break; default: nc++;}</code>."}, {"owner": {"reputation": 3, "user_id": 4780884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/372ce0b7e16c2553bc3f4e3fbdb626e7?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/4780884/andrew"}, "edited": false, "score": 0, "creation_date": 1510207834, "post_id": 47186862, "comment_id": 81338922, "body": "Thanks for the reply. I was completing an exercise for finding the number of characters and this is what I was also looking for. I&#39;m pretty new to C so I have never seen the switch statement before and will help with my problem."}], "tags": [], "owner": {"reputation": 46, "user_id": 6129295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49397ef7c2f17f240bdbfecb0a8e3dd2?s=128&d=identicon&r=PG&f=1", "display_name": "yenWu", "link": "https://stackoverflow.com/users/6129295/yenwu"}, "is_accepted": true, "score": 1, "last_activity_date": 1510164874, "creation_date": 1510164874, "answer_id": 47186862, "question_id": 47177595, "link": "https://stackoverflow.com/questions/47177595/eof-adds-to-counter-no-idea-why/47186862#47186862", "title": "EOF adds to counter, no idea why", "body": "<p>Here is something you might miss. Take piece of your code:</p>\n\n<pre><code>for (nc = 0; getchar() != EOF; nc++)\n    getchar();\n</code></pre>\n\n<p>There are two <code>getchar()</code>. Let's call them, <code>getchar1()</code> and <code>getchar2()</code>. Your input should be like this:</p>\n\n<pre><code>0\\n\n.\n.\n.\n7\\n\nEOF\n</code></pre>\n\n<p><code>getchar1()</code> catch the sequence of digits and <code>EOF</code>. <code>getchar2()</code> always catch the newline ('\\n'). And the count of you go through for loop body is 8 (0 to 7).</p>\n\n<p>Hope it helpful for you.</p>\n"}], "owner": {"reputation": 3, "user_id": 4780884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/372ce0b7e16c2553bc3f4e3fbdb626e7?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/4780884/andrew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 47186862, "answer_count": 1, "score": -1, "last_activity_date": 1510164874, "creation_date": 1510137829, "last_edit_date": 1510139036, "question_id": 47177595, "link": "https://stackoverflow.com/questions/47177595/eof-adds-to-counter-no-idea-why", "title": "EOF adds to counter, no idea why", "body": "<p>I have been stuck trying to understand why triggering <code>eof</code> using ctrl-D adds to a counter in a <code>for</code> loop. </p>\n\n<p>Here is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main()\n{\n    double nc;\n    for (nc = 0; getchar() != EOF; nc++){\n       getchar();\n    }\n    printf(\"%.0f\\n\", nc);\n    return 0;\n}\n</code></pre>\n\n<p>My outcome is : </p>\n\n<pre><code>0\n1\n2\n3\n4\n5\n6\n7\n8\n</code></pre>\n\n<p>The <code>8</code> is what's given to me when I use ctrl-D after inputting <code>7</code>. Is there a reason why triggering the <code>eof</code> causes the code to run another complete loop? \nI thought an empty buffer will return nothing.</p>\n"}, {"tags": ["c", "caesar-cipher"], "comments": [{"owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 0, "creation_date": 1510137645, "post_id": 47177363, "comment_id": 81304001, "body": "<code>scanf(&quot;%s&quot;, &amp;message);</code> is wrong. Should be <code>scanf(&quot;%s&quot;, message);</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8587654"}, "edited": false, "score": 1, "creation_date": 1510137758, "post_id": 47177363, "comment_id": 81304068, "body": "Just corrected that, thank you. I&#39;m pretty new to C"}, {"owner": {"reputation": 3310, "user_id": 1853605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ab8d886abc51e874c1ed067b912ddd?s=128&d=identicon&r=PG", "display_name": "Potato", "link": "https://stackoverflow.com/users/1853605/potato"}, "edited": false, "score": 0, "creation_date": 1510137780, "post_id": 47177363, "comment_id": 81304083, "body": "Try not to call strlen in a loop for(x = 0; x &lt; strlen(message); x++)"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8587654"}, "edited": false, "score": 1, "creation_date": 1510137511, "post_id": 47177438, "comment_id": 81303911, "body": "Ah, my fault for forgetting the allocated space for the null byte terminator, thank you."}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1510137578, "post_id": 47177438, "comment_id": 81303954, "body": "@JosephHarris The null byte isn&#39;t the problem.  The problem is you&#39;re taking the size of a pointer, which is probably 4 or 8 and completely independent of the how long the string is."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8587654"}, "edited": false, "score": 1, "creation_date": 1510137663, "post_id": 47177438, "comment_id": 81304012, "body": "Ah so sizeof will only return the size of the actual pointer and in order to find the actual length of the string strlen is suitable."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8587654"}, "edited": false, "score": 0, "creation_date": 1510137792, "post_id": 47177438, "comment_id": 81304090, "body": "I was tampering with it and then I realised it wasn&#39;t useful but hadn&#39;t yet removed it."}, {"owner": {"reputation": 3310, "user_id": 1853605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ab8d886abc51e874c1ed067b912ddd?s=128&d=identicon&r=PG", "display_name": "Potato", "link": "https://stackoverflow.com/users/1853605/potato"}, "edited": false, "score": 0, "creation_date": 1510137837, "post_id": 47177438, "comment_id": 81304118, "body": "you might want to correct this memset as well memset(result, &#39;\\0&#39;, sizeof(result));"}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 3, "creation_date": 1510137927, "post_id": 47177438, "comment_id": 81304182, "body": "<code>sizeof</code> is not evaluated by the preprocessor.  It gets evaluated during the actual compilation."}], "tags": [], "owner": {"reputation": 852, "user_id": 3227496, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/874115077/picture?type=large", "display_name": "Hans Petter Taugb&#248;l Kragset", "link": "https://stackoverflow.com/users/3227496/hans-petter-taugb%c3%b8l-kragset"}, "is_accepted": true, "score": 2, "last_activity_date": 1510138072, "last_edit_date": 1510138072, "creation_date": 1510137412, "answer_id": 47177438, "question_id": 47177363, "link": "https://stackoverflow.com/questions/47177363/unknown-characters-being-displayed-while-printing-character-array/47177438#47177438", "title": "Unknown characters being displayed while printing character array", "body": "<p>Change</p>\n\n<pre><code>char result[(sizeof(message) / sizeof(char))];\n</code></pre>\n\n<p>to</p>\n\n<pre><code>char result[strlen(message) + 1];\n</code></pre>\n\n<p>This leaves room in your buffer for a <a href=\"https://en.wikipedia.org/wiki/Null_character\" rel=\"nofollow noreferrer\">terminating null-character</a>. <code>sizeof</code> also can ont be used to get the length of c-strings, we need to use <code>strlen</code> for this. You will need to update the <code>memset</code> call as well.</p>\n\n<p><code>sizeof</code> is used by the compiler, so in this case you will ask your compiler \"what is the size of <code>message</code>\", which in this case will be 8 (assuimg 64-bit), because a pointer is 8 bytes.</p>\n\n<p>Other than that you should be careful with <code>scanf</code>, it is fine as it is now because you read one line of input, but if you tried reading one more line you might <a href=\"https://stackoverflow.com/questions/3744776/simple-c-scanf-does-not-work\">run into trouble</a>.</p>\n\n<p>As mentioned in the comments, <code>for(x = 0; x &lt; strlen(message); x++)</code> runs <code>strlen</code> once per loop iteration, adding a rather big extra load on your program, that grows exponentially as the length of <code>message</code> increases.</p>\n\n<p>Your <code>concat</code> function is unused, unsure why you included it?</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8587654"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 901, "favorite_count": 0, "accepted_answer_id": 47177438, "answer_count": 1, "score": 1, "last_activity_date": 1510138072, "creation_date": 1510137194, "question_id": 47177363, "link": "https://stackoverflow.com/questions/47177363/unknown-characters-being-displayed-while-printing-character-array", "title": "Unknown characters being displayed while printing character array", "body": "<p>I'm creating a Caesar cipher in C and I'm having an issue when displaying the encoded message. It works if the message consists of very few characters but as soon as the message exceeds a certain amount of characters the <strong>printf</strong> function begins to display unknown characters which I assume are junk bytes. Any ideas?</p>\n\n<p>Code: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nchar *concat(const char *s1, const char *s2)\n{\n    /*\n        Remember to free allocated memory\n    */\n    char *result;\n    if((result = malloc(strlen(s1)+strlen(s2)+1)) != NULL)\n    {\n        result[0] = '\\0';\n        strcat(result, s1);\n        strcat(result, s2);\n    }\n\n    return result;\n}\n\nvoid encode(const char *alpha, const char *message)\n{\n    char result[(sizeof(message) / sizeof(char))];\n    int x, y, z;\n\n    memset(result, '\\0', sizeof(result));\n    for(x = 0; x &lt; strlen(message); x++)\n    {\n        for(y = 0; y &lt; 25; y++)\n        {\n            if(alpha[y] == message[x])\n            {\n                z = (y + 3);\n                if(z &gt; 25)\n                {\n                    z = z % 25;\n                }\n\n                result[x] = alpha[z];\n            }\n        }\n    }\n\n    printf(\"%s\\n\", result);\n\n    //return result;\n}\n\nint main()\n{\n    char message[200];\n    char *result;\n    char array[26] = { 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z' };\n\n    printf(\"Input your message:\");\n    scanf(\"%s\", &amp;message);\n\n    encode(array, message);\n}\n</code></pre>\n\n<p>Result:</p>\n\n<p><a href=\"https://i.stack.imgur.com/IAIel.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IAIel.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c", "parallel-processing", "pthreads"], "comments": [{"owner": {"reputation": 3760, "user_id": 6594576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/448660dad9fcb2bf8b5f7a3ab8813037?s=128&d=identicon&r=PG", "display_name": "Paul Floyd", "link": "https://stackoverflow.com/users/6594576/paul-floyd"}, "edited": false, "score": 0, "creation_date": 1510133866, "post_id": 47175974, "comment_id": 81301364, "body": "Can you run this under Valgrind (memcheck for the memory issues and helgrind/DRD for threads)?"}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1510135300, "post_id": 47175974, "comment_id": 81302341, "body": "too long didn&#39;t read, you should learn how to debug your own program."}, {"owner": {"reputation": 37, "user_id": 4513181, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/131c2b2784b4615ae5244e3ceba0b1c5?s=128&d=identicon&r=PG&f=1", "display_name": "Alexis", "link": "https://stackoverflow.com/users/4513181/alexis"}, "reply_to_user": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1510136338, "post_id": 47175974, "comment_id": 81303070, "body": "@Stargateur Ah sorry. I was just a bit desperate, I guess. I was researching all day and somehow I didn&#39;t find an answer. This was my last resort."}, {"owner": {"reputation": 37, "user_id": 4513181, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/131c2b2784b4615ae5244e3ceba0b1c5?s=128&d=identicon&r=PG&f=1", "display_name": "Alexis", "link": "https://stackoverflow.com/users/4513181/alexis"}, "reply_to_user": {"reputation": 3760, "user_id": 6594576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/448660dad9fcb2bf8b5f7a3ab8813037?s=128&d=identicon&r=PG", "display_name": "Paul Floyd", "link": "https://stackoverflow.com/users/6594576/paul-floyd"}, "edited": false, "score": 0, "creation_date": 1510136394, "post_id": 47175974, "comment_id": 81303111, "body": "@Paul Floyd Thank you for the suggestion. Unfortunately, I&#39;m not well versed in that kind of thing."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1510160145, "post_id": 47175974, "comment_id": 81319823, "body": "Please <a href=\"https://stackoverflow.com/posts/47175974/edit\">edit</a> your question to show us what kind of debugging you&#39;ve done.  I expect you to have run your <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> within Valgrind or a similar checker, and to have investigated with a debugger such as GDB, for example.  Ensure you&#39;ve enabled a full set of compiler warnings, too.  What did the tools tell you, and what information are they missing?  And read Eric Lippert&#39;s <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a>."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1510160155, "post_id": 47175974, "comment_id": 81319829, "body": "Please <a href=\"https://stackoverflow.com/posts/47175974/edit\">edit</a> your code to reduce it to a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of your problem.  Your current code includes much that is peripheral to your problem - a minimal sample normally looks similar to a good unit test: only performing one task, with input values specified for reproducibility."}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 4513181, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/131c2b2784b4615ae5244e3ceba0b1c5?s=128&d=identicon&r=PG&f=1", "display_name": "Alexis", "link": "https://stackoverflow.com/users/4513181/alexis"}, "edited": false, "score": 0, "creation_date": 1510136340, "post_id": 47176447, "comment_id": 81303072, "body": "Thank you. I took away the free(x) and free(y) and it worked. Just have to implement it to properly give me the proper resulting matrix multiplication."}, {"owner": {"reputation": 943, "user_id": 6713758, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/PUdIx.jpg?s=128&g=1", "display_name": "FKEinternet", "link": "https://stackoverflow.com/users/6713758/fkeinternet"}, "reply_to_user": {"reputation": 37, "user_id": 4513181, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/131c2b2784b4615ae5244e3ceba0b1c5?s=128&d=identicon&r=PG&f=1", "display_name": "Alexis", "link": "https://stackoverflow.com/users/4513181/alexis"}, "edited": false, "score": 0, "creation_date": 1510137346, "post_id": 47176447, "comment_id": 81303804, "body": "I hope you fixed the other errors I pointed out.  You should also mark answers as &quot;accepted&quot; when they solve your problems, that&#39;s part of what makes StackOverflow work."}], "tags": [], "owner": {"reputation": 943, "user_id": 6713758, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/PUdIx.jpg?s=128&g=1", "display_name": "FKEinternet", "link": "https://stackoverflow.com/users/6713758/fkeinternet"}, "is_accepted": true, "score": 1, "last_activity_date": 1510134744, "creation_date": 1510134744, "answer_id": 47176447, "question_id": 47175974, "link": "https://stackoverflow.com/questions/47175974/pthreads-double-free-or-corruption-out-error/47176447#47176447", "title": "pthreads &quot;double free or corruption (out)&quot; error", "body": "<p>There are several problems here.</p>\n\n<p>You create an array of <code>n</code> elements by allocating <code>A</code>.  Then you create a two dimensional array of <code>n</code> elements and attach it to the first element in <code>A</code>.  Twice.  <strong>The first allocation is lost, and is a memory leak.</strong></p>\n\n<p>You do the same thing for <code>B</code> and <code>C</code>, without the double allocation.</p>\n\n<p>You then operate on <code>A</code>, <code>B</code> and <code>C</code> as though they are two dimensional arrays, which they are not, <strong>so you are writing to \"random\" places in memory</strong> (i.e., not where you have memory allocated) which is corrupting the heap.  <strong>You should be allocating <code>A</code>, <code>B</code> and <code>C</code> as two dimensional arrays.</strong></p>\n\n<p>When you finish, you don't free the <code>A[0]</code> array, only the <code>A</code> array.  <strong>This leaks the A[0] allocation.</strong>  You correctly free the <code>B[0]</code> and <code>C[0]</code> arrays before releasing the <code>B</code> and <code>C</code> arrays.  <strong>Then you free <code>x</code> and <code>y</code>, which were never allocated</strong> - they only refer to allocated memory.  <strong>This is the source of your \"double free\" error.</strong></p>\n"}], "owner": {"reputation": 37, "user_id": 4513181, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/131c2b2784b4615ae5244e3ceba0b1c5?s=128&d=identicon&r=PG&f=1", "display_name": "Alexis", "link": "https://stackoverflow.com/users/4513181/alexis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 623, "favorite_count": 0, "accepted_answer_id": 47176447, "answer_count": 1, "score": 0, "last_activity_date": 1510135346, "creation_date": 1510133337, "last_edit_date": 1510135346, "question_id": 47175974, "link": "https://stackoverflow.com/questions/47175974/pthreads-double-free-or-corruption-out-error", "title": "pthreads &quot;double free or corruption (out)&quot; error", "body": "<p>I'm trying to do matrix multiplication using pthreads, \nbut somehow I'm getting \"double free or corruption (out)\" error.</p>\n\n<pre><code>typedef struct {\n    double *my_x;\n    double *my_y;\n    double my_dot_prod;\n    double *global_dot_prod;\n    pthread_mutex_t *mutex;\n    int my_vec_len;\n} dot_product_t;\n\nvoid *serial_dot_product(void *arg) {\n    dot_product_t *dot_data;\n    int i;\n\n    dot_data = arg;\n\n    for(i=0; i&lt;dot_data-&gt;my_vec_len; i++)\n        dot_data-&gt;my_dot_prod += dot_data-&gt;my_x[i]*dot_data-&gt;my_y[i];\n\n    pthread_mutex_lock(dot_data-&gt;mutex);\n    *(dot_data-&gt;global_dot_prod) += dot_data-&gt;my_dot_prod;\n    pthread_mutex_unlock(dot_data-&gt;mutex);\n    pthread_exit(NULL);\n}\n\nint main() {\n    double *x, *y, dot_prod;\n    pthread_t *working_thread;\n    dot_product_t *thrd_dot_prod_data;\n    void *status;\n    pthread_mutex_t *mutex_dot_prod;\n\n    int num_of_thrds;\n    int vec_len;\n    int subvec_len;\n\n    double** A;\n    double** B;\n    double** C;\n\n    int i=0;\n    int j=0;\n    int n;\n\n    printf (\"Enter matrix dimension n: \");\n    scanf(\" %d\", &amp;n);\n\n// Matrix A - memory allocation\n    A =(double **)malloc(n*sizeof(double *));\n    A[0] = (double *)malloc(n*n*sizeof(double));\n    A[0] = (double *)malloc(n*n*sizeof(double));\n    if(!A) {\n        printf(\"memory failed \\n\");\n        exit(1);\n    }\n    for(i=1; i&lt;n; i++) {\n        A[i] = A[0]+i*n;\n        if (!A[i]) {\n            printf(\"memory failed \\n\");\n            exit(1);\n        }\n    }\n\n// Matrix B - memory allocation\n    B =(double **)malloc(n*sizeof(double *));\n    B[0] = (double *)malloc(n*n*sizeof(double));\n\n    if(!B) {\n        printf(\"memory failed \\n\");\n        exit(1);\n    }\n\n    for(i=1; i&lt;n; i++) {\n        B[i] = B[0]+i*n;\n        if (!B[i]){\n            printf(\"memory failed \\n\");\n            exit(1);\n        }\n    }\n\n// Matrix C - memory allocation\n    C =(double **)malloc(n*sizeof(double *));\n    C[0] = (double *)malloc(n*n*sizeof(double));\n    if(!C) {\n        printf(\"memory failed \\n\");\n        exit(1);\n    }\n\n    for(i=1; i&lt;n; i++) {\n        C[i] = C[0]+i*n;\n        if (!C[i]) {\n            printf(\"memory failed \\n\");\n            exit(1);\n        }\n    }\n\n    for(i=0; i&lt;n; i++) {\n        for(j=0; j&lt;n; j++) {\n            A[i][j] = 1.0;\n            B[i][j] = 1.0;\n            C[i][j] = 0.0;\n        }\n    }\n\n    printf(\"Number of processors = \");\n    if(scanf(\"%d\", &amp;num_of_thrds) &lt; 1 || num_of_thrds &gt; MAXTHRDS){\n        printf(\"Check input for number of processors. Bye.\\n\");\n        return -1;\n    }\n    printf(\"Vector length = \");\n    if(scanf(\"%d\", &amp;vec_len)&lt;1 || vec_len &gt; n){\n        printf(\"Check input for vector length. Bye.\\n\");\n        return -1;\n    }\n    subvec_len = vec_len/num_of_thrds;\n\n    working_thread = malloc(num_of_thrds*sizeof(pthread_t));\n    thrd_dot_prod_data=malloc(num_of_thrds*sizeof(dot_product_t));\n    mutex_dot_prod = malloc(sizeof(pthread_mutex_t));\n    pthread_mutex_init(mutex_dot_prod, NULL);\n\n    int k = 0;\n    int l = 0;\n\n    for(j=0;j&lt;n;j++){\n        for(k=0;k&lt;n;k++){\n            x = A[j];\n            y = B[k];\n            for(i=0; i&lt;num_of_thrds; i++){\n                thrd_dot_prod_data[i].my_x = x + i*subvec_len;\n                thrd_dot_prod_data[i].my_y = y + i*subvec_len;\n                thrd_dot_prod_data[i].global_dot_prod = &amp;dot_prod;\n                thrd_dot_prod_data[i].mutex = mutex_dot_prod;\n                thrd_dot_prod_data[i].my_vec_len =\n                        (i==num_of_thrds-1)?vec_len-(num_of_thrds-1)*subvec_len:subvec_len;\n                pthread_create(&amp;working_thread[i], NULL, serial_dot_product,(void*)&amp;thrd_dot_prod_data[i]);\n            }\n            for(i=0; i&lt;num_of_thrds; i++)\n                pthread_join(working_thread[i], &amp;status);\n             C[j][k] = dot_prod;\n            dot_prod = 0.0;\n\n        }\n    }\n\n    for(i=0;i&lt;n;i++) {\n        for(j=0;j&lt;n;j++){\n            printf(\"%lf \", C[i][j]);\n        }\n        printf(\"\\n\");\n    }\n\n    free(A);\n    free(B[0]);\n    free(B);\n    free(C[0]);\n    free(C);\n    free(x);\n    free(y);\n    free(working_thread);\n    free(thrd_dot_prod_data);\n    pthread_mutex_destroy(mutex_dot_prod);\n    free(mutex_dot_prod);\n}\n</code></pre>\n\n<p>The serial_dot_product function is the one I'm using for each row on the A matrix and column on each B matrix and then assign the resulting return value to C[j][k]. However, when I do run this, I get this error.\n<a href=\"https://i.stack.imgur.com/Ex3ey.png\" rel=\"nofollow noreferrer\">Error image</a></p>\n\n<p>It gives me a matrix as you can see before the actual 'double free or corruption' error, but it's wrong.</p>\n"}, {"tags": ["c", "c-preprocessor", "constants"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1510132984, "post_id": 47175808, "comment_id": 81300717, "body": "Besides the definition of the &quot;variable&quot; <code>str</code> being wrong, it&#39;s <i>mostly</i> a matter of personal taste, and how you&#39;re supposed to use it."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1510133047, "post_id": 47175808, "comment_id": 81300761, "body": "Considering one will pollute every translation unit that includes that header with a global variable. The answer is obvious."}], "answers": [{"tags": [], "owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "is_accepted": false, "score": 0, "last_activity_date": 1510133521, "last_edit_date": 1510133521, "creation_date": 1510133090, "answer_id": 47175872, "question_id": 47175808, "link": "https://stackoverflow.com/questions/47175808/best-way-to-declare-a-constant-string-in-c/47175872#47175872", "title": "Best way to declare a constant string in C", "body": "<p>It doesn't matter (doesn't matter if you only consider of getting a string literal) how you do but in case you want to get the string constant to be traced under debugger you may want to use the <code>const char*str = ...</code></p>\n\n<blockquote>\n  <p>With macro definition you will get all the problems of macro\n  expansion- the side effects of the expanson, the pollution of the name\n  space, the deviation from debugger help etc</p>\n</blockquote>\n"}], "owner": {"reputation": 882, "user_id": 1163286, "user_type": "registered", "accept_rate": 7, "profile_image": "https://i.stack.imgur.com/yq3OX.jpg?s=128&g=1", "display_name": "Pankaj Kumar Thapa", "link": "https://stackoverflow.com/users/1163286/pankaj-kumar-thapa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1416, "favorite_count": 0, "closed_date": 1510133725, "answer_count": 1, "score": -1, "last_activity_date": 1510143084, "creation_date": 1510132924, "last_edit_date": 1592644375, "question_id": 47175808, "link": "https://stackoverflow.com/questions/47175808/best-way-to-declare-a-constant-string-in-c", "closed_reason": "Duplicate", "title": "Best way to declare a constant string in C", "body": "<p>I have a string: <code>&quot;The world is a beautiful place to live in.&quot;</code>.</p>\n<p>I have two source files and a global header file. I can access the string in two easy ways:-</p>\n<ul>\n<li><p>Declaring and defining a constant variable as shown: I can use it using <code>extern</code></p>\n<p><code>const char *str = &quot;The world is a beautiful place to live in.&quot;;</code></p>\n</li>\n<li><p>Using <code>#define STR &quot;The world is a beautiful place to live in.&quot;</code></p>\n</li>\n</ul>\n<p>Out of the above two options, which one is preferred in C?</p>\n"}, {"tags": ["c", "string"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 2, "creation_date": 1510132756, "post_id": 47175723, "comment_id": 81300541, "body": "well, what&#39;s your issue? the obvious bug I&#39;m seeing is that you&#39;re not resetting <code>count</code> between each word"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1510132957, "post_id": 47175723, "comment_id": 81300694, "body": "It seems that <code>if (array[i] != NULL)</code> has no meaning."}, {"owner": {"reputation": 43, "user_id": 8612472, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ni4vv.png?s=128&g=1", "display_name": "Secernere", "link": "https://stackoverflow.com/users/8612472/secernere"}, "edited": false, "score": 0, "creation_date": 1510133135, "post_id": 47175723, "comment_id": 81300815, "body": "Incase the array has had strings removed."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1510134176, "post_id": 47175723, "comment_id": 81301569, "body": "If you are counting <i>bytes</i>, this is easy. If you want to count <i>characters</i>, it can get quite involved. (Multi-byte encoding, combining characters, ...)"}], "answers": [{"comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1510133134, "post_id": 47175759, "comment_id": 81300812, "body": "<code>count</code> is defined inside if-block.  <code>total += count;</code> : Using <code>count</code> at out of scope. Also <i>including the terminating characters</i>"}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1510133310, "post_id": 47175759, "comment_id": 81300966, "body": "@BLUEPIXY.: The answer detects the problem right. But thanks for the help"}], "tags": [], "owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "is_accepted": false, "score": 2, "last_activity_date": 1510133658, "last_edit_date": 1510133658, "creation_date": 1510132771, "answer_id": 47175759, "question_id": 47175723, "link": "https://stackoverflow.com/questions/47175723/count-characters-in-an-array-of-character-strings/47175759#47175759", "title": "Count characters in an array of character strings?", "body": "<ul>\n<li>You have to increment the index to consider each of the character.</li>\n</ul>\n\n<p>Something like this:-</p>\n\n<pre><code>for (int i = 0; i &lt; len; i++)\n{\n    if (array[i] != NULL)\n    {\n        int j=0,count=0;\n        while (array[i][j++] != '\\0') {\n            count++;\n        }\n        total += count;     \n    }\n\n}\n</code></pre>\n\n<ul>\n<li>Also reset the <code>count</code> or add to <code>total</code> at the end of all the calculation.</li>\n</ul>\n\n<p>As an answer to your second question:-</p>\n\n<hr>\n\n<blockquote>\n  <p><code>char* array[]</code> is basically denoting an array pointers each pointing\n  to the string literals with which you initialized it.</p>\n  \n  <p>So once you use <code>array[i]</code> you should now think that it is nothing\n  other than a pointer to a string literal.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1510134722, "last_edit_date": 1510134722, "creation_date": 1510133791, "answer_id": 47176133, "question_id": 47175723, "link": "https://stackoverflow.com/questions/47175723/count-characters-in-an-array-of-character-strings/47176133#47176133", "title": "Count characters in an array of character strings?", "body": "<p>You need to reinitialize the variable <code>count</code> inside the for loop for each processed string and to increase the expression <code>*array[i]</code> inside the while loop.</p>\n\n<p>Also it is better when the function has the return type <code>size_t</code> (<code>size_t</code> is the type that is returned by the standard C function <code>strlen</code> and by the operator <code>sizeof</code>)</p>\n\n<p>The function can look as it is shown in the demonstrative program.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nsize_t countChars( const char *array[], size_t n )\n{\n    size_t count = 0;\n\n    while ( n-- )\n    {\n        if ( array[n] )\n        {\n            size_t i = 0;\n            do { ++count; } while ( array[n][i++] );\n        }\n    }\n\n    return count;\n}\n\nint main(void) \n{\n    const char * example[] = { \"s\", \"ss\", \"sss\" };\n\n    printf( \"%zu\\n\", countChars( example, sizeof( example ) / sizeof( *example ) ) );\n\n    return 0;\n}\n</code></pre>\n\n<p>The program output is </p>\n\n<pre><code>9\n</code></pre>\n\n<p>Each element of this array</p>\n\n<pre><code>char *example[] = {\"s\", \"ss\", \"sss\"};\n</code></pre>\n\n<p>has type <code>char *</code> and is a pointer to the first character of the corresponding string literal.</p>\n"}, {"tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": false, "score": -1, "last_activity_date": 1510143519, "last_edit_date": 1510143519, "creation_date": 1510135379, "answer_id": 47176681, "question_id": 47175723, "link": "https://stackoverflow.com/questions/47175723/count-characters-in-an-array-of-character-strings/47176681#47176681", "title": "Count characters in an array of character strings?", "body": "<p>Yes <code>char *array[] = {\"aa\", \"bb\", \"cc\"}</code> is an array of pointers to strings.</p>\n\n<ul>\n<li><code>array[0]</code> points to <code>\"aa\"</code></li>\n<li><code>array[1]</code> points to <code>\"bb\"</code></li>\n<li><code>array[2]</code> points to <code>\"cc\"</code></li>\n</ul>\n\n<p>You probably want this:</p>\n\n<pre><code>int countChars(char *array[], int len)\n{\n  int count = 0;\n\n  for (int arrayindex = 0; arrayindex &lt; len; arrayindex++)\n  {\n    const char *stringptr = array[arrayindex];\n                                // stringptr will point successively\n                                // to \"s\", to \"ss\" and to \"sss\"\n\n    while (*stringptr++)\n      count++;                  // increment count until NUL character encountered\n    count++;                    // one more for NUL character\n  }\n\n  return count;\n}\n\nint main() {\n  char *example[] = { \"s\", \"ss\", \"sss\" };\n\n  int x = countChars(example, 3);   // x contains 9 after the call to countChars\n                                    // that is 2 + 3 + 4\n}\n</code></pre>\n\n<p>Instead of hard coding <code>3</code> you could use <code>sizeof(example) / sizeof(example[0])</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 8833, "user_id": 337149, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3bbd41f2b74254f902cfe20acef9030b?s=128&d=identicon&r=PG", "display_name": "August Karlstrom", "link": "https://stackoverflow.com/users/337149/august-karlstrom"}, "is_accepted": false, "score": 0, "last_activity_date": 1510138211, "creation_date": 1510138211, "answer_id": 47177745, "question_id": 47175723, "link": "https://stackoverflow.com/questions/47175723/count-characters-in-an-array-of-character-strings/47177745#47177745", "title": "Count characters in an array of character strings?", "body": "<p>Since your array contains string constants you should declare it with <code>const</code>:</p>\n\n<pre><code>const char *example[3];\n</code></pre>\n\n<p>Without <code>const</code> the compiler will not warn you if you try to assign a character to <em>example</em>[<em>i</em>][<em>j</em>]. For the same reason the formal parameter should also be declared with <code>const</code>.</p>\n\n<p>For a pure function with no side effects it is better to name it so that it reflects the result. Therefor I would use <em>charCount</em> instead of <em>countChars</em> (or maybe <em>totalLength</em>). The focus should be on a <em>noun</em> (namely <em>count</em> or <em>length</em>).</p>\n\n<p>Here is my solution:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define LEN(a) (sizeof (a) / sizeof (a)[0])\n\nstatic int CharCount(const char *strings[], int len)\n{\n    int result, i, j;\n\n    result = 0;\n    for (i = 0; i &lt; len; i++) {\n        j = 0;\n        while (strings[i][j] != '\\0') {\n            result++;\n            j++;\n        }\n    }\n    return result;\n}\n\n\nint main(void)\n{\n    const char *strings[] = { \"s\", \"ss\", \"sss\" };\n\n    printf(\"character count: %d\\n\", CharCount(strings, LEN(strings)));\n}\n</code></pre>\n\n<p>The length macro <em>LEN</em> is very convenient and is the least error prone way to handle array lengths.</p>\n"}], "owner": {"reputation": 43, "user_id": 8612472, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ni4vv.png?s=128&g=1", "display_name": "Secernere", "link": "https://stackoverflow.com/users/8612472/secernere"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5384, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1510143519, "creation_date": 1510132645, "last_edit_date": 1510134753, "question_id": 47175723, "link": "https://stackoverflow.com/questions/47175723/count-characters-in-an-array-of-character-strings", "title": "Count characters in an array of character strings?", "body": "<p>Given an array of character strings such as...</p>\n\n<pre><code>char *example[] = {\"s\", \"ss\", \"sss\"};\n</code></pre>\n\n<p>How can I write a function to count the total number of chars in the array including the terminating characters, without using the standard library for strlen() etc.</p>\n\n<p>Follows is my attempt</p>\n\n<pre><code>int countChars(char *array[], int len)\n{\n    int total = 0, count = 0;\n\n\n    for (int i = 0; i &lt; len; i++)\n    {\n        if (array[i] != NULL)\n        {\n            while (*array[i] != '\\0') {\n                count++;\n            }\n            count++;\n        }\n        total += count;\n    }\n\n    return total;\n}\n</code></pre>\n\n<p>An explanation on how char *array[] actually works for access wold be appreciated. I believe that it is supposed to be an array of pointers to strings.</p>\n"}, {"tags": ["c", "logic"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1510132649, "post_id": 47175664, "comment_id": 81300459, "body": "why not just inverting a &amp; b loops and drop the outer loop? you have 1 loop too many. or just print <code>arr[b][a]</code>. Well, maybe you have to reverse some indices, but should not be more than 2 loops to do that."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 4, "creation_date": 1510132772, "post_id": 47175664, "comment_id": 81300551, "body": "Questions about improving working code belong on <a href=\"http://codereview.stackexchange.com\">CodeReview</a>."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 2, "creation_date": 1510154980, "post_id": 47175664, "comment_id": 81316182, "body": "That&#39;s counter-clockwise."}], "answers": [{"tags": [], "owner": {"reputation": 868, "user_id": 6022274, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/06c83ad18e5255b126aca74fff0af330?s=128&d=identicon&r=PG&f=1", "display_name": "Bromind", "link": "https://stackoverflow.com/users/6022274/bromind"}, "is_accepted": false, "score": 1, "last_activity_date": 1512085748, "creation_date": 1512085748, "answer_id": 47584519, "question_id": 47175664, "link": "https://stackoverflow.com/questions/47175664/is-this-logical-approach-right-for-my-program/47584519#47584519", "title": "Is this logical approach right for my program?", "body": "<p>This is you matrix, with the axis you chose : </p>\n\n<pre><code>  b -&gt;\na 1 2 3\n| 4 5 6\nV 7 8 9\n</code></pre>\n\n<p>That is, for a fixed <code>a</code> for instance, if you increase <code>b</code>, you print \"the next number\" (provided <code>b</code> is not <code>2</code>). Similarly, if you increase <code>a</code> with the same <code>b</code>, you take the same column, but the next line.</p>\n\n<p>So, you can have the following pseudo program, to print a full column (on a line):</p>\n\n<pre><code>print_column(b):\n  for a from 0 to 2\n    print arr[a][b]\n  print newline\n</code></pre>\n\n<p>What do you want ? You want to print the following : </p>\n\n<pre><code>3 6 9\n2 5 8\n1 4 7\n</code></pre>\n\n<p>That is printing the last column, then the middle one, then the first one, which is done by the following pseudo-program:</p>\n\n<pre><code>print the 3rd column of arr\nprint the 2nd column of arr\nprint the 1st column of arr\n</code></pre>\n\n<p>or, more concisely : </p>\n\n<pre><code>for b from 2 to 0\n  print the b-th column of arr.\n</code></pre>\n\n<p>So, the final pseudo code is (inlining the print_column procedure):</p>\n\n<pre><code>for b from 2 to 0\n  for a from 0 to 2\n    print arr[a][b]\n  print newline\n</code></pre>\n\n<p>Or, in C:</p>\n\n<pre><code>for(b = 2; b &gt;= 0 ; b--)\n{\n    for(a = 0; a &lt; 3 ; a++)\n    {\n            printf(\"%d\\t\",arr[a][b]);\n    }\n    printf(\"\\n\");\n}\n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 7908932, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/3bd31009f46b091c0b376703d2d33f49?s=128&d=identicon&r=PG&f=1", "display_name": "Ron Axm", "link": "https://stackoverflow.com/users/7908932/ron-axm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1512085748, "creation_date": 1510132443, "last_edit_date": 1510132653, "question_id": 47175664, "link": "https://stackoverflow.com/questions/47175664/is-this-logical-approach-right-for-my-program", "title": "Is this logical approach right for my program?", "body": "<p>Program - Rotating matrix 90 degrees clockwise.\nI am a beginner in coding. I came across this question on GeeksforGeeks. I found the solutions very complex so tried applying my logic. But I don't know if my logic is appropriate for the program. Kindly guide me.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint main()\n{\n    int  A = 0 , a = 0 , b = 0;\n    int arr[3][3] = {{1,2,3},{4,5,6},{7,8,9}};\n    printf(\"90 Degree rotation: \\n\");\n    printf(\"\\n\");\n    for(A = 2; A &gt;= 0; A--)\n    {\n        for(a = 0; a &lt; 3 ; a++)\n        {\n            for(b = 0; b &lt; 3 ; b++)\n            {\n                if(b==A)\n                    printf(\"%d\\t\",arr[a][b]);\n            }\n        }\n        printf(\"\\n\");\n    }\n}\n</code></pre>\n\n<p>Input  </p>\n\n<blockquote>\n  <p>1 2 3<br>\n  4 5 6<br>\n  7 8 9  </p>\n</blockquote>\n\n<p>Output  </p>\n\n<blockquote>\n  <p>3 6 9<br>\n  2 5 8<br>\n  1 4 7  </p>\n</blockquote>\n"}, {"tags": ["c", "random"], "comments": [{"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 3, "creation_date": 1510132440, "post_id": 47175625, "comment_id": 81300317, "body": "Please be a bit more specific on your input, expected output and actual output."}, {"owner": {"reputation": 4150, "user_id": 7412986, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xOv4e.png?s=128&g=1", "display_name": "AlexP", "link": "https://stackoverflow.com/users/7412986/alexp"}, "edited": false, "score": 2, "creation_date": 1510132474, "post_id": 47175625, "comment_id": 81300340, "body": "<a href=\"http://manpages.ubuntu.com/manpages/zesty/en/man3/printf.3.html\" rel=\"nofollow noreferrer\"><code>printf()</code></a> takes values not pointers. (Except when you actually want to print  a memory address.) So you should say, for example, <code>printf (&quot;...&quot;, nu, bas, ba)</code> and not <code>printf (&quot;...&quot;, &amp;nu, &amp;bas, &amp;ba)</code>. And so on. Essentially you are not printing what you think you are printing."}, {"owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "edited": false, "score": 1, "creation_date": 1510132632, "post_id": 47175625, "comment_id": 81300445, "body": "How can you tell that <i>&quot;rand() keeps giving the same number&quot;</i>?"}, {"owner": {"reputation": 3123, "user_id": 2097041, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8L21m.jpg?s=128&g=1", "display_name": "Colin", "link": "https://stackoverflow.com/users/2097041/colin"}, "reply_to_user": {"reputation": 4150, "user_id": 7412986, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xOv4e.png?s=128&g=1", "display_name": "AlexP", "link": "https://stackoverflow.com/users/7412986/alexp"}, "edited": false, "score": 0, "creation_date": 1510132665, "post_id": 47175625, "comment_id": 81300475, "body": "@AlexP That is probably an answer :)"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 1, "creation_date": 1510132925, "post_id": 47175625, "comment_id": 81300665, "body": "Welcome to Stack Overflow! Please <a href=\"https://stackoverflow.com/posts/47175625/edit\">edit</a> your code to reduce it to a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of your problem.  Your current code includes much that is peripheral to your problem - a minimal sample normally looks similar to a good unit test: only performing one task, with input values specified for reproducibility.  For example, those <code>if</code>/<code>else</code> chains that do nothing but declare and initialise variables <code>B</code> and <code>C</code> (shadowing <code>main()</code>&#39;s <code>B</code> and <code>C</code>, and never used) should be omitted."}], "answers": [{"comments": [{"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 3, "creation_date": 1510132815, "post_id": 47175731, "comment_id": 81300586, "body": "This is probably a sign that insufficient warnings are enabled.  Compilers provide plenty of warnings, and experienced C programmers enable as many as they can!"}], "tags": [], "owner": {"reputation": 97299, "user_id": 41360, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/7bd2e50770e937761cfc3811a332bccc?s=128&d=identicon&r=PG", "display_name": "Vilx-", "link": "https://stackoverflow.com/users/41360/vilx"}, "is_accepted": false, "score": 4, "last_activity_date": 1510132660, "creation_date": 1510132660, "answer_id": 47175731, "question_id": 47175625, "link": "https://stackoverflow.com/questions/47175625/rand-keeps-giving-me-the-same-number-and-decreasing-4-by-variable/47175731#47175731", "title": "rand() keeps giving me the same number and decreasing 4 by variable", "body": "<p>It's because you're writing:</p>\n\n<pre><code>printf(\"%d\", &amp;x);\n</code></pre>\n\n<p>When you should be writing</p>\n\n<pre><code>printf(\"%d\", x);\n</code></pre>\n\n<p>In the first case you're printing the <strong>memory address</strong> of the variable; in the second - the contents of the variable.</p>\n\n<p>The <code>&amp;</code> is required for <code>scanf</code>, because it needs to know the memory address where to put the results, but printf only needs the value.</p>\n"}], "owner": {"reputation": 1, "user_id": 8905480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a17328e82f92bee2f0b0dedd467ab970?s=128&d=identicon&r=PG&f=1", "display_name": "xShadoWalkeR", "link": "https://stackoverflow.com/users/8905480/xshadowalker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1510132742, "creation_date": 1510132315, "question_id": 47175625, "link": "https://stackoverflow.com/questions/47175625/rand-keeps-giving-me-the-same-number-and-decreasing-4-by-variable", "title": "rand() keeps giving me the same number and decreasing 4 by variable", "body": "<p>I was trying to do this work for a class i have but for some reason i can't get the <code>rand()</code> to work, i've tested several diferent things to try and get it to work, but i just can't figure it out. I'm new to C so i might be doing something wrong here please help.</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;time.h&gt;\n\nint main() {\n    srand( time(NULL) );\n    int num, rep, nu, ba, bas;\n    char B[20] = \"\";\n    char C[20] = \"\";\n\n\n    printf(\"Jogo: Converter Bases!\\n\");\n    printf(\"\\n Quantas perguntas desejas responder? (1-6)\");\n    scanf(\"%d\", &amp;num);\n    while (num &lt;= 0 || num &gt; 6) {\n        printf(\"\\n Introduz um  valor valido de 1 a 6: \");\n        scanf(\"%d\", &amp;num);\n    }\n    for (int p=0; p&lt;num; p++) {\n        nu=rand()% 10;\n        bas=rand()% 3;\n        ba=rand()% 3;\n\n        printf(\"\\nnu = %i bas = %i ba = %i\", &amp;nu, &amp;bas, &amp;ba);\n\n        while (ba = bas) {\n            ba = rand()% 3;\n        }\n        if (bas = 0) {\n            char B[20] = \"Octal\";\n        } else if (bas =1) {\n            char B[20] = \"Decimal\";\n        } else {\n            char B[20] = \"Hexadecimal\";\n        }\n        if (ba = 0) {\n            char C[20] = \"Octal\";\n        } else if (ba =1) {\n            char C[20] = \"Decimal\";\n        } else {\n            char C[20] = \"Hexadecimal\";\n        }\n        printf(\"Converte %i de base %c para base %c\\n\", &amp;nu, &amp;B, &amp;C);\n        scanf(\"%d\", &amp;rep);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>`</p>\n"}, {"tags": ["java", "c", "java-native-interface", "native", "bytebuffer"], "comments": [{"owner": {"reputation": 1210, "user_id": 2508770, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/uRaoG.jpg?s=128&g=1", "display_name": "Emax", "link": "https://stackoverflow.com/users/2508770/emax"}, "edited": false, "score": 0, "creation_date": 1510133536, "post_id": 47175310, "comment_id": 81301138, "body": "Can you post the stacktrace?"}, {"owner": {"reputation": 23, "user_id": 8905232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3015bd79c01ceda9a52d68adb27ae7ec?s=128&d=identicon&r=PG&f=1", "display_name": "den yan", "link": "https://stackoverflow.com/users/8905232/den-yan"}, "reply_to_user": {"reputation": 1210, "user_id": 2508770, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/uRaoG.jpg?s=128&g=1", "display_name": "Emax", "link": "https://stackoverflow.com/users/2508770/emax"}, "edited": false, "score": 0, "creation_date": 1510134922, "post_id": 47175310, "comment_id": 81302096, "body": "@Emax I am using different pc to coding but edited question as trace&#39;s start"}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1510137221, "post_id": 47175310, "comment_id": 81303715, "body": "Ok but where did you allocate <code>pkt</code> ? Your question is lack of <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. By the way, all examples show that you <b>must</b> send <code>env</code> as first parameter <code>env-&gt;GetDirectBufferAddress(env, buf)</code> Do you have warning when you compile ?"}, {"owner": {"reputation": 23, "user_id": 8905232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3015bd79c01ceda9a52d68adb27ae7ec?s=128&d=identicon&r=PG&f=1", "display_name": "den yan", "link": "https://stackoverflow.com/users/8905232/den-yan"}, "reply_to_user": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1510137639, "post_id": 47175310, "comment_id": 81303997, "body": "@Stargateur sorry I had forgotten, but I edited for allocation line now. And as I specified in the question I cannot enter two parameter for GetDirectBufferAddress function. And I am not sure what buf is. Isn&#39;t buf is my pkt parameter? And no, there is no warning. I think, if there would be a problem in my functions I couldn&#39;t return 1 value to Java or couldn&#39;t print ByteBuffer&#39;s first parameter"}, {"owner": {"reputation": 9545, "user_id": 5295429, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XcJZr.png?s=128&g=1", "display_name": "Oo.oO", "link": "https://stackoverflow.com/users/5295429/oo-oo"}, "edited": false, "score": 1, "creation_date": 1510138008, "post_id": 47175310, "comment_id": 81304239, "body": "If you can survive with accessing values one by one, take a look here: <a href=\"https://github.com/mkowsiak/jnicookbook/tree/master/recipeNo040\" rel=\"nofollow noreferrer\">github.com/mkowsiak/jnicookbook/tree/master/recipeNo040</a>"}], "answers": [{"comments": [{"owner": {"reputation": 18759, "user_id": 2226988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c6fbec3a71b2e95e4a6e41478deb379?s=128&d=identicon&r=PG", "display_name": "Tom Blodget", "link": "https://stackoverflow.com/users/2226988/tom-blodget"}, "edited": false, "score": 1, "creation_date": 1510185140, "post_id": 47177553, "comment_id": 81332728, "body": "Doing the &quot;C&quot; thing of checking the result of <code>GetDirectBufferAddress()</code> for <code>NULL</code> (per the <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/jni/spec/functions.html#GetDirectBufferAddress\" rel=\"nofollow noreferrer\">documenation</a>) would cover more cases than <code>isDirect()</code>."}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "reply_to_user": {"reputation": 18759, "user_id": 2226988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c6fbec3a71b2e95e4a6e41478deb379?s=128&d=identicon&r=PG", "display_name": "Tom Blodget", "link": "https://stackoverflow.com/users/2226988/tom-blodget"}, "edited": false, "score": 0, "creation_date": 1510213240, "post_id": 47177553, "comment_id": 81341391, "body": "@TomBlodget the &quot;C&quot; thing would not be to check <code>NULL</code> or <code>isDirect()</code>, is the user function responsibility to give correct argument (ofc course function must explicitly ask this kind of argument in doc) ;)"}], "tags": [], "owner": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "is_accepted": true, "score": 7, "last_activity_date": 1510219932, "last_edit_date": 1510219932, "creation_date": 1510137729, "answer_id": 47177553, "question_id": 47175310, "link": "https://stackoverflow.com/questions/47175310/how-to-send-java-bytebuffer-to-c-using-jni/47177553#47177553", "title": "How to send Java ByteBuffer to C using JNI?", "body": "<p>To use <code>GetDirectBufferAddress()</code> you must guarantee that <strong>pkt</strong> is <em>direct</em> (you can check this with <a href=\"https://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html#isDirect()\" rel=\"nofollow noreferrer\">isDirect()</a>). The easy way to obtain such object is <code>ByteBuffer.allocateDirect()</code>. Direct ByteBuffer can be created from C++, too.</p>\n\n<p>The difference between direct and indirect ByteBuffer is clearly explained in the Java <a href=\"https://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html\" rel=\"nofollow noreferrer\">oficial doc</a>.</p>\n\n<p><strong>Update</strong> I see your update. No, <code>ByteBuffer.allocate(1000)</code> does not produce a DirectByteBuffer.</p>\n\n<p>As <a href=\"https://stackoverflow.com/users/2226988/tom-blodget\">@Tom Blodget</a> correctly <a href=\"https://stackoverflow.com/questions/47175310/how-to-send-java-bytebuffer-to-c-using-jni/47177553?noredirect=1#comment81332728_47177553\">noted</a>, the JNI <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/jni/spec/functions.html#GetDirectBufferAddress\" rel=\"nofollow noreferrer\">spec</a> explicitly says that <code>GetDirectBufferAddress()</code> can return NULL. This works both ways: the call itself should not crash if <strong>pkt</strong> is an indirect ByteBuffer, but you must check the result even if you are sure that <strong>pkt</strong> is a DirectByteBuffer.</p>\n"}, {"tags": [], "owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "is_accepted": false, "score": 0, "last_activity_date": 1510137789, "creation_date": 1510137789, "answer_id": 47177576, "question_id": 47175310, "link": "https://stackoverflow.com/questions/47175310/how-to-send-java-bytebuffer-to-c-using-jni/47177576#47177576", "title": "How to send Java ByteBuffer to C using JNI?", "body": "<p>You can't use <code>GetDirectBufferAddress()</code> except on a direct byte buffer. You don't have a direct byte buffer.</p>\n"}], "owner": {"reputation": 23, "user_id": 8905232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3015bd79c01ceda9a52d68adb27ae7ec?s=128&d=identicon&r=PG&f=1", "display_name": "den yan", "link": "https://stackoverflow.com/users/8905232/den-yan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3054, "favorite_count": 0, "accepted_answer_id": 47177553, "answer_count": 2, "score": 2, "last_activity_date": 1510219932, "creation_date": 1510131393, "last_edit_date": 1510137424, "question_id": 47175310, "link": "https://stackoverflow.com/questions/47175310/how-to-send-java-bytebuffer-to-c-using-jni", "title": "How to send Java ByteBuffer to C using JNI?", "body": "<p>Firstly, I want to say that the old answers doesn't work (for example, GetDirectBufferAddress function in below answers want one parameter now) at the moment as here:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/2673839/jni-native-method-with-bytebuffer-parameter\">JNI - native method with ByteBuffer parameter</a></p>\n\n<p>and here,</p>\n\n<p><a href=\"https://stackoverflow.com/questions/13386176/how-to-write-and-read-from-bytebuffer-passing-from-java-to-jni\">how to write and read from bytebuffer passing from java to jni</a></p>\n\n<p>It would be better if someone helps..</p>\n\n<p>So, I can't send correctly my ByteBuffer, which's some elements filled,  to C from Java using JNI and I can't return that ByteBuffer's elements again to C</p>\n\n<p><strong>My native function decleration:</strong></p>\n\n<pre><code>public native int myfunc(ByteBuffer pkt);\n</code></pre>\n\n<p><strong>Allocation for it</strong></p>\n\n<pre><code>private ByteBuffer pkt = ByteBuffer.allocate(1000);\n</code></pre>\n\n<p><strong>I am calling it in this way:</strong></p>\n\n<pre><code>System.out.println(myfunc(pkt));  // Doesn't works, throws exception\npkt.position(0);\nSystem.out.println(pkt.get()); // works, when I do comment line above .println\n</code></pre>\n\n<p><strong>And my C codes as below:</strong></p>\n\n<pre><code>JNIEXPORT jint JNICALL Java_xxx_myfunc(JNIEnv *, jobject, jobject); // header\n\n\nJNIEXPORT jint JNICALL Java_xxx_myfunc(JNIEnv *env, jobject obj, jobject pkt) // function\n{\n  jbyte *buff = (jbyte *) env-&gt;GetDirectBufferAddress(pkt);\n  // buff[0] = 0; I've also tried in this way\n  return buff[0];\n  //return 1; if I return 1, it returns correctly\n}\n</code></pre>\n\n<p>when I run the java program it throws exception. How can I return my filled ByteBuffer values from C?</p>\n\n<p><strong>EDIT</strong></p>\n\n<pre><code>A fatal error has been detected by the Java Runtime Environment:\nEXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x719c16b8, pid=1096, tid=1900\n</code></pre>\n"}, {"tags": ["c", "gcc", "segmentation-fault"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1510130991, "post_id": 47175099, "comment_id": 81299441, "body": "I don&#39;t fully get what you&#39;re trying to do here, but you have a <i>nested function</i> in your code, something that doesn&#39;t exist in C."}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 2, "creation_date": 1510131044, "post_id": 47175099, "comment_id": 81299476, "body": "@FelixPalmen It&#39;s a GCC extension. No idea if it really can be made to curry though, that seems magical."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1510131128, "post_id": 47175099, "comment_id": 81299526, "body": "Where does it segfault? What did your debugger tell you?"}, {"owner": {"reputation": 2988, "user_id": 452414, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/rDMfs.png?s=128&g=1", "display_name": "babon", "link": "https://stackoverflow.com/users/452414/babon"}, "edited": false, "score": 0, "creation_date": 1510131698, "post_id": 47175099, "comment_id": 81299880, "body": "You have missed a <code>;</code> after <code>a=f(x)</code> and this is working fine here: <a href=\"http://rextester.com/IAKVTA93918\" rel=\"nofollow noreferrer\">rextester.com/IAKVTA93918</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 1, "creation_date": 1510131715, "post_id": 47175099, "comment_id": 81299893, "body": "@unwind well, <b>if</b> it&#39;s allowed to return a pointer to a nested function, supporting closures would make sense..."}, {"owner": {"reputation": 887, "user_id": 1691280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f06b990f79e44451679541f695648de4?s=128&d=identicon&r=PG", "display_name": "Brandin", "link": "https://stackoverflow.com/users/1691280/brandin"}, "edited": false, "score": 0, "creation_date": 1510133015, "post_id": 47175099, "comment_id": 81300736, "body": "Why <code>apply(*q, 10)</code> and not <code>apply(q, 10)</code>?"}, {"owner": {"reputation": 887, "user_id": 1691280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f06b990f79e44451679541f695648de4?s=128&d=identicon&r=PG", "display_name": "Brandin", "link": "https://stackoverflow.com/users/1691280/brandin"}, "edited": false, "score": 0, "creation_date": 1510133364, "post_id": 47175099, "comment_id": 81301014, "body": "If you translate this to C++11 it can be made to work. Use <code>function&lt;int(int)&gt;</code> instead of <code>int (*)(int)</code> and use <code>auto curried_f = [=](int y){ ... }</code> for your &quot;nested&quot; function."}], "answers": [{"tags": [], "owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "is_accepted": false, "score": 2, "last_activity_date": 1510132776, "last_edit_date": 1510132776, "creation_date": 1510131896, "answer_id": 47175483, "question_id": 47175099, "link": "https://stackoverflow.com/questions/47175099/function-pointers-in-c-and-their-behaviour/47175483#47175483", "title": "Function Pointers in C and their behaviour", "body": "<p>Nested functions are a gcc extension.  The gcc documentation states that, once the containing function invocation has exited, any pointers to the nested function become invalid, at least if they attempt any up-level variable references.</p>\n\n<p>This makes sense, because as long as the containing function is active, its local variables remain allocated and the up-level references from the nested function can be resolved.  But once the containing function exits, it would need to support closures to preserve the stack frame, which it doesn't.</p>\n"}, {"tags": [], "owner": {"reputation": 339851, "user_id": 149392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a561ec0875fcbbe3066ea8fe288ec77?s=128&d=identicon&r=PG", "display_name": "sepp2k", "link": "https://stackoverflow.com/users/149392/sepp2k"}, "is_accepted": false, "score": 4, "last_activity_date": 1510132119, "creation_date": 1510132119, "answer_id": 47175563, "question_id": 47175099, "link": "https://stackoverflow.com/questions/47175099/function-pointers-in-c-and-their-behaviour/47175563#47175563", "title": "Function Pointers in C and their behaviour", "body": "<p>Nested functions are a GCC extension that does not exist in standard C, so this answer (like the question) is GCC-specific.</p>\n\n<p>Nested functions in C do not provide closures. That is, a nested function can only access local variables of the outer function until the outer function returns. The <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Nested-Functions.html\" rel=\"nofollow noreferrer\">GCC documentation</a> has the following to say on this subject:</p>\n\n<blockquote>\n  <p>If you try to call the nested function through its address after the containing function exits, all hell breaks loose. If you try to call it after a containing scope level exits, and if it refers to some of the variables that are no longer in scope, you may be lucky, but it\u2019s not wise to take the risk. If, however, the nested function does not refer to anything that has gone out of scope, you should be safe. </p>\n</blockquote>\n\n<p>Both versions of your code violate this rule, so why does only one cause a segfault? One answer is that, just like \"undefined behaviour\" \"all hell breaks loose\" can describe all types of behaviour, including seemingly working as expected.</p>\n\n<p>The more implementation-oriented answer is that returning from a function does not actually erase its contents on the stack immediately - the values just stay there until another function overrides them when they need the stack space. Introducing a new local variable makes the function need more stack space, so your second function overrides stack memory that previous version did not.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": false, "score": 1, "last_activity_date": 1510134461, "creation_date": 1510134461, "answer_id": 47176368, "question_id": 47175099, "link": "https://stackoverflow.com/questions/47175099/function-pointers-in-c-and-their-behaviour/47176368#47176368", "title": "Function Pointers in C and their behaviour", "body": "<p>C doesn't have a concept of <em>closures</em> which makes it impossible to implement currying based on plain function pointers. What you're trying here is using a <em>closure</em>:</p>\n\n<pre><code>one_var_func curry(int( * f)(int, int), int x) {\n  int curried_f(int y) {\n    return f(x, y);\n  }\n  return (curried_f);\n}\n</code></pre>\n\n<p>This would mean that the nested function \"captures\" the value of <code>x</code>. But in C, any variable with automatic storage duration doesn't exist any more once the execution leaves the enclosing scope, and there's no concept of closures that could prevent that.</p>\n\n<p>Given that even a nested function doesn't exist in C, although GCC supports it as an extension, if you really need to apply currying, you have to define your own \"function object\". An example in <em>standard</em> C could look like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\ntypedef struct intfunc\n{\n    int (*f)();\n    void *ctx;\n} intfunc;\n\ntypedef struct curryctx\n{\n    int (*f)();\n    int x;\n} curryctx;\n\nstatic int currycall(void *ctx, int x)\n{\n    curryctx *cctx = ctx;\n    return cctx-&gt;f(cctx-&gt;x, x);\n}\n\nint intfunc_call(intfunc f, int x)\n{\n    return f.ctx ? f.f(f.ctx, x) : f.f(x);\n}\n\nintfunc createfunc(int (*f)())\n{\n    return (intfunc){f, 0};\n}\n\nintfunc curryfunc(int (*f)(), int x)\n{\n    curryctx *cctx = malloc(sizeof *cctx);\n    if (!cctx) exit(1);\n    cctx-&gt;f = f;\n    cctx-&gt;x = x;\n    return (intfunc){currycall, cctx};\n}\n\nstatic int multiply(int x, int y)\n{\n    return x*y;\n}\n\nint main()\n{\n    intfunc multiply_by_two = curryfunc(multiply, 2);\n    printf(\"%d\\n\", intfunc_call(multiply_by_two, 10));\n    free(multiply_by_two.ctx);\n    return 0;\n}\n</code></pre>\n\n<p>Of course, this gets complex quite quickly, so I suggest you better forget about that idea altogether.</p>\n"}, {"tags": [], "owner": {"reputation": 23, "user_id": 1551103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c78e294e8c7211cdafb6889c41cd819?s=128&d=identicon&r=PG", "display_name": "amitkindre", "link": "https://stackoverflow.com/users/1551103/amitkindre"}, "is_accepted": false, "score": 0, "last_activity_date": 1510135442, "creation_date": 1510135442, "answer_id": 47176695, "question_id": 47175099, "link": "https://stackoverflow.com/questions/47175099/function-pointers-in-c-and-their-behaviour/47176695#47176695", "title": "Function Pointers in C and their behaviour", "body": "<p>when function </p>\n\n<pre><code>one_var_func curry(int( * f)(int, int), int x) \n{\n  int curried_f(int y) \n  {\n    return f(x, y);  //f and x are local to curry \n  }\n  return (curried_f);\n}\n</code></pre>\n\n<p>returns it's local variables f and x are no longer on stack.</p>\n\n<p>when function curried_f</p>\n\n<pre><code>int curried_f(int y) \n{\n    return f(x, y);  //f and x are local to curry \n}\n</code></pre>\n\n<p>is called it tries to acess x and f, which causes segmentation fault.</p>\n"}, {"tags": [], "owner": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "is_accepted": true, "score": 0, "last_activity_date": 1510139189, "creation_date": 1510139189, "answer_id": 47178110, "question_id": 47175099, "link": "https://stackoverflow.com/questions/47175099/function-pointers-in-c-and-their-behaviour/47178110#47178110", "title": "Function Pointers in C and their behaviour", "body": "<p>You declared the type alias <code>one_var_func</code> to represent <code>a pointer to a function int-&gt;int</code>.  You can also declare it as function, without pointer, and use pointer to instance of this typename.</p>\n\n<p>First, you are not allowed to define a function using type aliases.  This is a syntax error.</p>\n\n<blockquote>\n  <blockquote>\n    <p>The identi\ufb01er declared in a function de\ufb01nition (which is the name of the function) shall\n    have a function type, as speci\ufb01ed by the declarator portion of the function de\ufb01nition.\n    138)</p>\n  </blockquote>\n</blockquote>\n\n<p>I.e. a function definition is allowed to look only so:</p>\n\n<pre><code>function-de\ufb01nition:\n  declaration-speci\ufb01ers declarator  declaration-listopt compound-statement\n</code></pre>\n\n<p>The fact that gcc accepted probably with a warning only, this is gcc extension.</p>\n\n<pre><code>q = curry(p, 2);\n</code></pre>\n\n<p>What you wrote is not C, you know some functional programming and want to apply it in C, but in C the same concepts like <code>curry</code> are applied differently as there is no concept of closure and the local bindings of a function that returns another function and encloses the locals of the first are not in the kernel of the C language, you need to encode them yourself.</p>\n\n<p>There is no direct way for <code>q</code> to access the local binding <code>2</code>.</p>\n\n<pre><code>e = apply( * q, 10);\n</code></pre>\n\n<p>The same, to evaluate <code>q</code> applied on <code>10</code> you need some local environments that should be encoded inside <code>q</code>.</p>\n\n<p>There are other things to say about your code, before you try to implement evaluators of lisp in C I suggest you first to learn C and after that to read about the implementations of lisp starting from <a href=\"http://library.readscheme.org/page8.html\" rel=\"nofollow noreferrer\">here</a>, as they are not self evident.</p>\n"}], "owner": {"reputation": 23, "user_id": 2741736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c87eb86bd61eb6b838308a25ebcee11?s=128&d=identicon&r=PG&f=1", "display_name": "user2741736", "link": "https://stackoverflow.com/users/2741736/user2741736"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 180, "favorite_count": 0, "accepted_answer_id": 47178110, "answer_count": 5, "score": 1, "last_activity_date": 1510139189, "creation_date": 1510130751, "last_edit_date": 1510131760, "question_id": 47175099, "link": "https://stackoverflow.com/questions/47175099/function-pointers-in-c-and-their-behaviour", "title": "Function Pointers in C and their behaviour", "body": "<p>I was experimenting with c and function pointers. following piece of code works fine with gcc as compiler.</p>\n\n<pre><code>typedef int( * one_var_func)(int);\n\nint Multiply(int x, int y) {\n  return x * y;\n}\n\none_var_func curry(int( * f)(int, int), int x) {\n  int curried_f(int y) {\n    return f(x, y);\n  }\n  return (curried_f);\n}\n\nint apply(int( * f)(int), int x) {\n  return f(x);\n}\n\nint main() {\n  int( * p)(int, int);\n  one_var_func q;\n  int e;\n  p = &amp; Multiply;\n  q = curry(p, 2);\n  e = apply( * q, 10);\n  printf(\"%d \\n\", e);\n  return 1;\n}\n</code></pre>\n\n<p>However when i make this minor modification;</p>\n\n<pre><code>int apply(int (*f)(int) ,int x){\n  int a;\n  a=f(x)\n  return a;\n}\n</code></pre>\n\n<p>Program throws a segmentation fault. I dont understand why and how. An explanation would be really nice.</p>\n"}, {"tags": ["c", "mpi"], "comments": [{"owner": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 0, "creation_date": 1510133498, "post_id": 47174935, "comment_id": 81301118, "body": "One <code>printf()</code> is wrong, you are sending to <code>0</code>. What result do you expect ? It does what the code says... did you mean to initialize <code>token=0</code> outside the for loop ? Note the for loop is useless and indentation is misleading."}, {"owner": {"reputation": 84, "user_id": 5348980, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/hKR7m.jpg?s=128&g=1", "display_name": "Jamie Jackson", "link": "https://stackoverflow.com/users/5348980/jamie-jackson"}, "reply_to_user": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 0, "creation_date": 1510134205, "post_id": 47174935, "comment_id": 81301588, "body": "Well, im trying to get it to run through the token pass multiple times.  As of now, the for loop is giving me strange output."}, {"owner": {"reputation": 1408, "user_id": 5358968, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OAzKA.jpg?s=128&g=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/5358968/steve"}, "edited": false, "score": 1, "creation_date": 1510135256, "post_id": 47174935, "comment_id": 81302307, "body": "As <a href=\"https://stackoverflow.com/questions/47174935/looping-through-an-mpi-ring-in-c#comment81301118_47174935\">above comment</a>, take the line <code>int token = 1000</code> outside the for-loop (make it an actual for loop, missing <code>{}</code>) and remove the line <code>token = 0</code>."}, {"owner": {"reputation": 84, "user_id": 5348980, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/hKR7m.jpg?s=128&g=1", "display_name": "Jamie Jackson", "link": "https://stackoverflow.com/users/5348980/jamie-jackson"}, "edited": false, "score": 0, "creation_date": 1510136150, "post_id": 47174935, "comment_id": 81302943, "body": "That fixed my issue.  If you make that an answer, ill mark it correct"}], "answers": [{"comments": [{"owner": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 0, "creation_date": 1510138820, "post_id": 47177319, "comment_id": 81304782, "body": "out of curiosity, why did you initialize <code>token=1000</code> ?"}, {"owner": {"reputation": 84, "user_id": 5348980, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/hKR7m.jpg?s=128&g=1", "display_name": "Jamie Jackson", "link": "https://stackoverflow.com/users/5348980/jamie-jackson"}, "edited": false, "score": 0, "creation_date": 1510139387, "post_id": 47177319, "comment_id": 81305165, "body": "Haha, the instructor wanted us to initialize it to a random number to show that it would change to whatever it was set to inside the if statement.  Not sure why, but he asked that that be in there."}], "tags": [], "owner": {"reputation": 1408, "user_id": 5358968, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OAzKA.jpg?s=128&g=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/5358968/steve"}, "is_accepted": true, "score": 3, "last_activity_date": 1510137077, "creation_date": 1510137077, "answer_id": 47177319, "question_id": 47174935, "link": "https://stackoverflow.com/questions/47174935/looping-through-an-mpi-ring-in-c/47177319#47177319", "title": "Looping through an MPI ring in C", "body": "<p>As noted in <a href=\"https://stackoverflow.com/questions/47174935/looping-through-an-mpi-ring-in-c#comment81301118_47174935\">this comment</a>, the <code>for</code> loop is missing braces <code>{}</code> and the token would be reset each iteration of the loop.</p>\n\n<p>Also, you can remove one of your cases and include <code>world_rank==world_size</code> with the modulo operator <code>%</code>.</p>\n\n<pre><code>#include &lt;mpi.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(int argc, char* argv[])\n{\n    double starttime, endtime;\n    MPI_Init(&amp;argc, &amp;argv);\n    starttime = MPI_Wtime();\n    int world_rank;\n    int world_size;\n\n    MPI_Comm_rank(MPI_COMM_WORLD, &amp;world_rank);\n    MPI_Comm_size(MPI_COMM_WORLD, &amp;world_size);\n\n    //pass the token\n\n    int token =1000;\n\n    for (int i = 0; i &lt; 3; i++)\n    {\n        if (world_rank == 0)\n        {\n            // token = 0; removed\n            MPI_Send(&amp;token, 1, MPI_INT, 1, 0, MPI_COMM_WORLD);\n\n            MPI_Recv(&amp;token, 1, MPI_INT, world_size - 1, 0, MPI_COMM_WORLD, \n            MPI_STATUS_IGNORE);\n\n            printf(\"FINAL TOKEN %d\\n\", token);\n        }\n        else\n        {\n            MPI_Recv(&amp;token, 1, MPI_INT, world_rank-1, 0, MPI_COMM_WORLD, \n            MPI_STATUS_IGNORE);\n\n            printf(\"%d has token %d sending to %d\\n\", world_rank, token, \n            (world_rank+1)%world_size); // modified\n            token = token + 2;\n\n            MPI_Send(&amp;token, 1, MPI_INT, (world_rank+1)%world_size, 0, MPI_COMM_WORLD); // modified\n        }\n\n        endtime = MPI_Wtime();\n        printf(\"That took %f seconds\\n\",endtime-starttime);\n    }\n    MPI_Finalize();\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 84, "user_id": 5348980, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/hKR7m.jpg?s=128&g=1", "display_name": "Jamie Jackson", "link": "https://stackoverflow.com/users/5348980/jamie-jackson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1182, "favorite_count": 2, "accepted_answer_id": 47177319, "answer_count": 1, "score": 0, "last_activity_date": 1510137077, "creation_date": 1510130195, "last_edit_date": 1510134122, "question_id": 47174935, "link": "https://stackoverflow.com/questions/47174935/looping-through-an-mpi-ring-in-c", "title": "Looping through an MPI ring in C", "body": "<p>I'm having trouble figuring out how to do multiple iterations in my MPI code. Just from testing multiple for loops in different spots tells me I am doing something wrong. Part of our instructions are to pass the token around the ring multiple times specified in the command line arguments, but i cant seem to get it to work correctly by even hard coding the iterations. I left the top for loop in(Which doesn't work) but commented out the others.  </p>\n\n<p>This is probably a more complicated task than I am anticipating.\nAny help is appreciated</p>\n\n<pre><code>#include &lt;mpi.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(int argc, char* argv[])\n{\n    double starttime, endtime;\n    MPI_Init(&amp;argc, &amp;argv);\n    starttime = MPI_Wtime();\n    int world_rank;\n    int world_size;\n\n    for (int i = 0; i &lt; 3; i++)\n\n        MPI_Comm_rank(MPI_COMM_WORLD, &amp;world_rank);\n        MPI_Comm_size(MPI_COMM_WORLD, &amp;world_size);\n\n//pass the token\n\n        int token =1000;\n\n//for (int i = 0; i &lt; 3; i++)\n//{\n    if (world_rank == 0)\n    {\n        token = 0;\n        MPI_Send(&amp;token, 1, MPI_INT, 1, 0, MPI_COMM_WORLD);\n\n        MPI_Recv(&amp;token, 1, MPI_INT, world_size - 1, 0, MPI_COMM_WORLD, \n        MPI_STATUS_IGNORE);\n\n        printf(\"FINAL TOKEN %d\\n\", token);\n    }\n    else if(world_rank &lt; world_size - 1 )\n    {\n        MPI_Recv(&amp;token, 1, MPI_INT, world_rank-1, 0, MPI_COMM_WORLD, \n        MPI_STATUS_IGNORE);\n\n        printf(\"%d has token %d sending to %d\\n\", world_rank, token, \n        world_rank+1);\n        token = token + 2;\n\n        MPI_Send(&amp;token, 1, MPI_INT, world_rank+1, 0, MPI_COMM_WORLD);\n        }\n    else\n        {\n        MPI_Recv(&amp;token, 1, MPI_INT, world_rank-1, 0, MPI_COMM_WORLD, \n        MPI_STATUS_IGNORE);\n        printf(\"%d has token %d sending to %d\\n\", world_rank, token, \n        world_rank+1);\n        token = token + 2;\n        MPI_Send(&amp;token, 1, MPI_INT, 0, 0, MPI_COMM_WORLD);\n        }\n    endtime = MPI_Wtime();\n    printf(\"That took %f seconds\\n\",endtime-starttime);\n    }\n    MPI_Finalize();\n\n    return 0;\n}\n</code></pre>\n\n<p>Here's the compile and run output:</p>\n\n<pre><code>$ mpicc -std=c99 test.c\n$ mpirun -np 3 ./a.out\n1 has token 0 sending to 2\nThat took 0.000187 seconds\n2 has token 2 sending to 3\nThat took 0.000145 seconds\nFINAL TOKEN 4\nThat took 0.000180 seconds\nFINAL TOKEN 4\nThat took 0.000212 seconds\n2 has token 2 sending to 3\nThat took 0.000202 seconds\n2 has token 2 sending to 3\nThat took 0.000233 seconds\n1 has token 0 sending to 2\nThat took 0.000291 seconds\n1 has token 0 sending to 2\nThat took 0.000322 seconds\nFINAL TOKEN 4\nThat took 0.000244 seconds\n</code></pre>\n"}, {"tags": ["c", "assembly", "embedded", "endianness", "powerpc"], "comments": [{"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 1, "creation_date": 1510130734, "post_id": 47174570, "comment_id": 81299291, "body": "Please change the tags to include your compiler and architecture. <code>embedded</code> and <code>volatile</code> are not appropriate, I think, so you could replace them."}, {"owner": {"reputation": 3123, "user_id": 2097041, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8L21m.jpg?s=128&g=1", "display_name": "Colin", "link": "https://stackoverflow.com/users/2097041/colin"}, "edited": false, "score": 0, "creation_date": 1510130847, "post_id": 47174570, "comment_id": 81299354, "body": "<a href=\"https://www.ibm.com/support/knowledgecenter/en/ssw_aix_61/com.ibm.aix.alangref/idalangref_stwbrx_stbrx.htm\" rel=\"nofollow noreferrer\">ibm.com/support/knowledgecenter/en/ssw_aix_61/&hellip;</a> this tells you all you need to know about the instruction"}, {"owner": {"reputation": 805, "user_id": 6087248, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-2JVm7NK3kHs/AAAAAAAAAAI/AAAAAAAALJ0/e0Oh9JhnITQ/photo.jpg?sz=128", "display_name": "Nimrod Morag", "link": "https://stackoverflow.com/users/6087248/nimrod-morag"}, "edited": false, "score": 1, "creation_date": 1510130895, "post_id": 47174570, "comment_id": 81299379, "body": "check out <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Extended-Asm.html\" rel=\"nofollow noreferrer\">inline assembly</a>"}], "answers": [{"tags": [], "owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": false, "score": 7, "last_activity_date": 1510133660, "last_edit_date": 1510133660, "creation_date": 1510131858, "answer_id": 47175471, "question_id": 47174570, "link": "https://stackoverflow.com/questions/47174570/how-to-understand-this-gnu-c-inline-assembly-macro-for-powerpc-stwbrx/47175471#47175471", "title": "How to understand this GNU C inline assembly macro for PowerPC stwbrx", "body": "<p>Besides being unsafe because of a bug, this macro is also less efficient than what the compiler will generate for you.</p>\n\n<hr>\n\n<p><code>stwbrx</code> = <a href=\"https://www.ibm.com/support/knowledgecenter/en/ssw_aix_61/com.ibm.aix.alangref/idalangref_stwbrx_stbrx.htm\" rel=\"noreferrer\">store word byte-reversed</a>.  The <code>x</code> stands for indexed.</p>\n\n<p>You don't need inline asm for this in GNU C, where you can use <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Other-Builtins.html\" rel=\"noreferrer\"><code>__builtin_bswap32</code></a> and let the compiler emit this instruction for you.</p>\n\n<pre><code>void swapstore_asm(int a, int *p) {\n    ASMSWAP32(p, a);\n}\n\nvoid swapstore_c(int a, int *p) {\n    *p = __builtin_bswap32(a);\n}\n</code></pre>\n\n<p>Compiled with gcc4.8.5 <code>-O3 -mregnames</code>, we get identical code from both functions  <a href=\"https://gcc.godbolt.org/#g:!((g:!((g:!((h:codeEditor,i:(j:1,source:&#39;%23define+ASMSWAP32(dest_addr,data)+__asm__+volatile+(%22stwbrx+%250,+0,+%251%22+:+:+%22r%22+(data),+%22r%22+(dest_addr))%0A%0Avoid+swapstore(int+a,+int+*p)+%7B%0A++++ASMSWAP32(p,+a)%3B%0A%7D%0A%0Avoid+swapstore_c(int+a,+int+*p)+%7B%0A++++*p+%3D+__builtin_bswap32(a)%3B%0A%7D%0A%0A&#39;),l:&#39;5&#39;,n:&#39;0&#39;,o:&#39;C%2B%2B+source+%231&#39;,t:&#39;0&#39;)),k:30.51212938005391,l:&#39;4&#39;,n:&#39;0&#39;,o:&#39;&#39;,s:0,t:&#39;0&#39;),(g:!((g:!((h:compiler,i:(compiler:ppcg48,filters:(b:&#39;0&#39;,binary:&#39;1&#39;,commentOnly:&#39;0&#39;,demangle:&#39;0&#39;,directives:&#39;0&#39;,execute:&#39;1&#39;,intel:&#39;0&#39;,trim:&#39;1&#39;),libs:!(),options:&#39;-xc+-std%3Dgnu11+-Wall+-O3+-mregnames&#39;,source:1),l:&#39;5&#39;,n:&#39;0&#39;,o:&#39;PowerPC+gcc+4.8.5+(Editor+%231,+Compiler+%231)&#39;,t:&#39;0&#39;)),k:50,l:&#39;4&#39;,m:65.61546286876907,n:&#39;0&#39;,o:&#39;&#39;,s:0,t:&#39;0&#39;),(g:!((h:output,i:(compiler:1,editor:1),l:&#39;5&#39;,n:&#39;0&#39;,o:&#39;%231+with+PowerPC+gcc+4.8.5&#39;,t:&#39;0&#39;)),header:(),l:&#39;4&#39;,m:34.38453713123093,n:&#39;0&#39;,o:&#39;&#39;,s:0,t:&#39;0&#39;)),k:69.4878706199461,l:&#39;3&#39;,n:&#39;0&#39;,o:&#39;&#39;,t:&#39;0&#39;)),l:&#39;2&#39;,n:&#39;0&#39;,o:&#39;&#39;,t:&#39;0&#39;)),version:4\" rel=\"noreferrer\">(Godbolt compiler explorer)</a>:</p>\n\n<pre><code>swapstore:\n    stwbrx %r3, 0, %r4\n    blr\nswapstore_c:\n    stwbrx %r3,0,%r4\n    blr\n</code></pre>\n\n<p>But with a more complicated address (storing to <code>p[off]</code>, where <code>off</code> is an integer function arg), the compiler knows how to use both register inputs, while your macro forces the compiler to have the address in a single register:</p>\n\n<pre><code>void swapstore_offset(int a, int *p, int off) {\n     = __builtin_bswap32(a);\n}\n\nswapstore_offset:\n    slwi %r5,%r5,2              # *4 = sizeof(int)\n    stwbrx %r3,%r4,%r5          # use an indexed addressing mode, with both registers non-zero\n    blr\n\nswapstore_offset_asm:\n    slwi %r5,%r5,2\n    add %r4,%r4,%r5            # extra instruction forced by using the macro\n    stwbrx %r3, 0, %r4\n    blr\n</code></pre>\n\n<p>BTW, if you're having trouble understanding GNU C inline asm templates, looking at the compiler's asm output can be a useful way to see what gets substituted in.  See <a href=\"https://stackoverflow.com/questions/38552116/how-to-remove-noise-from-gcc-clang-assembly-output\">How to remove &quot;noise&quot; from GCC/clang assembly output?</a> for more about reading compiler asm output.</p>\n\n<hr>\n\n<p><strong>Also note that this macro is buggy: it's missing a <code>\"memory\"</code> clobber for the store</strong>.  And yes, you still need that with <code>asm volatile</code>.  The compiler doesn't assume that <code>*dest_addr</code> is modified unless you tell it, so it could hoist a non-volatile load of <code>*dest_addr</code> ahead of this insn, or more likely to be a real problem, sink a store after it.  (e.g. if you zeroed a buffer before storing to it with this, the compiler might actually zero <em>after</em> this instruction.)</p>\n\n<p>Instead of a <code>\"memory\"</code> clobber (and also leaving out <code>volatile</code>), you could tell the compiler <em>which</em> memory location you modify with a <code>=m\" (*dest_addr)</code> operand, either as a dummy operand or with a constraint on the addressing mode so you could use it as <code>reg+reg</code>.  (IDK PPC well enough to know what <code>\"=m\"</code> usually expands to.)</p>\n\n<p>In most cases this bug won't bite you, but it's still a bug.  Upgrading your compiler version or using link-time optimization could maybe make your program buggy with no source-level changes.</p>\n\n<p>This kind of thing is why <a href=\"https://gcc.gnu.org/wiki/DontUseInlineAsm\" rel=\"noreferrer\">https://gcc.gnu.org/wiki/DontUseInlineAsm</a></p>\n\n<p>See also <a href=\"https://stackoverflow.com/tags/inline-assembly/info\">https://stackoverflow.com/tags/inline-assembly/info</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1510132572, "post_id": 47175626, "comment_id": 81300398, "body": "<code>volatile</code> isn&#39;t as strong as you make it sound.  Without a <code>&quot;memory&quot;</code> clobber, it doesn&#39;t totally prevent reordering with other code.  It means the asm statement has side-effects and has to run exactly as many times as the source says, not just when the compiler wants to produce its outputs."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1510132687, "post_id": 47175626, "comment_id": 81300492, "body": "Worth pointing out that <code>0</code> (not <code>%0</code>) is the PPC zero-register, so adding it to the address produces the address."}], "tags": [], "owner": {"reputation": 14659, "user_id": 2705055, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/b1d5dfaf239229501a184c8858fbc954?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Rosenau", "link": "https://stackoverflow.com/users/2705055/martin-rosenau"}, "is_accepted": true, "score": 5, "last_activity_date": 1510132321, "creation_date": 1510132321, "answer_id": 47175626, "question_id": 47174570, "link": "https://stackoverflow.com/questions/47174570/how-to-understand-this-gnu-c-inline-assembly-macro-for-powerpc-stwbrx/47175626#47175626", "title": "How to understand this GNU C inline assembly macro for PowerPC stwbrx", "body": "<blockquote>\n  <p><code>#define ASMSWAP32(dest_addr,data)</code> ...</p>\n</blockquote>\n\n<p>This part should be clear</p>\n\n<blockquote>\n  <p><code>__asm__ volatile (</code> ... <code>: : \"r\" (data), \"r\" (dest_addr))</code></p>\n</blockquote>\n\n<p>This is the actual inline assembly:</p>\n\n<p>Two values are passed to the assmbly code; no value is returned from the assembly code (this is the colons after the actual assembly code).</p>\n\n<p>Both parameters are passed in registers (<code>\"r\"</code>). The expression <code>%0</code> will be replaced by the register that contains the value of <code>data</code> while the expression <code>%1</code> will be replaced by the register that contains the value of <code>dest_addr</code> (which will be a pointer in this case).</p>\n\n<p>The <code>volatile</code> here means that the assembly code has to be executed at this point and cannot be moved to somewhere else.</p>\n\n<p>So if you use the following code in the C source:</p>\n\n<pre><code>ASMSWAP(&amp;a, b);\n</code></pre>\n\n<p>... the following assembler code will be generated:</p>\n\n<pre><code># write the address of a to register 5 (for example)\n...\n# write the value of b to register 6\n...\nstwbrx 6, 0, 5\n</code></pre>\n\n<p>So the first argument of the <code>stwbrx</code> instruction is the value of <code>b</code> and the last argument is the address of <code>a</code>.</p>\n\n<blockquote>\n  <p><code>stwbrx x, 0, y</code></p>\n</blockquote>\n\n<p>This instruction writes the value in register <code>x</code> to the address stored in register <code>y</code>; however it writes the value in \"reverse endian\" (on a big-endian CPU it writes the value \"little endian\".</p>\n\n<p>The following code:</p>\n\n<pre><code>uint32 a;\nASMSWAP32(&amp;a, 0x12345678);\n</code></pre>\n\n<p>... should therefore result in <code>a = 0x78563412</code>.</p>\n"}], "owner": {"reputation": 257, "user_id": 2927392, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/d13c6d1107c7409f9e2df6a16694036d?s=128&d=identicon&r=PG&f=1", "display_name": "user2927392", "link": "https://stackoverflow.com/users/2927392/user2927392"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 803, "favorite_count": 0, "accepted_answer_id": 47175626, "answer_count": 2, "score": 4, "last_activity_date": 1510135016, "creation_date": 1510128754, "last_edit_date": 1510135016, "question_id": 47174570, "link": "https://stackoverflow.com/questions/47174570/how-to-understand-this-gnu-c-inline-assembly-macro-for-powerpc-stwbrx", "title": "How to understand this GNU C inline assembly macro for PowerPC stwbrx", "body": "<p>This is basically to perform swap for the buffers while transferring a message buffer. This statement left me puzzled (because of my unfamiliarity with the embedded assembly code in c). This is a power pc instruction</p>\n\n<pre><code>#define ASMSWAP32(dest_addr,data) __asm__ volatile (\"stwbrx %0, 0, %1\" : : \"r\" (data), \"r\" (dest_addr))\n</code></pre>\n"}, {"tags": ["c", "arrays", "loops"], "comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1510128725, "post_id": 47174474, "comment_id": 81298293, "body": "Uuh? Which elements in which 2D array are giving you problems, and just what type of errors or output do you receive?, what do you expect to get? &quot;Questions seeking debugging help (&quot;why isn&#39;t this code working?&quot;) must include the desired behavior, a specific problem or error and the shortest code necessary to reproduce it in the question itself. Questions without a clear problem statement are not useful to other readers. See: <a href=\"http://stackoverflow.com/help/mcve\"><b>How to create a Minimal, Complete, and Verifiable example</b></a>.&quot;"}, {"owner": {"reputation": 23, "user_id": 8157626, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/97c5660d2f841713c3b791c93b230a2d?s=128&d=identicon&r=PG&f=1", "display_name": "Ned", "link": "https://stackoverflow.com/users/8157626/ned"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1510129123, "post_id": 47174474, "comment_id": 81298488, "body": "@DavidC.Rankin my &#39;ans&#39; array (the last row&#39;s dash is missing). The output should have the last dash showing as well."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 8157626, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/97c5660d2f841713c3b791c93b230a2d?s=128&d=identicon&r=PG&f=1", "display_name": "Ned", "link": "https://stackoverflow.com/users/8157626/ned"}, "edited": false, "score": 0, "creation_date": 1510130365, "post_id": 47174656, "comment_id": 81299089, "body": "Thanks! But now, all the empty spaces becomes &#39;-&#39;. My guess is in the if statement,  i need to add another argument?"}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "reply_to_user": {"reputation": 23, "user_id": 8157626, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/97c5660d2f841713c3b791c93b230a2d?s=128&d=identicon&r=PG&f=1", "display_name": "Ned", "link": "https://stackoverflow.com/users/8157626/ned"}, "edited": false, "score": 0, "creation_date": 1510130771, "post_id": 47174656, "comment_id": 81299308, "body": "Well, if <code>overlap</code> sees a space and a hyphen at the same position in the two arrays, it will use the hyphen.  But it looks like the first version of <code>mytile</code> is assigning the same value to all elements (and calling <code>pat2match</code> once for every element)."}, {"owner": {"reputation": 23, "user_id": 8157626, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/97c5660d2f841713c3b791c93b230a2d?s=128&d=identicon&r=PG&f=1", "display_name": "Ned", "link": "https://stackoverflow.com/users/8157626/ned"}, "edited": false, "score": 0, "creation_date": 1510131809, "post_id": 47174656, "comment_id": 81299940, "body": "Oh, so how can I fix this? I&#39;m really stuck right now"}, {"owner": {"reputation": 23, "user_id": 8157626, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/97c5660d2f841713c3b791c93b230a2d?s=128&d=identicon&r=PG&f=1", "display_name": "Ned", "link": "https://stackoverflow.com/users/8157626/ned"}, "edited": false, "score": 0, "creation_date": 1510132430, "post_id": 47174656, "comment_id": 81300311, "body": "So my task is to write a program that ask for users to combine 5 patterns to match with a given pattern. so what i did was merge 5 individual patterns that i already designed and each time the users choose a pattern, the pattern they choose will overlap the current pattern. so the &#39;mytile&#39; is the user&#39;s initial pattern (no pattern just the dash as borders)."}, {"owner": {"reputation": 23, "user_id": 8157626, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/97c5660d2f841713c3b791c93b230a2d?s=128&d=identicon&r=PG&f=1", "display_name": "Ned", "link": "https://stackoverflow.com/users/8157626/ned"}, "edited": false, "score": 0, "creation_date": 1510132859, "post_id": 47174656, "comment_id": 81300609, "body": "Yup, I did. I removed the mytile(ans). That&#39;s what you meant right? Or do you mean remove the mytile function?"}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "reply_to_user": {"reputation": 23, "user_id": 8157626, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/97c5660d2f841713c3b791c93b230a2d?s=128&d=identicon&r=PG&f=1", "display_name": "Ned", "link": "https://stackoverflow.com/users/8157626/ned"}, "edited": false, "score": 0, "creation_date": 1510133050, "post_id": 47174656, "comment_id": 81300762, "body": "Oh, my mistake - I didn&#39;t look at it carefully enough, I thought you were defining <code>mytile</code>, not calling it - ok that makes more sense now!  Ok, put that call back in, but remove the next loop <i>following</i> the call.  Just replace it the entire nested loop with a single call to <code>pat2match</code>.  Does that make sense?  You don&#39;t need the return value from it.  So you just want (1) the call to <code>mytile(ans)</code>, followed by (2) a single call to <code>pat2match</code> (ignore the return value, it should be a void function)."}, {"owner": {"reputation": 23, "user_id": 8157626, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/97c5660d2f841713c3b791c93b230a2d?s=128&d=identicon&r=PG&f=1", "display_name": "Ned", "link": "https://stackoverflow.com/users/8157626/ned"}, "edited": false, "score": 0, "creation_date": 1510134191, "post_id": 47174656, "comment_id": 81301582, "body": "But by doing that, i cannot print the pat2match right? Is there any way I can send you my whole code to you? Maybe that way you can understand more what I&#39;m trying to do?"}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "reply_to_user": {"reputation": 23, "user_id": 8157626, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/97c5660d2f841713c3b791c93b230a2d?s=128&d=identicon&r=PG&f=1", "display_name": "Ned", "link": "https://stackoverflow.com/users/8157626/ned"}, "edited": false, "score": 0, "creation_date": 1510134335, "post_id": 47174656, "comment_id": 81301698, "body": "Well, the idea was that you would first initialize <code>arr</code> with <code>mytile</code>, then update it with <code>pat2match</code>.  After that, I think <code>arr</code> should contain what you want to print.  Both <code>overlap</code> and <code>pat2match</code> would be <code>void</code> functions that don&#39;t return anything, since they would operate directly on <code>arr</code>."}, {"owner": {"reputation": 23, "user_id": 8157626, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/97c5660d2f841713c3b791c93b230a2d?s=128&d=identicon&r=PG&f=1", "display_name": "Ned", "link": "https://stackoverflow.com/users/8157626/ned"}, "edited": false, "score": 0, "creation_date": 1510134551, "post_id": 47174656, "comment_id": 81301846, "body": "i think i get what you mean, i&#39;ll give it a try. also, do you mean arr or ans? ans right"}], "tags": [], "owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "is_accepted": true, "score": 2, "last_activity_date": 1510129103, "creation_date": 1510129103, "answer_id": 47174656, "question_id": 47174474, "link": "https://stackoverflow.com/questions/47174474/element-in-2d-array-missing/47174656#47174656", "title": "Element in 2D Array Missing?", "body": "<p>The return value from <code>overlap</code> is undefined behavior:</p>\n\n<pre><code>return pat1[r][c];\n</code></pre>\n\n<p>When this return statement is executed, both <code>r</code> and <code>c</code> are 13.  Neither can be greater than 12.  It is indexing past the bounds of the array, which is undefined behavior.</p>\n"}], "owner": {"reputation": 23, "user_id": 8157626, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/97c5660d2f841713c3b791c93b230a2d?s=128&d=identicon&r=PG&f=1", "display_name": "Ned", "link": "https://stackoverflow.com/users/8157626/ned"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 47174656, "answer_count": 1, "score": 0, "last_activity_date": 1510131866, "creation_date": 1510128331, "last_edit_date": 1510131866, "question_id": 47174474, "link": "https://stackoverflow.com/questions/47174474/element-in-2d-array-missing", "title": "Element in 2D Array Missing?", "body": "<p>I'm using function to assign the patterns of my 2D arrays. All the other arrays are displaying as it should except for my 'ans' array (the last row's dash is missing). Im guessing the problem is because of the 'pat2match' function (merges all the patterns). Because if i don's assign 'ans' to that 'function' and print an empty pattern array, all the dashes shows. </p>\n\n<p>The function that merges the patterns:</p>\n\n<pre><code>char pat2match(char mypattern[13][13], char pat1[13][13], char pat2[13][13], \n        char pat3[13][13], char pat4[13][13], char pat5[13][13])\n{\n    int r,c;\n\n    overlap(mypattern,pat5);\n    overlap(mypattern,pat2);\n    overlap(mypattern,pat4);\n    overlap(mypattern,pat3);\n    return overlap(mypattern,pat1);\n}\n</code></pre>\n\n<p>Assigning the 'ans':</p>\n\n<pre><code>mytile(ans);\nfor(r=0;r&lt;13;r++)\n{\n    for(c=0;c&lt;13;c++)\n    {\n        ans[r][c] = pat2match(ans,pattern1,pattern2,pattern3,pattern4,pattern5);\n    }\n}\n</code></pre>\n\n<p>The overlap function:</p>\n\n<pre><code>char overlap(char pat1[13][13], char pat2[13][13])\n{\n    int r,c;\n\n    for(r=0;r&lt;13;r++)\n    {\n        //printf(\"|\");\n        for(c=0;c&lt;13;c++)\n        {\n            if(pat1[r][c] == ' ' || pat2[r][c] != ' ')\n            {\n                pat1[r][c] = pat2[r][c];\n            }\n            //printf(\" %c \", pat1[r][c]);\n        }\n        //printf(\"|\\n\");\n    }\n    return pat1[r][c];\n}\n</code></pre>\n\n<p>the empty pattern (the dash is like its border) :</p>\n\n<pre><code>void mytile(char pat[13][13])\n{\n    int r,c;\n\n    for(r=0;r&lt;13;r++)\n    {\n        for(c=0;c&lt;13;c++)\n        {\n            if(r==0 || r==12)\n            {\n                pat[r][c] = '-';\n            }\n            else\n            {\n                pat[r][c] = ' ';\n            }\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "dynamic-memory-allocation", "realloc"], "comments": [{"owner": {"reputation": 39, "user_id": 5364655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63a7483e66af5b372ef3cf2372ea85f8?s=128&d=identicon&r=PG&f=1", "display_name": "Erik.E", "link": "https://stackoverflow.com/users/5364655/erik-e"}, "edited": false, "score": 0, "creation_date": 1510125515, "post_id": 47173726, "comment_id": 81296533, "body": "Of course the title should&#39;ve been &quot;realloc allocates too much memory&quot;"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1510125535, "post_id": 47173726, "comment_id": 81296539, "body": "Then why not edit it?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1510125548, "post_id": 47173726, "comment_id": 81296546, "body": "what is <code>DString</code>?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1510125691, "post_id": 47173726, "comment_id": 81296620, "body": "Should it not be <code>memNewSize + 1</code> to include the string terminator?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1510125771, "post_id": 47173726, "comment_id": 81296662, "body": "As for your problem, would it not make more sense to pass <code>*destination</code> to the <code>realloc</code> call?"}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1510126295, "post_id": 47173726, "comment_id": 81296927, "body": "Are you hiding pointer with typedef <code>DString</code> ? it&#39;s <b>very very</b> bad idea. By the way, your question is lack of <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, I vote to close."}, {"owner": {"reputation": 337, "user_id": 2563058, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/1513172627/picture?type=large", "display_name": "qwn", "link": "https://stackoverflow.com/users/2563058/qwn"}, "edited": false, "score": 0, "creation_date": 1510126896, "post_id": 47173726, "comment_id": 81297251, "body": "Shouldn&#39;t the argument to <code>realloc</code> be the old pointer?"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1510127153, "post_id": 47173726, "comment_id": 81297378, "body": "@Erik.E - I think the suggestion regarding the title pertains to somewhat of a title misconception. E.g &quot;<code>realloc</code> is doing something wrong.&quot; Or, &quot;some <code>C-library function</code> is doing something wrong...&quot; 99.999% of the time, it is not the library function that is at fault."}, {"owner": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 0, "creation_date": 1510127398, "post_id": 47173726, "comment_id": 81297523, "body": "How do you know that &quot;<code>memTemp</code> is 38 characters long&quot;?  Seems to me that you are attempting an <code>strlen</code> on uninitialised memory.  <code>strlen</code> will just run along looking for a binary zero`.  Eventually it will either find one or run into an illegal address, either way the reported length will be wrong."}, {"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 0, "creation_date": 1510127692, "post_id": 47173726, "comment_id": 81297706, "body": "No, realloc doesn&#39;t allocate &quot;more memory than requested&quot;. Ignoring all the other bugs that have been pointed out, there are no standard methods for you to find out how much memory realloc gave you. Calling strlen on uninitialized memory is definitely not the way to do it."}], "answers": [{"comments": [{"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1510125948, "post_id": 47173750, "comment_id": 81296747, "body": "Do you have a user script to one-click-quote a section from the standard :p"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 1, "creation_date": 1510126163, "post_id": 47173750, "comment_id": 81296852, "body": "@AjayBrahmakshatriya :) Not really, it&#39;s just a bad habit I developed myself to avoid misunderstanding by using wrong wordings (English is not my native language and believe me, I had been in situations where what I wrote was 180 degrees what what I meant!!)"}, {"owner": {"reputation": 39, "user_id": 5364655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63a7483e66af5b372ef3cf2372ea85f8?s=128&d=identicon&r=PG&f=1", "display_name": "Erik.E", "link": "https://stackoverflow.com/users/5364655/erik-e"}, "edited": false, "score": 0, "creation_date": 1510126471, "post_id": 47173750, "comment_id": 81297022, "body": "Hey there Sourav, thanks for the fast answer! Dstring is a typedef that is a char pointer, so Dstring *destination is actually a char double pointer, and *destination points already to an dynamically allocated string, so should memTemp be a problem if I use *destination in my realloc() call?"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 39, "user_id": 5364655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63a7483e66af5b372ef3cf2372ea85f8?s=128&d=identicon&r=PG&f=1", "display_name": "Erik.E", "link": "https://stackoverflow.com/users/5364655/erik-e"}, "edited": false, "score": 1, "creation_date": 1510126610, "post_id": 47173750, "comment_id": 81297094, "body": "@Erik.E it is generally a good idea not to hide pointers in typedefs"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 39, "user_id": 5364655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63a7483e66af5b372ef3cf2372ea85f8?s=128&d=identicon&r=PG&f=1", "display_name": "Erik.E", "link": "https://stackoverflow.com/users/5364655/erik-e"}, "edited": false, "score": 0, "creation_date": 1510126610, "post_id": 47173750, "comment_id": 81297095, "body": "@Erik.E No, there should not be any problem if I understood your version correctly."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1510126639, "post_id": 47173750, "comment_id": 81297114, "body": "..and I second what @AjayBrahmakshatriya said, it&#39;s really a <i>bad</i> thing."}, {"owner": {"reputation": 39, "user_id": 5364655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63a7483e66af5b372ef3cf2372ea85f8?s=128&d=identicon&r=PG&f=1", "display_name": "Erik.E", "link": "https://stackoverflow.com/users/5364655/erik-e"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1510126751, "post_id": 47173750, "comment_id": 81297177, "body": "@AjayBrahmakshatriya Sorry, I got this code from my teacher, my job was to implement the different functions that comes with it :/"}, {"owner": {"reputation": 39, "user_id": 5364655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63a7483e66af5b372ef3cf2372ea85f8?s=128&d=identicon&r=PG&f=1", "display_name": "Erik.E", "link": "https://stackoverflow.com/users/5364655/erik-e"}, "edited": false, "score": 0, "creation_date": 1510126924, "post_id": 47173750, "comment_id": 81297272, "body": "@SouravGhosh So what could be the problem then? If newMemSize is 25, and *destination points to an already allocated string, Why does memTemp end up being 38 characters big?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 39, "user_id": 5364655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63a7483e66af5b372ef3cf2372ea85f8?s=128&d=identicon&r=PG&f=1", "display_name": "Erik.E", "link": "https://stackoverflow.com/users/5364655/erik-e"}, "edited": false, "score": 0, "creation_date": 1510127131, "post_id": 47173750, "comment_id": 81297365, "body": "@Erik.E it should not be. Point: <code>*destination points to an already allocated string</code>..it must be returned via allocator functions, otherwise, we&#39;re back to square one."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 6, "last_activity_date": 1510126046, "last_edit_date": 1510126046, "creation_date": 1510125602, "answer_id": 47173750, "question_id": 47173726, "link": "https://stackoverflow.com/questions/47173726/realloc-allocates-more-memory-than-requested/47173750#47173750", "title": "Realloc allocates more memory than requested", "body": "<p>The problem here is, <code>realloc()</code> works (<em>properly</em>) on only</p>\n\n<ul>\n<li>pointers earlier returned by allocator function</li>\n<li><code>NULL</code> pointers.</li>\n</ul>\n\n<p>Quoting <code>C11</code>, chapter \u00a77.22.3.5</p>\n\n<blockquote>\n  <p>If <code>ptr</code> is a null pointer, the <code>realloc</code> function behaves like the <code>malloc</code> function for the\n  specified <code>size</code>. Otherwise, if <code>ptr</code> does not match a pointer earlier returned by a memory\n  management function, or if the space has been deallocated by a call to the <code>free</code> or\n  <code>realloc</code> function, the behavior is undefined. [....]</p>\n</blockquote>\n\n<p>In your case, <code>memTemp</code> (being an automatic storage local scoped variable) is just an unitialized pointer, with an <em>indeterminate value</em>, pointing to <em>who knows what</em> address! It's not even guaranteed to be <code>NULL</code>. So, all you have is <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>.</p>\n\n<p><em>Just a guess: Probably you meant to initialize <code>memTemp</code> with incoming <code>*destination</code>?</em></p>\n\n<hr>\n\n<p>That said, as pointed out in comments under the actual question,</p>\n\n<ul>\n<li>The size multiplier supplied in <code>realloc()</code> should be <code>memNewSize + 1</code> to be able to hold the null-terminator.</li>\n<li><code>sizeof(char)</code> is guaranteed to be <code>1</code> in C, so using it as a multiplier is redundant.</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1510127548, "post_id": 47174256, "comment_id": 81297613, "body": "Maybe <code>memTemp = realloc (*destination, sizeof *memTemp * memNewSize+1);</code>? See: <a href=\"http://stackoverflow.com/q/605845/995714\"><b>Do I cast the result of malloc?</b></a>"}], "tags": [], "owner": {"reputation": 39, "user_id": 5364655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63a7483e66af5b372ef3cf2372ea85f8?s=128&d=identicon&r=PG&f=1", "display_name": "Erik.E", "link": "https://stackoverflow.com/users/5364655/erik-e"}, "is_accepted": false, "score": 0, "last_activity_date": 1510127388, "creation_date": 1510127388, "answer_id": 47174256, "question_id": 47173726, "link": "https://stackoverflow.com/questions/47173726/realloc-allocates-more-memory-than-requested/47174256#47174256", "title": "Realloc allocates more memory than requested", "body": "<p>Alright, I got it to work, thanks so much guys! Updated code below.</p>\n\n<pre><code>int dstring_concatenate(DString* destination, DString source)\n{\n    assert(destination != NULL); // Precondition: destination ar ej NULL\n    assert(*destination != NULL); // Precondition: *destination ar ej NULL\n    assert(source != NULL); // Precondition: source ar ej NULL\n    // Dstring look like this = \"typedef char* Dstring;\"\n\n    int memNewSize = strlen(*destination) + strlen(source);\n    char *memTemp;\n    memTemp = (char*)realloc(*destination, sizeof(char) * memNewSize+1);\n\n    if(memTemp == NULL)\n    {\n        printf(\"Could not allocate new memory.\\n\");\n        return 0;\n    }\n    else\n    {\n        *destination = memTemp;\n        strcat(*destination, source);\n        return 1;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 5364655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63a7483e66af5b372ef3cf2372ea85f8?s=128&d=identicon&r=PG&f=1", "display_name": "Erik.E", "link": "https://stackoverflow.com/users/5364655/erik-e"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 279, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1510127388, "creation_date": 1510125464, "last_edit_date": 1510126303, "question_id": 47173726, "link": "https://stackoverflow.com/questions/47173726/realloc-allocates-more-memory-than-requested", "title": "Realloc allocates more memory than requested", "body": "<p>I have a problem with below function. </p>\n\n<p>When I try to <code>realloc()</code> memory I get more than I actually asked for!</p>\n\n<p>In this instance I try to concatenate 2 strings, one who is 14 characters long and one who is 11 characters long, but the end result is that <code>memTemp</code> is 38 characters long even though <code>memNewSize</code> shows that it is in fact 25, does anyone know what to do?</p>\n\n<pre><code>int dstring_concatenate(DString* destination, DString source)\n{\n    assert(destination != NULL); // Precondition: destination ar ej NULL\n    assert(*destination != NULL); // Precondition: *destination ar ej NULL\n    assert(source != NULL); // Precondition: source ar ej NULL\n    //Dstring looks like this = \"typedef char* Dstring;\"\n\n    int memNewSize = strlen(*destination) + strlen(source);\n    char *memTemp;\n    memTemp = (char*)realloc(memTemp, sizeof(char) * memNewSize);\n\n    printf(\"%d\\n\", memNewSize);\n    printf(\"%d\\n\", strlen(memTemp));\n\n    if(memTemp == NULL)\n    {\n        printf(\"Could not allocate new memory.\\n\");\n        return 0;\n    }\n    else\n    {\n        *destination = memTemp;\n        strcat(*destination, source);\n        return 1;\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "string-literals"], "comments": [{"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 4, "creation_date": 1510124195, "post_id": 47173362, "comment_id": 81295881, "body": "String constants are immutable. Try <code>char str2[] = &quot;Hello&quot;;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "is_accepted": false, "score": 3, "last_activity_date": 1510124242, "creation_date": 1510124242, "answer_id": 47173408, "question_id": 47173362, "link": "https://stackoverflow.com/questions/47173362/segmentation-fault-in-char-pointer/47173408#47173408", "title": "Segmentation Fault in char pointer", "body": "<p>You aren't allowed to modify a string constant, and in this case it's causing a runtime error.  You can fix it by changing the declaration of <code>str2</code> to:</p>\n\n<pre><code>char str2[] = \"Hello\";\n</code></pre>\n\n<p>This makes it an array, rather than a pointer to a string constant.</p>\n"}, {"comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1510125083, "post_id": 47173416, "comment_id": 81296303, "body": "What? With this wording, it&#39;s wrong."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1510125112, "post_id": 47173416, "comment_id": 81296314, "body": "It&#39;s very legal to write something like <code>char *p = &quot;test&quot;, p = &quot;test again&quot;;</code>"}, {"owner": {"reputation": 161, "user_id": 7783436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/086ff93844797bf4e9b4f55f9d45636c?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/7783436/matt"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1510125632, "post_id": 47173416, "comment_id": 81296580, "body": "Edited.  Yes, it was incorrect with that wording.  The pointer can be reassigned, but the memory pointed to after assigning a string literal is read-only."}], "tags": [], "owner": {"reputation": 161, "user_id": 7783436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/086ff93844797bf4e9b4f55f9d45636c?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/7783436/matt"}, "is_accepted": false, "score": 2, "last_activity_date": 1510125591, "last_edit_date": 1510125591, "creation_date": 1510124264, "answer_id": 47173416, "question_id": 47173362, "link": "https://stackoverflow.com/questions/47173362/segmentation-fault-in-char-pointer/47173416#47173416", "title": "Segmentation Fault in char pointer", "body": "<p>You are not allowed to modify the memory pointed to by <code>char*</code> variables initialized with string literals.  It is read-only.</p>\n"}, {"comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1510124692, "post_id": 47173420, "comment_id": 81296119, "body": "<code>String literal stored in read only location</code>..well, the&#39;res nothing mandatory, it&#39;s just UB to attempt any modifications."}], "tags": [], "owner": {"reputation": 30168, "user_id": 5612562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gzBQY.jpg?s=128&g=1", "display_name": "msc", "link": "https://stackoverflow.com/users/5612562/msc"}, "is_accepted": true, "score": 7, "last_activity_date": 1510126373, "last_edit_date": 1510126373, "creation_date": 1510124278, "answer_id": 47173420, "question_id": 47173362, "link": "https://stackoverflow.com/questions/47173362/segmentation-fault-in-char-pointer/47173420#47173420", "title": "Segmentation Fault in char pointer", "body": "<p>It is a <strong>undefined behaviour</strong> because you are trying to modify the content of a <a href=\"http://en.cppreference.com/w/c/language/string_literal\" rel=\"nofollow noreferrer\">string literal</a>. A string literal mainly stored in a <strong>read only location</strong>. so you do not modify it, otherwise it is invoked undefined behaviour.</p>\n\n<p><strong>C11 \u00a76.4.5 String literals(Paragraph 7):</strong></p>\n\n<blockquote>\n  <p>It is unspecified whether these arrays are distinct provided their\n  elements have the appropriate values.<strong>If the program attempts to\n  modify a string literal of either form, the  behavior is undefined\"</strong></p>\n</blockquote>\n"}], "owner": {"reputation": 59, "user_id": 7283526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/618d81fa44eeebba8b6c6339f4b9ddb5?s=128&d=identicon&r=PG&f=1", "display_name": "Aaquil Ali", "link": "https://stackoverflow.com/users/7283526/aaquil-ali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "closed_date": 1510124643, "accepted_answer_id": 47173420, "answer_count": 3, "score": 2, "last_activity_date": 1510126373, "creation_date": 1510124097, "last_edit_date": 1510125267, "question_id": 47173362, "link": "https://stackoverflow.com/questions/47173362/segmentation-fault-in-char-pointer", "closed_reason": "Duplicate", "title": "Segmentation Fault in char pointer", "body": "<p>I am getting segmentation fault when running the below code. What could be the reason for this error? Please help</p>\n\n<pre><code>int main()\n{\n    char *str2 = \"Hello\";\n    str2[3] = 'J';\n    printf(\"%s\\n\",str2);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1510122897, "post_id": 47173043, "comment_id": 81295283, "body": "High time to use a debugger."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1510123099, "post_id": 47173043, "comment_id": 81295380, "body": "ummmm... how do you define <code>program</code>?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1510123110, "post_id": 47173043, "comment_id": 81295385, "body": "<code>pointer = (void*)sbrk(size);</code> --&gt; <code>pointer = (void*)sbrk(sizeof(*head)+size);</code> ? Also <code>(void*)head+sizeof(struct Block);</code> --&gt; <code>(void*)(head+1);</code>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1510123597, "post_id": 47173043, "comment_id": 81295587, "body": "<code>sizeof(head)</code> is pointer size, not size of  <code>struct Block</code>. Also Do not change the question code directly after posting it. (I did rollback)"}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 3, "creation_date": 1510123793, "post_id": 47173043, "comment_id": 81295696, "body": "Please don&#39;t edit question by fixing error in code, that destroy potential answer."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1510123958, "post_id": 47173043, "comment_id": 81295763, "body": "Your code to add a node at the front of the linked list is not correct, either. It should be <code>head-&gt;prev = new; new-&gt;prev = NULL; new-&gt;next = head; head = new;</code> If you are careful not to dereference a null <code>head</code>, you don&#39;t need the separate codes for the first and subsequent nodes."}, {"owner": {"reputation": 161, "user_id": 7783436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/086ff93844797bf4e9b4f55f9d45636c?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/7783436/matt"}, "edited": false, "score": 0, "creation_date": 1510125056, "post_id": 47173043, "comment_id": 81296289, "body": "I think the intention of this code is actually that <code>head</code> represents the <code>tail</code> of the linked list.  This is its own problem, but it means that the code is functionally correct and the variable is misnamed.  <code>head</code> should be a variable that is initialized only if NULL, and updated only when the first block is <code>free</code>d."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "reply_to_user": {"reputation": 161, "user_id": 7783436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/086ff93844797bf4e9b4f55f9d45636c?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/7783436/matt"}, "edited": false, "score": 0, "creation_date": 1510127859, "post_id": 47173043, "comment_id": 81297814, "body": "@Matt: The linked-list code as given is not &quot;functionally correct&quot;. The lines <code>head-&gt;next = new</code> and <code>head = new</code> alone are glaringly wrong."}, {"owner": {"reputation": 161, "user_id": 7783436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/086ff93844797bf4e9b4f55f9d45636c?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/7783436/matt"}, "reply_to_user": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1510128037, "post_id": 47173043, "comment_id": 81297931, "body": "@MOehm Rename the variable <code>head</code> to <code>tail</code>.  <code>tail-&gt;next = new</code> followed by <code>tail = new</code> generates an in-tact linked list.  That&#39;s what I&#39;m saying."}, {"owner": {"reputation": 161, "user_id": 7783436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/086ff93844797bf4e9b4f55f9d45636c?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/7783436/matt"}, "reply_to_user": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1510128387, "post_id": 47173043, "comment_id": 81298110, "body": "@MOehm because the <code>head</code> is functioning as the <code>tail</code>.  This means that <code>malloc</code> is functionally correct but <code>dump_heap</code> has a bug where it&#39;s using the tail of the linked list, incorrectly named <code>head</code>. :)"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "reply_to_user": {"reputation": 161, "user_id": 7783436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/086ff93844797bf4e9b4f55f9d45636c?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/7783436/matt"}, "edited": false, "score": 0, "creation_date": 1510128406, "post_id": 47173043, "comment_id": 81298125, "body": "@Matt: Okay, but then you lose the <code>head</code> or you should be iterating via the <code>prev</code> pointer, which the code above doesn&#39;t, and that&#39;s why the iteration stops at the first node. (It&#39;s doubtful if <code>prev</code>/<code>next</code> makes sense in a non-circular list without both<code>head</code> and &#180;tail`.)"}, {"owner": {"reputation": 161, "user_id": 7783436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/086ff93844797bf4e9b4f55f9d45636c?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/7783436/matt"}, "edited": false, "score": 0, "creation_date": 1510128687, "post_id": 47173043, "comment_id": 81298278, "body": "Updated my answer to account for this discussion.  Yes, you do lose the <code>head</code>, but the only ill effect is the bug making <code>dump_heap</code> incorrect.  It will definitely come back to bite @Fox when they go to write <code>free</code>."}], "answers": [{"comments": [{"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 2, "creation_date": 1510123631, "post_id": 47173209, "comment_id": 81295610, "body": "you can&#39;t use <code>void *</code> with arithmetic because what is the size of void ? Use <code>char *</code> or <code>return head + 1;</code> cause type of <code>head</code> is <code>struct Block *</code>"}], "tags": [], "owner": {"reputation": 161, "user_id": 7783436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/086ff93844797bf4e9b4f55f9d45636c?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/7783436/matt"}, "is_accepted": false, "score": 2, "last_activity_date": 1510128581, "last_edit_date": 1510128581, "creation_date": 1510123519, "answer_id": 47173209, "question_id": 47173043, "link": "https://stackoverflow.com/questions/47173043/my-malloc-doesnt-update-the-heap-properly/47173209#47173209", "title": "My malloc doesn&#39;t update the heap properly", "body": "<p>You aren't accounting for the size of the <code>Block</code> struct when asking the system for memory.</p>\n\n<p>Compare this line:</p>\n\n<pre><code>pointer = (void*)sbrk(size);\n</code></pre>\n\n<p>to how you're attempting to account for the struct later:</p>\n\n<pre><code>return (void*)head+sizeof(struct Block);\n</code></pre>\n\n<p>You should be accounting for the size of the <code>Block</code> in the sbrk call:</p>\n\n<pre><code>pointer = (void*)sbrk(size + sizeof(struct Block));\n</code></pre>\n\n<p>Also, as has been pointed out, you should not do pointer arithmetic on <code>void*</code>.  So your return statements should leave the <code>head</code> pointer uncasted and just add 1 to account for the block size:</p>\n\n<pre><code>return (void*)(head + 1);\n</code></pre>\n\n<p>Also also, upon further discussion it is clear that <code>head</code> is being used as the tail of the linked list.  This introduces a bug in <code>dump_heap</code>.  You may want to rename <code>head</code> to <code>tail</code> and maintain a proper <code>head</code>, one which only ever changes in <code>malloc</code> when it was previously <code>NULL</code>.</p>\n"}], "owner": {"reputation": 9, "user_id": 7507959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b1d5793baf36d6cc7ced1e6029be363?s=128&d=identicon&r=PG&f=1", "display_name": "Fox", "link": "https://stackoverflow.com/users/7507959/fox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1510128581, "creation_date": 1510122825, "last_edit_date": 1510123763, "question_id": 47173043, "link": "https://stackoverflow.com/questions/47173043/my-malloc-doesnt-update-the-heap-properly", "title": "My malloc doesn&#39;t update the heap properly", "body": "<p>I'm trying to implement my own malloc and then test it by dumping the heap to see what I've managed to accomplish. It compiles fine but when I run it, I get the output of </p>\n\n<pre><code>head-&gt;[1:0:8]-&gt;NULL\nthis is a test program\n</code></pre>\n\n<p>after which it promptly crashes. It looks like the way I implemented my malloc, it is able to allocate the space for *this and *is, but that's all. Anyone have any ideas why this might be?</p>\n\n<p>My main.c</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;assert.h&gt;\n\n\n#define MALLOC(n) my_malloc(n)\n#define DUMP_HEAP() dump_heap()\nvoid* my_malloc(int);\n\nint main()\n{\n  char *this = MALLOC(5);\n  char *is = MALLOC(3);\n  char *a = MALLOC(2);\n  char *test = MALLOC(5);\n  DUMP_HEAP();\n\n  strcpy(this, \"this\");\n  strcpy(is, \"is\");\n  strcpy(a, \"a\");\n  strcpy(test, \"test\");\n  strcpy(program, \"program\");\n  printf(\"%s %s %s %s %s\\n\", this, is, a, test, program);\n  DUMP_HEAP();\n\n  return 0;\n}\n</code></pre>\n\n<p>My malloc.c</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;assert.h&gt;\n\nstruct Block \n{\n    int occ;             \n    int size;            \n    struct Block *prev;   \n    struct Block *next;  \n};\n\nstatic struct Block *head = NULL; \n\nvoid *my_malloc(int size)\n{\n    void *pointer;\n    pointer = (void*)sbrk(size);\n    if(head == NULL)\n    {\n            head = pointer;\n            head-&gt;occ = 1;\n            head-&gt;prev=NULL;\n            head-&gt;next=NULL;\n            head-&gt;size = size;\n\n            return (void*)head+sizeof(struct Block);\n    }\n    else\n    {\n            struct Block* new ;\n            new = pointer;\n            head-&gt;next = new;\n            new-&gt;size = size;\n            new-&gt;occ = 1;\n            new-&gt;prev = head;\n            new-&gt;next = NULL;\n            head = new;\n\n            return (void*)new+sizeof(struct Block);\n    }\n}\n\nvoid dump_heap()\n{\n  struct Block *cur;\n  printf(\"head-&gt;\");\n  for(cur = head; cur != NULL; cur = cur-&gt;next) \n  {\n    printf(\"[%d:%d:%d]-&gt;\", cur-&gt;occ, (char*)cur - (char*)head, cur-&gt;size);\n    assert((char*)cur &gt;= (char*)head &amp;&amp; (char*)cur + cur-&gt;size &lt; (char*)sbrk(0));\n    if(cur-&gt;next != NULL) assert(cur-&gt;next-&gt;prev == cur); \n  }\n  printf(\"NULL\\n\");\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1510122610, "post_id": 47172933, "comment_id": 81295161, "body": "Kindly show your research / debugging effort so far. Please read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> page first."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1510122690, "post_id": 47172933, "comment_id": 81295190, "body": "Gotta admit, it&#39;s one of a kind weird for loop nesting I have seen in recent times. Are you trying to obfuscate your code?"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1510122809, "post_id": 47172933, "comment_id": 81295245, "body": "Please show the (desired) output."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1510122895, "post_id": 47172933, "comment_id": 81295282, "body": "<i>&quot;but i wanted to write it without arrays&quot;</i> - But why?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1510122955, "post_id": 47172933, "comment_id": 81295317, "body": "Just wondering: Who&#39;s upvoting this?"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1510123101, "post_id": 47172933, "comment_id": 81295381, "body": "@SouravGhosh some people who hate arrays . . . and clear code :("}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1510123145, "post_id": 47172933, "comment_id": 81295404, "body": "Is it supposed to work for odd inputs or only for even?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 2, "creation_date": 1510123165, "post_id": 47172933, "comment_id": 81295412, "body": "@AjayBrahmakshatriya In that case, they should not be getting &quot;a-raise&quot;. :P"}, {"owner": {"reputation": 35, "user_id": 8776371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/017e6c8d00f35d760667a4bcee05d95e?s=128&d=identicon&r=PG&f=1", "display_name": "erfan", "link": "https://stackoverflow.com/users/8776371/erfan"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1510123257, "post_id": 47172933, "comment_id": 81295450, "body": "@yunnosch it should work for both odd and even input."}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1510123438, "post_id": 47172933, "comment_id": 81295516, "body": "This question boils down to &quot;please write my code for me&quot;, and they are usually poory received here (down votes etc). It would be good to explain what you have tried, and just how you are stumped with your problem."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1510123493, "post_id": 47172933, "comment_id": 81295541, "body": "Try 5 and explain the largest visible number please."}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 1, "creation_date": 1510123759, "post_id": 47172933, "comment_id": 81295683, "body": "Also, example output, or specification of what the code is supposed to do, would be essential. Now you ask everybody to decipher what your code does by themselves, and test it, and generally very few here want to do this, unless problem is very interesting to them."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1510126279, "post_id": 47172933, "comment_id": 81296915, "body": "Please don&#39;t post pictures of text. Just post the text."}], "answers": [{"comments": [{"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 1, "creation_date": 1510123934, "post_id": 47173249, "comment_id": 81295758, "body": "@Yunnosch I tried figuring out the logic. It was just not possible. So I decided to give a bad answer to a bad question. :)"}], "tags": [], "owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "is_accepted": false, "score": 0, "last_activity_date": 1510123705, "creation_date": 1510123705, "answer_id": 47173249, "question_id": 47172933, "link": "https://stackoverflow.com/questions/47172933/how-can-i-rewrite-this-code-without-using-arrays/47173249#47173249", "title": "how can i rewrite this code without using arrays?", "body": "<p>I must agree that this code is incredible difficult for me to understand. I have no clue what is happening here. But I will try to answer it irrespective of the logic/pattern.</p>\n\n<p>So you have a bunch of loops that fill in an array and then another loop that prints it in order. But you don't want to use arrays. </p>\n\n<p>So the value should be calculated <strong>when</strong> it is to be printed. Let us try it this way - </p>\n\n<p>First I will move your calculating code to a separate function for sake for clarity - </p>\n\n<pre><code>int value_at(int I, int J, int x) {\n    int i, j, low = 0, top = x - 1, n = 1;\n    int a = 0;\n    for (i = 0; i &lt; x / 2; i++, low++, top--) {\n        for (j = low; j &lt;= top; j++, n++)\n            if ( i == I &amp;&amp; j == J)\n                a = n;\n        for (j = low + 1; j &lt;= top; j++, n++)\n            if ( I == j &amp;&amp; J == top)\n                a = n;\n        for (j = top - 1; j &gt;= low; j--, n++)\n            if ( top == I &amp;&amp; j == J)\n                a = n\n        for (j = top - 1; j &gt; low; j--, n++)\n            if (j == I &amp;&amp; low == J)\n                a = n;\n    }\n    return a;\n}\n</code></pre>\n\n<p>Now this function calculates the value of <code>a</code> for any <code>i</code> or <code>j</code></p>\n\n<p>Now we can just print the values in a loop - </p>\n\n<pre><code>for (i = 0; i &lt; x; i++)\n{\n\n    for (j = 0; j &lt; x; j++)\n    {\n        printf(\"%d\", value_at(i, j, x));\n    }\n    printf(\"\\n\");\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1121, "user_id": 8652760, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yFbhM.jpg?s=128&g=1", "display_name": "Jasmeet", "link": "https://stackoverflow.com/users/8652760/jasmeet"}, "is_accepted": false, "score": 0, "last_activity_date": 1510125460, "creation_date": 1510125460, "answer_id": 47173724, "question_id": 47172933, "link": "https://stackoverflow.com/questions/47172933/how-can-i-rewrite-this-code-without-using-arrays/47173724#47173724", "title": "how can i rewrite this code without using arrays?", "body": "<p>This must do the task : </p>\n\n<pre><code>int min(int a, int b)\n{\n    return a&lt;b ? a:b;\n}\n\nvoid printSpiral(int n)\n{\n    for (int i = 0; i &lt; n; i++)\n    {\n        for (int j = 0; j &lt; n; j++)\n        {\n            int x;\n\n            x = min(min(i, j), min(n-1-i, n-1-j));\n\n            // For upper right half\n            if (i &lt;= j)\n                printf(\"%d \", ((n*n) - ((n-2*x)*(n-2*x) - (i-x)\n                    - (j-x)))+1);\n\n            // for lower left half\n            else\n                printf(\"%d \", ((n*n) - ((n-2*x-2)*(n-2*x-2) + (i-x)\n                    + (j-x)))+1);\n        }\n        printf(\"\\n\");\n    }\n}\n</code></pre>\n\n<p>Just call <code>printSpiral()</code> and pass your <code>x</code> as argument </p>\n"}, {"comments": [{"owner": {"reputation": 50, "user_id": 7722392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cd2f369da20e5bd5c6c0b9c3d95ed3e?s=128&d=identicon&r=PG&f=1", "display_name": "always007", "link": "https://stackoverflow.com/users/7722392/always007"}, "edited": false, "score": 0, "creation_date": 1510128799, "post_id": 47173875, "comment_id": 81298332, "body": "input:6                                                                                                                                     result:                                                                                                                                      1   2   3   4   5   6    20  21  22  23  24   7    19  32  33  34  25   8    18  31  36  35  26   9    17  30  29  28  27  10    16  15  14  13  12  11"}], "tags": [], "owner": {"reputation": 50, "user_id": 7722392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cd2f369da20e5bd5c6c0b9c3d95ed3e?s=128&d=identicon&r=PG&f=1", "display_name": "always007", "link": "https://stackoverflow.com/users/7722392/always007"}, "is_accepted": true, "score": 0, "last_activity_date": 1510126021, "creation_date": 1510126021, "answer_id": 47173875, "question_id": 47172933, "link": "https://stackoverflow.com/questions/47172933/how-can-i-rewrite-this-code-without-using-arrays/47173875#47173875", "title": "how can i rewrite this code without using arrays?", "body": "<pre><code>#include &lt;stdio.h&gt;\nint get(int x, int y, int lt, int n)\n{\n    if(x == 0)\n        return lt+y;\n    else if(y == 0)\n        return lt+4*(n-1)-x;\n    else if(y == n-1)\n        return lt+n+x-1;\n    else if(x == n-1)\n        return lt+3*(n-1)-y;\n    else\n        return get(x-1, y-1, lt+4*(n-1), n-2);\n}\nint main(void)\n{\n    int n, i, j;\n    scanf(\"%d\", &amp;n);\n    for(i = 0; i &lt; n; ++i) {\n        for(j = 0; j &lt; n; ++j)\n            printf(\"%2d \", get(i, j, 1, n));\n        putchar('\\n');\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 8776371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/017e6c8d00f35d760667a4bcee05d95e?s=128&d=identicon&r=PG&f=1", "display_name": "erfan", "link": "https://stackoverflow.com/users/8776371/erfan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 1, "closed_date": 1510129293, "accepted_answer_id": 47173875, "answer_count": 3, "score": 0, "last_activity_date": 1510126021, "creation_date": 1510122375, "last_edit_date": 1510124256, "question_id": 47172933, "link": "https://stackoverflow.com/questions/47172933/how-can-i-rewrite-this-code-without-using-arrays", "closed_reason": "Needs more focus", "title": "how can i rewrite this code without using arrays?", "body": "<pre><code>#include &lt;stdio.h&gt;\n\nmain()\n{\n    int x, y;\n    scanf(\"%d\", &amp;x);\n\n    int a[x][x];\n    int i, j, low = 0, top = x - 1, n = 1;\n    for (i = 0; i &lt; x / 2; i++, low++, top--)\n    {\n        for (j = low; j &lt;= top; j++, n++)\n            a[i][j] = n;\n        for (j = low + 1; j &lt;= top; j++, n++)\n            a[j][top] = n;\n        for (j = top - 1; j &gt;= low; j--, n++)\n            a[top][j] = n;\n        for (j = top - 1; j &gt; low; j--, n++)\n            a[j][low] = n;\n    }\n    for (i = 0; i &lt; x; i++)\n    {\n\n        for (j = 0; j &lt; x; j++)\n        {\n            printf(\"%d\", a[i][j]);\n        }\n        printf(\"\\n\");\n    }\n}\n</code></pre>\n\n<p>i want to write a number pattern and this is the code but i wanted to write it without arrays.how can i rewrite this without using any arrays?\nand of course x can be both even and odd.\nthanks for ur help!<img src=\"https://i.stack.imgur.com/8rxdS.png\" alt=\"![example for output\">]<a href=\"https://i.stack.imgur.com/8rxdS.png\" rel=\"nofollow noreferrer\">1</a></p>\n"}, {"tags": ["c", "char", "integer"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1510119662, "post_id": 47172282, "comment_id": 81294054, "body": "first, Delete <code>&#39;&#47;0&#39;</code> or replace with <code>&#39;\\0&#39;</code>. Then Use <code>strlen</code> and such as <code>atoi</code>."}, {"owner": {"reputation": 539, "user_id": 2805824, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tBgwo.gif?s=128&g=1", "display_name": "Gaurav Pathak", "link": "https://stackoverflow.com/users/2805824/gaurav-pathak"}, "edited": false, "score": 0, "creation_date": 1510119816, "post_id": 47172282, "comment_id": 81294109, "body": "<code>char num[1]; int len = strlen(char_id); sprintf(num, &quot;%c%c&quot;, char_id[len-1], char_id[len]);</code>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "reply_to_user": {"reputation": 539, "user_id": 2805824, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tBgwo.gif?s=128&g=1", "display_name": "Gaurav Pathak", "link": "https://stackoverflow.com/users/2805824/gaurav-pathak"}, "edited": false, "score": 0, "creation_date": 1510119992, "post_id": 47172282, "comment_id": 81294166, "body": "@Gaurav It&#39;s very bad."}, {"owner": {"reputation": 539, "user_id": 2805824, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tBgwo.gif?s=128&g=1", "display_name": "Gaurav Pathak", "link": "https://stackoverflow.com/users/2805824/gaurav-pathak"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1510120616, "post_id": 47172282, "comment_id": 81294406, "body": "@BLUEPIXY Why? what happened? The index is not right it should be <code>sprintf(num, &quot;%c%c&quot;, char_id[len-2], char_id[len-1]);</code>"}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1510120640, "post_id": 47172282, "comment_id": 81294415, "body": "What have you tried? SO is not a code writing service."}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1510120672, "post_id": 47172282, "comment_id": 81294424, "body": "Please read <a href=\"https://stackoverflow.com/help/on-topic\">What topics can I ask about here?</a> and <a href=\"https://stackoverflow.com/help/how-to-ask\">How do I ask a good question?</a>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "reply_to_user": {"reputation": 539, "user_id": 2805824, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tBgwo.gif?s=128&g=1", "display_name": "Gaurav Pathak", "link": "https://stackoverflow.com/users/2805824/gaurav-pathak"}, "edited": false, "score": 1, "creation_date": 1510120814, "post_id": 47172282, "comment_id": 81294491, "body": "@Gaurav It&#39;s still wrong. 1) <code>char num[1];</code> is too small. 2) OP want <i>convert multi-digit char to integer</i>"}, {"owner": {"reputation": 539, "user_id": 2805824, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tBgwo.gif?s=128&g=1", "display_name": "Gaurav Pathak", "link": "https://stackoverflow.com/users/2805824/gaurav-pathak"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1510120963, "post_id": 47172282, "comment_id": 81294554, "body": "@BLUEPIXY Ohh, :-( Yes the array is small. From the question, it seems that OP wants to concatenate two chars as he has written 89 in single quotes &#39;89&#39;."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1510121055, "post_id": 47172282, "comment_id": 81294591, "body": "<code>Let&#39;s say here is a char</code>..wait!! STOP!! a <code>char</code> and a <code>char</code> array are not the same things!!"}, {"owner": {"reputation": 539, "user_id": 2805824, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tBgwo.gif?s=128&g=1", "display_name": "Gaurav Pathak", "link": "https://stackoverflow.com/users/2805824/gaurav-pathak"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1510121143, "post_id": 47172282, "comment_id": 81294633, "body": "@SouravGhosh I got it!"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 539, "user_id": 2805824, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tBgwo.gif?s=128&g=1", "display_name": "Gaurav Pathak", "link": "https://stackoverflow.com/users/2805824/gaurav-pathak"}, "edited": false, "score": 2, "creation_date": 1510121180, "post_id": 47172282, "comment_id": 81294645, "body": "@Gaurav well, that was more meant for the OP, but welcome. :)"}], "answers": [{"comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1510120202, "post_id": 47172315, "comment_id": 81294242, "body": "<code>int num = atoi(char_id[pos-2])*10+atoi(char_id[pos-1]);</code> --&gt; <code>int num = atoi(&amp;char_id[pos-2]);</code>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1510120303, "post_id": 47172315, "comment_id": 81294284, "body": "It&#39;s still wrong. Please note that <code>atoi</code> does not convert single letters. (I haven&#39;t downvote, yet.)"}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1510120541, "post_id": 47172315, "comment_id": 81294372, "body": "@BLUEPIXY: Here atoi is overrated But yes..we can do this. Check once"}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "reply_to_user": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1510120884, "post_id": 47172315, "comment_id": 81294527, "body": "@Stargateur.: Oh...I missed. Check once..thanks for pointing out"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1510121063, "post_id": 47172315, "comment_id": 81294597, "body": "@AjayBrahmakshatriya digit - &#39;0&#39; is portable."}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1510121080, "post_id": 47172315, "comment_id": 81294605, "body": "@AjayBrahmakshatriya In C, character from <code>&#39;0&#39;</code> to <code>&#39;9&#39;</code> are mandatory to be contigus."}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1510121112, "post_id": 47172315, "comment_id": 81294617, "body": "@AjayBrahmakshatriya.: Yes this is not protable. ASCII encoding is most common though...but I will add it. Check once.."}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1510121197, "post_id": 47172315, "comment_id": 81294655, "body": "@BLUEPIXY.: Multitasking is really a problem at times.. But thanks for pointing the error."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1510121300, "post_id": 47172315, "comment_id": 81294684, "body": "@Stargateur, Ah yes. Removed the comment. Thanks"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1510121405, "post_id": 47172315, "comment_id": 81294720, "body": "@AjayBrahmakshatriya The C standard guarantees that digits are consecutive."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1510121454, "post_id": 47172315, "comment_id": 81294737, "body": "@BLUEPIXY yes, I realised my mistake."}], "tags": [], "owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "is_accepted": true, "score": 0, "last_activity_date": 1510121523, "last_edit_date": 1510121523, "creation_date": 1510119652, "answer_id": 47172315, "question_id": 47172282, "link": "https://stackoverflow.com/questions/47172282/the-easiest-way-to-convert-multi-digit-char-to-integer/47172315#47172315", "title": "The easiest way to convert multi-digit char to integer", "body": "<ul>\n<li>You can simply use <code>atoi</code> function.\n<code>size_t pos = strlen(char_id);</code></li>\n</ul>\n\n<p><code>int num = atoi(&amp;char_id[pos-2]);</code></p>\n\n<p>Or simply</p>\n\n<p><code>int num = (char_id[pos-2]-'0')*10+(char_id[pos-1]-'0');</code></p>\n\n<p><sup>The first solution uses ASCII encoding- which makes thid solution not potable across different platforms.</sup></p>\n\n<ul>\n<li><p>Use the <code>null</code> character. <code>\\0</code>.</p></li>\n<li><p>If it is digit then you can easily the second way shown over here. </p></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "is_accepted": false, "score": 0, "last_activity_date": 1510120785, "creation_date": 1510120785, "answer_id": 47172561, "question_id": 47172282, "link": "https://stackoverflow.com/questions/47172282/the-easiest-way-to-convert-multi-digit-char-to-integer/47172561#47172561", "title": "The easiest way to convert multi-digit char to integer", "body": "<p>You have your entire number stored as a string in <code>char_id</code>.</p>\n\n<p>You need to first get the start of the string where you want the number from.</p>\n\n<p>Since you want the last two digits, a simple way would be - </p>\n\n<pre><code>char *sub_string = char_id + (strlen(char_id) - 2);\n</code></pre>\n\n<p>This assumes that there is a <code>\\0</code> at the end. If you dont have have that, but know that the entire array is filled you can use <code>sizeof(char_id)</code>.</p>\n\n<p>Now you need a robust way to extract the integer stored.\nI would suggest using <code>sscanf</code>.</p>\n\n<pre><code>int number;\nif(sscanf(sub_string, \"%d\", &amp;number) != 1) {\n     printf (\"Invalid number in string\");\n     // Exit?\n}\nprintf(\"Number scanned = %d\\n\", number);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1510121002, "post_id": 47172568, "comment_id": 81294569, "body": "not important but you should move <code>int n = 0;</code> directly where you call <code>atoi()</code> =&gt; <code>int n = atoi(&amp;char_id[len - 2]);</code> and maybe advice to use <code>strtol()</code> instead of <code>atoi()</code>"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "reply_to_user": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1510121432, "post_id": 47172568, "comment_id": 81294730, "body": "@Stargateur - I added <code>strtol</code> an another option"}], "tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": false, "score": 2, "last_activity_date": 1510121861, "last_edit_date": 1510121861, "creation_date": 1510120792, "answer_id": 47172568, "question_id": 47172282, "link": "https://stackoverflow.com/questions/47172282/the-easiest-way-to-convert-multi-digit-char-to-integer/47172568#47172568", "title": "The easiest way to convert multi-digit char to integer", "body": "<p>I assume you want to take the two last (non NUL) chars and convert them to a <code>int</code> variable. Can be done in many ways:</p>\n\n<p>Here is one way:</p>\n\n<pre><code>int main(void) {\n    int n;\n    char char_id[1000] = {'1', '2', '3', '8', '9', '\\0'};\n    size_t len = strlen(char_id);\n    if (len &gt;= 2)\n    {\n        n = atoi(&amp;char_id[len-2]);\n        printf(\"%d\\n\", n);\n    }\n    else\n    {\n        printf(\"string too short\\n\");\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>89\n</code></pre>\n\n<p>An alternative conversion could be:</p>\n\n<pre><code>n = strtol(&amp;char_id[len-2], NULL, 10);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 23, "user_id": 1551103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c78e294e8c7211cdafb6889c41cd819?s=128&d=identicon&r=PG", "display_name": "amitkindre", "link": "https://stackoverflow.com/users/1551103/amitkindre"}, "is_accepted": false, "score": 0, "last_activity_date": 1510125845, "last_edit_date": 1510125845, "creation_date": 1510120871, "answer_id": 47172588, "question_id": 47172282, "link": "https://stackoverflow.com/questions/47172282/the-easiest-way-to-convert-multi-digit-char-to-integer/47172588#47172588", "title": "The easiest way to convert multi-digit char to integer", "body": "<p>Here is simple function to convert string to int.</p>\n\n<pre><code>int str2int(char *numStr)\n{\n    int intVal=0 ;\n\n    while(*numStr != '\\0')\n    {\n        intVal *= 10;\n        intVal  += *numStr - '0'; //0x30 ascii value of charater 0\n        numStr++;\n    } \n    return intVal;\n}\n</code></pre>\n\n<p>To convert last 2 digits you can pass address of that digit for e.g &amp;char_id[5]</p>\n"}, {"tags": [], "owner": {"reputation": 3310, "user_id": 1853605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ab8d886abc51e874c1ed067b912ddd?s=128&d=identicon&r=PG", "display_name": "Potato", "link": "https://stackoverflow.com/users/1853605/potato"}, "is_accepted": false, "score": 2, "last_activity_date": 1510121849, "creation_date": 1510121849, "answer_id": 47172820, "question_id": 47172282, "link": "https://stackoverflow.com/questions/47172282/the-easiest-way-to-convert-multi-digit-char-to-integer/47172820#47172820", "title": "The easiest way to convert multi-digit char to integer", "body": "<p>may be this </p>\n\n<pre><code>char char_id[1000] = {'1', '2', '3', /*..., */ '8', '9', '\\0'};\nint what_i_want    = atoi( char_id + ( strlen(char_id) - 2 ) );\n</code></pre>\n\n<p>by the way those dots are a bit of rubbish,  comment them</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 8488123, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oAHrC.jpg?s=128&g=1", "display_name": "Emre Balc\u0131", "link": "https://stackoverflow.com/users/8488123/emre-balc%c4%b1"}, "is_accepted": false, "score": 0, "last_activity_date": 1580396049, "creation_date": 1580396049, "answer_id": 59988696, "question_id": 47172282, "link": "https://stackoverflow.com/questions/47172282/the-easiest-way-to-convert-multi-digit-char-to-integer/59988696#59988696", "title": "The easiest way to convert multi-digit char to integer", "body": "<p>I implemented this function.</p>\n\n<pre><code>int char_to_int(char *ptr, int length)\n{\n    int sum = 0;\n    while(length--)\n    {\n        sum += (pow(10, length) * ((*ptr++) - 48));\n    }\n    return sum;\n}\n</code></pre>\n\n<p>You should use like that</p>\n\n<pre><code>...\nint number = char_to_int((char_id + 7), 2);\n...\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 8466786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7366088e2952bcb9bc06565fb68279a?s=128&d=identicon&r=PG&f=1", "display_name": "Hi_World", "link": "https://stackoverflow.com/users/8466786/hi-world"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3058, "favorite_count": 0, "accepted_answer_id": 47172315, "answer_count": 6, "score": -2, "last_activity_date": 1580396049, "creation_date": 1510119500, "last_edit_date": 1510119763, "question_id": 47172282, "link": "https://stackoverflow.com/questions/47172282/the-easiest-way-to-convert-multi-digit-char-to-integer", "title": "The easiest way to convert multi-digit char to integer", "body": "<p>Let's say here is a char with unknown digit number in C:</p>\n\n<pre><code>char char_id[1000] = {'1', '2', '3', ..., '8', '9', '\\0'};\n</code></pre>\n\n<p>If I want the last two digit to form an integer i.e. '89'.</p>\n\n<p>What is the easiest way?</p>\n"}, {"tags": ["c", "windows", "gcc"], "comments": [{"owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 0, "creation_date": 1510119184, "post_id": 47172142, "comment_id": 81293867, "body": "You need to compile it with a compiler for that platform. Now you\u2019ve compiled it for Windows, so get a gcc that targets DOS."}], "answers": [{"tags": [], "owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "is_accepted": false, "score": 1, "last_activity_date": 1510120230, "creation_date": 1510120230, "answer_id": 47172439, "question_id": 47172142, "link": "https://stackoverflow.com/questions/47172142/exe-cant-be-run-in-dos-mode/47172439#47172439", "title": "exe can&#39;t be run in dos mode", "body": "<p>DOS is not Windows. </p>\n\n<p>There are several windows specific libraries and APIs which are not supported by DOS. As a result a executable compiled for Windows won't work with DOS.</p>\n\n<p>You need to tell your compiler that you want to compile <em>for</em> DOS. This can be done on Windows too. It is called cross compiling.\nThe only compiler that I know (which is still available) that can target DOS is Borland C compiler (BCC).\nBCC is available for both Windows and Linux. </p>\n\n<p>The Borland C compiler is also used by TurboC compiler.\nThere are versions of Turbo C which work well with DOSbox (since that is what you are using).</p>\n\n<p>Having said that, unless there is a strong constraint that forces you to compile for DOS (like school/college restrictions or you have to develop for some very old system), I would suggest you move towards newer and better compilers that target Windows. </p>\n"}], "owner": {"reputation": 1, "user_id": 8890855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d679d5ea2298c9517fedbeeaa4e9c0d5?s=128&d=identicon&r=PG&f=1", "display_name": "supermariowert", "link": "https://stackoverflow.com/users/8890855/supermariowert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2085, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1510130345, "creation_date": 1510118795, "last_edit_date": 1510130345, "question_id": 47172142, "link": "https://stackoverflow.com/questions/47172142/exe-cant-be-run-in-dos-mode", "title": "exe can&#39;t be run in dos mode", "body": "<p>I am programming in C for a hobby project and I want to run it in DOSbox. I have a 64 bit system and I am using gcc to compile.</p>\n\n<p>I am using <code>stdlib.h</code>, <code>stdio.h</code>, <code>string.h</code></p>\n\n<p>When running the <code>.exe</code> I get the error <strong><em>\"This program cannot be run in DOS mode\".</em></strong> I have looked around a bit and it said that I need to use some specific libraries to maintain cross-platform, so what should I keep or not keep? I am pretty new to c, should I be using batch files or something else?</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1510114971, "post_id": 47171516, "comment_id": 81292660, "body": "Note that you can start the loop in <code>getMinNum()</code> with <code>i = 1</code>; you know that <code>a[0]</code> is the same value as what&#39;s in <code>min</code>...well, if <code>min</code> was a <code>float</code> and not an <code>int</code>, you would.  You should check that the <code>fscanf()</code> calls all succeed before using the data.  You&#39;re also using a VLA (variable length array).  No harm done, but you should be aware that you&#39;re doing so."}, {"owner": {"reputation": 161, "user_id": 7783436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/086ff93844797bf4e9b4f55f9d45636c?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/7783436/matt"}, "edited": false, "score": 0, "creation_date": 1510122518, "post_id": 47171516, "comment_id": 81295122, "body": "Specifically, you should be aware that you&#39;re using a variable length array because the compiler may allow you to set n = 0.  This would lead to out-of-range memory access using @ed-heal&#39;s solution, which assumes <code>a[0]</code> is a valid member.  If you declare <code>z</code> with <code>float z[5]</code>, the compiler will enforce that assumption."}], "answers": [{"tags": [], "owner": {"reputation": 161, "user_id": 7783436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/086ff93844797bf4e9b4f55f9d45636c?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/7783436/matt"}, "is_accepted": false, "score": 3, "last_activity_date": 1510114867, "creation_date": 1510114867, "answer_id": 47171538, "question_id": 47171516, "link": "https://stackoverflow.com/questions/47171516/finding-minimal-number-in-array/47171538#47171538", "title": "Finding minimal number in array", "body": "<p>You shouldn't append '[]' to the variable name.</p>\n\n<p>Instead of:</p>\n\n<pre><code>printf(\"%6.2f\", getMinNum(z[], n));\n</code></pre>\n\n<p>do:</p>\n\n<pre><code>printf(\"%6.2f\", getMinNum(z, n));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "is_accepted": false, "score": 3, "last_activity_date": 1510115074, "last_edit_date": 1510115074, "creation_date": 1510114961, "answer_id": 47171550, "question_id": 47171516, "link": "https://stackoverflow.com/questions/47171516/finding-minimal-number-in-array/47171550#47171550", "title": "Finding minimal number in array", "body": "<p>Your <code>a[i+1]</code> will be using values outside the array, so use <code>a[i]</code> instead.</p>\n\n<p>So the code should look like</p>\n\n<pre><code>float getMinNum(float a[], int x){\n\n    int i;\n    float min = a[0]; // Min needs to be a float\n    for(i=1; i&lt;x; i++){ // Do not need to check a[0]\n\n        if(min &gt; a[i]){\n            min = a[i];\n        }\n\n    }\n\n    return min;\n}\n</code></pre>\n\n<p>And call it as</p>\n\n<pre><code>printf(\"%6.2f\", getMinNum(z, n));\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 8829890, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/13af9806c3dbde48b6a35caf8e3cef55?s=128&d=identicon&r=PG&f=1", "display_name": "Patryk Besler", "link": "https://stackoverflow.com/users/8829890/patryk-besler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1510122646, "creation_date": 1510114721, "last_edit_date": 1510115989, "question_id": 47171516, "link": "https://stackoverflow.com/questions/47171516/finding-minimal-number-in-array", "title": "Finding minimal number in array", "body": "<p>I would like to write a program which finds the minimal number of 5 inputted numbers. I'm stuck at the point when I want to use function getMinNum, but there is an error saying: expected expression before ']' token\nI understand it has a connection with pointers, however I would like to do it without them if it is possible of course.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nfloat getMinNum(float a[], int x);\nint main() \n{\n    int n = 5;\n    int i;\n    float z[n];\n    for(i=0; i&lt;n; i++){\n        scanf(\"%f\", &amp;z[i]);\n    }\n\n    printf(\"%6.2f\", getMinNum(z[], n));\n    return 0;\n}\n\nfloat getMinNum(float a[], int x)\n{\n    int i, min = a[0];\n    for(i=0; i&lt;x; i++){\n        if(min &gt; a[i+1]){\n            min = a[i+1];\n        }\n    }\n    return min;\n}\n</code></pre>\n"}, {"tags": ["c", "playsound"], "answers": [{"tags": [], "owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "is_accepted": false, "score": 2, "last_activity_date": 1510114500, "last_edit_date": 1510114500, "creation_date": 1510112090, "answer_id": 47171156, "question_id": 47171136, "link": "https://stackoverflow.com/questions/47171136/simple-sound-player/47171156#47171156", "title": "Simple Sound Player", "body": "<p><code>if (MemeNumber = \"1\")</code></p>\n\n<ol>\n<li>MemeNumber is an <code>int</code> and <code>\"1\"</code> is a <code>char*/string</code></li>\n<li><code>=</code> is an assignment, not a compare.</li>\n</ol>\n\n<p><code>if (MemeNumber = '2')</code></p>\n\n<ol>\n<li>MemNumber is an <code>int</code>and <code>'2'</code> is a char.</li>\n<li><code>=</code> is an assignment not a compare.</li>\n</ol>\n\n<p>Try <code>if (MemeNumber == 1)</code> and <code>if (MemeNumber == 2)</code>. Also: have a look at the switch statement. It will help simplify your code.</p>\n\n<p>Note: If you compiled with all the warnings turned on, the compiler would highlight all of this for you.</p>\n"}], "owner": {"reputation": 7, "user_id": 8881010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/294a9a9070708a8689e3c7bea7e1856f?s=128&d=identicon&r=PG&f=1", "display_name": "Adam.A.T.", "link": "https://stackoverflow.com/users/8881010/adam-a-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1510114500, "creation_date": 1510111899, "last_edit_date": 1510112072, "question_id": 47171136, "link": "https://stackoverflow.com/questions/47171136/simple-sound-player", "title": "Simple Sound Player", "body": "<p>I am trying to make a simple app that plays a sound when pressing a specific number but whatever I enter it plays the first song for some weird reason.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;Windows.h&gt;\n#include \"MMsystem.h\"\n\nvoid main(void){\n\n    printf(\"\\t\\t\\t\\t\\t\\tCh00se A M3m3\\n\\n\");\n    printf(\"\\t\\t\\t\\t\\t\\t1.Quick Maths\\n\");\n    printf(\"\\t\\t\\t\\t\\t\\t2.Crippling Deprresion\");\n\n    int MemeNumber;\n    scanf_s(\"%d\", &amp;MemeNumber);\n    if (MemeNumber = \"1\")\n    {\n        PlaySound(TEXT(\"BigShaq.wav\"), NULL, SND_SYNC);\n    }\n\n    if (MemeNumber = '2')\n    {\n        PlaySound(TEXT(\"CripplinD.wav\"), NULL, SND_SYNC);\n    }\n\n    getch();\n}\n</code></pre>\n"}, {"tags": ["c", "embedded"], "comments": [{"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1510112091, "post_id": 47171125, "comment_id": 81291880, "body": "You can assign values to enumeration symbols, e.g. <code>enum {x=(1&lt;&lt;3), y=(1&lt;&lt;4), ...}</code> if that&#39;s what you&#39;re asking."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1510112092, "post_id": 47171125, "comment_id": 81291882, "body": "You do know that you can initialize an enumeration value to any integer? Like e.g. <code>Acc_2g = 4</code>? You can use any compile-time constant expression for the initialization, like e.g. <code>Acc_2g = 1 &lt;&lt; 2</code>. <a href=\"http://stackoverflow.com/questions/562303/the-definitive-c-book-guide-and-list\">A good beginners book</a> should have told you that."}], "answers": [{"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1510114384, "post_id": 47171346, "comment_id": 81292493, "body": "And in C11, you could use an anonymous inner struct (drop <code>bits</code> from the definition), and then you could use <code>pReg-&gt;bit5 = 0;</code>, for example.  Also note that the standard does not specify whether <code>bit012</code> will be at the most significant or least significant end of the storage unit that holds it."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1510114717, "post_id": 47171346, "comment_id": 81292574, "body": "@chux :  I think I did: <i>&quot;consult your compiler&#39;s documentation on how it it packs bit-fields with respect to bit order and padding&quot;</i>."}], "tags": [], "owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "is_accepted": true, "score": 2, "last_activity_date": 1510114985, "last_edit_date": 1510114985, "creation_date": 1510113625, "answer_id": 47171346, "question_id": 47171125, "link": "https://stackoverflow.com/questions/47171125/enumerations-and-bitwise-operators-with-registers/47171346#47171346", "title": "Enumerations and bitwise operators with Registers", "body": "<p>An enum is merely a set of integer constants, they cannot cause actions on data at run-time. So for example while you can define:</p>\n\n<pre><code>typedef enum  \n{\n    Acc_2g = 1 &lt;&lt; 2,\n    Acc_4g = 1 &lt;&lt; 4\n} Res ;\n</code></pre>\n\n<p>This does not \"change\" any bits as requested in the question.  You still have to use the same idiom:</p>\n\n<pre><code>SomeRegister |= Acc_2g ;\nSomeRegister &amp;= ~(Acc_4g) ;  \n</code></pre>\n\n<p>What you probably need is a struct with bit-fields.  Note however that if the intent is to access specific bits in some hardware register, you will need to consult your compiler's documentation on how it it packs bit-fields with respect to bit order and padding - such things are implementation/target dependent, but this need not necessarily be avoided when the the register is also target specific.</p>\n\n<p>For example, for some hypothetical 8 bit register:</p>\n\n<pre><code>typedef union\n{\n    uint8_t byte;\n\n    struct\n    {\n         uint8_t bit012 : 3;\n         uint8_t bit34  : 2;\n         uint8_t bit5   : 1;\n         uint8_t bit6   : 1;\n         uint8_t bit7   : 1;\n    } bits ;\n\n} registerType;\n</code></pre>\n\n<p>Then this type can be used to create a pointer to the register:</p>\n\n<pre><code>registerType *pReg = (registerType*)0x00008000;\n</code></pre>\n\n<p>The the register may be accessed as bit-fields:</p>\n\n<pre><code>pReg-&gt;bits.bit5 = 1;\npReg-&gt;bits.bit012 = 7;\n</code></pre>\n\n<p>Or as an entire register:</p>\n\n<pre><code>pReg-&gt;byte = 0x55;\n</code></pre>\n\n<p>One can go further by defining a structure for all registers of a single peripheral for example.</p>\n"}], "owner": {"reputation": 13, "user_id": 8903917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcec1ea909d2c0ea581c92f061d7c9fa?s=128&d=identicon&r=PG&f=1", "display_name": "Eng_Mike", "link": "https://stackoverflow.com/users/8903917/eng-mike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 47171346, "answer_count": 1, "score": 1, "last_activity_date": 1510114985, "creation_date": 1510111843, "last_edit_date": 1510114759, "question_id": 47171125, "link": "https://stackoverflow.com/questions/47171125/enumerations-and-bitwise-operators-with-registers", "title": "Enumerations and bitwise operators with Registers", "body": "<p>We are all used to this kind of manipulating registers:</p>\n\n<pre><code>SomeRegister |= (1 &lt;&lt; What_ever_bit_I_wanna_change ) // we do this for changing a specific bit to one without changing the others.\n\nSomeRegister &amp;= ~(1 &lt;&lt; What_ever_bit_I_wanna_change ) // we do this for changing a specific bit to zero without changing the others.\n</code></pre>\n\n<p>I am planning to use the same paradigm, but with enumerations, something like this:</p>\n\n<pre><code>typedef enum  {\nAcc_2g  (Something to change only the desired bits in the related register that I don't know how to do),\nAcc_4g (Something to change only the desired bits in the related register that I don't know how to do)\n}Res;\n</code></pre>\n\n<p>Any idea how to use the bitwise operators inside the enumeration?</p>\n"}, {"tags": ["javascript", "c", "emscripten", "webassembly"], "comments": [{"owner": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "edited": false, "score": 0, "creation_date": 1510111693, "post_id": 47171012, "comment_id": 81291774, "body": "This is wrong because <code>T</code> is NULL. <code>int right = T[index];</code>."}, {"owner": {"reputation": 6658, "user_id": 3697757, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/0aQ16.jpg?s=128&g=1", "display_name": "hackjutsu", "link": "https://stackoverflow.com/users/3697757/hackjutsu"}, "reply_to_user": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "edited": false, "score": 0, "creation_date": 1510115548, "post_id": 47171012, "comment_id": 81292831, "body": "@MFisherKDX In WebAssembly, we can preload data to <code>WebAssembly.Memory</code> buffer. <code>*T</code> here is simply a pointer to the specific position in the buffer."}], "answers": [{"tags": [], "owner": {"reputation": 64343, "user_id": 249933, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/458f2e0d08d4114f8b323798cfea141d?s=128&d=identicon&r=PG", "display_name": "ColinE", "link": "https://stackoverflow.com/users/249933/coline"}, "is_accepted": false, "score": 0, "last_activity_date": 1510295300, "creation_date": 1510295300, "answer_id": 47216840, "question_id": 47171012, "link": "https://stackoverflow.com/questions/47171012/unresolved-symbol-llvm-trap-from-emscripten/47216840#47216840", "title": "unresolved symbol: llvm_trap from Emscripten", "body": "<p>The variable <code>T</code> must be initialised. If it represents an array that 'maps' to the WebAssembly linear memory, you can define it as a global as follows:</p>\n\n<pre><code>int T[1000];\n\nint test(int *buf) {\n  int C = 1;\n\n  int index = C ^ buf[5];\n  int right = T[index];\n  int left = (unsigned)C &gt;&gt; 8;\n\n  // warning disappears if this is commented out. But why?\n  C = left ^ right;\n\n  return C;\n}\n</code></pre>\n\n<p>This compiles without the llvm_trap warnings.</p>\n\n<p>For more detail on how to pass data to a WASM function using linear memory, see the following question:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/46748572/how-to-access-webassembly-linear-memory-from-c-c\">How to access WebAssembly linear memory from C/C++</a></p>\n"}], "owner": {"reputation": 6658, "user_id": 3697757, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/0aQ16.jpg?s=128&g=1", "display_name": "hackjutsu", "link": "https://stackoverflow.com/users/3697757/hackjutsu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 184, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1510295300, "creation_date": 1510110971, "last_edit_date": 1510115683, "question_id": 47171012, "link": "https://stackoverflow.com/questions/47171012/unresolved-symbol-llvm-trap-from-emscripten", "title": "unresolved symbol: llvm_trap from Emscripten", "body": "<p>When I tried to compile the following snippet into WebAssembly binary, I kept hitting the <code>unresolved symbol: llvm_trap</code> warning, which makes the wasm code not consumable from JS.</p>\n\n<pre><code>emcc test.c -s WASM=1 -s ONLY_MY_CODE=1 -s \"EXPORTED_FUNCTIONS=['_test']\" -O2 -g -o test.js\n</code></pre>\n\n<p><strong>test.c</strong> (This is a test code to reproduce the issue without doing meaningful jobs.)</p>\n\n<pre><code>int test(int *buf) {\n  int C = 1;\n  // Assuming WebAssembly.Memory buffer has been preloaed with data. \n  // *T represents the preloaded data here. And We know *T and *buf \n  // won't overlap in memory.\n  int *T = 0; \n\n  int index = C ^ buf[5];\n  int right = T[index];\n  int left = (unsigned)C &gt;&gt; 8;\n\n  // warning disappears if this is commented out. But why?\n  C = left ^ right; \n\n  return C;\n}\n</code></pre>\n\n<p>I didn't write any <code>llvm_trap</code> related code. Does someone have ideas what does it mean?</p>\n"}, {"tags": ["c", "string", "printf"], "comments": [{"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1510106229, "post_id": 47170241, "comment_id": 81290303, "body": "<a href=\"https://stackoverflow.com/q/9206669/995714\">Making an table with printf</a>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1510106834, "post_id": 47170241, "comment_id": 81290449, "body": "Is there a maximum fixed with to <code>.name</code>?"}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1510115339, "post_id": 47170241, "comment_id": 81292768, "body": "Your example <code>printf()</code> is missing a format specifier for <code>person[i].gender</code>, and it is not clear whether this should be <code>%c</code> or <code>%s</code> since the type information is not given."}], "answers": [{"tags": [], "owner": {"reputation": 15340, "user_id": 1560035, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/fe3aa4a1766a44d8f27db8a95cb573ed?s=128&d=identicon&r=PG", "display_name": "TheoretiCAL", "link": "https://stackoverflow.com/users/1560035/theoretical"}, "is_accepted": false, "score": 1, "last_activity_date": 1510105825, "creation_date": 1510105825, "answer_id": 47170282, "question_id": 47170241, "link": "https://stackoverflow.com/questions/47170241/align-start-and-end-of-strings-in-c/47170282#47170282", "title": "Align start and end of strings in C", "body": "<p><code>printf</code> allows you to specify padding in the format specifier, you can provide the number of left padding as a number x such that your specifier looks like <code>%xs</code>, or right padding with <code>-x</code>, such that the specifier looks like <code>%-xs</code>.</p>\n\n<p>In your case, you can do something like:</p>\n\n<pre><code>  printf (\"%-20s Age: %5d Gender: %s\\n\", person[i].name, person[i].age, person[i].gender);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1510106487, "post_id": 47170286, "comment_id": 81290368, "body": "Curious to use <code>&quot;:%3d&quot;</code> with no space and then <code>&quot;: %1s&quot;</code> with space.  I&#39;d expect <code>&quot;Age:%3d Gender:%2s&quot;</code> or <code>&quot;Age: %2d Gender: %1s&quot;</code>.  IAC, 3-digit ages make sense."}, {"owner": {"reputation": 131, "user_id": 3319236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9eb35dd940cbac0b4b50b7fe9539f944?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin Kenny", "link": "https://stackoverflow.com/users/3319236/kevin-kenny"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1510106651, "post_id": 47170286, "comment_id": 81290404, "body": "@chux: I was going by the example that the original poster gave, keeping the data in the same columns. I figured that overflowing a 3-digit age into the next column to the left was the &quot;least worst&quot; thing to do."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1510113596, "post_id": 47170286, "comment_id": 81292287, "body": "I&#39;m not convinced the <code>%1s</code> gives you any benefit that <code>%s</code> doesn&#39;t.  If you used <code>%.1s</code> then you&#39;d limit the output to at most 1 character, but &#39;at least one&#39; character only gives you a space if the gender is an empty string (so <code>person[i].gender[0] == &#39;\\0&#39;</code>), so maybe there is a marginal benefit."}, {"owner": {"reputation": 131, "user_id": 3319236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9eb35dd940cbac0b4b50b7fe9539f944?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin Kenny", "link": "https://stackoverflow.com/users/3319236/kevin-kenny"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1510204550, "post_id": 47170286, "comment_id": 81337732, "body": "@JonathanLeffler You&#39;re right, it helps only with zero-length &#39;gender&#39; (which is easy to imagine if there&#39;s a database behind this printout, and some people are of indeterminate or &#39;other&#39; gender). It also serves to document the expected field width. And when I&#39;m producing tabular output, I&#39;m just in the habit of specifying width on ALL fields."}], "tags": [], "owner": {"reputation": 131, "user_id": 3319236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9eb35dd940cbac0b4b50b7fe9539f944?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin Kenny", "link": "https://stackoverflow.com/users/3319236/kevin-kenny"}, "is_accepted": true, "score": 3, "last_activity_date": 1510105858, "creation_date": 1510105858, "answer_id": 47170286, "question_id": 47170241, "link": "https://stackoverflow.com/questions/47170241/align-start-and-end-of-strings-in-c/47170286#47170286", "title": "Align start and end of strings in C", "body": "<p>If you look at the manual for printf(), and note that you can do things like %-18s and %2d - putting a field width and alignment in the format group.</p>\n\n<p>So I'd do something like </p>\n\n<pre><code>printf(\"%-20s Age:%3d Gender: %1s\",\n       person[i].name, person[i].age, person[i].gender);\n</code></pre>\n\n<p>which should align nicely for you.</p>\n"}, {"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1510114040, "post_id": 47170327, "comment_id": 81292401, "body": "Good point on the monospaced font."}], "tags": [], "owner": {"reputation": 175, "user_id": 7993347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ece31db05117d58a9248cbd1b7752c6?s=128&d=identicon&r=PG&f=1", "display_name": "eDog", "link": "https://stackoverflow.com/users/7993347/edog"}, "is_accepted": false, "score": 2, "last_activity_date": 1510106191, "creation_date": 1510106191, "answer_id": 47170327, "question_id": 47170241, "link": "https://stackoverflow.com/questions/47170241/align-start-and-end-of-strings-in-c/47170327#47170327", "title": "Align start and end of strings in C", "body": "<p>If you add a width formating to the %, that should get you there. So you can use somethinglike %10s and %5d. \nDepending on the  number spaces you want. Also, you would want to use some sort of monospaced font. </p>\n"}], "owner": {"reputation": 212, "user_id": 7101427, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bc223ed7402ccacab591f99d7e520c74?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed", "link": "https://stackoverflow.com/users/7101427/ahmed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "closed_date": 1510137660, "accepted_answer_id": 47170286, "answer_count": 3, "score": -2, "last_activity_date": 1510106191, "creation_date": 1510105467, "question_id": 47170241, "link": "https://stackoverflow.com/questions/47170241/align-start-and-end-of-strings-in-c", "closed_reason": "Duplicate", "title": "Align start and end of strings in C", "body": "<p>So I want to align my outputs like so:</p>\n\n<pre><code>John Smith         Age: 34  Gender: M\nMicheal Smith      Age:  9  Gender: F\n</code></pre>\n\n<p>and so on</p>\n\n<p>I have an array that contains the information for this and I loop through it and print the information: </p>\n\n<pre><code>for (int i = 0; i &lt; ARRAY_LENGTH; i++) {\n\n      printf (\"%s       Age: %d  Gender: \\n\", person[i].name, person[i].age, person[i].gender);\n}\n</code></pre>\n\n<p>I am stuck on how to make it align so all the spaces are even. </p>\n\n<p>Thanks</p>\n"}, {"tags": ["c", "memory", "operating-system"], "comments": [{"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1510102047, "post_id": 47169730, "comment_id": 81289320, "body": "I think you&#39;re confusing two unrelated things. The CODE of the function is either loaded into memory when the program starts (if it&#39;s linked statically), or loaded when first called (from a shared library/dll). When the function is called, a stack frame is created for the DATA--the function arguments and its local variables. The OS manages how memory is allocated and what parts are used for code and which for data and stack. Functions in shared libraries/dlls also have the advantage that if they are called from a second program, the already-loaded code is reused."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 1, "creation_date": 1510102802, "post_id": 47169730, "comment_id": 81289507, "body": "Officially, I don&#39;t believe C actually defines any of this stuff. It&#39;s OS/compiler/linker dependent; in practice, there are a few common patterns, but C doesn&#39;t require any given approach. And in practice, @LeeDanielCrocker&#39;s explanation is slightly oversimplified; the statically linked code is <i>mapped</i> into memory on launch, but not necessarily <i>loaded</i> (could be demand paged on use), and shared libs/DLLs might be eagerly mapped, lazily mapped based on trampoline code, or explicitly loaded during execution (without being mapped on launch at all)."}, {"owner": {"reputation": 3794, "user_id": 7256714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adeb98b0e8995d8576ad5f66c0f982e5?s=128&d=identicon&r=PG&f=1", "display_name": "Pras", "link": "https://stackoverflow.com/users/7256714/pras"}, "edited": false, "score": 0, "creation_date": 1510110360, "post_id": 47169730, "comment_id": 81291436, "body": "Your program will have diffrent segments - code segment ,data segment,stack segment,extra segment - All functions will be in code segment"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 1, "creation_date": 1510114925, "post_id": 47169730, "comment_id": 81292646, "body": "<i>I have a pretty good understanding of how functions stored on stack</i>, I really doubt that. I think you need to revisit the basics."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1510119465, "post_id": 47169730, "comment_id": 81293971, "body": "You should not care at all. Your question is unclear, and shows a lot of confusion. Read some book like <a href=\"http://pages.cs.wisc.edu/~remzi/OSTEP/\" rel=\"nofollow noreferrer\">pages.cs.wisc.edu/~remzi/OSTEP</a>"}], "answers": [{"comments": [{"owner": {"reputation": 18942, "user_id": 894328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3db17c5296335f63e856be44aa821bf6?s=128&d=identicon&r=PG", "display_name": "Ahmed Masud", "link": "https://stackoverflow.com/users/894328/ahmed-masud"}, "edited": false, "score": 0, "creation_date": 1510110706, "post_id": 47169776, "comment_id": 81291538, "body": "Your answer doesn&#39;t address the OP question of how an OS manages library functions."}], "tags": [], "owner": {"reputation": 920, "user_id": 8108125, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d73c63113cdabd2357f32a9808bd0559?s=128&d=identicon&r=PG&f=1", "display_name": "Cpp plus 1", "link": "https://stackoverflow.com/users/8108125/cpp-plus-1"}, "is_accepted": false, "score": -1, "last_activity_date": 1510101894, "creation_date": 1510101894, "answer_id": 47169776, "question_id": 47169730, "link": "https://stackoverflow.com/questions/47169730/how-c-library-function-stored-in-memory/47169776#47169776", "title": "How c library function stored in memory?", "body": "<p>If you are using a static version of the standard library, then the functions are treated exactly the same as regular functions. However, if you are using a dynamic version of the standard library, then the functions are most likely already pre-loaded in the operating system you are using in a memory location separate from that of your program (most likely, because they are loaded into the operating system's memory only once a program uses the function. Subsequent uses of the function by different programs does not require the function to be re-loaded into memory).</p>\n"}, {"tags": [], "owner": {"reputation": 18530, "user_id": 3344003, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/988af95d5692ee66b1fc2fe725ba738e?s=128&d=identicon&r=PG&f=1", "display_name": "user3344003", "link": "https://stackoverflow.com/users/3344003/user3344003"}, "is_accepted": false, "score": 0, "last_activity_date": 1510103858, "creation_date": 1510103858, "answer_id": 47170018, "question_id": 47169730, "link": "https://stackoverflow.com/questions/47169730/how-c-library-function-stored-in-memory/47170018#47170018", "title": "How c library function stored in memory?", "body": "<p>This is actually a big question and the answer depends upon the operating system.</p>\n\n<p>If the library is static, the functions are linked into the executable image. They get loaded into memory along with the rest of the executable.</p>\n\n<p>If it is a shared image, there are two common paths. Some operating systems keep standard libraries always open that they are actually shared among processes using them. In that case,the operating system maps the pages containing the shared library to the process address space.</p>\n\n<p>Another possible path is that the shared libraries is loaded identically to the executable. The program loader gets called recursively for each shared library referenced (directly or indirectly) by the executable.</p>\n\n<blockquote>\n  <p>When main calls system() or any other c function, where does it stored?</p>\n</blockquote>\n\n<p>Wherever the program loader has placed it in memory.</p>\n\n<blockquote>\n  <p>does it push another function frame on stack(i doubt it)?\n  The stack has nothing to do with code.</p>\n  \n  <p>or is it stored in heap?</p>\n</blockquote>\n\n<p>Heap is just an abstract concept for teaching.</p>\n\n<blockquote>\n  <p>is there a tables stores location of each function in c library?</p>\n</blockquote>\n\n<p>A shared library maintains such a table.</p>\n\n<blockquote>\n  <p>if so, when does this table constructed?</p>\n</blockquote>\n\n<p>A table is created by the linker. Usually, this information is also preserved in memory by the program loader.</p>\n\n<blockquote>\n  <p>how do we get there? </p>\n</blockquote>\n\n<p>The executable format will define where the universal symbol mapping is found.</p>\n"}, {"tags": [], "owner": {"reputation": 8002, "user_id": 1143850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2927fac544c9960cd5433688fe4cae1d?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/1143850/serge"}, "is_accepted": false, "score": 2, "last_activity_date": 1510140009, "last_edit_date": 1510140009, "creation_date": 1510108519, "answer_id": 47170671, "question_id": 47169730, "link": "https://stackoverflow.com/questions/47169730/how-c-library-function-stored-in-memory/47170671#47170671", "title": "How c library function stored in memory?", "body": "<p>In general it all is not related to the type of the library used. Any operating system loads your executable program and libraries into memory. This is the task of the operating system loader and linker to figure out where to load all of them. All details are hidden from generic applications. All they see is the memory space where different regions of memory are used differently. </p>\n\n<p>Your program consists of 2 parts: data and machine instructions which operate on data and provides services. All instructions as well as data are allocated in memory and can be addressed, if you know where to look. </p>\n\n<p>So, the function is a piece of code which starts at a particular address in memory. When your program calls a function it just executes a jump instruction to that address. When function is done, it jumps  back to the instruction next after the original jump. </p>\n\n<p>The instructions in the function do operate on data allocated somewhere in memory as well. It is a convention that when a function gets called, it reserves a piece of memory for local data, so that its instruction can operate on this memory, called <code>stack</code>. So, strictly speaking, the function itself is not allocated on stack, instead it uses stack to keep its local data. When the function returns, it releases the stack memory it used, so that the latter could be used by some other function. If a function is called multiple times, it reserves new memory space for its local data for every call. This is basically what stack is. </p>\n\n<p>Heap is different from the stack only by its usage and allocation algorithm. It is not related to the function call and heap memory regions can be requested by the program at will, when they are needed.</p>\n\n<p>There is also a static memory space, which is reserved by the system loader together with instructions, and intended for static variables. Its size is known at compilation time and therefore, no dynamic allocation is needed for these vars.</p>\n\n<p>All these memory regions are parts of the same memory pool and differ only in usage and reservation algorithms. However, if one wants, the program instructions could be stored in heap or in stack or in static space. This usually is used by hackers. One can also create its own memory allocation mechanisms if needed.</p>\n"}, {"tags": [], "owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "is_accepted": false, "score": 2, "last_activity_date": 1510116021, "creation_date": 1510116021, "answer_id": 47171704, "question_id": 47169730, "link": "https://stackoverflow.com/questions/47169730/how-c-library-function-stored-in-memory/47171704#47171704", "title": "How c library function stored in memory?", "body": "<p>Library functions are no different to functions defined in your code - they are simply provided already compiled.  A function's local, not-static <em>data</em> is stored on the stack, not the function itself.</p>\n\n<p>For static libraries references to the library code are resolved at build time, and the code itself included in the fully linked executable - by the linker.</p>\n\n<p>For shared or dynamic-linked libraries, the library code is loaded into memory and linked to your code at run-time by the operating system loader.</p>\n"}], "owner": {"reputation": 145, "user_id": 8390201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af51319263ed43525aac990b55e309a1?s=128&d=identicon&r=PG&f=1", "display_name": "Evan.zz", "link": "https://stackoverflow.com/users/8390201/evan-zz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1586, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1510140009, "creation_date": 1510101608, "last_edit_date": 1510103900, "question_id": 47169730, "link": "https://stackoverflow.com/questions/47169730/how-c-library-function-stored-in-memory", "title": "How c library function stored in memory?", "body": "<p>I have a pretty good understanding of how functions stored on stack. But i couldn't find anything related to how OS manage library functions such as c library.</p>\n\n<p>for example, system() in stdlib.h.\nWhen main calls system() or any other c function, </p>\n\n<p>where does it stored? does it push another function frame on stack(i doubt it)?</p>\n\n<p>or is it stored in heap? is there a table stores location of each function in c library? if so, when does this table constructed?\nhow do we get there? how do we get back?</p>\n\n<p>and if we create our library, does OS treat it the same way?</p>\n\n<p>Is there a different between static library and shared library in this matter?</p>\n\n<p>Can someone explain with a simple example?</p>\n\n<p>Thank you in advance, this bothers me quite a bit lately.</p>\n"}, {"tags": ["c", "algorithm", "openssl", "diffie-hellman"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1510101720, "post_id": 47169665, "comment_id": 81289239, "body": "<code>printf(&quot; dhSize = %d \\n&quot;);</code> lacks an argument for the <code>%d</code> format specifier. Please enable compiler warnings."}, {"owner": {"reputation": 21, "user_id": 8851743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/766305f638e784308dfe7a47fb41f6d0?s=128&d=identicon&r=PG&f=1", "display_name": "VFcdxcv", "link": "https://stackoverflow.com/users/8851743/vfcdxcv"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1510103170, "post_id": 47169665, "comment_id": 81289595, "body": "I added, but nothing is shown in console. Even if I don&#39;t use printf my code is not executed after calculation dhSize. This is the main problem."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1510103472, "post_id": 47169665, "comment_id": 81289673, "body": "Then use a debugger, I was just mentioning one error I noticed. When you say &quot;is not executed&quot; do you mean the program crashed before then, or the line is ignored and subsequent code is executed."}], "answers": [{"tags": [], "owner": {"reputation": 18942, "user_id": 894328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3db17c5296335f63e856be44aa821bf6?s=128&d=identicon&r=PG", "display_name": "Ahmed Masud", "link": "https://stackoverflow.com/users/894328/ahmed-masud"}, "is_accepted": true, "score": 0, "last_activity_date": 1510110351, "creation_date": 1510110351, "answer_id": 47170927, "question_id": 47169665, "link": "https://stackoverflow.com/questions/47169665/how-to-compute-a-shared-secret-for-2-users-in-algorithm-diffie-hellman-using-ope/47170927#47170927", "title": "How to compute a shared secret for 2 users in algorithm Diffie Hellman using openssl lib c language?", "body": "<p>You are making silly mistakes:</p>\n\n<ol>\n<li><p><code>dhSize</code> should be typed as <code>DH_size</code> (~line 24)\nand <code>DH_size</code> function calculates size of <code>struct DH</code> given a <em><code>const struct DH *</code></em> you are passing it <code>dh-&gt;priv_key</code> instead of passing it <code>dh</code> (~line 28)</p></li>\n<li><p>Similar mistake in use of <code>DH_compute_key</code> (~line 28) third argument should be <code>dh</code> not <code>dh-&gt;priv_key</code>. </p></li>\n</ol>\n\n<p>Please fix accordingly and try again</p>\n"}], "owner": {"reputation": 21, "user_id": 8851743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/766305f638e784308dfe7a47fb41f6d0?s=128&d=identicon&r=PG&f=1", "display_name": "VFcdxcv", "link": "https://stackoverflow.com/users/8851743/vfcdxcv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 711, "favorite_count": 0, "accepted_answer_id": 47170927, "answer_count": 1, "score": 1, "last_activity_date": 1510110351, "creation_date": 1510101088, "question_id": 47169665, "link": "https://stackoverflow.com/questions/47169665/how-to-compute-a-shared-secret-for-2-users-in-algorithm-diffie-hellman-using-ope", "title": "How to compute a shared secret for 2 users in algorithm Diffie Hellman using openssl lib c language?", "body": "<p>I need some help with algorithm Diffie Hellman in openssl\nI have prime number (p), generator (g), private key of user A and public key of user B. I need to compute the shared key. I wrote this code, but the code is executed till this line</p>\n\n<pre><code> int dhSize = DH_size(dh-&gt;priv_key);\n</code></pre>\n\n<p>Here is the full code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;openssl/dh.h&gt;\n\nconst char* userA_PrivateKey = \"90ff0\";\nconst char* userB_PublicKey = \"9d1a59\";\nconst char* p = \"66c2fa\";\nconst char* g = \"2\";\n\nint main(void)\n{\n    DH *dh = DH_new();\n\n    BN_dec2bn(&amp;dh-&gt;g, g);\n    BN_hex2bn(&amp;dh-&gt;p, p);\n    BN_hex2bn(&amp;dh-&gt;priv_key, userA_PrivateKey);\n\n    BIGNUM *pubKeyUserB = NULL;\n    BN_dec2bn(&amp;pubKeyUserB, userB_PublicKey);\n\n    //Compute the shared secret\n    int secret_size;\n    unsigned char *secret;\n    printf(\" Compute DH_size \\n\");\n    int dhSize = DH_size(dh-&gt;priv_key);\n    printf(\" dhSize = %d \\n\"); //NOT EXECUTED \n    secret = OPENSSL_malloc(sizeof(unsigned char) * dhSize);\n\n    if(0 &gt; (secret_size = DH_compute_key(secret, pubKeyUserB, dh-&gt;priv_key)))\n    {\n        printf(\"error \\n\");\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>I have two problems:</p>\n\n<p>1) printf, that prints dhSize is not executed at all</p>\n\n<p>2) I am not sure if I set values g, p, priv key correctly ? Will the function DH_compute_key use my g and p ? </p>\n"}, {"tags": ["c", "bubble-sort"], "comments": [{"owner": {"reputation": 475, "user_id": 841097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf25e2a480e4dae0d7384e4add649b40?s=128&d=identicon&r=PG&f=1", "display_name": "JMichelB", "link": "https://stackoverflow.com/users/841097/jmichelb"}, "edited": false, "score": 1, "creation_date": 1510099588, "post_id": 47169402, "comment_id": 81288718, "body": "<code>int pesquisar_bin(int vetor[],int ini,int fim,int numero){</code> the signature you declare doesn&#39;t match the signature of the actual function. <code>vetor</code>is not of the right type."}, {"owner": {"reputation": 5010, "user_id": 3150445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bfca2588483eadf6695a120cbcef1f8?s=128&d=identicon&r=PG&f=1", "display_name": "jwdonahue", "link": "https://stackoverflow.com/users/3150445/jwdonahue"}, "edited": false, "score": 0, "creation_date": 1510099992, "post_id": 47169402, "comment_id": 81288818, "body": "Please review <a href=\"https://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>.  The code you posted won&#39;t compile, much less throw a linker error: <code>else if(aux==2)</code> has no matching <code>if</code> statement."}, {"owner": {"reputation": 11, "user_id": 8903147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d21e828224f88f2c59610c6bb07739a?s=128&d=identicon&r=PG&f=1", "display_name": "Eddie", "link": "https://stackoverflow.com/users/8903147/eddie"}, "reply_to_user": {"reputation": 5010, "user_id": 3150445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bfca2588483eadf6695a120cbcef1f8?s=128&d=identicon&r=PG&f=1", "display_name": "jwdonahue", "link": "https://stackoverflow.com/users/3150445/jwdonahue"}, "edited": false, "score": 0, "creation_date": 1510100606, "post_id": 47169402, "comment_id": 81288976, "body": "I know @jwdonahue I hided many parts of program to paste here. The only error is the reference how I said."}, {"owner": {"reputation": 5010, "user_id": 3150445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bfca2588483eadf6695a120cbcef1f8?s=128&d=identicon&r=PG&f=1", "display_name": "jwdonahue", "link": "https://stackoverflow.com/users/3150445/jwdonahue"}, "edited": false, "score": 0, "creation_date": 1510101316, "post_id": 47169402, "comment_id": 81289144, "body": "@Eddie, watch your language.  Please delete your offensive comments."}, {"owner": {"reputation": 920, "user_id": 8108125, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d73c63113cdabd2357f32a9808bd0559?s=128&d=identicon&r=PG&f=1", "display_name": "Cpp plus 1", "link": "https://stackoverflow.com/users/8108125/cpp-plus-1"}, "edited": false, "score": 0, "creation_date": 1510101427, "post_id": 47169402, "comment_id": 81289176, "body": "Tem Stack Overflow em Portuguese tabem se voce quiser."}, {"owner": {"reputation": 11, "user_id": 8903147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d21e828224f88f2c59610c6bb07739a?s=128&d=identicon&r=PG&f=1", "display_name": "Eddie", "link": "https://stackoverflow.com/users/8903147/eddie"}, "reply_to_user": {"reputation": 5010, "user_id": 3150445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bfca2588483eadf6695a120cbcef1f8?s=128&d=identicon&r=PG&f=1", "display_name": "jwdonahue", "link": "https://stackoverflow.com/users/3150445/jwdonahue"}, "edited": false, "score": 0, "creation_date": 1510101516, "post_id": 47169402, "comment_id": 81289203, "body": "@jwdonahue sorry, I was kidding but already deleted. :)"}, {"owner": {"reputation": 5010, "user_id": 3150445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bfca2588483eadf6695a120cbcef1f8?s=128&d=identicon&r=PG&f=1", "display_name": "jwdonahue", "link": "https://stackoverflow.com/users/3150445/jwdonahue"}, "edited": false, "score": 0, "creation_date": 1510102869, "post_id": 47169402, "comment_id": 81289531, "body": "@Eddie, no worries, just keep in mind that SO != facebook."}, {"owner": {"reputation": 11, "user_id": 8903147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d21e828224f88f2c59610c6bb07739a?s=128&d=identicon&r=PG&f=1", "display_name": "Eddie", "link": "https://stackoverflow.com/users/8903147/eddie"}, "edited": false, "score": 0, "creation_date": 1510103819, "post_id": 47169402, "comment_id": 81289756, "body": "Of course! You&#39;re right!"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 8903147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d21e828224f88f2c59610c6bb07739a?s=128&d=identicon&r=PG&f=1", "display_name": "Eddie", "link": "https://stackoverflow.com/users/8903147/eddie"}, "edited": false, "score": 0, "creation_date": 1510103721, "post_id": 47169684, "comment_id": 81289729, "body": "Guys, thanks a lot for your replies, now my code is doing great!"}], "tags": [], "owner": {"reputation": 5010, "user_id": 3150445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bfca2588483eadf6695a120cbcef1f8?s=128&d=identicon&r=PG&f=1", "display_name": "jwdonahue", "link": "https://stackoverflow.com/users/3150445/jwdonahue"}, "is_accepted": true, "score": 1, "last_activity_date": 1510102733, "last_edit_date": 1510102733, "creation_date": 1510101220, "answer_id": 47169684, "question_id": 47169402, "link": "https://stackoverflow.com/questions/47169402/undefined-reference-to-pesquisar-bin/47169684#47169684", "title": "Undefined reference to pesquisar_bin", "body": "<p>Your declaration and use of <code>pesquisar_bin</code>, does not match your implementation. As @JMichelB points out, <code>vetor</code> is declared to be an <code>int</code> and you pass it an <code>int</code> when calling <code>pesquisar_bin</code>, but your implementation defines <code>vetor</code> as an <code>int[]</code>. In the absence of an <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a>, that's the best we can surmise at this point in time.</p>\n\n<p>Your implementation of <code>pesquisar_bin</code> is ignoring the <code>vetor</code> parameter and using the <code>vet</code> variable from file scope instead.  The code is a mess due to your thrashing about and not actually posting an <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a>.  Pass <code>vet</code> to <code>pesquisar_bin</code> and change the implementation to use the vetor parameter.</p>\n"}], "owner": {"reputation": 11, "user_id": 8903147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d21e828224f88f2c59610c6bb07739a?s=128&d=identicon&r=PG&f=1", "display_name": "Eddie", "link": "https://stackoverflow.com/users/8903147/eddie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 47169684, "answer_count": 1, "score": 0, "last_activity_date": 1510102733, "creation_date": 1510099239, "question_id": 47169402, "link": "https://stackoverflow.com/questions/47169402/undefined-reference-to-pesquisar-bin", "title": "Undefined reference to pesquisar_bin", "body": "<pre><code>//Ordenacao por insercao/selecao\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;conio.h&gt;\n#include &lt;ctype.h&gt;\n\n\nint vet[10]={8,16,34,13,19,7,45,3,12,9},a,b,aux;\n\nvoid selecao();\nint pesquisar_bin(int,int,int,int);\n\nint main (){\n    int opt=0,num,max;\n    char continuar;\n\n    printf(\"ESCOLHA O METODO DE ORDENACAO:\\n\\\n    1- INSERCAO\\n\\\n    2- SELECAO\\n\\\n    3- SAIR\\n\");\n    do{\n        scanf(\"%d\",&amp;opt);\n    }while(opt!=1 &amp;&amp; opt!=2 &amp;&amp; opt!=3);\n\n    switch(opt){\n        case 1:\n            break;\n        case 2:\n            selecao();\n            break;\n        case 3:\n            exit(1);\n            break;\n    }\n\n    printf(\"\\n\\n1- PESQUISA SEQUENCIAL\\n\\n\\\n2- PESQUISA BINARIA\\n\");\n    do{\n        aux=0;\n        scanf(\"%d\",&amp;aux);\n    }while(aux!=1&amp;&amp;aux!=2);\n\n    printf(\"DIGITE O VALOR A SER PESQUISADO:\\n\");\n    scanf(\"%d\",&amp;num);\n\n    else if(aux==2){\n        max=sizeof(vet)/sizeof(int);\n        pesquisar_bin(vet[max],0,max,num);\n    }\n}\n\n//ORDENACAO POR SELECAO\n\nvoid selecao(){\n\n    int i=1;\n\n    do{\n        b=0;\n\n        for (a=0;a&lt;9;a++){\n            if(vet[a+1]&lt;vet[a]){\n                aux=vet[a];\n                vet[a]=vet[a+1];\n                vet[a+1]=aux;\n                b=1;\n            }\n        }\n\n        if(b==1){\n            printf(\"Fase %d: [\",i);\n            for(a=0;a&lt;10;a++){\n                printf(\"%d \",vet[a]);\n            }\n            printf(\"]\\n\\n\");\n\n            i++;\n        }\n\n    }while(b==1);\n}\n\n\n//PESQUISA BINARIA\n\nint pesquisar_bin(int vetor[],int ini,int fim,int numero){\n\n    int pos;\n\n    pos=((fim-ini)/2)+ini;\n\n    if (ini&gt;fim){\n        printf(\"Valor %d nao encontrado no vetor\\n\",numero);\n        return 0;\n    }\n\n    if(numero&gt;vet[pos]){\n        return (pesquisar_bin(vet,pos+1,fim,numero));   \n    }\n    else if(numero&lt;vet[pos]){\n        return (pesquisar_bin(vet,ini,pos-1,numero));\n    }\n    else if(numero==vet[pos]){\n        printf(\"O valor %d se encontra na posicao %d do vetor.\",numero,pos);\n        return 0;\n    }\n}\n</code></pre>\n\n<p>I've been doing some exercises of C but I really don't understand why dev C++ is returning this error.</p>\n\n<p>I already tried to do many things like to change the reference including a point and other things.</p>\n\n<blockquote>\n  <p>C:\\Users\\ANONYM~1\\AppData\\Local\\Temp\\ccguUdp9.o   ordenacao.cpp:(.text+0x128):\n  undefined reference to `pesquisar_bin(int, int, int, int)'</p>\n  \n  <p>\\Mac\\Home\\Desktop\\EXERCICIOS ED\\collect2.exe [Error] ld returned 1\n  exit status</p>\n</blockquote>\n"}, {"tags": ["c", "loops", "optimization"], "comments": [{"owner": {"reputation": 5057, "user_id": 3857384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e181c74d4ce8efe7af7581c17af1e03?s=128&d=identicon&r=PG&f=1", "display_name": "TimBrownlaw", "link": "https://stackoverflow.com/users/3857384/timbrownlaw"}, "edited": false, "score": 0, "creation_date": 1510099131, "post_id": 47169355, "comment_id": 81288608, "body": "Look at using &quot;switch - case&quot;"}, {"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 2, "creation_date": 1510099922, "post_id": 47169355, "comment_id": 81288795, "body": "looks like you are special casing the first and last iterations of the loops... you should be able to change the loop test and initialization, and just use the else part of the statement inside the loops."}, {"owner": {"reputation": 5010, "user_id": 3150445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bfca2588483eadf6695a120cbcef1f8?s=128&d=identicon&r=PG&f=1", "display_name": "jwdonahue", "link": "https://stackoverflow.com/users/3150445/jwdonahue"}, "edited": false, "score": 0, "creation_date": 1510100162, "post_id": 47169355, "comment_id": 81288865, "body": "It would be helpful if you would properly indent your code."}, {"owner": {"reputation": 42504, "user_id": 1161878, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0157ddd785dc01e95342e3661d34b42a?s=128&d=identicon&r=PG", "display_name": "Gene", "link": "https://stackoverflow.com/users/1161878/gene"}, "edited": false, "score": 0, "creation_date": 1510105160, "post_id": 47169355, "comment_id": 81290051, "body": "Chances are pretty good that a decent compiler, e.g.  a late version of gcc, will take care of this for you."}, {"owner": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "reply_to_user": {"reputation": 42504, "user_id": 1161878, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0157ddd785dc01e95342e3661d34b42a?s=128&d=identicon&r=PG", "display_name": "Gene", "link": "https://stackoverflow.com/users/1161878/gene"}, "edited": false, "score": 0, "creation_date": 1510107229, "post_id": 47169355, "comment_id": 81290555, "body": "@Gene, I didn&#39;t see a whole lot of optimization with -O2 on gcc 7.2.0.  The special casing version reduced the running time by 31% on my machine over the OPs version.  With -O3 I saw a 73% reduction in the running time.  This surprised me."}], "answers": [{"comments": [{"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 1, "creation_date": 1510101026, "post_id": 47169537, "comment_id": 81289076, "body": "This may reduce the code size, but it will probably run slower than the original due to the addition of all of the remainder operations (which are essentially divides)."}, {"owner": {"reputation": 1765, "user_id": 8524503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HXxXM.png?s=128&g=1", "display_name": "Abhijith Asokan", "link": "https://stackoverflow.com/users/8524503/abhijith-asokan"}, "reply_to_user": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1510101062, "post_id": 47169537, "comment_id": 81289086, "body": "yeah.. i agree."}, {"owner": {"reputation": 920, "user_id": 8108125, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d73c63113cdabd2357f32a9808bd0559?s=128&d=identicon&r=PG&f=1", "display_name": "Cpp plus 1", "link": "https://stackoverflow.com/users/8108125/cpp-plus-1"}, "reply_to_user": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1510102334, "post_id": 47169537, "comment_id": 81289382, "body": "@TomKarzes But isn&#39;t a conditional jump one of the slowest things for a computer to do nowadays?"}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "reply_to_user": {"reputation": 920, "user_id": 8108125, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d73c63113cdabd2357f32a9808bd0559?s=128&d=identicon&r=PG&f=1", "display_name": "Cpp plus 1", "link": "https://stackoverflow.com/users/8108125/cpp-plus-1"}, "edited": false, "score": 1, "creation_date": 1510103791, "post_id": 47169537, "comment_id": 81289744, "body": "@Cppplus1 It depends on the processor, but I suspect division is slower on most machines, especially multiple divisions."}, {"owner": {"reputation": 923, "user_id": 6232717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a71e841a05cc4408b404170fc4b50e4?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey Cash", "link": "https://stackoverflow.com/users/6232717/jeffrey-cash"}, "edited": false, "score": 1, "creation_date": 1510105190, "post_id": 47169537, "comment_id": 81290062, "body": "If <code>Nx</code> and <code>Ny</code> are both hard-coded powers of 2, then this code will most likely be much faster than the conditionally branching code. If not, it depends on the architecture."}], "tags": [], "owner": {"reputation": 1765, "user_id": 8524503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HXxXM.png?s=128&g=1", "display_name": "Abhijith Asokan", "link": "https://stackoverflow.com/users/8524503/abhijith-asokan"}, "is_accepted": false, "score": 1, "last_activity_date": 1510101419, "last_edit_date": 1510101419, "creation_date": 1510100249, "answer_id": 47169537, "question_id": 47169355, "link": "https://stackoverflow.com/questions/47169355/removing-if-statement-from-loop/47169537#47169537", "title": "Removing if statement from loop", "body": "<pre><code>for(ix=0;ix&lt;Nx;ix++) {\n    for(iy=0;iy&lt;Ny;iy++) {\n\n        pudx = (u[(ix+1)%Nx][iy] + u[(Nx+ix-1)%Nx][iy] - 2.0*u[ix][iy])*(calc1); \n        pudy = (u[ix][(iy+1)%Ny] + u[ix][(Ny+iy-1)%Ny] - 2.0*u[ix][iy])*(calc2);\n\n        u_new[ix][iy] = 2.0*u[ix][iy] - u_old[ix][iy] + calc*(pudx+pudy);\n    }\n}\n</code></pre>\n\n<p>This is not an optimization. It just removes the if conditions as you asked for.</p>\n"}, {"comments": [{"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1510104839, "post_id": 47170097, "comment_id": 81289985, "body": "Those PUD macro bodies need to be wrapped in parentheses.  As it is, in the context in which they&#39;re used, they are implicitly relying on the fact that multiplication binds more tightly than addition."}, {"owner": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "edited": false, "score": 0, "creation_date": 1510107684, "post_id": 47170097, "comment_id": 81290664, "body": "You have a few semicolons missing.  Otherwise, I like the macros.  :)"}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "reply_to_user": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "edited": false, "score": 0, "creation_date": 1510109797, "post_id": 47170097, "comment_id": 81291240, "body": "@MFisherKDX Except they are unguarded.  Never write an expression macro as <code>(a)*(b)</code>.  <i>Always</i> wrap it in parentheses, as <code>((a)*(b))</code>.  That way there is no risk of unintended associations after expansion."}, {"owner": {"reputation": 119, "user_id": 7450435, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5f595e355863a24ba91778ae97d563c8?s=128&d=identicon&r=PG&f=1", "display_name": "Will C", "link": "https://stackoverflow.com/users/7450435/will-c"}, "edited": false, "score": 0, "creation_date": 1510132875, "post_id": 47170097, "comment_id": 81300624, "body": "I am getting a segmentation fault, can&#39;t figure out why"}, {"owner": {"user_type": "does_not_exist", "display_name": "user539810"}, "reply_to_user": {"reputation": 119, "user_id": 7450435, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5f595e355863a24ba91778ae97d563c8?s=128&d=identicon&r=PG&f=1", "display_name": "Will C", "link": "https://stackoverflow.com/users/7450435/will-c"}, "edited": false, "score": 0, "creation_date": 1510179818, "post_id": 47170097, "comment_id": 81330848, "body": "@WillC Sorry you&#39;re having trouble. The only thing I did was lift the case-specific calculations out of the loops. It was a simple copy and paste operation of your calculation lines. The macros simply allowed me to make it semi-readable, and I just double-checked that the proper args are passed to the <code>UNEW</code> macro. Where does it segfault?"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user539810"}, "is_accepted": false, "score": 1, "last_activity_date": 1510139578, "last_edit_date": 1510139578, "creation_date": 1510104399, "answer_id": 47170097, "question_id": 47169355, "link": "https://stackoverflow.com/questions/47169355/removing-if-statement-from-loop/47170097#47170097", "title": "Removing if statement from loop", "body": "<p>Here's a simple solution: take the <code>if</code> stuff out of the loops and make them more explicit. It's longer, but it saves you from potentially time-consuming branches and modulo/division calculations. I used preprocessor macros to keep things a bit cleaner and reduce the chance of copy-paste errors. The macros should be localized to the relevant code, else variables like <code>calc1</code> and <code>u_old</code> will result in compilation errors. Basically, you could replace your loops in question with the following code:</p>\n\n<pre><code>#define PUDX0 ((u[1][iy] + u[Nx-1][iy] - 2.0*u[0][iy])*(calc1))\n#define PUDX ((u[ix+1][iy] + u[ix-1][iy] - 2.0*u[ix][iy])*(calc1))\n#define PUDXN ((u[0][iy] + u[Nx-2][iy] - 2.0*u[Nx-1][iy])*(calc1))\n\n#define PUDY0 ((u[ix][1] + u[ix][Ny-1] - 2.0*u[ix][0])*(calc2))\n#define PUDY ((u[ix][iy+1] + u[ix][iy-1] - 2.0*u[ix][iy])*(calc2))\n#define PUDYN ((u[ix][0] + u[ix][Ny-2] - 2.0*u[ix][Ny-1])*(calc2))\n\n#define UNEW(x, y, pudx, pudy) u_new[x][y] = 2.0*u[x][y] - u_old[x][y] + calc*(pudx+pudy)\n\n// ix = 0, iy = [0..Ny-1]\nUNEW(0, 0, PUDX0, PUDY0);\nfor (iy=1; iy &lt; Ny-1; iy++) {\n    UNEW(0, iy, PUDX0, PUDY);\n}\nUNEW(0, iy, PUDX0, PUDYN);\n\n// ix = [1..Nx-1], iy = Ny-1\nfor (ix=1; ix &lt; Nx-1; ix++) {\n    UNEW(ix, iy, PUDX, PUDYN);\n}\nUNEW(ix, iy, PUDXN, PUDYN);\n\n// ix = Nx-1, iy = [0..Ny-2]\nUNEW(ix, 0, PUDXN, PUDY0);\nfor (iy=1; iy &lt; Ny-1; iy++) {\n    UNEW(ix, iy, PUDXN, PUDY);\n}\n\n// ix = [1..Nx-2], iy = 0\nfor (ix=1; ix &lt; Nx-1; ix++) {\n    UNEW(ix, 0, PUDX, PUDY0);\n}\n\n// ix = [1..Nx-2], iy = [1..Ny-2]\nfor (ix=1; ix &lt; Nx-1; ix++) {\n    for (iy=1; iy &lt; Ny-1; iy++) {\n        UNEW(ix, iy, PUDX, PUDY);\n    }\n}\n\n#undef UNEW\n#undef PUDYN\n#undef PUDY\n#undef PUDY0\n#undef PUDXN\n#undef PUDX\n#undef PUDX0\n</code></pre>\n\n<p>This, however, is obviously intended for a computer to process, not for a human to read and later modify. The macros and comments are also an attempt to help a human should changes be required later. Unless there is a drastic performance issue in the original bit of code, I'd personally prefer the original loops with branching statements. It may be slower, but it's a lot easier to debug if necessary!</p>\n"}, {"tags": [], "owner": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "is_accepted": false, "score": 1, "last_activity_date": 1510107623, "last_edit_date": 1510107623, "creation_date": 1510105129, "answer_id": 47170198, "question_id": 47169355, "link": "https://stackoverflow.com/questions/47169355/removing-if-statement-from-loop/47170198#47170198", "title": "Removing if statement from loop", "body": "<p>I rewrote in terms of \"prologue, main loop, epilogue\" semantics.</p>\n\n<pre><code>void update_u_new(double **u_new, double **u, double **u_old, int ix, int iy, double calc, double pudx, double pudy)\n{\n    u_new[ix][iy] = 2.0*u[ix][iy] - u_old[ix][iy] + calc*(pudx+pudy);   \n}\n\n//iterates iy=1 to Ny-1\nvoid main_loop_iy(double **u, double **u_new, double **u_old, int ix, int Ny, double pudx, double calc2, double calc)\n{\n    int iy;\n    for(iy=1; iy&lt;Ny-1; ++iy)\n    {\n        double pudy = (u[ix][iy+1] + u[ix][iy-1] - 2.0*u[ix][iy])*(calc2);  \n        update_u_new(u_new, u, u_old, ix, iy, calc, pudx, pudy); \n    }\n}\n\nvoid do_iy_given_ux(double **u, double **u_new, double **u_old, double *ux_m1, double *ux, double *ux_p1, int ix, int Ny, double calc1, double calc2, double calc)\n{\n    //prologue iy=0\n    int iy=0;\n    double pudx = (ux_p1[iy] + ux_m1[iy] - 2.0*ux[iy])*(calc1); \n    double pudy = (u[ix][1] + u[ix][Ny-1] - 2.0*u[ix][0])*(calc2);\n    update_u_new(u_new, u, u_old, ix, iy, calc, pudx, pudy); \n\n    //main loop 1 &lt;= iy &lt; Ny-1\n    main_loop_iy(u, u_new, u_old, ix, Ny, pudx, calc2, calc);\n\n    //epilogue, iy = Ny-1\n    iy = Ny-1;   \n    pudy = (u[ix][0] + u[ix][Ny-2] - 2.0*u[ix][Ny-1])*(calc2); \n    update_u_new(u_new, u, u_old, ix, iy, calc, pudx, pudy); \n}\n\n//assumes ix=0\nvoid do_iy_ix0(double **u, double **u_new, double **u_old, int Nx, int Ny, double calc1, double calc2, double calc)\n{\n    int ix=0;\n    do_iy_given_ux(u, u_new, u_old, u[Nx-1], u[ix], u[ix+1], ix, Ny, calc1, calc2, calc);\n}\n\n//assumes ix=1 to Nx-1\nvoid do_iy_given_ix_main_loop(double **u, double **u_new, double **u_old, int ix, int Ny, double calc1, double calc2, double calc)\n{\n    do_iy_given_ux(u, u_new, u_old, u[ix-1], u[ix], u[ix+1], ix, Ny, calc1, calc2, calc);\n}\n\n//assumes ix=Nx-1\nvoid do_iy_ixNm1(double **u, double **u_new, double **u_old, int Nx, int Ny, double calc1, double calc2, double calc)\n{\n    int ix = Nx-1;\n    do_iy_given_ux(u, u_new, u_old, u[0], u[ix], u[ix-1], ix, Ny, calc1, calc2, calc);\n}\n\nint do_it(double **u, double **u_new, double **u_old, int Nx, int Ny, double calc, double calc1, double calc2)\n{\n    int ix = 0;\n\n    //prologue ix=0\n    do_iy_ix0(u, u_new, u_old, Nx, Ny, calc1, calc2, calc);\n\n    //main loop on 1 &lt;= ix &lt; Nx-1\n    for(ix=1; ix&lt;Nx-1; ++ix)\n    {\n        do_iy_given_ix_main_loop(u, u_new, u_old, ix, Ny, calc1, calc2, calc);\n    }\n\n    //epilogue on ix = Nx-1\n    do_iy_ixNm1(u, u_new, u_old, Nx, Ny, calc1, calc2, calc);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 119, "user_id": 7450435, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5f595e355863a24ba91778ae97d563c8?s=128&d=identicon&r=PG&f=1", "display_name": "Will C", "link": "https://stackoverflow.com/users/7450435/will-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "closed_date": 1510135018, "answer_count": 3, "score": 0, "last_activity_date": 1510139578, "creation_date": 1510098957, "last_edit_date": 1510105066, "question_id": 47169355, "link": "https://stackoverflow.com/questions/47169355/removing-if-statement-from-loop", "closed_reason": "Duplicate", "title": "Removing if statement from loop", "body": "<p>I have the following loop in C that I am trying to remove the if statements from, so that they are not checked each iteration. I am struggling to do this however. Does anyone have any suggestions on how I can get them out?</p>\n\n<pre><code>for(ix=0;ix&lt;Nx;ix++) {\n  for(iy=0;iy&lt;Ny;iy++) {\n    if (ix==0) {\n      pudx = (u[1][iy] + u[Nx-1][iy] - 2.0*u[0][iy])*(calc1);   \n    } else if (ix==Nx-1) {\n      pudx = (u[0][iy] + u[Nx-2][iy] - 2.0*u[Nx-1][iy])*(calc1);  \n    } else {\n      pudx = (u[ix+1][iy] + u[ix-1][iy] - 2.0*u[ix][iy])*(calc1);\n    }\n    if (iy==0) {\n      pudy = (u[ix][1] + u[ix][Ny-1] - 2.0*u[ix][0])*(calc2);    \n    } else if (iy==Ny-1) {\n      pudy = (u[ix][0] + u[ix][Ny-2] - 2.0*u[ix][Ny-1])*(calc2);   \n    } else {\n      pudy = (u[ix][iy+1] + u[ix][iy-1] - 2.0*u[ix][iy])*(calc2);\n    }\n    u_new[ix][iy] = 2.0*u[ix][iy] - u_old[ix][iy] + calc*(pudx+pudy);\n  }\n}\n</code></pre>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1510096252, "post_id": 47168903, "comment_id": 81287777, "body": "Please provide a <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1510096397, "post_id": 47168903, "comment_id": 81287820, "body": "You are exceeding the bounds of your array (amongst other problems)"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1510096609, "post_id": 47168903, "comment_id": 81287891, "body": "<a href=\"https://stackoverflow.com/questions/5431941\">while(!feof(fp)) is always wrong</a>"}, {"owner": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "edited": false, "score": 0, "creation_date": 1510096669, "post_id": 47168903, "comment_id": 81287906, "body": "lots of problems here.  <code>scanf(&quot;%s&quot;, &amp;choice);</code> --&gt; <code>choice</code> is a <code>char</code> so this isn&#39;t going to work with <code>%s</code>. This is wrong --&gt; <code>(!feof (fp))</code>.  Will cause you to read one too many times."}, {"owner": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "edited": false, "score": 0, "creation_date": 1510098154, "post_id": 47168903, "comment_id": 81288354, "body": "This output doesn&#39;t make sense with your edited code.  Can you re-post your output?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1510116855, "post_id": 47168903, "comment_id": 81293182, "body": "<code>scanf(&quot;%s&quot;, &amp;choice);</code> --&gt; <code>scanf(&quot; %c&quot;, &amp;choice);</code>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1510117490, "post_id": 47168903, "comment_id": 81293351, "body": "fix like <a href=\"https://wandbox.org/permlink/kRVS0uXlFXCxromW\" rel=\"nofollow noreferrer\">this</a>"}], "answers": [{"tags": [], "owner": {"reputation": 331, "user_id": 8902785, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-B1H0GeRlI4c/AAAAAAAAAAI/AAAAAAAABZY/qiTZOYLEe-0/photo.jpg?sz=128", "display_name": "Elad Hazan", "link": "https://stackoverflow.com/users/8902785/elad-hazan"}, "is_accepted": false, "score": 0, "last_activity_date": 1510123876, "creation_date": 1510123876, "answer_id": 47173299, "question_id": 47168903, "link": "https://stackoverflow.com/questions/47168903/array-changing-when-being-passed-as-parameter/47173299#47173299", "title": "Array changing when being passed as parameter", "body": "<p>That's the correct way to read from a file:\nwhile (fread(&amp;data[i], sizeof(int), 1, fp));</p>\n"}, {"tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": true, "score": 1, "last_activity_date": 1510124443, "last_edit_date": 1510124443, "creation_date": 1510123943, "answer_id": 47173315, "question_id": 47168903, "link": "https://stackoverflow.com/questions/47168903/array-changing-when-being-passed-as-parameter/47173315#47173315", "title": "Array changing when being passed as parameter", "body": "<p>You have a large number of small errors. (addressed in the comments in the code). Your primary problem is understanding where and how to declare <code>data</code> and how to go about getting values from your file into <code>data</code> as part of your menu system. While you can declare your array <code>data</code> in your <code>userinterface</code> function, in general you will want to declare your variables in <code>main()</code> (or the calling function) and then pass them as parameters (properly qualified) to any function that will need them.</p>\n\n<p>As part of the misconception of how to fill <code>data</code> you have a <code>void dataTxtFunctions()</code> that is more or less randomly floating around in your code, not attached anywhere. The name also suggests a large:</p>\n\n<p><em>\"I don't know what I'm going to do with this thing, so I'll call it some generic <code>dataTxtFunctions</code> and hope it works itself out somehow?\"</em></p>\n\n<p>(<strong>note:</strong> that approach to coding never works out...)</p>\n\n<p>What you need is a <code>readdata</code> function to prompt for a filename, open and validate the file, and then read integers from the file, providing a meaningful return of the number of integers read (or <code>0</code> indicating failure). That way you could create a <code>\" r) Read data from file\\n\"</code> menu entry to handle those operations. </p>\n\n<p>(do not hardcode values or names (e.g. <code>data.txt</code>) in your code, <em>magic numbers</em> and <em>magic strings</em> limit the usefulness of your code and make it hard to maintain)</p>\n\n<p>The remainder of the suggestions are provide in comments below. The following example can be used with your <code>data.txt</code> (I used the first 22 values you show in your question as the input file below). If I understood what you were trying to accomplish, you could do something like the following:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;limits.h&gt;\n\n#define MAXN 256    /* if you need a constant, define one */\n                    /* don't skimp on array sizes */\n\n/* empty any characters that remain in stdin -- following scanf */\nvoid empty_stdin()\n{\n    for (int c = getchar(); c != '\\n' &amp;&amp; c != EOF; c = getchar()) {}\n}\n\n/* print values in data (both data and number of values are const) */\nvoid printdata (const int *data, const size_t n)\n{\n    for (size_t i = 0; i &lt; n; i++)\n        printf (\"data[%3zu]: %d\\n\", i, data[i]);\n}\n\n/* find/return max value in data (data and n are const) */\nint findmaxdatavalue (const int *data, const size_t n)\n{\n    int max = INT_MIN;      /* use INT_MIN from limits.h */\n\n    for (size_t i = 0; i &lt; n; i++)\n        if (data[i] &gt; max)\n            max = data[i];\n\n    return max;     /* provide a return to gauge success/failure */\n}\n\n/* prompt for filename, read up to max values from file.\n * returns number of values read (0 indicates failure).\n */\nsize_t readdata (int *data, size_t max) \n{\n    int tmp;                    /* temporary value to validate read */\n    char filenm[PATH_MAX] = \"\"; /* buffer to hold filename */\n    FILE *fp = NULL;            /* FILE stream pointer */\n    size_t n = 0;               /* number of values read */\n\n    for (;;) {      /* loop until valid filename provided or EOF */\n        int rtn;\n\n        printf (\"\\nenter filename: \");\n        /* if EOF, user canceled with ctrl+d (ctrl+z on windoze) */\n        if ((rtn = scanf (\"%[^\\n]\", filenm)) == EOF)\n            return 0;\n        empty_stdin(); /* remove '\\n' (or can chars beyond PATH_MAX) */\n\n        if (rtn == 1)  /* if return 1, good string in filenm */\n            break;\n        /* otherwise, handle error */\n        fprintf (stderr, \"error: invalid input - filename.\\n\");\n    }\n\n    if (!(fp = fopen (filenm, \"r\"))) {  /* validate open */\n        fprintf (stderr, \"error: file open failed '%s'\\n\", filenm);\n        return 0;\n    }\n\n    /* read up to 'max' values from file */\n    while (n &lt; max &amp;&amp; fscanf (fp, \"%d\", &amp;tmp) == 1)\n        data[n++] = tmp;\n\n    fclose (fp);\n\n    return n;   /* return number of integers read */\n}\n\nvoid userinterface (int *data, size_t *n, size_t max)\n{\n    while (1) {     /* loop continually */\n\n        char choice = 0;\n        int rtn;    /* you only need 1 printf */\n        printf (\"\\n r) Read data from file\\n\"\n                \" a) Print out the values\\n\"\n                \" b) Find the maximum Value\\n\"\n                \" c) Calculate the RMS (root mean square)\\n\"\n                \" d) Count the number of negative values\\n\"\n                \" e) Exit Back to Main Menu\\n\\n\"\n                \"Enter selection: \");\n\n        if ((rtn = scanf (\"%c\", &amp;choice)) == EOF)\n            return;\n        empty_stdin();      /* empty '\\n' (and any other chars) */\n\n        if (rtn != 1 || /* validate return and proper choice */\n            (choice != 'r' &amp;&amp; (choice &lt; 'a' || 'e' &lt; choice))) {\n            fprintf (stderr, \"error: invalid input - choice.\\n\");\n            continue;   /* on bad choice, redisplay menu */\n        }\n\n        if (!*n &amp;&amp; choice &lt; 'e') {  /* if no data, only 'e' or 'r' valid */\n            fprintf (stderr, \"error: data is empty.\\n\");\n            continue;   /* data empty, redisplay menu */\n        }\n\n        switch (choice) {   /* handle choice */\n            case 'a':\n                printdata (data, *n);\n                break;\n            case 'b':\n                printf (\"max value: %d\\n\", findmaxdatavalue (data, *n));\n                break;\n            case 'c':\n                fprintf (stderr, \"RMS not yet implemented.\\n\");\n                break;\n            case 'd':\n                fprintf (stderr, \"Negative count not yet implemented.\\n\");\n                break;\n            case 'e':\n                return;\n                break;\n            case 'r':   /* read data, handle error, warn if max values read */\n                if (!(*n = readdata (data, max)))\n                    fprintf (stderr, \"error: nothing read from file.\\n\");\n                else if (*n == max)\n                    fprintf (stderr, \"warning: data is full.\\n\");\n                break;\n            default : fprintf (stderr, \"error: something wrong with switch.\\n\");\n                break;\n        }\n    }\n}\n\nint main (void) {\n\n    int data[MAXN] = {0};   /* declare values in main() */\n    size_t max = MAXN,\n        n = 0;\n\n    userinterface (data, &amp;n, max);  /* pass to userinterface */\n\n    printf (\"\\nsuccessfully processed '%zu' integers from file.\\n\", n);\n\n    return 0;\n}\n</code></pre>\n\n<p>Also, note on style, C generally avoid <em>camelCase</em> and <em>MixedCase</em> names, instead using all lowercase names for variables and functions reserving uppercase for constants and macros. Since it is style, it is completely up to you, but it does say something about your code.</p>\n\n<p><strong>Example Use/Output</strong></p>\n\n<pre><code>$ ./bin/menureadint\n\n r) Read data from file\n a) Print out the values\n b) Find the maximum Value\n c) Calculate the RMS (root mean square)\n d) Count the number of negative values\n e) Exit Back to Main Menu\n\nEnter selection: a\nerror: data is empty.\n\n ... &lt;menu - snip&gt;\n\nEnter selection: z\nerror: invalid input - choice.\n\n ... &lt;menu - snip&gt;\n\nEnter selection: r\n\nenter filename: dat/intvalues.txt\n\n ... &lt;menu - snip&gt;\n\nEnter selection: a\ndata[  0]: 1\ndata[  1]: 6\ndata[  2]: 4\ndata[  3]: 5\ndata[  4]: 5\ndata[  5]: 9\ndata[  6]: 12\ndata[  7]: 14\ndata[  8]: 15\ndata[  9]: -17\ndata[ 10]: -19\ndata[ 11]: 21\ndata[ 12]: -23\ndata[ 13]: 0\ndata[ 14]: 37\ndata[ 15]: 0\ndata[ 16]: -31\ndata[ 17]: 32\ndata[ 18]: 34\ndata[ 19]: -37\ndata[ 20]: -39\ndata[ 21]: 0\n\n ... &lt;menu - snip&gt;\n\nEnter selection: b\nmax value: 37\n\n ... &lt;menu - snip&gt;\n\nEnter selection: c\nRMS not yet implemented.\n\n ... &lt;menu - snip&gt;\n\nEnter selection: e\n\nsuccessfully processed '22' integers from file.\n</code></pre>\n\n<p>Look things over and let me know if you have further questions.</p>\n"}], "owner": {"reputation": 395, "user_id": 5684848, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/45ad4ca07923b97c2b66c1a76a8820df?s=128&d=identicon&r=PG&f=1", "display_name": "John Hamlett IV", "link": "https://stackoverflow.com/users/5684848/john-hamlett-iv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 47173315, "answer_count": 2, "score": -1, "last_activity_date": 1510124443, "creation_date": 1510096049, "last_edit_date": 1510117065, "question_id": 47168903, "link": "https://stackoverflow.com/questions/47168903/array-changing-when-being-passed-as-parameter", "title": "Array changing when being passed as parameter", "body": "<p>I am trying to read both negative and positive numbers from a file into an array.</p>\n\n<p>Here is my code</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;string.h&gt;\n\nvoid printData(int data[]) {\n  for (int i = 0; i &lt; 21; i++) {\n    printf(\"%d\\n\", data[i]);\n  }\n}\n\nvoid findMaximumDataValue(int data[]) {\n  int max = -INFINITY;\n  for (int i = 0; i &lt; 21; i++) {\n    if (data[i] &gt; max) {\n      max = data[i];\n    }\n  }\n  printf(\"The maximum value in the file is: %d\\n\", max);\n}\n\nvoid userInterface(int data[]) {\n  while(1) {\n    char choice;\n    printf(\"a) Print out the values\\n\");\n    printf(\"b) Find the maximum Value\\n\");\n    printf(\"c) Calculate the RMS (root mean square)\\n\");\n    printf(\"d) Count the number of negative values\\n\");\n    printf(\"e) Exit Back to Main Menu\\n\");\n    printf(\"Enter selection: \");\n    scanf(\"%s\", &amp;choice);\n    printf(\" %c\", choice);\n    switch (choice) {\n      case 'a': {\n        printData(data);\n        break;\n      }\n      case 'b': {\n        findMaximumDataValue(data);\n        break;\n      }\n      case 'e': {\n        return;\n      }\n    }\n  }\n}\n\nvoid dataTxtFunctions() {\n  FILE* fp;\n  int data[21];\n  // Failed to open file\n  if ( !(fp = fopen(\"data.txt\", \"r\")) ) {\n    printf(\"%s\\n\", strerror(errno));\n    return;\n  }\n  for (int i = 0; i &lt; 21; i++) {\n    fscanf (fp, \"%d\", &amp;data[i]);\n  }\n  fclose(fp);\n  userInterface(data);\n}\n\n\nint main() {\n  dataTxtFunctions();\n\n}\n</code></pre>\n\n<p>When I run this code against my data.txt I get</p>\n\n<pre><code>1\n6\n4\n5\n5\n9\n12\n14\n15\n-17\n-19\n21\n-23\n0\n37\n0\n-31\n32\n34\n-37\n-39\n0\n</code></pre>\n\n\n\n<pre><code>a) Print out the values\nb) Find the maximum Value\nc) Calculate the RMS (root mean square)\nd) Count the number of negative values\ne) Exit Back to Main Menu\nEnter selection: a\na0\n0\n0\n0\n0\n0\n0\n0\n192327\n0\n0\n0\n8\n48\n1497598080\n32767\n1\n6\n4\n5\n5\n</code></pre>\n\n<p>The first part, before the menu is displaying the correct values from the file, however, when the selection is made and the array is passed the data changed.</p>\n\n<p>Why is that?</p>\n"}, {"tags": ["c", "arrays", "string", "pointers"], "comments": [{"owner": {"reputation": 613, "user_id": 3112926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b33809c5d0f78b110e8613c9e5972dd5?s=128&d=identicon&r=PG&f=1", "display_name": "JGroven", "link": "https://stackoverflow.com/users/3112926/jgroven"}, "edited": false, "score": 0, "creation_date": 1510093661, "post_id": 47168449, "comment_id": 81286881, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/2346806/what-is-a-segmentation-fault\">What is a segmentation fault?</a>"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1510093785, "post_id": 47168449, "comment_id": 81286929, "body": "You have at least one memory leak, when you overwrite <code>input[0]</code>."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1510093861, "post_id": 47168449, "comment_id": 81286953, "body": "As for your problem, I recommend you take some time to read <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a> by Eric Lippert, and learn how to use a debugger to catch crashes like this."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1510093900, "post_id": 47168449, "comment_id": 81286974, "body": "A couple of hints though, your code doesn&#39;t really do what you think it does, and you pass a null pointer as destination for <code>strcat</code>."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1510093943, "post_id": 47168449, "comment_id": 81286997, "body": "And you don&#39;t need <code>strcat</code> here at all."}, {"owner": {"reputation": 31, "user_id": 8902963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82f80bf9f641b1c697106123c4510398?s=128&d=identicon&r=PG&f=1", "display_name": "Kevdor", "link": "https://stackoverflow.com/users/8902963/kevdor"}, "edited": false, "score": 0, "creation_date": 1510095383, "post_id": 47168449, "comment_id": 81287499, "body": "Would not ask here if my code did what I thought it should...As I said..my main confusion is how/what I have to pass to the function for it to actually do what I want it to do"}, {"owner": {"reputation": 2093, "user_id": 3153883, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/xVr3z.jpg?s=128&g=1", "display_name": "LawfulEvil", "link": "https://stackoverflow.com/users/3153883/lawfulevil"}, "edited": false, "score": 0, "creation_date": 1510095716, "post_id": 47168449, "comment_id": 81287612, "body": "Lots can be done.  You didn&#39;t really ask a question.   You don&#39;t show the output you get.   What have you done to fix whatever the problem is?"}, {"owner": {"reputation": 4150, "user_id": 7412986, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xOv4e.png?s=128&g=1", "display_name": "AlexP", "link": "https://stackoverflow.com/users/7412986/alexp"}, "edited": false, "score": 0, "creation_date": 1510097481, "post_id": 47168449, "comment_id": 81288157, "body": "Simple question: in <code>main()</code>, <code>dest[0]</code> (whom you call <code>*dest</code>) is a pointer to one or more characters. <i>Where is the memory for <code>dest[0]</code> allocated?</i>"}], "answers": [{"tags": [], "owner": {"reputation": 5996, "user_id": 1152524, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b2e23f3f9bf82e6fe806261f50b2f9b6?s=128&d=identicon&r=PG&f=1", "display_name": "txtechhelp", "link": "https://stackoverflow.com/users/1152524/txtechhelp"}, "is_accepted": false, "score": 2, "last_activity_date": 1510099113, "creation_date": 1510099113, "answer_id": 47169382, "question_id": 47168449, "link": "https://stackoverflow.com/questions/47168449/manipulation-array-in-function-c-segmentation-fault/47169382#47169382", "title": "Manipulation array in function - c - Segmentation fault", "body": "<p>Congrats on getting started with programming!</p>\n\n<p>To your question: there's quite a few things that could be addressed, but since there seems to be some more basic confusion and misunderstanding, I'll address what makes sense given the context of your issue.</p>\n\n<p>First, you're using <a href=\"http://www.cplusplus.com/reference/cstring/strcat/\" rel=\"nofollow noreferrer\"><code>strcat</code></a> which concatenates strings (e.g. adds to the string), when you just need simple character assignment.</p>\n\n<p>Next, you have a lot of pointers to arrays and there seems to be some confusion regarding pointers; in your main function, you don't need all of the temporary variables to do what you're wanting.</p>\n\n<p>You could have simply:</p>\n\n<pre><code>char inputstr[MAX_SIZE] = {0}; \nchar dest[MAX_SIZE] = {0};\n</code></pre>\n\n<p>You could have less (realistically) but we'll stick with the basics for now.</p>\n\n<p>Next, you're looping to get user input:</p>\n\n<pre><code>while (fgets(inputstr, max_size, stdin) != NULL)\n{\n    input[i] = strndup(inputstr, max_size);\n    strcat(temp,inputstr);\n    i++;\n}\n</code></pre>\n\n<p>Here, you don't check if <code>i</code> exceeds <code>max_size</code> which your <code>input</code> variable has been allocated for; if <code>i</code> exceeds <code>max_size</code> when you go to assign <code>input[i]</code> to the memory location returned by <code>strndup</code> (which calls <code>malloc</code>), you are writing beyond your memory bounds, which is also known as a buffer overflow. This is potentially where your segmentation fault is happening. You could also have some issues when you do <code>strcat(temp,inputstr);</code> since <code>strcat</code>:</p>\n\n<blockquote>\n  <p>Appends a copy of the source string to the destination string. The terminating null character in destination is overwritten by the first character of source, and a null-character is included at the end of the new string formed by the concatenation of both in destination.</p>\n</blockquote>\n\n<p>If you're simply just trying to get what the user entered, and print every 2nd character with your function, you don't need to loop:</p>\n\n<pre><code>if (fgets(inputstr, MAX_SIZE, stdin) != NULL) {\n    everySecondChar(dest, inputstr);\n    printf(\"Inputted text:\\n%s\\n\\nResulting string:\\n%s\\n\", inputstr, dest);\n}\n</code></pre>\n\n<p>Lastly, in your <code>everySecondChar</code> function, you're using <code>strcat</code> again when all you need to do is simple assignment (which does a 'copy'):</p>\n\n<pre><code>char * everySecondChar(char * dest, char * input)\n{\n    int i, j;\n    for(i = 0, j = 0; i &lt; MAX_SIZE; ++i, ++j) {\n        if (input[i] == 0) break; // end if string?\n        dest[j] = input[i++];\n    }\n    return dest;\n}\n</code></pre>\n\n<p>Putting all of it together, you get:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define MAX_SIZE 1000\n\nchar * everySecondChar(char * dest, char * input);\n\nint main(void)\n{\n    char inputstr[MAX_SIZE] = {0}; \n    char dest[MAX_SIZE] = {0};\n    printf(\"Enter some text: \");\n    if (fgets(inputstr, MAX_SIZE, stdin) != NULL) {\n        everySecondChar(dest, inputstr);\n        printf(\"Inputted text:\\n%s\\n\\nResulting string:\\n%s\\n\", inputstr, dest);\n    }\n    return 0;   \n}\n\nchar * everySecondChar(char * dest, char * input)\n{\n    int i, j;\n    for(i = 0, j = 0; i &lt; MAX_SIZE; ++i, ++j) {\n        if (input[i] == 0) break; // end if string?\n        dest[j] = input[i++];\n    }\n    return dest;\n}\n</code></pre>\n\n<p>That aside, I'll address some other things; typically if you have a constant value, like your <code>max_size</code> variable, it's considered \"best practice\" to capitalize the entire thing:</p>\n\n<pre><code>`#define MAX_SIZE 1000`\n</code></pre>\n\n<blockquote>\n  <p>I am having my troubles whenever I see those nasty * in a function prototype :(</p>\n</blockquote>\n\n<p>Those nasty *'s in your function prototype (and variable declarations) are known as a pointer qualifier; it indicates that the type of the variable is a pointer to the type specified. A pointer isn't something to be scared of, you're learning C, it's highly important you understand what a pointer is and it's utility.</p>\n\n<p>I won't dive into all of the specificities of pointers, aliases, etc. etc. since that is beyond the scope of this Q&amp;A, but <a href=\"https://en.wikibooks.org/wiki/C_Programming/Pointers_and_arrays\" rel=\"nofollow noreferrer\">WikiBooks</a> has a great intro and explanation covering a lot of those concepts.</p>\n\n<p>Hope that can help!</p>\n"}], "owner": {"reputation": 31, "user_id": 8902963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82f80bf9f641b1c697106123c4510398?s=128&d=identicon&r=PG&f=1", "display_name": "Kevdor", "link": "https://stackoverflow.com/users/8902963/kevdor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1510106033, "creation_date": 1510093598, "last_edit_date": 1510106033, "question_id": 47168449, "link": "https://stackoverflow.com/questions/47168449/manipulation-array-in-function-c-segmentation-fault", "title": "Manipulation array in function - c - Segmentation fault", "body": "<p>So I started to learn how to code a few weeks ago, and this site helped me so much, thank you for that. But this time I got stuck and can\u00b4t really figure out why...Hope you can help me.\nBasically I have a function prototype I have to use in my program and I have my troubles with it. The function should receive a string and then only copy every second char of that string and return the result...</p>\n\n<p>This is what I've got so far:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define max_size 1000\n\nchar * everySecondChar(char * dest, char * input);\n\nint main() {\n\n    char inputstr[max_size] = {0}; \n    char *input[max_size] = {0};\n    char *dest[max_size] = {0};\n    char temp[max_size] = {0}; \n    int i = 0;\n\n    while (fgets(inputstr, max_size, stdin) != NULL)\n    {\n        input[i] = strndup(inputstr, max_size);\n        strcat(temp,inputstr);\n        i++;\n\n    }   \n    input[0] = strndup(temp, max_size);\n\n    printf(\"Inputted text:\\n%s\", *input);\n    printf(\"\\n\");\n    printf(\"\\n\");\n    printf(\"Resulting string:\\n\");\n\n    everySecondChar(*dest, *input);\n\n    printf(\"%s\", *dest);\n\n    return 0;   \n}\n\nchar * everySecondChar(char * dest, char * input)\n{\n    int i = 0;\n\n    for(i = 0; i &lt; max_size; i+=2) {\n        strcat(dest,input);\n    }\n\n    return dest;\n}\n</code></pre>\n\n<p>I know this is probably a 1-min challenge for the most of you, but I am having my troubles whenever I see those nasty * in a function prototype :(</p>\n"}, {"tags": ["c", "linux", "macos", "gcc", "random"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1510115981, "post_id": 47168414, "comment_id": 81292951, "body": "You&#39;ve not specified the name of the unit test library that defines the <code>ulcg_*</code> names on the command line (you probably need to add <code>-lunittest</code> for some appropriate name; you might need to add <code>-L&#47;Users&#47;TestU01&#47;TestU01-1.2.3&#47;lib</code> to the command line before the <code>-l</code> option).  The <code>smarsa_BirthdaySpacings</code> name looks more like it might be part of the <code>birth1.c</code> code than the unit test library.  Is it a typo in <code>birth1.c</code> or did you need to link something from the <code>mylib</code> directory into the executable (as well as including headers from it)."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1510116061, "post_id": 47168414, "comment_id": 81292973, "body": "While we can all wield Google reasonably effectively, it would be better if you included a link to where you obtained the <code>testu01</code> code for your system.  Was it installed by HomeBrew or one of the other installers, or did you collect the code yourself and compile and then install it somewhere?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1510116857, "post_id": 47168414, "comment_id": 81293183, "body": "The software can be downloaded from <a href=\"http://simul.iro.umontreal.ca/testu01/tu01.html\" rel=\"nofollow noreferrer\">simul.iro.umontreal.ca/testu01/tu01.html</a>.  Note that the README file contains the information: <i>Then the small example birth1.c in directory examples can be compiled with the C compiler: <code>gcc birth1.c -o birth1 -ltestu01 -lprobdist -lmylib -lm</code></i>  Which at least is different from what you show.  On a Mac, the <code>-lm</code> is not needed (though it&#39;s not harmful either) \u2014 macOS takes the sensible view that the main maths library should be available by default."}, {"owner": {"reputation": 1, "user_id": 8902939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f0ae4124b4c44191d1bc4de30174695?s=128&d=identicon&r=PG&f=1", "display_name": "Joan", "link": "https://stackoverflow.com/users/8902939/joan"}, "edited": false, "score": 0, "creation_date": 1510132593, "post_id": 47168414, "comment_id": 81300424, "body": "hi Jonathan,  I have testu01 from <a href=\"http://simul.iro.umontreal.ca/testu01/tu01.html\" rel=\"nofollow noreferrer\">simul.iro.umontreal.ca/testu01/tu01.html</a>, I am using Source files (zip archive) from the webiste.  gcc birth1.c -o birth1 -ltestu01 -lprobdist -lmylib -lm  alone will give you an error birth1.c:2:10: fatal error: &#39;unif01.h&#39; file not found #include &quot;unif01.h&quot; because &#39;unif01.h&#39; is in fact in /include directory"}, {"owner": {"reputation": 1, "user_id": 8902939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f0ae4124b4c44191d1bc4de30174695?s=128&d=identicon&r=PG&f=1", "display_name": "Joan", "link": "https://stackoverflow.com/users/8902939/joan"}, "edited": false, "score": 0, "creation_date": 1510132984, "post_id": 47168414, "comment_id": 81300718, "body": "for the libraries in TestU01-1.2.3 folder there is no /lib folder, only /mylib. &#39;ulcg&#39; header files are in /textu01 directory so should be linked"}, {"owner": {"reputation": 1, "user_id": 8902939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f0ae4124b4c44191d1bc4de30174695?s=128&d=identicon&r=PG&f=1", "display_name": "Joan", "link": "https://stackoverflow.com/users/8902939/joan"}, "edited": false, "score": 0, "creation_date": 1510140713, "post_id": 47168414, "comment_id": 81306103, "body": "IT IS RESOLVED Solution was that the package was not properly installed and was linking to non existent libraries. Initial error 86_x64 made me think if there was a compatibility issue as original TestU01 package is quite old. But no, it is working just fine.  Thanks for your comments Jonathan"}], "owner": {"reputation": 1, "user_id": 8902939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f0ae4124b4c44191d1bc4de30174695?s=128&d=identicon&r=PG&f=1", "display_name": "Joan", "link": "https://stackoverflow.com/users/8902939/joan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 130, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1510095339, "creation_date": 1510093401, "last_edit_date": 1510095339, "question_id": 47168414, "link": "https://stackoverflow.com/questions/47168414/testu01-installation-problems-on-mac-os-x", "title": "testu01 installation problems on mac OS X", "body": "<p>I installed testu01 on my mac (OS El Capitan). I want to compile one of the examples using gcc, code below. But I get the following error, below. Did anybody run TestU01 on x86_64 successfully? Any other suggestions?</p>\n\n<pre><code>MacBook-Pro-2:examples Joan$ gcc -std=c99 -Wall -O3 -o birth1 birth1.c -I/Users/TestU01/TestU01-1.2.3/include -I/Users/TestU01/TestU01-1.2.3/mylib\nUndefined symbols for architecture x86_64:\n  \"_smarsa_BirthdaySpacings\", referenced from:\n      _main in birth1-c99705.o\n  \"_ulcg_CreateLCG\", referenced from:\n      _main in birth1-c99705.o\n  \"_ulcg_DeleteGen\", referenced from:\n      _main in birth1-c99705.o\nld: symbol(s) not found for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\n</code></pre>\n"}, {"tags": ["c", "arm", "x86-64"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 4, "creation_date": 1510093230, "post_id": 47168239, "comment_id": 81286714, "body": "It has everything to do with not providing the function prototype. Please do that and move on. &quot;I don&#39;t tie my shoelaces. That&#39;s OK with my BB&#39;s but not with my Sharks. Why is that?&quot;  Answer: tie your shoelaces."}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1510093615, "post_id": 47168239, "comment_id": 81286865, "body": "@WeatherVane Still, it is interesting to know why, and sometimes these knowledges helps you debugging code."}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1510093733, "post_id": 47168239, "comment_id": 81286912, "body": "Your compiler has probably wept. Don&#39;t torture it, it is your friend."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1510093820, "post_id": 47168239, "comment_id": 81286942, "body": "@klutt what you say is especially true if the fault is a side-effect of the actual bug, and you want to assure yourself that the bug really was the cause, and not just another &quot;bump under the carpet that moves when you whack it&quot;."}, {"owner": {"reputation": 1825, "user_id": 1042840, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/159d59ce9a4b6bacc2c1a21fc2abce6d?s=128&d=identicon&r=PG", "display_name": "user1042840", "link": "https://stackoverflow.com/users/1042840/user1042840"}, "edited": false, "score": 0, "creation_date": 1510094020, "post_id": 47168239, "comment_id": 81287030, "body": "I was expecting some hints but everyone just said that I should not know what&#39;s the reason. That&#39;s sad."}, {"owner": {"reputation": 1825, "user_id": 1042840, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/159d59ce9a4b6bacc2c1a21fc2abce6d?s=128&d=identicon&r=PG", "display_name": "user1042840", "link": "https://stackoverflow.com/users/1042840/user1042840"}, "edited": false, "score": 0, "creation_date": 1510094125, "post_id": 47168239, "comment_id": 81287069, "body": "I guess this behavior has to have something to do with <code>ABI</code>. I know that adding a function prototype fixes the problem, I&#39;m not that stupid."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1510094178, "post_id": 47168239, "comment_id": 81287088, "body": "Doesn&#39;t the answer help? These are comments."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1510094186, "post_id": 47168239, "comment_id": 81287093, "body": "No, @user1042840, it&#39;s not sad.  You are dabbling in undefined behavior.  At the level of the C language, then, <i>there is no reason</i>.  To the extent that there is any definedness at all, it is tied up in hardware and software implementation details.  For the purpose of learning to write solid, reliable, portable C programs, the lesson is simple: avoid exercising undefined behaviors."}, {"owner": {"reputation": 1825, "user_id": 1042840, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/159d59ce9a4b6bacc2c1a21fc2abce6d?s=128&d=identicon&r=PG", "display_name": "user1042840", "link": "https://stackoverflow.com/users/1042840/user1042840"}, "edited": false, "score": 0, "creation_date": 1510094494, "post_id": 47168239, "comment_id": 81287197, "body": "I tagged the question with <code>x86-64</code> and <code>ARM</code> and mentioned calling convention as a possible explanation because I realize that hardware matters."}, {"owner": {"reputation": 1825, "user_id": 1042840, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/159d59ce9a4b6bacc2c1a21fc2abce6d?s=128&d=identicon&r=PG", "display_name": "user1042840", "link": "https://stackoverflow.com/users/1042840/user1042840"}, "edited": false, "score": 0, "creation_date": 1510094812, "post_id": 47168239, "comment_id": 81287302, "body": "C aims to be hardware independent, it&#39;s classified as a high-level language but at the same time it has dozens of implementation-defined and unspecified rules and depends on hardware a lot."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1510094906, "post_id": 47168239, "comment_id": 81287331, "body": "C is a low level language, just above assembler."}, {"owner": {"reputation": 1825, "user_id": 1042840, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/159d59ce9a4b6bacc2c1a21fc2abce6d?s=128&d=identicon&r=PG", "display_name": "user1042840", "link": "https://stackoverflow.com/users/1042840/user1042840"}, "edited": false, "score": 0, "creation_date": 1510094941, "post_id": 47168239, "comment_id": 81287351, "body": "I have never heard anyone saying that C is a <code>low level</code> language. You&#39;re the first."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1510094977, "post_id": 47168239, "comment_id": 81287359, "body": "It was developed by people who wrote assembly code, to make their life easier."}, {"owner": {"reputation": 1825, "user_id": 1042840, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/159d59ce9a4b6bacc2c1a21fc2abce6d?s=128&d=identicon&r=PG", "display_name": "user1042840", "link": "https://stackoverflow.com/users/1042840/user1042840"}, "edited": false, "score": 0, "creation_date": 1510095035, "post_id": 47168239, "comment_id": 81287387, "body": "I know. But what&#39;s the point?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1510095058, "post_id": 47168239, "comment_id": 81287395, "body": "The point of what?"}, {"owner": {"reputation": 1825, "user_id": 1042840, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/159d59ce9a4b6bacc2c1a21fc2abce6d?s=128&d=identicon&r=PG", "display_name": "user1042840", "link": "https://stackoverflow.com/users/1042840/user1042840"}, "edited": false, "score": 0, "creation_date": 1510095091, "post_id": 47168239, "comment_id": 81287405, "body": "Of you bringing up the C history?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1510095194, "post_id": 47168239, "comment_id": 81287434, "body": "C <i>is</i> hardware independent in it&#39;s <i>defined</i> scope. When you are entering the undefined one, it might depend on anything."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1510095277, "post_id": 47168239, "comment_id": 81287459, "body": "Because you challenged my assertion that C is a low level language. It might have been considered to be a high level language once, but more than 40 years&#39; water has flowed under the bridge since."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1510095972, "post_id": 47168239, "comment_id": 81287689, "body": "... as such, C is every bit as dangerous as assembly language, but is protected to some extent by a good compiler, plus whatever hardware protection is offered (as with assembly)."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 3, "creation_date": 1510104817, "post_id": 47168239, "comment_id": 81289981, "body": "@JohnBollinger: The OP is saying it&#39;s sad that people are just saying &quot;it&#39;s UB, you shouldn&#39;t be interested in the asm level explanation of what <i>did</i> happen&quot;.  There is a simple and moderately interesting answer here.  (And understanding it could help you recognize the symptoms of the same problem in the future.)  I wouldn&#39;t be surprised if this has already been asked, I should have looked for a duplicate.  OTOH, I&#39;m just going to go out on a limb and guess that if there is one, the answer isn&#39;t as detailed as mine :P  I seem to have gotten a bit verbose here."}], "answers": [{"comments": [{"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 2, "creation_date": 1510093988, "post_id": 47168273, "comment_id": 81287015, "body": "<code>int</code> is the same on ARM and x86-64; the difference is in how wider args are passed.  On x86-64, <code>unsigned long long</code> still fits in a single register, so implicit-<code>int</code> doesn&#39;t break the calling convention.  (Because the compiler happens not to leave any high garbage in the arg-passing registers)"}, {"owner": {"reputation": 1825, "user_id": 1042840, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/159d59ce9a4b6bacc2c1a21fc2abce6d?s=128&d=identicon&r=PG", "display_name": "user1042840", "link": "https://stackoverflow.com/users/1042840/user1042840"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1510094291, "post_id": 47168273, "comment_id": 81287129, "body": "Sorry but it&#39;s not an answer for my question. @PeterCordes: thanks for this comment.  Are registers a possible explanation for that behavior? Can you say more about that?"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 1825, "user_id": 1042840, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/159d59ce9a4b6bacc2c1a21fc2abce6d?s=128&d=identicon&r=PG", "display_name": "user1042840", "link": "https://stackoverflow.com/users/1042840/user1042840"}, "edited": false, "score": 1, "creation_date": 1510094533, "post_id": 47168273, "comment_id": 81287207, "body": "@user1042840: yes, the answer should be obvious if you look at the asm with/without a prototype.  (e.g. put your code on <a href=\"http://gcc.godbolt.org/\" rel=\"nofollow noreferrer\">gcc.godbolt.org</a> and diff it)."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1510104228, "post_id": 47168273, "comment_id": 81289859, "body": "Variadic / unprototyped functions don&#39;t convert all the args to <code>int</code>.  That&#39;s not how C works; narrower args are promoted to <code>int</code>, but wider ones are passed as-is.  This is why it&#39;s possible to print <code>uint64_t</code> with <code>printf</code>."}], "tags": [], "owner": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "is_accepted": false, "score": 0, "last_activity_date": 1510092687, "creation_date": 1510092687, "answer_id": 47168273, "question_id": 47168239, "link": "https://stackoverflow.com/questions/47168239/function-called-in-a-file-without-a-prototype-produce-different-results-on-arm-a/47168273#47168273", "title": "Function called in a file without a prototype produce different results on ARM and x86-64", "body": "<p>If there is no function prototype and implicit declaration is used, compiler assumes that all parameters are of type <code>int</code>.</p>\n\n<p>Looks like int is different on arm and on x64-86 architecutre.</p>\n\n<p>Note that modifier <code>%d</code> can only be used with int parameter, for unsigned one use <code>%u</code></p>\n\n<p>Thats why there are warnings for you.</p>\n"}, {"comments": [{"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 0, "creation_date": 1510098396, "post_id": 47168650, "comment_id": 81288427, "body": "Actually, on x86-64, arguments are passed in registers, not on the stack -- it&#39;s just that they are 64 bit registers, so each argument only takes 1."}, {"owner": {"reputation": 251, "user_id": 7063478, "user_type": "registered", "profile_image": "https://graph.facebook.com/1454136917948906/picture?type=large", "display_name": "nowaqq", "link": "https://stackoverflow.com/users/7063478/nowaqq"}, "reply_to_user": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 0, "creation_date": 1510099900, "post_id": 47168650, "comment_id": 81288787, "body": "@ChrisDodd: You are right, I edited the answer to make it correct."}, {"owner": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "edited": false, "score": 1, "creation_date": 1510150643, "post_id": 47168650, "comment_id": 81312831, "body": "@nowaqq: On x86-64 ABI for Windows, the first four arguments are passed in registers, in System V ABI for x86-64 even more (six?). Many functions only have 4 arguments or less."}], "tags": [], "owner": {"reputation": 251, "user_id": 7063478, "user_type": "registered", "profile_image": "https://graph.facebook.com/1454136917948906/picture?type=large", "display_name": "nowaqq", "link": "https://stackoverflow.com/users/7063478/nowaqq"}, "is_accepted": false, "score": 1, "last_activity_date": 1510099869, "last_edit_date": 1510099869, "creation_date": 1510094736, "answer_id": 47168650, "question_id": 47168239, "link": "https://stackoverflow.com/questions/47168239/function-called-in-a-file-without-a-prototype-produce-different-results-on-arm-a/47168650#47168650", "title": "Function called in a file without a prototype produce different results on ARM and x86-64", "body": "<p>This is because how x64-86 and ARM are passing arguments to functions (as Peter Cordes mentioned in his comment).</p>\n\n<p>Please compare generated assembly on <a href=\"https://godbolt.org/g/QYvMnL\" rel=\"nofollow noreferrer\">ARM</a> and on <a href=\"https://godbolt.org/g/BFBVW9\" rel=\"nofollow noreferrer\">x64-86</a>:</p>\n\n<ol>\n<li>On ARM unsigned long long is stored in 2 registers and int in 1, on x86 both are stored in 64-bit registers.</li>\n<li>On ARM, function, when getting arguments, is reading single register for each argument making high and low part of 1st variable to be split into 2 arguments. 2nd argument passed is, in the end, omitted. On x64-86 it is still getting values from those two 64-bit registers.</li>\n</ol>\n\n<p>Side note: on x64-86 only few starting function arguments are passed by registers, if there are more, next arguments are stored on stack.</p>\n"}, {"tags": [], "owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": true, "score": 4, "last_activity_date": 1510112134, "last_edit_date": 1510112134, "creation_date": 1510104102, "answer_id": 47170047, "question_id": 47168239, "link": "https://stackoverflow.com/questions/47168239/function-called-in-a-file-without-a-prototype-produce-different-results-on-arm-a/47170047#47170047", "title": "Function called in a file without a prototype produce different results on ARM and x86-64", "body": "<blockquote>\n  <p>Does it have something to do with a calling convention?</p>\n</blockquote>\n\n<p>Yes, it has <em>everything</em> to do with the calling convention / ABI.</p>\n\n<p>On x86-64, the \"natural\" width of a function argument is 64 bits, and narrower integer args still use a whole \"slot\".  (First <a href=\"https://stackoverflow.com/questions/2535989/what-are-the-calling-conventions-for-unix-linux-system-calls-on-x86-64\">6 integer/pointer args and first 8 FP args in registers (SysV)</a> or first 4 args (Windows), then stack).</p>\n\n<p>On ARM, the register width (and \"arg slot\" minimum width on the stack) is 32 bits, and 64-bit integer args take two registers.</p>\n\n<p>On 32-bit x86 (<code>gcc -m32</code>) you would see the same behaviour as 32-bit ARM.  On AArch64, you would see the same behaviour as x86-64, because their calling conventions are all \"normal\" and don't pack separate narrow args into single registers.  (<a href=\"https://stackoverflow.com/questions/18133812/where-is-the-x86-64-abi-documented\">x86-64 System V</a> does pack struct members into up to 2 registers, though, instead of using a separate register per member!)</p>\n\n<p>Having a minimum \"arg slot\" width that's equal to the register size is nearly universal, whether args are passed in registers or on the stack.  This isn't necessarily the width of <code>int</code>, though: <a href=\"https://gcc.gnu.org/wiki/avr-gcc#Calling_Convention\" rel=\"nofollow noreferrer\">AVR (8-bit RISC microcontroller) has 16-bit <code>int</code> which takes two registers, but <code>char</code> / <code>uint8_t</code> args can be passed in a single register.</a></p>\n\n<hr>\n\n<p>With a prototype, wider/narrower types are converted to what the callee expects, according to the types in the prototype.  So obviously everything works.</p>\n\n<p><strong>Without a prototype, the type of the expression in the call determines how the arg is passed.  <code>unsigned long long slot</code> takes the first 2 arg-passing registers in ARM's calling convention, where <code>lib_fn</code> expects to find its 2 integer args.</strong></p>\n\n<p>(The answer claiming everything is converted to <code>int</code> without a prototype is wrong.  No prototype is equivalent to <code>int lib_fn(...);</code>, but <code>printf</code> still works with <code>double</code> and <code>int64_t</code>.  Note that <code>float</code> is implicitly converted to <code>double</code> when passing to a variadic function, just like narrower integer types are up-converted to <code>int</code>, which is why <code>%f</code> is the format for <code>double</code>, and there is no format for <code>float</code>, unlike with scanf where you pass pointers.  That's just how C is designed; there's no reason for it.  But anyway, C requires that wider types are able to be passed as is to variadic functions, and all calling conventions accomodate that.)</p>\n\n<hr>\n\n<p>BTW, <strong>other breakage is possible</strong>: Some implementations use a different calling convention for variadic (and thus unprototyped) functions than for normal functions.</p>\n\n<p>For example, on Windows you can set some compilers to default to <a href=\"https://en.wikipedia.org/wiki/X86_calling_conventions#stdcall\" rel=\"nofollow noreferrer\">the <code>_stdcall</code> calling convention</a>, where the callee pops the args from the stack.  (i.e. with a <code>ret 8</code> to do <code>esp+=8</code> after popping the return address.)  But obviously this calling convention isn't usable for variadic functions, so the default doesn't apply to them, and they would use <code>_cdecl</code> or something where the caller is responsible for cleaning up stack args, because only the caller knows for sure how many args they passed.  Hopefully in this mode compilers would at least warn if not error for implicitly declared functions, because getting it wrong leads to a crash (stack pointing to the wrong place after a call).</p>\n\n<hr>\n\n<h1>Let's have a look at the asm for this case</h1>\n\n<p>For an introduction to reading compiler asm output, see <a href=\"https://stackoverflow.com/questions/38552116/how-to-remove-noise-from-gcc-clang-assembly-output\">How to remove &quot;noise&quot; from GCC/clang assembly output?</a>, and especially Matt Godbolt's CppCon2017 talk <a href=\"https://youtu.be/bSkpMdDe4g4\" rel=\"nofollow noreferrer\">\u201cWhat Has My Compiler Done for Me Lately? Unbolting the Compiler's Lid\u201d</a>.</p>\n\n<p>To make the asm as simple as possible, I removed the printing and put the code in a function that returns void.  (This allows <a href=\"https://en.wikipedia.org/wiki/Tail_call#In_assembly\" rel=\"nofollow noreferrer\">tail-call optimization</a> where you jump to the function and <em>it</em> returns to your caller.)  The only instructions in the compiler output are the arg setup and jumping to lib_fn.</p>\n\n<pre><code>#ifdef USE_PROTO\nvoid lib_fn(unsigned slot, int pon_off);\n#endif\n\nvoid foo(void) {\n    unsigned long long slot = 0;\n    int pon_off = 1;\n    lib_fn(slot, pon_off);\n}\n</code></pre>\n\n<p><strong><a href=\"https://gcc.godbolt.org/#g:!((g:!((g:!((h:codeEditor,i:(j:1,source:&#39;//%23include+%3Cstdio.h%3E%0A//%23include+%3Cstdlib.h%3E%0A%0A//+-mno-thumb-interwork+allows+optimized+tail-calls%0A%0A//+before+the+prototype%0Avoid+foo(void)+%7B%0A++++unsigned+long+long+slot+%3D+0%3B%0A++++int+pon_off+%3D+1%3B%0A++++lib_fn_noproto(slot,+pon_off)%3B%0A%0A++++//+break+the+calling+convention+for+64-bit%0A++++//+by+passing+a+128-bit+integer.%0A++++//lib_fn_noproto((unsigned+__int128)slot,+pon_off)%3B%0A%7D%0A%0A//+use+this+with+/+without+-DUSE_PROTOTYPE%0A//+to+use+the+diff+feature+between+two+compiler+windows.%0A//%23ifdef+USE_PROTO%0Avoid+lib_fn(unsigned+slot,+int+pon_off)%3B%0A//%23endif%0A%0A//+after+prototype%0Avoid+bar(void)%0A%7B%0A//++++printf(%22sizeof+unsigned+long+long:+%25zu%5Cn%22,+sizeof(unsigned+long+long))%3B%0A//++++printf(%22sizeof+int:+%25zu%5Cn%22,+sizeof(int))%3B%0A++++unsigned+long+long+slot+%3D+0%3B%0A++++int+pon_off+%3D+1%3B%0A++++lib_fn(slot,+pon_off)%3B%0A++++//return+EXIT_SUCCESS%3B%0A%7D%0A%0A&#39;),l:&#39;5&#39;,n:&#39;0&#39;,o:&#39;C%2B%2B+source+%231&#39;,t:&#39;0&#39;)),k:31.97457681324913,l:&#39;4&#39;,n:&#39;0&#39;,o:&#39;&#39;,s:0,t:&#39;0&#39;),(g:!((g:!((h:compiler,i:(compiler:armg630,filters:(b:&#39;0&#39;,binary:&#39;1&#39;,commentOnly:&#39;0&#39;,demangle:&#39;0&#39;,directives:&#39;0&#39;,execute:&#39;1&#39;,intel:&#39;0&#39;,trim:&#39;1&#39;),libs:!(),options:&#39;-xc+-DUSE_PROTO+-std%3Dgnu11+-Wall+-O3+-marm+-mno-thumb-interwork&#39;,source:1),l:&#39;5&#39;,n:&#39;0&#39;,o:&#39;ARM+gcc+6.3.0+(linux)+(Editor+%231,+Compiler+%231)&#39;,t:&#39;0&#39;)),k:34.23917101338947,l:&#39;4&#39;,m:50,n:&#39;0&#39;,o:&#39;&#39;,s:0,t:&#39;0&#39;),(g:!((h:output,i:(compiler:1,editor:1),l:&#39;5&#39;,n:&#39;0&#39;,o:&#39;%231+with+ARM+gcc+6.3.0+(linux)&#39;,t:&#39;0&#39;)),header:(),l:&#39;4&#39;,m:50,n:&#39;0&#39;,o:&#39;&#39;,s:0,t:&#39;0&#39;)),k:34.01271159337544,l:&#39;3&#39;,n:&#39;0&#39;,o:&#39;&#39;,t:&#39;0&#39;),(g:!((g:!((h:compiler,i:(compiler:g63,filters:(b:&#39;0&#39;,binary:&#39;1&#39;,commentOnly:&#39;0&#39;,demangle:&#39;0&#39;,directives:&#39;0&#39;,execute:&#39;1&#39;,intel:&#39;0&#39;,trim:&#39;1&#39;),libs:!(),options:&#39;-xc+-DUSE_PROTO+-std%3Dgnu11+-Wall+-O3&#39;,source:1),l:&#39;5&#39;,n:&#39;0&#39;,o:&#39;x86-64+gcc+6.3+(Editor+%231,+Compiler+%232)&#39;,t:&#39;0&#39;)),header:(),l:&#39;4&#39;,m:50,n:&#39;0&#39;,o:&#39;&#39;,s:0,t:&#39;0&#39;),(g:!((h:compiler,i:(compiler:g63,filters:(b:&#39;0&#39;,binary:&#39;1&#39;,commentOnly:&#39;0&#39;,demangle:&#39;0&#39;,directives:&#39;0&#39;,execute:&#39;1&#39;,intel:&#39;0&#39;,trim:&#39;1&#39;),libs:!(),options:&#39;-xc+-DUSE_PROTO+-std%3Dgnu11+-Wall+-O3+-m32&#39;,source:1),l:&#39;5&#39;,n:&#39;0&#39;,o:&#39;x86-64+gcc+6.3+(Editor+%231,+Compiler+%234)&#39;,t:&#39;0&#39;)),header:(),k:34.01271159337544,l:&#39;4&#39;,m:50,n:&#39;0&#39;,o:&#39;&#39;,s:0,t:&#39;0&#39;)),k:34.01271159337544,l:&#39;3&#39;,n:&#39;0&#39;,o:&#39;&#39;,t:&#39;0&#39;)),l:&#39;2&#39;,n:&#39;0&#39;,o:&#39;&#39;,t:&#39;0&#39;)),version:4\" rel=\"nofollow noreferrer\">See the source+asm on the Godbolt compiler explorer</a>, for ARM, x86-64, and x86-32 (<code>-m32</code>) with gcc 6.3</strong>.  (I actually copied <code>foo</code> and renamed <code>lib_fn</code> so it would have no prototype in one version of the caller, instead of having 2 separate compiler windows for each architecture.  In a more complex case, that would be handy because you can diff between compiler panes).</p>\n\n<p>For x86-64, the output is basically the same with/without the prototype.  Without, the caller has to zero <code>al</code> (<a href=\"https://stackoverflow.com/questions/33666617/what-is-the-best-way-to-set-a-register-to-zero-in-x86-assembly-xor-mov-or-and\">using <code>xor eax,eax</code> to zero the whole RAX</a>) to indicate that this variadic function call is passing no FP args in XMM registers.  (In the Windows calling convention, you wouldn't have that because the Windows convention is optimized for variadic functions and simplicity of implementing them at the expense of normal functions.)</p>\n\n<p><strong>For ARM:</strong></p>\n\n<pre><code>foo:                  @ no prototype\n    mov     r2, #1    @ pon_off\n    mov     r0, #0    @ slot low half\n    mov     r1, #0    @ slot high half\n    b       lib_fn_noproto\n\n\nbar:                  @ with proto, u long long is converted to unsigned according to C rules, like the callee expects\n    mov     r1, #1\n    mov     r0, #0\n    b       lib_fn\n</code></pre>\n\n<p>lib_fn is expecting <code>slot</code> in R0 and <code>pon_off</code> in R1.</p>\n\n<hr>\n\n<h2>Breaking x86-64</h2>\n\n<p>You'd have the same problem on x86-64 if you used <code>unsigned __int128</code>.</p>\n\n<pre><code>lib_fn_noproto((unsigned __int128)slot, pon_off);\n</code></pre>\n\n<p>compiles to:</p>\n\n<pre><code>    mov     edx, 1          # pon_off = EDX = 1\n    xor     edi, edi        #  low half of slot = RDI = 0\n    xor     esi, esi        # high half of slot = RSI = 0\n    xor     eax, eax        # number of xmm register args = 0\n    jmp     lib_fn_noproto\n</code></pre>\n\n<p>which breaks the calling convention in <em>exactly</em> the same way as for 32-bit ARM with a 64-bit arg taking the first 2 slots.</p>\n"}], "owner": {"reputation": 1825, "user_id": 1042840, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/159d59ce9a4b6bacc2c1a21fc2abce6d?s=128&d=identicon&r=PG", "display_name": "user1042840", "link": "https://stackoverflow.com/users/1042840/user1042840"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 0, "accepted_answer_id": 47170047, "answer_count": 3, "score": 1, "last_activity_date": 1510112134, "creation_date": 1510092458, "question_id": 47168239, "link": "https://stackoverflow.com/questions/47168239/function-called-in-a-file-without-a-prototype-produce-different-results-on-arm-a", "title": "Function called in a file without a prototype produce different results on ARM and x86-64", "body": "<p>We have 3 files: <code>main.c</code>, <code>lib.h</code> and <code>lib.c</code>:</p>\n\n<p>main.c:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n/* #include \"lib.h\" */\n\nint main(void)\n{\n    printf(\"sizeof unsigned long long: %zu\\n\", sizeof(unsigned long long));\n    printf(\"sizeof int: %zu\\n\", sizeof(int));\n    unsigned long long slot = 0;\n    int pon_off = 1;\n    lib_fn(slot, pon_off);\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>lib.h:</p>\n\n<pre><code>void lib_fn(unsigned slot, int pon_off);\n</code></pre>\n\n<p>lib.c:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nvoid lib_fn(unsigned slot, int pon_off)\n{\n    printf(\"slot: %d\\n\", slot);\n    printf(\"pon_off: %d\\n\", pon_off);\n    return;\n}\n</code></pre>\n\n<p>Compile:</p>\n\n<pre><code>gcc -O2 -Wall -Wextra main.c lib.c\n</code></pre>\n\n<p>Run on ARM:</p>\n\n<pre><code>$ ./a.out\nsizeof unsigned long long: 8\nsizeof int: 4\nslot: 0\npon_off: 0\n</code></pre>\n\n<p>Run on x86-64:</p>\n\n<pre><code>$ ./a.out\nsizeof unsigned long long: 8\nsizeof int: 4\nslot: 0\npon_off: 1\n</code></pre>\n\n<p>As you see <code>pon_off</code> is 0 on ARM but 1 on x86-64.  I guess it has\nsomething to do with arguments size as <code>lib_fn()</code> takes two ints that\nare together 8 bytes long and a single <code>long long</code> is 8 bytes long.</p>\n\n<ol>\n<li><p>Why is <code>pon_off</code> printed differently on ARM and x86-64?</p></li>\n<li><p>Does it have something to do with a calling convention?</p></li>\n</ol>\n"}, {"tags": ["c", "assembly", "x86-16", "bcc-compiler"], "comments": [{"owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 0, "creation_date": 1510092619, "post_id": 47168171, "comment_id": 81286414, "body": "Well, since you told it to produce an object file named foo.o, I&#39;m not sure why you think an assembly file is available.  Read the manual page for your compiler and look for &quot;Assembly output.&quot;"}, {"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 0, "creation_date": 1510092843, "post_id": 47168171, "comment_id": 81286520, "body": "<a href=\"https://stackoverflow.com/a/1289888/1212725\">stackoverflow.com/a/1289888/1212725</a>"}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "reply_to_user": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 0, "creation_date": 1510092890, "post_id": 47168171, "comment_id": 81286541, "body": "@bruceg : that is for GCC, this is for BCC (Bruce&#39;s C Compiler)"}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 2, "creation_date": 1510093176, "post_id": 47168171, "comment_id": 81286688, "body": "I have removed the <i>BCC</i> tag you keep putting back. It was removed because that tag is for <code>blind carbon copy</code> not Bruce&#39;s C compiler. You can click on the tag to get a description of it."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1510094613, "post_id": 47168171, "comment_id": 81287234, "body": "... or even just hover your mouse pointer over the tag."}], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 6500168, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/601b94035e1a7a2b6cc2c24f82f8c05e?s=128&d=identicon&r=PG&f=1", "display_name": "Amr Khalil", "link": "https://stackoverflow.com/users/6500168/amr-khalil"}, "edited": false, "score": 0, "creation_date": 1510256135, "post_id": 47168959, "comment_id": 81369446, "body": "how can I add optimization?"}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 81, "user_id": 6500168, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/601b94035e1a7a2b6cc2c24f82f8c05e?s=128&d=identicon&r=PG&f=1", "display_name": "Amr Khalil", "link": "https://stackoverflow.com/users/6500168/amr-khalil"}, "edited": false, "score": 0, "creation_date": 1510259941, "post_id": 47168959, "comment_id": 81371622, "body": "@AmrAyman Pass <code>-O</code> to the compiler. Read the man page of <code>bcc</code> for more details."}], "tags": [], "owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "is_accepted": true, "score": 4, "last_activity_date": 1510096355, "creation_date": 1510096355, "answer_id": 47168959, "question_id": 47168171, "link": "https://stackoverflow.com/questions/47168171/how-to-compile-with-bruces-c-compiler-to-get-asm-file-that-runs-on-8086-process/47168959#47168959", "title": "How to compile with Bruce&#39;s C Compiler to get asm file that runs on 8086 processors", "body": "<p>Try <code>bcc -S</code> to get assembly. For example, if you type <code>bcc -ansi -S foo.c</code> you get <code>foo.s</code> with the following content (debug comments removed for brevitiy):</p>\n\n<pre><code>export  _main\n_main:\npush    bp\nmov bp,sp\npush    di\npush    si\nadd sp,#-$CA\nxor ax,ax\nmov -$CE[bp],ax\ndec sp\ndec sp\nxor ax,ax\nmov -$D0[bp],ax\ndec sp\ndec sp\nxor ax,ax\nmov -$D2[bp],ax\nxor ax,ax\nmov -$D0[bp],ax\njmp .3\n.4:\nmov ax,-$D0[bp]\nmov dx,ax\nshl ax,*1\nshl ax,*1\nadd ax,dx\nadd ax,*3\npush    ax\nmov ax,-$D0[bp]\nshl ax,*1\nmov bx,bp\nadd bx,ax\nmov ax,-$D4[bp]\nmov -$68[bx],ax\ninc sp\ninc sp\n.2:\nmov ax,-$D0[bp]\ninc ax\nmov -$D0[bp],ax\n.3:\nmov ax,-$D0[bp]\ncmp ax,*$32\njl  .4\n.5:\n.1:\nxor ax,ax\nmov -$D0[bp],ax\njmp .8\n.9:\nxor ax,ax\nmov -$CE[bp],ax\nmov ax,-$D0[bp]\nadd ax,*-4\nmov -$D2[bp],ax\njmp .C\n.D:\nmov ax,-$D2[bp]\ntest    ax,ax\njl      .E\n.10:\nmov ax,-$D2[bp]\ncmp ax,*$32\njge     .E\n.F:\nmov ax,-$D2[bp]\nshl ax,*1\nmov bx,bp\nadd bx,ax\nmov ax,-$CE[bp]\nadd ax,-$68[bx]\nmov -$CE[bp],ax\n.E:\nmov ax,-$CE[bp]\nmov bx,*$A\ncwd\nidiv    bx\nmov -$CE[bp],ax\nmov ax,-$D0[bp]\nshl ax,*1\nmov bx,bp\nadd bx,ax\nmov ax,-$CE[bp]\nmov -$CC[bx],ax\n.B:\nmov ax,-$D2[bp]\ninc ax\nmov -$D2[bp],ax\n.C:\nmov ax,-$D0[bp]\nadd ax,*5\ncmp ax,-$D2[bp]\njge .D\n.11:\n.A:\n.7:\nmov ax,-$D0[bp]\ninc ax\nmov -$D0[bp],ax\n.8:\nmov ax,-$D0[bp]\ncmp ax,*$32\nblt     .9\n.12:\n.6:\nxor ax,ax\nlea sp,-4[bp]\npop si\npop di\npop bp\nret\n.data\n.bss\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 6500168, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/601b94035e1a7a2b6cc2c24f82f8c05e?s=128&d=identicon&r=PG&f=1", "display_name": "Amr Khalil", "link": "https://stackoverflow.com/users/6500168/amr-khalil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 816, "favorite_count": 0, "accepted_answer_id": 47168959, "answer_count": 1, "score": 1, "last_activity_date": 1510096629, "creation_date": 1510092103, "last_edit_date": 1510096629, "question_id": 47168171, "link": "https://stackoverflow.com/questions/47168171/how-to-compile-with-bruces-c-compiler-to-get-asm-file-that-runs-on-8086-process", "title": "How to compile with Bruce&#39;s C Compiler to get asm file that runs on 8086 processors", "body": "<p>I have this small c code</p>\n\n<pre><code>    int main (){\n    int in  [50];\n    int res [50];\n\n    int avg=0;\n    int i=0;\n    int j=0;\n\n    for(i=0;i&lt;50;i++){\n      in[i]=i*5+28%25;\n    }\n\n    for(i=0;i&lt;50;i++){\n        avg=0;\n        for(j=i-4;j&lt;=i+5;j++){\n            if((j&gt;=0)&amp;&amp;(j&lt;50)){\n                avg=avg+in[j];\n            }\n            avg=avg/10;\n            res[i]=avg;\n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>which is a simple moving average function</p>\n\n<p>I want to get the assembly code that corresponds to this code, however, I want the x86 ISA assembly code that can run on processor 8086</p>\n\n<p>after looking I ran this commands</p>\n\n<pre><code>bcc -ansi -c -o foo.o foo.c\nas86 foo.asm -o foo.o\n</code></pre>\n\n<p>this ended up with error </p>\n\n<pre><code>as: error opening input file\n</code></pre>\n\n<p>how can I compile my file to get the assembly code?</p>\n"}, {"tags": ["c", "arrays", "string", "character"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1510091441, "post_id": 47167993, "comment_id": 81285897, "body": "Can you elaborate?"}], "answers": [{"tags": [], "owner": {"reputation": 816, "user_id": 7025986, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/K8qdb.jpg?s=128&g=1", "display_name": "Mo Ganji", "link": "https://stackoverflow.com/users/7025986/mo-ganji"}, "is_accepted": false, "score": 0, "last_activity_date": 1510091555, "creation_date": 1510091555, "answer_id": 47168052, "question_id": 47167993, "link": "https://stackoverflow.com/questions/47167993/strings-of-characters-implementation/47168052#47168052", "title": "Strings of characters implementation", "body": "<p>you can define an array of strings like:\n    <code>char * array_of_strings[100];</code>\nand use <code>malloc</code> to allocate memory for each of them. </p>\n\n<pre><code>array_of_strings[0] = (char *) malloc(100);\narray_of_strings[0] = \"here is your string\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 3984259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9c461c49483570e69e8f32c59b1c7d0?s=128&d=identicon&r=PG&f=1", "display_name": "Carlos Perez", "link": "https://stackoverflow.com/users/3984259/carlos-perez"}, "is_accepted": false, "score": 0, "last_activity_date": 1510091774, "creation_date": 1510091774, "answer_id": 47168102, "question_id": 47167993, "link": "https://stackoverflow.com/questions/47167993/strings-of-characters-implementation/47168102#47168102", "title": "Strings of characters implementation", "body": "<p>Declaration:  data_type array_name[array_size];</p>\n\n<p>Example: float mark[5]; </p>\n\n<p>You can access elements of an array by indices. Suppose you declared an array mark as above. The first element is mark[0], second element is mark[1] and so on.</p>\n\n<p>It's possible to initialize an array during declaration. For example.</p>\n\n<p>int mark[5] = {19, 10, 8, 17, 9};</p>\n"}, {"tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": true, "score": 2, "last_activity_date": 1510092717, "creation_date": 1510092717, "answer_id": 47168279, "question_id": 47167993, "link": "https://stackoverflow.com/questions/47167993/strings-of-characters-implementation/47168279#47168279", "title": "Strings of characters implementation", "body": "<p>In your code, <code>a</code> must be an array of pointers to char, e.g. <code>char *a[5]</code>, to which you then assign pointers to string literals:</p>\n\n<pre><code>a[1]=\"Apples\";\na[2]=\"Pineapples are red\";\n</code></pre>\n\n<p>You can modify an element in the sense to let it point to a different string, e.g. <code>a[1]=\"another fruit\";</code>. You can access an entire string like, for example, <code>printf(\"%s\", a[1])</code>, and you can access single characters like, for example, <code>char willBeA_p = a[1][1]</code>; But you cannot modify the contents of the strings in your example, because they are string literals (and modifying string literals yields undefined behaviour). So <code>a[1][1]='b'</code> is not allowed.</p>\n"}], "owner": {"reputation": 61, "user_id": 8640273, "user_type": "registered", "profile_image": "https://graph.facebook.com/1733892689955847/picture?type=large", "display_name": "Teodor Ti\u021ba", "link": "https://stackoverflow.com/users/8640273/teodor-ti%c8%9ba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 47168279, "answer_count": 3, "score": -3, "last_activity_date": 1510092717, "creation_date": 1510091237, "last_edit_date": 1510091428, "question_id": 47167993, "link": "https://stackoverflow.com/questions/47167993/strings-of-characters-implementation", "title": "Strings of characters implementation", "body": "<p>In C, how can I declare and use/manipulate a an array of strings? </p>\n\n<p>For example, it could be </p>\n\n<pre><code>a[1]=\"Apples\";\na[2]=\"Pineapples are red\"\n</code></pre>\n\n<p>How can I access these elements and modify them?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 796419, "user_id": 34397, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7deca8ec973c3c0875e9a36e1e3e2c44?s=128&d=identicon&r=PG", "display_name": "SLaks", "link": "https://stackoverflow.com/users/34397/slaks"}, "edited": false, "score": 3, "creation_date": 1510090536, "post_id": 47167816, "comment_id": 81285474, "body": "Learn about function pointers."}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1510090556, "post_id": 47167816, "comment_id": 81285479, "body": "it&#39;s a function pointer."}, {"owner": {"reputation": 768, "user_id": 1195482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13b87b51e4e584a8b990895aaa0361fe?s=128&d=identicon&r=PG", "display_name": "dwilliss", "link": "https://stackoverflow.com/users/1195482/dwilliss"}, "edited": false, "score": 0, "creation_date": 1510091079, "post_id": 47167816, "comment_id": 81285733, "body": "Specifically, a pointer to a function taking no parameters and returning nothing. Now that you know that it&#39;s a function pointer, that should help refine your Google search."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1510091370, "post_id": 47167816, "comment_id": 81285865, "body": "For a pointer to a function, <code>void (*f)(void) = &amp;fs;</code> is the same as <code>void (*f)(void) = fs;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1510090880, "post_id": 47167875, "comment_id": 81285637, "body": "We don&#39;t know that <code>fs</code> is such a function. We just know that it should be that."}, {"owner": {"reputation": 1309, "user_id": 4894161, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152894040958247/picture?type=large", "display_name": "Paul Coldrey", "link": "https://stackoverflow.com/users/4894161/paul-coldrey"}, "reply_to_user": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1510095230, "post_id": 47167875, "comment_id": 81287447, "body": "True klutt - C will compile anything you provide when it comes to pointers and so it is up to the programmer to make sure that the function signatures are the same (or similar enough). Ideally &#39;f&#39; and &#39;fs&#39; would have the same signature otherwise the behaviour becomes quite environment specific."}], "tags": [], "owner": {"reputation": 1309, "user_id": 4894161, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152894040958247/picture?type=large", "display_name": "Paul Coldrey", "link": "https://stackoverflow.com/users/4894161/paul-coldrey"}, "is_accepted": false, "score": 3, "last_activity_date": 1510090791, "creation_date": 1510090791, "answer_id": 47167875, "question_id": 47167816, "link": "https://stackoverflow.com/questions/47167816/what-does-void-fvoid-in-c-mean/47167875#47167875", "title": "what does &quot; void (*f)(void) &quot; in C mean", "body": "<p>It is defining a variable 'f' that is a function pointer which points to the function 'fs'. 'fs' is a function that takes no arguments are returns nothing so it might look like:</p>\n\n<pre><code>void fs(void) { printf(\"in fs\"); }\n</code></pre>\n\n<p>If you ran the following code after the line in your question</p>\n\n<pre><code>(*f)();\n</code></pre>\n\n<p>It would call 'fs' and you would get a print out of \"in fs\"</p>\n"}, {"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 2, "last_activity_date": 1510090924, "creation_date": 1510090924, "answer_id": 47167913, "question_id": 47167816, "link": "https://stackoverflow.com/questions/47167816/what-does-void-fvoid-in-c-mean/47167913#47167913", "title": "what does &quot; void (*f)(void) &quot; in C mean", "body": "<p>I put the same statement in <strong><a href=\"https://cdecl.org/?q=void+%28*f%29%28void%29\" rel=\"nofollow noreferrer\">cdecl</a></strong> and its shows me</p>\n\n<blockquote>\n  <p><em>declare <code>f</code> as pointer to function <code>(void)</code> returning <code>void</code></em>.</p>\n</blockquote>\n\n<p>That is it!! In other words, here, we define a variable <code>f</code> of type as a pointer-to-a-function which accepts no arguments, (<code>(void)</code>) and returns a <code>void</code>, too. We are initializing the variable with the address of another function <code>fs</code>, so that, <code>f</code> points to the <code>fs</code> function and can be used to call / invoke <code>fs</code>.</p>\n"}], "owner": {"reputation": 59, "user_id": 4180296, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/1SdKa.jpg?s=128&g=1", "display_name": "Abderrahmane Mechri", "link": "https://stackoverflow.com/users/4180296/abderrahmane-mechri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1347, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1510090924, "creation_date": 1510090506, "last_edit_date": 1510090776, "question_id": 47167816, "link": "https://stackoverflow.com/questions/47167816/what-does-void-fvoid-in-c-mean", "title": "what does &quot; void (*f)(void) &quot; in C mean", "body": "<p>Can anyone explain this line of code in C : </p>\n\n<pre><code>void (*f)(void)= &amp;fs ; \n</code></pre>\n\n<p>I tried to look in google for an explanation but i didn't find anything about it.</p>\n"}, {"tags": ["c++", "c", "video", "edsdk", "canon-sdk"], "comments": [{"owner": {"reputation": 1374, "user_id": 6385870, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WcPaBJ4dA7E/AAAAAAAAAAI/AAAAAAAAACU/GqGqqqVbT9E/photo.jpg?sz=128", "display_name": "the kamilz", "link": "https://stackoverflow.com/users/6385870/the-kamilz"}, "edited": false, "score": 0, "creation_date": 1510296290, "post_id": 47167521, "comment_id": 81383486, "body": "I&#39;m not familiar with this particular SDK but in my experience this kind of SDK&#39;s comes with <code>Examples</code> or similar folder with sample applications, if exist you should look for (as you guessed) <code>Capture</code> or <code>Video Capture</code> app. In source file there must be captured video frame buffer pointers. If you came this far, rest will be easy."}, {"owner": {"reputation": 984, "user_id": 7565422, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/dDQov.jpg?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/7565422/michael"}, "reply_to_user": {"reputation": 1374, "user_id": 6385870, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WcPaBJ4dA7E/AAAAAAAAAAI/AAAAAAAAACU/GqGqqqVbT9E/photo.jpg?sz=128", "display_name": "the kamilz", "link": "https://stackoverflow.com/users/6385870/the-kamilz"}, "edited": false, "score": 0, "creation_date": 1510302748, "post_id": 47167521, "comment_id": 81386467, "body": "@thekamilz thanks for suggestion, I spent more time to read their documentation and it seems they provide a possibility only to send signals for a video recording start and stop, but edititind frames exactly in a video stream is unavailable, probably this is changeble at firmware level"}, {"owner": {"reputation": 1374, "user_id": 6385870, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WcPaBJ4dA7E/AAAAAAAAAAI/AAAAAAAAACU/GqGqqqVbT9E/photo.jpg?sz=128", "display_name": "the kamilz", "link": "https://stackoverflow.com/users/6385870/the-kamilz"}, "edited": false, "score": 0, "creation_date": 1510303992, "post_id": 47167521, "comment_id": 81387102, "body": "I see. So this SDK is different than I thought. Aynway did you check this one?: <a href=\"https://stackoverflow.com/questions/22965982/canon-edsdk-saving-image-in-my-pc?rq=1\" title=\"canon edsdk saving image in my pc\">stackoverflow.com/questions/22965982/&hellip;</a>"}, {"owner": {"reputation": 984, "user_id": 7565422, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/dDQov.jpg?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/7565422/michael"}, "reply_to_user": {"reputation": 1374, "user_id": 6385870, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WcPaBJ4dA7E/AAAAAAAAAAI/AAAAAAAAACU/GqGqqqVbT9E/photo.jpg?sz=128", "display_name": "the kamilz", "link": "https://stackoverflow.com/users/6385870/the-kamilz"}, "edited": false, "score": 0, "creation_date": 1510306112, "post_id": 47167521, "comment_id": 81388373, "body": "@thekamilz Yes, I was reading about a memory stream also, the main point of memory streams in a EDSDK as I understand is that first of all you send signals for taking a picture, recording a video etc., and when the picture is taken or the video is recorded, you can load object in the memory stream and do some operations on it. That will not affect video fps or other parametrs, because the initial video stream or picture object was modeled and transfered to a camera processor as usually. Instead, my task was to access initial stream object, reduce dimensions, etc., so this could increase fps"}, {"owner": {"reputation": 984, "user_id": 7565422, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/dDQov.jpg?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/7565422/michael"}, "reply_to_user": {"reputation": 1374, "user_id": 6385870, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WcPaBJ4dA7E/AAAAAAAAAAI/AAAAAAAAACU/GqGqqqVbT9E/photo.jpg?sz=128", "display_name": "the kamilz", "link": "https://stackoverflow.com/users/6385870/the-kamilz"}, "edited": false, "score": 0, "creation_date": 1510306500, "post_id": 47167521, "comment_id": 81388641, "body": "@thekamilz If I am wrong, please correct me, because C/C++ are not languages I am working with mainly and EDSDK is kind of new thing for me, but I did that conclusions after reading some main points from their documentation."}], "answers": [{"tags": [], "owner": {"reputation": 438, "user_id": 1384322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b26f6db2132548817587b46bd3d4ff74?s=128&d=identicon&r=PG", "display_name": "gdh", "link": "https://stackoverflow.com/users/1384322/gdh"}, "is_accepted": true, "score": 1, "last_activity_date": 1510862725, "creation_date": 1510862725, "answer_id": 47338204, "question_id": 47167521, "link": "https://stackoverflow.com/questions/47167521/canon-sdk-edsdk-capture-region-of-specified-size-for-video-stream/47338204#47338204", "title": "Canon SDK (EDSDK) capture region of specified size for video stream", "body": "<p>This sdk doesnt allow you to directly get access to hi res streams like industrial cams would. You can access over USB ~960x640 liveview images in sequential JPGs. Movie recording can only be done to internal card, and after stopping transfering the result. Outside of this SDk, use of an external HDMI recorder gives access to a near realtime feed at max FullHD1080p, depending on model and not always \u201cclean\u201d.</p>\n"}], "owner": {"reputation": 984, "user_id": 7565422, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/dDQov.jpg?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/7565422/michael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 213, "favorite_count": 0, "accepted_answer_id": 47338204, "answer_count": 1, "score": 0, "last_activity_date": 1510862725, "creation_date": 1510089072, "question_id": 47167521, "link": "https://stackoverflow.com/questions/47167521/canon-sdk-edsdk-capture-region-of-specified-size-for-video-stream", "title": "Canon SDK (EDSDK) capture region of specified size for video stream", "body": "<p>I am very new to the EDSDK so sorry for maybe weird question in some places.</p>\n\n<p>Is it possible to access a video stream and perform some operations on it using the SDK? I need this to capture very thin region (ROI) of a specified size (for example 3840x10 px) for each frame in the stream. Don`t understand this as compression of a frame, aspect ratios are not needed to follow. These changes in theory should increase fps, because the  region will be very thin (Should they?). </p>\n\n<p>I found the code snippet below from the official documentation, although it seems this causes only to send a signal for starting and stopping video rec, without accessing the stream.</p>\n\n<pre><code>EdsUInt32 record_start = 4; // Begin movie shooting\nerr = EdsSetPropertyData(cameraRef, kEdsPropID_Record, 0, sizeof(record_start), &amp;record_start);\nEdsUInt32 record_stop = 0; // End movie shooting\nerr = EdsSetPropertyData(cameraRef, kEdsPropID_Record, 0, sizeof(record_stop), &amp;record_stop);\n</code></pre>\n\n<p>I would be very thanksful for any suggestions and help. Please feel free to ask any additional information!</p>\n"}, {"tags": ["c", "function", "pointers", "declaration", "implicit-conversion"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1510087831, "post_id": 47167175, "comment_id": 81284224, "body": "<code>int *a[]</code> is an <i>array of pointers to <code>int</code></i>."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 4, "creation_date": 1510087838, "post_id": 47167175, "comment_id": 81284228, "body": "<code>int *a[]</code> indicates an array of pointers to <code>int</code>, not a single pointer. Either <code>int *a</code> or <code>int a[]</code>."}, {"owner": {"reputation": 63, "user_id": 8902623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab0b6a6e870108ecc483dedae5cb4f82?s=128&d=identicon&r=PG&f=1", "display_name": "RobertLD", "link": "https://stackoverflow.com/users/8902623/robertld"}, "edited": false, "score": 0, "creation_date": 1510087929, "post_id": 47167175, "comment_id": 81284275, "body": "This was so simple, I must read up on pointers again obviously. Is there any feasible reason to want an array of pointers to int?"}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1510088202, "post_id": 47167175, "comment_id": 81284390, "body": "Arrays of pointers to structures are common, but I&#39;ve never had a use for an array of pointers to int."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1510088261, "post_id": 47167175, "comment_id": 81284411, "body": "An array of pointers to <code>char</code> are common too, such as the program argument <code>char *argv[]</code>."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1510088292, "post_id": 47167175, "comment_id": 81284431, "body": "<i>As a function parameter</i>, <code>int *a[]</code> is a pointer to pointer to int, equivalent to <code>int **</code>.  It is <b>not</b> an array of pointers to int, though it might well point to the first element of such an array.  This differs from when the same form is used to declare a block- or file-scope variable."}, {"owner": {"reputation": 2446, "user_id": 1532454, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/aNEeA.jpg?s=128&g=1", "display_name": "Jeff Learman", "link": "https://stackoverflow.com/users/1532454/jeff-learman"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1510088712, "post_id": 47167175, "comment_id": 81284618, "body": "Make sure you really understand what @JohnBollinger says here, because this is the hub of the issue.  It&#39;s a common source of confusion for C beginners, and if you don&#39;t understand it, you&#39;ll wade into more trouble later.  The inventors of C used a clever trick, and it pays to thoroughly understand that trick."}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1510089628, "post_id": 47167175, "comment_id": 81285062, "body": "You should have tried searching &quot;c array parameter&quot;. I found this: <a href=\"https://www.tutorialspoint.com/cprogramming/c_passing_arrays_to_functions.htm\" rel=\"nofollow noreferrer\">tutorialspoint.com/cprogramming/&hellip;</a>"}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1510090617, "post_id": 47167175, "comment_id": 81285511, "body": "@RobertLD - arrays of pointers to scalar types often show up when you want to create a &quot;jagged&quot; array, where each &quot;row&quot; may be a different length, or when you don&#39;t have enough memory to allocate a large 2D array in a single chunk."}], "answers": [{"tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": false, "score": 1, "last_activity_date": 1510087992, "creation_date": 1510087992, "answer_id": 47167230, "question_id": 47167175, "link": "https://stackoverflow.com/questions/47167175/how-to-have-a-function-recieve-pointers-as-arguments/47167230#47167230", "title": "How to have a function recieve pointers as arguments?", "body": "<p>In <code>void add(int *a[], const int *b[], const int *c[], int size)</code>, an argument like <code>int *a[]</code> denotes an array of pointers to ints, not an array of ints.\nSimply declare/define your <code>add</code>-function as <code>void add(int a[], const int b[], const int c[], int size) { ...</code> and it should work.</p>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 3, "last_activity_date": 1510090648, "last_edit_date": 1510090648, "creation_date": 1510089164, "answer_id": 47167535, "question_id": 47167175, "link": "https://stackoverflow.com/questions/47167175/how-to-have-a-function-recieve-pointers-as-arguments/47167535#47167535", "title": "How to have a function recieve pointers as arguments?", "body": "<p><strong>Short version:</strong></p>\n\n<p>Change your function declaration and definition from</p>\n\n<pre><code>void add(int *a[], const int *b[], const int *c[], int size)\n</code></pre>\n\n<p>to either</p>\n\n<pre><code>void add(int *a, const int *b, const int *c, int size)\n</code></pre>\n\n<p>or</p>\n\n<pre><code>void add( int a[], const int b[], const int c[], int size )\n</code></pre>\n\n<p><strong>Slightly longer version</strong></p>\n\n<p>Under most circumstances, when the compiler sees an <em>expression</em> of type \"N-element array of <code>T</code>\", it will replace it with an expression of type \"pointer to <code>T</code>\" and the value of the expression will be the address of the first element in the array<sup>1</sup>.</p>\n\n<p>Thus, in the function <em>call</em></p>\n\n<pre><code>add(a,b,c,5);\n</code></pre>\n\n<p>each of the expressions <code>a</code>, <code>b</code>, and <code>c</code> is converted from \"5-element array of <code>int</code>\" to \"pointer to <code>int</code>\".  So your function prototype needs to be either</p>\n\n<pre><code>void add( int *, const int *, const int *, int )\n</code></pre>\n\n<p>or</p>\n\n<pre><code>void add( int [], const int [], const int [], int )\n</code></pre>\n\n<p>In the context of a <em>function parameter declaration</em>, <code>T a[N]</code> and <code>T a[]</code> are interpreted as <code>T *a</code> - they all declare the parameter as a pointer to <code>T</code>, not an array of <code>T</code>.</p>\n\n<p>The array subscript operator can be used on pointer expressions as well as array expressions, so you don't have to change the body of your <code>add</code> function - in fact, the subscript operator is <em>defined</em> in terms of pointer arithmetic.  The expression <code>a[i]</code> is evaluated as <code>*(a + i)</code> - given a starting address <code>a</code>, offset <code>i</code> <em>elements</em> (not bytes!) from that address and dereference the result.  </p>\n\n<p><hr>\n<sup></p>\n\n<ol>\n<li>The exception to this rule is when the array expression is the operand of the <code>sizeof</code> or unary <code>&</code> operators.\n</ol>\n\n<p></sup></p>\n"}, {"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1510089318, "post_id": 47167536, "comment_id": 81284896, "body": "Note that the array &quot;lengths&quot; in the function parameters are ignored. They only matter when there are 2 or more dimensions, for all but the first dimension, so that the compiler can compute the indexing. Otherwise, there is no length constraint in C (with some exceptions when initialising)."}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 4, "last_activity_date": 1510089604, "last_edit_date": 1510089604, "creation_date": 1510089164, "answer_id": 47167536, "question_id": 47167175, "link": "https://stackoverflow.com/questions/47167175/how-to-have-a-function-recieve-pointers-as-arguments/47167536#47167536", "title": "How to have a function recieve pointers as arguments?", "body": "<p>According to the C Standard (6.7.6.3 Function declarators (including prototypes))</p>\n\n<blockquote>\n  <p>7 <strong>A declaration of a parameter as \u2018\u2018array of type\u2019\u2019 shall be\n  adjusted to \u2018\u2018qualified pointer to type\u2019\u2019</strong>, where the type qualifiers\n  (if any) are those specified within the [ and ] of the array type\n  derivation. If the keyword static also appears within the [ and ] of\n  the array type derivation, then for each call to the function, the\n  value of the corresponding actual argument shall provide access to the\n  first element of an array with at least as many elements as specified\n  by the size expression.</p>\n</blockquote>\n\n<p>So these function declarations declare the same one function</p>\n\n<pre><code>void add(int a[5], const int b[5], const int c[5], int size); \nvoid add(int a[5], const int b[10], const int c[15], int size); \nvoid add(int a[], const int b[], const int c[], int size); \n</code></pre>\n\n<p>and are equivalent to the declaration</p>\n\n<pre><code>void add(int *a, const int *b, const int *c, int size); \n</code></pre>\n\n<p>Take into account that according to the same C standard the function <code>main</code> without parameters shall be declared like</p>\n\n<pre><code>int main( void )\n</code></pre>\n\n<p>Also it is a bad idea to use magic \"raw\" numbers as 5.</p>\n\n<p>The program can look like</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid add( int *a, const int *b, const int *c, size_t size); /* Function Prototype */\n\n#define N   5\n\nint main( void ) \n{\n    int a[N];\n    const int b[N] = { 1, 2, 3, 4, 5 };\n    const int c[N] = { 1, 1, 1, 1, 1 };\n\n    add( a, b, c, N );\n\n    for ( size_t i = 0; i &lt; N; i++ ) \n    {\n        printf( \"%d\\t\", a[i] );\n    }\n\n    return 0;\n}\n\nvoid add( int *a, const int *b, const int *c, size_t size ) \n{\n    for ( size_t i = 0; i &lt; size; i++ ) \n    {\n        a[i] = b[i] + c[i];\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 8902623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab0b6a6e870108ecc483dedae5cb4f82?s=128&d=identicon&r=PG&f=1", "display_name": "RobertLD", "link": "https://stackoverflow.com/users/8902623/robertld"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 623, "favorite_count": 0, "accepted_answer_id": 47167536, "answer_count": 3, "score": 3, "last_activity_date": 1562776723, "creation_date": 1510087744, "last_edit_date": 1562776723, "question_id": 47167175, "link": "https://stackoverflow.com/questions/47167175/how-to-have-a-function-recieve-pointers-as-arguments", "title": "How to have a function recieve pointers as arguments?", "body": "<p>I am currently trying to complete a Homework Assignment for one of my college courses, and am stuck. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid add(int *a[], const int *b[], const int *c[], int size); /* Function Prototype */\n\nint main() {\n  int a[5];\n  const int b[] = {1,2,3,4,5};\n  const int c[] = {1,1,1,1,1};\n  add(a,b,c,5);\n\n  for(int i=0; i &lt; 5; i++) {\n    printf(\"%d\\t\", a[i]);\n  }\n  return 0;\n}\n\nvoid add(int *a[], const int *b[], const int *c[], int size) {\n  for (int i = 0; i &lt; size; i++) {\n  a[i]=b[i]+c[i];\n }\n}\n</code></pre>\n\n<p>I am trying to have the function add receive its arguments as pointers instead of as int arrays. I have consulted the textbook, and some of my peers but I am still generally confused. If anyone could please shine some light on why my above implementation does not work?</p>\n\n<p>These are the errors I get:</p>\n\n<pre><code>main.c: In function 'main':\nmain.c:9:7: warning: passing argument 1 of 'add' from incompatible pointer \ntype [-Wincompatible-pointer-types]\n   add(a,b,c,5);\n   ^\nmain.c:3:6: note: expected 'int **' but argument is of type 'int *'\n void add(int *a[], const int *b[], const int *c[], int size); /* Function \nPrototype */\n  ^~~\nmain.c:9:9: warning: passing argument 2 of 'add' from incompatible pointer \ntype [-Wincompatible-pointer-types]\n   add(a,b,c,5);\n     ^\nmain.c:3:6: note: expected 'const int **' but argument is of type 'const int *'\n void add(int *a[], const int *b[], const int *c[], int size); /* Function \nPrototype */\n  ^~~\nmain.c:9:11: warning: passing argument 3 of 'add' from incompatible pointer type [-Wincompatible-pointer-types]\n   add(a,b,c,5);\n       ^\nmain.c:3:6: note: expected 'const int **' but argument is of type 'const int *'\n void add(int *a[], const int *b[], const int *c[], int size); /* Function \nPrototype */\n  ^~~\nmain.c: In function 'add':\nmain.c:19:14: error: invalid operands to binary + (have 'const int *' and 'const int *')\n     a[i]=b[i]+c[i];\n      ~~~~^~~~~\n\nexit status 1\n</code></pre>\n"}, {"tags": ["c++", "c", "struct", "scope"], "comments": [{"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 7, "creation_date": 1510087131, "post_id": 47167009, "comment_id": 81283873, "body": "Swap declarations of <code>struct</code> and <code>displayStudentInformation</code>"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1510087193, "post_id": 47167009, "comment_id": 81283907, "body": "means, put the declaration of <code>struct student</code> before the declaration of <code>displayStudentInformation()</code> function."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1510087388, "post_id": 47167009, "comment_id": 81284010, "body": "@Amin Ataee  Just compile the program as a C++ program.;)"}, {"owner": {"reputation": 25, "user_id": 8013611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d60441f88e245811036b77fbbb68f688?s=128&d=identicon&r=PG&f=1", "display_name": "Amin Ataee", "link": "https://stackoverflow.com/users/8013611/amin-ataee"}, "reply_to_user": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1510087577, "post_id": 47167009, "comment_id": 81284086, "body": "@VladfromMoscow It&#39;s not fundamental difference between C and C++ syntax but i don&#39;t like C++ ."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1510087621, "post_id": 47167009, "comment_id": 81284103, "body": "@AminAtaee Nevertheless the program will compile as a C++ program.:)"}, {"owner": {"reputation": 25, "user_id": 8013611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d60441f88e245811036b77fbbb68f688?s=128&d=identicon&r=PG&f=1", "display_name": "Amin Ataee", "link": "https://stackoverflow.com/users/8013611/amin-ataee"}, "reply_to_user": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1510087783, "post_id": 47167009, "comment_id": 81284198, "body": "@VladfromMoscow Really? Why? can you explain it to me? i&#39;m a beginner"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1510087869, "post_id": 47167009, "comment_id": 81284242, "body": "@AminAtaee In C++ the declaration of the parameter void displayStudentInformation(struct student stu); introduces the elaborated type name struct student in the global scope."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1510089194, "post_id": 47167009, "comment_id": 81284838, "body": "In C++, you don&#39;t need to specify the keyword <code>struct</code> for parameters and variables."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1510089340, "post_id": 47167009, "comment_id": 81284912, "body": "Be away that <code>stu1.firstName = &quot;Ali&quot;</code> is assigning <i>pointers</i> and not contents of strings.  In C++, use the <code>std::string</code> type.  If you must use character pointers, you should have an array to contain the data.  Also use the <code>str*()</code> family of functions for character arrays."}, {"owner": {"reputation": 25, "user_id": 8013611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d60441f88e245811036b77fbbb68f688?s=128&d=identicon&r=PG&f=1", "display_name": "Amin Ataee", "link": "https://stackoverflow.com/users/8013611/amin-ataee"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1510090324, "post_id": 47167009, "comment_id": 81285381, "body": "@ThomasMatthews really? I learn it from my books And video courses .. it&#39;s a dynamic string"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1510090492, "post_id": 47167009, "comment_id": 81285462, "body": "Purge your videos and books.  Use <code>std::string</code> for text (one or more characters).  Use character arrays in structures when you need fixed width fields.  Prefer not to use pointers unless absolutely necessary."}], "answers": [{"tags": [], "owner": {"reputation": 46978, "user_id": 856199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CPtki.png?s=128&g=1", "display_name": "Nikos C.", "link": "https://stackoverflow.com/users/856199/nikos-c"}, "is_accepted": true, "score": 0, "last_activity_date": 1510097820, "creation_date": 1510097820, "answer_id": 47169187, "question_id": 47167009, "link": "https://stackoverflow.com/questions/47167009/type-of-formal-parameter-1-is-incomplete-error/47169187#47169187", "title": "Type of formal parameter 1 is incomplete error", "body": "<p>Define the struct before the function prototype:</p>\n\n<pre><code>struct student {\n  int id;\n  char *firstName;\n  char *lastName;\n  float gpa;\n};\n\nvoid displayStudentInformation(struct student stu);\n</code></pre>\n\n<p>Now the struct is known and can be used in the function prototype.</p>\n\n<p>Note that you can <code>typedef</code> the struct in order to not have to write <code>struct student</code> every time you want to declare a variable of type <code>student</code>:</p>\n\n<pre><code>typedef struct student {\n  int id;\n  char *firstName;\n  char *lastName;\n  float gpa;\n} student;\n\nvoid displayStudentInformation(student stu);\n</code></pre>\n\n<p>Since your question is also tagged with \"c++\" for some reason (?) I have to mention here that in C++, you don't need to <code>typedef</code> it. You can just use <code>student</code> instead of <code>struct student</code> even without the <code>typedef</code>.</p>\n\n<p>If you are going to use C++ instead of C, then I should also mention that it's recommended to use <code>std::string</code> instead of <code>char*</code> for strings. Please note that C++ is a <em>very different</em> language compared to C. If your current goal or task is to learn C, then don't just compile your C code with a C++ compiler. Please use a C compiler. If you use a C++ compiler, you can (and probably will) end up with code that is valid C++ but not valid C.</p>\n"}], "owner": {"reputation": 25, "user_id": 8013611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d60441f88e245811036b77fbbb68f688?s=128&d=identicon&r=PG&f=1", "display_name": "Amin Ataee", "link": "https://stackoverflow.com/users/8013611/amin-ataee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1166, "favorite_count": 0, "accepted_answer_id": 47169187, "answer_count": 1, "score": -1, "last_activity_date": 1510097820, "creation_date": 1510087061, "last_edit_date": 1510097000, "question_id": 47167009, "link": "https://stackoverflow.com/questions/47167009/type-of-formal-parameter-1-is-incomplete-error", "title": "Type of formal parameter 1 is incomplete error", "body": "<p>I'm trying to write a program that print information of a student \nbut Code::Blocks says : </p>\n\n<p>error : Type of formal parameter 1 is incomplete.\nerror : conflicting types for 'displayStudentInformation'\nand this is the code.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid displayStudentInformation(struct student stu);\n\nstruct student{\n  int id;\n  char *firstName;\n  char *lastName;\n  float gpa;\n};\n\nint main()\n{\n  struct student stu1;\n  stu1.id = 101;\n  stu1.firstName = \"Ali\";\n  stu1.lastName = \"Alavi\";\n  stu1.gpa = 18;\n\n  displayStudentInformation(stu1);\n\n  return 0;\n}\n\nvoid displayStudentInformation(struct student stu)\n{\n  printf(\"Student information :\\n\");\n  printf(\"ID : %d\",stu.id);\n  printf(\"First Name : %s\",stu.firstName);\n  printf(\"Last Name :%s\",stu.lastName);\n  printf(\"GPA : %.2f\",stu.gpa);\n  printf(\"\\n\");\n}\n</code></pre>\n"}, {"tags": ["c", "while-loop"], "comments": [{"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 4, "creation_date": 1510085965, "post_id": 47166693, "comment_id": 81283316, "body": "while(menunum !=4 &amp;&amp; menunum != 2)"}, {"owner": {"reputation": 360, "user_id": 5875805, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S4zBy.jpg?s=128&g=1", "display_name": "Tormund Giantsbane", "link": "https://stackoverflow.com/users/5875805/tormund-giantsbane"}, "edited": false, "score": 2, "creation_date": 1510085967, "post_id": 47166693, "comment_id": 81283320, "body": "Your || should be &amp;&amp;"}, {"owner": {"reputation": 402, "user_id": 8873191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6b526f1f6b4a0bd0137d827ccd538d3?s=128&d=identicon&r=PG&f=1", "display_name": "svm", "link": "https://stackoverflow.com/users/8873191/svm"}, "edited": false, "score": 1, "creation_date": 1510085998, "post_id": 47166693, "comment_id": 81283337, "body": "Change <code>while(menunum !=4 || menunum != 2)</code> to <code>while(menunum !=4 &amp;&amp; menunum != 2)</code>"}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 3, "creation_date": 1510085999, "post_id": 47166693, "comment_id": 81283339, "body": "<code>menunum != 4 || menunum != 2</code> is true for <i>every</i> value of <code>menunum</code>. Think about it..."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1510089772, "post_id": 47166693, "comment_id": 81285131, "body": "OK - this is a boolean logic error.  Who close-voted it as &#39;Primarily opinion-based&#39;?  :)"}], "answers": [{"comments": [{"owner": {"reputation": 2446, "user_id": 1532454, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/aNEeA.jpg?s=128&g=1", "display_name": "Jeff Learman", "link": "https://stackoverflow.com/users/1532454/jeff-learman"}, "edited": false, "score": 0, "creation_date": 1510087961, "post_id": 47166949, "comment_id": 81284294, "body": "This is an application of DeMorgan&#39;s Law, <a href=\"https://brilliant.org/wiki/de-morgans-laws\" rel=\"nofollow noreferrer\">brilliant.org/wiki/de-morgans-laws</a> .  It&#39;s a nifty little trick that can help make conditions easier to read without mangling them."}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 2, "last_activity_date": 1510091226, "last_edit_date": 1510091226, "creation_date": 1510086830, "answer_id": 47166949, "question_id": 47166693, "link": "https://stackoverflow.com/questions/47166693/while-loop-wont-end-on-multiple-conditions/47166949#47166949", "title": "While loop wont end on multiple conditions", "body": "<blockquote>\n  <p>So basically the while loop should end if the number 2 or number 4 is\n  inputted in the menu.</p>\n</blockquote>\n\n<p>So just write in C what you have said.</p>\n\n<p>while( !( menunum == 4 || menunum == 2 ) )</p>\n\n<p>or (if to include <code>&lt;iso646.h&gt;</code>)</p>\n\n<pre><code>while( not ( menunum == 4 or menunum == 2 ) )\n</code></pre>\n\n<p>that is equivalent to</p>\n\n<pre><code>while( menunum != 4 &amp;&amp; menunum != 2 )\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 8849278, "user_type": "registered", "profile_image": "https://graph.facebook.com/1493627417340242/picture?type=large", "display_name": "Gediminas Petreikis", "link": "https://stackoverflow.com/users/8849278/gediminas-petreikis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "closed_date": 1510089352, "answer_count": 1, "score": 0, "last_activity_date": 1510091226, "creation_date": 1510085825, "last_edit_date": 1510085845, "question_id": 47166693, "link": "https://stackoverflow.com/questions/47166693/while-loop-wont-end-on-multiple-conditions", "closed_reason": "Not suitable for this site", "title": "While loop wont end on multiple conditions", "body": "<p>So basically the while loop should end if the number 2 or number 4 is inputted in the menu. However, the loop does not end and it keeps redisplaying the main menu. If I use the statements separate one by one it works but if I join them into one condition this happens... </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n\nint main()\n{\n    int answer;\n    int menunum;\n\n    answer = 0;\n    menunum = 0;\n\n\n        while(menunum !=4 || menunum != 2)\n        {\n            printf(\"Wellcome to my game in order to start pick the first option to set the number of questions you want to be asked \\n\");\n            printf(\"1. Enter the amount of questions you want to be asked \\n\");\n            printf(\"2. Start Quiz \\n\");\n            printf(\"3. Display the number of correct and incorrect answers \\n\");\n            printf(\"4. Exit the game \\n\");\n            scanf(\"%d\", &amp;menunum);\n        }\n\n        printf(\"END OF PROGRAM\\n\");\n        scanf(\"%d\", &amp;answer);\n}\n</code></pre>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1510082957, "post_id": 47166001, "comment_id": 81281712, "body": "Show the full code. And define &quot;never works&quot;. And remove the irrelevant tags."}, {"owner": {"reputation": 1, "user_id": 8902246, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-L8GMLPb-PBk/AAAAAAAAAAI/AAAAAAAAACY/eay7Tluhu_Y/photo.jpg?sz=128", "display_name": "JIARUI GUO", "link": "https://stackoverflow.com/users/8902246/jiarui-guo"}, "edited": false, "score": 0, "creation_date": 1510083077, "post_id": 47166001, "comment_id": 81281782, "body": "Thank you for reminding me, first time post something."}, {"owner": {"reputation": 787, "user_id": 7714006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2bf23fe02b176b9ec4b72f65570e0b5?s=128&d=identicon&r=PG&f=1", "display_name": "Aditi Rawat", "link": "https://stackoverflow.com/users/7714006/aditi-rawat"}, "edited": false, "score": 0, "creation_date": 1510083153, "post_id": 47166001, "comment_id": 81281811, "body": "<i>Code never works</i>. It did work as you wanted it to in my system."}, {"owner": {"reputation": 1253974, "user_id": 22656, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=128&d=identicon&r=PG", "display_name": "Jon Skeet", "link": "https://stackoverflow.com/users/22656/jon-skeet"}, "edited": false, "score": 0, "creation_date": 1510083321, "post_id": 47166001, "comment_id": 81281899, "body": "This doesn&#39;t look like C# to me..."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1510083360, "post_id": 47166001, "comment_id": 81281920, "body": "And show the names exactly as you entered them. Why do you expect <code>Ctrl+D</code> to show anything? The 10 names are printed after entering 10 names."}, {"owner": {"reputation": 3155, "user_id": 1426450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24c61b9f354bdea5e67f662c3d6803f2?s=128&d=identicon&r=PG", "display_name": "stephen.vakil", "link": "https://stackoverflow.com/users/1426450/stephen-vakil"}, "edited": false, "score": 0, "creation_date": 1510083569, "post_id": 47166001, "comment_id": 81282024, "body": "Well if you are programming in c# this definitely won&#39;t work, as you are using c/c++ syntax."}, {"owner": {"reputation": 28373, "user_id": 5015238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8790f8091d3c6c58fd45664a165117a?s=128&d=identicon&r=PG", "display_name": "jdweng", "link": "https://stackoverflow.com/users/5015238/jdweng"}, "edited": false, "score": 0, "creation_date": 1510083600, "post_id": 47166001, "comment_id": 81282039, "body": "scanf and printf are standard c language and not part of c#."}, {"owner": {"reputation": 1, "user_id": 8902246, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-L8GMLPb-PBk/AAAAAAAAAAI/AAAAAAAAACY/eay7Tluhu_Y/photo.jpg?sz=128", "display_name": "JIARUI GUO", "link": "https://stackoverflow.com/users/8902246/jiarui-guo"}, "edited": false, "score": 1, "creation_date": 1510083721, "post_id": 47166001, "comment_id": 81282101, "body": "I said it wrong, it&#39;s c code not c#. I thought c and c# are the same, sorry for that."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 0, "creation_date": 1510083892, "post_id": 47166001, "comment_id": 81282184, "body": "<code>Ctrl+D</code> followed by <code>Enter</code>, and please act on the second comment: from @usr."}, {"owner": {"reputation": 1, "user_id": 8902246, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-L8GMLPb-PBk/AAAAAAAAAAI/AAAAAAAAACY/eay7Tluhu_Y/photo.jpg?sz=128", "display_name": "JIARUI GUO", "link": "https://stackoverflow.com/users/8902246/jiarui-guo"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1510084127, "post_id": 47166001, "comment_id": 81282310, "body": "@WeatherVane how I make it works if I only want 5 names without change array?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1510119336, "post_id": 47166001, "comment_id": 81293938, "body": "Check return value of <code>scanf</code>."}], "answers": [{"tags": [], "owner": {"reputation": 2446, "user_id": 1532454, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/aNEeA.jpg?s=128&g=1", "display_name": "Jeff Learman", "link": "https://stackoverflow.com/users/1532454/jeff-learman"}, "is_accepted": false, "score": 0, "last_activity_date": 1510089547, "last_edit_date": 1510089547, "creation_date": 1510089235, "answer_id": 47167547, "question_id": 47166001, "link": "https://stackoverflow.com/questions/47166001/character-string-2d-array/47167547#47167547", "title": "Character String 2D array", "body": "<p>As written, your code tries to read 10 names no matter what.</p>\n\n<p>To exit on end-of-file (e.g. by entering control-D ENTER in some operating systems), you need to check for end-of-file in the loop that reads the data.  In that case, you'll also need to remember how many values you've read, and only print that number.  (If you don't, it'll seem to work but only because the array is initialized to zero.  If you used the same array again later, you could get garbled results.)</p>\n\n<p>See the manual page for scanf and look for EOF.</p>\n\n<p>You might also want to print each name with a newline at the end.</p>\n"}], "owner": {"reputation": 1, "user_id": 8902246, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-L8GMLPb-PBk/AAAAAAAAAAI/AAAAAAAAACY/eay7Tluhu_Y/photo.jpg?sz=128", "display_name": "JIARUI GUO", "link": "https://stackoverflow.com/users/8902246/jiarui-guo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1510089547, "creation_date": 1510082901, "last_edit_date": 1510083584, "question_id": 47166001, "link": "https://stackoverflow.com/questions/47166001/character-string-2d-array", "title": "Character String 2D array", "body": "<p>A section of code to declare a character array with up to 16 values and 10 names, a statement to read in the character array as a character string, then print them out as a string using the %s format character. Enter a name from the keyboard.</p>\n\n<pre><code>int i;\n\nchar name[10][16];\n\nfor(i=0; i&lt;10; i++){\n   scanf(\"%s\", name[i]);\n}\n\nfor(i=0; i&lt;10; i++){\n   printf(\"%s\", name[i]);\n}\n</code></pre>\n\n<p>After I enter names by keyboard, ctrl+d does't shows up anything.</p>\n\n<p>Ex enter:</p>\n\n<p>linus</p>\n\n<p>chenxi</p>\n\n<p>yangzi</p>\n\n<p>ctrl+d</p>\n"}, {"tags": ["c", "arrays", "function", "multidimensional-array"], "comments": [{"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1510082365, "post_id": 47165820, "comment_id": 81281412, "body": "Can you explain what you mean by &quot;the function itself is only taking in the first value of the 2D array instead of all the values&quot;?"}, {"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1510082435, "post_id": 47165820, "comment_id": 81281455, "body": "I don&#39;t think you should change the values in the 2D array. Instead, return a a value from the <code>weight()</code> function."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1510082449, "post_id": 47165820, "comment_id": 81281461, "body": "<code>float pyramid[bottom][bottom]</code> and <code>float x[100][100]</code> don&#39;t match (if <code>bottom != 100</code>)."}, {"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1510082568, "post_id": 47165820, "comment_id": 81281524, "body": "What do you mean by &quot;don&#39;t match&quot;? Can you give an example?"}, {"owner": {"reputation": 3266, "user_id": 6854407, "user_type": "registered", "profile_image": "https://graph.facebook.com/10205840043960722/picture?type=large", "display_name": "Jim Rogers", "link": "https://stackoverflow.com/users/6854407/jim-rogers"}, "edited": false, "score": 0, "creation_date": 1510082867, "post_id": 47165820, "comment_id": 81281670, "body": "You pass in the indices (y and z) of the first array element to function weight, but weight never modifies those values to index the other elements in the array."}, {"owner": {"reputation": 25, "user_id": 7128271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/997157e4557abfbc4203fa62e90df2f9?s=128&d=identicon&r=PG&f=1", "display_name": "Bobert", "link": "https://stackoverflow.com/users/7128271/bobert"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1510083160, "post_id": 47165820, "comment_id": 81281814, "body": "@BLUEPIXY So for the function to carry all values I have to make the parameters the same?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1510083305, "post_id": 47165820, "comment_id": 81281893, "body": "@N.Sweeney Yes (For proper operation). See <a href=\"https://stackoverflow.com/a/47134882/971127\">this</a>"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1510088279, "post_id": 47165820, "comment_id": 81284423, "body": "Not to throw a wrench into your logic, but &quot;<i>if the person is on an edge of a pyramid they only are supporting one persons weight</i>&quot; isn&#39;t exactly true. If you look at a freebody diagram for each person, people on the edge support 1/2 of each above, e.g. <code>G</code> supports <code>D&#47;2 + B&#47;2 + A&#47;2</code>. It has a cumulative effect with depth in the pyramid."}], "answers": [{"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1510104970, "post_id": 47167055, "comment_id": 81290014, "body": "While not what is called for by the question, a non-recursive solution avoids the function call overhead generated by each recursive call. While for small pyramids, it doesn&#39;t matter, but for large computations it adds up. You can also replace the 2D array with a simple pointer to type and <code>realloc</code> as required. Good answer."}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1510105162, "post_id": 47167055, "comment_id": 81290052, "body": "@DavidC.Rankin Yeah I thought about that too, but I also thought that would be a bit to far from the question. Was also considering dynamic allocation and pointers, but I settled for this."}], "tags": [], "owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "is_accepted": true, "score": 3, "last_activity_date": 1510088502, "last_edit_date": 1510088502, "creation_date": 1510087237, "answer_id": 47167055, "question_id": 47165820, "link": "https://stackoverflow.com/questions/47165820/2d-array-function-only-passing-in-1-value/47167055#47167055", "title": "2D array function only passing in 1 Value", "body": "<p>There's one major mistake in your code. You cannot have a variable size on <code>float pyramid[bottom][bottom]</code> and then send it to a function accepting a <code>float [100][100]</code>. A quick fix for this is to just declare <code>float pyramid[100][100]</code> No matter the size of <code>bottom</code>.</p>\n\n<p>As for the rest, I made three solutions. One solution fixes the pyramid without printouts, and you can print it afterwards. The reason is that it is much simpler. You do not have to worry about the recursive calls being in a specific order. After that there's one solution that calculates the weight of a given person. The last solution handles printouts inside the recursive function.</p>\n\n<p>Code with relevant changes:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid weight(float w[100][100],int y, int x,int b)\n{\n    if(y&lt;b) {\n        float current = w[y][x];\n        w[y+1][x] += current / 2;\n        w[y+1][x+1] += current /2;\n        weight(w, y+1, x, b);\n        if(x==y)\n            weight(w, y+1, x+1, b);\n    }\n}\n\nint main()\n{\n    ...\n\n    //Initializes pyramid array at correct length                                                                  \n    float pyramid[100][100];\n\n    ...\n\n    // Transform pyramid into weighted pyramid\n    weight(pyramid,0,0,bottom);\n\n    //Prints out all weight values after supporting weight values have been added thru recursive function          \n    printf(\"Pyramid after weight distribution\\n\");\n    for(int i=0; i&lt;bottom;i++)\n    {\n        for(int j=0;j&lt;=i;j++)\n        {\n            printf(\"%.2f \",pyramid[i][j]);\n        }\n        printf(\"\\n\");\n    }\n}\n</code></pre>\n\n<p>I also took the liberty of dividing the weight by 2, for obvious reasons. I also changed the name of the variables to something a bit less confusing for me.</p>\n\n<p>input.txt :</p>\n\n<pre><code>5 3 4 5 7 5 3 4 5 3 6 7 8 4 7 5\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>$ ./a.out &lt; input.txt\nPyramid before weight distribution\n3.00 \n4.00 5.00 \n7.00 5.00 3.00 \n4.00 5.00 3.00 6.00 \n7.00 8.00 4.00 7.00 5.00 \nPyramid after weight distribution\n3.00 \n5.50 6.50 \n9.75 11.00 6.25 \n8.88 15.38 11.62 9.12 \n11.44 20.12 17.50 17.38 9.56 \n</code></pre>\n\n<p>An alternative recursive approach is to write a function that returns the total weight for a particular node. Looks like this:</p>\n\n<pre><code>float gweight(float w[100][100], int y, int x)\n{\n    float ret = w[y][x];\n\n    if(y==0)\n        return ret;\n    if(x&lt;y)\n        ret +=  gweight(w, y-1, x) / 2;\n    if(x&gt;0)\n        ret += gweight(w, y-1, x-1) / 2;\n    return ret;\n}\n</code></pre>\n\n<p>And then you can print the result with a similar loop as above, but change the print statement to: <code>printf(\"%.2f \",gweight(pyramid, i, j))</code></p>\n\n<p>The drawback of this method is that you will calculate the same value many more times. For huge pyramids it could greatly impact performance.</p>\n\n<p>And finally, a version that actually does exactly what you want.</p>\n\n<pre><code>void weight(float w[100][100],int y, int x,int b)\n{\n    if(y==b)\n        return;\n\n    float current = w[y][x];\n\n    printf(\"%.2f \", current);\n\n    if(y&lt;b) {\n        w[y+1][x] += current / 2;\n        w[y+1][x+1] += current /2;\n    }\n\n    if(y==x) {\n        printf(\"\\n\");\n        weight(w, y+1, 0, b);\n    } else\n        weight(w, y, x+1, b);\n}\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 7128271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/997157e4557abfbc4203fa62e90df2f9?s=128&d=identicon&r=PG&f=1", "display_name": "Bobert", "link": "https://stackoverflow.com/users/7128271/bobert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 47167055, "answer_count": 1, "score": 2, "last_activity_date": 1510088636, "creation_date": 1510082178, "last_edit_date": 1510088636, "question_id": 47165820, "link": "https://stackoverflow.com/questions/47165820/2d-array-function-only-passing-in-1-value", "title": "2D array function only passing in 1 Value", "body": "<p>I have a program that takes in a pyramid of people with weight values and is supposed to use a recursive function to add the weight of the two people that the person is supporting (if the person is on an edge of a pyramid they only are supporting one persons weight I included a picture encase I didn't explain this well enough) and add that to its own weight value. The problem I'm currently having is simply that the function itself is only taking in the first value of the 2D array instead of all the values?\n<img src=\"https://i.stack.imgur.com/SZbnb.png\" alt=\"Pyramid Example\"></p>\n\n<p>Code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid weight(float x[100][100],int y, int z,int b)\n{\n    if(z==0&amp;&amp;y==0)\n    {\n        printf(\"%.2f\\n\",x[y][z]);\n        weight(x,y+1,z,b);\n        return;\n    }\n    if(z==0&amp;&amp;y==b)\n    {\n        printf(\"%.2f\",x[y][z]);\n        x[y][z]+=x[y-1][z];\n        printf(\"%.2f\",x[y][z]);\n\n    }\n    if(z==0&amp;&amp;y!=b)\n    {\n        x[y][z]+=x[y-1][z];\n        printf(\"%.2f\",x[y][z]);\n        weight(x,y+1,z,b);\n    }\n    if(y==z&amp;&amp;y==b)\n    {\n        printf(\"%.2f\",x[y][z]);\n        x[y][z]+=x[y-1][z-1];\n        return;\n    }\n    if(y==z&amp;&amp;y!=b)\n    {\n\n        x[y][z]+=x[y-1][z-1];\n        printf(\"%.2f\\n\",x[y][z]);\n        weight(x,y+1,0,b);\n    }\n    if(y!=z)\n    {\n        printf(\"%.2f\",x[y][z]);\n        x[y][z]+=x[y-1][z]+x[y-1][z-1];\n    }\n\n}\n\n\nint main()\n{\n\n    //Initialize Variables for use within the program\n    int bottom;\n    int input;\n    int counter=0;\n\n    printf(\"How many people are in the bottom row of your pyramid: \");\n    scanf(\"%d\",&amp;bottom);\n\n    //Initializes pyramid array at correct length\n    float pyramid[bottom][bottom];\n\n    //Takes in all user given input values for pyramid weights\n    for(int i=0;i&lt;bottom;i++)\n    {\n        for(int j=0;j&lt;=i;j++)\n        {\n            printf(\"Please input the weight of person #%d: \",++counter);\n            scanf(\"%f\",&amp;pyramid[i][j]);\n        }\n    }\n\n    //Prints out all weight values based on user given input\n    printf(\"Pyramid before weight distribution\\n\");\n    for(int i=0; i&lt;bottom;i++)\n    {\n        for(int j=0;j&lt;=i;j++)\n        {\n            printf(\"%.2f \",pyramid[i][j]);\n        }\n        printf(\"\\n\");\n    }\n\n    //Prints out all weight values after supporting weight values have been added thru recursive function\n    printf(\"Pyramid after weight distribution\\n\");\n    weight(pyramid,0,0,bottom-1);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "sockets", "udp", "wireshark"], "comments": [{"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1510082376, "post_id": 47165737, "comment_id": 81281420, "body": "Run the server under <code>strace</code>.  This will produce a tremendous volume of gobbledygook.  Wait until it stops spewing at your terminal.  Then, without hitting control-C, copy and past the last ten to fifteen lines of gobbledygook, UNEDITED, into the question.  Then run the sending client.  If that causes anything more to appear in the terminal window where the server is running, copy and paste that into the question too, again, UNEDITED."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1510082377, "post_id": 47165737, "comment_id": 81281421, "body": "Have you tried running the server under a debugger, to see if it&#39;s receiving the packets?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1510082401, "post_id": 47165737, "comment_id": 81281434, "body": "Also run Wireshark on the server to see if it&#39;s receiving the packets."}, {"owner": {"reputation": 3, "user_id": 8901896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9114cb1fc3a402a0a28641664959ecbd?s=128&d=identicon&r=PG&f=1", "display_name": "MathiasKroll", "link": "https://stackoverflow.com/users/8901896/mathiaskroll"}, "edited": false, "score": 0, "creation_date": 1510084692, "post_id": 47165737, "comment_id": 81282657, "body": "Wireshark on server side sees the exact same thing that the client sees.  Note: I can ping both sides and both sides pick up ICMP from each others pings."}], "answers": [{"comments": [{"owner": {"reputation": 255961, "user_id": 464744, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/3dfd6067f4c69986a652444f44bb6d7c?s=128&d=identicon&r=PG", "display_name": "Blender", "link": "https://stackoverflow.com/users/464744/blender"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1510083370, "post_id": 47165898, "comment_id": 81281925, "body": "@MartinJames: I tested the code locally and it produces the expected result."}, {"owner": {"reputation": 3, "user_id": 8901896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9114cb1fc3a402a0a28641664959ecbd?s=128&d=identicon&r=PG&f=1", "display_name": "MathiasKroll", "link": "https://stackoverflow.com/users/8901896/mathiaskroll"}, "edited": false, "score": 0, "creation_date": 1510084609, "post_id": 47165898, "comment_id": 81282614, "body": "Tried to run with changes...no success."}, {"owner": {"reputation": 255961, "user_id": 464744, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/3dfd6067f4c69986a652444f44bb6d7c?s=128&d=identicon&r=PG", "display_name": "Blender", "link": "https://stackoverflow.com/users/464744/blender"}, "reply_to_user": {"reputation": 3, "user_id": 8901896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9114cb1fc3a402a0a28641664959ecbd?s=128&d=identicon&r=PG&f=1", "display_name": "MathiasKroll", "link": "https://stackoverflow.com/users/8901896/mathiaskroll"}, "edited": false, "score": 0, "creation_date": 1510087896, "post_id": 47165898, "comment_id": 81284261, "body": "@MathiasKroll: Does running the client and server on the same computer work?"}, {"owner": {"reputation": 3, "user_id": 8901896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9114cb1fc3a402a0a28641664959ecbd?s=128&d=identicon&r=PG&f=1", "display_name": "MathiasKroll", "link": "https://stackoverflow.com/users/8901896/mathiaskroll"}, "edited": false, "score": 0, "creation_date": 1510090171, "post_id": 47165898, "comment_id": 81285310, "body": "I did run the client and server on same computer and it gave me &quot;abcdefg...etc.&quot; for about 10 lines which is new.  Is that what you got?"}, {"owner": {"reputation": 3, "user_id": 8901896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9114cb1fc3a402a0a28641664959ecbd?s=128&d=identicon&r=PG&f=1", "display_name": "MathiasKroll", "link": "https://stackoverflow.com/users/8901896/mathiaskroll"}, "edited": false, "score": 0, "creation_date": 1510113349, "post_id": 47165898, "comment_id": 81292217, "body": "would have been cool for someone to figure out two separate client/server instances as oppose to keeping them on the same system.. but whatever...thanks blender and the rest (Marty...had to add his usual two cents...worth about that much)"}], "tags": [], "owner": {"reputation": 255961, "user_id": 464744, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/3dfd6067f4c69986a652444f44bb6d7c?s=128&d=identicon&r=PG", "display_name": "Blender", "link": "https://stackoverflow.com/users/464744/blender"}, "is_accepted": true, "score": 2, "last_activity_date": 1510082529, "creation_date": 1510082529, "answer_id": 47165898, "question_id": 47165737, "link": "https://stackoverflow.com/questions/47165737/udp-client-server-c/47165898#47165898", "title": "UDP client/server c", "body": "<p>I think you just forgot to print out the received data in the client:</p>\n\n<pre><code>if (strncmp(sbuf, rbuf, data_size) != 0)\n    printf(\"Data is corrupted\\n\");\nclose(sd);\n\nprintf(rbuf);  // &lt;----\n\nreturn(0);\n</code></pre>\n\n<p>Your client code currently only prints out error messages. If everything works, it won't produce any output.</p>\n"}], "owner": {"reputation": 3, "user_id": 8901896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9114cb1fc3a402a0a28641664959ecbd?s=128&d=identicon&r=PG&f=1", "display_name": "MathiasKroll", "link": "https://stackoverflow.com/users/8901896/mathiaskroll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2651, "favorite_count": 0, "accepted_answer_id": 47165898, "answer_count": 1, "score": 0, "last_activity_date": 1510088720, "creation_date": 1510081914, "last_edit_date": 1510088720, "question_id": 47165737, "link": "https://stackoverflow.com/questions/47165737/udp-client-server-c", "title": "UDP client/server c", "body": "<p>I have been looking everywhere for an answer.  I am new to coding in C and would have loved it if my Professor would have allowed us to choose the language, but I digress.  I am running Oracle V-Box locally running Ubuntu client and a Ubuntu server.  I compile the code below on both the server and the client, with a few warnings.  I run the code on the server (seems fine) and then on the client.  The client is asking to send over a PDF file just like I did with the TCP socket transfer (which worked great).  I also have Wireshark running on the client and server, and it looks like the request is sent out from the client but the server doesn't do anything and just sits on both ends without pulling the file over.  Not sure if it is the code or something else.</p>\n\n<pre><code>/* Echo server using UDP */\n#include &lt;stdio.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;netinet/in.h&gt;\n\n#define SERVER_UDP_PORT     2466    \n#define MAXLEN      4096\n\nint main(int argc, char **argv)\n{\n    int     sd, client_len, port, n;\n    char    buf[MAXLEN];\n    struct  sockaddr_in     server, client;\n\n    switch(argc) {\n    case 1:\n        port = SERVER_UDP_PORT;\n        break;\n    case 2:\n        port = atoi(argv[1]);\n        break;\n    default:\n        fprintf(stderr, \"Usage: %s [port]\\n\", argv[0]);\n        exit(1);\n    }\n\n    /* Create a datagram socket */\n    if ((sd = socket(AF_INET, SOCK_DGRAM, 0)) == -1) {\n        fprintf(stderr, \"Can't create a socket\\n\");\n        exit(1);\n    }\n\n    /* Bind an address to the socket */\n    bzero((char *)&amp;server, sizeof(server));\n    server.sin_family = AF_INET;\n    server.sin_port = htons(port);\n    server.sin_addr.s_addr = htonl(INADDR_ANY);\n    if (bind(sd, (struct sockaddr *)&amp;server, \n             sizeof(server)) == -1) {\n        fprintf(stderr, \"Can't bind name to socket\\n\");\n        exit(1);\n    }\n\n    while (1) {\n        client_len = sizeof(client);\n        if ((n = recvfrom(sd, buf, MAXLEN, 0, \n                          (struct sockaddr *)&amp;client, &amp;client_len)) &lt; 0) {\n            fprintf(stderr, \"Can't receive datagram\\n\");\n            exit(1);\n        }\n\n        if (sendto(sd, buf, n, 0, \n                   (struct sockaddr *)&amp;client, client_len) != n) {\n            fprintf(stderr, \"Can't send datagram\\n\");\n            exit(1);\n        }\n    }\n    close(sd);\n    return(0);\n}\n</code></pre>\n\n<p>This is the client code</p>\n\n<pre><code>// UDP Echo Client\n\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/time.h&gt;\n#include &lt;netdb.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;netinet/in.h&gt;\n#define SERVER_UDP_PORT         2466\n#define MAXLEN                  4096\n#define DEFLEN                  64\n\nlong delay(struct timeval t1, struct timeval t2)\n{\n    long d;\n    d = (t2.tv_sec - t1.tv_sec) * 1000;\n    d += ((t2.tv_usec - t1.tv_usec + 500) / 1000);\n    return(d);\n}\n\nint main(int argc, char **argv)\n{\n    int     data_size = DEFLEN, port = SERVER_UDP_PORT;\n    int     i, j, sd, server_len;\n    char    *pname, *host, rbuf[MAXLEN], sbuf[MAXLEN];\n    struct  hostent         *hp;\n    struct  sockaddr_in     server;\n    struct  timeval         start, end;\n    unsigned long address;\n\n    pname = argv[0];\n    argc--;\n    argv++;\n    if (argc &gt; 0 &amp;&amp; (strcmp(*argv, \"-s\") == 0)) {\n        if (--argc &gt; 0 &amp;&amp; (data_size = atoi(*++argv))) {\n            argc--;\n            argv++;\n        }\n        else {\n            fprintf(stderr,\n                    \"Usage: %s [-s data_size] host [port]\\n\", pname);\n            exit(1);\n        }\n    }\n    if (argc &gt; 0) {\n        host = *argv;\n        if (--argc &gt; 0)\n            port = atoi(*++argv);\n    }\n\n    else {\n        fprintf(stderr,\n                \"Usage: %s [-s data_size] host [port]\\n\", pname);\n        exit(1);\n    }\n\n    if ((sd = socket(AF_INET, SOCK_DGRAM, 0)) == -1) {\n        fprintf(stderr, \"Can't create a socket\\n\");\n        exit(1);\n    }\n\n    bzero((char *)&amp;server, sizeof(server));\n    server.sin_family = AF_INET;\n    server.sin_port = htons(port);\n    if ((hp = gethostbyname(host)) == NULL) {\n        fprintf(stderr, \"Can't get server's IP address\\n\");\n        exit(1);\n    }\n    bcopy(hp-&gt;h_addr, (char *) &amp;server.sin_addr, hp-&gt;h_length);\n\n    if (data_size &gt; MAXLEN) {\n        fprintf(stderr, \"Data is too big\\n\");\n        exit(1);\n    }\n    for (i = 0; i &lt; data_size; i++) {\n        j = (i &lt; 26) ? i : i % 26;\n        sbuf[i] = 'a' + j;\n    } // construct data to send to the server\n    gettimeofday(&amp;start, NULL); /* start delay measurement */\n    server_len = sizeof(server);\n    if (sendto(sd, sbuf, data_size, 0, (struct sockaddr *)\n               &amp;server, server_len) == -1) {\n        fprintf(stderr, \"sendto error\\n\");\n        exit(1);\n    }\n    if (recvfrom(sd, rbuf, MAXLEN, 0, (struct sockaddr *)\n                 &amp;server, &amp;server_len) &lt; 0) {\n        fprintf(stderr, \"recvfrom error\\n\");\n        exit(1);\n    }\n    gettimeofday(&amp;end, NULL); /* end delay measurement */\n    if (strncmp(sbuf, rbuf, data_size) != 0)\n        printf(\"Data is corrupted\\n\");\n    close(sd);\n    return(0);\n}\n</code></pre>\n\n<p>Once I compile I run the code on Server normally:  </p>\n\n<pre><code>./udp_server\n</code></pre>\n\n<p>and just sits waiting from the client.</p>\n\n<p>Once I compile I run the code on Client: </p>\n\n<pre><code>./udp_client -s 1500 10.0.2.11 2466 &gt; test.pdf\n</code></pre>\n\n<p>I run this which is (./udp_client -s data_rate server_IP Server_Port > (output to file on desktop of client))</p>\n\n<p>This just produces a blank page.  It should have a few pages of text and pics.</p>\n\n<p>I also am getting the send out from client on Wireshark but no reply from server.\n<a href=\"https://i.stack.imgur.com/5LMeU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5LMeU.png\" alt=\"\"></a></p>\n\n<p>This is what i am getting when i run STRACE from terminal </p>\n\n<p><a href=\"https://i.stack.imgur.com/NDEa6.png\" rel=\"nofollow noreferrer\">strace ./udp_server</a></p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 2, "creation_date": 1510081324, "post_id": 47165525, "comment_id": 81280852, "body": "This shouldn&#39;t even compile. You call <code>printfcomma(buf, n &#47; 1000);</code> but your function is written <code>void printfcomma(char *buf) {</code>..."}, {"owner": {"reputation": 101, "user_id": 4708226, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/92b19ddd8aa4f7cbe6a72d811235ad94?s=128&d=identicon&r=PG&f=1", "display_name": "carolzinha", "link": "https://stackoverflow.com/users/4708226/carolzinha"}, "reply_to_user": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1510081453, "post_id": 47165525, "comment_id": 81280944, "body": "Sorry error when passing code to post, I edited,"}], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 4708226, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/92b19ddd8aa4f7cbe6a72d811235ad94?s=128&d=identicon&r=PG&f=1", "display_name": "carolzinha", "link": "https://stackoverflow.com/users/4708226/carolzinha"}, "edited": false, "score": 0, "creation_date": 1510082371, "post_id": 47165643, "comment_id": 81281415, "body": "I understand, now you can explain to me something else, I want to expand this function look at the topic. Example if I add a <code>%s</code> it me printa it 3x, so <code>test: ,536</code> ` test: ,000` ` test: 100`"}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "reply_to_user": {"reputation": 101, "user_id": 4708226, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/92b19ddd8aa4f7cbe6a72d811235ad94?s=128&d=identicon&r=PG&f=1", "display_name": "carolzinha", "link": "https://stackoverflow.com/users/4708226/carolzinha"}, "edited": false, "score": 0, "creation_date": 1510082592, "post_id": 47165643, "comment_id": 81281538, "body": "@carolzinha.: As far as I know this is another separate question. But looking at the code I can see it can be reused. You can try to understand this and reuse. This answer solves your problem.For other question if you don&#39;t understand ask a seperate question after you have tried enough."}], "tags": [], "owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "is_accepted": true, "score": 1, "last_activity_date": 1510081522, "creation_date": 1510081522, "answer_id": 47165643, "question_id": 47165525, "link": "https://stackoverflow.com/questions/47165525/add-comma-in-a-sprintf-function/47165643#47165643", "title": "Add comma in a sprintf function", "body": "<p>You are overwriting.</p>\n\n<p>You should do <code>sprintf(s+ strlen(s),\"abcde\");</code></p>\n\n<pre><code>void printfcomma(char *buf,int n) {\n    if (n &lt; 1000) {\n        sprintf(buf+strlen(buf), \"%d\", n);\n        return;\n    }\n    printfcomma(buf, n / 1000);\n    sprintf(buf+strlen(buf), \",%03d\", n %1000);\n    return;\n}\n</code></pre>\n\n<p>In calling function </p>\n\n<pre><code>memset(s,0,sizeof(s));// s is the char array.\nprintfcomma(s,100000536);\n</code></pre>\n\n<h3>Output</h3>\n\n<p><code>100,000,536</code></p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1510094785, "last_edit_date": 1510094785, "creation_date": 1510094469, "answer_id": 47168600, "question_id": 47165525, "link": "https://stackoverflow.com/questions/47165525/add-comma-in-a-sprintf-function/47168600#47168600", "title": "Add comma in a sprintf function", "body": "<p>As answered by <a href=\"https://stackoverflow.com/a/47165643/2410359\">@coderredoc</a>, code is over-writing <code>buf</code>.</p>\n\n<p>An alternative to calling <code>strlen()</code> is to take advantage of the return value of <code>sprintf()</code>.</p>\n\n<blockquote>\n  <p>The <code>sprintf</code> function returns the number of characters written in the array, not counting the terminating null character, or a negative value if an encoding error occurred.  C11dr \u00a77.21.6.6 3</p>\n</blockquote>\n\n<p>Further: code should handle negative numbers too.</p>\n\n<p><code>const char* text</code> use is unclear.  Example code below does not use it.</p>\n\n<pre><code>int printfcomma(char *buf, int n) {\n  if (n &gt; -1000 &amp;&amp; n &lt; 1000) { // avoid (abs(n) &lt; 1000) here.  abs(INT_MIN) is a problem\n    return sprintf(buf, \"%d\", n);\n  }\n\n  int len = printfcomma(buf, n / 1000);\n  if (len &gt; 0) {\n    len += sprintf(buf + len, \",%03d\", text, abs(n % 1000));  // do not print `-`\n  } \n  return len;\n}\n</code></pre>\n\n<p>Usage</p>\n\n<pre><code>char s[sizeof(int)*CHAR_BIT]; // Somehow, insure buffer size is sufficient.\nprintfcomma(s, INT_MIN);\nputs(s); --&gt; -2,147,483,648\n</code></pre>\n"}], "owner": {"reputation": 101, "user_id": 4708226, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/92b19ddd8aa4f7cbe6a72d811235ad94?s=128&d=identicon&r=PG&f=1", "display_name": "carolzinha", "link": "https://stackoverflow.com/users/4708226/carolzinha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1046, "favorite_count": 0, "accepted_answer_id": 47165643, "answer_count": 2, "score": 0, "last_activity_date": 1510094785, "creation_date": 1510081042, "last_edit_date": 1510082342, "question_id": 47165525, "link": "https://stackoverflow.com/questions/47165525/add-comma-in-a-sprintf-function", "title": "Add comma in a sprintf function", "body": "<p>I was looking at topic: <a href=\"https://stackoverflow.com/questions/1449805/how-to-format-a-number-from-1123456789-to-1-123-456-789-in-c\">How to format a number from 1123456789 to 1,123,456,789 in C?</a></p>\n\n<p>So I mounted my code based on an existing one.</p>\n\n<pre><code>void printfcomma(char *buf, const char* text int n) {\n    if (n &lt; 1000) {\n        sprintf(buf, \"%s %d\", text, n);\n        return;\n    }\n    printfcomma(buf, n / 1000);\n    sprintf(buf, \"%s ,%03d\", text, n %1000);\n    return;\n}\n</code></pre>\n\n<p>sprintf is only returning the final 3 digits. Example: <strong>,536</strong></p>\n\n<p>Does anyone have any idea why they are not showing the other numbers</p>\n"}, {"tags": ["c", "assembly", "arm", "calling-convention"], "comments": [{"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1510081046, "post_id": 47165455, "comment_id": 81280679, "body": "This is not really a question about C."}, {"owner": {"reputation": 1791, "user_id": 794606, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9a1d5c337bdddae373bbdcb92fdb7077?s=128&d=identicon&r=PG", "display_name": "Jacek Cz", "link": "https://stackoverflow.com/users/794606/jacek-cz"}, "edited": false, "score": 0, "creation_date": 1510081065, "post_id": 47165455, "comment_id": 81280689, "body": "why use assembler, when are used inefficient functions, for example <code>printf</code>?"}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1510081308, "post_id": 47165455, "comment_id": 81280846, "body": "If this is C code, why do you compile it with <code>g++</code>, a compiler for C++?"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1510081551, "post_id": 47165455, "comment_id": 81280993, "body": "Single-step your code with a debugger.  The most obvious problem is that when <code>bne</code> falls through, you fall off the end of your code.  Also, <code>printf</code> (and any other ABI-compliant function) can/will clobber <code>r0-r3</code>, so your loop should use a call-preserved register.  (Similarly, you don&#39;t need to save/restore r0..r3 with push/pop around main.)"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1510081803, "post_id": 47165455, "comment_id": 81281124, "body": "See <a href=\"https://stackoverflow.com/questions/39503997/how-to-run-a-single-line-of-assembly-then-see-r1-and-condition-flags\" title=\"how to run a single line of assembly then see r1 and condition flags\">stackoverflow.com/questions/39503997/&hellip;</a> for using qemu + gdb to debug an ARM binary on an x86 Linux desktop.  (But I didn&#39;t try with libc, just a bare environment)."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1510081845, "post_id": 47165455, "comment_id": 81281148, "body": "Hint, it would be <i>much</i> more efficient to reverse the string in memory and then make one <code>puts</code> call (or a <code>write</code> system call.)"}, {"owner": {"reputation": 15145, "user_id": 4271923, "user_type": "registered", "profile_image": "https://graph.facebook.com/543414580/picture?type=large", "display_name": "Ped7g", "link": "https://stackoverflow.com/users/4271923/ped7g"}, "edited": false, "score": 1, "creation_date": 1510090912, "post_id": 47165455, "comment_id": 81285652, "body": "if you already have C++ version, you can also check what gcc does produce.. try -O1 or -O2 to get a bit cleaned up/optimized code, but not too advanced one (like unrolled loops/etc). Trying to understand/modify that may give you another insight and ideas."}, {"owner": {"reputation": 31, "user_id": 8831106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c67859339cb5cb8585f1afdd37d7880?s=128&d=identicon&r=PG&f=1", "display_name": "achicn3", "link": "https://stackoverflow.com/users/8831106/achicn3"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1510115022, "post_id": 47165455, "comment_id": 81292678, "body": "oh,it&#39;s gcc @fuz"}, {"owner": {"reputation": 31, "user_id": 8831106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c67859339cb5cb8585f1afdd37d7880?s=128&d=identicon&r=PG&f=1", "display_name": "achicn3", "link": "https://stackoverflow.com/users/8831106/achicn3"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1510115855, "post_id": 47165455, "comment_id": 81292915, "body": "@PeterCordes what is call-preserved register? Do you mean I have use such as r4,r5,r6... to store r0-r3? I will use qemu+gdb to debug my arm later"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1510116538, "post_id": 47165455, "comment_id": 81293103, "body": "google caller-saved vs. callee-saved  and calling conventions.  I prefer the terms call-preserved vs. call-clobbered because they describe it better."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 1, "creation_date": 1510138121, "post_id": 47165455, "comment_id": 81304301, "body": "@achicn3 Yes, but <code>g++</code> is the GNU C++ compiler. Type <code>gcc</code> to get the GNU C compiler instead."}], "answers": [{"comments": [{"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1576302255, "post_id": 59332519, "comment_id": 104864044, "body": "What are these magic constant addresses 0x40000000 and 0x40000020 for?  How do you know that space is going to be free for use as a scratch buffer after linking with the GNU toolchain, including libc, and why don&#39;t you just label the start and end of a buffer in the <code>.bss</code> like a normal person?"}], "tags": [], "owner": {"reputation": 172, "user_id": 9126145, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/495b52d696e13b50579de8ef9cc4ea1b?s=128&d=identicon&r=PG&f=1", "display_name": "Vidya", "link": "https://stackoverflow.com/users/9126145/vidya"}, "is_accepted": true, "score": 0, "last_activity_date": 1576300734, "creation_date": 1576300734, "answer_id": 59332519, "question_id": 47165455, "link": "https://stackoverflow.com/questions/47165455/reverse-string-in-arm/59332519#59332519", "title": "reverse string in arm", "body": "<p>This code work perfectly.</p>\n\n<pre><code>area reverseString,code\nCR EQU 0x0D\n entry\n ldr r0,=data\n ldr r2,=0x40000000\n ldr r3,=0x40000020\n mov r4,#00\n\nup ldrb r5,[r0],#1\n cmp r5,#CR\n strb r5,[r2],#1\n add r4,r4,#1\n BNE up\n sub r4,r4,#1\n sub r2,r2,#2\n BNE down\n\ndown ldrb r6,[r2]\n strb r6,[r3],#1\n sub r2,r2,#1\n subs r4,r4,#1\n BNE down\n\n\nstop b stop\ndata dcb \"Vidya\",CR\n end\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 8831106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c67859339cb5cb8585f1afdd37d7880?s=128&d=identicon&r=PG&f=1", "display_name": "achicn3", "link": "https://stackoverflow.com/users/8831106/achicn3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1533, "favorite_count": 0, "accepted_answer_id": 59332519, "answer_count": 1, "score": 0, "last_activity_date": 1576302074, "creation_date": 1510080798, "last_edit_date": 1576302074, "question_id": 47165455, "link": "https://stackoverflow.com/questions/47165455/reverse-string-in-arm", "title": "reverse string in arm", "body": "<p>I tried translate the following C code into arm language</p>\n\n<pre><code>int main(int argc,char **argv){\n\n    for(int i=strlen(argv[1])-1;i!=-1;i--)printf(\"%c\",argv[1][i]);\n\n}\n</code></pre>\n\n<p>The C code is reverse the string from argv[1]</p>\n\n<blockquote>\n  <p>$ g++ -o reverse reverse.c</p>\n  \n  <p>$ ./reverse abcd</p>\n  \n  <p>$ dcba </p>\n</blockquote>\n\n<p>I know the string argv[1] is store in r1+4\nand argc store in r0</p>\n\n<p>but I don't know what's the end address of the string argv[1],I found a post which writes that r0 store the length of r1,so I write my code base on this post, here is my arm code</p>\n\n<pre><code> @@@@ input : hi \n @@@@ expected output : ih\n @@@@ if \"hi\" is a string named a-&gt; string aaa=\"hi\"\n @@@@ so r3=aaa[0],and the length of aaa is r2\n\n    .text   \n    .align 2\n    .global main\n    .extern printf\nmain:\n    stmfd sp!, {r0,r1,r2,r3,fp,lr}\n    ldr r3,[r1,#4] ; r3 = a pointer point to argv[1]\n    mov r2,r0\n    sub r2,r2,#4  ;minus the last character (terminated character) \n    b LOOP\n    ldmfd sp!, {r0,r1,r2,r3,fp,lr}\n    bx lr\n\nLOOP:\n    ldr r0,=string\n    cmp r2,r3 \n    subne r2,r2,#4 ; if r2 != r3 , r2=r2-4 (address step forward) \n    bl printf ; print one character \n    bne LOOP\n\nstring:\n    .asciz \"%c\"\n</code></pre>\n\n<p>this arm code is run in CodeSourcery</p>\n\n<blockquote>\n  <p>$ arm-none-eabi-gcc j.s -T generic-hosted.ld</p>\n  \n  <p>$ arm-none-eabi-run a.out \"hi\"</p>\n  \n  <p>$   (nothing print,what I expected output : ih)</p>\n</blockquote>\n\n<p>how can I fixed my code? this question disturb me for 3 days </p>\n"}]