[{"tags": ["c", "core", "fseek"], "comments": [{"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 8, "creation_date": 1488412842, "post_id": 42544415, "comment_id": 72224581, "body": "You <b>must</b> check returned values from all four functions that you used. Any one of them could have failed, and any failure could lead to a segfault."}, {"owner": {"reputation": 392, "user_id": 431498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bffb5fd030d679a313376b4eff07775b?s=128&d=identicon&r=PG", "display_name": "soasme", "link": "https://stackoverflow.com/users/431498/soasme"}, "edited": false, "score": 0, "creation_date": 1488412938, "post_id": 42544415, "comment_id": 72224611, "body": "Have you checked you pass.key file exists?"}, {"owner": {"reputation": 25, "user_id": 5153815, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/04b1a11ea26940c3491a6256b16d893f?s=128&d=identicon&r=PG&f=1", "display_name": "picklesrevil", "link": "https://stackoverflow.com/users/5153815/picklesrevil"}, "edited": false, "score": 0, "creation_date": 1488413003, "post_id": 42544415, "comment_id": 72224631, "body": "I did that, everything works until the rewind. I tested all the values returned by these, and I put printf statements after all of these to test all of them, it is the rewind."}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1488413051, "post_id": 42544415, "comment_id": 72224646, "body": "How do you know what <code>fseek</code> returned if you do not even save the return value?"}, {"owner": {"reputation": 25, "user_id": 5153815, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/04b1a11ea26940c3491a6256b16d893f?s=128&d=identicon&r=PG&f=1", "display_name": "picklesrevil", "link": "https://stackoverflow.com/users/5153815/picklesrevil"}, "edited": false, "score": 0, "creation_date": 1488413161, "post_id": 42544415, "comment_id": 72224677, "body": "I know that pass.key exists. I checked all of the functions listed iteratively, compiling one program for each function test. They all work besides rewind."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 1, "creation_date": 1488413439, "post_id": 42544415, "comment_id": 72224767, "body": "post your actual code that tests all the return codes. If it is really failing after all these things are OK then probably you already UB&#39;d earlier in your program"}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1488414557, "post_id": 42544415, "comment_id": 72225122, "body": "<code>fopen</code> can also fail if you don&#39;t have appropriate permissions for your desired operation (in this case read and write). Are you sure you have RW permissions for your file? If everything checks out like you say then as pm100 said, it must be UB elsewhere in your program."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 5153815, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/04b1a11ea26940c3491a6256b16d893f?s=128&d=identicon&r=PG&f=1", "display_name": "picklesrevil", "link": "https://stackoverflow.com/users/5153815/picklesrevil"}, "edited": false, "score": 0, "creation_date": 1488413359, "post_id": 42544512, "comment_id": 72224741, "body": "Ok. I checked all of the functions individually, as stated in the comments. I know pass.key exists, I made it exist. I have verified absolutely that all of the other lines work."}], "tags": [], "owner": {"reputation": 61, "user_id": 7614164, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Vpx2y.jpg?s=128&g=1", "display_name": "TheCrifix", "link": "https://stackoverflow.com/users/7614164/thecrifix"}, "is_accepted": false, "score": 0, "last_activity_date": 1488413200, "creation_date": 1488413200, "answer_id": 42544512, "question_id": 42544415, "link": "https://stackoverflow.com/questions/42544415/really-weird-segmentation-fault-after-rewinding-file/42544512#42544512", "title": "Really weird segmentation fault after rewinding file", "body": "<p>A seg fault with the fseek function in C is almost always caused by a failed fopen. Ensure that the file you are trying to open actually exists. If by some chance you are relying on the r+ parameter to create a new file for you then you are mistaken, r+ <strong>does not</strong> create a new file in C. Try verifying the return value of fopen whenever possible. Just in case you weren't aware rewind is simply an fseek that goes to the start of the file so that's why you are likely getting a problem there too. Hope this helps!</p>\n\n<p>Happy coding!</p>\n"}, {"tags": [], "owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "is_accepted": false, "score": 0, "last_activity_date": 1488413435, "creation_date": 1488413435, "answer_id": 42544564, "question_id": 42544415, "link": "https://stackoverflow.com/questions/42544415/really-weird-segmentation-fault-after-rewinding-file/42544564#42544564", "title": "Really weird segmentation fault after rewinding file", "body": "<p>This is more like an extended comment than a proper answer. Here's how your code <strong>must</strong> look like:</p>\n\n<pre><code>FILE *passkey;\nif (!(passkey = fopen(\"pass.key\", \"r+\")) {\n    perror(\"pass.key\");\n    exit(EXIT_FAILURE);\n}\nif(-1 == fseek(passkey, 0, SEEK_END)) {\n    perror(\"pass.key\");\n    exit(EXIT_FAILURE);\n}\nif(-1 == (filesize = ftell(passkey)) {\n    perror(\"pass.key\");\n    exit(EXIT_FAILURE);\n}\nrewind(passkey);\n</code></pre>\n\n<p>It is very likely that this code does not get to the last line. But if it does, then the problem must be somewhere else. Then I would recommend running your program with a memory debugger (such as <code>valgrind</code> or Electric Fence).</p>\n"}], "owner": {"reputation": 25, "user_id": 5153815, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/04b1a11ea26940c3491a6256b16d893f?s=128&d=identicon&r=PG&f=1", "display_name": "picklesrevil", "link": "https://stackoverflow.com/users/5153815/picklesrevil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 450, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1488413435, "creation_date": 1488412637, "question_id": 42544415, "link": "https://stackoverflow.com/questions/42544415/really-weird-segmentation-fault-after-rewinding-file", "title": "Really weird segmentation fault after rewinding file", "body": "<p>So I open a file, go to the end to see how long it is, and then going back to the beginning causes a segmentation fault (core dumped). What the gosh?</p>\n\n<pre><code>...\nFILE *passkey;\npasskey = fopen(\"pass.key\", \"r+\");\nfseek(passkey, 0, SEEK_END);\nfilesize = ftell(passkey);\nrewind(passkey);\n...\n</code></pre>\n\n<p>The rewind causes a segmentation fault. It does the same with an fseek to the beginning. Why does it do this?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 7787, "user_id": 1257035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WHLC8.png?s=128&g=1", "display_name": "a3f", "link": "https://stackoverflow.com/users/1257035/a3f"}, "edited": false, "score": 2, "creation_date": 1488411715, "post_id": 42544239, "comment_id": 72224213, "body": "<code>malloc</code> takes a single argument. Post the code you&#39;re actually using."}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 2, "creation_date": 1488411759, "post_id": 42544239, "comment_id": 72224221, "body": "What value did you expect it to have?"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1488412807, "post_id": 42544239, "comment_id": 72224568, "body": "Where do you think you have code to print a 256-bit value?"}, {"owner": {"reputation": 13, "user_id": 7622626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rHfxw.png?s=128&g=1", "display_name": "vergessen", "link": "https://stackoverflow.com/users/7622626/vergessen"}, "edited": false, "score": 0, "creation_date": 1488412995, "post_id": 42544239, "comment_id": 72224627, "body": "I thought that sprintf would take the value of obuf, format it appropriately and then put into t_ID.  Apparently I&#39;m way off, lol..."}, {"owner": {"reputation": 4603, "user_id": 514485, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aac022894c763ef088e02c1baf23a3f6?s=128&d=identicon&r=PG", "display_name": "jimhark", "link": "https://stackoverflow.com/users/514485/jimhark"}, "edited": false, "score": 0, "creation_date": 1488412999, "post_id": 42544239, "comment_id": 72224629, "body": "Why do you want the hash of the current time? Have you considered that hash can be brute forced using a &#39;dictionary&#39; attack, that is by trying all the possible time inputs. This is very practical considering the resolution of time_t is probably seconds."}, {"owner": {"reputation": 13, "user_id": 7622626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rHfxw.png?s=128&g=1", "display_name": "vergessen", "link": "https://stackoverflow.com/users/7622626/vergessen"}, "reply_to_user": {"reputation": 4603, "user_id": 514485, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aac022894c763ef088e02c1baf23a3f6?s=128&d=identicon&r=PG", "display_name": "jimhark", "link": "https://stackoverflow.com/users/514485/jimhark"}, "edited": false, "score": 0, "creation_date": 1488413431, "post_id": 42544239, "comment_id": 72224761, "body": "@jimhark, yes, that was considered.  My first choice was to use the posix form of gettimeofday, which AFAIK allows for both seconds and nanoseconds, however, it conflicts with a mmm... home rolled version of time.h that I have to suffer with (not my choice).  That said, the checksum here is only to be used in a brief transaction, no hashing passwords, nothing of that sort.  Strictly I&#39;m posting this to &lt;site&gt;, and I want to use this hash as an identifier that I have done so."}, {"owner": {"reputation": 4603, "user_id": 514485, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aac022894c763ef088e02c1baf23a3f6?s=128&d=identicon&r=PG", "display_name": "jimhark", "link": "https://stackoverflow.com/users/514485/jimhark"}, "edited": false, "score": 1, "creation_date": 1488413606, "post_id": 42544239, "comment_id": 72224821, "body": "If you really need to hash a time stamp, why do you bother converting the numeric cur_time to a string? Any inconsistency in asctime you will cause you problems. Why not just hash cur_time directly? One thing you may have to account for is byte order, you can&#39;t allow your hash to change based on machine architecture."}, {"owner": {"reputation": 13, "user_id": 7622626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rHfxw.png?s=128&g=1", "display_name": "vergessen", "link": "https://stackoverflow.com/users/7622626/vergessen"}, "reply_to_user": {"reputation": 4603, "user_id": 514485, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aac022894c763ef088e02c1baf23a3f6?s=128&d=identicon&r=PG", "display_name": "jimhark", "link": "https://stackoverflow.com/users/514485/jimhark"}, "edited": false, "score": 0, "creation_date": 1488413783, "post_id": 42544239, "comment_id": 72224883, "body": "@jimhark, you might have guessed it, but I&#39;m still relatively new to the nuances of c.  That is, I know enough to get myself in trouble.  So, to answer your previous question, I didn&#39;t know that I could take the output of gmtime(cur_time) and pass that as a param into SHA256."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 1, "creation_date": 1488418449, "post_id": 42544239, "comment_id": 72226162, "body": "@vergessen You should probably post a new question then. Describe your use case and requirements in as much detail as you can and ask if SHA256 is a good solution and, if so, what to hash and what to do with the hash."}], "answers": [{"tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": 3, "last_activity_date": 1488412595, "creation_date": 1488412595, "answer_id": 42544409, "question_id": 42544239, "link": "https://stackoverflow.com/questions/42544239/hashing-a-timestamp-into-a-sha256-checksum-in-c/42544409#42544409", "title": "Hashing a timestamp into a sha256 checksum in c", "body": "<p>Since <code>obuf</code> is an array, printing its value causes it to decay to a pointer and prints the value of the memory address that the array is stored at. Write sensible code to print a 256-bit value.</p>\n\n<p>Maybe something like:</p>\n\n<pre><code>for (int i = 0; i &lt; 32; ++i)\n    printf(\"%02X\", obuf[i]);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4603, "user_id": 514485, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aac022894c763ef088e02c1baf23a3f6?s=128&d=identicon&r=PG", "display_name": "jimhark", "link": "https://stackoverflow.com/users/514485/jimhark"}, "is_accepted": false, "score": 0, "last_activity_date": 1488482518, "last_edit_date": 1495540813, "creation_date": 1488415709, "answer_id": 42544919, "question_id": 42544239, "link": "https://stackoverflow.com/questions/42544239/hashing-a-timestamp-into-a-sha256-checksum-in-c/42544919#42544919", "title": "Hashing a timestamp into a sha256 checksum in c", "body": "<p>This is not really intended as an answer, I'm just sharing a code fragment with the OP.</p>\n\n<p>To hash the binary time_t directly without converting the time to a string, you could use something like (untested):</p>\n\n<pre><code>time_t cur_time;\nchar t_ID[40];\nchar obuf[40];\n\ngmtime(&amp;cur_time);\nSHA256(&amp;cur_time, sizeof(cur_time), obuf);\n\n// You know this doesn't work:\n// sprintf(t_ID, \"%02x\", obuf);\n\n// Instead see https://stackoverflow.com/questions/6357031/how-do-you-convert-buffer-byte-array-to-hex-string-in-c\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/questions/6357031/how-do-you-convert-buffer-byte-array-to-hex-string-in-c\">How do you convert buffer (byte array) to hex string in C?</a></p>\n\n<p>This doesn't address byte order. You could use network byte order functions, see:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/19207745/htons-function-in-socket-programing\">htons() function in socket programing</a>\n<a href=\"http://beej.us/guide/bgnet/output/html/multipage/htonsman.html\" rel=\"nofollow noreferrer\">http://beej.us/guide/bgnet/output/html/multipage/htonsman.html</a></p>\n\n<p>One complication: the size of time_t is not specified, it can vary by platform. It's traditionally 32 bits, but on 64 bit machines it can be 64 bits. It's also usually the number of seconds since Unix epoc, midnight, January 1, 1970.</p>\n\n<p>If you're willing to live with assumption that the resolution is seconds and don't have to worry about the code working in 20 years (see: <a href=\"https://en.wikipedia.org/wiki/Year_2038_problem\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Year_2038_problem</a>) then you might use (untested):</p>\n\n<pre><code>#include &lt;netinet/in.h&gt;\n\ntime_t cur_time;\nuint32_t net_cur_time; // cur_time converted to network byte order\nchar obuf[40];\n\ngmtime(&amp;cur_time);\nnet_cur_time = htonl((uint32_t)cur_time);\nSHA256(&amp;net_cur_time, sizeof(net_cur_time), obuf);\n</code></pre>\n\n<p>I'll repeat what I mentioned in a comment: it's hard to understand what you possibly hope to gain from this hash, or why you can't use the timestamp directly. Cryptographically secure hashes such as SHA256 go through <em>a lot</em> of work to ensure the hash is not reversible. You can't benefit from that because the input data is from a limited known set. At the very least, why not use CRC32 instead because it's much faster.</p>\n\n<p>Good luck.</p>\n"}], "owner": {"reputation": 13, "user_id": 7622626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rHfxw.png?s=128&g=1", "display_name": "vergessen", "link": "https://stackoverflow.com/users/7622626/vergessen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 595, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1488482518, "creation_date": 1488411563, "last_edit_date": 1488412343, "question_id": 42544239, "link": "https://stackoverflow.com/questions/42544239/hashing-a-timestamp-into-a-sha256-checksum-in-c", "title": "Hashing a timestamp into a sha256 checksum in c", "body": "<p>Quick question for those more experienced in c...</p>\n\n<p>I want to compute a SHA256 checksum using the functions from openssl for the current time an operation takes place.  My code consists of the following:</p>\n\n<pre><code>time_t cur_time = 0;\nchar t_ID[40];\nchar obuf[40];\nchar * timeBuf = malloc(sizeof(char) * 40 + 1);\n\nsprintf(timeBuf, \"%s\", asctime(gmtime(&amp;cur_time)));\nSHA256(timeBuf, strlen(timeBuf), obuf);\nsprintf(t_ID, \"%02x\", obuf);\n</code></pre>\n\n<p>And yet, when I print out the value of t_ID in a debug statement, it looks like 'de54b910'.  What am I missing here?  </p>\n\n<ul>\n<li>Edited to fix my typo around malloc and also to say I expected to see the digest form of a sha256 checksum, in hex.</li>\n</ul>\n"}, {"tags": ["c", "division"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1488411419, "post_id": 42544212, "comment_id": 72224114, "body": "<code>x=4&#47;(4-1);</code> The right side is computed as an integer. --&gt; <code>x=4.&#47;(4-1);</code>"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1488411487, "post_id": 42544212, "comment_id": 72224138, "body": "Because division doesn&#39;t work as you think on integers"}, {"owner": {"reputation": 133, "user_id": 7644267, "user_type": "registered", "profile_image": "https://graph.facebook.com/1419426528099359/picture?type=large", "display_name": "Edu Galindo", "link": "https://stackoverflow.com/users/7644267/edu-galindo"}, "edited": false, "score": 0, "creation_date": 1488411613, "post_id": 42544212, "comment_id": 72224183, "body": "thx a lot, now if i want to change the 4 for a variable, for example having x=i/(i-1)?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1488411648, "post_id": 42544212, "comment_id": 72224192, "body": "E.g <code>x=(float)i&#47;(i-1)</code> , <code>x=i&#47;(i-1.)</code>"}, {"owner": {"reputation": 133, "user_id": 7644267, "user_type": "registered", "profile_image": "https://graph.facebook.com/1419426528099359/picture?type=large", "display_name": "Edu Galindo", "link": "https://stackoverflow.com/users/7644267/edu-galindo"}, "edited": false, "score": 0, "creation_date": 1488411771, "post_id": 42544212, "comment_id": 72224228, "body": "thanks, sorry i am really new at programming, why does it not work like i had typed it?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1488411934, "post_id": 42544212, "comment_id": 72224301, "body": "The result of an integer operation is computed as an integer rather than a floating point number. In order to compute with a floating point number, you need to mix floating point numbers or type cast (like <code>(float)</code>)."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1488413354, "post_id": 42544212, "comment_id": 72224736, "body": "or <code>x = i&#47;(i-1.0f)</code> or <code>x= 1.0f*i&#47;(i-1)</code> or <code>x= 1.0*i&#47;(i-1)</code>, or ..."}], "answers": [{"comments": [{"owner": {"reputation": 133, "user_id": 7644267, "user_type": "registered", "profile_image": "https://graph.facebook.com/1419426528099359/picture?type=large", "display_name": "Edu Galindo", "link": "https://stackoverflow.com/users/7644267/edu-galindo"}, "edited": false, "score": 0, "creation_date": 1488411924, "post_id": 42544227, "comment_id": 72224297, "body": "ohh so if i want to get a float as a result i have to type &quot;(float)&quot; and place it before the division right?"}, {"owner": {"reputation": 1627, "user_id": 1426202, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/Z3Lld.jpg?s=128&g=1", "display_name": "Zeb", "link": "https://stackoverflow.com/users/1426202/zeb"}, "reply_to_user": {"reputation": 133, "user_id": 7644267, "user_type": "registered", "profile_image": "https://graph.facebook.com/1419426528099359/picture?type=large", "display_name": "Edu Galindo", "link": "https://stackoverflow.com/users/7644267/edu-galindo"}, "edited": false, "score": 0, "creation_date": 1488498060, "post_id": 42544227, "comment_id": 72270127, "body": "Not exactly, you need that each number is a float, for example in this way x=4.0/(4.0-1.0);"}], "tags": [], "owner": {"reputation": 1627, "user_id": 1426202, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/Z3Lld.jpg?s=128&g=1", "display_name": "Zeb", "link": "https://stackoverflow.com/users/1426202/zeb"}, "is_accepted": false, "score": 1, "last_activity_date": 1488411515, "creation_date": 1488411515, "answer_id": 42544227, "question_id": 42544212, "link": "https://stackoverflow.com/questions/42544212/why-is-this-operation-equal-to-1/42544227#42544227", "title": "why is this operation equal to 1?", "body": "<p>Because you are making a division between two int, so you'll obtain an int as result.</p>\n"}], "owner": {"reputation": 133, "user_id": 7644267, "user_type": "registered", "profile_image": "https://graph.facebook.com/1419426528099359/picture?type=large", "display_name": "Edu Galindo", "link": "https://stackoverflow.com/users/7644267/edu-galindo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "closed_date": 1488411516, "answer_count": 1, "score": 0, "last_activity_date": 1488411515, "creation_date": 1488411365, "last_edit_date": 1488411504, "question_id": 42544212, "link": "https://stackoverflow.com/questions/42544212/why-is-this-operation-equal-to-1", "closed_reason": "Duplicate", "title": "why is this operation equal to 1?", "body": "<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\nint main(){\nfloat x;\nx=4/(4-1);\nprintf(\"%f\\n\", x);\n\n}\n</code></pre>\n\n<p>when I try to run that on c it makes x equal to 1, i don\u00b4t understand why</p>\n"}, {"tags": ["c", "switch-statement"], "comments": [{"owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 1, "creation_date": 1488411050, "post_id": 42544104, "comment_id": 72223991, "body": "Seems that WAVE_ChunkID_data and WAVE_ChunkID_fmt_ both equal 1. Have you tried just printing them both out to confirm?"}, {"owner": {"reputation": 448, "user_id": 2499645, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/Tbsis.gif?s=128&g=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/2499645/peter"}, "edited": false, "score": 1, "creation_date": 1488411066, "post_id": 42544104, "comment_id": 72223995, "body": "Seems that <code>WAVE_ChunkID_fmt_</code> and <code>WAVE_ChunkID_data</code> are both evaluating to 1..."}], "answers": [{"tags": [], "owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": true, "score": 4, "last_activity_date": 1488411259, "last_edit_date": 1488411259, "creation_date": 1488411054, "answer_id": 42544143, "question_id": 42544104, "link": "https://stackoverflow.com/questions/42544104/switch-statement-case-1-already-in-use-handmadehero-138/42544143#42544143", "title": "switch statement case &#39;1&#39; already in use - HandmadeHero 138", "body": "<pre><code>#define RIFF_CODE(a, b, c, d) (((uint32)(a) &lt;&lt; 0) || ((uint32)(b) &lt;&lt; 8) || ((uint32)(c) &lt;&lt; 16) || ((uint32)(d) &lt;&lt; 24))\n</code></pre>\n\n<p>The above macro makes use of the logical OR operator. So the result will always be 0 or 1 when converted to an integer. I assume it's a typo, and the intent was to write it as follows:</p>\n\n<pre><code>#define RIFF_CODE(a, b, c, d) (((uint32)(a) &lt;&lt; 0) | ((uint32)(b) &lt;&lt; 8) | ((uint32)(c) &lt;&lt; 16) | ((uint32)(d) &lt;&lt; 24))\n</code></pre>\n\n<p>Now it actually preforms a bitwise combination of its arguments.</p>\n"}], "owner": {"reputation": 778, "user_id": 6618289, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1149829745350f27012281268c37c618?s=128&d=identicon&r=PG&f=1", "display_name": "meetaig", "link": "https://stackoverflow.com/users/6618289/meetaig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 42544143, "answer_count": 1, "score": 0, "last_activity_date": 1488411259, "creation_date": 1488410867, "question_id": 42544104, "link": "https://stackoverflow.com/questions/42544104/switch-statement-case-1-already-in-use-handmadehero-138", "title": "switch statement case &#39;1&#39; already in use - HandmadeHero 138", "body": "<p><p>\nI am following the HandmadeHero series and I get some weird behaviour in a switch statement that does not come up in the video. It is most likely a thing that was added to the VS2015 Community Edition compiler.\nThe problem occurs in the code loading a .wav file (video from <a href=\"https://www.youtube.com/watch?v=RSxUBaoomy0\" rel=\"nofollow noreferrer\">Day 138</a> at around 00:18:00). <p>\nFor different chunk types in the <a href=\"http://www-mmsp.ece.mcgill.ca/Documents/AudioFormats/WAVE/WAVE.html\" rel=\"nofollow noreferrer\">RIFF format </a> there is an <code>enum</code> defined:</p>\n\n<pre><code>#define RIFF_CODE(a, b, c, d) (((uint32)(a) &lt;&lt; 0) || ((uint32)(b) &lt;&lt; 8) || ((uint32)(c) &lt;&lt; 16) || ((uint32)(d) &lt;&lt; 24))\nenum                           /*!&lt; listing of different possible chunk IDs */\n{\n    WAVE_ChunkID_fmt_ = RIFF_CODE('f', 'm', 't', ' '),  /**&lt; standard sub-chunk id */\n    WAVE_ChunkID_data = RIFF_CODE('d', 'a', 't', 'a'),  /**&lt; data chunk */\n    WAVE_ChunkID_RIFF = RIFF_CODE('R', 'I', 'F', 'F'),  /**&lt; RIFF chunk id */\n    WAVE_ChunkID_WAVE = RIFF_CODE('W', 'A', 'V', 'E'),  /**&lt; WAVE chunk id */\n};\n</code></pre>\n\n<p>In the actual file loading code there is a <code>switch</code>-statement:</p>\n\n<pre><code>uint32 ChunkType = GetType(Iter);\nswitch(ChunkType)\n{\n    case WAVE_ChunkID_fmt_:\n    {\n        WAVE_fmt* fmt = (WAVE_fmt*)GetChunkData(Iter);\n        break;\n    }\n    case WAVE_ChunkID_data:\n    {\n         SampleData = (int16*)GetChunkData(Iter);\n         break;\n    }\n}\n</code></pre>\n\n<p>The line <code>case WAVE_ChunkID_data:</code> gives me the error code </p>\n\n<pre><code>&gt; w:\\code\\handmade_asset.cpp(270): error C2196: case value '1' already\n&gt; used\n</code></pre>\n\n<p>Can someone figure out whats going on there? As I mentioned, the same code is used in the video (and I have access to the actual code by Casey as well) and the error does not occur in the video.</p>\n\n<p>Thanks :) </p>\n"}, {"tags": ["c", "arrays", "string"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1488409789, "post_id": 42543870, "comment_id": 72223525, "body": "Have you tried starting the printin from <code>buf2[2]</code> where the actual content is?"}, {"owner": {"reputation": 23, "user_id": 4786720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/129b2c6d73d6b3f308a445e987f39ded?s=128&d=identicon&r=PG", "display_name": "Khawar", "link": "https://stackoverflow.com/users/4786720/khawar"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1488409914, "post_id": 42543870, "comment_id": 72223567, "body": "I mentioned that. Even I created a new buffer and used the for loop to copy the actual content one by one. Still that new buffer doesn&#39;t show anything. Weird!"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 2, "creation_date": 1488409942, "post_id": 42543870, "comment_id": 72223582, "body": "looks to me that you net_send function is sending a length count before sending the string (as it should), you need to handle that on the receive. Post the source of net_send"}, {"owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "edited": false, "score": 0, "creation_date": 1488409971, "post_id": 42543870, "comment_id": 72223594, "body": "Note that on the client side, you use a signed char, which you convert to uint8_t and convert to unsigned char on the server side. May not solve your problem, but it seems inconsistent."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1488410020, "post_id": 42543870, "comment_id": 72223617, "body": "Note also that the receiver needs to ensure that there is a null character after the received data if it plans to use the data as a string."}, {"owner": {"reputation": 23, "user_id": 4786720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/129b2c6d73d6b3f308a445e987f39ded?s=128&d=identicon&r=PG", "display_name": "Khawar", "link": "https://stackoverflow.com/users/4786720/khawar"}, "reply_to_user": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1488410199, "post_id": 42543870, "comment_id": 72223682, "body": "@pm100 I have checked the code at both ends. Lengths match perfectly."}, {"owner": {"reputation": 23, "user_id": 4786720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/129b2c6d73d6b3f308a445e987f39ded?s=128&d=identicon&r=PG", "display_name": "Khawar", "link": "https://stackoverflow.com/users/4786720/khawar"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1488410307, "post_id": 42543870, "comment_id": 72223717, "body": "@JohnBollinger It has a null character at the end. Plus in the new buffer i made sure i don&#39;t miss that."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 1, "creation_date": 1488410379, "post_id": 42543870, "comment_id": 72223744, "body": "@Khawar - you miss my point. The buffer you receive has a 16 bit length prepended to it, your receive code doesnt handle this."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1488412161, "post_id": 42543870, "comment_id": 72224384, "body": "&quot;I have a function called <code>net_send(uint8_t buf)</code>.&quot; or do you mean &quot;I have a function called <code>net_send(uint8_t *buf)</code>.&quot;?  (Added <code>*</code>)  2) <code>buf2[5] ==&gt; &#39;e&#39; &#47;&#47; actually an ascii value for &#39;k&#39;</code> --&gt; do you mean <code>buf2[5] ==&gt; &#39;e&#39; &#47;&#47; actually an ascii value for &#39;e&#39;</code>?"}, {"owner": {"reputation": 23, "user_id": 4786720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/129b2c6d73d6b3f308a445e987f39ded?s=128&d=identicon&r=PG", "display_name": "Khawar", "link": "https://stackoverflow.com/users/4786720/khawar"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1488461412, "post_id": 42543870, "comment_id": 72247825, "body": "@chux thanks - edited but it is apparent from the second code snippet."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1488464732, "post_id": 42543870, "comment_id": 72250351, "body": "The question does not contain a <a href=\"http://stackoverflow.com/help/mcve\">complete, verifiable example</a>.  Where is the code for <code>net_send()</code> and <code>net_recv()</code>?  Without that, any possible answer would be based on nothing but guesswork."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1488471799, "post_id": 42543870, "comment_id": 72255432, "body": "@Khawar again , you are missing what I am saying. nt send is clearly sending a length in fromt of the message. net-recv is not taking it off"}], "answers": [{"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 0, "last_activity_date": 1488410649, "last_edit_date": 1488410649, "creation_date": 1488410333, "answer_id": 42543988, "question_id": 42543870, "link": "https://stackoverflow.com/questions/42543870/transmission-of-uint8-t-with-reception-not-matching-values-in-client-server-c-pr/42543988#42543988", "title": "Transmission of uint8_t with reception not matching values in client server C program", "body": "<p>With the buffered data as you describe, you should be able to print by doing this:</p>\n\n<pre><code>// Ensure that the data are terminated\nbuf2[6] = 0;\n\n// print from the third byte\nprintf(\"%s\\n\", (char*) buf2 + 2);\n</code></pre>\n\n<p>If that does not work then either there's something you're not telling us (such as that the server's standard output is redirected to someplace other than where you're looking for the printed data), or else what you <em>have</em> told us is incorrect.</p>\n\n<p>As for why you're getting the two bytes <code>0x04</code> <code>0x00</code> before the data, that is surely part of the protocol employed by <code>net_send()</code> and <code>net_recv()</code>.  Possibly <code>net_recv()</code> is faulty in that it allows those leading metadata bytes to be presented as part of the actual data; we can't speak to that because you've not presented the <code>net_send()</code> and <code>net_recv()</code> functions.</p>\n"}], "owner": {"reputation": 23, "user_id": 4786720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/129b2c6d73d6b3f308a445e987f39ded?s=128&d=identicon&r=PG", "display_name": "Khawar", "link": "https://stackoverflow.com/users/4786720/khawar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 42543988, "answer_count": 1, "score": 0, "last_activity_date": 1488464313, "creation_date": 1488409674, "last_edit_date": 1488464313, "question_id": 42543870, "link": "https://stackoverflow.com/questions/42543870/transmission-of-uint8-t-with-reception-not-matching-values-in-client-server-c-pr", "title": "Transmission of uint8_t with reception not matching values in client server C program", "body": "<p>I have very strange problem with my C client server program.</p>\n\n<p>Let's say I have a function called <code>net_send(uint8_t *buf)</code>. This function is used at the client side. Similarly I have function at server called <code>net_recv(void* buf)</code>, which just receives the data from client. Pretty simple.</p>\n\n<p>Now the problem is that the server is unable to printf it as a char array. Client and server machines and their compilers support 8-bit char. </p>\n\n<p>An example here:</p>\n\n<pre><code>char name[1024];\nname[0] = 'k';\nname[1] = 'a';\nname[2] = 'n';\nname[3] = 'e';\n</code></pre>\n\n<p>and rest of the array positions are 0s. \nI called net_send like this</p>\n\n<pre><code>net_send((uint8_t*)name);\n</code></pre>\n\n<p>At server side, I receive the data like this:</p>\n\n<pre><code>uint8_t buf2[1024];\nnet_recv(buf2);\nprintf(\"%s\\n\", (unsigned char*) buf2); // prints NOTHING\n</code></pre>\n\n<p>Similarly when I check the values of the first few ASCII decimals of the uint8_t received array, I find this</p>\n\n<pre><code>buf2[0] ==&gt; 4 // which is end-of-transmission character\nbuf2[1] ==&gt; 0 // null character\nbuf2[2] ==&gt; 'k' // actually an ASCII value for 'k'\nbuf2[3] ==&gt; 'a' // actually an ASCII value for 'k'\nbuf2[4] ==&gt; 'n' // actually an ASCII value for 'k'\nbuf2[5] ==&gt; 'e' // actually an ASCII value for 'k'\n</code></pre>\n\n<p>Why is this weird behaviour? Any ideas?\nEven after clearing the first two characters I am unable to print the char array. Even when I create the element to element copy in order to convert the <code>uint8_t</code> to <code>char</code> values, it does not print the char array. Also if I use the memcpy from the string.h header file, I can't get the char array out of it. Since I cannot get the char array or my string, I cannot do further processing in server.</p>\n\n<p>Any ideas? Or points to how exactly I can convert the received uint8_t to char values to be seen as a char array. Or given above what do you think is happening?</p>\n\n<p>Cheers,\nK.</p>\n"}, {"tags": ["c", "windows"], "answers": [{"comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 1, "creation_date": 1488410042, "post_id": 42543804, "comment_id": 72223625, "body": "You should still check the return value of <code>scanf</code>. If it is different from <code>1</code>, <code>usr_option</code> holds random data."}], "tags": [], "owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "is_accepted": true, "score": 0, "last_activity_date": 1488409376, "creation_date": 1488409376, "answer_id": 42543804, "question_id": 42543740, "link": "https://stackoverflow.com/questions/42543740/use-isdigit-in-c-programming/42543804#42543804", "title": "Use isdigit in C programming", "body": "<p>If you have read a number via <code>scanf(\"%d\", &amp;usr_option);</code> Then you don't need to use <code>is_digit()</code> You can just use <code>if</code> or <code>switch</code> e.g.</p>\n\n<pre><code>switch(usr_option)\n{\n    case 1: enter_code(); break;\n    case 2: encrypt(); break;\n</code></pre>\n\n<p>You only need <code>is_digit</code> if you are checking that characters in a string are digits or not. </p>\n\n<p>i.e. <code>'1' != 1</code></p>\n"}], "owner": {"reputation": 3, "user_id": 7617608, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cf35dabd1b2b6a68d7339136c64e6ab?s=128&d=identicon&r=PG&f=1", "display_name": "Josephy22", "link": "https://stackoverflow.com/users/7617608/josephy22"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 42543804, "answer_count": 1, "score": 0, "last_activity_date": 1488726748, "creation_date": 1488409089, "last_edit_date": 1488726748, "question_id": 42543740, "link": "https://stackoverflow.com/questions/42543740/use-isdigit-in-c-programming", "title": "Use isdigit in C programming", "body": "<p>I would need some help regarding how to use <code>isdigit()</code> in this example:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;ctype.h&gt;\nint main()\n{\n   int usr_option;\n   do\n   {\n      printf(\"\\t\\t\\t************************MENU***********************\\n\");\n      printf(\"\\t\\t\\t***  1. Enter Code\\t\\t\\t\\t***\\n\");\n      printf(\"\\t\\t\\t***  2. Encrypt code and verify if correct\\t***\\n\");\n      printf(\"\\t\\t\\t***  3. Decrypt code\\t\\t\\t\\t***\\n\");\n      printf(\"\\t\\t\\t***  4. Display number of times code was enter\\t***\\n\");\n      printf(\"\\t\\t\\t***\\t\\t(i) Successfully\\t\\t***\\n\");\n      printf(\"\\t\\t\\t***\\t\\t(i) Unsuccessfully\\t\\t***\\n\");\n      printf(\"\\t\\t\\t***  5. Exit Program\\t\\t\\t\\t***\\n\");\n      printf(\"\\t\\t\\t***************************************************\\n\");\n      printf(\"\\nPlease enter your option from the menu: \");\n      scanf(\"%d\", &amp;usr_option); \n      if (isdigit(usr_option))\n      {\n          //Inside here is my switch case e.g switch(usr_option){/*code*/}\n      }\n      else\n      {\n        printf(\"Need to enter a digit\\n\");\n      }          \n    }//end do while \n    while(usr_option != 5);\n    return 0;\n }\n</code></pre>\n\n<p>How can I implement this code to not go into an infinite loop?\nI've tried different ways but it seems like it doesn't want to work. I use the compilers CodeBlocks and Sublime Text 3.</p>\n"}, {"tags": ["c", "bgi", "kbhit"], "answers": [{"tags": [], "owner": {"reputation": 6013, "user_id": 3310281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9b8b4ec03e2c7a424fdc428eb55f2e8?s=128&d=identicon&r=PG&f=1", "display_name": "Malcolm McLean", "link": "https://stackoverflow.com/users/3310281/malcolm-mclean"}, "is_accepted": true, "score": 0, "last_activity_date": 1488409950, "creation_date": 1488409950, "answer_id": 42543917, "question_id": 42543513, "link": "https://stackoverflow.com/questions/42543513/using-kbhit-in-c-to-control-a-bgi-drawing-of-a-robot/42543917#42543917", "title": "Using kbhit in C to control a BGI drawing of a robot", "body": "<p>You want one call to kbhit(). Assuming the conventional function, it will tell you if a key is depressed at the time of call. So you want to call it just once on your loop.</p>\n\n<pre><code>if(kbhit())\n{\n   ./* action to alter robot */\n}\nelse\n{\n   /* no user moves, maybe robot still has momentum */\n}\n</code></pre>\n\n<p>Try to move some logic out of main() as well.</p>\n"}], "owner": {"reputation": 33, "user_id": 7644068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ba746a07b58f467a8b894f7b1ee65af?s=128&d=identicon&r=PG&f=1", "display_name": "EllieC", "link": "https://stackoverflow.com/users/7644068/elliec"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "accepted_answer_id": 42543917, "answer_count": 1, "score": 1, "last_activity_date": 1488410120, "creation_date": 1488408131, "last_edit_date": 1488410120, "question_id": 42543513, "link": "https://stackoverflow.com/questions/42543513/using-kbhit-in-c-to-control-a-bgi-drawing-of-a-robot", "title": "Using kbhit in C to control a BGI drawing of a robot", "body": "<p>I have been trying various combinations of if and do while statements but can't get it to work correctly. We use Visual Studio 2015 and work with C code. The general aim of the code is to use BGI graphics to simulate a 2D robot (a circle and a line to indicate direction) and to make it perform various tasks. I have been told to;</p>\n\n<blockquote>\n  <p>Modify your program so that you can control your robot with your keyboard.</p>\n  \n  <p>To do this, you should initialise the initial velocities to 0 and add appropriate statements to your program in order to modify the velocities based on which key is being pressed. For instance, you could</p>\n  \n  <ul>\n  <li>increment v of a fixed constant quantity when the UP key is pressed</li>\n  <li>decrement v of a fixed constant quantity when the DOWN key is pressed </li>\n  <li>decrement w of a fixed constant quantity when the RIGHT key is pressed</li>\n  <li>increment w of a fixed constant quantity when the LEFT key is pressed</li>\n  <li>use another key to stop the robot</li>\n  </ul>\n</blockquote>\n\n<pre><code>#include &lt;graphics.h&gt; // includes BGI functions\n#include &lt;conio.h&gt;\n#include &lt;math.h&gt;\n#include &lt;stdio.h&gt;\n\nint main()\n{\n// this is a line of comment\n// initialise a 500 X 300 pixels viewport (2D graphic window)\n// don't modify the following lines of code\nint gd, gm;\ngd = CUSTOM;\ngm = CUSTOM_MODE(500, 300);\ninitgraph(&amp;gd, &amp;gm, \"\");\nint kbhit(), c = 0;\nfloat c1, c2, c3, c4, alpha, theta;\nint x, y, radius = 40, A, B;\nint xvTL = 0, yvTL = 0, xvBR = 500, yvBR = 300;\nint xTL = 0, yTL = 0, xBR = 50, yBR = 50;\nint xv, yv, W, H; \nfloat v, w, dt, beta, sigma;\nprintf(\"Pixels of graph window (Bottom Right) = 500, 300. World coordinates (Bottom Right) set to 50, 50 \\n\");                 \nprintf(\"Enter a number for x: \\n\");\nscanf(\"%d\", &amp;x);\nprintf(\"Enter a number for y: \\n\");\nscanf(\"%d\", &amp;y);\nW = xBR - xTL;\nH = yTL - yBR;\nxv = (x - xTL) * (500 / W);\nyv = (yTL - y) * (300 / H);\nprintf(\"Coordinates(in viewport) = %d, %d \\n\", xv, yv);\nprintf(\"Enter an angle (in degrees) : \\n\");\nscanf(\"%f\", &amp;alpha);\ntheta = (float)alpha * 3.1416 / 180;\nprintf(\"Angle (in radians) = %f \\n\", theta);\nA = cos(theta) * radius;\nB = sin(theta) * radius;\nif ((alpha = 90), (0 &lt; alpha &lt; 90), (90 &lt; alpha &lt; 180), (180 &lt; alpha &lt; 270), (alpha = 270), (270 &lt; alpha &lt; 360))\n    (B = sin(theta) * -radius);\nelse\n    (B = sin(theta) * radius);\ncircle(xv, yv, radius);\nline(xv, yv, xv + A, yv + B);\nv = 0;\nw = 0;\ndo {\n    clearviewport();\n    dt = 2;\n    xv = xv + v * dt * cos(theta);\n    yv = yv + v * dt * sin(theta);\n    sigma = theta + dt * w; \n    beta = sigma * 180 / 3.1416;\n    A = cos(sigma) * radius;\n    B = sin(sigma) * radius;\n    if ((beta = 90), (0 &lt; beta &lt; 90), (90 &lt; beta &lt; 180), (180 &lt; beta &lt; 270), (beta = 270), (270 &lt; beta &lt; 360))\n        (B = sin(sigma) * -radius);\n    else\n        (B = sin(sigma) * radius);\n    circle(xv, yv, radius);\n    line(xv, yv, xv + A, yv + B); \n    delay(200);\n    if (_kbhit()) {\n        (c = _getch());\n    }\n    if (_kbhit()) {\n        c1 = ++v;\n        v = c1;\n    }\n    if (_kbhit()) {\n        c2 = --v;\n        v = c2;\n    }\n    if (_kbhit()) {\n        c3 = ++w;\n        w = c3;\n    }\n    if (_kbhit()) {\n        c4 = --w;\n        w = c4;\n    }\n} while (c != KEY_ESCAPE); (c1 = KEY_UP); (c2 = KEY_DOWN); (c3 = KEY_LEFT);  (c4 = KEY_RIGHT);\n\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 3, "creation_date": 1488407737, "post_id": 42543399, "comment_id": 72222658, "body": "<code>overall = array[c] &#47; squareRoot;</code> --&gt; <code>overall = array[b] &#47; squareRoot;</code>"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 3, "creation_date": 1488407845, "post_id": 42543399, "comment_id": 72222705, "body": "why the realloc - its doesnt do anyting"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 1, "creation_date": 1488407912, "post_id": 42543399, "comment_id": 72222739, "body": "no functional difference , but the idiomatic names for array indexes are i,j,k not b,c. experienced c programmers will be surprised by b"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 1, "creation_date": 1488407992, "post_id": 42543399, "comment_id": 72222772, "body": "also the idiomatic array looping is <code>for(int i = 0; i &lt; x; i++)</code> not <code>while(...)</code>"}, {"owner": {"reputation": 6013, "user_id": 3310281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9b8b4ec03e2c7a424fdc428eb55f2e8?s=128&d=identicon&r=PG&f=1", "display_name": "Malcolm McLean", "link": "https://stackoverflow.com/users/3310281/malcolm-mclean"}, "edited": false, "score": 0, "creation_date": 1488408312, "post_id": 42543399, "comment_id": 72222917, "body": "You shouldn&#39;t be getting zeros. Put a diagnostic printf after you read the values into array."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1488408531, "post_id": 42543399, "comment_id": 72223006, "body": "@LookingWest  It is a second question with the same code today.:) Now you have only one attempt in your disposal relative to this program.:)"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1488408739, "post_id": 42543399, "comment_id": 72223090, "body": "@LookingWest  Oh, I am mistaken. It is the third question!:)"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1488409570, "post_id": 42543399, "comment_id": 72223434, "body": "<code>overall = array[c] &#47; squareRoot;</code> reads out of bounds (<code>c == x</code> at that point which is one past the end)"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1488409602, "post_id": 42543399, "comment_id": 72223447, "body": "@VladfromMoscow if that is true then close as duplicate?"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1488409681, "post_id": 42543399, "comment_id": 72223474, "body": "@M.M It seems he is unable to update all his mistakes in the program using one question.:) The program is too complicated."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1488410098, "post_id": 42543399, "comment_id": 72223640, "body": "@LookingWest  You should declare the variable total either as long long int or as double."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1488528803, "post_id": 42543399, "comment_id": 72280612, "body": "The posted code causes the return type from <code>calculations()</code> to be <code>int</code>.  This is because there is no prototype for that function before the function is actually called."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1488529123, "post_id": 42543399, "comment_id": 72280753, "body": "when writing an error message, is should be to <code>stderr</code>, not <code>stdout</code> and when the returned value from a system function indicates an error occurred.  should call <code>perror()</code> so the system error message is also output (note: perror() outputs to <code>stderr</code> which is what the code should be doing.)"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1488529415, "post_id": 42543399, "comment_id": 72280904, "body": "when calling any of the <code>scanf()</code> family of functions, always check the returned value (not the parameter values) to assure the operation was successful.  (in the current scenario, any returned value except <code>1</code> is an error."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1488529710, "post_id": 42543399, "comment_id": 72281044, "body": "the function: <code>malloc()</code> expects a parameter of type <code>size_t</code> but in the current scenario  the <code>x</code> is type <code>int</code> so an implicit conversion is performed. That conversion can change the sign of the result.  It would be better to declare <code>size_t x;</code>  and <code>scanf( &quot;%lu&quot;, &amp;x );</code>   and <code>size_t c = 0;</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1488529856, "post_id": 42543399, "comment_id": 72281127, "body": "the function <code>sqrt()</code> expect the parameter type to be <code>double</code> and the returned type is also <code>double</code> however the posted code is passing an <code>int</code> parameter   This results in an implicit conversion which the compiler, given some option like <code>-Wconversion</code> will complain about."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1488529925, "post_id": 42543399, "comment_id": 72281168, "body": "this line: <code>array = realloc(array, x * sizeof(int));</code> does absolutely noting but enable the possibility of a error to occur.  Strongly suggest removing that line"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1488530104, "post_id": 42543399, "comment_id": 72281246, "body": "suggest replacing: <code>while( c&lt;x ) ,,, c++;</code>  with <code>for( c=0; c&lt;x; c++ )</code>.  Similar considerations exist for the code block beginning with: <code>while( b&lt;x )</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1488530354, "post_id": 42543399, "comment_id": 72281379, "body": "regarding this statement:  <code>overall = array[c] &#47; squareRoot;</code>  at this point in the code, the variable <code>c</code> is the index one past the end of the array <code>array[]</code>.  Accessing one past the end of the array is undefined behavior and can lead to a seg fault event.  I.E. any value that ends in the variable <code>overall</code> is trash"}], "owner": {"reputation": 69, "user_id": 7284540, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/33b6bb2d85eac6941de18968f0e805ec?s=128&d=identicon&r=PG&f=1", "display_name": "LookingWest", "link": "https://stackoverflow.com/users/7284540/lookingwest"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1488407599, "creation_date": 1488407599, "question_id": 42543399, "link": "https://stackoverflow.com/questions/42543399/wrong-output-when-using-malloc-in-arrays", "title": "Wrong output when using malloc in arrays", "body": "<p>I'm fairly new to c and what I'm trying to do is learn and use malloc and realloc. My program takes an integer x input, then loops until x is met while also taking other integer inputs. I then do various calculations. However my output is 0 when I know it should be something else.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;math.h&gt;\n\nint main(void)\n{\n\n    calculations();\n}\n\nvoid calculations()\n{\n\n    int i;\n    int x;\n    int total = 0;\n    double squareRoot;\n    double overall;\n\n    scanf(\"%d\", &amp;x);\n\n    int* array = malloc(x * sizeof(int));\n\n    if (!array) {\n        printf(\"There isn't enough memory \\n\");\n        return;\n    }\n\n    int c = 0;\n\n\n    while (c &lt; x) {\n\n\n        scanf(\"%d\", &amp;array[c]);\n\n        total += array[c] * array[c];\n        c++;\n    }\n\n    squareRoot = sqrt(total);\n    array = realloc(array, x * sizeof(int));\n\n    int b = 0;\n\n    while (b &lt; x) {\n\n        overall = array[c] / squareRoot;\n        printf(\"%.3f \", overall);\n\n        b++;\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "multithreading", "debugging", "recursion"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1488408921, "post_id": 42543382, "comment_id": 72223167, "body": "After the child calls <code>worker()</code> recursively it falls through to the rest of the code. So both the parent and child execute that code."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1488409041, "post_id": 42543382, "comment_id": 72223229, "body": "What is <code>pipefd2</code> for, and why do you allocate it with <code>malloc()</code> instead of just declaring a local array? You also never <code>free(pipefd2);</code>"}, {"owner": {"reputation": 1, "user_id": 6313630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb927c468fd88dc9e5752c540a586a06?s=128&d=identicon&r=PG&f=1", "display_name": "Cpawel", "link": "https://stackoverflow.com/users/6313630/cpawel"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1488409160, "post_id": 42543382, "comment_id": 72223274, "body": "It is supposed to go to the rest of that code - the issue lies that the child should not call <code>worker()</code> more than once, and I&#39;m not sure why it does. As for pipefd2 being malloced, I wasn&#39;t sure that a local array would work. However, I am not concerned about memory leaks at the moment. And the reason pipefd2 exists is to allow communication between the child and the grandchild."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1488409422, "post_id": 42543382, "comment_id": 72223378, "body": "What makes you say that the child is calling <code>worker()</code> twice? The problem I see is that the parent and child are processing the same chunk of the array when <code>worker()</code> returns."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1488409453, "post_id": 42543382, "comment_id": 72223389, "body": "You never use <code>pipefd2</code> for communication between the child and grandchild. Maybe you meant to pass <code>pipefd2</code> in the call to <code>worker()</code>?"}, {"owner": {"reputation": 1, "user_id": 6313630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb927c468fd88dc9e5752c540a586a06?s=128&d=identicon&r=PG&f=1", "display_name": "Cpawel", "link": "https://stackoverflow.com/users/6313630/cpawel"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1488409643, "post_id": 42543382, "comment_id": 72223460, "body": "Ah yes, that is indeed an error - concerning pipefd2. As for why I say that the child is calling <code>worker()</code> twice is because as I was debugging the code in Eclipse CDT, I saw <code>worker()</code> twice under the third process (second child) and <code>worker()</code> thrice under the fourth process (third child)."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1488409907, "post_id": 42543382, "comment_id": 72223564, "body": "Make sure you have output buffering turned off in <code>fso</code>. Otherwise the buffer will be duplicated when you <code>fork()</code>."}, {"owner": {"reputation": 1, "user_id": 6313630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb927c468fd88dc9e5752c540a586a06?s=128&d=identicon&r=PG&f=1", "display_name": "Cpawel", "link": "https://stackoverflow.com/users/6313630/cpawel"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1488410182, "post_id": 42543382, "comment_id": 72223674, "body": "Ah well, speaking of fso - I edited the code as per your notice of the bug concerning pipefd2, and everything is being written the the output file correctly. There is proper communication between the parent and its children/grandchildren. However, I am still getting a read error - occurring at the first read (labeled read01). Running the code through eclipse, I still see <code>worker()</code> being called twice under the second child - so that is still an issue.  And thank you for that catch of pipefd2."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1488410263, "post_id": 42543382, "comment_id": 72223703, "body": "Since you&#39;re using a debugger, you should be able to single-step through the program, and see how it&#39;s getting there in each process."}, {"owner": {"reputation": 1, "user_id": 6313630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb927c468fd88dc9e5752c540a586a06?s=128&d=identicon&r=PG&f=1", "display_name": "Cpawel", "link": "https://stackoverflow.com/users/6313630/cpawel"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1488410372, "post_id": 42543382, "comment_id": 72223741, "body": "That is the curious thing, I have been stepping through the program and yet it still eludes me."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1488410552, "post_id": 42543382, "comment_id": 72223807, "body": "How are you calling <code>worker()</code> from the main program? Could there be a loop there?"}, {"owner": {"reputation": 1, "user_id": 6313630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb927c468fd88dc9e5752c540a586a06?s=128&d=identicon&r=PG&f=1", "display_name": "Cpawel", "link": "https://stackoverflow.com/users/6313630/cpawel"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1488410662, "post_id": 42543382, "comment_id": 72223842, "body": "I have just found out that I am blind (jokingly). The reason that I saw two <code>worker()</code> methods under one child is due to the fact that the child is spawned in <code>worker()</code> and then proceeds to create its own version of <code>worker()</code>. I presume this is what you were alluding to earlier, and I did not understand what you meant. My apologies. I do indeed call <code>worker()</code> from the main method, but there is no loop. I now know where to look for errors, so I thank you for lending me your eyes on this code."}, {"owner": {"reputation": 1, "user_id": 6313630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb927c468fd88dc9e5752c540a586a06?s=128&d=identicon&r=PG&f=1", "display_name": "Cpawel", "link": "https://stackoverflow.com/users/6313630/cpawel"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1488410870, "post_id": 42543382, "comment_id": 72223919, "body": "The other issue that I saw is that I <code>close(pipefd[0])</code> and then proceed to try to read from that pipe later on."}], "owner": {"reputation": 1, "user_id": 6313630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb927c468fd88dc9e5752c540a586a06?s=128&d=identicon&r=PG&f=1", "display_name": "Cpawel", "link": "https://stackoverflow.com/users/6313630/cpawel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1501605892, "creation_date": 1488407524, "last_edit_date": 1501605892, "question_id": 42543382, "link": "https://stackoverflow.com/questions/42543382/why-is-the-following-supposedly-forming-a-recursive-call-in-a-single-process", "title": "Why is the following (supposedly) forming a recursive call in a single process?", "body": "<p>A bit of background information before I insert the code:\nI was given the task of writing a program that finds the min, max and sum from an array. The way the task dictates to have this accomplished is through the use of a process chain, having one process spawn a child, which that child spawns another child, etc. - each taking a chunk of the array to process.\nI am not using any type of exec, since I need communication throughout the entire procedure - the grandest child will report back its own parent, which will then proceed to report to its parent, so on and so forth.\nThe issue I am having is that on the second child, a method I created (called worker) seems to be performed twice, recursively. The second child is going through its own data first, but then proceeds to recurse and go through the data of the first child. </p>\n\n<p>Here is the code of the method called worker:</p>\n\n<pre><code>void worker(int start, int num, long * cur, FILE * fso, int pipefd[]){\n    /*\n     * start is the starting index for cur - the array of longs\n     * num is the number of processes to still be created\n     */\n\n    close(pipefd[0]); // close reading portion of initial pipe - communicates to parent from this child\n\n    int pid = -2;\n\n    int * pipefd2 = (int *)malloc(sizeof(int)*2); // second pipe to talk with the child about to be spawned\n\n    if(num &gt; 0){\n        if(pipe(pipefd2) == -1)\n            handle_error(\"pipe\");\n        pid = fork();\n    }\n\n    if(pid == 0)\n        worker(start + 5, num-1, cur, fso, pipefd2);\n    else if(pid == -1)\n        handle_error(\"fork\");\n\n    /*\n     * Start of finding local information\n     */\n\n    long sum, min, max;\n\n    sum = cur[start];\n    min = sum;\n    max = min;\n\n    int i;\n    for(i = 1; i &lt; 5; i++){\n        sum += cur[start+i];\n        if(max &lt; cur[start+i])\n            max = cur[start+i];\n        else if (min &gt; cur[start+i])\n            min = cur[start+i];\n    }\n\n    /*\n     * Found the local sum, max and min - now to acquire the sum, max and min from the child (if applicable)\n     */\n\n    close(pipefd2[1]); // dont need writing portion to hear from child\n\n    if(pid != -2){ // checking if child was spawned, and now to deal with it\n        long buf; // buffer to hold incoming longs\n\n        i = read(pipefd[0], &amp;buf, sizeof(long)); // j is an error catch - read will first read the sum found\n        if(i == -1)\n            handle_error(\"read01\");\n        sum += buf;\n\n        i = read(pipefd[0], &amp;buf, sizeof(long)); // then it reads the min found\n        if(i == -1)\n            handle_error(\"read02\");\n        if(buf &lt; min)\n            min = buf;\n\n        i = read(pipefd[0], &amp;buf, sizeof(long)); // and finally the max that was found is read\n        if(i == -1)\n            handle_error(\"read03\");\n        if(max &lt; buf)\n            max = buf;\n    }\n\n    close(pipefd2[0]);\n\n    wait(NULL);\n\n    int err;\n    err = fprintf(fso, \"Hi I'm process %d and my parent is %d.\\n\", (int) getpid(), (int) getppid());\n\n    if(err &lt; 0)\n        handle_error_en(5, \"fprintf failed unexpectedly\");\n\n    err = write(pipefd[1], &amp;sum, sizeof(long));\n    if(err == -1)\n        handle_error(\"write\");\n\n    err = write(pipefd[1], &amp;min, sizeof(long));\n    if(err == -1)\n        handle_error(\"write\");\n\n    err = write(pipefd[1], &amp;max, sizeof(long));\n    if(err == -1)\n        handle_error(\"write\");\n\n    close(pipefd[1]);\n    return;\n}\n</code></pre>\n\n<p>Things to note: I made each chunk from the array 5 'longs'. I do get a pipe error, but I am assuming this is due to the fact that a true pipping hasn't been made with the recursively called method.</p>\n"}, {"tags": ["c", "scanf"], "comments": [{"owner": {"reputation": 18507, "user_id": 13317, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/47a9a5b4589057085336011863d2ee9a?s=128&d=identicon&r=PG", "display_name": "Kenster", "link": "https://stackoverflow.com/users/13317/kenster"}, "edited": false, "score": 8, "creation_date": 1488405302, "post_id": 42542814, "comment_id": 72221488, "body": "No mathematical solution is going to detect a leading zero. You&#39;d have to read the user&#39;s input as a string and get the string length."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1488405428, "post_id": 42542814, "comment_id": 72221573, "body": "you should add <code>printf</code> of n before your while , you will see that the leading 0(s) has gone"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 1, "creation_date": 1488405527, "post_id": 42542814, "comment_id": 72221619, "body": "<code>char n[100]; scanf(&quot;%s&quot;,n); c=strlen(n);</code>. That will give you the number of digits assuming the input is valid. To verify that it is indeed a number use <code>strtol</code>."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1488406369, "post_id": 42542814, "comment_id": 72221999, "body": "Use <code>%n</code> <a href=\"http://ideone.com/p7OV1H\" rel=\"nofollow noreferrer\">sample code</a>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1488406846, "post_id": 42542814, "comment_id": 72222216, "body": "For negative input like <code>&quot;-123&quot;</code>, should that report 3 or 4?"}], "answers": [{"tags": [], "owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "is_accepted": false, "score": 0, "last_activity_date": 1488405463, "creation_date": 1488405463, "answer_id": 42542894, "question_id": 42542814, "link": "https://stackoverflow.com/questions/42542814/how-to-count-the-digits-in-a-number-including-leading-zeros/42542894#42542894", "title": "How to count the digits in a number, including leading zeros?", "body": "<pre><code>#include&lt;stdio.h&gt;\n#include &lt;string.h&gt;\nint main()\n{\n    char n[101];\n    printf(\"Enter no\\n\");\n    scanf(\"%100s\",n);\n    printf(\"No of digits=&gt;%d\\n\",strlen(n));\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 3, "last_activity_date": 1488407475, "last_edit_date": 1495539968, "creation_date": 1488407475, "answer_id": 42543369, "question_id": 42542814, "link": "https://stackoverflow.com/questions/42542814/how-to-count-the-digits-in-a-number-including-leading-zeros/42543369#42543369", "title": "How to count the digits in a number, including leading zeros?", "body": "<blockquote>\n  <p>How to count the digits in a number, including leading zeros?</p>\n</blockquote>\n\n<p>To count the number of digits entered, including leading 0 digits, record the scan offsets before and after the number.  This method reports a sign character as a digit, but does not count leading white-space.</p>\n\n<p>Use <code>\"%n\"</code> to record the number of characters scanned so far. <a href=\"https://stackoverflow.com/questions/42542814/how-to-count-the-digits-in-a-number-including-leading-zeros/42543369#comment72221999_42542814\">@BLUEPIXY</a></p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint main() {\n  int begin;\n  int after = 0;\n  int number;\n  printf(\"Enter number\\n\");\n  fflush(stdout);\n  //     +--- consumes leading white-space\n  //     | +- record number of characters scanned\n  scanf(\" %n%d%n\", &amp;begin, &amp;number, &amp;after);\n  if (after &gt; 0) {\n    printf(\"No of digits: %d\\n\", after - begin);\n    printf(\"Value read  : %d\\n\", number);\n  } else {\n    puts(\"Invalid input\");\n  }\n}\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>Enter number\n  000123\nNo of digits: 6\nValue read  : 123\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 7385342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bfa23158154d8e8f5d541d84ccafde6?s=128&d=identicon&r=PG&f=1", "display_name": "Avinash Sharma", "link": "https://stackoverflow.com/users/7385342/avinash-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2047, "favorite_count": 0, "answer_count": 2, "score": -4, "last_activity_date": 1488407475, "creation_date": 1488405183, "last_edit_date": 1488405749, "question_id": 42542814, "link": "https://stackoverflow.com/questions/42542814/how-to-count-the-digits-in-a-number-including-leading-zeros", "title": "How to count the digits in a number, including leading zeros?", "body": "<p>This code tries to count digits in the input number.</p>\n\n<p>If the input number is <code>06584</code>, the output of this code will be <code>4</code>, excluding zero. How can I get <code>5</code> as output (so counting the zero)?</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nvoid main()\n{\n    int n,c=0,d;\n    printf(\"Enter no\\n\");\n    scanf(\"%d\",&amp;n);\n    while(n!=0)\n    {\n        d=n%10;\n        c++;\n        n=n/10;\n    }\n    printf(\"No of digits=&gt;%d\\n\",c);\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1488404789, "post_id": 42542648, "comment_id": 72221205, "body": "Please tell me why would it be a problem what all prototypes are not exposed"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 2, "creation_date": 1488404848, "post_id": 42542648, "comment_id": 72221240, "body": "Short advice: don&#39;t. At link time, the functions <b>will</b> be <i>exposed</i> anyway. So: you can hide the names in your header from the compiler, but you cannot hide the names in the object file from the linker."}, {"owner": {"reputation": 409, "user_id": 4657413, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/6u2Hm.jpg?s=128&g=1", "display_name": "newb7777", "link": "https://stackoverflow.com/users/4657413/newb7777"}, "reply_to_user": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1488405577, "post_id": 42542648, "comment_id": 72221642, "body": "@Ed Heal I don&#39;t want the second file (file2.c) to be able to  access the other functions in (file1.c). In general, I don&#39;t have any idea why exposing all the headers in my project by including then in all C files in my project would affect my code."}, {"owner": {"reputation": 13741, "user_id": 1624376, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/OkgmJ.png?s=128&g=1", "display_name": "Aubin", "link": "https://stackoverflow.com/users/1624376/aubin"}, "edited": false, "score": 0, "creation_date": 1488405653, "post_id": 42542648, "comment_id": 72221678, "body": "Use the <code>static</code> keyword for functions you don&#39;t want to be used outside the C file."}, {"owner": {"reputation": 409, "user_id": 4657413, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/6u2Hm.jpg?s=128&g=1", "display_name": "newb7777", "link": "https://stackoverflow.com/users/4657413/newb7777"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1488406049, "post_id": 42542648, "comment_id": 72221837, "body": "@wildplasser Do you mean that if i expose the same function prototypes from (file1.h) in another header file (file2,h) and include in file2.c the object files will still have all functions exposed. IMO, the issue would be that there are 2 copies of the same function between the 2 headers and if I am using the function for Getter purposes it wont get the correct values."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1488406588, "post_id": 42542648, "comment_id": 72222097, "body": "Prototypes (maybe in header files) are there to inform the compiler about functions that it cannot <i>see</i>, so it can generate correct code when <i>calling</i> them. At the linking stage, these names are <i>actually</i> resolved. (the linker uses the symbol tables in the object files)"}], "answers": [{"tags": [], "owner": {"reputation": 17102, "user_id": 1022889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WZOSZ.jpg?s=128&g=1", "display_name": "Cloud", "link": "https://stackoverflow.com/users/1022889/cloud"}, "is_accepted": false, "score": 2, "last_activity_date": 1488473401, "last_edit_date": 1488473401, "creation_date": 1488405318, "answer_id": 42542846, "question_id": 42542648, "link": "https://stackoverflow.com/questions/42542648/exposing-only-a-small-subset-of-functions-from-a-header/42542846#42542846", "title": "exposing only a small subset of functions from a header", "body": "<p>Easy. For \"public\" function prototypes/declarations, put them in the <code>.h</code> file.</p>\n\n<p><strong><code>func.h</code></strong></p>\n\n<hr>\n\n<pre><code>int func1(void);\nint func2(int i);\n</code></pre>\n\n<p>For the functions you don't want exposed, just put them in the <code>.c</code> file.</p>\n\n<p><strong><code>func.c</code></strong></p>\n\n<hr>\n\n<pre><code>/* Function prototypes. */\nstatic int func3(void);\n\n/* Function definitions. */\nint func1(void) {\n    func3();\n    return 0;\n}\n\nint func2(int i) {\n    func3();\n    return (i + i);\n}\n\nstatic int func3(void) {\n    return 42;\n}\n</code></pre>\n\n<p>Next, depending on your compiler, setup an <a href=\"https://gcc.gnu.org/wiki/Visibility\" rel=\"nofollow noreferrer\">exported symbol whitelist</a> (ie: <code>gcc hidden attributes</code>, for example, on Linux), to limit what symbols are exported.</p>\n\n<p>Finally, <code>strip</code> the final binary after it has been compiled (ie: <code>strip --strip-unneeded myfile.so</code>), and you're all set. Even if the user knows the API in use, your \"private\" symbols could only be directly accessed via non-portable hacks.</p>\n\n<p>Enjoy!</p>\n"}, {"tags": [], "owner": {"reputation": 4046, "user_id": 4971422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4abf51a937ddda51cc6813445605c50?s=128&d=identicon&r=PG&f=1", "display_name": "FredK", "link": "https://stackoverflow.com/users/4971422/fredk"}, "is_accepted": false, "score": 0, "last_activity_date": 1488405439, "creation_date": 1488405439, "answer_id": 42542882, "question_id": 42542648, "link": "https://stackoverflow.com/questions/42542648/exposing-only-a-small-subset-of-functions-from-a-header/42542882#42542882", "title": "exposing only a small subset of functions from a header", "body": "<p>One common way to expose only some functions in the public API (this is how the Motif GUI libraries do it) is to put prototypes for the publicly available functions in MyThing.h, then put the rest in MyThingI.h, which #includes MyThing.h, and your .c file includes MyThingI.h (The I is for Internal). That way, your own code can have multiple files that include the I.h file, while the public .h files delivered with your library only include the .h file.</p>\n\n<p>All of the prototypes in the .h file should use the \"extern\" keyword.</p>\n"}], "owner": {"reputation": 409, "user_id": 4657413, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/6u2Hm.jpg?s=128&g=1", "display_name": "newb7777", "link": "https://stackoverflow.com/users/4657413/newb7777"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 169, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1488473401, "creation_date": 1488404578, "question_id": 42542648, "link": "https://stackoverflow.com/questions/42542648/exposing-only-a-small-subset-of-functions-from-a-header", "title": "exposing only a small subset of functions from a header", "body": "<p>I have a \n\"header file\" (file1.h) that has multiple function prototypes declaration and a \n\"C file\"(file1.c) that has associated function definitions. </p>\n\n<p>I want to expose only particular functions prototypes from the \"header file\" (file1.h) to another \"C file\" (file2.c) without exposing the rest of the functions. </p>\n\n<p>Question1: What is the best way to do this? \nOptions: Created another header that has the required functions only that is included in (file2.c)</p>\n\n<p>Question2 &amp; 3: When would <code>extern</code> come in handy? \nI have seen usage of <code>extern</code> in some functions in header files while other functions don't use the keyword. Whats the idea?    </p>\n"}, {"tags": ["c", "linux", "alsa", "portaudio"], "answers": [{"comments": [{"owner": {"reputation": 1269, "user_id": 2592879, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7f68f87c8087f7dc52d8ad88761dc5c1?s=128&d=identicon&r=PG", "display_name": "bzrr", "link": "https://stackoverflow.com/users/2592879/bzrr"}, "edited": false, "score": 1, "creation_date": 1490997099, "post_id": 43142994, "comment_id": 73377485, "body": "Is there any way to get the correct time info with ALSA backend?"}], "tags": [], "owner": {"reputation": 2025, "user_id": 3753366, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/CYKno.jpg?s=128&g=1", "display_name": "filaton", "link": "https://stackoverflow.com/users/3753366/filaton"}, "is_accepted": false, "score": 1, "last_activity_date": 1490970505, "last_edit_date": 1490970505, "creation_date": 1490969968, "answer_id": 43142994, "question_id": 42542601, "link": "https://stackoverflow.com/questions/42542601/pastreamcallbacktimeinfo-members-are-all-0/43142994#43142994", "title": "PaStreamCallbackTimeInfo members are all 0", "body": "<p>Your example compiles fine on my Mac and returns meaningful time information so the issue is not in your code.</p>\n\n<p>You haven't said which audio backend you're using on Linux, but if you're using <em>ALSA</em> and <em>PulseAudio</em>, there've been problems getting time info with those (see <a href=\"http://portaudio.music.columbia.narkive.com/cJ4dWvTd/getstreamtime-with-alsa-hostapi\" rel=\"nofollow noreferrer\">there</a> for instance). In this specific case of <em>ALSA/PulseAudio</em>, <em>Pulse</em> is the one to blame and <em>PortAudio</em> has nothing to do with that.</p>\n\n<p>If you're using a different audio backend, you might want to check the implementation of the <code>GetStreamTime()</code> function in the corresponding <code>src/hostapi/&lt;your_backend&gt;</code> <em>PortAudio</em> source folder.</p>\n\n<hr>\n\n<p>As a side note, never make I/O operations in an audio callback in a real product. <code>printf</code> is a huge function which takes quite a lot of time to execute (from an audio callback point-of-view).</p>\n"}], "owner": {"reputation": 1269, "user_id": 2592879, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7f68f87c8087f7dc52d8ad88761dc5c1?s=128&d=identicon&r=PG", "display_name": "bzrr", "link": "https://stackoverflow.com/users/2592879/bzrr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 379, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490996969, "creation_date": 1488404425, "last_edit_date": 1490996969, "question_id": 42542601, "link": "https://stackoverflow.com/questions/42542601/pastreamcallbacktimeinfo-members-are-all-0", "title": "PaStreamCallbackTimeInfo members are all 0", "body": "<p>From the <a href=\"http://portaudio.com/docs/v19-doxydocs/api_overview.html\" rel=\"nofollow noreferrer\">PortAudio docs</a>:</p>\n\n<blockquote>\n  <p>Stream Timing Information</p>\n  \n  <p>When using the callback I/O method your stream callback function\n  receives timing information via a pointer to a\n  PaStreamCallbackTimeInfo structure. This structure contains the\n  current time along with the estimated hardware capture and playback\n  time of the first sample of the input and output buffers. All times\n  are measured in seconds relative to a Stream-specific clock. The\n  current Stream clock time can be retrieved using Pa_GetStreamTime().</p>\n</blockquote>\n\n<p>So <code>PaStreamCallbackTimeInfo::currentTime</code> somehow indicates the current time and <code>PaStreamCallbackTimeInfo::outputBufferDacTime</code> should indicate the output time of the first sample in the current buffer. I don't know why but, on Linux, these values are all zero for me. Maybe I'm doing something wrong. Here's the code and the output:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;math.h&gt;\n#include \"portaudio.h\"\n\n#define PI 3.14159265359\n#define SRATE 44100\n#define FREQ 440\n#define DURATION 5000\n\nint\naudio_callback(\n    const void* inbuf,\n    void* outbuf,\n    unsigned long bufsize,\n    const PaStreamCallbackTimeInfo* time_info,\n    PaStreamCallbackFlags status_flags,\n    void* user_data)\n{\n    (void)inbuf;\n    (void)status_flags;\n\n    double* phase = (double*)user_data;\n    float* out = (float*)outbuf;\n\n    printf(\n        \"current time = %f; out time = %f\\n\",\n        time_info-&gt;currentTime,\n        time_info-&gt;outputBufferDacTime);\n\n    for (unsigned long i = 0; i &lt; bufsize; i++)\n    {\n        *phase += 2 * PI * FREQ / SRATE;\n        out[i] = sin(*phase);\n    }\n\n    return 0;\n}\n\nint     \nmain(int argc, char** argv)\n{\n    (void)argc;\n    (void)argv;\n\n    PaError pa_error;\n    PaStream* stream = NULL;\n    int error = 0;    \n    double phase = 0;\n\n    pa_error = Pa_Initialize();\n    if (pa_error != paNoError)\n    {\n        return 1;\n    }\n\n    pa_error = Pa_OpenDefaultStream(\n        &amp;stream,\n        0,\n        1,\n        paFloat32,\n        SRATE,\n        paFramesPerBufferUnspecified,\n        &amp;audio_callback,\n        &amp;phase);\n    if (pa_error != paNoError)\n    {\n        error = 1;\n        goto exit;\n    }\n\n    pa_error = Pa_StartStream(stream);\n    if (pa_error != paNoError)\n    {\n        error = 1;\n        goto exit;\n    }\n\n    Pa_Sleep(DURATION);\n\n    pa_error = Pa_CloseStream(stream);\n    if (pa_error != paNoError)\n    {\n        error = 1;\n        goto exit;\n    }\n\n    printf(\"Done.\\n\");\n\nexit:\n    Pa_Terminate();\n\n    if (pa_error != paNoError)\n    {\n        printf(\"PortAudio error: %s\\n\", Pa_GetErrorText(pa_error));\n    }\n\n    return error;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>current time = 0.000000; out time = 0.000000\ncurrent time = 0.000000; out time = 0.000000\ncurrent time = 0.000000; out time = 0.000000\ncurrent time = 0.000000; out time = 0.000000\n...\n</code></pre>\n\n<p><strong>Addendum</strong>: This same piece of code seems to work fine with Visual Studio in Windows 10.</p>\n"}, {"tags": ["c", "mpi", "mpich", "slurm"], "comments": [{"owner": {"reputation": 1700, "user_id": 3517823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6ead39c453c59e5666b801a3a17919d?s=128&d=identicon&r=PG&f=1", "display_name": "Arash", "link": "https://stackoverflow.com/users/3517823/arash"}, "edited": false, "score": 0, "creation_date": 1488445875, "post_id": 42542582, "comment_id": 72237336, "body": "Read <a href=\"http://stackoverflow.com/questions/14571203/mpich-communication-failed\">Here</a>.  So, I suggest to try that. You can find documentation on Open MPI installation from source <a href=\"https://www.open-mpi.org/faq/?category=building#easy-build\" rel=\"nofollow noreferrer\">here</a>. You can also install it from a repository depending on your OS.  The installation is straightforward (Well, most of the time:-) ). Let me know if you need help with that."}, {"owner": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "edited": false, "score": 0, "creation_date": 1488453458, "post_id": 42542582, "comment_id": 72242468, "body": "This usually happens (also with Open MPI) when the nodes try to communicate over TCP/IP, but the network configuration does not allow it. A typical reason could be the network setup of each node. For example, there might be network interfaces on the different nodes that share the same IP subnet, but are not physically connected. On some Linux distributions (mainly those derived from RHEL) there is a virtual bridge interface brought up automatically at boot by <code>libvirt</code> (for use with KVM guests). The IP network address is set in the default config file and will be the same on all nodes."}], "owner": {"reputation": 45, "user_id": 1781507, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EY5qS.jpg?s=128&g=1", "display_name": "vassago", "link": "https://stackoverflow.com/users/1781507/vassago"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 321, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1488445039, "creation_date": 1488404341, "question_id": 42542582, "link": "https://stackoverflow.com/questions/42542582/mpich-slurm-assign-host-rank", "title": "MPICH/SLURM assign host rank", "body": "<p>I'm using MPICH with SLURM and am trying to assign a rank to a specific node (due to hardware differences, I want a specific node to always be rank 0). MPICH is using the Hydra Process Manager. Checking the documentation I should be able to have a rank file (or machine file, not sure the difference) with a list of hosts that get assigned in round robin.</p>\n\n<p>Here is an example program I'm using for testing:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;mpi.h&gt;\n#include &lt;unistd.h&gt;\n\nint main(int argc, char **argv) {\n    char hostname[256];\n    int rank;\n    int size;\n\n    MPI_Init(&amp;argc,&amp;argv);\n    MPI_Comm_rank(MPI_COMM_WORLD, &amp;rank);\n    MPI_Comm_size(MPI_COMM_WORLD, &amp;size);\n    gethostname(hostname,255);\n\n    printf(\"I am rank: %d on host %s\\n\", rank, hostname);\n\n    if (rank == 0) {\n        for (int x = 1; x &lt; size; x++) {\n            int recv;\n            MPI_Recv(&amp;recv, 1, MPI_INT, x, 0, MPI_COMM_WORLD, MPI_STATUS_IGNORE);\n            printf(\"host %s : rank %d received %d\\n\", hostname, rank, recv);\n        }\n    } else {\n        printf(\"host %s : rank %d is sending a message\\n\", hostname, rank);\n        MPI_Send(&amp;rank, 1, MPI_INT, 0, 0, MPI_COMM_WORLD);\n    }\n    MPI_Barrier(MPI_COMM_WORLD);\n    MPI_Finalize();\n    return 0;\n}\n</code></pre>\n\n<p>My rank file contents is as follows:</p>\n\n<pre><code>node02\nnode01\n</code></pre>\n\n<p>Because I want node02 to be assigned rank zero. I then run the following:</p>\n\n<pre><code>salloc -N2 -c 24 -p debug mpiexec -machinefile ./rankfile.txt ./mpi_test\n</code></pre>\n\n<p>This fails with the output and error:</p>\n\n<pre><code>I am rank: 0 on host node01\nI am rank: 1 on host node02\nhost node02 : rank 1 is sending a message\nFatal error in MPI_Send: Unknown error class, error stack:\nMPI_Send(174)..............: MPI_Send(buf=0x7fff9503155c, count=1, MPI_INT, dest=0, tag=0, MPI_COMM_WORLD) failed\nMPID_nem_tcp_connpoll(1835): Communication error with rank 0: Connection refused\n</code></pre>\n\n<p>Searching about this error has not been helpful and setting HYDRA_DEBUG does not provide additional info about the error. I am able to SSH between the two nodes fine, running without the -f (or -machinefile) flag and rankfile works fine, and swapping the order of hosts in the rankfile (equivalent to running without the rank file, effectively) runs fine. Strangely, printing out the rank and hostname info running with the rankfile still shows node01 to be rank zero... Another strange behavior is that changing the rankfile to:</p>\n\n<pre><code>node03\nnode01\n</code></pre>\n\n<p>Fails completely with SLURM saying \"Requested node configuration not available\" however, running with -N3 and using all three nodes works with no problem (node03 is a valid node in the debug pool).</p>\n\n<p>Is this a configuration problem? Am I using the flags wrong or the wrong flags? It seems OpenMPI has better support for assigning ranks than MPICH, but setting up SLURM and MPICH wasn't trivial due to the cluster setup so I'm hesitant to start over with OpenMPI.</p>\n"}, {"tags": ["c", "string", "compare"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1488403132, "post_id": 42542177, "comment_id": 72220278, "body": "This looks like a code page problem. What output do you get for <code>printf(&quot;%s&quot; ,&quot;&#199;ank\u0131r\u0131&quot;);</code>? What is your system?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1488403244, "post_id": 42542177, "comment_id": 72220345, "body": "BTW: <code>char *y=malloc(sizeof(char)*25);</code> is overkill, you can replace it with <code>char y[25]</code>."}, {"owner": {"reputation": 369, "user_id": 6934695, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/hWtA6.png?s=128&g=1", "display_name": "Sarper Kumcu", "link": "https://stackoverflow.com/users/6934695/sarper-kumcu"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1488403251, "post_id": 42542177, "comment_id": 72220348, "body": "Can&#39;t see turkish characters in output, output is like Ank2r2 . But printf(&quot;%s&quot;,y) &#39;s output is &#199;ank\u0131r\u0131.   char y[25] didn&#39;t work but thanks for advice."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1488403290, "post_id": 42542177, "comment_id": 72220368, "body": "OK, thenit&#39;s not a C problem but a code page problem. What is your system? Windows, Linux, Mac,...?"}, {"owner": {"reputation": 369, "user_id": 6934695, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/hWtA6.png?s=128&g=1", "display_name": "Sarper Kumcu", "link": "https://stackoverflow.com/users/6934695/sarper-kumcu"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1488403321, "post_id": 42542177, "comment_id": 72220383, "body": "Windows 10, I use CodeBlocks"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1488403483, "post_id": 42542177, "comment_id": 72220467, "body": "Compile with all warnigns enabled, in Visual Studio I get this warning: <code>Warning\tC4566\tcharacter represented by universal - character - name &#39;\\u0131&#39; cannot be represented in the current code page(1252)</code>"}, {"owner": {"reputation": 369, "user_id": 6934695, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/hWtA6.png?s=128&g=1", "display_name": "Sarper Kumcu", "link": "https://stackoverflow.com/users/6934695/sarper-kumcu"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1488403795, "post_id": 42542177, "comment_id": 72220621, "body": "Only warning I get is ||WARNING: Can&#39;t read file&#39;s timestamp: C:\\Users\\x\\Desktop\\afcz\\qdbmp.c|"}, {"owner": {"reputation": 369, "user_id": 6934695, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/hWtA6.png?s=128&g=1", "display_name": "Sarper Kumcu", "link": "https://stackoverflow.com/users/6934695/sarper-kumcu"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1488403848, "post_id": 42542177, "comment_id": 72220664, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/136998/discussion-between-nerdic-sapo-and-michael-walz\">continue this discussion in chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 39687, "user_id": 79566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edad7f3ab41c3bdfdf851759dce5c33b?s=128&d=identicon&r=PG", "display_name": "bta", "link": "https://stackoverflow.com/users/79566/bta"}, "reply_to_user": {"reputation": 369, "user_id": 6934695, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/hWtA6.png?s=128&g=1", "display_name": "Sarper Kumcu", "link": "https://stackoverflow.com/users/6934695/sarper-kumcu"}, "edited": false, "score": 0, "creation_date": 1488404758, "post_id": 42542443, "comment_id": 72221189, "body": "Try again, my sample code was missing the required &#39;L&#39; prefix for the wide-character strings."}, {"owner": {"reputation": 369, "user_id": 6934695, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/hWtA6.png?s=128&g=1", "display_name": "Sarper Kumcu", "link": "https://stackoverflow.com/users/6934695/sarper-kumcu"}, "edited": false, "score": 0, "creation_date": 1488405018, "post_id": 42542443, "comment_id": 72221338, "body": "||=== Build: Debug in test (compiler: GNU GCC Compiler) ===| |6|error: converting to execution character set: Illegal byte sequence| ||=== Build failed: 1 error(s), 0 warning(s) (0 minute(s), 0 second(s)) ===|"}, {"owner": {"reputation": 39687, "user_id": 79566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edad7f3ab41c3bdfdf851759dce5c33b?s=128&d=identicon&r=PG", "display_name": "bta", "link": "https://stackoverflow.com/users/79566/bta"}, "reply_to_user": {"reputation": 369, "user_id": 6934695, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/hWtA6.png?s=128&g=1", "display_name": "Sarper Kumcu", "link": "https://stackoverflow.com/users/6934695/sarper-kumcu"}, "edited": false, "score": 0, "creation_date": 1488406008, "post_id": 42542443, "comment_id": 72221819, "body": "That sounds like you need to use the <code>-finput-charset</code> argument to tell gcc which character set you&#39;re using."}], "tags": [], "owner": {"reputation": 39687, "user_id": 79566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edad7f3ab41c3bdfdf851759dce5c33b?s=128&d=identicon&r=PG", "display_name": "bta", "link": "https://stackoverflow.com/users/79566/bta"}, "is_accepted": false, "score": 0, "last_activity_date": 1488404720, "last_edit_date": 1488404720, "creation_date": 1488403932, "answer_id": 42542443, "question_id": 42542177, "link": "https://stackoverflow.com/questions/42542177/strcmp-function-doesnt-work-while-comparing-string-and-user-input-which-include/42542443#42542443", "title": "strcmp function doesn&#39;t work while comparing string and user input which includes Turkish characters", "body": "<p>You probably need to use functions that accept 'wide' characters.  For example:</p>\n\n<pre><code>#include &lt;wchar.h&gt;\nwchar_t *x=L\"\u00c7ank\u0131r\u0131\";\nwchar_t y[25];\nwscanf(L\"%s\",y);\n\nif(wcscmp(x,y) == 0)\n    wprintf(L\"A\");\nelse\n    wprintf(L\"%s\",y);\n</code></pre>\n"}], "owner": {"reputation": 369, "user_id": 6934695, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/hWtA6.png?s=128&g=1", "display_name": "Sarper Kumcu", "link": "https://stackoverflow.com/users/6934695/sarper-kumcu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 517, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1488411460, "creation_date": 1488402932, "last_edit_date": 1488411460, "question_id": 42542177, "link": "https://stackoverflow.com/questions/42542177/strcmp-function-doesnt-work-while-comparing-string-and-user-input-which-include", "title": "strcmp function doesn&#39;t work while comparing string and user input which includes Turkish characters", "body": "<pre><code>char *x=\"\u00c7ank\u0131r\u0131\";\nchar *y=malloc(sizeof(char)*25);\nscanf(\"%s\",y);\n\nif(strcmp(x,y) == 0)\n    printf(\"A\");\nelse\n    printf(\"%s\",y);\n</code></pre>\n\n<p>I enter '\u00c7ank\u0131r\u0131' for y, but else part runs. How can I compare these strings?</p>\n\n<p>Windows10 , codeblocks.</p>\n\n<p>EDIT: I found a clue. Problem is about setlocale function. When I use setlocale(LC_ALL,\"TURKISH\"), one of the string doesn't work fine(Output is not \u00c7ank\u0131r\u0131, Ank2r2), and If I use setlocale(LC_ALL,\"C\"), other one doens't work fine. I don't know how to fix it.</p>\n"}, {"tags": ["c", "arrays", "char"], "comments": [{"owner": {"reputation": 144, "user_id": 4047560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/078e21682da7e03097a6f97c81b251c9?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/4047560/daniel"}, "edited": false, "score": 0, "creation_date": 1488402987, "post_id": 42542130, "comment_id": 72220180, "body": "use s[length-1] = &#39;\\0&#39;;"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1488402997, "post_id": 42542130, "comment_id": 72220187, "body": "<code>s[length]</code> is outside the array bounds... Even reading it is undefined behavior. The last element is <code>s[length-1]</code>"}], "answers": [{"tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": true, "score": 2, "last_activity_date": 1488403070, "creation_date": 1488403070, "answer_id": 42542222, "question_id": 42542130, "link": "https://stackoverflow.com/questions/42542130/trying-to-terminate-a-char-array-and-print-afterwards/42542222#42542222", "title": "Trying to terminate a char array and print afterwards", "body": "<p>If you define your result array as <code>char s[8]</code>, then you must not write anything at position <code>8</code> like in <code>s[length] = 0x0</code> with <code>length==8</code>, because this exceeds the array length. Try:</p>\n\n<pre><code>char s[9] = {0};\nprinting_binary(s, (9-1), 2);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3919, "user_id": 3169961, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/42c9a71949249cac6172502dfce7da7d?s=128&d=identicon&r=PG", "display_name": "sabbahillel", "link": "https://stackoverflow.com/users/3169961/sabbahillel"}, "is_accepted": false, "score": 1, "last_activity_date": 1488403393, "creation_date": 1488403393, "answer_id": 42542307, "question_id": 42542130, "link": "https://stackoverflow.com/questions/42542130/trying-to-terminate-a-char-array-and-print-afterwards/42542307#42542307", "title": "Trying to terminate a char array and print afterwards", "body": "<p>You have an 8 bit length which you fill up with the values. For example the value 2 is <code>00000010</code> Since you have filled up your string array, you have no room for the ending character. <strong>If you define the array size as length+1, then it will work</strong>.</p>\n\n<pre><code>int main(void)\n{\n    char s[9] = {0}; // Note size is length+1\n    printing_binary(s, 8, 2);\n\n}\n\nvoid printing_binary(char *s, int length,  unsigned n){\n\n    for(int i = 0; i &lt; length; i++){\n        if(1 &amp; (n &gt;&gt; i)){\n            s[i] = '1';\n        }\n        else{\n            s[i] = '0';\n        }\n    }\n    //Trying to terminate my string\n    s[length] = '\\0'; // s must be an array of size greater than length\n    printf(s);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2924, "user_id": 2066459, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d8408d7e5ef47a2e2af09f3c6da6e1a6?s=128&d=identicon&r=PG", "display_name": "Robert Jacobs", "link": "https://stackoverflow.com/users/2066459/robert-jacobs"}, "is_accepted": false, "score": 0, "last_activity_date": 1488404002, "creation_date": 1488404002, "answer_id": 42542465, "question_id": 42542130, "link": "https://stackoverflow.com/questions/42542130/trying-to-terminate-a-char-array-and-print-afterwards/42542465#42542465", "title": "Trying to terminate a char array and print afterwards", "body": "<p>If you don't want to add a null terminator, you just have t modify the printf slightly.</p>\n\n<pre><code>int main(void)\n{\n    char s[8] = {0};\n    printing_binary(s, 8, 2);\n\n}\n\nvoid printing_binary(char *s, int length,  unsigned n){\n\n    for(int i = 0; i &lt; length; i++){\n        if(1 &amp; (n &gt;&gt; i)){\n            s[i] = '1';\n        }\n        else{\n            s[i] = '0';\n        }\n    }\n    //Trying to terminate my string\n    //s[length] = '\\0';\n    printf(\"%.*s\", length, s);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4046, "user_id": 4971422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4abf51a937ddda51cc6813445605c50?s=128&d=identicon&r=PG&f=1", "display_name": "FredK", "link": "https://stackoverflow.com/users/4971422/fredk"}, "is_accepted": false, "score": 0, "last_activity_date": 1488406403, "creation_date": 1488406403, "answer_id": 42543117, "question_id": 42542130, "link": "https://stackoverflow.com/questions/42542130/trying-to-terminate-a-char-array-and-print-afterwards/42543117#42543117", "title": "Trying to terminate a char array and print afterwards", "body": "<p>Another way is to declare <code>i</code> outside the loop. This can be useful if for some reason your logic breaks out of the loop before reaching <code>length</code></p>\n\n<pre><code>int i;\nfor ( i=0; i &lt; length; i++ ) {\n   ...\n}\ns[i] = '\\0';\n</code></pre>\n"}], "owner": {"reputation": 303, "user_id": 7106485, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b66e47b9c5249a683bb266cf465d268a?s=128&d=identicon&r=PG&f=1", "display_name": "Kenny Ho", "link": "https://stackoverflow.com/users/7106485/kenny-ho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 42542222, "answer_count": 4, "score": 0, "last_activity_date": 1488406403, "creation_date": 1488402767, "question_id": 42542130, "link": "https://stackoverflow.com/questions/42542130/trying-to-terminate-a-char-array-and-print-afterwards", "title": "Trying to terminate a char array and print afterwards", "body": "<p>I'm making a char array binary representations of a number. I want to terminate the end of the string with '\\0'. It prints the array find aside from the intended garbage value.</p>\n\n<p>However when I try to terminate the array, specifically the index of the garbage value, it won't print out my string. </p>\n\n<pre><code>int main(void)\n{\n    char s[8] = {0};\n    printing_binary(s, 8, 2);\n\n}\n\nvoid printing_binary(char *s, int length,  unsigned n){\n\n    for(int i = 0; i &lt; length; i++){\n        if(1 &amp; (n &gt;&gt; i)){\n            s[i] = '1';\n        }\n        else{\n            s[i] = '0';\n        }\n    }\n    //Trying to terminate my string\n    //s[length] = '\\0';\n    printf(s);\n}\n</code></pre>\n\n<p>This code will print out something like <code>01000000}</code>.</p>\n\n<p>However if I uncomment out <code>s[length] = '\\0'</code>, it prints nothing/the program stops executing. I've tried printing out \"Hello world\" after everything.  </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 39687, "user_id": 79566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edad7f3ab41c3bdfdf851759dce5c33b?s=128&d=identicon&r=PG", "display_name": "bta", "link": "https://stackoverflow.com/users/79566/bta"}, "edited": false, "score": 2, "creation_date": 1488402272, "post_id": 42541987, "comment_id": 72219814, "body": "Textbook case of why you need to use parenthesis in macro expansions"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 39687, "user_id": 79566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edad7f3ab41c3bdfdf851759dce5c33b?s=128&d=identicon&r=PG", "display_name": "bta", "link": "https://stackoverflow.com/users/79566/bta"}, "edited": false, "score": 2, "creation_date": 1488402380, "post_id": 42541987, "comment_id": 72219863, "body": "@bta true, but even with parenthesis, you cannot handle all cases. <code>fun(i++)</code> for instance."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1488403723, "post_id": 42541987, "comment_id": 72220585, "body": "I&#39;m sure there are at least 10 dupes of this."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1488403783, "post_id": 42541987, "comment_id": 72220617, "body": "I&#39;d say textbook case of why you shouldn&#39;t abuse macros."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1488403855, "post_id": 42541987, "comment_id": 72220668, "body": "macros are easily abused by using the same parameter more than once. About the duplicate: the information is somewhere on SO, but maybe not asked in the same &quot;job interview&quot; angle."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1488409170, "post_id": 42541987, "comment_id": 72223277, "body": "So what was your answer in the interview?"}], "answers": [{"comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 3, "creation_date": 1488402547, "post_id": 42542015, "comment_id": 72219955, "body": "<code>(((((((a)*(a)))))))</code> ... Sorry, but my inner troll just had too when you said the extra ones won&#39;t hurt :P"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1488402598, "post_id": 42542015, "comment_id": 72219979, "body": "@StoryTeller I thought of that too :) and my last edit is just an echo to your comment (that I just read). Better safe than sorry."}, {"owner": {"reputation": 25589, "user_id": 15727, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FFivc.jpg?s=128&g=1", "display_name": "Thomas Padron-McCarthy", "link": "https://stackoverflow.com/users/15727/thomas-padron-mccarthy"}, "edited": false, "score": 0, "creation_date": 1488402712, "post_id": 42542015, "comment_id": 72220023, "body": "You need one pair of outer parentheses, for cases such as <code>100&#47;fun(4*5)</code>. More than that <i>can</i> hurt, yes..."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1488402773, "post_id": 42542015, "comment_id": 72220057, "body": "you mean &quot;hurt the eyes&quot;, right?"}, {"owner": {"reputation": 25589, "user_id": 15727, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FFivc.jpg?s=128&g=1", "display_name": "Thomas Padron-McCarthy", "link": "https://stackoverflow.com/users/15727/thomas-padron-mccarthy"}, "edited": false, "score": 0, "creation_date": 1488402894, "post_id": 42542015, "comment_id": 72220129, "body": "I guess with enough extra parentheses you can hit some limitation in the compiler. I don&#39;t remember if the standard has a minimum size of a source file that a conforming implementation has to be able to handle. But yes, mostly &quot;hurt the eyes&quot;."}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": false, "score": 11, "last_activity_date": 1488402579, "last_edit_date": 1488402579, "creation_date": 1488402246, "answer_id": 42542015, "question_id": 42541987, "link": "https://stackoverflow.com/questions/42541987/what-is-happening-in-this-c-code-from-interview/42542015#42542015", "title": "What is happening in this C code? (From interview)", "body": "<p><code>a</code> is expanded, not evaluated as <code>a</code>. So you get:</p>\n\n<pre><code>4+5*4+5 \n</code></pre>\n\n<p>and with operator priorities; you get <code>4 + 20 + 5 =&gt; 29</code></p>\n\n<p>better way (with extra outside parenthesis for protecting against outside operators too thanks to Thomas comment):</p>\n\n<pre><code>#define fun(a) ((a)*(a))\n</code></pre>\n\n<p>but all parenthesis of the world still don't protect against <code>i++</code>, function calls (with side effects, preferably)... so argument reusing in macros is always a problem (there's no syntax to declare &amp; assign a temp variable either). Prefer inlined functions in that case.</p>\n"}], "owner": {"reputation": 17, "user_id": 2805260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ee3aa4612ccecb63f133b2a49c2f60e?s=128&d=identicon&r=PG&f=1", "display_name": "user2805260", "link": "https://stackoverflow.com/users/2805260/user2805260"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "closed_date": 1491392938, "answer_count": 1, "score": 0, "last_activity_date": 1488402735, "creation_date": 1488402117, "last_edit_date": 1488402735, "question_id": 42541987, "link": "https://stackoverflow.com/questions/42541987/what-is-happening-in-this-c-code-from-interview", "closed_reason": "Duplicate", "title": "What is happening in this C code? (From interview)", "body": "<p>I was given a variation of this C code in an interview recently, and asked what would be returned by the function. </p>\n\n<pre><code>#define fun(a) a*a\n\nint main() {    \n  return(fun(4+5));   \n}\n</code></pre>\n\n<p>I've run it with a <code>printf(\"%d\"...)</code> in place of the return and it prints 29. No other types than \"%d\" showed a result. Can someone explain what is going on here?</p>\n"}, {"tags": ["c", "tiff", "cmyk", "libtiff", "raw-data"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1488404004, "post_id": 42541973, "comment_id": 72220749, "body": "When googling &quot;libtiff documentation&quot; you should find something relevant."}, {"owner": {"reputation": 833, "user_id": 4229508, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/8bd3e7904a8851b590e6682b8641aff9?s=128&d=identicon&r=PG&f=1", "display_name": "Megool", "link": "https://stackoverflow.com/users/4229508/megool"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1488405570, "post_id": 42541973, "comment_id": 72221638, "body": "Yes, like I said in the original post, I have found the relevant documentation, which I did not find sufficient enough to understand how to use. So I am asking for more detailed information and/or the example of using the function."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1488407347, "post_id": 42541973, "comment_id": 72222479, "body": "The doc you link seems to be fairly thorough.  The command transforms raw raster data to TIFF format, with details of the input data format either specified via command-line options or guessed.  It is not so much a question of how the raw data should be formatted, but rather of how to get the program to correctly handle the data you have.  Perusing the options should give you an idea of what the program can handle."}, {"owner": {"reputation": 6013, "user_id": 3310281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9b8b4ec03e2c7a424fdc428eb55f2e8?s=128&d=identicon&r=PG&f=1", "display_name": "Malcolm McLean", "link": "https://stackoverflow.com/users/3310281/malcolm-mclean"}, "edited": false, "score": 0, "creation_date": 1488410169, "post_id": 42541973, "comment_id": 72223670, "body": "There&#39;s probably a function called raw2tiff documented somewhere on the web. it may not be the same as yours. However writing a TIFF file, as opposed to reading one, is quite easy. Just look up the format, write a small header, and write out your pixel data."}, {"owner": {"reputation": 833, "user_id": 4229508, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/8bd3e7904a8851b590e6682b8641aff9?s=128&d=identicon&r=PG&f=1", "display_name": "Megool", "link": "https://stackoverflow.com/users/4229508/megool"}, "edited": false, "score": 0, "creation_date": 1488410890, "post_id": 42541973, "comment_id": 72223927, "body": "I have CMYKraster data and need to export into tiff file. I am computing simple conversion from CMYKto RGB, but the file size is ridiculously huge for some reason. So while googling for a solution, I found about the raw2tiff and thought this raw2tiff function was already implemented in the libtiff library. Looks like it isn&#39;t a standard function of the libtiff library?"}], "owner": {"reputation": 833, "user_id": 4229508, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/8bd3e7904a8851b590e6682b8641aff9?s=128&d=identicon&r=PG&f=1", "display_name": "Megool", "link": "https://stackoverflow.com/users/4229508/megool"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 171, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1488402059, "creation_date": 1488402059, "question_id": 42541973, "link": "https://stackoverflow.com/questions/42541973/how-to-use-raw2tiff-function-of-libtiff-library", "title": "How to use raw2tiff function of libtiff library", "body": "<p>I am using libtiff library and found <a href=\"http://www.libtiff.org/man/raw2tiff.1.html\" rel=\"nofollow noreferrer\">this raw2tiff</a> that creates a tiff file from raw byte sequence. Other than the basic information found here, I could not find any additional information about how to use this function.</p>\n\n<p>Specifically, I am trying to figure out how the raw data should be formatted. If anyone can explain how to use this function, or provide a reference that addresses this, I would greatly appreciate your help. Thank you!</p>\n"}, {"tags": ["c", "arrays", "string", "scanf", "reverse"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 5, "creation_date": 1488402057, "post_id": 42541945, "comment_id": 72219696, "body": "<code>response[3]=&quot;yes&quot;</code> didn&#39;t issue a warning??"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1488402326, "post_id": 42541945, "comment_id": 72219836, "body": "Having a variable named reponse as well as response is maintenance nightmare. You are shooting yourself in the foot"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 1, "creation_date": 1488402364, "post_id": 42541945, "comment_id": 72219856, "body": "@Mohamed  You have to declare the variable reponse[3] as having at least four characters if you expect that the user will enter the string &#39;yes&quot;,"}, {"owner": {"reputation": 7, "user_id": 3290038, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fa4a9db2b78db3b96f8876941b049c5?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamed", "link": "https://stackoverflow.com/users/3290038/mohamed"}, "reply_to_user": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1488402794, "post_id": 42541945, "comment_id": 72220071, "body": "@VladfromMoscow you&#39;re right, but I don&#39;t understand what&#39;s this has to do with name array??"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1488402965, "post_id": 42541945, "comment_id": 72220164, "body": "@Mohamed The terminating zero of the entered string &quot;yes&quot; stored in the variable reponse[3] overwrites the first character in the variable name. That is the variable name is stored by the compiler after the variable reponse[3]"}, {"owner": {"reputation": 7, "user_id": 3290038, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fa4a9db2b78db3b96f8876941b049c5?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamed", "link": "https://stackoverflow.com/users/3290038/mohamed"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1488402975, "post_id": 42541945, "comment_id": 72220172, "body": "@StoryTeller sorry I have this bad habit and I must get rid of it ASAP before my code become hundreds of lines"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1488403084, "post_id": 42541945, "comment_id": 72220240, "body": "Good. You&#39;d be doing yourself a huge favor, as well as any of your future collaborators. I certainly did a double take when I looked your code over."}, {"owner": {"reputation": 7, "user_id": 3290038, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fa4a9db2b78db3b96f8876941b049c5?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamed", "link": "https://stackoverflow.com/users/3290038/mohamed"}, "reply_to_user": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1488403634, "post_id": 42541945, "comment_id": 72220535, "body": "thanks guys  and specially @VladfromMoscow for help I think I understand know what&#39;s wrong, scanf is a tricky function, never trust it. and from now I should always give a place to &#39;\\0&#39;."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1488403717, "post_id": 42541945, "comment_id": 72220579, "body": "Always set limits on strings.  In scanf you can do <code>%3s</code> for example."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1488404562, "post_id": 42541945, "comment_id": 72221082, "body": "<code>i&lt;=30</code> --&gt; <code>i&lt;30</code>"}], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 3290038, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fa4a9db2b78db3b96f8876941b049c5?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamed", "link": "https://stackoverflow.com/users/3290038/mohamed"}, "edited": false, "score": 0, "creation_date": 1488404035, "post_id": 42542102, "comment_id": 72220773, "body": "what you said is right and very useful, but in this case &#39;scanf(&quot;%3s&quot;,reponse)&#39; doesn&#39;t seems to resolve the problem. it&#39;s better to  declare reponse[4] in order to store &#39;\\0&#39;"}, {"owner": {"reputation": 39687, "user_id": 79566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edad7f3ab41c3bdfdf851759dce5c33b?s=128&d=identicon&r=PG", "display_name": "bta", "link": "https://stackoverflow.com/users/79566/bta"}, "reply_to_user": {"reputation": 7, "user_id": 3290038, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fa4a9db2b78db3b96f8876941b049c5?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamed", "link": "https://stackoverflow.com/users/3290038/mohamed"}, "edited": false, "score": 0, "creation_date": 1488406190, "post_id": 42542102, "comment_id": 72221908, "body": "@Mohamed actually, since it&#39;s a string literal, just use <code>const char* response = &quot;yes&quot;</code>.  No need to manually create an array for it."}, {"owner": {"reputation": 39687, "user_id": 79566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edad7f3ab41c3bdfdf851759dce5c33b?s=128&d=identicon&r=PG", "display_name": "bta", "link": "https://stackoverflow.com/users/79566/bta"}, "reply_to_user": {"reputation": 7, "user_id": 3290038, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fa4a9db2b78db3b96f8876941b049c5?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamed", "link": "https://stackoverflow.com/users/3290038/mohamed"}, "edited": false, "score": 0, "creation_date": 1488406458, "post_id": 42542102, "comment_id": 72222039, "body": "@Mohamed - your code works for me if you make that scanf change (<a href=\"http://ideone.com/2LEW7X\" rel=\"nofollow noreferrer\">ideone.com/2LEW7X</a>)"}], "tags": [], "owner": {"reputation": 39687, "user_id": 79566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edad7f3ab41c3bdfdf851759dce5c33b?s=128&d=identicon&r=PG", "display_name": "bta", "link": "https://stackoverflow.com/users/79566/bta"}, "is_accepted": false, "score": 0, "last_activity_date": 1488403242, "last_edit_date": 1488403242, "creation_date": 1488402618, "answer_id": 42542102, "question_id": 42541945, "link": "https://stackoverflow.com/questions/42541945/program-in-c-that-reverse-a-string/42542102#42542102", "title": "program in C that reverse a string", "body": "<p><code>scanf</code> doesn't know how big your destination buffer is.  It will gladly read a one-million-character string into a five-byte buffer.  When it does this, it corrupts memory by writing data past the end of the destination array.  You need to explicitly tell <code>scanf</code> when to stop in order to avoid array overflows.  For example, <code>scanf(\"%8s\", &amp;var);</code> for an 8-byte buffer.</p>\n\n<p>Your code appears to reinvent standard functions like <code>strlen</code> and <code>strncmp</code>.  Using the standard functions instead will make your life much easier.</p>\n\n<p>Nitpick: you ask \"would you share with us your name?\", which is a 'yes' or 'no' question.  You then expect the user to type their name, not 'yes' or 'no'.  You should reword the question to ask for the name directly in order to avoid any possible confusion.</p>\n"}, {"comments": [{"owner": {"reputation": 7, "user_id": 3290038, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fa4a9db2b78db3b96f8876941b049c5?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamed", "link": "https://stackoverflow.com/users/3290038/mohamed"}, "edited": false, "score": 0, "creation_date": 1488420119, "post_id": 42542241, "comment_id": 72226615, "body": "thank you I appreciate your help. this solution works"}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1488403537, "last_edit_date": 1488403537, "creation_date": 1488403136, "answer_id": 42542241, "question_id": 42541945, "link": "https://stackoverflow.com/questions/42541945/program-in-c-that-reverse-a-string/42542241#42542241", "title": "program in C that reverse a string", "body": "<p>It seems the problem is that when the user enters the string <code>\"yes\"</code> that is stored in the array <code>reponse[3]</code> then the terminating zero of the string overwrites the first character in the array <code>name</code>.  That is the compiler placed the variable <code>name</code> after the variable <code>reponse</code> in the memory.</p>\n\n<p>You should declare the array <code>reponse</code> as having at least four characters and use the field length in the format specifier of the function scanf.</p>\n\n<p>For example</p>\n\n<pre><code>char name[30],reponse[4],response[3]=\"yes\",temp;\n                     ^^^    \n\n//...\n\nscanf(\"%3s\",reponse); \n      ^^^^\n</code></pre>\n\n<p>A more safe way to enter strings is to use standard C function <code>fgets</code>.</p>\n"}], "owner": {"reputation": 7, "user_id": 3290038, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fa4a9db2b78db3b96f8876941b049c5?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamed", "link": "https://stackoverflow.com/users/3290038/mohamed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1488403537, "creation_date": 1488401951, "last_edit_date": 1488402110, "question_id": 42541945, "link": "https://stackoverflow.com/questions/42541945/program-in-c-that-reverse-a-string", "title": "program in C that reverse a string", "body": "<p>I wrote a program in C that asks a user for his name and output the number of letters, and ask again the user if he wants his name to be reversed if his response is yes, the program output the reversed name. \nthe problem is I don't know why I lose the first letter in the array name\nyou can try this code. I think scanf is the source of the problem.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(){\n  char name[30],reponse[3],response[3]=\"yes\",temp;\n  int j,i,t=0,k;\n  printf(\"would you share with us your name ? \\n\");\n  scanf(\"%s\",name);\n  printf(\"so your name is %s\\n\",name);\n  for(i=0;i&lt;=30;i++){\n    if(name[i]!='\\0') t++ ;\n    else break;\n  }\n  printf(\"the number of letters in your name is %d\\n\",t);\n  printf(\"do you want your name to be scrumbled ?\\n\");\n  scanf(\"%s\",reponse);// I think the problem is here\n  for(j=0;j &lt; 3;j++){\n    if(response[j]!=reponse[j]) break;\n  }\n  if(j==3){\n    k = t/2;\n    for(i=0; i&lt;k;i++){\n       temp=name[i];\n       name[i]=name[t-i-1];\n       name[t-i-1]=temp;\n    }\n    printf(\"your new name is %s hahaha \",name);\n  }\n  else printf(\"OK\");\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "queue", "pthreads", "posix"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1488401020, "post_id": 42541645, "comment_id": 72219049, "body": "Your code is too messy, could you please format it so it&#39;s readable?"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1488403181, "post_id": 42541645, "comment_id": 72220308, "body": "Please read the tour, and don&#39;t do this."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7540994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df64d315c7f9b9661f62eddea61e69de?s=128&d=identicon&r=PG&f=1", "display_name": "Fils", "link": "https://stackoverflow.com/users/7540994/fils"}, "edited": false, "score": 0, "creation_date": 1488401699, "post_id": 42541742, "comment_id": 72219468, "body": "Yes, but the fault appears in the previous command line. When I receive mess with mq_receive. Mess.op would be 3 not 0, and all datas received in mess is 0. I dont know why."}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 1, "last_activity_date": 1488401243, "creation_date": 1488401243, "answer_id": 42541742, "question_id": 42541645, "link": "https://stackoverflow.com/questions/42541645/my-client-doesnt-send-correctly-to-server/42541742#42541742", "title": "My client doesn&#39;t send correctly to server", "body": "<p>It would appear that you are calling <code>pthread_create()</code> with a local (<a href=\"https://en.wikipedia.org/wiki/Automatic_variable\" rel=\"nofollow noreferrer\"><em>or automatic</em></a>) variable <code>mess</code> which is sometimes deallocated before the thread is actually started. You need to allocate <code>mess</code> on the heap and be very careful to free it at the appropriate time.</p>\n\n<p>Also <code>(void *) func</code> doesn't look right because, </p>\n\n<ul>\n<li>The correct type is <a href=\"http://man7.org/linux/man-pages/man3/pthread_create.3.html\" rel=\"nofollow noreferrer\"><code>void *(*)(void *)</code></a></li>\n</ul>\n\n<p>and it would appear as if you were ignoring compilation warnings, or forcing them to disappear by randomly casting a pointer to the type the compiler suggested.</p>\n"}], "owner": {"reputation": 1, "user_id": 7540994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df64d315c7f9b9661f62eddea61e69de?s=128&d=identicon&r=PG&f=1", "display_name": "Fils", "link": "https://stackoverflow.com/users/7540994/fils"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1488403242, "creation_date": 1488400899, "last_edit_date": 1488403242, "question_id": 42541645, "link": "https://stackoverflow.com/questions/42541645/my-client-doesnt-send-correctly-to-server", "title": "My client doesn&#39;t send correctly to server", "body": "<p>I have problems with my code.</p>\n\n<p>I have this client with posix queue. Is a posix queue comunication with a conc server.\nThe question is down.</p>\n\n<pre><code>mqd_t server;\nmqd_t client;\nstruct request req; //char *name, int pos, int op...\nstruct reply rep; //int num, int ret...\nstruct mq_attr attr;\n\nattr.mq_maxmsg = 1;\nattr.mq_msgsize = sizeof(struct reply);\nclient = mq_open(\"/CLIENT\", O_CREAT|O_RDONLY, 0700, &amp;attr);\nserver = mq_open(\"/SERVER\", O_WRONLY);\n\n\nreq.name = name;\nreq.op = 3;\n\nmq_send (server, (const char *) &amp;req, sizeof(struct req),0);\nmq_receive(client, (char*)&amp;rep, sizeof(struct reply), 0);\n\nmq_close(server);\nmq_close(client);\nmq_unlink(\"/CLIENT\");\n</code></pre>\n\n<p>And this server</p>\n\n<pre><code>struct db mydb[100]; //Struct with char*name....\n  for (int i = 0; i&lt;100;i++){\n  strcpy(mydb[i].name,\"\");\n  mydb[i].vec =NULL;\n  mydb[i].size =0;\n}\n\nmqd_t server;\n\nstruct request mess;\nstruct mq_attr q_attr;\npthread_attr_t t_attr;\n\nq_attr.mq_maxmsg = 10;\nq_attr.mq_msgsize=sizeof(struct request);\nserver = mq_open (\"/SERVER\", O_CREAT|O_RDONLY, 0700, &amp;q_attr);\n  if (server == -1){\n  perror(\"Er\");\n}\n\npthread_mutex_init (&amp;mutex_msj, NULL);\npthread_cond_init (&amp;cond_msj, NULL);\npthread_attr_init(&amp;t_attr);\n\npthread_attr_setdetachstate(&amp;t_attr, PTHREAD_CREATE_DETACHED);\n\nwhile(1){\n  pthread_t thid;\n\nmq_receive(server, (char*) &amp;mess, sizeof(struct request), 0);\n</code></pre>\n\n<p>AND HERE IS THE PROBLEM. WHEN I PRINF MESS.OP I WOULD RECIVE \"3\". The number that I asigned the client. And when I do this, mess.op have 0, not 3.</p>\n\n<pre><code>pthread_create(&amp;thid, &amp;t_attr, (void*)func, &amp;mess);\n...\n...\n...\n...\n\n}\n</code></pre>\n\n<p>Thanks.</p>\n"}, {"tags": ["c", "recursion", "return", "tail-recursion"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1488400621, "post_id": 42541545, "comment_id": 72218827, "body": "You&#39;ve asked 6 questions already, and received answers to most of them. Yet you didn&#39;t accept any answer on any of your questions. Were they <i>all</i> unhelpful?"}, {"owner": {"reputation": 61, "user_id": 7469961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mUZ2i.jpg?s=128&g=1", "display_name": "King Sutter", "link": "https://stackoverflow.com/users/7469961/king-sutter"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1488400733, "post_id": 42541545, "comment_id": 72218892, "body": "I didn&#39;t know you could do that! I&#39;ll fix that, sorry! Do you do that by clicking &quot;Answer your question&quot;? I thought that was for answering your own question. Is there something I am missing here? I thought there would be some sort of &quot;Best answer&quot; button like Yahoo! Answers has. Sorry I am new :("}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1488401051, "post_id": 42541545, "comment_id": 72219067, "body": "There&#39;s a checkbox next to each answer. Under the vote arrows. It&#39;s how you accept. A nice way to show appreciation to the people that help, and to indicate this solved your problem, for future readers of your questions."}, {"owner": {"reputation": 61, "user_id": 7469961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mUZ2i.jpg?s=128&g=1", "display_name": "King Sutter", "link": "https://stackoverflow.com/users/7469961/king-sutter"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1488401087, "post_id": 42541545, "comment_id": 72219089, "body": "Scratch that, I am a fool. It&#39;s a simple checkmark by the upvote/downvote buttons! It was grayed out so I must have overlooked it."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1488401123, "post_id": 42541545, "comment_id": 72219113, "body": "BTW I think This isn&#39;t Tail Recursion."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1488401640, "post_id": 42541545, "comment_id": 72219433, "body": "@King Sutter  It is not clear how the function that gives different results looks."}, {"owner": {"reputation": 61, "user_id": 7469961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mUZ2i.jpg?s=128&g=1", "display_name": "King Sutter", "link": "https://stackoverflow.com/users/7469961/king-sutter"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1488401644, "post_id": 42541545, "comment_id": 72219436, "body": "@BLUEPIXY While you may be right, my textbook says that even though the recursion call isn&#39;t the last line of the function, it is the last statement executed when i&gt;0."}, {"owner": {"reputation": 61, "user_id": 7469961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mUZ2i.jpg?s=128&g=1", "display_name": "King Sutter", "link": "https://stackoverflow.com/users/7469961/king-sutter"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1488401708, "post_id": 42541545, "comment_id": 72219474, "body": "Also, @StoryTeller I gave every question answer and will to this one, as well! Thanks for pointing that out."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1488401714, "post_id": 42541545, "comment_id": 72219482, "body": "@KingSutter - It isn&#39;t. The addition is the last statement."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1488402069, "post_id": 42541545, "comment_id": 72219703, "body": "@KingSutter It&#39;s recursin call.  Read <a href=\"https://en.wikipedia.org/wiki/Tail_call\" rel=\"nofollow noreferrer\">Tail call</a> and StoryTeller &#39;s answer."}], "answers": [{"tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 3, "last_activity_date": 1488400619, "creation_date": 1488400619, "answer_id": 42541573, "question_id": 42541545, "link": "https://stackoverflow.com/questions/42541545/tail-recursion-return-statement-placement/42541573#42541573", "title": "Tail Recursion: Return Statement placement", "body": "<p>Because the function does not return otherwise and that's undefined behavior. Removing a line does not necessarily improve the code, don't do it just because it's less code, in fact I would write it like this</p>\n\n<pre><code>int\nsum(int input)\n{\n    int answer;\n    if (input &gt; 0) {\n        answer = input + (sum(input - 1));\n    } else {\n        answer = 0;\n    }\n    return answer;\n}\n</code></pre>\n\n<p>More \"<em>code</em>\", but more readable too. I say \"<em>code</em>\" because they will both be compiled exactly the same, but this version is easier to be read.</p>\n"}, {"comments": [{"owner": {"reputation": 61, "user_id": 7469961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mUZ2i.jpg?s=128&g=1", "display_name": "King Sutter", "link": "https://stackoverflow.com/users/7469961/king-sutter"}, "edited": false, "score": 0, "creation_date": 1488401931, "post_id": 42541860, "comment_id": 72219618, "body": "But then I have too few arguments where I call sum() in main. What do I do for int n?"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 61, "user_id": 7469961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mUZ2i.jpg?s=128&g=1", "display_name": "King Sutter", "link": "https://stackoverflow.com/users/7469961/king-sutter"}, "edited": false, "score": 0, "creation_date": 1488402034, "post_id": 42541860, "comment_id": 72219680, "body": "@KingSutter - I was just updating my answer to touch upon that subject :)"}], "tags": [], "owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": true, "score": 1, "last_activity_date": 1488402017, "last_edit_date": 1488402017, "creation_date": 1488401681, "answer_id": 42541860, "question_id": 42541545, "link": "https://stackoverflow.com/questions/42541545/tail-recursion-return-statement-placement/42541860#42541860", "title": "Tail Recursion: Return Statement placement", "body": "<p>While I concur with <strong>Iharob</strong> that readability is the first consideration, there is still the matter of you trying to turn this function into tail recursion.</p>\n\n<p>Now, if you simply do this:</p>\n\n<pre><code>int sum(int i)\n{\n    return i &gt; 0 ? i + sum(i-1) : 0;\n}\n</code></pre>\n\n<p>Then the function is a recursive one-liner with no undefined behavior, but it's not a tail recursion. It's not tail-recursive because the recursive function call is not the last operation in the function, that role goes to the addition. You don't just return the result of the recursive call.</p>\n\n<p>Fortunately, it's quite easy to make this tail recursive:</p>\n\n<pre><code>int sum(int i, int n)\n{\n    return i &gt; 0 ? sum(i - 1, i + n) : n;\n}\n</code></pre>\n\n<p>By introducing a new variable that holds the sum, you can simply return the result of the recursive call.</p>\n\n<hr>\n\n<p>If you must adhere to a single argument prototype, you can always make <code>sum</code> a wrapper for the real tail recursive function:</p>\n\n<pre><code>int sum_impl(int i, int n)\n{\n    return i &gt; 0 ? sum_impl(i - 1, i + n) : n;\n}\n\nint sum(int i)\n{\n    return sum_impl(i, 0);\n}\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 7469961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mUZ2i.jpg?s=128&g=1", "display_name": "King Sutter", "link": "https://stackoverflow.com/users/7469961/king-sutter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 42541860, "answer_count": 2, "score": 0, "last_activity_date": 1488402017, "creation_date": 1488400513, "last_edit_date": 1488400683, "question_id": 42541545, "link": "https://stackoverflow.com/questions/42541545/tail-recursion-return-statement-placement", "title": "Tail Recursion: Return Statement placement", "body": "<p>Though my program works the way I want it to, I was curious why I get a different result when I make a small change to get rid of a line? </p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint sum(int i);\nint main(void)\n{\n    int num;\n    printf(\"Enter an integer greater than zero, (q to quit): \");\n    while (scanf(\"%d\",&amp;num)==1)\n    {\n        //Checks if the entered integer is positive\n        if (num&lt;0)\n            printf(\"Please enter a positive integer.\\n\");\n        //Prints out the sum of the entered integer\n        else\n            printf(\"Sum(%d) = %d\\n\",num, sum(num));\n        printf(\"Enter an integer greater than zero, (q to quit): \");\n    }\n    printf(\"Bye.\");\n    return 0;\n}\n//Calculates the sum of inputted value\nint sum(int i)\n{\n    int answer;\n    //Runs until the sum is added in reverse order\n    if (i&gt;0)\n        answer=i+(sum(i-1));\n    else\n        answer=0;\n    return answer;\n}\n</code></pre>\n\n<p>In the function, I moved the \"return answer;\" to where \"answer=0\" is, and it produced a different result than I expected. Does anyone know why this is?\nInputting 1,4,5,and 7 produced a seemingly random number. Any other number from 1-10 produced the correct answer.\nThanks for any help!\nCheers,\nWill.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 5542, "user_id": 1076451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZTP3Q.jpg?s=128&g=1", "display_name": "Chimera", "link": "https://stackoverflow.com/users/1076451/chimera"}, "edited": false, "score": 1, "creation_date": 1488399853, "post_id": 42541329, "comment_id": 72218404, "body": "What results are you getting? What have you tried and have you used a debugger?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 3, "creation_date": 1488399929, "post_id": 42541329, "comment_id": 72218454, "body": "<code>reverse_array(&amp;arr[3], 2);</code> why are you passing address of element that you did not explicitly initialise?"}, {"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 1, "creation_date": 1488400030, "post_id": 42541329, "comment_id": 72218513, "body": "Aside from the problems above, you&#39;re only printing the second element of <code>arr</code>, <code>printf(&quot;%d\\n&quot;, arr[1]);</code> -&gt; <code>for ( int i = 0; i &lt; 3; ++i ) printf(&quot;%d\\n&quot;, arr[i]);</code>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1488400127, "post_id": 42541329, "comment_id": 72218563, "body": "The <code>XOR</code> swap is so 1980&#39;s. Use a temporary variable, then the algorithm will work with floating point types too."}, {"owner": {"reputation": 6254, "user_id": 2261424, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a0beda634f65f29aace865be9504e5e6?s=128&d=identicon&r=PG", "display_name": "AntonH", "link": "https://stackoverflow.com/users/2261424/antonh"}, "edited": false, "score": 1, "creation_date": 1488400214, "post_id": 42541329, "comment_id": 72218613, "body": "If you&#39;re reversing only the elements of indices 3 and 4 (which haven&#39;t been initialised), then displaying the element at index 1, what exactly are you expecting it to display?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1488401160, "post_id": 42541329, "comment_id": 72219131, "body": "@WeatherVane sorry, misread it. Forget the comment. I&#39;ll delete it, as well as this comment."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1488401313, "post_id": 42541329, "comment_id": 72219218, "body": "@MichaelWalz I have made plenty of those myself ;)"}, {"owner": {"reputation": 21, "user_id": 6248770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/734efb4d50f1b4c06c6ed1bbcc98ba09?s=128&d=identicon&r=PG&f=1", "display_name": "DIEGO BERNAL ADELANTADO", "link": "https://stackoverflow.com/users/6248770/diego-bernal-adelantado"}, "edited": false, "score": 0, "creation_date": 1488405431, "post_id": 42541329, "comment_id": 72221575, "body": "Thank you all for your help, I already solved it. The mistake was with the array call. :)"}], "answers": [{"comments": [{"owner": {"reputation": 5542, "user_id": 1076451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZTP3Q.jpg?s=128&g=1", "display_name": "Chimera", "link": "https://stackoverflow.com/users/1076451/chimera"}, "edited": false, "score": 0, "creation_date": 1488400945, "post_id": 42541516, "comment_id": 72219002, "body": "This is a great answer."}], "tags": [], "owner": {"reputation": 1260, "user_id": 3019422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f6b790391d48f2c65f15d342ca0815?s=128&d=identicon&r=PG&f=1", "display_name": "Luci", "link": "https://stackoverflow.com/users/3019422/luci"}, "is_accepted": false, "score": 1, "last_activity_date": 1488400414, "creation_date": 1488400414, "answer_id": 42541516, "question_id": 42541329, "link": "https://stackoverflow.com/questions/42541329/c-function-not-working/42541516#42541516", "title": "C function not working", "body": "<p>From your code seems that you want to swap the last two elements from your array that are 0,0\nYour array of 5 element is initialized with 1,2, 3, 0,0\nWhen you call swap function with the address of 'third' element which is actually the fourth element of array you basically swap the 4th and 5th element of array and you actually print the 2nd element of array  </p>\n"}, {"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1488401562, "post_id": 42541622, "comment_id": 72219378, "body": "Assuming that the <code>XOR</code> swap must be used (it is horrible), instead of <code>if (x != y)</code> the condition <code>if (*x != *y)</code> would also cover the condition where the data is the same, as well as the pointers being the same."}, {"owner": {"reputation": 21, "user_id": 6248770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/734efb4d50f1b4c06c6ed1bbcc98ba09?s=128&d=identicon&r=PG&f=1", "display_name": "DIEGO BERNAL ADELANTADO", "link": "https://stackoverflow.com/users/6248770/diego-bernal-adelantado"}, "edited": false, "score": 0, "creation_date": 1488405493, "post_id": 42541622, "comment_id": 72221605, "body": "I will have a look at it, thank you! Your help was great guys!"}, {"owner": {"reputation": 5542, "user_id": 1076451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZTP3Q.jpg?s=128&g=1", "display_name": "Chimera", "link": "https://stackoverflow.com/users/1076451/chimera"}, "reply_to_user": {"reputation": 21, "user_id": 6248770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/734efb4d50f1b4c06c6ed1bbcc98ba09?s=128&d=identicon&r=PG&f=1", "display_name": "DIEGO BERNAL ADELANTADO", "link": "https://stackoverflow.com/users/6248770/diego-bernal-adelantado"}, "edited": false, "score": 0, "creation_date": 1488405716, "post_id": 42541622, "comment_id": 72221699, "body": "@DIEGOBERNALADELANTADO Yes, it&#39;s a neat little &#39;trick&#39; that some coders use."}, {"owner": {"reputation": 21, "user_id": 6248770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/734efb4d50f1b4c06c6ed1bbcc98ba09?s=128&d=identicon&r=PG&f=1", "display_name": "DIEGO BERNAL ADELANTADO", "link": "https://stackoverflow.com/users/6248770/diego-bernal-adelantado"}, "edited": false, "score": 0, "creation_date": 1488405904, "post_id": 42541622, "comment_id": 72221780, "body": "This is a way of defining a function? #define NUM_ELEMENTS(x)     (sizeof(x)/sizeof(x[0]))"}, {"owner": {"reputation": 5542, "user_id": 1076451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZTP3Q.jpg?s=128&g=1", "display_name": "Chimera", "link": "https://stackoverflow.com/users/1076451/chimera"}, "reply_to_user": {"reputation": 21, "user_id": 6248770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/734efb4d50f1b4c06c6ed1bbcc98ba09?s=128&d=identicon&r=PG&f=1", "display_name": "DIEGO BERNAL ADELANTADO", "link": "https://stackoverflow.com/users/6248770/diego-bernal-adelantado"}, "edited": false, "score": 0, "creation_date": 1488409412, "post_id": 42541622, "comment_id": 72223373, "body": "@DIEGOBERNALADELANTADO It&#39;s called a macro."}, {"owner": {"reputation": 5542, "user_id": 1076451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZTP3Q.jpg?s=128&g=1", "display_name": "Chimera", "link": "https://stackoverflow.com/users/1076451/chimera"}, "reply_to_user": {"reputation": 21, "user_id": 6248770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/734efb4d50f1b4c06c6ed1bbcc98ba09?s=128&d=identicon&r=PG&f=1", "display_name": "DIEGO BERNAL ADELANTADO", "link": "https://stackoverflow.com/users/6248770/diego-bernal-adelantado"}, "edited": false, "score": 0, "creation_date": 1488472998, "post_id": 42541622, "comment_id": 72256329, "body": "@DIEGOBERNALADELANTADO If you found some good information in my answer, it would be nice of you to upvote it. :-)"}, {"owner": {"reputation": 21, "user_id": 6248770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/734efb4d50f1b4c06c6ed1bbcc98ba09?s=128&d=identicon&r=PG&f=1", "display_name": "DIEGO BERNAL ADELANTADO", "link": "https://stackoverflow.com/users/6248770/diego-bernal-adelantado"}, "edited": false, "score": 0, "creation_date": 1488476604, "post_id": 42541622, "comment_id": 72258679, "body": "@Chimera yes, sorry, I&#39;m new to this. :O"}], "tags": [], "owner": {"reputation": 5542, "user_id": 1076451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZTP3Q.jpg?s=128&g=1", "display_name": "Chimera", "link": "https://stackoverflow.com/users/1076451/chimera"}, "is_accepted": false, "score": 0, "last_activity_date": 1488401993, "last_edit_date": 1488401993, "creation_date": 1488400814, "answer_id": 42541622, "question_id": 42541329, "link": "https://stackoverflow.com/questions/42541329/c-function-not-working/42541622#42541622", "title": "C function not working", "body": "<p>All the comments and answers need to be understood so you learn what mistakes you made. With that being said, I re-worked your code just a bit to make it work. Please study the differences and ask questions...</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n/*** Prototypes - get in the habit of using them ***/\nvoid inplace_swap(int *x, int *y);\nvoid reverse_array(int *a, int cnt);\n/***************************************************/\n\n#define NUM_ELEMENTS(x)     (sizeof(x)/sizeof(x[0]))    \n\nvoid inplace_swap(int *x, int *y)\n{\n    if (*x!=*y)\n    {\n        printf(\"Doing swap...\\n\");\n        *y = *x ^ *y; \n        *x = *x ^ *y; \n        *y = *x ^ *y; \n    }\n}\n\nvoid reverse_array(int *a, int cnt)\n{\n    int first, last;\n\n    for (first = 0, last = cnt-1; first &lt;= last; first++, last--)\n    {\n        inplace_swap(&amp;a[first], &amp;a[last]);\n    }\n}\n\nint main()\n{\n    int arr[] = {1,1,2};\n\n    reverse_array(arr, NUM_ELEMENTS(arr));\n\n    for ( int i = 0; i &lt; NUM_ELEMENTS(arr); ++i )\n    {\n        printf(\"%d \", arr[i]);\n    }\n    printf(\"\\n\");\n\n    return(0);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13741, "user_id": 1624376, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/OkgmJ.png?s=128&g=1", "display_name": "Aubin", "link": "https://stackoverflow.com/users/1624376/aubin"}, "is_accepted": false, "score": 1, "last_activity_date": 1488400986, "creation_date": 1488400986, "answer_id": 42541668, "question_id": 42541329, "link": "https://stackoverflow.com/questions/42541329/c-function-not-working/42541668#42541668", "title": "C function not working", "body": "<p>This code works well:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nstatic void inplace_swap(int *x, int *y){\n   if( x != y ) {\n      *y = *x ^ *y;\n      *x = *x ^ *y;\n      *y = *x ^ *y;\n   }\n}\n\nstatic void print_array( int arr[], size_t count ) {\n   size_t i;\n   for( i = 0; i &lt; count; ++i ) {\n      printf( \"%s%d\", i ? \", \" : \"\", arr[i] );\n   }\n   printf( \"\\n\" );\n}\n\nstatic void reverse_array( int a[], int cnt ) {\n   int first, last;\n   for( first = 0, last = cnt-1; first &lt;= last; first++, last-- ) {\n      inplace_swap(&amp;a[first], &amp;a[last]);\n   }\n}\n\nint main() {\n   int arr[] = { 1, 2, 3, 4, 5 };\n   size_t count = sizeof(arr)/sizeof(arr[0]);\n   print_array  ( arr, count );\n   reverse_array( arr, count );\n   print_array  ( arr, count );\n}\n</code></pre>\n\n<p>Execution trace:</p>\n\n<pre><code>1, 2, 3, 4, 5\n5, 4, 3, 2, 1\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 6248770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/734efb4d50f1b4c06c6ed1bbcc98ba09?s=128&d=identicon&r=PG&f=1", "display_name": "DIEGO BERNAL ADELANTADO", "link": "https://stackoverflow.com/users/6248770/diego-bernal-adelantado"}, "edited": false, "score": 0, "creation_date": 1488405358, "post_id": 42541696, "comment_id": 72221529, "body": "Thank you very much, the mistake was with calling the array. I fixed it and it works correctly!"}], "tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": false, "score": 2, "last_activity_date": 1488401074, "creation_date": 1488401074, "answer_id": 42541696, "question_id": 42541329, "link": "https://stackoverflow.com/questions/42541329/c-function-not-working/42541696#42541696", "title": "C function not working", "body": "<p>The <code>reverse_array</code> function works fine, but you don't call it correctly in main:</p>\n\n<p>You want this:</p>\n\n<pre><code>int main() {\n  int arr[] = { 1,2,3 };\n  reverse_array(arr, 3);\n\n  int i;\n  for (i=0;i &lt; 3;i++) {\n    printf(\"%d\\n\", arr[i]);\n  }\n}\n</code></pre>\n\n<p>There are 3 problems in your code:</p>\n\n<pre><code>// here you declare an array of size 5 but you only initialize the first 3 elements\n//This is not actually a problem in first place\nint arr[5] = {1,2,3};     \n\n// &amp;arr[3] is the address of 4th element of the array, which has not\n// been initialized, This actually swaps arr[3] with arr[4]\nreverse_array(&amp;arr[3], 2);\n\n// here you print the second element which has not been modified\n// at all by the reverse_array(&amp;arr[3], 2);\nprintf(\"%d\\n\", arr[1]);\n</code></pre>\n\n<p>As already mentioned, the XOR swap stuff is old fashioned and works only for integral types.</p>\n"}], "owner": {"reputation": 21, "user_id": 6248770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/734efb4d50f1b4c06c6ed1bbcc98ba09?s=128&d=identicon&r=PG&f=1", "display_name": "DIEGO BERNAL ADELANTADO", "link": "https://stackoverflow.com/users/6248770/diego-bernal-adelantado"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "answer_count": 4, "score": -2, "last_activity_date": 1488401993, "creation_date": 1488399758, "question_id": 42541329, "link": "https://stackoverflow.com/questions/42541329/c-function-not-working", "title": "C function not working", "body": "<p>I'm new to C programming, and I was trying a function to swap the variables of an array, but I just cannot get it to work, and I don't know why. Can you please help me? Thank you in advance.</p>\n\n<p>Here's the code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid inplace_swap(int *x, int *y){\n    if (x!=y){\n        *y = *x ^ *y; \n        *x = *x ^ *y; \n        *y = *x ^ *y; \n    }\n}\n\nvoid reverse_array(int a[], int cnt){\n    int first, last;\n    for (first = 0, last = cnt-1; first &lt;= last; first++, last--)\n        inplace_swap(&amp;a[first], &amp;a[last]);\n}\n\nint main(){\n    //int eight = 80, seven = 70;\n    //inplace_swap(&amp;eight, &amp;seven);\n    //printf(\"New eight value is %d\\n\", eight);\n    //printf(\"New seven value is %d\\n\", seven); \n\n    int arr[5] = {1,2,3};\n    reverse_array(&amp;arr[3], 2);\n    printf(\"%d\\n\", arr[1]);\n    //int i;\n    //for (i=0;i &lt; 4;i++) {\n    //  printf(\"%d\\n\", arr[i]);\n    //}\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "ubuntu", "gcc", "compilation"], "comments": [{"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 5, "creation_date": 1488398750, "post_id": 42541002, "comment_id": 72217754, "body": "Object files are not directly executable."}, {"owner": {"reputation": 212, "user_id": 5712993, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/1ffcc2475b46d64ef87424d23da85206?s=128&d=identicon&r=PG&f=1", "display_name": "yoyo_fun", "link": "https://stackoverflow.com/users/5712993/yoyo-fun"}, "reply_to_user": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1488398836, "post_id": 42541002, "comment_id": 72217809, "body": "@CaptainObvlious I know but my I would like to understand why. Why can&#39;t they be executed even if the source file that they are compiled from DOES NOT link top any kind of external file ?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 2, "creation_date": 1488398887, "post_id": 42541002, "comment_id": 72217841, "body": "you need linkage for standard functions, like <code>printf</code>, and such. and even if you don&#39;t use them, you need an <i>entrypoint</i>, startup code to initialize heap, stack..."}, {"owner": {"reputation": 212, "user_id": 5712993, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/1ffcc2475b46d64ef87424d23da85206?s=128&d=identicon&r=PG&f=1", "display_name": "yoyo_fun", "link": "https://stackoverflow.com/users/5712993/yoyo-fun"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1488399296, "post_id": 42541002, "comment_id": 72218092, "body": "@Jean-Fran&#231;oisFabre  I do not use the printf function but I do not even #include the stdio and any other thing. Even if I do not include anything in my code do I still need linkeage for standard function ? If yes then why do I need them ?"}, {"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 2, "creation_date": 1488399312, "post_id": 42541002, "comment_id": 72218106, "body": "Well the operating system told you it didn&#39;t recognize it the file format as an executable. That&#39;s WHY!"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1488399314, "post_id": 42541002, "comment_id": 72218107, "body": "I think the error message comtains a pretty good clue: the result of  <code>-c</code> is not in the rigjt format to be executed. (Neither is the output of <code>gcc -S</code>, although arguably it has been &quot;compiled&quot;.)"}, {"owner": {"reputation": 14460, "user_id": 1404311, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j4CQ5.jpg?s=128&g=1", "display_name": "Scott Mermelstein", "link": "https://stackoverflow.com/users/1404311/scott-mermelstein"}, "edited": false, "score": 1, "creation_date": 1488399366, "post_id": 42541002, "comment_id": 72218131, "body": "Useful reading: <a href=\"https://en.wikipedia.org/wiki/Executable_and_Linkable_Format\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Executable_and_Linkable_Format</a>"}, {"owner": {"reputation": 212, "user_id": 5712993, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/1ffcc2475b46d64ef87424d23da85206?s=128&d=identicon&r=PG&f=1", "display_name": "yoyo_fun", "link": "https://stackoverflow.com/users/5712993/yoyo-fun"}, "reply_to_user": {"reputation": 14460, "user_id": 1404311, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j4CQ5.jpg?s=128&g=1", "display_name": "Scott Mermelstein", "link": "https://stackoverflow.com/users/1404311/scott-mermelstein"}, "edited": false, "score": 0, "creation_date": 1488399417, "post_id": 42541002, "comment_id": 72218157, "body": "@ScottMermelstein Thank you Scott. A helpful answer."}, {"owner": {"reputation": 212, "user_id": 5712993, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/1ffcc2475b46d64ef87424d23da85206?s=128&d=identicon&r=PG&f=1", "display_name": "yoyo_fun", "link": "https://stackoverflow.com/users/5712993/yoyo-fun"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 2, "creation_date": 1488399587, "post_id": 42541002, "comment_id": 72218257, "body": "@Jean-Fran&#231;oisFabre  That is certainly not what the question is abut. You CAN write a program that does not communicate with the exterior. The fact that it has no practical purpose is completely irrelevant to the question that I asked."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1488399649, "post_id": 42541002, "comment_id": 72218292, "body": "Because <code>main</code> is not the startup code of a program."}, {"owner": {"reputation": 212, "user_id": 5712993, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/1ffcc2475b46d64ef87424d23da85206?s=128&d=identicon&r=PG&f=1", "display_name": "yoyo_fun", "link": "https://stackoverflow.com/users/5712993/yoyo-fun"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1488399730, "post_id": 42541002, "comment_id": 72218346, "body": "@Olaf What is the startup code of a program ?"}, {"owner": {"reputation": 212, "user_id": 5712993, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/1ffcc2475b46d64ef87424d23da85206?s=128&d=identicon&r=PG&f=1", "display_name": "yoyo_fun", "link": "https://stackoverflow.com/users/5712993/yoyo-fun"}, "reply_to_user": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1488399841, "post_id": 42541002, "comment_id": 72218398, "body": "@CaptainObvlious  Why have I been blocked from asking questions ???"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 2, "creation_date": 1488401128, "post_id": 42541002, "comment_id": 72219116, "body": "@yoyo_fun: <code>man execl</code> will give you a pretty good overview of what happens prior to <code>main</code> be called (and also what happens after <code>main</code> returns). <code>execl</code> is crucial because, according to Posix, once the shell has identified which executable image is to be run, &quot;the shell executes the utility in a separate utility environment... with actions equivalent to calling the execl() function... with the path argument set to the pathname resulting from the search, arg0 set to the command name, and the remaining execl() arguments set to the command arguments (if any) and the null terminator.&quot;"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1488401694, "post_id": 42541002, "comment_id": 72219464, "body": "@yoyo_fun: Learn how to search: <code>c startup code</code> shows links to multiple useful sites."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1488401864, "post_id": 42541002, "comment_id": 72219581, "body": "@yoyo_fun: A program which has no effect to the environment, i.e. no <b>observable behaviour</b> can be reduced to no existence. Which the compiler is allowed to do."}, {"owner": {"reputation": 212, "user_id": 5712993, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/1ffcc2475b46d64ef87424d23da85206?s=128&d=identicon&r=PG&f=1", "display_name": "yoyo_fun", "link": "https://stackoverflow.com/users/5712993/yoyo-fun"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1488402134, "post_id": 42541002, "comment_id": 72219749, "body": "@Olaf No, it is still a program that can put the processor to do all kinds of operations on all kinds of operators in the memory and in the registries. And for this a program does not need to import any library. It can do mathematical operations on numbers that are hardcoded. This does not mean the program does not exist. And the question &#39;why a program needs to be linked even if it does not import absolutely anything?&#39; is still a valid and interesting question."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1488402161, "post_id": 42541002, "comment_id": 72219763, "body": "@yoyo_fun: Please read the standard!"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1488444986, "post_id": 42541002, "comment_id": 72236734, "body": "Why the <code>c++</code> tag since you are talking of a C program ?"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1488445451, "post_id": 42541002, "comment_id": 72237058, "body": "@yoyo_fun: if some answer (perhaps mine&#39;s) fits your expectations, please accept it."}, {"owner": {"reputation": 3649, "user_id": 294569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05c97ccc8981952c53fa09dadfafb132?s=128&d=identicon&r=PG", "display_name": "Damian", "link": "https://stackoverflow.com/users/294569/damian"}, "edited": false, "score": 1, "creation_date": 1488483125, "post_id": 42541002, "comment_id": 72262540, "body": "This is a convention that was define. The executable needs a place to start, so someone came up with calling it main in C/C++"}], "answers": [{"comments": [{"owner": {"reputation": 14460, "user_id": 1404311, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j4CQ5.jpg?s=128&g=1", "display_name": "Scott Mermelstein", "link": "https://stackoverflow.com/users/1404311/scott-mermelstein"}, "edited": false, "score": 0, "creation_date": 1488399163, "post_id": 42541120, "comment_id": 72218004, "body": "OP doesn&#39;t use any functions from any libraries.  In the example code quoted above, there are no functions that need to be linked."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2933559"}, "edited": false, "score": 0, "creation_date": 1488399279, "post_id": 42541120, "comment_id": 72218079, "body": "If a program is freestanding then you don&#39;t need to link any external functions at all."}, {"owner": {"reputation": 4046, "user_id": 4971422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4abf51a937ddda51cc6813445605c50?s=128&d=identicon&r=PG&f=1", "display_name": "FredK", "link": "https://stackoverflow.com/users/4971422/fredk"}, "edited": false, "score": 0, "creation_date": 1488399412, "post_id": 42541120, "comment_id": 72218154, "body": "But you do need to link the system entry point that eventually calls main()."}, {"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "reply_to_user": {"reputation": 14460, "user_id": 1404311, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j4CQ5.jpg?s=128&g=1", "display_name": "Scott Mermelstein", "link": "https://stackoverflow.com/users/1404311/scott-mermelstein"}, "edited": false, "score": 1, "creation_date": 1488399448, "post_id": 42541120, "comment_id": 72218178, "body": "@ScottMermelstein - No way to answer both comments but, you&#39;re both wrong - there are external functions that are needed, setup/teardown of the environment for example.  Look at the machinations necessary in an assembly program to make it free standing and compare to the <code>.s</code> output from a <code>gcc -s source.c</code>"}, {"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 0, "creation_date": 1488399464, "post_id": 42541120, "comment_id": 72218184, "body": "@bace1000 - see my comment to Scott"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2933559"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1488399571, "post_id": 42541120, "comment_id": 72218247, "body": "@ryyker Since when has <code>exit</code> been a keyword?"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1488399700, "post_id": 42541120, "comment_id": 72218329, "body": "@bace1000 - my mistake, it is a function. I never use it, but have seen it, I misspoke before verifying what it really was."}], "tags": [], "owner": {"reputation": 4412, "user_id": 1953914, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/9bdaf013f56c9c785496b4226d6f1f9f?s=128&d=identicon&r=PG", "display_name": "hashier", "link": "https://stackoverflow.com/users/1953914/hashier"}, "is_accepted": false, "score": -2, "last_activity_date": 1488399091, "creation_date": 1488399091, "answer_id": 42541120, "question_id": 42541002, "link": "https://stackoverflow.com/questions/42541002/when-we-compile-a-source-code-that-contains-a-main-without-linking-why-cant/42541120#42541120", "title": "When we compile a source code that contains a &#39;main&#39; without linking, why can&#39;t we run it?", "body": "<p>Even the most basic commands like <code>exit</code> aren't directly in the language and need to be linked.</p>\n\n<p><a href=\"http://en.cppreference.com/w/c/program/exit\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/c/program/exit</a></p>\n"}, {"comments": [{"owner": {"reputation": 212, "user_id": 5712993, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/1ffcc2475b46d64ef87424d23da85206?s=128&d=identicon&r=PG&f=1", "display_name": "yoyo_fun", "link": "https://stackoverflow.com/users/5712993/yoyo-fun"}, "edited": false, "score": 0, "creation_date": 1488399692, "post_id": 42541217, "comment_id": 72218325, "body": "Thank you for your answer.... many people here seem to be very rude to the beginner programmers, even if my question was not asked before I am downvoted to oblivion."}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": true, "score": 6, "last_activity_date": 1488445038, "last_edit_date": 1488445038, "creation_date": 1488399439, "answer_id": 42541217, "question_id": 42541002, "link": "https://stackoverflow.com/questions/42541002/when-we-compile-a-source-code-that-contains-a-main-without-linking-why-cant/42541217#42541217", "title": "When we compile a source code that contains a &#39;main&#39; without linking, why can&#39;t we run it?", "body": "<p>Read Levine's <a href=\"http://iecc.com/linkers/\" rel=\"nofollow noreferrer\"><em>Linkers &amp; Loaders</em></a>.</p>\n\n<p>Read about <a href=\"https://en.wikipedia.org/wiki/Executable_and_Linkable_Format\" rel=\"nofollow noreferrer\">ELF</a>.</p>\n\n<p>Try compiling with <code>gcc -v</code> (you'll see what are the actual programs used: <code>cc1</code> to <a href=\"https://en.wikipedia.org/wiki/Compiler\" rel=\"nofollow noreferrer\">compile</a> C code into some assembler, <code>as</code> to <a href=\"https://en.wikipedia.org/wiki/Assembly_language#Assembler\" rel=\"nofollow noreferrer\">assemble</a> that into some object file, <a href=\"https://sourceware.org/binutils/docs/ld/\" rel=\"nofollow noreferrer\"><code>ld</code></a> &amp; <a href=\"https://gcc.gnu.org/onlinedocs/gccint/Collect2.html\" rel=\"nofollow noreferrer\"><code>collect2</code></a> to <a href=\"https://en.wikipedia.org/wiki/Linker_(computing)\" rel=\"nofollow noreferrer\">link</a>). Look also at the generated assembler file with <code>gcc -S -fverbose-asm -O</code>. Notice that <code>gcc</code> knows about (and compiles <em>specially</em>) the <code>main</code> function. And the starting point of your executable is provided by some <a href=\"https://en.wikipedia.org/wiki/Crt0\" rel=\"nofollow noreferrer\">crt0</a>, etc (it is <em>not</em> <code>main</code> but some <code>_start</code> routine coded in assembler which calls your <code>main</code>....).</p>\n\n<p><a href=\"https://en.wikipedia.org/wiki/Object_code\" rel=\"nofollow noreferrer\">Object files</a> are not the same as <a href=\"https://en.wikipedia.org/wiki/Executable\" rel=\"nofollow noreferrer\">executables</a>. The executable contains stuff like <a href=\"https://en.wikipedia.org/wiki/Crt0\" rel=\"nofollow noreferrer\">crt0</a> and the <a href=\"https://en.wikipedia.org/wiki/C_standard_library\" rel=\"nofollow noreferrer\">C standard library</a>, or some way to <a href=\"https://en.wikipedia.org/wiki/Dynamic_linker\" rel=\"nofollow noreferrer\">dynamically link</a> it as a <a href=\"https://en.wikipedia.org/wiki/Library_%28computing%29#Shared_libraries\" rel=\"nofollow noreferrer\">shared object</a> (and you need to link your <code>source.o</code> -compiled from your empty <code>main</code> in <code>source.c</code>- into an executable because of that).</p>\n\n<p>On Linux, play with <a href=\"http://man7.org/linux/man-pages/man1/objdump.1.html\" rel=\"nofollow noreferrer\">objdump(1)</a> &amp; <a href=\"http://man7.org/linux/man-pages/man1/readelf.1.html\" rel=\"nofollow noreferrer\">readelf(1)</a> (on some existing binaries, and also on your <code>source.o</code> object file)</p>\n\n<p>See also <a href=\"http://man7.org/linux/man-pages/man5/elf.5.html\" rel=\"nofollow noreferrer\">elf(5)</a>, <a href=\"http://man7.org/linux/man-pages/man2/execve.2.html\" rel=\"nofollow noreferrer\">execve(2)</a>, <a href=\"http://man7.org/linux/man-pages/man8/ld-linux.8.html\" rel=\"nofollow noreferrer\">ld-linux(8)</a>, <a href=\"http://www.tldp.org/HOWTO/Assembly-HOWTO/\" rel=\"nofollow noreferrer\">Linux assembly howto</a>, <a href=\"http://man7.org/linux/man-pages/man2/syscalls.2.html\" rel=\"nofollow noreferrer\">syscalls(2)</a>, <a href=\"http://advancedlinuxprogramming.com/\" rel=\"nofollow noreferrer\">Advanced Linux Programming</a>, <a href=\"http://pages.cs.wisc.edu/~remzi/OSTEP/\" rel=\"nofollow noreferrer\">Operating Systems: Three Easy Pieces</a>, and (to understand about <code>libc.so</code>) Drepper's <a href=\"https://www.akkadia.org/drepper/dsohowto.pdf\" rel=\"nofollow noreferrer\"><em>How To Write Shared Libraries</em></a>, the <a href=\"https://en.wikipedia.org/wiki/Compilers:_Principles,_Techniques,_and_Tools\" rel=\"nofollow noreferrer\">Dragon Book</a> ... </p>\n\n<p><sup>(you need to read entire books to understand the details; I gave some references)</sup></p>\n\n<p>Look also into Common Lisp &amp; <a href=\"http://sbcl.org/\" rel=\"nofollow noreferrer\">SBCL</a>. Its compiler has a very different model (really different from C).</p>\n"}, {"comments": [{"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1488401088, "post_id": 42541686, "comment_id": 72219091, "body": "for this specific example didnt need the stack pointer to be initialized, generally that is the bare minimum, stack pointer and branch to the C language entry point.  REAL C programs with .data and .bss other things need to happen in the bootstrap."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1488424756, "post_id": 42541686, "comment_id": 72227922, "body": "as well as a proper system call to exit, which is operating system dependent how that happens."}], "tags": [], "owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "is_accepted": false, "score": 3, "last_activity_date": 1488401029, "creation_date": 1488401029, "answer_id": 42541686, "question_id": 42541002, "link": "https://stackoverflow.com/questions/42541002/when-we-compile-a-source-code-that-contains-a-main-without-linking-why-cant/42541686#42541686", "title": "When we compile a source code that contains a &#39;main&#39; without linking, why can&#39;t we run it?", "body": "<p>You dont have a bootstrap.  you are in this chicken and egg problem.  </p>\n\n<p>The code (for that function) is there, but there are assumptions, first and foremost you need a stack.  Depending on the architecture your return address may be on that stack for example.  The return value may be on that stack.  The C language itself doesnt provide for that directly in the language there is always at least a little bit of assembly or some other language required in order to \"bootstrap\" your function.  For example in ARM for gnu:</p>\n\n<p>bs.s</p>\n\n<pre><code>.globl _start\n_start:\n    mov sp,#0x8000\n    bl main\n    b .\n</code></pre>\n\n<p>so.c</p>\n\n<pre><code>int main ( void )\n{\n    return(0);\n}\n</code></pre>\n\n<p>For ARM the function is complete the instructions dont need to be modified by the linker. but there is no address space defined, either specified or the disassembler assumes zero as the address for this object, but it is an object not a loadable binary.</p>\n\n<pre><code>00000000 &lt;main&gt;:\n   0:   e3a00000    mov r0, #0\n   4:   e12fff1e    bx  lr\n</code></pre>\n\n<p>now if we add the bootstrap and link to some address we get a real, executable, program</p>\n\n<pre><code>00008000 &lt;_start&gt;:\n    8000:   e3a0d902    mov sp, #32768  ; 0x8000\n    8004:   eb000000    bl  800c &lt;main&gt;\n    8008:   eafffffe    b   8008 &lt;_start+0x8&gt;\n\n0000800c &lt;main&gt;:\n    800c:   e3a00000    mov r0, #0\n    8010:   e12fff1e    bx  lr\n</code></pre>\n\n<p>It doesnt mean one couldnt craft an operating system nor an environment where you could load functions in this way, using the compilers object output.  But that is the reason for the word chain, tool chain.  Compiler makes assembly language, the assembler assembles the assembly language, combined with other necessary objects (bootstrap plus compiler libraries plus C libraries, etc) the linker defines the address spaces for everything and modifies the code/data as needed to resolve externals.  A sequence or chain of events to get the final result.</p>\n"}], "owner": {"reputation": 212, "user_id": 5712993, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/1ffcc2475b46d64ef87424d23da85206?s=128&d=identicon&r=PG&f=1", "display_name": "yoyo_fun", "link": "https://stackoverflow.com/users/5712993/yoyo-fun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 564, "favorite_count": 2, "accepted_answer_id": 42541217, "answer_count": 3, "score": 1, "last_activity_date": 1488445038, "creation_date": 1488398686, "last_edit_date": 1488399079, "question_id": 42541002, "link": "https://stackoverflow.com/questions/42541002/when-we-compile-a-source-code-that-contains-a-main-without-linking-why-cant", "title": "When we compile a source code that contains a &#39;main&#39; without linking, why can&#39;t we run it?", "body": "<p>I am learning about compiling process and I know that linking is mainly used to link a binary file which contains a 'main' function with other binary files that contain other helper functions that are used in our main functions.</p>\n\n<p>However when I try to run an object file with the code:</p>\n\n<pre><code>int main() {\n    return 0;\n}\n</code></pre>\n\n<p>Compiled with the -c command in gcc on Ubuntu, I try to run it and I get the error:</p>\n\n<blockquote>\n  <p>\"bash: ./source.o: cannot execute binary file: Exec format error\"</p>\n</blockquote>\n"}, {"tags": ["c", "shell", "unix", "operating-system", "execvp"], "comments": [{"owner": {"reputation": 11762, "user_id": 6530695, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/53a7a617c8e419f2562f0b00e6be10b1?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/6530695/tony"}, "edited": false, "score": 0, "creation_date": 1488400189, "post_id": 42540991, "comment_id": 72218597, "body": "First of all, nice dogs in picture.  A terminating null byte ( &#39;\\0&#39; ) is stored after the last character in the buffer read by <code>fgets</code>. So you don&#39;t have to put a <code>&#39;\\0&#39;</code>."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 11762, "user_id": 6530695, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/53a7a617c8e419f2562f0b00e6be10b1?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/6530695/tony"}, "edited": false, "score": 0, "creation_date": 1488400280, "post_id": 42540991, "comment_id": 72218654, "body": "@TonyTannous that is to strip the newline... (though it is incorrect as well)."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1488400325, "post_id": 42540991, "comment_id": 72218675, "body": "you&#39;d want to check that the last character indeed is a <code>&#39;\\n&#39;</code> before chopping it off."}, {"owner": {"reputation": 11762, "user_id": 6530695, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/53a7a617c8e419f2562f0b00e6be10b1?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/6530695/tony"}, "edited": false, "score": 0, "creation_date": 1488400439, "post_id": 42540991, "comment_id": 72218733, "body": "I am not sure but I think there&#39;s an issue with the way you are putting your arguments in the commandArgs. You are only storing the first argument. And the final argument has to be NULL."}], "answers": [{"tags": [], "owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "is_accepted": false, "score": 3, "last_activity_date": 1488400226, "last_edit_date": 1495535390, "creation_date": 1488400226, "answer_id": 42541469, "question_id": 42540991, "link": "https://stackoverflow.com/questions/42540991/bad-address-error-with-execvp/42541469#42541469", "title": "Bad address error with execvp", "body": "<p>These two lines are the culprit:</p>\n\n<pre><code>commandArgs[0]=malloc(strlen(command)+1);\nstrcpy(commandArgs[0],command);\n</code></pre>\n\n<p>First of all, <code>malloc(strlen(...))</code> followed by <code>strcpy</code> is what the POSIX function <a href=\"https://stackoverflow.com/questions/252782/strdup-what-does-it-do-in-c\"><code>strdup</code></a> already does. But then, you don't need to even copy the string - it is enough to just store the pointer to the original string into <code>commandArgs[0]</code>:</p>\n\n<pre><code>commandArgs[0] = command;\n</code></pre>\n\n<p>But then, how does <a href=\"https://linux.die.net/man/3/execvp\" rel=\"nofollow noreferrer\"><code>execvp</code></a> how many arguments the command is going to take? If you read the manuals carefully, they'd say something like:</p>\n\n<blockquote>\n  <p>The <code>execv()</code>, <code>execvp()</code>, and <code>execvpe()</code> functions provide an array of pointers to null-terminated strings that represent the argument list available to the new program. The first argument, by convention, should point to the filename associated with the file being executed. <strong><em>The array of pointers</em> MUST <em>be terminated by a NULL pointer.</em></strong></p>\n</blockquote>\n\n<p>Your argument array is not NULL-terminated. To fix it, use</p>\n\n<pre><code>commandArgs[0] = command;\ncommandArgs[1] = NULL; // !!!!\n</code></pre>\n\n<hr>\n\n<p>(Then you'd notice that you'd actually want to assign the arguments <em>within</em> the <code>strtok</code> parsing loop, so that you can actually assign all of the arguments into the <code>commandArgs</code> array; and compile with all warnings enabled and address those, and so forth).</p>\n"}, {"comments": [{"owner": {"reputation": 11762, "user_id": 6530695, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/53a7a617c8e419f2562f0b00e6be10b1?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/6530695/tony"}, "edited": false, "score": 0, "creation_date": 1488400520, "post_id": 42541488, "comment_id": 72218780, "body": "I&#39;ve pointed that out in comments. There&#39;s a problem with argument initialization. Only first argument probably getting assigned and there&#39;s no NULL after the last argument. +1"}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 1, "last_activity_date": 1488400322, "creation_date": 1488400322, "answer_id": 42541488, "question_id": 42540991, "link": "https://stackoverflow.com/questions/42540991/bad-address-error-with-execvp/42541488#42541488", "title": "Bad address error with execvp", "body": "<p>You initialize <code>sPtr</code> in its declaration, which you do not need to do because you never use the initial value.  But the initialization produces undefined behavior because it depends on the contents of the <code>command</code> array, which at that point are indeterminate.</p>\n\n<p>The array passed as the second argument to <code>execvp()</code> is expected to contain a NULL pointer after the last argument.  You do not ensure that yours does.</p>\n\n<p>You furthermore appear to drop all arguments to the input command by failing to assign tokens to <code>commandArgs[]</code>.  After tokenizing you do copy the first token (only) and assign the copy to the first element of <code>commandArgs</code>, but any other tokens are ignored.</p>\n"}], "owner": {"reputation": 21, "user_id": 7643500, "user_type": "registered", "profile_image": "https://graph.facebook.com/1358646650862920/picture?type=large", "display_name": "Amanda Howard", "link": "https://stackoverflow.com/users/7643500/amanda-howard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4504, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1488400322, "creation_date": 1488398642, "question_id": 42540991, "link": "https://stackoverflow.com/questions/42540991/bad-address-error-with-execvp", "title": "Bad address error with execvp", "body": "<p>I'm trying to make a shell \"bosh>\" which takes in Unix commands and keep getting a bad address error. I know my code reads in the commands and parses them but for some reason, I cannot get them to execute, instead, I get a \"bad address\" error.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/wait.h&gt;\n#define MAX_LINE 128\n#define MAX_ARGS 10\n\n\n\nint main(){\n    pid_t pid;\n    char command[MAX_LINE]; /*command line buffer*/\n    char *commandArgs[MAX_ARGS]; /*command line arg*/\n    int i;\n    char *sPtr=strtok(command,\" \");\n    int n=0;\n\n\n    printf(\"bosh&gt;\");\n    fgets(command, MAX_LINE-1,stdin);\n    command[strlen(command)-1]='\\0';\n\n\n    while(strcmp(command,\"quit\")!=0)\n    {\n        n=0;\n\n        sPtr=strtok(command,\" \");\n        while(sPtr&amp;&amp;n&lt;MAX_ARGS)\n        {\n            sPtr=strtok(NULL,\" \");\n            n++;\n        }\n\n        commandArgs[0]=malloc(strlen(command)+1);\n        strcpy(commandArgs[0],command);\n\n        if(fork()==0)\n        {\n            execvp(commandArgs[0],commandArgs);\n            perror(\"execvp failed\");\n            exit(2);\n        }\n        pid=wait(NULL);\n\n\n        printf(\"%s\",\"&gt;\" );\n        fgets(command, MAX_LINE-1,stdin);\n        command[strlen(command)-1]='\\0';\n    }\n\n    printf(\"Command (%d) done\\n\", pid);\n\n    return 0;\n\n\n}\n</code></pre>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1488398689, "post_id": 42540954, "comment_id": 72217724, "body": "bar() is called first."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 3, "creation_date": 1488398713, "post_id": 42540954, "comment_id": 72217734, "body": "As long the <i>observable behaviour</i> is the same, there might be no function call at all. And pick <b>one</b> language! C and C++ are different languages with very different semantics!"}, {"owner": {"reputation": 23041, "user_id": 1149664, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ac4f96b553d2e45776bd6235fee4222d?s=128&d=identicon&r=PG", "display_name": "Johan Lundberg", "link": "https://stackoverflow.com/users/1149664/johan-lundberg"}, "edited": false, "score": 0, "creation_date": 1488398774, "post_id": 42540954, "comment_id": 72217773, "body": "Similar but more intricate for C++17: <a href=\"http://stackoverflow.com/questions/38501587/what-are-the-evaluation-order-guarantees-introduced-by-c17\" title=\"what are the evaluation order guarantees introduced by c17\">stackoverflow.com/questions/38501587/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1488400727, "post_id": 42541000, "comment_id": 72218888, "body": "Please use the <i>valid</i> standard, not an outdated version for reference. And this does not specify how the generated machine code works."}], "tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": false, "score": 0, "last_activity_date": 1488401265, "last_edit_date": 1488401265, "creation_date": 1488398681, "answer_id": 42541000, "question_id": 42540954, "link": "https://stackoverflow.com/questions/42540954/what-is-the-function-execution-order-in-code-like-foobar/42541000#42541000", "title": "What is the function execution order in code like foo(bar())?", "body": "<p>There is a sequence point after function argument evaluation (i.e. before the code of any function is entered). Hence, <code>bar()</code> must be evaluated before <code>foo(...)</code> will be entered. Confer, for example, the <a href=\"http://www.open-std.org/jtc1/sc22/WG14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">C11 standard</a>:</p>\n\n<blockquote>\n  <p>6.5.2.2 Function calls: (10) There is a sequence point after the evaluations of the function designator and the actual arguments but before the actual call. Every evaluation in the calling function (including other function calls) that is not otherwise specifically sequenced before or after the execution of the body of the called function is indeterminately sequenced with respect to the execution of the called function.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1488398960, "post_id": 42541005, "comment_id": 72217881, "body": "Are you sure?  [expr.call] states <i>The evaluations of the postfix expression and of the arguments are all unsequenced relative to one another. All side effects of argument evaluations are sequenced before the function is entered</i>"}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1488399167, "post_id": 42541005, "comment_id": 72218008, "body": "@NathanOliver Yeah, the standard quotes in the linked Q&amp;A seem to support this."}], "tags": [], "owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "is_accepted": true, "score": 3, "last_activity_date": 1488399563, "last_edit_date": 1495540433, "creation_date": 1488398691, "answer_id": 42541005, "question_id": 42540954, "link": "https://stackoverflow.com/questions/42540954/what-is-the-function-execution-order-in-code-like-foobar/42541005#42541005", "title": "What is the function execution order in code like foo(bar())?", "body": "<blockquote>\n  <ol>\n  <li>Is it required that <code>bar()</code> is called first [\u2026]?</li>\n  </ol>\n</blockquote>\n\n<p>The code is required to behave as if that's what's happening.</p>\n\n<blockquote>\n  <ol start=\"2\">\n  <li>Is it permitted that the compiler reorders the above [\u2026]?</li>\n  </ol>\n</blockquote>\n\n<p>Yes, if the observable behavior is the same as if <code>bar()</code> was evaluated first.</p>\n\n<p>This is known as the <a href=\"https://stackoverflow.com/q/15718262/3425536\"><strong>\"as-if\" rule</strong></a>:</p>\n\n<blockquote>\n  <p>[\u2026] an implementation is free to disregard any requirement of this International Standard as long as the result is as if the requirement had been obeyed, as far as can be determined from the observable behavior of the program.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 96886, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "is_accepted": false, "score": 0, "last_activity_date": 1488398697, "creation_date": 1488398697, "answer_id": 42541006, "question_id": 42540954, "link": "https://stackoverflow.com/questions/42540954/what-is-the-function-execution-order-in-code-like-foobar/42541006#42541006", "title": "What is the function execution order in code like foo(bar())?", "body": "<p>If you have the following statement</p>\n\n<pre><code>foo(bar());\n</code></pre>\n\n<p>The function <code>bar()</code> will be called before <code>foo()</code>. The compiler cannot reorder these function calls.</p>\n"}, {"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1488398865, "post_id": 42541028, "comment_id": 72217827, "body": "That would complete forbid inlining and full-code optimisation. If that is about C++, it is very different for C."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1488398948, "post_id": 42541028, "comment_id": 72217874, "body": "@Olaf No it doesn&#39;t, it simply explains what the observable behavior is. The observable behavior is that <code>bar()</code> is evaluated first."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1488399114, "post_id": 42541028, "comment_id": 72217982, "body": "&quot;is sequenced <b>before execution</b> of every expression or statement in the body of the called function.&quot; - that goes much further than observable behaviour. OB allows to reorder statements arbitrarily, as long the OB does not change. This line explicitly forbids it. It might be because of C++ having constructors/destructors, etc. But it is definitively way more restrictive than in C (the question is unfortunately tagged both)."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1488399818, "post_id": 42541028, "comment_id": 72218388, "body": "@Olaf: But 1.9 [intro.execution] says &quot;[conforming implemenations] need not copy or emulate the structure of the abstract machine. Rather, conforming implementations are required to emulate (only) the observable behavior of the abstract machine as explained below.&quot; That applies also to &quot;sequenced before&quot;; only observable behaviour is required to happen in order."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1488399953, "post_id": 42541028, "comment_id": 72218472, "body": "@rici: If you refer to the C++ standard: I&#39;m not really into it (I&#39;m a C person). If that is so, it should be part of the answer as it relaxes requirements indeed. I just wanted to point out from the text shown, it would be more strict than in C."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1488400123, "post_id": 42541028, "comment_id": 72218560, "body": "The citation is not related to when <code>a</code> and <code>b</code> are evaluated relative to each other. <code>a</code> is not the body of the function, but the expression yielding a function. The body is the code at the function definition."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1488400621, "post_id": 42541028, "comment_id": 72218825, "body": "@Olaf: I&#39;m fully aware of your Cness :) and indeed it is from the C++ standard (I should have written 1.9.1, though). But it&#39;s essentially the same definition of &quot;sequenced before&quot; as provided by the C standard (although the sequenced-before <i>rules</i> are different); in both cases, it only applies to observed behaviour. (It&#39;s also possible that C++ and C can observe different behaviours, but the clauses look very similar to me.)"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1488400672, "post_id": 42541028, "comment_id": 72218856, "body": "@Olaf: <code>a</code> <b>is</b> the &quot;postfix expression designating the called function&quot;"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1488400982, "post_id": 42541028, "comment_id": 72219033, "body": "@riciYes, I got that from your comment, but it cannot be concluded from the answer, which makes my comment relevant. Not sure, but doesn&#39;t C++17 (at least) support defered evaluation? That would raise the question to another level of too broad, I suspect."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1488401058, "post_id": 42541028, "comment_id": 72219070, "body": "&quot;... postfix expression designating ...&quot; - Whatever, I did not recall the exact term. Point is it is definitively not the function body the answer refers to."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 5, "last_activity_date": 1488398767, "creation_date": 1488398767, "answer_id": 42541028, "question_id": 42540954, "link": "https://stackoverflow.com/questions/42540954/what-is-the-function-execution-order-in-code-like-foobar/42541028#42541028", "title": "What is the function execution order in code like foo(bar())?", "body": "<p>In C++, [intro.execution]:</p>\n\n<blockquote>\n  <p>When calling a function (whether or not the function is inline), every value computation and side effect associated with any argument expression, or with the postfix expression designating the called function, is sequenced before execution of every expression or statement in the body of the called function.</p>\n</blockquote>\n\n<p><code>bar()</code> must be evaluated before the call to <code>foo</code> begins. </p>\n\n<p>There was some change in C++17 that the expression <code>a(b)</code> now evaluates <code>a</code> before <code>b</code> whereas before they were unsequenced. In this case, the evaluation of <code>foo</code> doesn't do anything, it's just an identifier. But had we had <code>foo()(bar())</code>, then the call to <code>foo()</code> would be sequenced before the call to <code>bar()</code>, whereas prior to C++17, the two were unsequenced. </p>\n"}, {"comments": [{"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1488399983, "post_id": 42541313, "comment_id": 72218488, "body": "The result of <code>bar()</code> is not necessarily passed as a copy, for example if <code>foo</code> takes its parameter as a reference."}, {"owner": {"reputation": 91, "user_id": 2112278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da46df2aadfcfbe52c744dc6fe6275f2?s=128&d=identicon&r=PG", "display_name": "J.Guarin", "link": "https://stackoverflow.com/users/2112278/j-guarin"}, "reply_to_user": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1488400249, "post_id": 42541313, "comment_id": 72218634, "body": "granted, would you please put an example?"}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1488400325, "post_id": 42541313, "comment_id": 72218676, "body": "<code>void foo(const type&amp;) { }</code>"}, {"owner": {"reputation": 91, "user_id": 2112278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da46df2aadfcfbe52c744dc6fe6275f2?s=128&d=identicon&r=PG", "display_name": "J.Guarin", "link": "https://stackoverflow.com/users/2112278/j-guarin"}, "reply_to_user": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1488400995, "post_id": 42541313, "comment_id": 72219037, "body": "You are right. I would improve the answer. Thank you."}], "tags": [], "owner": {"reputation": 91, "user_id": 2112278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da46df2aadfcfbe52c744dc6fe6275f2?s=128&d=identicon&r=PG", "display_name": "J.Guarin", "link": "https://stackoverflow.com/users/2112278/j-guarin"}, "is_accepted": false, "score": 0, "last_activity_date": 1511395156, "last_edit_date": 1511395156, "creation_date": 1488399721, "answer_id": 42541313, "question_id": 42540954, "link": "https://stackoverflow.com/questions/42540954/what-is-the-function-execution-order-in-code-like-foobar/42541313#42541313", "title": "What is the function execution order in code like foo(bar())?", "body": "<p>It's same as :</p>\n\n<pre><code>type bar_result = bar();\nfoo(bar_result);\n</code></pre>\n\n<ol>\n<li>bar() will be called first. </li>\n<li>bar_result is passed as a copy/referencie.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 4046, "user_id": 4971422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4abf51a937ddda51cc6813445605c50?s=128&d=identicon&r=PG&f=1", "display_name": "FredK", "link": "https://stackoverflow.com/users/4971422/fredk"}, "is_accepted": false, "score": 2, "last_activity_date": 1488399721, "creation_date": 1488399721, "answer_id": 42541314, "question_id": 42540954, "link": "https://stackoverflow.com/questions/42540954/what-is-the-function-execution-order-in-code-like-foobar/42541314#42541314", "title": "What is the function execution order in code like foo(bar())?", "body": "<p>In addition to what others have said, you might consider </p>\n\n<pre><code>  foo( bar1(), bar2() );\n</code></pre>\n\n<p>which is a more interesting case. Here, the order is allowed to be [bar1, bar2, foo] or [bar2, bar1, foo].</p>\n"}], "owner": {"reputation": 6365, "user_id": 4385532, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/0573709d0b88e4b50af0e28c3e96873b?s=128&d=identicon&r=PG&f=1", "display_name": "gaazkam", "link": "https://stackoverflow.com/users/4385532/gaazkam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "accepted_answer_id": 42541005, "answer_count": 6, "score": 1, "last_activity_date": 1511395156, "creation_date": 1488398531, "question_id": 42540954, "link": "https://stackoverflow.com/questions/42540954/what-is-the-function-execution-order-in-code-like-foobar", "title": "What is the function execution order in code like foo(bar())?", "body": "<p>Assume we have code like this in C or C++:</p>\n\n<pre><code>foo(bar());\n</code></pre>\n\n<p>What is the function execution order in this case?</p>\n\n<ol>\n<li>Is it required that <code>bar()</code> is called first, and <code>foo()</code> is called no earlier than <code>bar()</code> returns, in which case <code>foo()</code> is passed the return value of <code>bar()</code>?</li>\n<li>Is it permitted that the compiler reorders the above, namely that it calls <code>foo()</code> first, and delays calling <code>bar()</code> until in the code of <code>foo()</code> the value of <code>foo()</code>\u2019s parameter is actually needed?</li>\n</ol>\n\n<p>Case 2 could be useful for optimization should <code>foo()</code> be defined like this:</p>\n\n<pre><code>void foo(someType par) {\n    if(someTest())\n        baz1();\n    else\n        baz2(par);\n}\n</code></pre>\n\n<p>In which case calling <code>bar()</code> could even be completely skipped if <code>someTest()</code> returns <code>false</code>.</p>\n\n<p>However, case 2 would also make the programmer have to be more careful, as it could sometimes lead to subtle bugs (for example with recurrence).</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1488404234, "post_id": 42540945, "comment_id": 72220880, "body": "It seems cruel to set you that as an exercise before you&#39;ve learned about arrays.  The code you&#39;ve shown is incomplete.  Your code will need to handle 43556 (which covers HELLO amongst other possibilities) \u2014 that is, digits can be repeated."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1488404656, "post_id": 42540945, "comment_id": 72221137, "body": "Please review how to create an MCVE (<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>)."}], "answers": [{"comments": [{"owner": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1488404065, "post_id": 42542454, "comment_id": 72220794, "body": "not sure if dumping code on him helps him"}, {"owner": {"reputation": 13741, "user_id": 1624376, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/OkgmJ.png?s=128&g=1", "display_name": "Aubin", "link": "https://stackoverflow.com/users/1624376/aubin"}, "reply_to_user": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1488404536, "post_id": 42542454, "comment_id": 72221069, "body": "An example of data constants usage and a short recursive function may be a starting point of questions and exchanges..."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1488404565, "post_id": 42542454, "comment_id": 72221083, "body": "If the OP doesn&#39;t understand arrays yet, they probably haven&#39;t covered recursion either and this might be a bit advanced \u2014 but it does seem to work."}, {"owner": {"reputation": 23, "user_id": 7638597, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c5865ac42523d8677a5237ce804405d4?s=128&d=identicon&r=PG", "display_name": "Lim LS", "link": "https://stackoverflow.com/users/7638597/lim-ls"}, "edited": false, "score": 0, "creation_date": 1488828241, "post_id": 42542454, "comment_id": 72395455, "body": "Sorry for the really late reply, but thanks for your help! However, there&#39;s lots I don&#39;t understand about your code. Firstly, does c = getchar () get each number from input? And why do you have the condition to be greater than 20? And does size_t automatically count how many numbers there are in the input?"}, {"owner": {"reputation": 23, "user_id": 7638597, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c5865ac42523d8677a5237ce804405d4?s=128&d=identicon&r=PG", "display_name": "Lim LS", "link": "https://stackoverflow.com/users/7638597/lim-ls"}, "edited": false, "score": 0, "creation_date": 1488828312, "post_id": 42542454, "comment_id": 72395500, "body": "Also, why index[count++] instead of index[count]? Don&#39;t you want index to start from 0 instead of 1?"}], "tags": [], "owner": {"reputation": 13741, "user_id": 1624376, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/OkgmJ.png?s=128&g=1", "display_name": "Aubin", "link": "https://stackoverflow.com/users/1624376/aubin"}, "is_accepted": false, "score": 1, "last_activity_date": 1488831759, "last_edit_date": 1488831759, "creation_date": 1488403960, "answer_id": 42542454, "question_id": 42540945, "link": "https://stackoverflow.com/questions/42540945/program-to-find-combination-of-letters-associated-with-phone-keypad/42542454#42542454", "title": "Program to find combination of letters associated with phone keypad", "body": "<p><a href=\"https://docs.google.com/file/d/0B5Gl6fAWcS-_UUp2ZW5jXzdKcVU/view\" rel=\"nofollow noreferrer\">A small book, a must have.</a></p>\n\n<p>This code works as desired:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nvoid combinaisons( const char * input[], size_t index, size_t count, char * str ) {\n   const char * group = input[index];\n   for( size_t i = 0, len = strlen( group ); i &lt; len; ++i ) {\n      str[index] = group[i];\n      if( index+1 &lt; count ) {\n         combinaisons( input, index+1, count, str );\n      }\n      else {\n         printf( \"%s\\n\", str );\n      }\n   }\n   str[index] = '\\0';\n}\n\nint main() {\n   const char * groups[] = {\n      \"ABC\", /* 2 */\n      \"DEF\", /* 3 */\n      \"GHI\", /* 4 */\n      \"JKL\", /* 5 */\n      \"MNO\", /* 6 */\n      \"PQRS\",/* 7 */\n      \"TUV\", /* 8 */\n      \"WXYZ\",/* 9 */\n   };\n   const char * input[100];\n   size_t count = 0;\n   char c;\n   while(( c = getchar()) &gt; 20 &amp;&amp; count &lt; 100 ) {\n      if( c &gt;= '2' || c &lt;= '9' ) {\n         input[count++] = groups[c-'2'];\n      }\n   }\n   char str[100] = \"\";\n   combinaisons( input, 0, count, str );\n   return 0;\n}\n</code></pre>\n\n<p>Execution trace:</p>\n\n<pre><code>246\nAGM\nAGN\nAGO\nAHM\nAHN\nAHO\nAIM\nAIN\nAIO\nBGM\nBGN\nBGO\nBHM\nBHN\nBHO\nBIM\nBIN\nBIO\nCGM\nCGN\nCGO\nCHM\nCHN\nCHO\nCIM\nCIN\nCIO\n</code></pre>\n\n<p>Some explanations:</p>\n\n<p><code>groups</code> is an array of string (i.e. const char *). It can be indexed by the char, for example '2' as index 0 with c-'2'.</p>\n\n<p><code>input</code> store the selected groups, with '246', input contains <code>{\"ABC\",\"GHI\",\"MNO\"}</code>.</p>\n\n<p><code>str</code> is a string built from the letters picked into <code>input</code>, at index 0: A, B or C, at index 1: G, H or I, and so on.</p>\n\n<p>The recursion is used to apply the same treatment on different index of <code>str</code> from different group extracted from <code>input</code>. The recursion terminates when no remaining group exist, when all the group from input are consumed. An important instruction is the last of <code>combinaisons</code>: <code>str[index] = '\\0';</code>, it truncate the string by removing the last char added, because the recursion backtrack. I suggest to execute this code step by step with a debugger and to observe how <code>str</code> is filled.</p>\n\n<p><code>c = getchar()</code> read a single character from standard input, <a href=\"https://linux.die.net/man/3/getchar\" rel=\"nofollow noreferrer\">see documentation</a>.</p>\n\n<p>The condition <code>&gt; 20</code> is used to detect any non printable character, as cr to end the <code>while</code> loop.</p>\n\n<p><code>size_t</code> is the type of <code>count</code>, <code>count</code> is incremented each time a number is read from stdin with the instruction <code>input[count++]</code> which means <em>use count to index input array then increment it</em>, it's a post incrementation. The first index is zero.</p>\n"}], "owner": {"reputation": 23, "user_id": 7638597, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c5865ac42523d8677a5237ce804405d4?s=128&d=identicon&r=PG", "display_name": "Lim LS", "link": "https://stackoverflow.com/users/7638597/lim-ls"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 448, "favorite_count": 0, "closed_date": 1488404637, "answer_count": 1, "score": 0, "last_activity_date": 1488831759, "creation_date": 1488398505, "last_edit_date": 1488404312, "question_id": 42540945, "link": "https://stackoverflow.com/questions/42540945/program-to-find-combination-of-letters-associated-with-phone-keypad", "closed_reason": "Needs details or clarity", "title": "Program to find combination of letters associated with phone keypad", "body": "<p>So here is the question:</p>\n\n<p>On a phone keypad, many of the numbers have letters associated with them. For instance, the letters A, B, and C are associated with the number 2. Write a program that accepts a number as input and prints all of the possible letter combinations associated with that number. For example, if the input is n=23, the possible letter combinations are AD, AE, AF, BD, BE, BF, CD, CE, and CF.</p>\n\n<p>I don't know how to solve this problem, but here is my idea, and the accompanying program. My idea is that since there are just 7 unique numbers, I would go through each number typed by the user, and if it is new, do a form of bitwise operation to record it. Therefore, if the user were to repeat that number again, there is some sort of memory.</p>\n\n<p>Then after that, I would write a program to count the number of 1s and therefore, the different unique numbers entered by user.</p>\n\n<p>Here is where I get stuck. I just can't seem to figure out how to 'store' the different numbers, because I don't know beforehand while writing the program how many the user would enter. And I don't really know how to generate all the combinations though I think a nested for loop could do it.</p>\n\n<p>Anyway, I thought that my idea is way too complicated and should be simpler, since I'm in a beginner programming course. I have not learned arrays yet too. So any ideas on how to tackle this problem is much appreciated.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n   int input, i, j, k = 0, count_1 = 0, count_2 = 0, integer, check, monitor = 0;\n   char alphabets;\n   printf(\"Enter number as input: \");\n   scanf(\"%d\", &amp;input);\n   if ( input &lt; 50 || input &gt; 57 ) {\n      printf(\"Enter number as input: \");\n      scanf(\"%d\", &amp;input);\n   }\n   integer = input;\n   while ( integer &gt; 0 ) {\n      check = input % 10;\n      input = integer / 10;\n      switch ( check ) {\n         case 2: monitor | ( 2 *        1 ); break;\n         case 3: monitor | ( 2 *       10 ); break;\n         case 4: monitor | ( 2 *      100 ); break;\n         case 5: monitor | ( 2 *     1000 ); break;\n         case 6: monitor | ( 2 *    10000 ); break;\n         case 7: monitor | ( 2 *   100000 ); break;\n         case 8: monitor | ( 2 *  1000000 ); break;\n         case 9: monitor | ( 2 * 10000000 ); break;\n      }\n   }\n   for( i = 0; i &lt; 8; i++ ) {\n      if( i == 0 ) {\n         power = 1;\n      }\n      else {\n         for ( j = 1; j &lt;= i; j++ ) {\n            power *= 10;\n         }\n      }\n   }\n   while ( k &lt; 7 ) {\n</code></pre>\n"}, {"tags": ["c", "lua", "lua-api"], "comments": [{"owner": {"reputation": 5408, "user_id": 1793220, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Onk4P.jpg?s=128&g=1", "display_name": "Hisham H M", "link": "https://stackoverflow.com/users/1793220/hisham-h-m"}, "edited": false, "score": 3, "creation_date": 1488408440, "post_id": 42540932, "comment_id": 72222968, "body": "This is really weird. A wild guess: something that happened earlier in your C code corrupted your <code>lua</code> state? Try running the program with Valgrind."}, {"owner": {"reputation": 18839, "user_id": 234175, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/37f386df1c4e98d9ce0350431f590f2a?s=128&d=identicon&r=PG", "display_name": "greatwolf", "link": "https://stackoverflow.com/users/234175/greatwolf"}, "edited": false, "score": 5, "creation_date": 1488431393, "post_id": 42540932, "comment_id": 72230117, "body": "Can you show us a minimal example that reproduces the problem you&#39;re seeing because I can&#39;t."}, {"owner": {"reputation": 163, "user_id": 1429034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcb7991cf10d5393140afe789d3fad81?s=128&d=identicon&r=PG", "display_name": "Octa9on", "link": "https://stackoverflow.com/users/1429034/octa9on"}, "edited": false, "score": 0, "creation_date": 1488483182, "post_id": 42540932, "comment_id": 72262578, "body": "In searching for a minimal example I found that the problem was caused by trying to pop an empty stack. I had misunderstood the behavior of a call to <code>lua_settable</code>.  I believe the reason the Lua command worked when the C API command didn&#39;t is that the stack gets cleaned up at the transition between C code and Lua code."}], "answers": [{"tags": [], "owner": {"reputation": 163, "user_id": 1429034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcb7991cf10d5393140afe789d3fad81?s=128&d=identicon&r=PG", "display_name": "Octa9on", "link": "https://stackoverflow.com/users/1429034/octa9on"}, "is_accepted": true, "score": 0, "last_activity_date": 1488483614, "last_edit_date": 1488483614, "creation_date": 1488483267, "answer_id": 42564368, "question_id": 42540932, "link": "https://stackoverflow.com/questions/42540932/whats-the-difference-between-dofile-in-lua-and-lual-dofile-in-the-c-api/42564368#42564368", "title": "What&#39;s the difference between &quot;dofile&quot; in lua and &quot;luaL_dofile&quot; in the C API?", "body": "<p>Popping from an empty stack will cause unexpected behavior. The Lua interpreter cleans up the stack between executing C code and executing Lua code, so the messed up stack didn't affect the <code>dofile</code> in Lua.</p>\n"}], "owner": {"reputation": 163, "user_id": 1429034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcb7991cf10d5393140afe789d3fad81?s=128&d=identicon&r=PG", "display_name": "Octa9on", "link": "https://stackoverflow.com/users/1429034/octa9on"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 823, "favorite_count": 0, "accepted_answer_id": 42564368, "answer_count": 1, "score": 2, "last_activity_date": 1488483614, "creation_date": 1488398462, "last_edit_date": 1488431481, "question_id": 42540932, "link": "https://stackoverflow.com/questions/42540932/whats-the-difference-between-dofile-in-lua-and-lual-dofile-in-the-c-api", "title": "What&#39;s the difference between &quot;dofile&quot; in lua and &quot;luaL_dofile&quot; in the C API?", "body": "<p>Using the Lua 5.3.4 C API, this works:</p>\n\n<pre><code>luaL_dostring(lua, \"dofile('mnemonics.lua')\");\n</code></pre>\n\n<p>But this fails to execute the file:</p>\n\n<pre><code>luaL_dofile(lua, \"mnemonics.lua\");\n</code></pre>\n\n<p>Instead, it reports \"attempt to call a string value\".</p>\n\n<p>When I replace it with</p>\n\n<pre><code>luaL_loadfile(lua, \"mnemonics.lua\");\n</code></pre>\n\n<p>it returns <code>LUA_OK</code>, but it doesn't push a function on the stack like it's supposed to. In fact, the stack is empty (<code>gettop</code> reports 0) afterwards.</p>\n\n<p>I can use the dostring workaround, but either I'm missing something, or there's a bug.</p>\n"}, {"tags": ["c", "memory", "tree", "trie"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1488397795, "post_id": 42540471, "comment_id": 72217191, "body": "You <code>free</code> 26 nodes but it is not clear that they have memory allocated (or are <code>NULL</code> pointers)."}, {"owner": {"reputation": 261, "user_id": 7497945, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c70f416b740ab2b614b3bd5cc0010efc?s=128&d=identicon&r=PG&f=1", "display_name": "woshidashen", "link": "https://stackoverflow.com/users/7497945/woshidashen"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1488397989, "post_id": 42540471, "comment_id": 72217300, "body": "So I need to check if &quot;curs-&gt;child[i]==NULL&quot; before &quot;freetree(curs-&gt;child[i]);&quot;?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1488398012, "post_id": 42540471, "comment_id": 72217315, "body": "In the loop <code>while(i!=l)</code> neither <code>i</code> nor <code>l</code> are updated: that&#39;s an infinite loop calling <code>malloc</code>, whose return value is <b>not checked</b>."}, {"owner": {"reputation": 11762, "user_id": 6530695, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/53a7a617c8e419f2562f0b00e6be10b1?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/6530695/tony"}, "edited": false, "score": 0, "creation_date": 1488398025, "post_id": 42540471, "comment_id": 72217325, "body": "Dear OP, heap size is limited and 1 million words is somewhere in the <code>10MB</code> space size which might exceeds the size of the heap."}, {"owner": {"reputation": 11762, "user_id": 6530695, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/53a7a617c8e419f2562f0b00e6be10b1?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/6530695/tony"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1488398107, "post_id": 42540471, "comment_id": 72217378, "body": "@WeatherVane <code>i++</code> at the end of the while loop. I&#39;ve edited this question for a better indentation... waiting for approve."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1488398130, "post_id": 42540471, "comment_id": 72217393, "body": "@GhostKid Yao no, <code>free</code> is OK with a <code>NULL</code> pointer, but it is <b>NOT</b> ok with an uninitialised pointer."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 11762, "user_id": 6530695, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/53a7a617c8e419f2562f0b00e6be10b1?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/6530695/tony"}, "edited": false, "score": 0, "creation_date": 1488398195, "post_id": 42540471, "comment_id": 72217433, "body": "@TonyTannous mybad was caught by atrocious formatting."}, {"owner": {"reputation": 11762, "user_id": 6530695, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/53a7a617c8e419f2562f0b00e6be10b1?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/6530695/tony"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1488398406, "post_id": 42540471, "comment_id": 72217561, "body": "@WeatherVane that is fine, now it looks better."}, {"owner": {"reputation": 261, "user_id": 7497945, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c70f416b740ab2b614b3bd5cc0010efc?s=128&d=identicon&r=PG&f=1", "display_name": "woshidashen", "link": "https://stackoverflow.com/users/7497945/woshidashen"}, "edited": false, "score": 0, "creation_date": 1488398442, "post_id": 42540471, "comment_id": 72217580, "body": "Still confused about what I should do here, So what should I do to check if I am freeing an initialized pointer?"}, {"owner": {"reputation": 11762, "user_id": 6530695, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/53a7a617c8e419f2562f0b00e6be10b1?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/6530695/tony"}, "edited": false, "score": 0, "creation_date": 1488398456, "post_id": 42540471, "comment_id": 72217588, "body": "To sum up, what is your question OP ?  Why is it failing for big amount of words ? it is in your title."}, {"owner": {"reputation": 261, "user_id": 7497945, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c70f416b740ab2b614b3bd5cc0010efc?s=128&d=identicon&r=PG&f=1", "display_name": "woshidashen", "link": "https://stackoverflow.com/users/7497945/woshidashen"}, "edited": false, "score": 0, "creation_date": 1488398540, "post_id": 42540471, "comment_id": 72217639, "body": "I know it gotta be a error in allocating memory but I&#39;m not sure know how to fix it"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1488398584, "post_id": 42540471, "comment_id": 72217667, "body": "Two ways. 1) match every <code>free</code> to its <code>malloc</code>. 2) Initialise every pointer to <code>NULL</code> before you use any, then <code>free</code> is safe, but, if unmatched you can still get a memory leak. So the first is preferable to the scattergun approach."}, {"owner": {"reputation": 261, "user_id": 7497945, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c70f416b740ab2b614b3bd5cc0010efc?s=128&d=identicon&r=PG&f=1", "display_name": "woshidashen", "link": "https://stackoverflow.com/users/7497945/woshidashen"}, "edited": false, "score": 0, "creation_date": 1488399244, "post_id": 42540471, "comment_id": 72218061, "body": "is there a way to free the tree with a function instead of matching free to its malloc?"}], "answers": [{"comments": [{"owner": {"reputation": 261, "user_id": 7497945, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c70f416b740ab2b614b3bd5cc0010efc?s=128&d=identicon&r=PG&f=1", "display_name": "woshidashen", "link": "https://stackoverflow.com/users/7497945/woshidashen"}, "edited": false, "score": 0, "creation_date": 1488397223, "post_id": 42540538, "comment_id": 72216884, "body": "So what should I do instead of malloc?"}, {"owner": {"reputation": 30, "user_id": 2016501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31d5aa80ea6ad8669112cab75ee6b5fa?s=128&d=identicon&r=PG", "display_name": "John Doe", "link": "https://stackoverflow.com/users/2016501/john-doe"}, "reply_to_user": {"reputation": 261, "user_id": 7497945, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c70f416b740ab2b614b3bd5cc0010efc?s=128&d=identicon&r=PG&f=1", "display_name": "woshidashen", "link": "https://stackoverflow.com/users/7497945/woshidashen"}, "edited": false, "score": 1, "creation_date": 1488397328, "post_id": 42540538, "comment_id": 72216941, "body": "If <code>malloc</code> cannot allocate extra memory, then it means you cannot allocate memory in a different way."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1488397433, "post_id": 42540538, "comment_id": 72216985, "body": "For this code it also means you have a serious bug even if you are building a 32 bit application and are only limited to a 2GB address space. You should be no where near any limit. Perhaps you are trying to allocate a negative sized array. Or you are in an infinite loop allocating nodes."}, {"owner": {"reputation": 261, "user_id": 7497945, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c70f416b740ab2b614b3bd5cc0010efc?s=128&d=identicon&r=PG&f=1", "display_name": "woshidashen", "link": "https://stackoverflow.com/users/7497945/woshidashen"}, "edited": false, "score": 0, "creation_date": 1488397716, "post_id": 42540538, "comment_id": 72217134, "body": "That&#39;s weird because I freed the tree every time and It worked for smaller amount of words."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1488397784, "post_id": 42540538, "comment_id": 72217179, "body": "My recommendation is to use a debugger to figure out what you are allocating when the allocation fails."}], "tags": [], "owner": {"reputation": 30, "user_id": 2016501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31d5aa80ea6ad8669112cab75ee6b5fa?s=128&d=identicon&r=PG", "display_name": "John Doe", "link": "https://stackoverflow.com/users/2016501/john-doe"}, "is_accepted": true, "score": 0, "last_activity_date": 1488397245, "last_edit_date": 1488397245, "creation_date": 1488397189, "answer_id": 42540538, "question_id": 42540471, "link": "https://stackoverflow.com/questions/42540471/c-programming-trie-tree-heap-buffer-overflow/42540538#42540538", "title": "C programming Trie tree heap buffer overflow", "body": "<p>Check for the return of the <code>malloc</code> function. If it is NULL, it means you have reached the maximum of your heap memory for this process, and thus <code>malloc</code> cannot allocate extra memory for you.</p>\n"}], "owner": {"reputation": 261, "user_id": 7497945, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c70f416b740ab2b614b3bd5cc0010efc?s=128&d=identicon&r=PG&f=1", "display_name": "woshidashen", "link": "https://stackoverflow.com/users/7497945/woshidashen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 42540538, "answer_count": 1, "score": 2, "last_activity_date": 1488398322, "creation_date": 1488396960, "last_edit_date": 1488398322, "question_id": 42540471, "link": "https://stackoverflow.com/questions/42540471/c-programming-trie-tree-heap-buffer-overflow", "title": "C programming Trie tree heap buffer overflow", "body": "<p>I just started programming and have a question:  I want to insert a large amount of words into a trie tree. Then traverse the tree and free all the nodes so that I can insert these words again. But when the number of words is large (say 1 million), I hit a heap buffer overflow, these function works for smaller amount of words:</p>\n\n<p>Here is the nodes</p>\n\n<pre><code>struct node\n{\n    struct node * parent;\n    int noempty;\n    int isword;\n    int super;\n    int occurrence;\n    int leaf;\n    struct node * child[26];\n};\n</code></pre>\n\n<p><br>The function to insert:</p>\n\n<pre><code>struct node* insert(struct node *root,char *c)\n{\n    int i=0;\n    struct node *temp=root;\n    int l=length(c);\n    while(i!=l)\n    {\n        int index=c[i]-'a';\n        if(temp-&gt;child[index]==NULL)\n        {\n            //New Node\n            struct node *n=malloc(sizeof(struct node)); \n            n-&gt;parent=temp;\n            temp-&gt;child[index]=n;\n            temp-&gt;noempty=1;\n        }\n        //Node Exist\n        if(i!=l&amp;&amp;temp-&gt;leaf==1)\n        { \n            temp-&gt;leaf=0;\n        }\n        temp=temp-&gt;child[index];\n        i++;\n    }\n    if(temp-&gt;noempty==0)\n    {\n        temp-&gt;leaf=1;\n    }\n    temp-&gt;isword=1;\n    return root;\n};\n</code></pre>\n\n<p><br>And the free function:</p>\n\n<pre><code>void freetree(struct node* curs)\n{ \n    int i;\n    if(!curs) \n        return;  \n    for (i = 0; i !=26; i++)\n        freetree(curs-&gt;child[i]);\n    free(curs);\n}\n</code></pre>\n\n<p>Thank you!</p>\n"}, {"tags": ["c", "sockets", "udp"], "comments": [{"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 1, "creation_date": 1488395938, "post_id": 42539898, "comment_id": 72216073, "body": "without looking at your code, there isn&#39;t a definitive way to do this that I&#39;ve ever heard of. As I&#39;m sure you know, UDP is a connectionless, spray-and-pray protocol. No handshake, no acknowledgement. If I send a packet to a host at UDP port x, and hear nothing back, that could mean a variety of things. You can only definitively tell a UDP port is closed if a host responds with an ICMP message telling you so, and for security reasons they shouldn&#39;t do this. Port scanning for UDP ports isn&#39;t exact."}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1488397736, "post_id": 42539898, "comment_id": 72217145, "body": "actually, you could imagine a scenario where, even if a UDP port was open, if the data you delivered to it wasn&#39;t in the correct format or your IP didn&#39;t match a whitelist or what have you, the host could respond with an ICMP port closed message,, so I have to walk back on what I said... even ICMP port closed messages won&#39;t definitively tell you whether a port is closed or not. Security through obfuscation won&#39;t deter a determined hacker, but it can certainly weed out the riffraff and be part of an overall security strategy."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1488402956, "post_id": 42539898, "comment_id": 72220158, "body": "Assuming ICMP is not being blocked, if a UDP packet cannot be routed to a given target host then an ICMP Host Unreachable packet is sent back, otherwise if the host is reachable but the port is not open then an ICMP Port Unreachable packet is sent back.  There is no ICMP Port Closed packet."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1488403096, "post_id": 42539898, "comment_id": 72220250, "body": "Also see: <a href=\"https://community.qualys.com/docs/DOC-1185\" rel=\"nofollow noreferrer\">How does UDP port scanning and service detection work?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 6882, "user_id": 3403834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpA5S.jpg?s=128&g=1", "display_name": "user58697", "link": "https://stackoverflow.com/users/3403834/user58697"}, "is_accepted": false, "score": 0, "last_activity_date": 1488396801, "creation_date": 1488396801, "answer_id": 42540426, "question_id": 42539898, "link": "https://stackoverflow.com/questions/42539898/how-to-check-if-remote-udp-port-is-open-c/42540426#42540426", "title": "How to check if remote UDP port is open? C", "body": "<p>Your socket is created with <code>SOC_STREAM</code>, but never connected. In such situation <code>sendto</code> fails with <code>ENOTCONN</code>. The code prints nothing because <code>close(sockfd)</code> succeeds and resets <code>errno</code> to 0.</p>\n\n<p>Notice also that you don't need to test <code>errno</code>; it is guaranteed to be non-zero once <code>sendto</code> fails:</p>\n\n<pre><code>    if ((send_size = ....) &lt; 0) {\n        perror(\"send\");\n        close(sockfd);\n        ....\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 3, "last_activity_date": 1488397356, "creation_date": 1488397356, "answer_id": 42540579, "question_id": 42539898, "link": "https://stackoverflow.com/questions/42539898/how-to-check-if-remote-udp-port-is-open-c/42540579#42540579", "title": "How to check if remote UDP port is open? C", "body": "<blockquote>\n  <p>It's easy to test for TCP [ports being open], but how about UDP?</p>\n</blockquote>\n\n<p>It's not possible to reliably detect that a remote port of either flavor is closed.  It is not even possible to reliably detect that a remote TCP port is <em>open</em> -- the best you can do is determine whether that port is open <em>to you</em>, by successfully connecting to it.  The remote machine may affirmatively reject your connection attempt even though it would accept connections from a different machine, and it may silently ignore the attempt whether the port is open (to other machines) or closed.</p>\n\n<p>All of that applies to UDP as well, except that you cannot rely on a response from the remote machine even if it accepts your packet.  You <em>may</em> get an affirmative rejection, but if you don't, you learn nothing from the attempt.  You can scan for a particular UDP service running and serving request from your machine on the remote port, but you can't count more generally on being able to determine whether the port is open.</p>\n"}], "owner": {"reputation": 526, "user_id": 3163216, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8b26cac504c060277cce703d2e560319?s=128&d=identicon&r=PG&f=1", "display_name": "mirx", "link": "https://stackoverflow.com/users/3163216/mirx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3972, "favorite_count": 0, "closed_date": 1529464387, "accepted_answer_id": 42540579, "answer_count": 2, "score": 0, "last_activity_date": 1488397356, "creation_date": 1488394934, "last_edit_date": 1495541866, "question_id": 42539898, "link": "https://stackoverflow.com/questions/42539898/how-to-check-if-remote-udp-port-is-open-c", "closed_reason": "Duplicate", "title": "How to check if remote UDP port is open? C", "body": "<p>It's easy to test for TCP, but how about UDP? Here: <a href=\"https://stackoverflow.com/questions/21462339/check-if-openvpn-udp-port-is-open\">Check if OpenVPN UDP Port is open</a> I read that it is impossible to do this. However, here: <a href=\"https://stackoverflow.com/questions/10531618/how-to-retrieve-both-tcp-and-udp-ports-with-nmap\">How to retrieve both TCP and UDP ports with Nmap?</a> it was proved that nmap can do this, so its possible I think. </p>\n\n<p>I wrote a very simple code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;arpa/inet.h&gt;\n#include &lt;unistd.h&gt;\n\nint main(int argc, char **argv)\n{\n    char * ip_addr;\n    int port;\n\n    int sockfd;\n    struct sockaddr_in server_addr;\n\n    if (argc != 3)\n    {\n        fprintf(stderr,\"Usage: %s IP port \\n\", argv[0]);\n        exit(1);\n    }\n\n    ip_addr = argv[1];\n    port = atoi(argv[2]);\n\n    if (port &lt;= 0)\n    {\n        fprintf(stderr,\"error: invalid port\\n\");\n        exit(1);\n    }\n\n    if ((sockfd = socket(AF_INET, SOCK_STREAM, 0)) == -1)\n    {\n        perror(\"socket\");\n        exit(1);\n    }\n\n    server_addr.sin_family = AF_INET;\n    server_addr.sin_port = htons(port);\n    inet_aton(ip_addr, &amp;server_addr.sin_addr);\n\n    char msg[] = \"Just a text\\n\";\n    char buffer[255];\n    int recv_size, send_size;\n\n    if ((send_size = sendto(sockfd, msg, strlen(msg), 0, (struct sockaddr*) &amp;server_addr, sizeof(server_addr))) &lt; 0)\n    {\n        close(sockfd);\n        if (errno != 0)\n        {\n            perror(\"send\");\n            exit(1);\n        }\n    }else if(send_size == 0)\n    {\n        printf(\"sent\\n\");\n    }\n    else if (send_size &gt; 0)\n    {\n        printf(\"sent\\n\");\n    }\n\n    if ((recv_size = recvfrom(sockfd, buffer, 255, 0, NULL, NULL)) == 0)\n    {\n        close(sockfd);\n        if (errno != 0)\n        {\n            perror(\"recv\");\n            exit(1);\n        }\n    }\n\n    buffer[recv_size] = '\\0';\n\n    close(sockfd);\n\n\n    return 0;\n}\n</code></pre>\n\n<p>But it prints nothing, just ends. So its hard to say what happend, if the port is opened or not. Is there a simple way, using sockets, to test whether the remote UDP port is opened? </p>\n"}, {"tags": ["c", "hex"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1488394474, "post_id": 42539676, "comment_id": 72215181, "body": "Set <code>i</code> near the end of the array <code>array[]</code> and use <code>i--</code>.  Also likely want a <code>array[size-1] = &#39;\\0&#39;;</code> someplace.  Suggest a <code>do { ...  } while (decimal);</code> loop to handle <code>decimal == 0</code>."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1488395287, "post_id": 42539676, "comment_id": 72215667, "body": "@rici yes of course, I didn&#39;t look into this any longer than 10 seconds."}, {"owner": {"reputation": 4046, "user_id": 4971422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4abf51a937ddda51cc6813445605c50?s=128&d=identicon&r=PG&f=1", "display_name": "FredK", "link": "https://stackoverflow.com/users/4971422/fredk"}, "edited": false, "score": 0, "creation_date": 1488395456, "post_id": 42539676, "comment_id": 72215782, "body": "One way to ensure the correct letters  is to refer to positions in a const char array &quot;0123456789ABCDEF&quot;."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1488395629, "post_id": 42539676, "comment_id": 72215890, "body": "A piece of paper and a pencil should help here. Sidenote: don&#39;t use &quot;magic&quot; numbers such as 48 and 55, but rather <code>&#39;0&#39;</code> and <code>&#39;A&#39; - 10</code>, which shows clearly your intention."}, {"owner": {"reputation": 7022, "user_id": 7659995, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iZH7M.png?s=128&g=1", "display_name": "MD XF", "link": "https://stackoverflow.com/users/7659995/md-xf"}, "edited": false, "score": 1, "creation_date": 1488396696, "post_id": 42539676, "comment_id": 72216562, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/16928517/converting-a-decimal-to-a-hexadecimal-number\">Converting a decimal to a hexadecimal number</a>"}], "answers": [{"tags": [], "owner": {"reputation": 46, "user_id": 7643346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c194c21d1b8d83fecf7d5aba6fe7f4a?s=128&d=identicon&r=PG&f=1", "display_name": "Rob Johnson", "link": "https://stackoverflow.com/users/7643346/rob-johnson"}, "is_accepted": true, "score": 2, "last_activity_date": 1488397575, "last_edit_date": 1488397575, "creation_date": 1488397034, "answer_id": 42540491, "question_id": 42539676, "link": "https://stackoverflow.com/questions/42539676/incorrect-decimal-to-hexadecimal-conversion-c/42540491#42540491", "title": "Incorrect decimal to hexadecimal conversion - C", "body": "<p>save yourself some time like this</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n// ...\nsprintf(hexStr,\"%X\",decimal);   // or, \"%#X\" if you want prefix\n</code></pre>\n\n<p>unless, this is homework for a programming class.   in which case you should really just work it out on whiteboard or paper, i'm sure you'll see your mistake.</p>\n"}], "owner": {"reputation": 25, "user_id": 7525146, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86a256dc44686e7ce8e5468f0e4f0482?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/7525146/michael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 42540491, "answer_count": 1, "score": 0, "last_activity_date": 1488397575, "creation_date": 1488394242, "question_id": 42539676, "link": "https://stackoverflow.com/questions/42539676/incorrect-decimal-to-hexadecimal-conversion-c", "title": "Incorrect decimal to hexadecimal conversion - C", "body": "<p>I wrote this function from a pseudocode I found, which should convert decimal input into hexadecimal number. Well it does that, but in incorrect order, like for example, for decimal number 195 I get 3C, insted of C3.</p>\n\n<pre><code>int temp=0;\nint i=0;\nwhile(decimal!=0)\n{\n    temp = decimal % 16;\n    if( temp &lt; 10)\n        temp =temp + 48;\n    else\n        temp = temp + 55;\n    array[i++]= temp;\n    decimal = decimal / 16;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1488394264, "post_id": 42539613, "comment_id": 72215041, "body": "In <code>while(c != EOF) { nextChar(); }</code> what is <code>c</code> and what is <code>nextChar</code>?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1488394414, "post_id": 42539613, "comment_id": 72215141, "body": "Did you mean <code>char *findThisString[argc];</code> note the star. Also <code>%c</code> should be <code>%s</code>."}, {"owner": {"reputation": 31, "user_id": 6182202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/523829a0bdfd6a37c3b5702fab057e5b?s=128&d=identicon&r=PG&f=1", "display_name": "Brad", "link": "https://stackoverflow.com/users/6182202/brad"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1488394467, "post_id": 42539613, "comment_id": 72215175, "body": "That is irrelevant right now.  At this point I just need to be able to read the input from the command line.  But right now c is a global int set = to 0 and nextChar is an empty function"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 2, "creation_date": 1488394541, "post_id": 42539613, "comment_id": 72215221, "body": "Perhaps it would help if you delayed incrementing <code>i</code> until you were finished using that value. This is why most people use <code>for</code> loops for this kind of thing."}, {"owner": {"reputation": 31, "user_id": 6182202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/523829a0bdfd6a37c3b5702fab057e5b?s=128&d=identicon&r=PG&f=1", "display_name": "Brad", "link": "https://stackoverflow.com/users/6182202/brad"}, "edited": false, "score": 0, "creation_date": 1488394588, "post_id": 42539613, "comment_id": 72215246, "body": "Even when I changed those two things I get nothing.  It compiles fine, but no output when I run it."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1488394677, "post_id": 42539613, "comment_id": 72215298, "body": "... Although it is not at all clear to me why you feel you need to copy <code>argv</code> into a different array. <code>argv</code> is not going anywhere; it will still be there the next time you need ii."}, {"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 0, "creation_date": 1488394713, "post_id": 42539613, "comment_id": 72215319, "body": "The code as written will give you a slew of warnings -- <i>ALWAYS</i> use <code>-Wall</code> (or the equivalent for your compiler) and <i>pay attention</i> to the warnings."}, {"owner": {"reputation": 31, "user_id": 6182202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/523829a0bdfd6a37c3b5702fab057e5b?s=128&d=identicon&r=PG&f=1", "display_name": "Brad", "link": "https://stackoverflow.com/users/6182202/brad"}, "edited": false, "score": 0, "creation_date": 1488394942, "post_id": 42539613, "comment_id": 72215452, "body": "So right now I can get it to print out ABCDE with the following code but I wanted a new line for each of them.  Each time it is run there is supposed to be a newline."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1488395098, "post_id": 42539613, "comment_id": 72215540, "body": "Well... now you got this far - printing the argument instead of nothing - take a break and look again at what you want to do: examine every character of the argument. BTW please check the number of arguments <code>argc</code> is sufficient."}, {"owner": {"reputation": 31, "user_id": 6182202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/523829a0bdfd6a37c3b5702fab057e5b?s=128&d=identicon&r=PG&f=1", "display_name": "Brad", "link": "https://stackoverflow.com/users/6182202/brad"}, "edited": false, "score": 0, "creation_date": 1488395225, "post_id": 42539613, "comment_id": 72215631, "body": "I thought that was what I was doing when I said findThisString[i] = argv[i]"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1488395454, "post_id": 42539613, "comment_id": 72215779, "body": "<code>findThisString[j] = argv[i][j]</code> ... or as commented, just pick each character out of <code>argv[i]</code> instead of copying it first. It&#39;s still unclear what you doing with <code>findThisString</code>, justing copying what you already have to make the same thing, (but without any string terminator)."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1488395607, "post_id": 42539613, "comment_id": 72215874, "body": "<code>int j = 0; while(argv[1][j] != &#39;\\0&#39;) { printf(&quot;%c\\n&quot;, argv[1][j]); j++; }</code>"}, {"owner": {"reputation": 31, "user_id": 6182202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/523829a0bdfd6a37c3b5702fab057e5b?s=128&d=identicon&r=PG&f=1", "display_name": "Brad", "link": "https://stackoverflow.com/users/6182202/brad"}, "edited": false, "score": 0, "creation_date": 1488396213, "post_id": 42539613, "comment_id": 72216256, "body": "Thank you, this solved all of my problems."}], "answers": [{"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1488394830, "post_id": 42539827, "comment_id": 72215382, "body": "<code>char findThisString[argc];</code> is a <i>variable length array</i> (VLA), although still incorrect"}, {"owner": {"reputation": 699, "user_id": 7562074, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mYiplUjiang/AAAAAAAAAAI/AAAAAAAAASg/IuJhDArg780/photo.jpg?sz=128", "display_name": "Roy Avidan", "link": "https://stackoverflow.com/users/7562074/roy-avidan"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1488394895, "post_id": 42539827, "comment_id": 72215421, "body": "that is dengerous for the compiler...  and will cost an error in any C that is not C99."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1488394975, "post_id": 42539827, "comment_id": 72215467, "body": "The compiler is never dangerous. If the VLA is implemented, it will work, otherwise compiler error."}], "tags": [], "owner": {"reputation": 699, "user_id": 7562074, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mYiplUjiang/AAAAAAAAAAI/AAAAAAAAASg/IuJhDArg780/photo.jpg?sz=128", "display_name": "Roy Avidan", "link": "https://stackoverflow.com/users/7562074/roy-avidan"}, "is_accepted": false, "score": 0, "last_activity_date": 1488394712, "creation_date": 1488394712, "answer_id": 42539827, "question_id": 42539613, "link": "https://stackoverflow.com/questions/42539613/c-programming-reading-chars-from-the-command-line/42539827#42539827", "title": "C Programming Reading Chars from the Command Line", "body": "<p><strong>first:</strong> <code>char findThisString[argc];</code> . don't do staff like that. when you declare an array the compiler will need to know the size of the array to find and save place for the array. use pointers, <code>malloc</code> and <code>free</code>. this an undefined behavior that only allowed in C99.</p>\n\n<p><strong>second:</strong> <code>findThisString[i] = argv[i];</code> . you declared one of them as an array of strings (char*) and another as an array of chars (char). </p>\n\n<p><strong>third:</strong> did you declared <code>nextChar</code> somewhere?? use <code>getchar</code> instead.</p>\n\n<p><strong>forth:</strong> you write <code>int i=0; while(...){...; i++; }</code>. this is not an error but when you are writing this loop like this it is better to write \n<code>for(int i=0; i&lt;argc; i++)</code>. </p>\n"}], "owner": {"reputation": 31, "user_id": 6182202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/523829a0bdfd6a37c3b5702fab057e5b?s=128&d=identicon&r=PG&f=1", "display_name": "Brad", "link": "https://stackoverflow.com/users/6182202/brad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1488394712, "creation_date": 1488394099, "question_id": 42539613, "link": "https://stackoverflow.com/questions/42539613/c-programming-reading-chars-from-the-command-line", "title": "C Programming Reading Chars from the Command Line", "body": "<p>Let's say I type in $./file ABCDEFG into the command line and I want to store chose as individual chars in an array in my file.  Based on my research it should look something like this but it is not giving me any output.  The nextChar is calling a different function and can be ignored here.</p>\n\n<pre><code>int main(int argc, char * argv[]) {\n    int i = 0;\n    char findThisString[argc];\n    while(i &lt; argc){\n        findThisString[i] = argv[i];\n        i++;\n        printf(\"%c \\n\", findThisString[i]);\n    }\n\n    while(c != EOF){\n        nextChar();\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 1431, "user_id": 1258302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r06hH.jpg?s=128&g=1", "display_name": "yellowantphil", "link": "https://stackoverflow.com/users/1258302/yellowantphil"}, "edited": false, "score": 1, "creation_date": 1488392869, "post_id": 42539248, "comment_id": 72214245, "body": "Do you have a debugger? That would tell you which line triggered the segmentation fault."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1488392992, "post_id": 42539248, "comment_id": 72214327, "body": "What&#39;s with the weird alignment and missing indent?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1488393138, "post_id": 42539248, "comment_id": 72214415, "body": "In <code>array = realloc(array, x* sizeof(int));</code> if you intended to extend - and then index - the memory allocation, it does not give any more memory, being the <i>same</i> allocation as the original <code>array = malloc(x * sizeof(int));</code>"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1488393177, "post_id": 42539248, "comment_id": 72214435, "body": "Valgrind will help you narrow down memory access errors like this."}, {"owner": {"reputation": 69, "user_id": 7284540, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/33b6bb2d85eac6941de18968f0e805ec?s=128&d=identicon&r=PG&f=1", "display_name": "LookingWest", "link": "https://stackoverflow.com/users/7284540/lookingwest"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1488393350, "post_id": 42539248, "comment_id": 72214526, "body": "@SouravGhosh Sorry I forgot to post my indented code. I&#39;ve edited it now."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1488393437, "post_id": 42539248, "comment_id": 72214576, "body": "BTW <code>total =</code>  --&gt; <code>total +=</code>"}, {"owner": {"reputation": 69, "user_id": 7284540, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/33b6bb2d85eac6941de18968f0e805ec?s=128&d=identicon&r=PG&f=1", "display_name": "LookingWest", "link": "https://stackoverflow.com/users/7284540/lookingwest"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1488393651, "post_id": 42539248, "comment_id": 72214703, "body": "@BLUEPIXY Why should it be +=? Surely = is the correct way to do it?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1488393853, "post_id": 42539248, "comment_id": 72214805, "body": "Do you only need the last item?"}, {"owner": {"reputation": 69, "user_id": 7284540, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/33b6bb2d85eac6941de18968f0e805ec?s=128&d=identicon&r=PG&f=1", "display_name": "LookingWest", "link": "https://stackoverflow.com/users/7284540/lookingwest"}, "edited": false, "score": 0, "creation_date": 1488394159, "post_id": 42539248, "comment_id": 72214962, "body": "No I need two items."}, {"owner": {"reputation": 69, "user_id": 7284540, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/33b6bb2d85eac6941de18968f0e805ec?s=128&d=identicon&r=PG&f=1", "display_name": "LookingWest", "link": "https://stackoverflow.com/users/7284540/lookingwest"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1488396302, "post_id": 42539248, "comment_id": 72216302, "body": "@WeatherVane So I don&#39;t need to have the realloc in this program?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1488396377, "post_id": 42539248, "comment_id": 72216368, "body": "Only if you need to extend the array."}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1488397164, "post_id": 42539248, "comment_id": 72216854, "body": "<code>foo = realloc(foo, somesize);</code> is <i>always wrong</i>. If <code>realloc</code> fails then it leads to a memory leak."}], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 7284540, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/33b6bb2d85eac6941de18968f0e805ec?s=128&d=identicon&r=PG&f=1", "display_name": "LookingWest", "link": "https://stackoverflow.com/users/7284540/lookingwest"}, "edited": false, "score": 0, "creation_date": 1488393929, "post_id": 42539323, "comment_id": 72214838, "body": "Thanks this fixed my issue! I changed all the array[i] to array[c] however when I now run my program I only get 0.000 as my output? Any idea why this is?"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 3, "last_activity_date": 1488393052, "creation_date": 1488393052, "answer_id": 42539323, "question_id": 42539248, "link": "https://stackoverflow.com/questions/42539248/segmentation-fault-when-using-malloc-and-realloc-with-arrays/42539323#42539323", "title": "Segmentation fault when using malloc and realloc with arrays", "body": "<p>The problem is with</p>\n\n<pre><code> scanf(\"%d\", &amp;array[i])\n</code></pre>\n\n<p>where, the value of <code>i</code> is indeterminate.</p>\n\n<p>To elaborate, <code>i</code> is an uninitialized local variable and unless initialized explicitly, the contents remain indeterminate. Attempt to use that value, in this scenario, would lead to invokes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>.</p>\n\n<p>Even if you initialize <code>i</code>, you never operated on <code>i</code>, so all the changes will be overwritten on a fixed index. You got to take care of this case, too.</p>\n\n<p>Solution: Looking at the code, it appears, you may want to use </p>\n\n<pre><code>scanf(\"%d\", &amp;array[c]);\n</code></pre>\n\n<p>instead.</p>\n"}], "owner": {"reputation": 69, "user_id": 7284540, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/33b6bb2d85eac6941de18968f0e805ec?s=128&d=identicon&r=PG&f=1", "display_name": "LookingWest", "link": "https://stackoverflow.com/users/7284540/lookingwest"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 42539323, "answer_count": 1, "score": 0, "last_activity_date": 1488393322, "creation_date": 1488392795, "last_edit_date": 1488393322, "question_id": 42539248, "link": "https://stackoverflow.com/questions/42539248/segmentation-fault-when-using-malloc-and-realloc-with-arrays", "title": "Segmentation fault when using malloc and realloc with arrays", "body": "<p>I'm fairly new to c and I'm trying to understand and grasp malloc. My program takes an integer x input, then loops until x is met while also taking other integer inputs. I then do various calculations. However I'm getting a segmentation fault and I don't understand why.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;math.h&gt;\n\nint main(void)\n{\n\n    calculations();\n}\n\nvoid calculations()\n{\n\n    int i;\n    int x;\n    int total = 0;\n    double squareRoot;\n    double overall;\n\n    scanf(\"%d\", &amp;x);\n\n    int* array = malloc(x * sizeof(int));\n\n    if (!array) {\n        printf(\"There isn't enough memory \\n\");\n        return;\n    }\n\n    int c = 0;\n\n    while (c &lt; x) {\n\n        scanf(\"%d\", &amp;array[i]);\n\n        total = array[i] * array[i];\n        c++;\n    }\n\n    squareRoot = sqrt(total);\n    array = realloc(array, x * sizeof(int));\n\n    int b = 0;\n\n    while (b &lt; x) {\n\n        overall = array[i] / squareRoot;\n        printf(\"%.3f \", overall);\n\n        b++;\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "data-segment"], "comments": [{"owner": {"reputation": 2393, "user_id": 3103677, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3753239f21e4f964ace455224a7c2b07?s=128&d=identicon&r=PG&f=1", "display_name": "sebenalern", "link": "https://stackoverflow.com/users/3103677/sebenalern"}, "edited": false, "score": 0, "creation_date": 1488392736, "post_id": 42539148, "comment_id": 72214169, "body": "I know it includes uninitialized static variables"}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1488394811, "post_id": 42539148, "comment_id": 72215370, "body": "I will bet the size of the BSS section increases if you compile with the <code>-fno-common</code> flag for gcc .  What&#39;s special about your <code>l</code> variable is that it is a <a href=\"http://stackoverflow.com/questions/3095861/about-tentative-definition\">tentative definitiion</a> , so posssibly there&#39;s no space allocated for that variable in the binary file  until you run the linker."}], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 4361473, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/4352581df1b6af8afc1fbc4bc95f420f?s=128&d=identicon&r=PG&f=1", "display_name": "New_Bee", "link": "https://stackoverflow.com/users/4361473/new-bee"}, "edited": false, "score": 0, "creation_date": 1488393335, "post_id": 42539260, "comment_id": 72214516, "body": "In the above code I have three global variables : k , c and l . Why does bss show size of k and c but not l ?"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 0, "last_activity_date": 1488393561, "last_edit_date": 1495541356, "creation_date": 1488392843, "answer_id": 42539260, "question_id": 42539148, "link": "https://stackoverflow.com/questions/42539148/uninitialized-variables-of-a-object-file-not-showing-in-linux-size-command/42539260#42539260", "title": "uninitialized variables of a object file not showing in linux size command", "body": "<blockquote>\n  <p><em>And I found that whenever I add a global uninitialized variable like int l in above the bss segment stays unchanged.</em></p>\n</blockquote>\n\n<p>That's the expected behaviour. Quoting from <a href=\"https://en.wikipedia.org/wiki/.bss\" rel=\"nofollow noreferrer\">wikipedia</a> article, (<em>emphasis mime</em>)</p>\n\n<blockquote>\n  <p>[...] Since the BSS segment only holds variables that don't have any value yet, it doesn't actually need to store the image of these variables. <strong>The size that BSS will require at runtime is recorded in the object file, but BSS (unlike the data segment) doesn't take up any actual space in the object file.</strong></p>\n</blockquote>\n\n<p>So, it's unlikely that the size for <code>bss</code> will change, upon changing the number of uninitialized variables with static storage. You can refer to <a href=\"https://stackoverflow.com/a/24833649/2173917\">this earlier answer</a> for more elaboration on the <em>why</em> part.</p>\n"}], "owner": {"reputation": 71, "user_id": 4361473, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/4352581df1b6af8afc1fbc4bc95f420f?s=128&d=identicon&r=PG&f=1", "display_name": "New_Bee", "link": "https://stackoverflow.com/users/4361473/new-bee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 132, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1488393593, "creation_date": 1488392473, "last_edit_date": 1488393593, "question_id": 42539148, "link": "https://stackoverflow.com/questions/42539148/uninitialized-variables-of-a-object-file-not-showing-in-linux-size-command", "title": "uninitialized variables of a object file not showing in linux size command", "body": "<p>Created a source file test1.c with the following code :</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\nint x = 15;\nint d = 15;\nint m = 18;\nint k = 0;\nint c = 0;\nint l;\n\nint main()\n{\n    int y = 5;\n    int ma = 10;\n    int am = 10;\n    printf(\"Hello World\\n\");\n    return 0;\n}\n</code></pre>\n\n<p>Compiled the following code with the command : </p>\n\n<pre><code>gcc -c test1.c\n</code></pre>\n\n<p>To check the size of the various segments of memory used the size command :</p>\n\n<pre><code>size test1.o\n</code></pre>\n\n<p>The output that I obtained :</p>\n\n<pre><code>   text    data     bss     dec     hex  filename\n   114       12       8     134      86   test1.o\n</code></pre>\n\n<p>And I found that whenever I add a global uninitialized variable like <em>int l</em> in above the bss segment stays unchanged. The bss segment shows just those variables that are initialized to 0. But according to definition bss segment should contain uninitialized variables.</p>\n\n<p>Also whenever I add a initialized global pointer like : </p>\n\n<pre><code>int *p = &amp;x\n</code></pre>\n\n<p>it increases the size of the data segment by 12 rather than 8 ( which is the size of a integer pointer on my machine ). </p>\n\n<p>What is wrong with my interpretation ?</p>\n"}, {"tags": ["python", "c", "numpy"], "comments": [{"owner": {"reputation": 63648, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1488392616, "post_id": 42539133, "comment_id": 72214086, "body": "Have you looked <a href=\"https://docs.scipy.org/doc/numpy-1.10.1/user/basics.rec.html\" rel=\"nofollow noreferrer\">here</a>? I&#39;m not sure if you can nest like that, or at least, I don&#39;t know how. Also, maybe <a href=\"http://stackoverflow.com/questions/9909399/nested-structured-numpy-array\">this question</a> is related, not sure."}], "answers": [{"tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": true, "score": 1, "last_activity_date": 1488399275, "last_edit_date": 1488399275, "creation_date": 1488398823, "answer_id": 42541042, "question_id": 42539133, "link": "https://stackoverflow.com/questions/42539133/numpy-complicated-data-structure/42541042#42541042", "title": "Numpy complicated data structure", "body": "<p>This is a bit of guess, since I haven't worked with C structs much.</p>\n\n<pre><code>In [125]: SIZE1, SIZE2 = 3,4\n\nIn [127]: dtB=np.dtype([('y',np.uint16),('c',np.uint8,(SIZE2,))])\nIn [128]: np.ones((2,), dtype=dtB)\nOut[128]: \narray([(1, [1, 1, 1, 1]), (1, [1, 1, 1, 1])], \n      dtype=[('y', '&lt;u2'), ('c', 'u1', (4,))])\nIn [129]: _.itemsize\nOut[129]: 6\n</code></pre>\n\n<p>In this definition, each record of this array consists of 6 bytes, 2 for <code>y</code> field, 4 for the <code>c</code> field.</p>\n\n<p>Then nest that in a <code>A</code> definition</p>\n\n<pre><code>In [130]: dtA=np.dtype([('x',np.uint32),('b',dtB,(SIZE1,))])\nIn [131]: np.ones((2,), dtype=dtA)\nOut[131]: \narray([(1, [(1, [1, 1, 1, 1]), (1, [1, 1, 1, 1]), (1, [1, 1, 1, 1])]),\n       (1, [(1, [1, 1, 1, 1]), (1, [1, 1, 1, 1]), (1, [1, 1, 1, 1])])], \n      dtype=[('x', '&lt;u4'), ('b', [('y', '&lt;u2'), ('c', 'u1', (4,))], (3,))])\nIn [132]: _.itemsize\nOut[132]: 22\n</code></pre>\n\n<p>Each record has 4 bytes for the <code>x</code> field, 3*6 for the 3 <code>b</code> elements.</p>\n\n<pre><code>In [133]: __.tobytes()\nOut[133]: b'\\x01\\x00\\x00\\x00\\x01\\x00\\x01\\x01\\x01\\x01\\x01\\x00\\x01\\x01\\x01\\x01\\x01\\x00\\x01\\x01\\x01\\x01\\x01\\x00\\x00\\x00\\x01\\x00\\x01\\x01\\x01\\x01\\x01\\x00\\x01\\x01\\x01\\x01\\x01\\x00\\x01\\x01\\x01\\x01'\n</code></pre>\n\n<p>And trying to make the array more interesting:</p>\n\n<pre><code>In [136]: A['x']=[1,2]\nIn [139]: A['b']['y'] *= 3\nIn [141]: A['b']['c'][0]=2\nIn [142]: A['b']['c'][1]=3\nIn [143]: A\nOut[143]: \narray([(1, [(3, [2, 2, 2, 2]), (3, [2, 2, 2, 2]), (3, [2, 2, 2, 2])]),\n       (2, [(3, [3, 3, 3, 3]), (3, [3, 3, 3, 3]), (3, [3, 3, 3, 3])])], \n      dtype=[('x', '&lt;u4'), ('b', [('y', '&lt;u2'), ('c', 'u1', (4,))], (3,))])\nIn [144]: A[0].tobytes()\nOut[144]: b'\\x01\\x00\\x00\\x00\\x03\\x00\\x02\\x02\\x02\\x02\\x03\\x00\\x02\\x02\\x02\\x02\\x03\\x00\\x02\\x02\\x02\\x02'\n</code></pre>\n\n<p>Are those bytestrings consistent with your <code>c</code> struct?</p>\n"}], "owner": {"reputation": 27, "user_id": 2945836, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Yvjju.jpg?s=128&g=1", "display_name": "neekogi", "link": "https://stackoverflow.com/users/2945836/neekogi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 42541042, "answer_count": 1, "score": 2, "last_activity_date": 1488399275, "creation_date": 1488392409, "question_id": 42539133, "link": "https://stackoverflow.com/questions/42539133/numpy-complicated-data-structure", "title": "Numpy complicated data structure", "body": "<p>I'm quite new to python. What I would like to do is reading some c-like structs from a binary file. The structs, in the c program that creates them, are defined as:</p>\n\n<pre><code>struct B{\n    uint16 y;\n    uint8 c[SIZE2];\n}\n\nstruct A{\n    uint32 x;\n    struct B b[SIZE1];\n}\n</code></pre>\n\n<p>I would like to be able to read all the A-structs using the NumPy package function <code>fromFile</code>, but I have no idea how to call a proper <code>dtype</code> method, like:</p>\n\n<pre><code>record = numpy.dtype([\n    (\"field1\", numpy.uint8),\n    (\"field2\", numpy.uint16),\n    (\"field3\", numpy.uint32)\n])\n</code></pre>\n\n<p>with a such complicated data structure.</p>\n\n<p>Could you please help me writing it? Thank you in advance!</p>\n"}, {"tags": ["c", "arrays", "linux", "string", "fcntl"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1488391647, "post_id": 42538885, "comment_id": 72213494, "body": "<code>printf(&quot;%s&quot;, buff);</code> expects <code>buff[]</code> to be a null character terminated character array, a <i>string</i>.  It is not.  <code>strcmp(buff,&quot; &quot;)</code> will not work either for the same reason."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1488391967, "post_id": 42538885, "comment_id": 72213683, "body": "The affronts to both the language and several standard library function usages in this code are <i>numerous</i>."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1488392174, "post_id": 42538885, "comment_id": 72213818, "body": "Why are you using <code>open</code> and <code>read</code> rather than <code>fopen</code> and <code>getc</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 301, "user_id": 4657037, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/ocr4B.jpg?s=128&g=1", "display_name": "Jose Ortiz", "link": "https://stackoverflow.com/users/4657037/jose-ortiz"}, "edited": false, "score": 0, "creation_date": 1488391922, "post_id": 42538921, "comment_id": 72213661, "body": "@Sourav Ghosh Thank you for this catch! I will keep this in mind in the future. I have tried your solution, but the problem still extist."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 0, "last_activity_date": 1488391999, "last_edit_date": 1488391999, "creation_date": 1488391621, "answer_id": 42538921, "question_id": 42538885, "link": "https://stackoverflow.com/questions/42538885/how-to-store-a-word-using-read/42538921#42538921", "title": "How to store a word using read()?", "body": "<p>The problem is with</p>\n\n<pre><code> printf(\"%s\", buff);\n</code></pre>\n\n<p><code>buff</code> is not a <em>string</em>. You can either</p>\n\n<ul>\n<li>define <code>buff</code> as two element array, <code>char buff[2] = {0};</code> and then use <code>buff</code> as a <em>string</em>.</li>\n<li>define <code>buff</code> as a single <code>char</code> (not an array), pass <code>&amp;buff</code> to <code>read()</code> call and use <code>%c</code> format specifier to print <code>buff</code>.</li>\n<li>use <code>%c</code> and pass <code>buff[0]</code>.</li>\n</ul>\n\n<p>To elaborate, <code>%s</code> format specifier expects an argument as a pointer to a null-terminated <code>char</code> array. In your case, <code>buff</code> is one element too short to hold an input (from <code>read()</code>) as well as the null-terminator. So, due to the property of <code>%s</code>, the out of bound access happens which invokes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 80284, "user_id": 13430, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/QUCnD.png?s=128&g=1", "display_name": "Evan Teran", "link": "https://stackoverflow.com/users/13430/evan-teran"}, "is_accepted": false, "score": 0, "last_activity_date": 1488392120, "last_edit_date": 1488392120, "creation_date": 1488391819, "answer_id": 42538970, "question_id": 42538885, "link": "https://stackoverflow.com/questions/42538885/how-to-store-a-word-using-read/42538970#42538970", "title": "How to store a word using read()?", "body": "<p>I think that <strong>one</strong> of the problems you have is that you are writing <code>word[i] = buff[0]</code>, but <code>word</code> only ever points to a string constant, if anything at all (<code>\"\"</code>, these are things you should <strong>not</strong> write to). You need to create a writable buffer to store the word.</p>\n\n<p>I also don't see you ever resetting <code>i</code> to <code>0</code> when you complete a word, so it will be forever trying to append to the same place.</p>\n\n<p>To address this, you could try changes like the following:</p>\n\n<p><code>char *word;</code> -> <code>char word[256]; /* NOTE: arbitrary max word size here, you will need to ensure that you don't overrun that */</code></p>\n\n<p><code>word = \"\";</code> -> <code>word[i] = '\\0'; i = 0;</code> /* reset the string */</p>\n\n<p><strong>EDIT</strong>: Also, using <code>strcmp</code> to compare a single character is broken here as it is not a null terminated string. Instead, just do something like <code>if(buff[0] == ' ')</code></p>\n\n<p><strong>NOTE</strong>: I don't see you doing anything useful with this <code>word</code> buffer you are trying to assemble, you can probably just chop it entirely.</p>\n"}], "owner": {"reputation": 301, "user_id": 4657037, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/ocr4B.jpg?s=128&g=1", "display_name": "Jose Ortiz", "link": "https://stackoverflow.com/users/4657037/jose-ortiz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 203, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1488392120, "creation_date": 1488391512, "last_edit_date": 1488392049, "question_id": 42538885, "link": "https://stackoverflow.com/questions/42538885/how-to-store-a-word-using-read", "title": "How to store a word using read()?", "body": "<p><strong>About the program:</strong>\nHello, I am writing a simple program to extract content from a .txt file and convert that content into a .csv file. The plan is to look for specific words within that .txt file. This is really just to experiment with the functions open(), read() , write() and close() in C on linux.</p>\n\n<p><strong>The Problem:</strong>\nOn line 34 of the code, I try to store each character coming in to form a word. After extracting a \" \" from the .txt, it will clear the word buffer.\nProblem is, I get a segmentation fault (core dump). I am not sure how to fix  This problem. I tried using GDB to debug and find the seg fault at line 34. </p>\n\n<p>Thank you in advance</p>\n\n<p><strong>The Code</strong></p>\n\n<pre><code>/* \nProgram to convert content inside a .txt file \ninto a .csv file.\n*/\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;fcntl.h&gt;      // open()\n#include &lt;unistd.h&gt;     // For read(), write() an close()\n#include &lt;string.h&gt;     // Used for strcmp()\n\nint main(int argc, char **argv){\n\n    int samp = open(\"sample.txt\", O_RDONLY);        // This is Opening a file to work with. @param char  *filename,  @param int  access,  @param int  permission\n    int csv = open(\"sample.csv\", O_WRONLY | O_CREAT, 0600);     // Used to create a file. \n\n    char *word;         // Stores each word \n    char buff[1];       // Holds 1 character of the file\n    int i = 0;          // Counter for word buffer\n\n    /* read(handle (file), buffer, size (bytes)) */\n    /* write(handle (file), buffer, size (bytes)) */\n\n    while(read(samp, buff, 1) != 0){    // Loops through file, char by char \n        printf(\"%s\", buff);             // prints current character in buff\n\n        if(strcmp(buff,\" \") == 0){      // To create csv, every \" \" found, we add a \",\" \n            write(csv, \",\", 1);         // If \" \" is found, we write a comma to csv file\n            word = \"\";                  // Clear word buffer\n        }\n\n        else{\n            write(csv, buff, 1);        // Write value of buff in csv file\n            word[i] = buff[0];              // Copy each characer in buff to word\n        }\n\n        i++;\n    }\n\n    close(samp);    // Closig .txt file\n    close(csv);     // Closing .csv file\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "arm", "embedded", "soc"], "comments": [{"owner": {"reputation": 47412, "user_id": 3141234, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/78b45a835031f4ce03a6653b3262b5d3?s=128&d=identicon&r=PG", "display_name": "Alexander", "link": "https://stackoverflow.com/users/3141234/alexander"}, "edited": false, "score": 0, "creation_date": 1488391312, "post_id": 42538788, "comment_id": 72213294, "body": "Are these memory banks accessed via some time-sensative interface?"}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1488392006, "post_id": 42538788, "comment_id": 72213710, "body": "what chip is this the arm part is probably irrelevant it is something in the chip.  is this a SAMD21?"}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1488392028, "post_id": 42538788, "comment_id": 72213731, "body": "20.8 sounds both strange and too fast for being a default frequency 4,8,16 are more typical."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1488392079, "post_id": 42538788, "comment_id": 72213771, "body": "and dont know of a pll you can just jam something in and change frequency, generally there is a procedure with polling points to wait for things to settle."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1488392116, "post_id": 42538788, "comment_id": 72213790, "body": "and you have ram at address 0x1000? in a cortex-m?"}, {"owner": {"reputation": 7440, "user_id": 157344, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/b403786b380b1b5a1ed25f144df103e6?s=128&d=identicon&r=PG", "display_name": "Freddie Chopin", "link": "https://stackoverflow.com/users/157344/freddie-chopin"}, "edited": false, "score": 0, "creation_date": 1488393263, "post_id": 42538788, "comment_id": 72214478, "body": "What is &quot;output&quot;? UART? Trace? debugger? Array? RAM?"}, {"owner": {"reputation": 21, "user_id": 7567966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/224b218759a2298b9472831518605db6?s=128&d=identicon&r=PG&f=1", "display_name": "SSR", "link": "https://stackoverflow.com/users/7567966/ssr"}, "reply_to_user": {"reputation": 47412, "user_id": 3141234, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/78b45a835031f4ce03a6653b3262b5d3?s=128&d=identicon&r=PG", "display_name": "Alexander", "link": "https://stackoverflow.com/users/3141234/alexander"}, "edited": false, "score": 0, "creation_date": 1488395909, "post_id": 42538788, "comment_id": 72216054, "body": "@Ale I&#39;m reading via USB-to-SPI (cp2130) bridge controller"}, {"owner": {"reputation": 21, "user_id": 7567966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/224b218759a2298b9472831518605db6?s=128&d=identicon&r=PG&f=1", "display_name": "SSR", "link": "https://stackoverflow.com/users/7567966/ssr"}, "reply_to_user": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1488396852, "post_id": 42538788, "comment_id": 72216651, "body": "@old_timer, 1. No, it is not SAMD21, but the SoC design is similar to that. 2. The hardware that I&#39;m working, can be configured with in a discrete range of clock frequencies. Based on some parameters, I can easily adjust the processor to desired frequency (Other possible frequencies are approximately 10.4, 5.2, 3.3 etc.) 3. I even gave a long delay (1 sec) to check the settling time, but no use. 4. It is SRAM by the way not the regs on ARM."}, {"owner": {"reputation": 21, "user_id": 7567966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/224b218759a2298b9472831518605db6?s=128&d=identicon&r=PG&f=1", "display_name": "SSR", "link": "https://stackoverflow.com/users/7567966/ssr"}, "reply_to_user": {"reputation": 7440, "user_id": 157344, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/b403786b380b1b5a1ed25f144df103e6?s=128&d=identicon&r=PG", "display_name": "Freddie Chopin", "link": "https://stackoverflow.com/users/157344/freddie-chopin"}, "edited": false, "score": 0, "creation_date": 1488396977, "post_id": 42538788, "comment_id": 72216734, "body": "@FreddieChopin I&#39;m using USB-to-SPI based (cp2130) bridge controller to debug and read the values at that registers. It is a 32bit register, by the way. Thanks"}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1488397755, "post_id": 42538788, "comment_id": 72217156, "body": "the atmel design in the samd21 had rules for crossing clock domains and polling required for crossing those domains.  are you in that situation again assuming it is not a pll setup issue?"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 7567966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/224b218759a2298b9472831518605db6?s=128&d=identicon&r=PG&f=1", "display_name": "SSR", "link": "https://stackoverflow.com/users/7567966/ssr"}, "edited": false, "score": 0, "creation_date": 1490788485, "post_id": 42541713, "comment_id": 73266616, "body": "Hi @Clifford, Thanks for your answer. Can you suggest or share information about any hardware platform, that follows these steps in switching the PLL-frequency?"}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 21, "user_id": 7567966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/224b218759a2298b9472831518605db6?s=128&d=identicon&r=PG&f=1", "display_name": "SSR", "link": "https://stackoverflow.com/users/7567966/ssr"}, "edited": false, "score": 0, "creation_date": 1490799292, "post_id": 42541713, "comment_id": 73275495, "body": "@SSR : I am not sure what you are asking for; the clock switch sequence is to be implemented in software, not hardware. Given that you already have hardware, I am not sure how other examples would help.  It would be far simpler if you just clarified exactly what SoC you are using, so there would be no need to be quite so general."}], "tags": [], "owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "is_accepted": false, "score": 3, "last_activity_date": 1488403326, "last_edit_date": 1488403326, "creation_date": 1488401143, "answer_id": 42541713, "question_id": 42538788, "link": "https://stackoverflow.com/questions/42538788/under-frequency-causing-data-corruption-on-arm-cortexm0-based-soc/42541713#42541713", "title": "Under frequency causing data corruption on ARM CortexM0+ based SoC?", "body": "<p>Cortex-M0+ does not define a PLL - that is part specific, so since you have not divulged the specific part it is hard to advise specifically.</p>\n\n<p>Normally, following a PLL frequency change it is necessary to wait for the PLL-lock to be achieved before switching to the PLL clock and continuing execution - in your example the memory access occurs <em>while</em> the PLL is in use and unstable and no doubt still to achieve lock.  </p>\n\n<p>Depending on the specific part and the nature of the clock source, PLL lock may take several tens of microseconds. Normally the PLL will have a status register that should be polled for lock status <em>before</em> switching to the PLL clock.  </p>\n\n<p>The normal clock switching process is:</p>\n\n<ol>\n<li>Switch to a primary fixed frequency oscillator</li>\n<li>Set the PLL configuration</li>\n<li>Wait for PLL lock</li>\n<li>Switch to the PLL oscillator</li>\n</ol>\n"}], "owner": {"reputation": 21, "user_id": 7567966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/224b218759a2298b9472831518605db6?s=128&d=identicon&r=PG&f=1", "display_name": "SSR", "link": "https://stackoverflow.com/users/7567966/ssr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1488403326, "creation_date": 1488391161, "last_edit_date": 1488400031, "question_id": 42538788, "link": "https://stackoverflow.com/questions/42538788/under-frequency-causing-data-corruption-on-arm-cortexm0-based-soc", "title": "Under frequency causing data corruption on ARM CortexM0+ based SoC?", "body": "<p>I'm working on a <code>SoC</code> test board, based on ARM Cortex M0+. The <code>SoC</code> is equipped with 5 memory banks and is capable of voltage and frequency scaling. But the issue i'm facing is, when ever I write some data/value to r/w registers at some address with some frequency lower than default frequency (20.8 MHz), is causing data corruption in such a way that each value is being written at multiple register addresses, despite of one value at one address. Code looks as follows:</p>\n\n<pre><code>int main(void) \n{\n    //AP_PLL-&gt;CLKREF_RM = 0x000104f6; //32768 * 0x4F6 =&gt; 41.7 MHz; \n    //AP_PLL-&gt;CLKREF_RM = 0x0001027b; //32768 * 0x27b =&gt; 20.8 MHz;\n    AP_PLL-&gt;CLKREF_RM = 0x00010140; //32768 * 0x4F6 = 10.8 MHz; \n\n    for (int i = 0; i &lt; 200; i++)\n    {\n        *((unsigned int*) 0x1000 + i) = i;\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>output when running at 10 Mhz : <code>0L, 0L, 1L, 1L, 1L, 1L, 2L, 2L, 3L, 3L, 4L, 4L, 4L, 4L, 4L, 5L, 5L, 6L, 6L, 6L, 6L</code></p>\n\n<p>expected output : <code>0L, 1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L</code></p>\n"}, {"tags": ["c++", "c", "visual-studio-2013"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1488391253, "post_id": 42538709, "comment_id": 72213267, "body": "Cannot reproduce in MSVC 2015. Is this the <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a> that shows the problem?"}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 1, "creation_date": 1488391326, "post_id": 42538709, "comment_id": 72213302, "body": "I fail to reproduce the claimed behavior with Visual C++ 2015 update 3."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1488391367, "post_id": 42538709, "comment_id": 72213328, "body": "@WeatherVane Checking on VS 2013."}, {"owner": {"reputation": 143, "user_id": 7642609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd518fbe65cd6ae295871173b1a9a7ff?s=128&d=identicon&r=PG&f=1", "display_name": "AvD", "link": "https://stackoverflow.com/users/7642609/avd"}, "reply_to_user": {"reputation": 1431, "user_id": 1258302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r06hH.jpg?s=128&g=1", "display_name": "yellowantphil", "link": "https://stackoverflow.com/users/1258302/yellowantphil"}, "edited": false, "score": 0, "creation_date": 1488391484, "post_id": 42538709, "comment_id": 72213397, "body": "@yellowantphil Compiling as C or as C++ both gave the same behavior,"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 1431, "user_id": 1258302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r06hH.jpg?s=128&g=1", "display_name": "yellowantphil", "link": "https://stackoverflow.com/users/1258302/yellowantphil"}, "edited": false, "score": 0, "creation_date": 1488391707, "post_id": 42538709, "comment_id": 72213542, "body": "@yellowantphil The last few editions should have become much better with C99 support."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1488391728, "post_id": 42538709, "comment_id": 72213557, "body": "Just wanted to say, running this through -O2 on clang 3.9.1 (I know, unrelated to the question, but I was curious) yields a <a href=\"http://pastebin.com/SMW3Wb6x\" rel=\"nofollow noreferrer\">pretty funny asm result</a>. Whoever the team is that did their loop analysis should be proud =)"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 1, "creation_date": 1488391741, "post_id": 42538709, "comment_id": 72213565, "body": "Tested on both VS15 and VS13, both as cpp and c. Each time the output is what is expected. Could you maybe provide us with the exact build number of the compiler. The generated assembly would also be fun to look at."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 1431, "user_id": 1258302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r06hH.jpg?s=128&g=1", "display_name": "yellowantphil", "link": "https://stackoverflow.com/users/1258302/yellowantphil"}, "edited": false, "score": 0, "creation_date": 1488392023, "post_id": 42538709, "comment_id": 72213724, "body": "@yellowantphil: I don&#39;t know why you were annoyed. VS2013 had rather extensive core language support for C99, especially by Update 5."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1488392076, "post_id": 42538709, "comment_id": 72213767, "body": "VS2013 Update 5 does indeed exhibit this bug in Release mode in both x64 and Win32 configurations. Exactly as the OP described."}, {"owner": {"reputation": 143, "user_id": 7642609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd518fbe65cd6ae295871173b1a9a7ff?s=128&d=identicon&r=PG&f=1", "display_name": "AvD", "link": "https://stackoverflow.com/users/7642609/avd"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1488392079, "post_id": 42538709, "comment_id": 72213769, "body": "@Ajay Brahmakshatriya I have this:Microsoft Visual Studio Professional 2013 Version 12.0.40629.00 Update 5     Microsoft.NET Framework Version 4.6.01038     Visual C++ 2013   06177 - 004 - 0447006 - 02743"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1488392699, "post_id": 42538709, "comment_id": 72214141, "body": "Off topic: <code>for (int y = row; y &lt;= row; ++y)</code> looks wacky. Give you one iteration, but there are clearer ways to write this. I assume this is an artifact of forcing the bug?"}, {"owner": {"reputation": 143, "user_id": 7642609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd518fbe65cd6ae295871173b1a9a7ff?s=128&d=identicon&r=PG&f=1", "display_name": "AvD", "link": "https://stackoverflow.com/users/7642609/avd"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1488392987, "post_id": 42538709, "comment_id": 72214320, "body": "@user4581301 I know..., but the bug is also there if you have more than 1 iterations. I just wanted to show a &quot;minimal&quot; example."}, {"owner": {"reputation": 143, "user_id": 7642609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd518fbe65cd6ae295871173b1a9a7ff?s=128&d=identicon&r=PG&f=1", "display_name": "AvD", "link": "https://stackoverflow.com/users/7642609/avd"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1488393557, "post_id": 42538709, "comment_id": 72214655, "body": "@Weather Vane, Yes this definitely is the minimal illustration of the problem that I could make, and please note that the question is not about VS 2015"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1488394075, "post_id": 42538709, "comment_id": 72214902, "body": "@AvD after that became clear, I upvoted your question. Those accusing a compiler of having a bug must be very sure of their ground, since the bug is usually in the code."}], "answers": [{"comments": [{"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1488393617, "post_id": 42539224, "comment_id": 72214683, "body": "Also the fact that it is adding 12 to eax instead of 4 hints that the constant evaluation considers y to be 1 instead of 0."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1488393754, "post_id": 42539224, "comment_id": 72214748, "body": "BTW to me it appears that it has performed a loop interchange. It is the outer loop that is being executed 3 times. The inner loop(of y) is being executed one time correctly. But the y is just taking the wrong value."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1488393797, "post_id": 42539224, "comment_id": 72214765, "body": "can I ask you to print some more values from A? I suspect it is going to print 11,0,0,11,0,0,11,0,0."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1488393905, "post_id": 42539224, "comment_id": 72214826, "body": "@Ajay Brahmakshatriya: Yes, it is adding 12 for the same reason: some how it believes that inner cycle should not iterate. So it prepares for the next iteration of the outer cycle. It just makes no sense."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1488393978, "post_id": 42539224, "comment_id": 72214864, "body": "No, I think it does realize that the inner loop is going to execute once. But it just assumes the wrong value for y. Instead of assuming 0 it assumes 1."}, {"owner": {"reputation": 143, "user_id": 7642609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd518fbe65cd6ae295871173b1a9a7ff?s=128&d=identicon&r=PG&f=1", "display_name": "AvD", "link": "https://stackoverflow.com/users/7642609/avd"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1488394063, "post_id": 42539224, "comment_id": 72214899, "body": "@Ajay Brahmakshatriya, No, when I print 9 values I get 11,0,0,0,0,0,0,0,0"}, {"owner": {"reputation": 143, "user_id": 7642609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd518fbe65cd6ae295871173b1a9a7ff?s=128&d=identicon&r=PG&f=1", "display_name": "AvD", "link": "https://stackoverflow.com/users/7642609/avd"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1488394201, "post_id": 42539224, "comment_id": 72214995, "body": "@Ajay Brahmakshatriya, when I execute the outer loop 3 times, the inner loop is always executed only 1 time, so then I do get 11,0,0,11,0,0,11,0,0"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1488394448, "post_id": 42539224, "comment_id": 72215163, "body": "So there are multiple bugs here. The unnecessary checking of esi for no reason which causes the loop to terminate and the improper calculation of the offsets into A (should be eax +=4 instead on 12)."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1488394500, "post_id": 42539224, "comment_id": 72215196, "body": "Wow, they screwed up really bad."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1488395237, "post_id": 42539224, "comment_id": 72215635, "body": "@Ajay Brahmakshatriya: The +=12 apparently comes from the fact that this is the original <i>outer</i> cycle, which is supposed to skip 12 bytes every iteration (if it were to make more than 1). I omitted the code that re-calculated the value of <code>eax</code> before each run of inner disassembly cycle. That recalculation makes it correct (i.e. justifies +=12). I re-included that code now."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1488395413, "post_id": 42539224, "comment_id": 72215757, "body": "That makes sense. I was confused because I couldn&#39;t see the recalculation code. Thanks for the clarification."}, {"owner": {"reputation": 143, "user_id": 7642609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd518fbe65cd6ae295871173b1a9a7ff?s=128&d=identicon&r=PG&f=1", "display_name": "AvD", "link": "https://stackoverflow.com/users/7642609/avd"}, "edited": false, "score": 0, "creation_date": 1488396048, "post_id": 42539224, "comment_id": 72216146, "body": "I was most surprised that A[index] and *(A+index) behave differently. Shouldn&#39;t the parser already guarantee identical behavior?"}, {"owner": {"reputation": 143, "user_id": 7642609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd518fbe65cd6ae295871173b1a9a7ff?s=128&d=identicon&r=PG&f=1", "display_name": "AvD", "link": "https://stackoverflow.com/users/7642609/avd"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1488399435, "post_id": 42539224, "comment_id": 72218167, "body": "@Ajay Brahmakshatriya, about the compiler version: I use the same compiler as you: <code>Microsoft (R) C&#47;C++ Optimizing Compiler Version 18.00.40629 for x86</code>. But do not forget to optimize for speed /O2 if you want to see the bug..."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 143, "user_id": 7642609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd518fbe65cd6ae295871173b1a9a7ff?s=128&d=identicon&r=PG&f=1", "display_name": "AvD", "link": "https://stackoverflow.com/users/7642609/avd"}, "edited": false, "score": 0, "creation_date": 1488425941, "post_id": 42539224, "comment_id": 72228243, "body": "@AvD, oh yes! Also similar result on Win64 too. Just a change of registers."}], "tags": [], "owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "is_accepted": true, "score": 9, "last_activity_date": 1488395813, "last_edit_date": 1488395813, "creation_date": 1488392710, "answer_id": 42539224, "question_id": 42538709, "link": "https://stackoverflow.com/questions/42538709/possible-c-c-compiler-bug-in-visual-studio-2013/42539224#42539224", "title": "Possible C/C++ compiler bug in Visual Studio 2013", "body": "<p>Yes, it appears to be a compiler bug. In Win32 version of the code the compiler uses register <code>esi</code> to represent <code>y</code> and register <code>edx</code> to represent <code>x</code>. As @Ajay Brahmakshatriya correctly noted in the comments, it appears that the compiler performed an attempt to exchange the cycles (swap the outer with the inner), but ended up with incorrect code. The very last conditional jump instruction, which is supposed to represent the [exchanged] inner cycle, for some reason transfers control to a location that checks <code>esi</code> as well. That check ends iterations prematurely.</p>\n\n<pre><code>0018206B  xor         esi,esi             ; This is `y`\n0018206D  xor         edx,edx             ; This is `x`\n...\n00182070  test        esi,esi  \n00182072  jg          main+5Ch (018209Ch) ; Exit from the outer cycle?\n\n00182074  lea         eax,[edx+esi*2]     ; Recalculate the starting storage location\n00182077  add         eax,esi             ; for the next cycle:\n00182079  lea         ecx,[A]             ; eax = esi * 3 + edx\n0018207F  lea         eax,[ecx+eax*4]     ; eax = &amp;A[eax]\n...\n00182082  mov         ecx,1               ; It is not exactly clear to me what this is \n00182087  sub         ecx,esi             ; supposed to do, but when `esi` is `0`, it \n00182089  add         esi,ecx             ; leaves `ecx` as 1, which is correct \n                                          ; number of iterations for outer cycle\n...\n00182090  mov         dword ptr [eax],0Bh ; Storing the value\n00182096  lea         eax,[eax+0Ch]       ; Updating the pointer for the next storage location \n00182099  dec         ecx  \n0018209A  jne         main+50h (0182090h) ; Outer cycle [exchanged]\n\n0018209C  inc         edx  \n0018209D  cmp         edx,3  \n001820A0  jl          main+30h (0182070h) ; Inner cycle [exchanged]: for some reason it\n                                          ; jumps to `test esi,esi`, which is what\n                                          ; suddenly terminates the iterations\n</code></pre>\n"}], "owner": {"reputation": 143, "user_id": 7642609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd518fbe65cd6ae295871173b1a9a7ff?s=128&d=identicon&r=PG&f=1", "display_name": "AvD", "link": "https://stackoverflow.com/users/7642609/avd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 461, "favorite_count": 0, "accepted_answer_id": 42539224, "answer_count": 1, "score": 14, "last_activity_date": 1488395813, "creation_date": 1488390908, "question_id": 42538709, "link": "https://stackoverflow.com/questions/42538709/possible-c-c-compiler-bug-in-visual-studio-2013", "title": "Possible C/C++ compiler bug in Visual Studio 2013", "body": "<p>The following C or C++ code should have as output \"11,11,11,\"\nhowever using Visual Studio Professional 2013 (Version 12.0.40629.00 Update 5) the output is \"11,0,0,\"! This only occurs in a release build, and disappears when optimization is turned off. Is this a compiler bug?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n    int A[100] = { 0 };\n    int row = 0;   // BUG disappears if we make this const or short or char...\n    int ncols = 3; // BUG disappears if we make this const or short or char...\n\n    for (int y = row; y &lt;= row; ++y)\n    {\n        for (int x = 0; x &lt; ncols; ++x)\n        {\n            const int index = y * ncols + x;\n\n            //A[index] = 11;           // (no bug !)\n            *(A + index) = 11;       // BUG!!!\n            //*(A + y*ncols+x) = 11;   // (no bug !)\n            //*(A + (y*ncols+x)) = 11; // BUG!!!\n        }\n    }\n\n    for (int x = 0; x &lt; ncols; ++x)\n    {\n        printf(\"%d,\", A[x]);\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "loops", "vector"], "answers": [{"tags": [], "owner": {"reputation": 22814, "user_id": 182660, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/75e48a7020624657e5da6033590030ee?s=128&d=identicon&r=PG", "display_name": "SergGr", "link": "https://stackoverflow.com/users/182660/serggr"}, "is_accepted": false, "score": 0, "last_activity_date": 1488395727, "creation_date": 1488395727, "answer_id": 42540121, "question_id": 42538333, "link": "https://stackoverflow.com/questions/42538333/adding-elements-from-a-1d-vector-to-a-2d-vector/42540121#42540121", "title": "Adding elements from a 1D vector to a 2D vector", "body": "<p>First of all, do you initialize your redVec and each inner vector(!) with proper sizes? Secondly, your innermost loops does strange thing. You probably want something like</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>for(int i = 0, r = 0; r &lt; numRows; ++r){\n    for(int c = 0; c &lt; numCols; ++c){ \n        redVec[r][c] = geoData.at(i);\n        i++; // increase i each time new cell is filled\n    }\n}\n</code></pre>\n\n<p>or even if you don't created vectors of required sizes beforehand</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>for(int i = 0, r = 0; r &lt; numRows; ++r){\n    vector&lt;whatever_type_you_have&gt; row = vector...\n    for(int c = 0; c &lt; numCols; ++c){ \n        row.push_back(geoData.at(i))\n        i++; // increase i each time new cell is filled\n    }\n    redVec.push_back(row)\n}\n</code></pre>\n"}], "owner": {"reputation": 415, "user_id": 7572374, "user_type": "registered", "accept_rate": 14, "profile_image": "https://lh4.googleusercontent.com/-AYl8FWoZXiM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rex8ZiUs8QhOKV1o_7S5MZYVefZzw/mo/photo.jpg?sz=128", "display_name": "new_programmer_22", "link": "https://stackoverflow.com/users/7572374/new-programmer-22"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 121, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1488402132, "creation_date": 1488389674, "last_edit_date": 1488402132, "question_id": 42538333, "link": "https://stackoverflow.com/questions/42538333/adding-elements-from-a-1d-vector-to-a-2d-vector", "title": "Adding elements from a 1D vector to a 2D vector", "body": "<p>I have a 1D vector named geoData and then I have a 2D vector called redVec with user defined rows and columns. I want to add the elements from the 1D vector into the 2D vector but I get a bad access error in xCode.</p>\n\n<pre><code>for(int r = 0; r &lt; numRows; ++r){\n    for(int c = 0; c &lt; numCols; ++c){\n        for(int i = 0; i &lt; geoData.size(); ++i){\n            redVec[r][c] = geoData.at(i);\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "makefile"], "comments": [{"owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 1, "creation_date": 1488411737, "post_id": 42538327, "comment_id": 72224216, "body": "Do <code>io.c</code> and <code>io_asm.s</code> use <code>strcpy</code>? If you haven&#39;t written <code>strcpy</code> yet, then what makes you think that anything is wrong with your paths?"}, {"owner": {"reputation": 559, "user_id": 5941157, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh5.googleusercontent.com/-a-UIp5V6iDM/AAAAAAAAAAI/AAAAAAAAABk/pXUQzjM0qCg/photo.jpg?sz=128", "display_name": "Michael Stachowsky", "link": "https://stackoverflow.com/users/5941157/michael-stachowsky"}, "reply_to_user": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 0, "creation_date": 1488420061, "post_id": 42538327, "comment_id": 72226595, "body": "Strcpy is what I was trying to link in. I wrote string.h and was trying to make it work. It resides in sb_libc folder."}, {"owner": {"reputation": 1589, "user_id": 1221106, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/446a06be40a16b516e0b9dc03cecd984?s=128&d=identicon&r=PG", "display_name": "igagis", "link": "https://stackoverflow.com/users/1221106/igagis"}, "edited": false, "score": 0, "creation_date": 1488458885, "post_id": 42538327, "comment_id": 72246133, "body": "You need to implement your own <code>strcpy</code> since you are not using standard standard c library"}, {"owner": {"reputation": 559, "user_id": 5941157, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh5.googleusercontent.com/-a-UIp5V6iDM/AAAAAAAAAAI/AAAAAAAAABk/pXUQzjM0qCg/photo.jpg?sz=128", "display_name": "Michael Stachowsky", "link": "https://stackoverflow.com/users/5941157/michael-stachowsky"}, "edited": false, "score": 0, "creation_date": 1488460392, "post_id": 42538327, "comment_id": 72247132, "body": "Yes, I know. strcpy is the function I wrote, and I&#39;m now trying to link it in. It is in the folder ./sb_libc, which is a folder that resides in my kernel&#39;s directory. The function is implemented in string.c, which I wrote and tried to link in but it doesn&#39;t work"}, {"owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 0, "creation_date": 1488594383, "post_id": 42538327, "comment_id": 72314737, "body": "What <code>ld</code> command do you see Make execute? What happens if you invoke the <code>ld</code> on the command line? You must <i>simplify</i> this problem."}], "owner": {"reputation": 559, "user_id": 5941157, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh5.googleusercontent.com/-a-UIp5V6iDM/AAAAAAAAAAI/AAAAAAAAABk/pXUQzjM0qCg/photo.jpg?sz=128", "display_name": "Michael Stachowsky", "link": "https://stackoverflow.com/users/5941157/michael-stachowsky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 192, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1488389643, "creation_date": 1488389643, "question_id": 42538327, "link": "https://stackoverflow.com/questions/42538327/makefile-undefined-reference-to-library", "title": "Makefile undefined reference to library", "body": "<p>I know this is a very common question, but no matter where I looked I couldn't find a solution that worked.</p>\n\n<p>I am writing an OS, and am also writing my own version of the c standard library, purely as a general interest type thing.  I have my c standard library, which currently consists only of an incomplete string.h, in the sb_libc folder in the kernel's main directory.  I can't use make to actually make the kernel if it includes my string.h header.  I keep getting \"undefined reference to strcpy\".  In order to test if I could include <em>anything</em>, I wrote two additional files, io.c and io_asm.s, and put their *.o files into the kernel's main directory.  I can link those with the kernel just fine.  Clearly, my library search paths are wrong in my make file.  I'll post it below.  If anyone can give me an idea on what I'm doing wrong, that would be great.</p>\n\n<pre><code>OBJECTS = loader.o io.o io_asm.o kmain.o ./sb_libc/string.o\nCC = gcc\nCFLAGS =  -e kmain -m32 -nostdlib -nostdinc -fno-builtin -fno-stack-protector -nostartfiles -nodefaultlibs -Wall -Wextra -Werror -c -I./sb_libc/ -L./sb_libc/\nLDFLAGS =  -T link.ld -melf_i386 -I./sb_libc/ -L./sb_libc/\nAS = nasm\nASFLAGS = -f elf\n\nall: kernel.elf\n\nkernel.elf: $(OBJECTS)\n    ld $(LDFLAGS) $(OBJECTS) -o kernel.elf\n\nos.iso: kernel.elf\n    cp kernel.elf iso/boot/kernel.elf\n    genisoimage -R -b boot/grub/stage2_eltorito -no-emul-boot -boot-load-size 4 -A os -input-charset utf8 -quiet -boot-info-table -o os.iso iso\n\nrun: os.iso\n    bochs -f bochsrc.txt -q\n\n%.o: %.c\n    $(CC) $(CFLAGS)  $&lt; -o $@\n\n%.o: %.s\n    $(AS) $(ASFLAGS) $&lt; -o $@\n\nclean:\n    rm -rf *.o kernel.elf os.iso\n</code></pre>\n"}, {"tags": ["c", "argv"], "comments": [{"owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "edited": false, "score": 1, "creation_date": 1488389553, "post_id": 42538276, "comment_id": 72212235, "body": "What problems or difficulties are you encountering?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1488389558, "post_id": 42538276, "comment_id": 72212236, "body": "Are you using C or C++?  This code looks like C.  If you are being taught this is C++ then you might want to look for a new place to learn C++."}, {"owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "edited": false, "score": 1, "creation_date": 1488389856, "post_id": 42538276, "comment_id": 72212418, "body": "When you compile this program, you are getting an error message.  <b><i>Shame</i></b> on you for not putting the error message in your question."}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 6068874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c13b6b30b7a6626c7527940e8f1049d?s=128&d=identicon&r=PG&f=1", "display_name": "R.A", "link": "https://stackoverflow.com/users/6068874/r-a"}, "edited": false, "score": 0, "creation_date": 1488391923, "post_id": 42538323, "comment_id": 72213662, "body": "my problem is not this I want to pass a text file in argv[1]"}, {"owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "reply_to_user": {"reputation": 39, "user_id": 6068874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c13b6b30b7a6626c7527940e8f1049d?s=128&d=identicon&r=PG&f=1", "display_name": "R.A", "link": "https://stackoverflow.com/users/6068874/r-a"}, "edited": false, "score": 0, "creation_date": 1488394299, "post_id": 42538323, "comment_id": 72215065, "body": "Your code will not even compile as is.  You must fix compile errors before you can work on proper behavior."}, {"owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "reply_to_user": {"reputation": 39, "user_id": 6068874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c13b6b30b7a6626c7527940e8f1049d?s=128&d=identicon&r=PG&f=1", "display_name": "R.A", "link": "https://stackoverflow.com/users/6068874/r-a"}, "edited": false, "score": 0, "creation_date": 1488397427, "post_id": 42538323, "comment_id": 72216981, "body": "Is this the question you really mean to be asking?? <a href=\"http://stackoverflow.com/questions/298708/debugging-with-command-line-parameters-in-visual-studio\" title=\"debugging with command line parameters in visual studio\">stackoverflow.com/questions/298708/&hellip;</a>"}], "tags": [], "owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "is_accepted": false, "score": 2, "last_activity_date": 1488389633, "creation_date": 1488389633, "answer_id": 42538323, "question_id": 42538276, "link": "https://stackoverflow.com/questions/42538276/put-a-file-in-argv-of-main-function/42538323#42538323", "title": "put a file in argv[] of main function", "body": "<pre><code>if((in=fopen(arg[1],\"r\"))==NULL);\n</code></pre>\n\n<ol>\n<li><p>if-statements do <strong>NOT</strong> end with a semi-colon. That makes this a \"do-nothing\" statement</p></li>\n<li><p><code>arg</code> is never declared anywhere (you have declared <code>argc</code> and <code>argv</code>, but not <code>arg</code>)</p></li>\n</ol>\n"}], "owner": {"reputation": 39, "user_id": 6068874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c13b6b30b7a6626c7527940e8f1049d?s=128&d=identicon&r=PG&f=1", "display_name": "R.A", "link": "https://stackoverflow.com/users/6068874/r-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 276, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1488391875, "creation_date": 1488389474, "last_edit_date": 1488391875, "question_id": 42538276, "link": "https://stackoverflow.com/questions/42538276/put-a-file-in-argv-of-main-function", "title": "put a file in argv[] of main function", "body": "<p>hi I'm trying to write a program like this in visual C++</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;conio.h&gt;\n\nint main(int argc, char *argv[])\n{\n    FILE *in;\n    char ch;\n    int openbracket=0,closebracket=0;\n\n    if(argc!=2)\n    {\n        printf(\"the number of arguments is incorrect\");\n        getch();\n        exit(1);\n    }\n\n    if((in=fopen(arg[1],\"r\"))==NULL)\n    {\n        fputs(\"Error\",stderr);  exit(1);\n    }\n\n    ch=getc(in);\n\n    while(!feof(in))\n    {\n\n        if(ch=='{')\n            openbracket++;\n\n        else if(ch=='}')\n            closebracket++;\n\n        ch=getc(in);\n    }\n\n    printf(\"Open bracket==%d,close bracket=%d\",openbracket,closebracket);\n\n    getch();\n\n}\n</code></pre>\n\n<p>i am trying to open a file with argv[1] in this program in visual c++\ncan you please show me how i can put a file in argv[1] 0f main function?</p>\n\n<p>Thank you</p>\n"}, {"tags": ["c", "regex"], "comments": [{"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 1, "creation_date": 1488389102, "post_id": 42538124, "comment_id": 72211956, "body": "show the regex string you use in the C code."}, {"owner": {"reputation": 3761, "user_id": 3982001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Fabio says Reinstate Monica", "link": "https://stackoverflow.com/users/3982001/fabio-says-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1488389170, "post_id": 42538124, "comment_id": 72211996, "body": "Please <a href=\"https://stackoverflow.com/posts/42538124/edit\">edit</a> your question and show a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. You are showing neither the regex nor the text you want to match. Yes, you explained what it is, but you must show us the code that does it."}, {"owner": {"reputation": 481661, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1488389548, "post_id": 42538124, "comment_id": 72212232, "body": "<code>&quot;^GET &#47; HTTP&#47;1\\\\.[01]$&quot;</code> should work. You may also use <code>&quot;^GET &#47; HTTP&#47;1[.][01]$&quot;</code>"}, {"owner": {"reputation": 22814, "user_id": 182660, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/75e48a7020624657e5da6033590030ee?s=128&d=identicon&r=PG", "display_name": "SergGr", "link": "https://stackoverflow.com/users/182660/serggr"}, "edited": false, "score": 0, "creation_date": 1488396592, "post_id": 42538124, "comment_id": 72216503, "body": "Could you modify first print to output also actual <code>match</code> value and show us them as well?"}, {"owner": {"reputation": 481661, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1488397655, "post_id": 42538124, "comment_id": 72217101, "body": "It seems to work - <a href=\"https://ideone.com/qXbD5E\" rel=\"nofollow noreferrer\">ideone.com/qXbD5E</a>"}, {"owner": {"reputation": 1, "user_id": 7642683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efba0c579ebb8d7f8ce339a37114aa59?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Konaguan", "link": "https://stackoverflow.com/users/7642683/mike-konaguan"}, "reply_to_user": {"reputation": 22814, "user_id": 182660, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/75e48a7020624657e5da6033590030ee?s=128&d=identicon&r=PG", "display_name": "SergGr", "link": "https://stackoverflow.com/users/182660/serggr"}, "edited": false, "score": 0, "creation_date": 1488398684, "post_id": 42538124, "comment_id": 72217722, "body": "@SergGr the match value is always equal to 1."}, {"owner": {"reputation": 1, "user_id": 7642683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efba0c579ebb8d7f8ce339a37114aa59?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Konaguan", "link": "https://stackoverflow.com/users/7642683/mike-konaguan"}, "reply_to_user": {"reputation": 481661, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1488398761, "post_id": 42538124, "comment_id": 72217761, "body": "@WiktorStribi\u017cew Strange, maybe because I&#39;m using buffer array of 1024 to recept the data from the client, gonna check that. Thanks"}, {"owner": {"reputation": 481661, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1488562937, "post_id": 42538124, "comment_id": 72302845, "body": "Mike, any news?"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 7642683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efba0c579ebb8d7f8ce339a37114aa59?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Konaguan", "link": "https://stackoverflow.com/users/7642683/mike-konaguan"}, "is_accepted": true, "score": 0, "last_activity_date": 1488600846, "creation_date": 1488600846, "answer_id": 42592003, "question_id": 42538124, "link": "https://stackoverflow.com/questions/42538124/c-programming-how-to-match-an-end-character-of-a-string/42592003#42592003", "title": "C Programming - how to match an end character of a String?", "body": "<p><strong>RESOLVED</strong></p>\n\n<p>Well, thanks to @WiktorStribi\u017cew who made me realize something, my char array always end with <strong>'\\r\\n'</strong> or <strong>'\\n'</strong> not only <strong>'\\0'</strong> like a literal String.</p>\n\n<p>So I just had to modify my regex:</p>\n\n<p><code>match = ownRegex(clientMessage, \"^GET / HTTP/1\\\\.[01]\\r{0,1}\\n\");</code></p>\n\n<p>Bye.</p>\n"}], "owner": {"reputation": 1, "user_id": 7642683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efba0c579ebb8d7f8ce339a37114aa59?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Konaguan", "link": "https://stackoverflow.com/users/7642683/mike-konaguan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 42592003, "answer_count": 1, "score": -1, "last_activity_date": 1488600846, "creation_date": 1488388926, "last_edit_date": 1488392238, "question_id": 42538124, "link": "https://stackoverflow.com/questions/42538124/c-programming-how-to-match-an-end-character-of-a-string", "title": "C Programming - how to match an end character of a String?", "body": "<p>How to match an end character of a string ?</p>\n\n<p>Here is my code :</p>\n\n<pre><code>int ownRegex(char* str_request, char* str_regex) {\n  int err;\n  regex_t preg;\n  err = regcomp(&amp;preg, str_regex, REG_NOSUB | REG_EXTENDED);\n\n  if (!err) {\n    int match;\n    match = regexec(&amp;preg, str_request, 0, NULL, 0);\n    regfree(&amp;preg);\n\n    if (!match)\n        return 0;\n    else if (match == REG_NOMATCH)\n        return match;\n    else {\n        char *text;\n        size_t size;\n\n        size = regerror(err, &amp;preg, NULL, 0);\n        text = malloc(sizeof(*text) * size);\n        if (text) {\n            regerror (err, &amp;preg, text, size);\n            fprintf(stderr, \"%s\\n\", text);\n            free(text);\n        } else\n            fprintf(stderr, \"im\");\n        exit(errno);\n    }\n  }\n  return err;\n}\n</code></pre>\n\n<p>What I am trying to do is to match those lines:</p>\n\n<p>\"<strong>GET / HTTP/1.1</strong>\" or \"<strong>GET / HTTP/1.0</strong>\", so I use the regex \"<strong>^GET / HTTP/1\\.[01]$</strong>\"</p>\n\n<p>Because I don't want a parasite word after the HTTP version like \"<strong>GET / HTTP/1.1</strong> <em>blablabla</em>\".</p>\n\n<p>But when I'm using this regex none of the lines I try match.</p>\n\n<p><strong>[EDIT]</strong></p>\n\n<p>So here is how I call my function:</p>\n\n<pre><code>int match = ownRegex(clientMessage, \"^GET / HTTP/1\\\\.[01]$\");\nif (match)\n    printf(\"400\\n\");\nelse\n    printf(\"200\\n\");\n</code></pre>\n\n<p>(I've simplified the code)</p>\n\n<p>And here is the lines I tried :\n`</p>\n\n<ol>\n<li>\"<strong>GET / HTTP/1.1</strong>\" -> return 400, should be 200</li>\n<li>\"<strong>GET / HTTP/1.0</strong>\" -> return 400, should be 200</li>\n<li>\"<strong>GET / HTTP/1a1</strong>\" -> return 400</li>\n<li>\"<strong>GET / HTTP/1.2</strong>\" -> return 400</li>\n<li>\"<strong>AGET / HTTP/1.1</strong>\" -> return 400</li>\n<li>\"<strong>A GET / HTTP/1.1</strong>\" -> return 400</li>\n<li>\"<strong>GET / HTTP/1.1 TEST</strong>\" -> return 400</li>\n<li>\"<strong>GET / HTTP//1.1</strong>\" -> return 400</li>\n<li>\"<strong>GET / HTTP/ 1.1</strong>\" -> return 400</li>\n</ol>\n\n<p>So only the two first lines are supposed correct, but only the n\u00b03 to 9 have te correct return because my function always return 400.</p>\n\n<p>Also if I remove the '$' in my regex, all the lines have the correct return except the n\u00b07.</p>\n\n<p>I hope I have clarified my question :).</p>\n\n<p><strong>[END EDIT]</strong></p>\n\n<p>Have you any idea what I did wrong ?</p>\n\n<p>Thanks for reading me,and sorry for my english.</p>\n"}, {"tags": ["python", "c", "struct", "padding", "ctypes"], "comments": [{"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 0, "creation_date": 1488388939, "post_id": 42537986, "comment_id": 72211858, "body": "What language is this? If &quot;C&quot; it&#39;s using some extensions I&#39;m unfamiliar with."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1488388960, "post_id": 42537986, "comment_id": 72211869, "body": "Looks like Python to me, not C."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1488389095, "post_id": 42537986, "comment_id": 72211953, "body": "I think it&#39;s because <code>struct_2</code> is packed, so there&#39;s no padding after <code>t5</code>. But <code>my_struct_2</code> isn&#39;t packed, so there&#39;s 2 bytes of padding between <code>t5</code> and <code>t6</code> to get it word-aligned."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1488389142, "post_id": 42537986, "comment_id": 72211976, "body": "BTW, why do you have two <code>t6</code> members in <code>struct_2</code> and <code>my_struct_2</code>? Shouldn&#39;t the second one be <code>t7</code>?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1488389293, "post_id": 42537986, "comment_id": 72212075, "body": "Added [python] (removing [memory-alignment] to make room) because the question is about the Python &quot;ctypes&quot; module."}, {"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 0, "creation_date": 1488389436, "post_id": 42537986, "comment_id": 72212166, "body": "I suspect that the answer is became the offset of field t5 changes directly due to the packing option used."}, {"owner": {"reputation": 1769, "user_id": 2708608, "user_type": "registered", "accept_rate": 23, "profile_image": "https://i.stack.imgur.com/zPQK0.png?s=128&g=1", "display_name": "Amit Sharma", "link": "https://stackoverflow.com/users/2708608/amit-sharma"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1488389494, "post_id": 42537986, "comment_id": 72212196, "body": "@Barmar my bad, it should be t7. Thanks for pointing this out."}, {"owner": {"reputation": 1769, "user_id": 2708608, "user_type": "registered", "accept_rate": 23, "profile_image": "https://i.stack.imgur.com/zPQK0.png?s=128&g=1", "display_name": "Amit Sharma", "link": "https://stackoverflow.com/users/2708608/amit-sharma"}, "edited": false, "score": 0, "creation_date": 1488389710, "post_id": 42537986, "comment_id": 72212324, "body": "Removed the typo&#39;s; renamed t6-&gt;t7(array) and removed <i>packed</i> also. But still question is same. :)"}], "answers": [{"comments": [{"owner": {"reputation": 1769, "user_id": 2708608, "user_type": "registered", "accept_rate": 23, "profile_image": "https://i.stack.imgur.com/zPQK0.png?s=128&g=1", "display_name": "Amit Sharma", "link": "https://stackoverflow.com/users/2708608/amit-sharma"}, "edited": false, "score": 0, "creation_date": 1488426050, "post_id": 42540265, "comment_id": 72228273, "body": "ctypes provides 2-byte alignment for structure type struct_1 &gt;&gt; If I use __pack_=4 explicitly even then I see different size."}, {"owner": {"reputation": 1769, "user_id": 2708608, "user_type": "registered", "accept_rate": 23, "profile_image": "https://i.stack.imgur.com/zPQK0.png?s=128&g=1", "display_name": "Amit Sharma", "link": "https://stackoverflow.com/users/2708608/amit-sharma"}, "edited": false, "score": 0, "creation_date": 1488433627, "post_id": 42540265, "comment_id": 72230864, "body": "If we use alignment and packing in C code then it gives the size as expected      struct t1 {         int16_t  x;         struct s y;     } <b>attribute</b> ((packed, aligned(4)));  The size of int is       4 The size of struct s  is 4 The size of struct t1 is 8 The size of struct t2 is 8  The offset of t1.y is    2 The offset of t2.y is    4  How do we get this same behavior with ctypes in python? <i>pack</i> = 4 is not working."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 1769, "user_id": 2708608, "user_type": "registered", "accept_rate": 23, "profile_image": "https://i.stack.imgur.com/zPQK0.png?s=128&g=1", "display_name": "Amit Sharma", "link": "https://stackoverflow.com/users/2708608/amit-sharma"}, "edited": false, "score": 0, "creation_date": 1488463374, "post_id": 42540265, "comment_id": 72249322, "body": "@AmitSharma, you misunderstand the meaning of  <code>_pack_</code>.  It sets the <i>maximum</i> alignment.  You can get less padding or even none by setting it to a small number, but you cannot force more padding by setting it to a larger number.  You can, however, <i>manually</i> pad a structure by adding a member that you otherwise ignore."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 1769, "user_id": 2708608, "user_type": "registered", "accept_rate": 23, "profile_image": "https://i.stack.imgur.com/zPQK0.png?s=128&g=1", "display_name": "Amit Sharma", "link": "https://stackoverflow.com/users/2708608/amit-sharma"}, "edited": false, "score": 0, "creation_date": 1488466991, "post_id": 42540265, "comment_id": 72251992, "body": "@AmitSharma, as far as I can determine, ctypes has no built-in mechanism for specifying a <i>minimum</i> alignment (the effect of GCC&#39;s <code>__attribute__((aligned))</code>)."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 0, "last_activity_date": 1488396206, "creation_date": 1488396206, "answer_id": 42540265, "question_id": 42537986, "link": "https://stackoverflow.com/questions/42537986/why-sizeof-varies-in-given-example-of-ctypes-struct-packing/42540265#42540265", "title": "Why sizeof varies in given example of ctypes struct packing?", "body": "<p>The difference arises from the presence or absence of padding between or after elements in the structure layout, because when the sizes differ, the larger one accounts for more bytes than are required for all the individual structure members.  Members <code>t5</code> and <code>t6</code> alone are sufficient to demonstrate the difference, and there is no difference if <code>t5</code> (only) is omitted.</p>\n\n<p>A little experimentation shows that by default (i.e. when the <code>_pack_</code> member is not specified), ctypes provides 2-byte alignment for structure type <code>struct_1</code>, but 4-byte alignment for type <code>c_int</code>.  Or it does on my system, anyway.  The ctypes documentation claims that by default it lays out structures the same way that the system's C compiler (by default) does, and that indeed seems to be the case.  Consider this C program:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;stddef.h&gt;\n\nint main() {\n    struct s {\n        int16_t x;\n        int8_t  y;\n        uint8_t z;\n    };\n    struct t1 {\n        int16_t  x;\n        struct s y;\n    };\n    struct t2 {\n        int16_t x;\n        int     y;\n    };\n\n    printf(\"The size of int is       %zu\\n\", sizeof(int));\n    printf(\"The size of struct s  is %zu\\n\", sizeof(struct s));\n    printf(\"The size of struct t1 is %zu\\n\", sizeof(struct t1));\n    printf(\"The size of struct t2 is %zu\\n\", sizeof(struct t2));\n    printf(\"\\nThe offset of t1.y is    %zu\\n\", offsetof(struct t1, y));\n    printf(\"The offset of t2.y is    %zu\\n\", offsetof(struct t2, y));\n}\n</code></pre>\n\n<p>Its output for me (on CentOS 7 w/ GCC 4.8 on x86_64) is:</p>\n\n<pre>The size of int is       4\nThe size of struct s  is 4\nThe size of struct t1 is 6\nThe size of struct t2 is 8\n\nThe offset of t1.y is    2\nThe offset of t2.y is    4</pre>\n\n<p>Observe that the sizes of <code>int</code> and <code>struct s</code> are the same (4 bytes), but the compiler is aligning the <code>struct s</code> on a 2-byte boundary within <code>struct t1</code>, whereas it aligns the <code>int</code> on a 4-byte boundary within <code>struct t2</code>.  This matches perfectly with the behavior of ctypes on the same system.</p>\n\n<p>As for <em>why</em> GCC chooses the alignment it does, I observe that if I add a member of type <code>int</code> to <code>struct s</code> then GCC switches to using 4-byte alignment for the struct, as well as arranging (by default) for the offset of the <code>int</code> within the structure to be a multiple of 4 bytes.  It is reasonable to conclude that GCC is laying out members within a struct and choosing the alignment of the struct overall so that all members of every aligned struct instance are themselves naturally aligned.  Do note, however, that this is just an example.  C implementations are largely at their own discretion with respect to choosing structure layout and alignment requirements.</p>\n"}], "owner": {"reputation": 1769, "user_id": 2708608, "user_type": "registered", "accept_rate": 23, "profile_image": "https://i.stack.imgur.com/zPQK0.png?s=128&g=1", "display_name": "Amit Sharma", "link": "https://stackoverflow.com/users/2708608/amit-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 698, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1488396206, "creation_date": 1488388530, "last_edit_date": 1488389536, "question_id": 42537986, "link": "https://stackoverflow.com/questions/42537986/why-sizeof-varies-in-given-example-of-ctypes-struct-packing", "title": "Why sizeof varies in given example of ctypes struct packing?", "body": "<p>I would really appreciate if any explanation can be given to output of following piece of code. I am not getting why <code>sizeof(struct_2)</code> and <code>sizeof(my_struct_2)</code> are different, <strong>provided</strong> <code>sizeof(struct_1)</code> and <code>sizeof(c_int)</code> is <strong>same</strong>.</p>\n\n<p>It seems <code>ctypes</code> packed <code>struct</code> within <code>struct</code> in some different way ? </p>\n\n<pre><code>from ctypes import *\n\nclass struct_1(Structure):\n    pass\nint8_t = c_int8\nint16_t = c_int16\nuint8_t = c_uint8\nstruct_1._fields_ = [\n    ('tt1', int16_t),\n    ('tt2', uint8_t),\n    ('tt3', uint8_t),\n]\n\nclass struct_2(Structure):\n    pass\nint8_t = c_int8\nint16_t = c_int16\nuint8_t = c_uint8\nstruct_2._fields_ = [\n    ('t1', int8_t),\n    ('t2', uint8_t),\n    ('t3', uint8_t),\n    ('t4', uint8_t),\n    ('t5', int16_t),\n    ('t6', struct_1),\n    ('t7', struct_1 * 6),\n]\n\nclass my_struct_2(Structure):\n    #_pack_ = 1  # This will give answer as 34\n    #_pack_ = 4  #36\n    _fields_ = [\n    ('t1', c_int8),\n    ('t2', c_uint8),\n    ('t3', c_uint8),\n    ('t4', c_uint8),\n    ('t5', c_int16),\n    ('t6', c_int),\n    ('t7', c_int * 6),\n]\n\nprint \"size of c_int            : \", sizeof(c_int)\nprint \"size of struct_1         : \", sizeof(struct_1)\nprint \"size of my struct_2      : \", sizeof(my_struct_2)\nprint \"siz of origional struct_2: \", sizeof(struct_2)\n</code></pre>\n\n<p><strong>OUTPUT:</strong></p>\n\n<pre><code>size of c_int            :  4\nsize of struct_1         :  4\nsize of my struct_2      :  36  \nsiz of origional struct_2:  34 ==&gt; why not 36 ??\n</code></pre>\n\n<p><strong>EDIT:</strong>\nRename t6->t7 (array of struct_1) and removed <em>pack</em>=2 from struct_2. But still I see different size for <code>struct_2</code> and <code>my_struct_2</code> </p>\n"}, {"tags": ["c", "algorithm", "function"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1488389749, "post_id": 42537957, "comment_id": 72212350, "body": "You have typed the wrong Google url..."}, {"owner": {"reputation": 5521, "user_id": 755851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1bb0ef4d5aebec860f85f7c76b894fd?s=128&d=identicon&r=PG", "display_name": "Foon", "link": "https://stackoverflow.com/users/755851/foon"}, "edited": false, "score": 0, "creation_date": 1488392312, "post_id": 42537957, "comment_id": 72213915, "body": "Not sure where that formula came from... have you looked at just using first order approximation (as pointed out in <a href=\"http://math.stackexchange.com/questions/128514/solving-the-arctan-of-an-angle-radians-by-hand\" title=\"solving the arctan of an angle radians by hand\">math.stackexchange.com/questions/128514/&hellip;</a>) ... something like  x - (1.0/3) * (x ** 3) + (1.0/5) * (x ** 5) won&#39;t be perfect (and the error grows the closer you get to 1) but I&#39;m pretty sure it will be &lt; 1.6 radians"}, {"owner": {"reputation": 5511, "user_id": 5563569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77f4ceeaf2fba395d7c1e2029ef1a901?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew Pope", "link": "https://stackoverflow.com/users/5563569/matthew-pope"}, "edited": false, "score": 0, "creation_date": 1488402996, "post_id": 42537957, "comment_id": 72220185, "body": "If you are willing to precompute a few values with a slow, accurate arctan algorithm, then you can use piecewise polynomial interpolation. The benefit of piecewise polynomial interpolation is that you can get almost any arbitrary amount of precision; it only depends on how many precomputed values you are willing to have. You can algebraically determine the number of values you need to store to get your desired precision."}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 7642635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44fd726effc6f5f60dedb423ca1157e1?s=128&d=identicon&r=PG&f=1", "display_name": "Yingyan Wang", "link": "https://stackoverflow.com/users/7642635/yingyan-wang"}, "edited": false, "score": 1, "creation_date": 1488495478, "post_id": 42542593, "comment_id": 72269077, "body": "Thanks for the help. I realized that some of my inputs for the OP&#39;s code were &gt;1 so that&#39;s why it was giving me max error of 1.6 radians. OP&#39;s code used fabs() because it works for input range of [-1,1], the (0,1] was just the range for my own input data."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 43, "user_id": 7642635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44fd726effc6f5f60dedb423ca1157e1?s=128&d=identicon&r=PG&f=1", "display_name": "Yingyan Wang", "link": "https://stackoverflow.com/users/7642635/yingyan-wang"}, "edited": false, "score": 0, "creation_date": 1488496582, "post_id": 42542593, "comment_id": 72269518, "body": "@YingyanWang A common range reduction for <code>x &gt; 1</code>, use something like <code>return M_PI_2 - FastArcTan(1&#47;x)</code> and similar code for <code>x &lt; 1</code>.  See <a href=\"http://stackoverflow.com/a/23097989/2410359\">stackoverflow.com/a/23097989/2410359</a>"}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 5, "last_activity_date": 1488405990, "last_edit_date": 1495542722, "creation_date": 1488404385, "answer_id": 42542593, "question_id": 42537957, "link": "https://stackoverflow.com/questions/42537957/fast-accurate-atan-arctan-approximation-algorithm/42542593#42542593", "title": "Fast &amp; accurate atan/arctan approximation algorithm", "body": "<p>OP reported a max error of 1.6 radians (92 degrees) which is inconsistent with testing OP's code below, max error input <code>x</code>: 0 to 1 range of about 0.0015 radians.  I suspect a mis-code or testing outside the range of 0...1.  Did OP means 1.6 milli-radians?</p>\n\n<hr>\n\n<p>Perhaps a more accurate <code>a*x^5 + b*x^3 + c*x</code> will still be fast enough for OP.  It is about 4x more accurate on my machine on average and 2x better worst case.  It uses an optimal 3-term polynomial as suggested by <a href=\"https://stackoverflow.com/questions/42537957/fast-accurate-atan-arctan-approximation-algorithm/42542593#comment72213915_42537957\">@Foon</a> and <a href=\"https://stackoverflow.com/users/5563569/matthew-pope\">@Matthew Pope</a></p>\n\n<pre><code>#include &lt;math.h&gt;\n#include &lt;stdio.h&gt;\n\n#ifndef M_PI_4\n#define M_PI_4 (3.1415926535897932384626433832795/4.0)\n#endif\n\ndouble FastArcTan(double x) {\n  return M_PI_4*x - x*(fabs(x) - 1)*(0.2447 + 0.0663*fabs(x));\n}\n\n#define A 0.0776509570923569\n#define B -0.287434475393028\n#define C (M_PI_4 - A - B)\n#define FMT \"% 16.8f\"\n\ndouble Fast2ArcTan(double x) {\n  double xx = x * x;\n  return ((A*xx + B)*xx + C)*x;\n}\n\nint main() {\n  double mxe1 = 0, mxe2 = 0;\n  double err1 = 0, err2 = 0;\n  int n = 100;\n  for (int i=-n;i&lt;=n; i++) {\n    double x = 1.0*i/n;\n    double y = atan(x);\n    double y_fast1 = FastArcTan(x);\n    double y_fast2 = Fast2ArcTan(x);\n    printf(\"%3d x:% .3f y:\" FMT \"y1:\" FMT \"y2:\" FMT \"\\n\", i, x, y, y_fast1, y_fast2);\n    if (fabs(y_fast1 - y) &gt; mxe1 ) mxe1  = fabs(y_fast1 - y);\n    if (fabs(y_fast2 - y) &gt; mxe2 ) mxe2  = fabs(y_fast2 - y);\n    err1 += (y_fast1 - y)*(y_fast1 - y);\n    err2 += (y_fast2 - y)*(y_fast2 - y);\n  }\n  printf(\"max error1: \" FMT \"sum sq1:\" FMT \"\\n\", mxe1, err1);\n  printf(\"max error2: \" FMT \"sum sq2:\" FMT \"\\n\", mxe2, err2);\n}\n</code></pre>\n\n<p>Output</p>\n\n<pre><code> ...\n 96 x: 0.960 y:      0.76499283y1:      0.76582280y2:      0.76438526\n 97 x: 0.970 y:      0.77017091y1:      0.77082844y2:      0.76967407\n 98 x: 0.980 y:      0.77529750y1:      0.77575981y2:      0.77493733\n 99 x: 0.990 y:      0.78037308y1:      0.78061652y2:      0.78017777\n100 x: 1.000 y:      0.78539816y1:      0.78539816y2:      0.78539816\nmax error1:       0.00150847sum sq1:      0.00023062\nmax error2:       0.00084283sum sq2:      0.00004826\n</code></pre>\n\n<hr>\n\n<p>Unclear why OP's code uses <code>fabs()</code> given \"Input: x = (0, 1]\".</p>\n"}], "owner": {"reputation": 43, "user_id": 7642635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44fd726effc6f5f60dedb423ca1157e1?s=128&d=identicon&r=PG&f=1", "display_name": "Yingyan Wang", "link": "https://stackoverflow.com/users/7642635/yingyan-wang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5240, "favorite_count": 1, "accepted_answer_id": 42542593, "answer_count": 1, "score": 4, "last_activity_date": 1488405990, "creation_date": 1488388439, "question_id": 42537957, "link": "https://stackoverflow.com/questions/42537957/fast-accurate-atan-arctan-approximation-algorithm", "title": "Fast &amp; accurate atan/arctan approximation algorithm", "body": "<p>Any fast &amp; accurate atan/arctan approximation function/algorithm out there? Input: x = (0, 1] (minimum x requirement). Output: in radians</p>\n\n<pre><code>double FastArcTan(double x)\n{\n    return M_PI_4*x - x*(fabs(x) - 1)*(0.2447 + 0.0663*fabs(x));\n}\n</code></pre>\n\n<p>I've found this function above online but it gave a max error of 1.6 radians which is too big.</p>\n"}, {"tags": ["c", "multithreading", "pthreads"], "comments": [{"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 1, "creation_date": 1488391079, "post_id": 42537855, "comment_id": 72213169, "body": "You have threads reading and writing global variables without any locking. That will never work correctly. However, adding locking is not the correct solution either. You should divide the work into sections and pass each section to a thread then get the thread&#39;s result at the join. Do not use any global variables at all."}, {"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 0, "creation_date": 1488391143, "post_id": 42537855, "comment_id": 72213204, "body": "Also unless this is a project to learn pthreads, you should look into using OpenMP which is much easier to use for C programming."}], "answers": [{"comments": [{"owner": {"reputation": 361, "user_id": 4032677, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2f21f64127f960d2d343f046186f3089?s=128&d=identicon&r=PG&f=1", "display_name": "aero", "link": "https://stackoverflow.com/users/4032677/aero"}, "edited": false, "score": 0, "creation_date": 1488398864, "post_id": 42539532, "comment_id": 72217826, "body": "Thanks alot for your help."}], "tags": [], "owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "is_accepted": true, "score": 2, "last_activity_date": 1488393850, "creation_date": 1488393850, "answer_id": 42539532, "question_id": 42537855, "link": "https://stackoverflow.com/questions/42537855/how-do-i-replace-sequential-operation-with-pthreads-in-c/42539532#42539532", "title": "How do I replace sequential operation with pthreads in C?", "body": "<p>You were pretty close, but there were some bugs.</p>\n\n<ol>\n<li>Each thread was scanning the entire <code>s1</code> instead of just a substring.</li>\n<li><code>main</code> should pass an argument that indicates the starting offset of the substring in <code>s1</code></li>\n<li>Only one loop in the thread function is required [or desired].</li>\n<li>Each thread was incrementing a global <code>total</code> [without thread locking]. Better to have the value passed back as the thread's return value</li>\n<li>Because you have one thread for each char in <code>s1</code>, a thread will see either 0 or 1 as the count [only].</li>\n</ol>\n\n<p>I've fixed your code [please pardon the gratuitous style cleanup]:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;pthread.h&gt;\n\n#define MAX 1024\n\nint n1;\nint n2;\nint num_thr;\nint *num_threads;\nchar *s1;\nchar *s2;\nFILE *fp;\n\nint\nreadf(FILE * fp)\n{\n    char *cp;\n\n    if ((fp = fopen(\"strings.txt\", \"r\")) == NULL) {\n        printf(\"ERROR: can't open string.txt!\\n\");\n        return 0;\n    }\n\n    if (s1 == NULL)\n        s1 = (char *) malloc(sizeof(char) * MAX);\n    if (s1 == NULL) {\n        printf(\"ERROR: Out of memory!\\n\");\n        return -1;\n    }\n\n    if (s2 == NULL)\n        s2 = (char *) malloc(sizeof(char) * MAX);\n    if (s1 == NULL) {\n        printf(\"ERROR: Out of memory\\n\");\n        return -1;\n    }\n\n    /* read s1 s2 from the file */\n    cp = fgets(s1, MAX, fp);\n    if (cp == NULL)\n        return -1;\n\n    cp = fgets(s2, MAX, fp);\n    if (cp == NULL)\n        return -1;\n\n    n1 = strlen(s1) - 1;                /* length of s1 */\n    n2 = strlen(s2) - 1;                /* length of s2 */\n\n    num_thr = n1;\n    printf(\"String 1 len = %d\\n\", n1);\n\n    if (n1 &lt; n2)\n        return -1;\n\n    return 0;\n}\n\nvoid *\nnum_substring(void *vari)\n{\n    int i;\n    long subtotal;\n\n    subtotal = 0;\n\n#if 0\n    int count;\n    int j;\n    int k;\n    for (int i = 0; i &lt;= (n1 - n2); i++) {\n        count = 0;\n        /* search for the next string of size of n2 */\n        for (int j = i, k = 0; k &lt; n2; j++, k++) {\n            if (*(s1 + j) != *(s2 + k)) {\n                break;\n            }\n            else\n                count++;\n            if (count == n2)\n                subtotal++;             /* find a substring in this step */\n        }\n    }\n#else\n    int t = (long) vari;\n    char *cp = &amp;s1[t];\n    subtotal = 1;\n    for (i = 0; i &lt; n2; i++) {\n        //printf(\"t%d: TRY: %c %c\\n\",t,cp[i],s2[i]);\n        if (cp[i] != s2[i]) {\n            subtotal = 0;\n            break;\n        }\n    }\n#endif\n\n    //printf(\"t%d: subtotal= %ld\\n\", subtotal);\n\n    return (void *) subtotal;\n}\n\nint\nmain(int argc, char *argv[])\n{\n    int total = 0;\n    void *ptr;\n\n    //int count;\n\n    readf(fp);\n\n    //printf(\"The number of substrings is: %d\\n\", count);\n\n    long i;\n    int ret = -1;\n    //char *msg1 = \"a thread\";\n    pthread_t *thread_arr = malloc(sizeof(pthread_t) * num_thr);\n\n    printf(\"num threads inside main = %d\\n\", num_thr);\n    for (i = 0; i &lt; num_thr; i++) {\n#if 0\n        ret = pthread_create(&amp;thread_arr[i], NULL, num_substring,(void *) msg1);\n#else\n        ret = pthread_create(&amp;thread_arr[i], NULL, num_substring,(void *) i);\n#endif\n\n        if (ret != 0) {\n            printf(\"Create pthread %ld error!\\n\", i);\n            exit(1);\n        }\n        printf(\"Main function thread %ld created\\n\", i);\n    }\n\n    total = 0;\n    for (i = 0; i &lt; num_thr; i++) {\n        pthread_join(thread_arr[i], &amp;ptr);\n        total += (long) ptr;\n    }\n\n    printf(\"TOTAL: %d\\n\",total);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 361, "user_id": 4032677, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2f21f64127f960d2d343f046186f3089?s=128&d=identicon&r=PG&f=1", "display_name": "aero", "link": "https://stackoverflow.com/users/4032677/aero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 470, "favorite_count": 0, "accepted_answer_id": 42539532, "answer_count": 1, "score": 1, "last_activity_date": 1488393850, "creation_date": 1488388157, "last_edit_date": 1488390466, "question_id": 42537855, "link": "https://stackoverflow.com/questions/42537855/how-do-i-replace-sequential-operation-with-pthreads-in-c", "title": "How do I replace sequential operation with pthreads in C?", "body": "<p>I have a function which is calculating number sub-strings of one bigger string (using a smaller string to match), I am trying to replace this sequence with pthreads, thereby processing the whole thing at the same time without a loop.</p>\n\n<p>I am looking for the principle by which i can do this.\nWhat i've done so far, is creating a pthread_t dynamic array, the number of this array is the same as the number of the chars. of the bigger string, I am assigning the function that calculates sub strings to the threads, I think I almost gut it, I just need a push forward to get it right.</p>\n\n<p><strong>pthreads.c</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;pthread.h&gt;\n\n\n#define MAX 1024\n\nint total = 0;\nint n1,n2;\nint num_thr;\nint *num_threads;\nchar *s1,*s2;\nFILE *fp;\n\nint readf(FILE *fp)\n{\n    if((fp=fopen(\"strings.txt\", \"r\"))==NULL){\n        printf(\"ERROR: can't open string.txt!\\n\");\n        return 0;\n    }\n    s1=(char *)malloc(sizeof(char)*MAX);\n    if(s1==NULL){\n        printf(\"ERROR: Out of memory!\\n\");\n        return -1;\n    }\n    s2=(char *)malloc(sizeof(char)*MAX);\n    if(s1==NULL){\n        printf(\"ERROR: Out of memory\\n\");\n        return -1;\n    }\n    /*read s1 s2 from the file*/\n    s1=fgets(s1, MAX, fp);\n    s2=fgets(s2, MAX, fp);\n    n1=strlen(s1)-1;  /*length of s1*/\n\n    n2=strlen(s2)-1; /*length of s2*/\n    num_thr=n1;\n    printf(\"String 1 len = %d\\n\",n1);\n\n    if(s1==NULL || s2==NULL || n1&lt;n2)  /*when error exit*/\n        return -1;\n}\n\nvoid *num_substring(void *vari);\nvoid *num_substring(void *vari)\n{\n    int i,j,k;\n    int count;\n\n    for (i = 0; i &lt;= (n1-n2); i++){   \n        count=0;\n        for(j = i,k = 0; k &lt; n2; j++,k++){  /*search for the next string of size of n2*/  \n            if (*(s1+j)!=*(s2+k)){\n                break;\n            }\n            else\n                count++;\n            if(count==n2)    \n                total++;        /*find a substring in this step*/                          \n        }\n    }\n    printf(\"total= %d\\n\",total);\n    //return total;\n}\n\n\n\n\n\n\n\n\nint main (int argc, char *argv[])\n{\n\nint count;\n\n    readf(fp);\n\n    printf(\"The number of substrings is: %d\\n\", count);\n\n\n\nint i, ret=-1;\nchar *msg1= \"a thread\";\npthread_t * thread_arr = malloc(sizeof(pthread_t)*num_thr);\nprintf(\"num threads inside main = %d\\n\",num_thr);\nfor (i = 0; i &lt; num_thr; i++) {\n\n    ret = pthread_create(&amp;thread_arr[i], NULL, num_substring, (void *) msg1);\n\n    if(ret != 0) {\n        printf (\"Create pthread %d error!\\n\",i);\n        exit (1);\n    }\n     printf(\"Main function thread %d created\\n\",i);\n}\n\nfor (i=0;i &lt; num_thr; i++){\npthread_join(thread_arr[i], NULL);\n}\n\n\n\n\nreturn 0;\n} \n</code></pre>\n\n<p>The correct output of this program must be 4, because <code>ab</code> occurs 4 times in the other string, so number of sub-string must equal 4 :</p>\n\n<p><strong>string.txt content :</strong></p>\n\n<p>abcdabsufsoababuosufba</p>\n\n<p>ab</p>\n\n<p><strong>My Output is not completely false because it displays 4 initially then it starts incrementing (which is not what i want all i want is the 4) but, it's still not complete because I have not replaced the loops with pthreads array (pthread_arr) which is iam guessing is the last step needed, here is my output :</strong></p>\n\n<pre><code>String 1 len = 22\nThe number of substrings is: 10219508\nnum threads inside main = 22\nMain function thread 0 created\nMain function thread 1 created\nMain function thread 2 created\nMain function thread 3 created\ntotal= 4 // this is the correct number of substrings\ntotal= 8\ntotal= 12\nMain function thread 4 created\ntotal= 20\ntotal= 16\nMain function thread 5 created\nMain function thread 6 created\ntotal= 24\nMain function thread 7 created\ntotal= 28\nMain function thread 8 created\ntotal= 36\ntotal= 32\nMain function thread 9 created\ntotal= 40\nMain function thread 10 created\ntotal= 44\nMain function thread 11 created\nMain function thread 12 created\ntotal= 48\ntotal= 52\nMain function thread 13 created\ntotal= 56\nMain function thread 14 created\ntotal= 60\nMain function thread 15 created\nMain function thread 16 created\nMain function thread 17 created\nMain function thread 18 created\nMain function thread 19 created\nMain function thread 20 created\nMain function thread 21 created\ntotal= 64\ntotal= 68\ntotal= 84\ntotal= 76\ntotal= 72\ntotal= 80\ntotal= 88\n</code></pre>\n"}, {"tags": ["c", "windows", "dll", "julia", "portaudio"], "comments": [{"owner": {"reputation": 362, "user_id": 1354319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bb471d1185a19b1e574b797b520dcd6?s=128&d=identicon&r=PG", "display_name": "HaberdashPI", "link": "https://stackoverflow.com/users/1354319/haberdashpi"}, "reply_to_user": {"reputation": 5865, "user_id": 2557138, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/zwSr0.png?s=128&g=1", "display_name": "Rick S", "link": "https://stackoverflow.com/users/2557138/rick-s"}, "edited": false, "score": 0, "creation_date": 1488388762, "post_id": 42537838, "comment_id": 72211757, "body": "I have, and I&#39;ve had plenty of success calling c code from a 3rd party *.dll (e.g. installed via WinRPM.jl). But what I&#39;m trying to do is create my own *.dll and call a function from that. Where should I ask for sample code?"}], "answers": [{"comments": [{"owner": {"reputation": 362, "user_id": 1354319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bb471d1185a19b1e574b797b520dcd6?s=128&d=identicon&r=PG", "display_name": "HaberdashPI", "link": "https://stackoverflow.com/users/1354319/haberdashpi"}, "edited": false, "score": 0, "creation_date": 1488389244, "post_id": 42538154, "comment_id": 72212040, "body": "Thanks for the link! I don&#39;t see anything specific to Windows in this blog post. I have no trouble getting this to work on Mac OS X (and I&#39;m assuming the same would be true for Linux). I believe the issues I&#39;m running into are related to the logistics of compiling and linking to a *.dll on Windows specifically."}, {"owner": {"reputation": 15648, "user_id": 1544203, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0649583d75adfd14d9473c89f356e173?s=128&d=identicon&r=PG", "display_name": "Chris Rackauckas", "link": "https://stackoverflow.com/users/1544203/chris-rackauckas"}, "reply_to_user": {"reputation": 362, "user_id": 1354319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bb471d1185a19b1e574b797b520dcd6?s=128&d=identicon&r=PG", "display_name": "HaberdashPI", "link": "https://stackoverflow.com/users/1354319/haberdashpi"}, "edited": false, "score": 0, "creation_date": 1488393318, "post_id": 42538154, "comment_id": 72214510, "body": "Yeah, there&#39;s no Windows in there. Sorry."}], "tags": [], "owner": {"reputation": 15648, "user_id": 1544203, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0649583d75adfd14d9473c89f356e173?s=128&d=identicon&r=PG", "display_name": "Chris Rackauckas", "link": "https://stackoverflow.com/users/1544203/chris-rackauckas"}, "is_accepted": false, "score": 3, "last_activity_date": 1488389054, "creation_date": 1488389054, "answer_id": 42538154, "question_id": 42537838, "link": "https://stackoverflow.com/questions/42537838/minimal-working-example-of-mixed-julia-and-c-project-on-windows/42538154#42538154", "title": "Minimal working example of mixed Julia and C project on Windows", "body": "<p><a href=\"http://www.stochasticlifestyle.com/using-julias-c-interface-utilize-c-libraries/\" rel=\"nofollow noreferrer\">This blog post</a> contains pretty much a minimal working example. It compiles a small linker code to GSL and then writes about 10 lines of Julia to use it. It even in  that space shows how to pass a Julia-defined function to C.</p>\n"}, {"comments": [{"owner": {"reputation": 362, "user_id": 1354319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bb471d1185a19b1e574b797b520dcd6?s=128&d=identicon&r=PG", "display_name": "HaberdashPI", "link": "https://stackoverflow.com/users/1354319/haberdashpi"}, "edited": false, "score": 0, "creation_date": 1488494532, "post_id": 42538697, "comment_id": 72268675, "body": "Update: using this example I&#39;ve managed to get a working *.dll on Windows. The key point is that you need to make sure all dependencies for a dll can be found. You can use Dependency Walker (which is mentioned in the link) to figure out if you need to add/rename any dependent dll&#39;s to the directory you load your own dll from."}], "tags": [], "owner": {"reputation": 362, "user_id": 1354319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bb471d1185a19b1e574b797b520dcd6?s=128&d=identicon&r=PG", "display_name": "HaberdashPI", "link": "https://stackoverflow.com/users/1354319/haberdashpi"}, "is_accepted": false, "score": 1, "last_activity_date": 1488390882, "creation_date": 1488390882, "answer_id": 42538697, "question_id": 42537838, "link": "https://stackoverflow.com/questions/42537838/minimal-working-example-of-mixed-julia-and-c-project-on-windows/42538697#42538697", "title": "Minimal working example of mixed Julia and C project on Windows", "body": "<p>This <a href=\"https://groups.google.com/forum/#!topic/julia-users/ZnIP2cqEemk\" rel=\"nofollow noreferrer\">link</a> is not a perfect example, but it's very <em>very</em> close. I haven't run this code, but the poster claims that it compiles and runs successfully on Windows.</p>\n"}], "owner": {"reputation": 362, "user_id": 1354319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bb471d1185a19b1e574b797b520dcd6?s=128&d=identicon&r=PG", "display_name": "HaberdashPI", "link": "https://stackoverflow.com/users/1354319/haberdashpi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 274, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1488390882, "creation_date": 1488388101, "last_edit_date": 1488389332, "question_id": 42537838, "link": "https://stackoverflow.com/questions/42537838/minimal-working-example-of-mixed-julia-and-c-project-on-windows", "title": "Minimal working example of mixed Julia and C project on Windows", "body": "<p>I'm looking for a simple, minimal working example for a Julia project that includes some C code as part of the project. I need the project to compile the C code into a *.dll and then have some Julia code that can successfully call a function from that *.dll on Windows. </p>\n\n<p>I'm having a lot of trouble getting this to work on Windows, and it would be really helpful to just start from some example that I know actually works, and troubleshoot from there why my larger project isn't working.</p>\n\n<p>My use case is calling the portaudio library for low-latency presentation of sounds, using a lock-less multi-threading model. This isn't really possible to write in julia at this point, that I know of: I really need a system level language like C. But I'd like the rest of the project to be in Julia.</p>\n"}, {"tags": ["c", "sse", "simd", "sse2"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1488408286, "post_id": 42537818, "comment_id": 72222908, "body": "<code>s3</code> is 4 x 32 bit ints but you are displaying it as 16 x 8 bit unsigned chars."}], "answers": [{"tags": [], "owner": {"reputation": 3670, "user_id": 2831104, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fM2Ds.jpg?s=128&g=1", "display_name": "ErmIg", "link": "https://stackoverflow.com/users/2831104/ermig"}, "is_accepted": true, "score": 3, "last_activity_date": 1488434017, "creation_date": 1488434017, "answer_id": 42547800, "question_id": 42537818, "link": "https://stackoverflow.com/questions/42537818/dot-production-using-sse/42547800#42547800", "title": "Dot production using sse", "body": "<p>I can see here some problems:</p>\n\n<p>1) If you want to calculate dot product of 50000 uint8_t values, it is OK. But dot product of 70000 values can cause of overflow of uint32_t type. Therefore using of uint64_t is better solution.</p>\n\n<p>2) To calculate dot product of integer vectors it is not necessary to use float point numbers. It is more effective to use for calculation only integers.</p>\n\n<p>There is an example of SSE2 function which calculates dot product for two uint8_t vectors:</p>\n\n<pre><code>#include &lt;algorithm&gt;\n#include &lt;emmintrin.h&gt;\n\nconst __m128i Z = _mm_setzero_si128();\nconst size_t A = sizeof(__m128i);\nconst size_t B = 0x10000;\n\ninline __m128i DotProduct32(const uint8_t * a, const uint8_t * b)\n{\n    __m128i _a = _mm_loadu_si128((__m128i*)a);\n    __m128i _b = _mm_loadu_si128((__m128i*)b);\n    __m128i lo = _mm_madd_epi16(_mm_unpacklo_epi8(_a, Z), _mm_unpacklo_epi8(_b, Z));\n    __m128i hi = _mm_madd_epi16(_mm_unpackhi_epi8(_a, Z), _mm_unpackhi_epi8(_b, Z));\n    return _mm_add_epi32(lo, hi);\n}\n\ninline __m128i HorizontalSum32(__m128i a)\n{\n    return _mm_add_epi64(_mm_unpacklo_epi32(a, Z), _mm_unpackhi_epi32(a, Z));\n}\n\ninline uint64_t ExtractSum64(__m128i a)\n{\n    uint64_t  _a[2];\n    _mm_storeu_si128((__m128i*)_a, a);\n    return _a[0] + _a[1];\n}\n\nvoid DotProduct(const uint8_t * a, const uint8_t * b, size_t size, uint64_t * sum)\n{\n    size_t blockNumber = (size + B - 1)/B;\n    size_t alignedSize = size/A*A;\n    size_t i = 0;\n\n    __m128i sum64 = Z;\n    for (size_t block = 0; block &lt; blockNumber; ++i)\n    {\n        __m128i sum32 = Z;\n        for (size_t blockEnd = std::min(alignedSize, i + B); i &lt; blockEnd; i += A)\n            sum32 = _mm_add_epi32(sum32, DotProduct32(a + i, b + i));\n        sum64 = _mm_add_epi64(sum64, HorizontalSum32(sum32));\n    }\n\n    *sum = ExtractSum64(sum64);\n    for (; i &lt; size; ++i)\n        *sum += a[i] * b[i];\n}\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 7623408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1860d8e11ecdb77acc886d4056886081?s=128&d=identicon&r=PG&f=1", "display_name": "eonjeo", "link": "https://stackoverflow.com/users/7623408/eonjeo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "accepted_answer_id": 42547800, "answer_count": 1, "score": 3, "last_activity_date": 1488434232, "creation_date": 1488388043, "last_edit_date": 1488434232, "question_id": 42537818, "link": "https://stackoverflow.com/questions/42537818/dot-production-using-sse", "title": "Dot production using sse", "body": "<pre><code>#define Size 50000\n\nvoid main()\n{\n\n    unsigned char *arry1 = (unsigned char*)malloc(sizeof(unsigned char)* Size);\n    unsigned char *arry2 = (unsigned char*)malloc(sizeof(unsigned char)* Size);\n    unsigned int *result = (unsigned int*)malloc(sizeof(unsigned int)* Size);\n\n\n    for (int i = 0; i &lt; 16; i++)\n    {\n        arry1[i]  = i;\n        arry2[i]  = i;\n    }\n\n\n    __m128i Z = _mm_setzero_si128();\n    __m128i vsum = _mm_setzero_si128();\n    //__m128i dummy = _mm_setzero_si128();\n\n    for (int j = 0; j &lt; 16; j += 16)\n    {\n        //printf(\"%d\\n\\n\", j);\n\n        __m128i test1 = _mm_setzero_si128();\n            test1 = _mm_loadu_si128((__m128i*)&amp;arry1[j]);\n            __m128i test2 = _mm_setzero_si128();\n            test2 = _mm_loadu_si128((__m128i*)&amp;arry2[j]);\n\n        __m128i s16L = _mm_unpacklo_epi8(test1, Z);\n        __m128i s16H = _mm_unpackhi_epi8(test1, Z);\n        __m128i s32LL = _mm_unpacklo_epi16(s16L, Z);\n        __m128i s32LH = _mm_unpackhi_epi16(s16L, Z);\n        __m128i s32HL = _mm_unpacklo_epi16(s16H, Z);\n        __m128i s32HH = _mm_unpackhi_epi16(s16H, Z);\n\n        __m128i t16L = _mm_unpacklo_epi8(test2, Z);\n        __m128i t16H = _mm_unpackhi_epi8(test2, Z);\n        __m128i t32LL = _mm_unpacklo_epi16(t16L, Z);\n        __m128i t32LH = _mm_unpackhi_epi16(t16L, Z);\n        __m128i t32HL = _mm_unpacklo_epi16(t16H, Z);\n        __m128i t32HH = _mm_unpackhi_epi16(t16H, Z);\n\n        __m128 s1 = _mm_cvtepi32_ps(s32LL);\n        __m128 s2 = _mm_cvtepi32_ps(s32LH);\n        __m128 s3 = _mm_cvtepi32_ps(s32HL);\n        __m128 s4 = _mm_cvtepi32_ps(s32HH);\n\n        __m128 t1 = _mm_cvtepi32_ps(t32LL);\n        __m128 t2 = _mm_cvtepi32_ps(t32LH);\n        __m128 t3 = _mm_cvtepi32_ps(t32HL);\n        __m128 t4 = _mm_cvtepi32_ps(t32HH);\n\n        s1 = _mm_mul_ps(s1, t1);\n        s2 = _mm_mul_ps(s2, t2);\n        s3 = _mm_mul_ps(s3, t3);\n        s4 = _mm_mul_ps(s4, t4);\n\n        s1 = _mm_hadd_ps(s1, s2);//41,13\n        s3 = _mm_hadd_ps(s3, s4); //313,221\n\n        vsum = _mm_cvtps_epi32(s3);\n\n        for (int k = 0; k &lt; 16; k++)\n        {\n            printf(\"%u\\n\", (unsigned char)vsum.m128i_i8[k]);\n        }\n\n        s1 = _mm_hadd_ps(s1, s3); //734, 14\n        s1 = _mm_hadd_ps(s1, s1); //1100,140\n        s1 = _mm_hadd_ps(s1, s1); //1240\n\n\n    }\n\n\n}\n</code></pre>\n\n<p>I progressing dot production using sse. I'm using <code>_mm_mul_ps</code> and <code>_mm_hadd_ps</code> instruction not <code>_mm_dp_ps</code>.\nIf values that after <code>_mm_hadd_ps</code> function is over 255, it is displayed wrong value. </p>\n\n<p>For example, correct value of <code>s3</code> is <code>{0,0,0,421,0,0,0,313,0,0,0,221,0,0,0,145}</code>.\nBut <code>{0,0,1,165,0,0,1,57,0,0,0,221,0,0,0,145}</code> is printed. Is this the result I declared <code>arry1</code>, <code>arry2</code> as <code>unsigned char</code>? I know 255 is max value by 8-bit. </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1488387956, "post_id": 42537778, "comment_id": 72211270, "body": "Read about side-effects and use of parenthesis."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1488387963, "post_id": 42537778, "comment_id": 72211278, "body": "Now expand these macros manually and see what happens"}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 6, "creation_date": 1488388009, "post_id": 42537778, "comment_id": 72211305, "body": "<code>x&gt;y x : y</code> shouldn&#39;t compile."}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1488388306, "post_id": 42537778, "comment_id": 72211498, "body": "Off-topic: IMO Macros tend to be rather difficult to get right and should not be learned early on - I think they should be learned <i>after</i> you have a solid grasp of the language (and programming)."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1488388359, "post_id": 42537778, "comment_id": 72211520, "body": "also this code will not compile. You have to put code in functions. You at least need a main. Maybe you know this but didnt show it"}], "answers": [{"comments": [{"owner": {"reputation": 1345, "user_id": 7551816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f00bd2ba367fcc6d2468230cd4de6e16?s=128&d=identicon&r=PG&f=1", "display_name": "Taufi", "link": "https://stackoverflow.com/users/7551816/taufi"}, "edited": false, "score": 0, "creation_date": 1488388651, "post_id": 42537850, "comment_id": 72211706, "body": "Thank you for your answer. See my edit though -- I have to evaluate the terms withouth parentheses."}], "tags": [], "owner": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "is_accepted": false, "score": 2, "last_activity_date": 1488388144, "creation_date": 1488388144, "answer_id": 42537850, "question_id": 42537778, "link": "https://stackoverflow.com/questions/42537778/preprocessor-macro-in-c/42537850#42537850", "title": "Preprocessor macro in C", "body": "<p>Incorrect use of ternary operator.</p>\n\n<pre><code>#define MAX(x,y) x&gt;y x : y\n</code></pre>\n\n<p>Should be:</p>\n\n<pre><code>#define MAX(x,y) (x&gt;y) ? x : y\n</code></pre>\n\n<p>And to allow for more complex expressions:</p>\n\n<pre><code>#define MAX(x,y) (((x)&gt;(y)) ? (x) : (y))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1345, "user_id": 7551816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f00bd2ba367fcc6d2468230cd4de6e16?s=128&d=identicon&r=PG&f=1", "display_name": "Taufi", "link": "https://stackoverflow.com/users/7551816/taufi"}, "edited": false, "score": 0, "creation_date": 1488388731, "post_id": 42537887, "comment_id": 72211742, "body": "Thank you for the suggestion, I was not aware of that possibility. However, the ternary operator was not included in the first place. I wrote down the exercise the same way I found it."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 1345, "user_id": 7551816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f00bd2ba367fcc6d2468230cd4de6e16?s=128&d=identicon&r=PG&f=1", "display_name": "Taufi", "link": "https://stackoverflow.com/users/7551816/taufi"}, "edited": false, "score": 0, "creation_date": 1488388879, "post_id": 42537887, "comment_id": 72211826, "body": "Since you are explicitly asked not to fix the code to &quot;expected behavior of max&quot;, it would a good idea to run the preprocessor like I mentioned above. This will let you reason about what is happening in a much easier way."}], "tags": [], "owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "is_accepted": false, "score": 0, "last_activity_date": 1488388250, "creation_date": 1488388250, "answer_id": 42537887, "question_id": 42537778, "link": "https://stackoverflow.com/questions/42537778/preprocessor-macro-in-c/42537887#42537887", "title": "Preprocessor macro in C", "body": "<p>You mention that you don't know what is going on. There is only way - run only the preprocessor.\nWhat compiler are you using? Assuming gcc/clang you can -</p>\n\n<p><code>gcc -E filename.c</code></p>\n\n<p>This will only run the preprocessor and let you analyze what is going on.</p>\n\n<p>BTW you code doesn't compile because you made a mistake with the ternary operator - should be <code>x &gt; y ? x : y</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": true, "score": 2, "last_activity_date": 1488404118, "last_edit_date": 1488404118, "creation_date": 1488392613, "answer_id": 42539192, "question_id": 42537778, "link": "https://stackoverflow.com/questions/42537778/preprocessor-macro-in-c/42539192#42539192", "title": "Preprocessor macro in C", "body": "<p>Expanding the macro as-is, we get the following:</p>\n\n<pre><code>Original                   Expanded\n--------                   --------\nc = MAX( a, 3 );           c = a&gt;3 a : 3;\nd = MAX( y, x );           d = y&gt;x y : x;\ne = MAX( ++x, 1 );         e = ++x&gt;1 ++x : 1;\nf = MAX( b, MAX (6, 7) );  f = b&gt;MAX (6, 7) b : MAX (6, 7);\n                           f = b&gt;6&gt;7 6 : 7 b : 6&gt;7 6 : 7;\n</code></pre>\n\n<p>Macro expansion is just dumb text substitution - syntax, scope, precedence, associativity, values, side effects, etc., are simply not taken into account when a macro is expanded (macro expansion occurs before the source code is fed to the compiler proper).  </p>\n\n<p>Obviously, none of the expanded expressions above will compile.  For that to happen, we need to fix the <code>MAX</code> macro by defining it as</p>\n\n<pre><code>#define MAX( x, y ) x&gt;y ? x : y\n</code></pre>\n\n<p>Now we get the following:</p>\n\n<pre><code>Original                   Expanded\n--------                   --------\nc = MAX( a, 3 );           c = a&gt;3 ? a : 3;\nd = MAX( y, x );           d = y&gt;x ? y : x;\ne = MAX( ++x, 1 );         e = ++x&gt;1 ? ++x : 1;\nf = MAX( b, MAX (6, 7) );  f = b&gt;MAX (6, 7) ? b : MAX (6, 7);\n                           f = b&gt;6&gt;7 ? 6 : 7 ? b : 6&gt;7 ? 6 : 7;\n</code></pre>\n\n<p>Better.  The expanded expressions above will compile, but the last two don't do <em>anything</em> like what you expect them to.  <code>e</code> won't get the max of <code>x</code> and <code>1</code>, it will either get <code>x+2</code> or <code>1</code> (<code>?</code> introduces a sequence point, so the behavior isn't undefined).  <code>f</code> gets ... <em>something</em>, can't remember the associativity of <code>&gt;</code> and <code>?:</code> offhand, not really willing to dig it up.  </p>\n\n<p>Again, macros don't take precedence and associativity into account when expanding their arguments.  Imagine we write a macro <code>CUBE</code> that does the following:</p>\n\n<pre><code>#define CUBE(x) x * x * x\n</code></pre>\n\n<p>and we call it as</p>\n\n<pre><code>y = CUBE( 2 + 3 );\n</code></pre>\n\n<p>That expands to</p>\n\n<pre><code>y = 2 + 3 * 2 + 3 * 2 + 3;\n</code></pre>\n\n<p>which gives us the value 17, when we were <em>probably</em> expecting 125.  </p>\n\n<p>The <em>right</em> way to define the <code>MAX</code> macro is</p>\n\n<pre><code>#define MAX( x, y ) ((x) &gt; (y) ? (x) : (y))\n</code></pre>\n\n<p>We not only parenthesize each argument, we parenthesize the entire expression.  This way, precedence and associativity are preserved not only if you pass complex expressions as arguments, but also if you pass this macro as an argument to another one (as in the last example):</p>\n\n<pre><code>Original                   Expanded\n--------                   --------\nc = MAX( a, 3 );           c = ((a) &gt; (3) ? (a) : (3));\nd = MAX( y, x );           d = ((y) &gt; (x) ? (y) : (x));\ne = MAX( ++x, 1 );         e = ((++x) &gt; (1) ? (++x) : (1));\nf = MAX( b, MAX (6, 7) );  f = ((b) &gt; (MAX (6, 7)) ? (b) : (MAX (6, 7)));\n                           f = ((b) &gt; ((6) &gt; (7) ? (6) : (7)) ? (b) : ((6) &gt; (7) ? (6) : (7)));\n</code></pre>\n\n<p>This time, <code>f</code> will be evaluated like you expect it to be.  </p>\n\n<p>The evaluation of <code>e</code> is still problematic (<code>++x</code> can still be evaluated twice).  This is a problem in general with macros that expand their arguments more than once - arguments that have side effects can be evaluated multiple times, which will lead to wrong answers or undefined behavior.  </p>\n"}], "owner": {"reputation": 1345, "user_id": 7551816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f00bd2ba367fcc6d2468230cd4de6e16?s=128&d=identicon&r=PG&f=1", "display_name": "Taufi", "link": "https://stackoverflow.com/users/7551816/taufi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 403, "favorite_count": 0, "accepted_answer_id": 42539192, "answer_count": 3, "score": 0, "last_activity_date": 1488404118, "creation_date": 1488387887, "last_edit_date": 1488388567, "question_id": 42537778, "link": "https://stackoverflow.com/questions/42537778/preprocessor-macro-in-c", "title": "Preprocessor macro in C", "body": "<p>I am new to C programming, in fact programming at all, and recently learn the use of macros with regard to preprocessor directives. Although I am getting more familiar with it the following exercise that I got from a textbook stumbles me since I do not get the solution or the general \"take-away lesson\" from it. </p>\n\n<p>Before I wrote this question here, I tried to execute the code myself by adding some <code>printf()</code> in order to obtain the correct answers but it does not even compile. Now, before I write down the question and code I want to make it explicit that this is a self-learning question and that I do not want to offend people here with a question that many will find trivial. I just want to understand what is going on. </p>\n\n<p>The code is as follows </p>\n\n<pre><code>int x=2, y=3, a=4,b=5;\n#define MAX(x, y) x &gt; y x : y \nint c,d,e,f; \nc = MAX( a, 3 );\nd = MAX( y, x ); \ne = MAX( ++x, 1 ); \nf = MAX( b, MAX (6, 7) ); \n</code></pre>\n\n<p>I am asked to give the values of c,d,e and f. There is an additional hint that although it is named that way the above macro is NOT the maximum operator. Therefore, I don't think the \"obvious\" guess of e.g. max(a,3) = 4 is correct. Consequently, I don't know what is going on.</p>\n\n<p>EDIT: I forgot to mention: I know that there are parentheses missing for the correct use. But I am specifically asked to evaluate the terms without them. Therefore I am confused since I do not know exactly how the results change and the function behave without those included. </p>\n"}, {"tags": ["c", "arrays", "char", "overflow"], "answers": [{"tags": [], "owner": {"reputation": 3193, "user_id": 166815, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d74cbbf1c36704e4645521bf5b08e10a?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan Gilbert", "link": "https://stackoverflow.com/users/166815/jonathan-gilbert"}, "is_accepted": true, "score": 2, "last_activity_date": 1488387950, "creation_date": 1488387950, "answer_id": 42537794, "question_id": 42537614, "link": "https://stackoverflow.com/questions/42537614/last-value-of-char-array-unknown-c/42537794#42537794", "title": "Last value of char array unknown - C", "body": "<p>In C, strings (which are, as you are aware, arrays of characters) do not have any special metadata that tells you their length. Instead, the convention is that the string stops at the first character whose <code>char</code> value is <code>0</code>. This is called \"null-termination\". The way your code is initializing <code>zeroes</code> does not put any null character at the end of the array. (Do not confuse the <code>'0'</code> characters you are putting in with NUL characters -- they have <code>char</code> value <code>48</code>, not <code>0</code>.)</p>\n\n<p>All of the string manipulation functions assume this convention, so when you call <code>strcat</code>, it is looking for that <code>0</code> character to decide the point at which to start adding the hexadecimal values.</p>\n\n<p>C also does not automatically allocate memory for you. It assumes you know exactly what you are doing. So, your code is using a C99 feature to dynamically allocate an array <code>zeroes</code> that has exactly the number of elements as you need <code>'0'</code> characters appended. You <em>aren't</em> allocating an extra byte for a terminating NUL character, and <code>strcat</code> is also going to assume that you have allocated space for the contents of <code>hexadecimalno</code>, which you have not. In C, this does not trigger a bounds check error. It just writes over memory that you shouldn't actually write over. So, you need to be very careful that you <em>do</em> allocate enough memory, and that you only write to memory you have actually allocated.</p>\n\n<p>In this case, you want <code>hexadecimalno</code> to always be 8 digits long, left-padding it with zeroes. That means you need an array with 8 <code>char</code> values, plus one for the NUL terminator. So, <code>zeroes</code> needs to be a <code>char[9]</code>.</p>\n\n<p>After your loop that sets <code>zeroes[i] = '0'</code> for the correct number of zeroes, you need to set the <em>next</em> element to <code>char</code> value <code>0</code>. The fact that you are zero-padding confuses things, but again, remember that <code>'0'</code> and <code>0</code> are two different things.</p>\n\n<p>Provided you allocate enough space (at least 9 characters, assuming that <code>hexadecimalno</code> will never be longer than 8 characters), and then that you null terminate the array when putting the zeroes into it for padding, you should get the expected result.</p>\n"}], "owner": {"reputation": 25, "user_id": 7525146, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86a256dc44686e7ce8e5468f0e4f0482?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/7525146/michael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 338, "favorite_count": 0, "accepted_answer_id": 42537794, "answer_count": 1, "score": 0, "last_activity_date": 1488387950, "creation_date": 1488387403, "last_edit_date": 1488387779, "question_id": 42537614, "link": "https://stackoverflow.com/questions/42537614/last-value-of-char-array-unknown-c", "title": "Last value of char array unknown - C", "body": "<p>I'm making a simple program in C, which checks the length of some char array and if it's less than 8, I want to fill a new array with zeroes and add it to the former array. Here comes the problem. I don't know why the last values are some signs(see the photo).</p>\n\n<pre><code>char* hexadecimalno = decToHex(decimal,hexadecimal);\nprintf(\"Hexadecimal: %s\\n\", hexadecimalno);\nchar zeroes [8 - strlen(hexadecimalno)];\nif(strlen(hexadecimalno) &lt; 8){\n    for(i = 0; i &lt; (8-strlen(hexadecimalno)); i++){\n        zeroes[i]='0';\n    }\n}\nprintf(\"zeroes: %s\\n\",zeroes);\nstrcat(zeroes,hexadecimalno);\nprintf(\"zeroes: %s\\n\",zeroes);\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/nNbxI.jpg\" rel=\"nofollow noreferrer\">result</a></p>\n"}, {"tags": ["c", "scanf", "gets"], "comments": [{"owner": {"reputation": 486, "user_id": 7302586, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/add2c35e26541725f67515dbb8ccd67a?s=128&d=identicon&r=PG&f=1", "display_name": "szpanczyk", "link": "https://stackoverflow.com/users/7302586/szpanczyk"}, "edited": false, "score": 0, "creation_date": 1488386489, "post_id": 42537235, "comment_id": 72210237, "body": "Why don&#39;t you provide the definition of the problem too, instead of making us reverse engineer it?"}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 2, "creation_date": 1488386556, "post_id": 42537235, "comment_id": 72210283, "body": "Please note that you execute <code>strlen()</code> in every iteration of your loops, yet they remain constant. You are wasting cycles."}, {"owner": {"reputation": 486, "user_id": 7302586, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/add2c35e26541725f67515dbb8ccd67a?s=128&d=identicon&r=PG&f=1", "display_name": "szpanczyk", "link": "https://stackoverflow.com/users/7302586/szpanczyk"}, "edited": false, "score": 0, "creation_date": 1488386670, "post_id": 42537235, "comment_id": 72210358, "body": "By the way, please read the information on how to write a good question. I&#39;m not saying it&#39;s very bad, but not exactly what this website is supposed to facilitate."}, {"owner": {"reputation": 93, "user_id": 5394898, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d3d808bce7451e40738af2745549db08?s=128&d=identicon&r=PG&f=1", "display_name": "A.Vik", "link": "https://stackoverflow.com/users/5394898/a-vik"}, "reply_to_user": {"reputation": 486, "user_id": 7302586, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/add2c35e26541725f67515dbb8ccd67a?s=128&d=identicon&r=PG&f=1", "display_name": "szpanczyk", "link": "https://stackoverflow.com/users/7302586/szpanczyk"}, "edited": false, "score": 0, "creation_date": 1488386694, "post_id": 42537235, "comment_id": 72210379, "body": "@szpanczyk Added the exact question.@Paul Ogilvie Can you suggest an alternative?"}, {"owner": {"reputation": 93, "user_id": 5394898, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d3d808bce7451e40738af2745549db08?s=128&d=identicon&r=PG&f=1", "display_name": "A.Vik", "link": "https://stackoverflow.com/users/5394898/a-vik"}, "edited": false, "score": 0, "creation_date": 1488386725, "post_id": 42537235, "comment_id": 72210404, "body": "Sorry.Didn&#39;t think it through"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 3, "creation_date": 1488386818, "post_id": 42537235, "comment_id": 72210496, "body": "<a href=\"http://stackoverflow.com/q/1694036/995714\">Why is the gets function so dangerous that it should not be used?</a>"}, {"owner": {"reputation": 486, "user_id": 7302586, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/add2c35e26541725f67515dbb8ccd67a?s=128&d=identicon&r=PG&f=1", "display_name": "szpanczyk", "link": "https://stackoverflow.com/users/7302586/szpanczyk"}, "edited": false, "score": 0, "creation_date": 1488386837, "post_id": 42537235, "comment_id": 72210513, "body": "The idea is that instead of:  - asking for general help in your particular problem  - you should ask for particular help in a general problem  :)"}, {"owner": {"reputation": 93, "user_id": 5394898, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d3d808bce7451e40738af2745549db08?s=128&d=identicon&r=PG&f=1", "display_name": "A.Vik", "link": "https://stackoverflow.com/users/5394898/a-vik"}, "edited": false, "score": 0, "creation_date": 1488386886, "post_id": 42537235, "comment_id": 72210553, "body": "Ok.What is the alternative to using gets in this particular problem?"}, {"owner": {"reputation": 486, "user_id": 7302586, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/add2c35e26541725f67515dbb8ccd67a?s=128&d=identicon&r=PG&f=1", "display_name": "szpanczyk", "link": "https://stackoverflow.com/users/7302586/szpanczyk"}, "edited": false, "score": 0, "creation_date": 1488386963, "post_id": 42537235, "comment_id": 72210607, "body": "Can&#39;t you even click the link that You&#39;ve been provided? :/"}, {"owner": {"reputation": 93, "user_id": 5394898, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d3d808bce7451e40738af2745549db08?s=128&d=identicon&r=PG&f=1", "display_name": "A.Vik", "link": "https://stackoverflow.com/users/5394898/a-vik"}, "edited": false, "score": 0, "creation_date": 1488387185, "post_id": 42537235, "comment_id": 72210750, "body": "I saw that link.I tried using fgets and gets_s,they are giving errors?Is there any quick-fix to this?"}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1488387294, "post_id": 42537235, "comment_id": 72210809, "body": "@A.Vik: What errors are you getting with <code>fgets</code>?  Also, realize you don&#39;t have to read the entire second line into memory all at once to do this - in fact, that&#39;s making your life harder at the moment."}, {"owner": {"reputation": 93, "user_id": 5394898, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d3d808bce7451e40738af2745549db08?s=128&d=identicon&r=PG&f=1", "display_name": "A.Vik", "link": "https://stackoverflow.com/users/5394898/a-vik"}, "edited": false, "score": 0, "creation_date": 1488387526, "post_id": 42537235, "comment_id": 72210953, "body": "Too few arguments..."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1488387767, "post_id": 42537235, "comment_id": 72211145, "body": "@A.Vik: Did you check the man page for <code>fgets</code> (or at least google for it)?  It does take more arguments than <code>gets</code> (and has different behavior where newlines are concerned)."}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 1, "creation_date": 1488388279, "post_id": 42537235, "comment_id": 72211478, "body": "I think that the problem of counting the occurrences of a <i>word</i> in a sentence is only a particular case of the more general problem of counting the occurrences of a <i>substring</i> in a string. I mean, given the word &quot;the&quot; and the sentence &quot;the pen is there&quot;, what is your expected output, 1 or 2?"}, {"owner": {"reputation": 93, "user_id": 5394898, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d3d808bce7451e40738af2745549db08?s=128&d=identicon&r=PG&f=1", "display_name": "A.Vik", "link": "https://stackoverflow.com/users/5394898/a-vik"}, "edited": false, "score": 0, "creation_date": 1488389498, "post_id": 42537235, "comment_id": 72212199, "body": "1 should be the answer in that case"}, {"owner": {"reputation": 93, "user_id": 5394898, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d3d808bce7451e40738af2745549db08?s=128&d=identicon&r=PG&f=1", "display_name": "A.Vik", "link": "https://stackoverflow.com/users/5394898/a-vik"}, "edited": false, "score": 0, "creation_date": 1488389578, "post_id": 42537235, "comment_id": 72212247, "body": "John Bode yes,I am right now trying to correct the code...."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1488390816, "post_id": 42537235, "comment_id": 72213007, "body": "&quot;I tried using scanf before but it fails to read the entire sentence&quot; --&gt;  lacks specificity.  There are countless ways to use <code>scanf()</code>, some will work for you here, others will not.  As this post lacks the <code>scanf()</code> code, the post is unclear as to what the problem was."}], "answers": [{"comments": [{"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1488390526, "post_id": 42538422, "comment_id": 72212844, "body": "Link only answers are not a good idea, expecially when that page cannot be reached..."}], "tags": [], "owner": {"reputation": 508, "user_id": 7424456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18a7caf43d710ebaa55527a221bbd211?s=128&d=identicon&r=PG&f=1", "display_name": "Bidisha Pyne", "link": "https://stackoverflow.com/users/7424456/bidisha-pyne"}, "is_accepted": false, "score": 0, "last_activity_date": 1488390637, "last_edit_date": 1488390637, "creation_date": 1488389960, "answer_id": 42538422, "question_id": 42537235, "link": "https://stackoverflow.com/questions/42537235/what-is-the-alternative-instead-of-using-getsc-and-getss-in-this-code/42538422#42538422", "title": "What is the alternative instead of using gets(c) and gets(s) in this code?", "body": "<p>This is the solution (<a href=\"http://www.sanfoundry.com/c-program-occurence-particular-word-string/\" rel=\"nofollow noreferrer\">answer</a>) of the program you are trying to implement. This also provide the correct method of getting a string.</p>\n\n<p>Hope this help in either ways!</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1488391289, "last_edit_date": 1495540829, "creation_date": 1488391289, "answer_id": 42538826, "question_id": 42537235, "link": "https://stackoverflow.com/questions/42537235/what-is-the-alternative-instead-of-using-getsc-and-getss-in-this-code/42538826#42538826", "title": "What is the alternative instead of using gets(c) and gets(s) in this code?", "body": "<blockquote>\n  <p>What is the alternative instead of using gets(c) and gets(s) in this code?</p>\n</blockquote>\n\n<p>Instead of <code>char c[20]; gets(c);</code>, use the following</p>\n\n<pre><code>// Read a line of text\nchar c[20+1];  // 1 more for the \\n\nif (fgets(c, sizeof c, stdin) == NULL) {\n  // Handle EOF or input error in some fashion\n  puts(\"Unexpected EOF or input error\");\n  return 1;\n}\n</code></pre>\n\n<p>Lop off the <code>'\\n'</code> <a href=\"https://stackoverflow.com/q/2693776/2410359\">Removing trailing newline character from fgets() input</a></p>\n\n<pre><code>// lop off a potential trailing '\\n'.\nc[strcspn(c, \"\\n\")] = '\\0';\n</code></pre>\n\n<p>The rest of code may still have other issues.</p>\n"}], "owner": {"reputation": 93, "user_id": 5394898, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d3d808bce7451e40738af2745549db08?s=128&d=identicon&r=PG&f=1", "display_name": "A.Vik", "link": "https://stackoverflow.com/users/5394898/a-vik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 639, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1488396132, "creation_date": 1488386374, "last_edit_date": 1488386598, "question_id": 42537235, "link": "https://stackoverflow.com/questions/42537235/what-is-the-alternative-instead-of-using-getsc-and-getss-in-this-code", "title": "What is the alternative instead of using gets(c) and gets(s) in this code?", "body": "<p>EDIT:</p>\n\n<p>Question:</p>\n\n<p>Write a program to find the number of times that a given word (i.e. a short string) occurs in a\nsentence (i.e. a long string!). Read data from standard input. The first line is a single word, which\nis followed by general text on the second line.</p>\n\n<p>Sample Input:</p>\n\n<pre><code>the\nthe cat sat on the mat\n</code></pre>\n\n<p>Sample Output:</p>\n\n<pre><code>2\n</code></pre>\n\n<p>I tried using scanf before but it fails to read the entire sentence and just checks the first word and returns 1 as the answer instead of 2</p>\n\n<p>The code is:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main()\n{\nchar s[200000], c[20], v = ' ';\nint i = 0, j, f, n = 0;\ngets(c);\ngets(s);\n\nwhile (i &lt; strlen(s))\n{\n    j = 0;\n    f = 0;\n    while (j &lt; strlen(c))\n    {\n        if (s[i++] != c[j++])\n        {\n            f = 1;\n            i--;\n            break;\n        }\n    }\n\n    if ((f == 0) &amp;&amp; (i == strlen(s) || s[i] == ' ') &amp;&amp; (v == ' '))\n    {\n        n++;\n        v = s[i++];\n    }\n    printf(\"%d\\n\", n);\n    return 0;\n}\n}\n</code></pre>\n"}, {"tags": ["c", "turbo-c"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1488385892, "post_id": 42537038, "comment_id": 72209829, "body": "C is not C++ is not C#"}, {"owner": {"reputation": 6254, "user_id": 2261424, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a0beda634f65f29aace865be9504e5e6?s=128&d=identicon&r=PG", "display_name": "AntonH", "link": "https://stackoverflow.com/users/2261424/antonh"}, "edited": false, "score": 3, "creation_date": 1488385948, "post_id": 42537038, "comment_id": 72209870, "body": "Surprised that code even compiles. Also, why do you not want to use the function that is <b>explicitly designed to compare strings in C</b>?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 3, "creation_date": 1488385959, "post_id": 42537038, "comment_id": 72209876, "body": "<code>=</code> is assignment, not comparison. <code>&#39; hello&#39;</code> is a single multi-byte character, not a string."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1488385990, "post_id": 42537038, "comment_id": 72209888, "body": "Stop writing <code>C</code> code using another language as a model.  You don&#39;t learn the language that way."}, {"owner": {"reputation": 1186, "user_id": 2290983, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/646ee78276bd8adeb3d512c92a226ec8?s=128&d=identicon&r=PG&f=1", "display_name": "Amit Kumar", "link": "https://stackoverflow.com/users/2290983/amit-kumar"}, "edited": false, "score": 3, "creation_date": 1488386002, "post_id": 42537038, "comment_id": 72209895, "body": "You need to read more about how to work with character array in C"}, {"owner": {"reputation": 818, "user_id": 7095889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28dd263cb10743a750eff5b85bb91bd5?s=128&d=identicon&r=PG&f=1", "display_name": "Yuriy Ivaskevych", "link": "https://stackoverflow.com/users/7095889/yuriy-ivaskevych"}, "edited": false, "score": 0, "creation_date": 1488386091, "post_id": 42537038, "comment_id": 72209962, "body": "Besides errors in your code, without <code>strcmp</code> you can alternatively use <a href=\"http://en.cppreference.com/w/c/string/byte/memcmp\" rel=\"nofollow noreferrer\"><code>memcmp</code></a> or use loops comparing character by character."}, {"owner": {"reputation": 486, "user_id": 7302586, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/add2c35e26541725f67515dbb8ccd67a?s=128&d=identicon&r=PG&f=1", "display_name": "szpanczyk", "link": "https://stackoverflow.com/users/7302586/szpanczyk"}, "edited": false, "score": 1, "creation_date": 1488386129, "post_id": 42537038, "comment_id": 72209993, "body": "oh my god this is such a guesswork and then instead of learning what each individual part does you come here to ask for help. lazy."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1488386135, "post_id": 42537038, "comment_id": 72209995, "body": "how could this be more wrong?"}, {"owner": {"reputation": 486, "user_id": 7302586, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/add2c35e26541725f67515dbb8ccd67a?s=128&d=identicon&r=PG&f=1", "display_name": "szpanczyk", "link": "https://stackoverflow.com/users/7302586/szpanczyk"}, "edited": false, "score": 1, "creation_date": 1488386188, "post_id": 42537038, "comment_id": 72210027, "body": "i blame people who provide easy answers to get points. i think this should be penalized or we&#39;ll keep getting more and more of homework questions."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1488386533, "post_id": 42537038, "comment_id": 72210267, "body": "Your latest update is still guessing (and you should not be changing the original code anyway).  Where are character strings in <code>C</code> surrounded by single quotes?  This goes to my previous comment --- stop using other languages rules when writing <code>C</code>."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1488386637, "post_id": 42537038, "comment_id": 72210334, "body": "<code>scanf(&quot;%s&quot;,ch) ==&#39;hello&#39;</code> does not mean what you expect. Read the man page or your beginners textbook what the return value of this function means."}, {"owner": {"reputation": 2008, "user_id": 4031891, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/2513ee43929b1d3e106426ecb342af79?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamed Sahir", "link": "https://stackoverflow.com/users/4031891/mohamed-sahir"}, "edited": false, "score": 0, "creation_date": 1488392015, "post_id": 42537038, "comment_id": 72213718, "body": "@ PaulMcKenzie  thanks for your replies because of much more understanding of languages  how c gets different from other programming models in conventions."}, {"owner": {"reputation": 4194, "user_id": 8164333, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lCAZ3.jpg?s=128&g=1", "display_name": "iamsankalp89", "link": "https://stackoverflow.com/users/8164333/iamsankalp89"}, "edited": false, "score": 0, "creation_date": 1505384415, "post_id": 42537038, "comment_id": 79395559, "body": "what is sense of scanf(&quot;%s&quot;,ch) ==&#39;hello&#39;"}], "answers": [{"comments": [{"owner": {"reputation": 2008, "user_id": 4031891, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/2513ee43929b1d3e106426ecb342af79?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamed Sahir", "link": "https://stackoverflow.com/users/4031891/mohamed-sahir"}, "edited": false, "score": 0, "creation_date": 1488390638, "post_id": 42537886, "comment_id": 72212904, "body": "thanks stephen suddenly i thought to learn c because of performance wise c and c++ occupies in first read by articles therefore apply the other language sand c instructions comparing and learning, while string manipulation somewhat struggling in c, so posted as question to get different thought of a progrmmersi am new to c ,and know string contains group of characters , so the collection will be split out by characters and will check and process it by using itertaions . I will read more articles and learn c string manipulations more to improve logical wise"}], "tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": false, "score": 1, "last_activity_date": 1488388247, "creation_date": 1488388247, "answer_id": 42537886, "question_id": 42537038, "link": "https://stackoverflow.com/questions/42537038/simple-ways-to-compare-two-strings-without-strcmp-in-c/42537886#42537886", "title": "Simple ways to compare two strings without Strcmp in c", "body": "<p>As mentioned by PaulMcKenzie, it seems that you apply concepts of other languages directly to the c programming language, mostly by guessing. If you do not have a book to start with, use at least google to find some tutorials. For example, I entered \"c strings introduction\" and got - among others - this <a href=\"https://www.programiz.com/c-programming/c-strings\" rel=\"nofollow noreferrer\">link</a>, which explains a lot of the issues you are currently having. </p>\n\n<p>The following does not answer your question or even solve your homework, but maybe it gives you enough hints to start. </p>\n\n<p>A \"string\" in c is an array of characters, terminated by a <code>0</code> (often written as <code>'\\0'</code>.</p>\n\n<p>String literals are enclosed in double quotes, i.e. <code>\"hello\"</code> (not <code>'hello'</code>). </p>\n\n<p>Single characters of a string can be accessed by an index, e.g. <code>char c = ch[0]</code> of <code>char c = ch[5]</code> or <code>int i=3; char c = ch[i]</code>.</p>\n\n<p>A loop that iterates through the characters of a string and looks for an <code>A</code> could look as follows:</p>\n\n<pre><code>int i=0;\nint found = 0;\nwhile (!found &amp;&amp; i &lt; 80 &amp;&amp; ch[i] != '\\0') {\n   if (ch[i] == 'A')\n     found = 1;\n\n   i++;\n} \n</code></pre>\n\n<p>This is not meant as an answer; It is just that I am a beginner, too (though in other fields than C); and beginners should help beginners :-)\nHave fun learning C, use google and good books, and be aware that it will take some time.</p>\n"}], "owner": {"reputation": 2008, "user_id": 4031891, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/2513ee43929b1d3e106426ecb342af79?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamed Sahir", "link": "https://stackoverflow.com/users/4031891/mohamed-sahir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3874, "favorite_count": 0, "answer_count": 1, "score": -6, "last_activity_date": 1488390901, "creation_date": 1488385847, "last_edit_date": 1488390901, "question_id": 42537038, "link": "https://stackoverflow.com/questions/42537038/simple-ways-to-compare-two-strings-without-strcmp-in-c", "title": "Simple ways to compare two strings without Strcmp in c", "body": "<p>I need to compare the  user enter values in string two string without using Inbuilt functions or(strcmp) in c. i have used first program  by using other languages its not working so i have created the second one as working in c ,is there any better way without  while loop:</p>\n\n<p>This question will help the people who have some basic knowledge in c and good understanding knowledge  like javascript or any other oops language programmers suddenly interest to learn c programming  concepts how c  string manipulation gets different from other languages and want to play with string manipulation without using any built-in function in c.</p>\n\n<pre><code>    #include&lt;stdio.h&gt;\n    void main()\n    {\n        char ch[80];\n        printf(\"Enter Your name:\" );\n        if(scanf(\"%s\",ch) ==\"hello\")\n        {\n            printf(\"hello\");\n        }\n        else if(scanf(\"%s\",ch) ==\"saythanku\")\n        {\n            printf(\"saythanku\");\n        }\n        else \n        {\n            printf(\"none\");\n        }\n    }\n\n\nWorking:\n\n\n#include&lt;stdio.h&gt;\nvoid main()\n{\n\nprintf(\"enter your name\");\nchar ch[80];\n\nscanf(\"%s\",ch);\nint a=compare(ch,\"hello\");\n\nif(a==0)\n{\n    printf(\"hello\");\n}\nelse\n{\n    printf(\"not hello\");\n}\n}\nint compare(char a[], char b[])\n{\n   int c = 0;\n\n   while( a[c] == b[c] )\n   {\n      if( a[c] == '\\0' || b[c] == '\\0' )\n         break;\n       c++;\n   }\n   if( a[c] == '\\0' &amp;&amp; b[c] == '\\0' )\n      return 0;\n   else\n      return -1;\n}\n</code></pre>\n\n<p>simple any otherways to compare</p>\n"}, {"tags": ["c", "x11", "motif"], "owner": {"reputation": 811, "user_id": 2742234, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z8Qhf.png?s=128&g=1", "display_name": "double_g", "link": "https://stackoverflow.com/users/2742234/double-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 148, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1488385841, "creation_date": 1488385841, "question_id": 42537036, "link": "https://stackoverflow.com/questions/42537036/a-renderbadpicture-xerror-rarely-occurs-from-xrender-extension", "title": "A &#39;RenderBadPicture&#39; Xerror rarely occurs from xrender extension", "body": "<p>Recently, I tried to upgrade the Motif library (libXm.so) to a newer version (2.3.3) with XFT support for rendering mutli-language characters.</p>\n\n<p>I ran the application and an very annoying X error occurs sometimes (many hours) randomly:</p>\n\n<blockquote>\n  <p>RenderBadPicture (invalid Picture parameter) in RenderChangePicture,\n  RenderCompositeGlyphs8 or RenderSetPictureClipRectangles in extension\n  RENDER.</p>\n</blockquote>\n\n<p>Error is produced asynchronously first by X11 low-level libraries. This is a summary of the back trace.</p>\n\n<p>_XError<br>\n_XReply<br>\nXQueryColor<br>\n_XmXftDrawString<br>\n_XmStringDrawSegment<br>\nXmStringDraw<br>\nXtDispatchEventToWidget<br>\nXtDispatchEvent<br>\nXtAppProcessEvent<br>\nmain  </p>\n\n<p>Back trace could change a little from a crash to an other.</p>\n\n<p>Please see an example in my code to draw a string in a drawable:</p>\n\n<pre><code>XftDraw xftDraw = XftDrawCreate(dpy, drawable, DefaultVisual(dpy, screenNum), colormap);\nXftDrawStringUtf8(xftDraw, xftcolor, xftFont, x, y, (const FcChar8*)line, strlen(line));\nXftDrawDestroy(xftDraw);\n</code></pre>\n\n<p>Running on:<br>\n - CentOS 6.5.<br>\n - X version 11 Revision 6 (Xft 2.3.1)<br>\n - single thread</p>\n\n<p>Question:\nCrash is unreproductible, have you some idea about a possible origin of this error ?</p>\n"}, {"tags": ["c", "linux-device-driver"], "comments": [{"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1488386383, "post_id": 42537007, "comment_id": 72210171, "body": "Please post the macro."}, {"owner": {"reputation": 476, "user_id": 1781025, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/adb8b1e62d53d4a1e0c264e8f57a742e?s=128&d=identicon&r=PG", "display_name": "Splaty", "link": "https://stackoverflow.com/users/1781025/splaty"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1488386514, "post_id": 42537007, "comment_id": 72210252, "body": "@PaulOgilvie posted in edit. It&#39;s here: <a href=\"http://lxr.free-electrons.com/source/include/linux/module.h#L210\" rel=\"nofollow noreferrer\">lxr.free-electrons.com/source/include/linux/module.h#L210</a>"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1488386703, "post_id": 42537007, "comment_id": 72210383, "body": "it looks like somedriver_cardSpecifc.o is not being linked. The linker can see the extern [] but not the concrete implemenation"}, {"owner": {"reputation": 1727, "user_id": 2014022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b5ab8fa77e562296a1b668005395762?s=128&d=identicon&r=PG", "display_name": "Peter K", "link": "https://stackoverflow.com/users/2014022/peter-k"}, "edited": false, "score": 0, "creation_date": 1488386985, "post_id": 42537007, "comment_id": 72210618, "body": "Should the last call read <code>MODULE_DEVICE_TABLE(i2c, somedriver_idtable);</code>?"}, {"owner": {"reputation": 476, "user_id": 1781025, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/adb8b1e62d53d4a1e0c264e8f57a742e?s=128&d=identicon&r=PG", "display_name": "Splaty", "link": "https://stackoverflow.com/users/1781025/splaty"}, "reply_to_user": {"reputation": 1727, "user_id": 2014022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b5ab8fa77e562296a1b668005395762?s=128&d=identicon&r=PG", "display_name": "Peter K", "link": "https://stackoverflow.com/users/2014022/peter-k"}, "edited": false, "score": 0, "creation_date": 1488387045, "post_id": 42537007, "comment_id": 72210660, "body": "@PeterK Oops, yes your are correct :). Sorry trying to not post real device name."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1488387049, "post_id": 42537007, "comment_id": 72210663, "body": "What happens if you make it <code>const</code>?"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1488387512, "post_id": 42537007, "comment_id": 72210945, "body": "I guess it needs the length of the original array in order to make the alias."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 2, "creation_date": 1488387710, "post_id": 42537007, "comment_id": 72211095, "body": "Why not just put the <code>MODULE_DEVICE_TABLE</code> in the card-specific file?"}, {"owner": {"reputation": 1727, "user_id": 2014022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b5ab8fa77e562296a1b668005395762?s=128&d=identicon&r=PG", "display_name": "Peter K", "link": "https://stackoverflow.com/users/2014022/peter-k"}, "edited": false, "score": 0, "creation_date": 1488387756, "post_id": 42537007, "comment_id": 72211139, "body": "Probably you can also just ignore the warning, it should still place the alias correctly."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "reply_to_user": {"reputation": 1727, "user_id": 2014022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b5ab8fa77e562296a1b668005395762?s=128&d=identicon&r=PG", "display_name": "Peter K", "link": "https://stackoverflow.com/users/2014022/peter-k"}, "edited": false, "score": 0, "creation_date": 1488388123, "post_id": 42537007, "comment_id": 72211382, "body": "@PeterK The <code>__mod_i2c__somedriver_idtable_device_table</code> alias in the symbol table would describe an object at the correct address, but with the wrong size, which might cause problems for the module tools."}, {"owner": {"reputation": 14999, "user_id": 8999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZD5Uo.jpg?s=128&g=1", "display_name": "Fabio Ceconello", "link": "https://stackoverflow.com/users/8999/fabio-ceconello"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1488388541, "post_id": 42537007, "comment_id": 72211635, "body": "@IanAbbott I don&#39;t think this would be a problem, because the end of the array is detected when an element with a null device name is reached, which is why the last element is an empty struct. But nonetheless it&#39;d be better &amp; cleaner to make the warning go away than just ignoring it."}, {"owner": {"reputation": 476, "user_id": 1781025, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/adb8b1e62d53d4a1e0c264e8f57a742e?s=128&d=identicon&r=PG", "display_name": "Splaty", "link": "https://stackoverflow.com/users/1781025/splaty"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1488391497, "post_id": 42537007, "comment_id": 72213404, "body": "@IanAbbott. Making it const didn&#39;t help. As for putting MODULE_DEVICE_TABLE in the same .c as the struct array, I tried that but it didn&#39;t help either. The reason I think is just by having the somedriver_idtable as a global causes the Macro to fail. I need to have it as global because it&#39;s used in somedriver.c as well for other stuff."}, {"owner": {"reputation": 476, "user_id": 1781025, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/adb8b1e62d53d4a1e0c264e8f57a742e?s=128&d=identicon&r=PG", "display_name": "Splaty", "link": "https://stackoverflow.com/users/1781025/splaty"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1488393293, "post_id": 42537007, "comment_id": 72214493, "body": "@IanAbbott  With the MODULE_DEVICE_TABLE in the same .c as the struct array looks to be working now on a clean build. So I take back what I said before. Still confused as to how and why though so I&#39;ll try a few more things and post what really ended up working. Thanks Ian, Peter and Fabio."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 1, "creation_date": 1488990979, "post_id": 42537007, "comment_id": 72478323, "body": "The <code>MODULE_DEVICE_TABLE</code> doesn&#39;t necessarily need to be in the same .c file as the table, but it needs to know the size of the table, and it cannot determine that from your current <code>extern</code> declaration. You could add the array length to the <code>extern</code> declaration, but you&#39;d have to change it every time you add or remove an entry in the table, which may be a maintenance nightmare. Since it doesn&#39;t really matter which .c file contains the <code>MODULE_DEVICE_TABLE</code>, putting it in the same file as the actual table is the most maintainer-friendly option."}, {"owner": {"reputation": 476, "user_id": 1781025, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/adb8b1e62d53d4a1e0c264e8f57a742e?s=128&d=identicon&r=PG", "display_name": "Splaty", "link": "https://stackoverflow.com/users/1781025/splaty"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1489078710, "post_id": 42537007, "comment_id": 72524361, "body": "@IanAbbott Thanks for the tip! So your suggestion works and is what I ended up going with. I&#39;ll post what I ended doing as the answer (sorry I forgot to do this before)."}], "answers": [{"comments": [{"owner": {"reputation": 476, "user_id": 1781025, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/adb8b1e62d53d4a1e0c264e8f57a742e?s=128&d=identicon&r=PG", "display_name": "Splaty", "link": "https://stackoverflow.com/users/1781025/splaty"}, "edited": false, "score": 0, "creation_date": 1488391341, "post_id": 42537922, "comment_id": 72213310, "body": "Thanks Fabio. I tried to declare the array size explicity in both .c and .h. It solves the original error &quot;assumed to have one element&quot;, but now has a differnt error: &quot;error: &#39;__mod_i2c__somedriver_idtable_device_table&#39; aliased to undefined symbol &#39;somedriver_idtable&#39;&quot;"}, {"owner": {"reputation": 476, "user_id": 1781025, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/adb8b1e62d53d4a1e0c264e8f57a742e?s=128&d=identicon&r=PG", "display_name": "Splaty", "link": "https://stackoverflow.com/users/1781025/splaty"}, "edited": false, "score": 0, "creation_date": 1488392937, "post_id": 42537922, "comment_id": 72214297, "body": "Hmm I just did a clean build and now it&#39;s compiling fine. I&#39;ll take back what I said and try a few more things. Thanks Fabio."}], "tags": [], "owner": {"reputation": 14999, "user_id": 8999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZD5Uo.jpg?s=128&g=1", "display_name": "Fabio Ceconello", "link": "https://stackoverflow.com/users/8999/fabio-ceconello"}, "is_accepted": false, "score": 1, "last_activity_date": 1488388347, "creation_date": 1488388347, "answer_id": 42537922, "question_id": 42537007, "link": "https://stackoverflow.com/questions/42537007/compilation-error-when-linking-global-array-of-structs/42537922#42537922", "title": "Compilation error when linking global array of structs", "body": "<p>You're getting an error just because you have the flag to treat all warnings as errors on. One way to solve that would be to disable such flag, but I'd recommend as a better approach to declare explicitly the array size [3] both in the header and in the .c, this should make the warning go away and the error with it.</p>\n"}, {"comments": [{"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1489083703, "post_id": 42701345, "comment_id": 72527375, "body": "Okay. Ideally, it should be declared <code>const</code> though."}], "tags": [], "owner": {"reputation": 476, "user_id": 1781025, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/adb8b1e62d53d4a1e0c264e8f57a742e?s=128&d=identicon&r=PG", "display_name": "Splaty", "link": "https://stackoverflow.com/users/1781025/splaty"}, "is_accepted": true, "score": 0, "last_activity_date": 1489079150, "creation_date": 1489079150, "answer_id": 42701345, "question_id": 42537007, "link": "https://stackoverflow.com/questions/42537007/compilation-error-when-linking-global-array-of-structs/42701345#42701345", "title": "Compilation error when linking global array of structs", "body": "<p>Here's what ended up working for me:</p>\n\n<ol>\n<li>I cleaned the build directory. Building on top of old builds caused failures with these files, not sure why.</li>\n<li>As @IanAbbott mentioned, I moved the MODULE_DEVICE_TABLE() macro to be within the same file as the i2c_device_id table definition. As Ian and Fabio mentioned the macro needs to see the size of the table and cannot see that with just the extern. I didn't want to have future coders needing to define the size with every new board so I chose to keep them together. Here's how that will look:</li>\n</ol>\n\n<p><strong>somedriver_cardSpecific.c</strong></p>\n\n<pre><code>#include &lt;linux/module.h&gt;    \n#include &lt;linux/i2c.h&gt;\n#include \"somedriver.h\"\n\nstruct i2c_device_id somedriver_idtable[] = {\n    { \"somedevice_1\",   0 },\n    { \"somedevice_2\",   1 },\n    { },\n};\nMODULE_DEVICE_TABLE(i2c, somedriver_idtable);\n</code></pre>\n\n<p><strong>somedriver.h</strong></p>\n\n<pre><code>#include &lt;linux/i2c.h&gt;\n\nextern struct i2c_device_id somedriver_idtable[];\n</code></pre>\n\n<p>Driver still works fine. I hope that helps someone who comes across same problem.</p>\n"}], "owner": {"reputation": 476, "user_id": 1781025, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/adb8b1e62d53d4a1e0c264e8f57a742e?s=128&d=identicon&r=PG", "display_name": "Splaty", "link": "https://stackoverflow.com/users/1781025/splaty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "accepted_answer_id": 42701345, "answer_count": 2, "score": 1, "last_activity_date": 1489079150, "creation_date": 1488385773, "last_edit_date": 1488387684, "question_id": 42537007, "link": "https://stackoverflow.com/questions/42537007/compilation-error-when-linking-global-array-of-structs", "title": "Compilation error when linking global array of structs", "body": "<p>I'm trying to define an array of structs in <code>somedriver_cardSpecific.c</code>, declare it in <code>somedriver.h</code>, then use it in <code>somedriver.c</code>. But I get a compilation error in <code>somedriver.c</code>:</p>\n\n<pre><code>error: array '__mod_i2c__somedriver_idtable_device_table' assumed to have one element [-Werror]\n extern const typeof(name) __mod_##type##__##name##_device_table\n\nin expansion of macro 'MODULE_DEVICE_TABLE'\n MODULE_DEVICE_TABLE(i2c, somedriver_idtable);\n</code></pre>\n\n<p>Here are the relevant bits of code:</p>\n\n<p><strong>somedriver_cardSpecific.c</strong></p>\n\n<pre><code>#include &lt;linux/i2c.h&gt;\n\n#include \"somedriver.h\"\n\nstruct i2c_device_id somedriver_idtable[] = {\n    { \"somedevice_1\",   0 },\n    { \"somedevice_2\",   1 },\n    { },\n};\n</code></pre>\n\n<p><strong>somedriver.h</strong></p>\n\n<pre><code>#include &lt;linux/i2c.h&gt;\n\nextern struct i2c_device_id somedriver_idtable[];\n</code></pre>\n\n<p><strong>somedriver.c</strong></p>\n\n<pre><code>#include \"somedriver.h\"\n\nMODULE_DEVICE_TABLE(i2c, somedriver_idtable);\n</code></pre>\n\n<p>Not sure why I'm getting that compilation error. Am I doing this linkage wrong: does the definition of somedriver_idtable need a definite size? or is it a constraint of the <code>MODULE_DEVICE_TABLE</code> macro?</p>\n\n<p>If you're wondering why in this Linux device driver I'm separating the i2c_device_id table from the MODULE_DEVICE_TABLE: I'm trying to re-factor the code so later boards that have different amounts of i2c devices can just create their own somedriver_cardSpecific.c file and compile/link that.</p>\n\n<p>Thank you for the help.</p>\n\n<p><strong>EDIT:</strong>\nThe macro is defined in Linux kernel: linux/module.h.\n<a href=\"http://lxr.free-electrons.com/source/include/linux/module.h#L212\" rel=\"nofollow noreferrer\">http://lxr.free-electrons.com/source/include/linux/module.h#L212</a></p>\n\n<pre><code>210 #ifdef MODULE\n211 /* Creates an alias so file2alias.c can find device table. */\n212 #define MODULE_DEVICE_TABLE(type, name)                                 \\\n213 extern const typeof(name) __mod_##type##__##name##_device_table         \\\n214   __attribute__ ((unused, alias(__stringify(name))))\n215 #else  /* !MODULE */\n216 #define MODULE_DEVICE_TABLE(type, name)\n217 #endif\n</code></pre>\n"}, {"tags": ["python", "c", "scipy"], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 1226313, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/28f965bcb693aa1d84efb2d243416bc1?s=128&d=identicon&r=PG", "display_name": "user1226313", "link": "https://stackoverflow.com/users/1226313/user1226313"}, "edited": false, "score": 0, "creation_date": 1488521127, "post_id": 42537548, "comment_id": 72276897, "body": "The problem is that according to their documentation, and my testing, n only tells the number of additional parameters and not the number of dimensions."}], "tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": false, "score": 0, "last_activity_date": 1488387244, "creation_date": 1488387244, "answer_id": 42537548, "question_id": 42536982, "link": "https://stackoverflow.com/questions/42536982/how-to-know-number-of-dimensions-in-c-function-called-by-nquad/42537548#42537548", "title": "How to know number of dimensions in C function called by nquad?", "body": "<p>I read the documentation (your first link). I think what they say is, that instead of calling <code>func(x0, x1, ..., xn, t0, t1, ..., tm)</code>, they \"condense all parameters into a count and an array in <code>f(int n, double args[n])</code>.</p>\n\n<p>Note that both pushing all the variables onto the stack, and getting them from the stack are costly operations when performed often and that can be avoided in this manner.</p>\n"}, {"tags": [], "owner": {"reputation": 39, "user_id": 1226313, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/28f965bcb693aa1d84efb2d243416bc1?s=128&d=identicon&r=PG", "display_name": "user1226313", "link": "https://stackoverflow.com/users/1226313/user1226313"}, "is_accepted": false, "score": 0, "last_activity_date": 1488558176, "creation_date": 1488558176, "answer_id": 42583809, "question_id": 42536982, "link": "https://stackoverflow.com/questions/42536982/how-to-know-number-of-dimensions-in-c-function-called-by-nquad/42583809#42583809", "title": "How to know number of dimensions in C function called by nquad?", "body": "<p>I got the answer in a scipy issue on github: n is the length of double args[] which includes the coordinates where the function should be evaluated and any additional parameters given to nquad and passed on to the c function.</p>\n"}], "owner": {"reputation": 39, "user_id": 1226313, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/28f965bcb693aa1d84efb2d243416bc1?s=128&d=identicon&r=PG", "display_name": "user1226313", "link": "https://stackoverflow.com/users/1226313/user1226313"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1488558176, "creation_date": 1488385710, "question_id": 42536982, "link": "https://stackoverflow.com/questions/42536982/how-to-know-number-of-dimensions-in-c-function-called-by-nquad", "title": "How to know number of dimensions in C function called by nquad?", "body": "<p>Scipy <a href=\"https://docs.scipy.org/doc/scipy-0.18.1/reference/generated/scipy.integrate.nquad.html#scipy.integrate.nquad\" rel=\"nofollow noreferrer\">documentation</a> for nquad states that a c function used for integration is of the form</p>\n\n<pre><code>f(int n, double args[n])\nwhere n is the number of extra parameters and args is an array of doubles of the additional parameters.\n</code></pre>\n\n<p>So how is the c function supposed to know how many dimensions are being integrated in order to use correct number of args?</p>\n\n<p>If I modify the c function used in general <a href=\"https://docs.scipy.org/doc/scipy-0.18.1/reference/tutorial/integrate.html#faster-integration-using-ctypes\" rel=\"nofollow noreferrer\">documentation</a> to:</p>\n\n<pre><code>#include \"stdio.h\"\ndouble f(int n, double args[]) {\n    (void)args;\n    printf(\"%i\\n\", n);\n    return 0;\n}\n</code></pre>\n\n<p>compile with</p>\n\n<pre><code>gcc -fPIC -shared func.c -o func.so\n</code></pre>\n\n<p>and run this python program:</p>\n\n<pre><code>#!/usr/bin/env python3\nimport ctypes\nfrom scipy.integrate import nquad\nlib = ctypes.CDLL('func.so')\nfunc = lib.f\nfunc.restype = ctypes.c_double\nfunc.argtypes = (ctypes.c_int, ctypes.c_double)\nprint(nquad(func, [[0, 1]]))\n</code></pre>\n\n<p>I get a value between 32764 and 32767 for n on 64bit fedora 25 while on a 32 bit fedora 25 I get 0. In above link the c function does not check the value of n but uses args[0]...args[2] so is there no way to know how many dimensions are being integrated?</p>\n\n<p>Calling nquad with:</p>\n\n<pre><code>print(nquad(func, [[0, 1]], args = [1,2,3]))\n</code></pre>\n\n<p>instead does not change what is printed on 64 bit system even though n should be different. I'm using</p>\n\n<pre><code>gcc (GCC) 6.3.1 20161221 (Red Hat 6.3.1-1)\nPython 3.5.2\nscipy 0.18.0\n</code></pre>\n"}, {"tags": ["c", "compiler-errors", "gnu"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 4, "creation_date": 1488385593, "post_id": 42536924, "comment_id": 72209587, "body": "You can&#39;t use &quot;smart&quot; quotes in source files."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1488385694, "post_id": 42536924, "comment_id": 72209664, "body": "The first thing to do with compiler errors is not to come to Stack Overflow and ask about it, but to enter the exact error into Google search and open the first link."}, {"owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "edited": false, "score": 0, "creation_date": 1488385737, "post_id": 42536924, "comment_id": 72209713, "body": "These errors are coming from extended ASCII characters in the source code, which are not allowed by the syntax."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1488385749, "post_id": 42536924, "comment_id": 72209719, "body": "If you use an editor with syntax highlighting, strings using &quot;normal&quot; double-quotes <code>&quot;</code> are probably having a special color. If you use your quotes then it won&#39;t have that special color. Are you perhaps not using a code-oriented text editor? Are you using a documentation editor like Microsoft Word or similar?"}, {"owner": {"reputation": 28015, "user_id": 63550, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/RIZKi.png?s=128&g=1", "display_name": "Peter Mortensen", "link": "https://stackoverflow.com/users/63550/peter-mortensen"}, "edited": false, "score": 0, "creation_date": 1615043117, "post_id": 42536924, "comment_id": 117572001, "body": "The real duplicate is the canonical <i><a href=\"https://stackoverflow.com/questions/19198332\">Compilation error: stray \u2018\\302\u2019 in program, etc.</a></i>."}, {"owner": {"reputation": 28015, "user_id": 63550, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/RIZKi.png?s=128&g=1", "display_name": "Peter Mortensen", "link": "https://stackoverflow.com/users/63550/peter-mortensen"}, "edited": false, "score": 0, "creation_date": 1615060258, "post_id": 42536924, "comment_id": 117577054, "body": "It is not only 342. It is the sequence 342 200 234. A much more direct analysis is 342 200 234 (octal) \u2192 0xE2 0x80 0x9C \u2192 UTF-8 sequence for Unicode code point U+201C <a href=\"https://www.utf8-chartable.de/unicode-utf8-table.pl?start=8192&amp;number=128\" rel=\"nofollow noreferrer\">LEFT DOUBLE QUOTATION MARK</a>. Most text editors (e.g. <a href=\"https://en.wikipedia.org/wiki/Geany\" rel=\"nofollow noreferrer\">Geany</a> (Linux and Windows) and <a href=\"https://en.wikipedia.org/wiki/Notepad%2B%2B\" rel=\"nofollow noreferrer\">Notepad++</a>) with a <a href=\"https://en.wikipedia.org/wiki/Regular_expression\" rel=\"nofollow noreferrer\">regular expression</a> mode will be able to do search/replace for Unicode code point U+201C, using <code>\\x{201C}</code>."}], "answers": [{"tags": [], "owner": {"reputation": 30168, "user_id": 5612562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gzBQY.jpg?s=128&g=1", "display_name": "msc", "link": "https://stackoverflow.com/users/5612562/msc"}, "is_accepted": true, "score": 3, "last_activity_date": 1614922216, "last_edit_date": 1614922216, "creation_date": 1488386058, "answer_id": 42537121, "question_id": 42536924, "link": "https://stackoverflow.com/questions/42536924/why-am-i-getting-the-stray-342-error-in-the-c-program/42537121#42537121", "title": "Why am I getting the stray &#39;342&#39; error in the C program?", "body": "<p>Use correct the quotation mark for string representation in C.</p>\n<pre><code>printf(&quot;command line argument [%d] = %s \\n&quot;, i, argv[i]);\n</code></pre>\n<p>Instead of</p>\n<pre><code>printf(\u201ccommand line argument [%d] = %s \\n\u201d, i, argv[i]);\n</code></pre>\n"}], "owner": {"reputation": 151, "user_id": 6742917, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9f10042652c6089d6b0153388d5d0ce2?s=128&d=identicon&r=PG&f=1", "display_name": "Selin G&#246;k", "link": "https://stackoverflow.com/users/6742917/selin-g%c3%b6k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4113, "favorite_count": 0, "closed_date": 1488386024, "accepted_answer_id": 42537121, "answer_count": 1, "score": 0, "last_activity_date": 1614922948, "creation_date": 1488385532, "last_edit_date": 1614922948, "question_id": 42536924, "link": "https://stackoverflow.com/questions/42536924/why-am-i-getting-the-stray-342-error-in-the-c-program", "closed_reason": "Duplicate", "title": "Why am I getting the stray &#39;342&#39; error in the C program?", "body": "<p>I am trying to compile a C file in the GNU/Linux operating system, but when I try to compile this code, the compiler gives me some errors.</p>\n<p>My <em>op.c</em> file is this:</p>\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(int argc, char *argv[]){\n\n    int i;\n    for (i=0; i &lt; argc; i++){\n        printf(\u201ccommand line argument [%d] = %s \\n\u201d, i, argv[i]);\n    }\n\n    return 0;\n}\n</code></pre>\n<p>When I try to compile this code, I am getting these errors. How can I fix them?</p>\n<pre class=\"lang-none prettyprint-override\"><code>op.c: In function \u2018main\u2019:\nop.c:6:3: error: stray \u2018\\342\u2019 in program\n   printf(\u201ccommand line argument [%d] = %s \\n\u201d, i, argv[i]);\n   ^\nop.c:6:3: error: stray \u2018\\200\u2019 in program\nop.c:6:3: error: stray \u2018\\234\u2019 in program\nop.c:6:13: error: \u2018command\u2019 undeclared (first use in this function)\n   printf(\u201ccommand line argument [%d] = %s \\n\u201d, i, argv[i]);\n             ^\nop.c:6:13: note: each undeclared identifier is reported only once for each function it appears in\nop.c:6:21: error: expected \u2018)\u2019 before \u2018line\u2019\n   printf(\u201ccommand line argument [%d] = %s \\n\u201d, i, argv[i]);\n                     ^\nop.c:6:21: error: stray \u2018\\\u2019 in program\nop.c:6:21: error: stray \u2018\\342\u2019 in program\nop.c:6:21: error: stray \u2018\\200\u2019 in program\nop.c:6:21: error: stray \u2018\\235\u2019 in program\n</code></pre>\n"}, {"tags": ["c", "linux", "sockets", "tcp"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1488385833, "post_id": 42536919, "comment_id": 72209778, "body": "Perhaps the system doesn&#39;t have the resolution you ask for, and rounds up to the nearest microsecond possible?"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1488386713, "post_id": 42536919, "comment_id": 72210392, "body": "@Someprogrammerdude: It&#39;s actually rounding to the nearest millisecond, question&#39;s mention of milliseconds is incorrect, <code>tv_usec</code> is measured in microseconds."}, {"owner": {"reputation": 29251, "user_id": 72178, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/M3OuM.png?s=128&g=1", "display_name": "ks1322", "link": "https://stackoverflow.com/users/72178/ks1322"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1488387451, "post_id": 42536919, "comment_id": 72210912, "body": "@BenVoigt, thanks, edited the question."}], "answers": [{"tags": [], "owner": {"reputation": 10281, "user_id": 51760, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SI89u.jpg?s=128&g=1", "display_name": "Aif", "link": "https://stackoverflow.com/users/51760/aif"}, "is_accepted": true, "score": 1, "last_activity_date": 1488386520, "creation_date": 1488386520, "answer_id": 42537290, "question_id": 42536919, "link": "https://stackoverflow.com/questions/42536919/why-so-rcvtimeo-timeout-differs-after-it-was-set/42537290#42537290", "title": "Why SO_RCVTIMEO timeout differs after it was set?", "body": "<p>According to the kernel <a href=\"http://lxr.free-electrons.com/source/net/core/sock.c\" rel=\"nofollow noreferrer\">sources</a>: when setting the <code>SO_RCVTIMEO</code> converts the <code>struct tv</code> into a <code>long</code> value, using arithmetic on the <code>HZ</code> value. On the other hand, when retrieving the <code>SO_RCVTIMEO</code> value, a <code>struct tv</code> is constructed from the <code>long</code> value. Hence, the result depends on the time resolution (the <code>HZ</code> value), and the arithmetic divisions and modulos.</p>\n"}], "owner": {"reputation": 29251, "user_id": 72178, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/M3OuM.png?s=128&g=1", "display_name": "ks1322", "link": "https://stackoverflow.com/users/72178/ks1322"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 803, "favorite_count": 0, "accepted_answer_id": 42537290, "answer_count": 1, "score": 2, "last_activity_date": 1488387327, "creation_date": 1488385514, "last_edit_date": 1488387327, "question_id": 42536919, "link": "https://stackoverflow.com/questions/42536919/why-so-rcvtimeo-timeout-differs-after-it-was-set", "title": "Why SO_RCVTIMEO timeout differs after it was set?", "body": "<p>I am on Fedora 25. In the following test program I set recv timeout to 12 sec, 12345 microsec with <code>setsockopt</code>. But when I get timeout value with <code>getsockopt</code>, I get slightly different value: 12 sec, 13000 microsec. I expect it to be the same as it was set by <code>setsockopt</code>.</p>\n\n<p>Why it differs ?</p>\n\n<pre><code>[ ~]$ cat sockopt.c\n#include &lt;stdio.h&gt;\n#include &lt;sys/time.h&gt;\n#include &lt;sys/socket.h&gt;\n\nint main()\n{\n    int sd = socket(AF_INET, SOCK_STREAM, 0);\n    int rc;\n    struct timeval tv;\n    socklen_t len = sizeof(tv);\n\n    tv.tv_sec = 12;\n    tv.tv_usec = 12345;\n    rc = setsockopt(sd, SOL_SOCKET, SO_RCVTIMEO, &amp;tv, sizeof(tv));\n    if (rc &lt; 0) printf(\"oops\\n\");\n\n    rc = getsockopt(sd, SOL_SOCKET, SO_RCVTIMEO, &amp;tv, &amp;len);\n    if (rc &lt; 0) printf(\"oops\\n\");\n    printf(\"%ld, %ld\\n\",  tv.tv_sec, tv.tv_usec);\n}\n[ ~]$ \n[ ~]$ gcc -Wall sockopt.c\n[ ~]$ \n[ ~]$ ./a.out \n12, 13000\n[ ~]$ \n</code></pre>\n"}, {"tags": ["c", "pointers", "structure"], "answers": [{"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 3, "last_activity_date": 1488384165, "creation_date": 1488384165, "answer_id": 42536458, "question_id": 42536419, "link": "https://stackoverflow.com/questions/42536419/why-do-we-need-pointer-to-a-structure-pointer-to-change-members-value/42536458#42536458", "title": "Why do we need pointer to a structure pointer to change members value?", "body": "<p><code>struct someStruct* foo</code> is fine, you don't need <code>struct someStruct** foo</code>. Not sure where you got that idea from, but it's not correct.</p>\n"}, {"comments": [{"owner": {"reputation": 1707, "user_id": 4627565, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-mGteM1QT0Zk/AAAAAAAAAAI/AAAAAAAAASs/fK5voIJW1VU/photo.jpg?sz=128", "display_name": "Bionix1441", "link": "https://stackoverflow.com/users/4627565/bionix1441"}, "edited": false, "score": 0, "creation_date": 1488384794, "post_id": 42536546, "comment_id": 72209006, "body": "I see, but why in the second case we need pointer to a pointer to return the malloc&#39;d memory? why can&#39;t we pass only a pointer to foo ?"}, {"owner": {"reputation": 352, "user_id": 2306821, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5585f23c37ce31a732ee7368d4e9b095?s=128&d=identicon&r=PG", "display_name": "PanzerKadaver", "link": "https://stackoverflow.com/users/2306821/panzerkadaver"}, "edited": false, "score": 1, "creation_date": 1488384855, "post_id": 42536546, "comment_id": 72209061, "body": "Is it really a good practice ? I mean, returning a struct pointer allocated inside initializeFields sounds way better than allocating in a pointer of a pointer and return nothing, not even an error code in case of malloc failure."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 1707, "user_id": 4627565, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-mGteM1QT0Zk/AAAAAAAAAAI/AAAAAAAAASs/fK5voIJW1VU/photo.jpg?sz=128", "display_name": "Bionix1441", "link": "https://stackoverflow.com/users/4627565/bionix1441"}, "edited": false, "score": 2, "creation_date": 1488385201, "post_id": 42536546, "comment_id": 72209301, "body": "@Bionix1441 Because C only have what is called <i>pass by value</i>, which means a copy is created for the passed argument. Modifying a copy will of course not modify the original. If you have a function that takes an <code>int</code> argument, and in the function you modify the argument, would you expect the value you pass to the function in the call to be modified?"}, {"owner": {"reputation": 1707, "user_id": 4627565, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-mGteM1QT0Zk/AAAAAAAAAAI/AAAAAAAAASs/fK5voIJW1VU/photo.jpg?sz=128", "display_name": "Bionix1441", "link": "https://stackoverflow.com/users/4627565/bionix1441"}, "edited": false, "score": 2, "creation_date": 1488385473, "post_id": 42536546, "comment_id": 72209493, "body": "@Someprogrammerdude So if I understood you correctly : to modify <code>int</code> we need a pointer, to modify the actual pointer we need pointer to this pointer"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 1707, "user_id": 4627565, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-mGteM1QT0Zk/AAAAAAAAAAI/AAAAAAAAASs/fK5voIJW1VU/photo.jpg?sz=128", "display_name": "Bionix1441", "link": "https://stackoverflow.com/users/4627565/bionix1441"}, "edited": false, "score": 1, "creation_date": 1488385524, "post_id": 42536546, "comment_id": 72209544, "body": "@Bionix1441 Correct. Added a couple of example to show that with integers."}, {"owner": {"reputation": 1707, "user_id": 4627565, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-mGteM1QT0Zk/AAAAAAAAAAI/AAAAAAAAASs/fK5voIJW1VU/photo.jpg?sz=128", "display_name": "Bionix1441", "link": "https://stackoverflow.com/users/4627565/bionix1441"}, "edited": false, "score": 0, "creation_date": 1488385573, "post_id": 42536546, "comment_id": 72209576, "body": "@Someprogrammerdude Thank you"}, {"owner": {"reputation": 352, "user_id": 2306821, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5585f23c37ce31a732ee7368d4e9b095?s=128&d=identicon&r=PG", "display_name": "PanzerKadaver", "link": "https://stackoverflow.com/users/2306821/panzerkadaver"}, "reply_to_user": {"reputation": 1707, "user_id": 4627565, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-mGteM1QT0Zk/AAAAAAAAAAI/AAAAAAAAASs/fK5voIJW1VU/photo.jpg?sz=128", "display_name": "Bionix1441", "link": "https://stackoverflow.com/users/4627565/bionix1441"}, "edited": false, "score": 1, "creation_date": 1488385646, "post_id": 42536546, "comment_id": 72209629, "body": "@Bionix1441 When you want to modify something passed as a parameter, you need a pointer to that thing."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 2, "last_activity_date": 1488385504, "last_edit_date": 1488385504, "creation_date": 1488384377, "answer_id": 42536546, "question_id": 42536419, "link": "https://stackoverflow.com/questions/42536419/why-do-we-need-pointer-to-a-structure-pointer-to-change-members-value/42536546#42536546", "title": "Why do we need pointer to a structure pointer to change members value?", "body": "<p>To only change the members of the structure you don't need that. But to change the actual pointer <em>to</em> the structure you need to emulate <em>pass by reference</em> by using pointer to a pointer to the structure.</p>\n\n<p>For example, to only change a member this is enough</p>\n\n<pre><code>void initializeFields(struct someStruct* foo)\n{\n    foo-&gt;field1 = 1;\n    foo-&gt;field2 = 2;\n}\n\nint main(void)\n{\n    struct someStruct bar;\n    initializeFields(&amp;bar);\n    printf(\"field1 = %d\\n\", bar.field1);\n    printf(\"field2 = %d\\n\", bar.field2);\n\n    return 0;\n}\n</code></pre>\n\n<p>But if you for example want to dynamically allocate the structure in the function you need to emulate pass by reference:</p>\n\n<pre><code>void initializeFields(struct someStruct** foo)\n{\n    // The difference is this assignment\n    *foo = malloc(sizeof(struct someStruct));\n\n    (*foo)-&gt;field1 = 1;\n    (*foo)-&gt;field2 = 2;\n}\n\nint main(void)\n{\n    struct someStruct* bar;\n    initializeFields(&amp;bar);\n    printf(\"field1 = %d\\n\", bar-&gt;field1);\n    printf(\"field2 = %d\\n\", bar-&gt;field2);\n\n    return 0;\n}\n</code></pre>\n\n<hr>\n\n<p>Two more examples to show the difference between pass by value and emulating pass by reference.</p>\n\n<p>Consider the following program:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid foo(int y)\n{\n    y = 5;\n}\n\nint main(void)\n{\n    int x = 1;\n    printf(\"1: x = %d\\n\", x);\n    foo(x);\n    printf(\"2: x = %d\\n\", x);\n\n    return 0;\n}\n</code></pre>\n\n<p>The above program will print</p>\n\n<pre>\n1: x = 1\n2: x = 1\n</pre>\n\n<p>That is because a <em>copy</em> of the value in <code>x</code> is passed to the function <code>foo</code>. Modifying the local copy inside <code>foo</code> will not modify the original variable <code>x</code> inside <code>main</code>.</p>\n\n<p>Now to emulate pass by reference:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid foo(int *y)\n{\n    *y = 5;\n}\n\nint main(void)\n{\n    int x = 1;\n    printf(\"1: x = %d\\n\", x);\n    foo(&amp;x);\n    printf(\"2: x = %d\\n\", x);\n\n    return 0;\n}\n</code></pre>\n\n<p>This program will print</p>\n\n<pre>\n1: x = 1\n2: x = 5\n</pre>\n\n<p>This is because we don't change the pointer variable <code>y</code> inside the function <code>foo</code>, but we change the value of where it points, which happens to be the variable <code>x</code> in the <code>main</code> function.</p>\n"}, {"tags": [], "owner": {"reputation": 352, "user_id": 2306821, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5585f23c37ce31a732ee7368d4e9b095?s=128&d=identicon&r=PG", "display_name": "PanzerKadaver", "link": "https://stackoverflow.com/users/2306821/panzerkadaver"}, "is_accepted": false, "score": 1, "last_activity_date": 1488384604, "creation_date": 1488384604, "answer_id": 42536625, "question_id": 42536419, "link": "https://stackoverflow.com/questions/42536419/why-do-we-need-pointer-to-a-structure-pointer-to-change-members-value/42536625#42536625", "title": "Why do we need pointer to a structure pointer to change members value?", "body": "<p>There are very specific cases where you need pointer to a struct pointer (array of struct pointers, mostly).</p>\n\n<p>Otherwise, a pointer to a struct is enough.</p>\n\n<pre><code>struct someStruct\n{\n    int field1;\n    int field2;\n}\n\nvoid initializeFields(struct someStruct* foo)\n{\n    foo-&gt;field1 = 42;\n    foo-&gt;field2 = -1;\n}\n</code></pre>\n"}], "owner": {"reputation": 1707, "user_id": 4627565, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-mGteM1QT0Zk/AAAAAAAAAAI/AAAAAAAAASs/fK5voIJW1VU/photo.jpg?sz=128", "display_name": "Bionix1441", "link": "https://stackoverflow.com/users/4627565/bionix1441"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1947, "favorite_count": 0, "accepted_answer_id": 42536546, "answer_count": 3, "score": 0, "last_activity_date": 1488385504, "creation_date": 1488384058, "question_id": 42536419, "link": "https://stackoverflow.com/questions/42536419/why-do-we-need-pointer-to-a-structure-pointer-to-change-members-value", "title": "Why do we need pointer to a structure pointer to change members value?", "body": "<p>While for simple types <code>(simple types: int, char..)</code> we directly use pointers <code>(their address)</code> as an argument to a function to permanently change their value in the main program, can someone explain to me why for structures we need a pointer to a <code>Structure pointer</code>, and not just a pointer?</p>\n\n<pre><code>struct someStruct\n{\n  int field1;\n  int field2;\n}\n\nvoid initializeFields(struct someStruct** foo)\n{\n  //changing fields\n}\n\n//while \nvoid initializeFields(struct someStruct* foo) //does not work ?\n</code></pre>\n"}, {"tags": ["c", "visual-c++", "printf"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1488385130, "post_id": 42536311, "comment_id": 72209253, "body": "Defining names of the standard library invokes undefined behaviour. They are reserved for the implementation. So are names starting with underscore at file-level. Briefly: You are not allowed to do this and gcc &quot;eating&quot; this is just by chance (it is not guaranteed to work as you expect, though)."}], "answers": [{"tags": [], "owner": {"reputation": 11030, "user_id": 656346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WCIys.png?s=128&g=1", "display_name": "seva titov", "link": "https://stackoverflow.com/users/656346/seva-titov"}, "is_accepted": true, "score": 1, "last_activity_date": 1488386284, "creation_date": 1488386284, "answer_id": 42537205, "question_id": 42536311, "link": "https://stackoverflow.com/questions/42536311/msvc-1900-and-define-vsnprintf/42537205#42537205", "title": "MSVC 1900 and define vsnprintf", "body": "<p>The code in VC header specifically prevents you from doing this:</p>\n\n<pre><code>#if defined vsnprintf\n    // This definition of vsnprintf will generate \"warning C4005: 'vsnprintf': macro\n    // redefinition\" with a subsequent line indicating where the previous definition\n    // of vsnprintf was.  This makes it easier to find where vsnprintf was defined.\n    #pragma warning(push, 1)\n    #pragma warning(1: 4005)\n    #define vsnprintf Do not define vsnprintf as a macro\n    #pragma warning(pop)\n    #error Macro definition of vsnprintf conflicts with Standard Library function declaration\n#endif\n</code></pre>\n\n<p>As @Olaf mentioned, you might run into issues with library code if you redefine standard function. However if you only limit this to your code and ensure new definition is not picked up by any of the standard headers, you should be able to do <code>#define vsnprintf</code> <strong>after</strong> you included <code>&lt;stdio.h&gt;</code>.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define vsnptrintf my_test_vsnprintf\n</code></pre>\n"}], "owner": {"reputation": 684, "user_id": 4970667, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/FWd3x.jpg?s=128&g=1", "display_name": "Quentin", "link": "https://stackoverflow.com/users/4970667/quentin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 393, "favorite_count": 0, "accepted_answer_id": 42537205, "answer_count": 1, "score": 1, "last_activity_date": 1488386284, "creation_date": 1488383745, "question_id": 42536311, "link": "https://stackoverflow.com/questions/42536311/msvc-1900-and-define-vsnprintf", "title": "MSVC 1900 and define vsnprintf", "body": "<p>I have a problem with a define inside my C code : for tests purpose, I need to define <code>vsnprintf</code> to <code>_tests_vsnprintf</code> during compilation like :</p>\n\n<pre><code>gcc -Dvsnprintf=_tests_vsnprintf file.c\n</code></pre>\n\n<p>This allow me to return an error from a <code>vsnpintf</code> call, in order to test the error management in my app. It works great on Linux, but does not build on Windows, MSVC 1900 (Visual Studio 2015) complains about macro redefinition (<a href=\"https://msdn.microsoft.com/fr-fr/library/y0tzt8e0(v=vs.71).aspx\" rel=\"nofollow noreferrer\">C1189</a>). </p>\n\n<p>The error come from this code in <code>stdio.h</code> :</p>\n\n<pre><code>  #if defined vsnprintf\n        ...\n    #error Macro definition of vsnprintf conflicts with Standard Library function declaration\n  #endif\n</code></pre>\n\n<p>I dont know how to get rid of the error with the minimal number of modifications.</p>\n\n<p>Could you help me ? </p>\n"}, {"tags": ["c", "performance", "gcc", "optimization", "icc"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1488382984, "post_id": 42535947, "comment_id": 72207672, "body": "Do the times remain consistent is the order of execution is changed?"}, {"owner": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 1, "creation_date": 1488383151, "post_id": 42535947, "comment_id": 72207804, "body": "for the bonus question: I just checked on godbolt: <code>icc</code> and <code>clang</code> generate vectorized code, while <code>gcc</code> doesn&#39;t"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1488383249, "post_id": 42535947, "comment_id": 72207885, "body": "How do you even benchmark this? Looks very fishy. I would strongly suspect that gcc -O3 will replace this whole program with <code>return &lt;hardcoded constant&gt;</code>. Did you disassemble the optimized code?"}, {"owner": {"reputation": 490, "user_id": 4752818, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1db51839607f4c917d73a5afa1a4da24?s=128&d=identicon&r=PG&f=1", "display_name": "Saiph", "link": "https://stackoverflow.com/users/4752818/saiph"}, "edited": false, "score": 1, "creation_date": 1488383276, "post_id": 42535947, "comment_id": 72207902, "body": "Not really. The times vary about +/- 0.5 sec depending on order and the number of times I try the command. However, 32 is consistently slower."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 2, "creation_date": 1488383281, "post_id": 42535947, "comment_id": 72207909, "body": "To reason about the 3x difference between gcc and icc, you can look at the generated assembly. The assembly can be generated by passing the -S flag."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1488384063, "post_id": 42535947, "comment_id": 72208520, "body": "Note that to compare times, only the sizeof of the arrays should change, Use <code>for(int i=0; i&lt;31; i++)   for(int j=0; j&lt;31; j++)</code>.  32x32 loops should take 6% longer than 31x31.  So the question is why is 33x33 faster than 32x32?"}, {"owner": {"reputation": 1381, "user_id": 4381807, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i4GHo.gif?s=128&g=1", "display_name": "Anty", "link": "https://stackoverflow.com/users/4381807/anty"}, "edited": false, "score": 3, "creation_date": 1488384713, "post_id": 42535947, "comment_id": 72208942, "body": "You should check this thread for answers <a href=\"http://stackoverflow.com/questions/11413855/why-is-transposing-a-matrix-of-512x512-much-slower-than-transposing-a-matrix-of\" title=\"why is transposing a matrix of 512x512 much slower than transposing a matrix of\">stackoverflow.com/questions/11413855/&hellip;</a>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1488387938, "post_id": 42535947, "comment_id": 72211259, "body": "&quot;this code slower when the array size is a power of 2?&quot; only tests 1 power of 2.  Running tests at (127,18,129), (65535,65536,65537), etc. would be illuminating."}, {"owner": {"reputation": 490, "user_id": 4752818, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1db51839607f4c917d73a5afa1a4da24?s=128&d=identicon&r=PG&f=1", "display_name": "Saiph", "link": "https://stackoverflow.com/users/4752818/saiph"}, "edited": false, "score": 1, "creation_date": 1488388716, "post_id": 42535947, "comment_id": 72211732, "body": "Your comment made me realize it is actually not due to powers of 2, but parity. I had tested other powers of 2 but only that. I&#39;m going to make better measures and edit the post."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1488392264, "post_id": 42535947, "comment_id": 72213876, "body": "BTW: <code>tab1[i][j] += tab1[i - 1][j];</code> causes integer overflow, which is UB.  Might want to fix that by using <code>unsigned tab1[TS][TS];</code>"}, {"owner": {"reputation": 490, "user_id": 4752818, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1db51839607f4c917d73a5afa1a4da24?s=128&d=identicon&r=PG&f=1", "display_name": "Saiph", "link": "https://stackoverflow.com/users/4752818/saiph"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1488447837, "post_id": 42535947, "comment_id": 72238708, "body": "@chux Good idea. I checked it, the performance remains the same."}], "answers": [{"comments": [{"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 2, "creation_date": 1488385542, "post_id": 42536622, "comment_id": 72209551, "body": "I do not know the exact l1 cache sizes of the processor used, but with TS=32/33 (4096b/4356b) it should easily fit into the l1-cache and since the space is contiguous, there is no need for thrashing with, lets say, an 8-way set associative cache or similar"}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 2, "creation_date": 1488392324, "post_id": 42536622, "comment_id": 72213927, "body": "its not a case of fitting it is a case of thrashing (which is actually a not fitting case).  say you had 8 cache slots in your cache and 3 bits in the address determined which slot to attempt to use.  But if you have a lot of data activity that have addresses that dont change those three bits (several arrays but they all exercise that same chunk of cache) then only one fraction of your cache is used the rest is dormant.  change to using prime number sized things or not powers of two now all the cache is used."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "reply_to_user": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1488416427, "post_id": 42536622, "comment_id": 72225666, "body": "@old_timer This is possible in theory, but in practice, an array will use a contiguous space in memory, so these three bits will not be the same. This is why the address is split into [TAG][SET][OFFSET], to be optimized for the contiguous case. Hence, thrashing should not be an issue here."}], "tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": false, "score": 5, "last_activity_date": 1488384602, "creation_date": 1488384602, "answer_id": 42536622, "question_id": 42535947, "link": "https://stackoverflow.com/questions/42535947/why-is-this-code-slower-when-the-array-size-is-even/42536622#42536622", "title": "Why is this code slower when the array size is even?", "body": "<p>Looks like a classical case of cache contention. Your code is written such that there are operations on adjacent matrix rows and columns. This can be painful when the matrix rows align with cache lines, and would be stored in the same cache line. </p>\n\n<p>But there's not a lot of data. If a line gets kicked out of fast L1 cache, it probably will still fit in the fairly fast L2 cache. L2 apparently is fast enough for the code that GCC emits, but L2 can't keep up with the (vectorized) code from ICC.</p>\n"}, {"comments": [{"owner": {"reputation": 490, "user_id": 4752818, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1db51839607f4c917d73a5afa1a4da24?s=128&d=identicon&r=PG&f=1", "display_name": "Saiph", "link": "https://stackoverflow.com/users/4752818/saiph"}, "edited": false, "score": 0, "creation_date": 1488466134, "post_id": 42540703, "comment_id": 72251349, "body": "Tested and you&#39;re right. My timings with gcc are now around 6 sec (on my CPU). It is slightly slower than Intel, but interestingly it is faster for size=32 than 31 and 33. Thanks for the very nice and detailed answer."}, {"owner": {"reputation": 34922, "user_id": 586873, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/11ba1f932f0af556969448ffba230d9a?s=128&d=identicon&r=PG", "display_name": "Grzegorz Szpetkowski", "link": "https://stackoverflow.com/users/586873/grzegorz-szpetkowski"}, "reply_to_user": {"reputation": 490, "user_id": 4752818, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1db51839607f4c917d73a5afa1a4da24?s=128&d=identicon&r=PG&f=1", "display_name": "Saiph", "link": "https://stackoverflow.com/users/4752818/saiph"}, "edited": false, "score": 1, "creation_date": 1488466598, "post_id": 42540703, "comment_id": 72251692, "body": "@Saiph: I found a way to vectorize the second inner loop. It&#39;s still WIP, but the timings are even more interesting. I will soon edit my answer."}, {"owner": {"reputation": 490, "user_id": 4752818, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1db51839607f4c917d73a5afa1a4da24?s=128&d=identicon&r=PG&f=1", "display_name": "Saiph", "link": "https://stackoverflow.com/users/4752818/saiph"}, "edited": false, "score": 0, "creation_date": 1488560117, "post_id": 42540703, "comment_id": 72301237, "body": "After your changes not only does the code run extremely fast (with both gcc/icc), but somehow there is no speed difference depending on size anymore."}], "tags": [], "owner": {"reputation": 34922, "user_id": 586873, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/11ba1f932f0af556969448ffba230d9a?s=128&d=identicon&r=PG", "display_name": "Grzegorz Szpetkowski", "link": "https://stackoverflow.com/users/586873/grzegorz-szpetkowski"}, "is_accepted": true, "score": 7, "last_activity_date": 1488498571, "last_edit_date": 1488498571, "creation_date": 1488397747, "answer_id": 42540703, "question_id": 42535947, "link": "https://stackoverflow.com/questions/42535947/why-is-this-code-slower-when-the-array-size-is-even/42540703#42540703", "title": "Why is this code slower when the array size is even?", "body": "<blockquote>\n  <p>Why is icc 3x faster than gcc here?</p>\n</blockquote>\n\n<p>GCC is not able to vectorize the inner loop, as it reports, that there are dependencies between data-refs. Intel's compiler is smart enough to split the inner loop into two independent parts:</p>\n\n<pre><code>for (int j = 1; j &lt; TS; j++)\n    tab1[i][j] += tab1[i-1][j];  // this one is vectorized\n\nfor (int j = 1; j &lt; TS; j++)\n    tab1[i][j] += tab1[i][j-1];\n</code></pre>\n\n<h2>Attempt 1: Loops reorganization</h2>\n\n<p>You might get better performance in GCC by rewriting <code>simul1</code> into:</p>\n\n<pre><code>void simul1(void)\n{\n    for (int j = 1; j &lt; TS; j++)\n        tab1[0][j] += tab1[0][j-1];\n\n    for (int i = 1; i &lt; TS; i++) {\n        for (int j = 0; j &lt; TS; j++)\n            tab1[i][j] += tab1[i-1][j];\n        for (int j = 1; j &lt; TS; j++)\n            tab1[i][j] += tab1[i][j-1];\n    }\n}\n</code></pre>\n\n<p>My results under GCC 6.3.0 with <code>-O3 -march-native</code>, <code>TS = 32</code> powered by Intel Core i5 5200U are:</p>\n\n<p>Original version:</p>\n\n<pre><code>real    0m21.110s\nuser    0m21.004s\nsys 0m0.000s\n</code></pre>\n\n<p>Modified:</p>\n\n<pre><code>real    0m8.588s\nuser    0m8.536s\nsys 0m0.000s\n</code></pre>\n\n<h2>Attempt 2: Vectorization of prefix sum</h2>\n\n<p>After some reaseach, I found there is a possibility to vectorize the second inner loop by vector additions and shifts. Algorithm is presented <a href=\"https://docs.google.com/presentation/d/1vXklJ9pP0Ze5gY_ts7KMGEgjruqphXOgIHuACUNiAYs/edit#slide=id.g11de3082e_06\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<h3>Version A: 128-bit wide vectors</h3>\n\n<pre><code>#include \"emmintrin.h\"\n\nvoid simul1(void)\n{\n    for (int j = 1; j &lt; TS; j++)\n        tab1[0][j] += tab1[0][j-1];\n\n    for (int i = 1; i &lt; TS; i++) {\n        for (int j = 0; j &lt; TS; j++)\n            tab1[i][j] += tab1[i-1][j];\n\n        for (int stride = 0; stride &lt; TS; stride += 4) {\n            __m128i v;\n            v = _mm_loadu_si128((__m128i*) (tab1[i] + stride));\n            v = _mm_add_epi32(v, _mm_slli_si128(v, sizeof(int)));\n            v = _mm_add_epi32(v, _mm_slli_si128(v, 2*sizeof(int)));\n            _mm_storeu_si128((__m128i*) (tab1[i] + stride), v);\n        }\n\n        for (int stride = 4; stride &lt; TS; stride += 4)\n            for (int j = 0; j &lt; 4; j++)\n                tab1[i][stride+j] += tab1[i][stride-1];\n    }\n}\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>real    0m7.541s\nuser    0m7.496s\nsys 0m0.004s\n</code></pre>\n\n<h3>Version B: 256-bit wide vectors</h3>\n\n<p>This one is more complicated. Consider eight-elements vector of <code>int</code>s:</p>\n\n<pre><code>V = (a, b, c, d, e, f, g, h)\n</code></pre>\n\n<p>We can treat it as two packed vectors:</p>\n\n<pre><code>(a, b, c, d), (e, f, g, h)\n</code></pre>\n\n<p>First, algorithm performs two independent summations:</p>\n\n<pre><code>(a, b, c, d), (e, f, g, h)\n+\n(0, a, b, c), (0, e, f, g)\n=\n(a, a+b, b+c, c+d), (e, e+f, f+g, g+h)\n+\n(0, 0, a, a+b), (0, 0, e, e+f)\n=\n(a, a+b, a+b+c, a+b+c+d), (e, e+f, e+f+g, e+f+g+h)\n</code></pre>\n\n<p>then it propagates last element of first vector into each element of second vector, so it finally yields:</p>\n\n<pre><code>(a, a+b, a+b+c, a+b+c+d), (a+b+c+d+e, a+b+c+d+e+f, a+b+c+d+e+f+g, a+b+c+d+e+f+g+h)\n</code></pre>\n\n<p>I suspect, that these intrinsics could be written better, so there is a potential for some improvement.</p>\n\n<pre><code>#include \"immintrin.h\"\n\nvoid simul1(void)\n{\n    for (int j = 1; j &lt; TS; j++)\n        tab1[0][j] += tab1[0][j-1];\n\n    for (int i = 1; i &lt; TS; i++) {\n        for (int j = 0; j &lt; TS; j++)\n            tab1[i][j] += tab1[i-1][j];\n\n        for (int stride = 0; stride &lt; TS; stride += 8) {\n            __m256i v;\n            v = _mm256_loadu_si256((__m256i*) (tab1[i] + stride));\n            v = _mm256_add_epi32(v, _mm256_slli_si256(v, sizeof(int)));\n            v = _mm256_add_epi32(v, _mm256_slli_si256(v, 2*sizeof(int)));\n\n            __m256i t = _mm256_setzero_si256();\n            t = _mm256_insertf128_si256(t, \n                _mm_shuffle_epi32(_mm256_castsi256_si128(v), 0xFF), 1);\n\n            v = _mm256_add_epi32(v, t);\n            _mm256_storeu_si256((__m256i*) (tab1[i] + stride), v);\n        }\n\n        for (int stride = 8; stride &lt; TS; stride += 8)\n            for (int j = 0; j &lt; 8; j++)\n                tab1[i][stride+j] += tab1[i][stride-1];\n    }\n}\n</code></pre>\n\n<p>Result (Clang 3.8):</p>\n\n<pre><code>real    0m5.644s\nuser    0m5.364s\nsys 0m0.004s\n</code></pre>\n"}], "owner": {"reputation": 490, "user_id": 4752818, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1db51839607f4c917d73a5afa1a4da24?s=128&d=identicon&r=PG&f=1", "display_name": "Saiph", "link": "https://stackoverflow.com/users/4752818/saiph"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 268, "favorite_count": 1, "accepted_answer_id": 42540703, "answer_count": 2, "score": 6, "last_activity_date": 1488498571, "creation_date": 1488382729, "last_edit_date": 1488448246, "question_id": 42535947, "link": "https://stackoverflow.com/questions/42535947/why-is-this-code-slower-when-the-array-size-is-even", "title": "Why is this code slower when the array size is even?", "body": "<p><strong>Warning: Actually it is not due to power of 2 but parity. See the EDIT section.</strong></p>\n\n<hr>\n\n<p>I have found a code which shows quite a strange behaviour. </p>\n\n<p>The code uses a 2D array (size x size). <strong>When size is a power of 2, the code goes between 10% and 40% slower</strong>, the slowest being for size=32.</p>\n\n<p>I have obtained these results with Intel compiler. If I compile with gcc 5.4, the power of 2 problem disappears but <strong>the code is 3x slower</strong>. Having tested it on different CPUs, I think it should be reproducible enough.</p>\n\n<p>Code:</p>\n\n<pre><code>#define N 10000000\n\nunsigned int tab1[TS][TS];\n\nvoid simul1() {\n\n  for(int i=0; i&lt;TS; i++)\n  for(int j=0; j&lt;TS; j++) {\n\n    if(i &gt; 0)\n      tab1[i][j] += tab1[i-1][j];\n\n    if(j &gt; 0)\n      tab1[i][j] += tab1[i][j-1];\n  }\n}\n\nint main() {\n\n  for(int i=0; i&lt;TS; i++)\n  for(int j=0; j&lt;TS; j++)\n    tab1[j][i] = 0;\n\n\n  for(int i=0; i&lt;N; i++) {\n    tab1[0][0] = 1;\n    simul1();\n  }\n\n  return tab1[10][10];\n}\n</code></pre>\n\n<p>Compilation:</p>\n\n<pre><code>icc:\n        icc main.c -O3 -std=c99 -Wall -DTS=31 -o i31\n        icc main.c -O3 -std=c99 -Wall -DTS=32 -o i32\n        icc main.c -O3 -std=c99 -Wall -DTS=33 -o i33\n\ngcc:\n        gcc main.c -O3 -std=c99 -Wall -DTS=31 -o g31\n        gcc main.c -O3 -std=c99 -Wall -DTS=32 -o g32\n        gcc main.c -O3 -std=c99 -Wall -DTS=33 -o g33\n</code></pre>\n\n<p>Results on a Xeon E5:</p>\n\n<pre><code>time ./icc31\n4.549s\n\ntime ./icc32\n6.557s\n\ntime ./icc33\n5.188s\n\n\ntime ./gcc31\n13.335s\n\ntime ./gcc32\n13.669s\n\ntime ./gcc33\n14.399s\n</code></pre>\n\n<p>My questions:</p>\n\n<ul>\n<li>Why is there a performance loss when the size of array is <strong>exactly 32</strong> ?</li>\n<li>(Optional: Why is icc <strong>3x faster</strong> than gcc here ?)</li>\n</ul>\n\n<hr>\n\n<p><strong>EDIT:</strong> Actually this is due to parity, and only applies from size >= 32. The performance difference between even and odd numbers is consistent, and decreases when size becomes bigger. Here is a more detailed benchmark :</p>\n\n<p><a href=\"https://i.imgur.com/NJ0f3Fx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.imgur.com/NJ0f3Fx.png\" alt=\"enter image description here\"></a></p>\n\n<p>(The y axis is number of elements per second in millions, obtained with TS\u00b2 * N / size / 1000000)</p>\n\n<p><strong>My CPU has a 32KB L1 cache and 256 KB L2</strong></p>\n"}, {"tags": ["c", "debugging", "cmake", "libwebsockets"], "answers": [{"tags": [], "owner": {"reputation": 98, "user_id": 7193882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8Ye3.png?s=128&g=1", "display_name": "Lo&#239;c Guzzetta", "link": "https://stackoverflow.com/users/7193882/lo%c3%afc-guzzetta"}, "is_accepted": true, "score": 1, "last_activity_date": 1490711924, "last_edit_date": 1490711924, "creation_date": 1490695751, "answer_id": 43066668, "question_id": 42535181, "link": "https://stackoverflow.com/questions/42535181/how-to-enable-debug-logging-with-libwebsockets/43066668#43066668", "title": "How to enable debug logging with Libwebsockets?", "body": "<p><strong>Tks to the <em>lws-team</em> on Github :</strong></p>\n\n<blockquote>\n  <p>The build type of DEBUG stops more verbose logging types from being\n  removed during build.</p>\n  \n  <p>You still need to enable them at runtime using a bitmap in\n  lws_set_log_level()... <strong>the default is 7</strong> (err / warn / notice)</p>\n</blockquote>\n\n<p>I misread <strong>libwebsockets.h :</strong></p>\n\n<pre><code>    enum lws_log_levels {\n    LLL_ERR = 1 &lt;&lt; 0,\n    LLL_WARN = 1 &lt;&lt; 1,\n    LLL_NOTICE = 1 &lt;&lt; 2,\n    LLL_INFO = 1 &lt;&lt; 3,\n    LLL_DEBUG = 1 &lt;&lt; 4,\n    LLL_PARSER = 1 &lt;&lt; 5,\n    LLL_HEADER = 1 &lt;&lt; 6,\n    LLL_EXT = 1 &lt;&lt; 7,\n    LLL_CLIENT = 1 &lt;&lt; 8,\n    LLL_LATENCY = 1 &lt;&lt; 9,\n    LLL_USER = 1 &lt;&lt; 10,\n\n    LLL_COUNT = 11 /* set to count of valid flags */\n};\n</code></pre>\n\n<p>Like Andy said, the default is <em>0000 0111</em>, so 7... </p>\n"}], "owner": {"reputation": 98, "user_id": 7193882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8Ye3.png?s=128&g=1", "display_name": "Lo&#239;c Guzzetta", "link": "https://stackoverflow.com/users/7193882/lo%c3%afc-guzzetta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3273, "favorite_count": 2, "accepted_answer_id": 43066668, "answer_count": 1, "score": 1, "last_activity_date": 1490711924, "creation_date": 1488380672, "last_edit_date": 1490695206, "question_id": 42535181, "link": "https://stackoverflow.com/questions/42535181/how-to-enable-debug-logging-with-libwebsockets", "title": "How to enable debug logging with Libwebsockets?", "body": "<p>I'm trying to implement a websocket client (with libwebsockets in C). I'm using cmake to control the software compilation process. </p>\n\n<p>My question is simple : <strong>How to enable debug logging with Libwebsockets ?</strong></p>\n\n<p>First i compiled and installed libwebsockets like it said in the documentation <em>Notes about building lws</em> :</p>\n\n<blockquote>\n  <p>To build with debug info and _DEBUG for lower priority debug messages\n  compiled in, use</p>\n  \n  <p>$ cmake .. -DCMAKE_BUILD_TYPE=DEBUG</p>\n</blockquote>\n\n<p>From <strong>Libwebsockets 2.1</strong> doc <em>Notes about coding with lws</em> \n(<a href=\"https://libwebsockets.org/lws-api-doc-master/html/md_README.coding.html\" rel=\"nofollow noreferrer\">https://libwebsockets.org/lws-api-doc-master/html/md_README.coding.html</a>) :</p>\n\n<blockquote>\n  <p>Debug Logging</p>\n  \n  <p>Also using lws_set_log_level api you may provide a custom callback to\n  actually emit the log string. By default, this points to an internal\n  emit function that sends to stderr. Setting it to NULL leaves it as it\n  is instead.</p>\n  \n  <p>A helper function lwsl_emit_syslog() is exported from the library to\n  simplify logging to syslog. You still need to use setlogmask, openlog\n  and closelog in your user code.</p>\n  \n  <p>The logging apis are made available for user code.</p>\n  \n  <p>lwsl_err(...) lwsl_warn(...) lwsl_notice(...) lwsl_info(...)\n  lwsl_debug(...) The difference between notice and info is that notice\n  will be logged by default whereas info is ignored by default.</p>\n  \n  <p>If you are not building with _DEBUG defined, ie, without this</p>\n  \n  <p>$ cmake .. -DCMAKE_BUILD_TYPE=DEBUG then log levels below notice do\n  not actually get compiled in.</p>\n</blockquote>\n\n<p>Like in <a href=\"https://github.com/warmcat/libwebsockets/blob/v2.1-stable/test-server/test-client.c\" rel=\"nofollow noreferrer\">this (official) example</a>, i put <code>lws_set_log_level(10, NULL);</code> at the beginning of my websocket main function. </p>\n\n<p>CMakeLists.txt : </p>\n\n<pre><code>cmake_minimum_required(VERSION 3.6)\nproject(foo)\nset(CMAKE_C_STANDARD 11)\nset(CMAKE_BUILD_TYPE DEBUG) #For CLion IDE but i'm pretty sur it does nothing.\n\nset(SOURCE_FILES\n        websocket.c\n        websocket.h\n        main.c)\n\nadd_executable(foo ${SOURCE_FILES})\ntarget_link_libraries(foo websockets)\n</code></pre>\n\n<p>Then i run cmake :</p>\n\n<pre><code>cmake .. -DCMAKE_BUILD_TYPE=DEBUG\nmake\n</code></pre>\n\n<p>Everything works fine, my websocket client seems ok.</p>\n\n<p>But i've no debug logs... What am i missing ?</p>\n"}, {"tags": ["c", "pointers", "ram"], "comments": [{"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 1, "creation_date": 1488380063, "post_id": 42534755, "comment_id": 72205379, "body": "If you say that the struct is indeed placed in the area, why don&#39;t you simply do <code>myStruct.a = 0; myStruct.xy = 0;</code> ?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 1, "creation_date": 1488380512, "post_id": 42534755, "comment_id": 72205721, "body": "It&#39;s unclear to me how you are arranging to have the structure located in the protected area, but it is plausible that you have done so.  With that being the case, assigning values to its members, as @AjayBrahmakshatriya suggests, should cause attempts to write to that area.  So as to avoid any possibility that those writes are deferred or optimized out, you should declare the structure <code>volatile</code>."}, {"owner": {"reputation": 729, "user_id": 5135400, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/340af7d7f56355c39b56f926cae83c0d?s=128&d=identicon&r=PG&f=1", "display_name": "JohnDoe", "link": "https://stackoverflow.com/users/5135400/johndoe"}, "edited": false, "score": 0, "creation_date": 1488381637, "post_id": 42534755, "comment_id": 72206634, "body": "Sorry I forgot to mention that the struct is declared and only valid within the RAM protected area. So outside only reading from struct is possible but not writing. Writing will cause a reset of CPU."}], "answers": [{"tags": [], "owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "is_accepted": true, "score": 2, "last_activity_date": 1488382921, "creation_date": 1488382921, "answer_id": 42536018, "question_id": 42534755, "link": "https://stackoverflow.com/questions/42534755/failure-injectiontry-to-write-into-protected-ram-area/42536018#42536018", "title": "Failure Injection:Try to write into protected RAM area", "body": "<p>From what I understand you want the code for the <em>other</em> application so produce the faulty behavior.</p>\n\n<p>In the other process/program do this</p>\n\n<pre><code>typedef struct  \n{\n   int a;\n   long xy;\n} st_struct;\nst_struct *ms = (st_struct*) 0x04001f15;\nms-&gt;a = 0;\nms-&gt;xy = 0;\n</code></pre>\n\n<p>This way the other application will try to access the same struct and will fault.</p>\n"}], "owner": {"reputation": 729, "user_id": 5135400, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/340af7d7f56355c39b56f926cae83c0d?s=128&d=identicon&r=PG&f=1", "display_name": "JohnDoe", "link": "https://stackoverflow.com/users/5135400/johndoe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "closed_date": 1488386342, "accepted_answer_id": 42536018, "answer_count": 1, "score": 1, "last_activity_date": 1488382921, "creation_date": 1488379638, "last_edit_date": 1488381943, "question_id": 42534755, "link": "https://stackoverflow.com/questions/42534755/failure-injectiontry-to-write-into-protected-ram-area", "closed_reason": "Needs details or clarity", "title": "Failure Injection:Try to write into protected RAM area", "body": "<p>I'm working on an home project to learn more about embedded systems. So I'm also not professional with C language :)</p>\n\n<p>Lets say I have a struct:</p>\n\n<pre><code>static st_struct myStruct;\n</code></pre>\n\n<p>The struct is defined as:</p>\n\n<pre><code>typedef struct  \n{\n   int a;\n   long xy;\n} st_struct\n</code></pre>\n\n<p>To keep the code simple here, the struct is defined and  only valid within a protected RAM area, in the address space from  0x04001000 - 0x04003000.\nThis protected area prevents other tasks to write into it, they can only read. </p>\n\n<p>If some task/function is trying to modify or write into this area, the CPU will reset.</p>\n\n<p>The variable myStruct is located within  address 0x04001f15.</p>\n\n<p>I would like to provoke this behavior of trying to write into the \"not allowed\", exactly to the myStruct variable. What would be the best way to implement such kind of failure injection in this example? Can you give an example how to do this with pointer arithmetic? </p>\n"}, {"tags": ["c", "while-loop"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 9, "creation_date": 1488379093, "post_id": 42534523, "comment_id": 72204636, "body": "yes, it&#39;s the same."}, {"owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "edited": false, "score": 3, "creation_date": 1488379142, "post_id": 42534523, "comment_id": 72204666, "body": "Have you tested it?  Do you have <b><i>any</i></b> reason to believe it might be different at all?"}, {"owner": {"reputation": 16010, "user_id": 1568658, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/FPSGe.jpg?s=128&g=1", "display_name": "user218867", "link": "https://stackoverflow.com/users/1568658/user218867"}, "edited": false, "score": 2, "creation_date": 1488379193, "post_id": 42534523, "comment_id": 72204701, "body": "And, don&#39;t use the second style, unless you just want the code to be look &quot;cool&quot; so that less people would understand, and introduce bugs in future."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 3, "creation_date": 1488379193, "post_id": 42534523, "comment_id": 72204703, "body": "You know... The question is clear and well formatted, and yet I can&#39;t shake the feeling it should be off-topic for some reason..."}, {"owner": {"reputation": 141, "user_id": 5463015, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wGKbb.jpg?s=128&g=1", "display_name": "Shaun Bebbers", "link": "https://stackoverflow.com/users/5463015/shaun-bebbers"}, "edited": false, "score": 0, "creation_date": 1488379251, "post_id": 42534523, "comment_id": 72204745, "body": "Yes except you can place conditions in-between the braces of the first example, so you could add in a condition to change the state of the flag to false, thus exit the while loop."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1488379691, "post_id": 42534523, "comment_id": 72205082, "body": "@StoryTeller: Maybe because title and contents don&#39;t match and can produce very different results. Qualifying <code>flag</code> as <code>volatile</code> can produce different behaviour,  too. Which is the much more interesting (and relevant) question."}, {"owner": {"reputation": 16010, "user_id": 1568658, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/FPSGe.jpg?s=128&g=1", "display_name": "user218867", "link": "https://stackoverflow.com/users/1568658/user218867"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1488379712, "post_id": 42534523, "comment_id": 72205104, "body": "@StoryTeller I think this is a good question, maybe you just feel too much ..."}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1488382183, "post_id": 42534523, "comment_id": 72207068, "body": "Some recommend <code>for(;;) { }</code> as an empty loop, since that removes the need for an expression."}], "answers": [{"tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": false, "score": 9, "last_activity_date": 1488379398, "last_edit_date": 1495541356, "creation_date": 1488379221, "answer_id": 42534580, "question_id": 42534523, "link": "https://stackoverflow.com/questions/42534523/does-while1-do-the-same-as-while1/42534580#42534580", "title": "Does while(1){} do the same as while(1);", "body": "<p><code>;</code> alone is a <em>null statement</em> in C. </p>\n\n<p>In your case, <code>{}</code> or <code>;</code> are syntactically needed, but they do the same: nothing</p>\n\n<p>Related: <a href=\"https://stackoverflow.com/questions/5599380/use-of-null-statement-in-c?s=1|2.1746\">Use of null statement in C</a></p>\n"}, {"tags": [], "owner": {"reputation": 1699, "user_id": 4891815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/niZw9.jpg?s=128&g=1", "display_name": "Gnqz", "link": "https://stackoverflow.com/users/4891815/gnqz"}, "is_accepted": false, "score": 2, "last_activity_date": 1488379233, "creation_date": 1488379233, "answer_id": 42534586, "question_id": 42534523, "link": "https://stackoverflow.com/questions/42534523/does-while1-do-the-same-as-while1/42534586#42534586", "title": "Does while(1){} do the same as while(1);", "body": "<p>Yes, having an empty body of the loop is equivaled to just <code>while(&lt;some condition&gt;);</code></p>\n"}, {"tags": [], "owner": {"reputation": 249903, "user_id": 2422776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2353050223ebecb113741c29458de4b2?s=128&d=identicon&r=PG", "display_name": "Mureinik", "link": "https://stackoverflow.com/users/2422776/mureinik"}, "is_accepted": false, "score": 2, "last_activity_date": 1488379252, "creation_date": 1488379252, "answer_id": 42534596, "question_id": 42534523, "link": "https://stackoverflow.com/questions/42534523/does-while1-do-the-same-as-while1/42534596#42534596", "title": "Does while(1){} do the same as while(1);", "body": "<p>Yes. A <code>;</code> following a control structure (e.g., <code>while</code>, <code>for</code>, etc.) that can be followed with a block is treated as if it was followed by an empty block.</p>\n"}, {"tags": [], "owner": {"reputation": 30168, "user_id": 5612562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gzBQY.jpg?s=128&g=1", "display_name": "msc", "link": "https://stackoverflow.com/users/5612562/msc"}, "is_accepted": false, "score": 2, "last_activity_date": 1488380025, "last_edit_date": 1488380025, "creation_date": 1488379319, "answer_id": 42534627, "question_id": 42534523, "link": "https://stackoverflow.com/questions/42534523/does-while1-do-the-same-as-while1/42534627#42534627", "title": "Does while(1){} do the same as while(1);", "body": "<p><strong>Yes</strong>, because when put semicolon after while loop statement that indicate empty body and when the condition becomes false then it goes to the immediate next statement after that loop.\u00a0</p>\n"}, {"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1488379939, "post_id": 42534768, "comment_id": 72205286, "body": "FYI: Recent gcc warns about this. I think it is the same as with Yoda-conditions: once they had their use, but now they just make the code less clear. You don&#39;t answer the question, but just state your personal opinion."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1488382094, "post_id": 42534768, "comment_id": 72206994, "body": "@Olaf Using braces instead of a semi colon at the end is indeed good practice. Alternatively <code>while (condition) &lt; new line &gt;   ;</code> is fine too. Harsh down vote, this is the best answer posted. The answer is also backed up by MISRA-C:2012 15.6 so this isn&#39;t just someone&#39;s subjective opinions. MISRA-C is in turn mostly based on scientific research, most notably by Les Hatton, who&#39;s work was published in the book <i>Safer C</i>. The semicolon issue is listed in said book, 2.7 Empirically Determined Misbehavior. This is a known source of bugs, proven by population studies of C code."}], "tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": false, "score": 3, "last_activity_date": 1488379669, "creation_date": 1488379669, "answer_id": 42534768, "question_id": 42534523, "link": "https://stackoverflow.com/questions/42534523/does-while1-do-the-same-as-while1/42534768#42534768", "title": "Does while(1){} do the same as while(1);", "body": "<p>In addition to the other answers: It's the same thing.</p>\n\n<p>But I prefer this:</p>\n\n<pre><code>while (condition)\n{\n} \nfoo();\n</code></pre>\n\n<p>over this:</p>\n\n<pre><code>while (condition);\nfoo();\n</code></pre>\n\n<p>because if you forget the semicolon after the while, your code will compile fine but it won't do what you expect:</p>\n\n<pre><code>while(condition)  // ; forgotten here\nfoo();           \n</code></pre>\n\n<p>will actually be equivalent of:</p>\n\n<pre><code>while(condition)\n{\n  foo();\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1488388646, "post_id": 42536371, "comment_id": 72211704, "body": "good idea to disassemble both codes, not that it proves anything formally since it could well be implementation defined."}, {"owner": {"reputation": 3817, "user_id": 5473170, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-TqTWy9pKa2g/AAAAAAAAAAI/AAAAAAAAASw/aJ0ynw2sjqM/photo.jpg?sz=128", "display_name": "Suraj Jain", "link": "https://stackoverflow.com/users/5473170/suraj-jain"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1488389509, "post_id": 42536371, "comment_id": 72212207, "body": "@Jean-Fran&#231;oisFabre Sir, In that case how should i explain the OP?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1488391620, "post_id": 42536371, "comment_id": 72213476, "body": "not an issue, it answers partially at least (I upvoted)"}, {"owner": {"reputation": 3817, "user_id": 5473170, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-TqTWy9pKa2g/AAAAAAAAAAI/AAAAAAAAASw/aJ0ynw2sjqM/photo.jpg?sz=128", "display_name": "Suraj Jain", "link": "https://stackoverflow.com/users/5473170/suraj-jain"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1488392080, "post_id": 42536371, "comment_id": 72213772, "body": "@Jean-Fran&#231;oisFabre Thanks Sir."}], "tags": [], "owner": {"reputation": 3817, "user_id": 5473170, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-TqTWy9pKa2g/AAAAAAAAAAI/AAAAAAAAASw/aJ0ynw2sjqM/photo.jpg?sz=128", "display_name": "Suraj Jain", "link": "https://stackoverflow.com/users/5473170/suraj-jain"}, "is_accepted": false, "score": 2, "last_activity_date": 1488387829, "last_edit_date": 1488387829, "creation_date": 1488383922, "answer_id": 42536371, "question_id": 42534523, "link": "https://stackoverflow.com/questions/42534523/does-while1-do-the-same-as-while1/42536371#42536371", "title": "Does while(1){} do the same as while(1);", "body": "<p><strong>Yes</strong>, they are same.  </p>\n\n<p>You Can Generate The assembly of the code and see for yourself that they produce the same assembly. (Using <code>gcc filename.c -S -masm=intel -o ouputfilename</code>)</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint foo(void);\nint main(){\n\n  int flag;\n  scanf(\"%d\" , &amp;flag);\n  while(flag==1);\n  foo(); \n}\n\n\nint foo(void){\n  int x = 2;\n  return x*x;\n}\n</code></pre>\n\n<hr>\n\n<pre><code>.LC0:\n    .ascii \"%d\\0\"\n    .text\n    .globl  main\n    .def    main;   .scl    2;  .type   32; .endef\n    .seh_proc   main\nmain:\n    push    rbp\n    .seh_pushreg    rbp\n    mov rbp, rsp\n    .seh_setframe   rbp, 0\n    sub rsp, 48\n    .seh_stackalloc 48\n    .seh_endprologue\n    call    __main\n    lea rax, -4[rbp]\n    mov rdx, rax\n    lea rcx, .LC0[rip]\n    call    scanf\n    nop\n.L2:\n    mov eax, DWORD PTR -4[rbp]\n    cmp eax, 1\n    je  .L2\n    call    foo\n    mov eax, 0\n    add rsp, 48\n    pop rbp\n    ret\n    .seh_endproc\n    .globl  foo\n    .def    foo;    .scl    2;  .type   32; .endef\n    .seh_proc   foo\nfoo:\n    push    rbp\n    .seh_pushreg    rbp\n    mov rbp, rsp\n    .seh_setframe   rbp, 0\n    sub rsp, 16\n    .seh_stackalloc 16\n    .seh_endprologue\n    mov DWORD PTR -4[rbp], 2\n    mov eax, DWORD PTR -4[rbp]\n    imul    eax, DWORD PTR -4[rbp]\n    add rsp, 16\n    pop rbp\n    ret\n    .seh_endproc\n    .ident  \"GCC: (x86_64-posix-seh-rev1, Built by MinGW-W64 project) 6.3.0\"\n    .def    scanf;  .scl    2;  .type   32; .endef\n</code></pre>\n\n<p>And  When I Changed <code>while(flag == 1);</code> to <code>while(flag==1){}</code> Assembly Code Generated is :  </p>\n\n<hr>\n\n<pre><code>.LC0:\n    .ascii \"%d\\0\"\n    .text\n    .globl  main\n    .def    main;   .scl    2;  .type   32; .endef\n    .seh_proc   main\nmain:\n    push    rbp\n    .seh_pushreg    rbp\n    mov rbp, rsp\n    .seh_setframe   rbp, 0\n    sub rsp, 48\n    .seh_stackalloc 48\n    .seh_endprologue\n    call    __main\n    lea rax, -4[rbp]\n    mov rdx, rax\n    lea rcx, .LC0[rip]\n    call    scanf\n    nop\n.L2:\n    mov eax, DWORD PTR -4[rbp]\n    cmp eax, 1\n    je  .L2\n    call    foo\n    mov eax, 0\n    add rsp, 48\n    pop rbp\n    ret\n    .seh_endproc\n    .globl  foo\n    .def    foo;    .scl    2;  .type   32; .endef\n    .seh_proc   foo\nfoo:\n    push    rbp\n    .seh_pushreg    rbp\n    mov rbp, rsp\n    .seh_setframe   rbp, 0\n    sub rsp, 16\n    .seh_stackalloc 16\n    .seh_endprologue\n    mov DWORD PTR -4[rbp], 2\n    mov eax, DWORD PTR -4[rbp]\n    imul    eax, DWORD PTR -4[rbp]\n    add rsp, 16\n    pop rbp\n    ret\n    .seh_endproc\n    .ident  \"GCC: (x86_64-posix-seh-rev1, Built by MinGW-W64 project) 6.3.0\"\n    .def    scanf;  .scl    2;  .type   32; .endef\n</code></pre>\n\n<p>You can see that the relevant portion is same in both cases.   </p>\n\n<pre><code> //Below Portion is same in both cases. \n.L2:        \n    mov eax, DWORD PTR -4[rbp]\n    cmp eax, 1\n    je  .L2\n    call    foo\n    mov eax, 0\n    add rsp, 48\n    pop rbp\n    ret\n    .seh_endproc\n    .globl  foo\n    .def    foo;    .scl    2;  .type   32; .endef\n    .seh_proc   foo\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 7641779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f1136b1e5f697758e1e41d9ef302a2f?s=128&d=identicon&r=PG&f=1", "display_name": "Jens Biltoft", "link": "https://stackoverflow.com/users/7641779/jens-biltoft"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1468, "favorite_count": 0, "answer_count": 6, "score": 3, "last_activity_date": 1488387829, "creation_date": 1488379069, "last_edit_date": 1488384713, "question_id": 42534523, "link": "https://stackoverflow.com/questions/42534523/does-while1-do-the-same-as-while1", "title": "Does while(1){} do the same as while(1);", "body": "<p>I just want to be sure that this C code: </p>\n\n<pre><code>while(flag==true)\n{\n} \nfoo();\n</code></pre>\n\n<p>does the same as this:</p>\n\n<pre><code>while(flag==true);\n\nfoo();\n</code></pre>\n"}, {"tags": ["c", "debugging", "stm32", "can-bus", "hal"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1488376510, "post_id": 42533556, "comment_id": 72202831, "body": "Sorry, but this question is quite difficult to answer. You need to narrow down the problem even more. I would say that your program is invoking Undefined Behavior due to problems handling pointers somewhere. But it&#39;s really difficult to tell with the provided information. Maybe some <i>stm32</i>, <i>hal</i> or whatever that is expert can help though."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1488376613, "post_id": 42533556, "comment_id": 72202895, "body": "There is no &quot;stm32L4F6&quot; MCU. You missed part of the name. And as general advice: The STlib/&quot;HAL&quot; is bloatware without any benefit. It does not even provide a true hardware abstraction. Read the reference manual, directly program the registers. Do the abtraction with drivers."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1488376748, "post_id": 42533556, "comment_id": 72202982, "body": "Note that preparing a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> typically means creating a <i>new</i> program exhibiting the misbehavior of interest, not merely cutting out or hiding parts of the program where you discovered the problem.  Either way, be sure that what you present is indeed <i>complete</i>; what you have presented so far omits several variable and type declarations that could be relevant to the problem."}, {"owner": {"reputation": 225, "user_id": 7303215, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/825035e3df2b9a587b2dd1057d5902b0?s=128&d=identicon&r=PG&f=1", "display_name": "Suvi_Eu", "link": "https://stackoverflow.com/users/7303215/suvi-eu"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1488382184, "post_id": 42533556, "comment_id": 72207070, "body": "@Olaf the idea was using HAL in order to have  portable code as much as possible. But I&#39;m starting to be agree with you about using these libraries has not any benefit. Specially if this type of bugs has confirmed by st support. What do you mean with do the abstraction &quot;with drivers&quot;? Doing my own drivers or using the lower level driver also provided by st? Thanks for your advice!"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1488383262, "post_id": 42533556, "comment_id": 72207891, "body": "Portable to - what? For the STM32, if the modules are the same, the hardware is the same anyway. For other devices, there is no identical HAL (that is some STM proprietary rubbish). You have to learn the hardware-features anyway (and you can&#39;t use them if the hardware doesn&#39;t support them) - plus the badly documented (if at all) HAL functions, <code>struct</code>s, etc. Memory footpront for the <code>struct</code>s is ridiculous, plus the code-overhead for filling them just to call a function which transfers them into peripheral registers."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1488383268, "post_id": 42533556, "comment_id": 72207896, "body": "As I say: define a clean, abstract interface for your drivers (not a unified, but fitting to the problem!), put the hardware-stuff directly into the drivers and never think about the hardware once tested. Oh, and: document the code/interface well, including timing, constraints, interrupt-priority, etc."}, {"owner": {"reputation": 225, "user_id": 7303215, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/825035e3df2b9a587b2dd1057d5902b0?s=128&d=identicon&r=PG&f=1", "display_name": "Suvi_Eu", "link": "https://stackoverflow.com/users/7303215/suvi-eu"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1488386145, "post_id": 42533556, "comment_id": 72210003, "body": "@Olaf for example from stm32 arm m4 based to another stm32 arm m0 based. Thanks for the last suggestion. I have too much to learn from embedded world yet."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1488389687, "post_id": 42533556, "comment_id": 72212306, "body": "That&#39;s not really portable. I the hardware is the same, you canjust use the same peripheral accesses, if not, the &quot;HAL&quot; is also not the same, because you have different features. And the HAL adds overhead, which are a serious problem for interrupt handlers. For EMC and other reason you often let the system run at the lowest clock possibly (with some margin, of course). For power-reduction you want the CPU sleep most of the time, etc."}, {"owner": {"reputation": 225, "user_id": 7303215, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/825035e3df2b9a587b2dd1057d5902b0?s=128&d=identicon&r=PG&f=1", "display_name": "Suvi_Eu", "link": "https://stackoverflow.com/users/7303215/suvi-eu"}, "edited": false, "score": 0, "creation_date": 1488445657, "post_id": 42533556, "comment_id": 72237212, "body": "Theoretically stm32CubeMX package provides a drivers level layer with HAL libraries for stm32L/F families from arm m0 to arm m4 in order to give portability between different STM32 devices via standardized API calls. This was the reason why I started to code using its HAL lib. But will I take notes from your words."}], "owner": {"reputation": 225, "user_id": 7303215, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/825035e3df2b9a587b2dd1057d5902b0?s=128&d=identicon&r=PG&f=1", "display_name": "Suvi_Eu", "link": "https://stackoverflow.com/users/7303215/suvi-eu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 906, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1488383696, "creation_date": 1488376285, "last_edit_date": 1488383696, "question_id": 42533556, "link": "https://stackoverflow.com/questions/42533556/strange-returned-value-when-calling-hal-can-library-function-for-stm32-when-time", "title": "Strange returned value when calling hal_can library function for stm32 when timeout", "body": "<p>I'm using hal can library for stm32L476vg mcu. I'm debugging my can transmission app and I can observe something apparently wrong in HAL_CAN_Transmit() sequence execution and its returned value, specially when it musts return HAL_TIMEOUT value. </p>\n\n<p>Main code:</p>\n\n<pre><code>#include \"main.h\"\n#include \"Pm03_SystemConfig.h\"\n#include \"App_Task_CAN.h\"\n\nuint8_t charBuffer[10]={0x00};\n\nint main(void)\n{   \n\n   /* Reset of all peripherals, Initializes the Flash interface and the Systick. */\n\n  HAL_Init();\n\n  /* Configure the system clock */\n\n  Pm03_SystemClock_Config();\n  App_Task_CAN_reset();\n  App_Task_CAN_init();\n  charBuffer[0]=0xCA;\n  charBuffer[1]=0xFE;\n\n  while (1)\n  {     \n     App_Task_CAN_sendData(&amp;charBuffer[0]);\n  }\n}\n</code></pre>\n\n<p>My TX higher level function implementation that calls hal_can transmit and init for can configuration in App_Task_CAN.c file:</p>\n\n<pre><code>uint8_t App_Task_CAN_sendData(uint8_t* cBuffer)\n{ \n   for (uint8_t index=0; index&lt; DATABTXLONG; index ++)\n   {\n         HCAN_Struct.pTxMsg-&gt;Data[index]= cBuffer[index];\n   }\n\n   if (HAL_CAN_Transmit(&amp;HCAN_Struct, TIMEOUT)!=HAL_OK)\n   {\n         TaskCan_Error_Handler();\n   }\n }\n\nvoid App_Task_CAN_init(void)\n{   \n\n    static CanTxMsgTypeDef        TxMessage;\n    static CanRxMsgTypeDef        RxMessage;\n\n    /*configuracion timing para obtener 500kb/s*/ \n    HCAN_Struct.Instance = CAN1;\n\n    HCAN_Struct.pTxMsg = &amp;TxMessage;\n    HCAN_Struct.pRxMsg = &amp;RxMessage;\n    HCAN_Struct.Init.Prescaler = 1;\n    HCAN_Struct.Init.Mode = CAN_MODE_NORMAL;//values defined in different hal libraries\n    HCAN_Struct.Init.SJW = CAN_SJW_1TQ;\n    HCAN_Struct.Init.BS1 = CAN_BS1_6TQ;//segment point at 87.5%\n    HCAN_Struct.Init.BS2 = CAN_BS2_1TQ;\n    HCAN_Struct.Init.TTCM = DISABLE;\n    HCAN_Struct.Init.ABOM = DISABLE;\n    HCAN_Struct.Init.AWUM = DISABLE;\n    HCAN_Struct.Init.NART = DISABLE;\n    HCAN_Struct.Init.RFLM = DISABLE;//Fifo locked mode disabled\n    HCAN_Struct.Init.TXFP = DISABLE;//prioridad de tx por id (m\u00e1s bajo m\u00e1s prioridad)\n\n    if (HAL_CAN_Init(&amp;HCAN_Struct) != HAL_OK)\n    {\n      TaskCan_Error_Handler();\n    }\n        //TX\n    HCAN_Struct.pTxMsg-&gt;StdId = 0x321;\n    HCAN_Struct.pTxMsg-&gt;ExtId = 0x01;//29 bits \n    HCAN_Struct.pTxMsg-&gt;IDE   = CAN_ID_STD;//values defined in different hal libraries\n    HCAN_Struct.pTxMsg-&gt;RTR   = CAN_RTR_DATA;//values defined in different hal libraries\n    HCAN_Struct.pTxMsg-&gt;DLC   = DATABTXLONG;//1-9\n\n }\n</code></pre>\n\n<p>some defines used above, declared in App_Task_CAN.h:</p>\n\n<pre><code>/* Timeout for can operations in bit time units */\n\n#define TIMEOUT 100\n\n/* param for config mesg frames */\n\n#define DATABTXLONG 2\n</code></pre>\n\n<p>I was debugging and going step by step through all the hal transmit function sequence (concerned piece of code below) and I can see how, after first TXRQ -> </p>\n\n<p>Part of hal_can_transmit function in stm32l4xx_hal_can.c file:</p>\n\n<pre><code>   HAL_StatusTypeDef HAL_CAN_Transmit(CAN_HandleTypeDef* hcan, uint32_t Timeout)\n   {\n     ...\n     /* Request transmission */\n     hcan-&gt;Instance-&gt;sTxMailBox[transmitmailbox].TIR |= CAN_TI0R_TXRQ;\n     ...\n     /* Check End of transmission flag */\n     while(!(__HAL_CAN_TRANSMIT_STATUS(hcan, transmitmailbox)))\n     {\n       /* Check for the Timeout */\n       if(Timeout != HAL_MAX_DELAY)\n       {\n          if((Timeout == 0) || ((HAL_GetTick()-tickstart) &gt; Timeout))\n          {\n             hcan-&gt;State = HAL_CAN_STATE_TIMEOUT;\n             /* Process unlocked */\n              __HAL_UNLOCK(hcan);//line in which thread breaks\n             return HAL_TIMEOUT;//ignored line during debug\n           }\n        }\n     }\n     ...\n   }\n</code></pre>\n\n<p>(NOTE: This next piece of code belongs to hal library provided by ST)</p>\n\n<p>-> once the thread passes through the above transmit call, after TXRQ line this happens:</p>\n\n<ol>\n<li>the thread waits for end Tx flag and </li>\n<li>after timeout value expires, the threads goes into timeout state line</li>\n<li>it arrives until hal unlock() macro line</li>\n<li>after this, it exits/breaks the execution and returns to the line where this function was called ignoring the next line \"return HAL_TIMEOUT\". </li>\n<li>The thread is broken just before arriving to this line (red text line). It returns to my transmit call a HAL_OK value! I recieve HAL_OK value! I confirm this after mounting a switch case in order to see what value it was reciving instead of HAL_TIMEOUT. </li>\n</ol>\n\n<p>It happens from the first time transmit is called. I don't know if it is normal behavior. Obviously it is a hal_can code fact and I can not do anything from code user to fix it. </p>\n\n<p>Has someone else, who worked with hal can for stm32, faced this situation?</p>\n\n<p>My Tx does not work and I was looking for the possible fail causes through debugging. Hence I have seen this. Maybe there is more than this code problem to solve. But I think my code is very simple to fail: I only call send data in a infinite loop (of course after can init). By debugging I can see how data is arriving to the mailboxes correctly, but flag of TXOk never sets.</p>\n\n<p>So, maybe this hal_can strange behavior is part of the cause of my transmission fail. </p>\n\n<p>It seems to be a third party bug. Has someone deal with same situation? Any suggestion about my user code? is there something to improve?</p>\n"}, {"tags": ["c", "msgpack", "messagepack"], "comments": [{"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1488376012, "post_id": 42533364, "comment_id": 72202486, "body": "<i>&quot;Is there a way I can do this in C?&quot;</i> Way to do <b>what?</b> Are you asking us to write decoder for you?"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1488376323, "post_id": 42533364, "comment_id": 72202701, "body": "You probably need a structure, why are you doing it like this?"}, {"owner": {"reputation": 1691, "user_id": 7014995, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/b1c03a6b6374d3b6472ee6f7ec5f2225?s=128&d=identicon&r=PG&f=1", "display_name": "Drxxd", "link": "https://stackoverflow.com/users/7014995/drxxd"}, "edited": false, "score": 0, "creation_date": 1488376778, "post_id": 42533364, "comment_id": 72203009, "body": "I have a structure but the first thing I receive is the size of the whole buffer (Because I can receive different types of messages).. Anyway, what I&#39;m asking is how can I receive and decode a stream using msgpack byte by byte (Like in the python script)"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1488378703, "post_id": 42533364, "comment_id": 72204362, "body": "Can you post one of the inputs coming from the client? Using the python server you could do <code>print client.recv()</code>. It would help us understand your question better."}], "answers": [{"tags": [], "owner": {"reputation": 1691, "user_id": 7014995, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/b1c03a6b6374d3b6472ee6f7ec5f2225?s=128&d=identicon&r=PG&f=1", "display_name": "Drxxd", "link": "https://stackoverflow.com/users/7014995/drxxd"}, "is_accepted": true, "score": 1, "last_activity_date": 1488380224, "creation_date": 1488380224, "answer_id": 42535006, "question_id": 42533364, "link": "https://stackoverflow.com/questions/42533364/receiving-a-stream-with-msgpack-in-c/42535006#42535006", "title": "Receiving a stream with msgpack in C", "body": "<p>I solved it, all I had to do is the following:</p>\n\n<pre><code>msgpack_unpacker tUnpacker = { 0 };\nBOOL bUnpacked = FALSE;\nunsigned char abReceivedBytes[1] = { 0 };\nmsgpack_unpacked tUnpacked = { 0 };\nmsgpack_unpack_return eUnpackRet = MSGPACK_UNPACK_PARSE_ERROR;\n\nwhile (FALSE == bUnpacked)\n{\n    // Read here from socket\n    ...\n\n    /* Check buffer capacity and reserve more buffer if needed */\n    if (msgpack_unpacker_buffer_capacity(&amp;tUnpacker) &lt; nNumOfBytes)\n    {\n        bResult = msgpack_unpacker_reserve_buffer(&amp;tUnpacker, nNumOfBytes);\n        if (FALSE == bResult)\n        {\n            // Handle error\n        }\n    }\n\n    /* feeds the buffer. */\n    memcpy(msgpack_unpacker_buffer(&amp;tUnpacker), &amp;abReceivedBytes[0], nNumOfBytes);\n    msgpack_unpacker_buffer_consumed(&amp;tUnpacker, nNumOfBytes);\n\n    /* initialize the unpacked message structure */\n    msgpack_unpacked_init(&amp;tUnpacked);\n    eUnpackRet = msgpack_unpacker_next(&amp;tUnpacker, &amp;tUnpacked);\n    switch (eUnpackRet) {\n    case MSGPACK_UNPACK_SUCCESS:\n        /* Extract msgpack_object and use it. */\n        bUnpacked = TRUE;\n        break;\n    case MSGPACK_UNPACK_CONTINUE:\n        break;\n    default:\n        // Handle failure\n        ...\n    }\n</code></pre>\n\n<p>This is how you can read a stream using msgpack (This is almost equivalent to the python script in my question)</p>\n"}], "owner": {"reputation": 1691, "user_id": 7014995, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/b1c03a6b6374d3b6472ee6f7ec5f2225?s=128&d=identicon&r=PG&f=1", "display_name": "Drxxd", "link": "https://stackoverflow.com/users/7014995/drxxd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 825, "favorite_count": 1, "accepted_answer_id": 42535006, "answer_count": 1, "score": 1, "last_activity_date": 1488380224, "creation_date": 1488375777, "question_id": 42533364, "link": "https://stackoverflow.com/questions/42533364/receiving-a-stream-with-msgpack-in-c", "title": "Receiving a stream with msgpack in C", "body": "<p>I'm implementing a server that receives a stream of bytes from the client.<br>\nThe stream is serialized using msgpack, (and the first thing that is serialized is the length of the remaining stream).</p>\n\n<p>My question is, What's the correct way of receiving this stream in C?<br>\nIn python I can do this as follows:</p>\n\n<pre><code># Feed each byte into the Unpacker\nunpacker.feed(client.recv(1))\n# Unpack whatever we can from the bytes we have received\nfor value in unpacker:\n    print(value)\n</code></pre>\n\n<p>Is there a way I can do this in C?</p>\n"}, {"tags": ["c", "gcc", "assembly"], "comments": [{"owner": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 8, "creation_date": 1488375405, "post_id": 42533198, "comment_id": 72202083, "body": "Did you enable optimizations?"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1488375603, "post_id": 42533198, "comment_id": 72202219, "body": "<a href=\"https://godbolt.org/g/Mh0ibK\" rel=\"nofollow noreferrer\">This is your code</a> with <code>-Os</code> option... Try to change it to <code>-O0</code> and see what happen"}, {"owner": {"reputation": 193, "user_id": 6396562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a62231d631b82ca80222351684331eb?s=128&d=identicon&r=PG&f=1", "display_name": "Richard", "link": "https://stackoverflow.com/users/6396562/richard"}, "reply_to_user": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 0, "creation_date": 1488376386, "post_id": 42533198, "comment_id": 72202737, "body": "@MarcGlisse No, I didn&#39;t."}, {"owner": {"reputation": 193, "user_id": 6396562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a62231d631b82ca80222351684331eb?s=128&d=identicon&r=PG&f=1", "display_name": "Richard", "link": "https://stackoverflow.com/users/6396562/richard"}, "edited": false, "score": 0, "creation_date": 1488376574, "post_id": 42533198, "comment_id": 72202871, "body": "Well, it&#39;s amazing. With optimazition, the outcome is huge."}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1488376654, "post_id": 42533198, "comment_id": 72202924, "body": "@Richard Without optimization, gcc is quite naive, makes no attempt to be clever, and generates code that is as straight forward translation from C as it can."}, {"owner": {"reputation": 193, "user_id": 6396562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a62231d631b82ca80222351684331eb?s=128&d=identicon&r=PG&f=1", "display_name": "Richard", "link": "https://stackoverflow.com/users/6396562/richard"}, "reply_to_user": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1488377450, "post_id": 42533198, "comment_id": 72203488, "body": "@nos Yea, but why does gcc move twice? Since a single move would work."}, {"owner": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 1, "creation_date": 1488378063, "post_id": 42533198, "comment_id": 72203943, "body": "gcc does 2 things: read x from memory, and store that in the ABI-mandated place for a function call. Without optimization, it does not try to merge those two steps."}, {"owner": {"reputation": 193, "user_id": 6396562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a62231d631b82ca80222351684331eb?s=128&d=identicon&r=PG&f=1", "display_name": "Richard", "link": "https://stackoverflow.com/users/6396562/richard"}, "reply_to_user": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 0, "creation_date": 1488378866, "post_id": 42533198, "comment_id": 72204469, "body": "@MarcGlisse Got, thx!"}], "answers": [{"comments": [{"owner": {"reputation": 193, "user_id": 6396562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a62231d631b82ca80222351684331eb?s=128&d=identicon&r=PG&f=1", "display_name": "Richard", "link": "https://stackoverflow.com/users/6396562/richard"}, "edited": false, "score": 0, "creation_date": 1488377112, "post_id": 42533326, "comment_id": 72203254, "body": "Nice explanation. But waht I want to know is that why does gcc first move <code>-4(%rbp)</code> to <code>%eax</code>, and then movl <code>%eax, %esi,</code>, instead of giving a straightforward <code>mov</code> from <code>-4(%rbp)</code> to <code>%esi</code>?"}, {"owner": {"reputation": 12521, "user_id": 4498329, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/b1bf128245aa5bcb1b740e8154296900?s=128&d=identicon&r=PG&f=1", "display_name": "skyking", "link": "https://stackoverflow.com/users/4498329/skyking"}, "reply_to_user": {"reputation": 193, "user_id": 6396562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a62231d631b82ca80222351684331eb?s=128&d=identicon&r=PG&f=1", "display_name": "Richard", "link": "https://stackoverflow.com/users/6396562/richard"}, "edited": false, "score": 0, "creation_date": 1488378639, "post_id": 42533326, "comment_id": 72204320, "body": "@Richard That may look a bit odd at first, but it&#39;s about how the compiler breaks down the expression and generates code one piece at a time. First it evaluates <code>x</code> then places the result in the proper place for paremeter passing. The <code>mov -4(%rbp), %eax</code> is the evaluation of <code>x</code> (where the result of the expression is placed in <code>%eax</code>), then the result is placed at the proper place for argument passing, in this case <code>%esi</code>."}], "tags": [], "owner": {"reputation": 12521, "user_id": 4498329, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/b1bf128245aa5bcb1b740e8154296900?s=128&d=identicon&r=PG&f=1", "display_name": "skyking", "link": "https://stackoverflow.com/users/4498329/skyking"}, "is_accepted": true, "score": 4, "last_activity_date": 1488376533, "last_edit_date": 1488376533, "creation_date": 1488375660, "answer_id": 42533326, "question_id": 42533198, "link": "https://stackoverflow.com/questions/42533198/why-asm-generated-by-gcc-mov-twice/42533326#42533326", "title": "Why asm generated by gcc mov twice?", "body": "<p>You probably did not enable optimizations.</p>\n\n<p>Without optimization the compiler will produce code like this. For one it does <strong>not</strong> allocate data to registers, but on the stack. This means that when you operate on variables they will first be transferred to a register and then operated on.</p>\n\n<p>So given that <code>x</code> lives is allocated in <code>-4(%rbp)</code> and this is what the code appears as if you translate it directly without optimization. First you move <code>11</code> to the storage of <code>x</code>. This means:</p>\n\n<pre><code>movl    $11, -4(%rbp)\n</code></pre>\n\n<p>done with the first statement. The next statement is to evaluate <code>x+3</code> and place in the storage of <code>y</code> (which is <code>-8(%rbp)</code>, this is done without regard of the previous generated code:</p>\n\n<pre><code>movl     -4(%rbp), %eax\naddl     $3, %eax\nmovl     %eax, -8(%rbp)\n</code></pre>\n\n<p>done with the second statement. By the way that is divided into two parts: evaluation of <code>x+3</code> and the storage of the result. Then the compiler continues to generate code for the <code>printf</code> statement, again without taking earlier statements into account.</p>\n\n<p>If you on the other hand would enable optimization the compiler does a number of smart and to humans obvious things. One thing is that it allows variables to be allocated to registers, or at least keep track on where one can find the value of the variable. In this case the compiler would for example know in the second statement that <code>x</code> is not only stored at <code>-4(%ebp)</code> it will also know that it is stored in <code>$11</code> (yes it nows it's actual value). It can then use this to add <code>3</code> to it which means it knows the result to be <code>14</code> (but it's smarter that that - it has also seen that you didn't use that variable so it skips that statement entirely). Next statement is the <code>printf</code> statement and here it can use the fact that it knows <code>x</code> to be <code>11</code> and pass that directly to <code>printf</code>. By the way it also realizes that it doesn't get to use the storage of <code>x</code> at <code>-4(%ebp)</code>. Finally it may know what <code>printf</code> does (since you included <code>stdio.h</code>) so can analyze the format string and do the conversion at compile time to replace the <code>printf</code> statement to a call that directly writes <code>14</code> to standard out.</p>\n"}], "owner": {"reputation": 193, "user_id": 6396562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a62231d631b82ca80222351684331eb?s=128&d=identicon&r=PG&f=1", "display_name": "Richard", "link": "https://stackoverflow.com/users/6396562/richard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 42533326, "answer_count": 1, "score": 1, "last_activity_date": 1488376533, "creation_date": 1488375278, "question_id": 42533198, "link": "https://stackoverflow.com/questions/42533198/why-asm-generated-by-gcc-mov-twice", "title": "Why asm generated by gcc mov twice?", "body": "<p>Suppose I have the following C code:\n    #include </p>\n\n<pre><code>int main()\n{\n    int x = 11;\n    int y = x + 3;\n    printf(\"%d\\n\", x);\n    return 0;\n}\n</code></pre>\n\n<p>Then I compile it into asm using gcc, I get this(with some flag removed):</p>\n\n<pre><code>main:\n    pushq   %rbp\n    movq    %rsp, %rbp\n    subq    $16, %rsp\n    movl    $11, -4(%rbp)\n    movl    -4(%rbp), %eax\n    addl    $3, %eax\n    movl    %eax, -8(%rbp)\n    movl    -4(%rbp), %eax\n    movl    %eax, %esi\n    movl    $.LC0, %edi\n    movl    $0, %eax\n    call    printf\n    movl    $0, %eax\n    leave\n    ret\n</code></pre>\n\n<p>My problem is why it is <code>movl -4(%rbp), %eax</code> followed by <code>movl %eax, %esi</code>, rather than a simple <code>movl -4(%rbp), %esi</code>(which works well according to my experiment)?</p>\n"}, {"tags": ["c", "trie"], "comments": [{"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 4, "creation_date": 1488373296, "post_id": 42532440, "comment_id": 72200585, "body": "<code>if (...) return ..; else exit();</code> makes the rest of the function unreachable."}, {"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 2, "creation_date": 1488373377, "post_id": 42532440, "comment_id": 72200639, "body": "Learn to use a debugger. You won&#39;t get far by asking on SO every single time your code doesn&#39;t do what you wanted."}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1488373500, "post_id": 42532440, "comment_id": 72200731, "body": "Also in <code>getNew</code>, <code>newNode-&gt;str = word;</code> You probably want to use <a href=\"http://en.cppreference.com/w/c/experimental/dynamic/strdup\" rel=\"nofollow noreferrer\"><code>strdup</code></a> here."}], "answers": [{"tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 1, "last_activity_date": 1488373488, "creation_date": 1488373488, "answer_id": 42532559, "question_id": 42532440, "link": "https://stackoverflow.com/questions/42532440/why-does-the-root-change-its-data/42532559#42532559", "title": "Why does the root change its data?", "body": "<p>This:</p>\n\n<pre><code>newNode-&gt;str = word;\n</code></pre>\n\n<p>doesn't copy the string (as in, the characters that build up the string), it just copies the location of <em>a</em> string, which is an argument. That location will not remain valid when the function exits, so this gives you undefined behavior when you access it later.</p>\n\n<p>C does not support assigning arrays, and arrays are not pointers.</p>\n"}], "owner": {"reputation": 1, "user_id": 7641363, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-pUm0HyLQkb4/AAAAAAAAAAI/AAAAAAAAAGQ/EEXZFawpUoo/photo.jpg?sz=128", "display_name": "Alex Baranowski", "link": "https://stackoverflow.com/users/7641363/alex-baranowski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "closed_date": 1488391939, "answer_count": 1, "score": -3, "last_activity_date": 1488373488, "creation_date": 1488373169, "last_edit_date": 1488373347, "question_id": 42532440, "link": "https://stackoverflow.com/questions/42532440/why-does-the-root-change-its-data", "closed_reason": "Not suitable for this site", "title": "Why does the root change its data?", "body": "<p>Here is are the three structures that I'm using and for instance when my program\ngets 'the' as the first word, it makes *rt->str = the.\nHowever when the next word is read, the key is equal to to the *rt->str and I don't understand why. I'm a c programmer beginnner and this has really stoppped me in my tracks.</p>\n\n<pre><code>struct node {\n    char *str;\n    int occ;\n    struct node *sibling;\n    struct node *child;\n};\n\nstruct node* root;\n\nstruct node* getNew(char word[100]) {\n    struct node *newNode;\n    newNode = (struct node *)malloc(sizeof(struct node));\n    newNode-&gt;str = word;\n    newNode-&gt;sibling = NULL;\n    newNode-&gt;child = NULL;\n    newNode-&gt;occ = 0;\n    return newNode;\n}\n\nstruct node* insert( char key[100], struct node **rt ){\n\n    if(*rt == NULL) {\n        *rt = getNew(key);\n        printf(\"This is the key in the root: %s\\n\", (*rt)-&gt;str);\n        return *rt;\n    }else{\n        printf(\"root word: %s\\n\", (*rt)-&gt;str);\n        exit(0);\n    }\n\n    struct node *leaf = *rt;\n    int n = 0;\n    int i;\n    char w2[100];\n    strcpy(w2, key);\n\n    printf(\"root word: %s\\n\", (*rt)-&gt;str);\n\n    for(i = 0; i &lt; strlen((leaf)-&gt;str); i++) {\n        printf(\"%c %c \\n\", (leaf)-&gt;str[i], key[i]);\n        if((key[0] == (leaf)-&gt;str[i])) {\n            n++;\n            key = key + 1;\n            printf(\"key is: %s \\n\", key);\n        }\n    }\n\n    if(key[0] == 0) {\n        printf(\"key is empty \\n\");\n    }\n\n    printf(\"This is the word after for loop: %s \\n\", key);\n    exit(0);\n}\n</code></pre>\n"}, {"tags": ["javascript", "c", "angularjs", "node.js", "jsctypes"], "comments": [{"owner": {"reputation": 2320, "user_id": 2751535, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5Vdtv.jpg?s=128&g=1", "display_name": "j2ko", "link": "https://stackoverflow.com/users/2751535/j2ko"}, "edited": false, "score": 0, "creation_date": 1488372836, "post_id": 42532161, "comment_id": 72200246, "body": "What do you mean by Chrome App ? - it&#39;s extention?"}, {"owner": {"reputation": 31, "user_id": 5916213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b937978c403c47735c634cd7315bf4f?s=128&d=identicon&r=PG&f=1", "display_name": "rakeshgn", "link": "https://stackoverflow.com/users/5916213/rakeshgn"}, "reply_to_user": {"reputation": 2320, "user_id": 2751535, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5Vdtv.jpg?s=128&g=1", "display_name": "j2ko", "link": "https://stackoverflow.com/users/2751535/j2ko"}, "edited": false, "score": 0, "creation_date": 1488372997, "post_id": 42532161, "comment_id": 72200347, "body": "Chrome App is different from extension. It is detached from Browser and runs like a desktop application in a separate window and there are other differences. But my concern is the C API invoking part."}, {"owner": {"reputation": 2320, "user_id": 2751535, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5Vdtv.jpg?s=128&g=1", "display_name": "j2ko", "link": "https://stackoverflow.com/users/2751535/j2ko"}, "edited": false, "score": 0, "creation_date": 1488373331, "post_id": 42532161, "comment_id": 72200605, "body": "I see. Have you seen that <code>Important: Chrome will be removing support for Chrome Apps on Windows, Mac, and Linux</code> <a href=\"https://developer.chrome.com/apps/contentSecurityPolicy\" rel=\"nofollow noreferrer\">developer.chrome.com/apps/contentSecurityPolicy</a>"}, {"owner": {"reputation": 31, "user_id": 5916213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b937978c403c47735c634cd7315bf4f?s=128&d=identicon&r=PG&f=1", "display_name": "rakeshgn", "link": "https://stackoverflow.com/users/5916213/rakeshgn"}, "reply_to_user": {"reputation": 2320, "user_id": 2751535, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5Vdtv.jpg?s=128&g=1", "display_name": "j2ko", "link": "https://stackoverflow.com/users/2751535/j2ko"}, "edited": false, "score": 0, "creation_date": 1488374605, "post_id": 42532161, "comment_id": 72201512, "body": "Yes. I have seen that but my work is an experimental idea also the same codebase is used for web and mobile application too so I just want to test my idea for which this is one issue I am fighting with from long time."}, {"owner": {"reputation": 42506, "user_id": 3959875, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wJdGu.png?s=128&g=1", "display_name": "wOxxOm", "link": "https://stackoverflow.com/users/3959875/woxxom"}, "edited": false, "score": 0, "creation_date": 1488430111, "post_id": 42532161, "comment_id": 72229638, "body": "<a href=\"https://developer.chrome.com/apps/nativeMessaging\" rel=\"nofollow noreferrer\">developer.chrome.com/apps/nativeMessaging</a>"}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 5916213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b937978c403c47735c634cd7315bf4f?s=128&d=identicon&r=PG&f=1", "display_name": "rakeshgn", "link": "https://stackoverflow.com/users/5916213/rakeshgn"}, "is_accepted": true, "score": 0, "last_activity_date": 1489602279, "creation_date": 1489602279, "answer_id": 42817803, "question_id": 42532161, "link": "https://stackoverflow.com/questions/42532161/call-c-shared-library-api-in-so-lib-from-javascript/42817803#42817803", "title": "Call C shared library API (in .so lib) from JavaScript", "body": "<p>The issue is solved with node-ffi library. We can use node-ffi to invoke C APIs from the shared library.</p>\n"}], "owner": {"reputation": 31, "user_id": 5916213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b937978c403c47735c634cd7315bf4f?s=128&d=identicon&r=PG&f=1", "display_name": "rakeshgn", "link": "https://stackoverflow.com/users/5916213/rakeshgn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1148, "favorite_count": 1, "accepted_answer_id": 42817803, "answer_count": 1, "score": 0, "last_activity_date": 1489602279, "creation_date": 1488372431, "last_edit_date": 1488519958, "question_id": 42532161, "link": "https://stackoverflow.com/questions/42532161/call-c-shared-library-api-in-so-lib-from-javascript", "title": "Call C shared library API (in .so lib) from JavaScript", "body": "<p>I have a custom C shared library (.so lib) with some APIs. I want to invoke these APIs from AngularJS (or JS). My constraint is that I should not recompile the shared library code using any other compiler but to use the .so file directly. Given limited options to do so, I experimented using some and planning to use some other but none are satisfactory i.e., they require my shared lib code to be recompiled with their own compiler. My UI application is a Chrome App.</p>\n\n<ol>\n<li>Emscripten works but requires my .so lib to be compiled with emcc compiler. Hence not useful.</li>\n<li>Use Google PNaCl which also requires my .so lib to be compiled with its own SDK.</li>\n<li>Use Node js and invoke the C APIs from the .so lib directly using node-gyp.</li>\n<li>Use js-ctypes and try to invoke C APIs from JS code directly.</li>\n</ol>\n\n<p>I know that first two doesn't work for me. For the third and fourth ones, I am not sure if they work without recompilation of the library code using their own compilers or SDKs.\nCould you please share some of your expertise on if this is possible or is there any other way to do?</p>\n"}, {"tags": ["c", "linux", "fonts", "x11", "truetype"], "comments": [{"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1488371680, "post_id": 42531831, "comment_id": 72199380, "body": "There is no such error as &quot;finding difficulty&quot;"}, {"owner": {"reputation": 21, "user_id": 7348792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4de9eefe7d5664df08124b30a3fc9baf?s=128&d=identicon&r=PG&f=1", "display_name": "Pops", "link": "https://stackoverflow.com/users/7348792/pops"}, "reply_to_user": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1488372714, "post_id": 42531831, "comment_id": 72200171, "body": "I don&#39;t know how to change the font size, so please help me."}, {"owner": {"reputation": 39499, "user_id": 740553, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/s5cOX.jpg?s=128&g=1", "display_name": "Mike &#39;Pomax&#39; Kamermans", "link": "https://stackoverflow.com/users/740553/mike-pomax-kamermans"}, "edited": false, "score": 0, "creation_date": 1488409391, "post_id": 42531831, "comment_id": 72223360, "body": "Can you please read through the <a href=\"/help/how-to-ask\">&quot;how do I ask a good question&quot;</a> again and update your post accordingly? Those three lines of code are certainly not enough to see what might be going wrong in your code so at the very least see if you can create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> so that people can actually understand the problem. Lacking that, you&#39;re going to have to be way more detailed on what it is you&#39;re doing. You&#39;ve left out a lot of information that you might think is obvious, but to someone who isn&#39;t you, isn&#39;t obvious at all."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1488464739, "post_id": 42531831, "comment_id": 72250356, "body": "<a href=\"https://www.x.org/releases/X11R7.6/doc/xorg-docs/specs/XLFD/xlfd.html#scalable_fonts\" rel=\"nofollow noreferrer\">x.org/releases/X11R7.6/doc/xorg-docs/specs/XLFD/&hellip;</a>"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1488726147, "post_id": 42531831, "comment_id": 72349103, "body": "Nobody uses server-side fonts these days."}, {"owner": {"reputation": 21, "user_id": 7348792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4de9eefe7d5664df08124b30a3fc9baf?s=128&d=identicon&r=PG&f=1", "display_name": "Pops", "link": "https://stackoverflow.com/users/7348792/pops"}, "edited": false, "score": 0, "creation_date": 1488782339, "post_id": 42531831, "comment_id": 72366642, "body": "yes, but I need this. Or can you suggest me the alternative?@n.m."}, {"owner": {"reputation": 2001, "user_id": 2502234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99ca9cf38107858a2b49718da4b603fc?s=128&d=identicon&r=PG", "display_name": "nim", "link": "https://stackoverflow.com/users/2502234/nim"}, "edited": false, "score": 0, "creation_date": 1488900415, "post_id": 42531831, "comment_id": 72430149, "body": "Server-side fonts have been going the way of the dodo for more than a dozen years, they are completely gone in wayland, save yourself pain and migrate to a fontconfig+harfbuzz-ng stack (like Libreoffice, since you reference it)"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1489081085, "post_id": 42531831, "comment_id": 72525906, "body": "Run <code>xfontsel</code> and see which fonts are installed on your server. Most don&#39;t have pixel sizes larger than 40. The alternative is client-side fonts of course."}, {"owner": {"reputation": 21, "user_id": 7348792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4de9eefe7d5664df08124b30a3fc9baf?s=128&d=identicon&r=PG&f=1", "display_name": "Pops", "link": "https://stackoverflow.com/users/7348792/pops"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1489137533, "post_id": 42531831, "comment_id": 72549561, "body": "Yes, you are right @n.m. But what should I do to get 90-100size fonts?I have tried many fonts with xfontsel, some fonts were not scalable."}, {"owner": {"reputation": 21, "user_id": 7348792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4de9eefe7d5664df08124b30a3fc9baf?s=128&d=identicon&r=PG&f=1", "display_name": "Pops", "link": "https://stackoverflow.com/users/7348792/pops"}, "edited": false, "score": 0, "creation_date": 1489137648, "post_id": 42531831, "comment_id": 72549623, "body": "Do anyone know any website to download large,sharp and scalable fonts"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1489144848, "post_id": 42531831, "comment_id": 72554253, "body": "Again, use <b>client side fonts</b>.  If you for some unknown reason require server-side fonts, you can install scalable fonts (ttf, opentype) server-side. Almost nobody does this because client side fonts are better."}, {"owner": {"reputation": 2001, "user_id": 2502234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99ca9cf38107858a2b49718da4b603fc?s=128&d=identicon&r=PG", "display_name": "nim", "link": "https://stackoverflow.com/users/2502234/nim"}, "edited": false, "score": 0, "creation_date": 1489148886, "post_id": 42531831, "comment_id": 72556596, "body": "scalable fonts, unicode fonts, opentype fonts and any kind of non-toy modern font are semi broken in the core X font system (xfontsel &amp; co). That&#39;s what caused the maintainers of this system to deprecate it and rewrite it completely client-side  (fontconfig then harfbuzz-ng) circa 2003."}], "answers": [{"tags": [], "owner": {"reputation": 2001, "user_id": 2502234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99ca9cf38107858a2b49718da4b603fc?s=128&d=identicon&r=PG", "display_name": "nim", "link": "https://stackoverflow.com/users/2502234/nim"}, "is_accepted": false, "score": 4, "last_activity_date": 1489423033, "last_edit_date": 1489423033, "creation_date": 1489151816, "answer_id": 42719338, "question_id": 42531831, "link": "https://stackoverflow.com/questions/42531831/adding-fonts-with-very-large-size-in-x11/42719338#42719338", "title": "Adding fonts with very large size in x11", "body": "<p>[LONG explanation since short comments seem insufficient]</p>\n\n<p>One upon a time\u00a0:</p>\n\n<ul>\n<li>7/8-bit character encodings (256 symbols per font max) ruled,</li>\n<li>low resolution screens (800\u00d7600 max) were the norm,</li>\n<li>fonts were scarce (no real font creation tooling, pixel by pixel design).</li>\n</ul>\n\n<p>So people wrote something called the X11 core font system whose main objective was to help you select among a stash of server-side expensive paid-for corporate 256-character single-resolution bitmap fonts. And \"help\" took the form of obscure XFLD strings, with xfontsel as helper.</p>\n\n<p>Then happened:</p>\n\n<ul>\n<li>desktop publishing,</li>\n<li>vector fonts (Postscript),</li>\n<li>smart fonts (TrueType then OpenType: grit-fitting, hinting, complex glyph composition and positioning,  ligatures, etc),</li>\n<li>large encoding fonts (Unicode),</li>\n<li>multi-directionnal languages,</li>\n<li>multifaced fonts (not only regular + bold + italic),</li>\n<li>larger font availability (Microsoft core fonts for the web, then GNOME's Bitstream Vera, then the Open Fonts library, then the Google fonts directory)</li>\n<li>better resolution screens</li>\n<li>HiDPI</li>\n<li>color fonts</li>\n<li>symbol fonts (math, engineering symbols and emoticons)</li>\n</ul>\n\n<p>Users started not caring about 90% of the settings of XFLD strings.</p>\n\n<p>The X11 core fonts system started failing over. Its server-side caching model is really designed for small single-size bitmap fonts, not complex multi-megabyte vector files.</p>\n\n<p>The X11 core fonts maintainers (XFRee86 then Xorg) struggled a while to adapt it to modern times then gave up since the whole design is completely inadapted.</p>\n\n<ul>\n<li>They outsourced vector font rasterization (conversion from vector to bitmap) to freetype.</li>\n<li>Glyph caching was moved client-side with fontconfig (with Xft as a stepping stone that you should completely forget about)</li>\n<li>Text orientation moved to freebidi.</li>\n<li>The \"smart\" part of TrueType/OpenType proved too complex for freetype, so it was outsourced again to GTK (pango\u2026) and QT shaping engines</li>\n<li>And then (once both teams were fed up with handling OpenType specifics and specification updates separately) merged again in harfbuzz-ng.</li>\n</ul>\n\n<p>Every complex open-source software manipulating text that mattered was ported to the new stack. <a href=\"https://wiki.documentfoundation.org/ReleaseNotes/5.3#Text_Layout\" rel=\"nofollow noreferrer\">Including massive codebases such as LibreOffice</a></p>\n\n<p>Big vendors noticed and started contributing directly to those projects (for example, the CFF engine used by freetype nowadays was written by Adobe. Most Opentype OTF fonts on the market use CFF shapes).</p>\n\n<p>The only people who didn't care are vendors of proprietary UNIX software that are quite happy to sell you obsolete graphical code designed around the capabilities of 1980's SGI/Solaris/HP-UX workstations, like to look down on Linux systems, and wait for Windows NT to take up the world by storm. Their target customers are usually engineering/scientific people that are ready to cope with broken text as long as there is no alternative and the computations seem right. Though those people love their data visualisation graphs. I suspect HiDPI will be the end of scientific software stuck in X11 bitmap fonts era.</p>\n\n<p>Therefore:</p>\n\n<ul>\n<li>don't try to push the X11 core fonts system past its limits, many others tried before you and ended up giving up on it</li>\n<li>unless you want to be relegated to the same graveyard as past century Unix workstations, port your code to fontconfig+freebidy+freetype+harfbuzz-ng while you still have some users</li>\n</ul>\n"}], "owner": {"reputation": 21, "user_id": 7348792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4de9eefe7d5664df08124b30a3fc9baf?s=128&d=identicon&r=PG&f=1", "display_name": "Pops", "link": "https://stackoverflow.com/users/7348792/pops"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1553, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1490953042, "creation_date": 1488371531, "last_edit_date": 1488436330, "question_id": 42531831, "link": "https://stackoverflow.com/questions/42531831/adding-fonts-with-very-large-size-in-x11", "title": "Adding fonts with very large size in x11", "body": "<p>I want to add fonts in my x11 application. I tried adding but am finding difficulty in changing its size using the font name. When I changed the font's points and pixel, it turned into very small fonts. Can anyone help in getting the large font name.</p>\n\n<p>Here, I have attached sample code which I tried,</p>\n\n<pre><code>#include &lt;X11/Xlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main(void){\n    Display *d;\n    Window w,w1, w2, w3;\n    XEvent e;\n    int s;\n    XGCValues gr_values1 , gr_values2, gr_values3;\n    XFontStruct *font1, *font2, *font3;\n    GC gr_context1, gr_context2, gr_context3;\n    XColor color, dummy;\n\n    d=XOpenDisplay(NULL);\n    if (d == NULL) {\n        fprintf(stderr,\"cant't open the display\");\n        exit(1);\n    }\n    s=DefaultScreen(d);\n\n    w=XCreateSimpleWindow(d,RootWindow(d,s),0,0,DisplayWidth(d,s),DisplayHeight(d,s),2,BlackPixel(d,s),WhitePixel(d,s));\n    w1=XCreateSimpleWindow(d,w,200,200,200,100,2,BlackPixel(d,s),WhitePixel(d,s));\n    w2=XCreateSimpleWindow(d,w,400,200,200,100,2,BlackPixel(d,s),WhitePixel(d,s));\n    w3=XCreateSimpleWindow(d,w,600,200,200,100,2,BlackPixel(d,s),WhitePixel(d,s));\n\n    font1 = XLoadQueryFont(d, \"-adobe-new century schoolbook-bold-r-normal--24-240-75-75-p-149-iso8859-9\");\n    font2 = XLoadQueryFont(d, \"-adobe-new century schoolbook-bold-r-normal--18-180-75-75-p-113-iso8859-9\");\n    font3 = XLoadQueryFont(d, \"-adobe-new century schoolbook-bold-r-normal--12-120-75-75-p-77-iso8859-9\");\n    XAllocNamedColor(d, DefaultColormap(d, s),\"purple\",&amp;color,&amp;dummy);\n\n    gr_values1.font = font1-&gt;fid;\n    gr_values1.foreground = color.pixel;\n    gr_context1=XCreateGC(d,w,GCFont+GCForeground, &amp;gr_values1);\n    gr_values2.font = font2-&gt;fid;\n    gr_values2.foreground = color.pixel;\n    gr_context2=XCreateGC(d,w,GCFont+GCForeground, &amp;gr_values2);\n    gr_values3.font = font3-&gt;fid;\n    gr_values3.foreground = color.pixel;\n    gr_context3=XCreateGC(d,w,GCFont+GCForeground, &amp;gr_values3);\n\n    XSetFont(d,gr_context1,font1-&gt;fid);\n    XSetFont(d,gr_context2,font2-&gt;fid);\n    XSetFont(d,gr_context3,font3-&gt;fid);\n\n    XSelectInput(d,w,ExposureMask);\n    XSelectInput(d,w1,KeyPressMask);\n    XSelectInput(d,w2,KeyPressMask);\n    XSelectInput(d,w3,KeyPressMask);\n\n    XMapWindow(d,w);\n\n    while(1){\n        XNextEvent(d, &amp;e);\n        if (e.xany.window == w) {\n            if (e.type == Expose) {\n                 XMapWindow(d,w1);\n                 XMapWindow(d,w2);\n                 XMapWindow(d,w3);\n            }\n        }\n        if (e.xany.window == w1) {\n            if (e.type == KeyPress) {\n                XDrawString(d,w1,gr_context1,50,50,\"hello\",5);\n                XDrawString(d,w2,gr_context2,50,50,\"hello\",5);\n                XDrawString(d,w3,gr_context3,50,50,\"hello\",5);\n            }\n        }\n    }\n    XCloseDisplay(d);\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/cZc8n.png\" rel=\"nofollow noreferrer\">output of above code</a></p>\n\n<p>These sizes are not enough for my application. For example, I need size-96 (while selecting in LibreOffice Writer)\n<a href=\"https://i.stack.imgur.com/tZ3zg.png\" rel=\"nofollow noreferrer\">this is the font selected in LibreOffice Writer, this is size-96. I want like this</a></p>\n\n<p>Also suggest for loading TrueType fonts</p>\n"}, {"tags": ["c", "compiler-optimization"], "comments": [{"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 1, "creation_date": 1488370921, "post_id": 42531569, "comment_id": 72198846, "body": "Check a release build."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 2, "creation_date": 1488371118, "post_id": 42531569, "comment_id": 72198958, "body": "What answer are you expecting, besides <i>&quot;it&#39;s possible, but depends on compiler&quot;</i>?"}, {"owner": {"reputation": 635, "user_id": 4795318, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6c50cc029a14f6ad3af57d725e7c751a?s=128&d=identicon&r=PG&f=1", "display_name": "jwsc", "link": "https://stackoverflow.com/users/4795318/jwsc"}, "edited": false, "score": 0, "creation_date": 1488371162, "post_id": 42531569, "comment_id": 72202693, "body": "This can not be aswered in general without knowing the exact code and the compiler. If you have a specific use case in mind, I&#39;ll recommend checking the generated assembly."}, {"owner": {"reputation": 141, "user_id": 6446146, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/222226293323165b15c4721961265f4b?s=128&d=identicon&r=PG&f=1", "display_name": "yeger", "link": "https://stackoverflow.com/users/6446146/yeger"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1488371189, "post_id": 42531569, "comment_id": 72199007, "body": "@BaummitAugen I checked the release build."}, {"owner": {"reputation": 141, "user_id": 6446146, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/222226293323165b15c4721961265f4b?s=128&d=identicon&r=PG&f=1", "display_name": "yeger", "link": "https://stackoverflow.com/users/6446146/yeger"}, "reply_to_user": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1488371233, "post_id": 42531569, "comment_id": 72199041, "body": "@user694733 Maybe no compiler does this, because it assumes that the var can change (for example in another thread)"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1488371431, "post_id": 42531569, "comment_id": 72199201, "body": "@yeger - It cannot make such an assumption. The way the C standard is written is very single thread oriented. It&#39;s in fact a cause for bad &quot;optimizations&quot; in multi-threaded code."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1488371569, "post_id": 42531569, "comment_id": 72199293, "body": "unless a variable is <code>volatile</code>, it can&#39;t change values unexpectedly"}, {"owner": {"reputation": 8510, "user_id": 1292918, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/44cdb725bf1a393149554bae7f5f9d46?s=128&d=identicon&r=PG", "display_name": "Toby", "link": "https://stackoverflow.com/users/1292918/toby"}, "edited": false, "score": 0, "creation_date": 1488371577, "post_id": 42531569, "comment_id": 72199299, "body": "Please correct your tags, the code cannot be C <i>and</i> C++, they are two different languages. Kindly pick one and edit the tags to suit."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 8510, "user_id": 1292918, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/44cdb725bf1a393149554bae7f5f9d46?s=128&d=identicon&r=PG", "display_name": "Toby", "link": "https://stackoverflow.com/users/1292918/toby"}, "edited": false, "score": 0, "creation_date": 1488371632, "post_id": 42531569, "comment_id": 72199344, "body": "@Toby - It simply cannot be C++, due to the use of <code>scanf_s</code>"}, {"owner": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 2, "creation_date": 1488371714, "post_id": 42531569, "comment_id": 72199407, "body": "Unless someone teaches the compiler very specifically what scanf and printf do, scanf might store a pointer to c in some global variable, and printf might modify c through that pointer. If you replace printf with something less opaque, gcc does the optimization."}, {"owner": {"reputation": 8510, "user_id": 1292918, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/44cdb725bf1a393149554bae7f5f9d46?s=128&d=identicon&r=PG", "display_name": "Toby", "link": "https://stackoverflow.com/users/1292918/toby"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1488371759, "post_id": 42531569, "comment_id": 72199447, "body": "@StoryTeller Obvs. But it&#39;s better to educate the asker on proper usage of SO than keep editing their questions. Teach a man to fish etc."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 8510, "user_id": 1292918, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/44cdb725bf1a393149554bae7f5f9d46?s=128&d=identicon&r=PG", "display_name": "Toby", "link": "https://stackoverflow.com/users/1292918/toby"}, "edited": false, "score": 1, "creation_date": 1488371816, "post_id": 42531569, "comment_id": 72199492, "body": "@Toby - Your&#39;e more optimistic than me in that regard. I don&#39;t think the downpour of &quot;C/C++&quot; questions will ever lessen."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1488371864, "post_id": 42531569, "comment_id": 72199528, "body": "Are you low on disc space? Why not use <code>} else if ...</code>? The time you have written this question, you could have a look at the assembly code generated or - better - just added the <code>else</code>."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 1, "creation_date": 1488372053, "post_id": 42531569, "comment_id": 72199674, "body": "This question is basically about <i>abstract machine</i> and <i>observable behaviour</i>. Maybe someone could find a good dupe, I could not."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1488372400, "post_id": 42531569, "comment_id": 72199934, "body": "You code invokes UB. <a href=\"https://msdn.microsoft.com/en-us/library/w40768et.aspx\" rel=\"nofollow noreferrer\">The <code>%c</code> in the <code>scanf_s</code> requires a third argument denoting the number of characters to read</a>. <code>scanf_s(&quot;%c&quot;, &amp;c);</code> \u2192 <code>scanf_s(&quot;%c&quot;, &amp;c, 1);</code>"}], "answers": [{"tags": [], "owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "is_accepted": false, "score": 0, "last_activity_date": 1488372025, "creation_date": 1488372025, "answer_id": 42532016, "question_id": 42531569, "link": "https://stackoverflow.com/questions/42531569/implicit-else-compiler-optimization/42532016#42532016", "title": "implicit else compiler optimization", "body": "<p>I will answer in the context of LLVM/CLANG because I am little familiar with its internals. </p>\n\n<p>If you do turn on the mem2reg optimization in opt, it will treat c as a temporary rather than a variable on the stack (in the phases before register allocation). </p>\n\n<p>There the optimizer can make the required assumption and in that case say the second if was inside the first one, it would be removed by DCE.</p>\n\n<p>But I can't think of any pass from the LLVM suite that would add an \"elseif\". </p>\n\n<p>The same cannot be said about other compilers like gcc/msvc.</p>\n"}, {"tags": [], "owner": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "is_accepted": false, "score": 0, "last_activity_date": 1488372375, "creation_date": 1488372375, "answer_id": 42532135, "question_id": 42531569, "link": "https://stackoverflow.com/questions/42531569/implicit-else-compiler-optimization/42532135#42532135", "title": "implicit else compiler optimization", "body": "<p>Could a compiler <em>theoretically</em> perform the optimization that you suggest? Yes, it absolutely could, but making sure the semantic analysis required to detect such <em>safe</em> scenarios in the compiler are bug free is decidedly non-trivial, and the question is whether the development effort couldn't be spent better elsewhere.</p>\n"}, {"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 1, "last_activity_date": 1488793009, "last_edit_date": 1488793009, "creation_date": 1488392647, "answer_id": 42539206, "question_id": 42531569, "link": "https://stackoverflow.com/questions/42531569/implicit-else-compiler-optimization/42539206#42539206", "title": "implicit else compiler optimization", "body": "<blockquote>\n  <p>I want to know if there is way for the compiler to understand that two if statements can't be true at the same time, and to add an \"implicit else\".</p>\n</blockquote>\n\n<p>Yes there is: the Intel C compiler <code>icc</code> 17 does, as can been verified with <a href=\"https://godbolt.org/g/wLQQFK\" rel=\"nofollow noreferrer\">Matt Godbolt's Compiler Explorer</a>, but neither clang nor gcc seem to perform this optimization. </p>\n"}, {"tags": [], "owner": {"reputation": 420, "user_id": 6136046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c611ad20902b16739f0e92558df778d1?s=128&d=identicon&r=PG", "display_name": "lucvoo", "link": "https://stackoverflow.com/users/6136046/lucvoo"}, "is_accepted": false, "score": 0, "last_activity_date": 1488639626, "creation_date": 1488639626, "answer_id": 42597454, "question_id": 42531569, "link": "https://stackoverflow.com/questions/42531569/implicit-else-compiler-optimization/42597454#42597454", "title": "implicit else compiler optimization", "body": "<p>Since <code>scanf_s()</code> is given a pointer to the variable <code>c</code> this variable can't anymore be considered as a local variable. A priori, the function could store this pointer somewhere and any other functions (unknown to the compiler) could store something via this pointer, like for example the call to <code>printf(\"received 1\\n\")</code>.</p>\n\n<p>In other words, the compiler can't do this optimization unless it knows what the function <code>scanf_s()</code> and <code>printf()</code> are doing.</p>\n"}], "owner": {"reputation": 141, "user_id": 6446146, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/222226293323165b15c4721961265f4b?s=128&d=identicon&r=PG&f=1", "display_name": "yeger", "link": "https://stackoverflow.com/users/6446146/yeger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 190, "favorite_count": 1, "answer_count": 4, "score": 4, "last_activity_date": 1488793009, "creation_date": 1488370838, "last_edit_date": 1488372718, "question_id": 42531569, "link": "https://stackoverflow.com/questions/42531569/implicit-else-compiler-optimization", "title": "implicit else compiler optimization", "body": "<p>I want to know if there is way for the compiler to understand that two <code>if</code> statements can't be true at the same time, and to add an \"implicit else\". For example in this code sample:</p>\n\n<pre><code>int main() {\n    char c;\n    scanf_s(\"%c\", &amp;c, 1);\n    if (c == '1') {\n        printf(\"received 1\\n\");\n    }\n\n    if (c == '2') {\n        printf(\"received 2\\n\");\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p><code>c</code> can't be <code>'1'</code> <em>and</em> <code>'2'</code>, but after compiling in Visual Studio and disassembling I noticed that it will check the second <code>if</code>, no matter what.</p>\n"}, {"tags": ["c", "validation"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 5, "creation_date": 1488370235, "post_id": 42531349, "comment_id": 72198381, "body": "(1) You signature for main is non-standard, and I&#39;m willing to bet it doesn&#39;t do what you expect it to do. (2) You program doesn&#39;t actually call any output routines!"}, {"owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "edited": false, "score": 2, "creation_date": 1488370258, "post_id": 42531349, "comment_id": 72198402, "body": "Turn on your compiler&#39;s warnings.  Then fix what it tells you."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1488370419, "post_id": 42531349, "comment_id": 72198510, "body": "If you haven&#39;t done it yet, please take some time to <a href=\"http://stackoverflow.com/help/how-to-ask\">read about how to ask good questions</a>. Then edit your question to tell us <i>how</i> &quot;it is not working&quot;."}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1488370452, "post_id": 42531349, "comment_id": 72198535, "body": "Here&#39;s an idea: <code>if(sscanf(mac, &quot;%*2x:%*2x:%*2x:%*2x:%*2x:%*2x&quot;) == 6) { printf(&quot;OK!\\n&quot;); </code>."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1488370862, "post_id": 42531349, "comment_id": 72198810, "body": "Ignoring the bugs in your main signature and not looking the logic. You are returning the result not printing.  If you are on *NIX environment you can run echo $? after running the above code.  On windows you can run echo %errorlevel%"}], "answers": [{"tags": [], "owner": {"reputation": 8510, "user_id": 1292918, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/44cdb725bf1a393149554bae7f5f9d46?s=128&d=identicon&r=PG", "display_name": "Toby", "link": "https://stackoverflow.com/users/1292918/toby"}, "is_accepted": false, "score": 1, "last_activity_date": 1488371211, "creation_date": 1488371211, "answer_id": 42531711, "question_id": 42531349, "link": "https://stackoverflow.com/questions/42531349/validate-mac-address-in-c/42531711#42531711", "title": "Validate MAC address in C", "body": "<p>If you use the code from the link you gave as part of a <em>valid</em> C program then it will work. You need to go learn about input and output methods for C weather they be via stdio or passing arguments to, and handling return values from, <code>main()</code></p>\n\n<p>In <em>psuedo-code</em> this might look like:</p>\n\n<pre><code>#include &lt;ctype.h&gt;\nint isValidMacAddress(const char* mac);\n\nint main (int argc, char *argv[]) {\n    mac = get-input;\n    result = isValidMacAddress(mac);\n    output-result(result);\n}\n\nint isValidMacAddress(const char* mac) {\n    int i = 0;\n    int s = 0;\n\n    while (*mac) {\n        if (isxdigit(*mac)) {\n            i++;\n        } else if (*mac == ':' || *mac == '-') {\n            if (i == 0 || i / 2 - 1 != s)\n                break;\n            ++s;\n        }\n        else {\n            s = -1;\n        }\n        ++mac;\n    }\n    return (i == 12 &amp;&amp; (s == 5 || s == 0));\n}\n</code></pre>\n\n<p>Now the <code>get-input</code> part could request the user type, and subsequently read (research <code>scanf()</code>), some value at the console (standard input), or it could get the input from an argument given to <code>main()</code> when the program is called.</p>\n\n<p>The <code>output-result</code> part could be simply returning the result to the calling environment, or it could be printing (research <code>printf()</code>) the value to the console (standard output).</p>\n"}], "owner": {"reputation": 43, "user_id": 6568452, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9399cc5f2087d4cd977cdb0157851924?s=128&d=identicon&r=PG&f=1", "display_name": "Adarsha Verma", "link": "https://stackoverflow.com/users/6568452/adarsha-verma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1113, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1488380902, "creation_date": 1488370162, "last_edit_date": 1495541357, "question_id": 42531349, "link": "https://stackoverflow.com/questions/42531349/validate-mac-address-in-c", "title": "Validate MAC address in C", "body": "<p>i need to verify that the given MAC address is valid or not.</p>\n\n<p>I went through some links <a href=\"https://stackoverflow.com/questions/4792035/how-do-you-validate-that-a-string-is-a-valid-mac-address-in-c\">How do you validate that a string is a valid MAC address in C?</a></p>\n\n<p>I followed steps as above but it is not working please help me.\nHere is what i tried.</p>\n\n<pre><code>#include &lt;ctype.h&gt;\n\nint main(const char* mac) {\n  int i = 0;\n  int s = 0;\n  mac = \"11:11:11:11:11:11\"\n\n  while (*mac) {\n    if (isxdigit(*mac)) {\n      i++;\n    }\n    else if (*mac == ':' || *mac == '-') {\n      if (i == 0 || i / 2 - 1 != s)\n        break;\n      ++s;\n    }\n    else \n      s = -1;\n    ++mac;\n  }\n  return (i == 12 &amp;&amp; (s == 5 || s == 0));\n}\n</code></pre>\n\n<p>This code runs fine but i am not getting any output.\nPlease help me.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1488368946, "post_id": 42530758, "comment_id": 72197542, "body": "It would be good to see any attempts you have made."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 1, "creation_date": 1488369206, "post_id": 42530758, "comment_id": 72197724, "body": "Also, <code>fflush(stdin)</code> gives undefined behaviour."}, {"owner": {"reputation": 37, "user_id": 7196630, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/48dc13f194ca2e98563ffae965af364c?s=128&d=identicon&r=PG&f=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/7196630/luke"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1488372002, "post_id": 42530758, "comment_id": 72199630, "body": "I have added as much as possible to the original post @AjayBrahmakshatriya but don&#39;t know where to go from there"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1489590489, "post_id": 42530758, "comment_id": 72739339, "body": "Please <a href=\"https://stackoverflow.com/posts/42530758/edit\">edit</a> your question to show <a href=\"http://whathaveyoutried.com\" rel=\"nofollow noreferrer\">what you have tried so far</a>.  You should include at least an outline (but preferably a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>) of the code that you are having problems with, then we can try to help with the specific problem. You should also read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 7196630, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/48dc13f194ca2e98563ffae965af364c?s=128&d=identicon&r=PG&f=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/7196630/luke"}, "edited": false, "score": 0, "creation_date": 1488374020, "post_id": 42531337, "comment_id": 72201080, "body": "this is great thanks! how would I go about outputting the location of the closest value? @Shihab"}, {"owner": {"reputation": 37, "user_id": 7196630, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/48dc13f194ca2e98563ffae965af364c?s=128&d=identicon&r=PG&f=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/7196630/luke"}, "edited": false, "score": 0, "creation_date": 1488374815, "post_id": 42531337, "comment_id": 72201699, "body": "in the main method I&#39;ve got printf(&quot;\\nThe closest value to the mean is %6d and the location is \\n&quot;, fnFindClosestVal(arn2DArray, 5, 6, fnFindAverageValue(arn2DArray, 5, 6))); is there any way of inserting this location within the printf statement"}, {"owner": {"reputation": 196, "user_id": 7439381, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-nZkDJmzC57c/AAAAAAAAAAI/AAAAAAAAAcM/s_glMjx5_X0/photo.jpg?sz=128", "display_name": "Shihab Pullissery", "link": "https://stackoverflow.com/users/7439381/shihab-pullissery"}, "reply_to_user": {"reputation": 37, "user_id": 7196630, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/48dc13f194ca2e98563ffae965af364c?s=128&d=identicon&r=PG&f=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/7196630/luke"}, "edited": false, "score": 0, "creation_date": 1488375120, "post_id": 42531337, "comment_id": 72201881, "body": "So you need to return multiple values from the function. In that case you have to pass those variables as pointers to the function."}, {"owner": {"reputation": 37, "user_id": 7196630, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/48dc13f194ca2e98563ffae965af364c?s=128&d=identicon&r=PG&f=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/7196630/luke"}, "edited": false, "score": 0, "creation_date": 1488375349, "post_id": 42531337, "comment_id": 72202037, "body": "I&#39;m not really too sure about how this would be done. Sorry I&#39;m quite new to C. @Shihab"}, {"owner": {"reputation": 196, "user_id": 7439381, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-nZkDJmzC57c/AAAAAAAAAAI/AAAAAAAAAcM/s_glMjx5_X0/photo.jpg?sz=128", "display_name": "Shihab Pullissery", "link": "https://stackoverflow.com/users/7439381/shihab-pullissery"}, "reply_to_user": {"reputation": 37, "user_id": 7196630, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/48dc13f194ca2e98563ffae965af364c?s=128&d=identicon&r=PG&f=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/7196630/luke"}, "edited": false, "score": 0, "creation_date": 1488375645, "post_id": 42531337, "comment_id": 72202254, "body": "Function modified accordingly. call the function as below.  int posRow; int posCol; fnFindClosestVal(arn2DArray, nRows, nCols, nTotal, &amp;posRow, &amp;posCol);  print(posRow and posCol);"}], "tags": [], "owner": {"reputation": 196, "user_id": 7439381, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-nZkDJmzC57c/AAAAAAAAAAI/AAAAAAAAAcM/s_glMjx5_X0/photo.jpg?sz=128", "display_name": "Shihab Pullissery", "link": "https://stackoverflow.com/users/7439381/shihab-pullissery"}, "is_accepted": true, "score": 1, "last_activity_date": 1488375613, "last_edit_date": 1488375613, "creation_date": 1488370111, "answer_id": 42531337, "question_id": 42530758, "link": "https://stackoverflow.com/questions/42530758/how-to-retrieve-closest-value-to-mean-and-its-location-c/42531337#42531337", "title": "How to retrieve closest value to mean and its location C", "body": "<ol>\n<li>Subtract the mean value from each element.</li>\n<li>Take the absolute value of the result. </li>\n<li><p>Store the position and element which have lowest difference.</p>\n\n<pre><code> int fnFindClosestVal(int arn2DArray[][6], int nRows, int nCols, double nTotal, int *posRow, int *posCol)\n    {\n        int nClosestValue = arn2DArray[0][0];\n        int nDiff = abs(arn2DArray[0][0] - nTotal);\n        int Row,Col;\n\n        for (nCountRows = 0; nCountRows &lt; nRows; nCountRows++)\n        {\n            for (nCountCols = 0; nCountCols &lt; nCols; nCountCols++)\n            {\n                    if(abs(arn2DArray[nCountRows][nCountCols] - nTotal) &lt; nDiff)\n                     {\n                        nDiff = abs(arn2DArray[nCountRows][nCountCols] - nTotal);\n                        nClosestValue = arn2DArray[nCountRows][nCountCols];\n                        *posRow = nCountRows;\n                        *posCol = nCountCols;\n                     }\n            }\n        }\n    return nClosestValue;\n}\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 37, "user_id": 7196630, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/48dc13f194ca2e98563ffae965af364c?s=128&d=identicon&r=PG&f=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/7196630/luke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 42531337, "answer_count": 1, "score": -1, "last_activity_date": 1488376485, "creation_date": 1488368442, "last_edit_date": 1488376485, "question_id": 42530758, "link": "https://stackoverflow.com/questions/42530758/how-to-retrieve-closest-value-to-mean-and-its-location-c", "title": "How to retrieve closest value to mean and its location C", "body": "<p>I was just wondering how you would get the closest value to the mean, the program retrieves input from the user and then outputs a 2D array, within the two ranges the user inputted. It then also outputs lowest and highest array values, the mean(all of this has been coded), I'm just unsure how to write a function to return the closest value in the array to the mean and then the location within the array.</p>\n"}, {"tags": ["c", "fortran", "mpi", "fortran-iso-c-binding", "fortran2003"], "answers": [{"comments": [{"owner": {"reputation": 578, "user_id": 4702870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13ace2c55a0e778218505607ac41f999?s=128&d=identicon&r=PG&f=1", "display_name": "Federico Perini", "link": "https://stackoverflow.com/users/4702870/federico-perini"}, "edited": false, "score": 0, "creation_date": 1488461866, "post_id": 42531754, "comment_id": 72248188, "body": "Thanks @vladimir-f, your approach works very well. Actually, calling the <code>f_MPI_Comm_f2c</code> function just once in the code avoids boring allocations/deallocations of the C pointer. It would be great if Fortran provided an object-oriented encapsulation of MPI like C++..."}, {"owner": {"reputation": 49888, "user_id": 721644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/KSRQT.jpg?s=128&g=1", "display_name": "Vladimir F", "link": "https://stackoverflow.com/users/721644/vladimir-f"}, "reply_to_user": {"reputation": 578, "user_id": 4702870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13ace2c55a0e778218505607ac41f999?s=128&d=identicon&r=PG&f=1", "display_name": "Federico Perini", "link": "https://stackoverflow.com/users/4702870/federico-perini"}, "edited": false, "score": 0, "creation_date": 1488462014, "post_id": 42531754, "comment_id": 72248319, "body": "Actually, the C++ MPI bindings are deprecated. The modern Fortran 2008 bindings are quite a nice step forward."}, {"owner": {"reputation": 578, "user_id": 4702870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13ace2c55a0e778218505607ac41f999?s=128&d=identicon&r=PG&f=1", "display_name": "Federico Perini", "link": "https://stackoverflow.com/users/4702870/federico-perini"}, "edited": false, "score": 0, "creation_date": 1488465834, "post_id": 42531754, "comment_id": 72251123, "body": "Yeah but usage of .mod files from the MPI implementation will always be compiler-dependent, isn&#39;t it? Since the .mod format has not been standardized as a corresponding C header would be"}, {"owner": {"reputation": 49888, "user_id": 721644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/KSRQT.jpg?s=128&g=1", "display_name": "Vladimir F", "link": "https://stackoverflow.com/users/721644/vladimir-f"}, "reply_to_user": {"reputation": 578, "user_id": 4702870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13ace2c55a0e778218505607ac41f999?s=128&d=identicon&r=PG&f=1", "display_name": "Federico Perini", "link": "https://stackoverflow.com/users/4702870/federico-perini"}, "edited": false, "score": 0, "creation_date": 1488466130, "post_id": 42531754, "comment_id": 72251344, "body": "That&#39;s something else. C++ ABI also isn&#39;t compiler indempendent. If you are implying you are still using <code>mpif.h</code>, it really isn&#39;t a good idea. If the MPI is compiled for a different compiler you can still have unpleasant surprises even if you manage to compile."}], "tags": [], "owner": {"reputation": 49888, "user_id": 721644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/KSRQT.jpg?s=128&g=1", "display_name": "Vladimir F", "link": "https://stackoverflow.com/users/721644/vladimir-f"}, "is_accepted": false, "score": 4, "last_activity_date": 1488376439, "last_edit_date": 1488376439, "creation_date": 1488371319, "answer_id": 42531754, "question_id": 42530620, "link": "https://stackoverflow.com/questions/42530620/how-to-pass-mpi-communicator-handle-from-fortran-to-c-using-iso-c-binding/42531754#42531754", "title": "How to pass MPI communicator handle from Fortran to C using iso_c_binding", "body": "<p>No, I don't think there is a much better way to do it. And it is not that much complicated that I would be concerned about it. You can look at a similar function I use at</p>\n\n<p><a href=\"https://github.com/LadaF/PoisFFT/blob/master/src/f_mpi_comm_c2f.c\" rel=\"nofollow noreferrer\">https://github.com/LadaF/PoisFFT/blob/master/src/f_mpi_comm_c2f.c</a></p>\n\n<p>It is the opposite direction to your <code>CFunction_FMPI</code> and just translates the communicator. It is from C to Fortran.</p>\n\n<pre><code>// This function is callable from Fortran. MPI_Comm_c2f itself may be just a macro.\n\nMPI_Fint f_MPI_Comm_c2f(MPI_Comm *comm) {\n  return MPI_Comm_c2f(*comm);\n}\n</code></pre>\n\n<p>It is than called from Fortran as</p>\n\n<pre><code>interface\n    integer function MPI_Comm_c2f(c_handle) bind(C, name=\"f_MPI_Comm_c2f\")\n      use iso_c_binding\n      type(c_ptr), value :: c_handle\n    end function\nend interface\n</code></pre>\n\n<p>The important point is that <code>MPI_Comm_c2f</code> is in some MPI libraries a C macro, not a function, so you cannot really call it from Fortran. I am quite sure <code>MPI_Comm_f2c</code> is also allowed to be a macro and you cannot therefore call it from Fortran.</p>\n\n<hr>\n\n<p>What you can do is to create a Fortran function, which just calls the C wrapper for <code>MPI_Comm_f2c</code> and than call your C function in Fortran using a <code>bind(C)</code> interface as</p>\n\n<pre><code>status = CFunction(something, c_comm)\n</code></pre>\n\n<p>and thus avoid creating a wrapper for each C function. You just need a Fortran interface block for them.</p>\n\n<p>The problem is that you don't have <code>MPI_Comm</code> in Fortran* in (in practice it is a pointer or an int) so you must use an opaque pointer.</p>\n\n<pre><code>MPI_Comm* f_MPI_Comm_f2c(MPI_Fint Fcomm)\n{   MPI_Comm* Ccomm;\n    Ccomm = malloc(sizeof(MPI_Comm));\n    *Ccomm = MPI_Comm_f2c(Fcomm);\n    return Ccomm;\n}\n</code></pre>\n\n<p>which returns an opaque pointer <code>type(c_ptr)</code>. (Check for potential C coding errors I just even forgot to use semicolons.)</p>\n\n<p>You than just once convert the Fortran communicator to the pointer to the C communicator.</p>\n\n<pre><code> type(c_ptr) :: c_comm\n c_comm = f_MPI_Comm_f2c(comm)\n</code></pre>\n\n<hr>\n\n<p>* There is a derived type <code>type(MPI_Comm)</code> in MPI-3, but it contains an integer component which must be converted by the conversion routines anyway.</p>\n"}], "owner": {"reputation": 578, "user_id": 4702870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13ace2c55a0e778218505607ac41f999?s=128&d=identicon&r=PG&f=1", "display_name": "Federico Perini", "link": "https://stackoverflow.com/users/4702870/federico-perini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1097, "favorite_count": 1, "answer_count": 1, "score": 5, "last_activity_date": 1488376439, "creation_date": 1488368013, "last_edit_date": 1488368432, "question_id": 42530620, "link": "https://stackoverflow.com/questions/42530620/how-to-pass-mpi-communicator-handle-from-fortran-to-c-using-iso-c-binding", "title": "How to pass MPI communicator handle from Fortran to C using iso_c_binding", "body": "<p>I am trying to link a parallel MPI Fortran program to a parallel C library which uses MPI too. The software architecture is Fortran-centered so I'm trying to keep as much as I can on the Fortran side. </p>\n\n<p>So I need to pass the C routines a handle to the MPI communicator. They are of the form </p>\n\n<pre><code>  int CFunction(int *something, MPI_Comm *Ccomm)\n</code></pre>\n\n<p>MPI comes with interfaces to translate a Fortran to a C communicator handle: </p>\n\n<pre><code>MPI_Comm MPI_Comm_f2c(MPI_Fint comm)\n</code></pre>\n\n<p>However, these routines are supposed to be called from C so right now I've had to add C wrapper functions I can pass the Fortran communicator to: </p>\n\n<pre><code>int CFunction_FMPI(int *something, MPI_Fint *Fcomm)\n{   MPI_Comm Ccomm; int status;\n    Ccomm = MPI_Comm_f2c(*Fcomm); // Convert Fortran-&gt;C communicator\n    status = CFunction(*something,*Ccomm); // Call original function\n    return status;\n}\n</code></pre>\n\n<p>then I had to write a 2nd interface -- to <code>CFunction_FMPI</code> -- using Fortran's C bindings to allow it to be called from Fortran. </p>\n\n<p>My question is: isn't there any better way to do this, i.e., to avoid the C wrapper with Fortran->C communicator conversion? I think calling <code>MPI_Comm_f2c</code> directly from Fortran and storing the result in a <code>type(c_ptr)</code> or <code>integer(c_int)</code> variable would be best, but I haven't been able to do it since there is no straightforward/general binding between the <code>MPI_Comm</code> type and Fortran.</p>\n"}, {"tags": ["c"], "answers": [{"tags": [], "owner": {"reputation": 196, "user_id": 7439381, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-nZkDJmzC57c/AAAAAAAAAAI/AAAAAAAAAcM/s_glMjx5_X0/photo.jpg?sz=128", "display_name": "Shihab Pullissery", "link": "https://stackoverflow.com/users/7439381/shihab-pullissery"}, "is_accepted": false, "score": 0, "last_activity_date": 1488368354, "creation_date": 1488368354, "answer_id": 42530726, "question_id": 42530570, "link": "https://stackoverflow.com/questions/42530570/printing-a-double-half-pyramid-in-c/42530726#42530726", "title": "Printing a double half pyramid in C", "body": "<pre><code>for(star=1;star&lt;=row*2;star++){\n\n        printf(\"#\");\n    if(star == row)\n    printf(\" \");\n\n }\n</code></pre>\n\n<p><strong>Modify the second loop as above</strong></p>\n"}, {"tags": [], "owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "is_accepted": false, "score": 2, "last_activity_date": 1488376384, "last_edit_date": 1488376384, "creation_date": 1488368803, "answer_id": 42530897, "question_id": 42530570, "link": "https://stackoverflow.com/questions/42530570/printing-a-double-half-pyramid-in-c/42530897#42530897", "title": "Printing a double half pyramid in C", "body": "<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n    int height=5;\n    const char* bricks = \"###############\"\n    for(int i=1; i&lt;height+1; ++i)\n    {\n        printf(\"%*.*s      %.*s\\n\", height,i,bricks, i,bricks);\n    }\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"http://ideone.com/i5jtEJ\" rel=\"nofollow noreferrer\">IDEOne Link</a></p>\n\n<p>Output:</p>\n\n<pre><code>    #      #\n   ##      ##\n  ###      ###\n ####      ####\n#####      #####\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1044, "user_id": 6451874, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2fcba324f29f2095a65d59ba83dd4bdd?s=128&d=identicon&r=PG&f=1", "display_name": "Ofer Arial", "link": "https://stackoverflow.com/users/6451874/ofer-arial"}, "is_accepted": false, "score": 0, "last_activity_date": 1488369262, "creation_date": 1488369262, "answer_id": 42531061, "question_id": 42530570, "link": "https://stackoverflow.com/questions/42530570/printing-a-double-half-pyramid-in-c/42531061#42531061", "title": "Printing a double half pyramid in C", "body": "<p>The following code is <strong>simple to understand</strong> and <strong>gives you full control</strong> over the peramid: </p>\n\n<p>You can change also the height (number of rows) and the size of the half peramid (in example - 4). Then it prints <code>*</code> as the bricks in the image, <code>spaces</code> as the spaces and <code>##</code> as the space between them.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n    int row,col,space,n1=4, n2=4;\n\n    for(row=1;row&lt;=n1;row++){\n\n    for(space=n2-row;space&gt;=0;space--)\n        printf(\" \");\n\n    for(col=1;col&lt;=row;col++)\n        printf(\"*\");\n\n    printf(\"##\");\n\n    for(col=1;col&lt;=row;col++)\n        printf(\"*\");      \n\n    for(space=n2-row;space&gt;=0;space--)\n        printf(\" \");\n\n    }\n\n    printf(\"\\n\");\n}\n</code></pre>\n\n<p><strong>Example output:</strong></p>\n\n<pre><code>    *##*    \n   **##**   \n  ***##***  \n ****##****  \n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 7640881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ceb5babe8ee9c3082a0720d2cd5e5621?s=128&d=identicon&r=PG&f=1", "display_name": "ishatter13", "link": "https://stackoverflow.com/users/7640881/ishatter13"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1656, "favorite_count": 0, "answer_count": 3, "score": -4, "last_activity_date": 1606342111, "creation_date": 1488367877, "last_edit_date": 1488378799, "question_id": 42530570, "link": "https://stackoverflow.com/questions/42530570/printing-a-double-half-pyramid-in-c", "title": "Printing a double half pyramid in C", "body": "<p>I want to print two half pyramids that look like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/0gOOr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0gOOr.png\" alt=\"http://i.imgur.com/yze8MlI.png\"></a></p>\n\n<p>so far my code looks something like this </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n    int row, star, space, n;\n    printf(\"Enter row number:\");\n    scanf(\"%d\", &amp;n);\n    for (row = 1; row &lt;= n; row++) {\n        for (space = n - 1; space &gt;= row; space--){\n            printf(\" \");\n        }\n        for (star = 1; star &lt;= row; star++) {\n            printf(\"##\");\n        }\n        printf(\"\\n\");\n    }\n    return 0;\n}\n</code></pre>\n\n<p>but it prints the whole pyramid,how do I implement a space in the middle? </p>\n"}, {"tags": ["c", "go", "cgo"], "comments": [{"owner": {"reputation": 6034, "user_id": 4460500, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/7TTnO.jpg?s=128&g=1", "display_name": "VolAnd", "link": "https://stackoverflow.com/users/4460500/voland"}, "edited": false, "score": 1, "creation_date": 1488368053, "post_id": 42530538, "comment_id": 72196945, "body": "are you sure  that memory allocated in main program can be reallocated in C function? It can be differences in memory management"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1488382566, "post_id": 42530538, "comment_id": 72207354, "body": "Instead of resorting to three star programming, have the function return a <code>char**</code>. The return code of the function does nothing meaningful currently."}, {"owner": {"reputation": 498, "user_id": 2854555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2056d56888b443ab438fb956e898cc9d?s=128&d=identicon&r=PG", "display_name": "renyuneyun", "link": "https://stackoverflow.com/users/2854555/renyuneyun"}, "reply_to_user": {"reputation": 6034, "user_id": 4460500, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/7TTnO.jpg?s=128&g=1", "display_name": "VolAnd", "link": "https://stackoverflow.com/users/4460500/voland"}, "edited": false, "score": 0, "creation_date": 1488388612, "post_id": 42530538, "comment_id": 72211685, "body": "@VolAnd The current working part (with <code>char**</code>) is correct. However, I&#39;m not sure what to do for my target (<code>char***</code>)."}, {"owner": {"reputation": 498, "user_id": 2854555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2056d56888b443ab438fb956e898cc9d?s=128&d=identicon&r=PG", "display_name": "renyuneyun", "link": "https://stackoverflow.com/users/2854555/renyuneyun"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1488388799, "post_id": 42530538, "comment_id": 72211785, "body": "@Lundin This is only a sample... not what my actually code does"}], "answers": [{"comments": [{"owner": {"reputation": 498, "user_id": 2854555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2056d56888b443ab438fb956e898cc9d?s=128&d=identicon&r=PG", "display_name": "renyuneyun", "link": "https://stackoverflow.com/users/2854555/renyuneyun"}, "edited": false, "score": 0, "creation_date": 1488389692, "post_id": 42533858, "comment_id": 72212312, "body": "I&#39;m still experimenting how to correctly get go string from <code>a</code> - simply using <code>C.GoString(a[0])</code> doesn&#39;t produce the correct result. But...what does the magic number 30 do?"}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "reply_to_user": {"reputation": 498, "user_id": 2854555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2056d56888b443ab438fb956e898cc9d?s=128&d=identicon&r=PG", "display_name": "renyuneyun", "link": "https://stackoverflow.com/users/2854555/renyuneyun"}, "edited": false, "score": 0, "creation_date": 1488390012, "post_id": 42533858, "comment_id": 72212538, "body": "@renyuneyun: the &quot;magic number&quot; isn&#39;t 30, it&#39;s <code>1&lt;&lt;30-1</code>, or 1073741823. It&#39;s just a large array size, since array types are static."}, {"owner": {"reputation": 498, "user_id": 2854555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2056d56888b443ab438fb956e898cc9d?s=128&d=identicon&r=PG", "display_name": "renyuneyun", "link": "https://stackoverflow.com/users/2854555/renyuneyun"}, "edited": false, "score": 0, "creation_date": 1488390513, "post_id": 42533858, "comment_id": 72212836, "body": "Thanks a lot :)  (Yeah, I&#39;m aware that&#39;s bitwise operation.) I just happen to see that value all around and am wondering why it&#39;s 2^30 rather than other values. Regarding getting go strings, assigning <code>a</code> another time to get the new pointer value of <code>cArray</code> would produce successful results."}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "reply_to_user": {"reputation": 498, "user_id": 2854555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2056d56888b443ab438fb956e898cc9d?s=128&d=identicon&r=PG", "display_name": "renyuneyun", "link": "https://stackoverflow.com/users/2854555/renyuneyun"}, "edited": false, "score": 0, "creation_date": 1488390946, "post_id": 42533858, "comment_id": 72213088, "body": "@renyuneyun: Ah ok, in that case the 30 is because <code>2^30 - 1</code> is the largest array size that can be used on all architectures."}], "tags": [], "owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "is_accepted": true, "score": 5, "last_activity_date": 1488379680, "last_edit_date": 1488379680, "creation_date": 1488377158, "answer_id": 42533858, "question_id": 42530538, "link": "https://stackoverflow.com/questions/42530538/how-to-pass-pointer-to-slice-to-c-function-in-go/42533858#42533858", "title": "How to pass pointer to slice to C function in go", "body": "<p>A Go slice is both allocated in Go, and a different data structure than a C array, so you can't pass it to a C function (cgo will also prevent you from doing this because a slice contains a Go pointer)</p>\n\n<p>You need to allocate the array in C in order to manipulate the array in C. Just like with C.CString, you will also need to track where to free the outer array, especially if the C function may possibly allocate a new array. </p>\n\n<pre><code>cArray := C.malloc(C.size_t(c_count) * C.size_t(unsafe.Sizeof(uintptr(0))))\n\n// convert the C array to a Go Array so we can index it\na := (*[1&lt;&lt;30 - 1]*C.char)(cArray)\nfor index, value := range strs {\n    a[index] = C.CString(value)\n}\n\nerr := C.f(&amp;c_count, (***C.char)(unsafe.Pointer(&amp;cArray)))\n</code></pre>\n"}], "owner": {"reputation": 498, "user_id": 2854555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2056d56888b443ab438fb956e898cc9d?s=128&d=identicon&r=PG", "display_name": "renyuneyun", "link": "https://stackoverflow.com/users/2854555/renyuneyun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3405, "favorite_count": 2, "accepted_answer_id": 42533858, "answer_count": 1, "score": 5, "last_activity_date": 1498649923, "creation_date": 1488367777, "last_edit_date": 1498649923, "question_id": 42530538, "link": "https://stackoverflow.com/questions/42530538/how-to-pass-pointer-to-slice-to-c-function-in-go", "title": "How to pass pointer to slice to C function in go", "body": "<p>Background: using cgo to call C functions from Golang.</p>\n\n<p>I want to use a C function which has this signature: <code>int f(int *count, char ***strs)</code>.\nIt will modify the data of <code>count</code> and <code>strs</code>, which is the reason why it uses pointer to them.\nThe value of <code>count</code> is the length of <code>strs</code>; <code>strs</code> is an array of string; the return value is simply an (boolean) indicator which states whether there is an error or not.</p>\n\n<p>In golang, I can successfully pass and modify <code>count</code> by using <code>C.f((*C.int)(&amp;count))</code>; pass <code>[]string</code> by using <code>[]*C.char</code>. Sample code is like this:</p>\n\n<pre><code>/*\n#include &lt;stdio.h&gt;\nint f(int *c, char **str) {\n    int i;\n    printf(\"%d\\n\", *c);\n    for (i = 0; i &lt; *c; i++) {\n        printf(\"%s\\n\", str[i]);\n    }\n    *c = (*c) + 1;\n    return 1;\n}\n*/\nimport \"C\"\nfunc go_f(strs []string) int {\n    count := len(strs)\n    c_count := C.int(count)\n\n    c_strs := make([]*C.char, count)\n    for index, value := range strs {\n        c_strs[index] = C.CString(value)\n        defer C.free(unsafe.Pointer(c_strs[index]))\n    }\n\n    err := C.f(&amp;c_argc, (**C.char)(&amp;c_argv[0]))\n    return int(err)\n}\n</code></pre>\n\n<p>As you can see, the C function is currently <code>int f(int *c, char **str)</code>, but what I'd like is <code>int f(int *c, char ***str)</code>.</p>\n\n<p>This is to say: what I actually want is to enable the modification to the string array (e.g. resize) in C and turn it back to a Go string slice so I can still use it in Go.</p>\n\n<p>How to do this? I've searched and experimented for a while but with no luck.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1488366070, "post_id": 42529889, "comment_id": 72195605, "body": "Do you know how to get <i>all</i> files in a directory?"}, {"owner": {"reputation": 49387, "user_id": 1428679, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d3eba7f8f9195a30d49bdbbdd594b1e4?s=128&d=identicon&r=PG", "display_name": "LSerni", "link": "https://stackoverflow.com/users/1428679/lserni"}, "edited": false, "score": 2, "creation_date": 1488366130, "post_id": 42529889, "comment_id": 72195650, "body": "Open directory; read files one by one in an array; if array length is 4, sort array and delete last element; repeat until you read all the files; close the directory. Not very efficient since library provided quicksort and here you&#39;d be far better served by a specialized insertion sort, but I think I/O times are going to dominate anyway."}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 2, "creation_date": 1488366324, "post_id": 42529889, "comment_id": 72195778, "body": "You should start with <code>int main(int argc, char **argv)</code> or a variation thereof."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 2, "creation_date": 1488366363, "post_id": 42529889, "comment_id": 72195802, "body": "What do you mean by &quot;last n files&quot;?  Last by <i>what</i>?  Modification date?  Name? Size?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1488366488, "post_id": 42529889, "comment_id": 72195877, "body": "&quot;why isn&#39;t this code working?&quot; is not really a close reason for this question. There <b>is</b> no code."}, {"owner": {"reputation": 11, "user_id": 7629209, "user_type": "registered", "profile_image": "https://graph.facebook.com/1572725939423974/picture?type=large", "display_name": "Daniel Basson", "link": "https://stackoverflow.com/users/7629209/daniel-basson"}, "edited": false, "score": 0, "creation_date": 1488366820, "post_id": 42529889, "comment_id": 72196094, "body": "The file names are already sorted in descending order by date.Each day a new file is automatically created for that day as it is a point of sale terminal so all I need to do is keep that last 3 dates and remove the rest. So when a new date is created the oldest one will be deleted."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1488367285, "post_id": 42529889, "comment_id": 72196406, "body": "@DanielBasson what&#39;s wrong with the answer proposed below?y"}, {"owner": {"reputation": 11, "user_id": 7629209, "user_type": "registered", "profile_image": "https://graph.facebook.com/1572725939423974/picture?type=large", "display_name": "Daniel Basson", "link": "https://stackoverflow.com/users/7629209/daniel-basson"}, "edited": false, "score": 0, "creation_date": 1488367576, "post_id": 42529889, "comment_id": 72196600, "body": "Nothing, I only saw it afterwards. It definitely helped. Thanks"}, {"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 2, "creation_date": 1488367922, "post_id": 42529889, "comment_id": 72196855, "body": "&quot;The file names are already sorted&quot;. By whom? Unless you sort them yourself (and then you should already know how to answer your question), you will sooner or later get the files in an order you didn&#39;t expect. Be very aware that even though you might have gotten the files in some specific order in your limited testing there is nothing in most filesystems that guarantees any particular order of entries in a directory."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "reply_to_user": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 0, "creation_date": 1488368489, "post_id": 42529889, "comment_id": 72197235, "body": "@Art iirc murder^Wreiserfs presents the directory entries lexicographically sorted as a result of the tree structure used."}, {"owner": {"reputation": 11, "user_id": 7629209, "user_type": "registered", "profile_image": "https://graph.facebook.com/1572725939423974/picture?type=large", "display_name": "Daniel Basson", "link": "https://stackoverflow.com/users/7629209/daniel-basson"}, "edited": false, "score": 0, "creation_date": 1488368626, "post_id": 42529889, "comment_id": 72197337, "body": "They have been sorted so that the latest file in first because they have been sorted by date. It looks similar to this: 0301,0228,0227,0226"}, {"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 0, "creation_date": 1488375551, "post_id": 42529889, "comment_id": 72202177, "body": "@DanielBasson By whom? Who does the sorting? When? If you yourself already do the sorting correctly then the question doesn&#39;t make sense since it&#39;s much more trivial than to correctly sort the directory entries. If you just assume that there is some sorting done because the directory entires happen to appear sorted right now, you are setting yourself up for a lot of pain."}, {"owner": {"reputation": 11, "user_id": 7629209, "user_type": "registered", "profile_image": "https://graph.facebook.com/1572725939423974/picture?type=large", "display_name": "Daniel Basson", "link": "https://stackoverflow.com/users/7629209/daniel-basson"}, "edited": false, "score": 0, "creation_date": 1488376089, "post_id": 42529889, "comment_id": 72202529, "body": "My uncle who wrote the application did it. I&#39;m just doing small tweaks here and there"}], "answers": [{"comments": [{"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 2, "creation_date": 1488366506, "post_id": 42529984, "comment_id": 72195888, "body": "Why perform a sort (having a complexity of nlog(n)) ? He can simply maintain a priority queue of size 3 and it would be done in O(n).  Or in general case O( number_of_files * log(number_of_files_required))"}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 2, "creation_date": 1488366605, "post_id": 42529984, "comment_id": 72195948, "body": "@AjayBrahmakshatriya Because the gain in robustness by using long tested functions probably outweighs the minimal performance gain by far. But in theory, your approach is of course more appropriate."}, {"owner": {"reputation": 3410, "user_id": 5138923, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-frypbyRLIu0/AAAAAAAAAAI/AAAAAAAAAHQ/u-HRmLjKRuQ/photo.jpg?sz=128", "display_name": "rakesh", "link": "https://stackoverflow.com/users/5138923/rakesh"}, "edited": false, "score": 0, "creation_date": 1488367219, "post_id": 42529984, "comment_id": 72196372, "body": "you can refer to <a href=\"http://www.sanfoundry.com/c-program-list-files-directory/\" rel=\"nofollow noreferrer\">link</a> on how to do opendir() and follow @unwind ans"}, {"owner": {"reputation": 11, "user_id": 7629209, "user_type": "registered", "profile_image": "https://graph.facebook.com/1572725939423974/picture?type=large", "display_name": "Daniel Basson", "link": "https://stackoverflow.com/users/7629209/daniel-basson"}, "edited": false, "score": 0, "creation_date": 1488367320, "post_id": 42529984, "comment_id": 72196427, "body": "Thanks for all your guys help I really appreciate it"}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 3, "last_activity_date": 1488366129, "creation_date": 1488366129, "answer_id": 42529984, "question_id": 42529889, "link": "https://stackoverflow.com/questions/42529889/how-to-get-the-last-n-files-in-a-directory/42529984#42529984", "title": "How to get the last n files in a directory", "body": "<p>The typical and most robust way would be:</p>\n\n<ol>\n<li>Read the contents of the directory into an in-memory array (see <a href=\"https://linux.die.net/man/3/opendir\" rel=\"nofollow noreferrer\"><code>opendir()</code></a> and friends if you're on POSIX)</li>\n<li>Sort the array based on the filenames (using <a href=\"https://linux.die.net/man/3/qsort\" rel=\"nofollow noreferrer\"><code>qsort()</code></a> of course)</li>\n<li>Extract the three last elements</li>\n</ol>\n\n<p>Of course this would be brittle if files can be created while you're doing this, that is typical for this kind of filesystem-inspection.</p>\n"}], "owner": {"reputation": 11, "user_id": 7629209, "user_type": "registered", "profile_image": "https://graph.facebook.com/1572725939423974/picture?type=large", "display_name": "Daniel Basson", "link": "https://stackoverflow.com/users/7629209/daniel-basson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "closed_date": 1488381078, "answer_count": 1, "score": -2, "last_activity_date": 1488366129, "creation_date": 1488365901, "question_id": 42529889, "link": "https://stackoverflow.com/questions/42529889/how-to-get-the-last-n-files-in-a-directory", "closed_reason": "Not suitable for this site", "title": "How to get the last n files in a directory", "body": "<p>I need help with getting the last 3 files in a directory.\nI have an application that creates files in it and they have dates in the file names displayed as MMDD eg 0301.\nThere are a few files that have differents names but all have the dates on them and I'm new to C programming and don't know how to display only the last 3 file names. \nIf someone could help me it would be really appreciated.\nThank you</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 3, "creation_date": 1488364433, "post_id": 42529316, "comment_id": 72194452, "body": "try using a char array for choice. As gets writes a string your char has to take more values than it can hold.... This should be shown in a warning I guess."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 6, "creation_date": 1488364527, "post_id": 42529316, "comment_id": 72194522, "body": "Before trying to fix this, <i>stop using</i> <code>gets</code>. It is vile, evil, and each time it&#39;s used somewhere a kitten dies. It was <i>removed</i> from the standard library and is no longer supported going forward. use <a href=\"http://en.cppreference.com/w/c/io/fgets\" rel=\"nofollow noreferrer\"><code>fgets</code></a> instead. Second, <code>gets</code> takes a <code>char*</code> as a parameter, you&#39;re passing <code>char</code>, so on top of using a function you should not use, you&#39;re not using it as documented. I&#39;d link the documentation, but that may encourage you keep using it, and ultimately you do <i>not</i> want to do that, even if you do."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 5, "creation_date": 1488364557, "post_id": 42529316, "comment_id": 72194544, "body": "First of all, <b><i>never ever</i></b> use <code>gets</code>. It is a dangerous function that have been obsolete since the C99 standard and removed completely in the C11 standard. Use <a href=\"http://en.cppreference.com/w/c/io/fgets\" rel=\"nofollow noreferrer\"><code>fgets</code></a> instead. Secondly, I doubt it is your IDE that has stopped working, but your program. To solve your problem start by using the debugger to find out <i>where</i> in your program the crash has happened, and check the values of involved variables. If you still can&#39;t figure it out, then tell us that information (location and variable values)."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1488364586, "post_id": 42529316, "comment_id": 72194569, "body": "To expand on what WhozCraig and Someprogrammerdude said, read <a href=\"http://stackoverflow.com/questions/1694036/why-is-the-gets-function-so-dangerous-that-it-should-not-be-used\">Why is the gets function so dangerous that it should not be used</a>"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1488364664, "post_id": 42529316, "comment_id": 72194623, "body": "While you should not use <code>gets</code>, it is your usage of it that causes the crash. Not because of the problems with <code>gets</code>, but because of you passing the wrong kind of argument to it. Your problem will not be solved by using <code>fgets</code>, but by using a function to read a single character."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 2, "creation_date": 1488365867, "post_id": 42529316, "comment_id": 72195451, "body": "Please read <a href=\"/help/mcve\">about mcve</a> and confirm that this indeed is the <i>the shortest code necessary</i>."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 2, "creation_date": 1488365918, "post_id": 42529316, "comment_id": 72195493, "body": "Your problems will be solved by you turning on compiler warnings and not ignoring them."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1488369590, "post_id": 42529316, "comment_id": 72197967, "body": "The question has been properly answered. But could you please also fix the construction of thestiffness matrix? It hurts the eye and is also prone to bugs"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1488381460, "post_id": 42529316, "comment_id": 72206481, "body": "Please <a href=\"https://stackoverflow.com/posts/42529316/edit\">edit</a> your code to reduce it to a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of your problem.  Your current code includes much that is peripheral to your problem - a minimal sample normally looks similar to a good unit test: only performing one task, with input values specified for reproducibility."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user6076417"}, "is_accepted": false, "score": 2, "last_activity_date": 1488369981, "creation_date": 1488369981, "answer_id": 42531279, "question_id": 42529316, "link": "https://stackoverflow.com/questions/42529316/code-blocks-has-stopped-working-while-using-gets-function/42531279#42531279", "title": "Code blocks has stopped working while using gets function", "body": "<p>If I rebuild (your code), I get the warning like this</p>\n\n<p><a href=\"https://i.stack.imgur.com/Opzux.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Opzux.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>then, try with    <code>scanf(\" %c\", &amp;choice);</code></strong></p>\n\n<p>The %c conversion specifier won't automatically skip any leading whitespace, so if there's a stray newline in the input stream. the scanf call will consume it immediately.</p>\n\n<p>One way around the problem is to put a blank space before the conversion specifier in the format string:</p>\n\n<pre><code>scanf(\" %c\", &amp;choice);\n</code></pre>\n\n<p>The blank in the format string tells scanf to skip leading whitespace, and the first non-whitespace character will be read with the %c conversion specifier.\nThe Check Rebuild, And I get <strong>no warning</strong> with this</p>\n\n<hr>\n\n<ul>\n<li>Whenever gets() statement encounters then characters entered by user\n(the string with spaces) will be copied into the variable.</li>\n<li>If user start accepting characters , and if new line character\nappears then the newline character will not be copied into the string\nvariable(i.e name).</li>\n<li>A terminating null character is automatically appended after the\ncharacters copied to string vriable (i.e name)</li>\n<li>gets() uses stdin (Standered Input Output) as source, but it does not\ninclude the ending newline character in the resulting string and does\nnot allow to specify a maximum size for string variable (which can\nlead to buffer overflows).</li>\n</ul>\n\n<p>The gets() function has no means of preventing you typing the characters and so should be avoided.</p>\n\n<p>I hope this use full. Sorry if any mistake :) I learner</p>\n"}, {"tags": [], "owner": {"reputation": 3759, "user_id": 5362795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50680477fe78fb526c5f28ea7f7dfad5?s=128&d=identicon&r=PG&f=1", "display_name": "Nagev", "link": "https://stackoverflow.com/users/5362795/nagev"}, "is_accepted": false, "score": 0, "last_activity_date": 1488370104, "creation_date": 1488370104, "answer_id": 42531334, "question_id": 42529316, "link": "https://stackoverflow.com/questions/42529316/code-blocks-has-stopped-working-while-using-gets-function/42531334#42531334", "title": "Code blocks has stopped working while using gets function", "body": "<p>I can't say why it \"stopped working\" on your system, although as it's been mentioned already, you're passing an incorrect parameter, so undefined behaviour is expected. See the following, from the man page:</p>\n\n<blockquote>\n  <p>char *gets(char *s);</p>\n  \n  <p>DESCRIPTION</p>\n  \n  <p>Never use this function.</p>\n  \n  <p>gets()  reads a line from stdin into the buffer pointed to by s  until either a terminating newline or EOF, which it replaces with a\n  null byte ('\\0').  No check for buffer overrun is performed\n         (see BUGS below).</p>\n</blockquote>\n\n<p>So there were two mistakes, passing a char instead of a buffer pointer, and using <em>gets</em> in the first place. The manual further explains why it's so dangerous to use <em>gets</em>:</p>\n\n<blockquote>\n  <p>BUGS\n  Never use gets(). Because it is impossible to tell without\n  knowing the data in advance how many characters gets() will read, and\n  because gets() will continue to store characters past the end of the\n  buffer, it is extremely dangerous to use. It has been used to break\n  computer security.  Use fgets() instead.</p>\n  \n  <p>For more information, see CWE-242 (aka \"Use of Inherently Dangerous\n  Function\") at <a href=\"http://cwe.mitre.org/data/definitions/242.html\" rel=\"nofollow noreferrer\">http://cwe.mitre.org/data/definitions/242.html</a></p>\n</blockquote>\n\n<p>Put it simply, suppose you had declared choice as follows:</p>\n\n<pre><code>char choice[2]; // e.g. 'y' plus terminating null byte\n</code></pre>\n\n<p>There's nothing stopping the user from entering \"Yes\" or anything else, which goes beyond the buffer size.</p>\n\n<p>Remember that you would be passing a pointer, and every time you pass a pointer to a buffer, the receiving function should also receive the buffer size and ensure that it won't go past its boundary. Because this function does not take size as a parameter, it's now deprecated (read \"forbidden\" in this case).</p>\n\n<p>Anyway, there are many alternatives, this is one potential solution.</p>\n\n<p>Replace \"char choice\" with:</p>\n\n<pre><code>int choice, c;\n</code></pre>\n\n<p>And instead of \"gets(choice)\" you could use this:</p>\n\n<pre><code>while( (c = getchar()) != '\\n' &amp;&amp; c != EOF )\n    /* discard */ ;\nchoice = getchar();\n</code></pre>\n\n<p>Note that \"getchar() is equivalent to getc(stdin)\". It doesn't actually read directly from the keyboard. That's why we've add the while loop to discard unprocessed data from the input stream, prior to the prompt. See <a href=\"http://c-faq.com/stdio/stdinflush2.html\" rel=\"nofollow noreferrer\">this answer on c-faq</a> for details.</p>\n"}], "owner": {"reputation": 1, "user_id": 7640597, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-nBKC1fvW8zU/AAAAAAAAAAI/AAAAAAAAAFo/FlfSndHpd_s/photo.jpg?sz=128", "display_name": "Prashant Shaw", "link": "https://stackoverflow.com/users/7640597/prashant-shaw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2050, "favorite_count": 0, "answer_count": 2, "score": -4, "last_activity_date": 1488370104, "creation_date": 1488364304, "last_edit_date": 1488366072, "question_id": 42529316, "link": "https://stackoverflow.com/questions/42529316/code-blocks-has-stopped-working-while-using-gets-function", "title": "Code blocks has stopped working while using gets function", "body": "<p>I had written a program which is shown below the problem is that when I use gets() function then while executing the code in code blocks 16.01 when the gets function is called then suddenly the the code blocks stopped working. Can anyone help me out of this problem.</p>\n\n<hr>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;conio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;math.h&gt;\n\n#define PI 3.1415926535897932384626433832795\n\nstruct elements\n{\n    float A, L, x1, y1, x2, y2;\n    double deg, c, s, E, esm[4][4];\n    int n1, n2;\n} * ele;\n\nint nonod, noele;\nvoid elestiffmat(int);\n\nvoid main()\n{\n    int i;\n    char ch;\n    printf(\"\\nEnter the number of nodes you want to create:\");\n    scanf(\"%d\", &amp;nonod);\n    printf(\"\\nEnter the number of elements you want to create:\");\n    scanf(\"%d\", &amp;noele);\n    if (noele &lt; (nonod - 1))\n    {\n        printf(\"\\nThe problem is wrongly modeled.\\nPress any key to abort.\");\n        getch();\n        exit(0);\n    }\n    ele = (struct elements*)malloc(noele * sizeof(struct elements));\n    for (i = 0; i &lt; noele; i++)\n    {\n        printf(\"\\nCreating element %d\", i + 1);\n        printf(\"\\nCross sectional area?\");\n        scanf(\"%f\", &amp;ele[i].A);\n        printf(\"\\nYoung's Modulus?\");\n        scanf(\"%Lf\", &amp;ele[i].E);\n        printf(\"\\nStarting node number?\");\n        scanf(\"%d\", &amp;ele[i].n1);\n        printf(\"\\nIts coordinates:\");\n        scanf(\"%f%f\", &amp;ele[i].x1, &amp;ele[i].y1);\n        printf(\"\\nEnding node number?\");\n        scanf(\"%d\", &amp;ele[i].n2);\n        printf(\"\\nIts coordinates:\");\n        scanf(\"%f%f\", &amp;ele[i].x2, &amp;ele[i].y2);\n        ele[i].L = sqrt(pow((ele[i].x2 - ele[i].x1), 2) + pow((ele[i].y2 - ele[i].y1), 2));\n        if ((ele[i].x2) - (ele[i].x1) == 0)\n        {\n            if (ele[i].y2 &gt; ele[i].y1)\n            {\n                ele[i].deg = PI / 2.0;\n            }\n            if (ele[i].y2 &lt; ele[i].y1)\n            {\n                ele[i].deg = (3.0 * PI) / 2.0;\n            }\n        }\n        if ((ele[i].y2) - (ele[i].y1) == 0)\n        {\n            if (ele[i].x2 &gt; ele[i].x1)\n            {\n                ele[i].deg = 0.0;\n            }\n            if (ele[i].x2 &lt; ele[i].x1)\n            {\n                ele[i].deg = PI;\n            }\n        }\n        if (((ele[i].y2) - (ele[i].y1)) / ((ele[i].x2) - (ele[i].x1)) &lt; 0)\n        {\n            ele[i].deg = PI + atanf(((ele[i].y2) - (ele[i].y1)) / ((ele[i].x2) - (ele[i].x1)));\n        }\n        if (((ele[i].y2) - (ele[i].y1)) / ((ele[i].x2) - (ele[i].x1)) &gt; 0)\n        {\n            ele[i].deg = atanf(((ele[i].y2) - (ele[i].y1)) / ((ele[i].x2) - (ele[i].x1)));\n        }\n        // printf(\"%g\",ele[i].deg);\n        ele[i].c = cos(ele[i].deg);\n        ele[i].s = sin(ele[i].deg);\n        // printf(\"c=%g\\ts=%g\",ele[i].c,ele[i].s);\n        elestiffmat(i);\n    }\n    getch();\n}\nvoid elestiffmat(int i)\n{\n    char choice;\n    ele[i].esm[0][0] = ele[i].c * ele[i].c * ele[i].A * ele[i].E / ele[i].L;\n    ele[i].esm[0][1] = ele[i].s * ele[i].c * ele[i].A * ele[i].E / ele[i].L;\n    ele[i].esm[0][2] = -ele[i].c * ele[i].c * ele[i].A * ele[i].E / ele[i].L;\n    ele[i].esm[0][3] = -ele[i].s * ele[i].c * ele[i].A * ele[i].E / ele[i].L;\n    ele[i].esm[1][0] = ele[i].s * ele[i].c * ele[i].A * ele[i].E / ele[i].L;\n    ele[i].esm[1][1] = ele[i].s * ele[i].s * ele[i].A * ele[i].E / ele[i].L;\n    ele[i].esm[1][2] = -ele[i].s * ele[i].c * ele[i].A * ele[i].E / ele[i].L;\n    ele[i].esm[1][3] = -ele[i].s * ele[i].s * ele[i].A * ele[i].E / ele[i].L;\n    ele[i].esm[2][0] = -ele[i].c * ele[i].c * ele[i].A * ele[i].E / ele[i].L;\n    ele[i].esm[2][1] = -ele[i].s * ele[i].c * ele[i].A * ele[i].E / ele[i].L;\n    ele[i].esm[2][2] = ele[i].c * ele[i].c * ele[i].A * ele[i].E / ele[i].L;\n    ele[i].esm[2][3] = ele[i].s * ele[i].c * ele[i].A * ele[i].E / ele[i].L;\n    ele[i].esm[3][0] = -ele[i].s * ele[i].c * ele[i].A * ele[i].E / ele[i].L;\n    ele[i].esm[3][1] = -ele[i].s * ele[i].s * ele[i].A * ele[i].E / ele[i].L;\n    ele[i].esm[3][2] = ele[i].s * ele[i].c * ele[i].A * ele[i].E / ele[i].L;\n    ele[i].esm[3][3] = ele[i].s * ele[i].s * ele[i].A * ele[i].E / ele[i].L;\n    printf(\"\\nDo you want to print the element stiffness matrix (y/n)?\");\n    gets(choice);\n    if (choice == 'y' || choice == 'Y')\n    {\n        printf(\"\\nThe element stiffness matrix of the element %d is:-\", i + 1);\n        int j, k;\n        for (j = 0; j &lt; 4; j++)\n        {\n            printf(\"\\n\");\n            for (k = 0; k &lt; 4; k++)\n            {\n                printf(\"%15g\", ele[i].esm[j][k]);\n            }\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "hash", "constexpr"], "answers": [{"tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": true, "score": 5, "last_activity_date": 1488364644, "last_edit_date": 1488364644, "creation_date": 1488364310, "answer_id": 42529321, "question_id": 42529287, "link": "https://stackoverflow.com/questions/42529287/const-expressions-in-c-how-to-hash-a-string/42529321#42529321", "title": "Const expressions in C - How to hash a string?", "body": "<p>I don't think you can, C doesn't have <code>constexpr</code> or compile-time evaluation. That's why many people turn to the preprocessor (which is less often used in C++), but string processing (as opposed to string \"construction\") using that isn't very easy.</p>\n\n<p>Sometimes this can be worked around by adding another preprocessing step, perhaps using some higher-level language (I favor Python) to build the required C code.</p>\n\n<p>If that's not an option, then I'd simply initialize the hash table once during startup. If you don't have an explicit init-function (I believe Linux kernel modules do), you can of course use a static flag:</p>\n\n<pre><code>static const char *strings[] = { \"hello\", \"this is a text\", \"good morning\", NULL };\nstatic uint32_t myStringList[(sizeof strings / sizeof *strings) - 1];\n\nvoid something(const char *string)\n{\n  static bool hash_initialized = false;\n  if(!hash_initialized)\n  {\n    for(size_t i = 0; strings[i] != NULL; ++i)\n      myStringList[i] = hash(strings[i]);\n    hash_initialized = true;\n  }\n  if(hash_lookup(string))\n  {\n   ...\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 1529, "user_id": 3884536, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a012f11c32e66223b1a149e37ee4d839?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan Jaritz", "link": "https://stackoverflow.com/users/3884536/stefan-jaritz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 0, "accepted_answer_id": 42529321, "answer_count": 1, "score": 3, "last_activity_date": 1488380448, "creation_date": 1488364212, "last_edit_date": 1488380448, "question_id": 42529287, "link": "https://stackoverflow.com/questions/42529287/const-expressions-in-c-how-to-hash-a-string", "title": "Const expressions in C - How to hash a string?", "body": "<p>I am creating a kernel module. In this module I need to check inputs against some pre-defined strings.\nIn C++ it's possible to create a constexpr function that calculates the hash at compile time. I am looking for a way to do that in C.</p>\n\n<p>Some pseudo code using <a href=\"https://en.wikipedia.org/wiki/Jenkins_hash_function\" rel=\"nofollow noreferrer\">the Jenkins hash function</a>:</p>\n\n<pre><code>u32 hash(const char *key)\n{\n    u32 hash, i;\n    size_t len;\n\n    len = strlen(key);\n    for(hash = i = 0; i &lt; len; ++i)\n    {\n        hash += key[i];\n        hash += (hash &lt;&lt; 10);\n        hash ^= (hash &gt;&gt; 6);\n    }\n    hash += (hash &lt;&lt; 3);\n    hash ^= (hash &gt;&gt; 11);\n    hash += (hash &lt;&lt; 15);\n    return hash;\n}\n\n\nconst u32 myStringList [] = {\n    hash(\"hello\"),\n    hash(\"this is a text\"),\n    hash(\"good morning\")\n};\n\nint findString(const char * searchStr) {\n    u32 h;\n    int i;\n\n    h = hash(searchStr);\n    for (i = 0; i &lt; sizeof(myStringList)/sizeof(const u32); i++) {\n        if (h == myStringList[i]) return i;\n    }\n    return -1;\n}\n</code></pre>\n\n<p>How to modify it to get work?</p>\n"}, {"tags": ["java", "c", "websocket", "bayeux"], "answers": [{"tags": [], "owner": {"reputation": 13642, "user_id": 1215076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7363920d78e5115b7d2cf0774b60d653?s=128&d=identicon&r=PG", "display_name": "sbordet", "link": "https://stackoverflow.com/users/1215076/sbordet"}, "is_accepted": false, "score": 0, "last_activity_date": 1488563034, "creation_date": 1488563034, "answer_id": 42585322, "question_id": 42529267, "link": "https://stackoverflow.com/questions/42529267/bayeux-cometd-c-lang-client/42585322#42585322", "title": "Bayeux/CometD C Lang Client", "body": "<p>The Bayeux protocol is defined <a href=\"https://docs.cometd.org/current/reference/#_bayeux\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>In itself, the protocol is quite simple, and there are two implementations in the <a href=\"https://cometd.org\" rel=\"nofollow noreferrer\">CometD project</a>: one in JavaScript and one in Java.</p>\n\n<p>A C implementation was discussed a while back, but lacked traction, so it was never implemented.\nPerhaps it won't be impossible to call the Java implementation via JNI, but of course that has its drawbacks.</p>\n\n<p>You are more than welcome to discuss this in the <a href=\"https://docs.cometd.org/current/reference/#_contribute_mailing_lists\" rel=\"nofollow noreferrer\">CometD mailing list</a> or on a <a href=\"https://bugs.cometd.org\" rel=\"nofollow noreferrer\">CometD issue</a>. </p>\n"}], "owner": {"reputation": 716, "user_id": 2881685, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100004845400077/picture?type=large", "display_name": "Hakeem El Bakka-lee", "link": "https://stackoverflow.com/users/2881685/hakeem-el-bakka-lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 154, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1488563034, "creation_date": 1488364152, "question_id": 42529267, "link": "https://stackoverflow.com/questions/42529267/bayeux-cometd-c-lang-client", "title": "Bayeux/CometD C Lang Client", "body": "<p>I'am trying to connect a WebRTC C client to a Java Server under CometD through Websocket. </p>\n\n<p>The problem is that, it is not possible to use regular websocket libraries like \"Libwebsockets\" to handshake the Java Bayeux Server. </p>\n\n<p>Is there any C library that allows us to handshake a Bayeux Server or let us make a custom handshake form ? </p>\n\n<p>If not, i will have to code my own connector. \nThis scenario taken into account, do you have any ideas where to start or \nwhat to use to allow me to make a custom handshake form in C ?</p>\n\n<p>Any help would be much appreciated.</p>\n"}, {"tags": ["ios", "objective-c", "c", "uitableview", "uiscrollview"], "comments": [{"owner": {"reputation": 602, "user_id": 2164705, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Xj4nT.jpg?s=128&g=1", "display_name": "Ricardo Alves", "link": "https://stackoverflow.com/users/2164705/ricardo-alves"}, "edited": false, "score": 0, "creation_date": 1488363897, "post_id": 42529097, "comment_id": 72194074, "body": "you have numberOfRows where you define the number of rows available on the tableView, or you want to disable the bounce?"}, {"owner": {"reputation": 71, "user_id": 6639438, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0e588863cf02bb253ceb463da4b6c9d0?s=128&d=identicon&r=PG&f=1", "display_name": "jeevan", "link": "https://stackoverflow.com/users/6639438/jeevan"}, "reply_to_user": {"reputation": 602, "user_id": 2164705, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Xj4nT.jpg?s=128&g=1", "display_name": "Ricardo Alves", "link": "https://stackoverflow.com/users/2164705/ricardo-alves"}, "edited": false, "score": 0, "creation_date": 1488364006, "post_id": 42529097, "comment_id": 72194147, "body": "i want to disable bounce if new data is not there."}, {"owner": {"reputation": 241, "user_id": 4361652, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U98un.jpg?s=128&g=1", "display_name": "Yahya Ibrahim", "link": "https://stackoverflow.com/users/4361652/yahya-ibrahim"}, "edited": false, "score": 0, "creation_date": 1488364360, "post_id": 42529097, "comment_id": 72194390, "body": "You can just toggle visibility of TableView according to the data. If no data is available then simply hide the tableview."}, {"owner": {"reputation": 71, "user_id": 6639438, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0e588863cf02bb253ceb463da4b6c9d0?s=128&d=identicon&r=PG&f=1", "display_name": "jeevan", "link": "https://stackoverflow.com/users/6639438/jeevan"}, "edited": false, "score": 0, "creation_date": 1488365625, "post_id": 42529097, "comment_id": 72195298, "body": "Thank you all for quick response i got solution from my side."}], "answers": [{"tags": [], "owner": {"reputation": 602, "user_id": 2164705, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Xj4nT.jpg?s=128&g=1", "display_name": "Ricardo Alves", "link": "https://stackoverflow.com/users/2164705/ricardo-alves"}, "is_accepted": false, "score": 2, "last_activity_date": 1488364155, "creation_date": 1488364155, "answer_id": 42529269, "question_id": 42529097, "link": "https://stackoverflow.com/questions/42529097/how-to-do-stop-scrolling-uitableview-if-new-rows-are-not-there-in-uitableview-in/42529269#42529269", "title": "How to do stop scrolling uitableview if new rows are not there in uitableview in objective c?", "body": "<p>For disabling bounces for the tableView you can use:</p>\n\n<pre><code>self.tableView.bounces = NO;\n</code></pre>\n\n<p>this will disable it when it gets to the last row</p>\n"}, {"tags": [], "owner": {"reputation": 71, "user_id": 6639438, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0e588863cf02bb253ceb463da4b6c9d0?s=128&d=identicon&r=PG&f=1", "display_name": "jeevan", "link": "https://stackoverflow.com/users/6639438/jeevan"}, "is_accepted": true, "score": 1, "last_activity_date": 1488365659, "creation_date": 1488365659, "answer_id": 42529803, "question_id": 42529097, "link": "https://stackoverflow.com/questions/42529097/how-to-do-stop-scrolling-uitableview-if-new-rows-are-not-there-in-uitableview-in/42529803#42529803", "title": "How to do stop scrolling uitableview if new rows are not there in uitableview in objective c?", "body": "<p>i got solution from my side     myCartTableCell.attributeTableView.bounces=NO;\nits works for me ...</p>\n"}], "owner": {"reputation": 71, "user_id": 6639438, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0e588863cf02bb253ceb463da4b6c9d0?s=128&d=identicon&r=PG&f=1", "display_name": "jeevan", "link": "https://stackoverflow.com/users/6639438/jeevan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 180, "favorite_count": 0, "accepted_answer_id": 42529803, "answer_count": 2, "score": 0, "last_activity_date": 1488365659, "creation_date": 1488363774, "question_id": 42529097, "link": "https://stackoverflow.com/questions/42529097/how-to-do-stop-scrolling-uitableview-if-new-rows-are-not-there-in-uitableview-in", "title": "How to do stop scrolling uitableview if new rows are not there in uitableview in objective c?", "body": "<p>How to do stop scrolling uitableview if new rows are not there in tableview in objective c?</p>\n"}, {"tags": ["c", "embedded", "stm32", "can-bus", "hal"], "comments": [{"owner": {"reputation": 84, "user_id": 3889119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/927b78a99d4950f6a34afdd7efc3da95?s=128&d=identicon&r=PG&f=1", "display_name": "Koorosh Hajiani", "link": "https://stackoverflow.com/users/3889119/koorosh-hajiani"}, "edited": false, "score": 1, "creation_date": 1488490941, "post_id": 42528963, "comment_id": 72267020, "body": "As far as I know CRC and EOF  fields are not software configurable. They are done by the CAN controller hardware."}, {"owner": {"reputation": 225, "user_id": 7303215, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/825035e3df2b9a587b2dd1057d5902b0?s=128&d=identicon&r=PG&f=1", "display_name": "Suvi_Eu", "link": "https://stackoverflow.com/users/7303215/suvi-eu"}, "reply_to_user": {"reputation": 84, "user_id": 3889119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/927b78a99d4950f6a34afdd7efc3da95?s=128&d=identicon&r=PG&f=1", "display_name": "Koorosh Hajiani", "link": "https://stackoverflow.com/users/3889119/koorosh-hajiani"}, "edited": false, "score": 0, "creation_date": 1488529473, "post_id": 42528963, "comment_id": 72280934, "body": "@KooroshHajiani I think so, but since I have got &quot;form error&quot; code at ESR register I want to ensure I was not missing anything. Lot of thanks."}], "answers": [{"tags": [], "owner": {"reputation": 353, "user_id": 9090821, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KgpAu.jpg?s=128&g=1", "display_name": "MemAllox", "link": "https://stackoverflow.com/users/9090821/memallox"}, "is_accepted": false, "score": 1, "last_activity_date": 1513349676, "creation_date": 1513349676, "answer_id": 47834799, "question_id": 42528963, "link": "https://stackoverflow.com/questions/42528963/how-to-generate-a-tx-can-frame-with-a-correct-form-using-stm32-hal-can-libraries/47834799#47834799", "title": "How to generate a TX CAN frame with a correct form using stm32 HAL_CAN libraries?", "body": "<p>CRC, ACK and EOF are indeed not configurable by software since they are specified in the <a href=\"https://www.iso.org/standard/63648.html\" rel=\"nofollow noreferrer\">CAN standard</a> and implemented by hardware.</p>\n\n<p>Under  <strong>42.7.6 Error management</strong> in the <a href=\"http://www.st.com/content/ccc/resource/technical/document/reference_manual/group0/b0/ac/3e/8f/6d/21/47/af/DM00151940/files/DM00151940.pdf/jcr:content/translations/en.DM00151940.pdf\" rel=\"nofollow noreferrer\"> STM32F43xxx Reference Manual p.1368</a>:</p>\n\n<blockquote>\n  <p>The error management as described in the CAN \n  protocol is handled entirely by hardware \n  using a Transmit Error Counter. (TEC value, in CAN_ESR register) and a Receive Error Counter (REC value, in the CAN_ESR register), which get incremented or decremented according to the error condition. For detailed information about TEC and REC management, refer to the CAN standard.</p>\n</blockquote>\n\n<p>I can't judge why the Form Error occurs. Maybe you should double-check your GPIO configuration.</p>\n"}], "owner": {"reputation": 225, "user_id": 7303215, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/825035e3df2b9a587b2dd1057d5902b0?s=128&d=identicon&r=PG&f=1", "display_name": "Suvi_Eu", "link": "https://stackoverflow.com/users/7303215/suvi-eu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1394, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1513355625, "creation_date": 1488363419, "last_edit_date": 1513355625, "question_id": 42528963, "link": "https://stackoverflow.com/questions/42528963/how-to-generate-a-tx-can-frame-with-a-correct-form-using-stm32-hal-can-libraries", "title": "How to generate a TX CAN frame with a correct form using stm32 HAL_CAN libraries?", "body": "<p>I have started developing CAN apps using stm32 mcu and HAL libraries. So I have some questions to do in order to testing an app that will transmit two chars in a infinite loop.</p>\n\n<p>I'm working with discovery kit with STM32L4F6 mcu. I've configured CAN controller params via HAL_CAN library. There, I have noticed that using this library, user can only have access from ID frame field to the end of data field (for transmisions). I must guess that CRC, ACK and EOF fields are configured in HAL lowest layers, independently of user code. Am I wrong? </p>\n\n<ul>\n<li><p>If not, hence, what does it mean if ESR register contains an 010 error field that indicates \"form error\" (according datasheet) when I debug my code?</p></li>\n<li><p>If I'm wrong, please, could anyone show me where to fill these fields or how to access them through HAL_CAN driver (of course, from my user code)?</p></li>\n</ul>\n\n<p>Here is my configure frame params:</p>\n\n<pre><code>CAN_HandleTypeDef HCAN_Struct;//type defined in hal thirdparty library\n\nvoid Can_ConfigureFrame(void)\n{  \n    //TX\n    HCAN_Struct.pTxMsg-&gt;StdId = 0x321;\n    HCAN_Struct.pTxMsg-&gt;ExtId = 0x01;//29 bits \n    HCAN_Struct.pTxMsg-&gt;IDE   = CAN_ID_STD;\n    HCAN_Struct.pTxMsg-&gt;RTR   = CAN_RTR_DATA;\n    HCAN_Struct.pTxMsg-&gt;DLC   = DATABTXLONG;//1-9\n    HCAN_Struct.Instance-&gt;MCR &amp;= (~(uint32_t)CAN_MCR_DBF);//descongelar el bus caN en modo debug bit --&gt; dbf=0\n\n}\n</code></pre>\n\n<p>Here is init function where configured more params and those ones:</p>\n\n<pre><code> void App_Task_CAN_init(void)\n{   \n\n    static CanTxMsgTypeDef        TxMessage;\n   static CanRxMsgTypeDef        RxMessage;\n\n    /*configuracion timing para obtener 500kb/s*/ \n    HCAN_Struct.Instance = CAN1;\n\n    HCAN_Struct.pTxMsg = &amp;TxMessage;\n    HCAN_Struct.pRxMsg = &amp;RxMessage;\n    HCAN_Struct.Init.Prescaler = 1;\n    HCAN_Struct.Init.Mode = CAN_MODE_NORMAL;\n    HCAN_Struct.Init.SJW = CAN_SJW_1TQ;\n    HCAN_Struct.Init.BS1 = CAN_BS1_6TQ;//segment point at 87.5%\n    HCAN_Struct.Init.BS2 = CAN_BS2_1TQ;\n    HCAN_Struct.Init.TTCM = DISABLE;\n    HCAN_Struct.Init.ABOM = DISABLE;\n    HCAN_Struct.Init.AWUM = DISABLE;\n    HCAN_Struct.Init.NART = DISABLE;\n    HCAN_Struct.Init.RFLM = DISABLE;//Fifo locked mode disabled\n    HCAN_Struct.Init.TXFP = DISABLE;//prioridad de tx por id (m\u00e1s bajo m\u00e1s     prioridad)\n\n\n  if (HAL_CAN_Init(&amp;HCAN_Struct) != HAL_OK)\n {\n    TaskCan_Error_Handler();\n }\n    Can_ConfigureFrame();\n\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1488362642, "post_id": 42528659, "comment_id": 72193128, "body": "Maybe <code>while (big++ &lt; nb)</code>?"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1488362670, "post_id": 42528659, "comment_id": 72193151, "body": "What&#39;s the point of receiving <code>small</code> as a parameter if you just change its value every iteration of the outer loop?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1488362751, "post_id": 42528659, "comment_id": 72193212, "body": "The inner loop could easily be replaced by a <code>for</code> loop: <code>for (int small = 1; small &lt; nb; ++small) { ... }</code>"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1488362816, "post_id": 42528659, "comment_id": 72193248, "body": "Also <code>while (small+ &lt; nb)</code>."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1488362821, "post_id": 42528659, "comment_id": 72193253, "body": "And BTW, white-spaces are completely ignored by the compiler. You can dispense with newlines completely and just write the function in a single long line."}, {"owner": {"reputation": 91, "user_id": 7586561, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/2f41a7f7d5ccd08c5a611bc26f2f2236?s=128&d=identicon&r=PG&f=1", "display_name": "f42", "link": "https://stackoverflow.com/users/7586561/f42"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1488362937, "post_id": 42528659, "comment_id": 72193323, "body": "@Someprogrammerdude I don&#39;t have the right to use for !"}, {"owner": {"reputation": 91, "user_id": 7586561, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/2f41a7f7d5ccd08c5a611bc26f2f2236?s=128&d=identicon&r=PG&f=1", "display_name": "f42", "link": "https://stackoverflow.com/users/7586561/f42"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1488362952, "post_id": 42528659, "comment_id": 72193339, "body": "@StoryTeller : it&#39;s because I need to reduce the number of line, and actually other functions use also the int. And about white-space I have a norme to respect (as the 25 lines maximum)"}, {"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 1, "creation_date": 1488362996, "post_id": 42528659, "comment_id": 72193376, "body": "Your function prototype is wrong, you have <code>small</code> twice, the second time without a type."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1488363123, "post_id": 42528659, "comment_id": 72193468, "body": "@f42 if you don&#39;t have the right to use <code>for</code> (stupid requirement BTW), you should mention this in your question."}, {"owner": {"reputation": 91, "user_id": 7586561, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/2f41a7f7d5ccd08c5a611bc26f2f2236?s=128&d=identicon&r=PG&f=1", "display_name": "f42", "link": "https://stackoverflow.com/users/7586561/f42"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1488363212, "post_id": 42528659, "comment_id": 72193521, "body": "@MichaelWalz you&#39;re right, I though it was enought asking how to do it in a while"}, {"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 0, "creation_date": 1488364320, "post_id": 42528659, "comment_id": 72194373, "body": "There are problems best solved with for loops (counting to a specific value) and problems that are best solved with while (doing something until a certain condition is met), both can be used for both problems but, the usecase should be dependent on the problem and not on some arbitrary restriction. Teaching people to programm is more than that...."}], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 7586561, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/2f41a7f7d5ccd08c5a611bc26f2f2236?s=128&d=identicon&r=PG&f=1", "display_name": "f42", "link": "https://stackoverflow.com/users/7586561/f42"}, "edited": false, "score": 0, "creation_date": 1488363717, "post_id": 42528795, "comment_id": 72193910, "body": "For the incrementation before or after, I change the value to 0 instead of 1 to try, but my program didn&#39;t enter to the while. else, your code answer my question, I didn&#39;&#39;t think about that way ! thank you"}], "tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": true, "score": 2, "last_activity_date": 1488363632, "last_edit_date": 1488363632, "creation_date": 1488362971, "answer_id": 42528795, "question_id": 42528659, "link": "https://stackoverflow.com/questions/42528659/using-a-incrementation-of-a-variable-in-a-while/42528795#42528795", "title": "Using a incrementation of a variable in a while", "body": "<p>You probably want this (two lines less than your solution):</p>\n\n<pre><code>char *name(int big, int nb, char *tab)\n{\n    while (big++ &lt; nb)\n    {\n        int small = 1;\n        while (small++ &lt; nb)\n        {\n            ....\n            printf(\"here are the other lines\\n\");\n            ....\n        }\n    }\n    return tab;\n}\n</code></pre>\n\n<p>Disclaimer: this is untested code.</p>\n\n<p><code>while (big++ &amp;&amp; big &lt; nb)</code> doesn't work, because it is simply not the same thing as:</p>\n\n<pre><code>while (big &lt; nb)\n{\n  ...\n  big++;\n}\n</code></pre>\n\n<p>With <code>while (big++ &amp;&amp; big &lt; nb)</code> you increment <code>big</code> <em>prior</em> to the test. In the original code <code>big</code> is incremented <em>after</em> the test.</p>\n\n<p>BTW: <code>while ((big = big + 1) &amp;&amp; big &lt; nb)</code> is the same thing as <code>while (big++ &lt; nb)</code>.</p>\n"}], "owner": {"reputation": 91, "user_id": 7586561, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/2f41a7f7d5ccd08c5a611bc26f2f2236?s=128&d=identicon&r=PG&f=1", "display_name": "f42", "link": "https://stackoverflow.com/users/7586561/f42"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 42528795, "answer_count": 1, "score": 0, "last_activity_date": 1488363632, "creation_date": 1488362563, "last_edit_date": 1488363031, "question_id": 42528659, "link": "https://stackoverflow.com/questions/42528659/using-a-incrementation-of-a-variable-in-a-while", "title": "Using a incrementation of a variable in a while", "body": "<p>I don't have the right to use more than 25 lines for a function.\nOne of my function has just 26 lines so I want to simplified it.</p>\n\n<pre><code>char *name(int big, int small, int nb, char *tab)\n{\n    while (big &lt; nb)\n    {\n        small = 1;\n        while (small &lt; nb)\n        {\n            ....\n            printf(\"here are the other lines\\n\");\n            ....\n            small++;\n         }\n    big++;\n    }\n    return (tab);\n}\n</code></pre>\n\n<p>big and small are initialize at 1.\nHow could I include the small++ and big++ in the while condition?</p>\n\n<p>I tried <code>while (big++ &amp;&amp; big &lt; nb)</code>, it doesn't work why ?\nThe only way I just found is <code>while ((big = big + 1) &amp;&amp; big &lt; nb)</code></p>\n\n<p>Does anyone can explain why the first way doesn't work and if you have another solution ?</p>\n\n<p>Thanks </p>\n"}, {"tags": ["c", "shared-memory"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1488362551, "post_id": 42528570, "comment_id": 72193059, "body": "Isn&#39;t that kind of what <a href=\"http://man7.org/linux/man-pages/man2/mmap.2.html\" rel=\"nofollow noreferrer\"><code>mmap</code></a> does? So your <code>accessMem</code> function simply calls <code>mmap</code> and returns the pointer <code>mmap</code> returns."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1488362945, "post_id": 42528570, "comment_id": 72193332, "body": "I think what he means is that he has already done the mmap, now needs to cut some chunk out of the shared memory and return it."}, {"owner": {"reputation": 51, "user_id": 4518004, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/4ca6fefbe1678854737caf09d826e217?s=128&d=identicon&r=PG&f=1", "display_name": "crazychris119", "link": "https://stackoverflow.com/users/4518004/crazychris119"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1488363140, "post_id": 42528570, "comment_id": 72193482, "body": "@Someprogrammerdude yeah what Ajay Brahmakshatriya said is what I&#39;d like the function to do. Sorry for the confusion."}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 4518004, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/4ca6fefbe1678854737caf09d826e217?s=128&d=identicon&r=PG&f=1", "display_name": "crazychris119", "link": "https://stackoverflow.com/users/4518004/crazychris119"}, "edited": false, "score": 0, "creation_date": 1488363955, "post_id": 42528970, "comment_id": 72194112, "body": "Thanks for the reply. The homework question states that the function passed a file descriptor, and I don&#39;t think I can actually change this. Do you know of anyway this would apply to accessing shared memory? I think the homework question is quite vague/ ambiguous for this particular section."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 51, "user_id": 4518004, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/4ca6fefbe1678854737caf09d826e217?s=128&d=identicon&r=PG&f=1", "display_name": "crazychris119", "link": "https://stackoverflow.com/users/4518004/crazychris119"}, "edited": false, "score": 0, "creation_date": 1488364128, "post_id": 42528970, "comment_id": 72194226, "body": "If that is the requirement, you need to just map more memory every time <code>accessMemory(int fd)</code> is called by calling mmap and returning the return value you get from mmap. Though this will lead to a lot of internal fragmentation since you can only map multiples of PAGE_SIZE in call to mmap."}, {"owner": {"reputation": 51, "user_id": 4518004, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/4ca6fefbe1678854737caf09d826e217?s=128&d=identicon&r=PG&f=1", "display_name": "crazychris119", "link": "https://stackoverflow.com/users/4518004/crazychris119"}, "edited": false, "score": 0, "creation_date": 1488364215, "post_id": 42528970, "comment_id": 72194289, "body": "Okay thanks for the help! I&#39;ll see what I can do with that information."}], "tags": [], "owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "is_accepted": false, "score": 1, "last_activity_date": 1488363431, "creation_date": 1488363431, "answer_id": 42528970, "question_id": 42528570, "link": "https://stackoverflow.com/questions/42528570/allocate-a-struct-from-an-existing-file-descriptor-c/42528970#42528970", "title": "Allocate a struct from an existing file descriptor - c", "body": "<p>You will have to use (or implement a memory allocator to act on the block you received from mmap).</p>\n\n<p>One simple implementation could be to use a bump allocator. </p>\n\n<p>Store the value of the pointer you received from mmap. Every time you need to allocate memory for a struct, increment the pointer by sizeof (struct) and return the original pointer.</p>\n\n<pre><code>void *allocator_top; // Define a global pointer to top of the \"heap\" area.\n.\n.\n.\nallocator_top = mmap(...); // Do this wherever you perform the mmap\n.\n.\n\nXstruct * accessMem(){\n    void *temp = allocator_top;\n    // Need to check here if you have exceeded the amount of space mapped. If yes, you need to expand and add more pages.\n    allocator_top += sizeof(Xstruct);\n    return temp;\n}\n</code></pre>\n\n<p>Edit : If you have multiple shared regions and want to allocate from them separately, you can take a void **allocator_top as an argument to accessMem() and pass the top of the region you want to allocate from.</p>\n"}], "owner": {"reputation": 51, "user_id": 4518004, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/4ca6fefbe1678854737caf09d826e217?s=128&d=identicon&r=PG&f=1", "display_name": "crazychris119", "link": "https://stackoverflow.com/users/4518004/crazychris119"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 346, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1488363431, "creation_date": 1488362236, "question_id": 42528570, "link": "https://stackoverflow.com/questions/42528570/allocate-a-struct-from-an-existing-file-descriptor-c", "title": "Allocate a struct from an existing file descriptor - c", "body": "<p>I'm creating a server and a client that are both accessing shared memory and changing the data in the shared memory. </p>\n\n<p>I've used <code>shm_open</code> to open the shared memory, <code>ftruncate</code> to change the size of the shared memory, and <code>mmap</code> to map the shared memory object of type struct.</p>\n\n<p>I want to create a function that accesses the shared memory via a file descriptor and returns a pointer to the struct.</p>\n\n<p>For example:</p>\n\n<pre><code>XStruct * accessMem(int fd){ /*what to do here? */};\n</code></pre>\n\n<p>I'm not sure how to go about this, or what functions to use in order to access the shared memory. Any help would be great.</p>\n\n<p><strong>This is homework, so an explanation would be very helpful.</strong></p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c", "string"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1488359704, "post_id": 42527608, "comment_id": 72190986, "body": "&quot;<i>what changes should i do</i>&quot; - has too many answers, and is therefore too broad in general."}, {"owner": {"reputation": 45919, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "edited": false, "score": 4, "creation_date": 1488359881, "post_id": 42527608, "comment_id": 72191110, "body": "Have them enter 1 string, which you then parse using <code>strtok</code>. Make sure to guard against buffer overflows, something which you are currently vulnerable to."}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 2, "creation_date": 1488360136, "post_id": 42527608, "comment_id": 72191298, "body": "Read a line and parse it by yourself."}, {"owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "reply_to_user": {"reputation": 45919, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "edited": false, "score": 0, "creation_date": 1488360245, "post_id": 42527608, "comment_id": 72191382, "body": "Somebody should write the &quot;enter one string and parse it&quot; idea as an answer - probably @JohnColeman as he was first and therefore deserves the points."}, {"owner": {"reputation": 45919, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "reply_to_user": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "edited": false, "score": 0, "creation_date": 1488360391, "post_id": 42527608, "comment_id": 72191484, "body": "@JeremyP I&#39;m too tired right now to add any details Feel free to post it."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1488360602, "post_id": 42527608, "comment_id": 72191666, "body": "<i>&quot;but if user types only 2 strings the my code will stop&quot;</i>..... <b>stop</b>, as in?"}, {"owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "reply_to_user": {"reputation": 45919, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "edited": false, "score": 0, "creation_date": 1488360798, "post_id": 42527608, "comment_id": 72191804, "body": "@JohnColeman I&#39;m not going to steal rep"}, {"owner": {"reputation": 7, "user_id": 7595805, "user_type": "registered", "profile_image": "https://graph.facebook.com/265095140579129/picture?type=large", "display_name": "Shubham Bagate", "link": "https://stackoverflow.com/users/7595805/shubham-bagate"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1488367023, "post_id": 42527608, "comment_id": 72196232, "body": "@SouravGhosh ,i mean if my code is expecting 3 strings from user then in terminal window after having 2 strings from user if user presses enter then cursor will come to new line ,since code is expecting 1 more string."}], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 7595805, "user_type": "registered", "profile_image": "https://graph.facebook.com/265095140579129/picture?type=large", "display_name": "Shubham Bagate", "link": "https://stackoverflow.com/users/7595805/shubham-bagate"}, "edited": false, "score": 0, "creation_date": 1488388735, "post_id": 42535946, "comment_id": 72211745, "body": "thank you ,i really appreaciate your help,as i learned a new function from this code."}], "tags": [], "owner": {"reputation": 1699, "user_id": 4891815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/niZw9.jpg?s=128&g=1", "display_name": "Gnqz", "link": "https://stackoverflow.com/users/4891815/gnqz"}, "is_accepted": false, "score": 1, "last_activity_date": 1488527542, "last_edit_date": 1495540813, "creation_date": 1488382727, "answer_id": 42535946, "question_id": 42527608, "link": "https://stackoverflow.com/questions/42527608/expected-input-from-user-is-3-strings-but-if-user-gives-only-2-strings-then-i-wa/42535946#42535946", "title": "expected input from user is 3 strings but if user gives only 2 strings then i want my code to proceed", "body": "<p>Based on the suggestions by <a href=\"https://stackoverflow.com/users/4996248/john-coleman\">John Coleman</a>:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;string.h&gt;\n\n#define BUFFER_SIZE 300\n\nint main()\n{\n    char strings[3][100] = {{},\n                            {},\n                            {}};\n    char cInputBuffer[BUFFER_SIZE];\n    const char delimeter[2] = \" \";\n    char* token;\n    int i = 0;\n\n    printf(\"Enter your name\\n\");\n    scanf(\"%[^\\n]\", cInputBuffer);\n    token = strtok(cInputBuffer, delimeter);\n\n    while( token != 0 &amp;&amp; i &lt; 3)\n    {\n        sprintf(strings[i],\"%.100s\",token);\n        token = strtok(NULL, delimeter);\n        i++;\n    }\n    if(i &gt; 1)\n    {\n        printf(\"%c%c%c\",toupper(strings[0][0]),toupper(strings[1][0]),toupper(strings[2][0]));\n    }\n    else\n    {\n        printf(\"Enter at least personal and family name.\");\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 7595805, "user_type": "registered", "profile_image": "https://graph.facebook.com/265095140579129/picture?type=large", "display_name": "Shubham Bagate", "link": "https://stackoverflow.com/users/7595805/shubham-bagate"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "closed_date": 1488383214, "answer_count": 1, "score": -1, "last_activity_date": 1488527542, "creation_date": 1488359577, "last_edit_date": 1488366771, "question_id": 42527608, "link": "https://stackoverflow.com/questions/42527608/expected-input-from-user-is-3-strings-but-if-user-gives-only-2-strings-then-i-wa", "closed_reason": "Needs more focus", "title": "expected input from user is 3 strings but if user gives only 2 strings then i want my code to proceed", "body": "<p>the que is i am expecting 3 strings from user ,but if user types only 2 strings the my code will stop as it is expecting 1 more string .but i need my code to continue anyhow with 2 strings only.so what changes should i do.</p>\n\n<pre><code>`enter code here`\n\n#include &lt;stdio.h&gt;\n#include &lt;ctype.h&gt;\n\nint main()\n{\n    char a[100];\n    char b[100];\n    char c[100];\n    printf(\"enter your name\\n\");\n    scanf(\"%s %s %s\",a,b,c);\n    printf(\"%c%c%c\",toupper(a[0]),toupper(b[0]),toupper(c[0]));\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "relational-operators"], "comments": [{"owner": {"reputation": 3483, "user_id": 3932569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bca364f93a9dfab17419b31a8a1a504?s=128&d=identicon&r=PG&f=1", "display_name": "Garf365", "link": "https://stackoverflow.com/users/3932569/garf365"}, "edited": false, "score": 2, "creation_date": 1488359608, "post_id": 42527575, "comment_id": 72190924, "body": "because you have to write <code>0 &lt;= i &amp;&amp; i &lt;=0</code>. otherwise, it like <code>(0 &lt;= i) &lt;= 0</code>, ie, <code>(0 &lt;= i)</code> is evaluated first and give true. true is different of zero, so <code>true &lt;= 0</code> is false"}, {"owner": {"reputation": 37, "user_id": 5412095, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-6KJUOgIOS2k/AAAAAAAAAAI/AAAAAAAAJ8w/P4MKRyFGte4/photo.jpg?sz=128", "display_name": "Cody Cannell", "link": "https://stackoverflow.com/users/5412095/cody-cannell"}, "reply_to_user": {"reputation": 3483, "user_id": 3932569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bca364f93a9dfab17419b31a8a1a504?s=128&d=identicon&r=PG&f=1", "display_name": "Garf365", "link": "https://stackoverflow.com/users/3932569/garf365"}, "edited": false, "score": 0, "creation_date": 1488359934, "post_id": 42527575, "comment_id": 72191156, "body": "Thank&#39;s Garf365.  I think that is it.  That was a lot simpler then I had anticipated.  Probably should go to bed now."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "reply_to_user": {"reputation": 3483, "user_id": 3932569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bca364f93a9dfab17419b31a8a1a504?s=128&d=identicon&r=PG&f=1", "display_name": "Garf365", "link": "https://stackoverflow.com/users/3932569/garf365"}, "edited": false, "score": 1, "creation_date": 1488360317, "post_id": 42527575, "comment_id": 72191440, "body": "@Garf365 To be exact, relational operators return type <code>int</code>, value <code>0</code> or <code>1</code>. Not <code>true</code>."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1488360386, "post_id": 42527575, "comment_id": 72191481, "body": "@user694733 Thanks for mentioning though, I already pointed the same in my answer."}, {"owner": {"reputation": 3483, "user_id": 3932569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bca364f93a9dfab17419b31a8a1a504?s=128&d=identicon&r=PG&f=1", "display_name": "Garf365", "link": "https://stackoverflow.com/users/3932569/garf365"}, "edited": false, "score": 0, "creation_date": 1488360410, "post_id": 42527575, "comment_id": 72191502, "body": "@CodyCannell don&#39;t forget to accept answer ;)"}, {"owner": {"reputation": 1007, "user_id": 6090706, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/NbSpn.png?s=128&g=1", "display_name": "Kostas Andrianos", "link": "https://stackoverflow.com/users/6090706/kostas-andrianos"}, "edited": false, "score": 0, "creation_date": 1488361610, "post_id": 42527575, "comment_id": 72192392, "body": "Can you try (0&lt;i || 0==i) &amp;&amp; (0&gt;i || 0==i) and see if it works ?"}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 8, "last_activity_date": 1488360699, "last_edit_date": 1488360699, "creation_date": 1488359689, "answer_id": 42527641, "question_id": 42527575, "link": "https://stackoverflow.com/questions/42527575/zero-is-greater-than-or-equal-to-zero-evaluates-to-false/42527641#42527641", "title": "zero is greater than or equal to zero evaluates to false", "body": "<p>Chaining of relational operators is not possible (to produce a <em>valid</em> result as per the expectation), you need to write separate instruction to verify each condition. </p>\n\n<p>Due to the <a href=\"http://en.cppreference.com/w/c/language/operator_precedence\" rel=\"nofollow noreferrer\">absence of explicit parenthesis and LTR association</a>, a statement like</p>\n\n<pre><code>  if(0 &lt;= i &lt;= 0) \n</code></pre>\n\n<p>is evaluated as</p>\n\n<pre><code>  if( (0 &lt;= i) &lt;= 0) \n</code></pre>\n\n<p>which boils down to</p>\n\n<pre><code>  if ( 1 &lt;= 0)\n</code></pre>\n\n<p>which produces a 0, (FALSE).</p>\n\n<p>That said, the claim pertaining to</p>\n\n<blockquote>\n  <p><em>I also tried making the statement read <code>(0 &lt;= i &amp;&amp; i &lt;= 0)</code> when I test them individually <code>0 &lt;= i</code> returns false while <code>i &lt;= 0</code> returns true. they both should be true</em></p>\n</blockquote>\n\n<p>is not correct, <strong>they both are true</strong>. <a href=\"http://ideone.com/0HDiN2\" rel=\"nofollow noreferrer\">See for yourself</a></p>\n"}], "owner": {"reputation": 37, "user_id": 5412095, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-6KJUOgIOS2k/AAAAAAAAAAI/AAAAAAAAJ8w/P4MKRyFGte4/photo.jpg?sz=128", "display_name": "Cody Cannell", "link": "https://stackoverflow.com/users/5412095/cody-cannell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2360, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1488360699, "creation_date": 1488359484, "last_edit_date": 1488360051, "question_id": 42527575, "link": "https://stackoverflow.com/questions/42527575/zero-is-greater-than-or-equal-to-zero-evaluates-to-false", "title": "zero is greater than or equal to zero evaluates to false", "body": "<pre><code>i = 0;\nif(0 &lt;= i &lt;= 0) \n</code></pre>\n\n<p>this returns false.</p>\n\n<p>I don't understand this at all. <a href=\"https://i.stack.imgur.com/cMVQd.png\" rel=\"nofollow noreferrer\">Watch window</a> I also tried making the statement read <code>(0 &lt;= i &amp;&amp; i &lt;= 0)</code> when I test them individually <code>0 &lt;= i</code> returns false while <code>i &lt;= 0</code> returns true.  they both should be true.  I'm not sure if this is a precision thing but I wouldn't think so since I'm hard coding the values in. Please help me understand this fundamental problem.</p>\n\n<p>If it helps I am trying to evaluate if a point is on a line by getting the intersection point and then checking if it's between the x and y start point and end point.  this becomes a problem when I am trying to check when x or y is on its axis then you run into the problem of checking if 0 is between or equal to 0 and 0.  Which it is so it would fall on the line.</p>\n"}, {"tags": ["c", "bit-fields"], "answers": [{"comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1488359581, "post_id": 42527500, "comment_id": 72190908, "body": "When you layer it on top of everything else that&#39;s implementation-defined in regard to bit-fields, their usefulness diminishes quite alot"}], "tags": [], "owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "is_accepted": true, "score": 9, "last_activity_date": 1488361011, "last_edit_date": 1592644375, "creation_date": 1488359287, "answer_id": 42527500, "question_id": 42527387, "link": "https://stackoverflow.com/questions/42527387/signed-bit-field-represetation/42527500#42527500", "title": "Signed bit field represetation", "body": "<p>You shouldn't ever use plain <code>int</code> as the bitfield type if you're expecting something about the value besides that it can hold <code>n</code> bits - according to the C11 standard it is actually implementation-defined whether <code>int</code> in a bit-field is signed or unsigned <a href=\"http://port70.net/%7Ensz/c/c11/n1570.html#6.7.2p5\" rel=\"noreferrer\">6.7.2p5</a>:</p>\n<blockquote>\n<p>5 Each of the comma-separated multisets designates the same type, except that for bit-fields, it is <strong>implementation-defined</strong> whether the specifier <code>int</code> designates the same type as <code>signed int</code> or the same type as <code>unsigned int</code>.</p>\n</blockquote>\n<p>In your case the <code>int</code> designates the same type as <code>signed int</code>; this is <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Structures-unions-enumerations-and-bit-fields-implementation.html\" rel=\"noreferrer\">the default in GCC</a>:</p>\n<blockquote>\n<p><em>Whether a \u201cplain\u201d int bit-field is treated as a signed int bit-field or as an unsigned int bit-field (C90 6.5.2, C90 6.5.2.1, C99 and C11 6.7.2, C99 and C11 6.7.2.1).</em></p>\n<p>By default it is treated as <code>signed int</code> but this may be changed by the <code>-funsigned-bitfields</code> option.</p>\n</blockquote>\n<p>Then it is implementation defined whether the signed numbers are in one's complement, or two's complement - if they're in one's complement, then the only value that can be stored in 1 bit is the sign bit, thus 0; so signed bit field of one bit doesn't make sense on one's complement. However, your system uses 2's complement - this is e.g. <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Integers-implementation.html#Integers-implementation\" rel=\"noreferrer\">what GCC always uses</a>:</p>\n<blockquote>\n<p><em>Whether signed integer types are represented using sign and magnitude, two\u2019s complement, or one\u2019s complement, and whether the extraordinary value is a trap representation or an ordinary value (C99 and C11 6.2.6.2).</em></p>\n<p>GCC supports only two\u2019s complement integer types, and all bit patterns are ordinary values.</p>\n</blockquote>\n<p>and thus the bit values <code>1</code> and <code>0</code> are interpreted in terms of signed two's complement numbers: the former has sign bit set, so it is negative (<code>-1</code>) and the latter doesn't have a sign bit set so it is non-negative (<code>0</code>).</p>\n<p>Thus for a signed bit-field of 2 bits, the possible bit patterns and their integer  values on a 2's complement machine are</p>\n<ul>\n<li><code>00</code> - has <code>int</code> value 0</li>\n<li><code>01</code> - has <code>int</code> value 1</li>\n<li><code>10</code> - has <code>int</code> value -2</li>\n<li><code>11</code> - has <code>int</code>  value -1</li>\n</ul>\n<p>In an n-bit-field, the minimum signed number is - 2^(n - 1) and the maximum is 2^(n-1) - 1.</p>\n<p>Now, when arithmetic is performed on a signed integer operand whose rank is less than <code>int</code>, it is converted to an <code>int</code> first, and thus the value <code>-1</code> is sign-extended to full-width <code>int</code>; the same happens for <em>default argument promotions</em>; the value is sign-extended to a (full-width) <code>int</code> when it is passed in to <code>printf</code>.</p>\n<p>Thus if you expect a sensible value from one bit bitfield, use either <code>unsigned bit: 1;</code> or alternatively if this is to be understood as a boolean flag, <code>_Bool bit: 1;</code></p>\n"}, {"comments": [{"owner": {"reputation": 559, "user_id": 7621960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/780f25196ad35917b570c30678cb953b?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Slutsky", "link": "https://stackoverflow.com/users/7621960/tom-slutsky"}, "edited": false, "score": 0, "creation_date": 1488359786, "post_id": 42527529, "comment_id": 72191039, "body": "Can i expect evety bit field to be negative when called to with printf ?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 559, "user_id": 7621960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/780f25196ad35917b570c30678cb953b?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Slutsky", "link": "https://stackoverflow.com/users/7621960/tom-slutsky"}, "edited": false, "score": 0, "creation_date": 1488359939, "post_id": 42527529, "comment_id": 72191162, "body": "@tomslu Depends on the base-type, its width and its value. And on the compiler (according to <a href=\"http://stackoverflow.com/a/42527500/440558\">Antti Haapala&#39;s answer</a>)."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 1, "last_activity_date": 1488359367, "creation_date": 1488359367, "answer_id": 42527529, "question_id": 42527387, "link": "https://stackoverflow.com/questions/42527387/signed-bit-field-represetation/42527529#42527529", "title": "Signed bit field represetation", "body": "<p>When you call a variadic argument function (like <code>printf</code>) some arguments are <em>promoted</em>. For example bit-fields undergoes an <a href=\"http://en.cppreference.com/w/c/language/conversion#Integer_promotions\" rel=\"nofollow noreferrer\"><em>integer promotion</em></a> where it is promoted to an ordinary <code>int</code> value. That promotion brings with it <em>sign extension</em> (because your base type for the bit-field is signed). This sign extension will make it <code>-1</code>.</p>\n\n<p>When using bit-fields, always use unsigned types as the base.</p>\n"}], "owner": {"reputation": 559, "user_id": 7621960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/780f25196ad35917b570c30678cb953b?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Slutsky", "link": "https://stackoverflow.com/users/7621960/tom-slutsky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2704, "favorite_count": 2, "accepted_answer_id": 42527500, "answer_count": 2, "score": 5, "last_activity_date": 1577323926, "creation_date": 1488358955, "last_edit_date": 1507139150, "question_id": 42527387, "link": "https://stackoverflow.com/questions/42527387/signed-bit-field-represetation", "title": "Signed bit field represetation", "body": "<p>I made a bit field with a field sized 1 bit, and used <code>int</code> instead of <code>unsigned</code>. Later on when i tried to check the value of the field i found that the value was -1. \nI used this code to check the binary represantation and the value of my bit field:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nunion {\n    struct {\n        int bit:1;\n    } field;\n    int rep;\n} n;\n\nint main() {\n\nint c, k;\nn.field.bit=1;\n for (c = 31; c &gt;= 0; c--)\n  {\n    k = n.rep &gt;&gt; c;\n\n    if (k &amp; 1)\n      printf(\"1\");\n    else\n      printf(\"0\");\n  }\n\n  printf(\"\\n %d \\n\", n.field.bit);\n\nreturn 0;\n}\n</code></pre>\n\n<p>the output was:\n00000000000000000000000000000001</p>\n\n<p>-1 </p>\n\n<p>In that case, why is the value of my bit field is -1 and is it always be a negative number when i use signed int instead of unsigned ?</p>\n"}, {"tags": ["c++", "c", "arrays"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1488358794, "post_id": 42527281, "comment_id": 72190369, "body": "You don&#39;t enter a character. You use <code>scanf_s</code> to scan doubles..."}, {"owner": {"reputation": 17713, "user_id": 226648, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3196df423fd95dc4fce7dfadb8ec9953?s=128&d=identicon&r=PG", "display_name": "el.pescado", "link": "https://stackoverflow.com/users/226648/el-pescado"}, "edited": false, "score": 2, "creation_date": 1488358800, "post_id": 42527281, "comment_id": 72190373, "body": "You could check <code>scanf</code> return value."}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 6, "creation_date": 1488358899, "post_id": 42527281, "comment_id": 72190459, "body": "Also you should decide if you are using C or C++ - in C you shouldn&#39;t cast the return of <code>malloc</code> while in C++ you shouldn&#39;t use <code>malloc</code> at all"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 1, "creation_date": 1488359189, "post_id": 42527281, "comment_id": 72190661, "body": "In C a pointer to void can be assigned (promoted) to pointer of any type without a cast."}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 1, "creation_date": 1488359398, "post_id": 42527281, "comment_id": 72190793, "body": "The line <code>arr = (double*)malloc(sizeof(double)*length);</code> should be <code>arr = malloc(sizeof(double)*length);</code>. See <a href=\"http://stackoverflow.com/a/605858/2878796\">this answer</a> for a detailed explanation"}, {"owner": {"reputation": 41, "user_id": 5320067, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh6.googleusercontent.com/-uk-e4-oHRNc/AAAAAAAAAAI/AAAAAAAAAF8/AKIQZ7o260k/photo.jpg?sz=128", "display_name": "anti mage", "link": "https://stackoverflow.com/users/5320067/anti-mage"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1488359523, "post_id": 42527281, "comment_id": 72190863, "body": "@UnholySheep Why should&#39;nt I cast the return of malloc?"}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 1, "creation_date": 1488359552, "post_id": 42527281, "comment_id": 72190880, "body": "I linked an answer that explains it in detail..."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1488359993, "post_id": 42527281, "comment_id": 72191194, "body": "@anti mage: What exactly do you mean by &quot;entered a character&quot;? If someone enters <code>123a</code>, does that qualify as &quot;entered a character&quot; or not?"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 4, "creation_date": 1488360107, "post_id": 42527281, "comment_id": 72191275, "body": "@anti mage: You shouldn&#39;t cast the result of <code>malloc</code> because there&#39;s absolutely no reason for doing so. When you need to calculate <code>3 + 2</code> you just say <code>3 + 2</code>, not <code>(int) ((int) 3 + (int) 2)</code>, don&#39;t you? If so, then why are you doing this <code>(double*)</code> thing with <code>malloc</code>? In fact, it should be <code>arr = malloc(length * sizeof *arr)</code>. No mention of <code>double</code> at all."}, {"owner": {"reputation": 41, "user_id": 5320067, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh6.googleusercontent.com/-uk-e4-oHRNc/AAAAAAAAAAI/AAAAAAAAAF8/AKIQZ7o260k/photo.jpg?sz=128", "display_name": "anti mage", "link": "https://stackoverflow.com/users/5320067/anti-mage"}, "reply_to_user": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1488360250, "post_id": 42527281, "comment_id": 72191385, "body": "@AnT Yes, it does qualify for &quot;entered a character&quot;. The array should only have real numbers."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 1, "creation_date": 1488360365, "post_id": 42527281, "comment_id": 72191467, "body": "@anti mage: <code>scanf</code> does not provide you with any credible means to reject such inputs as <code>123a</code>. From <code>scanf</code>&#39;s point of view, this is a prefectly valid input. If you want to reject it, forget about <code>scanf</code>ing numbers directly. Read strings and then parse, validate and convert them to numbers manually (i.e. by separate library functions like <code>strtod</code>)"}], "answers": [{"tags": [], "owner": {"reputation": 17713, "user_id": 226648, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3196df423fd95dc4fce7dfadb8ec9953?s=128&d=identicon&r=PG", "display_name": "el.pescado", "link": "https://stackoverflow.com/users/226648/el-pescado"}, "is_accepted": false, "score": 2, "last_activity_date": 1488359680, "creation_date": 1488359680, "answer_id": 42527639, "question_id": 42527281, "link": "https://stackoverflow.com/questions/42527281/what-happens-if-i-enter-a-character-to-a-dynamically-statically-allocated-double/42527639#42527639", "title": "What happens if I enter a character to a dynamically/statically allocated double array?", "body": "<p>You could check return value of <code>scanf</code> (and related functions such as <code>scanf_s</code>):</p>\n\n<blockquote>\n  <h1>Return Value</h1>\n  \n  <p>Each of these functions <strong>returns the number of fields</strong> that are\n  successfully converted and assigned; the return value does not include\n  fields that were read but not assigned. A return value of 0 indicates\n  that no fields were assigned. The return value is EOF for an error or\n  if the end of the string is reached before the first conversion.</p>\n</blockquote>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/t6z7bya3.aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/t6z7bya3.aspx</a></p>\n"}], "owner": {"reputation": 41, "user_id": 5320067, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh6.googleusercontent.com/-uk-e4-oHRNc/AAAAAAAAAAI/AAAAAAAAAF8/AKIQZ7o260k/photo.jpg?sz=128", "display_name": "anti mage", "link": "https://stackoverflow.com/users/5320067/anti-mage"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1488359680, "creation_date": 1488358666, "question_id": 42527281, "link": "https://stackoverflow.com/questions/42527281/what-happens-if-i-enter-a-character-to-a-dynamically-statically-allocated-double", "title": "What happens if I enter a character to a dynamically/statically allocated double array?", "body": "<p>Right now I am using a dynamically allocated double array. How can I check if someone has entered a character?</p>\n\n<pre><code>double* scanarray(int length)\n{\n    double* arr;\n    arr = (double*)malloc(sizeof(double)*length);\n    printf(\"Enter %d real numbers: \\n\", length);\n    for (int loop = 0; loop &lt; length; loop++)\n        scanf_s(\"%lf\", &amp;arr[loop]);\n    return arr;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "memory-management", "memory-leaks", "include-guards"], "answers": [{"comments": [{"owner": {"reputation": 2756, "user_id": 5114342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/725caa4188def46b8c6cf9b09eff7e85?s=128&d=identicon&r=PG&f=1", "display_name": "Aziuth", "link": "https://stackoverflow.com/users/5114342/aziuth"}, "edited": false, "score": 1, "creation_date": 1488361651, "post_id": 42528232, "comment_id": 72192416, "body": "I second this. I&#39;m used to such &quot;guards&quot; from exercises at the university in which one has to state why this does not work, getting a basic understanding that even variable = value is not an atomic operation (well, in the case of the posted code, there are a lot more things wrong as you stated)."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 1, "creation_date": 1488362033, "post_id": 42528232, "comment_id": 72192697, "body": "I&#39;d say it&#39;s more likely an attempt to avoid reentrancy (and infinite recursion) when <code>clog.operator&lt;&lt;</code> needs to allocate memory.  Output from other threads <i>may</i> be affected (since <code>fInOpNew</code> isn&#39;t thread-local) but I think whoever wrote this was assuming single-thread operation."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1488362234, "post_id": 42528232, "comment_id": 72192831, "body": "Oh, that makes a lot more sense."}, {"owner": {"reputation": 121, "user_id": 7152961, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/da2d8284f7ca46ad1631eac7d209b82b?s=128&d=identicon&r=PG&f=1", "display_name": "Dinesh G", "link": "https://stackoverflow.com/users/7152961/dinesh-g"}, "edited": false, "score": 0, "creation_date": 1488367076, "post_id": 42528232, "comment_id": 72196283, "body": "Can you check my code and suggest me anything we can improve on this ? Also, how to protect this code from multi thread ?"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1488367434, "post_id": 42528232, "comment_id": 72196498, "body": "Yes, delete has the exact same reason. Now for the second part if you want to make this safe for multiple threads, you can enclose the logging part inside a mutex lock/semaphores. They can be used to protect against race conditions"}, {"owner": {"reputation": 121, "user_id": 7152961, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/da2d8284f7ca46ad1631eac7d209b82b?s=128&d=identicon&r=PG&f=1", "display_name": "Dinesh G", "link": "https://stackoverflow.com/users/7152961/dinesh-g"}, "edited": false, "score": 0, "creation_date": 1488368418, "post_id": 42528232, "comment_id": 72197193, "body": "Ok, Is there anything we can do to improve my code ? Can you take a look at the code and suggest me for improvements as I want to learn ? Thanks"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1488368692, "post_id": 42528232, "comment_id": 72197373, "body": "Your code seems correct. Although there is another thing I would suggest. Use a common guard flag for both new and delete ( you can make it into a global variable instead of a static variable). This will avoid printing of &quot;new&quot; messages when delete is called (if new is invoke by clog in the process) and vice versa."}], "tags": [], "owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "is_accepted": false, "score": 1, "last_activity_date": 1488362280, "last_edit_date": 1488362280, "creation_date": 1488361234, "answer_id": 42528232, "question_id": 42526638, "link": "https://stackoverflow.com/questions/42526638/guard-flag-when-dealing-with-memory-allocation/42528232#42528232", "title": "Guard flag when dealing with memory allocation", "body": "<p>From what I understand this is an attempt to avoid clobbering of the log stream by multiple threads. </p>\n\n<p>Say two threads call the function at the same time. The messages being printed would get mixed (depending on the buffering mechanism used by the runtime).</p>\n\n<p>To avoid this the programmer has created a <code>static</code> flag. Static variables local to a function are shared across all calls. </p>\n\n<p>The intent is that when one call is logging the message it will first set the flag to 1. This will not allow other threads to enter. (See if !fInOpNew) </p>\n\n<p>When it is done printing it sets the flag back to 0.</p>\n\n<p>Though this mechanism at avoiding race condition in not going to work. Since the Two threads can enter the if condition and then the flag can be set.</p>\n\n<p>The programmer needs to use atomic primitives like compare and swap to ensure protection of critical section. </p>\n\n<p>Also use of static variables won't be safe. If two threads write to it simultaneously, it can get a value not equal to 0 or 1.</p>\n\n<p>Edit : As suggested by Toby Speight, another purpose of the flag to avoid reentrance. \ncalling the &lt;&lt; operator on clog is also a function that might make use of the new operator (could be the same new operator). This will lead to an infinite recursion of this function.\nThe flag makes sure that the logging in not invoked when the &lt;&lt; operator calls new.</p>\n\n<p>The assumption that the program is single threaded doesn't bring in race condition. </p>\n"}], "owner": {"reputation": 121, "user_id": 7152961, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/da2d8284f7ca46ad1631eac7d209b82b?s=128&d=identicon&r=PG&f=1", "display_name": "Dinesh G", "link": "https://stackoverflow.com/users/7152961/dinesh-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 294, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1488367246, "creation_date": 1488356676, "last_edit_date": 1488367246, "question_id": 42526638, "link": "https://stackoverflow.com/questions/42526638/guard-flag-when-dealing-with-memory-allocation", "title": "Guard flag when dealing with memory allocation", "body": "<p>I hava some trouble understanding about guard flag in the following code.</p>\n\n<pre><code>// User-defined operator new.  \n    void *operator new( size_t stAllocateBlock ) {  \n       static int fInOpNew = 0;   // Guard flag.  \n\n       if ( fLogMemory &amp;&amp; !fInOpNew ) {  \n          fInOpNew = 1;  \n          clog &lt;&lt; \"Memory block \" &lt;&lt; ++cBlocksAllocated  \n              &lt;&lt; \" allocated for \" &lt;&lt; stAllocateBlock  \n              &lt;&lt; \" bytes\\n\";  \n          fInOpNew = 0;  \n       }  \n       return malloc( stAllocateBlock );  \n    } \n</code></pre>\n\n<p>Anyone help to understand this ? </p>\n\n<p>Thanks</p>\n\n<p>EDIT: Thanks for clearing my doubt, and I understand this now. I got this code from here: <a href=\"https://msdn.microsoft.com/en-us/library/kftdy56f.aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/kftdy56f.aspx</a>, they used same guard for delete also. Is the reason same ?</p>\n\n<p>Please check my code, and share your suggestions to improve the code. Also, how to protect the code in multi threading with an example ? I would really appreciate this and it will clear my understanding about thread safe code, and also memory management very well. </p>\n\n<p>Thanks</p>\n\n<p>My version of code:</p>\n\n<pre><code>/*\n * Memory leak detector\n */\n\n#include &lt;iostream&gt; // for cout, clog\n#include &lt;new&gt;      // for size_t\n\nusing std::clog;\nusing std::cout;\n\n\n/* Logging toggle, 0x0 - No, 0xFF - Yes */\nchar    logMemory;\n\n/* Number of Memory blocks allocated */\nint     memoryBlocksAllocated;\n\nvoid* AllocateMemory(size_t size)\n{\n    /*\n     * Guard flag for protecting from reentrancy (recursion),\n     * as clog also make use of new operator for\n     * allocating memory to the buffer.\n     */\n\n    static char InOperationNew = 0x0;\n\n    if ( logMemory &amp;&amp; !InOperationNew ) {\n        InOperationNew = 0xFF;\n        clog &lt;&lt; \"Memory block allocated \" &lt;&lt; ++memoryBlocksAllocated\n        &lt;&lt;\" for requested size \" &lt;&lt; size &lt;&lt; \" bytes\\n\";\n        InOperationNew = 0x0;\n    }\n\n    return malloc(size);\n}\n\nvoid ReleaseMemory(void *ptr)\n{\n    /*\n     * Guard flag for protecting from reentrancy (recursion),\n     * as clog also make use of new operator for\n     * allocating memory to the buffer.\n     */\n\n    static char InOperationDelete = 0x0;\n\n\n    if ( logMemory &amp;&amp; !InOperationDelete ) {\n        InOperationDelete = 0xFF;\n        clog &lt;&lt; \"Memory block deallocated \" &lt;&lt; memoryBlocksAllocated-- &lt;&lt; \"\\n\";\n        InOperationDelete = 0x0;\n    }\n\n    free(ptr);\n}\n\n/* User defined(overriden) global scope new operator */\nvoid* operator new (size_t size)\n{\n    return AllocateMemory(size);\n}\n\n/* User defined(overriden) global scope new[] array operator */\nvoid* operator new[] (size_t size)\n{\n    return AllocateMemory(size);\n}\n\n\n/* User defined(overriden) global scope delete operator */\nvoid operator delete (void *ptr)\n{\n    ReleaseMemory(ptr);\n}\n\n/* User defined(overriden) global scope delete[] array operator */\nvoid operator delete[] (void *ptr)\n{\n    ReleaseMemory(ptr);\n}\n\nint main()\n{\n    logMemory = 0xFF;   // Enable logging\n\n    // Allocate and destroy an array of objects\n    char *objArray = new char[2];\n    if ( objArray )\n    {\n        delete[] objArray;\n    }\n    else {\n        cout &lt;&lt; \"Memory allocation failed\\n\";\n        return -1;\n    }\n\n    // Allocate and destroy an object\n    char *obj = new char;\n    if ( obj )\n    {\n        delete obj;\n    }\n    else {\n        cout &lt;&lt; \"Memory allocation failed\\n\";\n        return -1;\n    }\n\n    logMemory = 0x0;    // Disable logging\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 3, "creation_date": 1488355490, "post_id": 42526198, "comment_id": 72188378, "body": "This code is completely unreadable. If not indentation, at the least consider writing statements on separate lines. There is no way one can make any sense out of this."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1488355627, "post_id": 42526198, "comment_id": 72188444, "body": "If a fellow of yours asked you help them make sense of their code, and presented you with a mess such as this, would you be inclined to help? What if it was a complete stranger, like you are to us?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1488355764, "post_id": 42526198, "comment_id": 72188510, "body": "I&#39;m sure the program samples of your C textbook are not formatted like this."}, {"owner": {"reputation": 3, "user_id": 7639911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4c5fb92d558ad0d907b1279153902aa?s=128&d=identicon&r=PG&f=1", "display_name": "brandon", "link": "https://stackoverflow.com/users/7639911/brandon"}, "edited": false, "score": 0, "creation_date": 1488355840, "post_id": 42526198, "comment_id": 72188545, "body": "ah for that im sorry because i have no idea how this site actually works. give me a while and i will change it again"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1488355983, "post_id": 42526198, "comment_id": 72188624, "body": "Please show your input as well as actual and expected output."}], "answers": [{"tags": [], "owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "is_accepted": false, "score": 1, "last_activity_date": 1488356302, "creation_date": 1488356302, "answer_id": 42526524, "question_id": 42526198, "link": "https://stackoverflow.com/questions/42526198/i-need-to-check-whether-my-array-input-is-an-integer-or-an-alpha-but-my-program/42526524#42526524", "title": "I need to check whether my array input is an integer or an alpha but my program keeps one looping", "body": "<p><code>isdigit()</code> can be used to check for a single character. What you are passing to it is a float (which might be completely malformed). \nWhat you need to do is read the input as a string and check for each character till you encounter a '\\0'.</p>\n\n<p>Besides that, the reason your program keeps looping is </p>\n\n<pre><code>if(i==2){ \n    i=0-1; // i = -1;\n} \n</code></pre>\n\n<p>You are never letting i go above 2 for the loop to stop.</p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 7639911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4c5fb92d558ad0d907b1279153902aa?s=128&d=identicon&r=PG&f=1", "display_name": "brandon", "link": "https://stackoverflow.com/users/7639911/brandon"}, "edited": false, "score": 0, "creation_date": 1488370437, "post_id": 42528492, "comment_id": 72198522, "body": "Thanks! This helps a lot!!"}], "tags": [], "owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "is_accepted": true, "score": 0, "last_activity_date": 1488362030, "creation_date": 1488362030, "answer_id": 42528492, "question_id": 42526198, "link": "https://stackoverflow.com/questions/42526198/i-need-to-check-whether-my-array-input-is-an-integer-or-an-alpha-but-my-program/42528492#42528492", "title": "I need to check whether my array input is an integer or an alpha but my program keeps one looping", "body": "<p>What is happening is that the <code>scanf</code> fails, and without removing the alphabetical text from <code>stdin</code>. That means that the next <code>scanf</code> also fails, and so on.</p>\n\n<p>You need to check the return value of <code>scanf</code> and if you fail to scan a number, you need to remove the non-numeric input from <code>stdin</code>. I would recommend using <code>fgets</code> to remove one entire line of input from <code>stdin</code> when you get a failure from <code>scanf</code>.</p>\n\n<pre><code>    while (1 != scanf(\"%f\", &amp;arr[i])) {\n        // Scan failed! Remove input line with non-numeric input\n        char tmp[100];\n        fgets(tmp, sizeof tmp, stdin);\n        printf(\"Not a number! Enter the weight of the cabin %d:\\t\", i);\n        fflush(stdout); \n    }\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 7639911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4c5fb92d558ad0d907b1279153902aa?s=128&d=identicon&r=PG&f=1", "display_name": "brandon", "link": "https://stackoverflow.com/users/7639911/brandon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 42528492, "answer_count": 2, "score": -2, "last_activity_date": 1488362030, "creation_date": 1488355242, "last_edit_date": 1488356348, "question_id": 42526198, "link": "https://stackoverflow.com/questions/42526198/i-need-to-check-whether-my-array-input-is-an-integer-or-an-alpha-but-my-program", "title": "I need to check whether my array input is an integer or an alpha but my program keeps one looping", "body": "<p>Following is the main function \nI need to check whether my array input is an integer or an alpha but my program keeps on looping</p>\n\n<pre><code>int main (void) {\n    int i; \n    float arr[3]; \n    for(i=0; i&lt;3; i++){ \n        printf(\"Enter the weight of the cabin %d:\\t\", i+1); \n        scanf(\"%f\", &amp;arr[i]); \n        if(isdigit(arr[i])){\n            *im not sure about this part*\\\n            printf(\"Cabin %d is %.2f\\n\", i+1, arr[i]);\n        }else{ \n            printf(\"Error! Please enter the weight of the cabin %d again:\\t\", i+1); \n            scanf(\"%d\", &amp;arr[i]); \n            printf(\"Cabin %d is %.2f\\n\", i+1, arr[i]); \n        } \n        if(i==2){ \n            i=0-1; \n        } \n    } \n}\n</code></pre>\n\n<p>I am hoping that my output will be like :</p>\n\n<p>Enter the weight of the cabin: r\nError! Please enter the weight of the cabin again:</p>\n\n<p>However, I get this.\nEnter the weight of the cabin: r\nIt loops like crazy and i cannot see whats appearing on the screen</p>\n"}, {"tags": ["c", "segmentation-fault", "fgets"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1488355032, "post_id": 42526122, "comment_id": 72188144, "body": "You most probably overflow <code>address</code> by repeatedly concatenating text to it."}, {"owner": {"reputation": 1384, "user_id": 3893519, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ac2e81d6f659ddb9ee0f3e4f864368eb?s=128&d=identicon&r=PG", "display_name": "kneeki", "link": "https://stackoverflow.com/users/3893519/kneeki"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1488355134, "post_id": 42526122, "comment_id": 72188199, "body": "The segmentation fault occurs if the user never enters an address as well."}, {"owner": {"reputation": 22954, "user_id": 5238915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fncqh.jpg?s=128&g=1", "display_name": "RoadRunner", "link": "https://stackoverflow.com/users/5238915/roadrunner"}, "edited": false, "score": 0, "creation_date": 1488355404, "post_id": 42526122, "comment_id": 72188335, "body": "You can just <code>strcpy()</code> the first string, then <code>strcat()</code> the rest."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1488355415, "post_id": 42526122, "comment_id": 72188339, "body": "The problem is in your input and your mishandling of memory. On small names and addresses nothing segfaults <a href=\"http://ideone.com/rNWfO2\" rel=\"nofollow noreferrer\">ideone.com/rNWfO2</a>"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1488355615, "post_id": 42526122, "comment_id": 72188434, "body": "<code>address</code> is not initialized. <code>char address[80];</code> -&gt; <code>char address[80] = &quot;&quot;;</code>."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1488355678, "post_id": 42526122, "comment_id": 72188466, "body": "BTW: this kind of errors can be found easily with a debugger. Learn how to use one."}, {"owner": {"reputation": 1384, "user_id": 3893519, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ac2e81d6f659ddb9ee0f3e4f864368eb?s=128&d=identicon&r=PG", "display_name": "kneeki", "link": "https://stackoverflow.com/users/3893519/kneeki"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1488355826, "post_id": 42526122, "comment_id": 72188532, "body": "@MichaelWalz That was the problem. Adding <code>= &quot;&quot;</code> to all of the fields makes the code work as expected. I&#39;m using Atom to write the code, and terminal to compile and test. We&#39;ve been instructed by the professor not to use a debugger. :("}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1488355973, "post_id": 42526122, "comment_id": 72188617, "body": "Then your professor isn&#39;t teaching you anything useful."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1488356474, "post_id": 42526122, "comment_id": 72188902, "body": "@StoryTeller even without a debugger you can use the so called &quot;printf debugging&quot;, that means putting printf statements at strategic locations."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1488357064, "post_id": 42526122, "comment_id": 72189265, "body": "@MichaelWalz - I know, did it myself when starting. But our CS-101 professors always encourages us to learn how to use debuggers. I had my fill of <code>printk</code> debugging when toying with Linux Kernel code."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1488357400, "post_id": 42526122, "comment_id": 72189496, "body": "@StoryTeller sorry, the comment was actually intended for the OP, not for you."}], "answers": [{"tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": true, "score": 1, "last_activity_date": 1488355897, "creation_date": 1488355897, "answer_id": 42526393, "question_id": 42526122, "link": "https://stackoverflow.com/questions/42526122/accepting-multiple-lines-of-input-from-user-via-fgets/42526393#42526393", "title": "Accepting multiple lines of input from user via fgets()", "body": "<p>As noted by Michael Walz in comment, you use <code>strcat(address, part_of_address);</code> even at first time without having initialized <code>address</code>. As it is an automatic array, it contains undeterminated values, and you are invoking Undefined Behaviour. It is likely that even first <code>strcat</code> overwrites memory after the <code>address</code> array.</p>\n\n<p>Just initialize the array with <code>char address[80] = \"\";</code> or <code>char address[80] = {'\\0'};</code></p>\n"}], "owner": {"reputation": 1384, "user_id": 3893519, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ac2e81d6f659ddb9ee0f3e4f864368eb?s=128&d=identicon&r=PG", "display_name": "kneeki", "link": "https://stackoverflow.com/users/3893519/kneeki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 411, "favorite_count": 0, "accepted_answer_id": 42526393, "answer_count": 1, "score": -2, "last_activity_date": 1488355897, "creation_date": 1488354979, "question_id": 42526122, "link": "https://stackoverflow.com/questions/42526122/accepting-multiple-lines-of-input-from-user-via-fgets", "title": "Accepting multiple lines of input from user via fgets()", "body": "<p>I'm trying to accept multiple lines of 'address' from the user using <code>fgets</code> but I'm having a <code>Segmentation fault (core dumped)</code> just as I leave the while loop. I can <code>printf</code> both the <code>address</code> and <code>part_of_address</code> variables while within the loop without any issues, while in the loop it works as expected. Once breaking free of the loop it catches fire.</p>\n\n<pre><code>// Define a char array called 'name' accepting up to 25 characters.\nchar name[25];\n// Define a char array called 'part_of_address' accepting up to 80 characters.\nchar part_of_address[80];\n// Define a char array called 'address' accepting up to 80 characters.\nchar address[80];\n\n// Clean the buffer, just to be safe...\nint c;\nwhile ((c = getchar()) != '\\n' &amp;&amp; c != EOF) {};\n\n// Ask for the user to enter a name for the record using fgets and stdin, store\n// the result on the 'name' char array.\nprintf(\"\\nEnter the name of the user (RETURN when done):\");\nfgets(name, 25, stdin);\n\n// Ask for the user to enter multiple lines for the address of the record, capture\n// each line using fgets to 'part_of_address'\nprintf(\"\\nEnter the address of the user (DOUBLE-RETURN when done):\");\nwhile (1)\n{\n    fgets(part_of_address, 80, stdin);\n    // If the user hit RETURN on a new line, stop capturing.\n    if (strlen(part_of_address) == 1)\n    {\n        // User hit RETURN\n        break;\n    }\n    // Concatinate the line 'part_of_address' to the multi line 'address'\n    strcat(address, part_of_address);\n}\n\nprintf(\"This doesn't print...\");\n</code></pre>\n"}, {"tags": ["c", "arduino", "nodemcu"], "comments": [{"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "reply_to_user": {"reputation": 22954, "user_id": 5238915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fncqh.jpg?s=128&g=1", "display_name": "RoadRunner", "link": "https://stackoverflow.com/users/5238915/roadrunner"}, "edited": false, "score": 1, "creation_date": 1488356422, "post_id": 42526098, "comment_id": 72188877, "body": "@RoadRunner; No UB, the first char is already a 0..."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "reply_to_user": {"reputation": 22954, "user_id": 5238915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fncqh.jpg?s=128&g=1", "display_name": "RoadRunner", "link": "https://stackoverflow.com/users/5238915/roadrunner"}, "edited": false, "score": 0, "creation_date": 1488356500, "post_id": 42526098, "comment_id": 72188916, "body": "@RoadRunner Beyond that, there already is a <code>\\0</code> at the end of the array (and everywhere else in the array initially). That is a global variable, and as such has static linkage and therefore initially zero-filled if the toolchain is compliant with the language standard."}, {"owner": {"reputation": 69, "user_id": 7160076, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eee5d94a69844938ca1abe801854ac92?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Ayre", "link": "https://stackoverflow.com/users/7160076/rishikesh-ayre"}, "edited": false, "score": 0, "creation_date": 1488356706, "post_id": 42526098, "comment_id": 72189036, "body": "i tried adding &#39;\\0&#39; at the end of array still  Serial.print(x[i]); prints nothing andSerial.println(strlen(x)); returns 0;"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1488356828, "post_id": 42526098, "comment_id": 72189117, "body": "@RishikeshAyre Read Serge&#39;s answer below. It is probably what you want, though you never actually stated what the code was <i>supposed</i> to do, only that what it <i>was</i> doing wasn&#39;t desired."}, {"owner": {"reputation": 69, "user_id": 7160076, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eee5d94a69844938ca1abe801854ac92?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Ayre", "link": "https://stackoverflow.com/users/7160076/rishikesh-ayre"}, "reply_to_user": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1488357399, "post_id": 42526098, "comment_id": 72189494, "body": "@SergeBallesta thank you . it worked  :)"}], "answers": [{"tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": true, "score": 2, "last_activity_date": 1488356380, "creation_date": 1488356380, "answer_id": 42526544, "question_id": 42526098, "link": "https://stackoverflow.com/questions/42526098/how-to-add-characters-to-character-array/42526544#42526544", "title": "how to add characters to character array", "body": "<p>Oups, a C string is by convention a char array terminated with a null byte. All <code>strxx</code> functions follow this convention.</p>\n\n<p>As the first character of the array is... 0, <code>strlen</code> finds a terminating null at index 0 and correctly says that the length of the string is 0.</p>\n\n<p>In addition, all characters with code 0 to 10 (assuming ASCII) are control non printable characters.</p>\n\n<p>I assume that what you wanted to do is</p>\n\n<pre><code>for ( i=0; i&lt;11;i++)\n{\n  x[i]= '0' + i; /* 0 to 9 and : */\n}\nx[11] = '\\0';   /* terminate the array with a null to make it a C string */\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 10195, "user_id": 4390212, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/JrUii.jpg?s=128&g=1", "display_name": "DimaSan", "link": "https://stackoverflow.com/users/4390212/dimasan"}, "edited": false, "score": 2, "creation_date": 1488365736, "post_id": 42526612, "comment_id": 72195361, "body": "While this code snippet may solve the question, <a href=\"http://meta.stackexchange.com/questions/114762/explaining-entirely-code-based-answers\">including an explanation</a> really helps to improve the quality of your post. Remember that you are answering the question for readers in the future, and those people might not know the reasons for your code suggestion."}], "tags": [], "owner": {"reputation": 204, "user_id": 1511663, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RYxse.jpg?s=128&g=1", "display_name": "aslavkin", "link": "https://stackoverflow.com/users/1511663/aslavkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1488356578, "creation_date": 1488356578, "answer_id": 42526612, "question_id": 42526098, "link": "https://stackoverflow.com/questions/42526098/how-to-add-characters-to-character-array/42526612#42526612", "title": "how to add characters to character array", "body": "<p>replace : <code>x[i] = (char)i;</code>\nto: <code>x[i]=(char) ( ((int) '0') + i );</code>\nand add <code>x[11] = '\\0';</code> </p>\n"}], "owner": {"reputation": 69, "user_id": 7160076, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eee5d94a69844938ca1abe801854ac92?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Ayre", "link": "https://stackoverflow.com/users/7160076/rishikesh-ayre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3978, "favorite_count": 0, "accepted_answer_id": 42526544, "answer_count": 2, "score": 0, "last_activity_date": 1488356578, "creation_date": 1488354908, "question_id": 42526098, "link": "https://stackoverflow.com/questions/42526098/how-to-add-characters-to-character-array", "title": "how to add characters to character array", "body": "<p>i want add characters to a character array. my code is</p>\n\n<pre><code>char x[100];\nint i;\nvoid setup() {\nSerial.begin(115200);\n}\nvoid loop() {\nfor ( i=0; i&lt;11;i++)\n{\n  x[i]=(char)i;\n}\nSerial.println(strlen(x));\nfor (i=0;i&lt;11;i++)\n{\n  Serial.print(x[i]);\n}\n\ndelay(1000);\n}\n</code></pre>\n\n<p>i am expecting the array to be x[0] = 0 ,x[1] = 1, x[2] = 2......x[10]=10</p>\n\n<p>but the array seems to be empty as <code>Serial.println(strlen(x));</code> returns 0 \nand  <code>Serial.print(x[i]);</code> prints nothing. \nhow do i add character to an array???</p>\n"}, {"tags": ["c", "sqlite"], "answers": [{"comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1488355419, "post_id": 42526078, "comment_id": 72188343, "body": "Good to know. Never used but useful for debug purpose."}, {"owner": {"reputation": 61, "user_id": 1213901, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/040a78bb3a4367758304704c9baa398f?s=128&d=identicon&r=PG", "display_name": "willygroup", "link": "https://stackoverflow.com/users/1213901/willygroup"}, "edited": false, "score": 0, "creation_date": 1488364122, "post_id": 42526078, "comment_id": 72194218, "body": "I used &quot;sqlite3_sql&quot; to retrieve the not expanded query and it works, but when I try to use &quot;sqlite3_expanded_sql&quot; i got &quot;implicit declaration of function \u2018sqlite3_expanded_sql\u2019&quot;. I&#39;m compiling with this command: cc -c libsqlite.c -lsqlite3"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 61, "user_id": 1213901, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/040a78bb3a4367758304704c9baa398f?s=128&d=identicon&r=PG", "display_name": "willygroup", "link": "https://stackoverflow.com/users/1213901/willygroup"}, "edited": false, "score": 1, "creation_date": 1488364366, "post_id": 42526078, "comment_id": 72194395, "body": "@willygroup - It was added in <a href=\"https://www.sqlite.org/changes.html\" rel=\"nofollow noreferrer\">V3.14</a>. Make sure you have that or newer."}, {"owner": {"reputation": 61, "user_id": 1213901, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/040a78bb3a4367758304704c9baa398f?s=128&d=identicon&r=PG", "display_name": "willygroup", "link": "https://stackoverflow.com/users/1213901/willygroup"}, "edited": false, "score": 0, "creation_date": 1488365859, "post_id": 42526078, "comment_id": 72195442, "body": "Thanks, I thought so. :( My version is way too old (3.7.9)."}, {"owner": {"reputation": 8652, "user_id": 2040863, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IspsC.jpg?s=128&g=1", "display_name": "John Hascall", "link": "https://stackoverflow.com/users/2040863/john-hascall"}, "edited": false, "score": 0, "creation_date": 1557947254, "post_id": 42526078, "comment_id": 98941317, "body": "This exactly answered my question as well, but alas here we are in 2019 and Redhat(7.5) is still on freakin version 3.7.17  &lt;sigh&gt; :("}], "tags": [], "owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": true, "score": 9, "last_activity_date": 1488354812, "creation_date": 1488354812, "answer_id": 42526078, "question_id": 42526007, "link": "https://stackoverflow.com/questions/42526007/c-sqlite3-how-to-print-the-actual-query-after-prepare-and-bind/42526078#42526078", "title": "C sqlite3 how to print the actual query after prepare and bind?", "body": "<p>You can use <a href=\"https://www.sqlite.org/c3ref/expanded_sql.html\" rel=\"noreferrer\"><code>sqlite3_expanded_sql</code></a> to retrieve a pointer to a string that contains the final query with bound parameters expanded.</p>\n"}], "owner": {"reputation": 61, "user_id": 1213901, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/040a78bb3a4367758304704c9baa398f?s=128&d=identicon&r=PG", "display_name": "willygroup", "link": "https://stackoverflow.com/users/1213901/willygroup"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1371, "favorite_count": 0, "accepted_answer_id": 42526078, "answer_count": 1, "score": 3, "last_activity_date": 1488354812, "creation_date": 1488354579, "question_id": 42526007, "link": "https://stackoverflow.com/questions/42526007/c-sqlite3-how-to-print-the-actual-query-after-prepare-and-bind", "title": "C sqlite3 how to print the actual query after prepare and bind?", "body": "<p>how can I print the actual final sqlite3 query that is executed in a portion of code like this?</p>\n\n<pre><code>int rc;\nsqlite3_stmt *res;\nchar *query = \"\";\nquery = \"SELECT count(*) FROM `db_report` WHERE `r_sn` = ?;\";\nrc = sqlite3_prepare_v2(db, query, -1, &amp;res, 0);\nif (rc == SQLITE_OK)\n{\n    sqlite3_bind_text(res, 1, sn, strlen(sn), SQLITE_STATIC);\n} \nint step = sqlite3_step(res);\nPRINT REAL QUERY\nsqlite3_finalize(res);\nreturn 0;\n</code></pre>\n\n<p>Thanks a lot :)</p>\n"}, {"tags": ["c++", "c", "linux"], "comments": [{"owner": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "edited": false, "score": 4, "creation_date": 1488354115, "post_id": 42525843, "comment_id": 72187640, "body": "No. Every program uses its own memory stack when it loads the library. Locking is only for <i>shared resources</i>, which is not existant if multiple programs using the same shared library."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1488354322, "post_id": 42525843, "comment_id": 72187743, "body": "You don&#39;t need to flock a file if no one is modifying it."}, {"owner": {"reputation": 409, "user_id": 1488362, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/LMnZc.jpg?s=128&g=1", "display_name": "incogn1to", "link": "https://stackoverflow.com/users/1488362/incogn1to"}, "edited": false, "score": 0, "creation_date": 1488354828, "post_id": 42525843, "comment_id": 72188025, "body": "I&#39;m more worried about simultaneous access to file (library) on file system."}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 1, "creation_date": 1488355103, "post_id": 42525843, "comment_id": 72188181, "body": "The shared library itself? Unless it&#39;s being MODIFIED by another process [and it shouldn&#39;t, compilers/linkers/file-copying etc, create a complete new file (and in Linux, the old file is &quot;there&quot; until it gets closed by the last user) - so only some process that is opening the library and writing to it could cause this]."}], "answers": [{"tags": [], "owner": {"reputation": 557, "user_id": 2461962, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ea9355efbf8587dc01133990c2337fa8?s=128&d=identicon&r=PG", "display_name": "Hedge7707", "link": "https://stackoverflow.com/users/2461962/hedge7707"}, "is_accepted": true, "score": 1, "last_activity_date": 1488390231, "creation_date": 1488390231, "answer_id": 42538507, "question_id": 42525843, "link": "https://stackoverflow.com/questions/42525843/should-i-lock-before-dlopen/42538507#42538507", "title": "should I lock before dlopen?", "body": "<p>Similar to what was said in the comments, you don't need a semaphore(flock) unless you are accessing a shared resource that could change on you. (IE. accessing shared memory and needing to ensure concurrency of that data). The way dynamic loading ... dlopen()... works</p>\n\n<blockquote>\n  <p><a href=\"http://%20http://www.iecc.com/linker/linker10.html\" rel=\"nofollow noreferrer\"> Those two routines are actually simple wrappers that call back into\n  the dynamic linker. When the dynamic linker loads a library via\n  dlopen(), it does the same relocation and symbol resolution it does on\n  any other library, so the dynamically loaded program can without any\n  special arrangements call back to routines already loaded</a></p>\n</blockquote>\n\n<p>Because of the way linking works, relocations and modifications to the GOT/PLT are done in the memory space of the ( processes calling dlopen ) not that where the shared object is mapped.</p>\n\n<blockquote>\n  <p><a href=\"https://www.technovelty.org/linux/plt-and-got-the-key-to-code-sharing-and-dynamic-libraries.html\" rel=\"nofollow noreferrer\">If a hundred processes use a shared library, it makes no sense to have\n  100 copies of the code in memory taking up space. If the code is\n  completely read-only, and hence never, ever, modified</a></p>\n</blockquote>\n\n<p>Having the shared objects being in read-only memory you never need to worry about them suddenly changing on you sooo no need for a flock :)! </p>\n\n<p>Note: Because you have a shared object linking to other shared objects... the GOT of the initial shared object needs to be updated/mod with the relocations of the libraries being loaded with dlopen() ... but that is stored in a r/w segment of process unique memory space not in that of the shared objects. </p>\n\n<blockquote>\n  <p><a href=\"https://www.technovelty.org/linux/plt-and-got-the-key-to-code-sharing-and-dynamic-libraries.html\" rel=\"nofollow noreferrer\"> the shared library must still have a unqiue data instance in each\n  process...the read-write data section is always put at a known offset\n  from the code section of the library. This way, via the magic of\n  virtual-memory, every process sees its own data section but can share\n  the unmodified code</a></p>\n</blockquote>\n"}], "owner": {"reputation": 409, "user_id": 1488362, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/LMnZc.jpg?s=128&g=1", "display_name": "incogn1to", "link": "https://stackoverflow.com/users/1488362/incogn1to"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 235, "favorite_count": 0, "accepted_answer_id": 42538507, "answer_count": 1, "score": 0, "last_activity_date": 1488390231, "creation_date": 1488353972, "last_edit_date": 1488354005, "question_id": 42525843, "link": "https://stackoverflow.com/questions/42525843/should-i-lock-before-dlopen", "title": "should I lock before dlopen?", "body": "<p>I do have an *.so library, which obtains some information from system libraries using dlopen. Library can be used by multiple application simultaneously. \nMaybe it is a silly question, but should I flock library before doing dlopen on it? I haven't found direct answer anywhere. </p>\n"}, {"tags": ["c", "pointers", "struct"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1488352241, "post_id": 42525355, "comment_id": 72186697, "body": "Do you place the character <code>&#39;3&#39;</code> into the result buffer, or the integer value <code>3</code>?"}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1488352241, "post_id": 42525355, "comment_id": 72186698, "body": "How is <code>executeCommand</code> implemented?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 3, "creation_date": 1488352243, "post_id": 42525355, "comment_id": 72186699, "body": "What is <code>command</code>. Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "edited": false, "score": 1, "creation_date": 1488352265, "post_id": 42525355, "comment_id": 72186712, "body": "I don&#39;t see any <code>malloc</code>/<code>calloc</code> here, where is the struct allocated?"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1488352343, "post_id": 42525355, "comment_id": 72186748, "body": "Where do you call <code>Function_init()</code> and what parameters do you pass?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1488352400, "post_id": 42525355, "comment_id": 72186782, "body": "Please try to create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a> and show us. Also please include the input you give to the program. And while in the debugger do try to step through the code line by line to see that it does what you expect it to do."}, {"owner": {"reputation": 22, "user_id": 5202526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2463bdefdf9c6b5815af104ccd5ea689?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Janiston", "link": "https://stackoverflow.com/users/5202526/brian-janiston"}, "edited": false, "score": 0, "creation_date": 1488352645, "post_id": 42525355, "comment_id": 72186880, "body": "command is a char pointer, executeCommand is several 100 lines long so for the purposes of this question I&#39;m going to write a basic function to take its&#39; place"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 4, "creation_date": 1488352797, "post_id": 42525355, "comment_id": 72186948, "body": "Is <code>executeCommand</code> returning a pointer to a local variable? This is a very common mistake."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1488353010, "post_id": 42525355, "comment_id": 72187071, "body": "You <i>do</i> make the pointers you have actually <i>point</i> somewhere? Somewhere that doesn&#39;t go out of scope (like the variable <code>result</code> in your example of the <code>executeCOmmand</code> function)?"}, {"owner": {"reputation": 7319, "user_id": 2667360, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kKqx3.png?s=128&g=1", "display_name": "Benjamin T", "link": "https://stackoverflow.com/users/2667360/benjamin-t"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1488353188, "post_id": 42525355, "comment_id": 72187166, "body": "@MichaelWalz Why do you care about his code? <code>printf(&quot;%s\\n&quot;, func-&gt;result);</code> is largely enough knowing that <code>func-&gt;result</code> is a <code>char *</code>. If the printf does not print anything it can only mean that a NULL character is encountered before any printable character, either because it points to garbage or because it holds wide characters. A good thing would be to know what are the values of <code>func-&gt;result[i]</code>."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 7319, "user_id": 2667360, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kKqx3.png?s=128&g=1", "display_name": "Benjamin T", "link": "https://stackoverflow.com/users/2667360/benjamin-t"}, "edited": false, "score": 1, "creation_date": 1488353591, "post_id": 42525355, "comment_id": 72187373, "body": "@BenjaminT - We care about his code exactly because it&#39;s his code that produces undefined behavior by accessing a buffer that went out of scope. It&#39;s pointless to discuss what&#39;s at <code>func-&gt;result[i]</code> since merely accessing it is undefined behavior."}, {"owner": {"reputation": 7319, "user_id": 2667360, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kKqx3.png?s=128&g=1", "display_name": "Benjamin T", "link": "https://stackoverflow.com/users/2667360/benjamin-t"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1488353681, "post_id": 42525355, "comment_id": 72187418, "body": "@StoryTeller Yeah, my bad... I had faith because gdb printed &quot;3&quot;"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1488353763, "post_id": 42525355, "comment_id": 72187459, "body": "Another thing: in <code>executeCommand</code> you call <code>Function_init</code> with uninitialized parameters."}, {"owner": {"reputation": 22, "user_id": 5202526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2463bdefdf9c6b5815af104ccd5ea689?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Janiston", "link": "https://stackoverflow.com/users/5202526/brian-janiston"}, "edited": false, "score": 0, "creation_date": 1488353994, "post_id": 42525355, "comment_id": 72187572, "body": "They are initialised in the actual function, it&#39;s just that there&#39;s a load of strtok_r usage that I&#39;d have to add to initialise those variables to what they&#39;d be in the actual program."}], "answers": [{"comments": [{"owner": {"reputation": 22, "user_id": 5202526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2463bdefdf9c6b5815af104ccd5ea689?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Janiston", "link": "https://stackoverflow.com/users/5202526/brian-janiston"}, "edited": false, "score": 0, "creation_date": 1488354104, "post_id": 42525711, "comment_id": 72187632, "body": "Thanks, changing <code>char *result</code> to <code>char result[11]</code> and then using <code>strcpy(currentFunction-&gt;result, result)</code> sorted it for me"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1488357073, "post_id": 42525711, "comment_id": 72189270, "body": "Nothing here is <i>sorted</i>. The code is full of Undefined Behaviour. You need to allocates memory for currentFunction. Dereferencing an uninitialized pointer is going to create a mess."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1488357159, "post_id": 42525711, "comment_id": 72189335, "body": "The answer should be deleted. It introduces even more UB."}, {"owner": {"reputation": 22, "user_id": 5202526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2463bdefdf9c6b5815af104ccd5ea689?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Janiston", "link": "https://stackoverflow.com/users/5202526/brian-janiston"}, "edited": false, "score": 0, "creation_date": 1488364911, "post_id": 42525711, "comment_id": 72194790, "body": "currentFunction is initialised using <code>Function_init(...)</code> in the 4th line of <code>executeCommand()</code>, as for your reference to undefined behaviours that&#39;s outside the scope of the original question"}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "reply_to_user": {"reputation": 22, "user_id": 5202526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2463bdefdf9c6b5815af104ccd5ea689?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Janiston", "link": "https://stackoverflow.com/users/5202526/brian-janiston"}, "edited": false, "score": 0, "creation_date": 1488375744, "post_id": 42525711, "comment_id": 72202310, "body": "@BrianJaniston: <code>Function_init()</code> cannot initialize <code>currentFunction</code>, since C uses pass by value. Just like how <code>int x; Integer_init(x);</code> will leave <code>x</code> uninitialized."}], "tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": true, "score": 2, "last_activity_date": 1488399102, "last_edit_date": 1488399102, "creation_date": 1488353471, "answer_id": 42525711, "question_id": 42525355, "link": "https://stackoverflow.com/questions/42525355/issue-with-printing-char-pointer-in-c/42525711#42525711", "title": "Issue with printing char pointer in C", "body": "<p>It's <code>currentFunction-&gt;result = result</code> in <code>executeCommand</code>, which lets your structure's <code>result</code>-member point to local variable <code>result</code>. The storage of this local variable will be dismissed once <code>executeCommand</code> has finished, and your structure member will point to \"invalid\" memory.</p>\n\n<p>To avoid the loss of the local variable when <code>executeCommand</code> completes, memory can be allocated within <code>executeCommand</code> (e.g. with <code>malloc</code> or <code>calloc</code> or <code>realloc</code>) to provide storage for <code>result</code> which will survive after <code>executeCommand</code> has returned.</p>\n"}], "owner": {"reputation": 22, "user_id": 5202526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2463bdefdf9c6b5815af104ccd5ea689?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Janiston", "link": "https://stackoverflow.com/users/5202526/brian-janiston"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 327, "favorite_count": 0, "accepted_answer_id": 42525711, "answer_count": 1, "score": -3, "last_activity_date": 1488399102, "creation_date": 1488352121, "last_edit_date": 1488352926, "question_id": 42525355, "link": "https://stackoverflow.com/questions/42525355/issue-with-printing-char-pointer-in-c", "title": "Issue with printing char pointer in C", "body": "<p>I am calling a function of return type struct Function, as specified below:</p>\n\n<pre><code>typedef enum {string,integer} ReturnType;\ntypedef struct Function{\n    ReturnType returnType;\n    char *token;\n    char *tokenProgress;\n    char *result;\n    void (*init)(struct Function *self);\n} Function;\nvoid Function_init(Function *self, ReturnType returnType,char *token, char *tokenProgress){\n    self-&gt;returnType = returnType;\n    self-&gt;token = token;\n    self-&gt;tokenProgress = tokenProgress;\n    self-&gt;result = \"\";\n}\n</code></pre>\n\n<p>In the main loop of my program I want to print the result pointer contained within the struct, like so:</p>\n\n<pre><code>int main(int argc, const char * argv[]){\n    while(true){\n        scanf(\"%s\",command);\n        Function *func = executeCommand(command);\n        printf(\"%s\\n\", func-&gt;result);\n    }\n}\n</code></pre>\n\n<p>Here is executeCommand:</p>\n\n<pre><code>Function * executeCommand(char command[]){\n    Function *currentFunction;\n    char *token;\n    char *tokenProgress;\n    Function_init(currentFunction,integer,token,tokenProgress);\n    char result[11];\n    sprintf(result,\"%d\",3);\n    currentFunction-&gt;result = result;\n    return currentFunction;\n}\n</code></pre>\n\n<p>However, when I run the program, only a newline character is printed when it should print \"3\\n\". I have run the program using gdb to check that <code>func-&gt;result</code> has a value:</p>\n\n<pre><code>(gdb) print func-&gt;result\n(char *) $0 = 0x00007fff5fbffa9d \"3\"\n</code></pre>\n\n<p>I checked this value at a breakpoint placed on the line printing <code>func-&gt;result</code>, so I am at a loss as to why it is not printing since it clearly has a value and the struct is being returned correctly.</p>\n"}, {"tags": ["c", "multithreading", "semaphore"], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 6949375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b806548b7e64d412954f9db0fe972022?s=128&d=identicon&r=PG&f=1", "display_name": "Nithin G A", "link": "https://stackoverflow.com/users/6949375/nithin-g-a"}, "edited": false, "score": 0, "creation_date": 1488358228, "post_id": 42525271, "comment_id": 72190018, "body": "Why would sem_wait be called again , since initial semaphore value is 1, so sem_wait must decrement the semaphore value to 0 and go to wait mode till sem_post increments the semaphore value."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 63, "user_id": 6949375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b806548b7e64d412954f9db0fe972022?s=128&d=identicon&r=PG&f=1", "display_name": "Nithin G A", "link": "https://stackoverflow.com/users/6949375/nithin-g-a"}, "edited": false, "score": 0, "creation_date": 1488358551, "post_id": 42525271, "comment_id": 72190227, "body": "@NithinGA - In the code you posted you <code>sem_wait</code> at the start of a loop. And you don&#39;t show yourself calling <code>sem_post</code>. So in the next iteration, <code>sem_wait</code> will see that the semaphore is 0 and wait. The thread is deadlocked with itself."}, {"owner": {"reputation": 63, "user_id": 6949375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b806548b7e64d412954f9db0fe972022?s=128&d=identicon&r=PG&f=1", "display_name": "Nithin G A", "link": "https://stackoverflow.com/users/6949375/nithin-g-a"}, "edited": false, "score": 0, "creation_date": 1488363568, "post_id": 42525271, "comment_id": 72193781, "body": "Actually I have put a break point before calling sem post(Please check the edits)...Now in the thread the first statement is sem_wait...So if I allow 5 seconds after creating the thread and then print the value of semaphore value, It has to get blocked at sem_wait right??"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 63, "user_id": 6949375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b806548b7e64d412954f9db0fe972022?s=128&d=identicon&r=PG&f=1", "display_name": "Nithin G A", "link": "https://stackoverflow.com/users/6949375/nithin-g-a"}, "edited": false, "score": 0, "creation_date": 1488364057, "post_id": 42525271, "comment_id": 72194178, "body": "@NithinGA - Your edit doesn&#39;t have any call to <code>sem_post</code> in sight. Your code sample still has the same symptoms I described. If you want to discuss something about <code>sem_post</code>, then please post code that calls it."}, {"owner": {"reputation": 63, "user_id": 6949375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b806548b7e64d412954f9db0fe972022?s=128&d=identicon&r=PG&f=1", "display_name": "Nithin G A", "link": "https://stackoverflow.com/users/6949375/nithin-g-a"}, "edited": false, "score": 0, "creation_date": 1488366665, "post_id": 42525271, "comment_id": 72195989, "body": "@StorTeller, I have edited the question , does it give some clarity as to what I am doing"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 63, "user_id": 6949375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b806548b7e64d412954f9db0fe972022?s=128&d=identicon&r=PG&f=1", "display_name": "Nithin G A", "link": "https://stackoverflow.com/users/6949375/nithin-g-a"}, "edited": false, "score": 0, "creation_date": 1488367510, "post_id": 42525271, "comment_id": 72196553, "body": "@NithinGA - The call to sleep seems to me like the cause of your deadlock. While the main thread sleeps, the spawned one calls <code>sem_wait</code> twice and goes into a deadlock. Then it&#39;s never true that <code>val_sem1 == 0</code> and you don&#39;t call <code>sem_post</code>. You seem to want only simple mutual exclusion, why not use a <code>pthread_mutex_t</code>?"}, {"owner": {"reputation": 63, "user_id": 6949375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b806548b7e64d412954f9db0fe972022?s=128&d=identicon&r=PG&f=1", "display_name": "Nithin G A", "link": "https://stackoverflow.com/users/6949375/nithin-g-a"}, "edited": false, "score": 0, "creation_date": 1488368096, "post_id": 42525271, "comment_id": 72196971, "body": "Will try mutex, I have edited more ,please see again, if I was in the middle of typing new edits,  If I remove Sleep, would that help, basically I need to make sure that when the while loop starts, the semaphore value must be 0 and then it has to alternate between 1 and 0 using sem_post and sem_wait combination"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 63, "user_id": 6949375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b806548b7e64d412954f9db0fe972022?s=128&d=identicon&r=PG&f=1", "display_name": "Nithin G A", "link": "https://stackoverflow.com/users/6949375/nithin-g-a"}, "edited": false, "score": 0, "creation_date": 1488368391, "post_id": 42525271, "comment_id": 72197171, "body": "@NithinGA - I&#39;m not certain if the actual value of the semaphore is important to your application or not, in so much as the exclusion. Give <code>pthread_mutex_t</code> a try instead if it isn&#39;t. And I suggest you post another question about the use of the semaphore if a mutex isn&#39;t working for you."}, {"owner": {"reputation": 63, "user_id": 6949375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b806548b7e64d412954f9db0fe972022?s=128&d=identicon&r=PG&f=1", "display_name": "Nithin G A", "link": "https://stackoverflow.com/users/6949375/nithin-g-a"}, "edited": false, "score": 0, "creation_date": 1488368790, "post_id": 42525271, "comment_id": 72197431, "body": "The actual value of the thread is important because I have multiple threads which I have not shown, so all the threads must access the same frame at the same time and sem_post is activated if all the threads are in the wait mode ,hence check the semaphore values before sem_post"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 63, "user_id": 6949375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b806548b7e64d412954f9db0fe972022?s=128&d=identicon&r=PG&f=1", "display_name": "Nithin G A", "link": "https://stackoverflow.com/users/6949375/nithin-g-a"}, "edited": false, "score": 0, "creation_date": 1488368942, "post_id": 42525271, "comment_id": 72197538, "body": "@NithinGA - You want the threads to wait at a certain point until they all reached it? And only then continue execution? Possibly multiple times?"}, {"owner": {"reputation": 63, "user_id": 6949375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b806548b7e64d412954f9db0fe972022?s=128&d=identicon&r=PG&f=1", "display_name": "Nithin G A", "link": "https://stackoverflow.com/users/6949375/nithin-g-a"}, "edited": false, "score": 0, "creation_date": 1488369384, "post_id": 42525271, "comment_id": 72197835, "body": "Exactly that is what I want it to do, I have added edits for two threads, please have a look"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 63, "user_id": 6949375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b806548b7e64d412954f9db0fe972022?s=128&d=identicon&r=PG&f=1", "display_name": "Nithin G A", "link": "https://stackoverflow.com/users/6949375/nithin-g-a"}, "edited": false, "score": 0, "creation_date": 1488369469, "post_id": 42525271, "comment_id": 72197894, "body": "@NithinGA - Then what you want is a thread barrier (see <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/pthread_barrier_wait.html\" rel=\"nofollow noreferrer\">here</a>). I now see that you attempt to implement it yourself (which is a nice exercise, but I think your life will be made easier by just using the pthread implementation)."}, {"owner": {"reputation": 63, "user_id": 6949375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b806548b7e64d412954f9db0fe972022?s=128&d=identicon&r=PG&f=1", "display_name": "Nithin G A", "link": "https://stackoverflow.com/users/6949375/nithin-g-a"}, "edited": false, "score": 0, "creation_date": 1488370349, "post_id": 42525271, "comment_id": 72198465, "body": "Thanks, will try it out"}], "tags": [], "owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": true, "score": 4, "last_activity_date": 1488369840, "last_edit_date": 1488369840, "creation_date": 1488351791, "answer_id": 42525271, "question_id": 42524898, "link": "https://stackoverflow.com/questions/42524898/multi-threading-using-posix-semaphore-in-c/42525271#42525271", "title": "Multi threading using POSIX Semaphore in c", "body": "<p>From the <a href=\"http://man7.org/linux/man-pages/man3/sem_getvalue.3.html\" rel=\"nofollow noreferrer\">documentation</a>:</p>\n\n<blockquote>\n  <p>If one or more processes or threads are blocked waiting to lock the\n  semaphore with sem_wait(3), POSIX.1 permits two possibilities for the\n  value returned in sval: either 0 is returned; <strong>or a negative number\n  whose absolute value is the count of the number of processes and\n  threads currently blocked</strong> in sem_wait(3).  Linux adopts the former\n  behavior.</p>\n</blockquote>\n\n<p>So the value isn't random, it has meaning. In your particular sample code:</p>\n\n<ul>\n<li><p>-1 means <code>objrecognition_2</code> calls <code>sem_wait</code> again without calling <code>sem_post</code> before. So it's in a deadlock.</p></li>\n<li><p>0 means <code>objrecognition_2</code> hasn't deadlocked itself yet.</p></li>\n<li><p>1 means <code>objrecognition_2</code> didn't call <code>sem_wait</code> on the semaphore at all yet.</p></li>\n</ul>\n\n<hr>\n\n<p>Following your edits and discussion in the comments to my answer, it's clear to me you are trying to implement a thread barrier by yourself. I suggest you just use the <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/pthread_barrier_wait.html\" rel=\"nofollow noreferrer\">pthread barrier implementation instead</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 63, "user_id": 6949375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b806548b7e64d412954f9db0fe972022?s=128&d=identicon&r=PG&f=1", "display_name": "Nithin G A", "link": "https://stackoverflow.com/users/6949375/nithin-g-a"}, "edited": false, "score": 0, "creation_date": 1488358778, "post_id": 42526577, "comment_id": 72190359, "body": "Good Idea, I tried it, gave a 5 second delay to be safe, Now it is always -1, so as @StoryTeller pointed out it may be calling sem_wait() again and decrementing twice and hence -1 always...But why is this happening I do not understand"}], "tags": [], "owner": {"reputation": 3278, "user_id": 1223297, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/663526923/picture?type=large", "display_name": "Mahmoud Fayez", "link": "https://stackoverflow.com/users/1223297/mahmoud-fayez"}, "is_accepted": false, "score": 0, "last_activity_date": 1488356487, "creation_date": 1488356487, "answer_id": 42526577, "question_id": 42524898, "link": "https://stackoverflow.com/questions/42524898/multi-threading-using-posix-semaphore-in-c/42526577#42526577", "title": "Multi threading using POSIX Semaphore in c", "body": "<p>You are getting random value as their is a timing issue here. To make sure the thread already started and decremented the semaphore I suggest you to wait for 1 second  see the code below:</p>\n\n<pre><code>//After say 20 lines of code, such that the thread actually gets created\n\n// put the main thread to sleep for 1 second as \n// 20 lines of code may not be too much to give \n// the opportunity to another thread to work and capture the semaphore.\n\nsem_getvalue(&amp;mutex_ping1, &amp;val_sem1);\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 6949375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b806548b7e64d412954f9db0fe972022?s=128&d=identicon&r=PG&f=1", "display_name": "Nithin G A", "link": "https://stackoverflow.com/users/6949375/nithin-g-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1721, "favorite_count": 0, "accepted_answer_id": 42525271, "answer_count": 2, "score": 2, "last_activity_date": 1488369840, "creation_date": 1488350473, "last_edit_date": 1488369329, "question_id": 42524898, "link": "https://stackoverflow.com/questions/42524898/multi-threading-using-posix-semaphore-in-c", "title": "Multi threading using POSIX Semaphore in c", "body": "<p>I am trying to use semaphores to capture frames from the video camera and do object recognition in parallel , I have a doubt here:</p>\n\n<p><strong>main.c</strong>(<strong>with edits</strong>)</p>\n\n<pre><code>sem_t sem_1;\nsem_init(&amp;sem_1, 0, 1);  //Initial value of 1\nsem_init(&amp;sem_2, 0, 1);  //Initial value of 1\n\nint val_sem1,val_sem2;\nsem_getvalue(&amp;mutex_ping1, &amp;val_sem1);\nprintf(\"%d %d \\r\\n\", val_sem1,val_sem2);   //Output = 1 1(Correct)\n\n//Create thread\ntrc = pthread_create(&amp;tid_1, NULL, objrecognition_2, &amp;obj_num[0]);\ntrc = pthread_create(&amp;tid_2, NULL, objrecognition_3, &amp;obj_num[1]);\n\nSleep(5000);\n\n\n sem_getvalue(&amp;sem_1, &amp;val_sem1);\n sem_getvalue(&amp;sem_2, &amp;val_sem2);\n printf(\"%d %d \\r\\n\", val_sem1,val_sem2);  //Ideal output? \n\n //Few line of code\n\nwhile(1)\n{\n   //Get camera frame from video camera\n   ....\n   ....\n\n   frame[index%3] = currentframe; //Using 3 backup buffers to avoid race around\n\n\n   //For the very first time always sem_post(logic to keep index &gt; index_use)\n   if ((check))   //Initial value of check =1\n  {\n      check = 0;//Check is made 0 here after permanently\n      sem_post(&amp;sem1);\n      sem_post(&amp;sem2);\n  }\n\n\n   sem_getvalue(&amp;sem_1, &amp;val_sem1);//Get the present semaphore1 value\n   sem_getvalue(&amp;sem_2, &amp;val_sem2);//Get the present semaphore2 value\n\n\n   //This part of the code is activated from the second run because of check variable\n\n   //Check if thread has completed one loop run and is waiting on sem_wait()\n   if ((val_sem_1 == 0) &amp;&amp;  (val_sem_2 == 0) &amp;&amp; (check==0)) //Checking if thread has completed one loop run\n   {\n     index_use++;    //The thread uses frame[index_use % 3] to process \n                    //so that it does not collide with frame[index % 3]\n     sem_post(&amp;sem_1);\n     sem_post(&amp;sem_2);\n   }\n\n   index++;\n}\n</code></pre>\n\n<p>Output should be 0 since sem_wait in thread(in <strong>functions.c</strong> below) must have decremented the value to 0 and should have got blocked </p>\n\n<p>But I am getting random outputs such as 1, -1 and sometimes 0.</p>\n\n<p>Could anyone please help me out here, Is my understanding of semaphores wrong??</p>\n\n<p><strong>functions.c</strong></p>\n\n<pre><code>void*  objrecognition_2(void* arg2)\n{\n   while (1)\n  {\n\n    sem_wait(&amp;mutex_ping2);\n\n   ...\n   ...\n  }\n}\n</code></pre>\n\n<p><strong>edits</strong></p>\n\n<p>I have put a break point before calling sem_post() and also keeping a 5 second delay after creating the thread.</p>\n\n<p>Hence the thread gets created and has to decrement semaphore by 1 and become zero and should wait untill sem_post() gets activated. </p>\n\n<p>Now it prints only -1 at the second printf.</p>\n"}, {"tags": ["c", "linux"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1488351919, "post_id": 42524446, "comment_id": 72186534, "body": "You have added tbis cod to where exactly? Who kills whom? Please post <b>complete</b> code. Also, fork+system??"}, {"owner": {"reputation": 81, "user_id": 2767452, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/414af28a5f8b3ed1d3b2fcdedb45e8e8?s=128&d=identicon&r=PG&f=1", "display_name": "killer", "link": "https://stackoverflow.com/users/2767452/killer"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1488355575, "post_id": 42524446, "comment_id": 72188418, "body": "Earlier I used execvp() to launch the process, but for some reason MAIN process won&#39;t run after few seconds. The huge code chunk is a wrapper code, and the MAIN process is of more LOC. I added only one line from where I need to raise the signal."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1488356419, "post_id": 42524446, "comment_id": 72188876, "body": "If the code is huge it is your responsibility to reduce it for a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. These guidelines exist for a reason. What&#39;s <code>pid</code> in <code>kill(pid,SIGUSR1);</code>? No one knows."}, {"owner": {"reputation": 81, "user_id": 2767452, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/414af28a5f8b3ed1d3b2fcdedb45e8e8?s=128&d=identicon&r=PG&f=1", "display_name": "killer", "link": "https://stackoverflow.com/users/2767452/killer"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1488359653, "post_id": 42524446, "comment_id": 72190951, "body": "Updated some code in MAIN process. My only question is will <code>kill(pid, SIGUSR1)</code> send the <code>SIGUSR1</code> signal to the WRAP process. Or I am using a wrong command to send a signal. Pls. advice. Thanks."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1488366462, "post_id": 42524446, "comment_id": 72195864, "body": "If WRAP starts MAIN as child process why don&#39;t you use <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/getppid.html\" rel=\"nofollow noreferrer\"><code>getppid()</code></a> in MAIN to obtain the signal receiver?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1488369844, "post_id": 42524446, "comment_id": 72198151, "body": "You are using the right function but why not check its result?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1488370487, "post_id": 42524446, "comment_id": 72198557, "body": "Your example is incomplete. There are no header files, no build instructions, no <code>PrintMessage</code>, no function declarations. Please make sure you post buildable code. And what&#39;s up with <code>main()</code> with no return type?"}], "answers": [{"tags": [], "owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "is_accepted": false, "score": 0, "last_activity_date": 1488369127, "creation_date": 1488369127, "answer_id": 42531004, "question_id": 42524446, "link": "https://stackoverflow.com/questions/42524446/queries-in-signalling-between-processes-linux/42531004#42531004", "title": "Queries in signalling between processes Linux", "body": "<p>I prepared a short sample which demonstrates how it should work.</p>\n\n<p>Source file <code>test-exec.c</code> for what you call WRAPPER:</p>\n\n<pre><code>#include &lt;errno.h&gt;\n#include &lt;signal.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/wait.h&gt;\n\nstatic int sigUsr1Rcvd = 0;\n\nenum { SleepTimeUS = 50000 /* us */ };\n\nvoid onSigUsr1(int sig)\n{\n  if (sig == SIGUSR1) sigUsr1Rcvd = 1;\n}\n\nint main(int argc, char **argv)\n{\n  int pid; char buffer[20]; int status = 0;\n  /* report alive */\n  printf(\"%s started...\\n\", argv[0]);\n  /* install signal handler before fork() */\n  signal(SIGUSR1, &amp;onSigUsr1);\n  /* fork child */\n  if (pid = fork()) { /* main process */\n    if (pid &lt; 0) {\n      perror(\"ERROR in fork()\");\n      return -1;\n    }\n  } else { /* child process */\n    if (execl(\"./test-exec-child\", \"test-exec-child\", NULL)) {\n      perror(\"ERROR in execl()\");\n      return -1;\n    }\n    return 0;\n  }\n  /* main process */\n  /* waiting for SIGUSR1 */\n  while (!sigUsr1Rcvd) usleep(SleepTimeUS);\n  printf(\"%s: Child inited.\\n\", argv[0]);\n  /* wait for termination of child */\n  wait(&amp;status);\n  /* done */\n  printf(\"%s exiting...\\n\", argv[0]);\n  return 0;\n}\n</code></pre>\n\n<p>Source code file <code>test-exec-child.c</code> for what you call MAIN:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;signal.h&gt;\n#include &lt;unistd.h&gt;\n\nenum { SleepTimeS = 3 /* s */ };\n\nint main(int argc, char **argv)\n{\n  char buffer[20];\n  /* report alive */\n  printf(\"%s started...\\n\", argv[0]);\n  /* consume some time */\n  printf(\"%s: initializing...\\n\", argv[0]);\n  sleep(SleepTimeS);\n  printf(\"%s: done.\\n\", argv[0]);\n  /* send signal to parent */\n  kill(getppid(), SIGUSR1);\n  /* spend time until user feed-back */\n  printf(\"Press [ENTER] to continue...\");\n  fgets(buffer, sizeof buffer, stdin);\n  /* done */\n  printf(\"%s exiting...\\n\", argv[0]);\n  return 0;\n}\n</code></pre>\n\n<p>I compiled and tested this with gcc on cygwin:</p>\n\n<pre><code>$ gcc -o test-exec test-exec.c\n\n$ gcc -o test-exec-child test-exec-child.c\n\n$ ./test-exec\n./test-exec started...\ntest-exec-child started...\ntest-exec-child: initializing...\n</code></pre>\n\n<p>...</p>\n\n<pre><code>test-exec-child: done.\n./test-exec: Child inited.\nPress [ENTER] to continue...\n</code></pre>\n\n<p>[ENTER]</p>\n\n<pre><code>test-exec-child exiting...\n./test-exec exiting...\n\n$\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 2767452, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/414af28a5f8b3ed1d3b2fcdedb45e8e8?s=128&d=identicon&r=PG&f=1", "display_name": "killer", "link": "https://stackoverflow.com/users/2767452/killer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1488369127, "creation_date": 1488348591, "last_edit_date": 1488359210, "question_id": 42524446, "link": "https://stackoverflow.com/questions/42524446/queries-in-signalling-between-processes-linux", "title": "Queries in signalling between processes Linux", "body": "<p>Hi I'm just working on signalling between two processes. I have a main process (eg. <code>MAIN</code>) which keeps on running. This <code>MAIN</code> is forked from a Wrapper process (eg. <code>WRAP</code>). </p>\n\n<p>Here is my code which will actually launch the <code>WRAP</code> process, which in turn will create a child process as <code>MAIN</code>.</p>\n\n<p>When certain initialization is completed in MAIN I would like to post a signal <code>SIGUSR1</code>, which will be captured by <code>WRAP</code> and does some other stuffs.</p>\n\n<p>The problem with my code is when the signal is raised from <code>MAIN</code> it is never trapped by <code>WRAP</code> process. Pls. share your suggestions on this code or if there are any other ways to achieve this.\nThank you.</p>\n\n<p>In MAIN process:</p>\n\n<p>After Init is completed I have added this code,</p>\n\n<pre><code>main()\n{\n    // Do some work here\n    int pid = GetProcessID(); // Returns the process ID of WRAP process\n    kill(pid,SIGUSR1);        // Tries to send signal to WRAP process\n\n    // Other code\n}\n\nint GetProcessID()\n{\n    int pid = 0;\n    char results[128];\n    FILE *fp = popen(\"pgrep WRAP\", \"r\");\n    if(fp == NULL)\n    {\n        printf(\"Error: Failed to get Process ID\");\n    }\n    else\n    {\n        while(fgets(results, 128, fp) != NULL)\n        {\n            pid = atoi(results);\n        }\n        pclose(fp);\n    }\n    return pid;\n}\n</code></pre>\n\n<p>In WRAP process:</p>\n\n<pre><code>main()\n{ \n    int pid;\n\n    signal(SIGUSR1,InitComplete);\n\n    if ((pid = fork()) &lt; 0) \n    {\n        perror(\"fork\");\n        exit(1);\n    }\n\n    if (pid == 0)\n    { \n        /* child */\n        system(\"mainProc.out\");\n    }\n    else \n     {  \n        /* parent */\n        if(KeepListening() == 1)\n            printf(\"Init completed successfully\\n\");\n    }\n\n    return 0;\n}\n\nint KeepListening()\n{\n    const int MAX_WAIT_TIME = 180;\n    int procStarted = 0;\n    int res = 0;\n    sigset_t origset;\n    sigset_t ss;\n\n    sigemptyset(&amp;ss);\n    sigaddset(&amp;ss, SIGWINCH);\n    sigaddset(&amp;ss, SIGUSR1);\n    res = sigprocmask(SIG_BLOCK, &amp;ss, &amp;origset);\n\n    if(res)\n    {\n        printf(\"\\nError: sigprocmask returned an error\\n\");\n    }\n\n    struct timespec theTimeout;\n    theTimeout.tv_nsec = 0;\n    theTimeout.tv_sec = MAX_WAIT_TIME;\n\n    int sig = 0;\n    siginfo_t theInfo;\n    memset(&amp;theInfo, '\\0', sizeof(theInfo));\n\n    int timedwaitcount = 0;\n\n    do\n    {\n        sig = sigtimedwait(&amp;ss, &amp;theInfo, &amp;theTimeout);\n        if(sig &lt; 0)\n        {\n            if(EAGAIN == errno)\n            {\n                timedwaitcount++;\n            }\n            else\n            {\n                PrintMessage(\"Error:Error occured with sigtimedwait\\n\");\n            }\n        }\n        else\n        {\n            timedwaitcount = 0;\n        }\n\n        if(SIGUSR1 == sig)\n        {\n            return 1;\n        }\n    }while(SIGWINCH == sig || 0 == sig);\n\n    return procStarted;\n}\n\nvoid InitComplete()\n\n   printf(\"InitComplete in MAIN. Signal Received.\\n\");\n}\n</code></pre>\n"}, {"tags": ["c", "sockets", "network-programming", "udp", "recvfrom"], "comments": [{"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 1, "creation_date": 1488349736, "post_id": 42524357, "comment_id": 72185487, "body": "The very code you showed receives packets without knowing the individual client&#39;s address information! Your code doesn&#39;t need to know the sender&#39;s information (you never populate <code>iDontKnow</code> with anything) and it will work just fine."}], "answers": [{"comments": [{"owner": {"reputation": 227, "user_id": 5538478, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/30695a8a10e530cf96be9b613f95816c?s=128&d=identicon&r=PG&f=1", "display_name": "Jerome Carter", "link": "https://stackoverflow.com/users/5538478/jerome-carter"}, "edited": false, "score": 1, "creation_date": 1488349997, "post_id": 42524428, "comment_id": 72185609, "body": "Thank you, I truly appreciate your help!"}, {"owner": {"reputation": 227, "user_id": 5538478, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/30695a8a10e530cf96be9b613f95816c?s=128&d=identicon&r=PG&f=1", "display_name": "Jerome Carter", "link": "https://stackoverflow.com/users/5538478/jerome-carter"}, "edited": false, "score": 0, "creation_date": 1488350075, "post_id": 42524428, "comment_id": 72185647, "body": "Which &quot;corresponding&quot; argument?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 227, "user_id": 5538478, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/30695a8a10e530cf96be9b613f95816c?s=128&d=identicon&r=PG&f=1", "display_name": "Jerome Carter", "link": "https://stackoverflow.com/users/5538478/jerome-carter"}, "edited": false, "score": 0, "creation_date": 1488350125, "post_id": 42524428, "comment_id": 72185662, "body": "@JeromeCarter I meant, replace <code>(struct sockaddr*)&amp;iDontKnow,</code> with <code>NULL</code>, that&#39;s all."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1488352204, "post_id": 42524428, "comment_id": 72186671, "body": "<code>Recv</code> is not limited to connection based sockets. It also works for datagram sockets."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 1, "creation_date": 1488352362, "post_id": 42524428, "comment_id": 72186764, "body": "@Gerhardh Connect, but for TCP, you don&#39;t need to know the info for sender, that&#39;s the whole part of extablishing the connection, inn&#39;it?"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1488352502, "post_id": 42524428, "comment_id": 72186818, "body": "@SouravGhosh true, but the question is about UDP. And if the address is not needed, <code>recv</code> can be used here as well. I think this is better than using <code>recvfrom</code> and ignoring the address part. Getting the address is the only purpose of <code>recvfrom()</code>."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1488352702, "post_id": 42524428, "comment_id": 72186906, "body": "@Gerhardh Indeed, but in that case, there&#39;s not much meaning of a code like that, right?"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1488352930, "post_id": 42524428, "comment_id": 72187023, "body": "I don&#39;t question the poster&#39;s intention. If that &quot;server&quot; is a pure listener, it would be fine to ignore the Sender."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "reply_to_user": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 1, "creation_date": 1488358040, "post_id": 42524428, "comment_id": 72189896, "body": "@Gerhardh If you&#39;re the server, you have to know where to reply to, and this is the only mechanism available."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1488360156, "post_id": 42524428, "comment_id": 72191314, "body": "@EJP: Again: If you only want to receive without sending responses, you don&#39;t need to know it. I would not call it a &quot;server&quot; then but that doesn&#39;t matter. The question is rather clear about that part."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 5, "last_activity_date": 1488349986, "last_edit_date": 1488349986, "creation_date": 1488348504, "answer_id": 42524428, "question_id": 42524357, "link": "https://stackoverflow.com/questions/42524357/why-does-recvfrom-care-about-who-the-data-comes-from/42524428#42524428", "title": "Why does recvfrom care about who the data comes from", "body": "<blockquote>\n  <p><em>Is there a way to receive the packets without knowing each individual client's address information?</em></p>\n</blockquote>\n\n<p>Well, you don't need to know the sender information beforehand, anyway. Once a packet is received, the sender information (if available) will be stored into <code>address</code>.</p>\n\n<p>From the <a href=\"https://linux.die.net/man/3/recvfrom\" rel=\"nofollow noreferrer\">man page</a>,</p>\n\n<blockquote>\n<pre><code>ssize_t recvfrom(int socket, void *restrict buffer, size_t length,\n                   int flags, struct sockaddr *restrict address,\n                   socklen_t *restrict address_len);\n</code></pre>\n  \n  <p>[...] If the address argument is not a null pointer and the protocol provides the source address of messages, the source address of the received message shall be stored in the <code>sockaddr</code> structure pointed to by the address argument, and the length of this address shall be stored in the object pointed to by the <code>address_len</code> argument.</p>\n</blockquote>\n\n<p>Regarding the <strong><em>why</em></strong> part, in case of connectionless sockets, unless you know of the sender address for a packet in a communication, you cannot <em>reply</em> or respond to the sender. So, it is required to know the sender info specifically in connectionless mode and there comes <code>recvfrom()</code> which, along with the received data, gives us the info about the sender, also.</p>\n\n<hr>\n\n<p>EDIT:</p>\n\n<p>In your code</p>\n\n<pre><code>recvfrom(file_descriptor, data, strlen(data), 0, (struct sockaddr*)&amp;iDontKnow, &amp;addr_len)\n</code></pre>\n\n<p>is wrong, as <code>strlen(data)</code> is UB, as you're trying to count the length of an uninitialized char array, which is not qualified to be a <em>string</em>. It invokes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>. You may want to use <code>sizeof(data)</code>, as <code>data</code> is an array.</p>\n\n<p>In case you're not interested in sender's info, just pass a <code>NULL</code> as the corresponding argument.</p>\n\n<hr>\n\n<p>To add to that, for connectionless sockets (UDP), it's actually required to get the sender information. For connection oriented sockets, you have another <em>stripped-down</em> alternative , <a href=\"https://linux.die.net/man/3/recv\" rel=\"nofollow noreferrer\"><code>recv()</code></a> which only takes care of receiving and storing the data.</p>\n"}, {"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1488350615, "post_id": 42524625, "comment_id": 72185866, "body": "Recommend that you explain why."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 1, "creation_date": 1488350654, "post_id": 42524625, "comment_id": 72185885, "body": "And also how merely providing alternate code answers the question that was asked."}], "tags": [], "owner": {"reputation": 1, "user_id": 7098344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad048a12b56cc1e741f9e39a47bc4b03?s=128&d=identicon&r=PG&f=1", "display_name": "S.H", "link": "https://stackoverflow.com/users/7098344/s-h"}, "is_accepted": false, "score": -2, "last_activity_date": 1488349334, "creation_date": 1488349334, "answer_id": 42524625, "question_id": 42524357, "link": "https://stackoverflow.com/questions/42524357/why-does-recvfrom-care-about-who-the-data-comes-from/42524625#42524625", "title": "Why does recvfrom care about who the data comes from", "body": "<p>You could do it like these,</p>\n\n<pre><code>int sockfd_recv;\nstruct sockaddr_in recvaddr;\nbzero(&amp;recvaddr, sizeof(recvaddr));\nrecvaddr.sin_family = AF_INET;\nrecvaddr.sin_port = htons(port_recv);\nrecvaddr.sin_addr.s_addr = htonl(INADDR_ANY);\nint ret = bind(sockfd_recv, (struct sockaddr *)&amp;recvaddr, sizeof(recvaddr));\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 227, "user_id": 5538478, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/30695a8a10e530cf96be9b613f95816c?s=128&d=identicon&r=PG&f=1", "display_name": "Jerome Carter", "link": "https://stackoverflow.com/users/5538478/jerome-carter"}, "edited": false, "score": 0, "creation_date": 1488350878, "post_id": 42524945, "comment_id": 72185990, "body": "Thanks for the feedback!"}], "tags": [], "owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "is_accepted": false, "score": 1, "last_activity_date": 1488350625, "creation_date": 1488350625, "answer_id": 42524945, "question_id": 42524357, "link": "https://stackoverflow.com/questions/42524357/why-does-recvfrom-care-about-who-the-data-comes-from/42524945#42524945", "title": "Why does recvfrom care about who the data comes from", "body": "<blockquote>\n  <p>This <code>DatagramPacket</code>, however, only held the object in which to place the data.</p>\n</blockquote>\n\n<p>And the source address and port, and the length of the data.</p>\n\n<blockquote>\n  <p>So, why does C's implementation of UDP receiving require that you know the sender's information?</p>\n</blockquote>\n\n<p>It doesn't. It has the <em>option</em> to tell <em>you</em> the source address and port. It's a result parameter, not an input.</p>\n"}, {"tags": [], "owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "is_accepted": false, "score": 1, "last_activity_date": 1488352141, "creation_date": 1488352141, "answer_id": 42525362, "question_id": 42524357, "link": "https://stackoverflow.com/questions/42524357/why-does-recvfrom-care-about-who-the-data-comes-from/42525362#42525362", "title": "Why does recvfrom care about who the data comes from", "body": "<p>You compare different functions from Java and C.\nIn C there is also a <code>recv()</code> function that does not provide any address.\nThe sole puprpose of <code>recvfrom</code> over <code>recv</code> is to get the sender's address.\nNormally servers reply to packets that they receive. Wihout an address that is not possible.</p>\n\n<p>If you do not care about the sender of your packets, just take <code>recv</code>.</p>\n\n<p>Or to put it the other way around:\nIf you don't care about the sender, why did you pick the <code>recvfrom</code> version of <code>recv</code>?</p>\n\n<p>I wonder what does the server server if it doesn't care about the client's addresses... But that is not related to your question.</p>\n"}], "owner": {"reputation": 227, "user_id": 5538478, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/30695a8a10e530cf96be9b613f95816c?s=128&d=identicon&r=PG&f=1", "display_name": "Jerome Carter", "link": "https://stackoverflow.com/users/5538478/jerome-carter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 684, "favorite_count": 0, "accepted_answer_id": 42524428, "answer_count": 4, "score": 1, "last_activity_date": 1488352141, "creation_date": 1488348214, "last_edit_date": 1488349143, "question_id": 42524357, "link": "https://stackoverflow.com/questions/42524357/why-does-recvfrom-care-about-who-the-data-comes-from", "title": "Why does recvfrom care about who the data comes from", "body": "<p>So, I'm creating a server in C which uses UDP, and I want to listen for incoming packets from many sources. Therefore, when I call <code>ssize_t recvfrom(int, void *, size_t, int, struct sockaddr * __restrict, socklen_t * __restrict)</code>, the 5th parameter, that which contains the sender's information, may vary.</p>\n\n<p>Is there a way to receive the packets without knowing each individual client's address information? And, is this possible with C's library?</p>\n\n<p>Here's my code:</p>\n\n<pre><code>int file_descriptor;\nchar data[1024];\nint bytes_recved;\nsockaddr_in iDontKnow;\nsocklen_t addr_len = sizeof(iDontKnow);\nif ((bytes_recved = recvfrom(file_descriptor, data, strlen(data), 0, (struct sockaddr*)&amp;iDontKnow, &amp;addr_len)) &lt; 0) {\n    perror(\"Failed to receive data\");\n}\n</code></pre>\n\n<p>I noticed that when receiving data with Java's DatagramSocket and DatagramPacket classes, the DatagramSocket's <code>receive</code> function took in a parameter of type DatagramPacket. This DatagramPacket, however, only held the object in which to place the data. So, why does C's implementation of UDP receiving require that you know the sender's information?</p>\n"}, {"tags": ["c", "algorithm", "sorting"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1488350698, "post_id": 42523864, "comment_id": 72185912, "body": "Out of curiosity, where did you get this code? It appears as though someone couldn&#39;t decide between selection sort and bubble sort, then ended up with a bastardized version that is worse than both."}, {"owner": {"reputation": 77, "user_id": 6277670, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2301a7f75e357ebd3c682d12711f5466?s=128&d=identicon&r=PG&f=1", "display_name": "GordanAndrews", "link": "https://stackoverflow.com/users/6277670/gordanandrews"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1488352661, "post_id": 42523864, "comment_id": 72186885, "body": "I&#39;ve been following C tutorials on Youtube and this particular code was from this video: <a href=\"https://youtu.be/Dtbqs0M-B-s?t=19m9s\" rel=\"nofollow noreferrer\">youtu.be/Dtbqs0M-B-s?t=19m9s</a>"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1488353101, "post_id": 42523864, "comment_id": 72187117, "body": "Yeah, it is an OK algorithm in the context of that exercise, but please do not use it elsewhere ;-)"}], "answers": [{"comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1488347531, "post_id": 42523894, "comment_id": 72184537, "body": "this isn&#39;t bubble sort."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1488348417, "post_id": 42523894, "comment_id": 72184956, "body": "@AnttiHaapala - It is bubble sort, as evident by swapping immediately."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1488349036, "post_id": 42523894, "comment_id": 72185180, "body": "@StoryTeller It is selection sort with unnecessary swapping, but not bubblesort. Bubblesort always compares adjacent elements only."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1488349194, "post_id": 42523894, "comment_id": 72185265, "body": "@AnttiHaapala - It&#39;s a bubblesort without an early halting flag. Inefficient, but bubblesort nonetheless."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1488349593, "post_id": 42523894, "comment_id": 72185437, "body": "@StoryTeller Bubblesort: &quot;compares each pair of adjacent items and swaps them if they are in the wrong order&quot;. No, it is not. These facts are not up for discussion. I am right, you are wrong."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1488349979, "post_id": 42523894, "comment_id": 72185601, "body": "@AnttiHaapala - I may be wrong, but you are most certainly not right. Selection Sort: &quot;Selecting the lowest element requires scanning all n elements (this takes n \u2212 1 comparisons) and then swapping it into the first position&quot;. The code in the OP does nothing of the sort."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1488350417, "post_id": 42523894, "comment_id": 72185783, "body": "@StoryTeller <code>for(j=i; j&lt;MAX; j++)</code> there is your n-1, and it does n-1 comparisons. See my updated answer."}], "tags": [], "owner": {"reputation": 500, "user_id": 3786026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3052b792b1195e64bdf52bc21438c688?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Frost", "link": "https://stackoverflow.com/users/3786026/nick-frost"}, "is_accepted": false, "score": 0, "last_activity_date": 1488346149, "creation_date": 1488346149, "answer_id": 42523894, "question_id": 42523864, "link": "https://stackoverflow.com/questions/42523864/c-basic-sort-algorithm/42523894#42523894", "title": "C Basic Sort Algorithm", "body": "<p>This is a <a href=\"https://en.wikipedia.org/wiki/Bubble_sort\" rel=\"nofollow noreferrer\">Bubble Sort</a>. The gist of it is that it swaps any two adjacent values that it finds out of order, until all of the values are in order.</p>\n"}, {"tags": [], "owner": {"reputation": 4380, "user_id": 482682, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/T2ZMC.jpg?s=128&g=1", "display_name": "Lrrr", "link": "https://stackoverflow.com/users/482682/lrrr"}, "is_accepted": false, "score": 1, "last_activity_date": 1488346263, "creation_date": 1488346263, "answer_id": 42523920, "question_id": 42523864, "link": "https://stackoverflow.com/questions/42523864/c-basic-sort-algorithm/42523920#42523920", "title": "C Basic Sort Algorithm", "body": "<p>No it wouldn't loop because you'll just swap the <code>data[i]</code> with <code>data[i]</code> twice although it is better to rewrite this piece of code like this :</p>\n\n<pre><code>for(i=0; i&lt;MAX-1; i++){\n    for(j=i+1; j&lt;MAX; j++){\n        if(data[i] &gt; data[j]){\n            tmp = data[i];\n            data[i] = data[j];\n            data[j] = tmp;\n        }\n    }\n}\n</code></pre>\n\n<p>but this two code are same.</p>\n\n<p>the algorithm that this codes are using is <a href=\"https://en.wikipedia.org/wiki/Bubble_sort\" rel=\"nofollow noreferrer\">bubble sort</a>. If you want to have better understanding of what it does take a look at the wikipedia article.</p>\n"}, {"comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1488348396, "post_id": 42524151, "comment_id": 72184949, "body": "It&#39;s not selection sort. The OPs code doesn&#39;t match the pseudo on wikipedia, for one"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1488348991, "post_id": 42524151, "comment_id": 72185163, "body": "@StoryTeller true, but it isn&#39;t bubblesort either. This is a selectionsort with unnecessary swapping, so the i value is swapped back and forth - if one keeps track of the smallest value instead then this will have much less swaps."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1488350477, "post_id": 42524151, "comment_id": 72185803, "body": "Better. Much better."}], "tags": [], "owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "is_accepted": true, "score": 2, "last_activity_date": 1488353351, "last_edit_date": 1488353351, "creation_date": 1488347311, "answer_id": 42524151, "question_id": 42523864, "link": "https://stackoverflow.com/questions/42523864/c-basic-sort-algorithm/42524151#42524151", "title": "C Basic Sort Algorithm", "body": "<p>This algorithm is a dummified <a href=\"https://en.wikipedia.org/wiki/Selection_sort\" rel=\"nofollow noreferrer\">selection sort</a> - it matches the description of selection sort on Wikipedia:</p>\n\n<blockquote>\n  <p>The algorithm divides the input list into two parts: the sublist of items already sorted, which is built up from left to right at the front (left) of the list, and the sublist of items remaining to be sorted that occupy the rest of the list. Initially, the sorted sublist is empty and the unsorted sublist is the entire input list. The algorithm proceeds by finding the smallest (or largest, depending on sorting order) element in the unsorted sublist, exchanging (swapping) it with the leftmost unsorted element (putting it in sorted order), and moving the sublist boundaries one element to the right.</p>\n</blockquote>\n\n<p>But indeed not the pseudo algorithm in that it does some unnecessary swaps.</p>\n\n<p>In the first inner round, with <code>i</code> being equal to <code>j</code>, the comparison <code>data[i] &gt; data[j]</code> will be false, and the swap will not be executed. </p>\n\n<p>Then, <code>j</code> will be incremented, and now it is comparing <code>i</code>th value with <code>i + 1</code>th value.</p>\n\n<p>To avoid one futile comparison, initialize <code>j</code> with <code>i + 1</code>:</p>\n\n<pre><code>for (i = 0; i &lt; MAX; i++) {\n    for (j = i + 1; j &lt; MAX; j++) {\n        if (data[i] &gt; data[j]) {\n            tmp = data[i];\n            data[i] = data[j];\n            data[j] = tmp;\n        }\n    }\n}\n</code></pre>\n\n<p>What it does different from ordinary selection sort is that it makes unnecessary swaps back and forth from the <code>i</code>th place. The ordinary selection sort finds the minimum index and does only one swap for each element:</p>\n\n<pre><code>for (i = 0; i &lt; MAX; i++) {\n    int min = i;\n    for (j = i + 1; j &lt; MAX; j++) {\n        if (data[min] &gt; data[j]) {\n            min = j;\n        }\n    }\n\n    tmp = data[min];\n    data[min] = data[i];\n    data[i] = tmp;\n}\n</code></pre>\n\n<p>Nevertheless, the original matches the description of selection sort (and the running time is the same, though constants are worse due to unnecessary swapping) in that:</p>\n\n<blockquote>\n  <p>The algorithm proceeds by finding the smallest (or largest, depending on sorting order) element in the unsorted sublist, exchanging (swapping) it with the leftmost unsorted element (putting it in sorted order)</p>\n</blockquote>\n\n<p>is realized as <em>the algorithm finds the smallest element in the unsorted sublist, exchanging the current smallest item with the leftmost unsorted item as it goes over the list</em>.</p>\n\n<hr>\n\n<p>The C standard library already contains <a href=\"http://port70.net/~nsz/c/c11/n1570.html#7.22.5.2\" rel=\"nofollow noreferrer\"><code>qsort</code></a> which can be used instead of reinventing the wheel - we just need to write the comparison function:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n\nint compare_ints(const void *a, const void *b) \n{\n    return (*(const int*)a - *(const int*)b);\n}\n\nint main(void) {\n    ...\n    qsort(data, MAX, sizeof(int), compare_ints);\n    ...\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9, "user_id": 9871620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6438735392946c17e4cc7c4afddae40?s=128&d=identicon&r=PG&f=1", "display_name": "Adeetya Kulkarni", "link": "https://stackoverflow.com/users/9871620/adeetya-kulkarni"}, "is_accepted": false, "score": 0, "last_activity_date": 1527703199, "creation_date": 1527703199, "answer_id": 50610894, "question_id": 42523864, "link": "https://stackoverflow.com/questions/42523864/c-basic-sort-algorithm/50610894#50610894", "title": "C Basic Sort Algorithm", "body": "<p>The code</p>\n\n<pre><code>for(i=0; i&lt;MAX; i++){\n        for(j=i; j&lt;MAX; j++){\n            if(data[i] &gt; data[j]){\n                tmp = data[i];\n                data[i] = data[j];\n                data[j] = tmp;\n            }\n        }\n    }\n</code></pre>\n\n<p>Will clearly not work as it is supposed to. It basically needs to compare each and every element of the array and sorts them. Basically a bubble sort with time complexity O(n^2). </p>\n\n<p>Rather than j=i</p>\n\n<p>It should be j=i+1</p>\n"}], "owner": {"reputation": 77, "user_id": 6277670, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2301a7f75e357ebd3c682d12711f5466?s=128&d=identicon&r=PG&f=1", "display_name": "GordanAndrews", "link": "https://stackoverflow.com/users/6277670/gordanandrews"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "accepted_answer_id": 42524151, "answer_count": 4, "score": 0, "last_activity_date": 1527703199, "creation_date": 1488346037, "question_id": 42523864, "link": "https://stackoverflow.com/questions/42523864/c-basic-sort-algorithm", "title": "C Basic Sort Algorithm", "body": "<p>I'm not really understanding the process behind this basic sorting algorithm using nested For loops:</p>\n\n<pre><code>for(i=0; i&lt;MAX; i++){\n        for(j=i; j&lt;MAX; j++){\n            if(data[i] &gt; data[j]){\n                tmp = data[i];\n                data[i] = data[j];\n                data[j] = tmp;\n            }\n        }\n    }\n</code></pre>\n\n<p>If <code>j=i</code> then wouldn't it just be looping and comparing the same numbers seeing as i and j both start at 0 in the loops?</p>\n\n<p>I've tried googling for an explanation on this particular bit of code and can't find anything useful. </p>\n\n<p>Full program:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define MAX 10\n\nint main()\n{\n    int data[MAX];\n    int i, j, tmp;\n\n    for(i=0;i&lt;MAX;i++){\n        printf(\"Enter number %d: \", i);\n        scanf(\"%d\", &amp;data[i]);\n    }\n\n    for(i=0; i&lt;MAX; i++){\n        for(j=i; j&lt;MAX; j++){\n            if(data[i] &gt; data[j]){\n                tmp = data[i];\n                data[i] = data[j];\n                data[j] = tmp;\n            }\n        }\n    }\n\n    printf(\"\\nSorted List:\\n\");\n    for(i=0;i&lt;MAX;i++){\n        printf(\"Item %d: %d\\n\", i, data[i]);\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "enums", "switch-statement"], "comments": [{"owner": {"reputation": 500, "user_id": 3786026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3052b792b1195e64bdf52bc21438c688?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Frost", "link": "https://stackoverflow.com/users/3786026/nick-frost"}, "edited": false, "score": 0, "creation_date": 1488345868, "post_id": 42523792, "comment_id": 72183951, "body": "Are you using <code>break;</code> at the end of each <code>case</code>?"}, {"owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "edited": false, "score": 1, "creation_date": 1488345893, "post_id": 42523792, "comment_id": 72183959, "body": "Above code will work in switch- case also. Note that you need to add a break after every case."}, {"owner": {"reputation": 227, "user_id": 5408110, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/cf1b6f9dd875297cbd75963c9528a91b?s=128&d=identicon&r=PG&f=1", "display_name": "darylnak", "link": "https://stackoverflow.com/users/5408110/darylnak"}, "edited": false, "score": 0, "creation_date": 1488346027, "post_id": 42523792, "comment_id": 72184005, "body": "HAHAHA, that&#39;s embarrassing. Forgot break."}], "answers": [{"tags": [], "owner": {"reputation": 30168, "user_id": 5612562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gzBQY.jpg?s=128&g=1", "display_name": "msc", "link": "https://stackoverflow.com/users/5612562/msc"}, "is_accepted": true, "score": 3, "last_activity_date": 1488348047, "last_edit_date": 1488348047, "creation_date": 1488346002, "answer_id": 42523859, "question_id": 42523792, "link": "https://stackoverflow.com/questions/42523792/how-to-compare-enum-values-in-switch-case/42523859#42523859", "title": "How to compare enum values in switch-case?", "body": "<p>Use <code>break</code> statement in <code>switch</code> case so that when a <code>break</code> statement is reached, the switch terminates and the flow of control jumps to the next line following the switch statement.  </p>\n\n<pre><code>switch (myPtr-&gt;value) {\n      case VALUE_ONE:\n        ...;\n        break;\n\n      case VALUE_TWO:\n        ...;\n       break;\n\n      default:\n        ...;\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 67, "user_id": 7352623, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/bd8243434672622aaba9239b37811b31?s=128&d=identicon&r=PG&f=1", "display_name": "Learner", "link": "https://stackoverflow.com/users/7352623/learner"}, "is_accepted": false, "score": 0, "last_activity_date": 1488346434, "creation_date": 1488346434, "answer_id": 42523958, "question_id": 42523792, "link": "https://stackoverflow.com/questions/42523792/how-to-compare-enum-values-in-switch-case/42523958#42523958", "title": "How to compare enum values in switch-case?", "body": "<p>While using the switch case statement, you have to do something like this to get the correct result</p>\n\n<pre><code>switch ( &lt;variable&gt; ) {\ncase 1:\n  Code to execute if &lt;variable&gt; == this-value\n  break;\ncase 2:\n  Code to execute if &lt;variable&gt; == that-value\n  break;\n...\ndefault:\n  Code to execute if &lt;variable&gt; does not equal the value following any of the cases\n  break;\n}\n</code></pre>\n\n<p>suppose you missed the break statement of case 2, so whenever the switch-case 2 will be true, it will enter in all the other cases(which comes after case 2) utill the code encounters a break statement.\nBreak statement is used to come out the case after performing the desired action.\nHope so it's clear.</p>\n"}], "owner": {"reputation": 227, "user_id": 5408110, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/cf1b6f9dd875297cbd75963c9528a91b?s=128&d=identicon&r=PG&f=1", "display_name": "darylnak", "link": "https://stackoverflow.com/users/5408110/darylnak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1837, "favorite_count": 0, "closed_date": 1488369300, "accepted_answer_id": 42523859, "answer_count": 2, "score": 1, "last_activity_date": 1488356311, "creation_date": 1488345614, "last_edit_date": 1488356311, "question_id": 42523792, "link": "https://stackoverflow.com/questions/42523792/how-to-compare-enum-values-in-switch-case", "closed_reason": "Not suitable for this site", "title": "How to compare enum values in switch-case?", "body": "<p>Why does the default case fire for the following:</p>\n\n<pre><code>    typedef enum {VALUE_ONE, VALUE_TWO} someValue;\n\n    typedef struct {\n      someValue value;\n    } myStruct;\n\n---main() BELOW---\n\n    myStruct* myPtr = malloc(sizeof(myStruct));\n    myPtr-&gt;value = VALUE_ONE;\n\n    switch (myPtr-&gt;value) {\n      case VALUE_ONE:\n        ...;\n\n      case VALUE_TWO:\n        ...;\n\n      default:\n        ...;\n    }\n</code></pre>\n\n<p>If I use if-statements, the code will work properly. Currently, I would like to use the switch-case to print out value specific phrases.</p>\n\n<p><strong>UPDATE:</strong> Forgot break statement. Thanks everyone!</p>\n"}, {"tags": ["c", "makefile"], "answers": [{"comments": [{"owner": {"reputation": 583, "user_id": 1902666, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/324ff7fb858ca9df3ebd043499c9d2bf?s=128&d=identicon&r=PG", "display_name": "Godspped", "link": "https://stackoverflow.com/users/1902666/godspped"}, "edited": false, "score": 0, "creation_date": 1488413110, "post_id": 42527335, "comment_id": 72224663, "body": "This doesnt work, I keep getting MAKE_RESTARTS and keeps calling python script code in a loop..."}, {"owner": {"reputation": 291, "user_id": 7476595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a1cb27a89c8c6450c313a3ec007fd4f?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Livshin", "link": "https://stackoverflow.com/users/7476595/michael-livshin"}, "reply_to_user": {"reputation": 583, "user_id": 1902666, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/324ff7fb858ca9df3ebd043499c9d2bf?s=128&d=identicon&r=PG", "display_name": "Godspped", "link": "https://stackoverflow.com/users/1902666/godspped"}, "edited": false, "score": 0, "creation_date": 1488447166, "post_id": 42527335, "comment_id": 72238234, "body": "Works for me.  Are you absolutely sure your make is GNU Make?  does your script actually generate <code>.depend</code>?  Perhaps your script&#39;s date is in the future, so it&#39;s always newer than <code>.depend</code>?  That&#39;s all the ideas I have at this point..."}], "tags": [], "owner": {"reputation": 291, "user_id": 7476595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a1cb27a89c8c6450c313a3ec007fd4f?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Livshin", "link": "https://stackoverflow.com/users/7476595/michael-livshin"}, "is_accepted": false, "score": 0, "last_activity_date": 1488358816, "creation_date": 1488358816, "answer_id": 42527335, "question_id": 42523768, "link": "https://stackoverflow.com/questions/42523768/how-to-set-up-make-to-find-the-dependencies-of-autogenerated-files-that-need-to/42527335#42527335", "title": "How to set up make to find the dependencies of autogenerated files that need to be compiled", "body": "<p>If the python script generates the file <code>.depend</code> (that's my understanding but I'm not entirely sure), then add this rule:</p>\n\n<pre><code>.depend: script.py\n      $&lt;\n</code></pre>\n\n<p>This way make will know that <code>.depend</code> is also a target that needs to be made, and will run <code>script.py</code> if it's newer than <code>.depend</code> or if <code>.depend</code> does not exist. Tweak to taste.</p>\n\n<p>Note that this might only work with GNU Make.</p>\n"}], "owner": {"reputation": 583, "user_id": 1902666, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/324ff7fb858ca9df3ebd043499c9d2bf?s=128&d=identicon&r=PG", "display_name": "Godspped", "link": "https://stackoverflow.com/users/1902666/godspped"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1488413775, "creation_date": 1488345518, "last_edit_date": 1488413775, "question_id": 42523768, "link": "https://stackoverflow.com/questions/42523768/how-to-set-up-make-to-find-the-dependencies-of-autogenerated-files-that-need-to", "title": "How to set up make to find the dependencies of autogenerated files that need to be compiled", "body": "<p>I have a python script that needs to run before any other rule because it generates a few .c files that I want to compile.  But there lies the problems.</p>\n\n<p>In my make file I have a rule to make the depends</p>\n\n<pre><code>SRC = autogenerated_file1.c autogenerated_file2.c\n\ndepend dep: .depend\ninclude .depend\n</code></pre>\n\n<p>But the problem is the files dont exist when the make file is run to make the depends, I need the python script to run first, how would I set up a rule to run before the include of the depends.</p>\n\n<p>Any help would be greatly appreciated.</p>\n\n<p>I simplified my makefile and provided it here:</p>\n\n<pre><code>SUBDIRS = ../modules/mod1 \\\n          ../modules/mod2 \\\n          ../modules/mod3\n\nCFLAGS=-g -Wall \nARFLAGS=rs\n\nCFLAGS:=$(CFLAGS) -I. \n\nAPPLICATION_FILES = main.c autogen1.c autogen2.c\n\nAPPLICATION_OBJ=$(APPLICATION_FILES:.c=.o)\n\n-include $(APPLICATION_FILES:.c=.d)\n\n.PHONY: dummy\ndummy:\n    cd ../scripts &amp;&amp; \\\n    python autgen_files.py\n\n%.o: %.c\n    $(CC) $(CFLAGS) -c $&lt; -o $@\n\nclean :\n    rm -f *.o *.elf *.d\n    -for d in $(SUBDIRS); do (cd $$d; $(MAKE) clean ); done\n\n%.fin: dummy $(SUBDIRS) %.elf\n\n$(SUBDIRS):\n    $(MAKE) -C $@\n\n%.d : %.c\n    $(CC) -MM $(CFLAGS) $*.c &gt; $*.d\n\n%.elf: $(APPLICATION_OBJ)\n    $(CC) -Tapp.ld $(CFLAGS) -o $@ $^\n</code></pre>\n\n<p>The problem here is the autogen1.c and autogen2.c are not available at the start of make.  And if I do what I provided above I get caught it a loop of recursive make.</p>\n\n<p>I should say the way I start the build is \"make test.fin\"</p>\n"}, {"tags": ["c", "shell", "u-boot"], "comments": [{"owner": {"reputation": 4046, "user_id": 4971422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4abf51a937ddda51cc6813445605c50?s=128&d=identicon&r=PG&f=1", "display_name": "FredK", "link": "https://stackoverflow.com/users/4971422/fredk"}, "edited": false, "score": 1, "creation_date": 1488351767, "post_id": 42523745, "comment_id": 72186452, "body": "Why the &quot;c&quot; flag? There is no C here."}], "answers": [{"tags": [], "owner": {"reputation": 1052, "user_id": 3698648, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/199b49d13342baa233c08aac5793ed4d?s=128&d=identicon&r=PG&f=1", "display_name": "ntshetty", "link": "https://stackoverflow.com/users/3698648/ntshetty"}, "is_accepted": false, "score": 2, "last_activity_date": 1488347956, "creation_date": 1488347956, "answer_id": 42524305, "question_id": 42523745, "link": "https://stackoverflow.com/questions/42523745/how-to-open-a-file-from-script-which-is-runniing-at-boot-time/42524305#42524305", "title": "How to open a file from script which is runniing at boot time", "body": "<p>The u-boot doesn't support shell script syntax, u-boot has <a href=\"http://www.denx.de/wiki/DULG/CommandLineParsing\" rel=\"nofollow noreferrer\">hush shell</a> and for reading file and manipulating environment variables you can follow <a href=\"https://github.com/linux-sunxi/u-boot-sunxi/wiki\" rel=\"nofollow noreferrer\">this</a> </p>\n"}], "owner": {"reputation": 81, "user_id": 7633565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37e734e7958e6f7e4ddb055e332be975?s=128&d=identicon&r=PG&f=1", "display_name": "Karthikeyan Raju", "link": "https://stackoverflow.com/users/7633565/karthikeyan-raju"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1488356043, "creation_date": 1488345346, "last_edit_date": 1488356043, "question_id": 42523745, "link": "https://stackoverflow.com/questions/42523745/how-to-open-a-file-from-script-which-is-runniing-at-boot-time", "title": "How to open a file from script which is runniing at boot time", "body": "<p>I am running my script file in u-boot. I want to create a file and save my contents.I tried the following , </p>\n\n<pre><code>cat &gt; info.txt &lt;&lt;- \"EOF\"        // opening the file\necho \"${mmcpart}\" | tee info.txt           // adding contents\necho \"${root_fs}\" | tee -a info.txt\nEOF\n</code></pre>\n\n<p>and ,<br>\n    <code>echo \"${mmcpart}\" | tee info.txt        // directly adding the contents in</code></p>\n\n<p>file</p>\n\n<pre><code>echo \"${root_fs}\" | tee -a info.txt\n</code></pre>\n\n<p>Its not working.......... Can anyone help me to find out</p>\n"}, {"tags": ["c", "lua", "keypress", "ffi", "keystroke"], "comments": [{"owner": {"reputation": 651, "user_id": 6834680, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OvYt2.png?s=128&g=1", "display_name": "Egor   Skriptunoff", "link": "https://stackoverflow.com/users/6834680/egor-skriptunoff"}, "edited": false, "score": 1, "creation_date": 1488356863, "post_id": 42523525, "comment_id": 72189137, "body": "Probably, this task is OS-dependent.  On Windows you can send any message to any particular window, including keystroke message (you should be able to specify id of the window, for example, by searching for its title)."}], "owner": {"reputation": 11, "user_id": 7639106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6439dec8d22ec7ff8aea88de28d67c1?s=128&d=identicon&r=PG&f=1", "display_name": "nakamura", "link": "https://stackoverflow.com/users/7639106/nakamura"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 457, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1488344275, "creation_date": 1488344275, "question_id": 42523525, "link": "https://stackoverflow.com/questions/42523525/sending-key-input-with-lua-ffi", "title": "Sending key input with Lua FFI?", "body": "<p>I looked around on here and google for hours but could not find an example of what I'm looking for. If there is one I'm sorry in advance,</p>\n\n<p>I'm decent at writing Lua but have no real understanding of C, I wanted to try the Lua FFI library which allows calling C functions and it seems to work well, I can do basic things like making a messagebox appear and whatnot (based on examples provided on ffi documentation). </p>\n\n<p>One thing I'm really curious to do is see if I can create a simple botting script with something like SendInput for simulating keyboard events in game windows, but so far I'm having a lot of trouble figuring it out and was hoping someone could point me in the right direction, again, really sorry if this has been covered in another topic here or somewhere else. </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 2744, "user_id": 5992618, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/VzTcn.jpg?s=128&g=1", "display_name": "eRaisedToX", "link": "https://stackoverflow.com/users/5992618/eraisedtox"}, "edited": false, "score": 0, "creation_date": 1488347037, "post_id": 42523304, "comment_id": 72184340, "body": "See my answer below , it might help you understand the reason &#39;why&#39;?"}, {"owner": {"reputation": 23069, "user_id": 156811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/380335e95e6be9740e56b64d667279b3?s=128&d=identicon&r=PG", "display_name": "Havenard", "link": "https://stackoverflow.com/users/156811/havenard"}, "edited": false, "score": 0, "creation_date": 1488390436, "post_id": 42523304, "comment_id": 72212799, "body": "No, the file does not exist in memory unless it&#39;s really small. <code>FILE*</code> is a structure that holds, among other things, a file descriptor that allows the program to read the file from the disk through syscalls. You can also read a file using syscalls directly, using <code>open()</code>, <code>read()</code> and <code>write()</code>, but by using syscalls directly you won&#39;t be making efficient use of read/write buffering."}], "answers": [{"tags": [], "owner": {"reputation": 47412, "user_id": 3141234, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/78b45a835031f4ce03a6653b3262b5d3?s=128&d=identicon&r=PG", "display_name": "Alexander", "link": "https://stackoverflow.com/users/3141234/alexander"}, "is_accepted": false, "score": 3, "last_activity_date": 1488344271, "last_edit_date": 1488344271, "creation_date": 1488343887, "answer_id": 42523444, "question_id": 42523304, "link": "https://stackoverflow.com/questions/42523304/understanding-file-pointers-and-buffers/42523444#42523444", "title": "Understanding file pointers and buffers", "body": "<p>The <code>FILE *</code> returned by <code>fopen</code> is an unnecessary, but useful, layer of indirection.</p>\n\n<p>Theoretically, <code>fopen</code> could have been designed to read the whole file into a buffer in memory, and just return you that buffer.</p>\n\n<p>The issue approach is that it's not flexible at all. It forces you to read the entire file for all file IO operations, which is <em>very</em> undesirable. For example, here are some problems that would come about:</p>\n\n<ul>\n<li>How could you read a file that's too big to fit in RAM?</li>\n<li>What if you just want to append a new line at the end of a file (such as for logging). You would have to read the whole file, append the line at the end, then rewrite the entire file back. Expensive!</li>\n<li>What if you're only interested in reading a small part of a file, such as reading the <a href=\"https://en.wikipedia.org/wiki/Magic_number_(programming)\" rel=\"nofollow noreferrer\">magic number</a> to identify the file's type, without regard for its actual content?</li>\n<li>What if you wanted to simultaneously edit the file from multiple programs. Each program need to constantly reread the whole file into memory, to ensure it kept up-to-date.</li>\n</ul>\n\n<p><code>fopen</code> returns a file handle that identifies a file still on disk. How much you read out of this file into memory is entirely up to you.</p>\n"}, {"tags": [], "owner": {"reputation": 2744, "user_id": 5992618, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/VzTcn.jpg?s=128&g=1", "display_name": "eRaisedToX", "link": "https://stackoverflow.com/users/5992618/eraisedtox"}, "is_accepted": true, "score": 0, "last_activity_date": 1488346914, "last_edit_date": 1488346914, "creation_date": 1488345854, "answer_id": 42523829, "question_id": 42523304, "link": "https://stackoverflow.com/questions/42523304/understanding-file-pointers-and-buffers/42523829#42523829", "title": "Understanding file pointers and buffers", "body": "<p>The explanation given above is pretty much self explanatory , still I would try to make it simple (in case anyone has problem understanding it)</p>\n\n<p><strong>In Short,consider this example and you yourself would know 'why?'</strong></p>\n\n<p><em>1) your files might be too large and stored in your hard drive , then if you try reading it frequently, don't you think this is an overhead for loading whole file again and again.</em></p>\n\n<p><em>2) And more worse say the file is huge then if you load whole of your file it consumes your RAM even if you don't need whole file at once.</em></p>\n\n<blockquote>\n  <p>Why, in C, do you need a separate buffer to read a FILE *?</p>\n</blockquote>\n\n<p>First thing, Because reading into buffers and then using it is always faster. </p>\n\n<blockquote>\n  <p>does the file then not exist in contiguous memory starting at the\n  address of said pointer?</p>\n</blockquote>\n\n<p>May or May not be ,depending on its size.</p>\n\n<blockquote>\n  <p>If someone could explain how theFIlE *file = fopen(filename, \"r\") and\n  the subsequent fread(&amp;buffer,...) work in conjunction</p>\n</blockquote>\n\n<p>The fopen() function is used to open a file and associates an I/O stream with it. This function takes two arguments. The first argument is a pointer to a string containing name of the file to be opened while the second argument is the mode in which the file is to be opened.</p>\n\n<p>Various modes can be like <code>r, r+, w, w+, a, a+</code> .</p>\n\n<p>The fopen() function returns a FILE stream pointer on success while it returns NULL in case of a failure.</p>\n\n<p>Look <a href=\"http://www.thegeekstuff.com/2012/07/c-file-handling\" rel=\"nofollow noreferrer\">here</a> for detailed info.</p>\n"}, {"tags": [], "owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "is_accepted": false, "score": 0, "last_activity_date": 1488356289, "last_edit_date": 1488356289, "creation_date": 1488348751, "answer_id": 42524485, "question_id": 42523304, "link": "https://stackoverflow.com/questions/42523304/understanding-file-pointers-and-buffers/42524485#42524485", "title": "Understanding file pointers and buffers", "body": "<blockquote>\n  <p>Why, in C, do you need a separate buffer to read a FILE *?</p>\n</blockquote>\n\n<p>No buffer aren't necessary while they are usually present to accelerate I/Os.</p>\n\n<blockquote>\n  <p>When you declare a FILE * and assign to it with fopen, does the file\n  then not exist in contiguous memory starting at the address of said\n  pointer?</p>\n</blockquote>\n\n<p>Certainly not, 'cause this would be at least inefficient (why read a entire file huge if it is not needed at the end?) and at worst impossible at all (RAM size is usually much less than DISK size).</p>\n\n<blockquote>\n  <p>If someone could explain how the FILE *file = fopen(filename, \"r\") and\n  the subsequent fread(&amp;buffer,...) work in conjunction it would help my\n  understanding tremendously.</p>\n</blockquote>\n\n<p>Then FILE * is not an handle to a memory object that contains the file data, but is a memory object that contains data to help accessing file data on disk. That opaque object (opaque means don't try to look inside details are hidden) contains for example the current offset (remember when you read or write this is done at a given offset and this would modify the offset accordingly), or the open mode (this way writing into an opened for read file will correctly fails), or some buffer (that may contains part of the file and sometimes the whole file!), etc. A FILE * is handle as a handle for a door. Don't confuse file and FILE*, the first is a generic term to embrace what you already know (data on disk), then second is a type to represent an <strong>opened file</strong> which is a dynamic object to represent manipulation of a given file.</p>\n\n<blockquote>\n  <p>I'm struggling to make the connection as to why you need need to read\n  via fread() into a separate buffer.</p>\n</blockquote>\n\n<p>If you don't have/can't have the file in memory, then you need to ask for reading the part you are interested in.</p>\n"}], "owner": {"reputation": 21, "user_id": 7639003, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7e921deaed8789fb8df93515453964f?s=128&d=identicon&r=PG&f=1", "display_name": "Dsus79", "link": "https://stackoverflow.com/users/7639003/dsus79"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 936, "favorite_count": 0, "accepted_answer_id": 42523829, "answer_count": 3, "score": 0, "last_activity_date": 1488356289, "creation_date": 1488343073, "last_edit_date": 1488344116, "question_id": 42523304, "link": "https://stackoverflow.com/questions/42523304/understanding-file-pointers-and-buffers", "title": "Understanding file pointers and buffers", "body": "<p>Why, in C, do you need a separate buffer to read a <code>FILE *</code>?  When you declare a <code>FILE *</code> and assign to it with <code>fopen</code>, does the file then not exist in contiguous memory starting at the address of said pointer? I'm struggling to make the connection as to why you need need to read via <code>fread()</code> into a separate buffer. If someone could explain how the<code>FIlE *file = fopen(filename, \"r\")</code> and the subsequent <code>fread(&amp;buffer,...)</code> work in conjunction it would help my understanding tremendously.  Thanks in advance.  </p>\n"}]