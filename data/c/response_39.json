[{"tags": ["c", "format", "printf"], "comments": [{"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 6, "creation_date": 1444262230, "post_id": 33004370, "comment_id": 53833455, "body": "How are you outputting this data right now?  Show us some code."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1444262307, "post_id": 33004370, "comment_id": 53833484, "body": "Am I correct that you aren&#39;t happy with the placement of &quot;Numbers&quot;?"}, {"owner": {"reputation": 240688, "user_id": 14955, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/5DblQ.png?s=128&g=1", "display_name": "Thilo", "link": "https://stackoverflow.com/users/14955/thilo"}, "edited": false, "score": 0, "creation_date": 1444262537, "post_id": 33004370, "comment_id": 53833550, "body": "Also, &#39;%50s&#39; still overflows if the string is longer, I believe. Can this be forced to truncate?"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 2, "creation_date": 1444262738, "post_id": 33004370, "comment_id": 53833614, "body": "Using <code>%4d</code> should line up the numbers, as long as all the numbers are &lt;= 9999."}, {"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1444263089, "post_id": 33004370, "comment_id": 53833724, "body": "A quick Google search on <code>printf documentation</code> turned up <a href=\"http://www.codingunit.com/printf-format-specifiers-format-conversions-and-formatted-output\" rel=\"nofollow noreferrer\">codingunit.com/&hellip;</a> in the third result."}], "answers": [{"tags": [], "owner": {"reputation": 2463, "user_id": 897968, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3dbec4dfd2edf8e609220dfdd8a960ca?s=128&d=identicon&r=PG", "display_name": "FriendFX", "link": "https://stackoverflow.com/users/897968/friendfx"}, "is_accepted": false, "score": 3, "last_activity_date": 1444264014, "last_edit_date": 1444264014, "creation_date": 1444263503, "answer_id": 33004563, "question_id": 33004370, "link": "https://stackoverflow.com/questions/33004370/how-do-i-make-a-printf-statement-only-be-so-long/33004563#33004563", "title": "How do I make a printf statement only be so long?", "body": "<p>As I have found in <a href=\"https://stackoverflow.com/q/12253400/897968\">another question</a> here, you could use this to right-align your numbers:</p>\n\n<pre><code>printf(\"[%4d]\", number);\n</code></pre>\n\n<p>Apart from that, I don't quite understand what you meant by \"only be so long\"?</p>\n"}], "owner": {"reputation": 141, "user_id": 4708177, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/32db9b1cc69524aa9307cc05afcecb2b?s=128&d=identicon&r=PG&f=1", "display_name": "john", "link": "https://stackoverflow.com/users/4708177/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1444264014, "creation_date": 1444262140, "last_edit_date": 1444262553, "question_id": 33004370, "link": "https://stackoverflow.com/questions/33004370/how-do-i-make-a-printf-statement-only-be-so-long", "title": "How do I make a printf statement only be so long?", "body": "<p>For instance:</p>\n\n<pre><code>Address            Numbers\n[   0] 1 2 3 4 5 6 7 8 9\n[ 981] 1 4 3 9 0 1 9 2 8\n[  45] 0 3 3 3 4 1 2 3 0\n[1512] 8 2 1 2 3 1 1 1 9\n</code></pre>\n\n<p>I know I could do something to check how long the character is and then do a %*s tag to add x amount of spaces, but is there a short and not messy way to define a printf segment to only be so long?</p>\n\n<p>EDIT:</p>\n\n<p>Okay, sorry for the confusion.</p>\n\n<p>So heres what happens right now...</p>\n\n<pre><code>Address            Numbers\n[   0] 1 2 3 4 5 6 7 8 9\n[   981] 1 4 3 9 0 1 9 2 8\n[   45] 0 3 3 3 4 1 2 3 0\n[   1512] 8 2 1 2 3 1 1 1 9\n</code></pre>\n\n<p>I'm trying to get it to match the top part though</p>\n"}, {"tags": ["c", "string", "command-line", "command"], "comments": [{"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1444262069, "post_id": 33004335, "comment_id": 53833419, "body": "What is your question? Also you are trying to copy a string to a char"}, {"owner": {"reputation": 9902, "user_id": 1960027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z89Jo.jpg?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/1960027/simon"}, "edited": false, "score": 3, "creation_date": 1444262190, "post_id": 33004335, "comment_id": 53833442, "body": "I&#39;d ask what problem you are having, but it is fairly obvious -- a <code>char</code> is a character, not a pointer to a sequence of characters, which is what the first parameter of <code>strcpy()</code> (mis-spelled here, by the way) should be."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1444262278, "post_id": 33004335, "comment_id": 53833469, "body": "All that you have is flawed so much beyond, we could fill a basic c++ syntax and logic book to explain what&#39;s wrong with it."}, {"owner": {"reputation": 7700, "user_id": 126027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d083341daacfb4942b835e3f6f2fd804?s=128&d=identicon&r=PG", "display_name": "TheUndeadFish", "link": "https://stackoverflow.com/users/126027/theundeadfish"}, "edited": false, "score": 1, "creation_date": 1444262393, "post_id": 33004335, "comment_id": 53833506, "body": "If at all possible, just use a <code>std::string</code> so that you don&#39;t have to worry about char array sizes, <code>strcpy</code>ing, and such."}, {"owner": {"reputation": 9902, "user_id": 1960027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z89Jo.jpg?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/1960027/simon"}, "edited": false, "score": 3, "creation_date": 1444262687, "post_id": 33004335, "comment_id": 53833595, "body": "@user3124394: Editing your question to clarify it is helpful. Editing your question to address errors that were pointed out in answers is not. If you try a solution and it doesn&#39;t work for you, you are best to ask another separate question rather than invalidating the answers that people have invested some time in by changing the existing question."}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1444262900, "post_id": 33004335, "comment_id": 53833663, "body": "Yeah! my answer is all invalidated! Also read the tutorial i posted (and my answer - there is more than just making it a pointer)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 7700, "user_id": 126027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d083341daacfb4942b835e3f6f2fd804?s=128&d=identicon&r=PG", "display_name": "TheUndeadFish", "link": "https://stackoverflow.com/users/126027/theundeadfish"}, "edited": false, "score": 0, "creation_date": 1444263763, "post_id": 33004335, "comment_id": 53833917, "body": "@TheUndeadFish: They added user-namespaces and <code>string</code> type to C? Could you provide a link to the new standard."}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1444263989, "post_id": 33004335, "comment_id": 53833958, "body": "@Olaf The original question was tagged with <code>c</code> <code>c++</code> and had a <code>using namespace std </code> at the top. I removed them because the questions didn&#39;t really make sense."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1444264373, "post_id": 33004335, "comment_id": 53834076, "body": "@Ben:I just had a lok at the text edits, not the tags. This question is nonsense anyway. OP should just learn the language properly and not skip chapters."}], "answers": [{"comments": [{"owner": {"reputation": 109956, "user_id": 159145, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/r8ryC.png?s=128&g=1", "display_name": "Dai", "link": "https://stackoverflow.com/users/159145/dai"}, "edited": false, "score": 0, "creation_date": 1444262383, "post_id": 33004384, "comment_id": 53833505, "body": "You shouldn&#39;t need to allocate any memory, the command-line argument string is valid for the life of the program, so a <code>const char* const</code> should work."}, {"owner": {"reputation": 5541, "user_id": 4367864, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/mIepQ.png?s=128&g=1", "display_name": "PC Luddite", "link": "https://stackoverflow.com/users/4367864/pc-luddite"}, "reply_to_user": {"reputation": 109956, "user_id": 159145, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/r8ryC.png?s=128&g=1", "display_name": "Dai", "link": "https://stackoverflow.com/users/159145/dai"}, "edited": false, "score": 0, "creation_date": 1444262498, "post_id": 33004384, "comment_id": 53833543, "body": "@Dai If they want to <i>copy</i> the string (like in the question), then they need to allocate memory for that. But otherwise, yeah, simple assignment would work."}], "tags": [], "owner": {"reputation": 5541, "user_id": 4367864, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/mIepQ.png?s=128&g=1", "display_name": "PC Luddite", "link": "https://stackoverflow.com/users/4367864/pc-luddite"}, "is_accepted": false, "score": 1, "last_activity_date": 1444264595, "last_edit_date": 1444264595, "creation_date": 1444262274, "answer_id": 33004384, "question_id": 33004335, "link": "https://stackoverflow.com/questions/33004335/save-command-line-argument-as-global-variable-in-c/33004384#33004384", "title": "Save command line argument as global variable in C", "body": "<p>That's not going to work.</p>\n\n<p>These:</p>\n\n<pre><code>char infilename;\nchar outfilename;\n</code></pre>\n\n<p>declare a variables that store a single <code>char</code>, not an entire string.</p>\n\n<p>You either need to make those <code>char</code> arrays:</p>\n\n<pre><code>char infilename[MAX_PATH];\nchar outfilename[MAX_PATH];\n</code></pre>\n\n<p>or pointers that you plan to initialize with <code>malloc</code>ed memory. You have to pick which one you mean.</p>\n\n<p>P.s. there's no function called <code>strcopy</code>, it's <code>strcpy</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "is_accepted": false, "score": 3, "last_activity_date": 1444262297, "creation_date": 1444262297, "answer_id": 33004388, "question_id": 33004335, "link": "https://stackoverflow.com/questions/33004335/save-command-line-argument-as-global-variable-in-c/33004388#33004388", "title": "Save command line argument as global variable in C", "body": "<p>You are trying to copy a string (<code>const char *</code>) to a character (<code>char</code>). You need to either declare infilename as a string:</p>\n\n<pre><code>char *infilename;\ninfilename = malloc(...\n</code></pre>\n\n<p>or make a static array:</p>\n\n<pre><code>char infilename[NUM_OF_CHARS];\n</code></pre>\n\n<p>Read up on c strings <a href=\"http://www.cprogramming.com/tutorial/c/lesson9.html\" rel=\"nofollow\">here</a>.</p>\n\n<p>Also choose your language, if you are really using <code>c++</code> you need to start using <a href=\"http://en.cppreference.com/w/cpp/string/basic_string\" rel=\"nofollow\"><code>std::string</code></a>  </p>\n"}, {"comments": [{"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1444262773, "post_id": 33004448, "comment_id": 53833621, "body": "Where did the OP mention a <code>namespace</code>?"}, {"owner": {"reputation": 5541, "user_id": 4367864, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/mIepQ.png?s=128&g=1", "display_name": "PC Luddite", "link": "https://stackoverflow.com/users/4367864/pc-luddite"}, "reply_to_user": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1444263412, "post_id": 33004448, "comment_id": 53833816, "body": "@Ben I&#39;d keep <code>using namespace std;</code> in the original post, as this answer still pertains to it."}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "reply_to_user": {"reputation": 5541, "user_id": 4367864, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/mIepQ.png?s=128&g=1", "display_name": "PC Luddite", "link": "https://stackoverflow.com/users/4367864/pc-luddite"}, "edited": false, "score": 0, "creation_date": 1444263508, "post_id": 33004448, "comment_id": 53833846, "body": "@PCLuddite But i removed the <code>c</code> tag. I think the question is better as it is. I feel like this answer should be edited. Its only the top line that isnt relevant any more."}, {"owner": {"reputation": 480, "user_id": 5420624, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-vQZfKQpzUsI/AAAAAAAAAAI/AAAAAAAAABI/jhadEAWyhB0/photo.jpg?sz=128", "display_name": "Captain Wise", "link": "https://stackoverflow.com/users/5420624/captain-wise"}, "reply_to_user": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1444263895, "post_id": 33004448, "comment_id": 53833936, "body": "@Ben, I changed my answer and removed the comment for the namespace."}], "tags": [], "owner": {"reputation": 480, "user_id": 5420624, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-vQZfKQpzUsI/AAAAAAAAAAI/AAAAAAAAABI/jhadEAWyhB0/photo.jpg?sz=128", "display_name": "Captain Wise", "link": "https://stackoverflow.com/users/5420624/captain-wise"}, "is_accepted": false, "score": 3, "last_activity_date": 1444263827, "last_edit_date": 1444263827, "creation_date": 1444262651, "answer_id": 33004448, "question_id": 33004335, "link": "https://stackoverflow.com/questions/33004335/save-command-line-argument-as-global-variable-in-c/33004448#33004448", "title": "Save command line argument as global variable in C", "body": "<p>A better way to do it.</p>\n\n<pre><code>char infilename[50];\nchar outfilename[50];\n\nint main(int argc, const char* argv[]){\n\n    if(argc == 3)\n    {\n        strcpy (infilename,argv[1]);\n        strcpy (outfilename,argv[2]);\n    }\n    else\n    {\n            //do something else\n    }\n    return 0;\n}\n</code></pre>\n\n<p>You need array of char and not only char. A string in C is an array of char. And you must always verify (if(argc == 3) if the user entered the quantity of argument you want, because if it's not the case your applicatin can crash.</p>\n"}, {"tags": [], "owner": {"reputation": 710, "user_id": 5420934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a3ae2cd99bdff22a45b094e2811f34b?s=128&d=identicon&r=PG&f=1", "display_name": "waterjuice", "link": "https://stackoverflow.com/users/5420934/waterjuice"}, "is_accepted": false, "score": 0, "last_activity_date": 1444269229, "creation_date": 1444269229, "answer_id": 33005317, "question_id": 33004335, "link": "https://stackoverflow.com/questions/33004335/save-command-line-argument-as-global-variable-in-c/33005317#33005317", "title": "Save command line argument as global variable in C", "body": "<p>The main problem is that you made your global variables single characters not an array of characters which is needed for a string.\nAssuming you don't want to change the contents of the string then the easiest thing is to simply set a global to point to the same string rather than copying it. Because the program will end when main returns there is no worry about the parameters argv going out of scope.\nNote you would have to worry about this if you create a new thread and terminate the thread running main without terminating the program.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nstatic char* gInFilenamePtr;\nstatic char* gOutFilenamePtr;\n\nint main(int argc, const char* argv[])\n{\n    if( argc &gt; 2 )\n    {\n        gInFilenamePtr = argv[1];\n        gOutFilenamePtr = argv[2];\n    }\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 3124394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60e0aea2e59c46f06d7edc980defb16?s=128&d=identicon&r=PG&f=1", "display_name": "user3124394", "link": "https://stackoverflow.com/users/3124394/user3124394"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6093, "favorite_count": 0, "answer_count": 4, "score": -4, "last_activity_date": 1444269229, "creation_date": 1444261951, "last_edit_date": 1444263137, "question_id": 33004335, "link": "https://stackoverflow.com/questions/33004335/save-command-line-argument-as-global-variable-in-c", "title": "Save command line argument as global variable in C", "body": "<p>I'm trying to read in two filenames and save them as a global variable in C.   </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nchar infilename;\nchar outfilename;\n\nint main(int argc, const char* argv[]){\n\n    strcopy(infilename, argv[1]);\n\n\nreturn 0;\n}\n</code></pre>\n\n<p>However this does not work. Can someone help me with a really simple problem like this?</p>\n"}, {"tags": ["c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 5782, "user_id": 2832398, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/356c99a077310a35816f852423859f4c?s=128&d=identicon&r=PG&f=1", "display_name": "lilezek", "link": "https://stackoverflow.com/users/2832398/lilezek"}, "edited": false, "score": 0, "creation_date": 1444261737, "post_id": 33004262, "comment_id": 53833342, "body": "Don&#39;t you mean <code>char ** s =*extr,*p,*l=longstring;</code> ?"}, {"owner": {"reputation": 2016, "user_id": 5141989, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/3dPUW.jpg?s=128&g=1", "display_name": "Mike -- No longer here", "link": "https://stackoverflow.com/users/5141989/mike-no-longer-here"}, "reply_to_user": {"reputation": 5782, "user_id": 2832398, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/356c99a077310a35816f852423859f4c?s=128&d=identicon&r=PG&f=1", "display_name": "lilezek", "link": "https://stackoverflow.com/users/2832398/lilezek"}, "edited": false, "score": 0, "creation_date": 1444262059, "post_id": 33004262, "comment_id": 53833417, "body": "I think that char** s  would work for the first error, but now the second error is an issue... passing the extr parameter in."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1444269454, "post_id": 33004262, "comment_id": 53835404, "body": "<code>long extract()</code> does not return a value.  Check compiler warning settings."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1444269708, "post_id": 33004262, "comment_id": 53835463, "body": "<code>char ext[20][5000]; printf(&quot;%s\\n&quot;,ext);</code> --&gt; wrong type and UB.  Again, Save time - check compiler warning settings and insure they are enabled - or get a new compiler."}], "answers": [{"tags": [], "owner": {"reputation": 6975, "user_id": 3121023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52448806175b9aa66c86d40cf0829f1?s=128&d=identicon&r=PG&f=1", "display_name": "user3121023", "link": "https://stackoverflow.com/users/3121023/user3121023"}, "is_accepted": false, "score": 1, "last_activity_date": 1444293692, "last_edit_date": 1444293692, "creation_date": 1444264401, "answer_id": 33004697, "question_id": 33004262, "link": "https://stackoverflow.com/questions/33004262/converting-long-linear-data-into-data-in-c-by-modifying-indexes-in-array/33004697#33004697", "title": "Converting long linear data into data in C by modifying indexes in array", "body": "<p>This uses a scanset, <code>%[]</code>, to parse the string. The scan skips leading whitespace and then scans a <code>[</code>. Then the scanset reads characters that are not a <code>]</code>. Finally a <code>]</code> is scanned. The <code>%n</code> specifier reports the number of characters processed and that is added to offset to advance through the string. The 4999 prevents writing too many characters to the string [5000].</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint extract ( char* longstring,char (*extr)[5000]) {\n    int used = 0;\n    int offset = 0;\n    int si = 0;\n\n    while ( ( sscanf ( longstring + offset, \" [%4999[^]]]%n\", extr[si], &amp;used)) == 1) {\n         //one item successfully scanned\n        si++;\n        offset += used;\n        if ( si &gt; 20) {\n            break;\n        }\n    }\n    return si;\n}\n\nint main( int argc, char *argv[])\n{\n    char ext[20][5000];\n    int i = 0;\n    int result = 0;\n\n    result = extract(\"[a] [b] [ab] [abc]\", ext);\n    for ( i = 0; i &lt; result; i++) {\n        printf(\"ext[%d]  %s\\n\",i,ext[i]);\n    }\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 2016, "user_id": 5141989, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/3dPUW.jpg?s=128&g=1", "display_name": "Mike -- No longer here", "link": "https://stackoverflow.com/users/5141989/mike-no-longer-here"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1444293692, "creation_date": 1444261531, "last_edit_date": 1444269336, "question_id": 33004262, "link": "https://stackoverflow.com/questions/33004262/converting-long-linear-data-into-data-in-c-by-modifying-indexes-in-array", "title": "Converting long linear data into data in C by modifying indexes in array", "body": "<p>I'm trying to organize chunks of an apache log file into an array. For example, assume my apache file has a line like this:</p>\n\n<pre><code>[a] [b] [ab] [abc] file not found: /something\n</code></pre>\n\n<p>What I want to achieve is an array (let's name it ext) so that:</p>\n\n<pre><code>ext[0] = a\next[1] = b\next[2] = ab\next[3] = abc\n</code></pre>\n\n<p>I then reserve enough space for 20 entries at 5000 characters each via:</p>\n\n<pre><code>char ext[20][5000];\n</code></pre>\n\n<p>Then I attempt to call my extraction function as follows:</p>\n\n<pre><code>extract(\"[a] [b] [ab] [abc]\",18,ext);\n</code></pre>\n\n<p>Ideally, the string is replaced with the variable holding the data and the 18 is replaced with the variable showing the actual string size, but I'm using this data as an example.</p>\n\n<p>The extract function won't compile.</p>\n\n<p>It's complaining that in:</p>\n\n<pre><code>char s[20][5000]=*extr,*p,*l=longstring;\n</code></pre>\n\n<p>there's an invalid initializer. I'm guessing <code>s[20][5000]=*extr</code> is it, but I'm trying to initialize a character array with index values then I want to pass it onto the function caller</p>\n\n<p>It then complains: </p>\n\n<pre><code>warning: passing argument 3 of 'extract' from incompatible pointer type\n</code></pre>\n\n<blockquote>\n  <p>Am I forced to strictly use pointers and mathematics to calculate offsets or is there a way to pass actual char array with the ability to modify them using index values like I tried to do?</p>\n</blockquote>\n\n<pre><code>long extract(char* longstring,long sz,char **extr){\n    unsigned long sect=0,si=0,ssi=0;\n    char s[20][5000]=*extr,*p,*l=longstring;\n    while (sz-- &gt; 0){\n        if (*l=='['){sect=1;p=s[si++];if (si &gt; 20){break;}}\n        if (*l==']'){sect=0;}else{\n        if (sect==1){*p++=*l;}\n        }\n        l++;\n    }\n}\n</code></pre>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>As per suggested, I made minor changes and my code is now as follows:</p>\n\n<p>Mainline:</p>\n\n<pre><code>char ext[20][5000];\nextract(\"[a] [b] [ab] [abc]\",18,(char**)ext);\nprintf(\"%s\\n\",ext);\nreturn 0;\n</code></pre>\n\n<p>Function:</p>\n\n<pre><code>long extract(char* longstring, long sz, char **extr) {\n    unsigned long sect = 0, si = 0, ssi = 0;\n    char **s = extr, *p, *l = longstring;\n    while (sz-- &gt; 0) {\n        if (*l == '[') {\n            sect = 1;\n            p = s[si++];\n            if (si &gt; 20) {\n                break;\n            }\n        }\n        if (*l == ']') {\n            sect = 0;\n        } else {\n            if (sect == 1) {\n                *p++ = *l;\n            }\n        }\n        l++;\n    }\n}\n</code></pre>\n\n<p>And now I receive a segmentation fault. I'm not sure why when I set the offset of one string via <code>p=s[si++]</code> and then incremented it as I add data. I even changed <code>p=s[si++]</code> to <code>p=s[si++][0]</code> in an attempt to specifically want the address of the first character of a particular index but then the compiler shows \"warning: assignment makes pointer from integer without a cast\".</p>\n"}, {"tags": ["c", "clang", "llvm"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1444259518, "post_id": 33003928, "comment_id": 53832769, "body": "Which language are you using? C or C++?"}, {"owner": {"reputation": 83, "user_id": 3761728, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ba620671f972a605f5140eb4688f6736?s=128&d=identicon&r=PG&f=1", "display_name": "user3761728", "link": "https://stackoverflow.com/users/3761728/user3761728"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1444260076, "post_id": 33003928, "comment_id": 53832925, "body": "The target source code is C, llvm is C++"}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1444261697, "post_id": 33003928, "comment_id": 53833332, "body": "@user3761728 It doesn&#39;t matter that clang is written in C++ for this question. Removing the C++ tag."}], "answers": [{"tags": [], "owner": {"reputation": 945, "user_id": 5118930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeab5bfda2ad6ff6bb055eaa5966d7e?s=128&d=identicon&r=PG", "display_name": "Cheng Sun", "link": "https://stackoverflow.com/users/5118930/cheng-sun"}, "is_accepted": true, "score": 1, "last_activity_date": 1444313934, "creation_date": 1444313934, "answer_id": 33018446, "question_id": 33003928, "link": "https://stackoverflow.com/questions/33003928/allow-llvm-generate-code-to-access-a-global-array/33018446#33018446", "title": "allow llvm generate code to access a global array", "body": "<p>First read about how GEP works: <a href=\"http://llvm.org/docs/GetElementPtr.html\" rel=\"nofollow\">http://llvm.org/docs/GetElementPtr.html</a></p>\n\n<p>Then, to create the actual instruction, use the following APIs:</p>\n\n<ul>\n<li>Creating the GEP instruction with <code>GetElementPtrInst::CreateInBounds</code>: <a href=\"http://llvm.org/docs/doxygen/html/classllvm_1_1GetElementPtrInst.html#a700600a6f47998b6bd5f9a0f15813ac7\" rel=\"nofollow\">http://llvm.org/docs/doxygen/html/classllvm_1_1GetElementPtrInst.html#a700600a6f47998b6bd5f9a0f15813ac7</a></li>\n<li>Creating constant integers with <code>ConstantInt::get</code>: <a href=\"http://llvm.org/docs/doxygen/html/classllvm_1_1ConstantInt.html#a1c51933b9fb89c364a098fad544cba96\" rel=\"nofollow\">http://llvm.org/docs/doxygen/html/classllvm_1_1ConstantInt.html#a1c51933b9fb89c364a098fad544cba96</a></li>\n</ul>\n\n<p>For instance, to replicate the GEP in your example (without the store):</p>\n\n<pre><code>Value *counterarray = ...\n\nValue *indices[] = {\n    ConstantInt::get(Type::getInt32Ty(), 0),\n    ConstantInt::get(Type::getInt64Ty(), 1)\n};\n\nGetElementPtrInst *Inst = GetElementPtrInst::CreateInBounds(counterarray, indices);\n</code></pre>\n\n<p>(NB: untested code)</p>\n"}], "owner": {"reputation": 83, "user_id": 3761728, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ba620671f972a605f5140eb4688f6736?s=128&d=identicon&r=PG&f=1", "display_name": "user3761728", "link": "https://stackoverflow.com/users/3761728/user3761728"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 435, "favorite_count": 0, "accepted_answer_id": 33018446, "answer_count": 1, "score": 2, "last_activity_date": 1444313934, "creation_date": 1444259302, "last_edit_date": 1444261707, "question_id": 33003928, "link": "https://stackoverflow.com/questions/33003928/allow-llvm-generate-code-to-access-a-global-array", "title": "allow llvm generate code to access a global array", "body": "<p>I currently have the following code:</p>\n\n<pre><code>int counter_array[10] = {0};\n\nvoid increment_address (int*);\nvoid increment_array ();\nint main (){\n  increment_array();\n}\n\nincrement_address (int* ptr){\n  (*ptr) ++;\n}\n</code></pre>\n\n<p>I am trying use llvm to do instrumentation in order to generate code for the \"increment_array()\" function so that the function should pass the address of the second element of \"counter_array\" into the \"increment_address(int*)\" function.</p>\n\n<p>In other words, the increment_array generated should do something like the following:</p>\n\n<pre><code>void increment_array(){\n  int* array_pty = &amp;counter_array[1];\n  increment_address(array_ptr);\n}\n</code></pre>\n\n<p>By looking at the IR code It seems like it is done with \"getelementptr inbount\" instruction. However, I am unable to allocate the array to it. </p>\n\n<p>I was wondering how do I generate the IR code as below in the function generated?</p>\n\n<pre><code> store i32* getelementptr inbounds ([10 x i32]* @counterarray, i32 0, i64 1), i32** %ptr, align 8\n</code></pre>\n\n<p>Thank you all for the potential help.</p>\n"}, {"tags": ["c", "scipy", "cython", "lapack", "blas"], "comments": [{"owner": {"reputation": 62045, "user_id": 1461210, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fa93b9461ed24899945403cae69e02ee?s=128&d=identicon&r=PG", "display_name": "ali_m", "link": "https://stackoverflow.com/users/1461210/ali-m"}, "edited": false, "score": 1, "creation_date": 1444263352, "post_id": 33003710, "comment_id": 53833800, "body": "The failure occurs <a href=\"https://github.com/scipy/scipy/blob/master/scipy/linalg/tests/test_decomp_update.py#L327-L328\" rel=\"nofollow noreferrer\">here</a> as a result of an incorrect result of <code>scipy.linalg._decomp_update.qr_delete</code>, defined <a href=\"https://github.com/scipy/scipy/blob/master/scipy/linalg/_decomp_update.pyx.in#L1449-L1661\" rel=\"nofollow noreferrer\">here</a>. This module wraps a lot of calls to BLAS and LAPACK routines, so it is possible that the issue might be related to the BLAS/LAPACK libraries your version of scipy is linked against."}, {"owner": {"reputation": 8010, "user_id": 2623899, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/83ad78df36161a34b886c5b230098416?s=128&d=identicon&r=PG", "display_name": "dbliss", "link": "https://stackoverflow.com/users/2623899/dbliss"}, "reply_to_user": {"reputation": 62045, "user_id": 1461210, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fa93b9461ed24899945403cae69e02ee?s=128&d=identicon&r=PG", "display_name": "ali_m", "link": "https://stackoverflow.com/users/1461210/ali-m"}, "edited": false, "score": 0, "creation_date": 1444265547, "post_id": 33003710, "comment_id": 53834394, "body": "@ali_m do you think the issue is that i&#39;m using <code>atlas</code> on the cluster, but not on the laptop?"}, {"owner": {"reputation": 62045, "user_id": 1461210, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fa93b9461ed24899945403cae69e02ee?s=128&d=identicon&r=PG", "display_name": "ali_m", "link": "https://stackoverflow.com/users/1461210/ali-m"}, "edited": false, "score": 0, "creation_date": 1444267655, "post_id": 33003710, "comment_id": 53834961, "body": "That is definitely something you should look into. The error may be due to a numerical precision issue affecting the version of ATLAS installed on the cluster. If I were you, I would try building/linking numpy and scipy to a different BLAS/LAPACK implementation. Personally, I would use OpenBLAS, since it&#39;s much faster than CBLAS and ATLAS. You might find <a href=\"http://stackoverflow.com/a/21673585/1461210\">this</a> and/or <a href=\"http://stackoverflow.com/questions/11443302/compiling-numpy-with-openblas-integration/14391693#14391693\">this</a> helpful."}], "owner": {"reputation": 8010, "user_id": 2623899, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/83ad78df36161a34b886c5b230098416?s=128&d=identicon&r=PG", "display_name": "dbliss", "link": "https://stackoverflow.com/users/2623899/dbliss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 110, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1444264288, "creation_date": 1444258134, "last_edit_date": 1495542144, "question_id": 33003710, "link": "https://stackoverflow.com/questions/33003710/how-can-i-figure-out-how-scipy-is-generating-its-c-code", "title": "How can I figure out how scipy is generating its C code?", "body": "<p>I have the same exact versions of <code>numpy</code> (<code>1.9.3</code>) and <code>scipy</code> (<code>0.17.0.dev0+7dd2b91</code>) installed on my laptop and on a computing cluster.</p>\n\n<p>When I run <code>scipy.test</code> on my laptop, it completes without any failures.  But when I run <code>scipy.test</code> on the computing cluster, it completes with a single failure, reported in <a href=\"https://serverfault.com/q/727430/200822\">this question</a>.</p>\n\n<p>I've traced the cause of this failure to the file <code>scipy/linalg/_decomp_update.so</code>, which is a C file (I believe . . . or C++?), not a Python file.</p>\n\n<p>Hence, I've concluded that the C software on my laptop differs from that on the cluster.</p>\n\n<p>My question is, what is the relevant C software?  Which compiler does <code>scipy</code> use by default?  How do I check what version of C I have installed?</p>\n\n<h1>Update #1</h1>\n\n<p>Note that the <code>.so</code> file is compiled.  The original files in the Git repo from which I installed <code>scipy</code> are <code>_decomp_update.c</code>, <code>_decomp_update.pyx</code>, and <code>_decomp_update.pyx.in</code>.</p>\n\n<p>Perhaps the relevant difference between my laptop and the cluster isn't in the C code, but in the Python package that translates between C and Python (which in this case appears to be <code>cython</code>)?</p>\n\n<p>My laptop has <code>cython</code> version <code>0.23.2</code>.</p>\n\n<p>The cluster has <code>cython</code> version <code>0.22.1</code>.</p>\n\n<p>I am currently updating the cluster's version and re-running the tests.</p>\n\n<h1>Update #2</h1>\n\n<p>I now have <code>cython</code> version <code>0.23.3</code> installed on both my laptop and the cluster.</p>\n\n<p>The failure persists on the cluster; it continues not to occur on my laptop.</p>\n\n<p>Hence, the difference seems to be in the C implementation itself, not in Python or <code>cython</code>.</p>\n\n<p>Because the <a href=\"https://cython.org:8091/hudson/job/cython-docs/doclinks/1/src/quickstart/install.html\" rel=\"nofollow noreferrer\"><code>cython</code> docs</a> mention <code>gcc</code> as the standard C compiler it uses, it makes sense to me to check this.  </p>\n\n<p>On the cluster, I have <code>gcc</code> version <code>4.4.7</code>.</p>\n\n<p>On my laptop, I have <code>4.8.4</code>.</p>\n\n<p>In the future I may want to update the cluster's version and re-run the tests.</p>\n\n<h1>Update #3</h1>\n\n<p>I aborted the update to <code>gcc</code> in order to invetigate whether the cluster's versions of LAPACK and BLAS differ from those on my laptop (see the comment below).  I followed <a href=\"https://stackoverflow.com/a/9001951/2623899\">this answer</a>.</p>\n\n<p>This is what I see for my laptop:</p>\n\n<pre><code>$ cd /usr/local/lib/python2.7/dist-packages/scipy/linalg/\n$ ldd cython_lapack.so \nlinux-gate.so.1 =&gt;  (0xb7792000)\nliblapack.so.3 =&gt; /usr/lib/liblapack.so.3 (0xb7159000)\nlibblas.so.3 =&gt; /usr/lib/libblas.so.3 (0xb6a7e000)\nlibgfortran.so.3 =&gt; /usr/lib/i386-linux-gnu/libgfortran.so.3 (0xb697f000)\nlibm.so.6 =&gt; /lib/i386-linux-gnu/libm.so.6 (0xb6939000)\nlibgcc_s.so.1 =&gt; /lib/i386-linux-gnu/libgcc_s.so.1 (0xb691c000)\nlibc.so.6 =&gt; /lib/i386-linux-gnu/libc.so.6 (0xb676e000)\nlibpthread.so.0 =&gt; /lib/i386-linux-gnu/libpthread.so.0 (0xb6752000)\nlibquadmath.so.0 =&gt; /usr/lib/i386-linux-gnu/libquadmath.so.0 (0xb66d6000)\n/lib/ld-linux.so.2 (0xb7793000)\n</code></pre>\n\n<p>This is what I see on the cluster:</p>\n\n<pre><code>dbliss@nx3[~]&gt; cd lib/python2.7/site-packages/scipy/linalg/\ndbliss@nx3[linalg]&gt; ldd cython_lapack.so \n    linux-vdso.so.1 =&gt;  (0x00007ffe6bbec000)\n    liblapack.so.3 =&gt; /usr/lib64/atlas/liblapack.so.3 (0x00007fceb3f35000)\n    libblas.so.3 =&gt; /usr/lib64/libblas.so.3 (0x00007fceb3cdd000)\n    libpython2.7.so.1.0 =&gt; not found\n    libgfortran.so.3 =&gt; /usr/lib64/libgfortran.so.3 (0x00007fceb39eb000)\n    libm.so.6 =&gt; /lib64/libm.so.6 (0x00007fceb3766000)\n    libgcc_s.so.1 =&gt; /lib64/libgcc_s.so.1 (0x00007fceb3550000)\n    libc.so.6 =&gt; /lib64/libc.so.6 (0x00007fceb31bc000)\n    libf77blas.so.3 =&gt; /usr/lib64/atlas/libf77blas.so.3 (0x00007fceb2f9c000)\n    libcblas.so.3 =&gt; /usr/lib64/atlas/libcblas.so.3 (0x00007fceb2d7c000)\n    /lib64/ld-linux-x86-64.so.2 (0x000000377cc00000)\n    libatlas.so.3 =&gt; /usr/lib64/atlas/libatlas.so.3 (0x00007fceb2720000)\n    libpthread.so.0 =&gt; /lib64/libpthread.so.0 (0x00007fceb2502000)\n</code></pre>\n\n<p>There are differences here for sure, but are there any important differences?</p>\n"}, {"tags": ["c", "algorithm", "time-complexity"], "comments": [{"owner": {"reputation": 547, "user_id": 2620202, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1549766482/picture?type=large", "display_name": "Adam Suskin", "link": "https://stackoverflow.com/users/2620202/adam-suskin"}, "reply_to_user": {"reputation": 30265, "user_id": 3246555, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ziIu9.png?s=128&g=1", "display_name": "AlexD", "link": "https://stackoverflow.com/users/3246555/alexd"}, "edited": false, "score": 0, "creation_date": 1444256078, "post_id": 33003279, "comment_id": 53831593, "body": "Can you explain further? Why does it not matter that the operation of multiplication is not in O(1)?"}, {"owner": {"reputation": 12925, "user_id": 4668606, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V9l7Y.jpg?s=128&g=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/4668606/paul"}, "edited": false, "score": 0, "creation_date": 1444256102, "post_id": 33003279, "comment_id": 53831603, "body": "why do you even add that condition in the second examplecode? <code>(n + 1) * n</code> is always divisible by 2"}, {"owner": {"reputation": 14193, "user_id": 183203, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cf9ec57f64280ffe34ddd221d5c5151f?s=128&d=identicon&r=PG", "display_name": "antlersoft", "link": "https://stackoverflow.com/users/183203/antlersoft"}, "edited": false, "score": 0, "creation_date": 1444256156, "post_id": 33003279, "comment_id": 53831628, "body": "Multiplication is O(d) where d is the size of the multiplicands, but the number of data items n can easily be very much larger than d, so second option is preferred.  Also, multiplication is often done with hardware, so the coefficient of O(d) is very small..."}, {"owner": {"reputation": 547, "user_id": 2620202, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1549766482/picture?type=large", "display_name": "Adam Suskin", "link": "https://stackoverflow.com/users/2620202/adam-suskin"}, "reply_to_user": {"reputation": 12925, "user_id": 4668606, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V9l7Y.jpg?s=128&g=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/4668606/paul"}, "edited": false, "score": 0, "creation_date": 1444256198, "post_id": 33003279, "comment_id": 53831645, "body": "@Paul Because <code>(n+1) * n</code> could hypothetically cause integer overflow, so it is better to divide by the 2 first. But in order to avoid a possible truncation due to integer division, I check for which term, <code>n</code> or <code>n+1</code> is the term divisible by 2."}, {"owner": {"reputation": 6529, "user_id": 4252320, "user_type": "registered", "accept_rate": 59, "profile_image": "https://lh3.googleusercontent.com/-_DAs7Dtci9U/AAAAAAAAAAI/AAAAAAAAIf8/96ZNJAUF2Xk/photo.jpg?sz=128", "display_name": "ergonaut", "link": "https://stackoverflow.com/users/4252320/ergonaut"}, "edited": false, "score": 1, "creation_date": 1444256410, "post_id": 33003279, "comment_id": 53831732, "body": "Check this thread <a href=\"http://stackoverflow.com/questions/21819682/is-integer-multiplication-really-same-speed-as-addition-on-modern-cpu\" title=\"is integer multiplication really same speed as addition on modern cpu\">stackoverflow.com/questions/21819682/&hellip;</a> even though multiplication may be claimed to take longer, you are doing more additions in first case.  The second case is log-logarithmically faster, and therefore O(1)."}, {"owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "edited": false, "score": 1, "creation_date": 1444256455, "post_id": 33003279, "comment_id": 53831744, "body": "Give it a try. Take n=1000000000 and try the first and the second option. Which one was faster? (Ignore the overflow, concentrate on the run time)"}], "answers": [{"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1444256347, "post_id": 33003351, "comment_id": 53831706, "body": "That&#39;s only true for arbitrary-precision arithmetic. Computers normally use fixed precision, so multiplication is O(1)."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 2, "creation_date": 1444257936, "post_id": 33003351, "comment_id": 53832222, "body": "The value in this answer is that it clears up a misconception in the OP. The OP makes the patently false claim that <i>&quot;multiplication is technically in big-O &gt; O(n)&quot;</i>. In fact, as stated in this answer, multiplication <i>&quot;takes time O((log n)^2)&quot;</i>. The other misconception in the OP is that big-O even applies. Big-O analyzes asymptotic behavior for very large values of <code>n</code>. It doesn&#39;t really apply in a case where the multiplication is done (in highly parallelized hardware) as a single processor instruction."}, {"owner": {"reputation": 547, "user_id": 2620202, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1549766482/picture?type=large", "display_name": "Adam Suskin", "link": "https://stackoverflow.com/users/2620202/adam-suskin"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1444258006, "post_id": 33003351, "comment_id": 53832242, "body": "Thank you, this was the most helpful! If I am curious why it does not apply @user3386109, is there anywhere to find more information?"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1444258476, "post_id": 33003351, "comment_id": 53832397, "body": "Understanding when big-O applies is something that has to be learned over time. The biggest problem is that the concept of big-O is loosely defined as applying to &quot;large&quot; values of <code>n</code>, leaving room for debate as to the definition of &quot;large&quot;. In the case of multiplication, a large value of <code>n</code> needs to exceed the largest value that the processor can handle with a single instruction. Otherwise, the parallel hardware in the processor makes multiplication seem like an O(1) operation, when in fact the processor is doing a lot of work to create that illusion."}], "tags": [], "owner": {"reputation": 10150, "user_id": 341362, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/deb483e59f08e28083464e8e35a352db?s=128&d=identicon&r=PG", "display_name": "Charles", "link": "https://stackoverflow.com/users/341362/charles"}, "is_accepted": true, "score": 3, "last_activity_date": 1444256222, "creation_date": 1444256222, "answer_id": 33003351, "question_id": 33003279, "link": "https://stackoverflow.com/questions/33003279/algorithmic-complexity-of-multiplication/33003351#33003351", "title": "Algorithmic Complexity of Multiplication", "body": "<p>Schoolbook multiplication takes time O(b^2) where b is the number of bits in the numbers, so using the formula n(n+1)/2 takes time O((log n)^2) which is much faster than O(n).</p>\n"}], "owner": {"reputation": 547, "user_id": 2620202, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1549766482/picture?type=large", "display_name": "Adam Suskin", "link": "https://stackoverflow.com/users/2620202/adam-suskin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 905, "favorite_count": 0, "accepted_answer_id": 33003351, "answer_count": 1, "score": 0, "last_activity_date": 1444256222, "creation_date": 1444255856, "question_id": 33003279, "link": "https://stackoverflow.com/questions/33003279/algorithmic-complexity-of-multiplication", "title": "Algorithmic Complexity of Multiplication", "body": "<p><strong>Before this gets accused of being a duplicate</strong>, I have looked everywhere on StackOverflow for this answer and have not been able to find something that can explain this to me, so please read the entirety first.</p>\n\n<p>Suppose you need to write a function that takes an integer n and returns the sum of the positive integers from 1..n (I will use C).</p>\n\n<pre><code>int sum_of_integers(int n) {\n    int i, counter = 0;\n    for(i = 1; i &lt;= n; i++)\n        counter += i;\n    return counter;\n}\n</code></pre>\n\n<p>Obviously, this algorithm is in O(n) time, since the number of instructions it runs is proportional to the input size n.</p>\n\n<p>However, consider this implementation, using the mathematical truth that 1+...+n = (n)(n+1)/2.</p>\n\n<pre><code>int sum_of_integers(int n) {\n    //Trying to avoid potential int overflow\n    //And take into account int division\n    if(n % 2 == 0)\n        return (n/2)*(n+1);\n    return ((n+1)/2)*n;\n}\n</code></pre>\n\n<p><strong>My Question:</strong> Since multiplication is technically in big-O > O(n), is the first implementation preferred? Is the second implementation considered to be in O(1) or not?</p>\n\n<p>To me, because it does not matter what the size of n is for the second implementation since the same operations are being performed the same amount of times, I feel like it should be in O(1). On the other hand, the second implementation may actually be running more instructions based on the implementation of the multiplication operator.</p>\n"}, {"tags": ["c", "linux"], "owner": {"reputation": 175, "user_id": 1836746, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/074ed3bb7217c545d471e634962bbe7b?s=128&d=identicon&r=PG&f=1", "display_name": "Jerry Jacobs", "link": "https://stackoverflow.com/users/1836746/jerry-jacobs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 758, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1444282228, "creation_date": 1444255603, "last_edit_date": 1444282228, "question_id": 33003224, "link": "https://stackoverflow.com/questions/33003224/linux-liblvm2-lvm2app-h-usage", "title": "Linux liblvm2 lvm2app.h usage", "body": "<p>I'm trying to directly use the lvm2 library from C.\nI will not report any LVM physical volumes (pv) with the function: struct dm_list *lvm_get_pvs(lvm_t libh); </p>\n\n<p>The API header is found here: <a href=\"https://github.com/Distrotech/LVM2/blob/e5c248cf2a4ac330ddbfc06d9845e66650e7e142/liblvm/lvm2app.h\" rel=\"nofollow\">https://github.com/Distrotech/LVM2/blob/e5c248cf2a4ac330ddbfc06d9845e66650e7e142/liblvm/lvm2app.h</a></p>\n\n<p>It seems you have to iterrate over the device-mapper list with dm_list_foreach_item function and fetch every lvm_pv_list structure. But the dm_list_size returns zero.</p>\n\n<p>here is my code:</p>\n\n<pre><code>    #include &lt;lvm2app.h&gt;\n\n    struct lvm_pv_list *pvl;\n    struct dm_list *pvs;\n    pvs = lvm_list_pvs(lvm);\n    printf(\"pvs (%p) size: %u\\n\", pvs, dm_list_size(pvs));\n    dm_list_iterate_items(pvl, pvs) {\n            printf(\"- pv_name: %s, pv_uuid: %s\\n\",\n                    lvm_pv_get_name(pvl-&gt;pv), lvm_pv_get_uuid(pvl-&gt;pv));\n    }\n</code></pre>\n\n<p>compile with:\n    cc -olvmtest lvmtest.c -llvm2app -ldevice-mapper</p>\n\n<p>it returns:</p>\n\n<pre><code>pvs (0x645668) size: 0\n</code></pre>\n\n<p>which means the pvs is well initialized but it is it cannot be iterated because the size is zero reported by the device mapper function.</p>\n\n<p>The only lvm2app.h example I found was on the mailing list which only fetches the Volume Group coupled Physical Volumes (and not reads the physical volumes only). Even in the sourcetree there is no unit test for the function which i'm trying to use.</p>\n\n<p>See <a href=\"https://www.redhat.com/archives/lvm-devel/2010-September/msg00025.html\" rel=\"nofollow\">https://www.redhat.com/archives/lvm-devel/2010-September/msg00025.html</a></p>\n"}, {"tags": ["c", "arrays", "string", "printf"], "comments": [{"owner": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 1, "creation_date": 1444255621, "post_id": 33003196, "comment_id": 53831397, "body": "you have to allocate memory for <code>list[i]</code>"}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1444255654, "post_id": 33003196, "comment_id": 53831412, "body": "When you declare, <code>char *list[numNodes];</code> it allocates space for an array of <code>char</code> pointers, but they aren&#39;t initialized yet. You need to allocate them (<i>e.g.</i>, using <code>malloc</code> for each element: <code>for ( i = 0; i &lt; numNodes; i++ ) list[i] = malloc(stringSize);</code>)."}, {"owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 0, "creation_date": 1444255920, "post_id": 33003196, "comment_id": 53831535, "body": "Where do you allocate the memory for each not of list?  list is defined to be a pointer to an array of characters but the porinter doesn&#39;t point to anything.  You need to malloc or something.  What I would do is make a character array called temp on the stack that is big enough (maybe 128 characters?) like <code>char temp[128];</code> then sprintf into temp and then set <code>list[i] = strdup(temp);</code>"}, {"owner": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "edited": false, "score": 0, "creation_date": 1444257708, "post_id": 33003196, "comment_id": 53832160, "body": "Instead of <code>sprintf()</code>, use <code>asprintf()</code> which will automatically allocate a memory large enough to hold the resulting string including the null byte terminator. However, this is a GNU extension, also available in *BSD, but not in POSIX."}, {"owner": {"reputation": 1542, "user_id": 897728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e672e0d8de180128eed1b101ad8b955?s=128&d=identicon&r=PG", "display_name": "Happy Green Kid Naps", "link": "https://stackoverflow.com/users/897728/happy-green-kid-naps"}, "edited": false, "score": 0, "creation_date": 1444257867, "post_id": 33003196, "comment_id": 53832208, "body": "<b>I get a segmentation fault.</b> -- Lucky you!  Far worse things could have happened (e.g., appeared to &quot;work&quot; in a manner you thought was correct, only to fail fatally later)."}], "answers": [{"comments": [{"owner": {"reputation": 877, "user_id": 4517477, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/06afb12ac2dbc1b8867607eabe044420?s=128&d=identicon&r=PG&f=1", "display_name": "coder4lyf", "link": "https://stackoverflow.com/users/4517477/coder4lyf"}, "edited": false, "score": 0, "creation_date": 1444255798, "post_id": 33003234, "comment_id": 53831472, "body": "How can I do that without knowing the size of the string yet?"}, {"owner": {"reputation": 4418, "user_id": 5264388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/160f1b756f3f4a0ba9a2a58f4cce911b?s=128&d=identicon&r=PG", "display_name": "owacoder", "link": "https://stackoverflow.com/users/5264388/owacoder"}, "edited": false, "score": 3, "creation_date": 1444255884, "post_id": 33003234, "comment_id": 53831512, "body": "You can get the size of the formatted string first by using <code>snprintf</code>, then allocating, then using <code>sprintf</code> on the allocated string."}, {"owner": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "reply_to_user": {"reputation": 4418, "user_id": 5264388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/160f1b756f3f4a0ba9a2a58f4cce911b?s=128&d=identicon&r=PG", "display_name": "owacoder", "link": "https://stackoverflow.com/users/5264388/owacoder"}, "edited": false, "score": 0, "creation_date": 1444258061, "post_id": 33003234, "comment_id": 53832254, "body": "@owacoder - That will work using C99 standard as stated in <code>man snprintf(3)</code> - Concerning the return value of snprintf(), SUSv2 and C99 contradict each other: when snprintf() is called with size=0 then SUSv2 stipulates an unspecified return value less than 1, while C99 allows str to be NULL in this case, and gives the return value (as always) as the number of characters that would have been written in case the output string has been large enough.  - Nothing wrong with your suggestion just putting this note out there for  OP and future readers."}, {"owner": {"reputation": 4418, "user_id": 5264388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/160f1b756f3f4a0ba9a2a58f4cce911b?s=128&d=identicon&r=PG", "display_name": "owacoder", "link": "https://stackoverflow.com/users/5264388/owacoder"}, "reply_to_user": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "edited": false, "score": 0, "creation_date": 1444259856, "post_id": 33003234, "comment_id": 53832870, "body": "@alvits - So what&#39;s your suggestion for portability? Or is there a portable method?"}, {"owner": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "reply_to_user": {"reputation": 4418, "user_id": 5264388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/160f1b756f3f4a0ba9a2a58f4cce911b?s=128&d=identicon&r=PG", "display_name": "owacoder", "link": "https://stackoverflow.com/users/5264388/owacoder"}, "edited": false, "score": 0, "creation_date": 1444261085, "post_id": 33003234, "comment_id": 53833195, "body": "@owacoder - I haven&#39;t found a portable method yet. But I do write a local implementation of <code>asprintf()</code> wrapped within compiler directive to use on non GNU systems. In short, this local <code>asprintf()</code> will do what GNU extension <code>asprintf()</code> would have done. I would love to hear from anyone who has found a portable method."}], "tags": [], "owner": {"reputation": 14193, "user_id": 183203, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cf9ec57f64280ffe34ddd221d5c5151f?s=128&d=identicon&r=PG", "display_name": "antlersoft", "link": "https://stackoverflow.com/users/183203/antlersoft"}, "is_accepted": false, "score": 0, "last_activity_date": 1444255657, "creation_date": 1444255657, "answer_id": 33003234, "question_id": 33003196, "link": "https://stackoverflow.com/questions/33003196/cant-copy-string-to-an-array-of-strings-in-c/33003234#33003234", "title": "Can&#39;t copy string to an array of strings in C", "body": "<p>You are not initializing the array of char pointers-- sprintf is writing data to some random location.</p>\n\n<p>Each char pointer should be initialized to a buffer with malloc before you call sprintf.</p>\n"}, {"comments": [{"owner": {"reputation": 911, "user_id": 214063, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ZbqM8.png?s=128&g=1", "display_name": "Glenn Smith", "link": "https://stackoverflow.com/users/214063/glenn-smith"}, "edited": false, "score": 0, "creation_date": 1444263387, "post_id": 33003288, "comment_id": 53833807, "body": "Quick note: If you use GCC, there&#39;s also <code>asprintf</code> which will do the allocation for you."}], "tags": [], "owner": {"reputation": 5421, "user_id": 2317535, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Pleek.jpg?s=128&g=1", "display_name": "ashiquzzaman33", "link": "https://stackoverflow.com/users/2317535/ashiquzzaman33"}, "is_accepted": true, "score": 4, "last_activity_date": 1444256926, "last_edit_date": 1495535315, "creation_date": 1444255902, "answer_id": 33003288, "question_id": 33003196, "link": "https://stackoverflow.com/questions/33003196/cant-copy-string-to-an-array-of-strings-in-c/33003288#33003288", "title": "Can&#39;t copy string to an array of strings in C", "body": "<p>You only declare </p>\n\n<pre><code>char *list[numNodes];\n</code></pre>\n\n<p>but not allocate memory for them.  Before using <code>list[i]</code> allocate  memory with <code>malloc</code>. To know the size of generated string from <code>sprintf</code> use <code>snprintf</code>. Thanks  <a href=\"https://stackoverflow.com/users/3121023/user3121023\">user3121023</a> for finding us this function.</p>\n\n<pre><code>void listToArray(){\n   //create array of strings\n    char *list[numNodes];\n    int i = 0, n;\n\n  while(head != NULL){\n    printf(\"[%d] %s %s:%d\\n \", i, head-&gt;fileName, head-&gt;ip, head-&gt;port);\n\n    n = snprintf(NULL, 0, \"[%d] %s %s:%d\\n\", i, head-&gt;fileName, head-&gt;ip, head-&gt;port);\n    list[i] = malloc((n+1)*sizeof(char));\n\n    n = sprintf(list[i], \"[%d] %s %s:%d\\n\", i, head-&gt;fileName, head-&gt;ip, head-&gt;port);\n    head = head-&gt;next;\n    printf(\"%s\\n\", list[i]);\n    i++;\n\n }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "is_accepted": false, "score": 1, "last_activity_date": 1444258170, "creation_date": 1444258170, "answer_id": 33003723, "question_id": 33003196, "link": "https://stackoverflow.com/questions/33003196/cant-copy-string-to-an-array-of-strings-in-c/33003723#33003723", "title": "Can&#39;t copy string to an array of strings in C", "body": "<p>list is defined but each element has no/random pointer in it.  The above answers are complete but this can be simplified a bit:</p>\n\n<pre><code>void listToArray(){\n    //create array of strings\n    char *list[numNodes];\n    char buf[5000];\n    int i = 0, n;\n\n    while (head != NULL) {\n        snprintf(buf,sizeof(buf),\"[%d] %s %s:%d\\n \",\n            i,head-&gt;fileName,head-&gt;ip,head-&gt;port);\n\n        // add string to array\n        list[i] = strdup(buf);\n\n        // output\n        fputs(list[i],stdout);\n\n        head = head-&gt;next;\n        i++;\n    }\n}\n</code></pre>\n\n<p>You only need to do a single printf/sprintf.  That's the slow part.  Doing a single snprintf and strdup is faster and simpler than doing 2-3 *printf calls.  I'm guessing that you only want one output line per item and the rest were for debug.</p>\n"}], "owner": {"reputation": 877, "user_id": 4517477, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/06afb12ac2dbc1b8867607eabe044420?s=128&d=identicon&r=PG&f=1", "display_name": "coder4lyf", "link": "https://stackoverflow.com/users/4517477/coder4lyf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2136, "favorite_count": 0, "accepted_answer_id": 33003288, "answer_count": 3, "score": 3, "last_activity_date": 1444258170, "creation_date": 1444255478, "question_id": 33003196, "link": "https://stackoverflow.com/questions/33003196/cant-copy-string-to-an-array-of-strings-in-c", "title": "Can&#39;t copy string to an array of strings in C", "body": "<p>I'm trying to traverse through my linked list and combine each of the nodes fields into a string, and then add the string into an array of strings.</p>\n\n<pre><code>void listToArray(){\n   //create array of strings\n    char *list[numNodes];\n    int i = 0, n;\n\n  while(head != NULL){\n    // add string to array\n    printf(\"[%d] %s %s:%d\\n \", i, head-&gt;fileName, head-&gt;ip, head-&gt;port);\n    n = sprintf(list[i], \"[%d] %s %s:%d\\n\", i, head-&gt;fileName, head-&gt;ip, head-&gt;port);\n    head = head-&gt;next;\n    printf(\"%s\\n\", list[i]);\n    i++;\n\n }\n</code></pre>\n\n<p>The printf statement works fine, which shows that it is not the fields of node that are causing the problem, but when I do my sprintf statement to copy the string into the index of the array. I get a segmentation fault. </p>\n"}, {"tags": ["c", "julia"], "answers": [{"tags": [], "owner": {"reputation": 425, "user_id": 2266146, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d938adf8192bf2021b30593a8ab041e2?s=128&d=identicon&r=PG", "display_name": "meggart", "link": "https://stackoverflow.com/users/2266146/meggart"}, "is_accepted": true, "score": 3, "last_activity_date": 1446125330, "last_edit_date": 1446125330, "creation_date": 1444924324, "answer_id": 33153086, "question_id": 33003174, "link": "https://stackoverflow.com/questions/33003174/calling-a-c-function-from-julia-and-passing-a-2d-array-as-a-pointer-of-pointers/33153086#33153086", "title": "Calling a C function from Julia and passing a 2D array as a pointer of pointers as argument", "body": "<p>I will try to answer you questions one by one:</p>\n\n<blockquote>\n  <p>Is there any other way to pass a 2-dimensional matrix to a C function that expects an argument of the type int **arg?</p>\n</blockquote>\n\n<p>Yes. You have to add a method to julia's <code>cconvert</code> function so that it does the conversion from <code>Matrix{Cint}</code> to <code>Ptr{Ptr{Cint}}</code>. So you define:</p>\n\n<pre><code>Base.cconvert(::Type{Ptr{Ptr{Cint}}},xx2::Matrix{Cint})=Ref{Ptr{Cint}}([Ref(xx2,i) for i=1:size(xx2,1):length(xx2)])\n</code></pre>\n\n<p>(see next question for explanation) and can afterwards directly pass your matrix to ccall:</p>\n\n<pre><code>xx2=zeros(Cint,5,6)\nccall((:fill_matrix, \"mylib.so\"),Void, (Ptr{Ptr{Cint}}, Cint, Cint), xx2, 6,5)\n</code></pre>\n\n<p>However, I would suggest to be very conservative in which cconvert methods you overwrite, because other julia code might expect the original behavior. </p>\n\n<blockquote>\n  <p>If not, how can you transform an already existing 2-dimensional array of Julia to the array of arrays structure of C?</p>\n</blockquote>\n\n<p>The following should work: You generate an Array of pointers to every column of your matrix, so in julia-0.4:</p>\n\n<pre><code>xx2=zeros(Cint,5,6)\nrefAr=[Ref(xx2,i) for i=1:size(xx2,1):length(xx2)]\nccall((:fill_matrix, \"mylib.so\"),Void, (Ptr{Ptr{Cint}}, Cint, Cint), refAr, 6,5)\n</code></pre>\n\n<p>Now the matrix <code>xx2</code> is filled by the C function. Note that in julia v0.3 you have to replace <code>Ref(xx2,i)</code> with <code>pointer(xx2,i)</code></p>\n\n<blockquote>\n  <p>and the other way around?</p>\n</blockquote>\n\n<p>I don't think this is generally possible. In order to construct a julia 2D array, the data must be in a contiguous block of memory. If you are REALLY confident this is the case you can do:</p>\n\n<pre><code>p=pointer(refAr)  # This is a Ptr{Ptr{Cint}} representing the int**\naa=pointer_to_array(p,6,false)\nbb=pointer_to_array(aa[1],(5,6),false)\n</code></pre>\n\n<p>Which returns the original matrix. Here, the last argument to <code>pointer_to_array</code> determines, if Julia takes the ownership of the array and the data should be freed by Julia's gc. </p>\n"}, {"tags": [], "owner": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1444925555, "creation_date": 1444925555, "answer_id": 33153511, "question_id": 33003174, "link": "https://stackoverflow.com/questions/33003174/calling-a-c-function-from-julia-and-passing-a-2d-array-as-a-pointer-of-pointers/33153511#33153511", "title": "Calling a C function from Julia and passing a 2D array as a pointer of pointers as argument", "body": "<p>I'm not into Julia, but C definitely allows you to pass around multidimensional arrays:</p>\n\n<pre><code>void fill_matrix(int row, int col, int (*arr)[col]) {\n  for (int i=0; i&lt;row; i++){\n    for (int j=0; j&lt;col; j++){\n      arr[i][j] = arr[i][j] + i + j*10;\n    }\n  }\n}\n\n//and the call of the function above:\nint width = 7, height = 5, matrix[height][width];\nfill_matrix(height, width, matrix);\n</code></pre>\n\n<p>The point is, that there is no pointer array involved, the expression <code>arr[i][j]</code> will be evaluated as <code>arr[i*col + j]</code> by virtue of the array pointer type used to declare <code>arr</code>. The data is simply contiguous in memory.</p>\n\n<p>Now, I don't know whether Julia allows you to interface with a C function that takes an array pointer argument like this, but you may try to find out. It might also be necessary to swap the array indices, that depends on whether Julia stores its matrices in column-first or row-first order. In either case, it should be easy to find out by trying.</p>\n"}], "owner": {"reputation": 2499, "user_id": 3406193, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2b993e9da958053d7008623fc2a4d8f6?s=128&d=identicon&r=PG&f=1", "display_name": "mgab", "link": "https://stackoverflow.com/users/3406193/mgab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2112, "favorite_count": 0, "accepted_answer_id": 33153086, "answer_count": 2, "score": 8, "last_activity_date": 1446125330, "creation_date": 1444255383, "question_id": 33003174, "link": "https://stackoverflow.com/questions/33003174/calling-a-c-function-from-julia-and-passing-a-2d-array-as-a-pointer-of-pointers", "title": "Calling a C function from Julia and passing a 2D array as a pointer of pointers as argument", "body": "<h3>The background</h3>\n\n<p>I'm trying to use the <code>ccall</code> Julia function to use code written in C. \nI know how to pass an array as an argument to a function that expects <code>int *arg</code>. For example, trying to use this C function</p>\n\n<pre><code>void sum_one(int *arr, int len)\n{\n  for (int i=0; i&lt;len; i++){\n    arr[i]++;\n  }\n}\n</code></pre>\n\n<p>this Julia code works</p>\n\n<pre><code>x = collect(Cint, 1:5)\nccall((:sum_one, \"/path/to/mylib.so\"), Void, (Ptr{Cint}, Cint), x, 5)\n</code></pre>\n\n<h3>The problem</h3>\n\n<p>It doesn't seem to be so straight forward with C functions that expect a pointer to a pointer (<code>int **arg</code>) to be used as a 2-dimensional matrix. Say this one</p>\n\n<pre><code>void fill_matrix(int **arr, int row, int col)\n{\n  for (int i=0; i&lt;row; i++){\n    for (int j=0; j&lt;col; j++){\n      arr[i][j] = arr[i][j] + i + j*10;\n    }\n  }\n}\n</code></pre>\n\n<p>Here, I needed to create an <strong>Array of Arrays</strong> so that the C code would accept it:</p>\n\n<pre><code>xx = [zeros(Cint, 5) for i in 1:6]\nccall((:fill_matrix, \"/path/to/mylib.so\"),\n       Void, (Ptr{Ptr{Cint}}, Cint, Cint), xx, 6,5)\n</code></pre>\n\n<p>But this structure structure is not very convenient from the Julia side.</p>\n\n<h3>The question(s)</h3>\n\n<ul>\n<li>Is there any other way to pass a 2-dimensional matrix to a C function that expects an argument of the type <code>int **arg</code>?</li>\n<li>If not, how can you transform an already existing <em>2-dimensional array of Julia</em> to the <em>array of arrays</em> structure of C?</li>\n<li>and the other way around?</li>\n</ul>\n"}, {"tags": ["c", "encryption", "cryptography", "cbc-mode", "nettle"], "comments": [{"owner": {"reputation": 36469, "user_id": 238704, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VgOZI.png?s=128&g=1", "display_name": "President James K. Polk", "link": "https://stackoverflow.com/users/238704/president-james-k-polk"}, "edited": false, "score": 2, "creation_date": 1444258811, "post_id": 33003118, "comment_id": 53832519, "body": "I&#39;m not familiar with this library but you probably need to reset the IV before the start of decryption."}, {"owner": {"reputation": 79299, "user_id": 589259, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1", "display_name": "Maarten Bodewes", "link": "https://stackoverflow.com/users/589259/maarten-bodewes"}, "reply_to_user": {"reputation": 36469, "user_id": 238704, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VgOZI.png?s=128&g=1", "display_name": "President James K. Polk", "link": "https://stackoverflow.com/users/238704/president-james-k-polk"}, "edited": false, "score": 1, "creation_date": 1444392626, "post_id": 33003118, "comment_id": 53896512, "body": "@JamesKPolk A quick lookup proved you crypto instinct to be correct :)"}, {"owner": {"reputation": 11805, "user_id": 506405, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/30d7d4c13abcce7567310133134b829c?s=128&d=identicon&r=PG", "display_name": "shoen", "link": "https://stackoverflow.com/users/506405/shoen"}, "edited": false, "score": 0, "creation_date": 1444424066, "post_id": 33003118, "comment_id": 53914900, "body": "superb, thanks guys, CBC_SET_IV(&amp;ctx, iv); before decryption solved the issue :)"}], "answers": [{"tags": [], "owner": {"reputation": 79299, "user_id": 589259, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1", "display_name": "Maarten Bodewes", "link": "https://stackoverflow.com/users/589259/maarten-bodewes"}, "is_accepted": true, "score": 2, "last_activity_date": 1444392596, "creation_date": 1444392596, "answer_id": 33037935, "question_id": 33003118, "link": "https://stackoverflow.com/questions/33003118/nettle-twofish-cbc/33037935#33037935", "title": "nettle twofish CBC", "body": "<p>James is right: you need to set the IV again before decryption. From the Nettle documentation:</p>\n\n<blockquote>\n  <p>The final ciphertext block processed is copied into <code>iv</code> before returning, so that large message be processed be a sequence of calls to <code>cbc_encrypt</code>.</p>\n</blockquote>\n\n<p>I.e. the IV inside the crypto context is lost and replaced by the last block of ciphertext. Hence you need to set it to the correct value again.</p>\n\n<p>Nettle is a low level library, so this construct makes sense; higher level libraries may use streaming or assume that you always provide the complete plaintext/ciphertext in the call.</p>\n"}], "owner": {"reputation": 11805, "user_id": 506405, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/30d7d4c13abcce7567310133134b829c?s=128&d=identicon&r=PG", "display_name": "shoen", "link": "https://stackoverflow.com/users/506405/shoen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 0, "accepted_answer_id": 33037935, "answer_count": 1, "score": 1, "last_activity_date": 1444392596, "creation_date": 1444255153, "last_edit_date": 1444282569, "question_id": 33003118, "link": "https://stackoverflow.com/questions/33003118/nettle-twofish-cbc", "title": "nettle twofish CBC", "body": "<p>I had not problems with using nettle's twofish with standard ecb mode however i'm not sure what's wrong with this cbc mode? The decrypted message will not match the original. (using some hardcoded values like iv just for test purposes).</p>\n\n<p><a href=\"https://www.lysator.liu.se/~nisse/nettle/nettle.html\" rel=\"nofollow\">https://www.lysator.liu.se/~nisse/nettle/nettle.html</a></p>\n\n<pre><code>    const uint8_t key[TWOFISH_KEY_SIZE] = {\n        0xea, 0xad, 0xdd, 0x6c, 0x32, 0x5a, 0xdc, 0x4f, 0x01, 0x5b, 0x4c,\n        0xde, 0xbb, 0x45, 0xc9, 0xe5, 0x5a, 0xb7, 0x5f, 0x3b, 0x01, 0x9a,\n        0xf8, 0x39, 0xd0, 0x74, 0x05, 0xeb, 0xf1, 0xaa, 0xa7, 0x67};\n    const uint8_t src[TWOFISH_BLOCK_SIZE] = {\n        0x3a, 0x53, 0xec, 0xae, 0xc0, 0xcf, 0xd3, 0xd8,\n        0xae, 0x05, 0x5d, 0xc0, 0x07, 0x3c, 0x04, 0x0d};\n    const uint8_t iv[TWOFISH_BLOCK_SIZE] = {\n        0xa0, 0xfb, 0x59, 0x3d, 0x70, 0x98, 0xdf, 0x8f,\n        0xff, 0xa0, 0x3b, 0xd5, 0xc5, 0x8b, 0x2c, 0x45};\n    uint8_t encrypted[TWOFISH_BLOCK_SIZE];\n    uint8_t decrypted[TWOFISH_BLOCK_SIZE];\n\n    struct CBC_CTX(struct twofish_ctx, TWOFISH_BLOCK_SIZE) ctx;\n    twofish256_set_key(&amp;ctx.ctx, key);\n    CBC_SET_IV(&amp;ctx, iv);\n\n    CBC_ENCRYPT(&amp;ctx, twofish_encrypt, TWOFISH_BLOCK_SIZE, encrypted, src);\n    CBC_DECRYPT(&amp;ctx, twofish_decrypt, TWOFISH_BLOCK_SIZE, decrypted,\n                encrypted);\n\n    for(int i = 0; i &lt; TWOFISH_BLOCK_SIZE; i++) {\n        printf(\"\\n%hhX\\n\", src[i]);\n        printf(\"%hhX\\n\", encrypted[i]);\n        printf(\"%hhX\\n-------------------\", decrypted[i]);\n    }\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "edited": false, "score": 0, "creation_date": 1444264948, "post_id": 33003060, "comment_id": 53834234, "body": "Did you include the proper header files? What does <code>gcc</code> say when <code>-Wall</code> is passed to it? Where does the error occur when you run <code>strace</code> against it?"}, {"owner": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "edited": false, "score": 0, "creation_date": 1444265284, "post_id": 33003060, "comment_id": 53834313, "body": "The filename in <code>fopen()</code> is relative path. Does the path exist? Did you check if <code>fopen()</code> returns non-NULL file desc?"}, {"owner": {"reputation": 33, "user_id": 5420498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4e8f7fcb384716913c938c6a52dbd581?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Bravo", "link": "https://stackoverflow.com/users/5420498/juan-bravo"}, "reply_to_user": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "edited": false, "score": 0, "creation_date": 1444310366, "post_id": 33003060, "comment_id": 53856995, "body": "I just checked and &#39;fopen()&#39; returns a NULL file. My header fies are &#39;#include &lt;stdio.h&gt; #include &lt;fcntl.h&gt; #include &lt;unistd.h&gt; #include &lt;math.h&gt; #include &lt;stdint.h&gt; #include &lt;string.h&gt; #include &lt;sys/ioctl.h&gt; #include &lt;linux/i2c-dev.h&gt;&#39;"}, {"owner": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "edited": false, "score": 0, "creation_date": 1444317844, "post_id": 33003060, "comment_id": 53862795, "body": "<code>fopen()</code> return <code>NULL</code> because it can&#39;t create file in inexistent directory. Use full path instead of relative path in specifying file. Or don&#39;t specify a path and file will be created in current working directory."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 5420498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4e8f7fcb384716913c938c6a52dbd581?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Bravo", "link": "https://stackoverflow.com/users/5420498/juan-bravo"}, "edited": false, "score": 0, "creation_date": 1444255692, "post_id": 33003137, "comment_id": 53831432, "body": "No sorry i im using    fprintf(f,&quot;Datos leidos del sensor&quot;) and i have that problema the error was not that."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 33, "user_id": 5420498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4e8f7fcb384716913c938c6a52dbd581?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Bravo", "link": "https://stackoverflow.com/users/5420498/juan-bravo"}, "edited": false, "score": 0, "creation_date": 1444255960, "post_id": 33003137, "comment_id": 53831545, "body": "@Juan Bravo so that&#39;s NOT your code? OK since the <code>fprintf</code> is your problem, why don&#39;t you check <code>f</code> returned by <code>fopen()</code>?"}, {"owner": {"reputation": 33, "user_id": 5420498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4e8f7fcb384716913c938c6a52dbd581?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Bravo", "link": "https://stackoverflow.com/users/5420498/juan-bravo"}, "edited": false, "score": 0, "creation_date": 1444256015, "post_id": 33003137, "comment_id": 53831568, "body": "I wrote my code with fprintf(f,&quot;Datos del sensor&quot;). when I was writing the question I did not write well but in my code the function is written as you say"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 33, "user_id": 5420498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4e8f7fcb384716913c938c6a52dbd581?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Bravo", "link": "https://stackoverflow.com/users/5420498/juan-bravo"}, "edited": false, "score": 0, "creation_date": 1444256253, "post_id": 33003137, "comment_id": 53831666, "body": "@Juan Bravo so what about adding <code>if((f=fopen(&quot;.&#47;home&#47;debian&#47;Desktop&#47;Comunicacion&#47;Prueba.txt&quot;,&zwnj;&#8203;&quot;W&quot;)) == NULL) exit(1);</code> for example ? My point is you are having problems with <code>fprintf</code>, is this the ACTUAL CODE YOU WROTE or are you a time waster?"}, {"owner": {"reputation": 33, "user_id": 5420498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4e8f7fcb384716913c938c6a52dbd581?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Bravo", "link": "https://stackoverflow.com/users/5420498/juan-bravo"}, "edited": false, "score": 0, "creation_date": 1444256365, "post_id": 33003137, "comment_id": 53831718, "body": "How can I check if &#39;f&#39; returned by &#39;fopen()1 is correct? @Weather Vane"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 33, "user_id": 5420498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4e8f7fcb384716913c938c6a52dbd581?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Bravo", "link": "https://stackoverflow.com/users/5420498/juan-bravo"}, "edited": false, "score": 0, "creation_date": 1444256398, "post_id": 33003137, "comment_id": 53831728, "body": "By checking <code>f == NULL</code> as I just wrote in my above comment."}, {"owner": {"reputation": 33, "user_id": 5420498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4e8f7fcb384716913c938c6a52dbd581?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Bravo", "link": "https://stackoverflow.com/users/5420498/juan-bravo"}, "edited": false, "score": 0, "creation_date": 1444256623, "post_id": 33003137, "comment_id": 53831813, "body": "It appear this message: warning: incompatible implicit declaration of built-in function &#39;exit&#39;. What it mean? @Weather Vane"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 33, "user_id": 5420498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4e8f7fcb384716913c938c6a52dbd581?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Bravo", "link": "https://stackoverflow.com/users/5420498/juan-bravo"}, "edited": false, "score": 0, "creation_date": 1444257030, "post_id": 33003137, "comment_id": 53831950, "body": "@Juan Bravo OK, instead of that, after the line <code>f=fopen(...);</code> add `if(f==NULL) {printf(&quot;Failed to open file\\n&quot;); return 1;}"}, {"owner": {"reputation": 33, "user_id": 5420498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4e8f7fcb384716913c938c6a52dbd581?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Bravo", "link": "https://stackoverflow.com/users/5420498/juan-bravo"}, "edited": false, "score": 0, "creation_date": 1444257277, "post_id": 33003137, "comment_id": 53832034, "body": "Yes the problem is with &#39;f&#39;. But im using &#39;f=fopen(&quot;./home/debian/Desktop/Comunicacion/Prueba.txt&quot;,&quot;W&quot;&zwnj;&#8203;);&#39; what is wrong? I tried to used `if(f==NULL) {perror(&quot;Error&quot;);}&#39; and it say Error: Invalid argument @Weather Vane"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 33, "user_id": 5420498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4e8f7fcb384716913c938c6a52dbd581?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Bravo", "link": "https://stackoverflow.com/users/5420498/juan-bravo"}, "edited": false, "score": 0, "creation_date": 1444257748, "post_id": 33003137, "comment_id": 53832175, "body": "@Juan Bravo try changing &quot;W&quot; to &quot;w&quot; (lower case)."}, {"owner": {"reputation": 33, "user_id": 5420498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4e8f7fcb384716913c938c6a52dbd581?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Bravo", "link": "https://stackoverflow.com/users/5420498/juan-bravo"}, "edited": false, "score": 0, "creation_date": 1444257984, "post_id": 33003137, "comment_id": 53832236, "body": "No it doesn&#39;t work but i have another clue, when i change the order of &#39;archivo=I2C_open();&#39; and &#39;f=fopen(&quot;./home/debian/Desktop/Comunicacion/Prueba.txt&quot;,&quot;W&quot;&zwnj;&#8203;);&#39; now &#39;archivo&#39; is the problem no &#39;f&#39;. I think is something with the order I open the files. @Weather Vane"}, {"owner": {"reputation": 1725, "user_id": 1351828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a351d561f75641e458ce8f6dfd5b5227?s=128&d=identicon&r=PG", "display_name": "Adrian Krupa", "link": "https://stackoverflow.com/users/1351828/adrian-krupa"}, "edited": false, "score": 0, "creation_date": 1444273424, "post_id": 33003137, "comment_id": 53836381, "body": "Are you sure you want relative path? Not absolute path? <code>&quot;&#47;home&#47;...&quot;</code>"}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 1, "last_activity_date": 1444255214, "creation_date": 1444255214, "answer_id": 33003137, "question_id": 33003060, "link": "https://stackoverflow.com/questions/33003060/error-segmentation-fault-using-fopen-and-open/33003137#33003137", "title": "Error: Segmentation fault using fopen and open", "body": "<p>You have missed out the file pointer from the <code>fprintf</code> statement</p>\n\n<pre><code>fprintf(\"Datos leidos del sensor\");\n</code></pre>\n\n<p>Try </p>\n\n<pre><code>fprintf(f, \"Datos leidos del sensor\");\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "is_accepted": true, "score": 1, "last_activity_date": 1444270232, "creation_date": 1444270232, "answer_id": 33005466, "question_id": 33003060, "link": "https://stackoverflow.com/questions/33003060/error-segmentation-fault-using-fopen-and-open/33005466#33005466", "title": "Error: Segmentation fault using fopen and open", "body": "<p>Note:  You used <code>\"W\"</code> instead of <code>\"w\"</code> as the open mode to fopen.  That's the real problem.</p>\n\n<p>But, you should always check the \"f\" variable for NULL after the fopen.  I'm fairly sure that it's NULL [which means you couldn't open the file].  This is just good practice.  It's much easier than tracking down a segfault.</p>\n\n<p>You have:</p>\n\n<pre><code>f=fopen(\"./home/debian/Desktop/Comunicacion/Prueba.txt\",\"W\");\nfprintf(f,\"Datos leidos del sensor\");\n</code></pre>\n\n<p>Change this to:</p>\n\n<pre><code>f=fopen(\"./home/debian/Desktop/Comunicacion/Prueba.txt\",\"w\");\nif (f == NULL) {\n    perror(\"fopen\");\n    exit(1);\n}\nfprintf(f,\"Datos leidos del sensor\");\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 5420498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4e8f7fcb384716913c938c6a52dbd581?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Bravo", "link": "https://stackoverflow.com/users/5420498/juan-bravo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 943, "favorite_count": 0, "accepted_answer_id": 33005466, "answer_count": 2, "score": 0, "last_activity_date": 1444270232, "creation_date": 1444254914, "last_edit_date": 1444255804, "question_id": 33003060, "link": "https://stackoverflow.com/questions/33003060/error-segmentation-fault-using-fopen-and-open", "title": "Error: Segmentation fault using fopen and open", "body": "<p>I'm connecting a BeagleBoneBlack with a IMU using I2C protocol. I already read data in console great but when im trying to store data in a .txt file, it return me error: Segmentation fault.</p>\n\n<pre><code>int I2C_open()\n{\n    int file;\n    char *dev = \"/dev/i2c-1\";\n    if ((file=open(dev,O_RDWR))&lt;0);\n    {\n        perror(\"Abrir el canal\");\n    }\n    return file;\n}\n\nint main()\n{\n    archivo=I2C_open();\n    f=fopen(\"./home/debian/Desktop/Comunicacion/Prueba.txt\",\"W\");\n    fprintf(f,\"Datos leidos del sensor\");\n}\n</code></pre>\n\n<p>This is just part of the code because it's large. The problem is presented when i use the fprintf, when i commented that line the code run well. Im not sure if is because im using fopen while \"/dev/i2c-1\" is running. Please help</p>\n"}, {"tags": ["c", "x86", "sse", "simd"], "answers": [{"comments": [{"owner": {"reputation": 796, "user_id": 3109123, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/b430816649ae2033e8114850618b6ae8?s=128&d=identicon&r=PG&f=1", "display_name": "Feras", "link": "https://stackoverflow.com/users/3109123/feras"}, "edited": false, "score": 0, "creation_date": 1444300755, "post_id": 33003287, "comment_id": 53850037, "body": "I have segmentation fault with this     \t \tbase = (unsigned char *)img[0];\t \tX = (__m128i *) base; \ttest = (unsigned char *)img[1]; \tY = (__m128i *) test; \t*X= _mm_add_epi8(X[0],Y[1]);"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 796, "user_id": 3109123, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/b430816649ae2033e8114850618b6ae8?s=128&d=identicon&r=PG&f=1", "display_name": "Feras", "link": "https://stackoverflow.com/users/3109123/feras"}, "edited": false, "score": 0, "creation_date": 1444340123, "post_id": 33003287, "comment_id": 53875000, "body": "@Feras: you want <code>ptr=img</code>, not <code>ptr=img[0]</code>.  You need the address, not the value, of the first byte."}, {"owner": {"reputation": 796, "user_id": 3109123, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/b430816649ae2033e8114850618b6ae8?s=128&d=identicon&r=PG&f=1", "display_name": "Feras", "link": "https://stackoverflow.com/users/3109123/feras"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1444345081, "post_id": 33003287, "comment_id": 53876865, "body": "@PeterCordes img is 2D-array. so I was thinking to get the first row address by assigning img[0];"}], "tags": [], "owner": {"reputation": 5146, "user_id": 195447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/996483d0dfbd79f30c9b99056f27553c?s=128&d=identicon&r=PG", "display_name": "Elalfer", "link": "https://stackoverflow.com/users/195447/elalfer"}, "is_accepted": true, "score": 3, "last_activity_date": 1444255887, "creation_date": 1444255887, "answer_id": 33003287, "question_id": 33003045, "link": "https://stackoverflow.com/questions/33003045/how-to-define-the-reference-between-2d-array-and-1d-pointer-and-fix-sse2-incomp/33003287#33003287", "title": "How to define the reference between 2d-array and 1d pointer, and fix SSE2 incompatibility?", "body": "<p>There are at least 3 issues with this code:</p>\n\n<ul>\n<li>Error is in the last line <code>C = ...</code>. <code>_mm_add_epi8</code> doesn't accept <code>__m128i*</code>. Please try <code>*C = _mm_add_epi8(*X, *Y)</code></li>\n<li>There is only one <code>_</code> in the intrinsic name.</li>\n<li><code>C</code> pointer was not initialized and you might get Segmentation Violation. Initialize <code>C</code> or don't use pointers.</li>\n</ul>\n"}], "owner": {"reputation": 796, "user_id": 3109123, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/b430816649ae2033e8114850618b6ae8?s=128&d=identicon&r=PG&f=1", "display_name": "Feras", "link": "https://stackoverflow.com/users/3109123/feras"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "accepted_answer_id": 33003287, "answer_count": 1, "score": -2, "last_activity_date": 1483192261, "creation_date": 1444254839, "last_edit_date": 1483192261, "question_id": 33003045, "link": "https://stackoverflow.com/questions/33003045/how-to-define-the-reference-between-2d-array-and-1d-pointer-and-fix-sse2-incomp", "title": "How to define the reference between 2d-array and 1d pointer, and fix SSE2 incompatibility?", "body": "<p>I'm trying to step in using SIMD instructions. I wrote very simple code lines but it is always saying </p>\n\n<pre><code>char test[16];\n__m128i *X,*Y,*C;\nX =(__m128i*) test;\nY =(__m128i*) test;\nC = __mm_add_epi8(X,Y);\n</code></pre>\n\n<p>note: expected '__m128i' but argument is of type '__vector(2) long long int*'</p>\n\n<p>Edit:\nthe previous procedure was wrong due to assigning 2D-array to 1D pointer of the same size. I might having problem understanding the 2D array address and dereferencing.</p>\n\n<p>here is how the 2D-array is defined in my code. </p>\n\n<pre><code>unsigned char **img = malloc(16* sizeof(int *));\nfor (i=0;i&lt;16;i++) {\n         img[i] = malloc(16* sizeof(int *));\n}\n</code></pre>\n\n<p>I need now to copy 1 row of the 2D array to another pointer for the same width. \neither this </p>\n\n<pre><code>unsigned char test[16] __attribute__ ((aligned (16)));\n</code></pre>\n\n<p>or this </p>\n\n<pre><code>unsigned char *test = malloc(16 * sizeof(unsigned char *));\n</code></pre>\n\n<p>As I understood the next three lines they most give the same address, as the first and second line print the address of the first row in the 2D array and the third print the address of the first item in the first row which it is the same. </p>\n\n<pre><code>printf(\"%d\\n\", img); \nprintf(\"%d\\n\", img[0]);\nprintf(\"%d\\n\", &amp;img[0][0]);\n</code></pre>\n\n<p>if I'm using 16 unsigned char that means the next row must start after 16bit address but by printing (img+1), img[1] or img[1][0] it appears that the address start after 72bit, which I can't understand why. \nthought I wanted to copy the address of each row to another pointer and use it as single array I used. </p>\n\n<pre><code>test = img[0]; \ntest = img[1];\n.\n.\ntest = img[15]; \n</code></pre>\n\n<p>it allows me to access each field by using test[i];using the next coming code it works fine with test[0].</p>\n\n<pre><code> X = _mm_load_si128((__m128i*)test);\n</code></pre>\n\n<p>but I got segmentation fault with test[i] when i is bigger than 0. knowing that if I copy the row item by item using for loop below it works. any suggestion why ?</p>\n\n<pre><code>for(i=0; i&lt;16; i++)\n{ \n    test[i] = img[1][i];\n} \nX = _mm_load_si128((__m128i*)test);\n</code></pre>\n"}, {"tags": ["c", "windows", "winapi"], "comments": [{"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1444255894, "post_id": 33002978, "comment_id": 53831516, "body": "&quot;because I want them to be painted also but get covered by the white, and this style will prevent the button and the black clipped areas from being painted at all&quot; doesn&#39;t make sense. What&#39;s the point of painting them if you&#39;re only going to paint over them?"}, {"owner": {"reputation": 4829, "user_id": 5407848, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/u6f21.jpg?s=128&g=1", "display_name": "Accountant \u0645", "link": "https://stackoverflow.com/users/5407848/accountant-%d9%85"}, "reply_to_user": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1444256294, "post_id": 33002978, "comment_id": 53831683, "body": "@JonathanPotter because I&#39;m trying to build a GUI designer that generate codes in C language  and I need a tool to control other controls like buttons, listboxes, etc. - and I need this tool to cover the buttons and other child windows and take the mouse messages and to be hollow at the same time to let me see the control under neath it... I&#39;m attaching an image for it"}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 1, "creation_date": 1444257116, "post_id": 33002978, "comment_id": 53831982, "body": "In that case I would use <code>DrawThemeBackground</code> etc to render my own simulated button objects rather than try to cover up real buttons with some funky transparent-but-not sibling window."}, {"owner": {"reputation": 4829, "user_id": 5407848, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/u6f21.jpg?s=128&g=1", "display_name": "Accountant \u0645", "link": "https://stackoverflow.com/users/5407848/accountant-%d9%85"}, "reply_to_user": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1444257948, "post_id": 33002978, "comment_id": 53832226, "body": "@JonathanPotter I will try this approach , thank you very much"}], "owner": {"reputation": 4829, "user_id": 5407848, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/u6f21.jpg?s=128&g=1", "display_name": "Accountant \u0645", "link": "https://stackoverflow.com/users/5407848/accountant-%d9%85"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 109, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1566986131, "creation_date": 1444254480, "last_edit_date": 1566986131, "question_id": 33002978, "link": "https://stackoverflow.com/questions/33002978/how-to-control-painting-order-for-sibling-windows", "title": "how to control painting order for sibling windows", "body": "<p>I have 2 child windows (black RECT, and White RECT) and a button, as the image\n<a href=\"https://i.stack.imgur.com/NWrXk.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NWrXk.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>this windows were created in the order: (the button > the white > the black), and i didn't change the Z-Order as :</p>\n\n<pre><code>   //the Button Creation Code Is ommited \n    White = CreateWindowEx(0,ctrFace,\"\",WS_CHILD|WS_VISIBLE,\n        rc.left-10,  rc.top-10, rc.right-rc.left,  rc.bottom-rc.top,   GetParent(hwnd),0,Hinstance,0);\n    Black = CreateWindowEx(0,ctrUpDownNodes,\"\",WS_CHILD|WS_VISIBLE,\n        rc.left-20,  rc.top-20, rc.right-rc.left,  rc.bottom-rc.top,   GetParent(hwnd),0,Hinstance,0);\n\n    //SetWindowPos(White ,HWND_TOP,0,0,0,0,SWP_NOMOVE | SWP_NOSIZE | SWP_SHOWWINDOW);\n</code></pre>\n\n<p>Case 2 : Now when I set the white child on the top of z order by uncommenting the last <code>SetWindowPos</code> call I get this</p>\n\n<p><a href=\"https://i.stack.imgur.com/XSqPW.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XSqPW.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>the code after uncommenting the last call to put the white child on the top of z order is as :</p>\n\n<pre><code>    White = CreateWindowEx(0,ctrFace,\"\",WS_CHILD|WS_VISIBLE,\n        rc.left-10,  rc.top-10, rc.right-rc.left,  rc.bottom-rc.top,   GetParent(hwnd),0,Hinstance,0);\n    Black = CreateWindowEx(0,ctrUpDownNodes,\"\",WS_CHILD|WS_VISIBLE,\n        rc.left-20,  rc.top-20, rc.right-rc.left,  rc.bottom-rc.top,   GetParent(hwnd),0,Hinstance,0);\n    SetWindowPos(White ,HWND_TOP,0,0,0,0,SWP_NOMOVE | SWP_NOSIZE | SWP_SHOWWINDOW);\n</code></pre>\n\n<p><strong>What I want:</strong> </p>\n\n<ul>\n<li><p>I want The White child to block any mouse message from getting to it's siblings whenever the mouse is over the white child ( I get this done by butting the white child <code>HWND_TOP</code>)</p></li>\n<li><p>and I want the white child to be painted over the other siblings (the button, and the black child) .</p></li>\n</ul>\n\n<p><strong>The Problem:</strong> </p>\n\n<p>Whenever I call <code>SetWindowPos</code> with  <code>HWND_TOP</code> to make the window block the messages from other windows, The Window ALWAYS Painted underneath the other windows , but it blocks the messages from it's siblings correctly as I want though.</p>\n\n<p><strong>How Can I but the white on top of z order to take all mouse messages and get it painted on top of them too ?</strong></p>\n\n<p><em>Note: I can't Use <code>SW_CLIPSIBLINGS</code> for the black and button because I want them to be painted also but get covered by the white, and this style will prevent the button and the black clipped areas from being painted at all.</em></p>\n\n<p><strong>Note 2 : <code>HWND_TOP</code> make the window draw at the very buttom of it's siblings\nand <code>HWND_BUTTOM</code> makes the window draw at the very top of it's siblings !!! why?</strong></p>\n\n<p>EDIT: reacting to comments this is the tool that I want to make</p>\n\n<p><a href=\"https://i.stack.imgur.com/dIpf4.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dIpf4.jpg\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c", "pointers", "fork", "execl"], "comments": [{"owner": {"reputation": 5120, "user_id": 335918, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/35ca76160b03ee978b0b7b1d6e6c8c69?s=128&d=identicon&r=PG", "display_name": "xiamx", "link": "https://stackoverflow.com/users/335918/xiamx"}, "edited": false, "score": 0, "creation_date": 1444254442, "post_id": 33002906, "comment_id": 53830890, "body": "Maybe you can add what your desired behavior look like to help others help you."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 1, "creation_date": 1444256166, "post_id": 33002906, "comment_id": 53831631, "body": "Read the man page for <a href=\"http://linux.die.net/man/3/execl\" rel=\"nofollow noreferrer\">execl</a>. It clearly states that each of the args after the path need to be &quot;null-terminated strings that represent the argument list&quot;. You are passing a mix of pointers to integers and integers, not null-terminated strings."}], "answers": [{"comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1444256750, "post_id": 33003374, "comment_id": 53831841, "body": "The args are already in <code>argv</code>. Wouldn&#39;t it be better to advise OP to use that rather than go through the hoops of converting it to an int, allocate new buffers and converting it back to a string?"}], "tags": [], "owner": {"reputation": 2286, "user_id": 3228495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e0163d41bd310e00b055618846734b0?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/3228495/andrew"}, "is_accepted": false, "score": 0, "last_activity_date": 1444256342, "creation_date": 1444256342, "answer_id": 33003374, "question_id": 33002906, "link": "https://stackoverflow.com/questions/33002906/trouble-with-pointers-and-child-processes-in-c/33003374#33003374", "title": "Trouble with Pointers and child processes in C", "body": "<p>Here's the declaration for execl:</p>\n\n<pre><code>int execl(const char *path, const char *arg, ...);\n</code></pre>\n\n<p>And here's the description for <code>arg</code> and <code>...</code>:</p>\n\n<pre><code>   The  const  char *arg and subsequent ellipses in the execl(), execlp(),\n   and execle() functions can be thought of  as  arg0,  arg1,  ...,  argn.\n   Together  they  describe  a list of one or more pointers to null-termi\u2010\n   nated strings that represent the argument list available  to  the  exe\u2010\n   cuted  program.  The first argument, by convention, should point to the\n   filename associated with the file being executed.  The  list  of  argu\u2010\n   ments  must be terminated by a null pointer, and, since these are vari\u2010\n   adic functions, this pointer must be cast (char *) NULL.\n</code></pre>\n\n<p>So in your code, you pass <code>procpath</code> and <code>procname</code> which are correct, but your use of <code>input</code> is incorrect, <code>execl</code> does not take pointers to int, but pointer to null-terminated strings.</p>\n\n<p>You need to change <code>input</code> to be <code>char *input[size]</code>, then allocate memory for each entry in <code>input</code> before writing your arguments into it as a string, something like this:</p>\n\n<pre><code>char *input [size];\n/* .... */\nint bytes = snprintf (NULL, 0, \"%d\", m);\ninput [k] = malloc (bytes + 1);\nassert (input [k] != NULL);\nsnprintf (input [k], bytes + 1, \"%d\", m);\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5420484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8628f43f60e33846ead66f3cd0e278bd?s=128&d=identicon&r=PG&f=1", "display_name": "Michael ", "link": "https://stackoverflow.com/users/5420484/michael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 329, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1444256342, "creation_date": 1444254170, "last_edit_date": 1444254518, "question_id": 33002906, "link": "https://stackoverflow.com/questions/33002906/trouble-with-pointers-and-child-processes-in-c", "title": "Trouble with Pointers and child processes in C", "body": "<p>Everytime this code is run, 0's and a null are passed in as the arguments for my child process. I know its something to do with pointers, but I cant seem to populate my array and pass the arguments along. I've looked at it too long and I'm hoping someone can spot a dumb mistake.</p>\n\n<pre><code>/* exec example *\n * for CS-350   */\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;unistd.h&gt;\n\nint  main(int argc, char *argv[])\n{\n    int pid,i;\n    int sum;\n    int total = 0;\n    char  *procpath = \"slave\";\n    char  *procname = \"slave\";\n\n    int size = argc-1;\n\n    int input[size];\n\n\n    int k;\n    for (k = 0; k &lt; size; k++)\n    {\n        int m = (strtol(argv[k + 1], NULL, 10));\n        // printf(\"%d\", m);\n        input[k] = m;\n        printf(\"%d\", input[k]);\n    }\n    // size = (size + 1) / 2;\n    int count = 0;\n\n    while (size &gt; 1)\n    {\n\n        for (i = 0; i &lt; size; i = i + 2)\n        {\n            // create a child process\n            pid = fork();\n            if (pid ==  0)\n            {\n\n                 // child process execution code--shows exec family calls\n                if (i &lt; argc - 1)\n                {\n                    execl(procpath, procname, &amp;input[i], &amp;input[i + 1], pid,(char *) 0);\n                }\n                else\n                {\n                    execl(procpath, procname, &amp;input[i], 0, pid, (char *) 0);\n                }\n                // execvp(procname,argv);\n                // if exec returns, means the call has failed.\n                perror(\"execl failed to run slave program\");\n                exit(1);\n            }\n            else if (pid &gt; 0 )\n            {\n                 / / print out command line arguments\n                waitpid(-1, &amp;sum);\n            }\n            else\n            {\n                printf(\"call to fork failed, no child\\n\");\n                exit(-1);\n            }\n            sum = WEXITSTATUS(sum);\n\n            printf(\"MASTER: partial sum =  %d, and the pid of my slave =      %d\\n\\n\",sum,pid);\n\n            int l;\n            for (l = 0 ; l &lt; sizeof(input) / sizeof(input[0]) ; l ++)\n            {\n                printf(\"\\n%d\\n\", input[l]);\n            }\n            // printf(\"%d\", input[i / 2]);\n            input[(i + 1) / 2] = sum;\n            // printf(\"%d\", input[i / 2]);\n        }\n        size = (size + 1) / 2;\n    }\n    printf(\"MASTER: total sum =  %d\\n\",input[0]);\n    exit(0);\n}\n\n/* exec example-- slave *\n * for CS-350           */\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/types.h&gt;\n\nint  main(int argc, char *argv[])\n{\n    printf(\"hey whats up %s\",argv[1]);\n    int f = strtol(argv[1], NULL, 10);\n    int s = strtol(argv[2],NULL,10);\n    int sum = f + s;\n    printf(\"I'm the slave my pid is %s\\n\",argv[3]);\n    printf(\"SLAVE: first argumement = %d, second argument = %d, sum = %d\\n\", f, s, sum );\n\n    return sum;\n}\n</code></pre>\n"}, {"tags": ["c", "tizen", "tizen-native-app"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1444254317, "post_id": 33002797, "comment_id": 53830828, "body": "Did <code>sensor_h accelerometerSensor;</code> provide valid data for <code>sensor_create_listener()</code>?"}, {"owner": {"reputation": 59, "user_id": 4292641, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rr9Sc.jpg?s=128&g=1", "display_name": "AndrewOnFire", "link": "https://stackoverflow.com/users/4292641/andrewonfire"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1444255315, "post_id": 33002797, "comment_id": 53831276, "body": "The code works when used it in a UI app, so I have no reason to believe that the data would be invalid now. (yes?)"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1444255444, "post_id": 33002797, "comment_id": 53831326, "body": "It was just an idea, since <code>accelerometerSensor</code> is supposed to be a sensor handle. As a global, is it initialised to <code>0</code>?"}, {"owner": {"reputation": 59, "user_id": 4292641, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rr9Sc.jpg?s=128&g=1", "display_name": "AndrewOnFire", "link": "https://stackoverflow.com/users/4292641/andrewonfire"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1444256005, "post_id": 33002797, "comment_id": 53831563, "body": "You are right, there is some extra initialization needed that I left out from my reduced code(oops!), but even with the sensor_get_default_sensor function, the same problem happens."}], "answers": [{"tags": [], "owner": {"reputation": 2043, "user_id": 6472752, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rnh9C.png?s=128&g=1", "display_name": "Armaan-Ul-Islam", "link": "https://stackoverflow.com/users/6472752/armaan-ul-islam"}, "is_accepted": false, "score": 1, "last_activity_date": 1503306702, "creation_date": 1503306702, "answer_id": 45793304, "question_id": 33002797, "link": "https://stackoverflow.com/questions/33002797/tizen-native-service-app-silent-crash/45793304#45793304", "title": "Tizen native service app silent crash", "body": "<p>Copied &amp; Pasted your Code. I've ran the project several times in different emulators, Running well.</p>\n\n<p><a href=\"https://i.stack.imgur.com/npead.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/npead.png\" alt=\"enter image description here\"></a></p>\n\n<p>In addition:</p>\n\n<p>i) May Add feature: \"sensor.accelerometer\" in tizen-manifest.xml to avoid being killed by the OS.</p>\n\n<p>ii) include sensor.h </p>\n"}], "owner": {"reputation": 59, "user_id": 4292641, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rr9Sc.jpg?s=128&g=1", "display_name": "AndrewOnFire", "link": "https://stackoverflow.com/users/4292641/andrewonfire"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 329, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1503306702, "creation_date": 1444253695, "last_edit_date": 1449674231, "question_id": 33002797, "link": "https://stackoverflow.com/questions/33002797/tizen-native-service-app-silent-crash", "title": "Tizen native service app silent crash", "body": "<p>I am trying to set up a accelerometer service in Tizen 2.3.1 but it silently crashes before I can do anything. The \"sensor_create_listener\" function dies silently and never gets to my second debug statement. Any idea as to what is happening and how I can fix it?</p>\n\n<pre><code>sensor_h accelerometerSensor;\nsensor_listener_h accelerometerListener;\n\nbool service_app_create(void *data)\n{\n    //Set up the Accelerometer\n    sensor_get_default_sensor(SENSOR_ACCELEROMETER,accelerometerSensor);\n    dlog_print(DLOG_DEBUG, \"USR_TAG\", \"Creating...\");\n    sensor_create_listener(accelerometerSensor, &amp;accelerometerListener);\n    dlog_print(DLOG_DEBUG, \"USR_TAG\", \"Won't get here.\");\n\n    return true;\n}\n</code></pre>\n"}, {"tags": ["c", "file-io", "hex", "fwrite", "xxd"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1444253803, "post_id": 33002756, "comment_id": 53830569, "body": "Because <code>sizeof(scores)</code>  is not <code>3</code>, it is <code>12</code>. You are writing 12 elements each size 4 bytes = 48 bytes."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1444254561, "post_id": 33002756, "comment_id": 53830948, "body": "The file is clearly binary, not text."}, {"owner": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1484693793, "post_id": 33002756, "comment_id": 70612456, "body": "What does the size of an integer on your platform have to do with the format for your file?"}], "answers": [{"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1444254274, "post_id": 33002815, "comment_id": 53830809, "body": "or <code>fwrite(scores, 1, sizeof(scores), imageFilePtr);</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1444254769, "post_id": 33002815, "comment_id": 53831042, "body": "I&#39;ll toss in another &quot;may also use&quot; suggestion: <code>fwrite(scores, sizeof scores[0], sizeof scores&#47;sizeof scores[0], imageFilePtr);</code>.   Allows the return value to be the number of elements of <code>scores[]</code> in the rare case when more than 0 but less than all.  But that is more WET than DRY with <a href=\"http://stackoverflow.com/questions/33002756/c-fwrite-cant-open-file-because-it-contains-invalid-characters#comment53830809_33002815\">@Bamar</a>"}, {"owner": {"reputation": 1569, "user_id": 1041174, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/703cfa6b496597b3e303262dfd8434dd?s=128&d=identicon&r=PG", "display_name": "Vee", "link": "https://stackoverflow.com/users/1041174/vee"}, "edited": false, "score": 0, "creation_date": 1444322964, "post_id": 33002815, "comment_id": 53865879, "body": "Thanks, @Sahu.  Your solution for fwrite worked perfectly.  I&#39;m accepting waterjuice&#39;s answer below because he provided a clearer explanation and addressed the fact that fwrite creates a binary file (which is why I couldn&#39;t open the file with a text editor) while fprintf creates a text file."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 1569, "user_id": 1041174, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/703cfa6b496597b3e303262dfd8434dd?s=128&d=identicon&r=PG", "display_name": "Vee", "link": "https://stackoverflow.com/users/1041174/vee"}, "edited": false, "score": 0, "creation_date": 1444323498, "post_id": 33002815, "comment_id": 53866168, "body": "@Vee, that&#39;s perfectly alright. It&#39;s more important that you understand the issues and correct them appropriately."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 5, "last_activity_date": 1444255180, "last_edit_date": 1444255180, "creation_date": 1444253784, "answer_id": 33002815, "question_id": 33002756, "link": "https://stackoverflow.com/questions/33002756/c-fwrite-cant-open-file-because-it-contains-invalid-characters/33002815#33002815", "title": "C - fwrite - can&#39;t open file because it contains invalid characters", "body": "<pre><code>fwrite(scores, sizeof(int), sizeof(scores), imageFilePtr);\n                            ^^^^ Wrong\n</code></pre>\n\n<p>In your case, <code>sizeof(scores)</code> is <code>sizeof(int)*3</code>. What you need is just 3. You can use:</p>\n\n<pre><code>fwrite(scores, sizeof(int), 3, imageFilePtr);\n</code></pre>\n\n<p>or to be more robust, use:</p>\n\n<pre><code>fwrite(scores, sizeof(int), sizeof(scores)/sizeof(int), imageFilePtr);\n</code></pre>\n\n<p>You may also use:</p>\n\n<pre><code>fwrite(scores, 1, sizeof(scores), imageFilePtr);\n</code></pre>\n\n<p>or</p>\n\n<pre><code>fwrite(scores, sizeof scores[0], sizeof scores/sizeof scores[0], imageFilePtr);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1444270309, "post_id": 33005229, "comment_id": 53835628, "body": "1) By using <code>fwrite(scores, sizeof scores[0], ...</code>, code can avoid getting the type wrong.  2) <code>scores[i]</code> is an <code>int</code>, so <code>fprintf( imageFilePtr, &quot;%d\\n&quot;, scores[i] );</code> or make <code>scores[i]</code> an <code>unsigned</code>.  3) like the macro <code>NumOfElements</code>"}, {"owner": {"reputation": 710, "user_id": 5420934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a3ae2cd99bdff22a45b094e2811f34b?s=128&d=identicon&r=PG&f=1", "display_name": "waterjuice", "link": "https://stackoverflow.com/users/5420934/waterjuice"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1444271347, "post_id": 33005229, "comment_id": 53835857, "body": "Ah good point on the %d vs %u. My mistake, I always use unsigned ints 99.9% of time and so was just used to that."}, {"owner": {"reputation": 1569, "user_id": 1041174, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/703cfa6b496597b3e303262dfd8434dd?s=128&d=identicon&r=PG", "display_name": "Vee", "link": "https://stackoverflow.com/users/1041174/vee"}, "edited": false, "score": 0, "creation_date": 1444322990, "post_id": 33005229, "comment_id": 53865895, "body": "Thanks for the explanation, @waterjuice!"}], "tags": [], "owner": {"reputation": 710, "user_id": 5420934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a3ae2cd99bdff22a45b094e2811f34b?s=128&d=identicon&r=PG&f=1", "display_name": "waterjuice", "link": "https://stackoverflow.com/users/5420934/waterjuice"}, "is_accepted": true, "score": 1, "last_activity_date": 1444268466, "creation_date": 1444268466, "answer_id": 33005229, "question_id": 33002756, "link": "https://stackoverflow.com/questions/33002756/c-fwrite-cant-open-file-because-it-contains-invalid-characters/33005229#33005229", "title": "C - fwrite - can&#39;t open file because it contains invalid characters", "body": "<p>There are two problems I can see here. One is that you are trying to open a binary file in a text editor. The second is that you have a buffer read overflow when writing the binary file. \nI'll address the second one first.</p>\n\n<p>the fwrite function takes a \"size of element\" and a \"count of elements\" as parameters. You have put the size of element as sizeof(int) which is correct, however for the count you have done sizeof(scores) which is actually 3*sizeof(int), whereas you actually need the value 3. Assuming int size is 4 (32bit) then the count value is being set at 12. Which means it is trying to write 48 bytes to the file instead of 12. The additionally 36 bytes is a read overflow on the stack.</p>\n\n<p>To get the number of elements in array you can use: sizeof(scores)/sizeof(scores[0]). </p>\n\n<pre><code>fwrite(scores, sizeof(int), sizeof(scores)/sizeof(scores[0]), imageFilePtr);\n</code></pre>\n\n<p>I would use a macro for this so I could go</p>\n\n<pre><code>fwrite(scores, sizeof(int), NumOfElements(scores), imageFilePtr);\n</code></pre>\n\n<p>where NumOfElements is defined as:</p>\n\n<pre><code>#define NumOfElements(Array) (sizeof(Array)/sizeof(Array[0]))\n</code></pre>\n\n<p>Now for the first problem. I believe you were trying to write 3 integers into a text file. The fwrite function writes binary data. What you want to use is fprintf. This works the same way as printf but will let you write to a file. However you can not write an array of numbers with one fprintf, so you would have to have a loop.</p>\n\n<pre><code>for( i=0; i&lt;NumOfElements(scores); i++ )\n{\n    fprintf( imageFilePtr, \"%u\\n\", scores[i] );\n}\n</code></pre>\n\n<p>This will write each number into the file on a seperate line.</p>\n"}], "owner": {"reputation": 1569, "user_id": 1041174, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/703cfa6b496597b3e303262dfd8434dd?s=128&d=identicon&r=PG", "display_name": "Vee", "link": "https://stackoverflow.com/users/1041174/vee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1803, "favorite_count": 0, "accepted_answer_id": 33005229, "answer_count": 2, "score": -2, "last_activity_date": 1444268466, "creation_date": 1444253490, "question_id": 33002756, "link": "https://stackoverflow.com/questions/33002756/c-fwrite-cant-open-file-because-it-contains-invalid-characters", "title": "C - fwrite - can&#39;t open file because it contains invalid characters", "body": "<p>I'm writing an array of 3 integers to a file using C's fwrite function but when opening the output file with gedit (using Unicode UTF-8), I get the following error: </p>\n\n<pre><code>There was a problem opening the file.  The file you opened has invalid characters.  If you continue editing this file, you could corrupt the document.\n</code></pre>\n\n<p>Here's the relevant code snippet:</p>\n\n<pre><code>char* imageFile = \"image.txt\";\nFILE* imageFilePtr = fopen(imageFile, \"w\");\n\nint scores[3] = {69, 70, 71};\nfwrite(scores, sizeof(int), sizeof(scores), imageFilePtr);\n</code></pre>\n\n<p>When I use a hexadecimal reader such as \"xxd\", I get the following in my terminal:</p>\n\n<pre><code>0000000: 4500 0000 4600 0000 4700 0000 7031 7108  E...F...G...p1q.\n0000010: 0830 7108 2987 0408 2087 0408 0460 cebf  .0q.)... ....`..\n0000020: 0100 0000 0000 0000 0000 0000 0000 0000  ................\n</code></pre>\n\n<p>Keep in mind that the in my environment, sizeof(int) is 4 bytes.  Thus, I can see how 69, 70, and 71 in decimal are being printed to the file as 45, 46, and 47 in hex as xxd shows.  But, where are all the other bytes after \"4700 0000\" coming from?  And, why can't I open the output file, \"image.txt\", with a text editor to see a file that shows the decimal numbers, 69, 70, and 71 written inside?</p>\n"}, {"tags": ["c", "date", "directory", "dir", "stat"], "comments": [{"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1444253136, "post_id": 33002613, "comment_id": 53830292, "body": "you can stat a directory"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1444256341, "post_id": 33002613, "comment_id": 53831700, "body": "Not really understanding what your problem is. Just pass <code>args[1]</code> as the first parameter to <code>stat</code>. Or please clarify your question if that isn&#39;t what you need."}, {"owner": {"reputation": 1075, "user_id": 2591316, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/R42tM.jpg?s=128&g=1", "display_name": "maspinu", "link": "https://stackoverflow.com/users/2591316/maspinu"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1444290663, "post_id": 33002613, "comment_id": 53843282, "body": "@AlanAu Thank you I&#39;ve tried but i get a warning and my modified date doesn&#39;t show correctly ; I&#39;ve edited my question."}], "answers": [{"comments": [{"owner": {"reputation": 1075, "user_id": 2591316, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/R42tM.jpg?s=128&g=1", "display_name": "maspinu", "link": "https://stackoverflow.com/users/2591316/maspinu"}, "edited": false, "score": 0, "creation_date": 1444291263, "post_id": 33009881, "comment_id": 53843653, "body": "Nothing wrong , I was just wondering If I could use another method .. well that&#39;s what I wanted to know . Thank you."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 1075, "user_id": 2591316, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/R42tM.jpg?s=128&g=1", "display_name": "maspinu", "link": "https://stackoverflow.com/users/2591316/maspinu"}, "edited": false, "score": 0, "creation_date": 1444291479, "post_id": 33009881, "comment_id": 53843787, "body": "@Lazai Well, there&#39;s <code>fstat</code>, which takes a file descriptor, but I don&#39;t know of a way to get a file descriptor from <code>DIR *</code> either."}, {"owner": {"reputation": 1075, "user_id": 2591316, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/R42tM.jpg?s=128&g=1", "display_name": "maspinu", "link": "https://stackoverflow.com/users/2591316/maspinu"}, "edited": false, "score": 0, "creation_date": 1444291741, "post_id": 33009881, "comment_id": 53843947, "body": "Yeah well , at first I was thinking getting the folder&#39;s inode ... but don&#39;t know how this could help me."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 1, "last_activity_date": 1444291067, "creation_date": 1444291067, "answer_id": 33009881, "question_id": 33002613, "link": "https://stackoverflow.com/questions/33002613/passing-a-dir-as-argument-and-show-its-last-modified-date/33009881#33009881", "title": "Passing a dir as argument and show its last modified date", "body": "<p>The answer is no. You can't use a <code>DIR</code> with <code>stat</code>.</p>\n\n<p>What's wrong with passing the name of the directory?</p>\n"}], "owner": {"reputation": 1075, "user_id": 2591316, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/R42tM.jpg?s=128&g=1", "display_name": "maspinu", "link": "https://stackoverflow.com/users/2591316/maspinu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 299, "favorite_count": 0, "accepted_answer_id": 33009881, "answer_count": 1, "score": 0, "last_activity_date": 1444291067, "creation_date": 1444252838, "last_edit_date": 1444290949, "question_id": 33002613, "link": "https://stackoverflow.com/questions/33002613/passing-a-dir-as-argument-and-show-its-last-modified-date", "title": "Passing a dir as argument and show its last modified date", "body": "<p>OK, so I was thinking of a program that displays my folder's or file's last modified time; I succeeded doing that, but I passed only the path as argument.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;time.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/types.h&gt;\n\nint main(int count , char *args[]){\n    char buffer[50];\n    struct stat attr;\n    if(count &lt; 2){\n        printf(\"No parameters passed\");\n    }\n    else{\n        strcpy(buffer,args[1]);\n        stat(buffer,&amp;attr);\n        printf(\"Last modiffied date time : % s\" , ctime(&amp;attr.st_mtime));\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Which works! But I was wondering if I could do that using a DIR instead a char path.\nSomething like:</p>\n\n<pre><code>.........\nDIR *mydir;\nstruct dirent *dir;\ndir = opendir(args[1]);\n</code></pre>\n\n<p>NOTES: However I found out that the stat function that I used earlier (path as argument) has these parameters: </p>\n\n<pre><code>int stat(const char*restrict path, struct stat *restrict buf);\n</code></pre>\n\n<p>Which took me to this question:</p>\n\n<p>How can I really show the stat of the folder (in my case last modified date), if I can't use this function?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>My try so far using dirent:</p>\n\n<pre><code>..........\nDIR *mydir;\nstruct stat attr;\nmydir = opendir(args[1]);\nstat(mydir,&amp;attr);\nprintf(\"last modified is... %s\" , ctime(&amp;attr.st_mtime));\nreturn 0;\n</code></pre>\n\n<p>I get this warning:</p>\n\n<blockquote>\n<pre><code>warning: passing argument 1 of \u2018stat\u2019 from incompatible pointer type\n/usr/include/sys/stat.h:211: note: expected \u2018const char * __restrict__\u2019 but argument is of type \u2018struct DIR *\u2019\n</code></pre>\n</blockquote>\n"}, {"tags": ["c", "visual-studio-2012", "visual-c++", "c99"], "comments": [{"owner": {"reputation": 1380, "user_id": 1380279, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d4167d64417b6a25a85cb7a04980d4df?s=128&d=identicon&r=PG", "display_name": "Kamen Stoykov", "link": "https://stackoverflow.com/users/1380279/kamen-stoykov"}, "edited": false, "score": 1, "creation_date": 1444252947, "post_id": 33002591, "comment_id": 53830197, "body": "As far as I know MS compiler complains about fopen and other functions like this. According to Microsoft you should use fopen_s (_s stands for secure). Also you could try to hardcode the path to file to check if there is problem with fName variable."}, {"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 1, "creation_date": 1444253110, "post_id": 33002591, "comment_id": 53830276, "body": "Does <code>fName</code> have a proper terminator?"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 2, "creation_date": 1444253346, "post_id": 33002591, "comment_id": 53830379, "body": "Is <code>fName</code> equal to <code>NULL</code>?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 3, "creation_date": 1444253520, "post_id": 33002591, "comment_id": 53830458, "body": "Can you provide a MCVE with which we can replicate the fault?"}, {"owner": {"reputation": 169, "user_id": 1000160, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/7db142b0c83eb76153157ee86c33110c?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1000160/matt"}, "edited": false, "score": 0, "creation_date": 1444253960, "post_id": 33002591, "comment_id": 53830658, "body": "the value of fName is &quot;F:\\\\PROJECT_FILES\\\\ATS_ROFP_APPS\\\\737_MDS_REHOST\\\\ENVIRONME&zwnj;&#8203;NT\\\\APPS\\\\AOI\\\\b737m&zwnj;&#8203;ds.aoi\\\\exe\\\\L1_AOI_&zwnj;&#8203;Part.nvram&quot; - the file is similar to txt file though the extension if *.nvram"}, {"owner": {"reputation": 169, "user_id": 1000160, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/7db142b0c83eb76153157ee86c33110c?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1000160/matt"}, "edited": false, "score": 0, "creation_date": 1444254351, "post_id": 33002591, "comment_id": 53830847, "body": "even if I use fopen_s, it quits at the same function. I tried hardcoding the path also, but no luck.."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 2, "creation_date": 1444254705, "post_id": 33002591, "comment_id": 53831017, "body": "Two possibilities. 1) your program has undefined behavior prior to this point in the code. 2) there&#39;s some sort of permissions problem, or file system incompatibility at the given path. To check 1), put the <code>fopen</code> with a hardcoded path at the beginning of <code>main</code>. To check 2), try creating that file with a text editor."}, {"owner": {"reputation": 1515, "user_id": 3241481, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4FsW1.jpg?s=128&g=1", "display_name": "Naren Neelamegam", "link": "https://stackoverflow.com/users/3241481/naren-neelamegam"}, "edited": false, "score": 0, "creation_date": 1444302163, "post_id": 33002591, "comment_id": 53850975, "body": "Do you/your app have write access to that folder?"}, {"owner": {"reputation": 169, "user_id": 1000160, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/7db142b0c83eb76153157ee86c33110c?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1000160/matt"}, "edited": false, "score": 0, "creation_date": 1444312535, "post_id": 33002591, "comment_id": 53858678, "body": "Yes, I have write access to that folder and the fopen() also creates the file in that directory, but after creating the file, it exits without any return from fopen()"}], "owner": {"reputation": 169, "user_id": 1000160, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/7db142b0c83eb76153157ee86c33110c?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1000160/matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 317, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1444252753, "creation_date": 1444252753, "question_id": 33002591, "link": "https://stackoverflow.com/questions/33002591/visual-studio-fopen-crashes", "title": "visual studio fopen crashes", "body": "<p>I have an application which opens the file in write mode using the standard fopen function</p>\n\n<pre><code>   fp = fopen(fName, \"w\");\n    if (fp){\n&lt;some functions/print statements&gt;\n}\n</code></pre>\n\n<p>While debugging, it is quits/exits the application in the function CreateFileW() in open.c file (which is a part of inbuilt VC compiler). It does not hit the if condition in the code itself OR does not return any error code. </p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1444253200, "post_id": 33002575, "comment_id": 53830313, "body": "For c callbacks, you need to provide a <code>static</code> class member function. Implicit passing of <code>this</code> pointer isn&#39;t supported from c."}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1449764655, "post_id": 33002575, "comment_id": 56158196, "body": "Have you even read the error message? It tells you at least 1 thing that is wrong and also tells you how to fix it."}], "answers": [{"tags": [], "owner": {"reputation": 480, "user_id": 5420624, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-vQZfKQpzUsI/AAAAAAAAAAI/AAAAAAAAABI/jhadEAWyhB0/photo.jpg?sz=128", "display_name": "Captain Wise", "link": "https://stackoverflow.com/users/5420624/captain-wise"}, "is_accepted": false, "score": 1, "last_activity_date": 1444259632, "last_edit_date": 1444259632, "creation_date": 1444259317, "answer_id": 33003931, "question_id": 33002575, "link": "https://stackoverflow.com/questions/33002575/c-class-member-function-to-c-function/33003931#33003931", "title": "C++ class member function to c function", "body": "<p>First of all you need to be sure that your function definition is correct. What I see in your code is that you declared a member function with parameter and you define the same member function whitout parameter. You should define it like you declared it.</p>\n\n<pre><code>void ClassTest::CallbackFunction(unsigned long esrParam)\n{\n    //do somthing\n}\n</code></pre>\n\n<p>Other thing is, you cannot create a callback function with a member function. You need to add a static function.</p>\n\n<pre><code>class ClassTest\n{\npublic:\n    static void CallbackFunction(unsigned long esrParam); // &lt;-- static function\n    void Test();\n};\n</code></pre>\n\n<p>The second part of your code is realy strange, i don't really understand what are you trying to do. Why are you passing your callback function to himself. That doesn't make sense. Usually a callback function is given to another object that the object himself(so to another class) and the other class keep the pointer of your function to call it later.</p>\n\n<p>And the last thing is, you really dont need the __stdcall. This is Win32 API convention and it has nothing to do specificlly with callback function.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5416751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50e87867d1090e1bed0cb9bd1c192bc4?s=128&d=identicon&r=PG&f=1", "display_name": "naveen polimera", "link": "https://stackoverflow.com/users/5416751/naveen-polimera"}, "is_accepted": false, "score": 0, "last_activity_date": 1449764330, "last_edit_date": 1449764330, "creation_date": 1444280989, "answer_id": 33007100, "question_id": 33002575, "link": "https://stackoverflow.com/questions/33002575/c-class-member-function-to-c-function/33007100#33007100", "title": "C++ class member function to c function", "body": "<p>Type this code:</p>\n\n<pre><code>class ClassTest\n{\npublic:\n    void Test();\nvoid __stdcall CallbackFunction(unsigned long esrParam);\n};\n</code></pre>\n\n<p>Instead of:</p>\n\n<pre><code>class ClassTest\n{\npublic:\n    void Test();\n}\nvoid __stdcall CallbackFunction(unsigned long esrParam);\n</code></pre>\n\n<p>Since the class must terminate with a semicolon (<code>;</code>)\nand  <code>void __stdcall CallbackFunction(unsigned long esrParam);</code> isn't declared as a member of class i.e: inside a class.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5420206, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-hsM_0WExGzk/AAAAAAAAAAI/AAAAAAAAADw/R8_DrMrXVRE/photo.jpg?sz=128", "display_name": "Juan Carlos Hern&#225;ndez", "link": "https://stackoverflow.com/users/5420206/juan-carlos-hern%c3%a1ndez"}, "is_accepted": true, "score": 0, "last_activity_date": 1445615426, "last_edit_date": 1445615426, "creation_date": 1445466137, "answer_id": 33270275, "question_id": 33002575, "link": "https://stackoverflow.com/questions/33002575/c-class-member-function-to-c-function/33270275#33270275", "title": "C++ class member function to c function", "body": "<p>I use a kind of wrapper with a pointer:</p>\n\n<pre><code>    class ClassTest\n    {\n    public:\n        ClassTest();\n        void CallbackFunctionCPP(unsigned long esrParam);\n        void Test();\n    }\n    void __stdcall CallbackFunctionC(unsigned long esrParam);\n\n    //Pointer to CPP class\n    ClassTest* _ClassTest;\n\n    ClassTest::ClassTest()\n    {   \n        //Initialization of pointer to CPP class under constructor\n        _ClassTest = this;\n    }\n\n    void ClassTest::CallbackFunctionCPP(unsigned long esrParam)\n    {\n        //Do something\n    }\n\n    void ClassTest::Test()\n    {\n        SetESR(CallbackFunctionC);\n    }\n\n    void __stdcall CallbackFunctionC(unsigned long esrParam);\n    {\n        //Use CPP member funtion across C function\n        _ClassTest-&gt;CallbackFunctionCPP(esrParam);\n    }\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5420206, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-hsM_0WExGzk/AAAAAAAAAAI/AAAAAAAAADw/R8_DrMrXVRE/photo.jpg?sz=128", "display_name": "Juan Carlos Hern&#225;ndez", "link": "https://stackoverflow.com/users/5420206/juan-carlos-hern%c3%a1ndez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 452, "favorite_count": 1, "accepted_answer_id": 33270275, "answer_count": 3, "score": -1, "last_activity_date": 1449764330, "creation_date": 1444252645, "last_edit_date": 1445615232, "question_id": 33002575, "link": "https://stackoverflow.com/questions/33002575/c-class-member-function-to-c-function", "title": "C++ class member function to c function", "body": "<p>I have a C function that resive other C function like argument, this function is a part of C library and I need work with this but with a C++ function, member of a class.</p>\n\n<p>The function definition that pass like argument:</p>\n\n<pre><code>void __stdcall CallbackFunctionC(unsigned long esrParam);\n</code></pre>\n\n<p>The definition of the function that resive is:</p>\n\n<pre><code>int void __stdcall SetESR( void (__stdcall *esr)(unsigned long esrParam) );\n</code></pre>\n\n<p>I want pass a member class function with the same definition but I can\u00b4t.</p>\n\n<p>This a example of the success code with a C function:</p>\n\n<pre><code>class ClassTest\n{\npublic:\n    void Test();\n}\nvoid __stdcall CallbackFunctionC(unsigned long esrParam);\n\nvoid ClassTest::Test()\n{\n    SetESR(CallbackFunctionC);\n}\nvoid __stdcall CallbackFunctionC(unsigned long esrParam)\n{\n//Do something\n}\n</code></pre>\n\n<p>I need pass a function member but this is thrown an error.\nExample of the error code:</p>\n\n<pre><code>class ClassTest\n{\npublic:\n    void __stdcall CallbackFunctionCPP(unsigned long esrParam);\n    void Test();\n}\n\nvoid ClassTest::Test()\n{\n    SetESR(CallbackFunctionCPP);\n}\n\nvoid ClassTest::CallbackFunctionCPP(unsigned long esrParam)\n{\n    //Do something\n}\n</code></pre>\n\n<p>Error:</p>\n\n<pre><code>Error   3   error C3867: 'ClassTest::CallbackFunctionCPP': function call missing argument list; use '&amp;ClassTest::CallbackFunctionCPP' to create a pointer to member ...\\ClassTest.cpp   XXXX    1   ClassTest\n</code></pre>\n"}, {"tags": ["c", "arrays", "file", "text", "line"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1444251448, "post_id": 33002220, "comment_id": 53829472, "body": "<code>while ( (temp=getchar()) != EOF )</code> allows you to remove three copies of <code>temp=getchar();</code>. You might also want to add a <code>putchar(&#39;\\n&#39;);</code> before the return in the <code>reverse</code> function."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1444251649, "post_id": 33002220, "comment_id": 53829574, "body": "Also the code you posted will read from <code>stdin</code> and write to <code>stdout</code>. Is this your real program?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1444251746, "post_id": 33002220, "comment_id": 53829614, "body": "@iharob He&#39;s using I/O redirection to read and write files"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1444251777, "post_id": 33002220, "comment_id": 53829627, "body": "I see now the way he is running the program."}, {"owner": {"reputation": 336, "user_id": 4474729, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4b06c22567df828997b56635463683fc?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff H", "link": "https://stackoverflow.com/users/4474729/jeff-h"}, "edited": false, "score": 0, "creation_date": 1444251796, "post_id": 33002220, "comment_id": 53829637, "body": "yes, I&#39;m using file redirection."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1444251885, "post_id": 33002220, "comment_id": 53829682, "body": "Are you sure the second line of your input file ends with a newline? You only print out the reversed line when you read a newline, so you won&#39;t print the last line if it doesn&#39;t."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1444251911, "post_id": 33002220, "comment_id": 53829691, "body": "The function you use is defined as <code>int getchar();</code> so you need to use <code>int temp</code> and not <code>char temp</code>. Otherwise you can&#39;t tell the difference between the byte value <code>0xFF</code> and the flag <code>EOF</code>."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1444251961, "post_id": 33002220, "comment_id": 53829714, "body": "Your program works for me: <a href=\"http://ideone.com/xVDsZ9\" rel=\"nofollow noreferrer\">ideone.com/xVDsZ9</a>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1444252124, "post_id": 33002220, "comment_id": 53829778, "body": "<code>for (a = 80; a &gt;= 0; a--)</code> breaks <code>array[80]</code>. It should be <code>for (a = 79; a &gt;= 0; a--)</code>"}, {"owner": {"reputation": 336, "user_id": 4474729, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4b06c22567df828997b56635463683fc?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff H", "link": "https://stackoverflow.com/users/4474729/jeff-h"}, "edited": false, "score": 0, "creation_date": 1444252239, "post_id": 33002220, "comment_id": 53829829, "body": "Thanks Barmar, you were right, the second line in my test file did not have a newline character. I&#39;ll have to fix that."}, {"owner": {"reputation": 336, "user_id": 4474729, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4b06c22567df828997b56635463683fc?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff H", "link": "https://stackoverflow.com/users/4474729/jeff-h"}, "edited": false, "score": 0, "creation_date": 1444252382, "post_id": 33002220, "comment_id": 53829906, "body": "And thanks Weather Vane, That fixes a problem I was having where it prints a randon nonsese character before the reversed array."}], "answers": [{"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 0, "last_activity_date": 1444252385, "creation_date": 1444252385, "answer_id": 33002503, "question_id": 33002220, "link": "https://stackoverflow.com/questions/33002220/turn-each-line-of-a-text-file-into-an-array-c/33002503#33002503", "title": "Turn each line of a text file into an array c", "body": "<p>If the file doesn't end with a newline, you'll never print the last line, because you only call <code>reverse(array)</code> when you read the newline character.</p>\n\n<p>You can solve this by calling it again after the <code>while</code> loop is done.</p>\n\n<pre><code>int  main() {\n    char temp;\n    char  array[80] = \"\";\n    int count = 0;\n    temp = getchar();  //Start on first Character\n    while (temp != EOF) {   //loop through the entire file\n        if (temp == '\\n') {  //If it is the end of a line\n            reverse(array);   //Print out the reversed line\n            memset(array,0,80);  //clear the array\n            count = 0;  //reset count\n            temp = getchar(); //Advance getchar\n        }\n        else {  //If it is not the end of the line\n            array[count] = temp;  //Store the char in the array\n            count++;   //advance count\n            temp = getchar();   //advance getchar\n        }\n    }\n    if (count &gt; 0) {\n        reverse(array);\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 336, "user_id": 4474729, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4b06c22567df828997b56635463683fc?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff H", "link": "https://stackoverflow.com/users/4474729/jeff-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 728, "favorite_count": 0, "accepted_answer_id": 33002503, "answer_count": 1, "score": 1, "last_activity_date": 1445274449, "creation_date": 1444251164, "last_edit_date": 1445274449, "question_id": 33002220, "link": "https://stackoverflow.com/questions/33002220/turn-each-line-of-a-text-file-into-an-array-c", "title": "Turn each line of a text file into an array c", "body": "<p>I'm trying to take input from a text file, and then reverse each line, and output back into a different text file. For some reason, the program only dos this for the first line, and does not move onto the second line. I don't get this because it should keep going until it hits EOF. </p>\n"}, {"tags": ["c", "arrays", "pointers", "garbage"], "comments": [{"owner": {"reputation": 28373, "user_id": 5015238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8790f8091d3c6c58fd45664a165117a?s=128&d=identicon&r=PG", "display_name": "jdweng", "link": "https://stackoverflow.com/users/5015238/jdweng"}, "edited": false, "score": 0, "creation_date": 1444250388, "post_id": 33001867, "comment_id": 53828916, "body": "You are using i++ so ptr is pointing to a an area in memory in your program  outside the array a.  Since you recompiled to change from an int to a double I can&#39;t infer why in one case you are getting a 5 and the other case a zero.  Both a double and int are store as 4 bytes with a double being a IEEE 488 floating point number."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 28373, "user_id": 5015238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8790f8091d3c6c58fd45664a165117a?s=128&d=identicon&r=PG", "display_name": "jdweng", "link": "https://stackoverflow.com/users/5015238/jdweng"}, "edited": false, "score": 0, "creation_date": 1444251188, "post_id": 33001867, "comment_id": 53829334, "body": "@jdweng: 1) there is no use in further researching undefined behaviour. 2) double requires at least 64 bits, i.e. 8 octets (unless your bytes have 16 bits, which would be perfectly valid - check CHAR_BIT) 3) What is IEEE488? Typically C uses IEC 60559 (aka IEEE754) floating point. Never header about the standard you mention. Can you provide a link?"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 2, "creation_date": 1444251555, "post_id": 33001867, "comment_id": 53829530, "body": "&quot;<i>it should be a garbage value</i>&quot; -- It <b>is</b> a garbage value. <i>&quot;But, every time it is showing 5 which is the size of the array.</i>&#39; -- <code>5</code> is garbage. Garbage is not required to have a different value every time you look at it; seemingly consistent garbage is still garbage. Garbage is not (necessarily) random."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 2, "creation_date": 1444253810, "post_id": 33001867, "comment_id": 53830573, "body": "It&#39;s probably running into the low-order byte of <code>i</code>, which just happens to be stored in memory after the array, and would be 5 after the loop."}, {"owner": {"reputation": 28373, "user_id": 5015238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8790f8091d3c6c58fd45664a165117a?s=128&d=identicon&r=PG", "display_name": "jdweng", "link": "https://stackoverflow.com/users/5015238/jdweng"}, "edited": false, "score": 0, "creation_date": 1444301134, "post_id": 33001867, "comment_id": 53850298, "body": "I wrote wrong IEEE specification.  Sorry."}], "answers": [{"comments": [{"owner": {"reputation": 161, "user_id": 5420257, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/sNnja.jpg?s=128&g=1", "display_name": "Parvez M Robin", "link": "https://stackoverflow.com/users/5420257/parvez-m-robin"}, "edited": false, "score": 0, "creation_date": 1444251220, "post_id": 33001896, "comment_id": 53829350, "body": "It can&#39;t be just a coincidence. I&#39;ve run the code over 20 times. I&#39;ve restarted Code Blocks IDE several times. Restarted the computer. Changed the size of the array. And still I&#39;m getting the size at nth position."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 161, "user_id": 5420257, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/sNnja.jpg?s=128&g=1", "display_name": "Parvez M Robin", "link": "https://stackoverflow.com/users/5420257/parvez-m-robin"}, "edited": false, "score": 0, "creation_date": 1444251456, "post_id": 33001896, "comment_id": 53829482, "body": "It depends on the stack memory of the program, it will not change just because you recompile it or because you change the size of the array, it will however change if you change the program, try declaring a new <code>int</code> variable before the <code>for</code> loop and give it a random value different than <code>5</code>. Or use a differente compiler perhaps."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "reply_to_user": {"reputation": 161, "user_id": 5420257, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/sNnja.jpg?s=128&g=1", "display_name": "Parvez M Robin", "link": "https://stackoverflow.com/users/5420257/parvez-m-robin"}, "edited": false, "score": 2, "creation_date": 1444252585, "post_id": 33001896, "comment_id": 53830001, "body": "@ParvezMRobin: That&#39;s an artifact of how the compiler arranged objects on the stack for <i>this particular program</i>.  Your particular collection of variables just happen to get laid out in a manner where (it looks like) <code>i</code> follows the last element of the array.  A different compiler, or the same compiler with different optimization settings, may lay the variables out in a different order.  This is not a defined behavior, it really is just a coincidence."}, {"owner": {"reputation": 161, "user_id": 5420257, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/sNnja.jpg?s=128&g=1", "display_name": "Parvez M Robin", "link": "https://stackoverflow.com/users/5420257/parvez-m-robin"}, "edited": false, "score": 0, "creation_date": 1444305406, "post_id": 33001896, "comment_id": 53853128, "body": "Yes, it is. Printing memory address of i didn&#39;t work as it showed a different memory address. But when I changed the code as following      #include &lt;stdio.h&gt;          int main()     {         int a[] = {1, 1, 1, 1, 1};         int *ptr = a;              for(int i = 5; i&lt;10; i++)             printf(&quot;%d &quot;, *ptr++);         printf(&quot;%d &quot;, *ptr);     }  the output is 1 1 1 1 1 10. So it was the value of i."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1444319066, "post_id": 33001896, "comment_id": 53863599, "body": "Yes the address migh be different, see <a href=\"http://stackoverflow.com/questions/33001867/does-nth-index-of-n-sized-c-array-contain-size-of-it/33001896#comment53830573_33001867\">this comment</a>. But the idea is that it has to do you the layout of the program in memory, so you got it now."}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": true, "score": 2, "last_activity_date": 1444250114, "last_edit_date": 1444250114, "creation_date": 1444249773, "answer_id": 33001896, "question_id": 33001867, "link": "https://stackoverflow.com/questions/33001867/does-nth-index-of-n-sized-c-array-contain-size-of-it/33001896#33001896", "title": "Does nth index of n sized C array contain size of it?", "body": "<p>What you do invokes <strong>Undefined Behavior</strong>.</p>\n\n<p>It's simple a coincidence and probably just the value of <code>i</code>, print the address of <code>i</code> and check. But be careful, it will not always be that way. Just declare a new variable in the program and it might change.</p>\n\n<p>In the case of <code>double</code> it doesn't work because the address after the array no longer matches the address of <code>i</code>. It's what I mean when I say <em>Be careful</em>.</p>\n"}, {"comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1444250096, "post_id": 33001951, "comment_id": 53828767, "body": "<i>segmentation fault is some cases</i> just -&gt; <i>undefiend behavior</i>."}, {"owner": {"reputation": 161, "user_id": 5420257, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/sNnja.jpg?s=128&g=1", "display_name": "Parvez M Robin", "link": "https://stackoverflow.com/users/5420257/parvez-m-robin"}, "edited": false, "score": 0, "creation_date": 1444251116, "post_id": 33001951, "comment_id": 53829301, "body": "It can&#39;t be just a value from memory address. I&#39;ve run the code over 20 times. I&#39;ve restarted Code Blocks IDE several times. Restarted the computer. Changed the size of the array. And still I&#39;m getting the size at nth position."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1444251185, "post_id": 33001951, "comment_id": 53829331, "body": "It&#39;s still a coincidence."}, {"owner": {"reputation": 1380, "user_id": 1380279, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d4167d64417b6a25a85cb7a04980d4df?s=128&d=identicon&r=PG", "display_name": "Kamen Stoykov", "link": "https://stackoverflow.com/users/1380279/kamen-stoykov"}, "edited": false, "score": 2, "creation_date": 1444251303, "post_id": 33001951, "comment_id": 53829393, "body": "There are a lot of optimizations which OS does about memory management. So there is quite high chance that each time you will receive same piece of memory."}], "tags": [], "owner": {"reputation": 1380, "user_id": 1380279, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d4167d64417b6a25a85cb7a04980d4df?s=128&d=identicon&r=PG", "display_name": "Kamen Stoykov", "link": "https://stackoverflow.com/users/1380279/kamen-stoykov"}, "is_accepted": false, "score": 6, "last_activity_date": 1444249979, "creation_date": 1444249979, "answer_id": 33001951, "question_id": 33001867, "link": "https://stackoverflow.com/questions/33001867/does-nth-index-of-n-sized-c-array-contain-size-of-it/33001951#33001951", "title": "Does nth index of n sized C array contain size of it?", "body": "<p>This is just a value from memory in this address. You should never access memory which is not allocated by you (In this case you are accessing 6th element, but you have declared just 5). This may lead to segmentation fault is some cases.</p>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 3, "last_activity_date": 1444252794, "last_edit_date": 1444252794, "creation_date": 1444251005, "answer_id": 33002185, "question_id": 33001867, "link": "https://stackoverflow.com/questions/33001867/does-nth-index-of-n-sized-c-array-contain-size-of-it/33002185#33002185", "title": "Does nth index of n sized C array contain size of it?", "body": "<p>C does not store any array metadata (including array length) anywhere, either at the beginning or the end of the array.  In the case of the integer array, the <em>most likely</em> explanation for the output is that the memory used by the variable <code>i</code> immediately follows the last element of the array, like so:</p>\n\n<pre><code>   +---+\na: | 1 | a[0]\n   +---+ \n   | 1 | a[1]\n   +---+\n   | 1 | a[2]\n   +---+\n   | 1 | a[3]\n   +---+\n   | 1 | a[4]\n   +---+\ni: | 5 | a[5]\n   +---+\n</code></pre>\n\n<p>However, you <em>cannot</em> rely on this behavior being consistent, as you saw with changing the array type to <code>double</code>.  </p>\n\n<p>Attempting to read the value contained in the element one past the end of the array results in <em>undefined behavior</em>.  <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow\">Chapter and (truncated) verse</a>:</p>\n\n<blockquote><strong>6.5.6 Additive operators</strong><br>\n...<br>\n8  When an expression that has integer type is added to or subtracted from a pointer, the\nresult has the type of the pointer operand...<strong>If the result points one past the last element of the array object, it\nshall not be used as the operand of a unary <code>*</code> operator that is evaluated.</strong>\n</blockquote>\n\n<p>For giggles, I compiled your code on my system at work, and I get the following output:</p>\n\n<pre><code>1 1 1 1 1 0\n</code></pre>\n\n<p>This really is just an artifact of how the compiler lays objects out in memory for this particular program.  </p>\n"}], "owner": {"reputation": 161, "user_id": 5420257, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/sNnja.jpg?s=128&g=1", "display_name": "Parvez M Robin", "link": "https://stackoverflow.com/users/5420257/parvez-m-robin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "accepted_answer_id": 33001896, "answer_count": 3, "score": 1, "last_activity_date": 1444252794, "creation_date": 1444249675, "last_edit_date": 1444249998, "question_id": 33001867, "link": "https://stackoverflow.com/questions/33001867/does-nth-index-of-n-sized-c-array-contain-size-of-it", "title": "Does nth index of n sized C array contain size of it?", "body": "<p>I've written a C program for showing the values of an array using pointer. Here's the code :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    int a[] = {1, 1, 1, 1, 1};\n    int *ptr = a;\n    for (int i = 0 ; i &lt; 5; i++)\n        printf(\"%d \", *ptr++);\n    printf(\"%d\", *ptr);\n}\n</code></pre>\n\n<p>As you can see after terminating the loop, the pointer holds the memory address of a value out of the array. As it i.e. the last output is not initialized, it should be a garbage value. But, every time it is showing 5 which is the size of the array. Then, I thought the next memory address of allocated memory for array contains the size of array. But, this is not happening with double type array.\n</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Output for int array : 1 1 1 1 1 5\nOutput for double array : 1.000000 1.000000 1.000000 1.000000 1.000000 1.000000 0.000000 \n</code></pre>\n\n<p>Will anyone explain the output?</p>\n"}, {"tags": ["c", "multidimensional-array", "mpi"], "comments": [{"owner": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "edited": false, "score": 3, "creation_date": 1444250879, "post_id": 33001663, "comment_id": 53829161, "body": "This is a fairly basic problem in scientific parallel computing and one of the parallel &quot;design patterns&quot;. Search for &quot;halo exchange in 2D&quot; or &quot;ghost cells exchange in 2D&quot;. There are posts concerning this here, so your question is most likely a duplicate. In any case, the column exchange in C is performed by constructing a vector datatype (using <code>MPI_Type_vector</code>) with stride equal to the local subarray width."}, {"owner": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "edited": false, "score": 0, "creation_date": 1444251146, "post_id": 33001663, "comment_id": 53829311, "body": "Ok, maybe not really that many questions concerning 2D halo exchange here. But you should still be able to find many examples and MPI tutorials using your favourite search engine and the keywords from my previous comment."}, {"owner": {"reputation": 857, "user_id": 3893224, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/58c4a1431fa23395c944ce16fc1fcd7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jacob Holloway", "link": "https://stackoverflow.com/users/3893224/jacob-holloway"}, "reply_to_user": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "edited": false, "score": 0, "creation_date": 1444251732, "post_id": 33001663, "comment_id": 53829608, "body": "Thanks!  Just knowing how to search for answers is enough for me!  (I only post when I hit a dead end...).  I&#39;ll look into that for sure and try to find the duplicate. :)"}, {"owner": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "edited": false, "score": 0, "creation_date": 1444251973, "post_id": 33001663, "comment_id": 53829719, "body": "Try <a href=\"http://stackoverflow.com/questions/6598578/most-appropriate-mpi-datatype-for-block-decomposition\">that one</a>. The images in the question are missing, but the answer contains some very useful information (Jonathan Dursi, as usual). I will fix the images and post a full 2D halo exchange example... some day."}, {"owner": {"reputation": 8727, "user_id": 2999346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dQ1wB.png?s=128&g=1", "display_name": "francis", "link": "https://stackoverflow.com/users/2999346/francis"}, "edited": false, "score": 1, "creation_date": 1444418201, "post_id": 33001663, "comment_id": 53912082, "body": "Take a look at the <code>DMDA</code> structure of the Petsc library. My guess is that it is doing exactly what you are looking for. See <a href=\"http://www.mcs.anl.gov/petsc/petsc-current/docs/manualpages/DM/DMDACreate2d.html\" rel=\"nofollow noreferrer\"><code>DMDACreate2d()</code></a>. Edges are called ghost points. See <a href=\"http://www.mcs.anl.gov/petsc/petsc-current/docs/manualpages/DM/DMDAVecGetArray.html\" rel=\"nofollow noreferrer\">`DMDAVecGetArray()</a> and the <a href=\"http://www.mcs.anl.gov/petsc/petsc-current/docs/manual.pdf\" rel=\"nofollow noreferrer\">manual of petsc</a> on page 50+."}, {"owner": {"reputation": 857, "user_id": 3893224, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/58c4a1431fa23395c944ce16fc1fcd7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jacob Holloway", "link": "https://stackoverflow.com/users/3893224/jacob-holloway"}, "reply_to_user": {"reputation": 8727, "user_id": 2999346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dQ1wB.png?s=128&g=1", "display_name": "francis", "link": "https://stackoverflow.com/users/2999346/francis"}, "edited": false, "score": 0, "creation_date": 1444418821, "post_id": 33001663, "comment_id": 53912363, "body": "@francis, I&#39;ll have to take a look at that sometime next week when I have more free time. :)  Thank."}], "owner": {"reputation": 857, "user_id": 3893224, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/58c4a1431fa23395c944ce16fc1fcd7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jacob Holloway", "link": "https://stackoverflow.com/users/3893224/jacob-holloway"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 193, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1444248968, "creation_date": 1444248968, "question_id": 33001663, "link": "https://stackoverflow.com/questions/33001663/mpi-sendrecv-efficiently-in-two-dimensions-with-2d-array-of-data", "title": "MPI_SendRecv Efficiently in two dimensions with 2D array of data", "body": "<p>I'm working on a MPI C program that compute a relaxed state of a hotplate by averaging it's neighbors.  So, edge's of each processor need the values from the neighboring proccessor.  The problem is fairly basic, but I'm struggling to efficiently use the MPI_SendRecv in two dimensions.</p>\n\n<p>I currently have a 2D grid of processors and each processor has it's own grid of 2D floats of values.  After each averaging, processors have to send their edge values (I will be vary the number of rows/cols to send to find optimal sizes given the bandwidth/processing power of different setups once it's all working) to the processor next to him.  I've been trying to do all my homework on how to send and recieve, but hit a snag.</p>\n\n<p>MPI_SendRecv does best with contiguous blocks of memory, so I can have each processor allocate their needed size (+padding to store neighboring values).  If I broke my hotplate up into meta-rows and passed the last three rows to the neighbor, it would be easy.  But my problem has processors not just above and below, but left and right in the 2D array.</p>\n\n<p>So far, the best way I could come up with is to copy the right (x) number of columns into a new contiguous block of memory and then ship that contiguous block to the processor to my right and have that processor copy those values into the 2d array that it has, but this seems super inefficient in my mind.  The second option I could think of was to have a second block with the same values but organized by columns instead of rows, but any write would require writing to two places.</p>\n\n<p>Is there a more efficient way?  Does this problem have a name that I could research more on?  Are there any MPI ways to do this that I haven't found yet?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "c", "cmake"], "answers": [{"comments": [{"owner": {"reputation": 116, "user_id": 4769416, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d9a246dc38ac5cfa1514b4d447f53611?s=128&d=identicon&r=PG", "display_name": "James Durand", "link": "https://stackoverflow.com/users/4769416/james-durand"}, "edited": false, "score": 0, "creation_date": 1444252187, "post_id": 33002063, "comment_id": 53829807, "body": "I&#39;m trying to get rid of the CMake script but it essentially does those defines later on in the script. I just wanted to make sure that the macros ended up being the same like I thought. Thanks!"}], "tags": [], "owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "is_accepted": true, "score": 2, "last_activity_date": 1444306182, "last_edit_date": 1444306182, "creation_date": 1444250526, "answer_id": 33002063, "question_id": 33001659, "link": "https://stackoverflow.com/questions/33001659/is-msvc-from-cmake-the-same-as-msc-ver/33002063#33002063", "title": "Is MSVC from CMake the same as _MSC_VER?", "body": "<p><a href=\"https://cmake.org/cmake/help/v3.4/variable/MSVC.html\" rel=\"nofollow\">CMake 3.4 MSVC Documentation</a>:</p>\n\n<blockquote>\n  <p><code>True</code> when using Microsoft Visual C++.</p>\n  \n  <p>Set to <code>true</code> when the compiler is some version of Microsoft Visual C++.</p>\n</blockquote>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/b0084kay.aspx\" rel=\"nofollow\">MSDN Predefined Macros Documentation</a>:</p>\n\n<blockquote>\n  <p>Lists the predefined ANSI/ISO C99 and Microsoft C++ implementation preprocessor macros.</p>\n  \n  <p>...</p>\n  \n  <p><strong>Microsoft-Specific Predefined Macros</strong></p>\n  \n  <p><strong>_MSC_VER</strong> Evaluates to an integer literal that encodes the major and minor number components of the compiler's version number. ...</p>\n</blockquote>\n\n<p>Since CMake <code>MSVC</code> is true when the Microsoft Visual C++ is used and <code>_MSC_VER</code> is a Microsoft-specific C++ macro these are interchangeable for determining if compilation is performed using the Microsoft compiler.</p>\n\n<p>However, I'm not sure about the <code>#define</code> statements. The CMake <a href=\"https://cmake.org/cmake/help/v3.4/command/set.html\" rel=\"nofollow\"><code>set</code></a> command is just setting CMake variables <strong>it would be useful to know how these variables are being used in the CMake script</strong>.</p>\n\n<p>What you have may be sufficient or perhaps:</p>\n\n<pre><code>#define HAVE_SYS_TYPES_H 1\n#define HAVE_STDINT_H 1\n#define HAVE_STDDEF_H 1\n</code></pre>\n\n<p>The CMake <a href=\"https://cmake.org/cmake/help/v3.4/command/add_definitions.html\" rel=\"nofollow\"><code>add_definitions</code></a> command is one way to add preprocessor definitions.</p>\n"}], "owner": {"reputation": 116, "user_id": 4769416, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d9a246dc38ac5cfa1514b4d447f53611?s=128&d=identicon&r=PG", "display_name": "James Durand", "link": "https://stackoverflow.com/users/4769416/james-durand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1324, "favorite_count": 0, "accepted_answer_id": 33002063, "answer_count": 1, "score": 1, "last_activity_date": 1444306182, "creation_date": 1444248950, "question_id": 33001659, "link": "https://stackoverflow.com/questions/33001659/is-msvc-from-cmake-the-same-as-msc-ver", "title": "Is MSVC from CMake the same as _MSC_VER?", "body": "<p>I'm currently working on removing CMake as a dependency for a library since it seems like most of the generated code could be made static. There are some environmental checks that are performed to see what kind of operating system and compiler we're using. One of those checks in CMake looks like the following:</p>\n\n<pre><code>if (MSVC)\n    set (HAVE_SYS_TYPES_H 1)\n    set (HAVE_STDINT_H    1)\n    set (HAVE_STDDEF_H    1)\n    # snip more things\nelse ()\n    # snip more things\nendif ()\n</code></pre>\n\n<p>Could this be replaced with the following C code?</p>\n\n<pre><code>#ifdef _MSC_VER\n    #define HAVE_SYS_TYPES_H\n    #define HAVE_STDINT_H\n    #define HAVE_STDDEF_H\n    // snip more things\n#else\n    // snip more things\n#endif\n</code></pre>\n\n<p>I'm mostly worried about the condition being the same. I think they are but I haven't been able to find anything that would confirm that and I don't currently have access to a working Windows dev environment to just build it and find out.</p>\n\n<p>Thank you for any possible assistance!</p>\n"}, {"tags": ["c", "loops", "for-loop"], "comments": [{"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 2, "creation_date": 1444247962, "post_id": 33001262, "comment_id": 53827590, "body": "Your assumptions are correct, use the <code>f</code> suffix for floats <code>b = b + 0.5f;</code>"}, {"owner": {"reputation": 385, "user_id": 5299019, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/gnNn9.png?s=128&g=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/5299019/steve"}, "reply_to_user": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1444248495, "post_id": 33001262, "comment_id": 53827922, "body": "@AlterMann should that be done for all float points ? Thanks"}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 1, "creation_date": 1444248685, "post_id": 33001262, "comment_id": 53828028, "body": "Only for  <code>float</code>, <code>0.5</code> without the suffix means <code>double</code>"}, {"owner": {"reputation": 15898, "user_id": 1155000, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b8213d9cd920e864ce8ff1fdeefe4db5?s=128&d=identicon&r=PG", "display_name": "Daniel Kamil Kozar", "link": "https://stackoverflow.com/users/1155000/daniel-kamil-kozar"}, "edited": false, "score": 0, "creation_date": 1444251749, "post_id": 33001262, "comment_id": 53829616, "body": "Just for future reference : with <code>float</code> variables, it&#39;s not always the case that a loop executing <code>b += c</code> <code>n</code> times (where <code>c</code> is a constant, like here) will add <code>c * n</code> to <code>b</code>. But you shouldn&#39;t worry about this for now. Or should you..."}], "answers": [{"comments": [{"owner": {"reputation": 34901, "user_id": 3973077, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/e80187d131859fc0601a01231fec657e?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Boddington", "link": "https://stackoverflow.com/users/3973077/paul-boddington"}, "reply_to_user": {"reputation": 385, "user_id": 5299019, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/gnNn9.png?s=128&g=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/5299019/steve"}, "edited": false, "score": 1, "creation_date": 1444247953, "post_id": 33001324, "comment_id": 53827583, "body": "@NZSteve No worries. I remember being a little surprised the first time I saw <code>a == 6</code> even though the loop says <code>a &lt;= 5</code>, but it makes sense when you think about it."}], "tags": [], "owner": {"reputation": 34901, "user_id": 3973077, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/e80187d131859fc0601a01231fec657e?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Boddington", "link": "https://stackoverflow.com/users/3973077/paul-boddington"}, "is_accepted": true, "score": 6, "last_activity_date": 1444247806, "creation_date": 1444247806, "answer_id": 33001324, "question_id": 33001262, "link": "https://stackoverflow.com/questions/33001262/for-loop-beginner-understanding/33001324#33001324", "title": "For loop beginner understanding", "body": "<p>Yes.</p>\n\n<p>When <code>a == 5</code>, the condition <code>a &lt;= 5</code> is true, so the body of the loop (<code>b = b + 0.5;</code>) is executed. After the body, the <code>a++</code> part is always executed. </p>\n\n<p>This makes <code>a == 6</code>. Then the condition <code>a &lt;= 5</code> is <code>false</code>, so the loop terminates.</p>\n\n<p>It is occasionally useful to use the value of the index after the loop.</p>\n"}, {"tags": [], "owner": {"reputation": 1096, "user_id": 541437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9813c60c9048854d3588fa0a65268da0?s=128&d=identicon&r=PG", "display_name": "Erik Johnson", "link": "https://stackoverflow.com/users/541437/erik-johnson"}, "is_accepted": false, "score": 3, "last_activity_date": 1444247870, "creation_date": 1444247870, "answer_id": 33001347, "question_id": 33001262, "link": "https://stackoverflow.com/questions/33001262/for-loop-beginner-understanding/33001347#33001347", "title": "For loop beginner understanding", "body": "<p>You are correct.  The <code>for (init; condition; finish)</code> language feature is a convenience for a structure that looks like this:</p>\n\n<pre><code>init;\nwhile (condition) {\n    ...insert code here...\n    finish;\n}\n</code></pre>\n"}], "owner": {"reputation": 385, "user_id": 5299019, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/gnNn9.png?s=128&g=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/5299019/steve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 33001324, "answer_count": 2, "score": 4, "last_activity_date": 1444249328, "creation_date": 1444247634, "last_edit_date": 1444249328, "question_id": 33001262, "link": "https://stackoverflow.com/questions/33001262/for-loop-beginner-understanding", "title": "For loop beginner understanding", "body": "<p>I am currently learning C and want to check if my understanding of the <code>for</code> loop is correct.</p>\n\n<p>Does the output <code>A is 6</code> occur because after the 5th time the loop is run, the +1 is added to <code>a</code> (which makes it 6), and then the condition is stopped because it is no longer <code>&lt;= 5</code> ? </p>\n\n<pre><code>int a;\nfloat b;\n\nb = 0;\n\nfor (a = 1; a &lt;= 5; a++)\n    b = b + 0.5;\n\nprintf (\"A is %d\\t\\t B is %.2f\\n\", a, b);\n</code></pre>\n\n<p>Output is </p>\n\n<pre>\nA is 6       B is 2.50\n</pre>\n"}, {"tags": ["c", "arrays", "unions"], "comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 3, "creation_date": 1444247572, "post_id": 33001212, "comment_id": 53827314, "body": "You can only initialize one field of an union, since they share the same storage."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1444248323, "post_id": 33001212, "comment_id": 53827815, "body": "Please read about the difference between a <code>struct</code> and a <code>union</code>. You seem to confuse them."}, {"owner": {"reputation": 173, "user_id": 4326079, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-9jKjCanRj_8/AAAAAAAAAAI/AAAAAAAAAEc/qfDrMNSWhic/photo.jpg?sz=128", "display_name": "Jordan McBain", "link": "https://stackoverflow.com/users/4326079/jordan-mcbain"}, "edited": false, "score": 0, "creation_date": 1444249251, "post_id": 33001212, "comment_id": 53828336, "body": "Thanks.  This explains why I can&#39;t find anything with a google search.  I will switch to a struct."}], "answers": [{"tags": [], "owner": {"reputation": 1074, "user_id": 5312548, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/89a837174bf7e62b26df5afb3e2bc497?s=128&d=identicon&r=PG&f=1", "display_name": "Nitin Tripathi", "link": "https://stackoverflow.com/users/5312548/nitin-tripathi"}, "is_accepted": true, "score": 2, "last_activity_date": 1444249891, "last_edit_date": 1444249891, "creation_date": 1444249464, "answer_id": 33001808, "question_id": 33001212, "link": "https://stackoverflow.com/questions/33001212/c-programming-initialize-array-of-unions/33001808#33001808", "title": "C Programming: Initialize Array of Unions", "body": "<p>I guess, You are confused with union and struct.</p>\n\n<blockquote>\n  <p>Union - union is type whose members overlaps the storage and size of\n  the union is the max size of any member. Hence you cannot initialize\n  multiple simultaneously.</p>\n</blockquote>\n\n<p>Please find the difference between <a href=\"https://www.quora.com/What-is-the-difference-between-enum-union-and-struct-in-C-programming\" rel=\"nofollow\">struct and union</a><br>\nif you are interested in nested initialization, please follow <a href=\"http://en.cppreference.com/w/c/language/struct_initialization#Nested_initialization\" rel=\"nofollow\">this</a><br>\nif you are interested in initialization of array, please follow <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Designated-Inits.html\" rel=\"nofollow\">this</a>  </p>\n"}], "owner": {"reputation": 173, "user_id": 4326079, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-9jKjCanRj_8/AAAAAAAAAAI/AAAAAAAAAEc/qfDrMNSWhic/photo.jpg?sz=128", "display_name": "Jordan McBain", "link": "https://stackoverflow.com/users/4326079/jordan-mcbain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2990, "favorite_count": 0, "accepted_answer_id": 33001808, "answer_count": 1, "score": -1, "last_activity_date": 1444249891, "creation_date": 1444247443, "question_id": 33001212, "link": "https://stackoverflow.com/questions/33001212/c-programming-initialize-array-of-unions", "title": "C Programming: Initialize Array of Unions", "body": "<p>I have a union defined as:</p>\n\n<pre><code>typedef union{\n    unsigned b_a: 1;\n    unsigned b_b:1;\n    unsigned b_c:1;\n    int d_e;\n    int option;\n\n    int data[7];\n}myUnion;\n</code></pre>\n\n<p>and I would like to declare and initialize an array of type myUnion:</p>\n\n<pre><code>myUnion myUnionArray[1] = { {.b_a=0, .b_b=0, .b_c=0, .d_e=5, .option=6} }\n</code></pre>\n\n<p>I've tried the above line to initialize the array but I keep get errors when compiling (\"too many initializers\").</p>\n\n<p>Any idea what I am doing wrong?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1444246807, "post_id": 33000972, "comment_id": 53826852, "body": "Your source file needs to include header <code>math.h</code>, and when you build your program you need to link in the math library."}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 4, "creation_date": 1444246994, "post_id": 33000972, "comment_id": 53826969, "body": "If the first one works but the second doesn&#39;t, I suspect the call to <code>ceil()</code> is being optimized out for the first case with the literal <code>5.5</code>.  Otherwise, it should have the same error from not linking with the math library."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 4950558, "user_type": "registered", "profile_image": "https://graph.facebook.com/998825036817566/picture?type=large", "display_name": "William Reed", "link": "https://stackoverflow.com/users/4950558/william-reed"}, "edited": false, "score": 0, "creation_date": 1444250702, "post_id": 33001004, "comment_id": 53829076, "body": "This worked out just fine for me, thanks! I forgot to mention that I included the right libraries (&lt;stdio.h&gt; and &lt;math.h&gt;) but i&#39;m kind of a noob here and didn&#39;t get the text app to format those include statements along with the rest of my code."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 11, "user_id": 4950558, "user_type": "registered", "profile_image": "https://graph.facebook.com/998825036817566/picture?type=large", "display_name": "William Reed", "link": "https://stackoverflow.com/users/4950558/william-reed"}, "edited": false, "score": 0, "creation_date": 1444250989, "post_id": 33001004, "comment_id": 53829226, "body": "@WilliamReed Glad I could help.  Feel free to <a href=\"http://stackoverflow.com/help/accepted-answer\">accept this answer</a> if you found it useful."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 5, "last_activity_date": 1444246756, "creation_date": 1444246756, "answer_id": 33001004, "question_id": 33000972, "link": "https://stackoverflow.com/questions/33000972/how-to-store-what-ceil-returns-in-a-variable-c-programming/33001004#33001004", "title": "How to store what ceil() returns in a variable (C programming)", "body": "<p>Two things:</p>\n\n<p>You need to <code>#include &lt;math.h&gt;</code> at the top of your file.</p>\n\n<p>You need to link with the math library by passing <code>-lm</code> to gcc:</p>\n\n<pre><code>gcc -o myprog myprog.c -lm\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3642, "user_id": 3371101, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eeb77c0b3ce0a8041fa92a4fcd5af850?s=128&d=identicon&r=PG&f=1", "display_name": "codingEnthusiast", "link": "https://stackoverflow.com/users/3371101/codingenthusiast"}, "is_accepted": true, "score": 1, "last_activity_date": 1550229438, "last_edit_date": 1550229438, "creation_date": 1444246822, "answer_id": 33001029, "question_id": 33000972, "link": "https://stackoverflow.com/questions/33000972/how-to-store-what-ceil-returns-in-a-variable-c-programming/33001029#33001029", "title": "How to store what ceil() returns in a variable (C programming)", "body": "<p>Apart from including <code>math.h</code>, simply compile your file by writing <code>-lm</code> <strong>at the end of the command</strong>.</p>\n\n<p>Since you are stating that your program sometimes work, maybe you are compiling your code differently at different times or some optimization takes place. Please take a look  <a href=\"https://stackoverflow.com/questions/8266183/linking-with-gcc-and-lm-doesnt-define-ceil-on-ubuntu\">here</a> (credits to dannas):</p>\n\n<blockquote>\n  <p>Archives (static libraries) are acted upon differently than are shared objects (dynamic libraries). With dynamic libraries, all the library symbols go into the virtual address space of the output file, and all the symbols are available to all the other files in the link. In contrast, static linking only looks through the archive for the undefined symbols presently known to the loader at the time the archive is processed.\n  <hr/>\n  If you specify the math library (which is usually a static one) before your object files, then the linker won't add any symbols.</p>\n</blockquote>\n"}], "owner": {"reputation": 11, "user_id": 4950558, "user_type": "registered", "profile_image": "https://graph.facebook.com/998825036817566/picture?type=large", "display_name": "William Reed", "link": "https://stackoverflow.com/users/4950558/william-reed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 33001029, "answer_count": 2, "score": 0, "last_activity_date": 1550229438, "creation_date": 1444246661, "last_edit_date": 1444246761, "question_id": 33000972, "link": "https://stackoverflow.com/questions/33000972/how-to-store-what-ceil-returns-in-a-variable-c-programming", "title": "How to store what ceil() returns in a variable (C programming)", "body": "<p>So I have searched around for a bit on the answer to this question, which is probably incredibly simple, but I haven't found anything yet, so here's the issue:\nSomething like this code here works just fine:</p>\n\n<pre><code>int main(void){\n    double x;\n    x=ceil(5.5);\n}\n</code></pre>\n\n<p>But if I try this:</p>\n\n<pre><code>int main(void){\n    double x = 5.5;\n    x=ceil(x);\n}\n</code></pre>\n\n<p>I get this error message:</p>\n\n<blockquote>\n  <p>test.c:(.text+0x24): undefined reference to `ceil'</p>\n</blockquote>\n\n<p>Why is this and how can I send a variable to function 'ceil()' and then store it in another variable?</p>\n"}, {"tags": ["c", "mongodb"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1444247454, "post_id": 33000712, "comment_id": 53827233, "body": "With C being currently 2nd rank in the Tiobe index, one might come to the conclusion it is still in use, yes. But your question as given is OT, imo."}, {"owner": {"reputation": 1096, "user_id": 541437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9813c60c9048854d3588fa0a65268da0?s=128&d=identicon&r=PG", "display_name": "Erik Johnson", "link": "https://stackoverflow.com/users/541437/erik-johnson"}, "edited": false, "score": 0, "creation_date": 1444247683, "post_id": 33000712, "comment_id": 53827405, "body": "Lots of people still use C - me, for one.  But almost no one uses C for web services, which is where MongoDB is most commonly used.  It&#39;s a really bad language choice for that application.  When I wrote against MongoDB, it was in Python.  When I write for embedded microprocessors, that&#39;s when I use C."}, {"owner": {"reputation": 2696, "user_id": 1352426, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/mQFHO.png?s=128&g=1", "display_name": "v0d1ch", "link": "https://stackoverflow.com/users/1352426/v0d1ch"}, "edited": false, "score": 0, "creation_date": 1444249015, "post_id": 33000712, "comment_id": 53828208, "body": "I use it for parsing the files and db insert not for web app"}, {"owner": {"reputation": 23077, "user_id": 492620, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/23e8d9c545b0a9d603765abaadc3f499?s=128&d=identicon&r=PG", "display_name": "oz123", "link": "https://stackoverflow.com/users/492620/oz123"}, "edited": false, "score": 0, "creation_date": 1444301483, "post_id": 33000712, "comment_id": 53850538, "body": "The documentation of C API for mongodb is quite lacking, indeed. I agree with you on that. This is probably because C is not that popular for developing web applications."}, {"owner": {"reputation": 2696, "user_id": 1352426, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/mQFHO.png?s=128&g=1", "display_name": "v0d1ch", "link": "https://stackoverflow.com/users/1352426/v0d1ch"}, "edited": false, "score": 0, "creation_date": 1444302066, "post_id": 33000712, "comment_id": 53850922, "body": "Does anybody know if you can call mongoc_bulk_operation_update() with more than one field in document. All I found is using $set and one field in document to update so I am calling it in a loop. Would be nice if you can $set the new values for complete document at one pass"}], "answers": [{"comments": [{"owner": {"reputation": 2696, "user_id": 1352426, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/mQFHO.png?s=128&g=1", "display_name": "v0d1ch", "link": "https://stackoverflow.com/users/1352426/v0d1ch"}, "edited": false, "score": 0, "creation_date": 1444301851, "post_id": 33013589, "comment_id": 53850779, "body": "I allready have a file parser setup that works, what I didnt find is howe to add Date object to document and didnt manage to google decent example of this. Thanks for the bson_append_date_time() Ill study the link thoroughly."}, {"owner": {"reputation": 2696, "user_id": 1352426, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/mQFHO.png?s=128&g=1", "display_name": "v0d1ch", "link": "https://stackoverflow.com/users/1352426/v0d1ch"}, "edited": false, "score": 0, "creation_date": 1447327532, "post_id": 33013589, "comment_id": 55113544, "body": "Ok so I dont want to un-accept the answer since it gave me a link to search topic, but the main problem was that time needs to be specified in MILISECONDS not in seconds. <a href=\"https://api.mongodb.org/libbson/current/bson_append_date_time.html\" rel=\"nofollow noreferrer\">api.mongodb.org/libbson/current/bson_append_date_time.html</a>"}], "tags": [], "owner": {"reputation": 23077, "user_id": 492620, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/23e8d9c545b0a9d603765abaadc3f499?s=128&d=identicon&r=PG", "display_name": "oz123", "link": "https://stackoverflow.com/users/492620/oz123"}, "is_accepted": true, "score": 2, "last_activity_date": 1444301164, "creation_date": 1444301164, "answer_id": 33013589, "question_id": 33000712, "link": "https://stackoverflow.com/questions/33000712/c-mongodb-driver-how-to-add-date/33013589#33013589", "title": "C MongoDB driver - how to add Date?", "body": "<p>Your question is quite lacking. The code of conduct here requires that you post the code that you try. Never the less, here is how to start.</p>\n\n<p>First you need to know how to work with the C driver. Here is an example from the <a href=\"http://api.mongodb.org/c/current/inserting-document.html\" rel=\"nofollow\">mongodb-c-api documentation</a>:</p>\n\n<pre><code>#include &lt;bson.h&gt;\n#include &lt;mongoc.h&gt;\n#include &lt;stdio.h&gt;\n\nint\nmain (int   argc,\n      char *argv[])\n{\n    mongoc_client_t *client;\n    mongoc_collection_t *collection;\n    mongoc_cursor_t *cursor;\n    bson_error_t error;\n    bson_oid_t oid;\n    bson_t *doc;\n\n    mongoc_init ();\n\n    client = mongoc_client_new (\"mongodb://localhost:27017/\");\n    collection = mongoc_client_get_collection (client, \"test\", \"test\");\n\n    doc = bson_new ();\n    bson_oid_init (&amp;oid, NULL);\n    BSON_APPEND_OID (doc, \"_id\", &amp;oid);\n    BSON_APPEND_UTF8 (doc, \"hello\", \"world\");\n\n    if (!mongoc_collection_insert (collection, MONGOC_INSERT_NONE, doc, NULL, &amp;error)) {\n        printf (\"%s\\n\", error.message);\n    }\n\n    bson_destroy (doc);\n    mongoc_collection_destroy (collection);\n    mongoc_client_destroy (client);\n\n    return 0;\n}\n</code></pre>\n\n<p>See the documentation how to compile this. \nNow, you have to understand, you always insert BSON docs, and the data type you want to insert, is datetime, so you probably want to insert the document with <code>bson_append_date_time()</code>. For more information  you would have to look in the <a href=\"https://api.mongodb.org/libbson/current/bson_append_date_time.html\" rel=\"nofollow\">documentation of libbson</a>.\nI hope it is enough to get you started. </p>\n"}, {"tags": [], "owner": {"reputation": 919, "user_id": 5513684, "user_type": "registered", "accept_rate": 92, "profile_image": "https://graph.facebook.com/961769367178033/picture?type=large", "display_name": "Steven Carlson", "link": "https://stackoverflow.com/users/5513684/steven-carlson"}, "is_accepted": false, "score": 1, "last_activity_date": 1446830451, "creation_date": 1446830451, "answer_id": 33572207, "question_id": 33000712, "link": "https://stackoverflow.com/questions/33000712/c-mongodb-driver-how-to-add-date/33572207#33572207", "title": "C MongoDB driver - how to add Date?", "body": "<p>You can use the bson_append_now_utc to add the current time to a document.  </p>\n\n<pre><code>    bson_append_now_utc(doc, \"expire_time\", -1);\n</code></pre>\n\n<p>Working snippet:</p>\n\n<pre><code>doc = bson_new ();\nbson_oid_init (&amp;oid, NULL);\nBSON_APPEND_OID (doc, \"_id\", &amp;oid);\n\nbson_append_now_utc(doc, \"expire_time\", -1);\n\nif (!mongoc_collection_insert (collection, MONGOC_INSERT_NONE, doc, NULL, &amp;error)) \n    {\n    fprintf (stderr, \"%s\\n\", error.message);\n    }\n\nbson_destroy (doc);\n</code></pre>\n"}], "owner": {"reputation": 2696, "user_id": 1352426, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/mQFHO.png?s=128&g=1", "display_name": "v0d1ch", "link": "https://stackoverflow.com/users/1352426/v0d1ch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 740, "favorite_count": 0, "accepted_answer_id": 33013589, "answer_count": 2, "score": 1, "last_activity_date": 1446830451, "creation_date": 1444245691, "last_edit_date": 1444300523, "question_id": 33000712, "link": "https://stackoverflow.com/questions/33000712/c-mongodb-driver-how-to-add-date", "title": "C MongoDB driver - how to add Date?", "body": "<p>I feel like C driver for MongoDB is lacking examples that are beyond some basic stuff. I am talking about this documentation <a href=\"http://api.mongodb.org/c/1.2.0/index.html\" rel=\"nofollow\">http://api.mongodb.org/c/1.2.0/index.html</a>. Does anybody have an example of inserting a Date object to database or doing batch update of complete document and not one specific field like in example in documentation? Can't believe there is nothing out there, there has got to be people that still use C right ? :)</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>Ok It seams that people think I'd like to start a discussion which I am not so my question is:</p>\n\n<p>How to add Date object in mongodb with C driver ?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1444244032, "post_id": 33000161, "comment_id": 53825096, "body": "It is in general a bad idea to use floating point functions with integer arithmetics. Even more as there is absolutely no reason to use <code>pow</code> here."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1444244116, "post_id": 33000161, "comment_id": 53825148, "body": "Indeed (<code>pow()</code> is a floating point function) ... and for this particular requirement, I&#39;d consider to operate on the <i>string</i> data"}, {"owner": {"reputation": 14861, "user_id": 516725, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/339c557f2324e9e9347f34e7d65e94d7?s=128&d=identicon&r=PG", "display_name": "AJG85", "link": "https://stackoverflow.com/users/516725/ajg85"}, "edited": false, "score": 0, "creation_date": 1444244247, "post_id": 33000161, "comment_id": 53825223, "body": "It would be much easier to manipulate the string&#39;s characters unless that&#39;s arbitrarily forbidden for what I assume is a homework assignment? Try to ask specific questions rather than implying &quot;What am I doing wrong in this code?&quot; as the SO gremlins will down vote and close your questions otherwise ;-)"}, {"owner": {"reputation": 123, "user_id": 4667973, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/044d4cf0196411c86da766ced7459b1d?s=128&d=identicon&r=PG&f=1", "display_name": "s_anzer", "link": "https://stackoverflow.com/users/4667973/s-anzer"}, "edited": false, "score": 0, "creation_date": 1444244485, "post_id": 33000161, "comment_id": 53825379, "body": "i don&#39;t understand why is it giving correct output for 2 digit number! and could someone PLEASE post the corrected code so that i may understand"}], "answers": [{"comments": [{"owner": {"reputation": 123, "user_id": 4667973, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/044d4cf0196411c86da766ced7459b1d?s=128&d=identicon&r=PG&f=1", "display_name": "s_anzer", "link": "https://stackoverflow.com/users/4667973/s-anzer"}, "edited": false, "score": 0, "creation_date": 1444244792, "post_id": 33000330, "comment_id": 53825581, "body": "now its working fine! thanks :) suggest me some way to understand c programming basics"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1444244856, "post_id": 33000330, "comment_id": 53825613, "body": "err.. &quot;Learn C The Hard Way&quot;? Numerous tutorials out there."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1444244979, "post_id": 33000330, "comment_id": 53825703, "body": "PS you can always &quot;accept&quot; this answer if it helped you."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 2, "last_activity_date": 1444244408, "creation_date": 1444244408, "answer_id": 33000330, "question_id": 33000161, "link": "https://stackoverflow.com/questions/33000161/partially-correct-output-in-c-program/33000330#33000330", "title": "partially correct output in c program", "body": "<p>You code runs fine for me, however it could be a result of floating point rounding as other have suggested.  Rather than using the <code>pow</code> function, keep track of the current power of 10 in a separate variable and multiply by 10 on each iteration.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint main()                        // main should always return int, not void\n{\n    int num, rem, no=0,i=0,p=1;   // p is the current power of 10\n    printf(\"Enter a number: \");\n    scanf(\"%d\", &amp;num);\n    do{\n        rem=num%10;\n        if(rem==9)\n        {\n            rem=0;\n        }else{\n            rem=rem+1;\n        }\n        no+=rem*p;     // multiply by the current power of 10\n        p*=10;         // increase the power of 10\n        num=num/10;\n    }while(num!=0);\n    printf(\"new no: %d\\n\", no);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 123, "user_id": 4667973, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/044d4cf0196411c86da766ced7459b1d?s=128&d=identicon&r=PG&f=1", "display_name": "s_anzer", "link": "https://stackoverflow.com/users/4667973/s-anzer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 33000330, "answer_count": 1, "score": -1, "last_activity_date": 1444244408, "creation_date": 1444243787, "last_edit_date": 1444244362, "question_id": 33000161, "link": "https://stackoverflow.com/questions/33000161/partially-correct-output-in-c-program", "title": "partially correct output in c program", "body": "<pre><code>#include&lt;stdio.h&gt;\n#include&lt;math.h&gt;\nvoid main()\n{\n  int num, rem, no = 0, i = 0;\n  printf(\"Enter a number: \");\n  scanf(\"%d\", &amp;num);\n  do\n  {\n    rem = num % 10;\n    if(rem == 9)\n    {\n      rem = 0;\n    } else {\n      rem = rem + 1;\n    }\n    no = no + (rem * pow(10,i++));\n    num = num / 10;\n  } while(num != 0);\n  printf(\"new no: %d\\n\", no);\n}\n</code></pre>\n\n<p>this code is to add 1 to every digit of a number entered by user and works fine with 2 digit number but when i enter 3 digit number eg:123, the output is 233 instead of 234</p>\n"}, {"tags": ["c", "linux", "windows", "uac", "mingw32"], "comments": [{"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1444255589, "post_id": 33000158, "comment_id": 53831382, "body": "This may help: <a href=\"http://www.transmissionzero.co.uk/computing/win32-apps-with-mingw/\" rel=\"nofollow noreferrer\">transmissionzero.co.uk/computing/win32-apps-with-mingw</a>"}, {"owner": {"reputation": 611, "user_id": 2124090, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a431bd610236ecea837a284e27512608?s=128&d=identicon&r=PG", "display_name": "pr.nizar", "link": "https://stackoverflow.com/users/2124090/pr-nizar"}, "reply_to_user": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1444256819, "post_id": 33000158, "comment_id": 53831872, "body": "@JonathonReinhart Thank you but I&#39;ve tried what&#39;s described on that link too.. and <a href=\"https://msdn.microsoft.com/en-us/library/bb756973.aspx\" rel=\"nofollow noreferrer\">the link it linked to</a> too.. But nothing changed.. I&#39;ve updated my <code>hello.rc</code> file to <code>1 Manifest &quot;hello.exe.manifest&quot;</code>.. With Resource Hacker I&#39;ve opened an NSIS installer (I&#39;ve compiled with makensis) that requires administrator, everything is sensibly the same; the only thing that is different is the manifest field is written &quot;Manifest&quot; in the <code>Setup.exe</code> file and written &quot;MANIFEST&quot; in my <code>hello.exe</code> file! (<a href=\"http://i.imgur.com/WzHtXnw.png\" rel=\"nofollow noreferrer\">See here</a>)"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1463807928, "post_id": 33000158, "comment_id": 62232802, "body": "Normally you compile .rc file to <code>.res</code> file (not <code>.o</code>)"}, {"owner": {"reputation": 2238, "user_id": 8518689, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/LDe4I.jpg?s=128&g=1", "display_name": "turmuka", "link": "https://stackoverflow.com/users/8518689/turmuka"}, "edited": false, "score": 0, "creation_date": 1582288163, "post_id": 33000158, "comment_id": 106735135, "body": "please help me, where are the imgur pictures ?"}], "answers": [{"tags": [], "owner": {"reputation": 611, "user_id": 2124090, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a431bd610236ecea837a284e27512608?s=128&d=identicon&r=PG", "display_name": "pr.nizar", "link": "https://stackoverflow.com/users/2124090/pr-nizar"}, "is_accepted": false, "score": 2, "last_activity_date": 1444262339, "creation_date": 1444262339, "answer_id": 33004392, "question_id": 33000158, "link": "https://stackoverflow.com/questions/33000158/embed-manifest-file-to-require-administrator-execution-level-with-mingw32/33004392#33004392", "title": "Embed manifest file to require administrator execution level with mingw32", "body": "<p>With some intense voodoo I got it to work with this on my <code>hello.rc</code> file:</p>\n\n<pre><code>1 24 \"hello.exe.manifest\"\n</code></pre>\n\n<p>Won't even search to know what the 24 is for (resource type manifest?!).. :-)</p>\n"}, {"tags": [], "owner": {"reputation": 9975, "user_id": 14738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef8b68858adef176d6dc71a727867b38?s=128&d=identicon&r=PG", "display_name": "jussij", "link": "https://stackoverflow.com/users/14738/jussij"}, "is_accepted": true, "score": 3, "last_activity_date": 1463803155, "creation_date": 1463803155, "answer_id": 37358741, "question_id": 33000158, "link": "https://stackoverflow.com/questions/33000158/embed-manifest-file-to-require-administrator-execution-level-with-mingw32/37358741#37358741", "title": "Embed manifest file to require administrator execution level with mingw32", "body": "<p>With regard to the magic voodoo numbers 1 and 24:</p>\n\n<pre><code>1 24 \"hello.exe.manifest\"\n</code></pre>\n\n<p>That line translates to somthing like this:</p>\n\n<pre><code>ID_MANIFEST RT_MANIFEST \"hello.exe.manifest\"\n</code></pre>\n\n<p>where those defines are as defined as follows:</p>\n\n<pre><code>#define ID_MANIFEST 1\n#ifndef RT_MANIFEST\n#define RT_MANIFEST MAKEINTRESOURCE(24)\n#endif\n</code></pre>\n\n<p>As shown above by the conditional wrappers, the <em>RT_MANIFEST</em> might already be defined and if you do a Google search for that <em>RT_MANIFEST</em> term you will find lots of hits with more details on what is going on.</p>\n"}], "owner": {"reputation": 611, "user_id": 2124090, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a431bd610236ecea837a284e27512608?s=128&d=identicon&r=PG", "display_name": "pr.nizar", "link": "https://stackoverflow.com/users/2124090/pr-nizar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2288, "favorite_count": 2, "accepted_answer_id": 37358741, "answer_count": 2, "score": 11, "last_activity_date": 1463803155, "creation_date": 1444243783, "last_edit_date": 1444258891, "question_id": 33000158, "link": "https://stackoverflow.com/questions/33000158/embed-manifest-file-to-require-administrator-execution-level-with-mingw32", "title": "Embed manifest file to require administrator execution level with mingw32", "body": "<p>I'm cross compiling an application with i586-mingw32msvc under ubuntu.</p>\n\n<p>I'm having difficulties understanding how to embed a manifest file to require administrator execution level with mingw32.</p>\n\n<p>For my example I used this <code>hello.c</code>:</p>\n\n<pre><code>int main() {\n    return 0;\n}\n</code></pre>\n\n<p>this resource file <code>hello.rc</code>:</p>\n\n<pre><code>1 Manifest \"hello.exe.manifest\"\n</code></pre>\n\n<p>this manifest file <code>hello.exe.manifest</code>:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?&gt;\n&lt;assembly xmlns=\"urn:schemas-microsoft-com:asm.v1\" manifestVersion=\"1.0\"&gt;\n    &lt;assemblyIdentity version=\"1.0.0.0\" processorArchitecture=\"X86\" name=\"hello\" type=\"win32\"/&gt; \n    &lt;description&gt;Hello World&lt;/description&gt; \n    &lt;trustInfo xmlns=\"urn:schemas-microsoft-com:asm.v2\"&gt;\n        &lt;security&gt;\n            &lt;requestedPrivileges&gt;\n                &lt;requestedExecutionLevel level=\"requireAdministrator\" uiAccess=\"false\"/&gt;\n            &lt;/requestedPrivileges&gt;\n        &lt;/security&gt;\n    &lt;/trustInfo&gt;\n&lt;/assembly&gt;\n</code></pre>\n\n<p>I compile my resource file with:</p>\n\n<pre><code>i586-mingw32msvc-windres hello.rc hello.o\n</code></pre>\n\n<p>I compile my final application with:</p>\n\n<pre><code>i586-mingw32msvc-gcc -O3 -Os -s -o hello.exe hello.c hello.o\n</code></pre>\n\n<p><a href=\"https://technet.microsoft.com/en-us/sysinternals/bb897441.aspx\" rel=\"noreferrer\">SigCheck</a> does not show the manifest file running <code>sigcheck -m hello.exe</code>.</p>\n\n<p>Now when I run my application under Windows it does not trigger the UAC (=does not run as administrator) while when I attach the <code>hello.exe.manifest</code> file in the same folder it does trigger the UAC (as expected).</p>\n\n<p>What did I miss?</p>\n\n<p><strong>EDIT1:</strong> Playing with <a href=\"http://www.angusj.com/resourcehacker\" rel=\"noreferrer\">Resource Hacker</a> I've opened a <code>Setup.exe</code> file I've created with NSIS, the only sensible difference is that <code>Manifest</code> is written <code>MANIFEST</code> in my <code>hello.exe</code> and <code>Manifest</code> in <code>Setup.exe</code> though in <code>hello.rc</code> it's written Manifest. O_o</p>\n\n<p><a href=\"https://i.imgur.com/WzHtXnw.png\" rel=\"noreferrer\"><img src=\"https://i.imgur.com/WzHtXnw.png\" alt=\"NSIS Installer vs hello.exe\"></a></p>\n\n<p><strong>EDIT2:</strong> I've changed the <code>Manifest</code> group manually with Resource Hacker:</p>\n\n<p><a href=\"https://i.imgur.com/6Mn8wFT.png\" rel=\"noreferrer\"><img src=\"https://i.imgur.com/6Mn8wFT.png\" alt=\"Modified with Resource Hacker\"></a></p>\n\n<p>Now <code>hello.exe</code> is acting normally triggering the UAC alert and running as an administrator. Seems like a \"bug\" with <code>i586-mingw32msvc-windres</code>. :-)</p>\n"}, {"tags": ["c", "error-handling", "char"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1444242916, "post_id": 32999860, "comment_id": 53824421, "body": "<code>if (strInput &gt; 100)</code> is not the way to test a string length. It is looking at the string location in memory. Anyway it&#39;s not use checking <i>after</i> the input: that&#39;s too late. You must restrict the input in the first place, either with something like <code>scanf(&quot;%99s&quot;, strInput);</code> or by using <code>fgets()</code>."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1444242953, "post_id": 32999860, "comment_id": 53824439, "body": "You need to use <code>fgets</code> and then check that the buffer is full, but doesn&#39;t have a newline at the end. BTW <code>if(strInput&gt;100)</code> just checks whether the pointer value is greater than 100, which on most systems will always be true. I think you meant <code>if(strlen(strInput)&gt;100)</code>, but that won&#39;t solve your problem."}, {"owner": {"reputation": 185, "user_id": 4522250, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f09b957110d4c6ae6c78943d9190ebc6?s=128&d=identicon&r=PG&f=1", "display_name": "austinscode", "link": "https://stackoverflow.com/users/4522250/austinscode"}, "edited": false, "score": 0, "creation_date": 1444243210, "post_id": 32999860, "comment_id": 53824576, "body": "Okay, great thanks. Yeah looks like using <code>fgets</code> worked. That allows a large input but only outputs up to the 100 character max. Thanks! Anyway to check for spaces?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1444243466, "post_id": 32999860, "comment_id": 53824746, "body": "That&#39;s a new question. But <code>strchr()</code> might help you."}], "answers": [{"comments": [{"owner": {"reputation": 185, "user_id": 4522250, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f09b957110d4c6ae6c78943d9190ebc6?s=128&d=identicon&r=PG&f=1", "display_name": "austinscode", "link": "https://stackoverflow.com/users/4522250/austinscode"}, "edited": false, "score": 1, "creation_date": 1444243495, "post_id": 32999950, "comment_id": 53824766, "body": "Yeah, I ended up using <code>fgets</code> this seems to be the best way to go about checking for errors. Still not sure about handling spaces, but for this assignment it&#39;s not required. Thanks everyone for your help!"}], "tags": [], "owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "is_accepted": true, "score": 2, "last_activity_date": 1444243317, "last_edit_date": 1444243317, "creation_date": 1444242996, "answer_id": 32999950, "question_id": 32999860, "link": "https://stackoverflow.com/questions/32999860/error-checking-for-strinput-to-notify-user-of-an-input-too-large-for-the-program/32999950#32999950", "title": "Error checking for strInput to notify user of an input too large for the program?", "body": "<p>You can use <code>fgets</code> and <code>strchr</code> to check if the string contains a trailing newline:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main(void)\n{\n    char strInput[100], *ptr;\n\n    printf(\"Input word that is 100 characters or less: \\n\");\n    fgets(strInput, sizeof strInput, stdin);\n    if ((ptr = strchr(strInput, '\\n')) == NULL) {\n        printf(\"Too large.\\n\");\n    } else {\n        *ptr = '\\0';\n        printf(\"%s\\n\", strInput);\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 185, "user_id": 4522250, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f09b957110d4c6ae6c78943d9190ebc6?s=128&d=identicon&r=PG&f=1", "display_name": "austinscode", "link": "https://stackoverflow.com/users/4522250/austinscode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 32999950, "answer_count": 1, "score": 1, "last_activity_date": 1444243317, "creation_date": 1444242681, "question_id": 32999860, "link": "https://stackoverflow.com/questions/32999860/error-checking-for-strinput-to-notify-user-of-an-input-too-large-for-the-program", "title": "Error checking for strInput to notify user of an input too large for the program?", "body": "<p>I'm simply trying to implement some error checking in my program. </p>\n\n<p>The program converts strings that are 100 characters or less to words that look like the following hello->hElLo. So every other letter is capitalized. So I simply want to add a statement that tells the user the input is too large and asks them to re-enter a word. Here is what I have, but it just outputs <code>To large.</code> no matter what is entered, then quits the program.</p>\n\n<pre><code>int main(){\n/*Read word from the keyboard using scanf*/\nchar strInput[100];\nprintf(\"Input word that is 100 characters or less: \\n\");\n\nscanf(\"%s\", strInput);\n/*Call studly*/\nstudly(strInput);\n/*Print the new word*/\nif (strInput &gt; 100){\n    printf(\"To large.\");\n}\nelse{\nprintf(\"%s\", strInput);\n}\n\n\nreturn 0;\n}\n</code></pre>\n\n<p>This is just the main function but I think the only thing I need to do is change my <code>if</code> and <code>else</code> statements. Just not sure how to check size of <code>char strInput[100]</code> in the <code>if</code> statment. Also let me know if there is a simple way to handle spaces. Thanks for your help!</p>\n"}, {"tags": ["c", "string", "function", "struct"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1444240855, "post_id": 32999172, "comment_id": 53823216, "body": "This will not even compile. provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, what you expect, what you input and where <b>exactly</b> you get the error. Use a debugger."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1444241023, "post_id": 32999172, "comment_id": 53823323, "body": "It does not come <i>close</i> to compiling.  There are some indications also that it is intended to be C++ code rather than C code (though it doesn&#39;t compile as C++, either).  C++ is a different language."}, {"owner": {"reputation": 320, "user_id": 4971970, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh5.googleusercontent.com/-ebq3RDanYno/AAAAAAAAAAI/AAAAAAAAAD8/dFTk0qPCNuE/photo.jpg?sz=128", "display_name": "Rigel Kent Carbonel", "link": "https://stackoverflow.com/users/4971970/rigel-kent-carbonel"}, "reply_to_user": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 0, "creation_date": 1444241194, "post_id": 32999172, "comment_id": 53823418, "body": "@ameyCU it is a string that holds the valid operators. It is use for the strpbrk()."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1444241319, "post_id": 32999172, "comment_id": 53823487, "body": "@RigelKentCarbonel, armeyCU&#39;s point, as I take it, is that the declaration is not valid (which it indeed isn&#39;t).  I don&#39;t think he&#39;s asking about your intended purpose for the variable."}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1444241632, "post_id": 32999172, "comment_id": 53823659, "body": "@JohnBollinger  It looked weird , but to my surprise it complied . But really I think  that shouldn&#39;t  should be done ."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1444242092, "post_id": 32999172, "comment_id": 53823948, "body": "The <code>value</code> field does not change. <code>temp_num</code> changes - because it is a local variable, it is destroyed when the function exits."}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1444242423, "post_id": 32999172, "comment_id": 53824163, "body": "Can you not use a debugger to setup a write to memory breakpoint on the value being changed to garbage, then figure out who is doing the writing?  Compiler warnings should be respected as well..."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 0, "creation_date": 1444243701, "post_id": 32999172, "comment_id": 53824879, "body": "@ameyCU, well, <code>gcc</code> rejects it with <code>error: variable-sized object may not be initialized</code>.  This is consistent with the standard, which indeed disallows such initializations."}], "answers": [{"comments": [{"owner": {"reputation": 320, "user_id": 4971970, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh5.googleusercontent.com/-ebq3RDanYno/AAAAAAAAAAI/AAAAAAAAAD8/dFTk0qPCNuE/photo.jpg?sz=128", "display_name": "Rigel Kent Carbonel", "link": "https://stackoverflow.com/users/4971970/rigel-kent-carbonel"}, "edited": false, "score": 0, "creation_date": 1444241278, "post_id": 32999357, "comment_id": 53823468, "body": "So how can I allocate the token[].value? I tried allocating a memory in each index of token[] but still doesn&#39;t work."}, {"owner": {"reputation": 81, "user_id": 3125979, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2AFKV.png?s=128&g=1", "display_name": "jbmillard", "link": "https://stackoverflow.com/users/3125979/jbmillard"}, "reply_to_user": {"reputation": 320, "user_id": 4971970, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh5.googleusercontent.com/-ebq3RDanYno/AAAAAAAAAAI/AAAAAAAAAD8/dFTk0qPCNuE/photo.jpg?sz=128", "display_name": "Rigel Kent Carbonel", "link": "https://stackoverflow.com/users/4971970/rigel-kent-carbonel"}, "edited": false, "score": 0, "creation_date": 1444316392, "post_id": 32999357, "comment_id": 53861773, "body": "Use malloc() for each token[].value you want to write to and then use something like strcpy() to copy the values into the memory you allocate."}], "tags": [], "owner": {"reputation": 81, "user_id": 3125979, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2AFKV.png?s=128&g=1", "display_name": "jbmillard", "link": "https://stackoverflow.com/users/3125979/jbmillard"}, "is_accepted": false, "score": 0, "last_activity_date": 1444241003, "creation_date": 1444241003, "answer_id": 32999357, "question_id": 32999172, "link": "https://stackoverflow.com/questions/32999172/calling-function-in-c-will-cause-the-string-value-in-struct-turn-into-garbage-va/32999357#32999357", "title": "Calling function in c will cause the string value in struct turn into garbage value", "body": "<p>You don't appear to be allocating any storage for token[].value.  You set it equal to tempNum, but that goes out of scope in the inner block in Parser().  I would say that anything this code does is undefined because you're accessing memory that was deallocated when Parser() returned.</p>\n"}, {"comments": [{"owner": {"reputation": 320, "user_id": 4971970, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh5.googleusercontent.com/-ebq3RDanYno/AAAAAAAAAAI/AAAAAAAAAD8/dFTk0qPCNuE/photo.jpg?sz=128", "display_name": "Rigel Kent Carbonel", "link": "https://stackoverflow.com/users/4971970/rigel-kent-carbonel"}, "edited": false, "score": 0, "creation_date": 1444242243, "post_id": 32999556, "comment_id": 53824060, "body": "so where should I put the <code>free()</code> function?"}, {"owner": {"reputation": 379, "user_id": 5121918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LHw0a.png?s=128&g=1", "display_name": "jrsmolley", "link": "https://stackoverflow.com/users/5121918/jrsmolley"}, "reply_to_user": {"reputation": 320, "user_id": 4971970, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh5.googleusercontent.com/-ebq3RDanYno/AAAAAAAAAAI/AAAAAAAAAD8/dFTk0qPCNuE/photo.jpg?sz=128", "display_name": "Rigel Kent Carbonel", "link": "https://stackoverflow.com/users/4971970/rigel-kent-carbonel"}, "edited": false, "score": 1, "creation_date": 1444242515, "post_id": 32999556, "comment_id": 53824219, "body": "You want to <code>free</code> any memory that you allocate before it goes out of scope. So in this case you want to make sure it is freed before leaving the <code>processingComponent()</code> function because that is where you declared the token[] array. A good rule of thumb would be to allocate and free the memory within the same function: I&#39;ll edit my reply to show you what I mean..."}, {"owner": {"reputation": 379, "user_id": 5121918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LHw0a.png?s=128&g=1", "display_name": "jrsmolley", "link": "https://stackoverflow.com/users/5121918/jrsmolley"}, "reply_to_user": {"reputation": 320, "user_id": 4971970, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh5.googleusercontent.com/-ebq3RDanYno/AAAAAAAAAAI/AAAAAAAAAD8/dFTk0qPCNuE/photo.jpg?sz=128", "display_name": "Rigel Kent Carbonel", "link": "https://stackoverflow.com/users/4971970/rigel-kent-carbonel"}, "edited": false, "score": 1, "creation_date": 1444243040, "post_id": 32999556, "comment_id": 53824485, "body": "No problem. I&#39;d highly recommend reading up on memory allocation using malloc() and free(), and how to pass arrays to functions: handling strings and pointers can be tricky in C and introduce hard-to-find bugs later on down the road. There are some best-practices for things as well, such as using <code>strncpy()</code> instead of <code>strcpy()</code> to prevent buffer overflows (dangerous!) and also ensure you manually add null-terminators to strings. Just my opinion. Good luck!"}, {"owner": {"reputation": 320, "user_id": 4971970, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh5.googleusercontent.com/-ebq3RDanYno/AAAAAAAAAAI/AAAAAAAAAD8/dFTk0qPCNuE/photo.jpg?sz=128", "display_name": "Rigel Kent Carbonel", "link": "https://stackoverflow.com/users/4971970/rigel-kent-carbonel"}, "edited": false, "score": 0, "creation_date": 1444243302, "post_id": 32999556, "comment_id": 53824634, "body": "Oh thank you. I learned a lot for this question and answers :)"}], "tags": [], "owner": {"reputation": 379, "user_id": 5121918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LHw0a.png?s=128&g=1", "display_name": "jrsmolley", "link": "https://stackoverflow.com/users/5121918/jrsmolley"}, "is_accepted": true, "score": 1, "last_activity_date": 1444242884, "last_edit_date": 1444242884, "creation_date": 1444241687, "answer_id": 32999556, "question_id": 32999172, "link": "https://stackoverflow.com/questions/32999172/calling-function-in-c-will-cause-the-string-value-in-struct-turn-into-garbage-va/32999556#32999556", "title": "Calling function in c will cause the string value in struct turn into garbage value", "body": "<p>For starters, when you pass an array of tokens to the Parser and Evaluator functions, you are passing the variables by value. The <code>token</code> array is not actually changed after calling <code>Parser()</code>:</p>\n\n<p>`</p>\n\n<pre><code>int Parser(char *input_string, struct tokens myArray[size])\n{\n    //modifying myArray will not modify the array that was actually passed\n    //to this function from the processingComponent() function.\n}\n</code></pre>\n\n<p>`</p>\n\n<p>First change your Parser and Evaluator functions like so:</p>\n\n<pre><code>#define ARRAY_SIZE 100 //an arbitrary size\n\nint Parser( char* input_string, struct token* tokenArray ) \n{\n    //access each element as so:\n    //tokenArray[0];\n    //tokenArray[ ARRAY_SIZE - 1 ];\n\n}\n\nint Evaluator(int *result, struct token* tokenArray )\n{\n    for(int x = 0; x &lt; ARRAY_SIZE; x++)\n        printf(\"%s\", tokenArray[x].value);\n    return 0;\n}\n</code></pre>\n\n<p>Then call the <code>Parser()</code> function as so:\nEDIT: Since it is a good idea to allocate and free memory within the same function (so that you don't end up with spaghetti code), this would be a better solution:</p>\n\n<pre><code>int processingComponent(char *input_string, int *result)\n{\n    int error_flag = 0;                             \n\n    token tokenArray[ARRAY_SIZE];\n\n    //allocate memory here\n    for( int i = 0; i &lt; ARRAY_SIZE; i++ ) {\n         tokenArray[i].value = (char*)malloc( sizeof(char) * MAX_STRING_LENGTH);\n    }\n\n    error_flag = Parser(input_string, &amp;tokenArray[0]);   \n\n    if (error_flag == 0)                                \n        error_flag = Evaluator(result, &amp;tokenArray[0]);    \n\n    //free memory here before the token array goes out of scope:\n    for( int i = 0; i &lt; ARRAY_SIZE; i++ ) {\n         free( tokenArray[i].value );\n         tokenArray[i].value = NULL;\n    }\n\n    return error_flag;\n}\n</code></pre>\n\n<p>When you allocate memory for your token string, it needs to be dynamically allocated using malloc() and deleted using free(). </p>\n\n<p>Replace this:</p>\n\n<pre><code>strcpy(tempNum, number_string);\ntoken[countStruct].value = tempNum;\n\n//with:\n\n#define MAX_STRING_LENGTH 255 //arbitrary\n\n//Memory has already been allocated, so just copy the string into the token\nstrncpy( token[countStruct].value, number_string, MAX_STRING_LENGTH - 1 ); \ntoken[countStruct].value[MAX_STRING_LENGTH-1] = NULL;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 17, "user_id": 5411259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f400f18ac4293285e5e40262760d961b?s=128&d=identicon&r=PG&f=1", "display_name": "srhaider", "link": "https://stackoverflow.com/users/5411259/srhaider"}, "edited": false, "score": 0, "creation_date": 1444256390, "post_id": 33003337, "comment_id": 53831726, "body": "To use pointer variable of structure you should have to do malloc each and every time with new variable."}], "tags": [], "owner": {"reputation": 17, "user_id": 5411259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f400f18ac4293285e5e40262760d961b?s=128&d=identicon&r=PG&f=1", "display_name": "srhaider", "link": "https://stackoverflow.com/users/5411259/srhaider"}, "is_accepted": false, "score": 0, "last_activity_date": 1444256748, "last_edit_date": 1444256748, "creation_date": 1444256147, "answer_id": 33003337, "question_id": 32999172, "link": "https://stackoverflow.com/questions/32999172/calling-function-in-c-will-cause-the-string-value-in-struct-turn-into-garbage-va/33003337#33003337", "title": "Calling function in c will cause the string value in struct turn into garbage value", "body": "<h2>Precautions with Structures</h2>\n\n<p>I have added a text file, which contains your running code with instructions.</p>\n\n<p>one important thing you can not assign any thing directly into structure, because declaration of structure reserve no space.</p>\n\n<p>Why did you do such a hectic job to achieve something like this..</p>\n\n<p>input :12+3-1/7</p>\n\n<p>output:12317</p>\n\n<p><a href=\"https://onedrive.live.com/redir?resid=72191293351AE1F2!128&amp;authkey=!AISMIXvwjaSfmi8&amp;ithint=file%2Ctxt\" rel=\"nofollow\">Click this link to get your running c code</a></p>\n"}], "owner": {"reputation": 320, "user_id": 4971970, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh5.googleusercontent.com/-ebq3RDanYno/AAAAAAAAAAI/AAAAAAAAAD8/dFTk0qPCNuE/photo.jpg?sz=128", "display_name": "Rigel Kent Carbonel", "link": "https://stackoverflow.com/users/4971970/rigel-kent-carbonel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 159, "favorite_count": 0, "accepted_answer_id": 32999556, "answer_count": 3, "score": -1, "last_activity_date": 1444256748, "creation_date": 1444240356, "last_edit_date": 1444241733, "question_id": 32999172, "link": "https://stackoverflow.com/questions/32999172/calling-function-in-c-will-cause-the-string-value-in-struct-turn-into-garbage-va", "title": "Calling function in c will cause the string value in struct turn into garbage value", "body": "<p>This code has a problem in the struct data members. When I call a function like <code>Evaluator()</code> function the token[0].value will corrupt or will turn into a garbage. I tried to allocate a memory for the value data member but still no luck. I also tried to allocate a memory for the struct itself but still it doesn't work. Can someone help me with this? </p>\n\n<pre><code>    struct tokens               \n{\n    char *value;\n    char type = ' ';\n};\n\n\n\n\nvoid inputComponent(char input_string[size])                    \n    printf(\"\\n&gt; \");                                             \n    scanf(\"%[^\\n]s\", input_string);                                 \n}\n\nint processingComponent(char *input_string, int *result)\n{\n    int error_flag = 0;                             \n\n     tokens token[size];\n\n\n    error_flag = Parser(input_string, token);   \n\n    if (error_flag == 0)                                \n        error_flag = Evaluator(result, token);          \n    return error_flag;\n}\n\nint Parser(char *input_string, struct tokens token[size])\n{\n    char valid_operators[size] = { \"+-*/%\" }; \n    char temp = ' ';                                        \n    char number_string[size] = { NULL };                \n    int counter = 0;                                \n    int countStruct = 0;\n    int tempCounter = 0;\n    do\n    {\n        temp = input_string[counter];           \n        if (isdigit(temp))                          \n        {\n            number_string[tempCounter] = temp;          \n            tempCounter++;\n        }\n        else if (strpbrk(input_string, valid_operators))\n        {\n            if (temp == '%')                            \n                return (-1);                            \n            else if (number_string != NULL)         \n            {\n                char tempNum[size] = { NULL };\n\n                strcpy(tempNum, number_string);\n\n                token[countStruct].value = tempNum;\n                token[countStruct].type = 'N';\n                countStruct++;\n                tempCounter = 0;\n                for (int x = 0; number_string[x] != NULL; x++)\n                    number_string[x] = NULL;\n            }\n        }\n        else\n            return (-2);\n        counter++;\n    } while (counter &lt; strlen(input_string));\n\n    return 0;\n}\n\nint Evaluator(int *result, struct tokens token[size])\n{\n    for(int x = 0; x &lt; 3; x++)    //value of token[0].value = \u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\n\n        printf(\"%s\", token[x].value);\n    return 0;\n}\nint _tmain(int argc, _TCHAR* argv[])                    \n{\n    char input_string[size] = { NULL };                 \n    int result = 0;                                     \n    int error_flag = 0;                                 \n    inputComponent(input_string);                   \n    error_flag = processingComponent(input_string, &amp;result); \n    _getch();\n    _getch();\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "buffer", "ipc", "fifo"], "comments": [{"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1444240532, "post_id": 32999150, "comment_id": 53823009, "body": "You can pump quite a few hundres of megabytes through a fifo in a second, so what exactly takes 2 seconds ? The buffer size is unlikely the fault here."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1444240973, "post_id": 32999150, "comment_id": 53823288, "body": "Questions seeking debugging help (&quot;why isn&#39;t this code working?&quot;) must include the desired behavior, a specific problem or error and the shortest code necessary to reproduce it in the question itself. Questions without a clear problem statement are not useful to other readers. See: How to create a Minimal, Complete, and Verifiable example."}, {"owner": {"reputation": 3319, "user_id": 865719, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/CSVe2.png?s=128&g=1", "display_name": "maddouri", "link": "https://stackoverflow.com/users/865719/maddouri"}, "edited": false, "score": 0, "creation_date": 1444247035, "post_id": 32999150, "comment_id": 53826991, "body": "We can&#39;t help you if you don&#39;t provide any code snippet. Nonetheless, I&#39;d suggest you take a look at <a href=\"http://beej.us/guide/bgipc/output/html/singlepage/bgipc.html#fifos\" rel=\"nofollow noreferrer\">Beej&#39;s Guide</a> and  <a href=\"http://www.tldp.org/LDP/lpg/node15.html#SECTION00730000000000000000\" rel=\"nofollow noreferrer\">TLDP</a> if you&#39;re new to Unix IPCs."}], "owner": {"reputation": 36, "user_id": 5372766, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-fQw4UmRO97I/AAAAAAAAAAI/AAAAAAAACcQ/vbkaQtA06o0/photo.jpg?sz=128", "display_name": "mohamed larbi gharib", "link": "https://stackoverflow.com/users/5372766/mohamed-larbi-gharib"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 342, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1444240278, "creation_date": 1444240278, "last_edit_date": 1492086987, "question_id": 32999150, "link": "https://stackoverflow.com/questions/32999150/ipc-fifo-buffer-size", "title": "IPC Fifo buffer size", "body": "<p>Thank you for your help.</p>\n\n<p>I am developing two programs in C and C++ that communicate with interprocess communication based on FIFO files generated with mkfifo() by the first program. The communication works fine but it seems to be too slow it takes about 2 seconds to be read. I think that the buffer size of the fifo (by default on Squeeze 6 Debian Linux 2.6.32-5-amd64 x86_64 GNU/Linux 65336 bytes) is to big how can I reduce it ?</p>\n\n<p>By the way I have tried to find this file <strong>/proc/sys/fs/pipe-max-size</strong> but unfortunatly it is not present on my system  (shall I create it ?). (src=\"<a href=\"https://unix.stackexchange.com/questions/11946/how-big-is-the-pipe-buffer\">https://unix.stackexchange.com/questions/11946/how-big-is-the-pipe-buffer</a>\")</p>\n"}, {"tags": ["c", "variables", "at-command"], "answers": [{"tags": [], "owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "is_accepted": true, "score": 1, "last_activity_date": 1444240171, "creation_date": 1444240171, "answer_id": 32999108, "question_id": 32999034, "link": "https://stackoverflow.com/questions/32999034/use-variable-value-in-at-command-string/32999108#32999108", "title": "Use variable value in AT command string?", "body": "<p>I think what you want:</p>\n\n<pre><code>char msg[128] = {0};\nchar* payload = \"here is payload data\";\nint payloadSize = strlen(payload);\n\n// replaces %d with the payload size: 22, or 25, or other value)\nsprintf(msg, \"AT+QHTTPPOST=%d,25,10\\r\", payloadSize);\n\nSendComd_Resp(msg, \"CONNECT\",5000);  // actually send the formatted message\n</code></pre>\n"}], "owner": {"reputation": 269, "user_id": 2833813, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f3558205a7fa8676cbb3b573734a71b2?s=128&d=identicon&r=PG&f=1", "display_name": "user6161", "link": "https://stackoverflow.com/users/2833813/user6161"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 459, "favorite_count": 0, "accepted_answer_id": 32999108, "answer_count": 1, "score": 1, "last_activity_date": 1444281233, "creation_date": 1444239909, "last_edit_date": 1444281233, "question_id": 32999034, "link": "https://stackoverflow.com/questions/32999034/use-variable-value-in-at-command-string", "title": "Use variable value in AT command string?", "body": "<p>I'm working on pic interfacing with GSM/GPRS module. Since I work around with GSM/GPRS, I've to use AT commands. Here I'm working on a protocol called HTTP. I'm needing to pass a variable in an AT commands. </p>\n\n<p>Here is AT command code:</p>\n\n<pre><code>SendComd_Resp(\"AT+QHTTPPOST=22,25,10\\r\",\"CONNECT\",5000);\n</code></pre>\n\n<p>From the above AT command \"22\" represent length of payload. </p>\n\n<pre><code>py_dt=strlen(\"here is payload data\");\n</code></pre>\n\n<p>I just want to pass py_dt in that AT command instead \"22\". Like below...</p>\n\n<pre><code>SendAtCommand_Response(\"AT+QHTTPPOST=py_dt,25,10\\r\",\"CONNECT\",5000);\n</code></pre>\n\n<p>How to pass that variable? I'm using C language.</p>\n"}, {"tags": ["c", "mingw", "codeblocks"], "comments": [{"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 0, "creation_date": 1444240270, "post_id": 32999029, "comment_id": 53822875, "body": "Add <code>-Wshadow</code> to your compiler flags to receive a warning. See <a href=\"https://en.wikipedia.org/wiki/Variable_shadowing\" rel=\"nofollow noreferrer\">variable shadowing</a>."}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 1, "last_activity_date": 1444240100, "creation_date": 1444240100, "answer_id": 32999085, "question_id": 32999029, "link": "https://stackoverflow.com/questions/32999029/warning-for-variable-multiple-definition/32999085#32999085", "title": "Warning for variable Multiple Definition", "body": "<blockquote>\n  <p>Is the scope of the variable inside the main is different from its scope outside the main.</p>\n</blockquote>\n\n<p>Yes. They are two different variables. Hence, there is no multiple variable definition error.</p>\n\n<p>Verify it using the following program:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint var1;\nvoid foo();\n\nint main (void)\n{\n    int var1;\n    var1=12;\n    printf(\"%d\\n\",var1);\n    foo();\n}\n\nvoid foo()\n{\n    var1=20;\n    printf(\"%d\\n\",var1);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": false, "score": 1, "last_activity_date": 1444240836, "last_edit_date": 1444240836, "creation_date": 1444240212, "answer_id": 32999124, "question_id": 32999029, "link": "https://stackoverflow.com/questions/32999029/warning-for-variable-multiple-definition/32999124#32999124", "title": "Warning for variable Multiple Definition", "body": "<p>No, it's not multiple definitions, because they <em>are</em> in different scopes. In the scope of <code>main()</code>, you have a different variable. Normally, variables from outer scopes are alive in inner scopes, too, but having a variable of the same name <em>shadows</em> the variable of the outer scope.</p>\n\n<p>That said, it's often just <em>bad practice</em>, as it can easily lead to bugs having multiple variables of the same name. A compiler <em>could</em> try to detect this and warn about it, but that would probably lead to many false positives as it's legal after all and sometimes there are good uses.</p>\n\n<p>Edit: as cremno points out in a comment, GCC (and thus mingw) is able to show such warnings with the flag <code>-Wshadow</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 2414, "user_id": 5339529, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/4ecd2b15539f40fea4bbb59864ad9fc0?s=128&d=identicon&r=PG&f=1", "display_name": "ForeverStudent", "link": "https://stackoverflow.com/users/5339529/foreverstudent"}, "is_accepted": false, "score": 0, "last_activity_date": 1444246222, "creation_date": 1444246222, "answer_id": 33000850, "question_id": 32999029, "link": "https://stackoverflow.com/questions/32999029/warning-for-variable-multiple-definition/33000850#33000850", "title": "Warning for variable Multiple Definition", "body": "<p>As others have stated, those are different variables as far as the compiler is concerned. the int var1 that is declared outside of your main function lives in the global scope which is accessible to ALL functions in your program (that are declared in the same file or other files compiledand linked together using extern).</p>\n\n<p>the variable int var1 that you declared in your Main function lives in the stack frame inside which your Main function is running. Although legal, what you are doing is generally not considered good practice and you should avoid it unless you have a very good reason otherwise </p>\n"}], "owner": {"reputation": 233, "user_id": 5375911, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/3a63cfd1908b25a60940e19e2878b1ad?s=128&d=identicon&r=PG&f=1", "display_name": "Jon Wheelock", "link": "https://stackoverflow.com/users/5375911/jon-wheelock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "accepted_answer_id": 32999085, "answer_count": 3, "score": 0, "last_activity_date": 1444246222, "creation_date": 1444239881, "question_id": 32999029, "link": "https://stackoverflow.com/questions/32999029/warning-for-variable-multiple-definition", "title": "Warning for variable Multiple Definition", "body": "<p>I was expecting error message (or atleast the warning) for multiple definition of variable var1 below. That means is this not a multiple definition? Is the scope of the variable inside the main is different from its scope outside the main.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint var1;\nint main (void)\n{\n    int var1;\n    var1=12;\n    printf(\"%d\",var1);\n}\n</code></pre>\n"}, {"tags": ["c", "function", "indirection"], "comments": [{"owner": {"reputation": 26962, "user_id": 62365, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ba579b23ef4515920a77366d520bf3c8?s=128&d=identicon&r=PG", "display_name": "Diego Sevilla", "link": "https://stackoverflow.com/users/62365/diego-sevilla"}, "edited": false, "score": 0, "creation_date": 1444239991, "post_id": 32998998, "comment_id": 53822732, "body": "Given these function definitions, you don&#39;t have to use either <code>&amp;</code> nor <code>*</code>, just pass <code>BufferX</code>."}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1444240050, "post_id": 32998998, "comment_id": 53822763, "body": "<code>char *BufferX</code> here is a pointer to <code>char</code>, often meaning a null terminated C string."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1444240068, "post_id": 32998998, "comment_id": 53822773, "body": "Microcontrollers like semicolons, too!"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1444241120, "post_id": 32998998, "comment_id": 53823377, "body": "Actually <code>*</code> is called the <i>dereference operator</i>, while <code>&amp;</code> is the <i>address (of) operator</i>"}, {"owner": {"reputation": 939, "user_id": 745347, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/d0EqB.jpg?s=128&g=1", "display_name": "E_Blue", "link": "https://stackoverflow.com/users/745347/e-blue"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1444241997, "post_id": 32998998, "comment_id": 53823879, "body": "@wildplasser I know, but when I realize about my mistake was too late and, in order to edit, I must to change at least 6 characters."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1444242234, "post_id": 32998998, "comment_id": 53824053, "body": "<code>return xResult;</code> is more than 6 characters."}], "answers": [{"comments": [{"owner": {"reputation": 939, "user_id": 745347, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/d0EqB.jpg?s=128&g=1", "display_name": "E_Blue", "link": "https://stackoverflow.com/users/745347/e-blue"}, "edited": false, "score": 0, "creation_date": 1444241795, "post_id": 32999093, "comment_id": 53823757, "body": "Are you talking about prototypes? Yes, I have that part clear."}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "reply_to_user": {"reputation": 939, "user_id": 745347, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/d0EqB.jpg?s=128&g=1", "display_name": "E_Blue", "link": "https://stackoverflow.com/users/745347/e-blue"}, "edited": false, "score": 0, "creation_date": 1444242225, "post_id": 32999093, "comment_id": 53824043, "body": "@E_Blue Yes, that&#39;s exactly what I am talking about. Forward declarations and prototypes are the same thing."}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": false, "score": 2, "last_activity_date": 1444241295, "last_edit_date": 1444241295, "creation_date": 1444240127, "answer_id": 32999093, "question_id": 32998998, "link": "https://stackoverflow.com/questions/32998998/calling-a-function-with-indirect-operator/32999093#32999093", "title": "Calling a function with indirect operator", "body": "<blockquote>\n  <p>I have two functions that uses indirect operator <code>*</code></p>\n</blockquote>\n\n<p>The asterisk <code>*</code> can be interpreted as a <em>dereference operator</em> in the context of an expression. In the context of a declaration it serves to indicate that the type being declared is a pointer.</p>\n\n<blockquote>\n  <p>[I] need to call the second function from the first function and pass the parameters given to the first function</p>\n</blockquote>\n\n<p>Since both types are identical, you do not need to use any operator at all: simply pass the value of the pointer unchanged, like this:</p>\n\n<pre><code>xResult=Func2(Event, BufferX);\n</code></pre>\n\n<p><strong>Note:</strong> It goes without saying that you need a forward declaration of <code>Func2</code> in order for this call to be interpreted correctly.</p>\n"}, {"tags": [], "owner": {"reputation": 5397, "user_id": 1482455, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/dZ1fN.jpg?s=128&g=1", "display_name": "YePhIcK", "link": "https://stackoverflow.com/users/1482455/yephick"}, "is_accepted": false, "score": 1, "last_activity_date": 1444240129, "creation_date": 1444240129, "answer_id": 32999094, "question_id": 32998998, "link": "https://stackoverflow.com/questions/32998998/calling-a-function-with-indirect-operator/32999094#32999094", "title": "Calling a function with indirect operator", "body": "<p>The correct call is:</p>\n\n<pre><code>xResult=Func2(Event, /*nothing here*/BufferX);\n</code></pre>\n\n<p>Since your <code>BufferX</code> is already of a correct data type you don't have to either de-reference or take an address of it.</p>\n"}, {"comments": [{"owner": {"reputation": 939, "user_id": 745347, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/d0EqB.jpg?s=128&g=1", "display_name": "E_Blue", "link": "https://stackoverflow.com/users/745347/e-blue"}, "edited": false, "score": 0, "creation_date": 1444241886, "post_id": 32999102, "comment_id": 53823815, "body": "Do you tried to write char* instead char** or there&#39;s a type char** that I don&#39;t know about?"}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "reply_to_user": {"reputation": 939, "user_id": 745347, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/d0EqB.jpg?s=128&g=1", "display_name": "E_Blue", "link": "https://stackoverflow.com/users/745347/e-blue"}, "edited": false, "score": 0, "creation_date": 1444242214, "post_id": 32999102, "comment_id": 53824033, "body": "@E_Blue No I really meant <code>char**</code>. The <code>*</code> in <code>type*</code> means &quot;pointer to&quot;, so <code>char*</code> = pointer to <code>char</code>, and <code>char**</code> = pointer to <code>char*</code>."}, {"owner": {"reputation": 939, "user_id": 745347, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/d0EqB.jpg?s=128&g=1", "display_name": "E_Blue", "link": "https://stackoverflow.com/users/745347/e-blue"}, "edited": false, "score": 0, "creation_date": 1444245085, "post_id": 32999102, "comment_id": 53825774, "body": "Pointerception. Never read about it before. Any word to recommend me to perform a search about?"}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "reply_to_user": {"reputation": 939, "user_id": 745347, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/d0EqB.jpg?s=128&g=1", "display_name": "E_Blue", "link": "https://stackoverflow.com/users/745347/e-blue"}, "edited": false, "score": 0, "creation_date": 1444246432, "post_id": 32999102, "comment_id": 53826605, "body": "Well, pointers to pointers are nothing special, especially in C. After all, a pointer is a basic variable, just like an int. And then you have a pointer to that variable."}], "tags": [], "owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "is_accepted": false, "score": 1, "last_activity_date": 1444240160, "creation_date": 1444240160, "answer_id": 32999102, "question_id": 32998998, "link": "https://stackoverflow.com/questions/32998998/calling-a-function-with-indirect-operator/32999102#32999102", "title": "Calling a function with indirect operator", "body": "<p><code>Func2</code> wants an argument of type <code>char*</code>. The type of <code>BufferX</code> is already <code>char*</code>.</p>\n\n<p>Thus you can just pass <code>BufferX</code> straight to <code>Func2</code>:</p>\n\n<pre><code>xResult = Func2(Event, BufferX);\n</code></pre>\n\n<p><code>&amp;BufferX</code> would give you the address of <code>BufferX</code>, of type <code>char**</code>, while <code>*BufferX</code> would give you the thing that <code>BufferX</code> points to, i.e. a <code>char</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 1, "last_activity_date": 1444240205, "creation_date": 1444240205, "answer_id": 32999121, "question_id": 32998998, "link": "https://stackoverflow.com/questions/32998998/calling-a-function-with-indirect-operator/32999121#32999121", "title": "Calling a function with indirect operator", "body": "<p>The code you presented is <em>not</em> using the indirection operator, it is using pointer types.  Values having pointer type are the only kind that can be operands of the indirection operator, but that's a separate matter.</p>\n\n<p>Specifically, argument <code>BufferX</code> of function <code>Func1()</code> has type <code>char *</code>, which makes it a pointer to a <code>char</code> (presumably it points to the <em>first</em> <code>char</code> of a longer buffer).</p>\n\n<p>Argument <code>BufferX</code> to <code>Func2()</code> also has type <code>char *</code>.  If it is appropriate to pass on the arguments from <code>Func1()</code> to <code>Func2()</code>, then you do not need any adornment -- you just want to pass the values you received:</p>\n\n<pre><code>xResult = Func2(Event, BufferX);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3784, "user_id": 2924323, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/6XBqj.jpg?s=128&g=1", "display_name": "Ramesh-X", "link": "https://stackoverflow.com/users/2924323/ramesh-x"}, "is_accepted": false, "score": 2, "last_activity_date": 1444240270, "creation_date": 1444240270, "answer_id": 32999149, "question_id": 32998998, "link": "https://stackoverflow.com/questions/32998998/calling-a-function-with-indirect-operator/32999149#32999149", "title": "Calling a function with indirect operator", "body": "<p>let <code>var</code> be a pointer..</p>\n\n<p><code>*var</code> means value the pointer refers..</p>\n\n<p><code>&amp;var</code> means the address of the variable var(No matter it is a pointer)</p>\n\n<p>so in this case you need to pass only the variable.</p>\n\n<pre><code>xResult=Func2(Event, BufferX);\n</code></pre>\n\n<p>Its because Func2 is asking for a pointer in its second argument. (Not a value, not a address to a pointer.. )</p>\n"}], "owner": {"reputation": 939, "user_id": 745347, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/d0EqB.jpg?s=128&g=1", "display_name": "E_Blue", "link": "https://stackoverflow.com/users/745347/e-blue"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 677, "favorite_count": 0, "answer_count": 5, "score": 0, "last_activity_date": 1444244944, "creation_date": 1444239788, "last_edit_date": 1444244944, "question_id": 32998998, "link": "https://stackoverflow.com/questions/32998998/calling-a-function-with-indirect-operator", "title": "Calling a function with indirect operator", "body": "<p>I have two functions that uses indirect operator <code>*</code> and need to call the second function from the first function and pass the parameters given to the first function and dubious about if I must to use <code>*</code> or <code>&amp;</code> to pass the buffer address.</p>\n\n<pre><code>char Func1(short Enable, char Event, char *BufferX)\n{\n    char xResult;\n\n    xResult=Func2(Event, ?BufferX);//* or &amp;\n    return xResult;\n}\n\nchar Func2(char Event, char *BufferX)\n{\n\n}\n</code></pre>\n\n<p>The code is C for microcontrollers, not standard C.</p>\n"}, {"tags": ["c", "struct", "pthreads"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 2, "creation_date": 1444239734, "post_id": 32998938, "comment_id": 53822606, "body": "<i>the array was initialize with all numbers</i>. Did you initialize them with numbers like <code>1</code>, or characters like <code>&#39;1&#39;</code>? You need to use the latter not the former in order to get <code>isdigit()</code> to return true."}, {"owner": {"reputation": 366, "user_id": 1276591, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/e811eccf4a68944bbddbfeb89911cd9c?s=128&d=identicon&r=PG", "display_name": "KhoaVo", "link": "https://stackoverflow.com/users/1276591/khoavo"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1444239802, "post_id": 32998938, "comment_id": 53822650, "body": "I initialize it with 1 as in integer."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 2, "creation_date": 1444239844, "post_id": 32998938, "comment_id": 53822671, "body": "That&#39;s the problem. You can convert numbers to their character representations by adding <code>&#39;0&#39;</code> to them."}, {"owner": {"reputation": 366, "user_id": 1276591, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/e811eccf4a68944bbddbfeb89911cd9c?s=128&d=identicon&r=PG", "display_name": "KhoaVo", "link": "https://stackoverflow.com/users/1276591/khoavo"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1444239849, "post_id": 32998938, "comment_id": 53822675, "body": "oh, I see, then I guess ill try a different approach then"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1444240006, "post_id": 32998938, "comment_id": 53822739, "body": "@wolfhead321wolfhead321 this MIGHT be an <i>xy-problem</i>. What exactly do you expect <code>isdigit()</code> to return here? Maybe describe something, that <i>is</i> an <code>int</code> but you don&#39;t want to consider it &quot;valid&quot; ..."}, {"owner": {"reputation": 366, "user_id": 1276591, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/e811eccf4a68944bbddbfeb89911cd9c?s=128&d=identicon&r=PG", "display_name": "KhoaVo", "link": "https://stackoverflow.com/users/1276591/khoavo"}, "edited": false, "score": 0, "creation_date": 1444240220, "post_id": 32998938, "comment_id": 53822852, "body": "yes Im trying to check whether a solution for sudoku of size 9x9 is valid or not, My other approach is to create a temporary array  of size 0, and then assign element of array to a holder then check if <code>temparr[holder] == 0 </code>"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1444240579, "post_id": 32998938, "comment_id": 53823040, "body": "@wolfhead321wolfhead321, you cannot create a zero-length array, and if you could, it would not have any elements to assign anything to.  Do you perhaps just want <code>(0 &lt; temp-&gt;arr[i][j]) &amp;&amp; (temp-&gt;arr[i][j] &lt;= SIZE)</code> ?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1444240592, "post_id": 32998938, "comment_id": 53823047, "body": "Still don&#39;t get it. Please give an example for an input value where the <code>isdigit()</code> -- <i>as used in your code</i> -- should evaluate to logical <code>false</code>."}, {"owner": {"reputation": 366, "user_id": 1276591, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/e811eccf4a68944bbddbfeb89911cd9c?s=128&d=identicon&r=PG", "display_name": "KhoaVo", "link": "https://stackoverflow.com/users/1276591/khoavo"}, "edited": false, "score": 0, "creation_date": 1444241173, "post_id": 32998938, "comment_id": 53823405, "body": "sorry, this is my mistake. I was suppose to check if elements in role was unique(from 1-9), but instead i checked wether elements are digit."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1444241220, "post_id": 32998938, "comment_id": 53823427, "body": "In this <code>if(isdigit(temp-&gt;arr[i][j]) &amp;&amp; temp-&gt;arr[i][j] &lt;= SIZE)</code> you are mixing <code>char</code> range checking with <code>int</code> range checking. Why don&#39;t you write <code>if(temp-&gt;arr[i][j] &gt; 0 &amp;&amp; temp-&gt;arr[i][j] &lt;= SIZE)</code>?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1444241247, "post_id": 32998938, "comment_id": 53823451, "body": "The <code>isdigit</code>, etc. functions are in file <code>c(haracter)type.h</code> and are called &quot;<b>character</b> classification functions&quot; for a reason. <a href=\"http://port70.net/~nsz/c/c11/n1570.html#7.4.1\" rel=\"nofollow noreferrer\">port70.net/~nsz/c/c11/n1570.html#7.4.1</a> Did you not wonder what <code>isalpha()</code> would do with an normal integer value?"}], "answers": [{"tags": [], "owner": {"reputation": 3784, "user_id": 2924323, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/6XBqj.jpg?s=128&g=1", "display_name": "Ramesh-X", "link": "https://stackoverflow.com/users/2924323/ramesh-x"}, "is_accepted": false, "score": 1, "last_activity_date": 1444241187, "creation_date": 1444241187, "answer_id": 32999414, "question_id": 32998938, "link": "https://stackoverflow.com/questions/32998938/is-digit-doesnt-return-true-on-int-array-elements/32999414#32999414", "title": "is digit doesn&#39;t return true on int array elements", "body": "<p>Click here for documentation of <a href=\"http://www.cplusplus.com/reference/cctype/isdigit/\" rel=\"nofollow\">isdigit</a>..</p>\n\n<p>isdigit(int) actually needs a <code>char</code> value. It returns whether the input <code>char</code> value is lies between 48 to 57(ASCII values of 0-9).</p>\n\n<p>So if you need to check whether <code>temp-&gt;arr[i][j]</code> is a digit, you can use eight <code>isdigit(48 + temp-&gt;arr[i][j])</code> or <code>isdigit('0' + temp-&gt;arr[i][j])</code>.</p>\n\n<p><code>arr</code> is actually a integer array. So you can't store any other type of variable in <code>arr</code>. What is the point of checking..? You can use this to check whether there is only one digit in an element of the array..</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 1, "last_activity_date": 1444242452, "creation_date": 1444242452, "answer_id": 32999795, "question_id": 32998938, "link": "https://stackoverflow.com/questions/32998938/is-digit-doesnt-return-true-on-int-array-elements/32999795#32999795", "title": "is digit doesn&#39;t return true on int array elements", "body": "<p><code>isdigit(int)</code> needs a value in the range of <code>unsigned char</code> or <code>EOF</code>, else it is undefined behavior.  If <code>char</code> is signed, then <code>isdigit(int)</code> using a negative <code>char</code> value is problematic.</p>\n\n<p><code>isdigit(int)</code> returns true when the value is in the range <code>'0'</code> ... <code>'9'</code>.  The numeric values of these consonants are typically 48 to 57\", but it is character set dependent - ASCII being the most common.   The 10 values must be consecutive.</p>\n\n<p>To convert a number to a textual digit, use <code>x + '0'</code></p>\n\n<p>To test for a textual digit and to avoid using <code>isdigit()</code> with its limited range, use:</p>\n\n<pre><code>int test_isdigit(int x) {\n   return x &gt;= '0' &amp;&amp; x &lt;= '9';\n}\n</code></pre>\n\n<p>This is portable.</p>\n"}], "owner": {"reputation": 366, "user_id": 1276591, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/e811eccf4a68944bbddbfeb89911cd9c?s=128&d=identicon&r=PG", "display_name": "KhoaVo", "link": "https://stackoverflow.com/users/1276591/khoavo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 185, "favorite_count": 0, "accepted_answer_id": 32999795, "answer_count": 2, "score": 0, "last_activity_date": 1444242452, "creation_date": 1444239595, "question_id": 32998938, "link": "https://stackoverflow.com/questions/32998938/is-digit-doesnt-return-true-on-int-array-elements", "title": "is digit doesn&#39;t return true on int array elements", "body": "<pre><code>void* checkRow(void* in)\n{\n    //pthread_mutex_lock(&amp;count_mutex);\n    parameters* temp = (parameters*) in;\n    int row = temp-&gt;row;\n    int col = temp-&gt; col;\n    int i = 0;\n    int j = 0;\n    for (i = row; i &lt; SIZE; i++)\n        for (j = col; j&lt; SIZE; j++)\n        {\n            printf(\"%d \", isdigit(temp-&gt;arr[i][j]));\n            if(isdigit(temp-&gt;arr[i][j]) &amp;&amp; temp-&gt;arr[i][j] &lt;= SIZE)\n            {\n                //pthread_mutex_unlock(&amp;count_mutex);\n                return (void*) 1;\n            }\n        }\n\n    return (void*) 0;\n}\n</code></pre>\n\n<p>For some reason why i try to function <code>isdigit(temp-&gt;arr[i][j])</code> alway return false instead of true. the array was initialize with all numbers. I ran a printf on the array and it indicate that the array return correct the result, so I don't know why isdigit does not recognize array's elements as digits. </p>\n\n<p>the array is a member of a structure</p>\n\n<pre><code>typedef struct\n{\n    int row;\n    int col;\n    int arr[SIZE][SIZE];\n}parameters;\n</code></pre>\n"}, {"tags": ["c", "memory", "process", "malloc", "clone"], "comments": [{"owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "edited": false, "score": 0, "creation_date": 1444239468, "post_id": 32998867, "comment_id": 53822454, "body": "Your code just does not make sense.  You cannot memcpy a function (<code>fn</code>), and expect to get all the code for that function.   Cannot be done."}, {"owner": {"reputation": 59, "user_id": 4598192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d429558a5d9f0f318e3f3d9d74dda1d4?s=128&d=identicon&r=PG&f=1", "display_name": "Connor", "link": "https://stackoverflow.com/users/4598192/connor"}, "reply_to_user": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "edited": false, "score": 0, "creation_date": 1444239516, "post_id": 32998867, "comment_id": 53822487, "body": "How does the clone function use the stack pointer it is passed?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1444239699, "post_id": 32998867, "comment_id": 53822576, "body": "Why are you adding <code>STACK_SIZE</code> before you call <code>myClone()</code>? That will <code>memcpy</code> into memory that hasn&#39;t been allocated."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1444239732, "post_id": 32998867, "comment_id": 53822605, "body": "<code>sizeof(fn)</code> is the size of the function pointer, not the function code."}, {"owner": {"reputation": 59, "user_id": 4598192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d429558a5d9f0f318e3f3d9d74dda1d4?s=128&d=identicon&r=PG&f=1", "display_name": "Connor", "link": "https://stackoverflow.com/users/4598192/connor"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1444239904, "post_id": 32998867, "comment_id": 53822690, "body": "@WeatherVane how does clone use the stack pointer it is passed?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1444240004, "post_id": 32998867, "comment_id": 53822737, "body": "I was going to comment but @Barmar did because you are passing the top of stack instead of its bottom. You call it a stack, but memory used like this works from the lower address."}, {"owner": {"reputation": 59, "user_id": 4598192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d429558a5d9f0f318e3f3d9d74dda1d4?s=128&d=identicon&r=PG&f=1", "display_name": "Connor", "link": "https://stackoverflow.com/users/4598192/connor"}, "edited": false, "score": 0, "creation_date": 1444240534, "post_id": 32998867, "comment_id": 53823011, "body": "@barmar7 according to these linux man pages  &quot;Since child and parent process may share        memory, it is not possible for the child process to execute in the        same stack as the calling process.  The calling process must        therefore set up memory space for the child stack and pass a pointer        to this space to clone().  Stacks grow downward on all processors        that run Linux (except the HP PA processors), *** so child_stack usually        points to the topmost address of the memory space set up for the        child stack.&quot; *** Am I misinterpreting?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1444240923, "post_id": 32998867, "comment_id": 53823256, "body": "You are trying to copy the function code into the stack you created. From what you say, shouldn&#39;t you be providing a stack for the child to use? Why do you need to duplicate the function code? But I&#39;m only making observations on what you provide: I have no idea as to what you are trying to do."}, {"owner": {"reputation": 59, "user_id": 4598192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d429558a5d9f0f318e3f3d9d74dda1d4?s=128&d=identicon&r=PG&f=1", "display_name": "Connor", "link": "https://stackoverflow.com/users/4598192/connor"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1444241058, "post_id": 32998867, "comment_id": 53823344, "body": "@WeatherVane What you said is exactly what I&#39;m trying to do.  I don&#39;t understand to what causes the child to run in that stack space.  My intuition was that I had to move the function into that address space, which was obviously wrong.  How do I provide the stack for the child process?"}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": false, "score": 0, "last_activity_date": 1444242284, "last_edit_date": 1444242284, "creation_date": 1444241678, "answer_id": 32999552, "question_id": 32998867, "link": "https://stackoverflow.com/questions/32998867/how-do-i-get-a-function-to-execute-in-a-different-address-space-writing-a-clone/32999552#32999552", "title": "How do I get a function to execute in a different address space? Writing a clone function", "body": "<p>There's a <em>fundamental</em> misunderstanding there. So you're getting a <em>segmentation fault</em>, that tells me you're trying to run this code in <em>user space</em> (in a process created by the operating system).</p>\n\n<p>An <em>address space</em> is an abstraction available to the operating system. It typically uses hardware support (that of an <em>MMU</em> [memory management unit]) which provides means to use <em>virtual</em> addresses. These are addresses that are, when accessed, automatically translated to the real <em>physical</em> addresses according to some data structures that only the OS can manage.</p>\n\n<p>I don't think it makes much sense to go into great detail here, you have enough key words to google for. The essence is: There is <strong>no way</strong> you can create an <em>address space</em> from <em>user space</em> code. That functionality is reserved to the OS and to do it, <code>clone()</code> on linux issues a <em>syscall</em>, invoking the OS.</p>\n\n<p><em>edit</em>: concerning the stack, providing a stack means to reserve space for it (by mapping an appropriate amount of pages to the address space) <em>and</em> setting the necessary processor registers when context is switched to the process (e.g. <code>esp</code>/<code>ebp</code> on <code>i386</code>). This, too, is something only the operating system can do.</p>\n"}, {"comments": [{"owner": {"reputation": 59, "user_id": 4598192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d429558a5d9f0f318e3f3d9d74dda1d4?s=128&d=identicon&r=PG&f=1", "display_name": "Connor", "link": "https://stackoverflow.com/users/4598192/connor"}, "edited": false, "score": 0, "creation_date": 1444242793, "post_id": 32999554, "comment_id": 53824364, "body": "I feel dumb.  I think I understand now."}], "tags": [], "owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": true, "score": 0, "last_activity_date": 1444241682, "creation_date": 1444241682, "answer_id": 32999554, "question_id": 32998867, "link": "https://stackoverflow.com/questions/32998867/how-do-i-get-a-function-to-execute-in-a-different-address-space-writing-a-clone/32999554#32999554", "title": "How do I get a function to execute in a different address space? Writing a clone function", "body": "<p>The <code>clone()</code> function is a system call. It cannot be replicated by C code running within your process.</p>\n"}, {"tags": [], "owner": {"reputation": 10774, "user_id": 4419802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d0f1bd19b8b8481b6b3e812691c1ccb?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/4419802/matt"}, "is_accepted": false, "score": 1, "last_activity_date": 1444243167, "creation_date": 1444243167, "answer_id": 32999992, "question_id": 32998867, "link": "https://stackoverflow.com/questions/32998867/how-do-i-get-a-function-to-execute-in-a-different-address-space-writing-a-clone/32999992#32999992", "title": "How do I get a function to execute in a different address space? Writing a clone function", "body": "<p>There are two main reasons why this wouldn't work.</p>\n\n<ul>\n<li><p>Memory protection: the relevant memory pages must be executable. Data pages, you got from <code>malloc</code> are not. \"Normal\" memory-management functions can't do this. On the other hand, the existing code pages are not writable, so you can't move one piece of code onto another. This is a fundamental memory-protection mechanism. You have to either go back to DOS or to use some advanced \"debugging\" interface.</p></li>\n<li><p>Position-independent code: all memory addresses in your code must be either relative ones, or be fixuped manually. It may be too tricky to do this in C.</p></li>\n</ul>\n"}], "owner": {"reputation": 59, "user_id": 4598192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d429558a5d9f0f318e3f3d9d74dda1d4?s=128&d=identicon&r=PG&f=1", "display_name": "Connor", "link": "https://stackoverflow.com/users/4598192/connor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 32999554, "answer_count": 3, "score": 1, "last_activity_date": 1444243167, "creation_date": 1444239344, "question_id": 32998867, "link": "https://stackoverflow.com/questions/32998867/how-do-i-get-a-function-to-execute-in-a-different-address-space-writing-a-clone", "title": "How do I get a function to execute in a different address space? Writing a clone function", "body": "<p>I have this code that gives me a segmentation fault.  My understanding of the clone function is that the parent process has to allocate space for the child process and clone calls a function that runs in that stack space.  Am I misunderstanding something or does my code just not make sense?   </p>\n\n<pre><code>char *stack;\nchar *stackTop; \n\n\n    stack = malloc(STACK_SIZE);\n    if (stack == NULL)\n        fprintf(stderr, \"malloc\");\n    stackTop = stack + STACK_SIZE;  \n    myClone(childFunc, stackTop, CLONE_FILES, NULL);\n\nint myClone(int (*fn)(void *), void *child_stack,int flags, void *arg){\n  int* space = memcpy(child_stack, fn, sizeof(fn));\n  typedef int func(void);\n  func* f = (func*)&amp;space;\n  f();\n}\n</code></pre>\n"}, {"tags": ["c", "sorting", "assembly", "arm"], "comments": [{"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1444239430, "post_id": 32998696, "comment_id": 53822421, "body": "Are you familiar with this assembly language?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1444239443, "post_id": 32998696, "comment_id": 53822428, "body": "Look at the various places in the assembly listing that branch to previous lines.  There is no explicit loop construct in assembly; the effect of looping is produced by executing such backward branches.  (But there may also be other reasons for such branches.)"}, {"owner": {"reputation": 5397, "user_id": 1482455, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/dZ1fN.jpg?s=128&g=1", "display_name": "YePhIcK", "link": "https://stackoverflow.com/users/1482455/yephick"}, "edited": false, "score": 1, "creation_date": 1444239455, "post_id": 32998696, "comment_id": 53822438, "body": "Looks like the output you listed is optimized, so you won&#39;t see a one-to-one correspondence between your source code and the assembly. Anyway... The <code>if</code>s are where the <code>CMP</code> commands are and the <code>for</code> loops are (in part) made up of <code>CMP</code> and jump commands (<code>BLE</code>, <code>BLT</code>, etc)"}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 1, "creation_date": 1444239506, "post_id": 32998696, "comment_id": 53822481, "body": "<code>L1.28</code> is the beginning of your outer loop; the lines <code>CMP r12,#5; BLT |L1.28|</code> constitute the end of it.  <code>CMP</code> compares the value in <code>r12</code> to the literal value <code>5</code>; if the result is less, it then branches back to <code>L1.28</code>.  Similarly, the inner loop begins at <code>L1.32</code>, and the lines <code>CMP r0,#4; BLT |L1.32|</code> are the end of it."}], "answers": [{"tags": [], "owner": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "is_accepted": true, "score": 5, "last_activity_date": 1444239431, "creation_date": 1444239431, "answer_id": 32998894, "question_id": 32998696, "link": "https://stackoverflow.com/questions/32998696/for-if-in-assembly-language-bubble-sort/32998894#32998894", "title": "for, if in assembly language (bubble sort)", "body": "<p>Here you go. If you just looked for <code>CMP</code> and the constants, you should have been able to find them:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>    LDR      r1,[r1,r0,LSL #2] ; r1 = arr[j]\n    LDR      r2,[r3,#4]        ; r2 = arr[j+1]\n    CMP      r1,r2             ; arr[j] &lt;= arr[j+1]\n    BLE      |L1.72|           ; jump if yes\n    ADD      lr,sp,#4          ; arr\n    STR      r2,[lr,r0,LSL #2] ; arr[j] = arr[j+1]\n    STR      r1,[r3,#4]        ; arr[j+1] = arr[j]\n|L1.72|\n    ADD      r0,r0,#1          ; j++\n    CMP      r0,#4             ; j &lt; 4\n    BLT      |L1.32|           ; jump to inner loop if yes\n    ADD      r12,r12,#1        ; i++\n    CMP      r12,#5            ; i &lt; 5\n    BLT      |L1.28|           ; jump to outer loop if yes\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 5056242, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iwbJj.jpg?s=128&g=1", "display_name": "ChaneunBaek", "link": "https://stackoverflow.com/users/5056242/chaneunbaek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 735, "favorite_count": 0, "accepted_answer_id": 32998894, "answer_count": 1, "score": 0, "last_activity_date": 1444244070, "creation_date": 1444238816, "last_edit_date": 1444244070, "question_id": 32998696, "link": "https://stackoverflow.com/questions/32998696/for-if-in-assembly-language-bubble-sort", "title": "for, if in assembly language (bubble sort)", "body": "<p>I made an bubble sort program in C, and checked its assembly listing file. But I cannot get where the for loops are. Could you let me know where are the for loops and if statement? </p>\n\n<pre><code> #include&lt;stdio.h&gt;\n\nint main()\n{\n    int arr[5]={2,4,5,6,1};\n\n    int i,j,tmp;\n\n    for(i=0;i&lt;5;i++) \n    {\n        for(j=0;j&lt;4;j++)\n        {\n            if(arr[j]&gt;arr[j+1])\n            {\n                tmp=arr[j];\n                arr[j]=arr[j+1];\n                arr[j+1]=tmp;\n            }\n        }\n    }\n\n    for(i=0;i&lt;5;i++){\n         printf(\"  %d\",arr[i]);\n    }\n    printf(\"\\n\");\n\n    return 0;   \n}\n</code></pre>\n\n<p>And here is assembly listing file.</p>\n\n<pre><code>; generated by ARM C Compiler, ADS1.2 [Build 848]\n\n; commandline [-O1 -browseinfo \"0xff\n\" -S   -g+ -fk -J:cw:]\n        CODE32\n\n        AREA ||.text||, CODE, READONLY\n\nmain PROC\n\n|L1.0|\n\n        STMFD    sp!,{r4,lr}\n\n        SUB      sp,sp,#0x18\n\n        MOV      r2,#0x14\n\n        LDR      r1,|L1.148|\n\n        ADD      r0,sp,#4\n\n        BL       __rt_memcpy_w\n\n        MOV      r12,#0\n\n|L1.28|\n\n        MOV      r0,#0\n\n|L1.32|\n\n        ADD      r1,sp,#4\n\n        ADD      r2,sp,#4\n\n        ADD      r3,r2,r0,LSL #2\n\n        LDR      r1,[r1,r0,LSL #2]\n\n        LDR      r2,[r3,#4]\n\n        CMP      r1,r2\n\n        BLE      |L1.72|\n\n        ADD      lr,sp,#4\n\n        STR      r2,[lr,r0,LSL #2]\n\n        STR      r1,[r3,#4]\n\n|L1.72|\n\n        ADD      r0,r0,#1\n\n        CMP      r0,#4\n\n        BLT      |L1.32|\n\n        ADD      r12,r12,#1\n\n        CMP      r12,#5\n\n        BLT      |L1.28|\n\n        MOV      r4,#0\n\n|L1.100|\n\n        ADD      r0,sp,#4\n\n        LDR      r1,[r0,r4,LSL #2]\n\n        ADR      r0,|L1.152|\n\n        BL       _printf\n\n        ADD      r4,r4,#1\n\n        CMP      r4,#5\n\n        BLT      |L1.100|\n\n        ADR      r0,|L1.160|\n\n        BL       _printf\n\n        MOV      r0,#0\n\n        ADD      sp,sp,#0x18\n\n        LDMFD    sp!,{r4,pc}\n\n|L1.148|\n\n        DCD      ||.constdata$1||\n\n|L1.152|\n\n        DCB      \"  %d\"\n\n        DCB      \"\\0\\0\\0\\0\"\n\n|L1.160|\n\n        DCB      \"\\n\\0\\0\\0\"\n\n        ENDP\n\n\n\n        AREA ||.constdata||, DATA, READONLY, ALIGN=2\n\n||.constdata$1||\n        DCD      0x00000002\n        DCD      0x00000004\n        DCD      0x00000005\n        DCD      0x00000006\n        DCD      0x00000001\n\n\n        EXPORT main\n\n        IMPORT _main\n        IMPORT __main\n        IMPORT _printf\n        IMPORT __rt_memcpy_w\n        IMPORT ||Lib$$Request$$armlib||, WEAK\n\n        KEEP \n</code></pre>\n"}, {"tags": ["c", "for-loop", "while-loop"], "answers": [{"tags": [], "owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "is_accepted": false, "score": 0, "last_activity_date": 1444242967, "last_edit_date": 1444242967, "creation_date": 1444242637, "answer_id": 32999846, "question_id": 32998562, "link": "https://stackoverflow.com/questions/32998562/how-to-increase-the-array-block-i-want-to-manipulate/32999846#32999846", "title": "How to increase the array block i want to manipulate", "body": "<p>Move the code that checks abundance into the same loop where you store into <code>listArray</code>, or write another loop right after it that works on each element of <code>listArray</code>.</p>\n\n<p>A good solution to problems like this in general is something like:</p>\n\n<pre><code>static const int TO_READ = 3; // For example.\nFILE* file = open_input_file();\nvariable foo, bar, baz;\nwhile ( TO_READ == fscanf( file, format, &amp;foo, &amp;bar, &amp;baz )) {\n  do_stuff_with( foo, bar, baz );\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5416681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f8c8b5605745da51cf6ba2f0c3f865f?s=128&d=identicon&r=PG&f=1", "display_name": "Gianni", "link": "https://stackoverflow.com/users/5416681/gianni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1444242967, "creation_date": 1444238396, "last_edit_date": 1444240408, "question_id": 32998562, "link": "https://stackoverflow.com/questions/32998562/how-to-increase-the-array-block-i-want-to-manipulate", "title": "How to increase the array block i want to manipulate", "body": "<p>so my assignment is as follows:</p>\n\n<p>\"Write a program that reads in a list of numbers from an input text file called input.txt. For each number read, your program should determine and print out whether or not that number is abundant.\"</p>\n\n<p>input.txt = \n<a href=\"https://i.stack.imgur.com/1OUh4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1OUh4.png\" alt=\"enter image description here\"></a></p>\n\n<p>i have the code down and i think i finally figured out how to find and sum all the divisors to check if a number is abundant or not but the question i have is how do i go to the next array block to check the next number? Now it is checking <strong>\"15\"</strong> which is the first number to check(the <strong>5</strong> tells the program how many numbers it needs to check) but how do i get it to check the next number <strong>3</strong> and so on?</p>\n\n<p>thank you!</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define SIZE 100\n\nint main(){\n\nFILE *ifp;\nint cases;\nint i;\nint j;\nint counter = 1;\nint dividen =1;\nint listArray[SIZE];\nint sum = 0;\n\nifp = fopen(\"input.txt\", \"r\");\nfscanf(ifp,\"%d\", &amp;cases);\n\nfor(i=0;i&lt;cases;i++){\n fscanf(ifp,\"%d\",&amp;listArray[i]);\n printf(\"%d\\n\", listArray[i]);}\n\n\nwhile(listArray[0] &gt; counter){\n if(listArray[0] % dividen == 0){\n sum = sum+dividen;\n dividen++;\n counter++;}\n else{\n dividen++;\n counter++;}\n }\n\nif(listArray[0] &gt; sum)\n      printf(\"\\n%d is not an abundant number\\n\",listArray[0]);\n\nsystem(\"pause\");\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c", "windows", "memory", "memory-management"], "comments": [{"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1444238480, "post_id": 32998302, "comment_id": 53821840, "body": "Getting memory from the OS and getting memory with eg. <code>malloc()</code> are different things.  Ultimately, your process gets memory from the OS when it needs to and <code>malloc()</code> etc. gives pieces of it to your program when it allocates things... but <code>malloc()</code> could give you another part of a page your process already has (maybe from an earlier allocation), or reuse pages from an earlier allocation that&#39;s been freed already."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1444239135, "post_id": 32998302, "comment_id": 53822235, "body": "@Dmitri - In my testing, I have allocated blocks of memory large enough that Windows has been required to provide more to the process.  I can see this when I look at the variables provided by <code>PROCESS_MEMORY_COUNTERS</code>.  My problem is that I cannot seem to find a way to see when the memory is given back.  I am looking for a way to observe a <i>reduction</i> in memory usage as well as an increase."}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1444240570, "post_id": 32998302, "comment_id": 53823035, "body": "That&#39;s the thing... it might not <i>be</i> given back.  If you try another large allocation after freeing the old one though, you might not see another increase as the old pages may be reused."}], "answers": [{"comments": [{"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1451328511, "post_id": 34498918, "comment_id": 56739511, "body": "In the final sentence of my post I said I had also tried pmc.WorkingSetSize and pmc.PagefileUsage.  Nonetheless, your points under 1 &amp; 2. are well stated.  Thanks.  Here&#39;s the money question: Are you <i>aware of a better technique to obtain more timely and accurate reports of actual memory usage</i>???"}, {"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1451329229, "post_id": 34498918, "comment_id": 56739831, "body": "You need to define what you mean by &quot;actual memory usage.&quot;  It&#39;s not that simple of a question.  RAM usage?  Virtual address space usage?  Do you want to count memory that you&#39;ve returned to the memory manager even if the memory manager hasn&#39;t returned it to the OS?  How do you want to measure fragmentation?"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1451329771, "post_id": 34498918, "comment_id": 56740062, "body": "I am looking for a way to force Windows to show a change in physical heap memory upon my freeing it from within a process.  Dimitri&#39;s observation is correct ( <i>That&#39;s the thing... it might not be given back</i> ), the memory might not be given back from an OS perspective.  Is there a way, or a method that can be used to <i>persuade</i> the OS to immediately return freed memory such that I can see it using <code>pmc.WorkingSetSize</code> or <code>pmc.PagefileUsage</code> or similar?"}, {"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1451330057, "post_id": 34498918, "comment_id": 56740162, "body": "I&#39;m not sure what &quot;physical heap memory&quot; is, since the heap is usually on top of virtual memory.  Nevertheless, it&#39;s not the OS you need to persuade; it&#39;s your program, specifically, the memory manager your program is using.  That&#39;s likely the beast that&#39;s not returning the memory to the OS."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1451330620, "post_id": 34498918, "comment_id": 56740403, "body": "I think of C# has having an <i>active memory manager</i>.  In C/C++, With the exception of OS macro memory management activities, <i>I</i> am the memory manager, at least at the executable level.  (i.e. I am responsible to call the <code>free()</code> function, close files, close handles, etc.)  But at the OS level, I wonder if there is, for example, a Windows call to tickle the OS to release all memory that is not being used explicitly at this point.  And by the way, I agree with you, <i>it&#39;s not that simple of a question</i>.  I realize that now."}, {"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1451331453, "post_id": 34498918, "comment_id": 56740779, "body": "As far as the OS is concerned, <code>malloc()</code> and <code>free()</code> are part of your program.  At some point <code>malloc()</code> asks the OS for memory, but <code>free()</code> doesn&#39;t typically give it back to the OS.  So it&#39;s not a matter of tickling the OS in order to get your freed memory reflected in the stats.  It&#39;s a matter of convincing <code>free()</code> to actually return memory to the OS.  There&#39;s no standard for that.  And, in most cases, you really don&#39;t want to do that anyway."}], "tags": [], "owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "is_accepted": false, "score": 1, "last_activity_date": 1451328085, "creation_date": 1451328085, "answer_id": 34498918, "question_id": 32998302, "link": "https://stackoverflow.com/questions/32998302/improve-heap-memory-usage-reporting-in-windows-application/34498918#34498918", "title": "Improve heap memory usage reporting in Windows application", "body": "<p>There are several things going on here.</p>\n\n<ol>\n<li><p>Memory managers, tend to keep memory around after you've freed it.  The theory is that you're likely to need more memory soon, and giving you back memory you've used recently is cheaper than getting more memory from the operating system.  Thus, from the operating system's perspective, your program is still using memory you've freed.</p></li>\n<li><p>Working set size is an indirect measure of the memory your program is using.  The operating system determines the working set size based on memory demand from your program <em>and</em> based on memory pressure from everything else running on the system.  As your program starts to use more memory, the operating system will (typically) quickly grow the process's working set to accommodate it.  If your program releases a bunch of memory back to the operating system, that doesn't necessarily mean the OS will trim the process's working set size.  In fact, if there's plenty of RAM available, it probably won't bother.  But if lots of other processes need memory, and you start to reach the capacity of your RAM, then the OS will start trimming the working set of processes that have more than they currently need.</p></li>\n<li><p>It looks like your code sample is reporting <em>peak</em> working set size rather than the current working set size.  The peak tells you the largest working set size the process reached during its lifetime, even if the current working set is much smaller.</p></li>\n</ol>\n"}], "owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 253, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1572959050, "creation_date": 1444237523, "last_edit_date": 1572959050, "question_id": 32998302, "link": "https://stackoverflow.com/questions/32998302/improve-heap-memory-usage-reporting-in-windows-application", "title": "Improve heap memory usage reporting in Windows application", "body": "<p>In using the following code, I have observed that increases in memory usage are registered fairly quickly in the variable members of <strong><em><a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms684877%28v=vs.85%29.aspx\" rel=\"nofollow noreferrer\">PROCESS_MEMORY_COUNTERS</a></em></strong>, but as memory is freed in a process that continues to run, it appears that decreasing memory usage does not seem to register</p>\n\n<pre><code>time_t GetMemUsage(void)\n{\n    HANDLE hProcess;\n    PROCESS_MEMORY_COUNTERS pmc;\n    DWORD processID = GetCurrentProcessId();\n\n    hProcess = OpenProcess(  PROCESS_QUERY_INFORMATION |\n                                    PROCESS_VM_READ,\n                                    FALSE, processID );\n    GetProcessMemoryInfo( hProcess, &amp;pmc, sizeof(pmc));\n    CloseHandle(hProcess);\n\n    return pmc.PeakWorkingSetSize;\n}\n</code></pre>\n\n<p>Using Task Manager, I can see almost immediately a physical memory size change (smaller) after <em>terminating</em> a process, but freeing memory as a process runs does not register.  (Even after a substantial delay before calling the above function.) </p>\n\n<p>I am not sure if my observations are due to the way <code>free()</code> works.  (i.e. maybe it does not notify the OS memory is freed), or if Windows is just slow in registering it to the <code>PROCESS_MEMORY_COUNTERS</code> struct.</p>\n\n<p>In any case, is anyone aware of a better technique to obtain more timely and <em>accurate</em> reports of actual memory usage within (or for) a running process?  </p>\n\n<p>I have also tried looking at <code>pmc.WorkingSetSize</code> and <code>pmc.PagefileUsage</code> with same results. </p>\n"}, {"tags": ["c", "arrays", "fgets", "scanf"], "comments": [{"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 1, "creation_date": 1444237270, "post_id": 32998105, "comment_id": 53821167, "body": "<code>sscanf</code> differs from <code>fscanf</code> and <code>scanf</code> in that it always starts at the beginning of the string. You can&#39;t scan sequentially with subsequent <code>sscanf</code> calls. (Well, you can with the <code>%n</code> format.) A better approach may be to tokenise the string with <code>strtok</code> and then use <code>strtod</code> on the tokens."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 5271619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68ca0d6ba0bf68b86bcf84473abcc210?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Johnson", "link": "https://stackoverflow.com/users/5271619/jack-johnson"}, "edited": false, "score": 0, "creation_date": 1444238583, "post_id": 32998435, "comment_id": 53821902, "body": "How would i do this? I haven&#39;t used stdin before, im pretty new to programming"}, {"owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "reply_to_user": {"reputation": 15, "user_id": 5271619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68ca0d6ba0bf68b86bcf84473abcc210?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Johnson", "link": "https://stackoverflow.com/users/5271619/jack-johnson"}, "edited": false, "score": 0, "creation_date": 1444239540, "post_id": 32998435, "comment_id": 53822498, "body": "@JackJohnson The <code>stdin</code> stream is a <code>FILE *</code> stream that is already open for reading when main starts. To supply file data on stdin, you run your program as <code>program &lt; plottestdata</code>. Functions like scanf, getchar etc all use stdin."}], "tags": [], "owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "is_accepted": false, "score": 0, "last_activity_date": 1444237996, "creation_date": 1444237996, "answer_id": 32998435, "question_id": 32998105, "link": "https://stackoverflow.com/questions/32998105/reading-a-2d-array-from-a-file-in-c/32998435#32998435", "title": "Reading a 2D array from a file in C", "body": "<p>Instead of reading from a file with a hardcoded file name, why not read from <code>stdin</code>? You can use <code>fgets(size, sizeof size, stdin)</code> to read the first line with the dimensions.</p>\n\n<p>Then use <code>scanf(\" %f\", &amp;array[ii][cc)</code> to read in values one by one.</p>\n\n<p>Be sure to test whether scanf returns 1 and add some error handling if not.</p>\n"}, {"comments": [{"owner": {"reputation": 15, "user_id": 5271619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68ca0d6ba0bf68b86bcf84473abcc210?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Johnson", "link": "https://stackoverflow.com/users/5271619/jack-johnson"}, "edited": false, "score": 0, "creation_date": 1444238830, "post_id": 32998621, "comment_id": 53822049, "body": "Thank you ! this is great"}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": true, "score": 2, "last_activity_date": 1444238612, "creation_date": 1444238612, "answer_id": 32998621, "question_id": 32998105, "link": "https://stackoverflow.com/questions/32998105/reading-a-2d-array-from-a-file-in-c/32998621#32998621", "title": "Reading a 2D array from a file in C", "body": "<p>I could not resist tweaking and simplifying your code, it was so close, to avoid the use of <code>fgets</code> and use <code>fscanf</code> to read the values directly. Plus basic error checking.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define MWIDTH  100\n#define MHEIGHT 100\n\nint main(void){\n\n    FILE* f;\n    int height, width, ii, jj;\n    float array[MHEIGHT][MWIDTH];\n\n    if((f = fopen(\"plottestdata.txt\", \"r\")) == NULL)\n        exit(1);\n\n    if(fscanf(f, \"%d%d\", &amp;height, &amp;width) != 2)\n        exit(1);\n    if (height &lt; 1 || height &gt; MHEIGHT || width &lt; 1 || width &gt; MWIDTH)\n        exit(1);\n\n    for(jj=0; jj&lt;height; jj++)\n        for(ii=0; ii&lt;width; ii++)\n            if(fscanf(f, \"%f\", &amp;array[jj][ii]) != 1)\n                exit(1);\n    fclose(f);\n\n    for(jj=0; jj&lt;height; jj++){\n        for(ii=0; ii&lt;width; ii++)\n            printf (\"%10.1f\", array[jj][ii]);\n        printf(\"\\n\");\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Program output:</p>\n\n<pre><code>  10.4      15.1      18.5      13.3      20.8\n  76.5      55.3      94.0      48.5      60.3\n   2.4       4.6       3.5       4.6       8.9\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "is_accepted": false, "score": 0, "last_activity_date": 1444238748, "creation_date": 1444238748, "answer_id": 32998673, "question_id": 32998105, "link": "https://stackoverflow.com/questions/32998105/reading-a-2d-array-from-a-file-in-c/32998673#32998673", "title": "Reading a 2D array from a file in C", "body": "<p>As you have already found out, you need to scan the next value where you left off after scanning the previous one. Unfortunately, <code>sscanf</code> does not have the properties of a stream; it doesn't memorise its last position and always starts afresh if you pass the same string.</p>\n\n<p>Fortunalely, there are many other ways to achieve sequential scanning.</p>\n\n<p><strong>Tokenisation</strong> You could tokenise your line forst and then parse each token as floating-point number. <code>strtok</code> from <code>string.h&gt;</code> and <code>strtod</code> from <code>&lt;stdlib.h&gt;</code> will do that job for you.</p>\n\n<pre><code>        char *token = strtok(horiz, \" \\t\\n\");\n\n        for (cc = 0; cc &lt; width; cc++) {\n            if (token) {                \n                array[ii][cc] = strtod(token, NULL);\n                token = strtok(NULL, \" \\t\\n\");\n            } else {\n                array[ii][cc] = 0.0;\n            }\n        }\n</code></pre>\n\n<p><strong>Keep track of the tail I</strong> <code>strtod</code> has one other characteristic: It tells you exactly where parsing stopped when you supply a pointer to a char pointer. <code>strtod</code> also skips leading white space. You can use these two facts to parse floats separated by white space.</p>\n\n<pre><code>        char *p = horiz;\n\n        for (cc = 0; cc &lt; width; cc++) {\n            char *tail;\n\n            array[ii][cc] = strtod(p, &amp;tail);\n            p = tail;\n        }\n</code></pre>\n\n<p><strong>Keep track of the tail II</strong> <code>sscanf</code> has a special format that tells you how many characters have been parsed at a certain point in an integer. The above could be written with <code>sscanf</code>:</p>\n\n<pre><code>       char *p = horiz;\n\n        for (cc = 0; cc &lt; width; cc++) {\n            int len;\n\n            sscanf(p, \"%f%n\", &amp;array[ii][cc], &amp;len);\n            p += len;\n        }\n</code></pre>\n\n<p>All these work for your example, but none of them does proper error checking. The first example at least makes a half-hearted attempt to catch the case where a line has fewer tokens than the matrix has columns.</p>\n"}, {"comments": [{"owner": {"reputation": 1724, "user_id": 5269178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ddb19370af3c88392ce8d470f0864da?s=128&d=identicon&r=PG&f=1", "display_name": "Ampati Hareesh", "link": "https://stackoverflow.com/users/5269178/ampati-hareesh"}, "edited": false, "score": 0, "creation_date": 1444239449, "post_id": 32998745, "comment_id": 53822432, "body": "sscanf(horiz, &quot;%f&quot;, &amp;array[ii][cc]); one specifier couldn&#39;t store  all the values from horiz,Either you need to split the horiz and write a loop or as you knew that width is 5 then you put 5 specifiers.The above code might help you"}], "tags": [], "owner": {"reputation": 1724, "user_id": 5269178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ddb19370af3c88392ce8d470f0864da?s=128&d=identicon&r=PG&f=1", "display_name": "Ampati Hareesh", "link": "https://stackoverflow.com/users/5269178/ampati-hareesh"}, "is_accepted": false, "score": 1, "last_activity_date": 1444239454, "last_edit_date": 1444239454, "creation_date": 1444238966, "answer_id": 32998745, "question_id": 32998105, "link": "https://stackoverflow.com/questions/32998105/reading-a-2d-array-from-a-file-in-c/32998745#32998745", "title": "Reading a 2D array from a file in C", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main(int argc, char* argv[]){\n    FILE* f = fopen(\"plottestdata\", \"r\");\n    char size[20];\n    int height, width,ii=0,cc,jj,kk;\n    char horiz[500];\n\n    if(fgets(size, 500, f)!= NULL){\n\n    sscanf(size,\"%d %d\", &amp;height, &amp;width);\n    printf(\"%d %d\\n\",height, width);\n    }\n    float array[height][width];\n    while(fgets(horiz, 500, f)!=NULL)\n    {\n\n    if(ii&lt;height)\n    {\n         sscanf(horiz, \"%f %f %f %f %f\", &amp;array[ii][0],&amp;array[ii][1],\n                    &amp;array[ii][2],\n                    &amp;array[ii][3],\n                    &amp;array[ii][4]);       \n              ii++;\n        }\n    }\n    for(ii=0;ii&lt;height;ii++)\n    {\n        for(kk=0;kk&lt;width;kk++)\n        {\n            printf(\"%.2f \", array[ii][kk]);\n        }\n        printf(\"\\n\");\n    }\n    fclose(f);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 5271619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68ca0d6ba0bf68b86bcf84473abcc210?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Johnson", "link": "https://stackoverflow.com/users/5271619/jack-johnson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9356, "favorite_count": 2, "accepted_answer_id": 32998621, "answer_count": 4, "score": 0, "last_activity_date": 1444239454, "creation_date": 1444236859, "question_id": 32998105, "link": "https://stackoverflow.com/questions/32998105/reading-a-2d-array-from-a-file-in-c", "title": "Reading a 2D array from a file in C", "body": "<p>I'm attempting to create a program to read a 2D array from a file and then print it out. </p>\n\n<p>The file is set out so that the first line has the number of rows and then the number of columns. After that the array is plotted. An example is as follows:</p>\n\n<pre><code>3 5\n10.4 15.1 18.5 13.3 20.8\n76.5 55.3 94.0 48.5 60.3\n2.4 4.6 3.5 4.6 8.9\n</code></pre>\n\n<p>My problem is that i only know how to read the first element of each line using fgets and sscanf so the following numbers are ignored.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main(int argc, char* argv[]){\n\nFILE* f = fopen(\"plottestdata\", \"r\");\nchar size[20];\nint height, width,ii=0,cc,jj,kk;\nfloat array[100][100];\nchar horiz[500];\n\nif(fgets(size, 20, f)!= NULL){\n\n    sscanf(size,\"%d %d\", &amp;height, &amp;width);\n    printf(\"%d %d\\n\",height, width);\n}\nwhile(fgets(horiz, 500, f)!=NULL)\n{\n\n    if(ii&lt;height)\n    {\n        for(cc=0;cc&lt;width;cc++)\n        {\n        sscanf(horiz, \"%f\", &amp;array[ii][cc]);\n        }\n    ii++;\n    }\n}\nfor(jj=0;jj&lt;width;jj++)\n    {\n        for(kk=0;kk&lt;height;kk++)\n        {\n        printf(\"%f \", array[jj][kk]);\n        }\n    }\nfclose(f);\nreturn 0;\n}\n</code></pre>\n\n<p>This gives me an output of the first element of each line repeated multiple times and I understand why but am unsure how to fix it. The file it is reading from is actually a 20x20 array although set out in the same format as the example.</p>\n\n<p>Also, i have left out my error checking for the sake of trying to shortening a long question.</p>\n"}, {"tags": ["c", "string"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1444236090, "post_id": 32997838, "comment_id": 53820427, "body": "Call <code>strstr()</code> in a loop until it returns null, starting one character after where it matched the previous time (at the beginning of the string on the first time, of course)."}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 0, "creation_date": 1444236431, "post_id": 32997838, "comment_id": 53820647, "body": "(<i>Maybe you would have heard this</i> ) Please don&#39;t use <code>gets</code> ."}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 0, "creation_date": 1444236516, "post_id": 32997838, "comment_id": 53820697, "body": "Why did you use <code>%ld</code> specifier to print <code>loc-ptr1</code> ?"}, {"owner": {"reputation": 781, "user_id": 3712321, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/164e07d0086c414ddd750ee9214e0f4e?s=128&d=identicon&r=PG&f=1", "display_name": "timsterc", "link": "https://stackoverflow.com/users/3712321/timsterc"}, "reply_to_user": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 0, "creation_date": 1444236719, "post_id": 32997838, "comment_id": 53820815, "body": "@ameyCU Right, I see all the compiler warnings for gets (&quot;it&#39;s unsafe&quot;). Interestingly, though, the book I&#39;m using uses &quot;gets&quot; all the time."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 1, "creation_date": 1444236757, "post_id": 32997838, "comment_id": 53820842, "body": "Well, you should buy a newer book :). Gets is deprecated"}, {"owner": {"reputation": 781, "user_id": 3712321, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/164e07d0086c414ddd750ee9214e0f4e?s=128&d=identicon&r=PG&f=1", "display_name": "timsterc", "link": "https://stackoverflow.com/users/3712321/timsterc"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1444236909, "post_id": 32997838, "comment_id": 53820933, "body": "@Michi Yes, book is a few years old :-)."}, {"owner": {"reputation": 3784, "user_id": 2924323, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/6XBqj.jpg?s=128&g=1", "display_name": "Ramesh-X", "link": "https://stackoverflow.com/users/2924323/ramesh-x"}, "edited": false, "score": 0, "creation_date": 1444236976, "post_id": 32997838, "comment_id": 53820978, "body": "<code>gets()</code> will write input data in the memory without looking at the size  of the buffer. That means there is a possibility that <code>gets()</code> will write pass the end of the array if the input string is too large.."}, {"owner": {"reputation": 781, "user_id": 3712321, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/164e07d0086c414ddd750ee9214e0f4e?s=128&d=identicon&r=PG&f=1", "display_name": "timsterc", "link": "https://stackoverflow.com/users/3712321/timsterc"}, "reply_to_user": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 0, "creation_date": 1444237099, "post_id": 32997838, "comment_id": 53821057, "body": "@ameyCU I understand, wouldn&#39;t use it in production code."}, {"owner": {"reputation": 3784, "user_id": 2924323, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/6XBqj.jpg?s=128&g=1", "display_name": "Ramesh-X", "link": "https://stackoverflow.com/users/2924323/ramesh-x"}, "edited": false, "score": 0, "creation_date": 1444237253, "post_id": 32997838, "comment_id": 53821154, "body": "If the input was <code>ABABA</code> and you are searching for <code>ABA</code>, what is the number of occurrence that you expect..? 1 or 2..?"}, {"owner": {"reputation": 781, "user_id": 3712321, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/164e07d0086c414ddd750ee9214e0f4e?s=128&d=identicon&r=PG&f=1", "display_name": "timsterc", "link": "https://stackoverflow.com/users/3712321/timsterc"}, "reply_to_user": {"reputation": 3784, "user_id": 2924323, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/6XBqj.jpg?s=128&g=1", "display_name": "Ramesh-X", "link": "https://stackoverflow.com/users/2924323/ramesh-x"}, "edited": false, "score": 0, "creation_date": 1444237287, "post_id": 32997838, "comment_id": 53821177, "body": "@Ramesh-X One. Looking for exact match of entire string."}, {"owner": {"reputation": 3784, "user_id": 2924323, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/6XBqj.jpg?s=128&g=1", "display_name": "Ramesh-X", "link": "https://stackoverflow.com/users/2924323/ramesh-x"}, "edited": false, "score": 0, "creation_date": 1444237463, "post_id": 32997838, "comment_id": 53821267, "body": "Change the value of <code>offset</code> to length of searching string in R Sahu&#39;s answer.. It will work.."}], "answers": [{"comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 781, "user_id": 3712321, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/164e07d0086c414ddd750ee9214e0f4e?s=128&d=identicon&r=PG&f=1", "display_name": "timsterc", "link": "https://stackoverflow.com/users/3712321/timsterc"}, "edited": false, "score": 0, "creation_date": 1444238587, "post_id": 32998088, "comment_id": 53821906, "body": "@user3712321, it&#39;s hard telling what could be wrong with out seeing what you tried. That&#39;s why we emphasize on posting an <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a>."}, {"owner": {"reputation": 781, "user_id": 3712321, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/164e07d0086c414ddd750ee9214e0f4e?s=128&d=identicon&r=PG&f=1", "display_name": "timsterc", "link": "https://stackoverflow.com/users/3712321/timsterc"}, "edited": false, "score": 0, "creation_date": 1444238895, "post_id": 32998088, "comment_id": 53822082, "body": "Sorry, comment got cut off before I could post code. Here it is:  <code>loc = strstr(ptr1,ptr2);       while (loc != NULL)     {         printf(&quot;%s was found at position %ld.\\n&quot;, ptr2, loc-ptr1);         int offset = strlen(ptr2);         loc = strstr(loc + offset, ptr2);         printf(&quot;%s was found at position %ld.\\n&quot;, ptr2, loc-ptr1);     }</code>"}, {"owner": {"reputation": 781, "user_id": 3712321, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/164e07d0086c414ddd750ee9214e0f4e?s=128&d=identicon&r=PG&f=1", "display_name": "timsterc", "link": "https://stackoverflow.com/users/3712321/timsterc"}, "edited": false, "score": 0, "creation_date": 1444239319, "post_id": 32998088, "comment_id": 53822346, "body": "Results of running code:    Enter the first string to be compared: abcdefabc   Enter the second string to be compared: abc   The new first string is abcdefabc.   The new second string is abc.   abc was found at position 0.   abc was found at position 6.   abc was found at position 6.   abc was found at position -32374800."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 781, "user_id": 3712321, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/164e07d0086c414ddd750ee9214e0f4e?s=128&d=identicon&r=PG&f=1", "display_name": "timsterc", "link": "https://stackoverflow.com/users/3712321/timsterc"}, "edited": false, "score": 0, "creation_date": 1444239381, "post_id": 32998088, "comment_id": 53822390, "body": "Remove the second <code>printf</code> inside the <code>while</code> loop."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1444240335, "post_id": 32998088, "comment_id": 53822912, "body": "Nice tight solution.  Corner case problem: Should <code>string2[0] == 0</code>, code  --&gt; UB as it increments beyond the end of <code>string1</code>."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "reply_to_user": {"reputation": 781, "user_id": 3712321, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/164e07d0086c414ddd750ee9214e0f4e?s=128&d=identicon&r=PG&f=1", "display_name": "timsterc", "link": "https://stackoverflow.com/users/3712321/timsterc"}, "edited": false, "score": 0, "creation_date": 1444242258, "post_id": 32998088, "comment_id": 53824067, "body": "@user3712321 Ty my Answer too?"}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 3, "last_activity_date": 1444238433, "last_edit_date": 1444238433, "creation_date": 1444236775, "answer_id": 32998088, "question_id": 32997838, "link": "https://stackoverflow.com/questions/32997838/number-of-times-one-string-occurs-within-another-in-c/32998088#32998088", "title": "Number of times one string occurs within another in C", "body": "<p>Given</p>\n\n<pre><code>char string1[] = \"ABCDEFABC\";\nchar string2[] = \"ABC\";\n</code></pre>\n\n<p><code>strstr(string1, string2)</code> will return a pointer to the first element of <code>string1</code>.</p>\n\n<blockquote>\n  <p>Would return 0 as a match is found in position 0, and 6 as it's found again in position 6?</p>\n</blockquote>\n\n<p>In order to check for multiple occurrences of <code>string2</code> in <code>string1</code>, you'll have to call <code>strstr</code> multiple times with an offset from <code>string1</code>. E.g.</p>\n\n<pre><code>char* found = strstr(string1, string2);\nwhile ( found != NULL )\n{\n   // Search for string2 after applying an offset.\n   int offset = 1;\n   found = strstr(found+offset, string2);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1444242856, "post_id": 32999679, "comment_id": 53824394, "body": "1) This code prints nothing when <code>char string2[] = &quot;&quot;;</code>  OP has not defined what is expected in this corner case.  Printing nothing is reasonable.  2) <code>printf(&quot;\\%s...</code> is a problem as <code>\\%</code> is unknown escape sequence."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1444243057, "post_id": 32999679, "comment_id": 53824491, "body": "@chux he did, when he showed he&#39;s first string <b>ABCDEFABC</b>, about <i>**</i> you right :)."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1444243199, "post_id": 32999679, "comment_id": 53824571, "body": "@chux What exactly should print if string2[] = &quot;&quot; ? and by the way, here are a lot of people with only theory&#39;s please don&#39;t become one of them :)."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1444245414, "post_id": 32999679, "comment_id": 53825988, "body": "&quot;What exactly should print if <code>string2[] = &quot;&quot;</code>&quot;  --&gt; These are reasons for returning a match for each postilion in <code>string1[]</code>, only 1 at the end of <code>string1[]</code> or no match.  This answer did the last. Which is right?, ask OP. I am not trying to comment what is right amongst reasonable alternatives,  just noting this answer did not have bad behavior, like the <a href=\"http://stackoverflow.com/questions/32997838/number-of-times-one-string-occurs-within-another-in-c/32998088#comment53822912_32998088\">comment</a> in <a href=\"http://stackoverflow.com/a/32998088/2410359\">this answer</a>."}, {"owner": {"reputation": 781, "user_id": 3712321, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/164e07d0086c414ddd750ee9214e0f4e?s=128&d=identicon&r=PG&f=1", "display_name": "timsterc", "link": "https://stackoverflow.com/users/3712321/timsterc"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1444256859, "post_id": 32999679, "comment_id": 53831886, "body": "@chux I hadn&#39;t considered a null search string to be honest. The second answer does take care of this potential scenario. Alternatively, I could still use first answer and just not allow a null search string."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 781, "user_id": 3712321, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/164e07d0086c414ddd750ee9214e0f4e?s=128&d=identicon&r=PG&f=1", "display_name": "timsterc", "link": "https://stackoverflow.com/users/3712321/timsterc"}, "edited": false, "score": 0, "creation_date": 1444262099, "post_id": 32999679, "comment_id": 53833425, "body": "@user3712321 Whatever works for you = its your post.  Checking for edge conditions if too often ignored and leads to hacker exploits.  IMO, wise to not assume input data is friendly."}], "tags": [], "owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "is_accepted": true, "score": 2, "last_activity_date": 1444244115, "last_edit_date": 1444244115, "creation_date": 1444242067, "answer_id": 32999679, "question_id": 32997838, "link": "https://stackoverflow.com/questions/32997838/number-of-times-one-string-occurs-within-another-in-c/32999679#32999679", "title": "Number of times one string occurs within another in C", "body": "<p>I think this is what you need:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n#include&lt;stdlib.h&gt;\n\nint main(void){\n    char string1[] = \"ABCDABCEFABC\";\n    char string2[] = \"ABC\";\n    char *s1, *s2, *s3;\n\n    size_t lenstring1 = strlen(string1);\n    size_t lenstring2 = strlen(string2);\n\n    if (lenstring2 &lt; 1){\n        printf(\"There is no substring found\"); /* or what ever */\n        exit(1);\n    }\n\n    size_t i=0,j=0;\n    int found=0;\n\n    s1 = string1;\n    s2 = string2;\n\n\n    for(i = 0; i &lt; lenstring1; i++){\n        if(*s1 == *s2){\n              s3 = s1;\n              for(j = 0;j &lt; lenstring2;j++){\n                if(*s3 == *s2){\n                  s3++;s2++;\n                }else{\n                    break;\n                }\n              }\n\n              s2 = string2;\n\n              if(j == strlen(string2)){\n                 found = 1;\n                printf(\"%s found at index : %zu\\n\",string2,i+1);\n              }\n          }\n        s1++;\n    }\n\n    if(found == 0){\n        printf(\"No match Found\");\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<blockquote>\n<pre><code>ABC found at index : 1\nABC found at index : 5\nABC found at index : 10\n</code></pre>\n</blockquote>\n\n<p>If the <strong>string2</strong> is empty you will get:</p>\n\n<blockquote>\n  <p>There is no substring found</p>\n</blockquote>\n"}], "owner": {"reputation": 781, "user_id": 3712321, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/164e07d0086c414ddd750ee9214e0f4e?s=128&d=identicon&r=PG&f=1", "display_name": "timsterc", "link": "https://stackoverflow.com/users/3712321/timsterc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 351, "favorite_count": 0, "accepted_answer_id": 32999679, "answer_count": 2, "score": 1, "last_activity_date": 1444244115, "creation_date": 1444235967, "question_id": 32997838, "link": "https://stackoverflow.com/questions/32997838/number-of-times-one-string-occurs-within-another-in-c", "title": "Number of times one string occurs within another in C", "body": "<p>I have written a function that uses the strstr() function to determine if string2 has any matches in string1. This works fine (I also convert both strings to lower case so that I can do a case-insensitive match.). However, strstr() only finds the <em>first</em> time the match occurs. Is there a way to use it to find <em>each</em> time a match occurs? For example:</p>\n\n<pre><code>string1[] = \"ABCDEFABC\";\nstring2[] = \"ABC\";\n</code></pre>\n\n<p>Would return 0 as a match is found in position 0, and 6 as it's found again in position 6?</p>\n\n<p>Here's the original function as written (including call to function in main):</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\n\n\nchar *strstrnc(const char *str1, const char *str2);\n\nint main()\n{\n    char buf1[80],buf2[80];\n\n    printf(\"Enter the first string to be compared: \");\n    gets(buf1);\n    printf(\"Enter the second string to be compared: \");\n    gets(buf2);\n\n    strstrnc(buf1,buf2);\n\n    return 0;\n}\n\n\nchar *strstrnc(const char *buf1, const char *buf2)\n{\n    char *p1, *ptr1, *p2, *ptr2, *loc;\n    int ctr;\n\n    ptr1 = malloc(80 * sizeof(char));\n    ptr2 = malloc(80 * sizeof(char));\n\n\n    p1 = ptr1;\n    p2 = ptr2;\n\n\n\n    for (ctr = 0; ctr &lt; strlen(buf1);ctr++)\n    {\n        *p1++ = tolower(buf1[ctr]);\n    }\n    *p1 = '\\0';\n\n    for (ctr = 0; ctr &lt; strlen(buf2);ctr++)\n    {\n        *p2++ = tolower(buf2[ctr]);\n    }\n    *p2 = '\\0';\n\n    printf(\"The new first string is %s.\\n\", ptr1);\n    printf(\"The new first string is %s.\\n\", ptr2);\n\n    loc = strstr(ptr1,ptr2);\n    if  (loc == NULL)\n    {\n        printf(\"No match was found!\\n\");\n    }\n    else\n    {\n        printf(\"%s was found at position %ld.\\n\", ptr2, loc-ptr1);\n    }\n\n    return loc;\n\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "sockets", "solaris", "getsockopt"], "comments": [{"owner": {"reputation": 31310, "user_id": 68105, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/1bC0L.png?s=128&g=1", "display_name": "MK.", "link": "https://stackoverflow.com/users/68105/mk"}, "edited": false, "score": 0, "creation_date": 1444236763, "post_id": 32997754, "comment_id": 53820843, "body": "are you sure you want SO_STATE?  It seems you might awaken an ancient evil by touching that."}, {"owner": {"reputation": 349, "user_id": 2459643, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f2a19c9ae6514a7489f9223c932cfdb7?s=128&d=identicon&r=PG", "display_name": "pankaj kushwaha", "link": "https://stackoverflow.com/users/2459643/pankaj-kushwaha"}, "reply_to_user": {"reputation": 31310, "user_id": 68105, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/1bC0L.png?s=128&g=1", "display_name": "MK.", "link": "https://stackoverflow.com/users/68105/mk"}, "edited": false, "score": 0, "creation_date": 1444237171, "post_id": 32997754, "comment_id": 53821092, "body": "yes i want to use SO_STATE , but it seems like there is no way , and no alternative present in solaris 10 to use this option."}, {"owner": {"reputation": 31310, "user_id": 68105, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/1bC0L.png?s=128&g=1", "display_name": "MK.", "link": "https://stackoverflow.com/users/68105/mk"}, "edited": false, "score": 0, "creation_date": 1444238443, "post_id": 32997754, "comment_id": 53821816, "body": "what does SO_STATE even do, or rather used to do?"}, {"owner": {"reputation": 349, "user_id": 2459643, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f2a19c9ae6514a7489f9223c932cfdb7?s=128&d=identicon&r=PG", "display_name": "pankaj kushwaha", "link": "https://stackoverflow.com/users/2459643/pankaj-kushwaha"}, "reply_to_user": {"reputation": 31310, "user_id": 68105, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/1bC0L.png?s=128&g=1", "display_name": "MK.", "link": "https://stackoverflow.com/users/68105/mk"}, "edited": false, "score": 0, "creation_date": 1444238829, "post_id": 32997754, "comment_id": 53822048, "body": "SO_STATE return a integer value where each bit ( in integer value) have different meaning , so if sockbufsize is 32 , it mean 5th bit is set , and it represent &quot;connection indication for poll&quot; I think."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 3, "creation_date": 1444246537, "post_id": 32997754, "comment_id": 53826685, "body": "It&#39;s been a very long time since it was removed. And you can not use it on Solaris 10 even if you just put the numeric value there - getsockopt will fail. Tell us why do you need it, and we will probably be able to tell you how to do this. XY problem, I belive."}], "owner": {"reputation": 349, "user_id": 2459643, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f2a19c9ae6514a7489f9223c932cfdb7?s=128&d=identicon&r=PG", "display_name": "pankaj kushwaha", "link": "https://stackoverflow.com/users/2459643/pankaj-kushwaha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 91, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1444236548, "creation_date": 1444235735, "last_edit_date": 1444236548, "question_id": 32997754, "link": "https://stackoverflow.com/questions/32997754/how-to-get-socket-state-in-solaris-10", "title": "How to get socket state in solaris 10?", "body": "<p>How to get socket state in solaris 10?</p>\n\n<p>In solaris 8 , there used to be SO_STATE macro in socket.h , and we were able to use it as below:</p>\n\n<pre><code>getsockopt(skt, SOL_SOCKET, SO_STATE, (char *)&amp;sockbufsize, &amp;size);\n</code></pre>\n\n<p>But, there is no such macro supported in solaris 10. So, how to do it in solaris 10?</p>\n"}, {"tags": ["c", "mpi"], "comments": [{"owner": {"reputation": 341, "user_id": 5224889, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Of8m-K8GKG8/AAAAAAAAAAI/AAAAAAAAAF0/Wgw32-Ij6Aw/photo.jpg?sz=128", "display_name": "Clarissa G", "link": "https://stackoverflow.com/users/5224889/clarissa-g"}, "edited": false, "score": 0, "creation_date": 1444236788, "post_id": 32997541, "comment_id": 53820857, "body": "Welcome to (asking questions on) stack overflow! When asking questions about coding problems, it helps to reduce your code to a <a href=\"http://stackoverflow.com/help/mcve\">minimum, complete, and verifiable example</a>. Please consider doing so."}], "answers": [{"comments": [{"owner": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "edited": false, "score": 0, "creation_date": 1444240686, "post_id": 32998407, "comment_id": 53823105, "body": "<i>&quot;Creating a datatype every time you want to send information is slow for obvious reasons.&quot;</i> This is not necessarily (and most likely not at all) true. Creating and registering a datatype is a local operation and on modern CPUs is extremely fast, or at least faster than the latency of most network interconnects. Of course, it doesn&#39;t mean that one should unnecessarily create datatypes when that could be evaded."}, {"owner": {"reputation": 4037, "user_id": 4056099, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xF37X.jpg?s=128&g=1", "display_name": "NoseKnowsAll", "link": "https://stackoverflow.com/users/4056099/noseknowsall"}, "reply_to_user": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "edited": false, "score": 0, "creation_date": 1444241945, "post_id": 32998407, "comment_id": 53823852, "body": "While it&#39;s true that the communication will certainly be the slowest part of these functions, there is no reason to constantly be creating and freeing the type every time you want to send anything. Just as you would never suggest anyone to constantly be allocating and deallocating an array on the heap; instead, you should keep one array and overwrite the data."}, {"owner": {"reputation": 3, "user_id": 4521976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5dbca73ada803fff2a201c5d7171c8a0?s=128&d=identicon&r=PG&f=1", "display_name": "Bob Dobalina", "link": "https://stackoverflow.com/users/4521976/bob-dobalina"}, "edited": false, "score": 0, "creation_date": 1444256458, "post_id": 32998407, "comment_id": 53831746, "body": "Thanks you for the reply. To answer your questions, this function only is called when we want to check if our approximation is close to the analytic solution. The <code>offset</code> and <code>chunkSize</code> are the same as used in the domain decomposition used elsewhere. Lastly, would it be better to use MPI_Gather instead of the send and recv here, since we are gathering all of the sub-arrays in the Master process?"}, {"owner": {"reputation": 4037, "user_id": 4056099, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xF37X.jpg?s=128&g=1", "display_name": "NoseKnowsAll", "link": "https://stackoverflow.com/users/4056099/noseknowsall"}, "edited": false, "score": 0, "creation_date": 1444257550, "post_id": 32998407, "comment_id": 53832113, "body": "It depends on how your <code>U</code> array is stored. It appears to me that everyone has allocated memory for the entire <code>U</code> array, but they only work on one section of it. This isn&#39;t the usual use case for <code>MPI_Gather</code>, but it should still work if you&#39;re careful about the send/recv buffer indexing. Usually, <code>MPI_Gather</code> is performed where each MPI process only has allocated a small amount of memory for their local problem. Only the master rank has allocated the full space. If you&#39;re not calling this that often/worried about performance, I would keep it as send/recvs."}, {"owner": {"reputation": 3, "user_id": 4521976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5dbca73ada803fff2a201c5d7171c8a0?s=128&d=identicon&r=PG&f=1", "display_name": "Bob Dobalina", "link": "https://stackoverflow.com/users/4521976/bob-dobalina"}, "edited": false, "score": 0, "creation_date": 1444312334, "post_id": 32998407, "comment_id": 53858527, "body": "Got the send/recv working now. Thanks again for your help."}], "tags": [], "owner": {"reputation": 4037, "user_id": 4056099, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xF37X.jpg?s=128&g=1", "display_name": "NoseKnowsAll", "link": "https://stackoverflow.com/users/4056099/noseknowsall"}, "is_accepted": true, "score": 0, "last_activity_date": 1444237893, "creation_date": 1444237893, "answer_id": 32998407, "question_id": 32997541, "link": "https://stackoverflow.com/questions/32997541/mpi-send-recv-dynamically-allocated-arrays-in-c/32998407#32998407", "title": "MPI_Send/Recv dynamically allocated arrays in C", "body": "<p>Some things I see:</p>\n\n<p>First off, I hope that you are only calling this very few times. If not, then you need to restructure your logic so that you only create an MPI_Datatype in the initialization stage of your algorithm. Creating a datatype every time you want to send information is slow for obvious reasons. </p>\n\n<p>[If the size of the datatype is the only thing changing, then a better alternative would be to simply stop using MPI_Datatypes. You're seemingly only using them for contiguous data anyway, so you can specify the count in <code>MPI_Send</code>/<code>MPI_Recv</code> properly each time you're sending a message. This is the approach I took in the below rewrite]</p>\n\n<p>Secondly, the amount of information you are sending seems to be wrong. That is, you are setting up <code>sendVals</code> to be of size <code>chunkSize</code>. Therefore, when you send part of the <code>U</code> array, you should only be sending <code>chunkSize</code> doubles.</p>\n\n<pre><code>ierr = MPI_Send(sendVals, chunkSize, MPI_DOUBLE, MASTER, msgtag+1, MPI_COMM_WORLD);\n</code></pre>\n\n<p>works, or the alternative using your MPI_Datatype would be</p>\n\n<pre><code>ierr = MPI_Send(sendVals, 1, Mytype, MASTER, msgtag+1, MPI_COMM_WORLD);\n</code></pre>\n\n<p>Likewise, on the receiving end of thing, you should only be receiving either 1 of your datatype or <code>chunkSize</code> <code>MPI_DOUBLE</code>s.</p>\n\n<p>Personally, I would write what you have as follows:</p>\n\n<pre><code>void send_output_MPI( int nWrs, int Me, int M, double* U )\n{\n    int ierr, msgtag, i;\n    int start = (Me - 1) * (M/nWrs)+1;\n    int chunkSize = (M + 2)/nWrs;\n    unsigned int offset = ( Me - 1 ) * chunkSize;\n\n    msgtag = Me * 1000;\n    // send part of the U array\n    ierr = MPI_Send( &amp;U[offset], chunkSize, MPI_DOUBLE, MASTER, msgtag+1, MPI_COMM_WORLD );\n    return;\n}\n\n// only done by master\nvoid recv_output_MPI( int nWrs, int M, double* U )\n{\n    unsigned int i, source;\n    unsigned int msgtag = 1000;\n    int ierr, offset;\n    int chunkSize = (M + 2)/nWrs;\n    MPI_Status status;\n\n    for ( i = 1; i &lt;= nWrs; i++ ) {\n        source = i;\n        msgtag = i * msgtag;\n        offset = (i - 1)*chunkSize;\n        ierr = MPI_Recv( &amp;U[offset], chunkSize, MPI_DOUBLE, source, msgtag+1, MPI_COMM_WORLD, &amp;status );\n\n    }\n    return;\n}\n</code></pre>\n\n<p>If you can calculate <code>offset</code> correctly on the master rank then there is no need to send it. If you cannot calculate it, then you would have to perform the two sends/recvs that you had previously. Also, there is no need to make temporary send/recv buffers if you can put them directly into the <code>U</code> array. This appears to be what you were doing with your <code>memcopy</code> calls.</p>\n\n<p>Finally, I make no guarantees that you are properly calculating the indices <code>offset</code>, <code>end</code>, and the size <code>chunkSize</code>. I only copied your values. You can imagine obviously that the amount you send must be equal to the amount you receive.</p>\n\n<p>Hope this helps.</p>\n"}], "owner": {"reputation": 3, "user_id": 4521976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5dbca73ada803fff2a201c5d7171c8a0?s=128&d=identicon&r=PG&f=1", "display_name": "Bob Dobalina", "link": "https://stackoverflow.com/users/4521976/bob-dobalina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1323, "favorite_count": 0, "accepted_answer_id": 32998407, "answer_count": 1, "score": 0, "last_activity_date": 1444238395, "creation_date": 1444235024, "last_edit_date": 1444238395, "question_id": 32997541, "link": "https://stackoverflow.com/questions/32997541/mpi-send-recv-dynamically-allocated-arrays-in-c", "title": "MPI_Send/Recv dynamically allocated arrays in C", "body": "<p>I'm trying to write a Finite Volume Solver in C using MPI and cannot seem to get the passing of the arrays correct with MPI_Send and MPI_Recv. I need all of the workers to do some computation on their part of the array and then send that sub-array back to the master to put the sub-array back together and compare the approximation with a known solution. The structure of the fvm solver and code is correct, I've checked the serial code against a known solution. Below is the code where I try and pass the sub-arrays back to master and receive them in master. I've configured Valgrind with mpi support, and the memcheck tool does not like the allocation in the send_output_MPI function. Which agrees with what happens when I try and run the program. Mpiexec aborts with signal code: 6.</p>\n\n<p>Below is full sample code. The passing of arrays is in the recv_output_MPI and send_output_MPI functions, where I try and pass the subarrays back to master.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;assert.h&gt;\n#include &lt;mpi.h&gt;\n#include &lt;math.h&gt;\n#include &lt;time.h&gt;\n#include &lt;string.h&gt;\n#include \"fvm.h\"\n#include \"lab_mpi.h\"\n\nint main( int argc, char *argv[] )\n{\n    double tt0, tt1;\n\n//  MPI variables\n    int ierr; // MPI error flag\n    int nProc, nWrs, myID, rc;\n\n//-------------Start MPI------------------\n    rc = MPI_Init( &amp;argc, &amp;argv );\n    if ( rc != MPI_SUCCESS ) {\n        printf( \"Error starting MPI program. Terminating.\\n\" );\n        MPI_Abort(MPI_COMM_WORLD, rc);\n     }\n    ierr = MPI_Comm_size( MPI_COMM_WORLD, &amp;nProc );\n    assert( !ierr );\n    ierr = MPI_Comm_rank( MPI_COMM_WORLD, &amp;myID );\n    assert( !ierr );\n    nWrs = nProc - 1;\n    assert( nWrs == nProc - 1 );\n\n    if ( myID == MASTER ) {\n        tt0 = MPI_Wtime( );\n        master( nWrs, myID );\n        tt1 = MPI_Wtime();\n        printf(\"  Main MR timing = %lf sec on %i workers.\\n\", tt1 - tt0, nWrs );\n        fflush(stdout);\n    } else {\n        ierr = worker( nWrs, myID );\n        printf(\"  Worker %i exiting; ierr = %i\\n\", myID, ierr );\n        fflush(stdout);\n        if ( ierr != 0 )\n            printf(\"  Worker %i exiting with ierr = %i\\n\", myID, ierr );\n        fflush(stdout);\n    }\n\n//---------------End MPI-------------------------\n    ierr = MPI_Finalize( );\n    assert( !ierr );\n    exit( EXIT_SUCCESS );\n}\n\n/* master MPI function\n * reads input file, packs ints and doubles into arrays, then\n * broadcasts\n * receives output from workers at t = tout\n */\nint master( int nWrs, int master )\n{\n    unsigned int i = 0;\n    int Mx; // M/nWrks gives domain decomposition\n    double t = 0.0;\n    char buffer[50];\n    int M, MM;\n    unsigned int N_max;\n    double t0, t_end, dt_out, a, b, factor, D, dx, dt, t_out, dt_expl, mu;\n    double* x_vals;\n    double* U;\n\n    //----MPI variables-----\n    int numInts = 2;\n    int numDbls = 6;\n    int ierr, nProc, myID, rc;\n    int *intParams;\n    double *dblParams;\n\n    fgets(buffer, sizeof(buffer), stdin);\n    fscanf(stdin, \"%lf %lf %lf %lf %lf %lf %lf %i\",\n           &amp;t0, &amp;t_end, &amp;dt_out, &amp;a, &amp;b, &amp;factor, &amp;D, &amp;MM);\n    printf(\"t0: %lf t end: %lf  Number of CVs: %i  Factor: %3.2lf\\n\",\n           t0, t_end, MM, factor);\n        fflush(stdout);\n\n    M = (b - a) * MM;\n    dx = (double)(b - a)/M;\n    dt_expl = (dx * dx)/(2 * D);\n    dt = factor * dt_expl;\n    N_max = (unsigned int)((t_end - t0)/dt + 1);\n    t_out = max(dt_out, dt);\n    mu = dt/dx;\n\n    x_vals = ( double* ) calloc((M + 2), sizeof(double));\n    U = ( double* ) calloc((M + 2), sizeof(double));\n    xMesh( a, b, M, x_vals );\n\n    intParams = ( int* ) malloc(( numInts ) * sizeof( int ));\n    dblParams = ( double* ) malloc(( numDbls ) * sizeof( double ));\n\n   // Pack arrays of variables to broadcast\n    intParams[0] = N_max;\n    intParams[1] = M;\n\n    dblParams[0] = D;\n    dblParams[1] = t_out;\n    dblParams[2] = dt_out;\n    dblParams[3] = dt;\n    dblParams[4] = a;\n    dblParams[5] = b;\n\n    ierr = MPI_Bcast( intParams, numInts, MPI_INT, MASTER, MPI_COMM_WORLD );\n    assert( !ierr );\n    ierr = MPI_Bcast( dblParams, numDbls, MPI_DOUBLE, MASTER, MPI_COMM_WORLD );\n    assert( !ierr );\n\n    // begin timestepping\n    for (i = 1; i &lt;= N_max; i++) {\n//         sent to workers\n//         flux( F, U, M, dx, D, t);\n//         pde( F, U, M, D, mu, t, b );\n        ierr = MPI_Barrier( MPI_COMM_WORLD );\n        assert( !ierr );\n        t = i * dt;\n        if ( t &gt;= t_out ) {\n            recv_output_MPI( nWrs, M, U ); \n            printf( \"\\nProfile at time: %lf, N-step: %u\\n\", t, i );\n            fflush(stdout);\n            compare( U, x_vals, M, D, t );\n            t_out += dt_out;\n        }\n    }\n\n    printf( \"\\nDone at time: %.6lf and Nsteps: %u\\n\\n\", t, i );\n    free( intParams );\n    free( dblParams );\n    free( U );\n    free( x_vals );\n    ierr = MPI_Barrier( MPI_COMM_WORLD );\n    return ierr;\n}\n/* Tasks of WORKER:\n1. Unpack initial iparms and parms arrays, local Mz = Mz / nWRs\n2. Exchange \"boundary\" values with neighbors\n3. Do timestepping computation\n4. Send output to MR every dtout\n*/\nint worker( int nWrs, int Me )\n{\n    double t = 0.0;\n    unsigned int i;\n    int ierr;\n    int nodeLHS, nodeRHS;\n    int numInts = 2;\n    int numDbls = 6;\n    int* intParams;\n    double* dblParams;\n\n    int N_max, M;\n    double D, tout, dt_out, dt, a, b, mu, dx;\n    double* U;\n    double* F;\n    double* x_vals;\n\n    intParams = ( int* ) malloc(( numInts ) * sizeof( int ));\n    dblParams = ( double* ) malloc(( numDbls ) * sizeof( double ));\n\n    ierr = MPI_Bcast( intParams, numInts, MPI_INT, MASTER, MPI_COMM_WORLD );\n    assert( !ierr );\n    ierr = MPI_Bcast( dblParams, numDbls, MPI_DOUBLE, MASTER, MPI_COMM_WORLD );\n    assert( !ierr );\n\n    N_max = intParams[0];\n    M = intParams[1];\n\n    D = dblParams[0];\n    tout = dblParams[1];\n    dt_out = dblParams[2];\n    dt = dblParams[3];\n    a = dblParams[4];\n    b = dblParams[5];\n    mu = (M * dt)/(b - a);\n    dx = (double)(b - a)/M;\n\n    x_vals = calloc((M + 2), sizeof(double));\n    U = calloc((M + 2), sizeof(double));\n    F = calloc((M + 2), sizeof(double));\n\n    xMesh( a, b, M, x_vals );\n    init( M, U ); //set u(a) = 1, u(b) = 0\n\n    for ( i = 1; i &lt;=N_max; i++ ) {\n        ierr = MPI_Barrier( MPI_COMM_WORLD ); \n        assert( !ierr );\n        t = i * dt;\n//          flux( nWrs, Me, F, U, M, dx, D, t );\n//          pde( nWrs, Me, F, U, M, D, mu, t, b );\n        if (t &gt;= tout) {\n            send_output_MPI( nWrs, Me, M, U );\n            tout += dt_out;\n        }\n    }\n\n    free ( intParams );\n    free ( dblParams );\n    deleteMem ( U, F, x_vals );\n    fflush(stdout);\n    ierr = MPI_Barrier( MPI_COMM_WORLD );\n    return ierr;\n}\n// only done by master\nvoid recv_output_MPI( int nWrs, int M, double* U )\n{\n    int Ime;\n    unsigned int i, source;\n    unsigned int msgtag = 1000;\n    int ierr, offset;\n    int chunkSize = (M + 2)/nWrs;\n    unsigned int end;\n    double* tmp;\n\n    MPI_Status status;\n    MPI_Datatype Mytype;\n\n    ierr = MPI_Type_contiguous( chunkSize, MPI_DOUBLE, &amp;Mytype );\n    assert ( !ierr );\n    ierr = MPI_Type_commit( &amp;Mytype );\n    assert ( !ierr );\n\n    for ( i = 1; i &lt;= nWrs; i++ ) {\n        source = i;\n        msgtag = i * msgtag;\n        offset = (i - 1) * chunkSize;\n        end = i * chunkSize;\n        tmp = ( double* ) malloc(( chunkSize ) * sizeof( double ));\n        ierr = MPI_Recv( &amp;offset, 1, MPI_INT, source, msgtag, MPI_COMM_WORLD, &amp;status ); \n        ierr = MPI_Recv( tmp, chunkSize, MPI_DOUBLE, source, msgtag+1, MPI_COMM_WORLD, &amp;status );\n        assert ( !ierr );\n        for ( i = offset; i &lt; end; i++ ){\n            U[i] = tmp[i];\n        }\n    }\n    ierr = MPI_Type_free( &amp;Mytype );\n    assert ( !ierr );\n    free( tmp );\n    return;\n}\nvoid send_output_MPI( int nWrs, int Me, int M, double* U )//TODO:fix\n{\n    int ierr, msgtag, i;\n    int start = (Me - 1) * (M/nWrs)+1;\n    int chunkSize = (M + 2)/nWrs;\n    unsigned int offset = ( Me - 1 ) * chunkSize;\n    unsigned int end = Me * chunkSize;\n    double* sendVals  = calloc( chunkSize, sizeof( double ));\n    assert( sendVals != NULL );\n    MPI_Datatype Mytype;\n\n    ierr = MPI_Type_contiguous( chunkSize, MPI_DOUBLE, &amp;Mytype );\n    assert ( !ierr );\n    ierr = MPI_Type_commit( &amp;Mytype );\n    assert ( !ierr );\n\n    msgtag = Me * 1000;\n    ierr = MPI_Send( &amp;offset, 1, MPI_INT, MASTER, msgtag, MPI_COMM_WORLD ); \n\n//     memcpy( &amp;sendVals[0], &amp;U[offset], chunkSize * sizeof( double ));\n    // send part of the U array\n    ierr = MPI_Send( sendVals, chunkSize, Mytype, MASTER, msgtag+1, MPI_COMM_WORLD );\n    assert( !ierr );\n    ierr = MPI_Type_free( &amp;Mytype );\n    assert ( !ierr );\n    free( sendVals );\n    return;\n}\n/*  produces nodal values for x-array\n    takes interval endpoints [a,b] as double and\n    M as number of nodal values\n    returns pointer to x-array\n    precondition: x-array allocated in main,\n    postcondition: x-array populated in main\n*/\nvoid xMesh( double a, double b, int M, double* x )\n{\n    unsigned int i;\n    double dx = (b - a)/M;\n    x[0] = a;\n    for (i = 1; i &lt; M+1; i++)\n        x[i] = a + (i - 0.5)*dx;\n    x[M + 1] = b;\n    return;\n}\n/* function: init\n * takes: endpoints, a and b, x-array and pde struct\n * returns: nothing\n * precondition: U and x array initialized, x-array defined\n * postcondition: u_init set in U array\n */\nvoid init( int M, double* U )\n{\n    U[0] = 1.0;\n    U[M+1] = 0.0;\n}\n\nvoid deleteMem( double* F, double* U, double* x )\n{\n    free( F );\n    free( U );\n    free( x );\n    return;\n}\n/* function: compare - compares numerical approximation against the\n *           closed-form solution\n * params: U - pointer to u array\n           x - pointer to x (spatial) array\n           M - array size\n           D - diffusion coefficient\n           t - time\n   precondition: arrays initialized and containing values\n   postcondition: file 'plot.out' appended with values for plotting\n*/\nvoid compare( double* U, double* x, int M, double D, double t )\n{\n    unsigned int j;\n    double error, u_exact;\n    double err_max = 0.0;\n    double val = 2.0 * sqrt( D * t );\n\n    for ( j = 0; j &lt; M+2; j++ ) {\n        u_exact = erfc( x[j]/val );\n        error = fabs( u_exact - U[j] );\n        fprintf( stdout, \"%10.8lf\\t%18.16lf\\t%18.16lf\\n\", x[j], U[j], u_exact );\n        fflush(stdout);\n        err_max = max( error, err_max );\n    }\n    return;\n}\n</code></pre>\n\n<p>The text file read in looks something like:</p>\n\n<p><code>t0   tEnd  dtout a    b    factor  D    MM</code></p>\n\n<p><code>0.0  1.0   1.0   0.0  1.0   0.9     0.1   8</code> </p>\n\n<p>I've tried using memcpy and a for loop to copy the passed arrays back to the U-array, but nothing is working well this morning.</p>\n\n<p>Thanks in advance. </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 2, "creation_date": 1444234598, "post_id": 32997367, "comment_id": 53819502, "body": "Mate. Please. C or C++? Which one? You chose to program in one of those languages? Which one did you pick in the end? (<code>delete</code> suggests C++, yes? Then why tag C?)"}, {"owner": {"reputation": 6465, "user_id": 1181435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2f2059bf003de1adcf05b16aeecd5f4?s=128&d=identicon&r=PG", "display_name": "Alex Tartan", "link": "https://stackoverflow.com/users/1181435/alex-tartan"}, "edited": false, "score": 3, "creation_date": 1444234628, "post_id": 32997367, "comment_id": 53819517, "body": "And your question is?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1444236957, "post_id": 32997367, "comment_id": 53820968, "body": "<code>char b[1];</code> isn&#39;t capable of holding any string except a <code>&#39;\\0&#39;</code> string terminator. But <code>fgets()</code> retains the <code>&#39;\\n&#39;</code> newline, so this is a case of putting &quot;a quart into a pint pot&quot;. It doesn&#39;t leave <code>int x = atoi(b);</code> much to work with."}], "answers": [{"tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 2, "last_activity_date": 1444234717, "creation_date": 1444234717, "answer_id": 32997447, "question_id": 32997367, "link": "https://stackoverflow.com/questions/32997367/programming-in-visual-studio-c/32997447#32997447", "title": "Programming in Visual Studio C", "body": "<p>The message seems pretty clear. It's telling you that, somewhere inside the implementation of <code>fclose</code>, there is a requirement (enforced by assertion) that the input not be <code>NULL</code>.</p>\n\n<p>Indeed, if you read the <em>documentation</em> you'll see that <code>fclose</code> takes a <code>FILE*</code> that points to a stream, not a null pointer.</p>\n\n<p>In your code you literally <em>only</em> call <code>fclose(fin)</code> when <code>fin</code> is <code>NULL</code>.The complete lack of logic in that aside, if you really want to write C++, there are <em>much</em> better ways to handle file I/O than this. Open your C++ book to the file I/O chapter and read on! Good luck.</p>\n"}], "owner": {"reputation": 1, "user_id": 4789927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22a5ff046c0bc962deea180cf436b9b?s=128&d=identicon&r=PG&f=1", "display_name": "Trj Bach", "link": "https://stackoverflow.com/users/4789927/trj-bach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 345, "favorite_count": 0, "closed_date": 1444245821, "answer_count": 1, "score": -9, "last_activity_date": 1444235519, "creation_date": 1444234449, "last_edit_date": 1444235519, "question_id": 32997367, "link": "https://stackoverflow.com/questions/32997367/programming-in-visual-studio-c", "closed_reason": "Not suitable for this site", "title": "Programming in Visual Studio C", "body": "<p>Command Line Always Print \"Can Not Read\" !!</p>\n\n<p>Debug Assertion Failed!</p>\n\n<p>Program: E:\\CTDL\\1311370\\Debug\\1311370.exe\nFile: f:\\dd\\vctools\\crt\\crtw32\\stdio\\fclose.c\nLine: 46</p>\n\n<p>Expression: (stream != NULL)</p>\n\n<pre><code>#include \"1311370_SearchA1s.h\"\n#include \"1311370_SortA1s.h\"\n\nvoid main(){\n    char fileIn[100], fileOut[100];\n\n    printf(\"Enter Link of The Test File : \");\n    flushall();\n    gets(fileIn);\n\n    printf(\"Enter Link of The Result Folder : \");\n    flushall();\n    gets(fileOut);\n    strcat(fileOut, \"\\\\1311370_BaiThucHanhSo1.txt\");//n\u1ed1i th\u00eam v\u00e0o \u0111\u01b0\u1eddng d\u1eabn ghi file\n\n    FILE * fin = fopen(fileIn, \"r\");\n    FILE * fout = fopen(fileOut, \"w\");\n\n    if (fin == NULL){\n        printf(\"Can Not Read File\\n\");\n        fclose(fin);\n        fclose(fout);\n        exit(0);\n    }\n\n    else{\n        char str[100], a[100], b[1];\n\n        fgets(str, 100, fin);\n\n        fprintf(fout , \"Ex1Test1\");\n\n        fgets(a, 100, fin);\n        fgets(b, 1, fin);\n\n        int n = countSpace(a) + 1;\n        int *array = convertStringToArray(a);\n        int x = atoi(b);\n\n        int pos = LSearch(array, n, x);\n\n        fprintf(fout , \"%d\" , pos);\n\n        delete array;\n    }\n    getch();\n}\n</code></pre>\n"}, {"tags": ["c", "math"], "comments": [{"owner": {"reputation": 4208, "user_id": 3981034, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/DRJID.png?s=128&g=1", "display_name": "CodyF", "link": "https://stackoverflow.com/users/3981034/codyf"}, "edited": false, "score": 1, "creation_date": 1444234010, "post_id": 32997110, "comment_id": 53819126, "body": "You are multiplying by the number of years, not raising to the power of years. Use a pow() function."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 1, "creation_date": 1444234281, "post_id": 32997110, "comment_id": 53819307, "body": "Also <code>rate</code> should be <code>double</code>, not <code>int</code>."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1444234468, "post_id": 32997110, "comment_id": 53819422, "body": "@alk: heh - well spotted - offending &quot;not&quot; removed now!"}], "answers": [{"tags": [], "owner": {"reputation": 6529, "user_id": 4252320, "user_type": "registered", "accept_rate": 59, "profile_image": "https://lh3.googleusercontent.com/-_DAs7Dtci9U/AAAAAAAAAAI/AAAAAAAAIf8/96ZNJAUF2Xk/photo.jpg?sz=128", "display_name": "ergonaut", "link": "https://stackoverflow.com/users/4252320/ergonaut"}, "is_accepted": true, "score": 4, "last_activity_date": 1444234804, "last_edit_date": 1444234804, "creation_date": 1444233967, "answer_id": 32997195, "question_id": 32997110, "link": "https://stackoverflow.com/questions/32997110/c-program-displays-incorrect-result/32997195#32997195", "title": "C program displays incorrect result", "body": "<p>Your formula doesn't specify it correctly:</p>\n\n<pre><code>subtotal = principal * (1 + rate) * years;\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>subtotal = principal * pow((1 + rate),years);\n</code></pre>\n\n<p>also look at the other answer (@ameycu).. your data type has a mismatch.</p>\n"}, {"comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1444234240, "post_id": 32997200, "comment_id": 53819276, "body": "Using <code>^</code> in the context of C to express the <i>power-of</i> operation is at least ambiguous."}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1444234666, "post_id": 32997200, "comment_id": 53819540, "body": "@alk  Well , yes it just a mathematical formula . What he tried do to in program is something wrong for the logic ."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1444234721, "post_id": 32997200, "comment_id": 53819582, "body": "In C <code>^</code> is the XOR-operator. Not everybody might parse it as <i>power-of</i>."}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1444235810, "post_id": 32997200, "comment_id": 53820252, "body": "@alk  It really looks better . Thanks !!"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1444236118, "post_id": 32997200, "comment_id": 53820453, "body": "No only just &quot;<i>looks better</i>&quot;, which would not really matter, more important it&#39;s UNambiguous, clear, easy to understand, &quot;fail-safe&quot;! :-)"}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1444236263, "post_id": 32997200, "comment_id": 53820540, "body": "@alk  Totally agreed :)"}], "tags": [], "owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "is_accepted": false, "score": 2, "last_activity_date": 1444235525, "last_edit_date": 1486653006, "creation_date": 1444233979, "answer_id": 32997200, "question_id": 32997110, "link": "https://stackoverflow.com/questions/32997110/c-program-displays-incorrect-result/32997200#32997200", "title": "C program displays incorrect result", "body": "<pre><code>int calculation_1(int principal, int rate, int years) //change 2nd parameter type to double\n</code></pre>\n\n<p>Function require 2 parameter as type <code>int</code> and you pass it a <code>double</code> while calling in <code>main</code>-</p>\n\n<pre><code>total = calculation_1(amount1, amount2, amount3);\n   /*  amount2 is declared as double */ \n</code></pre>\n\n<p>So , due to this fraction part in <code>amount2</code> will be discarded , which can lead to wrong answer.</p>\n\n<p>And you need to use function <a href=\"http://www.tutorialspoint.com/c_standard_library/c_function_pow.htm\" rel=\"nofollow noreferrer\"><code>pow</code></a> to use in formula, to get this expression in your mathematical formula :</p>\n\n<p><img src=\"https://latex.codecogs.com/gif.latex?(1&space;&plus;&space;rate)%5E%7Bnumber-of-years%7D\" title=\"(1 + rate)^{number-of-years}\" /></p>\n"}], "owner": {"reputation": 105, "user_id": 5398568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94d70679fe6d668d1063c876879b886d?s=128&d=identicon&r=PG&f=1", "display_name": "Scott Summers", "link": "https://stackoverflow.com/users/5398568/scott-summers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 675, "favorite_count": 0, "accepted_answer_id": 32997195, "answer_count": 2, "score": 0, "last_activity_date": 1444235525, "creation_date": 1444233743, "last_edit_date": 1444234092, "question_id": 32997110, "link": "https://stackoverflow.com/questions/32997110/c-program-displays-incorrect-result", "title": "C program displays incorrect result", "body": "<p>I have written a program which calculates the amount of money you need to pay. The user enters their principal amount, interest rate and time period in years and then the program gives them the amount they will have to pay in future. When I run the program the final result or the amount I need to pay is too big or incorrect. Here is the code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint calculation_1(int principal, int rate, int years);\n\nint main(void) {\n\n    int amount1, amount3;\n    double amount2, total;\n\n    printf(\"Investement Calculator \\n\");\n    printf(\"====================== \\n\");\n\n    printf(\"Principal : \");\n    scanf(\"%d\", &amp;amount1);\n\n    printf(\"Annual Rate: \");\n    scanf(\"%lf\", &amp;amount2);\n\n    printf(\"No of Years: \");\n    scanf(\"%d\", &amp;amount3);\n\n    total = calculation_1(amount1, amount2, amount3);\n\n    printf(\"The future value is: $%.2f \\n\", total);\n\n    return 0;\n}\n\nint calculation_1(int principal, int rate, int years) {\n\n    double subtotal,final;\n\n    subtotal = principal * (1 + rate) * years;\n\n    return subtotal;\n}\n</code></pre>\n\n<p>I tested with these values: 1000 for principal, 0.06 for rate and 5 years for no of years. Final result should be $1338.23, but I get $5000.00. Here is the formula I used to calculate the amount:</p>\n\n<pre><code>total = principal * (1 + rate) ^number of years.\n</code></pre>\n\n<p>I can't figure out what I am doing wrong.</p>\n"}, {"tags": ["c", "encryption"], "comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1444233855, "post_id": 32996967, "comment_id": 53819004, "body": "How can this be answered without seeing the routine used for decryption?"}, {"owner": {"reputation": 133, "user_id": 5399423, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/424707d0ddc3b1c250d00d24172707ca?s=128&d=identicon&r=PG&f=1", "display_name": "Kemal P.", "link": "https://stackoverflow.com/users/5399423/kemal-p"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1444234418, "post_id": 32996967, "comment_id": 53819382, "body": "@Michi, the algorithm is correct. I&#39;ve checked it with my professor"}, {"owner": {"reputation": 133, "user_id": 5399423, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/424707d0ddc3b1c250d00d24172707ca?s=128&d=identicon&r=PG&f=1", "display_name": "Kemal P.", "link": "https://stackoverflow.com/users/5399423/kemal-p"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1444234430, "post_id": 32996967, "comment_id": 53819393, "body": "@alk, the question is updated"}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1444234470, "post_id": 32996967, "comment_id": 53819425, "body": "@KemalP. I deleted already my comment after I saw again your code"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1444234659, "post_id": 32996967, "comment_id": 53819535, "body": "You expect the encrypted text to be terminated by a new-line?"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1444244912, "post_id": 32996967, "comment_id": 53825660, "body": "&quot;<i>What should I do to prevent that?</i>&quot; why do you care at all?"}], "answers": [{"comments": [{"owner": {"reputation": 133, "user_id": 5399423, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/424707d0ddc3b1c250d00d24172707ca?s=128&d=identicon&r=PG&f=1", "display_name": "Kemal P.", "link": "https://stackoverflow.com/users/5399423/kemal-p"}, "edited": false, "score": 0, "creation_date": 1444234830, "post_id": 32997450, "comment_id": 53819649, "body": "if(c!= &#39;\\n&#39;) should be after executing for-loop ? @AlterMann"}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "reply_to_user": {"reputation": 133, "user_id": 5399423, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/424707d0ddc3b1c250d00d24172707ca?s=128&d=identicon&r=PG&f=1", "display_name": "Kemal P.", "link": "https://stackoverflow.com/users/5399423/kemal-p"}, "edited": false, "score": 0, "creation_date": 1444234897, "post_id": 32997450, "comment_id": 53819690, "body": "@KemalP., yes, at the very end."}, {"owner": {"reputation": 133, "user_id": 5399423, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/424707d0ddc3b1c250d00d24172707ca?s=128&d=identicon&r=PG&f=1", "display_name": "Kemal P.", "link": "https://stackoverflow.com/users/5399423/kemal-p"}, "edited": false, "score": 0, "creation_date": 1444234947, "post_id": 32997450, "comment_id": 53819733, "body": "But it says <code>comparison between pointer and integer</code>? @AlterMann"}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "reply_to_user": {"reputation": 133, "user_id": 5399423, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/424707d0ddc3b1c250d00d24172707ca?s=128&d=identicon&r=PG&f=1", "display_name": "Kemal P.", "link": "https://stackoverflow.com/users/5399423/kemal-p"}, "edited": false, "score": 0, "creation_date": 1444235477, "post_id": 32997450, "comment_id": 53820062, "body": "It compiles without warnings for me, <code>c</code> is a <code>char</code> not a pointer, but edited, I post the entire code."}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "reply_to_user": {"reputation": 133, "user_id": 5399423, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/424707d0ddc3b1c250d00d24172707ca?s=128&d=identicon&r=PG&f=1", "display_name": "Kemal P.", "link": "https://stackoverflow.com/users/5399423/kemal-p"}, "edited": false, "score": 0, "creation_date": 1444237052, "post_id": 32997450, "comment_id": 53821026, "body": "Don&#39;t forget to initialize <code>c</code> to <code>0</code>, there is another edit."}], "tags": [], "owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "is_accepted": true, "score": 1, "last_activity_date": 1444236966, "last_edit_date": 1444236966, "creation_date": 1444234722, "answer_id": 32997450, "question_id": 32996967, "link": "https://stackoverflow.com/questions/32996967/no-newline-at-end-of-file-when-entering-diff-command-on-vi/32997450#32997450", "title": "No newline at end of file when entering diff command on vi", "body": "<p>Try adding a new line at the end of your <code>output</code> file:</p>\n\n<pre><code>int encryptFile(FILE *input, FILE *output)\n{\n    char c = 0;\n    char p;\n    int r = 0;\n    char p1 = 0;\n    char c1 = 0;\n    int index = 0;\n    char line[100];\n\n    while (fgets(line, sizeof(line), input) != NULL) {\n        for (index = 0; line[index] != 0; index++) {\n            p = line[index];\n            r = rand() % 97;\n            //change all displayable characters [0...96]\n            if (p == 't') {\n                p1 = 0;\n            } else if (p == '\\n') {\n                p1 = 1;\n            } else {\n                p1 = p - 30;\n            }\n            c1 = p1 ^ r;//bitwise xor\n            if (c1 == 0) {\n                c = 't';\n            } else if (c1 == 1) {\n                c = '\\n';\n            } else {\n                c = c1 + 30;\n            }\n            //Write\n            fputc(c, output);\n        }\n    }\n    if (c != '\\n') {\n        fputc('\\n', output);\n    }\n    return 1;\n}\n</code></pre>\n\n<p>Or use:</p>\n\n<pre><code>diff --ignore-all-space file1 file2\n</code></pre>\n"}], "owner": {"reputation": 133, "user_id": 5399423, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/424707d0ddc3b1c250d00d24172707ca?s=128&d=identicon&r=PG&f=1", "display_name": "Kemal P.", "link": "https://stackoverflow.com/users/5399423/kemal-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 456, "favorite_count": 0, "accepted_answer_id": 32997450, "answer_count": 1, "score": 1, "last_activity_date": 1449372447, "creation_date": 1444233374, "last_edit_date": 1449372447, "question_id": 32996967, "link": "https://stackoverflow.com/questions/32996967/no-newline-at-end-of-file-when-entering-diff-command-on-vi", "title": "No newline at end of file when entering diff command on vi", "body": "<p>I'm so tired of debugging and changing my code but every time it gives me:</p>\n\n<pre><code>No newline at end of file\n</code></pre>\n\n<p>when I try:</p>\n\n<pre><code>diff main.c output.txt\n</code></pre>\n\n<p>My program encrypts/decrypts the input textfile and it gives a correct output when it converts but when I enter <code>diff main.c output.txt</code> then it would always point me to that error. What should I do to prevent that? Any help would be appreciated!</p>\n\n<pre><code>int encryptFile(FILE *input, FILE *output){\n    char c;\n    char p;\n    int r = 0;\n    char p1 = 0;\n    char c1 = 0;\n    int index = 0;\n    char line[100];\n   // while((p = fgetc(input)) != EOF){\n      while(fgets(line, sizeof(line), input) != NULL){\n        for(index = 0; line[index] != 0; index++){\n        p = line[index];\n        r = rand() % 97;\n\n        if(p == 't'){\n            p1 = 0;\n        }\n        else if(p == '\\n'){\n            p1 = 1;\n        }\n        else{\n            p1 = p - 30;\n        }\n\n        c1 = p1 ^ r;\n        if(c1 == 0){\n            c = 't';\n        }\n        else if(c1 == 1){\n            c = '\\n';\n        }\n        else{\n            c = c1 + 30;\n        }\n        //Write\n        fputc(c, output);\n    }\n      }\n    return 1;\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "libpcap", "tcpreplay"], "answers": [{"comments": [{"owner": {"reputation": 165, "user_id": 4244169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c97ca3f5526d6aec04ce8ea4ff7e056?s=128&d=identicon&r=PG&f=1", "display_name": "icdevppl", "link": "https://stackoverflow.com/users/4244169/icdevppl"}, "edited": false, "score": 0, "creation_date": 1444320157, "post_id": 33007885, "comment_id": 53864240, "body": "Thanks Guy! I verified that even though tcpreplay reports no error, the packets were indeed dropped. I was going to use the NIC as sort of a sniffer, and process only packets from the pcap files, but it was getting packets from the ethernet cable... I guess I just need to make it non-promisc"}, {"owner": {"reputation": 165, "user_id": 4244169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c97ca3f5526d6aec04ce8ea4ff7e056?s=128&d=identicon&r=PG&f=1", "display_name": "icdevppl", "link": "https://stackoverflow.com/users/4244169/icdevppl"}, "edited": false, "score": 0, "creation_date": 1444685505, "post_id": 33007885, "comment_id": 53997082, "body": "or I could use the loopback device for this purpose.... wish there was a networking book for dummies :P"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user862787"}, "is_accepted": true, "score": 1, "last_activity_date": 1444284712, "creation_date": 1444284712, "answer_id": 33007885, "question_id": 32996721, "link": "https://stackoverflow.com/questions/32996721/pcap-inject-on-a-disconnected-interface/33007885#33007885", "title": "pcap_inject on a disconnected interface", "body": "<blockquote>\n  <p>Now the NIC doesn't have an ethernet cable connected to it.</p>\n</blockquote>\n\n<p>Then what useful result do you expect to get by sending packets on that NIC?</p>\n\n<blockquote>\n  <p>I know that <code>pcap_open_live</code> won't tell whether the device opened supports sending</p>\n</blockquote>\n\n<p>Whether the device is up or not can change over time, so any answer you get from <code>pcap_open_live()</code> could be incorrect by the time you actually try to send the packet.</p>\n\n<blockquote>\n  <p>so I get errors from pcap_inject (<code>errno 100</code>)</p>\n</blockquote>\n\n<p>Searching for 100 in Linux errno.h reveals:</p>\n\n<pre><code>#define ENETDOWN    100 /* Network is down */\n</code></pre>\n\n<p>I guess the Linux networking doesn't like it when people try to send packets on an interface that's down with a <code>send()</code> system call, which is what libpcap does.</p>\n\n<blockquote>\n  <p>Is this to be expected?</p>\n</blockquote>\n\n<p>Yes.</p>\n\n<blockquote>\n  <p>If I simply use tcpreplay from the cmd line, it finishes and presents no error</p>\n</blockquote>\n\n<p>tcpreplay has a whole bunch of different mechanisms it uses to send packets.  See <code>sendpacket()</code> in the <code>sendpacket.c</code> source file in the tcpreplay source.  Some of them might, for example, silently drop packets being sent on a dead interface, rather than reporting an error, and it might be using one of those mechanisms.</p>\n"}], "owner": {"reputation": 165, "user_id": 4244169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c97ca3f5526d6aec04ce8ea4ff7e056?s=128&d=identicon&r=PG&f=1", "display_name": "icdevppl", "link": "https://stackoverflow.com/users/4244169/icdevppl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 580, "favorite_count": 0, "accepted_answer_id": 33007885, "answer_count": 1, "score": 1, "last_activity_date": 1444284712, "creation_date": 1444232696, "last_edit_date": 1444236930, "question_id": 32996721, "link": "https://stackoverflow.com/questions/32996721/pcap-inject-on-a-disconnected-interface", "title": "pcap_inject on a disconnected interface", "body": "<p>I'm trying to implement replaying packets stored in .pcap files using libpcap. \nThe process is very simple: I would open the pcap file with 'pcap_open_offline' then pass packets to the device opened with <code>pcap_open_live</code>, and send them with <code>pcap_inject</code> through the interface. </p>\n\n<p>Now the NIC doesn't have an ethernet cable connected to it. I know that <code>pcap_open_live</code> won't tell whether the device opened supports sending, so I get errors from pcap_inject (<code>errno 100</code>). Is this to be expected? If I simply use tcpreplay from the cmd line, it finishes and presents no error, with or without the ethernet cable plugged in. </p>\n\n<p>Anyone know how tcpreplay/tcpedit handles \"dead\" interfaces? Does tcpreplay rewrite packet headers whereas I'm trying to send them raw? Any help is appreciated!</p>\n\n<p>I'm on Ubuntu 14.04 and the interface is address-less and in promisc mode: </p>\n\n<pre><code>auto eth1\niface eth1 inet manual\n    up ifconfig eth1 promisc up\n    down ifconfig eth1 promisc down\n</code></pre>\n"}, {"tags": ["c", "pointers", "struct", "glut", "deep-copy"], "comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1444232462, "post_id": 32996397, "comment_id": 53818005, "body": "You want to do a &quot;deep-copy&quot; (<a href=\"https://en.wikipedia.org/wiki/Object_copying#Deep_copy\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Object_copying#Deep_copy</a>) of the source <code>struct</code> variable."}], "answers": [{"tags": [], "owner": {"reputation": 61, "user_id": 5418644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dae8f8ceb9dd8b887fdcf7bf54d5187b?s=128&d=identicon&r=PG", "display_name": "Fabio Romano", "link": "https://stackoverflow.com/users/5418644/fabio-romano"}, "is_accepted": false, "score": 3, "last_activity_date": 1444232111, "creation_date": 1444232111, "answer_id": 32996509, "question_id": 32996397, "link": "https://stackoverflow.com/questions/32996397/cloning-a-struct/32996509#32996509", "title": "Cloning a struct?", "body": "<p>I think the problem is in the pointer to pixeldata. When you assign it, you are copying the address of the value stored in original, and once you modify it with, the original is modified too. Try allocating a new pixelData pointer and then copy the original content in its value, instead of copying the pointed address itself.</p>\n"}, {"comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 2, "creation_date": 1444232717, "post_id": 32996531, "comment_id": 53818179, "body": "No need to cast <code>malloc()</code> in C."}, {"owner": {"reputation": 3215, "user_id": 1763652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TlG9j.jpg?s=128&g=1", "display_name": "gator", "link": "https://stackoverflow.com/users/1763652/gator"}, "edited": false, "score": 0, "creation_date": 1444236506, "post_id": 32996531, "comment_id": 53820688, "body": "Cheers, this helps a lot. Just a correction: <code>memcpy(original.pixelData, work.pixelData, size);</code> should be <code>memcpy(work.pixelData, original.pixelData, size);</code>,"}], "tags": [], "owner": {"reputation": 8813, "user_id": 1812788, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Zn2AX.jpg?s=128&g=1", "display_name": "Tam&#225;s Zahola", "link": "https://stackoverflow.com/users/1812788/tam%c3%a1s-zahola"}, "is_accepted": true, "score": 4, "last_activity_date": 1444232154, "creation_date": 1444232154, "answer_id": 32996531, "question_id": 32996397, "link": "https://stackoverflow.com/questions/32996397/cloning-a-struct/32996531#32996531", "title": "Cloning a struct?", "body": "<p>You have a <code>pixelData</code> pointer in your struct:</p>\n\n<pre><code>typedef struct {\n    pixel *pixelData;\n    int w, h;\n} imagen;\n</code></pre>\n\n<p>In order to create a completely independent copy, you need to copy the data <code>pixelData</code> is pointing to:</p>\n\n<pre><code>work.w = original.w;\nwork.h = original.h;\nsize_t size = sizeof(pixel) * work.w * work.h;\nwork.pixelData = (pixel*)malloc(size);\nmemcpy(original.pixelData, work.pixelData, size);\n</code></pre>\n\n<p>Also note that when you no longer need it you have to release the allocated memory:</p>\n\n<pre><code>free(work.pixelData);\n</code></pre>\n"}], "owner": {"reputation": 3215, "user_id": 1763652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TlG9j.jpg?s=128&g=1", "display_name": "gator", "link": "https://stackoverflow.com/users/1763652/gator"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 271, "favorite_count": 0, "accepted_answer_id": 32996531, "answer_count": 2, "score": 3, "last_activity_date": 1444232760, "creation_date": 1444231818, "last_edit_date": 1444232760, "question_id": 32996397, "link": "https://stackoverflow.com/questions/32996397/cloning-a-struct", "title": "Cloning a struct?", "body": "<p>I have some structs like the below:</p>\n\n<pre><code>typedef struct {\n    GLubyte red, green, blue;\n} pixel;\n\ntypedef struct {\n    pixel *pixelData;\n    int w, h;\n} imagen;\n</code></pre>\n\n<p>It's for an image loader and image processor (applies filters to a loaded image).</p>\n\n<p>I'm initializing two <code>imagen</code>:</p>\n\n<pre><code>imagen work, original;\n</code></pre>\n\n<p><code>work</code> is something that I want to display after having some filters applied, and <code>original</code> is something I can reset to.</p>\n\n<pre><code>void loadImage() {\n    //load data into (imagen)original\n}\nwork = original;\n</code></pre>\n\n<p>After loading the image, I copy it to <code>work</code> so I can maintain a copy of the original should I want to reset later (reset being <code>work = original</code> again). The problem I'm facing is that the reset doesn't work: anything I apply to <code>work</code> is also applied to <code>original</code>, so I'm effectively resetting to what I'm resetting.</p>\n\n<p>I think the problem is my <code>work = original</code>; I'm fairly new to C, but I'm assuming I'm only pointing <code>work</code> at <code>original</code>, so any logic I do on <code>work</code> is also applied to <code>original</code>?</p>\n\n<pre><code>original.w = 40;\nwork = original;\nwork.w = 50;\nwork = original;\n</code></pre>\n\n<p>Is <code>work.w</code> 40 or 50 in this case? If it is indeed pointing to original, how do I instead clone <code>original</code> onto <code>work</code>, so I can safely work on <code>work</code> without consequence of <code>original</code>?</p>\n"}, {"tags": ["java", "c", "eclipse", "encryption"], "comments": [{"owner": {"reputation": 2708, "user_id": 1757338, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/c5ddddc8fdccc5c2bd49dc74c02a60b7?s=128&d=identicon&r=PG", "display_name": "yeyo", "link": "https://stackoverflow.com/users/1757338/yeyo"}, "edited": false, "score": 0, "creation_date": 1444232605, "post_id": 32996278, "comment_id": 53818101, "body": "What is the Key size in the Java version?"}, {"owner": {"reputation": 692, "user_id": 5121282, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/ade6459a1f0d5bee3fb61ecc40ae1bff?s=128&d=identicon&r=PG&f=1", "display_name": "Alan Gaytan", "link": "https://stackoverflow.com/users/5121282/alan-gaytan"}, "reply_to_user": {"reputation": 2708, "user_id": 1757338, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/c5ddddc8fdccc5c2bd49dc74c02a60b7?s=128&d=identicon&r=PG", "display_name": "yeyo", "link": "https://stackoverflow.com/users/1757338/yeyo"}, "edited": false, "score": 0, "creation_date": 1444235940, "post_id": 32996278, "comment_id": 53820335, "body": "What do you mean for Key size?, I&#39;m sorry, I&#39;m new about this topic"}, {"owner": {"reputation": 2708, "user_id": 1757338, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/c5ddddc8fdccc5c2bd49dc74c02a60b7?s=128&d=identicon&r=PG", "display_name": "yeyo", "link": "https://stackoverflow.com/users/1757338/yeyo"}, "edited": false, "score": 0, "creation_date": 1444236334, "post_id": 32996278, "comment_id": 53820583, "body": "I&#39;m not an expert either, but in the C version I see you specified the size of the key, <code>AES_set_encrypt_key(key, 128, &amp;enc_key);</code>  128. But in Java I can&#39;t see where you specified the same key size."}, {"owner": {"reputation": 692, "user_id": 5121282, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/ade6459a1f0d5bee3fb61ecc40ae1bff?s=128&d=identicon&r=PG&f=1", "display_name": "Alan Gaytan", "link": "https://stackoverflow.com/users/5121282/alan-gaytan"}, "reply_to_user": {"reputation": 2708, "user_id": 1757338, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/c5ddddc8fdccc5c2bd49dc74c02a60b7?s=128&d=identicon&r=PG", "display_name": "yeyo", "link": "https://stackoverflow.com/users/1757338/yeyo"}, "edited": false, "score": 0, "creation_date": 1444240149, "post_id": 32996278, "comment_id": 53822818, "body": "I add code to set key size to 128 on generateKey method, but still have different results"}, {"owner": {"reputation": 2708, "user_id": 1757338, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/c5ddddc8fdccc5c2bd49dc74c02a60b7?s=128&d=identicon&r=PG", "display_name": "yeyo", "link": "https://stackoverflow.com/users/1757338/yeyo"}, "edited": false, "score": 0, "creation_date": 1444251793, "post_id": 32996278, "comment_id": 53829635, "body": "Please, check this link <a href=\"http://aesencryption.net/\" rel=\"nofollow noreferrer\">aesencryption.net</a>, there you can make some test and evaluate your results. Also at the bottom they have an implementation in Java. To decode base64 you can use this link. <a href=\"http://tomeko.net/online_tools/base64.php?lang=en\" rel=\"nofollow noreferrer\">tomeko.net/online_tools/base64.php?lang=en</a>"}, {"owner": {"reputation": 692, "user_id": 5121282, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/ade6459a1f0d5bee3fb61ecc40ae1bff?s=128&d=identicon&r=PG&f=1", "display_name": "Alan Gaytan", "link": "https://stackoverflow.com/users/5121282/alan-gaytan"}, "reply_to_user": {"reputation": 2708, "user_id": 1757338, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/c5ddddc8fdccc5c2bd49dc74c02a60b7?s=128&d=identicon&r=PG", "display_name": "yeyo", "link": "https://stackoverflow.com/users/1757338/yeyo"}, "edited": false, "score": 0, "creation_date": 1444313354, "post_id": 32996278, "comment_id": 53859358, "body": "Thanks for the example, but I still having different result, the output was D?????a????9 String to Encrypt: hello world Encrypted: dkqj0HTuE5mFjs1wdpV9IQ== String To Decrypt : dkqj0HTuE5mFjs1wdpV9IQ== Decrypted : hello world"}], "answers": [{"tags": [], "owner": {"reputation": 5606, "user_id": 1955871, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/XiFZh.jpg?s=128&g=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/1955871/rob"}, "is_accepted": false, "score": 1, "last_activity_date": 1444232596, "last_edit_date": 1495542871, "creation_date": 1444232596, "answer_id": 32996670, "question_id": 32996278, "link": "https://stackoverflow.com/questions/32996278/aes-string-encryption-decryption-in-c-and-java/32996670#32996670", "title": "AES string encryption/decryption in C and java", "body": "<p>I will speak to the Java side; I believe the same comments apply to the C version as well.</p>\n\n<p>You do NOT want to take your encrypted byte array and convert it to a String. In particular, here:</p>\n\n<pre><code>byte[] encValue = cipher.doFinal(valueToEnc.getBytes());\nreturn new String(encValue);\n</code></pre>\n\n<p>The problem is that <code>new String(byte[] b)</code> is going to interpret the byte array as a string that is encoded with the default encoding. Of course, the byte array is not an encoded string, so this isn't particularly useful.</p>\n\n<p>If you want to get a string that you can use to compare the encrypted byte arrays (visually), the typical approach is to hex-encode the byte array. See <a href=\"https://stackoverflow.com/questions/9655181/how-to-convert-a-byte-array-to-a-hex-string-in-java\">How to convert a byte array to a hex string in Java?</a> and <a href=\"https://stackoverflow.com/questions/6357031/how-do-you-convert-buffer-byte-array-to-hex-string-in-c\">How do you convert buffer (byte array) to hex string in C?</a> for more information. There are, of course, many libraries that support this functionality.</p>\n"}], "owner": {"reputation": 692, "user_id": 5121282, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/ade6459a1f0d5bee3fb61ecc40ae1bff?s=128&d=identicon&r=PG&f=1", "display_name": "Alan Gaytan", "link": "https://stackoverflow.com/users/5121282/alan-gaytan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3391, "favorite_count": 2, "answer_count": 1, "score": 3, "last_activity_date": 1444240082, "creation_date": 1444231500, "last_edit_date": 1444240082, "question_id": 32996278, "link": "https://stackoverflow.com/questions/32996278/aes-string-encryption-decryption-in-c-and-java", "title": "AES string encryption/decryption in C and java", "body": "<p>I'm trying to encrypt a string in C and java to look if the result is the same on both sides and later try to decrypt that result in each one of them, but when I run my code the result looks very different on each one</p>\n\n<p>This is my C code:</p>\n\n<pre><code>#include &lt;string.h&gt;\n#include &lt;openssl/aes.h&gt;\n\nchar key[] = \"thisisasecretkey\";\n\n int main(){\n unsigned char text[]=\"hello world\";\n unsigned char enc_out[80];\n unsigned char dec_out[80];\n\n AES_KEY enc_key, dec_key;\n\n AES_set_encrypt_key(key, 128, &amp;enc_key);\n AES_encrypt(text, enc_out, &amp;enc_key);\n\n printf(\"original:%s\\t\",text);\n printf(\"\\nencrypted:%s\\t\",enc_out);\n printf(\"\\n\");\n\n return 0;\n}\n</code></pre>\n\n<p>This is my java code:</p>\n\n<pre><code>package com.caja.utilidades;\n\nimport java.security.Key;\nimport javax.crypto.Cipher;\nimport javax.crypto.spec.SecretKeySpec;\n\npublic class MainClass {\n\nprivate static final String ALGORITHM = \"AES\";\nprivate static final String keyValue = \"thisisasecretkey\";\n\npublic static void main(String[] args) throws Exception {\n    System.out.println(encrypt(\"hello world\"));\n}\n\npublic static String encrypt(String valueToEnc) throws Exception {\n  Key key = generateKey();\n  Cipher cipher = Cipher.getInstance(ALGORITHM);\n  cipher.init(Cipher.ENCRYPT_MODE, key);\n  byte[] encValue = cipher.doFinal(valueToEnc.getBytes());\n  return new String(encValue);\n}\n\nprivate static Key generateKey() throws Exception {\n  Key key = new SecretKeySpec(keyValue.getBytes(), ALGORITHM);\n  return key;\n}\n\n\n}\n</code></pre>\n\n<p>In C I'm using openssl library, for C and java I'm using eclipse, thanks in advance.</p>\n\n<p>I made some changes in my code to compare the result in the two programs</p>\n\n<p>New code </p>\n\n<p>C code:</p>\n\n<pre><code>#include &lt;string.h&gt;\n#include &lt;openssl/aes.h&gt;\n\nchar key[] = \"thisisasecretkey\";\n\nint main(){\nunsigned char text[]=\"hello world\";\nunsigned char enc_out[80];\nunsigned char dec_out[80];\n\nAES_KEY enc_key, dec_key;\n\nAES_set_encrypt_key(key, 128, &amp;enc_key);\nAES_encrypt(text, enc_out, &amp;enc_key);\n\nint i;\n\nprintf(\"original:\\t\");\nfor(i=0;*(text+i)!=0x00;i++)\n    printf(\"%02X \",*(text+i));\nprintf(\"\\nencrypted:\\t\");\nfor(i=0;*(enc_out+i)!=0x00;i++)\n    printf(\"%02X \",*(enc_out+i));\nprintf(\"\\n\");\n\nprintf(\"original:%s\\t\",text);\nprintf(\"\\nencrypted:%s\\t\",enc_out);\nprintf(\"\\ndecrypted:%s\\t\",dec_out);\nprintf(\"\\n\");\n\nreturn 0;\n}\n</code></pre>\n\n<p>java code:</p>\n\n<pre><code>import java.security.Key;\nimport java.security.MessageDigest;\nimport java.util.Arrays;\nimport javax.crypto.Cipher;\nimport javax.crypto.spec.SecretKeySpec;\n\npublic class MainClass {\n\nprivate static final String ALGORITHM = \"AES\";\nprivate static final String keyValue = \"thisisasecretkey\";\nfinal protected static char[] hexArray = \"0123456789ABCDEF\".toCharArray();\n\npublic static void main(String[] args) throws Exception {\n    System.out.println(encrypt(\"hello world\"));\n}\n\npublic static String encrypt(String valueToEnc) throws Exception {\n  Key key = generateKey();\n  Cipher cipher = Cipher.getInstance(ALGORITHM);\n  cipher.init(Cipher.ENCRYPT_MODE, key);\n  byte[] encValue = cipher.doFinal(valueToEnc.getBytes());\n  System.out.println(bytesToHex(encValue));\n  return new String(encValue);\n}\n\nprivate static Key generateKey() throws Exception {\n  byte[] key2 = keyValue.getBytes(\"UTF-8\");\n  MessageDigest sha = MessageDigest.getInstance(\"SHA-1\");\n  key2 = sha.digest(key2);\n  key2 = Arrays.copyOf(key2, 16);\n\n  Key key = new SecretKeySpec(key2, ALGORITHM);\n  return key;\n}\n\npublic static String bytesToHex(byte[] bytes) {\n    char[] hexChars = new char[bytes.length * 2];\n    for ( int j = 0; j &lt; bytes.length; j++ ) {\n        int v = bytes[j] &amp; 0xFF;\n        hexChars[j * 2] = hexArray[v &gt;&gt;&gt; 4];\n        hexChars[j * 2 + 1] = hexArray[v &amp; 0x0F];\n    }\n    return new String(hexChars);\n }\n\n}\n</code></pre>\n\n<p>C result:</p>\n\n<pre><code>original:   68 65 6C 6C 6F 20 77 6F 72 6C 64 \nencrypted:  17 EF AC E9 35 B1 81 67 EA 7D BB 99 E2 4F D1 E8 70 35 62 BD \noriginal:hello world    \nencrypted:\u00ef\u00ac\u00e95\u00b1?g\u00ea}\u00bb\u2122\u00e2O\u00d1\u00e8p5b\u00bd   \ndecrypted:hello world   \n</code></pre>\n\n<p>Java result:</p>\n\n<pre><code>encrypted: 764AA3D074EE1399858ECD7076957D21\nencrypted: vJ\u00a3\u00d0t\u00ee\u2122\u2026\u017d\u00cdpv\u2022}!\n</code></pre>\n"}, {"tags": ["c", "recursion", "memory-management", "heap"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 2, "creation_date": 1444231419, "post_id": 32995943, "comment_id": 53817174, "body": "C does not define any such mechanism.  In fact, it does not define &quot;stack&quot; or &quot;heap&quot; at all, under those or any other names.  They are standard names for aspects of most <i>implementations</i>, but they are outside the scope of C.  On one hand, that means you&#39;ll need to specify a particular implementation to get a useful answer.  On the other hand, it also means that C itself does not forbid what you describe.  On the third hand, I&#39;m not aware of any implementation that provides it."}, {"owner": {"reputation": 334, "user_id": 2467476, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/419c204cd92e3e7ad2d7d58033b956a5?s=128&d=identicon&r=PG", "display_name": "Plopperzz", "link": "https://stackoverflow.com/users/2467476/plopperzz"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1444231800, "post_id": 32995943, "comment_id": 53817504, "body": "@JohnBollinger Sorry, I don&#39;t quite get what you mean when saying I&#39;ll need to specify a particular implementation. Do you mean how the language itself deals with the memory? I&#39;ve only taken a few introductory courses so far and haven&#39;t gotten into this side of things other than the basics of how the C compiler (and i guess most compilers) manage the memory."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1444232406, "post_id": 32995943, "comment_id": 53817961, "body": "&quot;Specifying a particular implementation&quot; means narrowing the scope of the question to something like GCC 5 / glibc on Linux, or MS Visual C++ 2013 on Windows 10."}, {"owner": {"reputation": 334, "user_id": 2467476, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/419c204cd92e3e7ad2d7d58033b956a5?s=128&d=identicon&r=PG", "display_name": "Plopperzz", "link": "https://stackoverflow.com/users/2467476/plopperzz"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1444232799, "post_id": 32995943, "comment_id": 53818256, "body": "@JohnBollinger Done, thanks I didn&#39;t think of that."}], "answers": [{"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1444233539, "post_id": 32996786, "comment_id": 53818794, "body": "I don&#39;t think continuations really address the question posed, as they do not alter what the system uses for a stack for subsequent calls, neither in the direct code nor in the continuation.  In the event that a continuation is desired, however, it&#39;s important to note that <code>setjmp()</code> / <code>longjmp()</code> support them only in a limited way, for once control leaves the function that called <code>setjmp()</code>, the behavior of a corresponding longjmp is no longer defined."}, {"owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1444234486, "post_id": 32996786, "comment_id": 53819434, "body": "It\u2019s an alternative means of control flow from function calls and returns. That said, your comment about <code>longjmp()</code> is not correct: the behavior is undefined if the original function <i>has exited</i>, not as soon as control leaves it. It is legal to <code>longjmp()</code> from a function called recursively by the one that also called <code>setjmp()</code>. In fact, that was the use case for which <code>goto</code> was not enough."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1444235095, "post_id": 32996786, "comment_id": 53819826, "body": "By &quot;control leaves&quot; I indeed meant that the function returns or exits by calling <code>longjmp()</code>, as opposed to calling (other) functions.  Anyway, the OP&#39;s question is specifically about using a different region of memory for the call stack.  Inasmuch as continuations are an <i>alternative</i> to call / return, for that very reason they do not address the question."}, {"owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1444240281, "post_id": 32996786, "comment_id": 53822882, "body": "@JohnBollinger I disagree.  The question was, \u2018Is it possible to allocate memory from the heap and use that as a temporary &quot;stack&quot; in which to place function calls for the recursive function \u2026?\u2019  Trampolines, which I discussed in my second paragraph, do exactly this.  Continuation-passing is closely-related and equivalent, especially when used to implement tail-recursion. It\u2019s a common way to do what the OP wants, so I thought it would be helpful to point in that direction."}], "tags": [], "owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "is_accepted": true, "score": 3, "last_activity_date": 1444234848, "last_edit_date": 1444234848, "creation_date": 1444232893, "answer_id": 32996786, "question_id": 32995943, "link": "https://stackoverflow.com/questions/32995943/recursion-with-memory-allocation/32996786#32996786", "title": "Recursion With Memory Allocation", "body": "<p>Sure.  This is called continuation-passing style.  The standard library supports it with <code>setjmp()</code> and <code>longjmp()</code>, and stores the information needed to restore control to an earlier point in a structure called <code>jmp_buf</code>.  (There are several restrictions on where you can restore from.)  You would store them in a stack, which is just a LIFO queue.</p>\n\n<p>A more general approach is to run the program as a state machine and store the information needed to backtrack the program state, called a continuation, in a data structure called a trampoline.  A common reason to want to do this is to get the equivalent of tail-recursion in an implementation that doesn\u2019t optimize it and might chew up lots of stack space.  One real-world application where someone I know is currently writing a trampoline is a GLL parser where the grammar is represented as a directed graph, the result of the parse is a shared packed parse forest, and the parser often needs to backtrack to try a different rule.</p>\n\n<p>Continuation-passing and trampolines seem to be regarded as fancy style because they come from the world of functional programming, while <code>longjmp()</code> is regarded as an ugly low-level hack and even the Linux man page says not to use it.</p>\n"}, {"tags": [], "owner": {"reputation": 4445, "user_id": 560903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d66cec4f7bd065097137c2001c96b866?s=128&d=identicon&r=PG", "display_name": "keithmo", "link": "https://stackoverflow.com/users/560903/keithmo"}, "is_accepted": false, "score": 1, "last_activity_date": 1444252619, "creation_date": 1444252619, "answer_id": 33002567, "question_id": 32995943, "link": "https://stackoverflow.com/questions/32995943/recursion-with-memory-allocation/33002567#33002567", "title": "Recursion With Memory Allocation", "body": "<p>You can simulate this by implementing your own heap-based stack as an array of structures, with each structure representing a stack frame that holds the equivalent of parameters and local variables. Instead of a function calling itself recursively, the function loops and each \"call\" explicitly pushes a new frame onto the stack.</p>\n\n<p>I did exactly this years ago while attempting to solve a simple board game. The program was originally recursive, and it took forever to run. I changed it to the above structure, and this made it simple to make the app interruptible/restartable. When interrupted the app dumped its \"stack\" to a state file. When restarted, the app loaded the state file and continued where it left off.</p>\n\n<p>This does required some care if the stack frame structure contains embedded pointers, but it's not insurmountable. </p>\n"}], "owner": {"reputation": 334, "user_id": 2467476, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/419c204cd92e3e7ad2d7d58033b956a5?s=128&d=identicon&r=PG", "display_name": "Plopperzz", "link": "https://stackoverflow.com/users/2467476/plopperzz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 601, "favorite_count": 1, "accepted_answer_id": 32996786, "answer_count": 2, "score": 6, "last_activity_date": 1444252619, "creation_date": 1444230586, "last_edit_date": 1444232762, "question_id": 32995943, "link": "https://stackoverflow.com/questions/32995943/recursion-with-memory-allocation", "title": "Recursion With Memory Allocation", "body": "<p>I was watching a video about CUDA and the Barnes-Hut algorithm where it was stated that it is necessary to place a depth limit on the tree for the GPU, and then the idea popped into my head about possibly doing recursion in the heap.</p>\n\n<p>Basically, I am wondering just that: Is it possible to allocate memory from the heap and use that as a temporary \"stack\" in which to place function calls for the recursive function in question to somewhat delay a stack overflow?</p>\n\n<p>If so, how could it be implemented, would we allocate space for a pointer to the function? I assume it would involve storing function address in the heap however I'm not too sure.</p>\n\n<p>[edit] I just wanted to add that this is purely a theoretical question, and i would imagine that doing this would cause the program to slow down once using the heap.</p>\n\n<p>[edit] As per request, the compiler I am using is GCC 4.8.4 on Ubuntu 14.04 (64-bit)</p>\n"}, {"tags": ["c", "linux", "linker", "simulator", "ns-3"], "answers": [{"comments": [{"owner": {"reputation": 111, "user_id": 3495694, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1d060c4a1f8b2e71ac144212a58739cf?s=128&d=identicon&r=PG&f=1", "display_name": "Toni", "link": "https://stackoverflow.com/users/3495694/toni"}, "edited": false, "score": 0, "creation_date": 1444679100, "post_id": 33069610, "comment_id": 53994146, "body": "I do want to use OpenFlow. Edited question to clarify this. The configure step shows OpenFlow as &#39;enabled&#39;."}, {"owner": {"reputation": 516, "user_id": 3504664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eca9f6bebb50534ae5d33dbb13bc5ace?s=128&d=identicon&r=PG&f=1", "display_name": "Konstantinos", "link": "https://stackoverflow.com/users/3504664/konstantinos"}, "reply_to_user": {"reputation": 111, "user_id": 3495694, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1d060c4a1f8b2e71ac144212a58739cf?s=128&d=identicon&r=PG&f=1", "display_name": "Toni", "link": "https://stackoverflow.com/users/3495694/toni"}, "edited": false, "score": 0, "creation_date": 1444683931, "post_id": 33069610, "comment_id": 53996376, "body": "And I assume that in &quot;--with-openflow=path/to/openflow&quot; you actually use the path that you have installed openflow, e.g. &quot;--with-openflow=/home/toni/openflow&quot; (where you have installed it."}, {"owner": {"reputation": 111, "user_id": 3495694, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1d060c4a1f8b2e71ac144212a58739cf?s=128&d=identicon&r=PG&f=1", "display_name": "Toni", "link": "https://stackoverflow.com/users/3495694/toni"}, "edited": false, "score": 0, "creation_date": 1444684899, "post_id": 33069610, "comment_id": 53996788, "body": "Yes :-) I use the absolute path."}, {"owner": {"reputation": 111, "user_id": 3495694, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1d060c4a1f8b2e71ac144212a58739cf?s=128&d=identicon&r=PG&f=1", "display_name": "Toni", "link": "https://stackoverflow.com/users/3495694/toni"}, "edited": false, "score": 0, "creation_date": 1444685268, "post_id": 33069610, "comment_id": 53996966, "body": "BTW, the file it is searching for, openflow-interface.h, is part of the ns-3 distribution (my distribution has it in ns-3.24.1/src/openflow/model), not the OFSID library."}], "tags": [], "owner": {"reputation": 516, "user_id": 3504664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eca9f6bebb50534ae5d33dbb13bc5ace?s=128&d=identicon&r=PG&f=1", "display_name": "Konstantinos", "link": "https://stackoverflow.com/users/3504664/konstantinos"}, "is_accepted": false, "score": 1, "last_activity_date": 1444594217, "last_edit_date": 1592644375, "creation_date": 1444594217, "answer_id": 33069610, "question_id": 32995782, "link": "https://stackoverflow.com/questions/32995782/error-building-linking-ns3-network-simulator-with-openflow/33069610#33069610", "title": "Error building/linking ns3 network simulator with OpenFlow", "body": "<p>First and foremost, there is no need to install OpenFlow/Python unless you want to use OpenFlow and/or Python for your development. It is explained in the tutorial:</p>\n<blockquote>\n<p>Regarding the portion about modules not built:</p>\n<p>Modules not built (see ns-3 tutorial for explanation):\nbrite          click                     openflow visualizer</p>\n<p>This just means that\nsome ns-3 modules that have dependencies on outside libraries may not\nhave been built, or that the configuration specifically asked not to\nbuild them. It does not mean that the simulator did not build\nsuccessfully or that it will provide wrong results for the modules\nlisted as being built.</p>\n</blockquote>\n<p>After the 'configure' do you see that OpenFlow is enabled?</p>\n<blockquote>\n<p>Under ---- Summary of optional NS-3 features: you should see:</p>\n<p>&quot;NS-3 OpenFlow Integration     : <strong>enabled</strong>&quot;</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 51, "user_id": 3311872, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XDkHG.jpg?s=128&g=1", "display_name": "Tom Henderson", "link": "https://stackoverflow.com/users/3311872/tom-henderson"}, "is_accepted": false, "score": 0, "last_activity_date": 1457828003, "creation_date": 1457828003, "answer_id": 35964971, "question_id": 32995782, "link": "https://stackoverflow.com/questions/32995782/error-building-linking-ns3-network-simulator-with-openflow/35964971#35964971", "title": "Error building/linking ns3 network simulator with OpenFlow", "body": "<p>Recent versions of gcc require the following two patches to fix the linking problem reported above:\n1) <a href=\"http://code.nsnam.org/openflow/rev/4db95a8ea718\" rel=\"nofollow\">http://code.nsnam.org/openflow/rev/4db95a8ea718</a>\n2) <a href=\"http://code.nsnam.org/ns-3-dev/rev/270a1c2fb158\" rel=\"nofollow\">http://code.nsnam.org/ns-3-dev/rev/270a1c2fb158</a></p>\n\n<p>These patches will be included in the ns-3.25 release.</p>\n"}, {"tags": [], "owner": {"reputation": 471, "user_id": 6364004, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GQzBp1mS5Hk/AAAAAAAAAAI/AAAAAAAAAHE/NwZAmNu3Qh0/photo.jpg?sz=128", "display_name": "NING Li", "link": "https://stackoverflow.com/users/6364004/ning-li"}, "is_accepted": false, "score": 0, "last_activity_date": 1557986374, "creation_date": 1557986374, "answer_id": 56161697, "question_id": 32995782, "link": "https://stackoverflow.com/questions/32995782/error-building-linking-ns3-network-simulator-with-openflow/56161697#56161697", "title": "Error building/linking ns3 network simulator with OpenFlow", "body": "<p>Check your pt_act.c file in switch/ folder of the downloaded openflow distribution. If update_checksums is not defined as static function, follow @Tom Henderson's suggestion 1), which asks you to add \"static\" before \"void inline\".  </p>\n\n<pre><code>static void inline\n</code></pre>\n\n<p>Then 1) rebuild openflow. 2) go to the position of your ns distribution, remove libns3.24.1-openflow-debug.so from build/lib . 3) configure waf and build again.  </p>\n"}], "owner": {"reputation": 111, "user_id": 3495694, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1d060c4a1f8b2e71ac144212a58739cf?s=128&d=identicon&r=PG&f=1", "display_name": "Toni", "link": "https://stackoverflow.com/users/3495694/toni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1467, "favorite_count": 1, "answer_count": 3, "score": 0, "last_activity_date": 1557986374, "creation_date": 1444230167, "last_edit_date": 1444679051, "question_id": 32995782, "link": "https://stackoverflow.com/questions/32995782/error-building-linking-ns3-network-simulator-with-openflow", "title": "Error building/linking ns3 network simulator with OpenFlow", "body": "<p>I'm trying to build ns-3.24.1 on Fedora 22 inside a VirtualBox VM. I am running:</p>\n\n<p>./waf configure --enable-examples --enable-tests --with-openflow=/path/to/openflow --with-pybindgen=/path/to/pybindgen\n./waf build</p>\n\n<p>I want to use OpenFlow, so I downloaded and configured/built the OFSID according to <a href=\"https://www.nsnam.org/docs/release/3.24/models/html/openflow-switch.html#building-ofsid\" rel=\"nofollow\">these instructions</a> before running the above configure command. The output from the configure step shows OpenFlow as 'enabled'.</p>\n\n<p>The ns-3.24.1 build proceeds normally until it gets to the following step and spits out the subsequent error:</p>\n\n<pre><code>[2291/2493] Linking build/src/openflow/examples/ns3.24.1-openflow-switch-debug\n./libns3.24.1-openflow-debug.so: undefined reference to `update_checksums'\ncollect2: error: ld returned 1 exit status\n...\n</code></pre>\n\n<p>I.e., it appears to build everything correctly but then errors on the link step.</p>\n\n<p>Apparently <em>update_checksums</em> is in [...]/ns-3.24.1/src/openflow/model/openflow-interface.h; for some reason the link step doesn't know to look here for <em>openflow-interface.h</em>.</p>\n\n<p>What could be causing it and what can I try to fix it? FWIW I've re-downloaded both the ns-3 and OFSID sources several times to no avail.</p>\n"}, {"tags": ["c", "global-variables", "free", "allocation", "extern"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1444230380, "post_id": 32995675, "comment_id": 53816340, "body": "It&#39;s undefined behaviour. If it runs without error it just happens that you get away with <code>free(ptr)</code> but if you run the program on the next day it could crash even on the same computer. Remember: even a faulty program may appear to work."}, {"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 0, "creation_date": 1444230382, "post_id": 32995675, "comment_id": 53816342, "body": "Since you didn&#39;t allocate any memory (as far as we can tell), there is none to free. It worked today, it may not work tomorrow (or on the next invocation). Also, this is not all of your code as the &#39;unresolved extern&#39; error (re: <code>extern int g = 1;</code>) would have stopped compilation prior to creating an executable."}, {"owner": {"reputation": 186, "user_id": 5418937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f2Zh5.jpg?s=128&g=1", "display_name": "cryingshadow", "link": "https://stackoverflow.com/users/5418937/cryingshadow"}, "reply_to_user": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 0, "creation_date": 1444230712, "post_id": 32995675, "comment_id": 53816577, "body": "@KevinDTimm I could compile this program as is using Clang."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1444232069, "post_id": 32995675, "comment_id": 53817707, "body": "What is so important in here? just turn on your compiler settings if you don&#39;t know what are you doing. <b>program.c:7:5: error: attempt to free a non-heap object \u2018g\u2019 free(ptr);</b>  Just read about free() and look again your code. A good compiler should warn you about this.      ^**"}, {"owner": {"reputation": 186, "user_id": 5418937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f2Zh5.jpg?s=128&g=1", "display_name": "cryingshadow", "link": "https://stackoverflow.com/users/5418937/cryingshadow"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1444232316, "post_id": 32995675, "comment_id": 53817906, "body": "@Michi For me it is important to explain the reason for an error (or the possibility that no error occurs) as appropriate as possible. The fact that I could run the program at least once on one system without an error showing up made me wonder whether there is more to know about this situation than the fact that free should only be called on pointers returned by memory management functions."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1444232614, "post_id": 32995675, "comment_id": 53818113, "body": "Yes I understand that, but if a compiler ignores such thing you should change that compiler. GCC without any settings turned on still complains for things like this: <b>warning: \u2018g\u2019 initialized and declared \u2018extern\u2019  extern int g = 1;             ^</b>"}, {"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1444232935, "post_id": 32995675, "comment_id": 53818358, "body": "As stated by @Michi, if your compiler allows this you should get a new compiler"}, {"owner": {"reputation": 186, "user_id": 5418937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f2Zh5.jpg?s=128&g=1", "display_name": "cryingshadow", "link": "https://stackoverflow.com/users/5418937/cryingshadow"}, "reply_to_user": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 0, "creation_date": 1444233279, "post_id": 32995675, "comment_id": 53818602, "body": "@KevinDTimm You might be right. However, my question does not concern how I would write programs in C but what my analyzer should tell users that program this way. And since I have no control over the compilers used by other programmers, changing &quot;my&quot; compiler does not help here."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1444233312, "post_id": 32995675, "comment_id": 53818635, "body": "@cryingshadow Your problem is not only the compiler, but also this <b>int *ptr = &amp;g; + free(ptr);</b> . Why are you even trying to free() that pointer if there is no dynamic memory allocation ? So before you ask yourself why on Windows works and why on Linux not, well check your code Line-by-Line, read them and try to understand them. That&#39;s all."}, {"owner": {"reputation": 186, "user_id": 5418937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f2Zh5.jpg?s=128&g=1", "display_name": "cryingshadow", "link": "https://stackoverflow.com/users/5418937/cryingshadow"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1444233571, "post_id": 32995675, "comment_id": 53818820, "body": "@Michi The example is not a program that I would like to write myself but an example for an input program that my verifier could get. It does not make sense to fix that program since I could get wrong programs as input and should tell what exactly is wrong with that program."}, {"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 0, "creation_date": 1444233639, "post_id": 32995675, "comment_id": 53818858, "body": "So, my short answer is this: if your verifier encounters a <code>free</code>, it should look for a matching <code>xalloc</code>.  If one is not found, it should state that behavior at this point is undefined (per the standard)."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1444233744, "post_id": 32995675, "comment_id": 53818926, "body": "@cryingshadow read a good book and you will have a better understand about your problem. Anyway don&#39;t read just a book about <b>C</b>, read also about compilers and of course about Operating System too. You already started wrong just at the beginning of your question. <b>I would like to know the behavior of a C program calling free on a pointer to an extern variable.</b> If you know about free() then will be no question, isn&#39;t it ?"}, {"owner": {"reputation": 186, "user_id": 5418937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f2Zh5.jpg?s=128&g=1", "display_name": "cryingshadow", "link": "https://stackoverflow.com/users/5418937/cryingshadow"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1444234474, "post_id": 32995675, "comment_id": 53819428, "body": "@Michi I did read the definition of free before asking this question. I wondered (for example) whether a system is allowed to allocate extern variables using malloc or whether there would be other possibilities how calling free on a pointer to an extern variable could be ok. The background is that I want to give a description of the error which is as precise as possible. If I just say &quot;This is undefined behavior because the pointer has not been returned by a memory management function&quot; and there is a possibility that this explanation is wrong, my verifier might lose points."}, {"owner": {"reputation": 186, "user_id": 5418937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f2Zh5.jpg?s=128&g=1", "display_name": "cryingshadow", "link": "https://stackoverflow.com/users/5418937/cryingshadow"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1444234906, "post_id": 32995675, "comment_id": 53819701, "body": "@Michi I updated the question accordingly."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1444235215, "post_id": 32995675, "comment_id": 53819897, "body": "@cryingshadow, Well according to your update you just showed that your knowledge is less then I was though. Please read a book and then see if your Question is needed again. By the way, why did you accepted that Answer if there is an Update needed? Ask another question will be a better idea at this point. I&#39;m lost now :)."}, {"owner": {"reputation": 186, "user_id": 5418937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f2Zh5.jpg?s=128&g=1", "display_name": "cryingshadow", "link": "https://stackoverflow.com/users/5418937/cryingshadow"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1444235494, "post_id": 32995675, "comment_id": 53820073, "body": "@Michi I accepted an answer since it seems to answer my question even with the update. I updated the question to make the problem discussed more clear right from the beginning when others read this (and there might of course be the case that someone comes up with a situation where free can be used safely that way - then I can still change the accepted answer, right?)."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 1, "creation_date": 1444322812, "post_id": 32995675, "comment_id": 53865791, "body": "@cryingshadow I updated my answer in response to your updated question.  Please let me know if you still have concerns."}], "answers": [{"comments": [{"owner": {"reputation": 186, "user_id": 5418937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f2Zh5.jpg?s=128&g=1", "display_name": "cryingshadow", "link": "https://stackoverflow.com/users/5418937/cryingshadow"}, "edited": false, "score": 0, "creation_date": 1444230098, "post_id": 32995710, "comment_id": 53816122, "body": "That&#39;s what I thought. But that would not explain why the program runs without error on some system. I wonder whether a system is allowed to allocate extern variables using malloc (but even then I do not understand why the return value would not lead to an error)."}, {"owner": {"reputation": 5541, "user_id": 4367864, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/mIepQ.png?s=128&g=1", "display_name": "PC Luddite", "link": "https://stackoverflow.com/users/4367864/pc-luddite"}, "reply_to_user": {"reputation": 186, "user_id": 5418937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f2Zh5.jpg?s=128&g=1", "display_name": "cryingshadow", "link": "https://stackoverflow.com/users/5418937/cryingshadow"}, "edited": false, "score": 1, "creation_date": 1444230244, "post_id": 32995710, "comment_id": 53816228, "body": "@cryingshadow Because it&#39;s undefined behavior."}, {"owner": {"reputation": 9958, "user_id": 2188562, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DMWEc.png?s=128&g=1", "display_name": "Peter Varo", "link": "https://stackoverflow.com/users/2188562/peter-varo"}, "reply_to_user": {"reputation": 186, "user_id": 5418937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f2Zh5.jpg?s=128&g=1", "display_name": "cryingshadow", "link": "https://stackoverflow.com/users/5418937/cryingshadow"}, "edited": false, "score": 0, "creation_date": 1444230303, "post_id": 32995710, "comment_id": 53816280, "body": "@cryingshadow I updated my answer based on your comment"}, {"owner": {"reputation": 186, "user_id": 5418937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f2Zh5.jpg?s=128&g=1", "display_name": "cryingshadow", "link": "https://stackoverflow.com/users/5418937/cryingshadow"}, "reply_to_user": {"reputation": 5541, "user_id": 4367864, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/mIepQ.png?s=128&g=1", "display_name": "PC Luddite", "link": "https://stackoverflow.com/users/4367864/pc-luddite"}, "edited": false, "score": 0, "creation_date": 1444230481, "post_id": 32995710, "comment_id": 53816424, "body": "@PCLuddite I guess so. But do you have a reference for that? I could not find a passage in the C standard that would definitely declare such a situation as undefined behavior. It could well be the case that it is just not defined at all (and hence undefined) but I would like to confirm this on a stronger basis than &quot;I could not find it&quot; without reading all &gt; 700 pages of the standard. ;)"}, {"owner": {"reputation": 9958, "user_id": 2188562, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DMWEc.png?s=128&g=1", "display_name": "Peter Varo", "link": "https://stackoverflow.com/users/2188562/peter-varo"}, "reply_to_user": {"reputation": 186, "user_id": 5418937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f2Zh5.jpg?s=128&g=1", "display_name": "cryingshadow", "link": "https://stackoverflow.com/users/5418937/cryingshadow"}, "edited": false, "score": 2, "creation_date": 1444230636, "post_id": 32995710, "comment_id": 53816529, "body": "@cryingshadow I updated my answer which quotes the standard"}, {"owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "edited": false, "score": 1, "creation_date": 1444231428, "post_id": 32995710, "comment_id": 53817180, "body": "I\u2019d have upvoted this except for the pedantic reason that the list of valid ways to get a pointer you can <code>free()</code> is not complete."}, {"owner": {"reputation": 9958, "user_id": 2188562, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DMWEc.png?s=128&g=1", "display_name": "Peter Varo", "link": "https://stackoverflow.com/users/2188562/peter-varo"}, "reply_to_user": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "edited": false, "score": 0, "creation_date": 1444231626, "post_id": 32995710, "comment_id": 53817355, "body": "@Lorehead because the missing of the <code>aligned_alloc</code> function?"}, {"owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "edited": false, "score": 2, "creation_date": 1444233354, "post_id": 32995710, "comment_id": 53818662, "body": "@PeterVaro and <code>NULL</code>, although that\u2019s brought up in the quote. A given implementation often adds other ways, <i>e.g.</i> <code>posix_memalign()</code>, but those aren\u2019t in the C standard."}, {"owner": {"reputation": 9958, "user_id": 2188562, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DMWEc.png?s=128&g=1", "display_name": "Peter Varo", "link": "https://stackoverflow.com/users/2188562/peter-varo"}, "reply_to_user": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "edited": false, "score": 1, "creation_date": 1444233580, "post_id": 32995710, "comment_id": 53818825, "body": "@Lorehead that was one of the reasons I did not mentioned <code>aligned_alloc</code> in the first place, because IIRC that&#39;s only part of the later standards, and the OP did not specify any standards at all.."}, {"owner": {"reputation": 186, "user_id": 5418937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f2Zh5.jpg?s=128&g=1", "display_name": "cryingshadow", "link": "https://stackoverflow.com/users/5418937/cryingshadow"}, "edited": false, "score": 0, "creation_date": 1444234060, "post_id": 32995710, "comment_id": 53819156, "body": "@PeterVaro This is also a problem for me since I also do not know whether the competition means the latest standard or another specific version when it says &quot;the C standard&quot;. It might be that I&#39;m too worried but the answers here did raise my confidence in the way I would like to handle the situation in my verifier."}, {"owner": {"reputation": 9958, "user_id": 2188562, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DMWEc.png?s=128&g=1", "display_name": "Peter Varo", "link": "https://stackoverflow.com/users/2188562/peter-varo"}, "reply_to_user": {"reputation": 186, "user_id": 5418937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f2Zh5.jpg?s=128&g=1", "display_name": "cryingshadow", "link": "https://stackoverflow.com/users/5418937/cryingshadow"}, "edited": false, "score": 0, "creation_date": 1444234604, "post_id": 32995710, "comment_id": 53819503, "body": "@cryingshadow &quot;competition&quot;? almost 50 minutes ago I added a quote from the standard, which I specified as: <code>C11</code>. I think it is more than enough information. Not to mention, it has been almost an hour passed, and your questions has all been answered, but you did not accepted any of the answers. If you have further questions, I suggest you to accept an answer, and open a new one specifically asking what is not clear about the whole memory managment. Although I first recommend you to read the whole &quot;chapter&quot; from the standard which has the same title. (memory management)"}, {"owner": {"reputation": 9958, "user_id": 2188562, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DMWEc.png?s=128&g=1", "display_name": "Peter Varo", "link": "https://stackoverflow.com/users/2188562/peter-varo"}, "reply_to_user": {"reputation": 186, "user_id": 5418937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f2Zh5.jpg?s=128&g=1", "display_name": "cryingshadow", "link": "https://stackoverflow.com/users/5418937/cryingshadow"}, "edited": false, "score": 0, "creation_date": 1444234685, "post_id": 32995710, "comment_id": 53819555, "body": "@cryingshadow also, if you want to chat about C in general, you are more than welcome to do that in the <a href=\"http://chat.stackoverflow.com/rooms/54304/c\">Stackoverflow C Chat-room</a>"}, {"owner": {"reputation": 186, "user_id": 5418937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f2Zh5.jpg?s=128&g=1", "display_name": "cryingshadow", "link": "https://stackoverflow.com/users/5418937/cryingshadow"}, "edited": false, "score": 0, "creation_date": 1444235143, "post_id": 32995710, "comment_id": 53819853, "body": "@PeterVaro Sorry, I mentioned the competition in the comments to another answer by zwol. I updated the question to make my focus more clear."}], "tags": [], "owner": {"reputation": 9958, "user_id": 2188562, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DMWEc.png?s=128&g=1", "display_name": "Peter Varo", "link": "https://stackoverflow.com/users/2188562/peter-varo"}, "is_accepted": false, "score": 4, "last_activity_date": 1444231664, "last_edit_date": 1444231664, "creation_date": 1444229985, "answer_id": 32995710, "question_id": 32995675, "link": "https://stackoverflow.com/questions/32995675/calling-free-on-a-pointer-to-an-extern-variable-in-c/32995710#32995710", "title": "Calling free on a pointer to an extern variable in C", "body": "<p>You should only call <code>free</code> on a pointer which was previously allocated by <code>malloc</code> or <code>calloc</code> or <code>realloc</code> or <code>aligned_alloc</code>. Otherwise it doesn't matter if it is \"extern'd\" or not.</p>\n\n<hr>\n\n<p><strong>UPDATE #1</strong></p>\n\n<p>It does not always run without errors, also check what the output of <code>valgrind</code> is:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>==21569== Invalid free() / delete / delete[] / realloc()\n==21569==    at 0x4C29D2A: free (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==21569==    by 0x4004FA: main (main.c:7)\n==21569==  Address 0x6008e8 is 0 bytes inside data symbol \"g\"\n</code></pre>\n\n<hr>\n\n<p><strong>UPDATE #2</strong></p>\n\n<p><code>void free(void *ptr);</code></p>\n\n<blockquote>\n  <p>The <code>free</code> function causes the space pointed to by <code>ptr</code> to be deallocated, that is, made available for further allocation.  If <code>ptr</code> is a null pointer, no action occurs. Otherwise, if the argument does not match a pointer earlier returned by a memory management function, or if the space has been deallocated by a call to <code>free</code> or <code>realloc</code>, the behavior is undefined.</p>\n</blockquote>\n\n<p>C11 Standard -- 7.22.3.3</p>\n"}, {"comments": [{"owner": {"reputation": 186, "user_id": 5418937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f2Zh5.jpg?s=128&g=1", "display_name": "cryingshadow", "link": "https://stackoverflow.com/users/5418937/cryingshadow"}, "edited": false, "score": 0, "creation_date": 1444230939, "post_id": 32995948, "comment_id": 53816783, "body": "I definitely want to flag this as an error but in a verification competition I would like to participate in, one must also give a &quot;witness&quot; for detected errors. So my question aims at how to describe the error in this case as appropriate as possible."}, {"owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "edited": false, "score": 1, "creation_date": 1444231271, "post_id": 32995948, "comment_id": 53817034, "body": "This will give a lot of spurious errors, such as when an <code>extern</code> variable is allocated by an initialization function. You can\u2019t prove in the most general case that a variable is or isn&#39;t initialized without solving the Halting Problem. But surely being unable to prove that it is or isn&#39;t heap-allocated is a warning, and in the use case where code that isn&#39;t provably correct is wrong, that will be treated as an error?"}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 186, "user_id": 5418937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f2Zh5.jpg?s=128&g=1", "display_name": "cryingshadow", "link": "https://stackoverflow.com/users/5418937/cryingshadow"}, "edited": false, "score": 0, "creation_date": 1444232641, "post_id": 32995948, "comment_id": 53818127, "body": "@cryingshadow Could you be more specific about what it means to give a &quot;witness&quot; for detected errors? I don&#39;t know what the competition is looking for."}, {"owner": {"reputation": 186, "user_id": 5418937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f2Zh5.jpg?s=128&g=1", "display_name": "cryingshadow", "link": "https://stackoverflow.com/users/5418937/cryingshadow"}, "edited": false, "score": 0, "creation_date": 1444232985, "post_id": 32995948, "comment_id": 53818398, "body": "@zwol I have the same problem. ;) The competition is not very clear about this and just states that a human-readable witness for an error should be provided. Since I wanted to make sure that I don&#39;t lose points just because I did not notice that this situation could be ok if constraints x, y, and z are met, I wanted to make use of the community knowledge which is definitely bigger than mine. ;) The answers so far give me the impression that flagging this as error because the pointer cannot be proven to be returned by a memory management function is the way to go here."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 186, "user_id": 5418937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f2Zh5.jpg?s=128&g=1", "display_name": "cryingshadow", "link": "https://stackoverflow.com/users/5418937/cryingshadow"}, "edited": false, "score": 1, "creation_date": 1444233102, "post_id": 32995948, "comment_id": 53818477, "body": "@cryingshadow In that case I&#39;d recommend giving the information most useful to a programmer trying to fix the bug: a trace of the control-flow path that leads to <code>free</code> being called on a non-heap pointer.  (This would be trivial in your example, but in a real program this kind of bug crops up when the initialization and the <code>free</code> are separated from each other by dozens of conditionals...)"}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "edited": false, "score": 1, "creation_date": 1444233805, "post_id": 32995948, "comment_id": 53818968, "body": "@Lorehead Yes, tools like the OP is planning to build often have very high false positive rates; that&#39;s just the way it is with a memory-unsound language like C.  I have only limited experience with these things, but my impression is that the state of the art involves a first pass that&#39;s cheap and guaranteed to have no false <i>negatives</i>, at the expense of lots of false positives, and then a bunch of more careful and costly tests (flow-sensitive, value-sensitive, whole-program, ...) to prune down the false positives."}], "tags": [], "owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "is_accepted": true, "score": 5, "last_activity_date": 1444322552, "last_edit_date": 1444322552, "creation_date": 1444230609, "answer_id": 32995948, "question_id": 32995675, "link": "https://stackoverflow.com/questions/32995675/calling-free-on-a-pointer-to-an-extern-variable-in-c/32995948#32995948", "title": "Calling free on a pointer to an extern variable in C", "body": "<p>The C standard is unambigous about this.  Quoting document <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow\">N1570</a>, the closest approximation to C11 available online at no charge, section 7.22.3.3 para 2 (the specification of <code>free</code>):</p>\n\n<blockquote>\n  <p>The <code>free</code> function causes the space pointed to by <code>ptr</code>\n  to be deallocated, that is, made available for further allocation.  If\n  <code>ptr</code> is a null pointer, no action occurs.  Otherwise, if the argument does not match a pointer earlier returned by a memory management function, or if the space has been deallocated by a call to <code>free</code> or <code>realloc</code>,  the\n  behavior is undefined.</p>\n</blockquote>\n\n<p>\"Memory management functions\" are listed at the beginning of 7.22.3: <code>malloc</code>, <code>calloc</code>, <code>realloc</code>, and <code>aligned_alloc</code>.  (An implementation could add more such functions, e.g. <a href=\"http://linux.die.net/man/3/posix_memalign\" rel=\"nofollow\"><code>posix_memalign</code></a> -- read the notes at the bottom!)</p>\n\n<p>Now, \"the behavior is undefined\" licenses an implementation to do <em>anything</em> when the situation occurs.  Crashing is common, but MSVC's runtime library is perfectly entitled to detect that a pointer is outside the \"heap\" and do nothing.  Experiment with debugging modes: there's probably a mode where it will crash the program instead.</p>\n\n<p>As the author of a code-verifying tool, <em>you</em> should be maximally strict: if you can't <em>prove</em> that a pointer passed to <code>free</code> is either <code>NULL</code> or a value previously returned by a memory management function, flag that as an error.</p>\n\n<hr>\n\n<p>Addendum: the somewhat confusing \"or if the space has been deallocated...\" clause is intended to prohibit double deallocation:</p>\n\n<pre><code>char *x = malloc(42);\nfree(x); // ok\nfree(x); // undefined behavior\n</code></pre>\n\n<p>... but beware of memory reuse:</p>\n\n<pre><code>char *x = malloc(42);\nuintptr_t a = (uintptr_t)x;\nfree(x);\nx = malloc(42);\nuintptr_t b = (uintptr_t)x;\n\nobserve(a == b); // un*specified* behavior - must be either true or false,\n                 // but no guarantee which\nfree(x); // ok regardless of whether a == b\n</code></pre>\n\n<hr>\n\n<p>Double addendum:</p>\n\n<blockquote>\n  <p>Are there conditions under which the call to <code>free</code> here would be defined properly according to the C standard?</p>\n</blockquote>\n\n<p>No.  If there were such a condition, it would have to appear <em>in the text of the standard</em> as an exception to the rule I quoted at the beginning of this answer, and there aren't any such exceptions.</p>\n\n<p>However, there is a subtle variation to which the answer is 'yes':</p>\n\n<blockquote>\n  <p>Could there be an <em>implementation</em> of C under which the behavior of the program shown is always well-defined?</p>\n</blockquote>\n\n<p>For instance, an implementation in which <code>free</code> is documented to do nothing, regardless of its input, would qualify and is not even a crazy idea\u2014many programs can get away with never <em>calling</em> <code>free</code>, after all.  But the behavior of the program is still undefined <em>according to the C standard</em>; it is just that the C implementation has chosen to make this particular UB scenario well-defined itself.</p>\n\n<p>(From the language-lawyer perspective, <em>every implementation extension to the language</em> is a case of the implementation making an UB scenario well-defined.  Even nigh-ubiquitous things like <code>#include &lt;unistd.h&gt;</code>.)</p>\n"}, {"tags": [], "owner": {"reputation": 14193, "user_id": 183203, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cf9ec57f64280ffe34ddd221d5c5151f?s=128&d=identicon&r=PG", "display_name": "antlersoft", "link": "https://stackoverflow.com/users/183203/antlersoft"}, "is_accepted": false, "score": 2, "last_activity_date": 1444230743, "creation_date": 1444230743, "answer_id": 32995998, "question_id": 32995675, "link": "https://stackoverflow.com/questions/32995675/calling-free-on-a-pointer-to-an-extern-variable-in-c/32995998#32995998", "title": "Calling free on a pointer to an extern variable in C", "body": "<p>When you call free on a pointer that was not previously allocated by malloc, calloc or realloc, the behavior is undefined.  That means it can have different behavior in different tool chains, and also different behavior at different times in the same program.</p>\n\n<p>Whether it generates a crash with an error message depends on whether that specific platform's library implementation checks for the validity of the pointer.  Since checking for validity can have non-zero performance cost, not all programs will do it.  Also, even if the implementation does some validity checks, it might not detect all invalid pointers.</p>\n\n<p>One implementation may detect that a pointer to the static memory area can not be a valid heap pointer; others may treat it like a valid heap pointer and try to add the \"free\" memory back to the heap, corrupting the heap as well as values adjacent to your extern value in static memory in the process.  The program may run fine, for a time, with the corrupted heap and static memory.</p>\n\n<p>This is why there are alternate, instrumented heap implementations available for C that provide additional checking.</p>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 2, "last_activity_date": 1444230762, "creation_date": 1444230762, "answer_id": 32996003, "question_id": 32995675, "link": "https://stackoverflow.com/questions/32995675/calling-free-on-a-pointer-to-an-extern-variable-in-c/32996003#32996003", "title": "Calling free on a pointer to an extern variable in C", "body": "<p><a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow\">Chapter and verse</a></p>\n\n<blockquote>\n<b>7.22.3.3 The <code>free</code> function</b><br>\n...<br>\n2 The <code>free</code> function causes the space pointed to by <code>ptr</code> to be deallocated, that is, made\navailable for further allocation. If <code>ptr</code> is a null pointer, no action occurs. Otherwise, <strong>if\nthe argument does not match a pointer earlier returned by a memory management\nfunction</strong>, or if the space has been deallocated by a call to <code>free</code> or <code>realloc</code>, <strong>the\nbehavior is undefined.</strong>\n</blockquote>\n\n<p>Emphasis mine.</p>\n\n<p>Since the behavior is undefined, <em>any</em> action taken by the compiler or the run time environment is acceptable.  It may reject the code with a diagnostic, it may translate the code with a diagnostic, it may translate the code without a diagnostic, your code may crash at runtime, your code may appear to run without any issues, your code may invoke Rogue, etc.  </p>\n"}], "owner": {"reputation": 186, "user_id": 5418937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f2Zh5.jpg?s=128&g=1", "display_name": "cryingshadow", "link": "https://stackoverflow.com/users/5418937/cryingshadow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 781, "favorite_count": 0, "accepted_answer_id": 32995948, "answer_count": 4, "score": 2, "last_activity_date": 1444322552, "creation_date": 1444229898, "last_edit_date": 1444234884, "question_id": 32995675, "link": "https://stackoverflow.com/questions/32995675/calling-free-on-a-pointer-to-an-extern-variable-in-c", "title": "Calling free on a pointer to an extern variable in C", "body": "<p>I would like to know the behavior of a C program calling free on a pointer to an extern variable. The background is that I'm a developer of a verifier analyzing C code and I wonder what my verifier should do if it encounters such a situation (e.g., say why the program is undefined - if it is).</p>\n\n<p>To find out the behavior experimentally, I tried to run the following C program:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n\nextern int g = 1;\n\nint main() {\n    int *ptr = &amp;g;\n    free(ptr);\n    return g;\n}\n</code></pre>\n\n<p>On a Debian GNU/Linux 7 system, this program crashes with an error message indicating that the pointer passed to free is invalid. On a Windows 7 system, I could run this program without any error message. Would you know of an explanation for this observation?</p>\n\n<p><strong>UPDATE</strong>\nI did read the definition of <code>free</code>. My question aims at whether this definition actually rules out the possibility that such a program might reliably work on a standard-complying system (and not just by \"it can do anything if the behavior is undefined\"). So I would like to know if you could think of a configuration/system/whatever where this program does not expose undefined behavior. In other words: Are there conditions under which the call to <code>free</code> here would be defined properly according to the C standard?</p>\n"}, {"tags": ["c", "swift", "enums", "enumeration"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1444229734, "post_id": 32995508, "comment_id": 53815833, "body": "Pascal had enumerated types, but didn&#39;t use the keyword <code>enum</code>.  Does that count?  AFAIK, the keyword <code>enum</code> was first used by C, but the concept is older by quite a margin."}, {"owner": {"reputation": 17846, "user_id": 1664443, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/EGaoL.png?s=128&g=1", "display_name": "Dan Beaulieu", "link": "https://stackoverflow.com/users/1664443/dan-beaulieu"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1444229922, "post_id": 32995508, "comment_id": 53815971, "body": "If the intended purpose behind Pascals enum-like feature was to serve the same purpose as an enum I would say, yes? (I don&#39;t know)"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1444230060, "post_id": 32995508, "comment_id": 53816090, "body": "It was \u2014 see Wikipedia on <a href=\"https://en.wikipedia.org/wiki/Enumerated_type\" rel=\"nofollow noreferrer\">Enumerated type</a>.  I think it is the oldest of the languages listed there, where the LISP referred to is Common Lisp, which postdates Pascal even though original LISP handily pre-dates Pascal."}, {"owner": {"reputation": 109227, "user_id": 1709587, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/cP8pZ.jpg?s=128&g=1", "display_name": "Mark Amery", "link": "https://stackoverflow.com/users/1709587/mark-amery"}, "edited": false, "score": 3, "creation_date": 1444230446, "post_id": 32995508, "comment_id": 53816397, "body": "Since this is a history question of no <i>practical</i> use to programmers, it&#39;s probably off-topic here. It&#39;s being <a href=\"http://meta.stackoverflow.com/questions/307595/what-should-i-do-with-this-history-question#307595\">discussed on Meta</a> and will probably get closed when the crowd from Meta descends on it. It&#39;s a good, clear and answerable question unlike much of the dross that gets asked here, and I&#39;m certainly not going to spend one of <i>my</i> close votes on it, but it&#39;s outside the scope of what this particular SE site is supposed to be for (in my opinion)."}, {"owner": {"reputation": 17846, "user_id": 1664443, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/EGaoL.png?s=128&g=1", "display_name": "Dan Beaulieu", "link": "https://stackoverflow.com/users/1664443/dan-beaulieu"}, "reply_to_user": {"reputation": 109227, "user_id": 1709587, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/cP8pZ.jpg?s=128&g=1", "display_name": "Mark Amery", "link": "https://stackoverflow.com/users/1709587/mark-amery"}, "edited": false, "score": 0, "creation_date": 1444230543, "post_id": 32995508, "comment_id": 53816464, "body": "@MarkAmery Should I delete the question? If so is beta a better place to ask or is there yet a more preferred place?"}, {"owner": {"reputation": 109227, "user_id": 1709587, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/cP8pZ.jpg?s=128&g=1", "display_name": "Mark Amery", "link": "https://stackoverflow.com/users/1709587/mark-amery"}, "edited": false, "score": 1, "creation_date": 1444230624, "post_id": 32995508, "comment_id": 53816521, "body": "@DanBeaulieu I don&#39;t think there is any site on the SE network where this would be on topic, sadly. No need to delete (although you could do so if you wished) - the community will close it if they don&#39;t think it belongs."}, {"owner": {"reputation": 17846, "user_id": 1664443, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/EGaoL.png?s=128&g=1", "display_name": "Dan Beaulieu", "link": "https://stackoverflow.com/users/1664443/dan-beaulieu"}, "reply_to_user": {"reputation": 109227, "user_id": 1709587, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/cP8pZ.jpg?s=128&g=1", "display_name": "Mark Amery", "link": "https://stackoverflow.com/users/1709587/mark-amery"}, "edited": false, "score": 0, "creation_date": 1444230677, "post_id": 32995508, "comment_id": 53816558, "body": "@MarkAmery Fair enough, I suppose I have my answer thanks to Johnathan Leffler"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1444231028, "post_id": 32995508, "comment_id": 53816831, "body": "this is a &#39;some what&#39; opinion based question.   stackoverflow is for questions regarding &#39;it does not compile/link&#39; and &#39;it does not output the expected outputs&#39;.   So this question is off topic and should be closed"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1444232268, "post_id": 32995508, "comment_id": 53817867, "body": "This question is being discussed on meta <a href=\"http://meta.stackoverflow.com/questions/307595/what-should-i-do-with-this-history-question\">here</a>"}, {"owner": {"reputation": 17846, "user_id": 1664443, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/EGaoL.png?s=128&g=1", "display_name": "Dan Beaulieu", "link": "https://stackoverflow.com/users/1664443/dan-beaulieu"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1444232301, "post_id": 32995508, "comment_id": 53817891, "body": "@NathanOliver thank you"}], "answers": [{"tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": true, "score": 15, "last_activity_date": 1444414889, "last_edit_date": 1444414889, "creation_date": 1444230283, "answer_id": 32995823, "question_id": 32995508, "link": "https://stackoverflow.com/questions/32995508/what-was-the-first-programming-language-with-enumerations/32995823#32995823", "title": "What was the first programming language with Enumerations?", "body": "<p>Pascal had enumerated types, but didn't use the keyword <code>enum</code>. AFAIK, the keyword <code>enum</code> was first used by C, but the concept is older by quite a margin.</p>\n\n<p>See Wikipedia on <a href=\"https://en.wikipedia.org/wiki/Enumerated_type\" rel=\"noreferrer\">Enumerated type</a> for an example such as:</p>\n\n<pre class=\"lang-pascal prettyprint-override\"><code>type\n  cardsuit = (clubs, diamonds, hearts, spades);\n  card = record\n           suit: cardsuit;\n           value: 1 .. 13;\n         end;\nvar\n  hand: array [ 1 .. 13 ] of card; \n  trump: cardsuit;\n</code></pre>\n\n<p>I think Pascal is the oldest of the languages listed on the Wikipedia page.  The LISP referred to is Common Lisp, which postdates Pascal even though original LISP handily pre-dates Pascal.</p>\n\n<p><a href=\"http://www.standardpascal.org/The_Programming_Language_Pascal_1970.pdf\" rel=\"noreferrer\">The Programming Language Pascal</a> from 1970 lists these types in section 6.1.1 Scalar Types, so for all practical purposes, these enumerated types have always been a part of Pascal.  See the <a href=\"http://www.standardpascal.org/documents.html\" rel=\"noreferrer\">documents</a> page at the <a href=\"http://www.standardpascal.org/\" rel=\"noreferrer\">Standard Pascal</a> web site.  The revised report is also available there (1972), and is probably the more widely read document.  You can also track <a href=\"https://en.wikipedia.org/wiki/Pascal_%28programming_language%29\" rel=\"noreferrer\">Pascal</a> at Wikipedia, of course.</p>\n\n<p><em>(There might be another earlier language with analogous features; I've not identified it, but I've not looked everywhere.  Algol-60 was not such a language, though; nor was Fortran or Cobol.  Algol-68 and PL/1 are possible contenders.)</em></p>\n"}, {"comments": [{"owner": {"reputation": 1183, "user_id": 77431, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/8d0532a13348650ef87211151bc180f3?s=128&d=identicon&r=PG", "display_name": "NevilleDNZ", "link": "https://stackoverflow.com/users/77431/nevillednz"}, "edited": false, "score": 0, "creation_date": 1459852473, "post_id": 35648537, "comment_id": 60462024, "body": "Algol68 has &quot;tagged-unions&quot; where there is a similar compile time generation of <b>typed</b> <code>enums</code>, for example the following &quot;case&quot; statement is interrogating the &quot;tag&quot; ... <code>CASE f IN       (APPLE):&quot;Apple&quot;,       (BANANA):&quot;Banana&quot;,       (CHERRY):&quot;Cherry&quot;     OUT       &quot;?&quot; # uninitalised #     ESAC;</code> ... This code example is from <a href=\"https://rosettacode.org/wiki/Enumerations#ALGOL_68\" rel=\"nofollow noreferrer\">RosettaCode</a>"}], "tags": [], "owner": {"reputation": 191, "user_id": 2511447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d5ba13ef2e54054e4a18b6deaede18f?s=128&d=identicon&r=PG", "display_name": "raok", "link": "https://stackoverflow.com/users/2511447/raok"}, "is_accepted": false, "score": 2, "last_activity_date": 1456480665, "creation_date": 1456480665, "answer_id": 35648537, "question_id": 32995508, "link": "https://stackoverflow.com/questions/32995508/what-was-the-first-programming-language-with-enumerations/35648537#35648537", "title": "What was the first programming language with Enumerations?", "body": "<p>Algol 68 did not have enums.  PL/I did not have enums.\nHistoric Lisp had no notion of compile-time types at all.\nAlgol W and Simula 67 did not have enums.  Oddly enough,\nCOBOL is not only a possible contender but the most likely\none.  Not that it had user-definable types, but look up\n\"88-level\".  The macro facilities of Burroughs Algol,\nSAIL, CORAL 66, and RTL/2 could be used to give names to numbers,\nwhich takes you almost as far as C's rather broken enums go.</p>\n"}], "owner": {"reputation": 17846, "user_id": 1664443, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/EGaoL.png?s=128&g=1", "display_name": "Dan Beaulieu", "link": "https://stackoverflow.com/users/1664443/dan-beaulieu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 567, "favorite_count": 0, "accepted_answer_id": 32995823, "answer_count": 2, "score": 11, "last_activity_date": 1456480665, "creation_date": 1444229431, "question_id": 32995508, "link": "https://stackoverflow.com/questions/32995508/what-was-the-first-programming-language-with-enumerations", "title": "What was the first programming language with Enumerations?", "body": "<p>I'm reading about Swift <code>enum</code>'s in the <a href=\"https://developer.apple.com/library/prerelease/ios/documentation/Swift/Conceptual/Swift_Programming_Language/Enumerations.html\">Swift Programming Language</a> guide and the text was comparing the differences between Swift's <code>enum</code> and C's <code>enum</code>. This made me curious as to where enumerations came from originally. I did search online before asking and even asked a few people and they <em>assumed</em> C. (I suppose I'm trying to confirm if enumerations came from C originally.)</p>\n\n<p><strong>Question</strong></p>\n\n<p>What was the first programming language to include enumerations?</p>\n"}, {"tags": ["c", "openmp"], "comments": [{"owner": {"reputation": 8381, "user_id": 5239503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MqgeX.jpg?s=128&g=1", "display_name": "Gilles", "link": "https://stackoverflow.com/users/5239503/gilles"}, "edited": false, "score": 2, "creation_date": 1444229745, "post_id": 32995448, "comment_id": 53815841, "body": "did you activate the OpenMP support in your compiler? This is I believe done using the <code>&#47;openmp</code> compiler option."}, {"owner": {"reputation": 4037, "user_id": 4056099, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xF37X.jpg?s=128&g=1", "display_name": "NoseKnowsAll", "link": "https://stackoverflow.com/users/4056099/noseknowsall"}, "edited": false, "score": 0, "creation_date": 1444231782, "post_id": 32995448, "comment_id": 53817483, "body": "Make sure you&#39;ve followed <a href=\"https://msdn.microsoft.com/en-us/library/tt15eb9t.aspx\" rel=\"nofollow noreferrer\">what you need to do here</a> to turn on OpenMP support."}, {"owner": {"reputation": 65, "user_id": 5418981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/548b84ba26cf02b6e9bc0db39b0bdce9?s=128&d=identicon&r=PG&f=1", "display_name": "jack", "link": "https://stackoverflow.com/users/5418981/jack"}, "edited": false, "score": 0, "creation_date": 1444232033, "post_id": 32995448, "comment_id": 53817683, "body": "It worked!! Thanks a lot Gilles."}], "owner": {"reputation": 65, "user_id": 5418981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/548b84ba26cf02b6e9bc0db39b0bdce9?s=128&d=identicon&r=PG&f=1", "display_name": "jack", "link": "https://stackoverflow.com/users/5418981/jack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "closed_date": 1444238388, "answer_count": 0, "score": 0, "last_activity_date": 1444229313, "creation_date": 1444229313, "question_id": 32995448, "link": "https://stackoverflow.com/questions/32995448/cant-retrieve-more-than-one-thread-in-openmp", "closed_reason": "Duplicate", "title": "Can&#39;t retrieve more than one thread in OpenMP", "body": "<p>I wrote a small program for testing the OpenMP capabilities:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;omp.h&gt;\n\n    void main()\n    {\n        int NUMBER_OF_THREADS = 4;\n\n        omp_set_dynamic(0);\n        omp_set_num_threads(NUMBER_OF_THREADS);\n        #pragma omp parallel\n        {\n            int id = omp_get_thread_num();\n            printf(\"hello %d\\n\", id);\n        }\n        getch();\n    }\n</code></pre>\n\n<p>This program should output four lines, instead, I only get:</p>\n\n<p>hello 0</p>\n\n<p>as if there is only one active thread. Does anyone see any problem with my code.\n(I work with visul studio 2015, windows 10)</p>\n\n<p>Thanks in advance,\nJack.</p>\n"}, {"tags": ["c", "windows", "console", "visual-studio-2015", "windows-console"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 2, "creation_date": 1444228979, "post_id": 32995089, "comment_id": 53815228, "body": "Don&#39;t call <code>fflush(stdin)</code> - it&#39;s UB in the general case."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1444230660, "post_id": 32995089, "comment_id": 53816546, "body": "when calling scanf(), 1) put a size modifier on the %s,  I.E. <code>scanf(&quot;%39s&quot;, name);</code>  so the user cannot overflow the input buffer.  Use 39 for the 40 byte name[] array because scanf() appends a NUL char on string input.  2) always check the returned value (not the parameter value) to assure the operation was successful."}, {"owner": {"reputation": 167, "user_id": 5302861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/906561e80163a796c366b72ad318c5f5?s=128&d=identicon&r=PG&f=1", "display_name": "Shabbir Khan", "link": "https://stackoverflow.com/users/5302861/shabbir-khan"}, "reply_to_user": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1444232180, "post_id": 32995089, "comment_id": 53817793, "body": "Thank you, @PaulR. I didn&#39;t know it was undefined behaviour. Our instructor taught us to use <code>fflush(stdin)</code> for preventing unwanted user input from messing our program. Could you suggest a more portable way to do the same job?"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1444233637, "post_id": 32995089, "comment_id": 53818857, "body": "@ShabbirKhan: there is no simple, convenient and portable method - you can use user3629249&#39;s method below in some cases though. There are also quite a few good relevant questions and answers here on StackOverflow if you want to read up on this subject."}, {"owner": {"reputation": 167, "user_id": 5302861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/906561e80163a796c366b72ad318c5f5?s=128&d=identicon&r=PG&f=1", "display_name": "Shabbir Khan", "link": "https://stackoverflow.com/users/5302861/shabbir-khan"}, "reply_to_user": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1444234417, "post_id": 32995089, "comment_id": 53819380, "body": "@PaulR: Alright, thanks! I will do that."}], "answers": [{"comments": [{"owner": {"reputation": 167, "user_id": 5302861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/906561e80163a796c366b72ad318c5f5?s=128&d=identicon&r=PG&f=1", "display_name": "Shabbir Khan", "link": "https://stackoverflow.com/users/5302861/shabbir-khan"}, "edited": false, "score": 0, "creation_date": 1444231495, "post_id": 32996015, "comment_id": 53817233, "body": "Thank you for the code. It totally works. I was actually testing with these inputs because the book I am learning from used two words."}, {"owner": {"reputation": 167, "user_id": 5302861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/906561e80163a796c366b72ad318c5f5?s=128&d=identicon&r=PG&f=1", "display_name": "Shabbir Khan", "link": "https://stackoverflow.com/users/5302861/shabbir-khan"}, "edited": false, "score": 0, "creation_date": 1444231623, "post_id": 32996015, "comment_id": 53817352, "body": "By the way, I have to close the window using the X button now. Is there any way to close the console window with a keyboard input in the you have given?"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1444233576, "post_id": 32996015, "comment_id": 53818824, "body": "You can hit Control-Z (Windows) or Control-D (proper operating systems) to signal EOF rather than closing the window manually."}], "tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": true, "score": 0, "last_activity_date": 1444230811, "creation_date": 1444230811, "answer_id": 32996015, "question_id": 32995089, "link": "https://stackoverflow.com/questions/32995089/how-to-make-the-console-output-window-stay-open-in-visual-studio-2015-stay-open/32996015#32996015", "title": "How to make the console output window stay open in Visual Studio 2015 stay open when extra input is given?", "body": "<p>to keep the window open:</p>\n\n<pre><code>while( getchar() != EOF );\ngetchar();\n</code></pre>\n"}], "owner": {"reputation": 167, "user_id": 5302861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/906561e80163a796c366b72ad318c5f5?s=128&d=identicon&r=PG&f=1", "display_name": "Shabbir Khan", "link": "https://stackoverflow.com/users/5302861/shabbir-khan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 676, "favorite_count": 0, "accepted_answer_id": 32996015, "answer_count": 1, "score": 0, "last_activity_date": 1444230811, "creation_date": 1444228443, "question_id": 32995089, "link": "https://stackoverflow.com/questions/32995089/how-to-make-the-console-output-window-stay-open-in-visual-studio-2015-stay-open", "title": "How to make the console output window stay open in Visual Studio 2015 stay open when extra input is given?", "body": "<p>I wrote the following program in Visual Studio 2015-</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define PRAISE \"You are an extraordinary being.\"\nint main(void)\n#pragma warning(disable : 4996)\n{\n    char name[40];\n\n    printf(\"What's your name? \");\n    scanf(\"%s\", name);\n    fflush(stdin);\n    printf(\"Hello, %s. %s\\n\", name, PRAISE);\n\n    getchar();\n    getchar();\n    getchar();\n    getchar();\n\n    return 0;\n}\n</code></pre>\n\n<p>The program runs fine in all cases. But the console window stays open when I provide \"Shabbir\", \"Shabbir K\", and \"Shabbir Kh\" as inputs. The console window won't stay open if I provide \"Shabbir Kha\" as input.</p>\n\n<p>As you can see, the console window stays open until the second word reaches three character length. It doesn't stay open if the second word is three or more characters long.</p>\n\n<p>The same program doesn't show any problems in Code Blocks 13.12.</p>\n"}, {"tags": ["c", "timezone", "strptime"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1444231279, "post_id": 32995019, "comment_id": 53817042, "body": "1 ) When a function does not perform as expected and that function has a return value code is not checking, the first thing to do is <i>check the return value</i>.  What is the return value of <code>strptime()</code>?  2) why should <code>strptime(&quot;Wed Dec 31 23:59:59 1969&quot;, &quot;%a %b %d %H:%M:%S %Z %Y&quot;, &amp;tm)</code> be expected to work as it have no timezone in the string?"}, {"owner": {"reputation": 13, "user_id": 5418820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/425e93787accf8405482588139d88d92?s=128&d=identicon&r=PG&f=1", "display_name": "srdjan", "link": "https://stackoverflow.com/users/5418820/srdjan"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1444292718, "post_id": 32995019, "comment_id": 53844541, "body": "1) return value is null and its cause strptime cant match all format string (probably because of %Z);  2) my mistake, it should be written: printf(&quot;%s\\n&quot;,to); //&quot;Wed Dec 31 23:59:59 CEST 1969&quot; up in the code so there is a time zone"}], "owner": {"reputation": 13, "user_id": 5418820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/425e93787accf8405482588139d88d92?s=128&d=identicon&r=PG&f=1", "display_name": "srdjan", "link": "https://stackoverflow.com/users/5418820/srdjan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 334, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1444228248, "creation_date": 1444228248, "question_id": 32995019, "link": "https://stackoverflow.com/questions/32995019/parsing-timezone-z-strptime-in-c", "title": "parsing timezone %Z strptime() in c", "body": "<p>Have problem with parsing timezone (%Z) in\nstrptime(to, \"%a %b %d %H:%M:%S %Z %Y\", &amp;tm);</p>\n\n<p>Got the tm.tm_year = 0 because probably %Z doesnt parse timezone well.</p>\n\n<p>The code is:</p>\n\n<pre><code>const uint8_t* from = u_name.version;\nuint8_t *to = (uint8_t*) malloc(30);\nstrncpy(to, from+(strlen(u_name.version)-29), 29);\n\nprintf(\"%s\\n\",to); //\"Wed Dec 31 23:59:59 1969\"\n\n\nstruct tm tm;\nstrptime(to, \"%a %b %d %H:%M:%S %Z %Y\", &amp;tm);\n</code></pre>\n\n<p>and tm.tm_year is 0;</p>\n\n<p>When I do:\n    strptime(to, \"%a %b %d %H:%M:%S CEST %Y\", &amp;tm); \n    everything is okey.</p>\n"}, {"tags": ["c", "struct"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1444228456, "post_id": 32994966, "comment_id": 53814806, "body": "structures don&#39;t have variables, but fields (or members)."}], "answers": [{"comments": [{"owner": {"reputation": 927, "user_id": 4457413, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/c63a5cd9cf6348a9d6cdf95a5394a5f2?s=128&d=identicon&r=PG&f=1", "display_name": "Goldengirl", "link": "https://stackoverflow.com/users/4457413/goldengirl"}, "edited": false, "score": 0, "creation_date": 1444228446, "post_id": 32995016, "comment_id": 53814796, "body": "That was a stupid mistake. Thank you for that help :)"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 3, "last_activity_date": 1444228247, "creation_date": 1444228247, "answer_id": 32995016, "question_id": 32994966, "link": "https://stackoverflow.com/questions/32994966/how-to-acess-a-variable-from-a-structure-located-in-a-header-file/32995016#32995016", "title": "How to acess a variable from a structure located in a header file?", "body": "<p>In your code, <code>IdType</code> itself is not a variable, it is a data type. You need to have a variable of that type to access a member of that structure variable.</p>\n"}, {"tags": [], "owner": {"reputation": 448, "user_id": 5069314, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4KsWL.jpg?s=128&g=1", "display_name": "AkaSh", "link": "https://stackoverflow.com/users/5069314/akash"}, "is_accepted": true, "score": 4, "last_activity_date": 1444404815, "last_edit_date": 1444404815, "creation_date": 1444228432, "answer_id": 32995082, "question_id": 32994966, "link": "https://stackoverflow.com/questions/32994966/how-to-acess-a-variable-from-a-structure-located-in-a-header-file/32995082#32995082", "title": "How to acess a variable from a structure located in a header file?", "body": "<p><code>IdType</code> is a data type.For accessing the variable you need to create object of type <code>IdType</code> as follows :</p>\n\n<pre><code>IdType id;\nid.New_id=2;\n</code></pre>\n"}], "owner": {"reputation": 927, "user_id": 4457413, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/c63a5cd9cf6348a9d6cdf95a5394a5f2?s=128&d=identicon&r=PG&f=1", "display_name": "Goldengirl", "link": "https://stackoverflow.com/users/4457413/goldengirl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 32995082, "answer_count": 2, "score": 0, "last_activity_date": 1444404815, "creation_date": 1444228117, "last_edit_date": 1444404800, "question_id": 32994966, "link": "https://stackoverflow.com/questions/32994966/how-to-acess-a-variable-from-a-structure-located-in-a-header-file", "title": "How to acess a variable from a structure located in a header file?", "body": "<p>I am trying to gain access to the variable <code>New_Id</code> located in a structure within the header file 'Header.h'. This is being done from a c file called Main.c</p>\n\n<pre><code> Header.h\n #ifndef HEADER.H\n #define HEADER.H\n\n #include &lt;stdio.h&gt;\n #include &lt;stdint.h&gt;\n\n typedef struct {\n    uint32 New_Id;\n  } IdType;\n</code></pre>\n\n<p>I am trying to acess this variable and assign it a value from my C file 'Main.c' in the following way</p>\n\n<pre><code> #include &lt;Header.h&gt;\n #include &lt;stdint.h&gt;\n #include &lt;stdio.h&gt;\n\n void Main (void) {\n\n     //code independent of the structure.-----\n\n     -----------------------------------//\n\n     //Now accessing the structure variable//\n\n     IdType.New_id =2;\n\n  }\n</code></pre>\n\n<p>However for some reason that I don't understand it keeps saying 'Field New_Id could not be resolved'. It does not say thisd for the structure itself. Could somebody please tell me what am I doing wrong here.</p>\n"}, {"tags": ["c", "string", "time", "format"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 4, "creation_date": 1444227676, "post_id": 32994774, "comment_id": 53814205, "body": "Welcome to Stack Overflow! Please see <a href=\"http://stackoverflow.com/q/5431941/2173917\">Why is \u201cwhile ( !feof (file) )\u201d always wrong?</a>"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1444228056, "post_id": 32994774, "comment_id": 53814502, "body": "Have a look if you implementation provides the <code>strptime()</code> function. (<a href=\"http://stackoverflow.com/a/11213640/694576\">stackoverflow.com/a/11213640/694576</a>)"}, {"owner": {"reputation": 8543, "user_id": 5008284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AvSMy.jpg?s=128&g=1", "display_name": "meuh", "link": "https://stackoverflow.com/users/5008284/meuh"}, "edited": false, "score": 4, "creation_date": 1444228090, "post_id": 32994774, "comment_id": 53814534, "body": "your fscanf should be a sscanf."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1444228701, "post_id": 32994774, "comment_id": 53815008, "body": "Suggest <code>if (3 == sscanf(currLine, &quot;%*3c %*d %d:%d:%d&quot;, &amp;hr, &amp;min, &amp;sec)) ...</code>"}], "answers": [{"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1444229006, "last_edit_date": 1444229006, "creation_date": 1444228514, "answer_id": 32995109, "question_id": 32994774, "link": "https://stackoverflow.com/questions/32994774/c89-extract-time-from-a-string/32995109#32995109", "title": "C89 - Extract time from a string", "body": "<p>regarding this posted code:</p>\n\n<pre><code>do\n{\n    currLine = fgets(buff, sizeof(buff), inFile);\n\n    if(strstr(currLine, \"fail\") != NULL)\n    {\n        /*convert the time into seconds since midnight and output it*/\n    }\n} while(!feof(inFile));\n</code></pre>\n\n<p>do not use 'feof()' as it is only 'true' after trying to read past the end of the file, so is rarely, if ever useful.  </p>\n\n<p>Do not want to be processing the log file line if the log file is empty,.</p>\n\n<p>instead use this:</p>\n\n<pre><code>while( currLine = fgets(buff, sizeof(buff), inFile) )\n{\n\n    if(strstr(currLine, \"fail\") != NULL)\n    {\n        /*convert the time into seconds since midnight and output it*/\n    }\n}\n</code></pre>\n\n<p>as that will not try to process an empty line, (the log file is empty or have tried to read past end of file)</p>\n\n<p>unless the pointer: <code>currLine</code> is used elsewhere, all references could be eliminated and in the call to <code>strstr()</code>, use: 'buff'</p>\n\n<p>to extract the time from the line, first need to step over the first two fields.  There are several possible ways to do that. </p>\n\n<p>You could use the comment given by 'chux' to extract the time fields</p>\n"}, {"tags": [], "owner": {"reputation": 51553, "user_id": 557306, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OAmpG.jpg?s=128&g=1", "display_name": "sidyll", "link": "https://stackoverflow.com/users/557306/sidyll"}, "is_accepted": true, "score": 0, "last_activity_date": 1444228881, "creation_date": 1444228881, "answer_id": 32995258, "question_id": 32994774, "link": "https://stackoverflow.com/questions/32994774/c89-extract-time-from-a-string/32995258#32995258", "title": "C89 - Extract time from a string", "body": "<p>Your example didn't  work for two reasons. First,  you're using <code>fscanf</code>\ninstead of <code>sscanf</code> (file and string) and second: you didn't jump to the\nnumbers. Your scanning starts from the beginning of the string which has\nno number, so it  won't match. An easy hack to make  this work, <em>if</em> the\nsize of the month and day part are <em>constant</em>, would be something like:</p>\n\n<pre><code>sscanf(currLine+7, \"%d:%d:%d\", &amp;hr, &amp;min, &amp;sec);\n</code></pre>\n\n<p>The  \"official\" and  safer way  to do  it is  using <code>strptime</code>,  if your\nimplementation makes it available.</p>\n\n<pre><code>#include &lt;time.h&gt;\n\nstruct tm time;\n\n/* ... */\n\nstrptime(currLine, \"%b %d %H:%M:%S\", &amp;time);\n</code></pre>\n\n<p>Now you have the <code>time</code> struct and can extract the components you need.</p>\n\n<pre><code>timePassed = time.tm_hour * 3600 + time.tm_min * 60 + time.tm_sec;\n</code></pre>\n\n<hr>\n\n<p><sup><em>Warning:  As   said  in   the  comments,   check  your   usage  of\n<code>while(!feof(inFile))</code>.</em></sup></p>\n"}], "owner": {"reputation": 11, "user_id": 5418808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/119646159766a823f2a1883bf12cfafb?s=128&d=identicon&r=PG&f=1", "display_name": "rjt197197", "link": "https://stackoverflow.com/users/5418808/rjt197197"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 32995258, "answer_count": 2, "score": 0, "last_activity_date": 1444229006, "creation_date": 1444227623, "question_id": 32994774, "link": "https://stackoverflow.com/questions/32994774/c89-extract-time-from-a-string", "title": "C89 - Extract time from a string", "body": "<p>I have a problem where I need to read lines from a log file, check if the line contains the word \"fail\" and if so output how many seconds passed from midnight to the time the error occured.</p>\n\n<p>An example line from a logfile looks like this:</p>\n\n<pre><code>Aug 20 10:20:57 kernel: ata3: SATA link down\n</code></pre>\n\n<p>I have the first two  parts of the problem workig correctly (reading lines from the logfile and checking if they contain the word \"fail\") but I'm a bit stumped on how to extract the time from the logfile and converting it into seconds passed since midnight.</p>\n\n<p>What I have so far looks like this (the relevant part of the code):</p>\n\n<pre><code>do\n{\n    currLine = fgets(buff, sizeof(buff), inFile);\n\n    if(strstr(currLine, \"fail\") != NULL)\n    {\n        /*convert the time into seconds since midnight and output it*/\n    }\n} while(!feof(inFile));\n</code></pre>\n\n<p>So far I have only been able to come up with one idea of how to implement it, but it doesn't work (this would be inside the if statement above, where I have placed the placeholder comment explaining what it needs to do):</p>\n\n<pre><code>int hr, min, sec, timePassed;           \nfscanf(currLine, \"%d:%d:%d\", &amp;hr, &amp;min, &amp;sec);\ntimePassed = hr * 3600 + min * 60 + sec;\n</code></pre>\n\n<p>Thanks very much in advance</p>\n"}, {"tags": ["c", "arrays", "sorting"], "comments": [{"owner": {"reputation": 28754, "user_id": 1153938, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/deBjQ.jpg?s=128&g=1", "display_name": "Vorsprung", "link": "https://stackoverflow.com/users/1153938/vorsprung"}, "edited": false, "score": 0, "creation_date": 1444228276, "post_id": 32994763, "comment_id": 53814671, "body": "It must be duplicated characters in strings 101 class time.  Just answered this one <a href=\"http://stackoverflow.com/questions/32994040/delete-all-duplicated-charcters-from-strings-c/32994915#32994915\" title=\"delete all duplicated charcters from strings c\">stackoverflow.com/questions/32994040/&hellip;</a>"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1444228653, "post_id": 32994763, "comment_id": 53814968, "body": "Better to change <code>for (j=0; j&lt;n; j++) {          if (dup[i] == dup[j] &amp;&amp; j!=i) {             copy = true;          }       }</code> to <code>for (j = i + 1; j &lt; n; j++) {          if (dup[i] == dup[j]) {             copy = true; break;          }       }</code>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1444231595, "post_id": 32994763, "comment_id": 53817329, "body": "If the input in <code>1 3 3 3 4 4</code> 1) Should <code>3</code> be printed 1 2 or 3 times? 2) must the order be maintained or would <code>4 3</code> be OK?"}, {"owner": {"reputation": 11, "user_id": 5301061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52ad49f2614819b1448cf289a49840e?s=128&d=identicon&r=PG&f=1", "display_name": "kenny", "link": "https://stackoverflow.com/users/5301061/kenny"}, "edited": false, "score": 0, "creation_date": 1444232381, "post_id": 32994763, "comment_id": 53817936, "body": "Hi, thanks for all the replies. If the input is 133344 example the output should print 3 first then 4. Both only prints once."}], "answers": [{"tags": [], "owner": {"reputation": 2000, "user_id": 4487286, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHZoO.jpg?s=128&g=1", "display_name": "milevyo", "link": "https://stackoverflow.com/users/4487286/milevyo"}, "is_accepted": false, "score": 0, "last_activity_date": 1444230782, "creation_date": 1444230782, "answer_id": 32996009, "question_id": 32994763, "link": "https://stackoverflow.com/questions/32994763/finding-duplicate-numbers-and-print-out-the-most-duplicated-first-and-the-rest/32996009#32996009", "title": "Finding duplicate numbers and print out the most duplicated first and the rest", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdbool.h&gt;\n\n#define size 50\n\nint intsort(int* val1,int *val2){\n    return (*val1&lt;*val2)?-1:(*val1&gt;*val2)?1:0;\n}\n\nint main(void)\n{       \n   int i, j, n, du, dup[size];\n   bool copy = false;\n\n   printf(\"number of elements: \");\n    scanf(\"%d\", &amp;n);\n    if(n&lt;2) n=2;\n    if(n&gt;50) n=50;\n\n\n    printf(\"enter elements:\\n\");\n\n   for (i=0; i&lt;n; i++) {\n      printf(\"\\t%d) \",i+1);\n      scanf(\"%d\", &amp;dup[i]);\n   }\n\n\n    j=0;i=0;\n   qsort(dup,n,sizeof(int),intsort);\n\n\n    printf(\"\\n=========\\n\");\n    for(i=0;i&lt;n;i++) printf(\" %d\",dup[i]);\n    printf(\"\\n=========\\n\");\n\n    i=0;\n    while(i&lt;(n-1)){\n\n        for(j=i+1;dup[i]==dup[j];j++);\n        copy=(i+1)&lt;j;\n        if(copy){\n\n            printf(\"there are %d copies of %d \\n\",(j-i),dup[i]);\n        }\n        i=j;\n    }\n    if(!copy){\n        printf(\"No duplicated items \\n\");\n    }\n    printf(\"Done\\n\");\n\n\n   return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2000, "user_id": 4487286, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHZoO.jpg?s=128&g=1", "display_name": "milevyo", "link": "https://stackoverflow.com/users/4487286/milevyo"}, "is_accepted": false, "score": 0, "last_activity_date": 1444234358, "creation_date": 1444234358, "answer_id": 32997341, "question_id": 32994763, "link": "https://stackoverflow.com/questions/32994763/finding-duplicate-numbers-and-print-out-the-most-duplicated-first-and-the-rest/32997341#32997341", "title": "Finding duplicate numbers and print out the most duplicated first and the rest", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdbool.h&gt;\n\n#define size 50\n\ntypedef struct{\n    int value,dup;\n}LIST_ENTRY;\n\n\n/*______________________________________________________________\n*/\nint CompareEntries(LIST_ENTRY* val1,LIST_ENTRY *val2){\n        return (val1-&gt;dup&gt;val2-&gt;dup)?-1:(val1-&gt;dup&lt;val2-&gt;dup)?1:0;\n}\n/*______________________________________________________________\n*/\nint AddEntry(LIST_ENTRY * Entries,int val){\n    for(int i=0;i&lt;size;i++){\n        if(Entries[i].value==val){\n            Entries[i].dup++;\n            return 1;\n        }\n    }\n\n    for(int i=0;i&lt;size;i++){\n        if(Entries[i].dup==0){\n            Entries[i].value=val;\n            Entries[i].dup++;\n            return 0;\n        }\n    }\n    return 0;\n}\n/*______________________________________________________________\n*/\nvoid ClearEntries(LIST_ENTRY * Entries){\n    for(int i=0;i&lt;size;i++){\n        Entries[i].value=0;\n        Entries[i].dup=0;\n    }\n}\n/*______________________________________________________________\n*/\nint main(void)\n{       \n    int i, d,n;\n    bool copy = false;\n    LIST_ENTRY Entries[size];\n\n    ClearEntries(Entries);\n\n\n   printf(\"number of elements: \");\n    scanf(\"%d\", &amp;n);\n    if(n&lt;2) n=2;\n    if(n&gt;50) n=50;\n\n\n    printf(\"enter elements:\\n\");\n\n   for (i=0; i&lt;n; i++) {\n      printf(\"\\t%d) \",i+1);\n      scanf(\"%d\", &amp;d);\n      copy|=AddEntry(Entries,d);\n   }\n\n\n\n   qsort(Entries,n,sizeof(LIST_ENTRY),CompareEntries);\n\n\n    printf(\"\\n=========\\n\");\n    for(i=0;i&lt;n;i++) {\n        if(Entries[i].dup){\n            printf(\"there are %d copies of %d\\n\",Entries[i].dup,Entries[i].value);\n        }\n    }\n    printf(\"\\n=========\\n\");\n\n\n    if(!copy){\n        printf(\"No duplicated items \\n\");\n    }\n    printf(\"Done\\n\");\n\n\n   return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5301061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52ad49f2614819b1448cf289a49840e?s=128&d=identicon&r=PG&f=1", "display_name": "kenny", "link": "https://stackoverflow.com/users/5301061/kenny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1444234358, "creation_date": 1444227589, "question_id": 32994763, "link": "https://stackoverflow.com/questions/32994763/finding-duplicate-numbers-and-print-out-the-most-duplicated-first-and-the-rest", "title": "Finding duplicate numbers and print out the most duplicated first and the rest", "body": "<p>so far I have managed to find the duplicate numbers but i want to read in the inputs and determine if the there is any duplicated element in the list. If all values are unique print out \"list has no duplicate values\", otherwise print out the values that are duplicated as they appear from left to right in the list (each separated by a newline character). </p>\n\n<p>I need to print out the most duplicated number in the list followed by the second most duplicate value. How do I do this? I know I have to edit the if statement but I am not sure how.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdbool.h&gt;\n\n#define size 50\n\nint main(void)\n{       \n   int i, j, n, du, dup[size];\n   bool copy = false;\n\n   scanf(\"%d\", &amp;n);\n\n   for (i=0; i&lt;n; i++) {\n      scanf(\"%d\", &amp;dup[i]);\n   }\n\n   for (i=0; i&lt;n; i++) {     \n      for (j=0; j&lt;n; j++) {\n         if (dup[i] == dup[j] &amp;&amp; j!=i) {\n            copy = true;\n         }\n      }\n   }\n\n   if (copy) {\n      printf(\"list has duplicate values\");\n   }\n   else {\n      printf(\"list has no duplicate values\");\n   }\n   printf(\"\\n\");\n\n   return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "timer", "arduino"], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 4346361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh5.googleusercontent.com/-nrsIjNaBcbg/AAAAAAAAAAI/AAAAAAAAO7Y/Z6du8X55pyw/photo.jpg?sz=128", "display_name": "sebastien", "link": "https://stackoverflow.com/users/4346361/sebastien"}, "edited": false, "score": 0, "creation_date": 1444230358, "post_id": 32995000, "comment_id": 53816325, "body": "It&#39;s ok ! Thank you Dave."}], "tags": [], "owner": {"reputation": 4426, "user_id": 450609, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6708bd9ccabfcb1cf6863fb32f32d1de?s=128&d=identicon&r=PG", "display_name": "dave", "link": "https://stackoverflow.com/users/450609/dave"}, "is_accepted": true, "score": 1, "last_activity_date": 1444228204, "creation_date": 1444228204, "answer_id": 32995000, "question_id": 32994710, "link": "https://stackoverflow.com/questions/32994710/arduino-timer-library-and-void-pointer/32995000#32995000", "title": "Arduino Timer Library and void pointer", "body": "<p>If you need any parameters to your function then they need to be passed in via the context pointer that's what it is there for.  So a simple example might be the following:</p>\n\n<pre><code>void doAfter(void *my_param) {\n     int x = *(int *)my_param;\n\n     ..... your code here ...\n\n}\n</code></pre>\n\n<p>And then to call it you would just do</p>\n\n<pre><code>const int input_param = 5;\nint afterEvent = t.after(10000, doAfter, (void *)&amp;input_param);\n</code></pre>\n\n<p>If you needed to pass more than one parameter then that can be done with a struct:</p>\n\n<pre><code>struct param_list {\n     int param1;\n     double param2;\n};\n\nvoid doAfter2(void *context)\n{\n      struct param_list *params = context;\n\n      .... code here can access params with params-&gt; ..\n\n}\n\nstruct param_list p = {1, 2.0};\nint afterEvent = t.after(10000, doAfter2, (void *)&amp;p);\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 4346361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh5.googleusercontent.com/-nrsIjNaBcbg/AAAAAAAAAAI/AAAAAAAAO7Y/Z6du8X55pyw/photo.jpg?sz=128", "display_name": "sebastien", "link": "https://stackoverflow.com/users/4346361/sebastien"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 781, "favorite_count": 0, "accepted_answer_id": 32995000, "answer_count": 1, "score": 0, "last_activity_date": 1444228204, "creation_date": 1444227461, "question_id": 32994710, "link": "https://stackoverflow.com/questions/32994710/arduino-timer-library-and-void-pointer", "title": "Arduino Timer Library and void pointer", "body": "<p>I use this timer Library : <a href=\"https://github.com/JChristensen/Timer/tree/v2.1\" rel=\"nofollow\">https://github.com/JChristensen/Timer/tree/v2.1</a></p>\n\n<p>code example : </p>\n\n<pre><code>int afterEvent = t.after(10000, doAfter, (void*)0);\n\nvoid doAfter(void *context)\n{\n    Serial.println(\"stop the led event\");\n    t.stop(MyledEvent);\n}\n</code></pre>\n\n<p>Documentation :</p>\n\n<blockquote>\n  <blockquote>\n    <p>The context is a void pointer, so it can be cast to any other data\n    type. Its use is optional, if you don't need it, just code (void*)0 as\n    in the above examples, but be sure that the callback function\n    definitions have it in their argument list</p>\n  </blockquote>\n  \n  <p>int8_t after(unsigned long duration, void (<em>callback)(void</em>), void*\n  context);</p>\n</blockquote>\n\n<p>I need to put a argument in \"afterEvent\" ( for futur use in \"doAfter\" ), I don't understand how to do this .Can you explain me how to do a argument list on  this \"doAfter\" and how to put the argument on \"t.after\" ?</p>\n\n<p>My test :</p>\n\n<pre><code>int afterEvent = t.after(10000, doAfter(5), (void*)0);\n\nvoid doAfter(int x, void *context)     { ..code... }\n</code></pre>\n\n<p>Error :</p>\n\n<blockquote>\n  <p>error: declaration of \u2018int type\u2019 shadows a parameter </p>\n  \n  <p>error: arguments to function \u2018void doAfter(int, void*)\u2019error: too few</p>\n</blockquote>\n\n<p>Thanks</p>\n"}, {"tags": ["c", "lua"], "comments": [{"owner": {"reputation": 25584, "user_id": 501459, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/29b9e5f5d700524e3a6eaef99de7d069?s=128&d=identicon&r=PG", "display_name": "Mud", "link": "https://stackoverflow.com/users/501459/mud"}, "edited": false, "score": 0, "creation_date": 1444248600, "post_id": 32994346, "comment_id": 53827988, "body": "What does <code>i++</code> have to do with anything else in your post? If you initialized <code>i</code> to 0, incremented, then printed it, why would you expect it to have any value other than <code>1</code>? How does that line correlate with your printing of booleans from a Lua script? o.O"}, {"owner": {"reputation": 101, "user_id": 4708226, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/92b19ddd8aa4f7cbe6a72d811235ad94?s=128&d=identicon&r=PG&f=1", "display_name": "carolzinha", "link": "https://stackoverflow.com/users/4708226/carolzinha"}, "reply_to_user": {"reputation": 25584, "user_id": 501459, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/29b9e5f5d700524e3a6eaef99de7d069?s=128&d=identicon&r=PG", "display_name": "Mud", "link": "https://stackoverflow.com/users/501459/mud"}, "edited": false, "score": 0, "creation_date": 1444253887, "post_id": 32994346, "comment_id": 53830613, "body": "I think I explained wrong, read it again I edited the post."}, {"owner": {"reputation": 25584, "user_id": 501459, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/29b9e5f5d700524e3a6eaef99de7d069?s=128&d=identicon&r=PG", "display_name": "Mud", "link": "https://stackoverflow.com/users/501459/mud"}, "edited": false, "score": 0, "creation_date": 1444261410, "post_id": 32994346, "comment_id": 53833269, "body": "Look at how many globals are in the file. Better yet, put them in an array an iterate that. Or iterate through the &quot;name1&quot; to &quot;nameN&quot; and count (you&#39;ll need to fix your naming structure). So on and so forth. You can&#39;t write a program by having stackoverflow to produce each line for you. Read the Lua API docs, or read Programming in Lua which covers idiomatic usage of the language and C API."}], "owner": {"reputation": 101, "user_id": 4708226, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/92b19ddd8aa4f7cbe6a72d811235ad94?s=128&d=identicon&r=PG&f=1", "display_name": "carolzinha", "link": "https://stackoverflow.com/users/4708226/carolzinha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1444253757, "creation_date": 1444226545, "last_edit_date": 1444253757, "question_id": 32994346, "link": "https://stackoverflow.com/questions/32994346/how-to-read-the-amount-of-entries-the-lua-in-c-code", "title": "How to read the amount of entries the lua in C code", "body": "<p>How can I do a count of the amount of settings that exist in my file lua</p>\n\n<p>My file is as follows:</p>\n\n<pre><code>name =\n{\n      Activename = true; // setting 1\n}\nname1 =\n{\n     Activename1 = true; // setting 2\n}\nname2 =\n{\n     Activename2 = true; // setting 3\n}\n</code></pre>\n\n<p>My lua code that I am trying to read the amount is below:</p>\n\n<pre><code>lua_getglobal(L, \"name\");\nlua_getfield(L, -1, \"Activename\");\nvarenable = lua_toboolean(L, -1);\n\nlua_getglobal(L, \"name1\");\nlua_getfield(L, -1, \"Activename1\");\nvarenable = lua_toboolean(L, -1);\n\nlua_getglobal(L, \"name2\");\nlua_getfield(L, -1, \"Activename2\");\nvarenable = lua_toboolean(L, -1);\n</code></pre>\n\n<p>I want to create a message like this:</p>\n\n<p><code>printf (\"There are 3 settings in Userconf.lua file\"/n);</code></p>\n\n<p>Now that comes the question how do I make it to the lua, because I need a variable that the value of the amount of settings, e.g.:</p>\n\n<p><code>printf(\"there are %d settings in Userconf.lua file\\n\", Amount_to_settings);</code></p>\n"}, {"tags": ["c", "enums", "typedef"], "comments": [{"owner": {"reputation": 9958, "user_id": 2188562, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DMWEc.png?s=128&g=1", "display_name": "Peter Varo", "link": "https://stackoverflow.com/users/2188562/peter-varo"}, "edited": false, "score": 0, "creation_date": 1444226815, "post_id": 32994323, "comment_id": 53813532, "body": "An <code>enum</code> <i>does not have members</i> in a way as <code>struct</code>s or <code>union</code>s have. You can&#39;t access them as <code>Type.Member</code>. You are just using it as <code>Member</code>. If you do that, and have all the warning and errors enabled, your compiler will tell you the rest."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1444227720, "post_id": 32994323, "comment_id": 53814247, "body": "Replace <code>enum</code> with <code>struct</code> and it works as you expected."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1444227851, "post_id": 32994323, "comment_id": 53814354, "body": "regarding this line: <code>func1(channel1.CH1);</code>  as stated elsewhere, cannot treat a enum as a struct with members.   however, could use this line: <code>func1(CH1);</code>"}], "answers": [{"tags": [], "owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "is_accepted": false, "score": 2, "last_activity_date": 1444228051, "last_edit_date": 1444228051, "creation_date": 1444227185, "answer_id": 32994596, "question_id": 32994323, "link": "https://stackoverflow.com/questions/32994323/using-a-member-of-typedef-enum-is-this-possible/32994596#32994596", "title": "Using a member of typedef enum is this possible?", "body": "<pre><code>func1(channel1.CH1);\n</code></pre>\n\n<p><code>enums</code> don't have members like structure . What you do is incorrect. What you can do is this -</p>\n\n<pre><code>AIN_Ch_t channel1;\nchannel1=CH1;   \nfunc1(channel1);\n</code></pre>\n\n<p>Or the second way as you do-</p>\n\n<pre><code>func1(CH1);             // directly pass CH1 to function\n</code></pre>\n\n<p><a href=\"http://en.cppreference.com/w/cpp/language/enum\" rel=\"nofollow\">You can refer here to know about <code>enums</code>.</a></p>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 0, "last_activity_date": 1444229835, "creation_date": 1444229835, "answer_id": 32995641, "question_id": 32994323, "link": "https://stackoverflow.com/questions/32994323/using-a-member-of-typedef-enum-is-this-possible/32995641#32995641", "title": "Using a member of typedef enum is this possible?", "body": "<p>Enumeration constants like <code>CH1</code> are regular identifiers, unlike <code>struct</code> or <code>union</code> members.  They live in the same name space as variable and function names.  </p>\n\n<p>This means that:</p>\n\n<ul>\n<li>You do not refer to enumeration constants using an <em><code>instance</code></em><code>.</code><em><code>constant</code></em> syntax like <code>struct</code> or <code>union</code> members;</li>\n<li>No two <code>enum</code> types in the same program may share enumeration constant names;</li>\n<li>No <code>enum</code> type may use a constant name that's also used as a function or variable name.</li>\n</ul>\n\n<p>Basically, <code>enum</code>s are a fancy way of doing</p>\n\n<pre><code>const int CH1 = 0;\nconst int CH2 = 1;\n...\n</code></pre>\n\n<p>You can fake namespaces by using a prefix:</p>\n\n<pre><code>typedef enum AIN_Ch { AIN_CH1, AIN_CH2, AIN_CH3 } AIN_Ch_t;\n</code></pre>\n\n<p>It ain't pretty, but it does the job.  </p>\n"}], "owner": {"reputation": 105, "user_id": 3475003, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2440f4c7f7f0710374eb645c69643bcd?s=128&d=identicon&r=PG&f=1", "display_name": "user3475003", "link": "https://stackoverflow.com/users/3475003/user3475003"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 175, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1444229835, "creation_date": 1444226502, "last_edit_date": 1444226695, "question_id": 32994323, "link": "https://stackoverflow.com/questions/32994323/using-a-member-of-typedef-enum-is-this-possible", "title": "Using a member of typedef enum is this possible?", "body": "<p>So I have a typedef enum similar to:</p>\n\n<pre><code>typedef enum\n{\n    CH1,\n    CH2,\n    CH3\n} AIN_Ch_t;\n</code></pre>\n\n<p>This is declared in a separate file.</p>\n\n<p>So in another file I want to use this enum.</p>\n\n<p>Here is what I think should be right:</p>\n\n<pre><code>//declare variable of type AIN_Ch_t\nAIN_Ch_t channel1;\n//use the variable as parameter in function compiler gives error\nfunc1(channel1.CH1);\n</code></pre>\n\n<p>But when I do this - no error:</p>\n\n<pre><code>func1(CH1); //no error. compiler likes.\n</code></pre>\n\n<p>Obviously I'm thinking about this all wrong. Can someone clarify? thanks!</p>\n"}, {"tags": ["c", "string", "function"], "comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1444225950, "post_id": 32994040, "comment_id": 53812847, "body": "Did you try to debug this?"}, {"owner": {"reputation": 4709, "user_id": 2001149, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SqsJM.png?s=128&g=1", "display_name": "Santosh A", "link": "https://stackoverflow.com/users/2001149/santosh-a"}, "edited": false, "score": 2, "creation_date": 1444226798, "post_id": 32994040, "comment_id": 53813506, "body": "Change <code>char *str = &quot;asdasd&quot;;</code> to <code>char str[] = &quot;asdasd&quot;;</code> as in the first case <code>str</code> is a string literal stored in read only memory."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 2, "creation_date": 1444226909, "post_id": 32994040, "comment_id": 53813608, "body": "first problem:  there are 256 characters not just 26 and need to allow for all those characters.   Second problem: the array &quot;asdasd&quot;  is a string literal,  and string literals are in readonly memory, so this statement: <code>str[j++] = str[i];</code>  will result in a seg fault event."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1444227014, "post_id": 32994040, "comment_id": 53813691, "body": "when compiling, always enable all the warnings.  (for gcc, at a minimum use: <code>-Wall -Wextra -pedantic</code>)   Then fix the warnings, so the code cleanly compiles.   You could start with the variable &#39;k&#39; needs to be a &#39;int&#39;, not a &#39;char&#39;"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1444227180, "post_id": 32994040, "comment_id": 53813814, "body": "the posted code, even after suggested fixes, will fail with a string like: &quot;hello   World!&quot;  as the posted code does not handle capital letters nor punctuation nor spaces."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1444227454, "post_id": 32994040, "comment_id": 53814035, "body": "the system function: <code>strlen()</code> returns a &#39;size_t&#39; which is unsigned.  However, &#39;i&#39; is a &#39;int&#39;   Suggest changing <code>int i;</code> to <code>size_t i;</code>   the function <code>strlen();</code> is an expensive operation.  suggest only call it once and save the result to use in the &#39;for&#39; loop"}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1444227947, "post_id": 32994040, "comment_id": 53814423, "body": "@oprezyzer Try this: <a href=\"http://ideone.com/qQFl1M\" rel=\"nofollow noreferrer\">ideone.com/qQFl1M</a>"}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 2, "last_activity_date": 1444226026, "creation_date": 1444226026, "answer_id": 32994116, "question_id": 32994040, "link": "https://stackoverflow.com/questions/32994040/delete-all-duplicated-charcters-from-strings-c/32994116#32994116", "title": "Delete all duplicated charcters from strings - c", "body": "<p>In your code, <code>str</code> points to a <em>string literal</em>, which might not be modified. Try using an array for the same initialized by the string.</p>\n"}, {"tags": [], "owner": {"reputation": 28754, "user_id": 1153938, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/deBjQ.jpg?s=128&g=1", "display_name": "Vorsprung", "link": "https://stackoverflow.com/users/1153938/vorsprung"}, "is_accepted": false, "score": 1, "last_activity_date": 1444227989, "creation_date": 1444227989, "answer_id": 32994915, "question_id": 32994040, "link": "https://stackoverflow.com/questions/32994040/delete-all-duplicated-charcters-from-strings-c/32994915#32994915", "title": "Delete all duplicated charcters from strings - c", "body": "<p>In main you have declared str as a pointer to a string</p>\n\n<p>So the storage is allocated as a fixed string in the program and not as data</p>\n\n<p>So when you attempt to write to it at line 18 <code>str[j++]=str[i]</code> there is a\nSEGV as this is not allowed</p>\n\n<p>To correct this declare the string as an array of char that is initialized instead</p>\n\n<pre><code>int main(){\n    char str[] = \"asdasd\";\n    delMul(str);\n    puts(str);\n}\n</code></pre>\n"}], "owner": {"reputation": 101, "user_id": 4722358, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/7c1d7a57187780320484044c7a03a014?s=128&d=identicon&r=PG&f=1", "display_name": "oprezyzer", "link": "https://stackoverflow.com/users/4722358/oprezyzer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1444488089, "creation_date": 1444225829, "last_edit_date": 1444488089, "question_id": 32994040, "link": "https://stackoverflow.com/questions/32994040/delete-all-duplicated-charcters-from-strings-c", "title": "Delete all duplicated charcters from strings - c", "body": "<p>I am trying to delete all duplicate characters from a given string.\nFor example \"asdasd\" = \"asd\" or \"abbgga\" = \"abg\".</p>\n\n<p>When I compile and when cmd starts to run it I am getting \"stopped working\" message.</p>\n\n<p>This is my code : </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\nvoid delMul(char str[]){\n    int i,j=0;\n    int s[26];\n    char k ;\n    for ( i = 0; i &lt; 26; i++)\n    {\n        s[i] = 0;\n    }\n    for (i = 0; i &lt; strlen(str); i++)\n    {\n        k = str[i] - 'a'; \n        if(s[k] == 0) {\n            s[k]++ ;\n            str[j++] = str[i];\n        }\n    }\n    str[j] = '\\0';\n}\n\nint main(){\n    char *str = \"asdasd\";\n    delMul(str);\n    puts(str);\n}\n</code></pre>\n"}, {"tags": ["c", "sockets", "proxy", "segmentation-fault"], "comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1444229282, "post_id": 32993808, "comment_id": 53815479, "body": "First thing: Learn how to use a debugger. 2nd: Learn how C-&quot;string&quot;s work. They are differnet."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1444229432, "post_id": 32993808, "comment_id": 53815610, "body": "Final: Always compile with all warning on, take them serious and fix your code until now more warnings are issued by the compiler."}], "owner": {"reputation": 1, "user_id": 5418658, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-X8WsqP_UmCk/AAAAAAAAAAI/AAAAAAAAABw/i3tTme9tiNA/photo.jpg?sz=128", "display_name": "desperate_student", "link": "https://stackoverflow.com/users/5418658/desperate-student"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 677, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1444225291, "creation_date": 1444225291, "question_id": 32993808, "link": "https://stackoverflow.com/questions/32993808/implementing-a-proxy-both-client-part-and-server-part-in-c-with-socket-progra", "title": "Implementing a proxy (both client part and server part) in C (with socket programming)", "body": "<p>I am currently working on a Proxy that should get the browser's request, forward it to the server and then return the server's reply so that the requested page can download.The proxy should support both HTTP 1.0 and 1.1.</p>\n\n<p>I have to write this program in C, with socket programming, but I am new in both (I have only ever programmed in Ada). So I tried to write something, but as soon as I run my program and try to connect, I get a \"Segmentation fault\" error and I don't know what it could mean. I've read that it was about pointers/strings and memory, but I don't know why I'm getting these errors. </p>\n\n<p>here is my code: </p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;    //strlen\n#include&lt;stdlib.h&gt;    //strlen\n#include&lt;sys/socket.h&gt;\n#include&lt;arpa/inet.h&gt; //inet_addr\n#include&lt;unistd.h&gt;    //write\n#include&lt;netdb.h&gt; //hostent\n\n\nint main(int argc , char *argv[])\n{\n    int socket_desc , new_socket ;\n    struct sockaddr_in server , client;\n    char message_from_browser[2000];\n    int len;\n\n//Create socket\nsocket_desc = socket(AF_INET , SOCK_STREAM , 0);\nif (socket_desc == -1)\n{\n    printf(\"Could not create socket\");\n}\n\n//Prepare the sockaddr_in structure\nserver.sin_family = AF_INET;\nserver.sin_addr.s_addr = INADDR_ANY;\nserver.sin_port = htons( 8888 );\n\n//Bind\nif( bind(socket_desc,(struct sockaddr *)&amp;server , sizeof(server)) &lt; 0)\n{\n    puts(\"bind failed\");\n    return 1;\n}\nputs(\"bind done\");\n\n//Listen\nlisten(socket_desc , 3);\n\n//Accept and incoming connection\nputs(\"Waiting for incoming connections...\");\nint c;\nc = sizeof(struct sockaddr_in);\nwhile( (new_socket = accept(socket_desc, (struct sockaddr *)&amp;client, (socklen_t*)&amp;c)) )\n{\n    puts(\"Connection accepted\");\n\nif (new_socket&lt;0)\n{\n    perror(\"accept failed\");\n    return 1;\n}\n\nclose(socket_desc); // don't need this anymore\n\nputs(\"okay dude??\");\n\nif (recv(new_socket, message_from_browser, 2000, 0)&lt;=0)\n    {\n    puts(\"error: connection\");\n    }\n\n    puts(message_from_browser);\n\n    puts (\"Request Received!\");\n\nputs(\"okay huhhh??\");\n\n// oKAY i receive the request! Now extract the hostname from the request!\n\nchar my_hostname[256];\nint j=0;\n\nputs(\"we created j so\");\n\n// doesn't workkkkk: Segmentation error\n\nwhile (j &lt; strcspn(strstr(message_from_browser, \"www.\"), \"/\"))\n        {\n            my_hostname[j] = strstr(message_from_browser, \"www.\")[j];\n            j++;\n            puts(j);\n        }\n\n        puts(\"hostname found! It is: \\r\");\n        puts(my_hostname);\n\n        char *hostname = my_hostname;\n        char ip[100];\n        struct hostent *he;\n        struct in_addr **addr_list;\n        int i;\n\nif ( (he = gethostbyname( hostname ) ) == NULL)\n{\n    //gethostbyname failed\n    herror(\"gethostbyname\");\n    return 1;\n}\n\n//Cast the h_addr_list to in_addr , since h_addr_list also has the ip address in long format only\naddr_list = (struct in_addr **) he-&gt;h_addr_list;\n\nfor(i = 0; addr_list[i] != NULL; i++)\n{\n    //Return the first one;\n    strcpy(ip , inet_ntoa(*addr_list[i]) );\n}\n\n  printf(\"we now have the ip we want to connect to and it is: %s \\n\", ip);\n\n  // CLIENT SIDE\n\n    struct sockaddr_in actual_server;\n    char server_reply[2000];\n    int socket_client;\n\n    socket_client = socket(AF_INET , SOCK_STREAM , 0);\n\n    if (socket_client &lt;0 )\n        {\n            puts(\"error: couldn't create socket\");\n        }\n\n\n\n// remove the \"http\" from the message of the browser\n    /*char message_from_browser_edited[2000];\n    char token_1[1993];\n    char token_2[4];\n    int k=0;\n    int l=0;\n    int m=0;\n\n    while (k &lt; strcspn(message_from_browser, \"http\"))\n        {\n            token_1[k] = message_from_browser[k];\n            k++;\n        }\n\n    while (l &lt; 1992)\n        {\n            my_hostname[l] = strstr(message_from_browser, \"http\")[l];\n            l++;\n        }\n\n    for (m=0; m&lt;=1992; m++)\n    {\n        if (m&lt;=3)\n        message_from_browser_edited[m] = token_1[m] ;\n        else\n        message_from_browser_edited[m] = token_2[m-4];\n    }\nputs(\"We edited the browser's message\");\n\nputs(message_from_browser_edited);*/\n\n// now we have the true message from the browser\n\n    if (write(socket_client, message_from_browser, 2000 )&lt;0)\n    {\n        puts(\"error: wouldn't write :(\");\n    }\n    puts(\"written!\");\n // client reaching actual server\n\n    actual_server.sin_addr.s_addr = inet_addr(ip); // ip is the result of gethostbyname\n    actual_server.sin_family = AF_INET;\n    actual_server.sin_port = htons( 80 ); // it's 80 bc the client side of the proxy is now trying to access the actual internet\n\n    if (connect(socket_client , (struct sockaddr *)&amp;actual_server , sizeof(actual_server)) &lt; 0)\n        {\n            puts(\"connect error\");\n            return 1;\n        }\n    puts(\"Connected!!!\");\n\n    if( send(socket_client , message_from_browser, 2000 , 0) &lt; 0)\n    {\n        puts(\"Send failed   :( \");\n        return 1;\n    }\n    puts(\"Data Send!!!!\");\n\n//Receive a reply from the server\n    if( recv(socket_client, server_reply , 2000 , 0) &lt; 0)\n    {\n        puts(\"recv failed\");\n    }\n    puts(\"Reply received\\n\");\n    puts(server_reply);\n    puts(\"     \");\n\n\n    // BACK TO THE SERVER SIDE that will send the message back to the browser.\n\n        if (send(new_socket, server_reply, 2000, 0) == -1)\n        {\n        perror(\"send\");\n        close(new_socket);\n        exit(0);\n        }\n\n    close(new_socket);  // parent doesn't need this\n\n} // this is for the while\n\nreturn 0;\n\n} // this is the main\n</code></pre>\n\n<p>I've scattered a few messages here and there to pinpoint where exactly the problem is and I found out that it's where I try to extract the host name from the browser's request (I put a comment here that says I got a Segmentation Error). This is weird because it used to work before I made other changes, so I put the changes in comments in hope that it would work again but it doesn't... So I really don't understand what could be wrong. I know that the error is in the while loop's statements but I don't know what's wrong with what I wrote ((j &lt; strcspn(strstr(message_from_browser, \"www.\"), \"/\"))). Is there any way to fix that issue? And am I even doing the right thing for the proxy to work? </p>\n\n<p>Thank you! </p>\n"}, {"tags": ["c"], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 5418651, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80427cec415442c811fbf7810eb6e7ce?s=128&d=identicon&r=PG&f=1", "display_name": "themasterishome", "link": "https://stackoverflow.com/users/5418651/themasterishome"}, "edited": false, "score": 0, "creation_date": 1444225500, "post_id": 32993756, "comment_id": 53812498, "body": "Awesome ... i was just shown another question that clarified everything to me with this single expression a[b] == *(a + b)"}], "tags": [], "owner": {"reputation": 448, "user_id": 5069314, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4KsWL.jpg?s=128&g=1", "display_name": "AkaSh", "link": "https://stackoverflow.com/users/5069314/akash"}, "is_accepted": false, "score": 1, "last_activity_date": 1444225165, "creation_date": 1444225165, "answer_id": 32993756, "question_id": 32993665, "link": "https://stackoverflow.com/questions/32993665/equivalence-of-an-expression-in-c/32993756#32993756", "title": "Equivalence of an expression in C", "body": "<pre><code>*(c+b)\n</code></pre>\n\n<p>It is known as <strong>Pointer Arithmetic</strong>.</p>\n"}, {"comments": [{"owner": {"reputation": 9, "user_id": 5418651, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80427cec415442c811fbf7810eb6e7ce?s=128&d=identicon&r=PG&f=1", "display_name": "themasterishome", "link": "https://stackoverflow.com/users/5418651/themasterishome"}, "edited": false, "score": 0, "creation_date": 1444225344, "post_id": 32993765, "comment_id": 53812379, "body": "Thanks a lot. I was just shown another question, whose answer clarified me. Did not know about this a[b] == *(a + b) . Thanks a lot."}], "tags": [], "owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "is_accepted": true, "score": 1, "last_activity_date": 1444225373, "last_edit_date": 1592644375, "creation_date": 1444225187, "answer_id": 32993765, "question_id": 32993665, "link": "https://stackoverflow.com/questions/32993665/equivalence-of-an-expression-in-c/32993765#32993765", "title": "Equivalence of an expression in C", "body": "<pre><code>*(c+b)\n</code></pre>\n<p>This is equivalent to <code>c[b]</code> .</p>\n<p>According to C99 standard -</p>\n<blockquote>\n<p>6.5.2.1 Array subscripting</p>\n<p>Constraints</p>\n<p>1.One of the expressions shall have type ''pointer to complete object type'', the other expression shall have integer type, and the result has type ''type''.</p>\n<p>Semantics</p>\n<p>2 A postfix expression followed by an expression in square brackets [] is a subscripted designation of an element of an array object. The definition of the subscript operator [] is that E1[E2] is identical to (*((E1)+(E2))). Because of the conversion rules that apply to the binary + operator, if E1 is an array object (equivalently, a pointer to the initial element of an array object) and E2 is an integer, E1[E2] designates the E2-th element of E1 (counting from zero).</p>\n</blockquote>\n"}], "owner": {"reputation": 9, "user_id": 5418651, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80427cec415442c811fbf7810eb6e7ce?s=128&d=identicon&r=PG&f=1", "display_name": "themasterishome", "link": "https://stackoverflow.com/users/5418651/themasterishome"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 620, "favorite_count": 0, "closed_date": 1444225167, "accepted_answer_id": 32993765, "answer_count": 2, "score": 1, "last_activity_date": 1444225373, "creation_date": 1444224916, "question_id": 32993665, "link": "https://stackoverflow.com/questions/32993665/equivalence-of-an-expression-in-c", "closed_reason": "Duplicate", "title": "Equivalence of an expression in C", "body": "<p>This is an assignment and a question for measuring basic knowledge on C. \nIt is part of a course on Coursera.org. But, this is just to measure if you are able to do the course. This is just a copy-paste of the actual question.\nI did great on all other question, I just don't seem to get the following one :</p>\n\n<p>Suppose you are compiling for a 32-bit platform and sizeof(int) == 4. Which one of the following is equivalent to c[b] if c is of type int* and b is of type int?</p>\n\n<p>Possible answers:</p>\n\n<pre><code>-1 * b[c]\n*(c+b)\nnone of the above\n*c+b\nc[b][0]\n</code></pre>\n\n<p>What I am asking is, what the right answer is from the above possibilities, and why? \nI mean what logic does one use to arrive at the result? What should I read to understand the procedure to get there ?</p>\n"}, {"tags": ["c", "linux", "process", "centos7", "context-switching"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1444224422, "post_id": 32993386, "comment_id": 53811594, "body": "Can you point us at where there is actually a maximum sontext switching time guaqranteed by stock Linux? If you need such, you have to use a RTOS; probably a Linux with RT extensions, but nevertheless."}], "answers": [{"tags": [], "owner": {"reputation": 61, "user_id": 5418691, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YZ7c8ZkW9Oo/AAAAAAAAAAI/AAAAAAAAABc/fx1u15Ln1xs/photo.jpg?sz=128", "display_name": "Stoyan Ivanov", "link": "https://stackoverflow.com/users/5418691/stoyan-ivanov"}, "is_accepted": false, "score": 1, "last_activity_date": 1444225721, "creation_date": 1444225721, "answer_id": 32993987, "question_id": 32993386, "link": "https://stackoverflow.com/questions/32993386/context-switching-delay-in-centos7/32993987#32993987", "title": "Context Switching delay in centos7", "body": "<p>Differently compiled kernels  behave differently. You can't rely on time intervals for such things. Since you have signal handler installed in parent why not just reverse the logic: When the child is ready it can send signal to the parent and then the parent can start to control the child - nobody is busy sleeping and everything is event driven</p>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 1, "last_activity_date": 1444225997, "creation_date": 1444225997, "answer_id": 32994105, "question_id": 32993386, "link": "https://stackoverflow.com/questions/32993386/context-switching-delay-in-centos7/32994105#32994105", "title": "Context Switching delay in centos7", "body": "<p>Process / thread scheduling is at the discretion of the OS kernel.  CentOS 7 uses a different kernel than does CentOS 6.</p>\n\n<p>In any event, this is not necessarily a context-switching problem at all.  Context switching applies to threads / processes sharing the same CPU [core], but single-core CPUs are rare these days, at least on the classes of machines where you would expect to find CentOS.  The matter could in fact be whether the child is initially scheduled on the same core as the parent, and if so, which returns first from <code>fork()</code>.</p>\n\n<p>Suppose, for example, that that on CentOS 6, child and parent normally ended up scheduled (initially) on the same core, with the child getting that core first.  In that case, the parent doesn't really need to delay at all as long as the child gets its signal handlers set up before it first yields the CPU.  If on CentOS 7, on the other hand, the child typically gets initially scheduled on a different core, and both processes proceed right away, then the delay that didn't actually matter before suddenly does matter.  That would be a performance improvement by most measures, by the way.</p>\n\n<p>All of that is speculative, of course.  The main problem is that your approach is deeply flawed.  The parent should not try to guess when the child will be ready.  Instead, it should wait for the child to <em>announce</em> its readiness.  The child might do so via a pipe or by signaling the parent, or perhaps better, they could synchronize via a shared semaphore or mutex (which is after all what those objects are for).</p>\n"}], "owner": {"reputation": 13, "user_id": 5418282, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/362631b9a61ea6553b64083b24e34d0b?s=128&d=identicon&r=PG&f=1", "display_name": "Nauman Ahmed", "link": "https://stackoverflow.com/users/5418282/nauman-ahmed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 277, "favorite_count": 0, "accepted_answer_id": 32994105, "answer_count": 2, "score": 1, "last_activity_date": 1444225997, "creation_date": 1444224180, "last_edit_date": 1444225047, "question_id": 32993386, "link": "https://stackoverflow.com/questions/32993386/context-switching-delay-in-centos7", "title": "Context Switching delay in centos7", "body": "<p>In my C application, the main process forks a child process and then sleeps for ten microseconds to give the child time to get ready. After the sleep period, the parent process sends a signal to the child process to start listening on the specified port.</p>\n\n<p>This code executed fine in CentOS6, and there were only few instances where the sleep period was not enough for the child process to setup its signal handlers before the signal from the parent was delivered. When this code was run in CentOS7 with the same system specifications, however, the child  consistently failed to install its signal handlers in time. I had to increase the sleep period to 10 milliseconds (1000 times longer) to get the same performance as I was getting in CentOS6.</p>\n\n<p>I would like to know what might be reasons for context switching to be so slow in CentOS 7 relative to CentOS 6 on same-spec hardware?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 9958, "user_id": 2188562, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DMWEc.png?s=128&g=1", "display_name": "Peter Varo", "link": "https://stackoverflow.com/users/2188562/peter-varo"}, "edited": false, "score": 0, "creation_date": 1444223460, "post_id": 32993066, "comment_id": 53810898, "body": "have you written a separate header file, where all your function prototypes are in, and have you inlcuded that to this file?"}, {"owner": {"reputation": 33, "user_id": 5408349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/451d0f0f3ebab25b0f2d3679e761cfc2?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/5408349/ryan"}, "reply_to_user": {"reputation": 9958, "user_id": 2188562, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DMWEc.png?s=128&g=1", "display_name": "Peter Varo", "link": "https://stackoverflow.com/users/2188562/peter-varo"}, "edited": false, "score": 0, "creation_date": 1444223543, "post_id": 32993066, "comment_id": 53810962, "body": "Hi Peter, Thanks for your time, I have done that one."}, {"owner": {"reputation": 9958, "user_id": 2188562, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DMWEc.png?s=128&g=1", "display_name": "Peter Varo", "link": "https://stackoverflow.com/users/2188562/peter-varo"}, "edited": false, "score": 0, "creation_date": 1444223595, "post_id": 32993066, "comment_id": 53811005, "body": "what is the exact compiler command (with all the flags) your are using? I mean, are you defining the include path, so that the compiler can find your header files?"}, {"owner": {"reputation": 33, "user_id": 5408349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/451d0f0f3ebab25b0f2d3679e761cfc2?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/5408349/ryan"}, "reply_to_user": {"reputation": 9958, "user_id": 2188562, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DMWEc.png?s=128&g=1", "display_name": "Peter Varo", "link": "https://stackoverflow.com/users/2188562/peter-varo"}, "edited": false, "score": 0, "creation_date": 1444223641, "post_id": 32993066, "comment_id": 53811047, "body": "gcc -ansi -Wall -pedantic *.c -o test (There is about 10-12 files for this program) I #include my main in this file, inside main i #include the others"}, {"owner": {"reputation": 9958, "user_id": 2188562, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DMWEc.png?s=128&g=1", "display_name": "Peter Varo", "link": "https://stackoverflow.com/users/2188562/peter-varo"}, "edited": false, "score": 0, "creation_date": 1444223747, "post_id": 32993066, "comment_id": 53811128, "body": "where are the <code>-I</code> flags to define the include path for the CPP? (personal suggestion, also use: <code>-Wextra -v</code> -- but this is not strictly connected to the issue, just a suggestion)"}, {"owner": {"reputation": 33, "user_id": 5408349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/451d0f0f3ebab25b0f2d3679e761cfc2?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/5408349/ryan"}, "reply_to_user": {"reputation": 9958, "user_id": 2188562, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DMWEc.png?s=128&g=1", "display_name": "Peter Varo", "link": "https://stackoverflow.com/users/2188562/peter-varo"}, "edited": false, "score": 0, "creation_date": 1444223813, "post_id": 32993066, "comment_id": 53811171, "body": "I&#39;m not sure what CPP is im only new to C programming"}, {"owner": {"reputation": 9958, "user_id": 2188562, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DMWEc.png?s=128&g=1", "display_name": "Peter Varo", "link": "https://stackoverflow.com/users/2188562/peter-varo"}, "edited": false, "score": 0, "creation_date": 1444223830, "post_id": 32993066, "comment_id": 53811181, "body": "CPP =&gt; C Pre Processor"}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1444224375, "post_id": 32993066, "comment_id": 53811552, "body": "@Ryan You mean like this  ==&gt;&gt;  <a href=\"http://stackoverflow.com/questions/32614150/clarification-on-function-pointers-in-c/32615240#32615240\" title=\"clarification on function pointers in c\">stackoverflow.com/questions/32614150/&hellip;</a> ?"}, {"owner": {"reputation": 33, "user_id": 5408349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/451d0f0f3ebab25b0f2d3679e761cfc2?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/5408349/ryan"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1444224671, "post_id": 32993066, "comment_id": 53811811, "body": "@Michi I believe that mine is basically doing the same thing as this example however all my functions are &quot;undeclared identifier &#39;function&#39;&quot; when i try to run it"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1444225792, "post_id": 32993066, "comment_id": 53812732, "body": "the declared arrays are all hidden inside the function: <code>init_menu()</code>.  I do not see any code to display the menu, I do not see any code to retrieve a selection from the user.  I do not see any code to dispatch a specific selection handler function after the user has entered a selection.  What is the definition of &#39;function&#39;?  What is the definition of &#39;BOOLEAN&#39;?  Do you understand that the array &#39;name&#39; is actually just a series of pointers to the literals listed?  What is the definition of &#39;NUMOPTIONS&#39;?   I.E. the question needs a lot more details/code for us to answer."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1444225983, "post_id": 32993066, "comment_id": 53812875, "body": "the file that contains <code>init_menu()</code> needs to #include the header file(s) for the listed functions."}], "owner": {"reputation": 33, "user_id": 5408349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/451d0f0f3ebab25b0f2d3679e761cfc2?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/5408349/ryan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 469, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1444224258, "creation_date": 1444223281, "last_edit_date": 1444224258, "question_id": 32993066, "link": "https://stackoverflow.com/questions/32993066/initializing-an-array-of-menu-items-with-pointers-to-the-different-options", "title": "Initializing an array of menu items with pointers to the different options", "body": "<p>I'm trying to initialize an array which will be a menu for my program.\nI want it to save the name of the option and a pointer to a function that will be called when the user selects the corresponding option.</p>\n\n<p>I'm only new to C and I'm experiencing a few issues with my current setup which looks like this -</p>\n\n<pre><code>void init_menu(struct menu_item *menu)\n{ \n    /* Array of function pointers */\n    #if 0\n        BOOLEAN (*funcs)[NUMOPTIONS](struct ppd_system)\n    #endif\n    function funcs[NUMOPTIONS] =\n    {\n        display_items, purchase_item, save_system, \n        add_item, remove_item, reset_stock, reset_coins,\n        display_coins,\n    };\n\n    /* Array of Strings */\n    const char *name[NUMOPTIONS] =\n    {\n        \"Display Items\",\n        \"Purchase Items\",\n        \"Save and Exit\",\n        \"Add Item\",\n        \"Remove Item\",\n        \"Display Coins\",\n        \"Reset Stock\",\n        \"Reset Coins\",\n        \"Abort Program\"\n    };\n}\n</code></pre>\n\n<p>My understanding is that my first array should consist of pointers to those functions, and my second array should have the name that corresponds with the function.</p>\n\n<p>The problem is all the functions are returning \"undeclared identifier\" as they're declared in a different file (options.c, while this one is menu.c). Is there some way to pass all the options through so that they can be used in this file? (I can't change parameters as this is a homework task)</p>\n\n<p>Thanks for your time.</p>\n\n<p>This might be helpfull as well:</p>\n\n<pre><code>struct menu_item\n{\n    /* the text to be displayed in the menu */\n    char name[MENU_NAME_LEN + 1];\n    /* pointer to the function to be called when this item is selected */\n    BOOLEAN (*function)(struct ppd_system*);\n};\n\ntypedef BOOLEAN (*function)(struct ppd_system*);\n</code></pre>\n"}, {"tags": ["c", "buffer", "store"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1444223493, "post_id": 32993028, "comment_id": 53810917, "body": "Too many flaws to comment on. For astarter: Do not use casts unreflected, but only if really required and you really know what you are doing (you do not!). an array is not a pointer. SO is no tutorial, you have a <b>specific</b> problem - state it. Use a debugger, but first read &amp; understand a C book/tutorial! Do not skip chapters."}, {"owner": {"reputation": 269, "user_id": 4153963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd046e33d6c86ef4224e4cefb144041d?s=128&d=identicon&r=PG", "display_name": "neocpp", "link": "https://stackoverflow.com/users/4153963/neocpp"}, "edited": false, "score": 0, "creation_date": 1444223782, "post_id": 32993028, "comment_id": 53811154, "body": "For your actual question, the short answer is probably that you need parenthesis around the (buf_ptr + cur). For example bb = (int*)(buf_ptr + cur) I believe will do what you want; I&#39;m not answering yet because I haven&#39;t tried it."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1444224029, "post_id": 32993028, "comment_id": 53811328, "body": "What makes you think <code>cc = (float*) buf_ptr + cur;</code> will work?  Try what you&#39;re doing on an architecture that has any address restrictions and you&#39;ll likely wind up with <code>SIGSEGV</code> or <code>SIGBUS</code>."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1444225588, "post_id": 32993028, "comment_id": 53812572, "body": "@clausismus Just for the record, are you sure you need <b>float c = 3.14;</b> and not <b>double c = 3.14;</b>"}], "answers": [{"tags": [], "owner": {"reputation": 269, "user_id": 4153963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd046e33d6c86ef4224e4cefb144041d?s=128&d=identicon&r=PG", "display_name": "neocpp", "link": "https://stackoverflow.com/users/4153963/neocpp"}, "is_accepted": false, "score": 2, "last_activity_date": 1444224519, "last_edit_date": 1444224519, "creation_date": 1444223918, "answer_id": 32993296, "question_id": 32993028, "link": "https://stackoverflow.com/questions/32993028/copy-variables-into-one-buffer-and-read-it/32993296#32993296", "title": "Copy variables into one buffer and read it", "body": "<p>The short answer is that it looks like you're adding the wrong offset due to the pointer type when doing the <code>aa = (int *)buf_ptr + cur</code> section.</p>\n\n<p>Use <code>aa = (int *)(buf_ptr + cur)</code> instead (and correspondingly for the other pointer assignments).</p>\n\n<p>Here is an ideone that does this, looks like it works: <a href=\"https://ideone.com/64awsM\" rel=\"nofollow\">https://ideone.com/64awsM</a></p>\n\n<p>The reason is this: when you cast <code>buf_ptr</code> to <code>(int *)</code>, you're saying treat this as a pointer to an integer (which is what you want).\nBut then you add an offset <code>cur</code> to that pointer, so if you were thinking of <code>buf_ptr</code> as an array, you're accessing <code>buf_ptr[cur]</code> where each element is an <code>int</code>. Since you have <code>cur=sizeof(int)</code> (which is probably 4 or 8), you are quickly leaving the range of your buffer. If you keep <code>buf_ptr</code> as a char array, your offsets are single bytes as you expected, and you only perform the cast at the end.</p>\n\n<p>This also explains why your first element was always correct (since you basically are doing <code>buf_ptr[0]</code>, it doesn't matter what the element size is since the offset is zero).</p>\n"}], "owner": {"reputation": 155, "user_id": 4881419, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7f5e358aea7c8d5295ad162f20938bb2?s=128&d=identicon&r=PG&f=1", "display_name": "clausismus", "link": "https://stackoverflow.com/users/4881419/clausismus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1762, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1444226710, "creation_date": 1444223160, "last_edit_date": 1444226710, "question_id": 32993028, "link": "https://stackoverflow.com/questions/32993028/copy-variables-into-one-buffer-and-read-it", "title": "Copy variables into one buffer and read it", "body": "<p>I created three buffers and variables and copied every variable to the according buffer.</p>\n\n<p>Then I took the pointers from the buffer and printed it.</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main() {\n\n    // Buffers.\n    unsigned char a_buffer[sizeof(int)];\n    unsigned char b_buffer[sizeof(int)];\n    unsigned char c_buffer[sizeof(float)];\n\n    // Variables ressources.\n    int a = 65500;\n    int b = 32000;\n    float c = 3.14;\n\n    // Variables pointers.\n    int *aa = NULL;\n    int *bb = NULL;\n    float *cc = NULL;\n\n    /* Copy variables to buffer. */\n    memcpy(a_buffer, &amp;a, sizeof(int));\n    memcpy(b_buffer, &amp;b, sizeof(int));\n    memcpy(c_buffer, &amp;c, sizeof(float));\n\n    /* Set pointers. */\n    aa = (int*) a_buffer;\n    bb = (int*) b_buffer;\n    cc = (float*) c_buffer;\n\n    // Print values.\n    printf(\"%i %i %f\\n\", *aa, *bb, *cc);\n\n    return 0;\n}\n</code></pre>\n\n<p>Output: <code>65500 32000 3.140000</code></p>\n\n<p>Now I like to store these variables into one buffer and wrote this.</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;string.h&gt;\n\nint main() {\n\n    // Buffer.\n    unsigned char buffer[sizeof(int) + sizeof(int) + sizeof(float)];\n\n    // Buffer pointer (first object).\n    unsigned char *buf_ptr = buffer;\n\n    // Variables ressources.\n    int a = 65500;\n    int b = 32000;\n    float c = 3.14;\n\n    // Variables pointers.\n    int *aa = NULL;\n    int *bb = NULL;\n    float *cc = NULL;\n\n    /* Copy variables to buffer. */\n    uint16_t cur = 0;\n    memcpy(buf_ptr + cur, &amp;a, sizeof(int));\n    cur += sizeof(int);\n    memcpy(buf_ptr + cur, &amp;b, sizeof(int));\n    cur += sizeof(int);\n    memcpy(buf_ptr + cur, &amp;c, sizeof(float));\n    cur += sizeof(float);\n\n    /* Set pointers. */\n    cur = 0;\n    aa = (int*) buf_ptr + cur;\n    cur += sizeof(int);\n    bb = (int*) buf_ptr + cur;\n    cur += sizeof(int);    \n    cc = (float*) buf_ptr + cur;\n    cur += sizeof(float);\n\n    // Print values.\n    printf(\"%i %i %f\\n\", *aa, *bb, *cc);\n\n    return 0;\n}\n</code></pre>\n\n<p>Output: <code>65500 2054246226 0.000000</code></p>\n\n<p>The first variable is correct, the second changes always, and the third is always zero.</p>\n\n<p>What is the correct way to do it?</p>\n"}, {"tags": ["c", "curl", "makefile", "libcurl"], "comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1444226433, "post_id": 32992869, "comment_id": 53813208, "body": "where/what path did you place all your libraries?   It seems unlikely that all your libraries are in a directory below where your source code is located.   A similar question for the system include files?"}, {"owner": {"reputation": 199, "user_id": 5061582, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/71a976aa5af0022fe3a5f7443e5577ee?s=128&d=identicon&r=PG&f=1", "display_name": "learningpal", "link": "https://stackoverflow.com/users/5061582/learningpal"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1444227405, "post_id": 32992869, "comment_id": 53813985, "body": "The .exe file path is <code>C:\\Users\\Libcurl\\testing _libcurl</code>   include path is : <code>C:\\Users\\Libcurl\\testing _libcurl\\bin</code> and library path <code>C:\\Users\\Libcurl\\testing _libcurl\\libs</code>"}, {"owner": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "edited": false, "score": 1, "creation_date": 1444236783, "post_id": 32992869, "comment_id": 53820855, "body": "This doesn&#39;t make sense in relation to your makefile. Your need to describe the project directory structure accurately, <i>in the question</i> (not in comments), and say where the source files, header files, libraries and makefile are in this structure."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1444314325, "post_id": 32992869, "comment_id": 53860174, "body": "strongly suggest removing the spaces from the directory names as that will be a problem in the makefile"}], "owner": {"reputation": 199, "user_id": 5061582, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/71a976aa5af0022fe3a5f7443e5577ee?s=128&d=identicon&r=PG&f=1", "display_name": "learningpal", "link": "https://stackoverflow.com/users/5061582/learningpal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 325, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1444223399, "creation_date": 1444222692, "last_edit_date": 1444223399, "question_id": 32992869, "link": "https://stackoverflow.com/questions/32992869/unable-to-link-curl-library", "title": "Unable to link CURL library", "body": "<p>I am writing a C application using libcurl. I downloaded the libcurl from this link: <a href=\"http://curl.haxx.se/dlwiz/?type=lib&amp;os=Win32&amp;flav=-\" rel=\"nofollow\">http://curl.haxx.se/dlwiz/?type=lib&amp;os=Win32&amp;flav=-</a>  </p>\n\n<p>I can compile and run the code when I set the path for header and library files in codeblocks. In codeblocks I gave the library path with library <code>libcurldll.a</code> I have kept <code>libcurl.a</code>, <code>libcurl.dll</code> and <code>libcurldll.a</code> in my executable forder. But when I write a makefile for this and give the path, then the code is not linking to curl libraries.  I get the message <code>undefined reference to _imp__curl_global_init</code> and so on for all curl functions in code.<br>\nFollowing is my makefile for the code:  </p>\n\n<pre><code>OBJS =      http.o web_request.o\nTARGET =    http\n\nINC_PATH =  ./include\nLIB_PATH=   ./libs\n\nCC = gcc\nos = windows\n\nCFLAGS =    -c -g -I$(INC_PATH)\nLDFLAGS =   -L$(LIB_PATH)\n\nLIBS =   -lpthreadVC2 -lws2_32  -lcurl\n\n$(TARGET): $(OBJS)\n    $(CC)  -o $(TARGET)  $(OBJS) $(LDFLAGS) $(LIBS)\n\nhttp.o: http.c\n    $(CC) $(CFLAGS) http.c\n\nweb_request.o: web_request.c\n    $(CC) $(CFLAGS) web_request.c\n\nclean:\n    rm $(TARGET) $(OBJS)  \n</code></pre>\n\n<p>Can anyone please tell what is wrong here? Thanks in advance for your responses.</p>\n"}, {"tags": ["c", "arrays", "for-loop", "input", "primes"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1444225491, "post_id": 32992868, "comment_id": 53812487, "body": "<code>&lt; 21</code> is an invitation to undefined behaviour; your <code>list</code> has 20 elements, so the loops should be similar to <code>for (int i = 0; i &lt; 20; i++)</code>.  You&#39;re also studiously ignoring element 0 in the array; that need not be a problem, but effectively wastes one element of the array."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1444225725, "post_id": 32992868, "comment_id": 53812675, "body": "You need to set <code>prime = 0;</code> before the start of the inner loop.  As for improvements, look up Sieve of Eratosthenes or almost any other question about prime numbers on SO.  Your code is just about is inefficient as a prime test can be."}, {"owner": {"reputation": 3, "user_id": 3398803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfbc642ac7dc386b96ef1f60403fd71d?s=128&d=identicon&r=PG&f=1", "display_name": "user3398803", "link": "https://stackoverflow.com/users/3398803/user3398803"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1444226020, "post_id": 32992868, "comment_id": 53812908, "body": "I have done so, refer the 8th row."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1444226193, "post_id": 32992868, "comment_id": 53813033, "body": "What I mean is &quot;You need to set <code>prime = 0;</code> as the first statement in the body of the outer <code>for</code> loop, before the start of the inner <code>for</code> loop&quot;.  You set it to zero at the beginning of the program.  When you enter 2, <code>prime</code> is never incremented, so you correctly identify 2 as prime; ditto 3.  When you enter 4, <code>prime</code> is incremented, so it is identified as composite.  When you enter 5, though, prime is non-zero so it is deemed to be composite."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1444226348, "post_id": 32992868, "comment_id": 53813141, "body": "Compile your program with all warnings &amp; debug info, e.g. <code>gcc -Wall -Wextra -g</code> if using <a href=\"http://gcc.gnu.org/\" rel=\"nofollow noreferrer\">GCC</a>. Then <b>use a debugger</b> e.g. <code>gdb</code> to run your program step by step. Read about <a href=\"https://en.wikipedia.org/wiki/Primality_test\" rel=\"nofollow noreferrer\">primality test</a> &amp; <a href=\"https://en.wikipedia.org/wiki/Prime_number\" rel=\"nofollow noreferrer\">prime numbers</a>"}, {"owner": {"reputation": 3, "user_id": 3398803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfbc642ac7dc386b96ef1f60403fd71d?s=128&d=identicon&r=PG&f=1", "display_name": "user3398803", "link": "https://stackoverflow.com/users/3398803/user3398803"}, "edited": false, "score": 0, "creation_date": 1444226374, "post_id": 32992868, "comment_id": 53813161, "body": "Oo...ok. Thank you very much."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 3398803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfbc642ac7dc386b96ef1f60403fd71d?s=128&d=identicon&r=PG&f=1", "display_name": "user3398803", "link": "https://stackoverflow.com/users/3398803/user3398803"}, "edited": false, "score": 0, "creation_date": 1444223281, "post_id": 32992953, "comment_id": 53810752, "body": "Can you please edit my code such that it can be run well? Your code is tooooooooo deep, I cannot understand."}, {"owner": {"reputation": 1121, "user_id": 4809152, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3HLuL.jpg?s=128&g=1", "display_name": "Arun", "link": "https://stackoverflow.com/users/4809152/arun"}, "reply_to_user": {"reputation": 3, "user_id": 3398803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfbc642ac7dc386b96ef1f60403fd71d?s=128&d=identicon&r=PG&f=1", "display_name": "user3398803", "link": "https://stackoverflow.com/users/3398803/user3398803"}, "edited": false, "score": 0, "creation_date": 1444223617, "post_id": 32992953, "comment_id": 53811025, "body": "check this one  <a href=\"http://www.programiz.com/cpp-programming/examples/prime-number-intervals\" rel=\"nofollow noreferrer\">programiz.com/cpp-programming/examples/prime-number-interval&zwnj;&#8203;s</a>"}, {"owner": {"reputation": 3, "user_id": 3398803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfbc642ac7dc386b96ef1f60403fd71d?s=128&d=identicon&r=PG&f=1", "display_name": "user3398803", "link": "https://stackoverflow.com/users/3398803/user3398803"}, "edited": false, "score": 0, "creation_date": 1444224444, "post_id": 32992953, "comment_id": 53811622, "body": "I checked, but I still cannot understand why my code does not working. Do you know?"}], "tags": [], "owner": {"reputation": 1121, "user_id": 4809152, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3HLuL.jpg?s=128&g=1", "display_name": "Arun", "link": "https://stackoverflow.com/users/4809152/arun"}, "is_accepted": false, "score": 0, "last_activity_date": 1444227418, "last_edit_date": 1444227418, "creation_date": 1444222933, "answer_id": 32992953, "question_id": 32992868, "link": "https://stackoverflow.com/questions/32992868/display-prime-number/32992953#32992953", "title": "Display prime number", "body": "<p>Check this </p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include&lt;stdio.h&gt;\n\nint main()\n{\n   int n, i = 3, count, c;\n\n   printf(\"Enter the number of prime numbers required\\n\");\n   scanf(\"%d\",&amp;n);\n\n   if ( n &gt;= 1 )\n   {\n      printf(\"First %d prime numbers are :\\n\",n);\n      printf(\"2\\n\");\n   }\n\n   for ( count = 2 ; count &lt;= n ;  )\n   {\n      for ( c = 2 ; c &lt;= i - 1 ; c++ )\n      {\n         if ( i%c == 0 )\n            break;\n      }\n      if ( c == i )\n      {\n         printf(\"%d\\n\",i);\n         count++;\n      }\n      i++;\n   }\n\n   return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14257, "user_id": 820127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81f8fffeec4f2ba3e75aebe941e4e5dd?s=128&d=identicon&r=PG", "display_name": "rossum", "link": "https://stackoverflow.com/users/820127/rossum"}, "is_accepted": false, "score": 0, "last_activity_date": 1444225190, "creation_date": 1444225190, "answer_id": 32993767, "question_id": 32992868, "link": "https://stackoverflow.com/questions/32992868/display-prime-number/32993767#32993767", "title": "Display prime number", "body": "<p>What happens in your code is someone types in \"123\" or \"-15\"?  Check and see if you can fix the error.</p>\n\n<p>When you have fixed that, we can look at your prime checking code.  Hint: there are a lot of prime testing code examples on the web.</p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 3398803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfbc642ac7dc386b96ef1f60403fd71d?s=128&d=identicon&r=PG&f=1", "display_name": "user3398803", "link": "https://stackoverflow.com/users/3398803/user3398803"}, "edited": false, "score": 0, "creation_date": 1444226799, "post_id": 32994166, "comment_id": 53813510, "body": "I do not know that will be a problem. However, since you all advise me to make the iteration start with 0, then, I will comply with. Thank you."}, {"owner": {"reputation": 1031, "user_id": 3933895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c3eff8d3f5166ea0f7974afbfcdd5ca?s=128&d=identicon&r=PG&f=1", "display_name": "Samidamaru", "link": "https://stackoverflow.com/users/3933895/samidamaru"}, "reply_to_user": {"reputation": 3, "user_id": 3398803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfbc642ac7dc386b96ef1f60403fd71d?s=128&d=identicon&r=PG&f=1", "display_name": "user3398803", "link": "https://stackoverflow.com/users/3398803/user3398803"}, "edited": false, "score": 0, "creation_date": 1444226943, "post_id": 32994166, "comment_id": 53813632, "body": "There are two issues with not doing it.  Firstly, you&#39;re ignoring the first element in the list. You start the iterations at p=1 which is list[1] which is the second element in your list, potentially missing a prime number.  Secondly, going to p&lt;21 means the final element checked is list[20] which doesn&#39;t actually exist because you only have a list of 20 elements which finish at list[19] (because C is zero indexed).  Doing this iteration any other way than from p=0 to p=19 will result in unwanted and undefined behaviour."}, {"owner": {"reputation": 3, "user_id": 3398803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfbc642ac7dc386b96ef1f60403fd71d?s=128&d=identicon&r=PG&f=1", "display_name": "user3398803", "link": "https://stackoverflow.com/users/3398803/user3398803"}, "edited": false, "score": 0, "creation_date": 1444227149, "post_id": 32994166, "comment_id": 53813796, "body": "I&#39;m a beginner, many rules are not quite understand. Thank you for your guidance."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1444227695, "post_id": 32994166, "comment_id": 53814230, "body": "It would be even better to set <code>prime = 0;</code> before the inner loop. Indeed, you could use <code>int prime = 0;</code> to define and initialize it as the first &#39;statement&#39; after the open brace of the outer loop.  &#39;Statement&#39; in quotes because it is technically a declaration (definition), but it is functionally a statement.  You can do that even with pre-standard C; variables can be declared at the top of a statement block (after an <code>{</code>).  C99 and later allows you to define variables when you need them.  Limiting the scope of a variable is a good practice."}], "tags": [], "owner": {"reputation": 1031, "user_id": 3933895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c3eff8d3f5166ea0f7974afbfcdd5ca?s=128&d=identicon&r=PG&f=1", "display_name": "Samidamaru", "link": "https://stackoverflow.com/users/3933895/samidamaru"}, "is_accepted": true, "score": 1, "last_activity_date": 1444226146, "creation_date": 1444226146, "answer_id": 32994166, "question_id": 32992868, "link": "https://stackoverflow.com/questions/32992868/display-prime-number/32994166#32994166", "title": "Display prime number", "body": "<p>So there are a few issues with your code, but the one that will solve your issue is simply algorithmic.</p>\n\n<p>When you start at the next iteration of p, you don't reset the value of prime and therefore it's always > 0 after we detect the second prime number and you'll never print out any again.</p>\n\n<p>Change this:</p>\n\n<pre><code>for(p=1;p&lt;21;p++)\n{\n    for(t=2;t&lt;list[p];t++)\n    {\n        if ( list[p]%t==0)\n        {\n            prime=prime+1;\n        }\n    }\n        if (prime==0&amp;&amp;list[p]!=1)\n        {\n            cout&lt;&lt;\"Prime numbers:\"&lt;&lt;list[p]&lt;&lt;endl;\n        }\n}\n</code></pre>\n\n<p>To this (I've added some brackets for clairty and so we're certain the condition evaluates as we expect it to):</p>\n\n<pre><code>for(p=0;p&lt;20;p++)\n{\n    for(t=2;t&lt;list[p];t++)\n    {\n        if ( list[p]%t==0)\n        {\n            prime=prime+1;\n        }\n    }\n        if ( (prime==0) &amp;&amp; (list[p]!=1) )\n        {\n            cout&lt;&lt;\"Prime numbers:\"&lt;&lt;list[p]&lt;&lt;endl;\n        }\n        prime = 0;\n}\n</code></pre>\n\n<p>And your issue will be solved.</p>\n\n<p>HOWEVER: I would like to reiterate this does not solve all of your code issues. Make sure you think very carefully about the input part and what you are looping over (why is p 1 to 21? Why not 0 to 20 ;) arrays are zero indexed in C meaning that your list of 20 numbers goes from list[0] to list[19], you're currently looping from list[1] to list[20] which is actually out of range and I'm surprised you didn't get a segfault!)</p>\n"}], "owner": {"reputation": 3, "user_id": 3398803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfbc642ac7dc386b96ef1f60403fd71d?s=128&d=identicon&r=PG&f=1", "display_name": "user3398803", "link": "https://stackoverflow.com/users/3398803/user3398803"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 0, "accepted_answer_id": 32994166, "answer_count": 3, "score": -1, "last_activity_date": 1444227418, "creation_date": 1444222691, "last_edit_date": 1444224672, "question_id": 32992868, "link": "https://stackoverflow.com/questions/32992868/display-prime-number", "title": "Display prime number", "body": "<p>This programming I wrote below is used to display prime number from a list (20 numbers) which keyed in by user. But it only can detect 2 and 3 as prime number. I don't know why it doesn't work. Please tell me where is the errors and help me improve it. TQ.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;conio.h&gt;\nusing namespace std;\n\nvoid main ()\n{\n    int i,number,list[20];\n    int t,p,prime=0;\n\n\n    cout&lt;&lt;\"please key 20 numbers from 0 to 99\"&lt;&lt;endl;\n\n\n    for(i=1;i&lt;21;i++)\n    {\n        cin&gt;&gt;number;\n\n        if((number&lt;0)||(number&gt;99))\n        {\n            cout&lt;&lt;\"Please key in an integer from 0 to 99\"&lt;&lt;endl;\n\n        }\n\n        list[i]=number;\n\n    }\n\n\n    for(p=1;p&lt;21;p++)\n    {\n        for(t=2;t&lt;list[p];t++)\n        {\n            if ( list[p]%t==0)\n            {\n                prime=prime+1;\n            }\n        }\n            if (prime==0&amp;&amp;list[p]!=1)\n            {\n                cout&lt;&lt;\"Prime numbers:\"&lt;&lt;list[p]&lt;&lt;endl;\n            }\n    }\n\ngetch();\n}\n</code></pre>\n"}, {"tags": ["c", "arduino", "arduino-yun"], "comments": [{"owner": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "edited": false, "score": 0, "creation_date": 1444221755, "post_id": 32992468, "comment_id": 53809569, "body": "no os in arduino? then i guess it&#39;s impossible if for arbitrary .so"}, {"owner": {"reputation": 4251, "user_id": 4605105, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-_cFfGx1khYs/AAAAAAAAAAI/AAAAAAAAGt0/vfQ_28nwAEE/photo.jpg?sz=128", "display_name": "&#212;rel", "link": "https://stackoverflow.com/users/4605105/%c3%94rel"}, "edited": false, "score": 0, "creation_date": 1444221984, "post_id": 32992468, "comment_id": 53809746, "body": "get the lib sources  and do a static build"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1444222014, "post_id": 32992468, "comment_id": 53809775, "body": "You first need to implement a Linux (or whatever OS the lib was built for) emulator on Arduino. After that things will become much easier and you will have lots of time to have some coffee."}, {"owner": {"reputation": 1695, "user_id": 1439913, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/C6HQh.jpg?s=128&g=1", "display_name": "Fahad Siddiqui", "link": "https://stackoverflow.com/users/1439913/fahad-siddiqui"}, "reply_to_user": {"reputation": 4251, "user_id": 4605105, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-_cFfGx1khYs/AAAAAAAAAAI/AAAAAAAAGt0/vfQ_28nwAEE/photo.jpg?sz=128", "display_name": "&#212;rel", "link": "https://stackoverflow.com/users/4605105/%c3%94rel"}, "edited": false, "score": 0, "creation_date": 1444222994, "post_id": 32992468, "comment_id": 53810529, "body": "@&#212;rel that looks good idea."}, {"owner": {"reputation": 1695, "user_id": 1439913, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/C6HQh.jpg?s=128&g=1", "display_name": "Fahad Siddiqui", "link": "https://stackoverflow.com/users/1439913/fahad-siddiqui"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1444223057, "post_id": 32992468, "comment_id": 53810578, "body": "@Olaf well I think it would require a lot of caffeine to do that too."}, {"owner": {"reputation": 2636, "user_id": 3368201, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9c46939557e63148d8c8cfa3b14d9e2f?s=128&d=identicon&r=PG&f=1", "display_name": "frarugi87", "link": "https://stackoverflow.com/users/3368201/frarugi87"}, "reply_to_user": {"reputation": 4251, "user_id": 4605105, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-_cFfGx1khYs/AAAAAAAAAAI/AAAAAAAAGt0/vfQ_28nwAEE/photo.jpg?sz=128", "display_name": "&#212;rel", "link": "https://stackoverflow.com/users/4605105/%c3%94rel"}, "edited": false, "score": 2, "creation_date": 1444230598, "post_id": 32992468, "comment_id": 53816509, "body": "Since Arduino does not support shared libraries (you are building a firmware, after all) I don&#39;t think that your .so is compiled for arduino (or for atmel uP). So.. Your binary code is not compatible with your platform: you need to compile it again: get the sources and include them in your arduino environment as @&#212;rel suggested"}], "answers": [{"comments": [{"owner": {"reputation": 177, "user_id": 3077419, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bAXHd.jpg?s=128&g=1", "display_name": "Hammad", "link": "https://stackoverflow.com/users/3077419/hammad"}, "edited": false, "score": 0, "creation_date": 1447925054, "post_id": 33799744, "comment_id": 55365347, "body": "there is an OS in Arduino Yun named Linino (OpenWRT distribution)"}], "tags": [], "owner": {"reputation": 177, "user_id": 3077419, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bAXHd.jpg?s=128&g=1", "display_name": "Hammad", "link": "https://stackoverflow.com/users/3077419/hammad"}, "is_accepted": true, "score": 1, "last_activity_date": 1447925002, "creation_date": 1447925002, "answer_id": 33799744, "question_id": 32992468, "link": "https://stackoverflow.com/questions/32992468/how-to-build-and-upload-code-in-arduino-if-im-using-shared-library/33799744#33799744", "title": "How to build and upload code in Arduino if I&#39;m using shared library?", "body": "<p>\"Use <code>Bridge</code> to access Linux side of Arduino Yun you're using and run <code>bash</code> or <code>python</code> or even C using <code>yun-gcc</code> programs. This will help you embedding shared (<code>.so</code>) libraries for C and importing other libraries also to expand your scope you're working on. Good luck!\"</p>\n"}], "owner": {"reputation": 1695, "user_id": 1439913, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/C6HQh.jpg?s=128&g=1", "display_name": "Fahad Siddiqui", "link": "https://stackoverflow.com/users/1439913/fahad-siddiqui"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 270, "favorite_count": 0, "accepted_answer_id": 33799744, "answer_count": 1, "score": 1, "last_activity_date": 1447925002, "creation_date": 1444221598, "question_id": 32992468, "link": "https://stackoverflow.com/questions/32992468/how-to-build-and-upload-code-in-arduino-if-im-using-shared-library", "title": "How to build and upload code in Arduino if I&#39;m using shared library?", "body": "<p>I have a C code I want to embed with Arduino <code>.ino</code>, this code using some shared library (<code>.so</code>) present in current working directory. How can I build and upload this code to my <code>Arduino Yun</code> using Arduino IDE (or any other method).</p>\n\n<p>If I'm doing it the hard way, please suggest what's the right thing to do here.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1444221290, "post_id": 32992347, "comment_id": 53809210, "body": "&quot;repeat a single word once&quot;. Don&#39;t you mean letter? Also, do you mean consecutive repetitions?"}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 1, "creation_date": 1444221297, "post_id": 32992347, "comment_id": 53809214, "body": "Use Run Length Encode, clip the number of repeat and decode it."}, {"owner": {"reputation": 3, "user_id": 5418411, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0536fe89561f507284b3aa6fdc237e9e?s=128&d=identicon&r=PG&f=1", "display_name": "Sid", "link": "https://stackoverflow.com/users/5418411/sid"}, "edited": false, "score": 0, "creation_date": 1444221395, "post_id": 32992347, "comment_id": 53809291, "body": "yes letter, sorry i do i&#39;m limited to the standard library for this task"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1444221437, "post_id": 32992347, "comment_id": 53809330, "body": "And consecutive only? (Easier)."}, {"owner": {"reputation": 3, "user_id": 5418411, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0536fe89561f507284b3aa6fdc237e9e?s=128&d=identicon&r=PG&f=1", "display_name": "Sid", "link": "https://stackoverflow.com/users/5418411/sid"}, "edited": false, "score": 0, "creation_date": 1444221521, "post_id": 32992347, "comment_id": 53809395, "body": "yup it is the maximum number of consecutive characters"}, {"owner": {"reputation": 3, "user_id": 5418411, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0536fe89561f507284b3aa6fdc237e9e?s=128&d=identicon&r=PG&f=1", "display_name": "Sid", "link": "https://stackoverflow.com/users/5418411/sid"}, "edited": false, "score": 0, "creation_date": 1444221530, "post_id": 32992347, "comment_id": 53809400, "body": "sorry i wasn&#39;t very clear"}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1444221547, "post_id": 32992347, "comment_id": 53809413, "body": "What does &quot;limited to the standard library&quot; mean? Can&#39;t you even add or subtract some numbers without using standard library?"}, {"owner": {"reputation": 3, "user_id": 5418411, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0536fe89561f507284b3aa6fdc237e9e?s=128&d=identicon&r=PG&f=1", "display_name": "Sid", "link": "https://stackoverflow.com/users/5418411/sid"}, "edited": false, "score": 0, "creation_date": 1444221613, "post_id": 32992347, "comment_id": 53809470, "body": "i only have access to stdio.h and string.h, sorry i&#39;m fairly new to programming"}, {"owner": {"reputation": 1330, "user_id": 1876978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/844388f3be9715ab9a9c36eaff2e0789?s=128&d=identicon&r=PG", "display_name": "Vova", "link": "https://stackoverflow.com/users/1876978/vova"}, "edited": false, "score": 0, "creation_date": 1444221622, "post_id": 32992347, "comment_id": 53809477, "body": "@sid : Remember to edit your question to update it with all information from comments"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1444221642, "post_id": 32992347, "comment_id": 53809491, "body": "And lastly, is this case sensitive? And if not, which letter gets removed?"}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1444221693, "post_id": 32992347, "comment_id": 53809514, "body": "So <code>malloc</code> is banned for example?"}, {"owner": {"reputation": 3, "user_id": 5418411, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0536fe89561f507284b3aa6fdc237e9e?s=128&d=identicon&r=PG&f=1", "display_name": "Sid", "link": "https://stackoverflow.com/users/5418411/sid"}, "edited": false, "score": 0, "creation_date": 1444221789, "post_id": 32992347, "comment_id": 53809593, "body": "no it is not case sensitive, the letter which gets removed would be the ones that occur after the first appearance of the letter e.g hii would become hi so the 3rd character would be deleted"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1444221835, "post_id": 32992347, "comment_id": 53809626, "body": "Now be an angel and edit your question with all these clarifications. Else I think it will be downvoted and perhaps even closed."}, {"owner": {"reputation": 3, "user_id": 5418411, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0536fe89561f507284b3aa6fdc237e9e?s=128&d=identicon&r=PG&f=1", "display_name": "Sid", "link": "https://stackoverflow.com/users/5418411/sid"}, "edited": false, "score": 0, "creation_date": 1444221897, "post_id": 32992347, "comment_id": 53809683, "body": "no mike malloc is not banned but we haven&#39;t been taught how to pre-allocate using malloc"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1444222824, "post_id": 32992347, "comment_id": 53810407, "body": "we are not here to do your homework for you.  We are here to help with &#39;it does not compile&#39; and &#39;it does not output the desired output&#39;.   So, post your code and a explanation of what is not working correctly."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1444223103, "post_id": 32992347, "comment_id": 53810611, "body": "a few questions:   is the passed in char pointer pointing to something on the stack/heap or something in a literal?   do you want to edit the passed in char string &#39;in place&#39; or is the code going to simply call printf() with the result?"}, {"owner": {"reputation": 3, "user_id": 5418411, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0536fe89561f507284b3aa6fdc237e9e?s=128&d=identicon&r=PG&f=1", "display_name": "Sid", "link": "https://stackoverflow.com/users/5418411/sid"}, "edited": false, "score": 0, "creation_date": 1444224258, "post_id": 32992347, "comment_id": 53811470, "body": "yeah the edit passed in the char string should be in place, i see i will take note for next time thank you :)"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 5418411, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0536fe89561f507284b3aa6fdc237e9e?s=128&d=identicon&r=PG&f=1", "display_name": "Sid", "link": "https://stackoverflow.com/users/5418411/sid"}, "edited": false, "score": 0, "creation_date": 1444223272, "post_id": 32992819, "comment_id": 53810741, "body": "i can&#39;t quite follow the reducestring function though it would be very helpful if somebody could explain/annotate it"}], "tags": [], "owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "is_accepted": false, "score": 0, "last_activity_date": 1444222559, "creation_date": 1444222559, "answer_id": 32992819, "question_id": 32992347, "link": "https://stackoverflow.com/questions/32992347/reducing-repeated-characters-in-a-string-while-having-a-maximum-number-of-repeat/32992819#32992819", "title": "Reducing repeated characters in a string while having a maximum number of repeated characters allowed", "body": "<p>Count continuous characters, and output characters if the number of repetitions isn't exceeding the limit.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n/* this function make alphabet lower and make it not case sensitive */\n/* note that tolower, which is in ctype.h, is not available here */\nchar normalizeAlphabet(char in)\n{\n    static const char* upperAlphabets = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\";\n    static const char* lowerAlphabets = \"abcdefghijklmnopqrstuvwxyz\";\n    int index = -1;\n    int i;\n    for (i = 0; upperAlphabets[i] != '\\0'; i++)\n    {\n        if (in == upperAlphabets[i])\n        {\n            index = i;\n            break;\n        }\n    }\n    if (index &gt;= 0)\n    {\n        return lowerAlphabets[index];\n    }\n    else\n    {\n        return in;\n    }\n}\n\nvoid ReduceString(char *word, int Maximum)\n{\n    char *out = word;\n    int currentRepetition = 0;\n    int doNotOutput = 0;\n    char currentChar = '\\0';\n    char normalizedChar;\n    while (*word != '\\0')\n    {\n        normalizedChar = normalizeAlphabet(*word);\n        if (normalizedChar == currentChar)\n        {\n            /* continuous same characters */\n            if (currentRepetition &lt; Maximum)\n            {\n                currentRepetition++;\n            }\n            else\n            {\n                doNotOutput = 1;\n            }\n        }\n        else\n        {\n            /* hit to another character */\n            currentChar = normalizedChar;\n            currentRepetition = 1;\n            doNotOutput = 0;\n            if (Maximum &lt; currentRepetition) doNotOutput = 1;\n        }\n        if (!doNotOutput)\n        {\n            /* if repetition is not touching the limit, output the character */\n            *out = *word;\n            out++;\n        }\n        word++;\n    }\n    *out = '\\0';\n}\n\nint main(void)\n{\n    char input[1024];\n    char buf[1024];\n    while (fgets(input, sizeof(input), stdin))\n    {\n        int i;\n        printf(\"input : %s\", input);\n        for (i = 1; i &lt; 5; i++)\n        {\n            strcpy(buf, input);\n            ReduceString(buf, i);\n            printf(\"reduced Maximum = %d : %s\", i, buf);\n        }\n    }\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1444223836, "post_id": 32992907, "comment_id": 53811188, "body": "this answer is case sensitive.  Therefore, it does not meet the requirements as stated by the OP"}], "tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": true, "score": 1, "last_activity_date": 1444224604, "last_edit_date": 1444224604, "creation_date": 1444222791, "answer_id": 32992907, "question_id": 32992347, "link": "https://stackoverflow.com/questions/32992347/reducing-repeated-characters-in-a-string-while-having-a-maximum-number-of-repeat/32992907#32992907", "title": "Reducing repeated characters in a string while having a maximum number of repeated characters allowed", "body": "<p>Simple solution:</p>\n\n<pre><code>void x(char *s, int n)\n{\n    char *cp= s;\n    int i, j;\n\n    while (*cp) {\n        i= 1;\n        while (*(cp+i) &amp;&amp; ((*(cp+i))&amp;~32)==((*cp)&amp;~32)) i++;    // count character repeat\n        for (j=0; j&lt;n &amp;&amp; j&lt;i; j++)              // repeat at most max repeat (n)\n            *s++ = *(cp+j);\n        cp += i;\n    }\n    *s= '\\0';\n}\n</code></pre>\n\n<p>EDIT: added max repeat (n)</p>\n\n<p>EDIT: made case insensitive: <code>&amp;~32</code> removes the lower case bit in ASCII (this will get me the obfuscated C price).</p>\n"}], "owner": {"reputation": 3, "user_id": 5418411, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0536fe89561f507284b3aa6fdc237e9e?s=128&d=identicon&r=PG&f=1", "display_name": "Sid", "link": "https://stackoverflow.com/users/5418411/sid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 32992907, "answer_count": 2, "score": -2, "last_activity_date": 1444224604, "creation_date": 1444221209, "last_edit_date": 1444221950, "question_id": 32992347, "link": "https://stackoverflow.com/questions/32992347/reducing-repeated-characters-in-a-string-while-having-a-maximum-number-of-repeat", "title": "Reducing repeated characters in a string while having a maximum number of repeated characters allowed", "body": "<p>I have no idea how I would even begin to tackle this problem,</p>\n\n<p>so for example\nthe string <code>\"Hello Worlld\"</code> should be\n<code>\"Helo World\"</code> assuming that you can repeat a single word once,</p>\n\n<p>hhhhiiii frieend - where you are allowed two repetitions of each letter per word\nwould be\nhhii frieend </p>\n\n<p>i'm not even sure where to begin I have to code this in c</p>\n\n<p>EDIT:\nfunction header</p>\n\n<pre><code>void ReduceString(char *word, int Maximum) \n</code></pre>\n\n<p>EDIT2:\nnot case sensitive,\nonly limited to stdio.h and string.h\nthere is a limit for maximum number of consecutive characters, all consecutive characters exceeding this maximum number\nshould be eliminated.</p>\n"}, {"tags": ["c++", "c", "openmp", "simd"], "comments": [{"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1444220733, "post_id": 32992059, "comment_id": 53808779, "body": "32 bytes --&gt; 32 bits"}, {"owner": {"reputation": 4037, "user_id": 4056099, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xF37X.jpg?s=128&g=1", "display_name": "NoseKnowsAll", "link": "https://stackoverflow.com/users/4056099/noseknowsall"}, "edited": false, "score": 0, "creation_date": 1444231120, "post_id": 32992059, "comment_id": 53816902, "body": "Yes this is exactly what aligning to 32 bytes means."}, {"owner": {"reputation": 4652, "user_id": 2189128, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/P19VP.jpg?s=128&g=1", "display_name": "Jeff Hammond", "link": "https://stackoverflow.com/users/2189128/jeff-hammond"}, "edited": false, "score": 2, "creation_date": 1444249014, "post_id": 32992059, "comment_id": 53828207, "body": "OP means 32 bytes, presumably because that&#39;s the length of 256 bit SIMD, e.g. AVX-2."}, {"owner": {"reputation": 9942, "user_id": 2876799, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f4774e789da0e393d56db22b62b9d292?s=128&d=identicon&r=PG&f=1", "display_name": "chasep255", "link": "https://stackoverflow.com/users/2876799/chasep255"}, "edited": false, "score": 0, "creation_date": 1444249075, "post_id": 32992059, "comment_id": 53828241, "body": "I just kind of picked 32 to be some sort of reasonable alignment.  I could have said 64 or 128 and the question would be the same."}, {"owner": {"reputation": 9942, "user_id": 2876799, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f4774e789da0e393d56db22b62b9d292?s=128&d=identicon&r=PG&f=1", "display_name": "chasep255", "link": "https://stackoverflow.com/users/2876799/chasep255"}, "edited": false, "score": 0, "creation_date": 1444250228, "post_id": 32992059, "comment_id": 53828826, "body": "Any of you guys know a good tutorial on all of the OpenMP 4 features?"}, {"owner": {"reputation": 4037, "user_id": 4056099, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xF37X.jpg?s=128&g=1", "display_name": "NoseKnowsAll", "link": "https://stackoverflow.com/users/4056099/noseknowsall"}, "edited": false, "score": 0, "creation_date": 1444281817, "post_id": 32992059, "comment_id": 53838719, "body": "@chasep255 if you&#39;re going to Supercomputing &#39;15, there will be a tutorial on advanced OpenMP features before the event formally starts."}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1444291600, "post_id": 32992059, "comment_id": 53843863, "body": "With GCC you can get the same effect of <code>aligned(ptr:n)</code> with <code>__builtin_assume_aligned</code>."}], "answers": [{"tags": [], "owner": {"reputation": 8381, "user_id": 5239503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MqgeX.jpg?s=128&g=1", "display_name": "Gilles", "link": "https://stackoverflow.com/users/5239503/gilles"}, "is_accepted": true, "score": 3, "last_activity_date": 1444376973, "last_edit_date": 1444376973, "creation_date": 1444223913, "answer_id": 32993295, "question_id": 32992059, "link": "https://stackoverflow.com/questions/32992059/openmp-4-aligned-option/32993295#32993295", "title": "OpenMP 4 aligned option?", "body": "<p>To make sure we understand each other, let's assume your <code>array</code> is indeed 256bit aligned (which is equivalent to your 32 bytes alignment).</p>\n\n<p>Then, yes, your <code>#pragma omp simd aligned(array:32)</code> is safe, irrespective of the length of the array or the size of the type of the array. The only thing that matters is the address pointed at by the \"pointer\" used to reference the array.</p>\n\n<hr>\n\n<p><strong>EDIT</strong>: I realised that my answer, although correct, was a bit dry since it was just me answering, but without any \"official\" support for it. So here are some excerpts of the standard to sustain my answer:</p>\n\n<p>From the <a href=\"http://www.openmp.org/mp-documents/OpenMP4.0.0.pdf#G4.1507435\" rel=\"nofollow\">OpenMP 4.0 standard \u00a72.8.1</a>:</p>\n\n<blockquote>\n  <p>[<strong>C/C++</strong>: The aligned clause declares that the object to which each \n  list item points is aligned to the number of bytes expressed in the\n  optional parameter of the aligned clause.]</p>\n  \n  <p>The optional parameter of the aligned clause, alignment, must be a\n  constant positive integer expression. If no optional parameter is\n  specified, implementation-defined default alignments for SIMD\n  instructions on the target platforms are assumed.</p>\n  \n  <p>[...]</p>\n  \n  <p>[<strong>C</strong>: The type of list items appearing in the aligned clause must be\n  array or pointer.]</p>\n  \n  <p>[<strong>C++</strong>: The type of list items appearing in the aligned clause must be\n  array, pointer, reference to array, or reference to pointer.]</p>\n</blockquote>\n\n<p>As you can see, there are no assumptions on the type of the data pointed or referenced by the variable used inside the <code>aligned</code> clause. The only assumption is that the address of the memory segment pointed is byte-aligned to the optional parameter, or to some \"implementation-defined default alignments\" (which BTW strongly encourages me to always give this optional parameter since I have no idea what this implementation-defined default value might be, and more to the point, whether I'll be sure that my array is indeed aligned this way).</p>\n"}, {"comments": [{"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1444291372, "post_id": 32998962, "comment_id": 53843721, "body": "Unaligned loads and stores are not much of an issue on x86 cores since Nehalem (2008)."}, {"owner": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "reply_to_user": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1444310279, "post_id": 32998962, "comment_id": 53856923, "body": "They aren&#39;t as long as they don&#39;t cause cache line splits, though those are much cheaper on Nehalem than on previous x86 microarchitectures. Anyway, my comment about code generation is general - the compiler is free to ignore the alignment clause given a particular architecture."}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1446671739, "post_id": 32998962, "comment_id": 54845903, "body": "Turns out alignment matters more than I though even since Nehalem. You can read about it in my answer here (with several corrections) <a href=\"http://stackoverflow.com/questions/33504003/how-to-write-c-code-that-the-compiler-can-efficiently-compile-to-sse-or-avx/33518813#33518813\" title=\"how to write c code that the compiler can efficiently compile to sse or avx\">stackoverflow.com/questions/33504003/&hellip;</a>"}], "tags": [], "owner": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "is_accepted": false, "score": 3, "last_activity_date": 1444239970, "last_edit_date": 1444239970, "creation_date": 1444239665, "answer_id": 32998962, "question_id": 32992059, "link": "https://stackoverflow.com/questions/32992059/openmp-4-aligned-option/32998962#32998962", "title": "OpenMP 4 aligned option?", "body": "<p><code>aligned(ptr:n)</code> tells the compiler that the array behind <code>ptr</code> begins from an address aligned to <code>n</code> bytes. This helps the compiler in deciding on how to optimally vectorise the loop. Since many vector units require that vector loads and stores are aligned, if the compiler cannot infer the alignment of the data at compile time, it has to generate runtime code that checks the alignment and eventually performs the unaligned portions of the loop (both at the beginning and at the end of the iteration space) using scalar instructions. Those checks are time consuming, especially given smaller array lengths. If the proper alignment is known at compile time, the compiler can directly emit the needed scalar operations. With AVX-512 (Intel Xeon Phi) unaligned loads and stores are performed using masking and providing the correct alignment allows the compiler to directly emit the masked instructions as needed instead of computing the masks at run time.</p>\n"}], "owner": {"reputation": 9942, "user_id": 2876799, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f4774e789da0e393d56db22b62b9d292?s=128&d=identicon&r=PG&f=1", "display_name": "chasep255", "link": "https://stackoverflow.com/users/2876799/chasep255"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3199, "favorite_count": 1, "accepted_answer_id": 32993295, "answer_count": 2, "score": 5, "last_activity_date": 1444376973, "creation_date": 1444220451, "question_id": 32992059, "link": "https://stackoverflow.com/questions/32992059/openmp-4-aligned-option", "title": "OpenMP 4 aligned option?", "body": "<p>I had a question about the new aligned option in OpenMP.  This is in the context of using it with <code>#pragma omp simd aligned(a:n)</code></p>\n\n<p>Say I have an array of integers which I allocated using posix_memalign so I know that the array starts on lets say a 32 byte boundary.  Now lets say I want to square every value in that array.  Can I say...</p>\n\n<pre><code>int* array = { some array of length len aligned to 32 bytes };\n#pragma omp simd aligned(array:32)\nfor(int i = 0; i &lt; len; i++)\n    array[i] *= array[i];\n</code></pre>\n\n<p>Is this a safe assumption?  Or does aligned also imply that the size data type I am using (int) in the array is a multiple of 32 bytes?  Kind of like how the <strong>attribute</strong>((aligned(32)) in gcc will make the type of width at least 32 bytes.</p>\n"}, {"tags": ["c", "readline", "glib", "dbus", "bluez"], "comments": [{"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1444220933, "post_id": 32991830, "comment_id": 53808927, "body": "I/O to a terminal is normally line buffered. So you should try <code>printf(&quot;test\\n&quot;);</code> , and add a \\n anywhere else where you print to stdout as well. (or call fflush(stdout) ). If your issue is not resolve, post a complete, minimal example of your code."}, {"owner": {"reputation": 1486, "user_id": 1037960, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/YJ9wv.jpg?s=128&g=1", "display_name": "Zimano", "link": "https://stackoverflow.com/users/1037960/zimano"}, "reply_to_user": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1444221125, "post_id": 32991830, "comment_id": 53809086, "body": "I&#39;ve tried that indeed, I forgot to add it though. However I didn&#39;t mean that I wanted to fix the output; the entire callback function isn&#39;t called, I want to force the application to dispatch the callback immediately whenever I call cmd_scan. I&#39;ll edit my answer to make that more clear. Thanks!"}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1444221228, "post_id": 32991830, "comment_id": 53809164, "body": "It was just a comment, since a \\n could make it appear that the callbacks wasn&#39;t called, since the output will be deferred in that case, while the work is actually done - you just don&#39;t see it on the screen immediately. However, you&#39;ll need to post more complete code for people to help you."}, {"owner": {"reputation": 1486, "user_id": 1037960, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/YJ9wv.jpg?s=128&g=1", "display_name": "Zimano", "link": "https://stackoverflow.com/users/1037960/zimano"}, "reply_to_user": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1444221373, "post_id": 32991830, "comment_id": 53809271, "body": "That&#39;s the thing; the work isn&#39;t being done. I was reluctant to post code since I think this is also more of a conceptual question in that I want to know how to force a GMainloop to dispatch callbacks instantly instead of at the end of the loop after breaking."}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1444221622, "post_id": 32991830, "comment_id": 53809478, "body": "And it&#39;s hard to know what that means without seeing the code - the GMainLoop is not supposed to run callbacks only when you terminate it.. a GMainLoop runs callbacks immediately, unless you have blocked the GMainLoop (e.g. by doing intensive or blocking work from within a callback). You could process pending events by calling g_main_context_iteration() yourself, however that is often an indication you&#39;ve done something conceptually wrong somewhere."}, {"owner": {"reputation": 1486, "user_id": 1037960, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/YJ9wv.jpg?s=128&g=1", "display_name": "Zimano", "link": "https://stackoverflow.com/users/1037960/zimano"}, "reply_to_user": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1444224964, "post_id": 32991830, "comment_id": 53812037, "body": "I actually found that calling <code>g_main_context_iteration()</code> fixed my issues. I&#39;m beginning to think the readline library that is being used is the culprit of the blocking of the <code>GMainLoop</code>."}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1444235900, "post_id": 32991830, "comment_id": 53820305, "body": "Perhaps. I do believe readline can be ued asyncronously, but if you use it normally e.g. just calling readline() , it&#39;ll certainly block whatever else is going on such as a GMainLoop."}, {"owner": {"reputation": 1307, "user_id": 493960, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f87839ed33a1118762a1eab78a26036a?s=128&d=identicon&r=PG", "display_name": "JoGr", "link": "https://stackoverflow.com/users/493960/jogr"}, "edited": false, "score": 1, "creation_date": 1444292636, "post_id": 32991830, "comment_id": 53844497, "body": "One thing you could do now that you have the D-Bus stuff going already is to implement your code with the main-loop as a D-Bus service and drive the tests through e.g. dbus-send or something like D-Feet. That way your entry point to events will be using the same mechanisms, i.e. GDBus and it might ease up troubleshooting and make tests more extensible."}], "answers": [{"comments": [{"owner": {"reputation": 1486, "user_id": 1037960, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/YJ9wv.jpg?s=128&g=1", "display_name": "Zimano", "link": "https://stackoverflow.com/users/1037960/zimano"}, "edited": false, "score": 0, "creation_date": 1444382403, "post_id": 33015034, "comment_id": 53890280, "body": "Clear answer. Introduces a new insight (Implementing functionality in the callback/property change handler) and explains two method calling functions. Thanks!"}], "tags": [], "owner": {"reputation": 12075, "user_id": 2241569, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QMrPS.jpg?s=128&g=1", "display_name": "Jussi Kukkonen", "link": "https://stackoverflow.com/users/2241569/jussi-kukkonen"}, "is_accepted": true, "score": 2, "last_activity_date": 1444305194, "creation_date": 1444305194, "answer_id": 33015034, "question_id": 32991830, "link": "https://stackoverflow.com/questions/32991830/forcing-immediate-handling-of-events-in-glib-with-c/33015034#33015034", "title": "Forcing immediate handling of events in Glib with C", "body": "<p>GDBus has sync versions of all method call functions. E.g. instead of calling <code>g_dbus_proxy_call()</code> you call <code>g_dbus_proxy_call_sync()</code>.</p>\n\n<p>Some methods return before there are any \"results\": StartDiscovery() is probably one of those -- even the name suggests it only starts discovery: it doesn't wait for discovery results to appear before returning but will send signals or property changes when results are available. If you need to wait for those results before doing something, then you will have to do that something in the signal (or property change) handler, not in the main code body.</p>\n"}], "owner": {"reputation": 1486, "user_id": 1037960, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/YJ9wv.jpg?s=128&g=1", "display_name": "Zimano", "link": "https://stackoverflow.com/users/1037960/zimano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 796, "favorite_count": 0, "accepted_answer_id": 33015034, "answer_count": 1, "score": 0, "last_activity_date": 1444382846, "creation_date": 1444219786, "last_edit_date": 1444382846, "question_id": 32991830, "link": "https://stackoverflow.com/questions/32991830/forcing-immediate-handling-of-events-in-glib-with-c", "title": "Forcing immediate handling of events in Glib with C", "body": "<p>Programming against the C GDBus API from Bluez, I noticed that method calls I am making using DBUS through a proxy won't return their results until the end of the main loop.</p>\n\n<p>For example, typing a function I made \"cmd_bpm\" in the terminal application executes these things:</p>\n\n<pre><code>cmd_scan(\"on\"); //Outputs \"Discovery started\", then posts results through a callback.\nprintf(\"test\"); \ncmd_scan(\"off\"); //Outputs \"Discovery stopped\", then posts results through a callback.\n</code></pre>\n\n<p>However, these callbacks are not handled until at the end of the <code>GMainLoop</code>. The output is:</p>\n\n<pre><code>test\ndiscovery started\ndiscovery stopped\n</code></pre>\n\n<p>Although relying on output to check the order of message calling is not what I have done; I understand printing has to do with line buffers. But breakpointing through the script showed that the callbacks are always handled at the end of the loop.\nIs there any way to either force glib to handle those events as they are called. E.g. waiting for the reply, run the callback, <strong>then</strong> continuing the code. Instead of waiting for the code to run then executing all callback functions. I'm not even sure if glib is the culprit, as trying to force main loop iterations was unsuccessful.</p>\n\n<p>I have also tried to make dbus method calls block and wait for a reply, but the <code>StartDiscovery()</code> function I am executing with <code>cmd_scan()</code> is <code>void</code>, so there are no replies. </p>\n\n<p>I would like to provide more information but I wouldn't know what to include, I haven't noticed a similar topic anywhere.</p>\n\n<p>Preparing the main loop and callbacks.</p>\n\n<pre><code>main_loop = g_main_loop_new(NULL, FALSE);\ndbus_conn = g_dbus_setup_bus(DBUS_BUS_SYSTEM, NULL, NULL);\n\nsignal = setup_signalfd();\n\nclient = g_dbus_client_new(dbus_conn, \"org.bluez\", \"/org/bluez\");\n\ng_dbus_client_set_connect_watch(client, connect_handler, NULL);\ng_dbus_client_set_disconnect_watch(client, disconnect_handler, NULL);\ng_dbus_client_set_signal_watch(client, message_handler, NULL);\ng_dbus_client_set_proxy_handlers(client, proxy_added, proxy_removed,\n                        property_changed, NULL);\n\ninput = 0;\n\ng_dbus_client_set_ready_watch(client, client_ready, &amp;input);\n\ng_main_loop_run(main_loop);\n</code></pre>\n\n<p>Inside this main loop I can input user commands.</p>\n"}, {"tags": ["c", "static"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 6, "creation_date": 1444219477, "post_id": 32991707, "comment_id": 53807885, "body": "&quot;Can you please provide me some better solution to violate STATIC .&quot; Simple answer: <b>do not</b>! If this is how that company works, you should be happy not to get a job there."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 4, "creation_date": 1444219545, "post_id": 32991707, "comment_id": 53807921, "body": "then what is the purpose of making the function static in first place?"}, {"owner": {"reputation": 28373, "user_id": 4926357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f559694d3ca65b39220166b865276d?s=128&d=identicon&r=PG&f=1", "display_name": "A.S.H", "link": "https://stackoverflow.com/users/4926357/a-s-h"}, "edited": false, "score": 9, "creation_date": 1444219603, "post_id": 32991707, "comment_id": 53807975, "body": "<i>By removing the keyword static</i> :p"}, {"owner": {"reputation": 311848, "user_id": 6782, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/dc8c4ddd99b446c28d2e1546c457e508?s=128&d=identicon&r=PG", "display_name": "Alnitak", "link": "https://stackoverflow.com/users/6782/alnitak"}, "edited": false, "score": 0, "creation_date": 1444219604, "post_id": 32991707, "comment_id": 53807976, "body": "perhaps they want to unit test it from a separate test file?"}, {"owner": {"reputation": 164, "user_id": 5234706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30879f478c4161ded8045247768c3e9e?s=128&d=identicon&r=PG&f=1", "display_name": "rose", "link": "https://stackoverflow.com/users/5234706/rose"}, "edited": false, "score": 0, "creation_date": 1444219644, "post_id": 32991707, "comment_id": 53808002, "body": "Hi Sourav, I know then the purpose of Static will be lost. But like constant variables are accessed through pointers i.e anonymous access ,Similar way static functions can also be :)"}, {"owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "edited": false, "score": 0, "creation_date": 1444219694, "post_id": 32991707, "comment_id": 53808044, "body": "tell him he can dereference null pointer. when he says it&#39;s stupid tell him &quot;so is violating static&quot;.."}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 0, "creation_date": 1444219697, "post_id": 32991707, "comment_id": 53808045, "body": "but then you would need to compile both together . Its better declaring  header and including it and that&#39;s what is normally done."}, {"owner": {"reputation": 25589, "user_id": 15727, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FFivc.jpg?s=128&g=1", "display_name": "Thomas Padron-McCarthy", "link": "https://stackoverflow.com/users/15727/thomas-padron-mccarthy"}, "edited": false, "score": 6, "creation_date": 1444219725, "post_id": 32991707, "comment_id": 53808072, "body": "Perhaps they wanted to hear about function pointers?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1444219738, "post_id": 32991707, "comment_id": 53808088, "body": "@shaina: So you provide a wrapper with external linkage? What would be the advantage over directly providing the original function? Ahh, yes, the wrapper would make everything more complicated and the system slower."}, {"owner": {"reputation": 164, "user_id": 5234706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30879f478c4161ded8045247768c3e9e?s=128&d=identicon&r=PG&f=1", "display_name": "rose", "link": "https://stackoverflow.com/users/5234706/rose"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1444219797, "post_id": 32991707, "comment_id": 53808124, "body": "@SouravGhosh: whie typing a comment,Actually function pointer thing came to my mind ,Let me try :) I hope function pointers can provide the anonymous access to static fucntions."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 25589, "user_id": 15727, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FFivc.jpg?s=128&g=1", "display_name": "Thomas Padron-McCarthy", "link": "https://stackoverflow.com/users/15727/thomas-padron-mccarthy"}, "edited": false, "score": 5, "creation_date": 1444219835, "post_id": 32991707, "comment_id": 53808155, "body": "@ThomasPadron-McCarthy: Great: using a global variable to expose a local function instead of the function itself. Well, that would not be the first dumb interview question - nor the last."}, {"owner": {"reputation": 25589, "user_id": 15727, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FFivc.jpg?s=128&g=1", "display_name": "Thomas Padron-McCarthy", "link": "https://stackoverflow.com/users/15727/thomas-padron-mccarthy"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1444219934, "post_id": 32991707, "comment_id": 53808231, "body": "@Olaf: It doesn&#39;t have to be a global variable. One possible scenario is a callback function that you don&#39;t want to be callable by everyone, and you send the pointer to some register_callback function."}, {"owner": {"reputation": 164, "user_id": 5234706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30879f478c4161ded8045247768c3e9e?s=128&d=identicon&r=PG&f=1", "display_name": "rose", "link": "https://stackoverflow.com/users/5234706/rose"}, "reply_to_user": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 0, "creation_date": 1444219970, "post_id": 32991707, "comment_id": 53808253, "body": "@ameyCU:  The disadvantage of header will be other files which are including this header can also access this."}, {"owner": {"reputation": 164, "user_id": 5234706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30879f478c4161ded8045247768c3e9e?s=128&d=identicon&r=PG&f=1", "display_name": "rose", "link": "https://stackoverflow.com/users/5234706/rose"}, "reply_to_user": {"reputation": 25589, "user_id": 15727, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FFivc.jpg?s=128&g=1", "display_name": "Thomas Padron-McCarthy", "link": "https://stackoverflow.com/users/15727/thomas-padron-mccarthy"}, "edited": false, "score": 0, "creation_date": 1444220031, "post_id": 32991707, "comment_id": 53808294, "body": "@ThomasPadron-McCarthy : Yes Thomas you are right . smae thing now came to my mind ."}, {"owner": {"reputation": 25589, "user_id": 15727, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FFivc.jpg?s=128&g=1", "display_name": "Thomas Padron-McCarthy", "link": "https://stackoverflow.com/users/15727/thomas-padron-mccarthy"}, "edited": false, "score": 0, "creation_date": 1444220060, "post_id": 32991707, "comment_id": 53808309, "body": "I&#39;ll write it as an answer."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1444220389, "post_id": 32991707, "comment_id": 53808521, "body": "<code>#include</code> file A from file B, even if A is a &quot;source&quot; file. You&#39;ll get one definition rule hell but it does bring the static function into scope (which will not itself cause you ODR headaches). <code>extern static</code> <i>might</i> work on a broken compiler: that&#39;s not standard C. Perhaps the (rather unskilled) interviewer has such a tool."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 25589, "user_id": 15727, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FFivc.jpg?s=128&g=1", "display_name": "Thomas Padron-McCarthy", "link": "https://stackoverflow.com/users/15727/thomas-padron-mccarthy"}, "edited": false, "score": 0, "creation_date": 1444221252, "post_id": 32991707, "comment_id": 53809179, "body": "@ThomasPadron-McCarthy: But you have to expose the register function. Anyway, this sound like a nonsense function. (If it was for a callback,then the question should have gotten into that direction. As given, it sounds like exposing a normal function, while a callback is an asynchronous thing and requires much more caution for the whole design."}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1444225010, "post_id": 32991707, "comment_id": 53812082, "body": "Using a <code>static</code> function is by no means a &quot;violation&quot; of anything. It only means that the name of that function isn&#39;t accessible from outside. The function itself might well be."}], "answers": [{"comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 3, "creation_date": 1444222646, "post_id": 32991935, "comment_id": 53810275, "body": "How would you determine the address of the function you want to call though?"}, {"owner": {"reputation": 28373, "user_id": 4926357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f559694d3ca65b39220166b865276d?s=128&d=identicon&r=PG&f=1", "display_name": "A.S.H", "link": "https://stackoverflow.com/users/4926357/a-s-h"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1444223946, "post_id": 32991935, "comment_id": 53811271, "body": "The question of @AndrewHenle is interesting. At compile time, the place where the linker will put the module A (that contains foo) is not known. I am not saying taht you cannot register it in some callback dispatcher, but you need to do it only in file A, and the question is, how is this handled by the compiler? what is the address of foo to register?? I guess it is relative to the module? or, in some way or another, something about foo will need to be available to the linker?..."}, {"owner": {"reputation": 25589, "user_id": 15727, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FFivc.jpg?s=128&g=1", "display_name": "Thomas Padron-McCarthy", "link": "https://stackoverflow.com/users/15727/thomas-padron-mccarthy"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1444232611, "post_id": 32991935, "comment_id": 53818109, "body": "@AndrewHenle and A.S.H: I added an example to try to illustrate how it works."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1444241290, "post_id": 32991935, "comment_id": 53823475, "body": "Yes, but in the original question, the function you&#39;re calling <code>my_callback()</code> is in <i>another file</i> and is not visible."}, {"owner": {"reputation": 25589, "user_id": 15727, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FFivc.jpg?s=128&g=1", "display_name": "Thomas Padron-McCarthy", "link": "https://stackoverflow.com/users/15727/thomas-padron-mccarthy"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1444242957, "post_id": 32991935, "comment_id": 53824442, "body": "@AndrewHenle: No, as I understand it, <code>my_callback()</code> is in A, and it is then called from B."}, {"owner": {"reputation": 28373, "user_id": 4926357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f559694d3ca65b39220166b865276d?s=128&d=identicon&r=PG&f=1", "display_name": "A.S.H", "link": "https://stackoverflow.com/users/4926357/a-s-h"}, "edited": false, "score": 0, "creation_date": 1444251769, "post_id": 32991935, "comment_id": 53829624, "body": "Yes it is feasible, of course. I was just wondering what is the parameter the compiler sends to the <code>register_callback</code>. But then I realized that it should apply the same mechanism that it applies to any call to  <code>my_callback</code> inside file B. It uses some sort of relative addressing to compute the address of <code>my_callback</code>."}], "tags": [], "owner": {"reputation": 25589, "user_id": 15727, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FFivc.jpg?s=128&g=1", "display_name": "Thomas Padron-McCarthy", "link": "https://stackoverflow.com/users/15727/thomas-padron-mccarthy"}, "is_accepted": true, "score": 9, "last_activity_date": 1444243016, "last_edit_date": 1444243016, "creation_date": 1444220112, "answer_id": 32991935, "question_id": 32991707, "link": "https://stackoverflow.com/questions/32991707/violating-static-function-in-c/32991935#32991935", "title": "Violating static function in C", "body": "<p>Perhaps they wanted to hear about function pointers?</p>\n\n<p>You can create a pointer to the function, and call it using that pointer.</p>\n\n<p>One possible scenario where this is reasonable is if you have a callback function that you don't want to be callable by everyone, and you give the pointer as an argument to some <code>register_callback</code> function.</p>\n\n<p>Callback functions were used extensively, for example to let the user of a GUI API provide code for what should happen when a button is pressed. Nowadays, with object-oriented languages, it is more common to subclass a class and define or override methods, such as the Android <code>View</code> class and the method <code>OnClickListener</code>, but C# delegates are very similar to C function pointers.</p>\n\n<p>To illustrate the principle, here is the source code (the file \"B\" in the original question) for some sort of library, where the main component is the <code>do_stuff</code> function:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include \"some_library.h\"\n\nvoid (*stored_callback)(void) = NULL;\n\nvoid register_callback(void (*callback)(void)) {\n    stored_callback = callback;\n}\n\nvoid do_stuff(void) {\n    printf(\"Doing stuff...\\n\");\n    printf(\"Calling callback...\\n\");\n    if (stored_callback != NULL)\n        stored_callback();\n}\n</code></pre>\n\n<p>This header, <code>some_library.h</code>, file shows the API of that library:</p>\n\n<pre><code>extern void register_callback(void (*callback)(void));\nextern void do_stuff(void);\n</code></pre>\n\n<p>And here is how the library is used (the file \"A\" in the question):</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include \"some_library.h\"\n\nstatic void my_callback(void) {\n    printf(\"Inside the callback!\\n\");\n}\n\nint main(void) {\n    register_callback(my_callback);\n    do_stuff();\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "is_accepted": false, "score": 2, "last_activity_date": 1444220186, "creation_date": 1444220186, "answer_id": 32991958, "question_id": 32991707, "link": "https://stackoverflow.com/questions/32991707/violating-static-function-in-c/32991958#32991958", "title": "Violating static function in C", "body": "<p>filea.c</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include \"filea.h\"\nstatic void hidden(void) { printf(\"inside hidden function.\\n\"); }\nfxptr unhide(void) { return hidden; }\n</code></pre>\n\n<p>filea.h</p>\n\n<pre><code>#ifndef FILEA_INCLUDED\n#define FILEA_INCLUDED\ntypedef void(*fxptr)(void);\nfxptr unhide(void);\n#endif\n</code></pre>\n\n<p>fileb.c</p>\n\n<pre><code>#include \"filea.h\"\nint main(void) {\n    unhide()();\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 25589, "user_id": 15727, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FFivc.jpg?s=128&g=1", "display_name": "Thomas Padron-McCarthy", "link": "https://stackoverflow.com/users/15727/thomas-padron-mccarthy"}, "edited": false, "score": 1, "creation_date": 1444220965, "post_id": 32991984, "comment_id": 53808952, "body": "Ok, so now I have <i>seven</i> answers to give if I ever go to an interview at that company."}, {"owner": {"reputation": 25589, "user_id": 15727, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FFivc.jpg?s=128&g=1", "display_name": "Thomas Padron-McCarthy", "link": "https://stackoverflow.com/users/15727/thomas-padron-mccarthy"}, "edited": false, "score": 1, "creation_date": 1444221300, "post_id": 32991984, "comment_id": 53809218, "body": "Eight, if you count &quot;use a debugger in a way God never intended&quot;."}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "reply_to_user": {"reputation": 25589, "user_id": 15727, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FFivc.jpg?s=128&g=1", "display_name": "Thomas Padron-McCarthy", "link": "https://stackoverflow.com/users/15727/thomas-padron-mccarthy"}, "edited": false, "score": 0, "creation_date": 1444222859, "post_id": 32991984, "comment_id": 53810439, "body": "IMO, this is a pretty clean build-system-level solution which actually solves a problem that doesn&#39;t exist if you can create a globally accessible pointer to the static function, because being able to create said pointer implies you have access to the source and can simply remove the static keyword."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1444224411, "post_id": 32991984, "comment_id": 53811588, "body": "That assumes the compiler creates a <code>fun</code> symbol in <code>static.o</code>.  It doesn&#39;t have to, much the same as the variable <code>i</code> in <code>void func(){ int i; ... }</code> doesn&#39;t have a symbol, yet in code <i>where <code>i</code> is visible</i> you can still take the address of <code>i</code> with <code>&amp;i</code>."}, {"owner": {"reputation": 25589, "user_id": 15727, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FFivc.jpg?s=128&g=1", "display_name": "Thomas Padron-McCarthy", "link": "https://stackoverflow.com/users/15727/thomas-padron-mccarthy"}, "edited": false, "score": 0, "creation_date": 1444233394, "post_id": 32991984, "comment_id": 53818696, "body": "@PSkocik: Yes, I agree that objcopy != gdb. Using gdb to call the function is a completely different solution from this one. That is why it was number eight, while yours was number seven."}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 0, "creation_date": 1444238447, "post_id": 32991984, "comment_id": 53821819, "body": "Oh I see what you meant."}], "tags": [], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "is_accepted": false, "score": 3, "last_activity_date": 1444221600, "last_edit_date": 1444221600, "creation_date": 1444220273, "answer_id": 32991984, "question_id": 32991707, "link": "https://stackoverflow.com/questions/32991707/violating-static-function-in-c/32991984#32991984", "title": "Violating static function in C", "body": "<p>I'm assuming you don't have access to the source of the static function or else you could just remove the <code>static</code> keyword or expose the function via an exported wrapper or global function pointer.</p>\n\n<p>You can still use the static function if you use <code>objcopy</code> to manually change the visibility on the symbol in the object file / library.</p>\n\n<p>Suppose this is the (unaccessible) static function:</p>\n\n<pre><code>//static.c\n#include &lt;stdio.h&gt;\nstatic void fun(){\n  puts(\"Hello world\");\n}\n</code></pre>\n\n<p>Suppose you only have <code>static.o</code>, obtainable with <code>gcc -c static.c</code>.</p>\n\n<p>Now, let's assume you want to link <code>static.o</code> with <code>main.o</code> made from</p>\n\n<pre><code>//main.c\nvoid fun();\n\nvoid main(){\n  fun();\n};\n</code></pre>\n\n<p>To be able to link it, you need to turn </p>\n\n<pre><code>$ nm static.o\n0000000000000000 t fun\n                 U puts\n</code></pre>\n\n<p>into </p>\n\n<pre><code>0000000000000000 T fun\n                U puts\n</code></pre>\n\n<p>You can do that with:</p>\n\n<pre><code>objcopy --globalize-symbol=fun static.o global.o \n</code></pre>\n\n<p>Now you can link with <code>global.o</code> instead of <code>static.o</code>.</p>\n\n<pre><code>$ gcc main.o global.o &amp;&amp; ./a.out\n  Hello world\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 1, "creation_date": 1444220534, "post_id": 32992004, "comment_id": 53808633, "body": "My Answer would probably be &quot;Presuming I cannot access or modify source of file b, you cannot.&quot;"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1444224757, "post_id": 32992004, "comment_id": 53811884, "body": "I&#39;d think this is the only strictly correct answer, because the <code>static</code> keyword means the function simply isn&#39;t visible per the C standard outside the file it&#39;s defined in.  While a compiler <i>may</i> emit a symbol for the function in a way that can be hacked, it doesn&#39;t have to do that and is likely free to inline the function entirely.  Some ot the other answers may work perfectly fine with specific compilers and/or linkers, but there&#39;s no requirement that they do."}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1444224898, "post_id": 32992004, "comment_id": 53811980, "body": "No, <code>static</code> only means that the name of the function isn&#39;t visible to the outside. As other answers show a pointer to the function can well be exported to the outer world."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1444225168, "post_id": 32992004, "comment_id": 53812210, "body": "The fact that it isn&#39;t visible means the compiler isn&#39;t required to emit something that a function pointer can even point to.  It <i>may</i> do that, and the answers that use a function pointer do rely on that behavior.  But it doesn&#39;t <i>have to</i>.  Try using a very high optimization level when compiling C code with a short static function - for example, one that calculates the product of two complex numbers.  Most compilers will <i>inline</i> such a function and it won&#39;t exist as a separate entity in the emitted binary object."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "reply_to_user": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 2, "creation_date": 1444225229, "post_id": 32992004, "comment_id": 53812273, "body": "@Jens-Gustedt, if a pointer to the function is exported in one or another way, the compiler will no longer in-line the function. This also means modifying file A, and hence the solution should then be to remove the <code>static</code> keyword. All other pointer stuff is then useless. If this is about a call-back function, then the <code>register_callback</code> function should be in file A and then the static function can remain static. Adding <code>register_callback</code> is again modifying file A, hence this is not about a callback. Conclusion: &quot;You can&#39;t.&quot;"}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1444248747, "post_id": 32992004, "comment_id": 53828057, "body": "@AndrewHenle, you are just wrong. <i>If</i> you take the address of a <code>static</code> function and propagate it to the outer world, the compiler <i>must</i> realize the function and provide you with that.  And by the way, the question nowhere states that the files can&#39;t be modified, that is just an arbitrary assumption that you are making."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1444258792, "post_id": 32992004, "comment_id": 53832511, "body": "@JensGustedt What is the point of exporting a visible, non-static function pointer if you can modify the file? <b>Just remove the <code>static</code> keyword</b>. And if you <b>can&#39;t</b> modify the source code there&#39;s no way to guarantee access to a <code>static</code> function in that file.  <b>Without making any assumptions the original question of how to call a static function in another compilation unit can not in general be solved.</b>  Note <b>you</b> have to <b>assume</b> &quot;<i>If</i> you take the address of a <code>static</code> function and propagate that to the outer world ...&quot;  You make unsupported assumptions and call me wrong?"}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1444259750, "post_id": 32992004, "comment_id": 53832836, "body": "@AndrewHenle, why are you shouting at me? Because I said you are wrong? I don&#39;t make assumptions, this just how this works. Exporting pointers of <code>static</code> functions is a common technique, and the C standard provides the means for it. If you have several variants of functions do a job and you have to dynamically choose one of them, this is a technique that avoids polluting the name space and gets the job done. This also something that you would do to use the C library functions <code>bsearch</code> and <code>qsort</code>: make the comparison function <code>static</code> so it doesn&#39;t create name conflicts with other TU."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1444260482, "post_id": 32992004, "comment_id": 53833036, "body": "@JensGustedt The original question does not state that you can <i>assume</i> &quot;<i>If</i> you take the address of a <code>static</code> function and propagate it to the outer world&quot;. That&#39;s an <i>assumption</i>.  It doesn&#39;t matter what the technique of taking an address of a <code>static</code> function is used for, because - again - the original question doesn&#39;t state that something in the original code takes the address of the <code>static</code> function in question. The only way to solve the original problem is to make assumptions. You have to assume you can modify the file, you have to assume a symbol is emitted, etc."}], "tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": false, "score": 8, "last_activity_date": 1444220327, "creation_date": 1444220327, "answer_id": 32992004, "question_id": 32991707, "link": "https://stackoverflow.com/questions/32991707/violating-static-function-in-c/32992004#32992004", "title": "Violating static function in C", "body": "<p>My interview answer would be \"You can't.\"</p>\n\n<p>(Because the question says \"in file B you want to use this <em>static</em> function\" and it didn't say you are allowed to modify file A.)</p>\n"}], "owner": {"reputation": 164, "user_id": 5234706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30879f478c4161ded8045247768c3e9e?s=128&d=identicon&r=PG&f=1", "display_name": "rose", "link": "https://stackoverflow.com/users/5234706/rose"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 438, "favorite_count": 2, "accepted_answer_id": 32991935, "answer_count": 4, "score": 6, "last_activity_date": 1444243016, "creation_date": 1444219401, "last_edit_date": 1444219770, "question_id": 32991707, "link": "https://stackoverflow.com/questions/32991707/violating-static-function-in-c", "title": "Violating static function in C", "body": "<p>In one interview I was asked, if in one file A, some static function is defined and in file B you want to use this static function -- how you will use it?</p>\n\n<p>My answers were: </p>\n\n<ol>\n<li>declaring in .h file\nBut if we declare that in a header file, other files which will include this also have access to this static function.</li>\n<li>wrapper concept: Declaring a new function <code>newfun</code> in file A, which will call static function and calling this <code>newfun</code> in file B.</li>\n</ol>\n\n<p>But he was not satisfied with these answers.</p>\n\n<p>Can you please provide me some better solution to violate <code>static</code>.</p>\n"}, {"tags": ["mysql", "c", "nginx"], "answers": [{"tags": [], "owner": {"reputation": 25733, "user_id": 4663670, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w2HBf.png?s=128&g=1", "display_name": "aergistal", "link": "https://stackoverflow.com/users/4663670/aergistal"}, "is_accepted": false, "score": 1, "last_activity_date": 1453910369, "creation_date": 1453910369, "answer_id": 35042143, "question_id": 32991429, "link": "https://stackoverflow.com/questions/32991429/compiling-nginx-module-with-dependant-library/35042143#35042143", "title": "Compiling nginx module with dependant library", "body": "<blockquote>\n  <p><strong>Compilation Controls</strong></p>\n  \n  <p><strong>--with-cc-opt</strong>=<em>parameters</em>\n  sets additional parameters that will be added to the CFLAGS variable.</p>\n  \n  <p><strong>--with-ld-opt</strong>=<em>parameters</em>\n  sets additional parameters that will be used during linking.</p>\n</blockquote>\n\n<p><a href=\"https://www.nginx.com/resources/wiki/start/topics/tutorials/installoptions/\" rel=\"nofollow\">Source</a></p>\n\n<p>For the MySQL Connector C it will be something like:</p>\n\n<pre><code>--with-cc-opt=\"-I/usr/include/mysql\"\n--with-ld-opt=\"-L/usr/lib64/mysql\"\n</code></pre>\n\n<p>And in you module's <code>config</code> file:</p>\n\n<pre><code>CORE_LIBS=\"$CORE_LIBS -lmysqlclient\"\n</code></pre>\n\n<p>During compilation it might also complain about <code>_GNU_SOURCE</code> being redefined and it will fail if you use <code>-Werror</code> without implementing a workaround.</p>\n"}], "owner": {"reputation": 2813, "user_id": 1772238, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/vXgvn.jpg?s=128&g=1", "display_name": "iamyojimbo", "link": "https://stackoverflow.com/users/1772238/iamyojimbo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 628, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1453910369, "creation_date": 1444218523, "last_edit_date": 1444480684, "question_id": 32991429, "link": "https://stackoverflow.com/questions/32991429/compiling-nginx-module-with-dependant-library", "title": "Compiling nginx module with dependant library", "body": "<p>I have followed the tutorial here to build a simple nginx module with success: <a href=\"https://github.com/perusio/nginx-hello-world-module\" rel=\"nofollow\">https://github.com/perusio/nginx-hello-world-module</a></p>\n\n<p>I can build and run that code with no issue and it functions correctly.</p>\n\n<p>I now want to add a dependancy of MySQL to the simple nginx module so I have used the MySQL C Connector <a href=\"http://dev.mysql.com/doc/refman/5.6/en/c-api-building-clients.html\" rel=\"nofollow\">http://dev.mysql.com/doc/refman/5.6/en/c-api-building-clients.html</a>.</p>\n\n<p>The simplest program you can write is this (taken from <a href=\"http://zetcode.com/db/mysqlc/\" rel=\"nofollow\">http://zetcode.com/db/mysqlc/</a>):</p>\n\n<p>mysql_test.c</p>\n\n<pre><code>#include &lt;my_global.h&gt;\n#include &lt;mysql.h&gt;\n\nint main(int argc, char **argv) \n{\n  printf(\"MySQL client version: %s\\n\", mysql_get_client_info());  \n  exit(0);\n}\n</code></pre>\n\n<p>You then compile like so: </p>\n\n<pre><code>$ gcc mysql_test.c -o mysql_test  `mysql_config --cflags --libs`\n</code></pre>\n\n<p>This works fine.</p>\n\n<p>Now, when I try to include the two header files <code>my_global.h</code> and <code>mysql.h</code> with my simple nginx hello-world module, I need a way of specifying those build flags, else it won't find those header files. At the moment, when I run <code>make</code>, after it successfully builds all other modules, I now get:</p>\n\n<pre><code>cc -c -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g   -I src/core -I src/event -I src/event/modules -I src/os/unix -I objs -I src/http -I src/http/modules -I src/mail \\\n        -o objs/addon/nginx-hello-world-module/ngx_http_hello_world_module.o \\\n        /vagrant/nginx-hello-world-module/ngx_http_hello_world_module.c\n/vagrant/nginx-hello-world-module/ngx_http_hello_world_module.c:33:23: fatal error: my_global.h: No such file or directory\n #include &lt;my_global.h&gt;\n                       ^\ncompilation terminated.\nmake[1]: *** [objs/addon/nginx-hello-world-module/ngx_http_hello_world_module.o] Error 1\nmake[1]: Leaving directory `/vagrant/nginx'\nmake: *** [build] Error 2\n</code></pre>\n\n<p>My question is: How do I get nginx to include those build flags when building my module?</p>\n\n<p>I haven't found any information regarding the building of dependencies with Nginx.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c", "linux", "gcc", "gdb"], "answers": [{"comments": [{"owner": {"reputation": 2735, "user_id": 1498303, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4e0e6cbfe2aae8f0feca2872f9363779?s=128&d=identicon&r=PG", "display_name": "songhir", "link": "https://stackoverflow.com/users/1498303/songhir"}, "edited": false, "score": 0, "creation_date": 1444225620, "post_id": 32993573, "comment_id": 53812592, "body": "thx. so, when the tracee is stopped, the CPU EIP register points to which instruction?"}, {"owner": {"reputation": 23, "user_id": 5416356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cfaecb8db8ccbc9bff885864e2f9655?s=128&d=identicon&r=PG&f=1", "display_name": "bumblebeez", "link": "https://stackoverflow.com/users/5416356/bumblebeez"}, "reply_to_user": {"reputation": 2735, "user_id": 1498303, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4e0e6cbfe2aae8f0feca2872f9363779?s=128&d=identicon&r=PG", "display_name": "songhir", "link": "https://stackoverflow.com/users/1498303/songhir"}, "edited": false, "score": 0, "creation_date": 1444226383, "post_id": 32993573, "comment_id": 53813168, "body": "Well, i would say it contains the <code>execve()</code> system call number, but i&#39;m not sure at all, so you can check it yourself with gdb, there is a command (<code>info reg</code>) that will show you the values of your process registers !"}, {"owner": {"reputation": 2735, "user_id": 1498303, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4e0e6cbfe2aae8f0feca2872f9363779?s=128&d=identicon&r=PG", "display_name": "songhir", "link": "https://stackoverflow.com/users/1498303/songhir"}, "edited": false, "score": 0, "creation_date": 1444226831, "post_id": 32993573, "comment_id": 53813547, "body": "sorry for my ambiguous statements. When the tracee is stopped, the CPU EIP register points to a instruction. What&#39;s this instruction? It belongs to glibc, dynamic linker, or others?"}, {"owner": {"reputation": 23, "user_id": 5416356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cfaecb8db8ccbc9bff885864e2f9655?s=128&d=identicon&r=PG&f=1", "display_name": "bumblebeez", "link": "https://stackoverflow.com/users/5416356/bumblebeez"}, "reply_to_user": {"reputation": 2735, "user_id": 1498303, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4e0e6cbfe2aae8f0feca2872f9363779?s=128&d=identicon&r=PG", "display_name": "songhir", "link": "https://stackoverflow.com/users/1498303/songhir"}, "edited": false, "score": 0, "creation_date": 1444227705, "post_id": 32993573, "comment_id": 53814238, "body": "It&#39;s probably a system call wrapper from glibc C that was called last (execve() in this case)"}, {"owner": {"reputation": 2735, "user_id": 1498303, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4e0e6cbfe2aae8f0feca2872f9363779?s=128&d=identicon&r=PG", "display_name": "songhir", "link": "https://stackoverflow.com/users/1498303/songhir"}, "edited": false, "score": 0, "creation_date": 1444229109, "post_id": 32993573, "comment_id": 53815334, "body": "the <code>execve()</code> never returns(if there is no error), so there is no chance to stopped at the wrapper... :("}], "tags": [], "owner": {"reputation": 23, "user_id": 5416356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cfaecb8db8ccbc9bff885864e2f9655?s=128&d=identicon&r=PG&f=1", "display_name": "bumblebeez", "link": "https://stackoverflow.com/users/5416356/bumblebeez"}, "is_accepted": false, "score": 0, "last_activity_date": 1444224682, "creation_date": 1444224682, "answer_id": 32993573, "question_id": 32991214, "link": "https://stackoverflow.com/questions/32991214/what-happens-after-a-process-calls-ptraceptrace-traceme/32993573#32993573", "title": "what happens after a process calls ptrace(PTRACE_TRACEME, ...)?", "body": "<p>The tracee is usually stopped when a call to <code>execve()</code> is done which will cause it to be sent a SIGTRAP.<br>\nSome uses <code>raise()</code> to ensure a signal is sent, like this :  </p>\n\n<pre><code>ptrace(PTRACE_TRACEME);\nkill(getpid(), SIGSTOP);\nreturn execvp(args[0], args);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13767, "user_id": 2413201, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rxfuw.jpg?s=128&g=1", "display_name": "Armali", "link": "https://stackoverflow.com/users/2413201/armali"}, "is_accepted": false, "score": 0, "last_activity_date": 1454317386, "creation_date": 1454317386, "answer_id": 35126489, "question_id": 32991214, "link": "https://stackoverflow.com/questions/32991214/what-happens-after-a-process-calls-ptraceptrace-traceme/35126489#35126489", "title": "what happens after a process calls ptrace(PTRACE_TRACEME, ...)?", "body": "<blockquote>\n<pre><code>kill(getpid(), SIGSTOP);\nreturn execvp(args[0], args);\n</code></pre>\n  \n  <p>thx. so, when the tracee is stopped, the CPU EIP register points to which instruction?</p>\n</blockquote>\n\n<p>The specification of the <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/kill.html\" rel=\"nofollow\"><code>kill(pid_t pid, int sig)</code></a> function answers this.</p>\n\n<blockquote>\n  <p>If the value of <em>pid</em> causes <em>sig</em> to be generated for the sending\n  process, and if <em>sig</em> is not blocked for the calling thread and if no\n  other thread has <em>sig</em> unblocked or is waiting in a <em>sigwait()</em> function\n  for <em>sig</em>, either <em>sig</em> or at least one pending unblocked signal shall be\n  delivered to the sending thread before <em>kill()</em> returns.</p>\n</blockquote>\n\n<p>So, due to the above <code>kill(getpid(), SIGSTOP)</code> the process is stopped before the library function <em>kill()</em> returns, typically at the instruction just after the system call.</p>\n"}], "owner": {"reputation": 2735, "user_id": 1498303, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4e0e6cbfe2aae8f0feca2872f9363779?s=128&d=identicon&r=PG", "display_name": "songhir", "link": "https://stackoverflow.com/users/1498303/songhir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 784, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1454317386, "creation_date": 1444217903, "question_id": 32991214, "link": "https://stackoverflow.com/questions/32991214/what-happens-after-a-process-calls-ptraceptrace-traceme", "title": "what happens after a process calls ptrace(PTRACE_TRACEME, ...)?", "body": "<p>After a process calls ptrace(PTRACE_TRACEME, ...), where the tracee stoped?</p>\n\n<p>Is the tracee stoped in <code>exec()</code> system call? (seems not)</p>\n\n<p>Is the tracee stoped in dynamic linker text?</p>\n\n<p>...</p>\n\n<p>If I compile a executable without any dynamic link libraries and glibc c-runtime, and specify the entry-point,\nthe tracee would stop at the entry-point.</p>\n\n<p>But when I compile a executable with glibc(<code>gcc hello-world.c</code>), it would stoped at <code>/lib/ld-2.20.so offset + 0xfb0</code>. (cat /proc/[pid]/maps)</p>\n\n<p>Hope more details about this.</p>\n\n<p><code>man ptrace</code> seems no help.</p>\n"}, {"tags": ["c", "malloc"], "comments": [{"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 1, "creation_date": 1444218077, "post_id": 32991184, "comment_id": 53806926, "body": "Is this a C or a C++ question?"}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 2, "creation_date": 1444218294, "post_id": 32991184, "comment_id": 53807079, "body": "Use <code>sprintf</code>  or <code>snprintf</code> ."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1444218763, "post_id": 32991184, "comment_id": 53807394, "body": "FYI: in C, <code>&#39;$&#39;</code> (and <code>&#39;a&#39;</code> and <code>&#39;1&#39;</code> ...) is a value of type <code>int</code> (try printing <code>sizeof &#39;$&#39;</code>)."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 2, "creation_date": 1444218813, "post_id": 32991184, "comment_id": 53807440, "body": "Pick.. one.. language.."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1444218941, "post_id": 32991184, "comment_id": 53807521, "body": "@LightnessRacesinOrbit Instead of whining about this in every post, why don&#39;t you simply edit it and remove the tag which seems least on topic? If the op doesn&#39;t like it and have a rationale about why there should be 2 language tags, they can edit it back. No big deal. I&#39;ll do it and remove the C++ tag here, since you shouldn&#39;t be using malloc in C++ anyhow."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1444219511, "post_id": 32991184, "comment_id": 53807898, "body": "@Lundin: I have quite good reasons for that, so thanks for doing minimal fact-checking before launching into a personal attack. Firstly, <a href=\"http://meta.stackexchange.com/q/185620/155739\">your follow-upaction is inappropriate</a>: it is generally accepted that it is up to the OP to tell us which language they are using. We shall not &quot;guess&quot; or magically divine that on their behalf. Furthermore, simply editing the tag yourself does nothing to educate the user and stop them from double-tagging in the future. So, no, I am not &quot;whining&quot;."}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1444220796, "post_id": 32991184, "comment_id": 53808819, "body": "@LightnessRacesinOrbit: I generally agree with you on that topic, because C and C++ <b>are</b> different languages. But here the relevant part <code>int k = 5; char c=i;</code> is the same in C and C++, and the <code>malloc</code> line would be accepted by C and C++ compilers (even if the cast should not be here in C) - Ok , it would also be the same in java (apart from <code>malloc</code>)..."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1444222414, "post_id": 32991184, "comment_id": 53810070, "body": "@LightnessRacesinOrbit Now, posting <a href=\"http://stackoverflow.com/questions/32990865/does-any-variable-and-any-variable-can-give-same-result-considering-that\">aggressive comments</a> in capital letters is what&#39;s inappropriate, and since I read that post just before this one, I dropped the comment. If this is such a big pet peeve of yours and you refuse to edit, simply ignore all such posts and move on?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1444224321, "post_id": 32991184, "comment_id": 53811514, "body": "@Lundin: I repeat again, it&#39;s best to <i>inform</i> and <i>educate</i> while <i>requesting</i> the OP tag the question properly. How on earth could we accomplish that by &quot;ignoring it and moving on?&quot; I concede the bold caps were a likely-inappropriate yet jocularly-intended expression of boiling-point frustration with the constant stream of <a href=\"https://stackoverflow.com/questions/tagged/c\">c</a> <a href=\"https://stackoverflow.com/questions/tagged/c%2b%2b\">c++</a> double-tagging that just <i>has</i> to stop! Now, would you please follow your own advice, and simply ignore all my comments and move on? Thanks :)"}], "answers": [{"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1444218672, "post_id": 32991320, "comment_id": 53807331, "body": "If you store an int inside a char, the result will get truncated if needed. It is perfectly well-defined behavior. And not the cause of the problem either."}, {"owner": {"reputation": 218, "user_id": 2350525, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e59bba6445a3993abeb237769f708e71?s=128&d=identicon&r=PG", "display_name": "Talaria", "link": "https://stackoverflow.com/users/2350525/talaria"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1444242266, "post_id": 32991320, "comment_id": 53824072, "body": "@Lundin I never said it wasn&#39;t well defined behavior, but it certainly might give someone unexpected results if they tried to store an int in a char array while expecting it to store &quot;5&quot;. And yes, I understand that wasn&#39;t his issue. I wouldn&#39;t exactly say the question was well poised hence my asking him for clarification in my last question."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1444284700, "post_id": 32991320, "comment_id": 53839881, "body": "(I didn&#39;t downvote) Please use comments when asking for clarification, answers are reserved for answering the question."}], "tags": [], "owner": {"reputation": 218, "user_id": 2350525, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e59bba6445a3993abeb237769f708e71?s=128&d=identicon&r=PG", "display_name": "Talaria", "link": "https://stackoverflow.com/users/2350525/talaria"}, "is_accepted": false, "score": -1, "last_activity_date": 1444218254, "creation_date": 1444218254, "answer_id": 32991320, "question_id": 32991184, "link": "https://stackoverflow.com/questions/32991184/can-i-assign-a-integer-to-a-character-pointer-array/32991320#32991320", "title": "Can i assign a integer to a character pointer array?", "body": "<p>The elements in the array you're trying to allocate are all the size of a char, 1 byte. An int is 4 bytes thus your issues. If you want to store ints in an array you could do:</p>\n\n<pre><code>int result[100];\n</code></pre>\n\n<p>Followed by storing the value, but honestly from the way your questioned is posed I don't know if that's actually what you're trying to do. Try rephrasing the post with what you're trying to accomplish.</p>\n\n<p>Are you trying to store 5 as a character?</p>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 2, "last_activity_date": 1444218835, "creation_date": 1444218835, "answer_id": 32991534, "question_id": 32991184, "link": "https://stackoverflow.com/questions/32991184/can-i-assign-a-integer-to-a-character-pointer-array/32991534#32991534", "title": "Can i assign a integer to a character pointer array?", "body": "<p>I'll disregard all the fluff about arrays and malloc as it is irrelevant to the problem you describe. You seem to essentially be asking \"What will this code print:\"</p>\n\n<pre><code>char c = 5; \nprintf(\"%c\", c);\n</code></pre>\n\n<p>It will print the symbol 5 in your symbol table, most likely a non-printable character. When encountering non-printable characters, some implementations choose to print non-standard symbols, such as smileys.</p>\n\n<p>If you want to print the number 5, you have to use a character literal:</p>\n\n<pre><code>char c = '5';\nprintf(\"%c\", c);\n</code></pre>\n\n<p>or alternatively use poor style with \"magic numbers\":</p>\n\n<pre><code>char c = 53;   // don't write code like this\nprintf(\"%c\", c);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": false, "score": 1, "last_activity_date": 1444219336, "creation_date": 1444219336, "answer_id": 32991690, "question_id": 32991184, "link": "https://stackoverflow.com/questions/32991184/can-i-assign-a-integer-to-a-character-pointer-array/32991690#32991690", "title": "Can i assign a integer to a character pointer array?", "body": "<p>It is a problem of character representation. Let's begin by the opposite first. A <code>char</code> can be promoted to an <code>int</code>, but if you do you get the representation of the character (its <em>code</em>). Assuming you use ASCII:</p>\n\n<pre><code>char c = '5';\nint i = c; // i is now 0x35 or 53 ASCII code for '5'\n</code></pre>\n\n<p>Your example is the opposite, 5 can be represented by a char, so <code>result[count] = k</code> is defined (even if you should have got a warning for possible truncation), but ASCII char for code 5 is control code ENQ and will be printed as <code>\u2663</code> on a windows system using code page 850 or 437. </p>\n\n<p>A half portable (not specified, but is known to work on all common architectures) way to do the conversion <code>(int) 5</code> -> <code>(char) '5'</code> is to remember that code '0' to '9' are consecutive (as are 'A' to 'Z' and 'a to 'z'), so I think that what you want is:</p>\n\n<pre><code>result[count] = '0' + k;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 538, "user_id": 1506169, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/c8e930de8e2a3fedff6081dd43675f01?s=128&d=identicon&r=PG", "display_name": "Zaphod Beeblebrox", "link": "https://stackoverflow.com/users/1506169/zaphod-beeblebrox"}, "is_accepted": false, "score": 0, "last_activity_date": 1444219808, "last_edit_date": 1444219808, "creation_date": 1444219461, "answer_id": 32991724, "question_id": 32991184, "link": "https://stackoverflow.com/questions/32991184/can-i-assign-a-integer-to-a-character-pointer-array/32991724#32991724", "title": "Can i assign a integer to a character pointer array?", "body": "<p>First, let's clean up your code a bit: </p>\n\n<pre><code>int k=5;\nchar* result = malloc(100);\nresult[count] = k;\n</code></pre>\n\n<p>sizeof(char) is always equal to 1 under any platform and you don't need to cast the return of malloc() in C. </p>\n\n<p>This said, as long as your <code>count</code> variable contains a value between 0 and 99, you're not doing anything wrong. If you want to print the actual character '5', then you have to assign the ASCII value of that character (53), not just the number 5. Also, remember that if that array of chars has to be interpreted as a string, you need to terminate it with '\\0':</p>\n\n<pre><code>int k=5, i;\nchar* result = malloc(100);\nfor (i=0; i&lt;98; i++) {\n    result[i] = ' ';\n}\nresult[98] = 53;\nresult[99] = '\\0';\nprintf(\"%s\\n\", result);\n</code></pre>\n"}], "owner": {"reputation": 936, "user_id": 5123867, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/50defd909941220da7976d3a8ef55933?s=128&d=identicon&r=PG", "display_name": "Lokesh Sanapalli", "link": "https://stackoverflow.com/users/5123867/lokesh-sanapalli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "answer_count": 4, "score": -2, "last_activity_date": 1444221053, "creation_date": 1444217801, "last_edit_date": 1444221053, "question_id": 32991184, "link": "https://stackoverflow.com/questions/32991184/can-i-assign-a-integer-to-a-character-pointer-array", "title": "Can i assign a integer to a character pointer array?", "body": "<pre><code>int k=5;\nchar* result = (char *)malloc(100 * sizeof(char));\nresult[count] = k;\n</code></pre>\n\n<p>Considering the above code, if I print the contents of <code>result[count]</code> it prints smiley symbols. I tried like below,but of no use.</p>\n\n<pre><code>result[count]=(char)k;\n</code></pre>\n\n<p>Can anyone help me?</p>\n\n<p>I am percepting that <code>malloc(100*sizeof(char))</code> will create <code>100</code> blocks each of size of character contiguously. Please correct me if I am wrong?</p>\n"}, {"tags": ["python", "c", "python-2.7", "python-c-api", "python-extensions"], "comments": [{"owner": {"reputation": 102099, "user_id": 1600898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/01377f8b31f24b0265854666b29d0c03?s=128&d=identicon&r=PG", "display_name": "user4815162342", "link": "https://stackoverflow.com/users/1600898/user4815162342"}, "edited": false, "score": 1, "creation_date": 1444220976, "post_id": 32991119, "comment_id": 53808963, "body": "Can you elaborate on exactly what you want to achieve? An extension module is simply a shared library that Python can load. &quot;Installing&quot; it simply means copying it to a location where Python looks for its modules. Do you mean that you want to run your module from a non-system-wide location? Or that you don&#39;t want to avoid relying on <code>setup.py</code>, and install (copy) the extension module manually instead?"}, {"owner": {"reputation": 7578, "user_id": 3426606, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iKyql.jpg?s=128&g=1", "display_name": "Tony Suffolk 66", "link": "https://stackoverflow.com/users/3426606/tony-suffolk-66"}, "edited": false, "score": 0, "creation_date": 1444221073, "post_id": 32991119, "comment_id": 53809037, "body": "It will need to exist on the platform somwhere, so can you clarify what you mean when you state you don&#39;t want to install it ?"}, {"owner": {"reputation": 346, "user_id": 5414031, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/UJgdp.png?s=128&g=1", "display_name": "ironstein", "link": "https://stackoverflow.com/users/5414031/ironstein"}, "edited": false, "score": 0, "creation_date": 1444223135, "post_id": 32991119, "comment_id": 53810643, "body": "I want to use it as just another python file in my project, and not a file that I need to install before my other python modules in my project  get to use its functionality"}, {"owner": {"reputation": 346, "user_id": 5414031, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/UJgdp.png?s=128&g=1", "display_name": "ironstein", "link": "https://stackoverflow.com/users/5414031/ironstein"}, "reply_to_user": {"reputation": 7578, "user_id": 3426606, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iKyql.jpg?s=128&g=1", "display_name": "Tony Suffolk 66", "link": "https://stackoverflow.com/users/3426606/tony-suffolk-66"}, "edited": false, "score": 0, "creation_date": 1444225002, "post_id": 32991119, "comment_id": 53812074, "body": "@TonySuffolk66 can I do something like my python script will first check whether the module is installed, and if not then install the C module from the python script itself. Is there some way in which this can be achieved ?"}, {"owner": {"reputation": 7578, "user_id": 3426606, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iKyql.jpg?s=128&g=1", "display_name": "Tony Suffolk 66", "link": "https://stackoverflow.com/users/3426606/tony-suffolk-66"}, "edited": false, "score": 0, "creation_date": 1444225469, "post_id": 32991119, "comment_id": 53812473, "body": "@ironstein - in theory you could do that - but why would you want to ? It is usual to install all dependencies with the application. I might be mistaken but I don&#39;t know of any major application which does on demand installation of dependencies (I am not talking about optional plugins)."}, {"owner": {"reputation": 346, "user_id": 5414031, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/UJgdp.png?s=128&g=1", "display_name": "ironstein", "link": "https://stackoverflow.com/users/5414031/ironstein"}, "reply_to_user": {"reputation": 7578, "user_id": 3426606, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iKyql.jpg?s=128&g=1", "display_name": "Tony Suffolk 66", "link": "https://stackoverflow.com/users/3426606/tony-suffolk-66"}, "edited": false, "score": 0, "creation_date": 1444263858, "post_id": 32991119, "comment_id": 53833930, "body": "@TonySuffolk66 I am just testing. It is not a big application and I am not distributing it or anything. I&#39;m just curious. So if I were to do it, how would I do  it ? Thanks for your help so far by the way."}], "answers": [{"comments": [{"owner": {"reputation": 9958, "user_id": 2188562, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DMWEc.png?s=128&g=1", "display_name": "Peter Varo", "link": "https://stackoverflow.com/users/2188562/peter-varo"}, "edited": false, "score": 2, "creation_date": 1444222451, "post_id": 32992453, "comment_id": 53810101, "body": "why exactly is the <code>-1</code>?"}, {"owner": {"reputation": 346, "user_id": 5414031, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/UJgdp.png?s=128&g=1", "display_name": "ironstein", "link": "https://stackoverflow.com/users/5414031/ironstein"}, "edited": false, "score": 0, "creation_date": 1444225011, "post_id": 32992453, "comment_id": 53812085, "body": "can I do something like my python script will first check whether the module is installed, and if not then install the C module from the python script itself. Is there some way in which this can be achieved ?"}, {"owner": {"reputation": 9958, "user_id": 2188562, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DMWEc.png?s=128&g=1", "display_name": "Peter Varo", "link": "https://stackoverflow.com/users/2188562/peter-varo"}, "reply_to_user": {"reputation": 346, "user_id": 5414031, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/UJgdp.png?s=128&g=1", "display_name": "ironstein", "link": "https://stackoverflow.com/users/5414031/ironstein"}, "edited": false, "score": 0, "creation_date": 1444225244, "post_id": 32992453, "comment_id": 53812285, "body": "@ironstein you can <code>try&#47;except</code> the import of your module and warn the user on <code>ImportError</code>, so that s/he must install your module. You can even place further instructions in the given error message (like where to download it from)."}, {"owner": {"reputation": 9958, "user_id": 2188562, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DMWEc.png?s=128&g=1", "display_name": "Peter Varo", "link": "https://stackoverflow.com/users/2188562/peter-varo"}, "reply_to_user": {"reputation": 346, "user_id": 5414031, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/UJgdp.png?s=128&g=1", "display_name": "ironstein", "link": "https://stackoverflow.com/users/5414031/ironstein"}, "edited": false, "score": 0, "creation_date": 1444225313, "post_id": 32992453, "comment_id": 53812349, "body": "(another possible solution is -- which is also very common -- implement a pure python version of your module as a fallback option, so even if your C extension is not available, but your pure python version is, then your program will use that instead. Ofc if that one is missing yoo you have to do what I mentioned in the previous comments of mine)"}, {"owner": {"reputation": 346, "user_id": 5414031, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/UJgdp.png?s=128&g=1", "display_name": "ironstein", "link": "https://stackoverflow.com/users/5414031/ironstein"}, "edited": false, "score": 0, "creation_date": 1444263933, "post_id": 32992453, "comment_id": 53833947, "body": "in your mentioned try/except approach, could I install the module in some way in the except part, if I got an ImportError in the try part? Thanks for your help so far by the way."}], "tags": [], "owner": {"reputation": 9958, "user_id": 2188562, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DMWEc.png?s=128&g=1", "display_name": "Peter Varo", "link": "https://stackoverflow.com/users/2188562/peter-varo"}, "is_accepted": false, "score": 0, "last_activity_date": 1444222583, "last_edit_date": 1444222583, "creation_date": 1444221547, "answer_id": 32992453, "question_id": 32991119, "link": "https://stackoverflow.com/questions/32991119/using-a-c-extension-in-python-without-installing-it-as-a-module/32992453#32992453", "title": "using a C extension in python, without installing it as a module", "body": "<p>You can create your \"own interpreter\" by not extending python, but embedding it into your application. In that way, your objects will be always available for the users who are running your program. This is a pretty common thing to do in certain cases, for example look at the Blender project where all the <code>bpy</code>, <code>bmesh</code> and <code>bge</code> modules are already included.</p>\n\n<p>The downside is, your users can't use the <code>python</code> command directly, they have to use your <code>hello_world_python</code> instead. (But of course you can provide your extension as a module as well.) And that also means, you have to compile and distribute your application for all platforms you want to support -- in case you want to distribute it as a binary, to make your users lives a bit easier.</p>\n\n<p>For further information on embedding python into your program, read the propriate sections of the documentation:</p>\n\n<p><a href=\"https://docs.python.org/2/extending/embedding.html\" rel=\"nofollow\">Embedding Python in Another Application</a></p>\n\n<blockquote>\n  <p><strong><em>Personal suggestion:</em></strong> Use Python 3.5 whenever you can, and stop supporting the old 2.x versions. For more information, read this article: <a href=\"https://wiki.python.org/moin/Python2orPython3\" rel=\"nofollow\">Should I use Python 2 or Python 3 for my development activity?</a></p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 9958, "user_id": 2188562, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DMWEc.png?s=128&g=1", "display_name": "Peter Varo", "link": "https://stackoverflow.com/users/2188562/peter-varo"}, "edited": false, "score": 0, "creation_date": 1444222394, "post_id": 32992714, "comment_id": 53810057, "body": "I don&#39;t think that is a solution, since you have to make sure python will find your module, which means, you have to install it at the end, or at least extend your <code>path</code>."}, {"owner": {"reputation": 346, "user_id": 5414031, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/UJgdp.png?s=128&g=1", "display_name": "ironstein", "link": "https://stackoverflow.com/users/5414031/ironstein"}, "edited": false, "score": 0, "creation_date": 1444263565, "post_id": 32992714, "comment_id": 53833861, "body": "@hmn I built the extension using python setup.py build and it gave me shared libraries (.so files) for mac osx 10.6 and mac osx 10.10 in two different folders. If I wanted to use my  compiled extension on windows, how would I do so ? and also once I  built it, how do I use the shared library ?"}, {"owner": {"reputation": 3925, "user_id": 3815611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26b153a6443c973aea03f8314127f33a?s=128&d=identicon&r=PG&f=1", "display_name": "BlackJack", "link": "https://stackoverflow.com/users/3815611/blackjack"}, "reply_to_user": {"reputation": 346, "user_id": 5414031, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/UJgdp.png?s=128&g=1", "display_name": "ironstein", "link": "https://stackoverflow.com/users/5414031/ironstein"}, "edited": false, "score": 0, "creation_date": 1444739393, "post_id": 32992714, "comment_id": 54020237, "body": "@ironstein You can&#39;t use the modules compiled for Mac on Windows. C extension modules have to be compiled for the target system and Python version that should use them."}], "tags": [], "owner": {"reputation": 706, "user_id": 406946, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1229fe3e2959517f522393889bedbf61?s=128&d=identicon&r=PG", "display_name": "hmn", "link": "https://stackoverflow.com/users/406946/hmn"}, "is_accepted": true, "score": 2, "last_activity_date": 1444222320, "creation_date": 1444222320, "answer_id": 32992714, "question_id": 32991119, "link": "https://stackoverflow.com/questions/32991119/using-a-c-extension-in-python-without-installing-it-as-a-module/32992714#32992714", "title": "using a C extension in python, without installing it as a module", "body": "<p>You can simply compile the extension without installing (usually something like <code>python setup.py build</code>). Then you have to make sure the interpreter can find the compiled module (for example by copying it next to a script that imports it, or setting <code>PYTHONPATH</code>).</p>\n"}], "owner": {"reputation": 346, "user_id": 5414031, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/UJgdp.png?s=128&g=1", "display_name": "ironstein", "link": "https://stackoverflow.com/users/5414031/ironstein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1521, "favorite_count": 1, "accepted_answer_id": 32992714, "answer_count": 2, "score": 4, "last_activity_date": 1444223293, "creation_date": 1444217612, "last_edit_date": 1444223293, "question_id": 32991119, "link": "https://stackoverflow.com/questions/32991119/using-a-c-extension-in-python-without-installing-it-as-a-module", "title": "using a C extension in python, without installing it as a module", "body": "<p>I am writing C extensions for python. I am just experimenting for the time being and I have written a hello world extension that looks like this : </p>\n\n<pre><code>#include &lt;Python2.7/Python.h&gt;\n\nstatic PyObject* helloworld(PyObject* self)\n{\n    return Py_BuildValue(\"s\", \"Hello, Python extensions!!\");\n}\n\nstatic char helloworld_docs[] = \"helloworld( ): Any message you want to put here!!\\n\";\n\nstatic PyMethodDef helloworld_funcs[] = {\n    {\"helloworld\", (PyCFunction)helloworld, METH_NOARGS, helloworld_docs},\n    {NULL,NULL,0,NULL}\n};\n\nvoid inithelloworld(void)\n{\n    Py_InitModule3(\"helloworld\", helloworld_funcs,\"Extension module example!\");\n}\n</code></pre>\n\n<p>the code works perfectly fine, after installing it from a setup.py file I wrote, and installing it from command line</p>\n\n<pre><code>python setup.py install\n</code></pre>\n\n<p>What I want is the following : </p>\n\n<p>I want to use the C file as a python extension module, without installing it, that is I want to use it as just another python file in my project, and not a file that I need to install before my python modules get to use its functionality. Is there some way of doing this ?</p>\n"}, {"tags": ["c", "windows", "winapi"], "answers": [{"comments": [{"owner": {"reputation": 446, "user_id": 4699114, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7c923110bd052844fe8983a7eeb522d8?s=128&d=identicon&r=PG&f=1", "display_name": "Mike32ab", "link": "https://stackoverflow.com/users/4699114/mike32ab"}, "edited": false, "score": 0, "creation_date": 1444217071, "post_id": 32990812, "comment_id": 53806230, "body": "I think that is talking about disabling, which is different from hiding"}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "reply_to_user": {"reputation": 446, "user_id": 4699114, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7c923110bd052844fe8983a7eeb522d8?s=128&d=identicon&r=PG&f=1", "display_name": "Mike32ab", "link": "https://stackoverflow.com/users/4699114/mike32ab"}, "edited": false, "score": 0, "creation_date": 1444217991, "post_id": 32990812, "comment_id": 53806873, "body": "@Rm32a, I see... Then he should use the <code>ShowScrollBar</code> function to remove the scroll bar, however, that function will not automatically re-show the scroll bar when the window&#39;s content extends below or above the window."}], "tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": false, "score": 1, "last_activity_date": 1444216724, "creation_date": 1444216724, "answer_id": 32990812, "question_id": 32990716, "link": "https://stackoverflow.com/questions/32990716/does-setscrollinfo-hide-the-scroll-bar-if-sif-disablenoscroll-is-set/32990812#32990812", "title": "Does SetScrollInfo() hide the scroll bar if SIF_DISABLENOSCROLL is set?", "body": "<p>From Windows Help in VC2005:</p>\n\n<blockquote>\n  <p>This value is used only when setting a scroll bar's parameters. If the scroll bar's new parameters make the scroll bar unnecessary, disable the scroll bar instead of removing it.</p>\n</blockquote>\n\n<p>It seems to imply a \"yes\" to your question: the scroll bar will only be shown when necessary.</p>\n"}], "owner": {"reputation": 446, "user_id": 4699114, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7c923110bd052844fe8983a7eeb522d8?s=128&d=identicon&r=PG&f=1", "display_name": "Mike32ab", "link": "https://stackoverflow.com/users/4699114/mike32ab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 443, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1444216724, "creation_date": 1444216396, "question_id": 32990716, "link": "https://stackoverflow.com/questions/32990716/does-setscrollinfo-hide-the-scroll-bar-if-sif-disablenoscroll-is-set", "title": "Does SetScrollInfo() hide the scroll bar if SIF_DISABLENOSCROLL is set?", "body": "<p>If I have a top level window with built in scroll bars, and the horizontal scroll bar has SIF_DISABLENOSCROLL set, and if I size the window vertically to a smaller size, will <code>SetScrollInfo()</code> hide the horizontal scroll bar if the client area height is smaller than the horizontal scroll bar height?</p>\n"}, {"tags": ["c"], "answers": [{"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1444216254, "post_id": 32990471, "comment_id": 53805688, "body": "This is a flexible array member, he doesn&#39;t need to state a fixed size."}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1444216439, "post_id": 32990471, "comment_id": 53805803, "body": "@Lundin  Not even when he needs it as operand of <code>sizeof</code> ? Then probably he don&#39;t need fixed array member ."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1444216669, "post_id": 32990471, "comment_id": 53805951, "body": "@ameyCU It doesn&#39;t make any sense to use sizeof together with flexible array members."}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1444216725, "post_id": 32990471, "comment_id": 53805990, "body": "@Lundin Well , yes . If he wants to use <code>sizeof</code> , then fixed array member is unnecessary . He will need to specify size."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1444216867, "post_id": 32990471, "comment_id": 53806087, "body": "@ameyCU Well, he needs to actually know what he is doing... I&#39;ll have to assume so. If it turns out he doesn&#39;t have a clue about flexible array members but is just playing &quot;guess the syntax&quot;, then no amount of advise given will help."}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 0, "creation_date": 1444217330, "post_id": 32990471, "comment_id": 53806441, "body": "In my comments I mistakenly refered as <i>fixed</i>  , it is <i>flexible</i> . Sorry for that . I meant flexible array members there."}], "tags": [], "owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "is_accepted": false, "score": 2, "last_activity_date": 1444217097, "last_edit_date": 1444217097, "creation_date": 1444215572, "answer_id": 32990471, "question_id": 32990416, "link": "https://stackoverflow.com/questions/32990416/get-size-of-list-struct-in-struct/32990471#32990471", "title": "get size of list struct in struct", "body": "<p><strong>1.</strong> In <code>struct Class</code> -  </p>\n\n<pre><code>struct Student students[ ];\n /*                     ^ you haven't given any size .  */\n</code></pre>\n\n<p>You need to give number of elements as you use it as operand to <code>sizeof</code> . Example -</p>\n\n<pre><code>struct Student students[5];    // give any desired size \n</code></pre>\n\n<p><strong>2.</strong> Also in your function <code>int countStdInClass</code>-</p>\n\n<pre><code>int sizeOfStd = sizeof(classA-&gt;students)/sizeof(classA-&gt;students[0])\n /*                                                                 ^ ; missing   */\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 0, "last_activity_date": 1444216646, "creation_date": 1444216646, "answer_id": 32990791, "question_id": 32990416, "link": "https://stackoverflow.com/questions/32990416/get-size-of-list-struct-in-struct/32990791#32990791", "title": "get size of list struct in struct", "body": "<p>The C standard explicitly states (6.7.2.1) that a flexible array member isn't counted when taking the <code>sizeof</code> the struct:</p>\n\n<blockquote>\n  <p>In particular, the size of the structure is as if the flexible array\n  member were omitted except that it may have more trailing padding than\n  the omission would imply.</p>\n</blockquote>\n\n<p>It only makes sense to use flexible array members if you allocate memory dynamically. And as for all other cases of dynamic memory, it doesn't make any sense to use the <code>sizeof</code> operator on the allocated segment.</p>\n\n<p>When using the flexible array member <code>students</code>, you have to allocate memory as:</p>\n\n<pre><code>struct Class* c = malloc( sizeof(*c) + n*sizeof(struct Student) );\n</code></pre>\n\n<p>Meaning you already know the size! It is <code>n*sizeof(struct Student)</code>.</p>\n"}], "owner": {"reputation": 893, "user_id": 1434397, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/b1c4898918c8f9b69b91fb79c59cbcab?s=128&d=identicon&r=PG&f=1", "display_name": "Ryo", "link": "https://stackoverflow.com/users/1434397/ryo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1444217097, "creation_date": 1444215419, "question_id": 32990416, "link": "https://stackoverflow.com/questions/32990416/get-size-of-list-struct-in-struct", "title": "get size of list struct in struct", "body": "<p>I have following structs:</p>\n\n<pre><code>struct Student{\n char *name;\n int age;\n};\nstruct Class{\n char *class_name;\n struct Student students[];\n};\n</code></pre>\n\n<p>And a counting function  :</p>\n\n<pre><code>int countStdInClass(struct Class *classA){\n  int sizeOfStd = sizeof(classA-&gt;students)/sizeof(classA-&gt;students[0])\n  return sizeOfStd ;\n}\n</code></pre>\n\n<p>When compiling ,an error occurrence :</p>\n\n<pre><code>invalid application of \u2018sizeof\u2019 to incomplete type \u2018struct Student[]'\n</code></pre>\n\n<p>Please help me correct it .\nThanks.</p>\n"}, {"tags": ["c", "function", "structure"], "comments": [{"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 1, "creation_date": 1444215350, "post_id": 32990348, "comment_id": 53805136, "body": "Why did you put function prototype inside other functions ?"}, {"owner": {"reputation": 165, "user_id": 4824993, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/RBt6B.jpg?s=128&g=1", "display_name": "Ducol", "link": "https://stackoverflow.com/users/4824993/ducol"}, "reply_to_user": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 0, "creation_date": 1444220841, "post_id": 32990348, "comment_id": 53808860, "body": "@ameyCU: I don&#39;t like this type of prototype usage, but this is the way they use it in the book, saying that it is just for safety"}], "answers": [{"tags": [], "owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "is_accepted": false, "score": 2, "last_activity_date": 1444215688, "creation_date": 1444215688, "answer_id": 32990503, "question_id": 32990348, "link": "https://stackoverflow.com/questions/32990348/functions-structures-compound-literals-incorrect-output/32990503#32990503", "title": "Functions, structures, compound literals, incorrect output", "body": "<p>You use the format specifier <code>%i</code> when you scan the date. This specifier reads decimal integers, but accepts the forms that C code also accepts, namely hex ( <code>0xff</code>) and octal (<code>0377</code>).</p>\n\n<p>The inputs <code>08</code> and <code>09</code> are treated as octal, but they are not legal octal numbers, because octal has no digit 8 or 9. Scanning stops at the first non-octal digit. (By the way, you don't check that <code>sscanf</code> returns 3.)</p>\n\n<p>The remedy is to replace the <code>%i</code> format with <code>%d</code>, which scans <code>08</code> as human readers would expect.</p>\n"}, {"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1444217241, "post_id": 32990634, "comment_id": 53806374, "body": "Solve this by using <code>%d</code> and not <code>%i</code>."}], "tags": [], "owner": {"reputation": 147, "user_id": 5412299, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1WJTD.jpg?s=128&g=1", "display_name": "atamit81", "link": "https://stackoverflow.com/users/5412299/atamit81"}, "is_accepted": false, "score": 0, "last_activity_date": 1444216084, "creation_date": 1444216084, "answer_id": 32990634, "question_id": 32990348, "link": "https://stackoverflow.com/questions/32990348/functions-structures-compound-literals-incorrect-output/32990634#32990634", "title": "Functions, structures, compound literals, incorrect output", "body": "<p>By presenting input as 09 you are trigering input in octal base. Remove the leading 0 in month input. <br>\n<a href=\"http://www.cplusplus.com/reference/cstdio/scanf/\" rel=\"nofollow\">http://www.cplusplus.com/reference/cstdio/scanf/</a></p>\n"}], "owner": {"reputation": 165, "user_id": 4824993, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/RBt6B.jpg?s=128&g=1", "display_name": "Ducol", "link": "https://stackoverflow.com/users/4824993/ducol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1444216084, "creation_date": 1444215200, "question_id": 32990348, "link": "https://stackoverflow.com/questions/32990348/functions-structures-compound-literals-incorrect-output", "title": "Functions, structures, compound literals, incorrect output", "body": "<p>Please, take a look at a program that is supposed to deliver tomorrow's date. The program is from a textbook, and uses three functions. \nUnfortunately, it delivers a wrong output:</p>\n\n<pre><code>Enter today's date (mm dd yyyy):  09 25 1977\nTomorrow's date is 00/10/25.\n</code></pre>\n\n<p>But sometimes it does deliver a correct output:</p>\n\n<pre><code>Enter today's date (mm dd yyyy):  10 07 2015\nTomorrow's date is 10/08/15.\n</code></pre>\n\n<p>I don't see why this happens.\nHere is the program:</p>\n\n<pre><code>// Program to determine tomorrow's date\n\n#include &lt;stdio.h&gt;\n#include &lt;stdbool.h&gt;\n\nstruct date\n{\n    int month;\n    int day;\n    int year;\n};\n\nint main (void)\n{\n    struct date today1, tomorrow;\n    struct date tomorrow_date (struct date today);\n\n    printf(\"Enter today's date (mm dd yyyy):  \");\n    scanf(\"%i%i%i\", &amp;today1.month, &amp;today1.day, &amp;today1.year);\n\n    tomorrow = tomorrow_date (today1);\n\n    printf (\"Tomorrow's date is %.2i/%.2i/%.2i.\\n\", tomorrow.month, tomorrow.day, tomorrow.year % 100);\n\n    return 0;\n}\n// Function to find the number of days in a month\nint number_of_days (struct date d)\n{\n    int days;\n    bool is_leap (struct date d);\n\n    const int days_per_month[12] = {31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};\n\n    if (is_leap (d) == true &amp;&amp; d.month == 2)\n        days = 29;\n    else\n        days = days_per_month[d.month - 1];\n\n    return days;\n}\n\n// Function to determine if it's a leap year\n\nbool is_leap (struct date d)\n{\n    bool leap_year;\n\n    if ( (d.year % 4 == 0 &amp;&amp; d.year % 100 != 0) || (d.year % 400 == 0))\n        leap_year = true;\n    else\n        leap_year = false;\n\n    return leap_year;\n}\n\n// Function to determine tomorrow's date using compound literals\n\nstruct date tomorrow_date (struct date today)\n{\n    struct date tomorrow;\n    int number_of_days(struct date d);\n\n    if (today.day != number_of_days(today))\n        tomorrow = (struct date) {today.month, today.day + 1, today.year};\n\n    else if (today.month == 12) // end of year\n        tomorrow = (struct date) {1, 1, today.year + 1};\n\n    else // end of month\n        tomorrow = (struct date) {today.month + 1, 1, today.year};  \n\n    return tomorrow;\n}\n</code></pre>\n\n<p>Thank you!           </p>\n"}, {"tags": ["c", "binary", "gdb", "embedded"], "comments": [{"owner": {"reputation": 9246, "user_id": 1041868, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/6d476b07acb3919c356015e11ad97608?s=128&d=identicon&r=PG", "display_name": "bph", "link": "https://stackoverflow.com/users/1041868/bph"}, "edited": false, "score": 2, "creation_date": 1444217886, "post_id": 32989720, "comment_id": 53806799, "body": "maybe use the x (examine) cmd rather than print? given an address it will print the address and the value at the address in binary, in this case showing all 32 bits i.e. (gdb)x &amp;my_uint32 -&gt; 0x48000000: 00101000000000000000010010100000, not quite what you want but possibly a bit closer - seems odd there doesn&#39;t seem to be a way of specifying the format for the print/t option"}], "answers": [{"comments": [{"owner": {"reputation": 35543, "user_id": 149530, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b6c8b04130af49735de5be666d67c00?s=128&d=identicon&r=PG", "display_name": "Michael Foukarakis", "link": "https://stackoverflow.com/users/149530/michael-foukarakis"}, "edited": false, "score": 0, "creation_date": 1444222674, "post_id": 32992410, "comment_id": 53810299, "body": "Alternatively, and with the same effect: <code>x&#47;4tb 0x48000000 </code>"}], "tags": [], "owner": {"reputation": 1327, "user_id": 2549230, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/33ce71263b19cb19ea5da71f661336de?s=128&d=identicon&r=PG", "display_name": "d6bels", "link": "https://stackoverflow.com/users/2549230/d6bels"}, "is_accepted": true, "score": 4, "last_activity_date": 1444221406, "creation_date": 1444221406, "answer_id": 32992410, "question_id": 32989720, "link": "https://stackoverflow.com/questions/32989720/gdb-print-binary-with-leading-zeros/32992410#32992410", "title": "GDB print binary with leading zeros", "body": "<p>You may want to try the <a href=\"http://ftp.gnu.org/old-gnu/Manuals/gdb/html_chapter/gdb_9.html#SEC56\" rel=\"nofollow\"><code>x</code> (examine) command</a>.</p>\n\n<p>Then use it like this:</p>\n\n<pre><code>x /w 0x48000000\n---&gt; 0x48000000: 00101000000000000000010010100000\n</code></pre>\n\n<p>You can even use the other format parameters <code>b</code>, <code>h</code> and <code>g</code> to print different sizes.</p>\n"}], "owner": {"reputation": 103, "user_id": 5417905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9261e71e306f2a39dde7393953c5ff6?s=128&d=identicon&r=PG&f=1", "display_name": "A. Faure", "link": "https://stackoverflow.com/users/5417905/a-faure"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1937, "favorite_count": 2, "accepted_answer_id": 32992410, "answer_count": 1, "score": 8, "last_activity_date": 1444221406, "creation_date": 1444213336, "question_id": 32989720, "link": "https://stackoverflow.com/questions/32989720/gdb-print-binary-with-leading-zeros", "title": "GDB print binary with leading zeros", "body": "<p>I am trying to print a 32bits register within GDB using the command:</p>\n\n<pre><code>define gpioa_moder\n    print /t *(uint32_t*)0x48000000\nend\n</code></pre>\n\n<p>This is what I get:</p>\n\n<blockquote>\n  <p>101000000000000000010010100000</p>\n</blockquote>\n\n<p>However, I'd like to keep the two leading zeros missing like this: </p>\n\n<blockquote>\n  <p><strong>00</strong>101000000000000000010010100000</p>\n</blockquote>\n\n<p>Thanks</p>\n"}, {"tags": ["objective-c", "c"], "comments": [{"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 0, "creation_date": 1444213204, "post_id": 32989546, "comment_id": 53803890, "body": "<code>(mach_msg_header_t)</code> is a type cast."}, {"owner": {"reputation": 1, "user_id": 4805810, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gyURRpS_nbQ/AAAAAAAAAAI/AAAAAAAAAEc/0yh2HDKaUJc/photo.jpg?sz=128", "display_name": "Sawoski Jake", "link": "https://stackoverflow.com/users/4805810/sawoski-jake"}, "reply_to_user": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 0, "creation_date": 1444228865, "post_id": 32989546, "comment_id": 53815126, "body": "@KlasLindb&#228;ck Thanks, but I knew it&#39;s a type cast. so I&#39;m wondering the code of  &lt;i&gt;(mach_msg_header_t) {     .msgh_remote_port = port,   ..... };  &lt;/i&gt; is a function? Or struct ? and &quot; .msgh_remote_port &quot; means what? I&#39;m really confusing."}, {"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 0, "creation_date": 1444289502, "post_id": 32989546, "comment_id": 53842562, "body": "It seems to be struct field assignment. The <code>mach_msg_header_t</code> struct has fields named <code>msgh_remote_port</code>, <code>msgh_local_port</code> etc."}, {"owner": {"reputation": 1, "user_id": 4805810, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gyURRpS_nbQ/AAAAAAAAAAI/AAAAAAAAAEc/0yh2HDKaUJc/photo.jpg?sz=128", "display_name": "Sawoski Jake", "link": "https://stackoverflow.com/users/4805810/sawoski-jake"}, "reply_to_user": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 0, "creation_date": 1444459853, "post_id": 32989546, "comment_id": 53922909, "body": "@KlasLindb&#228;ck Thanks! I understand now why the struct assignment is written like this."}], "answers": [{"tags": [], "owner": {"reputation": 2093, "user_id": 3153883, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/xVr3z.jpg?s=128&g=1", "display_name": "LawfulEvil", "link": "https://stackoverflow.com/users/3153883/lawfulevil"}, "is_accepted": false, "score": 0, "last_activity_date": 1460740487, "creation_date": 1460740487, "answer_id": 36653166, "question_id": 32989546, "link": "https://stackoverflow.com/questions/32989546/what-is-the-grammar-of-rule-of-this-code-in-objective-c-or-in-c-language/36653166#36653166", "title": "What is the grammar of rule of this code in Objective-C or in C language?", "body": "<p>The header is assigned to the type-casted mach_msg_header_t pseudo constructor that initializes some of the fields.   A break down of the structure is available here : <a href=\"http://web.mit.edu/darwin/src/modules/xnu/osfmk/man/\" rel=\"nofollow\">http://web.mit.edu/darwin/src/modules/xnu/osfmk/man/</a> (partially pasted below)</p>\n\n<pre><code>typedef struct {\n    mach_msg_bits_t msgh_bits;\n    mach_msg_size_t msgh_size;\n    mach_port_t msgh_remote_port;\n    mach_port_t msgh_local_port;\n    mach_port_seqno_t msgh_seqno;\n    mach_msg_id_t msgh_id;\n} mach_msg_header_t;\n</code></pre>\n\n<p>The bit you referenced, does the assignment of the low level fields in the structure and copy into the header.</p>\n\n<pre><code>message.header = (mach_msg_header_t) {\n\n    .msgh_remote_port = port,\n    .msgh_local_port = MACH_PORT_NULL,\n    .msgh_bits = MACH_MSGH_BITS(MACH_MSG_TYPE_COPY_SEND, 0),\n    .msgh_size = sizeof(message)\n\n};\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4805810, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gyURRpS_nbQ/AAAAAAAAAAI/AAAAAAAAAEc/0yh2HDKaUJc/photo.jpg?sz=128", "display_name": "Sawoski Jake", "link": "https://stackoverflow.com/users/4805810/sawoski-jake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1460740487, "creation_date": 1444212700, "last_edit_date": 1444212856, "question_id": 32989546, "link": "https://stackoverflow.com/questions/32989546/what-is-the-grammar-of-rule-of-this-code-in-objective-c-or-in-c-language", "title": "What is the grammar of rule of this code in Objective-C or in C language?", "body": "<p>I'm reading the code of <a href=\"http://nshipster.com/inter-process-communication/\" rel=\"nofollow\">Mach Ports</a>, I want to know what's the paradigm of a piece of code. I mean I knew the grammar of struct of objective-c, but I don't know what grammar of <code>message.header = (mach_msg_header_t) {......};</code></p>\n\n<p>The complete code is below.</p>\n\n<pre><code>natural_t data;\n\nmach_port_t port;\n\nstruct {\n\n    mach_msg_header_t header;\n    mach_msg_body_t body;\n    mach_msg_type_descriptor_t type;\n\n} message;\n\nmessage.header = (mach_msg_header_t) {\n\n    .msgh_remote_port = port,\n    .msgh_local_port = MACH_PORT_NULL,\n    .msgh_bits = MACH_MSGH_BITS(MACH_MSG_TYPE_COPY_SEND, 0),\n    .msgh_size = sizeof(message)\n\n};\n</code></pre>\n"}, {"tags": ["c", "visual-studio", "parallel-processing", "openmp"], "comments": [{"owner": {"reputation": 8381, "user_id": 5239503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MqgeX.jpg?s=128&g=1", "display_name": "Gilles", "link": "https://stackoverflow.com/users/5239503/gilles"}, "edited": false, "score": 0, "creation_date": 1444212156, "post_id": 32989088, "comment_id": 53803247, "body": "Nicely presented question. I didn&#39;t look very deeply yet, but I see something very very fishy here: you have <code>i</code> that is both a global <code>threadprivate</code> variable and the <code>shared</code> index of your parallelised loop. That cannot be right, can it?"}, {"owner": {"reputation": 1096, "user_id": 5150303, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5IihF.jpg?s=128&g=1", "display_name": "Daniel R. Livingston", "link": "https://stackoverflow.com/users/5150303/daniel-r-livingston"}, "reply_to_user": {"reputation": 8381, "user_id": 5239503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MqgeX.jpg?s=128&g=1", "display_name": "Gilles", "link": "https://stackoverflow.com/users/5239503/gilles"}, "edited": false, "score": 0, "creation_date": 1444212641, "post_id": 32989088, "comment_id": 53803545, "body": "@Gilles Thanks for the comment! Are you sure? I only see <code>j</code> declared in <code>threadprivate</code>"}, {"owner": {"reputation": 8381, "user_id": 5239503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MqgeX.jpg?s=128&g=1", "display_name": "Gilles", "link": "https://stackoverflow.com/users/5239503/gilles"}, "edited": false, "score": 0, "creation_date": 1444214196, "post_id": 32989088, "comment_id": 53804452, "body": "Sorry again a typo, my bad. What I meant is that <code>i</code> has to be <code>private</code> or <code>threadprivate</code>, but is cannot be <code>shared</code>."}], "answers": [{"comments": [{"owner": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "edited": false, "score": 1, "creation_date": 1444242949, "post_id": 32994073, "comment_id": 53824435, "body": "From <a href=\"http://www.openmp.org/mp-documents/cspec20.pdf\" rel=\"nofollow noreferrer\">OpenMP for C/C++ v2.0</a>, regarding the loop variable: <i>&quot;A signed integer variable. If this variable would otherwise be shared, it is implicitly made private for the duration of the <code>for</code>.&quot;</i> Later versions of the specification add the restriction that the loop variable may not be listed in a <code>shared</code> clause: <i>&quot;The loop iteration variable(s) in the associated for-loop(s) of a <code>for</code> or <code>parallel for</code> construct may be listed in a <code>private</code> or <code>lastprivate</code> clause.&quot;</i> Visual Studio implements OpenMP 2.0 only."}, {"owner": {"reputation": 1096, "user_id": 5150303, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5IihF.jpg?s=128&g=1", "display_name": "Daniel R. Livingston", "link": "https://stackoverflow.com/users/5150303/daniel-r-livingston"}, "edited": false, "score": 0, "creation_date": 1444251312, "post_id": 32994073, "comment_id": 53829401, "body": "Thanks for your help and thorough answer @Gilles. I changed <code>i</code> from shared to private, yet still get the unhanded exception error, with the compiler salty at the <code>t</code> structure"}], "tags": [], "owner": {"reputation": 8381, "user_id": 5239503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MqgeX.jpg?s=128&g=1", "display_name": "Gilles", "link": "https://stackoverflow.com/users/5239503/gilles"}, "is_accepted": true, "score": 3, "last_activity_date": 1444225931, "creation_date": 1444225931, "answer_id": 32994073, "question_id": 32989088, "link": "https://stackoverflow.com/questions/32989088/openmp-access-violation-and-other-errors/32994073#32994073", "title": "OpenMP: Access violation and other errors", "body": "<p>The code is too big for a proper testing and the use of global variables really doesn't help to figure out the data dependencies. However I can just make a few remarks:</p>\n\n<ul>\n<li><p><code>i</code> is declared <code>shared</code> whereas it is the index of the parallelised loop. This is wrong! If there is a variable that you really want to be <code>private</code> in a <code>omp for</code> loop, it is the loop index. I didn't find anything clear about that in the OpenMP standard for C and C++, whereas for Fortran, the loop index (and the ones of all enclosed loops) is implicitly privatised. Nonetheless, the Intel compiler gives an error while attempting to explicitly declare <code>shared</code> such an index:</p>\n\n<pre><code>sharedi.cc(11): warning #2555: static control variable for parallel loop\n      for ( i=0; i&lt;10; i++ ) {\n                       ^\nsharedi.cc(10): error: index variable \"i\" of for statement following an OpenMP for pragma must be private\n      #pragma omp parallel for shared(i) schedule(static)\n      ^\ncompilation aborted for sharedi.cc (code 2)\n</code></pre>\n\n<p>by the mean-time, gcc version 5.1.0 doesn't emit any warning or error for the same code, and acts as if the variable had been declared <code>private</code>... I tend to find Intel's compiler's behaviour more reasonable, but I'm not 100% sure which one is correct. What I know however is that declaring <code>i</code> <code>shared</code> is definitely a very very bad idea (and even a bug AFAIC). So I feel like this is a grey area where your compiler may or may not do a sensible job, which could all by itself explain most of your problems.</p></li>\n<li><p>You seem to output your data into files, which names might conflict across threads. Be careful with that as you might end-up with a big mess...</p></li>\n<li><p>Your printing is very likely to be all messed-up. I don't know what importance you put in that, but that won't be pretty the way it is written for now.</p></li>\n</ul>\n\n<p>In summary, your code is just to tangled for me to get a clear view on what's happening. Try to address at least the two first points I mentioned, it might be sufficient for getting it to \"<em>work</em>\". However, I couldn't encourage you enough to <strong>clean the code up</strong> and to <strong>get rid of your global variables</strong>. Likewise, try to only declare your variables as late in the sources as possible, since this reduces the need of declaring them <code>private</code> for OpenMP, and it improves greatly readability.</p>\n\n<p>Good luck with your debugging.</p>\n"}], "owner": {"reputation": 1096, "user_id": 5150303, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5IihF.jpg?s=128&g=1", "display_name": "Daniel R. Livingston", "link": "https://stackoverflow.com/users/5150303/daniel-r-livingston"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1521, "favorite_count": 0, "accepted_answer_id": 32994073, "answer_count": 1, "score": 2, "last_activity_date": 1453035257, "creation_date": 1444211429, "last_edit_date": 1453035257, "question_id": 32989088, "link": "https://stackoverflow.com/questions/32989088/openmp-access-violation-and-other-errors", "title": "OpenMP: Access violation and other errors", "body": "<h2>Preface</h2>\n\n<p>Recently, I implemented OpenMP into our group's project code. Main runs in two for loops; the outer controls the 'run', while the inner controls the 'generation.' Generations are completely independent from different runs, though dependent on other generations in the same run.</p>\n\n<p>The idea is to parallelize the outer loop, the 'run' loop, while letting each thread maintain evolution of generations on whatever specific run number it was assigned to.</p>\n\n<h2>The Problem</h2>\n\n<p>When setting <code>OMP_THREADS = 1</code> , i.e. letting the program run with only one thread, it runs without a hitch. If this number is any higher, I get the following error: </p>\n\n<p><code>Unhandled exception at 0x00F5C4C3 in projectc.exe: 0xC0000005: Access violation writing location 0x00000072.</code></p>\n\n<p>with the following appearing in the \"Autos\" section of Visual Studio:</p>\n\n<p><a href=\"https://i.stack.imgur.com/djsQD.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/djsQD.jpg\" alt=\"Visual Studio error\"></a></p>\n\n<p>(Note: <code>t</code>, <code>t-&gt;active_cells</code>, and <code>t-&gt;cellx</code> are \"error red\" while the rest are white when I get this error)</p>\n\n<p>If I change <code>default(none)</code> to <code>default(shared)</code> in the <code>#pragma</code> right above the outer loop, and remove <code>t</code>, <code>s</code>, and <code>bn</code> from <code>threadprivate</code> (these are structures initialized in external files), then the program runs normally for a generation on each thread before freezing (though CPU activity shows that both threads are still running with the same intensity as before).</p>\n\n<h2>Attempts at Solutions</h2>\n\n<p>I cannot figure out what is going wrong. Trying a simple <code>#pragma omp parallel for</code> outside of the outer loop of course doesn't work, but I have also tried declaring all of main as <code>#pragma omp parallel</code> and the outer loop as <code>#pragma omp for</code>. A few other subtle approaches were tried like this as well, which leads me to the conclusions that it must be something to do with the way the variables are shared between threads...because all runs, and so threads, are independent, really all of the variables <em>could</em> be set as private; though there is some overlap that you see reflected in <code>shared(..)</code>.</p>\n\n<p>The code is attached below.</p>\n\n<h1>main.c</h1>\n\n<pre><code>/* General Includes */\n#include &lt;stdio.h&gt; \n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;time.h&gt;\n#include &lt;omp.h&gt;\n\n/* Project Includes */\n#include \"main.h\"\n#include \"randgen.h\"\n#include \"board7.h\"\n#include \"tissue.h\"\n#include \"io.h\"\n\n#define BitFlp(arg,posn) ((arg) ^ (1L &lt;&lt; (posn)))\n#define BitClr(arg,posn) ((arg) &amp; ~(1L &lt;&lt; (posn)))\n\n#define display_dbg 1 //Controls whether print statements in main.c are displayed.\n#define display_time 1 //Controls whether timing print statements are executed.\n#define BILLION 1000000000L;\n\n#define num_runs 10 //Controls number of runs per simulation\n#define num_gens 4000//Controls number of generations per run\n\n#define OMP_THREADS 1 // Max number of threads used if OpenMP is enabled\n\nint n, i, r, j, z, x, sxa, y, flagb, m;\nint j1, j2;\nchar a;\nint max_fit_gen, collect_data, lb_run, w, rn, sx;\nfloat f, max_fitness;\ntissuen *fx;\ninput_vec dx;\ncalookup ra;\n\n#pragma omp threadprivate(n, r, j, x, z, sxa, y, flagb, m, \\\n        j1, j2, a, max_fit_gen, collect_data, lb_run, w, \\\n    rn, sx, f, max_fitness, fx, dx, ra, run_data, t, s, bn)\n\nint main(int argc, char *argv[])\n{\n\n    int* p = 0x00000000;   // pointer to NULL\n        char sa[256];\n    char ss[10];\n    long randn;\n    boardtable ba;\n    srand((unsigned)time(NULL));\n    init_mm();\n    randn = number_range(1, 100);\n\n    #ifdef OS_WINDOWS\n    // Timing parameters\n        LARGE_INTEGER clk_freq;\n    LARGE_INTEGER t1, t2, t3;\n    #endif\n\n    #ifdef OS_UNIX\n    struct timespec clk_freq, t1, t2, t3;\n    #endif\n\n    double avg_gen_time, avg_run_time, run_time, sim_time, est_run_time, est_sim_time;\n\n    // File System and IO Parameters\n    char cwd[FILENAME_MAX];\n    getcwd(&amp;cwd, sizeof(cwd));\n    char curState[FILENAME_MAX];\n    char recState[FILENAME_MAX];\n    char recMode[FILENAME_MAX];\n    char curGen[FILENAME_MAX];\n    char curRun[FILENAME_MAX];\n    char genTmp[FILENAME_MAX];\n\n    strcpy(curState, cwd);\n    strcpy(recState, cwd);\n    strcpy(recMode, cwd);\n    strcpy(curGen, cwd);\n    strcpy(curRun, cwd);\n    strcpy(genTmp, cwd);\n\n    #ifdef OS_WINDOWS\n    strcat(curState, \"\\\\current.txt\");\n    strcat(recState, \"\\\\recover.txt\");\n    strcat(recMode, \"\\\\recovermode.txt\");\n    strcat(curGen, \"\\\\gen.txt\");\n    strcat(curRun, \"\\\\run\");\n    strcat(genTmp, \"\\\\tmp\\\\gentmp\");\n    #endif\n\n    #ifdef OS_UNIX\n    strcat(curState, \"/current.txt\");\n    strcat(recState, \"/recover.txt\");\n    strcat(recMode, \"/recovermode.txt\");\n    strcat(curGen, \"/gen.txt\");\n    strcat(curRun, \"/run\");\n    strcat(genTmp, \"/tmp/gentmp\");\n    #endif\n\n    //Read current EA run variables (i.e. current run number, generation, recover mode status)\n    z = readorcreate(curState);\n    x = readorcreate(recState);\n    sxa = readorcreate(recMode);\n    y = readorcreate(curGen);\n\n    //Initialize simulation parameters\n    s.count = 0;\n\n    s.x[0] = 0;\n    s.y[0] = 0;\n\n    s.addvec[0] = 0;\n\n    s.bestnum = 0;\n    s.countb = 0;\n    s.count = 0;\n    initialize_sim_param(&amp;s, 0, 200);\n\n    collect_data = 0;\n\n    //Build a collection of experiment initial conditions\n    buildboardcollection7(&amp;bn);\n\n    //Determine clock frequency.\n    #ifdef OS_WINDOWS\n    if (display_time)   get_frequency(&amp;clk_freq);\n    #endif\n\n    #ifdef OS_UNIX\n    if (display_time)   get_frequency(CLOCK_REALTIME, &amp;clk_freq);\n    #endif\n\n\n//Start simulation timer\n    #ifdef OS_WINDOWS\n    if (display_time)   read_clock(&amp;t1);\n    #endif\n\n    #ifdef OS_UNIX\n    if (display_time)   read_clock(CLOCK_REALTIME, &amp;t1);\n    #endif\n\n#pragma omp parallel for schedule(static) default(none) num_threads(OMP_THREADS) \\\n            private(sa, ss, randn, ba, t2, t3, avg_gen_time, avg_run_time, sim_time, \\\n        run_time, est_run_time, est_sim_time) \\\n            shared(i, cwd, recMode, curRun, curGen, curState, genTmp, clk_freq, t1)\nfor (i = z; i &lt; num_runs; i++)\n{\n\n\n    // randomly initialize content of  tissue population\n    initialize_tissue_pop_s2(&amp;(t.tgen[0]), &amp;s);\n    initialize_tissue_pop_s2(&amp;(t.tgen[1]), &amp;s);\n\n    max_fit_gen = 0;\n    max_fitness = 0.0;\n    flagb = 0;\n\n    if ((i == z) &amp;&amp; (x == 1))\n    {\n        w = y;\n    }\n    else\n    {\n        w = 0;\n    }\n\n    rn = 200;\n    j1 = 0;\n\n    s.run_num = i;\n    s.maxfitness = 0.0;\n\n    //Start run timer\n        #ifdef OS_WINDOWS\n    if (display_time)   read_clock(&amp;t2);\n        #endif\n\n        #ifdef OS_UNIX\n    if (display_time)   read_clock(CLOCK_REALTIME, &amp;t2);\n        #endif\n\n        #if defined(_OPENMP)\n    printf(\"\\n ======================================= \\n\");\n    printf(\"  OpenMP Status Message \\n\");\n    printf(\"\\n --------------------------------------- \\n\");\n    printf(\"| RUN %d : \\n\", i);\n    printf(\"|   New Thread Process (Thread %d) \\n\", omp_get_thread_num());\n    printf(\"|   Available Threads: %d of %d \\n\", omp_get_num_threads(), omp_get_max_threads());\n    printf(\" ======================================= \\n\\n\");\n        #endif\n\n    for (j = w; j &lt; num_gens; j++)\n    {\n\n        // Flips on lightboard data collection. See board7.h.\n        if (enable_collection == 1) {\n            if ((i &gt;= run_collect) &amp;&amp; (j &gt;= gen_collect)) { collect_data = 1; }\n        }\n\n        sx = readcurrent(recMode);\n\n        // Pseudo loop code. Uses bit flipping to cycle through boards.\n        j2 = ~(j1)&amp; 1;\n        if (display_dbg)    printf(\"start evaluation...\\n\");\n\n        // evaluate tissue\n        // Most of the problems in the code happen here.\n        evaluatepopulation_tissueb(&amp;(t.tgen[j1]), &amp;ra, &amp;bn, &amp;s, j, i);\n        if (display_dbg)    printf(\"\\n\");\n\n        // display fitness stats to screen\n        printmaxfitness(&amp;(t.tgen[j1]), i, j, j1, &amp;cwd);\n\n        if (display_dbg)    printf(\"start tournament...\\n\");\n\n        // Perform tournament selection and have children ready for evaluation\n        // Rarely have to touch. Figure out best parents. Crossover operator.\n        // Create a subgroup. Randomly pick individuals from the population.\n        // Pick fittest individuals out of the random group.\n        // 2 parents and 2 children. Children replace parents.\n        tournamentsel_tissueb(&amp;(t.tgen[j1]), &amp;(t.tgen[j2]), &amp;s);\n\n        printf(\"Tournament selection complete.\\n\");\n\n        // keep track of best fitness during run\n        if (t.tgen[j1].fit_max &gt; max_fitness)\n        {\n            max_fitness = t.tgen[j1].fit_max;\n            max_fit_gen = j;\n        }\n\n        if ((t.tgen[j1].fit_max &gt; 99.0) &amp;&amp; (flagb == 0))\n        {\n            flagb = 1;\n            run_data.fit90[i] = t.tgen[j1].fit_max;\n            run_data.gen90[i] = j;\n        }\n\n        sa[0] = 0;\n        strcat(sa, curRun);\n        sprintf(ss, \"%d\", i);\n        strcat(sa, ss);\n        strcat(sa, \".txt\");\n\n        printf(\"Write fitness epc...\\n\");\n\n        // write fitness stats to file\n        writefitnessepc(sa, &amp;(t), j1, j);\n\n        printf(\"Write fitness complete.\\n\");\n\n        // trunk for saving population to disk\n        if (sx != 0)\n        {\n            sa[0] = 0;\n            strcat(sa, genTmp);\n            sprintf(ss, \"%d\", 1);\n            strcat(sa, ss);\n            strcat(sa, \".txt\");\n\n            if (display_dbg)    printf(\"Saving Current Run\\n\");\n        }\n\n        //update current generation to file\n        writecurrent(curGen, j + 1);\n\n        if (display_time &amp;&amp; j &gt; 0 &amp;&amp; (j % 10 == 0 || j % (num_gens - 1) == 0))\n        {\n            #ifdef OS_WINDOWS\n            read_clock(&amp;t3);\n            sim_time = (t3.QuadPart - t1.QuadPart) / clk_freq.QuadPart;\n            run_time = (t3.QuadPart - t2.QuadPart) / clk_freq.QuadPart;\n            #endif\n\n            #ifdef OS_UNIX\n            read_clock(CLOCK_REALTIME, &amp;t3);\n            sim_time = (double)(t3.tv_sec - t1.tv_sec);\n            run_time = (double)(t3.tv_sec - t2.tv_sec);\n            #endif\n\n            avg_gen_time = run_time / (j + 1);\n            est_run_time = avg_gen_time * (num_gens - j);\n            avg_run_time = est_run_time + run_time;\n            est_sim_time = (est_run_time * (num_runs - i)) / (i + 1);\n            printf(\"\\n============= Timing Data =============\\n\");\n            printf(\"Time in Simulation: %.2fs\\n\", sim_time);\n            printf(\"Time in Run: %.2fs\\n\", run_time);\n            printf(\"Est. Time to Complete Run: %.2fs\\n\", est_run_time);\n            printf(\"Est. Time to Complete Simulation: %.2fs\\n\\n\", est_sim_time);\n            printf(\"Average Time Per Generation: %.2fs/gen\\n\", avg_gen_time);\n            printf(\"Average Time Per Run: %.2fs/run\\n\", avg_run_time);\n            printf(\"=======================================\\n\\n\");\n\n            if (j % (num_gens - 1) == 0) {\n\n            }\n        }\n\n            //Display Position Board\n            //displayboardl(&amp;bn.board[0]);\n\n            j1 = j2;\n        }\n    }\n}\n</code></pre>\n\n<h1>Structures</h1>\n\n<pre><code>typedef struct boardcollectionn\n{\n    boardtable board[boardnumb];\n\n} boardcollection;\n\nboardcollection bn;\n\ntypedef struct tissue_gent\n{\n    tissue_population tgen[2]; \n\n} tissue_genx;\n\ntypedef struct sim_paramt   //struct for storing simulation parameters\n{\nint penalty;\nint addnum[cell_numz];\nint x[9];\nint y[9];\nuint8_t addvec[9];\nuint8_t parenta[50];\nuint8_t parentb[50];\nint errorstatus;\nint ones[outputnum][5000];\nint zeros[outputnum][5000];\nint probcount;\nint num;\nint numb;\nint numc;\nint numd;\nint nume;\nint numf;\nint bestnum;\nint count;\nint col_flag;\nint behaviour[outputnum];\nint memm[4];\nint sel;\nint seldecnum;\nint seldec[200];\nint selx[200];\nint sely[200];\nint selz[200];\nint countb;\nfloat maxfitness;\nfloat oldmaxfitness;\nint run_num;\nint collision;\n\n} sim_param;\n\ntissue_genx t;\nsim_param s;\n</code></pre>\n"}, {"tags": ["python", "c", "python-3.x", "shared-libraries", "ctypes"], "comments": [{"owner": {"reputation": 177, "user_id": 2389037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a018335b702f53ef4093f2a06a5d1c51?s=128&d=identicon&r=PG", "display_name": "Pim", "link": "https://stackoverflow.com/users/2389037/pim"}, "edited": false, "score": 0, "creation_date": 1444211189, "post_id": 32988834, "comment_id": 53802607, "body": "It might be worth adding the fact that you are using ctypes, so you are calling a C function rather than a C++ function."}, {"owner": {"reputation": 2439, "user_id": 4592067, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Vm7n4.png?s=128&g=1", "display_name": "imrek", "link": "https://stackoverflow.com/users/4592067/imrek"}, "reply_to_user": {"reputation": 177, "user_id": 2389037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a018335b702f53ef4093f2a06a5d1c51?s=128&d=identicon&r=PG", "display_name": "Pim", "link": "https://stackoverflow.com/users/2389037/pim"}, "edited": false, "score": 0, "creation_date": 1444211367, "post_id": 32988834, "comment_id": 53802728, "body": "OK, I&#39;ll correct this."}, {"owner": {"reputation": 3004, "user_id": 4166517, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/667edb95b14a0c7d1a8c7307491bf438?s=128&d=identicon&r=PG&f=1", "display_name": "u354356007", "link": "https://stackoverflow.com/users/4166517/u354356007"}, "reply_to_user": {"reputation": 177, "user_id": 2389037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a018335b702f53ef4093f2a06a5d1c51?s=128&d=identicon&r=PG", "display_name": "Pim", "link": "https://stackoverflow.com/users/2389037/pim"}, "edited": false, "score": 0, "creation_date": 1444211441, "post_id": 32988834, "comment_id": 53802781, "body": "@Pim @DrunkenMaster <code>lem_lemmatize_word</code> is actually defined as <code>extern &quot;C&quot;</code> in the sources, so calling it via ctypes shouldn&#39;t be a problem."}, {"owner": {"reputation": 2439, "user_id": 4592067, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Vm7n4.png?s=128&g=1", "display_name": "imrek", "link": "https://stackoverflow.com/users/4592067/imrek"}, "edited": false, "score": 0, "creation_date": 1444212026, "post_id": 32988834, "comment_id": 53803148, "body": "I still don&#39;t see why the segmentation fault happens, I tried passing hard-coded <code>b&#39;string&#39;</code> and <code>u&#39;string&#39;</code>, too. They don&#39;t make a difference."}, {"owner": {"reputation": 177, "user_id": 2389037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a018335b702f53ef4093f2a06a5d1c51?s=128&d=identicon&r=PG", "display_name": "Pim", "link": "https://stackoverflow.com/users/2389037/pim"}, "reply_to_user": {"reputation": 3004, "user_id": 4166517, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/667edb95b14a0c7d1a8c7307491bf438?s=128&d=identicon&r=PG&f=1", "display_name": "u354356007", "link": "https://stackoverflow.com/users/4166517/u354356007"}, "edited": false, "score": 0, "creation_date": 1444212471, "post_id": 32988834, "comment_id": 53803439, "body": "@Vovanrock2002 yeah but the question states that it is a c++ function, which it isent."}, {"owner": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "edited": false, "score": 0, "creation_date": 1444213503, "post_id": 32988834, "comment_id": 53804053, "body": "Why is <code>self._output_buffer = create_string_buffer(self._output_buffer_len)</code> indented into the <code>if</code> block?"}, {"owner": {"reputation": 2439, "user_id": 4592067, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Vm7n4.png?s=128&g=1", "display_name": "imrek", "link": "https://stackoverflow.com/users/4592067/imrek"}, "edited": false, "score": 0, "creation_date": 1444213949, "post_id": 32988834, "comment_id": 53804297, "body": "That&#39;s a very good question, but the Python2.7 version code is working fine with that, besides I have removed the indentation from the <code>if</code> block, but that does not tackle the segmentation fault being thrown."}], "answers": [{"comments": [{"owner": {"reputation": 2439, "user_id": 4592067, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Vm7n4.png?s=128&g=1", "display_name": "imrek", "link": "https://stackoverflow.com/users/4592067/imrek"}, "edited": false, "score": 0, "creation_date": 1444212738, "post_id": 32989331, "comment_id": 53803597, "body": "I am not sure about this, this modification gives me an <code>AttributeError: &#39;bytes&#39; object has no attribute &#39;raw&#39;</code> for the last code line in your snippet."}, {"owner": {"reputation": 2439, "user_id": 4592067, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Vm7n4.png?s=128&g=1", "display_name": "imrek", "link": "https://stackoverflow.com/users/4592067/imrek"}, "edited": false, "score": 0, "creation_date": 1444213263, "post_id": 32989331, "comment_id": 53803921, "body": "Thanks, that was just a typo, now I have spotted it. But the function call still triggers a segmentation fault. :\\"}, {"owner": {"reputation": 2439, "user_id": 4592067, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Vm7n4.png?s=128&g=1", "display_name": "imrek", "link": "https://stackoverflow.com/users/4592067/imrek"}, "edited": false, "score": 0, "creation_date": 1444214604, "post_id": 32989331, "comment_id": 53804714, "body": "Do I have to set the <code>argtypes</code> explicitely, like in this question? <a href=\"http://stackoverflow.com/questions/27127413/converting-python-string-object-to-c-char-using-ctypes\" title=\"converting python string object to c char using ctypes\">stackoverflow.com/questions/27127413/&hellip;</a>"}, {"owner": {"reputation": 2439, "user_id": 4592067, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Vm7n4.png?s=128&g=1", "display_name": "imrek", "link": "https://stackoverflow.com/users/4592067/imrek"}, "edited": false, "score": 1, "creation_date": 1444215514, "post_id": 32989331, "comment_id": 53805220, "body": "Thanks for the updates, I try to integrate this with lemmatizer.py and se if this works for me."}, {"owner": {"reputation": 2439, "user_id": 4592067, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Vm7n4.png?s=128&g=1", "display_name": "imrek", "link": "https://stackoverflow.com/users/4592067/imrek"}, "edited": false, "score": 0, "creation_date": 1444216477, "post_id": 32989331, "comment_id": 53805829, "body": "I was able to get through to the C function with your new code, but of course as the output (<code>[ERROR] Language file for lemmatizer has to be loaded first!</code>) shows, I have to deal with a C code bug."}, {"owner": {"reputation": 177, "user_id": 2389037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a018335b702f53ef4093f2a06a5d1c51?s=128&d=identicon&r=PG", "display_name": "Pim", "link": "https://stackoverflow.com/users/2389037/pim"}, "reply_to_user": {"reputation": 2439, "user_id": 4592067, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Vm7n4.png?s=128&g=1", "display_name": "imrek", "link": "https://stackoverflow.com/users/4592067/imrek"}, "edited": false, "score": 0, "creation_date": 1444218835, "post_id": 32989331, "comment_id": 53807455, "body": "Could you mark it as answered if it an answered  your question?"}], "tags": [], "owner": {"reputation": 177, "user_id": 2389037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a018335b702f53ef4093f2a06a5d1c51?s=128&d=identicon&r=PG", "display_name": "Pim", "link": "https://stackoverflow.com/users/2389037/pim"}, "is_accepted": false, "score": 2, "last_activity_date": 1444219413, "last_edit_date": 1444219413, "creation_date": 1444212032, "answer_id": 32989331, "question_id": 32988834, "link": "https://stackoverflow.com/questions/32988834/porting-python-2-7-code-calling-a-c-function-to-python-3-4/32989331#32989331", "title": "Porting Python 2.7 code calling a C function to Python 3.4", "body": "<p>You need to use the create_string_buffer function to create a char array before passing it to the function.</p>\n\n<p>Something like this should work:</p>\n\n<pre><code>    import ctypes\n\nclass Lib:\n    def __init__(self):\n        self.lib = ctypes.cdll.LoadLibrary('/home/pim/slovene_lemmatizer/bin/libLemmatizer.so')\n\n\ndef lemmatize(self, word):\n    text = \"text\"\n    output_buffer = ctypes.create_string_buffer(text.encode())\n\n    word_buffer = ctypes.create_string_buffer(word.encode())\n\n    self.lib.lem_lemmatize_word(word, output_buffer)\n\n    print(\"test\")\n\ndef main():\n    lib = Lib()\n    lib.lemmatize(\"test\")\n\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n\n<p>this outputs: </p>\n\n<p><code>pim@pim-desktop:~/slovene_lemmatizer/bin$ python3 main.py\n[ERROR] Language file for lemmatizer has to be loaded first!\ntest\npim@pim-desktop:~/slovene_lemmatizer/bin$\n</code></p>\n\n<p>Edit: I'm not 100% sure whether the usage of the 'raw' property here is correct though, but it works! \nEdit2: It does work without the raw property, updated the awnser</p>\n"}], "owner": {"reputation": 2439, "user_id": 4592067, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Vm7n4.png?s=128&g=1", "display_name": "imrek", "link": "https://stackoverflow.com/users/4592067/imrek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1444219413, "creation_date": 1444210656, "last_edit_date": 1444216927, "question_id": 32988834, "link": "https://stackoverflow.com/questions/32988834/porting-python-2-7-code-calling-a-c-function-to-python-3-4", "title": "Porting Python 2.7 code calling a C function to Python 3.4", "body": "<p>I am trying to <strong>call a C function from an <code>.so</code> file</strong> from <code>Python 3.4</code>. I have made some necessary changes to make the <code>Python 2.7</code> code work with Python 3.4 but I am still running into a <code>Fatal Python error: Segmentation fault</code>.</p>\n\n<p>The code is from this <a href=\"https://bitbucket.org/mavrik/slovene_lemmatizer\" rel=\"nofollow\">Bitbucket hosted project</a>. I have installed it via pip3 (<code>pip3 install Lemmagen</code>), which also created the .so file I am trying to use from Python3. </p>\n\n<p>Here is the original Python2.7 code (the function where the call to C code happens) which runs fine with <code>python</code> from the command line.</p>\n\n<pre><code>def lemmatize(self, word):\n    if (self._output_buffer_len &lt; 2 * len(word)):\n        self._output_buffer_len = 2 * len(word)\n        self._output_buffer = create_string_buffer(self._output_buffer_len)\n\n    is_unicode = isinstance(word, unicode)\n    if is_unicode:\n        word = word.encode('utf-8')\n\n    self._lib.lem_lemmatize_word(word, self._output_buffer)\n    return self._output_buffer.value.decode('utf-8') if is_unicode else self._output_buffer.value\n</code></pre>\n\n<p>And this is how I am trying to adapt it to Python3.4:</p>\n\n<pre><code>def lemmatize(self, word):\n    if (self._output_buffer_len &lt; 2 * len(word)):\n        self._output_buffer_len = 2 * len(word)\n        self._output_buffer = create_string_buffer(self._output_buffer_len)\n\n    word = word.encode('utf-8')\n\n\n    self._lib.lem_lemmatize_word(word, self._output_buffer) #SEGFAULT HERE!\n    #return \"HERE\"\n    return self._output_buffer.value.decode('utf-8')\n</code></pre>\n\n<p>I have removed the lines that check whether <code>word</code> is <code>unicode</code> or not, since Unicode is default in Python3.x. I am still 80% sure that is a <strong>character encoding issue</strong>. What encoding do I have to use to <strong>pass on a string variable to the function call</strong> <code>self._lib.lem_lemmatize_word(word, self._output_buffer)</code>? That is the exact line where the segmentation fault occurs:</p>\n\n<p>Fatal Python error: Segmentation fault</p>\n\n<pre><code>Current thread 0xb754b700 (most recent call first):\n  File \"/usr/local/lib/python3.4/dist-packages/lemmagen/lemmatizer.py\", line 66 in lemmatize\n  File \"&lt;stdin&gt;\", line 1 in &lt;module&gt;\nSegmentation fault (core dumped)\n</code></pre>\n\n<p>I have been trying to read up on my exact question (encoding type), but nothing I have found so far seems to solve this. I would appreciate some thoughtful information on this. Thank you.</p>\n\n<p><em>Thanks for whoever downvoted the question without a reason or any comment.</em> </p>\n"}, {"tags": ["c", "linux", "pam"], "comments": [{"owner": {"reputation": 1640, "user_id": 179795, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/239be0d2607584eb16044da758a58ee1?s=128&d=identicon&r=PG", "display_name": "Behrooz", "link": "https://stackoverflow.com/users/179795/behrooz"}, "edited": false, "score": 2, "creation_date": 1444210844, "post_id": 32988772, "comment_id": 53802360, "body": "not a good idea, ip  addresses can be easily forged. VERY EASILY"}], "answers": [{"tags": [], "owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "is_accepted": false, "score": 2, "last_activity_date": 1444819282, "creation_date": 1444819282, "answer_id": 33123177, "question_id": 32988772, "link": "https://stackoverflow.com/questions/32988772/how-can-i-get-the-client-ip-in-pam/33123177#33123177", "title": "how can I get the client ip in pam", "body": "<p>First off: </p>\n\n<blockquote>\n  <p>where authentication is controlled only from particular ip addresses </p>\n</blockquote>\n\n<p>It's a bad idea to base this off IP addresses, as they can be ridiculously easily forged. Simply don't do that.</p>\n\n<p>Secondly:</p>\n\n<p>As <code>man pam_get_item</code> <a href=\"http://linux.die.net/man/3/pam_get_item\" rel=\"nofollow\">will tell you</a></p>\n\n<blockquote>\n  <p>The requesting hostname (the hostname of the machine from which the PAM_RUSER entity is requesting service). That is PAM_RUSER@PAM_RHOST does identify the requesting user. In some applications, PAM_RHOST may be NULL. In such situations, it is unclear where the authentication request is originating from. </p>\n</blockquote>\n\n<p>That will be the case in many applications nowaday. </p>\n\n<p>You might simply be confusing PAM requests origins (which shouldn't <strong>ever</strong> be trusted -- those are the people <em>trying</em> to get auth, so trusting them before you trust them is plain making your own auth mechanism useless) and the \"authenticator\" working in the background.</p>\n\n<p>If you need host-based validation, there's already a mature, albeit a little complex to set up, but still widely deployed solution: Kerberos has exactly that purpose, authenticating hosts, so that further authentications can take host authenticity into consideration. Don't reinvent the wheel, especially in security contexts.</p>\n"}], "owner": {"reputation": 1047, "user_id": 1191999, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/8a5575da1a4d6205f568754e55294cfb?s=128&d=identicon&r=PG", "display_name": "Ram", "link": "https://stackoverflow.com/users/1191999/ram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1529, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1444819282, "creation_date": 1444210482, "last_edit_date": 1444211511, "question_id": 32988772, "link": "https://stackoverflow.com/questions/32988772/how-can-i-get-the-client-ip-in-pam", "title": "how can I get the client ip in pam", "body": "<p>I am writing a custom pam module where authentication is controlled only from particular ip addresses </p>\n\n<p>I am not able to get the ip address of the client making a connection. \nIs there any example ? </p>\n\n<p>I am using this function in my code </p>\n\n<pre><code>....\n    err = pam_get_item(pamh, PAM_RHOST, (const void **) &amp;pHost);\n.....\n</code></pre>\n\n<p>But I get phost as always null</p>\n"}, {"tags": ["c", "eclipse"], "comments": [{"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 0, "creation_date": 1444210093, "post_id": 32988631, "comment_id": 53801821, "body": "Post your code and project settings please."}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 1, "creation_date": 1444210439, "post_id": 32988631, "comment_id": 53802079, "body": "I think you created Windows application . Make your project as console application . That should fix it ."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5417635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3d6579df2aa448d0bcf35e11000b44e?s=128&d=identicon&r=PG&f=1", "display_name": "Raj Hunzai", "link": "https://stackoverflow.com/users/5417635/raj-hunzai"}, "edited": false, "score": 0, "creation_date": 1444211250, "post_id": 32988788, "comment_id": 53802642, "body": "Thank you Magisch. This resolved previous error message but I got some new error messages."}, {"owner": {"reputation": 11, "user_id": 5417635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3d6579df2aa448d0bcf35e11000b44e?s=128&d=identicon&r=PG&f=1", "display_name": "Raj Hunzai", "link": "https://stackoverflow.com/users/5417635/raj-hunzai"}, "edited": false, "score": 0, "creation_date": 1444211298, "post_id": 32988788, "comment_id": 53802680, "body": "make:*** No rule to make target &#39;all&#39;.stop"}], "tags": [], "owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "is_accepted": false, "score": 1, "last_activity_date": 1444210507, "creation_date": 1444210507, "answer_id": 32988788, "question_id": 32988631, "link": "https://stackoverflow.com/questions/32988631/eclipse-error-in-c-project/32988788#32988788", "title": "Eclipse error in C project", "body": "<p>Set the project type to console application and try again.</p>\n"}, {"tags": [], "owner": {"reputation": 2345, "user_id": 4511585, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/IC7eZ.jpg?s=128&g=1", "display_name": "albttx", "link": "https://stackoverflow.com/users/4511585/albttx"}, "is_accepted": false, "score": 0, "last_activity_date": 1444214208, "creation_date": 1444214208, "answer_id": 32990006, "question_id": 32988631, "link": "https://stackoverflow.com/questions/32988631/eclipse-error-in-c-project/32990006#32990006", "title": "Eclipse error in C project", "body": "<p>Try to compile and execute it with you're command line,</p>\n\n<pre><code>gcc yourfile.c\n./a.out\n</code></pre>\n\n<p>if you don't have gcc, you can install it there : <a href=\"http://www.matpack.de/cygwin/index.html\" rel=\"nofollow\">http://www.matpack.de/cygwin/index.html</a></p>\n"}], "owner": {"reputation": 11, "user_id": 5417635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3d6579df2aa448d0bcf35e11000b44e?s=128&d=identicon&r=PG&f=1", "display_name": "Raj Hunzai", "link": "https://stackoverflow.com/users/5417635/raj-hunzai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1444214208, "creation_date": 1444210062, "last_edit_date": 1444213755, "question_id": 32988631, "link": "https://stackoverflow.com/questions/32988631/eclipse-error-in-c-project", "title": "Eclipse error in C project", "body": "<p>I am new to C programming. I just installed Eclipse CDT and Cygwin. I tried to run this code. But showing 3 errors in problems window of eclipse.</p>\n\n<p>Errors:</p>\n\n<pre><code>1- make:***[CProject.exe]Error 1\n2- recipe for target 'Cproject.exe'failed\n3- Undefined reference to 'WinMain@16'  \n</code></pre>\n\n<p>Code:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint main(void)\n{\nprintf(\"I want to be a competent C programmer\");\nreturn 0;\n}\n</code></pre>\n\n<p>I don't know what to do, Can anyone help me?</p>\n"}, {"tags": ["c", "embedded", "avr", "atmel", "atmelstudio"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1444210828, "post_id": 32988537, "comment_id": 53802346, "body": "Why don&#39;t you use a single interrupt vector and test the source when interrupted?"}, {"owner": {"reputation": 103, "user_id": 4331426, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh3.googleusercontent.com/-QFHZyUJC8QM/AAAAAAAAAAI/AAAAAAAAAEM/ds5SRFDDhBs/photo.jpg?sz=128", "display_name": "Pradeep Ch", "link": "https://stackoverflow.com/users/4331426/pradeep-ch"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1444211061, "post_id": 32988537, "comment_id": 53802507, "body": "If that is the case, the ISR should remember which switch I pressed. Is that possible?"}, {"owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "edited": false, "score": 0, "creation_date": 1444212924, "post_id": 32988537, "comment_id": 53803698, "body": "@PradeepCh: Yes, ISR can remember which switch pressed, by storing state of PORTx_IN register in a variable."}], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 4331426, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh3.googleusercontent.com/-QFHZyUJC8QM/AAAAAAAAAAI/AAAAAAAAAEM/ds5SRFDDhBs/photo.jpg?sz=128", "display_name": "Pradeep Ch", "link": "https://stackoverflow.com/users/4331426/pradeep-ch"}, "edited": false, "score": 0, "creation_date": 1444211524, "post_id": 32988948, "comment_id": 53802836, "body": "Is it possible to make ISR remember which switch is been pressed? I can assign one ISR for all three switches considering ISR remembers which switch has been pressed."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1444212151, "post_id": 32988948, "comment_id": 53803243, "body": "You can implement what this answer suggests. Then you&#39;ll still have one interrupt vector free for other purposes. When you have it working, you might consider extending it to de-bounce mechanical switch closures."}, {"owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "reply_to_user": {"reputation": 103, "user_id": 4331426, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh3.googleusercontent.com/-QFHZyUJC8QM/AAAAAAAAAAI/AAAAAAAAAEM/ds5SRFDDhBs/photo.jpg?sz=128", "display_name": "Pradeep Ch", "link": "https://stackoverflow.com/users/4331426/pradeep-ch"}, "edited": false, "score": 1, "creation_date": 1444212891, "post_id": 32988948, "comment_id": 53803681, "body": "@PradeepCh: &quot;ISR remember which switch is pressed?&quot; \u2013 uh, just read the input port value into some (global) variable. <code>portdstate_at_isr = PORTD_IN</code>"}], "tags": [], "owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "is_accepted": true, "score": 2, "last_activity_date": 1444210966, "creation_date": 1444210966, "answer_id": 32988948, "question_id": 32988537, "link": "https://stackoverflow.com/questions/32988537/only-two-io-port-interrupts-for-xmega-int0-and-int1/32988948#32988948", "title": "Only two IO port interrupts for Xmega (INT0 and INT1)", "body": "<p>The idea of the external interrupts is that you get to know <em>that</em> something happened, but not <em>what</em> happened. In your ISR you have to read out the state of the inputs the switches are connected to and determine based on the readout, what to do. To detect, if the state did alter, keep a copy of the ports input status and do an XOR with the newly read out value (do this for a whole port, not just for single pins).</p>\n"}, {"tags": [], "owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "is_accepted": false, "score": 0, "last_activity_date": 1444211162, "creation_date": 1444211162, "answer_id": 32989012, "question_id": 32988537, "link": "https://stackoverflow.com/questions/32988537/only-two-io-port-interrupts-for-xmega-int0-and-int1/32989012#32989012", "title": "Only two IO port interrupts for Xmega (INT0 and INT1)", "body": "<p>I'm not expert of XMEGA, but I can suggest, for example using PD1 as interrupt pin:</p>\n\n<pre><code>PORTD.INT0MASK = 0x04; // PD2 is the source of interrupt for INT0.\nPORTD.INT1MASK = 0x02; // PD1 is the source of interrupt for INT1.\nPORTD.INTCTRL = 0x0F; // Enable INT1, enable INT0 and place them a high-priority level.\nPORTD.PIN2CTRL = 0x03; // configure PD2 pin to interrupt on the low level of signal.PORTD.PIN1CTRL = 0x03; // configure PD1 pin to interrupt on the low level of signal.\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 305, "user_id": 6685260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72e11aa21913ac452f6c0f5b11714b9c?s=128&d=identicon&r=PG", "display_name": "Gabriel Cs&#233;falvay", "link": "https://stackoverflow.com/users/6685260/gabriel-cs%c3%a9falvay"}, "is_accepted": false, "score": 0, "last_activity_date": 1470483657, "creation_date": 1470483657, "answer_id": 38803890, "question_id": 32988537, "link": "https://stackoverflow.com/questions/32988537/only-two-io-port-interrupts-for-xmega-int0-and-int1/38803890#38803890", "title": "Only two IO port interrupts for Xmega (INT0 and INT1)", "body": "<p>Every port has 2 interrupts. You can use more ports if you need more interrupts than 2. You can connect the third switch to a second port and use the INT0 there.</p>\n"}, {"tags": [], "owner": {"reputation": 119, "user_id": 6231882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xXkB8.jpg?s=128&g=1", "display_name": "OpalApps", "link": "https://stackoverflow.com/users/6231882/opalapps"}, "is_accepted": false, "score": 0, "last_activity_date": 1470920391, "creation_date": 1470920391, "answer_id": 38897121, "question_id": 32988537, "link": "https://stackoverflow.com/questions/32988537/only-two-io-port-interrupts-for-xmega-int0-and-int1/38897121#38897121", "title": "Only two IO port interrupts for Xmega (INT0 and INT1)", "body": "<p>How about polling input(s) from your code, in a loop or from timer interrupt routine(s)? This way you can handle as many input signals as you have inputs capable of sensing the signal change.</p>\n\n<p>The limiting factor, though is the frequency of polling and the delay the polling software introduces.</p>\n\n<p>Of course I assume you want to observe high/low levels of the signal. For more elaborate signal sensing (rising, fallsing, frequency change) the use of ADC is unavoidable.</p>\n\n<p>I hope this helped.</p>\n"}], "owner": {"reputation": 103, "user_id": 4331426, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh3.googleusercontent.com/-QFHZyUJC8QM/AAAAAAAAAAI/AAAAAAAAAEM/ds5SRFDDhBs/photo.jpg?sz=128", "display_name": "Pradeep Ch", "link": "https://stackoverflow.com/users/4331426/pradeep-ch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2185, "favorite_count": 0, "accepted_answer_id": 32988948, "answer_count": 4, "score": 0, "last_activity_date": 1470920391, "creation_date": 1444209813, "last_edit_date": 1444210572, "question_id": 32988537, "link": "https://stackoverflow.com/questions/32988537/only-two-io-port-interrupts-for-xmega-int0-and-int1", "title": "Only two IO port interrupts for Xmega (INT0 and INT1)", "body": "<p>In avr Xmega device, there are only two IO port interrupt vectors INT0 and INT1.</p>\n\n<p>I have three switches that should generate three interrupts. \nI have written an interrupt code for the first switch using INT0. Now, I can write the second interrupt using INT1 which will exhaust my vectors. \nBelow is my code for INT0 ISR:</p>\n\n<pre><code>ISR (PORTD_INT0_vect){\nPORTD.INTFLAGS = 0x01; // clear INT0IF flag.\n\nPORTD_OUT = PORTD_OUT | (1&lt;&lt;4); // led on.\n\n}\n</code></pre>\n\n<p>Can I redefine this ISR to enable interrupt for second switch?</p>\n\n<p>The registers that I set in main function are as follows:</p>\n\n<pre><code>PORTD.INT0MASK = 0x04; // PD2 is the source of interrupt for INT0.\nPORTD.INTCTRL = 0x03; // Disable INT1, enable INT0 and place it a high-priority level.\nPORTD.PIN2CTRL = 0x03; // configure PD2 pin to interrupt on the low level of signal.\nPMIC.CTRL = 0x07;    // enable high,medium, and low level interrupts.\nsei();         // enable interrupt globally.\n</code></pre>\n"}, {"tags": ["c", "undefined-reference"], "comments": [{"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 0, "creation_date": 1444210027, "post_id": 32988479, "comment_id": 53801781, "body": "It is not a function . It is defined as macro in your header."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 1, "creation_date": 1444210385, "post_id": 32988479, "comment_id": 53802042, "body": "The header is read only if either <code>__KERNEL__</code> or <code>_LVM_H_INCLUDE</code> are defined; there&#39;s a second <code>#if</code> guard just inside the usual inclusion guard. So one possibility is that you have included an empty header and <code>INIT_LIST_HEAD</code> is interpreted as regular function.(There&#39;s no error message for <code>struct list_head</code>, because it is okay to define a pointer to an incomplete type.)"}, {"owner": {"reputation": 1438, "user_id": 5345612, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/80f66466ea864a27bc88dd3bf614f8c4?s=128&d=identicon&r=PG&f=1", "display_name": "HuangJie", "link": "https://stackoverflow.com/users/5345612/huangjie"}, "reply_to_user": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1444210580, "post_id": 32988479, "comment_id": 53802179, "body": "@MOehm Thanks for your reply. I understood now. So I am not able to use <code>INIT_LIST_HEAD()</code> in my program?"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1444210782, "post_id": 32988479, "comment_id": 53802311, "body": "It&#39;s a Linux kernel header. Not meant to be used as is in user code. It may work if you fiddle with it a bit."}], "answers": [{"comments": [{"owner": {"reputation": 1438, "user_id": 5345612, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/80f66466ea864a27bc88dd3bf614f8c4?s=128&d=identicon&r=PG&f=1", "display_name": "HuangJie", "link": "https://stackoverflow.com/users/5345612/huangjie"}, "edited": false, "score": 0, "creation_date": 1444417739, "post_id": 32998005, "comment_id": 53911871, "body": "Thanks for your reply. I&#39;m sorry to bother you, but I have tried and it takes no effect :("}], "tags": [], "owner": {"reputation": 2000, "user_id": 4487286, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHZoO.jpg?s=128&g=1", "display_name": "milevyo", "link": "https://stackoverflow.com/users/4487286/milevyo"}, "is_accepted": false, "score": 0, "last_activity_date": 1444236524, "creation_date": 1444236524, "answer_id": 32998005, "question_id": 32988479, "link": "https://stackoverflow.com/questions/32988479/undefined-reference-to-init-list-head-in-list-h/32998005#32998005", "title": "undefined reference to INIT_LIST_HEAD in list.h", "body": "<p>use</p>\n\n<pre><code>#include &lt;linux/lvm.h&gt; \n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>#include &lt;linux/list.h&gt;\n</code></pre>\n"}], "owner": {"reputation": 1438, "user_id": 5345612, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/80f66466ea864a27bc88dd3bf614f8c4?s=128&d=identicon&r=PG&f=1", "display_name": "HuangJie", "link": "https://stackoverflow.com/users/5345612/huangjie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 205, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1444236524, "creation_date": 1444209663, "question_id": 32988479, "link": "https://stackoverflow.com/questions/32988479/undefined-reference-to-init-list-head-in-list-h", "title": "undefined reference to INIT_LIST_HEAD in list.h", "body": "<p>I want to use the function <code>INIT_LIST_HEAD</code> in <code>list.h</code> (here is my <a href=\"http://lxr.free-electrons.com/source/include/linux/list.h?v=2.4.37\" rel=\"nofollow\">list.h</a>), but I get the error <code>undefined reference to INIT_LIST_HEAD</code>.\nHere is my source code:</p>\n\n<pre><code>#include &lt;linux/list.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(int argc, char** argv)\n{\n        struct list_head* hd = NULL;\n        INIT_LIST_HEAD(hd);\n\n        exit(0);\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "struct", "malloc"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 2, "creation_date": 1444208288, "post_id": 32987863, "comment_id": 53800577, "body": "change <code>int** arr;</code> to  <code>int (*arr)[SIZE];</code>"}, {"owner": {"reputation": 366, "user_id": 1276591, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/e811eccf4a68944bbddbfeb89911cd9c?s=128&d=identicon&r=PG", "display_name": "KhoaVo", "link": "https://stackoverflow.com/users/1276591/khoavo"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1444208552, "post_id": 32987863, "comment_id": 53800771, "body": "is there a reason why  <code>int (*arr)[SIZE];</code> work but <code>int** arr</code> and <code>int arr[9][9]</code> don&#39;t, sorry I have not code in C for a very long time."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1444208667, "post_id": 32987863, "comment_id": 53800836, "body": "2D-Array is not a double pointer. E.g <code>*arr</code> is <code>int*</code> when <code>int **arr;</code>, <code>*arr</code> is <code>int[9]</code> when <code>int arr[9][9];</code>"}], "answers": [{"comments": [{"owner": {"reputation": 366, "user_id": 1276591, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/e811eccf4a68944bbddbfeb89911cd9c?s=128&d=identicon&r=PG", "display_name": "KhoaVo", "link": "https://stackoverflow.com/users/1276591/khoavo"}, "edited": false, "score": 0, "creation_date": 1444208326, "post_id": 32987945, "comment_id": 53800605, "body": "I tried that too, but I still have the same error"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 366, "user_id": 1276591, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/e811eccf4a68944bbddbfeb89911cd9c?s=128&d=identicon&r=PG", "display_name": "KhoaVo", "link": "https://stackoverflow.com/users/1276591/khoavo"}, "edited": false, "score": 2, "creation_date": 1444208354, "post_id": 32987945, "comment_id": 53800614, "body": "You cannot assign to arrays."}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": true, "score": 2, "last_activity_date": 1444208340, "last_edit_date": 1495541200, "creation_date": 1444208233, "answer_id": 32987945, "question_id": 32987863, "link": "https://stackoverflow.com/questions/32987863/error-assigning-to-int-from-incompatible-type-int/32987945#32987945", "title": "error: assigning to &#39;int **&#39; from incompatible type &#39;int [][]", "body": "<p>If it's for sudoku just change the structure definition<sup>1</sup></p>\n\n<pre><code>typedef struct \n{\n    int row;\n    int col;\n    int arr[9][9];  \n} parameters;\n</code></pre>\n\n<p>Since <code>int **</code> and <code>int[][]</code> are not compatible types because <code>int[][]</code> stores contigous integers while with <code>int **</code> you can store contigous pointers but the integers are not contigous you should not force a cast neither.</p>\n\n<p>To fill <code>arr</code> with the values you could then use</p>\n\n<pre><code>memcpy(data-&gt;arr, grid, sizeof(data-&gt;arr));\n</code></pre>\n\n<p>because you cannot assign to arrays.</p>\n\n<p>Also, be careful when using <code>malloc()</code>, on error it returns <code>NULL</code> and in that case the code following <code>malloc()</code> will cause undefined behavior. And <a href=\"https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">do not cast <code>void *</code> in [tag:c]</a>.</p>\n\n<hr>\n\n<p><sup>1</sup><sub>You could define it as an array of pointers too as <a href=\"https://stackoverflow.com/questions/32987863/error-assigning-to-int-from-incompatible-type-int/32987945#comment53800577_32987863\">this comment</a> suggests.</sub>.</p>\n"}], "owner": {"reputation": 366, "user_id": 1276591, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/e811eccf4a68944bbddbfeb89911cd9c?s=128&d=identicon&r=PG", "display_name": "KhoaVo", "link": "https://stackoverflow.com/users/1276591/khoavo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4796, "favorite_count": 1, "closed_date": 1444210638, "accepted_answer_id": 32987945, "answer_count": 1, "score": 1, "last_activity_date": 1444208340, "creation_date": 1444208007, "question_id": 32987863, "link": "https://stackoverflow.com/questions/32987863/error-assigning-to-int-from-incompatible-type-int", "closed_reason": "Duplicate", "title": "error: assigning to &#39;int **&#39; from incompatible type &#39;int [][]", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;pthread.h&gt;\n#define SIZE 9\n\ntypedef struct \n{\n    int row;\n    int col;\n    int** arr;  \n}parameters;\n\n// function prototypes\nvoid* checkRow(void* in);\nvoid* checkCol(void* in);\nvoid* checkSect(void* in);\n\n\nint main(void)\n{\n    // board to test\n    int grid[SIZE][SIZE] = {\n                    {6, 5, 3 ,1, 2, 8, 7, 9, 4},\n                    {1, 7, 4, 3, 5, 9, 6, 8, 2},\n                    {9, 2, 8, 4, 6, 7, 5, 3, 1},\n                    {2, 8, 6, 5, 1, 4, 3, 7, 9},\n                    {3, 9, 1, 7, 8, 2, 4, 5, 6},\n                    {5, 4, 7, 6, 9, 3, 2, 1, 8},\n                    {8, 6, 5, 2, 3, 1, 9, 4 ,7},\n                    {4, 1, 2, 9, 7, 5, 8, 6, 3},\n                    {7, 3, 9, 8, 4, 6, 1, 2, 5}\n                 }; \n\n    printf(\"Sudoku from Khoa Vo\\n\");\n\n    int i = 0;\n    int j = 0;\n    for (i = 0; i &lt; SIZE; i++)\n        for (j = 0; j &lt; SIZE; j++)\n        {\n            printf(\"%d \", grid[i][j]);\n            if(j == SIZE)\n                printf(\"\\n\");\n        }\n\n    // paramenter for column and row threads\n    parameters *data = (parameters*) malloc(sizeof(parameters));\n    data-&gt;row = 0;\n    data-&gt;col = 0;\n    data-&gt;arr = grid;\n}\n</code></pre>\n\n<p>I have an error, but I cant quite figured out how to fix it, there error is on statement <code>data-&gt;arr = grid</code>, the error message indicate that `error: assigning to 'int **' from incompatible type 'int [9][9]. Can I get some suggestion on how to fix this error, thank in advance. </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 4, "creation_date": 1444207431, "post_id": 32987541, "comment_id": 53799985, "body": "So you want to inplement a modulo operator identical to the built-in version but without using one. May I ask you why?"}, {"owner": {"reputation": 1431, "user_id": 1257204, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a013d2a5e5727c3c91c357d95d04f98a?s=128&d=identicon&r=PG", "display_name": "m47h", "link": "https://stackoverflow.com/users/1257204/m47h"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1444207962, "post_id": 32987541, "comment_id": 53800351, "body": "in fact, i do need a special threshold which is equal to 9 and i would like to know if there exist an efficient solution. I will update my question"}, {"owner": {"reputation": 13900, "user_id": 2020827, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/e6c7105ef9148e931ad05a6692155046?s=128&d=identicon&r=PG&f=1", "display_name": "sergej", "link": "https://stackoverflow.com/users/2020827/sergej"}, "edited": false, "score": 0, "creation_date": 1444208136, "post_id": 32987541, "comment_id": 53800483, "body": "Why can&#39;t you just use the modulo operator?"}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 2, "creation_date": 1444208190, "post_id": 32987541, "comment_id": 53800517, "body": "Use look-up table? It would only require <code>uint8_t array[256] = { .... }</code>."}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 4, "creation_date": 1444208221, "post_id": 32987541, "comment_id": 53800540, "body": "If an efficient alternative existed, the compiler would use that instead of the modulo instruction. For example, <code>x%4</code> will probably be replaced by the compiler with <code>x&amp;3</code> if <code>x</code> is unsigned."}, {"owner": {"reputation": 1431, "user_id": 1257204, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a013d2a5e5727c3c91c357d95d04f98a?s=128&d=identicon&r=PG", "display_name": "m47h", "link": "https://stackoverflow.com/users/1257204/m47h"}, "edited": false, "score": 0, "creation_date": 1444209182, "post_id": 32987541, "comment_id": 53801191, "body": "We are using c89 and follow the misra-c guidelines. Moreover, this code shall be supported by different compilers and therefore, the modulo operator is implemented differently and can differ concerning negative numbers. This is the reason for omitting him."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1444209407, "post_id": 32987541, "comment_id": 53801366, "body": "@m47h you stated that the input is unsigned, so negative numbers is not a concern"}, {"owner": {"reputation": 1431, "user_id": 1257204, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a013d2a5e5727c3c91c357d95d04f98a?s=128&d=identicon&r=PG", "display_name": "m47h", "link": "https://stackoverflow.com/users/1257204/m47h"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1444209582, "post_id": 32987541, "comment_id": 53801495, "body": "@M.M: this is correct, nonetheless the operator should be omitted in our source code"}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1444209587, "post_id": 32987541, "comment_id": 53801501, "body": "@m47h Not entirely sure, but I seem to remember that standard library function <code>div</code> guarantees consistent remainder sign. You might want to look further into it."}, {"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "reply_to_user": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1444211811, "post_id": 32987541, "comment_id": 53803008, "body": "@user694733: be careful, lookup-tables require memory access. And that is sometimes very sloooooow...."}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1444228145, "post_id": 32987541, "comment_id": 53814582, "body": "One trick is to decompose to <code>x=a*64+b*8+c</code>, the the problem reduces to <code>x%9=(a-b+c)%9</code>, which is worst case <code>[-7, 10]</code> range for [0-255] input, which makes loop-up-table highly feasible."}], "answers": [{"comments": [{"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 1, "creation_date": 1444208473, "post_id": 32987967, "comment_id": 53800702, "body": "I didn&#39;t downvote, but it&#39;s silly to replace a modulo operation with division, which will be just as slow or slower. They are even implemented with the same instruction on x86."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1444209587, "post_id": 32987967, "comment_id": 53801500, "body": "@interjay I thought it was one of those student exercises &quot;I am not allowed to...&quot;"}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 1, "last_activity_date": 1444208287, "creation_date": 1444208287, "answer_id": 32987967, "question_id": 32987541, "link": "https://stackoverflow.com/questions/32987541/guarantee-uint8-t-smaller-then-9/32987967#32987967", "title": "Guarantee uint8_t smaller then 9", "body": "<p>You could use this method, devoid of loop, branch or modulo:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n\nint main(void)\n{\n    uint8_t x = 15; \n    printf(\"%u\", x - (x/9)*9);\n    return 0;\n}\n</code></pre>\n\n<p>Program output:</p>\n\n<pre><code>6\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13900, "user_id": 2020827, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/e6c7105ef9148e931ad05a6692155046?s=128&d=identicon&r=PG&f=1", "display_name": "sergej", "link": "https://stackoverflow.com/users/2020827/sergej"}, "is_accepted": false, "score": 3, "last_activity_date": 1444211552, "last_edit_date": 1444211552, "creation_date": 1444209099, "answer_id": 32988255, "question_id": 32987541, "link": "https://stackoverflow.com/questions/32987541/guarantee-uint8-t-smaller-then-9/32988255#32988255", "title": "Guarantee uint8_t smaller then 9", "body": "<p>I don't understand why one would want to replace the modulo operator.\nIf it is about <em>efficiency</em>, consider the following two examples:</p>\n\n<pre><code>int main(int argc, char* argv[]) {\n  int x  = argc % 9;\n  return x;\n}\n</code></pre>\n\n<p>and </p>\n\n<pre><code>int main(int argc, char* argv[]) {\n  int x = argc - (argc / 9) * 9;\n  return x;\n}\n</code></pre>\n\n<p>For both implementation, <code>gcc -g -O3</code> is generating the <em>same assembly</em> (I am using gcc 4.8.1 on x86):</p>\n\n<pre><code>main:\n    movl    %edi, %eax  # argc, tmp71\n    movl    $954437177, %edx    #, tmp65\n    imull   %edx    # tmp65\n    movl    %edi, %eax  # argc, tmp67\n    sarl    $31, %eax   #, tmp67\n    sarl    %edx    # x\n    subl    %eax, %edx  # tmp67, x\n    leal    (%rdx,%rdx,8), %eax #, tmp70\n    subl    %eax, %edi  # tmp70, x\n    movl    %edi, %eax  # x,\n    ret\n</code></pre>\n\n<p>Conclusion: <strong>don't care about efficiency</strong> (in this case and in the most other cases), let the compiler do that.</p>\n\n<p>BTW: <code>954437177</code> is <code>(2^33 + 1) / 9</code></p>\n"}, {"tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": true, "score": 3, "last_activity_date": 1444209343, "creation_date": 1444209343, "answer_id": 32988347, "question_id": 32987541, "link": "https://stackoverflow.com/questions/32987541/guarantee-uint8-t-smaller-then-9/32988347#32988347", "title": "Guarantee uint8_t smaller then 9", "body": "<p>This is what compilers are for. You enter code that generates the output you want, and the compiler generates the most efficient assembly to produce that output.</p>\n\n<p>In fact the C language is defined in terms of an abstract machine in which only its observable behaviour is defined.</p>\n\n<p>For the program:</p>\n\n<pre><code>int main(int x, char **z)\n{ \n    x  = x % 9;\n    return x;\n}\n</code></pre>\n\n<p>gcc 5.2 -O3 generates:</p>\n\n<pre><code>main:\n    movl    %edi, %eax\n    movl    $954437177, %edx\n    imull   %edx\n    movl    %edx, %eax\n    movl    %edi, %edx\n    sarl    %eax\n    sarl    $31, %edx\n    subl    %edx, %eax\n    leal    (%rax,%rax,8), %eax\n    subl    %eax, %edi\n    movl    %edi, %eax\n    ret\n</code></pre>\n\n<p>I am not sure exactly what this is, but 954437177 is <code>0b00111000111000111000111000111001</code>.  If you are interested perhaps you could benchmark this assembly against anything else that you come up with by hand.</p>\n"}], "owner": {"reputation": 1431, "user_id": 1257204, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a013d2a5e5727c3c91c357d95d04f98a?s=128&d=identicon&r=PG", "display_name": "m47h", "link": "https://stackoverflow.com/users/1257204/m47h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 32988347, "answer_count": 3, "score": 0, "last_activity_date": 1444211552, "creation_date": 1444207117, "last_edit_date": 1444208032, "question_id": 32987541, "link": "https://stackoverflow.com/questions/32987541/guarantee-uint8-t-smaller-then-9", "title": "Guarantee uint8_t smaller then 9", "body": "<p>I would like to guarantee that a unsigned value is smaller then 9 without a branch and without the modulo operator(requirement):\nThe algorithm with modulo:</p>\n\n<pre><code>x  = x % 9\n</code></pre>\n\n<p>The algorithm with a loop/branch:</p>\n\n<pre><code>while(x &gt;= 9)\n{\n  x -= 9;\n}\n</code></pre>\n\n<p>In special cases (like threshold == 8), this can be achieved by:</p>\n\n<pre><code>x = x &amp; 0x07u;\n</code></pre>\n\n<p>Is there a possibility for a threshold equal to 9?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 13900, "user_id": 2020827, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/e6c7105ef9148e931ad05a6692155046?s=128&d=identicon&r=PG&f=1", "display_name": "sergej", "link": "https://stackoverflow.com/users/2020827/sergej"}, "edited": false, "score": 0, "creation_date": 1444206757, "post_id": 32987335, "comment_id": 53799563, "body": "I am not sure I understand the question, please show what you have tried."}, {"owner": {"reputation": 9631, "user_id": 258009, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1ccdf76b2fb6a2c5e3c64e686b092ff0?s=128&d=identicon&r=PG", "display_name": "Component 10", "link": "https://stackoverflow.com/users/258009/component-10"}, "edited": false, "score": 0, "creation_date": 1444206807, "post_id": 32987335, "comment_id": 53799603, "body": "I&#39;m assuming op wants to split the array into &quot;31&quot;, &quot;28&quot;, &quot;31&quot;, &quot;30&quot;, &quot; ... etc."}, {"owner": {"reputation": 1876, "user_id": 2209511, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/6BtmQ.png?s=128&g=1", "display_name": "aslg", "link": "https://stackoverflow.com/users/2209511/aslg"}, "edited": false, "score": 1, "creation_date": 1444206842, "post_id": 32987335, "comment_id": 53799629, "body": "Welcome to stack overflow. Don&#39;t start your question title with how you feel, but rather a question or the problem you&#39;re facing. Your question is unclear and copying an array is fairly simple and has been answered many times. Also tagging C and C++ (multiple languages) is usually discouraged."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1444206860, "post_id": 32987335, "comment_id": 53799641, "body": "The size of your array is wrong, your compiler should report excess of elements if warnings were enabled."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1444207190, "post_id": 32987335, "comment_id": 53799838, "body": "... similarly the target array will need to be of size <b>3</b> occurring 12 times."}, {"owner": {"reputation": 1876, "user_id": 2209511, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/6BtmQ.png?s=128&g=1", "display_name": "aslg", "link": "https://stackoverflow.com/users/2209511/aslg"}, "edited": false, "score": 0, "creation_date": 1444207241, "post_id": 32987335, "comment_id": 53799862, "body": "<a href=\"http://stackoverflow.com/questions/16645583/how-to-copy-char-array-to-another-char-array-in-c\">Copy strings in C</a>"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1444207806, "post_id": 32987335, "comment_id": 53800229, "body": "@iharob The compiler will not report excess elements, because you are allowed to drop the null terminator when initializing a character array. See &#167;6.7.9 paragraph 14 in the C11 specification."}, {"owner": {"reputation": 7341, "user_id": 4822120, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/cb73b37b475eb2c8c710875ac9d842ba?s=128&d=identicon&r=PG&f=1", "display_name": "ggrr", "link": "https://stackoverflow.com/users/4822120/ggrr"}, "edited": false, "score": 0, "creation_date": 1444208664, "post_id": 32987335, "comment_id": 53800835, "body": "what is your result char array?"}, {"owner": {"reputation": 4251, "user_id": 4605105, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-_cFfGx1khYs/AAAAAAAAAAI/AAAAAAAAGt0/vfQ_28nwAEE/photo.jpg?sz=128", "display_name": "&#212;rel", "link": "https://stackoverflow.com/users/4605105/%c3%94rel"}, "edited": false, "score": 0, "creation_date": 1444222308, "post_id": 32987335, "comment_id": 53809990, "body": "You forget the final \\0 in all your array <code>pvtsWsMthDayTab[24]</code> should be  <code>pvtsWsMthDayTab[25]</code>  <code>char sDaysInMth[12][2]</code> <code>char sDaysInMth[12][3]</code>"}], "answers": [{"tags": [], "owner": {"reputation": 4251, "user_id": 4605105, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-_cFfGx1khYs/AAAAAAAAAAI/AAAAAAAAGt0/vfQ_28nwAEE/photo.jpg?sz=128", "display_name": "&#212;rel", "link": "https://stackoverflow.com/users/4605105/%c3%94rel"}, "is_accepted": true, "score": 0, "last_activity_date": 1444222714, "creation_date": 1444222714, "answer_id": 32992878, "question_id": 32987335, "link": "https://stackoverflow.com/questions/32987335/how-to-copy-1-d-array-to-2-d-array/32992878#32992878", "title": "how to copy 1-D array to 2-D array", "body": "<p>You need a char for the final <code>\\0</code>, I have used a loop to get the 2 char</p>\n\n<pre><code>#include &lt;string.h&gt; \n#include &lt;stdio.h&gt; \n\n\n\nint main(void) { \n    static char pvtsWsMthDayTab[25]=\"312831303130313130313031\"; \n    char sDaysInMth[12][3] ; \n\n    memset(sDaysInMth, 0, sizeof(sDaysInMth)); \n\n    for(int i = 0; i &lt; 12; i++) { \n        for (int j = 0; j &lt; 2; j++ ) { \n            sDaysInMth[i][j] = pvtsWsMthDayTab[i * 2 + j ]; \n        } \n    } \n\n    for(int i = 0; i &lt; 12; i++) { \n        printf(\"%s\\n\",sDaysInMth[i]); \n    } \n\n\n    return 0; \n} \n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 5417439, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-901oSUDTAWU/AAAAAAAAAAI/AAAAAAAAALg/jPS0vUkR6mI/photo.jpg?sz=128", "display_name": "shalu agrawal", "link": "https://stackoverflow.com/users/5417439/shalu-agrawal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "accepted_answer_id": 32992878, "answer_count": 1, "score": -8, "last_activity_date": 1489086468, "creation_date": 1444206472, "last_edit_date": 1489086468, "question_id": 32987335, "link": "https://stackoverflow.com/questions/32987335/how-to-copy-1-d-array-to-2-d-array", "title": "how to copy 1-D array to 2-D array", "body": "<p>i have 1d Array and i have to copy in 2D Array like this </p>\n\n<pre><code>sDaysInMth[0] 31\nsDaysInMth[1] 28\nsDaysInMth[2] 31\nsDaysInMth[3] 30\nsDaysInMth[4] 31\nsDaysInMth[5] 30\nsDaysInMth[6] 31\nsDaysInMth[7] 31\nsDaysInMth[8] 30\nsDaysInMth[9] 31\nsDaysInMth[10] 30\nsDaysInMth[11] 31\n</code></pre>\n\n<p>but Having problem in this code? i am not able to get correct answer.</p>\n\n<pre><code>    static char pvtsWsMthDayTab[24]=\"312831303130313130313031\";\n     char sDaysInMth[12][2] ;\n     static char pvtsWsNbrDyMth[3]=\"\";\n     int i=0 , j = 0 ;\n\n    memset(pvtsWsNbrDyMth,'\\0', sizeof(pvtsWsNbrDyMth));\n    memset(sDaysInMth, '\\0', sizeof(sDaysInMth));    \n     for(i=0; i&lt; 12; i++)\n     {\n        memcpy(sDaysInMth[i], pvtsWsMthDayTab+(i*2), 2);\n\n     }\n\n    for(i=0;i&lt;12;i++)\n    {\n        printf(\"%s \",sDaysInMth[i]); /* printing 2D array*/\n\n        printf(\"\\n\");\n     }\n</code></pre>\n"}, {"tags": ["c", "caching"], "comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1444206774, "post_id": 32987319, "comment_id": 53799578, "body": "Post your code, please."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 3, "creation_date": 1444206814, "post_id": 32987319, "comment_id": 53799608, "body": "It might take almost 10 seconds to read a 1GB file from disk. When in memory, the OS would keep it there for a while as someone might want to read it again."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 2, "creation_date": 1444206901, "post_id": 32987319, "comment_id": 53799662, "body": "It also depends on the operating system."}, {"owner": {"reputation": 4251, "user_id": 4605105, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-_cFfGx1khYs/AAAAAAAAAAI/AAAAAAAAGt0/vfQ_28nwAEE/photo.jpg?sz=128", "display_name": "&#212;rel", "link": "https://stackoverflow.com/users/4605105/%c3%94rel"}, "edited": false, "score": 0, "creation_date": 1444207324, "post_id": 32987319, "comment_id": 53799916, "body": "The opened file will be kept in the cache disk (in RAM if you want). You cannot not pilot the caching, you can only flush it."}, {"owner": {"reputation": 364, "user_id": 1818123, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a49672f2dac0e33d9697dcff95311981?s=128&d=identicon&r=PG", "display_name": "Yacine Hebbal", "link": "https://stackoverflow.com/users/1818123/yacine-hebbal"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1444207666, "post_id": 32987319, "comment_id": 53800118, "body": "@LPs I&#39;ve put a the main function of my code and my linux version"}, {"owner": {"reputation": 364, "user_id": 1818123, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a49672f2dac0e33d9697dcff95311981?s=128&d=identicon&r=PG", "display_name": "Yacine Hebbal", "link": "https://stackoverflow.com/users/1818123/yacine-hebbal"}, "edited": false, "score": 0, "creation_date": 1444207783, "post_id": 32987319, "comment_id": 53800219, "body": "I checked my RAM (with system monitor) after the first execution, but I don&#39;t see any important RAM usage"}, {"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "edited": false, "score": 1, "creation_date": 1444208135, "post_id": 32987319, "comment_id": 53800481, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/7561362/what-can-cause-a-program-to-run-much-faster-the-second-time\">What can cause a program to run much faster the second time?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 364, "user_id": 1818123, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a49672f2dac0e33d9697dcff95311981?s=128&d=identicon&r=PG", "display_name": "Yacine Hebbal", "link": "https://stackoverflow.com/users/1818123/yacine-hebbal"}, "edited": false, "score": 0, "creation_date": 1444208793, "post_id": 32987641, "comment_id": 53800919, "body": "In fact, I can see an additional 1GB of used RAM with free command but not with system monitor application. Thanks :)"}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": true, "score": 1, "last_activity_date": 1444214866, "last_edit_date": 1444214866, "creation_date": 1444207430, "answer_id": 32987641, "question_id": 32987319, "link": "https://stackoverflow.com/questions/32987319/why-execution-of-the-same-program-is-a-lot-faster-after-the-first-time/32987641#32987641", "title": "Why execution of the same program is a lot faster after the first time", "body": "<p>Because the second time, most of your program code and most of the file data are already sitting in the <a href=\"https://en.wikipedia.org/wiki/Page_cache\" rel=\"nofollow\">page cache</a> (and the kernel won't need any disk I/O to get them into RAM)</p>\n\n<p>You'll likely to observe similar speedup if you run any other program (like <code>cat</code> or <code>wc</code>) on that big file which reads it sequentially before running your own code.</p>\n\n<p>See also <a href=\"http://man7.org/linux/man-pages/man2/posix_fadvise.2.html\" rel=\"nofollow\">posix_fadvise(2)</a>, <a href=\"http://man7.org/linux/man-pages/man2/sync.2.html\" rel=\"nofollow\">sync(2)</a> &amp; the Linux specific <a href=\"http://man7.org/linux/man-pages/man2/readahead.2.html\" rel=\"nofollow\">readahead(2)</a> &amp; <a href=\"http://www.linuxatemyram.com/\" rel=\"nofollow\">http://www.linuxatemyram.com/</a> ; use the <a href=\"http://man7.org/linux/man-pages/man1/free.1.html\" rel=\"nofollow\">free(1)</a> command before, during, and after running your program to measure memory. Read also about <a href=\"http://man7.org/linux/man-pages/man5/proc.5.html\" rel=\"nofollow\">proc(5)</a>, since <code>/proc/</code> contains a lot of useful pseudo-files describing the kernel state of your machine or your process.</p>\n\n<p>Use also <a href=\"http://man7.org/linux/man-pages/man1/time.1.html\" rel=\"nofollow\">time(1)</a>, perhaps as <code>/usr/bin/time -v</code>, to benchmark <em>several times</em> your program. See also <a href=\"http://man7.org/linux/man-pages/man7/time.7.html\" rel=\"nofollow\">time(7)</a> &amp; <a href=\"http://man7.org/linux/man-pages/man2/getrusage.2.html\" rel=\"nofollow\">getrusage(2)</a> ...</p>\n"}], "owner": {"reputation": 364, "user_id": 1818123, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a49672f2dac0e33d9697dcff95311981?s=128&d=identicon&r=PG", "display_name": "Yacine Hebbal", "link": "https://stackoverflow.com/users/1818123/yacine-hebbal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 32987641, "answer_count": 1, "score": 0, "last_activity_date": 1444214866, "creation_date": 1444206432, "last_edit_date": 1444207600, "question_id": 32987319, "link": "https://stackoverflow.com/questions/32987319/why-execution-of-the-same-program-is-a-lot-faster-after-the-first-time", "title": "Why execution of the same program is a lot faster after the first time", "body": "<p>I'm working on a C program (Ubuntu 14.04) that does basically:</p>\n\n<ul>\n<li>Opens a 1GB file</li>\n<li>Reads it by buffer of 1MB</li>\n<li>Looks for some objects in the buffer</li>\n<li>Computes the MD5 signature of each object found</li>\n</ul>\n\n<p>My program take 10 secondes the first time to achieve this, and then only 1 seconde the next times (even if I work on a second copy of initial file).</p>\n\n<p>I know that this has something to do with caching, does my program work on cached data after the first time ? or directly show cached results without doing any computation ?</p>\n\n<pre><code>int main(int argc, char** argv) {\nunsigned char buffer[BUFFER_SIZE];\nint i, number, count = 0;\nint start, end = 0;\nFILE *file;\nfile = fopen(\"/dump/ram.lime\", \"r\");\nif (file != NULL) {\n    while ((number = fread(buffer, 1, BUFFER_SIZE, file)) &gt; 0) {           \n        for (i = 0; i &lt; number; i++) {\n            find_object(buffer, &amp;start, &amp;end);\n            md5_compute(&amp;buffer[start], end - start);\n        }\n    }\n} else {\n    printf(\"errno %d \\n\", errno);\n}\nprintf(\"count = %d \\n\", count);\nreturn (EXIT_SUCCESS);\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 59891, "user_id": 1207195, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q3P4g.jpg?s=128&g=1", "display_name": "Adriano Repetti", "link": "https://stackoverflow.com/users/1207195/adriano-repetti"}, "edited": false, "score": 0, "creation_date": 1444206493, "post_id": 32987295, "comment_id": 53799420, "body": "It&#39;s not <i>dangerous</i> but you need some extra-care (to do not exhaust stack), it&#39;s also <i>wrong</i> in C90 but it&#39;s allowed in C99 (if array size is unknown at compile-time then you have to use <i>dynamic arrays</i> allocated with malloc)."}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1444206557, "post_id": 32987295, "comment_id": 53799448, "body": "See <a href=\"http://stackoverflow.com/questions/7326547/is-it-safe-to-use-variable-length-arrays\">Is it safe to use variable-length arrays?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1444207604, "post_id": 32987562, "comment_id": 53800075, "body": "It is just as dangerous as calling a function. You have no way to tell whether there&#39;s enough memory for another stack frame."}, {"owner": {"reputation": 1, "user_id": 5417315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/857c1261a04163fade5ef0b7fdadaf41?s=128&d=identicon&r=PG&f=1", "display_name": "avis21", "link": "https://stackoverflow.com/users/5417315/avis21"}, "edited": false, "score": 0, "creation_date": 1444210088, "post_id": 32987562, "comment_id": 53801814, "body": "Thank you for explanation and about VLA. Now I know new phrase and I still will not use VLA, but malloc as usually."}, {"owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1444210474, "post_id": 32987562, "comment_id": 53802106, "body": "@n.m. While this is true for the general case, there is a large class of programs, those without recursive calls, where the maximum stack use is fixed and can be determined through static analysis. This is commonly done for embedded systems, where a stack size must be specified on a per thread/process basis. This static analysis is impossible when VLA are used."}], "tags": [], "owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "is_accepted": false, "score": 2, "last_activity_date": 1444207209, "creation_date": 1444207209, "answer_id": 32987562, "question_id": 32987295, "link": "https://stackoverflow.com/questions/32987295/array-definition-by-a-function-parameter/32987562#32987562", "title": "Array definition by a function parameter", "body": "<p>It's dangerous in that in C99 and beyond, where you can allocate <em>variable length arrays</em> (VLA), there <strong>is no way to tell whether the allocation succeeded</strong>. If it failed, the likely outcome is a crash--or worse, silent data corruption.</p>\n\n<p>Unlike <code>malloc</code>, which returns <code>NULL</code> when it can't satisfy the request.</p>\n"}], "owner": {"reputation": 1, "user_id": 5417315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/857c1261a04163fade5ef0b7fdadaf41?s=128&d=identicon&r=PG&f=1", "display_name": "avis21", "link": "https://stackoverflow.com/users/5417315/avis21"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1444208549, "creation_date": 1444206336, "last_edit_date": 1444208549, "question_id": 32987295, "link": "https://stackoverflow.com/questions/32987295/array-definition-by-a-function-parameter", "title": "Array definition by a function parameter", "body": "<p>I've never done this, but I'm not sure why the below array definition is wrong.</p>\n\n<p>I have this example code:</p>\n\n<pre><code>typedef struct _SomeObjType {\n   int val;\n   ...\n} SomeObjType;\n\nstatic SomeObjType *oObject = NULL;\noObject = malloc( sizeof(SomeObjType) );\noObject-&gt;val = 300;\n\nstatic Err foo (SomeObjType *object) {\n   if(object == NULL) \n   return -1;\n\n   unsigned char table[object-&gt;val];\n   ...\n}\n</code></pre>\n\n<p>Why is the above array definition in <code>foo</code> dangerous?</p>\n"}, {"tags": ["c", "initialization"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1444205977, "post_id": 32987109, "comment_id": 53799098, "body": "You can&#39;t use a <code>for</code> loop yet? I think if you know <code>switch</code> you should know <code>for</code> or <code>while</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "edited": false, "score": 0, "creation_date": 1444206090, "post_id": 32987109, "comment_id": 53799163, "body": "You haven&#39;t set any of your <code>pro</code> variables to an initial value. What happens if the user never selects the code for one of these variables? It won&#39;t have a value..."}, {"owner": {"reputation": 117, "user_id": 5374980, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/45e8a9977c2c59d16fb1a78297cd83a2?s=128&d=identicon&r=PG&f=1", "display_name": "Silver Archer", "link": "https://stackoverflow.com/users/5374980/silver-archer"}, "edited": false, "score": 0, "creation_date": 1444284951, "post_id": 32987109, "comment_id": 53839992, "body": "We are not allow to use loop in this question ..."}, {"owner": {"reputation": 117, "user_id": 5374980, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/45e8a9977c2c59d16fb1a78297cd83a2?s=128&d=identicon&r=PG&f=1", "display_name": "Silver Archer", "link": "https://stackoverflow.com/users/5374980/silver-archer"}, "edited": false, "score": 0, "creation_date": 1444284975, "post_id": 32987109, "comment_id": 53840005, "body": "Thanks , Evert. I know it now ..."}], "answers": [{"comments": [{"owner": {"reputation": 117, "user_id": 5374980, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/45e8a9977c2c59d16fb1a78297cd83a2?s=128&d=identicon&r=PG&f=1", "display_name": "Silver Archer", "link": "https://stackoverflow.com/users/5374980/silver-archer"}, "edited": false, "score": 0, "creation_date": 1444285171, "post_id": 32987205, "comment_id": 53840086, "body": "Thank you, I know it now and will take note for it to make this won&#39;t happened in my future code anymore. Thanks !"}], "tags": [], "owner": {"reputation": 47440, "user_id": 229410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3e0014fcc07d184018d3b8185a85a09?s=128&d=identicon&r=PG", "display_name": "Rohan", "link": "https://stackoverflow.com/users/229410/rohan"}, "is_accepted": false, "score": 0, "last_activity_date": 1444206090, "creation_date": 1444206090, "answer_id": 32987205, "question_id": 32987109, "link": "https://stackoverflow.com/questions/32987109/basic-c-programming-run-time-check-failure-3-the-variable-pro1-is-being-u/32987205#32987205", "title": "Basic C Programming : Run-Time Check Failure #3 - The variable &#39;pro1&#39; is being used without being initialized", "body": "<p>Initialize your variables,</p>\n\n<pre><code>float pro1=0, pro2=0, pro3=0, pro4=0, pro5=0;\n</code></pre>\n\n<p>It can happen that these variables are used without any value set during the <code>switch</code> statements if it falls through <code>default</code> case.</p>\n"}, {"comments": [{"owner": {"reputation": 117, "user_id": 5374980, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/45e8a9977c2c59d16fb1a78297cd83a2?s=128&d=identicon&r=PG&f=1", "display_name": "Silver Archer", "link": "https://stackoverflow.com/users/5374980/silver-archer"}, "edited": false, "score": 0, "creation_date": 1444285276, "post_id": 32987210, "comment_id": 53840142, "body": "Thank you ! I will be more careful from now on in initialize local variables and test the return of scanf."}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": true, "score": 0, "last_activity_date": 1444206777, "last_edit_date": 1444206777, "creation_date": 1444206100, "answer_id": 32987210, "question_id": 32987109, "link": "https://stackoverflow.com/questions/32987109/basic-c-programming-run-time-check-failure-3-the-variable-pro1-is-being-u/32987210#32987210", "title": "Basic C Programming : Run-Time Check Failure #3 - The variable &#39;pro1&#39; is being used without being initialized", "body": "<p>There are many issues with your code:</p>\n\n<ol>\n<li><p>You are violating the <a href=\"https://en.wikipedia.org/wiki/Don%27t_repeat_yourself\" rel=\"nofollow\">DRY principle</a> in a way that is actually exagerated.</p></li>\n<li><p>You never check the return value from <code>scanf()</code> that could lead to the variable keeping it's previous value or being uninitialized when you use it.</p></li>\n<li><p>You print the value of the <code>probN</code> variables but it might happen that the user never inputs the code for the <code>N</code>th product.</p>\n\n<p>You should initialize them to <code>0</code>, because if the value was never inserted by the user it means that \"<em>no units</em>\" were sold.</p></li>\n<li><p>Your <code>switch</code> statement <strong>will never work</strong>, if you input <code>x</code> with the <code>\"%d\"</code> specifier the second point of these 4 points will be a problem because <code>code</code> will be uninitialized when you reach the <code>switch</code>, you should use the <code>\"%c\"</code> specifier instead and check the value returned by <code>scanf()</code> to be sure that something was scanned.</p>\n\n<p>So instead of</p>\n\n<pre><code>scanf(\"%d\", &amp;code);\n</code></pre>\n\n<p>you need</p>\n\n<pre><code>if (scanf(\" %c\", &amp;code) != 1)\n    wow_this_is_really_unexpected_but_I_am_glad_to_be_careful();\n</code></pre>\n\n<p>it's also wrong to pass a <code>char *</code> when using the <code>\"%d\"</code> specifier, and it's actually a serious bug.</p></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 117, "user_id": 5374980, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/45e8a9977c2c59d16fb1a78297cd83a2?s=128&d=identicon&r=PG&f=1", "display_name": "Silver Archer", "link": "https://stackoverflow.com/users/5374980/silver-archer"}, "edited": false, "score": 0, "creation_date": 1444285012, "post_id": 32987237, "comment_id": 53840017, "body": "Thanks, I know it now, must initialize the local variables. Thanks !"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1444206178, "creation_date": 1444206178, "answer_id": 32987237, "question_id": 32987109, "link": "https://stackoverflow.com/questions/32987109/basic-c-programming-run-time-check-failure-3-the-variable-pro1-is-being-u/32987237#32987237", "title": "Basic C Programming : Run-Time Check Failure #3 - The variable &#39;pro1&#39; is being used without being initialized", "body": "<p>Imagine all your <code>switch</code> statements go through the <code>default</code>case, and you hit the <code>printf()</code> with <code>pro</code>. </p>\n\n<p>Certainly a read before write scenario for an uninitialized automatic local variable will cause <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">undefined behavior</a> in your application, as the value your're trying to read is indeterminate.</p>\n\n<p>Suggestion: Always initialize your local variables.</p>\n"}, {"comments": [{"owner": {"reputation": 117, "user_id": 5374980, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/45e8a9977c2c59d16fb1a78297cd83a2?s=128&d=identicon&r=PG&f=1", "display_name": "Silver Archer", "link": "https://stackoverflow.com/users/5374980/silver-archer"}, "edited": false, "score": 0, "creation_date": 1444285128, "post_id": 32987257, "comment_id": 53840067, "body": "Thank you for you to point out my bug. Thank you ! I will be more careful from now on in this kind of error and warnings."}], "tags": [], "owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "is_accepted": false, "score": 1, "last_activity_date": 1444206540, "last_edit_date": 1444206540, "creation_date": 1444206239, "answer_id": 32987257, "question_id": 32987109, "link": "https://stackoverflow.com/questions/32987109/basic-c-programming-run-time-check-failure-3-the-variable-pro1-is-being-u/32987257#32987257", "title": "Basic C Programming : Run-Time Check Failure #3 - The variable &#39;pro1&#39; is being used without being initialized", "body": "<p>What value has <code>pro1</code> if the user never gave <code>x</code> as the code? Then <code>pro1</code> is never assigned a value--which in C lingo means it is <em>uninitialized</em> when the control reaches</p>\n\n<pre><code>subtotal = pro1 + pro2 + pro3 + pro4 + pro5;\n</code></pre>\n\n<p>If the intent is to use 0 for products that aren't used, you should initialize them with</p>\n\n<pre><code>float pro1 = 0, pro2 = 0, pro3 = 0, pro4 = 0, pro5 = 0;\n</code></pre>\n\n<p><strong>Important: there's another bug in</strong></p>\n\n<pre><code>char code;\nscanf(\"%d\", &amp;code);\n</code></pre>\n\n<p><code>code</code> must be an <code>int</code> if you scan with a <code>%d</code> format. Turn on all the warnings of your compiler! In addition, you <em>must</em> test the return of <code>scanf</code> with</p>\n\n<pre><code>if (scanf(\"%d\", &amp;code) != 1) {\n    /* error: could not convert the input to a number. */\n}\n</code></pre>\n\n<p>Not checking the return from <code>scanf</code> is a sure recipe for surprises.</p>\n"}], "owner": {"reputation": 117, "user_id": 5374980, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/45e8a9977c2c59d16fb1a78297cd83a2?s=128&d=identicon&r=PG&f=1", "display_name": "Silver Archer", "link": "https://stackoverflow.com/users/5374980/silver-archer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 263, "favorite_count": 0, "accepted_answer_id": 32987210, "answer_count": 4, "score": 0, "last_activity_date": 1444206777, "creation_date": 1444205824, "last_edit_date": 1592644375, "question_id": 32987109, "link": "https://stackoverflow.com/questions/32987109/basic-c-programming-run-time-check-failure-3-the-variable-pro1-is-being-u", "title": "Basic C Programming : Run-Time Check Failure #3 - The variable &#39;pro1&#39; is being used without being initialized", "body": "<p>I am a newbie to Computer Science and I'm currently studying first year in university.\nI have a problem when comes to one question today.\nThe question is this :</p>\n<blockquote>\n<p>Write a program to allow the user to enter code and quantity sold for 3 products (use different variables to store these 5 different product codes). Your program is required to calculate the total amount for each product (quantity x unit price) and the grand total of all products sold.</p>\n<p>At the end, your program will display product code, product description, unit price and total amount for each product and also the grand total amount for all the products sold. Use the information on the following table as reference:</p>\n<p><a href=\"https://i.stack.imgur.com/6uOpR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6uOpR.png\" alt=\"Table Reference\" /></a></p>\n<p>PS: you will be expected to have many variables used and many redundant of same codes appear in your program which is fine, because no looping is needed to apply here.</p>\n<p>Extra requirements :</p>\n<ol>\n<li>Set the price to 2 decimal points</li>\n<li>Fix the product code using constant method.</li>\n<li>Use switch statement to get for the product price.</li>\n<li>Include 6% tax calculation in the grand total.</li>\n</ol>\n</blockquote>\n<p>Here is my answer, it is run with no error when I compile the code, but when I try to run it, it has the problem stated :</p>\n<blockquote>\n<p><em>Run-Time Check Failure #3 - The variable 'pro1' is being used without being initialized.</em></p>\n</blockquote>\n<p>My answer code :</p>\n<pre><code>#include &lt;stdio.h&gt;\nint main()\n{\nfloat pro1, pro2, pro3, pro4, pro5;\nfloat subtotal, Tax, total;\nint unit;\nchar code;\nint x, y, z, a, b;\n\nprintf(&quot;Enter the quantity of the product.\\n&quot;);\nscanf(&quot;%d&quot;, &amp;unit);\nprintf(&quot;Enter the product code.(x=12345,y=56789,z=45678,a=13579,b=34567)\\n&quot;);\nscanf(&quot;%d&quot;, &amp;code);\n\nswitch (code)\n{\ncase 'x':\n    pro1 = unit*3.50;\n    break;\ncase 'y':\n    pro2 = unit*3.50;\n    break;\ncase 'z':\n    pro3 = unit*1.20;\n    break;\ncase 'a':\n    pro4 = unit*4.50;\n    break;\ncase 'b':\n    pro5 = unit*1.00;\n    break;\ndefault:\n    printf(&quot;Invalid code.\\n&quot;);\n    break;\n}\n\nprintf(&quot;Enter the quantity of the product.\\n&quot;);\nscanf(&quot;%d&quot;, &amp;unit);\nprintf(&quot;Enter the product code.(x=12345,y=56789,z=45678,a=13579,b=34567)\\n&quot;);\nscanf(&quot;%d&quot;, &amp;code);\n\nswitch (code)\n{\ncase 'x':\n    pro1 = unit*3.50;\n    break;\ncase 'y':\n    pro2 = unit*3.50;\n    break;\ncase 'z':\n    pro3 = unit*1.20;\n    break;\ncase 'a':\n    pro4 = unit*4.50;\n    break;\ncase 'b':\n    pro5 = unit*1.00;\n    break;\ndefault:\n    printf(&quot;Invalid code.\\n&quot;);\n    break;\n}\n\nprintf(&quot;Enter the quantity of the product.\\n&quot;);\nscanf(&quot;%d&quot;, &amp;unit);\nprintf(&quot;Enter the product code.(x=12345,y=56789,z=45678,a=13579,b=34567)\\n&quot;);\nscanf(&quot;%d&quot;, &amp;code);\n\nswitch (code)\n{\ncase 'x':\n    pro1 = unit*3.50;\n    break;\ncase 'y':\n    pro2 = unit*3.50;\n    break;\ncase 'z':\n    pro3 = unit*1.20;\n    break;\ncase 'a':\n    pro4 = unit*4.50;\n    break;\ncase 'b':\n    pro5 = unit*1.00;\n    break;\ndefault:\n    printf(&quot;Invalid code.\\n&quot;);\n    break;\n}\n\nprintf(&quot;Enter the quantity of the product.\\n&quot;);\nscanf(&quot;%d&quot;, &amp;unit);\nprintf(&quot;Enter the product code.(x=12345,y=56789,z=45678,a=13579,b=34567)\\n&quot;);\nscanf(&quot;%d&quot;, &amp;code);\n\nswitch (code)\n{\ncase 'x':\n    pro1 = unit*3.50;\n    break;\ncase 'y':\n    pro2 = unit*3.50;\n    break;\ncase 'z':\n    pro3 = unit*1.20;\n    break;\ncase 'a':\n    pro4 = unit*4.50;\n    break;\ncase 'b':\n    pro5 = unit*1.00;\n    break;\ndefault:\n    printf(&quot;Invalid code.\\n&quot;);\n    break;\n}\n\nprintf(&quot;Enter the quantity of the product.\\n&quot;);\nscanf(&quot;%d&quot;, &amp;unit);\nprintf(&quot;Enter the product code.(x=12345,y=56789,z=45678,a=13579,b=34567)\\n&quot;);\nscanf(&quot;%d&quot;, &amp;code);\n\nswitch (code)\n{\ncase 'x':\n    pro1 = unit*3.50;\n    break;\ncase 'y':\n    pro2 = unit*3.50;\n    break;\ncase 'z':\n    pro3 = unit*1.20;\n    break;\ncase 'a':\n    pro4 = unit*4.50;\n    break;\ncase 'b':\n    pro5 = unit*1.00;\n    break;\ndefault:\n    printf(&quot;Invalid code.\\n&quot;);\n    break;\n}\n\nprintf(&quot;Artline 500A Black (Whiteboard Marker): %f&quot;, pro1);\nprintf(&quot;Artline 500A Red (Whiteboard Marker): %f&quot;, pro2);\nprintf(&quot;Pocket File (Yellow): %f&quot;, pro3);\nprintf(&quot;Pencil Casing: RM %f&quot;, pro4);\nprintf(&quot;A4 Exercise Book: %f&quot;, pro5);\n\nsubtotal = pro1 + pro2 + pro3 + pro4 + pro5;\nTax = subtotal*0.06;\ntotal = subtotal + Tax;\n\nprintf(&quot;Subtotal : %f&quot;, subtotal);\nprintf(&quot;Tax : %f&quot;, Tax);\nprintf(&quot;Total : %f&quot;, total);\n\nsystem(&quot;pause&quot;);\nreturn 0;\n\n}\n</code></pre>\n<p>I have only learned so far about basic I/O operations, if-else statements and switch case statements.</p>\n"}, {"tags": ["c++", "c", "visual-c++", "gcc"], "comments": [{"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 7, "creation_date": 1444202882, "post_id": 32986043, "comment_id": 53797267, "body": "Seems a dubious requirement. How about fixing the code that is triggering the assertion failures instead?"}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 3, "creation_date": 1444203055, "post_id": 32986043, "comment_id": 53797358, "body": "This looks like the back end support functions for the <a href=\"http://en.cppreference.com/w/cpp/error/assert\" rel=\"nofollow noreferrer\"><code>assert()</code></a> makro. Code that triggers an <code>assert()</code> is <b>broken</b> (that&#39;s the purpose of <code>assert()</code>), and needs to be fixed. Patching the <code>assert()</code> to no-op doesn&#39;t fix anything. Besides, code compiled with <code>NDEBUG</code> defined shouldn&#39;t execute <code>assert()</code> in the first place. So I&#39;m with jxh on this one; your requirement is dubious at best."}, {"owner": {"reputation": 14218, "user_id": 440168, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a5b33ee3aa7798d88427679a16d7ad25?s=128&d=identicon&r=PG", "display_name": "k06a", "link": "https://stackoverflow.com/users/440168/k06a"}, "edited": false, "score": 0, "creation_date": 1444203415, "post_id": 32986043, "comment_id": 53797551, "body": "Asserts are really broken, in release there are no problem with asserts. NO asserts - no problems. But in debug there are tons of crashing asserts. Modifying code is not possible right now - megabytes of code..."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1444203471, "post_id": 32986043, "comment_id": 53797582, "body": "If modifying source code is not possible, you should question your development process and work on improving that."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 2, "creation_date": 1444204165, "post_id": 32986043, "comment_id": 53797995, "body": "Typically when people bother writing asserts it&#39;s because the code breaks badly if such preconditions are violated... Your program seeming to work in release mode tells nothing about its correctness - I have worked on lots of projects with memory errors that seemed to work fine most of time - but they crashed randomly with &quot;impossible&quot; errors; the solution was <i>not</i> to disable checks and hope for the best, but enabling each and every possible assertion/tool (regular asserts, debug mode, STL debug, valgrind, debug allocators,...) and <i>fix</i> the friggin&#39; bugs."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1444206610, "post_id": 32986043, "comment_id": 53799487, "body": "You should motivate more your question, and tell more about your software and team (size of software in million lines of code, number of person in the team, what C++ standard is followed, what libraries are used, <b>why cannot you use and have to avoid <code>assert</code></b>, etc...). So please <b>edit your question</b> to improve it."}, {"owner": {"reputation": 14218, "user_id": 440168, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a5b33ee3aa7798d88427679a16d7ad25?s=128&d=identicon&r=PG", "display_name": "k06a", "link": "https://stackoverflow.com/users/440168/k06a"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1444210190, "post_id": 32986043, "comment_id": 53801896, "body": "@BasileStarynkevitch added update2 to question"}, {"owner": {"reputation": 6288, "user_id": 1455631, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d9b8e88a8dbed8a574ed79d075c3f924?s=128&d=identicon&r=PG", "display_name": "Medinoc", "link": "https://stackoverflow.com/users/1455631/medinoc"}, "edited": false, "score": 3, "creation_date": 1444210909, "post_id": 32986043, "comment_id": 53802408, "body": "Silenced asserts are like broken thermometers, they should be removed outright or replaced by unbroken ones on a case-by-case basis, or nursing the patient back to health is going to be even more of a pain in the ass. Also, please tell us what company you work for, so that we may never buy their software."}, {"owner": {"reputation": 14218, "user_id": 440168, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a5b33ee3aa7798d88427679a16d7ad25?s=128&d=identicon&r=PG", "display_name": "k06a", "link": "https://stackoverflow.com/users/440168/k06a"}, "reply_to_user": {"reputation": 6288, "user_id": 1455631, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d9b8e88a8dbed8a574ed79d075c3f924?s=128&d=identicon&r=PG", "display_name": "Medinoc", "link": "https://stackoverflow.com/users/1455631/medinoc"}, "edited": false, "score": 0, "creation_date": 1444213617, "post_id": 32986043, "comment_id": 53804117, "body": "@Medinoc this is not on my main job (thanks, God). Just helping friend to fix bugs when have enough time. Sure, terrible things happens, looks like a crime in software development :)"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1444233855, "post_id": 32986043, "comment_id": 53819006, "body": "Help your friend by convincing them to improve their work habits. Disabling or avoiding <code>assert</code> is plain non-sense. Explain them what <i>technical debt</i> is."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 1, "creation_date": 1444250320, "post_id": 32986043, "comment_id": 53828880, "body": "&quot;I really don&#39;t understand why there are so many objections against silent asserts. In fact, there is no asserts in the RELEASE mode, but nobody cares.&quot; The original idea behind asserts being disabled in release mode is that such checks are (1) costly and (2) should be triggered only in case of bugs (typically when preconditions are violated), which should be absent in released software. Notice that since most checks are actually almost free and in the real world software is definitely not bug-free even when released, many people actually ship release builds <i>with assertions enabled</i>."}], "answers": [{"comments": [{"owner": {"reputation": 14218, "user_id": 440168, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a5b33ee3aa7798d88427679a16d7ad25?s=128&d=identicon&r=PG", "display_name": "k06a", "link": "https://stackoverflow.com/users/440168/k06a"}, "edited": false, "score": 0, "creation_date": 1444204261, "post_id": 32986115, "comment_id": 53798052, "body": "Thanks for your answer, but really this asserts are not used for several years. And project is too large to remove or fix all asserts. I just wanna disable all of them in debug."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "reply_to_user": {"reputation": 14218, "user_id": 440168, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a5b33ee3aa7798d88427679a16d7ad25?s=128&d=identicon&r=PG", "display_name": "k06a", "link": "https://stackoverflow.com/users/440168/k06a"}, "edited": false, "score": 1, "creation_date": 1444204308, "post_id": 32986115, "comment_id": 53798075, "body": "If you believe some <code>assert</code>-s are obsolete, you should discuss that in your team and remove them... Otherwise, the code is increasingly rotten."}, {"owner": {"reputation": 14218, "user_id": 440168, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a5b33ee3aa7798d88427679a16d7ad25?s=128&d=identicon&r=PG", "display_name": "k06a", "link": "https://stackoverflow.com/users/440168/k06a"}, "edited": false, "score": 0, "creation_date": 1444208011, "post_id": 32986115, "comment_id": 53800387, "body": "Most of team members prefer to comment asserts with regexp :)"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "reply_to_user": {"reputation": 14218, "user_id": 440168, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a5b33ee3aa7798d88427679a16d7ad25?s=128&d=identicon&r=PG", "display_name": "k06a", "link": "https://stackoverflow.com/users/440168/k06a"}, "edited": false, "score": 1, "creation_date": 1444208070, "post_id": 32986115, "comment_id": 53800434, "body": "@k06a: this increases the technical debt. The project seems likely to fail or ask you a lot of overtime boring work. Perhaps you should look for another job if you cannot decrease that technical debt."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 2, "creation_date": 1444250693, "post_id": 32986115, "comment_id": 53829070, "body": "Incidentally, you simply cannot patch just <code>__dj_assert</code> to return, as it&#39;s marked as <code>noreturn</code>, so the compiler may as well have replaced the <code>call</code> instruction with a <code>jmp</code> (=&gt; you have no address to return to) or have elided the caller cleanup code from the call sites (=&gt; so if you do a <code>ret</code> the caller finds the stack completely messed up)."}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": true, "score": 4, "last_activity_date": 1444207144, "last_edit_date": 1444207144, "creation_date": 1444202601, "answer_id": 32986115, "question_id": 32986043, "link": "https://stackoverflow.com/questions/32986043/patch-c-c-function-to-just-return-without-execution/32986115#32986115", "title": "Patch C/C++ function to just return without execution", "body": "<p>You need to understand the <a href=\"https://en.wikipedia.org/wiki/Calling_convention\" rel=\"nofollow\">calling conventions</a> for your particular processor <a href=\"https://en.wikipedia.org/wiki/Instruction_set\" rel=\"nofollow\">ISA</a> and system <a href=\"https://en.wikipedia.org/wiki/Application_binary_interface\" rel=\"nofollow\">ABI</a>. See <a href=\"https://en.wikipedia.org/wiki/X86_calling_conventions\" rel=\"nofollow\">this</a> for x86 &amp; x86-64 calling conventions.</p>\n\n<p>Some calling conventions require more than a single <code>ret</code> machine instruction in the epilogue, and you have to count with that. BTW, code of some function usually resides in a <em>read-only</em> <a href=\"https://en.wikipedia.org/wiki/Code_segment\" rel=\"nofollow\">code segment</a>, and you'll need some dirty tricks to patch it and write inside it.</p>\n\n<p>You could compile a no-op function of the same signature, and ask the compiler to show the emitted assembler code (e.g. with <code>gcc -O -Wall -fverbose-asm -S</code>  if using <a href=\"http://gcc.gnu.org/\" rel=\"nofollow\">GCC</a>....)</p>\n\n<p>On Linux you might use dynamic linker <a href=\"http://www.catonmat.net/blog/simple-ld-preload-tutorial/\" rel=\"nofollow\"><code>LD_PRELOAD</code> tricks</a>. If using a recent <a href=\"http://gcc.gnu.org/\" rel=\"nofollow\">GCC</a> you might perhaps consider customizing it with <a href=\"http://gcc-melt.org/\" rel=\"nofollow\">MELT</a>, but I don't think it is worthwhile in your particular case...</p>\n\n<p>However, <strong>you</strong> apparently <strong>have some <a href=\"http://www.tutorialspoint.com/c_standard_library/c_macro_assert.htm\" rel=\"nofollow\"><code>assert</code></a> failure. It is very unlikely that your program could continue without any <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\"><em>undefined behavior</em></a>.</strong> So practically speaking, your program will very likely crash elsewhere with your proposed \"fix\", and you'll lose more of your time with it.\nBetter take enough time to correct the original bug, and improve your development process. Your way is postponing a critical bug correction, and you are extremely likely to spend more time avoiding that bug fix than dealing with it properly  (and finding it <em>now</em>, not later) as you should. <strong>Avoid increasing your <a href=\"https://en.wikipedia.org/wiki/Technical_debt\" rel=\"nofollow\">technical debt</a></strong> and making your code base even more buggy and rotten.</p>\n\n<p>My feeling is that you are going nowhere (except to a big failure) with your approach of patching the binary to avoid <code>assert</code>-s. You should find out why there are violated, and improve the code (either remove the obsolete <code>assert</code>, or improve it, or correct the bug elsewhere that <code>assert</code> has detected).</p>\n"}, {"comments": [{"owner": {"reputation": 14218, "user_id": 440168, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a5b33ee3aa7798d88427679a16d7ad25?s=128&d=identicon&r=PG", "display_name": "k06a", "link": "https://stackoverflow.com/users/440168/k06a"}, "edited": false, "score": 0, "creation_date": 1444203482, "post_id": 32986292, "comment_id": 53797592, "body": "Project is too large and too complex to add this option to all makefiles. Thats why I prefer live function patching."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "reply_to_user": {"reputation": 14218, "user_id": 440168, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a5b33ee3aa7798d88427679a16d7ad25?s=128&d=identicon&r=PG", "display_name": "k06a", "link": "https://stackoverflow.com/users/440168/k06a"}, "edited": false, "score": 2, "creation_date": 1444203659, "post_id": 32986292, "comment_id": 53797708, "body": "@k06a: read <a href=\"https://en.wikipedia.org/wiki/The_Mythical_Man-Month\" rel=\"nofollow noreferrer\">the mythical man month</a>; you&#39;ll realize that your proposed binary patching route will take your <i>more time</i> than understanding the real bug and fixing it."}, {"owner": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "reply_to_user": {"reputation": 14218, "user_id": 440168, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a5b33ee3aa7798d88427679a16d7ad25?s=128&d=identicon&r=PG", "display_name": "k06a", "link": "https://stackoverflow.com/users/440168/k06a"}, "edited": false, "score": 4, "creation_date": 1444204023, "post_id": 32986292, "comment_id": 53797935, "body": "@k06a Your project is to large to do it with <code>ifdef</code>. Your Makefiles are to complex to add a single linking option to it? I believe you have definitely a other very big problem! And only as an addition: If your method you want to patch is known by the compiler, remember it will be inlined somewhere which never can patched or wrapped."}], "tags": [], "owner": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "is_accepted": false, "score": 3, "last_activity_date": 1444203152, "creation_date": 1444203152, "answer_id": 32986292, "question_id": 32986043, "link": "https://stackoverflow.com/questions/32986043/patch-c-c-function-to-just-return-without-execution/32986292#32986292", "title": "Patch C/C++ function to just return without execution", "body": "<p>On Gnu/Linux you can use the <code>--wrap</code>option like this:</p>\n\n<pre><code>gcc source.c -Wl,--wrap,functionToPatch -o prog\n</code></pre>\n\n<p>and your source must add the wrapper function:</p>\n\n<pre><code>void *__wrap_functionToPatch () {} // simply returns\n</code></pre>\n\n<p>Parameters and return values as needed for your function.</p>\n"}], "owner": {"reputation": 14218, "user_id": 440168, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a5b33ee3aa7798d88427679a16d7ad25?s=128&d=identicon&r=PG", "display_name": "k06a", "link": "https://stackoverflow.com/users/440168/k06a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 897, "favorite_count": 0, "accepted_answer_id": 32986115, "answer_count": 2, "score": 0, "last_activity_date": 1444209802, "creation_date": 1444202356, "last_edit_date": 1444209802, "question_id": 32986043, "link": "https://stackoverflow.com/questions/32986043/patch-c-c-function-to-just-return-without-execution", "title": "Patch C/C++ function to just return without execution", "body": "<p>I want to avoid one system function executing in a large project. It is impossible to redefine it or add some <code>ifdef</code> logic. So I want to patch the code to just the <code>ret</code> operation.</p>\n\n<p>The functions are:</p>\n\n<pre><code>void __cdecl _wassert(const wchar_t *, const wchar_t *, unsigned);\n</code></pre>\n\n<p>and:</p>\n\n<pre><code>void __dj_assert(const char *, const char *, int, const char *) __attribute__((__noreturn__));\n</code></pre>\n\n<p>So I need to patch the first one on <code>Visual C++</code> compiler, and the second one on <code>GCC</code> compiler.</p>\n\n<p>Can I just write the <code>ret</code> instruction directly at the address of the <code>_wassert</code>/<code>__dj_assert</code> function, for x86/x64?</p>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>I just wanna modify function body like this:</p>\n\n<pre><code>*_wassert = `ret`;\n</code></pre>\n\n<p>Or maybe copy another function body like this:</p>\n\n<pre><code>void __cdecl _wassert_emptyhar_t *, const wchar_t *, unsigned)\n{\n}\n\nfor (int i = 0; i &lt; sizeof(void*); i++) {\n    ((char*)_wassert)[i] = ((char*)_wassert_empty\n}\n</code></pre>\n\n<p><strong>UPDATE 2:</strong></p>\n\n<p>I really don't understand why there are so many objections against silent <code>asserts</code>. In fact, there is no asserts in the <code>RELEASE</code> mode, but nobody cares. I just want to be able turning on/off the asserts in the <code>DEBUG</code> mode.</p>\n"}, {"tags": ["c", "bit", "bit-shift", "compression"], "comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1444202906, "post_id": 32986026, "comment_id": 53797279, "body": "What is your environment? How could you define and compile a function named <code>read</code>?"}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1444203111, "post_id": 32986026, "comment_id": 53797385, "body": "@LPs, it can be compiled because <code>unistd.h</code> is not included, anyway, you sould avoid these function names."}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1444203549, "post_id": 32986026, "comment_id": 53797637, "body": "There is a big memory leak at <code>container = malloc(64000); ... container = malloc(size);</code> and your code doesn&#39;t seems portable due to endianness."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1444203889, "post_id": 32986026, "comment_id": 53797854, "body": "You need to <code>putc(swapped, fp);</code> only on every fourth character. There&#39;s a similar problem but in reverse in the decompression loop."}], "answers": [{"tags": [], "owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "is_accepted": true, "score": 0, "last_activity_date": 1444205073, "last_edit_date": 1444205073, "creation_date": 1444203899, "answer_id": 32986497, "question_id": 32986026, "link": "https://stackoverflow.com/questions/32986026/c-bitwise-compression-and-decompression/32986497#32986497", "title": "C - bitwise compression and decompression", "body": "<ol>\n<li><p>Your <code>compress</code> function try to open file to write with <code>rb+</code>. It\ntriggers segmentation fault if file does not exists. BTW you must\nuse <code>wb+</code> to write it.</p>\n\n<p>fp = fopen(file, \"wb+\");</p>\n\n<p>Always check the return of fopen to avoid to access a <code>null</code> file descriptor.</p></li>\n<li><p>When you read the file from a compressed file into <code>container</code> you cannot then evaluate the length with <code>strlen</code>, because of it stops at the first '\\0' char (0x00). E.g. Your compression change <code>' '</code> (space or 0x20) to 0x00. This means that strlen gives you the length until that char.</p></li>\n<li><p>Variable <code>newCounter</code>, for the first time in for loop is <code>0</code>, the is not managed by your if-elseif. Your code should be:</p></li>\n</ol>\n\n<hr>\n\n<pre><code>   if(newCounter == 0)      swapped |= counter &lt;&lt; 6;\n   else if(newCounter == 1) swapped |= counter &lt;&lt; 4;\n   else if(newCounter == 2) swapped |= counter &lt;&lt; 2;\n   else                     swapped |= counter;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 0, "last_activity_date": 1444204761, "last_edit_date": 1444204761, "creation_date": 1444204448, "answer_id": 32986689, "question_id": 32986026, "link": "https://stackoverflow.com/questions/32986026/c-bitwise-compression-and-decompression/32986689#32986689", "title": "C - bitwise compression and decompression", "body": "<p>You are redefining the <code>read</code> and <code>write</code> functions from the POSIX library.  Use a different name or make these <code>static</code>.</p>\n\n<p>It is actually recommended to make all local functions in your program <code>static</code>.  This minimizes the risk of collision and allows the compiler to perform better optimizations.</p>\n\n<p>You have other issues in your code, but this one is blocking all attempts at debugging.</p>\n"}], "owner": {"reputation": 11, "user_id": 4067664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9f32b3caa9cc9ce862b17497f7463d6?s=128&d=identicon&r=PG&f=1", "display_name": "kimbert007", "link": "https://stackoverflow.com/users/4067664/kimbert007"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 742, "favorite_count": 1, "accepted_answer_id": 32986497, "answer_count": 2, "score": 0, "last_activity_date": 1444248399, "creation_date": 1444202294, "last_edit_date": 1444248399, "question_id": 32986026, "link": "https://stackoverflow.com/questions/32986026/c-bitwise-compression-and-decompression", "title": "C - bitwise compression and decompression", "body": "<p>I'm wondering about something. I have a couple of *.txt-files containing four characters (multiple of each). The characters in the files are: ' ', ':'. '@' and '\\n'.</p>\n\n<p>What i want to do is to swap those standard ASCII-characters with something that uses less bits. ' ' should be swapped with 00, ':' should be swapped with 01, '@' should be swapped with 01 and '\\n' should be swapped with 02.</p>\n\n<p>The idea is to compress and later have the possibility to decompress the files again.</p>\n\n<p>The thing is, my code doesn't work - and I can't figure out why.</p>\n\n<p>Any help would be appreciated.</p>\n"}, {"tags": ["c", "scanf", "stdio", "file-pointer"], "answers": [{"comments": [{"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 1, "creation_date": 1444204994, "post_id": 32986377, "comment_id": 53798535, "body": "Note that <code>fgets</code> may read partial lines if the buffer provided is not long enough, defeating both your validation process and the line counting scheme.  You can detect this by checking the presence of a final <code>&#39;\\n&#39;</code> at the end of the buffer and reallocate the buffer on such detected partial reads. The non-standard <code>getline</code> function will do that for you, check if your environment provides it."}], "tags": [], "owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "is_accepted": false, "score": 3, "last_activity_date": 1444203433, "creation_date": 1444203433, "answer_id": 32986377, "question_id": 32986013, "link": "https://stackoverflow.com/questions/32986013/reading-file-contents-in-c-keeping-track-of-new-lines/32986377#32986377", "title": "reading file contents in C, keeping track of new lines", "body": "<p>There is no line number counter in the C I/O libraries. You need to keep track of the line number yourself.</p>\n\n<p>I suggest that you read one line at a time using <code>fgets</code>, incrementing your line number counter each time, and then read items from that string using <code>sscanf</code>. </p>\n"}], "owner": {"reputation": 196, "user_id": 3377592, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/2a0f96f915e636dd99ecc10145400c9c?s=128&d=identicon&r=PG&f=1", "display_name": "Ricca", "link": "https://stackoverflow.com/users/3377592/ricca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 361, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1444216696, "creation_date": 1444202225, "question_id": 32986013, "link": "https://stackoverflow.com/questions/32986013/reading-file-contents-in-c-keeping-track-of-new-lines", "title": "reading file contents in C, keeping track of new lines", "body": "<p>I am reading strings in from a data file in C using <code>fscanf()</code> using a loop that goes until <code>EOF</code>. The data file contains strings separated by any white space. As the strings are read in with <code>fscanf()</code> they will be checked for any invalid information. I need to keep track of the line numbers that an item is on so that if an invalid item is detected the line number of that item will be displayed. Like I said though, the data file is not just one string per line. Is there anything more elegant than reading in everything up to a new line, splitting that into individual strings, and checking those strings? Can I determine the line number where the file pointer is currently pointing?</p>\n"}]